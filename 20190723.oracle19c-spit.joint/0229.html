<html id="01527.getting-started-rman.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>RMAN入门</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery User&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96241-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction-backup-recovery.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part-starting-configuring-rman.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="BRADV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-backup-recovery.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part-starting-configuring-rman.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复用户指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-overview-backup-recovery.html" property="item" typeof="WebPage"><span property="name">备份和恢复概述</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">RMAN入门</li>
            </ol>
            <a id="GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" name="GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B"></a><a id="BRADV89346"></a>
            
            <h2 id="BRADV-GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" class="sect2"><span class="enumeration_chapter">2</span> RMAN入门</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章适用于想要立即开始使用RMAN的新用户，而无需先阅读本书中更详细的章节。本章提供了最重要的RMAN概念和任务的最简单摘要。它不能替代备份和恢复文档集的其余部分。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="getting-started-rman.html#GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" title="Recovery Manager（RMAN）是一个Oracle数据库客户端，可在您的数据库上执行备份和恢复任务，并自动管理备份策略。它极大地简化了备份，还原和恢复数据库文件的过程。">RMAN环境概述</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" title="为每个目标数据库预配置了RMAN备份和恢复环境。配置是持久的，并且适用于此目标数据库上的所有后续操作，即使您退出并重新启动RMAN也是如此。">显示默认RMAN配置</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" title="使用BACKUP命令备份文件。RMAN将数据备份到配置的默认设备以获取所请求的备份类型。">备份数据库</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" title="RMAN可以使用存储在RMAN存储库中的信息来生成有关备份活动的报告。">报告RMAN操作</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" title="RMAN存储库元数据始终存储在目标数据库的控制文件中。管理备份时，RMAN维护命令使用此元数据。">维护RMAN备份</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" title="Data Recovery Advisor是一个Oracle数据库工具，它提供用于诊断持久性数据故障的基础结构，向用户提供修复选项，并根据用户的请求执行修复。">使用Data Recovery Advisor诊断和修复故障</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" title="您可以使用Oracle闪回数据库将整个数据库回滚到过去的时间。与介质恢复不同，您无需还原数据文件以将数据库返回到过去状态。">使用闪回数据库重绕数据库</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-rman.html#GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" title="使用RESTORE和RECOVER命令进行RMAN还原和恢复物理数据库文件。">还原和恢复数据库文件</a></p>
                  </li>
               </ul>
            </div><a id="BRADV89347"></a><div class="props_rev_3"><a id="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" name="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE"></a><h3 id="BRADV-GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" class="sect3"><span class="enumeration_section">2.1</span> RMAN环境概述</h3>
               <div>
                  <p>Recovery Manager（RMAN）是一个Oracle数据库客户端，可在您的数据库上执行备份和恢复任务，并自动管理备份策略。它极大地简化了备份，还原和恢复数据库文件的过程。</p>
                  <p>RMAN环境由在备份数据中起作用的实用程序和数据库组成。RMAN的环境至少必须包含以下组件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="glossary.html#GUID-272C4366-303F-4629-9679-1379AAC3FBC1"><span class="xrefglossterm">目标数据库</span></a></p>
                        <p>RMAN与<code class="codeph">TARGET</code>关键字连接的Oracle数据库。目标数据库是RMAN正在其上执行备份和恢复操作的数据库。RMAN始终在数据库的控制文件中维护有关其操作的元数据。RMAN元数据称为<a href="glossary.html#GUID-F5643EDD-CE1B-4A9F-9E6E-ADDFD6452341"><span class="xrefglossterm">RMAN存储库</span></a> 。
                        </p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-BAF6F6F1-D4F1-4F46-B1B6-9F662B7AB35D"><span class="xrefglossterm">RMAN客户端</span></a></p>
                        <p>Oracle Database可执行文件，用于解释命令，指示服务器会话执行这些命令，并将其活动记录在目标数据库控制文件中。RMAN可执行文件随数据库自动安装，通常与其他数据库可执行文件位于同一目录中。例如，Linux上的RMAN客户端位于<code class="codeph">$ORACLE_HOME/bin</code> 。
                        </p>
                     </li>
                  </ul>
                  <p>某些环境使用以下可选组件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">快速恢复区</span></a></p>
                        <p>数据库可以存储和管理与备份和恢复相关的文件的磁盘位置。使用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10234" target="_blank"><code class="codeph">DB_RECOVERY_FILE_DEST</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10235" target="_blank"><code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code></a>初始化参数设置快速恢复区域的位置和大小。
                        </p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">媒体管理软件</span></a></p>
                        <p>RMAN与顺序介质设备（如磁带库）交互所需的应用程序。媒体管理器在备份和恢复期间控制这些设备，管理媒体的加载，标记和卸载。媒体管理设备有时称为<a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> （系统备份到磁带）设备。
                        </p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-CBFA8015-2DFF-42B1-A818-D6C5B92C608F"><span class="xrefglossterm">恢复目录</span></a></p>
                        <p>用于记录针对一个或多个目标数据库的RMAN活动的单独数据库模式。如果控制文件丢失，恢复目录将保留RMAN存储库元数据，这使得在丢失控制文件后更容易恢复和恢复。数据库可能会覆盖控制文件中的旧记录，但RMAN会永久保留目录中的记录，除非用户删除了记录。</p>
                     </li>
                  </ul>
                  <p>本章介绍如何在最基本的配置中使用RMAN，该配置<span class="italic">没有</span>恢复目录或介质管理器。
                  </p>
                  <div class="infoboxnotealso" id="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE__GUID-33AC8CAF-28BD-4CC0-B11E-0874228CC4C1">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="rman-architecture.html#GUID-8ECC1FB0-7D25-4883-B9A6-2593FDB35940" title="Recovery Manager环境包含在备份和恢复策略中发挥作用的各种应用程序和数据库。使用RMAN命令行客户端输入可用于管理备份和恢复操作的所有方面的命令。RMAN信道表示到设备的一个数据流，并且对应于一个数据库服务器会话。在备份或恢复操作期间，通道从输入设备读取数据，对其进行处理，并将其写入输出设备。RMAN支持的设备类型是DISK和SBT（系统备份到磁带）。RMAN可以使用自动通道或手动通道进行备份和恢复操作。RMAN存储库是有关RMAN用于备份，恢复和维护的目标数据库的元数据的集合。Oracle媒体管理层（MML）API允许第三方供应商构建与RMAN配合使用的媒体管理软件，以允许备份到磁带驱动器等顺序媒体设备。在执行备份或还原到媒体管理器之前，必须分配一个或多个通道来处理与媒体管理器的通信。您还可以为媒体管理器配置默认通道。默认通道用于使用媒体管理器且尚未明确分配通道的所有备份和恢复任务。Oracle Secure Backup是一种媒体管理器，可通过文件系统备份到磁带提供可靠，安全的数据保护。支持SAN，千兆以太网和SCSI环境中的所有主要磁带驱动器和磁带库。Oracle备份解决方案计划（BSP）是Oracle PartnerNetwork的一部分，是一组媒体管理器供应商，其产品符合Oracle的MML规范。媒体管理供应商可能会为您的平台提供多种产品。快速恢复区域是可选的磁盘位置，可用于存储与恢复相关的文件。Data Guard将备用数据库维护为生产数据库的事务一致性副本。备用数据库可以是物理备用数据库，也可以是逻辑备用数据库。为了简化RMAN的持续使用以进行备份和恢复，您可以在Data Guard环境中为每个主要和物理备用数据库设置一些持久性配置设置。这些设置控制RMAN行为的许多方面。例如，您可以配置备份保留策略，备份到磁带或磁盘的默认目标，或默认备份设备类型。RMAN使用恢复目录来跟踪Data Guard环境中所有数据库文件的文件名。RMAN命令使用恢复目录元数据在Data Guard环境中的不同物理数据库之间透明地运行。例如，您可以备份物理备用数据库上的表空间，并在主数据库上还原和恢复它。同样，您可以备份主数据库上的表空间，并在物理备用数据库上还原和恢复它。恢复目录通过将每个数据库文件或备份文件与DB_UNIQUE_NAME相关联来跟踪Data Guard环境中的文件。创建文件的数据库与该文件相关联。备份的可访问性与其关联不同。在Data Guard环境中，恢复目录将磁盘备份视为只能与它们关联的数据库访问，而在一个数据库上创建的磁带备份可供所有数据库访问。Recovery Appliance提供了一个集中的远程存储库，用于备份企业中的所有目标数据库。所有目标数据库的备份和备份元数据都由恢复设备上的中央恢复目录（恢复设备目录）管理。">Recovery Manager Architecture</a> ，以获取有关RMAN环境的更详细概述</p>
                        </li>
                        <li>
                           <p>用于<code class="codeph">BACKUP</code>命令语法和语义的<a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="BRADV549"></a><a id="BRADV89348"></a><div class="props_rev_3"><a id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" name="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D"></a><h3 id="BRADV-GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" class="sect3"><span class="enumeration_section">2.2</span>启动RMAN并连接到数据库：快速入门</h3>
               <div>
                  <p>在使用RMAN执行任何操作之前，必须连接到目标数据库。</p>
                  <div class="section">
                     <p>通过在操作系统的命令提示符下发出<code class="codeph">rman</code>命令来启动RMAN客户端。RMAN显示命令提示，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">％rman RMAN&gt;</pre><p>指定和验证与数据库的RMAN连接的方式与SQL * Plus与数据库的连接相同。唯一的区别是与目标或辅助数据库的RMAN连接需要<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限。任何用户都可以被授予此权限。
                     </p>
                     <div class="infoboxnote" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-2023C49E-B271-4D88-B962-102239DBA5DC">
                        <p class="notep1">警告：</p>
                        <p>良好的安全性要求您不要在命令行上以纯文本形式输入密码。仅在RMAN提示请求时在RMAN中输入密码。请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=DBSEG0032" target="_blank"><span class="italic">Oracle数据库安全指南</span></a>以了解密码保护。
                        </p>
                     </div>
                     <p>您可以使用命令行选项或使用<a href="../rcmrf/CONNECT.html#RCMRF114" target="_blank"><code class="codeph">CONNECT TARGET</code></a>命令连接到数据库。以下示例启动RMAN，然后通过Oracle Net作为用户<code class="codeph">sbu</code>连接到目标数据库，该用户<code class="codeph">sbu</code>是使用<code class="codeph">SYSBACKUP</code>权限创建的。RMAN提示输入密码。
                     </p><pre class="oac_no_warn" dir="ltr">％rman RMAN&gt; CONNECT TARGET“sbu @ prod AS SYSBACKUP”目标数据库密码：连接到目标数据库的<span class="italic">密码</span> ：PROD（DBID = 39525561）</pre><p>使用<a href="glossary.html#GUID-665B741C-5624-40B5-81FF-93B1EC67FC56"><span class="xrefglossterm">多租户架构时</span></a> ，您可以按照<span class="q">“ <a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="您可以将RMAN客户端连接到多租户容器数据库（CDB）和可插拔数据库（PDB）。">将RMAN连接到CDB</a> ”中</span>的说明连接到<a href="glossary.html#GUID-EA3DB8F4-F68E-4FC5-A599-32A4886FFF8A"><span class="xrefglossterm">根</span></a>或指定的<a href="glossary.html#GUID-D4239448-A344-41EF-9566-0B7716FEAE72"><span class="xrefglossterm">可插拔数据库（PDB）</span></a> 。
                     </p>
                     <p>要退出RMAN客户端，请在RMAN提示符下输入<code class="codeph">EXIT</code> ：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;退出</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-8B3350B3-06E9-499D-A575-C27B05E248CE">公共RMAN命令行选项的语法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">RMAN [TARGET <span class="italic">connectStringSpec</span> | {CATALOG <span class="italic">connectStringSpec</span> } | LOG ['] <span class="italic">filename</span> ['] [APPEND]。。。] ...connectStringSpec :: = ['] [ <span class="italic">userid</span> ] [/ [ <span class="italic">密码</span> ]] [@ <span class="italic">net_service_name</span> ] [']</pre><p>以下示例将<a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN会话</span></a>的输出附加到<code class="codeph">/tmp/msglog.log</code>的文本文件</p><pre class="oac_no_warn" dir="ltr">％rman TARGET / LOG /tmp/msglog.log APPEND</pre><div class="infoboxnotealso" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-C695D47B-3E10-4D41-8E89-B50F6FD73377">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-E4E287F5-5F36-431A-B069-F360A5B4BC7C" title="RMAN可执行文件随数据库自动安装，通常与其他数据库可执行文件位于同一目录中。例如，Linux上的RMAN客户端位于$ ORACLE_HOME / bin中。您可以从RMAN客户端或操作系统命令行创建数据库连接。可以使用密码文件或操作系统身份验证对这些数据库连接进行身份验证。要执行有用的工作，RMAN客户端必须连接到数据库。与RMAN连接到目标或辅助数据库的用户需要SYSDBA或SYSBACKUP系统特权。可以使用操作系统身份验证来建立到目标或辅助数据库的RMAN连接。使用密码文件进行本地或远程访问。如果数据库使用密码文件对管理用户进行身份验证，则RMAN可以使用密码进行连接。如果在操作系统命令行上启动没有连接字符串的RMAN，则必须在RMAN提示符下发出CONNECT TARGET命令以连接到目标数据库。要从操作系统命令行连接到目标数据库，请输入rman命令，然后输入连接信息。您可以在显示RMAN提示后开始执行命令。您可以将RMAN客户端连接到多租户容器数据库（CDB）和可插拔数据库（PDB）。您可以在整个CDB，仅root用户或一个或多个PDB上执行RMAN操作。直接连接到可插拔数据库（PDB）时，某些限制适用：有多种方法可以将目标连接到根目录。您可以从RMAN提示符或操作系统命令行连接到PDB。您可以通过创建包含CONNECT命令的RMAN命令文件来建立数据库连接。要使用DUPLICATE命令，必须连接到辅助实例。执行表空间时间点恢复（TSPITR）可能还需要连接到辅助实例。在诊断RMAN在连接目标，目录和辅助数据库时遇到的错误时，请考虑使用SQL * Plus直接连接到数据库。此操作可以揭示连接信息或数据库的潜在问题。RMAN使用SYSDBA或SYSBACKUP权限连接到目标数据库和辅助数据库。因此，当您使用SQL * Plus诊断目标或辅助数据库的连接问题时，请求SYSDBA或SYSBACKUP连接以重现RMAN行为。使用SQL * Plus诊断恢复目录连接问题。默认情况下，RMAN将命令输出写入标准输出。要将输出重定向到日志文件，请在启动RMAN时在命令行上输入LOG参数。在调用RMAN之前，设置NLS_DATE_FORMAT和NLS_LANG环境变量可能很有用。这些变量确定RMAN命令（例如RESTORE，RECOVER和REPORT）中时间参数的格式。当RMAN客户端为命令做好准备时，它会显示命令提示符对于重复性任务，您可以创建包含RMAN命令的文本文件，然后使用@参数启动RMAN客户端，后跟文件名。RMAN中的注释字符是井号（＃）。从井号到行尾的所有文本都将被忽略。运行命令文件时，可以在USING子句中指定一个或多个值，以便在命令文件中的替换变量中使用。通过这种方式，您可以使命令文件动态化。您可以在不执行它们的情况下测试RMAN命令的语法正确性。使用命令行参数CHECKSYNTAX以一种模式启动RMAN客户端，在该模式下，它仅解析您输入的命令，并为不合法的RMAN语法的命令返回RMAN-00558错误。您可以交互式检查RMAN命令的语法，而无需实际执行命令。要在命令文件中测试命令，请使用CHECKSYNTAX参数启动RMAN，并使用@命令命名要传递的命令文件。RMAN管道接口是向RMAN发出命令并从这些命令接收输出的另一种方法。使用此接口，可以将可移植的编程接口写入RMAN。此示例假定控制RMAN的应用程序想要连续运行多个命令。在每个命令沿管道发送并执行并返回输出后，RMAN暂停并等待下一个命令。此示例假定控制RMAN的应用程序想要将一个或多个命令作为单个作业运行。运行管道上的命令后，RMAN退出。">启动并与RMAN客户端交互</a> ，以了解有关启动和使用RMAN客户端的更多信息</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV550"></a><a id="BRADV89349"></a><div class="props_rev_3"><a id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" name="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E"></a><h3 id="BRADV-GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" class="sect3"><span class="enumeration_section">2.3</span>显示默认RMAN配置</h3>
               <div>
                  <p>为每个目标数据库预配置了RMAN备份和恢复环境。配置是持久的，并且适用于此目标数据库上的所有后续操作，即使您退出并重新启动RMAN也是如此。</p>
                  <div class="section">
                     <p>RMAN配置设置可以指定备份设备，设置与这些设备的连接（称为<a href="glossary.html#GUID-D7D8E7D7-3CD3-4FCF-AF75-AF2BE11A366F"><span class="xrefglossterm">通道</span></a> ），设置影响备份策略的策略等。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E__GUID-A990043F-E36F-422E-B5E2-6CD3B08C1368">要显示数据库的当前配置：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                     <li class="stepexpand"><span>运行<code class="codeph">SHOW ALL</code>命令。</span><div>
                           <p>例如，在RMAN提示符下输入命令，如下所示：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;全部显示;</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>输出列出<code class="codeph">CONFIGURE</code>命令以重新创建此配置。
                     </p>
                     <div class="infoboxnotealso" id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E__GUID-0A6ED498-21EB-40CA-9276-40A1786B32C6">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="configuring-rman-client-basic.html#GUID-5155F8E6-6E35-4261-9CC1-F12DAA9FAC5B" title="RMAN为执行基本备份和恢复所需的大多数参数提供合理的默认值。您可以修改默认参数的值或覆盖特定会话的这些值。您可以使用SHOW命令显示目标数据库的RMAN配置设置的当前值。您还可以查看这些命令当前是否设置为其默认值。未指定目标设备类型的备份将定向到已配置的默认设备。RMAN已预先配置为使用磁盘作为默认设备类型。无需其他配置。BACKUP命令可以创建备份集或映像副本。对于磁盘，您可以使用CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO命令将RMAN配置为创建备份集或映像副本作为其默认备份类型。RMAN通道是与数据库服务器会话的连接。RMAN使用通道执行大多数任务。使用CONFIGURE CHANNEL命令配置磁盘或SBT通道的选项。您可以为设备类型配置通用通道设置，即用于根据该设备的已配置设置创建的任何通道的模板。默认情况下，RMAN为所有操作分配一个磁盘通道。您可以为此通道指定不同的选项，例如，备份的新默认位置。运行命令时可用于设备类型的通道数确定RMAN是并行读取还是写入。通常，执行命令时使用的通道数应与访问的设备数相匹配。如果在作业期间手动分配通道，则RMAN将忽略任何已配置的通道设置。您可以配置RMAN以自动备份控制文件和服务器参数文件。每当添加备份记录时都会发生自动备份。默认情况下，所有已配置设备的自动备份文件的格式是FORMAT子句中的替换变量％F。SET CONTROLFILE AUTOBACKUP FORMAT命令可以在RUN命令或RMAN提示符下指定，仅在当前会话中覆盖已配置的自动备份格式。在大多数平台上，要备份到磁带等顺序介质并从中恢复，必须将介质管理软件与Oracle数据库集成。您可以将支持数据库和文件系统备份的Oracle Secure Backup用作磁带，作为媒体管理器。在尝试将RMAN与媒体管理器一起使用之前，请确定媒体管理库的位置。安装介质管理软件后，请执行供应商所需的配置，以便软件可以接受RMAN备份。确认数据库服务器可以加载介质管理库之后，请进行测试以确保RMAN可以备份到介质管理器。ALLOCATE CHANNEL命令用于执行与媒体管理器的RMAN通信的基本测试。在媒体管理器上测试通道分配后，创建并恢复测试备份。配置SBT通道会创建一个持久性设置，该设置是用于使用媒体管理器进行备份和恢复操作的默认设置。备份片名由BACKUP命令，CONFIGURE CHANNEL命令或ALLOCATECHANNEL命令中指定的FORMAT字符串确定。备份到媒体管理器的最简单方法是配置自动SBT通道.RMAN命令可用于将目标数据库备份到零数据丢失恢复设备（恢复设备）。将恢复设备用作目标数据库备份的集中存储库需要某些配置步骤。在使用RMAN将目标数据库备份到零数据丢失恢复设备（恢复设备）之前，必须在目标数据库的Oracle主目录中安装恢复设备备份模块。在将Oracle数据库备份到零数据丢失恢复设备（恢复设备）之前，需要进行RMAN配置。在使用RMAN将目标数据库备份到零数据丢失恢复设备（恢复设备）之前，需要确定目标数据库主机上恢复设备备份模块的位置。在为恢复设备配置或分配RMAN通道时使用此位置。存储在受保护数据库中的客户端配置文件包含零数据丢失恢复设备（恢复设备）备份模块用于与恢复设备通信的配置设置。安装Recovery Appliance备份模块时会自动创建此文件。快速恢复区域功能使您可以设置磁盘区域，数据库可以在该区域中创建和管理与备份和恢复相关的各种文件。强烈建议使用快速恢复区域。考虑将快速恢复区域配置为实施备份策略的第一步。快速恢复区域可以包含控制文件，联机重做日志，归档重做日志，闪回日志和RMAN备份。快速恢复区域可以与Oracle托管文件（OMF）一起使用，快速恢复区域中的自动存储管理（ASM）空间在必须根据保留策略保留的备份和归档日志之间进行平衡，以及可能存在的其他文件可能会被删除。通过设置两个初始化参数来启用快速恢复区域。这些参数启用快速恢复区域，无论是否必须关闭并重新启动数据库实例。快速恢复区域越大，它就越有用。理想情况下，快速恢复区域足够大，可以包含控制文件，联机重做日志，归档重做日志和闪回日志。它应该能够包含数据库中所有数据文件的副本以及所选备份策略使用的增量备份。使用数据库初始化参数来设置快速恢复区域的位置和大小。您可以使用ALTER SYSTEM命令禁用快速恢复区域。使用初始化参数配置控制文件和重做日志的默认位置。初始化参数CONTROL_FILES，DB_CREATE_ONLINE_LOG_DEST_n，DB_RECOVERY_FILE_DEST和DB_CREATE_FILE_DEST都相互作用以确定创建数据库控制文件的位置。Oracle建议您将快速恢复区域用作归档位置，因为归档日志由数据库自动管理。某些RMAN命令或隐式操作（例如控制文件自动备份）可以在快速恢复区域中创建文件。备份保留策略指定必须保留哪些备份以满足您的数据恢复要求。CONFIGURE RETENTION POLICY命令的REDUNDANCY参数指定RMAN保留的每个数据文件和控制文件的完整备份数或0级备份数。默认保留策略为REDUNDANCY 1。CONFIGURE命令的RECOVERY WINDOW参数指定当前时间与最早可恢复点之间的天数。禁用保留策略时，RMAN不会将任何备份视为过时。运行RMAN CONFIGURE命令以启用和禁用备份优化。如果备份了相同的文件或相同版本的文件，则备份优化会在某些情况下跳过文件备份。启用备份优化时，BACKUP命令会在将相同文件备份到指定的设备类型时跳过备份文件。备份到SBT设备时，并不总是应用备份优化。默认情况下，备份优化配置为OFF。您可以使用SHOW BACKUP OPTIMIZATION命令查看备份优化的当前设置。您可以使用RMAN创建一个持久性配置，以管理归档重做日志何时有资格从磁盘中删除。您可以使用CONFIGURE ARCHIVELOG DELETION POLICY命令指定归档重做日志何时符合删除条件。默认情况下，没有归档重做日志删除策略，这就是归档重做日志策略设置为NONE子句的原因。您可以使用CONFIGURE ARCHIVELOG DELETION POLICY BACKED UP整数TIMES TO DEVICE TYPE命令启用存档日志删除策略。此配置指定仅当指定设备类型上存在指定数量的归档日志备份时，归档日志才有资格删除。默认情况下，归档重做日志删除策略设置为NONE。如果在Data Guard环境中使用RMAN，则可以使用CONFIGURE命令在此环境中注册和配置物理数据库的设置。">配置RMAN环境</a>和<a href="configuring-rman-client-advanced.html#GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A" title="CONFIGURE CHANNEL命令用于配置RMAN通道选项。无论是手动分配通道还是使用自动通道分配，都可以使用通道命令和选项来控制行为。除了配置适用于特定类型的所有通道的参数外，还可以使用CONFIGURE命令配置适用于特定通道的参数。PARALLELISM设置不受特定配置通道数量的限制。备份选项使您可以控制备份大小，备份压缩和备份加密等方面。CONFIGURE MAXSETSIZE命令限制在通道上创建的备份集的大小。当使用BACKUP命令创建备份集时，此CONFIGURE设置适用于任何通道，无论是手动分配还是已配置。默认值以字节为单位，向下舍入为最低千字节值。当备份片大小超过文件系统或媒体管理软件允许的最大文件大小时，它是一个问题。您可以使用CONFIGURE CHANNEL或ALLOCATE CHANNEL命令的MAXPIECESIZE参数来限制备份片的大小。使用配置...BACKUP COPIES命令指定在指定类型的文件的指定设备类型上创建每个备份片的副本数。此类备份称为双工备份集。有时，您可能希望从常规备份计划的一部分中省略指定的表空间。使用CONFIGURE命令配置表空间排除。RMAN支持预压缩处理和备份集的二进制压缩。CONFIGURE COMPRESSION ALGORITHM命令可以配置压缩选项。通过合并每个数据块中的可用空间并将该空闲空间设置为二进制零来实现更好的备份压缩比。对于已经成为许多删除和插入操作主题的数据块，此预压缩处理阶段具有最大优势。相反，它对仍处于初始加载状态的数据块没有影响。Oracle数据库提供两类压缩算法：默认压缩算法和Oracle Advanced Compression选项提供的一组压缩算法。使用CONFIGURE命令配置默认压缩算法，该算法不需要Oracle Advanced Compression选项。为了提高安全性，您可以为RMAN备份集配置备份加密。如果未经授权的用户获取加密备份，则无法读取这些备份。V $ RMAN_ENCRYPTION_ALGORITHMS视图包含RMAN支持的加密算法列表。如果未指定加密算法，则默认加密算法为128位高级加密标准（AES）。如果所需的Oracle密钥管理基础结构可用，则透明加密可以在没有DBA干预的情况下创建和恢复加密备份。密码加密要求DBA在创建和还原加密备份时提供密码。恢复密码加密的备份需要使用与创建备份相同的密码。可以透明地或通过指定密码来恢复双模式加密备份。您可以使用CONFIGURE命令持久配置备份的透明加密。您可以使用CONFIGURE命令持久配置在编写备份集时用于加密的默认算法。在执行诸如数据文件表空间时间点恢复（TSPITR）或使用RMAN进行数据传输等操作时，您可能希望在辅助实例中设置数据文件的名称。在启动TSPITR或数据库复制之前设置这些名称。当RMAN需要控制文件的读取一致版本时，它会创建临时快照控制文件。在与恢复目录重新同步时或在备份当前控制文件时，RMAN需要快照控制文件。您可以通过运行SHOW命令查看当前快照位置。使用CONFIGURE SNAPSHOT CONTROLFILE NAME命令&#39;filepath&#39;命令更改快照控制文件的名称和路径。RMAN创建的后续快照控制文件使用指定的名称和路径。RMAN无法通过共享服务器调度程序连接到目标数据库。RMAN需要专用的服务器进程。当I / O子系统确认块写入完成时，会发生数据块丢失写入，但写入未在持久存储中发生。在随后的块读取中，I / O子系统返回数据块的陈旧版本，该版本可能用于更新数据库的其他块，从而破坏它。影子丢失写保护提供快速检测和对数据块丢失重写的即时响应，从而最大限度地减少数据丢失和数据库修复时间。使用影子丢失写保护不是必需的备用数据库。">配置RMAN环境：高级主题</a> ，以了解如何配置RMAN环境</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89350"></a><div class="props_rev_3"><a id="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" name="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022"></a><h3 id="BRADV-GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" class="sect3"><span class="enumeration_section">2.4</span>备份数据库：快速入门</h3>
               <div>
                  <p>使用BACKUP命令备份文件。RMAN将数据备份到配置的默认设备以获取所请求的备份类型。</p>
                  <p>默认情况下，RMAN在磁盘上创建备份。如果启用了快速恢复区域，并且未指定<code class="codeph">FORMAT</code>参数（请参阅<a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ" title="常见的BACKUP选项">表2-1</a> ），则RMAN会在恢复区域中创建备份并自动为其指定唯一名称。
                  </p>
                  <p>默认情况下，RMAN会创建备份集而不是映像副本。<a href="glossary.html#GUID-6AA43E7D-9946-4C41-A62F-01E5BACEB8A7"><span class="xrefglossterm">备份集</span></a>由一个或多个备份片组成，这些备份片是以只有RMAN才能访问的格式编写的物理文件。<a href="glossary.html#GUID-EA6CE3E8-6986-4512-AF66-710D80376093"><span class="xrefglossterm">多路复用备份集</span></a>包含来自多个输入文件的块。RMAN可以将备份集写入磁盘或磁带。
                  </p>
                  <p>如果指定<code class="codeph">BACKUP</code> <code class="codeph">AS</code> <code class="codeph">COPY</code> ，则RMAN将每个文件<a href="glossary.html#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">复制</span></a>为<a href="glossary.html#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">映像副本</span></a> ，这是在磁盘上创建的数据库文件的逐位副本。映像副本与使用操作系统命令（如Linux上的<code class="codeph">cp</code>或Windows上的<code class="codeph">COPY</code>创建的副本相同，但是会记录在RMAN存储库中，因此可供RMAN使用。在数据库打开时，您可以使用RMAN进行映像复制。
                  </p>
                  <p>以下部分描述了以不同模式备份数据库：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" title="BACKUP命令包括一系列控制备份输出的选项，参数和子句。">关于典型的RMAN备份选项</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" title="如果数据库在ARCHIVELOG模式下运行，则可以在数据库打开时备份数据库。">在ARCHIVELOG模式下备份数据库</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" title="如果数据库在NOARCHIVELOG模式下运行，则唯一有效的数据库备份是一致的备份。">在NOARCHIVELOG模式下备份数据库</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-0B997E06-7881-444D-A910-CFC37C25DF72" title="增量备份捕获在先前增量备份之后对数据库进行的块级更改。">进行增量备份</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" title="通过逐步更新的备份，您可以实施有效的增量备份永久备份策略。">进行增量更新备份</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" title="RMAN支持使用命令文件来管理重复性任务，例如每周备份。">编写RMAN操作脚本</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022__GUID-604D4F5F-5BD6-46E8-9793-355357A945AE">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-B3380142-ABCD-437F-9E06-B219D74E6738" title="使用RMAN BACKUP命令创建一致和不一致的备份。当数据库处于一致状态时，将发生一致的备份。您可以使用BACKUP命令对数据库进行一致的备份。任何不一致的数据库备份都是不一致的备份。数据库打开时进行的备份不一致，实例失败或SHUTDOWN ABORT命令后进行备份也是如此。您可以创建RMAN备份或用户管理的备份。在RMAN中执行BACKUP命令时，您将创建一个或多个备份集或映像副本。默认情况下，无论目标是磁盘还是媒体管理器，RMAN都会创建备份集。RMAN可以将备份数据存储在称为备份集的逻辑结构中，该备份集是RMAN备份的最小单元。创建备份集时，RMAN可以使用块压缩。使用未使用的块压缩时，RMAN会跳过读取和备份当前未分配给某个数据库对象的任何数据库块。这与先前是否已分配这些块无关。当使用空块压缩时，RMAN从其输出中省略任何从未包含数据的块。RMAN支持备份集的二进制压缩。二进制压缩仅在BACKUP命令中指定AS COMPRESSED BACKUPSET时启用，或者一次使用配置设备类型[DISK | SBT] BACKUP TYPE TO COMPRESSED BACKUPSET命令。在备份撤消优化中，RMAN排除了恢复备份时不需要的撤销，即已经提交的事务。RMAN支持备份集的备份加密。您可以使用基于密钥库的透明加密，基于密码的加密或两者。您可以让RMAN确定备份片段的唯一名称，也可以使用FORMAT子句指定名称。默认情况下，备份集包含一个备份片。要限制每个备份片的大小，请指定CONFIGURE CHANNEL或ALLOCATE CHANNEL命令的MAXPIECESIZE选项。您可以使用BACKUP命令的backupSpec子句指定要备份的对象。每个backupSpec子句至少生成一个备份集。创建备份集时，RMAN可以同时从磁盘读取多个文件，然后将其块写入同一备份集。例如，RMAN可以同时读取两个数据文件，然后将这些数据文件中的块组合成一个备份片。来自多个文件的块组合称为备份多路复用。在代理副本期间，RMAN将数据传输的控制权转交给支持此功能的媒体管理器。代理副本只能与支持它的媒体管理器一起使用，不能与DISK类型的通道一起使用。 BACKUP命令的PROXY选项指定备份是代理副本。映像副本是单个数据文件，归档重做日志文件或控制文件的精确副本。要创建映像副本并将其记录在RMAN存储库中，请运行RMAN BACKUP AS COPY命令。RMAN可以使用由RMAN外部的机制创建的映像副本，例如本机操作系统文件复制命令或将文件的映像副本保留在磁盘上的第三方实用程序。此类副本称为用户管理的备份或操作系统备份。您可以使用RMAN BACKUP命令从稀疏数据文件，包含稀疏数据文件的表空间，稀疏可插拔数据库（PDB）和包含稀疏PDB的多租户容器数据库（CDB）备份数据块。预包装备份是在非CDB或PDB插入其他CDB之前创建的非CDB或PDB的RMAN备份.RMAN使您可以创建多个相同的备份副本。RMAN BACKUP BACKUPSET命令备份在磁盘上创建的备份集。该命令是在多个媒体之间传播备份的有用方法。在许多恢复情况下，最近备份控制文件和服务器参数文件非常有用。为确保您备份这些文件，数据库支持控制文件和服务器参数文件自动备份。根据目标数据库的配置，RMAN可以执行控制文件和服务器参数文件的自动备份。在备份作业期间分配的第一个通道创建自动备份并将其放入其自己的备份集中。对于数据库结构更改后的自动备份，与结构更改关联的服务器进程进行备份。增量备份仅复制自上次备份以来已更改的数据块。您可以使用RMAN创建数据文件，表空间或整个数据库的增量备份。RMAN可以创建多级增量备份。每个增量级别由值0或1表示。在差异级别1备份中，RMAN备份自级别1（累积或差异）或级别0的最新增量备份以来已更改的所有块。在累积级别1备份中，RMAN备份自当前或父级化身中最近的0级增量备份以来使用的所有块。增量备份的块更改跟踪功能通过在块更改跟踪文件中记录每个数据文件中的更改块来提高增量备份性能。在介质恢复期间，RMAN会检查还原的文件，以确定是否可以使用增量备份来恢复它们。如果可以选择，则RMAN始终在归档重做日志上选择增量备份，因为在块级别应用更改比应用重做更快。备份永久备份策略消除了在备份到零数据丢失恢复设备（恢复设备）时创建重复完整备份的需要。虽然Recovery Appliance支持其他RMAN备份策略，但是持续备份的推荐方法是永久增量备份策略。您可以使用CONFIGURE RETENTION POLICY命令创建持久性和自动备份保留策略。恢复窗口是一个以当前时间开始并向后延伸到可恢复点的时间段。可恢复性是假设时间点恢复的最早时间，也就是说，在媒体故障后您可以恢复的最早时间点。在某些情况下，使用恢复窗口会使磁盘空间规划复杂化，因为必须保留的备份数量不是恒定的，并且取决于备份计划。相反，基于冗余的保留策略指定必须保留每个数据文件的备份数。您可以运行REPORT OBSOLETE命令，以根据保留策略确定当前哪些备份已过时。如果配置快速恢复区域，则数据库使用内部算法选择快速恢复区域中不再需要的文件以满足配置的保留策略。">RMAN备份概念</a> ，用于学习与RMAN备份相关的概念</p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="使用BACKUP命令创建RMAN备份。RMAN备份的主要目的是保护您的数据。如果发生介质故障或灾难，则可以还原备份并恢复丢失的更改。您可以使用RMAN客户端中的BACKUP命令备份全部或部分数据库。您可以为BACKUP命令提供参数以覆盖默认备份选项。BACKUP命令采用DEVICE TYPE子句，指定是备份到磁盘还是磁带设备。RMAN可以在磁盘上创建备份作为映像副本或备份集。RMAN提供了一系列选项来命名BACKUP命令生成的文件。备份到磁盘时，您可以指定一种格式以将备份分布在多个驱动器上以提高性能。RMAN将一个称为标记的字符串附加到它创建的每个备份上，作为识别备份的一种方式。您可以接受默认标记，也可以使用BACKUP命令的TAG参数指定自己的标记。用户指定的标记是指示不同类别的备份或副本的用途或用法的有用方法。将TAG参数与BACKUP命令一起使用可指定备份集和映像副本的标记。创建备份集时，可以通过在BACKUP命令中包含AS COMPRESSED BACKUPSET选项，使用RMAN支持对备份集进行二进制压缩。通过多节备份，可以将大型数据文件划分为多个部分，这些部分可以跨多个通道并行备份。这提供了更快的备份性能和更好的恢复时间。在创建映像副本时，RMAN使用多个通道写入文件节。但是，此操作的输出是每个数据文件的一个副本。您可以在装入或打开数据库的情况下执行整个数据库备份。您可以使用BACKUP TABLESPACE命令备份一个或多个表空间，或使用BACKUP DATAFILE命令备份一个或多个数据文件。您可以在装入或打开数据库时备份控制文件。RMAN使用快照控制文件来确保读取一致的版本。控制文件的手动备份与控制文件自动备份不同。在备份BACKUP命令中指定的文件后，RMAN会进行控制文件自动备份。要进行手动备份，可以在备份其他文件时指定INCLUDE CURRENT CONTROLFILE或指定BACKUP CURRENT CONTROLFILE。在某些情况下，RMAN会自动备份当前服务器参数文件。BACKUP SPFILE命令显式备份参数文件。备份的服务器参数文件是实例当前使用的文件。只有在数据库关闭且处于一致状态时，才能以NOARCHIVELOG模式备份数据库。预打印备份确保在将非CDB作为PDB插入CDB后可以使用RMAN备份。使用BACKUP命令备份多租户容器数据库（CDB）和可插拔数据库（PDB）。RMAN和Oracle Enterprise Manager Cloud Control为多租户环境中的备份和恢复提供全面支持。备份整个多租户容器数据库（CDB）类似于备份非CDB。备份整个CDB时，RMAN会备份根，所有可插拔数据库（PDB）和归档重做日志。您可以使用RMAN仅备份根。由于根包含整个CDB的关键元数据，因此Oracle建议您定期备份根或备份整个CDB。Oracle Enterprise Manager云控制（云控制）可用于备份根。RMAN允许您使用BACKUP命令备份CDB中的一个或多个PDB。迁移PDB并将其插入到不同的目标CDB后，PDB的预打印备份可用于执行还原和恢复操作.Oracle Enterprise Manager云控制（云控制）可用于执行可插拔数据库（PDB）的备份。由于不同PDB中的表空间可以具有相同的名称，因此为了消除歧义，您必须直接连接到PDB以备份其一个或多个表空间。此示例创建CDB cdb_prod中包含的PDB my_pdb的预包装备份。CDB使用共享撤消，并在读写模式下打开。RMAN使您可以使用BACKUP命令在应用程序根，一个或多个应用程序PDB和应用程序容器上执行备份操作。RMAN可以备份应用程序容器，应用程序PDB和应用程序根目录。使用RMAN BACKUP命令备份应用程序根目录。使用BACKUP命令备份应用程序容器，该容器由应用程序根目录和属于应用程序根目录的所有应用程序PDB组成。BACKUP命令用于备份一个或多个应用程序PDB。使用BACKUP命令备份稀疏数据库。RMAN使您可以使用备份集或映像副本格式中的备份整个数据库的步骤来备份稀疏数据库。您可以使用BACKUP命令备份包含稀疏数据文件或单个稀疏数据文件的一个或多个表空间。RMAN使您可以备份CDB中的一个或多个稀疏PDB。归档重做日志是成功恢复媒体的关键。你应该定期备份它们。RMAN备份的若干功能特定于归档重做日志。例如，您可以使用BACKUP ...删除以将备份到备份集后从磁盘中删除一个或所有归档重做日志副本。即使您的重做日志存档到多个目标并且您使用RMAN备份存档的重做日志，RMAN也只选择一个存档的重做日志文件副本以包含在备份集中。由于具有相同日志序列号的日志相同，因此RMAN不需要包含多个日志副本。自动在线重做日志切换是一项重要的RMAN功能。在CDB中，只有当您以具有SYSDBA或SYSBACKUP权限的普通用户身份连接到根时，才能备份存档的重做日志。要备份存档日志，请使用BACKUP ARCHIVELOG命令。您可以指示RMAN应自动跳过归档重做日志的备份。您可以使用BACKUP ARCHIVELOG命令备份多租户容器数据库（CDB）中的归档重做日志。BACKUP ARCHIVELOG ......DELETE INPUT命令在备份后删除存档的日志文件。此命令消除了手动删除存档重做日志的单独步骤。在CDB中，您可以使用BACKUP ARCHIVELOG备份后删除存档的重做日志...DELETE INPUT命令。增量备份仅复制自指定的先前备份以来已更改的数据文件块。使用BACKUP命令创建增量备份。RMAN增量备份提供多种好处。根据可接受的MTTR（平均恢复时间）选择备份策略。您可以将卷影复制服务（VSS）与Oracle VSS编写器一起使用，以在数据库中制作卷影副本或文件快照。通过逐步更新备份，可以避免对数据文件进行完整映像副本备份的开销，同时还可以最大限度地减少介质恢复数据库所需的时间。例如，如果您运行每日备份脚本，那么您永远不会有超过1天的重做时间来申请媒体恢复。要创建增量备份以用于增量更新的备份策略，请使用BACKUP ...使用TAG形式的BACKUP命令恢复COPY。在实现策略的示例脚本中最好地理解该命令。增量备份的块更改跟踪功能通过记录每个数据文件的更改块来提高备份性能。如果在主数据库或备用数据库上启用了块更改跟踪，则RMAN使用块更改跟踪文件来标识已更改的块以进行增量备份。通过读取这个小位图文件来确定哪些块发生了变化，RMAN避免了必须扫描它备份的数据文件中的每个块。Oracle数据库自动管理更改跟踪文件中的空间，以保留涵盖最近八个备份的块更改数据。达到最多八个位图后，最旧的位图将被跟踪当前更改的位图覆盖。默认情况下，块更改跟踪文件在DB_CREATE_FILE_DEST初始化参数指定的目标中创建为Oracle托管文件。您还可以通过在启用块更改跟踪时指定其名称，将块更改跟踪文件放在您选择的任何位置。块更改跟踪文件的大小与数据库的大小和重做的已启用线程数成比例。您可以在打开或装入数据库时启用块更改跟踪。禁用块更改跟踪时，数据库将从操作系统中删除块更改跟踪文件。您可以查询V $ BLOCK_CHANGE_TRACKING视图以确定是否启用了更改跟踪，如果是，则确定块更改跟踪文件的文件名。要移动更改跟踪文件，请使用ALTER DATABASE RENAME FILE语句。你可以使用BACKUP ......保持创建既包含所有权又不受备份保留策略限制的备份。通过使用带有BACKUP命令的KEEP选项，可以从保留策略中免除备份。通常，您将归档备份到磁带。由于您的数据保护备份最有可能位于一组仍可访问且可回收的磁带上，因此建议为归档备份保留一组磁带。使用带有KEEP选项的BACKUP命令进行归档备份。归档备份的一个目的是创建测试数据库。您可以使用BACKUP BACKUPSET命令备份其他备份作业生成的备份集。您还可以使用BACKUP RECOVERY AREA备份在当前和所有先前快速恢复区域目标中创建的恢复文件。BACKUP BACKUPSET命令在备份集中创建备份片的其他副本，但不创建新的备份集。对于基于冗余的备份保留策略，备份集将计为备份的一个实例。即使存在构成备份集的备份片的多个副本（例如，备份集已从磁盘备份到磁带），此语句也是如此。使用BACKUP BACKUPSET命令将备份集从磁盘复制到磁带。使用BACKUP命令将映像副本备份到磁带。">备份数据库</a> ，了解如何使用RMAN备份数据库文件</p>
                        </li>
                        <li>
                           <p>用于<code class="codeph">BACKUP</code>命令语法和语义的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV121"></a><a id="BRADV89352"></a><div class="props_rev_3"><a id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" name="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC"></a><h4 id="BRADV-GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" class="sect4"><span class="enumeration_section">2.4.1</span>关于典型的RMAN备份选项</h4>
                  <div>
                     <p><code class="codeph">BACKUP</code>命令包括一系列控制备份输出的选项，参数和子句。
                     </p>
                     <p><a href="getting-started-rman.html#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ" title="常见的BACKUP选项">表2-1</a>列出了一些典型的备份选项。
                     </p>
                     <div class="tblformal" id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ">
                        <p class="titleintable">表2-1常用备份选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="常用备份选项" width="100%" border="1" summary="Common BACKUP options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e1624">选项</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e1627">描述</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e1630">例</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e1635" headers="d12434e1624 ">
                                    <p><code class="codeph">格式</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e1635 d12434e1627 ">
                                    <p>指定备份片和副本的位置和名称。您必须使用替换变量来生成唯一的文件名。</p>
                                    <p>最常见的替换变量是<code class="codeph">%U</code> ，它生成唯一的名称。其他包括DB_NAME的<code class="codeph">%d</code> ，备份集时间戳的<code class="codeph">%t</code> ，备份集号的<code class="codeph">%s</code>和备份件号的<code class="codeph">%p</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e1635 d12434e1630 "><pre class="oac_no_warn" dir="ltr">备份格式'AL_％d /％t /％s /％p'ARCHIVELOG LIKE'％arc_dest％';</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e1663" headers="d12434e1624 ">
                                    <p><code class="codeph">标签</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e1663 d12434e1627 ">
                                    <p>指定用户定义的字符串作为备份的标签。如果未指定<a href="glossary.html#GUID-7679D8DB-B41A-4DDC-A1DD-20CEDC0BCA8E"><span class="xrefglossterm">标记</span></a> ，则RMAN会为默认标记分配日期和时间。标记始终以大写形式存储在RMAN存储库中。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e1663 d12434e1630 "><pre class="oac_no_warn" dir="ltr">BACKUP TAG'weekly_full_db_bkup'数据库MAXSETSIZE 10M;</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__GUID-B13D0E9D-1874-481D-84A1-D0B14CB46542">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="backing-up-database.html#GUID-FCD2EDB0-817F-4E92-A318-6E4BEC35B467" title="您可以为BACKUP命令提供参数以覆盖默认备份选项。">指定备份输出选项</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关格式选项的信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF195" target="_blank"><span class="italic">，请参见Oracle数据库备份和恢复参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV119"></a><a id="BRADV90058"></a><div class="props_rev_3"><a id="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" name="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A"></a><h4 id="BRADV-GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" class="sect4"><span class="enumeration_section">2.4.2</span>在ARCHIVELOG模式下备份数据库</h4>
                  <div>
                     <p>如果数据库在<code class="codeph">ARCHIVELOG</code>模式下运行，则可以在数据库打开时备份数据库。
                     </p>
                     <div class="section">
                        <p>如果备份在其检查点之后包含更改，则称为<a href="glossary.html#GUID-BE64D1D8-34E7-4295-BDFC-2E99B1BC454D"><span class="xrefglossterm">不一致备份</span></a> 。如果您具有恢复备份所需的归档重做日志，则打开数据库备份与一致备份一样有效地保护数据。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A__GUID-6967E8CF-5679-42C4-89A5-3CFEEA011E0A">在数据库打开时备份数据库和归档重做日志：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">BACKUP DATABASE</code>命令。</span><div>
                              <p>例如，在RMAN提示符处输入以下命令，以将数据库和所有归档重做日志文件备份到默认备份设备：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; BACKUP DATABASE PLUS ARCHIVELOG;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV120"></a><a id="BRADV90059"></a><div class="props_rev_3"><a id="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" name="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255"></a><h4 id="BRADV-GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" class="sect4"><span class="enumeration_section">2.4.3</span>以NOARCHIVELOG模式备份数据库</h4>
                  <div>
                     <p>如果数据库在<code class="codeph">NOARCHIVELOG</code>模式下运行，则唯一有效的数据库备份是一致的备份。
                     </p>
                     <div class="section">
                        <p>要使备份保持一致，必须在一致关闭后装入数据库。恢复备份后不需要特别恢复，但是您将丢失备份后进行的任何事务。您可以使用<a href="glossary.html#GUID-D11D736A-3513-48E5-8738-64DBE60725D1"><span class="xrefglossterm">一致备份中的</span></a>归档日志进行恢复，以最大限度地减少数据丢失
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255__GUID-139EDE8C-B300-417D-9C55-531B6C24F91A">要进行一致的数据库备份：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>一致地关闭数据库然后安装它。</span><div>
                              <p>例如，输入以下命令以<span class="italic">保证</span>数据库处于备份的一致状态：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;立即关闭; RMAN&gt; STARTUP FORCE DBA; RMAN&gt;立即关闭; RMAN&gt; STARTUP MOUNT;</pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">BACKUP DATABASE</code>命令。</span><div>
                              <p>例如，在RMAN提示符处输入以下命令，以将数据库备份到默认备份设备：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;备份数据库;</pre><p>以下命令的变体创建数据库中所有数据文件的映像副本备份：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;备份作为复制数据库;</pre></div>
                        </li>
                        <li class="stepexpand"><span>打开数据库并恢复正常操作。</span><div>
                              <p>以下命令打开数据库：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER DATABASE OPEN;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV122"></a><a id="BRADV89353"></a><div class="props_rev_3"><a id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72" name="GUID-0B997E06-7881-444D-A910-CFC37C25DF72"></a><h4 id="BRADV-GUID-0B997E06-7881-444D-A910-CFC37C25DF72" class="sect4"><span class="enumeration_section">2.4.4进行</span>增量备份：快速入门</h4>
                  <div>
                     <p>增量备份捕获在先前增量备份之后对数据库进行的块级更改。</p>
                     <div class="section">
                        <p>如果指定<code class="codeph">BACKUP</code> <code class="codeph">INCREMENTAL</code> ，则RMAN会创建数据库的<a href="glossary.html#GUID-31E3AC05-E73E-4E44-A9AA-915988B9A6A3"><span class="xrefglossterm">增量备份</span></a> 。与完整数据库备份相比，增量备份通常更小，速度更快。使用增量备份进行恢复比单独使用重做日志更快。
                        </p>
                        <p>增量备份策略的起点是<a href="glossary.html#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">0级增量备份</span></a> ，它备份数据库中的所有块。级别0的增量备份在内容上与<a href="glossary.html#GUID-D47BE9B3-BAE1-4415-B4B4-4D577B6CB493"><span class="xrefglossterm">完全备份</span></a>相同，但是，与完全备份不同，0级备份被视为增量备份策略的一部分。
                        </p>
                        <p>1级增量备份仅包含先前增量备份后更改的块。如果在运行1级备份时当前或父数据库<a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">化身中</span></a>不存在0级备份，则RMAN会自动进行0级备份。
                        </p>
                        <div class="infoboxnote" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-180C27FC-9FFD-4B96-8BDD-97BF36194F95">
                           <p class="notep1">注意：</p>
                           <p>虽然您可以在一致关闭后装入数据库时进行增量备份，但在<code class="codeph">NOARCHIVELOG</code>数据库打开时无法进行增量备份。
                           </p>
                        </div>
                        <p>1级备份可以是<a href="glossary.html#GUID-8BABFB51-EA47-4204-9A44-E1695A9F9FBF"><span class="xrefglossterm">累积增量备份</span></a> ，包括自最近的0级备份以来更改的所有块，或<a href="glossary.html#GUID-353B6668-6BA5-4815-8F08-1CD5B446FBD6"><span class="xrefglossterm">差异增量备份</span></a> ，其中仅包括自最近的增量备份以来更改的块。默认情况下，增量备份是差异的。
                        </p>
                        <p>在还原操作期间，RMAN将首先还原0级备份，然后根据需要自动应用增量备份和重做日志。这将重新应用自备份开始以来对数据库所做的更改。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-106166A0-CF3E-46DF-BDA1-9C62F63AE1A4">要对数据库进行增量备份：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">BACKUP INCREMENTAL</code>命令。</span><div>
                              <p>以下示例创建0级增量备份，以作为增量备份策略的基础：</p><pre class="oac_no_warn" dir="ltr">BACKUP INCREMENTAL LEVEL 0 DATABASE;</pre><p>以下示例创建1级累积增量备份：</p><pre class="oac_no_warn" dir="ltr">备份增量级别1累积数据库;</pre><p>以下示例创建1级差异增量备份：</p><pre class="oac_no_warn" dir="ltr">BACKUP INCREMENTAL LEVEL 1 DATABASE;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-61666EC7-63CC-4A22-9D0A-362C8E51E384">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="rman-backup-concepts.html#GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" title="增量备份仅复制自上次备份以来已更改的数据块。您可以使用RMAN创建数据文件，表空间或整个数据库的增量备份。">关于RMAN增量备份</a> ”</span>有关增量备份和<span class="q">“ <a href="backing-up-database.html#GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" title="增量备份仅复制自指定的先前备份以来已更改的数据文件块。使用BACKUP命令创建增量备份。">制作和更新RMAN增量备份</a> ”</span>的更详细概念性概述</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV123"></a><a id="BRADV124"></a><a id="BRADV89354"></a><div class="props_rev_3"><a id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" name="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB"></a><h4 id="BRADV-GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" class="sect4"><span class="enumeration_section">2.4.5进行</span>增量更新备份</h4>
                  <div>
                     <p>通过逐步更新的备份，您可以实施有效的增量备份永久备份策略。</p>
                     <p>RMAN <a href="glossary.html#GUID-A641BB91-65FB-4300-8A7A-066F019B8A20"><span class="xrefglossterm">增量更新的备份</span></a>功能具有以下主要功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该策略需要将0级数据文件副本作为基础。此副本具有系统定义或用户定义的标记。</p>
                        </li>
                        <li>
                           <p>定期创建1级差异备份，其标记与0级数据文件副本相同。<code class="codeph">BACKUP FOR RECOVER OF COPY</code>命令指定增量备份<span class="italic">仅</span>包含自具有相同标记的最新增量备份以来更改的块。
                           </p>
                        </li>
                        <li>
                           <p>增量备份会定期应用于0级数据文件副本。由于数据文件副本已使用更新的更新进行更新，因此现在需要较少的介质恢复。</p>
                        </li>
                     </ul>
                     <p><a href="getting-started-rman.html#GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__CIHDBFFF" title="恢复COPY选项">表2-2</a>说明了与<code class="codeph">FOR RECOVER OF COPY</code>一起使用哪些选项来实现增量更新的备份策略。
                     </p>
                     <div class="tblformalwide" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__CIHDBFFF">
                        <p class="titleintable">表2-2 COPY选项的恢复</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="用于恢复复制选项" width="100%" border="1" summary="FOR RECOVER OF COPY options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e2298">备份选项</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e2301">描述</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e2304">例</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e2309" headers="d12434e2298 ">
                                    <p><code class="codeph">FOR RECOVER OF COPY WITH TAG</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">tag_name</code></span> <code class="codeph">'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e2309 d12434e2301 ">
                                    <p>使用<code class="codeph">TAG</code>标识数据文件副本的标记，作为备份策略的基础。RMAN自动为此副本的每个1级备份分配相同的标记。
                                    </p>
                                    <p>如果当前或父数据库<a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">化身</span></a>中不存在具有指定标记的0级数据文件副本，则RMAN将使用指定的标记创建0级数据文件副本。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e2309 d12434e2304 "><pre class="oac_no_warn" dir="ltr">用TAG'incr_update'数据库恢复补充级别1以恢复复制;</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e2336" headers="d12434e2298 ">
                                    <p><code class="codeph">FOR RECOVER OF COPY DATAFILECOPY FORMAT '</code> <span class="italic"><code class="codeph">format</code></span> <code class="codeph">'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e2336 d12434e2301 ">
                                    <p>指定如果副本不存在，RMAN将创建数据文件副本的位置。如果将新数据文件添加到数据库，则无需更改脚本，因为RMAN会自动创建增量备份例程所需的0级副本。</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e2336 d12434e2304 "><pre class="oac_no_warn" dir="ltr">备份增量级别1，用于恢复复制DATAFILECOPY格式'/disk2/df1.cpy'数据库;</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__GUID-18A1CE03-0690-4C77-8268-04882526C332">要实施增量更新的备份策略：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>运行<code class="codeph">RECOVER COPY</code>和<code class="codeph">BACKUP INCREMENTAL</code>命令。
                           </p>
                           <p>以下脚本是定期运行的，它是实现基于增量更新备份的策略所需的全部内容。</p><pre class="oac_no_warn" dir="ltr">使用TAG'incr_update'恢复数据库的复制;用TAG'incr_update'数据库恢复补充级别1以恢复复制;</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__GUID-A3267B85-CB7B-4C7C-9435-B2DCC05139D4">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="backing-up-database.html#GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9" title="通过逐步更新备份，可以避免对数据文件进行完整映像副本备份的开销，同时还可以最大限度地减少介质恢复数据库所需的时间。例如，如果您运行每日备份脚本，那么您永远不会有超过1天的重做时间来申请媒体恢复。">逐步更新备份</a> ”</span></p>
                     </div>
                  </div>
               </div><a id="BRADV125"></a><a id="BRADV89355"></a><div class="props_rev_3"><a id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9" name="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9"></a><h4 id="BRADV-GUID-32746671-9162-4FCD-9878-4DC241B6ABF9" class="sect4"><span class="enumeration_section">2.4.6</span>验证数据库文件和备份：快速入门</h4>
                  <div>
                     <p>RMAN验证检查备份以确定是否可以还原。验证还会检查损坏的块和丢失的文件。</p>
                     <div class="section">
                        <p>使用<code class="codeph">VALIDATE</code>命令确认所有数据库文件都存在，位于正确的位置，并且没有物理损坏。<code class="codeph">CHECK LOGICAL</code>选项还检查逻辑块损坏。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9__GUID-BAC9629A-96DB-4FF4-9738-0908BCC3FF85">要验证数据库文件：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>对所需文件运行<code class="codeph">BACKUP VALIDATE ...</code>命令。</span><div>
                              <p>例如，输入以下命令以验证所有数据库文件和归档重做日志文件是否存在物理和逻辑损坏：</p><pre class="oac_no_warn" dir="ltr">BACKUP VALIDATE CHECK LOGICAL DATABASE ARCHIVELOG ALL;</pre><p>您还可以使用<a href="../rcmrf/VALIDATE.html#RCMRF162" target="_blank"><code class="codeph">VALIDATE</code></a>命令检查各个数据块，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">验证数据文件4块10到13;</pre><p>您还可以验证备份集，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">VALIDATE BACKUPSET 3;</pre><p>您可以通过主键指定备份集，该主键显示在<code class="codeph">LIST BACKUP</code>命令的输出中。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9__GUID-716E8554-ECF2-4945-A55E-0FF92951534A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="validating-database-files-backups.html#GUID-CC967929-9610-410D-B881-66E71353D84C" title="验证使您可以检查备份的完整性。RMAN验证的主要目的是检查损坏的块和丢失的文件。您还可以使用RMAN确定是否可以还原备份。数据库可防止导致无法使用的备份文件或损坏的已还原数据文件的操作。损坏的块是一个已更改的块，因此它与Oracle数据库期望找到的块不同。在物理损坏（也称为媒体损坏）中，数据库根本无法识别块：校验和无效，块包含全零，或块的页眉和页脚不匹配。您可以使用SET MAXCORRUPT命令设置RMAN备份文件中允许的未标记损坏总数。默认值为零，这意味着RMAN不会容忍任何类型的未标记的损坏块。Oracle数据库支持用于检测，修复和监视块损坏的不同技术。您可以使用VALIDATE命令手动检查数据库文件中的物理和逻辑损坏。您还可以使用BACKUP VALIDATE命令执行验证。你可以运行RESTORE ...VALIDATE以测试RMAN是否可以从备份还原特定文件或文件集。RMAN选择要使用的备份。RMAN使您可以使用VALIDATE命令验证多租户容器数据库（CDB）和可插拔数据库（PDB）。验证CDB的步骤与用于验证非CDB的步骤类似。有多种方法可以验证PDB。">验证数据库文件和备份</a></p>
                              </li>
                              <li>
                                 <p><code class="codeph">VALIDATE</code>命令语法和语义的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV126"></a><a id="BRADV89356"></a><div class="props_rev_3"><a id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" name="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940"></a><h4 id="BRADV-GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" class="sect4"><span class="enumeration_section">2.4.7</span>编写RMAN操作脚本</h4>
                  <div>
                     <p>RMAN支持使用命令文件来管理重复性任务，例如每周备份。</p>
                     <div class="section">
                        <p><a href="glossary.html#GUID-71012407-A78E-40C4-9B0E-971C6E38EED0"><span class="xrefglossterm">命令文件</span></a>是包含RMAN命令的客户端文本文件，就像您在RMAN提示符下输入它们一样。您可以使用任何文件扩展名。
                        </p>
                        <p>存储的脚本是命令文件的替代方法，允许脚本可供任何可连接到目标数据库及其恢复目录的RMAN客户端使用。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940__GUID-CEB4946C-692C-442E-867D-397C627BBC52">要创建并运行命令文件：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用文本编辑器创建命令文件。</span><div>
                              <p>例如，使用以下内容创建命令文件：</p><pre class="oac_no_warn" dir="ltr">#my_command_file.txt CONNECT TARGET / BACKUP DATABASE PLUS ARCHIVELOG;列表备份;出口;</pre></div>
                        </li>
                        <li class="stepexpand"><span>启动RMAN，然后通过在RMAN提示符下运行<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF100" target="_blank"><code class="codeph">@</code></a>命令来执行命令文件的内容：</span><div><pre class="oac_no_warn" dir="ltr">@ / <span class="italic"><code class="codeph">my_dir</code></span> / <span class="italic"><code class="codeph">my_command_file.txt</code></span> ＃运行指定的命令文件</pre><p>您还可以使用命令文件启动RMAN以运行，如下所示：</p><pre class="oac_no_warn" dir="ltr">％rman @ / <span class="italic"><code class="codeph">my_dir</code></span> / <span class="italic"><code class="codeph">my_command_file.txt</code></span>
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940__GUID-9B3C8D32-AB7F-4BD2-BC26-C5225AAD76B5">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="starting-interacting-with-rman-client.html#GUID-5FF51A4E-BC27-41A9-AA83-FF6E761C2535" title="对于重复性任务，您可以创建包含RMAN命令的文本文件，并使用@参数启动RMAN客户端，然后使用文件名。">将命令文件与RMAN一起使用</a> ”</span>以了解有关命令文件的更多信息</p>
                              </li>
                              <li>
                                 <p> <span class="q">“ <a href="starting-interacting-with-rman-client.html#GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD" title="运行命令文件时，可以在USING子句中指定一个或多个值，以便在命令文件中的替换变量中使用。通过这种方式，您可以使命令文件动态化。">在命令文件中使用替换变量</a> ”</span>来学习如何在命令文件中使用替换变量并在运行时传递参数</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV89357"></a><div class="props_rev_3"><a id="GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" name="GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8"></a><h3 id="BRADV-GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" class="sect3"><span class="enumeration_section">2.5</span>报告RMAN操作：快速入门</h3>
               <div>
                  <p>RMAN可以使用存储在RMAN存储库中的信息来生成有关备份活动的报告。</p>
                  <p>使用RMAN <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><code class="codeph">LIST</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF147" target="_blank"><code class="codeph">REPORT</code></a>命令报告备份操作。使用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF154" target="_blank"><code class="codeph">SHOW ALL</code></a>命令显示当前的RMAN配置。此外，RMAN还提供了一组用于生成自定义报告的全面视图。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" title="LIST BACKUP和LIST COPY命令显示有关存储库中列出的备份和数据文件副本的信息。">列出备份</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" title="REPORT命令执行比LIST命令更复杂的报告分析。">报告数据库文件和备份</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV127"></a><a id="BRADV130"></a><a id="BRADV131"></a><a id="BRADV89358"></a><div class="props_rev_3"><a id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" name="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352"></a><h4 id="BRADV-GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" class="sect4"><span class="enumeration_section">2.5.1</span>列出备份：快速入门</h4>
                  <div>
                     <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code>和<code class="codeph">LIST</code> <code class="codeph">COPY</code>命令显示有关存储库中列出的备份和数据文件副本的信息。
                     </p>
                     <p>对于备份，您可以使用<a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHEECHB" title="描述BY BACKUP，BY FILE和SUMMARY选项">表2-3</a>和<a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI" title="描述EXPIRED和RECOVERABLE选项">表2-4中</a>的选项控制<code class="codeph">LIST</code>输出的格式。
                     </p>
                     <div class="tblformal" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHEECHB">
                        <p class="titleintable">表2-3备份的LIST选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="LIST备份选项" width="100%" border="1" summary="Describes the BY BACKUP, BY FILE, and SUMMARY options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="12%" id="d12434e2984">选项</th>
                                 <th align="left" valign="bottom" width="38%" id="d12434e2987">例</th>
                                 <th align="left" valign="bottom" width="50%" id="d12434e2990">说明</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e2995" headers="d12434e2984 ">
                                    <p><code class="codeph">BY</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e2995 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">OF</code> <code class="codeph">DATABASE</code> <code class="codeph">BY</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e2995 d12434e2990 ">
                                    <p>按备份集组织输出。这是默认的演示模式。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e3025" headers="d12434e2984 ">
                                    <p><code class="codeph">BY</code> <code class="codeph">FILE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e3025 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">BY</code> <code class="codeph">FILE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e3025 d12434e2990 ">
                                    <p>根据备份的文件列出备份。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="12%" id="d12434e3049" headers="d12434e2984 ">
                                    <p><code class="codeph">摘要</code></p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d12434e3049 d12434e2987 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">SUMMARY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d12434e3049 d12434e2990 ">
                                    <p>显示摘要输出。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>对于备份和副本，您可以使用<a href="getting-started-rman.html#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI" title="描述EXPIRED和RECOVERABLE选项">表2-4中</a>显示的其他选项。
                     </p>
                     <div class="tblformal" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI">
                        <p class="titleintable">表2-4其他LIST选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="其他LIST选项" width="100%" border="1" summary="Describes the EXPIRED and RECOVERABLE options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="13%" id="d12434e3084">选项</th>
                                 <th align="left" valign="bottom" width="27%" id="d12434e3087">例</th>
                                 <th align="left" valign="bottom" width="60%" id="d12434e3090">说明</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d12434e3095" headers="d12434e3084 ">
                                    <p><code class="codeph">过期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d12434e3095 d12434e3087 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">EXPIRED</code> <code class="codeph">COPY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="60%" headers="d12434e3095 d12434e3090 ">
                                    <p>列出记录在RMAN存储库中但在最后一个<code class="codeph">CROSSCHECK</code>命令期间在磁盘或磁带上的预期位置不存在的备份。操作系统实用程序可能已删除<a href="glossary.html#GUID-A8547B27-5415-4AAA-B2B4-C0998EB62E47"><span class="xrefglossterm">过期的备份</span></a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d12434e3120" headers="d12434e3084 ">
                                    <p><code class="codeph">RECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d12434e3120 d12434e3087 ">
                                    <p><code class="codeph">LIST</code> <code class="codeph">BACKUP RECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="60%" headers="d12434e3120 d12434e3090 ">
                                    <p>列出在RMAN存储库中具有状态<code class="codeph">AVAILABLE</code>且可以还原和恢复的数据文件备份或副本。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__GUID-BAD7903C-4149-45C1-88BA-C8F369406E87">列出备份和副本：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在RMAN提示符下运行<code class="codeph">LIST</code>命令。
                           </p>
                           <p>您可以显示特定对象，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">数据库的列表备份;列表复制数据文件1,2;从序列中列出ARCHIVELOG的备份10; DATAFILE 1的列表备注;</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__GUID-7F54E77B-161E-4CAF-9841-517B665550BF">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="reporting-rman-operations.html#GUID-1B911001-C106-4267-9265-F649946DBF52" title="LIST命令使用RMAN存储库中的信息来提供备份列表以及与备份和恢复相关的其他对象。">列出备份和恢复相关对象</a> ”</span>以了解有关<code class="codeph">LIST</code>命令的更多信息</p>
                           </li>
                           <li>
                              <p>用于<code class="codeph">LIST</code>命令语法的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV551"></a><a id="BRADV133"></a><a id="BRADV89359"></a><div class="props_rev_3"><a id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" name="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3"></a><h4 id="BRADV-GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" class="sect4"><span class="enumeration_section">2.5.2</span>报告数据库文件和备份：快速入门</h4>
                  <div>
                     <p><code class="codeph">REPORT</code>命令执行比<code class="codeph">LIST</code>命令更复杂的报告分析。
                     </p>
                     <p><a href="getting-started-rman.html#GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__CIHBJGBG" title="描述了NEED BACKUP，OBSOLETE，UNRECOVERABLE和SCHEMA选项">表2-5</a>显示了REPORT命令的一些主要选项。
                     </p>
                     <div class="tblformal" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__CIHBJGBG">
                        <p class="titleintable">表2-5报告选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="报告选项" width="100%" border="1" summary="Describes the NEED BACKUP, OBSOLETE, UNRECOVERABLE, and SCHEMA options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12434e3296">选项</th>
                                 <th align="left" valign="bottom" width="29%" id="d12434e3299">例</th>
                                 <th align="left" valign="bottom" width="57%" id="d12434e3302">说明</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3307" headers="d12434e3296 ">
                                    <p><code class="codeph">NEED</code> <code class="codeph">BACKUP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3307 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">NEED</code> <code class="codeph">BACKUP DATABASE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3307 d12434e3302 ">
                                    <p>显示哪些文件需要在当前保留策略下备份。使用可选的<code class="codeph">REDUNDANCY</code>和<code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code>参数指定不同的条件。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3337" headers="d12434e3296 ">
                                    <p><code class="codeph">已过时</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3337 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">OBSOLETE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3337 d12434e3302 ">
                                    <p>列出已配置的<a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">备份保留策略</span></a>下已过时的<a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">备份</span></a> 。使用可选的<code class="codeph">REDUNDANCY</code>和<code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code>参数覆盖默认值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3365" headers="d12434e3296 ">
                                    <p><code class="codeph">SCHEMA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3365 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">SCHEMA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3365 d12434e3302 ">
                                    <p>在当前时间（默认）或不同时间报告数据库中的表空间和数据文件。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12434e3380" headers="d12434e3296 ">
                                    <p><code class="codeph">UNRECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d12434e3380 d12434e3299 ">
                                    <p><code class="codeph">REPORT</code> <code class="codeph">UNRECOVERABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d12434e3380 d12434e3302 ">
                                    <p>列出自上次备份数据文件以来对数据文件中的对象执行了不可恢复操作的所有数据文件。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__GUID-A1B9E4C0-73C8-4E19-9459-7ECDD9F29DAF">生成数据库文件和备份的报告：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li>
                           <p>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在RMAN提示符下运行<code class="codeph">REPORT</code>命令。
                           </p>
                           <p>以下示例根据当前配置的备份保留策略报告已过时的备份：</p><pre class="oac_no_warn" dir="ltr">报告已废除;</pre><p>以下示例报告数据库中的数据文件和临时文件：</p><pre class="oac_no_warn" dir="ltr">报告计划;</pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__GUID-2E55EC8F-D02B-4269-B417-7EA6ACB79D8D">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="reporting-rman-operations.html#GUID-A1FDD9FE-74B8-4146-AFC4-6BD5402C8B5D" title="RMAN REPORT命令分析可用备份和数据库。">报告备份和数据库架构</a> ”</span>以了解如何使用<code class="codeph">REPORT</code>命令进行RMAN报告</p>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89360"></a><div class="props_rev_3"><a id="GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" name="GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415"></a><h3 id="BRADV-GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" class="sect3"><span class="enumeration_section">2.6</span>维护RMAN备份</h3>
               <div>
                  <p>RMAN存储库元数据始终存储在目标数据库的控制文件中。管理备份时，RMAN维护命令使用此元数据。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-44223141-56C9-4F89-BD6D-474373EC1094" title="使用CROSSCHECK命令将RMAN备份和副本的逻辑记录与存储介质上的文件同步。">交叉检查备份</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" title="DELETE命令从磁盘和磁带中删除RMAN备份和副本，在控制文件存储库中将文件状态更新为DELETED，并从恢复目录中删除记录（如果使用目录）。">删除过时备份</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV552"></a><a id="BRADV89362"></a><div class="props_rev_3"><a id="GUID-44223141-56C9-4F89-BD6D-474373EC1094" name="GUID-44223141-56C9-4F89-BD6D-474373EC1094"></a><h4 id="BRADV-GUID-44223141-56C9-4F89-BD6D-474373EC1094" class="sect4"><span class="enumeration_section">2.6.1</span>交叉检查备份：快速入门</h4>
                  <div>
                     <p>使用<code class="codeph">CROSSCHECK</code>命令将RMAN备份和副本的逻辑记录与存储介质上的文件同步。
                     </p>
                     <div class="section">
                        <p>如果备份在磁盘上，则<code class="codeph">CROSSCHECK</code>确定文件的标头是否有效。如果备份在磁带上，则RMAN会在RMAN存储库中查询备份片的名称和位置。在删除备份和副本之前，最好交叉检查备份和副本。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-44223141-56C9-4F89-BD6D-474373EC1094__GUID-EA497A12-C9E4-458B-8B7E-350900E2950B">要交叉检查磁盘上的所有备份和副本：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">CROSSCHECK</code>命令，如以下示例所示：</span><div><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUP; CROSSCHECK COPY;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-44223141-56C9-4F89-BD6D-474373EC1094__GUID-45633A88-BF22-4A6E-9232-F8A1079D6253">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="maintaining-rman-backups.html#GUID-EFF8F8D1-D67C-4202-9C8E-DE74ADFF1FFB" title="要确保恢复目录或控制文件中的备份数据与磁盘上或介质管理目录中的相应数据同步，请执行交叉检查。CROSSCHECK命令仅对当前记录在RMAN存储库中的文件进行操作。">交叉检查RMAN存储库</a> ”</span>以了解如何交叉检查RMAN备份</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV135"></a><a id="BRADV89363"></a><div class="props_rev_3"><a id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" name="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10"></a><h4 id="BRADV-GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" class="sect4"><span class="enumeration_section">2.6.2</span>删除过时备份：快速入门</h4>
                  <div>
                     <p>DELETE命令从磁盘和磁带中删除RMAN备份和副本，在控制文件存储库中将文件状态更新为<code class="codeph">DELETED</code> ，并从恢复目录中删除记录（如果使用目录）。
                     </p>
                     <div class="section">
                        <p>如果以交互方式运行RMAN，并且未指定<code class="codeph">NOPROMPT</code>选项，则在删除列表中的任何文件之前， <code class="codeph">DELETE</code>显示文件列表并提示进行确认。<code class="codeph">DELETE OBSOLETE</code>命令特别有用，因为RMAN删除了RMAN存储库中记录的备份和数据文件副本，这些副本已过时，即不再需要。您可以使用<code class="codeph">DELETE</code>命令上的选项指定过时的内容或使用配置的<a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">备份保留策略</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10__GUID-F73F7403-4722-4C7C-A956-6BE8D2FFAC58">要删除过时的备份和副本：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">DELETE OBSOLETE</code>命令，如以下示例所示：</span><div><pre class="oac_no_warn" dir="ltr">DELETE OBSOLETE;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10__GUID-D3D3BBF9-E840-477D-BA13-615213CAEBB5">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="maintaining-rman-backups.html#GUID-8C4B395D-7C24-485F-BEA0-A355821FB93D" title="您可以使用RMAN DELETE命令删除存档的重做日志和RMAN备份。">删除RMAN备份和归档重做日志</a> ”</span>以了解如何使用<code class="codeph">DELETE</code>命令</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV89364"></a><div class="props_rev_3"><a id="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" name="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649"></a><h3 id="BRADV-GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" class="sect3"><span class="enumeration_section">2.7</span>使用Data Recovery Advisor诊断和修复故障：快速入门</h3>
               <div>
                  <p>Data Recovery Advisor是一个Oracle数据库工具，它提供用于诊断持久性数据故障的基础结构，向用户提供修复选项，并根据用户的请求执行修复。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" title="失败是Health Monitor检测到的持久性数据损坏。示例包括物理和逻辑数据块损坏和丢失的数据文件。">列出故障并确定修复选项</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" title="使用RMAN REPAIR FAILURE命令修复检测到的故障。">修复失败</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649__GUID-8F591ECE-3F72-4F8A-ABCB-6D5DC767F396">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="diagnosing-repairing-failures-dra.html#GUID-636EA9BE-2DFB-4FA0-959E-B1290C774ABD" title="Data Recovery Advisor是一种通过确定数据库故障的最佳自动修复选项来帮助减少数据库恢复时间的工具。">数据恢复顾问概述</a> ”</span></p>
                  </div>
               </div><a id="BRADV136"></a><a id="BRADV89365"></a><div class="props_rev_3"><a id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" name="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752"></a><h4 id="BRADV-GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" class="sect4"><span class="enumeration_section">2.7.1</span>列出故障并确定修复选项</h4>
                  <div>
                     <p>失败是Health Monitor检测到的持久性数据损坏。示例包括物理和逻辑数据块损坏和丢失的数据文件。</p>
                     <div class="section">
                        <p>每个故障都有<a href="glossary.html#GUID-AFA532F1-81A1-433F-95BE-730178DD900D"><span class="xrefglossterm">故障优先级</span></a>和<a href="glossary.html#GUID-7881F5D7-5E80-49BF-A369-DC4B670EF8EB"><span class="xrefglossterm">故障状态</span></a> 。优先级可以是<code class="codeph">CRITICAL</code> ， <code class="codeph">HIGH</code>或<code class="codeph">LOW</code> 。状态可以是<code class="codeph">OPEN</code>或<code class="codeph">CLOSED</code> 。</p>
                        <p>您可以运行<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF132" target="_blank"><code class="codeph">LIST</code></a> <code class="codeph">FAILURE</code>命令来显示所有已知故障。如果存在故障，则在同一会话中运行<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF166" target="_blank"><code class="codeph">ADVISE FAILURE</code></a>命令以确定修复选项。<code class="codeph">ADVISE FAILURE</code>输出显示手动和自动修复选项。首先尝试手动修复问题。如果您无法手动解决问题，请查看自动修复部分。
                        </p>
                        <p>自动<a href="glossary.html#GUID-76EA30CA-A51E-44C9-AB25-E1D89AF711B2"><span class="xrefglossterm">修复选项</span></a>描述了针对一个或多个故障的服务器管理修复。尽可能整合修复，以便单次修复可以修复多个故障。修复选项通过执行修复操作指示执行了哪些修复以及数据是否丢失。
                        </p>
                        <div class="infoboxnotealso" id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__GUID-B0297116-EC2B-4D6A-928D-906242300B51">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="diagnosing-repairing-failures-dra.html#GUID-05C2861A-4EC0-4F0C-8860-42AC2BC4CC17" title="如果您怀疑或知道发生了一个或多个数据库故障，请使用LIST FAILURE获取有关它们的信息。">列出失败</a> ”</span>和<span class="q">“ <a href="diagnosing-repairing-failures-dra.html#GUID-13944F9E-545E-480A-A47B-CE0A73FED3C7" title="在RMAN会话中运行LIST FAILURE后，使用ADVISE FAILURE命令显示修复选项。此命令打印故障摘要，并隐式关闭所有已修复的打开故障。">确定修复选项</a> ”</span></p>
                        </div>
                        <p><a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">列出故障和确定修复选项</a>说明了<a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">列出故障和确定修复选项</a>的命令。输出指示包含RMAN命令的修复脚本的文件名。如果您不想使用Data Recovery Advisor自动修复故障，则可以使用该脚本作为您自己的恢复策略的基础。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">
                        <p class="titleinexample">例2-1列表失败和建议失败</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; <span class="bold">LIST FAILURE;</span>数据库角色：主要数据库故障列表=========================故障ID优先级状态检测时间摘要---------- -------- --------- ------------- ------- 142 HIGH OPEN 23-APR-13一个或多个非系统数据文件丢失101 HIGH OPEN 23-APR-13数据文件1：'/ disk1 / oddata / prod / system01.dbf'包含一个或多个损坏的块RMAN&gt; <span class="bold">ADVISE FAILURE;</span>数据库角色：主要数据库故障列表=========================故障ID优先级状态检测时间摘要---------- -------- --------- ------------- ------- 142 HIGH OPEN 23-APR-13一个或多个非系统数据文件丢失101 HIGH OPEN 23-APR-13数据文件1：'/ disk1 / oddata / prod / system01.dbf'包含一个或多个分析自动修复选项的损坏块;这可能需要一些时间使用通道ORA_DISK_1分析自动修复选项完成强制手动操作========================没有可用的手动操作可选手动操作=== ==================== 1。如果无意中重命名或移动了文件/disk1/oradata/prod/users01.dbf，请将其恢复为自动修复选项========================选项修复说明------ ------------------ 1恢复和恢复数据文件28;在文件1中执行块56416的块介质恢复策略：修复包括完整的介质恢复，没有数据丢失修复脚本：/disk1/oracle/log/diag/rdbms/prod/prod/hm/reco_660500184.hm</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV553"></a><a id="BRADV89366"></a><div class="props_rev_3"><a id="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" name="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C"></a><h4 id="BRADV-GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" class="sect4"><span class="enumeration_section">2.7.2</span>修复故障：快速入门</h4>
                  <div>
                     <p>使用RMAN <code class="codeph">REPAIR FAILURE</code>命令修复检测到的故障。
                     </p>
                     <div class="section">
                        <p>在<a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN会话中</span></a>运行<code class="codeph">LIST FAILURE</code>和<code class="codeph">ADVISE FAILURE</code>后，您可以运行<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF199" target="_blank"><code class="codeph">REPAIR FAILURE</code></a>来执行修复选项。如果在没有其他命令选项的情况下执行<code class="codeph">REPAIR FAILURE</code> ，则RMAN将使用当前会话中最新<code class="codeph">ADVISE FAILURE</code>命令的第一个修复选项。或者，指定从最新的<code class="codeph">ADVISE FAILURE</code>命令获得的修复选项编号。以下示例说明了如何修复<a href="getting-started-rman.html#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">示例2-1中</a>确定的故障。
                        </p><pre class="pre codeblock"><code>RMAN&gt;维修失败;</code></pre><p>默认情况下， <code class="codeph">REPAIR FAILURE</code>在开始执行之前会提示确认。执行修复后，Data Recovery Advisor会重新评估所有现有故障，因为它们可能也已修复。Data Recovery Advisor始终验证故障是否仍然相关并自动关闭固定故障。如果由于错误导致修复无法完成，则该错误会触发新的评估并重新评估现有故障和修复。
                        </p>
                        <div class="infoboxnotealso" id="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C__GUID-E43E6851-0927-4D18-ACA8-A63216B3266C">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="diagnosing-repairing-failures-dra.html#GUID-31DF1037-325F-4FED-8A37-23216EFF9526" title="您可以使用Data Recovery Advisor自动修复故障。">修复失败</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV554"></a><a id="BRADV89367"></a><div class="props_rev_3"><a id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" name="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1"></a><h3 id="BRADV-GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" class="sect3"><span class="enumeration_section">2.8</span>使用闪回数据库重绕数据库：快速入门</h3>
               <div>
                  <p>您可以使用Oracle闪回数据库将整个数据库回滚到过去的时间。与介质恢复不同，您无需还原数据文件以将数据库返回到过去状态。</p>
                  <div class="section">
                     <p>要使用RMAN <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF194" target="_blank"><code class="codeph">FLASHBACK DATABASE</code></a>命令，必须先将数据库配置为生成<a href="glossary.html#GUID-725ED3D7-5077-4F16-85AA-CDAD5BFCE554"><span class="xrefglossterm">闪回日志</span></a> 。<span class="q">“ <a href="using-flasback-database-restore-points.html#GUID-509FB7A6-4CB2-4730-80CA-7B2D68F50773" title="闪回数据库的效果类似于传统的时间点恢复。它使您能够在最近的某个时间将数据库返回到其状态。闪回数据库比时间点恢复快得多，因为它不需要从备份中恢复数据文件，并且需要从归档重做日志中应用较少的更改。">关于闪回数据库</a> ”中</span>介绍了此配置任务。闪回数据库通过倒回对运行命令时存在的数据文件的更改来工作。您无法使用闪回数据库来修复介质故障或丢失数据文件。
                     </p>
                     <p>发出<code class="codeph">FLASHBACK DATABASE</code>时必须装入<code class="codeph">FLASHBACK DATABASE</code> 。您可以在<a href="glossary.html#GUID-C25BCFCE-4DE2-499A-A5E3-407A774FE9F3"><span class="xrefglossterm">闪回数据库窗口中</span></a>闪回到任何时间。如果您之前已创建了<a href="glossary.html#GUID-A5A5E7B1-72B6-4F50-8E11-04C03EB5FFAE"><span class="xrefglossterm">还原点</span></a> ，那么这是一种方便，但不是必需的。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1__GUID-01867A7A-D160-455E-949A-E3727A88CB4F">使用闪回数据库回滚数据库：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                     <li class="stepexpand"><span>确保数据库处于已装入状态。</span><div>
                           <p>以下命令关闭然后装入数据库：</p><pre class="oac_no_warn" dir="ltr">立即关闭;启动安装;</pre></div>
                     </li>
                     <li class="stepexpand"><span>运行<code class="codeph">FLASHBACK DATABASE</code>命令。</span><div>
                           <p>以下示例说明了该命令的不同形式：</p><pre class="oac_no_warn" dir="ltr">FLASHBACK DATABASE TO SCN 861150; FLASHBACK DATABASE恢复点之前的数据; FLASHBACK DATABASE TO TIMESTAMP TO_DATE（04-DEC-2009 03:30:00'，'DD-MON-YYYY HH24：MI：SS'）;</pre></div>
                     </li>
                     <li class="stepexpand"><span>执行闪回数据库后，在SQL * Plus中以只读方式打开数据库并运行一些查询以验证数据库内容。</span><div>
                           <p>以如下方式打开数据库只读：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ ONLY;</pre></div>
                     </li>
                     <li class="stepexpand"><span>如果对结果满意，则发出以下命令序列以关闭然后打开数据库：</span><div><pre class="oac_no_warn" dir="ltr">立即关闭;启动安装; ALTER DATABASE OPEN RESETLOGS;</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1__GUID-EE8D0C47-C8AB-4D21-AED0-B117B8C8CBF1">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="rman-performing-flashback-dbpitr.html#GUID-953FA30D-BED2-4DBA-8361-9DA1B8FF073F" title="闪回数据库通过将数据库返回到先前某个时间点的状态来反转不需要的更改。">使用闪回数据库重绕数据库</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89368"></a><div class="props_rev_3"><a id="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" name="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205"></a><h3 id="BRADV-GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" class="sect3"><span class="enumeration_section">2.9</span>恢复和恢复数据库文件：快速入门</h3>
               <div>
                  <p>使用<code class="codeph">RESTORE</code>和<code class="codeph">RECOVER</code>命令进行RMAN还原和恢复物理数据库文件。
                  </p>
                  <p>恢复数据文件是根据恢复操作的需要从备份中检索它们。介质恢复是将重做日志和增量备份的更改应用到已还原的数据文件，以将数据文件转发到所需的SCN或时间点。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="要恢复数据库，因为介质故障会损坏数据库文件，请首先确保您具有必要的备份。">准备还原和恢复数据库文件</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" title="使用RESTORE DATABASE和RECOVER DATABASE命令恢复整个数据库。">恢复整个数据库</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" title="在数据库打开时，在各个表空间上使用RESTORE TABLESPACE和RECOVER TABLESPACE命令。在这种情况下，您必须使需要恢复的表空间脱机，恢复然后恢复表空间，并使恢复的表空间联机。">恢复表空间</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-rman.html#GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" title="RMAN可以恢复单个损坏的数据文件块。">恢复单个数据块</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205__GUID-727878EF-123D-4A82-8CDF-6A90790E86F3">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="rman-complete-database-recovery.html#GUID-D908719C-9D46-4084-850C-0F81C25094EB" title="丢失一个或多个数据库文件后，完全恢复会使数据库恢复正常运行。完全恢复正在将数据库恢复到最近的某个时间点，而不会丢失任何已提交的事务。本章中描述的完整恢复操作受特定条件的限制。零数据丢失恢复设备（恢复设备）大大减少了连续归档重做日志备份之间存在的潜在数据丢失窗口。您可以在数据库故障的几个亚之内恢复目标数据库。您必须根据恢复目标以及丢失的数据库文件来规划数据库还原和恢复策略。用于确定哪些文件需要还原或恢复的技术取决于丢失的文件类型。当任何多路复用控制文件变得不可访问时，数据库立即关闭。关于何时以及如何恢复的决定取决于数据库的状态和数据文件的位置。确定缺少哪些数据文件的简单方法是运行VALIDATE DATABASE命令。尽管VALIDATE DATABASE是确定文件是否不可访问的好方法，但您可能希望使用SQL查询来获取更详细的信息。建议您记录数据库的DBID。预览备份可帮助您确保还原和恢复操作所需的所有备份都可用。异地备份存储在远程位置，例如安全存储设施，除非媒体管理器检索媒体，否则无法恢复。验证备份可确定备份是否可用。RMAN会根据需要自动从备份还原存档的重做日志文件以执行恢复。RMAN使您可以覆盖已还原的归档重做日志文件的默认位置。要管理用于包含已还原日志的磁盘空间，可以在一个RUN块中多次指定已归档日志的还原目标，以在多个目标之间分配已还原的日志。对于使用某些技术加密的备份，您必须提供用于解密这些备份的密码。在完全恢复期间，RMAN将还原一个或多个数据文件，然后应用还原备份后生成的所有重做。您使用RESTORE和RECOVER命令来还原和恢复数据库。如果无法将数据文件还原到其默认位置，则必须更新控制文件以反映数据文件的新位置。此方案假定数据库trgt已丢失其大部分或全部数据文件。它还假定数据库使用快速恢复区域。使用带有TABLESPACE选项的RESTORE和RECOVER命令执行表空间的完全恢复您可以通过切换到无法访问的数据文件的映像副本来恢复数据库。这种技术比传统的恢复和恢复花费的时间更少，因为不需要恢复备份。当一个或多个数据文件损坏时，您可以通过切换到损坏的数据文件的现有映像副本来执行恢复。您可以通过切换到损坏的数据文件的映像副本而不是还原这些数据文件来执行完整的数据库恢复。RMAN和Oracle Enterprise Manager云控制（云控制）为多租户环境中的备份和恢复提供全面支持。恢复整个CDB时，可以在单个操作中恢复根和所有PDB。如果发生仅影响根的数据损坏或用户错误，您可以考虑仅恢复根。您可以执行一个或多个PDB的完全恢复，而不会影响其他打开的PDB的操作。企业管理器云控制（云控制）提供了恢复PDB的界面。使用RECOVER命令使用预包装备份执行完全恢复。预打印备份用于在PDB插入当前CDB之前的某个时间将PDB恢复并恢复到其状态。 RMAN使用预包装备份执行PDB的完全恢复。在将PDB迁移到当前目标CDB之前，在源非CDB或源CDB上创建了这些预制备份备份。此示例使用预刷新备份执行目标CDB prod_cdb中PDB my_pdb的完全恢复。由于不同PDB中的表空间可以具有相同的名称，以消除歧义，因此必须直接连接到PDB以恢复其一个或多个表空间。相反，由于数据文件编号和路径在CDB中是唯一的，因此在恢复PDB数据文件时可以连接到根或PDB。Oracle企业管理器云控制（云控制）提供了一个用于恢复PDB中的表空间的界面。通过切换到副本来恢复CDB比传统的恢复和恢复更快。RMAN使您可以使用RESTORE和RECOVER命令执行应用程序容器的完全恢复，而不会影响CDB中的其他容器。使用RESTORE和RECOVER命令执行应用程序根目录的完全恢复。您可以执行应用程序容器的完全恢复，其中包括应用程序根目录及其所有应用程序PDB，而不会影响CDB中的其他PDB。使用RESTORE和RECOVER命令执行一个或多个应用程序PDB的完全恢复。您可以使用RESTORE和RECOVER命令将稀疏数据库恢复到最近的时间点。执行包含稀疏数据文件的数据库的恢复与执行整个数据库的恢复非常相似。执行稀疏CDB的恢复与执行稀疏数据库的完全恢复非常相似。在根级别或CDB级别连接时，可以恢复稀疏PDB。">执行完整的数据库恢复</a></p>
                  </div>
               </div><a id="BRADV555"></a><a id="BRADV99956"></a><div class="props_rev_3"><a id="GUID-F05FE79E-7C36-402B-8785-961F793AA710" name="GUID-F05FE79E-7C36-402B-8785-961F793AA710"></a><h4 id="BRADV-GUID-F05FE79E-7C36-402B-8785-961F793AA710" class="sect4"><span class="enumeration_section">2.9.1</span>准备还原和恢复数据库文件：快速入门</h4>
                  <div>
                     <p>要恢复数据库，因为介质故障会损坏数据库文件，请首先确保您具有必要的备份。</p>
                     <div class="section">
                        <p>你可以使用<code class="codeph">RESTORE ...PREVIEW</code>命令报告但不还原RMAN可用于还原到指定时间的备份。RMAN查询元数据，但实际上并未读取备份文件。运行此命令时，可以打开数据库。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F05FE79E-7C36-402B-8785-961F793AA710__GUID-93F11DE9-D0B7-4005-96FE-C750C831971F">要预览数据库还原和恢复：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>（可选）列出当前表空间和数据文件，如以下命令所示：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt;报告计划;</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">PREVIEW</code>选项运行<code class="codeph">RESTORE DATABASE</code>命令。</span><div>
                              <p>以下命令指定<code class="codeph">SUMMARY</code>以便备份元数据不以详细模式显示（包括样本输出）：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE DATABASE PREVIEW SUMMARY;在21-MAY-13分配通道开始恢复：ORA_DISK_1通道ORA_DISK_1：SID = 80设备类型= DISK备份列表===============密钥TY LV S设备类型完成时间#Pieces #Copies Compressed Tag -------  -   -   -  ----------- --------------- -------  - ------ ---------- --- 11 BFA DISK 18-MAY-13 1 2 NO TAG20070518T181114 13 BFA DISK 18-MAY-13 1 2 NO TAG20070518T181114使用频道ORA_DISK_1存档日志列表使用db_unique_name PROD的数据库副本============================================ ========================= Key Thrd Seq S Low Time ------- ---- -------  - --------- 47 1 18 A 18-MAY-13名称：/disk1/oracle/dbs/db1r_60ffa882_1_18_0622902157.arc介质恢复启动SCN为586534必须在SCN 587194之外进行恢复才能清除数据文件模糊验证成功备件在5月21日至13日完成恢复</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV556"></a><a id="BRADV89369"></a><div class="props_rev_3"><a id="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" name="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8"></a><h4 id="BRADV-GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" class="sect4"><span class="enumeration_section">2.9.2</span>恢复整个数据库：快速入门</h4>
                  <div>
                     <p>使用<code class="codeph">RESTORE</code> <code class="codeph">DATABASE</code>和<code class="codeph">RECOVER</code> <code class="codeph">DATABASE</code>命令恢复整个数据库。
                     </p>
                     <div class="section">
                        <p>您必须先前已备份所有需要的文件。此方案假定您可以将所有数据文件还原到其原始位置。如果原始位置不可访问，请使用<code class="codeph">SET NEWNAME</code>命令，如<span class="q">“ <a href="rman-complete-database-recovery.html#GUID-A3DE37A6-3983-4834-858E-A2BCC3804681" title="如果无法将数据文件还原到其默认位置，则必须更新控制文件以反映数据文件的新位置。">关于将数据文件还原到非默认位置</a> ”中所述</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8__GUID-8F67F2DA-07E8-4FC7-92A5-14A1991BA56B">要恢复整个数据库：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="To recover the database because a media failure damages database files, then first ensure that you have the necessary backups.">准备还原和恢复数据库文件</a> ”中的</span>说明<span class="q"><a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="要恢复数据库，因为介质故障会损坏数据库文件，请首先确保您具有必要的备份。">准备恢复</a></span> 。</span></li>
                        <li class="stepexpand"><span>将数据库置于已装入状态。</span><div>
                              <p>以下示例终止数据库实例（如果已启动）并装入数据库：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; STARTUP FORCE MOUNT;</pre></div>
                        </li>
                        <li class="stepexpand"><span>恢复数据库。</span><div>
                              <p>以下示例使用预配置的磁盘通道来还原数据库：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE DATABASE;</pre></div>
                        </li>
                        <li class="stepexpand"><span>恢复数据库，如以下示例所示：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; RECOVER DATABASE;</pre></div>
                        </li>
                        <li class="stepexpand"><span>打开数据库，如以下示例所示：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER DATABASE OPEN;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV557"></a><a id="BRADV89370"></a><div class="props_rev_3"><a id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" name="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8"></a><h4 id="BRADV-GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" class="sect4"><span class="enumeration_section">2.9.3</span>恢复表空间：快速入门</h4>
                  <div>
                     <p>在数据库打开时，在各个表空间上使用<code class="codeph">RESTORE</code> <code class="codeph">TABLESPACE</code>和<code class="codeph">RECOVER</code> <code class="codeph">TABLESPACE</code>命令。在这种情况下，您必须使需要恢复的表空间脱机，恢复然后恢复表空间，并使恢复的表空间联机。
                     </p>
                     <div class="section">
                        <p>如果无法将数据文件还原到其原始位置，请使用<code class="codeph">RUN</code>块中的RMAN <code class="codeph">SET NEWNAME</code>命令指定新文件名和位置。然后，使用<code class="codeph">SWITCH DATAFILE ALL</code>命令（相当于使用SQL语句<code class="codeph">ALTER DATABASE RENAME FILE</code> ）更新控制文件，以反映在<code class="codeph">RUN</code>命令中已为其发出<code class="codeph">SET NEWNAME</code>所有数据文件的新名称。
                        </p>
                        <p>与用户管理的介质恢复不同，您<span class="italic">不会</span>将联机表空间置于<a href="glossary.html#GUID-BD2A12D3-A995-49B8-AE99-B8DDDF4FE7E7"><span class="xrefglossterm">备份模式</span></a> 。RMAN不需要额外的日志记录或备份模式，因为它知道数据块的格式。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8__GUID-305AECEF-0FFF-4C42-B0C7-E933795994EB">在数据库打开时恢复单个表空间：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="To recover the database because a media failure damages database files, then first ensure that you have the necessary backups.">准备还原和恢复数据库文件</a> ”中的</span>说明<span class="q"><a href="getting-started-rman.html#GUID-F05FE79E-7C36-402B-8785-961F793AA710" title="要恢复数据库，因为介质故障会损坏数据库文件，请首先确保您具有必要的备份。">准备恢复</a></span> 。</span></li>
                        <li class="stepexpand"><span>使表空间脱机恢复。</span><div>
                              <p>以下示例使<code class="codeph">USERS</code>表空间脱机：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER TABLESPACE用户脱机;</pre></div>
                        </li>
                        <li class="stepexpand"><span>还原并恢复表空间。</span><div>
                              <p>您在RMAN提示符下执行的以下<code class="codeph">RUN</code>命令在<code class="codeph">USERS</code>表空间中为数据文件设置新名称：</p><pre class="oac_no_warn" dir="ltr">运行{SET NEW DATA FOR DATAFILE'/disk1/oradata/prod/users01.dbf'TO'/disk2/users01.dbf'; RESTORE TABLESPACE用户; SWITCH DATAFILE ALL; ＃更新控制文件，使用新文件名RECOVER TABLESPACE用户; }</pre></div>
                        </li>
                        <li class="stepexpand"><span>使表空间联机，如以下示例所示：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; ALTER TABLESPACE用户在线;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>您还可以使用<code class="codeph">RESTORE DATAFILE</code>和<code class="codeph">RECOVER DATAFILE</code>在数据文件级别进行恢复。
                        </p>
                        <div class="infoboxnotealso" id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8__GUID-0C9261C3-70BF-4D9B-A4E3-6A1053132540">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="rman-complete-database-recovery.html#GUID-4EBD9D56-9700-45A1-B233-1F5506A04532" title="使用带有TABLESPACE选项的RESTORE和RECOVER命令可以执行表空间的完全恢复">执行表空间的完全恢复</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="rman-backup-concepts.html#GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" title="您可以创建RMAN备份或用户管理的备份。">关于在线备份和备份模式</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV558"></a><a id="BRADV89371"></a><div class="props_rev_3"><a id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" name="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E"></a><h4 id="BRADV-GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" class="sect4"><span class="enumeration_section">2.9.4</span>恢复单个数据块：快速入门</h4>
                  <div>
                     <p>RMAN可以恢复单个损坏的数据文件块。</p>
                     <div class="section">
                        <p>当RMAN对文件执行完整的扫描以进行备份时， <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>中列出了任何损坏的块。通常在警报日志，跟踪文件或SQL查询结果中报告损坏。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E__GUID-EED29271-8F04-4A0F-A066-FFF76A152F5B">要恢复数据块：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动RMAN并连接到目标数据库，如<span class="q">“ <a href="getting-started-rman.html#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" title="在使用RMAN执行任何操作之前，必须连接到目标数据库。">启动RMAN并连接到数据库</a> ”中所述</span> 。</span></li>
                        <li class="stepexpand"><span>如果您没有此信息，请获取损坏块的块编号。</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; SELECT NAME，VALUE FROM V $ DIAG_INFO;</pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">RECOVER</code>命令以修复块。</span><div>
                              <p>以下RMAN命令恢复所有损坏的块：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;恢复腐败清单;</pre><p>您还可以恢复单个块，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;恢复数据文件1块233,235数据文件2块100到200;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E__GUID-641C5748-E11B-4796-9E60-902DCE0C2551">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="rman-block-media-recovery.html#GUID-1E226393-17D0-4AB0-A05D-91210255D8FF" title="阻止介质恢复恢复通过恢复损坏的数据块提供较低的平均恢复时间（MTTR）。使用块介质恢复来恢复数据文件中的一个或多个损坏的数据块。通常，数据库将块标记为介质损坏，然后在首次遇到损坏时将其写入磁盘。在块恢复之前，块的后续读取不会成功。您只能对标记为损坏或未通过损坏检查的块执行块恢复。阻止恢复行为取决于是在主数据库还是物理备用数据库上发现数据块损坏。V $ DATABASE_BLOCK_CORRUPTION视图显示由数据库组件（如RMAN，ANALYZE和SQL查询）标记为已损坏的块。阻止介质恢复仅需要对要恢复的块进行不间断的重做更改。这与数据文件恢复不同，它需要从恢复开始到结束时不间断的一系列重做更改。在使用RECOVER执行块介质恢复之前，必须满足某些先决条件...BLOCK命令。使用RECOVER ......BLOCK命令用于恢复数据文件中的各个损坏块。您确定需要恢复的块，然后使用任何可用的备份来还原和恢复这些块。您可以使用Data Recovery Advisor诊断和修复数据块损坏导致的故障。在此示例中，VALIDATE DATABASE命令时发现了损坏的数据块。RMAN可以自动恢复V $ DATABASE_BLOCK_CORRUPTION视图中列出的所有块。">执行块介质恢复</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03691.image-processing-virtual-mosaic.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking."></meta>
      <meta name="description" content="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking."></meta>
      <title>图像处理和虚拟马赛克</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="GeoRaster Developer&#39;s Guide "></meta>
      <meta property="og:description" content="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="GeoRaster Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-georaster-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T11:48:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94793-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="raster-algebra-and-analytics.html" title="Previous" type="text/html"></link>
      <link rel="next" href="SDO_GEOR-reference.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="GEORS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="raster-algebra-and-analytics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="SDO_GEOR-reference.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">GeoRaster开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">图像处理和虚拟马赛克</li>
            </ol>
            <a id="GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" name="GUID-EB60166B-6A52-4974-AF16-139CD6480EBC"></a><a id="GEORS1217"></a>
            
            <h2 id="GEORS-GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" class="sect2"><span class="enumeration_chapter">6</span>图像处理和虚拟马赛克</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。</p>
               <p>本章还介绍了<span class="italic">虚拟马赛克</span>在大型图像数据库环境中的概念和应用，以及对其的动态空间查询。
               </p>
               <p>本章中的操作最常用于处理地理空间图像，特别是原始卫星图像和空中照片。但是，这些操作与GeoRaster栅格代数一样，适用于所有栅格数据类型。</p>
               <p>本章包含以下主要部分。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01">高级地理配准</a><br>除了空间参考功能外，还提供了高级地理配准功能。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928">图像重新投影</a><br>图像重投影是将图像从一个SRS（空间参考系统或坐标系）转换为另一个的过程。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897">图像校正</a><br>大多数来自地面以上远程传感器的栅格数据通常会受到地形，仪器视角和地球不规则形状引起的失真。如本节所述，图像校正是转换图像以减少一些失真的过程。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95">图像正射校正</a><br>正射校正是一种整流变换过程，其中使用有关高程，地形和地球形状的信息来改善输出整流图像的质量。Oracle GeoRaster支持具有平均高度值或DEM的单图像正射校正。</li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-F9C2917F-B85A-4D24-B760-A60CB5685501">图像变形</a><br>图像变形使用来自指定SDO_GEOR_SRS对象的空间参考信息将输入GeoRaster对象转换为输出GeoRaster对象。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B">图像仿射变换和缩放</a><br>仿射变换是在图像上使用平移，缩放，旋转，剪切和反射的几何变换以产生另一图像的过程。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-1BFCB081-6C19-4727-B07E-1127515D75CD">图像拉伸，标准化，均衡，直方图匹配和闪避</a><br>可以增强图像的颜色和对比度以改善其视觉质量。SDO_GEOR_IP包（用于图像处理的“IP”）提供用于图像增强的一组子程序，包括执行图像拉伸，图像归一化，图像均衡，直方图匹配和图像躲避。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-F3C5A387-4E89-4E85-B17D-75FB75917869">图像过滤</a><br>图像过滤是在图像上应用卷积滤波器以实现特定目的的过程。例如，在图像上应用低通滤波器可以平滑并降低图像中的噪声，而在图像上应用高通滤波器可以增强图像的细节甚至检测图像内的边缘。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28">图像分割</a><br>分割是一种简单类型的分类算法，可用于将某些类型的图像分类为更大的地面特征类别，例如陆地，云，水或雪。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77">图像金字塔：并行生成和部分更新</a><br>图像金字塔是构建大规模图像数据库中最常用的过程之一。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE">位图金字塔</a><br>在某些传统金字塔不足的情况下，位图金字塔可以生成高质量的金字塔。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355">植被指数计算</a><br>在遥感中，归一化植被指数（NDVI）是一种广泛使用的植被指数，使用户能够快速识别植被区域并监测植物的生长和“状况”。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-2530F5D2-7386-4DD4-877A-F004F2109912">Tasseled Cap Transformation</a><br>Tasseled Cap Transformation（TCT）是一种使用遥感图像分析物理地面特征的有用工具。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15">图像掩蔽</a><br>要执行图像蒙版，应用程序可以在GeoRaster数据库中查询位图蒙版，检索所需的位图蒙版或蒙版，并在目标GeoRaster对象上应用蒙版操作，以显示对象或执行其他一些处理。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807">乐队合并</a><br>对于图像分类，时间序列分析和栅格GIS建模，可能需要将多个波段或不同GeoRaster对象的图层合并到单个GeoRaster对象中。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156">图像追加</a><br>当两个图像具有相同数量的波段时，您可以将一个图像附加到另一个图像。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA">大规模图像镶嵌</a><br>大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD">虚拟马赛克</a><br>虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-639C081E-8E7F-4467-8B89-3363810F561F">图像服务</a><br>通过GeoRaster PL / SQL和Java API的许多功能支持向客户端或应用程序提供图像和栅格数据。</li>
               </ul>
            </div>
            <a id="GEORS1310"></a><a id="GEORS1311"></a><a id="GEORS1218"></a><div class="props_rev_3"><a id="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" name="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01"></a><h3 id="GEORS-GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" class="sect3"><span class="enumeration_section">6.1</span>高级地理配准</h3>
               <div>
                  <p>除了空间参考功能外，还提供了高级地理配准功能。</p>
                  <p>在GeoRaster中，空间参考能力称为SRS（空间参考系统）或地理参考，其可能与地理或地理空间方案相关，也可能不相关。地理配准是GeoRaster的一个关键特性，是地理空间图像和网格栅格数据的空间查询和操作的基础。有关SRS模型的详细说明，请参阅<a href="georaster-overview-and-concepts.html#GUID-E32BF03B-DB83-422E-B7D0-C0F3073890F9" title="GeoRaster空间参考系统（SRS）是GeoRaster对象的元数据组件，包括与地理配准相关的信息。地理配准建立了GeoRaster数据的单元坐标与真实世界地面坐标（或某些本地坐标）之间的关系。地理配准将地面坐标分配给单元格坐标，将单元格坐标分配给地面坐标。">地理配准</a> 。
                  </p>
                  <p>GeoRaster支持非地理空间图像，美术照片和多维数组，这些数据可能与任何坐标系无关。对于那些图像和栅格，通常不需要地理参考，但是大多数GeoRaster操作仍然适用于它们，例如金字塔，缩放，子集，波段合并，拉伸和代数运算。在这些情况下，您使用栅格的单元格空间坐标（即行，列和波段）来处理像素（单元格）。</p>
                  <p>您还可以创建与地理无关的用户定义坐标系（新SRID），并且可以将该SRID用作栅格的模型坐标系。然后，您可以在空间上将这些栅格引用到该SRID;也就是说，将为每个栅格创建一个SRS元数据组件。这样做会导致这些栅格被空间参考，从而共同位于该用户定义的模型坐标系中。在为所有相关栅格完成此操作后，GeoRaster操作将对这些栅格进行处理，就像它们被地理坐标系统地理坐标系统一样。例如，假设一位艺术家在墙上画了一幅大型壁画，并且您希望能够拍摄这张墙的不同瓷砖的许多高分辨率照片，然后将它们拼接在一起。您可以在空间上参考平铺图像，然后使用GeoRaster镶嵌功能进行拼接。</p>
                  <p>如果未定义新坐标系，则仍可以在单元格空间中共同定位图像。也就是说，您可以通过调用<a href="SDO_GEOR-reference.html#GUID-B5BF3AB1-3EB5-4D86-B417-28662B7AD00B">SDO_GEOR.setULTCoordinate</a>过程为图像设置不同的ULT坐标，以便图像在同一坐标系中对齐，然后可以镶嵌。
                  </p>
                  <p>您拥有的大多数地理空间图像和光栅文件可能已经被其他软件工具地理配准，因此它们可能带有地理配准信息。在这些情况下，可以使用<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> ， <a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a> ，GeoRaster加载程序工具，GDAL或其他第三方ETL工具直接使用栅格或之后加载地理配准信息。有关更多信息，请查看<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">GeoRaster工具：Viewer_ Loader_ Exporter</a>和<a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">Georeferencing GeoRaster Objects</a> 。
                  </p>
                  <p>如果地理空间图像没有空间参考信息，您可以使用GeoRaster地面控制点（GCP）支持对图像进行地理配准。GCP由遥感系统自动收集或随后手动收集。对于没有GCP信息的图像，您可以使用GeoRaster可视化工具来收集GeoRaster对象的GCP。<a href="georaster-overview-and-concepts.html#GUID-EC9DEF7E-54B5-488A-BBCC-932334C9FF9E">地面控制点（GCP）地理配准模型</a>中描述了<a href="georaster-overview-and-concepts.html#GUID-EC9DEF7E-54B5-488A-BBCC-932334C9FF9E">GCP</a> 。
                  </p>
                  <p>拥有GCP并希望将它们存储在GeoRaster元数据中之后，您可以使用<a href="SDO_GEOR-reference.html#GUID-9150C734-101F-479C-8FE4-3B3613C54EE1">SDO_GEOR.getGCPGeorefModel</a>函数和<a href="SDO_GEOR-reference.html#GUID-C6DD6322-F4C7-48B9-B009-AD92A54AFBC8">SDO_GEOR.setGCPGeorefModel</a>过程来获取和设置基于GCP的地理配准模式。要仅获取，设置和编辑GCP，请使用<a href="SDO_GEOR-reference.html#GUID-C2E30658-697E-413D-9EC7-1C55814B5BBD">SDO_GEOR.getControlPoint</a>函数以及<a href="SDO_GEOR-reference.html#GUID-44A07135-D379-4DE1-86B1-D299388033E4">SDO_GEOR.setControlPoint</a>和<a href="SDO_GEOR-reference.html#GUID-ACB2F70E-DAB7-4AFC-9DDE-F35F451A19C1">SDO_GEOR.deleteControlPoint</a>过程。当您调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>时，GCP也可以存储在GeoRaster元数据中。
                  </p>
                  <p>要仅获取和设置几何模型，请使用<a href="SDO_GEOR-reference.html#GUID-A6BBF1F3-E28C-414D-BE24-8F8C8266B121">SDO_GEOR.getGCPGeorefMethod</a>函数和<a href="SDO_GEOR-reference.html#GUID-7F595E4E-2770-4012-9CFE-3B4725C82EF1">SDO_GEOR.setGCPGeorefMethod</a>过程。GeoRaster还允许您存储检查点（ <code class="codeph">pointType</code> = 2），这些检查点以与控制点（ <code class="codeph">pointType</code> = 1）相同的方式进行处理和操作，除了在调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>时不使用检查点来创建SRS系数。 GCP。
                  </p>
                  <p>如果您具有存储在GeoRaster对象中的地面控制点（GCP），并且您想要计算功能拟合地理配准模型，则可以调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>过程来查找解决方案。功能拟合地理配准模型存储GeoRaster SRS中的所有系数，并启用单元空间和模型空间之间的坐标变换。要使用GCP生成功能拟合地理配准模型，必须指定适当的几何模型。<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>支持的特定几何模型是仿射变换，二次多项式，立方多项式，DLT，二次有理和RPC。 <a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">功能拟合地理配准模型</a>中描述了这些<a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">模型</a> 。
                  </p>
                  <div class="example" id="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">
                     <p class="titleinexample">示例6-1设置GCP地理配准模型</p>
                     <p>例如，如果您在普通区域中有Landsat图像并希望对其进行地理配准，则可以选择“二次多项式”几何模型。为此，假设您已经收集了9个GCP（在这种情况下至少有6个GCP）和3个检查点，您可以使用<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">例6-1中</a>的代码设置GCP并将它们存储在GeoRaster的元数据中。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; georefModel SDO_GEOR_GCPGEOREFTYPE; GCPs SDO_GEOR_GCP_COLLECTION;从georaster_table开始选择georaster INTO gr1 WHERE georid = 1 FOR UPDATE; GCP：= SDO_GEOR_GCP_COLLECTION（SDO_GEOR_GCP（'1'，''，1,2，sdo_number_array（25,73），2，sdo_number_array（237036.9,897987.2），NULL，NULL），SDO_GEOR_GCP（'2'，''，1， 2，sdo_number_array（100,459），2，sdo_number_array（237229.6,897949.7），NULL，NULL），SDO_GEOR_GCP（'3'，''，1,2，sdo_number_array（362,77），2，sdo_number_array（237038.9,897818.8） ），NULL，NULL），SDO_GEOR_GCP（'4'，''，1,2，sdo_number_array（478,402），2，sdo_number_array（237201.06,897760.56），NULL，NULL），SDO_GEOR_GCP（'5'，''， 1,2，sdo_number_array（167,64），2，sdo_number_array（237032.02,897916.26），NULL，NULL），SDO_GEOR_GCP（'6'，''，1,2，sdo_number_array（101,257），2，sdo_number_array（237128.9） ，897949.3），NULL，NULL），SDO_GEOR_GCP（'7'，''，1,2，sdo_number_array（235,501），2，sdo_number_array（237250.9,897882.2），NULL，NULL），SDO_GEOR_GCP（'8'，' '，1,2，sdo_number_array（423,214），2，sdo_number_array（237107.3,897788.0），NULL，NULL），SDO_GEOR_GCP（'9'，''，1,2，sdo_number_array（127,178），2，sdo_number_array （237089.0,8 97936.5），NULL，NULL），SDO_GEOR_GCP（'10'，''，2,2，sdo_number_array（131,425），2，sdo_number_array（237212.8,897934.2），NULL，NULL），SDO_GEOR_GCP（'11'，'' ，2,2，sdo_number_array（299,111），2，sdo_number_array（237055.7,897850.4），NULL，NULL），SDO_GEOR_GCP（'12'，''，2,2，sdo_number_array（329,253），2，sdo_number_array（ 237126.9,897835.4），NULL，NULL））; georefModel：= SDO_GEOR_GCPGEOREFTYPE（'QuadraticPolynomial'，GCPs.count，GCPs，NULL）; - 将GCP地理参考模型设置并存储到GeoRaster对象的元数据sdo_geor.setGCPGeorefModel（gr1，georefModel）;更新georaster_table SET georaster = gr1 WHERE georid = 1;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">
                     <p class="titleinexample">例6-2使用GCP生成功能拟合模型</p>
                     <p>使用<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">例6-1中</a>的代码后，可以使用<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">例6-2中</a>的代码生成函数拟合模型系数。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; rms sdo_number_array;从georaster_table开始选择georaster INTO gr1 WHERE georid = 1 FOR UPDATE; - 使用存储在图像元数据中的GCP对图像进行地理配准rms：= sdo_geor.georeference（gr1，null，26986,0，'TRUE'）;更新georaster_table SET georaster = gr1 WHERE georid = 1;承诺;结束; /</pre><p>中的步骤<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">实施例6-1</a>和<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">实施例6-2</a>可以无需预先设定的地面控制点到GeoRaster对象的元数据（参见示例中被组合<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>在<a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="SDO_GEOR包中包含用于创建，修改和检索有关GeoRaster对象的信息的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR包参考</a> ）。<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">例6-2</a>中<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>的返回值数组包含每个GCP的RMS值和残差。使用这些，您可以检查解决方案的准确性并识别不稳定的GCP。如果准确性不令人满意，请重新检查所有GCP以确保它们准确无误并根据需要添加更多GCP，然后再次运行脚本或脚本。
                     </p>
                     <p>GeoRaster中的GCP支持使您能够在空间上参考任何<span class="italic">非</span>地理空间图像和栅格。
                     </p>
                     <p>在对地理空间图像进行地理配准后，您可以处理这些图像，例如应用校正，重投影和镶嵌，以及使用不同坐标系中的几何多边形对栅格进行空间查询和子集化。</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1327"></a><a id="GEORS1274"></a><div class="props_rev_3"><a id="GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928" name="GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928"></a><h3 id="GEORS-GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928" class="sect3"><span class="enumeration_section">6.2</span>图像重新投影</h3>
               <div>
                  <p>图像重投影是将图像从一个SRS（空间参考系统或坐标系）转换为另一个的过程。</p>
                  <p>对于组合两个或多个对象的某些GeoRaster操作，重新投影特别有用，因为它要求所涉及的所有GeoRaster对象都在同一个SRS中。</p>
                  <p>GeoRaster中的基本重新投影由<a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>过程执行，并要求源GeoRaster SRID与输出SRID不同。</p>
                  <div class="example" id="GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928__CHDBGHBG">
                     <p class="titleinexample">例6-3图像重新投影</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928__CHDBGHBG">示例6-3</a>重新投影已使用SRID 4326加载到GeoRaster对象中的光栅图像，但需要重新投影以具有与先前使用SRID 23619存储的其他图像相同的SRID。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; BEGIN从georaster_load_table中选择栅格到gr1，其中georid = 10;从georaster_table删除georid = 54;插入georaster_table值（54，'reprojected'，sdo_geor.init（））将georaster返回到gr2; sdo_geor.reproject（inGeoRaster =&gt; gr1，pyramidLevel =&gt; 0，cropArea =&gt; null，layerNumbers =&gt; null，resampleParam =&gt;'resampling = BILINEAR'，storageParam =&gt; null，outSRID =&gt; 32619，outGeoraster =&gt; gr2）;更新georaster_table set georaster = gr2 where georid = 54;承诺;结束;</pre><p>可以通过<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程完成相同的操作，产生类似的结果。<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程提供比<a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>更多的功能和灵活性;例如，输入和输出SRID可以相同，用户可以指定输出的精确分辨率（参见<a href="image-processing-virtual-mosaic.html#GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" title="大多数来自地面以上远程传感器的栅格数据通常会受到地形，仪器视角和地球不规则形状引起的失真。如本节所述，图像校正是转换图像以减少一些失真的过程。">图像校正</a> ）。
                     </p>
                     <p>如果GeoRaster对象没有关联的SRS，则在地理配准<a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">GeoRaster对象</a>和<a href="image-processing-virtual-mosaic.html#GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" title="大多数来自地面以上远程传感器的栅格数据通常会受到地形，仪器视角和地球不规则形状引起的失真。如本节所述，图像校正是转换图像以减少一些失真的过程。">图像校正</a>中将解释地理配准和纠正它的过程。
                     </p>
                     <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程支持并行重投影。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1328"></a><a id="GEORS1275"></a><div class="props_rev_3"><a id="GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" name="GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897"></a><h3 id="GEORS-GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" class="sect3"><span class="enumeration_section">6.3</span>图像校正</h3>
               <div>
                  <p>大多数来自地面以上远程传感器的栅格数据通常会受到地形，仪器视角和地球不规则形状引起的失真。如本节所述，图像校正是转换图像以减少一些失真的过程。</p>
                  <p>整改由<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程执行，并要求源GeoRaster对象至少具有功能拟合地理配准模型。这意味着图像不需要纠正，但需要在元数据中包含地理参考信息（请参阅<a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">地理配准GeoRaster对象</a> ）。
                  </p>
                  <p><a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程可以使用源GeoRaster对象中可用的信息自动建立输出GeoRaster的空间范围，维度和SRID，用户还可以使用适当的参数指定不同的值。
                  </p>
                  <div class="example" id="GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897__GUID-B95EF199-B348-4417-AF59-AA520AB727FB">
                     <p class="titleinexample">例6-4图像校正</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928__CHDBGHBG">例6-3</a>对已加载到GeoRaster中并随后使用GCP进行地理配准的航拍图像进行校正（请参阅<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" title="除了空间参考功能外，还提供了高级地理配准功能。">高级</a>地理参考）。对图像进行校正，以使输出GeoRaster对象具有与现有GeoRaster对象相同的SRS和分辨率。图像将限制在现有GeoRaster对象的区域，像素应与现有的GeoRaster对象完美对齐。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr_src sdo_georaster; gr_ref sdo_georaster; gr_out sdo_georaster; BEGIN从georaster_load_table中选择栅格到gr_src，其中georid = 15;从georaster_table中选择栅格到gr_ref，其中georid = 1;从georaster_table删除georid = 2;插入georaster_table值（2，'rectified'，sdo_geor.init（））将georaster返回到gr_out; sdo_geor.rectify（inGeoRaster =&gt; gr_src，pyramidLevel =&gt; null，elevationParam =&gt; null，dem =&gt; null，outSRID =&gt; sdo_geor.getModelSRID（gr_ref），outModelCoordLoc =&gt; null，cropArea =&gt; sdo_geor.generateSpatialExtent（gr_ref），polygonClip =&gt; null，layerNumbers =&gt; null，outResolutions =&gt; sdo_geor.getSpatialResolutions（gr_ref），resolutionUnit =&gt;'unit = meters'，referencePoint =&gt; sdo_geor.getModelCoordinate（gr_ref，0，sdo_number_array（-0.5，-0.5）），resampleParam =&gt; null，storageParam =&gt; null，outGeoraster =&gt; gr_out）;更新georaster_table set georaster = gr_out其中georid = 2;承诺;结束;</pre><p>如果有关高程的信息传递给<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>程序，则可以显着改善整流输出。（有关高程的更多信息，请参见<a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" title="正射校正是一种整流变换过程，其中使用有关高程，地形和地球形状的信息来改善输出整流图像的质量。Oracle GeoRaster支持具有平均高度值或DEM的单图像正射校正。">图像正射校正</a> 。）
                     </p>
                     <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程支持并行纠正。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1276"></a><div class="props_rev_3"><a id="GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" name="GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95"></a><h3 id="GEORS-GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" class="sect3"><span class="enumeration_section">6.4</span>图像正射校正</h3>
               <div>
                  <p>正射校正是一种整流变换过程，其中使用有关高程，地形和地球形状的信息来改善输出整流图像的质量。Oracle GeoRaster支持具有平均高度值或DEM的单图像正射校正。</p>
                  <p>正射校正由<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程完成，并要求源GeoRaster具有3D SRS。 <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>程序可以仅使用区域的平均高度或使用详细的数字高程模型（DEM）执行正射校正。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-2A0127F1-E83D-4462-B19B-52DB968F1737">平均高度正射校正</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-C79FECF7-D80B-4B50-91D6-398D81315C77">用DEM进行正射校正</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1330"></a><a id="GEORS1329"></a><div class="props_rev_3"><a id="GUID-2A0127F1-E83D-4462-B19B-52DB968F1737" name="GUID-2A0127F1-E83D-4462-B19B-52DB968F1737"></a><h4 id="GEORS-GUID-2A0127F1-E83D-4462-B19B-52DB968F1737" class="sect4"><span class="enumeration_section">6.4.1</span>平均高度的正射校正</h4>
                  <div>
                     <p>具有数字高程模型（DEM）的GeoRaster对象是正射校正的可选对象。对于相对平坦的地形，3D SRS连同平均高度值可能足以校正源图像的失真。</p>
                     <div class="example" id="GUID-2A0127F1-E83D-4462-B19B-52DB968F1737__CHDEFJEE">
                        <p class="titleinexample">例6-5平均高度的正射校正</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-2A0127F1-E83D-4462-B19B-52DB968F1737__CHDEFJEE">例6-5</a>显示了具有平均高度的正射校正。对于此示例，源图像是使用RPC从DigitalGlobe获取的。 DEM不可用，但已知该区域的平均海拔为1748.0米。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE gr_src sdo_georaster; gr_out sdo_georaster; BEGIN从georaster_table中选择georaster到gr_src，其中georid = 1;从georaster_table删除georid = 3;插入georaster_table值（3，'没有DEM的正射校正'，sdo_geor.init（'rdt_4'，3））将georaster返回到gr_out; sdo_geor.rectify（inGeoRaster =&gt; gr_src，pyramidLevel =&gt; null，elevationParam =&gt;'average = 1748.8'，dem =&gt; null，outSRID =&gt; 32613，outModelCoordLoc =&gt; null，cropArea =&gt; null，polygonClip =&gt; null，layerNumbers = &gt; null，outResolutions =&gt; null，resolutionUnit =&gt; null，referencePoint =&gt; null，resampleParam =&gt;'resampling = AVERAGE4'，storageParam =&gt; null，outGeoraster =&gt; gr_out）;更新georaster_table set georaster = gr_out其中georid = 3;承诺;结束;</pre><p>在<a href="image-processing-virtual-mosaic.html#GUID-2A0127F1-E83D-4462-B19B-52DB968F1737__CHDEFJEE">示例6-5中</a> ， <code class="codeph">dem</code>参数为null，并且<code class="codeph">elevationParam</code>平均高程必须与SRS在同一单元中。此外，在<code class="codeph">elevationParam</code> ， <span class="italic">未</span>指定<code class="codeph">offset</code>和scale <code class="codeph">keywords</code> ，因为只有在指定DEM时它们才相关。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" title="正射校正是一种整流变换过程，其中使用有关高程，地形和地球形状的信息来改善输出整流图像的质量。Oracle GeoRaster支持具有平均高度值或DEM的单图像正射校正。">图像正射校正</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1332"></a><a id="GEORS1333"></a><a id="GEORS1331"></a><div class="props_rev_3"><a id="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77" name="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77"></a><h4 id="GEORS-GUID-C79FECF7-D80B-4B50-91D6-398D81315C77" class="sect4"><span class="enumeration_section">6.4.2</span>使用DEM进行正射校正</h4>
                  <div>
                     <p>使用DEM（数字高程模型）层可提高整流过程的准确性，从而生成更高质量的输出GeoRaster对象。</p>
                     <p>使用DEM进行正射校正需要源GeoRaster具有3D SRS。 DEM必须覆盖所有目标输出区域，并且它应与输出位于相同的SRID中。DEM的分辨率应与输出GeoRaster对象的预期分辨率相似。</p>
                     <p>对于使用DEM进行正射校正， <code class="codeph">elevationParam</code> <code class="codeph">average</code>关键字是可选的;如果未指定，则该过程基于从目标区域上的DEM提取的样本值来估计高程值。
                     </p>
                     <p><code class="codeph">elevationParam</code> <code class="codeph">offset</code>和<code class="codeph">scale</code>值可用于修改DEM中的值。例如，如果DEM值的值不是源GeoRaster SRS的单位，则可以使用<code class="codeph">scale</code>进行单位转换，并且可以使用<code class="codeph">offset</code>来执行大地水准校正或其他偏移。但是，这些规范不会对GeoRaster对象中的DEM值应用更改。另一种方法是通过在正射校正之前对DEM数据应用缩放和偏移来预处理DEM值，如<a href="raster-algebra-and-analytics.html#GUID-34B59129-70AC-4E51-BF6D-2E43AA2A813B" title="您可以执行栅格数据缩放和偏移操作。">栅格数据缩放和偏移中所述</a> 。
                     </p>
                     <div class="example" id="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCFHEH">
                        <p class="titleinexample">实施例6-6用DEM正射校正</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCFHEH">例6-6</a>示例使用DEM执行正射校正。 DEM以近似于输出GeoRaster分辨率的分辨率覆盖所有输出区域。DEM值以米为单位，但源图像SRS以英尺为单位。该区域的大地水准面修正约为-15.3米：</p><pre class="oac_no_warn" dir="ltr">DECLARE gr_src sdo_georaster; gr_dem sdo_georaster; gr_out sdo_georaster; BEGIN从georaster_table中选择georaster到gr_src，其中georid = 1;从Georaster_table中选择georaster到gr_dem，其中georid = 5;从georaster_table删除georid = 6;插入georaster_table值（5，'与DEM正面重新'，sdo_geor.init（'rdt_4'，6））将georaster返回到gr_out; sdo_geor.rectify（inGeoRaster =&gt; gr_src，pyramidLevel =&gt; null，elevationParam =&gt;'average = 1748.8 offset = -15.3'，dem =&gt; gr_dem，outSRID =&gt; 32613，outModelCoordLoc =&gt; null，cropArea =&gt; null，polygonClip =&gt; null，layerNumbers =&gt; null，outResolutions =&gt; null，resolutionUnit =&gt; null，referencePoint =&gt; null，resampleParam =&gt;'resampling = BILINEAR'，storageParam =&gt; null，outGeoraster =&gt; gr_out）;更新georaster_table set georaster = gr_out其中georid = 6;承诺;结束;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCAIHF">
                        <p class="titleinexample">实施例6-7用裁剪的DEM进行正射校正</p>
                        <p>通常，DEM覆盖的区域远大于目标区域，并且分辨率比输出GeoRaster对象的目标分辨率更粗糙。按“原样”使用这种DEM会导致质量差的正射校正。该常见问题的解决方案是将DEM裁剪到目标区域并将其重新调整为所需的分辨率，如<a href="image-processing-virtual-mosaic.html#GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCAIHF">例6-7</a>所示。此示例使用<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程将低分辨率DEM GeoRaster对象转换为第二个DEM GeoRaster对象，该对象具有与第二次调用<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程生成的正射校正GeoRaster对象相同的分辨率。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE高度数：= 1748.8; gr_src sdo_georaster; gr_out sdo_georaster; gr_dem sdo_georaster; gr_dem2 sdo_georaster; gm_area sdo_geometry;开始从georaster_table中选择georaster到gr_src，其中georid = 1;从georaster_table中选择georaster到gr_dem，其中georid = 2; - 计算裁剪区域gm_area：= sdo_cs.make_2d（sdo_geor.generateSpatialExtent（gr_src，height），sdo_geor.getModelSRID（gr_dem））; - 从Georaster_table中删除整理dem（重新投影，裁剪区域，重新缩放和重新采样），georid = 4;插入georaster_table值（4，'矫正DEM'，sdo_geor.init（'rdt_4'，4））将georaster返回到gr_dem2; sdo_geor.rectify（inGeoRaster =&gt; gr_dem，pyramidLevel =&gt; null，elevationParam =&gt; null，dem =&gt; null，outSRID =&gt; 32613，outModelCoordLoc =&gt; null，cropArea =&gt; gm_area，polygonClip =&gt; null，layerNumbers =&gt; null，outResolutions =&gt; sdo_number_array（0.6,0.6），resolutionUnit =&gt; null，referencePoint =&gt; null，resampleParam =&gt;'resampling = CUBIC'，storageParam =&gt; null，outGeoraster =&gt; gr_dem2）;更新georaster_table set georaster = gr_dem2其中georid = 4;承诺; - 使用DEM选择正射校正从georaster_table选择georaster到gr_dem2，其中georid = 4;从Georaster_table删除georid = 5;插入georaster_table值（5，'orthorectified'，sdo_geor.init（'rdt_4'，5））将georaster返回到gr_out; sdo_geor.rectify（inGeoRaster =&gt; gr_src，pyramidLevel =&gt; null，elevationParam =&gt;'average ='|| height ||'offset = -15.588'，dem =&gt; gr_dem2，outSRID =&gt; 32613，outModelCoordLoc =&gt; null，cropArea = &gt; gm_area，polygonClip =&gt; null，layerNumbers =&gt; null，outResolutions =&gt; sdo_number_array（0.6,0.6），resolutionUnit =&gt; null，referencePoint =&gt; null，resampleParam =&gt;'resampling = average16'，storageParam =&gt; null，outGeoraster =&gt; gr_out）;更新georaster_table set georaster = gr_out其中georid = 5;承诺;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" title="正射校正是一种整流变换过程，其中使用有关高程，地形和地球形状的信息来改善输出整流图像的质量。Oracle GeoRaster支持具有平均高度值或DEM的单图像正射校正。">图像正射校正</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F9C2917F-B85A-4D24-B760-A60CB5685501" name="GUID-F9C2917F-B85A-4D24-B760-A60CB5685501"></a><h3 id="GEORS-GUID-F9C2917F-B85A-4D24-B760-A60CB5685501" class="sect3"><span class="enumeration_section">6.5</span>图像变形</h3>
               <div>
                  <p>图像变形使用来自指定SDO_GEOR_SRS对象的空间参考信息将输入GeoRaster对象转换为输出GeoRaster对象。</p>
                  <p>可以从现有GeoRaster对象复制参考SDO_GEOR_SRS对象，也可以使用构造函数创建对象。（有关更多信息，请参阅<a href="georaster-datatypes.html#GUID-A7C5B4C6-2B57-4E3F-B796-3313F6D67E57">SDO_GEOR_SRS对象类型</a> 。）
                  </p>
                  <p>变形由<a href="SDO_GEOR-reference.html#GUID-1B480F30-85C6-4F02-BC5E-142A872BEF64">SDO_GEOR.warp</a>过程执行，并要求源GeoRaster对象至少具有功能拟合地理配准模型。这意味着图像不需要纠正，但需要在元数据中包含地理参考信息（请参阅<a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">地理配准GeoRaster对象</a> ）。
                  </p>
                  <div class="example" id="GUID-F9C2917F-B85A-4D24-B760-A60CB5685501__IMAGEWARPING-28D5437D">
                     <p class="titleinexample">例6-8图像变形</p>
                     <p>以下示例使用来自一个GeoRaster图像（ <code class="codeph">gr1</code> ）的SDO_GEOR_SRS信息作为参考，将现有GeoRaster对象（ <code class="codeph">gr2</code> ）转换为新的（扭曲的）GeoRaster对象（ <code class="codeph">gr3</code> ）。因此，第三个GeoRaster对象是第二个GeoRaster对象的“复制”（实际上是转换），但反映了与第一个GeoRaster对象相同的地理配准。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE srs sdo_geor_srs; gr1 sdo_georaster; gr2 sdo_georaster; gr3 sdo_georaster; BEGIN从georaster_table中选择georaster到gr1，其中georid = 1;从Georaster_table中选择georaster到gr2，其中georid = 2; srs：= sdo_geor.getSRS（gr1）; - 从图像1获取SRS。插入georaster_table值（3，'扭曲对象'，sdo_geor.init（'imagery_rdt'））将georaster返回到gr3; sdo_geor.warp（inGeoRaster =&gt; gr2，pyramidLevel =&gt; null，outSRS =&gt; srs， - 将SRS应用于warp transformation cropArea =&gt; null，dimensionSize =&gt; null，layerNumbers =&gt; null，elevationParam =&gt; null，resampleParam =&gt;' resampling = AVERAGE4'，storageParam =&gt;'pyramid = true'，outGeoRaster =&gt; gr3，bgValues =&gt; sdo_number_array（0,0,0），parallelParam =&gt;'parellel = 4'）;更新georaster_table set georaster = gr3其中georid = 3;承诺;结束;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1334"></a><a id="GEORS1335"></a><a id="GEORS1277"></a><div class="props_rev_3"><a id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B" name="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B"></a><h3 id="GEORS-GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B" class="sect3"><span class="enumeration_section">6.6</span>图像仿射变换和缩放</h3>
               <div>
                  <p>仿射变换是在图像上使用平移，缩放，旋转，剪切和反射的几何变换以产生另一图像的过程。</p>
                  <p>有关详细信息和示例，请参阅<a href="SDO_GEOR-reference.html#GUID-9C8F8F29-5D1A-4403-9147-B9FD1A30B767">SDO_GEOR.affineTransform</a>参考主题。
                  </p>
                  <p>图像缩放是通过改变图像的行和列尺寸的像素大小来放大或缩小图像的过程。图像缩放重新采样原始图像中的像素值，以构建该图像的重新缩放版本。可以通过多种方式执行图像缩放：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<a href="SDO_GEOR-reference.html#GUID-3F7A39BD-67FB-40B7-9143-32FA5DFD9628">SDO_GEOR.scaleCopy</a>过程并为<code class="codeph">scaleParam</code>指定要应用于输入图像尺寸的<code class="codeph">scaleFactor</code>或输出图像的<code class="codeph">maxDimSize</code> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程并指定输出图像的分辨率。（此过程可以并行执行。）
                        </p>
                     </li>
                     <li>
                        <p id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B___GOBACK-3ADA4D9C">在仿射变换期间，使用<a href="SDO_GEOR-reference.html#GUID-9C8F8F29-5D1A-4403-9147-B9FD1A30B767">SDO_GEOR.affineTransform</a>过程的<code class="codeph">scales</code>参数。在该过程中， <code class="codeph">scales</code>参数是一个两位数组，您可以在其中单独指定行和列的比例因子。（此过程可以并行执行。）
                        </p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B__CHDCBFGA">
                     <p class="titleinexample">示例6-9使用SDO_GEOR.scaleCopy进行图像缩放</p>
                     <p>此示例使用<a href="SDO_GEOR-reference.html#GUID-3F7A39BD-67FB-40B7-9143-32FA5DFD9628">SDO_GEOR.scaleCopy</a>执行重新缩放，并将<code class="codeph">scaleFactor</code>值指定为2。输入图像将具有比原始图像多2倍的行和2倍的列，并且这些值将通过<code class="codeph">average16</code>算法重新采样。请注意，图像将比原始图像大4倍。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr_src sdo_georaster; gr_out sdo_georaster; BEGIN从georaster_table中选择georaster到gr_src，其中georid = 7; - 从georaster_table重新缩放删除，其中georid = 9;插入georaster_table值（9，'由scaleCopy重新缩放'，sdo_geor.init（'rdt_4'，9））将georaster返回到gr_out; <span class="bold">sdo_geor.scaleCopy</span> （inGeoRaster =&gt; null， <span class="bold">scaleFactor =&gt;'scaleFactor = 2'</span> ，resampleParam =&gt;'resampling = AVERAGE16'，storageParam =&gt; null，outGeoraster =&gt; gr_out）;更新georaster_table set georaster = gr_out其中georid = 9;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B__CHDJGFIF">
                     <p class="titleinexample">示例6-10使用SDO_GEOR.rectify进行图像缩放</p>
                     <p>此示例使用<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>并指定<code class="codeph">outResolutions</code>参数执行重新缩放。输入图像已经过校正，输出将与输入具有相同的SRID。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr_src sdo_georaster; gr_out sdo_georaster; BEGIN从georaster_table中选择georaster到gr_src，其中georid = 7; - 从georaster_table重新缩放删除，其中georid = 10;插入georaster_table值（10，'通过矫正'重新缩放'，sdo_geor.init（'rdt_4'，10））将georaster返回到gr_out; <span class="bold">sdo_geor.rectify</span> （inGeoRaster =&gt; null，pyramidLevel =&gt; null，elevationParam =&gt; null，dem =&gt; null，outSRID =&gt; null，outModelCoordLoc =&gt; null，cropArea =&gt; null，polygonClip =&gt; null，layerNumbers =&gt; null， <span class="bold">outResolutions =&gt; sdo_number_array（1.2,1.2）</span> ，resolutionUnit =&gt; null，referencePoint =&gt; null，resampleParam =&gt;'resampling = CUBIC'，storageParam =&gt; null，outGeoraster =&gt; gr_out，parallelParam =&gt;'parallel = 4'）;更新georaster_table set georaster = gr_out其中georid = 10;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B__GUID-A1B493D3-6F40-49F5-86F1-616A068678B2">
                     <p class="titleinexample">例6-11使用SDO_GEOR.affineTransform重新缩放</p>
                     <p>此示例使用<a href="SDO_GEOR-reference.html#GUID-9C8F8F29-5D1A-4403-9147-B9FD1A30B767">SDO_GEOR.affineTransform</a>过程执行重新缩放，并指定将<code class="codeph">scales</code>参数<code class="codeph">scales</code>为<code class="codeph">sdo_number_array(2, 2)</code> ，指示图像将在行维上放大2次，在<code class="codeph">sdo_number_array(2, 2)</code>上放大2倍。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; BEGIN从georaster_table中选择georaster到gr1，其中georid = 1;插入georaster_table值（2，'向左旋转90'，sdo_geor.init（'rdt0'，2））将georaster返回到gr2; sdo_geor.affineTransform（inGeoRaster =&gt; gr1，translation =&gt; null， <span class="bold">scales =&gt; sdo_number_array（2,2）</span> ，rotatePt =&gt; null，rotateAngle =&gt; null，shear =&gt; null，reflection =&gt; null，storageParam =&gt; null，outGeoraster =&gt; gr2，parallelParam =&gt;'parallel = 4'）;更新georaster_table set georaster = gr2 where georid = 2;承诺;结束;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1337"></a><a id="GEORS1338"></a><a id="GEORS1336"></a><div class="props_rev_3"><a id="GUID-1BFCB081-6C19-4727-B07E-1127515D75CD" name="GUID-1BFCB081-6C19-4727-B07E-1127515D75CD"></a><h3 id="GEORS-GUID-1BFCB081-6C19-4727-B07E-1127515D75CD" class="sect3"><span class="enumeration_section">6.7</span>图像拉伸，标准化，均衡，直方图匹配和闪避</h3>
               <div>
                  <p>可以增强图像的颜色和对比度以改善其视觉质量。SDO_GEOR_IP包（用于图像处理的“IP”）提供用于图像增强的一组子程序，包括执行图像拉伸，图像归一化，图像均衡，直方图匹配和图像躲避。</p>
                  <p><span class="bold">线性拉伸</span>和<span class="bold">分段拉伸</span>可以基于最小和最大单元格值或在指定的值范围<span class="bold">线性地拉伸</span>所有单元格值的图像单元值，以实现更好的颜色和对比度。要执行图像拉伸，可以使用以下过程：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="SDO_GEOR_IP-reference-ref.html#GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E">SDO_GEOR_IP.stretch将</a>任何支持的单元格深度（1BIT到64BIT_REAL）中的GeoRaster对象拉伸到8BIT_U的单元深度以用于显示目的。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_IP-reference-ref.html#GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3">SDO_GEOR_IP.piecewiseStretch</a>将任何支持的单元格深度的GeoRaster对象拉伸到更高或更低单元格深度的GeoRaster对象，不限于8BIT_U。</p>
                     </li>
                  </ul>
                  <p>图像<span class="bold">归一化</span>基于图像单元值的统计（平均值和标准偏差）线性地拉伸图像。要执行图像规范化，请使用<a href="SDO_GEOR_IP-reference-ref.html#GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77">SDO_GEOR_IP.normalize</a> 。
                  </p>
                  <p>图像<span class="bold">均衡</span>通过均衡其直方图来增强图像对比度。要执行均衡，请使用<a href="SDO_GEOR_IP-reference-ref.html#GUID-5E8228CC-DD00-42F4-80A4-458533A998EA">SDO_GEOR_IP.equalize</a>过程。
                  </p>
                  <p>图像<span class="bold">直方图匹配</span>拉伸图像以匹配指定的直方图或参考图像的直方图。要执行图像直方图匹配，请使用<a href="SDO_GEOR_IP-reference-ref.html#GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA">SDO_GEOR_IP.histogramMatch</a>过程。
                  </p>
                  <p>图像<span class="bold">躲避</span>通过在本地而不是全局地拉伸图像的对比度来平衡图像颜色。要执行图像躲避，请使用<a href="SDO_GEOR_IP-reference-ref.html#GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4">SDO_GEOR_IP.dodge</a>过程。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-F3C5A387-4E89-4E85-B17D-75FB75917869" name="GUID-F3C5A387-4E89-4E85-B17D-75FB75917869"></a><h3 id="GEORS-GUID-F3C5A387-4E89-4E85-B17D-75FB75917869" class="sect3"><span class="enumeration_section">6.8</span>图像过滤</h3>
               <div>
                  <p>图像过滤是在图像上应用卷积滤波器以实现特定目的的过程。例如，在图像上应用低通滤波器可以平滑并降低图像中的噪声，而在图像上应用高通滤波器可以增强图像的细节甚至检测图像内的边缘。</p>
                  <p><a href="SDO_GEOR_IP-reference-ref.html#GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E">SDO_GEOR_IP.filter</a>过程提供标准滤波器，如低通滤波器（LPF），高通滤波器（HPF）和高升压滤波器（HBF）。它还允许您在图像上应用自定义过滤器。
                  </p>
                  <p>以下示例通过在图像上提供定制的3乘3拉普拉斯滤波器来执行图像滤波，以进行边缘检测。</p><pre class="pre codeblock"><code>DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_geometry; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.filter（gr1,0，cropArea，null，'filtertype = CUSTOM，kernelsize =（3,3）'，sdo_number_array（0,1,0,1，-4,1,0,1,0），null， GR2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</code></pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1339"></a><div class="props_rev_3"><a id="GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28" name="GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28"></a><h3 id="GEORS-GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28" class="sect3"><span class="enumeration_section">6.9</span>图像分割</h3>
               <div>
                  <p>分割是一种简单类型的分类算法，可用于将某些类型的图像分类为更大的地面特征类别，例如陆地，云，水或雪。</p>
                  <p><a id="d24355e1241" class="indexterm-anchor"></a>您可以使用<a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a>过程将阈值应用于图像。<span class="bold">阈值处理</span>是最简单的分割，它通过使用单个单元格值作为阈值将图像分为两类。生成的图像只有两个值，可以直接在同一进程中转换为二进制位图掩码。
                  </p>
                  <p>您还可以使用<a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a>过程应用更多图像分割操作，首先在多个波段上应用算术运算，然后将结果分类为多个类别。
                  </p>
                  <p>有关使用<a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a>过程的示例，请参阅<a href="raster-algebra-and-analytics.html#GUID-57DE5ACD-7DE9-4871-9DF0-CC685DF5114E" title="可以在源GeoRaster对象上应用分类（分段）操作以生成新对象。">分类操作</a> 。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1341"></a><a id="GEORS1342"></a><a id="GEORS1340"></a><div class="props_rev_3"><a id="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" name="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77"></a><h3 id="GEORS-GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" class="sect3"><span class="enumeration_section">6.10</span>图像拼接：并行生成和部分更新</h3>
               <div>
                  <p>图像金字塔是构建大规模图像数据库中最常用的过程之一。</p>
                  <p>本主题讨论了一些相关技术：并行金字塔生成，金字塔部分更新以及批处理和并发处理。</p>
                  <p>为了更有效地使用金字塔，您可以并行生成金字塔并执行金字塔的部分更新。（本节假设您了解<a href="georaster-overview-and-concepts.html#GUID-739D74CC-E256-4E89-AB7F-9251054B9E82" title="金字塔是GeoRaster对象的子对象，表示不同大小和分辨率的栅格图像或栅格数据。">金字塔中</a>解释的概念。）
                  </p>
                  <div class="example" id="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDDJJHI">
                     <p class="titleinexample">例6-12并行生成金字塔</p>
                     <p>为了更快地生成金字塔，可以使用<a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDO_GEOR.generatePyramid</a>过程指定<code class="codeph">parallelParam</code>参数。在<a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDDJJHI">例6-12中</a> ，并行度设置为4。（金字塔生成的实际性能改进取决于Oracle数据库可用的CPU数量。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr sdo_georaster; BEGIN SELECT georaster INTO gr FROM georaster_table WHERE georid = 6 FOR UPDATE; - 生成金字塔。sdo_geor.generatePyramid（gr，'rLevel = 5，resampling = NN'，null， <span class="bold">'parallel = 4'</span> ）; - 更新原始GeoRaster对象。更新georaster_table SET georaster = gr WHERE georid = 6;承诺;结束; /</pre><p>为了启用金字塔生成的并行处理， <a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDO_GEOR.generatePyramid</a>执行隐式提交操作。如果在调用期间出现错误，则GeoRaster对象可能处于无效状态。如果发生这种情况，请使用<a href="SDO_GEOR-reference.html#GUID-351B293B-CE47-45E0-92F0-DC7A52D84FDF">SDO_GEOR.deletePyramid</a>删除GeoRaster对象的新生成和上部金字塔等级。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDIABFI">
                     <p class="titleinexample">例6-13金字塔的部分更新</p>
                     <p>您可以使用<a href="SDO_GEOR-reference.html#GUID-ED3D72BF-B5C4-46B1-832C-287BF7696B3E">SDO_GEOR.updateRaster</a>过程部分更新金字塔。在<a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDIABFI">例6-13中</a> ，指定区域（ <code class="codeph">targetArea</code>指定为<code class="codeph">area</code> ）的目标GeoRaster对象由另一个GeoRaster对象更新。<code class="codeph">updateUpperPyramids</code>参数设置为<code class="codeph">true</code> ，因此目标GeoRaster对象的上部金字塔仅在指定区域部分更新。换句话说，上金字塔等级没有完全再生，但只有该targetArea中的单元被重新生成，因此性能得到改善。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; area sdo_number_array：= sdo_number_array（-200，-50,201,162）; BEGIN SELECT georaster INTO gr2 FROM georaster_table WHERE georid = 0 FOR UPDATE; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 1; SDO_GEOR.updateRaster（gr2,0，null， <span class="bold">area</span> ，gr1,0，null， <span class="bold">'true'</span> ）; UPDATE GEORASTER_TABLE SET georaster = gr2 WHERE georid = 0;承诺;结束; /</pre><p>加速和自动化金字塔化过程的其他技术包括批处理和并发处理。要批量金字塔特定区域中的许多图像，请参阅<a href="georaster-data-manipulation.html#GUID-13578486-979A-410B-94BB-863DBB4AA7E2">查询和搜索GeoRaster对象中</a>的示例。要同时处理多个批处理，您可以启动不同的数据库会话</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1344"></a><a id="GEORS1343"></a><div class="props_rev_3"><a id="GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE" name="GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE"></a><h3 id="GEORS-GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE" class="sect3"><span class="enumeration_section">6.11</span>位图金字塔</h3>
               <div>
                  <p>在某些传统金字塔不足的情况下，位图金字塔可以生成高质量的金字塔。</p>
                  <p>对于大多数栅格数据类型，图像金字塔<a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" title="Image pyramiding is one of the most commonly used processes in building large-scale image databases.">：并行生成和部分更新中</a>描述的<a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" title="图像金字塔是构建大规模图像数据库中最常用的过程之一。">图像</a>金字塔形成了高质量的金字塔。但是，对于通常以1位单元格深度存储的点，线或折线的位图栅格，相同的金字塔方法可能无法创建高质量的金字塔。在那些金字塔中常见扭曲的点图案和虚线。
                  </p>
                  <p>要解决此类问题，可以使用<a href="SDO_GEOR-reference.html#GUID-78D4949A-D751-43F9-8066-C479980C8FB8">SDO_GEOR.generateBitmapPyramid</a>过程而不是<a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDOGEOR.generatePyramid</a>来对位图GeoRaster对象执行金字塔处理。<a href="SDO_GEOR-reference.html#GUID-78D4949A-D751-43F9-8066-C479980C8FB8">SDO_GEOR.generateBitmapPyramid</a>过程通过避免失真模式（特别是虚线或位图栅格中的缺失线条，如道路栅格地图或公用事业网络栅格地图）显着提高金字塔质量。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1346"></a><a id="GEORS1345"></a><div class="props_rev_3"><a id="GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355" name="GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355"></a><h3 id="GEORS-GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355" class="sect3"><span class="enumeration_section">6.12</span>植被指数计算</h3>
               <div>
                  <p>在遥感中，归一化植被指数（NDVI）是一种广泛使用的植被指数，使用户能够快速识别植被区域并监测植物的生长和“状况”。</p>
                  <p>使用Landsat TM图像，标准NDVI计算公式为：（TM4-TM3）/（TM4 + TM3）。</p>
                  <div class="example" id="GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355__CHDICBDG">
                     <p class="titleinexample">例6-14植被指数计算</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355__CHDICBDG">例6-14</a>采用Landsat 7 ETM +图像并以并行度计算NDVI。结果存储为另一个浮点数数据类型的栅格。请注意，在GeoRaster代数语言中，波段编号从0开始，因此公式转换为表达式：（{3}  -  {2}）/（{3} + {2}）。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE geor1 SDO_GEORASTER; geor2 SDO_GEORASTER; EBGIN  - 来源ETM +图像从Georaster_table中选择geor1到geor1，其中georid = 2; - 从georaster_table存储NDVI选择georaster到geor2，georid = 3用于更新; sdo_geor_ra.rasterMathOp（geor1，SDO_STRING2_ARRAY（'（{3}  -  {2}）/（{3} + {2}）'），'celldepth = 32bit_real'，geor2，null，null，'parallel = 4'）;更新georaster_table set georaster = geor2 where georid = 3;承诺;结束; /</pre><p>除NDVI外，遥感领域还有许多其他植被指数。其中许多可以使用GeoRaster栅格代数进行类似的计算。</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1348"></a><a id="GEORS1347"></a><div class="props_rev_3"><a id="GUID-2530F5D2-7386-4DD4-877A-F004F2109912" name="GUID-2530F5D2-7386-4DD4-877A-F004F2109912"></a><h3 id="GEORS-GUID-2530F5D2-7386-4DD4-877A-F004F2109912" class="sect3"><span class="enumeration_section">6.13</span> Tasseled Cap Transformation</h3>
               <div>
                  <p>Tasseled Cap Transformation（TCT）是一种使用遥感图像分析物理地面特征的有用工具。</p>
                  <p>利用各种Landsat图像，它使用原始数字（DN）或反射率数据的5个波段生成6个新波段，每个波段代表不同的地面特征。产生的6个带通常称为（土壤）亮度，（植被）绿度，（土壤和冠层）湿度，雾度，TC5和TC6。每一种或它们的组合对于不同的应用是有用的，例如作物生长监测和分析，生物量研究和农业规划。</p>
                  <div class="example" id="GUID-2530F5D2-7386-4DD4-877A-F004F2109912__CHDGFEHH">
                     <p class="titleinexample">例6-15 Tasseled Cap Transformation</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-2530F5D2-7386-4DD4-877A-F004F2109912__CHDGFEHH">例6-15</a>将Landsat 5 TM图像的DN数据作为输入，使用具有并行性的GeoRaster栅格代数执行TCT，并创建保存结果的新图像。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; ret varchar2（32）; BEGIN从georaster_table中选择georaster到gr1，其中georid = 2;从georaster_table中选择georaster到gr2，其中georid = 4表示更新; sdo_geor_ra.rasterMathOp（gr1，SDO_STRING2_ARRAY（'0.3561 * {0} + 0.3972 * {1} + 0.3904 * {2} + 0.6966 * {3} + 0.2286 * {4} + 0.1596 * {6}'，'（ -  0.3344 ）* {0} -0.3544 * {1} -0.4556 * {2} + 0.6966 * {3} -0.0242 * {4} -0.2630 * {6}'，'0.2626 * {0} + 0.2141 * {1} + 0.0926 * {2} + 0.0656 * {3} -0.7629 * {4} -0.5388 * {6}'，'0.0805 * {0} -0.0498 * {1} + 0.1950 * {2} -0.1327 * {3} + 0.5752 * {4} -0.7775 * {6}'，'（ -  0.7252）* {0} -0.0202 * {1} + 0.6683 * {2} + 0.0631 * {3} -0.1494 * {4} -0.0274 * { 6}'，'0.4000 * {0} -0.8172 * {1} + 0.3832 * {2} + 0.0602 * {3} -0.1095 * {4} + 0.0985 * {6}'），'celldepth = 32BIT_REAL'，gr2 ，null，null，'parallel = 4'）;更新georaster_table set georaster = gr2 where georid = 4;承诺;结束; /</pre><p>还可以使用相同的光栅代数语言在添加代码<a href="image-processing-virtual-mosaic.html#GUID-2530F5D2-7386-4DD4-877A-F004F2109912__CHDGFEHH">实施例6-15</a>到32位浮点数图像转换成8位整数图像和应用图像拉伸（描述<a href="image-processing-virtual-mosaic.html#GUID-1BFCB081-6C19-4727-B07E-1127515D75CD" title="可以增强图像的颜色和对比度以改善其视觉质量。SDO_GEOR_IP包（用于图像处理的“IP”）提供用于图像增强的一组子程序，包括执行图像拉伸，图像归一化，图像均衡，直方图匹配和图像躲避。">图象扩张</a>所得TCT图像上），以生成新的GeoRaster对象以进行可视化和分析。
                     </p>
                     <p>除了使用栅格代数算法的优化实现和嵌入式并行处理之外，您还可以利用Oracle网格计算基础架构快速计算NDVI或在存储在GeoRaster数据库中的数千个图像上应用TCT。</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1349"></a><div class="props_rev_3"><a id="GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15" name="GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15"></a><h3 id="GEORS-GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15" class="sect3"><span class="enumeration_section">6.14</span>图像掩蔽</h3>
               <div>
                  <p>要执行图像蒙版，应用程序可以在GeoRaster数据库中查询位图蒙版，检索所需的位图蒙版或蒙版，并在目标GeoRaster对象上应用蒙版操作，以显示对象或执行其他一些处理。</p>
                  <p>位图掩码（ <a href="georaster-overview-and-concepts.html#GUID-20696505-9B9E-4E08-B165-1B23A574BEB3" title="位图掩码是一个特殊的一位深矩形栅格网格，每个像素的值为0或1。它用于在另一个图像内定义不规则形状的区域。1位定义区域的内部，0位定义区域的外部。">在位</a>图掩码中描述）可以存储为独立的GeoRaster对象;它也可以作为元数据存储在GeoRaster对象中，并与单个波段或整个GeoRaster对象相关联。
                  </p>
                  <p>您还可以使用<a href="SDO_GEOR-reference.html#GUID-A1FF83F0-481F-436C-BA4A-5C0490A4A7ED">SDO_GEOR.mask</a>过程在数据库内执行屏蔽操作以生成新的GeoRaster对象。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1351"></a><a id="GEORS1350"></a><div class="props_rev_3"><a id="GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807" name="GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807"></a><h3 id="GEORS-GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807" class="sect3"><span class="enumeration_section">6.15</span>乐队合并</h3>
               <div>
                  <p>对于图像分类，时间序列分析和栅格GIS建模，可能需要将多个波段或不同GeoRaster对象的图层合并到单个GeoRaster对象中。</p>
                  <p>此操作在GeoRaster中称为带或层合并，可以使用<a href="SDO_GEOR-reference.html#GUID-859F107A-4D75-4C36-B9FC-690FA202789C">SDO_GEOR.mergeLayers</a>过程或<a href="sdo-geor-ra-ref.html#GUID-BB7A762E-E615-43AD-9D74-5E917D29F333">SDO_GEOR_RA.rasterMathOp</a>过程来执行。您可以将源GeoRaster对象的指定波段附加到目标GeoRaster对象，也可以将两个GeoRaster对象中的不同波段合并到一个新的GeoRaster对象中。通过迭代执行此合并或追加，您可以将无限数量的波段合并到单个GeoRaster对象中。
                  </p>
                  <div class="example" id="GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807__CHDFDJDE">
                     <p class="titleinexample">例6-16波段合并</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807__CHDFDJDE">例6-16</a>包括两个例子。第一个示例假设有八个GeoRaster对象，每个对象<span class="italic">只</span>包含<span class="italic">一个</span>从GeoTIFF格式的单波段Landsat ETM +图像文件加载的波段。每个GeoRaster对象中的波段数与GeoRaster对象的GEORID列值相同。该示例将所有波段合并为单个GeoRaster对象，以创建完整的ETM +场景。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; BEGIN从georaster_table选择georaster到gr1，georid = 1用于更新; for rec in（从Georaster_table中选择georaster，georid&gt; = 2，georid &lt;= 8 order by georid）loop <span class="bold">sdo_geor.mergelayers（gr1，rec.georaster）</span> ;结束循环;更新georaster_table set georaster = gr1其中georid = 1;承诺;结束; /</pre><p>第二个例子假设有八个GeoRaster对象，每个对象包含<span class="italic">三个</span>波段。该示例从每个GeoRaster对象中拾取一个波段，并将它们并行合并为一个8波段GeoRaster对象。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geo_array SDO_GEORASTER_ARRAY; BEGIN SELECT georaster INTO geor FROM georaster_table WHERE georid = 0 for update; geo_array：= SDO_GEORASTER_ARRAY（）; for rec in（从Georaster_table中选择georaster，其中georid&gt; = 1，georid &lt;= 8 order by georid）loop geo_array.extend（1）; geo_array（geo_array.last）：= rec.georaster;结束循环; sdo_geor_ra.rasterMathOp（geo_array，SDO_STRING2_ARRAY（ '{0,0}'， '{1,1}'， '{2,2}'， '{3,0}'， '{4,1}'，“{ 5,2}”， '{6,0}'， '{7,1}'，），NULL，geor， '假'，NULL， '平行= 4'）;更新georaster_table SET georaster = geor WHERE georid = 0;承诺;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1353"></a><a id="GEORS1352"></a><div class="props_rev_3"><a id="GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156" name="GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156"></a><h3 id="GEORS-GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156" class="sect3"><span class="enumeration_section">6.16</span>图像附加</h3>
               <div>
                  <p>当两个图像具有相同数量的波段时，您可以将一个图像附加到另一个图像。</p>
                  <p>当以一定间隔收集地理空间图像并且稍后需要将捕获的图像附加到现有图像以制作整个空间区域的大图像时，图像附加是有用的。图像附加对于使用新图像更新现有图像也很有用。</p>
                  <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D47B17BE-79C2-4610-B75A-D03182FD40FB">SDO_GEOR_AGGR.append</a>过程通过使用另一个GeoRaster对象部分更新现有GeoRaster对象来实现图像追加。如果现有的GeoRaster对象包含金字塔，则使用新数据部分更新具有阻塞的金字塔。
                  </p>
                  <p><a href="image-processing-virtual-mosaic.html#GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156__CHDFIAID">例6-17</a>将一个图像附加到另一个图像，同时更新带有阻塞的金字塔。由于<code class="codeph">appendParam</code>参数指定<code class="codeph">'nodata=true'</code> ，因此重叠区域中的NODATA值被视为透明。
                  </p>
                  <div class="example" id="GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156__CHDFIAID">
                     <p class="titleinexample">示例6-17将一个图像附加到另一个图像</p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr1 sdo_georaster; BEGIN从georaster_table选择georaster到gr1，georid = 1用于更新;从Georaster_table中选择georaster到gr2，其中georid = 2; <span class="bold">sdo_geor_aggr.append（gr1，gr2,0，'nodata = true'）</span> ;更新georaster_table set georaster = gr1其中georid = 1;承诺;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1355"></a><a id="GEORS1357"></a><a id="GEORS1354"></a><div class="props_rev_3"><a id="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" name="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA"></a><h3 id="GEORS-GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" class="sect3"><span class="enumeration_section">6.17</span>大规模图像镶嵌</h3>
               <div>
                  <p>大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。</p>
                  <p>GeoRaster提供大规模镶嵌功能，允许间隙，重叠和缺少源GeoRaster对象。它支持整流和未整理的图像。它支持内部重投和校正，公共点规则和简单的色彩平衡。您还可以在某个金字塔级别拼接。这种镶嵌过程会产生单个GeoRaster对象，与<span class="italic">虚拟镶嵌</span>相反，也称为<span class="bold">物理</span> <span class="italic">镶嵌</span> （有关虚拟镶嵌的信息，请参阅<a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟镶嵌</a> ）。
                  </p>
                  <p><a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>程序为图像镶嵌提供支持;但是，强烈建议您使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset，</a>因为它提供了更多高级功能和选项，并且还通过并行实现。<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>可以采用虚拟马赛克，例如GeoRaster表列表，带有GeoRaster列的数据库视图或REF CURSOR作为源图像。
                  </p>
                  <p><a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a>过程镶嵌了一组经过纠正的源GeoRaster图像，在相同的SRID下进行地理空间对齐，并具有相同的分辨率。马赛克的结果是另一个GeoRaster对象。如果源图像之间存在重叠，则马赛克结果将在重叠区域具有最后源图像的内容。此过程适用于预处理和完美对齐的源图像。
                  </p>
                  <p>在本节的示例中，源图像存储在源GeoRaster表GRTAB，GRTAB1和GRTAB2中，这些表由以下列定义：</p><pre class="oac_no_warn" dir="ltr">（id NUMBER PRIMARY KEY，cloud_cover NUMBER  - 云覆盖率的百分比last_update TIMESTAMP  -  GeoRaster对象的上次更新时间grobj SDO_GEORASTER）</pre><p>已在这些表中的GeoRaster对象的<code class="codeph">spatialExtent</code>属性上创建Oracle Spatial和Graph空间索引。
                  </p>
                  <p>在这些示例中，镶嵌图像存储在GEORASTER_TABLE中，该值在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中</a>定义。
                  </p>
                  <div class="example" id="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDBHAHJ">
                     <p class="titleinexample">例6-18 SDO_GEOR.mosaic（表和列名）</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDBHAHJ">例6-18</a>显示了<a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a>过程。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr sdo_georaster; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（12，sdo_geor.init（'rdt_1'））RETURNING georaster INTO gr; <span class="bold">sdo_geor.mosaic（'grtab'，'grobj'，gr，'blocking = optimalpadding blocksize =（512,512,1）'）</span> ;更新georaster_table SET georaster = gr WHERE id = 12;结束; /</pre><p>然而，在现实世界中，源图像通常在不同的环境下被收集，以便具有不同的分辨率或大的重叠区域，或者使用不同的地理参考系统。在这种情况下，您可以使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程将这些源图像拼接成一个统一的镶嵌图像。与<a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a>相比， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程提供了更多功能和选项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>源图像不必位于相同的坐标系（SRID）中，并且具有相同的地理配准信息或分辨率。</p>
                        </li>
                        <li>
                           <p>可以在用户指定的金字塔等级上镶嵌源图像。</p>
                        </li>
                        <li>
                           <p>源图像可以在用户指定的波段上镶嵌。</p>
                        </li>
                        <li>
                           <p>输出图像可以具有与输入图像不同的坐标系和分辨率（ <code class="codeph">outSRID</code>和<code class="codeph">outResolutions</code>参数）。
                           </p>
                        </li>
                        <li>
                           <p>您可以通过<code class="codeph">mosaicParam</code>参数更多地控制重叠区域的输出： <code class="codeph">commonPointRule</code>可以指定在重叠区域用于输出的单元格值， <code class="codeph">NODATA</code>可以指示是否考虑重叠区域的NODATA值。
                           </p>
                        </li>
                        <li>
                           <p>输出镶嵌图像可以在指定点（参考点）对齐。如果源图像的对齐方式多于在<code class="codeph">mosaicParam</code>指定的<code class="codeph">resampleTolerance</code>值，则可以对源图像进行重新采样，以便与参考点对齐。
                           </p>
                        </li>
                        <li>
                           <p>如果源图像是小于2个像素宽之间小的间隙，它可以使用相邻像素值时被填充<code class="codeph">fillGap</code>是<code class="codeph">true</code>在<code class="codeph">mosaicParam</code> 。
                           </p>
                        </li>
                        <li>
                           <p>支持有限的色彩平衡（线性拉伸和标准化）。</p>
                        </li>
                        <li>
                           <p>支持并行处理以加速镶嵌过程。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDCDABA">
                     <p class="titleinexample">例6-19 SDO_GEOR_AGGR.mosaicSubset</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDCDABA">例6-19</a>使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>将来自两个GeoRaster表（GRTAB1和GRTAB2）的所有源图像拼接成SRID 4326中的大型镶嵌图像，x和y维度上的分辨率为30米。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE决议sdo_number_array; gr sdo_georaster; BEGIN插入georaster_table（georid，georaster）值（10，sdo_geor.init（'RDT_1'，10））将georaster返回到gr; <span class="bold">resolution：= sdo_number_array（30,30）</span> ; <span class="bold">sdo_geor_aggr.mosaicSubset（'grtab1，grtab2'，'grobj，grobj'，0,4326</span> <span class="bold">，null，null，null，</span> <span class="bold">null，null，null，resolutions，'unit = meter'，</span> <span class="bold">'commonPointRule = end，nodata = true，resampleTolerance = 0.2，重新采样= bilinear，fillGap = true'，</span> <span class="bold">'blocking = optimalpadding blocksize =（512,512,3）'，gr，null，'parallel = 4'）</span> ;更新georaster_table set georaster = gr其中georid = 10;承诺;结束; /</pre><p>在<a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDCDABA">例6-19中</a> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>任何未纠正的源图像都会被纠正;不在SRID 4326中的任何源图像被重新投影到SRID 4326。</p>
                        </li>
                        <li>
                           <p>任何分辨率不是30米的源图像都会缩放到30米的分辨率。</p>
                        </li>
                        <li>
                           <p>在<code class="codeph">nodata</code>在关键字<code class="codeph">mosaicParam</code>参数被指定为<code class="codeph">true</code> ，这意味着在所述重叠区域中的NODATA值不考虑。
                           </p>
                        </li>
                        <li>
                           <p>该<code class="codeph">resampleTolerance</code>在关键字<code class="codeph">mosaicParam</code>参数被指定为0.2，这意味着，如果源图像是从所述目标由大于0.2的像素偏移量，源图像被重新采样。
                           </p>
                        </li>
                        <li>
                           <p>重采样方法在<code class="codeph">mosaicParam</code>参数中指定为<code class="codeph">bilinear</code> 。
                           </p>
                        </li>
                        <li>
                           <p>并行度在<code class="codeph">parallelParam</code>参数中指定为4。
                           </p>
                        </li>
                     </ul>
                     <p>您可以在调用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.getMosaicSubset</a>之前调用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.validateForMosaicSubset</a> ，以确保可以镶嵌源图像。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19">在镶嵌期间的颜色平衡</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176">并行压缩，复制和子集</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19" name="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19"></a><h4 id="GEORS-GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19" class="sect4"><span class="enumeration_section">6.17.1镶嵌时的</span>色彩平衡</h4>
                  <div>
                     <p>由于在捕获图像时照明条件，一天中的时间或其他因素的差异，镶嵌操作的源图像可以具有不同的亮度或颜色。色彩平衡可最大限度地减少相邻图像之间的色差，使得生成的马赛克看起来更加无缝。</p>
                     <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>在镶嵌过程中提供一些基本的色彩平衡方法。提供了几种颜色平衡方法。它们由<code class="codeph">mosaicParam</code>参数中的关键字<code class="codeph">colorbalance</code>标识：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">LINEARSTRETCHING</code> ：在源图像的每个波段上执行最小 - 最大拉伸到参考最小和最大范围。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">STATISTICSMATCHING</code> ：执行图像拉伸，以便拉伸源图像的每个波段的平均值和标准偏差，并与参考平均值和标准偏差值相匹配。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">HISTOGRAMMATCHING</code> ：执行图像拉伸，使得结果图像的直方图与参考直方图匹配。
                           </p>
                        </li>
                     </ul>
                     <p>有几种方法可以指定颜色平衡方法的参考值。它们由<code class="codeph">mosaicParam</code>参数中的关键字<code class="codeph">cbreference</code>标识：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>VALUE：参考值直接通过<code class="codeph">referenceValue1</code> ， <code class="codeph">referenceValue2</code>或<code class="codeph">refHistograms</code>参数提供。
                           </p>
                        </li>
                        <li>
                           <p>IMAGE：参考值来自<code class="codeph">referenceImage</code>参数指定的图像。参考图像必须具有与源图像相同的带数。
                           </p>
                        </li>
                        <li>
                           <p>重叠：参考值由相邻图像通过与相邻图像重叠的区域确定。此选项要求源图像具有足够大的重叠，以便可以从重叠区域导出参考值。请注意，由于线性拉伸方法不能为此选项提供良好的结果，因此线性拉伸方法不支持重叠区域参考。</p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19__GUID-B8853B44-D4B7-4EB5-B2CB-C8C646CE6E18">
                        <p class="titleinexample">例6-20 LINEARSTRETCHING颜色平衡</p>
                        <p>此示例显示如何在<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程中对源图像使用<code class="codeph">LINEARSTRETCHING</code>颜色平衡方法。参考最小值和最大值在<code class="codeph">referenceValue1</code>和<code class="codeph">referenceValue2</code>参数中指定。在该示例中，每个频带具有不同的参考值。
                        </p><pre class="pre codeblock"><code>DECLARE gr sdo_georaster;分辨率sdo_number_array; ref_min sdo_number_arrray; ref_max sdo_number_array; BEGIN  - 创建新的GeoRaster对象，将镶嵌插入到georaster_table（georid，georaster）值（10，sdo_geor.init（'RDT_1'，10））中，将georaster返回到gr; - 设置输出分辨率分辨率：= sdo_number_array（30,30）; - 设置参考值，有3个值，每个频段对应一个ref_min：= sdo_number_array（10,10,10）; ref_max：= sdo_number_array（200,255,230）; -  Mosaic sdo_geor_aggr。MosaicSubset（'georaster_table_1'，'georaster'，null，32610，null，null，null，null，null，null，null，resolution，null， <span class="bold">'colorBalance = linearstretching，cbreference = value'，</span> 'blocking = optimalpadding，blocksize =（ 512,512,3）'，gr，null，'parallel = 4'，referenceValue1 =&gt; ref_min， <span class="bold">referenceValue2 =&gt; ref_max</span> ）;更新georaster_table set georaster = gr其中georid = 10;承诺;结束; /</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19__GUID-A558E3FE-4B69-4938-884C-2E3A2AD9F860">
                        <p class="titleinexample">例6-21 HISTOGRAMMATCHING色彩平衡</p>
                        <p>此示例显示如何在<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程中对源图像使用HISTOGRAMMATCHING颜色平衡方法。参考直方图是从参考图像导出的。参考图像必须与源图像具有相同数量的波段。
                        </p><pre class="pre codeblock"><code>DECLARE gr sdo_georaster;分辨率sdo_number_array; ref_gr sdo_georaster; BEGIN  - 创建新的GeoRaster对象，将镶嵌插入到georaster_table（georid，georaster）值（10，sdo_geor.init（'RDT_1'，10））中，将georaster返回到gr; - 设置输出分辨率分辨率：= sdo_number_array（30,30）; - 检索参考图像从georaster_table中选择georaster到ref_gr，其中georid = 1; -  Mosaic sdo_geor_aggr。MosaicSubset（'georaster_table_1'，'georaster'，null，32610，null，null，null，null，null，null，null，resolution，null， <span class="bold">'colorBalance = histogramMatching，cbreference = image'，</span> 'blocking = optimalpadding，blocksize =（ 512,512,3）'，gr，null，'parallel = 4'， <span class="bold">refereneImage =&gt; ref_gr</span> ）;更新georaster_table set georaster = gr其中georid = 10;承诺;结束; /</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19__GUID-5E444286-C9D1-4564-AC09-18A66329F027">
                        <p class="titleinexample">例6-22 STATISTICSMATCHING颜色平衡</p>
                        <p>此示例显示如何在<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程中对源图像使用<code class="codeph">STATISTICSMATCHING</code>颜色平衡方法。从相邻图像的重叠区域计算参考统计值。这要求源图像具有显着的重叠，使得重叠区域的统计可以反映相邻图像之间的色差。
                        </p><pre class="pre codeblock"><code>DECLARE gr sdo_georaster;分辨率sdo_number_array; BEGIN  - 创建新的GeoRaster对象，将镶嵌插入到georaster_table（georid，georaster）值（10，sdo_geor.init（'RDT_1'，10））中，将georaster返回到gr; - 设置输出分辨率分辨率：= sdo_number_array（30,30）; -  Mosaic sdo_geor_aggr。MosaicSubset（'georaster_table_1'，'georaster'，null，32610，null，null，null，null，null，null，null，resolution，null， <span class="bold">'colorBalance = statisticsMatching，cbreference = overlap'，</span> 'blocking = optimalpadding，blocksize =（ 512,512,3）'，gr，null，'parallel = 4'）;更新georaster_table set georaster = gr其中georid = 10;承诺;结束; /</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。">大规模图像镶嵌</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1388"></a><a id="GEORS1389"></a><a id="GEORS1390"></a><a id="GEORS1380"></a><div class="props_rev_3"><a id="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176" name="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176"></a><h4 id="GEORS-GUID-8BA68795-65F7-40A6-AD9C-8E774B527176" class="sect4"><span class="enumeration_section">6.17.2</span>并行压缩，复制和子集</h4>
                  <div>
                     <p>要使整流，正射校正和重新投射并行化，请使用<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> 。要并行化变形，请调用<a href="SDO_GEOR-reference.html#GUID-1B480F30-85C6-4F02-BC5E-142A872BEF64">SDO_GEOR.warp</a> 。所有栅格代数操作也是并行化的。
                     </p>
                     <p>您可以使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程执行多种类型的并行操作，包括并行压缩和解压缩，并行复制或更改格式复制，并行子集化，并行重投影和并行校正。复制和子集化操作不直接并行化。对于JPEG和DEFLATE，如果不需要重新格式化，则可以调用<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>过程来执行并行压缩和解压缩。本主题提供了并行压缩，复制和子集化操作的一些示例。在所有这些情况下， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程适用于单个GeoRaster对象。
                     </p>
                     <p>为了说明并行化操作，本节中的示例对大多数参数使用空值。在您的应用程序中，您可以应用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程的所有其他参数;但是，当输入是单个GeoRaster对象时， <code class="codeph">mosaicParam</code>参数无效。
                     </p>
                     <div class="example" id="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDEDHCE">
                        <p class="titleinexample">例6-23并行压缩</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDEDHCE">例6-23</a>显示了使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程的并行压缩。这适用于DEFLATE和JPEG压缩和解压缩。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE gr sdo_georaster; cur sys_refcursor; crop_area sdo_geometry：= null; BEGIN  - 使用georid = 2创建一个新的georaster对象 - 保持压缩图像从georaster_table删除，其中georid = 2;插入georaster_table（georid，georaster）值（2，sdo_geor.init（'RDT2'，2））将georaster返回到gr; - 使用georid = 1将图像重新锁定并压缩成JPEG，使用8开放曲线的平行度，用于georaster_table中georid = 1的选择georaster; sdo_geor_aggr.mosaicSubset（cur，0，null，null，null，crop_area，null，null，null，null，null，null，'compression = JPEG-F，blocking = optimalpadding，blocksize =（512,512,3）'，gr， null，'parallel = 8'）;更新georaster_table set georaster = gr其中georid = 2;承诺;结束; /</pre><p>在前面的示例中，如果调整storageParam参数，它将作为并行化的<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>操作，包括压缩和解压缩。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDIAIBB">
                        <p class="titleinexample">例6-24并行子集和复制</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDIAIBB">例6-24</a>显示了使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程的并行子集和复制。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE gr sdo_georaster; cur sys_refcursor; crop_area sdo_geometry：= null; BEGIN  - 使用georid = 2创建一个新的georaster对象，以便从georaster_table中保存副本删除，其中georid = 2;插入georaster_table（georid，georaster）值（2，sdo_geor.init（'RDT2'，2））将georaster返回到gr; - 设置crop_area进行子集化。crop_area：= sdo_geometry（2003,26986，null，sdo_elem_info_array（1,1003,1），sdo_ordinate_array（237040,897924,237013.3,897831.6,237129,897840,237182.5,897785.5,237239.9,897902.7,237223,897954,237133,897899， 237040,897924））; - 使用georid = 1的图像子集，使用8的平行度 - 并进行多边形裁剪 - 如果crop_area设置为null，则相同的调用将执行简单的并行复制而不进行子集化。'georaid = 1'中的'georaster from georaster_table'; sdo_geor_aggr.mosaicSubset（cur，0，null，null，null，crop_area，'true'，null，null，null，null，null，'pyramid = true'，gr，null，'parallel = 8'）;更新georaster_table set georaster = gr其中georid = 2;承诺;结束; /</pre><p>在<a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDIAIBB">例6-24中</a> ，如果调整<code class="codeph">storageParam</code>参数，它将作为并行副本或<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>操作，包括压缩和解压缩。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。">大规模图像镶嵌</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS1358"></a><div class="props_rev_3"><a id="GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" name="GUID-16C91449-1E94-4B3F-9403-EEFE483251AD"></a><h3 id="GEORS-GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" class="sect3"><span class="enumeration_section">6.18</span>虚拟马赛克</h3>
               <div>
                  <p>虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。</p>
                  <p>对于某些应用，将图像集合镶嵌到单个物理马赛克中是不必要或不可取的。例如，您可能没有足够的磁盘空间来单独存储马赛克，或者您只是想节省磁盘空间。另一个例子是，如果您不想保留相同数据集的两个相同副本，但希望原始数据集按原样存储，例如DEM数据集，但您希望无缝地查询此数据集。另一个例子是，如果您想在镶嵌源图像时对同一区域应用不同的处理和镶嵌规则 - 物理马赛克没有这种灵活性。</p>
                  <p>在这种情况下，您可以创建虚拟马赛克，而不是将一组GeoRaster图像拼接成一个大的GeoRaster图像并将其存储在GeoRaster表中。虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像，而不将其存储在GeoRaster表中。</p>
                  <p>在GeoRaster中， <span class="bold">虚拟马赛克</span>被定义为来自一个或多个GeoRaster表或视图的任何大量地理参考GeoRaster对象（已纠正或未整理），这些表被视为单个GeoRaster对象。支持虚拟马赛克的金字塔。虚拟马赛克可以包含无限数量的图像，整个GeoRaster数据库可以被视为虚拟马赛克。您可以发出单个调用以根据感兴趣区域（即子集或裁剪）查询虚拟镶嵌，并且可以请求裁剪的图像位于具有不同分辨率的不同坐标系中。基于用户请求，使用公共点规则进行重新采样和镶嵌的动态转换在查询过程中在内部自动完成。
                  </p>
                  <p>以下是定义虚拟马赛克的方法：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>作为GeoRaster表或GeoRaster表的列表（请参阅<a href="image-processing-virtual-mosaic.html#GUID-FF053675-AB0E-47AB-8D33-418B6A153E70">虚拟马赛克作为一个或GeoRaster表列表</a> ）</p>
                     </li>
                     <li>
                        <p>作为带有GeoRaster列的数据库视图（请参阅<a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3">虚拟马赛克作为带有GeoRaster列的视图</a> ）</p>
                     </li>
                     <li>
                        <p>作为导致GeoRaster对象集合的SQL查询语句（游标）（请参阅<a href="image-processing-virtual-mosaic.html#GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA">虚拟镶嵌作为SQL查询语句或游标</a> ）</p>
                     </li>
                  </ul>
                  <p>无论如何定义虚拟镶嵌，GeoRaster表中的GeoRaster对象都必须生成或设置<code class="codeph">spatialExtent</code>属性;否则， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程返回一个空的lob定位器或空的GeoRaster对象。对于一般用例和最佳查询性能，您应始终事先在<code class="codeph">spatialExtent</code>属性上创建空间索引。
                  </p>
                  <p>定义虚拟镶嵌后，您可以使用这些过程来查询或处理它：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>通过虚拟马赛克执行即时查询</p>
                        <p>在该虚拟镶嵌图像的任何部分的空间查询中， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>过程动态地为查询区域执行镶嵌操作，并在BLOB中即时返回所需结果，就好像它是物理存储的镶嵌图像的子集一样。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>将镶嵌的子集作为GeoRaster对象存储在数据库中</p>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程为查询区域执行镶嵌操作，并将所需结果永久存储在另一个GeoRaster对象中</p>
                     </li>
                  </ul>
                  <p>有关使用虚拟马赛克的典型工作流程，请参阅<a href="image-processing-virtual-mosaic.html#GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38">在应用程序中使用虚拟马赛克</a> ，以及<a href="image-processing-virtual-mosaic.html#GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D">大规模虚拟马赛克的特殊注意事项</a>及其相关主题<a href="image-processing-virtual-mosaic.html#GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B">使用MIN_X_RES $和MAX_X_RES $提高查询性能</a> 。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-FF053675-AB0E-47AB-8D33-418B6A153E70">虚拟马赛克作为一个或一个GeoRaster表列表</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3">虚拟马赛克作为具有GeoRaster列的视图</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA">虚拟马赛克作为SQL查询语句或游标</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38">在应用程序中使用虚拟镶嵌</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D">大规模虚拟马赛克的特殊考虑</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1359"></a><a id="GEORS1368"></a><div class="props_rev_3"><a id="GUID-FF053675-AB0E-47AB-8D33-418B6A153E70" name="GUID-FF053675-AB0E-47AB-8D33-418B6A153E70"></a><h4 id="GEORS-GUID-FF053675-AB0E-47AB-8D33-418B6A153E70" class="sect4"><span class="enumeration_section">6.18.1</span>虚拟马赛克作为一个或一组GeoRaster表</h4>
                  <div>
                     <p>虚拟马赛克可以定义为一个GeoRaster表或GeoRaster表列表。应用程序指定每个表及其GeoRaster列。在此方法中，GeoRaster表的指定GeoRaster列中的所有GeoRaster对象都是虚拟镶嵌的一部分。</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-FF053675-AB0E-47AB-8D33-418B6A153E70__CHDIFABC">实施例6-25</a>指定的GeoRaster表（GRTAB1，GRTAB2和GRTAB3，其具有在相同的定义GRTAB的列表虚拟镶嵌源图像<a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。">大规模图像镶嵌</a> ）。
                     </p>
                     <div class="example" id="GUID-FF053675-AB0E-47AB-8D33-418B6A153E70__CHDIFABC">
                        <p class="titleinexample">示例6-25虚拟马赛克作为GeoRaster表的列表</p><pre class="oac_no_warn" dir="ltr">DECLARE lb blob; cropArea sdo_geometry; outArea sdo_geometry：= null; outWin sdo_number_array：= null;分辨率sdo_number_array; BEGIN dbms_lob.createTemporary（lb，TRUE）; cropArea：= sdo_geometry（2003,32610，null，sdo_elem_info_array（1,1003,3），sdo_ordinate_array（399180,4247820,496140,4353900））; resolution：= sdo_number_array（30,30）; sdo_geor_aggr.getMosaicSubset（ <span class="bold">'grtab1，grtab2，grtab3'，</span> <span class="bold">'grobj，grobj，grobj'，0,32610</span> ，null，null，cropArea，null，null，null，resolutions，null，'commonPointRule = end，nodata = true'， lb，outArea，outWin）; dbms_lob.freeTemporary（磅）;如果outWin不为null则为dbms_output.put_line（'输出窗口：（'|| outWin（1）||'，'|| outWin（2）||'，'|| outWin（3）||'，'| | outWin（4）||'）'）;万一;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟马赛克</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1360"></a><a id="GEORS1369"></a><div class="props_rev_3"><a id="GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3" name="GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3"></a><h4 id="GEORS-GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3" class="sect4"><span class="enumeration_section">6.18.2</span>虚拟马赛克作为具有GeoRaster列的视图</h4>
                  <div>
                     <p>可以将虚拟马赛克定义为具有GeoRaster列的一个数据库视图。应用程序指定视图名称及其GeoRaster列。在此方法中，视图的指定GeoRaster列中的所有GeoRaster对象都是虚拟镶嵌的一部分。这种方法允许您从任意数量的GeoRaster表中以复杂的方式为虚拟马赛克选择图像，利用空间索引和任何其他相关索引。</p>
                     <p>您还可以将虚拟马赛克定义为组合GeoRaster视图和GeoRaster表的列表。</p>
                     <p>将虚拟马赛克定义为数据库视图时，可以在<code class="codeph">georasterTableNames</code>参数中查询该视图。<a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3__CHDGIHDD">例6-26</a>查询定义为视图的虚拟马赛克。请注意，在此示例中，查询根据图像的创建时间对图像进行排序，并在重叠区域中为生成的马赛克选择最新（最新）图像。
                     </p>
                     <div class="example" id="GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3__CHDGIHDD">
                        <p class="titleinexample">示例6-26在GeoRaster表上使用视图进行虚拟镶嵌</p><pre class="oac_no_warn" dir="ltr">创建或替换视图grview作为select * from（选择grobj，last_update来自grtab1，其中cloud_cover = 0 union all选择grobj，last_update来自grtab2，其中cloud_cover = 0 union all选择grobj，last_update来自grtab3）order by last_update; DECLARE lb blob; cropArea sdo_geometry; outArea sdo_geometry：= null; outWin sdo_number_array：= null;分辨率sdo_number_array; BEGIN dbms_lob.createTemporary（lb，TRUE）; cropArea：= sdo_geometry（2003,32610，null，sdo_elem_info_array（1,1003,3），sdo_ordinate_array（399180,4247820,496140,4353900））; resolution：= sdo_number_array（30,30）; sdo_geor_aggr.getMosaicSubset（ <span class="bold">'grview'，'grobj'</span> ， <span class="bold">0,32610</span> ，null，null，cropArea，null，null，null，resolutions，null，'commonPointRule = end，nodata = true'，lb，outArea，outWin）; dbms_lob.freeTemporary（磅）;如果outWin不为null则为dbms_output.put_line（'输出窗口：（'|| outWin（1）||'，'|| outWin（2）||'，'|| outWin（3）||'，'| | outWin（4）||'）'）;万一;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟马赛克</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1361"></a><a id="GEORS1370"></a><div class="props_rev_3"><a id="GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA" name="GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA"></a><h4 id="GEORS-GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA" class="sect4"><span class="enumeration_section">6.18.3</span>虚拟马赛克作为SQL查询语句或游标</h4>
                  <div>
                     <p>您可以将虚拟镶嵌定义为SQL语句或运行时数据库游标，而不是创建视图，该游标将从数据库中选择一组GeoRaster对象。应用程序从SQL语句创建游标，并将光标用作虚拟马赛克。在此定义中，光标中的所有GeoRaster对象都是虚拟镶嵌的一部分。此方法允许您从任意数量的GeoRaster表中以复杂的方式选择虚拟马赛克的图像。但是，空间索引不会自动用于此类虚拟马赛克的查询中。要利用空间索引，请使用查询窗口直接向SQL语句动态添加空间查询条件，以便可以更快地找到该查询窗口中的所有图像。</p>
                     <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程接受GeoRaster对象的光标作为虚拟镶嵌，如<a href="image-processing-virtual-mosaic.html#GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA__CHDHFCBB">例6-27</a>所示。请注意，在此示例中，查询根据图像的创建时间对图像进行排序，并在重叠区域中为生成的马赛克选择最新（最新）图像。为了在表中有许多GeoRaster对象时获得最佳性能，光标查询应使用空间查询窗口过滤掉不相关的GeoRaster对象，如前一段所述。
                     </p>
                     <div class="example" id="GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA__CHDHFCBB">
                        <p class="titleinexample">示例6-27将光标用于虚拟马赛克</p><pre class="oac_no_warn" dir="ltr">DECLARE lb blob; outArea sdo_geometry：= null; outWin sdo_number_array：= null;分辨率sdo_number_array; mosaic_stmt varchar2（1000）; condition varchar2（1000）; BEGIN dbms_lob.createTemporary（lb，TRUE）; resolution：= sdo_number_array（30,30）; - 定义查询窗口（cropArea）cropArea：= sdo_geometry（2003,32610，null，sdo_elem_info_array（1,1003,3），sdo_ordinate_array（399180,4247820,496140,4353900））; - 定义虚拟马赛克mosaic_stmt：='select grobj from（select grobj，last_update from grtab1'||'其中cloud_cover = 0 union all select grobj，last_update from grtab2'||'where cloud_cover = 0）t'; - 使用查询窗口（cropArea）应用过滤以加快查询性能条件：='其中sdo_anyinteract（t.grobj.spatialExtent，：1）=''true'''|| '按last_update排序'; - 为mosaic_stmt ||打开虚拟马赛克以查询open cur条件使用cropArea; - 查询虚拟马赛克（确保此处使用的cropArea与打开游标时使用的相同）sdo_geor_aggr.getMosaicSubset（ <span class="bold">cur</span> ，0,32610，null，null，cropArea，null，null，null，resolution ，null，'commonPointRule = end，nodata = true'，lb，outArea，outWin）; dbms_lob.freeTemporary（磅）;关闭如果outWin不为null则为dbms_output.put_line（'输出窗口：（'|| outWin（1）||'，'|| outWin（2）||'，'|| outWin（3）||'，'| | outWin（4）||'）'）;万一;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟马赛克</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1371"></a><div class="props_rev_3"><a id="GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38" name="GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38"></a><h4 id="GEORS-GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38" class="sect4"><span class="enumeration_section">6.18.4</span>在应用程序中使用虚拟马赛克</h4>
                  <div>
                     <div class="section">
                        <p>虚拟马赛克可以用作图像服务引擎以及各种其他应用场景。虚拟马赛克的定义可以由应用程序分别以字符串或其他形式存储。除了主要的查询程序<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset之外</a> ，GeoRaster还在SDO_GEOR_AGGR包中提供其他子程序以方便应用程序开发：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.validateForMosaicSubset</a></p>
                           </li>
                           <li>
                              <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-74A098CB-5EC9-406B-9437-FAEDEB012A2C">SDO_GEOR_AGGR.getMosaicExtent</a></p>
                           </li>
                           <li>
                              <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D0BB7FCA-490F-4988-95BD-5DDF49D5B8CF">SDO_GEOR_AGGR.getMosaicResolutions</a></p>
                           </li>
                        </ul>
                        <p>可以在应用程序中调用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.validateForMosaicSubset</a> ， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-74A098CB-5EC9-406B-9437-FAEDEB012A2C">SDO_GEOR_AGGR.getMosaicExtent</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D0BB7FCA-490F-4988-95BD-5DDF49D5B8CF">SDO_GEOR_AGGR.getMosaicResolutions</a> ，以确保虚拟马赛克有效并且空间查询属于虚拟马赛克。以下步骤描述了应用程序中虚拟镶嵌的可能工作流程：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>定义虚拟马赛克。例如：</span><div><pre class="oac_no_warn" dir="ltr">创建或替换视图grview作为select * from（选择grobj，last_update来自grtab1，其中cloud_cover = 0 union all选择grobj，last_update来自grtab2，其中cloud_cover = 0 union all选择grobj，last_update来自grtab3）order by last_update;</pre><p>请注意，表GRTAB1，GRTAB2和GRTAB3是使用与<a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。">大规模图像</a>镶嵌中的GRTAB相同的定义创建的，并且已在这些表中的GeoRaster对象的<code class="codeph">spatialExtent</code>属性上创建了Oracle Spatial和Graph空间索引。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>验证虚拟镶嵌数据集。例如：</span><div><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_GEOR_AGGR.validateForMosaicSubset（'grview'，'grobj'，OUTSRID，OUTResolutions）;</pre><p>如果需要更详细的验证信息，则可以创建验证错误表并将其传递给调用。有关详细信息，请参阅<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.validateForMosaicSubset</a>参考部分。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>获取虚拟马赛克的空间范围。例如：</span><div><pre class="oac_no_warn" dir="ltr">从双重中选择SDO_GEOR_AGGR.getMosaicExtent（'grview'，'grobj'，OUTSRID）;</pre></div>
                        </li>
                        <li class="stepexpand"><span>获取现有源图像的分辨率范围。例如：</span><div><pre class="oac_no_warn" dir="ltr">从双重中选择SDO_GEOR_AGGR.getMosaicResolutions（'grview'，'grobj'，'unit = meter'）;</pre><p>分辨率范围反映了源图像的最小和最大分辨率，包括所有金字塔等级。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>基于前两个步骤中获取的信息，根据应用程序请求传入空间查询窗口<code class="codeph">cropArea</code>和<code class="codeph">OUTResolutions</code> ，以获取虚拟马赛克的子集，并可选地应用不同的重采样方法，不同的公共点规则，特殊的节点处理，和色彩平衡。例如：</span><div><pre class="oac_no_warn" dir="ltr">SDO_GEOR_AGGR.getMosaicSubset（'grview'，'grobj'，null，OUTSRID，null，null，cropArea，null，null，null，OUTResolutions，null，'commonPointRule = end，nodata = true'，lb，outArea，outWin）;</pre><p>请注意， <code class="codeph">OUTResolutions</code>必须在源图像分辨率范围内。如果<code class="codeph">OUTResolutions</code>与指定金字塔等级的源图像的分辨率相同，则在输出镶嵌中使用金字塔数据;否则，源图像缩放到目标分辨率。
                              </p>
                              <p>典型的应用程序重复应用该步骤以在相同的虚拟马赛克上查询感兴趣的不同区域以用于图像显示，图像分发或其他目的。</p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟马赛克</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1376"></a><div class="props_rev_3"><a id="GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D" name="GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D"></a><h4 id="GEORS-GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D" class="sect4"><span class="enumeration_section">6.18.5</span>大规模虚拟马赛克的特殊考虑</h4>
                  <div>
                     <p>虚拟马赛克只能包含多个图像，但它也可以包含数万或数百万个图像。<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset都会</a>自动搜索（使用本机空间索引）所有触摸或在<code class="codeph">cropArea</code>内部的图像的虚拟马赛克，并检查这些图像及其金字塔的分辨率。只有那些图像或其相应的金字塔等级接触或在<code class="codeph">cropArea</code>内，并且其分辨率接近所请求的分辨率将用于镶嵌过程。因此，源图像及其金字塔的配置对于结果的质量和整体查询性能至关重要。
                     </p>
                     <p>该指南旨在以所要求的分辨率避免在所请求的作物区域中来自不同源图像或其金字塔的太多小图像。</p>
                     <p>对于只有少量图像的较小虚拟马赛克，只需为每个源图像生成完整的金字塔，查询性能对大多数应用程序都有好处。</p>
                     <p>对于具有大量图像（超过几百个图像）的大区域，应用程序可以为每个源图像仅生成一定数量的金字塔等级，将其顶部金字塔镶嵌到新的GeoRaster对象中，然后为这些对象生成金字塔马赛克等等。对于大规模Web可视化项目，源分辨率和较低分辨率级别的所有图像可能存储为GeoRaster对象，而不会为其构建任何金字塔。</p>
                     <p>在这些情况下（大量图像和大规模网络可视化），如果每个源图像很小并且虚拟马赛克中存在许多分辨率级别，则对较低分辨率级别的查询将涉及对许多不必要图像的元数据解析查询。更高的分辨率级别，这会降低查询速度。为了提高性能，应用程序可以定义许多虚拟马赛克，每个虚拟马赛克仅包括特定分辨率或几个分辨率级别的所有图像。然后，应用程序根据请求的分辨率找到正确的虚拟马赛克或马赛克作为第一步，然后仅在空间上查询这些选定的虚拟马赛克。这种方法可以显着提高性能。</p>
                     <p>除了上述注意事项之外，请参阅<a href="image-processing-virtual-mosaic.html#GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B">使用MIN_X_RES $和MAX_X_RES $提高查询性能，</a>以查询同一区域涉及许多不同分辨率级别的查询。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B">使用MIN_X_RES $和MAX_X_RES $提高查询性能</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟马赛克</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="GEORS1377"></a><div class="props_rev_3"><a id="GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B" name="GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B"></a><h5 id="GEORS-GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B" class="sect5"><span class="enumeration_section">6.18.5.1</span>使用MIN_X_RES $和MAX_X_RES $提高查询性能</h5>
                     <div>
                        <div class="section">
                           <p>如果同一区域涉及许多不同的分辨率级别，则可以使用更通用的解决方案（而不是定义多个虚拟马赛克）来加速虚拟马赛克查询，即使用GeoRaster表或视图中的MIN_X_RES $和MAX_X_RES $列。您必须在虚拟马赛克的GeoRaster表中定义这些列（NUMBER数据类型），其中它们分别指定源GeoRaster对象的最小和最大空间分辨率值。添加这些列并使用正确的分辨率数据填充后， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>过程将（如果使用带有<code class="codeph">georasterTableNames</code>参数的格式）使用存储在这些列中的分辨率范围来过滤掉未请求的源GeoRaster对象<code class="codeph">outResolutions</code>参数中指定的<code class="codeph">outResolutions</code> 。这样可以避免解析<code class="codeph">cropArea</code>中每个GeoRaster对象的元数据，从而显着提高性能。
                           </p>
                           <p>要使用此方法，请按照下列步骤操作：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将MIN_X_RES $和MAX_X_RES $列添加到GeoRaster表中。例如：</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLE georaster_table ADD（MIN_X_RES $ number，MAX_X_RES $ number）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>填充MIN_X_RES $列。例如：</span><div><pre class="oac_no_warn" dir="ltr">更新georaster_table t SET min_x_res $ =（从（从两个中选择sdo_geor.generateSpatialResolutions（t.georaster，null，t.georaster.spatialextent.sdo_srid）中选择column_value）WHERE rownum = 1）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>填充MAX_X_RES $列。例如：</span><div><pre class="oac_no_warn" dir="ltr">更新georaster_table t max_x_res $ = min_x_res $ * power（2，sdo_geor.getPyramidMaxLevel（t.georaster））;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>如果将虚拟马赛克定义为视图，则视图也应具有两列。例如， <a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3__CHDGIHDD">示例6-26中</a>的视图定义必须更改为以下内容：</p><pre class="oac_no_warn" dir="ltr">创建或替换视图grview作为select * from（选择grobj， <span class="bold">min_x_res $，max_x_res $，</span> last_update来自grtab1，其中cloud_cover = 0 union all选择grobj， <span class="bold">min_x_res $，max_x_res $，</span> last_update来自grtab2，其中cloud_cover = 0 union all选择grobj， <span class="bold">min_x_res $，max_x_res $，</span>来自grtab3的last_update）by last_update;</pre><p>在按照本节中的描述定义虚拟马赛克之后，应用程序可以以与所有其他虚拟马赛克相同的方式查询和使用它，但是对于涉及许多分辨率级别的大规模虚拟马赛克具有更好的性能。有关更多信息，请参阅<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>参考部分。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D">大规模虚拟马赛克的特殊注意事项</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="GEORS1362"></a><div class="props_rev_3"><a id="GUID-639C081E-8E7F-4467-8B89-3363810F561F" name="GUID-639C081E-8E7F-4467-8B89-3363810F561F"></a><h3 id="GEORS-GUID-639C081E-8E7F-4467-8B89-3363810F561F" class="sect3"><span class="enumeration_section">6.19</span>图像服务</h3>
               <div>
                  <p>通过GeoRaster PL / SQL和Java API的许多功能支持向客户端或应用程序提供图像和栅格数据。</p>
                  <p>直接图像服务包括搜索然后对光栅进行子集化或裁剪（ <a href="SDO_GEOR-reference.html#GUID-CC66F0CA-96A9-4C4F-AB94-AEB5FE53C83D">SDO_GEOR.getRasterSubset</a> ），在裁剪图像时动态应用重投影和校正（ <a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>和<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> ），并直接导出到文件（ <a href="SDO_GEOR-reference.html#GUID-6261233E-5E90-479C-97FD-8125C28EC838">SDO_GEOR.exportTo）</a> ）。
                  </p>
                  <p>虚拟马赛克主要用于向各种应用程序提供图像数据库，尤其是当您不想创建大型物理马赛克时。虚拟马赛克不需要预先对源图像进行预处理或镶嵌。相反，所有图像都按原样存储，并且可以使用对服务器的单个调用（ <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> ）基于感兴趣的小区域来提供整个图像数据集。
                  </p>
                  <p>通常，将一个或一系列预处理操作应用于多个GeoRaster对象以创建生成的GeoRaster对象，然后在生成的GeoRaster对象上使用本节中描述的功能将栅格数据直接提供给应用程序。因此，可以将丰富的GeoRaster图像处理和栅格代数功能（在<a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a> ， <a href="raster-algebra-and-analytics.html#GUID-C75744C9-FA04-4391-96F2-59EF2EA212FF" title="本章介绍了栅格代数语言（PL / SQL和代数表达式）和相关的栅格操作，包括条件查询，基于单元格的更新或编辑，数学运算，分类，动态统计分析，逻辑运算及其制图建模中的应用。">栅格代数和分析</a>以及本章中描述）集成到工作流程中，以满足复杂的图像服务要求。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="04176.database-contents-Oracle-JVM-security.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>数据库内容和Oracle JVM安全性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Java Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Java Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="java-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T00:55:24-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96468-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="network-connection-security.html" title="Previous" type="text/html"></link>
      <link rel="next" href="Oracle-JVM-authentication-mechanism.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Java Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JJDEV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="network-connection-security.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="Oracle-JVM-authentication-mechanism.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-Java-application-security.html" property="item" typeof="WebPage"><span property="name">Oracle数据库Java应用程序的安全性</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">数据库内容和Oracle JVM安全性</li>
            </ol>
            <a id="GUID-54515619-575D-4EFB-B745-F857A07813A6" name="GUID-54515619-575D-4EFB-B745-F857A07813A6"></a><a id="JJDEV10200"></a>
            
            <h2 id="JJDEV-GUID-54515619-575D-4EFB-B745-F857A07813A6" class="sect2"><span class="enumeration_section">11.2</span>数据库内容和Oracle JVM安全性</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>连接到数据库后，您必须具有相应的Java 2安全权限<a id="d32290e94" class="indexterm-anchor"></a><a id="d32290e98" class="indexterm-anchor"></a>数据库权限，用于访问存储在数据库中的资源。这些资源包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>数据库资源，例如表和PL / SQL包</p>
                     </li>
                     <li>
                        <p>操作系统资源，例如文件和套接字</p>
                     </li>
                     <li>
                        <p>Oracle JVM类</p>
                     </li>
                     <li>
                        <p>用户加载的类</p>
                     </li>
                  </ul>
                  <p>可以通过以下方法保护这些资源：</p>
               </div>
               <!-- class="section" -->
               <div class="tblformal" id="GUID-54515619-575D-4EFB-B745-F857A07813A6__GUID-4D3D88CF-2318-431A-83A5-E5DB04612446">
                  <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the methods to protect the resources stored within the database." frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="24%" id="d32290e126">资源安全</th>
                           <th align="left" valign="bottom" width="76%" id="d32290e129">描述</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d32290e134" headers="d32290e126 ">
                              <p>数据库资源安全</p>
                           </td>
                           <td align="left" valign="top" width="76%" headers="d32290e134 d32290e129 ">
                              <p>对数据库资源的授权要求将与Java 2安全权限不同的数据库权限授予资源。例如，数据库资源包括表，类和PL / SQL包。</p>
                              <p><a id="d32290e141" class="indexterm-anchor"></a>所有用户定义的类都针对来自其他模式的用户进行保护。您可以通过<code class="codeph">loadjava</code>工具上的选项向其他用户或模式授予执行权限。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d32290e150" headers="d32290e126 ">
                              <p>JVM安全性</p>
                           </td>
                           <td align="left" valign="top" width="76%" headers="d32290e150 d32290e129 ">
                              <p>Oracle JVM使用Java 2安全性，它使用<code class="codeph">Permission</code>对象来保护操作系统资源。Java 2安全性在启动时自动安装，并保护所有用户的所有操作系统资源和Oracle JVM类，除外<a id="d32290e159" class="indexterm-anchor"></a> <code class="codeph">JAVA_ADMIN</code> 。 <code class="codeph">JAVA_ADMIN</code>用户可以授予其他用户访问这些类的权限。
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <div class="section">
                  <div class="infoboxnote" id="GUID-54515619-575D-4EFB-B745-F857A07813A6__GUID-23252983-880F-45F9-8D00-D671B48916A5">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle JVM附带了强大但有限的加密，包括在JDK1.5和JDK 6中。如果要在应用程序中具有无限的加密强度，则必须从以下Web站点下载并安装适当的特定于版本的文件</p>
                           <p><a href="http://www.oracle.com/technetwork/indexes/downloads/index.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/indexes/downloads/index.html</code></a></p>
                        </li>
                        <li>
                           <p>用于授予或撤消权限的Oracle JVM类只能在服务器上运行。</p>
                        </li>
                     </ul>
                  </div>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="database-contents-Oracle-JVM-security.html#GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758">Java 2安全功能概述</a></p>
                     </li>
                     <li>
                        <p><a href="database-contents-Oracle-JVM-security.html#GUID-D90B4AA2-F408-474A-B006-6818336C92DD">设置权限概述</a></p>
                     </li>
                     <li>
                        <p><a href="database-contents-Oracle-JVM-security.html#GUID-1DF94F34-BBCA-4061-A15C-B8B8E76E07BA">调试权限</a></p>
                     </li>
                     <li>
                        <p><a href="database-contents-Oracle-JVM-security.html#GUID-E3427117-0517-4B6D-B346-81BB36A51489">加载类的权限</a></p>
                     </li>
                     <li>
                        <p><a href="database-contents-Oracle-JVM-security.html#GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA">自定义默认java.security资源</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-54515619-575D-4EFB-B745-F857A07813A6__GUID-08DB9084-0751-4C3A-9A8A-FE892B09EA9E">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../adfns/index.html" target="_blank"><span class="italic">Oracle数据库开发指南</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
            </div><a id="JJDEV13325"></a><div class="props_rev_3"><a id="GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758" name="GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758"></a><h3 id="JJDEV-GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758" class="sect3"><span class="enumeration_section">11.2.1</span> Java 2安全功能概述</h3>
               <div>
                  <div class="section">
                     <p>必须为每个用户或模式分配访问操作系统资源的适当权限，例如套接字，文件和系统属性。</p>
                     <p>Java 2安全性为Java应用程序提供了灵活且可配置的安全性。使用Java 2安全性，您可以准确定义架构或角色将拥有的每个加载对象的权限。在Oracle8 <span class="italic">i</span>数据库版本8.1.5中，可以使用以下安全角色：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">JAVAUSERPRIV</code></p>
                           <p>很少的权限，包括检查属性</p>
                        </li>
                        <li>
                           <p><code class="codeph">JAVASYSPRIV</code></p>
                           <p>主要权限，包括更新受Oracle JVM保护的软件包</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758__GUID-5B8C93C1-4286-4CBB-BE88-222F0AADA56F">
                        <p class="notep1">注意：</p>
                        <p>为了向后兼容，这两个角色仍然存在于此版本中。但是，Oracle建议您明确指定每个权限，而不是使用这些角色。</p>
                     </div>
                     <p><a id="d32290e329" class="indexterm-anchor"></a>由于Oracle JVM安全性基于Java 2安全性，因此您可以逐个类地分配权限。这些权限是通过数据库管理工具分配的。每个权限都封装在<code class="codeph">Permission</code>对象中，并存储在<code class="codeph">Permission</code>表中。<code class="codeph">Permission</code>包含<code class="codeph">target</code>和<code class="codeph">action</code>属性，它们采用<code class="codeph">String</code>值。
                     </p>
                     <p>为非数据库世界创建了Java 2安全性。在数据库中应用Java 2安全模型时，某些差异会表现出来。例如，Java 2安全性定义所有applet都是隐式不可信的，并且<code class="codeph">CLASSPATH</code>中的所有类都是可信的。在Oracle数据库中，所有类都加载在安全数据库中。因此，没有类可信任。
                     </p>
                     <p>下表描述了标准Java 2安全性和Oracle数据库安全性实现之间的差异：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-0B0B3B02-2999-4A12-AEF8-4C0E4A47B758__GUID-2DD32A49-A908-4ECE-BB69-A95BB524C112">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the Java 2 security standard in the left column and the corresponding Oracle Database security implementation in the right column." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="48%" id="d32290e368">Java 2安全标准</th>
                              <th align="left" valign="bottom" width="52%" id="d32290e371">Oracle数据库安全实施</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e376" headers="d32290e368 ">
                                 <p>位于<code class="codeph">CLASSPATH</code>中的Java类是受信任的。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e376 d32290e371 ">
                                 <p>所有Java类都在数据库中加载。根据授予的权限，可以逐类信任类。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e386" headers="d32290e368 ">
                                 <p><a id="d32290e388" class="indexterm-anchor"></a>您可以使用<code class="codeph">java</code>命令上的<code class="codeph">-usepolicy</code>标志指定策略。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e386 d32290e371 ">
                                 <p>您必须在<code class="codeph">PolicyTable</code>指定策略。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e406" headers="d32290e368 ">
                                 <p>您可以编写自己的<code class="codeph">SecurityManager</code>或使用Launcher。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e406 d32290e371 ">
                                 <p>您可以编写自己的<code class="codeph">SecurityManager</code> 。但是，Oracle建议您仅使用Oracle Database <code class="codeph">SecurityManager</code>或将其扩展。如果要修改行为，则不应定义<code class="codeph">SecurityManager</code> 。相反，您应该扩展<code class="codeph">oracle.aurora.rdbms.SecurityManagerImpl</code>并覆盖特定方法。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e428" headers="d32290e368 ">
                                 <p>默认情况下不会初始化<code class="codeph">SecurityManager</code> 。您必须初始化<code class="codeph">SecurityManager</code> 。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e428 d32290e371 ">
                                 <p>Oracle JVM始终在启动时初始化<code class="codeph">SecurityManager</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e443" headers="d32290e368 ">
                                 <p>权限由加载应用程序或小程序的位置或URL或密钥代码（即签名代码）确定。</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e443 d32290e371 ">
                                 <p>权限由加载类的模式确定。Oracle数据库不支持签名代码。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e450" headers="d32290e368 ">
                                 <p><a id="d32290e452" class="indexterm-anchor"></a>安全策略在文件中定义。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e450 d32290e371 ">
                                 <p><code class="codeph">PolicyTable</code>定义包含在安全数据库表中。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e464" headers="d32290e368 ">
                                 <p>如果您具有适当的权限，则可以使用文本编辑器或工具更新安全策略文件。</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e464 d32290e371 ">
                                 <p>您可以通过<code class="codeph">DBMS_JAVA</code>过程更新<code class="codeph">PolicyTable</code> 。初始化后，只有<code class="codeph">JAVA_ADMIN</code>有权修改<code class="codeph">PolicyTable</code> 。<code class="codeph">JAVA_ADMIN</code>必须授予您修改<code class="codeph">PolicyTable</code>权限，以便您可以向其他人授予权限。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e495" headers="d32290e368 ">
                                 <p>权限分配给保护域，类可以属于。</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e495 d32290e371 ">
                                 <p>同一模式中的所有类都位于同一保护域中。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e502" headers="d32290e368 ">
                                 <p>您可以使用<code class="codeph">CodeSource</code>类来识别代码。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果URL和证书相等，则<code class="codeph">equals()</code>方法返回<code class="codeph">true</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果第一个<code class="codeph">CodeSource</code>是包含特定<code class="codeph">CodeSource</code>对象的通用表示，那么<code class="codeph">implies()</code>方法返回<code class="codeph">true</code> 。
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e502 d32290e371 ">
                                 <p>您可以使用<code class="codeph">CodeSource</code>类来标识模式。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果模式相同，则<code class="codeph">equals()</code>方法返回<code class="codeph">true</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果模式相同， <code class="codeph">implies()</code>方法返回<code class="codeph">true</code> 。
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d32290e559" headers="d32290e368 ">
                                 <p><a id="d32290e561" class="indexterm-anchor"></a><a id="d32290e563" class="indexterm-anchor"></a><a id="d32290e567" class="indexterm-anchor"></a><a id="d32290e571" class="indexterm-anchor"></a>仅支持正权限，即<code class="codeph">grant</code> 。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d32290e559 d32290e371 ">
                                 <p>支持正面和限制权限，即<code class="codeph">grant</code>和<code class="codeph">restrict</code> 。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="JJDEV13326"></a><div class="props_rev_3"><a id="GUID-D90B4AA2-F408-474A-B006-6818336C92DD" name="GUID-D90B4AA2-F408-474A-B006-6818336C92DD"></a><h3 id="JJDEV-GUID-D90B4AA2-F408-474A-B006-6818336C92DD" class="sect3"><span class="enumeration_section">11.2.2</span>设置权限概述</h3>
               <div>
                  <div class="section">
                     <p><a id="d32290e687" class="indexterm-anchor"></a>与Java 2安全性一样，Oracle数据库支持安全性类。通常，您可以使用工具或编辑安全性来设置代码库的权限<a id="d32290e692" class="indexterm-anchor"></a>政策文件。在Oracle数据库中，您使用<code class="codeph">DBMS_JAVA</code>过程动态设置权限，这些过程修改数据库中的策略表。
                     </p>
                     <p><a id="d32290e701" class="indexterm-anchor"></a>已创建两个视图供您查看策略表<code class="codeph">USER_JAVA_POLICY</code>和<code class="codeph">DBA_JAVA_POLICY</code> 。两个视图都包含有关授予和限制权限的信息。<code class="codeph">DBA_JAVA_POLICY</code>视图可以查看策略表中的所有行。<code class="codeph">USER_JAVA_POLICY</code>视图只能看到与当前用户相关的权限。以下是每个视图中行的说明：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-D90B4AA2-F408-474A-B006-6818336C92DD__GUID-AA89576F-40CC-4503-8A4F-4568E8EA0A6E">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the rows within the USER_JAVA_POLICY view and the DBA_JAVA_POLICY view." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="24%" id="d32290e726">表格列</th>
                              <th align="left" valign="bottom" width="76%" id="d32290e729">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e734" headers="d32290e726 ">
                                 <p>类</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e734 d32290e729 ">
                                 <p><code class="codeph">GRANT</code>或<code class="codeph">RESTRICT</code> 。显示此权限是肯定权限还是限制权限。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e746" headers="d32290e726 ">
                                 <p>承授人</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e746 d32290e729 ">
                                 <p>分配<code class="codeph">Permission</code>对象的用户，架构或角色的名称。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e756" headers="d32290e726 ">
                                 <p>Permission_schema</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e756 d32290e729 ">
                                 <p>加载<code class="codeph">Permission</code>对象的模式。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e766" headers="d32290e726 ">
                                 <p>Permission_type</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e766 d32290e729 ">
                                 <p>该<a id="d32290e772" class="indexterm-anchor"></a> <code class="codeph">Permission</code>类类型，由包含完整类名的字符串指定，例如<code class="codeph">java.io.FilePermission</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e781" headers="d32290e726 ">
                                 <p>PERMISSION_NAME</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e781 d32290e729 ">
                                 <p><code class="codeph">Permission</code>对象的<code class="codeph">target</code>属性。您在定义权限时使用此选项。为<code class="codeph">PolicyTablePermission</code>类型的<code class="codeph">Permission</code>对象定义目标时，名称可能会变得非常复杂。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e800" headers="d32290e726 ">
                                 <p>Permission_action</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e800 d32290e729 ">
                                 <p><code class="codeph">Permission</code>对象的<code class="codeph">action</code>属性。如果没有适合该权限的操作，则许多权限都期望为null值。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e813" headers="d32290e726 ">
                                 <p>状态</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e813 d32290e729 ">
                                 <p><code class="codeph">ENABLED</code>和<code class="codeph">DISABLED</code> 。为<code class="codeph">Permission</code>对象创建行后，您可以禁用或重新启用它。此列显示是启用还是禁用权限。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d32290e828" headers="d32290e726 ">
                                 <p>键</p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d32290e828 d32290e729 ">
                                 <p>用于标识此行的序列号。禁用，启用或删除权限时应提供此编号。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>有两种设置权限的方法：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A">每个许可的细粒度定义</a></p>
                        </li>
                        <li>
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-1553DDD4-832F-49BB-B407-0BE10C176370">将常规权限定义分配给角色</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-D90B4AA2-F408-474A-B006-6818336C92DD__GUID-A0E123E9-868C-4BE5-90EF-35E5807D80F9">
                        <p class="notep1">注意：</p>
                        <p>为了绝对确定安全设置，请实现细粒度定义。一般定义易于实现，但您可能无法获得所需的确切安全设置。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="JJDEV13327"></a><div class="props_rev_3"><a id="GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A" name="GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A"></a><h4 id="JJDEV-GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A" class="sect4"><span class="enumeration_section">11.2.2.1</span>每个许可的<span class="enumeration_section">细粒度</span>定义</h4>
                  <div>
                     <div class="section">
                        <p>使用细粒度定义，您可以将每个权限单独授予特定用户或角色。如果您未授予访问权限，则将拒绝该架构访问。要在策略表中设置单个权限，您必须提供以下信息：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A__GUID-6DAA09E8-5BB8-4047-B5DC-7F58841834B1">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the information that you must specify in the policy table to set individual permissions." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d32290e949">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d32290e952">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d32290e957" headers="d32290e949 ">
                                    <p>承授人</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d32290e957 d32290e952 ">
                                    <p>要将授权应用于的用户，架构或角色的名称。<code class="codeph">PUBLIC</code>指定该行适用于所有用户。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d32290e967" headers="d32290e949 ">
                                    <p>权限类型</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d32290e967 d32290e952 ">
                                    <p>该<a id="d32290e973" class="indexterm-anchor"></a>您授予权限的<code class="codeph">Permission</code>类。例如，如果您要定义对文件的访问权限，则权限类型将为<code class="codeph">FilePermission</code> 。此参数需要扩展<code class="codeph">java.lang.security.的类的完全限定名称<code class="codeph">java.lang.security.Permission</code> 。如果该类不在<code class="codeph">SYS</code> ，则该名称应以<span class="italic"><code class="codeph">schema</code></span> <code class="codeph">:</code>为前缀。例如， <code class="codeph">mySchema:myPackage.MyPermission</code>是用户生成的权限的有效名称。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d32290e998" headers="d32290e949 ">
                                    <p>权限名称</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d32290e998 d32290e952 ">
                                    <p><code class="codeph">Permission</code>类定义的target属性的含义。检查相应名称的相应<code class="codeph">Permission</code>类。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d32290e1011" headers="d32290e949 ">
                                    <p>许可行动</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d32290e1011 d32290e952 ">
                                    <p>您可以指定的操作类型。这可能会根据权限类型而有所不同。例如， <code class="codeph">FilePermission</code>可以具有操作，读取或写入。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d32290e1021" headers="d32290e949 ">
                                    <p>键</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d32290e1021 d32290e952 ">
                                    <p>从授予或限制返回的编号，用于启用，禁用或删除方法。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="JJDEV13329"></a><a id="JJDEV13328"></a><div class="props_rev_3"><a id="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D" name="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D"></a><h5 id="JJDEV-GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D" class="sect5"><span class="enumeration_section">11.2.2.1.1</span>授予和限制权限</h5>
                     <div>
                        <div class="section">
                           <p>您可以使用SQL或Java授予权限。每个版本都返回一个行密钥标识符，用于标识权限表中的行。在Java版本的<code class="codeph">DBMS_JAVA</code> ，每个方法都返回行键标识符，作为返回参数或参数列表中的<code class="codeph">OUT</code>变量。在PL / SQL <code class="codeph">DBMS_JAVA</code>包中，仅在定义<code class="codeph">key OUT</code>参数的过程中返回行键。此密钥用于启用和禁用特定权限。
                           </p>
                           <p>运行授权后，如果已存在完全权限的行，则不会进行更新，但会返回该行的密钥。如果该行已禁用，则运行授权将启用现有行。</p>
                           <div class="infoboxnote" id="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__GUID-163004B6-0919-479C-9C1A-B1C8AD9029AE">
                              <p class="notep1">注意：</p>
                              <p>如果要授予<code class="codeph">FilePermission</code> ，则必须提供目录或文件的物理名称，例如<code class="codeph">/private/oracle</code> 。您不能提供环境变量（例如<code class="codeph">$ORACLE_HOME</code> ）或符号链接。要表示目录中的所有文件，请提供<code class="codeph">*</code>符号，如下所示：</p><pre class="oac_no_warn" dir="ltr">/私营/ ORACLE / *</pre><p>要表示目录中的所有目录和文件，请提供<code class="codeph">-</code>符号，如下所示：</p><pre class="oac_no_warn" dir="ltr">/私营/ ORACLE /  -</pre></div>
                           <p>您可以<a id="d32290e1178" class="indexterm-anchor"></a><a id="d32290e1182" class="indexterm-anchor"></a><a id="d32290e1184" class="indexterm-anchor"></a>使用<code class="codeph">DBMS_JAVA</code>包授予权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">过程grant_permission（grantee varchar2，permission_type varchar2，permission_name varchar2，permission_action varchar2）过程grant_permission（grantee varchar2，permission_type varchar2，permission_name varchar2，permission_action varchar2，key OUT number）</pre><p>您可以<a id="d32290e1196" class="indexterm-anchor"></a>使用Java授予权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">很长的oracle.aurora.rdbms.security。PolicyTableManager.grant（java.lang。String grantee，java.lang。字符串permission_type，java.lang。String permission_name，java.lang。String permission_action）; void oracle.aurora.rdbms.security。PolicyTableManager.grant（java.lang。String grantee，java.lang。字符串permission_type，java.lang。String permission_name，java.lang。String permission_action，long [] key）;</pre><p>您可以<a id="d32290e1203" class="indexterm-anchor"></a><a id="d32290e1207" class="indexterm-anchor"></a><a id="d32290e1211" class="indexterm-anchor"></a><a id="d32290e1215" class="indexterm-anchor"></a><a id="d32290e1217" class="indexterm-anchor"></a>使用<code class="codeph">DBMS_JAVA</code>包限制权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">procedure restrict_permission（grantee varchar2，permission_type varchar2，permission_name varchar2，permission_action varchar2）procedure restrict_permission（grantee varchar2，permission_type varchar2，permission_name varchar2，permission_action varchar2，key OUT number）</pre><p>您可以<a id="d32290e1227" class="indexterm-anchor"></a>使用Java限制权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">很长的oracle.aurora.rdbms.security。PolicyTableManager.restrict（java.lang。String grantee，java.lang。字符串permission_type，java.lang。String permission_name，java.lang。String permission_action）; void oracle.aurora.rdbms.security。PolicyTableManager.restrict（java.lang。String grantee，java.lang。字符串permission_type，java.lang。String permission_name，java.lang。String permission_action，long [] key）;</pre><p><a href="database-contents-Oracle-JVM-security.html#GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__BABBDGAE">示例11-1</a>显示了如何使用<code class="codeph">grant_permission()</code>方法授予权限。<a href="database-contents-Oracle-JVM-security.html#GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__BABDGDIF">例11-2</a>显示了如何使用<code class="codeph">restrict()</code>方法限制权限。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>以下示例执行以下操作：</p>
                           <ol>
                              <li>
                                 <p>授予每个人对<code class="codeph">/tmp</code>所有文件的读写权限。
                                 </p>
                              </li>
                              <li>
                                 <p>限制每个人只读取或写入<code class="codeph">/tmp</code>的<code class="codeph">password</code>文件。
                                 </p>
                              </li>
                              <li>
                                 <p>仅授予<code class="codeph">Larry</code>读取和写入<code class="codeph">password</code>文件的显式权限。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__BABBDGAE">
                           <p class="titleinexample">示例11-1授予权限</p>
                           <p>假设您具有修改策略表的适当权限，则可以使用<code class="codeph">DBMS_JAVA</code>包中的<code class="codeph">grant_permission()</code>方法修改<code class="codeph">PolicyTable</code>以允许用户访问指定的文件。在此示例中，用户<code class="codeph">Larry</code>具有<code class="codeph">PolicyTable</code>修改权限。在SQL包中， <code class="codeph">Larry</code>可以授予<code class="codeph">Dave</code>读取和写入文件的权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">connect larry输入密码： <span class="italic">password</span> REM授予读取和写入Test1文件的DAVE权限。调用dbms_java.grant_permission（'DAVE'，'java.io。FilePermission'，'/ test / Test1'，'read，write'）; REM将更改提交到PolicyTable提交;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__BABDGDIF">
                           <p class="titleinexample">例11-2限制权限</p>
                           <p>您可以使用<code class="codeph">restrict()</code>方法指定常规规则的限制或例外。一般规则是在大多数情况下，权限为真或授予的规则。但是，此规则可能有例外。对于这些例外，您指定限制权限。
                           </p>
                           <p>如果您定义了一个通用规则，即没有人可以读取或写入整个目录，那么您可以通过<code class="codeph">restrict()</code>方法定义对此规则的一个方面的<code class="codeph">restrict()</code> 。例如，如果要允许访问<code class="codeph">/tmp</code>目录中的所有文件，除了该目录中存在的密码文件，那么您将授予对<code class="codeph">/tmp</code>所有文件的读写权限，并限制读写访问权限到密码文件。
                           </p>
                           <p>如果要指定限制的例外，则必须创建显式授予权限以覆盖限制权限。在前面提到的方案中，如果您希望文件所有者仍然能够修改密码文件，那么您可以授予更明确的权限以允许访问一个用户，这将覆盖该限制。Oracle JVM安全性结合了所有规则，以了解谁真正有权访问密码文件。这在下图中说明：</p>
                           <div class="figure" id="GUID-001C9EEF-823B-4E5A-BBB4-468CBDC4F62D__GUID-9CDF5E80-F33A-4CC1-8095-E0181827BE7E">
                              <p class="titleinfigure">图11-1 / tmp目录中的文件列表</p><img src="img/limitper.gif" width="224" alt="下面是图11-1的描述" title="下面是图11-1的描述" longdesc="img_text/limitper.html"><br><a href="img_text/limitper.html">“图11-1 / tmp目录中的文件列表”的说明</a></div>
                           <!-- class="figure" -->
                           <p>明确的规则如下：</p>
                           <p>如果限制权限意味着请求，那么为了使授权许可有效，限制许可也必须意味着授予。</p>
                           <p>以下代码实现了此示例：</p><pre class="oac_no_warn" dir="ltr">connect larry输入密码： <span class="italic">password</span> REM授予所有用户（PUBLIC）能够读取和写入/ tmp中所有文件的权限。调用dbms_java.grant_permission（'PUBLIC'，'java.io。FilePermission'，'/ tmp / *'，'read，write'）; REM限制所有用户（PUBLIC）在/ tmp中读取或写入REM密码文件的权限。调用dbms_java.restrict_permission（'PUBLIC'，'java.io。FilePermission'，'/ tmp / password'，'read，write'）; REM通过提供更具体的规则来覆盖限制，REM Larry可以读取和写入/ tmp /密码。调用dbms_java.grant_permission（'LARRY'，'java.io。FilePermission'，'/ tmp / password'，'read，write'）;承诺;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="JJDEV13331"></a><div class="props_rev_3"><a id="GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9" name="GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9"></a><h5 id="JJDEV-GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9" class="sect5"><span class="enumeration_section">11.2.2.1.2</span>获取更新策略表的管理权限</h5>
                     <div>
                        <div class="section">
                           <p><a id="d32290e1432" class="indexterm-anchor"></a><a id="d32290e1436" class="indexterm-anchor"></a>所有权限都是<code class="codeph">PolicyTable</code>中的行。因为它是数据库中的表，所以您需要适当的权限才能对其进行修改。具体而言，需要<code class="codeph">PolicyTablePermission</code>对象来修改表。初始化Oracle JVM后，只有一个角色<code class="codeph">JAVA_ADMIN</code>被授予<code class="codeph">PolicyTablePermission</code>来修改<code class="codeph">PolicyTable</code> 。<code class="codeph">JAVA_ADMIN</code>角色立即分配给数据库管理员（DBA）。因此，如果您被分配到DBA组，那么您将自动承担所有<code class="codeph">JAVA_ADMIN</code>权限。
                           </p>
                           <p><a id="d32290e1464" class="indexterm-anchor"></a><a id="d32290e1468" class="indexterm-anchor"></a>如果需要将权限作为行添加到此表， <code class="codeph">JAVA_ADMIN</code>必须使用<code class="codeph">PolicyTablePermission</code>授予您的架构更新权限。此权限定义您的架构可以向表中添加行。每个<code class="codeph">PolicyTablePermission</code>都用于特定类型的权限。例如，要添加控制对文件的访问权限，必须具有<code class="codeph">PolicyTablePermission</code> ，允许您授予或限制对<code class="codeph">FilePermission</code>的权限。一旦发生这种情况，您就拥有<code class="codeph">FilePermission</code>管理权限。
                           </p>
                           <p><a id="d32290e1493" class="indexterm-anchor"></a>管理员可以以与其他权限相同的方式授予和限制<code class="codeph">PolicyTablePermission</code> ，但语法很复杂。为了便于使用，您可以使用<code class="codeph">grant_policy_permission()</code>或<code class="codeph">grantPolicyPermission()</code>方法来授予管理权限。
                           </p>
                           <p>您可以<a id="d32290e1509" class="indexterm-anchor"></a><a id="d32290e1513" class="indexterm-anchor"></a><a id="d32290e1515" class="indexterm-anchor"></a>使用<code class="codeph">DBMS_JAVA</code>授予策略表管理权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">过程grant_policy_permission（grantee varchar2，permission_schema varchar2，permission_type varchar2，permission_name varchar2）过程grant_policy_permission（grantee varchar2，permission_schema varchar2，permission_type varchar2，permission_name varchar2，key OUT number）</pre><p>您可以<a id="d32290e1527" class="indexterm-anchor"></a>使用Java授予策略表管理权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">很长的oracle.aurora.rdbms.security。PolicyTableManager.grantPolicyPermission（java.lang。String grantee，java.lang。String permission_schema，java.lang。字符串permission_type，java.lang。String permission_name）; void oracle.aurora.rdbms.security。PolicyTableManager.grantPolicyPermission（java.lang。String grantee，java.lang。String permission_schema，java.lang。字符串permission_type，java.lang。String permission_name，long [] key）;</pre><div class="tblformal" id="GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9__GUID-FE157D9D-075E-4028-B8B7-94A72E2A902F">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the permissions that you need to update the PolicyTable." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="23%" id="d32290e1540">参数</th>
                                       <th align="left" valign="bottom" width="77%" id="d32290e1543">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d32290e1548" headers="d32290e1540 ">
                                          <p>承授人</p>
                                       </td>
                                       <td align="left" valign="top" width="77%" headers="d32290e1548 d32290e1543 ">
                                          <p>要将授权应用于的用户，架构或角色的名称。<code class="codeph">PUBLIC</code>指定该行适用于所有用户。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d32290e1558" headers="d32290e1540 ">
                                          <p>Permission_schema</p>
                                       </td>
                                       <td align="left" valign="top" width="77%" headers="d32290e1558 d32290e1543 ">
                                          <p>加载<code class="codeph">Permission</code>类的模式。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d32290e1568" headers="d32290e1540 ">
                                          <p>Permission_type</p>
                                       </td>
                                       <td align="left" valign="top" width="77%" headers="d32290e1568 d32290e1543 ">
                                          <p>该<a id="d32290e1574" class="indexterm-anchor"></a>您授予权限的<code class="codeph">Permission</code>类。例如，如果您要定义对文件的访问权限，则权限类型将为<code class="codeph">FilePermission</code> 。此参数需要扩展<code class="codeph">java.lang.security.的类的完全限定名称<code class="codeph">java.lang.security.Permission</code> 。如果该类不在<code class="codeph">SYS</code> ，则该名称应以<span class="italic"><code class="codeph">schema</code></span> <code class="codeph">:</code>为前缀。例如， <code class="codeph">mySchema:myPackage.MyPermission</code>是用户生成的权限的有效名称。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d32290e1599" headers="d32290e1540 ">
                                          <p>PERMISSION_NAME</p>
                                       </td>
                                       <td align="left" valign="top" width="77%" headers="d32290e1599 d32290e1543 ">
                                          <p><code class="codeph">Permission</code>类定义的<code class="codeph">target</code>属性的含义。检查相应名称的相应<code class="codeph">Permission</code>类。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d32290e1615" headers="d32290e1540 ">
                                          <p>行号</p>
                                       </td>
                                       <td align="left" valign="top" width="77%" headers="d32290e1615 d32290e1543 ">
                                          <p>从授予或限制返回的编号，用于启用，禁用或删除方法。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnote" id="GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9__GUID-66DFC236-886B-43C8-9EC6-A37E648C1D01">
                              <p class="notep1">注意：</p>
                              <p>查看策略表时， <code class="codeph">PolicyTablePermission</code>行中的名称包含权限类型和权限名称，它们以<code class="codeph">#</code>分隔。例如，要授予用户读取文件的管理权限，该行中的名称包含<code class="codeph">java.io.FilePermission#read</code> 。<code class="codeph">#</code>将<code class="codeph">Permission</code>类与权限名称分开。
                              </p>
                           </div>
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9__BABDBECA">例11-3</a>显示了如何修改<code class="codeph">PolicyTable</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-F09A5FE9-83AC-464C-ADA8-EDF71557B5D9__BABDBECA">
                           <p class="titleinexample">示例11-3授予PolicyTable权限</p>
                           <p><a id="d32290e1649" class="indexterm-anchor"></a>此示例显示了已分配<code class="codeph">JAVA_ADMIN</code>角色的<code class="codeph">SYS</code> ，授予<code class="codeph">Larry</code>更新<code class="codeph">FilePermission</code> <code class="codeph">PolicyTable</code>权限。授予此权限后， <code class="codeph">Larry</code>可以授予其他用户读取，写入和删除文件的权限。
                           </p><pre class="oac_no_warn" dir="ltr">REM连接为SYS（分配了JAVA_ADMIN角色），以授予Larry权限REM以将PolicyTable连接SYS修改为SYSDBA输入密码： <span class="italic">password</span> REM SYS授予Larry管理REM FilePermission权限的权限dbms_java.grant_policy_permission（'LARRY'，' SYS'，'java.io。FilePermission'，'*'）;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-0A24260B-17BF-49D8-A6AE-870694A465A5" name="GUID-0A24260B-17BF-49D8-A6AE-870694A465A5"></a><h5 id="JJDEV-GUID-0A24260B-17BF-49D8-A6AE-870694A465A5" class="sect5"><span class="enumeration_section">11.2.2.1.3</span>创建权限</h5>
                     <div>
                        <div class="section">
                           <p>您可以通过执行以下步骤来创建自己的权限类型：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span><a id="d32290e1769" class="indexterm-anchor"></a>创建并加载用户权限</span><div>
                                 <p>通过扩展<code class="codeph">java.security.创建自己的权限<code class="codeph">java.security.Permission</code>类。任何用户定义的权限都必须扩展<code class="codeph">Permission</code> 。以下示例创建<code class="codeph">MyPermission</code> ，它扩展了<code class="codeph">BasicPermission</code> ，后者又扩展了<code class="codeph">Permission</code> 。
                                 </p><pre class="oac_no_warn" dir="ltr">package test.larry; import java.security。允许; import java.security。BasicPermission;公共类MyPermission扩展BasicPermission {public MyPermission（String name）{super（name）; public boolean implies（Permission p）{boolean result = super.implies（p）;返回结果; }}</pre></div>
                           </li>
                           <li class="stepexpand"><span>向指定用户授予管理和操作权限</span><div>
                                 <p><a id="d32290e1797" class="indexterm-anchor"></a>创建权限时，您被指定为该权限的所有者。所有者被隐式授予管理权限。这意味着所有者可以是此权限的管理员，并且可以运行<code class="codeph">grant_policy_permission()</code> 。管理权限使用户能够更新用户定义权限的策略表。
                                 </p>
                                 <p>例如，如果<code class="codeph">LARRY</code>创建了一个权限<code class="codeph">MyPermission</code> ，那么只有他可以为自己或其他用户调用<code class="codeph">grant_policy_permission()</code> 。此方法更新<code class="codeph">PolicyTable</code>对谁可以授予权<code class="codeph">MyPermission</code> 。以下代码演示了这一点：</p><pre class="oac_no_warn" dir="ltr">REM由于Larry是拥有MyPermission的用户，Larry连接到REW数据库以为MyPermission分配权限。</pre><pre class="oac_no_warn" dir="ltr">connect larry输入密码： <span class="italic">password</span> REM作为MyPermission的所有者，Larry授予REM管理test.larry权限的权利。JVM REM安全PolicyTable中的MyPermission。只有用户定义的权限REM的所有者才能授予管理权限。调用dbms_java.grant_policy_permission（'LARRY'，'LARRY'，'test.larry。MyPermission'，'*'）; REM将更改提交到PolicyTable提交;</pre><p>授予管理权限后，您可以为创建的权限授予操作权限。例如，以下SQL语句授予<code class="codeph">LARRY</code>在<code class="codeph">MyPermission</code>运行任何内容的权限，并授予<code class="codeph">DAVE</code>仅运行以“ <code class="codeph">act.</code> ”开头的操作的权限。
                                 </p><pre class="oac_no_warn" dir="ltr">REM由于Larry是创建MyPermission的用户，因此Larry连接到REW数据库以为MyPermission分配权限。</pre><pre class="oac_no_warn" dir="ltr">连接larry输入密码： <span class="italic">密码</span> REM一旦能够修改MyPermission的PolicyTable，Larry就会授予REM自己的MyPermission完全权限。请注意，权限是REM及其所有者架构的前缀。调用dbms_java.grant_permission（'LARRY'，'LARRY：test.larry。MyPermission'，'*'，null）; REM Larry授予Dave允许做任何以'act开头的行动。*”。调用dbms_java.grant_permission（'DAVE'，'LARRY：test.larry。MyPermission'，'act。*'，null）; REM将更改提交到PolicyTable提交;</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用权限实施安全检查</span><div>
                                 <p>为<code class="codeph">MyPermission</code>创建，加载和分配权限<code class="codeph">MyPermission</code> ，必须实施对<code class="codeph">SecurityManager</code>的调用以检查权限。以下示例中有四种方法： <code class="codeph">sensitive()</code> ， <code class="codeph">act()</code> ， <code class="codeph">print()</code>和<code class="codeph">hello()</code> 。由于在前面的步骤中使用SQL授予了权限，因此以下用户可以在示例类中运行方法：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">LARRY</code>可以运行任何方法。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DAVE</code>被授予仅运行<code class="codeph">act()</code>方法的权限。
                                       </p>
                                    </li>
                                    <li>
                                       <p>任何人都可以运行<code class="codeph">print()</code>和<code class="codeph">hello()</code>方法。<code class="codeph">print()</code>方法不检查任何权限。因此，任何人都可以运行它。<code class="codeph">hello()</code>方法运行<code class="codeph">AccessController.doPrivileged()</code> ，这意味着该方法使用分配给<code class="codeph">LARRY</code>的权限运行。这被称为定义者的权利。
                                       </p>
                                    </li>
                                 </ul><pre class="oac_no_warn" dir="ltr">package test.larry; import java.security。AccessController的; import java.security。允许; import java.security。的PrivilegedAction; import java.sql。连接; import java.sql。的SQLException; / ** * MyActions是一个具有各种公共方法的类*具有与之相关的一些安全风险。我们将依赖于Java安全机制，以确保它们仅由授权的代码执行。* /公共类Larry {private static String secret =“Larry的秘密”; MyPermission sensitivePermission = new MyPermission（“sensitive”）; / ** *这是一项安全敏感操作。也就是说，如果由“坏人”执行，它可能会损害我们的安全性。*只有拉里有权执行敏感。* / public void sensitive（）{checkPermission（sensitivePermission）;打印（）; } / ** *将显示Larry的消息。你必须小心谁可以这样做*因为来自拉里的消息可能会产生额外的影响。*拉里和戴夫都有权执行法案。* / public void act（String message）{MyPermission p = new MyPermission（“act。”+ message）;的checkPermission（P）; System.out.println（“拉里说：”+消息）; } / ** *显示密钥*未进行权限检查;任何人都可以执行打印* / private void print（）{System.out.println（secret）; } / ** *显示“Hello”*此方法调用doPrivileged，这使得方法在definer权限下运行*。所以，这个方法在Larry的*权限下运行，所以任何人都可以执行hello。只有Larry可以执行hello * / public void hello（）{AccessController.doPrivileged（new PrivilegedAction（）{public Object run（）{act（“hello”）; return null;}}）; } / ** *如果安装了安全管理器，则要求它检查权限*否则直接使用AccessController * / void checkPermission（Permission permission）{SecurityManager sm = System.getSecurityManager（）; sm.checkPermission（许可）; }}</pre></div>
                           </li>
                        </ol>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-EC03CF66-8B8F-46FC-AF74-92A856F72B7A" name="GUID-EC03CF66-8B8F-46FC-AF74-92A856F72B7A"></a><h5 id="JJDEV-GUID-EC03CF66-8B8F-46FC-AF74-92A856F72B7A" class="sect5"><span class="enumeration_section">11.2.2.1.4</span>启用或禁用权限</h5>
                     <div>
                        <div class="section">
                           <p>创建定义权限的行后，可以禁用它以使其不再适用。但是，如果您决定再次执行行操作，则可以启用该行。如果您认为它永远不会再次使用，您可以从表中删除该行。要删除，必须先禁用该行。如果不禁用该行，则不会删除。</p>
                           <p>要禁用行，可以使用以下任一方法：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">revoke_permission（）</code></p>
                                 <p>此方法接受类似于<code class="codeph">grant()</code>和<code class="codeph">restrict()</code>方法的参数。它在整个策略表中搜索与提供的参数匹配的所有行。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">disable_permission（）</code></p>
                                 <p>此方法仅禁用策略表中的单个行。为此，它接受策略表键作为参数。此密钥也是启用或删除权限所必需的。要检索权限密钥号，请执行以下操作之一：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>在授予或限制呼叫上返回时保存密钥。如果您未预见到需要启用或禁用权限，则可以使用授予和限制不返回权限编号的调用。</p>
                                    </li>
                                    <li>
                                       <p>抬头<a id="d32290e2031" class="indexterm-anchor"></a> <code class="codeph">DBA_JAVA_POLICY</code>或<a id="d32290e2036" class="indexterm-anchor"></a> <code class="codeph">USER_JAVA_POLICY</code>表示相应的权限密钥号。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>您可以<a id="d32290e2043" class="indexterm-anchor"></a><a id="d32290e2047" class="indexterm-anchor"></a><a id="d32290e2051" class="indexterm-anchor"></a>使用<code class="codeph">DBMS_JAVA</code>禁用权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">procedure revoke_permission（grantee varchar2，permission_type varchar2，permission_name varchar2，permission_action varchar2）procedure disable_permission（key number）</pre><p>您可以<a id="d32290e2061" class="indexterm-anchor"></a><a id="d32290e2063" class="indexterm-anchor"></a>使用Java禁用权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">void oracle.aurora.rdbms.security。PolicyTableManager.revoke（java.lang。String grantee，java.lang。字符串permission_type，java.lang。String permission_name，java.lang。String permission_action_type）; void oracle.aurora.rdbms.security。<a id="d32290e2068" class="indexterm-anchor"></a> PolicyTableManager.disable（长键）;</pre><p>您可以<a id="d32290e2075" class="indexterm-anchor"></a>使用<code class="codeph">DBMS_JAVA</code>启用权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">procedure enable_permission（密钥号）</pre><p>您可以<a id="d32290e2087" class="indexterm-anchor"></a>使用Java启用权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">void oracle.aurora.rdbms.security。<a id="d32290e2092" class="indexterm-anchor"></a> PolicyTableManager.enable（长键）;</pre><p>您可以<a id="d32290e2099" class="indexterm-anchor"></a><a id="d32290e2103" class="indexterm-anchor"></a>使用<code class="codeph">DBMS_JAVA</code>删除权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">procedure delete_permission（密钥号）</pre><p>您可以<a id="d32290e2116" class="indexterm-anchor"></a>使用Java删除权限，如下所示：</p><pre class="oac_no_warn" dir="ltr">void oracle.aurora.rdbms.security。<a id="d32290e2121" class="indexterm-anchor"></a> PolicyTableManager.delete（长键）;<a id="d32290e2126" class="indexterm-anchor"></a><a id="d32290e2130" class="indexterm-anchor"></a></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDEV13336"></a><a id="JJDEV13335"></a><div class="props_rev_3"><a id="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57" name="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57"></a><h5 id="JJDEV-GUID-87B33A94-4527-463A-95AE-4BCC4550CD57" class="sect5"><span class="enumeration_section">11.2.2.1.5</span>关于权限类型</h5>
                     <div>
                        <div class="section">
                           <p>无论何时要授予或限制权限，都必须提供权限类型。您用于控制访问权限的权限类型如下：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Java 2权限类型</p>
                              </li>
                              <li>
                                 <p>特定于Oracle的权限类型</p>
                              </li>
                              <li>
                                 <p>用户定义的扩展<code class="codeph">java.security.权限类型<code class="codeph">java.security.允许</code></p>
                              </li>
                           </ul>
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__BABFHEIC" title="此表描述左列的预定义权限类型和右列的权限。">表11-1</a>列出了已安装的<a id="d32290e2243" class="indexterm-anchor"></a>权限类型。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__BABFHEIC">
                           <p class="titleintable">表11-1预定义的权限</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="预定义的权限" width="100%" border="1" summary="This table describes the type of the predefined permissions on the left column and the permissions on the right column." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d32290e2258">类型</th>
                                    <th align="left" valign="bottom" width="78%" id="d32290e2261">权限</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d32290e2266" headers="d32290e2258 ">
                                       <p>Java 2</p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d32290e2266 d32290e2261 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">java.util中。PropertyPermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.io.SerializablePermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.io.的FilePermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.net.NetPermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.net。的SocketPermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.lang.reflect中。ReflectPermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">java.security。性SecurityPermission</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d32290e2304" headers="d32290e2258 ">
                                       <p>Oracle具体</p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d32290e2304 d32290e2261 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">oracle.aurora.rdbms.security。PolicyTablePermission</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">oracle.aurora.security。JServerPermission</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__GUID-9E62950A-14F7-4CFF-94EA-7E3DCF0B2F67">
                              <p class="notep1">注意：</p>
                              <p><code class="codeph">SYS</code>被授予加载Oracle数据库附带库的权限。但是，Oracle JVM不支持其他用户加载库，因为在数据库中加载C库是不安全的。因此，您不能为<code class="codeph">loadLibrary.授予<code class="codeph">RuntimePermission</code> <code class="codeph">loadLibrary.*</code> 。
                              </p>
                           </div>
                           <p>该<a id="d32290e2331" class="indexterm-anchor"></a>特定于Oracle的权限是：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">oracle.aurora.rdbms.security。PolicyTablePermission</code></p>
                                 <p><a id="d32290e2342" class="indexterm-anchor"></a>此权限控制谁可以更新策略表。一旦被授予更新特定权限类型的策略表的权限，您就可以控制对少量资源的访问。
                                 </p>
                                 <p>在Oracle JVM初始化之后，只有<code class="codeph">JAVA_ADMIN</code>角色可以通过<code class="codeph">PolicyTablePermission</code>为策略表授予管理权限。一旦将此权限授予其他用户，这些用户就可以使用自己的授权和限制权限更新策略表。
                                 </p>
                                 <p>要授予策略表更新，可以使用<code class="codeph">grant_policy_permission()</code>方法，该方法位于<code class="codeph">DBMS_JAVA</code>包中。更新表后，可以查看<code class="codeph">DBA_JAVA_POLICY</code>或<code class="codeph">USER_JAVA_POLICY</code>视图以查看谁被授予权限。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.aurora.security。JServerPermission</code></p>
                                 <p>此权限用于授予和限制对Oracle JVM资源的访问权限。<code class="codeph">JServerPermission</code>扩展了<code class="codeph">BasicPermission</code> 。下表列出了<code class="codeph">JServerPermission</code>授予访问权限的权限名称：</p>
                                 <div class="tblformal" id="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__GUID-F46F3CA3-CB6A-44A3-8311-FCC242C3CDE0">
                                    <table cellpadding="4" cellspacing="0" class="Formal" title="" width="90%" border="1" summary="This table lists the permission names for which JServerPermission grants access." frame="hsides" rules="rows">
                                       <thead>
                                          <tr align="left" valign="top">
                                             <th align="left" valign="bottom" width="45%" id="d32290e2392">许可名称</th>
                                             <th align="left" valign="bottom" width="55%" id="d32290e2395">描述</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2400" headers="d32290e2392 ">
                                                <p><code class="codeph">LoadClassInPackage.</code> <span class="italic"><code class="codeph">package_name</code></span></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2400 d32290e2395 ">
                                                <p>授予在指定包中加载类的功能</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2411" headers="d32290e2392 ">
                                                <p><code class="codeph">验证</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2411 d32290e2395 ">
                                                <p>授予打开或关闭字节码验证器的功能</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2419" headers="d32290e2392 ">
                                                <p><code class="codeph">调试</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2419 d32290e2395 ">
                                                <p>授予调试器连接到会话的能力</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2427" headers="d32290e2392 ">
                                                <p><code class="codeph">JRIExtensions</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2427 d32290e2395 ">
                                                <p>授予使用MEMSTAT</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2435" headers="d32290e2392 ">
                                                <p><code class="codeph">记忆。呼叫</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2435 d32290e2395 ">
                                                <p>授予在<code class="codeph">oracle.aurora.vm.调用某些方法的<code class="codeph">oracle.aurora.vm.OracleRuntime</code>随叫随到的设置</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2446" headers="d32290e2392 ">
                                                <p><code class="codeph">记忆。堆</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2446 d32290e2395 ">
                                                <p>授予在<code class="codeph">oracle.aurora.vm.调用某些方法的<code class="codeph">oracle.aurora.vm.堆栈设置上的OracleRuntime</code></p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2457" headers="d32290e2392 ">
                                                <p><code class="codeph">记忆。SGAIntern</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2457 d32290e2395 ">
                                                <p>授予在<code class="codeph">oracle.aurora.vm.调用某些方法的<code class="codeph">oracle.aurora.vm.SGA设置上的OracleRuntime</code></p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="45%" id="d32290e2468" headers="d32290e2392 ">
                                                <p><code class="codeph">记忆。GC</code></p>
                                             </td>
                                             <td align="left" valign="top" width="55%" headers="d32290e2468 d32290e2395 ">
                                                <p>授予在<code class="codeph">oracle.aurora.vm.调用某些方法的<code class="codeph">oracle.aurora.vm.垃圾收集器设置上的OracleRuntime</code></p>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                 </div>
                                 <!-- class="inftblhruleinformal" -->
                                 <div class="tblformalwide" id="GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__GUID-A28630BA-5A2C-48B6-9844-E4057DBEF85A">
                                    <p class="titleintable">表11-2 JServerPermission说明</p>
                                    <table cellpadding="4" cellspacing="0" class="FormalWide" title="JServerPermission描述" width="90%" border="1" summary="This table describes the permissions for which JServerPermission grants access." frame="hsides" rules="rows">
                                       <thead>
                                          <tr align="left" valign="top">
                                             <th align="left" valign="bottom" width="17%" id="d32290e2491">承授人</th>
                                             <th align="left" valign="bottom" width="41%" id="d32290e2494">许可类型</th>
                                             <th align="left" valign="bottom" width="23%" id="d32290e2497">许可名称</th>
                                             <th align="left" valign="bottom" width="12%" id="d32290e2500">许可授予或限制</th>
                                             <th align="left" valign="bottom" width="8%" id="d32290e2503">行动</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2508" headers="d32290e2491 ">
                                                <p><code class="codeph">JAVADEBUGPRIV</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2508 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2508 d32290e2497 ">
                                                <p><code class="codeph">调试</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2508 d32290e2500 ">
                                                <p>诚然</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2508 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2527" headers="d32290e2491 ">
                                                <p><code class="codeph">SYS</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2527 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2527 d32290e2497 ">
                                                <p><code class="codeph">*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2527 d32290e2500 ">
                                                <p>诚然</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2527 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2546" headers="d32290e2491 ">
                                                <p><code class="codeph">SYS</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2546 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2546 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.java。*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2546 d32290e2500 ">
                                                <p>诚然</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2546 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2565" headers="d32290e2491 ">
                                                <p><code class="codeph">SYS</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2565 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2565 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.oracle.aurora。*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2565 d32290e2500 ">
                                                <p>诚然</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2565 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2584" headers="d32290e2491 ">
                                                <p><code class="codeph">SYS</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2584 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2584 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.oracle.jdbc。*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2584 d32290e2500 ">
                                                <p>诚然</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2584 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2603" headers="d32290e2491 ">
                                                <p><code class="codeph">上市</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2603 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2603 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage。*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2603 d32290e2500 ">
                                                <p>诚然</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2603 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2622" headers="d32290e2491 ">
                                                <p><code class="codeph">上市</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2622 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2622 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.java。*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2622 d32290e2500 ">
                                                <p>受限</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2622 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2641" headers="d32290e2491 ">
                                                <p><code class="codeph">上市</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2641 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2641 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.oracle.aurora。*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2641 d32290e2500 ">
                                                <p>受限</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2641 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2660" headers="d32290e2491 ">
                                                <p><code class="codeph">上市</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2660 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2660 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.oracle.jdbc。*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2660 d32290e2500 ">
                                                <p>受限</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2660 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2679" headers="d32290e2491 ">
                                                <p><code class="codeph">JAVA_DEPLOY</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2679 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2679 d32290e2497 ">
                                                <p><code class="codeph">LoadClassInPackage.oracle.aurora.deploy。*</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2679 d32290e2500 ">
                                                <p>诚然</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2679 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                          <tr align="left" valign="top">
                                             <td align="left" valign="top" width="17%" id="d32290e2698" headers="d32290e2491 ">
                                                <p><code class="codeph">JAVA_DEPLOY</code></p>
                                             </td>
                                             <td align="left" valign="top" width="41%" headers="d32290e2698 d32290e2494 ">
                                                <p><code class="codeph">SYS：oracle.aurora.security。JServerPermission</code></p>
                                             </td>
                                             <td align="left" valign="top" width="23%" headers="d32290e2698 d32290e2497 ">
                                                <p><code class="codeph">部署</code></p>
                                             </td>
                                             <td align="left" valign="top" width="12%" headers="d32290e2698 d32290e2500 ">
                                                <p>诚然</p>
                                             </td>
                                             <td align="left" valign="top" width="8%" headers="d32290e2698 d32290e2503 ">
                                                <p>空值</p>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                 </div>
                                 <!-- class="inftblhruleinformal" -->
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDEV13339"></a><a id="JJDEV13340"></a><a id="JJDEV13341"></a><a id="JJDEV13342"></a><a id="JJDEV13338"></a><div class="props_rev_3"><a id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA" name="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA"></a><h5 id="JJDEV-GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA" class="sect5"><span class="enumeration_section">11.2.2.1.6</span>关于初始许可授权</h5>
                     <div>
                        <div class="section">
                           <p>首次初始化Oracle JVM时，会使用某些权限授予填充多个角色。下表显示了这些角色及其初始权限：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABCECGE" title="表">表11-3</a></p>
                              </li>
                              <li>
                                 <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABEHIBB" title="表">表11-4</a></p>
                              </li>
                              <li>
                                 <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABBIAGC" title="表">表11-5</a></p>
                              </li>
                              <li>
                                 <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABHDDDF" title="表">表11-6</a></p>
                              </li>
                              <li>
                                 <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABJEJCA" title="表">表11-7</a></p>
                              </li>
                           </ul>
                           <p><code class="codeph">JAVA_ADMIN</code>角色可以访问以修改所有权限的策略表。所有DBA（包括<code class="codeph">SYS</code> ）都被授予<code class="codeph">JAVA_ADMIN</code> 。 <a href="database-contents-Oracle-JVM-security.html#GUID-87B33A94-4527-463A-95AE-4BCC4550CD57__BABFHEIC" title="此表描述左列的预定义权限类型和右列的权限。">表11-1中</a>列出的权限授予了更新策略表的完全管理权限。除了<code class="codeph">JAVA_ADMIN</code>权限之外，还为<code class="codeph">SYS</code>授予了一些支持标准JDK功能和Oracle JVM细节所需的其他权限。
                           </p>
                           <p> <a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABCECGE" title="表">表11-3</a>列出了授予<code class="codeph">SYS</code>一些其他权限。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABCECGE">
                           <p class="titleintable">表11-3 SYS初始权限</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="SYS初始权限" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="49%" id="d32290e2916">许可类型</th>
                                    <th align="left" valign="bottom" width="28%" id="d32290e2919">许可名称</th>
                                    <th align="left" valign="bottom" width="23%" id="d32290e2922">行动</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2927" headers="d32290e2916 ">
                                       <p><code class="codeph">oracle.aurora.rdbms.security。PolicyTablePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2927 d32290e2919 ">
                                       <p><code class="codeph">oracle.aurora.rdbms.security。PolicyTablePermission＃*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2927 d32290e2922 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2939" headers="d32290e2916 ">
                                       <p><code class="codeph">oracle.aurora.security。JServerPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2939 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2939 d32290e2922 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2951" headers="d32290e2916 ">
                                       <p><code class="codeph">java.net.NetPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2951 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2951 d32290e2922 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2963" headers="d32290e2916 ">
                                       <p><code class="codeph">java.security。性SecurityPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2963 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2963 d32290e2922 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2975" headers="d32290e2916 ">
                                       <p><code class="codeph">java.util中。PropertyPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2975 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2975 d32290e2922 ">
                                       <p>写</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2987" headers="d32290e2916 ">
                                       <p><code class="codeph">java.lang.reflect中。ReflectPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2987 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2987 d32290e2922 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e2999" headers="d32290e2916 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e2999 d32290e2919 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e2999 d32290e2922 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e3011" headers="d32290e2916 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e3011 d32290e2919 ">
                                       <p><code class="codeph">loadLibrary.xaNative</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e3011 d32290e2922 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e3023" headers="d32290e2916 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e3023 d32290e2919 ">
                                       <p><code class="codeph">loadLibrary.corejava</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e3023 d32290e2922 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="49%" id="d32290e3035" headers="d32290e2916 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d32290e3035 d32290e2919 ">
                                       <p><code class="codeph">loadLibrary.corejava_d</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e3035 d32290e2922 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABEHIBB" title="表">表11-4</a>列出了最初授予或限制为所有用户的权限。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABEHIBB">
                           <p class="titleintable">表11-4 PUBLIC默认权限</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="PUBLIC默认权限" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d32290e3065">许可类型</th>
                                    <th align="left" valign="bottom" width="49%" id="d32290e3068">许可名称</th>
                                    <th align="left" valign="bottom" width="13%" id="d32290e3071">许可授予或限制</th>
                                    <th align="left" valign="bottom" width="8%" id="d32290e3074">行动</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3079" headers="d32290e3065 ">
                                       <p><code class="codeph">oracle.aurora.rdbms.security。PolicyTablePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3079 d32290e3068 ">
                                       <p><code class="codeph">java.lang中。RuntimePermission的＃调用LoadLibrary。*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3079 d32290e3071 ">
                                       <p>受限</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3079 d32290e3074 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3094" headers="d32290e3065 ">
                                       <p><code class="codeph">java.util中。PropertyPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3094 d32290e3068 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3094 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3094 d32290e3074 ">
                                       <p>读</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3109" headers="d32290e3065 ">
                                       <p><code class="codeph">java.util中。PropertyPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3109 d32290e3068 ">
                                       <p><code class="codeph">user.language</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3109 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3109 d32290e3074 ">
                                       <p>写</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3124" headers="d32290e3065 ">
                                       <p><code class="codeph">java.util中。PropertyPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3124 d32290e3068 ">
                                       <p><code class="codeph">oracle.net.tns_admin</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3124 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3124 d32290e3074 ">
                                       <p>写</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3139" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3139 d32290e3068 ">
                                       <p><code class="codeph">exitVM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3139 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3139 d32290e3074 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3154" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3154 d32290e3068 ">
                                       <p><code class="codeph">createSecurityManager</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3154 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3154 d32290e3074 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3169" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3169 d32290e3068 ">
                                       <p><code class="codeph">modifyThread</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3169 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3169 d32290e3074 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3184" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3184 d32290e3068 ">
                                       <p><code class="codeph">modifyThreadGroup</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3184 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3184 d32290e3074 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3199" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3199 d32290e3068 ">
                                       <p><code class="codeph">getenv.ORACLE_HOME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3199 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3199 d32290e3074 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3214" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3214 d32290e3068 ">
                                       <p><code class="codeph">getenv.TNS_ADMIN</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3214 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3214 d32290e3074 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3229" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3229 d32290e3068 ">
                                       <p><code class="codeph">喜好</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3229 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3229 d32290e3074 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3245" headers="d32290e3065 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3245 d32290e3068 ">
                                       <p><code class="codeph">调用LoadLibrary。*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3245 d32290e3071 ">
                                       <p>受限</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3245 d32290e3074 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d32290e3260" headers="d32290e3065 ">
                                       <p><code class="codeph">oracle.aurora.security。JServerPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="49%" headers="d32290e3260 d32290e3068 ">
                                       <p><code class="codeph">LoadClassInPackage.*</code>除了<code class="codeph">LoadClassInPackage.java.*</code> ， <code class="codeph">LoadClassInPackage.oracle.aurora.*</code>和<code class="codeph">LoadClassInPackage.oracle.jdbc.*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d32290e3260 d32290e3071 ">
                                       <p>诚然</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d32290e3260 d32290e3074 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABBIAGC" title="表">表11-5</a>列出了最初授予<code class="codeph">JAVAUSERPRIV</code>角色的权限。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABBIAGC">
                           <p class="titleintable">表11-5 JAVAUSERPRIV权限</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="JAVAUSERPRIV权限" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d32290e3304">许可类型</th>
                                    <th align="left" valign="bottom" width="58%" id="d32290e3307">许可名称</th>
                                    <th align="left" valign="bottom" width="9%" id="d32290e3310">行动</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3315" headers="d32290e3304 ">
                                       <p><code class="codeph">java.net。的SocketPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3315 d32290e3307 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3315 d32290e3310 ">
                                       <p>连接，解决</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3327" headers="d32290e3304 ">
                                       <p><code class="codeph">java.io.的FilePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3327 d32290e3307 ">
                                       <p><code class="codeph">&lt;&lt;所有文件&gt;&gt;</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3327 d32290e3310 ">
                                       <p>读</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3339" headers="d32290e3304 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3339 d32290e3307 ">
                                       <p><code class="codeph">stopThread</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3339 d32290e3310 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3351" headers="d32290e3304 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3351 d32290e3307 ">
                                       <p><code class="codeph">getProtectionDomain</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3351 d32290e3310 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3363" headers="d32290e3304 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3363 d32290e3307 ">
                                       <p><code class="codeph">accessClassInPackage。*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3363 d32290e3310 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d32290e3375" headers="d32290e3304 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d32290e3375 d32290e3307 ">
                                       <p><code class="codeph">defineClassInPackage。*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d32290e3375 d32290e3310 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABHDDDF" title="表">表11-6</a>列出了最初授予<code class="codeph">JAVASYSPRIV</code>角色的权限。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABHDDDF">
                           <p class="titleintable">表11-6 JAVASYSPRIV权限</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="JAVASYSPRIV权限" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="37%" id="d32290e3407">许可类型</th>
                                    <th align="left" valign="bottom" width="33%" id="d32290e3410">许可名称</th>
                                    <th align="left" valign="bottom" width="30%" id="d32290e3413">行动</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3418" headers="d32290e3407 ">
                                       <p><code class="codeph">java.io.SerializablePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3418 d32290e3410 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3418 d32290e3413 ">
                                       <p>没有适用的行动</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3430" headers="d32290e3407 ">
                                       <p><code class="codeph">java.io.的FilePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3430 d32290e3410 ">
                                       <p><code class="codeph">&lt;&lt;所有文件&gt;&gt;</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3430 d32290e3413 ">
                                       <p>读，写，执行，删除</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3442" headers="d32290e3407 ">
                                       <p><code class="codeph">java.net。的SocketPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3442 d32290e3410 ">
                                       <p><code class="codeph">*</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3442 d32290e3413 ">
                                       <p>接受，联系，倾听，解决</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3454" headers="d32290e3407 ">
                                       <p><code class="codeph">java.sql中。SQLPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3454 d32290e3410 ">
                                       <p><code class="codeph">setlog命令</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3454 d32290e3413 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3466" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3466 d32290e3410 ">
                                       <p><code class="codeph">createClassLoader</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3466 d32290e3413 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3478" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3478 d32290e3410 ">
                                       <p><code class="codeph">getClassLoader</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3478 d32290e3413 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3490" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3490 d32290e3410 ">
                                       <p><code class="codeph">setContextClassLoader</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3490 d32290e3413 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3502" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3502 d32290e3410 ">
                                       <p><code class="codeph">setFactory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3502 d32290e3413 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3514" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3514 d32290e3410 ">
                                       <p><code class="codeph">SETIO</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3514 d32290e3413 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3526" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3526 d32290e3410 ">
                                       <p><code class="codeph">setFileDescriptor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3526 d32290e3413 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3538" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3538 d32290e3410 ">
                                       <p><code class="codeph">readFileDescriptor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3538 d32290e3413 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d32290e3551" headers="d32290e3407 ">
                                       <p><code class="codeph">java.lang中。的RuntimePermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32290e3551 d32290e3410 ">
                                       <p><code class="codeph">writeFileDescriptor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="30%" headers="d32290e3551 d32290e3413 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p><a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABJEJCA" title="表">表11-7</a>列出了最初授予<code class="codeph">JAVADEBUGPRIV</code>角色的权限。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABJEJCA">
                           <p class="titleintable">表11-7 JAVADEBUGPRIV权限</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="JAVADEBUGPRIV权限" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="50%" id="d32290e3583">许可类型</th>
                                    <th align="left" valign="bottom" width="27%" id="d32290e3586">许可名称</th>
                                    <th align="left" valign="bottom" width="23%" id="d32290e3589">行动</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d32290e3594" headers="d32290e3583 ">
                                       <p><code class="codeph">oracle.aurora.security。JServerPermission</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d32290e3594 d32290e3586 ">
                                       <p><code class="codeph">调试</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d32290e3594 d32290e3589 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="JJDEV13343"></a><div class="props_rev_3"><a id="GUID-1553DDD4-832F-49BB-B407-0BE10C176370" name="GUID-1553DDD4-832F-49BB-B407-0BE10C176370"></a><h4 id="JJDEV-GUID-1553DDD4-832F-49BB-B407-0BE10C176370" class="sect4"><span class="enumeration_section">11.2.2.2</span>将一般权限定义分配给角色</h4>
                  <div>
                     <div class="section">
                        <p><a id="d32290e3694" class="indexterm-anchor"></a>在Oracle8 <span class="italic">i</span>数据库版本8.1.5中，通过向模式授予<code class="codeph">JAVASYSPRIV</code> ， <code class="codeph">JAVAUSERPRIV</code>或<code class="codeph">JAVADEBUGPRIV</code>角色来控制Oracle JVM安全性。在Oracle Database 12 <span class="italic">c</span>第1版（12.1）中，这些角色仍作为权限组存在。您可以设置和定义自己的权限集合。定义后，您可以向任何用户或角色授予任何权限集合。然后，该用户将具有该角色中存在的相同权限。此外，如果您需要其他权限，则可以向指定的用户或角色添加单独的权限。策略表中定义的权限具有累积效应。
                        </p>
                        <div class="infoboxnote" id="GUID-1553DDD4-832F-49BB-B407-0BE10C176370__GUID-FB29CD57-C6F3-4D87-8BDB-0E6FE4903D4A">
                           <p class="notep1">注意：</p>
                           <p>通过<code class="codeph">PropertyPermission</code>上的写入操作授予的属性写入功能不再授予所有用户。相反，您必须让<code class="codeph">JAVA_ADMIN</code>向您授予此权限，或者您可以通过授予<code class="codeph">JAVASYSPRIV</code>角色来接收它。
                           </p>
                        </div>
                        <p>以下示例为Larry和Dave提供以下权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Larry获得了<code class="codeph">JAVASYSPRIV</code>权限。
                              </p>
                           </li>
                           <li>
                              <p>Dave接收<code class="codeph">JAVADEBUGPRIV</code>权限以及读取和写入系统上所有文件的能力。
                              </p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr">REM授予Larry与JAVASYSPRIV中存在的权限相同的权限，将javasyspriv授予larry; REM授予Dave调试授权javadebugpriv到dave的能力;承诺; REM我还希望Dave能够读取和写入系统调用dbms_java.grant_permission（'DAVE'，'SYS：java.io）上的所有文件。FilePermission'，'&lt;&lt; ALL FILES &gt;&gt;'，'read，write'，null）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="database-contents-Oracle-JVM-security.html#GUID-065CD132-9CAD-44B9-8823-C5C318C6F71A">每个许可的细粒度定义</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JJDEV13344"></a><div class="props_rev_3"><a id="GUID-1DF94F34-BBCA-4061-A15C-B8B8E76E07BA" name="GUID-1DF94F34-BBCA-4061-A15C-B8B8E76E07BA"></a><h3 id="JJDEV-GUID-1DF94F34-BBCA-4061-A15C-B8B8E76E07BA" class="sect3"><span class="enumeration_section">11.2.3</span>调试权限</h3>
               <div>
                  <div class="section">
                     <p>创建了一个调试角色<code class="codeph">JAVADEBUGPRIV</code> ，用于授予运行调试器的权限。<a href="database-contents-Oracle-JVM-security.html#GUID-4D6094F8-C713-4D3C-9562-30CE0AB166EA__BABJEJCA" title="表">表11-7</a>中列出了分配给此角色的权限。要获得调用调试代理的权限，调用者必须已被授予<code class="codeph">JAVADEBUGPRIV</code>或调试<code class="codeph">JServerPermission</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">REM授予Dave调试授权javadebugpriv到dave的能力; REM Larry授予自己启动调试代理的权限。调用dbms_java.grant_permission（'LARRY'，'oracle.aurora.security。JServerPermission'，'Debug'，null）;</pre><p>虽然调试器提供对服务器上的代码和数据的广泛访问，但其使用应限于开发环境。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13345"></a><div class="props_rev_3"><a id="GUID-E3427117-0517-4B6D-B346-81BB36A51489" name="GUID-E3427117-0517-4B6D-B346-81BB36A51489"></a><h3 id="JJDEV-GUID-E3427117-0517-4B6D-B346-81BB36A51489" class="sect3"><span class="enumeration_section">11.2.4</span>加载类的权限</h3>
               <div>
                  <div class="section">
                     <p>要加载类，您必须具有以下权限：</p><pre class="oac_no_warn" dir="ltr">JServerPermission（“LoadClassInPackage。”+ <span class="italic">class_name</span> ）</pre><p>其中， <span class="italic"><code class="codeph">class_name</code></span>是要加载的类的完全限定名称。
                     </p>
                     <p>这不包括加载到系统包或替换任何系统类。即使您被授予加载System类的权限，Oracle Database也会阻止您执行加载。系统类是Oracle数据库使用<code class="codeph">CREATE JAVA SYSTEM</code>语句安装的类。如果您尝试替换System类，则会引发以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-01031“权限不足”</pre><p>以下描述了每个用户在安装数据库后可以执行的操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">SYS</code>可以加载除System类之外的任何类。
                           </p>
                        </li>
                        <li>
                           <p>任何用户都可以在自己的架构中加载不以以下模式开头的类： <code class="codeph">java.*</code> ， <code class="codeph">oracle.aurora.*</code>和<code class="codeph">oracle.jdbc.*</code> 。如果用户想要将这些类加载到另一个模式中，则必须授予它<code class="codeph">JServerPermission(LoadClassInPackage.</code> <span class="italic"><code class="codeph">class</code></span> <code class="codeph">)</code>权限。
                           </p>
                           <p>以下示例显示如何授予<code class="codeph">HR</code>权限以将类加载到<code class="codeph">oracle.aurora.tools.*</code>包中：</p><pre class="oac_no_warn" dir="ltr">dbms_java.grant_permission（ 'HR'，'SYS：oracle.aurora.security。JServerPermission”， 'LoadClassInPackage.oracle.aurora.tools *'，NULL）;</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13562"></a><a id="JJDEV13561"></a><div class="props_rev_3"><a id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA" name="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA"></a><h3 id="JJDEV-GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA" class="sect3"><span class="enumeration_section">11.2.5</span>自定义缺省java.security资源</h3>
               <div>
                  <div class="section">
                     <p>如果要添加安全提供程序或更改缺省<code class="codeph">java.security</code>资源中列出的安全提供程序的顺序，则可以创建备用资源并将其添加到数据库。此更改会影响在加载资源后启动的所有新Oracle JVM会话。执行以下步骤以配置缺省<code class="codeph">java.security</code>资源：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__CACHCIIF"><span>创建以下文件：</span><div>
                           <p><code class="codeph">$ ORACLE_HOME / JavaVM的/ lib / security中/ java.security.alt</code></p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>使用以下命令将文件<code class="codeph">$ORACLE_HOME/javavm/lib/security/java.security</code>的内容复制到步骤1中创建的文件中：</span><div><pre class="oac_no_warn" dir="ltr">cp $ ORACLE_HOME / javavm / lib / security / java.security $ ORACLE_HOME / javavm / lib / security / java.security.alt</pre></div>
                     </li>
                     <li class="stepexpand"><span>编辑<code class="codeph">$ORACLE_HOME/javavm/lib/security/java.security.alt</code>文件并根据需要进行必要的更改。</span><div>
                           <div class="infoboxnote" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-BCC2411E-7861-49D2-AC51-3C69825CE4FF">
                              <p class="notep1">警告：</p>
                              <p>如果在指定服务提供商或已定义设备的顺序时出错，则某些功能可能会变得无法使用。</p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>使用以下命令加载<code class="codeph">java.security.alt</code>文件：</span><div>
                           <div class="infoboxnote" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-6D18D5AE-9FA8-4EC7-A23C-846F0691AEDE">
                              <p class="notep1">注意：</p>
                              <p>您必须能够以<code class="codeph">SYS</code>身份登录才能加载<code class="codeph">lib/security/java.security.alt</code>文件。
                              </p>
                           </div><pre class="oac_no_warn" dir="ltr">cd $ ORACLE_HOME / javavm loadjava -u sys / &lt;sys_pwd&gt; -v -g public lib / security / java.security.alt</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>此安全设置会影响从数据库启动的每个未来Oracle JVM会话。但是，安全设置的更改对加载会话无效。</p>
                     <div class="infoboxnote" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-5FC47FBF-0572-41A8-9F8C-7EB199D7A898">
                        <p class="notep1">警告：</p>
                        <p>在配置安全参数之前，您必须了解它们。不正确的设置可能导致异常操作。</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-ADB5119E-D121-4E37-B525-1935EEF1E4FA">
                        <p class="notep1">也可以看看：</p>
                        <p>有关此安全设置的详细信息，请访问<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/index.html" target="_blank"><code class="codeph">http://docs.oracle.com/javase/7/docs/technotes/guides/security/index.html</code></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-BD0B583F-CA34-49F5-A8A5-4AF813F357D2">
                     <p class="titleinexample">示例11-4创建或替换Java系统</p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-59549488-0C1A-4384-AD09-8FA66AECD6CD">
                     <p>您现在必须为<code class="codeph">java.security.alt</code>执行创建或替换Java系统，以便为OJVM提供一组不同的安全性参数。在此之前，应使用以下命令重新启动所有系统会话：</p><pre class="oac_no_warn" dir="ltr">sqlplus / as sysdba shutdown sqlplus / as sysdba startup</pre><p>Create Java System按以下方式执行：</p><pre class="oac_no_warn" dir="ltr">sqlplus / as sysdba创建或替换java系统</pre><p>对于Linux。X64数据库，Create Java System将无法运行。在这种情况下，请使用以下命令：</p><pre class="oac_no_warn" dir="ltr">sqlplus / as sysdba调用javavm_sys.rehotload（）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-FCF3FD7D-64D3-436C-AAF4-B6076B420345">
                     <p class="titleinexample">示例11-5恢复安全设置</p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-F8F1FB30-8FFC-4866-BE9D-43FB97FCF4AA__GUID-A066F175-79A2-4324-B907-FED52B4FBF39">
                     <p>您可以通过以下两种方式之一恢复原始安全设置：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用以下命令：</p><pre class="oac_no_warn" dir="ltr">cd $ ORACLE_HOME / javavm dropjava -u sys / &lt;sys_pwd&gt; -v lib / security / java.security.alt</pre></li>
                        <li>
                           <p>使用以下命令：</p><pre class="oac_no_warn" dir="ltr">sqlplus sys / &lt;sys_pwd&gt; as sysdba SQL&gt; drop java resource“lib / security / java.security.alt”;</pre></li>
                     </ul>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="12847.developing-simple-database-application.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications."></meta>
      <meta name="description" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications."></meta>
      <title>开发简单的Oracle数据库应用程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="2 Day Developer&#39;s Guide "></meta>
      <meta property="og:description" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="2 Day Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="2-day-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T13:00:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94801-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="building-effective-applications.html" title="Previous" type="text/html"></link>
      <link rel="next" href="deploying-database-application.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="2 Day Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="TDDDG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="building-effective-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="deploying-database-application.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2天开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">开发简单的Oracle数据库应用程序</li>
            </ol>
            <a id="GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" name="GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7"></a><a id="TDDDG153"></a>
            
            <h2 id="TDDDG-GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" class="sect2"><span class="enumeration_chapter">9</span>开发简单的Oracle数据库应用程序</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='developing-simple-database-application'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C">关于申请</a><br>该应用程序具有以下目的，结构和命名约定。
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-D8812009-9F2A-4EB4-A973-036EDA23697D">为应用程序创建架构</a><br>使用本节中的过程，为应用程序创建模式。
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1">授予模式权限</a><br>要为模式授予权限，请使用SQL语句<span class="keyword">GRANT</span> 。</li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D">创建架构对象并加载数据</a><br>本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D">创建employees_pkg包</a><br>本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE">创建admin_pkg包</a><br>本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。
                  </li>
               </ul>
            </div>
            <a id="TDDDG154"></a><div class="props_rev_3"><a id="GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" name="GUID-11A0AA43-2038-4511-9A06-DB24958DF60C"></a><h3 id="TDDDG-GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" class="sect3"><span class="enumeration_section">9.1</span>关于应用程序</h3>
               <div>
                  <p>该应用程序具有以下目的，结构和命名约定。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-436CB761-34D0-49DB-8934-26F9CF88F712">申请目的</a><br>该应用程序适用于公司中的两种用户。
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7">申请结构</a><br>该应用程序使用以下架构对象和架构。
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-AA217345-C98E-435B-B3C9-F08D085E0980">应用程序中的命名约定</a><br>该应用程序使用这些命名约定。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG157"></a><div class="props_rev_3"><a id="GUID-436CB761-34D0-49DB-8934-26F9CF88F712" name="GUID-436CB761-34D0-49DB-8934-26F9CF88F712"></a><h4 id="TDDDG-GUID-436CB761-34D0-49DB-8934-26F9CF88F712" class="sect4"><span class="enumeration_section">9.1.1</span>申请目的</h4>
                  <div>
                     <p>该应用程序适用于公司中的两种用户。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>典型用户（员工经理）</p>
                        </li>
                        <li>
                           <p>应用管理员</p>
                        </li>
                     </ul>
                     <p>典型用户可以执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>让特定部门的员工参与进来</p>
                        </li>
                        <li>
                           <p>获取给定员工的工作历史记录</p>
                        </li>
                        <li>
                           <p>显示给定员工的一般信息（姓名，部门，工作，经理，薪水等）</p>
                        </li>
                        <li>
                           <p>更改给定员工的工资</p>
                        </li>
                        <li>
                           <p>改变给定员工的工作</p>
                        </li>
                     </ul>
                     <p>应用程序管理员可以执行以</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>更改现有作业的ID，标题或工资范围</p>
                        </li>
                        <li>
                           <p>添加一份新工作</p>
                        </li>
                        <li>
                           <p>更改现有部门的ID，名称或经理</p>
                        </li>
                        <li>
                           <p>添加一个新部门</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG158"></a><div class="props_rev_3"><a id="GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" name="GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7"></a><h4 id="TDDDG-GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" class="sect4"><span class="enumeration_section">9.1.2</span>应用程序的结构</h4>
                  <div>
                     <p>该应用程序使用以下架构对象和架构。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9">应用程序的模式对象</a><br></li>
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">应用程序的模式</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG161"></a><div class="props_rev_3"><a id="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9" name="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9"></a><h5 id="TDDDG-GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9" class="sect5"><span class="enumeration_section">9.1.2.1</span>应用程序的模式对象</h5>
                     <div>
                        <p>应用程序由以下模式对象组成：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>四个表，用于存储以下数据：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>工作</p>
                                 </li>
                                 <li>
                                    <p>部门</p>
                                 </li>
                                 <li>
                                    <p>雇员</p>
                                 </li>
                                 <li>
                                    <p>员工的工作经历</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>四个版本视图，涵盖表格，使您可以使用基于版本的重新定义（EBR）在使用时升级已完成的应用程序</p>
                           </li>
                           <li>
                              <p>两个触发器，用于执行业务规则</p>
                           </li>
                           <li>
                              <p>两个序列，为新部门和新员工生成唯一主键</p>
                           </li>
                           <li>
                              <p>两个包：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>employees_pkg，典型用户的应用程序接口（API）</p>
                                 </li>
                                 <li>
                                    <p>admin_pkg，应用程序管理员的API</p>
                                 </li>
                              </ul>
                              <p>典型用户和应用程序管理员仅通过其API访问应用程序。因此，他们只能通过调用包子程序来更改数据。</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9__GUID-39DF9CBB-66D3-4B7E-99F2-215A81EB83E5">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关架构对象的信息，请参阅<span class="q">“ <a href="two-day-developer-intro.html#GUID-D6CEA186-A6ED-4E4B-A479-76E0CAFCA0BA" title="Oracle Database将相关信息分组为称为模式的逻辑结构。逻辑结构包含模式对象。">关于Oracle数据库</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关EBR的信息，请参阅“ <a href="../adfns/editions.html#ADFNS020" target="_blank"><span class="italic">Oracle数据库开发指南</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" title="该应用程序使用以下架构对象和架构。">应用程序的结构</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG162"></a><div class="props_rev_3"><a id="GUID-DA4704AD-7557-4455-889E-3E1745B56D81" name="GUID-DA4704AD-7557-4455-889E-3E1745B56D81"></a><h5 id="TDDDG-GUID-DA4704AD-7557-4455-889E-3E1745B56D81" class="sect5"><span class="enumeration_section">9.1.2.2</span>应用程序的模式</h5>
                     <div>
                        <p>为了安全起见，应用程序使用这五个模式（或用户），每个模式<span class="italic">只</span>具有所需的权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>app_data，拥有除包之外的所有模式对象，并使用示例模式HR中的表中的数据加载其表</p>
                              <p>创建包的开发人员永远不会在此模式中工作。因此，它们不会意外地更改或删除应用程序模式对象。</p>
                           </li>
                           <li>
                              <p>app_code，只拥有包employee_pkg</p>
                              <p>employees_pkg的开发人员在此架构中工作。</p>
                           </li>
                           <li>
                              <p>app_admin，只拥有包admin_pkg</p>
                              <p>admin_pkg的开发人员在此架构中工作。</p>
                           </li>
                           <li>
                              <p>app_user，典型的应用程序用户，不拥有任何东西，只能执行employees_pkg</p>
                              <p>中间层应用程序服务器以app_user身份连接到连接池中的数据库。例如，如果这种模式受到SQL注入错误的攻击 - 攻击者只能查看和更改employees_pkg子程序允许它查看和更改的内容。攻击者无法删除表，升级权限，创建或更改架构对象或其他任何内容。</p>
                           </li>
                           <li>
                              <p>app_admin_user，一个应用程序管理员，不拥有任何东西，只能执行admin_pkg和employees_pkg</p>
                              <p>此架构的连接池非常小，只有特权用户才能访问它。如果此架构遭到破坏，攻击者只能查看和更改admin_pkg和employees_pkg子程序允许其查看和更改的内容。</p>
                           </li>
                        </ul>
                        <p>假设应用程序只有一个不拥有任何内容且可以执行employees_pkg和admin_pkg的模式，而不是app_user和app_admin_user。对于典型用户和应用程序管理员，此架构的连接池必须足够大。如果employees_pkg中存在SQL注入错误，则利用该错误的典型用户可以访问admin_pkg。</p>
                        <p>假设应用程序只有一个拥有所有模式对象（包括包）的模式，而不是app_data，app_code和app_admin。然后，包将具有表的所有特权，这将是不必要的和不合需要的。</p>
                        <p>例如，假设您有一个审计跟踪表AUDIT_TRAIL。您希望employees_pkg的开发人员能够写入AUDIT_TRAIL，但不能读取或更改它。您希望admin_pkg的开发人员能够读取AUDIT_TRAIL并写入它，但不能更改它。如果AUDIT_TRAIL，employees_pkg和admin_pkg属于同一模式，则这两个软件包的开发人员拥有AUDIT_TRAIL的所有权限。但是，如果AUDIT_TRAIL属于app_data，employees_pkg属于app_code，admin_pkg属于app_admin，那么您可以作为app_data连接到数据库并执行以下操作：</p><pre class="oac_no_warn" dir="ltr">授权将AUDIT_TRAIL插入app_code; GRANT INSERT，选择AUDIT_TRAIL到app_admin;</pre></div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-DA4704AD-7557-4455-889E-3E1745B56D81__GUID-C71C1BD3-57D6-406A-8EBD-65F56550C15D">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关模式的信息，请参阅<span class="q">“ <a href="two-day-developer-intro.html#GUID-D6CEA186-A6ED-4E4B-A479-76E0CAFCA0BA" title="Oracle Database将相关信息分组为称为模式的逻辑结构。逻辑结构包含模式对象。">关于Oracle数据库</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="two-day-developer-intro.html#GUID-F55D4815-FCD8-4075-AEBC-BC2B57A47F9E" title="HR示例模式可以与Oracle数据库一起安装。此架构包含有关员工 - 部门，位置，工作历史和相关信息的信息。与所有模式一样，HR具有表，视图，索引，过程，函数和其他属性。本文档中的示例和教程使用模式。">关于示例模式HR</a> ”</span> ，了解有关示例模式<code class="codeph">HR</code></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="building-effective-applications.html#GUID-32FBC335-6B08-4B50-B039-06BB9F500908" title="在为组成应用程序的模式对象授予权限时，请使用最小权限原则。">推荐的安全措施</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" title="该应用程序使用以下架构对象和架构。">应用程序的结构</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TDDDG286"></a><div class="props_rev_3"><a id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980" name="GUID-AA217345-C98E-435B-B3C9-F08D085E0980"></a><h4 id="TDDDG-GUID-AA217345-C98E-435B-B3C9-F08D085E0980" class="sect4"><span class="enumeration_section">9.1.3</span>应用程序中的命名约定</h4>
                  <div>
                     <p>该应用程序使用这些命名约定。</p>
                     <div class="tblformal" id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__GUID-8CE6D53D-040D-4C9C-A848-4881C8CAB52D">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Left column lists the items for which the application has naming conventions. Right column describes those conventions." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="52%" id="d40654e657">项目</th>
                                 <th align="left" valign="bottom" width="48%" id="d40654e660">名称</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e665" headers="d40654e657 ">
                                    <p>表</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e665 d40654e660 ">
                                    <p><span class="italic">表</span> ＃</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e674" headers="d40654e657 ">
                                    <p><span class="italic">表的</span>编辑视图＃</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e674 d40654e660 ">
                                    <p><span class="italic">表</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e685" headers="d40654e657 ">
                                    <p>在版本视图<span class="italic">表</span>上触发</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e685 d40654e660 ">
                                    <p><span class="italic">table</span> _ {a | b} <span class="italic">event</span> [_fer]其中：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>a标识AFTER触发器。</p>
                                       </li>
                                       <li>
                                          <p>b标识BEFORE触发器。</p>
                                       </li>
                                       <li>
                                          <p>fer识别FOR EACH ROW触发器。</p>
                                       </li>
                                       <li>
                                          <p><span class="italic">event</span>标识触发触发器的事件。例如：i表示INSERT，i表示INSERT或UPDATE，d表示DELETE。</p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e714" headers="d40654e657 ">
                                    <p><span class="italic">表</span> ＃中的PRIMARY KEY约束</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e714 d40654e660 ">
                                    <p><span class="italic">table</span> _pk</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e726" headers="d40654e657 ">
                                    <p><span class="italic">表</span> ＃上的NOT NULL约束。 <span class="italic">柱</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e726 d40654e660 ">
                                    <p><span class="italic">table_column</span> _not_null <a id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" name="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" href="#GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" table,="" table1,="" and="" table2="" are="" abbreviated="" to="" emp="" for="" employees,="" dept="" departments,="" job_hist="" job_history=")" ="" onclick="footdisplay(1, "><sup>脚1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e751" headers="d40654e657 ">
                                    <p>对<span class="italic">表</span> ＃的UNIQUE约束。 <span class="italic">柱</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e751 d40654e660 ">
                                    <p><span class="italic">table_column</span> _unique <a id="fnsrc_d40654e764" name="fnsrc_d40654e764" href="#fnsrc_d40654e764" table,="" table1,="" and="" table2="" are="" abbreviated="" to="" emp="" for="" employees,="" dept="" departments,="" job_hist="" job_history=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e767" headers="d40654e657 ">
                                    <p>检查<span class="italic">表</span> ＃的约束。 <span class="italic">柱</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e767 d40654e660 ">
                                    <p><span class="italic">table_column</span> _check <a id="fnsrc_d40654e780" name="fnsrc_d40654e780" href="#fnsrc_d40654e780" table,="" table1,="" and="" table2="" are="" abbreviated="" to="" emp="" for="" employees,="" dept="" departments,="" job_hist="" job_history=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e783" headers="d40654e657 ">
                                    <p>对<span class="italic">table1</span> ＃的REF约束。 <span class="italic">列</span>到<span class="italic">表2</span> ＃。 <span class="italic">柱</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e783 d40654e660 ">
                                    <p><span class="italic">table1</span> <code class="codeph">_to_</code> <span class="italic">table2</span> _fk <a id="fnsrc_d40654e806" name="fnsrc_d40654e806" href="#fnsrc_d40654e806" table,="" table1,="" and="" table2="" are="" abbreviated="" to="" emp="" for="" employees,="" dept="" departments,="" job_hist="" job_history=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e809" headers="d40654e657 ">
                                    <p>对<span class="italic">table1</span> ＃的REF约束。 <span class="italic">column1</span>到<span class="italic">table2</span> ＃。 <span class="italic">COLUMN2</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e809 d40654e660 ">
                                    <p><span class="italic">table1_col1</span> _to_ <span class="italic">table2_col2</span> _fk <a id="fnsrc_d40654e831" name="fnsrc_d40654e831" href="#fnsrc_d40654e831" table,="" table1,="" and="" table2="" are="" abbreviated="" to="" emp="" for="" employees,="" dept="" departments,="" job_hist="" job_history=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a> <a id="fn_2" name="fn_2" href="#fn_2" col1="" and="" col2="" are="" abbreviations="" of="" column="" names="" column1="" column2.="" a="" constraint="" cannot="" have="" more="" than="" 30="" characters=")" ="" onclick="footdisplay(2, "><sup>Foot 2</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e849" headers="d40654e657 ">
                                    <p><span class="italic">表</span> ＃的顺序</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e849 d40654e660 ">
                                    <p><span class="italic">table_sequence</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e860" headers="d40654e657 ">
                                    <p>参数名称</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e860 d40654e660 ">
                                    <p>p_ <span class="italic">name</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e870" headers="d40654e657 ">
                                    <p>局部变量名称</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e870 d40654e660 ">
                                    <p>l_ <span class="italic">名字</span></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p><span class="italic">table</span> ， <span class="italic">table1</span>和<span class="italic">table2</span>缩写为emp表示员工，部门表示部门，job_hist表示job_history。
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注2</sup></p><p><span class="italic">col1</span>和<span class="italic">col2</span>是列名<span class="italic">column1</span>和<span class="italic">column2的</span>缩写。约束名称不能超过30个字符。
                        </p>
                     <p></p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG164"></a><a id="TDDDG155"></a><div class="props_rev_3"><a id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" name="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D"></a><h3 id="TDDDG-GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" class="sect3"><span class="enumeration_section">9.2</span>为应用程序创建模式</h3>
               <div>
                  <p>使用本节中的过程，为应用程序创建模式。</p>
                  <div class="section">
                     <p>模式名称是：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>应用程序数据</p>
                        </li>
                        <li>
                           <p>的app_code</p>
                        </li>
                        <li>
                           <p>app_admin</p>
                        </li>
                        <li>
                           <p>APP_USER</p>
                        </li>
                        <li>
                           <p>app_admin_user</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-4BCC71E9-1DAD-4085-A110-F39B0976727B">
                        <p class="notep1">注意：</p>
                        <p>对于以下过程，您需要具有<span class="keyword">CREATE USER</span>和<span class="keyword">DROP USER</span>系统特权的用户的名称和密码。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-BF340FDB-259A-407B-ADF0-A401A02FB205">要创建架构（或用户） <span class="italic">schema_name</span> ：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>使用SQL * Plus，以具有<span class="keyword">CREATE USER</span>和<span class="keyword">DROP USER</span>系统特权的用户身份连接到Oracle数据库。</span><div>
                           <p>出现<samp class="sysout">SQL&gt;</samp>提示符。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>如果模式存在，请使用此SQL语句删除模式及其对象：</span><div><pre class="oac_no_warn" dir="ltr">DROP USER <span class="italic">schema_name</span> CASCADE;</pre><p>如果存在架构，则系统响应：</p><pre class="oac_no_warn" dir="ltr">用户掉线了
</pre><p>如果架构不存在，系统会响应：</p><pre class="oac_no_warn" dir="ltr">第1行的DROP USER <span class="italic">schema_name</span> CASCADE * ERROR：ORA-01918：用户' <span class="italic">schema_name</span> '不存在</pre></div>
                     </li>
                     <li class="stepexpand"><span>如果<span class="italic"><code class="codeph">schema_name</code></span>是<code class="codeph">app_data</code> ， <code class="codeph">app_code</code>或<code class="codeph">app_admin</code> ，则使用此SQL语句创建架构：</span><div><pre class="oac_no_warn" dir="ltr">CREATE USER <span class="italic">schema_name</span> IDENTIFIED BY <span class="italic">密码</span> DEFAULT TABLESPACE USERS QUOTA无限用户使用版本;</pre><p>否则，使用此SQL语句创建架构：</p><pre class="oac_no_warn" dir="ltr">CREATE USER <span class="italic">schema_name</span> IDENTIFIED BY <span class="italic">password</span> ENABLE EDITIONS;</pre><div class="infoboxnote" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-B7C28A86-140E-49F3-85C0-2D4EA8FC1E98">
                              <p class="notep1">警告：</p>
                              <p>选择安全密码。有关安全密码的准则，请参见“ <a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span class="italic">Oracle数据库安全指南”</span></a> 。
                              </p>
                           </div>
                           <p>系统响应：</p><pre class="oac_no_warn" dir="ltr">用户创建。
</pre></div>
                     </li>
                     <li class="stepexpand"><span>（可选）在SQL Developer中，使用<span class="q">“ <a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer是一个客户端程序，您可以使用它来访问Oracle数据库。">从SQL Developer连接到Oracle数据库</a> ”中</span>的指示信息为模式创建连接。</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-03CA2CB8-0A21-4DFE-8307-4FB0DCCB564C">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus连接到Oracle数据库</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">DROP</code> <code class="codeph">USER</code>语句的信息，请<a href="../sqlrf/DROP-USER.html#SQLRF01811" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">CREATE</code> <code class="codeph">USER</code>语句的信息，请<a href="../sqlrf/CREATE-USER.html#SQLRF01503" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TDDDG165"></a><div class="props_rev_3"><a id="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" name="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1"></a><h3 id="TDDDG-GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" class="sect3"><span class="enumeration_section">9.3</span>授予模式权限</h3>
               <div>
                  <p>要为模式授予权限，请使用SQL语句<span class="keyword">GRANT</span> 。</p>
                  <div class="section">
                     <p>您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">GRANT</span>语句。为了安全起见， <span class="italic">只</span>为每个模式授予它所需的权限。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8">授予app_data架构权限</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC">授予app_code架构权限</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67">授予app_admin架构权限</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788">授予app_user和app_admin_user架构权限</a><br></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1__GUID-8D933627-9BCD-488D-8ACB-BFE4783C9363">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关<span class="keyword">GRANT</span>语句的信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG167"></a><div class="props_rev_3"><a id="GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8" name="GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8"></a><h4 id="TDDDG-GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8" class="sect4"><span class="enumeration_section">9.3.1</span>向app_data架构授予权限</h4>
                  <div>
                     <div class="section">
                        <p><span class="italic">仅</span>向app_data架构授予执行以下操作的权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到Oracle数据库：</p><pre class="oac_no_warn" dir="ltr">授予创建会话到app_data;</pre></li>
                           <li>
                              <p>为应用程序创建表，视图，触发器和序列：</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE TABLE，创建视图，创建触发器，为app_data创建序列;</pre></li>
                           <li>
                              <p>将示例模式HR中的四个表中的数据加载到其自己的表中：</p><pre class="oac_no_warn" dir="ltr">在<span class="bold">HR.DEPARTMENTS上</span>选择<span class="bold">给</span> app_data;在<span class="bold">HR.EMPLOYEES上</span>选择给app_data;在<span class="bold">HR.JOB_HISTORY上</span>选择GRANT选择app_data;在<span class="bold">HR.JOBS上</span>选择<span class="bold">给</span> app_data;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="要为模式授予权限，请使用SQL语句GRANT。">向模式授予权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG170"></a><div class="props_rev_3"><a id="GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC" name="GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC"></a><h4 id="TDDDG-GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC" class="sect4"><span class="enumeration_section">9.3.2</span>授予app_code Schema权限</h4>
                  <div>
                     <div class="section">
                        <p><span class="italic">仅</span>向app_code模式授予执行以下操作的权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到Oracle数据库：</p><pre class="oac_no_warn" dir="ltr">授予创建会话app_code;</pre></li>
                           <li>
                              <p>创建包employees_pkg：</p><pre class="oac_no_warn" dir="ltr">授予app_code创建程序;</pre></li>
                           <li>
                              <p>创建同义词（为方便起见）：</p><pre class="oac_no_warn" dir="ltr">授予创建SYNONYM app_code;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="要为模式授予权限，请使用SQL语句GRANT。">向模式授予权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG171"></a><div class="props_rev_3"><a id="GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67" name="GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67"></a><h4 id="TDDDG-GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67" class="sect4"><span class="enumeration_section">9.3.3</span>授予app_admin架构权限</h4>
                  <div>
                     <div class="section">
                        <p><span class="italic">仅</span>向app_admin架构授予执行以下操作的权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到Oracle数据库：</p><pre class="oac_no_warn" dir="ltr">授予创建会话到app_admin;</pre></li>
                           <li>
                              <p>创建包admin_pkg：</p><pre class="oac_no_warn" dir="ltr">给予app_admin GRANT CREATE PROCEDURE;</pre></li>
                           <li>
                              <p>创建同义词（为方便起见）：</p><pre class="oac_no_warn" dir="ltr">GRANT创建SYNONYM到app_admin;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="要为模式授予权限，请使用SQL语句GRANT。">向模式授予权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG243"></a><div class="props_rev_3"><a id="GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788" name="GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788"></a><h4 id="TDDDG-GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788" class="sect4"><span class="enumeration_section">9.3.4</span>向app_user和app_admin_user模式授予权限</h4>
                  <div>
                     <div class="section">
                        <p><span class="italic">仅</span>向app_user和app_admin_user模式授予执行以下操作的权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到Oracle数据库：</p><pre class="oac_no_warn" dir="ltr">授予app_user创建会话;授予创建会话到app_admin_user;</pre></li>
                           <li>
                              <p>创建同义词（为方便起见）：</p><pre class="oac_no_warn" dir="ltr">GRANT创建SYNONYM到app_user;授予创建SYNONYM到app_admin_user;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="要为模式授予权限，请使用SQL语句GRANT。">向模式授予权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG284"></a><a id="TDDDG283"></a><div class="props_rev_3"><a id="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" name="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D"></a><h3 id="TDDDG-GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" class="sect3"><span class="enumeration_section">9.4</span>创建模式对象并加载数据</h3>
               <div>
                  <p>本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D__GUID-FB250A64-9086-428A-83F9-95CEEABA16D1">要创建架构对象并加载数据：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>以用户app_data身份连接到Oracle数据库。</span><div>
                           <p>有关说明，请参阅<span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus</a></span> <span class="q"><a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">连接到Oracle数据库</a></span> <span class="q">”</span>或<span class="q">“ <a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer是一个客户端程序，您可以使用它来访问Oracle数据库。">从SQL Developer连接到Oracle数据库</a> ”</span> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>使用除加载数据后必须添加的外键约束之外的所有必要约束创建表。</span></li>
                     <li class="stepexpand"><span>创建编辑视图。</span></li>
                     <li class="stepexpand"><span>创建触发器。</span></li>
                     <li class="stepexpand"><span>创建序列。</span></li>
                     <li class="stepexpand"><span>将数据加载到表中。</span></li>
                     <li class="stepexpand"><span>添加外键约束。</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF">创建表</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-768FDDA1-1A22-4DEE-9890-450FA676A049">创建编辑视图</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">创建触发器</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396">创建序列</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24">加载数据</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90">添加外键约束</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-4A22470D-2C45-44A9-940F-E39771CCCE76">向用户授予模式对象的权限</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG287"></a><a id="TDDDG285"></a><div class="props_rev_3"><a id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF" name="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF"></a><h4 id="TDDDG-GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF" class="sect4"><span class="enumeration_section">9.4.1</span>创建表</h4>
                  <div>
                     <div class="section">
                        <p>本节介绍如何为应用程序创建表，除了一个必需的约束，您必须在加载数据后添加这些约束。</p>
                        <div class="infoboxnote" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-66E96FBE-3079-48EF-8551-40BE6FBE87EA">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户<code class="codeph">app_data</code>身份连接到Oracle数据库。
                           </p>
                        </div>
                        <p>在以下过程中，您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Table创建表。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-D197EBA9-507A-4F23-98B2-6E620B2B7B7C">要创建表：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建作业＃，它存储有关公司中作业的信息（每个作业占一行）：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE jobs＃（job_id VARCHAR2（10）CONSTRAINT jobs_pk PRIMARY KEY，job_title VARCHAR2（35）CONSTRAINT jobs_job_title_not_null NOT NULL，min_salary NUMBER（6）CONSTRAINT jobs_min_salary_not_null NOT NULL，max_salary NUMBER（6）CONSTRAINT jobs_max_salary_not_null NOT NULL）/</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建部门＃，其中存储有关公司部门的信息（每个部门一行）：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE部门＃（department_id NUMBER（4）CONSTRAINT departments_pk PRIMARY KEY，department_name VARCHAR2（30）CONSTRAINT department_name_not_null NOT NULL CONSTRAINT department_name_unique UNIQUE，manager_id NUMBER（6））/</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建员工＃，其中存储有关公司员工的信息（每个员工一行）：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE employees＃（employee_id NUMBER（6）CONSTRAINT employees_pk PRIMARY KEY，first_name VARCHAR2（20）CONSTRAINT emp_first_name_not_null NOT NULL，last_name VARCHAR2（25）CONSTRAINT emp_last_name_not_null NOT NULL，email_addr VARCHAR2（25）CONSTRAINT emp_email_addr_not_null NOT NULL，hire_date DATE DEFAULT TRUNC（ SYSDATE）CONSTRAINT emp_hire_date_not_null NOT NULL CONSTRAINT emp_hire_date_check CHECK（TRUNC（hire_date）= hire_date），country_code VARCHAR2（5）CONSTRAINT emp_country_code_not_null NOT NULL，phone_number VARCHAR2（20）CONSTRAINT emp_phone_number_not_null NOT NULL， <span class="bold">job_id</span> CONSTRAINT emp_job_id_not_null NOT NULL CONSTRAINT emp_jobs_fk <span class="bold">REFERENCES jobs＃</span> ，job_start_date DATE CONSTRAINT emp_job_start_date_not_null NOT NULL，CONSTRAINT emp_job_start_date_check CHECK（TRUNC（JOB_START_DATE）= job_start_date），工资NUMBER（6）CONSTRAINT emp_salary_not_null NOT NULL， <span class="bold">manager_id</span> CONSTRAINT emp_mgr_to_empno_fk <span class="bold">REFERENCES employees＃</span> ， <span class="bold">department_id</span> CONSTRAINT emp_to_dept_fk <span class="bold">参考部门＃</span> ）/</pre><p>REF约束的原因是：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>员工必须拥有现有工作。也就是说，列雇员＃.job_id中的值也必须是列作业＃.job_id中的值。</p>
                                 </li>
                                 <li>
                                    <p>员工必须有一名也是员工的经理。也就是说，列员工＃.manager_id中的值也必须是列员工＃.employee_id中的值。</p>
                                 </li>
                                 <li>
                                    <p>员工必须在现有部门工作。也就是说，列雇员＃.department_id中的值也必须是列部门＃.department_id中的值。</p>
                                 </li>
                              </ul>
                              <p>此外，员工的经理必须是员工所在部门的经理。也就是说，列#surager_id列中的值也必须是列部门＃.manager_id中的值。但是，在创建部门＃时，您无法指定必要的约束，因为员工＃尚不存在。因此，您必须稍后向部门＃添加外键约束（请参阅<span class="q">“ <a href="developing-simple-database-application.html#GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90">添加外键约束</a> ”</span> ）。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建job_history＃，它存储公司中每个员工的工作历史记录（员工持有的每个工作一行）：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE JOB_HISTORY＃（EMPLOYEE_ID约束job_hist_to_employees_fk <span class="bold">参考员工＃，JOB_ID</span>约束job_hist_to_jobs_fk <span class="bold">参考职位＃，</span>起始日期工期约束job_hist_start_date_not_null NOT NULL日期，结束日期工期约束job_hist_end_date_not_null NOT NULL，部门标识约束job_hist_to_departments_fk <span class="bold">参考部门＃</span>约束job_hist_dept_id_not_null NOT NULL，约束job_history_pk PRIMARY KEY（EMPLOYEE_ID ，start_date），CONSTRAINT job_history_date_check CHECK（start_date &lt;end_date））/</pre><p>REF约束的原因是员工，工作和部门必须存在。那是：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>job_history＃.employee_id列中的值也必须是employee＃.employee_id列中的值。</p>
                                 </li>
                                 <li>
                                    <p>job_history＃.job_id列中的值也必须是列作业＃.job_id中的值。</p>
                                 </li>
                                 <li>
                                    <p>job_history＃.department_id列中的值也必须是列部门＃.department_id中的值。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-1E98C0F2-6F8A-443D-912F-1AB09ADE3782">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-87AA2B05-2B7B-49D9-AD21-1B2877113D23" title="要创建表，请使用SQL Developer工具Create Table或DDL语句CREATE TABLE。">创建表</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG288"></a><div class="props_rev_3"><a id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049" name="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049"></a><h4 id="TDDDG-GUID-768FDDA1-1A22-4DEE-9890-450FA676A049" class="sect4"><span class="enumeration_section">9.4.2</span>创建编辑视图</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-27894E6F-A616-45DA-A5A2-E74FC3875B1E">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>要创建编辑视图，请使用以下语句（按任意顺序）。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具“创建视图”创建编辑视图。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换版本查看作业选择*来自作业＃/创建或替换版本视图部门AS SELECT * FROM departments＃/ CREATE OR REPLACE EDITIONING VIEW employees AS SELECT * FROM employees＃/ CREATE OR REPLACE EDITIONING VIEW job_history AS SELECT * FROM job_history ＃/</pre><div class="infoboxnote" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-07C078BC-D782-4DBE-BB81-8B161E9E5452">
                           <p class="notep1">注意：</p>
                           <p>应用程序必须始终通过编辑视图引用基表。否则，编辑视图不会覆盖表格，并且您无法在使用时使用EBR升级已完成的应用程序。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-C798D39A-5B8B-4054-8B01-920F362AFBCD">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-31755C84-1EE1-41FF-9EC8-FD8CDE2D5BC1" title="要创建视图，请使用SQL Developer工具Create View或DDL语句CREATE VIEW。">创建视图</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关版本视图的一般信息，请参见<a href="../adfns/editions.html#ADFNS0202" target="_blank"><span class="italic">“Oracle数据库开发指南</span></a></p>
                           </li>
                           <li>
                              <p>有关准备应用程序以使用编辑视图的信息，请参见<a href="../adfns/editions.html#ADFNS99917" target="_blank"><span class="italic">“Oracle数据库开发指南</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG289"></a><div class="props_rev_3"><a id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E" name="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E"></a><h4 id="TDDDG-GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E" class="sect4"><span class="enumeration_section">9.4.3</span>创建触发器</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E__GUID-03DA2D70-A4E5-4FC6-AA9A-BEFFB3AB63E9">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>应用程序中的触发器会强制执行以下业务规则：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>与工作<span class="italic">j</span>的职员必须有最低和最高工资工作<span class="italic">j</span>之间的薪水。
                              </p>
                           </li>
                           <li>
                              <p>如果具有工作<span class="italic">j</span>的员工具有工资<span class="italic">s</span> ，则您不能将<span class="italic">j</span>的最低工资更改为大于<span class="italic">s</span>的值或将<span class="italic">j</span>的最大工资更改为小于<span class="italic">s</span>的值。（这样做会使现有数据无效。）
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E">创建触发器以实施第一个业务规则</a><br>第一个业务规则是：以工作<span class="italic">j</span>的职员必须具备的最低和最高工资工作<span class="italic">j</span>之间的薪水。
                        </li>
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-9A964406-B333-4064-9171-A9CA69B71E75">创建触发器以实施第二个业务规则</a><br>第二个业务规则是：如果具有工作<span class="italic">j</span>的员工具有工资<span class="italic">s</span> ，则您不能将<span class="italic">j</span>的最低工资更改为大于<span class="italic">s</span>的值或将<span class="italic">j</span>的最大工资更改为小于<span class="italic">s</span>的值。（这样做会使现有数据无效。）
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E__GUID-51C8BB99-7CBC-48E3-9129-3756F2355875">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="using-triggers.html#GUID-3744214A-861D-4C59-AD2D-95840B5B0871" title="触发器存储自动执行的PL / SQL单元（" fir=")=" ="">使用触发器</a> ，获取有关触发器的信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG290"></a><div class="props_rev_3"><a id="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" name="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E"></a><h5 id="TDDDG-GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" class="sect5"><span class="enumeration_section">9.4.3.1</span>创建触发器以实施第一个业务规则</h5>
                     <div>
                        <p>第一个业务规则是：以工作<span class="italic">j</span>的职员必须具备的最低和最高工资工作<span class="italic">j</span>之间的薪水。
                        </p>
                        <div class="section">
                           <p>将新行插入employees表或更新employees表的salary或job_id列时，可能会违反此规则。</p>
                           <p>要强制执行规则，请在版本控制视图员工上创建以下触发器。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">CREATE TRIGGER</span>语句。或者，您可以使用SQL Developer工具Create Trigger创建触发器。
                           </p><pre class="oac_no_warn" dir="ltr">创建或更换TRIGGER employees_aiufer插入或更新工资后，job_id ON员工每次行拒绝l_cnt NUMBER; <span class="bold">分享模式中的</span> BEGIN <span class="bold">LOCK TABLE工作;</span> - 确保作业不会更改 - 在以下查询期间。SELECT COUNT（*）INTO l_cnt FROM jobs WHERE job_id =：NEW.job_id AND：NEW.salary BETWEEN min_salary AND max_salary; IF（l_cnt &lt;&gt; 1）THEN RAISE_APPLICATION_ERROR（-20002，CASE WHEN：new.job_id =：old.job_id那么'工资修改无效'ELSE'工作重新分配使工资超出范围'END）;万一;结束; /</pre><p><code class="codeph">LOCK TABLE jobs IN SHARE MODE</code>可防止其他用户在触发器查询时更改表作业。在查询期间阻止对作业的更改是必要的，因为非阻塞读取会阻止触发器“看到”其他用户在触发器更改员工时对作业所做的更改（并防止这些用户“看到”触发器对员工所做的更改） 。
                           </p>
                           <p>在查询期间防止更改作业的另一种方法是在<span class="keyword">SELECT</span>语句中包含<span class="keyword">FOR UPDATE</span>子句。但是， <span class="keyword">SELECT FOR UPDATE</span>比<span class="keyword">SHARE MODE</span>中的<span class="keyword">LOCK TABLE作业</span>更多地限制并发。
                           </p>
                           <p><code class="codeph">LOCK TABLE jobs IN SHARE MODE</code>可防止其他用户更改作业，但不会阻止其他用户更改共享模式中的作业。对工作的改变可能比对员工的改变更为罕见。因此，在共享模式下锁定作业比在独占模式下锁定单行作业提供更多的并发性。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E__GUID-904717E7-1148-49F5-91B4-C4CF7DB78089">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<span class="keyword">在SHARE MODE中</span>锁定表的信息，请参见<a href="../adfns/sql-processing-for-application-developers.html#ADFNS99941" target="_blank"><span class="italic">“Oracle数据库开发指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关<span class="keyword">SELECT FOR UPDATE的</span>信息，请<a href="../lnpls/static-sql.html#LNPLS603" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="要创建触发器，请使用SQL Developer图形界面或DDL语句CREATE TRIGGER。">创建触发器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" title="使用SQL * Plus，本教程将介绍employees_pkg包的子程序如何工作。本教程还显示了触发器employees_aiufer和CHECK约束job_history_date_check的工作原理。">教程：显示employees_pkg子程序如何工作</a> ”</span>以查看employees_aiufer触发器的工作方式</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">创建触发器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG291"></a><div class="props_rev_3"><a id="GUID-9A964406-B333-4064-9171-A9CA69B71E75" name="GUID-9A964406-B333-4064-9171-A9CA69B71E75"></a><h5 id="TDDDG-GUID-9A964406-B333-4064-9171-A9CA69B71E75" class="sect5"><span class="enumeration_section">9.4.3.2</span>创建触发器以实施第二个业务规则</h5>
                     <div>
                        <p>第二个业务规则是：如果具有工作<span class="italic">j</span>的员工具有工资<span class="italic">s</span> ，则您不能将<span class="italic">j</span>的最低工资更改为大于<span class="italic">s</span>的值或将<span class="italic">j</span>的最大工资更改为小于<span class="italic">s</span>的值。（这样做会使现有数据无效。）
                        </p>
                        <div class="section">
                           <p>更新作业表的min_salary或max_salary列时，可能会违反此规则。</p>
                           <p>要强制执行规则，请在编辑视图作业上创建以下触发器。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">CREATE TRIGGER</span>语句。或者，您可以使用SQL Developer工具Create Trigger创建触发器。
                           </p><pre class="oac_no_warn" dir="ltr">创建或替换TRIGGER jobs_aufer更新min_salary，max_salary ON每个行的作业（NEW.min_salary&gt; OLD.min_salary或NEW.max_salary &lt;OLD.max_salary）DECLARE l_cnt NUMBER; BEGIN <span class="bold">LOCK TABLE员工分享模式;</span> SELECT COUNT（*）INTO l_cnt FROM employees WHERE job_id =：NEW.job_id AND salary NOT BETWEEN：NEW.min_salary and：NEW.max_salary; IF（l_cnt&gt; 0）THEN RAISE_APPLICATION_ERROR（-20001，'薪资更新会违反'|| l_cnt ||'现有员工记录'）;万一;结束; /</pre><p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code>阻止其他用户在触发器查询时更改表员工。在查询期间阻止对员工进行更改是必要的，因为非阻塞读取会阻止触发器“看到”其他用户在触发器更改作业时对员工所做的更改（并防止这些用户“看到”触发器对作业所做的更改） 。
                           </p>
                           <p>对于此触发器， <span class="keyword">SELECT FOR UPDATE</span> <span class="keyword">不能替代LOCK TABLE IN SHARE MODE</span> 。当您尝试更改此作业的工资范围时，此触发器必须阻止其他用户将工资更改为超出新范围。因此，触发器必须锁定employees表中具有此job_id的所有行， <span class="italic">并</span>锁定有人可以更新的所有行以具有此job_id。
                           </p>
                           <p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code>一种替代方法是使用DBMS_LOCK包创建具有job_id名称的命名锁，然后在employees和jobs表上使用触发器来使用此命名锁来防止并发更新。但是，使用DBMS_LOCK和多个触发器会对运行时性能产生负面影响。
                           </p>
                           <p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code>另一种替代方法是在employees表上创建一个触发器，对于每个已更改的员工行，该触发器会锁定作业中的相应作业行。但是，这种方法会导致对employees表的更新工作过多，这种情况经常发生。
                           </p>
                           <p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code>中比前面的备选方案更简单，并且对应用程序表的更改很少，并且可能在应用程序维护时发生，此时锁定表不会给用户带来不便。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9A964406-B333-4064-9171-A9CA69B71E75__GUID-DCBE8BE8-47EF-4A39-9B68-55767FBB19E0">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关使用<code class="codeph">SHARE</code> <code class="codeph">MODE</code>锁定表的信息，请<code class="codeph">SHARE</code> <a href="../adfns/sql-processing-for-application-developers.html#ADFNS99941" target="_blank"><span class="italic">“Oracle数据库开发指南</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_LOCK</code>包的信息，请<code class="codeph">DBMS_LOCK</code> <a href="../arpls/DBMS_LOCK.html#ARPLS021" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="要创建触发器，请使用SQL Developer图形界面或DDL语句CREATE TRIGGER。">创建触发器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" title="使用SQL * Plus，本教程将介绍admin_pkg包的子程序如何工作。该教程还显示了jobs_aufer触发器的工作原理。">教程：显示admin_pkg子程序的工作原理</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">创建触发器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TDDDG295"></a><div class="props_rev_3"><a id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396" name="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396"></a><h4 id="TDDDG-GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396" class="sect4"><span class="enumeration_section">9.4.4</span>创建序列</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396__GUID-8BE30CBA-E591-49C1-9DAF-4411EE43DC9C">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>要创建为新部门和新员工生成唯一主键的序列，请使用以下语句（按任意顺序）。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Sequence创建序列。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE SEQUENCE employees_sequence START WITH 210;创建SEQUENCE departments_sequence START WITH 275;</pre><p>为避免与将从示例模式HR中的表加载的数据冲突，employees_sequence和departments_sequence的起始编号必须分别超过employees.employee_id和departments.department_id的最大值。在<span class="q">“ <a href="developing-simple-database-application.html#GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24">加载数据</a> ”之后</span> ，此查询显示以下最大值：</p><pre class="oac_no_warn" dir="ltr">SELECT MAX（e.employee_id），MAX（d.department_id）FROM员工e，部门d;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">MAX（E.EMPLOYEE_ID）MAX（D.DEPARTMENT_ID）------------------ -------------------- 206 270</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396__GUID-948461FC-8EB0-429B-A716-EB8D90FE8201">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-474CBF2A-BDBF-498E-98DA-16B59E4D8050" title="序列是模式对象，您可以从中生成唯一的顺序值，这在您需要唯一主键时非常有用。序列通过伪列CURRVAL和NEXTVAL使用，它们分别返回序列的当前值和下一个值。">创建和管理序列</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG293"></a><a id="TDDDG292"></a><div class="props_rev_3"><a id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24" name="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24"></a><h4 id="TDDDG-GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24" class="sect4"><span class="enumeration_section">9.4.5</span>加载数据</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-DF76FD7E-5E87-4500-B80F-E156EE5F5820">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>使用示例模式HR中的表中的数据加载应用程序的表。</p>
                        <div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-7FAE29A2-9876-40E6-A724-22BD820DD3EF">
                           <p class="notep1">注意：</p>
                           <p>以下过程通过其编辑视图引用应用程序的表。</p>
                        </div>
                        <p>在以下过程中，您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-8FAD1AC2-B181-4AB5-9E30-48523B18CC7B">要将数据加载到表中：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用表HR.JOBS中的数据加载作业：</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO作业（job_id，job_title，min_salary，max_salary）SELECT job_id，job_title，min_salary，max_salary FROM HR.JOBS /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">创建了19行。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用表HR.DEPARTMENTS中的数据加载部门：</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO部门（department_id，department_name，manager_id）SELECT department_id，department_name，manager_id FROM HR.DEPARTMENTS /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">创建了27行。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用表HR.EMPLOYEES和HR.JOB_HISTORY中的数据加载员工，使用搜索的<span class="keyword">CASE</span>表达式和SQL函数从HR.phone_number和SQL函数获取employees.country_code和employees.phone_number以及从HR获取employees.job_start_date的标量子查询。 JOB_HISTORY：</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO员工（employee_id，first_name，last_name，email_addr，hire_date，country_code，phone_number，job_id，job_start_date，salary，manager_id，department_id）SELECT employee_id，first_name，last_name，email，hire_date，CASE WHEN phone_number LIKE'011。％'THEN'+'|| SUBSTR（phone_number，INSTR（phone_number，'。'）+ 1，INSTR（phone_number，'。'，1,2） -  INSTR（phone_number，'。'） -  1）ELSE' + 1'结束country_code，例如，当phone_number LIKE'011。％'那么SUBSTR（phone_number，INSTR（phone_number，'）。'，1,2）+1）ELSE phone_number END phone_number，job_id，NVL（（SELECT MAX（end_date + 1）FROM HR.JOB_HISTORY jh WHERE jh.employee_id = employees.employee_id），hire_date），salary，manager_id，department_id FROM HR.EMPLOYEES /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">创建了107行。</pre><div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-CFA34815-11D3-474B-8443-9D8CB5172243">
                                 <p class="notep1">注意：</p>
                                 <p>前面的<code class="codeph">INSERT</code>语句触发在<span class="q">“ <a href="developing-simple-database-application.html#GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" title="The first business rule is: An employee with job j must have a salary between the minimum and maximum salaries for job j.">创建触发器以强制执行第一个业务规则</a> ”中<a href="developing-simple-database-application.html#GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" title="第一个业务规则是：具有工作j的员工必须具有工作j的最低工资和最高工资之间的工资。">创建的触发器</a></span> 。
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用表HR.JOB_HISTORY中的数据加载job_history：</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO job_history（employee_id，job_id，start_date，end_date，department_id）SELECT employee_id，job_id，start_date，end_date，department_id FROM HR.JOB_HISTORY /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">创建了10行。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>提交更改：</span><div><pre class="oac_no_warn" dir="ltr">承诺;</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-ED1393DA-5B2B-4FE3-B6C3-BB2B28758BDB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="dml-and-transactions.html#GUID-E49519F6-5B93-43D9-852B-C6EB3DA8F1E1" title="INSERT语句将行插入现有表中。">关于INSERT声明</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="two-day-developer-intro.html#GUID-F55D4815-FCD8-4075-AEBC-BC2B57A47F9E" title="HR示例模式可以与Oracle数据库一起安装。此架构包含有关员工 - 部门，位置，工作历史和相关信息的信息。与所有模式一样，HR具有表，视图，索引，过程，函数和其他属性。本文档中的示例和教程使用模式。">关于样本模式HR</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="connecting-exploring-database.html#GUID-B7BACC62-95F0-42D9-BA26-882FE5268A0F" title="CASE表达式允许您使用IF ...然后 ...SQL语句中的ELSE逻辑，无需调用子程序。有两种CASE表达式，简单和搜索。">在查询中使用CASE表达式</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="connecting-exploring-database.html#GUID-703425FD-82B2-400F-AA87-C48604CE89FF" title="与NULL相关的函数有助于处理NULL值。">在查询中使用NULL相关函数</a> ”</span>以获取有关<code class="codeph">NVL</code>函数的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">SQL</code>函数的信息，请<a href="../sqlrf/Functions.html#SQLRF006" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG294"></a><div class="props_rev_3"><a id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90" name="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90"></a><h4 id="TDDDG-GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90" class="sect4"><span class="enumeration_section">9.4.6</span>添加外键约束</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90__GUID-6F6428F6-E766-4207-9294-2CA59329329D">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>既然表部门和员工包含数据，请使用以下<span class="keyword">ALTER TABLE</span>语句添加外键约束。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具添加外键添加约束。
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE部门#ADD CONSTRAINT dept_to_emp_fk FOREIGN KEY（manager_id）REFERENCES employees＃;</pre><p>如果在部门＃和employees＃包含数据之前添加此外键约束，则在尝试使用数据加载其中任何一个时会出现此错误：</p><pre class="oac_no_warn" dir="ltr">ORA-02291：违反了完整性约束（APP_DATA.JOB_HIST_TO_DEPT_FK） - 未找到父密钥</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90__GUID-3821D366-62C7-44D5-B5F1-E11B6250B9FC">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-A951A80F-7774-4620-8497-12E7DFFB663E" title="本教程介绍如何使用SQL Developer工具和ALTER TABLE语句向现有表添加约束。">教程：向现有表添加约束</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG296"></a><div class="props_rev_3"><a id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76" name="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76"></a><h4 id="TDDDG-GUID-4A22470D-2C45-44A9-940F-E39771CCCE76" class="sect4"><span class="enumeration_section">9.4.7</span>向用户授予模式对象权限</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76__GUID-C27129B1-CD15-4231-A823-3F79D58A2C5A">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>要向用户授予权限，请使用SQL语句<span class="keyword">GRANT</span> 。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">GRANT</span>语句。
                        </p>
                        <p><span class="italic">仅</span>向app_code授予创建employees_pkg所需的权限：</p><pre class="oac_no_warn" dir="ltr">GRANT SELECT，INSERT，UPDATE，DELETE ON employees TO app_code; GRANT SELECT ON部门TO app_code; GRANT选择作业到app_code; GRANT SELECT，INSERT on job_history TO app_code; GRANT SELECT ON employees_sequence TO app_code;</pre><p><span class="italic">仅</span>向app_admin授予创建admin_pkg所需的权限：</p><pre class="oac_no_warn" dir="ltr">GRANT SELECT，INSERT，UPDATE，DELETE ON job to app_admin; GRANT SELECT，INSERT，UPDATE，DELETE ON部门TO app_admin; GRANT SELECT ON employees_sequence TO app_admin; GRANT SELECT ON departments_sequence TO app_admin;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76__GUID-A6CEEE31-96F2-4E10-B9D7-FEE739956BF5">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">GRANT</code>语句的信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG298"></a><a id="TDDDG297"></a><div class="props_rev_3"><a id="GUID-A814459E-682F-44DB-8421-CB960B924F2D" name="GUID-A814459E-682F-44DB-8421-CB960B924F2D"></a><h3 id="TDDDG-GUID-A814459E-682F-44DB-8421-CB960B924F2D" class="sect3"><span class="enumeration_section">9.5</span>创建employees_pkg包</h3>
               <div>
                  <p>本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-A814459E-682F-44DB-8421-CB960B924F2D__GUID-356AFDC3-BF42-4D24-999F-CA49444090CA">要创建employees_pkg包：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>以用户app_code身份连接到Oracle数据库。</span><div>
                           <p>有关说明，请参阅<span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus</a></span> <span class="q"><a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">连接到Oracle数据库</a></span> <span class="q">”</span>或<span class="q">“ <a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer是一个客户端程序，您可以使用它来访问Oracle数据库。">从SQL Developer连接到Oracle数据库</a> ”</span> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建这些同义词：</span><div><pre class="oac_no_warn" dir="ltr">为app_data.employees创建或替换SYNONYM <span class="bold">员工</span> ;为app_data.departments创建或替换SYNONYM <span class="bold">部门</span> ;为app_data.jobs创建或替换SYNONYM <span class="bold">作业</span> ;创建或替换SYNONYM <span class="bold">job_history</span> FOR app_data.job_history;</pre><p>您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">CREATE SYNONYM</span>语句。或者，您可以使用SQL Developer工具Create Synonym创建同义词。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建包规范。</span></li>
                     <li class="stepexpand"><span>创建包体。</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-47D45AFD-E557-420A-8757-E04F23FA896E">为employees_pkg创建包规范</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB">为employees_pkg创建包体</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-06901C50-69DC-4D42-9074-FB40FF8356EA">教程：显示employees_pkg子程序的工作原理</a><br>使用SQL * Plus，本教程将介绍employees_pkg包的子程序如何工作。本教程还显示了触发器employees_aiufer和<span class="keyword">CHECK</span>约束job_history_date_check的工作原理。
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25">向Exe_user和app_admin_user授予执行权限</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C">教程：将get_job_history调用为app_user或app_admin_user</a><br>使用SQL * Plus，本教程将演示如何以用户app_user（通常是管理员）或app_admin_user（应用程序管理员）的形式调用子程序app_code.employees_pkg.get_job_history。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A814459E-682F-44DB-8421-CB960B924F2D__GUID-7FBB6D7F-1955-48AA-A486-E0D678ADA6C7">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-75E0379C-171F-408D-8DAE-7EC55982F83F" title="要创建同义词，请使用SQL Developer工具Create Database Synonym或DDL语句CREATE SYNONYM。">创建同义词</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-711EE477-C725-40BE-A82B-1880EECBF912" title="包是一个PL / SQL单元，由相关的子程序和它们使用的声明游标和变量组成。Oracle建议您将子程序放入包中。">关于套餐</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG299"></a><div class="props_rev_3"><a id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E" name="GUID-47D45AFD-E557-420A-8757-E04F23FA896E"></a><h4 id="TDDDG-GUID-47D45AFD-E557-420A-8757-E04F23FA896E" class="sect4"><span class="enumeration_section">9.5.1</span>为employees_pkg创建包规范</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E__GUID-E0FFAA2B-6CF4-4D32-A4F9-61FF445CA383">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_code身份连接到Oracle数据库。</p>
                        </div>
                        <p>要为employees_pkg创建包规范（管理器的API），请使用以下<span class="keyword">CREATE PACKAGE</span>语句。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Package创建包。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换包裹employees_pkg AS程序get_employees_in_dept（p_deptno IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）;程序get_job_history（p_employee_id IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）;程序show_employee（p_employee_id IN employees.employee_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）; PROCEDURE update_salary（p_employee_id IN employees.employee_id％TYPE，p_new_salary IN employees.salary％TYPE）; PROCEDURE change_job（p_employee_id IN employees.employee_id％TYPE，p_new_job IN employees.job_id％TYPE，p_new_salary IN employees.salary％TYPE：= NULL，p_new_dept IN employees.department_id％TYPE：= NULL）; END employees_pkg; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E__GUID-464ADE65-571A-447B-99A1-18BFC4320C8C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">CREATE PACKAGE</span>语句的信息，请<a href="../lnpls/CREATE-PACKAGE-statement.html#LNPLS01371" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG300"></a><div class="props_rev_3"><a id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB" name="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB"></a><h4 id="TDDDG-GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB" class="sect4"><span class="enumeration_section">9.5.2</span>为employees_pkg创建包体</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB__GUID-91AC2F7C-F396-460E-884E-17C040FF751B">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_code身份连接到Oracle数据库。</p>
                        </div>
                        <p>要为employees_pkg（管理器的API）创建包体，请使用以下<span class="keyword">CREATE PACKAGE BODY</span>语句。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Body创建包。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换程序包employees_pkg AS程序get_employees_in_dept（p_deptno IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）IS l_cursor SYS_REFCURSOR; BEGIN OPEN p_result_set FOR SELECT e.employee_id，e.first_name || ''|| e.last_name名称，TO_CHAR（e.hire_date，'Dy Mon ddth，yyyy'）hire_date，j.job_title，m.first_name || ''|| m.last_name manager，d.department_name FROM employees e INNER JOIN jobs j ON（e.job_id = j.job_id）LEFT OUTER JOIN employees m ON（e.manager_id = m.employee_id）INNER JOIN departments d ON（e.department_id = d.department_id）WHERE e.department_id = p_deptno; END get_employees_in_dept;程序get_job_history（p_employee_id IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）是开始打开p_result_set FOR SELECT e。First_name || ''|| e.last_name name，j.job_title，e.job_start_date start_date，TO_DATE（NULL）end_date FROM employees e INNER JOIN jobs j ON（e.job_id = j.job_id）WHERE e.employee_id = p_employee_id UNION ALL SELECT e。First_name || ''|| e.last_name name，j.job_title，jh.start_date，jh.end_date FROM employees e INNER JOIN job_history jh ON（e.employee_id = jh.employee_id）INNER JOIN jobs j ON（jh.job_id = j.job_id）WHERE e。 employee_id = p_employee_id ORDER BY start_date DESC; END get_job_history;程序show_employee（p_employee_id IN employees.employee_id％TYPE，p_result_set IN OUT sys_refcursor）IS BEGIN OPEN p_result_set FOR SELECT * FROM（SELECT TO_CHAR（e.employee_id）employee_id，e.first_name ||''|| e.last_name name，e。 email_addr，TO_CHAR（e.hire_date，'dd-mon-yyyy'）hire_date，e.country_code，e.phone_number，j.job_title，TO_CHAR（e.job_start_date，'dd-mon-yyyy'）job_start_date，to_char（e。薪水），m.first_name ||''|| m.last_name manager，d.department_name FROM employees e INNER JOIN jobs j on（e.job_id = j.job_id）RIGHT OUTER JOIN员工m ON（m.employee_id = e .manager_id）INNER JOIN部门d ON（e.department_id = d.department_id）WHERE e.employee_id = p_employee_id）UNPIVOT（属性值为（employee_id，name，email_addr，hire_date，country_code，phone_number，job_title，job_start_date，salary，manager） ， 部门名称） ）; END show_employee; PROCEDURE update_salary（p_employee_id IN employees.employee_id％type，p_new_salary IN employees.salary％type）IS BEGIN UPDATE employees SET salary = p_new_salary WHERE employee_id = p_employee_id; END update_salary; PROCEDURE change_job（p_employee_id IN employees.employee_id％TYPE，p_new_job IN employees.job_id％TYPE，p_new_salary IN employees.salary％TYPE：= NULL，p_new_dept IN employees.department_id％TYPE：= NULL）IS BEGIN INSERT INTO job_history（employee_id，start_date ，end_date，job_id，department_id）SELECT employee_id，job_start_date，TRUNC（SYSDATE），job_id，department_id FROM employees WHERE employee_id = p_employee_id; UPDATE员工SET job_id = p_new_job，department_id = NVL（p_new_dept，department_id），薪水= NVL（p_new_salary，薪水），job_start_date = TRUNC（SYSDATE）WHERE employee_id = p_employee_id; END change_job; END employees_pkg; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB__GUID-447B81C2-0231-4435-A5A8-7005A9A5D8FB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">CREATE PACKAGE BODY</span>语句的信息，请<a href="../lnpls/CREATE-PACKAGE-BODY-statement.html#LNPLS01372" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG302"></a><a id="TDDDG301"></a><div class="props_rev_3"><a id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" name="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA"></a><h4 id="TDDDG-GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" class="sect4"><span class="enumeration_section">9.5.3</span>教程：显示employees_pkg子程序的工作方式</h4>
                  <div>
                     <p>使用SQL * Plus，本教程将介绍employees_pkg包的子程序如何工作。本教程还显示了触发器employees_aiufer和<span class="keyword">CHECK</span>约束job_history_date_check的工作原理。
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-15417D4B-4187-4725-A86A-70458903A76E">
                           <p class="notep1">注意：</p>
                           <p>您必须以SQL * Plus中的用户app_code连接到Oracle数据库。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-4D8E8C84-C4CD-40F7-8DEA-6CC3CDF5D631">要使用SQL * Plus来显示employees_pkg子程序的工作方式：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用格式化命令可提高输出的可读性。例如：</span><div><pre class="oac_no_warn" dir="ltr">SET LINESIZE 80 SET RECSEP WRAPPED SET RECSEPCHAR“=”列名称格式A15 WORD_WRAPPED COLUMN HIRE_DATE FORMAT A20 WORD_WRAPPED COLUMN DEPARTMENT_NAME格式A10 WORD_WRAPPED COLUMN JOB_TITLE格式A29 WORD_WRAPPED COLUMN MANAGER FORMAT A11 WORD_WRAPPED</pre></div>
                        </li>
                        <li class="stepexpand"><span>为子程序参数<span class="parmname" translate="no">p_result_set</span>的值声明一个绑定变量：</span><div><pre class="oac_no_warn" dir="ltr">变量c REFCURSOR</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示部门90中的员工：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_employees_in_dept（90，：c）</span> ;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">EMPLOYEE_ID姓名HIRE_DATE JOB_TITLE ----------- --------------- -------------------- --------------------------经理部----------- ---------- 100 Steven King Tue Jun 2003年6月17日总统执行官========================================= ================================== 102 Lex De Haan 2001年1月13日星期六行政副总裁Steven King执行官= ================================================== ======================== 101 Neena Kochhar 2005年9月21日星期三行政副总裁Steven King执行官============ ================================================== =============</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示员工101的工作历史记录：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_job_history（101，：c）</span> ;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">NAME JOB_TITLE START_DAT END_DATE --------------- -----------------------------  - ------- ------ Neena Kochhar管理副总裁16-MAR-05 Neena Kochhar会计经理28-OCT-01 15-MAR-05 Neena Kochhar公共会计师21-SEP-97 27 - 辛01</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示有关员工101的一般信息：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.show_employee（101，：c）</span> ;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">属性值--------------- --------------------------------- ------------- EMPLOYEE_ID 101姓名Neena Kochhar EMAIL_ADDR NKOCHHAR HIRE_DATE 21-sep-2005 COUNTRY_CODE +1 PHONE_NUMBER 515.123.4568 <span class="bold">JOB_TITLE管理副总裁</span> JOB_START_DATE 16-mar-05 <span class="bold">SALARY 17000</span>经理Steven King DEPARTMENT_NAME执行选择了11行。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示有关工作管理副总裁的信息：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_title ='行政副总裁';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">JOB_ID JOB_TITLE MIN_SALARY MAX_SALARY ---------- ----------------------------- ------- --- ---------- AD_VP管理副总裁15000 30000</pre></div>
                        </li>
                        <li class="stepexpand"><span>尝试为员工101提供超出工作范围的新薪水：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.update_salary（101,30001）</span> ;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC employees_pkg.update_salary（101,30001）; BEGIN employees_pkg.update_salary（101,30001）;结束; *第1行的错误：ORA-20002：工资修改无效ORA-06512：在“APP_DATA.EMPLOYEES_AIUFER”，第13行<span class="bold">ORA-04088：执行触发'APP_DATA.EMPLOYEES_AIUFER'ORA</span> -06512 <span class="bold">期间出错</span> ：at“APP_CODE.EMPLOYEES_PKG” ，第77行ORA-06512：第1行</pre></div>
                        </li>
                        <li class="stepexpand"><span>为员工101提供工作范围内的新工资，并再次显示有关她的一般信息：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.update_salary（101,18000）</span> ; EXEC <span class="bold">employees_pkg.show_employee（101，：c）</span> ;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">属性值--------------- --------------------------------- ------------- EMPLOYEE_ID 101姓名Neena Kochhar EMAIL_ADDR NKOCHHAR HIRE_DATE 21-sep-2005 COUNTRY_CODE +1 PHONE_NUMBER 515.123.4568 JOB_TITLE行政副总裁JOB_START_DATE 16-mar-05薪酬<span class="bold">18000</span>经理Steven King DEPARTMENT_NAME执行选择了11行。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>将员工101的工作改为当前工作，薪水较低：</span><div><pre class="oac_no_warn" dir="ltr">EXEC employees_pkg.change_job（101，'AD_VP'，17500,90）;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; exec employees_pkg.change_job（101，'AD_VP'，17500,90）; BEGIN employees_pkg.change_job（101，'AD_VP'，17500,80）;结束; *第1行的错误： <span class="bold">ORA-02290：检查约束（APP_DATA.JOB_HISTORY_DATE_CHECK）违反</span> ORA-06512：在“APP_CODE.EMPLOYEES_PKG”，第101行ORA-06512：在第1行</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示有关员工的信息。（注意，上一步中的语句没有改变工资;它是18000，而不是17500.）</span><div><pre class="oac_no_warn" dir="ltr">exec employees_pkg.show_employee（101，：c）;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">属性值--------------- --------------------------------- ------------- EMPLOYEE_ID 101姓名Neena Kochhar EMAIL_ADDR NKOCHHAR HIRE_DATE 21-sep-2005 COUNTRY_CODE +1 PHONE_NUMBER 515.123.4568 JOB_TITLE管理副总裁JOB_START_DAM 10-mar-2015 SALARY 18000 MANAGER Steven King DEPARTMENT_NAME Executive选择了11行。</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-2A2FBCBF-82F3-4B96-9FB2-B5B7A7C17CC5">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../sqpug/index.html" target="_blank"><span class="italic">SQL * Plus用户指南和参考</span></a>有关SQL * Plus命令的信息</p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG303"></a><div class="props_rev_3"><a id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25" name="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25"></a><h4 id="TDDDG-GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25" class="sect4"><span class="enumeration_section">9.5.4</span>向app_user和app_admin_user授予执行权限</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25__GUID-5438A8F4-1133-4B95-9E05-9ADA07FB083D">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_code身份连接到Oracle数据库。</p>
                        </div>
                        <p>要将包employees_pkg的执行权限授予app_user（通常是管理员）和app_admin_user（应用程序管理员），请使用以下<span class="keyword">GRANT</span>语句（按任意顺序）。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。
                        </p><pre class="oac_no_warn" dir="ltr">对employee_pkg进行GRANT EXECUTE TO app_user;对employee_pkg进行GRANT EXECUTE TO app_admin_user;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25__GUID-B76FCD24-B452-4002-810F-C633691A7071">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">应用程序的架构</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">GRANT</span>语句的信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG305"></a><a id="TDDDG304"></a><div class="props_rev_3"><a id="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C" name="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C"></a><h4 id="TDDDG-GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C" class="sect4"><span class="enumeration_section">9.5.5</span>教程：将get_job_history调用为app_user或app_admin_user</h4>
                  <div>
                     <p>使用SQL * Plus，本教程将演示如何以用户app_user（通常是管理员）或app_admin_user（应用程序管理员）的形式调用子程序app_code.employees_pkg.get_job_history。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C__GUID-BF3CEDB3-2A36-4530-8E56-C554BD3F7DA5">要以app_user或app_admin_user调用employees_pkg.get_job_history：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>从SQL * Plus以用户app_user或app_admin_user连接到Oracle数据库。</span><div>
                              <p>有关说明，请参阅<span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus连接到Oracle数据库</a> ”</span> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建此同义词：</span><div><pre class="oac_no_warn" dir="ltr">创建SYNONYM <span class="bold">employees_pkg</span> FOR app_code.employees_pkg;</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示员工101的工作历史记录：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_job_history（101，：c）</span> ;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">NAME JOB_TITLE START_DAT END_DATE --------------- -----------------------------  - ------- ----- Neena Kochhar管理副总裁16-MAR-05 15-MAY-12 Neena Kochhar会计经理28-OCT-01 15-MAR-05 Neena Kochhar Public Accountant 21 -SEP-97 27-OCT-01</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG307"></a><a id="TDDDG306"></a><div class="props_rev_3"><a id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" name="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE"></a><h3 id="TDDDG-GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" class="sect3"><span class="enumeration_section">9.6</span>创建admin_pkg包</h3>
               <div>
                  <p>本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE__GUID-F5720039-919D-4849-9089-42FBC1DF555D">要创建admin_pkg包：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>以用户app_admin身份连接到Oracle数据库。</span><div>
                           <p>有关说明，请参阅<span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus</a></span> <span class="q"><a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">连接到Oracle数据库</a></span> <span class="q">”</span>或<span class="q">“ <a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer是一个客户端程序，您可以使用它来访问Oracle数据库。">从SQL Developer连接到Oracle数据库</a> ”</span> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建这些同义词：</span><div><pre class="oac_no_warn" dir="ltr">为app_data.departments创建SYNONYM <span class="bold">部门</span> ;为app_data.jobs创建SYNONYM <span class="bold">作业</span> ;创建SYNONYM <span class="bold">departments_sequence</span> FOR app_data.departments_sequence;</pre><p>您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">CREATE SYNONYM</span>语句。或者，您可以使用SQL Developer工具Create Synonym创建表。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建包规范。</span></li>
                     <li class="stepexpand"><span>创建包体。</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3">为admin_pkg创建包规范</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B">为admin_pkg创建包体</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80">教程：显示admin_pkg子程序的工作原理</a><br>使用SQL * Plus，本教程将介绍admin_pkg包的子程序如何工作。该教程还显示了jobs_aufer触发器的工作原理。
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674">将执行权限授予app_admin_user</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E">教程：将add_department调用为app_admin_user</a><br>使用SQL * Plus，本教程将介绍如何以用户app_admin_user（应用程序管理员）的身份调用app_admin.admin_pkg.add_department函数，然后查看有关新部门的信息。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE__GUID-9DDB6CB2-B282-47CB-9697-C3304D728AC2">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-BE4C6796-7476-47E3-9F25-224135863A96" title="同义词是另一个模式对象的别名。使用同义词的一些原因是安全性（例如，隐藏对象的所有者和位置）和便利性。">创建和管理同义词</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-711EE477-C725-40BE-A82B-1880EECBF912" title="包是一个PL / SQL单元，由相关的子程序和它们使用的声明游标和变量组成。Oracle建议您将子程序放入包中。">关于套餐</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG308"></a><div class="props_rev_3"><a id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3" name="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3"></a><h4 id="TDDDG-GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3" class="sect4"><span class="enumeration_section">9.6.1</span>创建admin_pkg的包规范</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3__GUID-CE8AF502-B158-4E8F-B491-023C9F7B07A7">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_admin身份连接到Oracle数据库。</p>
                        </div>
                        <p>要为应用程序管理员创建admin_pkg的包规范，请使用以下<span class="keyword">CREATE PACKAGE</span>语句。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Package创建包。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换包装admin_pkg AS程序update_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE：= NULL，p_min_salary IN jobs.min_salary％TYPE：= NULL，p_max_salary IN jobs.max_salary％TYPE：= NULL） ;程序add_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE，p_min_salary IN jobs.min_salary％TYPE，p_max_salary IN jobs.max_salary％TYPE）; PROCEDURE update_department（p_department_id IN departmentss.department_id％TYPE，p_department_name IN departments.department_name％TYPE：= NULL，p_manager_id IN departments.manager_id％TYPE：= NULL，p_update_manager_id IN BOOLEAN：= FALSE）;功能add_department（p_department_name IN departments.department_name％TYPE，p_manager_id IN departments.manager_id％TYPE）RETURN departments.department_id％TYPE; END admin_pkg; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3__GUID-AA77F641-4821-4394-85B2-CF57C89C0502">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">CREATE PACKAGE</span>语句的信息，请<a href="../lnpls/CREATE-PACKAGE-statement.html#LNPLS01371" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">创建admin_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG309"></a><div class="props_rev_3"><a id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B" name="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B"></a><h4 id="TDDDG-GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B" class="sect4"><span class="enumeration_section">9.6.2</span>为admin_pkg创建包体</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B__GUID-8EE74AED-913E-4C38-9729-A4DB62D6F683">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_admin身份连接到Oracle数据库。</p>
                        </div>
                        <p>要为应用程序管理员的API创建admin_pkg的程序包主体，请使用以下<span class="keyword">CREATE PACKAGE BODY</span>语句。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Body创建包。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换程序包admin_pkg AS程序update_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE：= NULL，p_min_salary IN jobs.min_salary％TYPE：= NULL，p_max_salary IN jobs.max_salary％TYPE：= NULL ）是BEGIN UPDATE作业SET job_title = NVL（p_job_title，job_title），min_salary = NVL（p_min_salary，min_salary），max_salary = NVL（p_max_salary，max_salary）WHERE job_id = p_job_id; END update_job;程序add_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE，p_min_salary IN jobs.min_salary％TYPE，p_max_salary IN jobs.max_salary％TYPE）IS BEGIN INSERT INTO jobs（job_id，job_title，min_salary，max_salary）VALUES （p_job_id，p_job_title，p_min_salary，p_max_salary）; END add_job;过程update_department（p_department_id IN departmentss.department_id％TYPE，p_department_name IN departments.department_name％TYPE：= NULL，p_manager_id IN departments.manager_id％TYPE：= NULL，p_update_manager_id IN BOOLEAN：= FALSE）IS BEGIN IF（p_update_manager_id）THEN UPDATE departments SET department_name = NVL（p_department_name，department_name），manager_id = p_manager_id WHERE department_id = p_department_id; ELSE UPDATE部门SET department_name = NVL（p_department_name，department_name）WHERE department_id = p_department_id;万一; END update_department;功能add_department（p_department_name IN departments.department_name％TYPE，p_manager_id IN departments.manager_id％TYPE）RETURN departments.department_id％TYPE IS l_department_id departments.department_id％TYPE; BEGIN INSERT INTO部门（department_id，department_name，manager_id）VALUES（departments_sequence。NEXTVAL，p_department_name，p_manager_id）RETURNING department_id INTO l_department_id;返回l_department_id; END add_department; END admin_pkg; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B__GUID-AC43A0C2-2997-4ACA-A23A-F690A79A62E7">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">CREATE PACKAGE BODY</span>语句的信息，请<a href="../lnpls/CREATE-PACKAGE-BODY-statement.html#LNPLS01372" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">创建admin_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG311"></a><a id="TDDDG310"></a><div class="props_rev_3"><a id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" name="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80"></a><h4 id="TDDDG-GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" class="sect4"><span class="enumeration_section">9.6.3</span>教程：显示admin_pkg子程序的工作原理</h4>
                  <div>
                     <p>使用SQL * Plus，本教程将介绍admin_pkg包的子程序如何工作。该教程还显示了jobs_aufer触发器的工作原理。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-79A8DC2E-951F-474E-814D-BDABAFB5605A">
                           <p class="notep1">注意：</p>
                           <p>您必须以SQL * Plus中的用户app_admin身份连接到Oracle数据库。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-ED3BC188-D0A6-4B8B-B27F-9845451031B1">要显示admin_pkg子程序的工作方式：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>显示ID为AD_VP的作业信息：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_id ='AD_VP';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">JOB_ID JOB_TITLE MIN_SALARY MAX_SALARY ---------- -----------------------------------  - --------- ---------- AD_VP管理副总裁15000 30000</pre></div>
                        </li>
                        <li class="stepexpand"><span>增加此作业的最高工资并再次显示相关信息：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_job（'AD_VP'，p_max_salary =&gt; 31000）</span> ; SELECT * FROM jobs WHERE job_id ='AD_VP';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">JOB_ID JOB_TITLE MIN_SALARY MAX_SALARY ---------- -----------------------------------  - --------- ---------- AD_VP管理副总裁15000 <span class="bold">31000</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示ID为IT_PROG的作业信息：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_id ='IT_PROG';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">JOB_ID JOB_TITLE MIN_SALARY MAX_SALARY ---------- -----------------------------------  - --------- ---------- IT_PROG Programmer 4000 10000</pre></div>
                        </li>
                        <li class="stepexpand"><span>尝试增加这份工作的最高工资：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_job（'IT_PROG'，p_max_salary =&gt; 4001）</span> ;</pre><p>结果（来自SQL * Plus）：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC admin_pkg.update_job（'IT_PROG'，p_max_salary =&gt; 4001）; BEGIN admin_pkg.update_job（'IT_PROG'，p_max_salary =&gt; 4001）;结束; *第1行的错误：ORA-20001：工资更新将违反5条现有员工记录ORA-06512：在“APP_DATA.JOBS_AUFER”第12行<span class="bold">ORA-04088：执行触发器'APP_DATA.JOBS_AUFER'时出错'</span> ORA-06512：at “APP_ADMIN.ADMIN_PKG”，第10行ORA-06512：第1行</pre></div>
                        </li>
                        <li class="stepexpand"><span>添加新作业并显示相关信息：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.add_job（'AD_CLERK'，'Administrative Clerk'，3000,7000）</span> ; SELECT * FROM jobs WHERE job_id ='AD_CLERK';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">JOB_ID JOB_TITLE MIN_SALARY MAX_SALARY ---------- -----------------------------------  - --------- ---------- AD_CLERK行政文员3000 7000</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示有关部门100的信息：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM departments WHERE department_id = 100;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME MANAGER_ID ------------- ------------------------------ ---- ------ 100财经108</pre></div>
                        </li>
                        <li class="stepexpand"><span>更改部门100的名称和经理并显示有关它的信息：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_department（100，'Financial Services'）</span> ; EXEC <span class="bold">admin_pkg.update_department（100，p_manager_id =&gt; 111，</span> <span class="bold">p_update_manager_id =&gt; true）;</span> SELECT * FROM departments WHERE department_id = 100;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME MANAGER_ID ------------- ------------------------------ ---- ------ 100金融服务111</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-CD1620D4-AE22-4751-A4E6-16DA27601024">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">创建admin_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG312"></a><div class="props_rev_3"><a id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674" name="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674"></a><h4 id="TDDDG-GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674" class="sect4"><span class="enumeration_section">9.6.4</span>向app_admin_user授予执行权限</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674__GUID-09FA5224-1755-4EB3-AEDC-097799482FBA">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_admin身份连接到Oracle数据库。</p>
                        </div>
                        <p>要将包admin_pkg的执行权限授予app_admin_user（应用程序管理员），请使用以下<span class="keyword">GRANT</span>语句。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。
                        </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON admin_pkg TO app_admin_user;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674__GUID-4E3B9BAE-26AA-4598-B04E-6B70E6723D84">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">应用程序的架构</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">GRANT</span>语句的信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">创建admin_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG314"></a><a id="TDDDG315"></a><a id="TDDDG313"></a><div class="props_rev_3"><a id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E" name="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E"></a><h4 id="TDDDG-GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E" class="sect4"><span class="enumeration_section">9.6.5</span>教程：将add_department调用为app_admin_user</h4>
                  <div>
                     <p>使用SQL * Plus，本教程将介绍如何以用户app_admin_user（应用程序管理员）的身份调用app_admin.admin_pkg.add_department函数，然后查看有关新部门的信息。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E__GUID-5A508C63-01C3-4712-B5F1-77DD9B1179CC">要以app_admin_user身份调用admin_pkg.add_department：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>从SQL * Plus以用户app_admin_user身份连接到Oracle数据库。</p>
                              <p>有关说明，请参阅<span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus连接到Oracle数据库</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>创建此同义词：</p><pre class="oac_no_warn" dir="ltr">创建SYNONYM <span class="bold">admin_pkg</span> FOR app_admin.admin_pkg;</pre></li>
                           <li>
                              <p>为函数的返回值声明一个绑定变量：</p><pre class="oac_no_warn" dir="ltr">变量n NUMBER</pre></li>
                           <li>
                              <p>添加一个没有经理的新部门：</p><pre class="oac_no_warn" dir="ltr">执行：n：= admin_pkg.add_department（'新部门'，NULL）;</pre></li>
                           <li>
                              <p>显示新部门经理的ID：</p><pre class="oac_no_warn" dir="ltr">打印：n</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">N ---------- 275</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E__GUID-A66A740F-A087-4CD3-A602-1AA812967B61">要查看有关新部门的信息：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以用户app_admin身份连接到Oracle数据库。</span></li>
                        <li class="stepexpand"><span>显示有关新部门的信息：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM departments WHERE department_name LIKE'New department％';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME MANAGER_ID ------------- ------------------------------ ---- ------ 275新系</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">创建admin_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05918.oracle-label-security-using-oracle-internet-directory.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can use Oracle Label Security with Oracle Internet Directory."></meta>
      <meta name="description" content="You can use Oracle Label Security with Oracle Internet Directory."></meta>
      <title>使用Oracle Internet Directory的Oracle Label Security</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="You can use Oracle Label Security with Oracle Internet Directory."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="label-security-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-11T09:39:52-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96303-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="working-with-labeled-data.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-label-security-tutorials.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Label Security Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OLSAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="working-with-labeled-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-label-security-tutorials.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part2.html" property="item" typeof="WebPage"><span property="name">使用Oracle Label Security功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle Internet Directory的Oracle Label Security</li>
            </ol>
            <a id="GUID-31FF897D-3922-4F70-BE24-4120915454B6" name="GUID-31FF897D-3922-4F70-BE24-4120915454B6"></a><a id="OLSAG026"></a>
            
            <h2 id="OLSAG-GUID-31FF897D-3922-4F70-BE24-4120915454B6" class="sect2"><span class="enumeration_chapter">7</span>使用Oracle Internet Directory的Oracle Label Security</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='oracle-label-security-using-oracle-internet-directory'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>您可以将Oracle Label Security与Oracle Internet Directory一起使用。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E">关于Oracle Internet Directory上的标签管理</a><br>在集中式LDAP存储库中管理Oracle Label Security元数据可带来许多好处。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1">配置启用Oracle Internet Directory的标签安全性</a><br>您可以配置启用Oracle Internet Directory的Oracle Label Security。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-EC12CA4B-91A6-41E5-8B08-3C285F9F7D4E">Oracle Label安全配置文件</a><br>用户配置文件是一组用户授权和权限。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-4EAFD2E3-A650-4415-9256-92533F4F5C36">标签安全性使用目录时的集成功能</a><br>Oracle Label Security和Oracle Internet Directory的集成支持多种功能。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558">Oracle Internet Directory中的Oracle Label Security策略属性</a><br>在Oracle Internet Directory中，与Oracle相关的元数据存储在<code class="codeph">cn=OracleContext</code> 。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A28C8926-2C4D-44D7-A71A-FEAD20C7353D">在启用目录的标签安全性中订阅策略</a><br>在启用Oracle Internet Directory的Oracle Label Security中，必须先订阅策略才能应用该策略（通过<code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code>或<code class="codeph">SA_POLICY_ADMIN.APPLY_SCHEMA_POLICY</code> ）。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-76952FF1-DC68-412B-816F-A48C5F472E40">新数据标签创建的限制</a><br>当Oracle Label Security与Oracle Internet Directory一起使用时，必须在目录中预定义数据标签。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A15F11C7-6A4D-4FF9-8F24-80A4FBCCBF83">Oracle Internet Directory和Oracle Label Security的管理员职责</a><br>策略中列出的管理员是有权执行特定于olicy的管理任务的人员。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-9EBE7D60-7300-4CF4-A631-FA80CC2FB40F">引导数据库</a><br>使用Oracle Internet Directory注册新数据库后，可以在该数据库上安装启用Oracle Internet Directory的Oracle Label Security。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B">同步数据库和Oracle Internet Directory</a><br>使用Oracle Label Security安装和配置Oracle Internet Directory后，应将数据库与OID和OLS同步。</li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7">安全角色和允许的操作</a><br>Oracle Label Security允许Oracle Internet Directory的特定任务和访问级别，包括对启用目录的OLS策略创建者的限制。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-4961D225-DE89-4B96-A183-EA9D837C994F">使用OLS启用OID时取代PL / SQL语句</a><br>使用Oracle Label Security启用Oracle Internet Directory时，有几个过程被取代。
                  </li>
                  <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-1083B9CB-3D22-42B4-AA32-A817A3426AF5">策略管理员的Oracle Label Security过程</a><br><code class="codeph">SA_POLICY_ADMIN</code> PL / SQL包中的几个过程只允许由策略管理员（Oracle Internet Directory中定义的企业用户）运行。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part2.html" title="第II部分介绍了如何使用Oracle Label Security功能。">使用Oracle Label Security功能</a></p>
                  </div>
               </div>
            </div>
            <a id="OLSAG3186"></a><a id="OLSAG3187"></a><a id="OLSAG027"></a><div class="props_rev_3"><a id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E" name="GUID-A838C192-6AB8-436B-9071-11A2E208B07E"></a><h3 id="OLSAG-GUID-A838C192-6AB8-436B-9071-11A2E208B07E" class="sect3">关于Oracle Internet Directory上的标签管理</h3>
               <div>
                  <p>在集中式LDAP存储库中管理Oracle Label Security元数据可带来许多好处。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您可以轻松配置策略和用户标签授权，并在整个企业中分发它们。</p>
                     </li>
                     <li>
                        <p>当员工被终止时，您可以在一个地方撤销其标签授权，并且更改会自动在整个企业中传播。</p>
                     </li>
                  </ul>
                  <p>以前版本的Oracle Label Security依赖Oracle数据库作为策略和用户标签授权的中央存储库。这利用了Oracle数据库的可扩展性和高可用性，但没有利用包括Oracle Internet Directory（OID）的身份管理基础架构。将Oracle Label Security的安装与Oracle Internet Directory集成在一起，可以将标签授权作为标准配置过程的一部分。</p>
                  <p>这些优点还适用于Oracle Label Security分配给用户的有关策略，用户标签和权限的目录存储信息。这些标签和特权特定于定义表和模式的访问控制的安装策略。如果站点未使用Oracle Internet Directory，则此类信息将本地存储在数据库中。</p>
                  <p>以下Oracle Label Security信息存储在目录中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>策略信息，特别是策略名称，列名称，策略实施选项和审计选项</p>
                     </li>
                     <li>
                        <p>用户配置文件标识其标签和权限</p>
                     </li>
                     <li>
                        <p>策略标签组件：级别，隔离专区和组</p>
                     </li>
                     <li>
                        <p>政策数据标签</p>
                     </li>
                  </ul>
                  <p>特定于数据库的元数据（如下所示）不存储在目录中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>模式或表的列表，以及相关的策略信息</p>
                     </li>
                     <li>
                        <p>程序单元，具有相关的策略权限</p>
                     </li>
                  </ul>
                  <p>请注意将Oracle Label Security安装与Oracle Internet Directory（OID）集成的以下重要方面：</p>
                  <div class="infoboxnote" id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E__GUID-DC98B8BE-9275-4A0D-9A66-06B4AF067564">
                     <p class="notep1">注意：</p>
                     <p>Oracle将继续支持Oracle Label Security的数据库和基于目录的（OID）体系结构。但是，单个数据库环境无法承载这两种体系结构。管理员必须决定是使用集中式LDAP管理模型还是使用以数据库为中心的模型。</p>
                  </div>
                  <div class="infoboxnote" id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E__GUID-9E71DCB6-7EBC-4E7C-8CCF-9F38796470DE">
                     <p class="notep1">注意：</p>
                     <p>您可以使用Oracle Label Security管理工具（ <code class="codeph">olsadmintool</code> ）直接在目录中管理Oracle Label Security策略。
                     </p>
                     <p>您还可以使用Oracle Enterprise Manager提供的图形用户界面来管理Oracle Label Security。Oracle Enterprise Manager帮助包含详细的文档。</p>
                  </div>
                  <p>对于使用Oracle Internet Directory的站点，数据库从目录中检索Oracle Label Security策略信息。管理员使用<code class="codeph">olsadmintool</code>策略管理工具或企业管理器图形用户界面直接在目录上操作，以根据需要插入，更改或删除元数据。由于企业用户可以使用Oracle Internet Directory中存储的凭据登录到多个数据库，因此在其中存储其Oracle Label Security策略授权和权限也是合乎逻辑的。然后，管理员可以通过更新目录中的此类元数据来修改这些授权和特权。
                  </p>
                  <p>对于分布式数据库，集中式策略管理无需复制策略，因为目录中提供了相应的策略信息。更改无需进一步努力即可生效，通过目录集成平台与数据库中的策略信息同步。</p>
                  <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1032179">图7-1</a>说明了Oracle Internet Directory中元数据存储的结构。
                  </p>
                  <div class="figure" id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1032179">
                     <p class="titleinfigure">图7-1 Oracle Internet Directory中的Oracle Label Security元数据存储图</p><img src="img/olsag038.png" alt="下面是图7-1的描述" title="下面是图7-1的描述" longdesc="img_text/olsag038.html"><br><a href="img_text/olsag038.html">“图7-1 Oracle Internet Directory中Oracle Label Security元数据存储图”的说明</a></div>
                  <!-- class="figure" -->
                  <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1035464">图7-2</a>说明了Oracle Internet Directory中存储的不同策略如何应用于不同企业用户访问的数据库。与用户和访问的数据库相对应的目录条目确定要应用的策略。
                  </p>
                  <div class="figure" id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1035464">
                     <p class="titleinfigure">图7-2通过Oracle Internet Directory应用的Oracle Label安全策略</p><img src="img/olsag037.png" alt="下面是图7-2的描述" title="下面是图7-2的描述" longdesc="img_text/olsag037.html"><br><a href="img_text/olsag037.html">“图7-2通过Oracle Internet Directory应用的Oracle Label安全策略”的说明</a></div>
                  <!-- class="figure" -->
                  <p>在此图中，该目录包含有关两个Oracle Label Security策略的信息，Alpha，适用于数据库DB1和Beta，适用于数据库DB2尽管每个数据库都知道这两个策略，但在每种情况下只应用相应的策略。此外，要访问受Oracle Label Security保护的行的企业用户列在Oracle Internet Directory中的Oracle Label Security属性中的配置文件中。</p>
                  <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1035464">如图7-2</a>所示，不同数据库和目录之间的连接是通过SSL或SASL建立的。数据库始终使用基于密码的身份验证将目录绑定为已知标识。数据库与其客户端之间的链接（例如SQL * Plus会话，任何PL / SQL程序等）可以使用SSL或非SSL连接。<a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1035464">图7-2</a>的示例假定用户通过密码身份验证登录。连接类型的选择取决于企业用户模型。
                  </p>
                  <p>Oracle Label Security策略管理工具直接在Oracle Internet Directory中的元数据上运行。然后将目录中的更改传播到Oracle目录集成和配置服务器，该服务器配置为以特定时间间隔向数据库发送更改。</p>
                  <p>仅当将策略应用于表或模式时，数据库才会更新Oracle Internet Directory中的策略信息。这些更新可确保不会从目录中删除正在使用的策略。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-A838C192-6AB8-436B-9071-11A2E208B07E__GUID-2ED77F89-C3A2-478C-8070-346FE02A5F5D">
                     <p class="notep1">也可以看看：</p>
                     <p>有关企业域，用户模型和身份验证活动的详细信息，请参见<a href="../dbimi/introducing-enterprise-user-security.html#DBIMI152" target="_blank"><span><cite>“Oracle数据库企业用户安全管理员指南”</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG028"></a><div class="props_rev_3"><a id="GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" name="GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1"></a><h3 id="OLSAG-GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" class="sect3">配置启用Oracle Internet Directory的标签安全性</h3>
               <div>
                  <p>您可以配置启用Oracle Internet Directory的Oracle Label Security。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-8B3BED29-BD9E-4A40-B02E-6797EC678261">关于配置启用Oracle Internet Directory的标签安全性</a><br>您可以在创建数据库之后或在自定义数据库创建期间为启用Oracle Internet Directory的Label Security配置数据库。
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-6A1C88AD-1A83-4D52-8F08-7253A1CC7484">授予配置启用OID的Oracle Label Security的权限</a><br>使用Database Configuration Assistant（DBCA）执行启用Oracle Internet Directory的Oracle Label Security的用户必须具有其他权限。
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC">注册数据库并配置启用OID的Oracle Label Security</a><br>注册和配置过程需要为目录配置Oracle主目录，执行配置，设置密码和连接数据。
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-579A51AE-F293-42F5-8B01-DF2361B7E6B2">使用支持OID的Oracle Label Security取消注册数据库</a><br>要使用启用了Oracle Internet Directory的Oracle Label Security取消注册数据库，可以使用DBCA。</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-8B3BED29-BD9E-4A40-B02E-6797EC678261" name="GUID-8B3BED29-BD9E-4A40-B02E-6797EC678261"></a><h4 id="OLSAG-GUID-8B3BED29-BD9E-4A40-B02E-6797EC678261" class="sect4">关于配置启用Oracle Internet Directory的标签安全性</h4>
                  <div>
                     <p>您可以在创建数据库之后或在自定义数据库创建期间为启用Oracle Internet Directory的Label Security配置数据库。</p>
                     <p>启用Oracle Internet Directory的标签安全性依赖于企业用户安全性功能。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8B3BED29-BD9E-4A40-B02E-6797EC678261__GUID-FCA060FF-5BD9-44B8-BC2C-A9688E78D8C5">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../dbimi/enterprise-user-security-configuration-tasks-and-troubleshooting.html#DBIMI150" target="_blank"><span><cite>“Oracle数据库企业用户安全性管理员指南”，</cite></span></a>了解为目录使用配置数据库的先决条件和步骤</p>
                           </li>
                           <li>
                              <p>有关Database Configuration Assistant（DBCA）的信息，请参见<a href="../dbimi/configuration-and-administration-tools-overview.html#DBIMI246" target="_blank"><span><cite>“Oracle数据库企业用户安全性管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" title="您可以配置启用Oracle Internet Directory的Oracle Label Security。">配置启用Oracle Internet Directory的标签安全性</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3188"></a><div class="props_rev_3"><a id="GUID-6A1C88AD-1A83-4D52-8F08-7253A1CC7484" name="GUID-6A1C88AD-1A83-4D52-8F08-7253A1CC7484"></a><h4 id="OLSAG-GUID-6A1C88AD-1A83-4D52-8F08-7253A1CC7484" class="sect4">授予配置启用OID的Oracle Label Security的权限</h4>
                  <div>
                     <p>使用Database Configuration Assistant（DBCA）执行启用Oracle Internet Directory的Oracle Label Security的用户必须具有其他权限。</p>
                     <div class="section">
                        <p>以下步骤描述了所需的权限以及如何授予它们：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用Enterprise Manager将用户添加到<code class="codeph">OracleDBCreators</code>组。</span><div>
                              <p><a href="../dbimi/administering-enterprise-user-security.html#DBIMI275" target="_blank"><span><cite>“Oracle数据库企业用户安全性管理员指南”</cite></span></a>介绍了如何将用户添加到管理组。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>将用户添加到Provisioning Admins组。</span><div>
                              <p>这是必要的，因为DBCA为Oracle Label Security创建了<code class="codeph">DIP</code>配置文件。使用<code class="codeph">ldapmodify</code>命令和以下<code class="codeph">.ldif</code>文件将用户添加到Provisioning Admins组：</p><pre class="oac_no_warn" dir="ltr">dn：cn = Provisioning Admins，cn = changelog subscriber，cn = oracle internet directory changetype：modify add：uniquemember uniquemember：要添加的用户的DN</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">olsadmintool</code>命令行工具将用户添加到<code class="codeph">policyCreators</code>组。</span><div>
                              <p>DBCA使用Oracle Internet Directory中的Oracle Label Security策略信息引导数据库，并且只有<code class="codeph">policyCreators</code>可以执行此引导程序。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果数据库已使用DBCA在Oracle Internet Directory中注册，请使用Enterprise Manager将用户添加到该数据库的<code class="codeph">OracleDBAdmins</code>组。</span></li>
                     </ol>
                     <div class="section">
                        <p>请注意，管理员也需要先前指定的权限，该管理员取消注册启用了Oracle Internet Directory的Oracle Label Security配置的数据库。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" title="您可以配置启用Oracle Internet Directory的Oracle Label Security。">配置启用Oracle Internet Directory的标签安全性</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3189"></a><div class="props_rev_3"><a id="GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" name="GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC"></a><h4 id="OLSAG-GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" class="sect4">注册数据库并配置启用OID的Oracle Label Security</h4>
                  <div>
                     <p>注册和配置过程需要为目录配置Oracle主目录，执行配置，设置密码和连接数据。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-036642B4-2E8C-4F4D-B301-5880326F4144">步骤1：配置Oracle主目录以进行目录使用</a><br>首先，您必须配置Oracle主目录，以便可以使用Oracle Internet Directory。
                        </li>
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AA456CA9-FFD9-419B-AA71-AF10EF0FD2A9">步骤2：为Oracle Label Security配置Oracle Internet Directory</a><br>接下来，您已准备好为Oracle Label安全性配置Oracle Internet Directory。
                        </li>
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-93CA36FE-968A-41E5-AAB9-BEECE62A7072">步骤2备用：为启用OID的Oracle Label Security配置数据库</a><br>注册数据库和配置Oracle Label Security可以在一次DBCA调用中完成。</li>
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-32ADCB05-6430-4A0A-9EA6-E33BE8CBA94A">第3步：设置DIP密码和连接数据</a><br><code class="codeph">DIP</code>用户管理Oracle Internet Directory。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" title="您可以配置启用Oracle Internet Directory的Oracle Label Security。">配置启用Oracle Internet Directory的标签安全性</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="OLSAG3190"></a><div class="props_rev_3"><a id="GUID-036642B4-2E8C-4F4D-B301-5880326F4144" name="GUID-036642B4-2E8C-4F4D-B301-5880326F4144"></a><h5 id="OLSAG-GUID-036642B4-2E8C-4F4D-B301-5880326F4144" class="sect5">步骤1：配置Oracle主目录以进行目录使用</h5>
                     <div>
                        <p>首先，您必须配置Oracle主目录，以便可以使用Oracle Internet Directory。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>按照“ <a href="../dbimi/getting-started-with-enterprise-user-security.html#DBIMI235" target="_blank"><span><cite>Oracle数据库企业用户安全性管理员指南”</cite></span></a>中的说明配置Oracle主目录以进行目录使用。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" title="注册和配置过程需要为目录配置Oracle主目录，执行配置，设置密码和连接数据。">注册数据库并配置启用OID的Oracle Label Security</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="OLSAG3191"></a><div class="props_rev_3"><a id="GUID-AA456CA9-FFD9-419B-AA71-AF10EF0FD2A9" name="GUID-AA456CA9-FFD9-419B-AA71-AF10EF0FD2A9"></a><h5 id="OLSAG-GUID-AA456CA9-FFD9-419B-AA71-AF10EF0FD2A9" class="sect5">步骤2：为Oracle Label Security配置Oracle Internet Directory</h5>
                     <div>
                        <p>接下来，您已准备好为Oracle Label安全性配置Oracle Internet Directory。</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>使用Database Configuration Assistant（DBCA）在目录中注册数据库。</p>
                                 <p>请参见“ <a href="../dbimi/getting-started-with-enterprise-user-security.html#DBIMI236" target="_blank"><span><cite>Oracle数据库企业用户安全性管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在目录中注册数据库后，配置Label Security：</p>
                                 <ol type="a">
                                    <li>
                                       <p>启动DBCA，选择“ <span class="bold">在数据库中配置数据库选项”</span> ，然后单击“ <span class="bold">下一步”</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>选择数据库并单击“ <span class="bold">下一步”</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>关于取消注册数据库或保持注册的选项，请选择“ <span class="bold">保持数据库已注册”</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果数据库已在Oracle Internet Directory中注册，则“ <span class="bold">数据库选项”</span>屏幕将在“标签安全性”复选框旁边显示自定义按钮。选择<span class="bold">Label Security</span>选项，然后单击<span class="bold">Customize</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>此自定义对话框有两个配置选项，分别用于独立的Oracle Label Security或支持Oracle Internet Directory的Oracle Label Security。单击<span class="bold">启用OID的标签安全配置，</span>然后输入相应管理员的Oracle Internet Directory凭据。单击<span class="bold">确定</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>继续执行剩余的DBCA步骤，并在出现时单击“ <span class="bold">完成</span> ”。
                                       </p>
                                       <div class="infoboxnote" id="GUID-AA456CA9-FFD9-419B-AA71-AF10EF0FD2A9__GUID-41D4A3F3-88D8-4EB6-B77B-4DFAFF51F572">
                                          <p class="notep1">注意：</p>
                                          <p>您可以在向Oracle Internet Directory注册的数据库上配置独立的Oracle Label Security。在步骤<span class="bold">e中</span>选择独立选项。
                                          </p>
                                       </div>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                           <p>配置启用Oracle Internet Directory的Oracle Label Security时，除注册数据库外，DBCA还会执行以下操作：</p>
                           <ol>
                              <li>
                                 <p>创建供应配置文件，以便将Label Security策略更改传播到数据库。</p>
                              </li>
                              <li>
                                 <p>为支持Oracle Internet Directory的Oracle Label Security在数据库端安装所需的软件包。</p>
                              </li>
                              <li>
                                 <p>使用Oracle Internet Directory中的所有现有Label Security策略信息引导数据库。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-9EBE7D60-7300-4CF4-A631-FA80CC2FB40F" title="使用Oracle Internet Directory注册新数据库后，可以在该数据库上安装启用Oracle Internet Directory的Oracle Label Security。">引导数据库</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" title="注册和配置过程需要为目录配置Oracle主目录，执行配置，设置密码和连接数据。">注册数据库并配置启用OID的Oracle Label Security</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="OLSAG3192"></a><div class="props_rev_3"><a id="GUID-93CA36FE-968A-41E5-AAB9-BEECE62A7072" name="GUID-93CA36FE-968A-41E5-AAB9-BEECE62A7072"></a><h5 id="OLSAG-GUID-93CA36FE-968A-41E5-AAB9-BEECE62A7072" class="sect5">步骤2备用：为启用OID的Oracle Label Security配置数据库</h5>
                     <div>
                        <p>注册数据库和配置Oracle Label Security可以在一次DBCA调用中完成。</p>
                        <ol>
                           <li class="stepexpand"><span>启动DBCA。</span></li>
                           <li class="stepexpand"><span>选择<span class="bold">数据库中的配置数据库选项，</span>然后单击<span class="bold">下一步</span></span></li>
                           <li class="stepexpand"><span>选择数据库并单击“ <span class="bold">下一步”</span> 。</span></li>
                           <li class="stepexpand"><span>单击“ <span class="bold">注册数据库”</span> 。</span></li>
                           <li class="stepexpand"><span>输入相应管理员的Oracle Internet Directory凭据，以及将要创建的数据库钱包的相应密码。</span></li>
                           <li class="stepexpand"><span>输入数据库的可选自定义数据库名称。</span><div>
                                 <p>指定自定义数据库名称的功能是Oracle Database 12 <span class="italic">c中的新功能</span> 。默认情况下，目录中的数据库CN（DN的第一部分或可分辨名称）是<code class="codeph">DB_UNIQUE_NAME</code> 。您可以将其更改为自定义值。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>“数据库选项”屏幕显示“标签安全性”复选框旁边的“自定义”按钮。选择<span class="bold">Label Security</span>选项，然后单击<span class="bold">Customize</span> 。</span><div>
                                 <p>将显示“自定义”对话框，其中显示了两个配置选项，分别用于独立的Oracle Label Security或支持Oracle Internet Directory的Oracle Label Security。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>单击<span class="bold">启用OID的标签安全配置</span> 。</span></li>
                           <li class="stepexpand"><span>继续执行剩余的DBCA步骤，然后单击“ <span class="bold">完成”</span> 。</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" title="注册和配置过程需要为目录配置Oracle主目录，执行配置，设置密码和连接数据。">注册数据库并配置启用OID的Oracle Label Security</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="OLSAG3193"></a><div class="props_rev_3"><a id="GUID-32ADCB05-6430-4A0A-9EA6-E33BE8CBA94A" name="GUID-32ADCB05-6430-4A0A-9EA6-E33BE8CBA94A"></a><h5 id="OLSAG-GUID-32ADCB05-6430-4A0A-9EA6-E33BE8CBA94A" class="sect5">第3步：设置DIP密码和连接数据</h5>
                     <div>
                        <p><code class="codeph">DIP</code>用户管理Oracle Internet Directory。
                        </p>
                        <div class="section">
                           <p>配置此用户密码后，必须更新<code class="codeph">DIP</code>配置文件中的接口连接信息。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>使用命令行工具<code class="codeph">oidprovtool</code>为<code class="codeph">DIP</code>用户设置密码，并使用新密码更新该数据库的<code class="codeph">DIP</code>配置文件中的接口连接信息。</span></li>
                           <li><span>创建后， <code class="codeph">DIP</code>配置文件默认使用3600秒的调度值，这意味着Oracle Label Security更改每小时传播到数据库。如果部署注意事项需要，您可以使用<code class="codeph">oidprovtool</code>更改此值。</span></li>
                        </ol>
                        <div class="section">
                           <p>为Oracle Internet Directory启用的Oracle Label Security配置数据库后，可能会考虑有关企业用户安全性的进一步注意事项。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-32ADCB05-6430-4A0A-9EA6-E33BE8CBA94A__GUID-8E0A5151-3911-4FB1-AA16-ACE192E48733">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-FE19E96D-9682-4088-A230-D566E77BDEF2" title="DIP服务器使用为每个数据库创建的单独DIP配置文件，将目录中的策略更改与连接的数据库同步。">Oracle目录集成和供应（DIP）供应配置文件</a></p>
                              </li>
                              <li>
                                 <p><a href="../dbimi/introducing-enterprise-user-security.html#DBIMI152" target="_blank"><span><cite>“Oracle数据库企业用户安全性管理员指南”，</cite></span></a>了解更多概念，工具，步骤和过程</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" title="注册和配置过程需要为目录配置Oracle主目录，执行配置，设置密码和连接数据。">注册数据库并配置启用OID的Oracle Label Security</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="OLSAG3194"></a><div class="props_rev_3"><a id="GUID-579A51AE-F293-42F5-8B01-DF2361B7E6B2" name="GUID-579A51AE-F293-42F5-8B01-DF2361B7E6B2"></a><h4 id="OLSAG-GUID-579A51AE-F293-42F5-8B01-DF2361B7E6B2" class="sect4">使用支持OID的Oracle Label Security取消注册数据库</h4>
                  <div>
                     <p>要使用启用了Oracle Internet Directory的Oracle Label Security取消注册数据库，可以使用DBCA。</p>
                     <p>DBCA在此过程中执行以下操作：</p>
                     <ol>
                        <li>
                           <p>删除为Oracle Label Security创建的数据库的<code class="codeph">DIP</code>配置文件。
                           </p>
                        </li>
                        <li>
                           <p>为独立的Oracle Label Security安装所需的软件包，以便在取消注册后，启用Oracle Internet Directory的Oracle Label Security将成为独立的Oracle Label Security。</p>
                           <div class="infoboxnote" id="GUID-579A51AE-F293-42F5-8B01-DF2361B7E6B2__GUID-28A065B6-DA7F-4489-B502-A1B514F2CB91">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关数据库取消注册的具体说明，请参见“ <a href="../dbimi/enterprise-user-security-configuration-tasks-and-troubleshooting.html#DBIMI586" target="_blank"><span><cite>Oracle数据库企业用户安全性管理员指南”</cite></span></a> 。配置Oracle Internet Directory的Oracle Label Security时，无需特殊步骤。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果数据库具有独立的Oracle Label Security，则无法将其转换为启用Oracle Internet Directory的Oracle Label Security。您需要从数据库中删除Oracle Label Security，然后再次使用DBCA配置启用Oracle Internet Directory的Oracle Label Security。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-C3DCC110-22B9-4EAC-914D-1C71B045BAC1" title="您可以配置启用Oracle Internet Directory的Oracle Label Security。">配置启用Oracle Internet Directory的标签安全性</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="OLSAG030"></a><div class="props_rev_3"><a id="GUID-EC12CA4B-91A6-41E5-8B08-3C285F9F7D4E" name="GUID-EC12CA4B-91A6-41E5-8B08-3C285F9F7D4E"></a><h3 id="OLSAG-GUID-EC12CA4B-91A6-41E5-8B08-3C285F9F7D4E" class="sect3">Oracle Label安全配置文件</h3>
               <div>
                  <p>用户配置文件是一组用户授权和权限。</p>
                  <div class="section">
                     <p>配置文件作为存储在目录中的每个Oracle Label Security策略的一部分进行维护。如果将用户添加到配置文件，则该用户将获取该配置文件中为该特定策略定义的授权和特权，其中包括以下属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>五个标签授权：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>最大读取标签</p>
                              </li>
                              <li>
                                 <p>最大写标签</p>
                              </li>
                              <li>
                                 <p>最小写标签</p>
                              </li>
                              <li>
                                 <p>默认读取标签</p>
                              </li>
                              <li>
                                 <p>默认行标签</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>特权</p>
                        </li>
                        <li>
                           <p>这些授权适用的企业用户列表</p>
                        </li>
                     </ul>
                     <p>企业用户只能属于一个配置文件，或者不能。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-EC12CA4B-91A6-41E5-8B08-3C285F9F7D4E__GUID-B32EA125-DF1D-4A45-BFE4-6137A6D4BCCD">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558" title="在Oracle Internet Directory中，与Oracle相关的元数据存储在cn = OracleContext下。">Oracle Internet Directory中的Oracle Label Security策略属性</a></p>
                        </li>
                        <li>
                           <p><a href="../dbimi/getting-started-with-enterprise-user-security.html#DBIMI234" target="_blank"><span><cite>“Oracle数据库企业用户安全性管理员指南”</cite></span></a> ，了解有关创建和管理企业用户的更多信息</p>
                        </li>
                        <li>
                           <p>Oracle Enterprise Manager帮助获取有关创建和管理Oracle Label Security配置文件和策略的信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG031"></a><div class="props_rev_3"><a id="GUID-4EAFD2E3-A650-4415-9256-92533F4F5C36" name="GUID-4EAFD2E3-A650-4415-9256-92533F4F5C36"></a><h3 id="OLSAG-GUID-4EAFD2E3-A650-4415-9256-92533F4F5C36" class="sect3">标签安全性使用目录时的集成功能</h3>
               <div>
                  <p>Oracle Label Security和Oracle Internet Directory的集成支持多种功能。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>用户/管理员操作</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在Oracle Internet Directory中存储多个Oracle Label Security策略</p>
                           </li>
                           <li>
                              <p>管理目录中的Oracle Label Security策略和选项，包括</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>创建或删除策略</p>
                                 </li>
                                 <li>
                                    <p>改变政策选择</p>
                                 </li>
                                 <li>
                                    <p>更改审核设置</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>为任何Oracle Label Security策略创建标签组件</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>创建或删除级别，隔离专区或组</p>
                                 </li>
                                 <li>
                                    <p>将数值分配给级别，隔离专区或组</p>
                                 </li>
                                 <li>
                                    <p>更改级别，隔离专区或组的长名称</p>
                                 </li>
                                 <li>
                                    <p>创建儿童组</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>管理配置为任何Oracle Label Security策略用户的企业用户，包括</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>在策略中为配置文件分配或删除企业用户</p>
                                 </li>
                                 <li>
                                    <p>为企业用户分配特定于策略的权限，或删除它们</p>
                                 </li>
                                 <li>
                                    <p>更改分配给企业用户的策略标签授权</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>通过一组集成的命令行工具管理所有用户/管理员操作和功能，这些工具可监视和管理Oracle Internet Directory中的Oracle Label Security策略。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Oracle Label Security的自动结果</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>仅将数据库策略使用限制为目录定义的策略（未定义或应用本地策略）</p>
                           </li>
                           <li>
                              <p>使用Oracle Label Security将对目录中策略的更改与数据库同步（在企业用户重新连接后应用）</p>
                           </li>
                           <li>
                              <p>在目录集成平台传播更改后，当这些用户使用Oracle Label Security登录到任何数据库时，可以立即访问企业用户的Oracle Label Security属性，假设它们是在任何Oracle Label Security策略中配置的。这些属性包括用户的标签授权和用户权限。</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG3195"></a><a id="OLSAG032"></a><div class="props_rev_3"><a id="GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558" name="GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558"></a><h3 id="OLSAG-GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558" class="sect3">Oracle Internet Directory中的Oracle Label Security策略属性</h3>
               <div>
                  <p>在Oracle Internet Directory中，与Oracle相关的元数据存储在<code class="codeph">cn=OracleContext</code> 。
                  </p>
                  <p>在Label Security中，每个策略都包含<a href="oracle-label-security-using-oracle-internet-directory.html#GUID-A838C192-6AB8-436B-9071-11A2E208B07E__I1032179">如图7-1</a>所示的信息和参数：</p>
                  <p>在没有Oracle Internet Directory的情况下使用Oracle Label Security时，它支持通过标签功能自动创建数据标签。但是，当Oracle Label Security与Oracle Internet Directory一起使用时，此类函数只能使用已在目录中定义的数据标签创建标签。</p>
                  <div class="tblformalwide" id="GUID-97670FE0-9EDD-484E-AC19-B7373FF1D558__GUID-9349AB05-C2D4-461D-B31B-D25D3B67ECD1">
                     <p class="titleintable">表7-1各策略的内容</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="每项政策的内容" width="100%" border="1" summary="This table lists and describes the types of content in every policy, and gives examples and references for each." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d30435e1639">入境类型</th>
                              <th align="left" valign="bottom" width="43%" id="d30435e1642">内容</th>
                              <th align="left" valign="bottom" width="37%" id="d30435e1645">含义/样品用法/参考</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1650" headers="d30435e1639 ">
                                 <p>政策名称</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1650 d30435e1642 ">
                                 <p>在创建时分配给此策略的名称</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1650 d30435e1645 ">
                                 <p>用于<code class="codeph">olsadmintool</code>命令，例如<code class="codeph">olsadmintool</code> <code class="codeph">createpolicy</code> （请参阅<a href="command-line-tools-for-label-security-using-oracle-internet-directory.html#GUID-CEBDC422-8872-46C1-8A3B-F1161539DD22" title="Oracle Label Security提供了使用Oracle Internet Directory的命令行工具。">使用Oracle Internet Directory的标签安全性的命令行工具</a> <code class="codeph">)</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1676" headers="d30435e1639 ">
                                 <p>列名称</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1676 d30435e1642 ">
                                 <p>包含与此策略相关的标签值的列的名称</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1676 d30435e1645 ">
                                 <p>列已添加到数据库中。请参阅<a href="working-with-labeled-data.html#GUID-2C84DF95-0A12-4BBA-94C8-4FF369C54128" title="您应该了解如何创建和填充表或模式中的策略标签列。">策略标签列和标签标签的工作原理</a></p>
                                 <p><a href="working-with-labeled-data.html#GUID-ED5DA711-477C-42D9-B03C-866A909DDE23" title="您可以在各种情况下插入带标签的数据。">插入标记数据</a></p>
                                 <p><a href="implementing-policy-enforcement-options-and-labeling-functions.html#GUID-26ABB868-ADB3-44D0-B5A0-3CAF9C5EC627" title="将Oracle Label Security策略列添加到表时，可以指定HIDE策略配置选项。">HIDE策略列选项的工作原理</a></p>
                                 <p><a href="oracle-label-security-reference.html#GUID-3EF3FD4E-A001-4110-9036-23022F2CD001" title="Oracle Label Security提供数据字典表，数据字典视图和用户创建的审计视图。">Oracle Label Security表和视图</a> 。
                                 </p>
                                 <p>用于</p>
                                 <p><code class="codeph">olsadmintool createpolicy</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1718" headers="d30435e1639 ">
                                 <p>执法选项</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1718 d30435e1642 ">
                                 <p>以下条目的任意组合：</p>
                                 <p><code class="codeph">LABEL_DEFAULT，LABEL_UPDATE，CHECK_CONTROL，READ_CONTROL，WRITE_CONTROL，INSERT_CONTROL，DELETE_CONTROL，UPDATE_CONTROL，ALL_CONTROL或NO_CONTROL</code></p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1718 d30435e1645 ">
                                 <p>请参阅<a href="implementing-policy-enforcement-options-and-labeling-functions.html#GUID-74CD83CB-3398-439D-B791-7C08867EF645" title="您可以自定义Oracle Label Security策略的实施并实现标签功能。">实施策略强制选项和标签功能</a>以及<a href="oracle-label-security-reference.html#GUID-3EF3FD4E-A001-4110-9036-23022F2CD001" title="Oracle Label Security提供数据字典表，数据字典视图和用户创建的审计视图。">Oracle Label Security表和视图中的讨论</a> 。
                                 </p>
                                 <p>用于</p>
                                 <p><code class="codeph">olsadmintool createpolicy</code></p>
                                 <p>和<code class="codeph">olsadmintool alterpolicy</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1752" headers="d30435e1639 ">
                                 <p>选项</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1752 d30435e1642 ">
                                 <p>启用： <code class="codeph">TRUE or FALSE</code> ，类型： <code class="codeph">ACCESS or SESSION</code> ，成功： <code class="codeph">SUCCESSFUL,UNSUCCESSFUL, or BOTH</code> 。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1752 d30435e1645 ">
                                 <p>用于</p>
                                 <p><code class="codeph">olsadmintool审计</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1774" headers="d30435e1639 ">
                                 <p>水平</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1774 d30435e1642 ">
                                 <p>每个级别的名称和编号</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1774 d30435e1645 ">
                                 <p>用于<code class="codeph">olsadmintool create/alter/droplevel</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1786" headers="d30435e1639 ">
                                 <p>车厢</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1786 d30435e1642 ">
                                 <p>每个隔间的名称和编号</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1786 d30435e1645 ">
                                 <p>用于<code class="codeph">olsadmintool create/alter/drop compartment</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1798" headers="d30435e1639 ">
                                 <p>组</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1798 d30435e1642 ">
                                 <p>每个组的名称，编号和父级</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1798 d30435e1645 ">
                                 <p>用于<code class="codeph">olsadmintool create/alter/dropgroup</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1810" headers="d30435e1639 ">
                                 <p>简介</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1810 d30435e1642 ">
                                 <p>最大和默认读取标签，最大和最小写入标签，默认行标签，用户列表以及此列表中的一组权限：</p>
                                 <p><code class="codeph">READ,</code> <code class="codeph">FULL,</code> 
                                 </p>
                                 <p><code class="codeph">WRITEUP,</code> <code class="codeph">WRITEDOWN, WRITEACROSS,</code> 
                                 </p>
                                 <p><code class="codeph">PROFILE_ACCESS,</code> <code class="codeph">or COMPACCESS</code></p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1810 d30435e1645 ">
                                 <p>策略可以有一个或多个配置文件，每个配置文件都可以分配给许多用户。配置文件减少了为单个用户设置标签授权的需要。</p>
                                 <p>具有相同标签和权限集的所有用户都分组在一个配置文件中。每个配置文件代表一组不同的标签，权限和用户。策略中的每个配置文件都是唯一的。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1842" headers="d30435e1639 ">
                                 <p>数据标签</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1842 d30435e1642 ">
                                 <p>每个有效数据标签的全名和编号</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1842 d30435e1645 ">
                                 <p>请参阅<a href="oracle-label-security-using-oracle-internet-directory.html#GUID-76952FF1-DC68-412B-816F-A48C5F472E40" title="当Oracle Label Security与Oracle Internet Directory一起使用时，必须在目录中预定义数据标签。">新数据标签创建的限制</a> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d30435e1858" headers="d30435e1639 ">
                                 <p>管理员</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d30435e1858 d30435e1642 ">
                                 <p>被授权修改此策略中的参数的每个管理员的名称。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d30435e1858 d30435e1645 ">
                                 <p>策略管理员可以修改策略中的参数。他们不一定也是策略创建者，他们有权创建或删除策略或策略管理员。请参阅<a href="oracle-label-security-using-oracle-internet-directory.html#GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7" title="Oracle Label Security允许Oracle Internet Directory的特定任务和访问级别，包括对启用目录的OLS策略创建者的限制。">安全角色和允许的操作</a> 。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG064"></a><div class="props_rev_3"><a id="GUID-A28C8926-2C4D-44D7-A71A-FEAD20C7353D" name="GUID-A28C8926-2C4D-44D7-A71A-FEAD20C7353D"></a><h3 id="OLSAG-GUID-A28C8926-2C4D-44D7-A71A-FEAD20C7353D" class="sect3">在启用目录的标签安全性中订阅策略</h3>
               <div>
                  <p>在启用Oracle Internet Directory的Oracle Label Security中，必须先订阅策略才能应用该策略（通过<code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code>或<code class="codeph">SA_POLICY_ADMIN.APPLY_SCHEMA_POLICY</code> ）。
                  </p>
                  <p></p>
                  <p>在独立的Oracle Label Security安装中，可以直接使用<code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code>或<code class="codeph">SA_POLICY_ADMIN.APPLY_SCHEMA_POLICY</code>函数，而无需订阅。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oracle-label-security-pl-sql-packages.html#GUID-5A1345FF-404B-468E-A5EA-792511E386DB" title="SA_POLICY_ADMIN PL / SQL包作为一个整体管理Oracle Label Security策略。">SA_POLICY_ADMIN策略管理PL / SQL包</a></li>
                        <li><a href="creating-an-oracle-label-security-policy.html#GUID-FEB6F9A6-75DB-45BA-8F9E-4B25288C975C" title="在为Oracle Label Security策略创建授权授权和特权之后，可以将其应用于数据库表或模式。">步骤5：将策略应用于数据库表或架构</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="OLSAG033"></a><div class="props_rev_3"><a id="GUID-76952FF1-DC68-412B-816F-A48C5F472E40" name="GUID-76952FF1-DC68-412B-816F-A48C5F472E40"></a><h3 id="OLSAG-GUID-76952FF1-DC68-412B-816F-A48C5F472E40" class="sect3">新数据标签创建的限制</h3>
               <div>
                  <p>当Oracle Label Security与Oracle Internet Directory一起使用时，必须在目录中预定义数据标签。</p>
                  <p>它们不能由标签功能动态创建，因为标签安全性未与目录集成时可能。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG034"></a><div class="props_rev_3"><a id="GUID-A15F11C7-6A4D-4FF9-8F24-80A4FBCCBF83" name="GUID-A15F11C7-6A4D-4FF9-8F24-80A4FBCCBF83"></a><h3 id="OLSAG-GUID-A15F11C7-6A4D-4FF9-8F24-80A4FBCCBF83" class="sect3">Oracle Internet Directory和Oracle Label Security的管理员职责</h3>
               <div>
                  <p>策略中列出的管理员是有权执行特定于olicy的管理任务的人员。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>修改现有策略选项和审核设置。</p>
                     </li>
                     <li>
                        <p>启用或禁用策略的审核。</p>
                     </li>
                     <li>
                        <p>创建或删除级别，隔离专区，组或子组。</p>
                     </li>
                     <li>
                        <p>修改级别，隔间或组的完整/长名称。</p>
                     </li>
                     <li>
                        <p>在此策略中定义或修改企业用户设置：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>特权</p>
                           </li>
                           <li>
                              <p>最高或最低水平</p>
                           </li>
                           <li>
                              <p>级别，隔离专区或组的读取，写入或行访问</p>
                           </li>
                           <li>
                              <p>标签配置文件</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>从策略中删除企业用户。</p>
                     </li>
                  </ul>
                  <p>有一个更高级别的管理员，称为策略创建者，他们可以创建和删除Oracle Label Security策略以及在其中命名的策略管理员。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG035"></a><div class="props_rev_3"><a id="GUID-9EBE7D60-7300-4CF4-A631-FA80CC2FB40F" name="GUID-9EBE7D60-7300-4CF4-A631-FA80CC2FB40F"></a><h3 id="OLSAG-GUID-9EBE7D60-7300-4CF4-A631-FA80CC2FB40F" class="sect3">引导数据库</h3>
               <div>
                  <p>使用Oracle Internet Directory注册新数据库后，可以在该数据库上安装启用Oracle Internet Directory的Oracle Label Security。</p>
                  <div class="section">
                     <p>此安装过程会自动创建目录集成平台（DIP）配置文件，以便将来通过将策略信息下载到数据库来定期刷新。</p>
                     <p>为Oracle Internet Directory配置数据库时启用Oracle Label Security，数据库配置Asssitant（DBCA）将Oracle Internet Directory中的所有策略信息放入新注册的数据库中，并填充数据库中的信息。此过程称为bootstrapping。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>要引导数据库，请使用以下参数在<code class="codeph">$ORACLE_HOME/bin/olsoidsync</code>运行引导实用程序脚本：</p><pre class="oac_no_warn" dir="ltr">olsoidsync --dbconnectstring“ <span class="italic">database_connect_string_in_host：port：sid_format</span> ” <span class="italic">--dbuser</span> <span class="italic">database_user</span> [-c] [-r] [-b <span class="italic">admin_context</span> ] -h <span class="italic">OID_host</span> [-p <span class="italic">port</span> ] -D <span class="italic">bind_DN</span>输入数据库密码： <span class="italic">database_user_password</span> <span>输入绑定密码： <span class="italic">bind_password</span></span></pre></li>
                     </ul>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">olsoidsync --dbconnectstring sales_srvr：1521：ora101 --dbuser lbacsys -c -b“ou = Americas，o = ExampleCorp，c = US”-h sales_srvr -D cn = policycreator输入数据库密码： <span class="italic">database_user_password</span> <span>输入绑定密码： <span class="italic">bind_password</span></span></pre><p>您必须提供数据库TNS名称，数据库用户名，数据库用户密码，管理上下文（如果有），Oracle Internet Directory主机名，绑定DN和绑定密码以及可选的Oracle Internet Directory端口号。<code class="codeph">c</code>和<code class="codeph">r</code>参数是可选的。 <code class="codeph">c</code>下降数据库中的所有现有政策，并与Oracle互联网目录策略信息刷新它， <code class="codeph">r</code>删除所有策略元数据（未失政策本身），并重新整理之后，Oracle互联网目录新的元数据的策略。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-FE19E96D-9682-4088-A230-D566E77BDEF2" title="DIP服务器使用为每个数据库创建的单独DIP配置文件，将目录中的策略更改与连接的数据库同步。">Oracle目录集成和供应（DIP）供应配置文件</a></li>
                        <li><a href="command-line-tools-for-label-security-using-oracle-internet-directory.html#GUID-0E7828B5-86AF-44D8-8BE6-27A5795A7CB7" title="olsoidsync命令从Oracle Internet Directory中提取策略信息，并填充数据库中的信息（引导）。">olsoidsync命令参考</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="OLSAG036"></a><div class="props_rev_3"><a id="GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" name="GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B"></a><h3 id="OLSAG-GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" class="sect3">同步数据库和Oracle Internet Directory</h3>
               <div>
                  <p>使用Oracle Label Security安装和配置Oracle Internet Directory后，应将数据库与OID和OLS同步。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-3F168919-22A1-4352-A721-A1023462B566">关于同步数据库和Oracle Internet Directory</a><br>目录集成平台Oracle Directory Provisioning Service将OID目录中的Oracle Label Security元数据与数据库同步。
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-FE19E96D-9682-4088-A230-D566E77BDEF2">Oracle目录集成和供应（DIP）供应配置文件</a><br>DIP服务器使用为每个数据库创建的单独DIP配置文件，将目录中的策略更改与连接的数据库同步。
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-33EE601D-CACD-4D38-924D-D7E553CECF45">修改供应配置文件</a><br><code class="codeph">oidprovtool</code> <code class="codeph">modify</code>命令更改<code class="codeph">interface_connect_info</code>连接字符串的密码。
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-06391FAA-35A5-436A-88AF-EFFC322C8534">更改供应配置文件的数据库连接信息</a><br>您可以在<code class="codeph">DIP</code>配置文件中更改数据库连接信息。
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-7424FF7F-1791-410C-A627-211FCA9FABF3">使用Oracle Data Guard配置启用OID的Oracle Label Security</a><br>要配置启用Oracle Directory的Oracle Label Security以使用Oracle Data Guard，首先要配置主数据库，然后配置辅助数据库。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               <a id="OLSAG4150"></a><div class="props_rev_3"><a id="GUID-3F168919-22A1-4352-A721-A1023462B566" name="GUID-3F168919-22A1-4352-A721-A1023462B566"></a><h4 id="OLSAG-GUID-3F168919-22A1-4352-A721-A1023462B566" class="sect4">关于同步数据库和Oracle Internet Directory</h4>
                  <div>
                     <p>目录集成平台Oracle Directory Provisioning Service将OID目录中的Oracle Label Security元数据与数据库同步。</p>
                     <p>对目录中标签安全性数据的更改由供应集成服务以供应事件的形式传达。软件代理程序接收这些事件并生成适当的SQL或PL / SQL语句以更新数据库。处理完这些语句后，将更新Oracle Label Security数据字典以匹配目录中已进行的更改。</p>
                     <p>Oracle Label Security在安装期间自动订阅Provisioning Integration Service。供应服务以供应配置文件的形式存储与每个数据库相关联的信息。在将Oracle Internet Directory中的更改与数据库同步时，软件代理使用为Oracle Label Security创建的用户<code class="codeph">DIP</code>的标识连接到数据库。
                     </p>
                     <p>如果更改了用户<code class="codeph">DIP</code>的密码，则必须在配置集成服务的配置文件中更新此密码。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" title="使用Oracle Label Security安装和配置Oracle Internet Directory后，应将数据库与OID和OLS同步。">同步数据库和Oracle Internet Directory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3197"></a><a id="OLSAG3196"></a><div class="props_rev_3"><a id="GUID-FE19E96D-9682-4088-A230-D566E77BDEF2" name="GUID-FE19E96D-9682-4088-A230-D566E77BDEF2"></a><h4 id="OLSAG-GUID-FE19E96D-9682-4088-A230-D566E77BDEF2" class="sect4">Oracle目录集成和供应（DIP）供应配置文件</h4>
                  <div>
                     <p>DIP服务器使用为每个数据库创建的单独DIP配置文件，将目录中的策略更改与连接的数据库同步。</p>
                     <p>此配置文件是作为启用Oracle Internet Directory的Oracle Label Security的安装过程的一部分自动创建的。管理员可以使用配置工具<code class="codeph">oidprovtool</code>来修改数据库配置文件的密码，使用脚本<span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">/bin/oidprovtoo</code> l。每个此类配置文件包含以下信息：</p>
                     <div class="tblformal" id="GUID-FE19E96D-9682-4088-A230-D566E77BDEF2__GUID-8B8991FB-360B-4CB1-97F9-3CD42AA9F8B0">
                        <p class="titleintable">表7-2 DIP配置文件中的元素</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DIP供应配置文件中的元素" width="100%" border="1" summary="This table lists the elements in a profile in the Directory Integration Platform (DIP) and provides the name to be used for each element when you invoke oidprovtool." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="66%" id="d30435e2579">元件</th>
                                 <th align="left" valign="bottom" width="34%" id="d30435e2582">调用oidprovtool时此元素的名称</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2587" headers="d30435e2579 ">
                                    <p>LDAP主机名</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2587 d30435e2582 ">
                                    <p><code class="codeph">ldap_host</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2595" headers="d30435e2579 ">
                                    <p>LDAP端口号</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2595 d30435e2582 ">
                                    <p><code class="codeph">LDAP_PORT</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2603" headers="d30435e2579 ">
                                    <p>用于绑定到Oracle Internet Directory以检索策略信息的用户DN和密码</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2603 d30435e2582 ">
                                    <p><code class="codeph">ldap_user</code></p>
                                    <p><code class="codeph">ldap_user_password</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2614" headers="d30435e2579 ">
                                    <p>数据库DN</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2614 d30435e2582 ">
                                    <p><code class="codeph">application_dn</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2622" headers="d30435e2579 ">
                                    <p>组织DN，即进行更改的管理上下文</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2622 d30435e2582 ">
                                    <p><code class="codeph">organization_dn</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2630" headers="d30435e2579 ">
                                    <p>要调用的回调函数，即<code class="codeph">LBACSYS.OLS_DIP_NTFY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2630 d30435e2582 ">
                                    <p><code class="codeph">接口名称</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2640" headers="d30435e2579 ">
                                    <p>数据库连接信息，即数据库的主机名，用于连接数据库的端口号，数据库SID，数据库用户名和密码</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2640 d30435e2582 ">
                                    <p><code class="codeph">interface_connect_info</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2648" headers="d30435e2579 ">
                                    <p>事件订阅，包括Oracle Internet Directory中<code class="codeph">cn=LabelSecurity</code>下的所有<code class="codeph">MODIFY</code> ， <code class="codeph">ADD</code>和<code class="codeph">DELETE</code>事件</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2648 d30435e2582 ">
                                    <p><code class="codeph">手术</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="66%" id="d30435e2668" headers="d30435e2579 ">
                                    <p>同步之间的时间间隔</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d30435e2668 d30435e2582 ">
                                    <p><code class="codeph">时间表</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>以下是使用<code class="codeph">oidprovtool</code>的示例，后面是对此示例中的参数的说明：</p><pre class="oac_no_warn" dir="ltr">oidprovtool operation = modify ldap_host = yippee ldap_port = 389 ldap_user = cn = defense_admin ldap_user_password = Easy2rem application_dn =“cn = db1，cn = OracleContext，ou = Americas，o = Oracle，c = US”organization_dn =“ou = Americas，o = Oracle，c = US“interface_name = LBACSYS.OLS_DIP_NTFY interface_type = PLSQL interface_connect_info = yippee：1521：db1：dip：newdip schedule = 60 event_subscription =”ENTRY：cn = LabelSecurity，cn = Products，cn = OracleContext，ou = Americas，o = Oracle，c = US：ADD（*）“event_subscription =”ENTRY：cn = LabelSecurity，cn = Products，cn = OracleContext，ou = Americas，o = Oracle，c = US：MODIFY（*）“event_subscription =”ENTRY ：cn = LabelSecurity，cn = Products，cn = OracleContext，ou = Americas，o = Oracle，c = US：DELETE“</pre><p>此示例<code class="codeph">oidprovtool</code>命令使用以下属性创建并启用新的DIP配置概要文件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>主机<code class="codeph">yippee</code> Oracle Internet Directory使用端口389</p>
                        </li>
                        <li>
                           <p>Oracle Internet Directory用户使用密码Easy2rem绑定DN： <code class="codeph">cn=defense_admin</code> defense_admin</p>
                        </li>
                        <li>
                           <p>数据库DN： <code class="codeph">cn=db1</code> ， <code class="codeph">cn=OracleContext</code> ， <code class="codeph">ou=Americas</code> ， <code class="codeph">o=Oracle</code> ， <code class="codeph">c=US</code></p>
                        </li>
                        <li>
                           <p>组织DN（管理上下文）： <code class="codeph">ou=Americas</code> ， <code class="codeph">o=Oracle</code> ， <code class="codeph">c=US</code></p>
                        </li>
                        <li>
                           <p>主机yippee上的数据库，侦听端口1521</p>
                        </li>
                        <li>
                           <p>Oracle SID： <code class="codeph">db1</code></p>
                        </li>
                        <li>
                           <p>数据库用户： <code class="codeph">dip</code>新密码<code class="codeph">newdip</code></p>
                        </li>
                        <li>
                           <p>将目录与连接的数据库同步的间隔：60秒</p>
                        </li>
                        <li>
                           <p>将<code class="codeph">cn=LabelSecurity</code>下的所有<code class="codeph">ADD</code> ， <code class="codeph">MODIFY</code>和<code class="codeph">DELETE</code>事件发送到DIP</p>
                        </li>
                     </ul>
                     <p>要启动DIP服务器，请使用<span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">/bin/oidctl.</code> 例如：</p><pre class="oac_no_warn" dir="ltr">oidctl server = odisrv connect = db2 config = 0 instance = 0 start</pre><p>此命令将通过连接到<code class="codeph">db2</code> （Oracle Internet Directory数据库）并启用<code class="codeph">config</code>设置为<code class="codeph">0</code>和实例编号<code class="codeph">0</code>来启动DIP服务器。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" title="使用Oracle Label Security安装和配置Oracle Internet Directory后，应将数据库与OID和OLS同步。">同步数据库和Oracle Internet Directory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3198"></a><div class="props_rev_3"><a id="GUID-33EE601D-CACD-4D38-924D-D7E553CECF45" name="GUID-33EE601D-CACD-4D38-924D-D7E553CECF45"></a><h4 id="OLSAG-GUID-33EE601D-CACD-4D38-924D-D7E553CECF45" class="sect4">修改供应配置文件</h4>
                  <div>
                     <p><code class="codeph">oidprovtool</code> <code class="codeph">modify</code>命令更改<code class="codeph">interface_connect_info</code>连接字符串的密码。
                     </p>
                     <div class="section">在更改密码之前，必须暂时禁用该配置文件。更改密码后，您可以重新启用配置文件。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用<code class="codeph">oidprovtool</code>禁用配置文件。</span><div>
                              <p>语法如下：</p><pre class="oac_no_warn" dir="ltr">oidprovtool operation = disable ldap_host = <span class="italic">host</span> ldap_port = <span class="italic">port</span> ldap_user_dn = <span class="italic">ldap_user_dn</span> ldap_user_password = <span class="italic">password</span> application_dn = <span class="italic">app_dn</span> organization_dn = <span class="italic">org_dn</span>
</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">oidprovtool operation = disable ldap_host = yippee ldap_port = 389</pre><pre class="oac_no_warn" dir="ltr">ldap_user = cn = defense_admin ldap_user_password = <span class="italic">password</span> application_dn =“cn = db1，cn = OracleContext，ou = Americas，o = Oracle，c = US”organization_dn =“ou = Americas，o = Oracle，c = US”</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下语法修改密码和连接信息：</span><div><pre class="oac_no_warn" dir="ltr">oidprovtool operation = modify ldap_host = <span class="italic">ldap_host</span> ldap_port = <span class="italic">port</span></pre><pre class="oac_no_warn" dir="ltr">ldap_user_dn = <span class="italic">ldap_user_dn</span> ldap_user_password = <span class="italic">password</span> application_dn = <span class="italic">app_dn</span> organization_dn = <span class="italic">org_dn</span> interface_connect_info = <span class="italic">new_connect_info</span></pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">oidprovtool operation = modify ldap_host = yippee ldap_port = 389</pre><pre class="oac_no_warn" dir="ltr">ldap_user = cn = defense_admin ldap_user_password = Easy2rem application_dn =“cn = db1，cn = OracleContext，ou = Americas，o = Oracle，c = US”organization_dn =“ou = Americas，o = Oracle，c = US”interface_connect_info = yippee： 1521：DB1：浸：NewestDIPpassword</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下语法重新启用配置文件：</span><div><pre class="oac_no_warn" dir="ltr">oidprovtool operation = enable ldap_host = <span class="italic">host</span> ldap_port = <span class="italic">port</span> ldap_user_dn = <span class="italic">ldap_user_dn</span> ldap_user_password = <span class="italic">password</span> application_dn = <span class="italic">app_dn</span> organization_dn = <span class="italic">org_dn</span></pre><pre class="oac_no_warn" dir="ltr"></pre><p>例如</p><pre class="oac_no_warn" dir="ltr">oidprovtool operation = enable ldap_host = yippee ldap_port = 389</pre><pre class="oac_no_warn" dir="ltr">ldap_user = cn = defense_admin ldap_user_password = <span class="italic">password</span> application_dn =“cn = db1，cn = OracleContext，ou = Americas，o = Oracle，c = US”organization_dn =“ou = Americas，o = Oracle，c = US”</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" title="使用Oracle Label Security安装和配置Oracle Internet Directory后，应将数据库与OID和OLS同步。">同步数据库和Oracle Internet Directory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG4188"></a><div class="props_rev_3"><a id="GUID-06391FAA-35A5-436A-88AF-EFFC322C8534" name="GUID-06391FAA-35A5-436A-88AF-EFFC322C8534"></a><h4 id="OLSAG-GUID-06391FAA-35A5-436A-88AF-EFFC322C8534" class="sect4">更改供应配置文件的数据库连接信息</h4>
                  <div>
                     <p>您可以在<code class="codeph">DIP</code>配置文件中更改数据库连接信息。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>禁用配置文件。</span><div>
                              <p>此步骤暂时停止将目录中的标签安全性更改传播到数据库，但不会丢失任何数据。启用配置文件后，由于禁用配置文件，目录中发生的任何标签安全更改都将与数据库同步。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>更新配置文件中的数据库连接信息。</span></li>
                        <li class="stepexpand"><span>启用配置文件。</span><div>
                              <div class="infoboxnote" id="GUID-06391FAA-35A5-436A-88AF-EFFC322C8534__GUID-0C0E5108-3193-4B5B-BF4F-FE66C284DA17">
                                 <p class="notep1">注意：</p>
                                 <p>数据库字符集必须与Oracle Internet Directory兼容，才能使Oracle Internet Directory的Oracle Label Security正常工作。只有这样，Oracle Internet Directory中的Label Security元数据才能与数据库成功同步。</p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-06391FAA-35A5-436A-88AF-EFFC322C8534__GUID-A33683B5-8B93-4AD9-AEF6-FCD8AD967F24">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>有关字符集和全球化支持参数的详细信息，请<a href="../nlspg/overview-of-globalization-support.html#NLSPG147" target="_blank"><span><cite>参见“Oracle数据库全球化支持指南”</cite></span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-33EE601D-CACD-4D38-924D-D7E553CECF45" title="oidprovtool modify命令更改interface_connect_info连接字符串的密码。">修改供应配置文件</a></p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" title="使用Oracle Label Security安装和配置Oracle Internet Directory后，应将数据库与OID和OLS同步。">同步数据库和Oracle Internet Directory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG4151"></a><div class="props_rev_3"><a id="GUID-7424FF7F-1791-410C-A627-211FCA9FABF3" name="GUID-7424FF7F-1791-410C-A627-211FCA9FABF3"></a><h4 id="OLSAG-GUID-7424FF7F-1791-410C-A627-211FCA9FABF3" class="sect4">使用Oracle Data Guard配置启用OID的Oracle Label Security</h4>
                  <div>
                     <p>要配置启用Oracle Directory的Oracle Label Security以使用Oracle Data Guard，首先要配置主数据库，然后配置辅助数据库。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82">步骤1：使用Data Guard设置启用目录的Oracle Label Security</a><br>您必须使用Oracle Data Guard设置启用目录的Oracle Label Security。
                        </li>
                        <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-15596614-FD87-4159-93B7-0E8E268C42D2">步骤2：切换后，更新OID配置文件</a><br>完成切换操作后，必须更新Oracle Internet Directory配置文件。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-01FB79AE-0DBF-4D54-87B6-49D1B7C5681B" title="使用Oracle Label Security安装和配置Oracle Internet Directory后，应将数据库与OID和OLS同步。">同步数据库和Oracle Internet Directory</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="OLSAG4153"></a><div class="props_rev_3"><a id="GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82" name="GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82"></a><h5 id="OLSAG-GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82" class="sect5">步骤1：使用Data Guard设置启用目录的Oracle Label Security</h5>
                     <div>
                        <p>您必须使用Oracle Data Guard设置启用目录的Oracle Label Security。</p>
                        <ol>
                           <li>
                              <p>为您的数据库配置Oracle Data Guard。</p>
                              <p>有关安装Oracle Data Guard的信息，请参阅<a href="../dgbkr/oracle-data-guard-broker-installation-requirements.html#DGBKR070" target="_blank"><span><cite>Oracle Data Guard Broker</cite></span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>在主数据库的Oracle Internet Directory中注册Oracle Label Security。</p>
                              <p>有关更多信息，请参阅<a href="oracle-label-security-using-oracle-internet-directory.html#GUID-D3F06D8B-3FF0-4EB8-81DD-3B27BA29D0EC" title="注册和配置过程需要为目录配置Oracle主目录，执行配置，设置密码和连接数据。">注册数据库和配置启用OID的Oracle Label Security</a> 。
                              </p>
                           </li>
                           <li>
                              <p>验证策略是否已传播到主数据库。</p>
                              <ol type="a">
                                 <li>
                                    <p>使用<code class="codeph">olsadmintool</code>实用程序或Oracle Enterprise Manager Cloud Control在Oracle Internet Directory中创建Oracle Label Security策略。
                                    </p>
                                    <p>有关使用<code class="codeph">olsadmintool</code>实用程序的详细信息，请参阅<a href="command-line-tools-for-label-security-using-oracle-internet-directory.html#GUID-CEBDC422-8872-46C1-8A3B-F1161539DD22" title="Oracle Label Security提供了使用Oracle Internet Directory的命令行工具。">使用Oracle Internet Directory的标签安全性命令行工具</a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>以<code class="codeph">LBACSYS</code>用户<code class="codeph">LBACSYS</code>连接到主数据库。</p>
                                 </li>
                                 <li>
                                    <p>查询<code class="codeph">DBA_SA_POLICIES</code>数据字典视图以确认策略已传播到主数据库。
                                    </p><pre class="oac_no_warn" dir="ltr">SELECT POLICY_NAME FROM DBA_SA_POLICIES;</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>以用户<code class="codeph">LBACSYS</code>身份连接到备用数据库，然后执行<code class="codeph">SELECT POLICY_NAME FROM DBA_SA_POLICIES;</code>查询以确保在主数据库上传播的策略位于备用数据库上，但重做日志应用过程。
                              </p>
                           </li>
                           <li id="GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABHIEBF">
                              <p>OLS-OID注册完成后，将<code class="codeph">ewallet.p12</code> ， <code class="codeph">sqlnet.ora</code>和<code class="codeph">ldap.ora</code>文件从主数据库复制到备用数据库。
                              </p>
                              <p>在故障转移的情况下，此步骤非常有用，并且无法访问主数据库。默认情况下，这些文件位于以下位置：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>钱包文件<code class="codeph">ewallet.p12</code>位于<code class="codeph">$ORACLE_BASE/admin/</code> <span class="italic"><code class="codeph">Oracle_SID</code></span> <code class="codeph">/wallet</code>目录或<code class="codeph">$ORACLE_HOME/admin/</code> <span class="italic"><code class="codeph">Oracle_SID</code></span> <code class="codeph">/wallet</code>目录中。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">sqlnet.ora</code>位于<code class="codeph">$ORACLE_HOME/dbs</code>目录中。（在将文件复制到备用数据库之前备份该文件。）
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ldap.ora</code>位于<code class="codeph">$ORACLE_HOME/dbs</code>目录中。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li id="GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABIIHGH">
                              <p>转到您复制<code class="codeph">ewallet.p12</code>文件的目录。
                              </p>
                           </li>
                           <li id="GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABGJHGA">
                              <p>使用以下语法创建与PKCS＃12钱包（ <code class="codeph">ewallet.p12</code> ）关联的SSO钱包文件（ <code class="codeph">cwallet.sso</code> ）：</p><pre class="oac_no_warn" dir="ltr">orapki钱包创建-wallet <span class="italic">wallet_location</span> -auto_login [-pwd <span class="italic">密码</span> ]</pre></li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-7424FF7F-1791-410C-A627-211FCA9FABF3" title="要配置启用Oracle Directory的Oracle Label Security以使用Oracle Data Guard，首先要配置主数据库，然后配置辅助数据库。">使用Oracle Data Guard配置启用OID的Oracle Label Security</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="OLSAG4154"></a><div class="props_rev_3"><a id="GUID-15596614-FD87-4159-93B7-0E8E268C42D2" name="GUID-15596614-FD87-4159-93B7-0E8E268C42D2"></a><h5 id="OLSAG-GUID-15596614-FD87-4159-93B7-0E8E268C42D2" class="sect5">步骤2：切换后，更新OID配置文件</h5>
                     <div>
                        <p>完成切换操作后，必须更新Oracle Internet Directory配置文件。</p>
                        <div class="section">
                           <p>在这一步，你有后，你已经完成了切换和完成的步骤<a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABHIEBF">5</a> ， <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABIIHGH">6</a>和<a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82__BABGJHGA">7</a>下的<a href="oracle-label-security-using-oracle-internet-directory.html#GUID-AE97E75D-511A-4C48-9D72-0B3EC452CD82" title="您必须使用Oracle Data Guard设置启用目录的Oracle Label Security。">第1步：设置目录启用Oracle标签安全与数据保护</a> ，你准备更新Oracle Internet Directory中的配置简介新主数据库的连接信息。
                           </p>
                           <p>如果未完成以下过程，则策略将继续传播到新的备用数据库，并且旧的主数据库将失败，并且<code class="codeph">ORA-16000 database open for read-only access</code>错误。使用新的主数据库连接信息更新配置文件后，策略传播将在新的主数据库中进行。此外，这些策略通过重做应用过程传播到新备用数据库。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在主计算机或备用计算机上，为新的主数据库运行以下<code class="codeph">oidprovtool</code>实用程序命令。</span><div><pre class="oac_no_warn" dir="ltr">oidprovtool operation = modify \ ldap_host = <span class="italic">OID_Server_hostname</span> ldap_port = <span class="italic">OID_Server_Port</span> \ ldap_user_dn =“cn = orcladmin”\ application_dn =“ <span class="italic">LDAP_distinguised_name_of_application</span> ”\</pre><p><code class="codeph">application_dn</code>设置可以从<code class="codeph">dn=</code> <span class="italic"><code class="codeph">dbname</code></span> ， <code class="codeph">cn=oraclecontext</code> ， <span class="italic"><code class="codeph">default_admin_context</code></span> <code class="codeph">cn=oraclecontext</code> 。<code class="codeph">ldap.ora</code>文件列出了<span class="italic"><code class="codeph">default_admin_context</code></span>设置。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>出现提示时，输入LDAP用户密码。</span><div><pre class="oac_no_warn" dir="ltr">请输入LDAP密码：</pre></div>
                           </li>
                           <li class="stepexpand"><span>出现提示时，按以下格式输入接口连接信息：</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">host</span> ： <span class="italic">port</span> ： <span class="italic">service_name</span> ：dip： <span class="italic">password</span>
</pre><p><code class="codeph">DIP</code>是随Oracle Label Security一起安装的Oracle目录集成和配置（DIP）帐户。此帐户是作为启用Oracle Internet Directory的Oracle Label Security的安装过程的一部分自动创建的。
                                 </p>
                                 <p>要指定无接口连接信息，请省略任何设置，然后按<span class="bold">Return</span>键。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>完成配置文件后，重新启动<code class="codeph">DIP</code>服务器。</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-7424FF7F-1791-410C-A627-211FCA9FABF3" title="要配置启用Oracle Directory的Oracle Label Security以使用Oracle Data Guard，首先要配置主数据库，然后配置辅助数据库。">使用Oracle Data Guard配置启用OID的Oracle Label Security</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="OLSAG037"></a><div class="props_rev_3"><a id="GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7" name="GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7"></a><h3 id="OLSAG-GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7" class="sect3">安全角色和允许的操作</h3>
               <div>
                  <p>Oracle Label Security允许Oracle Internet Directory的特定任务和访问级别，包括对启用目录的OLS策略创建者的限制。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB">Oracle Internet Directory的允许任务和访问级别</a><br>要在Oracle Internet Directory中管理Oracle Label Security策略，某些实体将在目录中获得访问控制权限。
                     </li>
                     <li class="ulchildlink"><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-F567BEB6-633E-41FE-B7D6-74E34110B030">对启用目录的Oracle Label Security的策略创建者的限制</a><br>Policy Creators组的成员只能创建，浏览和删除Oracle Label Security策略。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               <a id="OLSAG3200"></a><a id="OLSAG3199"></a><div class="props_rev_3"><a id="GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB" name="GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB"></a><h4 id="OLSAG-GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB" class="sect4">Oracle Internet Directory的允许任务和访问级别</h4>
                  <div>
                     <p>要在Oracle Internet Directory中管理Oracle Label Security策略，某些实体将在目录中获得访问控制权限。</p>
                     <p>访问控制机制由Oracle Internet Directory提供。</p>
                     <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB__G1035529" title="此表列出了某些实体以及每个实体可以执行的任务。">表7-3</a>以抽象的术语描述了这些实体及其能够执行的任务。
                     </p>
                     <div class="tblformalwide" id="GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB__G1035529">
                        <p class="titleintable">表7-3某些实体可以执行的任务</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="某些实体可以执行的任务" width="100%" border="1" summary="This table lists certain entities and the tasks that each one can perform." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="27%" id="d30435e3708">实体</th>
                                 <th align="left" valign="bottom" width="73%" id="d30435e3711">此实体可以执行的任务</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d30435e3716" headers="d30435e3708 ">
                                    <p>政策制定者</p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d30435e3716 d30435e3711 ">
                                    <p>创建新（或删除现有）策略，创建新（或删除现有）策略管理员。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d30435e3723" headers="d30435e3708 ">
                                    <p>策略管理员</p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d30435e3723 d30435e3711 ">
                                    <p>对于策略：修改现有策略选项和审核设置，启用或禁用策略审核。</p>
                                    <p>对于标签组件：创建，修改或删除级别，隔离专区和组，例如通过创建或删除其子组来更改其完整或长名称或（对于组）。</p>
                                    <p>对于企业用户：从策略中删除企业用户，修改企业用户的最高或最低级别，对隔离专区或组的读取，写入和行访问权限，策略权限以及标签配置文件。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB__G1035696" title="此表列出了可分辨名称（DN）中的可能条目，并标识了策略创建者，策略管理员和数据库允许的访问级别。">表7-4</a>列出了策略创建者，策略管理员和标签安全性用户允许或禁止的特定访问级别操作。
                     </p>
                     <div class="tblformalwide" id="GUID-09F91F7C-81E2-4AC4-86C6-E9CC2F0ED2BB__G1035696">
                        <p class="titleintable">表7-4 OID中用户允许的访问级别</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="OID中用户允许的访问级别" width="100%" border="1" summary="This table lists possible entries in a Distinguished Name (DN) and identifies the access levels allowed for policy creators, policy administrators, and databases." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="28%" id="d30435e3751">项</th>
                                 <th align="left" valign="bottom" width="25%" id="d30435e3754">政策创作者</th>
                                 <th align="left" valign="bottom" width="23%" id="d30435e3757">政策管理员</th>
                                 <th align="left" valign="bottom" width="24%" id="d30435e3760">数据库</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3765" headers="d30435e3751 ">
                                    <p><code class="codeph">CN =政策</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3765 d30435e3754 ">
                                    <p>可以修改</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3765 d30435e3757 ">
                                    <p>无法访问</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3765 d30435e3760 ">
                                    <p>无法访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3779" headers="d30435e3751 ">
                                    <p><code class="codeph">cn=Admins</code> ， <code class="codeph">cn=Policy1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3779 d30435e3754 ">
                                    <p>可以修改</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3779 d30435e3757 ">
                                    <p>无法访问</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3779 d30435e3760 ">
                                    <p>无法访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3796" headers="d30435e3751 ">
                                    <p><code class="codeph">uniqueMember</code> ： <code class="codeph">cn=Policy1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3796 d30435e3754 ">
                                    <p>可以浏览</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3796 d30435e3757 ">
                                    <p>可以浏览</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3796 d30435e3760 ">
                                    <p>可以修改</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3813" headers="d30435e3751 ">
                                    <p><code class="codeph">CN = PolicyCreators</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3813 d30435e3754 ">
                                    <p>没有访问<a id="fn_1" name="fn_1" href="#fn_1" the="" group="" cn="OracleContextAdmins" is="" owner="" of="" so="" members="" in="" can="" modify="" onclick="footdisplay(1, "><sup>脚1</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3813 d30435e3757 ">
                                    <p>无法访问</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3813 d30435e3760 ">
                                    <p>无法访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3830" headers="d30435e3751 ">
                                    <p><code class="codeph">cn=Levels</code> ， <code class="codeph">cn=Policy1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3830 d30435e3754 ">
                                    <p>可以浏览和删除</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3830 d30435e3757 ">
                                    <p>可以修改</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3830 d30435e3760 ">
                                    <p>无法访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3847" headers="d30435e3751 ">
                                    <p><code class="codeph">cn=Compartments</code> ， <code class="codeph">cn=Policy1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3847 d30435e3754 ">
                                    <p>可以浏览和删除</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3847 d30435e3757 ">
                                    <p>可以修改</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3847 d30435e3760 ">
                                    <p>无法访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3864" headers="d30435e3751 ">
                                    <p><code class="codeph">cn=Groups</code> ， <code class="codeph">cn=Policy1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3864 d30435e3754 ">
                                    <p>可以浏览和删除</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3864 d30435e3757 ">
                                    <p>可以修改</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3864 d30435e3760 ">
                                    <p>无法访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3881" headers="d30435e3751 ">
                                    <p>CN = AuditOptions，CN =策略1</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3881 d30435e3754 ">
                                    <p>可以浏览和删除</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3881 d30435e3757 ">
                                    <p>可以修改</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3881 d30435e3760 ">
                                    <p>无法访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3894" headers="d30435e3751 ">
                                    <p>CN =配置文件，CN =策略1</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3894 d30435e3754 ">
                                    <p>可以浏览和删除</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3894 d30435e3757 ">
                                    <p>可以修改</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3894 d30435e3760 ">
                                    <p>无法访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3907" headers="d30435e3751 ">
                                    <p>CN =标签，CN =策略1</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3907 d30435e3754 ">
                                    <p>可以浏览和删除</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3907 d30435e3757 ">
                                    <p>可以修改</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3907 d30435e3760 ">
                                    <p>无法访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d30435e3920" headers="d30435e3751 ">
                                    <p>CN = DBServers</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d30435e3920 d30435e3754 ">
                                    <p>没有访问<a id="fn_2" name="fn_2" href="#fn_2" the="" group="" cn="OracleDBCreators" is="" owner="" of="" so="" members="" in="" can="" modify="" onclick="footdisplay(2, "><sup>脚2</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d30435e3920 d30435e3757 ">
                                    <p>无法访问</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d30435e3920 d30435e3760 ">
                                    <p>无法访问</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>组cn = OracleContextAdmins是组cn = PolicyCreators的所有者，因此cn = OracleContextAdmins中的成员可以修改cn = PolicyCreators。</p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注2</sup></p><p>组cn = OracleDBCreators是组cn = DBServers的所有者，因此cn = OracleDBCreators中的成员可以修改cn = DBServers。</p>
                     <p></p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7" title="Oracle Label Security允许Oracle Internet Directory的特定任务和访问级别，包括对启用目录的OLS策略创建者的限制。">安全角色和允许的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3201"></a><div class="props_rev_3"><a id="GUID-F567BEB6-633E-41FE-B7D6-74E34110B030" name="GUID-F567BEB6-633E-41FE-B7D6-74E34110B030"></a><h4 id="OLSAG-GUID-F567BEB6-633E-41FE-B7D6-74E34110B030" class="sect4">对启用目录的Oracle Label Security的策略创建者的限制</h4>
                  <div>
                     <p>Policy Creators组的成员只能创建，浏览和删除Oracle Label Security策略。</p>
                     <p>即使已明确添加到该策略的Policy Admins组，此用户也无法执行策略管理任务，例如创建标签组件和添加用户。简而言之，策略创建者不能是任何策略的管理员。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-5502785E-8A05-4DE4-836F-EDCC33F12FD7" title="Oracle Label Security允许Oracle Internet Directory的特定任务和访问级别，包括对启用目录的OLS策略创建者的限制。">安全角色和允许的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="OLSAG3202"></a><a id="OLSAG038"></a><div class="props_rev_3"><a id="GUID-4961D225-DE89-4B96-A183-EA9D837C994F" name="GUID-4961D225-DE89-4B96-A183-EA9D837C994F"></a><h3 id="OLSAG-GUID-4961D225-DE89-4B96-A183-EA9D837C994F" class="sect3">使用OLS启用OID时取代PL / SQL语句</h3>
               <div>
                  <p>使用Oracle Label Security启用Oracle Internet Directory时，有几个过程被取代。</p>
                  <p>只允许用户<code class="codeph">LBACSYS</code>运行这些程序。
                  </p>
                  <p>对于表中列出的某些过程，它们提供的功能将替换为第二列中指定的<code class="codeph">olsadmintool</code>命令（并在<a href="oracle-label-security-reference.html#GUID-3EF3FD4E-A001-4110-9036-23022F2CD001" title="Oracle Label Security提供数据字典表，数据字典视图和用户创建的审计视图。">Oracle Label Security Tables and Views中进行了解释</a> ）。
                  </p>
                  <div class="tblformalwide" id="GUID-4961D225-DE89-4B96-A183-EA9D837C994F__GUID-C6C02E2F-0145-4B23-8D65-53F2E2B23A61">
                     <p class="titleintable">表7-5使用Oracle Internet Directory时<span class="bold">olsadmintool</span>取代的过程</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="使用Oracle Internet Directory时olsadmintool取代的过程" width="100%" border="1" summary="This table lists OLS procedures that are superseded by olsadmintool commands when OLS is used with OID, and identifies the corresponding olsadmintool for each such procedure." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="49%" id="d30435e4096">禁用程序</th>
                              <th align="left" valign="bottom" width="51%" id="d30435e4099">由olsadmintool命令替换</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4107" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_SYSDBA.CREATE_POLICY</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4107 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool createpolicy</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4116" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_SYSDBA.ALTER_POLICY</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4116 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool alterpolicy</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4125" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_SYSDBA.DROP_POLICY</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4125 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool droppolicy</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4134" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.CREATE_LEVEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4134 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool createlevel</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4143" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.ALTER_LEVEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4143 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool alterlevel</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4152" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.DROP_LEVEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4152 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool droplevel</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4161" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.CREATE_COMPARTMENT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4161 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool createcompartment</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4170" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.ALTER_COMPARTMENT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4170 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool altercompartment</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4179" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.DROP_COMPARTMENT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4179 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool dropcompartment</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4188" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.CREATE_GROUP</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4188 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool creategroup</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4197" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.ALTER_GROUP</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4197 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool altergroup</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4207" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.ALTER_GROUP_PARENT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4207 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool altergroup</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4216" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_COMPONENTS.DROP_GROUP</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4216 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool dropgroup</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4225" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_LEVELS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4225 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4233" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_COMPARTMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4233 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4241" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_GROUPS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4241 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4249" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.ADD_COMPARTMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4249 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4257" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.ALTER_COMPARTMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4257 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4265" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.DROP_COMPARTMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4265 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4273" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.DROP_ALL_COMPARTMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4273 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4281" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.ADD_GROUPS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4281 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4289" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.ALTER_GROUPS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4289 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4298" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.DROP_GROUPS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4298 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4306" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.DROP_ALL_GROUPS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4306 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4314" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_USER_LABELS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4314 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool</code> <code class="codeph">createprofile;</code> <code class="codeph">olsadmintool</code> <code class="codeph">adduser;</code> <code class="codeph">olsadmintool</code> <code class="codeph">dropprofile;</code> <code class="codeph">olsadmintool</code> <code class="codeph">dropuser;</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4346" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_DEFAULT_LABEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4346 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4354" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_ROW_LABEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4354 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4362" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.DROP_USER_ACCESS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4362 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool dropuser</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4371" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_USER_ADMIN.SET_USER_PRIVS</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4371 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool</code> <code class="codeph">createprofile;</code> <code class="codeph">olsadmintool</code> <code class="codeph">adduser;</code> <code class="codeph">olsadmintool</code> <code class="codeph">dropprofile;</code> <code class="codeph">olsadmintool</code> <code class="codeph">dropuser;</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4401" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_AUDIT_ADMIN.AUDIT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4401 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool</code> <code class="codeph">audit</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4413" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_AUDIT_ADMIN.NOAUDIT</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4413 d30435e4099 ">
                                 <p><code class="codeph">olsadmintool</code> <code class="codeph">noaudit</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4425" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_AUDIT_ADMIN.AUDIT_LABEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4425 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d30435e4433" headers="d30435e4096 ">
                                 <p><code class="codeph">SA_AUDIT_ADMIN.NOAUDIT_LABEL</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d30435e4433 d30435e4099 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG039"></a><div class="props_rev_3"><a id="GUID-1083B9CB-3D22-42B4-AA32-A817A3426AF5" name="GUID-1083B9CB-3D22-42B4-AA32-A817A3426AF5"></a><h3 id="OLSAG-GUID-1083B9CB-3D22-42B4-AA32-A817A3426AF5" class="sect3">策略管理员的Oracle Label Security过程</h3>
               <div>
                  <p><code class="codeph">SA_POLICY_ADMIN</code> PL / SQL包中的几个过程只允许由策略管理员（Oracle Internet Directory中定义的企业用户）运行。
                  </p>
                  <p>这些程序如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.APPLY_SCHEMA_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.DISABLE_SCHEMA_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.DISABLE_TABLE_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.ENABLE_SCHEMA_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.ENABLE_TABLE_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.GRANT_PROG_PRIVS</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.POLICY_SUBSCRIBE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.POLICY_UNSUBSCRIBE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.REMOVE_SCHEMA_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.REMOVE_TABLE_POLICY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.SET_PROG_PRIVS</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SA_POLICY_ADMIN.REVOKE_PROG_PRIVS</code></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
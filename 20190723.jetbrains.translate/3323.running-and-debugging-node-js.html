<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="running-and-debugging-node-js.html"></link><meta charset="UTF-8"></meta><title>运行和调试Node.js  - 帮助| WebStorm</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Running_and_Debugging_Node_JS"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索WebStorm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="running-and-debugging-node-js.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>WebStorm 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="true"><h1 id="Running_and_Debugging_Node_JS.xml" data-toc="Running_and_Debugging_Node_JS">运行和调试Node.js</h1>                                    <p id="79b76988">WebStorm可帮助您运行和调试Node.js应用程序。您可以调试从WebStorm启动的应用程序以及附加到已运行的应用程序。</p>        <div class="chapter"><h2 id="running" data-toc="Running_and_Debugging_Node_JS#running">运行Node.js应用程序</h2>            <p id="ecfe01ad">WebStorm根据类型<span class="emphasis">的Node.js</span>的运行配置运行的Node.js应用程序。WebStorm还使用此配置在<a href="running-and-debugging-node-js.html#debugLocal">本地调试Node.js应用程序</a> 。</p>                <section class="procedure-steps"><h2 id="Node.js_run">创建Node.js运行/调试配置</h2><ol class="list _decimal"><li class="list__item" id="ea20e67f"><p>从主菜单中，选择<span class="menupath" data-skip-index="skip">“运行”|编辑配置</span> ，然后在“ <span class="control">编辑配置”</span>对话框中单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add@2x.png" width="16" alt="图标一般添加">在工具栏上，从列表中选择<span class="control">Node.js.</span>将打开“ <a href="run-debug-configuration-node-js.html">运行/调试配置：Node.js”</a>对话框。</p></li><li class="list__item" id="b71234e1"><p>指定要使用的Node.js解释器。这可以是<a href="developing-node-js-applications.html#ws_node_wsl">Windows子系统Linux上</a>的<a href="developing-node-js-applications.html#ws_node_configure_local_node_interpreter">本地Node.js解释器</a>或<a href="developing-node-js-applications.html#ws_node_wsl">Node.js。</a></p></li><li class="list__item" id="6156bc92"><p>在<span class="control">JavaScript File</span>字段中，指定启动它的应用程序的主文件的路径（例如， <a href="http://expressjs.com/" data-bypass="yes" target="_blank"><span>Node.js Express应用程序的</span></a> <span class="filepath">bin / www</span> ）。</p></li><li class="list__item" id="ws_node_run_config_optionally">                        <span class="emphasis">可选：</span>                        <ul class="list _bullet"><li class="list__item" id="5d908b61"><p>指定自定义Node.js开头的<span class="control">节点参数</span> 。例如，要使您的应用程序可以进行远程调试，请根据您的Node.js版本键入其中一个调试标志：-- <code class="code">--inspect=&lt;debugger port&gt;</code> for Node.js 6.5及更高版本或<code class="code">--debug=&lt;debugger port&gt;</code>对于早于8的任何Node.js版本。默认调试器端口为<code class="code">5858</code> 。</p></li><li class="list__item" id="ce65fe0a"><p>在“ <span class="control">应用程序参数”</span>文本框中，指定要在启动时通过<a href="http://nodejs.org/docs/latest/api/process.html#process.argv" data-bypass="yes" target="_blank"><span>process.argv</span></a>数组传递给应用程序的Node.js特定参数。</p></li></ul>                    </li></ol></section>            <section class="procedure-steps"><h2 id="52cbe12f">运行应用程序</h2><ul class="list _no-style"><li class="list__item" id="1693b504"><p>在工具栏上的<span class="control">Select run / debug configuration</span>下拉列表中选择新创建的<span class="control">Node.js</span>配置，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="跑">在它的旁边。应用程序启动，“ <a href="run-tool-window.html"><span>运行工具”窗口</span></a>打开，显示应用程序输出。</p></li></ul></section>        <p id="ws_manage_logs_when_running_node_app">如果您在应用程序中使用像<a href="https://www.npmjs.com/package/morgan" data-bypass="yes" target="_blank"><span>morgan</span></a>这样的日志记录工具，并且此工具将日志写入文件，则可以在“ <span class="control">运行”</span>工具窗口的<span class="control">“</span> <span class="control">控制台”</span>选项卡中查看这些日志。</p>        <section class="procedure-steps"><h2 id="99e71e3d">在运行Node.js应用程序时管理日志</h2><ol class="list _decimal"><li class="list__item" id="5a31c9a6"><p><a href="running-and-debugging-node-js.html#Node.js_run">如上所述</a>创建Node.js运行/调试配置<a href="running-and-debugging-node-js.html#Node.js_run">，</a>然后转到“ <span class="control">日志”</span>选项卡。</p></li><li class="list__item" id="40cbbb52"><p>点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="图标一般添加svg"> <span class="control">在控制台</span>字段中<span class="control">显示</span>的<span class="control">日志文件</span>旁边，其中列出了可用的日志文件（如果有）。</p></li><li class="list__item" id="ed9fd527"><p>在打开的“ <span class="control">编辑日志文件别名”</span>对话框中，键入要在日志条目列表中显示的别名，并指定日志文件的位置。选择是要显示此模式所涵盖的所有文件还是仅显示最后一个文件。</p></li><li class="list__item" id="d02ce772"><p>单击“ <span class="control">确定”</span>返回“ <span class="control">Node.js运行/调试配置”</span>对话框，其中新的日志文件将添加到列表中。选中旁边的<span class="control">Is Active</span>复选框。要跳过以前的内容，请选中“ <span class="control">跳过内容”</span>复选框。</p></li><li class="list__item" id="8d4cb488">                <span class="emphasis">可选：</span>                <ul class="list _bullet"><li class="list__item" id="9836c067"><p>要启用将控制台输出保存到日志文件，请选中“ <span class="control">将控制台输出保存到文件”</span>复选框并指定文件位置。</p></li><li class="list__item" id="2a6b726a"><p>选择何时显示<span class="control">控制台</span> 。</p></li></ul>                <figure><img alt="Node.js运行/调试配置：日志选项卡" title="Node.js运行/调试配置：日志选项卡" src="../img/idea/2019.1/ws_logs_in_node_configuration.png" id="9a1d7d5c" width="600" height="280"></figure>            </li></ol></section>        </div>        <div class="chapter"><h2 id="node_debugging_overview" data-toc="Running_and_Debugging_Node_JS#node_debugging_overview">调试Node.js应用程序</h2>            <p id="e7b27401">WebStorm使调试Node.js应用程序变得更容易。您可以在JavaScript或TypeScript代码中放置断点，这样您就不再需要任何<code class="code">debugger</code>和<code class="code">console.log()</code>语句。您可以做很多事情来帮助您探索代码并了解错误的位置。在<span class="control">调试</span>工具窗口中，您可以查看调用堆栈和当前状态的变量，在编辑器中计算表达式，并逐步执行代码。</p>            <div class="chapter"><h3 id="node_debugging_modes" data-toc="Running_and_Debugging_Node_JS#node_debugging_modes">本地和远程调试</h3>                <p id="309a342d">WebStorm支持两种调试模式：</p><ul class="list _bullet"><li class="list__item" id="7671cfe6"><p>                            <span class="emphasis">本地调试</span> ：在此模式下，您的应用程序从WebStorm启动，并在您的计算机上本地运行。要调试它，请使用<span class="control">Node.js</span>配置。</p></li><li class="list__item" id="ws_node_debugging_modes_remote"><p>                            <span class="emphasis">调试远程应用程序</span> ：在此模式下，应用程序在<a href="https://nodejs.org/en/docs/guides/debugging-getting-started/" data-bypass="yes" target="_blank"><span>调试模式下</span></a>的远程环境中<a href="https://nodejs.org/en/docs/guides/debugging-getting-started/" data-bypass="yes" target="_blank"><span>运行</span></a> ，WebStorm将附加到正在运行的进程。WebStorm识别<code class="code">--inspect</code>和<code class="code">--debug</code>标志，因此您可以使任何应用程序可以进行远程调试。WebStorm支持使用<a href="https://nodejs.org/api/debugger.html#debugger_v8_inspector_integration_for_node_js" data-bypass="yes" target="_blank"><span>Chrome调试协议</span></a>和<a href="https://nodejs.org/en/docs/guides/debugging-getting-started/#legacy-debugger" data-bypass="yes" target="_blank"><span>V8调试协议</span></a> （也称为<span class="control">旧版协议</span> ）进行远程调试。在任何一种情况下，都会通过<span class="emphasis">Attach to Node.js / Chrome</span>类型的运行/调试配置启动调试会话。</p></li></ul>                            </div><div class="chapter"><h3 id="debugLocal" data-toc="Running_and_Debugging_Node_JS#debugLocal">在本地调试Node.js应用程序</h3>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="4ea3ff39"><p>必要时在Node.js代码中设置<a href="using-breakpoints.html">断点</a> 。</p></li><li class="list__item" id="aa5f85be"><p><a href="running-and-debugging-node-js.html#Node.js_run">如上所述</a>创建Node.js运行/调试配置。如有必要，WebStorm可以生成<span class="emphasis">JavaScript调试</span>配置，并与<span class="emphasis">Node.js</span>配置一起自动启动它，如<a href="running-and-debugging-node-js.html#ws_node_start_jsdebug_rc_with_nodejs_rc">启动JavaScript调试配置和Node.js配置中所述</a> 。</p></li><li class="list__item" id="b8f2c97c"><p>在工具栏上的<span class="control">Select run / debug configuration</span>下拉列表中选择新创建的<span class="control">Node.js</span>配置，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.startDebugger.svg@2x.png" width="16" alt="图标动作startDebugger svg">在它的旁边。<a href="debug-tool-window.html"><span>调试工具窗口</span></a>打开。</p></li><li class="list__item" id="4073202f"><p>执行将触发使用断点执行代码的步骤。</p></li><li class="list__item" id="18e2f280"><p>切换到WebStorm，现在启用了<span class="control">调试</span>工具窗口的控件。继续调试会话 - <a href="stepping-through-the-program.html">逐步执行断点</a> ，在帧之间切换，即时更改值， <a href="examining-suspended-program.html">检查暂停的程序</a> ， <a href="evaluating-expressions.html">计算表达式</a>以及<a href="adding-editing-and-removing-watches.html">设置监视</a> 。</p><figure id="5d197631" width="600" height="360"><img class="js-gif" src="../img/idea/2019.1/ws_node_debug-local.png" width="600" data-gif-src="/help/img/idea/2019.1/ws_node_debug-local.animated.gif" style="width:600px"></figure>                </li></ol></section></div>            <div class="chapter"><h3 id="ws_node_debugging_debugger_console" data-toc="Running_and_Debugging_Node_JS#ws_node_debugging_debugger_console">使用交互式调试器控制台</h3>                <aside class="tip sideblock" rel="ws_node_debugging_debugger_console_input" id="e12679f6" data-title="">                    <p id="cb90b4ed">键入多行代码片段时，按<kbd data-primary_default="Shift+Enter" data-primary_default_for_gnome="Shift+Enter" data-primary_default_for_kde="Shift+Enter" data-primary_default_for_xwin="Shift+Enter" data-primary_emacs="Shift+Enter" data-primary_visual_studio="Shift+Enter" data-primary_eclipse="Shift+Enter" data-secondary_mac_os_x_10.5_="⇧⏎" data-secondary_mac_os_x="⇧⏎" data-secondary_eclipse_mac_os_x="⇧⏎">Shift + Enter</kbd>开始新行， <kbd data-primary_default="Ctrl+Enter" data-primary_default_for_gnome="Ctrl+Enter" data-primary_default_for_kde="Ctrl+Enter" data-primary_default_for_xwin="Ctrl+Enter" data-primary_emacs="Ctrl+Enter" data-primary_visual_studio="Ctrl+Enter" data-primary_eclipse="Ctrl+Enter" data-secondary_mac_os_x_10.5_="⌘⏎" data-secondary_mac_os_x="⌘⏎" data-secondary_eclipse_mac_os_x="⌘⏎">按Ctrl + Enter</kbd>分割行。</p>                </aside>                <p id="e933a162">在调试Node.js应用程序时，WebStorm在“ <span class="control">调试”</span>工具窗口中显示两个控制台选项卡 - <span class="control">控制台</span>和<span class="control">调试器控制台</span> 。</p><ul class="list _bullet"><li class="list__item" id="1d95e188"><p><span class="control">Console</span>选项卡显示节点进程本身的输出，即直接写入<a href="https://nodejs.org/api/process.html#process_process_stdout" data-bypass="yes" target="_blank"><span>process.stdout</span></a>和<a href="https://nodejs.org/api/process.html#process_process_stderr" data-bypass="yes" target="_blank"><span>process.stderr</span></a>或使用<a href="https://nodejs.org/api/console.html#console_class_console" data-bypass="yes" target="_blank"><span>控制台记录的所有内容<a href="https://nodejs.org/api/console.html#console_class_console" data-bypass="yes" target="_blank"><span>。*</span></a> 。</p><figure><img alt="ws_node_debugging_process_console.png" title="ws_node_debugging_process_console.png" src="../img/idea/2019.1/ws_node_debugging_process_console.png" id="5a9de8b8" width="600" height="273"></figure>                        </li><li class="list__item" id="ws_node_debugging_debugger_console_input"><p><span class="control">调试器控制台</span>允许您执行JavaScript代码，查看<a href="https://nodejs.org/api/console.html#console_console_log_data_args" data-bypass="yes" target="_blank"><span>console.log</span></a>消息，跳转到调用<code class="code">console.log</code>的位置，并使用<a href="https://nodejs.org/api/debugger.html#debugger_v8_inspector_integration_for_node_js" data-bypass="yes" target="_blank"><span>Chrome调试协议</span></a>提供的其他控制台功能。</p><figure><img alt="ws_node_debugging_debug_console.png" title="ws_node_debugging_debug_console.png" src="../img/idea/2019.1/ws_node_debugging_debug_console.png" id="062a83a8" width="600" height="274"></figure>                        </li></ul>                            </div>            <div class="chapter"><h3 id="remote_debugging" data-toc="Running_and_Debugging_Node_JS#remote_debugging">调试正在运行的Node.js应用程序</h3>                <aside class="tip sideblock" rel="ws_node_debug_remote_chrome" id="45534921" data-title="">                    <p id="da0d73fe">使用此协议调试使用<code class="code">--inspect</code>标志启动的应用程序。此标志用于6.3之后的Node.js版本。</p>                </aside>                <aside class="tip sideblock" rel="ws_debug_node_remote_inspect_mappings" id="6c2a3dd2" data-title="">                    <p id="85cd87db">                        <span class="emphasis">（可选）</span>在“ <span class="control">本地文件</span>的<span class="control">远程URL”</span>区域中指定项目文件夹的远程路径。如果远程环境中的应用程序根文件夹与本地根文件夹的名称不同，这将非常有用。</p>                </aside>                <aside class="tip sideblock" rel="ws_node_debug_remote_tcp" id="3ecbbe17" data-title="">                    <p id="b352bc8e">使用此协议调试使用<code class="code">--debug</code>标志启动的应用程序。此标志用于早于8的Node.js版本。</p>                </aside>                <p id="3fe92a6a">使用WebStorm，您可以调试在远程环境中运行的应用程序。WebStorm支持使用<a href="https://nodejs.org/api/debugger.html#debugger_v8_inspector_integration_for_node_js" data-bypass="yes" target="_blank"><span>Chrome调试协议</span></a>和<a href="https://nodejs.org/en/docs/guides/debugging-getting-started/#legacy-debugger" data-bypass="yes" target="_blank"><span>V8调试协议</span></a> （也称为<span class="control">旧版协议</span> ）进行远程调试。在任何一种情况下，都会通过<span class="emphasis">Attach to Node.js / Chrome</span>配置启动调试会话。</p>                <section class="procedure-steps"><h2 id="ws_node_debug_remote_chrome">使用Chrome调试协议进行调试</h2><ol class="list _decimal"><li class="list__item" id="151b5c94"><p>根据需要设置断点。</p></li><li class="list__item" id="ws_node_debug_remote_chrome_create_attach_run_config"><p>选择<span class="menupath" data-skip-index="skip">运行|</span>从主菜单中<span class="menupath" data-skip-index="skip">编辑配置</span> ，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="添加新配置">在打开的“ <span class="control">编辑配置”</span>对话框中，从列表中选择“ <span class="control">附加到Node.js / Chrome</span> ”。<a href="run-debug-configuration-node-js-remote-debug.html">将</a>打开“ <a href="run-debug-configuration-node-js-remote-debug.html">运行/调试配置：附加到Node.js / Chrome”</a>对话框。</p></li><li class="list__item" id="ws_debug_node_remote_inspect_mappings"><p>在启动要连接的Node.js进程时，指定运行目标应用程序的主机以及传递给<code class="code">--inspect</code>的端口。从<span class="control">终端</span>工具窗口或控制正在运行的应用程序的<a href="run-tool-window.html">运行</a>工具窗口中的信息消息<code class="code">Debugger listening &lt;host&gt;:&lt;port&gt;</code>复制端口号。默认端口为9229。</p></li><li class="list__item" id="68b2f8d2"><p>在“ <span class="control">附加到”</span>区域中，选择<span class="control">Chrome或Node.js&gt; 6.3以--inspect开头</span> 。</p></li><li class="list__item" id="ws_node_debugging_remote_debugging_chrome_protocol_common_steps_start"><p>在工具栏上的<span class="control">选择运行/调试配置</span>下拉列表中选择新创建的<span class="control">附加到Node.js / Chrome</span>配置，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.startDebugger.svg@2x.png" width="16" alt="图标动作startDebugger svg">在它的旁边。<a href="debug-tool-window.html"><span>调试工具窗口</span></a>打开。</p></li><li class="list__item" id="af09d6df"><p>执行将在断点处触发代码的操作。控制调试会话将返回WebStorm。</p></li><li class="list__item" id="9cd1c9cb"><p>切换到WebStorm。在“ <span class="control">调试”</span>工具窗口中， <a href="stepping-through-the-program.html">逐步执行断点</a> ，在帧之间切换，即时更改值， <a href="examining-suspended-program.html">检查暂停的程序</a> ， <a href="evaluating-expressions.html">计算表达式</a>以及<a href="adding-editing-and-removing-watches.html">设置监视</a> 。</p></li></ol></section>                 <section class="procedure-steps"><h2 id="ws_node_debug_remote_tcp">使用V8调试协议进行调试</h2><ol class="list _decimal"><li class="list__item" id="378a2362"><p><a href="running-and-debugging-node-js.html#ws_node_debug_remote_chrome_create_attach_run_config">如上所述</a>创建<span class="control">对Node.js / Chrome</span>运行/调试配置的<span class="control">附加</span> <a href="running-and-debugging-node-js.html#ws_node_debug_remote_chrome_create_attach_run_config">，</a>并指定传递给<code class="code">--debug</code>的主机和端口。默认端口为9229。</p></li><li class="list__item" id="bad3ddd6"><p>确保已使用以下参数在远程环境中启动要调试的应用程序： -  debug <code class="code">--debug=&lt;debugger port&gt;</code> 。默认端口为<code class="code">5858</code> 。</p></li><li class="list__item" id="f187c1df"><p><a href="running-and-debugging-node-js.html#ws_node_debugging_remote_debugging_chrome_protocol_common_steps_start">在使用Chrome调试协议的调试会话期间</a>继续。</p></li></ol></section>        </div>            <div class="chapter"><h3 id="nodemon" data-toc="Running_and_Debugging_Node_JS#nodemon">调试使用nodemon的Node.js应用程序</h3>                <aside class="tip sideblock" rel="nodemon_start_app_in_debug_mode_run_script" id="a4126d8b" data-title="">                    <p id="3a8bd28e">有关详细信息，请参阅<a href="installing-and-removing-external-software-using-node-package-manager.html#ws_npm_running_npm_scripts">运行和调试脚</a></p>                </aside>                <p id="2eb4032a">WebStorm内置调试器可以自动重新连接到正在运行的Node.js进程。这使您可以调试使用<a href="https://nodemon.io/" data-bypass="yes" target="_blank"><span>nodemon实用程序的</span></a> Node.js应用程序，该<a href="https://nodemon.io/" data-bypass="yes" target="_blank"><span>实用程序会</span></a>在代码更新时自动重新加载Node.js进程。要调试此类应用程序，您需要在<span class="emphasis">调试</span>模式下启动它（使用<code class="code">--inspect</code>标志），然后使用“ <a href="running-and-debugging-node-js.html#node_debugging_overview">附加到Node.js / Chrome”</a>调试配置并使用“ <span class="control">自动重新连接”</span>选项连接到该应用程序。</p>                <section class="procedure-steps"><h2 id="ba6618e2">安装nodemon</h2><ul class="list _no-style"><li class="list__item" id="a787b653">                        <p id="448c9df1">在嵌入式<span class="control">终端</span> （ <kbd data-primary_default="Alt+F12" data-primary_default_for_gnome="Alt+F12" data-primary_default_for_kde="Alt+F12" data-primary_default_for_xwin="Alt+F12" data-primary_emacs="Alt+F12" data-primary_visual_studio="Alt+F12" data-primary_eclipse="Alt+F12" data-secondary_mac_os_x_10.5_="⌥F12" data-secondary_mac_os_x="⌥F12" data-secondary_eclipse_mac_os_x="⌥F12">Alt + F12</kbd> ）中，键入<code class="code">npm install --save-dev nodemon</code>或<code class="code">yarn add nodemon --dev</code>以将nodemon安装为开发依赖项。</p>                    </li></ul></section>                <section class="procedure-steps"><h2 id="4c5bd2e9">在调试模式下使用nodemon启动应用程序</h2><ul class="list "><li class="list__item" id="nodemon_start_app_in_debug_mode_run_script"><p>创建并运行以下<code class="code">npm debug</code>脚本：</p><div class="code-block" data-lang="Shell"><code class="code-block__wrapper">debug <span class="s2">“：”</span> nodemon --inspect &lt;path_to_the_file_that_starts_your_application&gt;</code></div>                    </li><li class="list__item" id="575b24e9"><p>或者， <a href="running-and-debugging-node-js.html#ws_node_run_config_optionally">如上所述，</a>通过Node.js运行/调试配置传递<code class="code">inspect</code>标志。</p></li></ul></section>                <section class="procedure-steps"><h2 id="ba20451a">调试应用程序</h2><ol class="list _decimal"><li class="list__item" id="b98bb773"><p>根据需要在代码中设置断点。</p></li><li class="list__item" id="b44502fd"><p>创建一个新的<span class="control">附加到Node.js / Chrome</span>配置，如<a href="running-and-debugging-node-js.html#node_debugging_overview">调试正在运行的Node.js应用程序中所述，</a>并选中<span class="control">自动重新连接</span>复选框。</p><figure><img alt="不附加Node.js运行配置：选中自动重新连接复选框" title="不附加Node.js运行配置：选中自动重新连接复选框" src="../img/idea/2019.1/ws_run_config_attach_to_node_reconnect.png" id="4965e7c6" width="600" height="300"></figure>通常，您不需要更改配置中的端口（ <code class="code">9229</code> ），因为它是调试器正在侦听的默认端口。但是，您可以仔细检查在调试模式下运行应用程序时记录的消息中使用的端口。<figure><img alt="Nodemon在调试模式下运行的Node.js应用程序：检查端口" title="Nodemon在调试模式下运行的Node.js应用程序：检查端口" src="../img/idea/2019.1/ws_debug_port_nodemon.png" id="75745d99" width="600" height="236"></figure>                    </li><li class="list__item" id="89a659fa">在工具栏上的<span class="control">选择运行/调试配置</span>下拉列表中选择新创建的<span class="control">附加到Node.js / Chrome</span>配置，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.debug@2x.png" width="16" alt="调试按钮">在它的旁边。调试器在您放入WebStorm代码中的断点处停止。<p id="747bdaef">现在，每次对代码进行任何更改并保存它们（ <kbd data-primary_default="Ctrl+S" data-primary_default_for_gnome="Ctrl+S" data-primary_default_for_kde="Ctrl+S" data-primary_default_for_xwin="Ctrl+S" data-primary_emacs="Ctrl+X, Ctrl+S" data-primary_visual_studio="Ctrl+S" data-primary_eclipse="Ctrl+S" data-secondary_mac_os_x_10.5_="⌘S" data-secondary_mac_os_x="⌘S" data-secondary_eclipse_mac_os_x="⌘S">Ctrl + S</kbd> ）时，nodemon都会自动重新加载应用程序，调试器将自动重新连接到重新启动的进程。</p>                    </li></ol></section>            </div>        <div class="chapter"><h3 id="ws_node_start_jsdebug_rc_with_nodejs_rc" data-toc="Running_and_Debugging_Node_JS#ws_node_start_jsdebug_rc_with_nodejs_rc">与Node.js配置一起启动JavaScript Debug配置</h3>                <p id="32094d9d">使用WebStorm，您可以在两种模式下调试应用程序的服务器端代码和客户端JavaScript代码：</p><ul class="list _bullet"><li class="list__item" id="892ddefc"><p>另外，使用单次运行配置。</p></li><li class="list__item" id="e919aab8"><p>同时，使用复杂的Node.js和JavaScript Debug配置。您所需要的只是配置浏览器的行为并启用调试应用程序的客户端代码。此功能是通过<code class="code">JavaScript Debug</code>运行配置提供的，因此从技术上讲，WebStorm为服务器端和客户端代码创建单独的运行配置，但您在一个专用的<span class="emphasis">Node.js</span>运行配置中指定了所有设置。</p></li></ul>                            <section class="procedure-steps"><h2 id="6ea0c883">创建复合Node.js / JavaScript调试配置</h2><ol class="list _decimal"><li class="list__item" id="e9a0ee87"><p>在主菜单上，选择<span class="menupath" data-skip-index="skip">“运行”|编辑配置</span> 。</p></li><li class="list__item" id="699145b5"><p>从列表中，选择<span class="emphasis">Node.js</span>运行配置以与<span class="emphasis">JavaScript Debug</span>配置一起启动。在打开的对话框中，切换到“ <span class="control">浏览器/实时编辑”</span>选项卡。</p></li><li class="list__item" id="8fe37deb"><p>选择<span class="control">启动后，在启动</span>调试会话时自动启动浏览器。</p></li><li class="list__item" id="694491aa"><p>在下面的字段中，键入要在其中打开应用程序的URL地址。</p></li><li class="list__item" id="9e17cc2f">从<span class="control">After launch</span>复选框旁边的列表中选择要使用的浏览器。<ul class="list _bullet"><li class="list__item" id="455076e1"><p>要使用系统默认浏览器，请选择“ <span class="control">默认”</span> 。</p></li><li class="list__item" id="635e0f48"><p>要使用自定义浏览器，请从列表中选择它。请注意，仅在Chrome中完全支持<span class="emphasis">实时修改</span> 。</p></li><li class="list__item" id="f36759bb"><p>要配置浏览器，请单击<img alt="浏览按钮" title="浏览按钮" src="../img/idea/2019.1/browseButton.png" id="08b6a2b1" width="15" height="15" class="inline-icon-15">并调整打开的<span class="control">Web浏览器</span>对话框中的设置。有关更多信息，请参阅<a href="configuring-browsers.html"><span>配置浏览器</span></a> 。</p></li></ul>                    </li><li class="list__item" id="2d86c2de"><p>选择<span class="control">使用JavaScript调试器</span> 。</p></li></ol></section>对于任何其他JavaScript调试会话，您可以按<a href="live-editing.html">Live_Editing中</a>所述启用实时编辑功能。<section class="procedure-steps"><h2 id="ws_node_debug_live_edit">在Node.js应用程序中启用Live Edit</h2><ol class="list _decimal"><li class="list__item" id="c786f079"><p>在“ <span class="control">设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘,">Ctrl + Alt + S</kbd> ）中，单击“ <span class="control">构建，执行，部署”</span>下的“ <span class="control">调试器</span> ”，然后单击“ <span class="control">实时编辑”</span> 。“ <a href="live-edit.html">实时编辑”页面</a>将打开。</p></li><li class="list__item" id="c5c609ae"><p><span class="control">在更改时</span>选择<span class="control">更新Node.js应用程序</span> 。指定在编辑器中更改代码和在浏览器中显示此更改之间的时间延迟：接受默认值<code class="code">300 ms</code>或使用相应字段旁边的旋转框指定自定义值。</p></li></ol></section>        </div>            <div class="chapter"><h3 id="ws_node_debug_remote_environment" data-toc="Running_and_Debugging_Node_JS#ws_node_debug_remote_environment">调试在远程环境中运行的Node.js应用程序</h3>                <p id="64c4402e">使用WebStorm，您可以附加到在<a href="vagrant-support.html">Vagrant框中</a> ， <a href="docker.html">Docker容器</a>中运行的Node.js应用程序，或者通过<a href="configuring-synchronization-with-a-remote-host.html">各种传输协议</a>或SSH访问的远程主机上。</p>                <div class="chapter"><h4 id="node_docker_run_debug" data-toc="Running_and_Debugging_Node_JS#node_docker_run_debug">调试Docker容器中的Node.js应用程序</h4>                    <aside class="tip sideblock" rel="node_docker_run_debug_intro" id="a33f4cfe" data-title="">                        <p id="ad330207">在<a href="https://blog.jetbrains.com/webstorm/2017/04/quick-tour-of-webstorm-and-docker/" data-bypass="yes" target="_blank"><span>WebStorm和Docker的快速浏览中</span></a>找到一些示例<a href="https://blog.jetbrains.com/webstorm/2017/04/quick-tour-of-webstorm-and-docker/" data-bypass="yes" target="_blank"><span>。</span></a>                        </p>                    </aside>                    <aside class="tip sideblock" rel="ws_node_docker_port_binding" id="343ff610" data-title="">                        <p id="472866cc">即使使用自动配置，您仍然需要将运行应用程序的端口与容器的端口绑定。这些公开的端口可在Docker主机的IP地址上使用（默认为192.168.99.100）。调试<span class="emphasis">Node.js Express</span>应用程序的客户端时需要这样的绑定。在这种情况下，您需要从计算机打开浏览器并通过应用程序中指定的端口访问容器主机上的应用程序。</p>                    </aside>                    <p id="node_docker_run_debug_intro">WebStorm支持通过<span class="emphasis">Node.js</span>类型的运行/调试配置调试Docker容器中的Node.js应用程序。</p>                    <p id="1db25d95">                                                                                                                                                <span class="emphasis">在开始调试Docker上的Node.js应用程序之前</span><br>                        </p><ol class="list _decimal"><li class="list__item" id="64601bb8"><p>确保已安装，配置和运行<a href="docker.html">Docker</a> 。</p></li></ol>                                        <section class="procedure-steps"><h2 id="c75061aa">在Docker上选择Node.js解释器</h2><ol class="list _decimal"><li class="list__item" id="5acbb953"><p><a href="running-and-debugging-node-js.html#Node.js_run">如上所述</a>创建Node.js运行/调试配置。</p></li><li class="list__item" id="56c279e1"><p>从下拉列表中选择<span class="control">远程解释器 -  Docker</span>类型的已配置Node.js解释器之一，或者<a href="configuring-remote-node-interpreters.html">配置一个新解释器</a> 。</p></li></ol></section>                    <section class="procedure-steps"><h2 id="ws_node_debug_docker_container_settings">指定Docker容器设置</h2><ul class="list _no-style"><li class="list__item" id="a150b95f"><p>点击<img alt="browseButton" title="browseButton" src="../img/idea/2019.1/browseButton.png" id="ed9c3a2c" width="15" height="15" class="inline-icon-15">在“ <span class="control">编辑Docker容器设置”</span>字段旁边，并在打开的“ <span class="control">编辑Docker容器设置”</span>对话框中指定设置。<br>或者，选择“ <span class="control">自动配置”</span>复选框以自动执行此操作。在<a href="https://blog.jetbrains.com/webstorm/2017/04/quick-tour-of-webstorm-and-docker/" data-bypass="yes" target="_blank"><span>WebStorm和Docker的快速浏览中</span></a>了解有关<span class="control">自动配置</span>模式的更多信息<a href="https://blog.jetbrains.com/webstorm/2017/04/quick-tour-of-webstorm-and-docker/" data-bypass="yes" target="_blank"><span>：每次运行时会发生什么</span></a> 。</p></li></ul></section>                    <p id="ws_node_docker_port_binding"></p>                            <section class="procedure-steps"><h2 id="a8332f2e">配置端口绑定</h2><ol class="list _decimal"><li class="list__item" id="d37037e8"><p>点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.openDisk.svg@2x.png" width="16" alt="图标一般openDisk svg">在<span class="control">Docker Container Settings</span>字段中，展开打开的<span class="control">Edit Docker Container Settings</span>对话框中的<span class="control">Port bindings</span>区域。</p></li><li class="list__item" id="d536f586">点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="图标一般添加svg">在打开的“ <span class="control">端口绑定”</span>对话框中，按如下方式映射端口：<ul class="list _bullet"><li class="list__item" id="db8939b4"><p>在“ <span class="control">容器端口”</span>文本框中，键入应用程序中指定的端口。</p></li><li class="list__item" id="d1e83b57"><p>在“ <span class="control">主机端口”</span>文本框中，键入要从计算机在浏览器中打开应用程序的端口。</p></li><li class="list__item" id="1d0d622e"><p>在“ <span class="control">主机IP”</span>文本框中，键入Docker主机的IP地址，默认IP为192.168.99.100。主机在<a href="settings-preferences-dialog.html"><span>“设置/首选项”对话框</span></a>的<a href="settings-preferences-dialog.html"><span>“</span></a> <a href="docker-connection-settings.html"><span>Docker”</span></a>页面上的<span class="control">API URL</span>字段中指定。</p></li><li class="list__item" id="938346fc"><p>单击“ <span class="control">确定”</span>返回“ <span class="control">编辑Docker容器设置”</span>对话框，其中将新端口映射添加到列表中。</p></li></ul>            </li><li class="list__item" id="3e86040c"><p>单击“ <span class="control">确定”</span>返回“ <a href="run-debug-configuration-node-js.html"><span>运行/调试配置：Node.js”</span></a>对话框。</p></li></ol></section>                        <section class="procedure-steps"><h2 id="8ff8f3fb">开始调试</h2><ol class="list _decimal"><li class="list__item" id="21370ed7"><p>根据需要在Node.js代码中设置断点。</p></li><li class="list__item" id="50ad5b19"><p>在工具栏上的<span class="control">Select run / debug configuration</span>下拉列表中选择新创建的<span class="control">Node.js</span>配置，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.startDebugger.svg@2x.png" width="16" alt="图标动作startDebugger svg">在它的旁边。</p></li><li class="list__item" id="91ad1269"><p><a href="running-and-debugging-node-js.html#debugLocal">如上所述</a> ，在本地调试会话期间继续。</p></li></ol></section>                </div>            </div>    <div class="chapter"><h3 id="node_multiprocess_debugging" data-toc="Running_and_Debugging_Node_JS#node_multiprocess_debugging">Node.js多进程调试</h3>        <p id="750b3b81">WebStorm支持调试由<a href="https://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options" data-bypass="yes" target="_blank"><span>child_process.fork（）方法</span></a>或<a href="https://nodejs.org/api/cluster.html" data-bypass="yes" target="_blank"><span>集群模块</span></a>启动的其他<span class="emphasis">Node.js</span>进程。此类进程在“ <a href="debug-tool-window.html"><span>调试工具”窗口</span></a>的“ <a href="debug-tool-window.html"><span>调试</span></a> <a href="debug-tool-window-debugger.html">器”选项卡</a>上的“ <a href="debug-tool-window-frames.html">框架”</a>窗格中显示为<span class="control">线程</span> 。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="acd4c966"><p>设置要调试的进程中的断点。</p></li><li class="list__item" id="273e4043"><p>创建<span class="emphasis">Node.js</span>运行/调试配置。</p></li><li class="list__item" id="973ad655">在工具栏的“ <span class="control">选择运行/调试配置”</span>下拉列表中选择新创建的配置，然后单击“ <span class="control">调试”</span> <img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.startDebugger.svg@2x.png" width="16" alt="图标动作startDebugger svg"> 。<p id="eebac398"><a href="debug-tool-window.html"><span>调试工具窗口</span></a>打开， <span class="control">框架</span>下拉列表一旦启动就会显示其他进程作为线程：</p><figure><img alt="ws_node_multiprocess.png" title="ws_node_multiprocess.png" src="../img/idea/2019.1/ws_node_multiprocess.png" id="f28da7d8" width="271" height="89"></figure>                                <p id="2ccb0c85">要检查进程的数据（变量，监视等），请在列表中选择其线程，并在“ <a href="debug-tool-window-variables.html">变量</a>和<a href="debug-tool-window-watches.html">监视”</a>窗格中查看其数据。选择其他进程时，窗格的内容会相应更新。</p>            </li></ol></section>    </div>        </div>    <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月25日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="configuring-remote-node-interpreters.html">配置远程Node.js解释器</a> <a class="navigation-links__next" href="unit-testing-node-js.html">测试Node.js.</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>也可以看看</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>程序：</h3><ul class="list"><li class="list__item"><a href="developing-node-js-applications.html"><span>Node.js的</span></a></li><li class="list__item"><a href="running-applications.html"><span>运行应用程序</span></a></li><li class="list__item"><a href="debugging-code.html"><span>不要暂停代码执行</span></a></li><li class="list__item"><a href="creating-and-editing-run-debug-configurations.html"><span>创建和编辑运行/调试配置</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>参考：</h3><ul class="list"><li class="list__item"><a href="run-debug-configuration-node-js.html"><span>运行/调试配置：Node.js</span></a></li><li class="list__item"><a href="run-debug-configuration-node-js-remote-debug.html"><span>运行/调试配置：附加到Node.js / Chrome</span></a></li><li class="list__item"><a href="run-tool-window.html"><span>运行工具窗口</span></a></li><li class="list__item"><a href="debug-tool-window.html"><span>调试工具窗口</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
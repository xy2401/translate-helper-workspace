<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="arquillian.html"></link><meta charset="UTF-8"></meta><title>Arquillian：快速入门指南 - 帮助| IntelliJ IDEA</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Arquillian"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="arquillian.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Arquillian.xml" data-toc="Arquillian">Arquillian：快速入门指南</h1>         <aside class="warning " rel="Arquillian.xml" id="a0226f52" data-title=""><p>此功能仅在<b id="3c48baf5" origin="intellij-platform">Ultimate</b>版本中受支持。</p></aside>    <p id="91ecf156">本指南介绍了用于编写和运行<a href="http://arquillian.org/" data-bypass="yes" target="_blank"><span>Arquillian</span></a>测试的主要IntelliJ IDEA功能。</p>    <ul data-skip-index="skip"><li class="list__item"><a href="arquillian.html#24ed978d">在你开始之前</a></li><li class="list__item"><a href="arquillian.html#7705e17d">使用Arquillian JUnit支持创建项目</a></li><li class="list__item"><a href="arquillian.html#1f1c6f1a">创建一个类</a></li><li class="list__item"><a href="arquillian.html#2d0d80da">为Greeter类开发代码</a></li><li class="list__item"><a href="arquillian.html#15fdaa53">将javax-inject.jar定义为库</a></li><li class="list__item"><a href="arquillian.html#60ba0120">为测试源创建文件夹</a></li><li class="list__item"><a href="arquillian.html#ab2ededa">创建一个测试类</a></li><li class="list__item"><a href="arquillian.html#7825184f">完成GreteerTest类的代码</a></li><li class="list__item"><a href="arquillian.html#bf33abee">创建运行配置以运行测试</a></li><li class="list__item"><a href="arquillian.html#878ce847">在嵌入式容器中运行测试</a></li><li class="list__item"><a href="arquillian.html#bf49d204">编辑运行配置：添加托管容器</a></li><li class="list__item"><a href="arquillian.html#18ee4a98">创建arquillian.xml配置文件</a></li><li class="list__item"><a href="arquillian.html#8071519e">在托管容器中运行测试</a></li><li class="list__item"><a href="arquillian.html#2c3a32c9">修改arquillian.xml</a></li><li class="list__item"><a href="arquillian.html#2e3ca16a">运行测试：部署到正在运行的服务器</a></li></ul>    <h2 id="24ed978d">在你开始之前</h2>    <p id="2d7045d0">确保您的计算机上安装了以下软件：</p>    <ul class="list _ul"><li class="list__item" id="2b056537"><p>IntelliJ IDEA ULTIMATE版。还要检查JBoss Arquillian支持<a href="managing-plugins.html">插件</a>是否已启用。</p></li><li class="list__item" id="a00b742b"><p>Java SE开发工具包（JDK），版本8。<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" data-bypass="yes" target="_blank"><span>下载Oracle JDK</span></a> 。</p></li><li class="list__item" id="d75b4240"><p>GlassFish Server，版本4。该服务器将用作托管Arquillian容器。<a href="https://glassfish.java.net/download.html" data-bypass="yes" target="_blank"><span>下载GlassFish</span></a> 。</p></li></ul>    <p id="a37e8840">您还应该<a href="http://www.java2s.com/Code/Jar/j/Downloadjavaxinjectjar.htm" data-bypass="yes" target="_blank"><span>下载javax-inject.jar</span></a> 。在开发我们的示例测试类时，此文件将用作<a href="library.html">库</a> 。</p>    <h2 id="7705e17d">使用Arquillian JUnit支持创建项目</h2>    <ol class="list _decimal"><li class="list__item" id="81cc199c">单击欢迎屏幕上的<span class="control">创建新项目</span> ，或选择<span class="control">文件|新的|项目</span> 。<p id="8f545a87">“ <span class="control">新建项目”</span>向导将打开。</p></li><li class="list__item" id="5c61fab0"><p>在左侧窗格中，选择<span class="control">Java Enterprise</span> 。</p></li><li class="list__item" id="3b3aeb69"><p>如果您要使用的JDK已在IntelliJ IDEA中定义，请从<span class="control">Project SDK</span>列表中选择该JDK。否则，单击“ <span class="control">新建”</span> ，选择“ <span class="control">JDK”</span> ，然后在打开的对话框中选择JDK安装文件夹。</p></li><li class="list__item" id="1d6d43a0">如果尚未在IntelliJ IDEA中定义GlassFish，请单击<span class="control">Application Server</span>字段右侧的<span class="control">New</span> ，然后选择<span class="control">Glassfish Server</span> 。<p id="3ef968c2">在<span class="control">Glassfish服务器</span>对话框中，指定GlassFish Server安装目录。</p></li><li class="list__item" id="af4a2295">在<span class="control">Additional Libraries and Frameworks下</span> ，选择<span class="control">Arquillian JUnit</span>复选框。<figure><img alt="arq01NewProject" title="arq01NewProject" src="../img/idea/2019.1/arq01NewProject.png" id="49823fff" width="616" height="448"></figure>            <p id="50ec2ddf">单击<span class="control">下一步</span> 。</p></li><li class="list__item" id="ecc3fc68">指定新项目的名称（例如<code class="code">HelloArquillian</code> ），然后单击<span class="control">Finish</span> 。<figure><img alt="arq02NewProject" title="arq02NewProject" src="../img/idea/2019.1/arq02NewProject.png" id="9b87a404" width="616" height="132"></figure>            <p id="6c8b896c">创建项目后，您将在“ <span class="control">项目”</span>工具窗口中看到与此类似的内容。</p>            <figure><img alt="arq03Project" title="arq03Project" src="../img/idea/2019.1/arq03Project.png" id="6648da23" width="616" height="206"></figure></li></ol>    <p id="b4a0e799">（要为现有项目添加Arquillian JUnit支持，请执行以下操作：在“ <span class="control">项目”</span>工具窗口中，右键单击项目或模块文件夹，然后选择“ <span class="control">添加框架支持”</span> 。然后，在打开的对话框中选择<span class="control">Arquillian JUnit</span>复选框。）</p>    <h2 id="1f1c6f1a">创建一个类</h2>    <p id="577065a5">现在我们要创建一个我们要测试的类。让类名为<code class="code">com.example.hello.Greeter</code> 。</p>    <ol class="list _decimal"><li class="list__item" id="019fb2cb"><p>在“ <span class="control">项目”</span>工具窗口中，右键单击<code class="code">src</code>文件夹，指向“ <span class="control">新建”，</span>然后选择“ <span class="control">Java类”</span> 。</p></li><li class="list__item" id="05cc6a22">在打开的“ <span class="control">创建新类”</span>对话框中，键入<code class="code">com.example.hello.在“ <span class="control">名称”</span>字段中<kbd data-primary_default="Enter" data-primary_default_for_gnome="Enter" data-primary_default_for_kde="Enter" data-primary_default_for_xwin="Enter" data-primary_emacs="Enter" data-primary_jbuilder="Enter" data-primary_visual_studio="Enter" data-primary_netbeans="Enter" data-primary_eclipse="Enter" data-secondary_mac_os_x_10.5_="⏎" data-secondary_mac_os_x="⏎" data-secondary_eclipse_mac_os_x="⏎" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⏎">输入</kbd> Greeter</code> ，然后按<kbd data-primary_default="Enter" data-primary_default_for_gnome="Enter" data-primary_default_for_kde="Enter" data-primary_default_for_xwin="Enter" data-primary_emacs="Enter" data-primary_jbuilder="Enter" data-primary_visual_studio="Enter" data-primary_netbeans="Enter" data-primary_eclipse="Enter" data-secondary_mac_os_x_10.5_="⏎" data-secondary_mac_os_x="⏎" data-secondary_eclipse_mac_os_x="⏎" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⏎">Enter键</kbd> 。<p id="b7dd1df1"><code class="code">com.example.hello</code>包和<code class="code">Greeter</code>类显示在<span class="control">Project</span>工具窗口中。</p>            <figure><img alt="arq04ProjectGreeter" title="arq04ProjectGreeter" src="../img/idea/2019.1/arq04ProjectGreeter.png" id="274be0e7" width="616" height="247"></figure>            <p id="ce06f40d">同时， <code class="code">Greeter.java</code>文件在编辑器中打开。</p></li></ol>    <h2 id="2d0d80da">为Greeter类开发代码</h2>    <p id="a0fd2d4a">这是<code class="code">Greeter</code>类的代码。</p>    <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kn">package</span> <span class="nn">com.example.hello</span> <span class="o">;</span> <span class="kn">import</span> <span class="nn">java.io.PrintStream</span> <span class="o">;</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Greeter</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">greet</span> <span class="o">（</span> <span class="n">PrintStream</span> <span class="n">to</span> <span class="o">，</span> <span class="n">String</span> <span class="n">name</span> <span class="o">）</span> <span class="o">{</span> <span class="n">to</span> <span class="o">。</span> <span class="na">println</span> <span class="o">（</span> <span class="n">createGreeting</span> <span class="o">（</span> <span class="n">name</span> <span class="o">））;</span> <span class="o">}</span> <span class="kd">公共</span> <span class="n">字符串</span> <span class="nf"><span class="o">createGreeting（</span></span> <span class="n">字符串</span> <span class="n">名称</span> <span class="o"><span class="o">）{</span></span> <span class="k">回报</span> <span class="s">“你好，”</span> <span class="o">+</span> <span class="n">姓名</span> <span class="o"><span class="s">+“！</span>“</span> <span class="o">;</span> <span class="o">}</span> <span class="o">}</span></code></div>    <p id="2913af4c">将代码复制到编辑器中。</p>    <figure><img alt="arq05EditorGreeter" title="arq05EditorGreeter" src="../img/idea/2019.1/arq05EditorGreeter.png" id="faaaa87f" width="616" height="269"></figure>    <h2 id="15fdaa53">将javax-inject.jar定义为库</h2>    <p id="e64fc298">为了能够编写和运行我们的Arquillian测试，我们需要<code class="code">javax-inject.jar</code>作为库。</p>    <ol class="list _decimal"><li class="list__item" id="94c1a181"><p>在项目根文件夹中，创建文件夹<code class="code">lib</code> （ <span class="menupath" data-skip-index="skip">New | Directory</span> ）并将<code class="code">javax-inject.jar</code>复制到该文件夹中。</p><figure><img alt="arq06ProjectJavaxInject" title="arq06ProjectJavaxInject" src="../img/idea/2019.1/arq06ProjectJavaxInject.png" id="33b5f5ff" width="616" height="287"></figure></li><li class="list__item" id="bdde4bdf"><p>打开“ <span class="control">项目结构”</span>对话框（ <kbd data-primary_default="Ctrl+Shift+Alt+S" data-primary_default_for_gnome="Ctrl+Shift+Alt+S" data-primary_default_for_kde="Ctrl+Shift+Alt+S" data-primary_default_for_xwin="Ctrl+Shift+Alt+S" data-primary_emacs="Ctrl+Shift+Alt+S" data-primary_jbuilder="Ctrl+Shift+Alt+S" data-primary_visual_studio="Ctrl+Shift+Alt+S" data-primary_netbeans="Ctrl+Shift+Alt+S" data-primary_eclipse="Ctrl+Shift+Alt+S" data-secondary_mac_os_x_10.5_="⌘;" data-secondary_mac_os_x="⌘;" data-secondary_eclipse_mac_os_x="⌘;" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥⇧S">Ctrl + Shift + Alt + S</kbd> ），然后选择“ <span class="control">库”</span> 。</p></li><li class="list__item" id="b6f14034"><p>点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add@2x.png" width="16" alt="图标一般添加"> ，选择<span class="control">Java</span>并在打开的对话框中选择<code class="code">javax-inject.jar</code> 。</p></li><li class="list__item" id="15d4d41c"><p>在“ <span class="control">选择模块”</span>对话框中单击“ <span class="control">确定</span></p><figure><img alt="arq07LibrariesJavaxInject" title="arq07LibrariesJavaxInject" src="../img/idea/2019.1/arq07LibrariesJavaxInject.png" id="dc9b02ff" width="616" height="210"></figure></li><li class="list__item" id="da949c09"><p>在<span class="control">Project Structure</span>对话框中单击<span class="control">OK</span> 。</p></li></ol>    <h2 id="60ba0120">为测试源创建文件夹</h2>    <ol class="list _decimal"><li class="list__item" id="5d1475ee"><p>在项目根文件夹中，创建文件夹<code class="code">test</code> 。</p></li><li class="list__item" id="2a0931b7"><p>右键单击该文件夹，指向“将<span class="control">目录另存为”</span>并选择“ <span class="control">测试源根”</span> 。</p><figure><img alt="arq08ProjectTest" title="arq08ProjectTest" src="../img/idea/2019.1/arq08ProjectTest.png" id="33a8349c" width="616" height="311"></figure></li></ol>    <h2 id="ab2ededa">创建一个测试类</h2>    <ol class="list _decimal"><li class="list__item" id="a34172cc"><p>在编辑器中，将光标放在类的名称（ <code class="code">Greeter</code> ）中。</p></li><li class="list__item" id="a9b6fdc7"><p>点击灯泡<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.intentionBulb.svg@2x.png" width="16" alt="图标动作intentBulb svg"> （ <kbd data-primary_default="Alt+Enter" data-primary_default_for_gnome="Alt+Enter" data-primary_default_for_kde="Alt+Enter" data-primary_default_for_xwin="Alt+Enter" data-primary_emacs="Alt+Enter" data-primary_jbuilder="Alt+Enter" data-primary_visual_studio="Alt+Enter" data-primary_netbeans="Alt+Enter" data-primary_eclipse="Alt+Enter" data-secondary_mac_os_x_10.5_="⌥⏎" data-secondary_mac_os_x="⌥⏎" data-secondary_eclipse_mac_os_x="⌘1" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌥⏎">Alt + Enter</kbd> ）并选择<span class="control">Create Test</span> 。</p><figure><img alt="arq09GreeterCreateTest" title="arq09GreeterCreateTest" src="../img/idea/2019.1/arq09GreeterCreateTest.png" id="7c418be8" width="616" height="278"></figure></li><li class="list__item" id="893cabec">在打开的“ <span class="control">创建测试”</span>对话框中，从“ <span class="control">测试库”</span>列表中选择<span class="control">Arquillian JUnit4</span> 。在<span class="control">Create test methods for下</span> ，选择不返回值的方法（ <code class="code">greet</code> ）。单击<span class="control">确定</span> 。<figure><img alt="arq10DialogCreateTest" title="arq10DialogCreateTest" src="../img/idea/2019.1/arq10DialogCreateTest.png" id="5e0a0c19" width="458" height="414"></figure>            <p id="dbd170bf">新的测试类显示在“ <span class="control">项目”</span>工具窗口中。</p>            <figure><img alt="arq11ProjectGreeterTest" title="arq11ProjectGreeterTest" src="../img/idea/2019.1/arq11ProjectGreeterTest.png" id="af57551e" width="616" height="350"></figure>            <p id="aec69e08">同时， <code class="code">GreeterTest.java</code>文件在编辑器中打开。</p>            <figure><img alt="arq12EditorGreeterTest" title="arq12EditorGreeterTest" src="../img/idea/2019.1/arq12EditorGreeterTest.png" id="b680eb0e" width="616" height="475"></figure>            <p id="eb445f50">测试类的初始内容由相应的模板定义。您可以在“ <span class="control">设置/首选项”</span>对话框的<span class="control">“</span> <span class="control">文件和代码模板”</span>页面的<span class="control">“</span> <span class="control">代码”</span>选项卡上编辑该模板（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> <span class="menupath" data-skip-index="skip">|编辑器|文件和代码模板</span> ）。</p>        </li></ol>    <h2 id="7825184f">完成GreteerTest类的代码</h2>    <p id="12a8bcde">以下是处于最终状态的测试类的代码：</p>    <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kn">package</span> <span class="nn">com.example.hello</span> <span class="o">;</span> <span class="kn">import</span> <span class="nn">org.jboss.arquillian.container.test.api。部署</span> <span class="o">;</span> <span class="kn">import</span> <span class="nn">org.jboss.arquillian.junit。Arquillian</span> <span class="o">;</span> <span class="kn">import</span> <span class="nn">org.jboss.shrinkwrap.api。收缩包装</span> <span class="o">;</span> <span class="kn">import</span> <span class="nn">org.jboss.shrinkwrap.api.asset。EmptyAsset</span> <span class="o">;</span> <span class="kn">import</span> <span class="nn">org.jboss.shrinkwrap.api.spec。JavaArchive</span> <span class="o">;</span> <span class="kn">import</span> <span class="nn">org.junit。断言</span> <span class="o">;</span> <span class="kn">import</span> <span class="nn">org.junit。测试</span> <span class="o">;</span> <span class="kn">import</span> <span class="nn">org.junit.runner。RunWith</span> <span class="o">;</span> <span class="kn">import</span> <span class="nn">javax.inject。注入</span> <span class="o">;</span> <span class="kn">导入</span> <span class="nn">静态</span> <span class="n">组织</span> <span class="o">。</span> <span class="na">junit</span> <span class="o">。</span><span class="na">断言</span> <span class="o">。*;</span> <span class="nd"><span class="o">@RunWith（</span></span> <span class="n">的<span class="o">Arquillian。</span></span> <span class="na">类</span> <span class="o">）</span> <span class="kd">公共</span> <span class="kd">类</span> <span class="nc">GreeterTest</span> <span class="o"><span class="nd">{@Deployment</span></span> <span class="kd">公共</span> <span class="kd">静态</span> <span class="n">JavaArchive</span> <span class="nf"><span class="o"><span class="o">createDeployment（）{</span></span></span> <span class="k">返回</span> <span class="n">拆封</span> <span class="o">。</span> <span class="na">创建</span> <span class="o"><span class="n"><span class="o">（JavaArchive。</span></span></span> <span class="na">类</span> <span class="o"><span class="o">）。</span></span> <span class="na"><span class="o">addClass（</span></span> <span class="n">招待员</span> <span class="o">。</span> <span class="na">类</span> <span class="o"><span class="o">）。</span></span> <span class="na">addAsManifestResource</span> <span class="o">（</span> <span class="n">EmptyAsset</span> <span class="o">。</span><span class="na">INSTANCE</span> <span class="o">，</span> <span class="s">“beans.xml”</span> <span class="o">）;</span> <span class="o">}</span> <span class="nd">@Inject</span> <span class="n">Greeter</span> <span class="n">greeter</span> <span class="o">;</span> <span class="nd">@Test</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">greet</span> <span class="o">（）</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span> <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">“Arquillian”</span> <span class="o">;</span> <span class="n">断言</span> <span class="o">。</span> <span class="na">assertEquals</span> <span class="o">（</span> <span class="s">“你好，Arquillian！<span class="o">“，</span></span> <span class="n">迎宾</span> <span class="na"><span class="o">createGreeting（</span></span> <span class="n">名</span> <span class="o"><span class="o"><span class="o">））;</span></span></span> <span class="n">招待员</span> <span class="na">迎接</span> <span class="o">（</span> <span class="n">系统</span> <span class="na">出来</span> <span class="o">，</span> <span class="n">姓名</span> <span class="o"><span class="o"><span class="o"><span class="o">）;}}</span></span></span></span></code></div>    <ol class="list _decimal"><li class="list__item" id="a650f126"><p>要为<code class="code">@Inject</code>插入正确的<code class="code">import</code>语句，请键入<code class="code">@Inj</code>并选择<span class="control">@Inject（javax.inject）</span> 。</p><figure><img alt="arq13EditorGreeterTestInject" title="arq13EditorGreeterTestInject" src="../img/idea/2019.1/arq13EditorGreeterTestInject.png" id="71cde0fd" width="616" height="523"></figure></li><li class="list__item" id="a3a0ce25"><p>通过复制添加剩余的代码。</p><figure><img alt="arq14EditorGreeterTestComplete" title="arq14EditorGreeterTestComplete" src="../img/idea/2019.1/arq14EditorGreeterTestComplete.png" id="60e926c4" width="616" height="617"></figure></li></ol>    <h2 id="bf33abee">创建运行配置以运行测试</h2>    <ol class="list _decimal"><li class="list__item" id="e7547379"><p>在<code class="code">public class GreeterTest</code>的左侧，单击<img alt="runTwoGreenArrows" title="runTwoGreenArrows" src="../img/idea/2019.1/runTwoGreenArrows.png" id="bd534cb6" width="10" height="10" class="inline-icon-10">并选择<span class="control">Run'GreeterTest'</span> 。</p><figure><img alt="arq15EditorRunGreeterTest" title="arq15EditorRunGreeterTest" src="../img/idea/2019.1/arq15EditorRunGreeterTest.png" id="7dbdab74" width="616" height="176"></figure></li><li class="list__item" id="4345312b"><p>在打开的“ <span class="control">编辑配置”</span>对话框中，单击“ <span class="control">配置”</span> 。</p><figure><img alt="arq16EditConfiguration" title="arq16EditConfiguration" src="../img/idea/2019.1/arq16EditConfiguration.png" id="88f9c35d" width="616" height="188"></figure></li><li class="list__item" id="44b26085"><p>在<span class="control">Arquillian Containers</span>对话框中，单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add@2x.png" width="16" alt="图标一般添加"> ，指向<span class="control">Embedded</span>并选择<span class="control">GlassFish Embedded 3.1</span> 。（我们首先在嵌入式容器中运行测试。）</p><figure><img alt="arq17ArquillianContainers" title="arq17ArquillianContainers" src="../img/idea/2019.1/arq17ArquillianContainers.png" id="735e6a7c" width="616" height="326"></figure></li><li class="list__item" id="443a34f0"><p>在“ <span class="control">编辑配置”</span>对话框中，选择“ <span class="control">GlassFish Embedded 3.1”</span> 。</p><figure><img alt="arq18EditConfiguration" title="arq18EditConfiguration" src="../img/idea/2019.1/arq18EditConfiguration.png" id="9bd70288" width="616" height="188"></figure></li></ol>    <h2 id="878ce847">在嵌入式容器中运行测试</h2>    <ol class="list _decimal"><li class="list__item" id="ef0a0521">在“ <span class="control">编辑配置”</span>对话框中，单击<span class="control">“运行”</span><p id="f7f50d0d">将打开“ <span class="control">运行”</span>工具窗口，并在一段时间后显示测试结果。</p>            <figure><img alt="arq19TestResult" title="arq19TestResult" src="../img/idea/2019.1/arq19TestResult.png" id="f208f78c" width="616" height="246"></figure></li><li class="list__item" id="7869f5b4"><p>单击关闭“ <span class="control">运行”</span>工具窗口<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.close@2x.png" width="16" alt="图标行动关闭"> 。</p></li></ol>    <h2 id="bf49d204">编辑运行配置：添加托管容器</h2>    <p id="27b189c6">现在让我们更改运行配置，以便它可以用于在托管容器中运行测试。</p>    <ol class="list _decimal"><li class="list__item" id="01654701"><p>单击运行配置选择器，然后选择“ <span class="control">编辑配置”</span> 。</p><figure><img alt="arq20EditConfigurations" title="arq20EditConfigurations" src="../img/idea/2019.1/arq20EditConfigurations.png" id="cb1ecec7" width="343" height="134"></figure></li><li class="list__item" id="9d8146cf"><p>在“ <span class="control">运行/调试配置”</span>对话框中，单击“ <span class="control">配置”</span> 。</p><figure><img alt="arq21EditConfigurationsDialog" title="arq21EditConfigurationsDialog" src="../img/idea/2019.1/arq21EditConfigurationsDialog.png" id="b8ebaf47" width="616" height="199"></figure></li><li class="list__item" id="bab939f8"><p>在<span class="control">Arquillian Containers</span>对话框中，单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add@2x.png" width="16" alt="图标一般添加">并选择<span class="control">手动容器配置</span> 。</p></li><li class="list__item" id="0779d58c"><p>更改配置的名称（例如，更改为<code class="code">GlassFish Managed</code> ）。</p></li><li class="list__item" id="f13596c4"><p>在<span class="control">依赖项下</span> ，单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add@2x.png" width="16" alt="图标一般添加">并选择<span class="control">添加maven依赖项</span> 。</p></li><li class="list__item" id="05c3c872">在“ <span class="control">从Maven存储库下载库”</span>对话框中，键入<code class="code">arquillian-glassfish-managed-3.1</code>并单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.find.svg@2x.png" width="16" alt="图标动作找到svg"> 。然后选择<span class="control">org.jboss.arquillian.container：arquillian-glassfish-managed-3.1：1.0.0。列表中的CR4</span> 。<p id="cea72d27">选择“ <span class="control">下载到”</span>复选框并单击“ <span class="control">确定”</span> 。</p>            <figure><img alt="arq22DownloadLibraryFromMaven" title="arq22DownloadLibraryFromMaven" src="../img/idea/2019.1/arq22DownloadLibraryFromMaven.png" id="98b957da" width="615" height="221"></figure>            <p id="8dcef2b1">在此步骤中， <span class="control">Arquillian Containers</span>对话框应如下所示：</p>            <figure><img alt="arq23ArquillianContainers" title="arq23ArquillianContainers" src="../img/idea/2019.1/arq23ArquillianContainers.png" id="18679bc5" width="616" height="341"></figure>            <p id="970c3218">单击<span class="control">确定</span> 。</p></li><li class="list__item" id="2b7411e7"><p>在“ <span class="control">运行/调试配置”</span>对话框中，选择“ <span class="control">GlassFish Managed”</span> ，然后单击“ <span class="control">确定”</span> 。</p><figure><img alt="arq24RunConfigurationsDialog" title="arq24RunConfigurationsDialog" src="../img/idea/2019.1/arq24RunConfigurationsDialog.png" id="3f9f7558" width="616" height="228"></figure></li></ol>    <h2 id="18ee4a98">创建arquillian.xml配置文件</h2>    <p id="034b815a">为了能够在托管容器中运行Arquillian测试，容器适配器需要知道容器位置。因此，让我们使用必要的信息创建<code class="code">arquillian.xml</code>配置文件。</p>    <ol class="list _decimal"><li class="list__item" id="8ffdfac3"><p>在项目根文件夹中，创建文件夹<code class="code">test-resources</code> 。</p></li><li class="list__item" id="8fde503d"><p>右键单击新文件夹，指向“将<span class="control">目录另存为”，</span>然后选择“ <span class="control">测试资源根”</span> 。</p></li><li class="list__item" id="ecd76f07"><p>在test-resources文件夹中，创建一个新文件<code class="code">arquillian.xml</code> 。</p><figure><img alt="arq25ProjectArquillianXml" title="arq25ProjectArquillianXml" src="../img/idea/2019.1/arq25ProjectArquillianXml.png" id="7b776713" width="616" height="392"></figure></li><li class="list__item" id="07487546">将以下内容复制到文件中：<div class="code-block" data-lang="XML"><code class="code-block__wrapper"><span class="cp">&lt;？xml版本=“1.0”？&gt;</span> <span class="nt">&lt;arquillian</span> <span class="na">xmlns：xsi =</span> <span class="s">“http://www.w3.org/2001/XMLSchema-instance”</span> <span class="na">xmlns =</span> <span class="s">“http://jboss.org/schema/arquillian”</span> <span class="na">xsi：schemaLocation =</span> <span class="s">“http：// jboss。 org / schema / arquillian</span> <span class="s">http://jboss.org/schema/arquillian/arquillian_1_0.xsd“</span> <span class="nt">&gt;</span> <span class="nt">&lt;container</span> <span class="na">qualifier =</span> <span class="s">”glassfish“</span> <span class="na">default =</span> <span class="s">”true“</span> <span class="nt">&gt;</span> <span class="nt">&lt;configuration&gt;</span> <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">”glassFishHome“</span> <span class="nt">&gt;</span> C：\ GlassFish \ glassfish4 <span class="nt">&lt;/ property&gt;</span> <span class="nt">&lt;/ configuration&gt;</span> <span class="nt">&lt;/ container&gt;</span> <span class="nt">&lt;/ arquillian&gt;</span></code></div>            <figure><img alt="arq26EditorArquillianXml" title="arq26EditorArquillianXml" src="../img/idea/2019.1/arq26EditorArquillianXml.png" id="f991079d" width="616" height="298"></figure>            <p id="43ba1ef4">使用GlassFish Server安装文件夹的实际路径代替<code class="code">C:\GlassFish\glassfish4</code> 。</p>        </li></ol>    <h2 id="8071519e">在托管容器中运行测试</h2>    <ol class="list _decimal"><li class="list__item" id="b582265a">在运行配置选择器的右侧，单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="icons toolwindows toolWindowRun svg"> 。<figure><img alt="arq27GlassFishManagedRun" title="arq27GlassFishManagedRun" src="../img/idea/2019.1/arq27GlassFishManagedRun.png" id="7bc96f16" width="299" height="29"></figure>            <p id="3a3bcdfe">将打开“ <span class="control">运行”</span>工具窗口，并在此处显示测试结果。</p>            <figure><img alt="arq28TestResult" title="arq28TestResult" src="../img/idea/2019.1/arq28TestResult.png" id="50c63b0c" width="616" height="249"></figure>        </li><li class="list__item" id="db179913"><p>关闭工具窗口（ <img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.close@2x.png" width="16" alt="图标行动关闭"> ）。</p></li></ol>    <h2 id="2c3a32c9">修改arquillian.xml</h2>    <p id="35c36d0c">有时，您需要将测试部署到已在运行的容器中。在这种情况下，您可以稍微更改容器配置文件并继续使用托管容器适配器。</p>    <p id="4ae02e79">将以下内容添加到<code class="code">arquillian.xml</code> ：</p>    <div class="code-block" data-lang="XML"><code class="code-block__wrapper"><span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">“allowConnectingToRunningServer”</span> <span class="nt">&gt;</span> true <span class="nt">&lt;/ property&gt;</span></code></div>    <figure><img alt="arq29EditorArquillianXml" title="arq29EditorArquillianXml" src="../img/idea/2019.1/arq29EditorArquillianXml.png" id="80096ed0" width="616" height="318"></figure>    <h2 id="2e3ca16a">运行测试：部署到正在运行的服务器</h2>    <ol class="list _decimal"><li class="list__item" id="4d616079">启动GlassFish Server：选择<span class="control">GlassFish</span>并单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="icons toolwindows toolWindowRun svg"> 。<figure><img alt="arq30SelectGlassFish" title="arq30SelectGlassFish" src="../img/idea/2019.1/arq30SelectGlassFish.png" id="799e9cbe" width="318" height="134"></figure>            <p id="5ff70968">启动服务器后，您将在“ <span class="control">运行”</span>工具窗口中看到类似的内容。</p>            <figure><img alt="arq31GlassFishStarted" title="arq31GlassFishStarted" src="../img/idea/2019.1/arq31GlassFishStarted.png" id="15bba810" width="616" height="249"></figure></li><li class="list__item" id="a11df1e9">选择<span class="control">GlassFish Managed：GreeterTest</span>并单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="icons toolwindows toolWindowRun svg"> 。<figure><img alt="arq32SelectGreeterTest" title="arq32SelectGreeterTest" src="../img/idea/2019.1/arq32SelectGreeterTest.png" id="353efc15" width="318" height="134"></figure>            <p id="02d809bd">一段时间后，测试结果显示在“ <span class="control">运行”</span>工具窗口中。</p>            <figure><img alt="arq33TestResult" title="arq33TestResult" src="../img/idea/2019.1/arq33TestResult.png" id="d2df6588" width="616" height="249"></figure>        </li></ol>    <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="android.html">Android教程</a> <a class="navigation-links__next" href="aspectj.html">AspectJ</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>也可以看看</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>参考：</h3><ul class="list"><li class="list__item"><a href="arquillian-containers.html"><span>Arquillian容器</span></a></li><li class="list__item"><a href="run-debug-configuration-arquillian-junit.html"><span>运行/调试配置：Arquillian JUnit</span></a></li><li class="list__item"><a href="run-debug-configuration-arquillian-testng.html"><span>运行/调试配置：Arquillian TestNG</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="using-the-aspectj-ajc-compiler.html"></link><meta charset="UTF-8"></meta><title>使用AspectJ编译器（ajc） - 帮助| IntelliJ IDEA</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Using_the_AspectJ_ajc_Compiler"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="using-the-aspectj-ajc-compiler.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Using_the_AspectJ_ajc_Compiler.xml" data-toc="Using_the_AspectJ_ajc_Compiler">使用AspectJ编译器（ajc）</h1>         <aside class="warning " rel="Using_the_AspectJ_ajc_Compiler.xml" id="bdd4f050" data-title=""><p>此功能仅在<b id="02f4b079" origin="intellij-platform">Ultimate</b>版本中受支持。</p></aside>    <p id="7f2d0f97">默认情况下，IntelliJ IDEA使用<code class="code">javac</code>编译器。要使用AspectJ编译器<a href="http://eclipse.org/aspectj/doc/released/devguide/ajc-ref.html" data-bypass="yes" target="_blank"><span>ajc</span></a> （而不是<code class="code">javac</code>或与<code class="code">javac</code>结合使用），您应该更改<a href="java-compiler.html">相应的IDE设置</a> 。</p>    <p id="43dd8eed">在项目级别指定的<code class="code">ajc</code>设置可以在各个模块的级别进行微调。与模块关联的AspectJ方面用于此目的。</p>    <p id="d04c3d91">请注意， <code class="code">ajc</code>未与IntelliJ IDEA捆绑在一起，应单独下载。</p>    <p id="20e8547a">        <code class="code">ajc</code>作为AspectJ发行版的一部分提供，您可以从<a href="http://eclipse.org/aspectj/downloads.php" data-bypass="yes" target="_blank"><span>AspectJ网站</span></a>下载。</p>    <ul data-skip-index="skip"><li class="list__item"><a href="using-the-aspectj-ajc-compiler.html#ajc_and_javac">优化编译性能：将ajc与javac结合使用</a></li><li class="list__item"><a href="using-the-aspectj-ajc-compiler.html#controlling_aspectpath">控制ajc aspectpath</a></li><li class="list__item"><a href="using-the-aspectj-ajc-compiler.html#settings">选择ajc作为项目编译器并指定其设置</a></li><li class="list__item"><a href="using-the-aspectj-ajc-compiler.html#redefine_aspectpath_in_facet">在模块级别微调ajc的使用</a></li></ul>    <div class="chapter"><h2 id="ajc_and_javac">优化编译性能：将ajc与javac结合使用</h2>        <p id="80a7c4c1">IntelliJ IDEA允许您将<code class="code">ajc</code>与<code class="code">javac</code>结合使用，而无需在IDE设置中切换编译器。</p>        <p id="e76e1072">首先，您应该选择<code class="code">ajc</code>作为项目编译器（ <a href="java-compiler.html">Java Compiler页面</a>上的<a href="java-compiler.html#compiler">Use compiler字段</a> ）。</p>        <p id="2a1aeb85">如果您还想使用<code class="code">javac</code> ，请启用<a href="java-compiler.html#delegate_to_javac">Delegate to Javac选项</a> 。如果启用此选项，则使用<code class="code">javac</code> （通常更快）编译没有方面的模块，并使用<code class="code">ajc</code>编译包含方面的模块。（如果禁用此选项，则<code class="code">ajc</code>将用于项目中的所有模块。）</p>        <p id="747e38ae">您可以在各个模块级别微调编译器（ <code class="code">ajc</code>和<code class="code">javac</code> ）之间的任务分配。对于仅包含<code class="code">@Aspect</code> -annotated Java类（在<code class="code">.java</code>文件中）形式的方面的模块，您可以指定<code class="code">ajc</code>仅应用于后编译编织。如果这样做， <code class="code">javac</code>将用于编译所有源文件，然后<code class="code">ajc</code>将应用于编译的类文件进行编织。因此，整个过程（编译+编织）将花费更少的时间。</p>        <p id="cea08af9">如果启用了<span class="control">Delegate to Javac</span>选项，则通过打开与模块关联的<a href="aspectj-facet.html">AspectJ方面</a>中的相应选项来启用<code class="code">ajc</code>的编译后编织模式。</p>        <p id="edd0d41d">请注意，对于包含代码样式方面的模块（在<code class="code">.aj</code>文件中定义的模块），不应启用此选项。</p>    </div>    <div class="chapter"><h2 id="controlling_aspectpath">控制ajc aspectpath</h2>        <p id="7cff4c74">您可以分别为每个模块控制<a href="http://eclipse.org/aspectj/doc/released/devguide/ajc-ref.html" data-bypass="yes" target="_blank"><span>ajc</span></a> <code class="code">aspectpath</code>选项，请参阅<a href="using-the-aspectj-ajc-compiler.html#redefine_aspectpath_in_facet">在模块级别微调ajc的使用</a> 。</p>        <p id="12c01af7">由于将适当配置的<a href="http://maven.apache.org/" data-bypass="yes" target="_blank"><span>Maven</span></a>项目导入IntelliJ IDEA，可以自动设置模块方面<code class="code">aspectpath</code> 。</p>    </div>    <div class="chapter"><h2 id="settings">选择ajc作为项目编译器并指定其设置</h2>        <ol class="list _decimal"><li class="list__item" id="b345889a"><p>在“ <span class="control">设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）中，在对话框左侧的搜索框中键入<code class="code">compiler</code> 。</p></li><li class="list__item" id="7d208c80"><p>在搜索框下方的窗格中选择<span class="control">Java Compiler</span> 。</p></li><li class="list__item" id="e14e0e50">在对话框右侧打开的<a href="java-compiler.html">Compiler&gt; Java Compiler页面</a>上：<ol class="list _decimal"><li class="list__item" id="b06d193b"><p>从<span class="control">Use compiler</span> list中选择<span class="control">Ajc</span> 。</p></li><li class="list__item" id="04a5a96b"><p>如有必要，请指定字节码版本。（粗略地说，这些是JVM的最低目标版本。）</p></li><li class="list__item" id="6e4645cd">在<span class="control">Path to Ajc编译器</span>字段中指定编译器的<span class="control">路径</span> 。<p id="6112b687">您可以在字段中键入路径，或单击<img alt="browseButton" title="browseButton" src="../img/idea/2019.1/browseButton.png" id="f9b2a0d7" width="15" height="15" class="inline-icon-15">并在<a href="select-path-dialog.html">相应的对话框中</a>选择所需的文件。</p>                        <p id="90b691ff">（您需要的文件是<code class="code">aspectjtools.jar</code> ，它位于<code class="code">&lt;AspectJ installation directory&gt;\lib</code> 。）</p></li><li class="list__item" id="f2d2e5bc">如果需要，指定<a href="http://eclipse.org/aspectj/doc/released/devguide/ajc-ref.html" data-bypass="yes" target="_blank"><span>命令行选项</span></a>要传递给在<span class="control">命令行参数</span>字段中的编译器。<p id="64a71e41">您可以在字段中键入参数，或单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.expandComponent.svg@2x.png" width="16" alt="图标一般expandComponent svg">打开<span class="control">命令行参数</span>对话框，其中文本输入区域较大。</p></li><li class="list__item" id="9b0fe253"><p>单击“ <span class="control">测试”</span>以检查指定的设置是否正确。</p></li><li class="list__item" id="f85dbb42">如果要使用<code class="code">javac</code>编译不包含方面的模块，请选中<span class="control">Delegate to Javac</span>复选框。<p id="438ffd32">请注意， <code class="code">ajc</code>和<code class="code">javac</code>之间的任务分配可以在各个模块的级别进行微调。</p></li></ol></li><li class="list__item" id="e734ad6f"><p>在<span class="control">Settings</span>对话框中单击<span class="control">OK</span> 。</p></li></ol>    </div>    <div class="chapter"><h2 id="redefine_aspectpath_in_facet">在模块级别微调ajc的使用</h2>        <p id="9c1720c3">为了能够在模块级别微调<code class="code">ajc</code>的使用，您应该将AspectJ方面添加到相应的模块或模块。</p>        <p id="9ff97b92">完成后，您可以指定<code class="code">ajc</code>应仅用于编译后编织。您还可以指定模块的<code class="code">aspectpath</code> 。</p>        <ol class="list _decimal"><li class="list__item" id="1a4052e7"><p>将AspectJ方面添加到感兴趣的模块中。有关相应的说明，请参阅<a href="adding-support-for-frameworks-and-technologies.html"><span>添加框架和技术</span></a> 。</p></li><li class="list__item" id="c5e8b77c"><p>在“ <a href="project-structure-dialog.html">项目结构”对话框</a>右侧<a href="aspectj-facet.html">打开</a>的<a href="aspectj-facet.html">页面</a>上的<a href="project-structure-dialog.html">“</a> <span class="control">编译器”</span>下，根据需要指定设置（参见下文）。</p></li><li class="list__item" id="b0c3ca1b">如果您只想使用<code class="code">ajc</code>编织已编译的类文件（本例中的源代码是使用<code class="code">javac</code> ），请选中<span class="control">Post-compile weave mode</span>复选框。<p id="64f46c2c">重要信息：如果模块包含<code class="code">.aj</code>文件，请不要选中此复选框。</p></li><li class="list__item" id="e1d22906">要形成模块的<code class="code">aspectpath</code> ：<ul class="list _ul"><li class="list__item" id="c0248817"><p>使用<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="图标一般添加svg"> （ <kbd data-primary_default="Alt+Insert" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_default_for_xwin="Alt+Insert" data-primary_emacs="Alt+Insert" data-primary_jbuilder="Alt+Insert" data-primary_visual_studio="Alt+Insert" data-primary_netbeans="Alt+Insert" data-primary_eclipse="Alt+Insert" data-secondary_mac_os_x_10.5_="⌘N" data-secondary_mac_os_x="⌃N" data-secondary_eclipse_mac_os_x="⌘N" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="N/A">Alt + Insert</kbd> ）添加库和其他模块。在打开的对话框中选择所需的库和模块。（要选择，建议使用模块的依赖关系。）</p></li><li class="list__item" id="5d896f13"><p>使用<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.remove.svg@2x.png" width="16" alt="图标一般删除svg"> （ <kbd data-primary_default="Alt+Delete" data-primary_default_for_gnome="Alt+Delete" data-primary_default_for_kde="Alt+Delete" data-primary_default_for_xwin="Alt+Delete" data-primary_emacs="N/A" data-primary_jbuilder="Alt+Delete" data-primary_visual_studio="Alt+Delete" data-primary_netbeans="Alt+Delete" data-primary_eclipse="Alt+Delete" data-secondary_mac_os_x_10.5_="⌘⌦" data-secondary_mac_os_x="⌘⌦" data-secondary_eclipse_mac_os_x="N/A" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="N/A">Alt + Delete</kbd> ）从列表中删除所选项目。</p></li><li class="list__item" id="064a95aa"><p>使用<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.previousOccurence.svg@2x.png" width="16" alt="图标动作previousOccurence svg"> （ <kbd data-primary_default="Alt+Up" data-primary_default_for_gnome="Alt+Up" data-primary_default_for_kde="Alt+Up" data-primary_default_for_xwin="Alt+Up" data-primary_emacs="Alt+Up" data-primary_jbuilder="Alt+Up" data-primary_visual_studio="Alt+Up" data-primary_netbeans="Ctrl+Alt+Up" data-primary_eclipse="Ctrl+Shift+Up" data-secondary_mac_os_x_10.5_="⌃↑" data-secondary_mac_os_x="⌃↑" data-secondary_eclipse_mac_os_x="⌃⌥↑" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌥↑">Alt + Up</kbd> ）将所选项目在列表中<kbd data-primary_default="Alt+Up" data-primary_default_for_gnome="Alt+Up" data-primary_default_for_kde="Alt+Up" data-primary_default_for_xwin="Alt+Up" data-primary_emacs="Alt+Up" data-primary_jbuilder="Alt+Up" data-primary_visual_studio="Alt+Up" data-primary_netbeans="Ctrl+Alt+Up" data-primary_eclipse="Ctrl+Shift+Up" data-secondary_mac_os_x_10.5_="⌃↑" data-secondary_mac_os_x="⌃↑" data-secondary_eclipse_mac_os_x="⌃⌥↑" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌥↑">向上</kbd>移动一行。</p></li><li class="list__item" id="73cc7f2f"><p>使用<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.nextOccurence.svg@2x.png" width="16" alt="图标动作nextOccurence svg"> （ <kbd data-primary_default="Alt+Down" data-primary_default_for_gnome="Alt+Down" data-primary_default_for_kde="Alt+Down" data-primary_default_for_xwin="Alt+Down" data-primary_emacs="Alt+Down" data-primary_jbuilder="Alt+Down" data-primary_visual_studio="Alt+Down" data-primary_netbeans="Ctrl+Alt+Down" data-primary_eclipse="Ctrl+Shift+Down" data-secondary_mac_os_x_10.5_="⌃↓" data-secondary_mac_os_x="⌃↓" data-secondary_eclipse_mac_os_x="⌃⌥↓" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌥↓">Alt + Down</kbd> ）将所选项目在列表中向下移动一行。</p></li></ul></li><li class="list__item" id="e383bc2a"><p>在<span class="control">Project Structure</span>对话框中单击<span class="control">OK</span> 。</p></li></ol>    </div>    <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="using-the-push-itds-in-refactoring.html">在重构中使用Push ITDs</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>也可以看看</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>程序：</h3><ul class="list"><li class="list__item"><a href="enabling-aspectj-support-plugins.html"><span>启用AspectJ支持插件</span></a></li><li class="list__item"><a href="creating-a-library-for-aspectjrt-jar.html"><span>为aspectjrt.jar创建库</span></a></li><li class="list__item"><a href="compiling-applications.html"><span>编译应用程序</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>参考：</h3><ul class="list"><li class="list__item"><a href="java-compiler.html"><span>Java编译器</span></a></li><li class="list__item"><a href="aspectj-facet.html"><span>AspectJ Facet</span></a></li><li class="list__item"><a href="project-structure-dialog.html"><span>项目结构对话框</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
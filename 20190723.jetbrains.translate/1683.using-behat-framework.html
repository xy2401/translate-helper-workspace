<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="using-behat-framework.html"></link><meta charset="UTF-8"></meta><title>使用Behat进行测试 - 帮助| IntelliJ IDEA</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Using_Behat_Framework"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="using-behat-framework.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Using_Behat_Framework.xml" data-toc="Using_Behat_Framework">使用Behat进行测试</h1>         <aside class="warning " rel="Using_Behat_Framework.xml" id="f440351a" data-title=""><p>此功能仅在<b id="161b5576" origin="intellij-platform">Ultimate</b>版本中受支持。</p></aside>            <p id="f16b32f1">使用IntelliJ IDEA，您可以通过使用<span class="emphasis">Behat</span>框架运行<span class="emphasis">场景</span>来练习行为驱动的开发。目前，IntelliJ IDEA支持与<a href="http://docs.behat.org/en/v3.0/" data-bypass="yes" target="_blank"><span>Behat 3</span></a>和<a href="http://docs.behat.org/en/v2.5/" data-bypass="yes" target="_blank"><span>Behat 2</span></a>版本的集成。</p>    <p id="f9e98032">IntelliJ IDEA中Behat的原生支持包括：</p>    <ul class="list _bullet"><li class="list__item" id="0242c92f"><p>识别<span class="filepath">功能</span>方案文件和<span class="filepath">PHP</span>方案定义文件并对其进行编码。</p></li><li class="list__item" id="9ec84f70"><p>            <span class="filepath">功能</span>文件中的<a href="https://github.com/cucumber/cucumber/wiki/Gherkin" data-bypass="yes" target="_blank"><span>Gherkin</span></a>语法支持： <code class="code">Feature</code> ， <code class="code">Scenario</code> ， <code class="code">Given</code> ， <code class="code">When</code> ， <code class="code">Then</code> ， <code class="code">And</code> ， <code class="code">But</code>关键字。</p></li><li class="list__item" id="a21f6947"><p>在定义文件中识别<code class="code">@given</code> ， <code class="code">@when</code>和<code class="code">@then</code>注释。</p></li><li class="list__item" id="88c19177"><p>根据Behat 2.4的<a href="http://www.pcre.org/" data-bypass="yes" target="_blank"><span>PCRE</span></a>标准和Behat 3.0的PCRE +，通过正则表达式设置<span class="emphasis">方案</span>与其<span class="emphasis">定义</span>之间的对应关系。<a href="http://cukes.narkive.com/eAlea2Oy/cucumber-turnip-expressions-in-cucumber" data-bypass="yes" target="_blank"><span>萝卜表达</span></a>也很受欢迎。</p></li></ul>    <div class="chapter"><h2 id="php_test_frameworks_behat_before_you_start" data-toc="Using_Behat_Framework#php_test_frameworks_behat_before_you_start">在你开始之前</h2>        <ol class="list _decimal"><li class="list__item" id="7ea64b54">                <p id="fc683438">确保PHP解释器在<a href="php.html">PHP页面</a>上的IntelliJ IDEA中<a href="configuring-local-interpreter.html"><span>配置</span></a> ，如<a href="configuring-local-interpreter.html"><span>配置本地PHP解释器</span></a>和<a href="configuring-remote-interpreters.html"><span>配置远程PHP解释器中所述</span></a> 。</p>                <p id="64bfc550">请注意，Behat 3需要PHP 5.5及更高版本。</p>            </li><li class="list__item" id="ca39f573">                <p id="9961ff0d">确保已安装并启用了PHP和Behat插件。插件未与IntelliJ IDEA捆绑在一起，但可以从<span class="emphasis">JetBrains插件存储库中</span>安装它们，如<a href="managing-plugins.html"><span>管理插件中所述</span></a> 。启用后，插件可在IDE级别使用，也就是说，您可以在所有IntelliJ IDEA项目中使用它们。</p>            </li></ol>            </div>    <div class="chapter"><h2 id="php_test_frameworks_behat_download" data-toc="Using_Behat_Framework#php_test_frameworks_behat_download">下载并安装Behat</h2>            <p id="96acc881">在开始之前，请确保您的计算机上已安装Composer，并在<a href="using-the-composer-dependency-manager.html"><span>Composer Dependency Manager</span></a>中所述的当前项目中进行初始化。</p>            <section class="procedure-steps"><h2 id="1a3cd018">手动下载Behat安装包</h2><ul class="list "><li class="list__item" id="09524828">                                                            <p id="dcfdf236">从<span class="filepath">Behat</span> <a href="https://github.com/Behat/Behat/releases" data-bypass="yes" target="_blank"><span>下载页面</span></a>下载<span class="filepath">behat.phar</span>并将其保存在您的计算机上：</p>        <ul class="list _bullet"><li class="list__item" id="0b471328"><p>如果除了运行<span class="filepath">Behat</span>测试的能力之外还需要完整的编码帮助，请将<span class="filepath">Behat.phar</span>存储在项目的根目录下，以后将使用<span class="filepath">Behat</span> 。</p></li><li class="list__item" id="0ac28c07"><p>如果您只需要运行Behat测试并且不需要任何编码帮助，则可以将<span class="filepath">behat.phar</span>保存在项目之外。</p></li></ul>                    </li></ul></section>            <section class="procedure-steps"><h2 id="behat_install_with_composer">下载并安装Behat with Composer</h2><ol class="list _decimal"><li class="list__item" id="3ee2c207"><p>从<span class="filepath">composer.json</span>的上下文菜单中，选择<span class="menupath" data-skip-index="skip">Composer |管理依赖关系</span> 。或者选择<span class="menupath" data-skip-index="skip">工具|作曲家|</span>从主菜单<span class="menupath" data-skip-index="skip">管理依赖项</span> 。</p></li><li class="list__item" id="5c026b75">            <p id="1bf0266e">在打开的<a href="add-composer-dependency.html"><span>Manage Composer Dependencies对话框</span></a>中，从<span class="control">Available Packages</span>列表中选择<code class="code">behat/behat</code>软件包，可能使用搜索字段。</p>            <p id="ed17f353">从<span class="control">要安装</span>的<span class="control">版本</span>列表中选择相关版本。</p>        </li><li class="list__item" id="5d267e96">            <p id="f8a68a9b">如有必要，请展开“ <span class="control">设置</span>隐藏”区域并指定高级安装选项。在“ <span class="control">命令行参数”</span>字段中，键入其他命令行参数。建议提供<code class="code">--dev</code> ，option：在这种情况下，包将被添加到<span class="filepath">composer.json</span>文件的<code class="code">require-dev</code>部分，而不是默认的<code class="code">require</code>部分。</p>        </li><li class="list__item" id="76c6199f"><p>单击<span class="control">安装</span> 。</p></li></ol></section>            <p id="328d7254">了解有关从<a href="http://behat.org/en/latest/quick_start.html#installation" data-bypass="yes" target="_blank"><span>Behat官方网站</span></a>安装Behat的更多信息。</p>    </div>    <div class="chapter"><h2 id="php_test_frameworks_behat_integrate" data-toc="Using_Behat_Framework#php_test_frameworks_behat_integrate">在项目中集成Behat和IntelliJ IDEA</h2>                                                                        <p id="7e97225c">如果您使用<a href="configuring-local-interpreter.html">本地PHP解释器</a> ，IntelliJ IDEA会自动执行初始Behat配置。</p>        <section class="procedure-steps"><h2 id="dc26af2d">自动配置Behat</h2><ol class="list _decimal"><li class="list__item" id="afd88bc6"><p>将<span class="filepath">behat.yml</span>或<span class="filepath">behat.yml.dist</span>配置文件存储在项目根目录下。</p></li><li class="list__item" id="15bb0fd9"><p>                <a href="using-behat-framework.html#behat_install_with_composer">使用Composer安装Behat</a> 。</p></li></ol><p id="f9228e18">IntelliJ IDEA将在<a href="php-test-frameworks.html">Test Frameworks页面</a>和<a href="run-debug-configuration-behat.html">Behat</a>运行/调试配置上创建本地框架配置。</p></section>        <p id="e4527386">您可以手动配置Behat。如果使用<a href="configuring-remote-interpreters.html">远程PHP解释器</a> ，则需要手动配置。</p>            <section class="procedure-steps"><h2 id="a894c657">手动配置Behat</h2><ol class="list _decimal"><li class="list__item" id="choose_php_interpreter">                        <p id="333d048c">在“ <span class="control">设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）中，展开“ <span class="menupath" data-skip-index="skip">语言和框架”</span>节点，然后选择“ <span class="menupath" data-skip-index="skip">PHP</span>下的<span class="menupath" data-skip-index="skip">测试框架</span> ”。</p>        <p id="791f7cd7">在打开的“ <a href="php-test-frameworks.html">测试框架”页面</a>上，单击“确定” <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="添加图标">在中央窗格中，从列表中选择配置类型：</p>        <figure><img alt="ps_settings_php_test_frameworks.png" title="ps_settings_php_test_frameworks.png" src="../img/idea/2019.1/ps_settings_php_test_frameworks.png" id="244956b0" width="381" height="498"></figure>                                            <ul class="list _ul"><li class="list__item" id="a30c3cb6">                <p id="a75c04ef">在本地配置中，使用默认项目PHP解释<a href="php.html#ps_settings_php_default_php_interpreter">器</a> ，有关详细信息，请参阅<a href="php.html#ps_settings_php_default_php_interpreter">默认项目CLI解释</a>程序。</p>            </li><li class="list__item" id="f2a43736">                <p id="b277eef8">要将Behat与远程PHP解释器一起使用，请在打开的对话框中选择一个配置：</p>                <figure><img alt="ps_settings_php_test_frameworks_behat_choose_php_interpreter.png" title="ps_settings_php_test_frameworks_behat_choose_php_interpreter.png" src="../img/idea/2019.1/ps_settings_php_test_frameworks_behat_choose_php_interpreter.png" id="6114f4fb" width="525" height="350"></figure>            </li></ul>                </li><li class="list__item" id="82b2710d">                <p id="6c746d0e">在<span class="control">Behat Library</span>区域中，指定<span class="filepath">Behat</span>可执行文件或<span class="filepath">behat.phar</span>存档的位置。</p>点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.refresh.svg@2x.png" width="16" alt="重新加载按钮"> <span class="control">路径到Behat目录或phar文件</span>字段<span class="control">旁边</span> 。IntelliJ IDEA检测Behat的版本并将其显示在字段下方。</li><li class="list__item" id="e7da0943">                <p id="58ab1819">在“ <span class="control">测试运行器”</span>区域中，指定用于启动和执行方案的配置<span class="filepath">YML</span>文件。<br>默认情况下， <span class="filepath">Behat</span>在项目根文件夹或<span class="filepath">config</span>文件夹中查找<span class="filepath">behat.yml</span>配置文件。您可以指定自定义配置文件。</p>                <ul class="list _bullet"><li class="list__item" id="fbb4a56c">                        <p id="0e82c126">清除<span class="control">默认配置文件</span>复选框，让<span class="filepath">Behat</span>使用项目根文件夹或<span class="filepath">config</span>文件夹中的<span class="filepath">behat.yml</span>配置文件。如果未找到此类文件，则测试执行失败，因此明确指定配置文件可能更可靠。</p>                    </li><li class="list__item" id="2c1f4584">                        <p id="2af6f6c1">选中<span class="control">Default configuration file</span>复选框以指定您自己的<span class="filepath">YML</span>配置文件。此文件稍后将在所有Behat运行/调试配置中用作默认值。</p><p id="bd2dcf4e">在该字段中，指定要使用的配置文件的位置。手动键入路径或单击<img alt="browseButton" title="browseButton" src="../img/idea/2019.1/browseButton.png" id="bc454065" width="15" height="15" class="inline-icon-15">并在打开的对话框中选择文件。</p>                                                </li></ul>            </li></ol></section>    </div>    <div class="chapter"><h2 id="php_test_frameworks_behat_run_tests" data-toc="Using_Behat_Framework#php_test_frameworks_behat_run_tests">运行和调试Behat测试</h2>        <p id="4bbe7fae">有关编写<span class="emphasis">Behat功能的信息</span> ，请参阅<a href="http://docs.behat.org/en/latest/user_guide/writing_scenarios.html" data-bypass="yes" target="_blank"><span>Behat文档</span></a> 。</p>        <section class="procedure-steps"><h2 id="475a389f">运行或调试Behat测试</h2><ul class="list "><li class="list__item" id="536fcb01">                                        <p id="b10303c6">在项目工具窗口中，选择要运行测试的要素文件，然后从选择的上下文菜单中选择<span class="control">运行'&lt;feature file&gt;'</span>或<span class="control">Debug'&lt;feature file&gt;'</span> ：</p>        <figure><img alt="ps_test_frameworks_behat_launch_tests.png" title="ps_test_frameworks_behat_launch_tests.png" src="../img/idea/2019.1/ps_test_frameworks_behat_launch_tests.png" id="aca95927" width="442" height="653"></figure>        <p id="3dab0eb0">IntelliJ IDEA生成默认运行配置并使用它启动运行/调试测试会话。</p>                </li></ul></section>        <section class="procedure-steps"><h2 id="002738a6">保存自动生成的默认配置</h2><ul class="list "><li class="list__item" id="758ccd04"><p>测试会话结束后，从文件或文件夹的上下文菜单中选择<span class="control">Save &lt;default_test_configuration_name&gt;</span> 。</p></li></ul></section>        <section class="procedure-steps"><h2 id="75a93bde">创建自定义运行/调试配置</h2><ol class="list _decimal"><li class="list__item" id="0646ca65"><p>在“项目”工具窗口中，选择要运行测试的文件或文件夹，然后从上下文菜单中选择“ <span class="control">创建运行配置</span> ”。或者，选择<span class="menupath" data-skip-index="skip">Run |</span>在主菜单上<span class="menupath" data-skip-index="skip">编辑配置</span> ，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="添加图标">并从列表中选择<span class="control">Behat</span> 。</p></li><li class="list__item" id="022a4654"><p>在“ <a href="run-debug-configuration-behat.html"><span>运行/调试配置：</span></a>打开的<a href="run-debug-configuration-behat.html"><span>Behat”</span></a>对话框中，指定要运行的方案，并通过指定要传递给PHP可执行文件的选项和参数来自定义当前<span class="emphasis">PHP解释器</span>的行为。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="behat_monitor_test_results" data-toc="Using_Behat_Framework#behat_monitor_test_results">监控Behat测试结果</h2>                                <p id="e4b905e2">IntelliJ IDEA在“ <a href="run-tool-window.html"><span>运行工具”窗口</span></a>的<a href="run-tool-window.html"><span>“</span></a> <a href="test-runner-tab.html">测试运行器”选项卡</a>中显示测试执行结果。</p>        <figure><img alt="ps_test_result_behat.png" title="ps_test_result_behat.png" src="../img/idea/2019.1/ps_test_result_behat.png" id="b6544301" width="717" height="415"></figure>        <p id="cae40abd">该标签分为两个主要区域：</p>        <ul class="list _ul"><li class="list__item" id="74b7150a"><p>左侧区域允许您深入查看所有单元测试以查看成功和失败的单元测试。您可以过滤测试，导出结果，并使用上下文菜单命令来运行特定测试或导航到源代码。</p></li><li class="list__item" id="38e08e58"><p>右侧区域显示原始Behat输出。</p></li></ul>        </div>    <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__next" href="using-codeception-framework.html">使用Codeception</a> <a class="navigation-links__prev" href="using-phpunit-framework.html">进行PHPUnit</a> <a class="navigation-links__next" href="using-codeception-framework.html">测试</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>也可以看看</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>程序：</h3><ul class="list"><li class="list__item"><a href="testing-php-applications.html"><span>测试PHP应用程序</span></a></li><li class="list__item"><a href="php-specific-guidelines.html"><span>PHP</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>参考：</h3><ul class="list"><li class="list__item"><a href="php-test-frameworks.html"><span>测试框架</span></a></li><li class="list__item"><a href="run-debug-configuration-behat.html"><span>运行/调试配置：Behat</span></a></li><li class="list__item"><a href="test-runner-tab.html"><span>测试跑步标签</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
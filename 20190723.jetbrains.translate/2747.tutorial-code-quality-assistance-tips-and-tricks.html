<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="tutorial-code-quality-assistance-tips-and-tricks.html"></link><meta charset="UTF-8"></meta><title>代码质量帮助提示和技巧，或如何使您的代码看起来漂亮？ - 帮助| PyCharm</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Tutorial_Code_Quality_Assistance_Tips_and_Tricks"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PyCharm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="tutorial-code-quality-assistance-tips-and-tricks.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Tutorial_Code_Quality_Assistance_Tips_and_Tricks.xml" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks">代码质量帮助提示和技巧，或如何使您的代码看起来漂亮？</h1>    <div class="chapter"><h2 id="9c86124f" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#9c86124f">本教程的内容</h2>        <p id="1e2e81b5">本教程旨在通过使用PyCharm的代码智能功能，逐步引导您在Python项目中创建源代码。您将看到PyCharm如何通过适当的缩进，空格，导入等帮助保持源代码的完美形状。实际上，您将看到PyCharm本身就是一个代码质量工具。</p>        <p id="76b5420a">Python编程超出了本教程的范围。要了解有关Python语言的更多信息，请参阅<a href="https://www.python.org/" data-bypass="yes" target="_blank"><span>官方网站</span></a> 。</p>    </div><div class="chapter"><h2 id="bc188ca7" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#bc188ca7">在你开始之前</h2>    <p id="b8d05c2b">确保：</p>    <ul class="list _ul"><li class="list__item" id="0841ccf0"><p>您正在使用PyCharm 5.0或更高版本。如果您还没有PyCharm，请从此<a href="https://www.jetbrains.com/pycharm/download/index.html" data-bypass="yes" target="_blank"><span>页面</span></a>下载。要安装PyCharm，请按照说明操作，具体取决于您的平台。有关详细信息，请参阅<a href="quick-start-guide.html#step0">产品文档</a> 。</p></li><li class="list__item" id="5f91be77"><p>您已经创建了一个Python项目（ <span class="menupath" data-skip-index="skip">File | New Project ...</span> ）。有关详细信息，请参阅<a href="creating-and-managing-projects.html">产品文档</a> 。</p></li><li class="list__item" id="dd45f986"><p>您已经创建了两个目录<code class="code">src</code>和<code class="code">test_dir</code> （ <span class="menupath" data-skip-index="skip">File | New</span>或<kbd data-primary_default="Alt+Insert" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_default_for_xwin="Alt+Insert" data-primary_emacs="Alt+Insert" data-primary_visual_studio="Ctrl+N" data-primary_netbeans="Alt+Insert" data-primary_eclipse="Alt+Insert" data-secondary_mac_os_x_10.5_="⌘N" data-secondary_mac_os_x="⌃N" data-secondary_eclipse_mac_os_x="⌘N" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌃N" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="N/A">Alt + Insert</kbd> ）。</p></li><li class="list__item" id="a9bcd1c4"><p>您已将Python文件添加到项目的<code class="code">src</code>和<code class="code">test_dir</code>目录中（ <span class="menupath" data-skip-index="skip">文件|新建</span>或<kbd data-primary_default="Alt+Insert" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_default_for_xwin="Alt+Insert" data-primary_emacs="Alt+Insert" data-primary_visual_studio="Ctrl+N" data-primary_netbeans="Alt+Insert" data-primary_eclipse="Alt+Insert" data-secondary_mac_os_x_10.5_="⌘N" data-secondary_mac_os_x="⌃N" data-secondary_eclipse_mac_os_x="⌘N" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌃N" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="N/A">Alt +插入</kbd> ）。要了解有关创建文件的信息，请参阅“ <a href="populating-projects.html"><span>填充项目</span></a> ”一节。</p></li></ul></div>    <div class="chapter"><h2 id="a56c4342" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#a56c4342">高举代码风格违规</h2>        <p id="bef8134e">创建一个新的Python文件<code class="code">src/Solver.py</code> （ <kbd data-primary_default="Alt+Insert" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_default_for_xwin="Alt+Insert" data-primary_emacs="Alt+Insert" data-primary_visual_studio="Ctrl+N" data-primary_netbeans="Alt+Insert" data-primary_eclipse="Alt+Insert" data-secondary_mac_os_x_10.5_="⌘N" data-secondary_mac_os_x="⌃N" data-secondary_eclipse_mac_os_x="⌘N" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌃N" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="N/A">Alt + Insert</kbd> ）。立即打开创建的文件进行编辑。默认情况下，该文件没有内容 - 这是因为文件<code class="code">Solver.py</code>是由<a href="using-file-and-code-templates.html">文件模板</a>创建的（在Python文件的情况下）只包含任何内容。</p>        <p id="7d4d9fc2">接下来，开始键入关键字<code class="code">class</code> 。当您刚开始输入时，PyCharm会立即显示建议列表以完成您的代码：</p>        <figure><img alt="py code1" title="py code1" src="../img/idea/2019.1/py_code1.png" id="2e6373e5" width="498" height="139"></figure>        <p id="5bfa936c">（有关详细信息，请参阅产品文档的<a href="auto-completing-code.html#basic_completion">“代码完成”</a>页面。）</p>        <p id="c1f42247">红色曲线标记下一个预期的条目 - 在这种情况下，这是预期的标识符。输入类名称<code class="code">Solver</code> 。红色曲线在类名后移动。如果将鼠标指针悬停在此曲线上，则会看到错误说明（“预期冒号”）。另外，请注意右侧排水沟中的红色错误条纹 - 它也标记了相同的错误：</p>        <figure><img alt="预计py冒号" title="预计py冒号" src="../img/idea/2019.1/py_colon_expected.png" id="7519b893" width="495" height="91"></figure>        <p id="8005ac93">单击确定，键入冒号，然后按<kbd data-primary_default="Enter" data-primary_default_for_gnome="Enter" data-primary_default_for_kde="Enter" data-primary_default_for_xwin="Enter" data-primary_emacs="Enter" data-primary_visual_studio="Enter" data-primary_netbeans="Enter" data-primary_eclipse="Enter" data-secondary_mac_os_x_10.5_="⏎" data-secondary_mac_os_x="⏎" data-secondary_eclipse_mac_os_x="⏎" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⏎" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⏎">Enter键</kbd> 。根据<a href="code-style-python.html">Python代码样式</a> ，下一个语句是缩进的。如果您偶然在<kbd data-primary_default="Enter" data-primary_default_for_gnome="Enter" data-primary_default_for_kde="Enter" data-primary_default_for_xwin="Enter" data-primary_emacs="Enter" data-primary_visual_studio="Enter" data-primary_netbeans="Enter" data-primary_eclipse="Enter" data-secondary_mac_os_x_10.5_="⏎" data-secondary_mac_os_x="⏎" data-secondary_eclipse_mac_os_x="⏎" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⏎" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⏎">Enter</kbd>后按空格<kbd data-primary_default="Enter" data-primary_default_for_gnome="Enter" data-primary_default_for_kde="Enter" data-primary_default_for_xwin="Enter" data-primary_emacs="Enter" data-primary_visual_studio="Enter" data-primary_netbeans="Enter" data-primary_eclipse="Enter" data-secondary_mac_os_x_10.5_="⏎" data-secondary_mac_os_x="⏎" data-secondary_eclipse_mac_os_x="⏎" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⏎" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⏎">键</kbd> ，则会违反代码样式设置。</p>    </div>    <div class="chapter"><h2 id="49fda68b" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#49fda68b">调整PEP8检查</h2>        <p id="9ed90a40">但是，默认情况下，这些违规只是弱警告，因此不可见。所以，首先，让我们提高它们的重要性。点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.settings.svg@2x.png" width="16" alt="图标一般设置svg">在主工具栏的“设置/首选项”对话框的“ <a href="inspections-settings.html">检查”页面</a>上，键入PEP8以查找所有与PEP8相关的检查，并从“严重性”下拉列表中选择“ <span class="control">警告”</span> ：</p>        <figure><img alt="py检查严重程度" title="py检查严重程度" src="../img/idea/2019.1/py_inspection_severity.png" id="f0ee1080" width="745" height="441"></figure>        <p id="0c8067c8">应用更改并关闭对话框。现在让我们回到我们的源代码。</p>    </div>    <div class="chapter"><h2 id="1a681872" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#1a681872">跟踪PEP8规则</h2>        <p id="1aafac63">现在PyCharm展示了它的最佳状态！它保持警惕，以保护您的代码风格的完整性。您立即注意到缩进的空格是突出显示的，当您键入下一个语句时，例如， <code class="code">def demo(self,a,b,c):</code> :, PyCharm将显示来自PEP8检查的消息：</p>        <figure><img alt="py检查pep8" title="py检查pep8" src="../img/idea/2019.1/py_inspection_pep8.png" id="cc103f04" width="226" height="61"></figure>        <p id="e7d326f0">因此，正如您所看到的，PyCharm支持<a href="https://www.python.org/dev/peps/pep-0008/" data-bypass="yes" target="_blank"><span>PEP8</span></a>作为官方Python风格指南。如果您浏览检查列表（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌥F7" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> - <a href="inspections-settings.html"><span>Inspections</span></a> ），您将看到PyCharm在您的代码上启动<code class="code">pep8.py</code>工具，并精确定位代码样式违规。</p>    </div>    <div class="chapter"><h2 id="497134d4" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#497134d4">代码检查及其设置</h2>      <p id="df330609">顺便一下，仔细看看<a href="inspections-settings.html"><span>检查</span></a> 。如果您刚刚打开此页面，则会看到<a href="customizing-profiles.html">默认检查配置文件</a>的默认设置：它表示检查适用于当前项目的所有源。</p>        <p id="c0cca2f8">让我们尝试为两个不同的<a href="scope.html">范围</a>自定义此配置文件：</p>        <ul class="list _ul"><li class="list__item" id="4b6c272f"><p>在<span class="emphasis">测试</span>范围中，拼写错误应标记为拼写错误（绿色）</p></li><li class="list__item" id="9c49cc4c"><p>在<span class="emphasis">生产</span>范围中，拼写错误应标记为错误（红色） - 我们是否可以实际生成带有拼写错误的代码？</p></li></ul>        <p id="1a34fe53">这就是它的完成方式......</p>        <div class="chapter"><h3 id="27530172" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#27530172">创建范围</h3>            <p id="5fbfc5b2">首先，让我们定义两个范围。为此，请单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.settings.svg@2x.png" width="16" alt="图标一般设置svg">在主工具栏上，在“ <span class="control">设置/首选项”</span>对话框中展开“ <span class="control">外观和行为</span> ”节点，打开“ <a href="settings-scopes.html"><span>范围</span></a> ”页面。然后点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="图标一般添加svg">并选择范围类型<span class="control">Local</span> 。</p>            <p id="991f5f4e">在“ <span class="control">添加新范围”</span>对话框中，键入范围名称（“测试”），然后在项目树中，选择要包含在测试范围<code class="code">test_dir</code> 。请注意，当您包含目录时， <span class="control">Pattern</span>字段会自动填充：</p>            <figure><img alt="py范围测试" title="py范围测试" src="../img/idea/2019.1/py_scope_test.png" id="9a1725ac" width="747" height="439"></figure>            <p id="6419ca61">重复此过程以创建生产范围。</p>        </div>        <div class="chapter"><h3 id="60e53706" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#60e53706">使用这些范围创建检验配置文件</h3>            <p id="ccc9871d">接下来，让我们<a href="customizing-profiles.html">创建一个</a>默认配置文件<a href="customizing-profiles.html">的副本</a> （虽然这个配置文件是可编辑的...只是为了安全起见）：</p>            <figure><img alt="py copy profile" title="py copy profile" src="../img/idea/2019.1/py_copy_profile.png" id="862505bd" width="710" height="443"></figure>            <p id="412b93a6">并为其指定一个新名称，例如MyProjectProfile。此新配置文件是默认配置文件的副本，并具有相同的检查集。</p>            <p id="090cd1d8">选择此新配置文件后，让我们找到拼写检查并进行更改。要查找拼写检查（我们之前已经完成），只需在搜索区域输入<code class="code">spel</code> 。</p>            <p id="92d9cb2a">下一步是什么？单击<span class="control">In All Scopes</span>按钮并从列表中选择Test scope;对生产范围重复相同</p>            <figure><img alt="py spel测试范围" title="py spel测试范围" src="../img/idea/2019.1/py_spel_test_scope.png" id="988923f1" width="613" height="439"></figure>            <p id="09ec62ea">在“测试”范围内，检查严重性保持原样（拼写错误）;但是，范围“生产”我们将从严重性列表中选择“错误”：</p>            <figure><img alt="py spel生产范围" title="py spel生产范围" src="../img/idea/2019.1/py_spel_production_scope.png" id="c64e9393" width="615" height="469"></figure>            <p id="0e230791">注意检查的颜色代码。如果不变，它们会显示为黑色。如果它们是蓝色的，则表示它们已被更改。</p>            <p id="b9f962b7">应用更改并关闭对话框...</p>            <p id="241452c4">因此，修改后的检查配置文件已准备就绪它的名称是<span class="control">Project Default（复制）</span> ，它在测试和生产范围中具有不同的拼写检查设置。接下来，让我们根据此配置文件检查代码。为此，请在主菜单上选择<span class="menupath" data-skip-index="skip">“代码”|“检查代码”</span> ，然后在对话框中选择所需的配置文件和范围：</p>            <figure><img alt="py检查代码范围" title="py检查代码范围" src="../img/idea/2019.1/py_inspect_code_against_scope.png" id="3fb2f244" width="368" height="347"></figure>            <p id="32563b28">做两次 - 对于测试和生产范围（如果您想保留检查结果以供进一步检查和共享，您可以<a href="exporting-inspection-results.html">将它们导出</a> ）。探索结果：</p>            <figure><img alt="py spel检查" title="py spel检查" src="../img/idea/2019.1/py_spel_inspection.png" id="abe80588" width="656" height="445"></figure>        </div>    </div>    <div class="chapter"><h2 id="04bd4a9c" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#04bd4a9c">突出显示错误</h2>        <p id="a3089146">除了编码样式违规外，PyCharm还会突出显示其他错误，具体取决于所选的配置文件。</p>        <p id="f0284e74">例如，如果您的检查配置文件包含Python检查<span class="control">未解析的引用</span> ，并且您使用尚未导入的符号，则PyCharm会强调未解析的引用并建议添加import语句：</p>        <figure><img alt="py导入" title="py导入" src="../img/idea/2019.1/py_import.png" id="e5a6d8a3" width="354" height="175"></figure><p id="13413476">请参阅产品<a href="creating-and-optimizing-imports.html">文档</a> 。</p>        <p id="92daf34f">无论如何，您可以在<a href="status-bar.html#hector">Hector的</a>帮助下更改错误突出显示。</p>    </div>    <div class="chapter"><h2 id="ed0a9a75" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#ed0a9a75">生成源代码</h2>        <p id="4d8ff803">PyCharm提供了很多自动生成代码的可能性。您可以在<a href="generating-code.html">产品文档中</a>探索自动生成功能。让我们来探索主要的代码生成过程。要做到这一点，只需删除文件<code class="code">Solver.py</code>所有内容，并从头开始。</p>        <p id="c7cb936f">首先，创建一个类的实例：</p>        <figure><img alt="py创建一个类的实例" title="py创建一个类的实例" src="../img/idea/2019.1/py_create_instance_of_a _class.png" id="c87f425f" width="379" height="76"></figure>        <p id="0f41ac91">接下来，按<kbd data-primary_default="Alt+Enter" data-primary_default_for_gnome="Alt+Enter" data-primary_default_for_kde="Alt+Enter" data-primary_default_for_xwin="Alt+Enter" data-primary_emacs="Alt+Enter" data-primary_visual_studio="Alt+Enter" data-primary_netbeans="Alt+Enter" data-primary_eclipse="Alt+Enter" data-secondary_mac_os_x_10.5_="⌥⏎" data-secondary_mac_os_x="⌥⏎" data-secondary_eclipse_mac_os_x="⌘1" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌥⏎" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌥⏎">Alt + Enter</kbd>并选择意图操作<span class="control">创建类'解算器'</span> ：</p>        <figure><img alt="py创建类意图动作" title="py创建类意图动作" src="../img/idea/2019.1/py_create_class_intention_action.png" id="603eea04" width="398" height="170"></figure>        <p id="3a2db0f2">大！PyCharm已经删除了一个类：</p>        <figure><img alt="py创建类存根" title="py创建类存根" src="../img/idea/2019.1/py_create_class_stub.png" id="201cf2d0" width="379" height="160"></figure>        <p id="39dd2f4d">接下来，让我们为类实例添加一个方法。为此，请在类实例后键入一个点，然后键入方法名称。此方法尚不存在，PyCharm建议创建一个：</p>        <figure><img alt="py类中的create方法" title="py类中的create方法" src="../img/idea/2019.1/py_create_method_in_class.png" id="70116cb2" width="841" height="180"></figure><p id="6f9653aa">让我们做一些手工工作 - 输入源代码。在计算判别式时，我们必须提取平方根。库<code class="code">math</code>有一个专用函数<code class="code">sqrt</code> ，但尚未导入。好吧，让我们打字吧，看看PyCharm如何应对它。按<kbd data-primary_default="Alt+Enter" data-primary_default_for_gnome="Alt+Enter" data-primary_default_for_kde="Alt+Enter" data-primary_default_for_xwin="Alt+Enter" data-primary_emacs="Alt+Enter" data-primary_visual_studio="Alt+Enter" data-primary_netbeans="Alt+Enter" data-primary_eclipse="Alt+Enter" data-secondary_mac_os_x_10.5_="⌥⏎" data-secondary_mac_os_x="⌥⏎" data-secondary_eclipse_mac_os_x="⌘1" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌥⏎" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌥⏎">Alt + Enter</kbd>并选择“ <span class="control">导入'数学'</span> ：</p><figure><img alt="py创建导入" title="py创建导入" src="../img/idea/2019.1/py_create_import.png" id="e1a278b6" width="845" height="232"></figure>        <p id="ad696779">所以，我们来源代码是这样的：</p>        <div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="kn">导入</span> <span class="nn">数学</span> <span class="k">类</span> <span class="nc">解算器</span> <span class="p">（</span> <span class="nb">对象</span> <span class="p">）：</span> <span class="k">def</span> <span class="nf">演示</span> <span class="p">（</span> <span class="bp">自我</span> <span class="p">，</span> <span class="n">a</span> <span class="p">，</span> <span class="n">b</span> <span class="p">，</span> <span class="n">c</span> <span class="p">）：</span> <span class="n">d</span> <span class="o">=</span> <span class="n">b</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span> <span class="n">disc</span> <span class="o">=</span> <span class="n">math</span> <span class="o">。</span> <span class="n">sqrt</span> <span class="p">（</span> <span class="n">d</span> <span class="p">）</span> <span class="n">root1</span> <span class="o">=</span> <span class="p">（</span> <span class="o">-</span> <span class="n">b</span> <span class="o">+</span> <span class="n">disc</span> <span class="p">）</span> <span class="o">/</span> <span class="p">（</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">a</span> <span class="p">）</span> <span class="n">root2</span> <span class="o">=</span> <span class="p">（</span> <span class="o">-</span> <span class="n">b</span> <span class="o">-</span> <span class="n">disc</span> <span class="p">）</span> <span class="o">/</span> <span class="p">（</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">a</span> <span class="p">）</span> <span class="k">print</span> <span class="p">（</span> <span class="n">root1</span> <span class="p">，</span> <span class="n">root2</span> <span class="p">）</span> <span class="k">return</span> <span class="n">root1</span> <span class="p">，</span> <span class="n">root2</span></code></div>        <p id="7fbd5944">但是，它缺乏一些重要的分析。我们想分析一下radicand <code class="code">d</code> 。如果它为零或正数，则计算判别式和方程根;当radicand是负数时，让我们提出异常。PyCharm如何帮助完成这项任务？</p>        <p id="f6e1e700">让我们用<code class="code">if</code>结构包围一段代码。选择要完成的语句，当<code class="code">d</code>为非负数时，按<kbd data-primary_default="Ctrl+Alt+T" data-primary_default_for_gnome="Ctrl+Alt+T" data-primary_default_for_kde="Ctrl+Alt+T" data-primary_default_for_xwin="Ctrl+Alt+T" data-primary_emacs="Ctrl+Alt+T" data-primary_visual_studio="Ctrl+Alt+T" data-primary_netbeans="Ctrl+Alt+T" data-primary_eclipse="Shift+Alt+Z" data-secondary_mac_os_x_10.5_="⌥⌘T" data-secondary_mac_os_x="⌥⌘T" data-secondary_eclipse_mac_os_x="⌥⌘Z" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌃⌥T" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥T">Ctrl + Alt + T</kbd> （或在主菜单上选择<span class="menupath" data-skip-index="skip">Code | Surround with</span> ）：</p><figure><img alt="py环绕码" title="py环绕码" src="../img/idea/2019.1/py_surround_code.png" id="866a2004" width="524" height="168"></figure>        <p id="aa8c5245">从建议列表中选择<code class="code">if</code>选项。如您所见，PyCharm会自动添加<code class="code">if True:</code>并缩进选定的行：</p>        <figure><img alt="py环绕添加" title="py环绕添加" src="../img/idea/2019.1/py_surround_added.png" id="2c3d785b" width="399" height="312"></figure>        <p id="33209e7e">我们对布尔表达式一点也不感兴趣，所以让我们将选择的<code class="code">True</code>更改为<code class="code">d &gt;= 0</code> 。接下来，将插入符号放在最后一行的末尾，然后按<kbd data-primary_default="Enter" data-primary_default_for_gnome="Enter" data-primary_default_for_kde="Enter" data-primary_default_for_xwin="Enter" data-primary_emacs="Enter" data-primary_visual_studio="Enter" data-primary_netbeans="Enter" data-primary_eclipse="Enter" data-secondary_mac_os_x_10.5_="⏎" data-secondary_mac_os_x="⏎" data-secondary_eclipse_mac_os_x="⏎" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⏎" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⏎">Enter键</kbd> 。插入符号位于下一行，与<code class="code">if</code>语句具有相同的缩进;在<code class="code">else: clause here</code>键入<code class="code">else: clause here</code> ，并查看PyCharm报告预期的缩进：</p><figure><img alt="py其他缩进预期" title="py其他缩进预期" src="../img/idea/2019.1/py_else_indent_expected.png" id="5dc97148" width="393" height="306"></figure>        <p id="0e6b8df5">再次按<kbd data-primary_default="Enter" data-primary_default_for_gnome="Enter" data-primary_default_for_kde="Enter" data-primary_default_for_xwin="Enter" data-primary_emacs="Enter" data-primary_visual_studio="Enter" data-primary_netbeans="Enter" data-primary_eclipse="Enter" data-secondary_mac_os_x_10.5_="⏎" data-secondary_mac_os_x="⏎" data-secondary_eclipse_mac_os_x="⏎" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⏎" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⏎">Enter键</kbd>时，插入符号位于缩进位置。在这里，您可以使用PyCharm强大的自动代码完成来键入异常表达式：</p><figure><img alt="完成代码" title="完成代码" src="../img/idea/2019.1/py_completing_code.png" id="41a909a6" width="321" height="257"></figure>    </div>    <div class="chapter"><h2 id="14224343" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#14224343">重新格式化代码</h2>        <p id="0d70ecc9">让我们再看看我们的<code class="code">Solver.py</code>文件。它的右排水沟显示黄色条纹。当您将鼠标指针悬停在条带上时，PyCharm会在代码中显示相应问题的描述：</p>        <figure><img alt="py警告" title="py警告" src="../img/idea/2019.1/py_warnings.png" id="460bdee3" width="396" height="354"></figure>        <p id="24f4cb9f">好消息是它们只是警告，不会影响结果。坏消息是它们太多而无法逐一修复。有没有可能使源代码很好，漂亮而不用大惊小怪？</p>        <p id="8f119a81">PyCharm说 - 是的。这是<a href="reformatting-source-code.html">代码重新格式化功能</a> 。所以让我们尝试更改整个文件的格式。为此，请按<kbd data-primary_default="Ctrl+Alt+L" data-primary_default_for_gnome="Ctrl+Alt+L" data-primary_default_for_kde="Shift+Alt+L" data-primary_default_for_xwin="Ctrl+Alt+L" data-primary_emacs="N/A" data-primary_visual_studio="Alt+F8" data-primary_netbeans="Shift+Alt+F" data-primary_eclipse="Ctrl+Alt+L" data-secondary_mac_os_x_10.5_="⌥⌘L" data-secondary_mac_os_x="⌥⌘L" data-secondary_eclipse_mac_os_x="⇧⌘F" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌥F8" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="N/A">Ctrl + Alt + L</kbd> （或在主菜单上选择<span class="menupath" data-skip-index="skip">“代码”|“重新格式化代码”</span> ）：</p>        <figure><img alt="py重新格式化代码完成" title="py重新格式化代码完成" src="../img/idea/2019.1/py_reformat_code_done.png" id="8dcb2166" width="280" height="87"></figure>        <p id="2e2f4a7e">现在看一下代码 - 与PEP8相关的缺点都消失了。</p>        <p id="d0d530b6">请注意，您可以自己定义格式规则。为此，打开代码<a href="settings-code-style.html">样式设置</a> ，选择语言（在本例中为Python），并进行必要的更改：</p>        <figure><img alt="py重新格式化代码设置" title="py重新格式化代码设置" src="../img/idea/2019.1/py_reformat_code_settings.png" id="43a0cf09" width="798" height="531"></figure>    </div>    <div class="chapter"><h2 id="86a218ed" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#86a218ed">添加文档注释</h2>        <p id="44df02c7">好的，格式化现在已修复，但仍有一些条纹。不可避免的黄灯泡显示添加文档字符串注释的可能性：</p><figure><img alt="py意图docstrings" title="py意图docstrings" src="../img/idea/2019.1/py_intention_docstrings.png" id="9ada5ee1" width="470" height="356"></figure>        <p id="8899bada">选择此建议并查看添加的某个参数的docstring注释：</p>        <figure><img alt="py意图docstrings完成" title="py意图docstrings完成" src="../img/idea/2019.1/py_intention_docstrings_done.png" id="8cb773eb" width="475" height="359"></figure>        <p id="5ee9ea27">请注意，您必须在编辑器设置<a href="settings-smart-keys.html#type"><span>的文档注释存根</span></a>页面的“ <span class="control">插入类型占位符”中选择文档注释字符串</span>中的“ <a href="settings-smart-keys.html#type"><span>插入类型占位符</span></a> ”复选框：</p>        <figure><img alt="py insert type占位符设置" title="py insert type占位符设置" src="../img/idea/2019.1/py_insert_type_placeholder_setting.png" id="fc446e68" width="618" height="318"></figure>        <p id="28556246">有几种文档字符串格式，文档注释以您在<a href="settings-tools-python-integrated-tools.html">Python集成工具</a>页面中选择的格式创建。如果您愿意，可以将文档字符串格式更改为Epytext或纯文本。</p>    </div>    <div class="chapter"><h2 id="5f470695" data-toc="Tutorial_Code_Quality_Assistance_Tips_and_Tricks#5f470695">类型提示</h2>        <p id="8edab7fe">文档注释可用于定义参数的预期类型，返回值或局部变量。为什么我们需要这一切？例如，我们希望控制我们传递给<code class="code">demo()</code>方法的参数类型。为此，我们将相应的信息添加到文档注释中（顺便提一下，文档注释中的注释代码完成！）：</p>        <figure><img alt="py docstrings完成" title="py docstrings完成" src="../img/idea/2019.1/py_docstrings_completion.png" id="bf34865f" width="471" height="353"></figure>        <p id="ef9e9e88">接下来，当您查看方法调用时，您会看到PyCharm的检查<span class="control">类型检查器</span>突出显示了错误的参数：</p>        <figure><img alt="py型检查器" title="py型检查器" src="../img/idea/2019.1/py_type_checker.png" id="b512bb35" width="471" height="355"></figure>        <p id="ef8c293c">在PyCharm文档中了解有关<a href="type-hinting-in-product.html">类型提示的</a>更多信息。</p>    </div>    <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="switching-boot-jdk.html">切换启动JDK</a> <a class="navigation-links__next" href="managing-plugins.html">管理插件</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>也可以看看</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>程序：</h3><ul class="list"><li class="list__item"><a href="reformatting-source-code.html"><span>重新格式化源代码</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>参考：</h3><ul class="list"><li class="list__item"><a href="settings-tools-python-integrated-tools.html">Python集成工具</a></li><li class="list__item"><a href="settings-smart-keys.html"><span>智能钥匙</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>语言和框架特定指南：</h3><ul class="list"><li class="list__item"><a href="type-hinting-in-product.html"><span>在PyCharm中输入提示</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
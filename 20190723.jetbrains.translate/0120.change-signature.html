<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="change-signature.html"></link><meta charset="UTF-8"></meta><title>更改签名 - 帮助| IntelliJ IDEA</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="procedures.refactoring.changeMethodSignature"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="change-signature.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Change_Signature.xml" data-toc="procedures.refactoring.changeMethodSignature">改变签名</h1>                                                                                   <aside class="tip sideblock" rel="change_method_signature_availability" id="aecce80b" data-title="">        <p id="cb621c28">您可以从<a href="class-diagram.html">UML类图中</a>访问此重构。</p>    </aside>    <p id="change_method_signature_availability"><span class="control">Change Signature</span>重构结合了几种可以应用于方法签名或类签名的不同修改。</p>        <p id="e4d93d23">对于一个<span class="emphasis">类</span> ，这种重构可以将类转换为泛型并操纵其类型参数。它会自动更正类的所有调用，实现和覆盖。</p>    <p id="fb6be56c">对于<span class="emphasis">方法</span> ，此重构可以更改方法名称，添加，删除，重新排序和重命名参数和异常，并通过调用层次结构传播新参数和异常。</p>    <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="d0720b33"><p>选择要更改签名的方法或类。</p></li><li class="list__item" id="281f7b85"><p>从上下文菜单中，选择<span class="menupath" data-skip-index="skip">Refactor |更改签名</span> （ <kbd data-primary_default="Ctrl+F6" data-primary_default_for_gnome="Ctrl+F6" data-primary_default_for_kde="Ctrl+6" data-primary_default_for_xwin="Ctrl+F6" data-primary_emacs="Ctrl+F6" data-primary_jbuilder="N/A" data-primary_visual_studio="Ctrl+F6" data-primary_netbeans="Ctrl+F6" data-primary_eclipse="Shift+Alt+C" data-secondary_mac_os_x_10.5_="⌘F6" data-secondary_mac_os_x="⌘F6" data-secondary_eclipse_mac_os_x="⌥⌘C" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃F6">Ctrl + F6</kbd> ）。</p></li><li class="list__item" id="73fa48fb"><p>在打开的对话框中，根据您要更改的签名，指定相应的选项，然后单击“ <span class="control">重构”</span> 。如果要查看潜在更改的<span class="control">预览</span> ，请单击“ <span class="control">预览”</span> 。</p></li></ol></section><div class="chapter"><h2 id="change_class_signature_refactoring" data-toc="procedures.refactoring.changeMethodSignature#change_class_signature_refactoring">更改类签名示例</h2>    <p id="change_signature_kotlin">让我们将类型参数<code class="code">Param1, Param2</code>添加到类<code class="code">MyClass</code> 。</p>        <p id="899427d3">String和Integer是分别在<code class="code">Param1</code>和<code class="code">Param2</code>的<span class="control">Change Class Signature</span>对话框中指定的默认值。</p>    <p id="fcbad91e">您还可以为参数添加有界值，以对传递给type参数的内容施加一些限制。例如，添加具有默认值<code class="code">List</code>和有界值<code class="code">Collection</code> <code class="code">Param3</code>    </p>    <figure><img alt="更改班级签名" title="更改班级签名" src="../img/idea/2019.1/change_class_signature.png" id="72f86bb7" width="394" height="264"></figure>    <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="2574204b"><thead><tr id="8b3de0d5" class="ijRowHead"><th id="5be78a2a" width="50%"><p>之前</p></th><th id="e51e339d" width="50%"><p>后</p></th></tr></thead><tbody><tr id="type_parameters" class="ijRowOdd"><td id="4a45c02f"><p>                </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">;</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span></code></div>            </td><td id="26d30fd9"><p>                </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">&lt;</span> <span class="n">Param1</span> <span class="o">，</span> <span class="n">Param2</span> <span class="o">，</span> <span class="n">Param3</span> <span class="kd">extends</span> <span class="n">Collection</span> <span class="o">&gt;</span> <span class="o">{</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="n">MyClass</span> <span class="o">&lt;</span> <span class="n">String</span> <span class="o">，</span> <span class="n">Integer</span> <span class="o">&gt;</span> <span class="n">myClass</span> <span class="o">;</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="o">&lt;</span> <span class="n">String</span> <span class="o">，</span> <span class="n">Integer</span> <span class="o">，</span> <span class="n">List</span> <span class="o">&gt;</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span></code></div>            </td></tr></tbody></table></div>    <aside class="tip sideblock" rel="change_signature_kotlin" id="236a78b6" data-title="">        <p id="ce97c170">对于<a href="https://kotlinlang.org/docs/reference/" data-bypass="yes" target="_blank"><span>Kotlin来说</span></a> ，这种重构与Java相同。您可以按<kbd data-primary_default="Ctrl+Shift+Alt+K" data-primary_default_for_gnome="Ctrl+Shift+Alt+K" data-primary_default_for_kde="Ctrl+Shift+Alt+K" data-primary_default_for_xwin="Ctrl+Shift+Alt+K" data-primary_emacs="Ctrl+Shift+Alt+K" data-primary_jbuilder="Ctrl+Shift+Alt+K" data-primary_visual_studio="Ctrl+Shift+Alt+K" data-primary_netbeans="Ctrl+Shift+Alt+K" data-primary_eclipse="Ctrl+Shift+Alt+K" data-secondary_mac_os_x_10.5_="⌥⇧⌘K" data-secondary_mac_os_x="⌥⇧⌘K" data-secondary_eclipse_mac_os_x="⌥⇧⌘K" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥⇧K">Ctrl + Shift + Alt + K</kbd>将Java代码转换为Kotlin。</p>    </aside></div>    <div class="chapter"><h2 id="change_method_signature_refactoring" data-toc="procedures.refactoring.changeMethodSignature#change_method_signature_refactoring">更改方法签名示例</h2>        <p id="526e85e1">您可以向方法添加参数，并在“ <span class="control">更改方法签名”</span>对话框中指定不同的选项以获得不同的结果。</p>        <p id="7b4b060e">您还可以向方法添加例外，它们将在调用层次结构中传播。</p><aside class="tip sideblock" rel="change_method_signature_refactoring" id="559b3cf2" data-title="">    <p id="ff4ce9a1"><span class="emphasis">Change Method Signature</span>重构适用于构造函数。但是，在这种情况下，名称和返回类型不能更改。</p></aside><aside class="tip sideblock" rel="change_method_signature_refactoring" id="52259e25" data-title=""><p id="c478f6ea">如果方法契约由<code class="code">@Contract</code>批注指定，则<span class="emphasis">更改方法签名</span>重构也会尝试转换此类方法。但是，在某些情况下，重构可能会失败，您需要手动调整合同。</p></aside><figure><img alt="更改方法签名" title="更改方法签名" src="../img/idea/2019.1/change_method_signature.png" id="1a82b18f" width="578" height="570"></figure>                <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="adding_parameters">添加参数</h3></div><div class="collapse__content">            <p id="7c289d8a">让我们添加一个名称<code class="code">price</code>参数，类型为<code class="code">double</code> ，默认值为<code class="code">0.0</code> 。</p>                <p id="9a1f1de5">IntelliJ IDEA向方法添加参数，更新方法调用并指定默认参数值。</p>            <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="0357650c"><thead><tr id="bbfdec6f" class="ijRowHead"><th id="1f320d86" width="50%"><p>之前</p></th><th id="85b6334f" width="50%"><p>后</p></th></tr></thead><tbody><tr id="7b8ca98c" class="ijRowOdd"><td id="f36919ae"><p>                        </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">value</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethodCall</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">;</span> <span class="n">myClass</span> <span class="o">。</span> <span class="na">myMethod</span> <span class="o">（</span> <span class="mi">1</span> <span class="o">）;</span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span></code></div>                    </td><td id="783765c7"><p>                        </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">，</span> <span class="kt">double</span> <span class="n">price</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethodCall</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">;</span> <span class="n">myClass</span> <span class="o">。</span> <span class="na">myMethod的</span> <span class="o"><span class="mi"><span class="o"><span class="mf"><span class="o">（1，0.0）;</span></span></span></span></span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span></code></div>                    </td></tr></tbody></table></div>        </div></div></div>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="use_variable">使用任何变量</h3></div><div class="collapse__content">            <p id="09e0df63">让我们更新所有方法调用，并在方法调用附近查找相应类型的变量，并将其传递给方法。要实现这一点，请选中<span class="control">Use Any Var</span>选项。</p>                <p id="fc14c4d1">因此，IntelliJ IDEA找到与新参数具有相同类型的变量<b id="73dd3036" origin="intellij-platform">d</b> ，并在方法调用中使用它。</p>            <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="67cac1c0"><thead><tr id="7202c226" class="ijRowHead"><th id="1ab16f50" width="50%"><p>之前</p></th><th id="a30602bf" width="50%"><p>后</p></th></tr></thead><tbody><tr id="bcbcd61f" class="ijRowOdd"><td id="3b91ffb6"><p>                        </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">value</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethodCall</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">;</span> <span class="n">myClass</span> <span class="o">。</span> <span class="na">myMethod</span> <span class="o">（</span> <span class="mi">1</span> <span class="o">）;</span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span></code></div>                    </td><td id="74d82e0b"><p>                        </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">，</span> <span class="kt">double</span> <span class="n">price</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethodCall</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">;</span> <span class="n">myClass</span> <span class="o">。</span> <span class="na">myMethod</span> <span class="o">（</span> <span class="mi">1</span> <span class="o">，</span> <span class="n">d</span> <span class="o">）;</span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span></code></div>                    </td></tr></tbody></table></div>        </div></div></div>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="overload_method">重载方法</h3></div><div class="collapse__content">            <p id="1398115f">让我们让IntelliJ IDEA保持方法调用不变，但是创建一个新的重载方法，它将使用新签名调用该方法。要实现这一点，请使用<span class="control">Delegate via overloading方法</span>选项。</p>            <p id="29846390">请注意，新的重载方法具有旧签名。但是，它使用新签名调用该方法。执行重构时， <code class="code">0.0</code>被指定为默认参数值。</p>            <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="a24c736c"><thead><tr id="6201718b" class="ijRowHead"><th id="fa82dfcb" width="50%"><p>之前</p></th><th id="29d8b982" width="50%"><p>后</p></th></tr></thead><tbody><tr id="f261b05e" class="ijRowOdd"><td id="96e036c3"><p>                        </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">value</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethodCall</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">;</span> <span class="n">myClass</span> <span class="o">。</span> <span class="na">myMethod</span> <span class="o">（</span> <span class="mi">1</span> <span class="o">）;</span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span></code></div>                    </td><td id="0f874916"><p>                        </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">）</span> <span class="o">{</span> <span class="n">myMethod</span> <span class="o">（</span> <span class="n">i</span> <span class="o">，</span> <span class="mf">0.0</span> <span class="o">）;</span> <span class="o">}</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">，</span> <span class="kt">double</span> <span class="n">price</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethodCall</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">;</span> <span class="n">myClass</span> <span class="o">。</span> <span class="na">myMethod</span> <span class="o">（</span> <span class="mi">1</span> <span class="o">）;</span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span></code></div>                    </td></tr></tbody></table></div>        </div></div></div>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="propagate_parameters">传播参数</h3></div><div class="collapse__content">            <p id="d24678e2">让我们宣传吧<img alt="propagateParameters" title="propagateParameters" src="../img/idea/2019.1/propagateParameters.png" id="796f8dbe" width="13" height="17" class="inline-icon-13"> <kbd data-bypass="true">Alt + G</kbd>通过调用方法<code class="code">myMethodCall()</code>调用方法的新参数。</p>            <p id="86a5a129">因此，新参数<code class="code">price</code>通过调用方法传播到方法调用，并相应地更改方法调用。</p>            <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="c1511501"><thead><tr id="6078814c" class="ijRowHead"><th id="c250f192" width="50%"><p>之前</p></th><th id="64d653a6" width="50%"><p>后</p></th></tr></thead><tbody><tr id="d13a4868" class="ijRowOdd"><td id="e58eb18e"><p>                        </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">value</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethodCall</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">;</span> <span class="n">myClass</span> <span class="o">。</span> <span class="na">myMethod</span> <span class="o">（</span> <span class="mi">1</span> <span class="o">）;</span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span></code></div>                    </td><td id="a3ccaf05"><p>                        </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">，</span> <span class="kt">double</span> <span class="n">price</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethodCall</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">，</span> <span class="kt">double</span> <span class="n">price</span> <span class="o">）</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">;</span> <span class="n">myClass</span> <span class="o">。</span> <span class="na">myMethod</span> <span class="o">（</span> <span class="mi">1</span> <span class="o">，</span> <span class="n">价格</span> <span class="o">）;</span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span></code></div>                    </td></tr></tbody></table></div>        </div></div></div>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="67324d2f">传播例外</h3></div><div class="collapse__content">            <p id="40c21fb1">让我们添加一个方法<code class="code">read</code> ，将异常<code class="code">IOException</code>到类<code class="code">MyClass</code> 。</p>             <p id="7f9d1602">然后让我们创建一个新的<code class="code">ExtendsMyClass</code>类，它将扩展<code class="code">MyClass</code>并覆盖原始的<code class="code">read</code>方法。</p>                <p id="b01c1e81">现在，如果我们回到<code class="code">MyClass</code>并决定添加另一个异常，例如，通过这种重构的<code class="code">TimeOutException</code> ，方法<code class="code">read</code>也会更新子类。</p>            <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="09a39386"><thead><tr id="46895886" class="ijRowHead"><th id="d79c9287" width="50%"><p>之前</p></th><th id="8e06b7f2" width="50%"><p>后</p></th></tr></thead><tbody><tr id="2b730c45" class="ijRowOdd"><td id="b813b1c0"><p>                        </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">read</span> <span class="o">（）</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">value</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethodCall</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">;</span> <span class="n">myClass</span> <span class="o">。</span> <span class="na">myMethod</span> <span class="o">（</span> <span class="mi">1</span> <span class="o">）;</span> <span class="o"><span class="o"><span class="o">}}}</span></span></span> <span class="c1">//让我们创建一个新的类“ExtendsMyClass”。</span>

<span class="kd">公共</span> <span class="kd">类</span> <span class="nc">ExtendsMyClass</span> <span class="kd">扩展</span> <span class="n">MyClass的</span> <span class="nd"><span class="o">{@</span>覆盖</span> <span class="kd">公共</span> <span class="kt">无效</span> <span class="nf">阅读</span> <span class="o">（）</span> <span class="kd">抛出</span> <span class="n">IOException异常</span> <span class="o">{</span> <span class="kd">超</span> <span class="o">。</span> <span class="na">read</span> <span class="o">（）;</span> <span class="o">}</span> <span class="o">}</span></code></div>                    </td><td id="8a208290"><p>                        </p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">read</span> <span class="o">（）</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">，</span> <span class="n">TimeOutException</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethod</span> <span class="o">（</span> <span class="kt">int</span> <span class="n">value</span> <span class="o">）</span> <span class="o">{</span> <span class="o">}</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyOtherClass</span> <span class="o">{</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMethodCall</span> <span class="o">（</span> <span class="n">MyClass</span> <span class="n">myClass</span> <span class="o">）</span> <span class="o">{</span> <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">;</span> <span class="n">myClass</span> <span class="o">。</span> <span class="na">myMethod</span> <span class="o">（</span> <span class="mi">1</span> <span class="o">）;</span> <span class="o"><span class="o"><span class="o">}}}</span></span></span> <span class="c1">//正如你看到的， “TimeoutException异常”增加了。</span>

<span class="kd">公共</span> <span class="kd">类</span> <span class="nc">ExtendsMyClass</span> <span class="kd">延伸</span> <span class="nf">阅读</span> <span class="n">MyClass的</span> <span class="nd"><span class="o">{@</span>覆盖</span> <span class="kd">公共</span> <span class="kt">无效</span> <span class="o">（）</span> <span class="kd">抛出</span> <span class="n">IOException异常</span> <span class="n"><span class="o">，TimeoutException</span>异常</span> <span class="o">{</span> <span class="kd">超</span> <span class="o">。</span> <span class="na">read</span> <span class="o">（）;</span> <span class="o">}</span> <span class="o">}</span></code></div>                    </td></tr></tbody></table></div>        </div></div></div>            <aside class="tip sideblock" rel="change_method_signature_refactoring" id="0c22698a" data-title="">            <p id="a76aa2f2">要查看Java以外的语言的<span class="emphasis">Change Method Signature</span>重构示例，请参阅以下主题：</p>            <p id="37cb7944"><a href="refactoring-php.html#php_change_signature">更改PHP的签名</a></p>            <p id="856abbeb"><a href="specific-typescript-refactorings.html#typescript_change_signature_proc">更改TypScript的签名</a></p>            <p id="a07c7cf2"><a href="specific-javascript-refactorings.html#javascript_change_signature_code_example">更改JavaScript的签名</a></p>        </aside>    </div>                                    <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="refactoring-source-code.html">重构代码</a> <a class="navigation-links__next" href="convert-anonymous-to-inner.html">将匿名转换为内部</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
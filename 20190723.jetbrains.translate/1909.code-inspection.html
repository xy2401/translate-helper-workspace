<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><meta name="description" content="
        How to configure and perform code inspections in PyCharm. Learn more about the code inspection profiles, severity levels, inspection scopes
    " data-skip-index="skip"></meta><link rel="canonical" href="code-inspection.html"></link><meta charset="UTF-8"></meta><title>代码检查 - 帮助| PyCharm</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="concepts.codeinspection"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PyCharm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="code-inspection.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Code_Inspection.xml" data-toc="concepts.codeinspection">代码检查</h1>                                <div class="chapter"><h2 id="intro" data-toc="concepts.codeinspection#intro">代码分析基础知识</h2>        <p id="707c96a4">PyCharm具有强大，快速和灵活的静态代码分析功能。它检测语言和运行时错误，建议更正和改进。</p>                                        <p id="12c0c374">PyCharm通过对代码应用检查来执行代码分析。代码检查适用于Python和其他支持的语言。</p>                                        <p id="eb66f20a">检查不仅检测编译错误，还检测不同的代码低效率。每当你有一些无法访问的代码，未使用的代码，非本地化的字符串，未解决的方法，内存泄漏甚至拼写问题时 - 你会很快找到它。</p>                                    <p id="ba5178ce">PyCharm的代码分析是可配置的。您可以<a href="disabling-and-enabling-inspections.html">启用或禁用</a>每个代码检查并<a href="configuring-inspection-severities.html">更改其严重性</a> ，使用自定义检查集创建<a href="customizing-profiles.html">配置文件</a> ， <a href="configuring-inspection-for-different-scopes.html">在不同范围内</a>应用不同的检查， <a href="suppressing-inspections.html">抑制</a>特定代码段中的检查等。</p>                <p id="5b9da81a">分析可以通过以下几种方式进行：</p>                <ul class="list _ul"><li class="list__item" id="65843434">                        <p id="86f4c7b5">默认情况下，PyCharm会分析所有打开的文件，并在编辑器中突出显示所有检测到的代码问题。在编辑器的右侧，您可以看到整个文件的分析状态（右上角的图标）。</p>                        <p id="28f9fc1d">严重性级别如下：错误（ <img class="inline-icon-16" src="../img/idea/2019.1/icons.general.balloonError.svg@2x.png" width="16" alt="错误图标"> ）， 一个警告 （ <img alt="警告图标" title="警告图标" src="../img/idea/2019.1/warning.png" id="f4d163bd" width="14" height="14" class="inline-icon-14"> ），没有发现问题（ <img alt="OK图标" title="OK图标" src="../img/idea/2019.1/ok.png" id="9061463a" width="15" height="12" class="inline-icon-15"> ）。</p>                    </li><li class="list__item" id="3074f6e4"><p>或者，您可以在指定范围的<a href="running-inspections.html">批量模式下</a>运行代码分析，该范围可以与整个项目一样大。</p></li><li class="list__item" id="1ed4c6fd"><p>如有必要，您可以在特定范围内<a href="running-inspection-by-name.html">应用单个代码检查</a> 。</p></li></ul>                <p id="667fd47f">对于大多数检测到的代码问题，PyCharm提供<a href="resolving-problems.html">快速修复建议</a> 。通过按<kbd data-primary_default="F2" data-primary_default_for_gnome="F2" data-primary_default_for_kde="F2" data-primary_default_for_xwin="F2" data-primary_emacs="F2" data-primary_visual_studio="F2" data-primary_netbeans="F2" data-primary_eclipse="N/A" data-secondary_mac_os_x_10.5_="F2" data-secondary_mac_os_x="F2" data-secondary_eclipse_mac_os_x="⌘." data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="F2" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="F2">F2</kbd> <kbd data-primary_default="Shift+F2" data-primary_default_for_gnome="Shift+F2" data-primary_default_for_kde="Shift+F2" data-primary_default_for_xwin="Shift+F2" data-primary_emacs="Shift+F2" data-primary_visual_studio="Shift+F2" data-primary_netbeans="Shift+F2" data-primary_eclipse="Shift+F1" data-secondary_mac_os_x_10.5_="⇧F2" data-secondary_mac_os_x="⇧F2" data-secondary_eclipse_mac_os_x="⇧⌘." data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⇧F2" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⇧F2">Shift + F2，</kbd>可以快速查看文件中的错误，方法是从一个突出显示的行导航到另一个。</p>                    <p id="0808b061">有关更多信息和过程描述，请参阅<a href="configuring-inspection-severities.html"><span>配置检查严重性</span></a> 。</p>    </div>    <div class="chapter"><h2 id="profiles" data-toc="concepts.codeinspection#profiles">检查概况</h2>        <p id="b342e0f1">当您检查代码时，您可以告诉PyCharm您想要搜索哪些类型的问题并获取报告。这种配置可以保留为<span class="keyword">检查配置文件</span> 。</p>                    <p id="38ae0743">检查配置文件定义了要寻找的问题类型，即<a href="disabling-and-enabling-inspections.html">启用/禁用</a>哪些代码检查以及这些检查的<a href="configuring-inspection-severities.html">严重性</a> 。配置文件可在“ <a href="inspections-settings.html"><span>检查</span></a>设置”页面中进行配置。</p>            <p id="63fe3511">要设置当前检查配置文件（用于在编辑器中进行动态代码分析的配置文件），请在“ <a href="inspections-settings.html"><span>检查</span></a>设置”页面中选择它并应用更改。<a href="running-inspections.html">执行代码分析</a>或<a href="running-inspection-by-name.html">执行单个检查时</a> ，可以指定每次运行使用的配置文件。</p>                <p id="profile_types">检查配置文件可适用于整个IDE或特定项目：</p>        <ul class="list _ul"><li class="list__item" id="5304afa6"><p>                <span class="control">项目配置文件</span>可通过VCS共享和访问团队成员。它们存储在项目目录中： <code class="code">&lt;project&gt;/.idea/inspectionProfiles</code> 。</p></li><li class="list__item" id="48e001bd"><p>                <span class="control">IDE配置文件</span>仅供个人使用，并本地存储在<code class="code">USER_HOME/.&lt;PyCharm version&gt;/config/inspection</code>目录下的XML文件中。</p></li></ul>               <p id="00d7c7ef">PyCharm带有以下预定义的检查配置文件：</p>        <ul class="list _ul"><li class="list__item" id="72a65906"><p><span class="keyword">默认值</span> ：此本地（IDE级别）配置文件供个人使用，适用于所有项目，并存储在本地存储在<code class="code">USER_HOME/.&lt;PyCharm version&gt;/config/inspection</code>目录下的<code class="code">Default.xml</code>文件中。</p></li><li class="list__item" id="bcc17f44"><p><span class="keyword">项目默认值</span> ：创建新项目时，将从<span>模板项目</span>的<span>设置中</span>复制<span class="keyword">项目默认</span>配置文件。此配置文件是共享的，适用于当前项目。<br>创建项目后，对项目默认配置文件的任何修改都将被忽略不计地传递给任何其他项目。<br>在“ <span>模板项目”设置</span>中修改“ <span class="keyword">项目默认”</span>配置文件的<span>设置时</span> ，更改的配置文件将应用于所有新创建的项目，但现有项目不会受到影响，因为它们已拥有此配置文件的副本。<br>项目默认配置文件存储在位于<code class="code">&lt;project&gt;/.idea/inspectionProfiles</code>目录中的<code class="code">Project_Default.xml</code>文件中。</p></li></ul>        <p id="775926be">可以根据需要拥有尽可能多的检查配置文件。有两种创建新配置文件的方法：您可以<a href="customizing-profiles.html#product_home">添加新配置文件</a>作为项目默认配置文件的<a href="customizing-profiles.html#product_home">副本</a>或<a href="customizing-profiles.html#product_home">复制</a>当前选定的配置文件。新创建的配置文件存储在XML文件中，具体取决于<a href="code-inspection.html#profile_types">基本配置文件</a>的<a href="code-inspection.html#profile_types">类型</a> 。</p>        <p id="43882f24">只要完成并应用对配置文件的某些更改，就会显示表示检查配置文件的<code class="code">&lt;profile_name&gt;.xml</code>文件。这些文件仅存储与默认配置文件的差异。</p>        <p id="c6bf24e6">有关详细<a href="customizing-profiles.html"><span>信息</span></a> ，请参阅<a href="customizing-profiles.html"><span>自定义配置文件</span></a>部分。</p>        <div class="chapter"><h3 id="1a289144">在计算机之间同步配置文件</h3>            <p id="ea031662">如果检查配置文件是特定于项目的，则会自动与项目同步。在签出后打开该项目的每个用户都将启用相同的检查配置文件。</p>            <p id="7192ae16">如果使用IDE默认检查配置文件，则可以通过与PyCharm捆绑在一起的<span class="emphasis">Settings Repository插件</span>在多台计算机之间进行同步。这样，文件存储在<code class="code">USER_HOME/.&lt;PyCharm version&gt;/config/inspection/&lt;profile_name&gt;.xml</code> 。</p>            <p id="50770299">请注意，全局配置文件可能具有不同的名称。将当前项目配置文件复制到全局级别（单击“ <span class="control">管理</span> ”按钮并选择“ <span class="control">复制为全局”</span> ）并根据需要调用它。</p>            <p id="0e58c5f1">然后，在主菜单上，选择“ <span class="menupath" data-skip-index="skip">文件”|新项目的设置，</span>并选择此全局配置文件作为所有新项目的默认配置文件。现在，默认情况下，所有新创建的项目都将使用此全局配置文件，并且将通过<span class="emphasis">Settings Repository插件</span>在各种计算机之间同步此全局配置文件。</p>        </div>    </div>    <div class="chapter"><h2 id="severities" data-toc="concepts.codeinspection#severities">检查严重程度</h2>                    <p id="41992b62">检查严重性表示检测到的代码问题对项目的影响程度，并确定如何在编辑器中突出显示检测到的问题。默认情况下，每次检查都具有以下严重性级别之一：</p>            <ul class="list _ul"><li class="list__item" id="b92e5d38"><p><span class="keyword">服务器问题</span> <img alt="服务器问题" title="服务器问题" src="../img/idea/2019.1/server_problem.png" id="636d7d4e" width="14" height="14" class="inline-icon-14"></p></li><li class="list__item" id="7ff62d7e"><p><span class="keyword">错字</span> <img alt="错字" title="错字" src="../img/idea/2019.1/typo.png" id="45c00d1c" width="18" height="16" class="inline-icon-18"></p></li><li class="list__item" id="ecadc114"><p><span class="keyword">没有突出显示，只有修复</span> <img alt="信息" title="信息" src="../img/idea/2019.1/info.png" id="83fc8b99" width="14" height="14" class="inline-icon-14"></p></li><li class="list__item" id="9f27e130"><p><span class="keyword">弱警告</span> <img alt="弱警告" title="弱警告" src="../img/idea/2019.1/weak_warning.png" id="092e914b" width="14" height="14" class="inline-icon-14"></p></li><li class="list__item" id="0f4a042c"><p><span class="keyword">警告</span> <img alt="警告" title="警告" src="../img/idea/2019.1/warning.png" id="f09c94e3" width="14" height="14" class="inline-icon-14"></p></li><li class="list__item" id="372000a4"><p><span class="keyword">错误</span> <img alt="错误" title="错误" src="../img/idea/2019.1/error.png" id="55948d63" width="14" height="14" class="inline-icon-14"></p></li></ul>            <p id="1a0a06cd">您可以增加或减少每次检查的严重性级别。例如，您可以强制PyCharm显示一些警告，如错误或弱警告。以类似的方式，最初被认为是弱警告的内容可以显示为警告，错误或仅作为参考信息。</p>            <p id="23eaf259">您还可以配置用于突出显示每个严重性级别的颜色和字体样式。此外，您可以创建自定义严重性级别并将其设置为特定检查。</p>            <p id="dd56ef43">如有必要，您可以为<a href="configuring-inspection-for-different-scopes.html">不同范围内</a>的相同检查设置不同的严重性级别。</p>            <p id="065c352a">上述检查的所有修改都保存在<a href="inspection-settings.html">检查设置中</a>当前选择的<a href="code-inspection.html#profiles">检查配置文件</a>中，并在使用此配置文件时应用。</p>            </div>    <div class="chapter"><h2 id="scopes" data-toc="concepts.codeinspection#scopes">检查范围</h2>                    <p id="8922009e">默认情况下，所有启用的代码检查都适用于所有项目文件。如有必要，您可以为不同的<a href="scope.html">范围</a>单独配置每个代码检查（ <a href="disabling-and-enabling-inspections.html">启用或禁用</a> ， <a href="configuring-inspection-severities.html">更改其严重性级别</a>和选项）。与任何其他检查设置一样，此类配置将作为特定<a href="code-inspection.html#profiles">配置文件的</a>一部分进行保存和应用。</p>            <p id="47e77385">当检查具有与不同范围相关联的不同配置时，可能存在复杂的情况。当在属于某些或所有这些范围的文件中执行此类检查时，将应用优先级最高的范围特定配置的设置。优先级由<a href="inspection-settings.html">检查设置</a>中<a href="inspection-settings.html">检查</a>范围特定配置的相对位置定义：最高配置具有最高优先级。<span class="control">Everywhere else</span>配置始终具有最低优先级。</p>                                    <p id="80a88056">有关更多信息和过程描述，请参阅<a href="configuring-inspection-for-different-scopes.html"><span>配置不同范围的检查</span></a> 。</p>    </div>    <div class="chapter"><h2 id="examples" data-toc="concepts.codeinspection#examples">代码检查的示例</h2>        <p id="ee98c4be">要查看可用检查列表，请打开<span class="control">“设置”|首选项</span> （ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌥F7" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）并导航至<span class="menupath" data-skip-index="skip">编辑器|检查</span> 。</p>                                                <aside class="tip sideblock" rel="ee98c4be" id="d3eec51f" data-title=""><p id="1e56aa20">有关nilness的更多信息，请参阅有关<a href="https://blog.jetbrains.com/go/2019/03/22/nilness-analyzer-inspection/" data-bypass="yes" target="_blank"><span>nilness分析器</span></a>的JetBrains博客文章。</p></aside>                <p id="8a8c920b">在“ <a href="inspections-settings.html"><span>检查”</span></a>页面中，所有检查都按类别分组。代码分析涵盖的最常见任务是：</p>        <ul class="list _ul"><li class="list__item" id="035195e1"><p>找到死代码。</p></li><li class="list__item" id="ae9912f3"><p>检测性能问题。</p></li><li class="list__item" id="811e1013"><p>改善代码结构和可维护性。</p></li><li class="list__item" id="c5d4575e"><p>符合编码指南和标准。</p></li><li class="list__item" id="42b287d6"><p>符合规格。</p></li></ul>                     <div class="chapter"><h3 id="a05d522e">找到死代码</h3>                <p id="ec40d2fe">PyCharm在编辑器中突出了所谓的<i id="bd5b8d8b">死</i>代码。这是在应用程序运行时期间从不执行的代码。也许，您甚至不需要在项目中使用这部分代码。根据情况，此类代码可能被视为错误或冗余。无论如何，它会降低应用程序性能并使维护过程复杂化。这是一个例子。</p><figure><img alt="py死码" title="py死码" src="../img/idea/2019.1/py_deadcode.png" id="212934f7" width="475" height="686"></figure>                                            </div>            <div class="chapter"><h3 id="unuseddeclarationinspection">突出显示未使用的声明</h3>                                                    <p id="4e0d7c8f">PyCharm还能够通过<span class="control">未使用的声明</span>检查立即突出显示未使用的局部变量。默认情况下，PyCharm会忽略以下内容突出显示所有未使用的局部变量：</p>                    <ul class="list _bullet"><li class="list__item" id="3cb42e41"><p>元组拆包中使用的变量</p></li><li class="list__item" id="e3c84695"><p>Lambda参数</p></li><li class="list__item" id="acfe2fce"><p>范围迭代变量</p></li></ul>                    <p id="f11a3e26">如果要通知任何这些类型，请打开<span class="control">编辑器|</span>在项目<span class="control">设置/首选项中</span> <span class="control">检查</span> ，在<span class="control">Python</span>节点下选择<span class="control">未使用的本地</span> ，并取消选择<span class="control">选项中</span>的相应复选框。以下示例说明了元组解包中未使用变量的代码检查警告。</p>                        <figure><img alt="py未使用的本地元组拆包" title="py未使用的本地元组拆包" src="../img/idea/2019.1/py_unused_local_tuple_unpacking.png" id="74c5b487" width="438" height="212"></figure>                            </div>                        <div class="chapter"><h3 id="438d2c13">未解决的参考文献</h3>                <p id="11e03137">此检查可以检测未解析的参考，并使用红色曲线突出显示它们。PyCharm意图操作建议快速修复源代码中未解析的引用。有关详细信息，请参阅<a href="resolving-references.html"><span>解析参考</span></a> 。</p>            </div>                    <div class="chapter"><h3 id="49fdb01d">Python检查示例</h3>                <p id="15d6783d">在“设置”对话框的“ <a href="inspections-settings.html"><span>检查”</span></a>页面中查找各种代码检查的说明和示例。在本节中，我们将考虑几个最突出的例子。特别是，PyCharm报道</p>                <ul class="list _ul"><li class="list__item" id="compatibility">代码与当前的Python解释器版本不兼容：<figure><img alt="py版本兼容性" title="py版本兼容性" src="../img/idea/2019.1/py_version_compatibility.png" id="d807b88e" width="498" height="75"></figure>                        <p id="462b3a8c">请注意，您可以在<a href="inspections-settings.html">检查设置中</a>更改版本范围。</p>                    </li><li class="list__item" id="7c35ea0b"><p>未解决的参考文献：</p><figure><img alt="py未解决" title="py未解决" src="../img/idea/2019.1/py_unresolved.png" id="f125a5c4" width="316" height="48"></figure>                                                                    </li><li class="list__item" id="a08544f3"><p>字典中的重复键：</p><figure><img alt="py重复键" title="py重复键" src="../img/idea/2019.1/py_duplicate_keys.png" id="2912cefa" width="348" height="78"></figure>                    </li><li class="list__item" id="72d1ff65"><p>死代码：</p><figure><img alt="py死码" title="py死码" src="../img/idea/2019.1/py_deadcode.png" id="f32b7592" width="475" height="686"></figure>                                                                    </li><li class="list__item" id="9bea91d1"><p>未使用的变量：</p><figure><img alt="rm未使用的局部变量" title="rm未使用的局部变量" src="../img/idea/2019.1/rm_unused_local_var.png" id="3b10eaa1" width="568" height="121"></figure>                        <figure><img alt="cl未使用" title="cl未使用" src="../img/idea/2019.1/cl_unused.png" id="daa8b7c7" width="475" height="433"></figure>                    </li></ul>            </div>            </div>            <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="analyzing-external-stacktraces.html">分析外部堆栈跟踪</a> <a class="navigation-links__next" href="inspection-settings.html">访问检查设置</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>也可以看看</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>程序：</h3><ul class="list"><li class="list__item"><a href="intention-actions.html"><span>意图行动</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>参考：</h3><ul class="list"><li class="list__item"><a href="inspections-settings.html"><span>检查</span></a></li><li class="list__item"><a href="settings-scopes.html"><span>领域</span></a></li><li class="list__item"><a href="inspection-results-tool-window.html"><span>检验结果工具窗口</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>外部链接：</h3><ul class="list"><li class="list__item"><a href="http://blogs.jetbrains.com/idea/2012/08/check-lambda-support-in-intellij-idea-12-eap-build-122202/" data-bypass="yes" target="_blank"><span>检查IntelliJ IDEA 12 EAP中的lambda支持</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="edit-project-history.html"></link><meta charset="UTF-8"></meta><title>编辑项目历史记录 - 帮助| IntelliJ IDEA</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Edit_project_history"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="edit-project-history.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Edit_project_history.xml" data-toc="Edit_project_history">编辑项目历史记录</h1>    <aside class="warning " rel="Edit_project_history.xml" id="b6bf4d3f" data-title="">        <p id="b64678b8">除非绝对必要，否则请避免修改具有多个贡献者的远程分支的历史记录，例如，如果您不小心推送了一些敏感数据。</p>    </aside>    <p id="force_push_warning">Git允许您编辑项目历史记录。当您正在处理功能分支并想要将其清理并在与其他人<a href="apply-changes-from-one-branch-to-another.html">共享</a>之前使其看起来像您想要的方式时，这非常有用。例如，您可以编辑提交消息，将与相同功能相关的较小提交压缩在一起，或者将包含无关更改的提交拆分为单独的提交，将更改添加到先前的提交，依此类推。</p>    <aside class="note " rel="force_push_warning" id="d3de92f2" data-title="">        <p id="4e5cf13a">如果您修改了其历史记录的分支位于远程存储库中，则会拒绝推送此类修改以防止数据丢失，因此您必须<a href="commit-and-push-changes.html#force-push">强制推送</a>更改。</p><p id="060b4a05">您无法修改不允许使用<code class="code">push --force</code> <span class="keyword">受保护</span>分支的历史记录（在“ <span class="control">版本控制”|“Git”</span>下的<span class="control">“设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）中配置受保护的分支）。</p>            </aside>    <div class="chapter"><h2 id="reword-commit" data-toc="Edit_project_history#reword-commit">编辑提交消息</h2>        <p id="edit-commit-message">如果您需要更改的唯一内容是提交消息，则可以在推送此提交之前对其进行编辑。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="daecc3cf"><p>在“ <span class="control">日志”</span>视图中右键单击要编辑其消息的提交， <span class="control">然后</span>从上下文菜单中选择“重<span class="control">定位</span> ”，或按<kbd data-primary_default="F2" data-primary_default_for_gnome="F2" data-primary_default_for_kde="F2" data-primary_default_for_xwin="F2" data-primary_emacs="F2" data-primary_jbuilder="F2" data-primary_visual_studio="F2" data-primary_netbeans="F2" data-primary_eclipse="F2" data-secondary_mac_os_x_10.5_="F2" data-secondary_mac_os_x="F2" data-secondary_eclipse_mac_os_x="F2" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="F2">F2</kbd> 。</p></li><li class="list__item" id="eb831b7f"><p>在打开的对话框中，输入新的提交消息，然后单击“ <span class="control">确定”</span> 。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="amend-commit" data-toc="Edit_project_history#amend-commit">修改先前的提交</h2>        <p id="fa68d4a2">有时您可能过早地提交并忘记添加一些文件，或者在上次提交时注意到您要修复的错误，而不创建单独的提交。</p>        <p id="59db77b0">您可以使用<span class="control">Amend commit</span>选项将上次<span class="emphasis">更改</span>附加到上一次提交。因此，您最终只能使用一个提交而不是两个不同的提交。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="28b5cac1"><p>在“ <span class="control">本地更改”</span>视图中选择要添加到上一个提交的<span class="control">更改</span> ，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.commit.svg@2x.png" width="16" alt="提交按钮">在工具栏上或按<kbd data-primary_default="Ctrl+K" data-primary_default_for_gnome="Ctrl+K" data-primary_default_for_kde="Ctrl+K" data-primary_default_for_xwin="Ctrl+K" data-primary_emacs="Ctrl+K" data-primary_jbuilder="Ctrl+K" data-primary_visual_studio="Ctrl+K" data-primary_netbeans="N/A" data-primary_eclipse="N/A" data-secondary_mac_os_x_10.5_="⌘K" data-secondary_mac_os_x="⌘K" data-secondary_eclipse_mac_os_x="N/A" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃K">Ctrl + K.</kbd></p></li><li class="list__item" id="2db7816a"><p>在“ <span class="control">提交更改”</span>对话框中，在<span class="control">提交更改</span>之前，在右侧选择“ <span class="control">修改提交”</span>选项。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="f04a958d" data-toc="Edit_project_history#f04a958d">修改任何先前的提交</h2>        <p id="c14f118f">如果您需要将更改添加到任何先前的提交而不是单独提交它们，则可以使用<code class="code">fixup</code>或<code class="code">squash</code>操作来执行此操作。这两个命令都会对所选提交附加<span class="emphasis">阶段性更改</span> ，但处理提交消息的方式不同：</p><ul class="list _bullet"><li class="list__item" id="5e41ff38"><p>                    <code class="code">squash</code>将新的提交消息添加到原始提交</p></li><li class="list__item" id="d34dcbf6"><p>                    <code class="code">fixup</code>丢弃新的提交消息，只保留原始提交的消息</p></li></ul>                <aside class="note " rel="c14f118f" id="76c3dc7d" data-title="">            <p id="5aa69286">这两个命令都需要<a href="apply-changes-from-one-branch-to-another.html#rebase-branch">rebase，</a>因为它们会更改提交哈希值。</p>        </aside>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="6250dcc9"><p>进行要附加到任何早期提交的更改（它们将显示在“ <span class="control">本地更改”</span>视图中）。</p></li><li class="list__item" id="ad0601e8"><p>在“ <span class="control">日志”</span>视图中，右键单击要使用本地更改修改的提交，然后从上下文菜单中选择“ <span class="control">Fixup”</span>或“ <span class="control">Squash Into</span> ”。</p></li><li class="list__item" id="f5f476e5"><p>如果您选择压缩更改，则在必要时修改提交消息。</p></li><li class="list__item" id="afa79555"><p>单击<span class="control">Commit</span>按钮上的箭头，然后选择<span class="control">Commit and Rebase</span> 。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="interactive-rebase" data-toc="Edit_project_history#interactive-rebase">通过执行交互式rebase编辑项目历史记录</h2>        <p id="lose_history">Git允许您编辑项目历史记录，以便通过执行<span class="keyword">交互式rebase</span>使其变得线性和有意义。这允许您在<a href="apply-changes-from-one-branch-to-another.html">将</a>更改从<a href="work-on-several-features-simultaneously.html#feature-branches">功能分支</a> <a href="apply-changes-from-one-branch-to-another.html">集成</a>到另一个分支之前，通过更改单个提交，更改其顺序，将提交压缩为一个，跳过包含无关更改的提交等来清理提交历史记录。</p>            <section class="procedure-steps"><h2 id="493a26dc">编辑当前分支的历史记录</h2><p id="ad56bb84">IntelliJ IDEA允许您在将更改应用于其他分支之前编辑当前分支中的一系列最近提交。</p><ol class="list _decimal"><li class="list__item" id="26807923">                    <p id="f8042d31">在“ <span class="control">版本控制”</span>工具窗口的“ <span class="control">日志”</span>选项卡中，选择要编辑的一系列提交中最早的提交，右键单击它并<span class="control">从此处</span>选择“ <span class="control">交互式重新生成”</span> 。</p>                    <p id="start_interactive_rebase_from_here">将显示<span class="control">Interactive Rebase</span>对话框，其中包含在所选提交之后在当前分支中进行的所有提交的列表。</p>                </li><li class="list__item" id="e1621308"><p>如果您需要更改应用提交的顺序，请使用<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.arrowUp.svg@2x.png" width="16" alt="向上箭头">和<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.arrowDown.svg@2x.png" width="16" alt="向下箭头">纽扣。</p></li><li class="list__item" id="ab48b36e">            <p id="d14b4647">使用“ <span class="control">操作”</span>列表将以下操作应用于提交（可以使用<kbd data-bypass="true">Alt +向上/向下</kbd>选择操作）：</p>            <ul class="list _bullet"><li class="list__item" id="beca9e1a"><p>                    <span class="control">选择</span> ：按原样应用所选提交。</p></li><li class="list__item" id="aa9d2412"><p>                    <span class="control">编辑</span> ：选择在应用之前编辑受此提交影响的文件。</p></li><li class="list__item" id="aa3cc561"><p>                    <span class="control">跳过</span> ：忽略所选的提交，因此不会应用这些更改。</p></li><li class="list__item" id="85706426"><p>                    <span class="control">壁球</span> ：选择将所选提交与前一个提交相结合。两个提交的提交消息将合并，因此此操作将反映在分支历史记录中。如有必要，更改提交顺序，以便要添加更改的提交是列表中的前一个提交。</p></li><li class="list__item" id="02f57c16"><p>                    <span class="control">Reword</span> ：选择此选项可在应用之前编辑提交消息。</p></li><li class="list__item" id="23065ef5"><p>                    <span class="control">修复</span> ：选择此选项可将选定的提交与前一个提交相结合。修复提交的提交消息将被丢弃，因此此更改将在分支历史记录中不可见。如有必要，更改提交顺序，以便要添加更改的提交是列表中的上一个。</p></li></ul>        </li></ol></section>            <section class="procedure-steps"><h2 id="98388765">编辑分支历史记录并将其集成到另一个分支中</h2><p id="b4f19e5a">IntelliJ IDEA允许您在应用更改之前，在另一个分支的顶部重新<a href="apply-changes-from-one-branch-to-another.html#rebase-branch">绑定</a>分支并编辑源分支历史记录。</p><ol class="list _decimal"><li class="list__item" id="eb125ef3"><p>从主菜单中选择<span class="control">VCS | Git | Rebase</span> 。</p></li><li class="list__item" id="ebcc8d9f"><p>在“ <span class="control">分支”</span>字段中选择要重新绑定的<span class="control">分支</span> ，在“ <span class="control">Onto”</span>字段中选择目标分支。</p></li><li class="list__item" id="6214d630"><p>在“ <span class="control">发件人”</span>字段中，选择要从中将所选分支应用于新基础的提交。</p></li><li class="list__item" id="59155653">                    <p id="e38e2869">确保<span class="control">互动</span>选项被选中，并单击<span class="control">再次基于</span> 。</p>                    <p id="bd9ab609">将显示<span class="control">Interactive Rebase</span>对话框，其中包含在所选提交之后在当前分支中进行的所有提交的列表。</p>                </li><li class="list__item" id="91747017"><p>如果您需要更改应用提交的顺序，请使用<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.arrowUp.svg@2x.png" width="16" alt="向上箭头">和<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.arrowDown.svg@2x.png" width="16" alt="向下箭头">纽扣。</p></li><li class="list__item" id="c528ebd8">            <p id="20c64503">使用“ <span class="control">操作”</span>列表将以下操作应用于提交（可以使用<kbd data-bypass="true">Alt +向上/向下</kbd>选择操作）：</p>            <ul class="list _bullet"><li class="list__item" id="c7682fea"><p>                    <span class="control">选择</span> ：按原样应用所选提交。</p></li><li class="list__item" id="91be488f"><p>                    <span class="control">编辑</span> ：选择在应用之前编辑受此提交影响的文件。</p></li><li class="list__item" id="04bba035"><p>                    <span class="control">跳过</span> ：忽略所选的提交，因此不会应用这些更改。</p></li><li class="list__item" id="22fe52ec"><p>                    <span class="control">壁球</span> ：选择将所选提交与前一个提交相结合。两个提交的提交消息将合并，因此此操作将反映在分支历史记录中。如有必要，更改提交顺序，以便要添加更改的提交是列表中的前一个提交。</p></li><li class="list__item" id="14dd1069"><p>                    <span class="control">Reword</span> ：选择此选项可在应用之前编辑提交消息。</p></li><li class="list__item" id="4df871e0"><p>                    <span class="control">修复</span> ：选择此选项可将选定的提交与前一个提交相结合。修复提交的提交消息将被丢弃，因此此更改将在分支历史记录中不可见。如有必要，更改提交顺序，以便要添加更改的提交是列表中的上一个。</p></li></ul>        </li></ol></section>    </div><div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="use-tags-to-mark-specific-commits.html">使用标记来标记特定提交</a> <a class="navigation-links__next" href="github.html">GitHub</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
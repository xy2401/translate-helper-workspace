<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="template-data-languages.html"></link><meta charset="UTF-8"></meta><title>模板语言：Velocity和FreeMarker  - 帮助| IntelliJ IDEA</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Template_Data_Languages"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="template-data-languages.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Template_Data_Languages.xml" data-toc="Template_Data_Languages">模板语言：Velocity和FreeMarker</h1>         <aside class="warning " rel="Template_Data_Languages.xml" id="dcafc28e" data-title=""><p>此功能仅在<b id="6628f60a" origin="intellij-platform">Ultimate</b>版本中受支持。</p></aside>    <p id="12f13751">IntelliJ IDEA允许您使用<a href="https://velocity.apache.org" data-bypass="yes" target="_blank"><span>Velocity</span></a>和<a href="http://freemarker.org/" data-bypass="yes" target="_blank"><span>FreeMarker</span></a>模板语言（VTL和FTL）开发模板。使用相应的<a href="managing-plugins.html">插件</a>提供编码辅助和语法突出显示，默认情况下启用这些<a href="managing-plugins.html">插件</a> 。</p>    <figure><img alt="模板语言指令完成" title="模板语言指令完成" src="../img/idea/2019.1/velocity_code_completion_1.png" id="f2bebc09" width="501" height="171"></figure>    <figure><img alt="模板语言变量完成" title="模板语言变量完成" src="../img/idea/2019.1/velocity_code_completion_2.png" id="8c750e31" width="501" height="176"></figure>    <p id="34f74545">默认情况下支持以下文件类型：</p>    <div class="table-wrapper"><table class="no_header                  _layout-fixed" width="300" id="7bbe966a"><tbody><tr id="fa688d30" class="ijRowOdd"><td id="dfe7b43b" width="100"><p>VTL</p></td><td id="334d2bf4" width="200"><p><code class="code">.ft</code> ， <code class="code">.vm</code> ， <code class="code">.vsl</code></p></td></tr><tr id="5e2be4d4" class="ijRowEven"><td id="0e15edd2"><p>FTL</p></td><td id="4753a167"><p><code class="code">.ftl</code> ， <code class="code">.ftlh</code> ， <code class="code">.ftlx</code></p></td></tr></tbody></table></div>    <p id="template_data_language">要为编写模板静态部分的语言（称为<i id="2150811a">模板数据语言</i> ）启用编码帮助，请执行以下操作之一：</p>    <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h2 id="associate-tdl">将模板数据语言与项目中的文件和文件夹相关联</h2></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="f8fc1a00"><p>            <a href="configuring-project-and-ide-settings.html#access-project-settings">打开“设置/首选项”对话框</a> （ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ），单击“ <span class="control">语言和框架”</span> ，然后单击“ <span class="control">模板数据语言”</span> 。</p></li><li class="list__item" id="dcb9d3c3"><p>单击项目右侧的模板数据语言单元格或相应的目录或文件，然后选择语言。</p></li><li class="list__item" id="cd112f57"><p>单击“ <span class="control">确定”</span>以应用更改。</p></li></ol><p id="ba168b7c">可以使用“将<span class="control">模板数据语言更改为</span>上下文菜单”命令，直接在编辑器中为各个模板文件分配模板数据语言。</p></div></div></section>    <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h2 id="create-extension">为相应的文件类型添加扩展模式</h2></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="6da1cc2e"><p>            <a href="configuring-project-and-ide-settings.html#access-project-settings">打开“设置/首选项”对话框</a> （ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ），单击“ <span class="control">编辑器”</span> ，然后单击“ <span class="control">文件类型”</span> 。</p></li><li class="list__item" id="f69cbb3d"><p>在“已<span class="control">识别的文件类型”下</span> ，选择“ <span class="control">FreeMarker模板”</span>或“ <span class="control">速度模板”</span> 。</p></li><li class="list__item" id="653e138a"><p>在已<span class="control">注册的模式下</span> ，单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="图标一般添加svg"> 。</p></li><li class="list__item" id="ddcf2ff8"><p>在“ <span class="control">添加通配符”</span>对话框中，指定文件扩展名模式，选择一种语言，然后单击“ <span class="control">确定”</span> 。</p><figure><img alt="velocity_add_pattern" title="velocity_add_pattern" src="../img/idea/2019.1/velocity_add_pattern.png" id="57fe1267" width="735" height="306"></figure>        </li><li class="list__item" id="07ac5070"><p>单击“ <span class="control">确定”</span>以应用更改。</p></li></ol></div></div></section>    <div class="chapter"><h2 id="555f65c6">修复未解决的引用</h2>        <p id="169ea69c">IntelliJ IDEA提供<a href="code-inspection.html">检测</a>以检测模板语言中未解析的引用：</p>        <figure><img alt="未解析引用的模板语言检查示例" title="未解析引用的模板语言检查示例" src="../img/idea/2019.1/velocity_inspection.png" id="f8c67ae6" width="501" height="147"></figure>        <p id="fix-unresolved-references">可以使用<a href="intention-actions.html">意图动作</a>修复未解析的引用。您可以选择在同一文件中添加注释，也可以创建带注释的单独文件。有关更多信息，请参阅<a href="template-data-languages.html#special-comments">特殊注释</a> 。</p>        <figure><img alt="用于修复未解析的引用的示例模板语言意图" title="用于修复未解析的引用的示例模板语言意图" src="../img/idea/2019.1/velocity_intention.png" id="aea86468" width="501" height="171"></figure>        <aside class="note " rel="fix-unresolved-references" id="3f093d34" data-title=""><p>这种情况下的注释用于提供有关引用的缺失信息。</p></aside>        <p id="velocity">在后一种情况下，创建具有默认名称<code class="code">velocity_implicit.vm</code>或<code class="code">freemarker_implicit.ftl</code>的文件。此文件以以下注释开头：</p>        <div class="code-block" data-lang="Java"><code class="code-block__wrapper">＃* @implicitly包括*＃</code></div>        <p id="cb808af3">注释文件中提供了用于定义引用类型的代码完成。</p>        <figure><img alt="速度意图1" title="速度意图1" src="../img/idea/2019.1/velocity_intention_1.png" id="31d88759" width="501" height="168"></figure>        <p id="1b39314d">如果重命名文件或将其移动到源根目录中的其他位置，则引用定义不会丢失。</p>    </div>        <div class="chapter"><h2 id="special-comments">特别评论</h2>        <p id="e75fa585">IntelliJ IDEA为使用模板语言提供以下特殊注释：</p>        <div class="tabs" id="8fea057d"><div class="tabs__content" id="80969921" data-title="FreeMarker">                <p id="1ca285aa">FreeMarker注释使用<code class="code">&lt;#--</code>和<code class="code">--&gt;</code>或<code class="code">[#--</code> and <code class="code">--#]</code>分隔。</p>                <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="3ef06a46"><thead><tr id="94cbc54f" class="ijRowHead"><th id="cb8037df" width="200"><p>评论</p></th><th id="b76caab5"><p>描述</p></th></tr></thead><tbody><tr id="a6b426eb" class="ijRowOdd"><td id="5d418083"><code class="code">@implicitly包括在内</code></td><td id="d303124b"><p>以此注释开头的任何FreeMarker文件都包含在同一模块或其依赖项中的所有文件中。使用这样的专用注释文件来定义特定于IDE的注释，以便它们不会污染您的模板文件。</p></td></tr><tr id="043ce474" class="ijRowEven"><td id="66528b96"><code class="code">@ftlvariable</code></td><td id="17012130"><p>定义变量。例如，以下注释声明了一个名为<code class="code">foo</code>的<code class="code">String</code>类型的变量，仅在指定的文件中可见：</p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="o">&lt;</span> <span class="err">＃</span> <span class="o">-</span> <span class="nd">@ftlvariable</span> <span class="n">name</span> <span class="o">=</span> <span class="s">“foo”</span> <span class="n">type</span> <span class="o">=</span> <span class="s">“java.lang。字符串“</span> <span class="n">file</span> <span class="o">=</span> <span class="s">”path / to / file“</span> <span class="o">- &gt;</span></code></div>要在这种情况下正确解析<code class="code">String</code> ，模块应附加JDK。支持原始类型和泛型类型。<code class="code">file</code>参数是可选的。</td></tr><tr id="d2c41226" class="ijRowOdd"><td id="c6255e0e"><code class="code">@ftlroot</code></td><td id="b7b7d2f8"><p>定义相对于解析<code class="code">import</code>和<code class="code">include</code>指令的路径。该路径是相对于当前FTL文件包中的任何目录指定的。还支持JAR内的路径，例如：</p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="o">&lt;</span> <span class="err">＃</span> <span class="o">-</span> <span class="nd">@ftlroot</span> <span class="s">“path / to.jar！/ path / inside / jar“</span> <span class="o">- &gt;</span></code></div>                        </td></tr></tbody></table></div>            </div><div class="tabs__content" id="3d4e4cd0" data-title="Velocity">                <p id="936612c4">Velocity注释使用<code class="code">#*</code>和<code class="code">*#</code>分隔。</p>                <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="d1223e35"><thead><tr id="9156b4ad" class="ijRowHead"><th id="4a5723e4" width="200"><p>评论</p></th><th id="3488e211"><p>描述</p></th></tr></thead><tbody><tr id="1a9e5c0b" class="ijRowOdd"><td id="8ac5b465"><code class="code">@implicitly包括在内</code></td><td id="65cfff0b"><p>以此注释开头的任何Velocity文件都包含在同一模块中的所有文件中。使用这样的专用注释文件来定义特定于IDE的注释，以便它们不会污染您的模板文件。</p></td></tr><tr id="dbef683e" class="ijRowEven"><td id="44713678"><code class="code">@vtlvariable</code></td><td id="9a19591c"><p>定义变量。例如，以下注释声明了一个名为<code class="code">foo</code>的<code class="code">String</code>类型的变量，仅在指定的文件中可见：</p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="err">＃</span> <span class="o">*</span> <span class="nd">@vtlvariable</span> <span class="n">name</span> <span class="o">=</span> <span class="s">“foo”</span> <span class="n">type</span> <span class="o">=</span> <span class="s">“java.lang。字符串“</span> <span class="n">file</span> <span class="o">=</span> <span class="s">”path / to / file“</span> <span class="o">*</span> <span class="err">＃</span></code></div>要在这种情况下正确解析<code class="code">String</code> ，模块应附加JDK。支持原始类型和泛型类型。<code class="code">file</code>参数是可选的。</td></tr><tr id="784e161b" class="ijRowOdd"><td id="975be6cb"><code class="code">@vtlmacrolibrary</code></td><td id="41515517"><p>使用与此注释相关的文件定义具有模板宏的文件。例如，下面的评论使得宏从<code class="code">lib.vm</code>访问到代码洞察<code class="code">file.vm</code> ：</p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="err">＃</span> <span class="o">*</span> <span class="nd">@vtlmacrolibrary</span> <span class="n">path</span> <span class="o">=</span> <span class="s">“lib.vm”</span> <span class="n">file</span> <span class="o">=</span> <span class="s">“file.vm”</span> <span class="o">*</span> <span class="err">＃</span></code></div>                        </td></tr><tr id="b2e34703" class="ijRowEven"><td id="7281df8e"><code class="code">@velocityproperties</code></td><td id="58001b71"><p>使用此注释定义<span class="filepath">velocity.properties</span>文件和相对于文件的运行时根目录。例如：</p><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="err">＃</span> <span class="o">*</span> <span class="nd">@velocityproperties</span> <span class="n">path</span> <span class="o">=</span> <span class="err">“</span> <span class="n">path</span> <span class="o">/</span> <span class="n">to</span> <span class="o">/</span> <span class="n">velocity</span> <span class="o">。</span> <span class="na">属性</span> <span class="err">“</span> <span class="n">runtime_root</span> <span class="o">=</span> <span class="err">”</span> <span class="n">path</span> <span class="o">/</span> <span class="n">to</span> <span class="o">/</span> <span class="n">runtime</span> <span class="o">/</span> <span class="n">root</span> <span class="o">/</span> <span class="n">dir</span> <span class="err">“</span> <span class="o">*</span> <span class="err">＃</span></code></div>                        </td></tr></tbody></table></div>            </div></div>    </div><div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="tapestry-view.html">Tapestry View</a> <a class="navigation-links__next" href="testing-frameworks.html">测试框架</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
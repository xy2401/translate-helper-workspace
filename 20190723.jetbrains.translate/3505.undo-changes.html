<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="undo-changes.html"></link><meta charset="UTF-8"></meta><title>撤消更改 - 帮助| WebStorm</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Undo_changes"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索WebStorm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="undo-changes.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>WebStorm 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="true"><h1 id="Undo_changes.xml" data-toc="Undo_changes">取消更改</h1>        <div class="chapter"><h2 id="revert-local-changes" data-toc="Undo_changes#revert-local-changes">还原未提交的更改</h2>        <p id="02c812bf">在提交之前，您始终可以撤消在本地完成的更改：</p>        <ol class="list _decimal"><li class="list__item" id="49deeb70"><p>打开“ <span class="control">版本控制”</span>工具窗口（ <kbd data-primary_default="Alt+9" data-primary_default_for_gnome="Alt+9" data-primary_default_for_kde="Alt+9" data-primary_default_for_xwin="Alt+9" data-primary_emacs="Alt+9" data-primary_visual_studio="Alt+9" data-primary_eclipse="Alt+9" data-secondary_mac_os_x_10.5_="⌘9" data-secondary_mac_os_x="⌘9" data-secondary_eclipse_mac_os_x="⌘9">Alt + 9</kbd> ）并切换到“ <span class="control">本地更改”</span>选项卡。</p></li><li class="list__item" id="e788859a"><p>在活动更改列表中，选择要还原的一个或多个文件，然后从上下文菜单中选择“ <span class="control">还原</span> ”，或按<kbd data-primary_default="Ctrl+Alt+Z" data-primary_default_for_gnome="Ctrl+Alt+Z" data-primary_default_for_kde="Ctrl+Alt+Z" data-primary_default_for_xwin="Ctrl+Alt+Z" data-primary_emacs="Ctrl+Alt+Z" data-primary_visual_studio="Ctrl+Alt+Z" data-primary_eclipse="Ctrl+Alt+Z" data-secondary_mac_os_x_10.5_="⌥⌘Z" data-secondary_mac_os_x="⌥⌘Z" data-secondary_eclipse_mac_os_x="⌃⌥⇧Z">Ctrl + Alt + Z.</kbd>自上次提交以来对所选文件所做的所有更改都将被撤消，并且它们将从“ <span class="control">本地更改”</span>视图中消失。</p></li></ol>    </div>    <div class="chapter"><h2 id="revert-last-commit" data-toc="Undo_changes#revert-last-commit">撤消上次提交</h2>        <p id="undo_protected_branch">WebStorm允许您撤消当前分支中的最后一次提交（即HEAD）：</p>        <ol class="list _decimal"><li class="list__item" id="a4e75791"><p>打开“ <span class="control">版本控制”</span>工具窗口（ <kbd data-primary_default="Alt+9" data-primary_default_for_gnome="Alt+9" data-primary_default_for_kde="Alt+9" data-primary_default_for_xwin="Alt+9" data-primary_emacs="Alt+9" data-primary_visual_studio="Alt+9" data-primary_eclipse="Alt+9" data-secondary_mac_os_x_10.5_="⌘9" data-secondary_mac_os_x="⌘9" data-secondary_eclipse_mac_os_x="⌘9">Alt + 9</kbd> ）并切换到“ <span class="control">日志”</span>选项卡。</p></li><li class="list__item" id="19eb7a6b"><p>选择当前分支中的最后一个提交，然后从上下文菜单中选择“ <span class="control">撤消提交</span> ”。</p></li><li class="list__item" id="193fe725"><p>在打开的对话框中，选择一个更改列表，其中将移动要放弃的更改。您可以从“ <span class="control">名称”</span>下拉列表中选择现有的更改列表，也可以指定新更改列表的名称（默认情况下使用提交消息）。</p></li><li class="list__item" id="4db71939"><p>如果要使用要放弃活动更改列表的更改来创建更改列表，请选择“ <span class="control">设置活动”</span>选项。</p></li><li class="list__item" id="3ac67c6a"><p>如果希望WebStorm记住您的上下文并在此更改列表变为活动状态时在编辑器中重新加载当前打开的文件，请选择“ <span class="control">跟踪上下文”</span>选项。</p></li></ol>        <aside class="note " rel="undo_protected_branch" id="bd8defbe" data-title="">            <p id="bc4d3173">如果将提交推送到受保护的分支，即不允许使用<a href="commit-and-push-changes.html#force-push">force --push的</a>分支（在<span class="control">Version Control | Git</span>下的<span class="control">Settings / Preferences</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘,">Ctrl + Alt + S</kbd> ）中配置受保护的分支），则无法撤消提交。</p>        </aside>    </div>    <div class="chapter"><h2 id="revert-commit" data-toc="Undo_changes#revert-commit">还原推送的提交</h2>        <p id="3395abcf">如果您发现已推送的特定提交中存在错误，则可以还原该提交。此操作将导致新提交，该提交会反转您要撤消的提交的效果。因此，保留项目历史记录，因为原始提交保持不变。</p>        <ol class="list _decimal"><li class="list__item" id="7065bd7e"><p>在“ <span class="control">日志”</span>视图中找到要还原的提交，右键单击它，然后从上下文菜单中选择“ <span class="control">还原</span> ”。“ <span class="control">提交更改”</span>对话框将打开，并显示自动生成的提交消息。</p></li><li class="list__item" id="67cc9301"><p>如果所选提交包含多个文件，并且您只需要还原其中一些文件，请取消选择您不想触摸的文件。</p></li><li class="list__item" id="e8cf6a9e"><p>单击“ <span class="control">提交”</span>以提交一个更改集，该更改集将更改还原到此特定提交中的选定文件。</p></li></ol>    </div>    <div class="chapter"><h2 id="reset-HEAD" data-toc="Undo_changes#reset-HEAD">将分支重置为特定提交</h2>        <p id="46ed9be2">如果您发现一组最近提交中的错误并想要重做该部分，则可以将存储库回滚到特定状态。这是通过将当前分支HEAD重置为指定的提交（如果您不希望在历史记录中反映撤消，则可选地重置索引和工作树）来完成的。</p>        <ol class="list _decimal"><li class="list__item" id="ad6038b4"><p>打开“ <span class="control">版本控制”</span>工具窗口（ <kbd data-primary_default="Alt+9" data-primary_default_for_gnome="Alt+9" data-primary_default_for_kde="Alt+9" data-primary_default_for_xwin="Alt+9" data-primary_emacs="Alt+9" data-primary_visual_studio="Alt+9" data-primary_eclipse="Alt+9" data-secondary_mac_os_x_10.5_="⌘9" data-secondary_mac_os_x="⌘9" data-secondary_eclipse_mac_os_x="⌘9">Alt + 9</kbd> ）并切换到“ <span class="control">日志”</span>选项卡。</p></li><li class="list__item" id="5bf0da7c"><p>选择要将HEAD移动到其上的提交，然后从上下文菜单中选择“将<span class="control">当前分支重置为此处</span> ”。</p></li><li class="list__item" id="6e1a2963">在打开的<span class="control">Git Reset</span>对话框中，选择您希望如何更新工作树和索引，然后单击<span class="control">Reset</span> ：<ul class="list _bullet"><li class="list__item" id="34080d38"><p>                        <span class="control">Soft</span> ：所有提交之后提交的所有更改都将被暂存（即，它们将被移动到<span class="control">Local Changes</span>视图，以便您可以查看它们并在必要时稍后提交）。</p></li><li class="list__item" id="425eaa2c"><p>                        <span class="control">混合</span> ：将保留所选提交后所做的更改，但不会为提交暂存。</p></li><li class="list__item" id="66789796"><p>                        <span class="control">硬</span> ：在所选提交之后进行的所有更改都将被丢弃（分阶段和提交）。</p></li><li class="list__item" id="ec9f5178"><p>                        <span class="control">保持</span> ：在所选提交之后进行的已提交更改将被丢弃，但本地更改将保持不变。</p></li></ul>            </li></ol>    </div>    <div class="chapter"><h2 id="revert-single-file" data-toc="Undo_changes#revert-single-file">获取文件的先前版本</h2>        <p id="5be00a9b">如果您需要还原单个文件而不是丢弃包含对多个文件的更改的整个提交，则可以返回到该文件的特定版本：</p>        <ol class="list _decimal"><li class="list__item" id="303e6d89"><p>在任何视图中选择所需文件（在“ <span class="control">项目”</span>工具窗口中，在编辑器中，在“ <span class="control">版本控制”</span>工具窗口的“ <span class="control">本地更改”</span>选项卡中，等等）。</p></li><li class="list__item" id="986ddbdf"><p>选择<span class="control">Git |</span>从主<span class="control">VCS</span>菜单或选择的上下文菜单中<span class="control">显示历史记录</span> 。“ <span class="control">历史记录”</span>选项卡将添加到“ <span class="control">版本控制”</span>工具窗口，其中显示所选文件的历史记录，并允许您查看和比较其修订版本。</p></li><li class="list__item" id="7e969ca9"><p>当您确定要回滚的修订版本后，在列表中选择它，然后从上下文菜单中选择“ <span class="control">获取</span> ”。</p></li></ol>    </div>    <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月25日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="work-on-several-features-simultaneously.html">同时处理多个功能</a> <a class="navigation-links__next" href="use-tags-to-mark-specific-commits.html">使用标记标记特定提交</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
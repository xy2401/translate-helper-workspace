<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><meta name="description" content="How to debug a simple Python application" data-skip-index="skip"></meta><link rel="canonical" href="debugging-your-first-python-application.html"></link><meta charset="UTF-8"></meta><title>第2步。调试您的第一个Python应用程序 - 帮助| PyCharm</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Debugging_Your_First_Python_Application"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PyCharm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="debugging-your-first-python-application.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Debugging_Your_First_Python_Application.xml" data-toc="Debugging_Your_First_Python_Application">第2步。调试你的第一个Python应用程序</h1>    <div class="chapter"><h2 id="where-is-the-problem" data-toc="Debugging_Your_First_Python_Application#where-is-the-problem">找出问题的根源</h2>       <p id="8330dd07">请记住，在上<a href="creating-and-running-your-first-python-project.html">一个教程中，</a>您已经创建并运行了<code class="code">Car</code>脚本？让我们再玩一下并修改<code class="code">brake</code>功能如下：</p>       <div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="k">def</span> <span class="nf">brake</span> <span class="p">（</span> <span class="bp">self</span> <span class="p">）：</span> <span class="bp">self</span> <span class="o">。</span> <span class="n">速度</span> <span class="o">-  =</span> <span class="mi">5</span></code></div>    <p id="1e3cf722">让我们看看当我们开始编写脚本时会发生什么，并尝试找出我们的平均速度：</p>    <figure><img alt="错误消息" title="错误消息" src="../img/idea/2019.1/py_run_error.png" id="f886e593" width="679" height="461"></figure>    <p id="f6108865">糟糕！PyCharm报告运行时错误： <code class="code">ZeroDivisionError</code> 。</p>        <p id="9a9a3d71">让我们深入研究一下代码，找出问题所在。我们可以使用PyCharm调试器来查看我们的代码中发生了什么。要开始调试，您必须先设置一些<a href="using-breakpoints.html">断点</a> 。要创建断点，只需单击左侧装订线：</p>    <figure><img alt="添加断点" title="添加断点" src="../img/idea/2019.1/py_breakpoints_added.png" id="52c5a70f" width="360" height="271"></figure>    <p id="b2e9ee8a">接下来，单击<img alt="运行图标" title="运行图标" src="../img/idea/2019.1/run_from_left_gutter_icon.png" id="804aee3b" width="16" height="15" class="inline-icon-16">左侧装订线中的图标，在<code class="code">main</code>条款旁边，然后选择“ <span class="control">调试'汽车'</span> 。PyCharm启动调试会话并显示<a href="debug-tool-window.html">调试工具窗口</a> 。</p>    <figure><img alt="调试工具窗口" title="调试工具窗口" src="../img/idea/2019.1/py_debugToolWindow.png" id="add89b80" width="597" height="528"></figure>    <p id="23c25345">在<a href="debug-tool-window-console.html">Console选项卡中</a> ，输入<code class="code">S</code> ：</p>    <figure><img alt="调试工具窗口：控制台选项卡" title="调试工具窗口：控制台选项卡" src="../img/idea/2019.1/py_debugToolWindow1.png" id="26078ade" width="651" height="425"></figure>    <p id="b35cfe10">如您所见，断点标记变为蓝色。这意味着我们已经达到了断点;请注意，此时尚未执行突出显示的代码行。</p>        <p id="8d8fb2ea">点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.resume.svg@2x.png" width="16" alt="恢复图标">按钮以恢复脚本执行。现在，看哪！例外是这里。另一个断点也出现了：默认情况下，PyCharm将暂停任何未在代码中捕获的异常，并且它将显示带闪电的断点图标。</p>    <figure><img alt="异常断点" title="异常断点" src="../img/idea/2019.1/py_debugToolWindow2.png" id="7e6fa44b" width="652" height="597"></figure>    <p id="c79a3597">控制台还会显示错误消息。所以我们发现了我们的问题。您还可以在调试器中看到值<code class="code">self.time</code>等于零：</p>    <figure><img alt="检测到错误" title="检测到错误" src="../img/idea/2019.1/py_debugToolWindow3.png" id="448e60fa" width="651" height="424"></figure>          <div class="chapter"><h3 id="surround" data-toc="Debugging_Your_First_Python_Application#surround">周围的代码</h3>               <p id="bde433c1">为了避免再次遇到同样的问题，让我们添加一个<code class="code">if</code>语句来检查时间是否等于零。为此，请在方法<code class="code">average_speed</code>选择语句<code class="code">return self.odometer / self.time</code> ，然后按<kbd data-primary_default="Ctrl+Alt+T" data-primary_default_for_gnome="Ctrl+Alt+T" data-primary_default_for_kde="Ctrl+Alt+T" data-primary_default_for_xwin="Ctrl+Alt+T" data-primary_emacs="Ctrl+Alt+T" data-primary_visual_studio="Ctrl+Alt+T" data-primary_netbeans="Ctrl+Alt+T" data-primary_eclipse="Shift+Alt+Z" data-secondary_mac_os_x_10.5_="⌥⌘T" data-secondary_mac_os_x="⌥⌘T" data-secondary_eclipse_mac_os_x="⌥⌘Z" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌃⌥T" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥T">Ctrl + Alt + T</kbd> （ <span class="menupath" data-skip-index="skip">Code | Surround with</span> ）：</p>    <figure><img alt="环绕码" title="环绕码" src="../img/idea/2019.1/py_surround.png" id="64f399c7" width="385" height="380"></figure>                       <p id="6fdba8ec">PyCharm创建一个stub <code class="code">if</code>构造，让你完成填充正确内容的任务。</p>                    <p id="864a62ab">编辑后，我们得到以下内容：</p>            <figure><img alt="包围代码的结果" title="包围代码的结果" src="../img/idea/2019.1/py_surround_result.png" id="fda227db" width="398" height="134"></figure>                    </div>    <p id="d547df5d">让我们仔细看看调试器如何显示您的代码正在做什么。</p></div>    <div class="chapter"><h2 id="debug" data-toc="Debugging_Your_First_Python_Application#debug">详细调试</h2>              <p id="cb894e02">“调试”工具窗口显示<a href="debug-tool-window-frames.html">框架</a> ， <a href="debug-tool-window-variables.html">变量</a>和<a href="debug-tool-window-watches.html">监视的</a>专用窗格以及<a href="debug-tool-window-console.html">控制台</a> ，其中显示所有输入和输出信息。如果希望控制台始终可见，可以将其拖动到PyCharm窗口的一个边缘。</p>                <div class="chapter"><h3 id="step" data-toc="Debugging_Your_First_Python_Application#step">步进</h3>                <p id="a04f4e77">如果您希望逐行查看代码的作用，则无需在每一行上添加断点，您可以单步执行代码。</p>                <p id="e0a6eaaf">让我们看一下单步执行示例程序的样子：单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.resume.svg@2x.png" width="16" alt="恢复图标">按钮，转到控制台询问汽车的平均速度（类型'S'），我们可以看到我们按下断点。</p>                                <p id="4c891379">我们可以使用<a href="debug-tool-window.html#steptoolbar">步进工具栏按钮</a>来选择我们想要在下一行停止的行。</p>                <figure><img alt="步进工具栏" title="步进工具栏" src="../img/idea/2019.1/py_stepping_toolbar.png" id="8c3b9476" width="229" height="45"></figure>                                <p id="84ad5eb3">例如，单击“ <span class="control">跳过”</span>按钮（ <img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.traceOver.svg@2x.png" width="16" alt="跨过图标"> ）并看到蓝色标记移动到下一行代码：</p>                <figure><img alt="在调试过程中踩到" title="在调试过程中踩到" src="../img/idea/2019.1/py_debugging1_step_over.png" id="966e759b" width="651" height="425"></figure>                                                    <p id="52ae03c7">如果单击<span class="control">Step Into</span>按钮（ <img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.traceInto.svg@2x.png" width="16" alt="走进图标"> ），你会看到在<code class="code">action = input("What should I do?[A] ccelerate，[B] rake，“”显示[O] dometer，或显示平均[S] peed？").upper()</code>调试器进入文件<code class="code">parse.py</code> ：</p>                    <figure><img alt="在调试过程中步入" title="在调试过程中步入" src="../img/idea/2019.1/py_debugging1_step_into.png" id="ae2645b5" width="649" height="662"></figure>                    <p id="2ec2c643">但是，如果继续使用<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.traceOver.svg@2x.png" width="16" alt="跨过图标"> ，你会看到你的应用程序只是传递到下一个循环：</p>                    <figure><img alt="调试：传递到下一个循环" title="调试：传递到下一个循环" src="../img/idea/2019.1/py_debugging1_next_input.png" id="412488d4" width="652" height="394"></figure>                                <p id="f2c5b97c">如果您想专注于自己的代码，请使用<span class="control">Step Into My Code</span>按钮（ <img class="inline-icon-16" src="../img/idea/2019.1/python.icons.com.jetbrains.python.debug.StepIntoMyCode.svg@2x.png" width="16" alt="进入我的代码"> ） - 因此你将避免步入库类。</p>                <p id="b8aab536">有关详细信息，请参阅“ <a href="debug-tool-window.html#steptoolbar">步进”工具栏</a>和“单<a href="stepping-through-the-program.html"><span>步执行程序”</span></a>部分。</p>            </div>        <div class="chapter"><h3 id="watch" data-toc="Debugging_Your_First_Python_Application#watch">观看</h3>            <p id="defb4801">PyCharm允许您观看任何变量。只需点击<img class="inline-icon-16" src="../img/idea/2019.1/artwork.studio.icons.common.add@2x.png" width="16" alt="添加按钮"> <span class="control">手表</span>标签的工具栏，键入要观察的变量的名字上-让它成为<code class="code">my_car.time</code> 。请注意，此处可以使用代码完成：</p>            <figure><img alt="观看完成" title="观看完成" src="../img/idea/2019.1/py_debugging1_watch_completion.png" id="7dd2f565" width="674" height="607"></figure>                        <p id="aaefa32b">首先，您看到时间等于nil  - 这意味着该变量尚未定义：</p>            <figure><img alt="观看错误" title="观看错误" src="../img/idea/2019.1/py_debugging1_watch_error.png" id="ecd937fd" width="188" height="150"></figure>                        <p id="37b13138">但是，当程序执行继续到定义变量的作用域时，watch会获得以下视图：</p>            <figure><img alt="监视变量获取值" title="监视变量获取值" src="../img/idea/2019.1/py_debugging1_watch_normal.png" id="e8f360fa" width="239" height="157"></figure>                        <p id="a7aea052">有关详细信息<a href="adding-editing-and-removing-watches.html"><span>，</span></a>请参阅<a href="adding-editing-and-removing-watches.html"><span>添加，编辑和删除监视</span></a>部分。</p>        </div>        <div class="chapter"><h3 id="inline-debugging" data-toc="Debugging_Your_First_Python_Application#inline-debugging">内联调试</h3>            <p id="d1fd7ded">您可能已经注意到另一个PyCharm功能，可以很容易地看到您的代码正在做什么： <a href="inline-debugging.html">内联调试器</a> 。只要按下任何断点，PyCharm就会在编辑器中显示许多变量的值：</p>            <figure><img alt="内联调试" title="内联调试" src="../img/idea/2019.1/py_debugging.png" id="70d59ecf" width="619" height="119"></figure>                        <p id="827cf08f">默认情况下启用此<a href="inline-debugging.html">内联调试</a>功能。如果没有看到内联调试值，请使用设置图标检查是否已启用<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.gearPlain.svg@2x.png" width="16" alt="设置">在<a href="debug-tool-window.html"><span>调试工具窗口上</span></a> ：</p>            <figure><img alt="显示内联值" title="显示内联值" src="../img/idea/2019.1/inline_debugging.png" id="19f36604" width="250" height="314"></figure>                    </div>        <div class="chapter"><h3 id="evaluate" data-toc="Debugging_Your_First_Python_Application#evaluate">评估表达式</h3>            <p id="8dc7a5fc">最后，您可以随时评估任何表达式。例如，如果要查看变量的值，请单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.debugger.evaluateExpression.svg@2x.png" width="16" alt="评估表达式按钮">按钮。</p>                                  <p id="3b8f97ed">然后在打开的对话框中，单击“ <span class="control">评估”</span> ：</p>            <figure><img alt="评估对话框" title="评估对话框" src="../img/idea/2019.1/py_debugging1_evaluate_expression_action.png" id="512a1763" width="446" height="561"></figure>                        <p id="e6c0d9e4">实际上，你可以用手表看到同样的东西。使用评估表达式，您可以执行使用手表无法做到的事情：您可以更改内容。</p>            <p id="1de15364">例如，如果您输入所需的里程表值，例如50，然后继续单步执行脚本，您将获得以下内容：</p>            <figure><img alt="评估表达式：目标值" title="评估表达式：目标值" src="../img/idea/2019.1/py_debugging1_evaluate_expression_change_value.png" id="6a2bf357" width="650" height="627"></figure>                        <p id="79e81d63">有关详细信息，请参阅“ <a href="evaluating-expressions.html"><span>评估表达式”</span></a>部分。</p>            <p id="667d5004">您也可以单击按钮<img class="inline-icon-16" src="../img/idea/2019.1/python.icons.com.jetbrains.python.debug.commandLine@2x.png" width="16" alt="启用Python控制台">在调试器中启用Python控制台。在此模式下，您可以输入一些命令和表达式。例如，您可以修改变量值。</p>            <figure><img alt="在Python控制台中调试期间更改变量" title="在Python控制台中调试期间更改变量" src="../img/idea/2019.1/py_debugging_python_console.png" id="627d4d24" width="542" height="527"></figure>        </div>    </div>    <div class="chapter"><h2 id="summary" data-toc="Debugging_Your_First_Python_Application#summary">摘要</h2>              <p id="3c1b69f4">所以，你做到了！恭喜！让我们重复你在PyCharm的帮助下所做的事情：</p>        <ul class="list _ul"><li class="list__item" id="d4c1de2d"><p>找出问题的根源</p></li><li class="list__item" id="40c14d40"><p>设置断点</p></li><li class="list__item" id="071d0a41"><p>逐步完成您的计划</p></li><li class="list__item" id="b06052dc"><p>创造了一块手表</p></li><li class="list__item" id="390be809"><p>评估一个表达式</p></li></ul>    </div>    <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="creating-and-running-your-first-python-project.html">步骤1。创建和运行您的第一个Python项目</a> <a class="navigation-links__next" href="testing-your-first-python-application.html">第3步。测试您的第一个Python应用程序</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>也可以看看</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>程序：</h3><ul class="list"><li class="list__item"><a href="surrounding-blocks-of-code-with-language-constructs.html"><span>环绕代码片段</span></a></li><li class="list__item"><a href="running-applications.html"><span>运行应用程序</span></a></li><li class="list__item"><a href="debugging-code.html"><span>不要暂停代码执行</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>教程和示例：</h3><ul class="list"><li class="list__item"><a href="debugging-python-code.html"><span>使用PyCharm进行调试</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
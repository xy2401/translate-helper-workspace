<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="pytest.html"></link><meta charset="UTF-8"></meta><title>Pytest  - 帮助| PyCharm</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Pytest"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PyCharm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="pytest.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Pytest.xml" data-toc="Pytest">Pytest</h1>    <p id="418e1829">PyCharm支持<a href="https://docs.pytest.org" data-bypass="yes" target="_blank"><span>pytest</span></a> ，一个功能齐全的测试框架。</p>    <p id="b200fc4b">可以使用以下功能：</p>    <ul class="list _ul"><li class="list__item" id="7edce1c1"><p>专用的测试运行器。</p></li><li class="list__item" id="11372bd7"><p>测试对象和pytest装置的代码完成。</p></li><li class="list__item" id="b85bb5f5"><p>代码导航（ <a href="jumping-to-test-or-test-subject.html"><span>跳转到测试或测试主题</span></a>除外）。</p></li><li class="list__item" id="808d44ea"><p>详细的失败断言报告。</p></li><li class="list__item" id="393e461b"><p>支持Python 2.7和Python 3.5及更高版本。</p></li><li class="list__item" id="031a6369"><p><a href="performing-tests.html#test-mutliprocessing">多处理</a>测试执行。</p></li></ul><p id="2a9f15fa">默认情况下，建议的默认测试运行器是<a href="https://docs.python.org/2/library/unittest.html" data-bypass="yes" target="_blank"><span>unittest</span></a> 。因此，要利用pytest，首先需要将其设为默认测试运行器。</p><section class="procedure-steps"><h2 id="enable-pytest" data-toc="Pytest#enable-pytest">为您的项目启用Pytest</h2><ol class="list _decimal"><li class="list__item" id="6e1e1998"><p>打开“ <span class="menupath" data-skip-index="skip">设置/首选项”|工具|</span> <a href="choosing-your-testing-framework.html"><span>选择测试框架中</span></a>描述的<span class="menupath" data-skip-index="skip">Python集成工具</span>设置对话框。</p></li><li class="list__item" id="9270da14"><p>在<span class="control">Default test runner</span>字段中，选择<span class="control">pytest</span> 。</p></li><li class="list__item" id="13f580fc"><p>单击“ <span class="control">确定”</span>保存设置。</p></li></ol></section>    <p id="de8b36bb">现在，将pytest设置为默认测试框架，您可以为<a href="creating-and-running-your-first-python-project.html#edit-file">Car</a>示例创建一个小测试。让我们创建一个pytest测试来检查<code class="code">brake</code>功能。</p><section class="procedure-steps"><h2 id="create-pytest-test" data-toc="Pytest#create-pytest-test">创建一个测试</h2><ol class="list _decimal"><li class="list__item" id="134b8f55"><p>创建一个<a href="creating-and-running-your-first-python-project.html#creating-simple-project">Python项目</a> 。</p></li><li class="list__item" id="bd6e08fd"><p>在主菜单上，单击“ <span class="control">文件”|</span>单击“ <span class="control">新建”</span> ，选择“ <span class="control">Python”文件</span> ，键入<span class="filepath">Car.py</span> ，然后单击“ <span class="control">确定”</span> 。</p></li><li class="list__item" id="9b7aa034"><p>将<a href="creating-and-running-your-first-python-project.html#edit-file">Car</a>示例复制并粘贴到<span class="filepath">Car.py</span>文件中。</p></li><li class="list__item" id="1fd84c3b"><p>再创建一个Python文件并将其命名为<code class="code">test_car_pytest</code> 。</p></li><li class="list__item" id="4c7421a8"><p>将以下代码添加到新创建的文件中。此代码将<code class="code">Car</code>的初始速度值设置为50，并在执行<code class="code">brake()</code>函数后检查速度是否正确设置为45。</p></li></ol><div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="kn">来自</span> <span class="nn">Car</span> <span class="kn">import</span> <span class="n">Car</span> <span class="k">def</span> <span class="nf">test_car_brake</span> <span class="p">（）：</span> <span class="n">car</span> <span class="o">=</span> <span class="n">Car</span> <span class="p">（</span> <span class="mi">50</span> <span class="p">）</span> <span class="n">car</span> <span class="o">。</span> <span class="n">刹车</span> <span class="p">（）</span> <span class="k">断言</span> <span class="n">汽车</span> <span class="o">。</span> <span class="n">速度</span> <span class="o">==</span> <span class="mi">45</span></code></div><p id="b6a3ed33">请注意，PyCharm识别测试主题并提供<code class="code">Car</code>类实例的完成。</p><figure><img alt="测试对象的自动完成" title="测试对象的自动完成" src="../img/idea/2019.1/py_pytest_autocomplete.png" id="c549ad05" width="300" height="374"></figure><p id="3be1c7f5">PyCharm使用<code class="code">assert</code>语句检测函数，并将<span class="control">Run Test</span>图标添加到装订线。</p><p id="7da69e5f">虽然pytest不支持上下文菜单的<span class="control">Go To Test Subject</span>和<span class="control">Go To Test</span>命令，但您可以使用<span class="control">Go To Declaration</span> （ <kbd data-primary_default="Ctrl+B" data-primary_default_for_gnome="Ctrl+B" data-primary_default_for_kde="Ctrl+B" data-primary_default_for_xwin="Ctrl+B" data-primary_emacs="Ctrl+Alt+G" data-primary_visual_studio="F12" data-primary_netbeans="Ctrl+B" data-primary_eclipse="F3" data-secondary_mac_os_x_10.5_="⌘B" data-secondary_mac_os_x="⌘B" data-secondary_eclipse_mac_os_x="F3" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="F12" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥G">Ctrl + B</kbd> ）命令导航到<span class="filepath">Car.py中</span>的测试代码。</p></section><section class="procedure-steps"><h2 id="run-pytest-test" data-toc="Pytest#run-pytest-test">运行测试</h2><ol class="list _decimal"><li class="list__item" id="559ed663"><p id="feef83db">点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="运行测试">运行测试：</p><figure><img alt="运行测试" title="运行测试" src="../img/idea/2019.1/py_pytest_run_test.png" id="34492e3b" width="250" height="99"></figure>    <p id="32f7ea7c">请注意，PyCharm会自动创建pytest <a href="run-debug-configuration-py-test.html">运行/调试</a>配置：</p><figure><img alt="建议的pytest运行/调试配置" title="建议的pytest运行/调试配置" src="../img/idea/2019.1/py_pytest_run_debug_configuration.png" id="413481d6" width="324" height="243"></figure>         <p id="b0653deb">选择<span class="control">Run pytest for test_car_pytest</span>以执行测试。</p>    </li><li class="list__item" id="8c0a6bae"><p id="f7921133">检查测试结果：</p><figure><img alt="Pytest跑" title="Pytest跑" src="../img/idea/2019.1/py_pytest_results.png" id="cf9718f0" width="800" height="610"></figure>    </li><li class="list__item" id="d9e8dfd5"><p id="0859a927">将<code class="code">assert</code>语句更改为以下内容： <code class="code">assert my_car.speed == 4599</code> 。</p></li><li class="list__item" id="0ac6759c"><p id="a0a9f41b">重新运行测试以评估断言失败报告：</p><figure><img alt="断言报告失败" title="断言报告失败" src="../img/idea/2019.1/py_pytest_fail_report.png" id="6ee107d9" width="800" height="608"></figure>请注意，pytest提供有关失败的明确报告。</li></ol></section>    <p id="59ec705c">使用pytest <i id="7ba73e1c">fixture，</i>您可以创建可在整个测试模块中重复使用的小型测试单元。您只需要使用<code class="code">@pytest.fixture</code>标记可重复使用的单元。</p><section class="procedure-steps"><h2 id="pytest-fixtures" data-toc="Pytest#pytest-fixtures">使用固定装置</h2><ol class="list _decimal"><li class="list__item" id="37d755f1">        <p id="3c446744">修改您的<code class="code">Car</code> pytest测试，如下所示：</p><div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="kn">从</span> <span class="nn">汽车</span> <span class="kn">进口</span> <span class="n">车</span> <span class="nd">@ pytest.fixture</span> <span class="k">高清</span> <span class="nf">my_car</span> <span class="kn">进口</span> <span class="nn"><span class="p">pytest（）：</span></span> <span class="k">返回</span> <span class="n">汽车</span> <span class="p"><span class="mi"><span class="p">（50）</span></span></span> <span class="k">高清</span> <span class="nf"><span class="p"><span class="n"><span class="p"><span class="n"><span class="o">test_car_accelerate（my_car）：my_car。</span></span></span></span></span></span> <span class="n">加快</span> <span class="p">（）</span> <span class="k">断言</span> <span class="n"><span class="o">my_car。</span></span> <span class="n">速度</span> <span class="o">==</span> <span class="mi">55</span> <span class="k">def</span> <span class="nf">test_car_brake</span> <span class="p">（</span> <span class="n">my_car</span> <span class="p">）：</span> <span class="n">my_car</span> <span class="o">。</span> <span class="n">brake</span> <span class="p">（）</span> <span class="k">断言</span> <span class="n">my_car</span> <span class="o">。</span> <span class="n">速度</span> <span class="o">==</span> <span class="mi">45</span></code></div>                <p id="20e522f3"><code class="code">my_car()</code>是一个fixture函数，用于创建速度值等于50的<code class="code">Car</code>实例。它在<code class="code">test_car_accelerate</code>和<code class="code">test_car_brake</code>用于验证<code class="code">Car</code>类中相应函数的正确执行。</p>      <p id="287f4a9c">请注意， <code class="code">my_car</code> fixture与其他标准pytest fixture一起添加到代码完成列表中，例如<code class="code">tempdir</code> 。</p><figure><img alt="自动完成pytest夹具" title="自动完成pytest夹具" src="../img/idea/2019.1/py_pytest_fixture_autocomplete.png" id="fc58d08b" width="700" height="529"></figure>          </li><li class="list__item" id="da698203"><p>单击其中一个<img class="inline-icon-16" src="../img/idea/2019.1/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="运行测试">图标，或运行整个测试模块。</p></li></ol><p id="b08718a2">您可以使用fixture功能的<code class="code">scope</code>参数在测试中启用共享夹具实例。有关pytest fixture的更多信息，请参阅<a href="https://docs.pytest.org/en/latest/fixture.html#fixture" data-bypass="yes" target="_blank"><span>pytest fixture程序文档</span></a> 。</p></section>    <p id="d323ff09">您可能希望在预定义的数据集上运行测试。PyCharm支持通过<code class="code">@pytest.mark.parametrize</code>在pytest中实现的测试参数化。</p>    <section class="procedure-steps"><h2 id="pytest-parametrize" data-toc="Pytest#pytest-parametrize">应用参数化</h2><ol class="list _decimal"><li class="list__item" id="7a4a6293"><p>让我们创建一组速度值来测试<code class="code">car.accelerate</code>和<code class="code">car.brake</code>函数： <code class="code">speed_data = {45, 50, 55, 100}</code></p></li><li class="list__item" id="553c7f2a">            <p id="272a52eb">将测试代码修改为以下内容：</p><div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="n">汽车</span> <span class="o">=</span> <span class="n">汽车</span> <span class="p"><span class="mi"><span class="p">（50）</span></span></span> <span class="n">的车</span> <span class="p">：</span> <span class="kn">从</span> <span class="nn">汽车</span> <span class="kn">进口</span> <span class="n">车</span> <span class="n">speed_data</span> <span class="o">=</span> <span class="p"><span class="mi"><span class="p"><span class="mi"><span class="p"><span class="mi"><span class="p"><span class="mi"><span class="p">{45，50，55，100}</span></span></span></span></span></span></span></span></span> <span class="nd">@ <span class="p">pytest.mark.parametrize（</span></span> <span class="s"><span class="p"><span class="n"><span class="p"><span class="k">“speed_brake”，speed_data）DEF</span></span></span></span></span> <span class="nf"><span class="p"><span class="n"><span class="p">test_car_brake（speed_brake）</span></span></span></span> <span class="kn">进口</span> <span class="nn"><span class="o">pytest。</span></span> <span class="n">刹车</span> <span class="p">（）</span> <span class="k">断言</span> <span class="n">汽车</span> <span class="o">。</span> <span class="n">speed</span> <span class="o">==</span> <span class="n">speed_brake</span> <span class="nd">@ pytest.mark.parametrize</span> <span class="p">（</span> <span class="s">“speed_accelerate”</span> <span class="p">，</span> <span class="n">speed_data</span> <span class="p">）</span> <span class="k">def</span> <span class="nf">test_car_accelerate</span> <span class="p">（</span> <span class="n">speed_accelerate</span> <span class="p">）：</span> <span class="n">car</span> <span class="o">=</span> <span class="n">Car</span> <span class="p">（</span> <span class="mi">50</span> <span class="p">）</span> <span class="n">car</span> <span class="o">。</span> <span class="n">加速</span> <span class="p">（）</span> <span class="k">断言</span> <span class="n">汽车</span> <span class="o">。</span> <span class="n">速度</span> <span class="o">==</span> <span class="n">speed_accelerate</span></code></div>                        <p id="fc013420">请注意，PyCharm会检测新创建的参数并将它们添加到完成列表中。</p>            <p id="fc542f97">                </p><figure><img alt="pytest.mark.parametrize的代码完成" title="pytest.mark.parametrize的代码完成" src="../img/idea/2019.1/py_pytest_parametrize_completion.png" id="1c86e156" width="500" height="241"></figure>                    </li><li class="list__item" id="e8e10370"><p>运行<code class="code">car.brake()</code>函数的测试。您应该期待以下测试报告：</p><figure><img alt="三次测试失败，一次测试通过了car.brake功能" title="三次测试失败，一次测试通过了car.brake功能" src="../img/idea/2019.1/py_pytest_parametrize_test_run.png" id="d1ba9bce" width="800" height="529"></figure>        </li></ol><p id="67fb995c">您还可以运行<code class="code">car.accelerate()</code>函数的测试，以确保它对所有速度值都失败，但55。有关参数化测试的更多信息，请参阅<a href="https://docs.pytest.org/en/latest/parametrize.html" data-bypass="yes" target="_blank"><span>pytest文档</span></a> 。</p></section>    <p id="17d5f885">除了提到的功能，pytest支持通过行为驱动开发（BDD） <code class="code">pytest_bdd</code> 。当您需要使用Gherkin语言快速记录测试并利用pytest的有益功能（例如<code class="code">fixture</code>时，这尤其有用。</p>    <section class="procedure-steps"><h2 id="pytest-bdd" data-toc="Pytest#pytest-bdd">实施测试场景</h2><ol class="list _decimal"><li class="list__item" id="d9481bcb"><p id="796322de">让我们修改<code class="code">Car</code>样本以验证汽车的速度。将以下函数添加到<span class="filepath">Car.py</span>文件中：</p>            <div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="k">def</span> <span class="nf">speed_validate</span> <span class="p">（</span> <span class="bp">self</span> <span class="p">）：</span> <span class="k">返回</span> <span class="bp">self</span> <span class="o">。</span> <span class="n">速度</span> <span class="o">&lt;=</span> <span class="mi">160</span></code></div>        </li><li class="list__item" id="c9c2189f">            <p id="8bde705a">接下来，在项目中启用<code class="code">pytest-bdd</code> 。在“ <span class="control">设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌥F7" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）中，导航到“ <span class="menupath" data-skip-index="skip">语言和框架”| BDD</span> ，并从<span class="control">首选BDD框架</span>列表中选择<span class="control">pytest-bdd</span> 。</p>        </li><li class="list__item" id="d32f1a18"><p id="760b27eb">使用Gherkin语言创建<span class="filepath">.feature</span>文件以记录BDD方案。右键单击项目根目录，然后选择“ <span class="menupath" data-skip-index="skip">新建”|小黄瓜功能文件</span> 。在打开的对话框中，将<span class="filepath">car.feature</span>指定为文件名，然后单击“ <span class="control">确定”</span> 。</p></li><li class="list__item" id="f83867b4">            <p id="311a3027">将以下方案添加到<span class="filepath">car.feature</span>文件中：</p>            <div class="code-block" data-lang="Actionscript"><code class="code-block__wrapper"><span class="nx">特点</span> <span class="o">：</span> <span class="nx">速度</span> <span class="nx">情景</span> <span class="o">：</span> <span class="nx">给定</span> <span class="nx">速度</span> <span class="nx">的有效</span> <span class="nx">速度</span> <span class="nx"><span class="nx"><span class="nx">小于</span></span></span> <span class="mi">160</span> <span class="nx">时</span> <span class="nx">加速</span> <span class="nx">再</span> <span class="nx">提速</span> <span class="nx">是</span> <span class="nx">有效的</span> <span class="nx">情景</span> <span class="o">：</span> <span class="nx">无效的</span> <span class="nx">速度</span> <span class="nx">给定</span> <span class="nx">速度</span> <span class="nx"><span class="nx"><span class="nx">超过</span></span></span> <span class="mi">160</span> <span class="nx">加速</span> <span class="nx">时</span> <span class="nx">的速度</span> <span class="nx">。然后</span> <span class="nx">是</span> <span class="nx">无效的</span></code></div>          <p id="6c7c0f8b">两种情况都验证了汽车的速度。当速度不超过160时，速度应该是有效的。请注意，方案步骤突出显示，因为此时未定义它们。</p>            <figure><img alt="bdd场景" title="bdd场景" src="../img/idea/2019.1/py_pytest_bdd_feature.png" id="cbd0937b" width="400" height="306"></figure>        </li><li class="list__item" id="b9e15472">            <p id="9e770953">PyCharm可以快速生成整个特征文件的步骤定义。将光标置于任何突出显示的步骤上，单击<kbd data-primary_default="Ctrl+Shift+A" data-primary_default_for_gnome="Ctrl+Shift+A" data-primary_default_for_kde="Ctrl+Shift+A" data-primary_default_for_xwin="Ctrl+Shift+A" data-primary_emacs="Escape, X" data-primary_visual_studio="Ctrl+Shift+A" data-primary_netbeans="Ctrl+I" data-primary_eclipse="Ctrl+Shift+A" data-secondary_mac_os_x_10.5_="⇧⌘A" data-secondary_mac_os_x="⇧⌘A" data-secondary_eclipse_mac_os_x="⌘3" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌃⇧A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⎋, X">Ctrl + Shift + A</kbd> ，然后选择“ <span class="control">创建所有步骤定义”</span> 。在打开的对话框中，指定测试文件的名称（它应该以<code class="code">test</code> <span class="control">开头），</span>从<span class="control">文件类型</span>列表中选择<span class="control">Python（pytest-bdd）</span> ，如果需要，还可以修改默认文件位置。</p>            <figure><img alt="步骤定义生成" title="步骤定义生成" src="../img/idea/2019.1/py_pytest_bdd_step_definitions.png" id="418556c3" width="550" height="231"></figure>            <p id="a630932c">检查<span class="filepath">test_car_pytest_bdd_fixture.py</span>文件。它包含每个方案步骤的所有必需的<code class="code">import</code>语句和定义。</p>         </li><li class="list__item" id="c3e11d9d">            <p id="5617e60b">让我们修改测试文件，以便为<code class="code">Car</code>对象使用pytest fixture并添加更多测试逻辑：</p>            <div class="code-block" data-lang="Python"><code class="code-block__wrapper"><span class="kn">从</span> <span class="nn">pytest_bdd</span> <span class="kn">进口</span> <span class="n">的情况下</span> <span class="p">，</span> <span class="n">给定</span> <span class="p">的</span> <span class="n">时候</span> <span class="p">，</span> <span class="n">再</span> <span class="kn">从</span> <span class="nn">汽车</span> <span class="kn">进口</span> <span class="n">车</span> <span class="nd">@ pytest.fixture</span> <span class="k">高清</span> <span class="nf"><span class="p">my_car（）</span></span> <span class="kn">导入</span> <span class="nn"><span class="p">pytest：</span></span> <span class="k">返程</span> <span class="n">车</span> <span class="p"><span class="nd"><span class="p">（）@scenario（</span></span></span> <span class="s"><span class="p">'car.feature'，</span></span> <span class="s">'有效速度<span class="p"><span class="k">'）DEF</span></span></span> <span class="nf"><span class="p">test_speed_valid（）：</span></span> <span class="k">通过</span> <span class="nd">@场景</span> <span class="p">（</span> <span class="s">'car.feature'</span> <span class="p">，</span> <span class="s">'无效速度'</span> <span class="p">）</span> <span class="k">def</span> <span class="nf">test_speed_invalid</span> <span class="p">（）：</span> <span class="k">传递</span> <span class="nd">@given</span> <span class="p">（</span> <span class="s">“速度小于160”</span> <span class="p">）</span> <span class="k">def</span> <span class="nf">set_valid_speed</span> <span class="p">（</span> <span class="n">my_car</span> <span class="p">）：</span> <span class="n">my_car</span> <span class="o">。</span> <span class="n">速度</span> <span class="o">=</span> <span class="mi">50</span> <span class="nd">@given</span> <span class="p">（</span> <span class="s">“速度超过160”</span> <span class="p">）</span> <span class="k">def</span> <span class="nf">set_invalid_speed</span> <span class="p">（</span> <span class="n">my_car</span> <span class="p">）：</span> <span class="n">my_car</span> <span class="o">。</span> <span class="n">速度</span> <span class="o">=</span> <span class="mi">100</span> <span class="nd">@when</span> <span class="p">（</span> <span class="s">“加速”</span> <span class="p">）</span> <span class="k">def</span> <span class="nf">car_accelerate</span> <span class="p">（</span> <span class="n">my_car</span> <span class="p">）：</span> <span class="n">my_car</span> <span class="o">。</span> <span class="n">加快</span> <span class="p"><span class="nd">（）@then（</span></span> <span class="s"><span class="p">“</span>速度是有效的<span class="p"><span class="k">”）DEF</span></span></span> <span class="nf">成功</span> <span class="p"><span class="n"><span class="p">（my_car）：</span></span></span> <span class="k">断言</span> <span class="n"><span class="o">my_car。</span></span> <span class="n">speed_validate</span> <span class="p">（）</span> <span class="nd">@ then</span> <span class="p">（</span> <span class="s">“速度无效”</span> <span class="p">）</span> <span class="k">def</span> <span class="nf">失败</span> <span class="p">（</span> <span class="n">my_car</span> <span class="p">）：</span> <span class="k">断言</span> <span class="ow">不是</span> <span class="n">my_car</span> <span class="o">。</span> <span class="n">speed_validate</span> <span class="p">（）</span></code></div>         </li><li class="list__item" id="4f3c4a8d">             <p id="97e3b3c7">通过创建相应的<a href="run-debug-configuration-py-test.html">运行/调试</a>配置来运行测试。您还可以使用“ <span class="control">运行”</span>图标运行任一方案（ <img class="inline-icon-16" src="../img/idea/2019.1/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="运行图标"> ）在排水沟里。</p>         </li><li class="list__item" id="9ec0b37f">            <p id="354c8227">检查测试运行结果。</p>            <figure><img alt="pytest-bdd结果" title="pytest-bdd结果" src="../img/idea/2019.1/py_pytest_bdd_results.png" id="ebb6ba62" width="900" height="306"></figure>            <p id="a9477ad7">在我们的例子中，我们有<code class="code">test_speed_valid</code>测试通过和<code class="code">test_speed_invalid</code>测试失败。</p>        </li></ol></section>    <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="testing-frameworks.html">测试框架</a> <a class="navigation-links__next" href="tox-support.html">Tox支持</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>也可以看看</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>外部链接：</h3><ul class="list"><li class="list__item"><a href="https://docs.pytest.org" data-bypass="yes" target="_blank"><span>docs.pytest.org</span></a></li><li class="list__item"><a href="https://docs.pytest.org/en/latest/index.html#documentation" data-bypass="yes" target="_blank"><span>Pytest文档</span></a></li><li class="list__item"><a href="https://docs.pytest.org/en/latest/fixture.html#fixture" data-bypass="yes" target="_blank"><span>Pytest灯具</span></a></li><li class="list__item"><a href="https://pytest-bdd.readthedocs.io/en/latest/" data-bypass="yes" target="_blank"><span>pytest-BDD</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
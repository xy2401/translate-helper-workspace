<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="general-usage.html"></link><meta charset="UTF-8"></meta><title>一般用法 - 帮助| PyCharm</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="IntelliLang.General Usage"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PyCharm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="general-usage.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="General_Usage.xml" data-toc="IntelliLang.General Usage">一般用法</h1>                                <aside class="warning " rel="General_Usage.xml" id="c8bed6fc" data-title=""><p>此功能在PyCharm的<b id="45ea9e95" origin="intellij-platform">教育</b>版中不可用。</p></aside>    <p id="8cfac643">该插件的用法简单明了，但非常灵活。将提供的注释集添加到项目中并开始使用它们，配置插件以使用一组自定义注释，或者只是使用UI配置使PyCharm了解到例如<code class="code">Pattern.compile()</code>的String参数应该被视为一个正则表达式。</p>    <div class="chapter"><h2 id="use-annotations" data-toc="IntelliLang.General Usage#use-annotations">使用注释</h2>    <p id="7bdfb147">IntelliLang使用三个基本注释： <code class="code">@Language</code> ， <code class="code">@Pattern</code>和<code class="code">@Subst</code> 。</p>    <ul class="list _ul"><li class="list__item" id="06c42018"><p><code class="code">@Language</code>负责语言注入功能。</p></li><li class="list__item" id="40ee344a"><p><code class="code">@Pattern</code>用于根据某种正则表达式模式验证字符串。</p></li><li class="list__item" id="01071413"><p><code class="code">@Subst</code>用于替换具有固定值的非编译时常量表达式。这允许您验证模式并构建注入语言的前缀/后缀（参见下文），即使对于已知在运行时包含某些值的非常量表达式也是如此。</p></li></ul>            <p id="e637969f">IntelliLang提供的注释位于文件<code class="code">annotations.jar</code> ，可以在<code class="code">/plugins/IntelliLang/lib</code> 。</p>    <div class="chapter"><h3 id="AtLanguage">@语言</h3>    <p id="c8cf1dcd"><code class="code">@Language</code>注释可用于注释String字段，局部变量，方法参数和返回字符串的方法。这将导致分配给字段/变量的字符串文字，作为参数传递或用作方法的返回值以解释为指定的语言。</p>    <p id="57626a78">此外，还有<span class="control">语言不匹配</span>检查，它在分配字段/变量或从方法返回的值时检查<i id="e4d77709">预期语言</i>与<i id="53c19d08">实际语言</i>之间的冲突。</p>    <p id="c98a1851">该插件支持<i id="36703df1">直接</i>和<i id="183ec1a8">间接</i>注释，即您可以直接使用这样的注释：</p>    <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="err">@</span> <span class="nx">Language</span> <span class="p">（</span> <span class="s2">“JavaScript”</span> <span class="p">）</span> <span class="nb">字符串</span> <span class="nx">代码</span> <span class="o">=</span> <span class="s2">“var x = 1 + 2”</span> <span class="p">;</span></code></div>    <p id="921536cf">或注释另一个注释类，如下所示：</p>    <div class="code-block" data-lang="Generic"><code class="code-block__wrapper">@Language <span class="o">（</span> <span class="s2">“XPath”</span> <span class="o">）</span> public @interface XPath <span class="o">{</span> <span class="o">}</span></code></div>    <p id="2dd7b651">然后可以简单地用于将元素注释为<code class="code">@XPath</code> 。</p>    <p id="c6efda7c">获取必须作为注释的value属性提供的<code class="code">language-id</code>非常容易：IntelliLang通过常规代码完成操作提供可用语言的列表。只需从ctrl-space弹出窗口中选择适当的语言：</p>            <figure><img alt="郎完成" title="郎完成" src="../img/idea/2019.1/lang-completion.png" id="cb090b48" width="376" height="228"></figure>    </div>    <div class="chapter"><h3 id="AtPattern">@图案</h3>    <p id="585466b0"><code class="code">@Pattern</code>注释负责标记必须符合某个正则表达式的字符串，并且可以像<code class="code">@Language</code>注释一样使用。这意味着，可以创建派生注释，例如需要String由一个或多个数字组成的<code class="code">@Number</code>注释：</p>    <div class="code-block" data-lang="Generic"><code class="code-block__wrapper">@Pattern <span class="o">（</span> <span class="s2">“\\ d +”</span> <span class="o">）</span> public @interface Number <span class="o">{</span> <span class="o">}</span></code></div>    <p id="53eebb5a">实际上，预定义注释已经包含两个这样的派生注释：第一个注释<code class="code">@PrintFormat</code>与<code class="code">java.util.使用的类似printf的模式匹配<code class="code">java.util.Formatter</code>和另一个<code class="code">@Identifier</code>描述了一个有效的Java标识符。这些都可以使用而无需指定任何其他模式。</p>    </div>    <div class="chapter"><h3 id="AtSubst">@Subst</h3>    <p id="9a9076a8"><code class="code">@Subst</code>注释用于替换非编译时常量的引用，这使得插件可以基于替换值与运行时期望的值兼容的假设进行<span class="control">模式验证</span> 。如果值与预期模式不匹配，插件将会抱怨。</p>    <p id="023e5bfe">它还有助于为语言注入功能构建有效的前缀/后缀上下文（请参阅下一节）。考虑这个例子：</p>    <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="nd">@Subst</span> <span class="o">（</span> <span class="s">“Tahoma”</span> <span class="o">）</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">font</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JLabel</span> <span class="o">（）。</span> <span class="na">getFont</span> <span class="o">（）。</span> <span class="na">getName</span> <span class="o">（）;</span> <span class="nd">@Language</span> <span class="o">（</span> <span class="s">“HTML”</span> <span class="o">）</span> <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">“&lt;html&gt; &lt;span style ='font：”</span> <span class="o">+</span> <span class="n">font</span> <span class="o">+</span> <span class="s">“; font-size：smaller'&gt;”</span> <span class="o">+</span> <span class="o">...</span> <span class="o">+</span> <span class="s">“&lt;/ span&gt; &lt;/ html&gt;”</span> <span class="o">;</span></code></div>    <p id="d2e5d0b1">如果没有用值<i id="c76b23e7">Tahoma</i>替换变量<code class="code">font</code>的值（实际上它可能只是这里的单个字符），注入的片段在语法上会不正确，导致错误<i id="4e03626a">一个术语，预期</i>在“ <code class="code">font:</code> ”指令之后显示。</p>    </div>    </div>    <div class="chapter"><h2 id="PrefixAndSuffix" data-toc="IntelliLang.General Usage#PrefixAndSuffix">提供上下文：前缀和后缀</h2>    <p id="6ddbb5f1">在对元素进行注释时，可以提供前缀和后缀，在解析语言片段时应该添加前缀/后缀。这可用于提供上下文信息，即如果JavaScript注入的前缀是“var someContextVariable;”，PyCharm将知道变量<i id="a67fa9b9">someContextVariable</i>被声明，并且在使用它时不会警告它是未声明的。</p>    <p id="2dbf1194">除了提供前缀和后缀的手动功能外，IntelliLang还可以从上下文中动态确定这些值，并使用字符串文字：</p>    <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="err">@</span> <span class="nx">Language</span> <span class="p">（</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">JavaScript</span> <span class="p">，</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="s2">“function doSomethingElse（a）{}”</span> <span class="p">）</span> <span class="nb">String</span> <span class="nx">code</span> <span class="o">=</span> <span class="s2">“function doSomething（）{\ n”</span> <span class="o">+</span> <span class="s2">“var x = 1; \ n”</span> <span class="o">+</span> <span class="s2">“doSomethingElse（x）; \ n “</span> <span class="o">+</span> <span class="s2">”}“</span> <span class="p">;</span></code></div>    <p id="ca2ecff2">在此示例中，JavaScript语言将注入三个String文字中的每一个，并且将根据前面和后面的表达式计算每个前缀和后缀，以便正在解析的结果文本是有效的JavaScript语法：</p>    <ul class="list _ul"><li class="list__item" id="997c8e19"><p>不会显示“missing'}'”错误：右括号是第一个文字后缀的一部分。</p></li><li class="list__item" id="abd5758c"><p><code class="code">doSomethingElse(a);</code>使用的变量<code class="code">x</code> <code class="code">doSomethingElse(a);</code>将被声明：它的声明是第二个字面的前缀的一部分。</p></li><li class="list__item" id="250c1019"><p>函数<code class="code">doSomethingElse()</code>也是已知的：它是在静态提供的前缀中定义的。</p></li></ul>    </div>    <div class="chapter"><h2 id="notes" data-toc="IntelliLang.General Usage#notes">重要笔记</h2>        <ul class="list _ul"><li class="list__item" id="prefix-trouble">PyCharm语言注入API存在一些问题，这些问题对注入语言片段的前缀/后缀施加了某些限制。例如，不允许语言的标记跨越元素的前缀/后缀。如果前缀以空白字符结尾并且片段以空格开头，则可能发生这种情况。<p id="d8e276e9">该插件以修剪前缀/后缀的方式处理这种特殊情况，并将一个空格字符作为分隔符插入。但是，如果空格字符不是标记分隔符（例如，适用于JavaScript字符串文字），则此方法不起作用。</p>                <p id="a72cce13">这种情况不能自动处理，PyCharm核心会产生断言。</p></li><li class="list__item" id="922aa779"><p>即使动态前缀/后缀计算为语言片段提供了适当的上下文，但有些事情可能无法按预期工作。最值得注意的是这是重构（重命名）和导航功能。</p></li></ul></div><div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="intellilang-configuration.html">IntelliLang配置</a> <a class="navigation-links__next" href="quick-edit-language.html">快速编辑语言</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
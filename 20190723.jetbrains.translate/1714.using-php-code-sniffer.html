<html lang="en-US" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="../app/v2/analytics.js"></script><link rel="canonical" href="using-php-code-sniffer.html"></link><meta charset="UTF-8"></meta><title>PHP Code Sniffer  - 帮助| IntelliJ IDEA</title><link rel="stylesheet" href="../app/v2/app.css"></link></head><body dir="ltr" data-id="Using_PHP_Code_Sniffer"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="using-php-code-sniffer.html#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">键盘布局</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected="">Windows / Linux默认值</option><option value="primary_default_for_gnome" data-group="primary">GNOME</option><option value="primary_default_for_kde" data-group="primary">KDE</option><option value="primary_default_for_xwin" data-group="primary">XWin中</option><option value="primary_emacs" data-group="primary">Emacs的</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_netbeans" data-group="primary">NetBeans的</option><option value="primary_eclipse" data-group="primary">日食</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X.</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_intellij_idea_classic_os_x" data-group="secondary">IntelliJ IDEA Classic（Mac OS X）</option><option value="secondary_xcode" data-group="secondary">Xcode中</option><option value="secondary_resharper" data-group="secondary">ReSharper的</option><option value="secondary_resharper_osx" data-group="secondary">ReSharper（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">Emacs（Mac OS X）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Using_PHP_Code_Sniffer.xml" data-toc="Using_PHP_Code_Sniffer">PHP Code Sniffer</h1>         <aside class="warning " rel="Using_PHP_Code_Sniffer.xml" id="eb501161" data-title=""><p>此功能仅在<b id="eed8f8a1" origin="intellij-platform">Ultimate</b>版本中受支持。</p></aside>                     <aside class="warning " rel="Using_PHP_Code_Sniffer.xml" id="6e353076" data-title=""><p>以下内容仅在安装并启用PHP插件时有效！</p></aside>                               <p id="5a4d8fb2">IntelliJ IDEA通过与<a href="http://pear.php.net/package/PHP_CodeSniffer" data-bypass="yes" target="_blank"><span>PHP Code Sniffer</span></a>工具集成提供代码样式检查，该工具验证您的代码是否与您选择的编码标准保持一致。您可以指定一个预定义的<a href="http://pear.php.net/manual/en/package.php.php-codesniffer.coding-standard-tutorial.php" data-bypass="yes" target="_blank"><span>编码标准，</span></a>或者使用<a href="http://pear.php.net/manual/en/package.php.php-codesniffer.coding-standard-tutorial.php" data-bypass="yes" target="_blank"><span>您自己以前定义的编码标准</span></a> ，并将根目录放在默认的PHP Code Sniffer <span class="filepath">标准</span>目录之外。此外，您可以与您的团队分享您的自定义编码风格。</p>    <p id="668b5aac">要使用IntelliJ IDEA而不是命令行的PHP Code Sniffer，您需要在IntelliJ IDEA中注册它并将其配置为IntelliJ IDEA <a href="code-inspection.html">代码检查</a> 。在IntelliJ IDEA中安装并启用后，该工具可在任何已打开的PHP文件中使用，无需其他步骤即可启动它。每次更新文件时都会激活动态代码检查，从而轻松排除发现的问题。</p>    <p id="b2038f76">PHP Code Sniffer即时报告的错误和警告显示为弹出消息。在批处理模式下运行工具时，错误和警告将显示在“ <a href="inspection-results-tool-window.html">检查结果”</a>工具窗口中。每条消息都有<code class="code">phpcs</code>前缀，以区别于IntelliJ IDEA内部检查。IntelliJ IDEA还集成了<a href="https://github.com/squizlabs/PHP_CodeSniffer/wiki/Fixing-Errors-Automatically#using-the-php-code-beautifier-and-fixer" data-bypass="yes" target="_blank"><span>PHP Code Beautifier和Fixer</span></a>工具，可以修复许多检测到的问题。</p>    <div class="chapter"><h2 id="7b3f4b7c" data-toc="Using_PHP_Code_Sniffer#7b3f4b7c">在你开始之前</h2>        <p id="9cd9db9a">确保启用了<span class="keyword">PHP</span>插件。该<span class="emphasis"></span>插件未与IntelliJ IDEA捆绑在一起，但可以从<span class="emphasis">JetBrains插件存储库中</span>安装，如<a href="managing-plugins.html"><span>管理插件中所述</span></a> 。</p>    </div>    <div class="chapter"><h2 id="installing-configuring-code-sniffer" data-toc="Using_PHP_Code_Sniffer#installing-configuring-code-sniffer">安装和配置PHP Code Sniffer</h2>        <p id="dcd4e16c">PHP Code Sniffer脚本可以用作本地脚本，与PHP解释器关联的脚本，或者声明为项目依赖项的脚本，并通过<a href="using-the-composer-dependency-manager.html">Composer</a>安装，这是首选和推荐的方式。</p><aside class="note " rel="883e98a8" id="74a5b264" data-title="">            <p id="dda9c85e">代码质量工具脚本<span class="filepath">（phpcs.bat</span>用于Windows或Linux和MacOS <span class="filepath">phpcs）</span>包含对全系统的PHP引擎的调用。为了能够使用它们，请确保将包含PHP引擎可执行文件的目录添加到系统<code class="code">path</code> 。</p>        </aside>                    <div class="chapter"><h3 id="installing-code-sniffer-composer">使用Composer安装PHP代码嗅探器</h3>            <p id="0956e854">在开始之前，请确保您的计算机上已安装Composer，并在<a href="using-the-composer-dependency-manager.html"><span>Composer Dependency Manager</span></a>中所述的当前项目中进行初始化。</p>            <p id="638615e7">当您使用Composer安装PHP Code Sniffer时，IntelliJ IDEA会自动下载必要的脚本，在IDE中注册它们，并可选择启用和配置相应的<a href="using-php-code-sniffer.html#configure-tool-inspection-composer">代码检查</a> 。</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="062331bb"><p>从<span class="filepath">composer.json</span>的上下文菜单中，选择<span class="menupath" data-skip-index="skip">Composer |管理依赖关系</span> 。或者选择<span class="menupath" data-skip-index="skip">工具|作曲家|</span>从主菜单<span class="menupath" data-skip-index="skip">管理依赖项</span> 。</p></li><li class="list__item" id="af552afd">            <p id="f54b6288">在打开的<a href="add-composer-dependency.html"><span>Manage Composer Dependencies对话框</span></a>中，从<span class="control">Available Packages</span>列表中选择<code class="code">squizlabs/php_codesniffer</code>包，可能使用搜索字段。</p>            <p id="71deb053">从<span class="control">要安装</span>的<span class="control">版本</span>列表中选择相关版本。</p>        </li><li class="list__item" id="5ee07c83">            <p id="8dbccbf5">如有必要，请展开“ <span class="control">设置</span>隐藏”区域并指定高级安装选项。在“ <span class="control">命令行参数”</span>字段中，键入其他命令行参数。建议提供<code class="code">--dev</code> ，option：在这种情况下，包将被添加到<span class="filepath">composer.json</span>文件的<code class="code">require-dev</code>部分，而不是默认的<code class="code">require</code>部分。</p>        </li><li class="list__item" id="5bf8865b"><p>单击<span class="control">安装</span> 。</p></li></ol></section>        </div>        <div class="chapter"><h3 id="configuring-tool-manually">手动配置PHP代码嗅探器</h3>            <p id="34543e2d">您可以使用手动下载的本地PHP代码质量工具脚本或与PHP解释器关联的脚本。可以有许多本地和远程PHP解释器，在“ <span class="control">设置/首选项”</span>对话框的<a href="php.html"><span>PHP</span></a>页面上指定的解释器被视为“ <span class="emphasis">项目默认”</span> 。在<a href="configuring-remote-interpreters.html"><span>配置远程PHP解释器</span></a>或<a href="configuring-local-interpreter.html"><span>配置本地PHP解释</span></a>器中了解有关配置PHP解释器的更多信息。</p>                    <section class="procedure-steps"><h2 id="62d563fb">选择要使用的PHP Code Sniffer脚本</h2><ol class="list _decimal"><li class="list__item" id="2ad317e8">                <p id="18d1b578">在“ <span class="control">设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）中，导航到“ <span class="menupath" data-skip-index="skip">语言和框架”| PHP |质量工具</span> 。</p>            </li><li class="list__item" id="dd796488">                <p id="e4c0b087">在打开的“ <a href="php-quality-tools.html"><span>质量工具”</span></a>页面上，展开“ <span class="control">代码嗅探器”</span>区域。从<span class="control">配置</span>列表中，</p><p id="36ed3a8a">选择PHP Code Sniffer脚本：</p>        <ul class="list _bullet"><li class="list__item" id="4c496bb2"><p>要使用与特定远程PHP解释器关联的脚本，请选择此解释器的名称。</p></li><li class="list__item" id="a7b9dc50"><p>要使用本地脚本，请选择“ <span class="control">本地”</span> 。在这种情况下，无论在项目中使用哪个PHP解释器（本地或远程），都将执行本地PHP代码嗅探器。请注意，只能有一个PHP代码嗅探<span class="emphasis">本地</span>配置，因为IntelliJ IDEA的运行（用于Windows或Linux和MacOS <span class="filepath">phpcs</span> <span class="filepath">phpcs.bat）</span>的脚本包含对PHP引擎的路径。</p></li><li class="list__item" id="67e80448"><p>要使用与默认项目解释程序关联的脚本，即在<span class="control">“设置/首选项”</span>对话框的<span class="control">PHP</span>页面上选择的<span class="control">脚本</span> ，请选择<span class="control">“默认项目解释程序”</span> 。</p></li></ul>                                </li></ol></section>                        <section class="procedure-steps"><h2 id="b888c790">配置本地PHP Code Sniffer脚本</h2><ol class="list _decimal"><li class="list__item" id="5c68ae56">                <p id="53c2f75f">下载并安装<a href="https://github.com/squizlabs/PHP_CodeSniffer" data-bypass="yes" target="_blank"><span>PHP Code Sniffer</span></a>脚本。</p>                <p id="13e06f93">要检查PHP Code Sniffer安装，请切换到安装目录并运行以下命令：</p>                <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">phpcs --version</code></div>                <p id="5aef595d">如果该工具可用，您将收到以下格式的消息：</p><div class="code-block" data-lang="Shell"><code class="code-block__wrapper">Squiz的PHP_CodeSniffer版本&lt;版本&gt; <span class="o">（</span>稳定<span class="o">）</span> 。
<span class="o">（</span> http://www.squiz.net <span class="o">）</span></code></div>                                                                        <p id="b196db26">要根据您自己的自定义编码标准检查代码，请<a href="http://pear.php.net/manual/en/package.php.php-codesniffer.coding-standard-tutorial.php" data-bypass="yes" target="_blank"><span>创建它</span></a> 。将规则和<span class="filepath">ruleset.xml</span>文件存储在<span class="emphasis">编码标准</span>根目录中。</p>                                            </li><li class="list__item" id="fd498996">                <p id="fdb306de">在IntelliJ IDEA中注册本地PHP Code Sniffer脚本：</p>                <ul class="list _alpha-lower"><li class="list__item" id="c12e0172">                        <p id="e591fedd">在“ <span class="control">设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）中，导航到“ <span class="menupath" data-skip-index="skip">语言和框架”| PHP |质量工具</span> 。</p>                    </li><li class="list__item" id="7a0c303b"><p>在打开的“ <a href="php-quality-tools.html"><span>质量工具”</span></a>页面上，展开“ <span class="control">代码嗅探器”</span>区域，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.ellipsis.svg@2x.png" width="16" alt="浏览按钮">在<span class="control">配置</span>列表旁边。</p></li><li class="list__item" id="cb1bc8a8">                        <p id="f0111e89">在打开的<span class="control">PHP Code Sniffer</span>对话框中，在<span class="control">PHP Code Sniffer路径</span>字段中指定<span class="filepath">phpcs.bat</span>或<span class="filepath">phpcs</span> PHP Code Sniffer可执行文件的位置。手动键入路径或单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.openDisk.svg@2x.png" width="16" alt="浏览按钮">并在打开的对话框中选择相关文件夹。</p>                        <p id="98867d9b">要检查<span class="filepath">phpcs.bat</span>或<span class="filepath">phpcs</span>的指定路径<span class="filepath">是否</span>确保IntelliJ IDEA和PHP Code Sniffer之间的交互，也就是说，该工具可以从IntelliJ IDEA启动，IntelliJ IDEA将从中接收问题报告，单击<span class="control">Validate</span>按钮。此验证等同于运行<code class="code">phpcs --version</code>命令。如果验证成功通过，IntelliJ IDEA将显示检测到的PHP Code Sniffer版本的信息。</p>                    </li></ul>            </li></ol></section>                <section class="procedure-steps"><h2 id="e262bdba">配置与PHP解释器关联的PHP Code Sniffer脚本</h2><ol class="list _decimal"><li class="list__item" id="b02b5e98">                    <p id="0c0b15c1">在“ <span class="control">设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）中，转到“ <span class="menupath" data-skip-index="skip">语言和框架”| PHP |质量工具</span> 。</p>                </li><li class="list__item" id="0e8831d2">                                            <p id="1e2791ed">在打开的“ <a href="php-quality-tools.html"><span>质量工具”</span></a>页面上，展开“ <span class="control">代码嗅探器”</span>区域，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.ellipsis.svg@2x.png" width="16" alt="浏览按钮">在<span class="control">配置</span>列表旁边。将打开“ <span class="control">PHP代码嗅探器”</span>对话框，其中显示左侧窗格中所有已配置的PHP代码嗅探器脚本的列表，其中一个是<span class="emphasis">Local</span>类型，另一个是以与脚本关联的PHP解释器命名的。点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="添加按钮">在工具栏上。</p>                            </li><li class="list__item" id="c3aaaabf">                                    <p id="fe190a3c">在打开<span class="control">的“远程解释器</span>的<span class="control">PHP代码嗅探器”</span>对话框中，选择远程PHP解释器以使用相关的脚本。如果列表中不包含相关解释器，请单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.ellipsis.svg@2x.png" width="16" alt="浏览按钮">并在<span class="control">CLI解释器</span>对话框中<a href="configuring-remote-interpreters.html"><span>配置远程解释器</span></a> ，如<a href="configuring-remote-interpreters.html"><span>配置远程PHP解释器中所述</span></a> 。</p>        <p id="0e074910">单击“ <span class="control">确定”后</span> ，IntelliJ IDEA将返回到“ <span class="control">PHP代码嗅探器”</span>对话框，其中新的<span class="emphasis">PHP代码嗅探器</span>配置已添加到列表中，右侧窗格显示所选的远程PHP解释器，即与之关联的PHP代码嗅探器的路径它和高级PHP Code Sniffer选项。</p>                    </li></ol></section>        </div>        <div class="chapter"><h3 id="configuring-advanced-options">配置高级PHP Code Sniffer选项</h3>            <p id="b55017c3">IntelliJ IDEA允许您指定高级PHP Code Sniffer选项，从而根据计算机的配置和使用的规则集微调PHP Code Sniffer流程行为。</p>                    <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="ec55de40">                <p id="72dddabd">在“ <span class="control">设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）中，导航到“ <span class="menupath" data-skip-index="skip">语言和框架”| PHP |质量工具</span> 。</p>            </li><li class="list__item" id="9efc91ff"><p>在打开的“ <a href="php-quality-tools.html"><span>质量工具”</span></a>页面上，展开“ <span class="control">代码嗅探器”</span>区域。在“ <span class="control">每个文件</span>的<span class="control">最大邮件数”</span>字段中，设置要为文件报告的邮件总数的上限。超出此限制的所有消息都将被拒绝，并且IntelliJ IDEA将在执行<a href="inspection-results-tool-window.html"><span>检查</span></a>后在编辑器选项卡或<a href="inspection-results-tool-window.html"><span>检查结果工具窗口中</span></a>显示警告消息。</p></li><li class="list__item" id="c35ca35d"><p>在“ <span class="control">工具进程超时”</span>字段中，指定IntelliJ IDEA等待PHP代码嗅探器结果的时间长度，然后执行该进程以防止过多的CPU和内存使用。</p></li><li class="list__item" id="60df371b"><p>如有必要，在<span class="control">PHP Code Beautifier和Fixer Settings</span>区域中， <span class="control">在phpcbf路径</span>字段中提供<a href="https://github.com/squizlabs/PHP_CodeSniffer/wiki/Fixing-Errors-Automatically#using-the-php-code-beautifier-and-fixer" data-bypass="yes" target="_blank"><span>PHP Code Beautifier和Fixer</span></a>工具的<span class="control">路径</span> 。这将允许您自动修复PHP Code Sniffer检测到的许多错误。如果<a href="using-php-code-sniffer.html#installing-code-sniffer-composer">使用Composer安装PHP Code Sniffer，</a>将自动检测并设置<span class="emphasis">PHP Code Beautifier和Fixer</span> 。</p></li></ol></section>            </div>    </div>    <div class="chapter"><h2 id="enabling-tool-inspection" data-toc="Using_PHP_Code_Sniffer#enabling-tool-inspection">将PHP Code Sniffer配置为IntelliJ IDEA检查</h2>        <section class="procedure-steps"><h2 id="7e943abf">手动配置PHP Code Sniffer检查</h2><ol class="list _decimal"><li class="list__item" id="cbefbda4">                <p id="0a6c7683">在“ <span class="control">设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）中，单击“ <span class="control">编辑器”</span>下的<span class="control">“</span> <span class="control">检查</span> <span class="control">”</span> 。</p>            </li><li class="list__item" id="7ae7e7dc"><p>在打开的<a href="inspections-settings.html"><span>Inspections</span></a>页面上，展开<span class="menupath" data-skip-index="skip">PHP |质量工具</span>节点，然后选中<span class="control">PHP Code Sniffer验证</span>旁边的复选框。</p></li><li class="list__item" id="475a7220">                <p id="411dff92">在页面的右侧窗格中，使用“ <span class="control">选项”</span>区域中的控件配置PHP代码嗅探器工具：</p>                <ol class="list _decimal"><li class="list__item" id="ac14e08c"><p>从<span class="control">Severity</span>列表中，选择PHP Code Sniffer检查的<a href="configuring-inspection-severities.html">严重性级别</a> 。所选值确定IntelliJ IDEA处理检测到的差异的严重程度，并在<a href="running-inspections.html">检查结果中显示</a> 。</p></li><li class="list__item" id="695bd866"><p>从“ <span class="control">范围”</span>列表中，选择要将检查应用程序限制为的<a href="scope.html">范围</a> 。</p></li><li class="list__item" id="7c1e2909"><p>在<span class="control">带有扩展名</span>的<span class="control">检查文件</span>字段中，提供应由PHP Code Sniffer检查的以逗号分隔的文件扩展名列表。</p></li><li class="list__item" id="b0972d1b"><p>要让PHP Code Sniffer报告除错误之外的警告，请选中<span class="control">Show warnings as ...</span>复选框，然后从列表中选择<a href="configuring-inspection-severities.html">严重性程度</a> 。要仅报告错误并取消报告警告，请清除<span class="control">“将警告显示为...”</span>复选框。</p></li><li class="list__item" id="63b7c2f0"><p>如果您依赖于自定义的第三方编码标准（例如， <a href="https://www.drupal.org/project/coder" data-bypass="yes" target="_blank"><span>Coder</span></a>或<a href="https://docs.joomla.org/Joomla_CodeSniffer#2._Install_Joomla_Coding_Standards" data-bypass="yes" target="_blank"><span>Joomla编码标准</span></a> ），则需要在使用之前将其与PHP Code Sniffer集成。为此，请选中“ <span class="control">已安装的标准路径”</span>复选框，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.openDisk.svg@2x.png" width="16" alt="浏览按钮"> ，并在打开的对话框中选择自定义标准安装目录。</p></li><li class="list__item" id="947c4b08"><p>选择<span class="control">显示嗅探名称</span>复选框，以便在编辑器或<a href="running-inspections.html">检查结果</a>中显示相应的嗅探名称。</p></li><li class="list__item" id="7c5d200e">                        <p id="appointCodingStyle">指定编码标准申请。</p>                        <ul class="list _ul"><li class="list__item" id="bd337bde"><p>要使用其中一个预定义的<a href="http://pear.php.net/manual/en/package.php.php-codesniffer.coding-standard-tutorial.php" data-bypass="yes" target="_blank"><span>编码标准</span></a> ，请选择<span class="control">编码标准</span>列表，指定编码样式以检查您的代码。该列表包含安装在主<span class="filepath">php_codesniffer</span>目录结构中的所有编码标准。</p></li><li class="list__item" id="559e7ec2">                                <p id="d4b6f073">要根据<a href="http://pear.php.net/manual/en/package.php.php-codesniffer.coding-standard-tutorial.php" data-bypass="yes" target="_blank"><span>您之前定义的编码标准</span></a>检查代码，请选择“ <span class="control">自定义”</span> 。点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.ellipsis.svg@2x.png" width="16" alt="浏览按钮">在打开的“ <span class="control">自定义编码标准”</span>对话框中，在“ <span class="control">规则集路径”</span>字段中指定自己的编码标准的<span class="filepath">ruleset.xml</span>文件的<span class="control">路径</span> 。手动键入路径或单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.ellipsis.svg@2x.png" width="16" alt="浏览按钮">并在<a href="select-path-dialog.html">打开</a>的<a href="select-path-dialog.html">对话框中</a>选择相关文件夹。</p>                            </li></ul>                    </li></ol>            </li></ol></section>        <div class="chapter"><h3 id="configure-tool-inspection-composer">使用Composer配置PHP代码嗅探器检查</h3>                    <p id="d31a7c26">您可以在<span class="filepath">composer.json</span>的<a href="https://getcomposer.org/doc/articles/scripts.md" data-bypass="yes" target="_blank"><span>scripts</span></a>部分中包含有关默认和自定义PHP Code Sniffer规则集的信息。<a href="using-the-composer-dependency-manager.html#addingDependencies">安装</a>或<a href="using-the-composer-dependency-manager.html#updating-dependencies">更新</a>项目依赖项时，将检测指定的规则集，并自动启用<span class="emphasis">PHP Code Sniffer验证</span>检查。</p>        <p id="03b63223">如果在<span class="filepath">composer.json</span>的<code class="code">scripts</code>部分中未指定规则集，则IntelliJ IDEA将另外检查项目根目录以找到具有<span class="filepath">phpcs.xml</span>默认名称的规则集。如果文件存在，它将自动选为检查的<span class="emphasis">自定义</span>规则集。</p>                        <section class="procedure-steps"><h2 id="de81159a">使用Composer配置PHP Code Sniffer检查</h2><ul class="list _no-style"><li class="list__item" id="64a6d21f">                <p id="323389b7">在<span class="filepath">composer.json</span>的<code class="code">scripts</code>部分中，将<code class="code">phpcs</code> PHP Code Sniffer启动命令添加到其中一个叶元素中。</p>                                    <p id="1caf94a2">提供<code class="code">--standard</code>参数来表示使用的编码标准。例如，添加以下记录将编码标准设置为<span class="emphasis">PSR2</span> ：</p>                    <div class="code-block" data-lang="JSON"><code class="code-block__wrapper"><span class="s2">“scripts”</span> <span class="err">：</span> <span class="p">{</span> <span class="nt">“phpcs”</span> <span class="p">：</span> <span class="s2">“phpcs --standard = PSR2”</span> <span class="p">}</span></code></div>                    <p id="63efdaff">添加以下记录会将编码标准设置为<span class="emphasis">Custom</span> ，将规则集的路径设置为<span class="filepath">&lt;project root&gt; /phpcs.xml</span> ：</p>                    <div class="code-block" data-lang="JSON"><code class="code-block__wrapper"><span class="s2">“scripts”</span> <span class="err">：</span> <span class="p">{</span> <span class="nt">“phpcs”</span> <span class="p">：</span> <span class="s2">“phpcs --standard = phpcs.xml”</span> <span class="p">}</span></code></div>                                                            </li></ul><p id="bd14b8b7">此外，您可以在<span class="filepath">composer.json</span>的<code class="code">require-dev</code>部分中提供自定义的非PSR标准依赖项，以自动检测它。目前，支持以下标准：</p><ul class="list _horizontal" data-columns="3"><li class="list__item" id="6025ff97"><p>                    <a href="https://github.com/doctrine/coding-standard" data-bypass="yes" target="_blank"><span>教义</span></a>                </p></li><li class="list__item" id="40a8cc39"><p>                    <a href="https://www.drupal.org/project/coder" data-bypass="yes" target="_blank"><span>Drupal Coder</span></a>                </p></li><li class="list__item" id="8793a885"><p>                    <a href="https://github.com/joomla/coding-standards" data-bypass="yes" target="_blank"><span>的Joomla</span></a>                </p></li><li class="list__item" id="82ed6078"><p>                    <a href="https://github.com/magento-ecg/coding-standard" data-bypass="yes" target="_blank"><span>Magento的</span></a>                </p></li><li class="list__item" id="8ce2cec5"><p>                    <a href="https://github.com/wikimedia/mediawiki-tools-codesniffer" data-bypass="yes" target="_blank"><span>链接到MediaWiki</span></a>                </p></li><li class="list__item" id="edce44c3"><p>                    <a href="https://github.com/PHPCompatibility/PHPCompatibility" data-bypass="yes" target="_blank"><span>PHPCompatibility</span></a>                </p></li><li class="list__item" id="0b74be27"><p>                    <a href="https://github.com/djoos/Symfony-coding-standard" data-bypass="yes" target="_blank"><span>Symfony的</span></a>                </p></li><li class="list__item" id="e5e5e5e7"><p>                    <a href="https://github.com/WordPress-Coding-Standards/WordPress-Coding-Standards" data-bypass="yes" target="_blank"><span>WordPress的</span></a>                </p></li><li class="list__item" id="adfad7b7"><p>                    <a href="https://github.com/yiisoft/yii2-coding-standards" data-bypass="yes" target="_blank"><span>警予</span></a>                </p></li></ul></section>            </div>    </div>    <div class="chapter"><h2 id="fixing-issues" data-toc="Using_PHP_Code_Sniffer#fixing-issues">修复PHP Code Sniffer检测到的问题</h2>        <p id="f38da9eb">IntelliJ IDEA与<a href="https://github.com/squizlabs/PHP_CodeSniffer/wiki/Fixing-Errors-Automatically#using-the-php-code-beautifier-and-fixer" data-bypass="yes" target="_blank"><span>PHP Code Beautifier和Fixer</span></a>工具集成，可以修复许多检测到的问题。如果<a href="using-php-code-sniffer.html#installing-code-sniffer-composer">使用Composer安装PHP Code Sniffer，</a>将自动检测并设置<span class="emphasis">PHP Code Beautifier和Fixer</span> 。否则，您需要<a href="using-php-code-sniffer.html#configuring-advanced-options">手动设置它</a> 。</p>        <section class="procedure-steps"><h2 id="fix-issues-by-quickfix">使用quickfix修复问题</h2><p id="0bb7f446">检测到问题后，IntelliJ IDEA会根据PHP Code Sniffer <a href="using-php-code-sniffer.html#enabling-tool-inspection">检查设置</a>突出显示该问题。</p><ol class="list _decimal"><li class="list__item" id="5c91a95c"><p>将插入符号放在检测到的问题上，然后单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.intentionBulb.svg@2x.png" width="16" alt="意图操作按钮"> ，或按<kbd data-primary_default="Alt+Enter" data-primary_default_for_gnome="Alt+Enter" data-primary_default_for_kde="Alt+Enter" data-primary_default_for_xwin="Alt+Enter" data-primary_emacs="Alt+Enter" data-primary_jbuilder="Alt+Enter" data-primary_visual_studio="Alt+Enter" data-primary_netbeans="Alt+Enter" data-primary_eclipse="Alt+Enter" data-secondary_mac_os_x_10.5_="⌥⏎" data-secondary_mac_os_x="⌥⏎" data-secondary_eclipse_mac_os_x="⌘1" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌥⏎">Alt + Enter</kbd> 。</p></li><li class="list__item" id="7833f75f">                <p id="d97b315e">选择<span class="control">PHP Code Beautifier和Fixer：</span>从弹出菜单中<span class="control">修复整个文件</span> 。请注意，这将修复当前文件中检测到的所有问题。</p>            </li></ol><p id="a5e601de">您还可以<a href="using-php-code-sniffer.html#running-tool-in-batch-mode">在批处理模式下</a>检测问题，或通过<a href="using-php-code-sniffer.html#fix-issues-code-cleanup">代码清理</a>自动修复它们。</p></section>        <section class="procedure-steps"><h2 id="fix-issues-code-cleanup">使用代码清理自动修复问题</h2><ol class="list _decimal"><li class="list__item" id="9271fe94"><p>从主菜单中，选择<span class="control">Analyze |代码清理</span> 。</p></li><li class="list__item" id="54090ca7"><p>在打开的“ <a href="specify-code-cleanup-scope-dialog.html">指定代码清理范围”</a>对话框中，选择要将检查配置文件应用到的范围。</p></li><li class="list__item" id="6e86c9e9">                <p id="4cd13d09">从列表中选择检验配置文件，或单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.ellipsis.svg@2x.png" width="16" alt="浏览按钮">在打开的<a href="inspections-settings.html">“代码清理检查”</a>对话框中配置新的配置文件。你也可以点击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.ellipsis.svg@2x.png" width="16" alt="浏览按钮">检查将应用哪些修复程序，并确保启用了<span class="emphasis">PHP Code Sniffer验证</span>检查。</p>                <figure><img alt="代码清理检查对话框" title="代码清理检查对话框" src="../img/idea/2019.1/ps_code_cleanup_inspections_dialog.png" id="914194b6" width="726" height="878"></figure>            </li><li class="list__item" id="7c181979"><p>单击“ <span class="control">确定”</span>以启动代码清理。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="running-tool-in-batch-mode" data-toc="Using_PHP_Code_Sniffer#running-tool-in-batch-mode">在批处理模式下运行PHP代码嗅探器</h2>                <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="becea5b1"><p>                通过选择<span class="menupath" data-skip-index="skip">Code |来</span> <a href="running-inspections.html">运行检查</a> <span class="menupath" data-skip-index="skip">检查</span>主菜单上的<span class="menupath" data-skip-index="skip">代码</span> 。指定检查范围和配置文件。</p></li><li class="list__item" id="d84a7cfe"><p>在<a href="inspection-results-tool-window.html"><span>检验结果工具窗口中</span></a>查看检验结果。PHP Code Sniffer报告的错误和警告以<code class="code">phpcs</code>为前缀，以区别于IntelliJ IDEA内部检查。</p></li></ol></section>        </div>    <div class="chapter"><h2 id="72634541" data-toc="Using_PHP_Code_Sniffer#72634541">从PHP Code Sniffer检查中排除文件</h2>                                <p id="0c905948">等待PHP Code Sniffer响应超过<span class="control">PHP Code Sniffer</span>对话框中<span class="control">Tool tool timeout</span>字段中指定的限制时，IntelliJ IDEA会建议将该文件添加到<span class="emphasis">忽略列表中</span> 。</p>        <section class="procedure-steps"><h2 id="d486d345">管理被忽略的文件</h2><ol class="list _decimal"><li class="list__item" id="d8d1f866">                <p id="5ec053d9">在“ <span class="control">设置/首选项”</span>对话框（ <kbd data-primary_default="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_jbuilder="N/A" data-primary_visual_studio="Alt+F7" data-primary_netbeans="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-secondary_mac_os_x_10.5_="⌘," data-secondary_mac_os_x="⌘," data-secondary_eclipse_mac_os_x="⌘," data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌃⌥S">Ctrl + Alt + S</kbd> ）中，导航到“ <span class="menupath" data-skip-index="skip">语言和框架”| PHP |质量工具</span> 。</p>            </li><li class="list__item" id="d5b64d2d">                <p id="2bda69bf">在打开的“ <a href="php-quality-tools.html"><span>质量工具”</span></a>页面上，展开“ <span class="control">代码嗅探器”</span>区域，然后单击“ <span class="control">显示忽略的文件”</span>链接。</p>                <ul class="list _ul"><li class="list__item" id="c8de0960"><p>要添加文件，请单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.add.svg@2x.png" width="16" alt="添加按钮">并在打开的对话框中找到所需的文件。</p></li><li class="list__item" id="d8024720"><p>要从列表中删除文件并让PHP Code Sniffer再次处理它，请选择该文件并单击<img class="inline-icon-16" src="../img/idea/2019.1/icons.general.remove.svg@2x.png" width="16" alt="删除按钮"> 。</p></li><li class="list__item" id="17687939"><p>要从列表中删除所有文件，请单击“ <span class="control">清除列表”</span>按钮<img class="inline-icon-16" src="../img/idea/2019.1/icons.actions.close.svg@2x.png" width="16" alt="关闭按钮"> 。</p></li></ul>            </li></ol></section>        </div>    <div class="last-modified" data-skip-index="skip">最后修改日期：2019年3月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__next" href="using-php-mess-detector.html">PHP Mess Detector</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>也可以看看</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>程序：</h3><ul class="list"><li class="list__item"><a href="code-inspection.html"><span>代码检查</span></a></li><li class="list__item"><a href="using-the-composer-dependency-manager.html"><span>Composer依赖管理器</span></a></li><li class="list__item"><a href="php-specific-guidelines.html"><span>PHP</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>参考：</h3><ul class="list"><li class="list__item"><a href="php-quality-tools.html#php_quality_tools_code_sniffer">Code Sniffer</a></li><li class="list__item"><a href="inspections-settings.html"><span>检查</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="../app/v2/app.js"></script></body></html>
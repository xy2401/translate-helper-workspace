<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="If you do not want to use the WALLET_ROOT and TDE_CONFIGURATION parameters to configure the keystore location, then you can use the sqlnet.ora file."></meta>
      <meta name="description" content="If you do not want to use the WALLET_ROOT and TDE_CONFIGURATION parameters to configure the keystore location, then you can use the sqlnet.ora file."></meta>
      <title>使用sqlnet.ora配置透明数据加密密钥库</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Security Guide "></meta>
      <meta property="og:description" content="If you do not want to use the WALLET_ROOT and TDE_CONFIGURATION parameters to configure the keystore location, then you can use the sqlnet.ora file."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Security Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="advanced-security-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-13T09:26:12-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96301-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-transparent-data-encryption-with-other-oracle-features.html" title="Previous" type="text/html"></link>
      <link rel="next" href="frequently-asked-questions-about-transparent-data-encryption.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Advanced Security Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ASOAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-transparent-data-encryption-with-other-oracle-features.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="frequently-asked-questions-about-transparent-data-encryption.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级安全指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="asopart1.html" property="item" typeof="WebPage"><span property="name">使用透明数据加密</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用sqlnet.ora配置透明数据加密密钥库</li>
            </ol>
            <a id="GUID-692F595E-77D7-4E77-9875-8516BDC9811A" name="GUID-692F595E-77D7-4E77-9875-8516BDC9811A"></a>
            
            <h2 id="ASOAG-GUID-692F595E-77D7-4E77-9875-8516BDC9811A" class="sect2"><span class="enumeration_chapter">9</span>使用sqlnet.ora配置透明数据加密密钥库</h2>
         </header>
         <div class="ind">
            <div>
               <p>如果您不想使用<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code>参数来配置密钥库位置，则可以使用<code class="codeph">sqlnet.ora</code>文件。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-DF9504EF-BA08-4585-895D-2E5F4BA30E50">关于sqlnet.ora文件中的密钥库位置</a><br>Oracle建议您使用<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code>参数来配置密钥库位置，但另一种方法是配置<code class="codeph">sqlnet.ora</code>文件。
                  </li>
                  <li class="ulchildlink"><a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-278422A5-1F77-4E82-B4A1-578F03AE30FD">为软件密钥库位置配置sqlnet.ora文件</a><br><code class="codeph">sqlnet.ora</code>文件可用于配置常规文件系统的密钥库位置，多个数据库访问以及与Oracle自动存储管理（ASM）一起使用。
                  </li>
                  <li class="ulchildlink"><a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-446E7F4A-D122-4533-B194-60383F128B53">示例：为常规文件系统配置软件密钥库</a><br>您可以为常规文件系统配置软件密钥库。
                  </li>
                  <li class="ulchildlink"><a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-0DDFCEB4-3331-4475-90F2-2092AAB5CFF3">示例：当多个数据库共享sqlnet.ora文件时配置软件密钥库</a><br>您可以配置多个数据库以共享<code class="codeph">sqlnet.ora</code>文件。
                  </li>
                  <li class="ulchildlink"><a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-C55E491B-5C30-406E-BDCF-67B87C5A0F00">示例：为Oracle自动存储管理磁盘组配置软件密钥库</a><br>您可以为Oracle自动存储管理（ASM）磁盘组配置<code class="codeph">sqlnet.ora</code> 。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="asopart1.html" title="第一部分介绍了如何使用透明数据加密。">使用透明数据加密</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-DF9504EF-BA08-4585-895D-2E5F4BA30E50" name="GUID-DF9504EF-BA08-4585-895D-2E5F4BA30E50"></a><h3 id="ASOAG-GUID-DF9504EF-BA08-4585-895D-2E5F4BA30E50" class="sect3">关于sqlnet.ora文件中的密钥库位置</h3>
               <div>
                  <p>Oracle建议您使用<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code>参数来配置密钥库位置，但另一种方法是配置<code class="codeph">sqlnet.ora</code>文件。
                  </p>
                  <p>但是，如果您确实要配置<code class="codeph">sqlnet.ora</code>文件，请注意建议使用<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code>参数的基于实例初始化文件的方法。它避免了使用<code class="codeph">sqlnet.ora</code>时可能出现的配置不一致的可能性，因为每次连接到数据库都会重新读取<code class="codeph">sqlnet.ora</code>参数文件的内容。使用基于实例初始化文件的方法，因为<code class="codeph">WALLET_ROOT</code>参数在数据库实例启动时只读取一次，所以不存在不一致的风险。在多租户环境中，使用<code class="codeph">WALLET_ROOT</code>初始化参数初始化参数比使用<code class="codeph">sqlnet.ora</code>更<code class="codeph">WALLET_ROOT</code> ，因为它使每个租户PDB能够执行独立的管理操作。
                  </p>
                  <p>如果尚未设置<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code>初始化参数，则Oracle数据库会检查<code class="codeph">sqlnet.ora</code>文件以获取密钥库的目录位置。这适用于密钥库是软件密钥库，硬件模块安全性（HSM）密钥库还是Oracle密钥库密钥库。您必须编辑<code class="codeph">sqlnet.ora</code>文件以定义计划创建的密钥库的目录位置。确保预先存在此目录。优选地，该目录应该是空的。
                  </p>
                  <p>必须在Oracle Real Application Clusters（Oracle RAC）或多租户环境中编辑<code class="codeph">sqlnet.ora</code>文件时，请注意以下行为：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">在Oracle RAC环境中：</span>如果要使用<code class="codeph">srvctl</code>实用程序，并且要在<code class="codeph">sqlnet.ora</code>配置文件中包含环境变量，则必须在操作系统和<code class="codeph">srvctl</code>环境中设置这些环境变量。Oracle建议您将密钥库放在共享文件系统上，例如Oracle自动存储管理（ASM）或NFS。</p>
                     </li>
                     <li>
                        <p><span class="bold">在多租户环境中：</span>如果在多租户环境中将<code class="codeph">sqlnet.ora</code>用于TDE配置，则仅支持联合模式。仅当<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code>参数用于TDE配置时，才支持隔离模式。
                        </p>
                     </li>
                  </ul>
                  <p>在<code class="codeph">sqlnet.ora</code>文件中，必须设置<code class="codeph">ENCRYPTION_WALLET_LOCATION</code>参数以指定密钥库位置。但是，请注意，不推荐使用<code class="codeph">ENCRYPTION_WALLET_LOCATION</code> ，从Oracle Database版本19c开始，支持使用<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code>初始化参数。
                  </p>
                  <p>默认情况下， <code class="codeph">sqlnet.ora</code>文件位于<code class="codeph">$ORACLE_BASE/network/admin</code>目录（如果设置了<code class="codeph">ORACLE_BASE</code>环境变量）或<code class="codeph">$ORACLE_HOME/network/admin</code>位置，或者位于<code class="codeph">TNS_ADMIN</code>环境变量设置的位置。确保已正确设置<code class="codeph">TNS_ADMIN</code>环境变量以指向正确的<code class="codeph">sqlnet.ora</code>文件。如果未在<code class="codeph">sqlnet.ora</code>文件中设置密钥库位置，则<code class="codeph">V$ENCRYPTION_WALLET</code>视图将显示默认位置。您可以在<code class="codeph">V$ENCRYPTION_WALLET</code>视图中检查密钥库的位置和状态。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-transparent-data-encryption.html#GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870" title="TDE密钥库的搜索顺序取决于您如何设置实例初始化参数，sqlnet.ora参数或环境变量。">透明数据加密密钥库搜索顺序</a></li>
                        <li><a href="../sqpug/SQL-Plus-quick-start.html#SQPUG-GUID-D65BD2EF-72C6-4E61-812B-9FFCAAF6F305" target="_blank"><span><cite>SQL * Plus用户指南和参考</cite></span></a></li>
                        <li><a href="../netrf/parameters-for-the-sqlnet.ora.html#NETRF-GUID-897ABB80-64FE-4F13-9F8C-99361BB4465C" target="_blank"><span><cite>Oracle数据库网络服务参考</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-692F595E-77D7-4E77-9875-8516BDC9811A" title="如果您不想使用WALLET_ROOT和TDE_CONFIGURATION参数来配置密钥库位置，则可以使用sqlnet.ora文件。">使用sqlnet.ora配置透明数据加密密钥库</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-278422A5-1F77-4E82-B4A1-578F03AE30FD" name="GUID-278422A5-1F77-4E82-B4A1-578F03AE30FD"></a><h3 id="ASOAG-GUID-278422A5-1F77-4E82-B4A1-578F03AE30FD" class="sect3">为软件密钥库位置配置sqlnet.ora文件</h3>
               <div>
                  <p><code class="codeph">sqlnet.ora</code>文件可用于配置常规文件系统的密钥库位置，多个数据库访问以及与Oracle自动存储管理（ASM）一起使用。
                  </p>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>要在常规文件系统上创建软件密钥库，请在编辑<code class="codeph">sqlnet.ora</code>文件时使用以下格式：</p><pre class="oac_no_warn" dir="ltr">ENCRYPTION_WALLET_LOCATION =（SOURCE =（METHOD = <span class="bold">FILE</span> ）（METHOD_DATA =（DIRECTORY = <span class="italic"><span class="bold">path_to_keystore</span></span> ）））</pre></li>
                     </ul>
                     <p>如果<span class="bold"><span class="italic"><code class="codeph">path_to_keystore</code></span></span>将包含环境变量，则在启动数据库实例的环境中以及启动数据库之前设置此变量。如果使用<code class="codeph">srvctl</code>实用程序启动数据库，则使用以下命令在<code class="codeph">srvctl</code>环境中设置环境变量：</p><pre class="oac_no_warn" dir="ltr">srvctl setenv database -db <span class="italic">database_name</span> -env“ <span class="italic">environment_variable_name</span> = <span class="italic">environment_variable_value</span> ”</pre><div class="infoboxnote" id="GUID-278422A5-1F77-4E82-B4A1-578F03AE30FD__GUID-B79444D2-B51E-44E5-964A-295361C73693">
                        <p class="notep1">注意：</p>从Oracle Database 19c版开始，不推荐使用<code class="codeph">ENCRYPTION_WALLET_LOCATION</code>参数。而是使用<code class="codeph">WALLET_ROOT</code>静态初始化参数和<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数来配置钱包位置。<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code>可用于常规文件系统，多数据库访问和ASM。</div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-transparent-data-encryption.html#GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002" title="您必须通过在数据库实例中的init.ora和TDE_CONFIGURATION中设置WALLET_ROOT来配置密钥库位置和类型。">步骤1：配置软件密钥库位置和类型</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-692F595E-77D7-4E77-9875-8516BDC9811A" title="如果您不想使用WALLET_ROOT和TDE_CONFIGURATION参数来配置密钥库位置，则可以使用sqlnet.ora文件。">使用sqlnet.ora配置透明数据加密密钥库</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-446E7F4A-D122-4533-B194-60383F128B53" name="GUID-446E7F4A-D122-4533-B194-60383F128B53"></a><h3 id="ASOAG-GUID-446E7F4A-D122-4533-B194-60383F128B53" class="sect3">示例：为常规文件系统配置软件密钥库</h3>
               <div>
                  <p>您可以为常规文件系统配置软件密钥库。</p>
                  <p>以下示例说明如何在<code class="codeph">sqlnet.ora</code>文件中为数据库名称为<code class="codeph">orcl</code>的常规文件系统配置软件密钥库位置。
                  </p><pre class="oac_no_warn" dir="ltr">ENCRYPTION_WALLET_LOCATION =（SOURCE =（METHOD = FILE）（METHOD_DATA =（DIRECTORY = / etc / ORACLE / WALLETS / orcl）））</pre><div class="infoboxnote" id="GUID-446E7F4A-D122-4533-B194-60383F128B53__GUID-D6A766AC-A00A-49B9-AA4C-6465B609B62B">
                     <p class="notep1">注意：</p>从Oracle Database 19c版开始，不推荐使用<code class="codeph">ENCRYPTION_WALLET_LOCATION</code>参数。而是使用<code class="codeph">WALLET_ROOT</code>静态初始化参数和<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数来配置钱包位置。
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-transparent-data-encryption.html#GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002" title="您必须通过在数据库实例中的init.ora和TDE_CONFIGURATION中设置WALLET_ROOT来配置密钥库位置和类型。">步骤1：配置软件密钥库位置和类型</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-692F595E-77D7-4E77-9875-8516BDC9811A" title="如果您不想使用WALLET_ROOT和TDE_CONFIGURATION参数来配置密钥库位置，则可以使用sqlnet.ora文件。">使用sqlnet.ora配置透明数据加密密钥库</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-0DDFCEB4-3331-4475-90F2-2092AAB5CFF3" name="GUID-0DDFCEB4-3331-4475-90F2-2092AAB5CFF3"></a><h3 id="ASOAG-GUID-0DDFCEB4-3331-4475-90F2-2092AAB5CFF3" class="sect3">示例：当多个数据库共享sqlnet.ora文件时配置软件密钥库</h3>
               <div>
                  <p>您可以配置多个数据库以共享<code class="codeph">sqlnet.ora</code>文件。
                  </p>
                  <p>以下示例说明如何在多个数据库共享<code class="codeph">sqlnet.ora</code>文件时配置软件密钥库位置。
                  </p><pre class="oac_no_warn" dir="ltr">ENCRYPTION_WALLET_LOCATION =（SOURCE =（METHOD = FILE）（METHOD_DATA =（DIRECTORY = / etc / ORACLE / WALLETS / $ ORACLE_SID /）））</pre><div class="infoboxnote" id="GUID-0DDFCEB4-3331-4475-90F2-2092AAB5CFF3__GUID-3512285D-5AF1-414E-A03E-FF140490F638">
                     <p class="notep1">注意：</p>从Oracle Database 19c版开始，不推荐使用<code class="codeph">ENCRYPTION_WALLET_LOCATION</code>参数。而是使用<code class="codeph">WALLET_ROOT</code>静态初始化参数和<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数来配置钱包位置。您应该为每个数据库单独设置这些参数。
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-transparent-data-encryption.html#GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002" title="您必须通过在数据库实例中的init.ora和TDE_CONFIGURATION中设置WALLET_ROOT来配置密钥库位置和类型。">步骤1：配置软件密钥库位置和类型</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-692F595E-77D7-4E77-9875-8516BDC9811A" title="如果您不想使用WALLET_ROOT和TDE_CONFIGURATION参数来配置密钥库位置，则可以使用sqlnet.ora文件。">使用sqlnet.ora配置透明数据加密密钥库</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-C55E491B-5C30-406E-BDCF-67B87C5A0F00" name="GUID-C55E491B-5C30-406E-BDCF-67B87C5A0F00"></a><h3 id="ASOAG-GUID-C55E491B-5C30-406E-BDCF-67B87C5A0F00" class="sect3">示例：为Oracle自动存储管理磁盘组配置软件密钥库</h3>
               <div>
                  <p>您可以为Oracle自动存储管理（ASM）磁盘组配置<code class="codeph">sqlnet.ora</code> 。
                  </p>
                  <p>如果要在ASM磁盘组上创建软件密钥库位置，以下格式显示如何配置软件密钥库：</p><pre class="oac_no_warn" dir="ltr">ENCRYPTION_WALLET_LOCATION =（SOURCE =（METHOD = FILE）（METHOD_DATA =（DIRECTORY = + <span class="italic">disk_group_name / path_within_the_ASM_diskgroup</span> ）））</pre><div class="infoboxnote" id="GUID-C55E491B-5C30-406E-BDCF-67B87C5A0F00__GUID-E81FD257-C060-4296-A8D2-A585DECD1C45">
                     <p class="notep1">注意：</p>从Oracle Database 19c版开始，不推荐使用<code class="codeph">ENCRYPTION_WALLET_LOCATION</code>参数。而是使用<code class="codeph">WALLET_ROOT</code>静态初始化参数和<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数来配置钱包位置。
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" title="您可以在自动存储管理（ASM）磁盘组上存储软件密钥库。">配置自动存储管理的密钥库</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-692F595E-77D7-4E77-9875-8516BDC9811A" title="如果您不想使用WALLET_ROOT和TDE_CONFIGURATION参数来配置密钥库位置，则可以使用sqlnet.ora文件。">使用sqlnet.ora配置透明数据加密密钥库</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
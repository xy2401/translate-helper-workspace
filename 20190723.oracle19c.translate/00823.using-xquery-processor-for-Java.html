<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="An explanation is given of how to use the Oracle XML Developer&#39;s Kit (XDK) XQuery processor for Java."></meta>
      <meta name="description" content="An explanation is given of how to use the Oracle XML Developer&#39;s Kit (XDK) XQuery processor for Java."></meta>
      <title>使用XQuery Processor for Java</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="An explanation is given of how to use the Oracle XML Developer&#39;s Kit (XDK) XQuery processor for Java."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-developers-kit-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:58:48-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96292-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-XSLT-processor-for-Java.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-xquery-API-for-Java-to-access-XML-DB.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML Developers Kit Programmers Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDK"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-XSLT-processor-for-Java.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-xquery-API-for-Java-to-access-XML-DB.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XDK-for-Java.html" property="item" typeof="WebPage"><span property="name">Oracle XML Developer's Kit for Java</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用XQuery Processor for Java</li>
            </ol>
            <a id="GUID-9E6570F0-37BB-4690-BFF6-A2052B5B57E8" name="GUID-9E6570F0-37BB-4690-BFF6-A2052B5B57E8"></a><a id="ADXDK991"></a><a id="ADXDK99930"></a>
            
            <h2 id="ADXDK-GUID-9E6570F0-37BB-4690-BFF6-A2052B5B57E8" class="sect2"><span class="enumeration_chapter">15</span>使用XQuery Processor for Java</h2>
         </header>
         <div class="ind">
            <div>
               <p>解释了如何使用Oracle XML Developer Kit（XDK）XQuery处理器来实现Java。</p>
               <div class="section"> </div>
               <!-- class="section" -->
            </div><a id="ADXDK114"></a><a id="ADXDK99995"></a><div class="props_rev_3"><a id="GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA" name="GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA"></a><h3 id="ADXDK-GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA" class="sect3">Java的XQuery处理器简介</h3>
               <div>
                  <p>XDK提供独立的XQuery处理器供Java应用程序使用。XQuery是可扩展标记语言（XML）的万维网联盟（W3C）标准查询语言。使用XQuery在Java应用程序中处理XML可以提高开发人员的工作效率和应用程序性能。</p>
                  <p>使用XQuery编写的应用程序通常需要的代码更少，运行速度更快，并且使用的内存比使用Java编写的应用程序少。</p>
                  <p>JSR 225：XQuery API for Java（XQJ）定义了如何从Java应用程序执行查询。要使用XQJ，您的应用程序必须使用Java 1.6版运行。此外，这些JAR文件是必需的：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">jlib / oxquery.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">jlib / xqjapi.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">jlib / orai18n-mapping.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">LIB / xmlparserv2.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">XDK / jlib /阿帕奇-xmlbeans.jar</code></p>
                     </li>
                  </ul>
                  <p>这些Java Archive（JAR）文件的目录路径相对于Oracle Database安装的<code class="codeph">ORACLE_HOME</code>目录。
                  </p>
                  <p><a href="using-xquery-processor-for-Java.html#GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA__BAJCCHIC">例15-1</a>显示了如何使用XQuery API for Java（XQJ）执行简单的“Hello World”查询。由于XQuery处理器直接在Java虚拟机（JVM）中运行，因此您无需运行此示例的数据库或服务器。该示例打印输出<code class="codeph">&lt;hello-world&gt;2&lt;/hello-world&gt;</code> 。
                  </p>
                  <p>本章介绍特定于XQuery的Oracle实现的功能和扩展。有关XQuery和XQJ的一般信息记录在本文档之外。</p>
                  <div class="infoboxnotealso" id="GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA__GUID-77A75716-1BC7-4010-9469-D56F11AA3588">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a> ， <code class="codeph">XQuery Packages</code> ，用于相关的API文档</p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=jcp_org_jsr225" target="_blank"><span class="italic">JSR-000225用于Java的XQuery API</span></a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquery_30" target="_blank"><span class="italic">XQuery 3.0：XML查询语言</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnote" id="GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA__GUID-B3707335-F147-4DA1-9F43-DFB701A6152C">
                     <p class="notep1">注意：</p>
                     <p>Oracle还将XQuery和XQJ实现为Oracle XML DB的一部分。有关<a href="using-xquery-API-for-Java-to-access-XML-DB.html#GUID-DDFFD115-A115-4B6C-805C-350AF78281EB" title="An explanation is given of how to use the XQuery API for Java (XQJ) to access Oracle XML DB.">Oracle XML DB</a>的详细信息，请参阅<a href="using-xquery-API-for-Java-to-access-XML-DB.html#GUID-DDFFD115-A115-4B6C-805C-350AF78281EB" title="解释了如何使用XQuery API for Java（XQJ）来访问Oracle XML DB。">使用XQuery API for Java访问</a> Oracle XML DB。</p>
                  </div>
                  <div class="example" id="GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA__BAJCCHIC">
                     <p class="titleinexample">例15-1使用XQJ进行简单查询</p><pre class="oac_no_warn" dir="ltr">import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。XQSequence都; import oracle.xml.xquery。OXQDataSource; public class HelloWorld {public static void main（String [] args）throws XQException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; String query =“&lt;hello-world&gt; {1 + 1} &lt;/ hello-world&gt;”; XQPreparedExpression expr = con.prepareExpression（query）; XQSequence result = expr.executeQuery（）; //打印“ <code class="codeph">&lt;hello-world&gt;2&lt;/hello-world&gt;</code> ”System.out.println（result.getSequenceAsString（null））; result.close（）; expr.close（）; con.close（）; }}</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADXDK115"></a><div class="props_rev_3"><a id="GUID-5E83610F-647D-4AE5-801B-878244FB6949" name="GUID-5E83610F-647D-4AE5-801B-878244FB6949"></a><h3 id="ADXDK-GUID-5E83610F-647D-4AE5-801B-878244FB6949" class="sect3">XQJ实体解决方案</h3>
               <div>
                  <p>XDK使用实体解析器框架扩展XQJ，以控制在查询处理期间如何获取文档，模式，模块，排序规则和外部函数。本节中的示例显示如何将实体解析器用于多种类型的实体。</p>
                  <p>请参阅类<code class="codeph">oracle.xml.xquery.<a href="../jaxml/index.html" target="_blank"><span><cite>Oracle数据库XML Java API参考</cite></span></a>中的OXQEntity</code> ，以获取查询处理器可以请求的实体类型的完整列表。</p>
               </div><a id="ADXDK116"></a><a id="ADXDK117"></a><a id="ADXDK118"></a><a id="ADXDK112"></a><div class="props_rev_3"><a id="GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2" name="GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2"></a><h4 id="ADXDK-GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2" class="sect4">解决fn：doc的文件</h4>
                  <div>
                     <p>本节中的示例显示了如何使用实体解析器来确定XQuery函数<code class="codeph">fn:doc</code>返回的<code class="codeph">fn:doc</code> 。
                     </p>
                     <div class="section">
                        <p><a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJEEDAJ">例15-2</a>显示了<code class="codeph">books.xml</code>的内容。
                        </p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFFCBB">例15-3</a>显示<code class="codeph">books.xq</code>的内容。
                        </p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFDEDF">示例15-4</a>显示了如何使用自定义实体解析程序执行查询<code class="codeph">books.xq</code> 。
                        </p>
                        <p><code class="codeph">MyEntityResolver</code>的实例通过在连接上设置它来传递给XQuery处理器。XQuery处理器在查询处理期间调用实体解析器以获取<code class="codeph">fn:doc</code>函数返回的<code class="codeph">fn:doc</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJEEDAJ">
                        <p class="titleinexample">例15-2 books.xml</p><pre class="oac_no_warn" dir="ltr">&lt;books&gt; &lt;book&gt; &lt;title&gt;权力的游戏&lt;/ title&gt; &lt;author&gt; &lt;first&gt; George &lt;/ first&gt; &lt;last&gt; Martin &lt;/ last&gt; &lt;/ author&gt; &lt;price&gt; 10.99 &lt;/ price&gt; &lt;/书&gt; &lt;书&gt; &lt;title&gt;地球的支柱&lt;/ title&gt; &lt;author&gt; &lt;first&gt; Ken &lt;/ first&gt; &lt;last&gt; Follett &lt;/ last&gt; &lt;/ author&gt; &lt;price&gt; 7.99 &lt;/ price&gt; &lt;/书&gt; &lt;/ books&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFFCBB">
                        <p class="titleinexample">例15-3 books.xq</p><pre class="oac_no_warn" dir="ltr">for fn：doc（'books.xml'）/ books / book其中xs：decimal（$ book / price）gt 10.00返回$ book / title</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFDEDF">
                        <p class="titleinexample">示例15-4使用自定义实体解析程序执行查询</p><pre class="oac_no_warn" dir="ltr">import java.io.文件; import java.io.的FileInputStream; import java.io.IOException异常; import java.net。URI; import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。XQSequence都; import javax.xml.xquery。了XQStaticContext; import oracle.xml.xquery。OXQConnection; import oracle.xml.xquery。OXQDataSource; import oracle.xml.xquery。OXQEntity; import oracle.xml.xquery。OXQEntityKind; import oracle.xml.xquery。OXQEntityLocator; import oracle.xml.xquery。OXQEntityResolver; import oracle.xml.xquery。OXQEntityResolverRequestOptions; import oracle.xml.xquery。OXQView; public class ResolveDocument {private static class MyEntityResolver extends OXQEntityResolver {@Override public OXQEntity resolveEntity（OXQEntityKind kind，OXQEntityLocator locator，OXQEntityResolverRequestOptions options）抛出IOException {if（kind == OXQEntityKind。DOCUMENT）{URI systemId = locator.getSystemIdAsURI（）; if（“file”.equals（systemId.getScheme（）））{File file = new File（systemId）; FileInputStream input = new FileInputStream（file）; OXQEntity结果=新的OXQEntity（输入）; result.enlistCloseable（输入）;返回结果;返回null; public static void main（String [] args）抛出XQException，IOException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; // OXQView用于访问XQJ对象上的Oracle扩展。OXQConnection ocon = OXQView.getConnection（con）; ocon.setEntityResolver（new MyEntityResolver（））;文件查询=新文件（“books.xq”）; //在调用实体解析器之前，将针对基URI解析相对URI。//将根据此URI解析查询中使用的相对URI“books.xml”。 XQStaticContext ctx = con.getStaticContext（）; ctx.setBaseURI（query.toURI（）的toString（））; FileInputStream queryInput = new FileInputStream（query）; XQPreparedExpression expr = con.prepareExpression（queryInput，ctx）; queryInput.close（）; XQSequence result = expr.executeQuery（）; //打印“ <code class="codeph">&lt;title&gt;A Game of Thrones&lt;/title&gt;</code> ”System.out.println（result.getSequenceAsString（null））; result.close（）; expr.close（）; con.close（）; }}</pre><p>该示例生成此输出：</p><pre class="oac_no_warn" dir="ltr">&lt;title&gt;权力的游戏&lt;/ title&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK188"></a><a id="ADXDK189"></a><a id="ADXDK108"></a><a id="ADXDK187"></a><div class="props_rev_3"><a id="GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF" name="GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF"></a><h4 id="ADXDK-GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF" class="sect4">外部XQuery函数的解析</h4>
                  <div>
                     <p>您可以使用实体解析程序来定义XQuery外部函数的实现。</p>
                     <div class="section">
                        <p>对于在查询中声明的每个外部XQuery函数，使用实体类<code class="codeph">oracle.xml.xquery.调用实体解析器<code class="codeph">oracle.xml.xquery.OXQEntityKind。EXTERNAL_FUNCTION</code> 。 <code class="codeph">oracle.xml.xquery.在对实体解析器的调用中传递的OXQEntityLocator</code>实例提供XQuery函数的名称及其参数类型。然后，实体解析器可以返回任何扩展<code class="codeph">oracle.xml.xquery.类<code class="codeph">oracle.xml.xquery.OXQFunctionEvaluator</code>并具有公共构造函数。然后，XQuery处理器实例化返回的类。在计算XQuery外部函数调用时，调用方法<code class="codeph">evaluate()</code> 。
                        </p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJIFHBB">例15-5</a>显示了一个XQuery查询，它是文件<code class="codeph">trim.xq</code>的内容。
                        </p>
                        <p>外部XQuery函数<code class="codeph">util:trim</code>从字符串值的开头和结尾删除空格。此函数在Java中实现，并在查询中调用。
                        </p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJFAIFJ">例15-6</a>使用了<code class="codeph">trim.xq</code>并展示了如何定义外部XQuery函数的实现。此示例中的实体解析程序返回一个扩展<code class="codeph">OXQFunctionEvaluator</code>的类。
                        </p>
                        <p>在某些情况下，返回Java静态方法而不是类更方便。返回静态方法时，查询处理器会自动将方法参数和返回值映射到XQuery数据模型，如XQJ规范所定义。</p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJEJAGB">例15-7</a>也运行<code class="codeph">trim.xq</code> ，但在这种情况下，外部函数绑定到Java静态方法。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJIFHBB">
                        <p class="titleinexample">例15-5 trim.xq</p><pre class="oac_no_warn" dir="ltr">declare namespace util =“http://example.com/util”;声明函数util：trim（$ arg as xs：string）as xs：string external; （：带有周围空白区域的字符串:)声明变量$ input：=“John Doe”; &lt;结果&gt; {UTIL：修剪（$输入）} &lt;/结果&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJFAIFJ">
                        <p class="titleinexample">例15-6定义外部XQuery函数的实现</p><pre class="oac_no_warn" dir="ltr">import java.io.的FileInputStream; import java.io.IOException异常; import java.util。集合; import javax.xml.namespace。QName的; import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。XQSequence都; import oracle.xml.xquery。OXQConnection; import oracle.xml.xquery。OXQDataSource; import oracle.xml.xquery。OXQEntity; import oracle.xml.xquery。OXQEntityKind; import oracle.xml.xquery。OXQEntityLocator; import oracle.xml.xquery。OXQEntityResolver; import oracle.xml.xquery。OXQEntityResolverRequestOptions; import oracle.xml.xquery。OXQFunctionContext; import oracle.xml.xquery。OXQFunctionEvaluator; import oracle.xml.xquery。OXQFunctionMetaData; import oracle.xml.xquery。OXQView; public class ResolveExternalFunction {public static class TrimFunction extends OXQFunctionEvaluator {@Override public XQSequence evaluate（OXQFunctionContext context，XQSequence [] params）throws XQException {XQConnection con = context.getConnection（）; XQSequence arg = params [0]; String value = arg.getSequenceAsString（null）; String trimmed = value.trim（）; return con.createSequence（Collections.singleton（trimmed）.iterator（））;私有静态类MyEntityResolver扩展OXQEntityResolver {@Override public OXQEntity resolveEntity（OXQEntityKind kind，OXQEntityLocator locator，OXQEntityResolverRequestOptions选项）抛出XQException，IOException {if（kind == OXQEntityKind。EXTERNAL_FUNCTION）{OXQFunctionMetaData metaData =（OXQFunctionMetaData）locator.getExtension（）; QName name = metaData.getName（）; int arity = metaData.getParameterTypes（）。length; if（“http://example.com/util”.equals（name.getNamespaceURI（））&amp;&amp;“trim”.equals（name.getLocalPart（））&amp;&amp; arity == 1）{return new OXQEntity（TrimFunction.class） ;返回null; public static void main（String [] args）抛出IOException，XQException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; OXQConnection ocon = OXQView.getConnection（con）; ocon.setEntityResolver（new MyEntityResolver（））; FileInputStream query = new FileInputStream（“trim.xq”）; XQPreparedExpression expr = con.prepareExpression（query）; query.close（）; XQSequence result = expr.executeQuery（）;的System.out.println（result.getSequenceAsString（空））; result.close（）; expr.close（）; con.close（）; }}</pre><p>该示例打印此输出： <code class="codeph">&lt;result&gt;John Doe&lt;/result&gt;</code> 。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJEJAGB">
                        <p class="titleinexample">示例15-7将外部函数绑定到Java静态方法</p><pre class="oac_no_warn" dir="ltr">import java.io.的FileInputStream; import java.io.IOException异常; import java.lang.reflect。方法; import javax.xml.namespace。QName的; import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。XQSequence都; import oracle.xml.xquery。OXQConnection; import oracle.xml.xquery。OXQDataSource; import oracle.xml.xquery。OXQEntity; import oracle.xml.xquery。OXQEntityKind; import oracle.xml.xquery。OXQEntityLocator; import oracle.xml.xquery。OXQEntityResolver; import oracle.xml.xquery。OXQEntityResolverRequestOptions; import oracle.xml.xquery。OXQFunctionMetaData; import oracle.xml.xquery。OXQView; public class ResolveExternalFunction2 {public static String trim（String value）{return value.trim（）; private static class MyEntityResolver extends OXQEntityResolver {@Override public OXQEntity resolveEntity（OXQEntityKind kind，OXQEntityLocator locator，OXQEntityResolverRequestOptions options）抛出XQException，IOException {if（kind == OXQEntityKind。EXTERNAL_FUNCTION）{OXQFunctionMetaData metaData =（OXQFunctionMetaData）locator.getExtension（）; QName name = metaData.getName（）; int arity = metaData.getParameterTypes（）。length; if（“http://example.com/util”.equals（name.getNamespaceURI（））&amp;&amp;“trim”.equals（name.getLocalPart（））&amp;&amp; arity == 1）{Method staticMethod = null; try {staticMethod = ResolveExternalFunction2.class.getMethod（“trim”，String.class）; } catch（NoSuchMethodException e）{throw new IllegalStateException（e）; } return new OXQEntity（staticMethod）;返回null; public static void main（String [] args）抛出IOException，XQException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; OXQConnection ocon = OXQView.getConnection（con）; ocon.setEntityResolver（new MyEntityResolver（））; FileInputStream query = new FileInputStream（“trim.xq”）; XQPreparedExpression expr = con.prepareExpression（query）; query.close（）; XQSequence result = expr.executeQuery（）; //打印“&lt;result&gt; John Doe &lt;/ result&gt;”System.out.println（result.getSequenceAsString（null））; result.close（）; expr.close（）; con.close（）; }}</pre><p>该示例打印与<a href="using-xquery-processor-for-Java.html#GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJFAIFJ">示例15-6</a>相同的输出： <code class="codeph">&lt;result&gt;John Doe&lt;/result&gt;</code> 。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK110"></a><a id="ADXDK111"></a><a id="ADXDK113"></a><a id="ADXDK109"></a><div class="props_rev_3"><a id="GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0" name="GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0"></a><h4 id="ADXDK-GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0" class="sect4">解决导入的XQuery模块</h4>
                  <div>
                     <p>实体解析器可以找到XQuery库模块导入的XQuery模块。</p>
                     <p>XQuery库模块提供可由其他模块导入的函数和变量。对于每个导入的模块，使用实体类型<code class="codeph">oracle.xml.xquery.调用实体解析器<code class="codeph">oracle.xml.xquery.OXQEntityKind。MODULE</code> 。使用<code class="codeph">oracle.xml.xquery.OXQEntityLocator</code>实例中，您可以调用<code class="codeph">getSystemId()</code>方法来获取正在导入的模块的位置。如果模块导入中未提供任何位置，则可以调用方法<code class="codeph">getNamespace()</code>以获取模块的目标命名空间。然后，实体解析器可以返回相应的库模块。
                     </p>
                     <p>本节中的示例显示了如何使用实体解析程序来控制XQuery库模块的分辨率。</p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJHBFFI">例15-8</a>显示了<code class="codeph">math.xq</code>的内容。
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJDCFCE">例15-9</a>显示了<code class="codeph">main.xq</code>的内容。
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJDGAIF">示例15-10</a>显示了如何执行导入库模块的查询。
                     </p>
                     <p>查询<code class="codeph">main.xq</code>导入库模块<code class="codeph">math.xq</code> ，然后调用函数<code class="codeph">math:circumference</code>来计算圆周长。
                     </p>
                     <div class="example" id="GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJHBFFI">
                        <p class="titleinexample">例15-8 math.xq</p><pre class="oac_no_warn" dir="ltr">module namespace math =“http://example.com/math”;声明变量$ math：pi as xs：decimal：= 3.14159265;声明函数math：circumference（$ diameter as xs：decimal）{$ math：pi * $ diameter};</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJDCFCE">
                        <p class="titleinexample">例15-9 main.xq</p><pre class="oac_no_warn" dir="ltr">“math.xq”中的import module namespace math =“http://example.com/math”;数学：周长（6.54）</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJDGAIF">
                        <p class="titleinexample">示例15-10执行导入库模块的查询</p><pre class="oac_no_warn" dir="ltr">import java.io.文件; import java.io.的FileInputStream; import java.io.IOException异常; import java.net。URI; import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。XQSequence都; import javax.xml.xquery。了XQStaticContext; import oracle.xml.xquery。OXQConnection; import oracle.xml.xquery。OXQDataSource; import oracle.xml.xquery。OXQEntity; import oracle.xml.xquery。OXQEntityKind; import oracle.xml.xquery。OXQEntityLocator; import oracle.xml.xquery。OXQEntityResolver; import oracle.xml.xquery。OXQEntityResolverRequestOptions; import oracle.xml.xquery。OXQView; public class ResolveLibraryModule {private static class MyEntityResolver extends OXQEntityResolver {@Override public OXQEntity resolveEntity（OXQEntityKind kind，OXQEntityLocator locator，OXQEntityResolverRequestOptions options）抛出IOException {if（kind == OXQEntityKind。MODULE）{URI systemId = locator.getSystemIdAsURI（）; if（systemId！= null &amp;&amp;“file”.equals（systemId.getScheme（）））{File file = new File（systemId）; FileInputStream input = new FileInputStream（file）; OXQEntity结果=新的OXQEntity（输入）; result.enlistCloseable（输入）;返回结果;返回null; public static void main（String [] args）抛出XQException，IOException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; // OXQView用于访问XQJ对象上的Oracle扩展。OXQConnection ocon = OXQView.getConnection（con）; ocon.setEntityResolver（new MyEntityResolver（））;文件查询=新文件（“main.xq”）; //在调用实体解析器之前，将针对基URI解析相对URI。//将根据此URI解析查询中使用的相对URI“math.xq”。 XQStaticContext ctx = con.getStaticContext（）; ctx.setBaseURI（query.toURI（）的toString（））; FileInputStream queryInput = new FileInputStream（query）; XQPreparedExpression expr = con.prepareExpression（queryInput，ctx）; queryInput.close（）; XQSequence result = expr.executeQuery（）; //打印结果：“20.546015931”System.out.println（result.getSequenceAsString（null））; result.close（）; expr.close（）; con.close（）; }}</pre><p>该示例生成此输出：</p><pre class="oac_no_warn" dir="ltr">20.546015931</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK102"></a><a id="ADXDK103"></a><a id="ADXDK104"></a><a id="ADXDK101"></a><div class="props_rev_3"><a id="GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935" name="GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935"></a><h4 id="ADXDK-GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935" class="sect4">解决由XQuery查询导入的XML模式</h4>
                  <div>
                     <p>您可以使用实体解析程序来控制XQuery查询导入的XML架构。</p>
                     <p>XQuery模式导入从XML模式导入元素定义和元素和属性的声明。您可以在查询中使用导入的声明和定义来验证和测试数据实例。</p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJBFCBH">例15-11</a>显示了XML模式文件<code class="codeph">size.xsd</code>的内容。
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJIDADH">例15-12</a>显示了XQuery文件<code class="codeph">size.xq</code>的内容。
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJBEEGC">示例15-13</a>显示了如何执行导入架构的查询。
                     </p>
                     <p><code class="codeph">size.xq</code>使用类型<code class="codeph">shirt-size</code>所限定<code class="codeph">size.xsd</code>测试值的列表。
                     </p>
                     <div class="example" id="GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJBFCBH">
                        <p class="titleinexample">例15-11 size.xsd</p><pre class="oac_no_warn" dir="ltr">&lt;xs：schema xmlns：xs =“http://www.w3.org/2001/XMLSchema”targetNamespace =“http://example.com/size”&gt; &lt;xs：simpleType name =“shirt-size”&gt; &lt; xs：restriction base =“xs：string”&gt; &lt;xs：enumeration value =“XS”/&gt; &lt;xs：enumeration value =“S”/&gt; &lt;xs：enumeration value =“M”/&gt; &lt;xs：enumeration value = “L”/&gt; &lt;xs：枚举值=“XL”/&gt; &lt;/ xs：restriction&gt; &lt;/ xs：simpleType&gt; &lt;/ xs：schema&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJIDADH">
                        <p class="titleinexample">例15-12 size.xq</p><pre class="oac_no_warn" dir="ltr">在“size.xsd”处导入架构名称空间ns =“http://example.com/size”;对于$ size（“S”，“big”，“XL”，42）返回if（$ size castable as ns：shirt-size）然后ns：shirt-size（$ size）else concat（“INVALID：”， $大小）</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJBEEGC">
                        <p class="titleinexample">示例15-13执行导入XML架构的XQuery查询</p><pre class="oac_no_warn" dir="ltr">import java.io.文件; import java.io.的FileInputStream; import java.io.IOException异常; import java.net。URI; import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。XQSequence都; import javax.xml.xquery。了XQStaticContext; import oracle.xml.xquery。OXQConnection; import oracle.xml.xquery。OXQDataSource; import oracle.xml.xquery。OXQEntity; import oracle.xml.xquery。OXQEntityKind; import oracle.xml.xquery。OXQEntityLocator; import oracle.xml.xquery。OXQEntityResolver; import oracle.xml.xquery。OXQEntityResolverRequestOptions; import oracle.xml.xquery。OXQView; public class ResolveSchema {private static class MyEntityResolver extends OXQEntityResolver {@Override public OXQEntity resolveEntity（OXQEntityKind kind，OXQEntityLocator locator，OXQEntityResolverRequestOptions options）抛出IOException {if（kind == OXQEntityKind。SCHEMA）{URI systemId = locator.getSystemIdAsURI（）; if（systemId！= null &amp;&amp;“file”.equals（systemId.getScheme（）））{File file = new File（systemId）; FileInputStream input = new FileInputStream（file）; OXQEntity结果=新的OXQEntity（输入）; result.enlistCloseable（输入）;返回结果;返回null; public static void main（String [] args）抛出XQException，IOException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; // OXQView用于访问XQJ对象上的Oracle扩展。OXQConnection ocon = OXQView.getConnection（con）; ocon.setEntityResolver（new MyEntityResolver（））;文件查询=新文件（“size.xq”）; //在调用实体解析器之前，将针对基URI解析相对URI。//将根据此URI解析查询中使用的相对URI“math.xq”。 XQStaticContext ctx = con.getStaticContext（）; ctx.setBaseURI（query.toURI（）的toString（））; FileInputStream queryInput = new FileInputStream（query）; XQPreparedExpression expr = con.prepareExpression（queryInput，ctx）; queryInput.close（）; XQSequence result = expr.executeQuery（）; //打印“S INVALID：big XL INVALID：42”System.out.println（result.getSequenceAsString（null））; result.close（）; expr.close（）; con.close（）; }}</pre><p>该示例打印此输出： <code class="codeph">S INVALID:big XL INVALID:42</code> 。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK107"></a><a id="ADXDK106"></a><div class="props_rev_3"><a id="GUID-93E92988-81E7-4591-9F18-631525C86F1B" name="GUID-93E92988-81E7-4591-9F18-631525C86F1B"></a><h4 id="ADXDK-GUID-93E92988-81E7-4591-9F18-631525C86F1B" class="sect4">XQuery的预制实体解析器</h4>
                  <div>
                     <p>XDK包含多个<code class="codeph">OXQEntityResolver</code>实现，可用于常见任务，如文件系统和HTTP解析。这有时可以节省您需要实现自己的实体解析器。
                     </p>
                     <div class="section">
                        <p><a href="using-xquery-processor-for-Java.html#GUID-93E92988-81E7-4591-9F18-631525C86F1B__BAJBBBBH">例15-14</a>显示了如何使用预制文件解析器在<a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFFCBB">例15-3中</a>运行查询。
                        </p>
                        <p>工厂<code class="codeph">oracle.xml.xquery.一个实例<code class="codeph">oracle.xml.xquery.OXQFileResolverFactory</code>是从连接创建的。然后，此工厂用于创建实体解析程序，该解析程序根据文件系统解析模式，模块和文档。与此示例相反， <a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFDEDF">示例15-4</a>使用自定义实体解析程序<code class="codeph">MyEntityResolver</code>仅解析文件系统的文档。
                        </p>
                        <p>XDK提供这些实体解析器工厂：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">oracle.xml.xquery。OXQFileResolverFactory</code> ：创建一个实体解析器，解析模式，模块和文档位置的'file：'URI。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.xml.xquery。OXQHttpResolverFactory</code> ：创建一个实体解析器，用于解析模式，模块和文档位置的“http：”URI。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.xml.xquery。OXQCompositeResolverFactory</code> ：创建一个实体解析器，将请求委托给其他实体解析器。对于任何类型的请求，解析器返回从其中一个委托解析器接收的第一个非空结果。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.xml.xquery。OXQJavaResolverFactory</code> ：创建一个实体解析器，将外部函数和模块解析为Java静态方法或类。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-93E92988-81E7-4591-9F18-631525C86F1B__GUID-37F46B28-93FE-4626-9687-3CE8D39A4AD7">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a> ，包<code class="codeph">oracle.xml.xquery</code> ，用于获取有关这些工厂接口的API信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-93E92988-81E7-4591-9F18-631525C86F1B__BAJBBBBH">
                        <p class="titleinexample">示例15-14使用预制文件解析程序执行查询</p><pre class="oac_no_warn" dir="ltr">import java.io.文件; import java.io.的FileInputStream; import java.io.IOException异常; import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。XQSequence都; import javax.xml.xquery。了XQStaticContext; import oracle.xml.xquery。OXQConnection; import oracle.xml.xquery。OXQDataSource; import oracle.xml.xquery。OXQFileResolverFactory; import oracle.xml.xquery。OXQView; public class ResolverFactory {public static void main（String [] args）抛出XQException，IOException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; // OXQView用于访问XQJ对象上的Oracle扩展。OXQConnection ocon = OXQView.getConnection（con）; OXQFileResolverFactory factory = ocon.createEntityResolverFactory（OXQFileResolverFactory.class）; ocon.setEntityResolver（factory.createResolver（））;文件查询=新文件（“books.xq”）; //在调用实体解析器之前，将针对基URI解析相对URI。//将根据此URI解析查询中使用的相对URI“books.xml”。 XQStaticContext ctx = con.getStaticContext（）; ctx.setBaseURI（query.toURI（）的toString（））; FileInputStream queryInput = new FileInputStream（query）; XQPreparedExpression expr = con.prepareExpression（queryInput，ctx）; queryInput.close（）; XQSequence result = expr.executeQuery（）; //打印“&lt;title&gt;权力的游戏&lt;/ title&gt;”System.out.println（result.getSequenceAsString（null））; result.close（）; expr.close（）; con.close（）; }}</pre><p>该示例打印此输出： <code class="codeph">&lt;title&gt;A Game of Thrones&lt;/title&gt;</code> 。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-05361BD0-575E-4021-A099-86AB7DF83A2B" name="GUID-05361BD0-575E-4021-A099-86AB7DF83A2B"></a><h4 id="ADXDK-GUID-05361BD0-575E-4021-A099-86AB7DF83A2B" class="sect4">解决其他类型的实体</h4>
                  <div>
                     <p>除了文档，模式，模块和外部函数之外，您还可以使用XQJ实体解析程序来获取其他实体。</p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-05361BD0-575E-4021-A099-86AB7DF83A2B__GUID-08201187-0EB8-4C60-9998-4DDCBB022AA6" title="描述各种类型的实体。">表15-1</a>描述了这些其他实体。
                     </p>
                     <div class="tblformal" id="GUID-05361BD0-575E-4021-A099-86AB7DF83A2B__GUID-08201187-0EB8-4C60-9998-4DDCBB022AA6">
                        <p class="titleintable">表15-1各种实体的描述</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="各种实体的描述" border="1" summary="Describes various types of entity." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d53703e1158">OXQEntityKind</th>
                                 <th align="left" valign="bottom" width="20%" id="d53703e1160">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1164" headers="d53703e1158 "><code class="codeph">文本</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1164 d53703e1160 "><code class="codeph">fn:unparsed-text</code>和<code class="codeph">fn:unparsed-text-lines</code> 。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1176" headers="d53703e1158 "><code class="codeph">ENVIRONMENT_VARIABLE</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1176 d53703e1160 "><code class="codeph">fn:available-environment-variables</code>和<code class="codeph">fn:environment-variable</code> 。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1188" headers="d53703e1158 "><code class="codeph">DOCUMENT_TYPE</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1188 d53703e1160 ">函数<code class="codeph">fn:doc</code>静态类型。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1197" headers="d53703e1158 "><code class="codeph">采集</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1197 d53703e1160 "><code class="codeph">fn:collection</code>返回的文档。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1206" headers="d53703e1158 "><code class="codeph">URI_COLLECTION</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1206 d53703e1160 "><code class="codeph">fn:uri-collection</code>返回的<code class="codeph">fn:uri-collection</code> 。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1215" headers="d53703e1158 "><code class="codeph">XML_PARSER_FACTORY</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1215 d53703e1160 ">用于解析XML数据的StAX实现。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1221" headers="d53703e1158 "><code class="codeph">XML_ENTITY</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1221 d53703e1160 ">在StAX解析器需要解析外部XML资源时使用。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1227" headers="d53703e1158 "><code class="codeph">UPD_PUT</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1227 d53703e1160 ">控制<code class="codeph">fn:put</code>的行为。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1236" headers="d53703e1158 "><code class="codeph">整理</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1236 d53703e1160 ">控制归类URI的行为。</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>有关如何使用这些实体类型的详细信息，请参阅类<code class="codeph">oracle.xml.xquery.<a href="../jaxml/index.html" target="_blank"><span><cite>Oracle数据库XML Java API参考中的</cite></span></a> OXQEntity</code> 。
                     </p>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535" name="GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535"></a><h3 id="ADXDK-GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535" class="sect3">XQuery输出声明</h3>
               <div>
                  <p>XQuery 3.0定义了输出声明，您可以使用它来设置查询中的序列化参数值。</p>
                  <p>输出声明是名称空间<code class="codeph">http://www.w3.org/2010/xslt-xquery-serialization</code>的选项声明。您可以在查询中使用它来声明和设置静态上下文中的序列化参数。
                  </p>
                  <p>默认情况下，忽略这些静态上下文序列化参数，但可以使用XQJ方法<code class="codeph">OXQPreparedExpression#getExpressionStaticContext()</code>和<code class="codeph">OXQStaticContext#getSerializationParameters()</code>来访问它们。
                  </p>
                  <p><a href="using-xquery-processor-for-Java.html#GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__ACCESSINGTHEVALUESOFOPTIONDECLARATI-AB3FDA80">例15-15</a>显示了如何访问选项声明的值。
                  </p>
                  <p>您还可以在序列化查询结果时使用选项声明。<a href="using-xquery-processor-for-Java.html#GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__USINGOPTIONDECLARATIONSWHENSERIALIZ-AB3FD4F9">示例15-16</a>与<a href="using-xquery-processor-for-Java.html#GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__ACCESSINGTHEVALUESOFOPTIONDECLARATI-AB3FDA80">示例15-15</a>类似，但它在序列化查询结果时使用静态上下文序列化参数。
                  </p>
                  <div class="infoboxnote" id="GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__GUID-451D1906-2A81-45B0-9E55-4C838105C0C1">
                     <p class="notep1">注意：</p>选项<code class="codeph">output:parameter-document</code>的URI值<code class="codeph">output:parameter-document</code>文档使用实体解析器<code class="codeph">OXQEntityResolver</code>和实体类型<code class="codeph">OXQEntityKind#DOCUMENT</code> <a href="using-xquery-processor-for-Java.html#GUID-05361BD0-575E-4021-A099-86AB7DF83A2B" title="You can use the XQJ entity resolver to obtain other entities, besides documents, schemas, modules, and external functions.">解析为</a> <code class="codeph">OXQEntityKind#DOCUMENT</code> - 请参阅<a href="using-xquery-processor-for-Java.html#GUID-05361BD0-575E-4021-A099-86AB7DF83A2B" title="除了文档，模式，模块和外部函数之外，您还可以使用XQJ实体解析程序来获取其他实体。">其他实体类型的解析</a> 。
                  </div>
                  <div class="example" id="GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__ACCESSINGTHEVALUESOFOPTIONDECLARATI-AB3FDA80">
                     <p class="titleinexample">示例15-15访问选项声明的值</p><pre class="pre codeblock"><code>import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。了XQStaticContext; import oracle.xml.xquery。OXQDataSource; import oracle.xml.xquery。OXQPreparedExpression; import oracle.xml.xquery。OXQSerializationParameters; import oracle.xml.xquery。OXQStaticContext; import oracle.xml.xquery。OXQView; public class OptionDeclarations1 {public static void main（String [] args）throws XQException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; String query =“declare option output：indent'yes'; \ n”+“declare option output：encoding'UTF-16'; \ n”+“&lt;person&gt; &lt;first&gt; John &lt;/ first&gt; &lt;last&gt; Doe &lt; /最后&gt; &lt;/人&gt;“; XQPreparedExpression expr = con.prepareExpression（query）; OXQPreparedExpression oexpr = OXQView.getPreparedExpression（expr）; XQStaticContext ctx = oexpr.getExpressionStaticContext（）; OXQStaticContext octx = OXQView.getStaticContext（ctx）; OXQSerializationParameters params = octx.getSerializationParameters（）; System.out.println（“indent =”+ params.isIndent（））; System.out.println（“encoding =”+ params.getEncoding（））; expr.close（）; con.close（）; }}</code></pre><p>这会产生以下输出：</p><pre class="pre codeblock"><code>indent = true encoding = UTF-16</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__USINGOPTIONDECLARATIONSWHENSERIALIZ-AB3FD4F9">
                     <p class="titleinexample">示例15-16序列化查询结果时使用选项声明</p><pre class="pre codeblock"><code>package oracle.xml.xquery.examples.published; import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。XQResultSequence; import javax.xml.xquery。了XQStaticContext; import oracle.xml.xquery。OXQDataSource; import oracle.xml.xquery。OXQPreparedExpression; import oracle.xml.xquery。OXQSerializationParameters; import oracle.xml.xquery。OXQStaticContext; import oracle.xml.xquery。OXQView; public class OptionDeclarations2 {public static void main（String [] args）throws XQException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; String query =“declare option output：indent'yes'; \ n”+“declare option output：omit-xml-declaration'no'; \ n”+“&lt;person&gt; &lt;first&gt; John &lt;/ first&gt; &lt;last&gt; DOE &lt;/最后&gt; &lt;/人&gt;“; XQPreparedExpression expr = con.prepareExpression（query）; OXQPreparedExpression oexpr = OXQView.getPreparedExpression（expr）; XQStaticContext ctx = oexpr.getExpressionStaticContext（）; OXQStaticContext octx = OXQView.getStaticContext（ctx）; OXQSerializationParameters params = octx.getSerializationParameters（）; XQResultSequence result = expr.executeQuery（）; result.writeSequence（System.out，params.createProperties（））; result.close（）; expr.close（）; con.close（）; }}</code></pre><p>这会产生以下输出：</p><pre class="pre codeblock"><code>&lt;？xml version =“1.0”encoding =“UTF-8”？&gt; &lt;person&gt; &lt;first&gt; John &lt;/ first&gt; &lt;last&gt; Doe &lt;/ last&gt; &lt;/ person&gt;</code></pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADXDK119"></a><div class="props_rev_3"><a id="GUID-2F04CC88-EDFF-4449-9F3B-E797285A5879" name="GUID-2F04CC88-EDFF-4449-9F3B-E797285A5879"></a><h3 id="ADXDK-GUID-2F04CC88-EDFF-4449-9F3B-E797285A5879" class="sect3">使用XQuery提高应用程序性能和可伸缩性</h3>
               <div>
                  <p>XDK XQuery处理器提供了多种功能，可以提高应用程序的性能和可伸缩性。</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK120"></a><a id="ADXDK121"></a><a id="ADXDK190"></a><div class="props_rev_3"><a id="GUID-80E29834-C423-41F9-BE6D-D34388E15A98" name="GUID-80E29834-C423-41F9-BE6D-D34388E15A98"></a><h4 id="ADXDK-GUID-80E29834-C423-41F9-BE6D-D34388E15A98" class="sect4">流式查询评估</h4>
                  <div>
                     <p>用于Java的XDK XQuery处理器支持许多类型的查询的流式评估。即使输入XML非常大，流式评估也需要少量主内存。</p>
                     <div class="section">
                        <p>为便于进行流式传输评估，建议采取以下措施：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将静态上下文的绑定模式设置为延迟模式（请参阅方法<code class="codeph">javax.xml.xquery.<a href="../jaxml/index.html" target="_blank"><span><cite>Oracle数据库XML Java API参考中的</cite></span></a> XQStaticContext.setBindingMode(int)</code> ）。如果未延迟绑定模式，则绑定时输入XML将完全实现。
                              </p>
                           </li>
                           <li>
                              <p>提供输入XML作为<code class="codeph">java.io.的实例。InputStream</code> ， <code class="codeph">java.io.Reader</code>或<code class="codeph">javax.xml.stream.XMLStreamReader</code> 。输入XML通过将其绑定到表达式或通过从实体解析器返回来提供给查询处理器。
                              </p>
                           </li>
                           <li>
                              <p>确保<code class="codeph">javax.xml.xquery.XQSequence</code>实例以不需要实现的方式使用：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>字符串序列化方法<code class="codeph">getSequenceAsString(...)</code>和<code class="codeph">getItemAsString(...)</code>将数据生成为保存在内存中的字符串。而是使用<code class="codeph">writeSequence(...)</code>或<code class="codeph">writeItem(...)</code>方法序列化序列。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">getNode()</code>方法构建一个保存在内存中的文档对象模型（DOM）节点。相反，请考虑使用<code class="codeph">getSequenceAsStream()</code>或<code class="codeph">getItemAsStream()</code>方法来获取XML（StAX）流的Streaming API。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">getItem()</code>方法复制并具体化内存中的当前项。而是直接在<code class="codeph">java.xml.xquery.上使用方法<code class="codeph">java.xml.xquery.XQSequence</code>实例访问当前项（请参阅接口<code class="codeph">javax.xml.xquery.<a href="../jaxml/index.html" target="_blank"><span><cite>Oracle数据库XML Java API参考中的</cite></span></a> XQItemAccessor</code> ）。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>本节中显示的代码以不阻止流式评估的方式使用XQJ调用查询。</p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-80E29834-C423-41F9-BE6D-D34388E15A98__BAJCBHAA">例15-17</a>显示<code class="codeph">books2.xq</code>的内容。
                        </p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-80E29834-C423-41F9-BE6D-D34388E15A98__BAJFEHHJ">例15-18</a>设置查询以启用流评估。该示例将此输出写入文件<code class="codeph">results.xml</code> ： <code class="codeph">&lt;title&gt;A Game of Thrones&lt;/title&gt;</code> 。
                        </p>
                        <p>绑定模式设置为值<code class="codeph">BINDING_MODE_DEFERRED</code>以避免在绑定到准备好的表达式时实现<code class="codeph">books.xml</code> 。同样，结果将写入输出流，并且不会实现。
                        </p>
                        <p>为了简化示例，输入文件<code class="codeph">books.xml</code>很小。即使此文件包含数百万本书，评估查询也只需要很小的最大堆大小，因为一次只有一个book元素保存在内存中。与<a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFFCBB">示例15-3中</a>显示的query <code class="codeph">books.xq</code> ，查询<code class="codeph">books2.xq</code>不需要您定义实体解析器。两个示例（ <code class="codeph">books.xq</code>和<code class="codeph">books2.xq</code> ）都是可流式的。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-80E29834-C423-41F9-BE6D-D34388E15A98__BAJCBHAA">
                        <p class="titleinexample">例15-17 books2.xq</p><pre class="oac_no_warn" dir="ltr">声明变量$ doc external; $ book / books / book中的$ book：xs：decimal（$ book / price）gt 10.00返回$ book / title</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-80E29834-C423-41F9-BE6D-D34388E15A98__BAJFEHHJ">
                        <p class="titleinexample">例15-18促进流媒体评估</p><pre class="oac_no_warn" dir="ltr">import java.io.的FileInputStream; import java.io.FileOutputStream中; import java.io.IOException异常; import javax.xml.namespace。QName的; import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQConstants; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。XQSequence都; import javax.xml.xquery。了XQStaticContext; import oracle.xml.xquery。OXQDataSource; public class Streaming {public static void main（String [] args）抛出XQException，IOException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; XQStaticContext ctx = con.getStaticContext（）; ctx.setBindingMode（XQConstants。BINDING_MODE_DEFERRED）; con.setStaticContext（CTX）; FileInputStream input = new FileInputStream（“books.xml”）; FileInputStream query = new FileInputStream（“books2.xq”）; FileOutputStream output = new FileOutputStream（“result.xml”）; XQPreparedExpression expr = con.prepareExpression（query）; query.close（）; expr.bindDocument（new QName（“doc”），input，null，null）; XQSequence result = expr.executeQuery（）; //将“&lt;title&gt;权力的游戏&lt;/ title&gt;”写入文件results.xml result.writeSequence（output，null）; result.close（）; input.close（）; output.close（）; expr.close（）; con.close（）; }}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK122"></a><a id="ADXDK191"></a><div class="props_rev_3"><a id="GUID-C36470F9-CC26-4169-8C50-78852EC74583" name="GUID-C36470F9-CC26-4169-8C50-78852EC74583"></a><h4 id="ADXDK-GUID-C36470F9-CC26-4169-8C50-78852EC74583" class="sect4">外部存储</h4>
                  <div>
                     <p>根据查询，处理器可能必须在查询评估期间将部分输入XML存储在主内存中。</p>
                     <div class="section">
                        <p>例如，在以下情况下可能会出现这种情况：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>序列已排序。</p>
                           </li>
                           <li>
                              <p>绑定到变量的值多次使用。</p>
                           </li>
                           <li>
                              <p>路径表达式使用反转轴步骤。</p>
                           </li>
                        </ul>
                        <p>要在这种情况下减少内存使用，可以将XQuery处理器配置为使用外部存储来实现XML，而不是主内存。要启用外部存储，请设置数据源属性<code class="codeph">OXQConstants.USE_EXTERNAL_STORAGE</code>为<code class="codeph">true</code> ，并设置USE_EXTERNAL_STORAGE</code> <code class="codeph">oracle.xml.scalable.动态上下文中的PageManager</code>实例。
                        </p>
                        <div class="infoboxnote" id="GUID-C36470F9-CC26-4169-8C50-78852EC74583__GUID-72A836B5-2C2C-491E-92C3-BEDE32CDD73A">
                           <p class="notep1">注意：</p>
                           <p>使用外部存储可以显着减少查询处理期间消耗的主内存量。但是，它也会降低性能。</p>
                        </div>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-C36470F9-CC26-4169-8C50-78852EC74583__BAJHJDID">例15-19</a>显示了在实现XML时如何使XQuery处理器使用基于磁盘的存储而不是主存储器。该示例将此输出写入文件<code class="codeph">results.xml</code> ： <code class="codeph">&lt;title&gt;A Game of Thrones&lt;/title&gt;</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C36470F9-CC26-4169-8C50-78852EC74583__BAJHJDID">
                        <p class="titleinexample">示例15-19配置XQuery处理器以使用外部存储</p><pre class="oac_no_warn" dir="ltr">import java.io.文件; import java.io.的FileInputStream; import java.io.FileOutputStream中; import java.io.IOException异常; import javax.xml.namespace。QName的; import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQConstants; import javax.xml.xquery。XQException; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。XQSequence都; import javax.xml.xquery。了XQStaticContext; import oracle.xml.scalable。FilePageManager; import oracle.xml.xquery。OXQDataSource; import oracle.xml.xquery。OXQPreparedExpression; import oracle.xml.xquery。OXQView; public class ExternalStorage {public static void main（String [] args）抛出XQException，IOException {OXQDataSource ds = new OXQDataSource（）; ds.setProperty（OXQDataSource。USE_EXTERNAL_STORAGE，“true”）; XQConnection con = ds.getConnection（）; XQStaticContext ctx = con.getStaticContext（）; ctx.setBindingMode（XQConstants。BINDING_MODE_DEFERRED）; con.setStaticContext（CTX）; FileInputStream input = new FileInputStream（“books.xml”）; FileInputStream query = new FileInputStream（“books2.xq”）; FileOutputStream output = new FileOutputStream（“results.xml”）; XQPreparedExpression expr = con.prepareExpression（query）; query.close（）; expr.bindDocument（new QName（“doc”），input，null，null）; //如果需要实现XML，则设置将由XQuery处理器使用的页面管理器OXQPreparedExpression oexpr = OXQView.getPreparedExpression（expr）;文件temporaryFile = File.createTempFile（“books”，“。pagefile”）; temporaryFile.deleteOnExit（）; oexpr.setPageManager（new FilePageManager（temporaryFile.getAbsolutePath（）））; XQSequence result = expr.executeQuery（）; //写入文件results.xml：“&lt;title&gt;权力的游戏&lt;/ title&gt;”result.writeSequence（output，null）; result.close（）; input.close（）; output.close（）; expr.close（）; con.close（）; }}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK192"></a><div class="props_rev_3"><a id="GUID-729BCBC6-A03A-4397-BE61-6E0AB9B43A6D" name="GUID-729BCBC6-A03A-4397-BE61-6E0AB9B43A6D"></a><h4 id="ADXDK-GUID-729BCBC6-A03A-4397-BE61-6E0AB9B43A6D" class="sect4">XQJ的线程安全</h4>
                  <div>
                     <p>XQJ的Oracle实现不是线程安全的。例如， <code class="codeph">javax.xml.xquery.一个实例<code class="codeph">javax.xml.xquery.XQSequence</code>只能由一个线程访问。但是，支持受限形式的线程安全性来管理<code class="codeph">javax.xml.xquery.实例<code class="codeph">javax.xml.xquery.XQConnection</code> 。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">XQConnection</code>一个实例用作创建<code class="codeph">XQExpression</code> ， <code class="codeph">XQPreparedExpression</code> ， <code class="codeph">XQItem</code> ， <code class="codeph">XQSequence</code> ， <code class="codeph">XQItemType</code>和<code class="codeph">XQSequenceType</code>实例的工厂。一个线程可以管理这些对象的创建以供其他线程使用。例如，可以在其他线程中使用由同一连接在一个线程中创建的<code class="codeph">XQPreparedExpression</code>实例。但是，每个<code class="codeph">XQPreparedExpression</code>实例只能由一个线程执行。任何用户定义的<code class="codeph">oracle.xml.xquery.实现<code class="codeph">oracle.xml.xquery.当同时评估来自同一连接的表达式时，指定的OXQEntityResolver</code>必须是线程安全的。
                           </p>
                        </li>
                        <li>
                           <p>方法<code class="codeph">XQConnection.close()</code>关闭从连接获取的所有<code class="codeph">XQExpression</code>和<code class="codeph">XQPreparedExpression</code>实例。关闭这些实例将关闭从表达式获取的所有<code class="codeph">XQResultSequence</code>和<code class="codeph">XQResultItem</code>实例。方法<code class="codeph">XQConnection.close()</code>可以在从其他线程中处理从连接获得的表达式时调用。在这种情况下，表达式所拥有的所有注册资源（例如<code class="codeph">java.io.InputStream</code>和<code class="codeph">java.io.Reader</code> ）已关闭。本合同假定所有注册资源都支持线程安全关闭方法。例如，许多JDK实现<code class="codeph">java.io.Closeable</code>满足这一要求。但是， <code class="codeph">javax.xml.stream.许多实现<code class="codeph">javax.xml.stream.XMLStreamReader</code>不提供线程安全的close方法。没有这种支持的实现如果在第二个线程仍在读取时关闭它们会产生不可预测的结果（请参阅接口<code class="codeph">oracle.xml.xquery.<a href="../jaxml/index.html" target="_blank"><span><cite>Oracle数据库XML Java API参考中的</cite></span></a> OXQCloseable</code> ）。
                           </p>
                           <div class="infoboxnotealso" id="GUID-729BCBC6-A03A-4397-BE61-6E0AB9B43A6D__GUID-D41CBF61-90B5-4E84-99F7-23D92B3B1E12">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API参考</cite></span></a> ，方法<code class="codeph">oracle.xml.xquery.OXQConnection.copyExpression（XQPreparedExpression）</code></p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADXDK183"></a><a id="ADXDK184"></a><a id="ADXDK185"></a><a id="ADXDK186"></a><a id="ADXDK182"></a><div class="props_rev_3"><a id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9" name="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9"></a><h3 id="ADXDK-GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9" class="sect3">执行更新</h3>
               <div>
                  <p>XDK扩展了XQJ，可以执行更新查询。XML文档可以作为<code class="codeph">javax.xml.xquery.的实例读取<code class="codeph">javax.xml.xquery.XQItem</code> ，然后使用XQuery Update Facility扩展进行修改。
                  </p>
                  <div class="section">
                     <p>默认情况下禁用此功能。您可以通过将动态上下文的更新模式设置为<code class="codeph">oracle.xml.xquery.来启用它<code class="codeph">oracle.xml.xquery.OXQConstants。UPDATE_MODE_ENABLED</code> 。</p>
                     <p>要更新的文档必须以延迟模式绑定（请参阅方法<code class="codeph">javax.xml.xquery.<a href="../jaxml/index.html" target="_blank"><span><cite>Oracle数据库XML Java API参考中的</cite></span></a> XQStaticContext.setBindingMode(int)</code> ）。如果绑定模式未设置为延迟，则在查询执行之前复制输入绑定。因此，仅更新副本。
                     </p>
                     <p>本节中的示例显示了如何使用XQuery Update Facility修改XML文档。</p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJFCJCC">例15-20</a>显示了<code class="codeph">configuration.xml</code>的内容。
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJICABB">例15-21</a>显示了<code class="codeph">update.xq</code>的内容。
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJGJHDJ">示例15-22</a>显示更新后<code class="codeph">configuration.xml</code>的内容。
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJCDIFI">例15-23</a>显示了如何执行查询<code class="codeph">update.xq</code> 。
                     </p>
                     <p>在示例中，这些操作发生：</p>
                     <ol>
                        <li>
                           <p>XML文件<code class="codeph">configuration.xml</code>将作为<code class="codeph">javax.xml.xquery.的实例读取<code class="codeph">javax.xml.xquery.XQItem</code> 。
                           </p>
                        </li>
                        <li>
                           <p>该项绑定到查询<code class="codeph">update.xq</code>的准备表达式。
                           </p>
                        </li>
                        <li>
                           <p>执行查询<code class="codeph">update.xq</code> 。
                           </p>
                        </li>
                        <li>
                           <p>修改后的文档将写入文件<code class="codeph">configuration.xml</code> 。
                           </p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__GUID-9703B030-1DA9-4353-8A2D-6DDBDC23C543">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_tr_xquery_update10" target="_blank"><span class="italic">XQuery Update Facility 1.0</span></a></p>
                           </li>
                           <li>
                              <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API参考</cite></span></a> ，接口<code class="codeph">oracle.xml.xquery.OXQDynamicContext</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJFCJCC">
                     <p class="titleinexample">例15-20 configuration.xml</p><pre class="oac_no_warn" dir="ltr">&lt;configuration&gt; &lt;property&gt; &lt;name&gt; hostname &lt;/ name&gt; &lt;value&gt; example.com &lt;/ value&gt; &lt;/ property&gt; &lt;property&gt; &lt;name&gt; timeout &lt;/ name&gt; &lt;value&gt; 1000 &lt;/ value&gt; &lt;/ property &gt; &lt;/ configuration&gt;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJICABB">
                     <p class="titleinexample">例15-21 update.xq</p><pre class="oac_no_warn" dir="ltr">声明变量$ doc external; let $ timeout：= $ doc / configuration / property [name eq“timeout”]返回node $ timeout / value的替换值2 * xs：integer（$ timeout / value）</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJGJHDJ">
                     <p class="titleinexample">示例15-22更新了文件configuration.xml</p><pre class="oac_no_warn" dir="ltr">&lt;configuration&gt; &lt;property&gt; &lt;name&gt; hostname &lt;/ name&gt; &lt;value&gt; example.com &lt;/ value&gt; &lt;/ property&gt; &lt;property&gt; &lt;name&gt; timeout &lt;/ name&gt; &lt;value&gt; 2000 &lt;/ value&gt; &lt;/ property &gt; &lt;/ configuration&gt;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJCDIFI">
                     <p class="titleinexample">示例15-23执行更新查询update.xq</p><pre class="oac_no_warn" dir="ltr">import java.io.的FileInputStream; import java.io.IOException异常; import java.io.FileOutputStream中; import javax.xml.namespace。QName的; import javax.xml.xquery。XQConnection; import javax.xml.xquery。XQConstants; import javax.xml.xquery。XQException; import javax.xml.xquery。了XQItem; import javax.xml.xquery。XQPreparedExpression; import javax.xml.xquery。了XQStaticContext; import oracle.xml.xquery。OXQConstants; import oracle.xml.xquery。OXQDataSource; import oracle.xml.xquery。OXQView; public class UpdateDocument {public static void main（String [] args）抛出XQException，IOException {OXQDataSource ds = new OXQDataSource（）; XQConnection con = ds.getConnection（）; XQStaticContext ctx = con.getStaticContext（）; //将绑定模式设置为延迟，以便绑定时不复制文档//项目。ctx.setBindingMode（XQConstants。BINDING_MODE_DEFERRED）; con.setStaticContext（CTX）; FileInputStream input = new FileInputStream（“configuration.xml”）; XQItem doc = con.createItemFromDocument（input，null，null）; input.close（）; System.out.println（“更新前：\ n”+ doc.getItemAsString（null））; FileInputStream query = new FileInputStream（“update.xq”）; XQPreparedExpression expr = con.prepareExpression（query）; query.close（）; expr.bindItem（new QName（“doc”），doc）; //启用更新（默认情况下禁用）OXQView.getDynamicContext（expr）.setUpdateMode（OXQConstants。UPDATE_MODE_ENABLED）; expr.executeQuery（）; System.out.println（“更新后：\ n”+ doc.getItemAsString（null））; //将修改后的文档写回文件FileOutputStream out = new FileOutputStream（“configuration.xml”）; doc.writeItem（out，null）; expr.close（）; con.close（）; }}</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-19382C4B-0797-444D-9770-3620525E8978" name="GUID-19382C4B-0797-444D-9770-3620525E8978"></a><h3 id="ADXDK-GUID-19382C4B-0797-444D-9770-3620525E8978" class="sect3">Oracle XQuery函数和操作符</h3>
               <div>
                  <p>Oracle支持标准的XQuery函数和运算符，以及一些特定于Oracle的函数。</p>
                  <p>特定于Oracle的XQuery函数使用命名空间<code class="codeph">http://xmlns.oracle.com/xdk/xquery/function</code> 。命名空间前缀<code class="codeph">ora-fn</code>是预先声明的，并且模块会自动导入。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="using-xquery-processor-for-Java.html#GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0" title="列出了适用于Java的XDK XQuery处理器符合的标准和规范。">适用于Java的XQuery处理器的标准和规范</a></li>
                     </ul>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-65FBF15D-D1FA-4648-89E4-C613295F2787" name="GUID-65FBF15D-D1FA-4648-89E4-C613295F2787"></a><h4 id="ADXDK-GUID-65FBF15D-D1FA-4648-89E4-C613295F2787" class="sect4">适用于持续时间，日期和时间的Oracle XQuery函数</h4>
                  <div>
                     <p>您可以使用Oracle XQuery函数在XQuery中操作持续时间，日期和时间。</p>
                     <p>Oracle XQuery函数位于命名空间<code class="codeph">http://xmlns.oracle.com/xdk/xquery/function</code> 。命名空间前缀<code class="codeph">ora-fn</code>是预先声明的，并且模块会自动导入。
                     </p>
                  </div>
                  <div class="sect4"><a id="GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317" name="GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317"></a><h5 id="ADXDK-GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317" class="sect5">ORA-FN：日期从-字符串与格式</h5>
                     <div>
                        <p>此Oracle XQuery函数根据给定模式从字符串返回新的日期值。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317__GUID-D0426020-8ED3-4A70-8E74-08F2EC4798DE">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：date-from-string-with-format（$ format as xs：string？，$ dateString as xs：string？，$ locale as xs：string *）as xs：date？ora-fn：date-from-string-with-format（$ format as xs：string？，$ dateString as xs：string？）作为xs：date？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317__GUID-0938493F-5CA4-4F91-98C2-CBB038543205">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code> ：模式;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="$ format参数标识组成日期或时间值的各个字段。">格式参数</a></p>
                        <p><code class="codeph">$dateString</code> ：表示日期的输入字符串</p>
                        <p><code class="codeph">$locale</code> ：表示区域设置的一到三个字段值;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="$ locale代表特定的地理，政治或文化区域。">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317__GUID-3B95294E-D0F5-4380-BACD-BDF13E0F49F4">例</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例返回当前时区中的指定日期：</p><pre class="oac_no_warn" dir="ltr">ora-fn：date-from-string-with-format（“yyyy-MM-dd G”，“2013-06-22 AD”）</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-44910E87-C56D-4F83-857F-412A08B0234A" name="GUID-44910E87-C56D-4F83-857F-412A08B0234A"></a><h5 id="ADXDK-GUID-44910E87-C56D-4F83-857F-412A08B0234A" class="sect5">ORA-FN：日期到字符串与格式</h5>
                     <div>
                        <p>此Oracle XQuery函数返回具有给定模式的日期字符串。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-44910E87-C56D-4F83-857F-412A08B0234A__GUID-9CA1AFED-6BD7-4684-9535-0CD674D1F915">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：date-to-string-with-format（$ format as xs：string？，$ date as xs：date？，* $ locale as xs：string？）作为xs：string？ora-fn：date-to-string-with-format（$ format as xs：string？，$ date as xs：date？）作为xs：string？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-44910E87-C56D-4F83-857F-412A08B0234A__GUID-6AA4B590-E391-464E-855F-8ED5323DDD7F">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code> ：模式;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="$ format参数标识组成日期或时间值的各个字段。">格式参数</a></p>
                        <p><code class="codeph">$date</code> ：日期</p>
                        <p><code class="codeph">$locale</code> ：表示区域设置的一到三个字段值;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="$ locale代表特定的地理，政治或文化区域。">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-44910E87-C56D-4F83-857F-412A08B0234A__GUID-1A4CDB10-0773-47AF-9B7E-3949538E2BE9">例</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例返回字符串<code class="codeph">2013-07-15</code> ：</p><pre class="oac_no_warn" dir="ltr">ora-fn：date-to-string-with-format（“yyyy-mm-dd”，xs：date（“2013-07-15”））</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39" name="GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39"></a><h5 id="ADXDK-GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39" class="sect5">ORA-FN：日期时间 - 从 - 字符串与格式</h5>
                     <div>
                        <p>此Oracle XQuery函数根据给定模式从输入字符串返回新的日期时间值。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39__GUID-9583F604-CA13-42D6-933D-8ED70CE5DF1C">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：dateTime-from-string-with-format（$ format as xs：string？，$ dateTimeString as xs：string？，$ locale as xs：string？）作为xs：dateTime？ora-fn：dateTime-from-string-with-format（$ format as xs：string？，$ dateTimeString as xs：string？）作为xs：dateTime？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39__GUID-C6C1828A-640E-4309-B4C4-D18191E4A06C">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code> ：模式;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="$ format参数标识组成日期或时间值的各个字段。">格式参数</a></p>
                        <p><code class="codeph">$dateTimeString</code> ：日期和时间</p>
                        <p><code class="codeph">$locale</code> ：表示区域设置的一到三个字段值;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="$ locale代表特定的地理，政治或文化区域。">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39__GUID-C5D7690A-733D-4CE4-A655-03EDC25C7369">例子</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例返回当前时区中的指定日期和11:04:00 AM：</p><pre class="pre codeblock"><code>ora-fn：dateTime-from-string-with-format（“yyyy-MM-dd”at'hh：mm“，”2013-06-22 at 11:04“）</code></pre><p>下一个示例返回当前时区中的指定日期和12:00:00 AM：</p><pre class="pre codeblock"><code>ora-fn：dateTime-from-string-with-format（“yyyy-MM-dd G”，“2013-06-22 AD”）</code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E" name="GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E"></a><h5 id="ADXDK-GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E" class="sect5">ORA-FN：日期时间到字符串与格式</h5>
                     <div>
                        <p>此Oracle XQuery函数返回具有给定模式的日期和时间字符串。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E__GUID-CA66F25E-532E-4D3F-8A4C-7795F8ADF837">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：dateTime-to-string-with-format（$ format as xs：string？，$ dateTime as xs：dateTime？，$ locale as xs：string？）作为xs：string？ora-fn：dateTime-to-string-with-format（$ format as xs：string？，$ dateTime as xs：dateTime？）作为xs：string？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E__GUID-15ECD024-8DEC-4F87-8BBF-00127A9B8363">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code> ：模式;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="$ format参数标识组成日期或时间值的各个字段。">格式参数</a></p>
                        <p><code class="codeph">$dateTime</code> ：日期和时间</p>
                        <p><code class="codeph">$locale</code> ：表示区域设置的一到三个字段值;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="$ locale代表特定的地理，政治或文化区域。">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E__GUID-4B1EE99A-0FBF-4AB0-A2A5-3738BBD47665">例子</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例返回字符串<code class="codeph">07 JAN 2013 10:09 PM AD</code> ：</p><pre class="oac_no_warn" dir="ltr">ora-fn：dateTime-to-string-with-format（“dd MMM yyyy hh：mm a G”，xs：dateTime（“2013-01-07T22：09：44”））</pre><p>下一个示例返回字符串“01-07-2013”：</p><pre class="oac_no_warn" dir="ltr">ora-fn：dateTime-to-string-with-format（“MM-dd-yyyy”，xs：dateTime（“2013-01-07T22：09：44”））</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E" name="GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E"></a><h5 id="ADXDK-GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E" class="sect5">ORA-FN：时间从-字符串与格式</h5>
                     <div>
                        <p>此Oracle XQuery函数根据给定模式从输入字符串返回新的时间值。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E__GUID-EB82FFB7-EC29-4958-8877-1AFB91FF5496">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：time-from-string-with-format（$ format as xs：string？，$ timeString as xs：string？，$ locale as xs：string？）作为xs：时间？ora-fn：time-from-string-with-format（$ format as xs：string？，$ timeString as xs：string？）作为xs：时间？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E__GUID-3D5945FF-FF4C-4B33-9018-6BFBB77F07DD">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code> ：模式;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="$ format参数标识组成日期或时间值的各个字段。">格式参数</a></p>
                        <p><code class="codeph">$timeString</code> ：时间</p>
                        <p><code class="codeph">$locale</code> ：表示区域设置的一到三个字段值;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="$ locale代表特定的地理，政治或文化区域。">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E__GUID-E64FD76A-2FEA-4BA0-8B9E-29EE0A4CEBFF">例</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例返回当前时区的9:45:22 PM：</p><pre class="pre codeblock"><code>ora-fn：来自字符串格式的时间（“HH.mm.ss”，“21.45.22”）</code></pre><p>下一个示例返回当前时区的8:07:22 PM：</p><pre class="pre codeblock"><code>fn-bea：来自字符串格式的时间（“hh：mm：ss a”，“8:07:22 PM”）</code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E" name="GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E"></a><h5 id="ADXDK-GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E" class="sect5">ORA-FN：时间到字符串与格式</h5>
                     <div>
                        <p>此Oracle XQuery函数返回具有给定模式的时间字符串。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E__GUID-BFC5D2B8-4F57-4F9F-B9F2-64CC4A9394A4">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：格式化字符串的时间（$格式为xs：string ?, $ time为xs：time？，$ locale为xs：string？）作为xs：string？ora-fn：格式化字符串的时间（$格式为xs：string ?, $ time为xs：time？）作为xs：string？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E__GUID-33F606FA-3F63-4D01-BB50-3B34EF68D130">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code> ：模式;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="$ format参数标识组成日期或时间值的各个字段。">格式参数</a></p>
                        <p><code class="codeph">$time</code> ：时间</p>
                        <p><code class="codeph">$locale</code> ：表示区域设置的一到三个字段值;请参阅<a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="$ locale代表特定的地理，政治或文化区域。">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E__GUID-14473823-9B73-4CEE-8CA1-8E5C9E425DA3">例子</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例返回字符串“10:09 PM”：</p><pre class="pre codeblock"><code>ora-fn：时间到字符串格式（“hh：mm a”，xs：time（“22:09:44”））</code></pre><p>下一个示例返回字符串“22:09 PM”：</p><pre class="pre codeblock"><code>ora-fn：格式化时间（“HH：mm a”，xs：time（“22:09:44”））</code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" name="GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346"></a><h5 id="ADXDK-GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" class="sect5">格式参数</h5>
                     <p><code class="codeph">$format</code>参数标识组成日期或时间值的各个字段。
                     </p>
                  </div>
                  <div class="sect4"><a id="GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" name="GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B"></a><h5 id="ADXDK-GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" class="sect5">Locale Argument</h5>
                     <div>
                        <p><code class="codeph">$locale</code>代表特定的地理，政治或文化区域。
                        </p>
                        <p>它最多由三个字段定义：</p>
                        <ol>
                           <li>
                              <p><span class="bold">语言代码</span> ：ISO 639 alpha-2或alpha-3语言代码，或最多八个字母的注册语言子标签。例如， <code class="codeph">en</code>表示英语， <code class="codeph">ja</code>表示日语。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">国家/地区代码</span> ：ISO 3166 alpha-2国家/地区代码或UN M.49数字-3区号。例如， <code class="codeph">US</code>为美国， <code class="codeph">029</code>为加勒比海。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">变体</span> ：表示区域设置的变体，例如特定方言。按重要性顺序排序多个值，并用下划线（_）分隔它们。这些值区分大小写。
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B__GUID-7FFDC7E5-E939-4F3D-9BAF-8102FEDEB172">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><cite>Java Standard Edition 7参考中的</cite> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=javase7_util_locale" target="_blank">类语言环境</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F8F59CE8-C172-4C5E-BBC9-208332B96CC2" name="GUID-F8F59CE8-C172-4C5E-BBC9-208332B96CC2"></a><h4 id="ADXDK-GUID-F8F59CE8-C172-4C5E-BBC9-208332B96CC2" class="sect4">用于字符串的Oracle XQuery函数</h4>
                  <div>
                     <p>您可以使用Oracle XQuery函数在XQuery中操作字符串。</p>
                     <p>Oracle XQuery函数位于命名空间<code class="codeph">http://xmlns.oracle.com/xdk/xquery/function</code> 。命名空间前缀<code class="codeph">ora-fn</code>是预先声明的，并且模块会自动导入。
                     </p>
                  </div>
                  <div class="sect4"><a id="GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194" name="GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194"></a><h5 id="ADXDK-GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194" class="sect5">ORA-FN：垫左</h5>
                     <div>
                        <p>在字符串的左侧添加填充字符以创建固定长度的字符串。如果输入字符串超出指定的大小，则会截断它以返回指定长度的子字符串。默认填充字符是空格（ASCII 32）。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194__GUID-3AD17F46-E2B4-431C-BD96-C648E1383B6E">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：pad-left（$ str as xs：string？，$ size as xs：integer？，$ pad as xs：string？）作为xs：string？ora-fn：pad-left（$ str as xs：string？，$ size as xs：integer？）作为xs：string？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194__GUID-4F78678D-EEFA-4B9B-9326-161670A78C06">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$str</code> ：输入字符串</p>
                        <p><code class="codeph">$size</code> ：所需的固定长度，通过向<code class="codeph">$str</code>添加填充字符获得</p>
                        <p><code class="codeph">$pad</code> ：填充字符</p>
                        <p>如果任一参数是空序列，则该函数返回空序列。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194__GUID-C255127C-3534-4ACC-B80E-76CE134A7650">例子</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例将<code class="codeph">"01</code> ”前缀为输入字符串，最多为六个字符。返回的字符串是“ <code class="codeph">010abc</code> ”。该函数返回一个完整的和一个部分填充字符。
                        </p><pre class="pre codeblock"><code>ora-fn：pad-left（“abc”，6，“01”）</code></pre><p>该示例仅返回“ <code class="codeph">ab</code> ”，因为输入字符串超出了指定的固定长度：</p><pre class="pre codeblock"><code>ora-fn：pad-left（“abcd”，2，“01”）</code></pre><p>此示例将空格前缀为字符串，最多为指定的最多六个字符。返回的字符串有两个空格的前缀：“ <code class="codeph">abcd</code> ”：</p><pre class="oac_no_warn" dir="ltr">ora-fn：pad-left（“abcd”，6）</pre><p>下一个示例仅返回“ <code class="codeph">ab</code> ”，因为输入字符串超出了指定的固定长度：</p><pre class="oac_no_warn" dir="ltr">ora-fn：pad-left（“abcd”，2）</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0" name="GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0"></a><h5 id="ADXDK-GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0" class="sect5">ORA-FN：垫右</h5>
                     <div>
                        <p>在字符串的右侧添加填充字符以创建固定长度的字符串。如果输入字符串超出指定的大小，则会截断它以返回指定长度的子字符串。默认填充字符是空格（ASCII 32）。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0__GUID-F7AD140B-8363-4264-B496-C447957B80F6">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：pad-right（$ str as xs：string？，$ size as xs：integer？，$ pad as xs：string？）作为xs：string？ora-fn：pad-right（$ str as xs：string？，$ size as xs：integer？）作为xs：string？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0__GUID-531EEE67-8599-44DA-AE67-6C9061D1BA5C">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$str</code> ：输入字符串</p>
                        <p><code class="codeph">$size</code> ：所需的固定长度，通过向<code class="codeph">$str</code>添加填充字符获得</p>
                        <p><code class="codeph">$pad</code> ：填充字符</p>
                        <p>如果任一参数是空序列，则该函数返回空序列。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0__GUID-90633DBA-E9C9-4412-A4FE-1FA366E9CCFF">例子</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例将“ <code class="codeph">01</code> ”附加到输入字符串，最多六个字符。返回的字符串是“ <code class="codeph">abc010</code> ”。该函数返回一个完整的和一个部分填充字符。
                        </p><pre class="pre codeblock"><code>ora-fn：pad-right（“abc”，6，“01”）</code></pre><p>此示例仅返回“ <code class="codeph">ab</code> ”，因为输入字符串超出指定的固定长度：</p><pre class="pre codeblock"><code>ora-fn：pad-right（“abcd”，2，“01”）</code></pre><p>此示例将字符串追加到指定的最多六个字符的字符串。返回的字符串后缀为两个空格：“ <code class="codeph">abcd</code> ”：</p><pre class="pre codeblock"><code>ora-fn：pad-right（“abcd”，6）</code></pre><p>下一个示例仅返回“ <code class="codeph">ab</code> ”，因为输入字符串超出了指定的固定长度：</p><pre class="pre codeblock"><code>ora-fn：pad-right（“abcd”，2）</code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7" name="GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7"></a><h5 id="ADXDK-GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7" class="sect5">ORA-FN：修剪</h5>
                     <div>
                        <p>从字符串中删除任何前导或尾随空格。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7__GUID-71EA4AD3-9527-4814-B27A-B2DBC907E01B">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：trim（$输入为xs：string？）作为xs：string？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7__GUID-5EBA07EE-1A98-4040-BBFC-1BF78061B1DA">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$input</code> ：要修剪的字符串。如果<code class="codeph">$input</code>是一个空序列，则该函数返回一个空序列。其他数据类型会触发错误。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7__GUID-91596001-D79D-4865-A7F5-EAC729D3B2F3">例</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例返回字符串“ <code class="codeph">abc</code> ”：</p><pre class="pre codeblock"><code>ora-fn：trim（“abc”）</code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80" name="GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80"></a><h5 id="ADXDK-GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80" class="sect5">ORA-FN：修剪左</h5>
                     <div>
                        <p>删除任何前导空格。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80__GUID-BBE9C459-9FF3-489C-9975-E8803D05D852">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：trim-left（$ input为xs：string？）作为xs：string？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80__GUID-B6D41FD5-514C-47D3-A6F5-18BF291950AA">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$input</code> ：要修剪的字符串。如果<code class="codeph">$input</code>是一个空序列，则该函数返回一个空序列。其他数据类型会触发错误。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80__GUID-279F233D-9F1A-49D4-92EC-1DDE09C06F46">例</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例删除前导空格并返回字符串“ <code class="codeph">abc</code> ”：</p><pre class="pre codeblock"><code>ora-fn：trim-left（“abc”）</code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92" name="GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92"></a><h5 id="ADXDK-GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92" class="sect5">ORA-FN：修剪右</h5>
                     <div>
                        <p>删除任何尾随空白区域。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92__GUID-53BC7949-5ED4-49DE-83A2-D8615CD6CA26">签名</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn：trim-right（$输入为xs：string？）作为xs：string？</code></pre><div class="section">
                           <p class="subhead3" id="GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92__GUID-33F98649-53B9-46A4-BCA7-9508E7461482">参数</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$input</code> ：要修剪的字符串。如果<code class="codeph">$input</code>是一个空序列，则该函数返回一个空序列。其他数据类型会触发错误。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92__GUID-64E1BB38-95AC-48A0-9F9C-CB480C527417">例</p>
                        </div>
                        <!-- class="section" -->
                        <p>此示例删除尾随空格并返回字符串“ <code class="codeph">abc</code> ”：</p><pre class="pre codeblock"><code>ora-fn：trim-left（“abc”）</code></pre></div>
                  </div>
               </div>
            </div><a id="ADXDK99996"></a><div class="props_rev_3"><a id="GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0" name="GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0"></a><h3 id="ADXDK-GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0" class="sect3">适用于Java的XQuery处理器的标准和规范</h3>
               <div>
                  <p>列出了适用于Java的XDK XQuery处理器符合的标准和规范。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquery_30" target="_blank"><span class="italic">XQuery 3.0：XML查询语言</span></a></p>
                        <div class="infoboxnote" id="GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0__GUID-BD352653-E22D-451D-AD74-88E1515EDB8D">
                           <p class="notep1">注意：</p>支持所有XQuery 1.0级别功能。除以下内容外，支持XQuery 3.0级别功能：FLWOR窗口子句，FLWOR计数子句，名称空间构造函数，十进制格式声明， <code class="codeph">fn:format-number</code> ， <code class="codeph">fn:format-integer</code> ， <code class="codeph">fn:format-date</code> ， <code class="codeph">fn:format-time</code> ， <code class="codeph">fn:path</code>和更高阶的XQuery函数。
                        </div>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_tr_xquery_update10" target="_blank"><span class="italic">XQuery Update Facility 1.0</span></a></p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xqueryx_30" target="_blank"><span class="italic">XQueryX 3.0</span></a> ，XQuery 3.0的XML语法</p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=jcp_org_jsr225" target="_blank"><span class="italic">JSR-000225用于Java的XQuery API</span></a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0__GUID-40808998-C99E-40AE-BCD8-CF1CDC2DCD22">
                     <p class="notep1">注意：</p>
                     <p>用于Java的XDK XQuery处理器无法与其他XQJ实现互操作，包括Oracle XML DB的Oracle XQJ实现。 （有关<span class="italic">可互操作</span>的含义，请参阅JSR-225：Java的XQuery API。）
                     </p>
                  </div>
               </div><a id="ADXDK99968"></a><a id="ADXDK99967"></a><div class="props_rev_3"><a id="GUID-19038D1D-9BB6-4973-BD8A-6C885A1300E0" name="GUID-19038D1D-9BB6-4973-BD8A-6C885A1300E0"></a><h4 id="ADXDK-GUID-19038D1D-9BB6-4973-BD8A-6C885A1300E0" class="sect4">可选的XQuery功能</h4>
                  <div>
                     <p>XQuery规范将某些功能定义为可选。链接提供给指定XDK支持的标准。</p>
                     <p>这些是XDK支持的可选功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xqueryschemaimport" target="_blank">架构导入</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xqueryschemavalid" target="_blank">验证表达式</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquerystatictyping" target="_blank">静态打字</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquerystaticupdate" target="_blank">静态类型更新</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquery_modules" target="_blank">模块</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquery_serial8n" target="_blank">序列化</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADXDK124"></a><a id="ADXDK125"></a><a id="ADXDK126"></a><a id="ADXDK127"></a><a id="ADXDK123"></a><div class="props_rev_3"><a id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53" name="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53"></a><h4 id="ADXDK-GUID-64686275-A3CA-4C60-934C-CA8CC6636E53" class="sect4">实施定义的项目</h4>
                  <div>
                     <p>XQJ和XQuery规范将某些方面的定义留给实现。简要描述了XDK的实现定义项。</p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJHHFGH" title="xqj支持表">表15-2</a>总结了XQJ实现定义的项目。
                     </p>
                     <div class="tblformalwide" id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJHHFGH">
                        <p class="titleintable">表15-2 XQJ实现定义的项目</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XQJ实现定义的项目" width="100%" border="1" summary="table of xqj support" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="50%" id="d53703e4388">描述</th>
                                 <th align="left" valign="bottom" width="50%" id="d53703e4391">行为</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4396" headers="d53703e4388 ">
                                    <p><code class="codeph">XQDataSource</code>实现的类名</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4396 d53703e4391 ">
                                    <p><code class="codeph">oracle.xml.xquery。OXQDataSource</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4408" headers="d53703e4388 ">
                                    <p>在<code class="codeph">OXQDataSource</code>定义的属性</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4408 d53703e4391 ">
                                    <p>没有。用户名和密码将被忽略。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4417" headers="d53703e4388 ">
                                    <p>JDBC连接支持</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4417 d53703e4391 ">
                                    <p>不支持JDBC连接。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4424" headers="d53703e4388 ">
                                    <p>命令</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4424 d53703e4391 ">
                                    <p>不支持。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4431" headers="d53703e4388 ">
                                    <p>使用方法<code class="codeph">XQPreparedExpression.cancel()</code>取消查询执行</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4431 d53703e4391 ">
                                    <p>是。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4440" headers="d53703e4388 ">
                                    <p>序列化</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4440 d53703e4391 ">
                                    <p>是。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4447" headers="d53703e4388 ">
                                    <p>其他StAX或SAX事件</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4447 d53703e4391 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4454" headers="d53703e4388 ">
                                    <p>用户定义的模式类型</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4454 d53703e4391 ">
                                    <p>是。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4461" headers="d53703e4388 ">
                                    <p>节点绑定到外部变量时的节点标识，文档顺序和全节点上下文保留</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4461 d53703e4391 ">
                                    <p>没有保留。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4468" headers="d53703e4388 ">
                                    <p>登录超时</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4468 d53703e4391 ">
                                    <p>不支持。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4475" headers="d53703e4388 ">
                                    <p>交易</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4475 d53703e4391 ">
                                    <p>不支持。如果调用事务方法，则抛出异常。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4483" headers="d53703e4388 ">
                                    <p>如果输入节点不是文档节点， <code class="codeph">XQItemAccessor.getNodeUri()</code>方法行为</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4483 d53703e4391 ">
                                    <p>例外。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4492" headers="d53703e4388 ">
                                    <p>匿名类型的<code class="codeph">XQItemType.getTypeName()</code>方法</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4492 d53703e4391 ">
                                    <p>一个独特的名字。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4501" headers="d53703e4388 ">
                                    <p><code class="codeph">XQItemType.getSchemaURI()</code>方法</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4501 d53703e4391 ">
                                    <p>从XQJ创建类型时返回模式URI。不，否则。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4510" headers="d53703e4388 ">
                                    <p>如果输入不是格式良好的XML文档， <code class="codeph">bindDocument()</code> <code class="codeph">XQDataFactory.createItemFromDocument()</code>和<code class="codeph">bindDocument()</code>方法</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4510 d53703e4391 ">
                                    <p>例外。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4522" headers="d53703e4388 ">
                                    <p>类<code class="codeph">XQQueryException</code>返回的其他错误代码</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4522 d53703e4391 ">
                                    <p>特定于Oracle的错误代码的限定名称位于命名空间<code class="codeph">http://xmlns.oracle.com/xdk/xquery/errors</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4534" headers="d53703e4388 ">
                                    <p><code class="codeph">ConnectionPoolXQDataSource</code> ， <code class="codeph">PooledXQConnection</code> ， <code class="codeph">XQConnectionEvent</code> ， <code class="codeph">XQConnectionEventListener</code>接口</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4534 d53703e4391 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4552" headers="d53703e4388 ">
                                    <p><code class="codeph">XQDataSource.getConnection（java.sql中。连接）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4552 d53703e4391 ">
                                    <p>不支持JDBC连接。如果调用此方法，则抛出异常。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4560" headers="d53703e4388 ">
                                    <p><code class="codeph">XQDataSource.getConnection（java.lang中。String，java.lang。串）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4560 d53703e4391 ">
                                    <p>与<code class="codeph">getConnection()</code>相同。参数被忽略。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__GUID-025084F3-A4A8-44A1-9CF2-5F1CA576DEF0">
                        <p class="notep1">注意：</p>
                        <p>XDK对<a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJHHFGH" title="xqj支持表">表15-2中</a>的功能的支持与Oracle XML DB对它们的支持不同。
                        </p>
                     </div>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJBDCIH" title="实现定义的项目表">表15-3</a>总结了XQuery实现定义的项目。
                     </p>
                     <div class="tblformalwide" id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJBDCIH">
                        <p class="titleintable">表15-3 XQuery实现定义的项目</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XQuery实现定义的项目" width="100%" border="1" summary="Table of implementation-defined items" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="49%" id="d53703e4594">项目</th>
                                 <th align="left" valign="bottom" width="51%" id="d53703e4597">行为</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4602" headers="d53703e4594 ">
                                    <p>用于构造表达式的Unicode版本</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4602 d53703e4597 ">
                                    <p>取决于使用的Java版本。不同的Java版本支持不同版本的Unicode。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4609" headers="d53703e4594 ">
                                    <p>静态着名的排序规则</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4609 d53703e4597 ">
                                    <p>从类<code class="codeph">java.text.派生的Unicode代码点排序规则和排序规则<code class="codeph">java.text.Collator</code>或<code class="codeph">oracle.i18n.text.OraCollator</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4622" headers="d53703e4594 ">
                                    <p>隐含时区。</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4622 d53703e4597 ">
                                    <p>使用默认时区，由方法<code class="codeph">java.util.确定<code class="codeph">java.util.Calendar.getInstance()</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4632" headers="d53703e4594 ">
                                    <p>提出警告的情况以及处理警告的方式</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4632 d53703e4597 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4639" headers="d53703e4594 ">
                                    <p>将错误报告给外部处理环境的方法</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4639 d53703e4597 ">
                                    <p>例外<code class="codeph">javax.xml.xquery.XQException</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4649" headers="d53703e4594 ">
                                    <p>实现是基于XML 1.0和XML名称的规则，还是基于XML 1.1和XML Names 1.1的规则</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4649 d53703e4597 ">
                                    <p>1.0。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4656" headers="d53703e4594 ">
                                    <p>静态上下文或动态上下文的任何组件，由实现覆盖或扩充</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4656 d53703e4597 ">
                                    <p><a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJGHGHD" title="默认上下文属性值的定义表">见表15-5</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4668" headers="d53703e4594 ">
                                    <p>如果不支持全轴功能，则实现支持哪些可选轴</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4668 d53703e4597 ">
                                    <p>全力支持。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4675" headers="d53703e4594 ">
                                    <p>订单键（sortspec）在order by子句中返回的空序列的默认处理（空最小或空最大）</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4675 d53703e4597 ">
                                    <p><code class="codeph">least</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4684" headers="d53703e4594 ">
                                    <p>实现识别的任何扩展表达式（pragma）的名称和语义</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4684 d53703e4597 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4691" headers="d53703e4594 ">
                                    <p>实现识别的任何选项声明的名称和语义</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4691 d53703e4597 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4699" headers="d53703e4594 ">
                                    <p>可以将参数传递给外部函数的协议（如果有），并且函数的结果可以返回到调用查询</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4699 d53703e4597 ">
                                    <p>由XQJ定义。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4706" headers="d53703e4594 ">
                                    <p>如果支持模块功能，则识别模块导入导入的特定模块的过程（包括处理位置提示，如果有的话）</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4706 d53703e4597 ">
                                    <p>实体解析器。请参阅<a href="using-xquery-processor-for-Java.html#GUID-5E83610F-647D-4AE5-801B-878244FB6949" title="XDK使用实体解析器框架扩展XQJ，以控制在查询处理期间如何获取文档，模式，模块，排序规则和外部函数。本节中的示例显示如何将实体解析器用于多种类型的实体。">XQJ实体解决方案</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4719" headers="d53703e4594 ">
                                    <p>如果支持静态类型功能，则实现支持的任何静态类型扩展</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4719 d53703e4597 ">
                                    <p>严格模式（基于子类型）和乐观模式（基于类型交集）。乐观模式是默认模式。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4726" headers="d53703e4594 ">
                                    <p>如果支持序列化功能，则调用序列化的方法</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4726 d53703e4597 ">
                                    <p>由XQJ定义。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4733" headers="d53703e4594 ">
                                    <p>如果支持序列化功能，则<code class="codeph">byte-order-mark</code> ， <code class="codeph">encoding</code> ， <code class="codeph">media-type</code> ， <code class="codeph">normalization-form</code> ， <code class="codeph">omit-xml-declaration</code> ， <code class="codeph">standalone</code>和<code class="codeph">version</code>参数的默认值</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4733 d53703e4597 ">
                                    <p>请参阅<code class="codeph">oracle.xml.xquery.接口<code class="codeph">oracle.xml.xquery.<a href="../jaxml/index.html" target="_blank"><span><cite>Oracle数据库XML Java API参考中的</cite></span></a> OXQSerializationParameters</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4771" headers="d53703e4594 ">
                                    <p>限制各种数据类型的值范围。</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4771 d53703e4597 ">
                                    <p>十进制和整数值具有任意精度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4778" headers="d53703e4594 ">
                                    <p>由实现或通过实现定义的API提供的函数的签名（参见XQuery标准，第2.1.1节， <span class="italic">静态上下文</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4778 d53703e4597 ">
                                    <p>请参阅<a href="using-xquery-processor-for-Java.html#GUID-19382C4B-0797-444D-9770-3620525E8978" title="Oracle支持标准的XQuery函数和运算符，以及一些特定于Oracle的函数。">Oracle XQuery函数和操作符</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4794" headers="d53703e4594 ">
                                    <p>实现提供的任何环境变量。</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4794 d53703e4597 ">
                                    <p>实体解析器。请参阅<a href="using-xquery-processor-for-Java.html#GUID-5E83610F-647D-4AE5-801B-878244FB6949" title="XDK使用实体解析器框架扩展XQJ，以控制在查询处理期间如何获取文档，模式，模块，排序规则和外部函数。本节中的示例显示如何将实体解析器用于多种类型的实体。">XQJ实体解决方案</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4807" headers="d53703e4594 ">
                                    <p>用于静态类型的任何规则（参见XQuery标准，第2.2.3.1节， <span class="italic">静态分析阶段</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4807 d53703e4597 ">
                                    <p>默认为乐观，悲观可配置。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4817" headers="d53703e4594 ">
                                    <p>实现提供的任何序列化参数（参见XQuery标准，2.2.4 <span class="italic">序列化</span>部分）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4817 d53703e4597 ">
                                    <p>请参阅<code class="codeph">OXQSerializationParameters</code> 。请参阅<a href="../jaxml/index.html" target="_blank"><span><cite>Oracle数据库XML Java API参考</cite></span></a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4836" headers="d53703e4594 ">
                                    <p>序列化参数文档的位置提示标识相应XDM实例的方法（请参阅XQuery标准，第2.2.4节， <span class="italic">序列化</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4836 d53703e4597 ">
                                    <p>实体解析器， <code class="codeph">OXQEntityKind.DOCUMENT</code> 。请参阅<a href="using-xquery-processor-for-Java.html#GUID-5E83610F-647D-4AE5-801B-878244FB6949" title="XDK使用实体解析器框架扩展XQJ，以控制在查询处理期间如何获取文档，模式，模块，排序规则和外部函数。本节中的示例显示如何将实体解析器用于多种类型的实体。">XQJ实体解决方案</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4856" headers="d53703e4594 ">
                                    <p>如果外部函数的实现没有返回声明的结果类型，则返回什么错误（如果有的话）（参见XQuery标准，第2.2.5节， <span class="italic">一致性约束</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4856 d53703e4597 ">
                                    <p> <code class="codeph">XPTY0004</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4869" headers="d53703e4594 ">
                                    <p>实现定义的任何注释及其相关行为（请参阅XQuery标准，第4.15节， <span class="italic">注释</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4869 d53703e4597 ">
                                    <p>您可以使用<code class="codeph">%ora-fn:context-item</code>来允许函数调用者的上下文项作为函数的第一个参数隐式传递。
                                    </p>
                                    <p>例如，此查询的计算结果为<code class="codeph">e</code> ， <code class="codeph">f</code> ， <code class="codeph">g</code> ：</p><pre class="pre codeblock"><code>declare％ora-fn：context-item function local：foo（$ arg as node（））{node-name（$ arg）}; （&lt;e /&gt;，&lt;f /&gt;）/ local：foo（），local：foo（&lt;g /&gt;）</code></pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4895" headers="d53703e4594 ">
                                    <p>由实现定义的任何函数断言。</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4895 d53703e4597 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4902" headers="d53703e4594 ">
                                    <p>函数断言的影响可以通过第2.5.6.3节的实现来理解。判断子类型断言（AnnotationsA，AnnotationsB）。</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4902 d53703e4597 ">
                                    <p>不适用。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4909" headers="d53703e4594 ">
                                    <p>由实现定义的任何实现定义的变量。 （参见XQuery标准，第3.1.2节， <span class="italic">变量引用</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4909 d53703e4597 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4919" headers="d53703e4594 ">
                                    <p>与<code class="codeph">fn:unordered</code>相关的排序<code class="codeph">fn:unordered</code>在实现中<code class="codeph">fn:unordered</code> （参见XQuery标准，第3.11节， <span class="italic">有序和无序表达式</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4919 d53703e4597 ">
                                    <p>它不会改变输入序列的顺序。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4932" headers="d53703e4594 ">
                                    <p>通过变量<code class="codeph">err:additional</code>提供的<code class="codeph">try</code> / <code class="codeph">catch</code>的任何其他信息（参见XQuery标准，第3.15节， <span class="italic">Try / Catch表达式</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4932 d53703e4597 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4951" headers="d53703e4594 ">
                                    <p>默认的边界空间策略（参见XQuery标准，第4.3节， <span class="italic">边界空间声明</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4951 d53703e4597 ">
                                    <p><code class="codeph">strip</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4963" headers="d53703e4594 ">
                                    <p>默认排序规则（请参阅XQuery标准，第4.4节， <span class="italic">默认排序规则声明</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4963 d53703e4597 ">
                                    <p>Unicode格式。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4973" headers="d53703e4594 ">
                                    <p>默认基URI（请参阅XQuery标准，第4.5节， <span class="italic">基本URI声明</span> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4973 d53703e4597 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJEADJF" title="实现定义的XQUF项目表">表15-4</a>总结了XQuery Update Facility实现定义的项目。
                     </p>
                     <div class="tblformalwide" id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJEADJF">
                        <p class="titleintable">表15-4 XQuery更新工具实现定义的项目</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XQuery更新工具实现定义的项目" width="100%" border="1" summary="Table of implementation-defined XQUF items" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="37%" id="d53703e4998">项目</th>
                                 <th align="left" valign="bottom" width="63%" id="d53703e5001">行为</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d53703e5006" headers="d53703e4998 ">
                                    <p>此实现支持的重新验证模式。</p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d53703e5006 d53703e5001 ">
                                    <p><code class="codeph">skip</code>
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d53703e5015" headers="d53703e4998 ">
                                    <p>此实现的默认重新验证模式。</p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d53703e5015 d53703e5001 ">
                                    <p><code class="codeph">skip</code>
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d53703e5024" headers="d53703e4998 ">
                                    <p>外部函数可以通过其向调用查询返回XDM实例或挂起的更新列表或两者的机制（如果有）。</p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d53703e5024 d53703e5001 ">
                                    <p>不支持从外部函数返回挂起的更新列表。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d53703e5031" headers="d53703e4998 ">
                                    <p><code class="codeph">fn:put()</code>的语义，包括由此函数接受为操作数的节点种类。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d53703e5031 d53703e5001 ">
                                    <p>接受任何节点类型。节点的存储由实体解析器确定。请参阅类<code class="codeph">oracle.xml.xquery.OXQEntity</code>在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=JAXML" target="_blank"><span><cite>Oracle数据库XML的Java API参考</cite></span></a> ，专门为实体的文档类<code class="codeph">UPD_PUT</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJGHGHD" title="默认上下文属性值的定义表">表15-5</a>总结了静态上下文的默认初始值。
                     </p>
                     <div class="tblformalwide" id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJGHGHD">
                        <p class="titleintable">表15-5静态上下文的缺省初始值</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="静态上下文的默认初始值" width="100%" border="1" summary="Table of definitions for default context property values" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d53703e5068">上下文组件</th>
                                 <th align="left" valign="bottom" width="65%" id="d53703e5071">默认值</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5076" headers="d53703e5068 ">
                                    <p>静态名称空间</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5076 d53703e5071 ">
                                    <p><code class="codeph">err</code> = <code class="codeph">http://w3.org/2005/xqt-errors</code></p>
                                    <p><code class="codeph">fn</code> = <code class="codeph">http://www.w3.org/2005/xpath-functions</code></p>
                                    <p><code class="codeph">local</code> = <code class="codeph">http://www.w3.org/2005/xquery-local-functions</code></p>
                                    <p><code class="codeph">math</code> = <code class="codeph">http://www.w3.org/2005/xpath-functions/math</code></p>
                                    <p><code class="codeph">ora-ext</code> = <code class="codeph">http://xmlns.oracle.com/xdk/xquery/extension</code></p>
                                    <p><code class="codeph">ora-java</code> = <code class="codeph">http://xmlns.oracle.com/xdk/xquery/java</code></p>
                                    <p><code class="codeph">ora-xml</code> = <code class="codeph">http://xmlns.oracle.com/xdk/xquery/xml</code></p>
                                    <p><code class="codeph">ora-fn</code> = <code class="codeph">http://xmlns.oracle.com/xdk/xquery/function</code></p>
                                    <p><code class="codeph">output</code> = <code class="codeph">http://www.w3.org/2010/xslt-xquery-serialization</code></p>
                                    <p><code class="codeph">xml</code> = <code class="codeph">http://www.w3.org/XML/1998/namespace</code></p>
                                    <p><code class="codeph">xs</code> = <code class="codeph">http://www.w3.org/2001/XMLSchema</code></p>
                                    <p><code class="codeph">xsi</code> = <code class="codeph">http://www.w3.org/2001/XMLSchema-instance</code></p>
                                    <p>以<code class="codeph">ora-</code>开头的前缀保留供Oracle使用。以<code class="codeph">ora-</code>开头的其他前缀可能会添加到将来版本中的默认静态名称空间中。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5162" headers="d53703e5068 ">
                                    <p>默认元素/类型命名空间</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5162 d53703e5071 ">
                                    <p>没有命名空间</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5169" headers="d53703e5068 ">
                                    <p>默认函数名称空间</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5169 d53703e5071 ">
                                    <p><code class="codeph">fn</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5178" headers="d53703e5068 ">
                                    <p>范围内模式类型</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5178 d53703e5071 ">
                                    <p><code class="codeph">xs</code>内置类型。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5188" headers="d53703e5068 ">
                                    <p>范围内元素声明</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5188 d53703e5071 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5195" headers="d53703e5068 ">
                                    <p>范围内属性声明</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5195 d53703e5071 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5202" headers="d53703e5068 ">
                                    <p>范围内变量</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5202 d53703e5071 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5209" headers="d53703e5068 ">
                                    <p>上下文项静态类型</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5209 d53703e5071 ">
                                    <p><code class="codeph">item()</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5218" headers="d53703e5068 ">
                                    <p>功能签名</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5218 d53703e5071 ">
                                    <p>命名空间<code class="codeph">fn</code>函数和内置原子类型的构造函数。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5228" headers="d53703e5068 ">
                                    <p>静态知名的排序规则</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5228 d53703e5071 ">
                                    <p>从类<code class="codeph">java.text.派生的Unicode代码点排序规则和排序规则<code class="codeph">java.text.Collator</code>或<code class="codeph">oracle.i18n.text.OraCollator</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5241" headers="d53703e5068 ">
                                    <p>默认排序规则</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5241 d53703e5071 ">
                                    <p>Unicode代码点排序规则：</p>
                                    <p><code class="codeph">http://www.w3.org/2005/xpath-functions/collation/codepoint</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5253" headers="d53703e5068 ">
                                    <p>施工方式</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5253 d53703e5071 ">
                                    <p><code class="codeph">preserve</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5262" headers="d53703e5068 ">
                                    <p>订购模式</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5262 d53703e5071 ">
                                    <p><code class="codeph">ordered</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5271" headers="d53703e5068 ">
                                    <p>空序列的默认顺序</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5271 d53703e5071 ">
                                    <p><code class="codeph">least</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5280" headers="d53703e5068 ">
                                    <p>边界空间政策</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5280 d53703e5071 ">
                                    <p><code class="codeph">strip</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5289" headers="d53703e5068 ">
                                    <p>复制命名空间模式</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5289 d53703e5071 ">
                                    <p><code class="codeph">preserve</code> ， <code class="codeph">no-inherit</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5301" headers="d53703e5068 ">
                                    <p>基本URI</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5301 d53703e5071 ">
                                    <p>如标准中所定义。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5308" headers="d53703e5068 ">
                                    <p>静态知名文件</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5308 d53703e5071 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5315" headers="d53703e5068 ">
                                    <p>静态知名的收藏品</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5315 d53703e5071 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5322" headers="d53703e5068 ">
                                    <p>静态已知的默认集合类型</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5322 d53703e5071 ">
                                    <p><code class="codeph">node()*</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5331" headers="d53703e5068 ">
                                    <p>序列化参数</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5331 d53703e5071 ">
                                    <p>与<code class="codeph">OXQSerializationParameters</code>的默认值相同。请参阅<a href="../jaxml/index.html" target="_blank"><span><cite>Oracle数据库XML Java API参考</cite></span></a> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
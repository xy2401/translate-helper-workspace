<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>logging_clause</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="file_specification.html" title="Previous" type="text/html"></link>
      <link rel="next" href="parallel_clause.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="file_specification.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="parallel_clause.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Common-SQL-DDL-Clauses.html" property="item" typeof="WebPage"><span property="name">常见的SQL DDL子句</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">logging_clause</li>
            </ol>
            <a id="GUID-C4212274-5595-4045-A599-F033772C496E" name="GUID-C4212274-5595-4045-A599-F033772C496E"></a><a id="SQLRF52283"></a><a id="SQLRF52284"></a><a id="SQLRF52285"></a><a id="SQLRF30009"></a>
            
            <h2 id="SQLRF-GUID-C4212274-5595-4045-A599-F033772C496E" class="sect2"><span class="italic">logging_clause</span> 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-C4212274-5595-4045-A599-F033772C496E__GUID-6C385AE0-FF87-4742-BB3C-780197887896">目的</p>
                  <p><span class="italic"><code class="codeph">logging_clause</code></span>允许您指定是否将在重做日志文件（ <code class="codeph">LOGGING</code> ）中记录某些DML操作（ <code class="codeph">NOLOGGING</code> ）。
                  </p>
                  <p>您可以在以下语句中指定<span class="italic"><code class="codeph">logging_clause</code></span> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code>和<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ：用于记录表，表分区，LOB段或索引组织表的溢出段（请参阅<a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6">CREATE TABLE</a>和<a href="ALTER-TABLE.html#GUID-552E7373-BF93-477D-9DA3-B2C9386F2877">ALTER TABLE</a> ）。
                        </p>
                        <div class="infoboxnote" id="GUID-C4212274-5595-4045-A599-F033772C496E__GUID-20D5BB1E-F87D-4193-9773-4A77281CB371">
                           <p class="notep1">注意：</p>
                           <p>为LOB列指定的日志记录可能与表级别的日志记录集不同。如果在表级别指定<code class="codeph">LOGGING</code> ，为LOB列指定<code class="codeph">NOLOGGING</code> ，则会记录对基表行的DML更改，但不会记录对LOB数据的DML更改。
                           </p>
                        </div>
                     </li>
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code>和<code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ：用于记录索引或索引分区（请参阅<a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE">CREATE INDEX</a>和<a href="ALTER-INDEX.html#GUID-D8F648E7-8C07-4C89-BB71-862512536558">ALTER INDEX</a> ）。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>和<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> ：用于记录物化视图，其中一个分区或LOB段（请参阅<a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B">创建</a>物化视图和<a href="ALTER-MATERIALIZED-VIEW.html#GUID-29EE5682-AE42-4879-ABAD-E34E66ADD233">更改物料化视图</a> ）。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code>和<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code> ：对物化视图日志或它的分区中的一个的记录（见<a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B">CREATE物化视图日志</a>和<a href="ALTER-MATERIALIZED-VIEW-LOG.html#GUID-4DAD5E6F-E30A-43D0-B023-634752E0E627">ALTER物化视图日志</a> ）。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">TABLESPACE</code>和<code class="codeph">ALTER</code> <code class="codeph">TABLESPACE</code> ：设置或修改表空间中创建的所有对象的默认日志记录特征（请参阅<a href="CREATE-TABLESPACE.html#GUID-51F07BF5-EFAF-4910-9040-C473B86A8BF9">CREATE TABLESPACE</a>和<a href="ALTER-TABLESPACE.html#GUID-CA074861-55D3-4768-8995-43D4DA26365D">ALTER TABLESPACE</a> ）。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code>和<code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> ：设置或修改在可插拔数据库（PDB）中创建的所有表空间的默认日志记录特征（请参阅<a href="CREATE-PLUGGABLE-DATABASE.html#GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC">CREATE PLUGGABLE DATABASE</a>和<a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7">ALTER PLUGGABLE DATABASE</a> ）。
                        </p>
                     </li>
                  </ul>
                  <p>您还可以为以下操作指定<code class="codeph">LOGGING</code>或<code class="codeph">NOLOGGING</code> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>重建索引（使用<code class="codeph">CREATE</code> <code class="codeph">INDEX</code> ...<code class="codeph">REBUILD</code> ）</p>
                     </li>
                     <li>
                        <p>移动表格（使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">MOVE</code> ）</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C4212274-5595-4045-A599-F033772C496E__GUID-FC2CFF66-5476-4F33-A77D-2AF86847CB49">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-C4212274-5595-4045-A599-F033772C496E__CJAHABGF">
                  <p class="subhead1" id="GUID-C4212274-5595-4045-A599-F033772C496E__GUID-B61521E3-DD7E-425A-8F86-1C735D62E370"><span class="italic">logging_clause</span> :: =</p>
                  <div class="figure" id="GUID-C4212274-5595-4045-A599-F033772C496E__GUID-5A23F5A8-30D2-4CC1-90C5-6D3F8F42C6ED"><img src="img/logging_clause.gif" alt="logging_clause.eps的描述如下" title="logging_clause.eps的描述如下" longdesc="img_text/logging_clause.html"><br><a href="img_text/logging_clause.html">说明logging_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C4212274-5595-4045-A599-F033772C496E__GUID-3F488687-F8FA-4DCD-B305-993C747BDE1D">语义</p>
                  <p><a id="d189729e345" class="indexterm-anchor"></a><a id="d189729e349" class="indexterm-anchor"></a><a id="d189729e353" class="indexterm-anchor"></a>本节描述<span class="italic"><code class="codeph">logging_clause</code></span>的语义。有关其他信息，请参阅用于设置或重置特定数据库对象的日志记录特征的SQL语句。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果指定<code class="codeph">LOGGING</code> ，则将在重做日志文件中记录数据库对象的创建以及后续插入对象。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">NOLOGGING</code> ，则将在重做日志文件中记录数据库对象以及后续常规插入的创建。不会记录直接路径插入。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于<span class="bold">非分区对象</span> ，为此子句指定的值是与对象关联的段的实际物理属性。
                              </p>
                           </li>
                           <li>
                              <p>对于<span class="bold">分区对象</span> ，为此子句指定的值是与<code class="codeph">CREATE</code>语句中指定的所有分区关联的段的默认物理属性（以及后续的<code class="codeph">ALTER</code> ...除非在<code class="codeph">PARTITION</code>描述中指定logging属性，否则请<code class="codeph">ADD</code> <code class="codeph">PARTITION</code>语句。
                              </p>
                           </li>
                           <li>
                              <p>对于SecureFiles LOB， <code class="codeph">NOLOGGING</code>设置在内部转换为<code class="codeph">FILESYSTEM_LIKE_LOGGING</code> 。</p>
                           </li>
                           <li>
                              <p>BasicFiles LOB不允许使用<code class="codeph">CACHE</code> <code class="codeph">NOLOGGING</code> 。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">FILESYSTEM_LIKE_LOGGING</code>子句仅对SecureFiles LOB段的日志记录有效。您不能为BasicFiles LOB指定此设置。如果要仅记录元数据更改，请指定此设置。此设置类似于文件系统的元数据日记，这减少了从故障中恢复的平均时间。SecureFiles LOB的<code class="codeph">LOGGING</code>设置类似于文件系统的数据日记。<code class="codeph">LOGGING</code>和<code class="codeph">FILESYSTEM_LIKE_LOGGING</code>设置都通过SecureFiles提供完整的事务文件系统。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-C4212274-5595-4045-A599-F033772C496E__GUID-FAB77B6B-5DA9-4840-9C56-866096282DE0">
                     <p class="notep1">注意：</p>
                     <p>对于LOB段，使用<code class="codeph">NOLOGGING</code>和<code class="codeph">FILESYSTEM_LIKE_LOGGING</code>设置，可以在备份操作期间在磁盘上更改数据，从而导致备份不一致。要避免这种情况，请通过为LOB存储设置<code class="codeph">LOGGING</code> ，确保对LOB段的更改保存在重做日志文件中。或者，将数据库更改为<code class="codeph">FORCE</code> <code class="codeph">LOGGING</code>模式，以便对重做中保存对<span class="italic">所有</span> LOB段的更改。
                     </p>
                  </div>
                  <p>如果要为其指定日志记录属性的对象驻留在强制日志记录模式下的数据库或表空间中，则Oracle数据库将忽略任何<code class="codeph">NOLOGGING</code>设置，直到数据库或表空间退出强制日志记录模式。
                  </p>
                  <p>如果数据库在<code class="codeph">ARCHIVELOG</code>模式下运行，则在<code class="codeph">LOGGING</code>操作之前从备份进行介质恢复会重新创建对象。但是，在<code class="codeph">NOLOGGING</code>操作之前从备份中恢复介质不会重新创建对象。
                  </p>
                  <p><a id="d189729e475" class="indexterm-anchor"></a>在<code class="codeph">NOLOGGING</code>模式下为操作生成的重做日志的大小明显小于在<code class="codeph">LOGGING</code>模式下生成的日志。
                  </p>
                  <p><a id="d189729e487" class="indexterm-anchor"></a>在<code class="codeph">NOLOGGING</code>模式下，使用最少的日志记录修改数据（标记新的范围<code class="codeph">INVALID</code>和记录字典更改）。在介质恢复期间应用时，范围无效记录会将一系列块标记为逻辑损坏，因为重做数据未完全记录。因此，如果您无法承受丢失数据库对象，那么您应该在<code class="codeph">NOLOGGING</code>操作之后进行备份。
                  </p>
                  <p><code class="codeph">NOLOGGING</code>仅支持<code class="codeph">LOGGING</code>的一部分位置。只有以下操作支持<code class="codeph">NOLOGGING</code>模式：</p>
                  <p><span class="bold">DML</span> ：</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>由<code class="codeph">INSERT</code>或<code class="codeph">MERGE</code>语句产生的直接路径<code class="codeph">INSERT</code> （串行或并行）。<code class="codeph">NOLOGGING</code>不适用于<code class="codeph">MERGE</code>语句产生的任何<code class="codeph">UPDATE</code>操作。
                        </p>
                     </li>
                     <li>
                        <p>直接加载器（SQL *加载器）</p>
                     </li>
                  </ul>
                  <p><span class="bold">DDL</span> ：</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ...<code class="codeph">AS</code> <code class="codeph">SELECT</code> （在<code class="codeph">NOLOGGING</code>模式下，将记录表的创建，但不会记录直接路径插入。）
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ...<span class="italic"><code class="codeph">LOB_storage_clause</code></span> ...<span class="italic"><code class="codeph">LOB_parameters</code></span> ......<code class="codeph">CACHE</code> | <code class="codeph">NOCACHE</code> | <code class="codeph">CACHE</code> <code class="codeph">READS</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<span class="italic"><code class="codeph">LOB_storage_clause</code></span> ...<span class="italic"><code class="codeph">LOB_parameters</code></span> ......<code class="codeph">CACHE</code> | <code class="codeph">NOCACHE</code> | <code class="codeph">CACHE</code> <code class="codeph">READS</code> （指定新创建的LOB列的日志记录）</p>
                     </li>
                     <li>
                        <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ... <span class="italic"><code class="codeph">modify_LOB_storage_clause</code></span> ... <span class="italic"><code class="codeph">modify_LOB_parameters</code></span> ...<code class="codeph">CACHE</code> | <code class="codeph">NOCACHE</code> | <code class="codeph">CACHE</code> <code class="codeph">READS</code> （更改现有LOB列的日志记录）</p>
                     </li>
                     <li>
                        <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">移动</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...（涉及数据移动的所有分区操作）</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">ADD</code> <code class="codeph">PARTITION</code> （仅限散列分区）</p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">MERGE</code> <code class="codeph">PARTITIONS</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">MOVE</code> <code class="codeph">PARTITION</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">MODIFY</code> <code class="codeph">PARTITION</code> ......<code class="codeph">添加子目录</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">MODIFY</code> <code class="codeph">PARTITION</code> ......<code class="codeph">COALESCE</code> <code class="codeph">SUBPARTITION</code></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ......<code class="codeph">重建</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ......<code class="codeph">REBUILD</code> <code class="codeph">[SUB]PARTITION</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ......<code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code></p>
                     </li>
                  </ul>
                  <p>对于<span class="bold">LOB以外的对象</span> ，如果省略此子句，则对象的logging属性默认为其所在的表空间的logging属性。
                  </p>
                  <p>对于<span class="bold">LOB</span> ，如果省略此子句，则：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果指定<code class="codeph">CACHE</code> ，则使用<code class="codeph">LOGGING</code> （因为您不能使用<code class="codeph">CACHE</code> <code class="codeph">NOLOGGING</code> ）。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">NOCACHE</code>或<code class="codeph">CACHE</code> <code class="codeph">READS</code> ，则logging属性默认为其所在的表空间的logging属性。
                        </p>
                     </li>
                  </ul>
                  <p><code class="codeph">NOLOGGING</code>不适用于内部存储的LOB（在包含行数据的表中）。如果为值小于4000字节的LOB指定<code class="codeph">NOLOGGING</code>并且尚未禁用<code class="codeph">STORAGE</code> <code class="codeph">IN</code> <code class="codeph">ROW</code> ，则Oracle会忽略<code class="codeph">NOLOGGING</code>规范并将LOB数据视为与其他表数据相同。
                  </p>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
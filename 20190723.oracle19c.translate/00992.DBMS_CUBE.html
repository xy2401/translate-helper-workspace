<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="DBMS_CUBE contains subprograms that create OLAP cubes and dimensions, and that load and process the data for querying."></meta>
      <meta name="description" content="DBMS_CUBE contains subprograms that create OLAP cubes and dimensions, and that load and process the data for querying."></meta>
      <title>DBMS_CUBE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="DBMS_CUBE contains subprograms that create OLAP cubes and dimensions, and that load and process the data for querying."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_CSX_ADMIN.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_CUBE_ADVISE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_CSX_ADMIN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_CUBE_ADVISE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_CUBE</li>
            </ol>
            <a id="GUID-73E024C5-CB5D-4153-AEEB-BF50E15A2B56" name="GUID-73E024C5-CB5D-4153-AEEB-BF50E15A2B56"></a><a id="ARPLS218"></a><a id="ARPLS218"></a>
            
            <h2 id="ARPLS-GUID-73E024C5-CB5D-4153-AEEB-BF50E15A2B56" class="sect2"><span class="enumeration_chapter">41</span> DBMS_CUBE</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_CUBE</code>包含创建OLAP多维数据集和维度的子程序，并加载和处理数据以进行查询。
               </p>
               <div class="infoboxnotealso" id="GUID-73E024C5-CB5D-4153-AEEB-BF50E15A2B56__GUID-388E6705-0F64-4967-9713-97EA82132DFE">
                  <p class="notep1">也可以看看：</p>
                  <p><cite><span><cite>Oracle OLAP用户指南</cite></span></cite> <a href="../olaug/overview.html#OLAUG-GUID-E2056FE4-C623-4D29-B7D8-C4762F941966" target="_blank">中的Oracle数据库</a>中的<a href="../olaug/overview.html#OLAUG-GUID-E2056FE4-C623-4D29-B7D8-C4762F941966" target="_blank">OLAP技术，</a>关于使用OLAP选项来支持商业智能和分析应用程序。
                  </p>
               </div>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_CUBE.html#GUID-D7FA45F4-21CB-4DC9-8AA9-1BA38110A953" title="多维数据集和多维数据集维度是支持多维分析的一流数据对象。它们存储在称为分析工作区的容器中。Oracle数据库的OLAP选项提供了多维对象和分析。">使用DBMS_CUBE</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CUBE.html#GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" title="SQL聚合管理是DBMS_CUBE中的一组PL / SQL子程序，支持从现有关系实例化视图快速部署多维数据集物化视图。">使用SQL聚合管理</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="通过将OLAP 10g对象另存为XML模板并将XML导入到其他模式，可以将OLAP 10g分析工作区升级到OLAP 12c。升级过程可以保持原始分析工作区的可访问性和未更改状态。">升级10g分析工作区</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CUBE.html#GUID-3DC165E8-194C-46F3-959E-F5F9E0DEA1F3" title="此表列出并描述了DBMS_CUBE过程子程序。">DBMS_CUBE子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS65728"></a><a id="ARPLS65728"></a><div class="props_rev_3"><a id="GUID-D7FA45F4-21CB-4DC9-8AA9-1BA38110A953" name="GUID-D7FA45F4-21CB-4DC9-8AA9-1BA38110A953"></a><h3 id="ARPLS-GUID-D7FA45F4-21CB-4DC9-8AA9-1BA38110A953" class="sect3"><span class="enumeration_section">41.1</span>使用DBMS_CUBE</h3>
               <div>
                  <p>多维数据集和多维数据集维度是支持多维分析的一流数据对象。它们存储在称为分析工作区的容器中。Oracle数据库的OLAP选项提供了多维对象和分析。</p>
                  <div class="section">
                     <p>可以将多维数据集启用为多维数据集物化视图，以自动刷新多维数据集和维度，以及查询重写。多个<code class="codeph">DBMS_CUBE</code>子程序支持创建和维护多维数据集物化视图，以替代关系物化视图。这些子程序在<span class="q">“ <a href="DBMS_CUBE.html#GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" title="SQL聚合管理是DBMS_CUBE中的一组PL / SQL子程序，支持从现有关系实例化视图快速部署多维数据集物化视图。">使用SQL聚合管理</a> ”</span>中讨论。
                     </p>
                     <p>多维数据集和维度的元数据在XML文档中定义，称为<span class="italic">模板</span> ，您可以使用<code class="codeph">CREATE_CUBE</code>或<code class="codeph">DERIVE_FROM_MVIEW</code>函数从关系<code class="codeph">CREATE_CUBE</code>化视图派生。使用名为Analytic Workspace Manager的图形工具，您可以使用分析内容增强多维数据集，或者从头开始为新多维数据集和多维数据集维度创建元数据。
                     </p>
                     <p>其他几个<code class="codeph">DBMS_CUBE</code>子程序为Analytic Workspace Manager提供了一种SQL替代方法，用于从XML模板创建分析工作区以及刷新存储在多维数据集和维度中的数据。<code class="codeph">IMPORT_XML</code>过程使用XML模板中的多维数据集和多维数据集维度创建分析工作区。<code class="codeph">BUILD</code>过程将数据从其数据源加载到多维数据集和维度中，并执行准备查询数据所需的任何处理步骤。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS73170"></a><a id="ARPLS73170"></a><div class="props_rev_3"><a id="GUID-3E317D67-8751-41A6-9706-63439F1B4837" name="GUID-3E317D67-8751-41A6-9706-63439F1B4837"></a><h4 id="ARPLS-GUID-3E317D67-8751-41A6-9706-63439F1B4837" class="sect4"><span class="enumeration_section">41.1.1</span> DBMS_CUBE安全模型</h4>
                  <div>
                     <p>使用DBMS_CUBE包需要某些角色和系统特权。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3E317D67-8751-41A6-9706-63439F1B4837__GUID-E77B646D-2DAB-42F0-B98A-95CC6CF5100C">要在用户自己的架构中创建维对象：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d202489e376" class="indexterm-anchor"></a><a id="d202489e378" class="indexterm-anchor"></a> <code class="codeph">OLAP_USER</code>角色</p>
                           </li>
                           <li>
                              <p><a id="d202489e385" class="indexterm-anchor"></a> <code class="codeph">CREATE SESSION</code>权限</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E317D67-8751-41A6-9706-63439F1B4837__GUID-FBDC4853-F45B-46B3-B333-84FCC4E5F6BA">要在不同的模式中创建维对象：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d202489e396" class="indexterm-anchor"></a> <code class="codeph">OLAP_DBA</code>角色</p>
                           </li>
                           <li>
                              <p><a id="d202489e403" class="indexterm-anchor"></a> <code class="codeph">CREATE SESSION</code>权限</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E317D67-8751-41A6-9706-63439F1B4837__GUID-C39F6BDA-214E-4686-9A81-A43E538A32F0">要在用户自己的架构中创建多维数据集物化视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d202489e414" class="indexterm-anchor"></a> <code class="codeph">CREATE MATERIALIZED VIEW</code>权限</p>
                           </li>
                           <li>
                              <p><a id="d202489e421" class="indexterm-anchor"></a> <code class="codeph">CREATE DIMENSION</code>权限</p>
                           </li>
                           <li>
                              <p><a id="d202489e428" class="indexterm-anchor"></a> <code class="codeph">ADVISOR</code>特权</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E317D67-8751-41A6-9706-63439F1B4837__GUID-970FB435-42D4-498A-A68C-B79D37005A98">要在不同的模式中创建多维数据集物化视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d202489e439" class="indexterm-anchor"></a> <code class="codeph">CREATE ANY MATERIALIZED VIEW</code>权限</p>
                           </li>
                           <li>
                              <p><a id="d202489e446" class="indexterm-anchor"></a> <code class="codeph">CREATE ANY DIMENSION</code>权限</p>
                           </li>
                           <li>
                              <p><a id="d202489e453" class="indexterm-anchor"></a> <code class="codeph">ADVISOR</code>特权</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果源表位于不同的模式中，则维对象的所有者需要对这些表具有<code class="codeph">SELECT</code>对象权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ARPLS65729"></a><a id="ARPLS65729"></a><div class="props_rev_3"><a id="GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" name="GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184"></a><h3 id="ARPLS-GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" class="sect3"><span class="enumeration_section">41.2</span>使用SQL聚合管理</h3>
               <div>
                  <p>SQL聚合管理是<code class="codeph">DBMS_CUBE</code>中的一组PL / SQL子程序，支持从现有关系<code class="codeph">DBMS_CUBE</code>化视图快速部署多维数据集物化视图。
                  </p>
                  <div class="section">
                     <p>多维数据集物化视图是已增强的多维数据集，可使用Oracle数据库的自动刷新和查询重写功能。单个多维数据集物化视图可以替换事实表上的许多摘要的关系物化视图，从而为所有摘要数据提供统一的响应时间。</p>
                     <p>多维数据集物化视图为查询详细关系表摘要的应用程序带来了OLAP选项的快速更新和快速查询功能。生成摘要数据并将其存储在多维数据集中，查询重写会自动将查询重定向到多维数据集物化视图。应用程序具有出色的查询性能。</p>
                     <p>在创建多维数据集物化视图的过程中， <code class="codeph">DBMS_CUBE</code>还会创建一个功能齐全的分析工作区，包括多维数据集和多维数据集维度。多维数据集存储多维数据集物化视图的数据，而不是存储关系物化视图的数据的表。多维数据集还可以支持各种分析功能，通过信息丰富的内容增强数据库。
                     </p>
                     <p>多维数据集物化视图与所有其他物化视图一起注册在数据字典中。一个<a id="d202489e576" class="indexterm-anchor"></a> <code class="codeph">CB$</code>前缀标识多维数据集物化视图。
                     </p>
                     <p><code class="codeph">DBMS_CUBE</code>子程序还支持多维数据集物化视图的生命周期管理。
                     </p>
                     <div class="infoboxnotealso" id="GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184__GUID-E64F2ACF-42F1-459C-A626-0C18EBC0357D">
                        <p class="notep1">也可以看看：</p>
                        <p>在<span><cite>Oracle OLAP用户指南中</cite></span>向多维数据集<a href="../olaug/creating-dimensions-and-cubes.html#OLAUG-GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C" target="_blank">添加物化视图功能，以</a>获取有关多维数据集物化视图和增强OLAP分析的更多信息。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS65730"></a><a id="ARPLS65730"></a><div class="props_rev_3"><a id="GUID-1A253423-FD1A-4452-B91E-C199D0A93CDE" name="GUID-1A253423-FD1A-4452-B91E-C199D0A93CDE"></a><h4 id="ARPLS-GUID-1A253423-FD1A-4452-B91E-C199D0A93CDE" class="sect4"><span class="enumeration_section">41.2.1</span> SQL聚合管理中的子程序</h4>
                  <div>
                     <p>SQL聚合管理包括四个子程序。</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3" title="此函数根据关系物化视图的定义创建立方体物化视图。">CREATE_MVIEW函数</a></p>
                           </li>
                           <li>
                              <p><a href="DBMS_CUBE.html#GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" title="此函数使用从现有关系实例化视图派生的信息生成XML模板，该模板使用物化视图功能定义多维数据集。">DERIVE_FROM_MVIEW函数</a></p>
                           </li>
                           <li>
                              <p><a href="DBMS_CUBE.html#GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142" title="此过程从数据库中删除多维数据集物化视图和所有关联对象。这些对象包括维度实体化视图，多维数据集，多维数据集维度，级别，层次结构和分析工作区。">DROP_MVIEW程序</a></p>
                           </li>
                           <li>
                              <p><a href="DBMS_CUBE.html#GUID-861E4292-7C61-4D22-860D-18D894E882CA" title="此过程将刷新多维数据集物化视图中的数据。">REFRESH_MVIEW程序</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65731"></a><a id="ARPLS65731"></a><div class="props_rev_3"><a id="GUID-0601BA46-A24E-496B-8E6A-92B6640428D7" name="GUID-0601BA46-A24E-496B-8E6A-92B6640428D7"></a><h4 id="ARPLS-GUID-0601BA46-A24E-496B-8E6A-92B6640428D7" class="sect4"><span class="enumeration_section">41.2.2</span>关系物化视图的要求</h4>
                  <div>
                     <p>SQL聚合管理使用现有的关系实例化视图来派生生成多维数据集物化视图所需的所有信息。关系物化视图确定存储在多维数据集物化视图中的数据的详细级别。相关的关系维度对象确定聚合的范围，从物化视图子查询的GROUP BY子句中指定的最低级别到维度层次结构的最高级别。</p>
                     <div class="section">
                        <p>关系物化视图必须符合以下要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>一列或多列的显式<code class="codeph">GROUP BY</code>子句。
                              </p>
                           </li>
                           <li>
                              <p>选择列表或<code class="codeph">GROUP BY</code>子句中没有表达式。
                              </p>
                           </li>
                           <li>
                              <p>这些数字聚合方法中至少有一种： <code class="codeph">SUM</code> ， <code class="codeph">MIN</code> ， <code class="codeph">MAX</code>或<code class="codeph">AVG</code> 。</p>
                           </li>
                           <li>
                              <p>没有外连接。</p>
                           </li>
                           <li>
                              <p>包含至少一个与关系维度关联的简单列的摘要键。</p>
                              <p><span class="italic"><span class="bold">要么</span></span></p>
                              <p>包含至少一个简单列且没有层次结构或级别的摘要键。</p>
                           </li>
                           <li>
                              <p>事实列的任何类型的数字数据类型。所有事实都转换为<code class="codeph">NUMBER</code> 。</p>
                           </li>
                           <li>
                              <p>有资格重写。<code class="codeph">REWRITE_CAPABILITY</code>应为<code class="codeph">GENERAL</code> ;它不可能是<code class="codeph">NONE</code> 。请参阅<a href="../refrn/ALL_MVIEWS.html#REFRN20139" target="_blank"><span class="italic">Oracle数据库参考中</span></a>的<code class="codeph">ALL_MVIEWS</code>条目。
                              </p>
                           </li>
                           <li>
                              <p>在定义查询中不能将<code class="codeph">DISTINCT</code>或<code class="codeph">UNIQUE</code>关键字与聚合函数一起使用。例如， <code class="codeph">AVG(DISTINCT units)</code>在<code class="codeph">STRICT</code>模式下导致错误，在<code class="codeph">LOOSE</code>模式下被忽略。
                              </p>
                           </li>
                        </ul>
                        <p>渲染立方体物化视图， <code class="codeph">LOOSE</code>和<code class="codeph">STRICT</code>时，可以在两种模式之间进行选择。在<code class="codeph">STRICT</code>模式下，任何与需求的偏差都会引发异常并阻止创建实例化视图。在<code class="codeph">LOOSE</code>模式（默认值）下，允许一些偏差，但它们会影响实体化视图的内容。关系物化视图中的这些元素生成警告消息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>定义查询中的复杂表达式将被忽略，并且不会出现在多维数据集物化视图中。</p>
                           </li>
                           <li>
                              <p><code class="codeph">AVG</code>功能更改为<code class="codeph">SUM</code>和<code class="codeph">COUNT</code> 。</p>
                           </li>
                           <li>
                              <p>忽略没有<code class="codeph">SUM</code> ， <code class="codeph">MIN</code> ， <code class="codeph">MAX</code>或<code class="codeph">AVG</code>功能的<code class="codeph">COUNT</code>函数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">STDDEV</code>和<code class="codeph">VARIANCE</code>函数被忽略。
                              </p>
                           </li>
                        </ul>
                        <p>您还可以选择如何过滤<code class="codeph">WHERE</code>子句中的条件。关闭过滤时，将忽略条件。启用此选项后，将在多维数据集物化视图中呈现有效条件，但维度级别之间的不对称条件会引发异常。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65732"></a><a id="ARPLS65732"></a><div class="props_rev_3"><a id="GUID-56532689-6F4A-4001-B94B-FB5E4E2C9EE0" name="GUID-56532689-6F4A-4001-B94B-FB5E4E2C9EE0"></a><h4 id="ARPLS-GUID-56532689-6F4A-4001-B94B-FB5E4E2C9EE0" class="sect4"><span class="enumeration_section">41.2.3</span>管理和查询多维数据集物化视图的权限</h4>
                  <div>
                     <p>管理和查询多维数据集物化视图需要某些权限。</p>
                     <div class="section">
                        <p>要创建多维数据集物化视图，您必须具有以下权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CREATE [ANY] MATERIALIZED VIEW</code>权限</p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE [ANY] DIMENSION</code>权限</p>
                           </li>
                           <li>
                              <p><code class="codeph">ADVISOR</code>特权</p>
                           </li>
                        </ul>
                        <p>要使用查询重写从另一个模式访问多维数据集物化视图，您必须具有以下权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">GLOBAL QUERY REWRITE</code>权限</p>
                           </li>
                           <li>
                              <p>关系源表的<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限</p>
                           </li>
                           <li>
                              <p>支持多维数据集物化视图的分析工作区（ <code class="codeph">AW$</code> <span class="italic"><code class="codeph">name</code></span> ）的<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限</p>
                           </li>
                           <li>
                              <p>多维数据集的<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限</p>
                           </li>
                           <li>
                              <p>对多维数据集的维度具有<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限</p>
                           </li>
                        </ul>
                        <p>请注意，您需要对<span class="italic">支持</span>多维数据集物化视图的数据库对象具有<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限，但不需要在多维数据集物化视图上。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65733"></a><a id="ARPLS65733"></a><div class="props_rev_3"><a id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC" name="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC"></a><h4 id="ARPLS-GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC" class="sect4"><span class="enumeration_section">41.2.4</span> SQL聚合管理示例</h4>
                  <div>
                     <p>给出了六个SQL聚合管理示例。所有这些示例都使用示例Sales History架构，该架构安装在Oracle数据库中，具有两个关系物化视图： <code class="codeph">CAL_MONTH_SALES_MV</code>和<code class="codeph">FWEEK_PSCAT_SALES_MV</code> 。</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>关于关系物化视图CAL_MONTH_SALES_MV</p>
                           </li>
                           <li>
                              <p>创建多维数据集物化视图</p>
                           </li>
                           <li>
                              <p>禁用关系物化视图</p>
                           </li>
                           <li>
                              <p>为多维数据集物化视图创建执行计划</p>
                           </li>
                           <li>
                              <p>维护多维数据集物化视图</p>
                           </li>
                           <li>
                              <p>新数据库对象</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-7DBC759D-586E-4EC1-9B2A-F462C0389029">关于关系物化视图CAL_MONTH_SALES_MV</p>
                        <p>此示例使用<code class="codeph">CAL_MONTH_SALES_MV</code>作为创建多维数据集物化视图的基础。以下查询用于创建<code class="codeph">CAL_MONTH_SALES_MV</code> 。 <code class="codeph">CAL_MONTH_SALES_MV</code>汇总存储在<code class="codeph">SALES</code>表中的每日销售数据。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT query FROM user_mviews WHERE mview_name ='CAL_MONTH_SALES_MV'; QUERY -------------------------------------------- SELECT t.calendar_month_desc， sum（s.amount_sold）AS $ FROM sales s，次数t WHERE s.time_id = t.time_id GROUP BY t.calendar_month_desc</pre><p><code class="codeph">DBMS_CUBE</code>使用关系维度来派生多维数据集物化视图的级别和层次结构。<code class="codeph">SH</code>模式具有模式中大多数维度表的关系维度，如以下查询所示。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT dimension_name FROM user_dimensions; DIMENSION_NAME ------------------------------------- CUSTOMERS_DIM PRODUCTS_DIM TIMES_DIM CHANNELS_DIM PROMOTIONS_DIM</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-477CB87A-86D6-401C-89C6-1485066E4689">创建多维数据集物化视图</p>
                        <p>这个PL / SQL脚本使用<a id="d202489e1259" class="indexterm-anchor"></a> <code class="codeph">CREATE_MVIEW</code>函数用于从<code class="codeph">CAL_MONTH_SALES_MV</code>创建多维数据集物化视图。 <code class="codeph">CREATE_MVIEW</code>设置可选的<code class="codeph">BUILD</code>参数以立即刷新立方体物化视图。
                        </p><pre class="oac_no_warn" dir="ltr">SET serverout ON格式包装DECLARE salesaw varchar2（30）; BEGIN marketingaw：= dbms_cube.create_mview（'SH'，'CAL_MONTH_SALES_MV'，'build = immediate'）;结束; /</pre><p>这些消息确认脚本<code class="codeph">CB$CAL_MONTH_SALES</code>成功创建并刷新<code class="codeph">CB$CAL_MONTH_SALES</code> ：</p><pre class="oac_no_warn" dir="ltr">已完成立方体mview“SH”的刷新。“CB $ CAL_MONTH_SALES”，电话：20130212 08：42：58.0 03。创建的多维数据集组织物化视图“CB $ CAL_MONTH_SALES”，重写于200 130212 08：42：58.004。
</pre><p>以下查询列出了<code class="codeph">SH</code>模式中的<code class="codeph">SH</code>化视图：</p><pre class="oac_no_warn" dir="ltr">SELECT mview_name FROM user_mviews; MVIEW_NAME ------------------------------ CB $ CAL_MONTH_SALES CB $ TIMES_DIM_D1_CAL_ROLLUP CAL_MONTH_SALES_MV FWEEK_PSCAT_SALES_MV</pre><p>在数据字典中注册了两个新的物化视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CB$CAL_MONTH_SALES</code> ：多维数据集物化视图</p>
                           </li>
                           <li>
                              <p><code class="codeph">CB$TIMES_DIM_D1_CAL_ROLLUP</code> ： <code class="codeph">TIME_DIM</code>日历汇总层次结构的多维数据集维度物化视图</p>
                           </li>
                        </ul>
                        <p>多维数据集维度物化视图支持多维数据集物化视图的刷新。您不直接管理维度实体化视图。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-324BE3AB-69AF-45C8-BA3C-DE3CC4E27BF5">禁用关系物化视图</p>
                        <p>创建多维数据集物化视图后，在所有关系实例化视图上禁用查询重写，以获取多维数据集物化视图现在支持的事实。当您确定使用最佳参数创建了多维数据集物化视图时，可以删除它们。</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED VIEW cal_month_sales_mv DISABLE QUERY REWRITE;物化视图已更改。
</pre><p>还可以使用的<code class="codeph">DISABLEQRW</code>参数在<code class="codeph">CREATE_MVIEW</code>功能，即禁用查询重写在源物化视图中描述<a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACDIIJC" title="SQL聚合管理的参数说明。">表41-7</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-CD02524E-59FA-461E-B3F9-858B8DCD0A01">为多维数据集物化视图创建执行计划</p>
                        <p>您可以为多维数据集物化视图创建与关系物化视图相同的执行计划。以下命令针对<code class="codeph">SALES</code>表生成查询的执行计划，该表包含日级别的数据。答案集需要按季度汇总的数据。查询重写不会使用此查询的原始关系实例化视图，因为其数据按月汇总。但是，查询重写可以将新的多维数据集物化视图用于数月，季度，年和所有年份的摘要数据。
                        </p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR SELECT t.calendar_quarter_desc，sum（s.amount_sold）AS $ FROM sales s，times t WHERE s.time_id = t.time_id AND t.calendar_quarter_desc LIKE'2001％'GROUP BY t.calendar_quarter_desc ORDER BY t.calendar_quarter_desc;</pre><p>查询返回以下结果：</p><pre class="oac_no_warn" dir="ltr">CALENDAR_QUARTER_DESC DOLLARS --------------------- ---------- 2001-01 6547097.44 2001-02 6922468.39 2001-03 7195998.63 2001-04 7470897.52</pre><p>执行计划显示查询重写从多维数据集物化视图<code class="codeph">CB$CAL_MONTH_SALES</code>返回摘要数据，而不是从<code class="codeph">SALES</code>表重新计算它。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT plan_table_output FROM TABLE（dbms_xplan.display（））; PLAN_TABLE_OUTPUT ------------------------------------------------- -------------------------------------------------- ------------计划哈希值：2999729407 --------------------------------- -------------------------------------------------- ------------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- -------------------------------------------------- -  | 0 |选择声明| | 1 | 30 | 3（34）| 00:00:01 | | 1 | SORT GROUP BY | | 1 | 30 | 3（34）| 00:00:01 | | * 2 | MAT_VIEW REWRITE CUBE ACCESS | CB $ CAL_MONTH_SALES | 1 | 30 | 2（0）| 00:00:01 | -------------------------------------------------- -------------------------------------------------- - 谓词信息（由操作ID标识）：---------------------------------------- ----------- 2  - 过滤器（“CB $ CAL_MONTH_SALES”。“D1_CALENDAR_QUARTER_DESC”LIKE'2001％'和“CB $ CAL_MONTH_SALES”。“SYS_GID”= 63）选择了15行。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-3919278C-EC0A-4CF2-9951-FCB92EDC30C1">维护多维数据集物化视图</p>
                        <p><a id="d202489e1355" class="indexterm-anchor"></a>您可以创建自动刷新的多维数据集物化视图。但是，您可以使用<a href="DBMS_CUBE.html#GUID-861E4292-7C61-4D22-860D-18D894E882CA" title="此过程将刷新多维数据集物化视图中的数据。">REFRESH_MVIEW过程</a>随时强制刷新：</p><pre class="oac_no_warn" dir="ltr">BEGIN dbms_cube.refresh_mview（'SH'，'CB $ CAL_MONTH_SALES'）;结束; /完成了立方体mview“SH”的刷新。“CB $ CAL_MONTH_SALES”在20130212 14：30：59.534。
</pre><p><a id="d202489e1368" class="indexterm-anchor"></a>如果要删除多维数据集物化视图，请使用<a href="DBMS_CUBE.html#GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142" title="此过程从数据库中删除多维数据集物化视图和所有关联对象。这些对象包括维度实体化视图，多维数据集，多维数据集维度，级别，层次结构和分析工作区。">DROP_MVIEW过程</a> ，以便还删除所有支持的数据库对象（分析工作区，多维数据集，多维数据集维度等）：</p><pre class="oac_no_warn" dir="ltr">BEGIN dbms_cube.drop_mview（'SH'，'CB $ CAL_MONTH_SALES'）;结束; / Dropped cube组织物化视图“SH”。“CAL_MONTH_SALES”包括容器分析工作区“SH”。“CAL_MONTH_SALES_AW”在20130212 13：38：47.878。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-92C4D9C3-9BD6-406F-98A6-ABB551E82E74">新数据库对象</p>
                        <p>除了多维数据集物化视图外， <code class="codeph">CREATE_MVIEW</code>函数还创建了几个第一类数据库对象。您可以通过查询<code class="codeph">ALL_CUBES</code>和<code class="codeph">ALL_CUBE_DIMENSIONS</code>等视图，通过数据字典探索这些对象。</p>
                        <p>此示例创建了以下支持对象：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>分析工作区<code class="codeph">CAL_MONTH_SALES_AW</code> （ <code class="codeph">AW$CAL_MONTH_SALES_AW</code>表）</p>
                           </li>
                           <li>
                              <p>立方体<code class="codeph">CAL_MONTH_SALES</code></p>
                           </li>
                           <li>
                              <p>多维数据集维度<code class="codeph">TIMES_DIM_D1</code></p>
                           </li>
                           <li>
                              <p>维度层次结构<code class="codeph">CAL_ROLLUP</code></p>
                           </li>
                           <li>
                              <p>维度级别<code class="codeph">ALL_TIMES_DIM</code> ， <code class="codeph">YEAR</code> ， <code class="codeph">QUARTER</code>和<code class="codeph">MONTH</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CAL_ROLLUP</code>层次结构中级别的众多属性</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ARPLS73596"></a><a id="ARPLS73596"></a><div class="props_rev_3"><a id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" name="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D"></a><h3 id="ARPLS-GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" class="sect3"><span class="enumeration_section">41.3</span>升级10 <span class="italic">g</span>分析工作区</h3>
               <div>
                  <p>通过将OLAP 10 <span class="italic">g</span>对象另存为XML模板并将XML导入其他模式，可以将OLAP 10 <span class="italic">g</span>分析工作区升级到OLAP 12 <span class="italic">c</span> 。升级过程可以保持原始分析工作区的可访问性和未更改状态。
                  </p>
                  <div class="section">
                     <p>OLAP <span class="italic">11g</span>和OLAP 12 <span class="italic">c中的</span> Oracle OLAP元数据相同，因此您无需将OLAP 11 <span class="italic">g</span>分析工作区升级到OLAP 12 <span class="italic">c</span> 。本主题介绍如何将Oracle OLAP 10 <span class="italic">g</span>分析工作区升级到OLAP 12 <span class="italic">c</span> 。
                     </p>
                     <div class="infobox-tip" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-EF30425E-6131-44C9-A623-E84F414BBCCB">
                        <p class="notep1">小费：</p>
                        <p>Oracle建议使用Analytic Workspace Manager执行升级。请参阅“ <cite><span><cite>Oracle OLAP用户指南”中的</cite></span></cite> <a href="../olaug/getting-started-oracle-olap.html#OLAUG-GUID-5F3116A1-3752-4B54-A840-06CA44759BF8" target="_blank">从Oracle OLAP <span class="italic">10g</span>升级元数据</a> 。
                        </p>
                     </div>
                     <p><code class="codeph">DBMS_CUBE</code>这些子程序支持升级过程：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="此过程创建一个输入XML文档，该文档描述EXPORT_XML过程和EXPORT_XML_TO_FILE过程的处理选项。">CREATE_EXPORT_OPTIONS过程</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="此过程创建一个输入XML文档，该文档描述IMPORT_XML过程的处理选项。">CREATE_IMPORT_OPTIONS过程</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" title="此过程将OLAP元数据写入CLOB。">EXPORT_XML过程</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-12A6C317-F339-475C-910C-E30F40D8CB46" title="此过程将OLAP元数据导出到文件。可以使用IMPORT_XML过程将此文件导入新的或现有的分析工作区。通过这种方式，您可以在另一个模式或数据库中创建分析工作区的副本。">EXPORT_XML_TO_FILE过程</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="此过程使用XML模板创建，修改或删除分析工作区。">IMPORT_XML程序</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-478D4764-1AE1-40B3-A25C-4BE05659C703" title="此过程处理在Oracle OLAP 10g中创建的分析工作区，以便Oracle OLAP 12c客户端可以使用它们。它处理当前架构中的所有分析工作区。对于有10g分析工作区的每个模式，运行此过程一次。">INITIALIZE_CUBE_UPGRADE程序</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-50D050C8-155D-4C7B-849E-5D7AA1216780" title="此过程从OLAP 10g分析工作区中包含的元数据副本创建Oracle OLAP 12c分析工作区。原始OLAP 10g分析工作区不受影响，可以与OLAP 12c分析工作区同时存在于同一模式中。">UPGRADE_AW程序</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-D4E17214-5A90-4344-9402-03BA5D233532">先决条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>OLAP 10 <span class="italic">g</span>分析工作区可以使用OLAP标准表单元数据。
                           </p>
                        </li>
                        <li>
                           <p>OLAP 10 <span class="italic">g</span>分析工作区的自定义可能无法导出到XML模板。您必须在OLAP 12 <span class="italic">c中</span>重新创建它们。
                           </p>
                        </li>
                        <li>
                           <p>原始关系源数据必须可用于加载到新的分析工作区。如果数据位于不同的模式中或表名不同，则必须在升级后将维对象重新映射到新的关系源。</p>
                        </li>
                        <li>
                           <p>您可以在与OLAP 10 <span class="italic">g</span>分析工作区相同的架构中创建OLAP 12 <span class="italic">c</span>分析工作区。但是，如果您希望在不同的架构中创建它，则创建具有以下权限的新用户：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>OLAP 10 <span class="italic">g</span>分析工作区上的<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限（ <code class="codeph">GRANT SELECT ON</code> <span class="italic"><code class="codeph">schema</code></span> <code class="codeph">.AW$</code> <span class="italic"><code class="codeph">analytic_workspace</code></span> ）。
                                 </p>
                              </li>
                              <li>
                                 <p>包含OLAP 10 <span class="italic">g</span>分析工作区的源数据的所有数据库表和视图的<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限。
                                 </p>
                              </li>
                              <li>
                                 <p>适用于OLAP管理员的权限。</p>
                              </li>
                              <li>
                                 <p>与Oracle 10 <span class="italic">g</span>用户相同的默认表空间。
                                 </p>
                              </li>
                           </ul>
                           <p>请参阅<a href="../olaug/getting-started-oracle-olap.html#OLAUG9119" target="_blank"><span class="italic">Oracle OLAP用户指南</span></a> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-763F1320-A48E-4305-86A7-1DC605DC4008">更正命名冲突</p>
                     <p>的命名空间是在<span class="italic">OLAP10克</span>比在OLAP <span class="italic">12c</span>中不同。要成功升级，您必须识别在12 <span class="italic">c</span>命名规则下多次使用的任何10 <span class="italic">g</span>对象名称，并为它们提供唯一的名称。
                     </p>
                     <p>以下命名空间控制Oracle 12 <span class="italic">c</span>中OLAP对象名的唯一性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">架构</span> ：多维数据集，维度和度量文件夹的名称在架构中必须是唯一的。它们不能与表，视图，索引，关系维度或任何其他第一类对象的名称冲突。但是，这些OLAP 12 <span class="italic">c</span>对象名称不需要与10 <span class="italic">g</span>对象名称不同，因为它们位于不同的名称空间中。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">多维</span>数据集：度量的名称在多维数据集中必须是唯一的。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">维度</span> ：层次结构，级别和属性的名称在维度中必须是唯一的。例如，维度不能具有名为Customers的层次结构和名为Customers的级别。
                           </p>
                        </li>
                     </ul>
                     <p>您可以使用初始化表和重命名表来重命名已升级的12 <span class="italic">c</span>分析工作区中的对象。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-919468AA-98EB-4AFA-BEC4-9E7E443CD2F9">初始化表</p>
                     <p><code class="codeph">INITIALIZE_CUBE_UPGRADE</code>过程根据OLAP 12 <span class="italic">c</span>命名规则识别不明确的名称。例如，10 <span class="italic">g</span>维度可能具有层次结构和具有相同名称的级别。由于层次结构和级别位于相同的12 <span class="italic">c</span>命名空间中，因此该名称在12 <span class="italic">c中</span>不是唯一的;对于12 <span class="italic">c</span>客户端，层次结构和级别无法按名称区分。
                     </p>
                     <p><code class="codeph">INITIALIZE_CUBE_UPGRADE</code>创建并填充名为<code class="codeph">CUBE_UPGRADE_INFO</code>的表， <code class="codeph">CUBE_UPGRADE_INFO</code>包含这些级别，层次结构和属性的唯一名称。通过使用表中提供的唯一名称，12 <span class="italic">c</span>客户端可以浏览OLAP 12 <span class="italic">c</span>元数据。如果10 <span class="italic">g</span>元数据包含不明确的名称，则无法将OLAP 12 <span class="italic">c</span>客户端附加到分析工作区或在没有<code class="codeph">CUBE_UPGRADE_INFO</code>表的情况下执行升级。
                     </p>
                     <p>您可以编辑<code class="codeph">CUBE_UPGRADE_INFO</code>以将默认的唯一名称更改为您选择的名称。您还可以添加行以更改任何其他对象的名称。使用12 <span class="italic">c</span>客户端时，您会看到新的对象名称。使用10 <span class="italic">g</span>客户端时，您会看到原始名称。但是， <code class="codeph">INITIALIZE_CUBE_UPGRADE</code>过程会覆盖此表，因此您可能希望在重命名表中输入自定义项。
                     </p>
                     <p>在从OLAP 10 <span class="italic">g</span>升级期间， <code class="codeph">CUBE_UPGRADE_INFO</code>中的唯一对象名称将用作新分析工作区中12 <span class="italic">c</span>对象的名称。但是， <code class="codeph">INITIALIZE_CUBE_UPGRADE</code>不会自动为多维数据集，维度和度量文件夹提供唯一名称。要完成升级，必须确保这些对象在12 <span class="italic">c</span>命名空间中具有唯一名称。您可以在<code class="codeph">CUBE_UPGRADE_INFO</code>表或重命名表中为这些对象提供新名称。
                     </p>
                     <p>当OLAP 12 <span class="italic">c</span>客户端与OLAP 10 <span class="italic">g</span>分析工作区位于同一模式中时，它会自动使用<code class="codeph">CUBE_UPGRADE_INFO</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-0F67A884-A751-4C78-86CD-1251C634ED2F">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="DBMS_CUBE.html#GUID-478D4764-1AE1-40B3-A25C-4BE05659C703" title="此过程处理在Oracle OLAP 10g中创建的分析工作区，以便Oracle OLAP 12c客户端可以使用它们。它处理当前架构中的所有分析工作区。对于有10g分析工作区的每个模式，运行此过程一次。">INITIALIZE_CUBE_UPGRADE程序</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-2D01392A-5F38-4403-B557-15E59F8CFBE4">重命名表</p>
                     <p>您可以创建包含OLAP 12 <span class="italic">c</span>分析工作区的新对象名称的重命名表。然后，您可以在<code class="codeph">CREATE_IMPORT_OPTIONS</code>和<code class="codeph">UPGRADE_AW</code>过程中使用重命名表。
                     </p>
                     <p>在同一模式中进行升级时，必须为12 <span class="italic">c</span>分析工作区提供唯一名称。<code class="codeph">UPGRADE_AW</code>程序为此提供了一个参数;否则，您必须在重命名表中提供新名称。多维数据集名称的复制不会产生歧义，因为12 <span class="italic">c</span>多维数据集是在与10 <span class="italic">g</span>多维数据集不同的命名空间中创建的。
                     </p>
                     <p>重命名表中提供的名称仅在升级期间使用，并覆盖在<code class="codeph">CUBE_UPGRADE_INFO</code>表中输入的任何名称。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-BC1F017E-F3DC-4BC8-BB61-86AFA105ED88">要创建重命名表：</p>
                     <ol>
                        <li>
                           <p>打开SQL * Plus或其他SQL客户端，并以10 <span class="italic">g</span>分析工作区的所有者身份连接到Oracle数据库。
                           </p>
                        </li>
                        <li>
                           <p>发出如下命令：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE table_name（source_id VARCHAR2（300），new_name VARCHAR2（30），object_type VARCHAR2（30））;</pre></li>
                        <li>
                           <p>使用适当的值填充重命名表，如下所示。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">table_name</code>是重命名表的名称。
                     </p>
                     <p><code class="codeph">source_id</code>是提供给IMPORT_XML的XML文档中描述的对象的标识符。标识符必须具有以下格式：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">schema_name</span> 。 <span class="italic">object_name</span> [。 <span class="italic">subobject_name</span> ]</pre><p><code class="codeph">new_name</code>是导入到<code class="codeph">source_id</code>指定的对象期间给定的对象名称。
                     </p>
                     <p><code class="codeph">object_type</code>是XML中描述的对象类型，例如StandardDimension或DerivedMeasure。
                     </p>
                     <p>例如，这些SQL语句使用分析工作区，多维数据集和四个维度的新名称填充表：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO my_object_map VALUES（'GLOBAL_AW.GLOBAL10。AW'，'GLOBAL12'，'AW'）; INSERT INTO my_object_map VALUES（'GLOBAL_AW.UNITS_CUBE'，'UNIT_SALES_CUBE'，'Cube'）; INSERT INTO my_object_map VALUES（'GLOBAL_AW.CUSTOMER'，'CUSTOMERS'，'StandardDimension'）; INSERT INTO my_object_map VALUES（'GLOBAL_AW.CHANNEL'，'CHANNELS'，'StandardDimension'）; INSERT INTO my_object_map VALUES（'GLOBAL_AW.PRODUCT'，'PRODUCTS'，'StandardDimension'）; INSERT INTO my_object_map VALUES（'GLOBAL_AW.TIME'，'TIME_PERIODS'，'TimeDimension'）;</pre><div class="infoboxnotealso" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-A1D6C8C1-F558-4499-9DD2-146891FEA6D8">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="此过程创建一个输入XML文档，该文档描述IMPORT_XML过程的处理选项。">CREATE_IMPORT_OPTIONS过程</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-434DD4C2-6FE0-43B3-A27B-B2F16ED87DFE">简单升级</p>
                     <p>简单升级可从OLAP 10 <span class="italic">g</span>分析工作区创建OLAP 12 <span class="italic">c</span>分析工作区。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-9D512353-0711-48CC-8B5E-0DCD415FA55B">要执行Oracle OLAP 10 <span class="italic">g</span>分析工作区的简单升级，请执行以下操作：</p>
                     <ol>
                        <li>
                           <p>打开SQL * Plus或类似的SQL命令行界面，并作为OLAP 12 <span class="italic">c</span>分析工作区的架构所有者连接到Oracle Database 12 <span class="italic">c</span> 。
                           </p>
                        </li>
                        <li>
                           <p>要重命名12 <span class="italic">c</span>分析工作区中的任何对象，请按照“重命名表”部分中的说明创建重命名表。 <a id="d202489e2035" class="indexterm-anchor"></a> （可选的）</p>
                        </li>
                        <li>
                           <p>执行升级，如<span class="q">“ <a href="DBMS_CUBE.html#GUID-50D050C8-155D-4C7B-849E-5D7AA1216780" title="此过程从OLAP 10g分析工作区中包含的元数据副本创建Oracle OLAP 12c分析工作区。原始OLAP 10g分析工作区不受影响，可以与OLAP 12c分析工作区同时存在于同一模式中。">UPGRADE_AW过程</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">DBMS_CUBE.BUILD</code>过程将数据加载到多维数据集中。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-932CAB20-13D9-4F8F-A5CB-354F409E790E">
                     <p class="titleinexample">示例41-1执行到GLOBAL分析工作区的简单升级</p>
                     <p>此示例创建一个名为OLAP <span class="italic">12c的</span>分析工作区<code class="codeph">GLOBAL12</code>来自名为<span class="italic">OLAP10克</span>分析工作区<code class="codeph">GLOBAL10</code> 。<code class="codeph">GLOBAL10</code>在多维数据集，维度，度量文件夹或模式中的表之间不存在命名冲突，因此在此示例中不需要重命名表。
                     </p><pre class="oac_no_warn" dir="ltr">BEGIN  - 升级分析工作区dbms_cube.upgrade_aw（sourceaw =&gt;'GLOBAL10'，destaw =&gt;'GLOBAL12'）; - 加载并聚合数据dbms_cube.build（script =&gt;'UNITS_CUBE，PRICE_AND_COST_CUBE'）;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-8E069EEF-76C4-460C-BD18-496669DBE742">自定义升级</p>
                     <p>通过自定义升级，您可以设置导出和导入选项。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-95153723-7DAD-4577-B4A8-8F4417F5B78F">要执行Oracle OLAP 10 <span class="italic">g</span>分析工作区的自定义升级，请执行以下操作：</p>
                     <ol>
                        <li>
                           <p>打开SQL * Plus或类似的SQL命令行界面，并作为OLAP 12 <span class="italic">c</span>分析工作区的架构所有者连接到Oracle Database 12 <span class="italic">c</span> 。
                           </p>
                        </li>
                        <li>
                           <p><a id="d202489e2113" class="indexterm-anchor"></a>生成初始化表，如“初始化表”部分所述。查看新的默认对象名称并根据需要进行修改。
                           </p>
                        </li>
                        <li>
                           <p>创建重命名表，如“重命名表”部分中所述。如果要在同一模式中进行升级，则必须使用重命名表为12 <span class="italic">c</span>分析工作区提供唯一名称。否则，只有在分析工作区的多维数据集，维度和度量文件夹之间或这些名称与目标模式的现有多维数据集，维度，度量文件夹或表之间重复名称时，才需要重命名表。
                           </p>
                        </li>
                        <li>
                           <p>创建执行以下操作的SQL脚本：</p>
                           <ol type="a">
                              <li>
                                 <p>为导出选项创建XML文档，如<span class="q">“ <a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="此过程创建一个输入XML文档，该文档描述EXPORT_XML过程和EXPORT_XML_TO_FILE过程的处理选项。">CREATE_EXPORT_OPTIONS过程</a> ”中所述</span> 。必须将<code class="codeph">SUPPRESS_NAMESPACE</code>选项设置为<code class="codeph">TRUE</code>才能进行升级。
                                 </p>
                              </li>
                              <li>
                                 <p>为导入选项创建XML文档，如<span class="q">“ <a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="此过程创建一个输入XML文档，该文档描述IMPORT_XML过程的处理选项。">CREATE_IMPORT_OPTIONS过程</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d202489e2156" class="indexterm-anchor"></a>以OLAP 12 <span class="italic">c</span>格式创建XML模板，如<span class="q">“ <a href="DBMS_CUBE.html#GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" title="此过程将OLAP元数据写入CLOB。">EXPORT_XML过程</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d202489e2172" class="indexterm-anchor"></a>从XML模板创建OLAP 12 <span class="italic">c</span>分析工作区，如<span class="q">“ <a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="此过程使用XML模板创建，修改或删除分析工作区。">IMPORT_XML过程</a> ”中所述</span> 。
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>如<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104" title="此过程将数据加载到一个或多个多维数据集和维度中，并在多维数据集中生成聚合值。结果将自动提交到数据库。">构建过程</a> ”中</span>所述，在新的分析工作区中加载和聚合数据。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-0A82797F-A27F-44C2-88CE-917B1E00FF62">
                     <p class="titleinexample">示例41-2执行自定义升级到GLOBAL分析工作区</p>
                     <p>此示例将<code class="codeph">GLOBAL10</code>分析工作区从OLAP <span class="italic">10g</span>元数据升级到<code class="codeph">GLOBAL_AW</code>模式中的OLAP 12 <span class="italic">c</span>元数据。
                     </p>
                     <p>重命名表提供分析工作区的新名称。这些命令定义重命名表。</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE my_object_map（source_id VARCHAR2（300），new_name VARCHAR2（30），object_type VARCHAR2（30））; INSERT INTO my_object_map VALUES（'GLOBAL_AW.GLOBAL10。AW'，'GLOBAL12'，'AW'）;承诺;</pre><p>以下是执行升级的脚本。</p><pre class="oac_no_warn" dir="ltr">在DECLARE importClob clob上设置serverout; exportClob clob; exportOptClob clob; importOptClob clob; BEGIN  - 创建已对帐名称表dbms_cube.initialize_cube_upgrade; - 创建包含导出选项dbms_lob.createtemporary（exportOptClob，TRUE）的CLOB; dbms_cube.create_export_options（out_options_xml =&gt; exportOptClob，suppress_namespace =&gt; TRUE，preserve_table_owners =&gt; TRUE）; - 创建一个包含导入选项dbms_lob.createtemporary（importOptClob，TRUE）的CLOB; dbms_cube.create_import_options（out_options_xml =&gt; importOptClob，rename_table =&gt;'MY_OBJECT_MAP'）; - 为元数据dbms_lob.createtemporary创建CLOB（importClob，TRUE）; dbms_lob.createtemporary（exportClob，TRUE）; - 将元数据从10g分析工作区导出到CLOB dbms_cube.export_xml（object_ids =&gt;'GLOBAL_AW'，options_xml =&gt; exportOptClob，out_xml =&gt; exportClob）; - 从CLOB dbms_cube.import_xml导入元数据（in_xml =&gt; exportClob，options_xml =&gt; importOptClob，out_xml =&gt; importClob）; - 加载并聚合数据dbms_cube.build（'UNITS_CUBE，PRICE_AND_COST_CUBE'）;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ARPLS65740"></a><a id="ARPLS65741"></a><a id="ARPLS65741"></a><a id="ARPLS65740"></a><div class="props_rev_3"><a id="GUID-3DC165E8-194C-46F3-959E-F5F9E0DEA1F3" name="GUID-3DC165E8-194C-46F3-959E-F5F9E0DEA1F3"></a><h3 id="ARPLS-GUID-3DC165E8-194C-46F3-959E-F5F9E0DEA1F3" class="sect3"><span class="enumeration_section">41.4</span> DBMS_CUBE子程序摘要</h3>
               <div>
                  <p>此表列出并描述了<code class="codeph">DBMS_CUBE</code>过程子程序。
                  </p>
                  <div class="tblformal" id="GUID-3DC165E8-194C-46F3-959E-F5F9E0DEA1F3__GUID-78F5181C-5876-4886-8919-051773E6D9BF">
                     <p class="titleintable">表41-1 DBMS_CUBE子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_CUBE子程序" width="100%" border="1" summary="This table lists and describes the DBMS_CUBE procedure subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d202489e2323">子程序</th>
                              <th align="left" valign="bottom" width="69%" id="d202489e2326">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2331" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104" title="此过程将数据加载到一个或多个多维数据集和维度中，并在多维数据集中生成聚合值。结果将自动提交到数据库。">构建程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2331 d202489e2326 ">
                                 <p>将数据加载到一个或多个多维数据集和维度中，并准备用于查询的数据。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2343" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="此过程创建一个输入XML文档，该文档描述EXPORT_XML过程和EXPORT_XML_TO_FILE过程的处理选项。">CREATE_EXPORT_OPTIONS过程</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2343 d202489e2326 ">
                                 <p>创建EXPORT_XML过程的处理选项的输入XML文档。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2355" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="此过程创建一个输入XML文档，该文档描述IMPORT_XML过程的处理选项。">CREATE_IMPORT_OPTIONS过程</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2355 d202489e2326 ">
                                 <p>创建IMPORT_XML过程的处理选项的输入XML文档。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2367" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3" title="此函数根据关系物化视图的定义创建立方体物化视图。">CREATE_MVIEW函数</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2367 d202489e2326 ">
                                 <p>根据关系物化视图的定义创建立方体物化视图。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2379" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" title="此函数使用从现有关系实例化视图派生的信息生成XML模板，该模板使用物化视图功能定义多维数据集。">DERIVE_FROM_MVIEW函数</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2379 d202489e2326 ">
                                 <p>根据关系物化视图的定义为多维数据集物化视图创建XML模板。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2391" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142" title="此过程从数据库中删除多维数据集物化视图和所有关联对象。这些对象包括维度实体化视图，多维数据集，多维数据集维度，级别，层次结构和分析工作区。">DROP_MVIEW程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2391 d202489e2326 ">
                                 <p>删除多维数据集物化视图。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2403" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" title="此过程将OLAP元数据写入CLOB。">EXPORT_XML过程</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2403 d202489e2326 ">
                                 <p>将分析工作区的XML导出到CLOB。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2415" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-12A6C317-F339-475C-910C-E30F40D8CB46" title="此过程将OLAP元数据导出到文件。可以使用IMPORT_XML过程将此文件导入新的或现有的分析工作区。通过这种方式，您可以在另一个模式或数据库中创建分析工作区的副本。">EXPORT_XML_TO_FILE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2415 d202489e2326 ">
                                 <p>将分析工作区的XML导出到文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2430" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="此过程使用XML模板创建，修改或删除分析工作区。">IMPORT_XML程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2430 d202489e2326 ">
                                 <p>使用XML模板创建，修改或删除分析工作区</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2442" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-478D4764-1AE1-40B3-A25C-4BE05659C703" title="此过程处理在Oracle OLAP 10g中创建的分析工作区，以便Oracle OLAP 12c客户端可以使用它们。它处理当前架构中的所有分析工作区。对于有10g分析工作区的每个模式，运行此过程一次。">INITIALIZE_CUBE_UPGRADE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2442 d202489e2326 ">
                                 <p>处理具有命名冲突的Oracle OLAP 10 <span class="italic">g</span>对象，以使Oracle 12 <span class="italic">c</span>客户端能够访问它们。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2469" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-861E4292-7C61-4D22-860D-18D894E882CA" title="此过程将刷新多维数据集物化视图中的数据。">REFRESH_MVIEW程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2469 d202489e2326 ">
                                 <p>刷新立方体物化视图。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2482" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-50D050C8-155D-4C7B-849E-5D7AA1216780" title="此过程从OLAP 10g分析工作区中包含的元数据副本创建Oracle OLAP 12c分析工作区。原始OLAP 10g分析工作区不受影响，可以与OLAP 12c分析工作区同时存在于同一模式中。">UPGRADE_AW程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2482 d202489e2326 ">
                                 <p>将分析工作区从Oracle OLAP 10 <span class="italic">g</span>升级到12 <span class="italic">c</span> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2512" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74" title="此过程检查XML以确保它在没有将结果提交到数据库的情况下有效。它不会创建分析工作区。">VALIDATE_XML过程</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2512 d202489e2326 ">
                                 <p>检查XML以确保它是有效的，而不将结果提交给数据库。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS65742"></a><a id="ARPLS65743"></a><a id="ARPLS65744"></a><a id="ARPLS65745"></a><a id="ARPLS65746"></a><a id="ARPLS65747"></a><a id="ARPLS73604"></a><a id="ARPLS65748"></a><a id="ARPLS65749"></a><a id="ARPLS65750"></a><a id="ARPLS73605"></a><a id="ARPLS73606"></a><a id="ARPLS73607"></a><a id="ARPLS73608"></a><a id="ARPLS65743"></a><a id="ARPLS65744"></a><a id="ARPLS65745"></a><a id="ARPLS65746"></a><a id="ARPLS65747"></a><a id="ARPLS73604"></a><a id="ARPLS65748"></a><a id="ARPLS65749"></a><a id="ARPLS65750"></a><a id="ARPLS73605"></a><a id="ARPLS73606"></a><a id="ARPLS73607"></a><a id="ARPLS73608"></a><a id="ARPLS65742"></a><div class="props_rev_3"><a id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104" name="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104"></a><h4 id="ARPLS-GUID-18B5FD4F-6877-4F11-B237-4BF23E976104" class="sect4"><span class="enumeration_section">41.4.1建立</span>程序</h4>
                  <div>
                     <p>此过程将数据加载到一个或多个多维数据集和维度中，并在多维数据集中生成聚合值。结果将自动提交到数据库。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-4D764591-AC2E-4E3D-BEFB-37678F799179">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.BUILD（脚本IN VARCHAR2，方法IN VARCHAR2 DEFAULT NULL，refresh_after_errors IN BOOLEAN DEFAULT FALSE，并行性IN BINARY_INTEGER DEFAULT 0，atomic_refresh IN BOOLEAN DEFAULT FALSE，automatic_order IN BOOLEAN DEFAULT TRUE，add_dimensions IN BOOLEAN DEFAULT TRUE，scheduler_job IN VARCHAR2 DEFAULT NULL， master_build_id IN BINARY_INTEGER DEFAULT 0，嵌套IN BOOLEAN DEFAULT FALSE）; job_class IN VARCHAR2 DEFAULT'DEFAULT_JOB_CLASS'</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-E281407D-CC04-44F1-9552-F0A51DBE87D5">参数</p>
                        <div class="tblformal" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-CB7503FA-CEC4-4BD0-8E3A-78C91E360100">
                           <p class="titleintable">表41-2 BUILD过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="构建过程参数" width="100%" border="1" summary="DBMS_CUBE.BUILD parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e2663">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e2666">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2671" headers="d202489e2663 ">
                                       <p><code class="codeph">脚本</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2671 d202489e2666 ">
                                       <p>多维数据集和维度及其构建选项的列表（请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CHDJBHEH">SCRIPT参数</a> ”</span> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2683" headers="d202489e2663 ">
                                       <p><code class="codeph">方法</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2683 d202489e2666 ">
                                       <p>完整或快速（部分）刷新。在快速刷新中，仅在多维数据集中插入已更改的行，并重新聚合多维数据集的受影响区域。</p>
                                       <p>您可以按顺序为每个多维数据集和维度指定方法，也可以使用单个方法应用于所有多维数据集和维度。如果列出的对象多于方法，则最后一种方法适用于其他对象。</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">C</code> ：完全刷新在加载前清除所有尺寸值。（默认）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">F</code> ：快速刷新多维数据集物化视图，该视图仅执行源表中已更改行的增量刷新和重新聚合。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">?</code> ：如果可能，快速刷新，否则完全刷新。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">P</code> ：重新计算多维数据集物化视图中受详细信息表中已更改分区影响的行。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">S</code> ：快速求解压缩立方体。快速解决方案会重新加载所有详细信息数据，并仅重新聚合更改的值。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>有关其他详细信息，请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CACEIEFG">使用说明</a> ”</span> 。
                                       </p>
                                       <p>方法不适用于尺寸。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2727" headers="d202489e2663 ">
                                       <p><code class="codeph">refresh_after_errors</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2727 d202489e2666 ">
                                       <p><code class="codeph">TRUE</code>仅回滚具有错误的多维数据集或维度，然后继续构建其他对象。
                                       </p>
                                       <p><code class="codeph">FALSE</code>回滚构建中的所有对象。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2741" headers="d202489e2663 ">
                                       <p><code class="codeph">排比</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2741 d202489e2666 ">
                                       <p>要分配给此作业的并行进程数（请参阅使用说明）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2749" headers="d202489e2663 ">
                                       <p><code class="codeph">atomic_refresh</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2749 d202489e2666 ">
                                       <p><code class="codeph">TRUE</code>阻止用户在构建期间访问中间结果。它在构建开始时冻结分析工作区的当前状态，以便为当前会话提供一致的数据。此选项可在构建结束时解析分析工作区，以便为新会话提供对刷新数据的访问权限。如果在构建期间发生错误，则所有对象都将回滚到冻结状态。
                                       </p>
                                       <p><code class="codeph">FALSE</code>使用户能够在构建期间访问中间结果。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2763" headers="d202489e2663 ">
                                       <p><code class="codeph">automatic_order</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2763 d202489e2666 ">
                                       <p><code class="codeph">TRUE</code>可以优化构建顺序。尺寸在立方体之前加载。
                                       </p>
                                       <p><code class="codeph">FALSE</code>按照您在脚本中列出的顺序构建对象。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2777" headers="d202489e2663 ">
                                       <p><code class="codeph">add_dimensions</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2777 d202489e2666 ">
                                       <p><code class="codeph">TRUE</code>自动包含构建中多维数据集的所有维度，无论您是否在脚本中列出它们。如果具有特定维度的多维数据集物化视图是新鲜的，则不会重新加载该维度。您可以在脚本中列出一次多维数据集。
                                       </p>
                                       <p><code class="codeph">FALSE</code>仅包含脚本中专门列出的维度。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2791" headers="d202489e2663 ">
                                       <p><code class="codeph">scheduler_job</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2791 d202489e2666 ">
                                       <p>作业的任何文本标识符，将显示在日志表中。该字符串不必是唯一的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2799" headers="d202489e2663 ">
                                       <p><code class="codeph">master_build_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2799 d202489e2666 ">
                                       <p>构建的唯一名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2807" headers="d202489e2663 ">
                                       <p><code class="codeph">嵌套</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2807 d202489e2666 ">
                                       <p><code class="codeph">TRUE</code>对指定的多维数据集实例化视图集执行嵌套刷新操作。嵌套刷新操作基于依赖关系顺序刷新所有依赖实体化视图和指定的实例化视图集，以确保嵌套实体化视图相对于基础基表真正新鲜。
                                       </p>
                                       <p>所有对象必须位于单个分析工作区中。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2819" headers="d202489e2663 ">
                                       <p><code class="codeph">job_class</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2819 d202489e2666 ">
                                       <p>这个职业与之相关的班级。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CHDJBHEH">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-5AAEB0EA-B562-4F41-92CA-081DF5194008">SCRIPT参数</p>
                        <p><code class="codeph">SCRIPT</code>参数标识要包含在构建中的对象，并指定要对每个对象执行的处理类型。该参数具有以下语法：</p><pre class="oac_no_warn" dir="ltr">[确认| NO COMMIT]对象[USING（commands）] [，...]
</pre><p><span class="italic">地点</span> ：</p>
                        <p><code class="codeph">VALIDATE</code>检查构建的所有步骤，并将计划的步骤发送到<code class="codeph">CUBE_BUILD_LOG</code>而不执行步骤。您可以在日志表的<code class="codeph">OUTPUT</code>列中查看所有生成的SQL。
                        </p>
                        <p><code class="codeph">NO COMMIT</code>在当前附加模式下构建对象（或在未附加分析工作区时为只读）但不提交更改。此选项支持假设分析，因为它允许您临时更改数据值。请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEBDIIH">SCRIPT参数：USING子句：SET命令</a> ”</span> 。
                        </p>
                        <p><code class="codeph">objects</code>是一个或多个多维数据集或维度的限定名称，以逗号分隔，格式为<span class="italic"><code class="codeph">[aw_name.]object</code></span> ，例如<code class="codeph">UNITS_CUBE</code>或<code class="codeph">GLOBAL.UNITS_CUBE</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-D26DE92B-60D7-4985-9263-FC7F8BC412E4">SCRIPT参数：USING子句</p>
                        <p><code class="codeph">USING</code>子句指定处理选项。它由一个或多个以逗号分隔的命令组成。
                        </p>
                        <div class="infoboxnote" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-315529B9-32F3-4456-8611-AC2BC14C1674">
                           <p class="notep1">注意：</p>
                           <p>除了<code class="codeph">ANALYZE</code>命令之外，具有重写<code class="codeph">USING</code>化视图的多维数据集不能具有<code class="codeph">USING</code>子句。它使用默认的构建选项。
                           </p>
                        </div>
                        <p><code class="codeph">commands</code>可以是以下任何一种。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">使用[MEASURE]聚合</code></p>
                              <p>使用<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CHDBFHEG">SCRIPT参数：USING子句：AGGREGATE命令</a> ”中</span>描述的语法生成聚合值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">分析</code></p>
                              <p>运行<code class="codeph">DBMS_AW_STATS.ANALYZE</code> ，它生成并存储多维数据集和维度的优化程序统计信息。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">清除[VALUES |叶子|集合] [SERIAL |平行]</code></p>
                              <p>准备多维数据集以进行数据刷新。它也可以用于维度，但<code class="codeph">CLEAR</code>会删除所有维度键，从而删除使用该维度的多维数据集的所有数据值。
                              </p>
                              <p>这些可选参数控制刷新方法。如果省略参数，则<code class="codeph">CLEAR</code>的行为取决于刷新方法。<code class="codeph">'C'</code> （完整）刷新方法运行<code class="codeph">CLEAR VALUES</code> ，所有其他刷新方法运行<code class="codeph">CLEAR LEAVES</code> 。</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">VALUES</code> ：清除多维数据集中的所有数据。必须重新加载所有事实，并且必须重新计算所有聚合。此选项支持<code class="codeph">COMPLETE</code>刷新方法。（ <code class="codeph">C</code>和<code class="codeph">F</code>方法的默认值）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LEAVES</code> ：清除详细数据并保留聚合。必须重新加载所有事实，并且必须计算任何新事实或变更事实的汇总。此选项支持<code class="codeph">FAST</code>刷新方法。（默认为<code class="codeph">?</code> 方法）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">AGGREGATES</code> ：保留详细数据并清除聚合。必须重新计算所有聚合。
                                    </p>
                                 </li>
                              </ul>
                              <p>这些可选参数控制load方法，并且可以与任何刷新选项组合使用：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">PARALLEL</code> ：每个分区都单独清除。（默认）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SERIAL</code> ：所有分区一起清除。
                                    </p>
                                 </li>
                              </ul>
                              <p>如果省略<code class="codeph">CLEAR</code>命令， <code class="codeph">DBMS_CUBE</code>将加载新的和更新的事实，但不会删除任何旧的详细数据。这相当于尺寸的<code class="codeph">LOAD NO SYNC</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">COMPILE [SORT |没有排序|仅排序]</code></p>
                              <p>创建尺寸的支撑结构。（仅限尺寸）</p>
                              <p>这些选项控制排序顺序属性的使用：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">SORT</code> ：用户定义的排序顺序属性填充嵌入式总计（ET）视图中的排序列。（默认）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">NO SORT</code> ：忽略任何排序顺序属性。此选项适用于非常大的维度，其中排序可能会消耗太多资源。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SORT ONLY</code> ：编译步骤仅运行排序。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">EXECUTE PLSQL字符串</code></p>
                              <p>在数据库中执行PL / SQL命令或脚本。</p>
                           </li>
                           <li>
                              <p><code class="codeph">EXECUTE OLAP DML string [PARALLEL | SERIAL]</code></p>
                              <p>在分析工作区中执行OLAP DML命令或程序。选项控制命令或程序的执行：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">PARALLEL</code> ：为每个分区执行一次命令或程序。此选项可用于为复杂的DML操作（如预测和模型）提供性能提升。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SERIAL</code> ：对整个多维数据集执行一次命令或程序。（默认）</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">[INSERT | MERGE] INTO [ALL HIERARCHIES | HIERARCHIES</code> （ <span class="italic"><code class="codeph">dimension.hierarchy</code></span> ）] <code class="codeph">VALUES</code> （ <span class="italic"><code class="codeph">dim_key, parent, level_name</code></span> ）</p>
                              <p>将维度成员添加到一个或多个层次结构。如果成员已存在，则<code class="codeph">INSERT</code>会抛出错误，而<code class="codeph">MERGE</code>则不会。请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEJJACB">维度维护示例</a> ”</span> 。
                              </p>
                              <p><span class="italic"><code class="codeph">dimension.hierarchy</code></span> ：新成员所属的层次结构的名称。用双引号括起名称的每个部分，例如<code class="codeph">"PRODUCT"."PRIMARY"</code> 。
                              </p>
                              <p><span class="italic"><code class="codeph">dim_key</code></span> ：维度成员的<code class="codeph">DIM_KEY</code>值。
                              </p>
                              <p><span class="italic"><code class="codeph">parent</code></span> ：维度键的父级。
                              </p>
                              <p><span class="italic"><code class="codeph">level_name</code></span> ：维度键的级别。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">UPDATE [ALL HIERARCHIES | HIERARCHIES (</code> <span class="italic"><code class="codeph">dimension.hierarchy</code></span> <code class="codeph">)] SET PARENT =</code> <span class="italic"><code class="codeph">parent</code></span> <code class="codeph">, LEVEL=</code> <span class="italic"><code class="codeph">level_name</code></span> <code class="codeph">WHERE MEMBER =</code> <span class="italic"><code class="codeph">dim_key</code></span></p>
                              <p>更改现有维度成员的级别或父级。有关选项的说明，请参阅<code class="codeph">INSERT</code> 。另请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEJJACB">维度维护示例</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DELETE FROM DIMENSION WHERE MEMBER=</code> <span class="italic"><code class="codeph">dim_key</code></span></p>
                              <p>删除维度成员。请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEJJACB">维度维护示例</a> ”</span> 。
                              </p>
                              <p><span class="italic"><code class="codeph">dim_key</code></span> ：要删除的维成员的<code class="codeph">DIM_KEY</code>值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SET</code> <span class="italic"><code class="codeph">dimension.attribute[qdr]</code></span> <code class="codeph">= CAST('</code> <span class="italic"><code class="codeph">attribute_value</code></span> <code class="codeph">' AS VARCHAR2))</code></p>
                              <p>设置维成员的属性值。请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEJJACB">维度维护示例</a> ”</span> 。
                              </p>
                              <p><span class="italic"><code class="codeph">dimension.attribute</code></span> ：属性的名称。将名称的每个部分用双引号括起来，例如<code class="codeph">"PRODUCT"."LONG_DESCRIPTION"</code> 。
                              </p>
                              <p><span class="italic"><code class="codeph">qdr</code></span> ：维度成员以合格数据引用的形式被赋予属性值，例如<code class="codeph">"PRODUCT"='OPT MOUSE'</code> 。
                              </p>
                              <p><span class="italic"><code class="codeph">attribute_value</code></span> ： <span class="italic"><code class="codeph">attribute_value</code></span>的值，例如“光学鼠标”。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">FOR</code> <span class="italic"><code class="codeph">dimension_clause measure_clause</code></span> <code class="codeph">BUILD (</code> <span class="italic"><code class="codeph">commands</code></span> <code class="codeph">)</code></p>
                              <p>使用以下参数将构建限制为特定度量和维度值。请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAECGBDG">FOR子句示例</a> ”</span> 。
                              </p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="italic"><code class="codeph">dimension_clause</code></span> ：</p>
                                    <p><span class="italic"><code class="codeph">dimension</code></span> <code class="codeph">ALL | NONE | WHERE</code> <span class="italic"><code class="codeph">condition</code></span> <code class="codeph">| LEVELS (</code> <span class="italic"><code class="codeph">level</code></span> <code class="codeph">| LEVELS (</code> <span class="italic"><code class="codeph">level</code></span> <code class="codeph">[,</code> <span class="italic"><code class="codeph">level</code></span> <code class="codeph">...])</code></p>
                                    <p><span class="italic"><code class="codeph">dimension</code></span>是多维数据集<span class="italic"><code class="codeph">dimension</code></span>的名称。
                                    </p>
                                    <p><code class="codeph">ALL</code>在执行命令列表之前将维度状态设置为所有成员。
                                    </p>
                                    <p><code class="codeph">NONE</code>加载无维度成员的值。
                                    </p>
                                    <p><code class="codeph">WHERE</code>为与条件匹配的维度成员加载值。
                                    </p>
                                    <p><code class="codeph">LEVELS</code>为命名级别中的维度成员加载值。
                                    </p>
                                    <p><span class="italic"><code class="codeph">level</code></span>是指定维度的级别。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">measure_clause</code></span> ：</p>
                                    <p><code class="codeph">MEASURES (</code> <span class="italic"><code class="codeph">measure</code></span> [， <span class="italic"><code class="codeph">measure</code></span> <code class="codeph">...])</code></p>
                                    <p><span class="italic"><code class="codeph">measure</code></span>是多维数据集中<span class="italic"><code class="codeph">measure</code></span>的名称。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">commands</code></span> ：任何其他<code class="codeph">USING</code>命令。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">LOAD [SYNCH | NO SYNCH | RETAIN] [PRUNE | PARALLEL | SERIAL] [WHERE</code> <span class="italic"><code class="codeph">condition]</code></span></p>
                              <p>将数据加载到维或多维数据集中。</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">WHERE</code>将负载限制为匹配<span class="italic"><code class="codeph">condition</code></span>的映射关系表中的那些值。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">condition</code></span>是基于映射表的列的有效谓词。请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEIBIEJ">示例</a> ”</span> 。
                                    </p>
                                 </li>
                              </ul>
                              <p>这些可选参数仅适用于维度：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">SYNCH</code>将维度键与关系数据源匹配。（默认）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">NO SYNCH</code>加载新的维度键但不删除旧的键。
                                    </p>
                                    <p>如果维度键的父级在关系数据源中已更改，则此选项允许装入更改分析工作区中的父/子关系。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">RETAIN</code>加载新的维度键但不删除旧密钥。
                                    </p>
                                    <p>此选项不允许更改维度键的父级。如果父级已更改，则加载会拒绝该记录。如果启用了日志，则拒绝会在拒绝的记录日志中生成错误。</p>
                                 </li>
                              </ul>
                              <p>这些可选参数仅适用于多维数据集：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">PRUNE</code> ：在事实表上运行全表扫描以确定要加载的分区。例如，如果多维数据集按月分区，并且事实表仅包含过去两个月的值，则仅开始作业加载过去两个月的分区。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">PARALLEL</code> ：每个分区都单独加载。（默认）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SERIAL</code> ：所有分区都加载到一个<code class="codeph">SELECT</code>语句中。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">MODEL model_name [PARALLEL | SERIAL]</code></p>
                              <p>执行先前为多维数据集创建的模型。它接受这些论点：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">PARALLEL</code> ：模型在每个分区上单独运行。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SERIAL</code> ：模型同时在所有立方体上运行。（默认）</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">组</code></p>
                              <p>支持使用<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEBDIIH">SCRIPT参数：USING子句：SET命令</a> ”中</span>描述的语法写回多维数据集。（仅限立方体）</p>
                           </li>
                           <li>
                              <p><code class="codeph">解决[PARALLEL | SERIAL]</code></p>
                              <p>使用为多维数据集定义的规则聚合多维数据集，包括聚合运算符和预计算规范。（仅限立方体）</p>
                              <p>它接受这些论点：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">PARALLEL</code> ：每个分区单独解决。（默认）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SERIAL</code> ：所有分区同时解决。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CHDBFHEG">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-06383871-04D7-45E1-8237-6E2032DBE5E5">SCRIPT参数：USING子句：AGGREGATE命令</p>
                        <p>脚本中的<code class="codeph">AGGREGATE</code>命令指定一个或多个度量的聚合规则。
                        </p>
                        <div class="infoboxnote" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-ABD5B224-558C-4210-952A-7247C78B1A87">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">AGGREGATE</code>命令仅适用于未压缩的多维数据集。
                           </p>
                        </div>
                        <p><code class="codeph">AGGREGATE</code>具有以下语法：</p><pre class="oac_no_warn" dir="ltr">{聚合使用测量1测量运算符1当测量2然后运算符2 ...ELSE default_operator | [AGGREGATE USING] operator_clause} processing_options超过{ALL |尺寸|维度HIERARCHIES（层次结构）}</pre><p>使用测量条款</p>
                        <p>此子句使您可以为多维数据集中的不同度量指定不同的聚合运算符。</p>
                        <p>操作者条款</p>
                        <p><a id="d202489e3439" class="indexterm-anchor"></a><a id="d202489e3441" class="indexterm-anchor"></a> <code class="codeph">operator_clause</code>具有以下语法：</p><pre class="oac_no_warn" dir="ltr">operator（WEIGHTBY表达式| SCALEBY表达式）</pre><p><code class="codeph">WEIGHTBY</code>在聚合之前将每个数据值乘以表达式。
                        </p>
                        <p><code class="codeph">SCALEBY</code>在聚合之前将表达式的值添加到每个数据值。
                        </p>
                        <div class="tblformal" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-4C7129E4-2F3C-419D-A7DE-EE68C755C626">
                           <p class="titleintable">表41-3聚合运算符</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="聚合运算符" width="100%" border="1" summary="OLAP aggregation operators" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d202489e3469">操作者</th>
                                    <th align="left" valign="bottom" width="18%" id="d202489e3472">选项</th>
                                    <th align="left" valign="bottom" width="60%" id="d202489e3475">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3480" headers="d202489e3469 ">
                                       <p><code class="codeph">AVG</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3480 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3480 d202489e3475 ">
                                       <p>添加数据值，然后将总和除以一起添加的数据值的数量。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3492" headers="d202489e3469 ">
                                       <p><code class="codeph">第一</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3492 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3492 d202489e3475 ">
                                       <p>第一个真实数据值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3504" headers="d202489e3469 ">
                                       <p><code class="codeph">HIER_AVG</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3504 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3504 d202489e3475 ">
                                       <p>添加数据值，然后将总和除以维层次结构中的子项数。与仅计算非NA儿童的AVERAGE不同，HAVERAGE计算父母的所有逻辑子女，无论每个孩子是否有值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3516" headers="d202489e3469 ">
                                       <p><code class="codeph">HIER_FIRST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3516 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3516 d202489e3475 ">
                                       <p>层次结构中的第一个数据值，即使该值为NA。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3528" headers="d202489e3469 ">
                                       <p><code class="codeph">HIER_LAST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3528 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3528 d202489e3475 ">
                                       <p>层次结构中的最后一个数据值，即使该值为NA。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3540" headers="d202489e3469 ">
                                       <p><code class="codeph">持续</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3540 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3540 d202489e3475 ">
                                       <p>最后的实际数据值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3552" headers="d202489e3469 ">
                                       <p><code class="codeph">MAX</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3552 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3552 d202489e3475 ">
                                       <p>每个父母的子女中最大的数据值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3564" headers="d202489e3469 ">
                                       <p><code class="codeph">MIN</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3564 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3564 d202489e3475 ">
                                       <p>每个父母的子女中最小的数据值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3576" headers="d202489e3469 ">
                                       <p><code class="codeph">没有聚合</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3576 d202489e3472 ">
                                       <p>没有选择</p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3576 d202489e3475 ">
                                       <p>不要聚合维度或维度的值。将所有聚合值保留为NA。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3587" headers="d202489e3469 ">
                                       <p><code class="codeph">和</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3587 d202489e3472 ">
                                       <p><code class="codeph">SCALEBY | WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3587 d202489e3475 ">
                                       <p>添加数据值。（默认）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>处理选项</p>
                        <p>您可以为聚合指定以下处理选项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">（允许|拒绝）溢出</code></p>
                              <p>指定是否允许十进制溢出，当计算结果非常大并且不能再由数值表示的指数部分表示时发生。</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">ALLOW</code> ：生成溢出的计算无错误地执行并产生空结果。（默认）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DISALLOW</code> ：涉及溢出的计算停止执行并生成错误消息。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">（允许|拒绝）ZERO划分</code></p>
                              <p>指定是否允许除以零。</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">ALLOW</code> ：涉及除零的计算执行时没有错误但返回空值。（默认）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DISALLOW</code> ：涉及除零的计算停止执行并生成错误消息。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">（考虑| IGNORE）NULLS</code></p>
                              <p>指定计算中是否包含空值。</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">CONSIDER</code> ：空值包含在计算中。包含空值的计算返回空值。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">IGNORE</code> ：在计算中仅使用实际数据值。空值被视为不存在。（默认）</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">保持计数</code></p>
                              <p>存储用于计算平均值的维度成员数的最新计数。省略此选项可以动态计算成员数。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEBDIIH">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-4DDBFD85-EFB1-4082-8565-70A703A6AC49">SCRIPT参数：USING子句：SET命令</p>
                        <p>脚本中的<code class="codeph">SET</code>命令将值分配给存储度量中的一个或多个单元格。它有这样的语法：</p><pre class="oac_no_warn" dir="ltr">SET <span class="italic">target</span> = <span class="italic">expression</span>
</pre><p><span class="italic">哪里：</span> 
                        </p>
                        <p><span class="italic"><code class="codeph">target</code></span>是衡量标准或合格数据参考。
                        </p>
                        <p><span class="italic"><code class="codeph">expression</code></span>返回<span class="italic"><code class="codeph">target</code></span>的相应数据类型的值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-40A8E168-850C-44FA-8F8F-0DB015AAF42D">合格的数据参考</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在查询期间，限定数据引用（QDR）将维度对象限制为一个或多个维度中的单个成员。</p>
                        <p>QDR具有以下语法：</p><pre class="oac_no_warn" dir="ltr">表达式<span class="bold">[</span> {dimension = member} [，{dimension = member} ...]<span class="bold">]</span>
</pre><p><span class="italic">哪里：</span></p>
                        <p><span class="italic"><code class="codeph">expression</code></span>是一个维度表达式，通常是度量的名称。
                        </p>
                        <p><span class="italic"><code class="codeph">dimension</code></span>是表达的主要维度。
                        </p>
                        <p><span class="italic"><code class="codeph">member</code></span>是维度的值。
                        </p>
                        <p>粗体显示的外部方括号是文字语法元素;它们不表示可选参数。常规文本中显示的内部方括号分隔可选参数，而不是语法元素。</p>
                        <p>此示例返回日历年2007的销售值：</p><pre class="oac_no_warn" dir="ltr">global.sales [global.time ='CY2007']</pre><p>下一个示例仅返回2007日历年中美国的Sales值：</p><pre class="oac_no_warn" dir="ltr">销售[customer ='US'，time ='CY2007']</pre><p>请参阅SET命令中的限定数据引用的示例。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CACEIEFG">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-F1637D70-8CC2-47FD-9668-DA84E8964924">使用说明</p>
                        <p>构建方法</p>
                        <p><code class="codeph">C</code> ， <code class="codeph">S</code>和<code class="codeph">?</code> 方法总是成功，可以在任何多维数据集上使用。
                        </p>
                        <p><code class="codeph">F</code>和<code class="codeph">P</code>方法要求多维数据集具有物化视图，该视图是作为快速或重写物化视图创建的。
                        </p>
                        <p>排比</p>
                        <p>可以在并行进程中加载和聚合分区多维数据集。例如，具有五个分区的多维数据集最多可以使用五个进程。尺寸始终按顺序加载。</p>
                        <p>构建实际分配的并行进程数由这些因素中的最小因素控制：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>构建中的多维数据集数和每个多维数据集中的分区数。</p>
                           </li>
                           <li>
                              <p>设置<code class="codeph">BUILD</code>过程的<code class="codeph">PARALLELISM</code>参数。
                              </p>
                           </li>
                           <li>
                              <p>设置<code class="codeph">JOB_QUEUE_PROCESSES</code>数据库初始化参数。
                              </p>
                           </li>
                        </ul>
                        <p>假设<code class="codeph">UNITS_CUBE</code>有12个分区， <code class="codeph">PARALLELISM</code>设置为10， <code class="codeph">JOB_QUEUE_PROCESSES</code>设置为4。OLAP使用四个进程，这些进程在构建日志中显示为从进程。
                        </p>
                        <p>当PARALLEL_DEGREE_POLICY数据库初始化参数设置为AUTO或LIMITED时，SQL引擎可以分配其他进程。例如，如果OLAP分配了四个进程，则SQL引擎可能会确定其中两个进程应由四个进程完成，总共六个进程。</p>
                        <p>构建日志</p>
                        <p>OLAP生成三个日志，提供有关构建的诊断信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>多维数据集构建日志</p>
                           </li>
                           <li>
                              <p>拒绝记录日志</p>
                           </li>
                           <li>
                              <p>多维数据集维度编译日志</p>
                           </li>
                        </ul>
                        <p>Analytic Workspace Manager会自动将这些日志创建为与分析工作区位于同一模式中的表。如果不使用Analytic Workspace Manager，则可以使用<code class="codeph">DBMS_CUBE_LOG</code>包在PL / SQL中创建和管理日志。
                        </p>
                        <p>您还可以通过运行<code class="codeph">$ORACLE_HOME/olap/admin/utlolaplog.sql</code>来创建多维数据集日志文件。此脚本创建三个附加视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d202489e3831" class="indexterm-anchor"></a> <code class="codeph">CUBE_BUILD_LATEST</code> ：仅返回上一次构建的行。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CUBE_BUILD_REPORT</code> ：使用经过的时间为每个命令返回一行。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CUBE_BUILD_REPORT_LATEST</code> ： <code class="codeph">CUBE_BUILD_REPORT</code>上一次构建返回类似<code class="codeph">CUBE_BUILD_REPORT</code>的报告。
                              </p>
                           </li>
                        </ul>
                        <p>此报告显示<code class="codeph">GLOBAL</code>分析工作区中对象的成功完成构建，该工作区具有四个维度和两个多维数据集。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT命令，status，build_object，build_object_type类型FROM cube_build_report_latest;命令状态BUILD_OBJECT TYPE ------------------------- ---------- ----------- ------------------- ----------构建完成构建冻结完成构建负载没有同步完成信道维度编译完成信道维度更新/提交完成信道尺寸负荷没有同步完成客户尺寸编制完成客户尺寸更新/承诺完成客户尺寸负荷没有同步完成产品尺寸编制完成产品尺寸更新/承诺完成产品尺寸负载没有同步完成时间维度编译完成时间维度更新/承诺完成时间维度编译AGGMAP竣工PRICE_CUBE CUBE UPDATE /提交已完成PRICE_CUBE CUBE COMPILE AGGMAP竣工UNITS_CUBE CUBE UPDATE /提交已完成UNITS_CUBE CUBE DBMS_SCHEDULER.CREATE_JOB竣工PRICE_CUBE CUBE DBMS_SCHEDULER.CREATE_JOB竣工完成PRICE_CUBE CUBE解决竣工PRICE_CUBE CUBE UPDATE / COMMIT COMP UNITS_CUBE CUBE BUILD竣工BUILD LOAD已完成PRICE_CUBE CUBE BUILD已完成构建负载已完成UNITS_CUBE CUBE已完成UNITS_CUBE CUBE更新/已完成UNITS_CUBE CUBE分析已完成PRICE_CUBE CUBE分析已完成UNITS_CUBE CUBE THAW已完成构建31行已选中。</pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEIBIEJ">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-522FD216-5E46-414B-8C8C-D0BE01082A21">例子</p>
                        <p>此示例使用默认参数来构建<code class="codeph">UNITS_CUBE</code> 。</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_CUBE.BUILD（'GLOBAL.UNITS_CUBE'）;</pre><p>下一个示例构建<code class="codeph">UNITS_CUBE</code>并显式构建其两个维度<code class="codeph">TIME</code>和<code class="codeph">CHANNEL</code> 。维度使用完整（ <code class="codeph">C</code> ）方法，而立方体使用快速求解（ <code class="codeph">S</code> ）方法。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_CUBE.BUILD（script =&gt;'GLOBAL。“TIME”，GLOBAL.CHANNEL，GLOBAL.UNITS_CUBE'，method =&gt;'CCS'，parallelism =&gt; 2）;结束; /</pre><p>以下示例仅加载<code class="codeph">WHERE</code>子句标识的数据选择：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_CUBE.BUILD（q'！GLOBAL。“TIME”，GLOBAL.CHANNEL，GLOBAL.CUSTOMER，GLOBAL.PRODUCT，GLOBAL.UNITS_CUBE使用（加载没有同步，UNITS_FACT.MONTH_ID喜欢'2006％'和UNITS_FACT.SALES&gt; 5000）！“）;结束; /</pre><p id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAECGBDG">FOR Clause示例</p>
                        <p>在此示例中，时间维度<code class="codeph">DBMS_CUBE</code>历年划分， <code class="codeph">DBMS_CUBE</code>仅构建由<code class="codeph">CY2006</code>标识的分区。<code class="codeph">HIER_ANCESTOR</code>是OLAP表达式语法中的分析函数。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN dbms_cube.build（q'！UNITS_CUBE使用（“时间”在HIER_ANCESTOR（在“时间”之内）。日历级别“时间”。CALENDAR_YEAR）='CY2006'Building（LOAD，SOLVE））！'，parallelism =&gt; 1）;结束; /</pre><p>下一个示例使用<code class="codeph">FOR</code>子句将构建限制为2006年的<code class="codeph">SALES</code>度量。所有对象都使用完整（ <code class="codeph">C</code> ）方法构建。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_CUBE.BUILD（script =&gt;'GLOBAL。“TIME”，GLOBAL.CHANNEL，GLOBAL.CUSTOMER，GLOBAL.PRODUCT，GLOBAL.UNITS_CUBE USING（for MEASURES（GLOBAL.UNITS_CUBE.SALES）BUILD（LOAD NO SYNCH GLERE GLOBAL.UNITS_FACT） .MONTH_ID LIKE''2006％''））'，method =&gt;'C'，parallelism =&gt; 2）;结束; /</pre><p>回写示例</p>
                        <p>以下示例显示了<code class="codeph">USING</code>子句中<code class="codeph">SET</code>命令的各种用法。
                        </p>
                        <p>此示例将Sales Target设置为Sales增加了5％：</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.BUILD（'UNITS_CUBE USING（SET UNITS_CUBE.SALES_TARGET = UNITS_CUBE.SALES * 1.05，SOLVE）'）;</pre><p>此示例将2007年5月Deluxe Mouse的价格设置为29.99美元：</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.BUILD（'PRICE_CUBE USING（SET PRICE_CUBE.UNIT_PRICE [“TIME”='''2007.05''，“PRODUCT”='''DLX MOUSE''] = 29.99，SOLVE）'）;</pre><p>下一个示例包含两个SET命令，但不重新聚合多维数据集：</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.BUILD（'PRICE_CUBE USING（SET PRICE_CUBE.UNIT_PRICE [“TIME”='''2006.12''，“PRODUCT”=''DLX MOUSE''] = 29.49，SET PRICE_CUBE.UNIT_PRICE [“TIME”='''2007.05' '，“PRODUCT”=''DLX MOUSE''] = 29.99）'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEJJACB">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-A92AB9B8-8371-4439-BE03-594858BC96E4">尺寸维护示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此脚本显示维度维护。它向所有层次结构添加一个名为<code class="codeph">OPT MOUSE</code>的新维度成员，更改其在主层次结构中的位置，为其分配长描述，然后从维度中删除它。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN dbms_output.put_line（'添加光学鼠标'）; dbms_cube.build（Q'！“PRODUCT”使用（合并所有等级值（'ITEM_OPT MOUSE'，'CLASS_SFT'，“PRODUCT”。“FAMILY”））！“）; dbms_output.put_line（'改变光学鼠标'）; dbms_cube.build（Q'！“PRODUCT”使用（UPDATE HIERARCHIES（“PRODUCT”。“PRIMARY”）SET PARENT ='FAMILY_ACC'，LEVEL =“PRODUCT”。“ITEM”WHERE MEMBER ='ITEM_OPT MOUSE'）！“）; dbms_output.put_line（'为光学鼠标提供属性'）; dbms_cube.build（Q'！“PRODUCT”USING（SET“PRODUCT”。“LONG_DESCRIPTION”[“PRODUCT”='ITEM_OPT MOUSE'] = CAST（'光学鼠标'AS VARCHAR2））！“）; dbms_output.put_line（'删除光学鼠标'）; dbms_cube.build（Q'！“产品”使用（从成员='ITEM_OPT MOUSE'的维度中删除）！“）;结束; /</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-7BD77E78-E323-42BE-8356-21B598DF2547">OLAP DML示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此示例使用OLAP DML向多维数据集生成日志添加注释：</p><pre class="oac_no_warn" dir="ltr">BEGIN <code class="codeph">DBMS_CUBE.BUILD</code> （q'！global.units_cube USING（EXECUTE OLAP DML'SHOW STATLEN（units_cube_prt_list）'PARALLEL，EXECUTE OLAP DML'SHOW LIMIT（units_cube_prt_list KEEP ALL）'PARALLEL，EXECUTE OLAP DML'SHOW STATLEN（time）'parallel，EXECUTE OLAP DML'SHOW LIMIT（时间保持time_levelrel''CALENDAR_YEAR'''并行）！'，parallelism =&gt; 2，add_dimensions =&gt; false）;结束; /</pre><p>此查询显示多维数据集生成日志中的注释：</p><pre class="oac_no_warn" dir="ltr">SELECT partition，slave_number，TO_CHAR（输出）输出FROM cube_build_log WHERE command ='OLAP DML'AND status ='COMPLETED'ORDER BY slave_number，time; PARTITION SLAVE_NUMBER OUTPUT ------------ ------------ ----------------------- -------------------------------- P10：CY2007 1 &lt;OLAPDMLExpression Expression =“TO_CHAR（statlen（units_cube_prt_list））”的数值=“1”/&gt; P10：CY2007 1 &lt;OLAPDMLExpression Expression =“TO_CHAR（limit（units_cube_prt_list keep al l））”Value =“P10”/&gt; P10：CY2007 1 &lt;OLAPDMLExpression Expression =“TO_CHAR（statlen（time））”值=“17”/&gt; P10：CY2007 1 &lt;OLAPDMLExpression Expression =“TO_CHAR（limit（time keep time_levelrel＆ap os; CALENDAR_YEAR'））”Value =“CALENDAR_YEAR_CY2007”/&gt; P9：CY2006 2 &lt;OLAPDMLExpression Expression =“TO_CHAR（statlen） （units_cube_prt_list））“Value =”1“/&gt; P9：CY2006 2 &lt;OLAPDMLExpression Expression =”TO_CHAR（limit（units_cube_prt_list keep al l））“Value =”P9“/&gt; P9：CY2006 2 &lt;OLAPDMLExpression Expression =”TO_CHAR（ statlen（时间））“Value =”17“/&gt;。。。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73609"></a><a id="ARPLS73610"></a><a id="ARPLS73610"></a><a id="ARPLS73609"></a><div class="props_rev_3"><a id="GUID-3A117D72-2F22-4192-A6EF-49057200CA19" name="GUID-3A117D72-2F22-4192-A6EF-49057200CA19"></a><h4 id="ARPLS-GUID-3A117D72-2F22-4192-A6EF-49057200CA19" class="sect4"><span class="enumeration_section">41.4.2</span> CREATE_EXPORT_OPTIONS过程</h4>
                  <div>
                     <p>此过程创建一个输入XML文档，该文档描述EXPORT_XML过程和EXPORT_XML_TO_FILE过程的处理选项。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3A117D72-2F22-4192-A6EF-49057200CA19__GUID-05674E2C-D6A2-4EE6-97F6-FECE00AF0726">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.CREATE_EXPORT_OPTIONS（out_options_xml IN / OUT CLOB，target_version IN VARCHAR2 DEFAULT NULL，suppress_owner IN BOOLEAN DEFAULT FALSE，suppress_namespace IN BOOLEAN DEFAULT FALSE，preserve_table_owners IN BOOLEAN DEFAULT FALSE，metadata_changes IN CLOB DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A117D72-2F22-4192-A6EF-49057200CA19__GUID-22BBF340-F93C-448A-B9E8-217E2D4F72AE">参数</p>
                        <div class="tblformal" id="GUID-3A117D72-2F22-4192-A6EF-49057200CA19__GUID-ADF759ED-C7A3-4CB0-967A-CAAF8FE00281">
                           <p class="titleintable">表41-4 CREATE_EXPORT_OPTIONS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_EXPORT_OPTIONS过程参数" width="100%" border="1" summary="DBMS_CUBE.CREATE_EXPORT_OPTIONS parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e4077">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e4080">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4085" headers="d202489e4077 ">
                                       <p><code class="codeph">out_options_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4085 d202489e4080 ">
                                       <p>包含生成的XML文档，该文档可以传递到<a href="DBMS_CUBE.html#GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" title="此过程将OLAP元数据写入CLOB。">EXPORT_XML过程</a>的<code class="codeph">options_xml</code>参数中。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4103" headers="d202489e4077 ">
                                       <p><code class="codeph">target_version</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4103 d202489e4080 ">
                                       <p>指定将导入由EXPORT_XML或EXPORT_XML_TO_FILE生成的XML文档的Oracle数据库的版本。您可以指定两到五位数字，例如12.1或12.1.0.1.0。此参数默认为当前数据库版本，因此通常可以省略。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4111" headers="d202489e4077 ">
                                       <p><code class="codeph">suppress_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4111 d202489e4080 ">
                                       <p>控制XML元素中Owner属性的使用以及对象名称中所有者限定符的使用。输入<code class="codeph">True</code>以从XML中删除所有者，或输入<code class="codeph">False</code>以保留它。如果您计划将导出的元数据导入其他架构，请输入<code class="codeph">True</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4128" headers="d202489e4077 ">
                                       <p><code class="codeph">suppress_namespace</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4128 d202489e4080 ">
                                       <p>控制XML元素中Namespace属性的使用以及对象名称中的名称空间限定符。输入<code class="codeph">True</code>以从XML中删除命名空间，或输入<code class="codeph">False</code>以保留它（默认值）。升级到Oracle OLAP 12 <span class="italic">c</span>元数据时输入<code class="codeph">True</code> 。
                                       </p>
                                       <p>命名空间允许在甲骨文<span class="italic">10克</span>创建的对象与在甲骨文<span class="italic">12c</span>中创建的对象共存。您无法设置或更改名称空间。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4156" headers="d202489e4077 ">
                                       <p><code class="codeph">preserve_table_owners</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4156 d202489e4080 ">
                                       <p>控制映射元素中限定表名称中所有者的使用，例如GLOBAL.UNITS_HISTORY_FACT而不是UNITS_HISTORY_FACT。输入<code class="codeph">True</code>以保留表所有者，或输入<code class="codeph">False</code>以默认为表映射的当前模式。如果计划将导出的元数据导入到其他模式，则必须将此选项设置为<code class="codeph">True</code>才能从原始模式中的表和视图加载数据，除非目标模式具有自己的表和视图副本。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4173" headers="d202489e4077 ">
                                       <p><code class="codeph">metadata_changes</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4173 d202489e4080 ">
                                       <p>包含对象的12 <span class="italic">c</span> XML描述，该描述将覆盖导出的对象描述。XML文档必须包含已修改元素的所有父XML元素以及唯一标识它们所需的属性。如果存在，请使用Name属性。参见示例。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A117D72-2F22-4192-A6EF-49057200CA19__GUID-82470FEB-E5E7-48B2-9932-D7104118C6FE">例子</p>
                        <p>以下示例生成导出选项的XML文档：</p><pre class="oac_no_warn" dir="ltr">DECLARE optionsClob CLOB; BEGIN dbms_lob.createtemporary（optionsClob，false，dbms_lob。呼叫）; dbms_cube.create_export_options（out_options_xml =&gt; optionsClob，suppress_namespace =&gt; TRUE）; DBMS_OUTPUT.PUT_LINE（optionsClob）;结束; /</pre><p><code class="codeph">DBMS_OUTPUT.PUT_LINE</code>过程显示此XML文档（为便于阅读而格式化：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;Export TargetVersion =“12.1.0.1”&gt; &lt;ExportOptions&gt; &lt;Option Name =“SuppressOwner”Value =“FALSE”/&gt; &lt;Option Name =“SuppressNamespace”Value =“TRUE”/&gt; &lt;Option Name =“PreserveTableOwners”Value =“FALSE”/&gt; &lt;/ ExportOptions&gt; &lt;/ Export&gt;</pre><p>下一个示例生成一个XML文档，其元数据更改为<code class="codeph">CHANNEL</code>维度的American long描述属性的映射。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE importClob clob; exportClob clob; overClob clob; exportOptClob clob; importOptClob clob; BEGIN dbms_lob.createtemporary（overClob，TRUE）; dbms_lob.open（overClob，DBMS_LOB.LOB_READWRITE）; dbms_lob.writeappend（overClob，58，'&lt;Metadata Version =“1.3”MinimumDatabaseVersion =“12.1.0.1”&gt;'）; dbms_lob.writeappend（overClob，34，'&lt;StandardDimension Name =“CHANNEL”&gt;'）; dbms_lob.writeappend（overClob，75，'&lt;Description Type =“Description”Language =“AMERICAN”Value =“Sales Channel”/&gt;'）; dbms_lob.writeappend（overClob，20，'&lt;/ StandardDimension&gt;'）; dbms_lob.writeappend（overClob，11，'&lt;/ Metadata&gt;'）; dbms_lob.close（overClob）; - 使Oracle Database 12c第1版（12.1）客户端能够访问10g元数据dbms_cube.initialize_cube_upgrade; - 创建包含导出选项dbms_lob.createtemporary（exportOptClob，TRUE）的CLOB; dbms_cube.create_export_options（out_options_xml =&gt; exportOptClob，suppress_namespace =&gt; TRUE，metadata_changes =&gt; overClob）; - 创建一个包含导入选项dbms_lob.createtemporary（importOptClob，TRUE）的CLOB; dbms_cube.create_import_options（out_options_xml =&gt; importOptClob，rename_table =&gt;'MY_OBJECT_MAP'）; - 为元数据dbms_lob.createtemporary创建CLOB（importClob，TRUE）; dbms_lob.createtemporary（exportClob，TRUE）; - 将元数据从10g分析工作区导出到CLOB dbms_cube.export_xml（object_ids =&gt;'GLOBAL_AW'，options_xml =&gt; exportOptClob，out_xml =&gt; exportClob）; - 从CLOB dbms_cube.import_xml导入元数据（in_xml =&gt; exportClob，options_xml =&gt; importOptClob，out_xml =&gt; importClob）; - 加载并聚合数据dbms_cube.build（script =&gt;'UNITS_CUBE，PRICE_AND_COST_CUBE'）;结束; /</pre><p>以下是<code class="codeph">exportClob</code>的内容（为了便于阅读而添加了格式）。XML文档将Channel的描述更改为Sales Channel。
                        </p><pre class="oac_no_warn" dir="ltr">&lt;Metadata Version =“1.3”MinimumDatabaseVersion =“12.1.0.1”&gt; &lt;StandardDimension Name =“CHANNEL”&gt; &lt;Description Type =“Description”Language =“AMERICAN”Value =“Sales Channel”/&gt; &lt;/ StandardDimension&gt; &lt;/ Metadata &gt;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="DBMS_CUBE.html#GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" title="此过程将OLAP元数据写入CLOB。">EXPORT_XML过程</a></li>
                           <li><a href="DBMS_CUBE.html#GUID-12A6C317-F339-475C-910C-E30F40D8CB46" title="此过程将OLAP元数据导出到文件。可以使用IMPORT_XML过程将此文件导入新的或现有的分析工作区。通过这种方式，您可以在另一个模式或数据库中创建分析工作区的副本。">EXPORT_XML_TO_FILE过程</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ARPLS73611"></a><a id="ARPLS73612"></a><a id="ARPLS73612"></a><a id="ARPLS73611"></a><div class="props_rev_3"><a id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" name="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976"></a><h4 id="ARPLS-GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" class="sect4"><span class="enumeration_section">41.4.3 CREATE_IMPORT_OPTIONS</span>过程</h4>
                  <div>
                     <p>此过程创建一个输入XML文档，该文档描述IMPORT_XML过程的处理选项。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976__GUID-97DB922C-9DF4-479D-BCCE-FAA90726E71E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.CREATE_IMPORT_OPTIONS（out_options_xml IN / OUT CLOB，validate_only IN BOOLEAN DEFAULT FALSE，rename_table IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976__GUID-EEC7143E-3031-43D3-AE62-1D44564EC92F">参数</p>
                        <div class="tblformal" id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976__GUID-AAAD0892-6623-4CB3-86BB-AE8392625AC0">
                           <p class="titleintable">表41-5 CREATE_IMPORT_OPTIONS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_IMPORT_OPTIONS过程参数" width="100%" border="1" summary="DBMS_CUBE.CREATE_IMPORT_OPTIONS parameteres" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e4335">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e4338">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4343" headers="d202489e4335 ">
                                       <p><code class="codeph">out_options_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4343 d202489e4338 ">
                                       <p>包含生成的XML文档，该文档可以传递给<a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="此过程使用XML模板创建，修改或删除分析工作区。">IMPORT_XML过程</a>的<code class="codeph">options_xml</code>参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4361" headers="d202489e4335 ">
                                       <p><code class="codeph">validate_only</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4361 d202489e4338 ">
                                       <p><code class="codeph">TRUE</code>导致<code class="codeph">IMPORT_XML</code>过程验证输入文件或<code class="codeph">in_xml</code>参数中描述的元数据，而不提交对元数据的更改。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4377" headers="d202489e4335 ">
                                       <p><code class="codeph">rename_table</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4377 d202489e4338 ">
                                       <p>标识导入对象的新名称的表的名称，格式为[ <span class="italic"><code class="codeph">schema_name</code></span> 。] <span class="italic"><code class="codeph">table_name</code></span> 。<code class="codeph">IMPORT_XML</code>过程使用表中指定的名称而不是XML文档中指定的名称创建对象。有关重命名表的格式，请参阅“使用说明”。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976__GUID-861491F5-7168-48C2-8571-1DA634B93DBA">使用说明</p>
                        <p>请参阅有关在<a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="You can upgrade an OLAP 10g analytic workspace to OLAP 12c by saving the OLAP 10g objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.">DBMS_CUBE中</a>使用重命名表的<a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="通过将OLAP 10g对象另存为XML模板并将XML导入到其他模式，可以将OLAP 10g分析工作区升级到OLAP 12c。升级过程可以保持原始分析工作区的可访问性和未更改状态。">信息 - 升级10g分析工作区</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976__GUID-F4857086-5353-44B4-8776-6790068375ED">例子</p>
                        <p>此示例仅指定验证和重命名表。有关导入中使用的导入CLOB的示例，请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="此过程使用XML模板创建，修改或删除分析工作区。">IMPORT_XML过程</a> ”</span> 。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE importClob clob; BEGIN dbms_lob.createtemporary（importClob，TRUE）; dbms_cube.create_import_options（out_options_xml =&gt; importClob，rename_table =&gt;'MY_OBJECT_MAP'，validate_only =&gt; TRUE）; DBMS_OUTPUT.PUT_LINE（importClob）;结束; /</pre><p>它生成以下XML文档：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;Import&gt; &lt;ImportOptions&gt; &lt;Option Name =“ValidateOnly”Value =“TRUE”/&gt; &lt;Option Name =“RenameTable”Value =“MY_OBJECT_MAP”/&gt; &lt;/ ImportOptions&gt; &lt;/ Import&gt;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="此过程使用XML模板创建，修改或删除分析工作区。">IMPORT_XML程序</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ARPLS65751"></a><a id="ARPLS65752"></a><a id="ARPLS65753"></a><a id="ARPLS65752"></a><a id="ARPLS65753"></a><a id="ARPLS65751"></a><div class="props_rev_3"><a id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3" name="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3"></a><h4 id="ARPLS-GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3" class="sect4"><span class="enumeration_section">41.4.4</span> CREATE_MVIEW函数</h4>
                  <div>
                     <p>此函数根据关系物化视图的定义创建立方体物化视图。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-CEDC095F-8F81-43F4-91F8-021AB55850AB">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.CREATE_MVIEW（mvowner IN VARCHAR2，mvname IN VARCHAR2，sam_parameters IN CLOB DEFAULT NULL）RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-08C698C1-55E5-4719-9692-AFA3035507B5">参数</p>
                        <div class="tblformal" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-89CE71A5-1CB3-4041-8A85-DAD99958E0D3">
                           <p class="titleintable">表41-6 CREATE_MVIEW函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_MVIEW函数参数" width="100%" border="1" summary="Parameter descriptions for CREATE_MVIEW" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e4559">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e4562">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4567" headers="d202489e4559 ">
                                       <p><code class="codeph">mvowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4567 d202489e4562 ">
                                       <p>关系物化视图的所有者。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4575" headers="d202489e4559 ">
                                       <p><code class="codeph">mvname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4575 d202489e4562 ">
                                       <p>关系物化视图的名称。有关限制，请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-0601BA46-A24E-496B-8E6A-92B6640428D7" title="SQL聚合管理使用现有的关系实例化视图来派生生成多维数据集物化视图所需的所有信息。关系物化视图确定存储在多维数据集物化视图中的数据的详细级别。相关的关系维度对象确定聚合的范围，从物化视图子查询的GROUP BY子句中指定的最低级别到维度层次结构的最高级别。">关系物化视图的要求</a> ”</span> 。
                                       </p>
                                       <p>单个多维数据集物化视图可以替换表的许多关系物化视图。选择具有要在多维数据集物化视图中表示的维层次结构的最低级别的物化视图。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4593" headers="d202489e4559 ">
                                       <p><code class="codeph">sam_parameters</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4593 d202489e4562 ">
                                       <p>参数形式为' <span class="italic">parameter1</span> = <span class="italic">value1</span> ， <span class="italic">parameter2</span> = <span class="italic">value2</span> ，...”。请参见<span class="q">“ <a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACECDBE">SQL聚合管理参数</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACECDBE">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-552C769D-B601-4AFE-BA5C-D106DB8C7813">SQL聚合管理参数</p>
                        <p><code class="codeph">CREATE_MVIEW</code>和<code class="codeph">DERIVE_FROM_MVIEW</code>函数使用<a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACDIIJC" title="SQL聚合管理的参数说明。">表41-7中</a>描述的SQL聚合管理（SAM）参数。一些参数支持使用高级分析开发多维数据集。其他参数支持Java应用程序的开发。默认设置适用于多维数据集物化视图，它们是关系物化视图的直接替换。
                        </p>
                        <div class="tblformal" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACDIIJC">
                           <p class="titleintable">表41-7 SQL聚合管理参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SQL聚合管理参数" width="100%" border="1" summary="Parameter descriptions for SQL Aggregation Management." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e4642">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e4645">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4650" headers="d202489e4642 ">
                                       <p><code class="codeph">ADDTOPS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4650 d202489e4645 ">
                                       <p>将顶级和级别成员添加到多维数据集中的每个维层次结构。如果关联的关系维度没有层次结构，则会创建维度层次结构。</p>
                                       <p><code class="codeph">TRUE</code> ：使用级别成员<code class="codeph">All_</code> <span class="italic"><code class="codeph">dimension</code></span>创建名为<code class="codeph">ALL_</code> <span class="italic"><code class="codeph">dimension</code></span>的级别。（默认）</p>
                                       <p><code class="codeph">FALSE</code> ：仅创建由关系维度标识的层次结构和级别。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4678" headers="d202489e4642 ">
                                       <p><code class="codeph">ADDUNIQUEKEYPREFIX</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4678 d202489e4645 ">
                                       <p>控制维度键的创建。</p>
                                       <p><code class="codeph">TRUE</code> ：通过将级别名称与关系维度键连接来创建多维数据集维度键。这种做法可确保维度键在所有级别都是唯一的，例如<code class="codeph">CITY_NEW_YORK</code>和<code class="codeph">STATE_NEW_YORK</code> 。 （默认）</p>
                                       <p><code class="codeph">FALSE</code> ：使用关系维度键作为多维数据集维度键。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4700" headers="d202489e4642 ">
                                       <p><code class="codeph">ATRMAPTYPE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4700 d202489e4645 ">
                                       <p>指定属性是按层次结构级别，维度级别还是两者进行映射。</p>
                                       <p><code class="codeph">HIER_LEVEL</code> ：将属性映射到特定维层次结构的级别。（默认）</p>
                                       <p><code class="codeph">DIM_LEVEL</code> ：将属性映射到维度的级别，而不考虑层次结构。
                                       </p>
                                       <p><code class="codeph">BOTH</code> ：将属性映射到维度和层次结构级别。
                                       </p>
                                       <p><code class="codeph">AUTO</code> ：将属性映射到星型模式的维度级别以及雪花模式的特定维度层次结构的级别。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4724" headers="d202489e4642 ">
                                       <p><code class="codeph">AWNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4724 d202489e4645 ">
                                       <p>提供拥有多维数据集的分析工作区的名称。选择1到30个字节的简单数据库对象名称。默认名称为<span class="italic"><code class="codeph">fact_tablename</code></span> <code class="codeph">_AW</code> <span class="italic"><code class="codeph">n</code></span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4741" headers="d202489e4642 ">
                                       <p><code class="codeph">建立</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4741 d202489e4645 ">
                                       <p>指定数据刷新是否将立即创建多维数据集物化视图。</p>
                                       <p><code class="codeph">IMMEDIATE</code> ：立即刷新。
                                       </p>
                                       <p><code class="codeph">DEFERRED</code> ：不执行数据刷新。（默认）</p>
                                       <p><span class="bold">注意</span> ：只有<code class="codeph">CREATE_MVIEW</code>函数使用此参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4764" headers="d202489e4642 ">
                                       <p><code class="codeph">CUBEMVOPTION</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4764 d202489e4645 ">
                                       <p>控制立方体物化视图的验证和创建。无论此设置如何，该函数都会创建一个包含多维数据集及其相关多维数据集维度的分析工作区。</p>
                                       <p><code class="codeph">COMPLETE_REFRESH</code> ：创建完整的刷新多维数据集物化视图（完整更新）。
                                       </p>
                                       <p><code class="codeph">FAST_REFRESH</code> ：创建快速刷新物化视图（增量更新）。
                                       </p>
                                       <p><code class="codeph">REWRITE_READY</code> ：对重写多维数据集物化视图运行验证检查，但不创建它。
                                       </p>
                                       <p><code class="codeph">REWRITE</code> ：创建重写多维数据集物化视图。
                                       </p>
                                       <p><code class="codeph">REWRITE_WITH_ATTRIBUTES</code> ：创建包含维度属性的列的重写多维数据集物化视图，从而加快查询响应时间。（默认）</p>
                                       <p><span class="bold">注意</span> ： <span class="italic">以下设置不会创建多维数据集物化视图。</span> 使用Analytic Workspace Manager删除没有多维数据集物化视图的分析工作区。只有在支持多维数据集物化视图时，才可以使用<code class="codeph">DROP_MVIEW</code>过程删除分析工作区。
                                       </p>
                                       <p><code class="codeph">NONE</code> ：不创建多维数据集物化视图。
                                       </p>
                                       <p><code class="codeph">COMPLETE_REFRESH_READY</code> ：对完整的刷新多维数据集物化视图运行验证检查，但不创建它。
                                       </p>
                                       <p><code class="codeph">FAST_REFRESH_READY</code> ：运行验证检查以进行快速刷新，但不创建多维数据集物化视图。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4814" headers="d202489e4642 ">
                                       <p><code class="codeph">CUBENAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4814 d202489e4645 ">
                                       <p>提供从关系实例化视图派生的多维数据集的名称。选择1到30个字节的简单数据库对象名称。默认名称为<span class="italic"><code class="codeph">fact_tablename</code></span> <code class="codeph">_C</code> <span class="italic"><code class="codeph">n</code></span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4831" headers="d202489e4642 ">
                                       <p><code class="codeph">DIMJAVABINDVARS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4831 d202489e4645 ">
                                       <p>支持Java程序访问XML文档。</p>
                                       <p><code class="codeph">TRUE</code> ：生成一个XML模板，该模板使用Java绑定变量表示法来表示维度的名称。不执行XML验证。您无法使用<code class="codeph">IMPORT_XML</code>过程使用此模板创建多维数据集。
                                       </p>
                                       <p><code class="codeph">FALSE</code> ：生成不支持Java绑定变量的XML模板。（默认）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4850" headers="d202489e4642 ">
                                       <p><code class="codeph">DISABLEQRW</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4850 d202489e4645 ">
                                       <p>控制在源关系实例化视图上禁用查询重写。</p>
                                       <p><code class="codeph">TRUE</code> ：发出<code class="codeph">ALTER MATERIALIZED VIEW</code> <span class="italic"><code class="codeph">mview_name</code></span> <code class="codeph">DISABLE QUERY REWRITE</code>命令。
                                       </p>
                                       <p><code class="codeph">FALSE</code> ：没有动作。
                                       </p>
                                       <p><span class="bold">注意</span> ：只有<code class="codeph">BUILD=IMMEDIATE</code>的<code class="codeph">CREATE_MVIEW</code>函数才使用此参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4886" headers="d202489e4642 ">
                                       <p><code class="codeph">EXPORTXML</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4886 d202489e4645 ">
                                       <p>将定义维对象的XML导出到文件，您指定为<span class="italic"><code class="codeph">dir/filename</code></span> 。目录和文件名都区分大小写。
                                       </p>
                                       <p><span class="italic"><code class="codeph">dir</code></span> ：数据库目录的名称。
                                       </p>
                                       <p><span class="italic"><code class="codeph">filename</code></span> ： <span class="italic"><code class="codeph">filename</code></span>的名称，通常给出XML文件扩展名。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4908" headers="d202489e4642 ">
                                       <p><code class="codeph">FILTERPARTITIONANCESTORLEVELS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4908 d202489e4645 ">
                                       <p>控制聚合值的生成高于分区多维数据集的分区级别。</p>
                                       <p><code class="codeph">TRUE</code> ：从多维数据集中删除分区级别以上的级别。SQL解决了对分区级别以上的汇总值的请求。</p>
                                       <p><code class="codeph">FALSE</code> ：所有级别都保留在多维数据集中。OLAP解决了对汇总值的请求。 （默认）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4925" headers="d202489e4642 ">
                                       <p><code class="codeph">LOGDEST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4925 d202489e4645 ">
                                       <p>指示和存储日志消息。默认情况下，消息不可用。</p>
                                       <p><code class="codeph">SERVEROUT</code> ：将消息发送到服务器输出（通常是屏幕），这适用于交互式工作，例如SQL * Plus或SQL Developer。
                                       </p>
                                       <p><code class="codeph">TRACEFILE</code> ：将消息发送到会话跟踪文件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4941" headers="d202489e4642 ">
                                       <p><code class="codeph">PARTITIONOPTION</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4941 d202489e4645 ">
                                       <p>控制多维数据集的分区。</p>
                                       <p><code class="codeph">NONE</code> ：防止分区。
                                       </p>
                                       <p><code class="codeph">DEFAULT</code> ：允许Sparsity Advisor确定是否需要分区以及如何对多维数据集进行分区。（默认）</p>
                                       <p><code class="codeph">FORCE</code> ：即使Sparsity Advisor建议对其进行分区，也会对多维数据集进行分区。Sparsity Advisor确定用于分区的最佳维度，层次结构和级别。
                                       </p>
                                       <p><span class="italic"><code class="codeph">dimension.hierarchy.level</code></span> ：使用指定的维度，层次结构和级别对多维数据集进行分区。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4966" headers="d202489e4642 ">
                                       <p><code class="codeph">POPULATELINEAGE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4966 d202489e4645 ">
                                       <p>控制多维数据集物化视图中属性的外观。</p>
                                       <p><code class="codeph">TRUE</code> ：包含多维数据集物化视图中的所有维度属性。（默认）</p>
                                       <p><code class="codeph">FALSE</code> ：忽略多维数据集物化视图中的所有维度属性。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4982" headers="d202489e4642 ">
                                       <p><code class="codeph">预计算</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4982 d202489e4645 ">
                                       <p>标识聚合和存储的数据的百分比。其余值根据会话期间的查询计算。</p>
                                       <p><span class="italic"><code class="codeph">precompute_percentage</code></span> [： <span class="italic"><code class="codeph">precompute_top_percentage</code></span> ]</p>
                                       <p>指定分区多维数据集的最高百分比。默认值为35：0，指定预计算底部分区的35％和顶部分区的0％。如果未对多维数据集进行分区，则忽略第二个数字。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5001" headers="d202489e4642 ">
                                       <p><code class="codeph">REMAPCOMPOSITEKEYS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5001 d202489e4645 ">
                                       <p>控制多列键在多维数据集中的呈现方式。</p>
                                       <p><code class="codeph">TRUE</code> ：创建唯一键属性，其值是连接的字符串表达式，列值之间带有下划线。例如，值<code class="codeph">BOSTON_MA_USA</code>可能是由<code class="codeph">CITY</code> ， <code class="codeph">STATE</code>和<code class="codeph">COUNTRY</code>列组成的多列键生成的表达式。此外，还为每个单独的列创建属性以存储关系键。（默认）</p>
                                       <p><code class="codeph">FALSE</code> ：为每列创建唯一键属性。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5029" headers="d202489e4642 ">
                                       <p><code class="codeph">RENDERINGMODE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5029 d202489e4645 ">
                                       <p>控制关系实体化视图与多维数据集物化视图之间的保真度损失是否会导致警告消息或异常。请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-0601BA46-A24E-496B-8E6A-92B6640428D7" title="SQL聚合管理使用现有的关系实例化视图来派生生成多维数据集物化视图所需的所有信息。关系物化视图确定存储在多维数据集物化视图中的数据的详细级别。相关的关系维度对象确定聚合的范围，从物化视图子查询的GROUP BY子句中指定的最低级别到维度层次结构的最高级别。">关系物化视图的要求</a> ”</span> 。
                                       </p>
                                       <p><code class="codeph">LOOSE</code> ： <a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3" title="此函数根据关系物化视图的定义创建立方体物化视图。">CREATE_MVIEW函数</a>和<a href="DBMS_CUBE.html#GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" title="This function generates an XML template that defines a cube with materialized view capabilities, using the information derived from an existing relational materialized view.">DERIVE_FROM_MVIEW函数</a>生成的可选日志中记录了<a href="DBMS_CUBE.html#GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" title="此函数使用从现有关系实例化视图派生的信息生成XML模板，该模板使用物化视图功能定义多维数据集。">损失</a> 。没有例外。（默认）</p>
                                       <p><code class="codeph">STRICT</code> ：任何保真度损失都会引发异常，因此不会创建任何XML模板。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5067" headers="d202489e4642 ">
                                       <p><code class="codeph">SEEFILTERS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5067 d202489e4645 ">
                                       <p>控制是保留还是忽略关系实例化视图的定义查询的<code class="codeph">WHERE</code>子句中的条件。
                                       </p>
                                       <p><code class="codeph">TRUE</code> ：在XML模板中呈现有效条件。（默认）</p>
                                       <p><code class="codeph">FALSE</code> ：忽略所有条件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5086" headers="d202489e4642 ">
                                       <p><code class="codeph">UNIQUENAMES</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5086 d202489e4645 ">
                                       <p>控制顶级维度对象是否具有唯一名称。可能会发生跨命名空间冲突，因为维对象具有与关系对象不同的命名空间。</p>
                                       <p><code class="codeph">TRUE</code> ：在多维数据集中呈现所有关系名称时修改它们。（默认）</p>
                                       <p><code class="codeph">FALSE</code> ：复制多维数据集中的关系名称，除非检测到命名冲突。在这种情况下，将创建一个唯一的名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5102" headers="d202489e4642 ">
                                       <p><code class="codeph">UNKNOWNKEYASDIM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5102 d202489e4645 ">
                                       <p>控制关系实体化视图定义查询的<code class="codeph">GROUP BY</code>子句中没有级别或层次结构的简单列的处理。
                                       </p>
                                       <p><code class="codeph">TRUE</code> ：将没有关系维度的简单列呈现为没有级别或层次结构的多维数据集维度。
                                       </p>
                                       <p><code class="codeph">FALSE</code> ：在未找到列的关系维度时引发异常。（默认）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5121" headers="d202489e4642 ">
                                       <p><code class="codeph">VALIDATEXML</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5121 d202489e4645 ">
                                       <p>控制是否验证生成的XML文档。</p>
                                       <p><code class="codeph">TRUE</code> ：使用<code class="codeph">VALIDATE_XML</code>过程验证模板。（默认）</p>
                                       <p><code class="codeph">FALSE</code> ：未进行验证。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-6DBEBBC0-AE99-4AAA-9097-3A846CF8B1FB">返回</p>
                        <p>函数创建的多维数据集物化视图的名称。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-FC6BF907-7E1C-4CEA-8A11-01EC6176DDC2">使用说明</p>
                        <p>请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" title="SQL聚合管理是DBMS_CUBE中的一组PL / SQL子程序，支持从现有关系实例化视图快速部署多维数据集物化视图。">使用SQL聚合管理</a> ”</span></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-E4616368-C59D-41EB-B01D-7D368DC2CADA">例子</p>
                        <p>SQL聚合管理子程序的所有示例都使用示例Sales History架构，该架构安装在Oracle数据库中，具有两个关系<code class="codeph">CAL_MONTH_SALES_MV</code>化视图： <code class="codeph">CAL_MONTH_SALES_MV</code>和<code class="codeph">FWEEK_PSCAT_SALES_MV</code> 。</p>
                        <p>以下脚本使用<code class="codeph">CAL_MONTH_SALES_MV</code>作为关系物化视图创建多维数据集物化视图。它使用所有默认选项。
                        </p><pre class="oac_no_warn" dir="ltr">SET serverout ON格式包装DECLARE salesaw varchar2（30）; BEGIN marketingaw：= dbms_cube.create_mview（'SH'，'CAL_MONTH_SALES_MV'）;结束; /</pre><p>下一个示例设置了几个参数，用于从<code class="codeph">FWEEK_PSCAT_SALES_MV</code>创建多维数据集物化视图。这些参数通过以下方式更改多维数据集物化视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ADDTOPS</code> ：向层次结构添加由单个值组成的顶级。销售历史记录中的所有维度都已达到顶级水平。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">PRECOMPUTE</code> ：将物化聚合的百分比从35：0更改为40:10。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">EXPORTXML</code> ：为XML文档创建文本文件。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">BUILD</code> ：执行数据刷新。
                              </p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr">DECLARE salescubemv varchar2（30）; sam_param clob：='ADDTOPS = FALSE，PRECOMPUTE = 40：10，EXPORTXML = WORK_DIR / sales.xml，BUILD = IMMEDIATE'; BEGIN salescubemv：= dbms_cube.create_mview（'SH'，'FWEEK_PSCAT_SALES_MV'，sam_param）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65754"></a><a id="ARPLS65755"></a><a id="ARPLS65755"></a><a id="ARPLS65754"></a><div class="props_rev_3"><a id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" name="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416"></a><h4 id="ARPLS-GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" class="sect4"><span class="enumeration_section">41.4.5</span> DERIVE_FROM_MVIEW函数</h4>
                  <div>
                     <p>此函数使用从现有关系实例化视图派生的信息生成XML模板，该模板使用物化视图功能定义多维数据集。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-0614A7EC-C23C-4A4B-B0CE-1E4E8F936A93">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.DERIVE_FROM_MVIEW（mvowner IN VARCHAR2，mvname IN VARCHAR2，sam_parameters IN CLOB DEFAULT NULL）RETURN CLOB;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-AE0A87F6-DB0B-463A-877F-8F5FF7E1D86C">参数</p>
                        <div class="tblformal" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-285079F0-6C1D-471B-A85E-148F16EF4953">
                           <p class="titleintable">表41-8 DERIVE_FROM_MVIEW函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DERIVE_FROM_MVIEW函数参数" width="100%" border="1" summary="Parameter descriptions for DERIVE_FROM_MVIEW" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e5316">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e5319">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5324" headers="d202489e5316 ">
                                       <p><code class="codeph">mvowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5324 d202489e5319 ">
                                       <p>关系物化视图的所有者。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5332" headers="d202489e5316 ">
                                       <p><code class="codeph">mvname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5332 d202489e5319 ">
                                       <p>关系物化视图的名称。有关限制，请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-0601BA46-A24E-496B-8E6A-92B6640428D7" title="SQL聚合管理使用现有的关系实例化视图来派生生成多维数据集物化视图所需的所有信息。关系物化视图确定存储在多维数据集物化视图中的数据的详细级别。相关的关系维度对象确定聚合的范围，从物化视图子查询的GROUP BY子句中指定的最低级别到维度层次结构的最高级别。">关系物化视图的要求</a> ”</span> 。
                                       </p>
                                       <p>单个多维数据集物化视图可以替换表的许多关系物化视图。选择具有要在多维数据集物化视图中表示的维层次结构的最低级别的物化视图。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5350" headers="d202489e5316 ">
                                       <p><code class="codeph">sam_parameters</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5350 d202489e5319 ">
                                       <p>可选的参数列表，格式为' <span class="italic">parameter1</span> = <span class="italic">value1</span> ， <span class="italic">parameter2</span> = <span class="italic">value2</span> ，...”。请参见<span class="q">“ <a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACECDBE">SQL聚合管理参数</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-C0D86720-9489-4B8E-AC08-26276890CC62">返回</p>
                        <p>一种XML模板，用于定义分析工作区，其中包含作为实例化视图启用的多维数据集。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-7F54A2F2-0C73-44CC-99EB-27023D258EC6">使用说明</p>
                        <p>要从XML模板创建多维数据集物化视图，请使用<code class="codeph">IMPORT_XML</code>过程。然后使用<code class="codeph">REFRESH_MVIEW</code>过程使用数据刷新多维数据集物化视图。
                        </p>
                        <p>请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" title="SQL聚合管理是DBMS_CUBE中的一组PL / SQL子程序，支持从现有关系实例化视图快速部署多维数据集物化视图。">使用SQL聚合管理</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-FBCA63D8-C618-4D0C-BF56-0BD5F5BFC821">例子</p>
                        <p>以下示例从<code class="codeph">SH</code>模式中的<code class="codeph">CAL_MONTH_SALES_MV</code>关系<code class="codeph">CAL_MONTH_SALES_MV</code>化视图生成名为<code class="codeph">sales_cube.xml</code>的XML模板。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DECLARE salescubexml clob：= null; sam_param clob：='exportXML = WORK_DIR / sales_cube.xml'; BEGIN salescubexml：= dbms_cube.derive_from_mview（'SH'，'CAL_MONTH_SALES_MV'，sam_param）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65756"></a><a id="ARPLS65757"></a><a id="ARPLS65757"></a><a id="ARPLS65756"></a><div class="props_rev_3"><a id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142" name="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142"></a><h4 id="ARPLS-GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142" class="sect4"><span class="enumeration_section">41.4.6</span> DROP_MVIEW程序</h4>
                  <div>
                     <p>此过程从数据库中删除多维数据集物化视图和所有关联对象。这些对象包括维度实体化视图，多维数据集，多维数据集维度，级别，层次结构和分析工作区。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142__GUID-69E31C2C-8497-43DE-8A8E-437BFCABA790">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.DROP_MVIEW（mvowner IN VARCHAR2，mvname IN VARCHAR2，sam_parameters IN CLOB DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142__GUID-B63F8F77-1338-403A-9E4A-6CAF4F0B1B37">参数</p>
                        <div class="tblformal" id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142__GUID-E1AE6F5D-A5CF-414A-9ECC-AE6604675324">
                           <p class="titleintable">表41-9 DROP_MVIEW过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_MVIEW过程参数" width="100%" border="1" summary="Parameter descriptions for DROP_MVIEW" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e5529">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e5532">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5537" headers="d202489e5529 ">
                                       <p><code class="codeph">mvowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5537 d202489e5532 ">
                                       <p>立方体物化视图的所有者</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5545" headers="d202489e5529 ">
                                       <p><code class="codeph">mvname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5545 d202489e5532 ">
                                       <p>多维数据集物化视图的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5553" headers="d202489e5529 ">
                                       <p><code class="codeph">sam_parameters</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5553 d202489e5532 ">
                                       <p><code class="codeph">EXPORTXML</code> ：将用于删除维对象的XML导出到文件，您指定为<span class="italic"><code class="codeph">dir/filename</code></span> 。目录和文件名都区分大小写。
                                       </p>
                                       <p><span class="italic"><code class="codeph">dir</code></span> ：数据库目录的名称。
                                       </p>
                                       <p><span class="italic"><code class="codeph">filename</code></span> ： <span class="italic"><code class="codeph">filename</code></span>的名称，通常给出XML文件扩展名。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142__GUID-46284046-5F3B-49E9-820E-98BF70E283D4">使用说明</p>
                        <p>使用此过程删除使用<code class="codeph">CREATE_MVIEW</code>和<code class="codeph">DERIVE_FROM_MVIEW</code>函数创建的多维数据集物化视图。如果对多维数据集或维度进行修改，则<code class="codeph">DROP_MVIEW</code>可能无法删除多维数据集物化视图。
                        </p>
                        <p><code class="codeph">CREATE_MVIEW</code>和<code class="codeph">DERIVE_FROM_MVIEW</code>函数使用的某些<code class="codeph">CUBEMVOPTION</code>参数不会创建<code class="codeph">DERIVE_FROM_MVIEW</code>化视图。使用Analytic Workspace Manager删除分析工作区，多维数据集和多维数据集维度。
                        </p>
                        <p>如果使用<code class="codeph">EXPORTXML</code>参数，则可以在重新创建后使用XML文档删除多维数据集物化视图。使用<code class="codeph">IMPORT_XML</code>过程。
                        </p>
                        <p>请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" title="SQL聚合管理是DBMS_CUBE中的一组PL / SQL子程序，支持从现有关系实例化视图快速部署多维数据集物化视图。">使用SQL聚合管理</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142__GUID-B8024024-78D5-4874-84B0-A61B5CBD89A0">例子</p>
                        <p>当前架构有四个物化视图。<code class="codeph">CB$CAL_MONTH_SALES</code>是<code class="codeph">SALES</code>表的多维数据集物化视图。<code class="codeph">CB$TIMES_DIM_D1_CAL_ROLLUP</code>是<code class="codeph">TIMES</code>维度表上<code class="codeph">TIMES_DIM</code>维度的多维数据集维度物化视图。其他是关系物化观点。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT mview_name FROM user_mviews; MVIEW_NAME ------------------------------ CB $ CAL_MONTH_SALES CB $ TIMES_DIM_D1_CAL_ROLLUP CAL_MONTH_SALES_MV FWEEK_PSCAT_SALES_MV</pre><p>以下命令同时删除<code class="codeph">CB$CAL_MONTH_SALES</code>和<code class="codeph">CB$TIMES_DIM_D1_CAL_ROLLUP</code> 。</p><pre class="oac_no_warn" dir="ltr">执行dbms_cube.drop_mview（'SH'，'CB $ CAL_MONTH_SALES'）;丢弃的多维数据集组织物化视图“SH”。“CAL_MONTH_SALES”包括容器分析工作区“SH”。“CAL_MONTH_SALES_AW”在20130213 16：31：40.056。
</pre><p>对数据字典的此查询确认已删除实例化视图。</p><pre class="oac_no_warn" dir="ltr">SELECT mview_name FROM user_mviews; MVIEW_NAME ------------------------------ CAL_MONTH_SALES_MV FWEEK_PSCAT_SALES_MV</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS72232"></a><a id="ARPLS72233"></a><a id="ARPLS72233"></a><a id="ARPLS72232"></a><div class="props_rev_3"><a id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" name="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A"></a><h4 id="ARPLS-GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" class="sect4"><span class="enumeration_section">41.4.7</span> EXPORT_XML过程</h4>
                  <div>
                     <p>此过程将OLAP元数据写入CLOB。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-3452FA7C-3687-4780-B888-3D8A619E38AF">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.EXPORT_XML（object_ids IN VARCHAR2，out_xml IN / OUT CLOB; DBMS_CUBE.EXPORT_XML（object_ids IN VARCHAR2，options_xml IN CLOB，out_xml IN / OUT CLOB; DBMS_CUBE.EXPORT_XML（object_ids IN VARCHAR2，options_dirname IN VARCHAR2，options_filename IN VARCHAR2，out_xml IN / OUT CLOB;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-09EA6B68-AADE-4D65-9525-4C765BDA77ED">参数</p>
                        <div class="tblformal" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-39299D73-41E8-4FD8-85E3-424CD78D7776">
                           <p class="titleintable">表41-10 EXPORT_XML过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXPORT_XML过程参数" width="100%" border="1" summary="DBMS_CUBE.EXPORT_XML parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e5768">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e5771">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5776" headers="d202489e5768 ">
                                       <p><code class="codeph">object_ids</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5776 d202489e5771 ">
                                       <p>任何这些标识符。</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>模式的名称，例如<code class="codeph">GLOBAL</code> 。</p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">owner.aw_name</code></span>形式的分析工作空间的完全限定名称<code class="codeph">.AW</code> ，例如<code class="codeph">GLOBAL.GLOBAL.AW</code> 。</p>
                                          </li>
                                          <li>
                                             <p>立方体</p>
                                          </li>
                                          <li>
                                             <p>尺寸</p>
                                          </li>
                                          <li>
                                             <p>命名构建过程</p>
                                          </li>
                                          <li>
                                             <p>测量文件夹</p>
                                          </li>
                                       </ul>
                                       <p>您可以通过用逗号分隔名称来指定多个对象。</p>
                                       <p><span class="bold">注意</span> ：导出单个对象时，请确保导出重建它所需的任何对象。例如，导出多维数据集时，还必须导出多维数据集的维度。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5821" headers="d202489e5768 ">
                                       <p><code class="codeph">options_dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5821 d202489e5771 ">
                                       <p>包含<span class="italic"><code class="codeph">options_filename</code></span>的数据库目录的区分大小写的名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5833" headers="d202489e5768 ">
                                       <p><code class="codeph">options_filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5833 d202489e5771 ">
                                       <p>包含导出选项的XML文档的文件。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5841" headers="d202489e5768 ">
                                       <p><code class="codeph">options_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5841 d202489e5771 ">
                                       <p>一个CLOB变量，包含导出选项的XML文档。使用<a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="此过程创建一个输入XML文档，该文档描述EXPORT_XML过程和EXPORT_XML_TO_FILE过程的处理选项。">CREATE_EXPORT_OPTIONS过程</a>生成此文档。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5856" headers="d202489e5768 ">
                                       <p><code class="codeph">out_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5856 d202489e5771 ">
                                       <p>一个CLOB变量，它将为<span class="italic"><code class="codeph">object_ids</code></span>列出的对象存储OLAP元数据的XML文档。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-96D1BDC8-9F90-47DB-AF39-F3E4C4DBDB18">出口选项</p>
                        <p>在许多情况下，导出选项的默认设置是合适的，因此您可以省略<span class="italic"><code class="codeph">options_xml</code></span>参数或<span class="italic"><code class="codeph">options_dirname</code></span>和<span class="italic"><code class="codeph">options_filename</code></span>参数。但是，在将Oracle OLAP 10 <span class="italic">g</span>元数据升级到OLAP 12 <span class="italic">c时</span> ，必须指定更改默认设置的XML文档。此示例将所有参数从False更改为True;为您的架构适当地设置它们。
                        </p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;Export&gt; &lt;ExportOptions&gt; &lt;Option Name =“SuppressNamespace”Value =“True”/&gt; &lt;Option Name =“SuppressOwner”Value =“True”/&gt; &lt;Option Name =“PreserveTableOwners”Value =“True”/&gt; &lt; / ExportOptions&gt; &lt;/ Export&gt;</pre><p>您可以手动或使用<a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="此过程创建一个输入XML文档，该文档描述EXPORT_XML过程和EXPORT_XML_TO_FILE过程的处理选项。">CREATE_EXPORT_OPTIONS过程</a>创建此XML文档。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-5BB66D73-315C-40D7-85CB-7C7C91E6F4A4">使用说明</p>
                        <p>请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="通过将OLAP 10g对象另存为XML模板并将XML导入到其他模式，可以将OLAP 10g分析工作区升级到OLAP 12c。升级过程可以保持原始分析工作区的可访问性和未更改状态。">DBMS_CUBE  - 升级10g分析工作区</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-272A0D9C-97F6-4E70-BBD4-4F4C82756CC2">例</p>
                        <p>有关在升级到同一模式时使用<code class="codeph">EXPORT_XML</code>的示例，请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="通过将OLAP 10g对象另存为XML模板并将XML导入到其他模式，可以将OLAP 10g分析工作区升级到OLAP 12c。升级过程可以保持原始分析工作区的可访问性和未更改状态。">DBMS_CUBE  - 升级10g分析工作区</a> ”</span> 。
                        </p>
                        <p>以下PL / SQL脚本将名为<code class="codeph">GLOBAL12</code>的OLAP 12 <span class="italic">c</span>分析工作区从<code class="codeph">GLOBAL_AW</code>模式<code class="codeph">GLOBAL_AW</code>到<code class="codeph">GLOBAL</code>模式。不执行升级。
                        </p>
                        <p>要升级到其他架构，请按如下所示更改示例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>调用<code class="codeph">INITIALIZE_CUBE_UPGRADE</code>过程。
                              </p>
                           </li>
                           <li>
                              <p>使用附加参数设置<code class="codeph">SUPPRESS_NAMESPACE=&gt;TRUE</code>调用<code class="codeph">CREATE_EXPORT_OPTIONS</code>过程。</p>
                           </li>
                        </ul>
                        <p>PL / SQL客户端必须以<code class="codeph">GLOBAL</code>身份连接到数据库。 <code class="codeph">GLOBAL</code>用户必须对<code class="codeph">GLOBAL_AW.AW$GLOBAL</code>和所有关系数据源具有<code class="codeph">SELECT</code>权限。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN  - 为导出选项dbms_lob.createtemporary创建一个CLOB（optionsClob，TRUE）; dbms_cube.create_export_options（out_options_xml =&gt; optionsClob，suppress_owner =&gt; TRUE，preserve_table_owners =&gt; TRUE）; - 为XML模板dbms_lob.createtemporary创建一个CLOB（exportClob，TRUE）; - 将元数据从分析工作区导出到CLOB dbms_cube.export_xml（object_ids =&gt;'GLOBAL_AW.GLOBAL12。AW'，options_xml =&gt; optionsClob，out_xml =&gt; exportClob）; - 从CLOB dbms_cube.import_xml导入元数据（in_xml =&gt; exportClob）; - 加载并聚合数据dbms_cube.build（script =&gt;'GLOBAL.UNITS_CUBE，GLOBAL.PRICE_AND_COST_CUBE'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS72888"></a><a id="ARPLS72889"></a><a id="ARPLS72889"></a><a id="ARPLS72888"></a><div class="props_rev_3"><a id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46" name="GUID-12A6C317-F339-475C-910C-E30F40D8CB46"></a><h4 id="ARPLS-GUID-12A6C317-F339-475C-910C-E30F40D8CB46" class="sect4"><span class="enumeration_section">41.4.8</span> EXPORT_XML_TO_FILE过程</h4>
                  <div>
                     <p>此过程将OLAP元数据导出到文件。可以使用<code class="codeph">IMPORT_XML</code>过程将此文件导入新的或现有的分析工作区。通过这种方式，您可以在另一个模式或数据库中创建分析工作区的副本。
                     </p>
                     <div class="section">
                        <p>此过程还可用作将Oracle OLAP 10 <span class="italic">g</span>分析工作区中包含的OLAP标准表单元数据升级到OLAP 12 <span class="italic">c</span>格式的过程的一部分。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-4E65C64C-E1A9-40C4-ADB0-814D35C9D18A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.EXPORT_XML_TO_FILE（object_ids IN VARCHAR2，output_dirname IN VARCHAR2，output_filename IN VARCHAR2; DBMS_CUBE.EXPORT_XML_TO_FILE（object_ids IN VARCHAR2，options_dirname IN VARCHAR2，options_filename IN VARCHAR2，output_dirname IN VARCHAR2，output_filename IN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-F8D13BDA-4B6E-42A9-966D-DA90E74FF651">参数</p>
                        <div class="tblformal" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-00A4B91F-7BC3-4457-9293-BDC14CB8B22A">
                           <p class="titleintable">表41-11 EXPORT_XML_TO_FILE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXPORT_XML_TO_FILE过程参数" width="100%" border="1" summary="DBMS_CUBE.IMPORT_XML_TO_FILE parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e6123">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e6126">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6131" headers="d202489e6123 ">
                                       <p><code class="codeph">object_ids</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6131 d202489e6126 ">
                                       <p>任何这些标识符。</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>模式的名称，例如<code class="codeph">GLOBAL</code> 。</p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">owner.aw_name</code></span>形式的分析工作空间的完全限定名称<code class="codeph">.AW</code> ，例如<code class="codeph">GLOBAL.GLOBAL.AW</code> 。</p>
                                          </li>
                                          <li>
                                             <p>立方体</p>
                                          </li>
                                          <li>
                                             <p>尺寸</p>
                                          </li>
                                          <li>
                                             <p>命名构建过程</p>
                                          </li>
                                          <li>
                                             <p>测量文件夹</p>
                                          </li>
                                       </ul>
                                       <p>您可以通过用逗号分隔名称来指定多个对象。</p>
                                       <p><span class="bold">注意</span> ：导出单个对象时，请确保导出重建它所需的任何对象。例如，导出多维数据集时，还必须导出多维数据集的维度。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6176" headers="d202489e6123 ">
                                       <p><code class="codeph">options_dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6176 d202489e6126 ">
                                       <p>包含<code class="codeph">options_filename</code>的数据库目录的区分大小写的名称。请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-12A6C317-F339-475C-910C-E30F40D8CB46__CACHFBBI">导出选项</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6191" headers="d202489e6123 ">
                                       <p><code class="codeph">options_filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6191 d202489e6126 ">
                                       <p>包含导出选项的XML文档的文件的名称。请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-12A6C317-F339-475C-910C-E30F40D8CB46__CACHFBBI">导出选项</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6203" headers="d202489e6123 ">
                                       <p><code class="codeph">output_dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6203 d202489e6126 ">
                                       <p>创建<span class="italic"><code class="codeph">output_filename</code></span>的数据库目录的区分大小写的名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6215" headers="d202489e6123 ">
                                       <p><code class="codeph">output_filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6215 d202489e6126 ">
                                       <p>过程创建的模板文件的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__CACHFBBI">
                        <p class="subhead3" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-FAB81B36-605A-44FE-B718-F87F7FD7E6B2">出口选项</p>
                        <p>在大多数情况下，导出选项的默认设置是合适的，您可以省略<span class="italic"><code class="codeph">options_dirname</code></span>和<span class="italic"><code class="codeph">options_filename</code></span>参数。但是，在将Oracle OLAP 10 <span class="italic">g</span>元数据升级到OLAP 12 <span class="italic">c时</span> ，必须指定更改默认设置的XML文档，如下所示：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“2.0”？&gt; &lt;Export&gt; &lt;ExportOptions&gt; &lt;Option Name =“SuppressNamespace”Value =“True”/&gt; &lt;Option Name =“SuppressOwner”Value =“True”/&gt; &lt;Option Name =“PreserveTableOwners”Value =“True”/&gt; &lt; / ExportOptions&gt; &lt;/ Export&gt;</pre><p>您可以手动或使用<a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="此过程创建一个输入XML文档，该文档描述EXPORT_XML过程和EXPORT_XML_TO_FILE过程的处理选项。">CREATE_EXPORT_OPTIONS过程</a>创建此XML文档。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-C0A23ACE-0CAD-4040-A234-4DD6A5EE8F55">使用说明</p>
                        <p>请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="通过将OLAP 10g对象另存为XML模板并将XML导入到其他模式，可以将OLAP 10g分析工作区升级到OLAP 12c。升级过程可以保持原始分析工作区的可访问性和未更改状态。">DBMS_CUBE  - 升级10g分析工作区</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-106922E9-9B47-49BF-B395-768E15567AAC">例子</p>
                        <p>以下示例使用默认导出设置生成OLAP 12 <span class="italic">c</span>格式的名为global.xml的XML文件。元数据派生自<code class="codeph">GLOBAL_AW</code>模式中的所有分析工作空间和CWM元数据。输出文件在<code class="codeph">WORK_DIR</code>数据库目录中生成。
                        </p><pre class="oac_no_warn" dir="ltr">执行dbms_cube.export_xml_to_file（'GLOBAL_AW'，'WORK_DIR'，'global.xml'）;</pre><p>下一个示例还使用options.xml中设置的导出选项生成OLAP 12 <span class="italic">c</span>格式的名为global.xml的XML文件。元数据派生自<code class="codeph">GLOBAL_AW</code>模式中的GLOBAL分析工作区。选项文件和输出文件都在<code class="codeph">WORK_DIR</code>数据库目录中。
                        </p><pre class="oac_no_warn" dir="ltr">执行dbms_cube.export_xml_to_file（'GLOBAL_AW.GLOBAL.AW'，'WORK_DIR'，'options.xml'，'WORK_DIR'，'global.xml'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65758"></a><a id="ARPLS65759"></a><a id="ARPLS65759"></a><a id="ARPLS65758"></a><div class="props_rev_3"><a id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" name="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC"></a><h4 id="ARPLS-GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" class="sect4"><span class="enumeration_section">41.4.9</span> IMPORT_XML过程</h4>
                  <div>
                     <p>此过程使用XML模板创建，修改或删除分析工作区。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC__GUID-57C400E8-8203-43AB-A19D-D24C7108C944">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.IMPORT_XML（dirname IN VARCHAR2，filename IN VARCHAR2）; DBMS_CUBE.IMPORT_XML（dirname IN VARCHAR2，filename IN VARCHAR2，out_xml IN / OUT CLOB）; DBMS_CUBE.IMPORT_XML（input_dirname IN VARCHAR2，input_filename IN VARCHAR2 options_dirname IN VARCHAR2，options_filename IN VARCHAR2，out_xml IN / OUT CLOB）; DBMS_CUBE.IMPORT_XML（in_xml IN CLOB）; DBMS_CUBE.IMPORT_XML（in_xml IN CLOB，out_xml IN / OUT CLOB）; DBMS_CUBE.IMPORT_XML（in_xml IN CLOB，options_xml IN CLOB，out_xml IN / OUT CLOB）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC__GUID-E0E8E420-9CA4-4654-8DFC-ED2B69AE47BF">参数</p>
                        <div class="tblformal" id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC__GUID-BF66BE9E-C51F-4213-8438-13998A732809">
                           <p class="titleintable">表41-12 IMPORT_XML过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="IMPORT_XML过程参数" width="100%" border="1" summary="DBMS_CUBE.IMPORT_XML parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e6413">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e6416">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6421" headers="d202489e6413 ">
                                       <p><code class="codeph">目录名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6421 d202489e6416 ">
                                       <p>包含描述分析工作区的XML文档的数据库目录的区分大小写的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6429" headers="d202489e6413 ">
                                       <p><code class="codeph">文件名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6429 d202489e6416 ">
                                       <p>包含描述分析工作区的XML文档的文件。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6437" headers="d202489e6413 ">
                                       <p><code class="codeph">in_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6437 d202489e6416 ">
                                       <p>包含描述分析工作区的XML文档的CLOB。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6445" headers="d202489e6413 ">
                                       <p><code class="codeph">input_dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6445 d202489e6416 ">
                                       <p>包含描述分析工作区的XML文档的数据库目录的区分大小写的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6453" headers="d202489e6413 ">
                                       <p><code class="codeph">input_filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6453 d202489e6416 ">
                                       <p>包含描述分析工作区的XML文档的文件。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6461" headers="d202489e6413 ">
                                       <p><code class="codeph">options_dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6461 d202489e6416 ">
                                       <p>包含导入选项文件的数据库目录的区分大小写的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6469" headers="d202489e6413 ">
                                       <p><code class="codeph">options_filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6469 d202489e6416 ">
                                       <p>导入选项的文件。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6477" headers="d202489e6413 ">
                                       <p><code class="codeph">options_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6477 d202489e6416 ">
                                       <p>描述导入选项的XML文档。使用<a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="此过程创建一个输入XML文档，该文档描述IMPORT_XML过程的处理选项。">CREATE_IMPORT_OPTIONS过程</a>生成此文档。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6492" headers="d202489e6413 ">
                                       <p><code class="codeph">out_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6492 d202489e6416 ">
                                       <p>描述分析工作区的XML文档，或仅用于验证的XML文档，描述任何错误。它可能包含<code class="codeph">DBMS_CUBE</code>对导入的XML所做的更改，例如设置默认值或对XML进行微小更正。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC__GUID-4D34EB75-586B-45AB-B7E6-6810BDBCC3BE">使用说明</p>
                        <p>XML可以定义，修改或删除整个分析工作区，或一个或多个多维数据集或维度。仅定义多维数据集或维度时，必须在现有分析工作区中执行此操作。</p>
                        <p>您还可以使用<code class="codeph">IMPORT_XML</code>通过使用<code class="codeph">DROP_MVIEW</code>过程使用<code class="codeph">EXPORTXML</code>参数生成的XML文档来删除分析工作区。
                        </p>
                        <p>请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="通过将OLAP 10g对象另存为XML模板并将XML导入到其他模式，可以将OLAP 10g分析工作区升级到OLAP 12c。升级过程可以保持原始分析工作区的可访问性和未更改状态。">DBMS_CUBE  - 升级10g分析工作区</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC__GUID-771A6A74-08D0-4BDE-AC63-E6B0D26252C8">例</p>
                        <p>这个例子加载从一个文件名为XML模板<code class="codeph">GLOBAL.XML</code> ，位于一个名为数据库目录<code class="codeph">XML_DIR</code> 。</p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.import_xml（'XML_DIR'，'GLOBAL.XML'）;</pre><p>下一个示例导出OLAP 10 <span class="italic">g</span>模板，并在升级到12 <span class="italic">c</span>之前使用<code class="codeph">IMPORT_XML</code>进行验证。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE exportOptClob clob; importOptClob clob; importClob clob; exportClob clob; BEGIN  - 为导出选项dbms_lob.createtemporary（exportOptClob，TRUE）创建一个CLOB; dbms_cube.create_export_options（out_options_xml =&gt; exportOptClob，suppress_namespace =&gt; TRUE，preserve_table_owners =&gt; TRUE）; - 为XML模板dbms_lob.createtemporary创建一个CLOB（exportClob，TRUE）; - 为导入选项创建一个CLOB dbms_lob.createtemporary（importOptClob，TRUE）; dbms_cube.create_import_options（out_options_xml =&gt; importOptClob，validate_only =&gt; TRUE）; - 为更改日志dbms_lob.createtemporary创建一个CLOB（importClob，TRUE）; - 使Oracle Database 12c第1版（12.1）客户端能够访问10g元数据dbms_cube.initialize_cube_upgrade; - 将元数据从分析工作区导出到CLOB dbms_cube.export_xml（object_ids =&gt;'GLOBAL_AW'，options_xml =&gt; exportOptClob，out_xml =&gt; exportClob）; / *从CLOB导入元数据。没有对象提交到数据库，因为CREATE_IMPORT_OPTIONS的validate_only参数设置为TRUE。 * / dbms_cube.import_xml（in_xml =&gt; exportClob，options_xml =&gt; importOptClob，out_xml =&gt; importClob）; - 输出元数据更改dbms_output.put_line（'这是验证日志：'）; DBMS_OUTPUT.PUT_LINE（importClob）;结束; /</pre><p><code class="codeph">importClob</code>的内容显示XML有效。否则，错误消息将出现在<code class="codeph">&lt;RootCommitResult&gt;</code>元素中。
                        </p><pre class="oac_no_warn" dir="ltr">这是验证日志：&lt;？xml version =“1.0”encoding =“UTF-16”？&gt; &lt;RootCommitResult&gt; &lt;/ RootCommitResult&gt;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>有关从10 <span class="italic">g</span>到12 <span class="italic">c</span>元数据升级的上下文中<code class="codeph">IMPORT_XML</code>的示例，请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="通过将OLAP 10g对象另存为XML模板并将XML导入到其他模式，可以将OLAP 10g分析工作区升级到OLAP 12c。升级过程可以保持原始分析工作区的可访问性和未更改状态。">DBMS_CUBE  - 升级10g分析工作区</a> ”</span>的自定义升级部分。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS72891"></a><a id="ARPLS72891"></a><div class="props_rev_3"><a id="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703" name="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703"></a><h4 id="ARPLS-GUID-478D4764-1AE1-40B3-A25C-4BE05659C703" class="sect4"><span class="enumeration_section">41.4.10</span> INITIALIZE_CUBE_UPGRADE过程</h4>
                  <div>
                     <p>此过程处理在Oracle OLAP 10 <span class="italic">g中</span>创建的分析工作区，以便Oracle OLAP 12 <span class="italic">c</span>客户端可以使用它们。它处理当前架构中的所有分析工作区。对于每个具有10 <span class="italic">g</span>分析工作区的模式，运行此过程一次。
                     </p>
                     <div class="section">
                        <p>如果没有此处理步骤，12 <span class="italic">c</span>客户端将无法连接到包含10 <span class="italic">g</span>分析工作区的数据库，其中包含具有相同名称的维或多维数据集的子对象。此外，某些<code class="codeph">DBMS_CUBE</code>过程和函数（如<code class="codeph">EXPORT_XML</code>和<code class="codeph">EXPORT_XML_TO_FILE</code> ）不适用于10 <span class="italic">g</span>元数据。
                        </p>
                        <p>处理完成后，OLAP 12 <span class="italic">c</span>客户端可以连接并使用<code class="codeph">INITIALIZE_CUBE_UPGRADE</code>提供的备用名称作为冲突的子对象。OLAP 10 <span class="italic">g</span>客户端继续使用原始名称。
                        </p>
                        <p><code class="codeph">INITIALIZE_CUBE_UPGRADE</code>不会将任何OLAP 10 <span class="italic">g</span>对象升级为OLAP 12 <span class="italic">c</span>格式。
                        </p>
                        <p>请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="通过将OLAP 10g对象另存为XML模板并将XML导入到其他模式，可以将OLAP 10g分析工作区升级到OLAP 12c。升级过程可以保持原始分析工作区的可访问性和未更改状态。">DBMS_CUBE  - 升级10g分析工作区</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703__GUID-335F4599-CDC1-416C-8D1E-BB7FB580D87D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.INITIALIZE_CUBE_UPGRADE;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703__GUID-72007CCF-7C3B-4CB4-A5B9-AF0F2BEADBE0">使用说明</p>
                        <p>此过程创建并填充名为的表<a id="d202489e6773" class="indexterm-anchor"></a> <code class="codeph">CUBE_UPGRADE_INFO</code> 。如果它已经存在，则表将被截断并重新填充。
                        </p>
                        <p>虽然10 <span class="italic">g</span>命名空间允许在同一维度或多维数据集中具有相同名称的子对象，但12 <span class="italic">c</span>命名空间却不允许。当<code class="codeph">INITIALIZE_CUBE_UPGRADE</code>检测到子对象（如级别，层次结构和维度属性）之间的名称冲突时，它会在<code class="codeph">CUBE_UPGRADE_INFO</code>创建一个行，为每个子对象提供一个新的唯一名称。也可以为不需要重命名的对象创建行;这些行在<code class="codeph">CONFLICT</code>列中由值0或null区分。未列出顶级对象，例如尺寸和立方体。
                        </p>
                        <p>如果要在OLAP 12 <span class="italic">c</span>客户端上自定义OLAP 10 <span class="italic">g</span>对象的名称，可以使用SQL <code class="codeph">INSERT</code>和<code class="codeph">UPDATE</code>编辑表。
                        </p>
                        <p><code class="codeph">UPGRADE_AW</code> ， <code class="codeph">EXPORT_XML</code>和<code class="codeph">EXPORT_XML_TO_FILE</code>过程使用表的<code class="codeph">NEW_NAME</code>列中指定的名称来标识CWM或OLAP标准格式（AWXML）分析工作区中的对象，而不是原始名称。
                        </p>
                        <p>下表描述了<code class="codeph">CUBE_UPGRADE_INFO</code>的列。</p>
                        <div class="tblformal" id="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703__GUID-EC32C115-BEB0-41BE-A076-AA669D0C64F3">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Column descriptions for CUBE_UPGRADE_INFO" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="16%" id="d202489e6838">柱</th>
                                    <th align="left" valign="bottom" width="13%" id="d202489e6841">数据类型</th>
                                    <th align="left" valign="bottom" width="12%" id="d202489e6844">空值</th>
                                    <th align="left" valign="bottom" width="59%" id="d202489e6847">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6852" headers="d202489e6838 ">
                                       <p><code class="codeph">所有者</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6852 d202489e6841 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6852 d202489e6844 ">
                                       <p><code class="codeph">不是NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6852 d202489e6847 ">
                                       <p>分析工作区的所有者。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6868" headers="d202489e6838 ">
                                       <p><code class="codeph">AW</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6868 d202489e6841 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6868 d202489e6844 ">
                                       <p><code class="codeph">不是NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6868 d202489e6847 ">
                                       <p>分析工作区的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6884" headers="d202489e6838 ">
                                       <p><code class="codeph">AWXML_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6884 d202489e6841 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6884 d202489e6844 ">
                                       <p><code class="codeph">不是NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6884 d202489e6847 ">
                                       <p>需要修改的对象的完整逻辑名称，格式为<span class="italic"><code class="codeph">simple_name.[subtype_name].object_type</code></span> 。例如， <code class="codeph">TIME.DIMENSION</code>和<code class="codeph">PRODUCT.COLOR.ATTRIBUTE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6910" headers="d202489e6838 ">
                                       <p><code class="codeph">新名字</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6910 d202489e6841 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6910 d202489e6844 ">
                                       <p><code class="codeph">不是NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6910 d202489e6847 ">
                                       <p>升级后对象在Oracle 12 <span class="italic">c中</span>的名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6929" headers="d202489e6838 ">
                                       <p><code class="codeph">OBJECT_CLASS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6929 d202489e6841 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6929 d202489e6844 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6929 d202489e6847 ">
                                       <p><code class="codeph">DerivedMeasure</code>用于计算度量，或为所有其他对象类型为空。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6946" headers="d202489e6838 ">
                                       <p><code class="codeph">冲突</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6946 d202489e6841 ">
                                       <p><code class="codeph">数</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6946 d202489e6844 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6946 d202489e6847 ">
                                       <p>指示将行添加到CUBE_UPGRADE_INFO的原因：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">0</code> ：对象没有命名冲突，但出于其他原因出现在表中。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">1</code> ：两个对象具有相同的名称，并将在OLAP 12 <span class="italic">c</span>命名空间中创建冲突。对象类型（如级别或层次结构）将添加到名称中。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703__GUID-FE51E026-C1BD-4846-A9C4-F307F0D812D7">例子</p>
                        <p>以下命令创建并填充CUBE_UPGRADE_INFO表：</p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.initialize_cube_upgrade;</pre><p>该表显示OLAP 10 <span class="italic">g</span>分析工作区具有层次结构和名为MARKET_SEGMENT的级别，该级别将重命名。该表还包含计算度量的行，但这些对象不需要重命名： <code class="codeph">CONFLICT</code>值为<code class="codeph">0</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT awxml_id，new_name，冲突FROM cube_upgrade_info; AWXML_ID NEW_NAME CONFLICT ---------------------------------------- ------- ------------------ ---------- CUSTOMER.MARKET_SEGMENT.HIERARCHY MARKET_SEGMENT_HIERARCHY 1 CUSTOMER.MARKET_SEGMENT.LEVEL MARKET_SEGMENT_LEVEL 1 UNITS_CUBE.EXTENDED_COST.MEASURE EXTENDED_COST 0 UNITS_CUBE .EXTENDED_MARGIN.MEASURE EXTENDED_MARGIN 0 UNITS_CUBE.CHG_SALES_PP.MEASURE CHG_SALES_PP 0 UNITS_CUBE.CHG_SALES_PY.MEASURE CHG_SALES_PY 0 UNITS_CUBE.PCTCHG_SALES_PP.MEASURE PCTCHG_SALES_PP 0 UNITS_CUBE.PCTCHG_SALES_PY.MEASURE PCTCHG_SALES_PY 0 UNITS_CUBE.PRODUCT_SHARE.MEASURE PRODUCT_SHARE 0 UNITS_CUBE.CHANNEL_SHARE.MEASURE CHANNEL_SHARE 0 UNITS_CUBE。 MARKET_SHARE.MEASURE MARKET_SHARE 0 UNITS_CUBE.CHG_EXTMRGN_PP.MEASURE CHG_EXTMRGN_PP 0 UNITS_CUBE.CHG_EXTMRGN_PY.MEASURE CHG_EXTMRGN_PY 0 UNITS_CUBE.PCTCHG_EXTMRGN_PP.MEASURE PCTCHG_EXTMRGN_PP 0 UNITS_CUBE.PCTCHG_EXTMRGN_PY.MEASURE PCTCHG_EXTMRGN_PY 0 UNITS_CUBE.CHG_UNITS_PP.MEASURE CHG_UNITS_PP 0 UNITS_CUBE.EXTMRGN_PER_UNIT.MEASURE EXTMRGN_PER_UNIT 0 UNITS_CUBE.SALES _YTD.MEASURE SALES_YTD 0 UNITS_CUBE.SALES_YTD_PY.MEASURE SALES_YTD_PY 0 UNITS_CUBE.PCTCHG_SALES_YTD_PY.MEASURE PCTCHG_SALES_YTD_PY 0 UNITS_CUBE.SALES_QTD.MEASURE SALES_QTD 0 UNITS_CUBE.CHG_UNITS_PY.MEASURE CHG_UNITS_PY 0</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65760"></a><a id="ARPLS65761"></a><a id="ARPLS65761"></a><a id="ARPLS65760"></a><div class="props_rev_3"><a id="GUID-861E4292-7C61-4D22-860D-18D894E882CA" name="GUID-861E4292-7C61-4D22-860D-18D894E882CA"></a><h4 id="ARPLS-GUID-861E4292-7C61-4D22-860D-18D894E882CA" class="sect4"><span class="enumeration_section">41.4.11</span> REFRESH_MVIEW程序</h4>
                  <div>
                     <p>此过程将刷新多维数据集物化视图中的数据。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-861E4292-7C61-4D22-860D-18D894E882CA__GUID-5624169F-1172-41CB-8C0E-C538E1F4BBCA">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.REFRESH_MVIEW（mvowner IN VARCHAR2，mvname IN VARCHAR2，方法IN VARCHAR2 DEFAULT NULL，refresh_after_errors IN BOOLEAN DEFAULT FALSE，并行性IN BINARY_INTEGER DEFAULT 0，atomic_refresh IN BOOLEAN DEFAULT FALSE，scheduler_job IN VARCHAR2 DEFAULT NULL，sam_parameters IN CLOB DEFAULT NULL，嵌套IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-861E4292-7C61-4D22-860D-18D894E882CA__GUID-528D64D8-F84A-43FA-AFAC-473C7FE3507F">参数</p>
                        <div class="tblformal" id="GUID-861E4292-7C61-4D22-860D-18D894E882CA__GUID-1DAFB717-A939-417C-A9D2-B48D30254A46">
                           <p class="titleintable">表41-13 REFRESH_MVIEW过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REFRESH_MVIEW过程参数" width="100%" border="1" summary="Parameter descriptions for REFRESH_MVIEW" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e7105">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e7108">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7113" headers="d202489e7105 ">
                                       <p><code class="codeph">mvowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7113 d202489e7108 ">
                                       <p>立方体物化视图的所有者。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7121" headers="d202489e7105 ">
                                       <p><code class="codeph">mvname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7121 d202489e7108 ">
                                       <p>多维数据集物化视图的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7129" headers="d202489e7105 ">
                                       <p><code class="codeph">方法</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7129 d202489e7108 ">
                                       <p>完整或快速（部分）刷新。在快速刷新中，仅在多维数据集中插入已更改的行，并重新聚合多维数据集的受影响区域。</p>
                                       <p>您可以按顺序为每个多维数据集指定方法，也可以为单个方法指定应用于所有多维数据集的方法。如果列出的多维数据集多于方法，则最后一种方法适用于其他多维数据集。</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">C</code> ：完全刷新在加载前清除所有尺寸值。（默认）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">F</code> ：快速刷新多维数据集物化视图，该视图仅执行源表中已更改行的增量刷新和重新聚合。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">?</code> ：如果可能，快速刷新，否则完全刷新。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">P</code> ：重新计算多维数据集物化视图中受详细信息表中已更改分区影响的行。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">S</code> ：快速求解压缩立方体。快速解决方案会重新加载所有详细信息数据，并仅重新聚合更改的值。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>有关其他详细信息，请参阅<code class="codeph">BUILD</code>过程的<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CACEIEFG">使用说明</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7174" headers="d202489e7105 ">
                                       <p><code class="codeph">refresh_after_errors</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7174 d202489e7108 ">
                                       <p><code class="codeph">TRUE</code>仅回滚具有错误的多维数据集或维度，然后继续构建其他对象。
                                       </p>
                                       <p><code class="codeph">FALSE</code>回滚构建中的所有对象。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7188" headers="d202489e7105 ">
                                       <p><code class="codeph">排比</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7188 d202489e7108 ">
                                       <p>要分配给此作业的并行进程数。</p>
                                       <p>有关其他详细信息，请参阅<code class="codeph">BUILD</code>过程的<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CACEIEFG">使用说明</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7205" headers="d202489e7105 ">
                                       <p><code class="codeph">atomic_refresh</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7205 d202489e7108 ">
                                       <p><code class="codeph">TRUE</code>阻止用户在构建期间访问中间结果。它在构建开始时冻结分析工作区的当前状态，以便为当前会话提供一致的数据。此选项可在构建结束时解析分析工作区，以便为新会话提供对刷新数据的访问权限。如果在构建期间发生错误，则所有对象都将回滚到冻结状态。
                                       </p>
                                       <p><code class="codeph">FALSE</code>使用户能够在构建期间访问中间结果。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7219" headers="d202489e7105 ">
                                       <p><code class="codeph">scheduler_job</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7219 d202489e7108 ">
                                       <p>作业的任何文本标识符，将显示在日志表中。该字符串不必是唯一的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7227" headers="d202489e7105 ">
                                       <p><code class="codeph">sam_parameters</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7227 d202489e7108 ">
                                       <p>没有。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7235" headers="d202489e7105 ">
                                       <p><code class="codeph">嵌套</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7235 d202489e7108 ">
                                       <p><code class="codeph">TRUE</code>对指定的多维数据集实例化视图集执行嵌套刷新操作。嵌套刷新操作基于依赖关系顺序刷新所有依赖实体化视图和指定的实例化视图集，以确保嵌套实体化视图相对于基础基表真正新鲜。
                                       </p>
                                       <p>所有对象必须位于单个分析工作区中。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-861E4292-7C61-4D22-860D-18D894E882CA__GUID-4FB3AFB4-094F-4A4E-9986-ABC223CE9612">使用说明</p>
                        <p><code class="codeph">REFRESH_MVIEW</code>将<span class="italic"><code class="codeph">mvname</code></span>更改为多维数据集的名称，然后将多维数据集名称和所有参数传递给<code class="codeph">BUILD</code>过程。因此，您可以使用<code class="codeph">BUILD</code>过程刷新多维数据集物化视图。有关参数的其他信息，请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104" title="此过程将数据加载到一个或多个多维数据集和维度中，并在多维数据集中生成聚合值。结果将自动提交到数据库。">BUILD过程</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-861E4292-7C61-4D22-860D-18D894E882CA__GUID-A8632C6B-EA3C-4326-BA53-7BD6A49E8010">例子</p>
                        <p>以下示例使用默认设置刷新名为<code class="codeph">CB$FWEEK_PSCAT_SALES</code>的多维数据集物化视图。</p><pre class="oac_no_warn" dir="ltr">SET serverout ON格式包装EXECUTE dbms_cube.refresh_mview（'SH'，'CB $ FWEEK_PSCAT_SALES'）;</pre><p>下一个示例将刷新方法更改为尽可能使用快速刷新，在错误后继续刷新，并使用两个并行进程。</p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.refresh_mview（'SH'，'CB $ FWEEK_PSCAT_SALES'，'？'，TRUE，2）;</pre><p>成功刷新多维数据集物化视图后， <code class="codeph">REFRESH_MVIEW</code>将返回如下消息：</p><pre class="oac_no_warn" dir="ltr">完成了立方体mview“SH”的刷新。“CB $ FWEEK_PSCAT_SALES”，电话：20130212 15：04：46.370。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73613"></a><a id="ARPLS73614"></a><a id="ARPLS73614"></a><a id="ARPLS73613"></a><div class="props_rev_3"><a id="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780" name="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780"></a><h4 id="ARPLS-GUID-50D050C8-155D-4C7B-849E-5D7AA1216780" class="sect4"><span class="enumeration_section">41.4.12</span> UPGRADE_AW程序</h4>
                  <div>
                     <p>此过程从OLAP 10 <span class="italic">g</span>分析工作区中包含的元数据副本创建Oracle OLAP 12 <span class="italic">c</span>分析工作区。原始OLAP 10 <span class="italic">g</span>分析工作区不受影响，可以与OLAP 12 <span class="italic">c</span>分析工作区同时存在于同一模式中。
                     </p>
                     <div class="section">
                        <p>如果<code class="codeph">CUBE_UPGRADE_INFO</code>表不存在， <code class="codeph">UPGRADE_AW</code>自动运行<code class="codeph">INITIALIZE_CUBE_UPGRADE</code> 。如果确实存在，则<code class="codeph">UPGRADE_AW</code>不会覆盖它，从而保留对表所做的任何更改。
                        </p>
                        <p>请参阅<span class="q">“ <a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="通过将OLAP 10g对象另存为XML模板并将XML导入到其他模式，可以将OLAP 10g分析工作区升级到OLAP 12c。升级过程可以保持原始分析工作区的可访问性和未更改状态。">DBMS_CUBE  - 升级10g分析工作区</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780__GUID-7DB357F5-D00D-4036-8253-3806CAED8372">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.UPGRADE_AW（sourceaw IN VARCHAR2，destaw IN VARCHAR2，upgoptions IN CLOB DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780__GUID-B1F5187C-299E-4792-8A00-FA6FFF663790">参数</p>
                        <div class="tblformal" id="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780__GUID-DFF89229-573C-4D14-8FEF-C1A18998A48A">
                           <p class="titleintable">表41-14 UPGRADE_AW过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UPGRADE_AW过程参数" width="100%" border="1" summary="DBMS_CUBE.UPGRADE_AW parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e7447">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e7450">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7455" headers="d202489e7447 ">
                                       <p><code class="codeph">sourceaw</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7455 d202489e7450 ">
                                       <p>10 <span class="italic">g</span>分析工作区的名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7466" headers="d202489e7447 ">
                                       <p><code class="codeph">destaw</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7466 d202489e7450 ">
                                       <p>生成的12 <span class="italic">c</span>分析工作区的新名称。它不能与<span class="italic"><code class="codeph">sourceaw</code></span>相同。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7481" headers="d202489e7447 ">
                                       <p><code class="codeph">upgoptions</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7481 d202489e7450 ">
                                       <p>一个或多个这些升级选项，作为“ <span class="italic">OPTION</span> = <span class="italic">VALUE</span> ”形式的字符串。用逗号分隔多个选项。
                                       </p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">PRESERVE_TABLE_OWNERS</code> ：</p>
                                             <p><code class="codeph">YES</code>保留原始源表映射。在与10 <span class="italic">g</span>分析工作区不同的架构中创建OLAP 12 <span class="italic">c</span>分析工作区时，请使用此选项，并且希望新对象映射到原始架构中的表。（默认）</p>
                                             <p><code class="codeph">NO</code>从源表映射中删除架构所有者。在与10 <span class="italic">g</span>分析工作区不同的架构中创建OLAP 12 <span class="italic">c</span>分析工作区时，请使用此选项，并且希望新对象映射到目标架构中的表。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RENAME_TABLE</code> ：表的名称，用于指定以OLAP 12 <span class="italic">c</span>格式创建的对象的新名称。这些更改是<code class="codeph">INITIALIZE_CUBE_UPGRADE</code>过程指定的更改。有关创建重命名表的信息，请参见<span class="q">“ <a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="此过程创建一个输入XML文档，该文档描述IMPORT_XML过程的处理选项。">CREATE_IMPORT_OPTIONS过程</a> ”</span> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TARGET_VERSION</code> ：升级版本，由2到5部分编号指定，例如11.2或11.2.0.2.0。如果输入不受支持的版本号，则使用其下方最接近的版本。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780__GUID-E8F29F9F-A2B9-4F40-873F-8B2E1F1927B0">例子</p>
                        <p>此示例使用名为<code class="codeph">GLOBAL12</code>的重命名表将名为<code class="codeph">MY_OBJECT_MAP</code>的OLAP 10 <span class="italic">g</span>分析工作区<code class="codeph">GLOBAL10</code>到名为<code class="codeph">GLOBAL10</code>的OLAP 12 <span class="italic">c</span>分析工作区：</p><pre class="oac_no_warn" dir="ltr">BEGIN  - 升级分析工作区dbms_cube.upgrade_aw（sourceaw =&gt;'GLOBAL10'，destaw =&gt;'GLOBAL12'，upgoptions =&gt;'RENAME_TABLE = MY_OBJECT_MAP'）; - 加载并聚合数据dbms_cube.build（script =&gt;'UNITS_CUBE，PRICE_AND_COST_CUBE'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65762"></a><a id="ARPLS65763"></a><a id="ARPLS65763"></a><a id="ARPLS65762"></a><div class="props_rev_3"><a id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74" name="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74"></a><h4 id="ARPLS-GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74" class="sect4"><span class="enumeration_section">41.4.13</span> VALIDATE_XML过程</h4>
                  <div>
                     <p>此过程检查XML以确保它在没有将结果提交到数据库的情况下有效。它不会创建分析工作区。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74__GUID-7DE7D6F3-BF22-4D08-8218-717ED4EAC27C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.VALIDATE_XML（dirname IN VARCHAR2，filename IN VARCHAR2）; DBMS_CUBE.VALIDATE_XML（in_xml IN CLOB）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74__GUID-9F50D738-DF71-469F-A099-A895F8A58397">参数</p>
                        <div class="tblformal" id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74__GUID-82A97B50-9918-4378-8849-89224196E6FC">
                           <p class="titleintable">表41-15 VALIDATE_XML过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="VALIDATE_XML过程参数" width="100%" border="1" summary="DBMS_CUBE.VALIDATE_XML parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e7680">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e7683">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7688" headers="d202489e7680 ">
                                       <p><code class="codeph">目录名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7688 d202489e7683 ">
                                       <p>数据库目录的区分大小写的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7696" headers="d202489e7680 ">
                                       <p><code class="codeph">文件名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7696 d202489e7683 ">
                                       <p>包含XML模板的文件的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7704" headers="d202489e7680 ">
                                       <p><code class="codeph">IN_XML</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7704 d202489e7683 ">
                                       <p>包含XML模板的CLOB的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74__GUID-E6E89F7E-1107-46DA-8696-B5FD435B4738">使用说明</p>
                        <p>您应该始终将模板加载到与用于生成模板的版本和版本相同的Oracle数据库版本中。如果XML是由不同版本的软件生成的，则XML可能无效。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74__GUID-D81AC0B5-B106-4431-9E7B-BB1A659EB0AE">例</p>
                        <p>此示例报告架构中的问题：</p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.validate_xml（'UPGRADE_DIR'，'MYGLOBAL.XML'）; BEGIN dbms_cube.validate_xml（'UPGRADE_DIR'，'MYGLOBAL.XML'）;结束; *第1行的错误：ORA-37162：OLAP错误'GLOBAL.PRICE_CUBE。$ AW_ORGANIZATION'：XOQ-01950：多维数据集“GLOBAL.PRICE_CUBE”的AWCubeOrganization包含多个具有相同名称的BuildSpecifications。'GLOBAL.UNITS_CUBE。$ AW_ORGANIZATION'：XOQ-01950：多维数据集“GLOBAL.UNITS_CUBE”的AWCubeOrganization包含多个具有相同名称的BuildSpecifications。XOQ-01400：无效的元数据对象ORA-06512：在“SYS.DBMS_CUBE”，第411行ORA-06512：在“SYS.DBMS_CUBE”，第441行ORA-06512：在“SYS.DBMS_CUBE”，第501行ORA-06512：在“SYS.DBMS_CUBE”，第520行ORA-06512：在第1行</pre><p>问题得到纠正后，程序报告没有错误：</p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.validate_xml（'UPGRADE_DIR'，'MYGLOBAL.XML'）; PL / SQL过程成功完成。</pre><p>此示例将XML模板加载到临时CLOB中，然后验证它。该脚本名为<code class="codeph">GLOBAL.XML</code> ，它位于名为<code class="codeph">XML_DIR</code>的数据库目录中。</p><pre class="oac_no_warn" dir="ltr">DEFINE xml_file ='GLOBAL.XML'; SET ECHO ON; SET SERVEROUT ON; DECLARE xml_file BFILE：= bfilename（'XML_DIR'，'＆xml_file'）; in_xml CLOB; out_xml CLOB：= NULL; dest_offset INTEGER：= 1; src_offset INTEGER：= 1; lang_context INTEGER：= 0;警告INTEGER; BEGIN  - 从文件DBMS_LOB.CREATETEMPORARY（in_xml，TRUE）设置clob; DBMS_LOB.OPEN（in_xml，DBMS_LOB.LOB_READWRITE）; DBMS_LOB.OPEN（xml_file，DBMS_LOB.FILE_READONLY）; DBMS_LOB.LOADCLOBFROMFILE（in_xml，xml_file，DBMS_LOB.LOBMAXSIZE，dest_offset，src_offset，0，lang_context，warning）; - 验证xml DBMS_CUBE.VALIDATE_XML（in_xml）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
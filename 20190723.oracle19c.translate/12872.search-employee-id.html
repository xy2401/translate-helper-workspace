<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>按员工ID搜索</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="2 Day + Java Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="2 Day + Java Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="2-day-java-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T07:23:23-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96442-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="create-css-file.html" title="Previous" type="text/html"></link>
      <link rel="next" href="update-employee-record.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="2 Day + Java Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="TDPJD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="create-css-file.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="update-employee-record.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2天+ Java开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">按员工ID搜索</li>
            </ol>
            <a id="GUID-E732C6D3-DF21-49B8-8058-69BD0950EA2A" name="GUID-E732C6D3-DF21-49B8-8058-69BD0950EA2A"></a>
            
            <h2 id="TDPJD-GUID-E732C6D3-DF21-49B8-8058-69BD0950EA2A" class="sect2"><span class="enumeration_chapter">6</span>按员工ID搜索</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-E732C6D3-DF21-49B8-8058-69BD0950EA2A__GUID-3C71F86E-0E3D-444B-90CC-8C2AFAD2D5DF"></p>
                  <p>“按员工ID搜索”是我们可以根据其作为主键的员工ID搜索特定员工的功能。用户需要输入员工ID并提交请求。</p>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-CAA720B4-F22A-4F3F-A6A1-ACF41CCC0CDB" name="GUID-CAA720B4-F22A-4F3F-A6A1-ACF41CCC0CDB"></a><h3 id="TDPJD-GUID-CAA720B4-F22A-4F3F-A6A1-ACF41CCC0CDB" class="sect3">员工Java Bean</h3>
               <div>
                  <p><span class="bold">类名：</span> <code class="codeph">src/main/java/com/oracle/jdbc/samples/bean/EmployeeBean.java</code></p>
                  <p>Github位置：EmployeeBean.java</p>
                  <p>描述：用于按ID搜索员工的新方法getEmployee（int）。</p>
                  <p>要执行的步骤：</p>
                  <p><span class="bold">第1步：</span>声明方法<code class="codeph">getEmployee(int)</code></p>
                  <p>第1步：声明<code class="codeph">getEmployee(int)</code>方法的说明：</p>
                  <p>1。已在第1天为“ListAll”功能创建了EmployeeBean文件。我们可以使用相同的类，并为每个功能添加新方法。</p>
                  <p>2。在新行上，声明一个以EmployeeId作为参数的方法getEmployee（int）。</p>
                  <p><code class="codeph">public List&lt;Employee&gt;</code> <code class="codeph">getEmployee(int empId)</code> ;</p>
                  <p>在<code class="codeph">EmployeeBeanImpl.java</code>实现一个新方法<code class="codeph">getEmployee(int)</code> 。
                  </p>
                  <p><span class="bold">Github位置</span> ： <a href="https://github.com/oracle/oracle-db-examples/blob/master/java/HRWebApp/src/main/java/com/oracle/jdbc/samples/bean/JdbcBeanImpl.java" target="_blank">EmployeeBeanImpl.java</a></p>
                  <p>描述：实现一个新方法getEmployee（int）以按ID搜索employee。此方法将employee id作为输入参数，并返回Employee类型的对象。</p>
                  <p><span class="bold">要执行的步骤：</span></p>
                  <p><span class="bold">第2步：</span>实现一个新方法<code class="codeph">getEmployee(int)</code> ：</p>
                  <p><span class="bold">第2步：创建<code class="codeph">getEmployee(int)</code>方法的说明：</span></p>
                  <p>1。声明<span class="italic">getEmployee（int）</span>方法，该方法返回Employee类型的对象的List。
                  </p>
                  <p><code class="codeph">public List &lt;Employee&gt; getEmployee（int empId）{</code></p>
                  <p>2。为List &lt;Employee&gt;类型的返回值声明一个变量</p>
                  <p><code class="codeph">List &lt;Employee&gt; returnValue = new ArrayList &lt;&gt;（）;</code></p>
                  <p>3。第一个try块用于通过调用getConnection（）方法获取数据库连接。声明变量连接以建立数据库连接。</p>
                  <p><code class="codeph">try（Connection connection = getConnection（））{</code></p>
                  <p>4。启动另一个try块以创建PreparedStatement。PreparedStatement包括根据员工ID选择员工需要执行的查询。</p>
                  <div class="p"><pre class="pre codeblock"><code>try（PreparedStatement preparedStatement = connection.prepareStatement（“SELECT Employee_Id，First_Name，Last_Name，Email，Phone_Number，Job_Id，Salary FROM EMPLOYEES WHERE Employee_Id =？“））{</code></pre>5。设置输入参数，该参数是查询的员工ID。</div>
                  <p><code class="codeph">preparedStatement.setInt（1，empId）;</code></p>
                  <p>6。为ResultSet启动另一个try块。</p>
                  <p><code class="codeph">try（ResultSet resultSet = preparedStatement.executeQuery（））{</code></p>
                  <p>7。检查是否有任何退回。如果是，则将其添加到returnValue;否则，抛出异常。</p>
                  <div class="p"><pre class="pre codeblock"><code>if（resultSet.next（））{returnValue.add（new Employee（resultSet））; } else {throw new SQLException（“找不到recrods”）; }</code></pre>8。确保关闭所有try块的括号。共有3个试块需要关闭。</div>
                  <p>9。捕获SQLException并在logger中记录消息，如下所示。</p>
                  <div class="p"><pre class="pre codeblock"><code>catch（SQLException ex）{logger.log（Level。SEVERE，null，ex）;抛出前}</code></pre>10。从方法getEmployee（int）返回Employees列表</div>
                  <p><code class="codeph">return returnValue;</code></p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-AB8BA205-18D0-4A38-A1FE-86F069276779" name="GUID-AB8BA205-18D0-4A38-A1FE-86F069276779"></a><h3 id="TDPJD-GUID-AB8BA205-18D0-4A38-A1FE-86F069276779" class="sect3">将代码添加到Servlet以处理请求</h3>
               <div>
                  <p><span class="bold">类名</span> ：src / main / java / com / oracle / jdbc / samples / web / WebController.java</p>
                  <p><span class="bold">Github地点</span> ： <a href="https://github.com/oracle/oracle-db-examples/blob/master/java/HRWebApp/src/main/java/com/oracle/jdbc/samples/web/WebController.java" target="_blank">WebController.java</a></p>
                  <p><span class="bold">描述：</span>此servlet已在第1天创建。我们将按员工ID添加相关代码进行搜索。
                  </p>
                  <p>要执行的步骤：</p>
                  <p><span class="bold">步骤3：</span>添加代码以按员工ID搜索方法<code class="codeph">processRequest()</code> 。
                  </p>
                  <p><span class="bold">第3步：向<code class="codeph">processRequest()</code>添加代码的说明：</span> 
                  </p>
                  <p>1。声明varianle ID_KEY以捕获员工ID。这是一个全局变量，因此需要在方法<code class="codeph">processRequest()</code>但在<code class="codeph">WebController</code>类中声明。
                  </p>
                  <p><code class="codeph">private static final String ID_KEY =“id”;</code></p>
                  <p>2。processRequest（）方法已在“ListAll”功能中创建。现在，我们将添加代码以实现“按员工ID搜索”功能。</p>
                  <p>3。声明String类型的变量值以捕获用户的输入。</p>
                  <p><code class="codeph">String value = null;</code></p>
                  <p>4。除了为“ListAll”功能添加的内容之外，我们还将添加if条件来处理新功能。获取用户输入的员工ID并调用方法getEmployee（int）以验证员工记录是否存在。</p>
                  <div class="p"><pre class="pre codeblock"><code>if（（value = request.getParameter（ID_KEY））！= null）{int empId = Integer.valueOf（value）.intValue（）; employeeList = employeeBean.getEmployee（empId）; } else {//以前用于Listall功能的getEmployees（）方法employeeList = employeeBean.getEmployees（）; }</code></pre></div>
                  <p></p>
                  <p></p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-3CC4988A-D287-4CBC-BCA6-24B7A12B750D" name="GUID-3CC4988A-D287-4CBC-BCA6-24B7A12B750D"></a><h3 id="TDPJD-GUID-3CC4988A-D287-4CBC-BCA6-24B7A12B750D" class="sect3">按员工ID为搜索创建新的HTML</h3>
               <div>
                  <p><span class="bold">班级名称：</span></p>
                  <p><code class="codeph">的src /主/ web应用/ listById.html</code></p>
                  <p>Github地点： <a href="https://github.com/oracle/oracle-db-examples/blob/master/java/HRWebApp/src/main/webapp/listById.html" target="_blank">listById.html</a></p>
                  <p>描述：这是显示用户输入员工ID的输入框的HTML。如果找到员工记录，则员工的详细信息将显示在页面上，否则将显示错误消息。</p>
                  <p><span class="bold">要执行的步骤：</span> 
                  </p>
                  <p>第4步：为HTML页面创建标题，标题和样式表。</p>
                  <p>步骤5：创建一个函数来提交输入字段，即员工ID</p>
                  <p>步骤6：创建方法processResponse（） - 处理JSON响应并在HTML页面上显示结果。</p>
                  <p>1。为HTML页面创建标题，样式表和正文。</p>
                  <div class="p"><pre class="pre codeblock"><code>&lt;！DOCTYPE html&gt; &lt;html lang =“en”&gt; &lt;head&gt; &lt;meta charset =“UTF-8”&gt; &lt;title&gt;按ID列出员工&lt;/ title&gt; &lt;！ - 在此处指定样式表 - &gt; &lt;link rel = “stylesheet”type =“text / css”href =“css / app.css”&gt; &lt;！ - 用于UI的Bootstrap JS  - &gt; &lt;link rel =“stylesheet”href =“http：//maxcdn.bootstrapcdn。 com / bootstrap / 3.3.6 / css / bootstrap.min.css“&gt; &lt;/ head&gt;</code></pre><span class="bold">第5步：处理输入字段的说明：</span></div>
                  <p>1。启动&lt;body&gt;标记和&lt;input&gt;标记以捕获员工ID。</p>
                  <div class="p"><pre class="pre codeblock"><code>&lt;body&gt; &lt;div&gt; &lt;label&gt;员工ID：&lt;/ label&gt; &lt;input id =“empId”type =“textfield”onkeypress =“return waitForEnter（event）”\&gt; &lt;/ div&gt; &lt;br/&gt; &lt;br / &gt; &lt;script&gt; function waitForEnter（e）{if（e.keyCode == 13）{var tb = document.getElementById（“empId”）; fetchElementById（tb.value）返回false; } &lt;script&gt; var xmlhttp = new XMLHttpRequest（）; var url =“WebController”;</code></pre></div>
                  <p>3。定义发送请求时的操作，即选择每个功能的链接时。</p>
                  <div class="p"><pre class="pre codeblock"><code>xmlhttp.onreadystatechange = function（）{if（xmlhttp.readyState == 4 &amp;&amp; xmlhttp.status == 200）{processResponse（xmlhttp.responseText）; xmlhttp.open（“GET”，url，true）; xmlhttp.send（）;</code></pre><span class="bold">第6步：创建<code class="codeph">processResponse()</code>方法的说明：</span></div>
                  <p>1。创建函数<code class="codeph">processResponse()</code>以在HTML页面上显示JSON结果。
                  </p>
                  <div class="p"><pre class="pre codeblock"><code>function processResponse（response）{//将JSON respnse处理成一个数组。var arr = JSON.parse（response）; var i; var out =“&lt;table&gt;”; keys = Object.keys（arr [0]）; //打印标题+ =“&lt;tr&gt;”for（i = 0; i &lt;keys.length; ++ i）{out + =“&lt;th&gt;”+ keys [i] +“&lt;/ th&gt;”} out + =“&lt;/ tr&gt;”; //打印（j = 0; j &lt;arr.length; j ++）{out + =“&lt;tr&gt;”的值（i = 0; i &lt;keys.length; ++ i）{out + =“&lt;td &gt;“+ arr [j] [keys [i]] +”&lt;/ td&gt;“} out + =”&lt;/ tr&gt;“} out + =”&lt;/ table&gt;“; document.getElementById（“id-emp”）。innerHTML = out; }</code></pre></div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
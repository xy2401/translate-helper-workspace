<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>为列授权配置OCI和JDBC应用程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-security-administrators-and-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:21:48-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2012, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95725-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="predefined-objects-in-real-application-security.html" title="Previous" type="text/html"></link>
      <link rel="next" href="real-application-security-hr-demo-files.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBFSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="predefined-objects-in-real-application-security.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="real-application-security-hr-demo-files.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Security管理员和开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">为列授权配置OCI和JDBC应用程序</li>
            </ol>
            <a id="GUID-07681DFA-7A8E-4F3C-B655-3C202882AC03" name="GUID-07681DFA-7A8E-4F3C-B655-3C202882AC03"></a><a id="DBFSG12001"></a>
            
            <h2 id="DBFSG-GUID-07681DFA-7A8E-4F3C-B655-3C202882AC03" class="sect2"><span class="enumeration_appendix">B</span>为列授权配置OCI和JDBC应用程序</h2>
         </header>
         <div class="ind">
            <div>
               <div class="p">本附录包含：<ul style="list-style-type:disc">
                     <li>
                        <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-FFC8DE4A-D80E-4D6D-805A-802E15092642">关于使用OCI检索列授权指示器</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-14EDF7D1-3807-4935-9BED-33070F36505E">关于使用JDBC检索列授权指示器</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBFSG99644"></a><div class="props_rev_3"><a id="GUID-FFC8DE4A-D80E-4D6D-805A-802E15092642" name="GUID-FFC8DE4A-D80E-4D6D-805A-802E15092642"></a><h3 id="DBFSG-GUID-FFC8DE4A-D80E-4D6D-805A-802E15092642" class="sect3">关于使用OCI检索列授权指示器</h3>
               <div>
                  <p>Oracle调用接口（OCI）应用程序可以访问已启用数据安全策略的数据库表，然后测试列以获取授权指示符。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果确定该列对用户是未授权的，则向用户返回空列值，其中指示符“未授权”。</p>
                     </li>
                     <li>
                        <p>如果无法确定列授权，则评估的列（或列表达式）值将与指示符“unknown”一起返回给用户。如果顶部列表达式评估中涉及的任何基础表列未经授权，则授权指示符可以是“未知”，并且空值将用作表达式评估的基础列值。</p>
                     </li>
                     <li>
                        <p>如果该列被确定为对用户授权，则评估的列值和指示符将在没有授权指示符的情况下返回给用户。</p>
                     </li>
                  </ul>
                  <p>OCI返回代码用于将列授权信息传递给用户。要获取列的授权信息，必须在绑定或定义列缓冲区时提供返回代码缓冲区。将列数据返回到用户缓冲区后，您可以检查与该列关联的返回代码以获取授权信息。列授权指示符适用于定义应用程序定义的变量或输出绑定变量。如果应用程序未检索列授权指示符，则不必提供返回码缓冲区。</p>
                  <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-A09D4AD1-9CE0-4B08-8747-FAC5F6A8D326">获取退货代码的示例</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-5A1F3B8B-5690-4728-9E61-E6BFAB360E87">关于将返回代码和指示符与授权指示符一起使用</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89">关于未知授权指示器的警告</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-DDDD02FE-1773-438C-9862-67F247CA8123">使用OCI描述列安全性</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG99646"></a><a id="DBFSG99645"></a><div class="props_rev_3"><a id="GUID-A09D4AD1-9CE0-4B08-8747-FAC5F6A8D326" name="GUID-A09D4AD1-9CE0-4B08-8747-FAC5F6A8D326"></a><h4 id="DBFSG-GUID-A09D4AD1-9CE0-4B08-8747-FAC5F6A8D326" class="sect4">获取退货代码的示例</h4>
                  <div>
                     <div class="section">
                        <p>该<a id="d131202e392" class="indexterm-anchor"></a>以下返回代码用于查找列授权：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>ORA-24530：专栏<a id="d131202e402" class="indexterm-anchor"></a><a id="d131202e408" class="indexterm-anchor"></a>值对用户是未授权的</p>
                           </li>
                           <li>
                              <p>ORA-24531：专栏<a id="d131202e418" class="indexterm-anchor"></a><a id="d131202e424" class="indexterm-anchor"></a>价值授权未知</p>
                           </li>
                           <li>
                              <p>ORA-24536：专栏<a id="d131202e434" class="indexterm-anchor"></a><a id="d131202e440" class="indexterm-anchor"></a>授权未知</p>
                           </li>
                        </ul>
                        <p>如果为任何列返回未知值授权指示符（ORA-24531），则OCI函数状态将为<code class="codeph">OCI_SUCCESS_WITHINFO</code> ，并且错误句柄中将返回错误ORA-24536作为警告。要取消警告，应用程序可以在获取之前在语句句柄中将属性<code class="codeph">OCI_ATTR_NO_COLUMN_AUTH_WARNING</code>设置为<code class="codeph">TRUE</code> ：</p><pre class="oac_no_warn" dir="ltr">no_warning = TRUE; OCIAttrSet（stmthp，OCI_HTYPE_STMT，（void *）＆no_warning，0，OCI_ATTR_NO_COLUMN_AUTH_WARNING，errhp）;</pre><p><code class="codeph">OCI_ATTR_NO_COLUMN_AUTH_WARNING</code>的默认布尔值为<code class="codeph">FALSE</code> 。</p>
                        <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-A09D4AD1-9CE0-4B08-8747-FAC5F6A8D326__BHCIIAIA">示例B-1</a>显示了检索返回码的OCI代码。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A09D4AD1-9CE0-4B08-8747-FAC5F6A8D326__BHCIIAIA">
                        <p class="titleinexample">示例B-1从OCI检索返回代码以进行列授权</p><pre class="oac_no_warn" dir="ltr">OCIDefineByPos（stmthp，＆dfnhp，errhp，1，（void *）data_bufp，（sb4）data_bufl，data_typ，（void *）＆data_ind，（ub2 *）＆data_rlen，（ub2 *）＆data_rcode，（ub4）OCI_DEFAULT）; status = OCIStmtFetch（stmthp，errhp，1，OCI_FETCH_NEXT，OCI_DEFAULT）; if（data_rcode == 24530）printf（“列值未授权，指示符=％d \ n”，data_ind）;否则if（data_rcode == 24531）printf（“列值授权未知，指示符=％d \ n”，data_ind）; else {printf（“column value authorized，indicator =％d \ n”，data_ind）; / *处理列数据* / ...};</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG99647"></a><div class="props_rev_3"><a id="GUID-5A1F3B8B-5690-4728-9E61-E6BFAB360E87" name="GUID-5A1F3B8B-5690-4728-9E61-E6BFAB360E87"></a><h4 id="DBFSG-GUID-5A1F3B8B-5690-4728-9E61-E6BFAB360E87" class="sect4">关于将返回代码和指示符与授权指示符一起使用</h4>
                  <div>
                     <p>要访问具有列安全性的表，至少应在绑定或定义列时访问返回码。如果未访问返回代码，则应用程序需要知道列值是否已通过其他方式授权，以便它可以正确解释指标和值。</p>
                     <p>您还应该提供绑定指示器或定义是否启用了列安全性。如果未提供指示符且列值未授权或未知，则Oracle数据库将返回错误ORA-1405。</p>
                     <p>如果列值授权未知，则授权指示符（对于ORA-24531）将优先于可能以其他方式返回给用户的常规返回代码。例如，当返回非空列值以及未知授权指示符时，列空值提取（ORA-1405）和列截断（ORA-1406）可能同时发生。在这种情况下，应用程序将ORA-24531作为此列的返回码，而不是获取ORA-1405或ORA-1406。因此，应用程序不应依赖列返回码ORA-1405或ORA-1406来查找空取或截取的确切列。</p>
                     <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89__CHDFCIJJ" title="显示默认授权指示符行为。该表有6列。第1列是列授权，第2列是列值，第3列是IND提供的RC，第4列是IND未提供的RC，第5列是IND prvidedRC未提供，第6列是IND未提供RC未提供。">表B-1</a>和<a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89__CHDHIFDF" title="当OCI_ATTR_NO_AUTH_WARNING参数设置为TRUE时，显示默认授权指示符行为。该表有6列。第1列是列授权，第2列是列值，第3列是IND提供的RC，第4列是IND未提供的RC，第5列是IND prvidedRC未提供，第6列是IND未提供RC未提供。">表B-2</a>总结了授权指示符，返回码，指示符和返回状态的行为。
                     </p>
                  </div>
               </div><a id="DBFSG99649"></a><a id="DBFSG99650"></a><a id="DBFSG99648"></a><div class="props_rev_3"><a id="GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89" name="GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89"></a><h4 id="DBFSG-GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89" class="sect4">关于未知授权指示器的警告</h4>
                  <div>
                     <div class="section">
                        <p>如果为任何列返回未知授权指示符（ORA-24531），则会向应用程序返回OCI警告，即OCI函数状态将为<code class="codeph">OCI_SUCCESS_WITH_INFO</code> ，而不是<code class="codeph">OCI_SUCCESS</code> 。同时，ORA-24536将在返回给应用程序的错误句柄中设置。您必须检查此警告，检查正在执行的SQL，并采取适当的操作。错误ORA-24536优先于授权列或未启用列安全性时返回的错误。
                        </p>
                        <p>如果列值未经授权或授权，则不会更改OCI功能状态代码。</p>
                        <p>默认情况下，为未知授权启用列授权警告。应用程序应设计为处理错误。如果应用程序已准备好列安全性并且想要忽略任何未知授权指示符，则可以通过在获取列值之前在OCI语句句柄中将OCI属性<code class="codeph">OCI_ATTR_NO_COLUMN_AUTH_WARNING</code>设置为<code class="codeph">TRUE</code>来关闭OCI警告。
                        </p>
                        <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89__CHDFCIJJ" title="显示默认授权指示符行为。该表有6列。第1列是列授权，第2列是列值，第3列是IND提供的RC，第4列是IND未提供的RC，第5列是IND prvidedRC未提供，第6列是IND未提供RC未提供。">表B-1</a>描述了OCI返回指示符的默认授权行为。
                        </p>
                        <div class="tblformalwide" id="GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89__CHDFCIJJ">
                           <p class="titleintable">表B-1授权指标行为（默认情况下）</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="授权指标行为（默认情况下）" width="100%" border="1" summary="Shows default authorization indicator behavior. This table has 6 columns. Column 1 is column authorization, column 2 is column value, column 3 is IND providedRC provided, column 4 is IND not providedRC provided, column 5 is IND prvidedRC not provided, and column 6 is IND not providedRC not provided." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="16%" id="d131202e759">列授权</th>
                                    <th align="left" valign="bottom" width="12%" id="d131202e762">列值</th>
                                    <th align="left" valign="bottom" width="18%" id="d131202e765">IND提供的RC</th>
                                    <th align="left" valign="bottom" width="18%" id="d131202e770">IND Not ProvidedRC提供</th>
                                    <th align="left" valign="bottom" width="18%" id="d131202e775">IND提供的RC未提供</th>
                                    <th align="left" valign="bottom" width="17%" id="d131202e780">IND Not ProvidedRC未提供</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d131202e787" headers="d131202e759 ">
                                       <p>擅自</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d131202e787 d131202e762 ">
                                       <p>任何</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e787 d131202e765 ">
                                       <p>OCI_SUCCESS</p>
                                       <p>错误= 0</p>
                                       <p>IND = -1</p>
                                       <p>RC = 24530</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e787 d131202e770 ">
                                       <p>OCI_SUCCESS</p>
                                       <p>错误= 1405</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = 24530</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e787 d131202e775 ">
                                       <p>OCI_SUCCESS</p>
                                       <p>错误= 0</p>
                                       <p>IND = -1</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d131202e787 d131202e780 ">
                                       <p>OCI_SUCCESS</p>
                                       <p>错误= 1405</p>
                                       <p>IND = -N / A.</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d131202e830" headers="d131202e759 ">
                                       <p>未知</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d131202e830 d131202e762 ">
                                       <p>空值</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e830 d131202e765 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（0）</p>
                                       <p>IND = -1</p>
                                       <p>RC = 24531（0）</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e830 d131202e770 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（1405）</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = 24531（1405）</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e830 d131202e775 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（0）</p>
                                       <p>IND = -1</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d131202e830 d131202e780 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（1405）</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d131202e873" headers="d131202e759 ">
                                       <p>未知</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d131202e873 d131202e762 ">
                                       <p>不是空而不是截断</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e873 d131202e765 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（0）</p>
                                       <p>IND = 0</p>
                                       <p>RC = 24531（0）</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e873 d131202e770 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（0）</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = 24531（0）</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e873 d131202e775 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（0）</p>
                                       <p>IND = 0</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d131202e873 d131202e780 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（0）</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d131202e916" headers="d131202e759 ">
                                       <p>未知</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d131202e916 d131202e762 ">
                                       <p>不是空的和截断的</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e916 d131202e765 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（24345）</p>
                                       <p>IND = data_len</p>
                                       <p>RC = 24531（1406）</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e916 d131202e770 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（24345）</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = 24531（1406）</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d131202e916 d131202e775 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（1406）</p>
                                       <p>IND = data_len</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d131202e916 d131202e780 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24536（1406）</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89__GUID-C32EB7BD-A9C0-4757-99F2-E6C0AA7EE50E">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../lnoci/oci-programming-basics.html#LNOCI020" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a>表2-4显示了没有列安全性的默认提取行为</p>
                        </div>
                        <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89__CHDHIFDF" title="当OCI_ATTR_NO_AUTH_WARNING参数设置为TRUE时，显示默认授权指示符行为。该表有6列。第1列是列授权，第2列是列值，第3列是IND提供的RC，第4列是IND未提供的RC，第5列是IND prvidedRC未提供，第6列是IND未提供RC未提供。">表B-2</a>描述了<code class="codeph">OCI_ATTR_NO_AUTH_WARNING</code>参数设置为<code class="codeph">TRUE</code>时的默认行为。</p>
                        <div class="tblformalwide" id="GUID-DAA3C287-C25F-4B0E-8E15-91A28ABE4F89__CHDHIFDF">
                           <p class="titleintable">表B-2授权指示符行为（默认情况下） -  OCI_ATTR_NO_AUTH_WARNING = TRUE</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="授权指示符行为（默认情况下） -  OCI_ATTR_NO_AUTH_WARNING = TRUE" width="100%" border="1" summary="Shows default authorization indicator behavior when the OCI_ATTR_NO_AUTH_WARNING parameter is set to TRUE. This table has 6 columns. Column 1 is column authorization, column 2 is column value, column 3 is IND providedRC provided, column 4 is IND not providedRC provided, column 5 is IND prvidedRC not provided, and column 6 is IND not providedRC not provided." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="18%" id="d131202e991">列授权</th>
                                    <th align="left" valign="bottom" width="16%" id="d131202e996">列值</th>
                                    <th align="left" valign="bottom" width="19%" id="d131202e1001">IND提供的RC</th>
                                    <th align="left" valign="bottom" width="20%" id="d131202e1006">IND Not ProvidedRC提供</th>
                                    <th align="left" valign="bottom" width="13%" id="d131202e1011">IND提供的RC未提供</th>
                                    <th align="left" valign="bottom" width="15%" id="d131202e1016">IND Not ProvidedRC未提供</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d131202e1023" headers="d131202e991 ">
                                       <p>未知</p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d131202e1023 d131202e996 ">
                                       <p>空值</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d131202e1023 d131202e1001 ">
                                       <p>错误= 0</p>
                                       <p>IND = -1</p>
                                       <p>RC = 24531（0）</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d131202e1023 d131202e1006 ">
                                       <p>错误= 1405</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = 24531（1405）</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d131202e1023 d131202e1011 ">
                                       <p>错误= 0</p>
                                       <p>IND = -1</p>
                                       <p>RC = N / A）</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d131202e1023 d131202e1016 ">
                                       <p>错误= 1405</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d131202e1058" headers="d131202e991 ">
                                       <p>未知</p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d131202e1058 d131202e996 ">
                                       <p>不是空而不是截断</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d131202e1058 d131202e1001 ">
                                       <p>错误= 0</p>
                                       <p>IND = 0</p>
                                       <p>RC = 24531（0）</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d131202e1058 d131202e1006 ">
                                       <p>错误= 0</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = 24531（0）</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d131202e1058 d131202e1011 ">
                                       <p>错误= 0</p>
                                       <p>IND = 0</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d131202e1058 d131202e1016 ">
                                       <p>错误= 0</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d131202e1093" headers="d131202e991 ">
                                       <p>未知</p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d131202e1093 d131202e996 ">
                                       <p>不是空的和截断的</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d131202e1093 d131202e1001 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24345</p>
                                       <p>IND = data_len</p>
                                       <p>RC = 24531（1406）</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d131202e1093 d131202e1006 ">
                                       <p>SUCCESS_WITH_INFO</p>
                                       <p>错误= 24345</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = 24531（1406）</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d131202e1093 d131202e1011 ">
                                       <p>错误= 1406</p>
                                       <p>IND = data_len</p>
                                       <p>RC = N / A）</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d131202e1093 d131202e1016 ">
                                       <p>错误= 1406</p>
                                       <p>IND = N / A.</p>
                                       <p>RC = N / A.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99652"></a><a id="DBFSG99651"></a><div class="props_rev_3"><a id="GUID-DDDD02FE-1773-438C-9862-67F247CA8123" name="GUID-DDDD02FE-1773-438C-9862-67F247CA8123"></a><h4 id="DBFSG-GUID-DDDD02FE-1773-438C-9862-67F247CA8123" class="sect4">使用OCI描述列安全性</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">OCIDescribeAny()</code>函数支持显式描述模式对象。在获取数据之前，应用程序有时需要知道列是否受列约束保护。您可以使用此信息指导应用程序处理数据和指标。这对处理动态SQL的应用程序特别有用。 OCI参数句柄的属性<code class="codeph">OCI_ATTR_XDS_POLICY_STATUS</code> <a id="d131202e1253" class="indexterm-anchor"></a>是数据类型<code class="codeph">ub4</code>并具有以下可能的值：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OCI_XDS_POLICY_NONE</code> ：没有XDS策略<a id="d131202e1268" class="indexterm-anchor"></a>对于列或策略未启用</p>
                           </li>
                           <li>
                              <p><code class="codeph">OCI_XDS_POLICY_ENABLED</code> ：政策是<a id="d131202e1280" class="indexterm-anchor"></a>已为列启用</p>
                           </li>
                           <li>
                              <p><code class="codeph">OCI_XDS_POLICY_UNKNOWN</code> ：政策<a id="d131202e1292" class="indexterm-anchor"></a>未知</p>
                           </li>
                        </ul>
                        <p>如果列状态为<code class="codeph">OCI_XDS_POLICY_NONE</code> ，则列值将始终为“已授权”。如果列状态为<code class="codeph">OCI_XDS_POLICY_ENABLED</code> ，则列值将为“已授权”或“未授权”。如果列状态为<code class="codeph">OCI_XDS_POLICY_UNKNOWN</code> ，则列值授权将始终为“未知”。</p>
                        <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-DDDD02FE-1773-438C-9862-67F247CA8123__BHCGCGBC">示例B-2</a>显示了如何使用<code class="codeph">OCIDescribeAny()</code>函数对一组架构对象执行显式描述。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-DDDD02FE-1773-438C-9862-67F247CA8123__GUID-4462F058-E559-4499-AB71-77842BF3A94A">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../lnoci/describing-schema-metadata.html#LNOCI060" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-DDDD02FE-1773-438C-9862-67F247CA8123__BHCGCGBC">
                        <p class="titleinexample">示例B-2使用OCIDescribeAny函数启用显式描述</p><pre class="oac_no_warn" dir="ltr">void desc_explicit（）{const char * table =“col_sec_tab”; ub4 pos; ub2 numcol; OCIParam * paramh; OCIParam * collst; OCIParam * col; ub4 colnamelen，colseclen; ub1 colname [20]; ub1 * colnm; ub4 colsec; ub4 tablen = strlen（（char *）table）; checkerr（errhp，OCIDescribeAny（svchp，errhp，（dvoid *）table，tablen，OCI_OTYPE_NAME，0，OCI_PTYPE_TABLE，deschp））; checkerr（errhp，OCIAttrGet（deschp，OCI_HTYPE_DESCRIBE，＆paramh，0，OCI_ATTR_PARAM，errhp））; checkerr（errhp，OCIAttrGet（paramh，OCI_DTYPE_PARAM，＆numcol，0，OCI_ATTR_NUM_COLS，errhp））; checkerr（errhp，OCIAttrGet（paramh，OCI_DTYPE_PARAM，＆collst，0，OCI_ATTR_LIST_COLUMNS，errhp））; printf（“列数=％d \ n \ n”，numcol）; printf（“列无列名列安全性\ n”）; printf（“--------- ----------- --------------- \ n \ n”）; for（pos = 1;（ub4）pos &lt;= numcol; pos ++）{checkerr（errhp，OCIParamGet（collst，OCI_DTYPE_PARAM，errhp，（dvoid **）＆col，pos））; checkerr（errhp，OCIAttrGet（（dvoid *）col，（ub4）OCI_DTYPE_PARAM，（dvoid **）＆colnm，（ub4 *）＆colnamelen，（ub4）OCI_ATTR_NAME，errhp））; memset（colname，''，20）; strncpy（（char *）colname，（char *）colnm，colnamelen）; colname [10] ='\ 0'; checkerr（errhp，OCIAttrGet（（dvoid *）col，（ub4）OCI_DTYPE_PARAM，（dvoid **）＆colsec，（ub4 *）＆colseclen，（ub4）OCI_ATTR_XDS_POLICY_STATUS，errhp））; printf（“％d％s％s \ n”，pos，colname，（（colsec == OCI_XDS_POLICY_ENABLED）？“ENABLED”:(（colsec == OCI_XDS_POLICY_NONE）？“无”:(（colsec == OCI_XDS_POLICY_UNKNOWN）？“未知错误”））））; } return; }</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="DBFSG99653"></a><div class="props_rev_3"><a id="GUID-14EDF7D1-3807-4935-9BED-33070F36505E" name="GUID-14EDF7D1-3807-4935-9BED-33070F36505E"></a><h3 id="DBFSG-GUID-14EDF7D1-3807-4935-9BED-33070F36505E" class="sect3">关于使用JDBC检索列授权指示器</h3>
               <div>
                  <p>JDBC应用程序可以访问已启用数据安全策略的数据库表，以及用于授权指示符的测试列。您可以使用本节中描述的JDBC API来检查表列的安全属性和用户授权。</p>
                  <div class="p">本节包含：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-B0E9D4FC-3EDA-4120-B358-38439B8A72C1">关于检查表列的安全属性</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-B0FBF985-51B0-4531-931B-CA6496B547F4">关于检查表列的用户授权</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-B407C69C-807A-4AF9-9644-1B0E1F596ABB">检查安全属性和用户授权的示例</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG99654"></a><div class="props_rev_3"><a id="GUID-B0E9D4FC-3EDA-4120-B358-38439B8A72C1" name="GUID-B0E9D4FC-3EDA-4120-B358-38439B8A72C1"></a><h4 id="DBFSG-GUID-B0E9D4FC-3EDA-4120-B358-38439B8A72C1" class="sect4">关于检查表列的安全属性</h4>
                  <div>
                     <p>的<code class="codeph">getSecurityAttribute</code>方法<a id="d131202e1584" class="indexterm-anchor"></a> <code class="codeph">oracle.jdbc.OracleResultSetMetaData</code>接口使您可以检查列的数据安全策略属性。security属性具有以下定义：</p><pre class="oac_no_warn" dir="ltr">public static enum SecurityAttribute {NONE，ENABLED，UNKNOWN; }</pre><p><code class="codeph">SecurityAttribute</code>可以具有以下值：</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">NONE</code>意味着没有列<a id="d131202e1606" class="indexterm-anchor"></a>已为列启用数据安全策略。这意味着该列要么没有应用策略，要么未启用该策略。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ENABLED</code>意味着该列<a id="d131202e1618" class="indexterm-anchor"></a>已为列启用数据安全策略。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">UNKNOWN</code>意味着该专栏<a id="d131202e1630" class="indexterm-anchor"></a>该列的数据安全策略未知。例如，如果列是两列的并集，但只有一列具有数据安全属性，则可能发生这种情况。
                              </p>
                           </li>
                        </ul>
                        <p><code class="codeph">getSecurityAttribute</code>方法具有以下签名：</p><pre class="oac_no_warn" dir="ltr">public SecurityAttribute getSecurityAttribute（int indexOfColumnInResultSet）抛出SQLException;</pre><p><code class="codeph">getSecurityAttribute</code>方法返回列的<code class="codeph">SecurityAttribute</code>值。
                        </p>
                        <div class="infoboxnotealso" id="GUID-B0E9D4FC-3EDA-4120-B358-38439B8A72C1__GUID-0E0595F6-6F6C-4523-8CE7-E4BCD45DB911">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-B407C69C-807A-4AF9-9644-1B0E1F596ABB__BHCCDEEG">示例B-3</a> ，了解使用<code class="codeph">getSecurityAttribute</code>方法的示例</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99655"></a><div class="props_rev_3"><a id="GUID-B0FBF985-51B0-4531-931B-CA6496B547F4" name="GUID-B0FBF985-51B0-4531-931B-CA6496B547F4"></a><h4 id="DBFSG-GUID-B0FBF985-51B0-4531-931B-CA6496B547F4" class="sect4">关于检查表列的用户授权</h4>
                  <div>
                     <p>该<a id="d131202e1773" class="indexterm-anchor"></a> <code class="codeph">oracle.jdbc. <code class="codeph">getAuthorizationIndicator</code>方法<code class="codeph">oracle.jdbc.OracleResultSet</code>接口使您可以检查列的<code class="codeph">AuthorizationIndicator</code>属性。<code class="codeph">AuthorizationIndicator</code>属性具有以下定义：</p><pre class="oac_no_warn" dir="ltr">public static enum AuthorizationIndicator {NONE，UNAUTHORIZED，UNKNOWN; }</pre><p><code class="codeph">AuthorizationIndicator</code>可以具有以下值：</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">NONE</code>意味着访问<a id="d131202e1805" class="indexterm-anchor"></a>列数据被授权。用户可能具有显式授权，或者列可能缺少安全属性。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">UNAUTHORIZED</code>意味着<a id="d131202e1817" class="indexterm-anchor"></a>未授权访问列数据。
                              </p>
                              <p>检索列值时，将根据列的已启用列约束策略评估授权指示符。如果用户未被授权访问列值，则会将<code class="codeph">NULL</code>值与身份验证指示符<code class="codeph">AuthorizationIndicator.一起返回给应用程序<code class="codeph">AuthorizationIndicator.UNAUTHORIZED</code> 。</p>
                              <p>如果存在涉及未授权基本列的列表达式，则将评估值与<code class="codeph">AuthorizationIndicator.一起返回给应用程序<code class="codeph">AuthorizationIndicator.UNAUTHORIZED</code>指标。应用程序应在解释返回的数据之前检查授权指示符。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">UNKNOWN</code>意味着<a id="d131202e1842" class="indexterm-anchor"></a>授权指标无法确定。
                              </p>
                              <p>有时，由于功能限制或性能限制，服务器无法确定<code class="codeph">SELECT</code>项的授权指示符。例如，如果查询涉及列表达式，并且服务器无法计算顶级运算符是否应该被授权，则会发生这种情况。在这种情况下，服务器返回授权指示符<code class="codeph">AuthorizationIndicator.UNKNOWN</code>到应用程序。返回值可以是<code class="codeph">NULL</code>或非<code class="codeph">NULL</code>具体取决于列表达式如何对基础列值进行操作。
                              </p>
                              <p>如果应用程序看到<code class="codeph">UNKNOWN</code>授权指示符，则应确定是否应访问返回的值。如果查询及其列表达式旨在处理来自基础列的未授权<code class="codeph">NULL</code>值，则应用程序可以使用返回的值。否则，应用程序可能必须对返回的值采取适当的操作。
                              </p>
                           </li>
                        </ul>
                        <p><code class="codeph">getAuthorizationIndicator</code>方法具有以下形式：</p><pre class="oac_no_warn" dir="ltr">/ ** *接受列索引号作为参数并检索相应的列安全性AuthorizationIndicator值* / public AuthorizationIndicator getAuthorizationIndicator（int columnIndex）抛出SQLException; / ** *接受列名作为字符串并检索列安全性AuthorizationIndicator值* / public AuthorizationIndicator getAuthorizationIndicator（String columnName）抛出SQLException;</pre><div class="infoboxnote" id="GUID-B0FBF985-51B0-4531-931B-CA6496B547F4__GUID-2069CC0C-FB95-4EFC-88BB-61AD9B74098E">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果参数中指定的索引无效，则前面的方法抛出<code class="codeph">SQLException</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>如果列被屏蔽，则JDBC用户将其视为NULL值。不会抛出异常。</p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-B0FBF985-51B0-4531-931B-CA6496B547F4__GUID-3C2EA72B-767F-4BF6-9A52-FB7E7A7FD14F">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-B407C69C-807A-4AF9-9644-1B0E1F596ABB__BHCCDEEG">示例B-3</a> ，了解使用<code class="codeph">getAuthorizationIndicator</code>方法的示例</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99657"></a><a id="DBFSG99656"></a><div class="props_rev_2"><a id="GUID-B407C69C-807A-4AF9-9644-1B0E1F596ABB" name="GUID-B407C69C-807A-4AF9-9644-1B0E1F596ABB"></a><h4 id="DBFSG-GUID-B407C69C-807A-4AF9-9644-1B0E1F596ABB" class="sect4">检查安全属性和用户授权的示例</h4>
                  <div>
                     <div class="section">
                        <p><a href="configuring-oci-and-jdbc-applications-for-column-authorization.html#GUID-B407C69C-807A-4AF9-9644-1B0E1F596ABB__BHCCDEEG">实施例B-3</a> <a id="d131202e2014" class="indexterm-anchor"></a><a id="d131202e2020" class="indexterm-anchor"></a>说明<a id="d131202e2027" class="indexterm-anchor"></a><a id="d131202e2033" class="indexterm-anchor"></a>使用<code class="codeph">getSecurityAttribute</code>和<code class="codeph">getAuthorization</code>方法来检查安全属性和用户授权。该程序使用示例<code class="codeph">EMP</code>表来说明该过程。
                        </p>
                        <p><code class="codeph">EMP</code>表配置如下：</p>
                        <div class="tblformal" id="GUID-B407C69C-807A-4AF9-9644-1B0E1F596ABB__GUID-154CAEAF-8CED-4A1A-8825-9B1B1F86D5D3">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Shows the configuration of the EMP table columns and their security attributes." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="15%" id="d131202e2064">专栏号</th>
                                    <th align="left" valign="bottom" width="32%" id="d131202e2067">列标题</th>
                                    <th align="left" valign="bottom" width="54%" id="d131202e2070">安全属性</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d131202e2075" headers="d131202e2064 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d131202e2075 d131202e2067 ">
                                       <p><code class="codeph">EMPNO</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d131202e2075 d131202e2070 ">
                                       <p>没有安全属性</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d131202e2086" headers="d131202e2064 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d131202e2086 d131202e2067 ">
                                       <p><code class="codeph">ENAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d131202e2086 d131202e2070 ">
                                       <p>积极的安全</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d131202e2097" headers="d131202e2064 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d131202e2097 d131202e2067 ">
                                       <p><code class="codeph">工作</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d131202e2097 d131202e2070 ">
                                       <p>没有安全属性</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d131202e2108" headers="d131202e2064 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d131202e2108 d131202e2067 ">
                                       <p><code class="codeph">MGR</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d131202e2108 d131202e2070 ">
                                       <p>积极的安全</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d131202e2119" headers="d131202e2064 ">
                                       <p>五</p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d131202e2119 d131202e2067 ">
                                       <p><code class="codeph">聘用日期</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d131202e2119 d131202e2070 ">
                                       <p>未知的安全属性</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d131202e2131" headers="d131202e2064 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d131202e2131 d131202e2067 ">
                                       <p><code class="codeph">SAL</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d131202e2131 d131202e2070 ">
                                       <p>积极的安全</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d131202e2143" headers="d131202e2064 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d131202e2143 d131202e2067 ">
                                       <p><code class="codeph">COMM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d131202e2143 d131202e2070 ">
                                       <p>没有安全属性</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d131202e2154" headers="d131202e2064 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d131202e2154 d131202e2067 ">
                                       <p><code class="codeph">DEPTNO</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d131202e2154 d131202e2070 ">
                                       <p>积极的安全</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>该程序执行以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>从<code class="codeph">EMP</code>表中选择行</span></li>
                        <li class="stepexpand"><span>使用<code class="codeph">getSecurityAttribute</code>方法提取结果集中每列的安全设置。它将这些打印为列标题</span></li>
                        <li class="stepexpand"><span>使用<code class="codeph">getAuthorizationIndicator</code>方法检查返回列值的用户授权。程序打印这些值并将其格式化如下：</span><div>
                              <p>返回为<code class="codeph">NULL</code>的未授权值由四个星号字符（ <code class="codeph">****</code> ）表示。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="example" id="GUID-B407C69C-807A-4AF9-9644-1B0E1F596ABB__BHCCDEEG">
                        <p class="titleinexample">示例B-3检查安全属性和用户授权</p><pre class="oac_no_warn" dir="ltr">PreparedStatement pstmt = conn.prepareStatement（“SELECT * FROM EMP”）; ResultSet rs = pstmt.executeQuery（）; OracleResultSetMetaData metaData =（OracleResultSetMetaData）rs.getMetaData（）; int nbOfColumns = metaData.getColumnCount（）; OracleResultSetMetaData。SecurityAttribute [] columnSecurity = new OracleResultSetMetaData。SecurityAttribute [nbOfColumns]; //显示哪些列受保护：for（int i = 0; i &lt;nbOfColumns; i ++）{columnSecurity [i] = metaData.getSecurityAttribute（i + 1）;是System.out.print（columnSecurity [I]）;是System.out.print（ “\ t” 的）; System.out.println（）;的System.out.println（“------------------------------------------- - “）; while（rs.next（））{for（int colIndex = 0; colIndex &lt;nbOfColumns; colIndex ++）{OracleResultSet。AuthorizationIndicator visibility =（（OracleResultSet）rs）.getAuthorizationIndicator（colIndex + 1）; if（visibility == OracleResultSet。AuthorizationIndicator。未经授权）System.out.print（“****”）; else System.out.print（rs.getString（colIndex + 1））;是System.out.print（ “\ t” 的）; System.out.println（“”）; } rs.close（）; pstmt.close（）;</pre><p>该程序生成以下输出：</p><pre class="oac_no_warn" dir="ltr">无人无法启用无法启用无法启用------------------------------------------ ---------------------------------------- 7369 SMITH CLERK 7902 1980-12-17 * *** null 20 7499 ALLEN SALESMAN 7698 1981-02-20 **** 300 30 7521 WARD SALESMAN 7698 1981-02-22 **** 500 30 7566 JONES MANAGER 7839 1981-04-02 **** null 20 7654 MARTIN SALESMAN 7698 1981-09-28 **** 1400 30 7698 BLAKE MANAGER 7839 1981-05-01 **** null 30 7782 CLARK MANAGER 7839 1981-06-09 **** null 10 7788 SCOTT ANALYST 7566 1987 -04-19 **** null 20 7839 KING PRESIDENT null 1981-11-17 **** null 10 7844 TURNER SALESMAN 7698 1981-09-08 **** 0 30 7876 ADAMS CLERK 7788 1987-05-23 * *** null 20 7900 JAMES CLERK 7698 1981-12-03 **** null 30 7902 FORD ANALYST 7566 1981-12-03 **** null 20 7934 MILLER CLERK 7782 1982-01-23 **** null 10</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="DBMS_ADVANCED_REWRITE contains interfaces for advanced query rewrite users. Using this package, you can create, drop, and maintain functional equivalence declarations for query rewrite."></meta>
      <meta name="description" content="DBMS_ADVANCED_REWRITE contains interfaces for advanced query rewrite users. Using this package, you can create, drop, and maintain functional equivalence declarations for query rewrite."></meta>
      <title>DBMS_ADVANCED_REWRITE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="DBMS_ADVANCED_REWRITE contains interfaces for advanced query rewrite users. Using this package, you can create, drop, and maintain functional equivalence declarations for query rewrite."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_ADDM.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_ADVISOR.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_ADDM.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_ADVISOR.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_ADVANCED_REWRITE</li>
            </ol>
            <a id="GUID-77CBA65E-FEC9-4E87-8846-CA1A7D065878" name="GUID-77CBA65E-FEC9-4E87-8846-CA1A7D065878"></a><a id="ARPLS083"></a><a id="ARPLS083"></a>
            
            <h2 id="ARPLS-GUID-77CBA65E-FEC9-4E87-8846-CA1A7D065878" class="sect2"><span class="enumeration_chapter">15</span> DBMS_ADVANCED_REWRITE</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_ADVANCED_REWRITE</code>包含高级查询重写用户的接口。使用此包，您可以创建，删除和维护查询重写的功能等效声明。
               </p>
               <div class="infoboxnotealso" id="GUID-77CBA65E-FEC9-4E87-8846-CA1A7D065878__GUID-837C02F8-CAF4-45FB-B2A8-169E46FC37DE">
                  <p class="notep1">也可以看看：</p>
                  <p>有关查询重写的详细信息，请<a href="../dwhsg/advanced-query-rewrite-materialized-views.html#DWHSG-GUID-0906CA6B-7EE3-42E1-A598-C6541BCD9B36" target="_blank"><span class="italic">参见“Oracle数据库数据仓库指南”</span></a></p>
               </div>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_ADVANCED_REWRITE.html#GUID-31103C48-5C1E-4C87-A1D0-D787D3543869" title="未授予任何人访问DBMS_ADVANCED_REWRITE安全模型过程的默认权限。要访问这些过程，必须以SYSDBA身份进行连接，并明确授予对所需数据库管理员的执行权限。">DBMS_ADVANCED_REWRITE安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_ADVANCED_REWRITE.html#GUID-6848720F-88FD-489B-B646-38CCFFF63583" title="此表列出了DBMS_ADVANCED_REWRITE子程序并简要描述了它们。">DBMS_ADVANCED_REWRITE子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS65070"></a><a id="ARPLS65070"></a><div class="props_rev_3"><a id="GUID-31103C48-5C1E-4C87-A1D0-D787D3543869" name="GUID-31103C48-5C1E-4C87-A1D0-D787D3543869"></a><h3 id="ARPLS-GUID-31103C48-5C1E-4C87-A1D0-D787D3543869" class="sect3"><span class="enumeration_section">15.1</span> DBMS_ADVANCED_REWRITE安全模型</h3>
               <div>
                  <p>未授予任何人访问DBMS_ADVANCED_REWRITE安全模型过程的默认权限。要访问这些过程，必须以<code class="codeph">SYSDBA</code>身份进行连接，并明确授予对所需数据库管理员的执行权限。
                  </p>
                  <div class="section">
                     <p>您可以通过向所选数据库管理员或角色授予<code class="codeph">EXECUTE</code>特权来控制此程序包的安全性。例如，用户<code class="codeph">er</code>可以给出访问通过下面的语句，如执行用这个包<code class="codeph">SYSDBA</code> ：</p><pre class="oac_no_warn" dir="ltr">在DBMS_ADVANCED_REWRITE上执行GRANT EXECUTE;</pre><p>您可能希望在此程序包的顶部编写单独的封面包，以限制使用的警报名称。您可以直接将其授予封面包，而不是直接授予<code class="codeph">DBMS_ADVANCED_REWRITE</code>包的<code class="codeph">EXECUTE</code>特权。
                     </p>
                     <p>此外，与常规物化视图所需的权限类似，应授予用户创建等效权限的权限。例如，可以通过将以下语句作为<code class="codeph">SYSDBA</code>执行来授予用户<code class="codeph">er</code>此权限：</p><pre class="oac_no_warn" dir="ltr">授予创造物质化的观点;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS65071"></a><a id="ARPLS65072"></a><a id="ARPLS65072"></a><a id="ARPLS65071"></a><div class="props_rev_3"><a id="GUID-6848720F-88FD-489B-B646-38CCFFF63583" name="GUID-6848720F-88FD-489B-B646-38CCFFF63583"></a><h3 id="ARPLS-GUID-6848720F-88FD-489B-B646-38CCFFF63583" class="sect3"><span class="enumeration_section">15.2</span> DBMS_ADVANCED_REWRITE子程序摘要</h3>
               <div>
                  <p>此表列出了<code class="codeph">DBMS_ADVANCED_REWRITE</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-6848720F-88FD-489B-B646-38CCFFF63583__GUID-579B60AF-7F71-4539-AEEE-FD909A6E31A4">
                     <p class="titleintable">表15-1 DBMS_ADVANCED_REWRITE包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_ADVANCED_REWRITE包子程序" width="100%" border="1" summary="This table lists the DBMS_ADVANCED_REWRITE subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d62846e340">子程序</th>
                              <th align="left" valign="bottom" id="d62846e343">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d62846e348" headers="d62846e340 ">
                                 <p><a href="DBMS_ADVANCED_REWRITE.html#GUID-5B903580-AB1C-4682-991A-03BFE9A93937" title="此表按字母顺序列出所有包子程序。">ALTER_REWRITE_EQUIVALENCE过程</a></p>
                              </td>
                              <td align="left" valign="top" headers="d62846e348 d62846e343 ">
                                 <p>将重写等效声明的模式更改为您指定的模式</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d62846e360" headers="d62846e340 ">
                                 <p><a href="DBMS_ADVANCED_REWRITE.html#GUID-09DC862D-A483-4BC0-ACB7-C0BF50A38196" title="此过程允许使用子物化视图重写和刷新顶级物化视图。它由DBMS_ADVISOR.TUNE_MVIEW过程生成的脚本专用。">BUILD_SAFE_REWRITE_EQUIVALENCE过程</a></p>
                              </td>
                              <td align="left" valign="top" headers="d62846e360 d62846e343 ">
                                 <p>允许使用子物化视图重写顶级物化视图。Oracle Corporation不建议您直接使用此过程</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d62846e375" headers="d62846e340 ">
                                 <p><a href="DBMS_ADVANCED_REWRITE.html#GUID-8CB2180E-0BE1-48C8-A3A5-9D4BCA879DAE" title="只要等效声明保持启用，并且destination_stmt在性能方面更有利，此过程将创建一个声明，指示source_stmt在功能上等同于destination_stmt。">DECLARE_REWRITE_EQUIVALENCE程序</a></p>
                              </td>
                              <td align="left" valign="top" headers="d62846e375 d62846e343 ">
                                 <p>只要等效声明保持启用，并且<code class="codeph">destination_stmt</code>在性能方面更有利，创建一个声明，指示<code class="codeph">source_stmt</code>在功能上等同于<code class="codeph">destination_stmt</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d62846e405" headers="d62846e340 ">
                                 <p><a href="DBMS_ADVANCED_REWRITE.html#GUID-2F3B6578-7046-4105-81F8-21B73B4CDCF5" title="此过程将删除指定的重写等效声明。">DROP_REWRITE_EQUIVALENCE过程</a></p>
                              </td>
                              <td align="left" valign="top" headers="d62846e405 d62846e343 ">
                                 <p>删除指定的重写等价声明</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d62846e417" headers="d62846e340 ">
                                 <p><a href="DBMS_ADVANCED_REWRITE.html#GUID-B744E94A-D634-4A74-8EF5-869CE4E916AF" title="此过程验证指定的重写等效声明。">VALIDATE_REWRITE_EQUIVALENCE过程</a></p>
                              </td>
                              <td align="left" valign="top" headers="d62846e417 d62846e343 ">
                                 <p>使用与<code class="codeph">validate</code>参数描述的验证方法相同的验证方法验证指定的重写等效声明</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS65073"></a><a id="ARPLS65074"></a><a id="ARPLS65074"></a><a id="ARPLS65073"></a><div class="props_rev_3"><a id="GUID-5B903580-AB1C-4682-991A-03BFE9A93937" name="GUID-5B903580-AB1C-4682-991A-03BFE9A93937"></a><h4 id="ARPLS-GUID-5B903580-AB1C-4682-991A-03BFE9A93937" class="sect4"><span class="enumeration_section">15.2.1</span> ALTER_REWRITE_EQUIVALENCE过程</h4>
                  <div>
                     <p>此表按字母顺序列出所有包子程序。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5B903580-AB1C-4682-991A-03BFE9A93937__GUID-066E519D-E7A8-4095-B890-629153F3B399">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_ADVANCED_REWRITE.ALTER_REWRITE_EQUIVALENCE（名称VARCHAR2，rewrite_mode VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5B903580-AB1C-4682-991A-03BFE9A93937__GUID-6D48150F-E644-425F-BE84-B8E8FBDD8963">参数</p>
                        <div class="tblformal" id="GUID-5B903580-AB1C-4682-991A-03BFE9A93937__GUID-3A677697-9C83-4C02-83C6-093515B1864E">
                           <p class="titleintable">表15-2 ALTER_REWRITE_EQUIVALENCE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_REWRITE_EQUIVALENCE过程参数" width="100%" border="1" summary="This table describes the parameters for DBMS_ADVANCED_REWRITE.ALTER_REWRITE_EQUIVALENCE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d62846e541">参数</th>
                                    <th align="left" valign="bottom" id="d62846e544">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e549" headers="d62846e541 ">
                                       <p><code class="codeph">名称</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e549 d62846e544 ">
                                       <p>要更改的等效声明的名称。该名称可以是形式的<code class="codeph">owner.name</code> ，在<code class="codeph">owner</code>与架构名称的规则规范，并且<code class="codeph">name</code>与表名的规则编译。或者，可以指定符合表名规则的简单名称。在这种情况下，重写等效在当前模式中更改。调用者必须具有适当的alter materialized view特权才能在他们自己的模式之外更改等价声明。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e566" headers="d62846e541 ">
                                       <p><code class="codeph">rewrite_mode</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e566 d62846e544 ">
                                       <p>支持以下模式，按功率递增顺序：</p>
                                       <p><code class="codeph">disabled</code> ：查询重写不使用等价声明。使用此模式暂时禁用重写等效声明的使用。
                                       </p>
                                       <p><code class="codeph">text_match</code> ：查询重写仅在文本匹配模式下使用等价声明。此模式对于简单转换很有用。
                                       </p>
                                       <p><code class="codeph">general</code> ：查询重写在其所有转换模式中使用等价声明来对应传入的请求查询。但是，查询重写不会尝试重写指定的<code class="codeph">destination_query</code> 。
                                       </p>
                                       <p><code class="codeph">recursive</code> ：查询重写在其所有转换模式中使用等价声明来对应传入的请求查询。此外，查询重写进一步尝试重写指定的<code class="codeph">destination_query</code>以便在使用等价声明时进一步提高性能。
                                       </p>
                                       <p>Oracle建议您使用足以解决性能问题的功能最弱的模式。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65075"></a><a id="ARPLS65075"></a><div class="props_rev_3"><a id="GUID-09DC862D-A483-4BC0-ACB7-C0BF50A38196" name="GUID-09DC862D-A483-4BC0-ACB7-C0BF50A38196"></a><h4 id="ARPLS-GUID-09DC862D-A483-4BC0-ACB7-C0BF50A38196" class="sect4"><span class="enumeration_section">15.2.2</span> BUILD_SAFE_REWRITE_EQUIVALENCE过程</h4>
                  <div>
                     <p>此过程允许使用子物化视图重写和刷新顶级物化视图。它由<code class="codeph">DBMS_ADVISOR.TUNE_MVIEW</code>过程生成的脚本专用。
                     </p>
                     <div class="section">
                        <p>当<code class="codeph">DBMS_ADVISOR.TUNE_MVIEW</code>将<code class="codeph">DBMS_ADVISOR.TUNE_MVIEW</code>化视图分解为顶级物化视图和一个或多个子物化视图时，需要启用查询重写和快速刷新。
                        </p>
                        <p>Oracle建议您不要直接使用<code class="codeph">BUILD_SAFE_REWRITE_EQUIVALENCE</code>过程。您应该根据需要使用<code class="codeph">DBMS_ADVISOR.TUNE_MVIEW</code>或<code class="codeph">DBMS_ADVANCED_REWRITE.CREATE_REWRITE_EQUIVALENCE</code>过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65076"></a><a id="ARPLS65077"></a><a id="ARPLS65078"></a><a id="ARPLS65077"></a><a id="ARPLS65078"></a><a id="ARPLS65076"></a><div class="props_rev_3"><a id="GUID-8CB2180E-0BE1-48C8-A3A5-9D4BCA879DAE" name="GUID-8CB2180E-0BE1-48C8-A3A5-9D4BCA879DAE"></a><h4 id="ARPLS-GUID-8CB2180E-0BE1-48C8-A3A5-9D4BCA879DAE" class="sect4"><span class="enumeration_section">15.2.3</span> DECLARE_REWRITE_EQUIVALENCE过程</h4>
                  <div>
                     <p>只要等效声明保持启用，并且<code class="codeph">destination_stmt</code>在性能方面更有利，此过程将创建一个声明，指示<code class="codeph">source_stmt</code>在功能上等同于<code class="codeph">destination_stmt</code> 。
                     </p>
                     <div class="section">
                        <p>声明的范围是系统范围的。查询重写引擎使用此类声明在<code class="codeph">QUERY_REWRITE_INTEGRITY = trusted</code>和<code class="codeph">stale_tolerated</code>模式下执行重写转换。
                        </p>
                        <p>由于查询重写引擎无法强制执行源语句和目标语句之间的基础等效，因此只能在<code class="codeph">trusted</code>和<code class="codeph">stale_tolerated</code>完整性模式下重写查询。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8CB2180E-0BE1-48C8-A3A5-9D4BCA879DAE__GUID-0BAD37E2-4C57-41BF-B28C-2C70D9CD148B">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_ADVANCED_REWRITE.DECLARE_REWRITE_EQUIVALENCE（名称VARCHAR2，source_stmt VARCHAR2，destination_stmt VARCHAR2，validate BOOLEAN：= TRUE，rewrite_mode VARCHAR2：='TEXT_MATCH'）; DBMS_ADVANCED_REWRITE.DECLARE_REWRITE_EQUIVALENCE（名称VARCHAR2，source_stmt CLOB，destination_stmt CLOB，验证BOOLEAN：= TRUE，rewrite_mode VARCHAR2：='TEXT_MATCH'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8CB2180E-0BE1-48C8-A3A5-9D4BCA879DAE__GUID-8A3E02A3-DA7A-491D-B701-9BE5057D4DB9">参数</p>
                        <div class="tblformal" id="GUID-8CB2180E-0BE1-48C8-A3A5-9D4BCA879DAE__GUID-818C902D-C1AE-445A-B02C-AC92C5D60C1D">
                           <p class="titleintable">表15-3 DECLARE_REWRITE_EQUIVALENCE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DECLARE_REWRITE_EQUIVALENCE过程参数" width="100%" border="1" summary="This table describes the parameters for DBMS_ADVANCED_REWRITE.DECLARE_REWRITE_EQUIVALENCE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d62846e846">参数</th>
                                    <th align="left" valign="bottom" id="d62846e849">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e854" headers="d62846e846 ">
                                       <p><code class="codeph">名称</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e854 d62846e849 ">
                                       <p>等价声明的名称。名称可以是<code class="codeph">owner.name</code>形式，其中owner符合模式名称的规则，名称使用表名称的规则进行编译。
                                       </p>
                                       <p>或者，可以指定符合表名规则的简单名称。在这种情况下，在当前模式中创建重写等效。调用者必须具有相应的<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>权限才能更改等效声明。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e876" headers="d62846e846 ">
                                       <p><code class="codeph">source_stmt</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e876 d62846e849 ">
                                       <p><code class="codeph">VARCHAR2</code>或<code class="codeph">CLOB</code>格式的子<code class="codeph">SELECT</code>表达式。这是作为优化目标的查询语句。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e893" headers="d62846e846 ">
                                       <p><code class="codeph">destination_stmt</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e893 d62846e849 ">
                                       <p><code class="codeph">VARCHAR2</code>或<code class="codeph">CLOB</code>格式的子<code class="codeph">SELECT</code>表达式。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e910" headers="d62846e846 ">
                                       <p><code class="codeph">验证</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e910 d62846e849 ">
                                       <p>一个布尔值，指示是否验证指定的<code class="codeph">source_stmt</code>在功能上等于指定的<code class="codeph">destination_stmt</code> 。如果<code class="codeph">validate</code>被指定为<code class="codeph">TRUE</code> ，则<code class="codeph">DECLARE_REWRITE_EQUIVALENCE</code>评估两个子<code class="codeph">SELECT</code>并比较它们的结果。如果结果不相同，则<code class="codeph">DECLARE_REWRITE_EQUIVALENCE</code>不会创建重写等效项并返回错误条件。如果为<code class="codeph">FALSE</code> ，则<code class="codeph">DECLARE_REWRITE_EQUIVALENCE</code>不验证等效性。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e946" headers="d62846e846 ">
                                       <p><code class="codeph">rewrite_mode</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e946 d62846e849 ">
                                       <p>支持以下模式，按功率递增顺序：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">disabled</code> ：查询重写不使用等价声明。使用此模式暂时禁用重写等效声明的使用。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">text_match</code> ：查询重写仅在文本匹配模式下使用等价声明。此模式对于简单转换很有用。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">general</code> ：查询重写在其所有转换模式中使用等价声明来对应传入的请求查询。但是，查询重写不会尝试重写指定的<code class="codeph">destination_query</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">recursive</code> ：查询重写在其所有转换模式中使用等价声明来对应传入的请求查询。此外，查询重写进一步尝试重写指定的<code class="codeph">destination_query</code>以便在使用等价声明时进一步提高性能。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>Oracle建议您使用足以解决性能问题的功能最弱的模式。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8CB2180E-0BE1-48C8-A3A5-9D4BCA879DAE__GUID-1D335F36-148A-4E03-A50B-C907A0D19440">例外</p>
                        <div class="tblformal" id="GUID-8CB2180E-0BE1-48C8-A3A5-9D4BCA879DAE__GUID-2CD4CD2F-7C24-43DB-8AE0-CBC027C88C8C">
                           <p class="titleintable">表15-4 DECLARE_REWRITE_EQUIVALENCE过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DECLARE_REWRITE_EQUIVALENCE过程异常" width="100%" border="1" summary="This table defines the exceptions raised by the DBMS_ADVANCED_REWRITE.DECLARE_REWRITE_EQUIVALENCE subprogram" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d62846e995">例外</th>
                                    <th align="left" valign="bottom" id="d62846e998">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e1003" headers="d62846e995 ">
                                       <p><code class="codeph">ORA-30388</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e1003 d62846e998 ">
                                       <p>未指定重写等效的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e1011" headers="d62846e995 ">
                                       <p><code class="codeph">ORA-30391</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e1011 d62846e998 ">
                                       <p>指定的重写等效不存在</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e1019" headers="d62846e995 ">
                                       <p><code class="codeph">ORA-30392</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e1019 d62846e998 ">
                                       <p>重写等效的校验和分析失败</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e1027" headers="d62846e995 ">
                                       <p><code class="codeph">ORA-30393</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e1027 d62846e998 ">
                                       <p>语句中的查询块没有写入</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e1035" headers="d62846e995 ">
                                       <p><code class="codeph">ORA-30396</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e1035 d62846e998 ">
                                       <p>重写等价过程需要将<code class="codeph">COMPATIBLE</code>参数设置为10.1或更高</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8CB2180E-0BE1-48C8-A3A5-9D4BCA879DAE__GUID-D96F89BC-4DCD-4CEB-AAAD-8B2FC2184C93">使用说明</p>
                        <p>使用等价声明的查询重写同时发生，并与使用物化视图的查询重写一致。两者都使用相同的查询重写引擎。查询重写引擎使用相同的重写规则来使用等价声明和物化视图重写查询。由于重写等效表示由复杂用户精心设计的特定重写，因此当可以使用实例化视图或重写等效执行重写时，查询重写引擎优先重写在实例化视图上的等效性。出于同样的原因，基于成本的优化器（具体地说，基于成本的重写）将不会选择一个未经重写的查询计划而不是重写以使用重写等效的查询计划，即使未重写计划的成本看起来更有利。查询重写分别根据等价声明的<code class="codeph">source_stmt</code>或物化视图的定义语句匹配传入请求查询的属性，并分别根据等价声明的<code class="codeph">destination_stmt</code>或物化视图的容器表派生等效的关系表达式。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65079"></a><a id="ARPLS65080"></a><a id="ARPLS65080"></a><a id="ARPLS65079"></a><div class="props_rev_3"><a id="GUID-2F3B6578-7046-4105-81F8-21B73B4CDCF5" name="GUID-2F3B6578-7046-4105-81F8-21B73B4CDCF5"></a><h4 id="ARPLS-GUID-2F3B6578-7046-4105-81F8-21B73B4CDCF5" class="sect4"><span class="enumeration_section">15.2.4</span> DROP_REWRITE_EQUIVALENCE过程</h4>
                  <div>
                     <p>此过程将删除指定的重写等效声明。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2F3B6578-7046-4105-81F8-21B73B4CDCF5__GUID-42C8DA75-ACC4-4155-B052-50282221D769">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_ADVANCED_REWRITE.DROP_REWRITE_EQUIVALENCE（名称VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2F3B6578-7046-4105-81F8-21B73B4CDCF5__GUID-236DB3E2-8875-4935-B007-EAD5DBB9899E">参数</p>
                        <div class="tblformal" id="GUID-2F3B6578-7046-4105-81F8-21B73B4CDCF5__GUID-E069F516-83A9-4A0B-BA90-84972965C051">
                           <p class="titleintable">表15-5 DROP_REWRITE_EQUIVALENCE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_REWRITE_EQUIVALENCE过程参数" width="100%" border="1" summary="This table describes the parameter of the DBMS_ADVANCED_REWRITE.DROP_REWRITE_EQUIVALENCE procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d62846e1166">参数</th>
                                    <th align="left" valign="bottom" id="d62846e1169">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e1174" headers="d62846e1166 ">
                                       <p><code class="codeph">名称</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e1174 d62846e1169 ">
                                       <p>要删除的等价声明的名称。名称可以是<code class="codeph">owner.name</code>形式，其中owner符合模式名称的规则，名称使用表名称的规则进行编译。或者，可以指定符合表名规则的简单名称。在这种情况下，重写等效性将在当前模式中删除。调用者必须具有适当的drop materialized view特权才能在他们自己的模式之外删除等价声明。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65081"></a><a id="ARPLS65082"></a><a id="ARPLS65082"></a><a id="ARPLS65081"></a><div class="props_rev_3"><a id="GUID-B744E94A-D634-4A74-8EF5-869CE4E916AF" name="GUID-B744E94A-D634-4A74-8EF5-869CE4E916AF"></a><h4 id="ARPLS-GUID-B744E94A-D634-4A74-8EF5-869CE4E916AF" class="sect4"><span class="enumeration_section">15.2.5</span> VALIDATE_REWRITE_EQUIVALENCE过程</h4>
                  <div>
                     <p>此过程验证指定的重写等效声明。</p>
                     <div class="section">
                        <p>它使用与<span class="q">“ <a href="DBMS_ADVANCED_REWRITE.html#GUID-B744E94A-D634-4A74-8EF5-869CE4E916AF" title="此过程验证指定的重写等效声明。">VALIDATE_REWRITE_EQUIVALENCE过程</a> ”中</span>的<code class="codeph">VALIDATE</code>参数描述的验证方法相同的验证方法。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B744E94A-D634-4A74-8EF5-869CE4E916AF__GUID-F8420687-5F90-4C19-ABA7-37A6FC2D1D01">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_ADVANCED_REWRITE.VALIDATE_REWRITE_EQUIVALENCE（名称VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B744E94A-D634-4A74-8EF5-869CE4E916AF__GUID-95BDF147-A908-400F-9331-E380DC100F91">参数</p>
                        <div class="tblformal" id="GUID-B744E94A-D634-4A74-8EF5-869CE4E916AF__GUID-2A97323A-C0B4-435B-94FB-ADDD3F36ABB9">
                           <p class="titleintable">表15-6 VALIDATE_REWRITE_EQUIVALENCE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="VALIDATE_REWRITE_EQUIVALENCE过程参数" width="100%" border="1" summary="This table describes the parameters of DBMS_ADVANCED_REWRITE.VALIDATE_REWRITE_EQUIVALENCE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d62846e1309">参数</th>
                                    <th align="left" valign="bottom" id="d62846e1312">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d62846e1317" headers="d62846e1309 ">
                                       <p><code class="codeph">名称</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d62846e1317 d62846e1312 ">
                                       <p>要验证的等效声明的名称。名称可以是owner.name形式，其中owner符合模式名称的规则，名称使用表名称的规则进行编译。或者，可以指定符合表名规则的简单名称。在这种情况下，重写等效性在当前模式中得到验证。调用者必须具有足够的权限来执行指定的等价声明的<code class="codeph">source_stmt</code>和<code class="codeph">destination_stmt</code> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
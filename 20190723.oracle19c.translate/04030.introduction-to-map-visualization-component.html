<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph."></meta>
      <meta name="description" content="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph."></meta>
      <title>地图可视化组件简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Map Visualization Developer&#39;s Guide "></meta>
      <meta property="og:description" content="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Map Visualization Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-map-visualization-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T11:37:22-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94797-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="preface.html" title="Previous" type="text/html"></link>
      <link rel="next" href="map-visualization-concepts.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Map Visualization Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JIMPV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="preface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="map-visualization-concepts.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">地图可视化开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">地图可视化组件简介</li>
            </ol>
            <a id="GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" name="GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F"></a><a id="JIMPV1000"></a>
            
            <h2 id="JIMPV-GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" class="sect2"><span class="enumeration_chapter">1</span>地图可视化组件简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Spatial and Graph地图可视化组件（有时称为<span class="italic">可视化组件</span> ）是一种可编程工具，用于使用Oracle Spatial and Graph管理的空间数据渲染地图。
               </p>
               <p>地图可视化组件提供的工具可隐藏空间数据查询和制图呈现的复杂性，同时为更高级的用户提供可自定义的选项。这些工具可以以独立于平台的方式部署，旨在与地图呈现应用程序集成。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-3D6CDFDB-0BB1-49D1-B4B1-1457E24D02FC">地图可视化组件概述</a><br>地图可视化组件使开发人员能够将高度交互式地图和空间分析合并到业务应用程
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-10F9DF2C-F517-49E2-9C07-871441663FE5">地图可视化组件入门</a><br>要开始使用，请按照以下步骤操作。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-23484C6A-01CF-4B38-BF4D-6AC0A144C24C">地图可视化组件的必备软件</a><br>要使用地图可视化组件，您必须具有以下软件。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-DDB6A642-4CA3-4019-848A-D96995B338A9">使用Map Visualization Component部署基于MapViewer的应用程序</a><br>如果您有任何基于MapViewer的应用程序，则可以使用地图可视化组件部署它们。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0">管理地图可视化组件</a><br>本主题介绍了地图可视化组件管理页面以及您可以执行的一些管理和配置任务，例如添加新数据源，管理Oracle Maps使用的地图图块层以及设置日志记录级别。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15">Oracle Real Application Clusters和Map Visualizer</a><br>当数据库是Oracle Real Application Cluster（Oracle RAC）时，您可以使用以下任一选项连接到Oracle RAC数据库。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-B1C71001-5981-45E1-8B2E-986D53251A60">高可用性和Map Visualizer（仅限WebLogic Server）</a><br>用户可以从Oracle WebLogic Server的高可用性功能中受益。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879">安全地图渲染</a><br>您可以基于Web用户的身份实现安全的地图呈现。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-93D5B57C-ED0A-4574-9149-A76CAEBD344D">Map Visualizer演示和教程</a><br>几个地图可视化器演示和教程包含在名为<code class="codeph">mvdemo.ear</code>的单独应用程序存档中，并部署到部署了<code class="codeph">mapviewer.ear</code>的同一Java EE容器中。
                  </li>
               </ul>
            </div>
            <a id="JIMPV9457"></a><div class="props_rev_3"><a id="GUID-3D6CDFDB-0BB1-49D1-B4B1-1457E24D02FC" name="GUID-3D6CDFDB-0BB1-49D1-B4B1-1457E24D02FC"></a><h3 id="JIMPV-GUID-3D6CDFDB-0BB1-49D1-B4B1-1457E24D02FC" class="sect3"><span class="enumeration_section">1.1</span>地图可视化组件概述</h3>
               <div>
                  <p>地图可视化组件使开发人员能够将高度交互式地图和空间分析合并到业务应用程</p>
                  <p>应用程序内容可以与来自各种Web服务和数据格式（如GeoJSON）的地图和数据相结合。它部署在Java EE容器或Oracle Java Cloud Service中。</p>
                  <p>地图可视化组件包括以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>一种地图渲染引擎，用于向Web应用程序公开制图渲染功能。</p>
                     </li>
                     <li>
                        <p>一套应用程序编程接口（API），允许对可视化功能进行可编程访问。这些API包括XML，Java和基于HTML5的JavaScript API。</p>
                     </li>
                     <li>
                        <p>一种图形地图构建器工具，可用于创建地图符号，定义空间数据渲染规则以及创建和编辑地图可视化组件对象。</p>
                     </li>
                     <li>
                        <p>Oracle Maps，包括地图缓存和FOI（感兴趣的特征）服务器，可促进交互式地理空间Web应用程序的开发。</p>
                     </li>
                     <li>
                        <p>管理区域（国家，州，县等）的打包内容作为JSON文件。</p>
                     </li>
                  </ul>
                  <p>核心呈现引擎通过Java数据库连接（JDBC）连接到Oracle数据库。它还从数据库中读取地图元数据（例如地图定义，样式规则和通过Map Builder工具创建的符号系统），并在渲染操作期间将元数据应用于检索到的空间数据。</p>
                  <p>JavaScript API使您能够创建使用地图可视化组件的Oracle Maps功能的高度交互式Web应用程序。</p>
                  <p>Map Builder工具简化了在空间数据库中创建和管理地图，主题和符号系统元数据的过程。有关此工具的信息，请参阅<a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="本章简要介绍了地图可视化组件Map Builder工具，也称为Oracle Map Builder。它不提供有关工具界面的详细信息;为此，您应该使用Oracle Map Builder时可以使用的在线帮助。">Oracle Map Builder工具</a> 。
                  </p>
                  <p>基于核心地图可视化组件功能构建的Oracle Maps使用缓存地图图像切片的地图切片服务器，以及将实时数据流出数据库以在地图上显示为交互式功能的感兴趣特征（FOI）服务器。您可以将基于HTML5的JavaScript API与Oracle Maps一起使用，以提供复杂的映射解决方案。Oracle Maps还支持高级自定义和查询功能。</p>
                  <p>地图可视化组件支持存储在Oracle Spatial and Graph中的二维矢量几何，以及Oracle Spatial and Graph拓扑和网络数据模型中的GeoRaster数据和数据。地图可视化组件也是开放地理空间联盟（OGC）兼容的web地图服务（WMS）和web地图图块服务（WMTS）服务器。</p>
                  <p>该</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-15001A52-4F67-45CF-BF44-2F5BAA717789">地图可视化组件体系结构</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="Oracle Spatial and Graph地图可视化组件（有时称为可视化组件）是一种可编程工具，用于使用Oracle Spatial and Graph管理的空间数据渲染地图。">地图可视化组件简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9461"></a><a id="JIMPV9460"></a><div class="props_rev_3"><a id="GUID-15001A52-4F67-45CF-BF44-2F5BAA717789" name="GUID-15001A52-4F67-45CF-BF44-2F5BAA717789"></a><h4 id="JIMPV-GUID-15001A52-4F67-45CF-BF44-2F5BAA717789" class="sect4"><span class="enumeration_section">1.1.1</span>地图可视化组件体系结构</h4>
                  <div>
                     <p>下图说明了地图可视化组件的体系结构。</p>
                     <div class="figure" id="GUID-15001A52-4F67-45CF-BF44-2F5BAA717789__MAPVISUALIZATIONCOMPONENTARCHITECTU-AEC9E6E6">
                        <p class="titleinfigure">图1-1地图可视化组件体系结构</p><img src="img/architecture.gif" alt="下面是图1-1的描述" title="下面是图1-1的描述" longdesc="img_text/architecture.html"><br><a href="img_text/architecture.html">“图1-1地图可视化组件体系结构”的描述</a></div>
                     <!-- class="figure" -->
                     <p>如上图所示：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>地图可视化组件可以使用HTTP协议与客户端web浏览器或应用程序或外部web服务进行通信。</p>
                        </li>
                        <li>
                           <p>使用客户端Web浏览器或应用程序，它使用HTTP协议与JEE容器或Java云服务中的地图可视化渲染引擎进行通信。</p>
                        </li>
                        <li>
                           <p>它通过对数据库或数据库云服务的JDBC调用来执行空间数据访问（读取和写入Oracle Spatial和Graph数据）。</p>
                        </li>
                        <li>
                           <p>数据库或数据库云服务包括Oracle Spatial和Graph，以及映射元数据。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-3D6CDFDB-0BB1-49D1-B4B1-1457E24D02FC" title="地图可视化组件使开发人员能够将高度交互式地图和空间分析合并到业务应用程">地图可视化组件概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9462"></a><div class="props_rev_3"><a id="GUID-10F9DF2C-F517-49E2-9C07-871441663FE5" name="GUID-10F9DF2C-F517-49E2-9C07-871441663FE5"></a><h3 id="JIMPV-GUID-10F9DF2C-F517-49E2-9C07-871441663FE5" class="sect3"><span class="enumeration_section">1.2</span> Map可视化组件入门</h3>
               <div>
                  <p>要开始使用，请按照以下步骤操作。</p>
                  <ol>
                     <li><span>在安装和部署地图可视化组件之前或之后，请阅读“ <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">地图可视化概念”</a>以确保您了解重要的术语和概念。</span></li>
                     <li><span>确保您具有必备软件（请参阅<a href="introduction-to-map-visualization-component.html#GUID-23484C6A-01CF-4B38-BF4D-6AC0A144C24C" title="要使用地图可视化组件，您必须具有以下软件。">映射可视化组件的必备软件</a> ）。</span></li>
                     <li><span>安装（如有必要）并部署地图可视化组件。</span></li>
                     <li><span>使用地图可视化组件执行一些基本任务。例如，创建Oracle Maps应用程序（请参阅<a href="oracle-maps.html#GUID-9B4DB4C9-5E4B-4776-92F6-84084F65784E" title="Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。">Oracle Maps</a> ）。</span></li>
                     <li><span>（可选）使用Map Builder工具（在<a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="本章简要介绍了地图可视化组件Map Builder工具，也称为Oracle Map Builder。它不提供有关工具界面的详细信息;为此，您应该使用Oracle Map Builder时可以使用的在线帮助。">Oracle Map Builder工具中</a>描述）熟悉样式，主题和地图，以及每个样式的选项，以及可选择预览空间数据。</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="Oracle Spatial and Graph地图可视化组件（有时称为可视化组件）是一种可编程工具，用于使用Oracle Spatial and Graph管理的空间数据渲染地图。">地图可视化组件简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9463"></a><div class="props_rev_3"><a id="GUID-23484C6A-01CF-4B38-BF4D-6AC0A144C24C" name="GUID-23484C6A-01CF-4B38-BF4D-6AC0A144C24C"></a><h3 id="JIMPV-GUID-23484C6A-01CF-4B38-BF4D-6AC0A144C24C" class="sect3"><span class="enumeration_section">1.3</span>地图可视化组件的必备软件</h3>
               <div>
                  <p>要使用地图可视化组件，您必须具有以下软件。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>受支持的JEE服务器（请参阅<a href="http://www.oracle.com/technetwork/database/options/spatialandgraph/documentation/jee-server-support-3659112.html" target="_blank">http://www.oracle.com/technetwork/database/options/spatialandgraph/documentation/jee-server-support-3659112.html</a> ）</p>
                     </li>
                     <li>
                        <p>Java SDK 1.8或更高版本</p>
                     </li>
                  </ul>
                  <p><a id="d2937e373" class="indexterm-anchor"></a><a id="d2937e375" class="indexterm-anchor"></a><a id="d2937e377" class="indexterm-anchor"></a>地图可视化组件还支持J2SE SDK中的无头AWT机制，该机制使可视化组件能够在Linux或UNIX系统上运行，而无需设置任何<code class="codeph">X11 DISPLAY</code>变量。要在Linux或UNIX系统上启用AWT无头模式，请在命令行中指定以下内容以启动地图可视化组件：</p><pre class="oac_no_warn" dir="ltr">-Djava.awt.headless =真</pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="Oracle Spatial and Graph地图可视化组件（有时称为可视化组件）是一种可编程工具，用于使用Oracle Spatial and Graph管理的空间数据渲染地图。">地图可视化组件简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV10007"></a><div class="props_rev_3"><a id="GUID-DDB6A642-4CA3-4019-848A-D96995B338A9" name="GUID-DDB6A642-4CA3-4019-848A-D96995B338A9"></a><h3 id="JIMPV-GUID-DDB6A642-4CA3-4019-848A-D96995B338A9" class="sect3"><span class="enumeration_section">1.4</span>使用Map Visualization Component部署基于MapViewer的应用程序</h3>
               <div>
                  <p>如果您有任何基于MapViewer的应用程序，则可以使用地图可视化组件部署它们。</p>
                  <p>如果要继续使用现有的MapViewer配置，请按照本节中的说明进行操作。</p>
                  <p>使用MapViewer V2 API编写的应用程序将与地图可视化组件一起使用。</p>
                  <p>（您还可以在Oracle融合中间件版本12.2.1.x.0及更高版本的WebLogic Server中使用现有的MapViewer配置。）</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="Oracle Spatial and Graph地图可视化组件（有时称为可视化组件）是一种可编程工具，用于使用Oracle Spatial and Graph管理的空间数据渲染地图。">地图可视化组件简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9483"></a><div class="props_rev_3"><a id="GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0" name="GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0"></a><h3 id="JIMPV-GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0" class="sect3"><span class="enumeration_section">1.5</span>管理Map Visualization组件</h3>
               <div>
                  <p>本主题介绍了地图可视化组件管理页面以及您可以执行的一些管理和配置任务，例如添加新数据源，管理Oracle Maps使用的地图图块层以及设置日志记录级别。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC">登录到Map Visualization组件管理页面</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置地图可视化组件</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-28AA44A7-5021-43C5-84A9-730C945A8760">执行Map Visualizer管理任务</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="Oracle Spatial and Graph地图可视化组件（有时称为可视化组件）是一种可编程工具，用于使用Oracle Spatial and Graph管理的空间数据渲染地图。">地图可视化组件简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9485"></a><a id="JIMPV9486"></a><a id="JIMPV9484"></a><div class="props_rev_3"><a id="GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC" name="GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC"></a><h4 id="JIMPV-GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC" class="sect4"><span class="enumeration_section">1.5.1</span>登录Map Visualization组件管理页面</h4>
                  <div>
                     <p>在确认地图可视化组件正常运行后，建议您登录到地图可视化组件“管理”页面。要执行此操作，请首先转到地图可视化组件“欢迎”页面，该页面通常为<code class="codeph">http://</code> <span class="italic"><code class="codeph">&lt;host&gt;:&lt;port&gt;</code></span> / <code class="codeph">mapviewer</code> ，其中<span class="italic"><code class="codeph">&lt;host&gt;</code></span>和<span class="italic"><code class="codeph">&lt;port&gt;</code></span>应替换为正确的安装值。
                     </p>
                     <p>单击右上角的“ <span class="bold">管理”</span>链接以显示地图可视化组件“管理”页面。
                     </p>
                     <p>您可以使用此管理页面执行管理任务，例如清除缓存数据，创建切片图层，管理切片图层以及重新启动服务器（使用“ <span class="bold">监视”</span>链接重新启动）。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0" title="本主题介绍了地图可视化组件管理页面以及您可以执行的一些管理和配置任务，例如添加新数据源，管理Oracle Maps使用的地图图块层以及设置日志记录级别。">管理Map Visualization组件</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9488"></a><a id="JIMPV9487"></a><div class="props_rev_3"><a id="GUID-15A469ED-6429-4ECD-B636-D27CD58C2283" name="GUID-15A469ED-6429-4ECD-B636-D27CD58C2283"></a><h4 id="JIMPV-GUID-15A469ED-6429-4ECD-B636-D27CD58C2283" class="sect4"><span class="enumeration_section">1.5.2</span>配置Map可视化组件</h4>
                  <div>
                     <p>如果运行地图可视化组件的默认配置设置不足，则可以通过编辑位于<span class="italic"><code class="codeph">$MAPVIEWER_HOME</code></span> <code class="codeph">/WEB-INF/conf</code>目录中的可视化组件配置文件<code class="codeph">mapViewerConfig.xml</code>来配置地图可视化组件。要修改此文件，可以使用文本编辑器，也可以使用地图可视化组件“管理”页面。
                     </p>
                     <p>修改此文件后，必须重新启动容器才能使更改生效;但是，如果使用独立的Glassfish实例安装了地图可视化组件，则可以使用地图可视化组件“管理”页面仅重新启动地图可视化组件servlet（而不是可能已部署并运行其他应用程序的整个Java EE实例） 。</p>
                     <p>地图可视化组件配置文件以XML格式定义以下信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>记录信息，通过容器控制的日志记录（推荐）或<code class="codeph">&lt;logging&gt;</code>元素定义（请参阅<a href="introduction-to-map-visualization-component.html#GUID-98388D57-FF15-41D3-9448-0158840F38AF">指定日志记录信息</a> ）</p>
                        </li>
                        <li>
                           <p>映射<code class="codeph">&lt;save_images_at&gt;</code>元素中定义的映像文件信息（请参阅<a href="introduction-to-map-visualization-component.html#GUID-82293405-04DB-4226-9A33-FC5692AC44AB">指定映射文件存储和生命周期信息</a> ）</p>
                        </li>
                        <li>
                           <p>用于访问防火墙外部信息的Web代理信息，在<code class="codeph">&lt;web_proxy&gt;</code>元素中定义（请参阅<a href="introduction-to-map-visualization-component.html#GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE">指定Web代理</a> ）</p>
                        </li>
                        <li>
                           <p>全局映射“外观”配置，在<code class="codeph">&lt;global_map_config&gt;</code>元素中定义（请参阅<a href="introduction-to-map-visualization-component.html#GUID-69148567-C00C-441A-BBA7-D42EB32879A7">指定全局映射配置选项</a> ）</p>
                        </li>
                        <li>
                           <p>内部空间数据缓存设置，在<code class="codeph">&lt;spatial_data_cache&gt;</code>元素中<a href="introduction-to-map-visualization-component.html#GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781">定义</a> （请参阅<a href="introduction-to-map-visualization-component.html#GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781">自定义空间数据缓存</a> ）</p>
                        </li>
                        <li>
                           <p>永久地图数据源，在<code class="codeph">&lt;map_data_source&gt;</code>元素中<a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">定义</a> （请参阅<a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">定义永久地图数据源</a> ）</p>
                        </li>
                        <li>
                           <p>安全配置，在<code class="codeph">&lt;security_config&gt;</code>元素中定义</p>
                        </li>
                        <li>
                           <p>WMS服务配置，在<code class="codeph">&lt;wms_config&gt;</code>元素中定义</p>
                        </li>
                        <li>
                           <p>外部属性数据提供程序注册，在<code class="codeph">&lt;ns_data_provider&gt;</code>元素中定义</p>
                        </li>
                        <li>
                           <p>映射平铺服务器配置，在<code class="codeph">&lt;map_tile_server&gt;</code>元素中定义</p>
                        </li>
                        <li>
                           <p>UTF网格生命周期参数，在<code class="codeph">&lt;utfgrid_life_cycle&gt;</code>元素中定义</p>
                        </li>
                        <li>
                           <p>外部空间数据提供程序注册，在<code class="codeph">&lt;s_data_provider&gt;</code>元素中定义</p>
                        </li>
                        <li>
                           <p>映射数据源，在<code class="codeph">&lt;map_data_source&gt;</code>元素中定义</p>
                        </li>
                        <li>
                           <p>映射数据服务器流参数，在<code class="codeph">&lt;mds_config&gt;</code>元素中定义</p>
                        </li>
                        <li>
                           <p>OAM注销参数，在<code class="codeph">&lt;oam_logout&gt;</code>元素中定义</p>
                        </li>
                     </ul>
                     <p>除非另行指定，否则<code class="codeph">mapViewerConfig.xml</code>文件中的所有路径名都与存储文件的目录相关。
                     </p>
                     <div class="example" id="GUID-15A469ED-6429-4ECD-B636-D27CD58C2283__CHDHDFJH">
                        <p class="titleinexample">示例1-1示例地图可视化组件配置文件</p>
                        <p><a id="d2937e725" class="indexterm-anchor"></a><a id="d2937e729" class="indexterm-anchor"></a> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283__CHDHDFJH">示例1-1</a>显示了一个示例<code class="codeph">mapViewerConfig.xml</code>文件。
                        </p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;！ - 这是地图可视化组件的配置文件。 - &gt; &lt;！ - 注意：除非指定为绝对路径名，否则相对于此目录（此配置文件所在的位置）解析所有路径。- &gt; &lt;MapperConfig&gt; &lt;！ -  **************************************** **************************  - &gt; &lt;！ -  ***************** *******记录设置************************  - &gt; &lt;！ -  ********** ************************************************** ******  - &gt; &lt;！ - 取消注释以下内容以修改日志记录。可能的值有：log_level =“fatal”|“error”|“warn”|“info”|“debug”|“finest”默认值：info）; log_thread_name =“true”| “假”; log_time =“true”| “假”;一个或多个log_output元素。- &gt; &lt;！ -  &lt;logging log_level =“info”log_thread_name =“false”log_time =“true”&gt; &lt;log_output name =“System.err”/&gt; &lt;log_output name =“../ log / mapviewer.log” /&gt; &lt;/ logging&gt;  - &gt; &lt;！ -  ************************************* *****************************  - &gt; &lt;！ -  ************** ********地图图像设置************************  - &gt; &lt;！ -  ******** ************************************************** ********  - &gt; &lt;！ - 仅当您希望生成的图像存储在不同的目录中，或者您想要自定义生成的图像文件的生命周期时，才取消注释以下内容。默认情况下，所有地图都是在$ ORACLE_HOME / lbs / mapviewer / web / images下生成的。图像位置相关属性：file_prefix：图像文件前缀，默认值为“omsmap”url：可以访问图像的URL。它必须与下面的“路径”属性匹配。其默认值为“％HOST_URL％/ mapviewer / images”路径：保存图像的服务器中的相应路径;默认值为“％ORACLE_HOME％/ lbs / mapviewer / web / images”图像生命周期相关属性：生命：生成图像的生命周期，以分钟为单位指定。如果未指定或值为0，则永远不会删除保存在磁盘上的图像。recycle_interval：此属性指定生成的地图图像的回收频率。单位是分钟。默认间隔（未指定时或值为0时）为8 * 60或8小时。- &gt; &lt;！ -  &lt;save_images_at file_prefix =“omsmap”url =“http://mypc.mycorp.com:8888/mapviewer/images”path =“../ web / images”/&gt;  - &gt; &lt;！ -  ********************************************* ******************  - &gt; &lt;！ -  ********************* IP监控设置* ********************  - &gt; &lt;！ -  *********************** *******************************************  - &gt; &lt;！ - 取消注释以下内容以启用管理请求的IP筛选。注意： - 使用&lt;ips&gt;和&lt;ip_range&gt;指定允许的IP（和范围）。也可以使用通配符表单，例如20. *。在&lt;ips&gt;中使用逗号分隔的列表。- 对于禁止访问eLocation的IP和IP范围，使用&lt;ips_exclude&gt;和&lt;ip_range_exclude&gt;。- 如果知识产权属于“允许”和“禁止”类别，则禁止使用。- 如果在&lt;ips&gt;元素中放入“*”，则允许所有IP，但&lt;ips_exclude&gt;和&lt;ip_range_exclude&gt;中指定的IP除外。另一方面，如果将“*”放在&lt;ips_exclude&gt;元素中，则无法访问地图可视化组件（无论IP是在&lt;ips&gt;还是&lt;ip_range&gt;）。- 您可以在&lt;ip_monitor&gt;下有多个&lt;ips&gt;，&lt;ip_range&gt;，&lt;ips_exclude&gt;和&lt;ip_range_exclude&gt;元素。- 如果XML配置文件中不存在&lt;ip_monitor&gt;元素，则不会执行任何IP过滤（全部允许）。- 地图可视化组件确定是否允许IP的方式是：if（未启用IP过滤）然后允许;如果（IP在排除列表中）则不允许;否则if（IP在允许列表中）然后允许;否则不允许; - &gt; &lt;！ -  &lt;ip_monitor&gt; &lt;ips&gt; 138.1.17.9,138.1.17.21,138.3。*，20。* &lt;/ ips&gt; &lt;ip_range&gt; 24.17.1.3  -  24.17.1.20 &lt;/ ip_range&gt; &lt;ips_exclude&gt; 138.3.29。* &lt;/ ips_exclude&gt; &lt;ip_range_exclude&gt; 20.22.34.1  -  20.22.34.255 &lt;/ ip_range_exclude&gt; &lt; / ip_monitor&gt;  - &gt; &lt;！ -  **************************************** **************************  - &gt; &lt;！ -  ***************** ***** Web代理设置************************  - &gt; &lt;！ -  *********** ************************************************** *****  - &gt; &lt;！ - 取消注释并修改以下内容以指定Web代理设置。只有在没有代理的情况下无法访问此类URL时，才需要将背景图像URL传递到地图请求中的地图可视化组件或设置徽标图像URL。- &gt; &lt;！ -  &lt;web_proxy host =“www-proxy.my_corp.com”port =“80”/&gt;  - &gt; &lt;！ -  **************** ************************************************** - &gt; &lt;！ -  ***********************安全配置****************** *  - &gt; &lt;！ -  ****************************************** ************************  - &gt; &lt;！ - 您可以在此处设置地图可视化组件的各种安全相关配置。- &gt; &lt;security_config&gt; &lt;disable_direct_info_request&gt; false &lt;/ disable_direct_info_request&gt; &lt;/ security_config&gt; &lt;！ -  **************************** **************************************  - &gt; &lt;！ -  ***** ******************全球地图配置*****************  - &gt; &lt;！ -  ***** ************************************************** ***********  - &gt; &lt;！ - 取消注释并修改以下内容，为生成的地图指定系统范围的参数。您可以指定版权注释，地图标题和图像，以用作地图上显示的自定义徽标。徽标图像必须可以通过此地图可视化组件以GIF或JPEG格式访问。注意： - 要禁用全局注释或标题，请为&lt;note&gt;和&lt;title&gt;元素的text属性指定空字符串（“”）。-  position指定地图上将显示徽标，注释或标题的相对位置。可能的值包括NORTH，EAST，SOUTH，WEST，NORTH_EAST，SOUTH_EAST，SOUTH_WEST，NORTH_WEST和CENTER。 -  image_path指定图像的文件路径或URL（以“http：//”开头）。&lt;rendering&gt;元素属性： - 局部大地测量数据调整：如果allow_local_adjustment =“true”，如果数据窗口小于3个十进制度，则地图可视化组件会自动执行与大地测量数据“展平”的本地数据。具体地，地图可视化组件使用当前地图请求中心处的切向平面执行坐标的简单数学变换。如果allow_local_adjustment =“false”（默认值），则不执行任何调整。- 自动应用球状地图投影（仅限大地测量数据）：如果use_globular_projection =“true”，地图可视化组件将动态应用球状投影到正在显示的几何体。如果use_globular_projection =“false”（默认值），则地图可视化组件不会对大地几何进行地图投影。此选项对非大地测量数据没有影响。- &gt; &lt;！ -  &lt;global_map_config&gt; &lt;note text =“Copyright 2009，Oracle Corporation”font =“sans serif”position =“SOUTH_EAST”/&gt; &lt;title text =“MapViewer Demo”font =“Serif”position =“ NORTH“/&gt; &lt;logo image_path =”C：\\ images \\ a.gif“position =”SOUTH_WEST“/&gt; &lt;rendering allow_local_adjustment =”false“use_globular_projection =”false“/&gt; &lt;/ global_map_config&gt;  - &gt; &lt;！ -  ********************************************* ******************  - &gt; &lt;！ -  ******************空间数据缓存设置*** ****************  - &gt; &lt;！ -  *************************** ***************************************  - &gt; &lt;！ - 取消注释并修改以下是自定义地图可视化组件使用的空间数据缓存。内存缓存的默认值为64 MB。要禁用缓存，请将max_cache_size设置为0。max_cache_size：地图可视化组件的内存空间缓存的最大大小。大小必须以兆字节（MB）为单位。report_stats：如果要查看缓存统计信息的定期输出，请将此属性设置为true。默认值为false。- &gt; &lt;！ -  &lt;spatial_data_cache max_cache_size =“64”report_stats =“false”/&gt;  - &gt; &lt;！ -  ********************** ********************************************  - &gt; &lt;！ -  -  ******************自定义WMS功能信息******************  - &gt; &lt;！ -  ** ************************************************** **************  - &gt; &lt;！ - 如果希望地图可视化组件在其getCapabilities响应中使用以下信息，请取消注释并修改以下标记。注意：&lt;wms_config&gt;的所有属性和元素都是可选的。- &gt; &lt;！ -  &lt;wms_config host =“www.my_corp.com”port =“80”&gt; &lt;title&gt; Oracle Map可视化组件的WMS 1.1界面&lt;/ title&gt; &lt;abstract&gt;此WMS服务通过地图提供可视化组件。&lt;/ abstract&gt; &lt;keyword_list&gt; &lt;keyword&gt; bird &lt;/ keyword&gt; &lt;keyword&gt; roadrunner &lt;/ keyword&gt; &lt;keyword&gt; ambush &lt;/ keyword&gt; &lt;/ keyword_list&gt; &lt;sdo_epsg_mapfile&gt; ../config/epsg_srids.properties &lt;/ sdo_epsg_mapfile&gt; &lt;/ wms_config&gt;  - &gt; &lt;！ -  *************************************** ***************************  - &gt; &lt;！ -  ****************自定义非空间数据提供者****************  - &gt; &lt;！ -  ********************* *********************************************  - &gt; &lt;！ - 取消注释并在此处根据需要添加任意数量的自定义非空间数据提供程序，每个都在其自己的&lt;ns_data_provider&gt;元素中。您必须在此处提供ID和完整的班级名称。（可选）您还可以指定任意数量的全局参数，地图可视化组件将在初始化期间将其传递给数据提供程序实现。每个参数的名称和值仅由实现解释。- &gt; &lt;！ - 这是地图可视化组件附带的默认数据提供者;请参阅有关如何使用它的文档。&lt;ns_data_provider id =“defaultNSDP”class =“oracle.sdovis。NSDataProviderDefault“/&gt;  - &gt; &lt;！ - 这是带有参数的示例NS数据提供程序：&lt;ns_data_provider id =”myProvider1“class =”com.mycorp.bi。NSDataProviderImpl“&gt; &lt;parameters&gt; &lt;parameter name =”myparam1“value =”value1“/&gt; &lt;parameter name =”p2“value =”v2“/&gt; &lt;/ parameters&gt; &lt;/ ns_data_provider&gt;  - &gt; &lt;！ -  * ************************************************** ***************  - &gt; &lt;！ -  *******************地图平铺服务器设置***** **************  - &gt; &lt;！ -  ***************************** *************************************  - &gt; &lt;！ - 取消注释并修改以下内容自定义地图图块服务器。如果缓存实例配置未指定缓存实例的根目录，则&lt;tile_storage&gt;指定要在其下存储缓存的磁贴图像的默认根目录。如果默认根目录未设置或无效，则默认根目录将设置为$ MAPVIEWER_HOME / web / tilecache default_root_path：存储缓存切片图像的默认根目录。- &gt; &lt;！ -  &lt;map_tile_server&gt; &lt;tile_storage default_root_path =“/ scratch / tilecachetest /”/&gt; &lt;/ map_tile_server&gt;  - &gt; &lt;！ -  **************** ************************************************** - &gt; &lt;！ -  ********************预定义的数据源******************** - &gt; &lt;！ -  ******************************************* ***********************  - &gt; &lt;！ - 取消注释并修改以下内容以预定义一个或多个数据源。注意：您必须在jdbc_password值之前加上'！'（感叹号），这样当地图可视化组件下次启动时，它将加密并替换明文密码。- &gt; &lt;！ -  &lt;map_data_source name =“mvdemo”jdbc_host =“elocation.example.com”jdbc_sid =“orcl”jdbc_port =“1521”jdbc_user =“scott”jdbc_password =“！<span class="italic">密码</span> “jdbc_mode =”thin“number_of_mappers =”3“/&gt;  - &gt; &lt;/ MapperConfig&gt;</pre><p>此地图可视化组件配置主题包括以下子主题。</p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-98388D57-FF15-41D3-9448-0158840F38AF">指定日志记录信息</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-82293405-04DB-4226-9A33-FC5692AC44AB">指定地图文件存储和生命周期信息</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE">指定Web代理</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-69148567-C00C-441A-BBA7-D42EB32879A7">指定全局映射配置选项</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781">自定义空间数据缓存</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-4C9589D6-82E4-46B4-8BA3-71E349330336">指定安全配置</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-7586978A-C25A-4ED8-90EF-C085DF2B347A">注册自定义空间提供程序</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-1F9F83CB-4D9B-42ED-A6ED-010E755D0C85">注册自定义非空间数据提供程序</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-431C67C1-3566-4490-AF9E-647606A28073">自定义SRS映射</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-5DB2D2A6-702E-4E0B-9A4A-4B170588DCF0">自定义WMS GetCapabilities响应</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-AD01DA31-9656-4F68-A4A8-34C41D443D41">自定义WMTS GetCapabilities响应</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-6334E96D-142C-4F17-AACB-5456ADF13C4A">为Oracle Maps配置Map Tile Server</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">定义永久地图数据源</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F">为HTML5 API配置和保护Map Data Server</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0" title="本主题介绍了地图可视化组件管理页面以及您可以执行的一些管理和配置任务，例如添加新数据源，管理Oracle Maps使用的地图图块层以及设置日志记录级别。">管理Map Visualization组件</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9490"></a><a id="JIMPV9491"></a><a id="JIMPV9489"></a><div class="props_rev_3"><a id="GUID-98388D57-FF15-41D3-9448-0158840F38AF" name="GUID-98388D57-FF15-41D3-9448-0158840F38AF"></a><h5 id="JIMPV-GUID-98388D57-FF15-41D3-9448-0158840F38AF" class="sect5"><span class="enumeration_section">1.5.2.1</span>指定日志信息</h5>
                     <div>
                        <p>地图可视化组件提供灵活的记录机制来记录运行时信息和事件。您可以配置日志输出的粒度，卷，格式和目标。您还可以配置日志文件的最大大小以及自动日志文件轮换。</p>
                        <p>有两种方法可以配置地图可视化组件的日志记录：容器控制的日志记录，以及使用配置文件中的<code class="codeph">&lt;logging&gt;</code>元素。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-98388D57-FF15-41D3-9448-0158840F38AF__GUID-23A787E1-5BA7-4BB9-8D2A-3B5EB308684C">容器控制的日志记录</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>如果<code class="codeph">mapViewerConfig.xml</code>文件中的<code class="codeph">&lt;logging&gt;</code>元素被注释掉或丢失，则地图可视化组件使用容器控制的日志记录，特别是使用以下记录器：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">oracle.mapviewer.ws</code>用于所有Web服务器（地图， <code class="codeph">oracle.mapviewer.ws</code>贴，功能）消息</p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.mapviewer.access</code>用于所有用户访问</p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.mapviewer.sdovis</code>用于所有渲染（地图，主题，功能）消息</p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.mapviewer.webconsole</code>用于所有管理控制台日志消息</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-98388D57-FF15-41D3-9448-0158840F38AF__GUID-646E870F-2CE2-4C1C-B526-C8FFE4DB5989">使用&lt;logging&gt;元素</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>如果<code class="codeph">&lt;logging&gt;</code>在元件<code class="codeph">mapViewerConfig.xml</code>文件正在使用（即，如果<code class="codeph">&lt;logging&gt;</code>元素没有被注释掉或丢失），地图可视化部件使用该信息，而不是使用容器控制的日志记录。<code class="codeph">&lt;logging&gt;</code>元素可以具有以下属性和子元素：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">console_log_level</code>属性控制记录在日志中的信息级别，进而影响日志输出量。将<code class="codeph">console_log_level</code>属性值设置为以下之一，从最严格的日志记录到最小限制日志记录列出： <code class="codeph">FATAL</code> ， <code class="codeph">ERROR</code> ， <code class="codeph">WARN</code> ， <code class="codeph">INFO</code> ， <code class="codeph">DEBUG</code>和<code class="codeph">FINEST</code> 。 <code class="codeph">FATAL</code>级别输出最少的日志信息（仅记录不可恢复的事件），其他级别逐渐更具包容性， <code class="codeph">FINEST</code>级别导致记录最多的信息。对于生产工作，建议使用<code class="codeph">WARN</code>或更严格的限制（ <code class="codeph">ERROR</code>或<code class="codeph">FATAL</code> ）;但是，对于调试，您可能希望设置一个限制较少的级别。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">file_limit</code>属性控制日志文件的最大文件大小。单位为Mb，默认值为50（即，最大日志文件大小的默认值为50Mb）。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">file_count</code>属性确定创建的日志文件数。文件被旋转（即，当最后一个日志文件达到其最大大小时，将重用第一个日志文件）。默认值为10。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;logger&gt;</code>子元素指定特定记录器的日志级别。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;log_output&gt;</code>子元素标识日志记录信息的输出。默认情况下，日志记录将写入系统错误控制台。您可以将其更改为系统输出控制台或一个或多个文件或某些组合。如果通过多个<code class="codeph">&lt;log_output&gt;</code>子元素指定多个设备，则使用相同的日志记录级别和属性将日志记录发送到所有设备。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9492"></a><div class="props_rev_3"><a id="GUID-82293405-04DB-4226-9A33-FC5692AC44AB" name="GUID-82293405-04DB-4226-9A33-FC5692AC44AB"></a><h5 id="JIMPV-GUID-82293405-04DB-4226-9A33-FC5692AC44AB" class="sect5"><span class="enumeration_section">1.5.2.2</span>指定映射文件存储和生命周期信息</h5>
                     <div>
                        <p>地图图像文件信息在<code class="codeph">&lt;save_images_at&gt;</code>元素中指定。默认情况下，图像存储在<span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">/lbs/mapviewer/web/images</code>目录中。除非要指定用于存储图像的其他目录，否则无需修改<code class="codeph">&lt;save_images_at&gt;</code>元素。
                        </p>
                        <p>通过将<code class="codeph">&lt;map_request&gt;</code>元素的<code class="codeph">format</code>属性设置为<code class="codeph">GIF_URL</code>或<code class="codeph">PNG_URL</code> ，映射客户端可以请求地图可视化组件发回图像文件的URL而不是实际的地图图像数据。在这种情况下，地图可视化组件将所请求的地图图像保存为运行地图可视化组件的主机系统上的文件，并将包含图像文件的URL的响应发送回地图客户端。
                        </p>
                        <p>您可以将以下地图图像文件信息指定为<code class="codeph">&lt;save_images_at&gt;</code>元素的属性：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">file_prefix</code>属性标识地图图像文件前缀。地图图像文件名将是固定文件前缀，后跟序列号和图像类型后缀。例如，如果地图图像文件前缀是<code class="codeph">omsmap</code> ，则可能的GIF地图图像文件可以是<code class="codeph">omsmap1.gif</code> 。
                              </p>
                              <p>默认值： <code class="codeph">file_prefix=omsmap</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">url</code>属性标识地图图像基本URL，该URL指向在地图可视化组件主机上保存所有地图图像文件的目录。发送到映射客户端的地图图像URL是地图图像基URL加上地图图像文件名。例如，如果地图图像基本URL是<code class="codeph">http://dev04.example.com:1521/mapviewer/images</code> ，则<code class="codeph">omsmap1.gif</code>的地图图像URL将为<code class="codeph">http://dev04.example.com:1521/mapviewer/images/omsmap1.gif</code> 。</p>
                              <p>默认值： <code class="codeph">url=</code> <span class="italic"><code class="codeph">$HOST_URL</code></span> <code class="codeph">/mapviewer/images</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">path</code>属性标识在地图可视化组件主机系统上保存所有地图图像文件的目录的路径。此目录必须可由HTTP访问，并且必须与地图图像URL匹配。保存在<code class="codeph">path</code>属性指定的目录中的映射图像文件应该可以从<code class="codeph">url</code>属性指定的URL访问。
                              </p>
                              <p>但是，如果要将地图可视化组件部署到WebLogic Server，则<code class="codeph">path</code>属性（ <code class="codeph">../web/images</code> ）的默认值不正确。在这种情况下，路径属性值应该是<code class="codeph">../../images,</code>因为物理“images”目录是<code class="codeph">mapviewer.ear/web.war/images</code> ;所以使用相对路径，值应该是<code class="codeph">../../images</code>用于解析到物理目录的<code class="codeph">path</code>属性。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">life</code>属性指定在删除图像之前保证生成的地图图像保留在文件系统上的分钟数。如果指定了<code class="codeph">life</code>属性，则<code class="codeph">recycle_interval</code>属性控制地图可视化组件检查要删除的可能文件的频率。
                              </p>
                              <p>默认值：地图可视化组件从不删除生成的地图图像。</p>
                           </li>
                           <li>
                              <p><code class="codeph">recycle_interval</code>属性指定地图可视化组件检查是否可以删除文件系统上的任何图像文件超过<code class="codeph">life</code>属性值的分钟数的时间之间的分钟数。
                              </p>
                              <p>默认值： <code class="codeph">480</code> （8小时）</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9495"></a><div class="props_rev_3"><a id="GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE" name="GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE"></a><h5 id="JIMPV-GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE" class="sect5"><span class="enumeration_section">1.5.2.3</span>指定Web代理</h5>
                     <div>
                        <p>有时，地图可视化组件服务器需要与外部Web服务器建立HTTP连接，例如通过URL获取背景图像或联系外部WMS服务器以获取其地图图像。在这种情况下，如果地图可视化组件服务器与目标Web服务器之间存在防火墙，则可能需要将HTTP代理信息指定给地图可视化组件，以便防火墙不会阻止它。以下示例指定Web代理信息：</p><pre class="oac_no_warn" dir="ltr">&lt;web_proxy host =“www-proxy.mycorp.com”port =“80”/&gt;</pre><p>如果Web代理需要身份验证，则可以指定<code class="codeph">user</code>和<code class="codeph">password</code>属性。如果密码值前面有感叹号（ <code class="codeph">!</code> ）在第一次加载配置文件时，密码值将被加密。例如：</p><pre class="oac_no_warn" dir="ltr">&lt;web_proxy host =“www-proxy.mycorp.com”port =“80”user =“uservalue”password =“！pwdvalue“/&gt;</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9496"></a><div class="props_rev_3"><a id="GUID-69148567-C00C-441A-BBA7-D42EB32879A7" name="GUID-69148567-C00C-441A-BBA7-D42EB32879A7"></a><h5 id="JIMPV-GUID-69148567-C00C-441A-BBA7-D42EB32879A7" class="sect5"><span class="enumeration_section">1.5.2.4</span>指定全局映射配置选项</h5>
                     <div>
                        <p>您可以为地图可视化组件生成的每个地图的显示指定以下全局“外观”选项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>标题</p>
                           </li>
                           <li>
                              <p>注意（例如版权声明或脚注）</p>
                           </li>
                           <li>
                              <p>徽标（自定义符号或公司徽标）</p>
                           </li>
                           <li>
                              <p>本地大地测量数据调整</p>
                           </li>
                           <li>
                              <p>沿着180子午线分裂几何形状</p>
                           </li>
                        </ul>
                        <p>要指定任何这些选项，请使用<code class="codeph">&lt;global_map_config&gt;</code>元素。例如：</p><pre class="oac_no_warn" dir="ltr">&lt;global_map_config&gt; &lt;note text =“Copyright（c）2009，Example Corporation”font =“sans serif”position =“SOUTH_EAST”/&gt; &lt;title text =“Map Courtesy of Example Corp.” font =“Serif”position =“NORTH”/&gt; &lt;logo image_path =“C：\\ images \\ a.gif”position =“SOUTH_WEST”/&gt; &lt;rendering allow_local_adjustment =“false”use_globular_projection =“false”/&gt; &lt; / global_map_config&gt;</pre><p>通过<code class="codeph">&lt;global_map_config&gt;</code>元素的<code class="codeph">&lt;title&gt;</code>元素设置地图标题。您还可以通过使用<code class="codeph">&lt;map_request&gt;</code>元素指定<code class="codeph">title</code>属性在单个地图请求中设置地图标题，在这种情况下，将使用地图请求中的标题代替地图可视化组件配置文件中的全局标题。请注意有关<code class="codeph">&lt;title&gt;</code>元素的属性的以下信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">text</code>属性指定标题字符串。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">font</code>属性指定字体。字体必须存在于运行地图可视化组件的系统上。
                              </p>
                           </li>
                           <li>
                              <p>在确定地图标题将在地图上绘制的<code class="codeph">position</code>属性为地图可视化组件提供定位提示。可能的值包括： <code class="codeph">NORTH</code> ， <code class="codeph">EAST</code> ， <code class="codeph">SOUTH</code> ， <code class="codeph">WEST</code> ， <code class="codeph">NORTH_EAST</code> ， <code class="codeph">SOUTH_EAST</code> ， <code class="codeph">SOUTH_WEST</code> ， <code class="codeph">NORTH_WEST</code>和<code class="codeph">CENTER</code> 。</p>
                              <p>默认值： <code class="codeph">NORTH</code></p>
                           </li>
                        </ul>
                        <p>通过<code class="codeph">&lt;global_map_config&gt;</code>元素的<code class="codeph">&lt;note&gt;</code>元素设置地图注释。请注意有关<code class="codeph">&lt;note&gt;</code>元素的属性的以下信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">text</code>属性指定注释字符串。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">font</code>属性指定字体。字体必须存在于运行地图可视化组件的系统上。
                              </p>
                           </li>
                           <li>
                              <p>在确定将在地图上绘制地图注释的<code class="codeph">position</code>属性为地图可视化组件提供定位提示。可能的值包括： <code class="codeph">NORTH</code> ， <code class="codeph">EAST</code> ， <code class="codeph">SOUTH</code> ， <code class="codeph">WEST</code> ， <code class="codeph">NORTH_EAST</code> ， <code class="codeph">SOUTH_EAST</code> ， <code class="codeph">SOUTH_WEST</code> ， <code class="codeph">NORTH_WEST</code>和<code class="codeph">CENTER</code> 。</p>
                              <p>默认值： <code class="codeph">SOUTH_EAST</code></p>
                           </li>
                        </ul>
                        <p>通过<code class="codeph">&lt;global_map_config&gt;</code>元素的<code class="codeph">&lt;logo&gt;</code>元素设置地图徽标。地图徽标图像必须为JPEG或GIF格式。图像可以存储在本地文件系统中，地图可视化组件实例可以访问该文件系统，也可以通过指定URL来从Web获取。要指定地图徽标，请取消注释地图可视化组件配置文件中的<code class="codeph">&lt;map_logo&gt;</code>元素，并根据需要编辑其属性。
                        </p>
                        <p>请注意有关<code class="codeph">&lt;logo&gt;</code>元素的属性的以下信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">image_path</code>属性必须指定有效的文件路径名，或者以<code class="codeph">http://</code>开头的URL。</p>
                           </li>
                           <li>
                              <p>在确定将在地图上绘制地图徽标的<code class="codeph">position</code>属性为地图可视化组件提供定位提示。可能的值包括： <code class="codeph">NORTH</code> ， <code class="codeph">EAST</code> ， <code class="codeph">SOUTH</code> ， <code class="codeph">WEST</code> ， <code class="codeph">NORTH_EAST</code> ， <code class="codeph">SOUTH_EAST</code> ， <code class="codeph">SOUTH_WEST</code> ， <code class="codeph">NORTH_WEST</code>和<code class="codeph">CENTER</code> 。</p>
                              <p>默认值： <code class="codeph">SOUTH_WEST</code></p>
                           </li>
                        </ul>
                        <p>如果徽标图像是通过防火墙外部的URL获取的，则可能需要设置Web代理，以便地图可视化组件检索徽标图像。有关指定Web代理的信息，请参阅<a href="introduction-to-map-visualization-component.html#GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE">指定Web代理</a> 。
                        </p>
                        <p>如果还指定了地图图例，请确保其位置与地图标题，注释或徽标的任何位置不同。（地图图例中解释了<a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D">地图图例</a> 。地图图例的默认位置是<code class="codeph">SOUTH_WEST</code> 。）
                        </p>
                        <p><a id="d2937e1515" class="indexterm-anchor"></a><a id="d2937e1519" class="indexterm-anchor"></a><a id="d2937e1521" class="indexterm-anchor"></a><a id="d2937e1523" class="indexterm-anchor"></a>要使地图可视化组件在显示地理数据窗口之前自动将大地测量数据投影到本地非大地坐标系，如果地图数据窗口小于3个十进制度数，请在<code class="codeph">&lt;rendering&gt;</code>元素中指定<code class="codeph">allow_local_adjustment="true"</code> 。
                        </p>
                        <p><a id="d2937e1535" class="indexterm-anchor"></a><a id="d2937e1537" class="indexterm-anchor"></a><a id="d2937e1539" class="indexterm-anchor"></a>要使地图可视化组件自动应用球形地图投影（即适合查看世界的地图投影，特别是地图可视化组件的方位角等距投影），请在<code class="codeph">&lt;rendering&gt;</code>元素中指定<code class="codeph">use_globular_projection="true"</code> 。此选项仅适用于大地测量数据。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9497"></a><div class="props_rev_3"><a id="GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781" name="GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781"></a><h5 id="JIMPV-GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781" class="sect5"><span class="enumeration_section">1.5.2.5</span>自定义空间数据缓存</h5>
                     <div>
                        <p>您可以使用<code class="codeph">&lt;spatial_data_cache&gt;</code>元素自定义地图可视化组件用于空间数据的内存高速缓存。例如：</p><pre class="oac_no_warn" dir="ltr">&lt;spatial_data_cache max_cache_size =“64”report_stats =“true”/&gt;</pre><p>您可以将以下信息指定为<code class="codeph">&lt;spatial_data_cache&gt;</code>元素的属性：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">max_cache_size</code>属性指定内存高速缓存的最大兆字节数（MB）。
                              </p>
                              <p>默认值： <code class="codeph">64</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">report_stats</code>属性（如果设置为<code class="codeph">true</code> ）指示地图可视化组件服务器定期（每5分钟）输出缓存统计信息，例如缓存的对象数，缓存对象的总大小以及与内部效率相关的数据缓存结构。为每个数据源和每个预定义主题提供统计信息。它们可以帮助您确定内存缓存的最佳设置。例如，如果要为内存缓存中的某些主题固定所有几何数据，则需要指定一个足以容纳这些主题的<code class="codeph">max_cache_size</code>值。
                              </p>
                              <p>默认值： <code class="codeph">false</code></p>
                           </li>
                        </ul>
                        <p>默认情况下始终启用空间数据高速缓存，即使该元素在配置文件中已注释掉也是如此。要完全禁用空间数据的缓存，必须将<code class="codeph">max_cache_size</code>属性值指定为<code class="codeph">0</code> （零）。
                        </p>
                        <div class="infoboxnote" id="GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781__GUID-04F5FF7F-2E82-4567-A7A4-2933636066D2">
                           <p class="notep1">注意：</p>
                           <p>不再支持先前版本中支持的基于磁盘的空间缓存，因为性能测试表明基于磁盘的空间缓存通常不如在需要时直接从数据库中获取空间对象（即，高速缓存后经常不需要再次检索缓存对象的情况）。</p>
                        </div>
                        <p>有关预定义主题的缓存的详细信息，请参阅<a href="map-visualization-concepts.html#GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB">预定义主题的缓存</a> 。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9498"></a><div class="props_rev_3"><a id="GUID-4C9589D6-82E4-46B4-8BA3-71E349330336" name="GUID-4C9589D6-82E4-46B4-8BA3-71E349330336"></a><h5 id="JIMPV-GUID-4C9589D6-82E4-46B4-8BA3-71E349330336" class="sect5"><span class="enumeration_section">1.5.2.6</span>指定安全配置</h5>
                     <div>
                        <p>您可以使用<code class="codeph">&lt;security_config&gt;</code>元素指定地图可视化组件是否应拒绝请求中的<code class="codeph">&lt;info_request&gt;</code>元素。<code class="codeph">&lt;info_request&gt;</code>元素是来自客户端的一种请求，它要求地图可视化组件执行简单的SQL语句并以纯文本或XML格式返回结果行。地图可视化组件应用程序通常使用此请求来标识地图上显示的要素，或运行简单的空间搜索查询。
                        </p>
                        <p>但是，如果公开了地图可视化组件数据源信息，则恶意攻击者可能会滥用此功能并获取敏感信息。为防止这种情况发生，您可以确保地图可视化组件始终连接到具有非常有限的访问权限且仅托管非敏感信息的数据库模式，您还可以通过指定<code class="codeph">&lt;security_config&gt;</code>来拒绝所有<code class="codeph">&lt;info_request&gt;</code>请求要素如下：</p><pre class="oac_no_warn" dir="ltr">&lt;security_config&gt; &lt;disable_direct_info_request&gt; true &lt;/ disable_direct_info_request&gt; &lt;/ security_config&gt;</pre><p>但请注意，此设置会影响某些地图可视化组件功能。例如，地图可视化组件Java API的<code class="codeph">identify()</code>方法将不再起作用，应用程序将需要通过其他方式实现自己的<code class="codeph">identify()</code>方法。
                        </p>
                        <p>您还可以定义允许地图可视化组件内置代理Servlet与之通信的远程URL。使用逗号分隔此类URL。您可以使用*（星号）通配符结束URL，以允许以路径开头的多个URL。以下示例指定一个远程URL：</p><pre class="oac_no_warn" dir="ltr">&lt;security-config&gt; ... &lt;proxy_enabled_hosts&gt; foo.com:8080/mapviewer &lt;/ proxy_enabled_hosts&gt; ... &lt;/ security-config&gt;</pre><p>为了便于地图可视化组件与使用自签名证书的外部网站的HTTPS（SSL）连接，您可以在此处注册这些证书。为需要HTTPS连接的每台服务器使用一个条目。以下示例显示了一个指定一个条目的摘录：</p><pre class="oac_no_warn" dir="ltr">&lt;security_config&gt; ... &lt;certificates&gt; &lt;entry&gt; &lt;host_name&gt; fooserver.com &lt;/ host_name&gt; &lt;keystore_file&gt; /scratch/fooserver.jks &lt;/ keystore_file&gt; &lt;key&gt; 123456 &lt;/ key&gt; &lt;/ entry&gt; &lt;/ certificates&gt; ... &lt;/ security_config&gt;</pre><p>每个证书的<code class="codeph">&lt;entry&gt;</code>元素的子元素如下。
                        </p>
                        <p><code class="codeph">host_name</code>属性指定需要HTTPS连接的服务器的IP地址或域名。
                        </p>
                        <p><code class="codeph">keystore_file</code>属性指定包含单个自签名证书的文件。从服务器站点获取证书（通常是<code class="codeph">.pem</code>文件）后，可以使用Java <code class="codeph">keytool</code>命令创建密钥库。例如：</p><pre class="oac_no_warn" dir="ltr">keytool -import -file fooserver.pem -alias fooserver -keystore fooserver.jks</pre><p><code class="codeph">key</code>属性指定在创建密钥库文件时提供的密码。（它用于确保密钥库文件本身的完整性。）
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9500"></a><div class="props_rev_3"><a id="GUID-7586978A-C25A-4ED8-90EF-C085DF2B347A" name="GUID-7586978A-C25A-4ED8-90EF-C085DF2B347A"></a><h5 id="JIMPV-GUID-7586978A-C25A-4ED8-90EF-C085DF2B347A" class="sect5"><span class="enumeration_section">1.5.2.7</span>注册自定义空间提供程序</h5>
                     <div>
                        <p>如果存在为该格式注册的空间提供者实现，则地图可视化组件可以呈现外部（非Oracle空间和图形）本机格式的空间数据，例如shapefile。有关实现外部空间数据提供程序（与自定义几何主题相关）的信息，请参阅<a href="map-visualization-concepts.html#GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42">自定义几何主题</a> 。
                        </p>
                        <p>要注册外部空间数据提供程序，请使用<code class="codeph">&lt;s_data_provider&gt;</code>元素，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">&lt;s_data_provider id =“shapefileSDP”class =“oracle.sdovis。ShapefileDataProvider“&gt; &lt;parameters&gt; &lt;参数名称=”datadir“value =”/ temp / data“/&gt; &lt;/ parameters&gt; &lt;/ s_data_provider&gt;</pre><p><code class="codeph">class</code>属性指定实现外部空间数据提供程序的类的名称。
                        </p>
                        <p><code class="codeph">&lt;parameters&gt;</code>元素指定数据提供程序在其初始化过程中使用的一组初始化参数。在此示例中，shapefile提供程序具有数据目录（ <code class="codeph">"datadir</code> <code class="codeph">"</code> ）参数，该参数指向地图可视化组件可以查找数据的目录。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9501"></a><div class="props_rev_3"><a id="GUID-1F9F83CB-4D9B-42ED-A6ED-010E755D0C85" name="GUID-1F9F83CB-4D9B-42ED-A6ED-010E755D0C85"></a><h5 id="JIMPV-GUID-1F9F83CB-4D9B-42ED-A6ED-010E755D0C85" class="sect5"><span class="enumeration_section">1.5.2.8</span>注册自定义非空间数据提供商</h5>
                     <div>
                        <p>生成专题地图图层时，地图可视化组件可以动态地连接源自外部源的非空间属性数据（例如每个区域的销售额）以及存储在数据库中的基本几何图形（所有区域的边界）。有关使用来自非空间数据提供者的外部属性数据进行专题制图的信息，请参阅<a href="map-visualization-concepts.html#GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C">使用外部属性数据进行专题制图</a> 。
                        </p>
                        <p>要注册非空间数据提供程序，请使用<code class="codeph">&lt;ns_data_provider&gt;</code>元素，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">&lt;ns_data_provider id =“testProvider”class =“com.mycorp。GetSalesData“&gt; &lt;parameters&gt; &lt;parameter name =”bi_database“value =”stadb32.mycorp.com“/&gt; &lt;parameter name =”sid“value =”bidata“/&gt; &lt;/ parameters&gt; &lt;/ ns_data_provider&gt;</pre><p><code class="codeph">id</code>属性唯一标识非空间数据提供者。在涉及提供程序的任何映射请求中使用此<code class="codeph">id</code>值。
                        </p>
                        <p><code class="codeph">class</code>属性指定实现非空间数据提供程序的类的名称。
                        </p>
                        <p><code class="codeph">&lt;parameters&gt;</code>元素指定非空间数据提供程序在其初始化过程中使用的一组初始化参数。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9502"></a><div class="props_rev_3"><a id="GUID-431C67C1-3566-4490-AF9E-647606A28073" name="GUID-431C67C1-3566-4490-AF9E-647606A28073"></a><h5 id="JIMPV-GUID-431C67C1-3566-4490-AF9E-647606A28073" class="sect5"><span class="enumeration_section">1.5.2.9</span>自定义SRS映射</h5>
                     <div>
                        <p>您可以使用<code class="codeph">&lt;srs_mapping&gt;</code>元素指定SDO到EPSG SRID映射文件，该文件定义Oracle Spatial和Graph SDO_SRID值与EPSG代码之间的映射。如<a href="ogc-wms-support-map-visualzation-component.html#GUID-D08A8C06-CFF8-4F18-BAC7-072422481DAD">SDO到EPSG SRID映射文件</a>中所述，指定映射文件中的每一行必须包含SDO_SRID值和相应的EPSG代码。<code class="codeph">&lt;srs_mapping&gt;</code>元素可以与WMS和WFS主题一起使用。
                        </p>
                        <p>以下示例使用<code class="codeph">&lt;srs_mapping&gt;</code>元素指定SDO到EPSG SRID映射文件：</p><pre class="oac_no_warn" dir="ltr">&lt;srs_mapping&gt; &lt;sdo_epsg_mapfile&gt; ../config/epsg_srids.properties &lt;/ sdo_epsg_mapfile&gt; &lt;/ srs_mapping&gt;</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9503"></a><div class="props_rev_3"><a id="GUID-5DB2D2A6-702E-4E0B-9A4A-4B170588DCF0" name="GUID-5DB2D2A6-702E-4E0B-9A4A-4B170588DCF0"></a><h5 id="JIMPV-GUID-5DB2D2A6-702E-4E0B-9A4A-4B170588DCF0" class="sect5"><span class="enumeration_section">1.5.2.10</span>自定义WMS GetCapabilities响应</h5>
                     <div>
                        <p>地图可视化组件可用作Open Geospatial Consortium WMS（Web Map Server）1.1.1兼容服务器。因此，WMS客户端可以向地图可视化组件发送<code class="codeph">GetCapabilities</code>请求。作为响应，地图可视化组件将发回其承载的主题列表以及其他重要信息，例如数据提供者的名称和请求客户端可能感兴趣的关键字列表。
                        </p>
                        <div class="infoboxnote" id="GUID-5DB2D2A6-702E-4E0B-9A4A-4B170588DCF0__GUID-D47C3DD0-8A66-4AF3-8368-C6E065A9839D">
                           <p class="notep1">注意：</p>
                           <p>有一个单独的WMS配置文件（ <code class="codeph">wmsConfig.xml</code> ），其中包含的信息多于地图可视化组件配置文件中<code class="codeph">&lt;wms_config&gt;</code>元素中的信息。建议您在此单独的WMS配置文件中定义任何自定义WMS配置参数;任何设置都将覆盖地图可视化组件配置文件中<code class="codeph">&lt;wms_config&gt;</code>元素中的任何冲突设置。
                           </p>
                           <p>有关wmsXonfig.xml文件的详细信息，请参阅<a href="ogc-wms-support-map-visualzation-component.html#GUID-0C7C5BE0-81F4-4F94-B2BB-74DA58476745">自定义GetCapabilities响应：其他选项</a> 。
                           </p>
                        </div>
                        <p>您可以使用<code class="codeph">&lt;wms_config&gt;</code>元素自定义作为<code class="codeph">GetCapabilities</code>响应的一部分发送回客户端的描述性信息，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">&lt;wms_config host =“www.my_corp.com”port =“80”protocol =“http”default_datasource =“dsrc1”public_datasources =“dsrc1，dsrc2”&gt; &lt;title&gt; Oracle应用服务器10g MapViewer的WMS 1.1接口&lt;/ title&gt; &lt;abstract&gt;此WMS服务通过Oracle MapViewer提供。&lt;/ abstract&gt; &lt;keyword_list&gt; &lt;keyword&gt; bird &lt;/ keyword&gt; &lt;keyword&gt; roadrunner &lt;/ keyword&gt; &lt;keyword&gt; ambush &lt;/ keyword&gt; &lt;/ keyword_list&gt; &lt;sdo_epsg_mapfile&gt; ../config/epsg_srids.properties &lt;/ sdo_epsg_mapfile&gt; &lt;/ wms_config&gt;</pre><p><code class="codeph">host</code>属性指定服务请求URL的主机部分，客户端应将其用于对此地图可视化组件服务器发出的未来WMS请求。
                        </p>
                        <p><code class="codeph">port</code>属性指定服务请求URL的端口部分，客户端应将该端口部分用于对此地图可视化组件服务器发出的未来WMS请求。
                        </p>
                        <p><code class="codeph">protocol</code>属性指定服务请求URL的协议部分，客户端应将该协议部分用于对此地图可视化组件服务器发出的未来WMS请求。
                        </p>
                        <p><code class="codeph">default_datasource</code>属性指定用于检索功能响应的基本数据源。如果未定义此属性，则使用数据源<code class="codeph">WMS</code> ，并且该数据源必须存在于此地图可视化组件服务器中。
                        </p>
                        <p><code class="codeph">public_datasources</code>属性指定要在GetCapabilities响应中列出哪些数据源内容。如果未定义此属性，则将列出所有数据源内容。
                        </p>
                        <p><code class="codeph">&lt;title&gt;</code>元素指定要包含在响应中的服务标题。
                        </p>
                        <p><code class="codeph">&lt;abstract&gt;</code>元素指定要作为响应的一部分包含的抽象。
                        </p>
                        <p><code class="codeph">&lt;keyword_list&gt;</code>元素指定最能描述此地图可视化组件服务器所服务的图层类型的关键字列表。
                        </p>
                        <p><code class="codeph">&lt;sdo_epsg_mapfile&gt;</code>元素指定一个文本文件，该文件定义从Oracle Spatial和Graph（SDO）SRID值到大多数WMS请求和响应中通常使用的相应EPSG SRID值的映射。有关此映射文件的信息，请参阅<a href="ogc-wms-support-map-visualzation-component.html#GUID-D08A8C06-CFF8-4F18-BAC7-072422481DAD">SDO到EPSG SRID映射文件</a> 。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9990"></a><div class="props_rev_3"><a id="GUID-AD01DA31-9656-4F68-A4A8-34C41D443D41" name="GUID-AD01DA31-9656-4F68-A4A8-34C41D443D41"></a><h5 id="JIMPV-GUID-AD01DA31-9656-4F68-A4A8-34C41D443D41" class="sect5"><span class="enumeration_section">1.5.2.11</span>自定义WMTS GetCapabilities响应</h5>
                     <div>
                        <p>地图可视化组件可用作开放地理空间联盟WMTS（Web地图平铺服务）1.0.0兼容服务器，从而能够通过WMTS请求检索USER_SDO_CACHED_MAPS元数据视图中定义的切片层。WMTS客户端可以向地图可视化组件发送<code class="codeph">GetCapabilities</code>请求。作为响应，地图可视化组件将发回其承载的图块层列表以及其他重要信息，例如数据提供者的名称和请求客户端可能感兴趣的关键字列表。您可以编辑WMTS配置文件，该文件存储在与名称为<code class="codeph">wmtsConfig.xml</code> <code class="codeph">mapViewerConfig.xml</code>相同的文件夹中，以提供此类自定义信息。
                        </p>
                        <p>在<code class="codeph">wmtsConfig.xml</code>文件中，您可以使用<code class="codeph">&lt;wmts_config&gt;</code>元素自定义作为<code class="codeph">GetCapabilities</code>响应的一部分发送回客户端的描述性信息，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">&lt;wmts_config&gt; &lt;public_datasources&gt; &lt;public_datasource name =“MVDEMO”include_all_tile_layers =“true”/&gt; &lt;public_datasource name =“ELOCATION”&gt; &lt;tile_layers&gt; &lt;tile_layer name =“WORLD_MAP”/&gt; &lt;/ tile_layers&gt; &lt;/ public_datasource&gt; &lt;/ public_datasources&gt; &lt;sdo_epsg_mapfile&gt; ../config/epsg_srid.properties &lt;/ sdo_epsg_mapfile&gt; &lt;ServiceAttributes&gt; &lt;ServiceIdentification&gt; &lt;Title&gt; myCorp的Web地图平铺服务&lt;/ Title&gt; &lt;Abstract&gt;州和县城边界和大城市的美国地图&lt; /摘要&gt; &lt;关键字&gt; &lt;关键字&gt;地图，美国国家边界，城市&lt;/ Keyword&gt; &lt;/ Keywords&gt; &lt;/ ServiceIdentification&gt; &lt;ServiceProvider&gt; &lt;ProviderName&gt;提供商名称&lt;/ ProviderName&gt; &lt;ProviderSite url =“http：// www .myCorp.com / mySite“/&gt; &lt;/ ServiceProvider&gt; &lt;/ ServiceAttributes&gt; &lt;/ wmts_config&gt;</pre><p><code class="codeph">&lt;public_datasources&gt;</code>元素可以包含<code class="codeph">&lt;public_datasource</code> &gt;子元素，这些子元素指定要在WMTS GetCapabilities响应中列出哪些数据源的切片层。如果未定义此<code class="codeph">&lt;public_datasources&gt;</code>元素，则将列出所有数据源的切片图层;如果定义了此元素但不包含<code class="codeph">&lt;public_datasource&gt;</code>子元素，则响应中不会列出任何数据源中的切片图层。
                        </p>
                        <p><code class="codeph">&lt;public_datasource&gt;</code>元素必须包含<code class="codeph">name</code>属性，该属性指示数据源的名称。
                        </p>
                        <p><code class="codeph">include_all_tile_layers</code>属性是可选的，默认值为<code class="codeph">false</code> 。设置为<code class="codeph">true</code> ，表示该数据源中的所有切片图层都将在响应中列出。
                        </p>
                        <p><code class="codeph">&lt;tile_layer&gt;</code>元素必须包含<code class="codeph">name</code>属性，该属性指示要包含在其父元素中定义的数据源的响应中的tile图层的名称。
                        </p>
                        <p><code class="codeph">&lt;sdo_epsg_mapfile&gt;</code>元素指定一个文本文件，该文件定义从Oracle Spatial和Graph（SDO）SRID值到通常在大多数WMTS请求和响应中使用的相应EPSG SRID值的映射。有关此映射文件的信息，请参阅<a href="ogc-wms-support-map-visualzation-component.html#GUID-D08A8C06-CFF8-4F18-BAC7-072422481DAD">SDO到EPSG SRID映射文件</a> 。
                        </p>
                        <p><code class="codeph">&lt;Title&gt;</code>元素指定要包含在响应中的服务标题。
                        </p>
                        <p><code class="codeph">&lt;Abstract&gt;</code>元素指定要作为响应的一部分包含的抽象。
                        </p>
                        <p><code class="codeph">&lt;Keywords&gt;</code>元素指定一组关键字（来自其<code class="codeph">&lt;Keyword&gt;</code>子元素），它们最能描述此地图可视化组件服务器所服务的图层类型。
                        </p>
                        <p>可以在<code class="codeph">wmtsConfig.xml</code>文件的注释中找到更多信息。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9504"></a><div class="props_rev_3"><a id="GUID-6334E96D-142C-4F17-AACB-5456ADF13C4A" name="GUID-6334E96D-142C-4F17-AACB-5456ADF13C4A"></a><h5 id="JIMPV-GUID-6334E96D-142C-4F17-AACB-5456ADF13C4A" class="sect5"><span class="enumeration_section">1.5.2.12</span>配置Oracle Maps的Map Tile Server</h5>
                     <div>
                        <p>地图可视化组件的Oracle Maps功能可以预生成基本地图图像切片并通过地图切片服务器缓存它们。您可以使用&lt;map_tile_server&gt;元素向地图图块服务器提供配置信息，例如地图图块文件存储的默认位置和日志记录信息，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">&lt;map_tile_server&gt; &lt;tile_storage default_root_path =“/ scratch / tilecache /”/&gt; &lt;logging log_level =“finest”log_thread_name =“false”log_time =“true”&gt; &lt;log_output name =“System.err”/&gt; &lt;/ logging&gt; &lt; / map_tile_server&gt;</pre><p><code class="codeph">&lt;tile_storage&gt;</code>元素指定默认根目录，其中将存储由此地图可视化组件服务器生成的所有地图图像切片。
                        </p>
                        <p><code class="codeph">&lt;logging&gt;</code>元素指定特定于地图图块服务器的日志记录信息。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9505"></a><div class="props_rev_3"><a id="GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342" name="GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342"></a><h5 id="JIMPV-GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342" class="sect5"><span class="enumeration_section">1.5.2.13</span>定义永久地图数据源</h5>
                     <div>
                        <p>每个映射请求都必须具有指定地图数据源的数据源属性，该数据源是具有地理空间数据的数据库用户。您可以使用<code class="codeph">&lt;map_data_source&gt;</code>元素预定义可用的地图数据源。例如：</p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name =“mvdemo”jdbc_host =“mapsrus.example.com”jdbc_sid =“orcl”jdbc_port =“1521”jdbc_user =“scott”jdbc_password =“！<span class="italic">密码</span> “jdbc_mode =”thin“number_of_mappers =”5“allow_jdbc_theme_based_foi =”true“plsql_package =”web_user_info“/&gt;</pre><p>您可以将以下信息指定为<code class="codeph">&lt;map_data_source&gt;</code>元素的属性：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">name</code>属性为地图可视化组件指定唯一的数据源名称。您必须在标识数据源的所有映射请求中指定数据源名称。
                              </p>
                           </li>
                           <li>
                              <p>您必须指定所有必需的连接信息，容器数据源名称或网络服务名称（TNS名称）。也就是说，您必须仅指定以下内容之一，本节中对此进行了描述： <code class="codeph">jdbc_host</code> ， <code class="codeph">jdbc_sid</code> ， <code class="codeph">jdbc_port</code>和<code class="codeph">jdbc_user</code> ;或<code class="codeph">container_ds</code> ;或<code class="codeph">jdbc_tns_name</code> 。
                              </p>
                              <p>如果重新启动了您在其上定义数据源的数据库，并且数据源是从<code class="codeph">jdbc_host</code> / <code class="codeph">jdbc_sid</code> / <code class="codeph">jdbc_port</code>或<code class="codeph">jdbc_tns_name</code>属性创建的，则地图可视化组件将恢复正常操作（例如，使用正确创建的地图响应地图请求） ）一旦数据库重新联机。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">jdbc_host</code> ， <code class="codeph">jdbc_sid</code> ， <code class="codeph">jdbc_port</code>和<code class="codeph">jdbc_user</code>属性指定数据库连接信息和数据库用户名。（作为指定这些属性以及<code class="codeph">jdbc_password</code>和<code class="codeph">jdbc_mode</code>属性的替代方法，您可以指定<code class="codeph">container_ds</code>属性，将在本节后面介绍。）
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">jdbc_password</code>属性指定数据库用户的登录密码。它必须以感叹号为前缀（！）当您第一次指定密码时。当地图可视化组件下次重新启动时，它将自动模糊并替换明文密码。
                              </p>
                              <p>地图可视化组件不会以任何方式更改此密码字符串;不执行转换为大写或小写的情况。如果数据库使用区分大小写的密码，则指定的密码必须与数据库中的密码完全匹配。</p>
                           </li>
                           <li>
                              <p><code class="codeph">jdbc_mode</code>属性告诉地图可视化组件在连接到数据库时要使用哪个Oracle JDBC驱动程序。默认值为<code class="codeph">thin</code> （对于“瘦”驱动程序）。另一个可能的值是<code class="codeph">oci8</code> ，这要求您还在运行地图可视化组件的同一主机上安装Oracle数据库客户端。
                              </p>
                           </li>
                           <li>
                              <p><a id="d2937e2402" class="indexterm-anchor"></a><a id="d2937e2404" class="indexterm-anchor"></a><a id="d2937e2408" class="indexterm-anchor"></a> <code class="codeph">container_ds</code>属性允许您指定Java EE容器名称（JNDI名称），而不是指定<code class="codeph">jdbc_host</code> ， <code class="codeph">jdbc_sid</code> ， <code class="codeph">jdbc_port</code> ， <code class="codeph">jdbc_user</code> ， <code class="codeph">jdbc_password</code>和<code class="codeph">jdbc_mode</code>属性。例如，假设您创建了一个JDBC数据源，并为其指定了JNDI名称为<code class="codeph">jdbc/OracleDS</code> 。然后，您可以按如下方式定义永久地图可视化组件数据源：</p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name =“mvdemo”container_ds =“jdbc / OracleDS”number_of_mappers =“5”/&gt;</pre><p>如果使用<code class="codeph">container_ds</code>属性，并且希望地图可视化组件在重新启动定义数据源的数据库之后自动恢复正常操作（例如，使用正确创建的映射响应映射请求），则必须指示容器数据源始终在连接返回到应用程序之前验证连接。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">jdbc_tns_name</code>属性标识<code class="codeph">tnsnames.ora</code>文件中定义的网络服务名称。
                              </p>
                           </li>
                           <li>
                              <p><a id="d2937e2454" class="indexterm-anchor"></a><a id="d2937e2456" class="indexterm-anchor"></a><a id="d2937e2460" class="indexterm-anchor"></a> <code class="codeph">number_of_mappers</code>属性标识此数据源可用的最大地图渲染器数（以及地图可视化组件可以为数据源并行处理的最大地图请求数）。任何未处理的映射请求都会排队并最终处理。例如，如果值为3，则地图可视化组件将能够同时处理最多三个映射请求。如果在处理三个请求时出现第四个映射请求，它将等待地图可视化组件处理完当前请求之一。
                              </p>
                              <p>指定较大的<code class="codeph">number_of_mappers</code>值（例如50或100）可以提高整体吞吐量，但是在峰值加载时也会增加运行时内存和CPU使用率，因为地图可视化组件将尝试处理更多并发映射请求。它还将增加活动数据库会话的数量。因此，请确保不要为此属性设置太大的数字。
                              </p>
                              <div class="infoboxnote" id="GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342__GUID-7016182E-2E33-4A46-850F-0210ED925FCB">
                                 <p class="notep1">注意：</p>
                                 <p>过时的<code class="codeph">max_connections</code>属性不再影响渲染并被忽略。<code class="codeph">number_of_mappers</code>属性值会影响在任何给定时间为数据源打开的实际最大数据库连接数或会话数。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p><a id="d2937e2484" class="indexterm-anchor"></a><a id="d2937e2486" class="indexterm-anchor"></a><a id="d2937e2490" class="indexterm-anchor"></a><a id="d2937e2494" class="indexterm-anchor"></a> <code class="codeph">allow_jdbc_theme_based_foi</code>属性允许您指定是否允许对此数据源执行基于JDBC主题的FOI请求。基于JDBC主题的FOI请求基于JavaScript客户端应用程序构造的动态SQL查询。
                              </p>
                              <p>默认情况下，除非将此属性设置为<code class="codeph">true</code>否则不允许此类FOI请求。由于潜在的安全威胁，应谨慎使用基于JDBC主题的FOI请求。您应该只允许基于JDBC主题的FOI请求对数据库连接授予非常低的权限，并且只包含您要公开的数据。
                              </p>
                           </li>
                           <li>
                              <p><a id="d2937e2507" class="indexterm-anchor"></a><a id="d2937e2509" class="indexterm-anchor"></a> <code class="codeph">plsql_package</code>属性允许您指定用于安全地图呈现的PL / SQL包，如<a href="introduction-to-map-visualization-component.html#GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" title="您可以基于Web用户的身份实现安全的地图呈现。">安全地图呈现中所述</a> 。
                              </p>
                           </li>
                           <li>
                              <p><a id="d2937e2525" class="indexterm-anchor"></a><a id="d2937e2527" class="indexterm-anchor"></a> <code class="codeph">web_user_type</code>属性（本节中的示例中未显示）允许您指定经过身份验证的用户名的来源。它特别适用于从cookie中获取经过身份验证的用户名，以及指定用于安全地图呈现的PL / SQL包。有关<code class="codeph">web_user_type</code>属性及其使用示例的详细信息，请参阅<a href="introduction-to-map-visualization-component.html#GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2">从Cookie获取用户名</a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9984"></a><a id="JIMPV9983"></a><div class="props_rev_3"><a id="GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F" name="GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F"></a><h5 id="JIMPV-GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F" class="sect5"><span class="enumeration_section">1.5.2.14</span>为HTML5 API配置和保护Map数据服务器</h5>
                     <div>
                        <p>默认情况下可以对主题进行流式处理，保护它们的唯一方法是添加身份验证，即在地图可视化组件<code class="codeph">web.xml</code>文件中添加安全性约束，并在配置文件中配置<code class="codeph">&lt;mds_config&gt;</code>元素进行授权访问各种主题。
                        </p>
                        <p>地图数据服务器（MDS）服务器组件有助于将矢量格式的地理空间数据流式传输到Oracle Maps API（在<a href="oracle-maps.html#GUID-0D5BC30A-40AC-4347-89FA-E95D44918E32" title="Oracle Maps JavaScript客户端是一个基于浏览器的地图可视化引擎，它在地图图块服务器之上工作，并使用HTML5技术。">Oracle Maps JavaScript API中</a>描述）。MDS为浏览器客户端提供RESTful API，以从地图可视化组件服务器实例请求任何预定义或动态（JDBC）主题的矢量数据。保护或保护对此服务的访问的唯一方法是在地图可视化组件<code class="codeph">web.xml</code>部署文件中添加安全约束，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">&lt;security-constraint&gt; &lt;web-resource-collection&gt;。 。 。&lt;url-pattern&gt; / dataserver / * &lt;/ url-pattern&gt; &lt;/ web-resource-collection&gt; &lt;auth-constraint&gt; &lt;role-name&gt; map_admin_role &lt;/ role-name&gt; &lt;/ auth-constraint&gt; &lt;/ security-约束&gt;</pre><p>上面的示例为任何传入的URL添加了一个安全性约束，其中包含相对路径<code class="codeph">/dataserver/</code> 。由于MDS servlet仅响应其路径中带有<code class="codeph">/dataserver</code> URL，因此该约束有效地保护了对MDS的所有访问。这意味着访问Map Data Server的任何应用程序或Web客户端都需要正确的身份验证，并且只有具有角色<code class="codeph">map_admin_role</code>用户才能被授予访问权限。（有关如何保护Java EE servlet（如MDS）的更多信息，请查看Java EE和WebLogic Server文档。）
                        </p>
                        <p>无论您是否在MDS URL模式上添加了安全约束，默认情况下都会阻止访问任何预定义或动态（JDBC）主题的矢量数据。换句话说，例如，即使<code class="codeph">/dataserver/*</code> URL受到保护且HTML5应用程序已通过身份验证，如果没有适当的授权，它仍然无法访问主题的数据。当Oracle Maps HTML5应用程序尝试在没有适当授权的情况下加载或显示主题时，错误消息通常包含类似“此数据源不允许流式访问”的语句。</p>
                        <p>要授予对数据源主题的访问权限，必须在配置文件中显式配置<code class="codeph">&lt;mds_config&gt;</code>元素。
                        </p>
                        <div class="example" id="GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F__BEHCIFCF">
                           <p class="titleinexample">示例1-2配置mds.xml文件</p>
                           <p><a href="introduction-to-map-visualization-component.html#GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F__BEHCIFCF">示例1-2</a>显示了一个<code class="codeph">&lt;mds_config&gt;</code>元素，其中配置了两个地图可视化组件数据源<code class="codeph">mvdemo</code>和<code class="codeph">my-data</code> ，以便可以将他们的某些主题流式传输到客户端。
                           </p><pre class="oac_no_warn" dir="ltr">&lt;mds_config&gt; &lt;data_source name =“mvdemo”&gt; &lt;allow_predefined_themes&gt; true &lt;/ allow_predefined_themes&gt; &lt;deny&gt; my_secret_theme &lt;/ deny&gt; &lt;allow_dynamic_themes&gt; true &lt;/ allow_dynamic_themes&gt; &lt;/ data_source&gt; &lt;data_source name =“my-data”&gt; &lt; allow_predefined_themes&gt; false &lt;/ allow_predefined_themes&gt; &lt;allow&gt; &lt;theme&gt; public_points_theme &lt;/ theme&gt; &lt;theme&gt; office_locations * &lt;/ theme&gt; &lt;/ allow&gt; &lt;allow_dynamic_themes&gt; false &lt;/ allow_dynamic_themes&gt; &lt;/ data_source&gt; &lt;/ mds_config&gt;</pre><p>在<a href="introduction-to-map-visualization-component.html#GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F__BEHCIFCF">例1-2中</a> ：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>每个数据源都在其自己的<code class="codeph">&lt;data_source&gt;</code>元素中授权其主题。使用此元素，两个标记<code class="codeph">&lt;allow_predefined_themes&gt;</code>和<code class="codeph">&lt;allow_dynamic_themes&gt;</code>提供对这两种主题的整体或默认访问控制。请注意，对于动态/ JDBC主题，您还可以在数据源定义中（在主<code class="codeph">mapViewerConfig.xml</code>文件中）禁用它们。如果在数据源定义中禁用了动态主题，则该设置始终具有优先权（无论其在<code class="codeph">&lt;mds_config&gt;</code>元素中的设置方式如何）。
                                 </p>
                              </li>
                              <li>
                                 <p>默认情况下， <code class="codeph">mvdemo</code>数据源授予所有客户端对预定义和动态（JDBC）主题矢量数据的访问权限;鉴于数据的性质（来自公开样本的数据），这是一个合理的选择。但是，对于<code class="codeph">my_secret_theme</code>主题，通过使用<code class="codeph">&lt;deny&gt;</code>标记添加了一个例外。
                                 </p>
                              </li>
                              <li>
                                 <p>对于<code class="codeph">my-data</code>数据源，默认情况下会阻止对这两种主题的访问。在这种情况下，通过<code class="codeph">&lt;allow&gt;</code>标记添加异常（以打开某些主题到流）。在<code class="codeph">&lt;allow&gt;</code>和<code class="codeph">&lt;deny&gt;</code>标记中，主题名称或模式不区分大小写，并且通配符*（星号）可用于匹配多个主题。该示例使用<code class="codeph">&lt;allow&gt;</code>标签打开主题<code class="codeph">public_points_theme</code>以及名称以<code class="codeph">office_locations</code>开头的所有主题到流媒体，而所有其他主题都被阻止。此数据源不允许使用动态/ SQL主题。
                                 </p>
                              </li>
                           </ul>
                           <p>如果修改<code class="codeph">&lt;mds_config&gt;</code>元素，则必须重新启动已部署的地图可视化组件实例才能使修改生效。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">配置Map Visualization组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9506"></a><div class="props_rev_3"><a id="GUID-28AA44A7-5021-43C5-84A9-730C945A8760" name="GUID-28AA44A7-5021-43C5-84A9-730C945A8760"></a><h4 id="JIMPV-GUID-28AA44A7-5021-43C5-84A9-730C945A8760" class="sect4"><span class="enumeration_section">1.5.3</span>执行Map Visualizer管理任务</h4>
                  <div>
                     <p>除了知道如何配置地图可视化工具之外，您还应该知道如何使用地图可视化工具管理页面执行其他重要的管理任务。要登录此页面，请参阅<a href="introduction-to-map-visualization-component.html#GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC">登录Map Visualization组件管理页面中的说明</a> 。
                     </p>
                     <p>您可以作为地图可视化工具管理员执行的任务包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>编辑配置文件</p>
                           <p>单击<span class="bold">配置</span> 。
                           </p>
                        </li>
                        <li>
                           <p>刷新数据源列表</p>
                           <p>单击“ <span class="bold">管理”</span>以自动刷新列表，或单击“ <span class="bold">刷新”</span>以执行手动刷新。
                           </p>
                        </li>
                        <li>
                           <p>清除地图可视化工具样式，主题和基本地图的缓存定义</p>
                           <p>单击“ <span class="bold">管理”</span> ，选择数据源，然后单击“ <span class="bold">清除缓存的元数据”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>清除预定义主题的缓存几何数据</p>
                           <p>单击“ <span class="bold">管理”</span> ，然后单击“ <span class="bold">几何缓存”</span> ，然后单击“ <span class="bold">清除</span> ”选定的主题或所有主题。
                           </p>
                        </li>
                        <li>
                           <p>为Oracle Maps创建地图图块层</p>
                           <p>单击<span class="bold">Admin</span> ，然后单击<span class="bold">Create Tile Layer</span> ，选择tile图层类型，然后单击<span class="bold">Next</span> 。
                           </p>
                           <p><span class="bold">内部</span>地图源：输入地图缓存名称，然后选择数据源和基本地图。还定义缓存存储（将存储切片的位置），缩放级别，最小和最大比例，空间参考ID（SRID），数据边界框（MBR）以及切片大小和格式的参数。单击“ <span class="bold">下一步”</span>和“ <span class="bold">提交”</span>以创建地图图块层。您还可以通过单击XML在XML中定义地图缓存属性。</p>
                           <p><span class="bold">外部</span>地图源：输入地图缓存名称，然后选择数据源。要提供对外部源的访问，请定义参数，例如地图服务URL，请求方法（GET或POST），代理信息（如果需要），Java适配器类名称及其在服务器上的位置以及其他适配器属性。还定义缓存存储（将存储切片的位置），缩放级别，最小和最大比例，空间参考ID（SRID），数据边界框（MBR）以及切片大小和格式的参数。单击“ <span class="bold">下一步”</span>和“ <span class="bold">提交”</span>以创建地图图块层。您还可以通过单击XML在XML中定义地图缓存属性。</p>
                           <p>对于其他类型的切片图层（Oracle Maps，Here，Google，TomTom），请执行类似的步骤。</p>
                        </li>
                        <li>
                           <p>管理Oracle Maps的地图图块层</p>
                           <p>单击<span class="bold">Admin</span> ，然后单击<span class="bold">Manage Tile Layers</span> 。然后执行以下任何操作：</p>
                           <p>要手动刷新切片图层列表，请单击“ <span class="bold">刷新”</span> 。
                           </p>
                           <p>要编辑地图图块图层，请选择该图层的行，然后单击<span class="bold">编辑/查看详细信息</span> 。
                           </p>
                           <p>要查看和管理地图图块图层，请选择该图层的行，然后单击“ <span class="bold">查看地图/管理</span>图块”。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0" title="本主题介绍了地图可视化组件管理页面以及您可以执行的一些管理和配置任务，例如添加新数据源，管理Oracle Maps使用的地图图块层以及设置日志记录级别。">管理Map Visualization组件</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9507"></a><div class="props_rev_3"><a id="GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15" name="GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15"></a><h3 id="JIMPV-GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15" class="sect3"><span class="enumeration_section">1.6</span> Oracle Real Application Clusters和Map Visualizer</h3>
               <div>
                  <p>当数据库是Oracle Real Application Cluster（Oracle RAC）时，您可以使用以下任一选项连接到Oracle RAC数据库。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>让地图可视化工具连接到通过Java EE容器，的数据源的数据库如WebLogic服务器<span class="italic">12c</span>中。
                        </p>
                        <p>创建连接到Oracle RAC数据库的JDBC数据源，如<a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">为Map Visualizer服务器创建容器Oracle RAC数据源中所述</a> 。然后，地图可视化工具和其他应用程序可以通过JNDI查找使用数据源。
                        </p>
                        <p>此选项通常用于管理员创建和监视这些类型的连接的站点，和/或多个应用程序使用连接的站点。此选项还会从应用程序中隐藏数据库连接详细信息（例如数据库用户名和密码）。</p>
                     </li>
                     <li>
                        <p>使地图可视化工具直接连接到数据库服务。</p>
                        <p>使用Oracle RAC服务名称（而不是数据库SID）直接定义地图可视化工具数据源，如<a href="introduction-to-map-visualization-component.html#GUID-1AD38B02-674B-44DA-8536-7A4D11812C00">使用Oracle RAC服务名称创建Map Visualizer数据源中所述</a> 。
                        </p>
                        <p>此选项比前面的选项更容易实现。</p>
                     </li>
                  </ul>
                  <p>执行这些选项之一后，重新启动地图可视化工具，如<a href="introduction-to-map-visualization-component.html#GUID-9B0D09B9-8867-486E-A575-3853C7134527">重新启动Map Visualizer中所述</a> 。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">为Map Visualizer服务器创建容器Oracle RAC数据源</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-1AD38B02-674B-44DA-8536-7A4D11812C00">使用Oracle RAC服务名称创建Map Visualizer数据源</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-9B0D09B9-8867-486E-A575-3853C7134527">重新启动Map Visualizer</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="Oracle Spatial and Graph地图可视化组件（有时称为可视化组件）是一种可编程工具，用于使用Oracle Spatial and Graph管理的空间数据渲染地图。">地图可视化组件简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9508"></a><div class="props_rev_3"><a id="GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43" name="GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43"></a><h4 id="JIMPV-GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43" class="sect4"><span class="enumeration_section">1.6.1</span>为Map Visualizer服务器创建容器Oracle RAC数据源</h4>
                  <div>
                     <p>您可以在Oracle RAC的地图可视化工具容器中创建JDBC数据源，然后在地图可视化工具配置文件中使用该容器数据源，如下所示：</p>
                     <ol>
                        <li>
                           <p><a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD">创建Container Oracle RAC数据源</a> 。
                           </p>
                        </li>
                        <li>
                           <p><a href="introduction-to-map-visualization-component.html#GUID-AF239C28-1F62-4C07-81AF-B2BD43C96485">使用容器数据源创建Map Visualizer数据源</a> 。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD">创建Container Oracle RAC数据源</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-AF239C28-1F62-4C07-81AF-B2BD43C96485">使用容器数据源创建Map Visualizer数据源</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15" title="当数据库是Oracle Real Application Cluster（Oracle RAC）时，您可以使用以下任一选项连接到Oracle RAC数据库。">Oracle Real Application Clusters和Map Visualizer</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV10059"></a><a id="JIMPV10060"></a><a id="JIMPV10061"></a><a id="JIMPV10062"></a><a id="JIMPV10063"></a><a id="JIMPV10064"></a><a id="JIMPV10058"></a><div class="props_rev_3"><a id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD" name="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD"></a><h5 id="JIMPV-GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD" class="sect5"><span class="enumeration_section">1.6.1.1</span>创建容器Oracle RAC数据源</h5>
                     <div>
                        <p>您可以使用Oracle Enterprise Manager <span class="italic">12c</span>或更高版本创建连接到Oracle RAC数据库的数据源。
                        </p>
                        <p>以下步骤说明如何创建GridLink数据源。（接下来是显示如何创建多数据源的步骤。）</p>
                        <ol>
                           <li>
                              <p>登录到Enterprise Manager，在“目标导航”窗格中，单击包含地图可视化服务器的服务器实例。</p>
                              <p>在<a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHECFDI">图1-2</a> ，下WebLogic域点击<span class="bold">map_viewer1</span>使<code class="codeph">map_viewer1</code>服务器信息显示在窗口的主要区域。
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHECFDI">
                                 <p class="titleinfigure">图1-2选择服务器实例</p><img src="img/mv_serv_instance.jpg" alt="下面是图1-2的描述" title="下面是图1-2的描述" longdesc="img_text/mv_serv_instance.html"><br><a href="img_text/mv_serv_instance.html">“图1-2选择服务器实例”的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>单击<span class="bold">WebLogic Server</span>并选择<span class="bold">JDBC Data Sources</span> ， <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHJHCBJ">如图1-3</a>所示。
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHJHCBJ">
                                 <p class="titleinfigure">图1-3显示JDBC数据源</p><img src="img/display_jdbc_ds.jpg" alt="下面是图1-3的描述" title="下面是图1-3的描述" longdesc="img_text/display_jdbc_ds.html"><br><a href="img_text/display_jdbc_ds.html">“图1-3显示JDBC数据源”的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在JDBC Data Sources下，单击<span class="bold">Create</span>并选择<span class="bold">GridLink Data Source</span> ， <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHHJGFC">如图1-4</a>所示。
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHHJGFC">
                                 <p class="titleinfigure">图1-4创建GridLink数据源</p><img src="img/create_gridlink_ds.jpg" alt="下面是图1-4的描述" title="下面是图1-4的描述" longdesc="img_text/create_gridlink_ds.html"><br><a href="img_text/create_gridlink_ds.html">“图1-4创建GridLink数据源”的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“创建新JDBC数据源”向导中输入任何必要的信息。例如，要创建名为<code class="codeph">jdbc/mvdemo</code>的容器数据源：</p>
                              <ol type="a">
                                 <li>
                                    <p><span class="bold">数据源属性</span> ：将<span class="bold">数据源名称</span>指定为<code class="codeph">mvdemo</code> ，将<span class="bold">驱动程序服务名称</span>指定<code class="codeph">Oracle Driver (Thin XA) for GridLink Connections Versions: Any</code> ，将<span class="bold">JNDI名称指定</span>为<code class="codeph">jdbc/mvdemo</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">连接属性</span> ：在适当的主机上生成数据库用户<code class="codeph">mvdemo</code>的URL。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">事务属性</span> ：接受显示的事务属性。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">ONS属性</span> ：接受显示的事务属性，或根据需要进行任何更改。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">选择Targets</span> ：在<span class="bold">Name</span>下选择（check） <code class="codeph">map_viewer1</code>以在所需的服务器上部署JDBC数据源。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">检查</span> ：查看要创建的新数据源的属性。如果您需要进行任何更改，请返回并进行更改，然后返回此页面。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <p><a id="d2937e3178" class="indexterm-anchor"></a> <span class="bold">要创建多数据源</span>而不是前面说明中的GridLink数据源，请根据需要调整步骤。例如：</p>
                        <ol>
                           <li>
                              <p>登录到Enterprise Manager，在“目标导航”窗格中，单击包含地图可视化服务器的服务器实例。</p>
                              <p>在<a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHCHIHA">图1-5</a> ，下WebLogic域点击<span class="bold">map_viewer1</span>使<code class="codeph">map_viewer1</code>服务器信息显示在窗口的主要区域。
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHCHIHA">
                                 <p class="titleinfigure">图1-5选择服务器实例</p><img src="img/mv_serv_instance.jpg" alt="下面是图1-5的描述" title="下面是图1-5的描述" longdesc="img_text/mv_serv_instance.html"><br><a href="img_text/mv_serv_instance.html">“图1-5选择服务器实例”的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>单击<span class="bold">WebLogic Server</span>并选择<span class="bold">JDBC Data Sources</span> ， <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHHHBEH">如图1-6</a>所示。
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHHHBEH">
                                 <p class="titleinfigure">图1-6显示JDBC数据源</p><img src="img/display_jdbc_ds.jpg" alt="下面描述图1-6" title="下面描述图1-6" longdesc="img_text/display_jdbc_ds.html"><br><a href="img_text/display_jdbc_ds.html">“图1-6显示JDBC数据源”的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“JDBC数据源”下，单击“ <span class="bold">创建”</span> ，选择“ <span class="bold">多数据源”</span> ， <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHBDCEA">如图1-7</a>所示。
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHBDCEA">
                                 <p class="titleinfigure">图1-7创建多数据源</p><img src="img/create_multi_ds.jpg" alt="下面是图1-7的描述" title="下面是图1-7的描述" longdesc="img_text/create_multi_ds.html"><br><a href="img_text/create_multi_ds.html">“图1-7创建多数据源”的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>输入任何必要的信息。例如：</p>
                              <ol type="a">
                                 <li>
                                    <p><span class="bold">数据源属性</span> ：将<span class="bold">数据源名称</span>指定为<code class="codeph">mvdemo</code> ，将J <span class="bold">NDI名称指定</span>为<code class="codeph">jdbc/mvdemo</code> ，将<span class="bold">算法类型指定</span>为<code class="codeph">Failover</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">选择目标</span> ：在<span class="bold">名称</span>下选择（选中） <code class="codeph">map_viewer1</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">选择数据源类型</span> ：接受默认值（ <code class="codeph">non-XA Driver</code> ）。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">创建新数据源”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>指定第一个数据源节点的属性，例如： <span class="bold">名称</span> ： <code class="codeph">mvdemo-rac0</code> ， <span class="bold">JNDI名称</span> ： <code class="codeph">jdbc/mvdemo-rac0</code> ， <span class="bold">数据库类型</span> ： <code class="codeph">Oracle</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>对于<span class="bold">数据库驱动程序</span> ，请<code class="codeph">Oracle's Driver (Thin) for Oracle RAC Service-Instance connections: Versions: Any</code>选择<code class="codeph">Oracle's Driver (Thin) for Oracle RAC Service-Instance connections: Versions: Any</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>接受默认值（ <code class="codeph">Supports Global Transactions</code>和<code class="codeph">One-Phase Commit</code> ）。
                                    </p>
                                 </li>
                                 <li>
                                    <p>定义节点1的连接属性。提供服务名称，数据库名称，主机名，端口，数据库用户名，密码和协议的值。</p>
                                 </li>
                                 <li>
                                    <p>验证属性，然后单击“ <span class="bold">测试配置”</span> 。如果成功，请单击“ <span class="bold">下一步”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>选择（选中）部署了地图可视化工具的服务器（ <code class="codeph">map_viewer1</code> ），然后单击“ <span class="bold">完成”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在下一页上，单击“ <span class="bold">创建新数据源”</span>以创建和配置第二个节点。
                                    </p>
                                 </li>
                                 <li>
                                    <p>指定第二个数据源节点的属性，例如： <span class="bold">名称</span> ： <code class="codeph">mvdemo-rac1</code> ， <span class="bold">JNDI名称</span> ： <code class="codeph">jdbc/mvdemo-rac1</code> ， <span class="bold">数据库类型</span> ： <code class="codeph">Oracle</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>对于<span class="bold">数据库驱动程序</span> ，请<code class="codeph">Oracle's Driver (Thin) for Oracle RAC Service-Instance connections: Versions: Any</code>选择<code class="codeph">Oracle's Driver (Thin) for Oracle RAC Service-Instance connections: Versions: Any</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>接受默认值（ <code class="codeph">Supports Global Transactions</code>和<code class="codeph">One-Phase Commit</code> ）。
                                    </p>
                                 </li>
                                 <li>
                                    <p>定义节点2的连接属性。提供服务名称，数据库名称，主机名，端口，数据库用户名，密码和协议的值。</p>
                                 </li>
                                 <li>
                                    <p>验证属性，然后单击“ <span class="bold">测试配置”</span> 。如果成功，请单击“ <span class="bold">下一步”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>选择（选中）部署了地图可视化工具的服务器（ <code class="codeph">map_viewer1</code> ），然后单击“ <span class="bold">完成”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果需要添加更多节点，请单击“创建新数据源”并以与以前相同的方式创建每个节点。</p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">为Map Visualizer服务器创建Container Oracle RAC数据源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10065"></a><div class="props_rev_3"><a id="GUID-AF239C28-1F62-4C07-81AF-B2BD43C96485" name="GUID-AF239C28-1F62-4C07-81AF-B2BD43C96485"></a><h5 id="JIMPV-GUID-AF239C28-1F62-4C07-81AF-B2BD43C96485" class="sect5"><span class="enumeration_section">1.6.1.2</span>使用容器数据源创建Map Visualizer数据源</h5>
                     <div>
                        <p>在地图可视化工具容器中<a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD">创建</a>容器数据源（在<a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD">创建容器Oracle RAC数据源中进行了解释</a> ）之后，创建一个新的地图可视化工具数据源，通过在地图可视化工具数据中添加<code class="codeph">container_ds</code>属性，使其能够连接到Oracle RAC数据库资源。例如：</p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name =“mvdemo” <span class="bold">container_ds =“jdbc / mvdemo”</span> number_of_mappers =“7”/&gt;</pre><p>在前面的示例中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">name</code>属性指定地图可视化工具数据源名称，这是地图请求所必需的。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">container_ds</code>属性的值必须与您在“创建新JDBC数据源”向导的“数据源属性”页面上指定的JNDI名称匹配。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">number_of_mappers</code>属性指定可以定位此数据源的最大支持并发映射请求数。
                              </p>
                           </li>
                        </ul>
                        <p>有关这些属性的更多信息，请参阅<a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">定义永久映射数据源</a> 。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">为Map Visualizer服务器创建Container Oracle RAC数据源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9514"></a><div class="props_rev_3"><a id="GUID-1AD38B02-674B-44DA-8536-7A4D11812C00" name="GUID-1AD38B02-674B-44DA-8536-7A4D11812C00"></a><h4 id="JIMPV-GUID-1AD38B02-674B-44DA-8536-7A4D11812C00" class="sect4"><span class="enumeration_section">1.6.2</span>使用Oracle RAC服务名创建Map Visualizer数据源</h4>
                  <div>
                     <p>作为创建JDBC容器数据源以与map可视化工具配置文件中的<code class="codeph">container_ds</code>属性一起使用的替代方法（如<a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">为Map Visualizer服务器创建容器Oracle RAC数据源中所述</a> ），您可以直接创建地图可视化工具数据源。通过指定Oracle RAC数据服务的连接参数来映射可视化程序配置文件。（此类连接仅适用于Oracle Database Release 11.2及更高版本。）例如：</p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name =“mvdemo”jdbc_host =“rac.mycompany.com”jdbc_sid =“// srv.mycompany.com”jdbc_port =“1521”jdbc_user =“mvdemo”jdbc_password =“！mypassword“jdbc_mode =”thin“number_of_mappers =”8“allow_jdbc_theme_based_foi =”true“editable =”false“/&gt;</pre><p>在前面的示例中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">jdbc_host</code>属性必须是Oracle RAC SCAN IP地址或主机名。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">jdbc_sid</code>属性（请注意j <code class="codeph">dbc_sid="//srv.mycompany.com"</code>的前导<code class="codeph">//</code>字符）指定Oracle RAC数据库服务名称，而不是SID值。
                           </p>
                        </li>
                     </ul>
                     <p>有关此示例中的属性的更多信息，请参阅<a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">定义永久映射数据源</a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15" title="当数据库是Oracle Real Application Cluster（Oracle RAC）时，您可以使用以下任一选项连接到Oracle RAC数据库。">Oracle Real Application Clusters和Map Visualizer</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV10066"></a><div class="props_rev_3"><a id="GUID-9B0D09B9-8867-486E-A575-3853C7134527" name="GUID-9B0D09B9-8867-486E-A575-3853C7134527"></a><h4 id="JIMPV-GUID-9B0D09B9-8867-486E-A575-3853C7134527" class="sect4"><span class="enumeration_section">1.6.3</span>重新启动Map Visualizer</h4>
                  <div>
                     <p>执行<a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">为Map Visualizer服务器创建容器Oracle RAC数据源</a>或<a href="introduction-to-map-visualization-component.html#GUID-1AD38B02-674B-44DA-8536-7A4D11812C00">创建Map Visualizer数据源之后的说明使用Oracle RAC服务名称后</a> ，必须重新启动地图可视化工具才能使新创建的数据源生效。
                     </p>
                     <p>重新启动地图可视化工具后，每当您从数据源请求地图时，地图可视化工具都会获得必要的数据库连接（如果您选择了<a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">为Map Visualizer服务器创建容器Oracle RAC数据源中</a>的选项，则从容器中获取，或者如果您选择<a href="introduction-to-map-visualization-component.html#GUID-1AD38B02-674B-44DA-8536-7A4D11812C00">使用Oracle RAC服务名称创建Map Visualizer数据源中</a>的选项，则直接从连接参数中<a href="introduction-to-map-visualization-component.html#GUID-1AD38B02-674B-44DA-8536-7A4D11812C00">获取</a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15" title="当数据库是Oracle Real Application Cluster（Oracle RAC）时，您可以使用以下任一选项连接到Oracle RAC数据库。">Oracle Real Application Clusters和Map Visualizer</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9515"></a><div class="props_rev_3"><a id="GUID-B1C71001-5981-45E1-8B2E-986D53251A60" name="GUID-B1C71001-5981-45E1-8B2E-986D53251A60"></a><h3 id="JIMPV-GUID-B1C71001-5981-45E1-8B2E-986D53251A60" class="sect3"><span class="enumeration_section">1.7</span>高可用性和Map Visualizer（仅限WebLogic Server）</h3>
               <div>
                  <p>用户可以从Oracle WebLogic Server的高可用性功能中受益。</p>
                  <div class="infoboxnote" id="GUID-B1C71001-5981-45E1-8B2E-986D53251A60__GUID-254EFAE9-2FC2-4CF4-9370-0309367485D5">
                     <p class="notep1">注意：</p>
                     <p>本节适用于希望通过地图可视化工具充分利用高可用性功能的高级用户。您必须深入了解高可用性功能，这些功能在“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/jimpv&amp;id=ASHIA" target="_blank"><span class="italic">Oracle融合中间件高可用性指南”中</span></a>有所描述。
                     </p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-69E6991D-A5AD-49F8-B994-989DEBF92DAB">在中间层集群上部署Map Visualizer</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="Oracle Spatial and Graph地图可视化组件（有时称为可视化组件）是一种可编程工具，用于使用Oracle Spatial and Graph管理的空间数据渲染地图。">地图可视化组件简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9517"></a><div class="props_rev_3"><a id="GUID-69E6991D-A5AD-49F8-B994-989DEBF92DAB" name="GUID-69E6991D-A5AD-49F8-B994-989DEBF92DAB"></a><h4 id="JIMPV-GUID-69E6991D-A5AD-49F8-B994-989DEBF92DAB" class="sect4"><span class="enumeration_section">1.7.1</span>在中间层集群上部署Map Visualizer</h4>
                  <div>
                     <p>可以将地图可视化工具部署到WebLogic Server群集。但是，您必须注意客户端应用程序如何通过URL命名和引用每个主机上生成的映像文件。</p>
                     <p>请考虑以下示例场景。当地图请求发送到前端Web服务器时，它到达在主机A上运行的地图可视化服务器。主机A上的地图可视化器然后发回生成的地图图像的URL，然后客户端发送第二个请求以获取实际形象。运行在主机B上的WebLogic Server可能会收到第二个请求，该主机没有这样的图像（或者会发回一个具有相同名称的错误图像）。</p>
                     <p><a id="d2937e3714" class="indexterm-anchor"></a>在所有环境中，没有针对此问题的单一最佳解决方案。一种选择是让主机共享公共网络存储，以便地图图像由运行在不同主机上的不同地图可视化服务器存放在相同的虚拟（联网）文件系统中。您必须为每个地图可视化工具实例配置地图文件存储信息（请参阅<a href="introduction-to-map-visualization-component.html#GUID-82293405-04DB-4226-9A33-FC5692AC44AB">指定地图文件存储和生命周期信息</a> ），以便将图像存放在不同的子目录中，或者使它们具有不同的文件前缀。否则，多个映射可视化服务器生成的映像文件可能会在磁盘上相互覆盖。通过正确配置映射文件存储信息，可以确保发送回客户端的每个URL唯一地标识网络驱动器上的正确映射。
                     </p>
                     <p><a id="d2937e3723" class="indexterm-anchor"></a>如果无法使用网络驱动器，请考虑使用负载平衡器。您可能首先需要为每个地图可视化工具实例配置地图文件存储信息（如前一段中所述），以便每个地图可视化工具实例使用适当的方案命名其生成的图像以确保唯一性。然后，您可以在负载均衡器中指定规则，以便在URL与特定模式匹配时将映像请求重定向到某个主机，例如包含指定的映射图像文件前缀。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-B1C71001-5981-45E1-8B2E-986D53251A60" title="用户可以从Oracle WebLogic Server的高可用性功能中受益。">高可用性和Map Visualizer（仅限WebLogic Server）</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9518"></a><div class="props_rev_3"><a id="GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" name="GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879"></a><h3 id="JIMPV-GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" class="sect3"><span class="enumeration_section">1.8</span>安全地图渲染</h3>
               <div>
                  <p>您可以基于Web用户的身份实现安全的地图呈现。</p>
                  <p>具有不同角色或权限的用户在查看同一主题时将看到不同的功能集。基本思想是，只要访问任何主题的数据库，地图可视化工具将始终调用指定的PL / SQL包，以在数据库中设置Web用户的身份。数据库可以使用此用户信息来强制执行数据访问控制。</p>
                  <div class="infoboxnote" id="GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879__GUID-BA9BB183-BF67-4F51-BF7B-30FC2000F3A4">
                     <p class="notep1">注意：</p>
                     <p>在本节中，术语“ <span class="italic">用户”</span>和“经过<span class="italic">身份验证的用户”</span>是指登录Oracle Fusion Middleware或Oracle Single Sign-On（SSO）的应用程序或Web用户。它是<span class="italic">不</span>一样的数据库用户。地图可视化工具本身将直接连接到存储所有地理空间数据的数据库模式。
                     </p>
                  </div>
                  <p>地图可视化工具将直接连接到存储所有地理空间数据的数据库模式。要对此架构中的数据强制执行映射可视化工具的访问控制，必须执行以下步骤：</p>
                  <ol>
                     <li>
                        <p>在数据库模式中创建PL / SQL包。该包必须至少有两个命名过程： <code class="codeph">set_user(username)</code>和<code class="codeph">clear_user()</code> 。
                        </p>
                     </li>
                     <li>
                        <p>根据存储在PL / SQL包中的用户标识（由地图可视化工具通过每个数据库会话的set_user过程设置）创建视图，设置对数据库对象的访问权限以及执行其他任务。</p>
                     </li>
                     <li>
                        <p>为模式创建一个map visualizer数据源，提供PL / SQL包的名称作为数据源定义的一部分。这被认为是安全的数据源。</p>
                     </li>
                     <li>
                        <p>创建基于步骤2中创建的视图的地图可视化工具主题。</p>
                     </li>
                     <li>
                        <p>为访问地图可视化工具应用程序页面的用户建立Web身份验证，以便在地图请求到达地图可视化器servlet时，Web会话对象应包含经过身份验证的用户的身份。</p>
                     </li>
                     <li>
                        <p>问题地图和FOI（感兴趣的特征）请求，可直接或通过使用基本地图和Oracle地图查看步骤4中定义的主题。</p>
                        <p>在对这些主题执行任何查询之前，地图可视化工具将使用PL / SQL包自动将用户标识传递到数据库。只有那些对于标识的用户可见的行才会从数据库返回并由地图可视化工具呈现。</p>
                     </li>
                  </ol>
                  <p><a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19">安全地图渲染的工作</a>原理解释了安全地图渲染的工作原理，并提供了实施细节和示例。<a href="introduction-to-map-visualization-component.html#GUID-505739B5-794D-4342-B3FA-4CA7F61786A1">验证用户：选项和演示</a>描述了一些用于验证用户的选项，并参考了提供的演示。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19">安全地图渲染的工作原理</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2">从Cookie获取用户名</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-505739B5-794D-4342-B3FA-4CA7F61786A1">验证用户：选项和演示</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="Oracle Spatial and Graph地图可视化组件（有时称为可视化组件）是一种可编程工具，用于使用Oracle Spatial and Graph管理的空间数据渲染地图。">地图可视化组件简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9520"></a><a id="JIMPV9521"></a><a id="JIMPV9522"></a><a id="JIMPV9519"></a><div class="props_rev_3"><a id="GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19" name="GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19"></a><h4 id="JIMPV-GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19" class="sect4"><span class="enumeration_section">1.8.1</span>安全地图渲染的工作原理</h4>
                  <div>
                     <p>地图可视化工具作为Java EE应用程序，可以获取已通过Oracle融合中间件或Oracle单点登录（SSO）认证的Web用户的身份。然后可以保留该用户信息并将其传播到数据库，其中可以基于用户身份建立对地图层和表的安全访问。例如，数据库管理员（DBA）可以创建基表的视图，该视图仅选择特定用户可见的空间特征。</p>
                     <p>要将Web用户标识从Oracle Fusion Middleware或Oracle Single Sign-On（SSO）传递到数据库，请使用安全的PL / SQL程序包在数据库中设置用户标识。此PL / SQL包由DBA或应用程序开发人员创建，并安装在数据源模式中。这样的包可以有任意数量的过程和函数，但它必须至少包含以下两个过程：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">set_user（用户名）</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">clear_user（）</code></p>
                        </li>
                     </ul>
                     <p>每当从安全数据源请求主题时，地图可视化工具在执行主题的任何数据查询之前调用关联的PL / SQL包中的<code class="codeph">set_user</code>过程，并在主题的查询过程完成时调用<code class="codeph">clear_user</code>过程。 。
                     </p>
                     <p>安装PL / SQL包之后，可以使用<code class="codeph">plsql_package</code>属性将此包的名称作为数据源定义的一部分传递给map可视化<code class="codeph">plsql_package</code> ，如<a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHEJDHH">例1-5</a>所示。
                     </p>
                     <p>在数据源定义中指定PL / SQL包名称时，地图可视化工具将数据源标记为安全数据源，并且每当对数据源执行任何主题查询时，它都会自动调用包的<code class="codeph">set_user</code>和<code class="codeph">clear_user</code>过程。
                     </p>
                     <div class="example" id="GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHCBJGJ">
                        <p class="titleinexample">示例1-3用于安全地图渲染的PL / SQL包</p>
                        <p><a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHCBJGJ">示例1-3</a>显示了可用于安全地图呈现的PL / SQL包。您可以在示例MVDEMO架构中创建此包。
                        </p>
                        <p>在<a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHCBJGJ">示例1-3中</a> ，set_user和clear_user是两个必需的方法，get_user是一个便捷函数，可用于创建视图或用于其他数据访问控制目的</p>
                        <p>在创建程序包（基本上包含当前数据库会话的用户标识）之后，您可以设置使用此用户信息的精细虚拟专用数据库（有关使用Oracle虚拟专用数据库或VPD的信息，请参阅<a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG007" target="_blank"><span class="italic">Oracle数据库安全指南）</span></a> ）。但是，为简单起见，本节不讨论VPD创建，但表明您可以创建使用此用户信息来强制执行数据访问控制的视图。
                        </p>
                        <p>例如，在示例MVDEMO架构中，您可以将名为ACCOUNT_MGR的列添加到现有CUSTOMERS表中，并为存储在此表中的每个客户分配一个帐户管理器。然后，您可以创建一个仅返回特定客户经理的客户行的视图，如<a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHJDBFB">示例1-4</a>所示。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换包装web_user_info AS PROCEDURE set_user（p_name IN VARCHAR2）;程序clear_user;功能get_user RETURN VARCHAR2;结束;创建或替换包装体web_user_info AS w_name VARCHAR2（32767）; PROCEDURE set_user（p_name IN VARCHAR2）AS BEGIN w_name：= LOWER（p_name）;结束;程序clear_user AS BEGIN w_name：= null;结束; FUNCTION get_user RETURN VARCHAR2 AS BEGIN RETURN w_name;结束;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHJDBFB">
                        <p class="titleinexample">示例1-4安全地图渲染视图</p><pre class="oac_no_warn" dir="ltr">创建或替换视图customers_view AS SELECT * FROM customers WHERE account_mgr = web_user_info.get_user;</pre><p>您现在可以基于此视图定义地图可视化工具主题，以便每当客户经理登录并想要在地图上查看客户数据时，每个人都只能看到他或她自己的客户。</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHEJDHH">
                        <p class="titleinexample">示例1-5安全地图渲染的数据源定义</p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name =“mvdemo”jdbc_host =“system32.example.com”jdbc_sid =“mv”jdbc_port =“15214”jdbc_user =“mvdemo”jdbc_password =“ <span class="italic">password</span> ”jdbc_mode =“thin”number_of_mappers =“3”allow_jdbc_theme_based_foi =“true “ <span class="bold">plsql_package =”web_user_info“</span> /&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" title="您可以基于Web用户的身份实现安全的地图呈现。">安全地图呈现</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9524"></a><a id="JIMPV9523"></a><div class="props_rev_3"><a id="GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2" name="GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2"></a><h4 id="JIMPV-GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2" class="sect4"><span class="enumeration_section">1.8.2</span>从Cookie中获取用户名</h4>
                  <div>
                     <p>有时，经过身份验证的用户名称不会通过Java EE或OSSO会话传递给地图可视化工具。例如，当您在Application Express（APEX）中集成地图可视化工具时，APEX执行身份验证，并且通过Java EE或OSSO会话无法使用用户名。为了使您能够解决此问题，地图可视化工具还支持从cookie中获取用户名。您有责任在APEX中设置cookie以保存经过身份验证的用户名。</p>
                     <p>要确保map可视化工具从命名cookie中获取用户名，必须在数据源定义中指定<code class="codeph">web_user_type</code>属性（除了必需的<code class="codeph">plsql_package</code>属性）。例如，如果您希望地图可视化工具从名为MON_USER的cookie中获取用户名，则您的安全数据源定义应如<a href="introduction-to-map-visualization-component.html#GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2__BEHHCICC">示例1-6所示</a> 。
                     </p>
                     <div class="example" id="GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2__BEHHCICC">
                        <p class="titleinexample">示例1-6数据源定义指定Cookie名称</p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name =“mvdemo”jdbc_host =“system32.example.com”jdbc_sid =“mv”jdbc_port =“25650”jdbc_user =“mvdemo”jdbc_password =“LfCDQ6NH59nuV7zbeY5QY06sqN7XhiUQ”jdbc_mode =“thin”number_of_mappers =“3”allow_jdbc_theme_based_foi =“true “plsql_package =”web_user_info“ <span class="bold">web_user_type =”MON_USER“</span> /&gt;</pre><p><code class="codeph">web_user_type</code>属性的可能值为：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">J2EE_USER</code> ：告诉map可视化工具从Java EE会话中获取经过身份验证的用户名</p>
                           </li>
                           <li>
                              <p><code class="codeph">OSSO_USER</code> ：告诉地图可视化工具从OSSO会话中获取经过身份验证的用户。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">&lt;cookie-name&gt;</code></span> ：告诉地图可视化工具从具有指定名称的cookie中获取经过身份验证的用户。Cookie名称不区分大小写。
                              </p>
                           </li>
                        </ul>
                        <p>如果未指定<code class="codeph">web_user_type</code> ，则地图可视化工具首先在Java EE会话中查找用户名;如果未找到，则在OSSO会话中查找用户名（如果存在）。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" title="您可以基于Web用户的身份实现安全的地图呈现。">安全地图呈现</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9525"></a><div class="props_rev_3"><a id="GUID-505739B5-794D-4342-B3FA-4CA7F61786A1" name="GUID-505739B5-794D-4342-B3FA-4CA7F61786A1"></a><h4 id="JIMPV-GUID-505739B5-794D-4342-B3FA-4CA7F61786A1" class="sect4"><span class="enumeration_section">1.8.3</span>验证用户：选项和演示</h4>
                  <div>
                     <p>用户身份验证的方式，时间和位置取决于应用程序的要求和安装的设置。例如，您的选项包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将地图可视化工具部署为企业门户网站的一部分，以便最终用户在通过地图可视化工具执行任何映射功能之前始终首先登录到门户网站。</p>
                        </li>
                        <li>
                           <p>在单独的系统上部署地图可视化工具，并让用户向中央Oracle SSO服务器进行身份验证。</p>
                        </li>
                     </ul>
                     <p>只要到达地图可视化工具的HTTP请求包含经过身份验证的用户信息，地图可视化工具就能够将请求传递到数据库，并且安全数据访问方法将按预期工作。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" title="您可以基于Web用户的身份实现安全的地图呈现。">安全地图呈现</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9526"></a><div class="props_rev_3"><a id="GUID-93D5B57C-ED0A-4574-9149-A76CAEBD344D" name="GUID-93D5B57C-ED0A-4574-9149-A76CAEBD344D"></a><h3 id="JIMPV-GUID-93D5B57C-ED0A-4574-9149-A76CAEBD344D" class="sect3"><span class="enumeration_section">1.9</span> Map Visualizer演示和教程</h3>
               <div>
                  <p>几个地图可视化器演示和教程包含在名为<code class="codeph">mvdemo.ear</code>的单独应用程序存档中，并部署到部署了<code class="codeph">mapviewer.ear</code>的同一Java EE容器中。
                  </p>
                  <p>部署完成后，可以从以下格式的URL访问演示和教程： <code class="codeph">http://</code> <span class="italic"><code class="codeph">host:port</code></span> <code class="codeph">/mvdemo/</code></p>
                  <p>另请参阅以下资源：</p><pre class="oac_no_warn" dir="ltr"><a href="http://www.oracle.com/technetwork/middleware/mapviewer/downloads/" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/middleware/mapviewer/downloads/</code></a></pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="Oracle Spatial and Graph地图可视化组件（有时称为可视化组件）是一种可编程工具，用于使用Oracle Spatial and Graph管理的空间数据渲染地图。">地图可视化组件简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
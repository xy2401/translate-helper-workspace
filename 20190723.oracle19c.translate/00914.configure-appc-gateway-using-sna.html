<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用SNA通信协议配置网关</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Installation and Configuration Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Installation and Configuration Guide for Microsoft Windows"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-appc-installation-and-configuration-guide-microsoft-windows.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T19:10:00-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18240-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="appc-gateway-configure-oltp.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configure-appc-gateway-using-tcp-ip.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows"></meta>
    <meta name="dcterms.isVersionOf" content="APPCW"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="appc-gateway-configure-oltp.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configure-appc-gateway-using-tcp-ip.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安装和配置指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用SNA通信协议配置网关</li>
            </ol>
            <a id="GUID-D5DF29FD-80BA-4E55-831D-D9CBD826E413" name="GUID-D5DF29FD-80BA-4E55-831D-D9CBD826E413"></a><a id="APPCW192"></a>
            
            <h2 id="APPCW-GUID-D5DF29FD-80BA-4E55-831D-D9CBD826E413" class="sect2"><span class="enumeration_chapter">8</span>使用SNA通信协议配置网关</h2>
         </header>
         <div class="ind">
            <div>
               <p>以下主题概述了在Microsoft Windows平台上使用SNA协议为网关配置Oracle数据库所需的步骤。如果您选择实现它，它们将向您展示如何配置commit-confirm。这些主题还提供了验证网关组件的安装和配置的步骤，包括可选的commit-confirm。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="configure-appc-gateway-using-sna.html#GUID-F913CE5A-572C-4C9B-A4F0-2EB4AA3631F4">在你开始之前</a></p>
                  </li>
                  <li>
                     <p><a href="configure-appc-gateway-using-sna.html#GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09">准备配置网关安装/升级</a></p>
                  </li>
                  <li>
                     <p><a href="configure-appc-gateway-using-sna.html#GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D">集成服务器配置：首次网关安装</a></p>
                  </li>
                  <li>
                     <p><a href="configure-appc-gateway-using-sna.html#GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154">从以前的网关升级或迁移Oracle数据库</a></p>
                  </li>
                  <li>
                     <p><a href="configure-appc-gateway-using-sna.html#GUID-40EEFA66-1FCB-47BB-9EFF-EE6B25B97D5F">配置Oracle数据库网关共存</a></p>
                  </li>
                  <li>
                     <p><a href="configure-appc-gateway-using-sna.html#GUID-C750A196-5039-4370-99ED-0EB71862A930">允许多个用户的可选配置步骤</a></p>
                  </li>
                  <li>
                     <p><a href="configure-appc-gateway-using-sna.html#GUID-383121C7-26B7-4869-9C28-D9E83EAB79EA">配置网关</a></p>
                  </li>
                  <li>
                     <p><a href="configure-appc-gateway-using-sna.html#GUID-D2D24B90-BD74-455C-98B5-08B35261CF06">配置提交确认</a></p>
                  </li>
                  <li>
                     <p><a href="configure-appc-gateway-using-sna.html#GUID-04DFBC73-2DC5-437C-83F5-CB679F20C35C">验证网关安装和OLTP配置</a></p>
                  </li>
                  <li>
                     <p><a href="configure-appc-gateway-using-sna.html#GUID-04B54C37-0458-4E94-BA62-D00F2F823AFD">执行安装后程序</a></p>
                  </li>
               </ul>
               <p><a id="d8806e82" class="indexterm-anchor"></a><a id="d8806e86" class="indexterm-anchor"></a><a id="d8806e90" class="indexterm-anchor"></a>使用SNA为APPC配置Oracle数据库网关涉及使用以下组件：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>Oracle数据库</p>
                  </li>
                  <li>
                     <p>您的Microsoft Windows系统</p>
                  </li>
                  <li>
                     <p>你的网络</p>
                  </li>
                  <li>
                     <p>OLTP</p>
                  </li>
               </ul>
            </div><a id="APPCW193"></a><div class="props_rev_3"><a id="GUID-F913CE5A-572C-4C9B-A4F0-2EB4AA3631F4" name="GUID-F913CE5A-572C-4C9B-A4F0-2EB4AA3631F4"></a><h3 id="APPCW-GUID-F913CE5A-572C-4C9B-A4F0-2EB4AA3631F4" class="sect3">在你开始之前</h3>
               <div>
                  <p>以下主题要求您输入系统特有的参数，以便正确配置网关和SNA通信接口。</p>
                  <p>有关列出完成配置过程之前需要了解的安装参数的工作<a href="appc-gateway-configuration-worksheet.html#GUID-96B6C85D-6B37-42C7-ADE0-5752F46AF88A">表</a> ，请参阅<a href="appc-gateway-configuration-worksheet.html#GUID-96B6C85D-6B37-42C7-ADE0-5752F46AF88A">配置工作</a>表。在开始之前，请让网络管理员为您提供这些唯一的参数名称。
                  </p>
               </div>
            </div><a id="APPCW318"></a><a id="APPCW319"></a><a id="APPCW320"></a><a id="APPCW194"></a><div class="props_rev_3"><a id="GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09" name="GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09"></a><h3 id="APPCW-GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09" class="sect3">准备配置网关安装/升级</h3>
               <div>
                  <div class="section">
                     <p>在安装或升级/迁移网关时，有三种方法可以建立网关 -  Oracle数据库关系：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="configure-appc-gateway-using-sna.html#GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__I1012371">当Oracle数据库和网关安装在同一台机器上的同一ORACLE_HOME中时</a></p>
                        </li>
                        <li>
                           <p><a href="configure-appc-gateway-using-sna.html#GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__I1012376">当Oracle数据库和网关安装在不同的计算机上时</a></p>
                        </li>
                        <li>
                           <p><a href="configure-appc-gateway-using-sna.html#GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__I1012381">当Oracle数据库和网关位于同一台计算机上但位于不同目录中时</a></p>
                        </li>
                     </ul>
                     <p><a id="d8806e200" class="indexterm-anchor"></a><a id="d8806e204" class="indexterm-anchor"></a><a id="d8806e208" class="indexterm-anchor"></a>根据网关和Oracle数据库的位置，您可能需要将某些网关管理文件传输到安装Oracle数据库的位置。
                     </p>
                     <p>按照适合您下面列出的网关-Oracle数据库位置组合的说明进行操作。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__I1012371">
                     <p class="subhead2" id="GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__GUID-15DEE0DB-B745-4763-AC1C-83EBEC27E034">当Oracle数据库和网关安装在同一台机器上的同一ORACLE_HOME中时</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您不需要传输文件。继续<span class="q">“ <a href="configure-appc-gateway-using-sna.html#GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D">集成服务器配置：首次网关安装</a> ”</span> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__I1012376">
                     <p class="subhead2" id="GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__GUID-9336CDD2-E9EA-4653-8674-50A8B1B07525">当Oracle数据库和网关安装在不同的计算机上时</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ol>
                        <li>
                           <p>在网关<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中找到网关管理文件。必须将此目录中具有后缀<code class="codeph">.sql</code> ， <code class="codeph">.pkh</code>和<code class="codeph">.pkb</code>所有文件复制到Oracle数据库的Oracle主目录中具有类似名称的目录中。
                           </p>
                        </li>
                        <li>
                           <p>现在，在网关的<code class="codeph">%ORACLE_HOME%\dg4appc\demo</code>目录中找到网关演示文件和子目录。将<code class="codeph">pgavsn.sql</code>和<code class="codeph">pgaecho.sql</code>文件复制到Oracle数据库中名称相似的目录中。
                           </p>
                        </li>
                        <li>
                           <p>在远程主机上复制与已安装的OLTP相关的其他子目录和文件。例如，如果您将CICS作为唯一的OLTP，则将网关<code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS</code>文件复制到Oracle数据库中名称相似的目录中。
                           </p>
                           <div class="infoboxnote" id="GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__GUID-054CB851-EC5F-4AF8-B746-BAB2A66BEDAD">
                              <p class="notep1">注意：</p>
                              <p>在从<code class="codeph">%ORACLE_HOME%\dg4appc\demo</code>目录传输文件之前，请确保已生成所需的TIP。您还需要转移TIP。
                              </p>
                              <p>有关使用PGAU生成TIP的信息，请参阅“ <a href="../appug/pga-utility-oracle-database-gateway-appc.html#APPUG200" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南”</span></a> 。</p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__I1012381">
                     <p class="subhead2" id="GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__GUID-9A1A110B-6FEB-43AF-8253-3288583148BA">当Oracle数据库和网关位于同一台计算机上但位于不同目录中时</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您必须将网关的Oracle主目录更改为Oracle数据库的Oracle主目录。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>例如，如果您的网关的Oracle主目录设置如下：</span><div><pre class="oac_no_warn" dir="ltr">C：\&gt; echo％ORACLE_HOME％C：\ oracle \ pga \ 12.2</pre><p>并且您的服务器的Oracle主目录位于<code class="codeph">\oracle\pga\12.2</code>目录中，然后您需要执行以下操作：</p><pre class="oac_no_warn" dir="ltr">C：\&gt; SET ORACLE_HOME = C：\ oracle \ pga \ 12.2</pre></div>
                     </li>
                     <li class="stepexpand"><span>现在使用以下命令创建目录：</span><div><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％C：\&gt; mkdir dg4appc C：\&gt; mkdir dg4appc \ admin</pre></div>
                     </li>
                     <li class="stepexpand"><span>使用系统上可用的任何文件传输机制将所有<code class="codeph">.sql</code> ， <code class="codeph">.pkh</code>和<code class="codeph">.pkb</code>文件从网关Oracle主目录<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>到Oracle数据库的Oracle主目录<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录。</span></li>
                     <li class="stepexpand"><span>您还可以将演示文件从网关目录传输到Oracle数据库目录。将文件和目录以递归方式从网关Oracle主目录<code class="codeph">%ORACLE_HOME%\dg4appc\demo</code>目录<code class="codeph">%ORACLE_HOME%\dg4appc\demo</code>到Oracle数据库<code class="codeph">%ORACLE_HOME%\dg4appc\demo</code>目录。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc C：\&gt; mkdir \ demo C：\&gt; cd demo C：\&gt; xcopy C：\ oracle \ pga \ 12.2 \ demo / E / I / Q</pre><div class="infoboxnote" id="GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09__GUID-280FA1FD-CA80-468B-A6B6-F13E54B6ACC6">
                              <p class="notep1">注意：</p>
                              <p>在从<code class="codeph">%ORACLE_HOME%\dg4appc\demo</code>目录传输文件之前，请确保已生成所需的TIP。您还需要转移TIP。
                              </p>
                              <p>有关使用PGAU生成TIP的信息，请参阅“ <a href="../appug/pga-utility-oracle-database-gateway-appc.html#APPUG200" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南”</span></a> 。</p>
                           </div>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>如果这是首次安装，请继续<span class="q">“ <a href="configure-appc-gateway-using-sna.html#GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D">集成服务器配置：首次网关安装</a> ”</span> 。
                     </p>
                     <p>如果这是升级，请继续<span class="q">“ <a href="configure-appc-gateway-using-sna.html#GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154">从以前的网关升级或迁移Oracle数据库</a> ”</span> 。
                     </p>
                     <p>执行这些步骤后，您可能需要执行“ <a href="configure-appc-gateway-using-sna.html#GUID-C750A196-5039-4370-99ED-0EB71862A930">允许多个用户</a>的<a href="configure-appc-gateway-using-sna.html#GUID-C750A196-5039-4370-99ED-0EB71862A930">可选配置步骤”，“允许多个用户的</a> <a href="configure-appc-gateway-using-sna.html#GUID-C750A196-5039-4370-99ED-0EB71862A930">可选配置步骤”</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPCW195"></a><div class="props_rev_3"><a id="GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D" name="GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D"></a><h3 id="APPCW-GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D" class="sect3">集成服务器配置：首次网关安装</h3>
               <div>
                  <div class="section">
                     <p>请按照以下步骤配置您的<a id="d8806e407" class="indexterm-anchor"></a> Oracle数据库，如果您是第一次安装Oracle Database Gateway for APPC：</p>
                     <ol>
                        <li>
                           <p>确保<a id="d8806e418" class="indexterm-anchor"></a><a id="d8806e420" class="indexterm-anchor"></a><a id="d8806e424" class="indexterm-anchor"></a>您的Oracle数据库上已安装<code class="codeph">UTL_RAW</code> PL / SQL包。<a id="d8806e433" class="indexterm-anchor"></a><a id="d8806e439" class="indexterm-anchor"></a>所有PGAU生成的TIP规范都使用<code class="codeph">UTL_RAW</code> ，它提供了操作原始数据的例程。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>使用<a id="d8806e451" class="indexterm-anchor"></a> SQL * Plus以用户<code class="codeph">SYS</code>身份连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，输入以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DESCRIBE UTL_RAW</pre><p><code class="codeph">DESCRIBE</code>语句在屏幕上生成输出。如果浏览输出，则应该看到一些函数，包括比较函数。如果没有看到此输出，请执行步骤<code class="codeph">UTL_RAW</code>继续安装<code class="codeph">UTL_RAW</code>下面。
                                 </p>
                                 <p>如果<a id="d8806e474" class="indexterm-anchor"></a><a id="d8806e478" class="indexterm-anchor"></a> <code class="codeph">DESCRIBE</code>语句表示成功，然后是Oracle数据库<a id="d8806e483" class="indexterm-anchor"></a> <code class="codeph">UTL_RAW</code>安装<code class="codeph">UTL_RAW</code> ，您可以继续执行步骤2。
                                 </p>
                              </li>
                              <li>
                                 <p>使用<a id="d8806e491" class="indexterm-anchor"></a> SQL * Plus以用户<code class="codeph">SYS</code>身份连接到Oracle数据库。</p>
                              </li>
                              <li id="GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D__I1009705">
                                 <p>从SQL * Plus，运行<a id="d8806e502" class="indexterm-anchor"></a><a id="d8806e506" class="indexterm-anchor"></a> utlraw.sql和<a id="d8806e511" class="indexterm-anchor"></a><a id="d8806e513" class="indexterm-anchor"></a> Oracle数据库的<code class="codeph">%ORACLE_HOME%\rdbms\admin</code>目录中的prvtrawb.plb脚本，顺序如下：</p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ rdbms \ admin SQL&gt; @ utlraw.sql SQL&gt; @ prvtrawb.plb</pre></li>
                           </ol>
                        </li>
                        <li id="GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D__I1009709">
                           <p>确保<a id="d8806e526" class="indexterm-anchor"></a><a id="d8806e528" class="indexterm-anchor"></a> <code class="codeph">DBMS_OUTPUT</code>标准PL / SQL <a id="d8806e535" class="indexterm-anchor"></a><a id="d8806e537" class="indexterm-anchor"></a><a id="d8806e541" class="indexterm-anchor"></a>包已启用<a id="d8806e546" class="indexterm-anchor"></a> Oracle数据库。分发介质上的示例程序和安装验证程序使用此标准程序包。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>如有必要，请使用SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，输入以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DESCRIBE DBMS_OUTPUT</pre></li>
                           </ol>
                           <p>该<a id="d8806e565" class="indexterm-anchor"></a><a id="d8806e569" class="indexterm-anchor"></a> <code class="codeph">DESCRIBE</code>语句在屏幕上生成输出。如果浏览该输出，您应该看到一些功能，包括a <a id="d8806e576" class="indexterm-anchor"></a><a id="d8806e578" class="indexterm-anchor"></a> put_line函数。
                           </p>
                           <p>如果没有看到此输出，则必须创建<code class="codeph">DBMS_OUTPUT</code>包。有关创建<code class="codeph">DBMS_OUTPUT</code>程序包的更多信息，请参阅<a href="../arpls/DBMS_OUTPUT.html#ARPLS036" target="_blank"><span class="italic">Oracle Database PL / SQL程序包和类型参考</span></a> 。成功安装<code class="codeph">DBMS_OUTPUT</code>包后，发出<code class="codeph">DESCRIBE</code>语句。
                           </p>
                           <p>如果<code class="codeph">DESCRIBE</code>语句指示成功，则Oracle数据库已创建<code class="codeph">DBMS_OUTPUT</code> ，您可以继续执行步骤3。
                           </p>
                        </li>
                        <li>
                           <p>安装<a id="d8806e613" class="indexterm-anchor"></a><a id="d8806e617" class="indexterm-anchor"></a> <code class="codeph">UTL_PG</code> PL / SQL包。所有<a id="d8806e624" class="indexterm-anchor"></a><a id="d8806e630" class="indexterm-anchor"></a> PGAU生成的TIP规范使用<code class="codeph">UTL_PG</code> ，它提供了与原始数据进行数字转换的例程。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>如有必要，请使用SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，运行<code class="codeph">utlpg.sql</code>和<a id="d8806e651" class="indexterm-anchor"></a><a id="d8806e655" class="indexterm-anchor"></a> Oracle数据库的<code class="codeph">%ORACLE_HOME%\rdbms\admin</code>目录中的<code class="codeph">prvtpgb.plb</code>脚本，顺序如下：</p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ rdbms \ admin SQL&gt; @ utlpg.sql SQL&gt; @ prvtpgb.plb</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>我安装了异构服务（HS）目录。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>如有必要，使用SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>输入以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DESCRIBE HS_FDS_CLASS</pre><p><code class="codeph">DESCRIBE</code>语句在屏幕上生成输出。如果<code class="codeph">DESCRIBE</code>语句指示成功，则已在Oracle数据库上创建异构服务目录，您可以继续执行步骤5.否则，仅在<code class="codeph">DESCRIBE</code>语句未指示成功时才执行下一步。下一步将创建异构服务目录。
                                 </p>
                              </li>
                              <li>
                                 <p>如果需要创建异构服务目录，请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ rdbms \ admin SQL&gt; @ caths.sql</pre></li>
                           </ol>
                        </li>
                        <li id="GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D__BGBGGAIG">
                           <p><a id="d8806e707" class="indexterm-anchor"></a><a id="d8806e711" class="indexterm-anchor"></a>创建公共数据库链接以访问Oracle Database Gateway for APPC： <a id="d8806e718" class="indexterm-anchor"></a> 
                           </p>
                           <p>使用<a id="d8806e725" class="indexterm-anchor"></a> SQL * Plus连接到<a id="d8806e730" class="indexterm-anchor"></a> Oracle数据库作为用户<code class="codeph">SYSTEM</code> 。您可以使用以下SQL * Plus <a id="d8806e736" class="indexterm-anchor"></a>表示Oracle数据库和网关是在同一系统上还是在不同系统上。在以下示例中， <code class="codeph">pgasrv</code>是<span class="italic"><code class="codeph">tns_name_entry</code></span> ，在您修改时将分配给网关<a id="d8806e749" class="indexterm-anchor"></a><a id="d8806e751" class="indexterm-anchor"></a> tnsnames.ora文件稍后。
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt;使用' <span class="italic">PGASRV</span> '创建公共数据库链接PGA</pre></li>
                        <li>
                           <p>创建网关管理员用户<a id="d8806e764" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code>并安装<a id="d8806e771" class="indexterm-anchor"></a> PG DD。</p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以用户<code class="codeph">SYSTEM</code>身份连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，运行pgacr8au.sql <a id="d8806e786" class="indexterm-anchor"></a><a id="d8806e788" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中的脚本。此脚本创建<code class="codeph">PGAADMIN</code>用户标识。</p>
                                 <p>定义的初始密码<a id="d8806e801" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code>是<code class="codeph">PGAADMIN</code> 。使用<a id="d8806e811" class="indexterm-anchor"></a><a id="d8806e813" class="indexterm-anchor"></a> <code class="codeph">ALTER USER</code>命令用于更改密码。有关密码问题的更多信息，请参阅<a href="../sqlrf/ALTER-USER.html#SQLRF01103" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                                 </p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ admin SQL&gt; @ pgacr8au.sql</pre></li>
                              <li>
                                 <p>使用SQL * Plus以用户<code class="codeph">PGAADMIN</code>连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，运行<code class="codeph">pgddcr8.sql</code> <a id="d8806e838" class="indexterm-anchor"></a><a id="d8806e840" class="indexterm-anchor"></a><a id="d8806e844" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中的脚本。此脚本安装PG DD。</p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ admin SQL&gt; @ pgddcr8.sql</pre></li>
                              <li>
                                 <p>从SQL * Plus，以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p><a id="d8806e862" class="indexterm-anchor"></a>授予执行权限<a id="d8806e867" class="indexterm-anchor"></a> <code class="codeph">DBMS_PIPE</code>到<code class="codeph">PGAADMIN</code> ：<a id="d8806e875" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">SQL&gt; GRANT EXECUTE DBMS_PIPE到PGAADMIN</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>安装<a id="d8806e884" class="indexterm-anchor"></a><a id="d8806e888" class="indexterm-anchor"></a> TIP跟踪访问PL / SQL例程。这些例程需要<a id="d8806e891" class="indexterm-anchor"></a> <code class="codeph">DBMS_PIPE</code>标准PL / SQL包<a id="d8806e896" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code>具有执行权限。有关<code class="codeph">DBMS_PIPE</code>更多信息，请参阅<a href="../arpls/DBMS_PIPE.html#ARPLS038" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>如有必要，请使用SQL * Plus连接到<a id="d8806e914" class="indexterm-anchor"></a> Oracle数据库作为用户<code class="codeph">PGAADMIN</code> 。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，在<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中运行<code class="codeph">pgatiptr.sql</code>脚本。这个脚本创建<a id="d8806e929" class="indexterm-anchor"></a> PL / SQL例程，可以调用它们来读取和清除由PGAU生成的跟踪信息<a id="d8806e934" class="indexterm-anchor"></a>提示规格。它还为这些例程创建公共同义词。该脚本会提示您输入必要的用户标识和密码。
                                 </p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ admin SQL&gt; @ pgatiptr.sql</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>安装<code class="codeph">GPGLOCAL</code>包。编译和执行所有PGAU生成时需要此包<a id="d8806e947" class="indexterm-anchor"></a>提示规格。<a id="d8806e952" class="indexterm-anchor"></a><a id="d8806e956" class="indexterm-anchor"></a><a id="d8806e960" class="indexterm-anchor"></a>应该授予TIP开发人员执行权限<a id="d8806e965" class="indexterm-anchor"></a> <code class="codeph">GPGLOCAL</code> （请参阅<span class="q">“ <a href="configure-appc-gateway-using-sna.html#GUID-C750A196-5039-4370-99ED-0EB71862A930">允许多个用户的可选配置步骤</a> ”的</span>步骤3）。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以用户身份连接到Oracle数据库<a id="d8806e980" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code> 。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，在<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中运行<code class="codeph">gpglocal.pkh</code>脚本。该脚本编译<code class="codeph">GPGLOCAL</code>包规范。<a id="d8806e997" class="indexterm-anchor"></a><a id="d8806e999" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ admin SQL&gt; @ gpglocal.pkh</pre></li>
                              <li>
                                 <p>从SQL * Plus，在<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中运行<code class="codeph">gpglocal.pkb</code>脚本。该脚本编译<code class="codeph">GPGLOCAL</code>包体。<a id="d8806e1017" class="indexterm-anchor"></a><a id="d8806e1019" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ admin SQL&gt; @ gpglocal.pkb</pre></li>
                           </ol>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPCW196"></a><div class="props_rev_3"><a id="GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154" name="GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154"></a><h3 id="APPCW-GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154" class="sect3">从以前的网关升级或迁移Oracle数据库</h3>
               <div>
                  <div class="section">
                     <p><span class="italic">仅</span>当您的系统上安装了以前版本的Oracle Database Gateway for APPC并且需要为网关的12 <span class="italic">c</span>版本2（12.2）配置它时，请遵循这些说明。
                     </p>
                     <ol>
                        <li>
                           <p>将Oracle Database Gateway for APPC升级到当前版本级别，如下所示：</p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。</p>
                              </li>
                              <li id="GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154__I1010080">
                                 <p>安装<code class="codeph">UTL_RAW</code>包体。从SQL * Plus中，运行<code class="codeph">prvtrawb.plb</code> <a id="d8806e1098" class="indexterm-anchor"></a><a id="d8806e1100" class="indexterm-anchor"></a>来自<code class="codeph">%ORACLE_HOME%\rdbms\admin</code>目录的脚本。该脚本升级<code class="codeph">UTL_RAW</code>包体。
                                 </p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ rdbms \ admin SQL&gt; @ prvtrawb.plb</pre></li>
                              <li id="GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154__I1010098">
                                 <p>安装<code class="codeph">UTL_PG</code>包体。从SQL * Plus中，运行<code class="codeph">prvtpgb.plb</code> <a id="d8806e1122" class="indexterm-anchor"></a><a id="d8806e1126" class="indexterm-anchor"></a>来自<code class="codeph">%ORACLE_HOME%\rdbms\admin</code>目录的脚本。 <a id="d8806e1134" class="indexterm-anchor"></a><a id="d8806e1139" class="indexterm-anchor"></a> 此脚本升级<code class="codeph">UTL_PG</code>程序包主体。
                                 </p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ rdbms \ admin SQL&gt; @ prvtpgb.plb</pre><p><code class="codeph">prvtrawb.plb</code>和<code class="codeph">prvtpgb.plb</code>脚本应该成功完成。如果由于规范不存在或无效而失败，请考虑按照“ <a href="configure-appc-gateway-using-sna.html#GUID-6ED43492-2A39-4F74-B830-1D79F7A69B32">如果必须重新安装软件包规范”中的说明重新安装软件包规范</a> 。
                                 </p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div><a id="APPCW342"></a><a id="APPCW343"></a><a id="APPCW197"></a><div class="props_rev_3"><a id="GUID-6ED43492-2A39-4F74-B830-1D79F7A69B32" name="GUID-6ED43492-2A39-4F74-B830-1D79F7A69B32"></a><h4 id="APPCW-GUID-6ED43492-2A39-4F74-B830-1D79F7A69B32" class="sect4">如果必须重新安装包规范</h4>
                  <div>
                     <div class="section">
                        <p>如果<a id="d8806e1205" class="indexterm-anchor"></a><a id="d8806e1211" class="indexterm-anchor"></a> <code class="codeph">UTL_RAW</code>或<a id="d8806e1220" class="indexterm-anchor"></a><a id="d8806e1226" class="indexterm-anchor"></a> <code class="codeph">UTL_PG</code>包已失效或删除，然后<code class="codeph">prvtrawb.plb</code>和<code class="codeph">prvtpgb.plb</code>脚本可能无法成功完成，那么，您可能必须重新安装<a id="d8806e1242" class="indexterm-anchor"></a><a id="d8806e1246" class="indexterm-anchor"></a><a id="d8806e1250" class="indexterm-anchor"></a>包装规格。
                        </p>
                        <p>如果确实重新安装了软件包规范，那么任何依赖对象（例如现有用户TIP和客户端应用程序）都将失效，随后将需要<a id="d8806e1259" class="indexterm-anchor"></a>要重新编译。这种影响是一次性能延迟，同时重新编译TIP和从属客户端应用程序。
                        </p>
                        <div class="infoboxnote" id="GUID-6ED43492-2A39-4F74-B830-1D79F7A69B32__GUID-001C08EE-CFEB-4DBB-B630-540E884CCD47">
                           <p class="notep1">注意：</p>
                           <p>在继续重新安装程序包脚本之前，请确保您位于<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中<span class="bold">。</span></p>
                        </div>
                        <p>TIP在版本3.3中被拆分为单独的规范和正文文件，以避免在以后的版本中进行级联重新编译。</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-6ED43492-2A39-4F74-B830-1D79F7A69B32__GUID-6232BC83-4B68-4197-9325-A89FD5395573"><!-- --></a>步骤1在继续PGAU升级之前，请运行以下脚本</dt>
                           <dd>
                              <ol>
                                 <li>
                                    <p>如有必要，请使用SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。</p>
                                 </li>
                                 <li>
                                    <p>从SQL * Plus，按以下顺序在Oracle数据库<code class="codeph">%ORACLE_HOME%\rdbms\admin</code>目录中运行<code class="codeph">utlraw.sql</code>和<code class="codeph">utlpg.sql</code>脚本，以升级其各自的包规范： <a id="d8806e1302" class="indexterm-anchor"></a><a id="d8806e1306" class="indexterm-anchor"></a><a id="d8806e1310" class="indexterm-anchor"></a><a id="d8806e1314" class="indexterm-anchor"></a> 
                                    </p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ rdbms \ admin SQL&gt; @ utlraw.sql SQL&gt; @ utlpg.sql</pre></li>
                              </ol>
                           </dd>
                           <dt class="dlterm"><a name="GUID-6ED43492-2A39-4F74-B830-1D79F7A69B32__GUID-2080BC4B-FDAE-49E5-928C-884C1D0A8C7A"><!-- --></a>步骤2重复安装UTL_RAW和UTL_PG包体</dt>
                           <dd>
                              <p>脚本运行后，重复步骤<a href="configure-appc-gateway-using-sna.html#GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154__I1010080">1b。</a>和<a href="configure-appc-gateway-using-sna.html#GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154__I1010098">c。</a> <a href="configure-appc-gateway-using-sna.html#GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154">从以前的网关</a> <a href="configure-appc-gateway-using-sna.html#GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154">升级或迁移</a> <a href="configure-appc-gateway-using-sna.html#GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154">Oracle数据库从先前的网关</a> <a href="configure-appc-gateway-using-sna.html#GUID-4E439D8E-8B91-439A-B239-1AE0FBA43154">升级或迁移Oracle数据库</a> 。然后，继续执行标题为<span class="q">“ <a href="configure-appc-gateway-using-sna.html#GUID-A95D962C-066C-4FA1-BBD6-1E7FFAFD819E">从先前网关版本升级PGAU</a> ”的部分</span> 。
                              </p>
                              <div class="infoboxnote" id="GUID-6ED43492-2A39-4F74-B830-1D79F7A69B32__GUID-58D56AA8-72CD-4982-ADA4-04744310FE76">
                                 <p class="notep1">注意：</p>
                                 <p>重新安装软件包规范后，必须重新编译TIP和从属客户端应用程序。有关编译TIP的信息，请参阅“ <a href="../appug/creating-tip-oracle-database-gateway-appc.html#APPUG300" target="_blank"><span class="italic">Oracle数据库网关APPC用户指南</span></a> ”第3章中的“编译提示”部分。
                                 </p>
                              </div>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="APPCW198"></a><div class="props_rev_3"><a id="GUID-A95D962C-066C-4FA1-BBD6-1E7FFAFD819E" name="GUID-A95D962C-066C-4FA1-BBD6-1E7FFAFD819E"></a><h4 id="APPCW-GUID-A95D962C-066C-4FA1-BBD6-1E7FFAFD819E" class="sect4">从以前的网关版本升级PGAU</h4>
                  <div>
                     <div class="section">
                        <ol>
                           <li>
                              <p>升级了<a id="d8806e1390" class="indexterm-anchor"></a>在执行新的PGAU之前，PG DD如下：</p>
                              <ol type="a">
                                 <li>
                                    <p>如有必要，请使用SQL * Plus以用户<code class="codeph">PGAADMIN</code>连接到Oracle数据库。</p>
                                 </li>
                                 <li>
                                    <p>从SQL * Plus，运行<code class="codeph">pgddupgr.sql</code> <a id="d8806e1407" class="indexterm-anchor"></a><a id="d8806e1409" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中的脚本。此脚本升级PG DD。</p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ admin SQL&gt; @ pgddupgr.sql</pre></li>
                              </ol>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="APPCW199"></a><div class="props_rev_3"><a id="GUID-40EEFA66-1FCB-47BB-9EFF-EE6B25B97D5F" name="GUID-40EEFA66-1FCB-47BB-9EFF-EE6B25B97D5F"></a><h3 id="APPCW-GUID-40EEFA66-1FCB-47BB-9EFF-EE6B25B97D5F" class="sect3">配置Oracle数据库网关共存</h3>
               <div>
                  <div class="section">
                     <p><a id="d8806e1451" class="indexterm-anchor"></a>您可能已安装较旧版本的网关。请注意，尽管版本10网关可以与版本9数据字典（PG DD）通信，但版本9网关无法与版本10数据字典通信。因此，如果将数据字典升级到版本10，则没有配置版本9数据字典的网关将能够与之通信。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPCW200"></a><div class="props_rev_3"><a id="GUID-C750A196-5039-4370-99ED-0EB71862A930" name="GUID-C750A196-5039-4370-99ED-0EB71862A930"></a><h3 id="APPCW-GUID-C750A196-5039-4370-99ED-0EB71862A930" class="sect3">允许多个用户的可选配置步骤</h3>
               <div>
                  <div class="section">
                     <p>以下配置步骤是可选的。如果要允许除以外的用户，请执行这些步骤<a id="d8806e1504" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code>表演<a id="d8806e1511" class="indexterm-anchor"></a>使用PGAU的PG DD操作。</p>
                     <ol>
                        <li>
                           <p>创建<a id="d8806e1520" class="indexterm-anchor"></a><a id="d8806e1522" class="indexterm-anchor"></a> PG DD的公共同义词，允许其他用户访问表：</p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以用户<code class="codeph">SYSTEM</code>身份连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，在<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中运行<code class="codeph">pgddcr8s.sql</code>脚本。此脚本为PG DD创建公共同义词。</p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ admin SQL&gt; @ pgddcr8s.sql</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>创建角色以访问PG DD，执行事务定义和生成<a id="d8806e1548" class="indexterm-anchor"></a>提示规格。<code class="codeph">PGAADMIN</code>用户可以根据需要将这些角色授予其他用户。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以用户<code class="codeph">PGAADMIN</code>连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，运行<a id="d8806e1566" class="indexterm-anchor"></a><a id="d8806e1568" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中的<code class="codeph">pgddcr8r.sql</code>脚本。该脚本创建了两个角色， <code class="codeph">PGDDDEF</code>和<code class="codeph">PGDDGEN</code> 。该<a id="d8806e1585" class="indexterm-anchor"></a><a id="d8806e1587" class="indexterm-anchor"></a> <code class="codeph">PGDDDEF</code>角色为<code class="codeph">PGDDDEF</code>角色提供<code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>权限<a id="d8806e1607" class="indexterm-anchor"></a> PG DD表，以及针对其他人的select权限，并允许执行<code class="codeph">PGAU</code> <code class="codeph">DEFINE</code> ， <code class="codeph">GENERATE</code> ， <code class="codeph">REDEFINE</code> ， <code class="codeph">REPORT</code>和<code class="codeph">UNDEFINE</code>语句。该<a id="d8806e1631" class="indexterm-anchor"></a><a id="d8806e1633" class="indexterm-anchor"></a> <code class="codeph">PGDDGEN</code>角色为PG DD表提供select权限，并且只允许执行<code class="codeph">PGAU</code> <code class="codeph">GENERATE</code>和<code class="codeph">REPORT</code>语句。
                                 </p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ admin SQL&gt; @ pgddcr8r.sql</pre></li>
                           </ol>
                        </li>
                        <li id="GUID-C750A196-5039-4370-99ED-0EB71862A930__i1012843">
                           <p><a id="d8806e1653" class="indexterm-anchor"></a><a id="d8806e1657" class="indexterm-anchor"></a><a id="d8806e1661" class="indexterm-anchor"></a><a id="d8806e1665" class="indexterm-anchor"></a>授予访问PGA所需包的权限。
                           </p>
                           <p><a id="d8806e1671" class="indexterm-anchor"></a><a id="d8806e1675" class="indexterm-anchor"></a> TIP开发人员需要访问随附的以下PL / SQL包<a id="d8806e1680" class="indexterm-anchor"></a> Oracle数据库：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a id="d8806e1688" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\rdbms\admin</code>目录中的<code class="codeph">DBMS_PIPE</code></p>
                              </li>
                              <li>
                                 <p><a id="d8806e1698" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\rdbms\admin</code>目录中的<code class="codeph">UTL_RAW</code></p>
                              </li>
                              <li>
                                 <p><a id="d8806e1708" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\rdbms\admin</code>目录中的<code class="codeph">UTL_PG</code></p>
                              </li>
                           </ul>
                           <p>必须向TIP开发人员提供执行这些包的显式授权。</p>
                           <p>这些授权可以是私有的，如下例所示：</p><pre class="oac_no_warn" dir="ltr">C：\&gt; sqlplus SYS \ <span class="italic">pw @ database_specification_string</span> SQL&gt; GRANT EXECUTE ON UTL_RAW TO <span class="italic">tip_developer</span> ; SQL&gt; GRANT EXECUTE ON UTL_PG to <span class="italic">tip_developer</span> ; SQL&gt; GRANT EXECUTE ON DBMS_PIPE TO <span class="italic">tip_developer;</span> SQL&gt; CONNECT PGAADMIN \ <span class="italic">pw @ database_specification_string</span> SQL&gt; GRANT EXECUTE在PGAADMIN.PURGE_TRACE到<span class="italic">tip_developer</span> ; SQL&gt; GRANT EXECUTE在PGAADMIN.READ_TRACE上执行<span class="italic">tip_developer</span> ; SQL&gt; GRANT EXECUTE on PGAADMIN.GPGLOCAL to <span class="italic">tip_developer;</span> SQL&gt;退出</pre><p>或者，这些授权可以是公开的，如下例所示：</p><pre class="oac_no_warn" dir="ltr">C：\&gt; sqlplus SYS \ pw @ <span class="italic">database_specification_string</span> SQL&gt; GRTL EXECUTE UTL_RAW TO PUBLIC; SQL&gt;在UTL_PG上执行GRANT EXECUTE; SQL&gt; GRANT EXECUTE DBMS_PIPE到PUBLIC; SQL&gt; CONNECT PGAADMIN \ <span class="italic">pw @ database_specification_string</span> SQL&gt; GRGA EXECUTE PGAADMIN.PURGE_TRACE TO PUBLIC; SQL&gt; GRGA EXECUTE PGAADMIN.READ_TRACE TO PUBLIC; SQL&gt; GRGA EXECUTE PGAADMIN.GPGLOCAL TO PUBLIC; SQL&gt; EXIT</pre><p>您可以使用私人或公共补助金。两种拨款都足以使用PGA。公共补助更容易，现在可以执行。如果您使用私有授权，则每次创建新的TIP开发人员用户ID时都必须发布它们。<a id="d8806e1759" class="indexterm-anchor"></a><a id="d8806e1763" class="indexterm-anchor"></a></p>
                           <p><code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中提供了用于执行这些授权的SQL脚本。该<a id="d8806e1772" class="indexterm-anchor"></a><a id="d8806e1776" class="indexterm-anchor"></a><a id="d8806e1781" class="indexterm-anchor"></a><a id="d8806e1785" class="indexterm-anchor"></a> <code class="codeph">pgddapub.sql</code>脚本执行这些授权以公开访问包。该<a id="d8806e1792" class="indexterm-anchor"></a><a id="d8806e1797" class="indexterm-anchor"></a><a id="d8806e1801" class="indexterm-anchor"></a><a id="d8806e1805" class="indexterm-anchor"></a> <code class="codeph">pgddadev.sql</code>脚本执行授权，以便由单个TIP开发人员对包进行私有访问。如果要使用私有授权，则必须为每个TIP开发人员的用户ID运行一次<code class="codeph">pgddadev.sql</code>脚本：</p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以用户<code class="codeph">PGAADMIN</code>连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus中，从<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录运行合适的脚本（ <code class="codeph">pgddapub.sql</code>或<code class="codeph">pgddadev.sql</code> ）。该脚本执行必要的授权，如前所述。系统会提示您输入所需的用户标识，密码和数据库规范字符串。
                                 </p>
                                 <p>如果您使用私有授权，则对需要访问软件包的每个用户ID重复此步骤。</p><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ admin SQL&gt; @ pgddapub.sql</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ pgddadev.sql</pre><p></p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p><a id="d8806e1845" class="indexterm-anchor"></a><a id="d8806e1851" class="indexterm-anchor"></a>如果要从以前版本的网关进行升级，并且要升级现有版本<a id="d8806e1856" class="indexterm-anchor"></a><a id="d8806e1860" class="indexterm-anchor"></a><a id="d8806e1861" class="indexterm-anchor"></a>具有新功能和维护的TIP，然后使用。重新生成现有的T IP规范<a id="d8806e1871" class="indexterm-anchor"></a> PGAU <code class="codeph">GENERATE</code>声明。
                           </p>
                           <div class="infoboxnote" id="GUID-C750A196-5039-4370-99ED-0EB71862A930__GUID-DED79438-E62E-4CCE-A9FB-379FE905ADB8">
                              <p class="notep1">注意：</p>
                              <p>该<a id="d8806e1883" class="indexterm-anchor"></a>程序网关管理实用程序（PGAU）已得到增强，可自动升级现有的PG DD条目<a id="d8806e1888" class="indexterm-anchor"></a><a id="d8806e1892" class="indexterm-anchor"></a>当一个新的属性时<a id="d8806e1897" class="indexterm-anchor"></a>执行PGAU <code class="codeph">GENERATE</code>命令。要支持此增强功能，请为该增强功能添加新权限<a id="d8806e1905" class="indexterm-anchor"></a> <code class="codeph">PGDDGEN</code>角色。为此，作为<code class="codeph">PGAADMIN</code>用户，使用SQL * Plus连接到存储PG DD的Oracle数据库。然后发出以下SQL命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; GRANT INSERT在PGA_DATA_VALUES到PGDDGEN</pre></div>
                           <ol type="a">
                              <li>
                                 <p>在生成PGAU控制文件的目录路径中调用PGAU以及存储TIP的位置：</p><pre class="oac_no_warn" dir="ltr">C：\&gt; pgau PGAU&gt; CONNECT PGAADMIN \ pgaadmin @ <span class="italic">database_specification_string</span> PGAU&gt; GENERATE <span class="italic">tranname</span> PGAU&gt; EXIT</pre></li>
                           </ol>
                           <p>有关<code class="codeph">GENERATE</code>命令的更多信息，请参阅<a href="../appug/pga-utility-oracle-database-gateway-appc.html#APPUG200" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南</span></a>第2章中的PGAU <code class="codeph">GENERATE</code>命令部分。
                           </p>
                           <p>请注意，不必再次定义PG DD条目。</p>
                        </li>
                        <li>
                           <p>在存储新生成的TIP规范的同一目录路径中调用SQL * Plus。</p><pre class="oac_no_warn" dir="ltr">C：\&gt; sqlplus <span class="italic">tip_owner \ pw @ database_specification_string</span> SQL&gt; @ <span class="italic">tipname。</span> pkh SQL&gt; @ <span class="italic">tipname</span> .pkb SQL&gt;退出</pre><p><a id="d8806e1960" class="indexterm-anchor"></a><a id="d8806e1966" class="indexterm-anchor"></a><a id="d8806e1970" class="indexterm-anchor"></a> <code class="codeph">PGAU</code> <code class="codeph">GENERATE</code>在两个输出文件中生成TIP，规范和正文。您必须先编译规范，然后再编译正文。
                           </p>
                           <p>有关<code class="codeph">GENERATE</code>命令的更多信息，请参阅<a href="../appug/pga-utility-oracle-database-gateway-appc.html#APPUG200" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南</span></a>第2章中的PGAU <code class="codeph">GENERATE</code>命令部分。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPCW201"></a><div class="props_rev_3"><a id="GUID-383121C7-26B7-4869-9C28-D9E83EAB79EA" name="GUID-383121C7-26B7-4869-9C28-D9E83EAB79EA"></a><h3 id="APPCW-GUID-383121C7-26B7-4869-9C28-D9E83EAB79EA" class="sect3">配置网关</h3>
               <div>
                  <div class="section">
                     <p>要配置网关，请执行以下步骤：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>为APPC参数自定义Oracle数据库网关。</span><div>
                           <p>参数具体<a id="d8806e2033" class="indexterm-anchor"></a>网关参数文件中提供了网关， <a id="d8806e2040" class="indexterm-anchor"></a><a id="d8806e2042" class="indexterm-anchor"></a> <code class="codeph">init <span class="codeinlineitalic">sid</span> .ora</code> ，在<a id="d8806e2052" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录。示例网关参数<a id="d8806e2057" class="indexterm-anchor"></a><a id="d8806e2060" class="indexterm-anchor"></a><a id="d8806e2066" class="indexterm-anchor"></a>文件， <a id="d8806e2071" class="indexterm-anchor"></a><a id="d8806e2073" class="indexterm-anchor"></a> <code class="codeph">initPGA.ora</code> ，在此子目录中提供。<a id="d8806e2080" class="indexterm-anchor"></a><a id="d8806e2084" class="indexterm-anchor"></a><a id="d8806e2090" class="indexterm-anchor"></a></p>
                           <div class="infoboxnote" id="GUID-383121C7-26B7-4869-9C28-D9E83EAB79EA__GUID-0E51276A-7C64-40BA-A755-20121F28C6B3">
                              <p class="notep1">注意：</p>
                              <p>在里面<a id="d8806e2097" class="indexterm-anchor"></a><a id="d8806e2099" class="indexterm-anchor"></a> <code class="codeph">init <span class="codeinlineitalic">sid</span> .ora</code>文件， <code class="codeph">dg4appc</code> SID名称替换为此文件名中的“ <span class="italic"><code class="codeph">sid</code></span> ”。
                              </p>
                              <p><code class="codeph">init <span class="codeinlineitalic">sid</span> .ora</code>文件包含APPC和TCP / IP参数，由描述分隔。您必须通过删除TCP / IP参数来修改<code class="codeph">init <span class="codeinlineitalic">sid</span> .ora</code>文件。有关有效的APPC参数，请参阅<a href="appc-gateway-initialization-parameters-sna.html#GUID-84F7EB01-3551-4335-A54A-918F7E637F5D">SNA协议的网关初始化</a>参数。
                              </p>
                           </div>
                           <p>参数分为两类：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>网关初始化<a id="d8806e2140" class="indexterm-anchor"></a><a id="d8806e2146" class="indexterm-anchor"></a>参数</p>
                                 <p>这些参数控制Oracle环境中网关的一般操作。</p>
                                 <div class="infoboxnote" id="GUID-383121C7-26B7-4869-9C28-D9E83EAB79EA__GUID-A64F7F9C-EE58-4060-9353-14DCAADC60CD">
                                    <p class="notep1">注意：</p>
                                    <p>在执行以下步骤之前，请参阅<a href="appc-gateway-initialization-parameters-sna.html#GUID-84F7EB01-3551-4335-A54A-918F7E637F5D">SNA协议的网关初始化参数，</a>以获取有关定制网关初始化和PGA参数的信息。特别注意使用的信息<a id="d8806e2160" class="indexterm-anchor"></a> <code class="codeph">PGA_CAPABILITY</code>参数。
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>PGA <a id="d8806e2170" class="indexterm-anchor"></a><a id="d8806e2174" class="indexterm-anchor"></a>参数</p>
                                 <p>PGA参数控制网关的APPC接口部分。使用<a id="d8806e2183" class="indexterm-anchor"></a><a id="d8806e2187" class="indexterm-anchor"></a> <code class="codeph">SET</code>网关初始化参数指定PGA参数。Oracle建议您对所有<code class="codeph">SET</code>命令进行分组<a id="d8806e2199" class="indexterm-anchor"></a><a id="d8806e2201" class="indexterm-anchor"></a>对于<code class="codeph">init <span class="codeinlineitalic">sid</span> .ora</code>文件末尾的PGA参数。
                                 </p>
                                 <div class="infoboxnote" id="GUID-383121C7-26B7-4869-9C28-D9E83EAB79EA__GUID-D05F29C2-8000-4D48-919E-AFC51D726B4D">
                                    <p class="notep1">注意：</p>
                                    <p>拼写错误的参数将被忽略<a id="d8806e2215" class="indexterm-anchor"></a> 。但是，如果缺少<code class="codeph">%ORACLE_HOME%\dg4appc\admin\initsid.ora</code>文件，则对网关的所有调用都会失败并返回<code class="codeph">PGA-20928</code>错误。
                                    </p>
                                 </div>
                                 <p>如果您不打算配置commit-confirm，请继续<span class="q">“ <a href="configure-appc-gateway-using-sna.html#GUID-04DFBC73-2DC5-437C-83F5-CB679F20C35C">验证网关安装和OLTP配置</a> ”</span> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="APPCW202"></a><div class="props_rev_3"><a id="GUID-D2D24B90-BD74-455C-98B5-08B35261CF06" name="GUID-D2D24B90-BD74-455C-98B5-08B35261CF06"></a><h3 id="APPCW-GUID-D2D24B90-BD74-455C-98B5-08B35261CF06" class="sect3">配置提交确认</h3>
               <div>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-D2D24B90-BD74-455C-98B5-08B35261CF06__GUID-CDA7133F-B45C-4B92-8F22-434FE902B4B9">
                        <p class="notep1">注意：</p>
                        <p>如果您计划实施commit-confirm，请在继续操作之前阅读“ <a href="../appug/implement-appc-commit-confirm-sna-only.html#APPUG500" target="_blank"><span class="italic">Oracle数据库网关APPC用户指南</span></a> ”第5章中“提交确认功能的详细说明<a href="../appug/implement-appc-commit-confirm-sna-only.html#APPUG500" target="_blank"><span class="italic">”</span></a> ，“实施提交确认（仅限SNA）”。
                        </p>
                     </div>
                     <p>请按照以下步骤配置commit-confirm组件。</p>
                     <p>的步骤<a id="d8806e2276" class="indexterm-anchor"></a>配置commit-confirm包括：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>配置Oracle数据库，网关服务器将在其中存储其事务日志信息</p>
                        </li>
                        <li>
                           <p>配置网关初始化参数，和</p>
                        </li>
                        <li>
                           <p>配置OLTP。</p>
                        </li>
                     </ul>
                     <p>在尝试使用任何使用commit-confirm的应用程序之前，必须执行所有这些步骤。<a id="d8806e2294" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
               </div><a id="APPCW203"></a><div class="props_rev_3"><a id="GUID-A9F0651B-9F3B-427D-A7E1-D12E01CC5374" name="GUID-A9F0651B-9F3B-427D-A7E1-D12E01CC5374"></a><h4 id="APPCW-GUID-A9F0651B-9F3B-427D-A7E1-D12E01CC5374" class="sect4">配置Oracle数据库以进行提交确认</h4>
                  <div>
                     <div class="section">
                        <p>该<a id="d8806e2331" class="indexterm-anchor"></a><a id="d8806e2335" class="indexterm-anchor"></a>网关服务器将存储其事务日志信息的Oracle数据库理想情况下应位于运行网关的同一系统上。服务器的配置包括创建网关DBA用户，创建提交确认日志表并创建<a id="d8806e2340" class="indexterm-anchor"></a>网关服务器用于记录事务的PL / SQL存储过程。<a id="d8806e2345" class="indexterm-anchor"></a></p>
                        <p>该<a id="d8806e2353" class="indexterm-anchor"></a><a id="d8806e2355" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中的<code class="codeph">pgaccau.sql</code>脚本创建网关DBA用户标识。默认用户ID为<code class="codeph">PGADBA</code> ，初始密码设置为<code class="codeph">PGADBA</code> 。如果要更改用户ID或初始密码，则必须修改脚本。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>使用<a id="d8806e2375" class="indexterm-anchor"></a> SQL * Plus以用户<code class="codeph">SYSTEM</code>身份连接到Oracle数据库。</span></li>
                        <li><span>从SQL * Plus，从<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录运行<code class="codeph">pgaccau.sql</code>脚本。此脚本创建网关DBA用户标识。如果要在运行此脚本后随时更改密码，则可以使用<code class="codeph">ALTER USER</code>命令更改密码。有关详细信息，请参阅<a href="../sqlrf/ALTER-USER.html#SQLRF01103" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。</span></li>
                        <li><span>使用SQL * Plus以用户<code class="codeph">PGADBA</code>连接到Oracle数据库。</span></li>
                        <li><span>从SQL * Plus，从<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录运行<code class="codeph">pgaccpnd.sql</code>脚本。此脚本创建网关服务器用于其提交确认事务日志的<code class="codeph">PGA_CC_PENDING</code>表。</span></li>
                        <li><span>从SQL * Plus，从<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录运行<code class="codeph">pgacclog.sql</code>脚本。该脚本创建<code class="codeph">PGA_CC_LOG</code> <a id="d8806e2430" class="indexterm-anchor"></a>网关服务器用于更新<code class="codeph">PGA_CC_PENDING</code>表的PL / SQL存储过程。</span></li>
                        <li><span>断开与Oracle数据库的连接。</span></li>
                     </ol>
                  </div>
               </div><a id="APPCW204"></a><div class="props_rev_3"><a id="GUID-D0334257-DC09-45B3-8071-62EE8F0A43E2" name="GUID-D0334257-DC09-45B3-8071-62EE8F0A43E2"></a><h4 id="APPCW-GUID-D0334257-DC09-45B3-8071-62EE8F0A43E2" class="sect4">为Commit-Confirm配置网关初始化参数</h4>
                  <div>
                     <div class="section">
                        <p><a id="d8806e2471" class="indexterm-anchor"></a><a id="d8806e2477" class="indexterm-anchor"></a><a id="d8806e2481" class="indexterm-anchor"></a>网关初始化参数在<a href="appc-gateway-initialization-parameters-sna.html#GUID-84F7EB01-3551-4335-A54A-918F7E637F5D">SNA协议</a>的网关初始化参数中描述。网关中提交确认支持所需的参数是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">PGA_CAPABILITY</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_LOG_DB</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_LOG_USER</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_LOG_PASS</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_RECOVERY_USER</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_RECOVERY_PASS</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_RECOVERY_TPNAME</code></p>
                           </li>
                        </ul>
                        <p>这些参数应该添加到您的<a id="d8806e2523" class="indexterm-anchor"></a><a id="d8806e2525" class="indexterm-anchor"></a> <code class="codeph">init <span class="codeinlineitalic">sid</span> .ora</code>文件，其中<span class="italic"><code class="codeph">sid</code></span>是commit-confirm网关的网关SID。
                        </p>
                        <p>有关Oracle Database Gateway for APPC支持的网关初始化参数的完整信息，请参阅<a href="appc-gateway-initialization-parameters-sna.html#GUID-84F7EB01-3551-4335-A54A-918F7E637F5D">SNA协议</a>的网关初始化参数。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="APPCW205"></a><div class="props_rev_3"><a id="GUID-4E9B411B-D554-4945-825A-B4316404F7C0" name="GUID-4E9B411B-D554-4945-825A-B4316404F7C0"></a><h4 id="APPCW-GUID-4E9B411B-D554-4945-825A-B4316404F7C0" class="sect4">配置OLTP以进行提交确认</h4>
                  <div>
                     <div class="section">
                        <p>OLTP的配置包括以下内容：<a id="d8806e2579" class="indexterm-anchor"></a><a id="d8806e2585" class="indexterm-anchor"></a></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>定义和安装commit-confirm事务日志数据库</p>
                           </li>
                           <li>
                              <p>定义和安装commit-confirm忘记/恢复事务</p>
                           </li>
                           <li>
                              <p>定义和安装随网关提供的示例commit-confirm应用程序。</p>
                              <div class="infoboxnote" id="GUID-4E9B411B-D554-4945-825A-B4316404F7C0__GUID-879AC126-4755-4E62-9932-0567065BF392">
                                 <p class="notep1">注意：</p>
                                 <p>可能需要重新启动OLTP才能实现提交确认支持所需的更改。您应该与OLTP系统管理员一起制定此计划。</p>
                              </div>
                           </li>
                        </ul>
                        <p>有关为z / OS和IMS / TM配置Transaction Server的详细说明，请分别在<code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS\README.doc</code>和<code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS\README.doc</code>文件中提供。
                        </p>
                        <p>参考<a id="d8806e2613" class="indexterm-anchor"></a><a id="d8806e2617" class="indexterm-anchor"></a>有关commit-confirm的详细信息，请参见“ <a href="../appug/implement-appc-commit-confirm-sna-only.html#APPUG500" target="_blank"><span class="italic">Oracle数据库网关APPC用户指南</span></a> ”中的第5章“实现提交确认（仅限SNA）”。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在<a href="configure-appc-gateway-using-sna.html#GUID-487E4EE1-6B30-4B46-A79D-F3A0389EC612">验证OLTP配置以进行提交确认</a> <a href="configure-appc-gateway-using-sna.html#GUID-487E4EE1-6B30-4B46-A79D-F3A0389EC612">验证OLTP配置以进行提交确认时</a> ，您将采取措施验证<a href="configure-appc-gateway-using-sna.html#GUID-487E4EE1-6B30-4B46-A79D-F3A0389EC612">提交确认的</a> <a href="configure-appc-gateway-using-sna.html#GUID-487E4EE1-6B30-4B46-A79D-F3A0389EC612">配置</a> 。
                              </p>
                           </li>
                        </ul>
                        <p>但是，首先进入<a href="configure-appc-gateway-using-sna.html#GUID-04DFBC73-2DC5-437C-83F5-CB679F20C35C">验证网关安装和OLTP配置</a>以验证网关安装。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="APPCW206"></a><div class="props_rev_3"><a id="GUID-04DFBC73-2DC5-437C-83F5-CB679F20C35C" name="GUID-04DFBC73-2DC5-437C-83F5-CB679F20C35C"></a><h3 id="APPCW-GUID-04DFBC73-2DC5-437C-83F5-CB679F20C35C" class="sect3">验证网关安装和OLTP配置</h3>
               <div>
                  <div class="section">
                     <p>要验证网关安装和OLTP配置，请在安装Oracle Database Gateway for APPC后执行以下过程。 <a id="d8806e2678" class="indexterm-anchor"></a><a id="d8806e2684" class="indexterm-anchor"></a>此外，如果您选择配置commit-confirm，请按照步骤验证提交确认的OLTP配置。
                     </p>
                     <div class="infoboxnote" id="GUID-04DFBC73-2DC5-437C-83F5-CB679F20C35C__GUID-D4DEE5CE-C93F-49A2-B818-30562D16FFC2">
                        <p class="notep1">注意：</p>
                        <p>如果你的<a id="d8806e2694" class="indexterm-anchor"></a>数据库链接名称不是PGA，然后修改演示.sql文件，以便为它们提供您在<span class="q">“ <a href="configure-appc-gateway-using-sna.html#GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D">集成服务器配置：首次网关安装</a> ”的</span>步骤<a href="configure-appc-gateway-using-sna.html#GUID-C6CBC625-C0FE-496C-9EEC-096A04004A7D__BGBGGAIG">5</a>中创建的特定数据库链接名称。您必须修改以下.sql文件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">pgavsn.sql</code></p>
                           </li>
                           <li>
                              <p><a id="d8806e2714" class="indexterm-anchor"></a><a id="d8806e2716" class="indexterm-anchor"></a><code class="codeph">pgaecho.sql </code></p>
                           </li>
                           <li>
                              <p><code class="codeph">pgacics.sql</code> 
                              </p>
                           </li>
                           <li>
                              <p><a id="d8806e2729" class="indexterm-anchor"></a><a id="d8806e2731" class="indexterm-anchor"></a><code class="codeph">pgaidms.sql</code> 
                              </p>
                           </li>
                           <li>
                              <p><a id="d8806e2740" class="indexterm-anchor"></a><a id="d8806e2742" class="indexterm-anchor"></a><code class="codeph">pgaims.sql </code></p>
                           </li>
                           <li>
                              <p><a id="d8806e2750" class="indexterm-anchor"></a><a id="d8806e2752" class="indexterm-anchor"></a><code class="codeph">pgamvs.sql </code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="APPCW207"></a><div class="props_rev_3"><a id="GUID-4270B0C3-A67D-4A2D-A06D-9B74836ED48E" name="GUID-4270B0C3-A67D-4A2D-A06D-9B74836ED48E"></a><h4 id="APPCW-GUID-4270B0C3-A67D-4A2D-A06D-9B74836ED48E" class="sect4">验证网关安装</h4>
                  <div>
                     <div class="section">
                        <p>使用以验证网关软件安装<a id="d8806e2805" class="indexterm-anchor"></a>先前创建的数据库链接PGA，执行以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用SQL * Plus，连接到<a id="d8806e2816" class="indexterm-anchor"></a> Oracle数据库作为用户<a id="d8806e2823" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code> 。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">%ORACLE_HOME%\dg4appc\demo\pgavsn.sql</code> 。</span><div><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ demo SQL&gt; @ pgavsn.sql</pre><p>服务器版本号标题出现在您的终端上。您将收到以下输出：</p><pre class="oac_no_warn" dir="ltr">适用于APPC的Oracle数据库网关。版本11.2.0.0.2 2009年6月11日星期四14:39:15版权所有（c）Oracle Corporation 1979,2009。版权所有。PL / SQL过程成功完成。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">%ORACLE_HOME%\dg4appc\demo\pgaecho.sql</code> 。</span><div><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ demo SQL&gt; @ pgaecho.sql</pre><p>您将收到以下输出：</p><pre class="oac_no_warn" dir="ltr">==&gt;恭喜，您的安装成功。 &lt;==</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="APPCW208"></a><div class="props_rev_3"><a id="GUID-273B8DEB-A60B-4B98-9122-8E03D0FFB216" name="GUID-273B8DEB-A60B-4B98-9122-8E03D0FFB216"></a><h4 id="APPCW-GUID-273B8DEB-A60B-4B98-9122-8E03D0FFB216" class="sect4">验证OLTP配置</h4>
                  <div>
                     <div class="section">
                        <p>验证OLTP配置的过程会有所不同，具体取决于您使用的OLTP以及运行OLTP的平台。目前支持用于z / OS，IMS / TM，APPC / MVS和z / OS的CICS Transaction Server <a id="d8806e2903" class="indexterm-anchor"></a> OLTPs。按照说明验证安装。
                        </p>
                        <div class="infoboxnote" id="GUID-273B8DEB-A60B-4B98-9122-8E03D0FFB216__GUID-B327AF46-AD50-4080-9836-4F4965264566">
                           <p class="notep1">注意：</p>
                           <p>如果尚未完成<span class="q">“ <a href="configure-appc-gateway-using-sna.html#GUID-B9313098-CEE8-4D8B-837B-ED87E67F7D09">准备配置网关安装/升级</a> ”中</span>详细说明的文件传输，请立即完成，然后再继续执行下一步。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="APPCW209"></a><div class="props_rev_3"><a id="GUID-BEFDE1DF-6102-48C2-86B5-315E7E9C485F" name="GUID-BEFDE1DF-6102-48C2-86B5-315E7E9C485F"></a><h5 id="APPCW-GUID-BEFDE1DF-6102-48C2-86B5-315E7E9C485F" class="sect5">CICS验证</h5>
                     <div>
                        <div class="section">
                           <p>如果您的OLTP是<a id="d8806e2967" class="indexterm-anchor"></a><a id="d8806e2973" class="indexterm-anchor"></a>用于z / OS的CICS Transaction Server，然后执行以下步骤以验证CICS配置。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>验证<a id="d8806e2984" class="indexterm-anchor"></a>正确安装<code class="codeph">FLIP</code>事务，登录到您的CICS Transaction Server for z / OS并输入以下事务，在为网关配置CICS Transaction Server for z / OS时，将<code class="codeph">FLIP</code>替换为您为<code class="codeph">FLIP</code>选择的事务ID：</span><div><pre class="oac_no_warn" dir="ltr">FLIP <span class="italic"> </span>这条信息</pre><p>您的终端上会显示以下输出：</p><pre class="oac_no_warn" dir="ltr">EGASSEM SIHT PILF</pre></div>
                           </li>
                           <li class="stepexpand"><span>在Windows平台上，修改位于<code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS\pgacics.sql</code> 。</span><div>
                                 <p>自定义以下三个用于访问网关和CICS Transaction Server for z / OS的项目，如文件开头的注释中所述：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>该<a id="d8806e3022" class="indexterm-anchor"></a> CICS事务ID</p>
                                    </li>
                                    <li>
                                       <p>该<a id="d8806e3030" class="indexterm-anchor"></a>侧面名称</p>
                                    </li>
                                    <li>
                                       <p>该<a id="d8806e3036" class="indexterm-anchor"></a> logmode条目名称</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保这件事<a id="d8806e3042" class="indexterm-anchor"></a>系统上的SNA Server已启动。</span></li>
                           <li class="stepexpand"><span>登录到z / OS的CICS Transaction Server并输入此事务，其中<span class="italic"><code class="codeph">name</code></span>是您在CICS配置步骤中运行的<code class="codeph">DFHCSDUP</code>作业安装的<code class="codeph">CONNECTION</code>定义的名称：</span><div><pre class="oac_no_warn" dir="ltr">已获得CEMT SET CONNECTION <span class="italic">（名称）</span></pre><p>此事务激活与Windows的CICS连接。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>使用SQL * Plus以<code class="codeph">PGAADMIN</code>身份连接到Oracle数据库。</span></li>
                           <li class="stepexpand"><span>跑<a id="d8806e3075" class="indexterm-anchor"></a><a id="d8806e3077" class="indexterm-anchor"></a> <code class="codeph">pgacics.sql</code> 。</span><div><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ demo \ CICS SQL&gt; @ pgacics.sql</pre><p>出现以下消息：</p><pre class="oac_no_warn" dir="ltr">==&gt;恭喜，您的网关正在与CICS &lt;==进行通信</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>用于z / OS安装验证的CICS Transaction Server已完成。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="APPCW210"></a><div class="props_rev_3"><a id="GUID-0D83B68D-908B-427E-A1E7-DDEED4B95C5E" name="GUID-0D83B68D-908B-427E-A1E7-DDEED4B95C5E"></a><h5 id="APPCW-GUID-0D83B68D-908B-427E-A1E7-DDEED4B95C5E" class="sect5">IMS / TM验证</h5>
                     <div>
                        <div class="section">
                           <p>如果OLTP是<a id="d8806e3147" class="indexterm-anchor"></a>然后，IMS / TM执行以下步骤以验证IMS / TM配置：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>验证<a id="d8806e3158" class="indexterm-anchor"></a> <code class="codeph">FLIP</code>事务已正确安装，登录到IMS / TM系统并输入以下事务，在为网关配置IMS / TM系统时，将<code class="codeph">FLIP</code>替换为您为<code class="codeph">FLIP</code>选择的事务ID：</span><div><pre class="oac_no_warn" dir="ltr">翻上这条消息</pre><p>终端上显示以下输出：</p><pre class="oac_no_warn" dir="ltr">EGASSEM SIHT PILF</pre></div>
                           </li>
                           <li class="stepexpand"><span>在Windows平台上，修改驻留在的<code class="codeph">pgaims.sql</code>文件</span><div>
                                 <p> <a id="d8806e3189" class="indexterm-anchor"></a><a id="d8806e3191" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS\pgaims.sql</code> 。自定义用于访问网关和IMS / TM系统的以下三个项目，如文件开头的注释中所述：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>IMS / TM事务ID</p>
                                    </li>
                                    <li>
                                       <p>侧面配置文件名称</p>
                                    </li>
                                    <li>
                                       <p>logmode条目名称</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保<a id="d8806e3209" class="indexterm-anchor"></a>系统上的SNA Server已启动。</span></li>
                           <li class="stepexpand"><span> <a id="d8806e3215" class="indexterm-anchor"></a>使用SQL * Plus以<code class="codeph">PGAADMIN</code>身份连接到Oracle数据库。</span></li>
                           <li class="stepexpand"><span>跑<a id="d8806e3228" class="indexterm-anchor"></a><a id="d8806e3230" class="indexterm-anchor"></a> <code class="codeph">pgaims.sql</code> 。</span><div><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ demo \ IMS SQL&gt; @ pgaims.sql</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>出现以下消息：</p><pre class="oac_no_warn" dir="ltr">==&gt;恭喜，您的网关正在与IMS / TM &lt;==进行通信</pre><p>IMS / TM安装验证现已完成。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="APPCW211"></a><div class="props_rev_3"><a id="GUID-15353C3B-AC05-40C8-9CC7-F899E56239CD" name="GUID-15353C3B-AC05-40C8-9CC7-F899E56239CD"></a><h5 id="APPCW-GUID-15353C3B-AC05-40C8-9CC7-F899E56239CD" class="sect5">APPC / MVS验证</h5>
                     <div>
                        <div class="section">
                           <p>如果OLTP是<a id="d8806e3293" class="indexterm-anchor"></a><a id="d8806e3299" class="indexterm-anchor"></a> APPC / MVS，然后执行以下步骤来验证APPC / MVS配置：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>验证APPC / MVS子系统是否处于活动状态。</span></li>
                           <li class="stepexpand"><span>在Windows平台上，修改驻留在的<code class="codeph">pgamvs.sql</code>文件<a id="d8806e3314" class="indexterm-anchor"></a> <code class="codeph">%ORACLE_HOME%\dg4appc\demo\MVS\pgamvs.sql</code> 。自定义用于访问网关和APPC / MVS系统的以下三个项目，如文件开头的注释中所述：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>APPC / MVS交易ID</p>
                                    </li>
                                    <li>
                                       <p>侧面配置文件名称</p>
                                    </li>
                                    <li>
                                       <p>logmode条目名称</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保<a id="d8806e3333" class="indexterm-anchor"></a>系统上的SNA Server已启动。</span></li>
                           <li class="stepexpand"><span>使用SQL * Plus连接到<a id="d8806e3339" class="indexterm-anchor"></a> Oracle数据库为<code class="codeph">PGAADMIN</code> 。</span></li>
                           <li class="stepexpand"><span>运行<code class="codeph">pgamvs.sql</code> 。</span><div><pre class="oac_no_warn" dir="ltr">C：\&gt; cd％ORACLE_HOME％\ dg4appc \ demo \ MVS SQL&gt; @ pgamvs.sql</pre><p>出现以下消息：</p><pre class="oac_no_warn" dir="ltr">=&gt;恭喜，您的网关正在与APPC / MVS &lt;=进行通信</pre></div>
                           </li>
                        </ol>
                        <div class="section"><pre class="oac_no_warn" dir="ltr"></pre><p>APPC / MVS安装验证现已完成。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="APPCW212"></a><div class="props_rev_3"><a id="GUID-487E4EE1-6B30-4B46-A79D-F3A0389EC612" name="GUID-487E4EE1-6B30-4B46-A79D-F3A0389EC612"></a><h4 id="APPCW-GUID-487E4EE1-6B30-4B46-A79D-F3A0389EC612" class="sect4">验证OLTP配置以进行提交确认</h4>
                  <div>
                     <div class="section">
                        <p>如果选择配置承诺，确认<a href="configure-appc-gateway-using-sna.html#GUID-D2D24B90-BD74-455C-98B5-08B35261CF06">配置提交-确认</a> ，那么以下部分将帮助您验证配置。
                        </p>
                        <div class="infoboxnote" id="GUID-487E4EE1-6B30-4B46-A79D-F3A0389EC612__GUID-5226AF76-A796-4337-9C91-A702A9D349FA">
                           <p class="notep1">注意：</p>
                           <p>有关commit-confirm的组件和功能的背景信息，请参阅“ <a href="../appug/implement-appc-commit-confirm-sna-only.html#APPUG500" target="_blank"><span class="italic">Oracle数据库网关中的APPC用户指南</span></a> ”中的第5章“实现提交确认”。
                           </p>
                        </div>
                        <p>样本随Transaction Server for z / OS和IMS / TM的网关一起提供，用于实现提交确认支持。它们分别位于以下目录中： <code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS</code>和<code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS. A README.doc</code>每个目录中的<code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS. A README.doc</code>文件提供有关安装和使用示例的详细信息。还提供了用于编译和链接示例程序的JCL文件。 <a id="d8806e3420" class="indexterm-anchor"></a> 网关附带的示例可帮助您完成以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建并初始化commit-confirm事务日志数据库并将这些数据库定义到OLTP。对于Transaction Server for z / OS，该示例使用VSAM文件作为日志数据库。对于IMS / TM，使用SHISAM / VSAM数据库。</p>
                           </li>
                           <li>
                              <p>使用子程序接收<a id="d8806e3433" class="indexterm-anchor"></a>来自网关的Oracle全局事务ID并将其记录到<a id="d8806e3436" class="indexterm-anchor"></a> commit-confirm事务日志数据库。这些子程序在中提供<a id="d8806e3441" class="indexterm-anchor"></a><a id="d8806e3443" class="indexterm-anchor"></a> <code class="codeph">pgacclg.asm</code>文件。它们可以在应用程序中使用，以降低程序代码更改的复杂性。
                              </p>
                              <p>对于Transaction Server for z / OS，使用EXEC CICS LINK接口调用提供的子例程。对于IMS / TM，提供的子例程使用标准<code class="codeph">CALL</code>语句或其在应用程序编程语言中的等效语句来<code class="codeph">CALL</code> 。这两个子例程都是用370汇编语言编写的，以消除任何中间语言接口的复杂性和编译器依赖性。
                              </p>
                           </li>
                           <li>
                              <p>在OLTP中安装忘记/恢复事务。这些在<code class="codeph">pgareco.asm</code>文件中提供。必须可以通过APPC访问忘记/恢复事务，以便网关可以在成功提交后调用它们忘记事务，并在恢复处理期间查询事务的状态。这些事务会删除特定Oracle的条目<a id="d8806e3461" class="indexterm-anchor"></a>在忘记处理期间来自OLTP提交确认事务日志数据库的全局事务ID，并在恢复处理期间从OLTP提交确认事务日志数据库查询特定Oracle全局事务ID的条目。对于z / OS和IMS / TM的Transaction Server，这些事务都是用370汇编语言编写的。
                              </p>
                           </li>
                           <li>
                              <p>使用示例commit-confirm事务日志数据库和子例程。对于Transaction Server for z / OS， <code class="codeph">pgadb2c.cob file</code>提供了示例DB2更新事务<code class="codeph">DB2C</code> 。这是一个更新DB2示例<code class="codeph">EMP</code>表的COBOL示例。对于IMS / TM，样本DLI更新事务， <code class="codeph">PGAIMSU</code> ，在提供<code class="codeph">pgaimsu.cob</code>文件。这是更新DLI示例<code class="codeph">PARTS</code>数据库的COBOL示例。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="APPCW213"></a><div class="props_rev_3"><a id="GUID-04B54C37-0458-4E94-BA62-D00F2F823AFD" name="GUID-04B54C37-0458-4E94-BA62-D00F2F823AFD"></a><h3 id="APPCW-GUID-04B54C37-0458-4E94-BA62-D00F2F823AFD" class="sect3">执行安装后程序</h3>
               <div>
                  <p>以下是您可以根据需要执行的可选步骤。建议为OLTP安装示例应用程序，以帮助您完全了解网关的工作方式以及与OLTP的接口方式。</p>
               </div><a id="APPCW214"></a><div class="props_rev_3"><a id="GUID-129F07F3-C3DC-4BCC-9C4E-10A98AB35E98" name="GUID-129F07F3-C3DC-4BCC-9C4E-10A98AB35E98"></a><h4 id="APPCW-GUID-129F07F3-C3DC-4BCC-9C4E-10A98AB35E98" class="sect4">安装示例应用程序</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Database Gateway for APPC包中包含示例PL / SQL过程和OLTP事务程序，用于演示网关的功能。提供以下样本：</p>
                        <p>APPC / MVS</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>z / OS数据集信息</p>
                           </li>
                        </ul>
                        <p>适用于z / OS的CICS Transaction Server</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>DB2查询</p>
                           </li>
                           <li>
                              <p>DB2多行查询</p>
                           </li>
                           <li>
                              <p>DB2更新</p>
                           </li>
                           <li>
                              <p>VSAM查询</p>
                           </li>
                           <li>
                              <p>VSAM更新</p>
                           </li>
                           <li>
                              <p>DLI查询</p>
                           </li>
                           <li>
                              <p>FEPI DB2查询</p>
                           </li>
                           <li>
                              <p>FEPI VSAM查询</p>
                           </li>
                        </ul>
                        <p>IMS / TM</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用IVTNO和IVTNV样本事务进行IMS查询</p>
                           </li>
                           <li>
                              <p>IMS部件查询（ <a id="d8806e3622" class="indexterm-anchor"></a> CPI-C）</p>
                           </li>
                           <li>
                              <p>IMS部件更新（CPI-C）</p>
                           </li>
                        </ul>
                        <p>在产品的后续版本中，将附加样本添加到分发介质中。示例应用程序尽可能使用随数据库产品提供的示例数据库。</p>
                        <p>对于此版本，以下目录中的<code class="codeph">README.doc</code>文件中提供了有关安装和使用示例应用程序的完整文档：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">％ORACLE_HOME％\ dg4appc \ CICS \ sample_CICS_applications.txt</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">％ORACLE_HOME％\ dg4appc \ IMS \ sample_IMS_applications.txt</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">％ORACLE_HOME％\ dg4appc \ MVS \ sample_MVS_applications.txt</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
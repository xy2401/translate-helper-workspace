<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用可扩展索引</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T07:34:53-08:00"></meta>
      <meta name="dcterms.title" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96431-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="working-with-multimedia-data-types.html" title="Previous" type="text/html"></link>
      <link rel="next" href="building-domain-indexes.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="working-with-multimedia-data-types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="building-domain-indexes.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据盒式开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="building-data-cartridges.html" property="item" typeof="WebPage"><span property="name">构建数据磁带</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用可扩展索引</li>
            </ol>
            <a id="GUID-B783991B-8682-4FF2-9491-0D5BD9B1195E" name="GUID-B783991B-8682-4FF2-9491-0D5BD9B1195E"></a><a id="ADDCI270"></a>
            
            <h2 id="ADDCI-GUID-B783991B-8682-4FF2-9491-0D5BD9B1195E" class="sect2"><span class="enumeration_chapter">7</span>使用可扩展索引</h2>
         </header>
         <div class="ind">
            <div>
               <p>可扩展索引允许您实现索引的模式以及Oracle内置的索引模式。考虑何时应创建<strong class="term">域索引</strong> ，这是使用可扩展索引框架创建的索引。
               </p>
            </div><a id="ADDCI4387"></a><div class="props_rev_3"><a id="GUID-9F66579D-20CE-4343-A998-A2E68A8E7075" name="GUID-9F66579D-20CE-4343-A998-A2E68A8E7075"></a><h3 id="ADDCI-GUID-9F66579D-20CE-4343-A998-A2E68A8E7075" class="sect3"><span class="enumeration_section">7.1</span>可扩展索引概述</h3>
               <div>
                  <p>考虑一些构建索引的术语和方法;以前从事数据库应用程序的开发人员可能对此材料很熟悉。</p>
               </div><a id="ADDCI4388"></a><div class="props_rev_3"><a id="GUID-3DDE9A31-BCC4-45E2-98B5-142ADE7E951D" name="GUID-3DDE9A31-BCC4-45E2-98B5-142ADE7E951D"></a><h4 id="ADDCI-GUID-3DDE9A31-BCC4-45E2-98B5-142ADE7E951D" class="sect4"><span class="enumeration_section">7.1.1</span>索引的目的</h4>
                  <div>
                     <p>利用数据库中的大量数据，索引可以更快，更高效地定位和检索数据。无论是引用数据库中的记录还是技术手册中的文本，索引中的条目都表示它们引用的项目有三个方面：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该项目是什么（“关于Mary Lee的员工信息”或“可扩展索引的定义”）</p>
                        </li>
                        <li>
                           <p>项目在哪里（“记录号1000”或“第100页”）</p>
                        </li>
                        <li>
                           <p>项目的存储方式（“在连续的记录系列中”或“作为页面上的文本”）</p>
                        </li>
                     </ul>
                     <p>大多数数据集可以用几种不同的方式编制索引。为了提供最有用和最有效的数据访问，选择正确的索引方式通常至关重要。这是因为没有索引方法对于每个应用程序都是最佳的。</p>
                     <p>数据库应用程序通常使用查询检索数据，查询通常在选择可用数据的子集时使用索引。查询在用于表达它们的运算符中可以根本不同，因此在提供最佳访问的索引方法中也是如此。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>要了解哪些销售人员在旧金山办事处工作，您需要一个检查相等性的运营商。散列结构非常有效地处理相等运算符。</p>
                        </li>
                        <li>
                           <p>要了解哪些销售人员的收入超过<span class="italic">x</span>但小于<span class="italic">y</span> ，您需要一个检查范围的运营商。B树结构更好地处理面向范围的查询。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4389"></a><div class="props_rev_3"><a id="GUID-441EAE28-E229-47F8-9A7E-8B1BFE2F7651" name="GUID-441EAE28-E229-47F8-9A7E-8B1BFE2F7651"></a><h4 id="ADDCI-GUID-441EAE28-E229-47F8-9A7E-8B1BFE2F7651" class="sect4"><span class="enumeration_section">7.1.2</span>可扩展索引的目的</h4>
                  <div>
                     <p>数据库不断整合新类型的信息，这些信息更复杂，更具体，适用于某些任务，如医疗或多媒体应用。结果，查询变得越来越复杂，他们必须扫描的数据量继续增长。Oracle提供了可扩展的索引框架，因此您可以根据数据和应用程序定制索引方法，从而提高性能和易用性。</p>
                     <p>使用可扩展索引，您的应用程序</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>定义索引的结构</p>
                        </li>
                        <li>
                           <p>存储索引数据，可以在Oracle数据库内部（例如，以索引组织表的形式）存储在Oracle数据库之外</p>
                        </li>
                        <li>
                           <p>管理，检索和使用索引数据来评估用户查询</p>
                        </li>
                     </ul>
                     <p>因此，您的应用程序控制索引的结构和语义内容。数据库系统与您的应用程序协作以构建，维护和使用域索引。因此，您可以创建索引以执行特定于您工作的域的任务，并且您的用户使用您定义的运算符组成具有正常外观的查询。</p>
                  </div>
               </div><a id="ADDCI4390"></a><div class="props_rev_3"><a id="GUID-5BAC179A-5B93-4E41-9DD8-0E3EFB5791E2" name="GUID-5BAC179A-5B93-4E41-9DD8-0E3EFB5791E2"></a><h4 id="ADDCI-GUID-5BAC179A-5B93-4E41-9DD8-0E3EFB5791E2" class="sect4"><span class="enumeration_section">7.1.3</span>何时使用可扩展索引</h4>
                  <div>
                     <p>Oracle的内置索引工具适用于大量情况。但是，随着数据变得越来越复杂并且应用程序针对特定域而定制，出现需要其他方法的情况。例如，可扩展索引可以帮助您解决以下问题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用专门的索引结构实现新的搜索运算符</p>
                           <p>您可以使用索引结构定义运算符以执行专门的搜索。</p>
                        </li>
                        <li>
                           <p>索引非结构化数据</p>
                           <p>内置工具无法索引包含<code class="codeph">LOB</code>值的列。
                           </p>
                        </li>
                        <li>
                           <p>索引列对象的属性</p>
                           <p>内置工具无法索引列对象或集合类型的元素。</p>
                        </li>
                        <li>
                           <p>索引值来自特定于域的操作</p>
                           <p>Oracle对象类型可以与地图函数或订单函数进行比较。如果对象使用map函数，则可以定义基于函数的索引，以用于评估关系谓词。但是，这仅适用于参数有限范围的谓词;必须可以预先计算所有行的函数值。此外，您不能使用顺序函数来构造索引。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4391"></a><div class="props_rev_3"><a id="GUID-83DE3EFA-426C-4D53-B8EF-FDE7ACBFCD43" name="GUID-83DE3EFA-426C-4D53-B8EF-FDE7ACBFCD43"></a><h4 id="ADDCI-GUID-83DE3EFA-426C-4D53-B8EF-FDE7ACBFCD43" class="sect4"><span class="enumeration_section">7.1.4</span>指数结构</h4>
                  <div>
                     <p>考虑一些常用的索引结构，它们说明了域索引设计者可用的选择。</p>
                  </div><a id="ADDCI4393"></a><a id="ADDCI4392"></a><div class="props_rev_3"><a id="GUID-659056BA-CDB6-4284-BDC9-404A223CE112" name="GUID-659056BA-CDB6-4284-BDC9-404A223CE112"></a><h5 id="ADDCI-GUID-659056BA-CDB6-4284-BDC9-404A223CE112" class="sect5"><span class="enumeration_section">7.1.4.1</span> B树</h5>
                     <div>
                        <p>没有索引结构可以满足所有需求，但自平衡B树索引最接近于优化大型数据集上的搜索性能。每个B树节点包含多个键和指针。特定B树支持的节点中的最大键数是该树的顺序。每个节点都有一个潜在的订单+ 1指向它下面的水平。例如， <a href="using-extensible-indexing.html#GUID-659056BA-CDB6-4284-BDC9-404A223CE112__BABGJBDH">图7-1</a>中<a href="using-extensible-indexing.html#GUID-659056BA-CDB6-4284-BDC9-404A223CE112__BABGJBDH">所示</a>的order = 2 B-tree具有树指针：对于其值小于第一个键的子节点，对于其值大于第一个键且小于第二个键的子节点。 ，以及值大于第二个键的子节点。因此，B树算法通过比二叉树算法中通过更少的节点来最小化定位记录所需的读取和写入次数，二叉树算法对于每个决策节点仅具有一个密钥并且最多具有两个子节点。在这里，我们描述了<strong class="term">Knuth</strong>变体，其中索引由两部分组成：一个提供对数据的快速顺序访问的序列集，以及一个提供对序列集的直接访问的索引集。
                        </p>
                        <p>尽管B树的节点通常不包含相同数量的数据值，并且它们通常包含一定量的未使用空间，但B树算法确保树保持平衡并且叶节点处于相同的位置水平。</p>
                        <div class="figure" id="GUID-659056BA-CDB6-4284-BDC9-404A223CE112__BABGJBDH">
                           <p class="titleinfigure">图7-1 B树索引结构</p><img src="img/addci034.gif" alt="下面是图7-1的描述" title="下面是图7-1的描述" longdesc="img_text/addci034.html"><br><a href="img_text/addci034.html">“图7-1 B树索引结构”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="ADDCI4395"></a><a id="ADDCI4394"></a><div class="props_rev_3"><a id="GUID-C0ED9C3A-CBA4-419F-91DC-5DAEA07CF44E" name="GUID-C0ED9C3A-CBA4-419F-91DC-5DAEA07CF44E"></a><h5 id="ADDCI-GUID-C0ED9C3A-CBA4-419F-91DC-5DAEA07CF44E" class="sect5"><span class="enumeration_section">7.1.4.2</span>哈希</h5>
                     <div>
                        <p>散列可以根据给定的字段值快速直接访问特定的存储记录。每个记录都放在一个位置，其地址被计算为该记录的某个字段的某个函数。相同的函数用于插入和检索。</p>
                        <p>散列的问题在于记录的物理排序与它们的逻辑排序几乎没有任何关系。此外，磁盘上可能有大量未使用的区域。</p>
                        <div class="figure" id="GUID-C0ED9C3A-CBA4-419F-91DC-5DAEA07CF44E__GUID-56C7EF2F-856E-4013-A1B2-F9B75C53FC02">
                           <p class="titleinfigure">图7-2哈希索引结构</p><img src="img/addci035.gif" alt="下面是图7-2的描述" title="下面是图7-2的描述" longdesc="img_text/addci035.html"><br><a href="img_text/addci035.html">“图7-2哈希索引结构”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="ADDCI4397"></a><a id="ADDCI4396"></a><div class="props_rev_3"><a id="GUID-C002A64C-34D9-48E8-936C-650FD39D66BF" name="GUID-C002A64C-34D9-48E8-936C-650FD39D66BF"></a><h5 id="ADDCI-GUID-C002A64C-34D9-48E8-936C-650FD39D66BF" class="sect5"><span class="enumeration_section">7.1.4.3</span> kd树</h5>
                     <div>
                        <p>具有两个维度的数据，例如纬度和经度，可以使用称为二维树的kd树的变体有效地存储和检索。</p>
                        <p>在该结构中，每个节点是具有用于信息的字段的数据类型，两个坐标，以及可以指向两个子节点的左链接和右链接。</p>
                        <div class="figure" id="GUID-C002A64C-34D9-48E8-936C-650FD39D66BF__GUID-5A2FDD0B-DF27-4930-8F6D-935CFC04D495">
                           <p class="titleinfigure">图7-3二维索引结构</p><img src="img/addci036.gif" alt="下面是图7-3的描述" title="下面是图7-3的描述" longdesc="img_text/addci036.html"><br><a href="img_text/addci036.html">“图7-3二维指数结构”的描述</a></div>
                        <!-- class="figure" -->
                        <p>这种结构很适合范围查询。也就是说，如果用户指定点（xx，xx）和距离，则查询返回原始点的指定距离内的所有点的集合。</p>
                        <p>二维树很容易实现。但是，因为包含<span class="italic">k个</span>节点的2-d树的高度为<span class="italic">k</span> ，所以插入和查询可能很复杂。
                        </p>
                     </div>
                  </div><a id="ADDCI4399"></a><a id="ADDCI4398"></a><div class="props_rev_3"><a id="GUID-9444A37D-CBC9-42B5-BE5A-9F175AF869AA" name="GUID-9444A37D-CBC9-42B5-BE5A-9F175AF869AA"></a><h5 id="ADDCI-GUID-9444A37D-CBC9-42B5-BE5A-9F175AF869AA" class="sect5"><span class="enumeration_section">7.1.4.4</span>点四叉树</h5>
                     <div>
                        <div class="section">
                           <p><a href="using-extensible-indexing.html#GUID-9444A37D-CBC9-42B5-BE5A-9F175AF869AA__CHDICFEG">图7-4中</a>的点四叉树也用于表示二维空间中的点数据，但是这些结构将区域划分为四个部分，其中二维树将区域划分为两个。该节点的记录类型的字段包括信息属性，两个坐标和四个指向四个孩子的罗盘点（例如NW，SW，NE，SE）。
                           </p>
                           <div class="figure" id="GUID-9444A37D-CBC9-42B5-BE5A-9F175AF869AA__CHDICFEG">
                              <p class="titleinfigure">图7-4点四叉树索引结构</p><img src="img/addci038.gif" alt="下面是图7-4的描述" title="下面是图7-4的描述" longdesc="img_text/addci038.html"><br><a href="img_text/addci038.html">“图7-4点四叉树指数结构”的描述</a></div>
                           <!-- class="figure" -->
                           <p>像二维树一样，点四叉树很容易实现。然而，含有<span class="italic">k个</span>节点的点四叉树可具有<span class="italic">k</span>的高度，使插入和查询可能是复杂的。每次比较都需要对至少两个坐标进行比较。然而，在实践中，从根到叶的长度往往在点四叉树中更短。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADDCI4400"></a><div class="props_rev_3"><a id="GUID-A14AC661-145B-49FA-80E0-DBA42919BD4B" name="GUID-A14AC661-145B-49FA-80E0-DBA42919BD4B"></a><h3 id="ADDCI-GUID-A14AC661-145B-49FA-80E0-DBA42919BD4B" class="sect3"><span class="enumeration_section">7.2</span>可扩展索引框架</h3>
               <div>
                  <p>可扩展索引框架是一个基于SQL的接口，允许您定义特定于域的运算符和索引方案，并将它们集成到Oracle服务器中。</p>
                  <p>可扩展索引框架由以下组件组成：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><strong class="term">Indextypes</strong> ：indextype架构对象指定管理特定于应用程序的索引的定义，维护和扫描操作的例程。indextype告诉Oracle服务器如何在表的列或对象的属性上建立用户定义的索引。
                        </p>
                     </li>
                     <li>
                        <p><strong class="term">域索引</strong> ：使用索引类型创建的特定于应用程序的索引称为a <a id="d18683e764" class="indexterm-anchor"></a>域索引，因为它索引特定于应用程序的域中的数据。域索引是由indextype指定的例程创建，管理和访问的索引的实例。
                        </p>
                     </li>
                     <li>
                        <p><strong class="term">运算符</strong> ：查询和数据操作语句可以使用特定于应用程序的运算符，例如空间域中的<code class="codeph">Overlaps</code>运算符。用户定义的运算符绑定到函数。它们也可以使用索引进行评估。例如，可以使用哈希索引来评估相等运算符。indextype为它定义的运算符提供基于索引的实现。
                        </p>
                     </li>
                     <li>
                        <p><strong class="term">索引组织表</strong> ：使用索引组织表，您的应用程序可以使用表隐喻定义，构建，维护和访问复杂对象的索引。对于应用程序，索引被建模为表，其中每行是索引条目。索引组织表处理重复索引条目，这对于复杂类型的数据很重要。
                        </p>
                     </li>
                  </ul>
                  <p>可扩展索引框架允许您执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将特定于应用程序的索引管理例程封装为indextype架构对象。</p>
                     </li>
                     <li>
                        <p>在表列上定义域索引。</p>
                     </li>
                     <li>
                        <p>有效地处理特定应用的运营商。</p>
                     </li>
                  </ul>
                  <p>使用可扩展索引框架，您可以构建一个与任何其他Oracle索引非常相似的域索引。用户使用您定义的运算符编写标准查询。要创建，删除，截断，修改和搜索域索引，Oracle服务器会调用您指定的应用程序代码作为indextype的一部分。</p>
                  <div class="infoboxnotealso" id="GUID-A14AC661-145B-49FA-80E0-DBA42919BD4B__GUID-AC6064E6-260D-41C7-90EB-DCC397CD494A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="defining-operators.html#GUID-E10C1C49-E5DA-45E9-959D-E203DD964FBF">定义运算符</a>以获取有关用户定义的运算<a href="defining-operators.html#GUID-E10C1C49-E5DA-45E9-959D-E203DD964FBF">符</a>的详细信息</p>
                        </li>
                        <li>
                           <p>有关索引组织表的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ADMIN-GUID-707B02F5-E589-4C20-8E2E-5ED4F7888702" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADDCI4401"></a><div class="props_rev_3"><a id="GUID-1E58987D-CF40-460F-8A59-DD23E37FFED2" name="GUID-1E58987D-CF40-460F-8A59-DD23E37FFED2"></a><h3 id="ADDCI-GUID-1E58987D-CF40-460F-8A59-DD23E37FFED2" class="sect3"><span class="enumeration_section">7.3</span>使用Text Indextype</h3>
               <div>
                  <p>考虑一个带有骨架示例的可扩展索引框架，它使用<code class="codeph">Text</code>索引类型定义新的文本索引方案，并使用<code class="codeph">Text</code>索引类型对文本数据进行索引和操作。
                  </p>
               </div><a id="ADDCI4402"></a><div class="props_rev_3"><a id="GUID-81226E18-D2F5-4FE8-9883-F4ECDB0B9C82" name="GUID-81226E18-D2F5-4FE8-9883-F4ECDB0B9C82"></a><h4 id="ADDCI-GUID-81226E18-D2F5-4FE8-9883-F4ECDB0B9C82" class="sect4"><span class="enumeration_section">7.3.1</span>定义索引类型</h4>
                  <div>
                     <p>创建索引类型组件的顺序取决于您是否要创建基于索引的功能实现。</p>
                  </div><a id="ADDCI4403"></a><div class="props_rev_3"><a id="GUID-0E4DE524-0FF5-440A-8B84-A1DB8AF24C2A" name="GUID-0E4DE524-0FF5-440A-8B84-A1DB8AF24C2A"></a><h5 id="ADDCI-GUID-0E4DE524-0FF5-440A-8B84-A1DB8AF24C2A" class="sect5"><span class="enumeration_section">7.3.1.1</span>非基于索引的功能实现</h5>
                     <div>
                        <div class="section">
                           <p>要定义<code class="codeph">Text</code>索引类型，indextype设计器必须遵循以下步骤：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>为受支持的运算符定义和编写功能实现</span><div>
                                 <p><code class="codeph">Text</code> indextype支持名为<code class="codeph">Contains</code>的运算符，该运算符接受文本值和键，并返回一个数字，指示文本是否包含键。此运算符的功能实现是一个常规函数，定义如下：</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION TextContains（文本IN VARCHAR2，键入VARCHAR2）返回数字开始.......END TextContains;</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建新运算符并将其绑定到功能实现</span><div><pre class="oac_no_warn" dir="ltr">CREATE OPERATOR包含BINDING（VARCHAR2，VARCHAR2）返回NUMBER使用TextContains;</pre></div>
                           </li>
                           <li class="stepexpand"><span>定义实现索引接口<code class="codeph">ODCIIndex</code>的类型</span><div>
                                 <p>这涉及实现索引定义，索引维护和索引扫描操作的例程。Oracle致电：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>索引定义例程<a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a> ， <a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>和<a href="extensible-indexing-interface.html#GUID-F128CB3B-6B3E-41C3-A623-67BCB5BC9292">ODCIIndexDrop（）</a>在创建，更改或删除索引时执行适当的操作，或者基表被截断</p>
                                    </li>
                                    <li>
                                       <p>索引维护例程<a href="extensible-indexing-interface.html#GUID-EF42025B-6DE2-4F2A-90EF-62775EE0EED6">ODCIIndexInsert（）</a> ， <a href="extensible-indexing-interface.html#GUID-4B2E080D-FE8B-4598-9084-56FBE255196B">ODCIIndexDelete（）</a>和<a href="extensible-indexing-interface.html#GUID-CB42E738-EFD1-4053-9DDF-BEF455F92815">ODCIIndexUpdate（）</a>在插入，删除或更新表行时维护文本索引</p>
                                    </li>
                                    <li>
                                       <p>索引扫描例程<a href="extensible-indexing-interface.html#GUID-53F2321C-B0F8-4783-AC1B-056372A0C073">ODCIIndexStart（）</a> ， <a href="extensible-indexing-interface.html#GUID-BB601420-A858-46E3-A9AC-3433220D4F82">ODCIIndexFetch（）</a>和<a href="extensible-indexing-interface.html#GUID-2F49CDE4-C064-4644-948C-BBF014FDD8C8">ODCIIndexClose（）</a>扫描文本索引并检索满足运算符谓词的基表行</p>
                                    </li>
                                 </ul><pre class="oac_no_warn" dir="ltr">CREATE TYPE TextIndexMethods（STATIC FUNCTION ODCIIndexCreate（...）...）; CREATE TYPE BODY TextIndexMethods（...）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建<code class="codeph">Text</code> indextype架构对象</span><div>
                                 <p>indextype定义指定新indextype支持的运算符和实现索引接口的类型。</p><pre class="oac_no_warn" dir="ltr">CREATE INDEXTYPE TextIndexType FOR Contains（VARCHAR2，VARCHAR2）使用TextIndexMethods与SYSTEM MANAGED STORAGE TABLES;</pre></div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADDCI4404"></a><div class="props_rev_3"><a id="GUID-70A2AF5D-6781-489A-8013-8C519DE8331F" name="GUID-70A2AF5D-6781-489A-8013-8C519DE8331F"></a><h5 id="ADDCI-GUID-70A2AF5D-6781-489A-8013-8C519DE8331F" class="sect5"><span class="enumeration_section">7.3.1.2</span>基于索引的功能实现</h5>
                     <div>
                        <div class="section">
                           <p>如果要创建基于索引的功能实现，则执行与非基于索引的功能实现相同的操作，但顺序不同。此顺序是必需的，因为基于索引的功能实现的定义需要实现类型作为参数。</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>定义实现类型</span></li>
                           <li><span>定义和编写功能实现</span></li>
                           <li><span>创建运算符</span></li>
                           <li><span>创建索引类型</span></li>
                        </ol>
                     </div>
                  </div>
               </div><a id="ADDCI4405"></a><div class="props_rev_3"><a id="GUID-B0B785A6-B8E2-4D04-A17E-F88A16BE6E0C" name="GUID-B0B785A6-B8E2-4D04-A17E-F88A16BE6E0C"></a><h4 id="ADDCI-GUID-B0B785A6-B8E2-4D04-A17E-F88A16BE6E0C" class="sect4"><span class="enumeration_section">7.3.2</span>使用Indextype</h4>
                  <div>
                     <div class="section">
                        <p>成功定义<code class="codeph">Text</code>索引类型后，用户可以在文本列上定义文本索引，并使用<code class="codeph">Contains</code>运算符查询文本数据。
                        </p>
                        <p>假设<code class="codeph">MyEmployees</code>表由<a href="using-extensible-indexing.html#GUID-1522A7C4-F4B7-4D98-A1FF-3A0295915A56__BHCBEFIG">例7-1中</a>的语句定义。
                        </p>
                        <p>要在<code class="codeph">resume</code>列上构建文本域索引，用户将在<a href="using-extensible-indexing.html#GUID-0B5F6E24-8CC5-48FB-9872-DDB9C64424EE__BHCDABIJ">示例7-2中</a>发出该语句。
                        </p>
                        <p>要查询<code class="codeph">resume</code>列中的文本数据，用户将发出类似于<a href="using-extensible-indexing.html#GUID-E3B104A5-CC63-44E8-B1BB-C690A21E4F5E__BHCGJIHA">例7-3中的</a>语句。查询执行使用<code class="codeph">resume</code>上的文本索引来评估<code class="codeph">Contains</code>谓词。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADDCI4406"></a><div class="props_rev_3"><a id="GUID-1522A7C4-F4B7-4D98-A1FF-3A0295915A56" name="GUID-1522A7C4-F4B7-4D98-A1FF-3A0295915A56"></a><h5 id="ADDCI-GUID-1522A7C4-F4B7-4D98-A1FF-3A0295915A56" class="sect5"><span class="enumeration_section">7.3.2.1</span>声明新表</h5>
                     <div>
                        <div class="example" id="GUID-1522A7C4-F4B7-4D98-A1FF-3A0295915A56__BHCBEFIG">
                           <p class="titleinexample">例7-1声明一个新表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE MyEmployees（employee_id NUMBER（6），first_name VARCHAR2（20），last_name VARCHAR2（25），salary NUMBER（8,2），resume VARCHAR2（2000），location VARCHAR2（200），department_id NUMBER（4））;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4407"></a><div class="props_rev_3"><a id="GUID-0B5F6E24-8CC5-48FB-9872-DDB9C64424EE" name="GUID-0B5F6E24-8CC5-48FB-9872-DDB9C64424EE"></a><h5 id="ADDCI-GUID-0B5F6E24-8CC5-48FB-9872-DDB9C64424EE" class="sect5"><span class="enumeration_section">7.3.2.2</span>为表构建文本域索引</h5>
                     <div>
                        <div class="example" id="GUID-0B5F6E24-8CC5-48FB-9872-DDB9C64424EE__BHCDABIJ">
                           <p class="titleinexample">示例7-2构建文本域索引</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX ResumeIndex ON MyEmployees（resume）INDEXTYPE IS TextIndexType;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4408"></a><div class="props_rev_3"><a id="GUID-E3B104A5-CC63-44E8-B1BB-C690A21E4F5E" name="GUID-E3B104A5-CC63-44E8-B1BB-C690A21E4F5E"></a><h5 id="ADDCI-GUID-E3B104A5-CC63-44E8-B1BB-C690A21E4F5E" class="sect5"><span class="enumeration_section">7.3.2.3</span>使用Contains（）运算符查询表</h5>
                     <div>
                        <div class="example" id="GUID-E3B104A5-CC63-44E8-B1BB-C690A21E4F5E__BHCGJIHA">
                           <p class="titleinexample">示例7-3使用Contains（）运算符</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM MyEmployees WHERE Contains（resume，'Oracle'）= 1;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>APPROX_PERCENTILE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="APPROX_MEDIAN.html" title="Previous" type="text/html"></link>
      <link rel="next" href="APPROX_PERCENTILE_AGG.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="APPROX_MEDIAN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="APPROX_PERCENTILE_AGG.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">APPROX_PERCENTILE</li>
            </ol>
            <a id="GUID-70D54091-EE2F-4283-A10B-1AB5A1242FE2" name="GUID-70D54091-EE2F-4283-A10B-1AB5A1242FE2"></a>
            
            <h2 id="SQLRF-GUID-70D54091-EE2F-4283-A10B-1AB5A1242FE2" class="sect2">APPROX_PERCENTILE</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-70D54091-EE2F-4283-A10B-1AB5A1242FE2__GUID-3D35715C-C9AE-43DC-9A5C-55F4D72D22D2">句法</p>
                  <div class="figure" id="GUID-70D54091-EE2F-4283-A10B-1AB5A1242FE2__GUID-49890A75-01C1-400A-BCCE-F0A9D906BD6E"><img src="img/approx_percentile.gif" alt="下面是approx_percentile.eps的描述" title="下面是approx_percentile.eps的描述" longdesc="img_text/approx_percentile.html"><br><a href="img_text/approx_percentile.html">说明about_percentile.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-70D54091-EE2F-4283-A10B-1AB5A1242FE2__GUID-A33AF009-F000-4729-9C80-BDF5797652E0">目的</p>
                  <p><code class="codeph">APPROX_PERCENTILE</code>是近似逆分布函数。它采用百分位值和排序规范，并返回相对于排序规范将落入该百分位值的值。在计算中忽略空值</p>
                  <p>此函数提供<code class="codeph">PERCENTILE_CONT</code>和<code class="codeph">PERCENTILE_DISC</code>函数的替代函数，它返回精确结果。<code class="codeph">APPROX_PERCENTILE</code>处理大量数据的速度明显快于<code class="codeph">PERCENTILE_CONT</code>和<code class="codeph">PERCENTILE_DISC</code> ，与精确结果的偏差可以忽略不计。
                  </p>
                  <p>第一个<span class="italic"><code class="codeph">expr</code></span>是百分位数值，必须求值为0到1之间的数值。
                  </p>
                  <p>第二个<span class="italic"><code class="codeph">expr</code></span>是<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句的一部分，是一个表达式，该函数计算结果。<span class="italic"><code class="codeph">expr</code></span>的可接受数据类型以及此函数的返回值数据类型取决于您使用<code class="codeph">DETERMINISTIC</code>子句指定的算法。
                  </p>
                  <p><span class="bold">确定性</span></p>
                  <p>此子句允许您指定此函数用于计算返回值的算法类型。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果指定<code class="codeph">DETERMINISTIC</code> ，则此函数计算确定性结果。在这种情况下， <code class="codeph">ORDER</code> <code class="codeph">BY</code>子句表达式必须求值为数值，或者可以隐式转换为数值的值，范围为-2,147,483,648到2,147,483,647。该函数将数字输入舍入为最接近的整数。该函数返回与<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句表达式的数字数据类型相同的数据类型。返回值不一定是<span class="italic"><code class="codeph">expr</code></span>的值之一</p>
                     </li>
                     <li>
                        <p>如果省略<code class="codeph">DETERMINSTIC</code> ，则此函数计算非确定性结果。在这种情况下， <code class="codeph">ORDER</code> <code class="codeph">BY</code>子句表达式必须求值为numeric或datetime值，或者可以隐式转换为numeric或datetime值的值。该函数返回与<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句表达式的numeric或datetime数据类型相同的数据类型。返回值是<span class="italic"><code class="codeph">expr</code></span>的值之一。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">ERROR_RATE |置信度</span></p>
                  <p>这些子句可让您确定此函数计算结果的准确性。如果指定其中一个子句，则该函数将返回一个从0到1（包括0和1）的十进制值，而不是返回将落入<span class="italic"><code class="codeph">expr</code></span>的指定百分位值的值，而是表示以下值之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果指定<code class="codeph">ERROR_RATE</code> ，则返回值表示用于计算将落入<span class="italic"><code class="codeph">expr</code></span>的指定百分位值的值的错误率。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">CONFIDENCE</code> ，则返回值表示指定<code class="codeph">ERROR_RATE</code>时返回的错误率的置信度。</p>
                     </li>
                  </ul>
                  <p><span class="bold">DESC | ASC</span></p>
                  <p>指定用于计算将落入指定百分位值的值的排序规范。指定<code class="codeph">DESC</code>以按<code class="codeph">DESC</code>对<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句表达式值进行排序，或指定<code class="codeph">ASC</code>以按升序对值进行排序。<code class="codeph">ASC</code>是默认值。
                  </p>
                  <div class="infoboxnotealso" id="GUID-70D54091-EE2F-4283-A10B-1AB5A1242FE2__GUID-B196B8A7-CF5A-4A24-9ED4-651E2AA4A9A9">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="PERCENTILE_CONT.html#GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0">PERCENTILE_CONT</a>和<a href="PERCENTILE_DISC.html#GUID-7C34FDDA-C241-474F-8C5C-50CC0182E005">PERCENTILE_DISC</a></p>
                        </li>
                        <li>
                           <p><a href="APPROX_MEDIAN.html#GUID-F6A11DF2-121A-4057-9D0B-BF1A221B5622">APPROX_MEDIAN</a> ，这是的具体情况下<code class="codeph">APPROX_PERCENTILE</code>其中百分值为0.5</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-70D54091-EE2F-4283-A10B-1AB5A1242FE2__GUID-CB7E3569-26BF-4FE1-9CF8-9B1A020E4C2C">例子</p>
                  <p>以下查询返回<code class="codeph">hr</code>每个部门的确定性大约第25百分位数，第50百分位数和第75百分位工资。 <code class="codeph">employees</code>表。工资按升序排序以进行插值计算。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT department_id“部门”，APPROX_PERCENTILE（0.25决定性）在组内（按工资ASC排序）“25％百分位薪水”，APPROX_PERCENTILE（0.50决定性）在组内（按工资ASC排序）“第50百分位薪资”，APPROX_PERCENTILE（0.75 DETERMINISTIC）WITHIN GROUP（ORDER BY salary ASC）“75th Percentile Salary”FROM employees GROUP BY department_id ORDER BY department_id;部门第25百分位薪水第50百分位薪水第75百分位薪资---------- ---------------------- -------- -------------- ---------------------- 10 4400 4400 4400 20 6000 6000 13000 30 2633 2765 3100 40 6500 6500 6500 50 2600 3100 3599 60 4800 4800 6000 70 10000 10000 10000 80 7400 9003 10291 90 17000 17000 24000 100 7698 7739 8976 110 8300 8300 12006 7000 7000 7000</pre><p>以下查询返回在上一个查询中计算的大约25个百分位工资的错误率：</p><pre class="oac_no_warn" dir="ltr">SELECT department_id“Department”，APPROX_PERCENTILE（0.25 DETERMINISTIC，'ERROR_RATE'）WITHIN GROUP（ORDER BY salary ASC）“Error Rate”FROM employees GROUP BY department_id ORDER BY department_id;部错误率---------- ---------- 10 .002718282 20 .021746255 30 .021746255 40 .002718282 50 .019027973 60 .019027973 70 .002718282 80 .021746255 90 .021746255 100 .019027973 110 .019027973 .002718282</pre><p>以下查询返回上一个查询中计算的错误率的置信度：</p><pre class="oac_no_warn" dir="ltr">SELECT department_id“部门”，APPROX_PERCENTILE（0.25决定性，'信心'）在组内（按工资ASC排序）“信心”来自员工GROUP BY department_id ORDER BY department_id;部门信心---------- ---------- 10 .997281718 20 .999660215 30 .999660215 40 .997281718 50 .999611674 60 .999611674 70 .997281718 80 .999660215 90 .999660215 100 .999611674 110 .999611674 .997281718</pre><p>以下查询返回<code class="codeph">hr</code>每个部门的非确定性约25个百分位数，第50个百分位数和第75个百分位工资。 <code class="codeph">employees</code>表。工资按升序排序以进行插值计算。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT department_id“部门”，APPROX_PERCENTILE（0.25）WITHIN GROUP（按工资ASC排序）“25％百分比薪资”，APPROX_PERCENTILE（0.50）WITHIN GROUP（按工资ASC排序）“50％百分比薪资”，APPROX_PERCENTILE（0.75）在组内（订单） BY薪水ASC）“75％百分比薪资”来自员工GROUP BY department_id ORDER BY department_id;部门第25百分位薪水第50百分位薪水第75百分位薪资---------- ---------------------- -------- -------------- ---------------------- 10 4400 4400 4400 20 6000 6000 13000 30 2600 2800 3100 40 6500 6500 6500 50 2600 3100 3600 60 4800 4800 6000 70 10000 10000 10000 80 7300 8800 10000 90 17000 17000 24000 100 7700 7800 9000 110 8300 8300 12008 7000 7000 7000</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
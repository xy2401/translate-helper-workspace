<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Provides an overview of Oracle Real Application Clusters (Oracle RAC) installation and administration, and various components and functions."></meta>
      <meta name="description" content="Provides an overview of Oracle Real Application Clusters (Oracle RAC) installation and administration, and various components and functions."></meta>
      <title>Oracle RAC简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta property="og:description" content="Provides an overview of Oracle Real Application Clusters (Oracle RAC) installation and administration, and various components and functions."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00"></meta>
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95728-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="changes-in-this-release-for-oracle-real-application-clusters-administration-and-deployment-guide.html" title="Previous" type="text/html"></link>
      <link rel="next" href="administering-storage-in-oracle-rac.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="changes-in-this-release-for-oracle-real-application-clusters-administration-and-deployment-guide.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="administering-storage-in-oracle-rac.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters管理和部署指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle RAC简介</li>
            </ol>
            <a id="GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92" name="GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92"></a><a id="RACAD1111"></a>
            
            <h2 id="RACAD-GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92" class="sect2"><span class="enumeration_chapter">1</span> Oracle RAC简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>概述了Oracle Real Application Clusters（Oracle RAC）的安装和管理，以及各种组件和功能。</p>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E" title="本主题介绍了Oracle RAC及其功能。">Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E" title="使用Oracle Universal Installer安装Oracle Grid Infrastructure和Oracle Database软件，并使用Database Configuration Assistant（DBCA）创建数据库。">安装Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6" title="Oracle Real Application Clusters One节点（Oracle RAC One Node）是自Oracle Database 11g第2版（11.2）以来可用的Oracle数据库企业版选件。">Oracle Real Application Clusters One Node概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A" title="Oracle Clusterware在所有Oracle数据库平台上提供完整的集成式集群件管理解决方案。">Oracle Clusterware for Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03" title="Oracle RAC环境中的所有节点都必须连接到至少一个局域网（LAN）（通常称为公共网络），以使用户和应用程序能够访问数据库。应用程序应使用动态数据库服务功能通过公共网络连接到Oracle数据库。有效节点检查功能提供配置和动态更新侦听器允许注册请求的一组IP地址或子网的功能。Oracle RAC数据库通常有两个或更多数据库实例，每个实例包含内存结构和后台进程。">Oracle RAC体系结构和处理概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-75EE86C1-E690-4624-BA83-DFB83234156C" title="服务表示具有共同属性，服务级别阈值和优先级的应用程序组。">动态数据库服务自动工作负载管理概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" title="服务器池是策略管理数据库的基础。">服务器池和策略管理数据库概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" title="Oracle数据库服务质量管理（Oracle数据库QoS管理）是一种基于策略的自动化产品，可监控整个系统的工作负载请求。">Oracle数据库服务质量管理概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-249A970C-4650-485E-9E11-EFC70FDF3079" title="Hang Manager是Oracle数据库功能，可自动检测并解决系统挂起问题。">Hang Manager概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33" title="Oracle Multitenant是Oracle Database 12c的一个选项，可简化整合，配置，升级等。">Oracle Multitenant与Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" title="每个Oracle RAC节点都有自己的内存（IM）列存储。默认情况下，填充的对象分布在群集中的所有IM列存储中。">数据库内存和Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-74F4FF89-688A-4DE4-9592-1D96E851013C" title="任何使用Oracle RAC设计和实施高可用性策略的企业都必须首先对需要高可用性的业务驱动程序进行全面分析。您可以使用服务器控制实用程序（SRVCTL），Oracle Enterprise Manager，SQL * Plus和其他实用程序将群集数据库作为单系统映像进行管理。基于Web的Oracle Enterprise Manager Cloud Control使您可以监视Oracle RAC数据库。">管理Oracle RAC环境概述</a></p>
                  </li>
               </ul>
            </div><a id="RACAD8887"></a><a id="RACAD7270"></a><div class="sect2"><a id="GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E" name="GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E"></a><h3 id="RACAD-GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E" class="sect3">Oracle RAC概述</h3>
               <div>
                  <p>本主题介绍了Oracle RAC及其功能。</p>
                  <p>非集群Oracle数据库在Oracle数据库和实例之间具有一对一的关系。但是，Oracle RAC环境在数据库和实例之间具有一对多关系。Oracle RAC数据库可以有多个实例，所有实例都访问一个数据库。所有数据库实例必须使用相同的互连，Oracle Clusterware也可以使用该互连。</p>
                  <p>Oracle RAC数据库在体系结构上与非集群Oracle数据库的不同之处在于，每个Oracle RAC数据库实例还具有：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>每个实例至少有一个额外的重做线程</p>
                     </li>
                     <li>
                        <p>特定于实例的撤消表空间</p>
                     </li>
                  </ul>
                  <p>与单个服务器相比，多个服务器的综合处理能力可提供更高的吞吐量和Oracle RAC可扩展性。</p>
                  <p><a href="glossary.html#GUID-1B7C963C-0E0C-425E-AD47-D75C912230CB"><span class="xrefglossterm">群集</span></a>包含多个互连的计算机或服务器，看起来好像它们是最终用户和应用程序的一个服务器。Oracle数据库的Oracle RAC选项使您可以集群Oracle数据库。Oracle RAC使用Oracle Clusterware将基础架构绑定到多个服务器，以便它们作为单个系统运行。
                  </p>
                  <p>Oracle Clusterware是一种与Oracle数据库集成的可移植集群管理解决方案。Oracle Clusterware是使用Oracle RAC的必需组件，它提供运行Oracle RAC所需的基础结构。 Oracle Clusterware还管理资源，例如<a href="glossary.html#GUID-918C3356-9A2D-4A62-84B3-3C0290971BD9"><span class="xrefglossterm">虚拟Internet协议（VIP）</span></a>地址，数据库，侦听器，服务等。此外，Oracle Clusterware还允许非群集Oracle数据库和Oracle RAC数据库使用Oracle高可用性基础架构。Oracle Clusterware与Oracle自动存储管理（Oracle ASM）（两者共同构成<a href="glossary.html#GUID-D9337CD1-B7A6-473D-9590-939D04ACED56"><span class="xrefglossterm">Oracle Grid Infrastructure</span></a> ）使您能够创建一个群集存储池，供任何非群集和Oracle RAC数据库组合使用。
                  </p>
                  <p>Oracle Clusterware是Oracle RAC运行的大多数平台所需的唯一集群件。如果您的数据库应用程序需要供应商集群件，那么如果该供应商集群件已通过Oracle RAC认证，则可以将此类集群件与Oracle Clusterware结合使用。</p>
                  <p><a href="introduction-to-oracle-rac.html#GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E__BABHCCAE">图1-1</a>显示了Oracle RAC是Oracle数据库选项如何为多个服务器提供单个系统映像以访问一个Oracle数据库。在Oracle RAC中，每个Oracle实例必须在单独的服务器上运行。
                  </p>
                  <div class="figure" id="GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E__BABHCCAE">
                     <p class="titleinfigure">图1-1 Oracle RAC架构的Oracle数据库</p><img src="img/haovw002.gif" width="421" alt="下面是图1-1的描述" title="下面是图1-1的描述" longdesc="img_text/haovw002.html"><br><a href="img_text/haovw002.html">“图1-1 Oracle数据库与Oracle RAC架构”的描述</a></div>
                  <!-- class="figure" -->
                  <p>传统上，Oracle RAC环境位于一个数据中心。但是，您可以在<a href="glossary.html#GUID-A0C837CD-9E57-4EC9-AA24-18511C0C5B07"><span class="xrefglossterm">Oracle扩展群集</span></a>上配置Oracle RAC，这是一种从站点故障中提供极快恢复的体系结构，并允许所有站点上的所有节点作为单个数据库群集的一部分主动处理事务。在扩展集群中，集群中的节点通常在地理上分散，例如在两个火单元之间，两个房间或建筑物之间，或两个不同的数据中心或城市之间。出于可用性原因，数据必须位于两个站点，因此需要实施磁盘镜像技术以进行存储。
                  </p>
                  <p>如果您选择实施此架构，则必须评估此架构是否适合您的业务，特别是考虑距离，延迟及其提供的保护程度。扩展集群上的Oracle RAC提供的可用性高于本地Oracle RAC配置，但扩展集群可能无法满足组织的所有灾难恢复要求。可行的分离为某些灾难提供了极大的保护（例如，当地停电或服务器机房洪水），但它无法提供针对所有类型中断的保护。为了全面防范灾难 - 包括防止损坏和区域性灾难 -  Oracle建议将Oracle Data Guard与Oracle RAC结合使用，如<span><cite>Oracle Data Guard概念和管理</cite></span>以及最高可用性架构（MAA）网站中所述。
                  </p>
                  <p>Oracle RAC是一种独特的技术，可为所有应用程序类型提供高可用性和可伸缩性。Oracle RAC基础架构也是实施Oracle企业网格计算架构的关键组件。让多个实例访问单个数据库可防止服务器成为单点故障。Oracle RAC使您能够将较小的商用服务器组合到一个集群中，以创建支持关键任务业务应用程序的可扩展环境。您在Oracle RAC数据库上部署的应用程序无需更改代码即可运行。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../cwadd/introduction-to-oracle-clusterware.html#CWADD-GUID-58F85575-7D88-4D45-B097-6274FBBBB646" target="_blank">Oracle Clusterware简介</a></li>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                        <li><a href="../sbydb/configuring-data-guard-standby-databases-in-oracle-RAC.html#SBYDB-GUID-084DF97B-5524-401A-BAA4-65BA279F5B11" target="_blank">Oracle Data Guard和Oracle Real Application Clusters</a></li>
                        <li><a href="http://www.oracle.com/au/products/database/maa-096107.html" target="_blank">最高可用性架构（MAA）</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD03261"></a><div class="sect2"><a id="GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E" name="GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E"></a><h3 id="RACAD-GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E" class="sect3">安装Oracle RAC概述</h3>
               <div>
                  <p>使用Oracle Universal Installer安装Oracle Grid Infrastructure和Oracle Database软件，并使用Database Configuration Assistant（DBCA）创建数据库。</p>
                  <p>这可确保您的Oracle RAC环境具有所选环境的最佳网络配置，数据库结构和参数设置。</p>
                  <p>或者，您可以使用Fleet Patching and Provisioning安装Oracle RAC，它提供了之前指定的Oracle Universal Installer和DBCA的所有优点。此外，Fleet Patching和Provisioning允许标准化和自动化。</p>
                  <p>本节介绍Oracle RAC在以下主题下的安装过程：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-11942C40-7052-48CE-BA1E-C92587F5936E">了解Oracle RAC环境中的兼容性</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C">Oracle RAC数据库管理样式和数据库安装</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" title="Oracle数据库部署的一部分是创建数据库。">Oracle RAC数据库管理样式和数据库创建</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-918558E3-24DC-4145-A073-4A4A20BE97C2" title="如果要在初始部署后扩展Oracle RAC集群（也称为克隆）并将节点添加到现有环境，则必须考虑当前在集群中使用的管理样式，在多个层上执行此操作。">扩展Oracle RAC集群概述</a></p>
                        <div class="infoboxnote" id="GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E__GUID-8832EECE-F3E8-4615-A4A9-CF3F05FB8C46">
                           <p class="notep1">注意：</p>
                           <p>在安装Oracle RAC之前，必须先安装Oracle Grid Infrastructure。</p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>“Oracle Real Application Clusters安装指南”</cite></span></a></li>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD7277"></a><div class="sect3"><a id="GUID-11942C40-7052-48CE-BA1E-C92587F5936E" name="GUID-11942C40-7052-48CE-BA1E-C92587F5936E"></a><h4 id="RACAD-GUID-11942C40-7052-48CE-BA1E-C92587F5936E" class="sect4">了解Oracle RAC环境中的兼容性</h4>
                  <div>
                     <p>要在同一群集中使用不同版本的Oracle数据库的配置中运行Oracle RAC，必须首先安装Oracle Grid Infrastructure，它必须与要在此群集中部署的Oracle数据库的最高版本相同或更高版本。例如，要在同一群集中运行Oracle RAC 12 <span class="italic">c</span>数据库和Oracle RAC 18c数据库，必须安装Oracle Grid Infrastructure 18c。有关Oracle RAC环境中版本兼容性的更多信息，请与My Oracle Support联系。
                     </p>
                     <div class="infoboxnote" id="GUID-11942C40-7052-48CE-BA1E-C92587F5936E__GUID-A4E13CBC-3079-4247-A960-506A15843509">
                        <p class="notep1">注意：</p>
                        <p>Oracle不支持在部署的Oracle9 <span class="italic">我</span>在Oracle网格基础架构<span class="italic">12c的</span>群集或更高版本，环境。
                        </p>
                     </div>
                  </div>
               </div><a id="RACAD7278"></a><div class="sect3"><a id="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C" name="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C"></a><h4 id="RACAD-GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C" class="sect4">Oracle RAC数据库管理样式和数据库安装</h4>
                  <div>
                     <p>在安装Oracle RAC数据库软件和创建相应数据库之前，请确定要应用于Oracle RAC数据库的管理方式，如<span class="q">“服务器池和策略管理数据库概述”中所述</span> 。
                     </p>
                     <p>您选择的管理方式会影响软件部署和数据库创建。如果选择管理员管理的数据库部署模型，使用每个节点的软件安装，那么仅在您计划运行Oracle数据库的节点上部署Oracle数据库软件（数据库主目录）就足够了。</p>
                     <p>如果选择策略管理的部署模型，使用每个节点的软件安装，那么必须在集群中的所有节点上部署软件，因为原则上，服务器到服务器池的动态分配无法预测服务器数据库实例可能会运行。为避免不承载相应数据库主目录的服务器上的实例启动失败，Oracle强烈建议您在群集中的所有节点上部署数据库软件。使用共享Oracle数据库主目录时，假定从群集中的所有节点访问此主目录，并且设置需要确保根据需要在所有服务器上安装相应的文件系统。</p>
                     <p>如果您之前为群集安装并配置了Oracle Grid Infrastructure，Oracle Universal Installer将仅允许您跨群集中的节点部署Oracle数据库主目录。如果Oracle Universal Installer没有为您提供在群集中的所有节点上部署数据库的选项，请按照Oracle Universal Installer的说明检查先决条件。</p>
                     <p>在安装期间，您可以选择在数据库主目录安装期间创建数据库。Oracle Universal Installer根据您选择的选项运行DBCA以创建Oracle RAC数据库。</p>
                     <div class="infoboxnotealso" id="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C__GUID-5668356C-BAC4-4EC7-AFE6-814E3189BDDF">
                        <p class="notep1">也可以看看：</p>
                        <p>如果选择此选项，请参阅<span class="q">“Oracle RAC数据库管理样式和数据库创建”</span>以获取更多信息</p>
                     </div>
                     <div class="infoboxnote" id="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C__GUID-5287E1E6-21C5-4A47-940B-6A03FED8F1B1">
                        <p class="notep1">注意：</p>
                        <p>在创建数据库之前，必须在Oracle Grid Infrastructure主目录中运行默认侦听器。如果Oracle Grid Infrastructure主目录中没有默认侦听器，则DBCA将返回错误，指示您从Oracle Grid Infrastructure主目录运行NETCA以创建默认侦听器。</p>
                     </div>
                     <p>Oracle RAC软件作为Oracle数据库安装介质的一部分进行分发。默认情况下，Oracle数据库软件安装过程会在识别出您正在群集上执行安装时安装Oracle RAC选项。Oracle Universal Installer将Oracle RAC安装到称为Oracle主目录的目录结构中，该目录结构与系统上运行的其他Oracle软件的Oracle主目录分开。由于Oracle Universal Installer可识别群集，因此它会在您定义为群集一部分的所有节点上安装Oracle RAC软件。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="introduction-to-oracle-rac.html#GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" title="服务器池是策略管理数据库的基础。">服务器池和策略管理数据库概述</a></li>
                           <li><a href="introduction-to-oracle-rac.html#GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" title="Oracle数据库部署的一部分是创建数据库。">Oracle RAC数据库管理样式和数据库创建</a></li>
                           <li><a href="../netag/managing-oracle-net-services.html#NETAG-GUID-D8861C13-A525-4A57-97FD-BD8F2DC5A662" target="_blank"><span><cite>Oracle数据库网络服务管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8905"></a><div class="sect3"><a id="GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" name="GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506"></a><h4 id="RACAD-GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" class="sect4">Oracle RAC数据库管理样式和数据库创建</h4>
                  <div>
                     <p>Oracle数据库部署的一部分是创建数据库。</p>
                     <p>您可以选择创建数据库作为数据库软件部署的一部分，如<span class="q">“Oracle RAC数据库管理样式和数据库安装”中所述</span> ，或者您可以选择仅部署数据库软件，然后再创建任何数据库这意味着使用DBCA耗尽新创建的Oracle主目录。在任何一种情况下，您都必须考虑计划用于Oracle RAC数据库的管理方式。
                     </p>
                     <p>对于管理员管理的数据库，必须确保在计划运行相应数据库实例的节点上部署数据库软件。您还必须确保这些节点可以访问要在其中存储数据库文件的存储。Oracle建议您在数据库安装期间选择Oracle ASM以简化存储管理。Oracle ASM自动管理磁盘组中所有数据库文件的存储。如果计划使用Oracle Database Standard Edition创建Oracle RAC数据库，则<span class="italic">必须</span>使用Oracle ASM存储所有数据库文件。
                     </p>
                     <p>对于策略管理的数据库，在给定活动服务器池设置的情况下，必须确保数据库软件部署在可能运行数据库实例的所有节点上。您还必须确保这些节点可以访问要在其中存储数据库文件的存储。Oracle建议使用Oracle ASM，如前面针对管理员管理的数据库所述。</p>
                     <p>服务器池是Oracle Grid Infrastructure（特别是Oracle Clusterware）的一项功能。您可以通过不同的方式在Oracle Clusterware级别上设置服务器池，Oracle建议您在创建相应的数据库之前为数据库管理创建服务器池。但是，在创建策略管理的数据库时，DBCA将为您提供使用预创建的服务器池或创建新的服务器池的选择。是否可以在创建数据库期间创建新的服务器池取决于当时处于活动状态的服务器池配置。</p>
                     <p>默认情况下，DBCA为Oracle RAC安装创建一个服务。这是默认数据库服务，不应用于用户连接。通常使用<code class="codeph">DB_NAME</code>和<code class="codeph">DB_DOMAIN</code>初始化参数的组合来标识缺省数据库服务： <code class="codeph"><span class="variable" translate="no">db_name.db_domain</span></code> 。除非数据库处于受限模式，否则默认服务在Oracle RAC环境中的所有实例上都可用。
                     </p>
                     <div class="infoboxnote" id="GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506__GUID-A3557EF3-5EFE-4F60-9834-316CE649506B">
                        <p class="notep1">注意：</p>
                        <p>Oracle建议您使用SRVCTL或Oracle Enterprise Manager为维护操作保留默认数据库服务，并为用户或应用程序连接创建动态数据库服务，作为数据库创建后步骤。DBCA不再为Oracle RAC数据库提供动态数据库服务创建选项。对于Oracle RAC One Node数据库，您必须至少创建一个动态数据库服务。</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="introduction-to-oracle-rac.html#GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C">Oracle RAC数据库管理样式和数据库安装</a></li>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-42F6324B-8A51-4FDE-9E9B-38B058F227A5" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD1113"></a><div class="sect3"><a id="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2" name="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2"></a><h4 id="RACAD-GUID-918558E3-24DC-4145-A073-4A4A20BE97C2" class="sect4">扩展Oracle RAC集群概述</h4>
                  <div>
                     <p>如果要在初始部署后扩展Oracle RAC集群（也称为克隆）并将节点添加到现有环境，则必须考虑当前在集群中使用的管理样式，在多个层上执行此操作。</p>
                     <p>Oracle提供了各种扩展Oracle RAC集群的方法。原则上，您可以选择以下方法来扩展当前环境：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Fleet Patching和Provisioning用于配置新的Oracle RAC数据库和其他软件</p>
                        </li>
                        <li>
                           <p>使用克隆脚本进行克隆</p>
                        </li>
                        <li>
                           <p>使用添加节点<code class="codeph">addnode.sh</code> （ <code class="codeph">addnode.bat</code>在Windows上）脚本</p>
                        </li>
                     </ul>
                     <p>无论您最初如何部署环境，这两种方法都适用。这两种方法都将所需的Oracle软件复制到您计划添加到群集的节点上。复制到节点的软件包括Oracle Grid Infrastructure软件和Oracle数据库主目录。</p>
                     <p>对于Oracle数据库主目录，您必须考虑在群集中部署的管理样式。对于管理员管理的数据库，必须确保在计划运行相应数据库实例的节点上部署数据库软件。对于策略管理的数据库，在给定活动服务器池设置的情况下，必须确保数据库软件部署在可能运行数据库实例的所有节点上。在任何一种情况下，您必须首先在要成为群集一部分的所有节点上部署Oracle Grid Infrastructure。</p>
                     <div class="infoboxnote" id="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2__GUID-1938526B-7663-42EC-BFF8-1AC341AD964D">
                        <p class="notep1">注意：</p>
                        <p>Oracle克隆不能替代使用Oracle Enterprise Manager作为Provisioning Pack的一部分进行克隆。使用Oracle Enterprise Manager克隆Oracle RAC时，配置过程包括一系列步骤，其中收集有关要捕获的主目录，要部署的位置以及各种其他参数的详细信息。</p>
                     </div>
                     <p>对于新安装或仅安装一个Oracle RAC数据库，请使用传统的自动和交互式安装方法，例如Oracle Universal Installer，Fleet Patching和Provisioning，或Oracle Enterprise Manager的Provisioning Pack功能。如果您的目标是从群集中的节点添加或删除Oracle RAC，则可以使用<span class="q">“在Linux和UNIX系统上从节点添加和删除Oracle RAC”中</span>详述的过程。
                     </p>
                     <p>克隆过程假定您已在至少一个节点上成功安装了Oracle Clusterware主目录和Oracle RAC的Oracle主目录。此外，所有根脚本必须已在您从中扩展群集数据库的节点上成功运行。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" title="本章介绍如何将Linux和UNIX系统上的Oracle Real Application Clusters（Oracle RAC）数据库主目录克隆到新群集中的节点。">将Oracle RAC克隆到新群集中的节点</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-66AB702E-D600-4B10-9BF3-AC0E7C7BF44D" title="将现有Oracle Real Application Clusters（Oracle RAC）主目录扩展到群集中的其他节点和实例，并从群集中的节点和实例中删除Oracle RAC。">在Linux和UNIX系统上从节点添加和删除Oracle RAC</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB" title="您可以使用Oracle Enterprise Manager或DBCA将Oracle RAC数据库实例添加到目标节点。将实例添加到已扩展Oracle Clusterware主目录和Oracle数据库主目录的节点。对于策略管理和管理员管理的数据库，删除实例的过程是不同的。此过程从要从群集中删除的节点中删除Oracle RAC软件，并更新其余节点上的清单。">在Windows系统上从节点添加和删除Oracle RAC</a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/racad&amp;id=CWADD-GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2__GUID-57B875BB-8920-4750-9510-63D83E487AA7">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关Fleet Patch和Provisioning的详细信息，请参阅<span><cite>“Oracle Clusterware管理和部署指南”</cite></span></p>
                           </li>
                           <li>
                              <p>有关Provisioning Pack的详细信息，请参见Oracle Enterprise Manager联机帮助系统</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD8960"></a><div class="sect2"><a id="GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6" name="GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6"></a><h3 id="RACAD-GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6" class="sect3">Oracle Real Application Clusters One Node概述</h3>
               <div>
                  <p>Oracle Real Application Clusters One节点（Oracle RAC One Node）是自Oracle Database <span class="italic">11g第</span> 2版（11.2）以来可用的Oracle数据库企业版选件。
                  </p>
                  <p>Oracle RAC One Node是在正常操作下仅在群集中的一个节点上运行的启用Oracle RAC的数据库的单个实例。此选项增加了Oracle为数据库整合提供的灵活性，同时通过为企业中的Oracle数据库提供标准部署来降低管理开销。Oracle RAC One Node数据库需要Oracle Grid Infrastructure，因此需要与Oracle RAC数据库相同的硬件设置。</p>
                  <p>Oracle在所有经过Oracle RAC认证的平台上支持Oracle RAC One Node。与Oracle RAC类似，Oracle RAC One Node已通过Oracle虚拟机（Oracle VM）认证。使用Oracle RAC或Oracle RAC One Node与Oracle VM通过Oracle RAC的高可用性和可扩展性增强了Oracle VM的优势。</p>
                  <p>使用Oracle RAC One Node，服务器可扩展性没有限制，如果应用程序增长到需要比单个节点提供的资源更多的资源，那么您可以将应用程序在线升级到Oracle RAC。如果运行Oracle RAC One Node的节点过载，则可以将实例重定位到群集中的另一个节点。使用Oracle RAC One Node，您可以使用联机数据库重定位功能重新定位数据库实例，而不会使应用程序用户停机。或者，您可以使用资源管理器实例锁定限制群集中每个服务器的单个数据库实例的CPU消耗，并根据需求方案动态更改此限制（如果需要）。</p>
                  <p>使用单客户端访问名称（SCAN）连接到数据库，客户端可以独立于运行它的节点定位服务。因此，重定位Oracle RAC One Node实例对客户端来说几乎是透明的，具体取决于客户端连接。Oracle建议使用应用程序连续性和Oracle快速应用程序通知或透明应用程序故障转移来最小化重定位对客户端的影响。</p>
                  <p>Oracle RAC One Node数据库的管理方式与Oracle RAC或非群集数据库略有不同。对于管理员管理的Oracle RAC One Node数据库，您必须监视候选节点列表，并确保服务器始终可用于故障转移（如果可能）。候选服务器驻留在通用服务器池中，数据库及其服务将故障转移到其中一个服务器。</p>
                  <p>对于策略管理的Oracle RAC One Node数据库，必须确保配置服务器池，以便服务器可供数据库故障转移，以防其当前节点不可用。在这种情况下，联机数据库重定位的目标节点必须位于数据库所在的服务器池中。或者，您可以使用大小为1的服务器池（服务器池中的一个服务器），将最小大小设置为1，并且相对于群集中使用的所有其他服务器池的重要性足够高，以确保在失败时根据需要，服务器池中使用的一台服务器，另一台服务器池中的新服务器或空闲服务器池将重定位到服务器池中。</p>
                  <div class="infoboxnote" id="GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6__GUID-F0914FAD-410D-434A-A94E-ACCA4F2454C0">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle RAC One Node支持故障客户端的事务防护和应用程序连续性。</p>
                        </li>
                        <li>
                           <p>要准备所有故障可能性，必须至少将一个动态数据库服务（Oracle Clusterware管理的数据库服务）添加到Oracle RAC One Node数据库。</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../rilin/installing-oracle-rac-and-oracle-rac-one-node.html#RILIN-GUID-15AAC8E3-5AF7-48B7-BD53-EFE662FA669A" target="_blank"><span><cite>适用于Linux和UNIX的Oracle Real Application Clusters安装指南</cite></span></a></li>
                        <li><a href="ensuring-application-continuity.html#GUID-097A5067-8CCF-4FF0-B97B-BF109DFA1841" title="Transaction Guard可防止应用程序连续性重播的事务被多次应用。">用于改善客户端故障转移的事务防护</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD0015"></a><div class="sect2"><a id="GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A" name="GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A"></a><h3 id="RACAD-GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A" class="sect3">Oracle Clusterware for Oracle RAC概述</h3>
               <div>
                  <p>Oracle Clusterware在所有Oracle数据库平台上提供完整的集成式集群件管理解决方案。</p>
                  <p>此集群件功能提供管理集群数据库所需的所有功能，包括节点成员资格，组服务，全局资源管理和高可用性功能。</p>
                  <p>您可以单独安装Oracle Clusterware，也可以将其作为Oracle RAC安装过程的先决条件。Oracle数据库功能（如服务）使用底层Oracle Clusterware机制来提供高级功能。Oracle数据库还继续支持指定平台上的某些第三方集群件产品。</p>
                  <p>Oracle Clusterware专为Oracle RAC设计并与之紧密集成。您可以使用Oracle Clusterware管理群集中的高可用性操作。使用任何管理工具创建Oracle RAC数据库时，数据库将由Oracle Clusterware注册并由其管理，以及其他必需组件，如VIP地址，单客户端访问名称（SCAN）（包括SCAN） VIP和SCAN侦听器），Oracle Notification Service和Oracle Net侦听器。这些资源在节点启动时自动启动，如果失败则自动重启。Oracle Clusterware守护程序在每个节点上运行。</p>
                  <p>Oracle Clusterware管理的任何内容称为<span class="italic">CRS资源</span> 。CRS资源可以是数据库，实例，服务，侦听器，VIP地址或应用程序进程。Oracle Clusterware根据存储在Oracle Cluster Registry（OCR）中的资源配置信息管理CRS资源。您可以使用SRVCTL命令管理任何Oracle定义的CRS资源。Oracle Clusterware提供的框架使您能够创建CRS资源，以管理群集中未由Oracle预定义的服务器上运行的任何进程。Oracle Clusterware将描述这些组件配置的信息存储在您可以管理的OCR中。
                  </p>
                  <p>Oracle Flex Clusters的另一个优点是您可以将Hub节点转换为Leaf节点，反之亦然，您可以将Leaf节点转换为Hub节点而无需停机。</p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41" title="Oracle Flex Clusters为各种应用程序提供了一个平台，包括具有大量节点的Oracle RAC数据库。">Oracle Flex集群概述</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998" title="Reader节点是在Oracle Flex Cluster中的叶节点上运行的Oracle RAC数据库的实例。">读者节点概述</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F" title="Oracle使用本地临时表空间将溢出内容写入在读取器节点上的本地磁盘上创建的本地（非共享）临时表空间。">本地临时表空间概述</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../cwadd/managing-oracle-cluster-registry-and-voting-files.html#CWADD-GUID-20101C89-B87C-49C9-BA63-634376EDB62E" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        <li><a href="../cwadd/oracle-flex-clusters.html#CWADD-GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41" name="GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41"></a><h4 id="RACAD-GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41" class="sect4">Oracle Flex集群概述</h4>
                  <div>
                     <p>Oracle Flex Clusters为各种应用程序提供了一个平台，包括具有大量节点的Oracle RAC数据库。</p>
                     <p>Oracle Flex Clusters还为其他服务部署提供了一个平台，需要协调和自动化以实现高可用性。</p>
                     <p>Oracle Flex Cluster中的所有节点都属于单个Oracle Grid Infrastructure集群。此体系结构集中了基于应用程序需求部署资源的策略决策，以考虑各种服务级别，负载，故障响应和恢复。</p>
                     <p>Oracle Flex Clusters包含以中心和分支架构排列的两种类型的节点： <a href="glossary.html#GUID-8AD68754-1C50-408B-82A9-61D132FC09F9"><span class="xrefglossterm">Hub Node</span></a>和<a href="glossary.html#GUID-57A8F9FA-9AA0-4F47-828D-22B38FE7B924"><span class="xrefglossterm">Leaf Node</span></a> 。Oracle Flex Cluster中的Hub节点数可以多达64个。Leaf节点的数量可以更多。集线器节点和叶节点可以托管不同类型的应用程序。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/oracle-flex-clusters.html#CWADD-GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998" name="GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998"></a><h4 id="RACAD-GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998" class="sect4">读者节点概述</h4>
                  <div>
                     <p>Reader节点是在Oracle Flex Cluster中的叶节点上运行的Oracle RAC数据库的实例。</p>
                     <p>使用读取器节点的一个优点是，如果需要重新配置集线器节点，这些实例不会受到影响。在读取器节点上运行的并行查询作业不受重新配置集线器节点时可能发生的掉电时间的影响，并且可以继续为连接到读取器节点的客户端提供服务，只要它连接到的集线器节点是没有被赶出集群。每个集线器节点最多可以扩展到64个读取器节点，读取器节点可以利用大规模并行查询来加速对大型数据集的操作。</p>
                     <p>在读取器节点上运行的数据库实例与在Hub节点上运行的数据库实例具有不同的特征Hub节点实例类似于先前版本的Oracle RAC数据库实例，而在读取器节点上运行的实例具有以下显着差异：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库实例以只读模式运行。</p>
                        </li>
                        <li>
                           <p>如果重新配置集线器节点集群件，则数据库实例不受影响。在读取器节点上运行的数据库实例不受掉电时间的影响，并且可以继续为连接到读取器节点的客户端提供服务，只要它所连接的集线器节点不从集群中逐出。使用读取器节点，每个集线器最多可扩展到64个读取器节点。</p>
                        </li>
                        <li>
                           <p>由于在读取器节点上运行的数据库实例是只读的，因此如果尝试任何DDL或DML操作，将收到错误。</p>
                        </li>
                     </ul>
                     <p>您可以创建服务以将查询定向到在读取器节点上运行的只读实例。这些服务可以使用并行查询来进一步加快性能。Oracle建议您尽可能高地调整这些读取器节点中的内存大小，以便并行查询可以使用内存来获得最佳性能。</p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F" name="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F"></a><h4 id="RACAD-GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F" class="sect4">本地临时表空间概述</h4>
                  <div>
                     <p>Oracle使用本地临时表空间将溢出内容写入在读取器节点上的本地磁盘上创建的本地（非共享）临时表空间。</p>
                     <p>SQL操作仍然可能，例如散列聚合，排序，散列连接，为<code class="codeph">WITH</code>子句创建游标持续时间临时表，以及星形转换溢出到磁盘（特别是共享磁盘上的全局临时表空间）。本地临时表空间的管理类似于现有临时表空间的管理。
                     </p>
                     <p>本地临时表空间通过以下方式改进了只读实例中的临时表空间管理：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将临时文件存储在读取器节点专用存储中，以利用本地存储的I / O优势。</p>
                        </li>
                        <li>
                           <p>避免昂贵的跨实例临时表空间管理。</p>
                        </li>
                        <li>
                           <p>增加了临时表空间的可寻址性。</p>
                        </li>
                        <li>
                           <p>通过消除磁盘空间元数据管理来提高实例预热性能。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-D6ACD8BF-2373-4F09-B885-EE33022074F1">
                        <p class="notep1">注意：</p>您不能使用本地临时表空间来存储数据库对象，例如表或索引。对于Oracle全局临时表的空间，同样的限制也是如此。
                     </div>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__PARALLELEXECUTIONSUPPORTFORCURSOR-D-054A7763">游标持续时间临时表空间的并行执行支持</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEORGANIZATIO-054A79AC">本地临时表空间组织</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__TEMPORARYTABLESPACEHIERARCHY-054A7B94">临时表空间层次结构</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFEATURES-054A807A">本地临时表空间功能</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__METADATAMANAGEMENTOFLOCALTEMPORARYF-054A8203">本地临时文件的元数据管理</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__DDLSUPPORTFORLOCALTEMPORARYTABLESPA-054A8408">DDL支持本地临时表空间</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFORUSERS-054A86C7">用户的本地临时表空间</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__ATOMICITYREQUIREMENTFORCOMMANDS-054A88E3">命令的原子性要求</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEANDDICTIONA-054A8C42">本地临时表空间和字典视图</a></p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__PARALLELEXECUTIONSUPPORTFORCURSOR-D-054A7763">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-B21F4FB0-E49A-4310-A0A1-DB7AECE19B1D">游标持续时间临时表空间的并行执行支持</p>
                        <p>为<code class="codeph">WITH</code>子句和星型转换创建的临时表空间存在于共享磁盘上的临时表空间中。一组并行查询子进程将中间查询结果加载到这些临时表空间中，然后由不同的子进程集读取这些表空间。对于如何分配读取这些结果的子进程没有限制，因为任何实例上的任何并行查询子进程都可以读取驻留在共享磁盘上的临时表空间。
                        </p>
                        <p>对于读写和只读实例体系结构，当并行查询子进程将中间结果加载到这些实例的本地临时表空间时，属于存储中间结果的实例的并行查询子进程与读取共享关联中间结果，因此可以阅读它们。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEORGANIZATIO-054A79AC">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-FF6A5E9D-486D-4F2C-AF33-35FC90B02A3D">本地临时表空间组织</p>
                        <p>您可以使用<code class="codeph">{FOR_RIM | FOR ALL}</code>创建本地临时表空间<code class="codeph">{FOR_RIM | FOR ALL}</code>扩展，如下：</p><pre class="pre codeblock"><code>为RIM创建本地临时表格local_temp_ts_for_rim TEMPFILE \'/ u01 / app / oracle / database/12.2.0.1 / dbs / temp_file_rim'\ EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre><ul style="list-style-type:disc">
                           <li>
                              <p>创建本地临时表空间会导致在每个实例上创建本地临时文件而不是单个文件，这对于共享全局临时表空间来说是正确的。</p>
                           </li>
                           <li>
                              <p>您可以为只读和读写实例创建本地临时表空间。<code class="codeph">LOCAL...FOR RIM</code>选项创建一个本地临时表空间，其文件驻留在本地磁盘上以用于只读实例。<code class="codeph">LOCAL...FOR ALL</code>选项创建一个本地临时表空间，其文件驻留在本地磁盘上，用于读写和只读实例。例如：</p><pre class="pre codeblock"><code>为所有temp_ts_for_all创建本地临时表格TEMPFILE \'/ u01 / app / oracle / database/12.2.0.1 / dbs / temp_file_all'\ EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__TEMPORARYTABLESPACEHIERARCHY-054A7B94">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-FFF2F364-A6B3-42AE-9617-EB09B4ABD977">临时表空间层次结构</p>
                        <p>定义本地临时表空间和共享（现有）临时表空间时，存在使用它们的层次结构。要了解层次结构，请记住数据库中可以有多个共享临时表空间，例如数据库的默认共享临时表空间和分配给各个用户的多个临时表空间。如果用户分配了共享临时表空间，则首先使用该表空间，否则使用数据库缺省临时表空间。</p>
                        <p>在查询处理期间选择表空间进行溢出后，不会切换到另一个表空间。例如，如果用户分配了共享临时表空间，并且在溢出期间空间不足，则不会切换到备用表空间。在这种情况下，溢出将导致错误。此外，请记住共享临时表空间在实例之间共享。</p>
                        <p>用于溢出到本地临时表空间的临时空间的分配在只读和读写实例之间是不同的。对于只读实例，以下是选择用于溢出的临时位置的优先级：</p>
                        <ol>
                           <li>
                              <p>从用户的本地临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从数据库默认本地临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从用户的临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从数据库默认临时表空间分配。</p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-06284F3F-8921-408C-8AB5-416573E8585A">
                           <p class="notep1">注意：</p>如果数据库中没有本地临时表空间，则只读实例将溢出到共享临时表空间。
                        </div>
                        <p>对于读写实例，分配的优先级与前面的分配顺序不同，因为共享临时表空间具有优先级，如下所示：</p>
                        <ol>
                           <li>
                              <p>从用户的共享临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从用户的本地临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从数据库默认共享临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从数据库默认本地临时表空间分配。</p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-CD5915B1-0840-4D67-8858-B07C3A7F29F7">
                           <p class="notep1">注意：</p>对于使用本地临时表空间的读写实例，必须使用<code class="codeph">LOCAL...创建该临时表空间<code class="codeph">LOCAL...FOR ALL</code>选项。
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFEATURES-054A807A">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-E7B96DDE-DF2F-4DB3-B676-7DCDD778385D">本地临时表空间功能</p>
                        <p>实例无法共享本地临时表空间，因此一个实例无法从另一个实例获取本地临时表空间。如果实例在溢出期间用完临时表空间，则语句将重新发生错误。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>本地临时表空间每个表空间仅支持一个<code class="codeph">BIGFILE</code> 。
                              </p>
                           </li>
                           <li>
                              <p>为了解决仅具有一个基于<code class="codeph">BIGFILE</code>的本地临时表空间引起的争用问题，可以将多个本地临时表空间分配给不同的用户，作为默认值。
                              </p>
                           </li>
                           <li>
                              <p>数据库管理员可以使用<code class="codeph">ALTER USER</code>语法为用户指定默认临时表空间。例如：</p><pre class="pre codeblock"><code>ALTER USER MAYNARD LOCAL TEMPORARY TABLESPACE temp_ts_for_rim;</code></pre></li>
                           <li>
                              <p>用户可以配置两个默认临时表空间：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>当用户连接到在读取器节点上运行的只读实例时，一个本地临时（使用<code class="codeph">FOR RIM</code>选项创建）。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在Hub节点上运行的读写实例上连接相同用户时使用的一个共享临时表空间。</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__METADATAMANAGEMENTOFLOCALTEMPORARYF-054A8203">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-389B0E4A-56BE-4EF8-BCBC-0C64528F10C5">本地临时文件的元数据管理</p>
                        <p>目前，临时文件信息（例如文件名，创建大小，创建SCN，临时块大小和文件状态）与初始和最大文件以及自动扩展区属性一起存储在控制文件中。但是，控制文件中有关本地临时文件的信息对于所有适用的实例都是通用的（读写和只读<code class="codeph">LOCAL...FOR ALL</code> ，只读<code class="codeph">LOCAL...FOR RIM</code> ）。
                        </p>
                        <p>特定于实例的信息（例如用于分配的位图，临时文件的当前大小和文件状态）存储在SGA上的实例上，而不是存储在控制文件中，因为对于不同的实例，此信息可能不同。当实例启动时，它会读取控制文件中的信息并创建构成该实例的本地临时表空间的临时文件。如果节点上运行了两个或更多实例，则每个实例都将拥有自己的本地临时文件。</p>
                        <p>对于本地临时表空间，每个涉及的实例都有一个单独的文件。如果使用<code class="codeph">LOCAL...创建本地临时表空间<code class="codeph">LOCAL...FOR RIM</code>选项，Oracle仅在只读实例上创建文件。如果使用<code class="codeph">LOCAL...创建本地临时表空间<code class="codeph">LOCAL...FOR ALL</code>选项，然后Oracle在所有实例上创建文件。本地临时文件名遵循命名约定，以便在创建本地临时表空间时将实例编号附加到指定的临时文件名。
                        </p>
                        <p>例如，假设只读节点N1运行两个数字为3和4的Oracle只读数据库实例。以下DDL命令在节点N1- <code>/temp/temp_file_rim_3</code>和<code>/temp/temp_file_rim_4</code>上创建两个文件，例如分别为3和4：</p><pre class="pre codeblock"><code>为RIM创建本地临时表格temp_ts_for_rim TEMPFILE'/ temp / temp_file_rim'\ EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre><p>假设有两个读写实例（实例编号1和2）和两个只读实例（实例编号3和4），以下DDL命令为实例1创建四个文件<code>/temp/temp_file_all_1</code>和<code>/temp/temp_file_all_2</code>对于实例3和4，分别为2和<code>/temp/temp_file_all_3</code>和<code>/temp/temp_file_all_4</code> ：</p><pre class="pre codeblock"><code>为所有temp_ts_for_all创建本地临时表空间TEMPFILE'/ temp / temp_file_all'\ EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__DDLSUPPORTFORLOCALTEMPORARYTABLESPA-054A8408">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-6020B383-934F-494F-82AB-0CFD2694ED3E">DDL支持本地临时表空间</p>
                        <p>您可以使用<code class="codeph">ALTER TABLESPACE</code> ， <code class="codeph">ALTER DATABASE</code>或两个DDL命令管理本地临时表空间和临时文件。与本地临时表空间管理和创建相关的所有DDL命令都是从读写实例运行的。运行所有其他DDL命令将以同类方式影响所有实例。
                        </p>
                        <p>例如，以下命令调整所有只读实例上的临时文件的大小：</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim RESIZE 1G;</code></pre><p>对于本地临时表空间，Oracle支持当前对临时文件有效的分配选项及其限制。</p>
                        <p>仅在只读实例上的本地临时表空间上运行DDL命令（特别是， <code class="codeph">CREATE LOCAL TABLESPACE...FOR RIM</code>或<code class="codeph">ALTER TABLESPACE LOCAL TABLESPACE...FOR RIM</code> ），群集中必须至少有一个只读实例。创建或更改本地临时表空间<code class="codeph">FOR ALL</code>时，此限制不适用。用户可以使用<code class="codeph">ALTER DATABASE</code>命令附加的<code class="codeph">DEFAULT LOCAL TEMPORARY TABLESPACE</code>子句为数据库分配默认的本地临时表空间。
                        </p>
                        <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-B1829D8F-CE71-46BB-AC61-8FD727B48934">
                           <p class="notep1">注意：</p>注释<code class="codeph">FOR RIM</code>是不必要的，因为它由表空间的名称暗示。
                        </div>
                        <p>例如：</p><pre class="pre codeblock"><code>ALTER DATABASE DEFAULT LOCAL TEMPORARY TABLESPACE temp_ts_for_rim;</code></pre><p>数据库管理员可以在创建数据库时指定默认临时表空间，如下所示：</p><pre class="pre codeblock"><code>创建数据库..DEFAULT TEMPORARY TABLESPACE temp_ts_for_dbtemp_ts_for_rim TEMPFILE \'/ temp / temp_file_for_dbrim'EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre><p>使用<code class="codeph">CREATE DATABASE</code>命令无法指定缺省本地临时表空间。创建数据库时，其默认本地临时表空间将指向默认的共享临时表空间。数据库管理员必须运行<code class="codeph">ALTER DATABASE</code>命令以将现有本地临时表空间指定为数据库的缺省值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFORUSERS-054A86C7">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-3811732C-71A0-4A89-A965-368E40A389BC">用户的本地临时表空间</p>
                        <p>在未显式指定共享或本地临时表空间的情况下创建用户时，用户从相应的默认数据库表空间继承共享和本地临时表空间。您可以为用户指定默认本地临时表空间，如下所示：</p><pre class="pre codeblock"><code>CREATE USER <span class="variable" translate="no">new_user</span> IDENTIFIED BY <span class="variable" translate="no">new_user</span> LOCAL TEMPORARY TABLESPACE temp_ts_for_all;</code></pre><p>您可以使用<code class="codeph">ALTER USER</code>命令为用户更改本地临时表空间，如下所示：</p><pre class="pre codeblock"><code>ALTER USER maynard LOCAL TEMPORARY TABLESPACE temp_ts_for_rim;</code></pre><p>如前所述，默认用户本地临时表空间可以共享临时空间。考虑<code class="codeph">ALTER USER...的以下项目<code class="codeph">ALTER USER...TEMPORARY TABLESPACE</code>命令：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您可以将用户默认本地临时表空间更改为任何现有的本地临时表空间。</p>
                           </li>
                           <li>
                              <p>如果要将用户默认本地临时表空间设置为共享临时表空间<code class="codeph">T</code> ，则<code class="codeph">T</code>必须与默认共享临时表空间相同。
                              </p>
                           </li>
                           <li>
                              <p>如果默认用户本地临时表空间指向共享临时表空间，则在更改用户的默认共享临时表空间时，还会将默认本地临时表空间更改为该表空间。</p>
                           </li>
                        </ul>
                        <p>以下是使用<code class="codeph">ALTER</code>命令进行本地临时空间管理的一些示例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要使本地临时表空间脱机：</p><pre class="pre codeblock"><code>ALTER DATABASE TEMPFILE'/ temp / temp_file_rim'OFFLINE;</code></pre></li>
                           <li>
                              <p>要减小本地临时表空间的大小：</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim收缩空间保持20M</code></pre></li>
                           <li>
                              <p>要更改本地临时文件的自动扩展属性，请执行以下操作：</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim AUTOEXTEND ON NEXT 20G</code></pre></li>
                           <li>
                              <p>要调整本地临时文件的大小：</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim调整大小10G</code></pre><div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-2549168B-2606-4181-A770-5FA8436760D6">
                                 <p class="notep1">注意：</p>当您调整本地临时文件的大小时，它适用于单个文件。
                              </div>
                           </li>
                        </ul>
                        <p>运行上述任何命令时，某些只读实例可能会关闭。这不会阻止命令成功，因为当稍后启动只读实例时，它会根据控制文件中的信息创建临时文件。创建很快，因为Oracle仅重新格式化临时文件的标头块，记录有关文件大小的信息等。如果无法创建任何临时文件，则只读实例将保持关闭状态。在所有打开的只读实例上立即重播从读写实例提交的命令。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__ATOMICITYREQUIREMENTFORCOMMANDS-054A88E3">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-4DB1A780-7583-42C2-A1A1-B59BE684C445">命令的原子性要求</p>
                        <p>从读写实例运行的所有命令都以原子方式执行，这意味着只有在所有实例上成功时，命令才会成功。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEANDDICTIONA-054A8C42">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-87C59A8F-3C09-4ADB-A1E3-0B0909F5887C">本地临时表空间和字典视图</p>
                        <p>Oracle扩展字典视图以显示有关本地临时表空间的信息。Oracle做了以下更改：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>与通过AWR，SQL监视器和其他实用程序公开的临时表空间和临时文件相关的所有可诊断性信息也可用于本地临时表空间和本地临时文件。此信息可用于临时表空间和临时文件的现有字典视图： <code class="codeph">DBA_TEMP_FILES</code> ， <code class="codeph">DBA_TEMP_FREE_SPACE</code> 。</p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_TABLESPACES</code>和<code class="codeph">DBA_TABLESPACES</code>字典视图由名为<code class="codeph">SHARED</code>的列扩展，该列指示临时文件是本地文件（ <code class="codeph">FOR RIM</code>还是<code class="codeph">FOR ALL</code> ）还是共享文件。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DBA_TEMP_FILES</code>字典视图由两列扩展： <code class="codeph">SHARED</code>和<code class="codeph">INST_ID</code> 。 <code class="codeph">SHARED</code>列指示临时文件是本地文件（ <code class="codeph">FOR RIM</code>还是<code class="codeph">FOR ALL</code> ）还是共享文件。<code class="codeph">INST_ID</code>列包含实例编号。对于共享临时文件，每个文件只有一行， <code class="codeph">INST_ID</code>为空。对于本地临时文件，此列包含有关每个实例的临时文件的信息，例如文件大小（以字节为单位）（ <code class="codeph">BYTES</code>列）。
                              </p>
                              <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-CFD85A78-74F2-4B4E-8113-BD4459AF495B">
                                 <p class="notep1">注意：</p><code class="codeph">本地...FOR RIM</code>仅显示每个文件的只读实例。
                              </div>
                           </li>
                           <li>
                              <p><code class="codeph">DBA_TEMP_FREE_SPACE</code>字典视图扩展了两列： <code class="codeph">SHARED</code>和<code class="codeph">INST_ID</code> 。 <code class="codeph">SHARED</code>列指示临时文件是本地（ <code class="codeph">FOR RIM</code>还是<code class="codeph">FOR ALL</code> ）还是共享。<code class="codeph">INST_ID</code>列包含实例编号。对于共享临时文件，每个文件只有一行， <code class="codeph">INST_ID</code>为空。对于本地临时文件，此列包含有关每个实例的临时文件的信息，例如可用的总可用空间（ <code class="codeph">FREE_SPACE</code>列）。
                              </p>
                              <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-875375A5-323E-4365-B689-09537091F268">
                                 <p class="notep1">注意：</p><code class="codeph">本地...FOR RIM</code>仅显示每个文件的只读实例。
                              </div>
                           </li>
                           <li>
                              <p>在字典视图中，例如<code class="codeph">DBA_TABLESPACES</code> ，Oracle使用<code class="codeph">SHARED</code>列将表空间的类型与以下值区分开来：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">SHARED</code> ：用于共享临时表空间</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LOCAL_ON_ALL</code> ：用于所有实例上的本地临时表空间</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LOCAL_ON_RIM</code> ：用于只读实例上的本地临时表空间</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-5D4396A6-BC67-4D0A-BA63-D1B2159E201E">
                                 <p class="notep1">注意：</p>目前，溢出到临时表空间以进行查询（例如排序和散列连接溢出）会自动加密。溢出到本地临时表空间也是如此。
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../sqlrf/CREATE-TABLESPACE.html#SQLRF-GUID-51F07BF5-EFAF-4910-9040-C473B86A8BF9" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD7271"></a><div class="sect2"><a id="GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03" name="GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03"></a><h3 id="RACAD-GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03" class="sect3">Oracle RAC体系结构和处理概述</h3>
               <div>
                  <p>Oracle RAC至少要求Oracle Clusterware软件基础架构提供对集群中所有节点的相同存储和同一组数据文件的并发访问，这是一种用于在集群中的节点之间启用进程间通信（IPC）的通信协议，使多个数据库实例能够处理数据，就像数据驻留在逻辑上组合的单个缓存一样，以及用于监视和传递集群中节点状态的机制。</p>
                  <p>以下部分更详细地描述了这些概念：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4">了解群集感知存储解决方案</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-504A615B-C63C-43C4-A481-520DEC015EF1" title="Oracle RAC环境中的所有节点都必须连接到至少一个局域网（LAN）（通常称为公共网络），以使用户和应用程序能够访问数据库。">Oracle RAC和网络连接</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B" title="应用程序应使用动态数据库服务功能通过公共网络连接到Oracle数据库。">使用动态数据库服务连接Oracle数据库的概述</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8" title="有效节点检查功能提供配置和动态更新侦听器允许注册请求的一组IP地址或子网的功能。">Oracle RAC中的受限服务注册</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4" title="Oracle RAC数据库通常有两个或更多数据库实例，每个实例包含内存结构和后台进程。">关于Oracle RAC软件组件</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42">关于Oracle RAC后台进程</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD7272"></a><div class="sect3"><a id="GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4" name="GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4"></a><h4 id="RACAD-GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4" class="sect4">了解群集感知存储解决方案</h4>
                  <div>
                     <p>Oracle RAC数据库是一个<a id="d6446e3181" class="indexterm-anchor"></a> <a href="glossary.html#GUID-7F14B19A-BECA-4CCF-BDD0-21A6A4449B96"><span class="xrefglossterm">共享一切</span></a>数据库。Oracle RAC环境中的所有数据文件，控制文件，SPFILE和重做日志文件都必须驻留在支持群集的共享磁盘上，以便所有群集数据库实例都可以访问这些存储组件。由于Oracle RAC数据库使用共享所有内容架构，因此Oracle RAC需要针对所有数据库文件的群集感知存储。
                     </p>
                     <p>在Oracle RAC中，Oracle数据库软件管理磁盘访问，并且经过认证可用于各种存储体系结构。您可以选择如何配置存储，但必须使用支持的群集感知存储解决方案。Oracle数据库为Oracle RAC提供以下存储选项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d6446e3192" class="indexterm-anchor"></a> Oracle自动存储管理（Oracle ASM）</p>
                           <p>Oracle建议使用此解决方案来管理存储。</p>
                        </li>
                        <li>
                           <p>经过认证的集群文件系统</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Oracle建议<a id="d6446e3208" class="indexterm-anchor"></a><a id="d6446e3214" class="indexterm-anchor"></a> Oracle自动存储管理群集文件系统（Oracle ACFS）。
                                 </p>
                              </li>
                              <li>
                                 <p>支持群集的第三方群集文件系统<a id="d6446e3220" class="indexterm-anchor"></a>经过Oracle RAC认证的卷管理器。例如：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a id="d6446e3230" class="indexterm-anchor"></a> Oracle OCFS2（仅限Linux）</p>
                                    </li>
                                    <li>
                                       <p><a id="d6446e3239" class="indexterm-anchor"></a> IBM GPFS（仅限IBM AIX）</p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>认证<a id="d6446e3249" class="indexterm-anchor"></a>网络文件系统（NFS）解决方案</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RACAD7273"></a><div class="sect3"><a id="GUID-504A615B-C63C-43C4-A481-520DEC015EF1" name="GUID-504A615B-C63C-43C4-A481-520DEC015EF1"></a><h4 id="RACAD-GUID-504A615B-C63C-43C4-A481-520DEC015EF1" class="sect4">Oracle RAC和网络连接</h4>
                  <div>
                     <p>Oracle RAC环境中的所有节点都必须连接到至少一个局域网（LAN）（通常称为<span class="italic">公共网络</span> ），以使用户和应用程序能够访问数据库。
                     </p>
                     <p>除了公共网络之外，Oracle RAC还需要专用于在这些节点上运行的<a href="glossary.html#GUID-DAAF0CE2-6E9E-4DF8-9971-0A0377BEE1E8"><span class="xrefglossterm">节点</span></a>和数据库实例之间的通信的专用网络连接。该网络通常称为<span class="italic">互连</span> 。
                     </p>
                     <p>互连网络是连接群集中所有服务器的专用网络。互连网络必须至少使用一个交换机和千兆以太网适配器。</p>
                     <div class="infoboxnote" id="GUID-504A615B-C63C-43C4-A481-520DEC015EF1__GUID-95CAEF77-CA33-4297-AFF0-F77A5BB31F7D">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle支持具有更高带宽的接口，但<span class="italic">不</span>支持将交叉电缆与互连一起使用。
                              </p>
                           </li>
                           <li>
                              <p>请勿使用互连（专用网络）进行用户通信，因为<a href="glossary.html#GUID-178C264E-12FF-468C-89B5-99CD47A4B373"><span class="xrefglossterm">Cache Fusion</span></a>使用互连进行实例间通信。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>您可以将Oracle RAC配置为使用用户数据报协议（UDP）或可靠数据套接字（RDS）协议进行互连上的实例间通信。Oracle Clusterware使用UDP协议使用相同的互连，但无法配置为使用RDS。</p>
                     <p>使用<a href="glossary.html#GUID-9A54D98E-C943-43F6-9D49-3FBE35142F0B"><span class="xrefglossterm">网络连接存储（NAS）</span></a>时，需要额外的网络连接。网络附加存储可以是典型的NAS设备，例如NFS文件管理器，或者可以是使用例如IP上的光纤通道连接的存储。此附加网络通信信道应独立于Oracle RAC（公共和专用网络通信）使用的其他通信信道。如果存储网络通信必须与其他网络通信通道之一融合，则必须确保与存储相关的通信优先。
                     </p>
                  </div>
               </div><a id="RACAD8899"></a><div class="sect3"><a id="GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B" name="GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B"></a><h4 id="RACAD-GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B" class="sect4">使用动态数据库服务连接Oracle数据库的概述</h4>
                  <div>
                     <p>应用程序应使用动态数据库服务功能通过公共网络连接到Oracle数据库。</p>
                     <p>动态数据库服务使您能够定义规则和特征，以控制用户和应用程序连接到数据库实例的方式。这些特征包括唯一名称，工作负载平衡和故障转移选项以及高可用性特征。</p>
                     <p>用户可以使用客户端/服务器配置或通过一个或多个中间层访问Oracle RAC数据库，无论是否具有连接池。默认情况下，使用TCP / IP协议建立与Oracle RAC数据库的用户连接，但Oracle支持其他协议。必须通过SCAN为集群访问Oracle RAC数据库实例。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="introduction-to-oracle-rac.html#GUID-75EE86C1-E690-4624-BA83-DFB83234156C" title="服务表示具有共同属性，服务级别阈值和优先级的应用程序组。">动态数据库服务自动工作负载管理概述</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8950"></a><div class="sect3"><a id="GUID-6C72F02D-BB43-4C56-9F46-244C8D6BB670" name="GUID-6C72F02D-BB43-4C56-9F46-244C8D6BB670"></a><h4 id="RACAD-GUID-6C72F02D-BB43-4C56-9F46-244C8D6BB670" class="sect4">虚拟IP地址概述</h4>
                  <div>
                     <p>Oracle Clusterware托管公共网络上的节点虚拟IP（VIP）地址。<a id="d6446e3751" class="indexterm-anchor"></a><a id="d6446e3753" class="indexterm-anchor"></a>节点VIP是客户端用于连接Oracle RAC数据库的VIP地址。可以汇总从数据库客户端到Oracle RAC数据库实例的典型连接尝试，如下所示：</p>
                     <ol>
                        <li>
                           <p>数据库客户端连接到SCAN（包括公共网络上的SCAN VIP），为SCAN侦听器提供有效的服务名称。</p>
                        </li>
                        <li>
                           <p>然后，SCAN侦听器确定哪个数据库实例承载此服务，并将客户端路由到相应节点上的本地或节点侦听器。</p>
                        </li>
                        <li>
                           <p>侦听节点VIP和给定端口的节点侦听器检索连接请求，并将客户端连接到本地节点上的实例。</p>
                        </li>
                     </ol>
                     <p>如果在群集上使用多个公共网络来支持通过多个子网的客户端连接，则在给定子网内执行上述操作。</p>
                     <p>如果一个<a id="d6446e3772" class="indexterm-anchor"></a>节点失败，然后VIP地址故障转移到VIP地址可以接受TCP连接的另一个节点，但它不接受与Oracle数据库的连接。尝试连接到不驻留在其主节点上的VIP地址的客户端会收到<span class="italic">快速连接拒绝</span>错误，而不是等待TCP连接超时消息。当配置VIP的网络重新联机时，Oracle Clusterware会将VIP故障恢复到其接受连接的主节点。通常，VIP地址在以下情况下进行故障</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>VIP地址运行的节点失败</p>
                        </li>
                        <li>
                           <p>VIP地址的所有接口都失败</p>
                        </li>
                        <li>
                           <p>VIP地址的所有接口都与网络断开连接</p>
                        </li>
                     </ul>
                     <p>Oracle RAC 12 <span class="italic">c</span>支持<a id="d6446e3795" class="indexterm-anchor"></a><a id="d6446e3797" class="indexterm-anchor"></a>多个公共网络，以允许通过不同的子网访问群集。每个网络资源代表自己的资源<a id="d6446e3800" class="indexterm-anchor"></a>子网和每个数据库服务使用特定网络来访问Oracle RAC数据库。每个网络资源都是由Oracle Clusterware管理的资源，它支持前面描述的VIP行为。
                     </p>
                     <p>SCAN是在组织的域名服务器（DNS）或网格命名服务（GNS）中定义的单个网络名称，该服务可轮询到三个IP地址。Oracle建议与Oracle RAC数据库的所有连接在其客户端连接字符串中使用SCAN。传入连接在活动实例之间进行负载平衡，通过三个SCAN侦听器提供所请求的服务。使用SCAN，即使群集配置发生更改（添加或删除节点），也无需更改客户端连接。不像以前的版本，扫描的Oracle RAC <span class="italic">12c的</span>完全支持多个子网，这意味着您可以在您希望群集操作每个子网创建一个扫描。
                     </p>
                  </div>
               </div><a id="RACAD8900"></a><div class="sect3"><a id="GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8" name="GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8"></a><h4 id="RACAD-GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8" class="sect4">Oracle RAC中的受限服务注册</h4>
                  <div>
                     <p>有效节点检查功能提供配置和动态更新侦听器允许注册请求的一组IP地址或子网的功能。</p>
                     <p>仅当请求源自有效节点时，才能使用侦听器进行数据库实例注册。网络管理员可以指定有效节点列表，排除节点或禁用有效节点检查。有效节点列表显式列出了可以向数据库注册的节点和子网。排除节点列表显式列出了无法向数据库注册的节点。对动态注册的控制可提高Oracle RAC部署的可管理性和安全性。</p>
                     <p>默认情况下，启用有效的注册节点检查（VNCR）。在默认配置中，来自SCAN侦听器子网内所有节点的注册请求可以向侦听器注册。非SCAN侦听器仅接受来自本地节点上的实例的注册。通过使用<code class="codeph">listener.ora</code>文件中的<code class="codeph">registration_invited_nodes_ <span class="variable" translate="no">alias</span></code>参数或使用SRVCTL修改SCAN侦听器，SCAN侦听器子网外的远程节点或节点必须包含在有效节点列表中。</p>
                  </div>
               </div><a id="RACAD7274"></a><div class="sect3"><a id="GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4" name="GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4"></a><h4 id="RACAD-GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4" class="sect4">关于Oracle RAC软件组件</h4>
                  <div>
                     <p>Oracle RAC数据库通常有两个或更多数据库实例，每个实例包含内存结构和后台进程。</p>
                     <p>Oracle RAC数据库具有与非群集Oracle数据库相同的进程和内存结构，以及特定于Oracle RAC的其他进程和内存结构。任何一个实例的数据库视图几乎与同一Oracle RAC数据库中的任何其他实例视图相同;视图是环境的单个系统映像。</p>
                     <p>每个实例在其系统全局区域（SGA）中都有一个缓冲区缓存。使用缓存融合，Oracle RAC环境在逻辑上组合每个实例的缓冲区缓存，以使实例能够处理数据，就像数据驻留在逻辑上组合的单个缓存一样。</p>
                     <div class="infoboxnote" id="GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4__GUID-4B9257B8-4269-42B8-8101-73EC793721B2">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>内存中事务管理器与Cache Fusion协议集成。</p>
                           </li>
                           <li>
                              <p>由于Cache Fusion，Oracle RAC的SGA大小要求大于非群集Oracle数据库的SGA要求。</p>
                           </li>
                        </ul>
                     </div>
                     <p>为确保每个Oracle RAC数据库实例都获得满足查询或事务所需的块，Oracle RAC实例使用两个进程：全局缓存服务（GCS）和全局入队服务（GES）。GCS和GES使用全局资源目录（GRD）维护每个数据文件和每个缓存块的状态记录。GRD内容分布在所有活动实例中，这有效地增加了Oracle RAC实例的SGA大小。</p>
                     <p>在一个实例缓存数据之后，同一个集群数据库中的任何其他实例都可以从同一数据库中的另一个实例获取块映像，而不是从磁盘读取块。因此，Cache Fusion会在实例之间移动当前块，而不是从磁盘重新读取块。当需要一致的块或在另一个实例上需要更改的块时，Cache Fusion会直接在受影响的实例之间传输块映像。Oracle RAC使用专用互连进行实例间通信和块传输。GES Monitor和Instance Enqueue Process管理对Cache Fusion资源的访问并将恢复处理排入队列。\</p>
                     <p>缓存融合监控专用网络的延迟和磁盘上的服务时间，并自动选择最佳路径。如果共享磁盘包含低延迟SSD，则Oracle会自动选择最佳路径。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../inmem/concepts-for-the-im-column-store.html#INMEM-GUID-5A72B48A-8427-41AE-9220-E46042BC90C4" target="_blank"><span><cite>Oracle数据库内存指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7275"></a><div class="sect3"><a id="GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42" name="GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42"></a><h4 id="RACAD-GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42" class="sect4">关于Oracle RAC后台进程</h4>
                  <div>
                     <p>GCS和GES流程以及GRD协作启用缓存融合。Oracle RAC进程及其标识符如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">ACMS</code> ：原子控制文件到存储器服务（ <code class="codeph">ACMS</code> ）</p>
                           <p>在Oracle RAC环境中， <code class="codeph">ACMS</code>每实例进程是一个代理，有助于确保分布式SGA内存更新在成功时全局提交或在发生故障时全局中止。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GTX0-j</code> ：全球交易流程</p>
                           <p><code class="codeph">GTX0-j</code>进程为Oracle RAC环境中的XA全局事务提供透明支持。数据库根据XA全局事务的工作负载自动调整这些进程的数量。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LMON</code> ：全球入队服务监控</p>
                           <p><code class="codeph">LMON</code>进程监视整个集群中的全局队列和资源，并执行全局入队恢复操作。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LMD</code> ：全球入队服务守护进程</p>
                           <p><code class="codeph">LMD</code>进程管理每个实例中的传入远程资源请求。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LMS</code> ：全局缓存服务流程</p>
                           <p><code class="codeph">LMS</code>进程通过在全局资源目录（GRD）中记录信息来维护数据文件状态和每个高速缓存块的记录。<code class="codeph">LMS</code>进程还控制到远程实例的消息流，并管理全局数据块访问，并在不同实例的缓冲区高速缓存之间传输块映像。此处理是缓存融合功能的一部分。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LCK0</code> ：实例入队流程</p>
                           <p><code class="codeph">LCK0</code>进程管理非Cache Fusion资源请求，例如库和行缓存请求。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">RMS <span class="variable" translate="no">n</span></code> ：Oracle RAC管理进程（ <code class="codeph">RMS <span class="variable" translate="no">n</span></code> ）</p>
                           <p><code class="codeph">RMS <span class="variable" translate="no">n</span></code>进程执行Oracle RAC的可管理性任务。 <code class="codeph">RMS <span class="variable" translate="no">n</span></code>流程完成的任务包括在将新实例添加到群集时创建与Oracle RAC相关的资源。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">RSMN</code> ：远程从站监视器管理远程实例上的后台从站进程创建和通信。这些后台从属进程代表在另一个实例中运行的协调进程执行任务。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42__GUID-2D5A372E-B03E-48CE-A228-B041E24364F6">
                        <p class="notep1">注意：</p>
                        <p>本节描述的许多Oracle数据库组件是<span><cite>Oracle Database Concepts</cite></span>中针对非群集Oracle数据库所描述的组件的补充。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cncpt/introduction-to-oracle-database.html#CNCPT-GUID-A42A6EF0-20F8-4F4B-AFF7-09C100AE581E" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD8888"></a><a id="RACAD7276"></a><div class="sect2"><a id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C" name="GUID-75EE86C1-E690-4624-BA83-DFB83234156C"></a><h3 id="RACAD-GUID-75EE86C1-E690-4624-BA83-DFB83234156C" class="sect3">动态数据库服务自动工作负载管理概述</h3>
               <div>
                  <p>服务表示具有共同属性，服务级别阈值和优先级的应用程序组。</p>
                  <p>应用程序功能可以分为由服务标识的工作负载。例如，Oracle电子商务套件可以为每个职责定义服务，例如总帐，应收帐款，订单输入等。服务可以跨越Oracle数据库的一个或多个实例，全局集群中的多个数据库，单个实例可以支持多个服务。为服务提供服务的实例数对应用程序是透明的。服务提供单个系统映像来管理竞争应用程序，并允许将每个工作负载作为一个单元进行管理。</p>
                  <p>中间层应用程序和客户端通过在TNS连接字符串中将服务名称指定为连接的一部分来选择服务。例如，Oracle WebLogic Server的数据源设置为路由到服务。使用Net Easy * Connection，此连接仅包含服务名称和网络地址，如下所示： <code class="codeph"><span class="variable" translate="no">user_name</span> / <span class="variable" translate="no">password</span> @SCAN/ <span class="variable" translate="no">service_name</span></code> 。服务器端工作（如Oracle Scheduler，Parallel Query和Oracle GoldenGate队列）将服务名称设置为工作负载定义的一部分。对于Oracle Scheduler，作业分配给作业类，作业类在服务中执行。对于并行查询和并行DML，查询协调器连接到服务，并行查询从属在并行执行期间继承服务。对于Oracle GoldenGate，使用服务访问流队列。在服务下执行的工作继承服务的阈值和属性，并作为服务的一部分进行度量。
                  </p>
                  <p>Oracle数据库资源管理器将服务绑定到使用者组和优先级。这允许数据库按其重要性顺序管理服务。例如，DBA可以为高优先级在线用户和低优先级内部报告应用程序定义单独的服务。同样，DBA可以定义金牌，银牌和铜牌服务，以优先考虑为同一应用程序提供服务的顺序。在规划系统服务时，计划应包括每项服务相对于其他服务的优先级。通过这种方式，Oracle数据库资源管理器可以首先满足优先级为1的服务，然后是优先级为2的服务，依此类推。</p>
                  <p>当用户或应用程序连接到数据库时，Oracle建议您使用连接字符串的<code class="codeph">CONNECT_DATA</code>部分中指定的服务。创建数据库时，Oracle数据库会自动创建一个数据库服务，但此服务的行为与您随后创建的数据库服务的行为不同。为了在使用数据库管理工作负载方面提供更大的灵活性，Oracle数据库使您能够创建多个服务并指定服务启动的实例（或服务器池）。如果您对更高的工作负载管理灵活性感兴趣，请继续阅读本章以了解可以与服务一起使用的附加功能。
                  </p>
                  <div class="infoboxnote" id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C__GUID-895C4868-AE1A-4310-8995-3FB77F3806F5">
                     <p class="notep1">注意：</p>
                     <p>本章中讨论的功能不适用于以下默认数据库服务： <code class="codeph">DB_NAME</code> ， <code class="codeph">DB_UNIQUE_NAME</code> ， <code class="codeph">PDB_NAME</code> ， <code class="codeph">SYS$BACKGROUND</code>和<code class="codeph">SYS$USERS</code> 。 Oracle强烈建议您不要将这些服务用于连接到数据库的应用程序。您必须创建群集托管服务才能利用这些功能。您只能管理您创建的服务。数据库服务器管理数据库自动创建的任何服务。
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C__GUID-BC45815E-C493-4E0F-A372-3D98A398ACEF">动态数据库服务</p>
                  </div>
                  <!-- class="section" -->
                  <p>动态数据库服务使您能够管理工作负载分配，从而为用户和应用程序提供最佳性能。动态数据库服务提供以下功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">服务</span> ：Oracle数据库提供强大的自动工作负载管理工具，称为服务，以实现企业网格愿景。服务是您可以在Oracle RAC数据库中定义的实体，使您可以对数据库工作负载进行分组，将工作路由到分配用于提供服务的最佳实例，并实现计划内和计划外操作的高可用性。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">高可用性框架</span> ：Oracle RAC组件，使Oracle数据库始终能够将组件维持在运行状态。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">快速应用程序通知（FAN）</span> ：向Oracle RAC应用程序和客户端提供有关群集状态更改和负载平衡通报事件的信息，例如实例，服务或节点的<code class="codeph">UP</code>和<code class="codeph">DOWN</code>事件。FAN有两种向客户端发布事件的方法，Oracle Notification Service守护程序，由Java数据库连接（JDBC）客户端（包括Oracle应用服务器）和Oracle GoldenGate高级队列使用，后者仅供以前版本的Oracle调用接口使用（OCI）和Oracle Data Provider for .NET（ODP.NET）客户端。
                        </p>
                        <div class="infoboxnote" id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C__GUID-B92CBA9A-DE29-406C-956F-1D167E1DDC18">
                           <p class="notep1">注意：</p>
                           <p>从Oracle Database 12 <span class="italic">c第</span> 2版（12.2）开始的所有客户端都使用Oracle Notification Service。
                           </p>
                        </div>
                     </li>
                     <li>
                        <p><span class="bold">事务处理保护</span> ：一种工具，可在出现计划外中断和重复提交时，为最多一次执行事务提供协议和API。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">应用程序连续性</span> ：提供通用基础结构，可在收到可恢复错误时重放正在进行的请求，屏蔽许多系统，通信和存储中断以及硬件故障。与现有的恢复技术不同，此功能尝试恢复应用程序下的事务和非事务会话状态，以便中断在应用程序中显示为延迟执行。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">连接负载平衡</span> ：Oracle Net Services的一项功能，用于平衡提供所请求数据库服务的所有实例之间的传入连接。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">负载平衡咨询</span> ：向应用程序提供有关数据库及其实例提供的当前服务级别的信息。负载平衡通报根据您为该服务定义的管理策略，向应用程序提供有关在何处引导应用程序请求以获取最佳服务的建议。负载平衡咨询事件通过Oracle Notification Service发布。
                        </p>
                     </li>
                     <li>
                        <p> <span class="bold">自动工作负载存储库（AWR）</span> ：将服务级别统计信息作为<a href="glossary.html#GUID-3C591280-F8D5-4979-8134-152C2DF66F2F"><span class="xrefglossterm">度量标准进行</span></a>跟踪。当这些指标超出或未达到某些阈值时，可以为这些指标创建服务器生成的警报。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">快速连接故障转移（FCF）</span> ：这是Oracle客户端通过订阅FAN事件提供连接快速故障转移的能力。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">运行时连接负载平衡</span> ：这是Oracle客户端在应用程序请求连接完成某些工作时，根据数据库实例提供的当前服务级别在连接池中提供连接的智能分配的能力。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">单客户端访问名称（SCAN）</span> ：为连接到Oracle RAC的客户端提供单个名称，即使您在群集中添加或删除节点，该名称也不会在群集的整个生命周期中发生更改。与SCAN连接的客户端可以使用简单的连接字符串，例如瘦JDBC URL或EZConnect，并且仍然可以实现负载平衡和客户端连接故障转移。
                        </p>
                     </li>
                  </ul>
                  <p>您可以部署Oracle RAC和非群集Oracle数据库环境，以便以多种不同方式使用动态数据库服务功能。根据节点数量和环境的复杂性和目标，您对最佳自动工作负载管理和高可用性配置的选择取决于本章中描述的几个注意事项。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                        <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="工作负载管理包括负载平衡，为Oracle Real Application Clusters（Oracle RAC），分布式事务处理和服务启用客户端。">使用动态数据库服务管理工作负载</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD8889"></a><div class="sect2"><a id="GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" name="GUID-7D01967A-2E0F-4228-82CE-428D7B65F961"></a><h3 id="RACAD-GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" class="sect3">服务器池和策略管理数据库概述</h3>
               <div>
                  <p>服务器池是策略管理数据库的基础。</p>
                  <p>您可以使用以下部署模型创建Oracle RAC数据库，无论是多节点还是Oracle Real Application Clusters One节点（Oracle RAC One节点）：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>管理员管理的部署基于Oracle Database <span class="italic">11g第</span> 2版（11.2）之前存在的Oracle RAC部署类型，并要求您静态配置每个数据库实例以在群集中的特定节点上运行，并将数据库服务配置为使用<code class="codeph">preferred</code>和<code class="codeph">available</code>名称在属于某个数据库的特定实例上运行。
                        </p>
                     </li>
                     <li>
                        <p>策略管理部署基于<span class="italic">服务器池</span> ，其中数据库服务在服务器池中作为<span class="italic">单例</span>或<span class="italic">统一</span>在服务器池中的所有服务器上运行。数据库部署在一个或多个服务器池中，服务器池的大小决定了部署中的数据库实例数。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/racad&amp;id=APQOS-GUID-1466C923-4F4F-4313-8962-D870249A79A7" target="_blank"><span><cite>Oracle数据库服务质量管理用户指南</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD8890"></a><div class="sect3"><a id="GUID-342BDB31-4A5D-473B-8F27-AB5785BBC0A9" name="GUID-342BDB31-4A5D-473B-8F27-AB5785BBC0A9"></a><h4 id="RACAD-GUID-342BDB31-4A5D-473B-8F27-AB5785BBC0A9" class="sect4">服务器池简介</h4>
                  <div>
                     <p>服务器池在逻辑上将群集分配到提供数据库或应用程序服务的服务器组中。</p>
                     <p>服务器池属性控制这些数据库和应用程序的可伸缩性和可用性。您可以使用最小和最大大小配置每个服务器池，从而确定可伸缩性。Oracle Clusterware管理服务器池之间的可用性，您可以通过配置各个服务器池的重要性值来进一步调整可用性。</p>
                     <p>服务器未按名称分配给服务器池，但按编号分配。因此，您必须配置任何服务器以运行任何数据库。如果由于（例如）异构服务器或存储连接而无法配置服务器，则可以使用服务器类别定义来限制服务器以确定服务器池成员资格。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-B591A9DF-BEB1-4B72-B665-7416BEA27C7A" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div><a id="RACAD8892"></a><a id="RACAD8901"></a><a id="RACAD8893"></a><a id="RACAD8902"></a><a id="RACAD8894"></a><a id="RACAD8903"></a><a id="RACAD8891"></a><div class="sect4"><a id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733" name="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733"></a><h5 id="RACAD-GUID-B1523FC3-DED5-4A91-98D5-789CFE650733" class="sect5">使用服务器池的示例</h5>
                     <div>
                        <p>本节包括以下使用服务器池的示例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABEJACC">最小和最大服务器数</a></p>
                           </li>
                           <li>
                              <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABIFIIE">IMPORTANCE服务器池的属性</a></p>
                           </li>
                           <li>
                              <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABJGBHE">整合数据库</a></p>
                           </li>
                        </ul>
                        <div class="section" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABEJACC">
                           <p class="subhead3" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__GUID-8D7D8BD4-3264-4686-B6BF-9DBBD4195213">最小和最大服务器数</p>
                        </div>
                        <!-- class="section" -->
                        <p>考虑将四节点群集配置到名为<code class="codeph">online</code>和<code class="codeph">backoffice</code>两个服务器池中。名为<code class="codeph">dbsales</code>的数据库在提供<code class="codeph">browse</code> ， <code class="codeph">search</code>和<code class="codeph">salescart</code>服务的<code class="codeph">online</code>服务器池中运行。名为<code class="codeph">dberp</code>的数据库在<code class="codeph">backoffice</code>服务器池中运行，并提供<code class="codeph">inventory</code>和<code class="codeph">shipping</code>服务， <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">如图1-2所示</a> 。在正常工作时间的企业需要一个最低的两个实例的<code class="codeph">dbsales</code>数据库和的一个实例<code class="codeph">dberp</code>数据库，以满足正常需求。
                        </p>
                        <div class="figure" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">
                           <p class="titleinfigure">图1-2按最小和最大限制的服务器放置</p><img src="img/racad_vm_039.png" width="573" alt="下面是图1-2的描述" title="下面是图1-2的描述" longdesc="img_text/racad_vm_039.html"><br><a href="img_text/racad_vm_039.html">“图1-2服务器按最小和最大限制放置”的说明</a></div>
                        <!-- class="figure" -->
                        <p>在这种政策管理部署的价值<code class="codeph">MIN_SIZE</code>服务器池属性<code class="codeph">online</code>服务器池是2，而价值<code class="codeph">MIN_SIZE</code>服务器池属性<code class="codeph">backoffice</code>服务器池1。通过这种方式配置，Oracle Clusterware可确保<code class="codeph">online</code>服务器池中始终有两台服务器， <code class="codeph">backoffice</code>服务器池中始终有一台服务器。因为这是一个四节点群集，所以有一个服务器未分配给任一服务器池。最后一个服务器部署的位置由每个服务器池的<code class="codeph">MAX_SIZE</code>服务器池参数确定。如果每个服务器池的<code class="codeph">MAX_SIZE</code>服务器池属性值的总和小于群集中的服务器总数，则其余服务器将保留在免费服务器池中，等待已部署节点的故障。
                        </p>
                        <p>如果<code class="codeph">MAX_SIZE</code>的值大于<code class="codeph">MIN_SIZE</code> ，则剩余的服务器将部署到其重要性值最大的服务器池中， <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">如图1-2所示</a> ，并在下一节中进行详细讨论。在这种情况下，服务器是可共享资源，可以在线重定位以加入需要它的服务器池。例如，在工作时间，服务器可以被提供给<code class="codeph">online</code>服务器池以添加<code class="codeph">dbsales</code>数据库的实例，但是在几小时之后可以重新定位到<code class="codeph">backoffice</code>服务器池，添加一个<code class="codeph">dberp</code>数据库实例。所有此类移动都是在线的，并且实例在交易时关闭。
                        </p>
                        <p>这两个策略管理的数据库仅运行所需的实例，可以动态增加或减少它们以满足需求或业务需求。</p>
                        <div class="section" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABIFIIE">
                           <p class="subhead3" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__GUID-B4421E08-80C3-4082-B1A1-7FF2ED95BA6A">IMPORTANCE服务器池的属性</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">IMPORTANCE</code>服务器池属性在集群启动时使用，以响应节点故障或驱逐。与管理员管理的数据库相比，您可以配置具有不同重要性级别的服务器池，以确定首先启动哪些数据库以及哪些数据库在多节点中断时保持联机状态。
                        </p>
                        <p>考虑一个四节点集群， <code class="codeph">dbapps</code>在两个服务器池（ <code class="codeph">sales</code>和<code class="codeph">backoffice</code>中托管名为<code class="codeph">dbapps</code>的数据库。两个服务<code class="codeph">orderentry</code>和<code class="codeph">billing</code>在<code class="codeph">sales</code>服务器池中运行，而另外两个服务<code class="codeph">erp</code>和<code class="codeph">reports</code>在<code class="codeph">backoffice</code>服务器池中运行， <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__SERVERPOOLIMPORTANCE-4980C05C">如图1-3</a>所示。通过将<code class="codeph">sales</code>服务器池的<code class="codeph">IMPORTANCE</code>服务器池属性的值配置为高于<code class="codeph">backoffice</code>服务器池的值， <code class="codeph">sales</code>的服务首先在集群启动时启动并始终可用，即使在服务器之后只有一个服务器仍在运行多节点故障。<code class="codeph">IMPORTANCE</code>服务器池属性使您可以对服务进行排名，并且还消除了在群集中的所有节点上运行服务的要求，以确保它始终可用。
                        </p>
                        <div class="figure" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__SERVERPOOLIMPORTANCE-4980C05C">
                           <p class="titleinfigure">图1-3服务器池重要性</p><img src="img/racad_vm_038.png" width="573" alt="下面是图1-3的描述" title="下面是图1-3的描述" longdesc="img_text/racad_vm_038.html"><br><a href="img_text/racad_vm_038.html">“图1-3服务器池重要性”的描述</a></div>
                        <!-- class="figure" -->
                        <div class="section" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABJGBHE">
                           <p class="subhead3" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__GUID-D3A7AA34-E595-4626-97C7-F2E7845F05B7">整合数据库</p>
                        </div>
                        <!-- class="section" -->
                        <p>您可以使用多种不同的方法（分散或组合）来整合Oracle数据库。策略管理部署有助于整合。对于架构合并，多个应用程序托管在分离为离散架构或可插拔数据库（PDB）的单个数据库中，您可以使用服务器池来满足所需的容量。由于服务器池的动态扩展属性，您可以增加或减少数据库实例的数量，以满足当前的需求或业务需求。由于服务器池还确定哪些服务一起运行或单独运行，因此您可以配置和维护所需的关联或隔离。</p>
                        <p>例如，由于版本要求而无法使用架构合并时，您可以在一组服务器上托管多个数据库。使用策略管理的数据库有助于此数据库整合，因为它们可以通过使用<a href="glossary.html#GUID-EA9BDE17-264E-4375-8F98-1B4184A03648"><span class="xrefglossterm">实例锁定</span></a>来共享同一服务器池，这使您可以水平（使用服务器池大小）和垂直（使用<code class="codeph">CPU_COUNT</code>服务器配置）动态增加或减少数据库属性）以满足需求或业务策略和计划。
                        </p>
                        <p>相反，对于管理员管理的数据库，您需要在每台服务器上保留容量，以吸收数据库实例或服务器发生故障时故障转移的工作负载。但是，使用策略管理的数据库，您可以使用<code class="codeph">MIN_SIZE</code> ， <code class="codeph">MAX_SIZE</code>和<code class="codeph">IMPORTANCE</code>服务器池属性，根据运行的工作负载的业务需要对服务器池进行有效排名。
                        </p>
                        <p>当服务器故障使服务器池低于其配置的最小服务器数量时，另一台服务器将从较不重要的服务器池移动到其位置并使服务器数量恢复到配置的最小值。这消除了由于剩余服务器过载而导致级联故障的风险，并使您能够显着减少甚至消除保留处理故障容量的需要。</p>
                        <p>迁移或转换为策略管理的数据库还可以实现群集整合，并创建具有更高可用性和可伸缩性的更大群集，因为可用于托管和扩展数据库的服务器数量增加。由于策略管理的数据库不需要将其实例名称绑定到特定服务器并将服务绑定到特定实例，因此大大减少了配置和管理大型群集的复杂性。</p>
                        <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CONSOLIDATINGDATABASES-49815171">图1-4</a>显示了一个示例部署，其中前两个集群示例（如图<a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">1-2</a>和<a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__SERVERPOOLIMPORTANCE-4980C05C">图1-3所示</a> ）合并为一个集群，利用数据库整合（使用实例锁定）和集群整合（使用服务器池）配置，以便正确调整工作负载的大小和优先级。
                        </p>
                        <div class="figure" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CONSOLIDATINGDATABASES-49815171">
                           <p class="titleinfigure">图1-4合并数据库</p><img src="img/racad_vm_037.png" width="573" alt="下面是图1-4的描述" title="下面是图1-4的描述" longdesc="img_text/racad_vm_037.html"><br><a href="img_text/racad_vm_037.html">“图1-4合并数据库”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-E5103867-6683-4D5C-9343-1F1F2522FEF3" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="RACAD8895"></a><div class="sect3"><a id="GUID-0D6E4EC3-7D75-45DB-97D8-372B2FD010D3" name="GUID-0D6E4EC3-7D75-45DB-97D8-372B2FD010D3"></a><h4 id="RACAD-GUID-0D6E4EC3-7D75-45DB-97D8-372B2FD010D3" class="sect4">部署策略管理的数据库</h4>
                  <div>
                     <p>部署策略管理的数据库时，必须首先确定服务及其所需的大小，同时考虑到服务不能跨服务器池。</p>
                     <p>如果要将此数据库与其他数据库并置，则应考虑其相对于其他托管数据库的CPU要求，并考虑其<code class="codeph">CPU_COUNT</code>属性的值以进行实例性锁定，以便您可以垂直调整数据库的大小并在一个或多个服务器池中水平放置。
                     </p>
                     <p>如果要将此数据库的服务器池与其他服务器池并置，请考虑配置服务器池以在日历或事件的基础上调整服务器池大小，以优化会议需求和业务需求。确定服务器池的大小并为<code class="codeph">MIN_SIZE</code>和<code class="codeph">MAX_SIZE</code>服务器池属性配置适当的值后，可以确定每个服务器池的相对重要性。
                     </p>
                     <p>作为集群管理员，您可以使用<code class="codeph">srvctl add serverpool</code>命令创建策略管理的数据库服务器池。您可以使用Oracle Grid Infrastructure主目录中的<code class="codeph">srvctl modify serverpool</code>命令<code class="codeph">srvctl modify serverpool</code>服务器池的属性。
                     </p>
                     <p>虽然可以使用DBCA创建服务器池，但Oracle建议仅将此用于小型单服务器池部署，因为如果服务器已分配给其他服务器池，则DBCA将失败。此外，如果群集由具有不同容量的服务器组成，例如旧服务器和新服务器，Oracle建议您设置服务器类别定义，以定义服务器加入每个服务器池的最低服务器要求。</p>
                     <p>创建服务器池后，可以从相应的数据库主目录运行DBCA。根据数据库类型和任务，您将看到不同的默认选项。对于所有新的Oracle RAC和Oracle RAC One Node数据库（包括容器数据库（CDB）），Policy-Managed选项是Oracle推荐的默认选项。</p>
                     <p>如果要从管理员管理的数据库或早于Oracle Database <span class="italic">11g第</span> 2版（11.2）的数据库升级数据库，则无法直接升级到策略管理的数据库。但是，升级后，可以使用<code class="codeph">srvctl modify database</code>命令将数据库转换为托管策略。
                     </p>
                     <p>从管理员管理的数据库转换为策略管理的数据库时，实例名称会自动更新以包含下划线（例如： <code class="codeph">orcl1</code>变为<code class="codeph">orcl_1</code> ）。需要下划线，以便数据库可以在服务器池大小增加时自动创建实例。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-E5103867-6683-4D5C-9343-1F1F2522FEF3" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-F936D4CA-C277-4F22-A701-5DC28B6C5D49" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           <li><a href="administering-database-instances-and-cluster-databases.html#GUID-1423B27A-3FD5-4B5F-AD29-029A799E28FF" title="您可以将管理员管理的数据库转换为策略管理的数据库。">将管理员管理的数据库转换为策略管理的数据库</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8904"></a><div class="sect3"><a id="GUID-977D2FC5-8D6D-4CE5-AE51-C216CF81F477" name="GUID-977D2FC5-8D6D-4CE5-AE51-C216CF81F477"></a><h4 id="RACAD-GUID-977D2FC5-8D6D-4CE5-AE51-C216CF81F477" class="sect4">管理策略管理的数据库</h4>
                  <div>
                     <p>在创建，调整大小，修补和负载平衡方面，管理策略管理的数据库比管理员管理的数据库需要更少的配置和重新配置步骤。</p>
                     <p>此外，由于群集中服务器池中的任何服务器都可以运行任何数据库，因此您不必创建和维护数据库实例到节点名称映射。但是，如果您希望数据库在特定节点上运行时使用特定实例名称，则可以使用<code class="codeph">srvctl modify instance -db <span class="variable" translate="no">db_unique_name</span> -instance <span class="variable" translate="no">inst_name</span> -node <span class="variable" translate="no">node_name</span></code>命令创建实例到节点名称映射。当特定节点上的脚本使用固定的<code class="codeph">ORACLE_SID</code>值连接到数据库时，这可能很有用。
                     </p>
                     <p>您可以通过将服务器重定位到空闲池中或通过调整服务器池的最小和最大大小来执行修补等维护任务，从而保留所需的可用性。</p>
                     <p>策略管理的数据库还有助于管理服务，因为它们被分配到单个服务器池，并在池中的所有服务器上以单例或统一的形式运行。您不再需要为每个服务创建或维护显式的首选和可用数据库实例列表。如果服务器由于手动重定位或高可用性事件而进入服务器池，则会自动启动所有统一服务及其相关数据库实例。如果托管一个或多个单件服务的服务器出现故障，那么这些服务将自动在服务器池中的一个或多个剩余服务器上启动。对于Oracle RAC One Node，相应的数据库实例也将自动启动。</p>
                     <p>通过使用每个服务器池的重要性属性来改进相对于彼此的管理服务。服务器池中运行的每个服务都会继承服务器池相对于群集中其他服务器池托管服务的重要性。如果最重要的服务器池的最小大小大于零，则该服务器池中的服务和关联的数据库实例首先在集群启动时启动，并且将是最后运行的服务和数据库实例，只要有一个服务器在集群中运行。您可以在最不重要的服务器池中提供对业务不重要的服务，确保如果由于需求或故障而无法提供足够的资源，那么这些服务最终将被关闭，而更多关键业务服务仍然可用。</p>
                     <p>由于许多管理任务可能涉及进行可能影响整合环境中的多个数据库，服务或服务器池的更改，因此您可以使用某些SRVCTL命令的评估模式来获取命令的资源影响报告。</p>
                     <p>请考虑以下示例，该示例评估修改服务器池对系统的影响：</p><pre class="pre codeblock"><code><span class="bold">$ srvctl modify srvpool -l 3 -g online -eval</span>服务erp1将在节点test3上停止服务报告将在节点test3上停止服务库存将在节点test3上停止服务运送将在节点test3上停止数据库dbsales将在node test3服务orderentry将在节点test3上启动服务计费将在节点test3上启动服务浏览将在节点test3上启动服务搜索将在节点test3上启动服务salescart将在节点test3上启动服务器test3将从池后台移动在线游泳</code></pre><p>如前面的示例所示，修改服务器池可能会导致许多资源状态更改。您可以通过Oracle Clusterware或Oracle Database Quality of Service Management使用<span class="italic">策略集</span> 。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="server-control-utility-reference.html#GUID-E768864F-7362-4A80-AB40-96274F61A19A" title="修改群集中的服务器池。">srvctl修改srvpool</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-03EAA16F-2197-45AF-93A6-DDC7943166BD" title="将服务器重定位到群集中的服务器池。">srvctl重定位服务器</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-803F603E-8638-4946-84D4-CB24D21C893C" title="默认情况下，SRVCTL安装在群集中的每个节点上。要使用SRVCTL，请登录节点的操作系统，并以区分大小写的语法输入SRVCTL命令及其参数。">SRVCTL使用信息</a></li>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-7FBE1007-3BA0-4DE5-A993-358E3423721B" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8844"></a><div class="sect3"><a id="GUID-41B8D007-0D96-49A0-960F-315940BE436A" name="GUID-41B8D007-0D96-49A0-960F-315940BE436A"></a><h4 id="RACAD-GUID-41B8D007-0D96-49A0-960F-315940BE436A" class="sect4">基于策略的集群管理</h4>
                  <div>
                     <p>Oracle Clusterware支持将集群配置策略集管理为本机Oracle Clusterware功能。</p>
                     <p><a href="glossary.html#GUID-8331EB9B-FDBB-4F03-94DC-80220D2942B8"><span class="xrefglossterm">群集配置策略</span></a>包含系统中定义的每个服务器池的一个定义。群集配置策略还指定资源放置和群集节点可用性。<a href="glossary.html#GUID-748D6AE0-F7E8-4716-9AB7-2AAA8D6AC393"><span class="xrefglossterm">群集配置策略集</span></a>定义在<a href="glossary.html#GUID-748D6AE0-F7E8-4716-9AB7-2AAA8D6AC393"><span class="xrefglossterm">群集中配置</span></a>的所有服务器池的名称，并包含一个或多个配置策略。
                     </p>
                     <p>任何时候始终只有一个配置策略生效。但是，管理员通常会根据日历日期或时间参数创建多个配置策略，以反映不同的业务需求和需求。例如，工作日的早晨通常是大多数用户登录并下载电子邮件的时间;与电子邮件相关的工作负载通常在夜间和周末都很轻松。在这种情况下，您可以使用群集配置策略根据预期需求定义服务器分配。更具体地说，对于此示例，将更多服务器分配给OLTP工作负载的配置策略在工作日早晨生效，而另一个配置策略在周末和工作日晚上为批处理工作负载分配更多服务器。</p>
                     <p>使用群集配置策略还可以帮助管理包含不同功能的服务器的群集，例如不同的计算机和内存大小（异构）。要为由异构服务器类型组成的群集创建管理和可用性策略，群集管理员可以基于服务器属性创建服务器类别。这些属性可以限制可以将哪些服务器分配给哪些服务器池。例如，如果群集中的某些服务器运行较旧的硬件，则可以使用属性指定这些服务器应仅分配给支持批处理作业和测试的服务器池，而不是将它们分配给服务器池用于在线销售或其他关键业务应用程序。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-7FBE1007-3BA0-4DE5-A993-358E3423721B" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" name="GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01"></a><h3 id="RACAD-GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" class="sect3">Oracle数据库服务质量管理概述</h3>
               <div>
                  <p>Oracle数据库服务质量管理（Oracle数据库QoS管理）是一种基于策略的自动化产品，可监控整个系统的工作负载请求。</p>
                  <p>Oracle数据库QoS管理管理跨应用程序共享的资源，并调整系统配置以使应用程序以业务所需的性能级别运行。Oracle数据库QoS管理可以优雅地响应系统配置和需求的变化，从而避免应用程序性能级别的额外振荡。</p>
                  <p>Oracle数据库QoS管理通过识别影响这些目标的瓶颈资源来监视和管理Oracle RAC数据库工作负载性能目标，并建议并采取措施来恢复性能。管理员管理的部署将数据库实例绑定到节点，但策略管理的部署不绑定，因此Oracle数据库QoS管理服务器池大小资源控制仅适用于后者。所有其他资源管理控件都可用于两个部署。</p>
                  <p>Oracle数据库QoS管理支持管理员管理的Oracle RAC和Oracle RAC One Node数据库及其仅测量，监控和管理模式。通过调整数据库中运行的性能类的CPU份额，可以在管理员管理的Oracle RAC数据库中启用架构合并支持。此外，通过调整托管在相同物理服务器上的数据库的CPU计数来支持数据库合并。</p>
                  <p>由于管理员管理的数据库不在服务器池中运行，因此管理员管理的数据库无法通过更改策略管理的数据库部署中支持的服务器池大小来扩展或缩减实例数。此新部署支持已集成到Oracle Enterprise Manager Cloud Control中的Oracle QoS Management页面中。</p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-249A970C-4650-485E-9E11-EFC70FDF3079" name="GUID-249A970C-4650-485E-9E11-EFC70FDF3079"></a><h3 id="RACAD-GUID-249A970C-4650-485E-9E11-EFC70FDF3079" class="sect3">Hang Manager概述</h3>
               <div>
                  <p>Hang Manager是Oracle数据库功能，可自动检测并解决系统挂起问题。</p>
                  <div class="p">Hang Manager首先在Oracle Database <span class="italic">11g第</span> 1版（11.1）中提供，最初识别系统挂起，然后将有关挂起的相关信息转储到跟踪文件中。在Oracle Database 12 <span class="italic">c第</span> 2版（12.2）中，Hang Manager可以对其进行操作并尝试解决系统挂起问题。Hang Manager还可以在单实例和Oracle RAC数据库实例中运行。
                     <div class="infoboxnote" id="GUID-249A970C-4650-485E-9E11-EFC70FDF3079__GUID-BDC2B009-1AC1-4B7F-987A-8E4F8A064916">
                        <p class="notep1">注意：</p>尽管Oracle数据库中已有几个过去的版本可以使用死锁检测，但Hang管理器无法解决死锁问题。
                     </div>
                  </div>
                  <p>Hang Manager功能如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>首先检测系统挂起，然后分析挂起并验证挂起的原因。然后应用启发式方法来决定解决挂起的行动方案。</p>
                     </li>
                     <li>
                        <p>自动执行DBA过去需要手动执行的任务，以便将跟踪文件提供给My Oracle Support，以便那里的某人可以识别挂起的来源，最大限度地减少或消除数据库和应用程序停机时间。</p>
                     </li>
                     <li>
                        <p>定期扫描所有进程并分析在连续扫描中保留资源的较小进程子集。如果资源没有等待，则Hang管理员会忽略进程。</p>
                     </li>
                     <li>
                        <p>考虑跨实例挂起，挂起是持有者是等待来自Oracle ASM实例的响应的数据库进程。</p>
                     </li>
                     <li>
                        <p>了解在读取器节点实例中运行的进程，并检查这些进程中是否有任何进程阻塞Hub节点上的进度并采取措施（如果可能）。</p>
                     </li>
                     <li>
                        <p>考虑持有者的Oracle数据库服务质量管理设置。</p>
                     </li>
                     <li>
                        <p>终止持有者进程，以便等待该资源的下一个进程可以继续并防止挂起。</p>
                     </li>
                     <li>
                        <p>在警报日志中通知DBA ORA-32701错误消息。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-249A970C-4650-485E-9E11-EFC70FDF3079__GUID-71C522C1-2E7F-4CDA-B9A6-268BCE93528D">
                     <p class="notep1">也可以看看：</p><a href="../atnms/hang-manager.html#ATNMS-GUID-6E2043A6-E460-4442-A6F7-088206563D5E" target="_blank"><span><cite>Oracle自治健康框架用户指南</cite></span></a></div>
               </div>
            </div><a id="RACAD8961"></a><div class="sect2"><a id="GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33" name="GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33"></a><h3 id="RACAD-GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33" class="sect3">Oracle Multitenant与Oracle RAC概述</h3>
               <div>
                  <p>甲骨文多租户是与Oracle数据库<span class="italic">12c</span>中的一个选项，它简化了整合，配置，升级和更多。
                  </p>
                  <p>它基于允许多租户容器数据库（CDB）容纳多个可插拔数据库（PDB）的体系结构。您可以将现有数据库用作PDB，而无需更改应用程序层。在此体系结构中，Oracle RAC提供在一个系统上整合各种业务关键型应用程序时所需的本地高可用性。</p>
                  <p>将PDB与Oracle RAC一起使用时，多租户CDB基于Oracle RAC。您可以在每个Oracle RAC CDB实例或实例子集上使每个PDB可用。在任何一种情况下，使用动态数据库服务来管理对PDB的访问和管理，动态数据库服务也将被应用程序用于连接到相应的PDB，就像在使用Oracle Net Services进行连接的单个实例Oracle数据库中一样。</p>
                  <p>您可以隔离PDB以防止在特定PDB上或特定PDB内执行某些操作，这些操作可能会干扰共享同一Oracle RAC数据库或数据库实例的其他PDB。PDB隔离允许使用Oracle Multitenant进行更高程度的整合。</p>
                  <p>如果将Oracle RAC数据库创建为CDB并将一个或多个PDB插入CDB，则默认情况下，不会在Oracle RAC CDB的任何实例上自动启动PDB。使用分配给PDB的第一个动态数据库服务（与数据库名称同名的默认数据库服务除外），PDB将在运行该服务的实例上可用。</p>
                  <p>无论PDB是否在Oracle RAC CDB的多个实例上可用，CDB通常由PDB上运行的服务进行管理。您可以通过在该实例上手动启动PDB，在Oracle RAC CDB的每个实例上手动启用PDB访问。</p>
               </div>
            </div><a id="RACAD8951"></a><div class="sect2"><a id="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" name="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3"></a><h3 id="RACAD-GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" class="sect3">数据库内存和Oracle RAC概述</h3>
               <div>
                  <p>每个Oracle RAC节点都有自己的内存（IM）列存储。默认情况下，填充的对象分布在群集中的所有IM列存储中。</p>
                  <p>Oracle建议您在每个Oracle RAC节点上均等地调整IM列存储的大小。如果Oracle RAC节点不需要IM列存储，则将<code class="codeph">INMEMORY_SIZE</code>参数设置为<code class="codeph">0</code> 。
                  </p>
                  <p>可以在每个节点上填充完全不同的对象，或者在集群中的所有IM列存储上分布更大的对象。在Oracle集成系统上，同一对象也可以出现在每个节点上的IM列存储中。跨集群中IM列存储的对象分布由<code class="codeph">INMEMORY</code>属性的两个子句控制： <code class="codeph">DISTRIBUTE</code>和<code class="codeph">DUPLICATE</code> 。</p>
                  <p>在Oracle RAC环境中，仅指定了<code class="codeph">INMEMORY</code>属性的对象将自动分布在群集中的IM列存储中。您可以使用<code class="codeph">DISTRIBUTE</code>子句指定对象在群集中的分布方式。默认情况下，使用的分区类型（如果有）确定对象的分布方式。如果对象未分区，则按rowid范围分发。或者，您可以指定<code class="codeph">DISTRIBUTE</code>子句以覆盖默认行为。
                  </p>
                  <p>在Oracle集成系统上，您可以跨群集中的IM列存储复制或镜像填充的对象。该技术提供最高级别的冗余。<code class="codeph">DUPLICATE</code>子句控制对象的复制方式。如果仅指定<code class="codeph">DUPLICATE</code> ，则数据的一个镜像副本将分布在群集中的IM列存储中。要复制每个IM列存储中的整个对象，请指定<code class="codeph">DUPLICATE ALL</code> 。</p>
                  <div class="infoboxnote" id="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3__GUID-066A39FB-3D36-4E0C-86EA-91CBF912EB51">
                     <p class="notep1">注意：</p>
                     <p>在非工程系统上部署Oracle RAC时， <code class="codeph">DUPLICATE</code>子句将被视为<code class="codeph">NO DUPLICATE</code> 。</p>
                  </div>
               </div>
            </div><a id="RACAD7279"></a><div class="sect2"><a id="GUID-74F4FF89-688A-4DE4-9592-1D96E851013C" name="GUID-74F4FF89-688A-4DE4-9592-1D96E851013C"></a><h3 id="RACAD-GUID-74F4FF89-688A-4DE4-9592-1D96E851013C" class="sect3">管理Oracle RAC环境概述</h3>
               <div>
                  <p>本节介绍以下Oracle RAC环境管理主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72" title="任何使用Oracle RAC设计和实施高可用性策略的企业都必须首先对需要高可用性的业务驱动程序进行全面分析。">关于设计和部署Oracle RAC环境</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-B97D335E-105F-4721-9647-D1A3D485399A" title="您可以使用服务器控制实用程序（SRVCTL），Oracle Enterprise Manager，SQL * Plus和其他实用程序将群集数据库作为单系统映像进行管理。">关于Oracle RAC环境的管理工具</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14" title="基于Web的Oracle Enterprise Manager Cloud Control使您可以监视Oracle RAC数据库。">关于监视Oracle RAC环境</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6">关于评估Oracle RAC环境中的性能</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD7280"></a><div class="sect3"><a id="GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72" name="GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72"></a><h4 id="RACAD-GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72" class="sect4">关于设计和部署Oracle RAC环境</h4>
                  <div>
                     <p>任何使用Oracle RAC设计和实施高可用性策略的企业都必须首先对需要高可用性的业务驱动程序进行全面分析。</p>
                     <p>通过分析高可用性的业务需求，并了解实施不同高可用性解决方案所需的投资水平，可以开发实现业务和技术目标的高可用性架构。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="design-and-deployment-techniques.html#GUID-DD273C7C-7F74-4A95-B8E5-E007D36119D2" title="对于关键任务系统，您必须能够执行故障转移和恢复，并且您的环境必须能够适应所有类型的故障。数据库云是由全球数据服务框架集成到单个虚拟服务器中的一组数据库，提供一个或多个全局服务，同时确保高性能，可用性和资源的最佳利用。您可以配置和使用SSL证书，以在数据库层中的ONS服务器和中间层中的通知客户端之间设置身份验证。">设计和部署技术</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72__GUID-66E64B61-4AD6-4978-9523-25451289E32B">
                        <p class="notep1">也可以看看：</p>
                        <p>有关选择和实施最符合您的可用性要求的架构的帮助：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“设计和部署技术”</span>提供了一个高级概述，可用于评估业务的高可用性要求。
                              </p>
                           </li>
                           <li>
                              <p><span><cite>Oracle数据库高可用性概述</cite></span>介绍了如何为组织选择最合适的体系结构，介绍了几种高可用性体系结构，并提供了选择最符合您要求的体系结构的指南，并提供了有关Oracle最高可用性体系结构的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7281"></a><div class="sect3"><a id="GUID-B97D335E-105F-4721-9647-D1A3D485399A" name="GUID-B97D335E-105F-4721-9647-D1A3D485399A"></a><h4 id="RACAD-GUID-B97D335E-105F-4721-9647-D1A3D485399A" class="sect4">关于Oracle RAC环境的管理工具</h4>
                  <div>
                     <p>您可以使用服务器控制实用程序（SRVCTL），Oracle Enterprise Manager，SQL * Plus和其他实用程序将群集数据库作为单系统映像进行管理。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">服务器控制实用程序（SRVCTL）</span> ：SRVCTL是一个命令行界面，可用于从单点管理Oracle RAC数据库。您可以使用SRVCTL来启动和停止数据库和实例，以及删除或移动实例和服务。您还可以使用SRVCTL来管理配置信息，Oracle Real Application Clusters One节点（Oracle RAC One Node），Oracle Clusterware和Oracle ASM。</p>
                        </li>
                        <li>
                           <p><span class="bold">Fleet Patching和Provisioning</span> ：使用Fleet Patching和Provisioning来修补，升级和配置Oracle RAC数据库。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Oracle企业管理器</span> ：Oracle企业管理器云控制GUI界面，用于管理非群集数据库和Oracle RAC数据库环境。Oracle建议您尽可能使用Oracle Enterprise Manager执行管理任务。
                           </p>
                           <p>您可以使用Oracle Enterprise Manager Cloud Control来管理Oracle RAC One Node数据库。</p>
                        </li>
                        <li>
                           <p><span class="bold">SQL * Plus</span> ：SQL * Plus命令在当前实例上运行。当前实例可以是您启动SQL * Plus会话的本地默认实例，也可以是您与Oracle Net Services连接的远程实例。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">集群验证实用程序（CVU）</span> ：CVU是一个命令行工具，除操作系统外，还可用于验证一系列集群和Oracle RAC组件，例如共享存储设备，网络配置，系统要求和Oracle Clusterware群组和用户。您可以使用CVU进行预安装检查以及对群集环境进行安装后检查。在预安装和安装Oracle Clusterware和Oracle RAC组件期间，CVU特别有用。安装Oracle Clusterware和Oracle Database后，Oracle Universal Installer会运行CVU以验证您的环境。
                           </p>
                           <p>在安装Oracle RAC之前安装并使用CVU，以确保您的配置满足最低Oracle RAC安装要求。此外，使用CVU验证正在进行的管理任务的完成，例如节点添加和节点删除。</p>
                        </li>
                        <li>
                           <p><span class="bold">DBCA</span> ：用于创建和初始配置Oracle RAC，Oracle RAC One Node和Oracle非群集数据库的推荐实用程序。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">NETCA</span> ：为Oracle RAC环境配置网络。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/rapid-home-provisioning.html#CWADD-GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           <li><a href="administering-database-instances-and-cluster-databases.html#GUID-C9DB4DCB-34B9-42F0-8AB4-33199087CE98" title="Oracle RAC数据库管理需要某些特权，并且涉及策略管理或管理员管理的部署模型。服务器控制实用程序（SRVCTL）是一个命令行界面，可用于以集中方式管理Oracle数据库。Oracle Enterprise Manager为Oracle RAC环境提供了一个集中控制点，允许您在多个集群数据库上同时执行管理任务。与SRVCTL或Oracle Enterprise Manager不同，SQL * Plus是面向实例的管理工具。您可以使用Oracle Enterprise Manager，SQL * Plus或SRVCTL启动和停止实例。使用SRVCTL启动Oracle RAC数据库和实例。使用SRVCTL停止实例和Oracle RAC数据库。如果要仅启动或停止一个实例并且已连接到本地节点，则必须首先确保当前环境包含本地实例的SID。管理可插拔数据库（PDB）涉及管理非CDB所需的一小部分任务。您可以使用SQL * Plus来验证数据库实例是否正在运行。您可以使用ALTER SYSTEM KILL SESSION语句终止特定实例上的会话。Oracle数据库会根据您的平台以特定顺序搜索参数文件。对于Oracle RAC数据库，您可以使用srvctl config database命令轻松确定参数文件的位置。Oracle建议您定期备份服务器参数文件以进行恢复。默认情况下，大多数参数都设置为默认值，并且此值在所有实例中都相同。Oracle建议此处列出的参数在所有实例上具有相同的设置。您可以将管理员管理的数据库转换为策略管理的数据库。停顿Oracle RAC数据库的过程与停顿非群集数据库相同。在Linux和UNIX平台上运行的Oracle RAC环境中，可以使用CLUSTER_INTERCONNECTS初始化参数指定Oracle Clusterware用于专用网络的备用互连。使用这些示例可以最大限度地减少Oracle Clusterware对Oracle RAC数据库的控制，您可能需要在升级期间执行这些操作。您可以使用Oracle Enterprise Manager Cloud Control从单个位置安装，配置和监视Oracle RAC数据库。您可以使用Oracle Enterprise Manager配置Oracle RAC环境警报。">管理数据库实例和群集数据库</a></li>
                           <li><a href="monitoring-performance.html#GUID-CB16404E-DC1C-4EA0-8A2D-7FA0907E63CD" title="“Oracle Enterprise Manager群集数据库性能”页面提供了数据库性能统计信息的快速概览。">监控Oracle RAC和Oracle Clusterware</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-3ED4DBCE-A148-462B-8A79-534A3F0D6E7D" title="默认情况下，SRVCTL安装在群集中的每个节点上。要使用SRVCTL，请登录节点的操作系统，并以区分大小写的语法输入SRVCTL命令及其参数。使用SRVCTL管理数据库，实例，集群数据库，集群数据库实例，Oracle ASM实例和磁盘组，服务，侦听器或其他集群件资源。本节包含有关对SRVCTL使用上下文相关帮助的信息。此版本中已弃用了许多SRVCTL命令和参数。Oracle Database 12c中不推荐使用单字符参数。在Oracle RAC环境中使用的SRVCTL命令的完整列表。将数据库配置添加到Oracle Clusterware。显示Oracle RAC数据库的配置或列出向Oracle Clusterware注册的所有已配置数据库。将数据库转换为Oracle RAC One Node数据库或从Oracle RAC One Node数据库转换数据库。禁用正在运行的数据库。将数据库及其服务的配置从当前版本降级到特定的较低版本。启用集群数据库及其实例。显示与数据库关联的环境变量的值。修改数据库的配置。预测特定数据库失败的后果。启动Oracle RAC One Node数据库从一个节点到另一个节点的重定位。删除数据库配置。管理群集数据库环境配置。启动集群数据库及其启用的实例，以及具有数据库实例的节点上的所有侦听器。此命令显示数据库的当前状态。停止数据库，其实例及其服务。取消设置群集数据库环境配置。更新指定的数据库以使用新的侦听器端点。将数据库及其所有服务的配置升级到运行此命令的数据库主目录版本。在许多指定节点上禁用特定磁盘组。在许多指定节点上启用特定磁盘组。预测Oracle ASM磁盘组故障的后果。从Oracle Clusterware或Oracle Restart中删除特定的Oracle ASM磁盘组资源。在许多指定节点上启动特定的Oracle ASM磁盘组资源。显示多个指定节点上特定磁盘组的状态。在许多指定节点上停止特定的Oracle ASM磁盘组资源。启动指定Oracle主目录上的所有Oracle Restart管理或Oracle Clusterware管理的资源。显示指定Oracle主目录的所有Oracle Restart管理资源或Oracle Clusterware管理资源的状态。停止从指定的Oracle主目录运行的所有Oracle Restart管理的或Oracle Clusterware管理的资源。将实例的配置添加到群集数据库配置。禁用数据库实例。启用Oracle RAC数据库的实例。对于管理员管理的数据库，此命令将数据库实例的配置从其当前节点修改为另一个节点。对于策略管理的数据库，此命令定义在数据库在指定节点上运行时要使用的实例名称。删除管理员管理的数据库实例的配置。在集群数据库中启动实例。srvctl stop instance命令停止实例并停止在指定实例上运行的任何服务。srvctl update instance命令更改实例连接的Oracle ASM实例或Oracle ASM IOServer，或者更改实例的打开模式。向集群中的每个节点添加侦听器。显示向Oracle Clusterware注册的特定侦听器的配置信息。禁用侦听器资源。启用侦听器资源。显示指定侦听器的环境变量。改变listener的几个方面预测听者失败的后果。从Oracle Clusterware或Oracle Restart中删除特定侦听器或所有侦听器的配置。管理侦听器环境配置。在特定节点上启动默认侦听器，或在Oracle Clusterware或给定节点上注册的所有节点上启动指定的侦听器。显示侦听器资源的状态。在所有节点或指定节点上停止默认侦听器或特定侦听器。取消设置侦听器的环境配置。更新侦听器以侦听新端点。添加静态或动态网络。显示群集的网络配置。修改网络的子网，网络类型或IP地址类型。预测网络故障的后果。删除网络配置。将节点应用程序配置添加到指定节点。显示群集中每个节点的VIP配置。禁用群集中所有节点上的节点应用程序。在群集中的所有节点上启用节点应用程序。显示节点应用程序配置的环境变量。修改节点应用程序的配置。删除节点应用程序配置。设置节点应用程序配置的环境变量。在节点或集群中的所有节点上启动节点级应用程序。显示节点应用程序的状态。停止群集中节点上的节点级应用程序。取消设置节点应用程序的环境配置。将Oracle Notification Service守护程序添加到Oracle Restart配置。显示Oracle Notification Service守护程序的配置信息。为Oracle重新启动安装禁用Oracle Notification Service守护程序。启用Oracle Notification Service守护程序。修改使用Oracle Restart注册的Oracle Notification Service后台驻留程序使用的端口。从Oracle Grid Infrastructure主目录中删除Oracle Notification Service。启动Oracle Notification Service守护程序。显示Oracle Notification Service守护程序的当前状态。停止Oracle Notification Service守护程序。为给定的SCAN添加Oracle Clusterware资源。默认情况下显示所有SCAN VIP的配置信息，或者显示ordinal_number标识的特定SCAN VIP。默认情况下禁用所有SCAN VIP，或者由ordinal_number标识的特定SCAN VIP。默认情况下启用所有SCAN VIP，或通过其序号识别的特定SCAN VIP。通过查找在DNS中指定的scan_name，修改SCAN VIP的数量以匹配返回的IP地址数。预测SCAN失败的后果。将特定SCAN VIP从其当前主机节点重定位到群集中的另一个节点。从所有SCAN VIP中删除Oracle Clusterware资源。默认情况下，在所有节点或群集中的特定节点上启动所有SCAN VIP或特定SCAN VIP。默认情况下显示所有SCAN VIP的状态或特定SCAN VIP。默认情况下，所有SCAN VIP都在运行或处于启动状态，或者停止由序号识别的特定SCAN VIP。为SCAN侦听器添加Oracle Clusterware资源。默认情况下显示所有SCAN侦听器的配置信息，或者显示由网络号或ordinal_number标识的特定侦听器。默认情况下禁用所有SCAN侦听器，或者按序号识别的特定侦听器。默认情况下启用所有SCAN侦听器，或由其序号标识的特定侦听器。修改SCAN侦听器以匹配SCAN VIP的侦听器，或修改SCAN侦听器端点或服务注册限制。预测SCAN侦听器失败的后果。将特定SCAN侦听器从其当前宿主节点重定位到群集中的另一个节点。从所有SCAN侦听器中删除Oracle Clusterware资源。默认情况下启动所有SCAN侦听器，或在所有节点或群集中的特定节点上启动特定侦听器。默认情况下显示所有SCAN侦听器的状态或特定侦听器。默认情况下，停止处于运行或启动状态的所有SCAN侦听器或由序号标识的特定侦听器。更新SCAN侦听器以侦听新端点。将服务器重定位到群集中的服务器池。显示特定服务器的当前状态。将服务添加到数据库并将其分配给实例。显示服务的配置。禁用服务。为Oracle Clusterware启用服务。修改服务配置。预测服务失败的后果。临时将指定的服务名称从一个指定的实例重定位到另一个指定的实例。删除服务的配置。在数据库，可插拔数据库或实例上启动服务或多个服务。显示服务的状态。跨群集数据库或指定实例全局停止一个或多个服务。添加配置为将Oracle数据库托管到群集的服务器池。显示配置信息，包括名称，最小大小，最大大小，重要性以及群集中特定服务器池的服务器名称列表（如果适用）。修改群集中的服务器池。删除特定的服务器池。显示服务器池名称，服务器池中的服务器数量，以及（可选）服务器池中服务器的名称。向节点添加虚拟IP地址（VIP）。显示群集中除用户VIP之外的所有网络上的所有VIP。禁用特定VIP.Enables特定VIP。为特定VIP设置环境变量的值。修改IP地址类型，但您也可以使用它来修改IP地址。预测VIP失败的后果。将特定VIP从其当前主机节点重定位到群集中的另一个节点。删除特定的VIP。管理群集VIP环境配置。在特定节点上启动特定VIP或VIP。显示特定节点上特定VIP或VIP的状态。停止特定节点上的特定VIP或所有VIP，包括因故障转移而重新定位的任何VIP。取消设置指定群集VIP的环境配置。显示特定卷或所有卷的配置。禁用特定卷或所有卷的Oracle Clusterware管理。为特定卷或所有卷启用Oracle Clusterware管理。删除特定卷。启动特定的启用卷。显示特定卷或所有卷的状态。停止特定的运行卷。">Server Control Utility Reference</a></li>
                           <li><a href="../cwadd/cluster-verification-utility-reference.html#CWADD-GUID-B88DC0CC-851A-4821-AB02-539D994ED524" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           <li><a href="../netag/managing-oracle-net-services.html#NETAG-GUID-D8861C13-A525-4A57-97FD-BD8F2DC5A662" target="_blank"><span><cite>Oracle数据库网络服务管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-B97D335E-105F-4721-9647-D1A3D485399A__GUID-B8DCBE41-C04A-4546-8320-91963C52192D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“管理数据库实例和群集数据库”，</span>了解使用SRVCTL，Oracle Enterprise Manager和SQL * Plus对Oracle RAC管理的介绍</p>
                           </li>
                           <li>
                              <p><span class="q">“监控Oracle RAC和Oracle Clusterware”</span></p>
                           </li>
                           <li>
                              <p>SRVCTL参考信息的<span class="q">“服务器控制实用程序参考”</span></p>
                           </li>
                           <li>
                              <p><span><cite>“Oracle Clusterware管理和部署指南”</cite></span>以获取有关群集验证实用程序（CVU）的信息，以及其他Oracle Clusterware工具，例如用于分配和取消分配网络接口的<code class="codeph">OCRCONFIG</code>工具以及用于管理OCR的<code class="codeph">OCRCONFIG</code>命令行工具</p>
                           </li>
                           <li>
                              <p>有关NETCA的详细信息，请参见<span><cite>“Oracle数据库网络服务管理员指南”</cite></span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7282"></a><div class="sect3"><a id="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14" name="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14"></a><h4 id="RACAD-GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14" class="sect4">关于监视Oracle RAC环境</h4>
                  <div>
                     <p>基于Web的Oracle Enterprise Manager Cloud Control使您可以监视Oracle RAC数据库。</p>
                     <p>Oracle Enterprise Manager云控制是您通过图形用户界面（GUI）访问的Oracle环境的中心控制点。有关使用Oracle Enterprise Manager监视Oracle RAC环境的更多信息，请参阅<span class="q">“监视Oracle RAC和Oracle Clusterware”</span> 。
                     </p>
                     <p>另请注意以下有关监视Oracle RAC环境的建议：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用Oracle Enterprise Manager Cloud Control启动集群数据库管理任务。</p>
                        </li>
                        <li>
                           <p>使用Oracle Enterprise Manager Cloud Control管理多个或单个Oracle RAC数据库。</p>
                        </li>
                        <li>
                           <p>使用基于<code class="codeph">V$</code>视图的全局视图（ <code class="codeph">GV$</code>视图）。<code class="codeph">catclustdb.sql</code>脚本创建<code class="codeph">GV$</code>视图。如果不使用DBCA创建数据库，请运行此脚本。否则，DBCA会为您运行此脚本。
                           </p>
                           <p>对于几乎每个<code class="codeph">V$</code>视图，都有一个相应的全局<code class="codeph">GV$</code>视图。除了<code class="codeph">V$</code>信息之外，每个<code class="codeph">GV$</code>视图还包含一个名为<code class="codeph">INST_ID</code>的额外列，它显示从中获取相关<code class="codeph">V$</code>视图信息的实例编号。
                           </p>
                        </li>
                        <li>
                           <p>使用Oracle Enterprise Manager中包含自动数据库诊断监视器（ADDM）和自动工作负载存储库（AWR）的Oracle数据库诊断和调优包的复杂管理和监视功能。</p>
                           <div class="infoboxnote" id="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14__GUID-AFCCD611-FD5A-4F9F-9F1A-44DDB698358C">
                              <p class="notep1">注意：</p>
                              <p>虽然Statspack可用于向后兼容，但Statspack仅提供报告。您必须在级别7运行Statspack以收集与块争用和段块等待相关的统计信息。</p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="monitoring-performance.html#GUID-CB16404E-DC1C-4EA0-8A2D-7FA0907E63CD" title="“Oracle Enterprise Manager群集数据库性能”页面提供了数据库性能统计信息的快速概览。">监控Oracle RAC和Oracle Clusterware</a></li>
                           <li><a href="../tgdba/automatic-performance-diagnostics.html#TGDBA-GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D" target="_blank"><span><cite>Oracle数据库性能调整指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14__GUID-401BA8B5-7AD1-49D5-9F67-6A73EDBFF1D5">
                        <p class="notep1">也可以看看：</p>
                        <p><span><cite>“Oracle数据库性能调整指南”，</cite></span>用于描述Oracle数据库自动功能，用于性能诊断和调优，包括ADDM</p>
                     </div>
                  </div>
               </div><a id="RACAD7283"></a><div class="sect3"><a id="GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6" name="GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6"></a><h4 id="RACAD-GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6" class="sect4">关于评估Oracle RAC环境中的性能</h4>
                  <div>
                     <p>您无需为Oracle RAC执行特殊调整; Oracle RAC无需进行特殊配置更改即可扩展。如果您的应用程序在非群集Oracle数据库上运行良好，那么它将在Oracle RAC环境中运行良好。您将在非群集Oracle数据库上执行的许多调优任务也可以提高Oracle RAC数据库性能<a id="d6446e7978" class="indexterm-anchor"></a> 。如果您的环境需要跨越更多CPU的可伸缩性，则尤其如此。
                     </p>
                     <p>Oracle RAC特有的一些性能特性包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d6446e7988" class="indexterm-anchor"></a>动态资源分配</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Oracle数据库根据需要动态分配Cache Fusion资源</p>
                              </li>
                              <li>
                                 <p>动态主控资源通过将资源保持在数据块本地来提高性能</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>缓存融合<a id="d6446e8003" class="indexterm-anchor"></a>实现简化的调整方法</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您不必调整Cache Fusion的任何参数</p>
                              </li>
                              <li>
                                 <p>不需要应用程序级调整</p>
                              </li>
                              <li>
                                 <p>您可以使用自下而上的调整方法，对现有应用程序几乎没有影响</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>更详细的性能统计</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关Oracle RAC性能监视的更多视图</p>
                              </li>
                              <li>
                                 <p>Oracle Enterprise Manager中特定于Oracle RAC的性能视图</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
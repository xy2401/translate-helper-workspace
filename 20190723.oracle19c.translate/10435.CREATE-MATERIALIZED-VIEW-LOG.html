<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>创建物化视图日志</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="CREATE-MATERIALIZED-VIEW.html" title="Previous" type="text/html"></link>
      <link rel="next" href="CREATE-MATERIALIZED-ZONEMAP.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CREATE-MATERIALIZED-VIEW.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="CREATE-MATERIALIZED-ZONEMAP.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-CREATE-LIBRARY-to-CREATE-SCHEMA.html" property="item" typeof="WebPage"><span property="name">SQL语句：CREATE LIBRARY以创建SCHEMA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建物化视图日志</li>
            </ol>
            <a id="GUID-13902019-D044-4B79-9EB4-1F60652D037B" name="GUID-13902019-D044-4B79-9EB4-1F60652D037B"></a><a id="SQLRF54193"></a><a id="SQLRF54194"></a><a id="SQLRF54195"></a><a id="SQLRF54196"></a><a id="SQLRF54197"></a><a id="SQLRF54198"></a><a id="SQLRF56063"></a><a id="SQLRF54199"></a><a id="SQLRF54200"></a><a id="SQLRF54201"></a><a id="SQLRF54202"></a><a id="SQLRF54203"></a><a id="SQLRF54204"></a><a id="SQLRF54205"></a><a id="SQLRF54206"></a><a id="SQLRF54207"></a><a id="SQLRF54208"></a><a id="SQLRF54209"></a><a id="SQLRF54210"></a><a id="SQLRF54211"></a><a id="SQLRF54212"></a><a id="SQLRF54213"></a><a id="SQLRF54214"></a><a id="SQLRF54215"></a><a id="SQLRF54216"></a><a id="SQLRF54217"></a><a id="SQLRF54218"></a><a id="SQLRF54219"></a><a id="SQLRF54220"></a><a id="SQLRF54221"></a><a id="SQLRF54222"></a><a id="SQLRF56064"></a><a id="SQLRF56087"></a><a id="SQLRF56088"></a><a id="SQLRF56089"></a><a id="SQLRF54223"></a><a id="SQLRF54224"></a><a id="SQLRF54225"></a><a id="SQLRF54226"></a><a id="SQLRF54227"></a><a id="SQLRF56105"></a><a id="SQLRF01303"></a>
            
            <h2 id="SQLRF-GUID-13902019-D044-4B79-9EB4-1F60652D037B" class="sect2">创建物化视图日志</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-CAD93634-C259-49A3-ACD5-EFC28B28F5CE">目的</p>
                  <p><a id="d331641e238" class="indexterm-anchor"></a><a id="d331641e240" class="indexterm-anchor"></a><a id="d331641e244" class="indexterm-anchor"></a><a id="d331641e248" class="indexterm-anchor"></a>使用<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code>语句创建<code class="codeph">LOG</code> <span class="bold">化视图日志</span> ，该<span class="bold">日志</span>是与实例化视图的主表关联的表。
                  </p>
                  <div class="infoboxnote" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-EC077B6D-CCE4-425A-8DF9-243D66CA75AF">
                     <p class="notep1">注意：</p>
                     <p>支持使用关键字<code class="codeph">SNAPSHOT</code>代替<code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>以实现向后兼容。
                     </p>
                  </div>
                  <p>物化视图日志用于两种类型的物化视图刷新：快速刷新和同步刷新。</p>
                  <p><span class="bold">快速</span> <span class="bold">刷新</span>使用传统的物化视图日志。在快速刷新（也称为增量刷新）期间，当对主表数据进行DML更改时，Oracle数据库会在物化视图日志中存储描述这些更改的行，然后使用物化视图日志根据主表刷新实例化视图。
                  </p>
                  <p><span class="bold">同步</span> <span class="bold">刷新</span>使用称为<span class="bold">暂存</span> <span class="bold">日志</span>的特殊类型的物化视图<span class="bold">日志</span> 。在同步刷新期间，首先在暂存日志中描述DML更改，然后同时将其应用于主表和实例化视图。这保证了主表数据和物化视图数据在整个刷新过程中保持同步。此刷新方法在数据仓库环境中很有用。
                  </p>
                  <p>如果没有物化视图日志，Oracle数据库必须重新执行物化视图查询以刷新物化视图。此过程称为<span class="bold">完全刷新</span> 。通常，完全刷新比快速刷新或同步刷新需要更多时间。
                  </p>
                  <p>物化视图日志位于master数据库中与主表相同的模式中。主表只能在其上定义一个物化视图日志。</p>
                  <p><a id="d331641e311" class="indexterm-anchor"></a><a id="d331641e313" class="indexterm-anchor"></a>要快速刷新或同步刷新实例化连接视图，必须为实例化视图引用的每个表创建实例化视图日志。
                  </p>
                  <p>快速刷新支持两种类型的物化视图日志：基于时间戳的物化视图日志和提交基于SCN的物化视图日志。基于时间戳的物化视图日志使用时间戳，并在准备刷新物化视图时需要一些设置操作。提交基于SCN的物化视图日志使用提交SCN数据而不是时间戳，这消除了对设置操作的需要，从而可以提高物化视图刷新的速度。如果指定<code class="codeph">COMMIT</code> <code class="codeph">SCN</code>子句，则会创建基于提交SCN的实例化视图日志。否则，将创建基于时间戳的物化视图日志。请注意，只有新的物化视图日志才能利用<code class="codeph">COMMIT</code> <code class="codeph">SCN</code> 。除非删除并重新创建<code class="codeph">COMMIT</code> <code class="codeph">SCN</code>否则不能更改现有的物化视图日志。有关更多信息，请参阅<a href="../dwhsg/refreshing-materialized-views.html#DWHSG0319" target="_blank"><span class="italic">Oracle数据库数据仓库指南</span></a> 。
                  </p>
                  <p>同步刷新仅支持基于时间戳的登台日志。</p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-6C1CE8D6-9EF8-4056-ABED-528872185C7A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B">创建物化视图</a> ， <a href="ALTER-MATERIALIZED-VIEW.html#GUID-29EE5682-AE42-4879-ABAD-E34E66ADD233">更改物化视图</a> ， <a href="../cncpt/partitions-views-and-other-schema-objects.html#CNCPT411" target="_blank"><span class="italic">Oracle数据库概念</span></a> ， <a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle数据库数据仓库指南</span></a>和<a href="../admin/read-only-materialized-view-concepts.html#ADMIN-GUID-A422B474-4BED-4A60-AEDB-E93630746083" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> ，了解有关物化视图的信息</p>
                        </li>
                        <li>
                           <p><a href="ALTER-MATERIALIZED-VIEW-LOG.html#GUID-4DAD5E6F-E30A-43D0-B023-634752E0E627">ALTER MATERIALIZED VIEW LOG</a>有关修改物化视图日志的信息</p>
                        </li>
                        <li>
                           <p>有关删除物化视图日志的信息，请使用<a href="DROP-MATERIALIZED-VIEW-LOG.html#GUID-878A08F7-CB95-4911-BE2E-9FEED8861410">DROP MATERIALIZED VIEW LOG</a></p>
                        </li>
                        <li>
                           <p>有关使用直接加载程序日志的信息，请参阅<a href="../sutil/oracle-sql-loader-concepts.html#SUTIL003" target="_blank"><span class="italic">Oracle数</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-37B82F6F-0710-467F-901C-339F528DDE11">先决条件</p>
                  <p>创建实例化视图日志所需的权限直接与创建与实例化视图日志关联的基础对象所需的权限相关。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果您拥有主表，则可以创建关联的物化视图日志（如果您具有<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>权限）。
                        </p>
                     </li>
                     <li>
                        <p>如果要为另一个用户的模式中的表创建实例化视图日志，则必须具有<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>和<code class="codeph">COMMENT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权，以及主表或<code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>上的<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象特权。或<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权。
                        </p>
                     </li>
                  </ul>
                  <p>在任何一种情况下，物化视图日志的所有者必须在用于保存物化视图日志的表空间中具有足够的配额，或者必须具有<code class="codeph">UNLIMITED</code> <code class="codeph">TABLESPACE</code>系统特权。
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A940E096-1960-41BA-949D-3BED64486A8F">
                     <p class="notep1">也可以看看：</p>
                     <p>有关创建实例化视图日志的先决条件的详细信息，请<a href="../dwhsg/index.html" target="_blank"><span class="italic">参见“Oracle数据库数据仓库指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-1401AE4A-1BC3-4054-9A24-BBAA819C1BFC">限制</p>
                  <p><code class="codeph">CREATE MATERIALIZED VIEW LOG</code>语句不支持主表中的以下列：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>隐藏的列</p>
                     </li>
                     <li>
                        <p>标识列</p>
                     </li>
                     <li>
                        <p><code class="codeph">BFILE</code>列</p>
                     </li>
                     <li>
                        <p>时间有效性列</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-F63D6CC7-7B46-47D0-BB34-CE5CBE4DA768">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-16CD4370-AB96-4A76-90D6-6F7D41BBC97B"><span class="italic">create_materialized_vw_log</span> :: =</p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A0E9CFAE-2DE6-4EF7-B868-0BCF04295041"><img src="img/create_materialized_vw_log.gif" alt="下面是create_materialized_vw_log.eps的描述" title="下面是create_materialized_vw_log.eps的描述" longdesc="img_text/create_materialized_vw_log.html"><br><a href="img_text/create_materialized_vw_log.html">说明create_materialized_vw_log.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B__I2116626">physical_attributes_clause :: =</a></span> ， <span class="italic"><a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2117068">logging_clause :: =</a></span> ， <span class="italic"><a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2116510">parallel_clause :: =</a></span> ， <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2129707">table_partitioning_clauses :: =</a></span> （在<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ）， <span class="italic"><a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2117146">new_values_clause :: =</a></span> ， <span class="italic"><a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__CACBGACI">mv_log_purge_clause :: =</a></span> ， <span class="italic"><a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__CCHGAFBA">for_refresh_clause :: =</a></span> 。）
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-52DB2797-551C-4962-8AC9-6F5180920555"><span class="italic">physical_attributes_clause</span> :: =</p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-C228A913-BF38-4E7C-BB26-8812EDD9EC04"><img src="img/physical_attributes_clause.gif" alt="physical_attributes_clause.eps的描述如下" title="physical_attributes_clause.eps的描述如下" longdesc="img_text/physical_attributes_clause.html"><br><a href="img_text/physical_attributes_clause.html">physical_attributes_clause.eps插图的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="storage_clause.html#GUID-C5A67610-3160-41E9-8D48-03206BD5ED15__CJACEJGB">storage_clause :: =</a></span> <span class="bold"><tt></tt></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2117068">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-D988D1A4-60D3-4440-9D9B-D9173A43A54A"><span class="italic">logging_clause</span> :: =</p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A92AB4EA-6F78-44AD-8988-011E93A175E9"><img src="img/logging_clause.gif" alt="logging_clause.eps的描述如下" title="logging_clause.eps的描述如下" longdesc="img_text/logging_clause.html"><br><a href="img_text/logging_clause.html">说明logging_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2116510">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-22ED127A-A6BE-4ECD-82DA-577CE77B0028"><span class="italic">parallel_clause</span> :: =</p><a id="d331641e566" class="indexterm-anchor"></a><div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-3ACF11D4-9D84-43BA-82D9-2545C5042D33"><img src="img/parallel_clause.gif" alt="parallel_clause.eps的描述如下" title="parallel_clause.eps的描述如下" longdesc="img_text/parallel_clause.html"><br><a href="img_text/parallel_clause.html">parallel_clause.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2117146">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-D0A08836-24A8-4642-8B31-70AB9B600BEB"><span class="italic">new_values_clause</span> :: =</p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A4F0D79B-61BC-4D9B-AD4A-6659EF278ECD"><img src="img/new_values_clause.gif" alt="下面是new_values_clause.eps的描述" title="下面是new_values_clause.eps的描述" longdesc="img_text/new_values_clause.html"><br><a href="img_text/new_values_clause.html">插图说明new_values_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__CACBGACI">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-773A151C-A0D8-4E79-8C72-580CC1FFB9E8"><span class="italic">mv_log_purge_clause</span> :: =</p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-32760C17-FD83-4EF9-BDA0-0EC718189307"><img src="img/mv_log_purge_clause.gif" alt="下面是mv_log_purge_clause.eps的描述" title="下面是mv_log_purge_clause.eps的描述" longdesc="img_text/mv_log_purge_clause.html"><br><a href="img_text/mv_log_purge_clause.html">插图描述mv_log_purge_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__CCHGAFBA">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-3715F3F5-A9E8-44CA-80FD-025C9A378F35"><span class="italic">for_refresh_clause</span> :: =</p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-055AF3E7-676E-4C2B-AA98-DC46E7B03AC7"><img src="img/for_refresh_clause.gif" alt="下面是for_refresh_clause.eps的描述" title="下面是for_refresh_clause.eps的描述" longdesc="img_text/for_refresh_clause.html"><br><a href="img_text/for_refresh_clause.html">插图描述for_refresh_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A95FC3BA-00E3-4E3B-B329-C2CA9966A6E9">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-56E197C3-57AD-4BB7-9BF8-04E9A0A57500"><span class="italic">模式</span></p>
                  <p>指定包含实例化视图日志主表的模式。如果省略<span class="italic"><code class="codeph">schema</code></span> ，则Oracle数据库假定主表包含在您自己的模式中。Oracle数据库在其主表的模式中创建实例化视图日志。您无法为用户<code class="codeph">SYS</code>的模式中的表创建实例化视图日志。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-34BABF57-18DB-4255-BC51-BA3282CB4E47"><span class="italic">表</span></p>
                  <p>指定要为其创建实例化视图日志的主表的名称。Oracle数据库使用相同的加密算法加密物化视图日志中在主表中加密的任何列。</p>
                  <p><span class="bold">物化视图日志主表的限制</span></p>
                  <p>以下限制适用于物化视图日志的主表：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您无法为临时表或视图创建实例化视图日志。</p>
                     </li>
                     <li>
                        <p>您无法为具有虚拟列的主表创建实例化视图日志。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-41CF9850-59CE-4749-99C4-04F11CB2D9AB">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098404">创建物化视图日志以进行快速刷新：示例</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-1532409D-8B7D-4ADE-BC08-90C36549FD2A"><span class="italic">physical_attributes_clause</span></p>
                  <p>使用<span class="italic"><code class="codeph">physical_attributes_clause</code></span>定义物化视图日志的物理和存储特征。
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-BE8CB4D2-C5E1-4D29-94FB-BE3555B05674">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393">physical_attributes_clause</a></span>和<span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393__I1026834">storage_clause</a></span>用于完整描述这些子句，包括默认值</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-9F074953-50C9-4829-916E-40302BC6008E">TABLESPACE条款</p>
                  <p><a id="d331641e661" class="indexterm-anchor"></a>指定要在其中创建实例化视图日志的表空间。如果省略此子句，则数据库将在物化视图日志的模式的缺省表空间中创建实例化视图日志。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-646811A0-677A-44BF-B79B-EF616CB9BE81"><span class="italic">logging_clause</span></p>
                  <p><a id="d331641e671" class="indexterm-anchor"></a>指定<code class="codeph">LOGGING</code>或<code class="codeph">NOLOGGING</code>以建立物化视图日志的日志记录特征。默认值是物化视图日志所在的表空间的日志记录特征。
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-CBA41BCF-1F7F-4FB8-9DBE-F21B118513BE">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="italic"><a href="logging_clause.html#GUID-C4212274-5595-4045-A599-F033772C496E">logging_clause</a></span>获取此子句的完整描述</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-55DA9114-DD08-42F8-A03B-42C43C05526C">CACHE | NOCACHE</p>
                  <p><a id="d331641e692" class="indexterm-anchor"></a><a id="d331641e696" class="indexterm-anchor"></a>对于将频繁访问的数据， <code class="codeph">CACHE</code>指定在执行全表扫描时，为此日志检索的块放置在缓冲区高速缓存中最近最少使用（LRU）列表的最近使用的末尾。此属性对小型查找表很有用。
                  </p>
                  <p><code class="codeph">NOCACHE</code>指定将块放置在LRU列表的最近最少使用的末尾。默认值为<code class="codeph">NOCACHE</code> 。</p>
                  <div class="infoboxnote" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-6BA8B4AB-AB3C-4670-9A56-B625B8170E0F">
                     <p class="notep1">注意：</p>
                     <p><code class="codeph">NOCACHE</code>对您在<span class="italic"><code class="codeph">storage_clause</code></span>指定<code class="codeph">KEEP</code>物化视图日志没有影响。
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-884D889A-2952-48ED-8E3C-0FA16D014527">
                     <p class="notep1">也可以看看：</p>
                     <p>有关指定<code class="codeph">CACHE</code>或<code class="codeph">NOCACHE</code>信息，请<code class="codeph">CACHE</code> <a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6">CREATE TABLE</a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-EFB524D2-5131-417D-B0ED-E30A162E9BAD"><span class="italic">parallel_clause</span></p>
                  <p><span class="italic"><code class="codeph">parallel_clause</code></span>允许您指示物化视图日志是否支持并行操作。
                  </p>
                  <p>有关此子句的完整信息，请参阅<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>文档中的<span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2159323">parallel_clause</a></span> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-05BA74F2-34E2-4F3C-ADB0-A68252EB70D2"><span class="italic">table_partitioning_clauses</span></p>
                  <p>使用<span class="italic"><code class="codeph">table_partitioning_clauses</code></span>指示<span class="italic"><code class="codeph">table_partitioning_clauses</code></span>化视图日志在指定的值范围或散列函数上进行分区。物化视图日志的分区与表的分区相同。
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-1F73548B-543D-415A-83ED-0DC337C3F3E4">
                     <p class="notep1">也可以看看：</p>
                     <p><code class="codeph">CREATE TABLE</code>文档中的<span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2215406">table_partitioning_clauses</a></span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-D1CAF655-204F-43F5-82EA-8EC6F9176DD3">与条款</p>
                  <p><a id="d331641e778" class="indexterm-anchor"></a><a id="d331641e782" class="indexterm-anchor"></a><a id="d331641e786" class="indexterm-anchor"></a><a id="d331641e790" class="indexterm-anchor"></a>使用<code class="codeph">WITH</code>子句指示实例化视图日志是否应在主服务器中的行更改时记录主键，rowid，对象ID或这些行标识符的组合。您还可以使用此子句将序列添加到物化视图日志，以便为其记录提供其他订购信息。
                  </p>
                  <p>此子句还指定实例化视图日志是否记录可能作为<span class="bold">过滤列</span>引用的其他<span class="bold">列</span> ，即子查询实例化视图引用的非主键列，或<span class="bold">连接列</span> ，这些列是定义连接的非主键列在子查询<code class="codeph">WHERE</code>子句中。
                  </p>
                  <p>如果省略此子句，或者如果指定不带<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> ， <code class="codeph">ROWID</code>或<code class="codeph">OBJECT</code> <code class="codeph">ID</code>的子句，则数据库默认存储主键值。但是，如果在创建时仅指定<code class="codeph">OBJECT</code> <code class="codeph">ID</code>或<code class="codeph">ROWID</code> ，则数据库不会隐式存储主键值。显式或默认创建的主键日志会对主键约束执行附加检查。
                  </p>
                  <p><span class="bold">对象ID</span></p>
                  <p>指定<code class="codeph">OBJECT</code> <code class="codeph">ID</code>以指示应在物化视图日志中记录每个已修改行的系统生成或用户定义的对象标识符。
                  </p>
                  <p><span class="bold">对OBJECT ID的限制</span></p>
                  <p>只有在对象表上创建日志时才能指定<code class="codeph">OBJECT</code> <code class="codeph">ID</code> ，并且不能为存储表指定它。
                  </p>
                  <p><span class="bold">首要的关键</span></p>
                  <p>指定<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>以指示更改的所有行的主键应记录在物化视图日志中。
                  </p>
                  <p><span class="bold">ROWID</span></p>
                  <p>指定<code class="codeph">ROWID</code>以指示应更改的所有行的rowid应记录在物化视图日志中。
                  </p>
                  <p><span class="bold">序列</span></p>
                  <p>指定<code class="codeph">SEQUENCE</code>以指示应在物化视图日志中记录提供附加排序信息的序列值。在某些更新方案之后，序列号是支持快速刷新所必需的。
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-8A79E937-5E5B-49BF-9F42-11BD584B5861">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../dwhsg/index.html" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”</span></a> ，了解有关在物化视图日志中使用序列号的详细信息以及使用此子句的示例</p>
                  </div>
                  <p><span class="bold">提交SCN</span></p>
                  <p>如果没有<code class="codeph">COMMIT</code> <code class="codeph">SCN</code>子句， <code class="codeph">SCN</code>化视图日志基于时间戳，并且在准备刷新实例化视图时需要一些设置操作。指定<code class="codeph">COMMIT</code> <code class="codeph">SCN</code>以指示数据库使用提交SCN数据而不是时间戳。此设置消除了对设置操作的需要，因此可以提高物化视图刷新的速度。
                  </p>
                  <p>您可以使用基于提交SCN的物化视图日志在主表上创建以下类型的本地物化视图（包括<code class="codeph">ON</code> <code class="codeph">COMMIT</code>和<code class="codeph">ON</code> <code class="codeph">DEMAND</code> ）：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>物化聚合视图，包括单个表上的物化聚合视图</p>
                     </li>
                     <li>
                        <p>物化连接视图</p>
                     </li>
                     <li>
                        <p>基于主键和基于rowid的单表物化视图</p>
                     </li>
                     <li>
                        <p><code class="codeph">UNION</code> <code class="codeph">ALL</code>物化视图，其中每个<code class="codeph">UNION</code> <code class="codeph">ALL</code>分支都是上述物化视图类型之一</p>
                     </li>
                  </ul>
                  <p>您无法使用基于提交SCN的物化视图日志在主表上创建远程实例化视图。</p>
                  <p><span class="bold">COMMIT SCN的限制</span></p>
                  <p>以下限制适用于<code class="codeph">COMMIT</code> <code class="codeph">SCN</code> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>不支持在具有一个或多个LOB列的表上使用<code class="codeph">COMMIT</code> <code class="codeph">SCN</code> ，并导致<code class="codeph">ORA-32421</code> 。
                        </p>
                     </li>
                     <li>
                        <p>不支持使用不同类型的物化视图日志（即具有基于时间戳的物化视图日志的主表和具有基于提交SCN的物化视图日志的主表）在主表上创建物化视图，并导致<code class="codeph">ORA-32414</code> 。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">COMMIT</code> <code class="codeph">SCN</code> ，则不能指定<code class="codeph">FOR</code> <code class="codeph">SYNCHRONOUS</code> <code class="codeph">REFRESH</code> 。</p>
                     </li>
                  </ul>
                  <p><span class="bold"><span class="italic">柱</span></span></p>
                  <p>为要更改的所有行指定要在实体化视图日志中记录其值的列。通常，这些列是过滤列和连接列。</p>
                  <p><span class="bold">WITH子句的限制</span></p>
                  <p>本条款受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您只能为每个物化视图日志指定一个<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> ，一个<code class="codeph">ROWID</code> ，一个<code class="codeph">OBJECT</code> <code class="codeph">ID</code> ，一个<code class="codeph">SEQUENCE</code>和一个列列表。
                        </p>
                     </li>
                     <li>
                        <p>主键列隐式记录在物化视图日志中。因此，如果<span class="italic"><code class="codeph">column</code></span>包含其中一个主键列，则无法指定以下任何组合：</p><pre class="oac_no_warn" dir="ltr">与......PRIMARY KEY ...（ <span class="italic">列</span> ）WITH ...（ <span class="italic">列</span> ）......主要关键（ <span class="italic">列</span> ）</pre></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-FE960D94-7390-4E19-BF7F-607E1C62C961">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B">CREATE MATERIALIZED VIEW</a>获取有关显式和隐式包含物化视图日志值的信息</p>
                        </li>
                        <li>
                           <p>有关筛选器列和连接列的详细信息，请参见<a href="../admin/read-only-materialized-view-architecture.html#ADMIN-GUID-EA4C8CD8-51E2-4C3B-8281-210940D8DE01" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098358">为物化视图日志指定过滤器列：示例</a> ”</span>和<span class="q">“ <a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098379">为物化视图日志指定连接列：示例</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-C219AD7C-807E-4ED9-B4D7-C45F2537A9E2">新价值条款</p>
                  <p><a id="d331641e1078" class="indexterm-anchor"></a><a id="d331641e1082" class="indexterm-anchor"></a><a id="d331641e1086" class="indexterm-anchor"></a> <code class="codeph">NEW</code> <code class="codeph">VALUES</code>子句允许您确定Oracle数据库是否在物化视图日志中保存更新DML操作的旧值和新值。
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-78A9F843-8B67-40D3-B4F3-8BBDA8ACE77B">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2119924">在物化视图日志中包含新值：示例</a> ”</span></p>
                  </div>
                  <p><span class="bold">包含</span></p>
                  <p>指定<code class="codeph">INCLUDING</code>以在日志中保存新旧值。如果此日志用于具有单表实现聚合视图的表，并且您希望实例化视图有资格进行快速刷新，则必须指定<code class="codeph">INCLUDING</code> 。</p>
                  <p><span class="bold">不包括</span></p>
                  <p>指定<code class="codeph">EXCLUDING</code>以禁用在日志中记录新值。这是默认值。您可以使用此子句来避免记录新值的开销。如果在主表上定义了快速刷新的单表实现聚合视图，请不要使用此子句。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__CACCJBFD">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-D80A191A-32D3-4831-9B06-7ABCAB464E48"><span class="italic">mv_log_purge_clause</span></p>
                  <p><a id="d331641e1127" class="indexterm-anchor"></a>使用此子句指定实例化视图日志的清除时间。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">IMMEDIATE</code> <code class="codeph">SYNCHRONOUS</code> ：刷新后立即清除物化视图日志。这是默认值。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">IMMEDIATE</code> <code class="codeph">ASYNCHRONOUS</code> ：在刷新操作之后，物化视图日志在单独的Oracle Scheduler作业中被清除。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">START</code> <code class="codeph">WITH</code> ， <code class="codeph">NEXT</code>和<code class="codeph">REPEAT</code> <code class="codeph">INTERVAL</code>设置一个独立于物化视图刷新的预定清除，并在<code class="codeph">CREATE</code>或<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code>语句中启动。这与<code class="codeph">CREATE</code>或<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句中的计划刷新语法非常相似：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">START</code> <code class="codeph">WITH</code> datetime表达式指定清除开始的时间。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NEXT</code>日期时间表达式计算清除的下一个运行时间。
                              </p>
                           </li>
                        </ul>
                        <p>如果指定<code class="codeph">REPEAT</code> <code class="codeph">INTERVAL</code> ，则下一个运行时将为： <code class="codeph">SYSDATE +</code> <span class="italic"><code class="codeph">interval_expr</code></span> 。
                        </p>
                        <p>具有计划清除的<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code>语句创建Oracle Scheduler作业以执行日志清除。该作业调用<code class="codeph">DBMS_SNAPSHOT</code> 。 <code class="codeph">PURGE_LOG</code>过程清除物化视图日志。此过程允许您通过多个物化视图刷新来分摊清除成本。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">对</span> <span class="bold"><span class="italic">mv_log_purge_clause的</span></span> <span class="bold">限制</span></p>
                  <p>此子句对临时表上的物化视图日志无效。</p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-C59A8FBE-47B6-4161-9078-9E2595DF6087">
                     <p class="notep1">也可以看看：</p>
                     <p>有关清除实例化视图日志的详细信息，请参阅<a href="../dwhsg/basic-materialized-views.html#DWHSG9302" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__CCHIHIEB">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-E72E607D-7E0F-4B21-8ADA-F642DE4BBE64"><span class="italic">for_refresh_clause</span></p>
                  <p><a id="d331641e1268" class="indexterm-anchor"></a>使用此子句指定将使用实例化视图日志的刷新方法。您只能为任何给定的主表指定一个刷新方法。
                  </p>
                  <p><span class="bold">用于同步刷新</span></p>
                  <p>指定此子句以创建可用于同步刷新的暂存日志。使用<span class="italic"><code class="codeph">staging_log_name</code></span>指定要创建的登台日志的名称。将在主表所在的模式中创建暂存日志。
                  </p>
                  <p>创建登台日志后，无法直接在主表上执行DML操作。必须使用<code class="codeph">DBMS_SYNC_REFRESH</code>程序包中的过程来准备和执行更改数据操作。
                  </p>
                  <p><span class="bold">同步刷新的限制</span></p>
                  <p>以下限制适用于同步刷新：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果指定<code class="codeph">FOR</code> <code class="codeph">SYNCHRONOUS</code> <code class="codeph">REFRESH</code> ，则无法指定<code class="codeph">COMMIT</code> <code class="codeph">SCN</code> 。</p>
                     </li>
                     <li>
                        <p>要符合同步刷新条件，主表必须满足以下条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果主表是事实表，则必须对其进行分区。</p>
                           </li>
                           <li>
                              <p>主表必须有一个键。如果主表是维度表，则必须在其上定义主键。如果主表是事实表，那么作为连接到事实表的维表的外键的列集被认为是关键。</p>
                           </li>
                           <li>
                              <p>主表不能具有非NULL虚拟专用数据库（VPD）策略或在其上定义的触发器。</p>
                           </li>
                        </ul>
                        <p>即使不满足上述所有条件，Oracle数据库也可以允许您在主表上创建登台日志。但是，主表不符合同步刷新的条件。</p>
                     </li>
                     <li>
                        <p>主表上的任何现有物化视图都必须是按需刷新的物化视图。如果现有的<span class="italic"><a href="ALTER-MATERIALIZED-VIEW.html#GUID-29EE5682-AE42-4879-ABAD-E34E66ADD233__I2226546">实例</a></span>化视图是提交时刷新<span class="italic"><a href="ALTER-MATERIALIZED-VIEW.html#GUID-29EE5682-AE42-4879-ABAD-E34E66ADD233__I2226546">实体</a></span>化视图，则必须在创建暂存日志之前使用<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>的<span class="italic"><a href="ALTER-MATERIALIZED-VIEW.html#GUID-29EE5682-AE42-4879-ABAD-E34E66ADD233__I2226546">alter_mv_refresh</a></span>子句将其<code class="codeph">ALTER</code>为按需刷新<span class="italic"><a href="ALTER-MATERIALIZED-VIEW.html#GUID-29EE5682-AE42-4879-ABAD-E34E66ADD233__I2226546">实例化</a></span> <code class="codeph">VIEW</code> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-7FBB1298-78F0-4BCB-BFC5-F52E03BC4C7F">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle数据库数据仓库指南</span></a> ，了解使用同步刷新的完整步骤</p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">DBMS_SYNC_REFRESH</code>程序包的信息，请<code class="codeph">DBMS_SYNC_REFRESH</code> <a href="../arpls/DBMS_SYNC_REFRESH.html#ARPLS73623" target="_blank"><span class="italic">Oracle Database PL / SQL程序包和类型参考</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <p><span class="bold">快速刷新</span></p>
                  <p>指定此子句以创建可用于快速刷新的物化视图日志。物化视图日志将在主表所在的同一模式中创建。这是默认值。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2064930">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A0DDFDE0-C803-411E-B472-732C9A3F27D8">例子</p>
                  <p id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098404"><span class="bold">创建物化视图日志以进行快速刷新：示例</span></p>
                  <p>以下语句在<code class="codeph">oe.customers</code>表上创建<code class="codeph">oe.customers</code>化视图日志，该日志指定物理和存储特征：</p><pre class="oac_no_warn" dir="ltr">创建物化视图登录客户PCTFREE 5 TABLESPACE示例存储（初始10K）;</pre><p>物化视图登录<code class="codeph">customers</code>支持主键物化视图的快速刷新。
                  </p>
                  <p>以下语句使用<code class="codeph">ROWID</code>子句创建具体化视图日志的另一个版本，该子句可以为更多类型的物化视图快速刷新：</p><pre class="oac_no_warn" dir="ltr">使用PRIMARY KEY，ROWID创建物料化视图登录客户;</pre><p>这种物化视图登录<code class="codeph">customers</code>可以快速刷新rowid物化视图和物化连接视图。要提供物化聚合视图的快速刷新，还必须指定<code class="codeph">SEQUENCE</code>和<code class="codeph">INCLUDING</code> <code class="codeph">NEW</code> <code class="codeph">VALUES</code>子句，如下面的示例所示。
                  </p>
                  <p><span class="bold">为物化视图日志指定清除重复间隔：示例</span></p>
                  <p>以下语句在<code class="codeph">oe.orders</code>表上创建<code class="codeph">oe.orders</code>化视图日志。日志的内容将每五天清除一次，从物化视图日志创建日期的五天开始：</p><pre class="oac_no_warn" dir="ltr">创建物化视图登录订单PCTFREE 5 TABLESPACE示例存储（初始10K）清除重复间隔'5'天;</pre><p id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098358"><span class="bold">为物化视图日志指定过滤器列：示例</span></p>
                  <p>以下语句在<code class="codeph">sh.sales</code>表上<span class="q"><a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B__I2092102">创建实例</a></span>化视图日志，并在<span class="q">“ <a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B__I2092102">Creating materialized Aggregate Views：Example</a> ”中使用</span> 。它将该物化视图中引用的表的所有列指定为过滤器列。
                  </p><pre class="oac_no_warn" dir="ltr">使用ROWID，SEQUENCE（amount_sold，time_id，prod_id）创建物料化视图登录销售包括新值;</pre><p id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098379"><span class="bold">为物化视图日志指定连接列：示例</span></p>
                  <p>以下语句在示例<code class="codeph">oe</code>架构的<code class="codeph">order_items</code>表上创建实例化视图日志。日志记录主键和<code class="codeph">product_id</code> ，它在<span class="q">“ <a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B__I2080820">创建快速可刷新的物化视图：示例</a> ”中</span>用作连接列。
                  </p><pre class="oac_no_warn" dir="ltr">创建物料化视图登录order_items WITH（product_id）;</pre><p id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2119924"><span class="bold">在物化视图日志中包含新值：示例</span></p>
                  <p>下面的示例创建对物化视图日志<code class="codeph">oe.product_information</code>指定表<code class="codeph">INCLUDING</code> <code class="codeph">NEW</code> <code class="codeph">VALUES</code> ：</p><pre class="oac_no_warn" dir="ltr">使用ROWID，SEQUENCE（list_price，min_price，category_id）创建物料化视图登录product_information，包括新值的主要关键字;</pre><p>您可以创建以下物化聚合视图以使用<code class="codeph">product_information</code>日志：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW products_mv REFRESH FAST ON COMMIT AS SELECT SUM（list_price  -  min_price），category_id FROM product_information GROUP BY category_id;</pre><p>此物化视图有资格进行快速刷新，因为在其主表上定义的日志包括旧值和新值。</p>
                  <p><span class="bold">为同步刷新创建暂存日志：示例</span></p>
                  <p>以下语句在<code class="codeph">sh.sales</code>事实表上创建登台日志。登台日志名为<code class="codeph">mystage_log</code> ，存储在<code class="codeph">sh</code>架构中。它可以用于同步刷新。
                  </p><pre class="oac_no_warn" dir="ltr">创建物化视图登录销售PCTFREE 5 TABLESPACE示例存储（初始10K）使用mystage_log进行同步刷新;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>创建大纲</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="CREATE-OPERATOR.html" title="Previous" type="text/html"></link>
      <link rel="next" href="CREATE-PACKAGE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CREATE-OPERATOR.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="CREATE-PACKAGE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-CREATE-LIBRARY-to-CREATE-SCHEMA.html" property="item" typeof="WebPage"><span property="name">SQL语句：CREATE LIBRARY以创建SCHEMA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建大纲</li>
            </ol>
            <a id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627" name="GUID-7CC033AF-DB19-4616-87D9-8173939FD627"></a><a id="SQLRF54249"></a><a id="SQLRF54250"></a><a id="SQLRF54251"></a><a id="SQLRF54252"></a><a id="SQLRF54253"></a><a id="SQLRF54254"></a><a id="SQLRF54255"></a><a id="SQLRF54256"></a><a id="SQLRF54257"></a><a id="SQLRF54258"></a><a id="SQLRF54259"></a><a id="SQLRF54260"></a><a id="SQLRF01305"></a>
            
            <h2 id="SQLRF-GUID-7CC033AF-DB19-4616-87D9-8173939FD627" class="sect2">创建大纲</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-F91ABC86-3AFC-4378-A479-E0E0C2D842EE">目的</p>
                  <div class="infoboxnote" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-D82BA9CB-8D59-4F5F-82F1-201082A52444">
                     <p class="notep1">注意：</p>
                     <p>存储的大纲已被弃用。它们仍然支持向后兼容性。但是，Oracle建议您使用SQL计划管理。SQL计划管理创建SQL计划基准，与存储的轮廓相比，它提供了出色的SQL性能稳定性。</p>
                     <p>您可以使用<code class="codeph">DBMS_SPM</code>程序包或企业管理器云控制的<code class="codeph">MIGRATE_STORED_OUTLINE</code>函数将现有存储的轮廓迁移到SQL计划基准。迁移完成后，存储的大纲将标记为已迁移，可以删除。您可以使用<code class="codeph">DBMS_SPM</code>程序包的<code class="codeph">DROP_MIGRATED_STORED_OUTLINE</code>函数删除系统上所有已迁移的存储轮廓。
                     </p>
                     <p>另请参阅： <a href="../tgsql/overview-of-sql-plan-management.html#TGSQL615" target="_blank"><span class="italic">Oracle数据库SQL调优指南</span></a> ，以获取有关SQL计划管理和<a href="../arpls/DBMS_SPM.html#ARPLS150" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a>的更多信息，以获取有关<code class="codeph">DBMS_SPM</code>包的信息</p>
                  </div>
                  <p><a id="d335720e167" class="indexterm-anchor"></a><a id="d335720e171" class="indexterm-anchor"></a><a id="d335720e175" class="indexterm-anchor"></a><a id="d335720e179" class="indexterm-anchor"></a>使用<code class="codeph">CREATE</code> <code class="codeph">OUTLINE</code>语句创建<span class="bold">存储大纲</span> ，该<span class="bold">大纲</span>是优化程序用于生成执行计划的一组属性。然后，无论可能影响优化的因素如何变化，您都可以指示优化程序使用一组轮廓来影响执行特定SQL语句时执行计划的生成。您还可以修改大纲，以便考虑这些因素的变化。
                  </p>
                  <div class="infoboxnote" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-179E6631-5E23-4404-B748-2B2CAE81C23A">
                     <p class="notep1">注意：</p>
                     <p>要影响的SQL语句必须与创建大纲时指定的语句完全匹配。</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-BBFF8719-9DBF-45D8-BB67-424C06B3CEBE">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../tgsql/overview-of-sql-plan-management.html#TGSQL615" target="_blank"><span class="italic">“Oracle数据库SQL调优指南”</span></a> ，了解有关执行计划的信息</p>
                        </li>
                        <li>
                           <p><a href="ALTER-OUTLINE.html#GUID-49F25C82-0783-4407-88BB-613F986C2FEC">更改大纲</a>以获取有关修改<a href="ALTER-OUTLINE.html#GUID-49F25C82-0783-4407-88BB-613F986C2FEC">大纲</a>的信息</p>
                        </li>
                        <li>
                           <p><a href="ALTER-SESSION.html#GUID-27186B28-7EFC-4998-B1ED-2B905CC0211B">ALTER SESSION</a>和<a href="ALTER-SYSTEM.html#GUID-2C638517-D73A-41CA-9D8E-A62D1A0B7ADB">ALTER SYSTEM</a>获取有关<code class="codeph">USE_STORED_OUTLINES</code>和<code class="codeph">USE_PRIVATE_OUTLINES</code>参数的信息</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-D5192690-16A9-4E84-A900-737E13572752">先决条件</p>
                  <p>要创建公共或私有大纲，您必须具有<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">OUTLINE</code>系统特权。
                  </p>
                  <p>如果要从源大纲创建克隆大纲，则还必须具有<code class="codeph">SELECT_CATALOG_ROLE</code>角色。
                  </p>
                  <p><a id="d335720e242" class="indexterm-anchor"></a>您可以为单个会话或系统动态启用或禁用存储的轮廓使用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>启用<code class="codeph">USE_STORED_OUTLINES</code>参数以使用公共轮廓。
                        </p>
                     </li>
                     <li>
                        <p>启用<code class="codeph">USE_PRIVATE_OUTLINES</code>参数以使用私有存储的轮廓。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-D08BAA6A-1379-4265-AE36-C6E17FF50D1B">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-14D5806B-351E-4D1B-968F-BDB2651E7B0F"><span class="italic">create_outline</span> :: =</p>
                  <div class="figure" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-292BC43D-E10E-474E-AE19-01769A3D3C2D"><img src="img/create_outline.gif" alt="下面是create_outline.eps的描述" title="下面是create_outline.eps的描述" longdesc="img_text/create_outline.html"><br><a href="img_text/create_outline.html">说明create_outline.eps的说明</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnote" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-D530A2C9-2A99-42E5-8595-2D5EE21E180C">
                     <p class="notep1">注意：</p>
                     <p><span class="italic"><code class="codeph">outline</code></span>之后的所有条款都不是必需的。但是，必须在<span class="italic"><code class="codeph">outline</code></span>之后指定至少一个子句，并且它必须是<code class="codeph">FROM</code>子句或<code class="codeph">ON</code>子句。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-DBAD909D-C205-40D7-B5CD-763C5F0DFD80">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-397D6198-F2E4-441A-89FE-F448105146E0">或替换</p>
                  <p><a id="d335720e295" class="indexterm-anchor"></a><a id="d335720e299" class="indexterm-anchor"></a>指定<code class="codeph">OR</code> <code class="codeph">REPLACE</code>以使用相同名称的新轮廓替换现有轮廓。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-A5CDCF2A-A2E0-484A-A7DA-6748F8C4BE88">公共场所|私人的</p>
                  <p><a id="d335720e314" class="indexterm-anchor"></a><a id="d335720e318" class="indexterm-anchor"></a><a id="d335720e322" class="indexterm-anchor"></a><a id="d335720e326" class="indexterm-anchor"></a>指定<code class="codeph">PUBLIC</code>如果你是通过创建使用大纲<code class="codeph">PUBLIC</code> 。这是默认值。
                  </p>
                  <p>指定<code class="codeph">PRIVATE</code>以创建仅供当前会话专用的大纲。此大纲的数据存储在当前架构中。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-88823BBD-2B57-4227-8A14-563DF51A6E35"><span class="italic">大纲</span></p>
                  <p>指定要分配给存储轮廓的唯一名称。该名称必须满足<span class="q">“ <a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">数据库对象命名规则</a> ”中</span>列出的要求。如果未指定<span class="italic"><code class="codeph">outline</code></span> ，则数据库将生成大纲名称。
                  </p>
                  <div class="infoboxnotealso" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-0141E20A-4A7B-4A80-9FBD-AB1970DA1E7C">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="CREATE-OUTLINE.html#GUID-7CC033AF-DB19-4616-87D9-8173939FD627__I2119940">创建大纲：示例</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-4CF1153F-E7EF-40AE-ABD5-6D38E62C5A68">FROM <span class="italic">source_outline</span>子句</p>
                  <p><a id="d335720e368" class="indexterm-anchor"></a>使用<code class="codeph">FROM</code>子句通过复制现有轮廓来创建新轮廓。默认情况下，Oracle数据库在公共区域中查找<span class="italic"><code class="codeph">source_category</code></span> 。如果指定<code class="codeph">PRIVATE</code> ，则数据库将在当前架构中查找大纲。
                  </p>
                  <p><span class="bold">复制大纲的限制</span></p>
                  <p>如果指定<code class="codeph">FROM</code>子句，则无法指定<code class="codeph">ON</code>子句。
                  </p>
                  <div class="infoboxnotealso" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-A2B3E363-3836-46D3-91CE-8A526FB4B809">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="CREATE-OUTLINE.html#GUID-7CC033AF-DB19-4616-87D9-8173939FD627__I2119956">创建私有克隆大纲：示例</a> ”</span>和<span class="q">“ <a href="CREATE-OUTLINE.html#GUID-7CC033AF-DB19-4616-87D9-8173939FD627__I2119967">向公共区域公布私有大纲：示例</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-9A32E85C-B89A-4CBB-AFC8-7643E1F1BB43">对于类别条款</p>
                  <p><a id="d335720e407" class="indexterm-anchor"></a>指定用于对存储的轮廓进行分组的可选名称。例如，您可以为周末使用指定一个轮廓类别，为季度末使用指定另一个轮廓。如果未指定<span class="italic"><code class="codeph">category</code></span> ，则轮廓将存储在<code class="codeph">DEFAULT</code>类别中。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-B5919696-A18B-4BF5-9348-D8EEFBA38BD6">关于条款</p>
                  <p><a id="d335720e423" class="indexterm-anchor"></a><a id="d335720e427" class="indexterm-anchor"></a>指定编译语句时数据库将为其创建大纲的SQL语句。仅当使用<code class="codeph">FROM</code>子句创建现有轮廓的副本时，此子句才是可选的。
                  </p>
                  <p>您可以指定以下任何一个语句： <code class="codeph">SELECT</code> ， <code class="codeph">DELETE</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">INSERT</code> ......<code class="codeph">SELECT</code> ， <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ...<code class="codeph">AS</code> <code class="codeph">SELECT</code> 。</p>
                  <p><span class="bold">对ON条款的限制</span></p>
                  <p>本条款受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果指定<code class="codeph">ON</code>子句，则无法指定<code class="codeph">FROM</code>子句。
                        </p>
                     </li>
                     <li>
                        <p>您无法在多表<code class="codeph">INSERT</code>语句上创建大纲。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ON</code>子句中的SQL语句不能在远程对象上包含任何DML操作。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-B81556F9-F621-4C32-A002-A6A9C97F6092">
                     <p class="notep1">注意：</p>
                     <p>在后续语句中，您可以为同一SQL语句指定其他大纲，但同一语句的每个大纲必须在<code class="codeph">CATEGORY</code>子句中指定其他类别。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__GUID-A65F4E73-BB09-45E7-B889-2D18097077CF">例子</p>
                  <p id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__I2119940"><span class="bold">创建大纲：示例</span></p>
                  <p>以下语句通过编译<code class="codeph">ON</code>语句来创建存储的大纲。该大纲称为<code class="codeph">salaries</code> ，存储在<code class="codeph">special</code>类别中。
                  </p><pre class="oac_no_warn" dir="ltr">CREATE OUTLINE薪资FOR CATEGORY特别ON SELECT last_name，薪水FROM employees;</pre><p>随后编译此相同的<code class="codeph">SELECT</code>语句时，如果<code class="codeph">USE_STORED_OUTLINES</code>参数设置为<code class="codeph">special</code> ，则数据库将生成与创建大纲<code class="codeph">salaries</code>时生成的执行计划相同的执行计划。
                  </p>
                  <p id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__I2119956"><span class="bold">创建私有克隆大纲：示例</span></p>
                  <p>以下语句基于前面示例中创建的公共类别<code class="codeph">salaries</code>创建存储的私有大纲<code class="codeph">my_salaries</code> 。
                  </p><pre class="oac_no_warn" dir="ltr">从工资中创建或替换私人概要my_salaries;</pre><p id="GUID-7CC033AF-DB19-4616-87D9-8173939FD627__I2119967">宣传公共区域的私人大纲：例子</p>
                  <p>私人编辑后，以下语句将私有大纲复制（公布）到公共区域：</p><pre class="oac_no_warn" dir="ltr">创建或替换大纲来自PRIVATE my_salaries的public_salaries;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
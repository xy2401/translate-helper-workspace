<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>性能和可伸缩性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Development Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Development Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00"></meta>
      <meta name="dcterms.title" content="Database Development Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96334-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="connection_strategies.html" title="Previous" type="text/html"></link>
      <link rel="next" href="rwp.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="connection_strategies.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="rwp.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库开发指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="fundamentals.html" property="item" typeof="WebPage"><span property="name">数据库开发基础</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">性能和可伸缩性</li>
            </ol>
            <a id="GUID-826DD1D3-C722-4915-8790-E870D6B5123A" name="GUID-826DD1D3-C722-4915-8790-E870D6B5123A"></a><a id="ADFNS132"></a><a id="ADFNS131"></a>
            
            <h2 id="ADFNS-GUID-826DD1D3-C722-4915-8790-E870D6B5123A" class="sect2"><span class="enumeration_chapter">3</span>性能和可伸缩性</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍了在数据库和数据库应用程序中设计性能和可伸缩性的一些技术。</p>
               <div class="section">
                  <p class="subhead1" id="GUID-826DD1D3-C722-4915-8790-E870D6B5123A__GUID-8922BFE7-5084-4C3A-98A9-051E66F32F8E">话题：</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-1F79D82B-95C0-4A52-9A19-A34092E145EB">绩效战略</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-3BC2DA6F-0836-42EF-8155-C6FA27893360">性能工具</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-8A9CDE8E-6AF8-4523-9840-061F5D2DD8A9">监控数据库性能</a></p>
                  </li>
                  <li>
                     <p><a href="rwp.html#GUID-20D3F573-B043-42A7-867D-0C1C0A0067AD">使用仪器</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-EED13F50-D5BF-4A94-A69C-B1AFECC3760D">性能测试</a></p>
                  </li>
                  <li>
                     <p><a href="rwp.html#GUID-D95280DE-969D-4B83-825E-ECC872C111EA" title="SQL语句或PL / SQL块中的绑定变量占位符指示必须在运行时提供数据的位置。">使用绑定变量</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-35CB2592-7588-4C2D-9075-6F639F25425E">使用客户端结果缓存</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-1ECC306F-D6DB-435A-A46D-65E9D2571ED6">声明缓存</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-82D4AFAE-136B-4B83-B9F8-765111642B4F">OCI客户端语句缓存自动调整</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-93D145D2-845E-4285-A6EE-330BCFF23B24">客户端部署参数</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-8E2B36A1-CDD2-454D-AE60-58784834601F">使用查询更改通知</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-015CA8C1-2386-4626-855D-CC546DDC1086" title="您可以使用OCISessionPoolCreate API将连接类设置为HRMS。您可以使用OCISessionPoolCreate API创建连接类作为RECMS。">使用数据库驻留连接池</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-18D1F761-0312-48E8-BE6A-0ED17AEDC12E" title="此池优化select语句的读取操作">Memoptimize Pool</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-scalability.html#GUID-F722C73B-2CB0-4876-B699-B68DA6C08CBE" title="本节介绍有关Oracle RAC Sharding的信息">Oracle RAC Sharding</a></p>
                  </li>
               </ul>
            </div><a id="ADFNS136"></a><a id="ADFNS133"></a><div class="props_rev_3"><a id="GUID-1F79D82B-95C0-4A52-9A19-A34092E145EB" name="GUID-1F79D82B-95C0-4A52-9A19-A34092E145EB"></a><h3 id="ADFNS-GUID-1F79D82B-95C0-4A52-9A19-A34092E145EB" class="sect3">绩效战略</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-1F79D82B-95C0-4A52-9A19-A34092E145EB__GUID-5D7B4A60-76E4-4D66-B3B4-90C6F61B5358">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-7D7DDE5A-9EA4-4A82-A7C5-130248BC469B">设计您的数据模型以表现良好</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-D760D806-6151-4C5A-A775-2809BE68508C">设定绩效目标（指标）</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-2783BEBF-6D2D-4242-930D-40EE8F1D1D27">对您的申请进行基准测试</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS252"></a><div class="props_rev_3"><a id="GUID-7D7DDE5A-9EA4-4A82-A7C5-130248BC469B" name="GUID-7D7DDE5A-9EA4-4A82-A7C5-130248BC469B"></a><h4 id="ADFNS-GUID-7D7DDE5A-9EA4-4A82-A7C5-130248BC469B" class="sect4">设计您的数据模型以表现良好</h4>
                  <div>
                     <div class="section">
                        <p>本主题简要介绍了数据建模的重要概念。有关这个主题的全书可供选择;请参阅它们以获取详细信息和进一步指导</p>
                        <p>根据以下基本过程，设计数据模型以获得最重要和最常见查询的最佳性能：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span><a href="performance-and-scalability.html#GUID-2965BB39-76A2-4C02-9CBA-E7CE1FE8A036">分析应用程序的数据要求</a></span></li>
                        <li><span><a href="performance-and-scalability.html#GUID-3C67559B-58F5-4E92-83AA-43DF9428A506">为应用程序创建数据库设计</a></span></li>
                        <li><span><a href="performance-and-scalability.html#GUID-B86945DC-25EC-4FBD-9776-73278DDD56DE">实现数据库应用程序</a></span></li>
                        <li><span><a href="performance-and-scalability.html#GUID-CF8EF82C-FBB9-45A6-AD65-BA88294ADBE2">维护数据库和数据库应用程序</a></span></li>
                     </ol>
                  </div><a id="ADFNS253"></a><div class="props_rev_3"><a id="GUID-2965BB39-76A2-4C02-9CBA-E7CE1FE8A036" name="GUID-2965BB39-76A2-4C02-9CBA-E7CE1FE8A036"></a><h5 id="ADFNS-GUID-2965BB39-76A2-4C02-9CBA-E7CE1FE8A036" class="sect5">分析应用程序的数据要求</h5>
                     <div>
                        <div class="section">
                           <p>按照以下基本步骤分析应用程序的数据要求：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>收集数据。</span><div>
                                 <p>采访人员了解业务，应用程序的性质，谁使用信息以及如何以及最终用户的期望。收集业务文档 - 人事表格，发票表单，订单表格等 - 以了解业务如何使用信息。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>分析收集的数据。</span><div>
                                 <p>这种自下而上的过程包括数据的规范化，实体关系建模和事务分析。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>对数据进行功能分析。</span><div>
                                 <p>这种自上而下流程的最终结果是一个数据流图，它标识了主要流程块以及数据在其生命周期内流入和流出的过程。</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADFNS1442"></a><a id="ADFNS255"></a><div class="props_rev_3"><a id="GUID-3C67559B-58F5-4E92-83AA-43DF9428A506" name="GUID-3C67559B-58F5-4E92-83AA-43DF9428A506"></a><h5 id="ADFNS-GUID-3C67559B-58F5-4E92-83AA-43DF9428A506" class="sect5">为应用程序创建数据库设计</h5>
                     <div>
                        <div class="section">
                           <p>要创建数据库设计，必须首先创建逻辑设计，然后将此逻辑设计转换为物理设计。</p>
                           <p>话题：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="performance-and-scalability.html#GUID-E5C1ACB7-169E-4633-BC48-D600170FB280">创建逻辑设计</a></p>
                              </li>
                              <li>
                                 <p><a href="performance-and-scalability.html#GUID-A4DF01FA-1AF9-415D-BB3E-E8646ADAC89F">创建物理设计</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-3C67559B-58F5-4E92-83AA-43DF9428A506__GUID-DC0E5448-2E73-44FA-AE4D-69CB53B40046">
                              <p class="notep1">也可以看看：</p>
                              <p>有关设计和开发性能的更多信息，请<a href="../tgdba/designing-and-developing-for-performance.html#TGDBA-GUID-CF4C8C89-9FFA-474F-B0F8-79049B8EB5FC" target="_blank"><span><cite>参见“Oracle数据库性能调整指南”</cite></span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADFNS1443"></a><div class="props_rev_3"><a id="GUID-E5C1ACB7-169E-4633-BC48-D600170FB280" name="GUID-E5C1ACB7-169E-4633-BC48-D600170FB280"></a><h6 id="ADFNS-GUID-E5C1ACB7-169E-4633-BC48-D600170FB280" class="sect6">创建逻辑设计</h6>
                        <div>
                           <div class="section">
                              <p>逻辑设计是数据库的图形表示。逻辑设计模拟数据库对象与应用程序的事务活动之间的关系。有效的逻辑设计考虑了必须拥有，访问和更新数据的不同用户的要求。</p>
                              <p>建模数据库对象之间的关系：</p>
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li><span>将数据需求转换为数据项（列）。</span></li>
                              <li><span>将相关列分组到表中。</span></li>
                              <li><span>映射列和表之间的关系，确定每个表的主键和外键属性。</span></li>
                              <li><span>规范化表以最小化冗余和依赖性。</span></li>
                           </ol>
                           <div class="section">
                              <p>为交易活动建模：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>了解最常见的交易以及用户认为最重要的交易。</p>
                                 </li>
                                 <li>
                                    <p>通过逻辑模型跟踪事务路径。</p>
                                 </li>
                                 <li>
                                    <p>SQL中的原型事务并开发一个指示数据库大小的卷表。</p>
                                 </li>
                                 <li>
                                    <p>确定哪些用户在哪些序列中访问哪些表，哪些事务读取数据以及哪些事务写入数据。</p>
                                 </li>
                                 <li>
                                    <p>确定应用程序主要是读取数据还是主要写入数据。</p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADFNS1444"></a><div class="props_rev_3"><a id="GUID-A4DF01FA-1AF9-415D-BB3E-E8646ADAC89F" name="GUID-A4DF01FA-1AF9-415D-BB3E-E8646ADAC89F"></a><h6 id="ADFNS-GUID-A4DF01FA-1AF9-415D-BB3E-E8646ADAC89F" class="sect6">创建物理设计</h6>
                        <div>
                           <div class="section">
                              <p>物理设计是物理数据库上逻辑设计的实现。</p>
                              <p>由于逻辑设计集成了有关表和列的信息，表之间的关系以及所有已知的事务活动，因此您知道数据库如何在表中存储数据并创建其他结构（如索引）。</p>
                              <p>使用此知识，创建使用SQL数据定义语言（DDL）创建模式定义的脚本，按所需顺序定义数据库对象，根据规范定义存储要求等。</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="ADFNS256"></a><div class="props_rev_3"><a id="GUID-B86945DC-25EC-4FBD-9776-73278DDD56DE" name="GUID-B86945DC-25EC-4FBD-9776-73278DDD56DE"></a><h5 id="ADFNS-GUID-B86945DC-25EC-4FBD-9776-73278DDD56DE" class="sect5">实现数据库应用程序</h5>
                     <div>
                        <div class="section">
                           <p>按照以下基本过程实现数据库应用程序：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在测试环境中实现应用程序。</span><div>
                                 <p>在与生产环境尽可能相似的测试环境中，运行实现物理数据库设计的脚本。将数据加载到物理架构中。选择用于开发应用程序的编程语言，开发用户界面，创建和测试事务等。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保应用程序符合规范。</span><div>
                                 <p>确保所有组件都已运行，应用程序完全正常运行，并且应用程序使用的数据库功能已得到最佳配置。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在应用程序上运行基准测试。</span><div>
                                 <p>基准测试确定应用程序是否在各种工作负载（包括峰值活动）下通过模拟实时操作（如添加数据和用户）按预期执行。确保应用程序可以很好地扩展。</p>
                                 <p>如果应用程序不符合基准测试，请调整SQL语句以实现最佳性能，首先是没有工作负载，然后是工作负载增加。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在生产环境中实现应用程序。</span></li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-B86945DC-25EC-4FBD-9776-73278DDD56DE__GUID-4D15F503-07E7-4377-8DF4-5DA2C96AC29B">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关SQL调优的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGSQL-GUID-B653E5F3-F078-4BBC-9516-B892960046A2" target="_blank"><span><cite>参见“Oracle数据库SQL调优指南”</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p>有关SQL调优的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TDPPT-GUID-CEF73784-0C70-415A-ACB6-72504CC10B70" target="_blank"><span><cite>“Oracle数据库2天+性能调整指南”</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p>有关工作负载测试，建模和实现的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGDBA-GUID-DD122227-0E55-49DB-8DF0-0F321D03800F" target="_blank"><span><cite>参见“Oracle数据库性能调整指南”</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="performance-and-scalability.html#GUID-3BC2DA6F-0836-42EF-8155-C6FA27893360">性能工具，</a>提供有关性能测试工具的信息</p>
                                 </li>
                                 <li>
                                    <p><a href="performance-and-scalability.html#GUID-2783BEBF-6D2D-4242-930D-40EE8F1D1D27">对您的应用程序</a>进行<a href="performance-and-scalability.html#GUID-2783BEBF-6D2D-4242-930D-40EE8F1D1D27">基准测试，</a>以获取有关对应用程序进</p>
                                 </li>
                                 <li>
                                    <p>有关部署新应用程序的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGDBA94132" target="_blank"><span class="italic">参见“Oracle数据库性能调整指南”</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS268"></a><div class="props_rev_3"><a id="GUID-CF8EF82C-FBB9-45A6-AD65-BA88294ADBE2" name="GUID-CF8EF82C-FBB9-45A6-AD65-BA88294ADBE2"></a><h5 id="ADFNS-GUID-CF8EF82C-FBB9-45A6-AD65-BA88294ADBE2" class="sect5">维护数据库和数据库应用程序</h5>
                     <div>
                        <div class="section">
                           <p>维护数据库，数据库应用程序和操作系统分别是数据库管理员，应用程序开发人员和系统管理员正在进行的任务。企业分配给维护的资源取决于数据库和数据库应用程序的重要性，增长潜力，容纳更多用户的需求等等。</p>
                           <p>如果您负责维护，则必须定期监视系统，安排维护期，并告知用户即将到来的维护期。如果维护期间需要停机时间，请将它们安排在几乎没有数据库活动的时段。</p>
                           <p>应用程序维护包括修复错误，应用补丁和发布升级。在测试环境中测试维护工作，以便在生产系统上实现之前捕获并解决任何问题。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADFNS349"></a><div class="props_rev_3"><a id="GUID-D760D806-6151-4C5A-A775-2809BE68508C" name="GUID-D760D806-6151-4C5A-A775-2809BE68508C"></a><h4 id="ADFNS-GUID-D760D806-6151-4C5A-A775-2809BE68508C" class="sect4">设定绩效目标（指标）</h4>
                  <div>
                     <div class="section">
                        <p>通过设置性能目标（指标）来启动应用程序开发项目，包括：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>预期的应用程序用户数</p>
                           </li>
                           <li>
                              <p>高峰加载时的每秒预期事务数</p>
                           </li>
                           <li>
                              <p>峰值加载时的预期查询响应时间</p>
                           </li>
                           <li>
                              <p>每单位时间（例如一天，一个月或一年）每个表的预期记录数</p>
                           </li>
                        </ul>
                        <p>使用这些指标来创建基准测试。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS696"></a><div class="props_rev_3"><a id="GUID-2783BEBF-6D2D-4242-930D-40EE8F1D1D27" name="GUID-2783BEBF-6D2D-4242-930D-40EE8F1D1D27"></a><h4 id="ADFNS-GUID-2783BEBF-6D2D-4242-930D-40EE8F1D1D27" class="sect4">对您的申请进行基准测试</h4>
                  <div>
                     <div class="section">
                        <p><span class="bold">基准</span>测试是衡量应用程序性能方面的测试。基准测试结果要么验证应用程序设计，要么在将应用程序投入生产之前提出可以解决的问题。
                        </p>
                        <p>通常，您首先在隔离的单用户系统上运行基准测试，以最大限度地减少来自其他因素的干扰。此类基准测试的结果为应用程序提供了性能基准。对于有意义的基准测试结果，您必须在期望它运行的环境中测试应用程序。</p>
                        <p>您可以创建小基准来衡量最重要事务的性能，将不同的解决方案与性能问题进行比较，并帮助解决可能影响性能的设计问题。</p>
                        <p>您必须开发更大，更复杂的基准测试，以便在峰值用户负载，峰值事务负载或两者中测量应用程序性能。如果您希望用户或事务负载随时间增加，则此类基准测试尤为重要。您必须为此类基准进行预算和计划。</p>
                        <p>应用程序投入生产后，在生产环境中定期运行基准测试并将结果存储在数据库表中。在每次基准测试运行之后，比较无法承受性能下降的事务的先前和新记录。使用此方法可以隔离出现的问题。如果您等到用户抱怨性能，您可能无法确定问题何时开始。</p>
                        <div class="infoboxnotealso" id="GUID-2783BEBF-6D2D-4242-930D-40EE8F1D1D27__GUID-5B97DB4F-86D3-45D1-BC15-0FC741001E77">
                           <p class="notep1">也可以看看：</p>
                           <p>有关基准测试应用程序的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGDBA94129" target="_blank"><span class="italic">Oracle数据库性能调整指</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS697"></a><a id="ADFNS158"></a><div class="props_rev_3"><a id="GUID-3BC2DA6F-0836-42EF-8155-C6FA27893360" name="GUID-3BC2DA6F-0836-42EF-8155-C6FA27893360"></a><h3 id="ADFNS-GUID-3BC2DA6F-0836-42EF-8155-C6FA27893360" class="sect3">性能工具</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-3BC2DA6F-0836-42EF-8155-C6FA27893360__GUID-722414AE-FFBF-445B-84CB-7CC30A4C3F3D">话题：</p>
                     <p>有几个工具报告有关应用程序的运行时性能信</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-DFDA6843-4472-47D6-A2E6-BF72189D2E31">DBMS_APPLICATION_INFO包</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-C1AD0758-6D69-4D2F-80BB-30BA6DA2DCF2">SQL跟踪工具（SQL_TRACE）</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-E59C729D-5257-450A-828B-DE7DA423BFB1">解释计划声明</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-3BC2DA6F-0836-42EF-8155-C6FA27893360__GUID-CFF2B4B2-77F7-4600-8BF2-056F84A26656">
                        <p class="notep1">也可以看看：</p>
                        <p>有关调整数据库的工具的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=RATUG101" target="_blank"><span class="italic">参见“Oracle数据库测试指南</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS699"></a><div class="props_rev_3"><a id="GUID-DFDA6843-4472-47D6-A2E6-BF72189D2E31" name="GUID-DFDA6843-4472-47D6-A2E6-BF72189D2E31"></a><h4 id="ADFNS-GUID-DFDA6843-4472-47D6-A2E6-BF72189D2E31" class="sect4">DBMS_APPLICATION_INFO包</h4>
                  <div>
                     <div class="section">
                        <p>将<code class="codeph">DBMS_APPLICATION_INFO</code>程序包与SQL跟踪工具和Oracle跟踪一起使用，并记录数据库中正在执行的模块或事务的名称。系统管理员和性能调优专家可以使用此记录的信息来跟踪各个模块的性能并进行调试。系统管理员还可以使用此信息来跟踪模块的资源使用情况。
                        </p>
                        <p>向数据库注册应用程序时，其名称和操作将记录在视图<code class="codeph">V$SESSION</code>和<code class="codeph">V$SQLAREA</code> 。</p>
                        <p><code class="codeph">DBMS_APPLICATION_INFO</code>包提供了在<code class="codeph">V$SESSION</code>视图中设置以下列的子程序：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">MODULE</code> （申请或包裹的名称）</p>
                           </li>
                           <li>
                              <p><code class="codeph">ACTION</code> （交易名称或打包子程序）</p>
                           </li>
                           <li>
                              <p><code class="codeph">CLIENT_INFO</code> （有关客户端应用程序的其他信息，例如当前会话的初始绑定变量值）</p>
                           </li>
                        </ul>
                        <p><code class="codeph">DBMS_APPLICATION_INFO</code>程序包还提供子程序，这些子程序返回当前会话的前面<code class="codeph">V$SESSION</code>列的信息。
                        </p>
                        <p>您还可以使用<code class="codeph">DBMS_APPLICATION_INFO</code>包来跟踪显示结果需要几秒钟的命令的进度（例如创建索引或更新多行的命令）。<code class="codeph">DBMS_APPLICATION_INFO</code>程序包提供了一个子程序，用于在<code class="codeph">V$SESSION_LONGOPS</code>视图中存储有关该命令的信息。<code class="codeph">V$SESSION_LONGOPS</code>视图显示命令何时开始，进度有多远以及预计完成时间。
                        </p>
                        <div class="infoboxnotealso" id="GUID-DFDA6843-4472-47D6-A2E6-BF72189D2E31__GUID-7D2FEFBB-C06C-4421-B81C-DE3B67436E6B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DBMS_APPLICATION_INFO</code>包的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS003" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                              <li>
                                 <p> <a href="performance-and-scalability.html#GUID-C1AD0758-6D69-4D2F-80BB-30BA6DA2DCF2">SQL跟踪工具（SQL_TRACE）</a> ，以获取有关带有SQL跟踪工具的<code class="codeph">DBMS_APPLICATION_INFO</code>包的更多信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">V$SESSION</code>视图的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN30223" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">V$SESSION_LONGOPS</code>视图的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN30227" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">V$SQLAREA</code>视图的信息，请<a href="../refrn/V-SQLAREA.html#REFRN30259" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS700"></a><div class="props_rev_3"><a id="GUID-C1AD0758-6D69-4D2F-80BB-30BA6DA2DCF2" name="GUID-C1AD0758-6D69-4D2F-80BB-30BA6DA2DCF2"></a><h4 id="ADFNS-GUID-C1AD0758-6D69-4D2F-80BB-30BA6DA2DCF2" class="sect4">SQL跟踪工具（SQL_TRACE）</h4>
                  <div>
                     <div class="section">
                        <p>使用SQL跟踪工具<code class="codeph">SQL_TRACE</code>跟踪应用程序执行的所有SQL语句和PL / SQL块。通过为单个语句或模块启用SQL跟踪工具，然后在语句或模块运行后禁用它，您可以仅获取该语句或模块的跟踪信息。
                        </p>
                        <p>为获得最佳结果，请使用带有<code class="codeph">TKPROF</code>的SQL Trace工具和<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>语句。SQL Trace工具提供单个SQL语句的性能信息。<code class="codeph">TKPROF</code>将跟踪文件内容格式化为可读文件。<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>语句显示优化程序选择的执行计划以及指定SQL语句的执行计划（如果它在当前会话中执行）。
                        </p>
                        <p>在设计应用程序时使用SQL Trace工具，以便在将其投入生产之前了解要跟踪的内容以及应用程序的执行方式。如果您等到生产环境中出现性能问题，那么您的应用程序结构可能几乎不可能使用SQL Trace工具。</p>
                        <div class="infoboxnotealso" id="GUID-C1AD0758-6D69-4D2F-80BB-30BA6DA2DCF2__GUID-0A660639-52DF-4FB4-BBA6-C02D471AF301">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="performance-and-scalability.html#GUID-E59C729D-5257-450A-828B-DE7DA423BFB1">解释计划声明</a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">SQL_TRACE</code>和<code class="codeph">TKPROF</code>详细信息，请<code class="codeph">SQL_TRACE</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGSQL806" target="_blank"><span class="italic">“Oracle数据库SQL调优指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS701"></a><div class="props_rev_3"><a id="GUID-E59C729D-5257-450A-828B-DE7DA423BFB1" name="GUID-E59C729D-5257-450A-828B-DE7DA423BFB1"></a><h4 id="ADFNS-GUID-E59C729D-5257-450A-828B-DE7DA423BFB1" class="sect4">解释计划声明</h4>
                  <div>
                     <div class="section">
                        <p>运行SQL语句时，优化程序会生成多个可能的执行计划，计算每个计划的成本，并使用成本最低的计划。</p>
                        <p>计划成本基于统计信息，例如SQL语句访问的表，索引和分区的数据分布和存储特征。访问路径和连接顺序的成本基于计算机资源（如I / O，CPU和内存）的估计使用情况。</p>
                        <p>当您使用的语句<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> <code class="codeph">FOR</code> <span class="italic"><code class="codeph">statement</code></span>运行前<span class="italic"><code class="codeph">statement</code></span> ，该<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>语句存储用于执行计划<span class="italic"><code class="codeph">statement</code></span>在计划表中。通过查询计划表，您可以检查优化程序选择的执行计划。
                        </p>
                        <p>计划表将执行计划显示为行源树，其中显示了Oracle数据库用于执行SQL语句的步骤。行源树显示语句引用表的顺序，受连接操作影响的表的连接方法以及过滤，排序和聚合等数据操作。计划表还包含优化信息，例如每个操作的成本和基数，分区信息（例如访问的分区集）和并行执行信息（例如连接输入的分配方法）。此信息提供有关优化程序选择执行计划的方式和原因的宝贵见解。</p>
                        <p>如果您有关于优化程序没有的数据的信息，您可以为优化程序提供一个提示，这可能会更改执行计划。如果测试显示提示可以提高性能，请在代码中保留提示。</p>
                        <div class="infoboxnote" id="GUID-E59C729D-5257-450A-828B-DE7DA423BFB1__GUID-7C3383E4-EB72-4291-BC3A-C4B8B90AC75D">
                           <p class="notep1">注意：</p>
                           <p>您必须定期测试包含提示的代码，因为在后续版本中更改数据库条件和查询性能增强可能会显着影响提示对性能的影响。</p>
                        </div>
                        <p><code class="codeph">EXPLAIN PLAN</code>语句仅显示Oracle数据库在解释语句时如何运行SQL语句。如果执行环境或说明计划环境发生更改，则优化程序可能会使用不同的执行计划。因此，Oracle建议使用SQL计划管理来构建SQL计划基准，这是一组SQL语句的已接受执行计划。
                        </p>
                        <p>首先，使用<code class="codeph">EXPLAIN PLAN</code>语句查看语句的执行计划。其次，考虑语句的实际资源消耗，测试执行计划以验证它是否是最优的。最后，如果计划是最佳的，请使用SQL计划管理。
                        </p>
                        <div class="infoboxnotealso" id="GUID-E59C729D-5257-450A-828B-DE7DA423BFB1__GUID-43767D49-861A-4D54-B540-E4A337B3024F">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关查询优化器的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGSQL193" target="_blank"><span class="italic">参见“Oracle数据库SQL调优指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关查询执行计划的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGSQL196" target="_blank"><span class="italic">参见“Oracle数据库SQL调优指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关使用提示影响优化程序的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGSQL259" target="_blank"><span class="italic">参见“Oracle数据库SQL调优指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关SQL计划管理的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGSQL615" target="_blank"><span class="italic">参见“Oracle数据库SQL调优指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS698"></a><a id="ADFNS161"></a><div class="props_rev_3"><a id="GUID-8A9CDE8E-6AF8-4523-9840-061F5D2DD8A9" name="GUID-8A9CDE8E-6AF8-4523-9840-061F5D2DD8A9"></a><h3 id="ADFNS-GUID-8A9CDE8E-6AF8-4523-9840-061F5D2DD8A9" class="sect3">监控数据库性能</h3>
               <div>
                  <div class="section">
                     <p>Oracle数据库提供了顾问程序和强大的工具来帮助您管理和调整数据库。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8A9CDE8E-6AF8-4523-9840-061F5D2DD8A9__GUID-0D5FCF61-20E8-4C91-A3A8-A124FB6F51CA">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-9243415A-D624-4A83-BB66-501B1DF40A11">自动数据库诊断监视器（ADDM）</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-E2806DB2-BCC1-4EA0-B264-1DC78DB2769D">监控实时数据库性能</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-2719174B-73C2-4E61-906D-0F15321AD1F5">响应与性能相关的警报</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-57A86725-A163-44A7-85C1-53F73ACDD0F3">SQL Advisors和Memory Advisors</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS931"></a><div class="props_rev_3"><a id="GUID-9243415A-D624-4A83-BB66-501B1DF40A11" name="GUID-9243415A-D624-4A83-BB66-501B1DF40A11"></a><h4 id="ADFNS-GUID-9243415A-D624-4A83-BB66-501B1DF40A11" class="sect4">自动数据库诊断监视器（ADDM）</h4>
                  <div>
                     <p>自动数据库诊断监视器（ADDM）是一个顾问程序，用于分析在自动工作负载存储库（AWR）中捕获的数据。ADDM和AWR是Oracle Diagnostic Pack的一部分。</p>
                     <p>ADDM确定数据库性能问题可能存在的位置以及不存在的位置，并建议对前者进行更正。</p>
                     <p>ADDM在每个AWR快照之后执行分析，并将结果存储在数据库中。默认情况下，AWR快照间隔为1小时，ADDM结果保留期为8天。</p>
                     <p>Oracle Enterprise Manager云控制（云控制）在数据库主页上显示ADDM Findings。此AWR快照数据确认ADDM结果，但缺乏ADDM提供的分析和建议。（AWR快照数据类似于数据库管理员用于性能分析的Statspack数据。）</p>
                     <div class="infoboxnotealso" id="GUID-9243415A-D624-4A83-BB66-501B1DF40A11__GUID-FA8230EE-41BC-45F7-BE04-EC16D997036B">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT020" target="_blank"><span class="italic">“Oracle数据库2天+性能调优指南”</span></a> ，了解有关配置ADDM，查看ADDM分析，解释ADDM结果，实施ADDM建议以及使用Enterprise Manager查看快照统计信息的详细信息</p>
                     </div>
                  </div>
               </div><a id="ADFNS945"></a><div class="props_rev_3"><a id="GUID-E2806DB2-BCC1-4EA0-B264-1DC78DB2769D" name="GUID-E2806DB2-BCC1-4EA0-B264-1DC78DB2769D"></a><h4 id="ADFNS-GUID-E2806DB2-BCC1-4EA0-B264-1DC78DB2769D" class="sect4">监控实时数据库性能</h4>
                  <div>
                     <div class="section">
                        <p>使用Oracle企业管理器云控制（云控制），您可以从“性能”页面监控实时数据库性能。在“性能”页面中，您可以访问识别性能问题的页面并解决这些问题，而无需等待下一次ADDM分析。</p>
                        <div class="infoboxnotealso" id="GUID-E2806DB2-BCC1-4EA0-B264-1DC78DB2769D__GUID-9B3EEFDC-A3EE-4CEC-B89F-20DC3608B9DC">
                           <p class="notep1">也可以看看：</p>
                           <p>有关监视实时数据库性能的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TDPPT033" target="_blank"><span class="italic">参见“Oracle数据库2天+性能调整指南”</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS946"></a><div class="props_rev_3"><a id="GUID-2719174B-73C2-4E61-906D-0F15321AD1F5" name="GUID-2719174B-73C2-4E61-906D-0F15321AD1F5"></a><h4 id="ADFNS-GUID-2719174B-73C2-4E61-906D-0F15321AD1F5" class="sect4">响应与性能相关的警报</h4>
                  <div>
                     <div class="section">
                        <p>Oracle企业管理器云控制（云控制）中的数据库主页显示数据库生成的与性能相关的警报。您可以通过解决这些警报指示的问题来提高数据库性能。默认情况下，Oracle数据库启用表空间使用警报，快照太旧，可用空间恢复区域较低以及可恢复会话暂停。您可以查看指标和阈值，设置指标阈值，响应警报，清除警报以及设置直接警报电子邮件通知。使用此内置警报基础结构，您可以收到有关这些与性能相关的特殊警报的通知。</p>
                        <div class="infoboxnotealso" id="GUID-2719174B-73C2-4E61-906D-0F15321AD1F5__GUID-28AD46E7-007F-464D-B1B1-1F2AF27A84DA">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关使用警报来帮助您监视和调整数据库以及管理警报的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11247" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关监视性能警报的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TDPPT045" target="_blank"><span class="italic">“Oracle数据库2天+性能调整指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS947"></a><div class="props_rev_3"><a id="GUID-57A86725-A163-44A7-85C1-53F73ACDD0F3" name="GUID-57A86725-A163-44A7-85C1-53F73ACDD0F3"></a><h4 id="ADFNS-GUID-57A86725-A163-44A7-85C1-53F73ACDD0F3" class="sect4">SQL Advisors和Memory Advisors</h4>
                  <div>
                     <p>Oracle数据库提供了可用于帮助提高数据库性能的SQL顾问程序和内存顾问程序。</p>
                     <p>SQL顾问包括SQL Tuning Advisor和SQL Access Advisor，它们是Oracle Database Tuning Pack的一部分。</p>
                     <p>SQL Tuning Advisor接受一个或多个SQL语句作为输入，并返回特定的调优建议。每项建议都包括理由和预期收益。建议基于对象统计信息，新索引创建，SQL语句重构和SQL配置文件创建。</p>
                     <p>SQL Access Advisor使您可以通过推荐一组物化视图并查看给定SQL工作负载的日志，索引和分区来优化SQL查询的数据访问路径。</p>
                     <p>内存顾问包括Memory Advisor，SGA Advisor，Shared Pool Advisor，Buffer Cache Advisor和PGA Advisor。内存顾问程序提供总内存目标设置，SGA和PGA目标设置以及SGA组件大小设置的图形分析。使用这些分析来调整数据库性能并规划可能的情况。</p>
                     <div class="infoboxnotealso" id="GUID-57A86725-A163-44A7-85C1-53F73ACDD0F3__GUID-AF590FA2-8ACC-4023-AE73-577198C8851E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMQS103" target="_blank"><span class="italic">Oracle Database 2 Day DBA</span></a> ，了解有关使用顾问程序优化数据库性能的更多信息，包括每个性能顾问的简要说明</p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMQS1034" target="_blank"><span class="italic">Oracle Database 2 Day DBA</span></a> ，了解有关使用内存顾问优化内存使用情况的更多信息</p>
                           </li>
                           <li>
                              <p>有关调整数据库的工具的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TDPPT005" target="_blank"><span class="italic">“Oracle数据库2天+性能调整指南”</span></a></p>
                           </li>
                           <li>
                              <p>有关SQL Tuning Advisor的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGSQL540" target="_blank"><span class="italic">参见“Oracle数据库SQL调优指南”</span></a></p>
                           </li>
                           <li>
                              <p>有关SQL Access Advisor的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGSQL591" target="_blank"><span class="italic">参见“Oracle数据库SQL调优指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS166"></a><div class="props_rev_3"><a id="GUID-EED13F50-D5BF-4A94-A69C-B1AFECC3760D" name="GUID-EED13F50-D5BF-4A94-A69C-B1AFECC3760D"></a><h3 id="ADFNS-GUID-EED13F50-D5BF-4A94-A69C-B1AFECC3760D" class="sect3">性能测试</h3>
               <div>
                  <div class="section">
                     <p>在测试应用程序的性能时，请遵循以下准则：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用自动数据库诊断监视器（ADDM）和SQL Tuning Advisor进行设计验证。</p>
                           <p>ADDM确定可能存在数据库性能问题的位置并建议更正。例如，如果ADDM找到高负载SQL语句，则可以使用SQL Tuning Advisor分析这些语句并提供调优建议。</p>
                        </li>
                        <li>
                           <p>使用实际数据量和分布进行测试。</p>
                           <p>测试数据库必须包含代表生产系统的数据。表必须完全填充，并表示生产系统中的表之间的数据量和基数。必须构建所有生产索引，并且必须正确填充模式统计信息。</p>
                        </li>
                        <li>
                           <p>使用优化器模式进行测试以在生产中使用。</p>
                           <p>由于Oracle数据库研究和开发侧重于查询优化器，因此Oracle在测试和生产环境中都使用查询优化器。</p>
                        </li>
                        <li>
                           <p>首先测试单个用户性能。</p>
                           <p>在空闲或使用不多的数据库上开始使用单个用户进行测试。如果单个用户在理想条件下无法达到可接受的性能，则多个用户在实际条件下无法实现可接受的性能。</p>
                        </li>
                        <li>
                           <p>获取每个SQL语句的执行计划。</p>
                           <p>验证优化程序是否使用最佳执行计划，并了解每个SQL语句在CPU时间和物理I / O方面的相对成本。确定可从调优中获益最多的大量使用的交易。</p>
                        </li>
                        <li>
                           <p>测试多个用户。</p>
                           <p>由于用户工作负载和配置文件可能无法完全量化，因此难以准确执行此测试。但是，您必须在多用户环境中测试DML事务，以确保没有锁定冲突或序列化问题。</p>
                        </li>
                        <li>
                           <p>使用尽可能靠近生产系统的硬件配置进行测试。</p>
                           <p>在现实系统上进行测试对于网络延迟，I / O子系统带宽以及处理器类型和速度尤其重要。在不切实际的系统上进行测试无法揭示潜在的性能问题。</p>
                        </li>
                        <li>
                           <p>测量稳态性能。</p>
                           <p>每个基准测试运行必须有一个提升阶段，用户连接到数据库并开始使用该应用程序。此阶段允许将经常缓存的数据初始化到缓存中，并允许在达到稳态条件之前完成单执行操作（例如解析）。同样，每个基准测试运行必须以减速期结束，其中资源从系统中释放，用户退出应用程序并断开与数据库的连接。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-EED13F50-D5BF-4A94-A69C-B1AFECC3760D__GUID-7767048D-796A-4466-AFA7-E71A655DCE84">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关性能调整，工作负载测试，建模和实现的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGDBA-GUID-5C5C081B-A2C1-442D-9F11-A760234C8815" target="_blank"><span><cite>参见“Oracle数据库性能调整指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-9243415A-D624-4A83-BB66-501B1DF40A11">自动数据库诊断监视器（ADDM）</a>和<a href="performance-and-scalability.html#GUID-57A86725-A163-44A7-85C1-53F73ACDD0F3">SQL顾问和内存</a>顾问分别有关ADDM和SQL Tuning Advisor的更多信息</p>
                           </li>
                           <li>
                              <p>有关使用SQL Tuning Advisor调优SQL语句的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TDPPT161" target="_blank"><span class="italic">“Oracle数据库2天+性能调优指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS1336"></a><a id="ADFNS213"></a><div class="props_rev_3"><a id="GUID-35CB2592-7588-4C2D-9075-6F639F25425E" name="GUID-35CB2592-7588-4C2D-9075-6F639F25425E"></a><h3 id="ADFNS-GUID-35CB2592-7588-4C2D-9075-6F639F25425E" class="sect3">使用客户端结果缓存</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-35CB2592-7588-4C2D-9075-6F639F25425E__GUID-8D2C349D-6BE2-4CDB-A810-FFB91232DC72">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-C7AC2B1B-1A5B-4414-B48D-78CAF0B23080">关于客户端结果缓存</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-5B2C4E40-51A2-4510-9353-5C24734E76A0">客户端结果缓存的好处</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-82C71A2F-0CC9-450E-97EE-B57163AFD22F">使用客户端结果缓存的准则</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-7B761E11-3094-44B3-B802-4C671422397B">客户端结果缓存一致性</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-AD2A54E0-0DEB-4F08-96AA-3A9FA50CE521">客户端结果缓存的部署时间设置</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-4BFBAB90-4172-4A8C-A907-C73ABF8EA85E">客户端结果缓存统计</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-27F72393-751D-47DF-88DA-49EEA0937F99">验证客户端结果缓存</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-265350EB-DE84-4094-8616-6AB0E55BF94B">客户端结果缓存和服务器结果缓存</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-AEC83CB0-D984-4208-BC98-AACA313F1530">客户端结果缓存演示文件</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-C1456214-194A-444B-9EAE-C48DB793B79B">客户端结果缓存与早期版本的兼容性</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS464"></a><div class="props_rev_3"><a id="GUID-C7AC2B1B-1A5B-4414-B48D-78CAF0B23080" name="GUID-C7AC2B1B-1A5B-4414-B48D-78CAF0B23080"></a><h4 id="ADFNS-GUID-C7AC2B1B-1A5B-4414-B48D-78CAF0B23080" class="sect4">关于客户端结果缓存</h4>
                  <div>
                     <p>使用基于OCI库（包括C，C ++，Java（JDBC-OCI），PHP，Python，Ruby和Perl）构建的Oracle数据库驱动程序和适配器的应用程序可以使用客户端结果缓存来缩短重复查询的响应时间。</p>
                     <p>客户端结果缓存支持客户端内存中SQL查询（ <code class="codeph">SELECT</code>语句）结果集的客户端缓存。因为从客户端进程检索结果比调用数据库和重新运行查询更快，所以经常运行的查询在缓存结果时执行得更快。客户端结果缓存还减少了用于处理查询的服务器CPU时间，从而提高了服务器的可伸缩性。
                     </p>
                     <p>如果多个会话的OCI语句具有类似的模式，SQL文本，绑定值和会话设置，则它们可以匹配OCI进程内存中的相同缓存结果集。如果不是，则将查询执行定向到服务器。</p>
                     <p>客户端结果缓存对应用程序是透明的，并且其结果集数据的缓存与影响其结果集数据的会话或数据库更改保持一致。</p>
                     <p>使用客户端结果缓存的应用程序可以从具有缓存命中的查询中获得更快的性能。这些应用程序在客户端或中间层上使用缓存的结果集。</p>
                     <p>客户端结果缓存与OCI功能一起使用，例如OCI会话池，OCI连接池，DRCP和OCI透明应用程序故障转移（TAF）。</p>
                     <p>使用客户端结果缓存时，还必须在应用程序级别启用OCI语句缓存或缓存语句。</p>
                     <div class="infoboxnotealso" id="GUID-C7AC2B1B-1A5B-4414-B48D-78CAF0B23080__GUID-85313B3F-5C4F-4BA9-A8C7-479960394F6E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关语句缓存的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI16655" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                           </li>
                           <li>
                              <p>有关JDBC语句高速缓存的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC28649" target="_blank"><span class="italic">“Oracle数据库JDBC开发人员指南”</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI092" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNCPP21896" target="_blank"><span class="italic">Oracle C ++调用接口程序员指南</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC28219" target="_blank"><span class="italic">Oracle数据库JDBC开发人员指南</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGDBA638" target="_blank"><span class="italic">Oracle数据库性能调整指南</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1919" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER TABLE</code>子句的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00219" target="_blank">SQL提示</a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF30051" target="_blank"><code class="codeph">RESULT_CACHE</code></a> <code class="codeph"></code>和<code class="codeph">CREATE TABLE</code></p> 
                           </li>
                           <li>
                              <p><code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN10270" target="_blank">RESULT_CACHE_MODE</a></code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN29085" target="_blank">CLIENT_RESULT_CACHE_STAT$</a></code>视图</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS465"></a><div class="props_rev_3"><a id="GUID-5B2C4E40-51A2-4510-9353-5C24734E76A0" name="GUID-5B2C4E40-51A2-4510-9353-5C24734E76A0"></a><h4 id="ADFNS-GUID-5B2C4E40-51A2-4510-9353-5C24734E76A0" class="sect4">客户端结果缓存的好处</h4>
                  <div>
                     <p>客户端结果缓存的好处是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>由于客户端结果缓存位于客户端上，因此缓存命中会导致fetch（ <code class="codeph">OCIStmtFetch2()</code> ）和执行（ <code class="codeph">OCIStmtExecute()</code> ）调用在本地处理，从而消除了服务器往返。消除服务器往返减少了服务器资源（例如服务器CPU和服务器I / O）的使用，从而显着提高了性能。
                           </p>
                        </li>
                        <li>
                           <p>客户端结果缓存是透明且一致的。</p>
                        </li>
                        <li>
                           <p>客户端结果缓存可用于每个进程，因此多个客户端会话可以同时使用匹配的缓存结果集。</p>
                        </li>
                        <li>
                           <p>客户端结果缓存最小化了每个OCI应用程序拥有自己的自定义结果缓存的需要。</p>
                        </li>
                        <li>
                           <p>客户端结果缓存透明地管理：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>多个线程，多个语句和多个会话的并发访问</p>
                              </li>
                              <li>
                                 <p>可能受数据库更改影响的缓存结果集的失效</p>
                              </li>
                              <li>
                                 <p>刷新缓存的结果集</p>
                              </li>
                              <li>
                                 <p>缓存内存管理</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>客户端结果缓存自动可用于使用OCI库的应用程序和驱动程序，包括JDBC OCI，ODP.NET，OCCI，Pro * C / C ++，Pro * COBOL和ODBC。</p>
                        </li>
                        <li>
                           <p>客户端结果缓存使用OCI客户端内存，这可能比服务器内存便宜。</p>
                        </li>
                        <li>
                           <p>客户端上的本地缓存对于该客户端执行的查询具有更好的引用局部性。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-5B2C4E40-51A2-4510-9353-5C24734E76A0__GUID-E688D513-E782-4E15-81E2-B6156E41F33D">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="italic">Oracle Call Interface Programmer's Guide中的</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17163" target="_blank"><code class="codeph">OCIStmtExecute()</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17165" target="_blank"><code class="codeph">OCIStmtFetch2()</code></a></p>
                     </div>
                  </div>
               </div><a id="ADFNS896"></a><a id="ADFNS466"></a><div class="props_rev_3"><a id="GUID-82C71A2F-0CC9-450E-97EE-B57163AFD22F" name="GUID-82C71A2F-0CC9-450E-97EE-B57163AFD22F"></a><h4 id="ADFNS-GUID-82C71A2F-0CC9-450E-97EE-B57163AFD22F" class="sect4">使用客户端结果缓存的准则</h4>
                  <div>
                     <p>您可以在三个级别启用或禁用客户端结果缓存，这些级别按优先级递减的顺序排列：</p>
                     <ol>
                        <li>
                           <p>询问</p>
                           <p>对于特定查询，您可以使用SQL提示启用或禁用客户端结果缓存。要添加或更改SQL提示，您必须更改应用程序。</p>
                        </li>
                        <li>
                           <p>表</p>
                           <p>对于特定表上的所有查询，您可以使用表注释启用或禁用客户端结果缓存，而无需更改应用程序。</p>
                        </li>
                        <li>
                           <p>会议</p>
                           <p>对于数据库会话中的所有查询，可以使用会话参数启用或禁用客户端结果缓存，而无需更改应用程序。</p>
                        </li>
                     </ol>
                     <p>较高级别的设置优先于较低级别的设置。</p>
                     <p>Oracle建议仅对只读和很少更新的表（很少更新的表）的查询启用客户端结果缓存。也就是说，启用客户端结果缓存：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在查询级别仅用于只读和很少读取表的查询</p>
                        </li>
                        <li>
                           <p>在表级别仅适用于只读和很少读取的表</p>
                        </li>
                        <li>
                           <p>仅在会话级别运行仅查询只读或很少读取表的应用程序时</p>
                        </li>
                     </ul>
                     <p>为具有大型结果集或多组绑定值的查询启用客户端结果缓存可能会使用大量客户端结果缓存内存。每组绑定值（对于相同的SQL文本）都会创建不同的缓存结果集。</p>
                     <p>为查询启用客户端结果缓存后，其结果集可以缓存在客户端，服务器或两者上。即使禁用了服务器结果缓存（默认情况下启用），也可以启用客户端结果缓存。</p>
                     <p>对于OCI，即使可能存在有效的缓存结果集，每个OCI语句句柄调用的第一个<code class="codeph">OCIStmtExecute()</code>调用也始终进入服务器。必须为每个语句句柄调用<code class="codeph">OCIStmtExecute()</code> ，以便能够匹配缓存的结果集。Oracle建议应用程序要么为OCI语句句柄提供自己的语句缓存，要么使用OCI语句缓存，以便<code class="codeph">OCIStmtPrepare2()</code>可以返回已执行一次的OCI语句句柄。来自相同或不同会话的多个OCI语句句柄可以同时从相同的缓存结果集中获取数据。
                     </p>
                     <p>对于OCI，对于要缓存的结果集， <code class="codeph">OCIStmtExecute()</code>或<code class="codeph">OCIStmtFetch2()</code>调用透明地创建此缓存结果集必须获取行，直到返回ORA-01403（未找到数据）。与本地缓存的结果集匹配的后续<code class="codeph">OCIStmtExecute()</code>或<code class="codeph">OCIStmtFetch2()</code>调用无需获取完成。
                     </p>
                     <div class="infoboxnotealso" id="GUID-82C71A2F-0CC9-450E-97EE-B57163AFD22F__GUID-F319ABC5-010B-4402-8F87-BFDBA7833F2C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-972CC982-35B7-4EAC-ABBA-BFB77282CD46">SQL提示</a> 
                              </p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-F5C06AD6-286B-4B64-819D-82BF0ECEC9B4">表注释</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-4F5DDDD0-6739-4380-B5B9-248BB9A85EF7">会话参数</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-E04C552C-FCE8-4C17-AF6A-D185951186E4">结果缓存模式用例</a></p>
                           </li>
                           <li>
                              <p><a href="../lnoci/statement-functions.html#LNOCI17163" target="_blank"><code class="codeph">OCIStmtExecute（）</code></a></p>
                           </li>
                           <li>
                              <p><a href="../lnoci/statement-functions.html#LNOCI17168" target="_blank"><code class="codeph">OCIStmtPrepare2（）</code></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17165" target="_blank"><code class="codeph">OCIStmtFetch2（）</code></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-82C71A2F-0CC9-450E-97EE-B57163AFD22F__GUID-1BDC3368-BC97-4E97-A307-11241B1F1D66">话题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-972CC982-35B7-4EAC-ABBA-BFB77282CD46">SQL提示</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-F5C06AD6-286B-4B64-819D-82BF0ECEC9B4">表注释</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-4F5DDDD0-6739-4380-B5B9-248BB9A85EF7">会话参数</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-5887A8D4-B1A5-418B-82AD-E8A6AE4E8BF5">有效的表结果缓存模式</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-3E3524FF-8423-4CBB-ADAA-F2A98A30504D">显示有效的表结果缓存模式</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-E04C552C-FCE8-4C17-AF6A-D185951186E4">结果缓存模式用例</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-7DB489C2-351C-4C06-9D84-2520843527F2">查询永远不会在客户端结果缓存中缓存</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS467"></a><div class="props_rev_3"><a id="GUID-972CC982-35B7-4EAC-ABBA-BFB77282CD46" name="GUID-972CC982-35B7-4EAC-ABBA-BFB77282CD46"></a><h5 id="ADFNS-GUID-972CC982-35B7-4EAC-ABBA-BFB77282CD46" class="sect5">SQL提示</h5>
                     <div>
                        <p>SQL提示<code class="codeph">RESULT_CACHE</code>或<code class="codeph">NO_RESULT_CACHE</code>适用于单个查询，为此启用或禁用客户端结果缓存。这些提示优先于表注释和<code class="codeph">RESULT_CACHE_MODE</code>服务器初始化参数。
                        </p>
                        <p>对于OCI，必须在传递给<code class="codeph">OCIStmtPrepare()</code>和<code class="codeph">OCIStmtPrepare2()</code>调用的SQL文本中设置SQL提示<code class="codeph">/*+ result_cache */</code>或<code class="codeph">/*+ no_result_cache */</code> 。
                        </p>
                        <p>对于JDBC OCI，SQL提示<code class="codeph">/*+ result_cache */</code>或<code class="codeph">/*+ no_result_cache */</code>作为查询字符串的一部分包含在查询（ <code class="codeph">SELECT</code>语句）中。
                        </p>
                        <div class="infoboxnotealso" id="GUID-972CC982-35B7-4EAC-ABBA-BFB77282CD46__GUID-33C2CA7C-C7AC-4203-8C56-D97CC5B57B36">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关SQL提示的一般信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00219" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p><span class="italic">Oracle Call Interface Programmer's Guide中的</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17167" target="_blank"><code class="codeph">OCIStmtPrepare()</code></a> ， <a href="../lnoci/statement-functions.html#LNOCI17168" target="_blank"><code class="codeph">OCIStmtPrepare2()</code></a></p>
                              </li>
                              <li>
                                 <p>有关JDBC中SQL提示的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC28224" target="_blank"><span class="italic">“Oracle数据库JDBC开发人员指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADFNS1338"></a><a id="ADFNS1337"></a><div class="props_rev_3"><a id="GUID-F5C06AD6-286B-4B64-819D-82BF0ECEC9B4" name="GUID-F5C06AD6-286B-4B64-819D-82BF0ECEC9B4"></a><h5 id="ADFNS-GUID-F5C06AD6-286B-4B64-819D-82BF0ECEC9B4" class="sect5">表注释</h5>
                     <div>
                        <p><span class="bold">表注释</span>为特定表上的所有查询启用或禁用客户端结果缓存。表注释优先于<code class="codeph">RESULT_CACHE_MODE</code>服务器初始化参数，但SQL提示<code class="codeph">/*+ RESULT_CACHE */</code>和<code class="codeph">/*+ NO_RESULT_CACHE */</code>优先于表注释。
                        </p>
                        <p>使用<code class="codeph">RESULT_CACHE</code>子句使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句对表进行批注。要启用客户端结果缓存，请指定<code class="codeph">RESULT_CACHE</code> <code class="codeph">(MODE</code> <code class="codeph">FORCE)</code> ;要禁用它，请使用<code class="codeph">RESULT_CACHE</code> <code class="codeph">(MODE</code> <code class="codeph">DEFAULT)</code> 。
                        </p>
                        <p><a href="performance-and-scalability.html#GUID-F5C06AD6-286B-4B64-819D-82BF0ECEC9B4__CACHHFCG" title="表结果缓存注释模式">表3-1</a>总结了表注释结果缓存模式。
                        </p>
                        <div class="tblformal" id="GUID-F5C06AD6-286B-4B64-819D-82BF0ECEC9B4__CACHHFCG">
                           <p class="titleintable">表3-1表注释结果缓存模式</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="表注释结果缓存模式" width="100%" border="1" summary="Table Result Cache Annotation Modes" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="14%" id="d10075e3976">模式</th>
                                    <th align="left" valign="bottom" width="86%" id="d10075e3979">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d10075e3984" headers="d10075e3976 ">
                                       <p><code class="codeph">默认</code></p>
                                    </td>
                                    <td align="left" valign="top" width="86%" headers="d10075e3984 d10075e3979 ">
                                       <p>默认值。结果缓存未在表级确定。您可以使用此值清除任何表注释。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d10075e3992" headers="d10075e3976 ">
                                       <p><code class="codeph">力</code></p>
                                    </td>
                                    <td align="left" valign="top" width="86%" headers="d10075e3992 d10075e3979 ">
                                       <p>如果查询中的所有表名都具有此设置，则始终考虑查询结果进行缓存，除非为查询指定了<code class="codeph">NO_RESULT_CACHE</code>提示。如果查询中指定的一个或多个表设置为<code class="codeph">DEFAULT</code> ，则该查询的有效表注释为<code class="codeph">DEFAULT</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-F5C06AD6-286B-4B64-819D-82BF0ECEC9B4__GUID-3286726C-C796-4F7F-B165-F80FECA31BC4">
                           <p class="notep1">也可以看看：</p>
                           <p> </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>和<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">RESULT_CACHE</code>子句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF30051" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关JDBC中表注释的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC28223" target="_blank"><span class="italic">“Oracle数据库JDBC开发人员指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADFNS1339"></a><div class="props_rev_3"><a id="GUID-4F5DDDD0-6739-4380-B5B9-248BB9A85EF7" name="GUID-4F5DDDD0-6739-4380-B5B9-248BB9A85EF7"></a><h5 id="ADFNS-GUID-4F5DDDD0-6739-4380-B5B9-248BB9A85EF7" class="sect5">会话参数</h5>
                     <div>
                        <div class="section">
                           <p>会话参数<code class="codeph">RESULT_CACHE_MODE</code>为数据库会话的所有查询启用或禁用客户端结果缓存。可以通过表注释来覆盖特定表的<code class="codeph">RESULT_CACHE_MODE</code>也可以通过SQL提示来覆盖特定查询。
                           </p>
                           <p>您可以在服务器参数文件（ <code class="codeph">init.ora</code> ）或<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>或<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>语句中设置<code class="codeph">RESULT_CACHE_MODE</code> 。要启用客户端结果缓存，请将<code class="codeph">RESULT_CACHE_MODE</code>设置为<code class="codeph">FORCE</code> ;要禁用它，请将<code class="codeph">RESULT_CACHE_MODE</code>设置为<code class="codeph">MANUAL</code> 。</p>
                           <div class="infoboxnotealso" id="GUID-4F5DDDD0-6739-4380-B5B9-248BB9A85EF7__GUID-AF993A86-4974-48EE-ADB6-8D20D0E4E9A2">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">RESULT_CACHE_MODE</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN10270" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS473"></a><a id="ADFNS472"></a><div class="props_rev_3"><a id="GUID-5887A8D4-B1A5-418B-82AD-E8A6AE4E8BF5" name="GUID-5887A8D4-B1A5-418B-82AD-E8A6AE4E8BF5"></a><h5 id="ADFNS-GUID-5887A8D4-B1A5-418B-82AD-E8A6AE4E8BF5" class="sect5">有效的表结果缓存模式</h5>
                     <div>
                        <p>表的有效结果缓存模式取决于表注释结果缓存模式和<code class="codeph">RESULT_CACHE_MODE</code>会话参数设置，如<a href="performance-and-scalability.html#GUID-5887A8D4-B1A5-418B-82AD-E8A6AE4E8BF5__CACDAAHC" title="有效结果缓存表模式">表3-2</a>所示。
                        </p>
                        <div class="tblformal" id="GUID-5887A8D4-B1A5-418B-82AD-E8A6AE4E8BF5__CACDAAHC">
                           <p class="titleintable">表3-2有效结果缓存表模式</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="有效结果缓存表模式" width="100%" border="1" summary="Effective Result Cache Table Mode" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d10075e4316">表注释结果缓存模式</th>
                                    <th align="left" valign="bottom" width="32%" id="d10075e4319">RESULT_CACHE_MODE =手动</th>
                                    <th align="left" valign="bottom" width="32%" id="d10075e4322">RESULT_CACHE_MODE = FORCE</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d10075e4327" headers="d10075e4316 ">
                                       <p><code class="codeph">力</code></p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d10075e4327 d10075e4319 ">
                                       <p><code class="codeph">力</code></p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d10075e4327 d10075e4322 ">
                                       <p><code class="codeph">力</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d10075e4340" headers="d10075e4316 ">
                                       <p><code class="codeph">默认</code></p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d10075e4340 d10075e4319 ">
                                       <p><code class="codeph">手册</code></p>
                                    </td>
                                    <td align="left" valign="top" width="32%" headers="d10075e4340 d10075e4322 ">
                                       <p><code class="codeph">力</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>当有效模式为<code class="codeph">FORCE</code> ，除非查询具有<code class="codeph">NO_RESULT_CACHE</code>提示，否则将考虑每个查询进行结果缓存，但实际结果缓存取决于客户端和服务器缓存的内部限制，查询重用的可能性以及客户端结果缓存中的可用空间。
                        </p>
                        <p>有效的表结果缓存模式<code class="codeph">FORCE</code>类似于SQL提示<code class="codeph">RESULT_CACHE</code> ，因为它们都只是请求。
                        </p>
                     </div>
                  </div><a id="ADFNS470"></a><div class="props_rev_3"><a id="GUID-3E3524FF-8423-4CBB-ADAA-F2A98A30504D" name="GUID-3E3524FF-8423-4CBB-ADAA-F2A98A30504D"></a><h5 id="ADFNS-GUID-3E3524FF-8423-4CBB-ADAA-F2A98A30504D" class="sect5">显示有效的表结果缓存模式</h5>
                     <div>
                        <div class="section">
                           <p>要显示一个或多个表的结果缓存模式，请参阅<code class="codeph">*_TABLES</code>静态数据字典视图的<code class="codeph">RESULT_CACHE</code>列。例如：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>此查询显示表<code class="codeph">T</code>的结果缓存模式：</p><pre class="oac_no_warn" dir="ltr">SELECT result_cache FROM all_tables WHERE table_name ='T'</pre></li>
                              <li>
                                 <p>此查询显示您拥有的所有关系表的结果缓存模式：</p><pre class="oac_no_warn" dir="ltr">SELECT table_name，result_cache FROM user_tables</pre></li>
                           </ul>
                           <p>如果结果缓存模式为<code class="codeph">DEFAULT</code> ，则表未注释。
                           </p>
                           <p>如果结果缓存模式为<code class="codeph">FORCE</code> ，则表使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的<code class="codeph">RESULT_CACHE</code> <code class="codeph">(MODE</code> <code class="codeph">FORCE)</code>子句进行批注。
                           </p>
                           <p>如果结果缓存模式为<code class="codeph">MANUAL</code> ，则会话参数<code class="codeph">RESULT_CACHE_MODE</code>在服务器参数文件（ <code class="codeph">init.ora</code> ）或<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>或<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>语句中设置为<code class="codeph">MANUAL</code> 。
                           </p>
                           <div class="infoboxnotealso" id="GUID-3E3524FF-8423-4CBB-ADAA-F2A98A30504D__GUID-7E0A70BA-2864-4E49-83E4-192607255820">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">*_TABLES</code>静态数据字典视图的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20286" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS474"></a><div class="props_rev_3"><a id="GUID-E04C552C-FCE8-4C17-AF6A-D185951186E4" name="GUID-E04C552C-FCE8-4C17-AF6A-D185951186E4"></a><h5 id="ADFNS-GUID-E04C552C-FCE8-4C17-AF6A-D185951186E4" class="sect5">结果缓存模式用例</h5>
                     <div>
                        <p>以下示例显示SQL提示何时优先于表注释和<code class="codeph">RESULT_CACHE_MODE</code>会话参数。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">emp</code> <code class="codeph">RESULT_CACHE</code> （ <code class="codeph">MODE</code> <code class="codeph">FORCE</code> ）注释<code class="codeph">emp</code>表并且会话参数具有其默认值<code class="codeph">MANUAL</code> ，则考虑对<code class="codeph">emp</code>进行查询以进行结果缓存。
                              </p>
                              <p>但是，查询<code class="codeph">SELECT</code> <code class="codeph">/*+ no_result_cache */</code> <code class="codeph">empno</code> <code class="codeph">FROM</code> <code class="codeph">emp</code>结果不会被缓存，因为SQL提示优先于表注释和会话参数。
                              </p>
                           </li>
                           <li>
                              <p>如果未对<code class="codeph">emp</code>表进行注释，或者使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">emp</code> <code class="codeph">RESULT_CACHE</code> （ <code class="codeph">MODE</code> <code class="codeph">DEFAULT</code> ）进行注释，并且会话参数具有其默认值<code class="codeph">MANUAL</code> ，则对<code class="codeph">emp</code>查询不会缓存结果。
                              </p>
                              <p>但是，查询<code class="codeph">SELECT</code> <code class="codeph">/*+ result_cache */</code> <code class="codeph">*</code> <code class="codeph">FROM</code> <code class="codeph">emp</code>被认为是用于缓存的，因为SQL提示优先于表注释和会话参数。
                              </p>
                           </li>
                           <li>
                              <p>如果会话参数<code class="codeph">RESULT_CACHE_MODE</code>设置为<code class="codeph">FORCE</code> ，并且没有表注释或SQL提示覆盖它，则会考虑所有表上的所有查询以进行查询缓存。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADFNS475"></a><div class="props_rev_3"><a id="GUID-7DB489C2-351C-4C06-9D84-2520843527F2" name="GUID-7DB489C2-351C-4C06-9D84-2520843527F2"></a><h5 id="ADFNS-GUID-7DB489C2-351C-4C06-9D84-2520843527F2" class="sect5">查询永远不会在客户端结果缓存中缓存</h5>
                     <div>
                        <p>以下查询的结果永远不会缓存在客户端结果缓存中（即使查询包含<code class="codeph">RESULT_CACHE</code>提示）：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>包含以下任何内容的查询：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>远程对象</p>
                                 </li>
                                 <li>
                                    <p>选择列表中的复杂类型</p>
                                 </li>
                                 <li>
                                    <p>PL / SQL函数</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>基于快照的查询</p>
                           </li>
                           <li>
                              <p>闪回查询</p>
                           </li>
                           <li>
                              <p>查询在可序列化的只读事务中执行</p>
                           </li>
                           <li>
                              <p>启用虚拟专用数据库（VPD）策略的表的查询</p>
                           </li>
                        </ul>
                        <p>如果启用了服务器结果缓存功能，则可以在数据库上缓存此类查询 - 有关更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1919" target="_blank"><span class="italic">Oracle数据库概念</span></a> 。
                        </p>
                     </div>
                  </div>
               </div><a id="ADFNS476"></a><div class="props_rev_3"><a id="GUID-7B761E11-3094-44B3-B802-4C671422397B" name="GUID-7B761E11-3094-44B3-B802-4C671422397B"></a><h4 id="ADFNS-GUID-7B761E11-3094-44B3-B802-4C671422397B" class="sect4">客户端结果缓存一致性</h4>
                  <div>
                     <p>客户端结果缓存透明地保持其结果集与影响它们的任何数据库或会话状态更改一致。</p>
                     <p>当事务修改用于构造高速缓存结果集的任何数据库对象的数据或元数据时，该高速缓存结果集的无效将在其下一次往返服务器时发送到客户端。如果应用程序在一段时间内没有数据库调用，则客户端结果缓存滞后设置会强制下一次<code class="codeph">OCIStmtExecute()</code>调用进行数据库调用以检查此类失效。
                     </p>
                     <p>与数据库失效相关的缓存结果集会立即失效。当收到失效时，从缓存结果集中提取的任何OCI语句处理都可以继续从它们中获取，但后续的<code class="codeph">OCIStmtExecute()</code>调用不能匹配它们。
                     </p>
                     <p>如果客户端结果现金具有可用空间，则进程的下一个<code class="codeph">OCIStmtExecute()</code>调用可能会缓存新结果集。客户端结果缓存定期回收未使用的内存。
                     </p>
                     <p>如果会话打开了事务，OCI会确保其在此事务中更改引用数据库对象的查询将转到服务器而不是客户端结果缓存。</p>
                     <p>此一致性机制可确保客户端结果缓存始终接近已提交的数据库更改。如果应用程序由于无法缓存的查询（DML， <code class="codeph">OCILob</code>调用等）而涉及数据库往返的相对频繁的调用，则这些调用将透明地保持客户端结果缓存与数据库更改一致。
                     </p>
                     <p>有时，在修改表时，触发器会导致修改另一个表。客户端结果缓存对此类更改很敏感。</p>
                     <p>当会话状态被更改时 - 例如，当修改NLS会话参数时 - 查询结果可能会更改。客户端结果缓存对此类更改敏感，对于后续查询执行，返回正确的结果集。但是，客户端结果缓存会保留当前缓存的结果集（并且不会使它们无效），以便进程中的其他会话可以匹配它们。如果其他进程与它们不匹配，则这些结果集在一段时间后会被“统治”。缓存与新会话状态对应的结果集。</p>
                     <p>对于应用程序，跟踪影响查询结果集的数据库和会话状态更改可能很麻烦且容易出错，但客户端结果缓存会透明地保持其结果集与此类更改一致。</p>
                     <p>客户端结果缓存不需要客户端中的线程支持。</p>
                     <div class="infoboxnotealso" id="GUID-7B761E11-3094-44B3-B802-4C671422397B__GUID-91E3C291-4637-4CCF-8618-4DAFAD38D9D6">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="italic">Oracle Call Interface Programmer's Guide中的</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17163" target="_blank"><code class="codeph">OCIStmtExecute()</code></a></p>
                     </div>
                  </div>
               </div><a id="ADFNS477"></a><div class="props_rev_3"><a id="GUID-AD2A54E0-0DEB-4F08-96AA-3A9FA50CE521" name="GUID-AD2A54E0-0DEB-4F08-96AA-3A9FA50CE521"></a><h4 id="ADFNS-GUID-AD2A54E0-0DEB-4F08-96AA-3A9FA50CE521" class="sect4">客户端结果缓存的部署时间设置</h4>
                  <div>
                     <p>部署应用程序时，可以为客户端结果缓存设置以下内容（不更改应用程序）：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Server初始化参数</p>
                        </li>
                        <li>
                           <p>客户端配置参数</p>
                        </li>
                        <li>
                           <p>表注释</p>
                        </li>
                        <li>
                           <p><code class="codeph">RESULT_CACHE_MODE</code>会话参数</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-AD2A54E0-0DEB-4F08-96AA-3A9FA50CE521__GUID-C9FD4271-6812-48A9-897F-F582DF6F2080">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-A9D4A5F5-B939-48FF-80AE-0228E7314C7D">服务器初始化参数</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-E63D75A1-FCAA-4A54-A3D2-B068442CE766">客户端配置参数</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-F5C06AD6-286B-4B64-819D-82BF0ECEC9B4">表注释</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-4F5DDDD0-6739-4380-B5B9-248BB9A85EF7">会话参数</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-93D145D2-845E-4285-A6EE-330BCFF23B24">客户端部署参数</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADFNS948"></a><div class="props_rev_3"><a id="GUID-A9D4A5F5-B939-48FF-80AE-0228E7314C7D" name="GUID-A9D4A5F5-B939-48FF-80AE-0228E7314C7D"></a><h5 id="ADFNS-GUID-A9D4A5F5-B939-48FF-80AE-0228E7314C7D" class="sect5">服务器初始化参数</h5>
                     <div>
                        <div class="section">
                           <p>部署应用程序时为客户端结果缓存设置的服务器初始化参数是：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="performance-and-scalability.html#GUID-AAAC6C71-6722-4801-8A27-EC569E2BF2E0">兼容</a></p>
                              </li>
                              <li>
                                 <p><a href="performance-and-scalability.html#GUID-5BF0E0FC-BF34-4B73-8832-86268886A092">CLIENT_RESULT_CACHE_SIZE</a></p>
                              </li>
                              <li>
                                 <p><a href="performance-and-scalability.html#GUID-084D2C56-DEAA-4068-8159-DEAE01EA01B7">CLIENT_RESULT_CACHE_LAG</a></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADFNS1445"></a><div class="props_rev_3"><a id="GUID-AAAC6C71-6722-4801-8A27-EC569E2BF2E0" name="GUID-AAAC6C71-6722-4801-8A27-EC569E2BF2E0"></a><h6 id="ADFNS-GUID-AAAC6C71-6722-4801-8A27-EC569E2BF2E0" class="sect6">兼容</h6>
                        <div>
                           <div class="section">
                              <p>指定Oracle数据库必须与之保持兼容性的版本。要启用客户端结果缓存， <code class="codeph">COMPATIBLE</code>必须至少为11.0.0.0。要为视图启用客户端结果缓存， <code class="codeph">COMPATIBLE</code>必须至少为11.2.0.0。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADFNS1001"></a><div class="props_rev_3"><a id="GUID-5BF0E0FC-BF34-4B73-8832-86268886A092" name="GUID-5BF0E0FC-BF34-4B73-8832-86268886A092"></a><h6 id="ADFNS-GUID-5BF0E0FC-BF34-4B73-8832-86268886A092" class="sect6">CLIENT_RESULT_CACHE_SIZE</h6>
                        <div>
                           <div class="section">
                              <p><a id="d10075e5498" class="indexterm-anchor"></a>指定每个OCI客户端进程的客户端结果集缓存的最大大小。默认值0表示禁用客户端结果缓存。要启用客户端结果缓存，请将<code class="codeph">CLIENT_RESULT_CACHE_SIZE</code>设置为至少32768字节（32千字节（KB））。
                              </p>
                              <p>如果<code class="codeph">CLIENT_RESULT_CACHE_SIZE</code>在服务器上启用了客户端结果缓存，则<code class="codeph">sqlnet.ora</code>配置参数<code class="codeph">OCI_RESULT_CACHE_MAX_SIZE</code>可以覆盖其值。如果在服务器上禁用了客户端结果缓存，则忽略<code class="codeph">OCI_RESULT_CACHE_MAX_SIZE</code> ，并且无法在客户端上启用客户端结果缓存。
                              </p>
                              <p>Oracle建议为所有Oracle Real Application Clusters启用客户端结果缓存（ <a id="d10075e5520" class="indexterm-anchor"></a> Oracle RAC）节点或禁用所有Oracle RAC节点的客户端结果缓存。否则，在客户端进程中，某些会话可能启用了缓存，而其他会话可能已禁用缓存（从而从服务器获取最新结果）。此组合可能会向应用程序显示数据库的不一致视图。
                              </p>
                              <p><code class="codeph">CLIENT_RESULT_CACHE_SIZE</code>是一个静态参数。因此，如果使用<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>语句更改<code class="codeph">CLIENT_RESULT_CACHE_SIZE</code>的值，则必须包含<code class="codeph">SCOPE</code> <code class="codeph">=</code> <code class="codeph">SPFILE</code>子句并重新启动数据库才能使更改生效。
                              </p>
                              <p><code class="codeph">CLIENT_RESULT_CACHE_SIZE</code>的最大值是这些值中的最小值：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>可用客户端内存</p>
                                 </li>
                                 <li>
                                    <p>（（要缓存的结果集的可能数量）*（结果集中行的平均大小）*（结果集中的平均行数））</p>
                                 </li>
                                 <li>
                                    <p>2千兆字节（GB）</p>
                                    <p>如果指定的值大于2 GB，则值为2 GB。</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-5BF0E0FC-BF34-4B73-8832-86268886A092__GUID-42C73083-B44E-49A2-B585-AB64EB6EE7B2">
                                 <p class="notep1">注意：</p>
                                 <p>在数据库创建期间不要设置<code class="codeph">CLIENT_RESULT_CACHE_SIZE</code>参数，因为这可能导致错误。
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADFNS1011"></a><div class="props_rev_3"><a id="GUID-084D2C56-DEAA-4068-8159-DEAE01EA01B7" name="GUID-084D2C56-DEAA-4068-8159-DEAE01EA01B7"></a><h6 id="ADFNS-GUID-084D2C56-DEAA-4068-8159-DEAE01EA01B7" class="sect6">CLIENT_RESULT_CACHE_LAG</h6>
                        <div>
                           <div class="section">
                              <p><a id="d10075e5669" class="indexterm-anchor"></a>指定客户端结果缓存可能滞后于影响其结果集的数据库中的更改的最长时间（以毫秒为单位）。默认值为3000毫秒。
                              </p>
                              <p><code class="codeph">CLIENT_RESULT_CACHE_LAG</code>是一个静态参数。因此，如果使用<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>语句更改<code class="codeph">CLIENT_RESULT_CACHE_LAG</code>的值，则必须包含<code class="codeph">SCOPE</code> <code class="codeph">=</code> <code class="codeph">SPFILE</code>子句并重新启动数据库才能使更改生效。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="ADFNS909"></a><a id="ADFNS478"></a><div class="props_rev_3"><a id="GUID-E63D75A1-FCAA-4A54-A3D2-B068442CE766" name="GUID-E63D75A1-FCAA-4A54-A3D2-B068442CE766"></a><h5 id="ADFNS-GUID-E63D75A1-FCAA-4A54-A3D2-B068442CE766" class="sect5">客户端配置参数</h5>
                     <div>
                        <div class="section">
                           <p>客户端配置参数是可选的，但如果设置，它们将覆盖服务器初始化文件<code class="codeph">init.ora</code>的等效参数。
                           </p>
                           <p>可以在<code class="codeph">oraaccess.xml</code>文件， <code class="codeph">sqlnet.ora</code>文件或两者中设置客户端配置参数。当两个文件都设置了等效参数时， <code class="codeph">oraaccess.xml</code>设置优先于相应的<code class="codeph">sqlnet.ora</code>设置。如果未在<code class="codeph">oraaccess.xml</code>设置参数，则进程将在<code class="codeph">sqlnet.ora</code>中搜索其设置。
                           </p>
                           <p>当可以在<code class="codeph">oraaccess.xml</code>和<code class="codeph">sqlnet.ora</code>设置客户端配置参数时，Oracle建议在<code class="codeph">oraaccess.xml</code>设置该参数。但是，对于网络配置， <code class="codeph">sqlnet.ora</code>是主文件，因为<code class="codeph">oraaccess.xml</code>不支持网络级别设置。
                           </p>
                           <p><a href="performance-and-scalability.html#GUID-E63D75A1-FCAA-4A54-A3D2-B068442CE766__CACJADHD" title="此可选客户端配置参数表列出了第1列中的oraaccess.xml参数，列出了第2列中的等效sqlnet.ora参数，并描述了第3列中的参数。">表3-3</a>介绍了等效的<code class="codeph">oraaccess.xml</code>和<code class="codeph">sqlnet.ora</code>客户端配置参数。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-E63D75A1-FCAA-4A54-A3D2-B068442CE766__CACJADHD">
                           <p class="titleintable">表3-3客户端配置参数（可选）</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="客户端配置参数（可选）" width="100%" border="1" summary="This table of optional client configuration parameters lists the oraaccess.xml parameters in column 1, lists the equivalent sqlnet.ora parameters in column 2, and describes the parameters in column 3." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d10075e5862">oraacess.xml参数</th>
                                    <th align="left" valign="bottom" width="42%" id="d10075e5865">sqlnet.ora参数</th>
                                    <th align="left" valign="bottom" width="36%" id="d10075e5868">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d10075e5873" headers="d10075e5862 ">
                                       <p><code class="codeph">MAX_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d10075e5873 d10075e5865 ">
                                       <p><code class="codeph">OCI_RESULT_CACHE_MAX_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d10075e5873 d10075e5868 ">
                                       <p>每个进程的客户端结果缓存的最大大小（以字节为单位）。</p>
                                       <p>在<code class="codeph">sqlnet.ora</code>指定小于32768的大小会禁用客户端进程读取<code class="codeph">sqlnet.ora</code>客户端结果缓存。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d10075e5893" headers="d10075e5862 ">
                                       <p><code class="codeph">max_rset_size</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d10075e5893 d10075e5865 ">
                                       <p><code class="codeph">OCI_RESULT_CACHE_MAX_RSET_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d10075e5893 d10075e5868 ">
                                       <p>每个进程的客户端结果缓存中以字节为单位的任何结果集的最大大小。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d10075e5905" headers="d10075e5862 ">
                                       <p><code class="codeph">max_rset_rows</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d10075e5905 d10075e5865 ">
                                       <p><code class="codeph">OCI_RESULT_CACHE_MAX_RSET_ROWS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d10075e5905 d10075e5868 ">
                                       <p>每个进程的客户端结果缓存中行中任何结果集的最大大小。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p>无法在客户端上设置结果缓存滞后。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI-GUID-D6CD51D8-9379-4D1B-A767-9E4F186A3E7B" target="_blank"><span><cite>Oracle调用接口程序员指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="ADFNS479"></a><div class="props_rev_3"><a id="GUID-4BFBAB90-4172-4A8C-A907-C73ABF8EA85E" name="GUID-4BFBAB90-4172-4A8C-A907-C73ABF8EA85E"></a><h4 id="ADFNS-GUID-4BFBAB90-4172-4A8C-A907-C73ABF8EA85E" class="sect4">客户端结果缓存统计</h4>
                  <div>
                     <p>在从OCI客户端往返服务器时，OCI定期将客户端结果缓存统计信息发送到服务器。<code class="codeph">CLIENT_RESULT_CACHE_STATS$</code>视图中显示的这些统计信息包括成功缓存的结果集数，缓存命中数和缓存的缓存结果集数。查询的高速缓存未命中数至少等于客户端结果高速缓存统计信息中的创建计数数。更确切地说，缓存未命中计数等于服务器自动工作负载存储库（AWR）报告中的服务器执行次数。
                     </p>
                     <div class="infoboxnotealso" id="GUID-4BFBAB90-4172-4A8C-A907-C73ABF8EA85E__GUID-A9748EDE-5035-40BE-B681-A2FD356E8EC8">
                        <p class="notep1">也可以看看：</p>
                        <p> </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">CLIENT_RESULT_CACHE_STAT$</code>视图的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN29085" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGDBA661" target="_blank"><span class="italic">“Oracle数据库性能调整指南”，</span></a>用于查找执行客户端结果缓存的会话的客户端进程ID和会话ID</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS480"></a><div class="props_rev_3"><a id="GUID-27F72393-751D-47DF-88DA-49EEA0937F99" name="GUID-27F72393-751D-47DF-88DA-49EEA0937F99"></a><h4 id="ADFNS-GUID-27F72393-751D-47DF-88DA-49EEA0937F99" class="sect4">验证客户端结果缓存</h4>
                  <div>
                     <div class="section">
                        <p>验证客户端结果缓存的一些方法是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-B0D2C946-235B-4082-A153-196D86569278">衡量执行时间</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-CBE8313B-4737-4698-819F-20D1EA126E38">查询V $ MYSTAT</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-7BA7A945-EC34-4D74-8E88-688A552C265E">查询V $ SQLAREA</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS481"></a><div class="props_rev_3"><a id="GUID-B0D2C946-235B-4082-A153-196D86569278" name="GUID-B0D2C946-235B-4082-A153-196D86569278"></a><h5 id="ADFNS-GUID-B0D2C946-235B-4082-A153-196D86569278" class="sect5">衡量执行时间</h5>
                     <div>
                        <div class="section">
                           <p>首先，在没有<code class="codeph">RESULT_CACHE</code>提示的情况下测量查询的执行时间。然后向查询添加<code class="codeph">RESULT_CACHE</code>提示并再次测量执行时间。执行时间的差异是您的性能提升。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS482"></a><div class="props_rev_3"><a id="GUID-CBE8313B-4737-4698-819F-20D1EA126E38" name="GUID-CBE8313B-4737-4698-819F-20D1EA126E38"></a><h5 id="ADFNS-GUID-CBE8313B-4737-4698-819F-20D1EA126E38" class="sect5">查询V $ MYSTAT</h5>
                     <div>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-CBE8313B-4737-4698-819F-20D1EA126E38__GUID-5E55D613-8366-4A87-A048-375C4ECB5BB8">
                              <p class="notep1">注意：</p>
                              <p>要查询<code class="codeph">V$MYSTAT</code>视图，您必须具有<code class="codeph">SELECT</code>权限。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand" id="GUID-CBE8313B-4737-4698-819F-20D1EA126E38__CACGCEAG"><span>运行此查询5次：</span><div><pre class="oac_no_warn" dir="ltr">SELECT count（*）FROM <span class="italic">table_name</span>
</pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-CBE8313B-4737-4698-819F-20D1EA126E38__CACBFACG"><span>查询<code class="codeph">V$MYSTAT</code> ：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM V $ MYSTAT</pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-CBE8313B-4737-4698-819F-20D1EA126E38__CACCEHFI"><span>运行此查询5次：</span><div><pre class="oac_no_warn" dir="ltr">SELECT <span class="bold">/ * + result_cache * /</span> count（*）FROM <span class="italic">table_name</span>
</pre><p>因为查询结果是缓存的，所以此步骤在客户端和服务器之间的往返次数要少于<code class="codeph">step 1</code> 。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>查询<code class="codeph">V$MYSTAT</code> ：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM V $ MYSTAT</pre><p>将此查询的列值与<code class="codeph">step 2</code>的查询值进行比较。
                                 </p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>相反，在添加提示查询的<code class="codeph">step 3</code> ，您可以添加表注解<code class="codeph">RESULT_CACHE</code> <code class="codeph">(MODE</code> <code class="codeph">FORCE)</code>以<span class="italic"><code class="codeph">table_name</code></span> ，在<code class="codeph">step 3</code> ，然后在运行查询<code class="codeph">step 1</code>几次。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS483"></a><div class="props_rev_3"><a id="GUID-7BA7A945-EC34-4D74-8E88-688A552C265E" name="GUID-7BA7A945-EC34-4D74-8E88-688A552C265E"></a><h5 id="ADFNS-GUID-7BA7A945-EC34-4D74-8E88-688A552C265E" class="sect5">查询V $ SQLAREA</h5>
                     <div>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-7BA7A945-EC34-4D74-8E88-688A552C265E__GUID-70F1C80F-A911-40D4-B78D-65067AC5008C">
                              <p class="notep1">注意：</p>
                              <p>要查询<code class="codeph">V$SQLAREA</code>视图，您必须具有<code class="codeph">SELECT</code>权限。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand" id="GUID-7BA7A945-EC34-4D74-8E88-688A552C265E__CACHEBBG"><span>运行此查询5次：</span><div><pre class="oac_no_warn" dir="ltr">SELECT count（*）FROM <span class="italic">table_name</span>
</pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-7BA7A945-EC34-4D74-8E88-688A552C265E__CACEAICC"><span>查询<code class="codeph">V$SQLAREA</code> ：</span><div><pre class="oac_no_warn" dir="ltr">SELECT执行，提取，parse_calls FROM V $ SQLAREA WHERE sql_text LIKE'％FROM <span class="italic">table_name</span> '</pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-7BA7A945-EC34-4D74-8E88-688A552C265E__CACCEBBG"><span>运行此查询5次：</span><div><pre class="oac_no_warn" dir="ltr">SELECT <span class="bold">/ * + result_cache * /</span> count（*）FROM <span class="italic">table_name</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>查询<code class="codeph">V$SQLAREA</code> ：</span><div><pre class="oac_no_warn" dir="ltr">SELECT执行，提取，parse_calls FROM V $ SQLAREA WHERE sql_text LIKE'％FROM <span class="italic">table_name</span> '</pre><p>将此查询的列<code class="codeph">executions</code> ， <code class="codeph">fetches</code>和<code class="codeph">parse_calls</code>的值与<code class="codeph">step 2</code>的查询的值进行比较。执行时间的差异是您的性能提升。
                                 </p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>相反，在添加提示查询的<code class="codeph">step 3</code> ，您可以添加表注解<code class="codeph">RESULT_CACHE</code> <code class="codeph">(MODE</code> <code class="codeph">FORCE)</code>到<span class="italic"><code class="codeph">table_name</code></span>步骤<code class="codeph">step 3</code> ，然后在步骤运行查询<code class="codeph">step 1</code>几次。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADFNS485"></a><a id="ADFNS484"></a><div class="props_rev_3"><a id="GUID-265350EB-DE84-4094-8616-6AB0E55BF94B" name="GUID-265350EB-DE84-4094-8616-6AB0E55BF94B"></a><h4 id="ADFNS-GUID-265350EB-DE84-4094-8616-6AB0E55BF94B" class="sect4">客户端结果缓存和服务器结果缓存</h4>
                  <div>
                     <p>客户端结果缓存与服务器结果缓存不同。客户端结果缓存在OCI客户端内存中缓存顶级SQL查询的结果，而服务器结果缓存在服务器SGA内存中缓存结果集和查询片段。</p>
                     <p>您可以独立于服务器结果缓存启用客户端结果缓存，但它们共享结果缓存SQL提示，表注释和会话参数<code class="codeph">RESULT_CACHE_MODE</code> 。 <a href="performance-and-scalability.html#GUID-265350EB-DE84-4094-8616-6AB0E55BF94B__CACCEHEB" title="设置客户端结果缓存的方法">表3-4</a>显示了结果缓存参数，PL / SQL包<code class="codeph">DBMS_RESULT_CACHE</code>和结果缓存视图的结果缓存关联。
                     </p>
                     <div class="p">
                        <div class="infoboxnotealso" id="GUID-265350EB-DE84-4094-8616-6AB0E55BF94B__NOTE-1231-C4A82752">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../cncpt/memory-architecture.html#CNCPT1919" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </div>
                     </div>
                     <div class="tblformal" id="GUID-265350EB-DE84-4094-8616-6AB0E55BF94B__CACCEHEB">
                        <p class="titleintable">表3-4设置客户端结果缓存和服务器结果缓存</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="设置客户端结果缓存和服务器结果缓存" width="100%" border="1" summary="Ways to set client result cache" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="75%" id="d10075e6772">参数，PL / SQL包和数据库视图</th>
                                 <th align="left" valign="bottom" width="25%" id="d10075e6775">结果缓存关联</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="75%" id="d10075e6780" headers="d10075e6772 ">
                                    <p><code class="codeph">CLIENT_RESULT_CACHE_*</code>参数：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">CLIENT_RESULT_CACHE_SIZE</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">CLIENT_RESULT_CACHE_LAG</code></p>
                                       </li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d10075e6780 d10075e6775 ">
                                    <p>客户端结果缓存</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="75%" id="d10075e6798" headers="d10075e6772 ">
                                    <p>SQL提示：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">RESULT_CACHE</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">NO_RESULT_CACHE</code></p>
                                       </li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d10075e6798 d10075e6775 ">
                                    <p>客户端结果缓存，服务器结果缓存</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="75%" id="d10075e6814" headers="d10075e6772 ">
                                    <p><code class="codeph">sqlnet.ora OCI_RESULT_CACHE*</code>参数：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">OCI_RESULT_CACHE_MAX_SIZE</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">OCI_RESULT_CACHE_MAX_RSET_SIZE</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">OCI_RESULT_CACHE_MAX_RSET_ROWS</code></p>
                                       </li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d10075e6814 d10075e6775 ">
                                    <p>客户端结果缓存</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="75%" id="d10075e6836" headers="d10075e6772 ">
                                    <p><code class="codeph">CLIENT_RESULT_CACHE_STATS$</code>视图</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d10075e6836 d10075e6775 ">
                                    <p>客户端结果缓存</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="75%" id="d10075e6845" headers="d10075e6772 ">
                                    <p><code class="codeph">RESULT_CACHE_MODE</code>参数</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d10075e6845 d10075e6775 ">
                                    <p>客户端结果缓存，服务器结果缓存</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="75%" id="d10075e6854" headers="d10075e6772 ">
                                    <p>所有其他<code class="codeph">RESULT_CACHE_*</code>参数（例如， <code class="codeph">RESULT_CACHE_MAX_SIZE</code> ）</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d10075e6854 d10075e6775 ">
                                    <p>服务器结果缓存</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="75%" id="d10075e6867" headers="d10075e6772 ">
                                    <p><code class="codeph">DBMS_RESULT_CACHE</code>包</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d10075e6867 d10075e6775 ">
                                    <p>服务器结果缓存</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="75%" id="d10075e6876" headers="d10075e6772 ">
                                    <p><code class="codeph">V$RESULT_CACHE_*</code>和<code class="codeph">GV$RESULT_CACHE_*</code>视图（例如， <code class="codeph">V$RESULT_CACHE_STATISTICS</code>和<code class="codeph">GV$RESULT_CACHE_MEMORY</code> ）</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d10075e6876 d10075e6775 ">
                                    <p>服务器结果缓存</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="75%" id="d10075e6894" headers="d10075e6772 ">
                                    <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code>注释</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d10075e6894 d10075e6775 ">
                                    <p>客户端结果缓存，服务器结果缓存</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="75%" id="d10075e6906" headers="d10075e6772 ">
                                    <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code>注释</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d10075e6906 d10075e6775 ">
                                    <p>客户端结果缓存，服务器结果缓存</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADFNS486"></a><div class="props_rev_3"><a id="GUID-AEC83CB0-D984-4208-BC98-AACA313F1530" name="GUID-AEC83CB0-D984-4208-BC98-AACA313F1530"></a><h4 id="ADFNS-GUID-AEC83CB0-D984-4208-BC98-AACA313F1530" class="sect4">客户端结果缓存演示文件</h4>
                  <div>
                     <p>对于OCI应用程序，客户端结果缓存的演示文件是<code class="codeph">cdemoqc.sql</code> ， <code class="codeph">cdemoqc.c</code>和<code class="codeph">cdemoqc2.c</code> （在操作系统的<code class="codeph">demo</code>目录中）。
                     </p>
                  </div>
               </div><a id="ADFNS487"></a><div class="props_rev_3"><a id="GUID-C1456214-194A-444B-9EAE-C48DB793B79B" name="GUID-C1456214-194A-444B-9EAE-C48DB793B79B"></a><h4 id="ADFNS-GUID-C1456214-194A-444B-9EAE-C48DB793B79B" class="sect4">客户端结果缓存与早期版本的兼容性</h4>
                  <div>
                     <div class="section">
                        <p>要使用客户端结果缓存，必须将应用程序与Oracle Database <span class="italic">11g</span>第1版（11.1）或更高版本的客户端库重新链接，并连接到Oracle Database <span class="italic">11g</span>第1版（11.1）或更高版本的数据库服务器。客户端结果缓存可用于所有OCI应用程序，包括JDBC Type II驱动程序，OCCI，Pro * C / C ++和ODP.NET。 OCI驱动程序自动将SQL提示<code class="codeph">RESULT_CACHE</code>传递给<code class="codeph">OCIStmtPrepare()</code>和<code class="codeph">OCIStmtPrepare2()</code>调用。
                        </p>
                        <div class="infoboxnotealso" id="GUID-C1456214-194A-444B-9EAE-C48DB793B79B__GUID-EBBAE1B4-993C-4AD1-B3A0-2FEB8C034D8C">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="italic">Oracle Call Interface Programmer's Guide中的</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17167" target="_blank"><code class="codeph">OCIStmtPrepare()</code></a> ， <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17168" target="_blank"><code class="codeph">OCIStmtPrepare2()</code></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS1051"></a><div class="props_rev_3"><a id="GUID-1ECC306F-D6DB-435A-A46D-65E9D2571ED6" name="GUID-1ECC306F-D6DB-435A-A46D-65E9D2571ED6"></a><h3 id="ADFNS-GUID-1ECC306F-D6DB-435A-A46D-65E9D2571ED6" class="sect3">声明缓存</h3>
               <div>
                  <p>语句缓存是一种为每个会话建立和管理语句缓存的功能。在服务器中，语句缓存允许使用游标而无需重新解析语句，从而消除了重复的语句解析。您可以将语句缓存与连接池和会话池结合使用，从而提高性能和可伸缩性。您还可以在OCI中使用没有会话池的语句缓存，并且在OCCI，JDBC接口和ODP.NET接口中不使用连接池。您还可以在依赖于动态SQL语句的Oracle预编译器应用程序中使用动态SQL语句缓存，例如Pro * C / C ++和ProCOBOL。</p>
                  <p>在JDBC接口中，您可以独立于另一个启用和禁用隐式和显式语句缓存 - 您既可以使用，也可以两者都使用。隐式和显式语句缓存为每个连接共享一个缓存。您还可以禁用特定语句的隐式缓存。</p>
                  <div class="infoboxnotealso" id="GUID-1ECC306F-D6DB-435A-A46D-65E9D2571ED6__GUID-01CCA6EE-5B81-4872-9F20-1C474CC98D96">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI16655" target="_blank"><span class="italic">“Oracle调用接口程序员指南”</span></a> ，了解有关在OCI中使用语句缓存的更多信息和指南</p>
                        </li>
                        <li>
                           <p>有关OCCI中语句缓存的更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNCPP0038" target="_blank"><span class="italic">“Oracle C ++调用接口程序员指南”</span></a></p>
                        </li>
                        <li>
                           <p>有关使用语句缓存的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC28650" target="_blank"><span class="italic">参见“Oracle数据库JDBC开发人员指南”</span></a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ODPNT-GUID-A1573B48-71B1-47C7-B3E9-5DEA64B715EF" target="_blank"><span><cite>适用于.NET的Oracle数据提供程序开发人员指南（适用于Microsoft Windows）</cite></span></a> ，以获取有关在ODP.NET应用程序中使用语句缓存的更多信息</p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ZZPRE-GUID-AE348149-CC26-400C-BC7D-5B0CBEB33B0C" target="_blank"><span><cite>Oracle数据库程序员Oracle预编译器指南</cite></span></a> ， <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPCC-GUID-20CBCC27-EC6B-4651-92CC-7E008BD73611" target="_blank"><span><cite>Pro * C / C ++程序员指南</cite></span></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPCB-GUID-2F2833F4-62F3-4FC7-8FC1-B742E44727B0" target="_blank"><span><cite>Pro * COBOL程序员指南</cite></span></a> ，了解有关在依赖于动态SQL语句的预编译器应用程序中使用动态SQL语句高速缓存的更多信息</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS214"></a><div class="props_rev_3"><a id="GUID-82D4AFAE-136B-4B83-B9F8-765111642B4F" name="GUID-82D4AFAE-136B-4B83-B9F8-765111642B4F"></a><h3 id="ADFNS-GUID-82D4AFAE-136B-4B83-B9F8-765111642B4F" class="sect3">OCI客户端语句缓存自动调整</h3>
               <div>
                  <p>OCI客户端语句缓存自动调优优化了中间层应用程序的OCI客户端会话功能，以在不更改OCI应用程序的情况下提高性能。</p>
                  <p>如果没有自动调整，OCI客户端语句高速缓存大小设置可能会变得不理想 - 例如，当更改的工作负载导致不同的SQL语句工作集时。如果大小太小，则会导致网络活动过多，服务器会进行更多分析。如果尺寸太大，则会导致内存使用过多。客户端应用程序可能难以保持缓存大小最佳。</p>
                  <p>自动调整通过自动和定期重新配置OCI语句高速缓存大小来解决此潜在的性能问题。</p>
                  <p>通过提供部署时设置来实现自动调整，该设置提供重新配置OCI语句高速缓存的选项。这些设置在客户端<code class="codeph">oraaccess.xml</code>文件中作为基于连接字符串的部署设置提供，该文件将编程设置覆盖到OCI功能的用户配置。
                  </p>
                  <p>中层应用程序开发人员和数据库管理员（DBA）可以使用自动调整OCI客户端语句缓存参数设置，减少诊断和修复系统各部分性能问题的时间和精力。</p>
                  <div class="infoboxnotealso" id="GUID-82D4AFAE-136B-4B83-B9F8-765111642B4F__NOTE-136-C4AB1EDB">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI73009" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS489"></a><div class="props_rev_3"><a id="GUID-93D145D2-845E-4285-A6EE-330BCFF23B24" name="GUID-93D145D2-845E-4285-A6EE-330BCFF23B24"></a><h3 id="ADFNS-GUID-93D145D2-845E-4285-A6EE-330BCFF23B24" class="sect3">客户端部署参数</h3>
               <div>
                  <div class="section">
                     <p>从Oracle数据库12开始<span class="italic">c</span>解除1（12.1.0.1），OCI部署参数是在一个新的配置文件（可<code class="codeph">oraaccess.xml</code> ）。
                     </p>
                     <div class="infoboxnotealso" id="GUID-93D145D2-845E-4285-A6EE-330BCFF23B24__NOTE-1212-C4ABF33D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI73052" target="_blank"><span class="italic">Oracle调用接口程序员指南。</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS226"></a><div class="props_rev_3"><a id="GUID-8E2B36A1-CDD2-454D-AE60-58784834601F" name="GUID-8E2B36A1-CDD2-454D-AE60-58784834601F"></a><h3 id="ADFNS-GUID-8E2B36A1-CDD2-454D-AE60-58784834601F" class="sect3">使用查询更改通知</h3>
               <div>
                  <p>连续查询通知（CQN）允许客户端应用程序向数据库注册查询，并接收对象的DML或DDL更改通知（对象更改通知（OCN））或与查询关联的结果集更改（查询结果更改通知（QRCN）） 。数据库在DML或DDL事务提交时发布通知。</p>
                  <p><span class="bold">CQN注册将</span>一个或多个查询与通知类型（OCN或QRCN）和通知处理程序相关联。要创建CQN注册，您可以使用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>PL / SQL接口</p>
                        <p>使用PL / SQL接口时，通知处理程序是服务器端PL / SQL存储过程。PL / SQL注册可以由非线程语言和系统使用，例如PHP。对于PHP，PL / SQL侦听器在收到数据库通知时调用PHP回调。</p>
                     </li>
                     <li>
                        <p>Oracle调用接口（OCI）</p>
                        <p>使用OCI时，通知处理程序是客户端C回调过程。</p>
                     </li>
                     <li>
                        <p>Java数据库连接（JDBC）接口</p>
                        <p>使用JDBC接口时，JDBC驱动程序会在服务器上创建注册。JDBC驱动程序启动一个新线程，该线程侦听来自服务器的通知（通过专用通道），将它们转换为Java事件，然后通知所有使用此注册注册的侦听器。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-8E2B36A1-CDD2-454D-AE60-58784834601F__GUID-C52E7BBF-B101-478F-BE30-6C541AFF3871">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="cqn.html#GUID-373BAF72-3E63-42FE-8BEA-8A2AEFBF1C35" title="某些类型的查询如此简化，以至于在对象级别生成失效;也就是说，只要这些查询中引用的任何对象发生更改。此类查询的示例是使用不受支持的列类型或包含子查询的查询。此问题的解决方案是重写原始查询。">使用连续查询通知（CQN）</a>来完整讨论此功能的概念以及如何使用PL / SQL和OCI接口创建CQN注册</p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC28815" target="_blank"><span class="italic">“Oracle数据库JDBC开发人员指南”</span></a> ，了解有关在服务器上使用JDBC进行CQN注册的信息</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS1341"></a><a id="ADFNS228"></a><div class="props_rev_3"><a id="GUID-015CA8C1-2386-4626-855D-CC546DDC1086" name="GUID-015CA8C1-2386-4626-855D-CC546DDC1086"></a><h3 id="ADFNS-GUID-015CA8C1-2386-4626-855D-CC546DDC1086" class="sect3">使用数据库驻留连接池</h3>
               <div>
                  <div class="section">
                     <p>数据库驻留连接池（DRCP）在数据库服务器中为典型的Web应用程序使用方案提供连接池，其中应用程序获取数据库连接，在数据库上工作相对较短的时间，然后释放连接。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-015CA8C1-2386-4626-855D-CC546DDC1086__GUID-EEACB0C4-F62D-4DBE-B6EE-9038DE3143DF">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-0B0DC596-17FF-4EEE-BAA1-9F428710C1AC">关于数据库驻留连接池</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-78B32D33-EB8D-4A0A-817F-0957D51C9AF2">配置DRCP</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-73BCD307-BD01-4ABF-A63A-E647DAFB8ED0">共享代理会话</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-2F3128AD-DEE9-4436-9BEB-528B187F2313">将JDBC与DRCP结合使用</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-226C6F55-7500-4A74-85AD-DFF9F8D6A04A">将OCI会话池API与DRCP一起使用</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-4D0F5126-061C-4A46-BDAB-ED40F13E8B06" title="您可以使用OCISessionPoolCreate API将连接类设置为HRMS。您可以使用OCISessionPoolCreate API创建连接类作为RECMS。">会话纯度和连接类</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-FFDF247E-893A-48E2-88EB-8C2963A25F35">启动数据库驻留连接池</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-9A4AA54E-68F8-49C2-BF20-616BCDA5F4F2">启用DRCP</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-661BB906-74D2-4C5D-9C7E-2798F76501B3">受益于OCI应用程序中DRCP的可扩展性</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-836F7840-EAB4-4BCD-82AC-22D82AC89404">受益于Java应用程序中DRCP的可伸缩性</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5">使用DRCP的最佳实践</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-EB60065E-3E36-4226-8B97-EF4779D61DA5">兼容性和迁移</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-37504E6D-B64F-4EF1-BD7E-335F51F2CE73">DRCP限制</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-C3C1C26F-3B79-454A-A3AF-D25AAB0F28FE">将DRCP与自定义池一起使用</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-4E0EC973-0E3A-4654-A52E-156CDCCB74E3">明确标记会话状态或无状态</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-A96FA454-6182-498F-B94D-EC4F7D0858AD">将DRCP与Oracle Real Application Clusters一起使用</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-D4A5051F-BFCC-470B-A219-C8072BFA33F0">将DRCP与可插拔数据库一起使用</a></p>
                        </li>
                        <li>
                           <p><a href="performance-and-scalability.html#GUID-E97AEC94-1A4D-4D83-A1D8-3EED0413437C">DRCP与Data Guard</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS491"></a><div class="props_rev_3"><a id="GUID-0B0DC596-17FF-4EEE-BAA1-9F428710C1AC" name="GUID-0B0DC596-17FF-4EEE-BAA1-9F428710C1AC"></a><h4 id="ADFNS-GUID-0B0DC596-17FF-4EEE-BAA1-9F428710C1AC" class="sect4">关于数据库驻留连接池</h4>
                  <div>
                     <p>DRCP池服务器进程，每个进程相当于专用服务器进程和数据库会话的组合;这些被称为<span class="bold">池服务器</span> 。池服务器可以由在相同或多个主机上运行的多个应用程序共享。连接代理进程在数据库实例级别管理池化服务器。
                     </p>
                     <p>DRCP是一种可配置的功能，在应用程序运行时选择。它允许同时使用传统和基于DRCP的连接体系结构。</p>
                     <p>DRCP对于具有无法执行中间层连接池的多进程单线程应用程序服务器（如PHP和Apache）的体系结构特别有用。DRCP在大规模Web部署中也非常有用，其中数百或数千个Web服务器或中间层需要数据库访问和客户端池（即使在多线程系统和Java等语言中）。使用DRCP，数据库可以扩展到数万个并发连接。如果您的数据库Web应用程序必须扩展为大量连接，则DRCP是您的连接池解决方案。</p>
                     <p>DRCP补充了在中间层进程中共享线程之间的连接的中间层连接池。DRCP还支持在同一中间层主机上，跨多个中间层主机以及跨多个中间层（Web服务器，容器）的中间层进程共享数据库连接，这些中间层适用于使用不同语言编写的应用程序。此共享显着减少了支持大量客户端连接所需的数据库资源，从而减少了数据库层内存占用，并提高了中间层和数据库层的可伸缩性。拥有一个随时可用的服务器池还可以降低创建和释放客户端连接的成本。</p>
                     <p>客户端从DRCP获得连接，DRCP连接到称为连接代理的Oracle数据库后台进程。连接代理实现池功能，并在来自客户端的持久入站连接之间复用池化服务器。</p>
                     <p>当客户端需要数据库访问时，连接代理从池中获取服务器进程并将其提供给客户端。然后，客户端直接连接到服务器。在服务器执行客户端请求之后，服务器进程返回到池，并且来自客户端的连接将作为来自客户端进程的持久入站连接还原到连接代理。在DRCP中，释放资源会使会话保持不变，但不再与连接（服务器进程）相关联。由于此会话将其用户全局区域（UGA）存储在程序全局区域（PGA）中，而不是存储在系统全局区域（SGA）中，因此客户端可以在检测到活动时透明地重新建立连接。</p>
                     <p>DRCP通常建议用于具有大量连接的应用程序。对于具有中等连接数的应用程序，建议使用共享服务器，对于具有少量连接的应用程序，建议使用专用会话。阈值大小取决于数据库主机上可用的内存量。</p>
                     <p>DRCP具有以下优势：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>DRCP支持多个客户端应用程序和中间层应用程序服务器之间的资源共享。</p>
                        </li>
                        <li>
                           <p>DRCP通过减少数据库主机上的资源使用来提高数据库和应用程序的可伸缩性。</p>
                        </li>
                     </ul>
                     <p>与客户端连接池和共享服务器相比：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>DRCP提供与数据库服务器的直接连接，由客户端连接池提供（如客户端连接池，但与共享服务器不同）。</p>
                        </li>
                        <li>
                           <p>DRCP可以池化数据库服务器（如客户端连接池和共享服务器）。</p>
                        </li>
                        <li>
                           <p>DRCP可以池化会话（如客户端连接池，但与共享服务器不同）。</p>
                        </li>
                        <li>
                           <p>DRCP可以跨中间层边界共享连接（与客户端连接池不同）。</p>
                        </li>
                     </ul>
                     <p>DRCP支持PDB和非PDB环境中的共享连接。</p>
                     <p>DRCP提供了一种独特的连接池解决方案，可满足需要大量连接且数据库资源使用最少的环境中的可扩展性要求。</p>
                     <div class="infoboxnotealso" id="GUID-0B0DC596-17FF-4EEE-BAA1-9F428710C1AC__GUID-E7A18513-A3EB-4DFE-9B0A-60EDFF263980">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关DRCP体系结构的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1896" target="_blank"><span class="italic">Oracle Database Concepts</span></a></p>
                           </li>
                           <li>
                              <p>有关交换机服务增强的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN-GUID-A67C5365-99A1-4BE1-87CB-CA9A4DEBBF70" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS492"></a><div class="props_rev_3"><a id="GUID-78B32D33-EB8D-4A0A-817F-0957D51C9AF2" name="GUID-78B32D33-EB8D-4A0A-817F-0957D51C9AF2"></a><h4 id="ADFNS-GUID-78B32D33-EB8D-4A0A-817F-0957D51C9AF2" class="sect4">配置DRCP</h4>
                  <div>
                     <p>默认情况下安装DRCP，但DBA必须启动，并使用<code class="codeph">DBMS_CONNECTION_POOL</code>包进行配置。配置选项包括最小和最大池化服务器数，连接代理数，每个连接代理可以处理的最大连接数等。
                     </p>
                     <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2.0.1）开始，新的<code class="codeph">MAX_TXN_THINK_TIME</code>参数指定具有打开事务的客户端在终止之前允许的最长不活动时间。这可以设置为允许比没有事务的客户端（由<code class="codeph">MAX_THINK_TIME</code>参数值指定）更多的时间。这允许有效的池重用，同时给不完整的事务更长的时间来结束。
                     </p>
                     <p>OCI会话池API已扩展为与DRCP互操作。</p>
                     <div class="infoboxnotealso" id="GUID-78B32D33-EB8D-4A0A-817F-0957D51C9AF2__GUID-E4FFF79F-AF8A-4767-8841-DFC680181CB3">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">DBMS_CONNECTION_POOL</code>包的详细信息，请<code class="codeph">DBMS_CONNECTION_POOL</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS215" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                           <li>
                              <p>有关为数据库驻留连接池配置连接池的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN12347" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI9110" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a> 
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC29023" target="_blank"><span class="italic">Oracle数据库JDBC开发人员指南</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJUCP8142" target="_blank"><span class="italic">JDBC开发人员指南的Oracle通用连接池</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-73BCD307-BD01-4ABF-A63A-E647DAFB8ED0" name="GUID-73BCD307-BD01-4ABF-A63A-E647DAFB8ED0"></a><h4 id="ADFNS-GUID-73BCD307-BD01-4ABF-A63A-E647DAFB8ED0" class="sect4">共享代理会话</h4>
                  <div>
                     <p>从Oracle Database 12c第2版（12.2.0.1）开始，DRCP中的代理会话在连接到同一模式的应用程序之间共享。</p>
                  </div>
               </div><a id="ADFNS1425"></a><div class="props_rev_3"><a id="GUID-2F3128AD-DEE9-4436-9BEB-528B187F2313" name="GUID-2F3128AD-DEE9-4436-9BEB-528B187F2313"></a><h4 id="ADFNS-GUID-2F3128AD-DEE9-4436-9BEB-528B187F2313" class="sect4">将JDBC与DRCP结合使用</h4>
                  <div>
                     <div class="section">
                        <p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.1）开始，Oracle JDBC驱动程序支持DRCP。 DRCP实现在服务器端创建一个池，该池在多个客户端池之间共享。这些客户端池使用JDBC的通用连接池。使用通用连接池可显着降低内存消耗（因为服务器上的服务器进程数量减少）并提高了数据库服务器的可伸缩性。
                        </p>
                        <p>要跟踪服务器端连接的签入和签出操作，Java应用程序必须使用客户端池，例如JDBC的通用连接池或第三方Java连接池。</p>
                        <p>要在客户端启用DRCP，您必须执行以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将非<code class="codeph">NULL</code> ，非空<code class="codeph">String</code>值传递给连接属性<code class="codeph">oracle.jdbc.DRCPConnectionClass</code> 。
                              </p>
                           </li>
                           <li>
                              <p>在长连接字符串中传递（ <code class="codeph">SERVER=POOLED</code> ）。
                              </p>
                           </li>
                        </ul>
                        <p>您还可以在短URL表单中指定（ <code class="codeph">SERVER=POOLED</code> ），如下所示：</p><pre class="oac_no_warn" dir="ltr">JDBC：预言：瘦：@ // &lt;主机&gt;：&lt;端口&gt; / &lt;服务&gt; [：POOLED]</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">JDBC：预言：瘦：@ //本地主机：5221 / ORCL：POOLED</pre><p>通过使用连接属性<code class="codeph">oracle.jdbc.为服务器上的所有池化服务器进程设置相同的DRCP连接类名<code class="codeph">oracle.jdbc.DRCPConnectionClass</code> ，您可以跨多个连接池共享服务器上的池服务器进程。
                        </p>
                        <p>在DRCP中，您还可以将标记应用于给定连接，并在以后轻松检索该标记连接。</p>
                        <div class="infoboxnotealso" id="GUID-2F3128AD-DEE9-4436-9BEB-528B187F2313__NOTE-1229-C4AD9647">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="performance-and-scalability.html#GUID-FFDF247E-893A-48E2-88EB-8C2963A25F35">启动数据库驻留连接池</a></p>
                              </li>
                              <li>
                                 <p>有关用于控制自定义连接池实现的API的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC29030" target="_blank"><span class="italic">“Oracle数据库JDBC开发人员指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关在客户端启用DRCP的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC29043" target="_blank"><span class="italic">“Oracle数据库JDBC开发人员指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS493"></a><div class="props_rev_3"><a id="GUID-226C6F55-7500-4A74-85AD-DFF9F8D6A04A" name="GUID-226C6F55-7500-4A74-85AD-DFF9F8D6A04A"></a><h4 id="ADFNS-GUID-226C6F55-7500-4A74-85AD-DFF9F8D6A04A" class="sect4">将OCI会话池API与DRCP一起使用</h4>
                  <div>
                     <div class="section">
                        <p>OCI会话池API <code class="codeph">OCISessionPoolCreate()</code> ， <code class="codeph">OCISessionGet()</code>和<code class="codeph">OCISessionRelease()</code>与DRCP互操作。</p>
                        <p>OCI应用程序通过调用<code class="codeph">OCISessionPoolCreate()</code>来初始化DRCP的OCI会话池的环境，这在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17124" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide中</span></a>有所描述。
                        </p>
                        <p>要从OCI会话池获取DRCP会话，OCI应用程序调用<code class="codeph">OCISessionGet()</code> ，为<code class="codeph">mode</code>参数指定<code class="codeph">OCI_SESSGET_SPOOL</code> 。
                        </p>
                        <p>要为DRCP释放到OCI会话池的会话，OCI应用程序将调用<code class="codeph">OCISessionRelease()</code> 。
                        </p>
                        <p>为了提高性能，OCI会话池可以透明地缓存到连接代理的连接。OCI应用程序可以通过调用<code class="codeph">OCISessionGet()</code>并将<code class="codeph">authInfop</code>参数设置为<code class="codeph">OCI_ATTR_CONNECTION_CLASS</code>并指定连接类名称或在调用<code class="codeph">OCISessionGet()</code>之前使用<code class="codeph">OCIAuthInfo</code>句柄来重用应用程序离开类似状态会话的会话。
                        </p>
                        <p>DRCP还支持传统客户端OCI会话池提供的功能，例如标记，语句缓存和TAF。</p>
                        <div class="infoboxnotealso" id="GUID-226C6F55-7500-4A74-85AD-DFF9F8D6A04A__NOTE-1217-C4D8B7B3">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">OCISessionGet()</code>信息的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17123" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">OCISessionRelease()</code>更多信息，请<code class="codeph">OCISessionRelease()</code> <a href="../lnoci/connect-authorize-and-initialize-functions.html#LNOCI17126" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                              </li>
                              <li>
                                 <p><a href="performance-and-scalability.html#GUID-4D0F5126-061C-4A46-BDAB-ED40F13E8B06" title="您可以使用OCISessionPoolCreate API将连接类设置为HRMS。您可以使用OCISessionPoolCreate API创建连接类作为RECMS。">会话纯度和连接类</a> ，以获取有关提高DRCP性能的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS1335"></a><a id="ADFNS494"></a><div class="props_rev_3"><a id="GUID-4D0F5126-061C-4A46-BDAB-ED40F13E8B06" name="GUID-4D0F5126-061C-4A46-BDAB-ED40F13E8B06"></a><h4 id="ADFNS-GUID-4D0F5126-061C-4A46-BDAB-ED40F13E8B06" class="sect4">会话纯度和连接类</h4>
                  <div>
                     <p>在Oracle Database <span class="italic">11g</span>第1版（11.1）中，OCI引入了两个可在使用<code class="codeph">OCISessionGet()</code>获取会话时指定的设置：会话纯度和连接类。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4D0F5126-061C-4A46-BDAB-ED40F13E8B06__GUID-D0D36213-DC7E-4865-9AAC-B00CF57125C1">话题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-12410EEC-FE79-42E2-8F6B-EAA9EDA59665">会话纯度</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-EC3DEE61-512C-4CBB-A431-91894D0E1E37">连接类</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-CE6E4DCC-92DF-4946-92B8-2BDD9845DA35" title="您可以使用OCISessionPoolCreate API将连接类设置为HRMS。">示例：将连接类设置为HRMS</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-AADEB9A7-1B00-4E29-9414-4AE5252314A8" title="您可以使用OCISessionPoolCreate API将连接类创建为RECMS。">示例：将连接类设置为RECMS</a></p>
                           </li>
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-95BE385D-ADCD-48ED-A801-B670EA3A956D">会话纯度和连接类默认值</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS496"></a><a id="ADFNS495"></a><div class="props_rev_3"><a id="GUID-12410EEC-FE79-42E2-8F6B-EAA9EDA59665" name="GUID-12410EEC-FE79-42E2-8F6B-EAA9EDA59665"></a><h5 id="ADFNS-GUID-12410EEC-FE79-42E2-8F6B-EAA9EDA59665" class="sect5">会话纯度</h5>
                     <div>
                        <p><span class="bold">会话纯度</span>指定OCI应用程序是否可以重用池化会话（ <code class="codeph">OCI_SESSGET_PURITY_SELF</code> ）或必须使用新会话（ <code class="codeph">OCI_SESSGET_PURITY_NEW</code> ）。
                        </p>
                        <p>该应用程序可以设置会话纯度无论是在<code class="codeph">OCIAuthInfo</code>调用之前手柄<code class="codeph">OCISessionGet()</code>或者在<code class="codeph">mode</code>调用时的参数<code class="codeph">OCISessionGet()</code>
                        </p>
                        <div class="infoboxnotealso" id="GUID-12410EEC-FE79-42E2-8F6B-EAA9EDA59665__SHOWSHOWACONNECTIONPOOLINGAPPLICATI-C4D968ED">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关连接池应用程序如何设置新会话的详细信息，请参见<a href="performance-and-scalability.html#GUID-12410EEC-FE79-42E2-8F6B-EAA9EDA59665__CACHBGAH">示例3-1</a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="example" id="GUID-12410EEC-FE79-42E2-8F6B-EAA9EDA59665__CACHBGAH">
                           <p class="titleinexample">示例3-1设置新会话的会话纯度</p><pre class="oac_no_warn" dir="ltr">/ * OCIAttrSet方法* / ub4纯度= OCI_ATTR_PURITY_NEW; OCIAttrSet（authInfop，OCI_HTYPE_AUTHINFO，＆pure，（ub4）sizeof（纯度）OCI_ATTR_PURITY，errhp）; / * OCISessionGet模式方法* / OCISessionGet（envhp，errhp，＆svchp，authInfop，poolName，poolNameLen，NULL，0，NULL，NULL，NULL，OCI_SESSGET_SPOOL）; / * poolName是OCISessionPoolCreate（）返回的名称* /</pre><div class="infoboxnote" id="GUID-12410EEC-FE79-42E2-8F6B-EAA9EDA59665__GUID-33BE1F78-FFB2-4E9D-A483-E83FCD49CF0A">
                              <p class="notep1">注意：</p>
                              <p>重用池化会话时，服务器的NLS属性会覆盖客户端的NLS属性。</p>
                              <p>例如，如果客户端将<code class="codeph">NLS_LANG</code>设置为<code class="codeph">french_france.us7ascii</code> ，然后从池中分配了德语会话，则客户端会话将变为德语。
                              </p>
                              <p>要避免此问题，请使用连接类来限制共享。</p>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADFNS498"></a><a id="ADFNS499"></a><a id="ADFNS497"></a><div class="props_rev_3"><a id="GUID-EC3DEE61-512C-4CBB-A431-91894D0E1E37" name="GUID-EC3DEE61-512C-4CBB-A431-91894D0E1E37"></a><h5 id="ADFNS-GUID-EC3DEE61-512C-4CBB-A431-91894D0E1E37" class="sect5">连接类</h5>
                     <div>
                        <p><span class="bold">Connection类</span>定义OCI应用程序所需的连接类型的逻辑名称。当池化会话具有连接类时，OCI确保会话不在该连接类之外共享。
                        </p>
                        <p>例如，连接类可以阻止以下共享池化会话：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>不同的用户</p>
                              <p>（首先为用户<code class="codeph">HR</code>创建的会话仅分配给用户<code class="codeph">HR</code>后续请求。）
                              </p>
                           </li>
                           <li>
                              <p>同一用户的不同会话</p>
                           </li>
                           <li>
                              <p>由同一用户运行的不同应用程序</p>
                              <p>（每个应用程序都可以拥有自己的连接类。）</p>
                           </li>
                        </ul>
                        <p>要设置连接类，可以使用<code class="codeph">OCIAuthInfo</code>句柄的<code class="codeph">OCI_ATTR_CONNECTION_CLASS</code>属性。连接类名称是最多1024个字节的字符串，不能包含星号（*）。
                        </p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-CE6E4DCC-92DF-4946-92B8-2BDD9845DA35" name="GUID-CE6E4DCC-92DF-4946-92B8-2BDD9845DA35"></a><h5 id="ADFNS-GUID-CE6E4DCC-92DF-4946-92B8-2BDD9845DA35" class="sect5">示例：将连接类设置为HRMS</h5>
                     <div>
                        <p>您可以使用<code class="codeph">OCISessionPoolCreate</code> API将连接类设置为HRMS。</p>
                        <p><a href="performance-and-scalability.html#GUID-CE6E4DCC-92DF-4946-92B8-2BDD9845DA35__CACCIFIE">示例3-2</a>指定HRMS应用程序需要具有连接类<code class="codeph">HRMS</code>会话。</p>
                        <div class="example" id="GUID-CE6E4DCC-92DF-4946-92B8-2BDD9845DA35__CACCIFIE">
                           <p class="titleinexample">示例3-2将连接类设置为HRMS</p><pre class="oac_no_warn" dir="ltr">OCISessionPoolCreate（envhp，errhp，spoolhp，＆poolName，＆poolNameLen，“HRDB”，strlen（“HRDB”），0,10,1，“HR”，strlen（“HR”），“HR”，strlen（“HR”） ，OCI_SPC_HOMOGENEOUS）; OCIAttrSet（authInfop，OCI_HTYPE_AUTHINFO， <span class="bold">“HRMS”，strlen（“HRMS”），</span> <span class="bold">OCI_ATTR_CONNECTION_CLASS，</span> errhp）; OCISessionGet（envhp，errhp，＆svchp，authInfop，poolName，poolNameLen，NULL，0，NULL，NULL，NULL，OCI_SESSGET_SPOOL）;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-AADEB9A7-1B00-4E29-9414-4AE5252314A8" name="GUID-AADEB9A7-1B00-4E29-9414-4AE5252314A8"></a><h5 id="ADFNS-GUID-AADEB9A7-1B00-4E29-9414-4AE5252314A8" class="sect5">示例：将连接类设置为RECMS</h5>
                     <div>
                        <p>您可以使用<code class="codeph">OCISessionPoolCreate</code> API将连接类创建为RECMS。</p>
                        <p><a href="performance-and-scalability.html#GUID-AADEB9A7-1B00-4E29-9414-4AE5252314A8__CACGGBBC">示例3-3</a>指定招聘应用程序需要具有连接类<code class="codeph">RECMS</code>会话。</p>
                        <div class="example" id="GUID-AADEB9A7-1B00-4E29-9414-4AE5252314A8__CACGGBBC">
                           <p class="titleinexample">示例3-3将连接类设置为RECMS</p><pre class="oac_no_warn" dir="ltr">OCISessionPoolCreate（envhp，errhp，spoolhp，＆poolName，＆poolNameLen，“HRDB”，strlen（“HRDB”），0,10,1，“HR”，strlen（“HR”），“HR”，strlen（“HR”） ，OCI_SPC_HOMOGENEOUS）; OCIAttrSet（authInfop，OCI_HTYPE_AUTHINFO， <span class="bold">“RECMS”，strlen（“RECMS”），</span> <span class="bold">OCI_ATTR_CONNECTION_CLASS，</span> errhp）; OCISessionGet（envhp，errhp，＆svchp，authInfop，poolName，poolNameLen，NULL，0，NULL，NULL，NULL，OCI_SESSGET_SPOOL）;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADFNS501"></a><a id="ADFNS500"></a><div class="props_rev_3"><a id="GUID-95BE385D-ADCD-48ED-A801-B670EA3A956D" name="GUID-95BE385D-ADCD-48ED-A801-B670EA3A956D"></a><h5 id="ADFNS-GUID-95BE385D-ADCD-48ED-A801-B670EA3A956D" class="sect5">会话纯度和连接类默认值</h5>
                     <div>
                        <p><a href="performance-and-scalability.html#GUID-95BE385D-ADCD-48ED-A801-B670EA3A956D__CACCIJFF" title="数据库驻留连接池的会话纯度和连接类默认值。">表3-5</a>显示了OCI应用程序从OCI会话池（使用<code class="codeph">OCISessionGet()</code> ）和其他来源获取的连接的属性和设置的默认值。
                        </p>
                        <div class="tblformalwide" id="GUID-95BE385D-ADCD-48ED-A801-B670EA3A956D__CACCIJFF">
                           <p class="titleintable">表3-5会话纯度和连接类默认值</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="会话纯度和连接类默认值" width="100%" border="1" summary="Session purity and connection class defaults for Database Resident Connection Pooling." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d10075e9439">属性或设置</th>
                                    <th align="left" valign="bottom" width="35%" id="d10075e9442">来自OCI会话池的连接的默认值</th>
                                    <th align="left" valign="bottom" width="35%" id="d10075e9445">连接的默认值不是来自OCI会话池</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d10075e9450" headers="d10075e9439 ">
                                       <p><code class="codeph">OCI_ATTR_PURITY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d10075e9450 d10075e9442 ">
                                       <p><code class="codeph">OCI_ATTR_PURITY_SELF</code></p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d10075e9450 d10075e9445 ">
                                       <p><code class="codeph">OCI_ATTR_PURITY_NEW</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d10075e9463" headers="d10075e9439 ">
                                       <p><code class="codeph">OCI_ATTR_CONNECTION_CLASS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d10075e9463 d10075e9442 ">
                                       <p>OCI为每个客户端会话池生成的全局唯一名称，用作OCI会话池中所有连接的默认连接类</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d10075e9463 d10075e9445 ">
                                       <p><code class="codeph">共享</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d10075e9475" headers="d10075e9439 ">
                                       <p>会议由......分享</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d10075e9475 d10075e9442 ">
                                       <p>从OCI会话池请求会话的线程</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d10075e9475 d10075e9445 ">
                                       <p>与具有<code class="codeph">SHARED</code>连接类的特定数据库的连接</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="ADFNS502"></a><div class="props_rev_3"><a id="GUID-FFDF247E-893A-48E2-88EB-8C2963A25F35" name="GUID-FFDF247E-893A-48E2-88EB-8C2963A25F35"></a><h4 id="ADFNS-GUID-FFDF247E-893A-48E2-88EB-8C2963A25F35" class="sect4">启动数据库驻留连接池</h4>
                  <div>
                     <div class="section">
                        <p>DBA必须以<code class="codeph">SYSDBA</code>身份登录并使用默认设置<code class="codeph">DBMS_CONNECTION_POOL.START_POOL</code>启动默认池<code class="codeph">SYS_DEFAULT_CONNECTION_POOL</code> 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-FFDF247E-893A-48E2-88EB-8C2963A25F35__FORDETAILEDINFORMATIONABOUTCONFIGUR-C4DB0E23">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关配置池的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN12347" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS1342"></a><a id="ADFNS505"></a><a id="ADFNS503"></a><div class="props_rev_3"><a id="GUID-9A4AA54E-68F8-49C2-BF20-616BCDA5F4F2" name="GUID-9A4AA54E-68F8-49C2-BF20-616BCDA5F4F2"></a><h4 id="ADFNS-GUID-9A4AA54E-68F8-49C2-BF20-616BCDA5F4F2" class="sect4">启用DRCP</h4>
                  <div>
                     <div class="section">
                        <p>要在应用程序中启用DRCP，请在TNS连接字符串中指定Easy Connect字符串中的<code class="codeph">:POOLED</code> （如<a href="performance-and-scalability.html#GUID-9A4AA54E-68F8-49C2-BF20-616BCDA5F4F2__CACJBFAG">示例3-4中所示</a> ）或<code class="codeph">(SERVER=POOLED)</code> （如<a href="performance-and-scalability.html#GUID-9A4AA54E-68F8-49C2-BF20-616BCDA5F4F2__CACEGJCH">示例3-5中所示</a> ）。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9A4AA54E-68F8-49C2-BF20-616BCDA5F4F2__CACJBFAG">
                        <p class="titleinexample">示例3-4启用DRCP：Easy连接字符串中的POOLED</p><pre class="oac_no_warn" dir="ltr">oraclehost.company.com:1521/books.company.com:POOLED</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-9A4AA54E-68F8-49C2-BF20-616BCDA5F4F2__CACEGJCH">
                        <p class="titleinexample">示例3-5在TNS连接字符串中使用SERVER = POOLED启用DRCP</p><pre class="oac_no_warn" dir="ltr">BOOKSDB =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = oraclehost.company.com）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = books.company.com）（SERVER = POOLED）））</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS506"></a><div class="props_rev_3"><a id="GUID-661BB906-74D2-4C5D-9C7E-2798F76501B3" name="GUID-661BB906-74D2-4C5D-9C7E-2798F76501B3"></a><h4 id="ADFNS-GUID-661BB906-74D2-4C5D-9C7E-2798F76501B3" class="sect4">受益于OCI应用程序中DRCP的可扩展性</h4>
                  <div>
                     <p>考虑以下OCI应用场景以及它们如何从DRCP中受益：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>应用程序既不使用OCI会话池也不指定连接类或纯度设置（或指定<code class="codeph">PURITY=NEW</code> ）。
                           </p>
                           <p>应用程序从DRCP获取新会话。当应用程序返回到池的连接时，默认情况下不会与同一应用程序的其他实例共享会话。因此，池服务器在客户端会话的生命周期内仍然分配给客户端。（SQL * Plus是不使用OCI会话池的客户端示例。SQL * Plus即使在空闲时也能保持连接。）</p>
                           <p>该应用程序受益于重用现有的池化服务器。</p>
                        </li>
                        <li>
                           <p>应用程序在OCI会话池外部调用<code class="codeph">OCISessionGet()</code> ，或指定连接类和<code class="codeph">PURITY=SELF</code> 。</p>
                           <p>应用程序可以重用DRCP池服务器和会话。但是，在<code class="codeph">OCISessionRelease()</code>调用之后，OCI终止与连接代理的连接。在下一个<code class="codeph">OCISessionGet()</code>调用中，应用程序重新连接到代理，然后DRCP分配属于指定连接类的池服务器（和会话）。重新连接会产生连接建立和重新认证的成本。
                           </p>
                           <p>应用程序可以更好地共享DRCP资源（进程和会话），但不会从缓存与连接代理的连接中受益。</p>
                        </li>
                        <li>
                           <p>应用程序使用OCI会话池API，指定连接类，并指定<code class="codeph">PURITY=SELF</code> 。</p>
                           <p>该应用程序使用所有DRCP功能，重用池化服务器和关联的会话，并从连接代理的缓存连接中受益。缓存连接不会在<code class="codeph">OCISessionGet()</code>调用上产生重新认证的成本。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-661BB906-74D2-4C5D-9C7E-2798F76501B3__GUID-5C1D2979-7014-4CDF-8CB0-D73861671417">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17124" target="_blank"><code class="codeph">OCISessionPoolCreate（）</code></a></p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17123" target="_blank"><code class="codeph">OCISessionGet（）</code></a></p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17126" target="_blank"><code class="codeph">OCISessionRelease（）</code></a></p>
                        <p> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI17125" target="_blank"><code class="codeph">OCISessionPoolDestroy（）</code></a></p>
                     </div>
                  </div>
               </div><a id="ADFNS1428"></a><div class="props_rev_3"><a id="GUID-836F7840-EAB4-4BCD-82AC-22D82AC89404" name="GUID-836F7840-EAB4-4BCD-82AC-22D82AC89404"></a><h4 id="ADFNS-GUID-836F7840-EAB4-4BCD-82AC-22D82AC89404" class="sect4">受益于Java应用程序中DRCP的可伸缩性</h4>
                  <div>
                     <p>使用通用连接池（UCP）或使用ConnectionPoolDataSource作为连接工厂的客户可以通过仅更改配置（而不是代码）来升级到使用DRCP。</p>
                     <div class="infoboxnotealso" id="GUID-836F7840-EAB4-4BCD-82AC-22D82AC89404__GUID-0F6F2F29-F247-48AA-A238-32C139D35286">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performance-and-scalability.html#GUID-661BB906-74D2-4C5D-9C7E-2798F76501B3">受益于OCI应用程序中DRCP的可伸缩性，</a>以获取有关Java应用程序如何从DRCP作为OCI应用程序受益的更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS508"></a><a id="ADFNS509"></a><a id="ADFNS510"></a><a id="ADFNS507"></a><div class="props_rev_3"><a id="GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5" name="GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5"></a><h4 id="ADFNS-GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5" class="sect4">使用DRCP的最佳实践</h4>
                  <div>
                     <div class="section">
                        <p>设计可以从DRCP的全部功能中受益的应用程序的步骤与使用OCI会话池的应用程序的步骤非常相似。</p>
                        <p>唯一的附加步骤是，为了获得最佳性能，当部署为使用DRCP运行时，应用程序必须明确指定连接类。</p>
                        <p>同一应用程序的多个实例必须指定相同的连接类，以获得最佳性能和增强的DRCP资源共享。确保应用程序的不同实例可以共享数据库会话。</p>
                        <p><a href="performance-and-scalability.html#GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5__CACFIIIJ">例3-6</a>显示了DRCP应用程序。
                        </p>
                        <div class="infoboxnotealso" id="GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5__GUID-BF3D6FEA-C35F-499B-9703-5BE4BB3051F3">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI16617" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5__CACFIIIJ">
                        <p class="titleinexample">例3-6 DRCP应用程序</p><pre class="oac_no_warn" dir="ltr">/ *假设分配了所有必要的句柄。* / / *此中间层使用单个数据库用户。创建一个同类的客户端会话池* / OCISessionPoolCreate（envhp，errhp，spoolhp，＆poolName，＆poolNameLen，“BOOKSDB”，strlen（“BOOKSDB”），0,10,1，“SCOTT”，strlen（“SCOTT”）， “ <span class="italic">password</span> ”，strlen（“ <span class="italic">password</span> ”），OCI_SPC_HOMOGENEOUS）; while（1）{/ *处理客户端请求* / WaitForClientRequest（）; / *应用程序函数* / / *在OCIAuthInfo句柄中设置连接类，该句柄作为参数传递给OCISessionGet * / OCIAttrSet（authInfop，OCI_HTYPE_AUTHINFO，“BOOKSTORE”，strlen（“BOOKSTORE”），OCI_ATTR_CONNECTION_CLASS，errhp）; / *不需要设置纯度，默认为OCISessionPool连接的OCI_ATTR_PURITY_SELF * / / *您可以获得由中间层2 * / OCISessionGet发布的SCOTT会话（envhp，errhp，＆svchp，authInfop，poolName，poolNameLen，NULL，0 ，NULL，NULL，NULL，OCI_SESSGET_SPOOL）; / *使用上面获得的svchp进行数据库调用* / OCIStmtExecute（...）/ *这将释放数据库上的池化服务器以供重用* / OCISessionRelease（svchp，errhp，NULL，0，OCI_DEFAULT）; } / *中间层已完成 - 退出* / OCISessionPoolDestroy（spoolhp，errhp，OCI_DEFAULT）;</pre><p><a href="performance-and-scalability.html#GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5__CACBDIHE">示例3-7</a>和<a href="performance-and-scalability.html#GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5__CACJJGAB">示例3-8</a>显示了在<a href="performance-and-scalability.html#GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5__CACFIIIJ">示例3-6中</a>为<code class="codeph">BOOKSTORE</code>应用程序提供服务的10个中间层主机中部署代码的连接字符串。
                        </p>
                        <p>在<a href="performance-and-scalability.html#GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5__CACBDIHE">示例3-7中</a> ，假设数据库是专用服务器模式下的Oracle Database 12 <span class="italic">c</span> （或更早版本），未启用DRCP且客户端具有12个<span class="italic">c</span>库。应用程序从数据库获取专用服务器连接。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5__CACBDIHE">
                        <p class="titleinexample">示例3-7在没有DRCP的专用服务器模式下连接字符串以进行部署</p><pre class="oac_no_warn" dir="ltr">BOOKSDB =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = oraclehost.company.com）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = books.company.com）））</pre><p>在<a href="performance-and-scalability.html#GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5__CACJJGAB">实施例3-8</a>中，假定DRCP是Oracle数据库<span class="italic">12c的</span>数据库上启用。所有中间层流程都可以从DRCP的池化功能中受益。 DRCP的数据库资源要求远低于专用服务器模式。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-54F02FBA-36BD-4644-B2B5-9C16A730EFB5__CACJJGAB">
                        <p class="titleinexample">示例3-8使用DRCP连接字符串以进行部署</p><pre class="oac_no_warn" dir="ltr">BOOKSDB =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = oraclehost.company.com）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = books.company.com）（SERVER = POOLED）））</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS511"></a><div class="props_rev_3"><a id="GUID-EB60065E-3E36-4226-8B97-EF4779D61DA5" name="GUID-EB60065E-3E36-4226-8B97-EF4779D61DA5"></a><h4 id="ADFNS-GUID-EB60065E-3E36-4226-8B97-EF4779D61DA5" class="sect4">兼容性和迁移</h4>
                  <div>
                     <p>与Oracle Database 12 <span class="italic">c</span>客户端库链接的OCI应用程序可以通过以下方式保持不变：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>禁用DRCP的Oracle Database 12 <span class="italic">c</span>数据库</p>
                        </li>
                        <li>
                           <p>来自早于Oracle Database 12 <span class="italic">c</span>的发行版的数据库服务器</p>
                        </li>
                        <li>
                           <p>与DRCP Oracle数据库<span class="italic">12c的</span>数据库服务器启用，当与DRCP部署连接字符串</p>
                        </li>
                     </ul>
                     <p>合适的客户端受益于DRCP提供的增强的可伸缩性，如果它们被适当地修改以使用具有先前描述的连接类和纯度设置的OCI会话池API。</p>
                     <div class="infoboxnotealso" id="GUID-EB60065E-3E36-4226-8B97-EF4779D61DA5__GUID-92974C88-3A2B-4903-8FDC-A1FF904A8135">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关Oracle JDBC驱动程序支持DRCP的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC29023" target="_blank"><span class="italic">“Oracle数据库JDBC开发人员指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS512"></a><div class="props_rev_3"><a id="GUID-37504E6D-B64F-4EF1-BD7E-335F51F2CE73" name="GUID-37504E6D-B64F-4EF1-BD7E-335F51F2CE73"></a><h4 id="ADFNS-GUID-37504E6D-B64F-4EF1-BD7E-335F51F2CE73" class="sect4">DRCP限制</h4>
                  <div>
                     <p>使用池服务器无法执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>关闭数据库</p>
                        </li>
                        <li>
                           <p>停止DRCP</p>
                        </li>
                        <li>
                           <p>更改已连接用户的密码</p>
                        </li>
                        <li>
                           <p>使用共享数据库链接连接到不同实例上的DRCP</p>
                        </li>
                        <li>
                           <p>在TCPS中使用高级安全选项（ASO）</p>
                        </li>
                        <li>
                           <p>将企业用户安全性与DRCP结合使用</p>
                        </li>
                        <li>
                           <p>在服务器端使用可迁移会话，直接（使用<code class="codeph">OCI_MIGRATE</code>选项）或间接（调用<code class="codeph">OCISessionPoolCreate()</code> ）</p>
                        </li>
                        <li>
                           <p>使用初始客户角色</p>
                        </li>
                        <li>
                           <p>使用应用程序上下文属性（例如<code class="codeph">OCI_ATTR_APPCTX_NAME</code>和<code class="codeph">OCI_ATTR_APPCTX_VALUE</code> ）</p>
                        </li>
                     </ul>
                     <p>在运行DDL语句之前创建的会话可以在运行DDL语句后分配给客户端。因此，在运行影响池中数据库用户的DDL语句时要小心。例如，在删除用户之前，请确保池中没有该用户的会话，并且没有与该用户进行身份验证的代理的连接。</p>
                     <p>如果将启用了显式角色的会话释放到池中，则稍后可以将它们分配给需要默认登录角色的（同一用户的）连接。因此，避免使用显式角色释放会话;相反，终止它们。</p>
                     <div class="infoboxnote" id="GUID-37504E6D-B64F-4EF1-BD7E-335F51F2CE73__GUID-0E3B4626-175C-42AE-967B-1F591F4AA0F9">
                        <p class="notep1">注意：</p>
                        <p>您可以使用Oracle Advanced Security功能，例如加密和DRCP强身份验证。</p>
                     </div>
                     <p>用户可以混合数据加密/数据完整性组合。但是，用户必须使用连接类来隔离每个这样的组合。例如，如果用户应用程序必须将AES256指定为一组连接的加密机制，而将DES指定为另一组连接，则应用程序必须为每个集合指定不同的连接类。</p>
                  </div>
               </div><a id="ADFNS513"></a><div class="props_rev_3"><a id="GUID-C3C1C26F-3B79-454A-A3AF-D25AAB0F28FE" name="GUID-C3C1C26F-3B79-454A-A3AF-D25AAB0F28FE"></a><h4 id="ADFNS-GUID-C3C1C26F-3B79-454A-A3AF-D25AAB0F28FE" class="sect4">将DRCP与自定义池一起使用</h4>
                  <div>
                     <div class="section">
                        <p>Oracle强烈建议使用已与DRCP，FAN和RLB集成的OCI会话池。但是，如果满足以下任一条件，则不使用OCI会话池的应用程序仍可以使用DRCP：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>该应用程序是使用自己的自定义连接池构建的。</p>
                           </li>
                           <li>
                              <p>应用程序不使用池，但具有不使用其会话的时间段（因此可以将其释放到池中）并且不依赖于返回相同的会话</p>
                           </li>
                        </ul>
                        <p>要将DRCP与此类应用程序一起使用，会话必须是有状态的;也就是说，会话必须具有<code class="codeph">OCI_ATTR_SESSION_STATE</code>属性。当应用程序处于有状态且启用DRCP时，OCI会透明地从DRCP池中为其分配适当的会话。如果应用程序是无状态的（具有<code class="codeph">OCI_SESSION_STATELESS</code>属性）并且启用了DRCP，则OCI将会话透明地返回到DRCP池。
                        </p>
                        <p>应用程序必须尽快识别会话状态，以便有效利用底层数据库资源。</p>
                        <div class="infoboxnote" id="GUID-C3C1C26F-3B79-454A-A3AF-D25AAB0F28FE__GUID-2C6A3FEE-9CDA-4D4C-8647-0AA232681701">
                           <p class="notep1">注意：</p>
                           <p>指定属性<code class="codeph">OCI_ATTR_SESSION_STATE</code>或<code class="codeph">OCI_SESSION_STATELESS</code>的应用程序还必须指定会话纯度和连接类。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-C3C1C26F-3B79-454A-A3AF-D25AAB0F28FE__GUID-F7EE3F7C-7E51-436A-824F-C5280DDD4167">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">OCI_ATTR_SESSION_STATE</code>和<code class="codeph">OCI_SESSION_STATELESS</code>详细信息，可以使用<a href="performance-and-scalability.html#GUID-4D0F5126-061C-4A46-BDAB-ED40F13E8B06" title="您可以使用OCISessionPoolCreate API将连接类设置为HRMS。您可以使用OCISessionPoolCreate API创建连接类作为RECMS。">会话纯度和连接类</a> 
                                 </p>
                              </li>
                              <li>
                                 <p>有关会话状态的更多信息，请<a href="performance-and-scalability.html#GUID-4E0EC973-0E3A-4654-A52E-156CDCCB74E3">明确标记会话状态或无</a>状态</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">OCI_ATTR_SESSION_STATE</code>属性的详细信息，请<code class="codeph">OCI_ATTR_SESSION_STATE</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI72659" target="_blank"><span class="italic">“Oracle调用接口程序员指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS1446"></a><a id="ADFNS72659"></a><div class="props_rev_3"><a id="GUID-4E0EC973-0E3A-4654-A52E-156CDCCB74E3" name="GUID-4E0EC973-0E3A-4654-A52E-156CDCCB74E3"></a><h4 id="ADFNS-GUID-4E0EC973-0E3A-4654-A52E-156CDCCB74E3" class="sect4">明确标记会话状态或无状态</h4>
                  <div>
                     <p>应用程序通常在工作单元的持续时间内需要特定的数据库会话。在此期间，会话是<span class="bold">有状态的</span> 。在此持续时间之后，如果应用程序不依赖于保留后续工作单元的特定会话，则会话是<span class="bold">无状态的</span> 。
                     </p>
                     <p>当应用程序或调用者检测到会话从有状态转换为无状态或反向时，应用程序可以使用<code class="codeph">OCI_ATTR_SESSION_STATE</code>或<code class="codeph">OCI_SESSION_STATELESS</code>属性显式通知OCI转换。此信息允许OCI和Oracle数据库透明地执行可伸缩性优化，例如将应用程序未使用的会话重新分配给其他人，然后在必要时为应用程序分配新会话。
                     </p>
                     <div class="infoboxnotealso" id="GUID-4E0EC973-0E3A-4654-A52E-156CDCCB74E3__GUID-3D5C5706-11C5-417B-972D-F7C147D57503">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="performance-and-scalability.html#GUID-C3C1C26F-3B79-454A-A3AF-D25AAB0F28FE">将DRCP与自定义池一起使用</a></p>
                     </div>
                     <p><a href="performance-and-scalability.html#GUID-4E0EC973-0E3A-4654-A52E-156CDCCB74E3__CACIEBBB">例3-9</a>显示了一个明确标记会话状态的代码片段。
                     </p>
                     <div class="example" id="GUID-4E0EC973-0E3A-4654-A52E-156CDCCB74E3__CACIEBBB">
                        <p class="titleinexample">示例3-9明确标记会话状态或无状态</p><pre class="pre codeblock"><code>wait_for_transaction_request（）;做{ub1 state; / *将数据库会话标记为STATEFUL * / state = OCI_SESSION_STATEFUL; checkerr（errhp，OCIAttrSet（usrhp，OCI_HTYPE_SESSION，＆state，0，OCI_ATTR_SESSION_STATE，errhp））; / *做数据库工作，包括对数据库的一个或多个相关调用* / .../ *完成数据库工作，将会话标记为无状态* / state = OCI_SESSION_STATELESS; checkerr（errhp，OCIAttrSet（usrhp，OCI_HTYPE_SESSION，＆state，0，OCI_ATTR_SESSION_STATE，errhp））; wait_for_transaction_request（）; } while（not _done）;</code></pre><p>从OCI会话池外部获取的会话标记为<code class="codeph">OCI_SESSION_STATEFUL</code>并保持<code class="codeph">OCI_SESSION_STATEFUL</code>除非应用程序明确标记为<code class="codeph">OCI_SESSION_STATELESS</code> 。</p>
                        <p>默认情况下，在该会话上启动第一个呼叫时，从OCI会话池获取的会话标记为<code class="codeph">OCI_SESSION_STATEFUL</code> 。会话释放到池时，默认情况下标记为<code class="codeph">OCI_SESSION_STATELESS</code> 。因此，在使用OCI会话池时，无需将会话显式标记为有状态或无状态。
                        </p>
                        <div class="infoboxnotealso" id="GUID-4E0EC973-0E3A-4654-A52E-156CDCCB74E3__GUID-9A139A70-4822-4AC0-80C0-95717362E490">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">OCI_ATTR_SESSION_STATE</code>详细信息，请<code class="codeph">OCI_ATTR_SESSION_STATE</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI72873" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> 
                           </p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS1429"></a><div class="props_rev_3"><a id="GUID-A96FA454-6182-498F-B94D-EC4F7D0858AD" name="GUID-A96FA454-6182-498F-B94D-EC4F7D0858AD"></a><h4 id="ADFNS-GUID-A96FA454-6182-498F-B94D-EC4F7D0858AD" class="sect4">将DRCP与Oracle Real Application Clusters一起使用</h4>
                  <div>
                     <p>Oracle Real Application Clusters（Oracle RAC）是一个数据库选项，其中单个数据库由多个节点上的多个实例托管。在Oracle RAC环境中的数据库中配置DRCP时，池配置将应用于每个数据库实例。在一个实例上启动或停止池会在所有实例上启动或停止池。</p>
                  </div>
               </div><a id="ADFNS1430"></a><div class="props_rev_3"><a id="GUID-D4A5051F-BFCC-470B-A219-C8072BFA33F0" name="GUID-D4A5051F-BFCC-470B-A219-C8072BFA33F0"></a><h4 id="ADFNS-GUID-D4A5051F-BFCC-470B-A219-C8072BFA33F0" class="sect4">将DRCP与可插拔数据库一起使用</h4>
                  <div>
                     <p>多租户容器数据库（CDB）中的DRCP在根容器中配置和管理。连接到根容器时，可以配置，启动和停止池。池使用不同的服务名称维护客户端连接到的不同可插拔数据库的池化服务器。</p>
                  </div>
               </div><a id="ADFNS1431"></a><div class="props_rev_3"><a id="GUID-E97AEC94-1A4D-4D83-A1D8-3EED0413437C" name="GUID-E97AEC94-1A4D-4D83-A1D8-3EED0413437C"></a><h4 id="ADFNS-GUID-E97AEC94-1A4D-4D83-A1D8-3EED0413437C" class="sect4">DRCP与Data Guard</h4>
                  <div>
                     <p>在Data Guard环境中操作DRCP时：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在物理备用数据库上：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>仅当池在主数据库上运行时，才能启动池。</p>
                              </li>
                              <li>
                                 <p>仅当池在主数据库上停止时，才能停止池。</p>
                              </li>
                              <li>
                                 <p>您无法配置，还原为默认值或更改池参数。</p>
                              </li>
                           </ul>
                           <p>如果物理备用数据库成为主数据库，则上述限制将停止应用于物理备用数据库。</p>
                        </li>
                        <li>
                           <p>在逻辑备用数据库上，允许所有池操作。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-18D1F761-0312-48E8-BE6A-0ED17AEDC12E" name="GUID-18D1F761-0312-48E8-BE6A-0ED17AEDC12E"></a><h3 id="ADFNS-GUID-18D1F761-0312-48E8-BE6A-0ED17AEDC12E" class="sect3">Memoptimize Pool</h3>
               <div>
                  <p>此池优化select语句的读取操作</p>
                  <p>Memoptimize Rowstore对使用<code class="codeph">MEMOPTIMIZE FOR READ</code>子句指定的表执行高性能读取。
                  </p>
                  <div class="p">
                     <div class="infoboxnote" id="GUID-18D1F761-0312-48E8-BE6A-0ED17AEDC12E__GUID-AC28AF5F-0538-46EF-8230-0CF0E10691D3">
                        <p class="notep1">注意：</p>延迟插入无法回滚，因为它们不使用标准锁定和重做机制</div> 
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT-GUID-D58DC90F-0ABB-4B1E-96C1-6094A04A5E12" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS-GUID-49F0E799-97F0-41E7-9CD3-24AE3CAA8105" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF-GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN-GUID-D33BB2FE-94A7-475F-B8C8-CC9AC61B502F" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-F722C73B-2CB0-4876-B699-B68DA6C08CBE" name="GUID-F722C73B-2CB0-4876-B699-B68DA6C08CBE"></a><h3 id="ADFNS-GUID-F722C73B-2CB0-4876-B699-B68DA6C08CBE" class="sect3">Oracle RAC Sharding</h3>
               <div>
                  <p>本节介绍有关Oracle RAC Sharding的信息</p>
                  <p>Oracle RAC Sharding以最少的应用程序更改提高了Oracle RAC数据库的性能和可伸缩性。它将表分区与Oracle RAC实例关联，并将数据库请求路由，这些请求为逻辑上保存相应分区的实例指定分区键。这提供了更好的缓存利用率并减少了跨实例的块ping。分区键只能添加到性能最关键的请求中。未指定密钥的请求将以透明方式工作，并且可以路由到任何实例。可以通过执行<code class="codeph">ALTER SYSTEM</code>命令并且无需修改数据库模式和SQL语句来启用此功能。
                  </p>
                  <div class="p">
                     <div class="infoboxnote" id="GUID-F722C73B-2CB0-4876-B699-B68DA6C08CBE__THEPARTITIONINGKEYVALUEMUSTBEPROVID-4AC2F4E8">
                        <p class="notep1">注意：</p>请求数据库连接时，必须提供分区键值。
                     </div>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=NETAG-GUID-5EC77A57-1DD5-49E7-85E6-5ABE57B18803" target="_blank"><span><cite>Oracle数据库网络服务管理员指南</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI-GUID-CEDBD404-E18E-4CCF-88D1-F13DB20EDA9A" target="_blank"><span><cite>Oracle调用接口程序员指南</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJUCP-GUID-3B91E8F7-AE45-4CC8-B87F-6F4FC9EEA001" target="_blank"><span><cite>Oracle通用连接池开发人员指南</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ODPNT-GUID-D42183C2-3C84-443E-9A92-93EF764D5770" target="_blank"><span><cite>适用于Microsoft Windows的Oracle数据提供程序开发人员指南</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=RACAD-GUID-1100990E-18BD-4C92-A0C7-3C08C40AAD14" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT-GUID-3B87285B-F156-4CDA-87F7-BF4FC0E2EE5E" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN-GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
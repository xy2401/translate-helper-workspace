<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>企业用户安全入门</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Enterprise User Security Administrator&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Enterprise User Security Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="enterprise-user-security-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:14:01-08:00"></meta>
      <meta name="dcterms.title" content="Enterprise User Security Administrator&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2000, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96086-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introducing-enterprise-user-security.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configuration-and-administration-tools-overview.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="DBIMI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introducing-enterprise-user-security.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configuration-and-administration-tools-overview.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">企业用户安全管理员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">企业用户安全入门</li>
            </ol>
            <a id="GUID-F141E5DA-B824-4258-9FA8-67AB19D84C11" name="GUID-F141E5DA-B824-4258-9FA8-67AB19D84C11"></a><a id="DBIMI234"></a>
            
            <h2 id="DBIMI-GUID-F141E5DA-B824-4258-9FA8-67AB19D84C11" class="sect2"><span class="enumeration_chapter">2</span>企业用户安全入门</h2>
         </header>
         <div class="ind">
            <div>
               <p>Enterprise User Security使您可以集中管理整个企业中的数据库用户。企业用户在Oracle Internet Directory中创建，可以在向目录注册的各种企业数据库中分配角色和权限。</p>
               <div class="p">本章使用教程方法来帮助您开始使用Enterprise User Security。以下步骤讨论配置企业用户安全性：<ol>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1">配置数据库以使用目录</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77">使用目录注册数据库</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC">在数据库中创建共享架构</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4">将企业用户映射到共享架构</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F">以企业用户身份连接到数据库</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-86219ABB-1E28-4206-A847-F9366A679785">使用企业角色</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D">使用代理权限</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-ECF44B7C-610F-49FC-9865-ED9BAA0DF22C">使用可插拔数据库</a></p>
                     </li>
                  </ol>
               </div>
            </div><a id="DBIMI565"></a><a id="DBIMI235"></a><div class="props_rev_3"><a id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1" name="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1"></a><h3 id="DBIMI-GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1" class="sect3">配置数据库以使用目录</h3>
               <div>
                  <div class="section">
                     <p>配置企业用户安全性的第一步是配置数据库以使用该目录。通过运行Net Configuration Assistant（NetCA）工具，您可以配置数据库应使用的目录主机名和端口。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1__GUID-2C79BA38-8CDB-4414-9A55-B360C8D6812C">要配置数据库以使用目录：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>使用<code class="codeph">netca</code>命令启动NetCA。</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在Windows上，您还可以从“开始”菜单启动NetCA：</p>
                                 <p>单击<span class="bold">开始，所有程序，Oracle  -</span> <span class="italic"><span class="bold">OracleHomeName</span></span> ， <span class="bold">配置和迁移工具，Net Configuration Assistant。</span></p>
                              </li>
                              <li>
                                 <p>在Unix系统上，您可以使用以下命令启动NetCA：</p>
                                 <p><span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">/bin/netca</code> 
                                 </p>
                              </li>
                           </ul>
                           <p>出现欢迎屏幕。</p>
                           <div class="figure" id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1__GUID-05F09E34-8A9F-448B-9D55-8FCE66A74B48"><img src="img/netca1.gif" width="523" alt="netca1.gif的描述如下" title="netca1.gif的描述如下" longdesc="img_text/netca1.html"><br><a href="img_text/netca1.html">netca1.gif插图的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>选择<span class="bold">目录使用配置</span> 。单击<span class="bold">下一步</span> 。</span><div>
                           <p>将出现“目录类型”屏幕。</p>
                           <div class="figure" id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1__GUID-950513B4-465E-4BAD-A0F2-580BF1F0080D"><img src="img/netca2.gif" width="523" alt="netca2.gif的描述如下" title="netca2.gif的描述如下" longdesc="img_text/netca2.html"><br><a href="img_text/netca2.html">netca2.gif插图的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>单击<span class="bold">下一步</span> 。</span><div>
                           <p>出现“目录位置”屏幕。</p>
                           <div class="figure" id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1__GUID-0B9ADC9B-65E9-4AF1-B31D-334D46944E1A"><img src="img/netca3.gif" width="523" alt="netca3.gif的描述如下" title="netca3.gif的描述如下" longdesc="img_text/netca3.html"><br><a href="img_text/netca3.html">netca3.gif插图的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>输入运行Oracle Internet Directory服务器的主机的名称。同时输入LDAP非SSL和SSL端口号。默认情况下，这些端口号为3060和3131。点击下一步。</span><div>
                           <p>将出现“选择Oracle上下文”屏幕。</p>
                           <div class="figure" id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1__GUID-9EA4FA0C-5DC0-408A-8EDB-2ED4D23D20B6"><img src="img/netca4.gif" width="523" alt="netca4.gif的描述如下" title="netca4.gif的描述如下" longdesc="img_text/netca4.html"><br><a href="img_text/netca4.html">netca4.gif插图的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>选择要使用的默认Oracle上下文。如果目录服务器上有多个身份管理域，则需要选择此项。单击<span class="bold">下一步</span> 。</span><div>
                           <p>将显示“目录使用配置，完成”屏幕。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>确认目录使用配置已成功完成。单击<span class="bold">下一步</span> 。</span></li>
                     <li class="stepexpand"><span>单击<span class="bold">完成</span> 。</span><div>
                           <p>NetCA在<span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">/network/admin</code>目录中创建一个<code class="codeph">ldap.ora</code>文件。这是Windows中的<span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">\network\admin</code>目录。<code class="codeph">ldap.ora</code>文件存储有关目录的连接信息详细信息。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="DBIMI566"></a><a id="DBIMI236"></a><div class="props_rev_3"><a id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77" name="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77"></a><h3 id="DBIMI-GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77" class="sect3">使用目录注册数据库</h3>
               <div>
                  <div class="section">
                     <p>下一步是使用目录服务注册数据库。Database Configuration Assistant（DBCA）工具使您可以使用Oracle Internet Directory注册数据库。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77__GUID-3C81A92C-2832-4860-92CD-711AC3E0288A">要使用以下目录注册数据库：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>使用<code class="codeph">dbca</code>命令启动DBCA。</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在Windows上，您还可以从“开始”菜单启动DBCA：</p>
                                 <p>单击<span class="bold">开始，所有程序，Oracle  -</span> <span class="italic"><span class="bold">OracleHomeName</span></span> ， <span class="bold">配置和迁移工具，数据库配置助手。</span></p>
                              </li>
                              <li>
                                 <p>在Unix系统上，您可以使用以下命令启动DBCA：</p>
                                 <p><span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">/bin/dbca</code> 
                                 </p>
                              </li>
                           </ul>
                           <p>出现欢迎屏幕。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>单击<span class="bold">下一步</span> 。</span><div>
                           <p>将显示“操作”屏幕。</p>
                           <div class="figure" id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77__GUID-95386736-9970-4E60-A37E-50237BE1AF26"><img src="img/dbca2.gif" alt="下面是dbca2.gif的描述" title="下面是dbca2.gif的描述" longdesc="img_text/dbca2.html"><br><a href="img_text/dbca2.html">说明dbca2.gif的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>选择<span class="bold">配置数据库选项</span> 。单击<span class="bold">下一步</span> 。</span><div>
                           <p>出现数据库屏幕。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>选择要配置的数据库名称。如果不使用操作系统身份验证，可能还会要求您输入<code class="codeph">SYS</code>用户凭据。单击<span class="bold">下一步</span> 。</span><div>
                           <p>出现“管理选项”屏幕。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>选择管理选项，然后单击“ <span class="bold">下一步”</span> 。</span><div>
                           <p>出现“安全设置”屏幕。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>选择<span class="bold">保留增强的12c默认安全设置</span>以保留Oracle Database 12 <span class="italic">c</span>安全设置。单击<span class="bold">下一步</span> 。</span><div>
                           <p>出现“网络配置”屏幕。</p>
                           <div class="figure" id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77__GUID-860469C2-8CE3-4F85-8E4E-97E3C2F93096"><img src="img/dbca6.gif" alt="下面是dbca6.gif的描述" title="下面是dbca6.gif的描述" longdesc="img_text/dbca6.html"><br><a href="img_text/dbca6.html">说明dbca6.gif的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>选择<span class="bold">是，注册数据库</span>以使用目录注册数据库。输入有权在Oracle Internet Directory中注册数据库的用户的可分辨名称（DN）。另外，输入目录用户的密码。输入钱包密码。在“ <span class="bold">确认密码”</span>字段中重新输入密码。单击<span class="bold">下一步</span> 。</span><div>
                           <div class="infoboxnote" id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77__GUID-D0E6D7ED-2695-48EC-B22C-E8BA9C69DE93">
                              <p class="notep1">注意：</p>
                              <p>数据库使用随机生成的密码登录目录。此数据库密码存储在Oracle钱包中。钱包还可用于存储SSL连接所需的证书。</p>
                              <p>您指定的钱包密码与数据库密码不同。钱包密码用于保护钱包。</p>
                           </div>
                           <p>出现“ <span class="bold">数据库组件”</span>屏幕。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>单击<span class="bold">下一步</span> 。</span><div>
                           <p>将出现“ <span class="bold">连接模式”</span>页面。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>选择<span class="bold">专用服务器模式</span>或<span class="bold">共享服务器模式</span> 。单击<span class="bold">完成</span> 。</span><div>
                           <p>出现“ <span class="bold">确认”</span>对话框。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span></li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77__GUID-E9F2538A-3675-4A42-B673-10B00A49EBE1">
                        <p class="notep1">注意：</p>
                        <p>使用目录注册数据库后，请确保为数据库钱包启用了自动登录。默认钱包在<span class="italic"><code class="codeph">$ORACLE_BASE</code></span> <code class="codeph">/admin/</code> <span class="italic"><code class="codeph">database_sid</code></span> <code class="codeph">/wallet</code>目录中创建。
                        </p>
                        <p>您可以通过检查wallet目录中是否存在<code class="codeph">cwallet.sso</code>文件来验证是否启用了钱包的自动登录。如果该文件不存在，您可以通过使用Oracle Wallet Manager打开钱包并使用该选项启用钱包的自动登录来启用自动登录。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBIMI567"></a><a id="DBIMI237"></a><div class="props_rev_3"><a id="GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC" name="GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC"></a><h3 id="DBIMI-GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC" class="sect3">在数据库中创建共享架构</h3>
               <div>
                  <div class="section">
                     <p>通过在数据库中创建共享模式，您可以将多个企业用户映射到同一模式。<a href="getting-started-with-enterprise-user-security.html#GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC__CBHGCHGH">示例2-1</a>创建了一个共享模式<code class="codeph">global_ident_schema_user</code> ，并向其授予<code class="codeph">CONNECT</code>角色。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC__CBHGCHGH">
                     <p class="titleinexample">示例2-1创建共享架构</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE USER global_ident_schema_user全局识别;用户创建。SQL&gt; GRANT CONNECT TO global_ident_schema_user;格兰特成功了。
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBIMI568"></a><a id="DBIMI238"></a><div class="props_rev_3"><a id="GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4" name="GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4"></a><h3 id="DBIMI-GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4" class="sect3">将企业用户映射到共享架构</h3>
               <div>
                  <div class="section">
                     <p>可以使用Enterprise Manager管理企业用户安全性。<a href="getting-started-with-enterprise-user-security.html#GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4__CBHJGBDH">示例2-2</a>将DN， <code class="codeph">cn=users, dc=us, dc=oracle, dc=com</code>映射到共享数据库模式<code class="codeph">global_ident_schema_user</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4__CBHJGBDH">
                     <p class="titleinexample">示例2-2将企业用户映射到共享架构</p>
                     <p>要创建用户架构映射：</p>
                     <ol>
                        <li>
                           <p>以管理用户身份登录Enterprise Manager Cloud Control。</p>
                        </li>
                        <li>
                           <p>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。
                           </p>
                        </li>
                        <li>
                           <p>单击出现的列表中的数据库名称。出现数据库页面。</p>
                        </li>
                        <li>
                           <p>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。
                           </p>
                           <div class="infoboxnotealso" id="GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4__GUID-E4AD6756-EAF0-4E01-9248-4FD022AB8591">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="getting-started-with-enterprise-user-security.html#GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77">使用目录注册数据库</a> ，特别是步骤6，您先前已输入用户DN和密码以使用目录服务注册数据库</p>
                           </div>
                           <p>将显示“企业用户安全性”页面</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">管理企业域”</span> 。
                           </p>
                           <p>将显示“管理企业域”页面。</p>
                        </li>
                        <li>
                           <p>选择包含数据库的企业域。单击<span class="bold">配置</span> 。
                           </p>
                           <p>将显示“配置域”页面。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">用户架构映射”</span>选项卡。将显示适用于企业域的所有用户架构映射。
                           </p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">创建”</span>
                           </p>
                           <p>系统弹出“创建映射”页面。</p>
                        </li>
                        <li>
                           <p>在“发件人”部分下，选择<span class="bold">“子树”</span> 。单击“搜索”图标。选择DN， <span class="bold">cn = Users，dc = us，dc = oracle，dc = com</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“收件人”部分下，在“ <span class="bold">架构”</span>字段中输入global_ident_schema_user。单击<span class="bold">继续</span> 。
                           </p>
                           <p>用户架构映射将添加到“配置域”页面中。</p>
                        </li>
                        <li>
                           <p>单击<span class="bold">确定</span> 。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBIMI569"></a><a id="DBIMI239"></a><div class="props_rev_3"><a id="GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F" name="GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F"></a><h3 id="DBIMI-GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F" class="sect3">以企业用户身份连接到数据库</h3>
               <div>
                  <div class="section">
                     <p>映射的Oracle Internet Directory子树中的所有用户现在都可以作为企业用户连接到数据库。<a href="getting-started-with-enterprise-user-security.html#GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F__CBHEDHGI">例2-3</a>显示了连接到数据库的<code class="codeph">cn=orcladmin, cn=users, dc=us,dc=oracle,dc=com</code>用户。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F__CBHEDHGI">
                     <p class="titleinexample">示例2-3以企业用户身份连接到数据库</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT orcladmin输入密码：已连接。
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBIMI570"></a><a id="DBIMI240"></a><div class="props_rev_3"><a id="GUID-86219ABB-1E28-4206-A847-F9366A679785" name="GUID-86219ABB-1E28-4206-A847-F9366A679785"></a><h3 id="DBIMI-GUID-86219ABB-1E28-4206-A847-F9366A679785" class="sect3">使用企业角色</h3>
               <div>
                  <div class="section">
                     <p>企业角色在目录中创建。企业角色包含来自作为企业域一部分的不同数据库的全局角色。企业角色用于为企业用户分配数据库权限。</p>
                     <p><a href="getting-started-with-enterprise-user-security.html#GUID-86219ABB-1E28-4206-A847-F9366A679785__CBHEAFJD">示例2-4</a>创建了两个企业用户Joe和Nina。这两个用户都是在子树中创建的， <code class="codeph">cn=Users, dc=us,dc=oracle,dc=com</code> ，它已映射到EUSDB数据库中的<code class="codeph">global_ident_schema_user</code> 。有关上一个子树示例中显示的LDAP属性类型的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/dbimi&amp;id=rfc4519_ldap_attr_types" target="_blank">RFC4519  - 轻量级目录访问协议（LDAP）：用户应用程序的架构</a> 。
                     </p>
                     <p>尼娜是一名人力资源经理。她需要EUSDB数据库中<code class="codeph">hr.employees</code>表的<code class="codeph">SELECT</code>权限。<a href="getting-started-with-enterprise-user-security.html#GUID-86219ABB-1E28-4206-A847-F9366A679785__CBHEAFJD">例2-4</a>使用企业角色实现了这一点。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__CBHEAFJD">
                     <p class="titleinexample">示例2-4使用企业角色</p>
                     <p>我们首先创建两个企业用户Joe和Nina。您可以使用Oracle Internet Directory自助服务控制台创建企业用户。</p>
                     <p><span class="bold">为了创建企业用户，Joe和Nina：</span></p>
                     <ol>
                        <li>
                           <p>连接到Oracle Internet Directory自助服务控制台。使用以下URL：</p>
                           <p><code class="codeph">http://</code> <span class="italic"><code class="codeph">hostname</code></span> ： <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/oiddas/</code></p>
                           <p>这里， <span class="italic"><code class="codeph">hostname</code></span>是运行Oracle Internet Directory服务器的主机的名称。<span class="italic"><code class="codeph">port</code></span>号是运行Oracle Internet Directory自助服务控制台的TCP端口号。默认情况下为7777。
                           </p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-EA31618F-1204-43CC-BE91-C2AC937DDC00"><img src="img/getstrtd7.gif" alt="getstrtd7.gif的描述如下" title="getstrtd7.gif的描述如下" longdesc="img_text/getstrtd7.html"><br><a href="img_text/getstrtd7.html">插图描述getstrtd7.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>单击“ <span class="bold">目录”</span>选项卡。
                           </p>
                           <p>将出现“登录”页面。</p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-1FE61019-B988-43BA-ADC5-1AE6A8FB7ADD"><img src="img/getstrtd8.gif" width="469" alt="getstrtd8.gif的描述如下" title="getstrtd8.gif的描述如下" longdesc="img_text/getstrtd8.html"><br><a href="img_text/getstrtd8.html">插图描述getstrtd8.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>以可在Oracle Internet Directory中创建用户的用户身份登录。</p>
                           <p>出现“用户”页面。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">创建”</span>
                           </p>
                           <p>将出现“创建用户”页面。</p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-609415AE-7FC9-4317-A168-D919750EF17F"><img src="img/getstrtd9.gif" alt="getstrtd9.gif的描述如下" title="getstrtd9.gif的描述如下" longdesc="img_text/getstrtd9.html"><br><a href="img_text/getstrtd9.html">插图描述getstrtd9.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>在<span class="bold">用户</span>名下输入joe。输入其他必填字段的值。在<span class="bold">“已启用”</span>下选择<span class="bold">“已启用”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">提交”</span>
                           </p>
                        </li>
                        <li>
                           <p>单击<span class="bold">创建另一个用户</span> 。
                           </p>
                           <p>将出现“创建用户”页面。</p>
                        </li>
                        <li>
                           <p>在<span class="bold">用户</span>名下输入Nina。输入其他必填字段的值。在<span class="bold">“已启用”</span>下选择<span class="bold">“已启用”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">提交”</span>单击<span class="bold">确定</span> 。</p>
                        </li>
                     </ol>
                     <p>接下来，我们在数据库中创建一个全局角色，允许访问<code class="codeph">hr.employees</code>表。以下SQL * Plus语句创建全局角色<code class="codeph">hr_access</code>并<code class="codeph">hr_access</code>授予必要的权限。
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE ROLE hr_access全局识别;角色创建。SQL&gt; GRANT SELECT ON hr.employees TO hr_access;格兰特成功了。
</pre><p>接下来，我们创建一个名为<code class="codeph">hr_access</code>的企业角色，并为其分配全局角色。然后，我们将此企业角色分配给企业用户Nina。可以使用Enterprise Manager创建企业角色。
                     </p>
                     <p><span class="bold">要创建企业角色，</span> <span class="bold"><code class="codeph">hr_access:</code></span></p>
                     <ol>
                        <li>
                           <p>以管理用户身份登录Enterprise Manager Cloud Control。</p>
                        </li>
                        <li>
                           <p>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。
                           </p>
                        </li>
                        <li>
                           <p>单击出现的列表中的数据库名称。出现数据库页面。</p>
                        </li>
                        <li>
                           <p>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。
                           </p>
                           <p>将显示“企业用户安全性”页面</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">管理企业域”</span> 。
                           </p>
                           <p>将显示“管理企业域”页面。此页面列出了身份管理领域中的企业域。</p>
                        </li>
                        <li>
                           <p>选择包含数据库的企业域。单击<span class="bold">配置</span> 。
                           </p>
                           <p>将显示“配置域”页面。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">企业角色”</span>选项卡。
                           </p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">创建”</span>
                           </p>
                           <p>将显示“ <span class="bold">创建企业角色”</span>页面。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="bold">名称”</span>字段中输入hr_access。
                           </p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-590987BF-A687-45F7-B2FE-D337132F5444"><img src="img/getstrtd11.gif" alt="getstrtd11.gif的描述如下" title="getstrtd11.gif的描述如下" longdesc="img_text/getstrtd11.html"><br><a href="img_text/getstrtd11.html">插图描述getstrtd11.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>单击“ <span class="bold">添加”</span>将数据库全局角色<span class="bold">添加</span>到企业角色。
                           </p>
                           <p>将显示“搜索和选择数据库全局角色”窗口。</p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-F4A78DD4-4D5D-4276-AFFF-0AC067507C64"><img src="img/getstrtd12.gif" alt="getstrtd12.gif的描述如下" title="getstrtd12.gif的描述如下" longdesc="img_text/getstrtd12.html"><br><a href="img_text/getstrtd12.html">插图描述getstrtd12.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>在数据库中选择<code class="codeph">hr_access</code>全局角色。单击<span class="bold">选择</span> 。
                           </p>
                           <div class="infoboxnote" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-C3E13170-B821-4D49-9B11-32CF2BC06FDB">
                              <p class="notep1">注意：</p>
                              <p>在选择全局角色之前，您需要登录数据库。</p>
                           </div>
                        </li>
                        <li>
                           <p>单击<span class="bold">Grantees</span>选项卡。单击<span class="bold">添加</span> 。
                           </p>
                           <p>将出现“选择用户或组”窗口。</p>
                        </li>
                        <li>
                           <p>选择用户Nina。单击<span class="bold">选择</span> 。
                           </p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-627786CE-122D-49CF-8E2B-EBF9CDE99258"><img src="img/getstrtd10.gif" alt="getstrtd10.gif的描述如下" title="getstrtd10.gif的描述如下" longdesc="img_text/getstrtd10.html"><br><a href="img_text/getstrtd10.html">插图说明getstrtd10.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>单击“创建企业角色”页面中的“ <span class="bold">继续</span> ”
                           </p>
                        </li>
                        <li>
                           <p>在“配置域”页面中单击“ <span class="bold">确定</span> ”。
                           </p>
                        </li>
                     </ol>
                     <p>企业用户Nina现在可以访问数据库中的<code class="codeph">hr.employees</code>表。以下SQL * Plus语句说明了这一点：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT Nina输入密码：已连接。SQL&gt; SELECT employee_id FROM hr.employees; EMPLOYEE_ID ----------- 100 101 102 .........选择了107行。
</pre><p>企业用户Joe无法访问<code class="codeph">hr.employees</code>表，因为他没有分配给他的企业角色。
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT joe输入密码：已连接。SQL&gt; SELECT employee_id FROM hr.employees; SELECT employee_id FROM hr.employees第1行的错误：ORA-00942：表或视图不存在</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBIMI571"></a><a id="DBIMI241"></a><div class="props_rev_3"><a id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D" name="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D"></a><h3 id="DBIMI-GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D" class="sect3">使用代理权限</h3>
               <div>
                  <div class="section">
                     <p>代理权限是在企业域级别创建的。代理权限允许企业用户代理本地数据库用户，这意味着企业用户可以作为本地数据库用户登录数据库。您可以向单个企业用户或组授予代理权限。代理权限对于作为企业用户跨多个数据库运行的中间层应用程序特别有用。</p>
                     <p><a href="getting-started-with-enterprise-user-security.html#GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__CBHJJJIG">例2-5</a>说明了代理权限的使用。企业用户<code class="codeph">joe</code>是销售经理，需要以目标数据库用户<code class="codeph">SH</code>身份登录企业数据库。 <code class="codeph">SH</code>用户拥有包含与销售历史相关的表的样本<code class="codeph">SH</code>模式。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__CBHJJJIG">
                     <p class="titleinexample">示例2-5使用代理权限</p>
                     <p>在允许企业用户代理的第一步是<code class="codeph">ALTER</code>目标数据库用户允许<code class="codeph">CONNECT</code>通过企业用户。以下<code class="codeph">SQL</code>语句解锁<code class="codeph">SH</code>数据库帐户，为其设置密码，并<code class="codeph">ALTER</code>帐户以允许企业用户代理：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT SYSTEM输入密码：已连接。SQL&gt; ALTER USER SH由hrd2guess ACCOUNT UNLOCK识别;用户改动了。SQL&gt; ALTER USER SH GRANT通过企业用户连接;用户改动了。
</pre><p>接下来，使用Enterprise Manager配置代理权限。这允许企业用户<code class="codeph">joe</code>以本地数据库用户<code class="codeph">SH</code>身份进行连接。</p>
                     <p><span class="bold">要配置企业用户，代理权限</span> <span class="bold"><code class="codeph">joe</code></span> <span class="bold">：</span></p>
                     <ol>
                        <li>
                           <p>以管理用户身份登录Enterprise Manager Cloud Control。</p>
                        </li>
                        <li>
                           <p>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。
                           </p>
                        </li>
                        <li>
                           <p>单击出现的列表中的数据库名称。出现数据库页面。</p>
                        </li>
                        <li>
                           <p>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。
                           </p>
                           <p>将显示“企业用户安全性”页面</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">管理企业域”</span> 。
                           </p>
                           <p>将显示“管理企业域”页面。此页面列出了身份管理领域中的企业域。</p>
                        </li>
                        <li>
                           <p>选择要配置的企业域。单击<span class="bold">配置</span> 。
                           </p>
                           <p>将显示“配置域”页面。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">代理权限”</span>选项卡。
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-2F2A1035-E9C9-467C-84C4-89407AC48A22"><img src="img/getstrtd13.gif" alt="getstrtd13.gif的描述如下" title="getstrtd13.gif的描述如下" longdesc="img_text/getstrtd13.html"><br><a href="img_text/getstrtd13.html">插图描述getstrtd13.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>单击“ <span class="bold">创建”</span>以创建新的代理权限。
                           </p>
                           <p>将出现“ <span class="bold">创建代理权限”</span>页面。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="bold">名称”</span>字段中输入SH_Proxy作为代理权限的<span class="bold">名称</span> 。
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-DAD56C5A-0393-40A9-8FF5-BB23AAE30BFD"><img src="img/getstrtd14.gif" alt="getstrtd14.gif的描述如下" title="getstrtd14.gif的描述如下" longdesc="img_text/getstrtd14.html"><br><a href="img_text/getstrtd14.html">插图描述getstrtd14.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>确保选中“ <span class="bold">目标数据库用户”</span>选项卡。单击<span class="bold">添加</span> 。
                           </p>
                           <p>将出现“搜索和选择”窗口。</p>
                        </li>
                        <li>
                           <p>登录包含<code class="codeph">SH</code>用户的数据库。显示已更改为允许企业用户代理的所有数据库用户的列表。
                           </p>
                        </li>
                        <li>
                           <p>选择SH用户。单击<span class="bold">选择</span> 。
                           </p>
                           <p><code class="codeph">SH</code>用户添加在“创建代理权限”页面中的“目标数据库用户”下。
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-F3BCBF7D-6913-48B5-97C3-B4875071297C"><img src="img/getstrtd15.gif" alt="getstrtd15.gif的描述如下" title="getstrtd15.gif的描述如下" longdesc="img_text/getstrtd15.html"><br><a href="img_text/getstrtd15.html">插图描述getstrtd15.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>单击<span class="bold">Grantees</span>选项卡。
                           </p>
                        </li>
                        <li>
                           <p>单击<span class="bold">添加</span> 。
                           </p>
                           <p>将出现“选择用户或组”窗口。</p>
                        </li>
                        <li>
                           <p>在<span class="bold">Search Base</span>下选择<code class="codeph">cn=users,dc=us,dc=oracle,dc=com</code> 。在<span class="bold">View</span>下选择<code class="codeph">User</code> 。单击<span class="bold">Go</span> 。</p>
                           <p>显示子<code class="codeph">cn=users,dc=us,dc=oracle,dc=com</code>的用户列表， <code class="codeph">cn=users,dc=us,dc=oracle,dc=com</code> 。
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-73C05E2B-3562-4081-9C3A-D2612698D432"><img src="img/getstrtd16.gif" width="559" alt="getstrtd16.gif的描述如下" title="getstrtd16.gif的描述如下" longdesc="img_text/getstrtd16.html"><br><a href="img_text/getstrtd16.html">插图描述getstrtd16.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>选择<code class="codeph">cn=joe,cn=users,dc=us,dc=oracle,dc=com</code> 。单击<span class="bold">选择</span> 。
                           </p>
                           <p>用户<code class="codeph">joe</code>在“创建代理权限”页面的<span class="bold">Grantees</span>下添加。
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-A0711055-3325-4E89-8CD9-BA46E5682F07"><img src="img/getstrtd17.gif" alt="getstrtd17.gif的描述如下" title="getstrtd17.gif的描述如下" longdesc="img_text/getstrtd17.html"><br><a href="img_text/getstrtd17.html">插图描述getstrtd17.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>在“创建代理权限”页面中单击“ <span class="bold">继续</span> ”。
                           </p>
                           <p>在配置域页面中添加了代理权限<code class="codeph">SH_Proxy</code> 。
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-B1D85938-FF14-4926-8B5D-A7183A561ACA"><img src="img/getstrtd18.gif" alt="getstrtd18.gif的描述如下" title="getstrtd18.gif的描述如下" longdesc="img_text/getstrtd18.html"><br><a href="img_text/getstrtd18.html">插图描述getstrtd18.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>单击<span class="bold">确定</span> 。</p>
                        </li>
                     </ol>
                     <p>企业用户<code class="codeph">joe</code>现在可以作为本地数据库用户<code class="codeph">SH</code>登录。以下<code class="codeph">SQL</code>语句说明了这一点：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; REMARK Joe使用自己的密码作为本地数据库用户SH进行连接。 SQL&gt; CONNECT joe [SH]输入密码：已连接。SQL&gt; SELECT * FROM SH.sales WHERE cust_id = 4; PROD_ID CUST_ID TIME_ID CHANNEL_ID PROMO_ID QUANTITY_SOLD AMOUNT_SOLD ---------- ---------- --------- ---------- ---- ------ ------------- ----------- 37 4 31-MAY-00 3 999 1 60.43 39 4 31-MAY-00 3 999 1 38.45 40 4 31-MAY-00 3 999 1 48.1 .........选择了72行。
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBIMI10231"></a><div class="props_rev_3"><a id="GUID-ECF44B7C-610F-49FC-9865-ED9BAA0DF22C" name="GUID-ECF44B7C-610F-49FC-9865-ED9BAA0DF22C"></a><h3 id="DBIMI-GUID-ECF44B7C-610F-49FC-9865-ED9BAA0DF22C" class="sect3">使用可插拔数据库</h3>
               <div>
                  <p>您可以将企业用户安全性与Oracle Database 12 <span class="italic">c</span>第1版（12.1）中引入的可插拔数据库（PDB）结合使用。每个PDB都有自己的企业用户安全元数据，例如全局用户，全局角色等。每个PDB应在目录中具有自己的标识。PDB就像在目录中注册的任何常规数据库一样，但以下限制除外：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>客户端SSL身份验证使用为侦听器配置的容器数据库（CDB）全钱包。特定于PDB的钱包用于数据库到目录的身份验证。</p>
                     </li>
                     <li>
                        <p>如果客户端到数据库身份验证使用<code class="codeph">SSL</code> ，并且数据库到目录身份验证也使用<code class="codeph">SSL</code> ，则需要为具有证书的数据库配置两个钱包。第一个钱包是CDB全钱包，第二个钱包是PDB专用钱包。
                        </p>
                     </li>
                     <li>
                        <p>CDB环境不支持当前用户数据库链接。</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-ECF44B7C-610F-49FC-9865-ED9BAA0DF22C__GUID-42BE03FE-4145-4B99-943C-66BB6CAF1CD9">
                     <p class="notep1">注意：</p>
                     <p><code class="codeph">LDAP_DIRECTORY_ACCESS</code>参数对于所有PDB都是相同的。即使只有一部分PDB向目录注册，每个PDB <code class="codeph">LDAP_DIRECTORY_ACCESS</code>看到<code class="codeph">LDAP_DIRECTORY_ACCESS</code>值，就像PDB已注册一样。
                     </p>
                  </div>
                  <div class="p">以下部分描述了有关使用可插拔数据库的更多信息：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="getting-started-with-enterprise-user-security.html#GUID-BAD7A4B7-3655-4E3C-9643-72A3FFA9E5E8">可插拔数据库的钱包位置</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-enterprise-user-security.html#GUID-39030131-575E-49E8-AB7B-D2F75D0122E4">默认数据库DN格式</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-enterprise-user-security.html#GUID-79CFC1AB-B23A-44AA-8CC6-E74C9FEFEEB6">插入和拔出PDB</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-enterprise-user-security.html#GUID-B2397A52-42C7-4482-A68D-184573C03B3C">切换容器</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBIMI10232"></a><div class="props_rev_3"><a id="GUID-BAD7A4B7-3655-4E3C-9643-72A3FFA9E5E8" name="GUID-BAD7A4B7-3655-4E3C-9643-72A3FFA9E5E8"></a><h4 id="DBIMI-GUID-BAD7A4B7-3655-4E3C-9643-72A3FFA9E5E8" class="sect4">可插拔数据库的钱包位置</h4>
                  <div>
                     <p>对于可插拔数据库，当PDB注册到目录时，Database Configuration Assistant（DBCA）会在以下位置创建钱包：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果设置了<code class="codeph">ORACLE_BASE</code>环境变量：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_BASE</span> / admin / <span class="italic">db_unique_name</span> / <span class="italic">pdb_GUID</span> / wallet</pre></li>
                        <li>
                           <p>如果未设置<code class="codeph">ORACLE_BASE</code> ：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_HOME</span> / admin / <span class="italic">db_unique_name</span> / <span class="italic">pdb_GUID</span> / wallet</pre><p>使用PDB的GUID是因为PDB名称可以更改，但GUID不会更改。因此，即使PDB名称发生更改，PDB钱包位置仍然有效。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-BAD7A4B7-3655-4E3C-9643-72A3FFA9E5E8__GUID-8B93B688-B60F-4F95-9BC4-71948C900E87">
                        <p class="notep1">注意：</p>
                        <p>在Microsoft Windows x64平台上，未在<code class="codeph">listener.ora</code>文件和服务器端<code class="codeph">sqlnet.ora</code>文件中指定<code class="codeph">WALLET_LOCATION</code>参数，服务器不会从默认系统位置（ <span class="italic"><code class="codeph">%USERPROFILE%</code></span> <code class="codeph">\ORACLE\WALLETS</code>选取<code class="codeph">\ORACLE\WALLETS</code> 。因此，当您尝试使用SSL连接登录时，登录失败并显示以下错误： <code class="codeph">ORA-28864: SSL connection closed gracefully</code> 。这个已知问题没有解决方法。
                        </p>
                     </div>
                  </div>
               </div><a id="DBIMI10233"></a><div class="props_rev_3"><a id="GUID-39030131-575E-49E8-AB7B-D2F75D0122E4" name="GUID-39030131-575E-49E8-AB7B-D2F75D0122E4"></a><h4 id="DBIMI-GUID-39030131-575E-49E8-AB7B-D2F75D0122E4" class="sect4">默认数据库DN格式</h4>
                  <div>
                     <p>使用DBCA在目录中注册PDB时，将使用以下格式生成默认的PDB可分辨名称（DN）：</p><pre class="oac_no_warn" dir="ltr">cn = <span class="italic">PDB_NAME</span> 。 <span class="italic">DB_UNIQUE_NAME</span> ，cn = oraclecontext， <span class="italic">境界</span>
</pre><p>您可以在DBCA注册屏幕中将默认<code class="codeph">cn</code> （ <span class="italic">PDB_NAME.DB_UNIQUE_NAME）</span>更改为自定义值。注册后不能更改。
                     </p>
                  </div>
               </div><a id="DBIMI10234"></a><div class="props_rev_3"><a id="GUID-79CFC1AB-B23A-44AA-8CC6-E74C9FEFEEB6" name="GUID-79CFC1AB-B23A-44AA-8CC6-E74C9FEFEEB6"></a><h4 id="DBIMI-GUID-79CFC1AB-B23A-44AA-8CC6-E74C9FEFEEB6" class="sect4">插入和拔出PDB</h4>
                  <div>
                     <div class="section">
                        <p>您可以将现有的已注册数据库插入CDB。只要执行以下步骤，您就不需要再次注册PDB：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>从源位置选择钱包文件，并将它们放入PDB的新默认钱包位置。</p>
                           </li>
                           <li>
                              <p>将<code class="codeph">LDAP_DIRECTORY_ACCESS</code>参数设置为<code class="codeph">LDAP_DIRECTORY_ACCESS</code>中的所需值。</p>
                           </li>
                        </ul>
                        <p>同样，在拔出向目录注册的现有PDB时，无需重新注册数据库。拔下电源后，您需要将钱包复制到新的默认位置。默认位置应为：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果设置了<code class="codeph">ORACLE_BASE</code>环境变量：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_BASE</span> / admin / <span class="italic">db_unique_name</span> / wallet</pre></li>
                           <li>
                              <p>如果未设置<code class="codeph">ORACLE_BASE</code> ：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_HOME</span> / admin / <span class="italic">db_unique_name</span> / wallet</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBIMI10235"></a><div class="props_rev_3"><a id="GUID-B2397A52-42C7-4482-A68D-184573C03B3C" name="GUID-B2397A52-42C7-4482-A68D-184573C03B3C"></a><h4 id="DBIMI-GUID-B2397A52-42C7-4482-A68D-184573C03B3C" class="sect4">切换容器</h4>
                  <div>
                     <p>企业用户无法执行<code class="codeph">ALTER SESSION SET CONTAINER</code> <span class="italic"><code class="codeph">target-CDB</code></span>命令，因为企业用户不是普通用户。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
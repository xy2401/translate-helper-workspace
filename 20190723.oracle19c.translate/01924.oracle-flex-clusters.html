<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="An Oracle Flex Cluster scales Oracle Clusterware to large numbers of nodes."></meta>
      <meta name="description" content="An Oracle Flex Cluster scales Oracle Clusterware to large numbers of nodes."></meta>
      <title>Oracle Flex集群</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta property="og:description" content="An Oracle Flex Cluster scales Oracle Clusterware to large numbers of nodes."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00"></meta>
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95727-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="policy-based-cluster-and-capacity-management.html" title="Previous" type="text/html"></link>
      <link rel="next" href="rapid-home-provisioning.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="policy-based-cluster-and-capacity-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="rapid-home-provisioning.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">“Clusterware管理和部署指南”</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Flex集群</li>
            </ol>
            <a id="GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" name="GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF"></a><a id="CWADD92560"></a>
            
            <h2 id="CWADD-GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" class="sect2"><span class="enumeration_chapter">4</span> Oracle Flex群集</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Flex Cluster将Oracle Clusterware扩展为大量节点。</p>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="oracle-flex-clusters.html#GUID-E1014B42-E671-4314-A2B0-D7B03EA4285F" title="安装在Oracle Flex Cluster配置中的Oracle Grid Infrastructure是一个可扩展，动态，强大的节点网络。">Oracle Flex集群概述</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-flex-clusters.html#GUID-EECBD421-5ADF-4D5B-8E67-3D3747426A79" title="成功安装适用于小型或大型集群的Oracle Grid Infrastructure后，使用CRSCTL管理Oracle Flex Clusters。">管理Oracle Flex集群</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-flex-clusters.html#GUID-7E5B7D48-E472-4398-88C1-F0A58E532908" title="您可以跨两个或多个地理位置不同的站点扩展Oracle RAC集群，每个站点都配有自己的存储。如果其中一个站点发生故障，另一个站点将充当活动备用站点。">Oracle Extended Clusters</a></p>
                  </li>
               </ul>
            </div><a id="CWADD92401"></a><div class="props_rev_3"><a id="GUID-E1014B42-E671-4314-A2B0-D7B03EA4285F" name="GUID-E1014B42-E671-4314-A2B0-D7B03EA4285F"></a><h3 id="CWADD-GUID-E1014B42-E671-4314-A2B0-D7B03EA4285F" class="sect3">Oracle Flex集群概述</h3>
               <div>
                  <p>安装在Oracle Flex Cluster配置中的Oracle Grid Infrastructure是一个可扩展，动态，强大的节点网络。</p>
                  <p>Oracle Flex Clusters为各种应用程序提供了一个平台，包括具有大量节点的Oracle Real Application Clusters（Oracle RAC）数据库。Oracle Flex Clusters还为其他服务部署提供了一个平台，需要协调和自动化以实现高可用性。</p>
                  <p>Oracle Flex Cluster中的所有节点都属于单个Oracle Grid Infrastructure集群。此体系结构集中了基于应用程序需求部署资源的策略决策，以考虑各种服务级别，负载，故障响应和恢复。</p>
                  <p>Oracle Flex Clusters包含<a href="glossary.html#GUID-8AD68754-1C50-408B-82A9-61D132FC09F9"><span class="xrefglossterm">Hub节点</span></a>和任意数量的其他受支持节点。Oracle Flex Cluster中的Hub节点数可以多达64个。其他节点的数量可以更多。集线器节点可以托管不同类型的应用程序。
                  </p>
                  <p>集线器节点类似于Oracle Clusterware标准集群配置中的Oracle Grid Infrastructure节点：它们紧密连接，可直接访问共享存储。使用集线器节点来承载读写数据库实例。</p>
                  <p>Oracle Flex Cluster中的其他受支持节点与标准Oracle Grid Infrastructure节点不同，因为它们不需要直接访问共享存储，而是通过集线器节点请求数据。使用其他节点来托管只读数据库实例。</p>
                  <div class="infoboxnote" id="GUID-E1014B42-E671-4314-A2B0-D7B03EA4285F__GUID-0E715559-9269-4C5E-8DC8-0CD588F6A70E">
                     <p class="notep1">注意：</p>同一主数据库的读写和只读数据库实例可以在Oracle Flex Cluster中共存。
                  </div>
                  <p>集线器节点可以在Oracle Flex Cluster配置中运行，而无需将任何其他节点作为集群成员节点，但其他节点必须是包含至少一个集线器节点的集群的成员。</p>
                  <div class="infoboxnote" id="GUID-E1014B42-E671-4314-A2B0-D7B03EA4285F__GUID-74670CF2-2019-4FC8-896D-49A42D9E0B05">
                     <p class="notep1">注意：</p>
                     <p>如果升级Oracle Flex Cluster，则Oracle建议您首先升级集线器节点，并且在升级过程中还要升级并运行任何已升级的集线器节点。</p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-E1014B42-E671-4314-A2B0-D7B03EA4285F__GUID-1AA80422-CEEE-4D5E-9DA7-727308A00192">读者节点</p>
                     <p>您可以使用其他节点来托管以只读模式运行的Oracle RAC数据库实例，这些实例将成为<a href="glossary.html#GUID-FC76BEE4-8B4D-4C9C-92D5-84C2E6B8A193"><span class="xrefglossterm">读取器节点</span></a> 。您可以通过为节点配置大量内存来优化这些节点以进行并行查询操作，以便将数据缓存在主机节点中。
                     </p>
                     <p>主机节点将定期心跳消息发送到其关联的集线器节点，这与集线器节点之间发生的心跳消息不同。在计划关闭集线器节点期间，托管节点会尝试连接到另一个集线器节点，除非托管节点仅连接到一个集线器节点。如果集线器节点被驱逐，则托管节点也将从集群中逐出。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CWADD92409"></a><div class="props_rev_3"><a id="GUID-EECBD421-5ADF-4D5B-8E67-3D3747426A79" name="GUID-EECBD421-5ADF-4D5B-8E67-3D3747426A79"></a><h3 id="CWADD-GUID-EECBD421-5ADF-4D5B-8E67-3D3747426A79" class="sect3">管理Oracle Flex集群</h3>
               <div>
                  <p>成功安装适用于小型或大型集群的Oracle Grid Infrastructure后，使用CRSCTL管理Oracle Flex Clusters。</p>
                  <p>本节包括以下主题：<a id="d24401e434" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="oracle-flex-clusters.html#GUID-525DD457-E46C-4718-BB19-50780E540017" title="您可以将现有Oracle Clusterware标准群集的模式更改为Oracle Flex群集。">更改群集模式</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                        <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-1A6774CF-FD5F-463E-817F-34E4466443C7" title="CRSCTL是您与Oracle Clusterware之间的接口，用于解析和调用Oracle Clusterware API的Oracle Clusterware API。有关使用CRSCTL命令行界面的信息。在Oracle RAC或Oracle Restart环境中使用这些命令。检查群集同步服务的状态。检查事件管理器的状态。检索本地服务器的主机名。注册要由Oracle Clusterware管理的资源。从Oracle Clusterware配置中删除资源。预测在不更改系统的情况下添加资源的效果。预测资源失败的后果。模拟重新定位资源而不更改系统。预测在不更改系统的情况下修改资源的效果。预测在不更改系统的情况下启动资源的影响。预测在不更改系统的情况下停止资源的效果。显示指定资源的用户和组权限。修改Oracle Clusterware中特定资源的属性。将资源重定位到群集中的另一台服务器。重新启动集群中的空闲资源，而不必运行两个命令来停止和启动资源。设置特定资源的权限。在群集中的特定服务器上启动空闲资源。获取任意数量的特定资源的状态和配置信息。停止运行资源。根据资源组类型创建资源组。对指定组的所有成员资源启动检查操作。从Oracle Clusterware中删除一个或多个资源组。预测添加资源组而不更改系统的影响。预测资源失败的后果。预测在不更改系统的情况下重新定位资源组的效果。预测启动资源组而不更改系统的影响。预测在不更改系统的情况下停止资源组的效果。将资源组及其成员资源的完整信息和属性导出到脚本文件。修改资源组以添加属性或更新现有属性的值。将联机资源组从源服务器重定位到目标服务器。在它们当前所在的服务器上重新启动资源组。在特定或预配置的服务器或服务器池上启动一个或多个资源组。显示资源组的状态。在可选指定的预配置服务器或服务器池上停止一个或多个资源组。在Oracle Clusterware中注册新的资源组类型。从Oracle Clusterware中删除一个或多个资源组类型。修改资源组类型以添加属性或更新现有属性的值。返回特定模块的跟踪设置。设置特定模块的跟踪参数。在Oracle Clusterware中创建资源类型。从Oracle Clusterware配置中删除资源类型。获得特定资源类型的权限。修改现有资源类型。设置特定资源类型的资源的权限。获取一个或多个特定资源类型的配置信息。创建并添加用户到钱包。从钱包中删除钱包或用户。修改特定钱包中特定用户的密码。从钱包中查询低权限用户。您只能在Oracle RAC环境中使用以下命令。对特定资源执行特定操作。添加服务器类别。删除服务器类别。修改现有服务器类别。获取有关服务器类别的信息。从群集中的任何节点检查Oracle Clusterware堆栈的状态。在群集中的任何节点上运行时启动Oracle Clusterware堆栈。在群集中的任何节点上运行命令时，停止群集中的所有服务器或特定服务器上的Oracle Clusterware堆栈。获取集群类信息。显示集群配置信息。从用于保护节点间通信的禁用密码套件列表添加密码套件或从中删除密码套件。确定群集是否为扩展群集。获取Oracle Flex Cluster中Hub节点的值。设置Oracle Flex Cluster的最大Hub节点数。确定是否为Oracle Flex Clusters配置了群集或获取当前状态。将标准群集更改为Oracle Flex群集。显示当前群集名称。使用crsctl add cluster site命令将站点添加到扩展群集。使用crsctl delete cluster site命令从扩展群集中删除特定站点。修改扩展群集中站点的配置。显示扩展群集中的站点信息。列出传输层安全性使用的可用密码套件，用于保护节点间通信。使用crsctl get cluster type命令确定群集是Oracle Flex群集还是应用程序群集。设置集群的类型。crsctl get cpu equivalency命令获取CPU_EQUIVALENCY服务器配置属性的值。crsctl set cpu equivalency命令为CPU_EQUIVALENCY服务器配置属性设置一个值。检查本地服务器上的Oracle高可用性服务和Oracle Clusterware堆栈的状态。显示Oracle高可用性服务自动启动配置。在服务器引导时阻止Oracle高可用性服务的自动启动。在服务器引导时启用Oracle高可用性服务的自动启动。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。显示群集中运行的Oracle Clusterware软件的活动版本和已配置的修补程序级别。将用户添加到群集管理员列表中。从Oracle Clusterware管理员列表中删除用户。显示具有Oracle Clusterware管理权限的用户列表。获取Oracle Clusterware自动资源启动条件的值。设置Oracle Clusterware自动资源启动条件。显示在修补节点时在Grid Home修补程序存储库中更新的修补程序级别。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的版本。使用crsctl query crs site命令确定特定主机或磁盘所属的站点。显示已安装的Oracle Clusterware的已配置修补程序级别。显示已在指定节点上成功启动的软件的最新版本。获取特定Cluster Synchronization Services参数的值。引发许多特定节点。设置Cluster Synchronization Services参数的值。取消许多服务器。取消设置Cluster Synchronization Services参数的值并将其恢复为默认值。检索存储在本地智能平台管理接口（IPMI）设备的Oracle本地注册表中的地址。存储Oracle本地注册表中本地智能平台管理接口（IPMI）设备的地址。存储Oracle本地注册表中智能平台管理界面（IPMI）管理员的登录凭据。确定本地服务器上的Oracle Clusterware是否已配置为使用IPMI进行故障隔离。清除Oracle本地注册表中以前存储的所有IPMI配置（登录凭据和IP地址）。确定本地系统上是否存在智能平台管理接口（IPMI）驱动程序。列出禁用自动重新启动群集同步服务的问题。发生特定问题时停止自动重新启动群集同步服务。从Oracle Clusterware配置中删除投票文件。显示群集同步服务使用的投票文件，投票文件的状态以及磁盘的位置，无论它们是存储在Oracle ASM中还是存储在其他位置。检查群集时间同步服务的状态。在指定端口的网络上发送DHCP发现数据包。如果网络上存在DHCP服务器，则它们会响应发现消息并且命令成功。显示Oracle Clusterware代理用于从DHCP服务器获取已配置群集资源的IP地址的客户端ID。VIP类型是必需的。向特定客户端ID发送DHCP租约释放请求，并将网络上的释放数据包发送到特定端口。将网络上的DHCP请求报文发送到指定端口。替换用于查找投票文件的现有发现字符串。获取DNS查找具有指定DNS服务器的名称返回的地址列表。使用指定的子网掩码在指定接口上启动给定的IP名称或IP地址。检查网络上的给定IP地址是否已启动。使用指定的子网掩码停止指定接口上的给定IP名称或IP地址。列出可以调试的模块的组件。为新成员集群创建配置部署文件。删除成员集群配置。显示成员集群的配置。从群集中删除节点。获取本地节点的名称。获取群集中节点的已配置节点角色。将配置策略添加到策略集。从策略集中删除配置策略。预测在不更改系统的情况下激活特定策略的效果。修改现有配置策略。获取配置策略的状态和定义。以文本文件的形式创建一个反映服务器池配置的策略集。修改现有策略集。获取策略集中的当前策略，包括访问控制列表，该列表管理谁可以修改集，最后激活的策略以及现在生效的配置（称为当前策略）。在特定资源的特定于应用程序的代理程序内启动检查操作。将资源重定位到群集中的另一台服务器。检查RESOURCE_USE_ENABLED服务器配置参数的当前设置值。为运行此命令的服务器设置RESOURCE_USE_ENABLED服务器配置参数的值。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动升级模式。模拟添加服务器而不更改系统。预测删除服务器而不更改系统的影响。预测在不更改系统的情况下将服务器重定位到其他服务器池的影响。修改特定服务器的配置。将服务器重定位到其他服务器池。获取一个或多个特定服务器的状态和配置信息。获取CSS_CRITICAL服务器属性的当前配置值设置CSS_CRITICAL服务器属性的配置值。检查SERVER_LABEL服务器属性的当前设置值。为运行此命令的服务器设置SERVER_LABEL服务器配置属性的配置值。添加用于将非数据库资源（例如应用程序服务器）托管到Oracle Clusterware的服务器池。从Oracle Clusterware配置中删除服务器池。预测添加服务器池而不更改系统的影响。模拟删除服务器池而不更改系统。使用crsctl eval modify serverpool命令可预测修改服务器池的效果，而无需更改系统。此命令可能对群集管理员有用。检索特定服务器池的权限。修改现有服务器池。设置特定服务器池的权限。检索一个或多个特定服务器池的状态和配置信息。验证守护程序是否可以侦听指定的地址和端口。启动将侦听指定IP地址和端口的测试DNS服务器。查询在指定地址和本地主机名上运行的测试DNS服务器。停止测试DNS服务器。移动或替换现有的投票文件。您只能在Oracle Restart环境中使用这些命令。检查ohasd的状态。显示服务器上Oracle高可用性服务堆栈的自动启动配置。在服务器启动时禁用Oracle High Availability Services堆栈的自动启动。在服务器启动时启用Oracle High Availability Services堆栈的自动启动。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的发行版本。显示本地节点上的软件版本。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。您可以使用crsctl set log命令作为root用户，以便为群集就绪服务（CRS），群集同步服务（CSS），事件管理器（EVM）和群集件子组件启用动态调试。设置Oracle Clusterware的日志级别。您可以通过设置环境变量或运行crsctl set log命令来启用Oracle Clusterware模块及其组件和资源的调试。">Oracle Clusterware Control（CRSCTL）实用程序参考</a></li>
                     </ul>
                  </div>
               </div><a id="CWADD92410"></a><div class="props_rev_3"><a id="GUID-525DD457-E46C-4718-BB19-50780E540017" name="GUID-525DD457-E46C-4718-BB19-50780E540017"></a><h4 id="CWADD-GUID-525DD457-E46C-4718-BB19-50780E540017" class="sect4">更改群集模式</h4>
                  <div>
                     <p>您可以将现有Oracle Clusterware标准群集的模式更改为Oracle Flex群集。</p>
                     <div class="p">
                        <div class="infoboxnote" id="GUID-525DD457-E46C-4718-BB19-50780E540017__GUID-F3C82316-CC74-460B-B4AF-613600BF7A0C">
                           <p class="notep1">注意：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>更改群集模式需要群集停机时间。</p>
                              </li>
                              <li>
                                 <p>Oracle不支持将Oracle Flex Cluster更改为Oracle Clusterware标准群集。</p>
                              </li>
                              <li>
                                 <p>Oracle Flex Cluster需要网格命名服务（GNS）。</p>
                              </li>
                              <li>
                                 <p>区域授权不是必需的。</p>
                              </li>
                           </ul>
                        </div><a id="d24401e652" class="indexterm-anchor"></a><a id="d24401e656" class="indexterm-anchor"></a><a id="d24401e658" class="indexterm-anchor"></a></div>
                  </div><a id="CWADD92411"></a><div class="props_rev_3"><a id="GUID-838B90FA-50FD-445E-A8EB-7BD45F494A22" name="GUID-838B90FA-50FD-445E-A8EB-7BD45F494A22"></a><h5 id="CWADD-GUID-838B90FA-50FD-445E-A8EB-7BD45F494A22" class="sect5">将Oracle Clusterware标准群集更改为Oracle Flex群集</h5>
                     <div>
                        <p>使用CRSCTL将现有Oracle Clusterware标准群集更改为Oracle Flex群集。</p>
                        <div class="section">
                           <p>执行以下步骤：</p>
                           <ol>
                              <li>
                                 <p>运行以下命令以确定群集的当前模式：</p><pre class="pre codeblock"><code>$ crsctl获取集群模式状态</code></pre></li>
                              <li>
                                 <p>运行以下命令以确保为网格命名服务（GNS）配置了固定的VIP：</p><pre class="pre codeblock"><code>$ srvctl配置gns</code></pre><p>除非GNS配置了固定的VIP，否则此过程不会成功。如果没有GNS，那么，以<code class="codeph">root</code>身份创建一个，如下所示：</p><pre class="pre codeblock"><code>#srvctl add gns <span class="variable" translate="no">vip_name</span> | <span class="variable" translate="no">ip_address</span></code></pre><p>以<code class="codeph">root</code>身份运行以下命令以启动GNS：</p><pre class="pre codeblock"><code>#srvctl启动gns</code></pre></li>
                              <li>
                                 <p>在更改群集模式之前，请使用Oracle自动存储管理配置助手（ASMCA）在群集中启用Oracle Flex ASM。</p>
                              </li>
                              <li>
                                 <p>以<code class="codeph">root</code>身份运行以下命令，将集群模式更改为Oracle Flex集群：</p><pre class="pre codeblock"><code>#crsctl set cluster mode flex</code></pre></li>
                              <li>
                                 <p>通过在群集中的每个节点上以<code class="codeph">root</code>身份运行以下命令来停止Oracle Clusterware：</p><pre class="pre codeblock"><code>#crsctl停止crs</code></pre></li>
                              <li>
                                 <p>通过在群集中的每个节点上以<code class="codeph">root</code>身份运行以下命令来启动Oracle Clusterware：</p><pre class="pre codeblock"><code>#crsctl start crs -wait</code></pre><div class="infoboxnote" id="GUID-838B90FA-50FD-445E-A8EB-7BD45F494A22__GUID-EE82E814-FD99-4749-9265-823A4764C996">
                                    <p class="notep1">注意：</p>
                                    <p>使用<code class="codeph">-wait</code>选项显示进度和状态消息。
                                    </p>
                                 </div>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../ostmg/manage-flex-asm.html#OSTMG-GUID-DE759521-9CF3-45D9-9123-7159C9ED4D30" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-7E5B7D48-E472-4398-88C1-F0A58E532908" name="GUID-7E5B7D48-E472-4398-88C1-F0A58E532908"></a><h3 id="CWADD-GUID-7E5B7D48-E472-4398-88C1-F0A58E532908" class="sect3">Oracle Extended Clusters</h3>
               <div>
                  <p>您可以跨两个或多个地理位置不同的站点扩展Oracle RAC集群，每个站点都配有自己的存储。如果其中一个站点发生故障，另一个站点将充当活动备用站点。</p>
                  <p>通常，Oracle ASM和Oracle数据库堆栈都设计为在数据中心中使用企业级共享存储。但是，光纤通道技术使您可以跨两个或多个数据中心分配计算和存储资源，并通过以太网电缆和光纤通道连接它们，分别满足计算和存储需求。</p>
                  <p>虽然您可以在安装Oracle Grid Infrastructure时配置Oracle Extended Clusters，但也可以使用<code class="codeph">ConvertToExtended</code>脚本在安装后执行此操作。您可以使用CRSCTL管理Oracle Extended Cluster。</p>
               </div>
               <div class="sect3"><a id="GUID-D4B24433-6E47-450D-AE7B-76B8E5D95B1D" name="GUID-D4B24433-6E47-450D-AE7B-76B8E5D95B1D"></a><h4 id="CWADD-GUID-D4B24433-6E47-450D-AE7B-76B8E5D95B1D" class="sect4">配置Oracle Extended Clusters</h4>
                  <div>
                     <p>只有已安装或升级到Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2）或更高版本的群集才支持此过程，这些群集通常配置有一个站点（默认站点）。
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-D4B24433-6E47-450D-AE7B-76B8E5D95B1D__GUID-4F6E549E-04F4-4569-BD54-47EFC3B56C8D">
                           <p class="notep1">注意：</p>此过程要求可以访问群集中的所有节点。还会出现群集中断，在此期间数据库访问中断。
                        </div>您可以使用一个或多个磁盘组以及多个故障组配置Oracle Extended Cluster。使用<code class="codeph">ConvertToExtended</code>脚本，您可以创建多个数据站点并将节点与每个数据站点相关联。所有Oracle Flex ASM存储都与默认群集站点保持关联，因为没有将现有磁盘组转换为扩展磁盘组的机制。将群集转换为Oracle Extended Cluster后，投票文件成员资格保持不变，而不是分层。
                     </div>
                     <!-- class="section" -->
                     <div class="section">您还必须添加扩展磁盘组，并将投票文件迁移到扩展磁盘组，以利用特定于站点的分层投票文件算法。</div>
                     <!-- class="section" -->
                     <div class="p">使用CRSCTL查询集群，如下所示，以确定其扩展状态：<pre class="pre codeblock"><code><span class="bold">$ crsctl get cluster extended</span> CRS-6579：群集是'NOT EXTENDED'</code></pre><pre class="pre codeblock"><code><span class="bold">$ crsctl查询集群站点-all</span>在'ENABLED'状态下由'7b7b3bef4c1f5ff9ff8765bceb45433a'标识的站点'crsclus'，并包含节点'node1，node2，node3，node4'和disks''。</code></pre><p>上面的示例标识了一个名为<code class="codeph">crsclus</code>的集群，它具有四个节点 - <code class="codeph">node1</code> ， <code class="codeph">node2</code> ， <code class="codeph">node3</code>和<code class="codeph">node4</code>以及一个磁盘组<code class="codeph">datadg</code> 。群集已配置一个站点。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">关闭Oracle Clusterware堆栈以防止某些Oracle Flex ASM实例， <code class="codeph">cssd</code>和<code class="codeph">crsd</code>考虑未扩展群集模式，并考虑其他组件是否已扩展。保持网格即插即用守护程序（ <code class="codeph">gpnpd</code> ）联机的优点是该配置文件在远程节点上得到更新。下次启动Oracle Clusterware堆栈时，将扩展群集模式。<pre class="pre codeblock"><code>#crsctl stop cluster -all</code></pre></div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在群集中的第一个节点上，运行以下命令：</span><div><pre class="pre codeblock"><code>$ rootcrs.sh -converttoextended -firstnode <span class="variable" translate="no">site_list</span> -site <span class="variable" translate="no">site_name</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">crsctl check css</code>以确保群集同步服务（CSS）未在任何远程节点上运行。</span></li>
                        <li class="stepexpand"><span>使用以下命令生成站点名称和站点GUID：</span><div><pre class="pre codeblock"><code>$ crsctl查询集群站点-all</code></pre><div class="p">上述命令显示类似于以下内容的输出：<pre class="pre codeblock"><code>在'ONLINE'状态下由GUID'7b7b3bef4c1f5ff9ff8765bceb45433a'标识的站点'SiteA'包含节点'node1，node2，node3'和磁盘'disk1，disk2，disk3'。在'QUARANTINED'状态下由GUID'23453bef4c1f5ff9ff8765bceb45433a'标识的站点'SiteB'包含节点'node4，node5，node6'和磁盘'disk4，disk5，disk6'。GUID'98763bef4c1f5ff9ff8765bceb45433a'在状态'ONLINE'中标识的站点'SiteQ'不包含节点和磁盘'disk7'。GUID'4abcd453c6bc6fc1ffd3a58849d5ba41'在状态'ONLINE'中标识的站点'SiteD'包含节点'cuj1234'且没有磁盘</code></pre></div>
                              <p>使用此信息更新检查点，并将其复制到群集中的其余节点。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>更新网格即插即用配置文件，并使用以下命令将<code class="codeph">ext_mode</code>设置为TRUE：</span><div><pre class="pre codeblock"><code>$ cd <span class="variable" translate="no">$Grid_home</span> / gpnp / <span class="variable" translate="no">host_name</span> / profiles / peer $ gpnptool getpval -p = profile.xml -prf_sq -o = temp_file // run_gpnptool_getpval（）$ gpnptool edit -p = profile.xml -asm_ext =“”prf_sq = seq + 1 -o = profile_ext.xml</code></pre><div class="infoboxnote" id="GUID-D4B24433-6E47-450D-AE7B-76B8E5D95B1D__GUID-E1D682BC-130A-4712-ADFF-FAE9E5691E31">
                                 <p class="notep1">注意：</p><code class="codeph">prf_sq</code>的值必须大于<code class="codeph">ProfileSequence</code>键的当前配置文件中的值。
                              </div><pre class="pre codeblock"><code>$ gpnptool sign -p = profile_ext.xml -o = profile_ext_sign.xml $ mv profile_ext_sign.xml profile.xml $ gpnptool put -p = profile.xml</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将站点添加到本地配置，如下所示：</span><div><pre class="pre codeblock"><code>$ crsctl add crs site <span class="variable" translate="no">site_name</span> -guid <span class="variable" translate="no">site_guid</span> -local</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将站点添加到全局配置，如下所示（这需要OCR运行）：</span><div><pre class="pre codeblock"><code>$ crsctl add crs site <span class="variable" translate="no">site_name</span> -guid <span class="variable" translate="no">site_guid</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>更新此节点的本地配置中的站点映射，如下所示：</span><div><pre class="pre codeblock"><code>$ crsctl修改集群站点<span class="variable" translate="no">site_name</span> -n <span class="variable" translate="no">local_host</span> -local</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>更新节点到站点映射，如下所示：</span><div><pre class="pre codeblock"><code>$ crsctl修改集群站点<span class="variable" translate="no">site_name</span> -n <span class="variable" translate="no">host1, host2, ...</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>停止然后启动Oracle High Availability Services堆栈，如下所示：</span><div><pre class="pre codeblock"><code>#crsctl stop crs＃crsctl start crs</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">在群集中的其余节点上执行以下操作：<ol>
                           <li>
                              <p>将群集扩展到特定节点，如下所示：</p><pre class="pre codeblock"><code>$ rootcrs.sh -converttoextended -site <span class="variable" translate="no">site_name</span></code></pre></li>
                           <li>
                              <p>确保CSS未在任何远程节点上运行。</p>
                           </li>
                           <li>
                              <p>使用以前的检查点信息查找新站点和站点GUID。</p>
                           </li>
                           <li>
                              <p>将站点添加到本地配置，如下所示：</p><pre class="pre codeblock"><code>$ crsctl add crs site <span class="variable" translate="no">site_name</span> -guid <span class="variable" translate="no">site_guid</span> -local</code></pre></li>
                           <li>
                              <p>更新此节点的本地配置中的站点映射，如下所示：</p><pre class="pre codeblock"><code>$ crsctl修改集群站点<span class="variable" translate="no">site_name</span> -n <span class="variable" translate="no">local_host</span> -local</code></pre></li>
                           <li>
                              <p>停止然后启动Oracle High Availability Services堆栈，如下所示：</p><pre class="pre codeblock"><code>#crsctl stop crs＃crsctl start crs</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">完成Oracle Extended Cluster的配置后，运行以下命令以验证配置：<pre class="pre codeblock"><code><span class="bold">$ crsctl get cluster extended</span> CRS-XXXX：集群是'EXTENDED' <span class="bold">$ crsctl查询集群站点-all</span>由'7b7b3bef4c1f5ff9ff8765bceb45433a'标识的站点'crsclus'是'ONLINE'，包含节点''和磁盘''。由'888b3bef4c1f5ff9ff8765bceb45433a'标识的站点'ny'是'ONLINE'，\包含节点'node1，node2'和disk''。由'999b3bef4c1f5ff9ff8765bceb45433a'标识的站点'nj'是'ONLINE'，\包含节点'node3，node4'和disk''。</code></pre><p>上述命令示例中的输出类似于运行命令时CRSCTL显示的内容。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
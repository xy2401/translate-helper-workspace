<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features."></meta>
      <meta name="description" content="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features."></meta>
      <title>禁用和启用Oracle Database Vault</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide "></meta>
      <meta property="og:description" content="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-vault-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-28T15:24:22-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96302-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="auditing-oracle-database-vault.html" title="Previous" type="text/html"></link>
      <link rel="next" href="postinstallation-oracle-database-vault-procedures.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Vault Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DVADM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="auditing-oracle-database-vault.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="postinstallation-oracle-database-vault-procedures.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">禁用和启用Oracle Database Vault</li>
            </ol>
            <a id="GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" name="GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6"></a><a id="DVADM012"></a>
            
            <h2 id="DVADM-GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" class="sect2"><span class="enumeration_appendix">B</span>禁用和启用Oracle Database Vault</h2>
         </header>
         <div class="ind">
            <div>
               <p>您必须定期禁用然后重新启用Oracle Database Vault，以执行安装Oracle数据库可选产品或功能等活动。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="disabling-and-enabling-oracle-database-vault.html#GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7">何时必须禁用Oracle Database Vault</a><br>您可能需要禁用Oracle Database Vault来执行升级任务或更正错误配置。
                  </li>
                  <li class="ulchildlink"><a href="disabling-and-enabling-oracle-database-vault.html#GUID-6D80B63C-6A29-47A9-8733-1070199CDF06">第1步：禁用Oracle Database Vault</a><br>请注意，禁用Oracle Database Vault后，仍会启用运行Database Vault所需的Oracle Label Security。
                  </li>
                  <li class="ulchildlink"><a href="disabling-and-enabling-oracle-database-vault.html#GUID-40E0211E-B527-4C00-94CA-CC5A63769C74">第2步：执行所需任务</a><br>在此阶段，Oracle Database Vault已禁用，您可以执行所需的任务。
                  </li>
                  <li class="ulchildlink"><a href="disabling-and-enabling-oracle-database-vault.html#GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97">第3步：启用Oracle Database Vault</a><br>您可以从SQL * Plus启用Oracle Database Vault和Oracle Label Security。
                  </li>
               </ul>
            </div>
            <a id="DVADM71061"></a><div class="props_rev_3"><a id="GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7" name="GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7"></a><h3 id="DVADM-GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7" class="sect3">何时必须禁用Oracle Database Vault</h3>
               <div>
                  <p>您可能需要禁用Oracle Database Vault来执行升级任务或更正错误配置。</p>
                  <p>完成更正任务后，您可以重新启用Oracle Database Vault。</p>
                  <p>要查找Oracle Database Vault的启用和配置状态，请参阅<a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置和启用数据库保管库</a> 。
                  </p>
                  <p>以下情况要求您禁用Oracle Database Vault：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您必须使用Database Configuration Assistant（DBCA）安装任何Oracle Database可选产品或功能，例如Oracle Spatial。</p>
                     </li>
                     <li>
                        <p>如果在注册Oracle Database Vault时未配置备份<code class="codeph">DV_OWNER</code>和<code class="codeph">DV_ACCTMGR</code>帐户，则会无意中锁定这些帐户或忘记其密码。请注意，如果您的站点只有一个<code class="codeph">DV_OWNER</code>用户且该用户丢失了他或她的密码，您将无法禁用Oracle Database Vault。但是，如果您站点的唯一<code class="codeph">DV_ACCTMGR</code>用户丢失了密码，则可以禁用Database Vault。作为最佳实践，您应将<code class="codeph">DV_OWNER</code>和<code class="codeph">DV_ACCTMGR</code>角色授予新的或现有的用户帐户，并使用您在将Database Vault注册为备份帐户时创建的Database Vault Owner和Account Manager帐户。（有关避免此问题的指导，请参阅<a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-85DCF2C7-BC01-425E-AEDB-1326274713AC" title="作为最佳实践，您应该维护DV_OWNER和DV_ACCTMGR角色的备份帐户。">备份Oracle Database Vault帐户</a> 。）
                        </p>
                     </li>
                     <li>
                        <p>如果要使用Oracle数据库配置助手（DBCA）注册Oracle Internet Directory（OID）。</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7__GUID-34AFB182-57ED-42BB-A02B-839921FE1038">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>请注意，如果禁用Oracle Database Vault，则在安装期间从现有用户和角色撤消的权限仍然有效。请参阅<a href="what-to-expect-after-you-enable-oracle-database-vault.html#GUID-5B269A7B-E0EC-484B-8CF6-D664A1DB9A77" title="Oracle Database Vault配置会撤消多个Oracle数据库提供的用户和角色的权限，以便更好地分离职责。">从现有用户和角色</a>撤消的权限，以获取已撤销权限的列表。
                           </p>
                        </li>
                        <li>
                           <p>禁用Oracle Database Vault时，您仍可以使用某些Database Vault功能。</p>
                        </li>
                        <li>
                           <p>Oracle不支持卸载Oracle Database Vault。</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="disabling-and-enabling-oracle-database-vault.html#GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" title="您必须定期禁用然后重新启用Oracle Database Vault，以执行安装Oracle数据库可选产品或功能等活动。">禁用和启用Oracle Database Vault</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DVADM01203"></a><div class="props_rev_3"><a id="GUID-6D80B63C-6A29-47A9-8733-1070199CDF06" name="GUID-6D80B63C-6A29-47A9-8733-1070199CDF06"></a><h3 id="DVADM-GUID-6D80B63C-6A29-47A9-8733-1070199CDF06" class="sect3">第1步：禁用Oracle Database Vault</h3>
               <div>
                  <p>请注意，禁用Oracle Database Vault后，仍会启用运行Database Vault所需的Oracle Label Security。</p>
                  <ol>
                     <li class="stepexpand"><span>在SQL * Plus中，以Oracle数据库所有者（ <code class="codeph">DV_OWNER</code> ）帐户登录，然后禁用Oracle Database Vault。</span><div><pre class="oac_no_warn" dir="ltr">sqlplus psmith输入密码： <span class="italic">密码</span> EXEC DBMS_MACADM.DISABLE_DV;</pre></div>
                     </li>
                     <li class="stepexpand"><span>在多租户环境中，连接到相应的可插拔数据库（PDB）。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT psmith @hrpdb输入密码： <span class="italic">密码</span>
</pre><p>要查找可用的PDB，请查询<code class="codeph">DBA_PDBS</code>数据字典视图。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>重启数据库。</span><div><pre class="oac_no_warn" dir="ltr">将SYS作为SYSOPER连接<span class="italic">- 或者，连接SYS @hrpdb AS SYSOPER</span>输入密码： <span class="italic">password</span> SHUTDOWN IMMEDIATE STARTUP</pre></div>
                     </li>
                     <li class="stepexpand"><span>对于Oracle RAC安装，请对安装了数据库的每个节点重复这些步骤。</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="disabling-and-enabling-oracle-database-vault.html#GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" title="您必须定期禁用然后重新启用Oracle Database Vault，以执行安装Oracle数据库可选产品或功能等活动。">禁用和启用Oracle Database Vault</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DVADM71063"></a><div class="props_rev_3"><a id="GUID-40E0211E-B527-4C00-94CA-CC5A63769C74" name="GUID-40E0211E-B527-4C00-94CA-CC5A63769C74"></a><h3 id="DVADM-GUID-40E0211E-B527-4C00-94CA-CC5A63769C74" class="sect3">第2步：执行所需任务</h3>
               <div>
                  <p>在此阶段，Oracle Database Vault已禁用，您可以执行所需的任务。</p>
                  <div class="section">
                     <p>您可以执行以下类型的活动：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">使用Oracle Database Vault PL / SQL包和函数。</span> 例如，要更正登录或<code class="codeph">CONNECT</code>规则集错误，请使用企业管理器云控制中的<code class="codeph">DBMS_MACADM</code> PL / SQL包或Oracle Database Vault页面。请注意，CONNECT命令规则无法阻止具有<code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>角色的用户连接到数据库。这使Database Vault管理员可以更正错误配置的保护，而无需禁用Database Vault。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">使用SYSTEM或SYS帐户执行诸如创建或更改密码或锁定和解锁帐户等任务。</span> 除了修改标准数据库和管理用户帐户之外，您还可以修改任何Oracle Database Vault特定帐户的密码和锁定状态，例如已被授予<code class="codeph">DV_ADMIN</code>或<code class="codeph">DV_ACCTMGR</code>角色的用户。（请参阅<a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-F6CA47BC-B122-4FBD-B914-E5487FEF4F9F" title="您必须在注册过程中为Oracle Database Vault Owner和Oracle Database Vault Account Manager创建帐户。">注册期间创建的Oracle Database Vault帐户</a>下的提示，以获取将来避免此问题的指南。）
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">执行需要禁用安全保护的安装或其他任务。</span> 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="disabling-and-enabling-oracle-database-vault.html#GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" title="您必须定期禁用然后重新启用Oracle Database Vault，以执行安装Oracle数据库可选产品或功能等活动。">禁用和启用Oracle Database Vault</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DVADM71064"></a><div class="props_rev_3"><a id="GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97" name="GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97"></a><h3 id="DVADM-GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97" class="sect3">第3步：启用Oracle Database Vault</h3>
               <div>
                  <p>您可以从SQL * Plus启用Oracle Database Vault和Oracle Label Security。</p>
                  <ol>
                     <li class="stepexpand"><span>在SQL * Plus中，以Oracle数据库所有者（ <code class="codeph">DV_OWNER</code> ）帐户身份进行连接，然后启用Database Vault。</span><div>
                           <p>如果要从非多租户环境或PDB启用Database Vault，请执行以下操作：</p><pre class="oac_no_warn" dir="ltr">CONNECT psmith <span class="italic">- 或者，连接psmith @ hrpdb获取PDB</span>输入密码： <span class="italic">password</span> EXEC DBMS_MACADM.ENABLE_DV;</pre><p>如果要从CDB根启用Database Vault，例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT c ## sec_admin_owen输入密码： <span class="italic">密码</span>
</pre><p>从以下设置中选择一个：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_DV（strict_mode =&gt;'n'）; <span class="italic">- 对于常规模式</span> EXEC DBMS_MACADM.ENABLE_DV（strict_mode =&gt;'y'）; <span class="italic"> - 对于严格模式</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>检查是否已启用Oracle Label Security。</span><div><pre class="oac_no_warn" dir="ltr">从V $ OPTION选择值，其中PARAMETER ='Oracle Label Security';</pre><p>必须先启用Oracle Label安全性，然后才能使用Database Vault。如果未启用，则此查询返回<code class="codeph">FALSE</code> 。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>如果未启用Oracle Label Security，则启用它。</span><div><pre class="oac_no_warn" dir="ltr">将SYS作为SYSDBA连接<span class="italic">- 或者，连接SYS @hrpdb AS SYSDBA</span>输入密码： <span class="italic">password</span> EXEC LBACSYS.CONFIGURE_OLS; EXEC LBACSYS.OLS_ENFORCEMENT.ENABLE_OLS;</pre></div>
                     </li>
                     <li class="stepexpand"><span>重启数据库。</span><div><pre class="oac_no_warn" dir="ltr">将SYS作为SYSOPER连接<span class="italic">- 或者，连接SYS @hrpdb AS SYSOPER</span>输入密码： <span class="italic">password</span> SHUTDOWN IMMEDIATE STARTUP</pre></div>
                     </li>
                     <li class="stepexpand"><span>对于Oracle RAC安装，请对安装了数据库的每个节点重复这些步骤。</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="disabling-and-enabling-oracle-database-vault.html#GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" title="您必须定期禁用然后重新启用Oracle Database Vault，以执行安装Oracle数据库可选产品或功能等活动。">禁用和启用Oracle Database Vault</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration."></meta>
      <meta name="description" content="You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration."></meta>
      <title>创建物理备用数据库</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Concepts and Administration "></meta>
      <meta property="og:description" content="You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Concepts and Administration"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96244-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="getting-started-with-oracle-data-guard.html" title="Previous" type="text/html"></link>
      <link rel="next" href="creating-oracle-data-guard-logical-standby.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration"></meta>
    <meta name="dcterms.isVersionOf" content="SBYDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="getting-started-with-oracle-data-guard.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="creating-oracle-data-guard-logical-standby.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建物理备用数据库</li>
            </ol>
            <a id="GUID-B511FB6E-E3E7-436D-94B5-071C37550170" name="GUID-B511FB6E-E3E7-436D-94B5-071C37550170"></a><a id="SBYDB00200"></a>
            
            <h2 id="SBYDB-GUID-B511FB6E-E3E7-436D-94B5-071C37550170" class="sect2"><span class="enumeration_chapter">3</span>创建物理备用数据库</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用异步重做传输和实时应用（默认的Oracle Data Guard配置）以最高性能模式手动创建物理备用数据库。</p>
               <p>请参阅以下主要主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-3DA747A3-1976-4A70-A96A-56281872D4D9" title="在创建备用数据库之前，必须首先确保已正确配置主数据库。">准备主数据库以创建备用数据库</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF" title="这些是您创建物理备用数据库时执行的任务。">创建物理备用数据库的逐步说明</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-3A0F8F9C-EF69-4BE4-9F7B-98AED4BEC4AC" title="物理备用数据库运行后，可以升级数据保护模式，也可以启用闪回数据库。">创作后的步骤</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-7C55FE8A-50C3-4601-9ADA-98BE6D65F1DD" title="Database Configuration Assistant（DBCA）还可以用作创建Oracle Data Guard物理备用数据库的简单命令行方法。">使用DBCA创建Data Guard待机</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69" title="您可以创建多租户容器数据库（CDB）的物理备用数据库，就像创建常规主数据库的物理备用数据库一样。">创建CDB的物理备用</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2" title="在Oracle Data Guard配置中，主数据库上的可插拔数据库（PDB）的创建方式与创建常规数据库上的PDB的方式相同。">在主数据库中创建PDB</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-B511FB6E-E3E7-436D-94B5-071C37550170__GUID-A18BD0A2-FB8D-4195-9C26-DA4AEC6CFBE1">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN11117" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关创建和使用服务器参数文件的信息</p>
                     </li>
                     <li>
                        <p>企业管理器联机帮助系统，用于获取有关使用Oracle Data Guard代理图形用户界面（GUI）自动创建物理备用数据库的信息</p>
                     </li>
                     <li>
                        <p><a href="creating-data-guard-standby-database-using-RMAN.html#GUID-82731D59-A20F-45DD-A235-267B3B0E38C5" title="这些主题描述了如何使用Oracle Recovery Manager创建备用数据库。">使用Recovery Manager创建备用数据库，</a>以获取有关创建物理备用数据库的备用方法的信息，该数据库通过使用Oracle Recovery Manager（RMAN）以及基于备份的复制或通过网络进行主动复制来自动执行大部分过程</p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=DGBKR090" target="_blank"><span class="italic">Oracle数据卫士代理</span></a>有关配置数据库，以便它可以由Oracle Data Guard的经纪人管理信息</p>
                     </li>
                  </ul>
               </div>
               <div class="infoboxnote" id="GUID-B511FB6E-E3E7-436D-94B5-071C37550170__GUID-A2C04D1E-5EB6-4CF9-BE44-43505962F4E0">
                  <p class="notep1">注意：</p>
                  <p>如果您在多租户容器数据库（CDB）环境中工作，请参阅<a href="creating-oracle-data-guard-physical-standby.html#GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69" title="您可以创建多租户容器数据库（CDB）的物理备用数据库，就像创建常规主数据库的物理备用数据库一样。">创建CDB的物理备用，</a>以获取有关非CDB环境的行为差异的信息。例如，在CDB环境中，许多DBA视图都有类似的CDB视图，您应该使用它们。
                  </p>
               </div>
            </div><a id="SBYDB5015"></a><a id="SBYDB4718"></a><div class="props_rev_3"><a id="GUID-3DA747A3-1976-4A70-A96A-56281872D4D9" name="GUID-3DA747A3-1976-4A70-A96A-56281872D4D9"></a><h3 id="SBYDB-GUID-3DA747A3-1976-4A70-A96A-56281872D4D9" class="sect3"><span class="enumeration_section">3.1</span>为备用数据库创建准备主数据库</h3>
               <div>
                  <p>在创建备用数据库之前，必须首先确保已正确配置主数据库。</p>
                  <div class="section">
                     <p>在主数据库上执行以下任务以准备物理备用数据库创建：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-AE2B1237-57A1-4745-A04C-4246A831A963" title="作为准备备用数据库创建的主数据库的一部分，您必须启用适合您计划使用Data Guard配置的方式的日志记录模式。">启用适当的日志记录模式</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-0DC30726-3471-4588-BFE0-9CA0736328E2" title="Oracle Data Guard使用Oracle Net会话在Oracle Data Guard配置的成员之间传输重做数据和控制消息。">配置重做传输身份验证</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF" title="如果这是第一次将备用数据库添加到配置中，则最佳做法是将主数据库配置为接收重做。">配置主数据库以接收重做数据</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" title="在主数据库上，您可以定义在数据库处于主要角色时控制重做传输服务的初始化参数。">设置主数据库初始化参数</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-0379019D-0995-4EB7-8861-B07B708C7B4C" title="如果未启用存档，则必须将主数据库置于ARCHIVELOG模式并启用自动存档。">启用存档</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-3DA747A3-1976-4A70-A96A-56281872D4D9__GUID-2C0A3837-59E6-42CA-BA31-6F891FA30F5E">
                        <p class="notep1">注意：</p>
                        <p>仅执行一次这些准备任务。完成这些步骤后，数据库将准备充当一个或多个备用数据库的主数据库。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="SBYDB4719"></a><div class="props_rev_3"><a id="GUID-AE2B1237-57A1-4745-A04C-4246A831A963" name="GUID-AE2B1237-57A1-4745-A04C-4246A831A963"></a><h4 id="SBYDB-GUID-AE2B1237-57A1-4745-A04C-4246A831A963" class="sect4"><span class="enumeration_section">3.1.1</span>启用适当的日志记录模式</h4>
                  <div>
                     <p>作为准备备用数据库创建的主数据库的一部分，您必须启用适合您计划使用Data Guard配置的方式的日志记录模式。</p>
                     <div class="section">
                        <p>不属于Data Guard配置的数据库的默认日志记录模式允许以非日志方式执行某些数据加载操作。此默认模式不适用于具有备用数据库的数据库，因为它会导致备用数据库中缺少已加载的数据，这需要手动干预才能进行修复。除了默认日志记录模式外，还有其他三种适用于主数据库的模式：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <div class="p"><code class="codeph">FORCE LOGGING</code>模式可防止以非记录方式执行任何加载操作。这会降低加载过程的速度，因为必须将加载的数据复制到重做日志中。使用以下命令启用<code class="codeph">FORCE LOGGING</code>模式：<pre class="pre codeblock"><code>SQL&gt; ALTER DATABASE FORCE LOGGING;</code></pre></div>
                           </li>
                           <li>
                              <div class="p"><code class="codeph">STANDBY NOLOGGING FOR DATA AVAILABILITY</code>模式使加载操作通过其自身与备用数据库的连接将加载的数据发送到每个备用数据库。提交会延迟，直到所有备用数据库都将数据应用为Active Data Guard环境中运行托管恢复的一部分。使用以下命令启用它：<pre class="pre codeblock"><code>SQL&gt; ALTER DATABASE SET STANDBY NOLOGGING FOR DATA AVAILABILITY;</code></pre></div>
                           </li>
                           <li>
                              <div class="p"><code class="codeph">STANDBY NOLOGGING FOR LOAD PERFORMANCE</code>类型与先前的模式类似，不同之处在于，如果网络无法跟上数据加载到主数据库的速度，则加载过程可以停止将数据发送到备用数据库。在此模式下，备用数据库可能缺少数据，但每个备用数据库都会自动从主数据库中提取数据，这是Active Data Guard环境中运行的受管恢复的正常部分。使用以下命令启用它：<pre class="pre codeblock"><code>SQL&gt; ALTER DATABASE设置备用负载性能;</code></pre></div>
                           </li>
                        </ul>
                        <p>当您发出任何这些语句时，必须至少安装主数据库（并且它也可以打开）。该语句可能需要相当长的时间才能完成，因为它等待所有未记录的直接写入I / O完成。</p>
                        <p></p>
                        <div class="infoboxnote" id="GUID-AE2B1237-57A1-4745-A04C-4246A831A963__GUID-733F7367-B8B7-4B2E-B22D-3C3E9EB3BD16">
                           <p class="notep1">注意：</p>
                           <p>当您在主数据库上启用<code class="codeph">STANDBY NOLOGGING FOR DATA AVAILABILITY</code>或<code class="codeph">STANDBY NOLOGGING FOR LOAD PERFORMANCE</code>时，任何使用多实例重做应用功能的备用数据库将停止应用带有错误ORA-10892的重做。您必须首先重新启动重做应用并允许受影响的备用数据库超过NOLOGGING操作期，然后启用多实例重做应用。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-AE2B1237-57A1-4745-A04C-4246A831A963__GUID-5584756B-129C-46A1-97A2-63718104B4AA">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关指定<code class="codeph">FORCE</code> <code class="codeph">LOGGING</code>模式的后果的详细信息，请参见<a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN11096" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB00424"></a><div class="props_rev_3"><a id="GUID-0DC30726-3471-4588-BFE0-9CA0736328E2" name="GUID-0DC30726-3471-4588-BFE0-9CA0736328E2"></a><h4 id="SBYDB-GUID-0DC30726-3471-4588-BFE0-9CA0736328E2" class="sect4"><span class="enumeration_section">3.1.2</span>配置重做传输认证</h4>
                  <div>
                     <p>Oracle Data Guard使用Oracle Net会话在Oracle Data Guard配置的成员之间传输重做数据和控制消息。</p>
                     <p>这些重做传输会话使用安全套接字层（SSL）协议或远程登录密码文件进行身份验证。</p>
                     <p>在以下情况下，SSL用于验证两个数据库之间的重做传输会话：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>这些数据库是同一Oracle Internet Directory（OID）企业域的成员，它允许使用当前的用户数据库链接</p>
                        </li>
                        <li>
                           <p>与数据库对应的<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>和<code class="codeph">FAL_SERVER</code>数据库初始化参数使用为SSL配置的Oracle Net连接描述符</p>
                        </li>
                        <li>
                           <p>每个数据库都有一个Oracle钱包或支持的硬件安全模块，其中包含一个用户证书，其可分辨名称（DN）与数据库的OID条目中的DN相匹配</p>
                        </li>
                     </ul>
                     <p>如果不满足SSL身份验证要求，则必须将Oracle Data Guard配置的每个成员配置为使用远程登录密码文件，并且配置中的每个物理备用数据库都必须具有来自的密码文件的最新副本。主数据库。</p>
                     <div class="infoboxnote" id="GUID-0DC30726-3471-4588-BFE0-9CA0736328E2__GUID-386E79D8-99A8-47C6-9721-53DED3AEB1CD">
                        <p class="notep1">注意：</p>
                        <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2.0.1）开始，在主数据库上完成的密码文件更改会自动传播到备用数据库。唯一的例外是远同步实例。更新的密码文件仍必须手动复制到远程同步实例，因为远程同步实例会接收重做，但不会应用它。在远程同步实例中密码文件是最新的后，重做会自动传播到任何备用数据库，这些数据库设置为从该远程同步实例接收重做日志。应用重做时，备用数据库上的密码文件会更新。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-0DC30726-3471-4588-BFE0-9CA0736328E2__GUID-8FF931DF-1863-4243-9387-3D63161690E9">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关远程登录密码文件的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10184" target="_blank"><span class="italic">参见</span></a> <a href="../admin/getting-started-with-database-administration.html#ADMIN-GUID-26EC8D1B-7A2F-4F0A-9588-D92CBD610858" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10184" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p>有关SSL的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=DBSEG070" target="_blank"><span class="italic">Oracle数据库安全指南</span></a></p>
                           </li>
                           <li>
                              <p>有关Oracle Net Services的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=NETAG001" target="_blank"><span class="italic">“Oracle数据库网络服务管理员指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="SBYDB00426"></a><div class="props_rev_3"><a id="GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF" name="GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF"></a><h4 id="SBYDB-GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF" class="sect4"><span class="enumeration_section">3.1.3</span>配置主数据库以接收重做数据</h4>
                  <div>
                     <p>如果这是第一次将备用数据库添加到配置中，则最佳做法是将主数据库配置为接收重做。</p>
                     <p>如有必要，主数据库可以快速转换到备用角色并开始接收重做数据。</p>
                     <p>要创建备用重做日志，请使用SQL <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">ADD</code> <code class="codeph">STANDBY</code> <code class="codeph">LOGFILE</code>语句。例如：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE添加STANDBY LOGFILE（'/ oracle / dbs / slog1.rdo'）SIZE 500M; SQL&gt; ALTER DATABASE添加STANDBY LOGFILE（'/ oracle / dbs / slog2.rdo'）SIZE 500M;</pre><p>有关如何确定每个日志文件的大小和日志组的数量以及有关管理备用重做日志的其他背景信息的讨论，请参阅<a href="oracle-data-guard-redo-transport-services.html#GUID-AF64C4FE-2D16-4197-953A-25930F36CFA8" title="必须将重做传输目标配置为从重做源数据库接收和归档重做数据。">配置Oracle数据库以接收重做数据</a> 。
                     </p>
                  </div>
               </div><a id="SBYDB4720"></a><div class="props_rev_3"><a id="GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" name="GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84"></a><h4 id="SBYDB-GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" class="sect4"><span class="enumeration_section">3.1.4</span>设置主数据库初始化参数</h4>
                  <div>
                     <p>在主数据库上，您可以定义在数据库处于主要角色时控制重做传输服务的初始化参数。</p>
                     <p>您需要添加其他参数来控制重做数据的接收，并在主数据库转换为备用角色时应用服务。</p>
                     <p>以下示例显示了您在主数据库上维护的主要角色初始化参数。此示例表示Oracle Data Guard配置，其中包含位于Chicago的主数据库和位于Boston的一个物理备用数据库。当该数据库在主数据库角色或备用数据库角色中运行时，此示例中显示的参数对于Chicago数据库有效。配置示例使用下表中显示的名称：</p>
                     <div class="tblformal" id="GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84__GUID-CA398D21-3C1C-442B-829B-22477670CEAE">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This 3 column tables shows the DB_UNIQUE_NAME and Oracle Net service names that are used in this chapters examples. Column 1 is the database, Column 2 is the DB_UNIQUE_NAME. Column 3 is the Oracle Net Service Name . " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d7102e744">数据库</th>
                                 <th align="left" valign="bottom" width="31%" id="d7102e747">DB_UNIQUE_NAME</th>
                                 <th align="left" valign="bottom" width="38%" id="d7102e750">Oracle Net服务名称</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d7102e755" headers="d7102e744 ">
                                    <p>主</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d7102e755 d7102e747 ">
                                    <p>芝加哥</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d7102e755 d7102e750 ">
                                    <p>芝加哥</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d7102e765" headers="d7102e744 ">
                                    <p>物理待机</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d7102e765 d7102e747 ">
                                    <p>波士顿</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d7102e765 d7102e750 ">
                                    <p>波士顿</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" --><pre class="oac_no_warn" dir="ltr">DB_NAME =芝加哥DB_UNIQUE_NAME =芝加哥<a id="d7102e776" class="indexterm-anchor"></a> LOG_ARCHIVE_CONFIG ='DG_CONFIG =（芝加哥，芝加哥）'CONTROL_FILES ='/ arch1 / chicago / control1.ctl'，'/ arch2 / chicago / control2.ctl'LOG_ARCHIVE_DEST_1 ='LOCATION = USE_DB_RECOVERY_FILE_DEST VALID_FOR =（ALL_LOGFILES，ALL_ROLES）DB_UNIQUE_NAME =芝加哥'LOG_ARCHIVE_DEST_2 ='SERVICE = boston ASYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = boston'REMOTE_LOGIN_PASSWORDFILE = EXCLUSIVE LOG_ARCHIVE_FORMAT =％t_％s_％r.arc</pre><p>这些参数控制重做传输服务如何将重做数据传输到备用系统以及在本地文件系统上存档重做数据。请注意，该示例指定异步（ <code class="codeph">ASYNC</code> ）网络传输以在<code class="codeph">LOG_ARCHIVE_DEST_2</code>初始化参数上传输重做数据。这些是推荐的设置，需要备用重做日志文件（请参阅<a href="creating-oracle-data-guard-physical-standby.html#GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF" title="如果这是第一次将备用数据库添加到配置中，则最佳做法是将主数据库配置为接收重做。">配置主数据库以接收重做数据</a> ）。
                     </p>
                     <p>以下显示主数据库上的其他备用角色初始化参数。这些参数在主数据库转换为备用角色时生效。</p><pre class="oac_no_warn" dir="ltr">FAL_SERVER = boston DB_FILE_NAME_CONVERT ='/ boston /'，'/ chicago /'LOG_FILE_NAME_CONVERT ='/ boston /'，'/ chicago /'STANDBY_FILE_MANAGEMENT = AUTO</pre><p>指定上面显示的初始化参数将设置主数据库以解决间隙，从新的主数据库转换新数据文件和日志文件路径名，并在此数据库处于备用角色时归档传入的重做数据。使用如上所述设置的主角色和备用角色的初始化参数，角色转换后不需要更改任何参数。</p>
                     <p>下表提供了前两个示例中显示的每个参数设置的简要说明。</p>
                     <div class="tblformalwide" id="GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84__GUID-AD33B23C-C22E-4924-9029-1D06B2983132">
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Briefly explains each initialization parameter that was set in Examples 3-1 and 3-2." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d7102e810">参数</th>
                                 <th align="left" valign="bottom" width="70%" id="d7102e813">推荐设置</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e818" headers="d7102e810 ">
                                    <p><a href="../refrn/DB_NAME.html#REFRN10041" target="_blank"><code class="codeph">DB_NAME</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e818 d7102e813 ">
                                    <p>在主数据库上，指定创建数据库时使用的名称。在物理备用数据库上，使用主数据库的<code class="codeph">DB_NAME</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e831" headers="d7102e810 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10242" target="_blank"><code class="codeph">DB_UNIQUE_NAME</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e831 d7102e813 ">
                                    <p>为每个数据库指定唯一的名称。即使主数据库和备用数据库反向角色，此名称仍保留在数据库中，并且不会更改。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e841" headers="d7102e810 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10237" target="_blank"><code class="codeph">LOG_ARCHIVE_CONFIG</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e841 d7102e813 ">
                                    <p>必须在Oracle Data Guard配置中的每个数据库上显式设置此参数的<code class="codeph">DG_CONFIG</code>属性，以启用完整的Oracle Data Guard功能。将<code class="codeph">DG_CONFIG</code>设置为包含配置中每个数据库的<code class="codeph">DB_UNIQUE_NAME</code>的文本字符串，此列表中的每个名称用逗号分隔。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e860" headers="d7102e810 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10021" target="_blank"><code class="codeph">CONTROL_FILES</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e860 d7102e813 ">
                                    <p>指定主数据库上控制文件的路径名。建议控制文件的第二个副本可用，以便在将良好的控制文件复制到错误控制文件的位置后可以轻松地重新启动实例。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e870" headers="d7102e810 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10086" target="_blank"><code class="codeph">的LOG_ARCHIVE_DEST_n</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e870 d7102e813 ">
                                    <p>指定在主系统和备用系统上归档重做数据的位置。</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_1</code>将主数据库生成的重做数据从本地联机重做日志文件归档到/ arch1 / chicago /中的本地归档重做日志文件。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_2</code>仅对主要角色有效。该目的地将重做数据发送到远程物理备用目的地<code class="codeph">boston</code> 。
                                          </p>
                                       </li>
                                    </ul>
                                    <p><span class="bold">注意：</span>如果配置了快速恢复区域（使用<code class="codeph">DB_RECOVERY_FILE_DEST</code>初始化参数）并且尚未使用<code class="codeph">LOCATION</code>属性显式配置本地归档目标，则Oracle Data Guard会自动使用<code class="codeph">LOG_ARCHIVE_DEST_1</code>初始化参数（如果尚未设置）本地存档的默认目标。另外，请参阅<a href="LOG_ARCHIVE_DEST_n-parameter-attributes.html#GUID-B04FC22C-F0B0-440F-BAF4-182EE547FCC1" title="这是LOG_ARCHIVE_DEST_n初始化参数的属性列表（其中n是1到31之间的整数）。">LOG_ARCHIVE_DEST_n参数属性</a>以获取完整的<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>信息。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e933" headers="d7102e810 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10184" target="_blank"><code class="codeph">REMOTE_LOGIN_PASSWORDFILE</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e933 d7102e813 ">
                                    <p>如果使用远程登录密码文件对管理用户或重做传输会话进行身份验证，则必须将此参数设置为<code class="codeph">EXCLUSIVE</code>或<code class="codeph">SHARED</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e949" headers="d7102e810 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10089" target="_blank"><code class="codeph">LOG_ARCHIVE_FORMAT</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e949 d7102e813 ">
                                    <p>使用线程（％t），序列号（％s）和resetlogs ID（％r）指定归档重做日志文件的格式。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e959" headers="d7102e810 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10056" target="_blank"><code class="codeph">FAL_SERVER</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e959 d7102e813 ">
                                    <p>指定FAL服务器的Oracle Net服务名称（通常这是以主角色运行的数据库）。当Chicago数据库以备用角色运行时，如果Boston无法自动发送丢失的日志文件，它将使用Boston数据库作为FAL服务器从中获取（请求）丢失的归档重做日志文件。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e969" headers="d7102e810 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10038" target="_blank"><code class="codeph">DB_FILE_NAME_CONVERT</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e969 d7102e813 ">
                                    <p>指定备用数据库数据文件的路径名和文件名位置，后跟主要位置。此参数将主数据库数据文件的路径名转换为备用数据文件路径名。此参数仅用于转换物理备用数据库的路径名。此参数可以指定多对路径。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e979" headers="d7102e810 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10098" target="_blank"><code class="codeph">LOG_FILE_NAME_CONVERT</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e979 d7102e813 ">
                                    <p>指定备用数据库联机重做日志文件的位置，后跟主要位置。此参数将主数据库日志文件的路径名转换为备用数据库上的路径名。此参数可以指定多对路径。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d7102e989" headers="d7102e810 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10212" target="_blank"><code class="codeph">STANDBY_FILE_MANAGEMENT</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d7102e989 d7102e813 ">
                                    <p>设置为<code class="codeph">AUTO</code>以便在向主数据库添加或删除数据文件时，会自动对备用数据库进行相应的更改。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p></p>
                     <div class="infoboxnote" id="GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84__GUID-34E39F48-BBFC-4943-A3C9-01C2DF0DDC91">
                        <p class="notep1">注意：</p>
                        <p>查看初始化参数文件以获取可能需要修改的其他参数。例如，如果备用数据库上的目录位置与主数据库上指定的目录位置不同，则可能需要修改转储目标参数。</p>
                     </div>
                  </div>
               </div><a id="SBYDB4721"></a><div class="props_rev_3"><a id="GUID-0379019D-0995-4EB7-8861-B07B708C7B4C" name="GUID-0379019D-0995-4EB7-8861-B07B708C7B4C"></a><h4 id="SBYDB-GUID-0379019D-0995-4EB7-8861-B07B708C7B4C" class="sect4"><span class="enumeration_section">3.1.5</span>启用存档</h4>
                  <div>
                     <p>如果未启用存档，则必须将主数据库置于<code class="codeph">ARCHIVELOG</code>模式并启用自动存档。
                     </p>
                     <div class="section">
                        <p>发出以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SHUTDOWN IMMEDIATE; SQL&gt; STARTUP MOUNT; SQL&gt; ALTER DATABASE ARCHIVELOG; SQL&gt; ALTER DATABASE OPEN;</pre><div class="infoboxnote" id="GUID-0379019D-0995-4EB7-8861-B07B708C7B4C__GUID-796FE0BE-43FE-49DC-8BDF-FF34AFC890A9">
                           <p class="notep1">注意：</p>备用数据库必须处于<code class="codeph">ARCHIVELOG</code>模式才能执行备用重做日志存档。
                        </div>
                        <p>有关存档的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN008" target="_blank"><span class="italic">Oracle数据库管理员指南”</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB5018"></a><a id="SBYDB00210"></a><div class="props_rev_3"><a id="GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF" name="GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF"></a><h3 id="SBYDB-GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF" class="sect3"><span class="enumeration_section">3.2</span>创建物理备用数据库的逐步说明</h3>
               <div>
                  <p>这些是您创建物理备用数据库时执行的任务。</p>
                  <p>本主题中的信息是以详细程度编写的，要求您已经全面了解以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>数据库管理员验证</p>
                     </li>
                     <li>
                        <p>数据库初始化参数</p>
                     </li>
                     <li>
                        <p>管理重做日志，数据文件和控制文件</p>
                     </li>
                     <li>
                        <p>管理归档重做日志</p>
                     </li>
                     <li>
                        <p>快速恢复区</p>
                     </li>
                     <li>
                        <p>Oracle Net配置</p>
                     </li>
                  </ul>
                  <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF__BACHCEHE" title="这是一个面向任务的2列表，它提供了本章中描述如何创建物理备用数据库的部分的链接。第1列是任务。第2列是数据库。">表3-1</a>提供了创建物理备用数据库以及执行每项任务的数据库所执行的任务的核对表。
                  </p>
                  <div class="tblformalwide" id="GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF__BACHCEHE">
                     <p class="titleintable">表3-1创建物理备用数据库</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="创建物理备用数据库" width="100%" border="1" summary="This is a task-oriented 2 column table that provides a link to sections in the chapter that describe how to create a physical standby database. Column 1 is the task. Column 2 is the database. " frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="50%" id="d7102e1226">任务</th>
                              <th align="left" valign="bottom" width="50%" id="d7102e1229">数据库</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d7102e1234" headers="d7102e1226 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" title="只要拥有必要的归档重做日志文件以完全恢复数据库，就可以使用主数据库的任何备份副本来创建物理备用数据库。">创建主数据库数据文件的备份副本</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d7102e1234 d7102e1229 ">
                                 <p>主</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d7102e1246" headers="d7102e1226 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-B471D788-AFD3-48B3-9709-D63C34DBC269" title="为备用数据库创建控制文件（主数据库不必打开，但必须至少安装它）。">为备用数据库创建控制文件</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d7102e1246 d7102e1229 ">
                                 <p>主</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d7102e1258" headers="d7102e1226 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" title="从主数据库使用的服务器参数文件（SPFILE）创建参数文件（PFILE）。">为备用数据库创建参数文件</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d7102e1258 d7102e1229 ">
                                 <p>主</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d7102e1270" headers="d7102e1226 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7" title="确保已创建所有必需的目录。使用操作系统复制实用程序将二进制文件从主系统复制到备用系统上的正确位置。">将文件从主系统复制到备用系统</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d7102e1270 d7102e1229 ">
                                 <p>主</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d7102e1282" headers="d7102e1226 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" title="通过创建基于Windows的服务，密码文件和SPFILE以及设置Oracle Net环境来设置环境。">设置环境以支持备用数据库</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d7102e1282 d7102e1229 ">
                                 <p>支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d7102e1294" headers="d7102e1226 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-3D65210D-9FE5-490E-938E-57FC2E07A569" title="这些是启动物理备用数据库和重做应用的步骤。">启动物理备用数据库</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d7102e1294 d7102e1229 ">
                                 <p>支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d7102e1306" headers="d7102e1226 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED" title="创建物理备用数据库并设置重做传输服务后，您可能希望验证数据库修改是否已成功从主数据库传输到备用数据库。">验证物理备用数据库是否正常运行</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d7102e1306 d7102e1229 ">
                                 <p>支持</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="SBYDB4722"></a><div class="props_rev_3"><a id="GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" name="GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93"></a><h4 id="SBYDB-GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" class="sect4"><span class="enumeration_section">3.2.1</span>创建物理备用任务1：创建主数据库数据文件的备份副本</h4>
                  <div>
                     <p>只要拥有必要的归档重做日志文件以完全恢复数据库，就可以使用主数据库的任何备份副本来创建物理备用数据库。</p>
                     <div class="section">
                        <p>只要拥有必要的归档重做日志文件以完全恢复数据库，就可以使用主数据库的任何备份副本来创建物理备用数据库。Oracle建议您使用Recovery Manager实用程序（RMAN）。</p>
                        <p>有关执行数据库备份操作的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV191" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4723"></a><div class="props_rev_3"><a id="GUID-B471D788-AFD3-48B3-9709-D63C34DBC269" name="GUID-B471D788-AFD3-48B3-9709-D63C34DBC269"></a><h4 id="SBYDB-GUID-B471D788-AFD3-48B3-9709-D63C34DBC269" class="sect4"><span class="enumeration_section">3.2.2</span>创建物理备用任务2：为备用数据库创建控制文件</h4>
                  <div>
                     <p>为备用数据库创建控制文件（主数据库不必打开，但必须至少安装它）。</p>
                     <div class="section">
                        <p>以下是为备用数据库创建控制文件的示例：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; <a id="d7102e1483" class="indexterm-anchor"></a><a id="d7102e1487" class="indexterm-anchor"></a> ALTER DATABASE将STANDBY CONTROLFILE创建为'/tmp/boston.ctl';</pre><p><code class="codeph">ALTER DATABASE</code>命令指定要在备用角色中运行的数据库;在这种情况下，一个名为<code class="codeph">boston</code>的数据库。
                        </p>
                        <p>您不能将单个控制文件用于主数据库和备用数据库。他们每个人都必须拥有自己的文件。</p>
                        <div class="infoboxnote" id="GUID-B471D788-AFD3-48B3-9709-D63C34DBC269__GUID-F79A72B2-361F-4CF6-B59F-1C56B77ACDB4">
                           <p class="notep1">注意：</p>
                           <p>如果在主服务器上进行控制文件备份并在备用服务器上进行恢复（反之亦然），则将已还原系统上的快照控制文件的位置配置为默认值。（快照控制文件名的默认值是特定于平台的，并且取决于Oracle主目录。）使用RMAN <code class="codeph">CONFIGURE SNAPSHOT CONTROLFILE</code>命令手动将其重新配置为正确的值。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB5019"></a><a id="SBYDB4724"></a><div class="props_rev_3"><a id="GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" name="GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA"></a><h4 id="SBYDB-GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" class="sect4"><span class="enumeration_section">3.2.3</span>创建物理备用任务3：为备用数据库创建参数文件</h4>
                  <div>
                     <p>从主数据库使用的服务器参数文件（SPFILE）创建参数文件（PFILE）。</p>
                     <div class="section">
                        <p>执行以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>发出如下SQL语句：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PFILE ='/ tmp / initboston.ora'FROM SPFILE;</pre><p>在“ <a href="creating-oracle-data-guard-physical-standby.html#GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" title="通过创建基于Windows的服务，密码文件和SPFILE以及设置Oracle Net环境来设置环境。">设置环境以支持备用数据库”中</a> ，然后在修改该参数文件以包含适合在物理备用数据库中使用的参数值之后，从该参数文件创建服务器参数文件。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>修改上一步中创建的参数文件中的参数值。</span><div>
                              <p>虽然参数文件中的大多数初始化参数设置也适用于物理备用数据库，但必须进行一些修改。</p>
                              <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__I70559">示例3-1</a>以粗体字显示了先前在主服务器上创建的必须更改的参数。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="example" id="GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__I70559">
                        <p class="titleinexample">示例3-1修改物理备用数据库的初始化参数</p><pre class="oac_no_warn" dir="ltr">。。。DB_NAME =芝加哥<span class="bold">DB_UNIQUE_NAME = boston</span> LOG_ARCHIVE_CONFIG <a id="d7102e1617" class="indexterm-anchor"></a> = 'DG_CONFIG =（芝加哥，波士顿）' <span class="bold">CONTROL_FILES = '/ arch1 /波士顿/ control1.ctl'，</span> <span class="bold">'/arch2/boston/control2.ctl'</span> <span class="bold">DB_FILE_NAME_CONVERT =</span> <span class="bold">'/芝加哥/'， '/波士顿/'</span> <span class="bold">LOG_FILE_NAME_CONVERT ='/ chicago /'，'/ boston /'</span> LOG_ARCHIVE_FORMAT = log％t_％s_％r.arc <span class="bold">LOG_ARCHIVE_DEST_1 =</span> 'LOCATION = USE_DB_RECOVERY_FILE_DEST <span class="bold">VALID_FOR =（ALL_LOGFILES，ALL_ROLES）</span> <span class="bold">DB_UNIQUE_NAME =</span> <span class="bold">boston'LOG_ARCHIVE_DEST_2</span> <span class="bold">=</span> <span class="bold">'SERVICE =芝加哥</span> <span class="bold">ASYNC</span> <span class="bold">VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE ）</span> <span class="bold">DB_UNIQUE_NAME =芝加哥'</span> REMOTE_LOGIN_PASSWORDFILE = EXCLUSIVE STANDBY_FILE_MANAGEMENT = AUTO <span class="bold">FAL_SERVER =芝加哥</span> 。。。</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p>确保<code class="codeph">COMPATIBLE</code>初始化参数在主数据库和备用数据库上都设置为相同的值。如果值不同，则重做传输服务可能无法将重做数据从主数据库传输到备用数据库。
                        </p>
                        <p>使用<code class="codeph">SHOW PARAMETERS</code>命令验证不需要更改其他参数始终是一个好习惯。
                        </p>
                        <p>下表提供了有关<a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__I70559">示例3-1</a>中显示的参数设置的简要说明，这些参数设置与主数据库具有不同的设置。
                        </p>
                        <div class="tblformalwide" id="GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__GUID-72D11A33-652F-4E6D-BC0C-07DB98F40D62">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="This 2 column table describes each initialization parameter that was set in Example 3-3." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d7102e1685">参数</th>
                                    <th align="left" valign="bottom" width="66%" id="d7102e1688">推荐设置</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d7102e1693" headers="d7102e1685 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10242" target="_blank"><code class="codeph">DB_UNIQUE_NAME</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d7102e1693 d7102e1688 ">
                                       <p>为此数据库指定唯一名称。此名称保留在数据库中，即使主数据库和备用数据库反向角色也不会更改。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d7102e1703" headers="d7102e1685 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10021" target="_blank"><code class="codeph">CONTROL_FILES</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d7102e1703 d7102e1688 ">
                                       <p>在备用数据库上指定控制文件的路径名。<a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__I70559">例3-1</a>显示了如何为两个控制文件执行此操作。建议控制文件的第二个副本可用，以便在将良好的控制文件复制到错误控制文件的位置后可以轻松地重新启动实例。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d7102e1715" headers="d7102e1685 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10038" target="_blank"><code class="codeph">DB_FILE_NAME_CONVERT</code></a><a id="d7102e1721" class="indexterm-anchor"></a><a id="d7102e1725" class="indexterm-anchor"></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d7102e1715 d7102e1688 ">
                                       <p>指定主数据库数据文件的路径名和文件名位置，后跟备用位置。此参数将主数据库数据文件的路径名转换为备用数据文件路径名。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d7102e1733" headers="d7102e1685 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10098" target="_blank"><code class="codeph">LOG_FILE_NAME_CONVERT</code></a><a id="d7102e1739" class="indexterm-anchor"></a><a id="d7102e1743" class="indexterm-anchor"></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d7102e1733 d7102e1688 ">
                                       <p>指定主数据库联机重做日志文件的位置，后跟备用位置。此参数将主数据库日志文件的路径名转换为备用数据库上的路径名。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d7102e1751" headers="d7102e1685 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10086" target="_blank"><code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d7102e1751 d7102e1688 ">
                                       <p>指定要归档重做数据的位置。在<a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__I70559">例3-1中</a> ：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">LOG_ARCHIVE_DEST_1</code>将从主数据库接收的重做数据归档到/ arch1 / boston /中的归档重做日志文件。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LOG_ARCHIVE_DEST_2</code>当前被忽略，因为此目标仅对主角色有效。如果发生切换并且此实例成为主数据库，则它会将重做数据传输到远程芝加哥目的地。
                                             </p>
                                          </li>
                                       </ul>
                                       <p><span class="bold">注意：</span>如果配置了快速恢复区域（使用<code class="codeph">DB_RECOVERY_FILE_DEST</code>初始化参数）并且您尚未使用<code class="codeph">LOCATION</code>属性显式配置本地归档目标，则Oracle Data Guard会自动使用<code class="codeph">LOG_ARCHIVE_DEST_1</code>初始化参数（如果尚未设置）作为本地存档的默认目标。另请参阅<a href="LOG_ARCHIVE_DEST_n-parameter-attributes.html#GUID-B04FC22C-F0B0-440F-BAF4-182EE547FCC1" title="这是LOG_ARCHIVE_DEST_n初始化参数的属性列表（其中n是1到31之间的整数）。">LOG_ARCHIVE_DEST_n参数属性</a>以获取有关<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>完整信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d7102e1816" headers="d7102e1685 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10056" target="_blank"><code class="codeph">FAL_SERVER</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d7102e1816 d7102e1688 ">
                                       <p>指定FAL服务器的Oracle Net服务名称（通常这是以主角色运行的数据库）。当Boston数据库以备用角色运行时，它使用Chicago数据库作为FAL服务器，如果Chicago无法自动发送丢失的日志文件，则从该服务器获取（请求）丢失的归档重做日志文件。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__GUID-99208921-F8CD-49ED-A89B-06CAC7F8004F">
                           <p class="notep1">注意：</p>
                           <p>查看初始化参数文件以获取可能需要修改的其他参数。例如，如果备用数据库上的目录位置与主数据库上指定的目录位置不同，则可能需要修改转储目标参数。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4725"></a><div class="props_rev_3"><a id="GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7" name="GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7"></a><h4 id="SBYDB-GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7" class="sect4"><span class="enumeration_section">3.2.4</span>创建物理备用任务4：将文件从主系统复制到备用系统</h4>
                  <div>
                     <p>确保已创建所有必需的目录。使用操作系统复制实用程序将二进制文件从主系统复制到备用系统上的正确位置。</p>
                     <div class="section">
                        <p>要复制的二进制文件如下：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在<a href="creating-oracle-data-guard-physical-standby.html#GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" title="You can use any backup copy of the primary database to create the physical standby database, as long as you have the necessary archived redo log files to completely recover the database.">创建主数据库数据文件的备份副本</a>中<a href="creating-oracle-data-guard-physical-standby.html#GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" title="只要拥有必要的归档重做日志文件以完全恢复数据库，就可以使用主数据库的任何备份副本来创建物理备用数据库。">创建的</a>数据库备份 
                              </p>
                           </li>
                           <li>
                              <p>在<a href="creating-oracle-data-guard-physical-standby.html#GUID-B471D788-AFD3-48B3-9709-D63C34DBC269" title="Create the control file for the standby database (the primary database does not have to be open, but it must at least be mounted).">为备用数据库创建</a>控制文件中<a href="creating-oracle-data-guard-physical-standby.html#GUID-B471D788-AFD3-48B3-9709-D63C34DBC269" title="为备用数据库创建控制文件（主数据库不必打开，但必须至少安装它）。">创建的</a> Stan dby控制文件</p>
                           </li>
                           <li>
                              <p>在<a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" title="Create a parameter file (PFILE) from the server parameter file (SPFILE) used by the primary database.">为备用数据库创建</a>参数文件中<a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" title="从主数据库使用的服务器参数文件（SPFILE）创建参数文件（PFILE）。">创建的</a>初始化参数文件</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4726"></a><div class="props_rev_3"><a id="GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" name="GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392"></a><h4 id="SBYDB-GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" class="sect4"><span class="enumeration_section">3.2.5</span>创建物理备用任务5：设置环境以支持备用数据库</h4>
                  <div>
                     <p>通过创建基于Windows的服务，密码文件和SPFILE以及设置Oracle Net环境来设置环境。</p>
                     <div class="section">
                        <p>执行以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>如果备用数据库将托管在Windows系统上，则使用ORADIM实用程序创建Windows服务。例如：</span><div><pre class="oac_no_warn" dir="ltr">oradim -NEW -SID波士顿-STARTMODE手册</pre><p>ORADIM实用程序自动确定应为其创建此服务的用户名，并提示输入该用户名的密码（如果该用户名需要密码）。有关使用ORADIM实用程序的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=NTQRF05011" target="_blank"><span class="italic">适用于Microsoft Windows的Oracle数据库平台指南</span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>将远程登录密码文件从主数据库系统复制到备用数据库系统。</span><div>
                              <p>如果操作系统身份验证用于管理用户，并且SSL用于重做传输身份验证，则此步骤是可选的。如果没有，则将远程登录密码文件从主数据库复制到物理备用数据库系统上的相应目录。</p>
                              <p>主服务器上对密码文件的任何后续更改都会自动传播到备用服务器。对密码文件的更改可以包括授予或撤消管理权限（ <code class="codeph">SYSDG</code> ， <code class="codeph">SYSOPER</code> ， <code class="codeph">SYSDBA</code>等）的时间，以及更改具有管理权限的任何用户的密码的时间。更新的密码文件仍必须手动复制到远程同步实例，因为远程同步实例会接收重做，但不会应用它。在远程同步实例中密码文件是最新的后，主服务器上包含密码更新的重做会自动传播到任何备用数据库，这些数据库设置为从该远程同步实例接收重做。应用重做时，备用数据库上的密码文件会更新。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果尚未配置，则在备用系统上配置并启动侦听器。</span><div>
                              <p>请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=NETAG010" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南”。</span></a></p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建Oracle Net服务名称。</span><div>
                              <p>在主系统和备用系统上，使用Oracle Net Manager为重做传输服务使用的主数据库和备用数据库创建网络服务名称。此示例中的网络服务名称是<code class="codeph">chicago</code>和<code class="codeph">boston</code> 。
                              </p>
                              <p>Oracle Net服务名称必须解析为使用您为主数据库和备用数据库配置侦听器时指定的相同协议，主机地址，端口和服务的连接描述符。连接描述符还必须指定使用专用服务器。</p>
                              <p>有关服务名称的详细信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=NETAG175" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南”</span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在空闲备用数据库上，使用SQL <code class="codeph">CREATE</code>语句从任务3中编辑的文本初始化参数文件为备用数据库创建服务器参数文件。例如：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE SPFILE FROM PFILE ='initboston.ora';</pre></div>
                        </li>
                        <li class="stepexpand"><span>如果主数据库具有数据库加密钱包，则将其复制到备用数据库系统并配置备用数据库以使用此钱包。</span><div>
                              <div class="infoboxnote" id="GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392__GUID-F01449D9-4D5B-4578-8D7B-AF51FFD8DF1C">
                                 <p class="notep1">注意：</p>
                                 <p>每当更新主加密密钥时，必须将数据库加密钱包从主数据库系统复制到每个备用数据库系统。</p>
                                 <p>除非备用数据库配置为指向包含主数据库中当前主加密密钥的数据库加密钱包或硬件安全模块，否则无法访问备用数据库中的加密数据。</p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="SBYDB4727"></a><div class="props_rev_3"><a id="GUID-3D65210D-9FE5-490E-938E-57FC2E07A569" name="GUID-3D65210D-9FE5-490E-938E-57FC2E07A569"></a><h4 id="SBYDB-GUID-3D65210D-9FE5-490E-938E-57FC2E07A569" class="sect4"><span class="enumeration_section">3.2.6</span>创建物理备用任务6：启动物理备用数据库</h4>
                  <div>
                     <p>这些是启动物理备用数据库和重做应用的步骤。</p>
                     <ol>
                        <li class="stepexpand"><span>在备用数据库上，发出以下SQL语句以启动并装入数据库：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; STARTUP MOUNT;</pre></div>
                        </li>
                        <li class="stepexpand"><span>恢复在<a href="creating-oracle-data-guard-physical-standby.html#GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" title="You can use any backup copy of the primary database to create the physical standby database, as long as you have the necessary archived redo log files to completely recover the database.">创建主数据库数据文件的备份副本中</a>获取的数据文件<a href="creating-oracle-data-guard-physical-standby.html#GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" title="只要拥有必要的归档重做日志文件以完全恢复数据库，就可以使用主数据库的任何备份副本来创建物理备用数据库。">的备份，</a>并将其复制<a href="creating-oracle-data-guard-physical-standby.html#GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7" title="Ensure that all required directories are created. Use an operating system copy utility to copy binary files from the primary system to their correct locations on the standby system.">到主系统</a>中的<a href="creating-oracle-data-guard-physical-standby.html#GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7" title="确保已创建所有必需的目录。使用操作系统复制实用程序将二进制文件从主系统复制到备用系统上的正确位置。">复制文件中，并备份到备用系统</a>上的备用系统。</span></li>
                        <li class="stepexpand"><span>在备用数据库上，发出以下命令以启动重做应用：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE  - &gt;从会话断开连接;</pre><p>该语句包括<code class="codeph">DISCONNECT FROM SESSION</code>选项，以便Redo Apply在后台会话中运行。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="SBYDB4728"></a><div class="props_rev_3"><a id="GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED" name="GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED"></a><h4 id="SBYDB-GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED" class="sect4"><span class="enumeration_section">3.2.7</span>创建物理备用任务7：验证物理备用数据库是否正常运行</h4>
                  <div>
                     <p>创建物理备用数据库并设置重做传输服务后，您可能希望验证数据库修改是否已成功从主数据库传输到备用数据库。</p>
                     <div class="section">
                        <p>在备用数据库上，查询<code class="codeph">V$DATAGUARD_PROCESS</code>视图以验证是否正在从主数据库传输重做并将其应用于备用数据库。
                        </p><pre class="pre codeblock"><code>SQL&gt; SELECT ROLE，THREAD＃，SEQUENCE＃，来自V $ DATAGUARD_PROCESS的行动;角色＃SEQUENCE＃ACTION ------------------------ ---------- ---------- ------------ RFS ping 1 9 IDLE恢复应用slave 0 0 IDLE恢复应用slave 0 0 IDLE managed recovery 0 0 IDLE recovery logmerger 1 9 APPLYING_LOG RFS archive 0 0 IDLE RFS async 1 9 IDLE</code></pre><p><code class="codeph">recovery logmerger</code>角色显示正在备用数据库中应用重做。
                        </p>
                        <div class="infoboxnote" id="GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED__GUID-06BE2ED0-AC7E-44B3-9009-CEDDBB1D1F3F">
                           <p class="notep1">注意：</p>
                           <p>Oracle建议您使用<code class="codeph">V$DATAGUARD_PROCESS</code>视图而不是<code class="codeph">V$MANAGED_STANDBY</code>视图，该视图自Oracle Database 12 <span class="italic">c</span>第2版（12.2.0.1）起不再使用，并且可能在将来的发行版中被禁用。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB4729"></a><div class="props_rev_3"><a id="GUID-3A0F8F9C-EF69-4BE4-9F7B-98AED4BEC4AC" name="GUID-3A0F8F9C-EF69-4BE4-9F7B-98AED4BEC4AC"></a><h3 id="SBYDB-GUID-3A0F8F9C-EF69-4BE4-9F7B-98AED4BEC4AC" class="sect3"><span class="enumeration_section">3.3</span>创建物理备用：创建后步骤</h3>
               <div>
                  <p>物理备用数据库运行后，可以升级数据保护模式，也可以启用闪回数据库。</p>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>升级数据保护模式</p>
                           <p><a href="oracle-data-guard-protection-modes.html#GUID-16298839-9B8A-4E58-8EC9-27912E57F1CE" title="Oracle Data Guard允许您设置不同的数据保护模式。">Oracle Data Guard保护模式</a>提供有关配置不同数据保护模式的信息。
                           </p>
                        </li>
                        <li>
                           <p>启用闪回数据库</p>
                           <p>闪回数据库无需在故障转移后重新创建主数据库。闪回数据库使您能够在最近的某个时间将数据库返回到其状态，这比传统的时间点恢复快得多，因为它不需要从备份恢复数据文件，也不需要重做数据的广泛应用。您可以在主数据库，备用数据库或两者上启用闪回数据库。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-3A0F8F9C-EF69-4BE4-9F7B-98AED4BEC4AC__GUID-8F0493AE-E67B-4CEE-8C3F-3F33CCE172C6">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="examples-of-using-oracle-data-guard.html#GUID-1163448F-6B18-4A44-AA8D-7CDF0D1360FB" title="After a failover occurs, the original primary database can no longer participate in the Oracle Data Guard configuration until it is repaired and established as a standby database in the new configuration.">使用闪回数据库</a>和<a href="examples-of-using-oracle-data-guard.html#GUID-BAA5ED38-29A0-4E8D-8435-AA083D19C13E" title="If an error occurrs on the primary database in an Oracle Data Guard configuration in which the standby database is using real-time apply, then the same error is applied on the standby database. if Flashback Database is enabled, you can revert the primary and standby databases back to their pre-error condition.">使用闪回数据库</a> <a href="examples-of-using-oracle-data-guard.html#GUID-1163448F-6B18-4A44-AA8D-7CDF0D1360FB" title="发生故障转移后，原始主数据库无法再参与Oracle Data Guard配置，直到在新配置中将其修复并建立为备用数据库。">将失败的主数据库转换为备用数据库</a> <a href="examples-of-using-oracle-data-guard.html#GUID-BAA5ED38-29A0-4E8D-8435-AA083D19C13E" title="如果备用数据库使用实时应用的Oracle Data Guard配置中的主数据库发生错误，则在备用数据库上应用相同的错误。如果启用了闪回数据库，则可以将主数据库和备用数据库还原为其错误前的状态。">发布Open Resetlogs语句后</a> ，显示如何在Oracle Data Guard环境中使用闪回数据库的方案</p>
                           </li>
                           <li>
                              <p>有关闪回数据库的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV71000" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-7C55FE8A-50C3-4601-9ADA-98BE6D65F1DD" name="GUID-7C55FE8A-50C3-4601-9ADA-98BE6D65F1DD"></a><h3 id="SBYDB-GUID-7C55FE8A-50C3-4601-9ADA-98BE6D65F1DD" class="sect3"><span class="enumeration_section">3.4</span>使用DBCA创建Data Guard待机</h3>
               <div>
                  <p>Database Configuration Assistant（DBCA）还可以用作创建Oracle Data Guard物理备用数据库的简单命令行方法。</p>
                  <div class="section">用于创建物理备用数据库的DBCA命令限定符是<code class="codeph">createDuplicateDB</code> 。
                     <p>DBCA只能用于为非多租户主数据库创建备用数据库。此外，此功能仅创建单实例备用数据库，而不是Oracle Real Application Clusters（Oracle RAC）数据库。如果需要，可以手动或使用Oracle Enterprise Manager Cloud Control将备用数据库转换为Oracle RAC备用数据库。</p>
                     <p>基本的<code class="codeph">createDuplicateDB</code>命令具有以下语法：</p><pre class="pre codeblock"><code>dbca -createDuplicateDB -gdbName global_database_name -primaryDBConnectionString easy_connect_string_to_primary -sid database_system_identifier [-createAsStandby [-dbUniqueName db_unique_name_for_standby]] [-customScripts scripts_list]</code></pre><p>有关<code class="codeph">createDuplicateDB</code>选项的更多信息，包括使用自定义脚本，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN-GUID-7F4B1A64-5B08-425A-A62E-854542B3FD4E" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                     </p>
                     <p>在以下两个示例中，主数据库是<code class="codeph">chicago</code> ，它位于主系统<code class="codeph">myprimary.domain</code> 。每个示例都在执行命令的系统上创建物理备用数据库， <code class="codeph">boston</code> 。在示例中使用<code class="codeph">initParams</code>参数来说明如何在备用创建命令中使用其他DBCA参数。在这些示例中， <code class="codeph">initParams</code>用于显式设置备用数据库的<code class="codeph">INSTANCE_NAME</code>以匹配<code class="codeph">DB_UNIQUE_NAME</code> ， <code class="codeph">boston</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>第一个示例创建备用数据库，之后不执行任何自定义脚本。</p><pre class="pre codeblock"><code>dbca -silent -createDuplicateDB -primaryDBConnectionString myprimary.domain：1523 / chicago.domain -gdbName chicago.domain -sid boston -initParams instance_name = boston -createAsStandby</code></pre><pre class="pre codeblock"><code>输入SYS用户密码：监听器配置步骤33％完成辅助实例创建66％完成RMAN重复100％完成查看日志文件“/u01/app/oracle/product/12.2.0/dbhome_1/cfgtoollogs/dbca/chicago/chicago .log“了解更多详情。
</code></pre><p>以下示例与上一示例完全相同，不同之处在于它运行名为<code class="codeph">/tmp/test.sql</code>的SQL脚本，该脚本可用于执行创建后操作。
                     </p><pre class="pre codeblock"><code>dbca -silent -createDuplicateDB -primaryDBConnectionString myprimary.domain：1523 / chicago.domain -gdbName chicago.domain -sid boston -initParams instance_name = boston -createAsStandby -customScripts /tmp/test.sql</code></pre><pre class="pre codeblock"><code>输入SYS用户密码：监听器配置步骤25％完成辅助实例创建50％完成RMAN重复75％完成运行自定义脚本100％完成查看日志文件“/u01/app/oracle/product/12.2.0/dbhome_1/cfgtoollogs /dbca/chicago/chicago.log“了解更多详情。</code></pre><div class="infoboxnote" id="GUID-7C55FE8A-50C3-4601-9ADA-98BE6D65F1DD__GUID-63C5A9DB-F02C-4A57-B495-D843724CE629">
                        <p class="notep1">注意：</p>即使需要在物理备用系统上运行侦听器，也不必为任一系统上的数据库配置Oracle Net服务名称来执行这些命令。在这些示例中，Easy Connect命名方法用于创建与主数据库<code class="codeph">Chicago</code>的连接，以完成备用数据库<code class="codeph">Boston</code>创建。在将新备用数据库添加到Data Guard配置之前，首先要在两个系统上配置Oracle Net服务名称描述符，如<a href="creating-oracle-data-guard-physical-standby.html#GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" title="Set up the environment by creating a Windows-based service, a password file and an SPFILE, and setting up the Oracle Net environment.">创建物理备用任务5：设置环境以支持备用数据库</a>中的步骤4 <a href="creating-oracle-data-guard-physical-standby.html#GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" title="通过创建基于Windows的服务，密码文件和SPFILE以及设置Oracle Net环境来设置环境。">所述</a> 。
                     </div>
                     <p>当这些命令完成且没有任何错误时，物理备用<code class="codeph">Boston</code>就可以添加到Data Guard配置中。作为添加它的一部分，您需要在<code class="codeph">Chicago</code>和<code class="codeph">Boston</code>定义Data Guard参数，如<a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" title="从主数据库使用的服务器参数文件（SPFILE）创建参数文件（PFILE）。">创建物理备用任务3：为备用数据库创建参数文件中所示</a> 。（可选）如果您具有Oracle Data Guard代理配置，则可以使用代理<code class="codeph">ADD DATABASE</code>命令将新备用<code class="codeph">ADD DATABASE</code>添加到您的配置中（请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=DGBKR-GUID-EA723918-2509-4BBC-871B-163885DE3C73" target="_blank"><span><cite>Oracle Data Guard Broker</cite></span></a> ）。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SBYDB5213"></a><div class="props_rev_3"><a id="GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69" name="GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69"></a><h3 id="SBYDB-GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69" class="sect3"><span class="enumeration_section">3.5</span>创建CDB的物理备用</h3>
               <div>
                  <p>您可以创建多租户容器数据库（CDB）的物理备用数据库，就像创建常规主数据库的物理备用数据库一样。</p>
                  <p>以下是在创建和使用CDB的物理备用时要注意的一些行为差异：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果执行切换或故障转移操作，则整个CDB将进行角色更改。如果您使用了<code class="codeph">ENABLED_PDBS_ON_STANDBY</code>初始化参数，那么请注意主数据库和备用数据库中不存在每个PDB的可能性。
                        </p>
                     </li>
                     <li>
                        <p>数据库角色在CDB级别定义，而不是在单个容器级别定义。</p>
                     </li>
                     <li>
                        <p>任何与角色更改相关的DDL都必须在根容器中执行，因为角色与整个CDB相关联。各个可插拔数据库（PDB）没有自己的角色。</p>
                     </li>
                     <li>
                        <p>在CDB的物理备用数据库中，SQL语句的语法通常与非容器数据库的语法相同。但是，某些声明（包括以下声明）的效果可能会有所不同：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ALTER DATABASE RECOVER MANAGED STANDBY</code>仅在根容器中<code class="codeph">ALTER DATABASE RECOVER MANAGED STANDBY</code>函数;它不允许在PDB中使用。</p>
                           </li>
                           <li>
                              <p>角色与整个CDB相关联;个人PDB没有自己的角色。因此，以下角色更改与物理备用数据库关联的DDL会影响整个CDB：</p>
                              <p><code class="codeph">ALTER DATABASE SWITCHOVER到target_db_name</code></p>
                              <p><code class="codeph">ALTER DATABASE激活物理备用</code> 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>如果您已经打开了根容器，则备用数据库支持<code class="codeph">ALTER PLUGGABLE DATABASE [OPEN|CLOSE]</code> SQL语句。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ALTER PLUGGABLE DATABASE RECOVER</code>不支持<code class="codeph">ALTER PLUGGABLE DATABASE RECOVER</code>语句。（待机恢复始终处于CDB级别。）
                        </p>
                     </li>
                     <li>
                        <p>要管理多租户环境，您必须具有<code class="codeph">CDB_DBA</code>角色。
                        </p>
                     </li>
                     <li>
                        <p>Oracle建议备用数据库有自己的密钥库。</p>
                     </li>
                     <li>
                        <p>在多租户环境中，必须将重做传送到备用数据库的根容器。</p>
                        <p>以下是如何确定是否将重做发送到根容器的示例。假设您的主数据库具有以下设置：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_2 ='SERVICE = boston ASYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = boston'</pre><p>Redo正被运往<code class="codeph">boston</code> 。根容器的容器ID（ <code class="codeph">CON_ID</code> ）始终为1，因此您必须确保服务<code class="codeph">boston</code>的<code class="codeph">CON_ID</code>为1。为此，请检查<code class="codeph">tnsnames.ora</code>文件中的服务名称。例如：</p><pre class="oac_no_warn" dir="ltr">boston =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = boston-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = boston.us.example.com））</pre><p><code class="codeph">boston</code>的服务名称是<code class="codeph">boston.us.example.com</code> 。
                        </p>
                        <p>在备用数据库上，查询<code class="codeph">CDB_SERVICES</code>视图以确定<code class="codeph">CON_ID</code> 。例如：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT NAME，CON_ID FROM CDB_SERVICES; NAME CON_ID --------------------------------------------- boston.us .example.com 1</pre><p>查询结果显示<code class="codeph">boston</code>的<code class="codeph">CON_ID</code>为1。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69__GUID-729D8B44-38CE-4544-8064-CB5B4464B758">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关CDB的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=CNCPT89249" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </li>
                        <li>
                           <p>有关创建密钥库的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ASOAG10284" target="_blank"><span class="italic">“Oracle数据库高级安全性指南</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="SBYDB5260"></a><div class="props_rev_3"><a id="GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2" name="GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2"></a><h3 id="SBYDB-GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2" class="sect3"><span class="enumeration_section">3.6</span>在主数据库中创建PDB</h3>
               <div>
                  <p>在Oracle Data Guard配置中，主数据库上的可插拔数据库（PDB）的创建方式与创建常规数据库上的PDB的方式相同。</p>
                  <p>本主题列出了在执行任何类型的PDB创建时Data Guard和Oracle Multitenant选项如何交互的关键点。有关详细信息和示例，请参阅<a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> My Oracle Support说明2049127.1。</p>
                  <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=MULTI-GUID-C95E8613-C556-4818-BE64-B2129AC2F8A2" target="_blank"><span class="italic">Oracle Multitenant管理员指南</span></a>中介绍了在常规数据库上创建PDB的步骤。在执行这些步骤之前，请务必阅读以下内容：</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您可以指定要在多租户容器数据库（CDB）的物理备用数据库上复制的PDB子集。为此，请使用<code class="codeph">ENABLED_PDBS_ON_STANDBY</code>初始化参数指定PDB列表或在<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句中使用<code class="codeph">STANDBYS</code>子句，或两者都使用。
                        </p>
                        <p><code class="codeph">ENABLED_PDBS_ON_STANDBY</code>参数（请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN-GUID-A2EC2381-D9C0-4612-87C9-A225C7BCE8C4" target="_blank">ENABLED_PDBS_ON_STANDBY</a> ）仅在物理备用数据库上有效;它被主数据库忽略。（如果该数据库成为备用数据库，则可以在主数据库上设置它。）它可用于指定在物理备用数据库上应该或不应该启用哪些PDB。如果未指定参数，则除非使用<code class="codeph">STANDBYS</code>子句，否则将在备用数据库上创建CDB中的所有PDB。
                        </p>
                        <p><code class="codeph">STANDBYS</code>子句对以后是启用还是禁用恢复没有影响。SQL <code class="codeph">CREATE PLUGGABLE DATABASE</code>语句的<code class="codeph">STANDBYS</code>子句具有以下语法：</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE ... STANDBYS = {（ <span class="variable" translate="no">'cdb_name', 'cdb_name', ...</span> ）|没有| ALL [ <span class="variable" translate="no">'cdb_name', 'cdb_name', ...</span> （ <span class="variable" translate="no">'cdb_name', 'cdb_name', ...</span> ）]}</code></pre><ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph"><span class="codeinlineitalic">cdb_name</span></code>是要包含PDB的物理备用<code class="codeph"><span class="codeinlineitalic">cdb_name</span></code>的<code class="codeph">DB_UNIQUE_NAME</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NONE</code>排除在任何备用CDB中创建PDB。当PDB从所有备用CDB中排除时，PDB的数据文件处于脱机状态，并在所有备用CDB上标记为未命名。在创建PDB之后实例化的任何新备用CDB必须禁用PDB以进行明确恢复，以将其从备用CDB中排除。在备用CDB上排除PDB之后，可以在备用CDB上启用PDB。</p>
                           </li>
                           <li>
                              <p><code class="codeph">ALL</code> （默认值）包括在所有备用CDB中创建的PDB。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">EXCEPT <span class="codeinlineitalic">cdb_name</span></code>包括在所有备用CDB中创建的PDB，但<code class="codeph">DB_UNIQUE_NAME</code>中此子句中列出的CDB除外。</p>
                           </li>
                        </ul>
                        <p>当在<code class="codeph">STANDBYS</code>子句中提供CDB名称列表时，列表必须括在括号中，并且每个名称必须用单引号括起来。<code class="codeph">DB_UNIQUE_NAME</code>的值最多为30个字符，不区分大小写。以下字符在数据库名称中有效：字母数字字符，下划线（_），数字符号（＃）和美元符号（$）。
                        </p>
                        <p>列表中的备用数据库必须预先填充所需的文件，除非从种子创建PDB，或者备用数据库运行Active Data Guard的本地克隆，或使用<code class="codeph">STANDBY_PDB_SOURCE_FILE_DBLINK</code>参数的远程克隆。
                        </p>
                        <p></p>
                     </li>
                     <li>
                        <div class="p">当您从另一个PDB或同一主CDB中的种子PDB创建PDB作为本地克隆时，请注意以下事项：<ul style="list-style-type:disc">
                              <li>
                                 <p>从种子创建新的PDB时，备用数据库会自动实例化文件。</p>
                              </li>
                              <li>
                                 <p>在Active Data Guard环境中，当PDB克隆在同一CDB中时，Data Guard会自动实例化文件。</p>
                              </li>
                              <li>
                                 <p>在非Active Data Guard环境中，当PDB克隆在同一CDB中时，请在<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句中使用<code class="codeph">STANDBYS</code>子句，并在以后启用恢复。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p></p>
                     </li>
                     <li>
                        <div class="p">要在执行PDB远程克隆或插件时自动维护备用数据库，请使用以下初始化参数：<ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">STANDBY_PDB_SOURCE_FILE_DBLINK</code> - 用于远程克隆。指定用于在主服务器上克隆PDB的数据库链接的名称。当在备用数据库上应用PDB克隆操作的重做时，它使用该数据库链接连接到源数据库，以将克隆进程重复到目标备用数据库。此参数仅在Active Data Guard中可用，因为它访问数据库字典以获取有关链接的特定信息。
                                 </p>
                                 <p>克隆操作的源PDB必须处于只读模式，持续时间为克隆到主服务器和克隆到备用服务器。</p>
                                 <p>在<span class="italic">不</span>使用<code class="codeph">STANDBY_PDB_SOURCE_FILE_DBLINK</code>参数的远程克隆上，用于创建PDB的SQL <code class="codeph">CREATE PLUGGABLE DATABASE</code>语句必须使用<code class="codeph">STANDBYS=NONE</code>子句。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">STANDBY_PDB_SOURCE_FILE_DIRECTORY</code> - 用于插件。指定存储用于重复插件的PDB文件的目录位置。当在备用数据库中应用PDB插件操作的重做时，它会在目录位置搜索数据文件，找到它们后，将它们复制到备用数据库要求它们基于<code class="codeph">DB_CREATE_FILE_DEST</code>和<code class="codeph">DB_FILE_NAME_CONVERT</code>参数设置的<code class="codeph">DB_CREATE_FILE_DEST</code> 。
                                 </p>
                                 <div class="infoboxnote" id="GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2__GUID-A55C24FE-9EC1-4E74-81B4-D761B10ED658">
                                    <p class="notep1">注意：</p>这些文件必须是源PDB数据文件的映像副本。应在为源PDB创建清单XML文件后创建副本。</div>
                              </li>
                           </ul>
                        </div>
                        <p>这些参数应在使用后重置，不再需要。设置和重置这些参数不会对运行时产生影响，因为这样做不需要重新启动实例。</p>
                        <p>有关使用这些参数的详细信息，请参阅<a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> My Oracle Support说明2274735.1。
                        </p>
                     </li>
                     <li>
                        <p>要从XML文件创建PDB，请将XML文件中指定的数据文件复制到备用数据库。</p>
                        <p>当PDB从XML文件插入主数据库时，必须允许配置中的所有备用数据库访问源PDB的文件。（唯一的例外是通过使用<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句中的<code class="codeph">STANDBYS</code>子句或<code class="codeph">ENABLED_PDBS_ON_STANDBY</code>初始化参数来延迟恢复的<code class="codeph">CREATE PLUGGABLE DATABASE</code> 。）
                        </p>
                        <p>要在配置中提供可访问源PDB文件的备用数据库，请使用<code class="codeph">STANDBY_PDB_SOURCE_FILE_DIRECTORY</code>初始化参数或将源PDB的文件复制到备用站点，通常是要插入主数据库的同一组PDB文件。在主数据库执行插件操作之前，应将文件复制到备用数据库，以最大限度地减少对托管备用数据库恢复的中断。确保将文件复制到备用数据库中适当的位置，托管备用数据库恢复可以在其中找到它们，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果数据文件驻留在标准操作系统文件系统中，则备用数据库中文件的位置基于<code class="codeph">DB_FILE_NAME_CONVERT</code>参数的值。有关设置主数据库初始化参数的更多详细信息，请参阅<a href="creating-oracle-data-guard-physical-standby.html#GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" title="在主数据库上，您可以定义在数据库处于主要角色时控制重做传输服务的初始化参数。">设置主数据库初始化参数</a></p>
                           </li>
                           <li>
                              <p>如果数据文件驻留在ASM中，则使用ASMCMD实用程序将文件复制到备用数据库中的以下位置：</p><pre class="oac_no_warn" dir="ltr"><code class="codeph"><span class="codeinlineitalic">db_create_file_dest</span></code> / <code class="codeph"><span class="codeinlineitalic">db_unique_name</span></code> / <code class="codeph"><span class="codeinlineitalic">GUID</span></code> / datafile</pre><p><code class="codeph">GUID</code>参数是分配给PDB的全局唯一标识符;一旦分配，它不会改变。要查找<code class="codeph">GUID</code>参数的值，请在从原始源容器中拔出PDB之前查询<code class="codeph">V$CONTAINERS</code>视图。以下示例显示如何查找源容器中PDB容器ID为<code class="codeph">3</code>的PDB的<code class="codeph">GUID</code>参数值：</p><pre class="oac_no_warn" dir="ltr">SELECT guid FROM V $ CONTAINERS WHERE con_id = 3; GUID D98C12257A951FC4E043B623F00A7AF5</pre><p>在此示例中，如果<code class="codeph">DB_CREATE_FILE_DEST</code>参数的值为<code class="codeph">+DATAFILE</code>且<code class="codeph">DB_UNIQUE_NAME</code>参数的值为<code class="codeph">BOSTON</code> ，则数据文件将复制到：</p><pre class="oac_no_warn" dir="ltr">+ DATAFILE / BOSTON / D98C12257A951FC4E043B623F00A7AF5 /数据文件</pre></li>
                        </ul>
                     </li>
                  </ul>
                  <p>除非在<code class="codeph">DB_FILE_NAME_CONVERT</code>数据库上配置了<code class="codeph">DB_FILE_NAME_CONVERT</code>数据库初始化参数，否则备用数据库上的数据文件的路径名必须与在主数据库上创建PDB时的结果路径名相同。在这种情况下，备用数据库上的数据文件的路径名是应用了<code class="codeph">DB_FILE_NAME_CONVERT</code>的主数据库上的路径名。
                  </p>
                  <div class="infoboxnotealso" id="GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2__GUID-2E301C1C-F712-488E-90EB-68248F5D0901">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关SQL语句<code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code>详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=SQLRF55686" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
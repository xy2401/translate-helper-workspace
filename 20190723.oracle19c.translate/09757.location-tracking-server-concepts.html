<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The Oracle Spatial and Graph location tracking server enables you to define regions, track the movement of objects into or out of those regions, and receive notifications when certain movements occur."></meta>
      <meta name="description" content="The Oracle Spatial and Graph location tracking server enables you to define regions, track the movement of objects into or out of those regions, and receive notifications when certain movements occur."></meta>
      <title>位置跟踪服务器</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="The Oracle Spatial and Graph location tracking server enables you to define regions, track the movement of objects into or out of those regions, and receive notifications when certain movements occur."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T14:11:51-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94799-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="lrs-linear-referencing-system-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="spatial-analysis-mining.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="SPATL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="lrs-linear-referencing-system-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="spatial-analysis-mining.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="spatial-concepts-usage.html" property="item" typeof="WebPage"><span property="name">概念和使用信息</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">位置跟踪服务器</li>
            </ol>
            <a id="GUID-44411566-DA36-4C87-8412-5CEEE6A70518" name="GUID-44411566-DA36-4C87-8412-5CEEE6A70518"></a>
            
            <h2 id="SPATL-GUID-44411566-DA36-4C87-8412-5CEEE6A70518" class="sect2"><span class="enumeration_chapter">8</span>位置跟踪服务器</h2>
         </header>
         <div class="ind">
            <div>
               <p>通过Oracle Spatial and Graph位置跟踪服务器，您可以定义区域，跟踪对象移入或移出这些区域，以及在发生特定移动时接收通知。</p>
               <p><a id="d66206e49" class="indexterm-anchor"></a>有关位置跟踪PL / SQL子程序的参考信息，请参阅<a href="SDO_TRKR-reference.html#GUID-EDDAAD84-8633-4E5F-8770-CB323CCD61E0" title="MDSYS.SDO_TRKR包中包含使用位置跟踪服务器的子程序。">SDO_TRKR程序包（位置跟踪）</a> 。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="location-tracking-server-concepts.html#GUID-3C072452-0300-4B91-9C30-B34FE0069F2D">关于位置跟踪服务器</a><br>随着位置成为我们生活中越来越重要的方面，并且随着位置感测设备变得无处不在，对于能够连续监视用户位置数据的应用的需求不断增加。对位置数据的监视可以转换为在系统中生成的警报。
                  </li>
                  <li class="ulchildlink"><a href="location-tracking-server-concepts.html#GUID-B753991F-E9DD-4F7F-8579-755094480C2C">位置跟踪集</a><br>位置跟踪服务器针对已知的一组区域跟踪一组移动对象，并根据需要生成通知。在此框架中，对象和区域集称为<span class="bold">跟踪集</span> 。
                  </li>
                  <li class="ulchildlink"><a href="location-tracking-server-concepts.html#GUID-7A488F8D-E8F9-4E60-B4BC-B0E82A8BF858">位置跟踪服务器的数据类型</a><br>与位置跟踪相关联的PL / SQL子程序具有特定于位置跟踪服务器的数据类型的参数。
                  </li>
                  <li class="ulchildlink"><a href="location-tracking-server-concepts.html#GUID-209F22A6-F656-4560-82C2-1FEB6AD399E8">位置跟踪服务器的数据结构</a><br>位置跟踪服务器要求用户在创建服务器时指定跟踪集名称。基于此名称，将创建其他数据结构。
                  </li>
                  <li class="ulchildlink"><a href="location-tracking-server-concepts.html#GUID-B2B8CA71-2754-4A47-B130-5504471FE2F9">位置跟踪服务器的工作流程</a><br>典型的位置跟踪工作流涉及多个操作，一些是必需的，另一些是可选
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="spatial-concepts-usage.html#GUID-EEEED709-34A1-46EA-9AF3-869FD06E3076">概念和使用信息</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-3C072452-0300-4B91-9C30-B34FE0069F2D" name="GUID-3C072452-0300-4B91-9C30-B34FE0069F2D"></a><h3 id="SPATL-GUID-3C072452-0300-4B91-9C30-B34FE0069F2D" class="sect3"><span class="enumeration_section">8.1</span>关于位置跟踪服务器</h3>
               <div>
                  <p>随着位置成为我们生活中越来越重要的方面，并且随着位置感测设备变得无处不在，对于能够连续监视用户位置数据的应用的需求不断增加。对位置数据的监视可以转换为在系统中生成的警报。</p>
                  <p>例如，货运公司可能希望监控其10,000辆卡车的网络，因为它们沿着指定的路线移动到目的地。他们可能想要跟踪卡车在指定的路线范围内的移动，并期望生成通知以检测车辆与其期望路线的不期望的偏差。主动的基于位置的服务（LBS）概括了这样的应用程序，其用于跟踪指定区域内或外的订户的位置以用于各种目的，例如基于位置的广告和关于附近的朋友的通知。</p>
                  <p>Oracle Spatial and Graph位置跟踪服务器提供：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>一个简单的框架，用于通过PL / SQL接口在数据库中设置<span class="italic">位置跟踪网络</span></p>
                     </li>
                     <li>
                        <p>用于跟踪网络内对象的连续位置监控的API</p>
                     </li>
                     <li>
                        <p>使用Oracle Advanced Queuing的传入位置更新和跟踪请求以及传出相关通知的排队机制</p>
                     </li>
                     <li>
                        <p>对数据库中的数千个相关对象进行高效，连续的位置监控</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="location-tracking-server-concepts.html#GUID-44411566-DA36-4C87-8412-5CEEE6A70518" title="通过Oracle Spatial and Graph位置跟踪服务器，您可以定义区域，跟踪对象移入或移出这些区域，以及在发生特定移动时接收通知。">位置跟踪服务器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B753991F-E9DD-4F7F-8579-755094480C2C" name="GUID-B753991F-E9DD-4F7F-8579-755094480C2C"></a><h3 id="SPATL-GUID-B753991F-E9DD-4F7F-8579-755094480C2C" class="sect3"><span class="enumeration_section">8.2</span>位置跟踪集</h3>
               <div>
                  <p>位置跟踪服务器针对已知的一组区域跟踪一组移动对象，并根据需要生成通知。在此框架中，对象和区域集称为<span class="bold">跟踪集</span> 。
                  </p>
                  <p>在数据库中，这些是在包含两列的表中进行管理的：</p><pre class="oac_no_warn" dir="ltr">region_id NUMBER，geometry SDO_GEOMETRY</pre><p>REGION_ID是此表的主键，GEOMETRY是跟踪区域的几何。</p>
                  <p>创建跟踪集时会创建其他几个结构。您可以创建任意数量的跟踪集，每个跟踪集可以包含数千个区域。如果某个区域不再用于跟踪目的，则应从跟踪区域表中删除该区域。</p>
                  <p>还需要创建一组要跟踪的对象。每个对象必须指定对象的ID和区域ID，以指定跟踪此对象的区域。也就是说，可以针对一个或多个跟踪区域跟踪每个对象。通过将跟踪器消息<code class="codeph">TRACKER_MSG</code>插入跟踪队列来创建对象。
                  </p>
                  <p>跟踪器消息对象指定<code class="codeph">object_id</code> ， <code class="codeph">region_id</code>和<code class="codeph">operation</code> 。<code class="codeph">operation</code>参数具有以下字符串值之一。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">I</code> ：每次由<code class="codeph">object_id</code>定义的对象<span class="bold">在</span> <code class="codeph">region_id</code>定义的区域<span class="bold">内</span>移动时，都会发出通知消息 
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">O</code> ：每当由<code class="codeph">object_id</code>定义的对象在<code class="codeph">region_id</code>定义的区域<span class="bold">之外</span>移动时，就会发出通知消息。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">T</code> ：仅当<code class="codeph">object_id</code>定义的对象从<code class="codeph">region_id</code>定义的区域内部<span class="bold">转移</span>到外部或从外部<span class="bold">转移</span>到内部时，才会发出通知消息。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">D</code> ： <span class="bold">禁用</span>由<code class="codeph">region_id</code>定义的区域中的<code class="codeph">object_id</code>定义的对象的跟踪。要再次启用此对象的跟踪，必须发送另一条跟踪消息。
                        </p>
                     </li>
                  </ul>
                  <p>创建对象并配置跟踪区域后，可以发送对象的新位置消息。当物体在太空中移动时，它们的位置会发生变每次发送新的位置消息时，它都被插入到位置消息队列中，由位置跟踪服务器处理。处理位置消息并根据需要生成通知消息。应用程序可以监视通知队列，并在生成新通知时处理通知消息。</p>
                  <p>用户运行位置跟踪服务器需要以下额外授权。</p><pre class="pre codeblock"><code>GRANT aq_administrator_role，创建作业，管理&lt;USER&gt;的调度程序;将dbms_aq上的执行权限授予&lt;USER&gt;; GRANT在dbms_aqadm上执行&lt;USER&gt;; GRANT在dbms_lock上执行&lt;USER&gt;; GRANT在dbms_aqin上执行&lt;USER&gt;; GRANT在dbms_aqjms上执行&lt;USER&gt;;</code></pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="location-tracking-server-concepts.html#GUID-44411566-DA36-4C87-8412-5CEEE6A70518" title="通过Oracle Spatial and Graph位置跟踪服务器，您可以定义区域，跟踪对象移入或移出这些区域，以及在发生特定移动时接收通知。">位置跟踪服务器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-7A488F8D-E8F9-4E60-B4BC-B0E82A8BF858" name="GUID-7A488F8D-E8F9-4E60-B4BC-B0E82A8BF858"></a><h3 id="SPATL-GUID-7A488F8D-E8F9-4E60-B4BC-B0E82A8BF858" class="sect3"><span class="enumeration_section">8.3</span>位置跟踪服务器的数据类型</h3>
               <div>
                  <p>与位置跟踪相关联的PL / SQL子程序具有特定于位置跟踪服务器的数据类型的参数。</p>
                  <p>这些子程序记录在<a href="SDO_TRKR-reference.html#GUID-EDDAAD84-8633-4E5F-8770-CB323CCD61E0" title="MDSYS.SDO_TRKR包中包含使用位置跟踪服务器的子程序。">SDO_TRKR包（位置跟踪）中</a> 。具体数据类型具有以下定义：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>LOCATION_MSG</p><pre class="oac_no_warn" dir="ltr">（object_id INTEGER，时间TIMESTAMP，x NUMBER，y NUMBER）</pre></li>
                     <li>
                        <p>LOCATION_MSG_ARR</p><pre class="oac_no_warn" dir="ltr">location_msg的VARRAY（1000）</pre></li>
                     <li>
                        <p>LOCATION_MSG_PKD</p><pre class="oac_no_warn" dir="ltr">对象（arr location_msg_arr）</pre></li>
                     <li>
                        <p>NOTIFICATION_MSG</p><pre class="oac_no_warn" dir="ltr">（object_id INTEGER，region_id INTEGER，time TIMESTAMP，x NUMBER，y NUMBER，state VARCHAR2（8））</pre></li>
                     <li>
                        <p>PROC_MSG</p><pre class="oac_no_warn" dir="ltr">（object_id INTEGER，时间TIMESTAMP，x NUMBER，y NUMBER，region_id INTEGER，alert_when VARCHAR2（2））</pre></li>
                     <li>
                        <p>PROC_MSG_ARR</p><pre class="oac_no_warn" dir="ltr">proc_msg的VARRAY（1000）</pre></li>
                     <li>
                        <p>PROC_MSG_PKD</p><pre class="oac_no_warn" dir="ltr">对象（arr proc_msg_arr）</pre></li>
                     <li>
                        <p>TRACKER_MSG</p><pre class="oac_no_warn" dir="ltr">（object_id INTEGER，region_id INTEGER，operation VARCHAR2（2））</pre></li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="location-tracking-server-concepts.html#GUID-44411566-DA36-4C87-8412-5CEEE6A70518" title="通过Oracle Spatial and Graph位置跟踪服务器，您可以定义区域，跟踪对象移入或移出这些区域，以及在发生特定移动时接收通知。">位置跟踪服务器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-209F22A6-F656-4560-82C2-1FEB6AD399E8" name="GUID-209F22A6-F656-4560-82C2-1FEB6AD399E8"></a><h3 id="SPATL-GUID-209F22A6-F656-4560-82C2-1FEB6AD399E8" class="sect3"><span class="enumeration_section">8.4</span>位置跟踪服务器的数据结构</h3>
               <div>
                  <p>位置跟踪服务器要求用户在创建服务器时指定跟踪集名称。基于此名称，将创建其他数据结构。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold"><span class="italic">&lt;TS_NAME&gt;</span> _TRACKING_REGIONS</span> （region_id NUMBER，geometry MDSYS.SDO_GEOMETRY）是一个表，其中包含跟踪集&lt;TS_NAME&gt;中定义的跟踪区域多边形。创建服务器后，用户必须将多边形插入此表中。所有多边形必须是大地测量（使用SRID 8307）和二维。该表具有在REGION_ID列上定义的主键。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold"><span class="italic">&lt;TS_NAME&gt;</span> _TRACKER</span> （object_id NUMBER，region_id NUMBER，queue_no NUMBER，alert_when VARCHAR2（2））是一个表，其条目映射对象与跟踪对象的区域之间的关系。该表具有在OBJECT_ID和REGION_ID列上定义的主键。该表使用TRACKER_MSG类型进行管理;用户不应直接更新此表。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold"><span class="italic">&lt;TS_NAME&gt;</span> _TRACKER_QUEUES</span> （num_loc_queues NUMBER，num_trkr_queues NUMBER）是一个保存服务器所需队列信息的表。服务器填充并维护该表;用户永远不应该修改此表。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold"><span class="italic">&lt;TS_NAME&gt;</span> _TRACKER_LOG</span> （message_level VARCHAR2（1），message VARCHAR2（512），ts TIMESTAMP WITH TIMEZONE）是一个包含服务器生成的日志消息的表。消息级别“I”表示信息性消息，消息级别“E”表示错误消息。删除跟踪集时不会删除此表。但是，如果随后创建了同名的跟踪集，则该表将被新的跟踪集截断并重用。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold"><span class="italic">&lt;TS_NAME&gt;</span> _NOTIFICATIONS</span> （object_id NUMBER，region_id NUMBER，time TIMESTAMP，x NUMBER，y NUMBER，state VARCHAR2（8））是提供给用户以存储来自通知队列的消息的辅助表。此表中列的布局与NOTIFICATION_MSG类型的列匹配。X和Y列是当时在region_id中提示通知object_id的坐标。STATE列显示该区域是INSIDE还是OUTSIDE。对于跟踪类型INSIDE和OUTSIDE，此值永远不会更改。对于跟踪类型TRANSITION，此列是生成通知时对象的状态。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold"><span class="italic">&lt;TS_NAME&gt;</span> _TRAJECTORY</span>是位置跟踪服务器当前未使用的辅助表。
                        </p>
                     </li>
                  </ul>
                  <p>除了这些表之外，位置跟踪服务器还创建一组高级队列（AQ）对象，用于管理位置，跟踪和通知消息。例如，所有队列都有<span class="italic">&lt;TS_NAME&gt;</span>的前缀。 <span class="italic">&lt;TS_NAME&gt;</span> _TRACKER_Q_1和<span class="italic">&lt;TS_NAME&gt;</span> _LOCATION_Q_1。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="location-tracking-server-concepts.html#GUID-44411566-DA36-4C87-8412-5CEEE6A70518" title="通过Oracle Spatial and Graph位置跟踪服务器，您可以定义区域，跟踪对象移入或移出这些区域，以及在发生特定移动时接收通知。">位置跟踪服务器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B2B8CA71-2754-4A47-B130-5504471FE2F9" name="GUID-B2B8CA71-2754-4A47-B130-5504471FE2F9"></a><h3 id="SPATL-GUID-B2B8CA71-2754-4A47-B130-5504471FE2F9" class="sect3"><span class="enumeration_section">8.5</span>位置跟踪服务器的工作流程</h3>
               <div>
                  <p>典型的位置跟踪工作流涉及多个操作，一些是必需的，另一些是可选</p>
                  <p>典型的工作流程包含几个步骤：</p>
                  <ol>
                     <li>
                        <p>创建跟踪集。</p>
                     </li>
                     <li>
                        <p>（可选）显示已创建的跟踪集表。</p>
                     </li>
                     <li>
                        <p>启动跟踪集。</p>
                     </li>
                     <li>
                        <p>（可选）显示跟踪集使用的队列。</p>
                     </li>
                     <li>
                        <p>（可选）显示跟踪集使用的计划程序作业。</p>
                     </li>
                     <li>
                        <p>插入多个区域的多边形。</p>
                     </li>
                     <li>
                        <p>创建要跟踪的对象 - 区域对。</p>
                     </li>
                     <li>
                        <p>（可选）显示跟踪集中的对象 - 区域对。</p>
                     </li>
                     <li>
                        <p>发送位置信息。</p>
                     </li>
                     <li>
                        <p>（可选）显示已发送的位置消息。</p>
                     </li>
                     <li>
                        <p>将通知消息出列到通知表中。</p>
                     </li>
                     <li>
                        <p>（可选）禁用跟踪服务器的对象 - 区域对。</p>
                     </li>
                     <li>
                        <p>停止跟踪集。</p>
                     </li>
                     <li>
                        <p>删除跟踪集。</p>
                     </li>
                  </ol>
                  <p>以下是位置跟踪服务器工作流程的简单示例。</p>
                  <div class="example" id="GUID-B2B8CA71-2754-4A47-B130-5504471FE2F9__GUID-C8F15372-AADD-4000-A777-1661738B1897">
                     <p class="titleinexample">示例8-1位置跟踪服务器工作流程</p><pre class="pre codeblock"><code>- 创建一个名为sample的跟踪集，其中包含一个跟踪器/进程 - 队列对和一个位置队列。EXEC sdo_trkr.create_tracking_set（'sample'，1,1）; - 可选：显示已创建的跟踪集表SELECT table_name FROM user_tables WHERE table_name LIKE'SAMPLE％'ORDER BY table_name; TABLE_NAME ---------------------- SAMPLE_LOCATION_QT_1  - 位置队列的AQ队列表SAMPLE_NOTIFICATIONS  - 用于存储通知消息的辅助表SAMPLE_NOTIFICATION_QT  - 通知队列的AQ队列表SAMPLE_PROC_QT_1  - 进程队列的AQ队列表SAMPLE_TRACKER  - 表，将包含对象区域跟踪对SAMPLE_TRACKER_LOG  - 表，包含来自服务器SAMPLE_TRACKER_QT_1的日志消息 - 用于跟踪器队列的AQ队列表SAMPLE_TRACKER_QUEUES  - 表，包含跟踪集队列元数据SAMPLE_TRACKING_REGIONS  - 表，将包含区域几何SAMPLE_TRAJECTORY  - 表，当前未使用 - 启动跟踪集EXEC sdo_trkr.start_tracking_set（'sample'）; - 可选：显示跟踪集使用的队列SELECT name FROM user_queues WHERE name LIKE'SAMPLE％'ORDER BY name; NAME --------------------- SAMPLE_LOCATION_Q_1 SAMPLE_NOTIFICATION_Q SAMPLE_PROC_Q_1 SAMPLE_TRACKER_Q_1  - 可选：显示跟踪集SELECT job_name使用的调度程序作业，状态FROM user_scheduler_jobs WHERE job_name LIKE'SAMPLE ％'ORDER BY job_name; JOB_NAME STATE -------------------------- SAMPLE_LOC_JOB_1 RUNNING SAMPLE_TRKR_JOB_1 RUNNING  - 为区域1插入多边形。此多边形必须是大地测量（使用SRID 8307） - 和二维。该区域也可以是多边形。INSERT INTO SAMPLE_TRACKING_REGIONS VALUES（1，MDSYS.SDO_GEOMETRY（2003,8307，null，sdo_elem_info_array（1,1003,1），sdo_ordinate_array（0,0,5,0,5,5,0,5,0,0））） ; - 创建在区域1中跟踪的两个对象，对象1和对象2。- 对象1在区域1内时发送通知消息。- 对象2在区域1之外时发送通知消息。EXEC sdo_trkr.send_tracking_msg（'SAMPLE'，mdsys.tracker_msg（1,1，'I'））; EXEC sdo_trkr.send_tracking_msg（'SAMPLE'，mdsys.tracker_msg（2,1，'O'））; - 可选：显示跟踪集SELECT object_id，region_id，alert_when FROM sample_tracker中使用的对象 - 区域对; OBJECT_ID REGION_ID ALERT_WHEN ---------- ---------- ----------- 1 1 I 2 1 O  - 发送2个位置信息。对象1和对象2都移动到（1,1）EXEC sdo_trkr.send_location_msgs（'SAMPLE'，mdsys.location_msg_arr（mdsys.location_msg（1，'01 -AUG-16 01.01.46.000000 PM'，1,1），mdsys。 location_msg（2，'01 -AUG-16 01.02.46.000000 PM'，8,8）））; - 可选：显示生成2通知消息SELECT a.name，b.ready FROM user_queues a，v $ aq b WHERE a.name ='SAMPLE_NOTIFICATION_Q'AND a.qid = b.qid ORDER BY a.name; NAME READY ---------------------- ------ SAMPLE_NOTIFICATION_Q 2  - 将通知消息出列到通知表DECLARE消息mdsys.notification_msg; BEGIN LOOP sdo_trkr.get_notification_msg（tracking_set_name =&gt;'SAMPLE'，message =&gt; message，deq_wait =&gt; 2）; - 等待最多2秒钟的消息IF（消息IS NULL）然后退出;万一; INSERT INTO sample_notifications（object_id，region_id，time，x，y，state）（SELECT message.object_id，message.region_id，message.time，message.x，message.y，message.state）;结束循环;结束; - 查询对象id，区域id，（x，y）坐标和对象 - 与按照对象位置消息一起发送的时间排序的区域的关系。SELECT object_id，region_id，x，y，state FROM sample_notifications ORDER BY time; OBJECT_ID REGION_ID XY状态---------- ---------- --- --- ------- 1 1 1 1 INSIDE 2 1 8 8 OUTSIDE  - 可选：禁用跟踪服务器的对象区域对EXEC sdo_trkr.send_tracking_msg（'SAMPLE'，mdsys.tracker_msg（1,1，'D'））; EXEC sdo_trkr.send_tracking_msg（'SAMPLE'，mdsys.tracker_msg（2,1，'D'））; - 停止跟踪集。这将停止跟踪集 - 队列及其调度程序作业。运行stop_tracking_set  - 不会删除跟踪服务器使用的表和队列 - 因此可以重新运行start_tracking_set，并且所有 - 对象和区域数据仍然可用。- 这必须在删除跟踪集EXEC sdo_trkr.stop_tracking_set（'sample'）之前完成; - 删除跟踪集。这将完全删除跟踪 - 设置队列和表。一旦完成，跟踪集的所有痕迹都将被删除，但日志表保留原样 - 调试目的。如果创建了同名的另一个跟踪集 - 则会截断日志表。EXEC sdo_trkr.drop_tracking_set（'sample'）;</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="location-tracking-server-concepts.html#GUID-44411566-DA36-4C87-8412-5CEEE6A70518" title="通过Oracle Spatial and Graph位置跟踪服务器，您可以定义区域，跟踪对象移入或移出这些区域，以及在发生特定移动时接收通知。">位置跟踪服务器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>SQLJ简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQLJ Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQLJ Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sqlj-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T08:20:03-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96458-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="getting-started.html" title="Previous" type="text/html"></link>
      <link rel="next" href="key-programming-considerations.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQLJ Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JSQLJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="getting-started.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="key-programming-considerations.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQLJ开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQLJ简介</li>
            </ol>
            <a id="GUID-B3A3C319-5C61-40C6-B3FB-37C2BD98AD48" name="GUID-B3A3C319-5C61-40C6-B3FB-37C2BD98AD48"></a><a id="JSQLJ136"></a>
            
            <h2 id="JSQLJ-GUID-B3A3C319-5C61-40C6-B3FB-37C2BD98AD48" class="sect2"><span class="enumeration_chapter">3</span> SQLJ简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章概述了SQLJ的功能和方案。讨论了以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-7EDDF612-2C7C-4023-90F8-DCF291811D1B">SQLJ概述</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-C824BC0E-4EE3-4F0D-9969-2F19B018E743">SQLJ组件概述</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676">SQLJ标准的Oracle扩展概述</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-79F6A0F5-6BCB-4509-8015-B6263933E152">基本翻译步骤和运行时处理</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B">SQLJ示例代码</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-24B99BA3-A097-447B-82F6-E234FFD7B9CA">替代部署方案</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-8F7DF27B-A577-47F3-B93B-9E38A1CC55B5">替代发展方案</a></p>
                  </li>
               </ul>
            </div><a id="JSQLJ137"></a><div class="props_rev_3"><a id="GUID-7EDDF612-2C7C-4023-90F8-DCF291811D1B" name="GUID-7EDDF612-2C7C-4023-90F8-DCF291811D1B"></a><h3 id="JSQLJ-GUID-7EDDF612-2C7C-4023-90F8-DCF291811D1B" class="sect3">SQLJ概述</h3>
               <div>
                  <p>本节介绍SQLJ的基本概念，并讨论Oracle数据库应用程序中Java和PL / SQL之间的互补关系。</p>
                  <p>SQLJ使应用程序程序员能够以与Java设计理念兼容的方式在Java代码中嵌入SQL语句。SQLJ程序是一个包含嵌入式SQL语句的Java程序，符合国际标准化组织（ISO）标准SQLJ语言参考语法。Oracle SQLJ实现支持ISO SQLJ标准。该标准仅涵盖<span class="bold">静态SQL</span>操作，这些操作是在用户运行应用程序时不会实时更改的预定义SQL操作。Oracle SQLJ实现还提供了支持<span class="bold">动态SQL</span>操作的扩展，这些操作<span class="italic">不是</span>预定义的，操作可以实时更改。也可以在SQLJ应用程序中通过Java数据库连接（JDBC）代码或PL / SQL代码使用动态SQL操作。典型应用程序包含比动态SQL操作更多的静态SQL操作。
                  </p>
                  <p>SQLJ由转换程序和运行时组件组成，可以平滑地集成到您的开发环境中。您可以使用<code class="codeph">sqlj</code>前端实用程序在一个步骤中运行转换程序来翻译，编译和自定义代码。转换过程用对SQLJ运行时的调用替换嵌入式SQL语句，SQLJ运行时处理SQL语句。在ISO SQLJ标准中，这通常（但不一定）通过调用JDBC驱动程序来执行。要访问Oracle数据库，通常使用Oracle JDBC驱动程序。运行SQLJ应用程序时，将启动运行时以处理SQL操作。
                  </p>
                  <p>SQLJ转换器在概念上与其他Oracle预编译器类似，使您能够检查SQL语法，根据模式中可用的内容验证SQL操作，并检查Java类型与相应数据库类型的兼容性。通过这种方式，您可以在开发期间捕获错误，而不是用户在运行时捕获错误。翻译人员检查以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>嵌入式SQL语句的语法</p>
                     </li>
                     <li>
                        <p>SQL构造，针对指定的数据库模式，以确保特定SQL实体集中的一致性（可选）</p>
                        <p>例如，它验证表名和列名。</p>
                     </li>
                     <li>
                        <p>数据类型，以确保Java和SQL之间交换的数据具有兼容的类型和正确的类型转换</p>
                     </li>
                  </ul>
                  <p>直接在Java代码中嵌入SQL语句的SQLJ方法非常方便和简洁，它可以降低需要数据库连接的Java程序的开发和维护成本。</p>
                  <p>Java程序可以通过JDBC或SQLJ调用PL / SQL存储过程和匿名块。特别是，SQLJ提供了从SQLJ语句中调用存储过程和函数的语法，并且还支持SQLJ语句中的嵌入式PL / SQL匿名块。</p>
                  <div class="infoboxnote" id="GUID-7EDDF612-2C7C-4023-90F8-DCF291811D1B__GUID-7C2120C3-2878-45FA-B401-4257803015C5">
                     <p class="notep1">注意：</p>
                     <p>在SQLJ语句中使用PL / SQL匿名块是支持SQLJ应用程序中的动态SQL操作的一种方法。但是，Oracle SQLJ实现包含直接支持动态SQL的扩展。</p>
                  </div>
               </div>
            </div><a id="JSQLJ138"></a><div class="props_rev_3"><a id="GUID-C824BC0E-4EE3-4F0D-9969-2F19B018E743" name="GUID-C824BC0E-4EE3-4F0D-9969-2F19B018E743"></a><h3 id="JSQLJ-GUID-C824BC0E-4EE3-4F0D-9969-2F19B018E743" class="sect3">SQLJ组件概述</h3>
               <div>
                  <p>本节介绍Oracle SQLJ实现中的两个主要SQLJ组件。它包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-BDC15EAD-5848-43A6-8261-19D3BD12C189">SQLJ翻译功能</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6">SQLJ运行时</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ139"></a><div class="props_rev_3"><a id="GUID-BDC15EAD-5848-43A6-8261-19D3BD12C189" name="GUID-BDC15EAD-5848-43A6-8261-19D3BD12C189"></a><h4 id="JSQLJ-GUID-BDC15EAD-5848-43A6-8261-19D3BD12C189" class="sect4">SQLJ翻译功能</h4>
                  <div>
                     <p>此组件是在创建SQLJ源代码后运行的预编译器。</p>
                     <p>翻译器以纯Java编写，支持编程语法，使您能够在SQLJ可执行语句中嵌入SQL语句。SQLJ可执行语句和SQLJ声明之前是<code class="codeph">#sql</code>标记，可以在SQLJ源代码文件中穿插Java语句。SQLJ源代码文件名必须具有<code class="codeph">.sqlj</code>扩展名。以下是SQLJ语句示例：</p><pre class="oac_no_warn" dir="ltr">#sql {INSERT INTO employees（first_name，salary）VALUES（'Joe'，43000）};</pre><p>翻译器生成<code class="codeph">.java</code>文件。
                     </p>
                     <p>您可以使用<code class="codeph">sqlj</code>命令行实用程序调用转换程序。在命令行上，指定需要翻译的文件和任何所需的SQLJ选项设置。
                     </p>
                     <div class="infoboxnotealso" id="GUID-BDC15EAD-5848-43A6-8261-19D3BD12C189__GUID-AFEDAB80-A310-4341-92FC-DF6002F01781">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="translator-command-line-and-options.html#GUID-5161125F-E86D-472D-BC57-67AB9E0B08EB">翻译命令行和选项</a></p>
                     </div>
                  </div>
               </div><a id="JSQLJ140"></a><div class="props_rev_3"><a id="GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6" name="GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6"></a><h4 id="JSQLJ-GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6" class="sect4">SQLJ运行时</h4>
                  <div>
                     <p>该组件也是用纯Java编写的，每次运行SQLJ应用程序时都会自动调用。</p>
                     <p>Oracle JDBC调用直接生成到已翻译的代码中，并且SQLJ运行时扮演的角色要小得多。</p>
                     <div class="infoboxnotealso" id="GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6__GUID-AD315FB0-CDB2-4059-83FC-20664E7B6F00">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="translator-run-time-functionality.html#GUID-AFF5C519-028E-4554-98E8-B8FF103515D1">SQLJ运行时</a> ”</span></p>
                     </div>
                     <div class="infoboxnote" id="GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6__GUID-09F95188-9764-4D7E-B710-60165E789B70">
                        <p class="notep1">注意：</p>
                        <p>自Oracle Database <span class="italic">10g</span>第1版以来，SQLJ仅支持Oracle JDBC驱动程序。</p>
                     </div>
                  </div>
               </div>
            </div><a id="JSQLJ142"></a><div class="props_rev_3"><a id="GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676" name="GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676"></a><h3 id="JSQLJ-GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676" class="sect3">SQLJ标准的Oracle扩展概述</h3>
               <div>
                  <p>Oracle SQLJ实现支持ISO SQLJ标准。使用ISO SQLJ标准功能需要符合Java2平台企业版（J2EE）的Java Development Kit（JDK）6或更高版本的环境。SQLJ转换器接受比ISO SQLJ标准指定的更广泛的SQL语法。</p>
                  <div class="infoboxnote" id="GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676__GUID-38D90CD2-04C6-46F9-B745-A28F1F06F7F8">
                     <p class="notep1">注意：</p>
                     <p>Oracle SQLJ实现需要JDK 6或JDK 7的运行时环境。</p>
                  </div>
                  <p>ISO SQLJ标准不仅解决了SQL的SQL-92 Entry级别方言，而且还支持超出此范围的扩展。Oracle SQLJ实现支持Oracle SQL方言，它是SQL-92 Entry级别的超集。如果需要创建与其他数据库一起使用的SQLJ程序，请避免使用不在SQL-92的Entry级别中的SQL语法和SQL类型，因此在其他环境中可能不受支持。</p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6">SQLJ类型扩展</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-54E27173-C5B1-402A-B673-ABFDB7693461">SQLJ功能扩展</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676__GUID-DBD9C238-50FA-4BD4-92B9-1614F572EB35">
                     <p class="notep1">也可以看看：</p>
                     <p>有关Oracle数据库提供的SQLJ扩展的信息，请<a href="type-support.html#GUID-5890BFD9-7FF0-4ED3-BBDB-9CC1B729E2C9">键入Support</a> ， <a href="objects-collections-and-OPAQUE-types.html#GUID-93B64A3E-4928-4039-BC10-D7B05E768BFF">Objects_ Collections_和OPAQUE Types</a></p>
                  </div>
               </div><a id="JSQLJ143"></a><div class="props_rev_3"><a id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6" name="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6"></a><h4 id="JSQLJ-GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6" class="sect4">SQLJ类型扩展</h4>
                  <div>
                     <div class="section">
                        <p>Oracle SQLJ实现支持以下Java类型作为SQLJ标准的扩展：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">oracle.sql.*</code>类的实例作为SQL数据的包装器。
                              </p>
                              <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-8FC73C14-F619-43C0-AB85-C70114B1FA6E">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="type-support.html#GUID-9C82F6F4-197C-4B80-8491-B3CF03861384">支持JDBC 2.0 LOB类型和Oracle类型扩展</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>自定义Java类，对象引用和集合。例如，实现<code class="codeph">oracle.sql.类<code class="codeph">oracle.sql.ORAData</code>接口或JDBC标准<code class="codeph">java.sql.SQLdata</code>接口。
                              </p>
                              <div class="infoboxnote" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-42D1ECC0-3903-4697-B574-5F710E589F32">
                                 <p class="notep1">注意：</p>
                                 <p><code class="codeph">SQLData</code>接口是标准的。实现它的类由JDBC驱动程序和其他供应商的数据库支持。
                                 </p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-C05B9042-4CF2-424E-8724-3A059CDC370E">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="objects-collections-and-OPAQUE-types.html#GUID-7B1AEDD4-C53B-47C9-973E-DD23EAA7608E">自定义Java类</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>流实例： <code class="codeph">BinaryStream</code>和<code class="codeph">CharacterStream</code> ，后者替换不推荐使用的<code class="codeph">AsciiStream</code>和<code class="codeph">UnicodeStream</code> ，用作输出参数。
                              </p>
                              <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-3AFF9339-564F-4D8E-8B8C-742D7820BAA6">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="type-support.html#GUID-5C678045-D184-41AB-B339-9E1E12FE4D46">支持Streams</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>迭代器和结果集实例作为输入或输出参数。SQLJ标准仅在结果表达式或转换语句中指定它们。</p>
                              <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-FD2623CD-C35C-4978-BF7B-981192D43291">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="basic-language-features.html#GUID-D3CC3825-1F5D-45AF-9E96-5848B98B7D21">使用迭代器和结果集作为主机变量</a> ”</span>和<span class="q">“ <a href="basic-language-features.html#GUID-F45F4FF0-6D2A-455D-A8A0-0BC3770845B2">使用迭代器和结果集作为存储函数返回</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>Unicode字符类型： <code class="codeph">NString</code> ， <code class="codeph">NCHAR</code> ， <code class="codeph">NCLOB</code>和<code class="codeph">NcharCharacterStream</code> ，后者取代了不推荐使用的<code class="codeph">NcharAsciiStream</code>和<code class="codeph">NcharUnicodeStream</code> 。
                              </p>
                              <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-EACE920B-6F91-4281-8401-D1077BEE8DFC">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="translator-run-time-functionality.html#GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077">SQLJ扩展全球化支持</a> ”</span></p>
                              </div>
                           </li>
                        </ul>
                        <p>在应用程序运行时，使用任何这些扩展都需要在转换期间生成特定于Oracle的代码或Oracle自定义，以及Oracle SQLJ运行时和Oracle JDBC驱动程序。如果要在其他环境中使用代码，请不要使用这些或其他类型。要确保您的应用程序是可移植的，请使用SQLJ <code class="codeph">-warn=portable</code>标志。
                        </p>
                        <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-3189FE4E-943C-42F5-8754-CF27AD84C5F4">
                           <p class="notep1">也可以看看：</p>
                           <p>请参阅<span class="q">“ <a href="translator-command-line-and-options.html#GUID-5161125F-E86D-472D-BC57-67AB9E0B08EB">转换器命令行和选项</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ144"></a><div class="props_rev_3"><a id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461" name="GUID-54E27173-C5B1-402A-B673-ABFDB7693461"></a><h4 id="JSQLJ-GUID-54E27173-C5B1-402A-B673-ABFDB7693461" class="sect4">SQLJ功能扩展</h4>
                  <div>
                     <p>Oracle SQLJ实现还支持以下扩展功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>特定于Oracle的代码生成</p>
                           <p>这直接生成JDBC代码。程序执行期间绕过了大部分SQLJ运行时功能。</p>
                           <div class="infoboxnotealso" id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461__GUID-6A9515AD-2A18-4632-8812-81F93BB5E597">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="key-programming-considerations.html#GUID-E0F0C310-400E-4F9C-8036-B44FB2A3E2FD">特定于Oracle的代码生成（无配置文件）</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>SQLJ语句中的动态SQL</p>
                           <div class="infoboxnotealso" id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461__GUID-8EC515DE-A5FB-4597-8BCB-FFDBCFFCCD83">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="advanced-language-features.html#GUID-1A237022-5F1E-4C29-87D3-8E913F59C3FA">支持动态SQL</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>具有其他导航方法的可滚动结果集迭代器，以及来自结果集迭代器和可滚动结果集迭代器的<code class="codeph">FETCH</code>语法</p>
                           <div class="infoboxnotealso" id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461__GUID-EB175895-72BE-4F48-AE21-72AE26CA0140">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“可<a href="advanced-language-features.html#GUID-398B03B4-138D-41E6-A34B-B4911ACF7A18">滚动迭代器</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>列和参数大小定义的优化标志</p>
                           <div class="infoboxnotealso" id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461__GUID-B88857F9-82D0-4716-BEA3-DAD572D99CCD">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="performance-and-debugging.html#GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50">列定义</a> ”</span> ， <span class="q">“ <a href="performance-and-debugging.html#GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D">参数大小定义</a> ”</span>和<span class="q">“ <a href="translator-command-line-and-options.html#GUID-51E9826F-8FD9-48CD-9423-9DA8CDC10180">代码生成_优化_和CHAR比较的选项</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>修改的转换器行为的标志，例如通过标识符绑定主机表达式或在<code class="codeph">WHERE</code>子句的<code class="codeph">CHAR</code>比较中计算空白填充</p>
                        </li>
                        <li>
                           <p>SQLJ语句缓存连接上下文</p>
                           <div class="infoboxnotealso" id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461__GUID-B9095FBA-BBDA-4B6A-81F3-F0F62223F314">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="performance-and-debugging.html#GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A">声明缓存</a> ”</span></p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="JSQLJ145"></a><div class="props_rev_3"><a id="GUID-79F6A0F5-6BCB-4509-8015-B6263933E152" name="GUID-79F6A0F5-6BCB-4509-8015-B6263933E152"></a><h3 id="JSQLJ-GUID-79F6A0F5-6BCB-4509-8015-B6263933E152" class="sect3">基本翻译步骤和运行时处理</h3>
               <div>
                  <p>SQLJ源代码包含标准Java源代码和SQLJ类声明以及包含嵌入式SQL语句的SQLJ可执行语句的混合。SQLJ源文件具有<code class="codeph">.sqlj</code>文件扩展名。文件名必须是合法的Java标识符。如果源文件声明了公共类，则文件名必须与此类的名称匹配。如果源文件未声明公共类，则文件名应与第一个定义的类的名称匹配。
                  </p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4">SQLJ翻译步骤</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-68C57EA9-1ECC-424A-902C-25C087DB9AA0">译者输入输出综述</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-A5327908-94E5-4D54-AD9D-4CDDE6181BD0">SQLJ运行时处理</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ147"></a><a id="JSQLJ148"></a><a id="JSQLJ146"></a><div class="props_rev_3"><a id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4" name="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4"></a><h4 id="JSQLJ-GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4" class="sect4">SQLJ翻译步骤</h4>
                  <div>
                     <div class="section">
                        <p>编写<code class="codeph">.sqlj</code>文件后，必须运行SQLJ来处理文件。下面的示例显示SQLJ以最简单的形式运行，没有带有公共类<code class="codeph">Foo</code>的<code class="codeph">Foo.sqlj</code>源文件的命令行选项：</p><pre class="oac_no_warn" dir="ltr">％sqlj Foo.sqlj</pre><p>此命令根据平台运行前端脚本或实用程序。脚本或实用程序读取命令行，调用Java虚拟机（JVM）并将参数传递给它。JVM调用SQLJ转换器并充当前端。</p>
                        <div class="figure" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-0B49E7D8-4C57-4CE1-83AC-1AB534FB5196">
                           <p class="titleinfigure">图3-1控制流程</p><img src="img/flow_of_control.gif" alt="下面是图3-1的描述" title="下面是图3-1的描述" longdesc="img_text/flow_of_control.html"><br><a href="img_text/flow_of_control.html">“图3-1控制流程”的描述</a></div>
                        <!-- class="figure" -->
                        <p>发生以下事件序列，假设每个步骤完成且没有错误：</p>
                        <ol>
                           <li>
                              <p>JVM调用SQLJ转换器。</p>
                           </li>
                           <li>
                              <p>翻译器解析<code class="codeph">.sqlj</code>文件中的SQLJ和Java代码，检查正确的SQLJ语法并查找声明的SQL数据类型与相应的Java主机变量之间的类型不匹配。<a id="d6042e662" class="indexterm-anchor"></a> <span class="bold">宿主变量</span>是Java本地变量，在SQL操作中用作输入或输出参数。
                              </p>
                              <div class="infoboxnotealso" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-8AAC5066-1FFD-4911-8C09-645A8E45559B">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="basic-language-features.html#GUID-7B85631F-98E1-4A9A-BBC1-181A53D0D03D">Java Host_ Context_和结果表达式</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>根据SQLJ选项设置，转换程序不会调用联机语义检查程序，脱机解析程序或两者。这是为了验证嵌入式SQL和PL / SQL语句的语法，并检查代码中的数据库元素是否与适当的数据库模式一起使用，以进行在线检查。即使两者都没有指定，也会执行一些基本的检查。</p>
                              <p>指定联机检查后，SQLJ将连接到指定的数据库模式，以验证数据库是否支持应用程序使用的所有数据库表，存储过程和SQL语法。它还验证SQLJ应用程序中的主机变量类型是否与相应数据库列的数据类型兼容。</p>
                           </li>
                           <li>
                              <p>对于特定于Oracle的SQLJ代码生成（ <code class="codeph">-codegen=oracle</code> ，这是默认的），SQL操作将直接转换为Oracle JDBC调用。
                              </p>
                              <div class="infoboxnotealso" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-4CF14C0C-1F89-4CEC-98A8-00DBF84FF371">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="key-programming-considerations.html#GUID-E0F0C310-400E-4F9C-8036-B44FB2A3E2FD">特定于Oracle的代码生成（无配置文件）</a> ”</span></p>
                              </div>
                              <p>生成的Java代码放入包含以下内容的<code class="codeph">.java</code>输出文件中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>来自<code class="codeph">.sqlj</code>源文件的任何类定义和Java代码</p>
                                 </li>
                                 <li>
                                    <p>作为SQLJ迭代器和连接上下文声明的结果创建的类定义</p>
                                    <div class="infoboxnotealso" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-81FBF5C3-5F4B-4EB8-AA60-C889397CC974">
                                       <p class="notep1">也可以看看：</p>
                                       <p><span class="q">“ <a href="basic-language-features.html#GUID-74A36C5C-B63E-4489-A464-47387ABCB24E">SQLJ声明概述</a> ”</span></p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>调用Oracle JDBC驱动程序以实现嵌入式SQL操作的操作</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>JVM调用Java编译器，该编译器通常（但不一定）是随Sun Microsystems JDK提供的标准<code class="codeph">javac</code> 。</p>
                           </li>
                           <li>
                              <p>编译器编译在步骤4中生成的Java源文件，并根据需要生成Java <code class="codeph">.class</code>文件。这将包括每个定义的类的<code class="codeph">.class</code>文件，每个SQLJ声明。
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-C7882D07-F495-4768-B542-35123A091656">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="translator-run-time-functionality.html#GUID-D48A9F0A-67FD-4B49-B219-7EC6FEE1F4E3">内部翻译操作</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-514BD678-C238-4104-9080-7C688C8DC71E">一般SQLJ笔记</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在翻译和运行SQLJ应用程序时请考虑以下事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span>前面是一个非常通用的例子。</span>也可以在命令行上指定要编译的现有<code class="codeph">.java</code>文件，也可以用于类型解析。
                              </p>
                              <div class="infoboxnotealso" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-9EEE21E6-ABC1-4662-B95E-80809DFFE904">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-F40E0AE9-4103-4878-B21B-7B0BC275F67C">翻译命令行和属性文件</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>您的应用程序在运行时需要Oracle JDBC驱动程序，即使您的代码不使用Oracle特定的功能。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ149"></a><div class="props_rev_3"><a id="GUID-68C57EA9-1ECC-424A-902C-25C087DB9AA0" name="GUID-68C57EA9-1ECC-424A-902C-25C087DB9AA0"></a><h4 id="JSQLJ-GUID-68C57EA9-1ECC-424A-902C-25C087DB9AA0" class="sect4">译者输入输出综述</h4>
                  <div>
                     <p>本节总结了SQLJ转换器的输入内容，输出内容以及输出的位置。本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-F6F8C7BD-70B8-4C22-B98F-CD44962D3243">译者输入</a></p>
                        </li>
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-AB5D0342-DC8A-4435-8B40-8EE70875DBB3">译者输出</a></p>
                        </li>
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-88DCEAAC-F9CD-43BD-BC31-CE3F3745FBD7">输出文件位置</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-68C57EA9-1ECC-424A-902C-25C087DB9AA0__GUID-F9378DF4-DE07-41E0-AC5D-186A7F3A45AA">
                        <p class="notep1">注意：</p>
                        <p>这个讨论提到了迭代器类和连接上下文类声明。迭代器类似于JDBC结果集，连接上下文用于数据库连接。</p>
                     </div>
                  </div><a id="JSQLJ150"></a><div class="props_rev_3"><a id="GUID-F6F8C7BD-70B8-4C22-B98F-CD44962D3243" name="GUID-F6F8C7BD-70B8-4C22-B98F-CD44962D3243"></a><h5 id="JSQLJ-GUID-F6F8C7BD-70B8-4C22-B98F-CD44962D3243" class="sect5">译者输入</h5>
                     <div>
                        <p>SQLJ转换器将一个或多个<code class="codeph">.sqlj</code>源文件作为输入，可以在命令行中指定。主<code class="codeph">.sqlj</code>文件的名称基于它定义的公共类，如果有的话，在它定义的第一个类上。
                        </p>
                        <p>如果主<code class="codeph">.sqlj</code>文件定义了<code class="codeph">MyClass</code>类，那么源文件名必须是：</p><pre class="oac_no_warn" dir="ltr">MyClass.sqlj</pre><p>如果没有公共类定义，那么它也必须是文件名，但<code class="codeph">MyClass</code>是第一个定义的类。您必须在单独的<code class="codeph">.sqlj</code>文件中定义每个公共类。运行SQLJ时，还可以在命令行或属性文件中指定多个SQLJ选项。
                        </p>
                        <div class="infoboxnotealso" id="GUID-F6F8C7BD-70B8-4C22-B98F-CD44962D3243__GUID-0D1E18EC-9EC8-47F1-8FD6-C48F13D2EC51">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-F40E0AE9-4103-4878-B21B-7B0BC275F67C">翻译命令行和属性文件</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="JSQLJ151"></a><div class="props_rev_3"><a id="GUID-AB5D0342-DC8A-4435-8B40-8EE70875DBB3" name="GUID-AB5D0342-DC8A-4435-8B40-8EE70875DBB3"></a><h5 id="JSQLJ-GUID-AB5D0342-DC8A-4435-8B40-8EE70875DBB3" class="sect5">译者输出</h5>
                     <div>
                        <p>转换步骤为应用程序中的每个<code class="codeph">.sqlj</code>文件生成一个Java源文件，假设源代码使用SQLJ可执行语句。
                        </p>
                        <p>SQLJ生成Java源文件，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Java源文件是<code class="codeph">.java</code>文件，其基本名称与<code class="codeph">.sqlj</code>文件相同。
                              </p>
                              <p>例如，翻译器生成<code class="codeph">MyClass.java</code>对应于<code class="codeph">MyClass.sqlj</code> ，它定义了<code class="codeph">MyClass</code>类。输出<code class="codeph">.java</code>文件还包含<code class="codeph">.sqlj</code>文件中声明的任何迭代器或连接上下文类的类定义。
                              </p>
                           </li>
                        </ul>
                        <p>编译步骤将Java源文件编译为多个类文件。为<code class="codeph">.sqlj</code>源文件中定义的每个类生成一个<code class="codeph">.class</code>文件。如果声明了任何SQLJ迭代器或连接上下文，则会生成其他<code class="codeph">.class</code>文件。此外，将为代码中的任何内部类或匿名类生成单独的<code class="codeph">.class</code>文件。
                        </p>
                        <div class="infoboxnotealso" id="GUID-AB5D0342-DC8A-4435-8B40-8EE70875DBB3__GUID-37857346-500D-47E0-B9FA-491264A01A9C">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="basic-language-features.html#GUID-74A36C5C-B63E-4489-A464-47387ABCB24E">SQLJ声明概述</a> ”</span></p>
                        </div>
                        <p><code class="codeph">.class</code>文件的名称如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>定义的每个类的类文件包含具有<code class="codeph">.class</code>扩展名的类的名称。例如，转换器输出文件<code class="codeph">MyClass.java</code>被编译到<code class="codeph">MyClass.class</code>类文件中。
                              </p>
                           </li>
                           <li>
                              <p>转换程序根据您声明它们的方式命名迭代器类和连接上下文类。例如，如果声明迭代器<code class="codeph">MyIter</code> ，则编译器将生成相应的<code class="codeph">MyIter.class</code>类文件。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="JSQLJ152"></a><div class="props_rev_3"><a id="GUID-88DCEAAC-F9CD-43BD-BC31-CE3F3745FBD7" name="GUID-88DCEAAC-F9CD-43BD-BC31-CE3F3745FBD7"></a><h5 id="JSQLJ-GUID-88DCEAAC-F9CD-43BD-BC31-CE3F3745FBD7" class="sect5">输出文件位置</h5>
                     <div>
                        <p>默认情况下，SQLJ将生成的<code class="codeph">.java</code>文件放在与<code class="codeph">.sqlj</code>文件相同的目录中。您可以使用SQLJ <code class="codeph">-dir</code>选项指定其他<code class="codeph">.java</code>文件位置。
                        </p>
                        <p>默认情况下，SQLJ将生成的<code class="codeph">.class</code>和<code class="codeph">.ser</code>文件放在与生成的<code class="codeph">.java</code>文件相同的目录中。您可以使用SQLJ <code class="codeph">-d</code>选项为<code class="codeph">.class</code>和<code class="codeph">.ser</code>文件指定其他位置。此选项设置将传递给Java编译器，以便<code class="codeph">.class</code>文件和<code class="codeph">.ser</code>文件位于同一位置。
                        </p>
                        <p>对于<code class="codeph">-d</code>和<code class="codeph">-dir</code>选项，必须指定已存在的目录。
                        </p>
                        <div class="infoboxnotealso" id="GUID-88DCEAAC-F9CD-43BD-BC31-CE3F3745FBD7__GUID-D6289D57-8356-40B9-8221-47FD8126FCDE">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-93FF52FC-8C29-488C-B82D-FFA8A6C5A03B">输出文件和目录的选项</a> ”</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="JSQLJ153"></a><div class="props_rev_3"><a id="GUID-A5327908-94E5-4D54-AD9D-4CDDE6181BD0" name="GUID-A5327908-94E5-4D54-AD9D-4CDDE6181BD0"></a><h4 id="JSQLJ-GUID-A5327908-94E5-4D54-AD9D-4CDDE6181BD0" class="sect4">SQLJ运行时处理</h4>
                  <div>
                     <p>本节讨论程序执行期间的运行时处理。</p>
                     <p>使用默认的<code class="codeph">-codegen=oracle</code>设置进行翻译时，程序在运行时执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>执行特定于Oracle的应用程序编程接口（API），以确保批处理支持以及正确创建和关闭Oracle JDBC语句</p>
                        </li>
                        <li>
                           <p>直接调用Oracle JDBC API以注册，传递和检索参数和结果集</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-A5327908-94E5-4D54-AD9D-4CDDE6181BD0__GUID-C1866CA4-A09F-46C9-B856-DF283F70524E">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="key-programming-considerations.html#GUID-E0F0C310-400E-4F9C-8036-B44FB2A3E2FD">特定于Oracle的代码生成（无配置文件）</a> ”</span></p>
                     </div>
                  </div>
               </div>
            </div><a id="JSQLJ155"></a><div class="props_rev_3"><a id="GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B" name="GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B"></a><h3 id="JSQLJ-GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B" class="sect3">SQLJ示例代码</h3>
               <div>
                  <p>本节将对同一示例代码的两个版本进行并排比较，其中一个版本用SQLJ编写，另一个版本用JDBC编写。本节的目的是指出SQLJ和JDBC之间的编码要求的差异。本节包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF">示例代码的SQLJ版本</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-3BBCA271-5A46-4CCB-B1FB-33C96158FAA8">示例代码的JDBC版本</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B__GUID-C09DF325-5EF3-49DF-99E0-159129459E19">
                     <p class="notep1">注意：</p>
                     <p>此处使用的SQLJ语句和功能的详细信息将在本手册的后面部分进行介绍，但此示例在此处仍然有用，可以为您提供比较和对比SQLJ和JDBC的一般概念。当您更熟悉SQLJ概念和功能时，可以再次查看它。</p>
                  </div>
                  <p>在该示例中，定义了两种方法： <code class="codeph">getEmployeeAddress()</code> ，它根据员工的编号从表中选择并返回员工的地址; <code class="codeph">updateAddress()</code> ，它获取检索到的地址，调用存储过程，并返回更新的地址到数据库。
                  </p>
                  <p>在示例代码的两个版本中，进行了以下假设：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>已运行SQL脚本以在数据库中创建架构并填充表。示例代码的两个版本都引用此脚本创建的对象和表。</p>
                     </li>
                     <li>
                        <p>存在<code class="codeph">UPDATE_ADDRESS()</code> PL / SQL存储函数，它更新给定地址。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">Connection</code>对象（对于JDBC）和默认连接上下文（对于SQLJ）先前已由调用者创建。
                        </p>
                     </li>
                     <li>
                        <p>例外由呼叫者处理。</p>
                     </li>
                     <li>
                        <p>传递给<code class="codeph">updateAddress()</code>方法的address参数<code class="codeph">addr</code>的值可以为<code class="codeph">null</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B__GUID-F1752B66-FA84-4F38-9260-1E292ED87885">
                           <p class="notep1">注意：</p>
                           <p>示例代码的JDBC和SQLJ版本只是部分样本，不能独立运行。两者中都没有<code class="codeph">main()</code>方法。
                           </p>
                        </div>
                     </li>
                  </ul>
               </div><a id="JSQLJ157"></a><a id="JSQLJ158"></a><a id="JSQLJ159"></a><a id="JSQLJ160"></a><a id="JSQLJ161"></a><a id="JSQLJ162"></a><a id="JSQLJ163"></a><a id="JSQLJ156"></a><div class="props_rev_3"><a id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF" name="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF"></a><h4 id="JSQLJ-GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF" class="sect4">示例代码的SQLJ版本</h4>
                  <div>
                     <p>定义从数据库检索员工地址，更新地址并将其返回数据库的方法的示例代码的SQLJ版本如下：</p><pre class="oac_no_warn" dir="ltr">import java.sql。*; / **这是你要在SQLJ中做的事情** / public class SimpleDemoSQLJ //第6行{// DO TO：make一个main来调用这个公共地址getEmployeeAddress（int empno）//第10行抛出SQLException {Address addr ; //第13行#sql {SELECT office_addr INTO：addr FROM employees WHERE empnumber =：empno};返回地址; } //第18行公共地址updateAddress（地址addr）抛出SQLException {#sql addr = {VALUES（UPDATE_ADDRESS（：addr））}; //第22行返回addr; }}</pre><div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-5807968D-8FA9-471A-861E-506D16AC66E0">第10行</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">getEmployeeAddress()</code>方法不需要显式的<code class="codeph">Connection</code>对象。SQLJ可以使用默认的连接上下文实例，该实例应该在应用程序的早期某处初始化。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-4963BA2B-1C56-44A9-AA25-4FC2F95AAFD7">第13-15行</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">getEmployeeAddress()</code>方法根据员工编号检索员工地址。如果员工编号与传入<code class="codeph">getEmployeeAddress()</code>那个（ <code class="codeph">empno</code> ）匹配，请使用标准SQLJ <code class="codeph">SELECT</code> <code class="codeph">INTO</code>语法从<code class="codeph">employee</code>表中选择员工的地址。这需要声明将接收数据的<code class="codeph">Address</code>对象（ <code class="codeph">addr</code> ）。<code class="codeph">empno</code>和<code class="codeph">addr</code>变量用作输入主变量。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-3A7A0A63-8B75-410A-9294-5B94A818D772">第16行</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">getEmployeeAddress()</code>方法返回<code class="codeph">addr</code>对象。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-047CAC9E-2A9F-442B-AC6D-F9246D866FBB">第19行</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">updateAddress()</code>方法还使用默认连接上下文实例。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-905EEA92-A07C-4FE2-B04A-F3BA9014FA8C">第19-22行</p>
                     </div>
                     <!-- class="section" -->
                     <p>该地址将传递给<code class="codeph">updateAddress()</code>方法，该方法将其传递给数据库。数据库更新地址并将其传回。地址的实际更新由<code class="codeph">UPDATE_ADDRESS()</code>存储函数执行。使用标准SQLJ函数调用语法来接收<code class="codeph">UPDATE_ADDRESS()</code>返回的<code class="codeph">addr</code>地址对象。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-9BCEB741-B9D5-4D7C-95DF-B9C1BB9F3A9E">第23行</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">updateAddress()</code>方法返回<code class="codeph">addr</code>对象。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-BC2C219E-193D-47A9-A423-0B265BF058C4">SQLJ版本代码的特定功能</p>
                     </div>
                     <!-- class="section" -->
                     <p>请注意示例代码的SQLJ版本的以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不需要显式连接。SQLJ可以使用先前在应用程序中初始化的默认连接上下文。</p>
                        </li>
                        <li>
                           <p>不需要数据类型转换。</p>
                        </li>
                        <li>
                           <p>SQLJ不需要<code class="codeph">_SQL_TYPECODE</code> ， <code class="codeph">_SQL_NAME</code>或工厂的知识。
                           </p>
                        </li>
                        <li>
                           <p>隐式处理<code class="codeph">NULL</code>值数据。
                           </p>
                        </li>
                        <li>
                           <p>不需要用于资源管理的显式代码（例如，结束语句或结果集）。</p>
                        </li>
                        <li>
                           <p>与使用参数标记的JDBC相比，SQLJ嵌入了主机变量。</p>
                        </li>
                        <li>
                           <p>不需要长SQL语句的字符串连接。</p>
                        </li>
                        <li>
                           <p>您不必注册输出参数。</p>
                        </li>
                        <li>
                           <p>SQLJ语法更简单。例如，支持<code class="codeph">SELECT INTO</code>语句，并且不使用ODBC样式的转义。
                           </p>
                        </li>
                        <li>
                           <p>您不必实现自己的语句缓存。默认情况下，SQLJ将自动缓存<code class="codeph">#sql</code>语句。这样可以提高性能，例如，如果重复调用<code class="codeph">getEmployeeAddress()</code>和<code class="codeph">updateAddress()</code> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="JSQLJ164"></a><div class="props_rev_3"><a id="GUID-3BBCA271-5A46-4CCB-B1FB-33C96158FAA8" name="GUID-3BBCA271-5A46-4CCB-B1FB-33C96158FAA8"></a><h4 id="JSQLJ-GUID-3BBCA271-5A46-4CCB-B1FB-33C96158FAA8" class="sect4">示例代码的JDBC版本</h4>
                  <div>
                     <p>如果您熟悉JDBC，那么您可以检查以下示例代码的JDBC版本，该版本定义了从数据库检索员工地址，更新地址并将其返回到数据库的方法。</p>
                     <div class="infoboxnote" id="GUID-3BBCA271-5A46-4CCB-B1FB-33C96158FAA8__GUID-605117A3-1CD9-4AD5-8F5A-99AC241701F1">
                        <p class="notep1">注意：</p>
                        <p>注释行中的<code class="codeph">TO DO</code>项指示您可能希望添加其他代码的位置，以增加代码示例的有用性。
                        </p>
                     </div><pre class="oac_no_warn" dir="ltr">import java.sql。*; import oracle.jdbc。*; / **这是你在JDBC中必须做的事情** / public class SimpleDemoJDBC //第7行{// DO TO：make一个调用这个公共地址的main getEmployeeAddress（int empno，Connection conn）抛出SQLException //第13行{地址地址; PreparedStatement pstmt = //第16行conn.prepareStatement（“SELECT office_addr FROM employees”+“WHERE empnumber =？“）; pstmt.setInt（1，empno）; OracleResultSet rs =（OracleResultSet）pstmt.executeQuery（）; rs.next（）; //第21行// TO DO：假如果为false（结果集不包含数据）？addr =（Address）rs.getORAData（1，Address.getORADataFactory（））; //要做：如果有额外的行怎么办？rs.close（）; //第25行pstmt.close（）;返回地址; //第27行} public Address updateAddress（Address addr，Connection conn）抛出SQLException //第30行{OracleCallableStatement cstmt =（OracleCallableStatement）conn.prepareCall（“{？=调用UPDATE_ADDRESS（？）}“;; //第34行cstmt.registerOutParameter（1，地址。_SQL_TYPECODE，地址。_SQL_NAME）; //第36行if（addr == null）{cstmt.setNull（2，Address。_SQL_TYPECODE，地址。_SQL_NAME）; } else {cstmt.setORAData（2，addr）; } cstmt.executeUpdate（）; //第43行addr =（地址）cstmt.getORAData（1，Address.getORADataFactory（））; cstmt.close（）; //第45行返回addr; }}</pre></div>
               </div>
            </div><a id="JSQLJ175"></a><div class="props_rev_3"><a id="GUID-24B99BA3-A097-447B-82F6-E234FFD7B9CA" name="GUID-24B99BA3-A097-447B-82F6-E234FFD7B9CA"></a><h3 id="JSQLJ-GUID-24B99BA3-A097-447B-82F6-E234FFD7B9CA" class="sect3">替代部署方案</h3>
               <div>
                  <p>虽然本手册主要讨论为客户端SQLJ应用程序编写，但您可能会发现从applet运行SQLJ代码很有用。</p>
               </div><a id="JSQLJ176"></a><div class="props_rev_3"><a id="GUID-DDFECBEB-E853-4163-A704-5D487AE85B3C" name="GUID-DDFECBEB-E853-4163-A704-5D487AE85B3C"></a><h4 id="JSQLJ-GUID-DDFECBEB-E853-4163-A704-5D487AE85B3C" class="sect4">在Applet中运行SQLJ</h4>
                  <div>
                     <p>因为SQLJ运行时是纯Java，所以可以在applet和应用程序中使用SQLJ源代码。但是，有一些考虑因素。</p>
                     <div class="infoboxnotealso" id="GUID-DDFECBEB-E853-4163-A704-5D487AE85B3C__GUID-414C71BA-B514-45CC-9F7D-426EF96580B6">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../jjdbc/index.html" target="_blank"><span><cite>Oracle数据库JDBC开发人员指南</cite></span></a></p>
                     </div>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584">一般开发和部署注意事项</a></p>
                        </li>
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-5EB10A9A-F953-4915-ADB5-CBB0D93741F7">一般最终用户注意事项</a></p>
                        </li>
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64">Java环境和Java插件</a></p>
                        </li>
                     </ul>
                  </div><a id="JSQLJ177"></a><div class="props_rev_3"><a id="GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584" name="GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584"></a><h5 id="JSQLJ-GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584" class="sect5">一般开发和部署注意事项</h5>
                     <div>
                        <p>以下一般注意事项适用于在applet中使用SQLJ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您必须使用applet打包所有SQLJ运行时包。包裹是：</p><pre class="oac_no_warn" dir="ltr">sqlj.runtime sqlj.runtime.ref sqlj.runtime.error</pre><p>如果您使用Oracle自定义，还要打包以下内容：</p><pre class="oac_no_warn" dir="ltr">oracle.sqlj.runtime oracle.sqlj.runtime.error</pre><p>这些包随Oracle安装一起包含在<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/lib</code>目录中的多个运行时库之一中。
                              </p>
                              <div class="infoboxnotealso" id="GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584__GUID-EEAE96FC-4A21-4215-8E41-9E4A9BCEC28C">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="getting-started.html#GUID-59D43923-4D2A-42FB-8F03-9CF1F3B60C67">使用Oracle SQLJ实现的要求</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>您必须为数据库连接指定纯Java JDBC驱动程序，例如Oracle JDBC Thin驱动程序。</p>
                           </li>
                           <li>
                              <p>您必须为applet中的每个SQLJ可执行语句显式指定连接上下文实例。这是一个要求，因为您可以想象在一个浏览器中运行两个SQLJ小程序，因此，在同一个JVM中。</p>
                              <div class="infoboxnotealso" id="GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584__GUID-BF407659-5BBD-4278-8301-EFDDF5AB21F6">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="key-programming-considerations.html#GUID-02A50813-2D4D-4DC1-AD1A-014AF1EDC03D">连接注意事项</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>默认转换程序设置<code class="codeph">-codegen=oracle</code>生成特定于Oracle的代码。这将消除在运行时使用Java反射，从而提高跨不同浏览器环境的可移植性。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="JSQLJ178"></a><div class="props_rev_3"><a id="GUID-5EB10A9A-F953-4915-ADB5-CBB0D93741F7" name="GUID-5EB10A9A-F953-4915-ADB5-CBB0D93741F7"></a><h5 id="JSQLJ-GUID-5EB10A9A-F953-4915-ADB5-CBB0D93741F7" class="sect5">一般最终用户注意事项</h5>
                     <div>
                        <p>当最终用户运行SQLJ applet时，其<code class="codeph">CLASSPATH</code>类可能与使用applet下载的类冲突。因此，Oracle建议最终用户在运行applet之前清除其<code class="codeph">CLASSPATH</code> 。
                        </p>
                     </div>
                  </div><a id="JSQLJ179"></a><div class="props_rev_3"><a id="GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64" name="GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64"></a><h5 id="JSQLJ-GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64" class="sect5">Java环境和Java插件</h5>
                     <div>
                        <p>以下是有关Java环境和Oracle特定功能使用的一些其他注意事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>SQLJ需要JDK 6或JDK 7的运行时环境。用户无法在没有插件的早期JDK版本的浏览器中运行SQLJ小程序。一种选择是使用Sun Microsystems提供的Java插件。有关信息，请参阅以下内容：</p>
                              <p><a href="http://www.oracle.com/technetwork/java/index.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/java/index.html</code></a></p>
                           </li>
                           <li>
                              <p>使用Oracle特定功能的Applet需要Oracle SQLJ运行时才能运行。Oracle SQLJ运行时由<code class="codeph">oracle.sqlj.下的SQLJ运行时库文件中的类组成<code class="codeph">oracle.sqlj.*</code> 。Oracle SQLJ <code class="codeph">runtime.jar</code>库需要Java Reflection API， <code class="codeph">java.lang.reflect.*</code> 。大多数浏览器不支持Reflection API或强加安全限制，但Sun Microsystems Java插件提供对Reflection API的支持。</p>
                              <div class="infoboxnote" id="GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64__GUID-0F25EAAD-1605-448D-A5C1-A576BA0B2886">
                                 <p class="notep1">注意：</p>
                                 <p>术语“Oracle特定功能”是指使用Oracle类型扩展（在<a href="type-support.html#GUID-5890BFD9-7FF0-4ED3-BBDB-9CC1B729E2C9">类型支持中</a>讨论）和使用需要特定于Oracle的代码生成的SQLJ功能，或者对于ISO SQLJ标准代码生成，需要定制应用程序对抗Oracle数据库实例。（例如，在<a href="basic-language-features.html#GUID-D93359BA-4F29-49C2-8AAE-23F8BBCE8BE5">基本语言功能中</a>讨论的<code class="codeph">SET</code>语句也是如此。）
                                 </p>
                              </div>
                           </li>
                        </ul>
                        <p>上述问题可归纳如下，重点关注使用Internet Explorer和Netscape浏览器的用户：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>SQLJ和JDBC版本应该匹配。例如，要使用SQLJ 9.0.0运行时，必须具有Oracle 9.0.0或更早版本的JDBC驱动程序。</p>
                              <div class="infoboxnotealso" id="GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64__GUID-509F1E71-34A0-440B-92B7-DE149ECB63E1">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="getting-started.html#GUID-59D43923-4D2A-42FB-8F03-9CF1F3B60C67">使用Oracle SQLJ实现的要求</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>如果在SQLJ语句中使用对象类型，JDBC 2.0类型，REF CURSOR或<code class="codeph">CAST</code>语句，则必须遵循以下选择：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>翻译applet时使用默认的<code class="codeph">-codegen=oracle</code>设置。
                                    </p>
                                 </li>
                                 <li>
                                    <p>确保您使用的浏览器支持JDK 6并允许反射。</p>
                                 </li>
                                 <li>
                                    <p>通过浏览器Java插件运行您的applet。</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="JSQLJ181"></a><div class="props_rev_3"><a id="GUID-8F7DF27B-A577-47F3-B93B-9E38A1CC55B5" name="GUID-8F7DF27B-A577-47F3-B93B-9E38A1CC55B5"></a><h3 id="JSQLJ-GUID-8F7DF27B-A577-47F3-B93B-9E38A1CC55B5" class="sect3">替代发展方案</h3>
               <div>
                  <p>本书中的讨论假定您在UNIX环境中手动编码以进行英语部署。但是，您可以在其他平台和集成开发环境（IDE）上使用SQLJ。还有全球化支持部署到其他语言。本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-E899FCDF-3B6D-4098-8864-964DD876C4E6">SQLJ全球化支持</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-D6B8A198-C2B1-416A-BDC0-558A8B1F7FF1">Oracle JDeveloper 10g和其他IDE中的SQLJ</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-4B4D56E6-02C4-4A69-B1C2-929AB5B3EE19">Windows注意事项</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ182"></a><div class="props_rev_3"><a id="GUID-E899FCDF-3B6D-4098-8864-964DD876C4E6" name="GUID-E899FCDF-3B6D-4098-8864-964DD876C4E6"></a><h4 id="JSQLJ-GUID-E899FCDF-3B6D-4098-8864-964DD876C4E6" class="sect4">SQLJ全球化支持</h4>
                  <div>
                     <p>Oracle SQLJ实现支持本机语言和字符编码基于Java内置的全球化支持功能。</p>
                     <p>JVM的标准<code class="codeph">user.language</code>和<code class="codeph">file.encoding</code>属性确定转换器和运行时消息的适当语言和编码。的SQLJ <code class="codeph">-encoding</code>选项确定在翻译过程中解释并生成源文件的编码。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E899FCDF-3B6D-4098-8864-964DD876C4E6__GUID-3E27AE47-5F5B-4871-9E2C-32FF01D713C1">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="translator-run-time-functionality.html#GUID-50785BF7-712B-4BFC-BE22-0E86B626BBA6">翻译和运行时的全球化支持</a> ”</span></p>
                     </div>
                  </div>
               </div><a id="JSQLJ183"></a><div class="props_rev_3"><a id="GUID-D6B8A198-C2B1-416A-BDC0-558A8B1F7FF1" name="GUID-D6B8A198-C2B1-416A-BDC0-558A8B1F7FF1"></a><h4 id="JSQLJ-GUID-D6B8A198-C2B1-416A-BDC0-558A8B1F7FF1" class="sect4">Oracle JDeveloper <span class="italic">10g</span>和其他IDE中的SQLJ</h4>
                  <div>
                     <p>Oracle SQLJ实现包括一个编程API，因此可以嵌入到IDE中，例如Oracle JDeveloper <span class="italic">10g</span> 。IDE具有类似于前端<code class="codeph">sqlj</code>脚本的角色，调用转换器，语义检查器，编译器和定制器（如果适用）。
                     </p>
                     <p>JDeveloper是一个基于Jave的跨平台可视化开发环境，适用于Java编程。JDeveloper Suite使开发人员能够跨Oracle Internet平台使用Java构建多层，可扩展的Internet应用程序。该套件的核心产品JDeveloper IDE擅长创建，调试和部署基于组件的应用程序。</p>
                     <p>JDeveloper附带了Oracle JDBC OCI和Thin驱动程序。JDeveloper的编译功能包括一个集成的SQLJ转换器，以便您的SQLJ应用程序在编译时自动转换。</p>
                  </div>
               </div><a id="JSQLJ184"></a><div class="props_rev_3"><a id="GUID-4B4D56E6-02C4-4A69-B1C2-929AB5B3EE19" name="GUID-4B4D56E6-02C4-4A69-B1C2-929AB5B3EE19"></a><h4 id="JSQLJ-GUID-4B4D56E6-02C4-4A69-B1C2-929AB5B3EE19" class="sect4">Windows注意事项</h4>
                  <div>
                     <p>如果您使用的是Microsoft Windows环境而不是UNIX环境，请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>本手册使用UNIX语法。在Microsoft Windows上使用特定于平台的文件名和目录分隔符（适用于您的平台），因为JVM需要特定于平台的格式的文件名和路径。即使您使用允许不同文件名语法的shell（例如<code class="codeph">ksh</code> ）也是如此。
                           </p>
                        </li>
                        <li>
                           <p>对于UNIX，Oracle SQLJ实现提供了一个用于调用SQLJ转换器的前端脚本<code class="codeph">sqlj</code> 。在Microsoft Windows上，Oracle提供了一个可执行文件<code class="codeph">sqlj.exe</code> 。在Microsoft Windows上使用脚本是不可行的，因为这些平台上的<code class="codeph">.bat</code>文件不支持参数中的嵌入等号（=），参数上的字符串操作或文件名参数中的通配符。
                           </p>
                        </li>
                        <li>
                           <p>如何设置环境变量是特定于操作系统的。可能还存在特定于操作系统的限制。在Windows 95中，使用“ <code class="codeph">System</code>控制面板中的“ <code class="codeph">Environment</code>选项卡。此外，由于Windows 95在变量设置中不支持“=”字符，因此SQLJ支持在设置<code class="codeph">SQLJ_OPTIONS</code>使用“＃”而不是“=”， <code class="codeph">SQLJ_OPTIONS</code>是SQLJ可用于选项设置的环境变量。请参阅有关环境变量的设置和语法的操作系统文档，并了解任何大小限制。
                           </p>
                        </li>
                        <li>
                           <p>与您使用的任何操作系统和环境一样，请注意特定限制。特别是，完整的扩展SQLJ命令行不得超过最大命令行大小，Windows 95为250个字符，Windows NT为4000个字符。请参阅操作系统文档。</p>
                        </li>
                     </ul>
                     <p>有关其他信息，请参阅Windows的发行说明。</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
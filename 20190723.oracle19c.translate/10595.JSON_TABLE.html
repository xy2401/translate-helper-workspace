<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>JSON_TABLE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="JSON_SERIALIZE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="JSON_VALUE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="JSON_SERIALIZE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="JSON_VALUE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">JSON_TABLE</li>
            </ol>
            <a id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62" name="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62"></a><a id="SQLRF56974"></a><a id="SQLRF56975"></a><a id="SQLRF56976"></a><a id="SQLRF56977"></a><a id="SQLRF56978"></a><a id="SQLRF56979"></a><a id="SQLRF56980"></a><a id="SQLRF56982"></a><a id="SQLRF56983"></a><a id="SQLRF56984"></a><a id="SQLRF56985"></a><a id="SQLRF56981"></a><a id="SQLRF56986"></a><a id="SQLRF56987"></a><a id="SQLRF57038"></a><a id="SQLRF56988"></a><a id="SQLRF56989"></a><a id="SQLRF56990"></a><a id="SQLRF57003"></a><a id="SQLRF57004"></a><a id="SQLRF57005"></a><a id="SQLRF57006"></a><a id="SQLRF57007"></a><a id="SQLRF56991"></a><a id="SQLRF57008"></a><a id="SQLRF57009"></a><a id="SQLRF57010"></a><a id="SQLRF57011"></a><a id="SQLRF57012"></a><a id="SQLRF56973"></a>
            
            <h2 id="SQLRF-GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62" class="sect2">JSON_TABLE</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-9C73F756-F171-4F42-A284-46EC63FA5590">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-75375237-6988-4A2C-A9FC-BC8878A788D7"><img src="img/json_table.gif" alt="下面是json_table.eps的描述" title="下面是json_table.eps的描述" longdesc="img_text/json_table.html"><br><a href="img_text/json_table.html">插图描述json_table.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span> ：请参阅<a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span class="italic">Oracle数据库JSON开发人员指南</span></a> ， <span class="italic"><a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAGFDBA">JSON_table_on_error_clause :: =</a></span> ， <span class="italic"><a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAHEFGD">JSON_columns_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAGFDBA">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-34D11972-60FB-4E25-A563-6210B81120E1"><span class="italic">JSON_table_on_error_clause</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-05394653-E45F-4D57-AC43-E91DAE77C958"><img src="img/json_table_on_error_clause.gif" alt="下面是json_table_on_error_clause.eps的说明" title="下面是json_table_on_error_clause.eps的说明" longdesc="img_text/json_table_on_error_clause.html"><br><a href="img_text/json_table_on_error_clause.html">说明json_table_on_error_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAHEFGD">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-D8F23FBB-73EA-490D-B672-868356D8059E"><span class="italic">JSON_columns_clause</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-55EDF5D8-DF7E-447B-A138-08F5B239B64D"><img src="img/json_columns_clause.gif" alt="下面是json_columns_clause.eps的描述" title="下面是json_columns_clause.eps的描述" longdesc="img_text/json_columns_clause.html"><br><a href="img_text/json_columns_clause.html">插图说明json_columns_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-2D611616-5671-4588-B627-170D1600181F"><span class="italic">JSON_column_definition</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-A37F992D-B575-47ED-B701-DF5293447D98"><img src="img/json_column_definition.gif" alt="下面是json_column_definition.eps的描述" title="下面是json_column_definition.eps的描述" longdesc="img_text/json_column_definition.html"><br><a href="img_text/json_column_definition.html">说明json_column_definition.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-D9B31456-6C50-4461-A53F-7CA7C14C7714"><span class="italic">JSON_exists_column</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-AE750312-7E79-47D0-9BF5-01EA82B3A50F"><img src="img/json_exists_column.gif" alt="下面是json_exists_column.eps的描述" title="下面是json_exists_column.eps的描述" longdesc="img_text/json_exists_column.html"><br><a href="img_text/json_exists_column.html">插图描述json_exists_column.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="JSON_VALUE.html#GUID-C7F19D36-1E75-4CB2-AE67-ADFBAD23CBC2__CJABCIJE">JSON_value_return_type :: =</a></span> -part of <code class="codeph">JSON_VALUE</code> ， <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span> ：请参阅<a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span class="italic">Oracle数据库JSON开发人员指南</span></a> ， <span class="italic"><a href="SQL-JSON-Conditions.html#GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__BABGJJFD">JSON_exists_on_error_clause :: =</a></span> -part of <code class="codeph">JSON_EXISTS</code> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-664BE57E-A00C-4845-97EC-642E18B7A837"><span class="italic">JSON_query_column</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-4DC1B133-0AA7-41FA-8C41-6A5C6FF7B596"><img src="img/json_query_column.gif" alt="下面是json_query_column.eps的描述" title="下面是json_query_column.eps的描述" longdesc="img_text/json_query_column.html"><br><a href="img_text/json_query_column.html">说明json_query_column.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="JSON_QUERY.html#GUID-6D396EC4-D2AA-43D2-8F5D-08D646A4A2D9__CJADJIIJ">JSON_query_return_type :: =</a></span> ， <span class="italic"><a href="JSON_QUERY.html#GUID-6D396EC4-D2AA-43D2-8F5D-08D646A4A2D9__CJAGGHHG">JSON_query_wrapper_clause :: =</a></span> ， <span class="italic"><a href="JSON_QUERY.html#GUID-6D396EC4-D2AA-43D2-8F5D-08D646A4A2D9__CJACIDGJ">JSON_query_on_error_clause :: =</a></span> -part of <code class="codeph">JSON_QUERY</code> ， <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span> ：请参阅<a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span class="italic">Oracle数据库JSON开发人员指南</span></a> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-291AE583-D115-4AEA-BC73-12AF6BFA3FE3"><span class="italic">JSON_value_column</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-5738B11C-CDF8-41B2-AD67-CDE3FBB46D26"><img src="img/json_value_column.gif" alt="下面是json_value_column.eps的描述" title="下面是json_value_column.eps的描述" longdesc="img_text/json_value_column.html"><br><a href="img_text/json_value_column.html">插图描述json_value_column.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="JSON_VALUE.html#GUID-C7F19D36-1E75-4CB2-AE67-ADFBAD23CBC2__CJABCIJE">JSON_value_return_type :: =</a></span>和<span class="italic"><a href="JSON_VALUE.html#GUID-C7F19D36-1E75-4CB2-AE67-ADFBAD23CBC2__CJAHCAIE">JSON_value_on_error_clause :: =</a></span> -part of <code class="codeph">JSON_VALUE</code> ， <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span> ：请参阅<a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span class="italic">Oracle数据库JSON开发人员指南</span></a> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-6C19C26B-7293-4E0D-AC84-B4983EE71785"><span class="italic">JSON_nested_path</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-A55B53F3-D840-427E-9C82-81AA238A7390"><img src="img/json_nested_path.gif" alt="下面是json_nested_path.eps的描述" title="下面是json_nested_path.eps的描述" longdesc="img_text/json_nested_path.html"><br><a href="img_text/json_nested_path.html">说明json_nested_path.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span> ：请参阅<a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span class="italic">Oracle数据库JSON开发人员指南</span></a> ， <span class="italic"><a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAHEFGD">JSON_columns_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-C371E081-929F-4B2A-B5D5-F1960206A297"><span class="italic">ordinality_column</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-D6DD97AD-B52B-478A-B921-7C2844398CD7"><img src="img/ordinality_column.gif" alt="下面是ordinality_column.eps的描述" title="下面是ordinality_column.eps的描述" longdesc="img_text/ordinality_column.html"><br><a href="img_text/ordinality_column.html">说明adjality_column.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-17E42EC5-9B06-4587-92DA-0EBE907848AD"><span class="italic">JSON_path</span> :: =</p>
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-B6C4C678-52CD-4B40-B4FE-B69E444FCD98"><img src="img/json_path.gif" alt="下面是json_path.eps的描述" title="下面是json_path.eps的描述" longdesc="img_text/json_path.html"><br><a href="img_text/json_path.html">说明json_path.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-D00CE8E5-8D2F-4813-B5B6-0C6EC55490E1"><span class="italic">JSON_relative_object_access</span> :: =</p>
                  <div class="figure" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-2463E431-E0B5-411F-8FFA-7E1C6A45A4DE"><img src="img/json_relative_object_access.gif" alt="下面是json_relative_object_access.eps的描述" title="下面是json_relative_object_access.eps的描述" longdesc="img_text/json_relative_object_access.html"><br><a href="img_text/json_relative_object_access.html">插图描述json_relative_object_access.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-84DE3706-54CA-478C-9063-7E97B81A10C8"><span class="italic">嵌套子句</span> :: =</p><br><div class="imageleft"><img class="imageleft" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__IMAGE_FX4_FD3_2GB" src="img/nested_clause.gif" alt="下面是nested_clause.eps的描述" title="下面是nested_clause.eps的描述" longdesc="img_text/nested_clause.html"><br><a href="img_text/nested_clause.html">说明nested_clause.eps的描述</a></div><br></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-E5F427DA-80C2-42D1-A11C-F105ACFD8D28">目的</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>SQL / JSON函数<code class="codeph">JSON_TABLE</code>创建JSON数据的关系视图。它将JSON数据评估的结果映射到关系行和列。您可以使用SQL将函数返回的结果作为虚拟关系表进行查询。 <code class="codeph">JSON_TABLE</code>的主要目的是为JSON数组中的每个对象创建一行关系数据，并将该对象中的JSON值作为单独的SQL列值输出。
                  </p>
                  <p>您必须仅在<code class="codeph">SELECT</code>语句的<code class="codeph">FROM</code>子句中指定<code class="codeph">JSON_TABLE</code> 。该函数首先将路径表达式（称为<span class="bold">SQL / JSON</span> <span class="bold">行</span> <span class="bold">路径</span> <span class="bold">表达式</span> ）应用于提供的JSON数据。与行路径表达式匹配的JSON值称为<span class="bold">行</span> <span class="bold">源</span> ，因为它生成一行关系数据。<code class="codeph">COLUMNS</code>子句计算行源，在行源中查找特定的JSON值，并将这些JSON值作为SQL值返回到一行关系数据的各个列中。
                  </p>
                  <p><code class="codeph">COLUMNS</code>子句使您可以使用以下子句以不同方式搜索JSON值：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic"><code class="codeph">JSON_exists_column</code></span> - 以与<code class="codeph">JSON_EXISTS</code>条件相同的方式计算JSON数据，即确定是否存在指定的JSON值，并返回值为“ <code class="codeph">true</code> ”或“ <code class="codeph">false</code> ”的<code class="codeph">VARCHAR2</code>列，或者返回值为1或0的<code class="codeph">NUMBER</code>列。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">JSON_query_column</code></span> - 以与<code class="codeph">JSON_QUERY</code>函数相同的方式计算JSON数据，即查找一个或多个指定的JSON值，并返回包含这些JSON值的字符串列。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">JSON_value_column</code></span> - 以与<code class="codeph">JSON_VALUE</code>函数相同的方式计算JSON数据，即查找指定的标量JSON值，并将这些JSON值的列作为SQL值返回。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">JSON_nested_path</code></span> - 允许您将嵌套JSON对象或JSON数组中的JSON值展平为单行中的各个列以及父对象或数组中的JSON值。您可以递归地使用此子句将来自多层嵌套对象或数组的数据投影到单个行中。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">ordinality_column</code></span> - 返回生成的行号列。
                        </p>
                     </li>
                  </ul>
                  <p>列定义子句允许您为它们返回的每列数据指定名称。您可以在<code class="codeph">SELECT</code>语句的其他位置引用这些列名，例如<code class="codeph">SELECT</code>列表和<code class="codeph">WHERE</code>子句。
                  </p>
                  <div class="infoboxnotealso" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-2219B947-DA77-46E9-BAFB-E29F0911260F">
                     <p class="notep1">也可以看看：</p>
                     <p>排序规则派生规则的<a href="../nlspg/appendix-C-collation-derivation-and-determination-rules-for-SQL-operations.html#NLSPG-GUID-AFCE41ED-775B-4A00-AF38-C436776AE0C5" target="_blank"><span class="italic">Oracle数据库全球化支持指南</span></a>中的附录C，它定义了由<code class="codeph">JSON_TABLE</code>生成的表中为每个字符数据类型列分配的排序规则</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-33A15367-8762-410C-AE11-4976B19A9034"><span class="italic">EXPR</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>使用此子句指定要评估的JSON数据。对于<span class="italic"><code class="codeph">expr</code></span> ，请指定一个计算结果为文本文字的表达式。如果<span class="italic"><code class="codeph">expr</code></span>是列，则该列必须是数据类型<code class="codeph">VARCHAR2</code> ， <code class="codeph">CLOB</code>或<code class="codeph">BLOB</code> 。如果<span class="italic"><code class="codeph">expr</code></span>为null，则该函数返回null。
                  </p>
                  <p>如果<span class="italic"><code class="codeph">expr</code></span>不是使用strict或lax语法的格式良好的JSON数据的文本文本，则该函数默认返回null。您可以使用<span class="italic"><code class="codeph">JSON_table_on_error_clause</code></span>覆盖此默认行为。请参阅<span class="italic"><a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJABIHAJ">JSON_table_on_error_clause</a></span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-A903D016-F059-4AAA-AA36-235A27DD79CC">格式JSON</p>
                  <p>如果<span class="italic"><code class="codeph">expr</code></span>是数据类型为<code class="codeph">BLOB</code>的列，则必须指定<code class="codeph">FORMAT</code> <code class="codeph">JSON</code> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-364D30D8-CD55-427D-9446-BCA550522608">路径</p>
                  <p>使用<code class="codeph">PATH</code>子句描述要用作列内容的行的一部分。缺少<code class="codeph">PATH</code>子句不会更改路径为<code class="codeph"><span class="codeinlineitalic">'$.&lt;column-name&gt;'</span></code> ，其中<code class="codeph"><span class="codeinlineitalic">&lt;column-name&gt;</span></code>是列名。目标对象字段的名称隐式作为列名称。有关<code class="codeph">PATH</code>的完整语义，请参阅<a href="../adjsn/function-JSON_TABLE.html#ADJSN-GUID-0172660F-CE29-4765-BF2C-C405BDE8369A" target="_blank"><span class="italic">Oracle Database JSON Developer's Guide</span></a> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-62A08C9B-DF62-44B9-8832-09A56EDB3ECC"><span class="italic">JSON_basic_path_expression</span></p>
                  <p><span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>是一个文本文字。有关此子句的完整语义，请参阅<a href="../adjsn/function-JSON_TABLE.html#ADJSN-GUID-0172660F-CE29-4765-BF2C-C405BDE8369A" target="_blank"><span class="italic">Oracle Database JSON Developer's Guide</span></a> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-69D37104-3771-41F1-9D05-90C1D57DF322"><span class="italic">JSON_relative_object_access</span></p>
                  <p>指定此行路径表达式以启用简单的点表示法。<code class="codeph">JSON_relative_object_access</code>的值被评估为相对于当前行项的JSON / Path表达式。
                  </p>
                  <p>有关<span class="italic"><code class="codeph">JSON_object_key clause</code></span>更多信息，请参阅<a href="JSON-Object-Access-Expressions.html#GUID-09D1A154-335D-484E-A7A2-DA1983CD511C">JSON对象访问表达式</a> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJABIHAJ">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-8BDB0775-6D92-47A6-A2FE-53734A9F6B80"><span class="italic">JSON_table_on_error_clause</span></p>
                  <p>使用此子句指定发生错误时函数返回的值：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic"><code class="codeph">NULL ON ERROR</code></span> 
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果输入不是格式良好的<span class="italic"><code class="codeph">JSON</code></span>文本，则一旦检测到错误，就不会再返回任何行。请注意，由于<span class="italic"><code class="codeph">JSON_TABLE</code></span>支持流式评估，因此可能会在遇到包含错误的输入部分之前返回行。
                              </p>
                           </li>
                           <li>
                              <p>如果在计算行路径表达式时未找到匹配项，则不返回任何行。</p>
                           </li>
                           <li>
                              <p>将所有列表达式的默认错误行为设置为<span class="italic"><code class="codeph">NULL ON ERROR</code></span></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">错误的错误</code></span></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果输入不是格式良好的<span class="italic"><code class="codeph">JSON</code></span>文本，则会引发错误。
                              </p>
                           </li>
                           <li>
                              <p>如果在计算行路径表达式时未找到匹配项，则会引发错误</p>
                           </li>
                           <li>
                              <p>将所有列表达式的默认错误行为设置为<span class="italic"><code class="codeph">ERROR ON ERROR</code></span></p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-846E1884-3BE9-4902-AC55-586BC2C41591"><span class="italic">JSON_columns_clause</span></p>
                  <p>使用<code class="codeph">COLUMNS</code>子句定义<code class="codeph">JSON_TABLE</code>函数返回的虚拟关系表中的列。
                  </p>
                  <p>如果列具有<code class="codeph">JSON_VALUE</code>语义，请指定<code class="codeph">TRUNCATE</code> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-17902FAC-2AA1-4F07-8584-77E43F030875"><span class="italic">JSON_exists_column</span></p>
                  <p>此子句以与<code class="codeph">JSON_EXISTS</code>条件相同的方式评估JSON数据，也就是说，它确定是否存在指定的JSON值。它返回值为“ <code class="codeph">true</code> ”或“ <code class="codeph">false</code> ”的<code class="codeph">VARCHAR2</code>列，或值为1或0的<code class="codeph">NUMBER</code>列。
                  </p>
                  <p>值' <code class="codeph">true</code> '或1表示JSON值存在且值' <code class="codeph">false</code> '或0表示JSON值不存在。
                  </p>
                  <p>您可以使用<span class="italic"><code class="codeph">JSON_value_return_type</code></span>子句来控制返回列的数据类型。如果省略此子句，则数据类型为<code class="codeph">VARCHAR2(4000)</code> 。使用<span class="italic"><code class="codeph">column_name</code></span>指定返回列的名称。<span class="italic"><code class="codeph">JSON_exists_column</code></span>的其余子句在此处具有与<code class="codeph">JSON_EXISTS</code>条件相同的语义。有关这些子句的完整信息，请参阅<span class="q">“ <a href="SQL-JSON-Conditions.html#GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988">JSON_EXISTS条件</a> ”</span> 。另请参阅<span class="q">“ <a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAJGGJC">使用JSON_exists_column：示例</a> ”</span>作为示例。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-82DF8ED9-742F-4FDA-9F2F-786D4F526000"><span class="italic">JSON_query_column</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>此子句以与<code class="codeph">JSON_QUERY</code>函数相同的方式计算JSON数据，即，它找到一个或多个指定的JSON值，并返回包含这些JSON值的字符串列。
                  </p>
                  <p>使用<span class="italic"><code class="codeph">column_name</code></span>指定返回列的名称。<span class="italic"><code class="codeph">JSON_query_column</code></span>的其余子句在此处具有与<code class="codeph">JSON_QUERY</code>函数相同的语义。有关这些子句的完整信息，请参阅<a href="JSON_QUERY.html#GUID-6D396EC4-D2AA-43D2-8F5D-08D646A4A2D9">JSON_QUERY</a> 。另请参阅<span class="q">“ <a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAEJCEF">使用JSON_query_column：Example</a> ”</span>作为示例。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-BB020909-19F2-496A-93AD-B16845782116"><span class="italic">JSON_value_column</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>此子句以与<code class="codeph">JSON_VALUE</code>函数相同的方式评估JSON数据，也就是说，它查找指定的标量JSON值，并将这些JSON值的列作为SQL值返回。
                  </p>
                  <p>使用<span class="italic"><code class="codeph">column_name</code></span>指定返回列的名称。<span class="italic"><code class="codeph">JSON_value_column</code></span>的其余子句在此处具有与<code class="codeph">JSON_VALUE</code>函数相同的语义。有关这些子句的完整信息，请参阅<a href="JSON_VALUE.html#GUID-C7F19D36-1E75-4CB2-AE67-ADFBAD23CBC2">JSON_VALUE</a> 。另请参阅<span class="q">“ <a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAFACBH">使用JSON_value_column：Example</a> ”</span>作为示例。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-D2AE5EFA-02A5-4859-BD43-8F0F9120795B"><span class="italic">JSON_nested_path</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>使用此子句将嵌套JSON对象或JSON数组中的JSON值展平为单行中的各个列以及父对象或数组中的JSON值。您可以递归地使用此子句将来自多层嵌套对象或数组的数据投影到单个行中。</p>
                  <p>指定<span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>子句以匹配嵌套对象或数组。此路径表达式与<code class="codeph">JSON_TABLE</code>函数中指定的SQL / JSON行路径表达式相关。
                  </p>
                  <p>使用<code class="codeph">COLUMNS</code>子句定义要返回的嵌套对象或数组的列。这一条款是递归的，你可以指定<span class="italic"><code class="codeph">JSON_nested_path</code></span>另一内子句<span class="italic"><code class="codeph">JSON_nested_path</code></span>条款。另请参阅<span class="q">“ <a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAJAEJD">使用JSON_nested_path：示例</a> ”</span>作为示例。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-7208CD10-3111-4591-99E4-4031F9CD5094"><span class="italic">ordinality_column</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>此子句返回一列生成的数据类型为<code class="codeph">NUMBER</code>行号。您最多可以指定一个<span class="italic"><code class="codeph">ordinality_column</code></span> 。有关使用<span class="italic"><code class="codeph">ordinality_column</code></span>子句的示例，另请参阅<span class="q">“ <a href="JSON_TABLE.html#GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAFACBH">使用JSON_value_column：Example</a> ”</span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-3A8A9EEF-0B14-47A0-A96A-AA79DEF35AC5">例子</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAHAAJE">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-5892AE73-23B7-42BC-82C7-FB6C39A90BEF">创建包含JSON文档的表：示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>此示例显示如何创建和填充表<code class="codeph">j_purchaseorder</code> ，该表在本节的其余<code class="codeph">JSON_TABLE</code>示例中使用。
                  </p>
                  <p>以下语句创建表<code class="codeph">j_purchaseorder</code> 。列<code class="codeph">po_document</code>用于存储JSON数据，因此具有<code class="codeph">IS</code> <code class="codeph">JSON</code>检查约束，以确保只有格式良好的JSON存储在列中。
                  </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE j_purchaseorder（id RAW（16）NOT NULL，date_loaded TIMESTAMP（6）WITH TIME ZONE，po_document CLOB CONSTRAINT ensure_json CHECK（po_document IS JSON））;</pre><p>以下语句将一行或一个JSON文档插入到表<code class="codeph">j_purchaseorder</code> ：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO j_purchaseorder VALUES（SYS_GUID（），SYSTIMESTAMP，'{“PONumber”：1600，“Reference”：“ABULL-20140421”，“Requestor”：“Alexis Bull”，“User”：“ABULL”，“CostCenter”： “A50”，“ShippingInstructions”：{“name”：“Alexis Bull”，“Address”：{“street”：“200 Sporting Green”，“city”：“South San Francisco”，“state”：“CA” ，“zipCode”：99236，“country”：“United States of America”}，“Phone”：[{“type”：“Office”，“number”：“909-555-7307”}，{“type” ：“Mobile”，“number”：“415-555-1234”}]}，“Special Instructions”：null，“AllowPartialShipment”：true，“LineItems”：[{“ItemNumber”：1，“Part”：{ “描述”：“One Magic Christmas”，“UnitPrice”：19.95，“UPCCode”：13131092899}，“Quantity”：9.0}，{“ItemNumber”：2，“Part”：{“Description”：“致命武器” ，“UnitPrice”：19.95，“UPCCode”：85391628927}，“数量”：5.0}]}'）;</pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAEJCEF">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-DC2F9150-52A5-4AB0-867B-468E4A345725">使用<span class="italic">JSON_query_column</span> ：示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>此示例中的语句使用<span class="italic"><code class="codeph">JSON_query_column</code></span>子句查询特定JSON属性的JSON数据，并在列中返回属性值。
                  </p>
                  <p>该语句首先将SQL / JSON行路径表达式应用于列<code class="codeph">po_document</code> ，这将导致与<code class="codeph">ShippingInstructions</code>属性匹配。然后， <code class="codeph">COLUMNS</code>子句使用<span class="italic"><code class="codeph">JSON_query_column</code></span>子句在<code class="codeph">VARCHAR2(100)</code>列中返回<code class="codeph">Phone</code>属性值。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT jt.phones FROM j_purchaseorder，JSON_TABLE（po_document，'$。ShippingInstructions'COLUMNS（手机VARCHAR2（100）FORMAT JSON PATH'$。电话'））AS jt;</pre><pre class="oac_no_warn" dir="ltr">PHONES ------------------------------------------------- ------------------------------------ [{“type”：“Office”，“number”： “909-555-7307”}，{ “类型”： “移动设备”， “号码”： “415-555-1234”}]</pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAFACBH">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-4CAB74EC-94D0-4472-BEA2-00636F1590CD">使用<span class="italic">JSON_value_column</span> ：示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>此示例中的语句通过使用<span class="italic"><code class="codeph">JSON_value_column</code></span>子句查询特定JSON值的JSON数据来优化上一示例中的语句，并将JSON值作为关系行和列中的SQL值返回。
                  </p>
                  <p>该语句首先将SQL / JSON行路径表达式应用于列<code class="codeph">po_document</code> ，这导致与JSON数组<code class="codeph">Phone</code>的元素匹配。这些元素是JSON对象，包含两个名为<code class="codeph">type</code>和<code class="codeph">number</code>成员。该语句使用<code class="codeph">COLUMNS</code>子句返回<code class="codeph">type</code>用于在每个对象值<code class="codeph">VARCHAR2(10)</code>的列称为<code class="codeph">phone_type</code>和<code class="codeph">number</code>用于在每个对象值<code class="codeph">VARCHAR2(20)</code>的列称为<code class="codeph">phone_num</code> 。该语句还返回名为<code class="codeph">row_number</code>的序数列。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT jt。* FROM j_purchaseorder，JSON_TABLE（po_document，'$。ShippingInstructions。电话[*]'COLUMNS（row_number FOR ORDINALITY，phone_type VARCHAR2（10）PATH'$ .type'，phone_num VARCHAR2（20）PATH'$ .number'））AS jt; ROW_NUMBER PHONE_TYPE PHONE_NUM ---------- ---------- -------------------- 1 Office 909-555-7307 2手机415-555-1234</pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAJGGJC">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-09C24413-C902-4941-AF7F-7B1EBC3109A1">使用<span class="italic">JSON_exists_column</span> ：示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>此示例中的语句使用<span class="italic"><code class="codeph">JSON_exists_column</code></span>子句测试JSON数据中是否存在JSON值。第一个示例将测试结果作为列中的“ <code class="codeph">true</code> ”或“ <code class="codeph">false</code> ”值返回。第二个示例使用<code class="codeph">WHERE</code>子句中的测试结果。
                  </p>
                  <p>以下语句首先将SQL / JSON行路径表达式应用于列<code class="codeph">po_document</code> ，这会导致与整个上下文项或JSON文档匹配。然后，它使用<code class="codeph">COLUMNS</code>子句返回请求者的名称和字符串值“ <code class="codeph">true</code> ”或“ <code class="codeph">false</code> ”，指示该请求者的JSON数据是否包含邮政编码。所述<code class="codeph">COLUMNS</code>子句首先使用<span class="italic"><code class="codeph">JSON_value_column</code></span>子句返回<code class="codeph">Requestor</code>中的值<code class="codeph">VARCHAR2(32)</code>的列称为<code class="codeph">requestor</code> 。然后，它使用<span class="italic"><code class="codeph">JSON_exists_column</code></span>子句确定<code class="codeph">zipCode</code>对象是否存在，并将结果返回到名为<code class="codeph">has_zip</code>的<code class="codeph">VARCHAR2(5)</code>列中。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT请求者，has_zip FROM j_purchaseorder，JSON_TABLE（po_document，'$'COLUMNS（请求者VARCHAR2（32）PATH'$。请求者'，has_zip VARCHAR2（5）EXISTS PATH'$。ShippingInstructions。Address.zipCode'））;请求者HAS_ZIP -------------------------------- -------亚历克西斯公牛是真的</pre><p>下面的语句是类似于之前的说法，只是它使用的值<code class="codeph">has_zip</code>的在<code class="codeph">WHERE</code>子句确定是否返回<code class="codeph">Requestor</code>值：</p><pre class="oac_no_warn" dir="ltr">SELECT请求者FROM j_purchaseorder，JSON_TABLE（po_document，'$'COLUMNS（请求者VARCHAR2（32）PATH'$。请求者'，has_zip VARCHAR2（5）EXISTS PATH'$。ShippingInstructions。Address.zipCode'））WHERE（has_zip ='true'）;请求者-------------------------------- Alexis Bull</pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__CJAJAEJD">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-8EB18E29-2D0C-492B-873D-6F81D7EAD82E">使用<span class="italic">JSON_nested_path</span> ：示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>以下两个简单语句演示了<span class="italic"><code class="codeph">JSON_nested_path</code></span>子句的功能。它们在包含三个元素的简单JSON数组上运行。前两个元素是数字。第三个元素是嵌套的JSON数组，它包含两个字符串值元素。
                  </p>
                  <p>以下语句不使用<span class="italic"><code class="codeph">JSON_nested_path</code></span>子句。它将数组中的三个元素返回一行。嵌套数组完整返回。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM JSON_TABLE（'[1,2，[“a”，“b”]]'，'$'COLUMNS（outer_value_0 NUMBER PATH'$ [0]'，outer_value_1 NUMBER PATH'$ [1]'，outer_value_2 VARCHAR2 （20）FORMAT JSON PATH'$ [2]'））; OUTER_VALUE_0 OUTER_VALUE_1 OUTER_VALUE_2 ------------- ------------- -------------------- 1 2 [“a”，“b”]</pre><p>以下语句与前一个语句不同，因为它使用<span class="italic"><code class="codeph">JSON_nested_path</code></span>子句在单行中的单个列中返回嵌套数组的各个元素以及父数组元素。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM JSON_TABLE（'[1,2，[“a”，“b”]]'，'$'COLUMNS（outer_value_0 NUMBER PATH'$ [0]'，outer_value_1 NUMBER PATH'$ [1]'，NESTED PATH '$ [2]'COLUMNS（nested_value_0 VARCHAR2（1）PATH'$ [0]'，nested_value_1 VARCHAR2（1）PATH'$ [1]'）））; OUTER_VALUE_0 OUTER_VALUE_1 NESTED_VALUE_0 NESTED_VALUE_1 ------------- ------------- -------------- ------ -------- 1 2 ab</pre><p>上一个示例显示了如何将<span class="italic"><code class="codeph">JSON_nested_path</code></span>与嵌套的JSON数组一起使用。以下示例说明如何将<span class="italic"><code class="codeph">JSON_nested_path</code></span>子句与嵌套的JSON对象一起使用， <span class="italic"><code class="codeph">JSON_nested_path</code></span>是将嵌套对象的各个元素与父对象元素一起返回到单行中的各个列中。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM JSON_TABLE（'{a：100，b：200，c：{d：300，e：400}}'，'$'COLUMNS（outer_value_0 NUMBER PATH'$ .a'，outer_value_1 NUMBER PATH'$ .b '，NESTED PATH'$ .c'COLUMNS（nested_value_0 NUMBER PATH'$ .d'，nested_value_1 NUMBER PATH'$ .e'）））; OUTER_VALUE_0 OUTER_VALUE_1 NESTED_VALUE_0 NESTED_VALUE_1 ------------- ------------- -------------- ------ -------- 100 200 300 400</pre><p>查询<code class="codeph">j_purchaseorder</code>表时，以下语句使用<span class="italic"><code class="codeph">JSON_nested_path</code></span>子句。它首先将行路径表达式应用于列<code class="codeph">po_document</code> ，这会导致与整个上下文项或JSON文档匹配。然后，它使用<code class="codeph">COLUMNS</code>子句在名为<code class="codeph">requestor</code>的<code class="codeph">VARCHAR2(32)</code>列中返回<code class="codeph">Requestor</code>值。然后，它使用<span class="italic"><code class="codeph">JSON_nested_path</code></span>子句返回嵌套<code class="codeph">Phone</code>数组的每个成员中各个对象的属性值。请注意，为嵌套数组的每个成员生成一行，每行包含相应的<code class="codeph">Requestor</code>值。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT jt。* FROM j_purchaseorder，JSON_TABLE（po_document，'$'COLUMNS（requestor VARCHAR2（32）PATH'$。请求者'，NESTED PATH'$。ShippingInstructions。电话[*]'COLUMNS（phone_type VARCHAR2（32）PATH'$ .type'，phone_num VARCHAR2（20）PATH'$ .number'）））AS jt;请求者PHONE_TYPE PHONE_NUM -------------------- -------------------- ------- -------- Alexis Bull Office 909-555-7307 Alexis Bull Mobile 415-555-1234</pre><p>以下示例显示了在<code class="codeph">JSON_nested_path</code>使用简单的点符号及其等效的无点表示法。
                  </p><pre class="oac_no_warn" dir="ltr">选择c。* FROM customer t，JSON_TABLE（t.json COLUMNS（id，姓名，电话，地址，NESTED订单[*] COLUMNS（更新，状态，NESTED lineitems [*] COLUMNS（描述，数量NUMBER，价格NUMBER））））c ;</pre><p>以点表示法的上述语句相当于没有点表示法的以下语句：</p><pre class="oac_no_warn" dir="ltr">选择c。* FROM customer t，JSON_TABLE（t.json，'$'COLUMNS（id PATH'$ .id'，名称PATH'$。name'，电话路径'$ .phone'，地址PATH'$ .address'，NESTED PATH '$ .orders [*]'COLUMNS（已更新PATH'$ .updated'，状态路径'$ .status'，NESTED PATH'$ .lineitems [*]'COLUMNS（描述路径'$ .description'，数量NUMBER PATH' $ .quantity'，价格NUMBER PATH'$ .price'））））c;</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3C8E63B5-0B94-4E86-A2D3-3D4831B67C62__GUID-B237368A-7579-4B49-B193-9D56DAD4B58A"><span class="italic">nested_clause</span></p>
                  <p>使用<code class="codeph">nested_clause</code>作为将JSON值映射到关<code class="codeph">nested_clause</code>的简写语法。它重用了<code class="codeph">JSON_TABLE</code>列子句的语法，基本上等同于带有<code class="codeph">JSON_TABLE</code>的左外ANSI连接。</p>
                  <p>使用nested_clause的示例1使用带有<code class="codeph">JSON_TABLE</code>的左外连接等效于示例2。
                  </p>
                  <p><span class="bold">示例1 Nested_Clause</span></p><pre class="pre codeblock"><code>选择t。* FROM j_purchaseOrder NESTED po_document COLUMNS（PONumber，Reference，Requestor）t; PONUMBER REFERENCE REQUESTOR --------------- ------------------------------  - --------------------------- 1600 ABULL-20140421 Alexis Bull</code></pre><p><span class="bold">示例2使用JSON_TABLE进行左外连接</span></p><pre class="pre codeblock"><code>选择t。* FROM j_purchaseOrder LEFT OUTER JOIN JSON_TABLE（po_document COLUMNS（PONumber，Reference，Requestor））t ON 1 = 1;</code></pre><p>使用<code class="codeph">nested_clause</code> ， <code class="codeph">NESTED</code>关键字后面的JSON列名称将不包含在<code class="codeph">SELECT *</code>扩展中。例如：</p><pre class="pre codeblock"><code>SELECT * FROM j_purchaseOrder NESTED po_document。LineItems [*] COLUMNS（ItemNumber，Quantity NUMBER）; ID DATE_LOADED ITEMN QUANTITY ------------------------ ---------------------- ------------------ ------- ----------- 6C5589E9A9156 ... 16-MAY-18 08.40.30.397688 AM -07： 00 1 9 6C5589E9A9156 ... 16-MAY-18 08.40.30.397688 AM -07：00 2 5</code></pre><p>结果不包括JSON列名称<code class="codeph">po_document</code>作为结果中的一列。
                  </p>
                  <p>当取消JSON列数据时，建议使用<code class="codeph">LEFT OUTER JOIN</code>语义，以便不生成行的JSON列不会从结果中过滤其他非JSON数据。例如，具有NULL <code class="codeph">po_document</code>列的<code class="codeph">j_purchaseOrder</code>行不会从结果中过滤可能非空的关系列<code class="codeph">columns id</code>和<code class="codeph">date_loaded</code> 。
                  </p>
                  <p>columns子句支持为<code class="codeph">JSON_TABLE</code>定义的所有相同功能，包括嵌套列。例如：</p><pre class="pre codeblock"><code>选择t。* FROM j_purchaseorder NESTED po_document COLUMNS（PONumber，Reference，NESTED LineItems [*] COLUMNS（ItemNumber，Quantity））t PONUMBER REFERENCE ITEMN QUANTITY --------------- ------- ----------------------- ----- ------------ 1600 ABULL-20140421 1 9 1600 ABULL-20140421 2 5</code></pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
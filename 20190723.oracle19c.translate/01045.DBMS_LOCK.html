<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_LOCK package provides an interface to Oracle Lock Management services."></meta>
      <meta name="description" content="The DBMS_LOCK package provides an interface to Oracle Lock Management services."></meta>
      <title>DBMS_LOCK</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_LOCK package provides an interface to Oracle Lock Management services."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_LOB.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_LOGMNR.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_LOB.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_LOGMNR.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_LOCK</li>
            </ol>
            <a id="GUID-ABF571D1-443D-4528-BDD2-50768B4D1898" name="GUID-ABF571D1-443D-4528-BDD2-50768B4D1898"></a><a id="ARPLS021"></a><a id="ARPLS021"></a>
            
            <h2 id="ARPLS-GUID-ABF571D1-443D-4528-BDD2-50768B4D1898" class="sect2"><span class="enumeration_chapter">95</span> DBMS_LOCK</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_LOCK</code>包提供了Oracle Lock Management服务的接口。
               </p>
               <p>您可以请求锁定特定模式，在同一个或另一个实例中为其指定另一个过程中可识别的唯一名称，更改锁定模式并释放它。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_LOCK.html#GUID-4DECD58D-6D07-4723-B275-40E97902032C" title="DBMS_LOCK包具有许多有益的用途。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOCK.html#GUID-A2D4A626-EB06-4FD9-A6AA-1BE1DD0D7AF1" title="可用的最大总锁数可能存在特定于操作系统的限制。使用锁或将此程序包提供给其他用户时必须考虑这一点。请考虑仅向特定用户或角色授予EXECUTE特权。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOCK.html#GUID-8F868C41-CEA3-48E2-8701-3C0F8D2B308C" title="DBMS_LOCK包中包含几个在指定参数值时使用的常量。">常量</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOCK.html#GUID-F1C17C14-6F79-435D-A959-D966EC0C7E0D" title="当另一个过程成立时" type="" hel=",=" ge="=" ="">规则和限制</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOCK.html#GUID-7E38A69F-CB2B-4484-BFA3-715259227011" title="用户锁永远不会与Oracle锁冲突，因为它们用前缀标识" u=".=" ="">操作说明</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOCK.html#GUID-63B2E2DC-F408-4305-8882-B887A578AC89" title="该表列出了DBMS_LOCK子程序并简要描述了它们。">DBMS_LOCK子程序摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-ABF571D1-443D-4528-BDD2-50768B4D1898__GUID-2425F7BB-71D7-4283-9677-C7C76122E5DF">
                  <p class="notep1">也可以看看：</p>
                  <p>有关更多信息，以及如何使用<code class="codeph">DBMS_LOCK</code>程序包的示例，请<code class="codeph">DBMS_LOCK</code> <a href="../adfns/sql-processing-for-application-developers.html#ADFNS-GUID-57365E45-5F85-471B-81D9-F52EA16F1E85" target="_blank"><span><cite>Oracle数据库开发指南”</cite></span></a> 
                  </p>
               </div>
            </div><a id="ARPLS66762"></a><a id="ARPLS66762"></a><div class="props_rev_3"><a id="GUID-4DECD58D-6D07-4723-B275-40E97902032C" name="GUID-4DECD58D-6D07-4723-B275-40E97902032C"></a><h3 id="ARPLS-GUID-4DECD58D-6D07-4723-B275-40E97902032C" class="sect3"><span class="enumeration_section">95.1</span> DBMS_LOCK概述</h3>
               <div>
                  <p><code class="codeph">DBMS_LOCK</code>包具有许多有益的用途。
                  </p>
                  <div class="section">
                     <p>这些用途包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>提供对设备（例如终端）的独占访问</p>
                        </li>
                        <li>
                           <p>提供读锁的应用程序级强制</p>
                        </li>
                        <li>
                           <p>检测锁定何时释放并在应用程序后清除</p>
                        </li>
                        <li>
                           <p>同步应用程序并强制执行顺序处理</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66763"></a><a id="ARPLS66763"></a><div class="props_rev_3"><a id="GUID-A2D4A626-EB06-4FD9-A6AA-1BE1DD0D7AF1" name="GUID-A2D4A626-EB06-4FD9-A6AA-1BE1DD0D7AF1"></a><h3 id="ARPLS-GUID-A2D4A626-EB06-4FD9-A6AA-1BE1DD0D7AF1" class="sect3"><span class="enumeration_section">95.2</span> DBMS_LOCK安全模型</h3>
               <div>
                  <p>可用的最大总锁数可能存在特定于操作系统的限制。使用锁或将此程序包提供给其他用户时<span class="italic">必须</span>考虑这一点。请考虑仅向特定用户或角色授予<code class="codeph">EXECUTE</code>特权。
                  </p>
                  <div class="section">
                     <p>更好的选择是创建一个限制所用锁数的封装包，并为特定用户授予<code class="codeph">EXECUTE</code>特权。<code class="codeph">DBMS_LOCK.SQL</code>包规范文件中记录了封装包的<code class="codeph">DBMS_LOCK.SQL</code> 。这些锁在企业管理器监视器中出现的缩写位于括号中。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66764"></a><a id="ARPLS66765"></a><a id="ARPLS66765"></a><a id="ARPLS66764"></a><div class="props_rev_3"><a id="GUID-8F868C41-CEA3-48E2-8701-3C0F8D2B308C" name="GUID-8F868C41-CEA3-48E2-8701-3C0F8D2B308C"></a><h3 id="ARPLS-GUID-8F868C41-CEA3-48E2-8701-3C0F8D2B308C" class="sect3"><span class="enumeration_section">95.3</span> DBMS_LOCK常量</h3>
               <div>
                  <p><code class="codeph">DBMS_LOCK</code>包中包含几个在指定参数值时使用的常量。
                  </p>
                  <div class="section">
                     <p>这些常量如下表所示。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-8F868C41-CEA3-48E2-8701-3C0F8D2B308C__CHDBCFDI">
                     <p class="titleintable">表95-1 DBMS_LOCK常量</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="DBMS_LOCK常量" width="100%" border="1" summary="This table describes Constants used by DBMS_LOCK subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="17%" id="d520984e486">名称</th>
                              <th align="left" valign="bottom" width="25%" id="d520984e489">替代名称</th>
                              <th align="left" valign="bottom" width="11%" id="d520984e492">类型</th>
                              <th align="left" valign="bottom" width="7%" id="d520984e495">值</th>
                              <th align="left" valign="bottom" width="14%" id="d520984e498">OEM缩写</th>
                              <th align="left" valign="bottom" width="27%" id="d520984e501">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d520984e506" headers="d520984e486 ">
                                 <p><code class="codeph">NL_MODE</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d520984e506 d520984e489 ">
                                 <p><code class="codeph">NuL1</code></p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d520984e506 d520984e492 ">
                                 <p><code class="codeph">整数</code></p>
                              </td>
                              <td align="left" valign="top" width="7%" headers="d520984e506 d520984e495 ">
                                 <p><code class="codeph">1</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e506 d520984e498 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d520984e506 d520984e501 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d520984e529" headers="d520984e486 ">
                                 <p><code class="codeph">SS_MODE</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d520984e529 d520984e489 ">
                                 <p><code class="codeph">子共享</code></p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d520984e529 d520984e492 ">
                                 <p><code class="codeph">整数</code></p>
                              </td>
                              <td align="left" valign="top" width="7%" headers="d520984e529 d520984e495 ">
                                 <p><code class="codeph">2</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e529 d520984e498 ">
                                 <p><code class="codeph">ULRS</code></p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d520984e529 d520984e501 ">
                                 <p>这可以在聚合对象上使用，以指示正在对象的子部分上获取共享锁。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d520984e553" headers="d520984e486 ">
                                 <p><code class="codeph">SX_MODE</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d520984e553 d520984e489 ">
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">次要的</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">行独占模式</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d520984e553 d520984e492 ">
                                 <p><code class="codeph">整数</code></p>
                              </td>
                              <td align="left" valign="top" width="7%" headers="d520984e553 d520984e495 ">
                                 <p><code class="codeph">3</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e553 d520984e498 ">
                                 <p><code class="codeph">ULRX</code></p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d520984e553 d520984e501 ">
                                 <p>这可以在聚合对象上使用，以指示在对象的子部分上获取独占锁。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d520984e583" headers="d520984e486 ">
                                 <p><code class="codeph">S_MODE</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d520984e583 d520984e489 ">
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">共享</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">行独占模式</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">预期独家</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d520984e583 d520984e492 ">
                                 <p><code class="codeph">整数</code></p>
                              </td>
                              <td align="left" valign="top" width="7%" headers="d520984e583 d520984e495 ">
                                 <p><code class="codeph">4</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e583 d520984e498 ">
                                 <p><code class="codeph">ULRSX</code></p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d520984e583 d520984e501 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d520984e617" headers="d520984e486 ">
                                 <p><code class="codeph">SSX_MODE</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d520984e617 d520984e489 ">
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">Shared</code> <code class="codeph">Sub eXclusive</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">分享行独家模式</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d520984e617 d520984e492 ">
                                 <p><code class="codeph">整数</code></p>
                              </td>
                              <td align="left" valign="top" width="7%" headers="d520984e617 d520984e495 ">
                                 <p><code class="codeph">五</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e617 d520984e498 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d520984e617 d520984e501 ">
                                 <p>这表示整个聚合对象具有共享锁，但是一些子部分可能另外具有独占锁。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d520984e648" headers="d520984e486 ">
                                 <p><code class="codeph">X_MODE</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d520984e648 d520984e489 ">
                                 <p><code class="codeph">独家</code></p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d520984e648 d520984e492 ">
                                 <p><code class="codeph">整数</code></p>
                              </td>
                              <td align="left" valign="top" width="7%" headers="d520984e648 d520984e495 ">
                                 <p><code class="codeph">6</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e648 d520984e498 ">
                                 <p><code class="codeph">ULX</code></p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d520984e648 d520984e501 ">
                                 <p>-</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>这些是各种锁定模式（nl  - &gt;“NuLl”，ss  - &gt;“Sub Shared”，sx  - &gt;“Sub eXclusive”，s  - &gt;“Shared”，ssx  - &gt;“Shared Sub eXclusive”，x  - &gt;“独家”）。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66766"></a><a id="ARPLS66767"></a><a id="ARPLS66767"></a><a id="ARPLS66766"></a><div class="props_rev_3"><a id="GUID-F1C17C14-6F79-435D-A959-D966EC0C7E0D" name="GUID-F1C17C14-6F79-435D-A959-D966EC0C7E0D"></a><h3 id="ARPLS-GUID-F1C17C14-6F79-435D-A959-D966EC0C7E0D" class="sect3"><span class="enumeration_section">95.4</span> DBMS_LOCK。规则和限制</h3>
               <div>
                  <p>当另一个进程保持“保持”时，根据保持的模式和get类型，尝试获取“get”成功或失败。</p>
                  <div class="section">
                     <p>下表描述了结果：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-F1C17C14-6F79-435D-A959-D966EC0C7E0D__GUID-67E166AC-9DC9-4BAA-A979-F1688B01A54C">
                     <p class="titleintable">表95-2锁兼容性</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="锁兼容性" width="100%" border="1" summary="This table describes Lock Compatibility rules used by DBMS_LOCK." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="14%" id="d520984e780">保持模式</th>
                              <th align="left" valign="bottom" width="14%" id="d520984e783">GET NL</th>
                              <th align="left" valign="bottom" width="14%" id="d520984e786">获得SS</th>
                              <th align="left" valign="bottom" width="14%" id="d520984e789">GET SX</th>
                              <th align="left" valign="bottom" width="14%" id="d520984e792">GET S.</th>
                              <th align="left" valign="bottom" width="14%" id="d520984e795">获得SSX</th>
                              <th align="left" valign="bottom" width="14%" id="d520984e798">GET X.</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d520984e803" headers="d520984e780 ">
                                 <p><code class="codeph">NL</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e803 d520984e783 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e803 d520984e786 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e803 d520984e789 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e803 d520984e792 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e803 d520984e795 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e803 d520984e798 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d520984e832" headers="d520984e780 ">
                                 <p><code class="codeph">SS</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e832 d520984e783 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e832 d520984e786 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e832 d520984e789 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e832 d520984e792 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e832 d520984e795 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e832 d520984e798 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d520984e861" headers="d520984e780 ">
                                 <p><code class="codeph">SX</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e861 d520984e783 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e861 d520984e786 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e861 d520984e789 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e861 d520984e792 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e861 d520984e795 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e861 d520984e798 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d520984e890" headers="d520984e780 ">
                                 <p><code class="codeph">小号</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e890 d520984e783 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e890 d520984e786 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e890 d520984e789 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e890 d520984e792 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e890 d520984e795 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e890 d520984e798 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d520984e919" headers="d520984e780 ">
                                 <p><code class="codeph">SSX</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e919 d520984e783 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e919 d520984e786 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e919 d520984e789 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e919 d520984e792 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e919 d520984e795 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e919 d520984e798 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d520984e948" headers="d520984e780 ">
                                 <p><code class="codeph">X</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e948 d520984e783 ">
                                 <p><code class="codeph">成功</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e948 d520984e786 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e948 d520984e789 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e948 d520984e792 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e948 d520984e795 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d520984e948 d520984e798 ">
                                 <p><code class="codeph">失败</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">maxwait constant integer：= 32767;</pre><p>常量<code class="codeph">maxwait</code>永远等待。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66768"></a><a id="ARPLS66768"></a><div class="props_rev_3"><a id="GUID-7E38A69F-CB2B-4484-BFA3-715259227011" name="GUID-7E38A69F-CB2B-4484-BFA3-715259227011"></a><h3 id="ARPLS-GUID-7E38A69F-CB2B-4484-BFA3-715259227011" class="sect3"><span class="enumeration_section">95.5</span> DBMS_LOCK操作说明</h3>
               <div>
                  <p>用户锁永远不会与Oracle锁冲突，因为它们用前缀“UL”标识。您可以使用企业管理器锁定监视器屏幕或相应的固定视图查看这些锁定。</p>
                  <div class="section">
                     <p>会话终止时会自动释放用户锁定。锁标识符是0到1073741823范围内的数字。</p>
                     <p>由于保留的用户锁与Oracle锁相同，因此它具有Oracle锁的所有功能，例如死锁检测。确保在<code class="codeph">COMMIT</code>上释放分布式事务中使用的任何用户锁，否则可能会发生未检测到的死锁。
                     </p>
                     <p><code class="codeph">DBMS_LOCK</code>最有效，每个会话限制几百个锁。Oracle强烈建议您开发使用这些锁的标准约定，以避免尝试使用相同锁的过程之间发生冲突。例如，将您的公司名称包含在锁定名称中。 <code class="codeph"> </code></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66769"></a><a id="ARPLS66770"></a><a id="ARPLS66770"></a><a id="ARPLS66769"></a><div class="props_rev_3"><a id="GUID-63B2E2DC-F408-4305-8882-B887A578AC89" name="GUID-63B2E2DC-F408-4305-8882-B887A578AC89"></a><h3 id="ARPLS-GUID-63B2E2DC-F408-4305-8882-B887A578AC89" class="sect3"><span class="enumeration_section">95.6</span> DBMS_LOCK子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_LOCK</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-63B2E2DC-F408-4305-8882-B887A578AC89__GUID-11768DDF-2303-4F55-85C4-F3F1C960DDE3">
                     <p class="titleintable">表<span class="italic"><span class="bold">95-3 DBMS_LOCK包子程序</span></span></p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_LOCK包子程序" width="100%" border="1" summary="This table lists the DBMS_LOCK subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="37%" id="d520984e1188">子程序</th>
                              <th align="left" valign="bottom" width="63%" id="d520984e1191">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d520984e1196" headers="d520984e1188 ">
                                 <p><a href="DBMS_LOCK.html#GUID-73F03FA6-04B3-4341-AB4F-8BECCF898D13" title="此过程为指定的锁名称分配唯一的锁标识符（在1073741824到1999999999范围内）。锁标识符用于使应用程序能够协调其锁的使用。这是因为应用程序可能更容易根据锁名称而不是锁定号来协调它们对锁的使用。">ALLOCATE_UNIQUE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d520984e1196 d520984e1191 ">
                                 <p>为命名锁分配唯一的锁ID</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d520984e1208" headers="d520984e1188 ">
                                 <p><a href="DBMS_LOCK.html#GUID-25129084-C6C7-489C-A611-02D6BDFDBFB9" title="此函数将锁定从一种模式转换为另一种模式。CONVERT是一个重载函数，它接受用户定义的锁标识符或ALLOCATE_UNIQUE过程返回的锁句柄。">转换功能</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d520984e1208 d520984e1191 ">
                                 <p>将锁从一种模式转换为另一种模式</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d520984e1226" headers="d520984e1188 ">
                                 <p><a href="DBMS_LOCK.html#GUID-1007B402-15D3-4447-9FF3-219DF113A47B" title="此函数显式释放先前使用REQUEST函数获取的锁。">RELEASE功能</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d520984e1226 d520984e1191 ">
                                 <p>释放锁定</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d520984e1241" headers="d520984e1188 ">
                                 <p><a href="DBMS_LOCK.html#GUID-CC3AEC00-CBFF-45DD-99C3-C7A312C0213E" title="此函数请求具有指定模式的锁。">请求功能</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d520984e1241 d520984e1191 ">
                                 <p>请求锁定特定模式。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS66771"></a><a id="ARPLS66772"></a><a id="ARPLS66772"></a><a id="ARPLS66771"></a><div class="props_rev_3"><a id="GUID-73F03FA6-04B3-4341-AB4F-8BECCF898D13" name="GUID-73F03FA6-04B3-4341-AB4F-8BECCF898D13"></a><h4 id="ARPLS-GUID-73F03FA6-04B3-4341-AB4F-8BECCF898D13" class="sect4"><span class="enumeration_section">95.6.1</span> ALLOCATE_UNIQUE过程</h4>
                  <div>
                     <p>此过程为指定的锁名称分配唯一的锁标识符（在1073741824到1999999999范围内）。锁标识符用于使应用程序能够协调其锁的使用。这是因为应用程序可能更容易根据锁名称而不是锁定号来协调它们对锁的使用。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-73F03FA6-04B3-4341-AB4F-8BECCF898D13__GUID-B814E998-4E52-430D-9AEE-E9F04786D457">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOCK.ALLOCATE_UNIQUE（lockname IN VARCHAR2，lockhandle OUT VARCHAR2，expiration_secs IN INTEGER DEFAULT 864000）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-73F03FA6-04B3-4341-AB4F-8BECCF898D13__GUID-07C68324-FA80-44AC-B8DA-A663E79CE6BB">参数</p>
                        <div class="tblformal" id="GUID-73F03FA6-04B3-4341-AB4F-8BECCF898D13__GUID-5BE917AE-3E7D-4FA9-89EE-C8323547EBC0">
                           <p class="titleintable">表95-4 ALLOCATE_UNIQUE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALLOCATE_UNIQUE过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_LOCK.ALLOCATE_UNIQUE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d520984e1362">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d520984e1365">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1370" headers="d520984e1362 ">
                                       <p><code class="codeph">锁名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1370 d520984e1365 ">
                                       <p>要为其生成唯一ID的锁的名称。</p>
                                       <p>不要使用以<code class="codeph">ORA$</code>开头的锁名称;这些保留用于Oracle提供的产品。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1383" headers="d520984e1362 ">
                                       <p><code class="codeph">lockhandle</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1383 d520984e1365 ">
                                       <p>返回<code class="codeph">ALLOCATE_UNIQUE</code>生成的锁ID的句柄。</p>
                                       <p>您可以在后续调用<code class="codeph">REQUEST</code> ， <code class="codeph">CONVERT</code>和<code class="codeph">RELEASE</code>使用此句柄。</p>
                                       <p>返回句柄而不是实际的锁ID，以减少编程错误意外创建错误但有效的锁ID的可能性。这为使用此软件包的不同应用程序提供了更好的隔离。</p>
                                       <p><code class="codeph">LOCKHANDLE</code>最高可达<code class="codeph">VARCHAR2</code> （128）。
                                       </p>
                                       <p>使用具有相同锁名称的<code class="codeph">ALLOCATE_UNIQUE</code>返回的锁定句柄的所有会话都指向相同的锁。因此，请勿将锁定句柄从一个会话传递到另一个会话。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1419" headers="d520984e1362 ">
                                       <p><code class="codeph">expiration_specs</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1419 d520984e1365 ">
                                       <p>在允许从<code class="codeph">DBMS_LOCK_ALLOCATED</code>表中删除该锁之前，在指定锁上执行最后一次<code class="codeph">ALLOCATE_UNIQUE</code>之后等待的<code class="codeph">DBMS_LOCK_ALLOCATED</code> 。
                                       </p>
                                       <p>默认等待期为10天。您不应该从此表中删除锁。对<code class="codeph">ALLOCATE_UNIQUE</code>后续调用可能会删除过期的锁以恢复空间。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-73F03FA6-04B3-4341-AB4F-8BECCF898D13__GUID-7EE50E8C-61AE-4BA7-8077-25DB57A4DD01">使用说明</p>
                        <p>如果选择按名称标识锁，则可以使用<code class="codeph">ALLOCATE_UNIQUE</code>为这些命名锁生成唯一的锁标识号。
                        </p>
                        <p>使用新锁名称调用<code class="codeph">ALLOCATE_UNIQUE</code>的第一个会话将生成唯一的锁ID，并将其存储在<code class="codeph">dbms_lock_allocated</code>表中。后续调用（通常由其他会话）返回先前生成的锁ID。
                        </p>
                        <p>锁定名称与最后一次调用具有指定锁定名称的<code class="codeph">ALLOCATE_UNIQUE</code> <code class="codeph">expiration_secs</code> （默认为10天）的返回锁定ID相关联。在此之后，可以删除此锁定名称的<code class="codeph">dbms_lock_allocated</code>表中的行以恢复空间。<code class="codeph">ALLOCATE_UNIQUE</code>执行提交。
                        </p>
                        <div class="infoboxnotewarn" id="GUID-73F03FA6-04B3-4341-AB4F-8BECCF898D13__GUID-83219F21-D5B3-4352-A10E-BC24EF0D16B6">
                           <p class="notep1">警告：</p>
                           <p>命名用户锁的效率可能较低，因为Oracle使用SQL来确定与指定名称关联的锁。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-73F03FA6-04B3-4341-AB4F-8BECCF898D13__GUID-7AF514CD-E968-4C9C-93C2-F1F0F6B6ABA2">例外</p>
                        <p><code class="codeph">ORA-20000</code> ， <code class="codeph">ORU-10003:</code>无法在目录<code class="codeph">dbms_lock_allocated</code>找到或插入锁&lt; <code class="codeph">lockname</code> &gt;。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66773"></a><a id="ARPLS66774"></a><a id="ARPLS66775"></a><a id="ARPLS66774"></a><a id="ARPLS66775"></a><a id="ARPLS66773"></a><div class="props_rev_3"><a id="GUID-25129084-C6C7-489C-A611-02D6BDFDBFB9" name="GUID-25129084-C6C7-489C-A611-02D6BDFDBFB9"></a><h4 id="ARPLS-GUID-25129084-C6C7-489C-A611-02D6BDFDBFB9" class="sect4"><span class="enumeration_section">95.6.2</span> CONVERT功能</h4>
                  <div>
                     <p>此函数将锁定从一种模式转换为另一种模式。<code class="codeph">CONVERT</code>是一个重载函数，它接受用户定义的锁标识符或<code class="codeph">ALLOCATE_UNIQUE</code>过程返回的锁句柄。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-25129084-C6C7-489C-A611-02D6BDFDBFB9__GUID-384FE24F-724B-4FF8-BB09-B7540B5E6D44">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOCK.CONVERT（id IN INTEGER || lockhandle IN VARCHAR2，lockmode IN INTEGER，timeout IN NUMBER DEFAULT MAXWAIT）RETURN INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-25129084-C6C7-489C-A611-02D6BDFDBFB9__GUID-1426D428-0B01-4D00-B8AF-3E6489BCFD3C">参数</p>
                        <div class="tblformal" id="GUID-25129084-C6C7-489C-A611-02D6BDFDBFB9__GUID-BC7281A5-D8FF-4ABC-A925-6113D5AE6253">
                           <p class="titleintable">表95-5 CONVERT函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CONVERT函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_LOCK.CONVERT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d520984e1605">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d520984e1608">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1613" headers="d520984e1605 ">
                                       <p><code class="codeph">id</code>或<code class="codeph">lockhandle</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1613 d520984e1608 ">
                                       <p>用户分配了锁定标识符，从0到1073741823，或<code class="codeph">ALLOCATE_UNIQUE</code>返回的锁定句柄，您要更改的锁定模式</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1627" headers="d520984e1605 ">
                                       <p><code class="codeph">lockmode</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1627 d520984e1608 ">
                                       <p>要分配给指定锁的新模式。</p>
                                       <p>有关可用模式及其关联的整数标识符，请参阅<a href="DBMS_LOCK.html#GUID-8F868C41-CEA3-48E2-8701-3C0F8D2B308C" title="DBMS_LOCK包中包含几个在指定参数值时使用的常量。">常量</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1647" headers="d520984e1605 ">
                                       <p><code class="codeph">超时</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1647 d520984e1608 ">
                                       <p>继续尝试更改锁定模式的秒数。</p>
                                       <p>如果在此时间段内无法转换锁定，则调用返回值1（超时）。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-25129084-C6C7-489C-A611-02D6BDFDBFB9__GUID-3F31EBC9-A143-4886-A1A6-ABEFFD16B62B">返回值</p>
                        <div class="tblformal" id="GUID-25129084-C6C7-489C-A611-02D6BDFDBFB9__GUID-D652C004-2FA2-4E69-9E9C-CB61A9C12089">
                           <p class="titleintable">表95-6 CONVERT函数返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CONVERT函数返回值" width="100%" border="1" summary="This table describes Values Returned by CONVERT." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d520984e1669">回报价值</th>
                                    <th align="left" valign="bottom" width="69%" id="d520984e1672">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1677" headers="d520984e1669 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1677 d520984e1672 ">
                                       <p>成功</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1685" headers="d520984e1669 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1685 d520984e1672 ">
                                       <p>超时</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1693" headers="d520984e1669 ">
                                       <p><code class="codeph">2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1693 d520984e1672 ">
                                       <p>僵局</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1701" headers="d520984e1669 ">
                                       <p><code class="codeph">3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1701 d520984e1672 ">
                                       <p>参数错误</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1709" headers="d520984e1669 ">
                                       <p><code class="codeph">4</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1709 d520984e1672 ">
                                       <p>不要拥有<code class="codeph">id</code>或<code class="codeph">lockhandle</code>指定的锁</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1722" headers="d520984e1669 ">
                                       <p><code class="codeph">五</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1722 d520984e1672 ">
                                       <p>非法锁定手柄</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66776"></a><a id="ARPLS66777"></a><a id="ARPLS66778"></a><a id="ARPLS66777"></a><a id="ARPLS66778"></a><a id="ARPLS66776"></a><div class="props_rev_3"><a id="GUID-1007B402-15D3-4447-9FF3-219DF113A47B" name="GUID-1007B402-15D3-4447-9FF3-219DF113A47B"></a><h4 id="ARPLS-GUID-1007B402-15D3-4447-9FF3-219DF113A47B" class="sect4"><span class="enumeration_section">95.6.3</span> RELEASE函数</h4>
                  <div>
                     <p>此函数显式释放先前使用<code class="codeph">REQUEST</code>函数获取的锁。
                     </p>
                     <div class="section">
                        <p>锁会在会话结束时自动释放。<code class="codeph">RELEASE</code>是一个重载函数，它接受用户定义的锁标识符或<code class="codeph">ALLOCATE_UNIQUE</code>过程返回的锁句柄。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1007B402-15D3-4447-9FF3-219DF113A47B__GUID-6FF13A73-C571-4BCC-AE77-A1FB27446AC7">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOCK.RELEASE（id IN INTEGER）RETURN INTEGER; DBMS_LOCK.RELEASE（lockhandle IN VARCHAR2）RETURN INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1007B402-15D3-4447-9FF3-219DF113A47B__GUID-EA9EBB32-356A-45A5-922B-C2FDCA07BD36">参数</p>
                        <div class="tblformal" id="GUID-1007B402-15D3-4447-9FF3-219DF113A47B__GUID-D201E2D8-802E-46A6-941F-BA5C9DDF3C8B">
                           <p class="titleintable">表95-7 RELEASE函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RELEASE函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_LOCK.RELEASE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d520984e1853">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d520984e1856">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1861" headers="d520984e1853 ">
                                       <p><code class="codeph">id</code>或<code class="codeph">lockhandle</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1861 d520984e1856 ">
                                       <p>用户分配了锁定标识符，从0到1073741823，或<code class="codeph">ALLOCATE_UNIQUE</code>返回的锁定句柄，您要更改的锁定模式</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1007B402-15D3-4447-9FF3-219DF113A47B__GUID-B191ECC1-76E0-4A0D-BD59-325A673B2944">返回值</p>
                        <div class="tblformal" id="GUID-1007B402-15D3-4447-9FF3-219DF113A47B__GUID-013A4DA5-F000-460C-A127-166F4A8F58DB">
                           <p class="titleintable">表95-8 RELEASE函数返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RELEASE函数返回值" width="100%" border="1" summary="This table describes Values Returned by RELEASE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d520984e1887">回报价值</th>
                                    <th align="left" valign="bottom" width="69%" id="d520984e1890">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1895" headers="d520984e1887 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1895 d520984e1890 ">
                                       <p>成功</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1903" headers="d520984e1887 ">
                                       <p><code class="codeph">3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1903 d520984e1890 ">
                                       <p>参数错误</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1911" headers="d520984e1887 ">
                                       <p><code class="codeph">4</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1911 d520984e1890 ">
                                       <p>不要拥有<code class="codeph">id</code>或<code class="codeph">lockhandle</code>指定的锁</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e1924" headers="d520984e1887 ">
                                       <p><code class="codeph">五</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e1924 d520984e1890 ">
                                       <p>非法锁定手柄</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66779"></a><a id="ARPLS66780"></a><a id="ARPLS66781"></a><a id="ARPLS66780"></a><a id="ARPLS66781"></a><a id="ARPLS66779"></a><div class="props_rev_3"><a id="GUID-CC3AEC00-CBFF-45DD-99C3-C7A312C0213E" name="GUID-CC3AEC00-CBFF-45DD-99C3-C7A312C0213E"></a><h4 id="ARPLS-GUID-CC3AEC00-CBFF-45DD-99C3-C7A312C0213E" class="sect4"><span class="enumeration_section">95.6.4</span>请求功能</h4>
                  <div>
                     <p>此函数请求具有指定模式的锁。</p>
                     <div class="section">
                        <p><code class="codeph">REQUEST</code>是一个重载函数，它接受用户定义的锁标识符或<code class="codeph">ALLOCATE_UNIQUE</code>过程返回的锁句柄。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC3AEC00-CBFF-45DD-99C3-C7A312C0213E__GUID-2C5FA61F-2A53-4D65-AA7A-80A812F8DDAE">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOCK.REQUEST（id IN INTEGER || lockhandle IN VARCHAR2，lockmode IN INTEGER DEFAULT X_MODE，timeout IN INTEGER DEFAULT MAXWAIT，release_on_commit IN BOOLEAN DEFAULT FALSE）RETURN INTEGER;</pre><p>当前的默认值（如<code class="codeph">X_MODE</code>和<code class="codeph">MAXWAIT</code>在<code class="codeph">DBMS_LOCK</code>包规范中定义。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC3AEC00-CBFF-45DD-99C3-C7A312C0213E__GUID-4314DC47-798E-4AE0-8645-5465288D7940">参数</p>
                        <div class="tblformal" id="GUID-CC3AEC00-CBFF-45DD-99C3-C7A312C0213E__GUID-F3B6C381-C15A-4697-B0C5-BFFE987638C2">
                           <p class="titleintable">表95-9 REQUEST功能参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="请求函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_LOCK.REQUEST subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d520984e2062">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d520984e2065">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e2070" headers="d520984e2062 ">
                                       <p><code class="codeph">id</code>或<code class="codeph">lockhandle</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e2070 d520984e2065 ">
                                       <p>用户分配了锁定标识符，从0到1073741823，或<code class="codeph">ALLOCATE_UNIQUE</code>返回的锁定句柄，您要更改的锁定模式</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e2084" headers="d520984e2062 ">
                                       <p><code class="codeph">lockmode</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e2084 d520984e2065 ">
                                       <p>您要求锁定的模式。</p>
                                       <p>有关可用模式及其关联的整数标识符，请参阅<a href="DBMS_LOCK.html#GUID-8F868C41-CEA3-48E2-8701-3C0F8D2B308C" title="DBMS_LOCK包中包含几个在指定参数值时使用的常量。">常量</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e2104" headers="d520984e2062 ">
                                       <p><code class="codeph">超时</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e2104 d520984e2065 ">
                                       <p>继续尝试授予锁定的秒数。</p>
                                       <p>如果在此时间段内无法授予锁定，则调用将返回值1（ <code class="codeph">timeout</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e2117" headers="d520984e2062 ">
                                       <p><code class="codeph">release_on_commit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e2117 d520984e2065 ">
                                       <p>将此参数设置为<code class="codeph">TRUE</code>可在提交或回滚时释放锁定。
                                       </p>
                                       <p>否则，锁定将一直保持到明确释放或直到会话结束。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC3AEC00-CBFF-45DD-99C3-C7A312C0213E__GUID-B2085E2F-E550-413B-80D4-28EBF67AA4A7">返回值</p>
                        <div class="tblformal" id="GUID-CC3AEC00-CBFF-45DD-99C3-C7A312C0213E__GUID-72812B84-8136-4517-B269-5B832446DC14">
                           <p class="titleintable">表95-10 REQUEST函数返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="请求函数返回值" width="100%" border="1" summary="This table describes Values Returned by REQUEST." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d520984e2142">回报价值</th>
                                    <th align="left" valign="bottom" width="69%" id="d520984e2145">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e2150" headers="d520984e2142 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e2150 d520984e2145 ">
                                       <p>成功</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e2158" headers="d520984e2142 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e2158 d520984e2145 ">
                                       <p>超时</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e2166" headers="d520984e2142 ">
                                       <p><code class="codeph">2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e2166 d520984e2145 ">
                                       <p>僵局</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e2174" headers="d520984e2142 ">
                                       <p><code class="codeph">3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e2174 d520984e2145 ">
                                       <p>参数错误</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e2182" headers="d520984e2142 ">
                                       <p><code class="codeph">4</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e2182 d520984e2145 ">
                                       <p>已经拥有由<code class="codeph">id</code>或<code class="codeph">lockhandle</code>指定的锁</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d520984e2195" headers="d520984e2142 ">
                                       <p><code class="codeph">五</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d520984e2195 d520984e2145 ">
                                       <p>非法锁定手柄</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
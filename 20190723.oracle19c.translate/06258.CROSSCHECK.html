<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>CROSSCHECK</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery Reference">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96242-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="CREATE-SCRIPT.html" title="Previous" type="text/html">
      <link rel="next" href="DELETE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference">
    <meta name="dcterms.isVersionOf" content="RCMRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CREATE-SCRIPT.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DELETE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-at-sign-to-quit.html" property="item" typeof="WebPage"><span property="name"> RMAN Commands: @ (at sign) to QUIT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">CROSSCHECK</li>
            </ol>
            <a id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D" name="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D"></a><a id="RCMRF90126"></a><a id="RCMRF90127"></a><a id="RCMRF90128"></a><a id="RCMRF90129"></a><a id="RCMRF90130"></a><a id="RCMRF90131"></a><a id="RCMRF90132"></a><a id="RCMRF119"></a>
            
            <h2 id="RCMRF-GUID-07E07E7E-9A29-4901-9739-FFC472029A7D" class="sect2"><span class="enumeration_section">2.14 </span>CROSSCHECK
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-46D123FA-5F13-4C82-BB08-53628A0D4A16">Purpose</p>
                  <p>Use the <code class="codeph">CROSSCHECK</code> command to synchronize the physical reality of backups and copies with their logical records in the RMAN repository.
                  </p>
                  <div class="infoboxnotealso" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-264DD691-3044-47DB-A6FF-944444C8B5CA">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/maintaining-rman-backups.html#BRADV8171" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how to manage database records in the recovery catalog
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-4232CBE1-7167-49E1-9145-22C32F9720A1">Prerequisites</p>
                  <p>RMAN must be connected to a target database instance, which must be started.</p>
                  <p>A maintenance channel is not required for a disk cross-check. If you use a media manager and have not configured automatic channels for it, then you must use run <code class="codeph"><a href="ALLOCATE-CHANNEL-FOR-MAINTENANCE.html#GUID-6F9887A0-1D48-4332-8E59-6FA2EFE67824">ALLOCATE CHANNEL FOR MAINTENANCE</a></code> before <code class="codeph">CROSSCHECK</code>. For example, if you created a backup on an SBT channel, but have not configured automatic SBT channels for this device, then you must manually allocate an SBT channel before <code class="codeph">CROSSCHECK</code> can check the backup. Furthermore, if you performed backups with different media manager options (pools, servers, libraries, and so on), then you must allocate maintenance channels for each combination.
                  </p>
                  <p><code class="codeph">CROSSCHECK</code> validates all specified backups and copies, even if they were created in previous database incarnations.
                  </p>
                  <p></p>
                  <p>For preplugin backups, the CDB must be open in read-write mode and you must connect as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-0FCFEC25-EAA0-4871-A8A0-524697507BB7">Usage Notes</p>
                  <p>RMAN always maintains metadata about backups in the control file of every target database on which it performs operations. If you use RMAN with a recovery catalog, then RMAN also maintains the metadata from every registered database in the recovery catalog.</p>
                  <p>If a backup is on disk, then <code class="codeph">CROSSCHECK</code> determines whether the header of the file is valid. If a backup is on tape, then RMAN queries the RMAN repository for the names and locations of the backup pieces to be checked. RMAN sends this metadata to the target database server, which queries the media management software about the backups. The media management software then checks its media catalog and reports back to the server with the status of the backups.
                  </p>
                  <p><span class="bold">EXPIRED and AVAILABLE Status</span></p>
                  <p>You can view the status of <a id="d40370e175" class="indexterm-anchor"></a><a id="d40370e179" class="indexterm-anchor"></a>backup sets and copies recorded in the RMAN repository through <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code>, <code class="codeph">V$</code> views, or recovery catalog views (if you use RMAN with a catalog). <a href="CROSSCHECK.html#GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__G1039376" title="Describes the status types reported by the CROSSCHECK command">Table 2-4</a> describes the meaning of each status.
                  </p>
                  <p>The <code class="codeph">CROSSCHECK</code> command only processes files created on the same device type as the channels used for the cross-check. The <code class="codeph">CROSSCHECK</code> command checks only objects marked <code class="codeph">AVAILABLE</code> or <code class="codeph">EXPIRED</code> in the repository by examining the files on disk for <code class="codeph">DISK</code> channels or by querying the <a id="d40370e215" class="indexterm-anchor"></a>media manager for <code class="codeph">sbt</code> channels. 
                  </p>
                  <div class="tblformalwide" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__G1039376">
                     <p class="titleintable">Table 2-4 Meaning of CROSSCHECK Status</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Meaning of CROSSCHECK Status" summary="Describes the status types reported by the CROSSCHECK command" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d40370e233">Status</th>
                              <th align="left" valign="bottom" width="67%" id="d40370e236">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d40370e241" headers="d40370e233 ">
                                 <p><code class="codeph">EXPIRED</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d40370e241 d40370e236 ">
                                 <p>Object is not found either in file system (for <code class="codeph">DISK</code>) or in the media manager (for <code class="codeph">sbt</code>). A backup set is <code class="codeph">EXPIRED</code> if any backup piece in the set is <code class="codeph">EXPIRED</code>.
                                 </p>
                                 <p>The <code class="codeph">CROSSCHECK</code> command does not delete the repository records of files that it does not find, but updates their repository records to <code class="codeph">EXPIRED</code>. You can run <code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> <code class="codeph">EXPIRED</code> to remove the repository records for expired files and any existing physical files whose status is <code class="codeph">EXPIRED</code>. 
                                 </p>
                                 <p>If backups are <code class="codeph">EXPIRED</code>, then you can reexecute the cross-check later and determine whether expired backups are available. This precaution is especially useful when you use RMAN with a media manager. For example, if some backup pieces or copies were erroneously marked as <code class="codeph">EXPIRED</code> because the <code class="codeph">PARMS</code> channel settings were incorrect, then after ensuring that the files really do exist in the media manager, run the <code class="codeph">CROSSCHECK BACKUP</code> command again to restore those files to <code class="codeph">AVAILABLE</code> status.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d40370e297" headers="d40370e233 ">
                                 <p><code class="codeph">AVAILABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d40370e297 d40370e236 ">
                                 <p>Object is available for use by RMAN. For a backup set to be <code class="codeph">AVAILABLE</code>, all backup pieces in the set must have the status <code class="codeph">AVAILABLE</code>.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><span class="bold">Cross-Checks in a Data Guard Environment</span></p>
                  <p><span class="q">"<a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJIIGD">RMAN Backups in a Data Guard Environment</a>"</span> explains the difference between the association and accessibility of a backup. In a Data Guard environment, the database that creates a backup or copy is associated with the file. You can use maintenance commands such as <code class="codeph">CHANGE</code>, <code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code>, and <code class="codeph"><a href="CROSSCHECK.html#GUID-07E07E7E-9A29-4901-9739-FFC472029A7D">CROSSCHECK</a></code> for backups when connected to any database in the Data Guard environment if the backups are accessible. In general, RMAN considers tape backups created on any database as accessible to all databases in the environment, whereas disk backups are accessible only to the database that created them. 
                  </p>
                  <p><a id="d40370e332" class="indexterm-anchor"></a>RMAN can only update the status of a backup from <code class="codeph">AVAILABLE</code> to <code class="codeph">EXPIRED</code> or <code class="codeph">DELETED</code> when connected as <code class="codeph">TARGET</code> to the database associated with the backup. If RMAN cannot delete a backup because it is not associated with the target database, then RMAN prompts you to perform the same <code class="codeph">CROSSCHECK</code> operation for the file at the database with which it is associated. In this way RMAN protects against unwanted status changes that result from incorrect SBT configurations.
                  </p>
                  <p>For example, assume that you connect RMAN as <code class="codeph">TARGET</code> to standby database <code class="codeph">standby1</code> and back it up to tape. If the backup is manually removed from the tape, and if you perform a cross-check of the backup on <code class="codeph">standby2</code>, then RMAN prompts you to run the cross-check on <code class="codeph">standby1</code>. A cross-check on <code class="codeph">standby1</code> updates the status of the tape backup to <code class="codeph">EXPIRED</code> when the media manager reports that the backup has been deleted.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-3D38E196-2E9C-474A-B661-020FEAF4AEE2">Syntax</p>
                  <p><span class="bold"><span class="italic">crosscheck</span>::=</span></p>
                  <div class="figure" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-A4D262E0-E767-43CE-8EE3-91739627781A"><img src="img/crosscheck.gif" alt="Description of crosscheck.eps follows" title="Description of crosscheck.eps follows" longdesc="img_text/crosscheck.html"><br><a href="img_text/crosscheck.html">Description of the illustration crosscheck.eps</a></div>
                  <!-- class="figure" -->
                  <p><span class="bold"><span class="italic">maintSpec</span>::=</span></p>
                  <div class="figure" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-1ADAF578-5647-4856-AE78-2C10C6AC1DCE"><img src="img/maintspec.gif" alt="Description of maintspec.eps follows" title="Description of maintspec.eps follows" longdesc="img_text/maintspec.html"><br><a href="img_text/maintspec.html">Description of the illustration maintspec.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="listObjList.html#GUID-73596ED4-99FE-45B8-B333-FECC698E1374__BABBEIIJ">listObjList::=</a></span>, <span class="italic"><a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__BABJGBFG">archivelogRecordSpecifier::=</a></span>, <span class="italic"><a href="foreignlogRecordSpecifier.html#GUID-122E19A7-5BCC-434C-BE2A-9D4F248EA02C__BABHBICI">foreignlogRecordSpecifier::=</a></span>, <span class="italic"><a href="maintQualifier.html#GUID-6AF4DA92-BBBD-4931-96D2-766D9D29EA3F__BABEEGAJ">maintQualifier::=</a></span>, <span class="italic"><a href="recordSpec.html#GUID-92F09EC0-5E30-47C0-834E-5A24FAE98F14__BABEIAEB">recordSpec::=</a></span>, <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-02CB40AD-143E-4DE9-8BBC-179328AEF2A2">Semantics</p>
                  <div class="tblformalwide" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-7B928660-5AEB-4F2B-9DE2-94B1A4CF0E65">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes the CROSSCHECK command parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d40370e430">Syntax Element</th>
                              <th align="left" valign="bottom" width="67%" id="d40370e433">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d40370e438" headers="d40370e430 ">
                                 <p><code class="codeph">PREPLUGIN</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d40370e438 d40370e433 ">
                                 <p>Cross-checks preplugin backups. The preplugin backups can be that of a non-CDB or a PDB before they were plugged in as a PDB into the current CDB.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d40370e446" headers="d40370e430 ">
                                 <p><span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d40370e446 d40370e433 ">
                                 <p>Cross-checks backups. For <span class="italic"><code class="codeph">maintSpec</code></span> options, refer to the parameter descriptions in<span class="bold"> </span><span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span>.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-611B8E40-8C05-4DC9-9A7C-43521A99D33B">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-45DD22C0-B5B0-40FE-B993-63E4AD58B1C6">
                  <p class="titleinexample">Example 2-75 Cross-Checking All Backups and Copies</p>
                  <p>This example, which assumes that the default configured channel is <code class="codeph">DEVICE TYPE sbt</code>, cross-checks all backups and disk (partial output is included). Because RMAN preconfigures a disk channel, you do not need to manually allocate a disk channel.
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CROSSCHECK BACKUP;

allocated channel: ORA_SBT_TAPE_1
channel ORA_SBT_TAPE_1: SID=84 device type=SBT_TAPE
channel ORA_SBT_TAPE_1: Oracle Secure Backup
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=86 device type=DISK
backup piece handle=/disk2/backup/08i9umon_1_1 RECID=7 STAMP=614423319
crosschecked backup piece: found to be 'EXPIRED'
backup piece handle=/disk2/backup/09i9umso_1_1 RECID=8 STAMP=614423448
crosschecked backup piece: found to be 'EXPIRED'
backup piece handle=/disk1/cfauto/c-26213402-20130213-00 RECID=9 STAMP=614423452
crosschecked backup piece: found to be 'AVAILABLE'
backup piece handle=0bi9uo81_1_1 RECID=10 STAMP=614424833
crosschecked backup piece: found to be 'AVAILABLE'
backup piece handle=c-26213402-20130213-01 RECID=11 STAMP=614424851
crosschecked backup piece: found to be 'AVAILABLE'
.
.
.</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-AF03260C-40DB-4E85-8A07-7BE38F3FB678">
                  <p class="titleinexample">Example 2-76 Cross-Checking Within a Range of Dates</p>
                  <p><a id="d40370e485" class="indexterm-anchor"></a><a id="d40370e489" class="indexterm-anchor"></a>This example queries the media manager for the status of the backup sets in a given six week range. RMAN uses the date format specified in the <code class="codeph">NLS_DATE_FORMAT</code> parameter, which is '<code class="codeph">DD-MON-YY</code>' in this example. The first command cross-checks backups on tape only:
                  </p><pre class="oac_no_warn" dir="ltr">ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE sbt;
CROSSCHECK BACKUP 
  COMPLETED BETWEEN '01-JAN-13' AND '14-FEB-13';
RELEASE CHANNEL;
</pre><p>The following command specifies <code class="codeph">DEVICE TYPE DISK</code> to cross-check only disk:
                  </p><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUP DEVICE TYPE DISK 
  COMPLETED BETWEEN '01-JAN-13' AND '14-FEB-13';
</pre><p>If the default channel is SBT, then you can cross-check both disk and SBT backups by running <code class="codeph">CROSSCHECK</code> with the default channels:
                  </p><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUP COMPLETED BETWEEN '01-JAN-13' AND '14-FEB-13';</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
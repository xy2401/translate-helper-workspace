<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This section helps you diagnose and remediate Oracle Trace File Analyzer issues."></meta>
      <meta name="description" content="This section helps you diagnose and remediate Oracle Trace File Analyzer issues."></meta>
      <title>Oracle跟踪文件分析器故障排除</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User’s Guide"></meta>
      <meta property="og:description" content="This section helps you diagnose and remediate Oracle Trace File Analyzer issues."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96320-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-db-and-gi-diagnostic-data.html" title="Previous" type="text/html"></link>
      <link rel="next" href="appendixes.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ATNMS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-db-and-gi-diagnostic-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="appendixes.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="diagnose-troubleshoot-issues-errors.html" property="item" typeof="WebPage"><span property="name">收集诊断数据和分类，诊断和解决问题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle跟踪文件分析器故障排除</li>
            </ol>
            <a id="GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" name="GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360"></a>
            
            <h2 id="ATNMS-GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" class="sect2"><span class="enumeration_chapter">21</span> Oracle Trace File Analyzer故障排除</h2>
         </header>
         <div class="ind">
            <div>
               <p>本节帮助您诊断和修复Oracle跟踪文件分析器问题。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-AEEC5C9E-00F1-44B7-B39F-76E836AFC10F">通过运行tfactl status命令查看时，群集节点不显示为一个群集</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-1CEA6749-950F-4699-8B05-E08CED8E5104">Oracle跟踪文件分析器未启动，并且init.tfa脚本在重新启动后丢失</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-575CF468-9849-401A-93E1-B61609557821">错误消息类似于“无法在@inc中找到****（@inc contains：....）”</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-4621EDF3-C29B-4F70-AAFF-569228D1D069">非发布更新修订（RUR）Oracle跟踪文件分析器修补程序在远程节点上失败</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-6CA1C30A-99F9-4117-A715-10CFDAB58FE0">安装后未启用非root访问权限</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-B418133C-B6E0-42E7-84A7-9ACE927C5397">修补或升级后移动TFA_HOME和存储库位置</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118">应用2015年7月发布更新修订版（RUR）或更高版本后，Oracle跟踪文件分析器因TFA-00103失败</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-11964D53-74C9-4754-9E80-9DB22557FF4E">重启后OSWatcher参数不同或意外不同</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-096DC900-876A-4296-98A4-C0D529B8F509">Linux 7上的Oracle跟踪文件分析器安装或Oracle跟踪文件分析器发现（tfactl重新发现）失败</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-6DC02AEF-9E5A-4A38-800F-B8A0DBF63C5F">当OSWatcher未从TFA_HOME运行时，OSWatcher Analyzer失败</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-BCB1B1BE-9CA4-4386-9575-E2889BFC6E1E">Oracle跟踪文件分析器无法以com.sleepycat.je开头。EnvironmentLockedException Java异常</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-F4D7E8C9-ABA6-4714-995D-441273E86F92">安装Solution-Soft Time Machine软件但未在系统上运行时，Oracle Trace File Analyzer启动失败</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-231641DA-CD76-4D44-BD67-926B04EC0BD7">非特权用户无法运行tfactl命令？</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-A2841FB7-78D0-4EFD-9D56-F2551878E577">Oracle跟踪文件分析器守护程序未启动或未运行？</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="diagnose-troubleshoot-issues-errors.html#GUID-DA02663E-305E-4DD2-9758-DCA883B54198" title="使用Autonomous Health Framework提供的工具来解决错误。">收集诊断数据和分类，诊断和解决问题</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-AEEC5C9E-00F1-44B7-B39F-76E836AFC10F" name="GUID-AEEC5C9E-00F1-44B7-B39F-76E836AFC10F"></a><h3 id="ATNMS-GUID-AEEC5C9E-00F1-44B7-B39F-76E836AFC10F" class="sect3"><span class="enumeration_section">21.1</span>通过运行tfactl status命令查看时，群集节点不显示为一个群集</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">原因</span> ：证书未同步。
                     </p>
                     <p><span class="bold">操作</span> ：手动同步键。
                     </p>
                     <p>转到任何一个群集节点并以<code class="codeph">root</code>身份运行<code>synctfanodes.sh</code>脚本。
                     </p><pre class="pre codeblock"><code>＃$ GIHOME / tfa / <span class="variable" translate="no">nodename</span> /tfa_home/bin/synctfanodes.sh</code></pre><div class="infoboxnote" id="GUID-AEEC5C9E-00F1-44B7-B39F-76E836AFC10F__GUID-D66FFA45-F1B7-4FA2-AFBD-48862C29B3BE">
                        <p class="notep1">注意：</p>
                        <p>该脚本使用SSH和SCP。如果没有为<code class="codeph">root</code>设置无密码SSH，则每次运行命令时，Oracle Trace File Analyzer会为每个节点提示3次密码。
                        </p>
                        <p>如果节点上有Expect实用程序，则Oracle Trace File Analyzer使用Expect，从而减少了密码提示的数量。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-1CEA6749-950F-4699-8B05-E08CED8E5104" name="GUID-1CEA6749-950F-4699-8B05-E08CED8E5104"></a><h3 id="ATNMS-GUID-1CEA6749-950F-4699-8B05-E08CED8E5104" class="sect3"><span class="enumeration_section">21.2</span> Oracle跟踪文件分析器未启动且init.tfa脚本在重新启动后丢失</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">描述</span> ：在Linux 6及更高版本上从<code class="codeph">init</code>或<code class="codeph">System D</code>运行<code>init.tfa</code>时，未安装包含Oracle跟踪文件分析器二进制文件的<code>TFA_HOME</code>文件系统。
                     </p>
                     <p><span class="bold">原因</span> ：有很多原因，不限于以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>已禁用挂载文件系统以进行维护或修补</p>
                        </li>
                        <li>
                           <p>与文件系统相关的问题或错误</p>
                        </li>
                        <li>
                           <p>NFS无法访问的网络</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">TFA_HOME</code>文件系统正在缓慢安装</p>
                        </li>
                     </ul>
                     <p><span class="bold">操作</span> ：请参阅My Oracle Support说明2224163.1以解决此问题。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;amp;amp;id=2224163.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;amp;id=2224163.1</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-575CF468-9849-401A-93E1-B61609557821" name="GUID-575CF468-9849-401A-93E1-B61609557821"></a><h3 id="ATNMS-GUID-575CF468-9849-401A-93E1-B61609557821" class="sect3"><span class="enumeration_section">21.3</span>错误消息类似于“无法在@inc中找到****（@inc contains：....）”</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">原因</span> ：使用旧版本的Perl会导致此错误。
                     </p>
                     <p><span class="bold">操作</span> ：Oracle跟踪文件分析器需要Perl版本5.10或更高版本。如果遇到类似错误，请将Perl升级到5.10或更高版本。
                     </p>
                     <p>安装后，在<code>tfa_home/tfa_setup.txt</code>文件中更新Perl的位置以指向新位置：</p><pre class="pre codeblock"><code>PERL = / U01 /的Perl /斌/ perl的</code></pre><p>如果在安装期间出现问题，请使用<code class="codeph">-perlhome <span class="variable" translate="no">dir</span></code>安装选项。
                     </p>
                     <p>您指定的目录必须包含<code>/bin/perl</code> 。如果以<code class="codeph">root</code>身份安装Perl，则<code class="codeph">root</code>必须拥有Perl可执行文件。
                     </p><pre class="pre codeblock"><code>#perl / usr / bin / perl</code></pre><pre class="pre codeblock"><code>＃./installTFA-LINUX -perlhome / usr</code></pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-4621EDF3-C29B-4F70-AAFF-569228D1D069" name="GUID-4621EDF3-C29B-4F70-AAFF-569228D1D069"></a><h3 id="ATNMS-GUID-4621EDF3-C29B-4F70-AAFF-569228D1D069" class="sect3"><span class="enumeration_section">21.4</span>非发布更新修订（RUR）远程节点上的Oracle跟踪文件分析器修补失败</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">原因</span> ：通过Oracle跟踪文件分析器套接字升级Oracle跟踪文件分析器时，由于套接字问题<span class="bold">导致</span>远程节点无法升级。
                     </p>
                     <p><span class="bold">描述</span> ：完成升级后，如果所有节点的版本，构建ID和状态相同，则交叉检查报告。
                     </p><pre class="pre codeblock"><code>.------------------------------------------------- ------------。|主持人| TFA版本| TFA构建ID |升级状态| + ------- + ------------- + ---------------------- + ---- ------------ + | node1 | 12.1.2.6.0 | 12126020151019114604 |升级| | node2 | 12.1.2.6.0 | 12126020151019114604 |升级| “------- + ------------- + ---------------------- + ---- ------------”</code></pre><p>如果您发现以下任何差异，则必须解决问题。</p><pre class="pre codeblock"><code>.------------------------------------------------- -------------。|主持人| TFA版本| TFA构建ID |升级状态| + ------- + ------------- + ----------------------- + --- ------------- + | node1 | 12.1.2.6.0 | 12126020151019114604 |升级| | node2 | 12.1.2.3.0 | 12120020140619094932 |没有升级| “------- + ------------- + ----------------------- + --- -------------”</code></pre><p><span class="bold">操作</span> ：将Oracle跟踪文件分析器安装程序复制到无法升级的所有节点，并在这些节点上本地运行安装程序。
                     </p><pre class="pre codeblock"><code>./installTFALite -local</code></pre><p>升级二进制文件后，从启动升级的节点替换根SSL证书。</p>
                     <p>将以下文件从现有配置节点复制到要添加的节点。在要添加的计算机上将<code class="codeph">root</code>的权限更改为<code class="codeph">700</code> 。
                     </p><pre class="pre codeblock"><code><code>tfa_home/server.jks</code> <code>tfa_home/client.jks</code> <code>tfa_home/internal/ssl.properties</code></code></pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-6CA1C30A-99F9-4117-A715-10CFDAB58FE0" name="GUID-6CA1C30A-99F9-4117-A715-10CFDAB58FE0"></a><h3 id="ATNMS-GUID-6CA1C30A-99F9-4117-A715-10CFDAB58FE0" class="sect3"><span class="enumeration_section">21.5</span>安装后未启用非root访问权限</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">描述</span> ：启用非root访问权限时，默认情况下必须激活Oracle Grid Infrastructure软件所有者的非root访问权限。
                     </p>
                     <p><span class="bold">操作</span> ：要启用Oracle跟踪非超级用户访问文件分析器，运行<code class="codeph">tfactl access add -user</code>命令作为<code class="codeph">root</code> 。
                     </p>
                     <p>例如：</p><pre class="pre codeblock"><code>tfactl access add -user xyx</code></pre><p>运行命令使非root用户组<span class="variable" translate="no">xyz</span>可以访问Oracle Trace File Analyzer。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-B418133C-B6E0-42E7-84A7-9ACE927C5397" name="GUID-B418133C-B6E0-42E7-84A7-9ACE927C5397"></a><h3 id="ATNMS-GUID-B418133C-B6E0-42E7-84A7-9ACE927C5397" class="sect3"><span class="enumeration_section">21.6</span> TFA_HOME和存储库位置在修补或升级后移动</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">说明</span> ：Oracle跟踪文件分析器版本12.1.2.6.0，现有独立的Oracle跟踪文件在安装时，分析仪前（外装MOS版本<code class="codeph">GRID_HOME</code> ）和Oracle跟踪文件分析器，然后用Oracle网格基础架构修补甲骨文12.1的一部分.0.2，然后<code class="codeph">TFA_HOME</code>移入<code class="codeph">GRID_HOME</code>和仓库目录移动到Oracle网格基础设施的所有者<code class="codeph">ORACLE_BASE</code>目录。
                     </p>
                     <p>如果存储库目录更改为非默认位置，则更改将丢失。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>要将Oracle跟踪文件分析器zip文件存储库位置设置为所需的基本目录，请运行<code class="codeph">tfactl set repositorydir</code>命令。
                           </p>
                        </li>
                        <li>
                           <p>要更改Oracle跟踪文件分析器存储库的最大大小，请运行<code class="codeph">tfactl set reposizeMB</code>命令。
                           </p>
                        </li>
                     </ul>
                     <p>与Oracle跟踪开始文件分析器版本12.1.2.6.0以上，如果<code class="codeph">TFA_HOME</code>存在外界<code class="codeph">GRID_HOME</code> ，那么Oracle跟踪文件分析器安装上移动版更新版本（RUR）安装的一部分。但是，如果版本更新修订版（RUR）具有较新版本的Oracle跟踪文件分析器，则Oracle Trace File Analyzer将在其当前位置进行升级。
                     </p>
                     <p>如果Oracle跟踪文件分析器安装在<code class="codeph">GRID_HOME</code>和<code class="codeph">GRID_HOME</code>移动任何补丁的一部分，那么现有的<code class="codeph">TFA_HOME</code>被迁移到新<code class="codeph">GRID_HOME</code>并根据需要升级。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118" name="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118"></a><h3 id="ATNMS-GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118" class="sect3"><span class="enumeration_section">21.7</span>应用2015年7月发行更新修订版（RUR）或更高版本后，Oracle跟踪文件分析器因TFA-00103失败</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__PHASE1OFORACLETRACEFILEANALYZERUPGR-ECD4DCE0">Oracle Trace File Analyzer升级的第1阶段</a></p>
                        </li>
                        <li>
                           <p><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__PHASE2OFORACLETRACEFILEANALYZERUPGR-ECD4E059">Oracle Trace File Analyzer升级的第2阶段</a></p>
                        </li>
                        <li>
                           <p><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__HOWCANIVERIFYTHATBOTHPHASESHAVEBEEN-ECD4E34C">如何验证两个阶段是否已完成以及是否已建立所有节点之间的Oracle跟踪文件分析器通信？</a></p>
                        </li>
                        <li>
                           <p><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__WHATIFIDONOTUPGRADEALLMYNODESATTHES-ECD4E912">如果我不选择同时升级所有节点或者某些节点因维护而停机怎么办？</a></p>
                        </li>
                        <li>
                           <p><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__WHATIFIKNOWTHATNOTALLNODESWILLBEUPG-ECD4F0EB">我知道并非所有节点都同时升级。我不想等待24小时让Oracle Trace File Analyzer同步密钥文件。我该怎么办？</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__PHASE1OFORACLETRACEFILEANALYZERUPGR-ECD4DCE0">
                     <p class="subhead2" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-C48FF4EF-8D3E-4A6E-BEC6-B8F2AE6DFD77">Oracle Trace File Analyzer升级的第1阶段</p>
                     <p>Oracle Trace File Analyzer通信模型已在大于12.1.2.4.1的版本中进行了更改。为避免通信问题，必须在Oracle跟踪文件分析器配置的所有节点上完成Oracle跟踪文件分析器通信更改。作为Release Update Revision（RUR）应用程序的一部分，Oracle Trace File Analyzer在本地升级。版本更新修订（RUR）过程应用新软件并重新启动Oracle跟踪文件分析器，但不会放置新的连接模型。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__PHASE2OFORACLETRACEFILEANALYZERUPGR-ECD4E059">
                     <p class="subhead2" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-3D27C35E-A36F-4C25-93DA-A233F5B1F9D9">Oracle Trace File Analyzer升级的第2阶段</p>
                     <p>在自动实施新通信模型之前，Oracle跟踪文件分析器需要等待24小时才能在所有节点上完成版本更新修订（RUR）的应用。在所有节点上升级Oracle跟踪文件分析器后，第2阶段必须在10分钟内完成。在所有节点上应用版本更新修订版（RUR）之前，未实施新的Oracle跟踪文件分析器通信模型（阶段2）（阶段1）。</p>
                     <p>Oracle Trace File Analyzer通过显示消息来指示：</p><pre class="oac_no_warn" dir="ltr">TFA-00103  - 尚未确保TFA能够运行所有命令。</pre><p>在配置中的所有节点（阶段1）上升级Oracle跟踪文件分析器后，Oracle跟踪文件分析器：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>生成新的SSL密钥</p>
                        </li>
                        <li>
                           <p>将密钥发送到群集中的有效节点</p>
                        </li>
                        <li>
                           <p>在每个节点上重新启动Oracle Trace File Analyzer（阶段2）</p>
                        </li>
                     </ul>
                     <p>完成阶段2后，Oracle跟踪文件分析器必须使用新的通信模型正常处理命令。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__HOWCANIVERIFYTHATBOTHPHASESHAVEBEEN-ECD4E34C">
                     <p class="subhead2" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-E371A29A-4E16-4AAC-A013-004F70203F70">如何验证两个阶段是否已完成以及是否已建立所有节点之间的Oracle跟踪文件分析器通信？</p>
                     <p>首先，以<code class="codeph">root</code>运行：</p><pre class="pre codeblock"><code>tfactl打印状态.---------------------------------------------- ----------------------------------。|主持人|状态| PID |港口|版本|构建ID |库存| + -------- + --------- + ------- + ------ + ------------ +  - -------------------- + ---------- + | sales1 |跑步| 4390 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| | sales2 |跑步| 23604 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| | sales3 |跑步| 28653 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| | sales4 |跑步| 5989 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| “-------- + --------- + ------- + ------ + ------------ +  - -------------------- + ----------”</code></pre><p>一旦所有节点显示为相同版本和构建ID，则在最多约10分钟内必须完成密钥同步。</p>
                     <p>确保运行以下命令：</p><pre class="pre codeblock"><code>tfactl打印目录</code></pre><p>运行<code class="codeph">tfactl print directories</code>必须返回在Oracle Trace File Analyzer中注册的目录列表。如果未在所有节点之间建立通信，则该命令返回消息， <samp class="msgph">尚未确保TFA运行所有命令</samp> 。
                     </p>
                     <p>该消息还表明阶段2尚未完成。要验证在第2阶段尚未完成的节点，请在每个节点上检查是否存在以下文件。这些文件必须只能由<code class="codeph">root</code> ， <code class="codeph">ownership:group</code> <code class="codeph">root</code> <code class="codeph">ownership:group</code>读取。每个文件的校验和必须在所有节点上匹配。
                     </p><pre class="pre codeblock"><code>#ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/client.jks -rwx ------ 1 root root 3199 Jun 30 14:12 /u01/app/12.1.0/ grid / tfa / sales1 / tfa_home / client.jks #ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/server.jks -rwx ------ 1 root root 3201 Jun 30 14 ：12 /u01/app/12.1.0/grid/tfa/sales1/tfa_home/server.jks#ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/internal/ssl.properties -rwx ------ 1 root root 220 Jun 30 14:12 /u01/app/12.1.0/grid/tfa/sales1/tfa_home/internal/ssl.properties</code></pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__WHATIFIDONOTUPGRADEALLMYNODESATTHES-ECD4E912">
                     <p class="subhead2" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-DE6E0961-C5A4-41E1-A5EA-F4721EFA42F5">如果我不选择同时升级所有节点或者某些节点因维护而停机怎么办？</p>
                     <p>Oracle跟踪文件分析器等待完成第2阶段操作，直到所有节点都完成升级或直到24小时为止。</p>
                     <p>24小时后，Oracle Trace File Analyzer：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>生成新密钥</p>
                        </li>
                        <li>
                           <p>将密钥复制到已升级的所有节点</p>
                        </li>
                        <li>
                           <p>在这些节点上重新启动Oracle Trace File Analyzer</p>
                        </li>
                     </ul>
                     <p>任何未获取密钥的节点都不在Oracle Trace File Analyzer配置中。升级Oracle跟踪文件分析器后，手动将密钥与其他节点同步。</p>
                     <p>如果在24小时内完成所有节点上的版本更新修订（RUR）应用程序，则手动同步密钥。</p>
                     <p>要手动同步密钥，请转到已完成阶段2的一个节点，并以<code class="codeph">root</code>身份运行<code>synctfanodes.sh</code>脚本。
                     </p><pre class="pre codeblock"><code>＃$ GIHOME / tfa / <span class="variable" translate="no">nodename</span> /tfa_home/bin/synctfanodes.sh</code></pre><div class="infoboxnote" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-019F1FA7-1E94-47CC-B288-A602FAD95D3F">
                        <p class="notep1">注意：</p>
                        <p>该脚本使用SSH和SCP。如果<code class="codeph">root</code>没有无密码SSH，则每次运行命令时，Oracle跟踪文件分析器会提示您每个节点有3次密码。
                        </p>
                        <p>如果节点上有Expect实用程序，则Oracle Trace File Analyzer使用Expect，从而减少了密码提示的数量。</p>
                     </div>
                     <p>该脚本显示Oracle Trace File Analyzer配置中的所有节点，包括Oracle Trace File Analyzer尚未升级的节点。</p>
                     <p>该脚本还显示属于Oracle Grid Infrastructure配置的节点。</p>
                     <p>验证提供的节点列表，并提供以空格分隔的节点列表以进行同步。包含先前升级的节点并不会有害，因为该过程是幂等的。</p>
                     <p>例如：</p>
                     <p>节点<span class="variable" translate="no">sales1</span> ， <span class="variable" translate="no">sales2</span> ， <span class="variable" translate="no">sales3</span>和<span class="variable" translate="no">sales4</span>都是Oracle Grid Infrastructure的一部分。节点运行Oracle Trace File Analyzer 12.1.2.0.0，直到应用2015年7月发布更新修订版（RUR）。
                     </p>
                     <p>由于中断限制，版本更新修订版（RUR）最初仅应用于<span class="variable" translate="no">sales1</span>和<span class="variable" translate="no">sales3</span> 。
                     </p>
                     <p>完成Oracle Trace File Analyzer升级的第1阶段后，运行<code class="codeph">print status</code> 。即使在某些节点上运行了不同版本的Oracle跟踪文件分析器，运行该命令也会列出所有节点。
                     </p><pre class="pre codeblock"><code>-bash-3.2＃/u01/app/12.1.0/grid/bin/tfactl打印状态.---------------------------- -------------------------------------------------- - 。|主持人|状态| PID |港口|版本|构建ID |库存| + -------- + --------- + ------ + ------ + ------------ + --- ------------------- + ---------- + | sales1 |跑步| 27270 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| | sales3 |跑步| 19222 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| | sales2 |跑步| 10141 | 5000 | 12.1.2.0.0 | 12120020140619094932 |完成| | sales4 |跑步| 17725 | 5000 | 12.1.2.0.0 | 12120020140619094932 |完成| “-------- + --------- + ------- + ------ + ------------ +  - -------------------- + ----------”</code></pre><p>由于未在所有节点之间设置新的Oracle跟踪文件分析器通信模型，因此以<code class="codeph">root</code>身份运行时的许多命令都会失败并显示以下消息：</p><pre class="oac_no_warn" dir="ltr">TFA尚未安全运行所有命令。</pre><p>尝试以非root用户身份运行<code class="codeph">tfactl</code>命令表示没有足够的权限来使用Oracle Trace File Analyzer。
                     </p>
                     <p>24小时后，Oracle Trace File Analyzer完成<span class="variable" translate="no">sales1</span>和<span class="variable" translate="no">sales3</span>第2阶段。为<span class="variable" translate="no">sales1</span>和<span class="variable" translate="no">sales3</span>建立了Oracle跟踪文件分析器通信模型。您可以对<span class="variable" translate="no">sales1</span>和<span class="variable" translate="no">sales3</span>执行常规Oracle跟踪文件分析器操作。与<span class="variable" translate="no">sales2</span>和<span class="variable" translate="no">sales4</span>通信尚未建立，因此对它们运行远程命令失败。
                     </p>
                     <p>在<span class="variable" translate="no">sales1</span>和<span class="variable" translate="no">sales3</span>上运行<code class="codeph">print status</code>时，我们不再看到<span class="variable" translate="no">sales2</span>和<span class="variable" translate="no">sales4</span> 。只有使用新的Oracle跟踪文件分析器通信模型的Oracle跟踪文件分析器进行通信。
                     </p><pre class="pre codeblock"><code>-bash-3.2＃/u01/app/12.1.0/grid/bin/tfactl打印状态.---------------------------- -------------------------------------------------- - 。|主持人|状态| PID |港口|版本|构建ID |库存| + -------- + --------- + ------- + ------ + ------------ +  - -------------------- + ---------- + | sales1 |跑步| 4390 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| | sales3 |跑步| 23604 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| “-------- + --------- + ------- + ------ + ------------ +  - -------------------- + ----------”</code></pre><p>运行命令<code class="codeph">tfactl diagcollect</code>从收集<span class="variable" translate="no">sales1</span>和<span class="variable" translate="no">sales3</span>从其他节点而不是。
                     </p><pre class="pre codeblock"><code>-bash-3.2 $ /u01/app/12.1.0/grid/bin/tfactl diagcollect收集此组件最近4小时的数据...收集所有节点的数据sales1中的存储库位置：/ u01 / app / oragrid / tfa / repository 2015/06/30 05:25:27 PDT：集合名称：tfa_Tue_Jun_30_05_25_20_PDT_2015.zip 2015/06/30 05:25:27 PDT：向主持人发送diagcollect请求：sales2 2015/06/30 05:25:27 PDT：向主持人发送diagcollect请求：sales3 2015/06/30 05:25:27 PDT：向主持人发送diagcollect请求：sales4 2015/06/30 05:25:27 PDT：扫描正在收集的文件...............2015/06/30 05:25:37 PDT：正在进行远程收集......2015/06/30 05:25:57 PDT：sales3：已完成收集2015/06/30 05:26:07 PDT：sales2：失败无法连接到Node sales2 2015/06/30 05:26:07 PDT：sales4 ：失败无法连接到节点sales4 2015/06/30 05:26:07 PDT：已完成的zip文件集合。</code></pre><p>在其余节点上进行升级时，Oracle跟踪文件分析器在配置同步之前无法查看已升级的节点。</p><pre class="pre codeblock"><code>bash-3.2＃/ u01 / app/12.1.0 / grid / bin / tfactl print status .----------------------------- -------------------------------------------------。|主持人|状态| PID |港口|版本|构建ID |库存| + -------- + --------- + ----- + ------ + ------------ + ---- ------------------ + ---------- + | sales3 |跑步| 9 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| “-------- + --------- + ----- + ------ + ------------ + ---- ------------------ + ----------”</code></pre><p>对于节点，在24小时等待期内未完成Release Release Revision（RUR）的应用程序，以成为Oracle Trace File Analyzer配置的一部分：</p>
                     <ol>
                        <li>
                           <p>从已生成密钥的节点运行同步脚本</p>
                        </li>
                        <li>
                           <p>手动将SSL配置复制到这些节点</p>
                        </li>
                     </ol>
                     <p>在<span class="variable" translate="no">sales1</span>的示例中：</p><pre class="pre codeblock"><code>/u01/app/12.1.0/grid/tfa/sales1/tfa_home/bin/synctfanodes.sh TFA中的当前节点列表：sales1 sales2 sales3 sales4群集中的节点列表：sales1 sales2 sales3 sales4节点要同步的列表TFA证书：1 sales2 2 sales3 3 sales4您想更新此节点列表吗？[Y | N] [N]：Y请输入要同步的所有节点...输入节点列表（按空格分隔）：sales2 sales4同步sales2上的TFA证书：sales2上的TFA_HOME：/u01/app/12.1.0/grid/tfa/sales2/tfa_home将TFA证书复制到sales2 ...将SSL属性复制到sales2 ...在销售2关闭TFA ...睡5秒钟......在sales2上启动TFA ...同步销售4上的TFA证书：销售4上的TFA_HOME：/u01/app/12.1.0/grid/tfa/sales4/tfa_home将TFA证书复制到sales4 ...将SSL属性复制到sales4 ...在销售4关闭TFA ...睡5秒钟......在sales4上启动TFA ...成功重新启动TFA ...------------------------------------------------- -------------------------------。|主持人|状态| PID |港口|版本|构建ID |库存| + -------- + --------- + ------- + ------ + ------------ +  - -------------------- + ---------- + | sales1 |跑步| 4390 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| | sales2 |跑步| 23604 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| | sales3 |跑步| 28653 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| | sales4 |跑步| 5989 | 5000 | 12.1.2.4.2 | 12124220150629072212 |完成| “-------- + --------- + ------- + ------ + ------------ +  - -------------------- + ----------”</code></pre><div class="infoboxnote" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-22221CFD-0A9C-457D-A22F-6475AB35A76D">
                        <p class="notep1">注意：</p>
                        <p>节点列表仅更改为需要按键synchronized， <span class="variable" translate="no">sales2</span>和<span class="variable" translate="no">sales4</span> 。
                        </p>
                        <p>在这种情况下，可以同步<span class="variable" translate="no">sales3</span>因为它会收到相同的文件并重新启动Oracle Trace File Analyzer。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__WHATIFIKNOWTHATNOTALLNODESWILLBEUPG-ECD4F0EB">
                     <p class="subhead2" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-ABE4E978-A272-499A-8EF9-E6D2EEA49E5D">我知道并非所有节点都同时升级。我不想等待24小时让Oracle Trace File Analyzer同步密钥文件。我该怎么办？</p>
                     <p>使用synchronize脚本强制Oracle跟踪文件分析器生成和同步证书。运行时，脚本会提示您是否要生成SSL配置文件，然后将它们同步到远程节点。</p>
                     <p>例如：</p><pre class="pre codeblock"><code>-bash-3.2＃/u01/app/12.1.0/grid/tfa/sales1/tfa_home/bin/synctfanodes.sh TFA中的当前节点列表：sales1 sales2 sales3 sales4 TFA尚未在此节点上生成任何证书。是否要生成新证书以跨节点进行同步？[Y | N] [Y]：生成新的TFA证书...在sales1上重新启动TFA ...关闭TFA TFA-00002：Oracle跟踪文件分析器（TFA）未成功运行TFA停止。 。 。 。 。。 。 。成功关闭TFA ..启动TFA ..等待最多100秒的TFA启动..。 。 。 。 。。 。 。 。 。成功启动TFA流程..。 。 。 。 。TFA已启动并正在侦听命令群集中的节点列表：sales1 sales2 sales3 sales4节点列表要同步TFA证书：1 sales2 2 sales3 3 sales4是否要更新此节点列表？[Y | N] [N]：</code></pre><p>生成并同步密钥文件后，在每个节点上必须找到如下文件：</p><pre class="pre codeblock"><code>#ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/client.jks -rwx ------ 1 root root 3199 Jun 30 14:12 /u01/app/12.1.0/ grid / tfa / sales1 / tfa_home / client.jks #ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/server.jks -rwx ------ 1 root root 3201 Jun 30 14 ：12 /u01/app/12.1.0/grid/tfa/sales1/tfa_home/server.jks#ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/internal/ssl.properties -rwx ------ 1 root root 220 Jun 30 14:12 /u01/app/12.1.0/grid/tfa/sales1/tfa_home/internal/ssl.properties</code></pre><p>只能由<code class="codeph">root</code> ， <code class="codeph">ownership:group</code> <code class="codeph">root</code> <code class="codeph">ownership:group</code> 。每个文件的校验和必须在所有节点上匹配。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-11964D53-74C9-4754-9E80-9DB22557FF4E" name="GUID-11964D53-74C9-4754-9E80-9DB22557FF4E"></a><h3 id="ATNMS-GUID-11964D53-74C9-4754-9E80-9DB22557FF4E" class="sect3"><span class="enumeration_section">21.8</span>重启后OSWatcher参数不同或意外不同</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>当Oracle跟踪文件分析器管理OSWatcher时，在安装或重新启动后，OSWatcher将作为非特权用户启动，例如：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle RAC系统上的<code class="codeph">grid</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">oracle</code>对非Oracle RAC系统</p>
                        </li>
                     </ul>
                     <p>Oracle建议不要以<code class="codeph">root</code>身份停止并重新启动OSWatcher。
                     </p>
                     <p>例如：</p><pre class="pre codeblock"><code>tfactl oswbb stop tfactl start oswbb 20 72（间隔20秒，保留72小时）</code></pre><p>然后OSWatcher以<code class="codeph">root</code>身份运行，直到它停止并以<code class="codeph">oracle</code>或<code class="codeph">grid</code>重新启动，或者重新启动。在任何一种情况下，参数都保存在属性文件中。除非为间隔和保留期指定了其他参数，否则将使用OSWatcher默认值（30,48）。从Oracle Trace File Analyzer版本12.1.2.5.2开始，为每个用户维护一个OSWatcher属性文件。每次启动OSWatcher时，间隔或保留时间的参数都会对该用户保持不变。在早期版本中，如果OSWatcher启动参数与预期不同，那么这是因为OSWatcher已停止并以<code class="codeph">root</code>用不同参数启动。这些设置将在重新启动后保持不变，因为只有一个属性文件。
                     </p>
                     <p>在12.1.2.5.2及更高版本中，如果有重新启动，则必须始终使用<code class="codeph">oracle</code>或<code class="codeph">grid</code>属性中的参数启动OSWatcher。如果OSWatcher停止并在重新启动之前以<code class="codeph">root</code>用不同参数重新启动，则OSWatcher启动参数会有所不同。从<code class="codeph">root</code>属性获取的参数在重新引导后不得生效。参数必须恢复为<code class="codeph">oracle</code>属性的参数。
                     </p>
                     <p>参数不同，持久性设置也会更改，因为Oracle支持人员会推荐不同的设置来调查问题。在这种情况下，停止并以正常参数重新启动OSWatcher作为非特权用户。</p><pre class="pre codeblock"><code>tfactl oswbb stop tfactl start oswbb（在这种情况下，默认间隔为30秒，保留48小时将保持不变）</code></pre><div class="infoboxnote" id="GUID-11964D53-74C9-4754-9E80-9DB22557FF4E__GUID-A8A2DF8C-1C93-45B7-9B8F-EFB83361D7BF">
                        <p class="notep1">注意：</p>如果OSWatcher已安装并正在运行，并且未由Oracle跟踪文件分析器管理，则Oracle跟踪文件分析器将遵循该安装和参数。列出<code class="codeph">oswbb</code>工具状态时，状态必须为<strong class="term">NOT RUNNING</strong> ，即不由Oracle Trace File Analyzer管理。
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-096DC900-876A-4296-98A4-C0D529B8F509" name="GUID-096DC900-876A-4296-98A4-C0D529B8F509"></a><h3 id="ATNMS-GUID-096DC900-876A-4296-98A4-C0D529B8F509" class="sect3"><span class="enumeration_section">21.9</span> Oracle跟踪文件分析器安装或Oracle跟踪文件分析器发现（tfactl重新发现）在Linux 7上失败</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">说明</span> ：报告的错误类似于：</p><pre class="pre codeblock"><code>无法在@INC中找到Data / Dumper.pm（@INC包含：/ usr / local / lib64 / perl5 / usr / local / share / perl5 / usr / lib64 / perl5 / vendor_perl / usr / share / perl5 / vendor_perl / usr / lib64 / perl5 / usr / share / perl5。/u01/app/12.1.0/grid/tfa/dc75orarac02/tfa_home/bin/u01/app/12.1.0/grid/tfa/dc75orarac02/tfa_home/bin/common /u01/app/12.1.0/grid/tfa / dc75orarac02 / tfa_home / bin / modules /u01/app/12.1.0/grid/tfa/dc75orarac02/tfa_home/bin/common/exceptions)/u01/app/12.1.0/grid/tfa/dc75orarac02/tfa_home/bin /common/tfactlshare.pm第545行。</code></pre><p><span class="bold">原因</span> ：由于错误21790910和错误22393355发生此错误，这些错误在Oracle跟踪文件分析器版本12.1.2.6.4中得到修复。
                     </p>
                     <p><span class="bold">操作</span> ：将操作系统Perl链接到<code class="codeph">GRID_HOME</code>的Perl版本。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-6DC02AEF-9E5A-4A38-800F-B8A0DBF63C5F" name="GUID-6DC02AEF-9E5A-4A38-800F-B8A0DBF63C5F"></a><h3 id="ATNMS-GUID-6DC02AEF-9E5A-4A38-800F-B8A0DBF63C5F" class="sect3"><span class="enumeration_section">21.10</span> OSWatcher未从TFA_HOME运行时失败</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">说明</span> ：报告的错误类似于：</p><pre class="pre codeblock"><code>tfactl&gt; oswbb错误：在/ u01 / app / grid / tfa / repository / suptools // oswbb // archive下找不到OSWatcher文件仅当从TFA_HOME运行时，才支持OSWatcher分析器命令</code></pre><p><span class="bold">原因</span> ：OSWatcher未从<code class="codeph">TFA_HOME</code>运行时出现预期的行为。</p>
                     <div class="p"><span class="bold">行动</span> ：<ol>
                           <li>
                              <p>停止并禁用在Oracle Trace File Analyzer外部运行的OSWatcher版本。</p>
                           </li>
                           <li>
                              <p>从Oracle Trace File Analyzer中启动OSWatcher。</p>
                           </li>
                        </ol>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-BCB1B1BE-9CA4-4386-9575-E2889BFC6E1E" name="GUID-BCB1B1BE-9CA4-4386-9575-E2889BFC6E1E"></a><h3 id="ATNMS-GUID-BCB1B1BE-9CA4-4386-9575-E2889BFC6E1E" class="sect3"><span class="enumeration_section">21.11</span> Oracle跟踪文件分析器无法从com.sleepycat.je开始。EnvironmentLockedException Java异常</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">说明</span> ：位于<code>$TFA_BASE//log</code>中的Oracle跟踪文件分析器<code>syserrorout</code>日志中发现的报告错误包括：</p><pre class="pre codeblock"><code>/ u01 / app / oracle / tfa // log $ cat syserrorout.08.06.2015-16.19.54线程“TFAMain”com.sleepycat.je中的异常。EnvironmentLockedException：（JE 5.0.84）/ u01 / app / oracle / tfa // database / BERKELEY_JE_DB无法锁定单个编写器访问的环境。ENV_LOCKED：无法锁定je.lck文件。环境无效，必须关闭。在com.sleepycat.je.log。文件管理器。（FileManager.java:368）在com.sleepycat.je.dbi。EnvironmentImpl。（EnvironmentImpl.java:483）at com.sleepycat.je.dbi。EnvironmentImpl。（EnvironmentImpl.java:409</code></pre><p><span class="bold">原因</span> ：根本原因未知。
                     </p>
                     <p><span class="bold">行动</span> ：</p>
                     <ol>
                        <li>
                           <p>检查是否有任何进程访问BDB。</p><pre class="pre codeblock"><code>＃fuser $ GI_BASE / tfa // database / BERKELEY_JE_DB / je.lck</code></pre></li>
                        <li>
                           <p>如果返回一个进程，则将其终止。</p><pre class="pre codeblock"><code>#kill -9</code></pre></li>
                        <li>
                           <p>删除<code>$GI_BASE/tfa//database/BERKELEY_JE_DB/je.lck</code>文件。
                           </p><pre class="pre codeblock"><code>#rm -rf $ GI_BASE / tfa // database / BERKELEY_JE_DB / je.lck</code></pre></li>
                        <li>
                           <p>启动Oracle Trace File Analyzer。</p><pre class="pre codeblock"><code>＃$ TFA_HOME / bin / tfactl start</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-F4D7E8C9-ABA6-4714-995D-441273E86F92" name="GUID-F4D7E8C9-ABA6-4714-995D-441273E86F92"></a><h3 id="ATNMS-GUID-F4D7E8C9-ABA6-4714-995D-441273E86F92" class="sect3"><span class="enumeration_section">21.12</span>安装Solution-Soft Time Machine软件但未在系统上运行时，Oracle Trace File Analyzer启动失败</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">操作</span> ：卸载Time Machine软件。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-231641DA-CD76-4D44-BD67-926B04EC0BD7" name="GUID-231641DA-CD76-4D44-BD67-926B04EC0BD7"></a><h3 id="ATNMS-GUID-231641DA-CD76-4D44-BD67-926B04EC0BD7" class="sect3"><span class="enumeration_section">21.13</span>非特权用户无法运行tfactl命令？
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">说明</span> ：</p>
                     <p>以<code class="codeph">root</code>身份验证非特权用户是否具有Oracle Trace File Analyzer特权以运行<code class="codeph">tfactl</code>命令。
                     </p><pre class="pre codeblock"><code>tfactl访问lsuser /u01/app/12.1.0/grid/bin/tfactl访问lsusers .------------------------------ ---。| myNode1中的TFA用户| + ----------- + ----------- + --------- + |用户名|用户类型|状态| + ----------- + ----------- + --------- + | oracle |用户|允许| '----------- ----------- + --------- +'</code></pre><p>如果列出了用户并且状态显示为“ <strong class="term">已禁用”</strong> ，则表示已禁用所有非特权用户访问权限。
                     </p>
                     <p><span class="bold">行动</span> ：</p>
                     <p>要启用非特权用户访问权限：</p><pre class="pre codeblock"><code>tfactl访问启用</code></pre><p>如果未列出用户，例如<code class="codeph">oracle</code> ，则添加<code class="codeph">oracle</code> 。
                     </p><pre class="pre codeblock"><code>tfactl访问add -user oracle</code></pre><p>如果上述技术都不能解决问题，请运行<code class="codeph">tfactl diagnosetfa -local</code> 。将生成的文件上载到Oracle Support。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-A2841FB7-78D0-4EFD-9D56-F2551878E577" name="GUID-A2841FB7-78D0-4EFD-9D56-F2551878E577"></a><h3 id="ATNMS-GUID-A2841FB7-78D0-4EFD-9D56-F2551878E577" class="sect3"><span class="enumeration_section">21.14</span> Oracle跟踪文件分析器守护程序未启动或未运行？
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <div class="p"><span class="bold">说明</span> ：<pre class="oac_no_warn" dir="ltr">TFA-00001：无法启动Oracle跟踪文件分析器（TFA）守护程序</pre><pre class="oac_no_warn" dir="ltr">TFA-00002：Oracle跟踪文件分析器（TFA）未运行</pre></div>
                     <p>错误表明Java无法启动。</p>
                     <p><span class="bold">行动</span> ：</p>
                     <ol>
                        <li>
                           <p>验证Oracle跟踪文件分析器是否未运行。</p><pre class="pre codeblock"><code>ps -ef | grep -i tfa</code></pre><div class="infoboxnote" id="GUID-A2841FB7-78D0-4EFD-9D56-F2551878E577__GUID-032C09D1-DB35-4D51-AA31-21B90D858D14">
                              <p class="notep1">注意：</p>在某些操作系统上， <code class="codeph">ps</code>命令会将输出截断为80个字符。<code class="codeph">ps</code>命令即使正在运行也不会显示该进程。
                           </div>
                        </li>
                        <li>
                           <p>要确认Oracle跟踪文件分析器后台驻留程序未运行，请运行以下命令以<code class="codeph">root</code>身份运行。
                           </p><pre class="pre codeblock"><code>#tfactl打印状态</code></pre></li>
                        <li>
                           <p>尝试以<code class="codeph">root</code>身份启动Oracle跟踪文件分析器守护程序。
                           </p><pre class="pre codeblock"><code>#tfactl start</code></pre><p>如果Oracle Trace File Analyzer仍无法启动，则运行<code class="codeph">tfactl diagnosetfa -local</code> 。将生成的文件上载到Oracle Support。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="本节帮助您诊断和修复Oracle跟踪文件分析器问题。">Oracle跟踪文件分析器故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
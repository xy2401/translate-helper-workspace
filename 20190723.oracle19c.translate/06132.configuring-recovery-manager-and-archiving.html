<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>配置Recovery Manager和存档</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00"></meta>
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95728-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="ensuring-application-continuity.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-backup-and-recovery.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ensuring-application-continuity.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-backup-and-recovery.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters管理和部署指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">配置Recovery Manager和存档</li>
            </ol>
            <a id="GUID-1051C520-07B2-431B-9B9B-E500B22547C1" name="GUID-1051C520-07B2-431B-9B9B-E500B22547C1"></a><a id="RACAD320"></a>
            
            <h2 id="RACAD-GUID-1051C520-07B2-431B-9B9B-E500B22547C1" class="sect2"><span class="enumeration_chapter">7</span>配置Recovery Manager和存档</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何配置Recovery Manager（RMAN）以在Oracle Real Application Clusters（Oracle RAC）环境中使用。本章还提供了在Oracle RAC环境中使用归档的过程，并讨论了联机重做日志和归档重做日志注意事项。</p>
               <p>本章的主题包括：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="configuring-recovery-manager-and-archiving.html#GUID-6EC4C120-A6ED-42FB-9901-53C5D6714838">配置RMAN for Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-recovery-manager-and-archiving.html#GUID-E4CCA8D1-9DFF-40AB-BE35-27F6FEF5F94E" title="要归档重做日志文件，Oracle RAC数据库必须处于ARCHIVELOG模式。">Oracle RAC中的归档模式</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-recovery-manager-and-archiving.html#GUID-4DC60D21-E187-4D73-A352-792CA9D3EA60" title="快照控制文件是RMAN在特定于操作系统的位置创建的数据库控制文件的副本。">配置RMAN快照控制文件位置</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-recovery-manager-and-archiving.html#GUID-7A1758E4-DEF2-422F-BBEA-34826DFF03FE" title="如果将CONFIGURE CONTROLFILE AUTOBACKUP设置为ON，则在运行BACKUP或COPY命令后，RMAN会自动创建控制文件和SPFILE备份。">配置RMAN以自动备份控制文件和SPFILE</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-recovery-manager-and-archiving.html#GUID-EA876A06-BEEF-4C46-B3E1-7E6626E68F73" title="在多个节点上进行交叉检查时（以及一般操作RMAN时），配置群集，以便每个节点都可以访问所有备份，无论哪个节点创建了备份。">在多个Oracle RAC节点上进行交叉检查</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-recovery-manager-and-archiving.html#GUID-BF72204B-A61A-474A-A393-03568CB3FE77">在Oracle RAC中为RMAN配置通道</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-recovery-manager-and-archiving.html#GUID-9D89F3FA-F9AB-4991-A012-3C15DF84ECDE">在Oracle RAC中使用RMAN管理存档的重做日志</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-recovery-manager-and-archiving.html#GUID-667B320A-2A2F-41FA-9BD4-D71EB495E3FE" title="对于任何归档重做日志配置，使用LOG_ARCHIVE_FORMAT参数唯一标识归档重做日志。">Oracle RAC中的归档重做日志文件约定</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-recovery-manager-and-archiving.html#GUID-A8D9DCBC-3309-437C-B546-71C92A5DE7BD" title="Oracle RAC的首选配置是将Oracle自动存储管理（Oracle ASM）用于恢复区，该恢复区使用的恢复集磁盘组与用于数据文件的磁盘组不同。如果使用非群集文件系统本地归档进行介质恢复，则必须配置正在执行恢复的节点以便远程访问其他节点，以便它可以读取其他节点上的归档目录中的归档重做日志文件。">RMAN归档配置方案</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-recovery-manager-and-archiving.html#GUID-5F959E4C-A74A-47DF-A3E9-2E4A4E1C0C03">监控Archiver进程</a></p>
                  </li>
               </ul>
            </div><a id="RACAD850"></a><div class="sect2"><a id="GUID-6EC4C120-A6ED-42FB-9901-53C5D6714838" name="GUID-6EC4C120-A6ED-42FB-9901-53C5D6714838"></a><h3 id="RACAD-GUID-6EC4C120-A6ED-42FB-9901-53C5D6714838" class="sect3">配置RMAN for Oracle RAC概述</h3>
               <div>
                  <p>RMAN使您可以备份，还原和恢复数据文件，控制文件，服务器参数文件（SPFILE）和归档重做日志文件。RMAN包含在Oracle数据库中，不需要单独安装。您可以从命令行运行RMAN，也可以在Oracle Enterprise Manager的备份管理器中使用RMAN。</p>
               </div>
            </div><a id="RACAD327"></a><div class="sect2"><a id="GUID-E4CCA8D1-9DFF-40AB-BE35-27F6FEF5F94E" name="GUID-E4CCA8D1-9DFF-40AB-BE35-27F6FEF5F94E"></a><h3 id="RACAD-GUID-E4CCA8D1-9DFF-40AB-BE35-27F6FEF5F94E" class="sect3">Oracle RAC中的归档模式</h3>
               <div>
                  <p>要归档重做日志文件，Oracle RAC数据库必须处于<code class="codeph">ARCHIVELOG</code>模式。
                  </p>
                  <p>您可以运行<code class="codeph">ALTER DATABASE</code> SQL语句来更改Oracle RAC中的归档模式，因为数据库由本地实例装入，但在任何情况下都不会打开。您无需修改参数设置即可运行此语句。
                  </p>
                  <div class="infoboxnote" id="GUID-E4CCA8D1-9DFF-40AB-BE35-27F6FEF5F94E__GUID-D853B334-515D-41CD-A4E7-8354B41950C9">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">ARCHIVELOG</code>模式设置在数据库级别，而不是实例级别。所有实例都归档或没有归档。
                           </p>
                        </li>
                        <li>
                           <p>您还可以使用Oracle企业管理器Oracle RAC数据库主页的“ <span class="bold">维护”</span>选项卡中的“恢复设置”页面更改存档日志模式。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../admin/managing-archived-redo-log-files.html#ADMIN-GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD851"></a><div class="sect2"><a id="GUID-4DC60D21-E187-4D73-A352-792CA9D3EA60" name="GUID-4DC60D21-E187-4D73-A352-792CA9D3EA60"></a><h3 id="RACAD-GUID-4DC60D21-E187-4D73-A352-792CA9D3EA60" class="sect3">配置RMAN快照控制文件位置</h3>
               <div>
                  <p>快照控制文件是RMAN在特定于操作系统的位置创建的数据库控制文件的副本。</p>
                  <p>RMAN创建快照控制文件，以便在重新同步恢复目录或备份控制文件时，它具有一致的控制文件版本。</p>
                  <p>您可以为快照控制文件的位置指定<a href="glossary.html#GUID-0152C87A-A61B-433F-ACAB-B3680D27B2F4"><span class="xrefglossterm">群集文件系统</span></a>或原始设备目标。此文件在<a href="glossary.html#GUID-1B7C963C-0E0C-425E-AD47-D75C912230CB"><span class="xrefglossterm">群集中的</span></a>所有节点之间共享，并且<span class="italic">必须</span>可由<a href="glossary.html#GUID-1B7C963C-0E0C-425E-AD47-D75C912230CB"><span class="xrefglossterm">群集中</span></a>的所有节点访问。运行以下RMAN命令以确定快照控制文件的已配置位置：</p><pre class="pre codeblock"><code>显示SNAPSHOT CONTROLFILE NAME;</code></pre><p>您可以更改快照控制文件的已配置位置。例如，在Linux和UNIX系统上，您可以通过在RMAN提示符处输入以下内容将快照控制文件位置指定为<code class="codeph">$ORACLE_HOME/dbs/scf/snap_prod.cf</code> ：</p><pre class="pre codeblock"><code>配置SNAPSHOT CONTROLFILE NAME为'$ ORACLE_HOME / dbs / scf / snap_prod.cf';</code></pre><p>此命令为每个<a href="glossary.html#GUID-5D32446E-2961-496F-BDE1-FE5E9C119DA0"><span class="xrefglossterm">群集数据库</span></a>实例设置快照控制文件位置的配置。因此，请确保执行备份的所有节点共享<code class="codeph">$ORACLE_HOME/dbs/scf</code>目录。
                  </p>
                  <p><code class="codeph">CONFIGURE</code>命令在RMAN会话中创建持久设置。因此，除非要更改快照控制文件的位置，否则无需再次运行此命令。
                  </p>
                  <p>要删除快照控制文件，必须先更改快照控制文件位置，然后删除旧位置的文件，如下所示：</p><pre class="pre codeblock"><code>配置SNAPSHOT CONTROLFILE NAME为' <span class="variable" translate="no">new_name</span> ';删除控制文件的副本;</code></pre></div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../rcmrf/rman-commands-at-sign-to-quit.html#RCMRF-GUID-8757D5C8-9360-4696-B5EF-5E6D0F8E5440" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD853"></a><div class="sect2"><a id="GUID-7A1758E4-DEF2-422F-BBEA-34826DFF03FE" name="GUID-7A1758E4-DEF2-422F-BBEA-34826DFF03FE"></a><h3 id="RACAD-GUID-7A1758E4-DEF2-422F-BBEA-34826DFF03FE" class="sect3">配置RMAN以自动备份控制文件和SPFILE</h3>
               <div>
                  <p>如果将<code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP</code>设置为<code class="codeph">ON</code> ，则在运行<code class="codeph">BACKUP</code>或<code class="codeph">COPY</code>命令后，RMAN会自动创建控制文件和SPFILE备份。
                  </p>
                  <p>如果启动实例以执行恢复，RMAN还可以自动还原SPFILE，因为SPFILE的默认位置必须可用于Oracle RAC数据库中的所有节点。</p>
                  <div class="infoboxnote" id="GUID-7A1758E4-DEF2-422F-BBEA-34826DFF03FE__GUID-066EBC1F-2506-419C-86B1-0DD093D38D9B">
                     <p class="notep1">注意：</p>
                     <p>如果使用SQL * Plus <code class="codeph">ALTER DATABASE</code>命令备份控制文件，则还必须在所有节点共享的设备上创建控制文件备份。
                     </p>
                  </div>
                  <p>这些功能在灾难恢复中很重要，因为即使没有恢复目录，RMAN也可以恢复控制文件。即使丢失了恢复目录和当前控制文件，RMAN也可以恢复控制文件的自动备份。您可以使用<code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP FORMAT</code>命令更改RMAN为此文件提供的默认名称。请注意，如果在此命令中指定绝对路径名，则此路径必须在参与备份的所有节点上以相同方式存在。
                  </p>
                  <p>RMAN在第一个分配的通道上执行控制文件自动备份。因此，当您使用不同的参数分配多个通道时，尤其是使用<code class="codeph">CONNECT</code>命令分配通道时，请确定将执行控制文件自动备份的通道。始终首先为此节点分配通道。
                  </p>
                  <p>除了使用RMAN控制文件外，您还可以使用Oracle Enterprise Manager来使用RMAN功能。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../bradv/configuring-rman-client-basic.html#BRADV-GUID-C64AE090-0749-43EA-92C4-69DC6201A15F" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD7320"></a><div class="sect2"><a id="GUID-EA876A06-BEEF-4C46-B3E1-7E6626E68F73" name="GUID-EA876A06-BEEF-4C46-B3E1-7E6626E68F73"></a><h3 id="RACAD-GUID-EA876A06-BEEF-4C46-B3E1-7E6626E68F73" class="sect3">在多个Oracle RAC节点上进行交叉检查</h3>
               <div>
                  <p>在多个节点上进行交叉检查时（以及一般操作RMAN时），配置群集，以便每个节点都可以访问所有备份，无论哪个节点创建了备份。</p>
                  <p>以这种方式配置群集时，您可以在还原或交叉检查操作期间将通道分配给群集中的任何节点。</p>
                  <p>如果无法配置群集以便每个节点都可以访问所有备份，则在还原和交叉检查操作期间，必须通过向<code class="codeph">CONFIGURE CHANNEL</code>命令提供<code class="codeph">CONNECT</code>选项在多个节点上分配通道，以便至少可以访问每个备份一个节点。如果在交叉检查期间无法访问某些备份，因为在可以访问这些备份的节点上未配置任何通道，则在交叉检查后，这些备份将在RMAN存储库中标记为<code class="codeph">EXPIRED</code> 。
                  </p>
                  <p>例如，您可以使用<code class="codeph">CONFIGURE CHANNEL ...在Oracle RAC配置中进行CONNECT</code>在该配置中，在群集中的各个节点上创建磁带备份，并且每个备份只能在创建它的节点上访问。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-recovery-manager-and-archiving.html#GUID-1739218F-0330-4171-8513-B9916EE22816">配置通道以使用特定节点</a></li>
                        <li><a href="../bradv/maintaining-rman-backups.html#BRADV-GUID-EFF8F8D1-D67C-4202-9C8E-DE74ADFF1FFB" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD7321"></a><div class="sect2"><a id="GUID-BF72204B-A61A-474A-A393-03568CB3FE77" name="GUID-BF72204B-A61A-474A-A393-03568CB3FE77"></a><h3 id="RACAD-GUID-BF72204B-A61A-474A-A393-03568CB3FE77" class="sect3">在Oracle RAC中为RMAN配置通道</h3>
               <div>
                  <p>本节介绍如何操作<a id="d32411e1279" class="indexterm-anchor"></a><a id="d32411e1283" class="indexterm-anchor"></a><a id="d32411e1287" class="indexterm-anchor"></a>配置RMAN的通道。您可以将通道配置为使用自动负载平衡，也可以为特定实例指定特定通道，如以下主题中所述：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="configuring-recovery-manager-and-archiving.html#GUID-F0D41FE7-499E-40C2-AFBA-DBDFD110BED6">配置通道以使用自动负载平衡</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-recovery-manager-and-archiving.html#GUID-1739218F-0330-4171-8513-B9916EE22816">配置通道以使用特定节点</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD7322"></a><div class="sect3"><a id="GUID-F0D41FE7-499E-40C2-AFBA-DBDFD110BED6" name="GUID-F0D41FE7-499E-40C2-AFBA-DBDFD110BED6"></a><h4 id="RACAD-GUID-F0D41FE7-499E-40C2-AFBA-DBDFD110BED6" class="sect4">配置通道以使用自动负载平衡</h4>
                  <div>
                     <p>要配置通道以使用自动负载平衡，请使用以下语法：</p><pre class="oac_no_warn" dir="ltr">配置设备类型[磁盘| sbt] PARALLELISM <span class="italic">number_of_channels</span> ; ...</pre><p>其中<span class="italic"><code class="codeph">number_of_channels</code></span>是您要用于操作的通道数。完成此一次性配置后，您可以发出<code class="codeph">BACKUP</code>或<code class="codeph">RESTORE</code>命令。
                     </p>
                  </div>
               </div><a id="RACAD7323"></a><div class="sect3"><a id="GUID-1739218F-0330-4171-8513-B9916EE22816" name="GUID-1739218F-0330-4171-8513-B9916EE22816"></a><h4 id="RACAD-GUID-1739218F-0330-4171-8513-B9916EE22816" class="sect4">配置通道以使用特定节点</h4>
                  <div>
                     <p>至<a id="d32411e1602" class="indexterm-anchor"></a><a id="d32411e1606" class="indexterm-anchor"></a>为每个策略管理的Oracle RAC数据库实例配置一个RMAN通道，使用以下语法：</p><pre class="oac_no_warn" dir="ltr">配置通道设备类型sbt CONNECT'@ racinst_1'配置通道设备类型sbt CONNECT'@ racinst_2'...</pre><p>在此一次性配置步骤之后，您可以发出<code class="codeph">BACKUP</code>或<code class="codeph">RESTORE</code>命令。
                     </p>
                  </div>
               </div>
            </div><a id="RACAD7691"></a><a id="RACAD321"></a><div class="sect2"><a id="GUID-9D89F3FA-F9AB-4991-A012-3C15DF84ECDE" name="GUID-9D89F3FA-F9AB-4991-A012-3C15DF84ECDE"></a><h3 id="RACAD-GUID-9D89F3FA-F9AB-4991-A012-3C15DF84ECDE" class="sect3">在Oracle RAC中使用RMAN管理存档的重做日志</h3>
               <div>
                  <p>当节点生成归档重做日志时，Oracle数据库始终将日志的文件名记录在目标数据库的控制文件中。如果您使用的是恢复目录，则RMAN还会在重新同步时在恢复目录中记录归档的重做日志文件名。</p>
                  <p>您使用的归档重做日志命名方案很重要，因为当节点写入其文件系统上具有特定文件名的日志时，该文件必须可由必须访问此归档重做日志的任何节点读取。例如，如果<code class="codeph">node1</code>将日志归档到<code class="codeph">/oracle/arc_dest/log_1_100_23452345.arc</code> ，则<code class="codeph">node2</code>只有在其自己的文件系统上读取<code class="codeph">/oracle/arc_dest/log_1_100_23452345.arc</code>时才能备份此归档重做日志。
                  </p>
                  <p>您选择的备份和恢复策略取决于您为每个节点配置归档目标的方式。无论是一个节点还是所有节点都执行归档重做日志备份，都必须确保备份所有归档重做日志。如果在恢复期间使用RMAN并行性，则执行恢复的节点必须具有对群集中所有归档重做日志的读取权限。</p>
                  <p>多个节点可以并行恢复存档日志。但是，在恢复期间，只有一个节点应用存档日志。因此，执行恢复的节点必须能够访问恢复操作所需的所有存档日志。默认情况下，数据库确定在恢复操作期间使用的最佳并行线程数。您可以使用<code class="codeph">RECOVER</code>命令中的<code class="codeph">PARALLEL</code>子句来更改并行线程的数量。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-9D89F3FA-F9AB-4991-A012-3C15DF84ECDE__GUID-185023FE-251C-41C0-9D7F-54841685C23E">归档重做日志的准则和注意事项</p>
                  </div>
                  <!-- class="section" -->
                  <p>主要考虑因素是确保在恢复期间可以从每个节点读取所有归档重做日志，如果可能，还可以在备份期间读取。在恢复期间，如果从执行恢复的节点可以看到存档的日志目标，则Oracle数据库可以成功恢复存档的日志数据。</p>
               </div>
            </div><a id="RACAD7693"></a><a id="RACAD326"></a><div class="sect2"><a id="GUID-667B320A-2A2F-41FA-9BD4-D71EB495E3FE" name="GUID-667B320A-2A2F-41FA-9BD4-D71EB495E3FE"></a><h3 id="RACAD-GUID-667B320A-2A2F-41FA-9BD4-D71EB495E3FE" class="sect3">Oracle RAC中的归档重做日志文件约定</h3>
               <div>
                  <p>对于任何归档重做日志配置，使用<code class="codeph">LOG_ARCHIVE_FORMAT</code>参数唯一标识归档重做日志。
                  </p>
                  <p>此参数的格式是特定于操作系统的，它可以包括文本字符串，一个或多个变量以及文件扩展名。</p>
                  <div class="tblformal" id="GUID-667B320A-2A2F-41FA-9BD4-D71EB495E3FE__GUID-11DCFF6F-5CC1-44E8-9350-A5780F95E02B">
                     <p class="titleintable">表7-1存档的重做日志文件名格式参数</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="存档的重做日志文件名格式参数" width="100%" border="1" summary="Archived Redo Log Filename Format Parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="14%" id="d32411e1986">参数</th>
                              <th align="left" valign="bottom" width="43%" id="d32411e1988">描述</th>
                              <th align="left" valign="bottom" width="43%" id="d32411e1990">例</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d32411e1994" headers="d32411e1986 "><code class="codeph">％R</code></td>
                              <td align="left" valign="top" width="43%" headers="d32411e1994 d32411e1988 ">
                                 <p>Resetlogs标识符，未填充</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d32411e1994 d32411e1990 "><code class="codeph">log_1_62_23452345</code></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d32411e2004" headers="d32411e1986 "><code class="codeph">％R</code></td>
                              <td align="left" valign="top" width="43%" headers="d32411e2004 d32411e1988 ">
                                 <p>重置日志标识符，左零填充</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d32411e2004 d32411e1990 "><code class="codeph">log_1_62_0023452345</code></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d32411e2014" headers="d32411e1986 "><code class="codeph">％S</code></td>
                              <td align="left" valign="top" width="43%" headers="d32411e2014 d32411e1988 ">
                                 <p>记录序列号，未填充</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d32411e2014 d32411e1990 "><code class="codeph">log_251</code></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d32411e2024" headers="d32411e1986 "><code class="codeph">％S</code></td>
                              <td align="left" valign="top" width="43%" headers="d32411e2024 d32411e1988 ">
                                 <p>记录序列号，左零填充</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d32411e2024 d32411e1990 "><code class="codeph">log_0000000251</code></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d32411e2034" headers="d32411e1986 "><code class="codeph">％T</code></td>
                              <td align="left" valign="top" width="43%" headers="d32411e2034 d32411e1988 ">
                                 <p>线号，未填充</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d32411e2034 d32411e1990 "><code class="codeph">log_1</code></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d32411e2044" headers="d32411e1986 "><code class="codeph">％T</code></td>
                              <td align="left" valign="top" width="43%" headers="d32411e2044 d32411e1988 ">
                                 <p>线程号，左零填充</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d32411e2044 d32411e1990 "><code class="codeph">log_0001</code></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>对于Oracle RAC，存档重做日志的所有文件名格式参数（大写或小写）都是必需的。这些参数使Oracle数据库能够为整个版本的存档日志创建唯一的名称。当<code class="codeph">COMPATIBLE</code>参数设置为<code class="codeph">10.0</code>或更高时，此要求有效。
                  </p>
                  <p>使用<code class="codeph">%R</code>或<code class="codeph">%r</code>参数包含<code class="codeph">resetlogs</code>标识符，以避免覆盖先前版本的日志。如果未指定日志格式，则默认值为特定于操作系统，包括<code class="codeph">%t</code> ， <code class="codeph">%s</code>和<code class="codeph">%r</code> 。
                  </p>
                  <p>例如，如果与重做线程编号1关联的实例将<code class="codeph">LOG_ARCHIVE_FORMAT</code>设置为<code class="codeph">log_%t_%s_%r.arc</code> ，则其归档的重做日志文件将命名为：</p><pre class="pre codeblock"><code>log_1_1000_23435343.arc log_1_1001_23452345.arc log_1_1002_23452345.arc ...</code></pre></div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../admin/managing-archived-redo-log-files.html#ADMIN-GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD322"></a><div class="sect2"><a id="GUID-A8D9DCBC-3309-437C-B546-71C92A5DE7BD" name="GUID-A8D9DCBC-3309-437C-B546-71C92A5DE7BD"></a><h3 id="RACAD-GUID-A8D9DCBC-3309-437C-B546-71C92A5DE7BD" class="sect3">RMAN归档配置方案</h3>
               <div>
                  <p>本节介绍Oracle RAC数据库的归档方案。本章中的两个配置方案描述了Oracle RAC数据库的三节点UNIX群集。对于这两种情况，为执行恢复的实例指定的<code class="codeph">LOG_ARCHIVE_FORMAT</code>必须与为归档重做日志文件的实例指定的格式相同。
                  </p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="configuring-recovery-manager-and-archiving.html#GUID-2A6A3B47-DD1A-40AF-9550-C37229A556D8" title="Oracle RAC的首选配置是将Oracle自动存储管理（Oracle ASM）用于恢复区，该恢复区使用的恢复集磁盘组与用于数据文件的磁盘组不同。">Oracle自动存储管理和集群文件系统归档方案</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-recovery-manager-and-archiving.html#GUID-C28C9955-BDC7-4381-BD0D-B24BAD5B54DE" title="如果使用非群集文件系统本地归档进行介质恢复，则必须配置正在执行恢复的节点以便远程访问其他节点，以便它可以读取其他节点上的归档目录中的归档重做日志文件。">非群集文件系统本地存档方案</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD7694"></a><a id="RACAD325"></a><div class="sect3"><a id="GUID-2A6A3B47-DD1A-40AF-9550-C37229A556D8" name="GUID-2A6A3B47-DD1A-40AF-9550-C37229A556D8"></a><h4 id="RACAD-GUID-2A6A3B47-DD1A-40AF-9550-C37229A556D8" class="sect4">Oracle自动存储管理和集群文件系统归档方案</h4>
                  <div>
                     <p>Oracle RAC的首选配置是将Oracle自动存储管理（Oracle ASM）用于恢复区，该恢复区使用的恢复集磁盘组与用于数据文件的磁盘组不同。</p>
                     <p>使用Oracle ASM时，它使用Oracle Managed Files命名格式。或者，您可以使用群集文件系统归档方案。如果使用群集文件系统，则在归档重做日志文件时，每个节点都会写入群集文件系统上的单个位置。每个节点都可以读取其他节点的归档重做日志文件。例如， <a href="configuring-recovery-manager-and-archiving.html#GUID-2A6A3B47-DD1A-40AF-9550-C37229A556D8__I490890">如图7-1</a>所示，如果节点1将重做日志文件归档到群集文件系统上的<code class="codeph">/arc_dest/log_1_100_23452345.arc</code> ，则群集中的任何其他节点也可以读取此文件。
                     </p>
                     <div class="figure" id="GUID-2A6A3B47-DD1A-40AF-9550-C37229A556D8__I490890">
                        <p class="titleinfigure">图7-1集群文件系统归档方案</p><img src="img/racad006.gif" alt="下面是图7-1的描述" title="下面是图7-1的描述" longdesc="img_text/racad006.html"><br><a href="img_text/racad006.html">“图7-1集群文件系统归档方案”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnote" id="GUID-2A6A3B47-DD1A-40AF-9550-C37229A556D8__GUID-F377426D-C551-4036-A52E-071F156B2FC4">
                        <p class="notep1">注意：</p>
                        <p>此示例中的归档日志命名格式仅适用于群集文件系统示例。</p>
                     </div>
                     <p>如果不使用群集文件系统，则归档的重做日志文件不能位于原始设备上。这是因为原始设备无法顺序写入连续的归档日志文件。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../bradv/part-overview-backup-recovery.html#BRADV-GUID-CD5F857C-198E-4097-A5C8-F0D7E9C00D30" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div><a id="RACAD7324"></a><div class="sect4"><a id="GUID-FF13A2CF-A0F5-4AB0-B5FC-A1B460045492" name="GUID-FF13A2CF-A0F5-4AB0-B5FC-A1B460045492"></a><h5 id="RACAD-GUID-FF13A2CF-A0F5-4AB0-B5FC-A1B460045492" class="sect5">集群文件系统归档方案的优点</h5>
                     <div>
                        <p>此方案的优点是没有节点使用网络来存档日志。由于节点写入的文件名可以由群集中的任何节点读取，因此RMAN可以备份群集中任何节点的所有日志。简化了备份和还原脚本，因为每个节点都可以访问所有归档重做日志。</p>
                     </div>
                  </div><a id="RACAD7325"></a><div class="sect4"><a id="GUID-9751BB08-ABAD-4997-8DC4-7EF08E7A9D3F" name="GUID-9751BB08-ABAD-4997-8DC4-7EF08E7A9D3F"></a><h5 id="RACAD-GUID-9751BB08-ABAD-4997-8DC4-7EF08E7A9D3F" class="sect5">集群文件系统归档方案的初始化参数设置</h5>
                     <div>
                        <p>在里面<a id="d32411e2722" class="indexterm-anchor"></a>在群集文件系统方案中，每个节点都归档到在群集数据库中的所有实例上使用相同名称标识的目录（在以下示例中为<code class="codeph">/arc_dest</code> ）。要配置此目录，请设置<code class="codeph">LOG_ARCH_DEST_1</code>参数的值，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">*。LOG_ARCHIVE_DEST_1 = “LOCATION = / arc_dest”</pre><p>以下列表显示了基于前一个示例在RMAN目录或控制文件中显示的归档重做日志条目示例。请注意，任何节点都可以使用任何线程归档日志：</p><pre class="oac_no_warn" dir="ltr">/arc_dest/log_1_999_23452345.arc /arc_dest/log_1_1000_23435343.arc /arc_dest/log_1_1001_23452345.arc &lt; - 在node3中存档的线程1 /arc_dest/log_3_1563_23452345.arc &lt; - 在node2中存档的线程3 /arc_dest/log_2_753_23452345.arc &lt; - 存档的线程2 node1 /arc_dest/log_2_754_23452345.arc /arc_dest/log_3_1564_23452345.arc</pre></div>
                  </div><a id="RACAD7326"></a><div class="sect4"><a id="GUID-63E07F9B-3962-4DD0-812A-201241D142ED" name="GUID-63E07F9B-3962-4DD0-812A-201241D142ED"></a><h5 id="RACAD-GUID-63E07F9B-3962-4DD0-812A-201241D142ED" class="sect5">集群文件系统归档方案的归档日志的位置</h5>
                     <div>
                        <p>由于文件系统是共享的，并且由于每个节点都将其归档重做日志写入群集文件系统中的<code class="codeph">/arc_dest</code>目录，因此每个节点都可以读取自己和任何其他节点写入的日志。
                        </p>
                     </div>
                  </div>
               </div><a id="RACAD324"></a><div class="sect3"><a id="GUID-C28C9955-BDC7-4381-BD0D-B24BAD5B54DE" name="GUID-C28C9955-BDC7-4381-BD0D-B24BAD5B54DE"></a><h4 id="RACAD-GUID-C28C9955-BDC7-4381-BD0D-B24BAD5B54DE" class="sect4">非群集文件系统本地存档方案</h4>
                  <div>
                     <p>在本地存档到<a id="d32411e3024" class="indexterm-anchor"></a><a id="d32411e3028" class="indexterm-anchor"></a>非群集文件系统，每个节点归档到唯一命名的本地目录。如果需要恢复，则可以配置恢复节点，以便它可以远程访问其他节点上的目录。例如，在Linux和UNIX计算机上使用NFS，或在Windows系统上使用映射驱动器。因此，每个节点只写入本地目标，但每个节点也可以读取其他节点上远程目录中的归档重做日志文件。
                     </p>
                  </div><a id="RACAD7327"></a><div class="sect4"><a id="GUID-EC902B2A-0B36-4519-BA06-EBFD86D0A970" name="GUID-EC902B2A-0B36-4519-BA06-EBFD86D0A970"></a><h5 id="RACAD-GUID-EC902B2A-0B36-4519-BA06-EBFD86D0A970" class="sect5">使用非群集文件系统本地存档的注意事项</h5>
                     <div>
                        <p>如果使用非群集文件系统本地归档进行介质恢复，则必须配置正在执行恢复的节点以便远程访问其他节点，以便它可以读取其他节点上的归档目录中的归档重做日志文件。</p>
                        <p>此外，如果执行恢复并且没有所有可用的存档日志，则必须执行不完全恢复，直到第一个缺少的存档重做日志序列号。您不必为此方案使用特定配置。但是，要将备份处理分发到多个节点，最简单的方法是按照<span class="q">“管理备份和恢复”</span>中的备份方案中所述配置通道。
                        </p>
                        <div class="infoboxnote" id="GUID-EC902B2A-0B36-4519-BA06-EBFD86D0A970__GUID-17090703-18E8-4375-8AAF-7517DBD134FC">
                           <p class="notep1">注意：</p>
                           <p>由于在非群集情况下使用不同的文件系统，因此归档日志目录在每个节点上必须是唯一的。例如， <code class="codeph">/arc_dest_1</code>仅在<code class="codeph">node1</code>可用， <code class="codeph">/arc_dest_2</code>仅直接安装在<code class="codeph">node2</code> ，依此类推。
                           </p>
                           <p>然后<code class="codeph">node1</code>安装<code class="codeph">/arc_dest_2</code>从<code class="codeph">node2</code>和<code class="codeph">/arc_dest_3</code>从<code class="codeph">node3</code>通过NFS。</p>
                        </div>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-backup-and-recovery.html#GUID-A02120B2-BE62-4172-B402-BF034566E471" title="Oracle数据库提供RMAN用于备份和还原数据库。Oracle数据库自动选择最佳并行度，例如崩溃和介质恢复。要在Oracle RAC中使用快速恢复区，必须将其放在Oracle ASM磁盘组，群集文件系统或通过每个Oracle RAC实例的网络文件系统文件配置的共享目录中。">管理备份和恢复</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RACAD7328"></a><div class="sect4"><a id="GUID-31A93067-0F8C-49E9-97D5-BF35954B3042" name="GUID-31A93067-0F8C-49E9-97D5-BF35954B3042"></a><h5 id="RACAD-GUID-31A93067-0F8C-49E9-97D5-BF35954B3042" class="sect5">非群集文件系统本地存档的初始化参数设置</h5>
                     <div>
                        <p>您可以在策略管理或管理员管理的数据库的初始化参数文件中按如下方式设置存档目标值。</p>
                        <p>使用<span class="italic"><code class="codeph">SID</code></span> <code class="codeph">.LOG_ARCH_DEST</code>为每个实例设置<span class="italic"><code class="codeph">SID</code></span> <code class="codeph">.LOG_ARCH_DEST</code>参数，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">SID1。LOG_ARCHIVE_DEST_1 =“LOCATION = / arc_dest_1”sid2。LOG_ARCHIVE_DEST_1 =“LOCATION = / arc_dest_2”sid3。LOG_ARCHIVE_DEST_1 = “LOCATION = / arc_dest_3”</pre><p>对于策略管理的数据库，请手动创建节点和实例绑定，以确保<code class="codeph">sid1</code>始终在同一节点上运行，如下所示：</p><pre class="oac_no_warn" dir="ltr">$ srvctl modify database -d mydb -n node1 -i sid1 $ srvctl modify database -d mydb -n node2 -i sid2 $ srvctl modify database -d mydb -n node3 -i sid3</pre><p>以下列表显示了数据库控制文件中可能存档的重做日志条目。请注意，任何节点都可以从任何线程读取存档的重做日志，这必须发生，以便数据库在发生故障后恢复。</p><pre class="oac_no_warn" dir="ltr">/arc_dest_1/log_1_1000_23435343.arc /arc_dest_2/log_1_1001_23452345.arc &lt; - 在node2中存档的线程1 /arc_dest_2/log_3_1563_23452345.arc &lt; - 在node2 /arc_dest_1/log_2_753_23452345.arc中存档的线程3 &lt; - 在node1 / arc_dest_2 / log_2_754_23452345中存档的线程2。 arc /arc_dest_3/log_3_1564_23452345.arc</pre></div>
                  </div><a id="RACAD7695"></a><a id="RACAD7329"></a><div class="sect4"><a id="GUID-843FEEC3-699E-4A16-94D0-A64FFC2B257C" name="GUID-843FEEC3-699E-4A16-94D0-A64FFC2B257C"></a><h5 id="RACAD-GUID-843FEEC3-699E-4A16-94D0-A64FFC2B257C" class="sect5">非群集文件系统本地归档的归档日志位置</h5>
                     <div>
                        <p>如<a href="configuring-recovery-manager-and-archiving.html#GUID-843FEEC3-699E-4A16-94D0-A64FFC2B257C__CIHFAGAI" title="非群集文件系统本地存档日志的位置">表7-2所示</a> ，三个节点中的每个节点都有一个包含本地存档重做日志的目录。此外，如果通过NFS或映射驱动器远程安装其他节点上的目录，则每个节点都有两个远程目录，RMAN可以通过这两个目录读取由其余节点归档的归档重做日志文件。
                        </p>
                        <div class="infoboxnote" id="GUID-843FEEC3-699E-4A16-94D0-A64FFC2B257C__GUID-46C59726-1DA9-4D26-AC23-11326292BF2F">
                           <p class="notep1">注意：</p>
                           <p>存档日志目标（类似于<a href="configuring-recovery-manager-and-archiving.html#GUID-843FEEC3-699E-4A16-94D0-A64FFC2B257C__CIHFAGAI" title="非群集文件系统本地存档日志的位置">表7-2中</a>所示）必须在每个节点上不同，以便在将NFS目录挂载到其他节点上时，它不会与现有存档日志目录冲突</p>
                        </div>
                        <div class="tblformal" id="GUID-843FEEC3-699E-4A16-94D0-A64FFC2B257C__CIHFAGAI">
                           <p class="titleintable">表7-2 UNIX / NFS位置日志示例，非集群文件系统本地存档</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNIX / NFS位置日志示例，非群集文件系统本地存档" width="100%" border="1" summary="Location of Logs for Non-Cluster File System Local Archiving" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="17%" id="d32411e3554">节点</th>
                                    <th align="left" valign="bottom" width="33%" id="d32411e3557">读取目录中的归档重做日志文件</th>
                                    <th align="left" valign="bottom" width="50%" id="d32411e3560">对于由节点归档的日志</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d32411e3565" headers="d32411e3554 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32411e3565 d32411e3557 ">
                                       <p><code class="codeph">/ arc_dest_1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d32411e3565 d32411e3560 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d32411e3576" headers="d32411e3554 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32411e3576 d32411e3557 ">
                                       <p><code class="codeph">/ arc_dest_2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d32411e3576 d32411e3560 ">
                                       <p>2（通过NFS）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d32411e3587" headers="d32411e3554 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32411e3587 d32411e3557 ">
                                       <p><code class="codeph">/ arc_dest_3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d32411e3587 d32411e3560 ">
                                       <p>3（通过NFS）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d32411e3598" headers="d32411e3554 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32411e3598 d32411e3557 ">
                                       <p><code class="codeph">/ arc_dest_1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d32411e3598 d32411e3560 ">
                                       <p>1（通过NFS）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d32411e3609" headers="d32411e3554 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32411e3609 d32411e3557 ">
                                       <p><code class="codeph">/ arc_dest_2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d32411e3609 d32411e3560 ">
                                       <p>2</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d32411e3620" headers="d32411e3554 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32411e3620 d32411e3557 ">
                                       <p><code class="codeph">/ arc_dest_3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d32411e3620 d32411e3560 ">
                                       <p>3（通过NFS）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d32411e3631" headers="d32411e3554 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32411e3631 d32411e3557 ">
                                       <p><code class="codeph">/ arc_dest_1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d32411e3631 d32411e3560 ">
                                       <p>1（通过NFS）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d32411e3642" headers="d32411e3554 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32411e3642 d32411e3557 ">
                                       <p><code class="codeph">/ arc_dest_2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d32411e3642 d32411e3560 ">
                                       <p>2（通过NFS）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d32411e3653" headers="d32411e3554 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d32411e3653 d32411e3557 ">
                                       <p><code class="codeph">/ arc_dest_3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d32411e3653 d32411e3560 ">
                                       <p>3</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="RACAD7696"></a><a id="RACAD7330"></a><div class="sect4"><a id="GUID-8D88D45C-D1A9-438B-8DE5-81E4CD2F5517" name="GUID-8D88D45C-D1A9-438B-8DE5-81E4CD2F5517"></a><h5 id="RACAD-GUID-8D88D45C-D1A9-438B-8DE5-81E4CD2F5517" class="sect5">非群集文件系统本地存档的文件系统配置</h5>
                     <div>
                        <p>如果您正在执行恢复，并且正常运行的实例必须读取磁盘上但尚未备份的所有日志，则应配置NFS，如<a href="configuring-recovery-manager-and-archiving.html#GUID-8D88D45C-D1A9-438B-8DE5-81E4CD2F5517__g493918" title="共享读取本地存档的NFS配置">表7-3中</a>所示。
                        </p>
                        <div class="tblformal" id="GUID-8D88D45C-D1A9-438B-8DE5-81E4CD2F5517__g493918">
                           <p class="titleintable">表7-3共享读取本地存档示例的UNIX / NFS配置</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="共享读取本地存档示例的UNIX / NFS配置" width="100%" border="1" summary="NFS Configuration for Shared Read Local Archiving" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="10%" id="d32411e3823">节点</th>
                                    <th align="left" valign="bottom" width="21%" id="d32411e3826">目录...</th>
                                    <th align="left" valign="bottom" width="26%" id="d32411e3829">已配置...</th>
                                    <th align="left" valign="bottom" width="25%" id="d32411e3832">并安装在......</th>
                                    <th align="left" valign="bottom" width="18%" id="d32411e3835">在节点上......</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d32411e3840" headers="d32411e3823 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d32411e3840 d32411e3826 ">
                                       <p><code class="codeph">/ arc_dest_1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d32411e3840 d32411e3829 ">
                                       <p>本地读/写</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d32411e3840 d32411e3832 ">
                                       <p>N / A</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d32411e3840 d32411e3835 ">
                                       <p>N / A</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d32411e3857" headers="d32411e3823 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d32411e3857 d32411e3826 ">
                                       <p><code class="codeph">/ arc_dest_2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d32411e3857 d32411e3829 ">
                                       <p>NFS读取</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d32411e3857 d32411e3832 ">
                                       <p><code class="codeph">/ arc_dest_2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d32411e3857 d32411e3835 ">
                                       <p>2</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d32411e3875" headers="d32411e3823 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d32411e3875 d32411e3826 ">
                                       <p><code class="codeph">/ arc_dest_3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d32411e3875 d32411e3829 ">
                                       <p>NFS读取</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d32411e3875 d32411e3832 ">
                                       <p><code class="codeph">/ arc_dest_3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d32411e3875 d32411e3835 ">
                                       <p>3</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d32411e3893" headers="d32411e3823 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d32411e3893 d32411e3826 ">
                                       <p><code class="codeph">/ arc_dest_1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d32411e3893 d32411e3829 ">
                                       <p>NFS读取</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d32411e3893 d32411e3832 ">
                                       <p><code class="codeph">/ arc_dest_1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d32411e3893 d32411e3835 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d32411e3911" headers="d32411e3823 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d32411e3911 d32411e3826 ">
                                       <p><code class="codeph">/ arc_dest_2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d32411e3911 d32411e3829 ">
                                       <p>本地读/写</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d32411e3911 d32411e3832 ">
                                       <p>N / A</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d32411e3911 d32411e3835 ">
                                       <p>N / A</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d32411e3928" headers="d32411e3823 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d32411e3928 d32411e3826 ">
                                       <p><code class="codeph">/ arc_dest_3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d32411e3928 d32411e3829 ">
                                       <p>NFS读取</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d32411e3928 d32411e3832 ">
                                       <p><code class="codeph">/ arc_dest_3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d32411e3928 d32411e3835 ">
                                       <p>3</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d32411e3946" headers="d32411e3823 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d32411e3946 d32411e3826 ">
                                       <p><code class="codeph">/ arc_dest_1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d32411e3946 d32411e3829 ">
                                       <p>NFS读取</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d32411e3946 d32411e3832 ">
                                       <p><code class="codeph">/ arc_dest_1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d32411e3946 d32411e3835 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d32411e3964" headers="d32411e3823 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d32411e3964 d32411e3826 ">
                                       <p><code class="codeph">/ arc_dest_2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d32411e3964 d32411e3829 ">
                                       <p>NFS读取</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d32411e3964 d32411e3832 ">
                                       <p><code class="codeph">/ arc_dest_2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d32411e3964 d32411e3835 ">
                                       <p>2</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d32411e3982" headers="d32411e3823 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d32411e3982 d32411e3826 ">
                                       <p><code class="codeph">/ arc_dest_3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d32411e3982 d32411e3829 ">
                                       <p>本地读/写</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d32411e3982 d32411e3832 ">
                                       <p>N / A</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d32411e3982 d32411e3835 ">
                                       <p>N / A</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-8D88D45C-D1A9-438B-8DE5-81E4CD2F5517__GUID-3CF9FA0B-5CFB-4917-9EB6-091CFFA7726F">
                           <p class="notep1">注意：</p>
                           <p>Windows用户可以使用映射驱动器实现本节示例中描述的相同结果。</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD855"></a><div class="sect2"><a id="GUID-5F959E4C-A74A-47DF-A3E9-2E4A4E1C0C03" name="GUID-5F959E4C-A74A-47DF-A3E9-2E4A4E1C0C03"></a><h3 id="RACAD-GUID-5F959E4C-A74A-47DF-A3E9-2E4A4E1C0C03" class="sect3">监控Archiver进程</h3>
               <div>
                  <p>在Oracle RAC环境中运行RMAN配置后，使用<code class="codeph">GV$ARCHIVE_PROCESSES</code>和<code class="codeph">V$ARCHIVE_PROCESSES</code>视图来确定归档程序进程的状态。根据您查询全局视图还是本地视图，这些视图显示所有数据库实例的信息，或仅显示您连接的实例的信息。
                  </p>
                  <div class="infoboxnote" id="GUID-5F959E4C-A74A-47DF-A3E9-2E4A4E1C0C03__GUID-01B94B92-ADA3-41EB-9910-B7F61FDF9A73">
                     <p class="notep1">注意：</p>
                     <p>如果使用<code class="codeph">kill</code>命令停止存档过程，则数据库实例将失败。
                     </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../admin/managing-archived-redo-log-files.html#ADMIN-GUID-36F3335E-A28B-47BA-82C2-E17B4C8A453A" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                        <li><a href="../refrn/dynamic-performance-v-views-1.html#REFRN-GUID-A634ED26-2334-40F5-A016-22973F54BEDA" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
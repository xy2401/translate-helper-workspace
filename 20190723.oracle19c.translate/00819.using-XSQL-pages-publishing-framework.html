<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="An explanation is given of how to use the basic features of the XSQL pages publishing framework."></meta>
      <meta name="description" content="An explanation is given of how to use the basic features of the XSQL pages publishing framework."></meta>
      <title>使用XSQL Pages Publishing Framework</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="An explanation is given of how to use the basic features of the XSQL pages publishing framework."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-developers-kit-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:58:48-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96292-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="data-loading-format-specification.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-XSQL-pages-publishing-framework-advanced.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML Developers Kit Programmers Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDK"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="data-loading-format-specification.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-XSQL-pages-publishing-framework-advanced.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XDK-for-Java.html" property="item" typeof="WebPage"><span property="name">Oracle XML Developer's Kit for Java</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用XSQL Pages Publishing Framework</li>
            </ol>
            <a id="GUID-A1834D2F-B962-4881-AE7A-F323FF11384D" name="GUID-A1834D2F-B962-4881-AE7A-F323FF11384D"></a><a id="ADXDK1021"></a><a id="ADXDK080"></a>
            
            <h2 id="ADXDK-GUID-A1834D2F-B962-4881-AE7A-F323FF11384D" class="sect2"><span class="enumeration_chapter">24</span>使用XSQL Pages Publishing Framework</h2>
         </header>
         <div class="ind">
            <div>
               <p>下面介绍如何使用XSQL页面发布框架的基本功能。</p>
               <div class="section"> </div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="using-XSQL-pages-publishing-framework-advanced.html#GUID-02EA5758-7A8F-4FD7-B9F1-F346E759CD79" title="解释了如何使用XSQL页面发布框架的高级功能。">使用XSQL Pages发布框架：高级主题</a></li>
                  </ul>
               </div>
            </div>
            <a id="ADXDK19570"></a><a id="ADXDK19569"></a><div class="props_rev_3"><a id="GUID-660C4C15-2442-4E60-A21F-F45CFE60873B" name="GUID-660C4C15-2442-4E60-A21F-F45CFE60873B"></a><h3 id="ADXDK-GUID-660C4C15-2442-4E60-A21F-F45CFE60873B" class="sect3">XSQL页面发布框架简介</h3>
               <div>
                  <p>Oracle XSQL页面发布框架是一个可扩展的平台，用于以多种格式发布可扩展标记语言（XML）。</p>
                  <p>基于Java的<a href="glossary.html#GUID-9F169AB5-F7A8-4BF9-9690-415182824566" title="基于Java的servlet，可以从一个或多个SQL查询动态生成XML文档，并可选择使用XSLT样式表转换服务器中的文档。"><span class="xrefglossterm">XSQL servlet</span></a>是框架的中心，它提供了一个声明性接口，用于根据关系数据动态发布动态Web内容。
                  </p>
                  <p>XSQL框架结合了结构化查询语言（SQL），XML和可扩展样式表语言转换（XSLT）的强大功能。您可以使用它来创建名为<a href="glossary.html#GUID-32CAFB67-064D-4CE1-A775-F9F09E310A63" title="包含XSQL servlet指令的XML页面。"><span class="xrefglossterm">XSQL页面的</span></a>声明性模板来执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>基于参数化SQL查询汇编动态XML数据报</p>
                     </li>
                     <li>
                        <p>使用XSLT转换数据报以生成XML，HTML或基于文本的格式的结果</p>
                     </li>
                  </ul>
                  <p>由于其默认扩展名为<code class="codeph">.xsql</code>而被调用的XSQL页面是一个包含XSQL servlet指令的XML文件。<a href="using-XSQL-pages-publishing-framework.html#GUID-660C4C15-2442-4E60-A21F-F45CFE60873B__CACCIIDJ">例24-1</a>显示了一个简单的XSQL页面。它使用<a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;</a>操作元素来查询<code class="codeph">hr.employees</code>表。
                  </p>
                  <p>您可以使用<a href="using-XSQL-pages-publishing-framework.html#GUID-660C4C15-2442-4E60-A21F-F45CFE60873B__CACCIIDJ">示例24-1中</a>的查询返回的数据显示浏览器客户端。为发布而组装和转换信息不需要编程。您可以以声明方式执行大多数任务。但是，如果内置功能不符合您的需要，您可以使用Java集成自定义数据源或执行自定义服务器端处理。
                  </p>
                  <p>在XSQL页面框架中，要发布的信息的<span class="italic">集合</span>与表示是分开的。此体系结构功能使您可以执行此操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>以多种方式呈现相同的数据，包括适当地将呈现定制为发出请求的客户端设备的类型 - 浏览器，蜂窝电话，个人数字助理（PDA）等。</p>
                     </li>
                     <li>
                        <p>通过将现有页面聚合为新页面来重用数据</p>
                     </li>
                     <li>
                        <p>独立于内容修改和增强演示</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-660C4C15-2442-4E60-A21F-F45CFE60873B__CACCIIDJ">
                     <p class="titleinexample">例24-1 XSQL示例页面</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”&gt; &lt;？xml-stylesheet type =“text / xsl”href =“emplist.xsl”？&gt; &lt;xsql：query connection =“hr”xmlns：xsql =“urn：oracle-xsql”&gt; SELECT * FROM employees &lt;/ xsql：query&gt;</pre></div>
                  <!-- class="example" -->
               </div><a id="ADXDK19571"></a><div class="props_rev_3"><a id="GUID-A8F52809-BCD1-47DD-81AF-E66D81F14D6A" name="GUID-A8F52809-BCD1-47DD-81AF-E66D81F14D6A"></a><h4 id="ADXDK-GUID-A8F52809-BCD1-47DD-81AF-E66D81F14D6A" class="sect4">使用XSQL页面发布框架的先决条件</h4>
                  <div>
                     <p>描述了使用XSQL页面发布框架的先决条件。</p>
                     <p>本章假定您熟悉这些技术：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle数据库SQL。 XSQL框架访问数据库中的数据。</p>
                        </li>
                        <li>
                           <p>程序语言/结构化查询语言（PL / SQL）。Oracle XML Developer's Kit（XDK）为XML SQL实用程序（XSU）提供了一个PL / SQL应用程序编程接口（API），它反映了Java API。</p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-6ABA93DA-F986-43F2-97D2-23AA0EA6455C"><span class="xrefglossterm">Java数据库连接（JDBC）</span></a> 。XSQL页面框架依赖于用于数据库连接的JDBC驱动程序。
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-8AD9F98D-06CF-4FC6-8729-9FE297BD501F"><span class="xrefglossterm">可扩展样式表语言转换（XSLT）</span></a> 。您可以使用XSLT将数据转换为适合传递给用户的格式。
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-A564495D-ED7B-4F52-8FCA-944CF3BB274D"><span class="xrefglossterm">XML SQL实用程序（XSU）</span></a> 。XSQL页面框架使用XSU来查询数据库。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADXDK1022"></a><a id="ADXDK19572"></a><div class="props_rev_3"><a id="GUID-855B6B47-A955-4434-BAF4-F744F882069C" name="GUID-855B6B47-A955-4434-BAF4-F744F882069C"></a><h3 id="ADXDK-GUID-855B6B47-A955-4434-BAF4-F744F882069C" class="sect3">使用XSQL Pages Publishing Framework：概述</h3>
               <div>
                  <p>这里的主题包括基本使用，设置，运行演示程序以及使用命令行实用程序。</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19574"></a><a id="ADXDK19575"></a><a id="ADXDK19573"></a><div class="props_rev_3"><a id="GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C" name="GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C"></a><h4 id="ADXDK-GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C" class="sect4">使用XSQL页面框架：基本过程</h4>
                  <div>
                     <p>XSQL页面处理器引擎解释，缓存和处理XSQL页面的内容。描述了XSQL页面框架的基本用法。</p>
                     <p><a href="using-XSQL-pages-publishing-framework.html#GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABDJGAF">图24-1</a>显示了XSQL页面发布框架的基本体系结构。XSQL页面处理器提供从此入口点的访问：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>从命令行或使用XSQL命令行实用程序的批处理模式。<code class="codeph">oracle.xml.xsql.XSQLCommandLine</code>类是命令行界面。
                           </p>
                        </li>
                        <li>
                           <p>通过使用Web服务器中安装的XSQL servlet在Web上。<code class="codeph">oracle.xml.xsql.XSQLServlet</code>类是servlet接口。
                           </p>
                        </li>
                        <li>
                           <p>作为JSP应用程序的一部分，使用<code class="codeph">&lt;jsp:include&gt;</code>包含模板或使用<code class="codeph">&lt;jsp:forward&gt;</code>转发模板。
                           </p>
                        </li>
                        <li>
                           <p>通过使用<code class="codeph">oracle.xml.xsql.编程方式<code class="codeph">oracle.xml.xsql.XSQLRequest</code> Java类。
                           </p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABDJGAF">
                        <p class="titleinfigure">图24-1 XSQL页面框架体系结构</p><img src="img/xsql5.gif" width="603" alt="下面是图24-1的描述" title="下面是图24-1的描述" longdesc="img_text/xsql5.html"><br><a href="img_text/xsql5.html">“图24-1 XSQL页面框架体系结构”的说明</a></div>
                     <!-- class="figure" -->
                     <p>您可以从<a href="using-XSQL-pages-publishing-framework.html#GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABDJGAF">图24-1中</a>所示的任何访问点运行相同的XSQL页面。无论您使用哪种方式使用XSQL页面处理器，它都会执行以下操作来生成结果：</p>
                     <ol>
                        <li>
                           <p>收到处理XSQL页面的请求。请求可以来自命令行实用程序，也可以来自<code class="codeph">XSQLRequest</code>对象。
                           </p>
                        </li>
                        <li>
                           <p>使用一个或多个SQL查询的结果来组装XML数据报。该查询在XSQL页面的<a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;</a>元素中指定。
                           </p>
                        </li>
                        <li>
                           <p>将此XML数据报返回给请求者。</p>
                        </li>
                        <li>
                           <p>（可选）将数据报转换为任何XML，HTML或基于文本的格式。</p>
                        </li>
                     </ol>
                     <p><a href="using-XSQL-pages-publishing-framework.html#GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABECBGF">图24-2</a>显示了一个典型的基于Web的场景，其中Web服务器接收到<code class="codeph">Page.xsql</code>的HTTP请求，该请求包含对XSLT样式表<code class="codeph">Style.xsl</code>的引用。XSQL页面包含数据库查询。
                     </p>
                     <div class="figure" id="GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABECBGF">
                        <p class="titleinfigure">图24-2对XSQL页面的Web访问</p><img src="img/adxdk122.gif" width="422" alt="下面是图24-2的描述" title="下面是图24-2的描述" longdesc="img_text/adxdk122.html"><br><a href="img_text/adxdk122.html">“图24-2 Web访问XSQL页面”的说明</a></div>
                     <!-- class="figure" -->
                     <p><a href="using-XSQL-pages-publishing-framework.html#GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABECBGF">图24-2中</a>显示的XSQL页面处理器执行以下步骤：</p>
                     <ol>
                        <li>
                           <p>接收来自XSQL Servlet的请求以处理<code class="codeph">Page.xsql</code> 。
                           </p>
                        </li>
                        <li>
                           <p>使用Oracle XML Parser解析<code class="codeph">Page.xsql</code>并对其进行缓存。
                           </p>
                        </li>
                        <li>
                           <p>基于文档元素上的连接属性的值连接到数据库。</p>
                        </li>
                        <li>
                           <p>通过将每个XSQL操作元素（例如， <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;</a> ）替换为其内置操作处理程序返回的XML结果来生成XML数据报。
                           </p>
                        </li>
                        <li>
                           <p>解析<code class="codeph">Style.xsl</code>样式表并缓存它。
                           </p>
                        </li>
                        <li>
                           <p>通过将数据报和<code class="codeph">Style.xsl</code>样式表传递给Oracle XSLT处理器来转换数据报。
                           </p>
                        </li>
                        <li>
                           <p>将生成的XML或HTML文档返回给请求者。</p>
                        </li>
                     </ol>
                     <p>在此过程的转换步骤中，您可以使用符合W3C XSLT 1.0或2.0标准的样式表将组合的数据报转换为文档格式，例如：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>用于浏览器显示的HTML</p>
                        </li>
                        <li>
                           <p>无线设备的无线标记语言（WML）</p>
                        </li>
                        <li>
                           <p>可缩放矢量图形（SVG），用于数据驱动的图表，图形和图表</p>
                        </li>
                        <li>
                           <p>XML样式表格式化对象（XSL-FO），用于呈现为Adobe PDF</p>
                        </li>
                        <li>
                           <p>文本文档，如电子邮件，SQL脚本，Java程序等</p>
                        </li>
                        <li>
                           <p>任意基于XML的文档格式</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADXDK19576"></a><div class="props_rev_3"><a id="GUID-EE6FC3BB-27D5-458D-810E-6D2ECE34AC48" name="GUID-EE6FC3BB-27D5-458D-810E-6D2ECE34AC48"></a><h4 id="ADXDK-GUID-EE6FC3BB-27D5-458D-810E-6D2ECE34AC48" class="sect4">设置XSQL页面框架</h4>
                  <div>
                     <p>您可以在各种场景中开发和使用XSQL页面。</p>
                     <div class="section"> </div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19577"></a><div class="props_rev_3"><a id="GUID-1B3E10B8-6C78-422A-961A-3FBBB81B67BA" name="GUID-1B3E10B8-6C78-422A-961A-3FBBB81B67BA"></a><h5 id="ADXDK-GUID-1B3E10B8-6C78-422A-961A-3FBBB81B67BA" class="sect5">使用Oracle JDeveloper创建和测试XSQL页面</h5>
                     <div>
                        <p>此处介绍了以下Oracle JDeveloper任务：创建XSQL页面，将XSQL操作元素添加到XSQL页面，检查XSQL页面的语法，测试XSQL页面以及将XSQL运行时库添加到项目库列表中以便环境变量<code class="codeph">CLASSPATH</code>已正确设置。
                        </p>
                        <div class="section">
                           <p>IDE支持以下功能：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>颜色编码的语法突出显示</p>
                              </li>
                              <li>
                                 <p>XML语法检查</p>
                              </li>
                              <li>
                                 <p>上下文下拉列表，可帮助您选择有效的XSQL标记名称并自动完成标记和属性名称</p>
                              </li>
                              <li>
                                 <p>XSQL页面部署和测试</p>
                              </li>
                              <li>
                                 <p>调试工具</p>
                              </li>
                              <li>
                                 <p>用于创建XSQL操作的向导</p>
                              </li>
                           </ul>
                           <p>要在Oracle JDeveloper项目中创建XSQL页面：</p>
                           <ol>
                              <li>
                                 <p>创建或打开一个项目。</p>
                              </li>
                              <li>
                                 <p>选择<span class="bold">File</span> ，然后选择<span class="bold">New</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“ <span class="bold">新建库”</span>对话框中，选择“ <span class="bold">常规”</span>类别，然后选择“ <span class="bold">XML”</span> 。</p>
                              </li>
                              <li>
                                 <p>在“ <span class="bold">项”</span>窗口中，选择“ <span class="bold">XSQL页面”</span> ，然后单击“ <span class="bold">确定”</span> 。 Oracle JDeveloper将新XSQL页面的选项卡加载到中央窗口。
                                 </p>
                              </li>
                           </ol>
                           <p>要将XSQL操作元素（如<a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;）添加</a>到XSQL页面，请将光标放在要放置新元素的位置，然后单击Component Palette中的项目。将打开一个向导，指导您完成选择要使用的XSQL操作以及必须提供的属性的步骤。
                           </p>
                           <p>要检查XSQL页面的语法，请将光标放在页面中，然后右键单击“ <span class="bold">检查XML语法”</span> 。如果存在任何XML语法错误，Oracle JDeveloper将显示它们。
                           </p>
                           <p>要测试XSQL页面，请在导航器中选择该页面，然后右键单击<span class="bold">“运行”</span> 。Oracle JDeveloper自动启动本地Web服务器，正确配置为运行XSQL页面，并通过启动默认浏览器并使用适当的URL来请求页面来测试您的页面。运行XSQL页面后，可以继续在IDE中对其进行修改。并且，您可以修改与其关联的任何XSLT样式表。在IDE中保存文件后，您可以立即刷新浏览器以观察更改的效果。
                           </p>
                           <p>您必须将XSQL运行时库添加到项目库列表中，以便正确设置<code class="codeph">CLASSPATH</code> 。当您通过“新建库”对话框创建新的XSQL页面时，IDE会自动添加此条目，但您也可以手动将其添加到项目中，如下所示：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>在Applications Navigator中右键单击该项目。</span></li>
                           <li><span>选择<span class="bold">项目属性</span> 。</span></li>
                           <li><span>从导航树中选择“ <span class="bold">配置文件”</span> ，然后选择<span class="bold">“</span> <span class="bold">库</span> ”。</span></li>
                           <li><span>将<span class="bold">XSQL Runtime</span>从“ <span class="bold">可用库”</span>窗格移动到“ <span class="bold">选定的库”</span> 。</span></li>
                        </ol>
                     </div>
                  </div><a id="ADXDK19578"></a><div class="props_rev_3"><a id="GUID-244EFC1A-1A2D-4CFF-A8A9-B76A79A7CC48" name="GUID-244EFC1A-1A2D-4CFF-A8A9-B76A79A7CC48"></a><h5 id="ADXDK-GUID-244EFC1A-1A2D-4CFF-A8A9-B76A79A7CC48" class="sect5">为XSQL页面设置CLASSPATH</h5>
                     <div>
                        <p>在Oracle JDeveloper环境之外，您必须确保正确配置XSQL页面处理器引擎。</p>
                        <div class="section">
                           <p></p>
                           <p>确保相应的Java Archive（JAR）文件位于处理XSQL页面的Java虚拟机（JVM）的<code class="codeph">CLASSPATH</code>中。<a href="getting-started-with-XDK-for-Java.html#GUID-D26168D9-2F21-4B5A-9F7B-F1D4B66F0EB4__BACCJCEA" title="组件，库和Notes是列。">表11-1中</a>描述了完整的XDK JAR文件集。XSQL框架的JAR文件包括：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">xml.jar</code> ，XSQL页面处理器</p>
                              </li>
                              <li>
                                 <p><code class="codeph">xmlparserv2.jar</code> ，Oracle XML解析器</p>
                              </li>
                              <li>
                                 <p><code class="codeph">xsu12.jar</code> ，Oracle XML SQL实用程序（ <code class="codeph">xsu12.jar</code> ）</p>
                              </li>
                              <li>
                                 <p><code class="codeph">ojdbc6.jar</code> ，Oracle JDBC驱动程序</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-244EFC1A-1A2D-4CFF-A8A9-B76A79A7CC48__GUID-70047B4F-59AD-4982-9D7F-4F48A52BDB94">
                              <p class="notep1">注意：</p>
                              <p>XSQL servlet可以连接到任何具有Java数据库连接（JDBC）支持的数据库。在XSQL配置文件连接定义中指明相应的JDBC驱动程序类和连接URL。对象关系功能仅在将Oracle数据库与Oracle JDBC驱动程序一起使用时才有效。</p>
                           </div>
                           <p>如果已经配置了您的<code class="codeph">CLASSPATH</code>中指示<a href="getting-started-with-XDK-for-Java.html#GUID-EA5DB831-1D91-453A-AF7B-7B55343B1720" title="您可以使用环境变量或命令行选项设置XDK for Java环境。">设置为Java环境的XDK</a> ，你只需要在页面XSQL配置文件驻留添加的<span class="italic">目录</span> 。在XDK的数据库安装中， <code class="codeph">XSQLConfig.xml</code>的目录是<code class="codeph">$ORACLE_HOME/xdk/admin</code> 。
                           </p>
                           <p>在Windows上，您的<code class="codeph">%CLASSPATH%</code>变量包含以下条目：</p><pre class="oac_no_warn" dir="ltr">％ORACLE_HOME％\ lib中\ ojdbc6.jar;％ORACLE_HOME％\ lib中\ xmlparserv2.jar; ％ORACLE_HOME％\ lib中\ xsu12.jar; C：\ XSQL \ lib中\ xml.jar;％ORACLE_HOME％\ XDK \管理员</pre><p>在UNIX上， <code class="codeph">$CLASSPATH</code>变量包含以下条目：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / lib / ojdbc6.jar：$ ORACLE_HOME / lib / xmlparserv2.jar：$ ORACLE_HOME / lib / xsu12.jar：$ ORACLE_HOME / lib / xml.jar：$ ORACLE_HOME \ xdk \ admin</pre><div class="infoboxnote" id="GUID-244EFC1A-1A2D-4CFF-A8A9-B76A79A7CC48__GUID-962765D7-4187-46C8-A0A6-1BA5E3B37BD3">
                              <p class="notep1">注意：</p>
                              <p>如果要在Java平台企业版（Java EE）Web应用程序归档（WAR）文件中部署XSQL页面，则可以在其中包含XSQL JAR文件<code class="codeph">.WAR文件的/WEB-INF/lib</code>目录。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19579"></a><div class="props_rev_3"><a id="GUID-B0FCAC1D-B5DA-4F73-A53D-9BEDC1DD8A5D" name="GUID-B0FCAC1D-B5DA-4F73-A53D-9BEDC1DD8A5D"></a><h5 id="ADXDK-GUID-B0FCAC1D-B5DA-4F73-A53D-9BEDC1DD8A5D" class="sect5">配置XSQL Servlet容器</h5>
                     <div>
                        <p>您可以在各种不同的Web服务器中安装XSQL servlet。有关servlet安装说明，请参阅<code class="codeph">$ORACLE_HOME/xdk/readme.html</code>文件。
                        </p>
                     </div>
                  </div><a id="ADXDK19581"></a><a id="ADXDK19580"></a><div class="props_rev_3"><a id="GUID-89235366-EED7-49DD-A946-127E771B67CF" name="GUID-89235366-EED7-49DD-A946-127E771B67CF"></a><h5 id="ADXDK-GUID-89235366-EED7-49DD-A946-127E771B67CF" class="sect5">设置连接定义</h5>
                     <div>
                        <p>XSQL页面通过使用XSQL配置文件中定义的连接的短名称来指定数据库连接，默认情况下，该连接名为<code class="codeph">$ORACLE_HOME/xdk/admin/XSQLConfig.xml</code> 。
                        </p>
                        <div class="section">
                           <p></p>
                           <div class="infoboxnote" id="GUID-89235366-EED7-49DD-A946-127E771B67CF__GUID-4404DAED-08D2-4086-A462-79F842D76824">
                              <p class="notep1">注意：</p>
                              <p>如果要在Java EE WAR文件中部署XSQL页面，则可以将<code class="codeph">XSQLConfig.xml</code>文件放在<code class="codeph">.WAR文件的/WEB-INF/classes</code>目录。
                              </p>
                           </div>
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-660C4C15-2442-4E60-A21F-F45CFE60873B__CACCIIDJ">例24-1</a>中显示的示例XSQL页面包含以下连接信息：</p><pre class="oac_no_warn" dir="ltr">&lt;xsql：query connection =“hr”xmlns：xsql =“urn：oracle-xsql”&gt;</pre><p>连接名称在XSQL配置文件的<code class="codeph">&lt;connectiondefs&gt;</code>部分中定义。<a href="using-XSQL-pages-publishing-framework.html#GUID-89235366-EED7-49DD-A946-127E771B67CF__CACBEJBJ">例24-2</a>显示了数据库附带的示例配置文件的相关部分， <code class="codeph">hr</code>连接以粗体显示。
                           </p>
                           <p>对于每个数据库连接，您可以指定以下元素：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">&lt;username&gt;</code> ，数据库用户名</p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;password&gt;</code> ，数据库密码</p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;dburl&gt;</code> ，JDBC连接字符串</p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;driver&gt;</code> ，要使用的JDBC驱动程序的完全限定类名</p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;autocommit&gt;</code> ，可选择强制<code class="codeph">AUTOCOMMIT</code>为<code class="codeph">TRUE</code>或<code class="codeph">FALSE</code></p>
                              </li>
                           </ul>
                           <p>指定<code class="codeph">&lt;autocommit&gt;</code>子元素以控制任何连接的JDBC自动提交的设置。如果没有为<code class="codeph">&lt;connection&gt;</code>设置<code class="codeph">&lt;autocommit&gt;</code>子元素，则XSQL连接管理器不会设置自动提交设置。在这种情况下，该设置是JDBC驱动程序的默认自动提交设置。
                           </p>
                           <p>您可以在XSQL配置文件中放置任意数量的<code class="codeph">&lt;connection&gt;</code>元素来定义数据库连接。单个XSQL页面通过在页面中的顶级元素（也称为“文档元素”）上放置<code class="codeph">connection="</code> <span class="italic"><code class="codeph">xxx</code></span> <code class="codeph">"</code>属性来引用它想要使用的<code class="codeph">connection="</code> 。
                           </p>
                           <div class="infoboxnote" id="GUID-89235366-EED7-49DD-A946-127E771B67CF__GUID-F08F10A8-3930-4590-9FD6-1878264F859F">
                              <p class="notep1">注意：</p>
                              <p><code class="codeph">XSQLConfig.xml</code>文件包含必须在数据库服务器上保持安全的敏感数据库用户名和密码信息。有关说明，请参阅<a href="using-XSQL-pages-publishing-framework.html#GUID-338D0A70-3F60-4708-9D8E-54C8D87E93DE" title="涵盖了管理XSQL servlet中的安全性的最佳实践。">XSQL页面的安全注意事项</a> 。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-89235366-EED7-49DD-A946-127E771B67CF__CACBEJBJ">
                           <p class="titleinexample">示例24-2 XSQLConfig.xml的连接定义部分</p><pre class="oac_no_warn" dir="ltr">&lt;connectiondefs&gt; ...
  <span class="bold">&lt;connection name =“hr”&gt;</span> <span class="bold">&lt;username&gt; hr &lt;/ username&gt;</span> <span class="bold">&lt;password&gt; hr_password &lt;/ password&gt;</span> <span class="bold">&lt;dburl&gt; jdbc：oracle：thin：@localhost：1521：ORCL &lt;/ dburl&gt;</span> <span class="bold">&lt;driver&gt; oracle.jdbc。驱动程序。OracleDriver &lt;/ driver&gt;</span> <span class="bold">&lt;autocommit&gt; false &lt;/ autocommit&gt;</span> <span class="bold">&lt;/ connection&gt;</span> ...&lt;/ connectiondefs&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADXDK19583"></a><a id="ADXDK19582"></a><div class="props_rev_3"><a id="GUID-2F3D4C05-7E99-4E7D-994B-09A15331D01B" name="GUID-2F3D4C05-7E99-4E7D-994B-09A15331D01B"></a><h4 id="ADXDK-GUID-2F3D4C05-7E99-4E7D-994B-09A15331D01B" class="sect4">运行XSQL页面演示程序</h4>
                  <div>
                     <p>XSQL servlet的演示程序包含在<code class="codeph">$ORACLE_HOME/xdk/demo/java/xsql</code> 。
                     </p>
                     <div class="section">
                        <p><a href="using-XSQL-pages-publishing-framework.html#GUID-2F3D4C05-7E99-4E7D-994B-09A15331D01B__CHECIJCH" title="此表列出了演示子目录并解释了包含的演示。演示名称和描述是列。">表24-1</a>列出了演示子目录并解释了包含的演示。演示名称列是指XSQL Pages和XSQL Servlet主页上列出的演示的标题。<a href="using-XSQL-pages-publishing-framework.html#GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9" title="XSQL演示旨在通过Web浏览器进行访问。">运行XSQL演示</a>解释了如何访问主页。
                        </p>
                        <div class="tblformalwide" id="GUID-2F3D4C05-7E99-4E7D-994B-09A15331D01B__CHECIJCH">
                           <p class="titleintable">表24-1 XSQL Servlet演示</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="XSQL Servlet演示" width="100%" border="1" summary="This table lists the demo subdirectories and explains the included demos. Demonstration Name and Description are the columns." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="13%" id="d98090e1502">目录</th>
                                    <th align="left" valign="bottom" width="16%" id="d98090e1505">演示名称</th>
                                    <th align="left" valign="bottom" width="71%" id="d98090e1508">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1513" headers="d98090e1502 ">
                                       <p><code class="codeph">家/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1513 d98090e1505 ">
                                       <p>XSQL Pages和XSQL Servlet</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1513 d98090e1508 ">
                                       <p>包含显示XSQL演示的选项卡式主页的页面以及可从该页面访问的联机XSQL帮助。正如<a href="using-XSQL-pages-publishing-framework.html#GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9" title="XSQL演示旨在通过Web浏览器进行访问。">运行XSQL演示中所述</a> 。您可以从<code class="codeph">index.html</code>页面调用XSQL主页。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1533" headers="d98090e1502 ">
                                       <p><code class="codeph">你好，世界/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1533 d98090e1505 ">
                                       <p>Hello World Page</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1533 d98090e1508 ">
                                       <p>显示最简单的XSQL页面。</p>
                                       <p> </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1546" headers="d98090e1502 ">
                                       <p><code class="codeph">EMP /</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1546 d98090e1505 ">
                                       <p>员工页面</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1546 d98090e1508 ">
                                       <p>XSQL页面显示<code class="codeph">hr.employees</code>表中的XML数据，使用XSQL页面参数来控制返回的员工以及用于数据库排序的列。
                                       </p>
                                       <p>使用关联的XSLT样式表将结果格式化为包含<code class="codeph">emp.xsql</code>页面的HTML表单作为表单操作，以便用户可以优化搜索条件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1565" headers="d98090e1502 ">
                                       <p><code class="codeph">insclaim /</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1565 d98090e1505 ">
                                       <p>保险索赔页面</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1565 d98090e1508 ">
                                       <p>通过结构丰富的Insurance Claim对象视图演示几个示例查询。<code class="codeph">insclaim.sql</code>脚本设置<code class="codeph">INSURANCE_CLAIM_VIEW</code>对象视图并使用示例数据填充它。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1582" headers="d98090e1502 ">
                                       <p><code class="codeph">classerr /</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1582 d98090e1505 ">
                                       <p>无效的类页面</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1582 d98090e1508 ">
                                       <p>使用<code class="codeph">invalidclasses.xsl</code>格式化模式中当前Java类编译错误的“实时”列表。随附的SQL脚本设置演示使用的<code class="codeph">XSQLJavaClassesView</code>对象视图。来自对象视图的主/详细信息由服务器中的<code class="codeph">invalidclasses.xsl</code>样式表格式化为HTML。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1602" headers="d98090e1502 ">
                                       <p><code class="codeph">doyouxml /</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1602 d98090e1505 ">
                                       <p>你是XML吗？现场</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1602 d98090e1508 ">
                                       <p>展示如何使用在查询中使用SQL，XSQL替换变量的XSQL页面以及用于格式化站点的XSLT构建简单的数据驱动网站。</p>
                                       <p>演示了SQL查询语句的两个主体通过内替代参数<a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;XSQL：查询&gt;</a>标签，并且还内的属性，以<code class="codeph">&lt;xsql:query&gt;</code>标记控制行为，例如，多少要显示的记录和跳过（对于“寻呼”通过无状态方式查询结果）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1627" headers="d98090e1502 ">
                                       <p><code class="codeph">EMPDEPT /</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1627 d98090e1505 ">
                                       <p>Emp / Dept对象演示</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1627 d98090e1508 ">
                                       <p>演示如何使用对象视图对来自两个现有平面表（如<code class="codeph">scott.emp</code>和<code class="codeph">scott.dept</code>主/明细信息进行<code class="codeph">scott.dept</code> 。<code class="codeph">empdeptobjs.sql</code>脚本创建对象视图以及<code class="codeph">INSTEAD OF INSERT</code>触发器，这些触发器使主/详细视图可用作<code class="codeph">xsql:insert-request</code>的插入目标。</p>
                                       <p><code class="codeph">empdept.xsl</code>样式表显示了一个XSLT样式表的形式，它看起来就像一个HTML页面，顶部没有额外的<code class="codeph">xsl:stylesheet</code>或<code class="codeph">xsl:transform</code> 。使用文字结果元素作为样式表是XSLT 1.0规范的一部分。样式表还显示了如何生成包含<code class="codeph">&lt;link rel="stylesheet"&gt;</code>的HTML页面，以使生成的HTML能够充分利用<code class="codeph">coolcolors.css</code>文件中的集中式HTML样式信息的级联样式表（CSS）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1670" headers="d98090e1502 ">
                                       <p><code class="codeph">飞机场/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1670 d98090e1505 ">
                                       <p>机场代码验证</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1670 d98090e1508 ">
                                       <p>基于三字母代码返回有关机场的信息的数据报，并在初始查询未返回任何行时使用<code class="codeph">&lt;xsql:no-rows-query&gt;</code>作为备用查询。在尝试匹配传入的机场代码后，XSQL页面会根据机场描述尝试模糊匹配。
                                       </p>
                                       <p><code class="codeph">airport.htm</code>页面显示了如何使用带有JavaScript的网页中的<code class="codeph">airport.xsql</code>页面的XML结果来利用Internet Explorer中的内置文档对象模型（DOM）功能。
                                       </p>
                                       <p>当您在网页上输入三个字母的机场代码时，JavaScript会从XSQL servlet中获取XML数据报。数据报对应于您输入的代码。如果返回指示不匹配，则程序根据来自XSQL servlet的XML数据报中返回的信息收集可能匹配的“选项列表”</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1694" headers="d98090e1502 ">
                                       <p><code class="codeph">飞机场/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1694 d98090e1505 ">
                                       <p>机场代码显示</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1694 d98090e1508 ">
                                       <p>演示使用与机场代码验证示例相同的XSQL页面，但在请求中提供XSLT样式表名称。此行为导致机场信息被格式化为HTML表单，而不是作为原始XML返回。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1705" headers="d98090e1502 ">
                                       <p><code class="codeph">飞机场/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1705 d98090e1505 ">
                                       <p>机场肥皂服务</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1705 d98090e1508 ">
                                       <p>演示将机场信息作为简单对象访问协议（SOAP）服务返回。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1716" headers="d98090e1502 ">
                                       <p><code class="codeph">adhocsql /</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1716 d98090e1505 ">
                                       <p>临时查询可视化</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1716 d98090e1508 ">
                                       <p>演示如何将SQL查询和XSLT样式表作为参数传递给服务器。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1728" headers="d98090e1502 ">
                                       <p><code class="codeph">文献/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1728 d98090e1505 ">
                                       <p>XML文档演示</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1728 d98090e1508 ">
                                       <p>演示如何将XML文档插入关系表。<code class="codeph">docdemo.sql</code>脚本创建一个名为XMLDOCFRAG的用户定义类型，其中包含字符大对象（CLOB）类型的属性。
                                       </p>
                                       <p>尝试在<code class="codeph">./xsql/demo/xml99.xml</code>插入文档的文本，并提供名称<code class="codeph">xml99.xsl</code>作为样式表，并将<code class="codeph">./xsql/demo/JDevRelNotes.xml</code>与样式表<code class="codeph">relnotes.xsl</code> 。
                                       </p>
                                       <p><code class="codeph">docstyle.xsql</code>页面显示了<a href="XSQL-pages-reference.html#GUID-82926ED4-FC53-4580-9CD7-DFD52EF3A31E" title="描述了元素&lt;xsql：include-xsql&gt;。">&lt;xsql：include-xsql&gt;</a>操作元素的示例，该元素在使用客户端提供的样式表名称转换最终输出之前，将<code class="codeph">doc.xsql</code>页面的输出包含到其自己的页面中。
                                       </p>
                                       <p>该演示使用Internet Explorer 5.0的客户端XML功能在允许将文档发布到服务器之前检查文档是否格式良好。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1775" headers="d98090e1502 ">
                                       <p><code class="codeph">insertxml /</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1775 d98090e1505 ">
                                       <p>XML插入请求演示</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1775 d98090e1508 ">
                                       <p>演示将XML从客户端发布到XSQL页面，该页面使用<a href="XSQL-pages-reference.html#GUID-A45E6112-F904-4665-959B-1AF39413E2F7" title="描述了元素&lt;xsql：insert-request&gt;。">&lt;xsql：insert-request&gt;</a>操作元素处理将发布的XML数据插入数据库表。演示接受XML文档中<code class="codeph">moreover.com</code>基于XML的消息格式。
                                       </p>
                                       <p>在这种情况下，发布XML的程序是使用Internet Explorer 5.0的客户端Web页面和来自JavaScript的<code class="codeph">XMLHttpRequest</code>对象。如果查看<code class="codeph">insertnewsstory.xsql</code>页面的源代码，您将看到它指定了一个表名和一个XSLT转换名。<code class="codeph">moreover-to-newsstory.xsl</code>样式表将传入的XML信息转换为<code class="codeph">OracleXMLSave</code>实用程序知道如何插入的规范格式。
                                       </p>
                                       <p>尝试在<code class="codeph">&lt;article&gt;</code>元素中多次复制和粘贴示例<code class="codeph">&lt;article&gt;</code> <code class="codeph">&lt;moreovernews&gt;</code>元素，以便一次性插入几个新文章。
                                       </p>
                                       <p><code class="codeph">newsstory.sql</code>脚本显示了如何在数据库视图中使用INSTEAD OF触发器，您要求XSQL页面插入数据以自定义传入数据的处理方式，默认主键值等。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1825" headers="d98090e1502 ">
                                       <p><code class="codeph">SVG /</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1825 d98090e1505 ">
                                       <p>可缩放矢量图形演示</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1825 d98090e1508 ">
                                       <p><code class="codeph">deptlist.xsql</code>页面显示一个简单的部门列表，其中包含指向<code class="codeph">SalChart.xsql</code>页面的超链接。<code class="codeph">SalChart.xsql</code>页面查询作为参数传入的给定部门的员工，并使用关联的<code class="codeph">SalChart.xsql</code>样式表将结果格式化为可缩放矢量图形绘图，该绘图是比较该部门员工工资的条形图。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1848" headers="d98090e1502 ">
                                       <p><code class="codeph">FOP /</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1848 d98090e1505 ">
                                       <p>PDF演示</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1848 d98090e1508 ">
                                       <p><code class="codeph">emptable.xsql</code>页面显示一个简单的员工列表。<code class="codeph">emptable.xsl</code>样式表将数据页转换为XSL-FO格式化对象，与内置的FOP序列化程序结合，以Adobe PDF格式呈现结果。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1865" headers="d98090e1502 ">
                                       <p><code class="codeph">光标/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1865 d98090e1505 ">
                                       <p>光标演示</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1865 d98090e1508 ">
                                       <p>包含使用嵌套<code class="codeph">CURSOR</code>表达式的示例，这是使用默认<a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;</a>元素生成嵌套元素的三种方法之一。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1888" headers="d98090e1502 ">
                                       <p><code class="codeph">动作/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1888 d98090e1505 ">
                                       <p></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1888 d98090e1508 ">
                                       <p>包含两个示例自定义操作的源代码。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19584"></a><div class="props_rev_3"><a id="GUID-430D7E5F-3A02-4F68-B33B-CE5B14042F7F" name="GUID-430D7E5F-3A02-4F68-B33B-CE5B14042F7F"></a><h5 id="ADXDK-GUID-430D7E5F-3A02-4F68-B33B-CE5B14042F7F" class="sect5">设置XSQL演示</h5>
                     <div>
                        <p>描述了如何设置XSQL演示。</p>
                        <ol>
                           <li class="stepexpand"><span>切换到<code class="codeph">$ORACLE_HOME/xdk/demo/java/xsql</code>目录（UNIX）或<code class="codeph">%ORACLE_HOME%\xdk\demo\java\xsql</code>目录（Windows）。</span></li>
                           <li class="stepexpand"><span>启动SQL * Plus并以<code class="codeph">ctxsys</code> Oracle Text包的架构所有者）身份连接到您的数据库，并发出以下声明：</span><div><pre class="oac_no_warn" dir="ltr">在ctx_ddl上执行GRANT EXECUTE TO scott;</pre></div>
                           </li>
                           <li class="stepexpand"><span>以具有<code class="codeph">DBA</code>权限的用户身份连接到数据库并发出以下语句：</span><div><pre class="oac_no_warn" dir="ltr">scott QUERY REWRITE给斯科特;</pre><p>上述查询使<code class="codeph">scott</code>能够创建基于函数的索引，其中一个演示需要对机场描述执行不区分大小写的查询。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>以<code class="codeph">scott</code>身份连接到您的数据库。系统会提示您输入密码。</span></li>
                           <li class="stepexpand"><span>在当前目录中运行SQL脚本<code class="codeph">install.sql</code> 。此脚本为所有演示运行所有SQL脚本：</span><div><pre class="oac_no_warn" dir="ltr">@ install.sql</pre></div>
                           </li>
                           <li class="stepexpand"><span>切换到<code class="codeph">./doyouxml</code>子目录，并运行此命令以导入“Do You XML？”的示例数据。“demo（系统会提示您输入密码）：</span><div><pre class="oac_no_warn" dir="ltr">imp scott file = doyouxml.dmp</pre></div>
                           </li>
                           <li class="stepexpand"><span>要运行可缩放矢量图形（SVG）演示，请在浏览器中安装SVG插件（如Adobe SVG插件）。</span></li>
                        </ol>
                     </div>
                  </div><a id="ADXDK19586"></a><a id="ADXDK19585"></a><div class="props_rev_3"><a id="GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9" name="GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9"></a><h5 id="ADXDK-GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9" class="sect5">运行XSQL演示</h5>
                     <div>
                        <p>XSQL演示旨在通过Web浏览器进行访问。</p>
                        <div class="section">
                           <p>如果你已经建立了一个网络服务器的XSQL servlet作为描述<a href="using-XSQL-pages-publishing-framework.html#GUID-B0FCAC1D-B5DA-4F73-A53D-9BEDC1DD8A5D" title="您可以在各种不同的Web服务器中安装XSQL servlet。有关servlet安装说明，请参阅$ ORACLE_HOME / xdk / readme.html文件。">配置XSQL Servlet容器</a> ，那么你可以通过这个网址访问演示，代替适当的值<code class="codeph">yourserver</code>和<code class="codeph">port</code> ：</p><pre class="oac_no_warn" dir="ltr">HTTP：// yourserver：端口/ XSQL / index.html中</pre><p><a href="using-XSQL-pages-publishing-framework.html#GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9__BABGEJHA">图24-3</a>显示了Internet Explorer中XSQL主页的一部分。（您必须使用浏览器版本5或更高版本。）
                           </p>
                           <div class="figure" id="GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9__BABGEJHA">
                              <p class="titleinfigure">图24-3 XSQL主页</p><img src="img/xsql_home.gif" width="655" alt="下面是图24-3的描述" title="下面是图24-3的描述" longdesc="img_text/xsql_home.html"><br><a href="img_text/xsql_home.html">“图24-3 XSQL主页”的描述</a></div>
                           <!-- class="figure" -->
                           <p>演示旨在不言自明。单击演示标题 - <span class="bold">Hello World Page</span> ， <span class="bold">Employee Page</span>等，然后按照在线说明进行操作。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADXDK19587"></a><div class="props_rev_3"><a id="GUID-48903610-4E87-4246-A872-3DE816BE47F6" name="GUID-48903610-4E87-4246-A872-3DE816BE47F6"></a><h4 id="ADXDK-GUID-48903610-4E87-4246-A872-3DE816BE47F6" class="sect4">使用XSQL Pages命令行实用程序</h4>
                  <div>
                     <p>XDK包括一个运行XSQL页面处理器的命令行Java接口。您可以使用XSQL命令行实用程序处理任何XSQL页面。</p>
                     <div class="section">
                        <p>通常，动态页面的内容基于不经常更改的数据。要优化Web发布的性能，可以使用操作系统工具来安排XSQL页面的脱机处理。此技术使您的Web服务器可以静态地提供处理结果。</p>
                        <p><code class="codeph">$ORACLE_HOME/xdk/bin/xsql</code>和<code class="codeph">%ORACLE_HOME%\xdk\bin\xsql.bat</code> shell脚本运行<code class="codeph">%ORACLE_HOME%\xdk\bin\xsql.bat</code> <code class="codeph">oracle.xml.xsql.XSQLCommandLine</code>类。在调用类之前，请确保按照<a href="using-XSQL-pages-publishing-framework.html#GUID-EE6FC3BB-27D5-458D-810E-6D2ECE34AC48" title="您可以在各种场景中开发和使用XSQL页面。">设置XSQL页面框架中的</a>描述配置环境。根据您调用该实用程序的方式，语法可以是以下任一种：</p><pre class="oac_no_warn" dir="ltr">java oracle.xml.xsql。XSQLCommandLine <span class="italic">xsqlpage</span> [ <span class="italic"><code class="codeph">outfile</code></span> ] [param1 = value1 ...]xsql xsqlpage [outfile] [param1 = value1 ...]
</pre><p>如果指定<span class="italic"><code class="codeph">outfile</code></span> ，则会写入处理<code class="codeph">xsqlpage</code>的结果;否则结果将标准化。您可以将任意数量的参数传递给XSQL页面处理器，这些参数可供作为请求的一部分处理的XSQL页面参考。但是，这些参数名称由命令行实用程序识别，并具有预定义的行为：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">xml样式表= stylesheetURL</code></p>
                              <p>提供用于请求的样式表的相对或绝对URL。您还可以将其设置为字符串<code class="codeph">none</code>以禁止用于调试的XSLT样式表处理。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">贴-XML = XMLDocumentURL</code></p>
                              <p>提供XML资源的相对或绝对URL，以便将其作为请求的一部分进行处理。</p>
                           </li>
                           <li>
                              <p><code class="codeph">用户代理= UserAgentString</code></p>
                              <p>从命令行模拟特定的HTTP User-Agent字符串，以便选择该User-Agent类型的相应样式表作为页面命令行处理的一部分。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADXDK19588"></a><div class="props_rev_3"><a id="GUID-467F3D9E-A9DD-4ED9-9DE8-97435FB4D0E2" name="GUID-467F3D9E-A9DD-4ED9-9DE8-97435FB4D0E2"></a><h3 id="ADXDK-GUID-467F3D9E-A9DD-4ED9-9DE8-97435FB4D0E2" class="sect3">使用XSQL Servlet生成和转换XML</h3>
               <div>
                  <p>描述了可以使用服务器端XSQL页面模板执行的基本任务。</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19590"></a><a id="ADXDK19591"></a><a id="ADXDK19589"></a><div class="props_rev_3"><a id="GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3" name="GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3"></a><h4 id="ADXDK-GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3" class="sect4">编写XSQL页面</h4>
                  <div>
                     <p>您可以使用XSQL页面通过Web在XML格式中提供数据库信息。</p>
                     <div class="section">
                        <p>例如，假设您的目标是为今天在肯尼迪机场降落的所有可用航班提供来自Oracle的实时XML数据报。<a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">例24-3</a>显示了名为<code class="codeph">AvailableFlightsToday.xsql</code>的文件中的示例XSQL页面。
                        </p>
                        <p>XSQL页面是一个XML文件，包含静态XML内容和XSQL操作元素的任意组合。该文件可以具有任何扩展名，但<code class="codeph">.xsql</code>是XSQL页面的默认扩展名。您可以使用<a href="using-XSQL-pages-publishing-framework.html#GUID-B0FCAC1D-B5DA-4F73-A53D-9BEDC1DD8A5D" title="您可以在各种不同的Web服务器中安装XSQL servlet。有关servlet安装说明，请参阅$ ORACLE_HOME / xdk / readme.html文件。">配置XSQL Servlet容器中</a>描述的相同技术来修改servlet引擎配置设置以关联其他扩展。servlet扩展映射在<code class="codeph">.Java EE WAR文件中的/WEB-INF/web.xml</code>文件。
                        </p>
                        <p><a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">例24-3中</a>的XSQL页面以此声明开头：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt;</pre><p>XSQL页面中的第一个最外层元素是<strong class="term">document元素</strong> 。<code class="codeph">AvailableFlightsToday.xsql</code>包含单个XSQL操作元素<a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;</a> ，但没有静态XML元素。在这种情况下， <code class="codeph">&lt;xsql:query&gt;</code>元素是文档元素。<a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">示例24-3</a>表示最简单有用的XSQL页面：一个包含单个查询的页面。查询结果替换XSQL页面中的<code class="codeph">&lt;xsql:query&gt;</code>部分。
                        </p>
                        <div class="infoboxnote" id="GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__GUID-07EAC600-D327-402A-A997-E12D29D02BAA">
                           <p class="notep1">注意：</p>
                           <p><a href="XSQL-pages-reference.html#GUID-6CECB521-F70B-434A-AA73-EB2049F5E463" title="提供了XSQL页面框架的参考信息。">XSQL页面参考</a>描述了完整的内置操作元素集。
                           </p>
                        </div>
                        <p><code class="codeph">&lt;xsql:query&gt;</code>操作元素包含一个<code class="codeph">xmlns</code>属性，该属性将<code class="codeph">xsql</code>命名空间前缀声明为<code class="codeph">urn:oracle-xsql</code>值的同义词，该值是Oracle XSQL命名空间标识符：</p><pre class="oac_no_warn" dir="ltr">&lt;xsql：query connection =“demo”bind-params =“City” <span class="bold">xmlns：xsql =“urn：oracle-xsql”</span> &gt;</pre><p>该元素还包含一个<code class="codeph">connection</code>属性，其值是XSQL配置文件中预定义连接的名称：</p><pre class="oac_no_warn" dir="ltr">&lt;xsql：query <span class="bold">connection =“demo”</span> bind-params =“City”xmlns：xsql =“urn：oracle-xsql”&gt;</pre><p>有关用于<code class="codeph">demo</code>连接的用户名，密码，数据库和JDBC驱动程序的详细信息集中在配置文件中。
                        </p>
                        <p>要在页面上包含多个查询，可以创建一个XML元素来包装其他元素。<a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACDJDJI">例24-4</a>显示了这种技术。
                        </p>
                        <p>在<a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACDJDJI">例24-4中</a> ， <code class="codeph">connection</code>属性和<code class="codeph">xsql</code>名称空间声明始终在文档元素上，而<code class="codeph">bind-params</code>特定于<code class="codeph">&lt;xsql:query&gt;</code>操作。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">
                        <p class="titleinexample">示例24-3 AvailableFlightsToday.xsql中的示例XSQL页面</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;xsql：query connection =“demo”bind-params =“City”xmlns：xsql =“urn：oracle-xsql”&gt; SELECT Carrier，FlightNumber，Origin，TO_CHAR（ExpectedTime，'HH24：MI'）AS Due From FlightSchedule WHERE TRUNC（ExpectedTime）= TRUNC（SYSDATE）AND Arrived ='N'AND Destination =？/ *“？“表示绑定变量绑定* / ORDER BY ExpectedTime / *到City参数的值。* / &lt;/ xsql：query&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACDJDJI">
                        <p class="titleinexample">示例24-4包装&lt;xsql：query&gt;元素</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;page connection =“demo”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：query bind-params =“City”&gt; SELECT Carrier，FlightNumber，Origin，TO_CHAR（ExpectedTime，'HH24：MI'）AS从FlightSchedule到期WHERE TRUNC（ExpectedTime）= TRUNC（SYSDATE）AND Arrived ='N'AND Destination =？/ *？是绑定变量绑定* / ORDER BY ExpectedTime / *到City参数的值。* / &lt;/ xsql：query&gt; &lt;！ - 其他xsql：查询操作可以在&lt;page&gt;和&lt;/ page&gt;  - &gt; &lt;/ page&gt;内找到</pre></div>
                     <!-- class="example" -->
                  </div><a id="ADXDK19593"></a><a id="ADXDK19594"></a><a id="ADXDK19592"></a><div class="props_rev_3"><a id="GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5" name="GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5"></a><h5 id="ADXDK-GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5" class="sect5">使用绑定参数</h5>
                     <div>
                        <p>描述了绑定参数的使用。</p>
                        <div class="section">
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">例24-3</a>中显示的<code class="codeph">&lt;xsql:query&gt;</code>元素包含一个<code class="codeph">bind-params</code>属性，该属性将请求中的参数值与<code class="codeph">&lt;xsql:query&gt;</code>标记中包含的SQL语句中的绑定变量相关联。SQL语句中的绑定参数由问号表示。
                           </p>
                           <p>您可以使用SQL绑定变量来参数化<a href="XSQL-pages-reference.html#GUID-6CECB521-F70B-434A-AA73-EB2049F5E463__BJEBEJFF" title="此表列出了XSQL页面的合法内置操作。XSQL Action Element，Handler Class和Description是列。">表33-1</a>中允许SQL语句的任何操作的结果。绑定变量使您的XSQL页面模板能够根据请求中传递的参数值生成结果。</p>
                           <p>要使用绑定变量，请在语句中的任何位置包含问号，其中SQL允许绑定变量。每当在页面中执行SQL语句时，XSQL引擎通过在action元素上指定<code class="codeph">bind-params</code>属性将参数值绑定到变量。
                           </p>
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5__BABBGABH">例24-5</a>显示了一个XSQL页面，它将绑定变量绑定到页面请求中<code class="codeph">custid</code>参数的值。</p>
                           <p>然后，可以通过在请求中传递customer id参数来请求ID为101的客户的XML数据：</p><pre class="oac_no_warn" dir="ltr">http://yourserver.com/fin/CustomerPortfolio.xsql？ <span class="bold">客户ID = 1001</span>
</pre><p><code class="codeph">bind-params</code>属性的值是以空格分隔的参数名称列表。从左到右的顺序表示其值在语句中绑定的位置绑定变量。因此，如果您的SQL语句包含五个问号，那么<code class="codeph">bind-params</code>属性需要一个以空格分隔的五个参数名称列表。如果必须将相同的参数值绑定到绑定变量的几个不同出现位置，则在适当的位置重复<code class="codeph">bind-params</code>属性值中的参数名称。如果在查询中没有在<code class="codeph">bind-params</code>属性中包含相同数量的参数名，则在执行页面时会导致错误。
                           </p>
                           <p>您可以在任何需要SQL语句或PL / SQL块的操作中使用变量。<a href="using-XSQL-pages-publishing-framework.html#GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5__BABJDBFH">例24-6中</a>显示的页面显示了这种技术。XSQL页面包含三个操作元素：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="XSQL-pages-reference.html#GUID-B44BC32C-50EF-480F-834E-062BD5AE4866" title="描述了元素&lt;xsql：dml&gt;。">&lt;xsql：dml&gt;</a>将<code class="codeph">useridCookie</code>绑定到<code class="codeph">log_user_hit</code>过程中的参数。
                                 </p>
                              </li>
                              <li>
                                 <p><a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;</a>将参数<code class="codeph">custid</code>绑定到<code class="codeph">WHERE</code>子句中的变量。
                                 </p>
                              </li>
                              <li>
                                 <p><a href="XSQL-pages-reference.html#GUID-7F7A66D1-BFBB-402A-A2DD-C2A98349CAA7" title="描述了元素&lt;xsql：include-owa&gt;。">&lt;xsql：include-owa&gt;</a>将参数<code class="codeph">custid</code>和<code class="codeph">userCookie</code>到<code class="codeph">historical_data</code>过程中的两个参数。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5__BABBGABH">
                           <p class="titleinexample">示例24-5 CustomerPortfolio.xsql中的绑定变量</p><pre class="oac_no_warn" dir="ltr">&lt;portfolio connnection =“prod”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：query <span class="bold">bind-params =“custid”</span> &gt; SELECT s.ticker as“Symbol”，s.last_traded_price as“Price”FROM latest_stocks s ，customer_portfolio p <span class="bold">WHERE p.customer_id =？</span>AND s.ticker = p.ticker &lt;/ xsql：query&gt; &lt;/ portfolio&gt;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5__BABJDBFH">
                           <p class="titleinexample">示例24-6在CustomerPortfolio.xsql中使用Action元素绑定变量</p><pre class="oac_no_warn" dir="ltr">&lt;portfolio connnection =“prod”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：dml commit =“yes” <span class="bold">bind-params =“useridCookie”</span> &gt; BEGIN <span class="bold">log_user_hit（？）</span>;结束; &lt;/ xsql：dml&gt; &lt;current-prices&gt; &lt;xsql：query <span class="bold">bind-params =“custid”</span> &gt; SELECT s.ticker as“Symbol”，s.last_traded_price as“Price”FROM latest_stocks s，customer_portfolio p <span class="bold">WHERE p.customer_id = ？</span>AND s.ticker = p.ticker &lt;/ xsql：query&gt; &lt;/ current-prices&gt; &lt;analysis&gt; &lt;xsql：include-owa <span class="bold">bind-params =“custid userCookie”</span> &gt; BEGIN portfolio_analysis.historical_data（ <span class="bold">？，5 / *年* /，？</span> ）;结束; &lt;/ xsql：include-owa&gt; &lt;/ analysis&gt; &lt;/ portfolio&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19596"></a><a id="ADXDK19597"></a><a id="ADXDK19595"></a><div class="props_rev_3"><a id="GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79" name="GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79"></a><h5 id="ADXDK-GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79" class="sect5">使用词法替换参数</h5>
                     <div>
                        <p>对于任何XSQL操作元素，您可以将词法替换参数替换为任何属性的值或任何包含的SQL语句的文本。因此，您可以参数化操作的行为方式并替换它们执行的SQL语句的各个部分。</p>
                        <div class="section">
                           <p>使用以下语法引用词法替换参数： <code class="codeph">{@ParameterName}</code> 。<a href="using-XSQL-pages-publishing-framework.html#GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79__BABGGBIA">例24-7</a>显示了如何使用两个词法替换参数。<a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;</a>元素中的一个参数设置要传入的最大行数，而另一个参数控制要排序的列的列表。
                           </p>
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79__BABGGBIA">例24-7</a>还包含两个绑定参数： <code class="codeph">dev</code>和<code class="codeph">prod</code> 。例如，您可能希望针对产品<code class="codeph">817</code>获取开发人员<code class="codeph">yxsmith</code>的开放漏洞。并且，您只想检索10行并按错误号排序。您可以通过指定参数值来获取错误列表的XML：</p><pre class="pre codeblock"><code>http://server.com/bug/DevOpenBugs.xsql？ <span class="bold">dev = yxsmith＆prod = 817</span> <span class="bold">＆max = 10＆orderby = bugno</span>
</code></pre><p>您还可以使用XSQL命令行实用程序发出请求：</p><pre class="pre codeblock"><code>xsql DevOpenBugs.xsql <span class="bold">dev = yxsmith prod = 817 max = 10 orderby = bugno</span>
</code></pre><p>词法参数还允许您指定XSQL页面连接的参数和用于处理页面的样式表。<a href="using-XSQL-pages-publishing-framework.html#GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79__BABDHDBC">例24-8</a>显示了这种技术。您可以通过指定名称/值对<code class="codeph">sheet=test</code>和<code class="codeph">sheet=prod</code>在样式表<code class="codeph">test.xsql</code>和<code class="codeph">prod.xsl</code>之间切换。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79__BABGGBIA">
                           <p class="titleinexample">示例24-7 DevOpenBugs.xsql中行和列的词法替换参数</p><pre class="pre codeblock"><code>&lt;！ -  DevOpenBugs.xsql  - &gt; &lt;open-bugs connection =“demo”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：query max-rows =“ <span class="bold">{@ max}</span> ”bind-params =“ dev prod“&gt; SELECT bugno，abstract，status FROM bug_table WHERE programmer_assigned = UPPER（？）AND product_id =？AND status &lt;80 ORDER BY <span class="bold">{@orderby}</span> &lt;/ xsql：query&gt; &lt;/ open-bugs&gt;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79__BABDHDBC">
                           <p class="titleinexample">示例24-8 DevOpenBugs.xsql中连接和样式表的词法替换参数</p><pre class="pre codeblock"><code>&lt;？xml版本=“1.0”？&gt; &lt;？xml-stylesheet type =“text / xsl”href =“ <span class="bold">{@ sheet}</span> .xsl”？&gt; &lt;！ -  DevOpenBugs.xsql  - &gt; &lt;open-bugs connection =“{@ conn}”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：query max-rows =“{@ max}”bind -params =“dev prod”&gt; SELECT bugno，abstract，status FROM bug_table WHERE programmer_assigned = UPPER（？）AND product_id =？AND status &lt;80 ORDER BY {@orderby} &lt;/ xsql：query&gt; &lt;/ open-bugs&gt;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19599"></a><a id="ADXDK19600"></a><a id="ADXDK19601"></a><a id="ADXDK19602"></a><a id="ADXDK19598"></a><div class="props_rev_3"><a id="GUID-8E65A80B-23D4-4823-B47A-806032B310BD" name="GUID-8E65A80B-23D4-4823-B47A-806032B310BD"></a><h5 id="ADXDK-GUID-8E65A80B-23D4-4823-B47A-806032B310BD" class="sect5">为绑定和替换参数提供默认值</h5>
                     <div>
                        <p>您可能希望直接在页面中为绑定变量或替换参数提供默认值。通过这种方式，页面被参数化，而不需要请求者显式传入每个请求中的所有值。</p>
                        <div class="section">
                           <p>要包含参数的默认值，请将与参数同名的XML属性添加到action元素或任何祖先元素。如果请求中未包含给定参数的值，则XSQL页面处理器将在当前操作元素上按相同名称搜索属性。如果找不到，则它会一直在当前操作元素的每个祖先元素上查找这样的属性，直到它到达页面的文档元素。</p>
                           <p>对于页面中的两个<code class="codeph">&lt;xsql:query&gt;</code>操作， <a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABJBDCH">示例24-9中</a>的页面将<code class="codeph">max</code>参数的值默认为<code class="codeph">10</code> 。
                           </p>
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABFAHCE">例24-10中的</a>此页面将第一个查询的默认值设置为<code class="codeph">max</code>为<code class="codeph">5</code> ，将第二个查询的默认值设置为<code class="codeph">max</code>为<code class="codeph">7</code> ，将第三个查询的默认值设置为<code class="codeph">max</code>为<code class="codeph">10</code> 。
                           </p>
                           <p>如果请求中提供了<code class="codeph">max</code>值，则会覆盖所有默认值，如下例所示：</p><pre class="oac_no_warn" dir="ltr">http://yourserver.com/example.xsql？ <span class="bold">最大= 3</span></pre><p>绑定变量遵循相同的默认规则。<a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABHIHDC">例24-11</a>显示了默认情况下如何将<code class="codeph">val</code>参数设置为<code class="codeph">10</code> 。
                           </p>
                           <p>如果请求<a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABHIHDC">示例24-11中</a>的页面没有任何参数，则返回此XML数据报：</p><pre class="oac_no_warn" dir="ltr">&lt;example&gt; &lt;rowset&gt; &lt;row&gt; &lt;somevalue&gt; 10 &lt;/ somevalue&gt; &lt;/ row&gt; &lt;/ row&gt; &lt;/ example&gt;</pre><p>或者，假设使用此URL请求页面：</p><pre class="oac_no_warn" dir="ltr">http://yourserver.com/example.xsql？ <span class="bold">VAL = 3</span>
</pre><p>前面的URL返回此数据报：</p><pre class="oac_no_warn" dir="ltr">&lt;example&gt; &lt;rowset&gt; &lt;row&gt; &lt;somevalue&gt; 3 &lt;/ somevalue&gt; &lt;/ row&gt; &lt;/ row&gt; &lt;/ example&gt;</pre><p>您可以通过删除<code class="codeph">val</code>属性从页面中删除<code class="codeph">val</code>参数的默认值。<a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABEBCBG">例24-12</a>显示了这种技术。
                           </p>
                           <p>对不提供名称/值对的页面的URL请求将返回此数据报：</p><pre class="oac_no_warn" dir="ltr">&lt;example&gt; &lt;rowset /&gt; &lt;/ example&gt;</pre><p>绑定到<span class="italic">没有</span>默认值<span class="italic">或</span>请求中提供的值的参数的绑定变量绑定为NULL，这会导致<a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABEBCBG">示例24-12中</a>的<code class="codeph">WHERE</code>子句不返回任何行。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABJBDCH">
                           <p class="titleinexample">示例24-9设置默认值</p><pre class="oac_no_warn" dir="ltr">&lt;example <span class="bold">max =“10”</span> connection =“demo”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：query max-rows =“ <span class="bold">{@ max}</span> ”&gt; SELECT * FROM TABLE1 &lt;/ xsql：query&gt; &lt; xsql：query max-rows =“ <span class="bold">{@ max}</span> ”&gt; SELECT * FROM TABLE2 &lt;/ xsql：query&gt; &lt;/ example&gt;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABFAHCE">
                           <p class="titleinexample">示例24-10设置多个默认值</p><pre class="oac_no_warn" dir="ltr">&lt;example <span class="bold">max =“10”</span> connection =“demo”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：query <span class="bold">max =“5”</span> max-rows =“ <span class="bold">{@ max}</span> ”&gt; SELECT * FROM TABLE1 &lt;/ xsql：query&gt; &lt;xsql：query <span class="bold">max =“7”</span> max-rows =“ <span class="bold">{@ max}</span> ”&gt; SELECT * FROM TABLE2 &lt;/ xsql：query&gt; &lt;xsql：query max-rows =“ <span class="bold">{@ max}</span> ”&gt; SELECT * FROM TABLE3 &lt;/ xsql：query&gt; &lt;/ example&gt;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABHIHDC">
                           <p class="titleinexample">例24-11绑定变量的默认值</p><pre class="oac_no_warn" dir="ltr">&lt;example <span class="bold">val =“10”</span> connection =“demo”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：query tag-case =“lower” <span class="bold">bind-params =“val val val”</span> &gt; SELECT？作为一些来自DUAL WHERE？=？&lt;/ xsql：query&gt; &lt;/ example&gt;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABEBCBG">
                           <p class="titleinexample">例24-12没有默认值的绑定变量</p><pre class="oac_no_warn" dir="ltr">&lt;example connection =“demo”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：query tag-case =“lower” <span class="bold">bind-params =“val val val”</span> &gt; SELECT？作为一些来自DUAL WHERE？=？&lt;/ xsql：query&gt; &lt;/ example&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19603"></a><div class="props_rev_3"><a id="GUID-63C56764-6363-472A-9E9E-B2DE02B234AB" name="GUID-63C56764-6363-472A-9E9E-B2DE02B234AB"></a><h5 id="ADXDK-GUID-63C56764-6363-472A-9E9E-B2DE02B234AB" class="sect5">XSQL页面处理器如何处理不同类型的参数</h5>
                     <div>
                        <p>XSQL页面可以使用请求中提供的参数以及页面私有参数。页面私有参数的名称和值由页面中的操作确定。</p>
                        <p>如果某个操作在<code class="codeph">bind-params</code>属性或词法参数引用中遇到对名为<code class="codeph">param</code>参数的引用，则<code class="codeph">param</code>参数的值<code class="codeph">param</code>以下顺序解析：</p>
                        <ol>
                           <li>
                              <p>名为<code class="codeph">param</code>的page-private参数的值（如果已设置）</p>
                           </li>
                           <li>
                              <p>名为<code class="codeph">param</code>的请求参数的值（如果提供）</p>
                           </li>
                           <li>
                              <p>由当前操作元素或其祖先元素之一上的名为<code class="codeph">param</code>的属性提供的默认值</p>
                           </li>
                           <li>
                              <p>绑定变量的值为NULL，词法参数的空字符串</p>
                           </li>
                        </ol>
                        <p>对于由XSQL servlet通过HTTP处理的XSQL页面，您还可以设置和引用HTTP-Session级别变量和HTTP Cookies参数。</p>
                        <p>对于通过XSQL servlet处理的XSQL页面，参数<code class="codeph">param</code>的值按以下顺序解析：</p>
                        <ol>
                           <li>
                              <p>page-private参数<code class="codeph">param</code>的值（如果已设置）</p>
                           </li>
                           <li>
                              <p>名为<code class="codeph">param</code>的cookie的值（如果已设置）</p>
                           </li>
                           <li>
                              <p>名为<code class="codeph">param</code>的会话变量的值（如果已设置）</p>
                           </li>
                           <li>
                              <p>名为<code class="codeph">param</code>的请求参数的值（如果提供）</p>
                           </li>
                           <li>
                              <p>由当前操作元素或其祖先元素之一上的名为<code class="codeph">param</code>的属性提供的默认值</p>
                           </li>
                           <li>
                              <p>绑定变量的值为NULL，词法参数的空字符串</p>
                           </li>
                        </ol>
                        <p>解析顺序意味着用户无法在请求中提供参数值来覆盖HTTP会话中设置的同名参数。此外，用户无法将其设置为跨浏览器会话持久存在的Cookie。</p>
                     </div>
                  </div>
               </div><a id="ADXDK19605"></a><a id="ADXDK19604"></a><div class="props_rev_3"><a id="GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38" name="GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38"></a><h4 id="ADXDK-GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38" class="sect4">从SQL查询生成数据报</h4>
                  <div>
                     <p>描述了如何使用SQL查询生成数据报。</p>
                     <div class="section">
                        <p>通过在Web服务器上正确安装XSQL servlet，您可以按照以下基本步骤访问XSQL页面：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将XSQL文件复制到Web服务器虚拟层次结构下的目录中。<a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">例24-3</a>显示了示例页面<code class="codeph">AvailableFlightsToday.xsql</code> 。</span><div>
                              <p>您还可以在标准Java EE WAR文件中部署XSQL页面，这在使用Oracle JDeveloper开发页面并将其部署到Oracle WebLogic Server时会发生。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在浏览器中加载页面。例如，如果根URL是<code class="codeph">yourcompany.com</code> ，则可以通过请求此URL通过Web浏览器访问<code class="codeph">AvailableFlightsToday.xsql</code>页面：</span><div><pre class="oac_no_warn" dir="ltr">http://yourcompany.com/AvailableFlightsToday.xsql?City=JFK</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>XSQL页面处理器自动将XSQL页面中的查询结果实现为XML，并将它们返回给请求者。通常，另一个服务器程序请求此基于XML的数据报进行处理，但如果您使用Internet Explorer等浏览器，则可以直接查看XML结果， <a href="using-XSQL-pages-publishing-framework.html#GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38__BABGAHAI">如图24-4</a>所示。
                        </p>
                        <div class="figure" id="GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38__BABGAHAI">
                           <p class="titleinfigure">图24-4 XSQL页面的XML结果（AvailableFlightsToday.xsql）查询</p><img src="img/xsql1.gif" width="603" alt="下面是图24-4的描述" title="下面是图24-4的描述" longdesc="img_text/xsql1.html"><br><a href="img_text/xsql1.html">“图24-4 XSQL页面的XML结果（AvailableFlightsToday.xsql）查询”</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADXDK19607"></a><a id="ADXDK19610"></a><a id="ADXDK19608"></a><a id="ADXDK19609"></a><a id="ADXDK19606"></a><div class="props_rev_3"><a id="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA" name="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA"></a><h4 id="ADXDK-GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA" class="sect4">将XML数据报转换为备用XML格式</h4>
                  <div>
                     <p>如果规范的<code class="codeph">&lt;ROWSET&gt;</code>和<code class="codeph">&lt;ROW&gt;</code> XML输出格式不是您需要的XML格式，则可以将XSLT样式表与XSQL页面相关联。样式表可以在返回数据之前转换服务器中的XML数据报。
                     </p>
                     <div class="section">
                        <p>规范输出<a href="using-XSQL-pages-publishing-framework.html#GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38__BABGAHAI">如图24-4所示</a> 。
                        </p>
                        <p>与其他程序交换数据时，通常会同意描述交换的XML格式的文档类型定义（DTD）。假设您获得了<code class="codeph">flight-list.dtd</code>定义，并被告知以符合DTD的格式生成您的到达航班列表。您可以使用XML Authority等可视化工具浏览航班列表DTD的结构， <a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__BABCDJHB">如图24-5</a>所示。
                        </p>
                        <div class="figure" id="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__BABCDJHB">
                           <p class="titleinfigure">图24-5使用XML Authority探索flight-list.dtd</p><img src="img/xsql2.gif" width="616" alt="下面是图24-5的描述" title="下面是图24-5的描述" longdesc="img_text/xsql2.html"><br><a href="img_text/xsql2.html">“图24-5使用XML Authority探索flight-list.dtd”的描述</a></div>
                        <!-- class="figure" -->
                        <p><a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__BABCDJHB">图24-5</a>显示了航班列表的标准XML格式是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">&lt;flight-list&gt;</code>元素，包含一个或多个<code class="codeph">&lt;flight&gt;</code>元素</p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;flight&gt;</code>元素，具有<code class="codeph">airline</code>和<code class="codeph">number</code>属性，每个元素都包含<code class="codeph">&lt;arrives&gt;</code>元素</p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;arrives&gt;</code>元素，包含文本</p>
                           </li>
                        </ul>
                        <p><a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__CACGCDCH">例24-13</a>显示了XSLT样式表<code class="codeph">flight-list.xsl</code> 。通过将样式表与XSQL页面相关联，您可以将默认的<code class="codeph">&lt;ROWSET&gt;</code>和<code class="codeph">&lt;ROW&gt;</code>格式更改为行业标准<code class="codeph">&lt;flight-list&gt;</code>和<code class="codeph">&lt;flight&gt;</code> 。
                        </p>
                        <p>XSLT样式表是一个模板，其中包含要在结果文档中生成的文字元素，例如<code class="codeph">&lt;flight-list&gt;</code> ， <code class="codeph">&lt;flight&gt;</code>和<code class="codeph">&lt;arrives&gt;</code> ，其中散布着XSLT操作，使您可以执行此操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">&lt;xsl:for-each&gt;</code>遍历源文档中的匹配元素</p>
                           </li>
                           <li>
                              <p>必要时使用<code class="codeph">&lt;xsl:value-of&gt;</code>插入源文档元素的<code class="codeph">&lt;xsl:value-of&gt;</code></p>
                           </li>
                           <li>
                              <p>使用<span class="italic"><code class="codeph">{some_parameter}</code></span>表示法将源文档元素的值插入属性值</p>
                           </li>
                        </ul>
                        <p>以下项目已添加到<a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__CACGCDCH">示例24-13</a>样式表中的顶级<code class="codeph">&lt;flight-list&gt;</code>元素中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">的xmlns：XSL = “http://www.w3.org/1999/XSL/Transform”</code></p>
                              <p>此属性定义名为<code class="codeph">xsl</code>的XML命名空间，并标识唯一标识XSLT规范的URL字符串。虽然它看起来就像一个URL，但请将字符串<code class="codeph">http://www.w3.org/1999/XSL/Transform</code>视为XSLT规范中定义的元素集的“全局主键”。定义命名空间后，您可以使用样式表中的<code class="codeph">&lt;xsl:XXX&gt;</code>操作元素在必要时循环和插入值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">XSL：版本= “1.0”</code></p>
                              <p>此属性将文档标识为XSLT 1.0样式表。所有XSLT样式表都需要一个版本属性，以使它们有效并由XSLT处理器识别。</p>
                           </li>
                        </ul>
                        <p>您可以通过添加<code class="codeph">&lt;?将<code class="codeph">flight-list.xsl</code>样式表与<a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">例24-3中</a>的<code class="codeph">AvailableFlightsToday.xsql</code>相关联<code class="codeph">&lt;?xml样式表？&gt;</code>指令页面顶部。<a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__CACBHJGD">例24-14</a>显示了这种技术。
                        </p>
                        <p>将XSLT样式表与XSQL页面相关联会导致请求程序或浏览器以您给出的<code class="codeph">flight-list.dtd</code>指定的格式查看XML。<a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__BABFFFEF">图24-6</a>显示了一个示例浏览器显示。
                        </p>
                        <div class="figure" id="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__BABFFFEF">
                           <p class="titleinfigure">图24-6 XML格式的XSQL页面结果</p><img src="img/xsql3.gif" width="455" alt="下面是图24-6的描述" title="下面是图24-6的描述" longdesc="img_text/xsql3.html"><br><a href="img_text/xsql3.html">“图24-6 XML格式的XSQL页面结果”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__CACGCDCH">
                        <p class="titleinexample">示例24-13 flight-list.xsl中的行业标准格式</p><pre class="pre codeblock"><code>&lt;！ -  XSLT样式表将ROWSET / ROW结果转换为航班列表格式 - &gt; &lt;flight-list xmlns：xsl =“http://www.w3.org/1999/XSL/Transform”xsl：version =“ 1.0“&gt; &lt;xsl：for-each select =”ROWSET / ROW“&gt; &lt;flight airline =”{CARRIER}“number =”{FLIGHTNUMBER}“&gt; &lt;到达&gt; &lt;xsl：value-of select =”DUE“/&gt; &lt;/到达&gt; &lt;/ flight&gt; &lt;/ xsl：for-each&gt; &lt;/ flight-list&gt;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__CACBHJGD">
                        <p class="titleinexample">示例24-14 flight-list.xsl中的样式表关联</p><pre class="pre codeblock"><code>&lt;？xml版本=“1.0”？&gt; <span class="bold">&lt;？xml-stylesheet type =“text / xsl”href =“flight-list.xsl”？&gt;</span> &lt;xsql：query connection =“demo”bind-params =“City”xmlns：xsql =“urn：oracle-xsql”&gt; SELECT Carrier，FlightNumber，Origin，TO_CHAR（ExpectedTime，'HH24：MI'）AS Due From FlightSchedule WHERE TRUNC（ExpectedTime）= TRUNC（SYSDATE）AND Arrived ='N'AND Destination =？/ *？是绑定变量绑定* / ORDER BY ExpectedTime / *到City参数的值* / &lt;/ xsql：query&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK19612"></a><a id="ADXDK19613"></a><a id="ADXDK19611"></a><div class="props_rev_3"><a id="GUID-6B5269E5-9455-44A0-8D33-C916D19793EB" name="GUID-6B5269E5-9455-44A0-8D33-C916D19793EB"></a><h4 id="ADXDK-GUID-6B5269E5-9455-44A0-8D33-C916D19793EB" class="sect4">将XML数据报转换为HTML以供显示</h4>
                  <div>
                     <p>要以HTML而不是替代XML格式返回XML数据，请使用适当的XSLT样式表。例如，您可以编写一个生成HTML元素（如<code class="codeph">&lt;table&gt;</code> ， <code class="codeph">&lt;tr&gt;</code>和<code class="codeph">&lt;td&gt;</code>的样式表，而不是生成<code class="codeph">&lt;flight-list&gt;</code>和<code class="codeph">&lt;flight&gt;</code>等元素。
                     </p>
                     <div class="section">
                        <p>然后，动态查询数据的结果看起来像<a href="using-XSQL-pages-publishing-framework.html#GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__BABCFBIB">图24-7</a>中<a href="using-XSQL-pages-publishing-framework.html#GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__BABCFBIB">所示</a>的HTML页面。XSQL页面不是返回原始XML数据，而是利用服务器端XSLT转换将信息格式化为HTML以便传递到浏览器。
                        </p>
                        <div class="figure" id="GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__BABCFBIB">
                           <p class="titleinfigure">图24-7使用XSLT样式表呈现HTML</p><img src="img/xsql4.gif" width="432" alt="下面是图24-7的描述" title="下面是图24-7的描述" longdesc="img_text/xsql4.html"><br><a href="img_text/xsql4.html">“图24-7使用XSLT样式表呈现HTML”的说明</a></div>
                        <!-- class="figure" -->
                        <p>与<code class="codeph">flight-list.xsl</code>样式表的语法类似， <a href="using-XSQL-pages-publishing-framework.html#GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__CACFBCBJ">例24-15中</a>显示的<code class="codeph">flight-display.xsl</code>样式表看起来像一个模板HTML页面。它包含<code class="codeph">&lt;xsl:for-each&gt;</code> ， <code class="codeph">&lt;xsl:value-of&gt;</code>和属性值模板（如<code class="codeph">{DUE}</code>以插入基础<code class="codeph">&lt;ROWSET&gt;</code>和<code class="codeph">&lt;ROW&gt;</code>结构化XML查询结果的动态值。
                        </p>
                        <div class="infoboxnote" id="GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__GUID-ED078DB0-1833-483A-AAA1-53480207A8A6">
                           <p class="notep1">注意：</p>
                           <p>样式表生成格式良好的HTML。每个开口标签都已正确关闭（例如， <code class="codeph">&lt;td&gt;</code> ... <code class="codeph">&lt;/td&gt;</code> ）;空标签使用XML空元素语法<code class="codeph">&lt;br/&gt;</code>而不仅仅是<code class="codeph">&lt;br&gt;</code> 。
                           </p>
                        </div>
                        <p>通过结合以下功能，您可以快速获得有用的结果：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>参数化SQL语句，用于从Oracle数据库中选择信息</p>
                           </li>
                           <li>
                              <p>行业标准XML作为便携式临时数据交换格式</p>
                           </li>
                           <li>
                              <p>XSLT将基于XML的数据报转换为任何基于XML或HTML的格式</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__CACFBCBJ">
                        <p class="titleinexample">示例24-15 flight-display.xsl中的查询结果</p><pre class="pre codeblock"><code>&lt;！ -  XSLT样式表将ROWSET / ROW结果转换为HTML  - &gt; &lt;html xmlns：xsl =“http://www.w3.org/1999/XSL/Transform”xsl：version =“1.0”&gt; &lt;head &gt; &lt;link rel =“stylesheet”type =“text / css”href =“flights.css”/&gt; &lt;/ head&gt; &lt;body&gt; &lt;center&gt; &lt;table border =“0”&gt; &lt;tr&gt; &lt;th&gt; Flight &lt; / th&gt; &lt;th&gt;到达&lt;/ th&gt; &lt;/ tr&gt; &lt;xsl：for-each select =“ROWSET / ROW”&gt; &lt;tr&gt; &lt;td&gt; &lt;table border =“0”cellspacing =“0”cellpadding =“ 4“&gt; &lt;tr&gt; &lt;td&gt; &lt;img align =”absmiddle“src =”images / {CARRIER} .gif“/&gt; &lt;/ td&gt; &lt;td width =”180“&gt; &lt;xsl：value-of select =” CARRIER“/&gt; &lt;xsl：text&gt; &lt;/ xsl：text&gt; &lt;xsl：value-of select =”FLIGHTNUMBER“/&gt; &lt;/ td&gt; &lt;/ tr&gt; &lt;/ table&gt; &lt;/ td&gt; &lt;td align =”center “&gt; &lt;xsl：value-of select =”DUE“/&gt; &lt;/ td&gt; &lt;/ tr&gt; &lt;/ xsl：for-each&gt; &lt;/ table&gt; &lt;/ center&gt; &lt;/ body&gt; &lt;/ html&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADXDK19615"></a><a id="ADXDK19614"></a><div class="props_rev_3"><a id="GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8" name="GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8"></a><h3 id="ADXDK-GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8" class="sect3">在Java程序中使用XSQL</h3>
               <div>
                  <p>类<code class="codeph">oracle.xml.xsql.XSQLRequest</code>允许您在Java程序中使用XSQL页面处理器。
                  </p>
                  <div class="section">
                     <p>要使用XSQL Java API，请执行以下基本步骤：</p>
                     <ol>
                        <li>
                           <p>构造一个<code class="codeph">XSQLRequest</code>实例，将要处理的XSQL页面作为以下组件之一传递给构造函数：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>包含页面URL的<code class="codeph">String</code></p>
                              </li>
                              <li>
                                 <p>页面的<code class="codeph">URL</code>对象</p>
                              </li>
                              <li>
                                 <p>内存中的<code class="codeph">XMLDocument</code></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>在对象上调用其中一个方法来处理页面：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">process()</code>将结果写入<code class="codeph">PrintWriter</code>或<code class="codeph">OutputStream</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">processToXML()</code>将结果作为XML文档返回</p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                     <p>要使用基于XSQL配置文件定义实现JDBC连接池的内置XSQL连接管理器，必须将XSQL页面传递给构造函数。或者，您也可以为<code class="codeph">XSQLConnectionManagerFactory</code>接口传递自定义实现。
                     </p>
                     <p>将XSQL页面作为内存中的<code class="codeph">XMLDocument</code>对象传递的能力意味着您可以动态生成任何有效的XSQL页面以进行处理。然后，您可以将页面传递给XSQL引擎进行评估。
                     </p>
                     <p>处理页面时，您可能希望在请求中执行这些附加任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将一组参数传递给请求。</p>
                           <p>您可以通过将实现<code class="codeph">Dictionary</code>接口的任何对象传递给<code class="codeph">process()</code>或<code class="codeph">processToXML()</code>方法来实现此目标。传递包含参数的<code class="codeph">HashTable</code>是一种流行的方法。
                           </p>
                        </li>
                        <li>
                           <p>设置要由页面处理的XML文档，就好像它是“发布的XML”消息正文一样。</p>
                           <p>您可以使用<code class="codeph">XSQLResquest.setPostedDocument()</code>方法执行此操作。
                           </p>
                        </li>
                     </ul>
                     <p><a href="using-XSQL-pages-publishing-framework.html#GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8__BABICHFJ">例24-16</a>显示了如何使用<code class="codeph">XSQLRequest</code>处理页面。</p>
                     <div class="infoboxnotealso" id="GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8__GUID-E83567D4-7DB2-442F-A6E3-502CC493B861">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="using-XSQL-pages-publishing-framework-advanced.html#GUID-02EA5758-7A8F-4FD7-B9F1-F346E759CD79" title="解释了如何使用XSQL页面发布框架的高级功能。">使用XSQL Pages Publishing Framework：高级主题</a>了解有关XSQL Java API的更多信息</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8__BABICHFJ">
                     <p class="titleinexample">例24-16 XSQLRequestSample类</p><pre class="pre codeblock"><code>import oracle.xml.xsql。XSQLRequest; import java.util。哈希表; import java.io.PrintWriter的; import java.net。网址; public class XSQLRequestSample {public static void main（String [] args）throws Exception {//构造XSQL页面URL的URL pageUrl = new URL（“file：/// C：/foo/bar.xsql”）; //构造一个新的XSQL页面请求XSQLRequest req = new XSQLRequest（pageUrl）; //设置一个命名参数的Hashtable以传递给请求Hashtable params = new Hashtable（3）; params.put（ “参数1”， “值1”）; params.put（ “param2的”， “值2”）; / *如果需要，将现有的内存中XMLDocument视为**作为请求req.setPostedDocument（myXMLDocument）的一部分发布到XSQL页面; ** * / //处理页面，传递参数并将输出//写入标准输出。req.process（params，new PrintWriter（System.out），new PrintWriter（System.err））; }}</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="using-XSQL-pages-publishing-framework-advanced.html#GUID-02EA5758-7A8F-4FD7-B9F1-F346E759CD79" title="解释了如何使用XSQL页面发布框架的高级功能。">使用XSQL Pages发布框架：高级主题</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="ADXDK1023"></a><a id="ADXDK19616"></a><div class="props_rev_3"><a id="GUID-39AD57EF-9921-4499-B796-986E8F970B29" name="GUID-39AD57EF-9921-4499-B796-986E8F970B29"></a><h3 id="ADXDK-GUID-39AD57EF-9921-4499-B796-986E8F970B29" class="sect3">XSQL页面提示和技巧</h3>
               <div>
                  <p>这里的主题提供有关使用XSQL页面的信息。</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19617"></a><div class="props_rev_3"><a id="GUID-89565131-8BC2-4451-B4A6-05F8363DA3F6" name="GUID-89565131-8BC2-4451-B4A6-05F8363DA3F6"></a><h4 id="ADXDK-GUID-89565131-8BC2-4451-B4A6-05F8363DA3F6" class="sect4">XSQL页面限制</h4>
                  <div>
                     <p>为XSQL页面指定了限制。</p>
                     <p>具有多字节名称的HTTP参数（例如名称为Kanji的参数）在使用元素<a href="XSQL-pages-reference.html#GUID-3F9C660B-10C2-4258-B5BB-7E5CEC4ACB23" title="描述了元素&lt;xsql：include-request-params&gt;。">&lt;xsql：include-request-params&gt;</a>插入XSQL页面时可以正确处理。尝试在<a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;</a>标记的查询语句中引用具有多字节名称的参数将返回参数值的空字符串。
                     </p>
                     <p>解决方法是，使用非多字节参数名称。该参数仍然可以具有可以正确处理的多字节值。</p>
                  </div>
               </div><a id="ADXDK1024"></a><a id="ADXDK19618"></a><div class="props_rev_3"><a id="GUID-0C47A9E6-C0B9-4837-A840-BDE2DB01742C" name="GUID-0C47A9E6-C0B9-4837-A840-BDE2DB01742C"></a><h4 id="ADXDK-GUID-0C47A9E6-C0B9-4837-A840-BDE2DB01742C" class="sect4">使用XSQL Servlet的提示</h4>
                  <div>
                     <p>这里的主题提供了使用XSQL Servlet的提示。</p>
                     <div class="section"> </div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19619"></a><div class="props_rev_3"><a id="GUID-EDD840F8-30DA-402B-B5A1-E518E01D121B" name="GUID-EDD840F8-30DA-402B-B5A1-E518E01D121B"></a><h5 id="ADXDK-GUID-EDD840F8-30DA-402B-B5A1-E518E01D121B" class="sect5">在将XSQL输出转换为WML文档时指定DTD</h5>
                     <div>
                        <p>您可以在将XSQL输出转换为无线应用程序的无线标记语言（WML）文档时指定DTD。该技术是使用名为<code class="codeph">&lt;xsl:output&gt;</code>的XSLT样式表的内置工具。一个例子说明了这一点
                        </p>
                        <div class="section"><pre class="pre codeblock"><code>&lt;xsl：stylesheet xmlns：xsl =“http://www.w3.org/1999/XSL/Transform”&gt; &lt;xsl：output type =“xml”doctype-system =“your.dtd”/&gt; &lt;xsl：template match =“/”&gt; &lt;/ xsl：template&gt; ...&lt;/ XSL：样式&gt;</code></pre><p>前面的样式表生成包含此代码的XML结果，其中<code class="codeph"><span class="codeinlineitalic">"your.dtd"</span></code>可以是任何有效的绝对或相对URL：</p>
                           <p><code class="codeph">&lt;！DOCTYPE xxxx SYSTEM <span class="codeinlineitalic">“your.dtd”</span> &gt;</code></p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19621"></a><a id="ADXDK19620"></a><div class="props_rev_3"><a id="GUID-0FBEA844-5452-43EE-A52F-E863026CECD7" name="GUID-0FBEA844-5452-43EE-A52F-E863026CECD7"></a><h5 id="ADXDK-GUID-0FBEA844-5452-43EE-A52F-E863026CECD7" class="sect5">XSQL页面中的测试条件</h5>
                     <div>
                        <p>您可以在XSQL页面中包含if-then逻辑。</p>
                        <div class="section">
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-0FBEA844-5452-43EE-A52F-E863026CECD7__CACBBJEG">示例24-17</a>示出了用于基于参数值的测试来执行查询的技术。
                           </p>
                           <div class="infoboxnotealso" id="GUID-0FBEA844-5452-43EE-A52F-E863026CECD7__GUID-042BDA18-FCA0-4CB2-9333-2B2CCC6A6EAA">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="XSQL-pages-reference.html#GUID-6CECB521-F70B-434A-AA73-EB2049F5E463" title="提供了XSQL页面框架的参考信息。">XSQL页面参考</a> ，了解<a href="XSQL-pages-reference.html#GUID-7B3A4D36-BB66-4FB0-85F9-33BC84CE6613" title="描述了元素&lt;xsql：if-param&gt;。">&lt;xsql：if-param&gt;</a>操作</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-0FBEA844-5452-43EE-A52F-E863026CECD7__CACBBJEG">
                           <p class="titleinexample">示例24-17 XSQL页面中的条件语句</p><pre class="oac_no_warn" dir="ltr">&lt;xsql：if-param name =“security”equals =“admin”&gt; &lt;xsql：query&gt; SELECT ....&lt;/ xsql：query&gt; &lt;/ xsq：when&gt; &lt;xsql：if-param name =“security”equals =“user”&gt; &lt;xsql：query&gt; SELECT ....&lt;/ xsql：query&gt; &lt;/ xsql：if-param&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19623"></a><a id="ADXDK19622"></a><div class="props_rev_3"><a id="GUID-DA6BD380-B724-4850-9278-AC2A2AAE389C" name="GUID-DA6BD380-B724-4850-9278-AC2A2AAE389C"></a><h5 id="ADXDK-GUID-DA6BD380-B724-4850-9278-AC2A2AAE389C" class="sect5">将查询结果传递给另一个查询的WHERE子句</h5>
                     <div>
                        <p>如果在XSQL页面中有两个查询，则可以使用页面参数在第二个查询中使用第一个查询的选择列表项的值。</p>
                        <div class="example" id="GUID-DA6BD380-B724-4850-9278-AC2A2AAE389C__CACCHFJC">
                           <p class="titleinexample">示例24-18在SQL查询中传递值</p><pre class="pre codeblock"><code>&lt;page xmlns：xsql =“urn：oracle-xsql”connection =“demo”&gt; &lt;！ - 页面参数“xxx”的值将是第一行的第一列 - &gt; &lt;xsql：set-page-param name = “xxx”&gt;选择一个FROM table1 WHERE ...&lt;/ xsl：set-param-param&gt; &lt;xsql：query bind-params =“xxx”&gt; SELECT col3，col4 FROM table2 WHERE col3 =？&lt;/ xsql：query&gt; &lt;/ page&gt;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19625"></a><a id="ADXDK19626"></a><a id="ADXDK19624"></a><div class="props_rev_3"><a id="GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48" name="GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48"></a><h5 id="ADXDK-GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48" class="sect5">处理多值HTML表单参数</h5>
                     <div>
                        <p>在某些情况下，您可能需要处理<code class="codeph">&lt;input name="choices" type="checkbox"&gt;</code>所需的多值HTML <code class="codeph">&lt;form&gt;</code>参数。在参数名称上使用参数数组表示法（例如， <code class="codeph">choices[]</code> ）以引用所选复选框中的值数组。
                        </p>
                        <div class="section">
                           <p>假设您有一个名为<code class="codeph">guy</code>的多值参数。您可以在XSQL页面中使用数组参数表示法，如<a href="using-XSQL-pages-publishing-framework.html#GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48__CACEDCAC">例24-19</a>所示。
                           </p>
                           <p>假设您使用此URL请求此页面，该URL包含多个同名参数以生成多值属性：</p><pre class="oac_no_warn" dir="ltr">http://yourserver.com/page.xsql?guy=Curly&amp;guy=Larry&amp;guy=Moe</pre><p>返回的页面如下所示：</p><pre class="oac_no_warn" dir="ltr">&lt;page&gt; &lt;guy-list&gt; Curly，Larry，Moe &lt;/ guy-list&gt; &lt;quoted-guys&gt;'Curly'，'Larry'，'Moe'&lt;/ quot-guys&gt; &lt;guy&gt; &lt;value&gt; Curly &lt;/ value&gt; &lt;value&gt; Larry &lt;/ value&gt; &lt;value&gt; Moe &lt;/ value&gt; &lt;/ guy&gt; &lt;/ page&gt;</pre><p>您还可以使用<a href="using-XSQL-pages-publishing-framework.html#GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48__BABDGEHI">示例24-20中</a>所示的代码在SQL语句<code class="codeph">WHERE</code>子句中使用多值页面参数的值。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48__CACEDCAC">
                           <p class="titleinexample">例24-19处理多值参数</p><pre class="oac_no_warn" dir="ltr">&lt;page xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：set-page-param name =“guy-list”value =“{@ guy []}”treat-list-as-array =“yes” /&gt; &lt;xsql：set-page-param name =“quoted-guys”value =“{@ guy []}”treat-list-as-array =“yes”quote-array-values =“yes”/&gt; &lt; xsql：include-param name =“guy-list”/&gt; &lt;xsql：include-param name =“quoted-guys”/&gt; &lt;xsql：include-param name =“guy []”/&gt; &lt;/ page&gt;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48__BABDGEHI">
                           <p class="titleinexample">示例24-20在SQL语句中使用多值页面参数</p><pre class="oac_no_warn" dir="ltr">&lt;page connection =“demo”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：set-page-param name =“quoted-guys”value =“{@ guy []}”treat-list-as- array =“yes”quote-array-values =“yes”/&gt; &lt;xsql：query&gt; SELECT * FROM sometable WHERE name IN（{@ quoted-guys}）&lt;/ xsql：query&gt; &lt;/ page&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19628"></a><a id="ADXDK19629"></a><a id="ADXDK19630"></a><a id="ADXDK19627"></a><div class="props_rev_3"><a id="GUID-95902839-0A64-4863-AF9F-59F31D67CF28" name="GUID-95902839-0A64-4863-AF9F-59F31D67CF28"></a><h5 id="ADXDK-GUID-95902839-0A64-4863-AF9F-59F31D67CF28" class="sect5">调用PL / SQL包装程序生成XML数据报</h5>
                     <div>
                        <p>描述了使用PL / SQL包装程序生成XML数据报。</p>
                        <div class="section">
                           <p>您不能通过使用<a href="XSQL-pages-reference.html#GUID-B44BC32C-50EF-480F-834E-062BD5AE4866" title="描述了元素&lt;xsql：dml&gt;。">&lt;xsql：dml&gt;</a>将它们绑定在<code class="codeph">OUT</code>变量的位置来设置参数值。绑定仅支持<code class="codeph">IN</code>参数。但是，您可以创建一个使用HTTP包构造XML元素的包装器过程。然后，您的XSQL页面可以使用<a href="XSQL-pages-reference.html#GUID-7F7A66D1-BFBB-402A-A2DD-C2A98349CAA7" title="描述了元素&lt;xsql：include-owa&gt;。">&lt;xsql：include-owa&gt;</a>调用包装程序。
                           </p>
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACHACFH">例24-21</a>显示了一个PL / SQL过程，它接受两个<code class="codeph">IN</code>参数，将它们相乘并将值放在一个<code class="codeph">OUT</code>参数中，然后将它们相加并将结果放入第二个<code class="codeph">OUT</code>参数。
                           </p>
                           <p>您可以编写<a href="using-XSQL-pages-publishing-framework.html#GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACJBBGC">例24-22中</a>的PL / SQL过程来包装<a href="using-XSQL-pages-publishing-framework.html#GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACHACFH">例24-21中</a>的过程。<code class="codeph">addmultwrapper</code>过程接受<code class="codeph">addmult</code>过程之前所期望的<code class="codeph">IN</code>参数，然后将<code class="codeph">OUT</code>值编码为打印到Open Web Analytics（OWA）页面缓冲区的XML数据报。
                           </p>
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACDIGJI">例24-23中</a>显示的XSQL页面通过包含对PL / SQL包装程序的调用来构造XML文档。
                           </p>
                           <p>您可以通过在浏览器中输入URL来调用<code class="codeph">addmult.xsql</code> ：</p><pre class="oac_no_warn" dir="ltr">http://yourserver.com/addmult.xsql?arg1=30&amp;arg2=45</pre><p>servlet返回的XML数据报反映了<code class="codeph">OUT</code>值：</p><pre class="oac_no_warn" dir="ltr">&lt;page&gt; &lt;addmult&gt; &lt;sum&gt; 75 &lt;/ sum&gt; &lt;product&gt; 1350 &lt;/ product&gt; &lt;/ addmult&gt; &lt;/ page&gt;</pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACHACFH">
                           <p class="titleinexample">例24-21 addmult PL / SQL过程</p><pre class="oac_no_warn" dir="ltr">创建或替换程序addmult（arg1 NUMBER，arg2 NUMBER，sumval OUT NUMBER，prodval OUT NUMBER）IS BEGIN sumval：= arg1 + arg2; prodval：= arg1 * arg2;结束;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACJBBGC">
                           <p class="titleinexample">例24-22 addmultwrapper PL / SQL过程</p><pre class="oac_no_warn" dir="ltr">创建或替换过程addmultwrapper（arg1 NUMBER，arg2 NUMBER）是sumval NUMBER; prodval NUMBER; xml VARCHAR2（2000）; BEGIN  - 使用OUT值addmult（arg1，arg2，sumval，prodval）调用该过程; - 然后生成编码OUT值xml：='&lt;addmult&gt;'||的XML '&lt;总和&gt;' || sumval || '&lt;/总和&gt;' || '&lt;产品&gt;' || prodval || '&lt;/产物&gt;' || '&lt;/ addmult&gt;'; - 将XML结果打印到OWA页面缓冲区以返回HTP.P（xml）;结束;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACDIGJI">
                           <p class="titleinexample">例24-23 addmult.xsql</p><pre class="oac_no_warn" dir="ltr">&lt;page connection =“demo”xmlns：xsql =“urn：oracle-xsql”&gt; &lt;xsql：include-owa bind-params =“arg1 arg2”&gt; BEGIN addmultwrapper（？，？）;结束; &lt;/ xsql：include-owa&gt; &lt;/ page&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19631"></a><div class="props_rev_3"><a id="GUID-A51F8AD9-CF09-4903-9479-BDE41EC917B0" name="GUID-A51F8AD9-CF09-4903-9479-BDE41EC917B0"></a><h5 id="ADXDK-GUID-A51F8AD9-CF09-4903-9479-BDE41EC917B0" class="sect5">访问发布XML的内容</h5>
                     <div>
                        <p>XSQL页面处理器可以访问发布的XML的内容。任何XML文档都可以通过XSQL支持的功能发布和处理。</p>
                        <div class="section">
                           <p>例如，XSQL页面可以使用<a href="XSQL-pages-reference.html#GUID-002F1541-47DD-4C9B-A0D3-8F45A5D3A51F" title="描述了元素&lt;xsql：set-page-param&gt;。">&lt;xsql：set-page-param&gt;</a>操作中的<code class="codeph">xpath=</code> “ <span class="italic"><code class="codeph">XpathExpression</code></span> ”属性来访问入站SOAP消息的内容。或者，自定义操作处理程序可以通过调用<code class="codeph">getPageRequest().getPostedDocument()</code>来直接访问SOAP消息体。要创建SOAP响应主体以返回到客户端，请使用XSLT样式表或自定义序列化程序实现以适当的SOAP编码格式编写XML响应。
                           </p>
                           <div class="infoboxnotealso" id="GUID-A51F8AD9-CF09-4903-9479-BDE41EC917B0__GUID-BD0ACBA9-AD29-462C-A4A1-7D15EA06B83B">
                              <p class="notep1">也可以看看：</p>
                              <p>机场SOAP演示，以获取使用XSQL页面实现基于SOAP的Web服务的示例</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19632"></a><div class="props_rev_3"><a id="GUID-EF677A81-8330-4659-BAF1-3ABE06E745E2" name="GUID-EF677A81-8330-4659-BAF1-3ABE06E745E2"></a><h5 id="ADXDK-GUID-EF677A81-8330-4659-BAF1-3ABE06E745E2" class="sect5">动态更改数据库连接</h5>
                     <div>
                        <p>您可以在调用XSQL页面时动态选择数据库连接。例如，您可能希望在测试数据库和生产数据库之间切换。您可以通过在XSQL页面的<code class="codeph">connection</code>属性中包含XSQL参数来实现此目标。
                        </p>
                        <div class="section">
                           <p>定义同名属性以用作连接名称的默认值。</p>
                           <p>假设您在XSQL配置文件中定义了数据库<code class="codeph">testdb</code>和<code class="codeph">proddb</code>连接。然后使用此<a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;</a>元素编写XSQL页面：</p><pre class="oac_no_warn" dir="ltr">&lt;xsql：query conn =“testdb”connection =“{@ conn}”xmlns：xsql =“urn：oracle-xsql”&gt; ...&lt;/ XSQL：查询&gt;</pre><p>如果您在没有任何参数的情况下请求此页面，则<code class="codeph">conn</code>参数的值为<code class="codeph">testdb</code> ，因此该页面使用XSQL配置文件中定义的名为<code class="codeph">testdb</code>的连接。如果您使用<code class="codeph">conn=proddb</code>请求页面，则页面将使用名为<code class="codeph">proddb</code>的连接。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19634"></a><a id="ADXDK19633"></a><div class="props_rev_3"><a id="GUID-FCA948AE-AC87-4B0E-940C-2E89CECF407C" name="GUID-FCA948AE-AC87-4B0E-940C-2E89CECF407C"></a><h5 id="ADXDK-GUID-FCA948AE-AC87-4B0E-940C-2E89CECF407C" class="sect5">检索当前XSQL页面的名称</h5>
                     <div>
                        <p>XSQL页面可以在运行时以通用方式访问自己的名称，以构建指向当前页面的链接。</p>
                        <div class="section">
                           <p>您可以使用<a href="using-XSQL-pages-publishing-framework.html#GUID-FCA948AE-AC87-4B0E-940C-2E89CECF407C__CACGCDHC">示例24-24中</a>所示的辅助方法来检索自定义操作处理程序中的页面名称。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-FCA948AE-AC87-4B0E-940C-2E89CECF407C__CACGCDHC">
                           <p class="titleinexample">示例24-24获取当前XSQL页面的名称</p><pre class="oac_no_warn" dir="ltr">private String curPageName（XSQLPageRequest req）{String thisPage = req.getSourceDocumentURI（）;; int pos = thisPage.lastIndexOf（'/'）; if（pos&gt; = 0）thisPage = thisPage.substring（pos + 1）; pos = thisPage.indexOf（'？“）; if（pos&gt; = 0）thisPage = thisPage.substring（0，pos-1）;返回本页; }</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADXDK1025"></a><a id="ADXDK19635"></a><div class="props_rev_3"><a id="GUID-B3D7919E-53B3-4CF9-9531-5A884ADDD323" name="GUID-B3D7919E-53B3-4CF9-9531-5A884ADDD323"></a><h4 id="ADXDK-GUID-B3D7919E-53B3-4CF9-9531-5A884ADDD323" class="sect4">解决常见的XSQL连接错误</h4>
                  <div>
                     <p>这里的主题包括接收无法连接和无发布文档错误。</p>
                     <div class="section"> </div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19636"></a><div class="props_rev_3"><a id="GUID-3D8EE2AE-61D5-4666-B0D2-D19E69F89628" name="GUID-3D8EE2AE-61D5-4666-B0D2-D19E69F89628"></a><h5 id="ADXDK-GUID-3D8EE2AE-61D5-4666-B0D2-D19E69F89628" class="sect5">收到“无法连接”错误</h5>
                     <div>
                        <p>接收错误的原因是您无法连接。</p>
                        <p>假设您无法连接到数据库，并且在运行<code class="codeph">helloworld.xsql</code>示例程序时看到与这些类似的错误：</p><pre class="oac_no_warn" dir="ltr">Oracle XSQL Servlet页面处理器XSQL-007：无法获取与进程页面的数据库连接。连接被拒绝（DESCRIPTION =（TMP =）（VSNNUM = 135286784）（ERR = 12505）（ERROR_STACK =（ERROR =（CODE = 12505）（EMFI = 4））））</pre><p>前面的错误表明XSQL servlet正在尝试基于名为<code class="codeph">demo</code>的连接的<code class="codeph">&lt;connectiondef&gt;</code>信息进行JDBC连接，假设您没有修改<code class="codeph">helloworld.xsql</code>演示页面。
                        </p>
                        <p>默认情况下， <code class="codeph">XSQLConfig.xml</code>文件附带<code class="codeph">demo</code>连接的条目，如下所示（使用正确的密码）：</p><pre class="oac_no_warn" dir="ltr">&lt;connection name =“demo”&gt; &lt;username&gt; scott &lt;/ username&gt; &lt;password&gt; <span class="italic">password</span> &lt;/ password&gt; &lt;dburl&gt; jdbc：oracle：thin：@localhost：1521：ORCL &lt;/ dburl&gt; &lt;driver&gt; oracle.jdbc。驱动程序。OracleDriver &lt;/ driver&gt; &lt;/ connection&gt;</pre><p>该错误可能是由于以下原因之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您的数据库不在<code class="codeph">localhost</code>计算机上。
                              </p>
                           </li>
                           <li>
                              <p>您的数据库<code class="codeph">SID</code>不是<code class="codeph">ORCL.</code></p>
                           </li>
                           <li>
                              <p>您的TNS侦听器端口不是<code class="codeph">1521</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADXDK19637"></a><div class="props_rev_3"><a id="GUID-30B536C8-D425-48B6-A3E5-AFD681893FF0" name="GUID-30B536C8-D425-48B6-A3E5-AFD681893FF0"></a><h5 id="ADXDK-GUID-30B536C8-D425-48B6-A3E5-AFD681893FF0" class="sect5">使用HTTP POST时接收“未发布文档进行处理”</h5>
                     <div>
                        <p>如果您尝试将XML信息发布到XSQL页面以使用HTTP <code class="codeph">GET</code>而不是HTTP <code class="codeph">POST</code>进行处理，那么就没有发布的文档，并且您会收到“No posting documents to process”错误。
                        </p>
                        <div class="section">
                           <p>发布到XSQL页面进行处理的XML信息必须通过HTTP <code class="codeph">POST</code>发送。这种传输可以通过HTTP <code class="codeph">POST</code>发送的HTML表单或XML文档来实现。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADXDK19638"></a><div class="props_rev_3"><a id="GUID-338D0A70-3F60-4708-9D8E-54C8D87E93DE" name="GUID-338D0A70-3F60-4708-9D8E-54C8D87E93DE"></a><h4 id="ADXDK-GUID-338D0A70-3F60-4708-9D8E-54C8D87E93DE" class="sect4">XSQL页面的安全注意事项</h4>
                  <div>
                     <p>涵盖了管理XSQL servlet中的安全性的最佳实践。</p>
                  </div><a id="ADXDK19639"></a><div class="props_rev_3"><a id="GUID-571FDEF8-59DE-4428-BBCB-6778E82D33EB" name="GUID-571FDEF8-59DE-4428-BBCB-6778E82D33EB"></a><h5 id="ADXDK-GUID-571FDEF8-59DE-4428-BBCB-6778E82D33EB" class="sect5">在安全目录中安装XSQL配置文件</h5>
                     <div>
                        <p><code class="codeph">XSQLConfig.xml</code>配置文件包含敏感数据库用户名和密码信息。此文件不得驻留在映射到Web服务器的虚拟路径的任何目录中，也不得驻留在其任何子目录中。
                        </p>
                        <div class="section">
                           <p>配置文件唯一需要的权限是授予拥有servlet引擎的UNIX帐户的读取权限。不遵循此建议可能意味着您站点的用户可以浏览配置文件的内容，从而获取数据库帐户的密码。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19640"></a><div class="props_rev_3"><a id="GUID-BA3FEFC8-77AD-4A24-A635-6C715268C313" name="GUID-BA3FEFC8-77AD-4A24-A635-6C715268C313"></a><h5 id="ADXDK-GUID-BA3FEFC8-77AD-4A24-A635-6C715268C313" class="sect5">禁用默认客户端样式表覆盖</h5>
                     <div>
                        <p>默认情况下，XSQL页面处理器允许您通过传递参数<code class="codeph">xml-stylesheet</code>的值来在页面请求中提供<code class="codeph">xml-stylesheet</code> 。如果您希望服务器端XSQL页面引用的样式表是唯一的合法样式表，那么在页面的文档元素上包含属性<code class="codeph">allow-client-style="no"</code> 。
                        </p>
                        <div class="section">
                           <p>您还可以全局更改<code class="codeph">XSQLConfig.xml</code>文件中的默认设置，以禁止客户端样式表覆盖。如果采用任一方法，则允许客户端样式表覆盖的唯一页面<code class="codeph">allow-client-style="yes"</code>在其文档元素上包含<code class="codeph">allow-client-style="yes"</code>属性的页面。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19641"></a><div class="props_rev_3"><a id="GUID-556A8496-0C26-47F1-8F56-8A528A98F49D" name="GUID-556A8496-0C26-47F1-8F56-8A528A98F49D"></a><h5 id="ADXDK-GUID-556A8496-0C26-47F1-8F56-8A528A98F49D" class="sect5">防止滥用替代参数</h5>
                     <div>
                        <p>描述了一些预防措施，可帮助您避免滥用替代变量。</p>
                        <div class="section">
                           <p>任何支持在SQL查询中使用词法替换变量的产品都可能导致开发人员出现问题。每当您部署允许所有SQL语句的一部分被词法参数替换的XSQL页面时，您必须确保已采取适当的预防措施以防止滥用。</p>
                           <p>例如，XSQL Pages附带的演示之一是Adhoc Query Demo。它显示了如何将<a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="描述了元素&lt;xsql：query&gt;。">&lt;xsql：query&gt;</a>操作处理程序的整个SQL语句作为参数提供。在右手操作时，此技术是一个功能强大且有益的工具，但如果您将类似的页面部署到生产系统，则用户可以执行任何与页面关联的连接的数据库安全权限允许的查询。例如，Adhoc Query Demo设置为使用映射到<code class="codeph">scott</code>帐户的连接，因此用户可以查询<code class="codeph">scott</code>将允许从SQL * Plus查询的任何数据。
                           </p>
                           <p>您可以使用这些技术来确保您的页面不被滥用：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>确保与页面关联的数据库用户帐户仅具有读取您希望用户查看的表和视图的权限。</p>
                              </li>
                              <li>
                                 <p>在<code class="codeph">SELECT</code>语句中替换单个值时，请使用true绑定变量而不是lexical绑定变量。如果必须参数化SQL语句的语法部分，那么词法参数是唯一的继续方法。否则，使用true绑定变量，以便任何传递无效值的尝试都会生成错误，而不是产生意外结果。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
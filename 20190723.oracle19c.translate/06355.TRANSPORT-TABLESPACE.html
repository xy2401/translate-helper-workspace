<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>TRANSPORT TABLESPACE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="SWITCH.html" title="Previous" type="text/html"></link>
      <link rel="next" href="UNREGISTER.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference"></meta>
    <meta name="dcterms.isVersionOf" content="RCMRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SWITCH.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="UNREGISTER.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-recover-to-validate.html" property="item" typeof="WebPage"><span property="name">RMAN命令：RECOVER to VALIDATE</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">TRANSPORT TABLESPACE</li>
            </ol>
            <a id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D" name="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D"></a><a id="RCMRF90378"></a><a id="RCMRF90379"></a><a id="RCMRF90380"></a><a id="RCMRF90381"></a><a id="RCMRF90382"></a><a id="RCMRF90383"></a><a id="RCMRF90384"></a><a id="RCMRF90385"></a><a id="RCMRF90386"></a><a id="RCMRF1919"></a>
            
            <h2 id="RCMRF-GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D" class="sect2"><span class="enumeration_section">3.22</span>运输表格</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-6F7F279D-020E-4086-89BE-E47B076DDB8F">目的</p>
                  <p>使用<code class="codeph">TRANSPORT TABLESPACE</code>命令从RMAN备份创建可传输的表空间集，而不是源数据库的实时数据文件。
                  </p>
                  <div class="infoboxnotealso" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-A345E258-6358-455E-8644-DA60E0274D1E">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../bradv/creating-transportable-tablespace-sets.html#BRADV05141" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南</span></a> ，了解如何使用RMAN传输表空间</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-C927F71C-DD0B-46B4-B676-0AAFFA9551F7">先决条件</p>
                  <p><a href="../admin/transporting-data.html#ADMIN01101" target="_blank"><span class="italic">Oracle数据库管理员指南中</span></a>描述的创建可传输表空间集的限制适用于从备份传输表空间，但要求使表空间为只读。
                  </p>
                  <p>该<a id="d103847e143" class="indexterm-anchor"></a> <code class="codeph">SYSAUX</code>表空间不能是恢复集的一部分，恢复集是要传输的表空间集。RMAN强制在辅助集中包含<code class="codeph">SYSAUX</code>表空间，辅助集包含表空间传输所需的数据文件和其他文件。
                  </p>
                  <p><code class="codeph">TRANSPORT TABLESPACE</code>不会转换<a id="d103847e155" class="indexterm-anchor"></a> endian格式。如果目标平台具有不同的endian格式，则在运行<code class="codeph">TRANSPORT TABLESPACE</code>使用<code class="codeph"><a href="CONVERT.html#GUID-AD252F46-DD9E-4E2C-BF0E-DF2A4C7590C9">CONVERT</a></code>命令转换可传输集数据文件的endian格式。
                  </p>
                  <p>如果删除表空间，则以后不能使用<code class="codeph">TRANSPORT TABLESPACE</code>将此表空间包含在可传输表空间集中，即使<code class="codeph">TRANSPORT TABLESPACE</code>的SCN早于删除表的SCN也是如此。如果重命名表空间，则无法使用<code class="codeph">TRANSPORT TABLESPACE</code>创建可重定位表空间之前的时间点的可传输表空间集。
                  </p>
                  <p><span class="bold">备份和备份元数据</span></p>
                  <p>您必须备份所有需要的表空间（包括辅助集中的表空间）和恢复到目标时间点所需的归档重做日志文件。</p>
                  <p>如果不使用恢复目录，并且数据库已重新使用包含有关所需备份的元数据的控制文件记录，则该命令将失败，因为RMAN无法找到备份。您可以使用<code class="codeph"><a href="CATALOG.html#GUID-6E337759-9860-463A-BF7C-8512B272B8E1">CATALOG</a></code>将备份添加到RMAN存储库，但如果数据库正在覆盖控制文件记录，则可能会丢失其他备份的记录。
                  </p>
                  <p><span class="bold">数据泵导出和导入</span></p>
                  <p>因为RMAN使用了<a id="d103847e196" class="indexterm-anchor"></a>数据泵导出和导入实用程序，如果要传输的表空间使用，则不能使用<code class="codeph">TRANSPORT TABLESPACE</code> <a id="d103847e202" class="indexterm-anchor"></a> <code class="codeph">XMLType</code> 。在这种情况下，您必须使用<a href="../admin/transporting-data.html#ADMIN01101" target="_blank"><span class="italic">Oracle数据库管理员指南中的过程</span></a> 。
                  </p>
                  <p>如果表空间目标中存在导出转储文件名称下的文件，则<code class="codeph">TRANSPORT TABLESPACE</code>在调用Data Pump Export时失败。如果要重复以前的<code class="codeph">TRANSPORT TABLESPACE</code>作业，请确保删除以前的输出文件，包括导出转储文件。
                  </p>
                  <p><span class="bold">表空间和列加密</span></p>
                  <p><a id="d103847e225" class="indexterm-anchor"></a>以下数据库加密功能都使用<a id="d103847e228" class="indexterm-anchor"></a> Oracle软件密钥库：透明数据加密（TDE）列加密，其功能在列级别，以及TDE表空间加密。请注意对加密或包含加密列的表空间的以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果要传输加密的表空间，则必须手动将密钥库复制到目标数据库。</p>
                     </li>
                     <li>
                        <p>如果目标数据库具有现有密钥库，则无法将密钥库从源数据库复制到目标数据库。因此，您无法将加密数据传输到已具有密钥库的数据库。如果使用TDE列加密对列进行加密，则可以将它们导出到受密码保护的导出文件中，并将数据导入目标数据库。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-AD8E3593-6EA3-496B-9BF0-818C297ABBB1">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../asoag/introduction-to-transparent-data-encryption.html#ASOAG10139" target="_blank"><span class="italic">Oracle数据库高级安全指南</span></a>了解TDE</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-467DBE8E-5D09-43B7-9625-D4F492900360">使用说明</p>
                  <p>由于RMAN在与源实例相同的节点上创建用于还原和恢复的自动辅助实例，因此在运行<code class="codeph">TRANSPORT TABLESPACE</code>命令期间会有一些性能开销。
                  </p>
                  <p>如果RMAN不是数据库备份策略的一部分，那么如果所需的数据文件副本和归档重做日志文件在磁盘上可用，您仍然可以使用<code class="codeph">TRANSPORT TABLESPACE</code> 。使用<code class="codeph"><a href="CATALOG.html#GUID-6E337759-9860-463A-BF7C-8512B272B8E1">CATALOG</a></code>命令在RMAN存储库中记录数据文件副本和归档重做日志文件。然后，您可以使用<code class="codeph">TRANSPORT TABLESPACE</code> 。您还可以选择使用RMAN专门备份数据库，以便可以使用<code class="codeph">TRANSPORT TABLESPACE</code> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-D2579752-A21C-4735-8631-CEE4447217DA">句法</p>
                  <p><a id="d103847e273" class="indexterm-anchor"></a><a id="d103847e277" class="indexterm-anchor"></a> <span class="bold"><span class="italic">transpt_tbs</span> :: =</span></p>
                  <div class="figure" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-88789C56-01DB-4EFF-883D-504E157DDFAA"><img src="img/transpt_tbs.gif" alt="transpt_tbs.eps的描述如下" title="transpt_tbs.eps的描述如下" longdesc="img_text/transpt_tbs.html"><br><a href="img_text/transpt_tbs.html">transpt_tbs.eps插图的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="TRANSPORT-TABLESPACE.html#GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__CHDHCFHG">transpt_tbs_optlist :: =</a></span> ）</p>
                  <p id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__CHDHCFHG"><a id="d103847e295" class="indexterm-anchor"></a><a id="d103847e299" class="indexterm-anchor"></a> <span class="bold"><span class="italic">transpt_tbs_optlist</span> :: =</span></p>
                  <div class="figure" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-1F68C5FC-930F-428D-9BA3-F8C2BB1341C0"><img src="img/transpt_tbs_optlist.gif" alt="transpt_tbs_optlist.eps的描述如下" title="transpt_tbs_optlist.eps的描述如下" longdesc="img_text/transpt_tbs_optlist.html"><br><a href="img_text/transpt_tbs_optlist.html">transpt_tbs_optlist.eps插图的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABEDABD">untilClause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-D0D7ECA8-A82D-4BA2-8042-D8AEE71D726B">语义</p>
                  <p id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__CHDEAJHF"><span class="bold"><span class="italic">transpt_tbs</span></span></p>
                  <div class="tblformalwide" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-19F31BEE-99B1-4CC1-B316-4904DD5F808B">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes TRANSPORT TABLESPACE command transpt_tbs parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d103847e331">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d103847e334">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d103847e339" headers="d103847e331 ">
                                 <p><span class="italic"><code class="codeph">TABLESPACE_NAME</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d103847e339 d103847e334 ">
                                 <p>指定要传输的每个表空间的名称。</p>
                                 <p>您必须备份所有需要的表空间（包括辅助集中的表空间）和可供RMAN使用的归档重做日志文件，这些文件可以恢复到<code class="codeph">TRANSPORT TABLESPACE</code>操作的目标时间。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__CHDFHFFI"><span class="bold"><span class="italic">transpt_tbs_optlist</span></span></p>
                  <p>本小节指定了影响表空间传输的可选参数。</p>
                  <div class="tblformalwide" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-E664F78D-731E-400B-99EC-854F40236C1A">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes TRANSPORT TABLESPACE command transpt_tbs_optlist parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d103847e366">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d103847e369">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d103847e374" headers="d103847e366 "><code class="codeph">AUXILIARY DESTINATION</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">location</code></span> <code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d103847e374 d103847e369 ">
                                 <p>指定辅助实例的文件位置。</p>
                                 <p>您可以使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME</code>和<code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">AUXNAME</code>覆盖单个文件的此参数。如果使用您自己的初始化参数文件来自定义辅助实例，那么您可以使用<a id="d103847e405" class="indexterm-anchor"></a><a id="d103847e407" class="indexterm-anchor"></a> <code class="codeph">DB_FILE_NAME_CONVERT</code>和<a id="d103847e415" class="indexterm-anchor"></a><a id="d103847e417" class="indexterm-anchor"></a> <code class="codeph">LOG_FILE_NAME_CONVERT</code>初始化参数而不是<code class="codeph">AUXILIARY DESTINATION</code> 。</p>
                                 <p><span class="bold">另请参阅：“</span> <a href="../bradv/creating-transportable-tablespace-sets.html#BRADV39711" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”，</span></a>以获取有关命名辅助实例文件的不同技术之间交互的详细信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d103847e437" headers="d103847e366 "><a id="d103847e438" class="indexterm-anchor"></a> <code class="codeph">DATAPUMP DIRECTORY</code> <span class="italic"><code class="codeph">datapump_directory</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d103847e437 d103847e369 ">
                                 <p>指定创建数据泵导出输出的数据库目录对象（请参见<a href="TRANSPORT-TABLESPACE.html#GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__CHDFIDHD">示例3-79</a> ）。如果未指定，则RMAN将在<code class="codeph">TABLESPACE</code> <code class="codeph">DESTINATION</code>指定的位置创建文件。</p>
                                 <p><span class="bold">另请参阅：</span> <a href="../sutil/oracle-data-pump-export-utility.html#SUTIL-GUID-5F7380CE-A619-4042-8D13-1F7DDE429991" target="_blank"><span><cite>Oracle数据库实用程序，</cite></span></a>以获取有关Data Pump Export和数据库目录对象的更多详细信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d103847e467" headers="d103847e366 ">
                                 <p><code class="codeph">DUMP FILE</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d103847e467 d103847e369 ">
                                 <p>指定创建数据泵导出转储文件的位置。如果未指定，则导出转储文件名为<code class="codeph">dmpfile.dmp</code>并存储在<code class="codeph">DATAPUMP DIRECTORY</code>子句指定的位置或表空间目标中。
                                 </p>
                                 <p><span class="bold">注意：</span>如果表空间目标中存在导出转储文件名称下的文件，则<code class="codeph">TRANSPORT TABLESPACE</code>在调用Data Pump Export时失败。如果要重复以前的<code class="codeph">TRANSPORT TABLESPACE</code>作业，请确保删除以前的输出文件，包括导出转储文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d103847e499" headers="d103847e366 ">
                                 <p><a id="d103847e501" class="indexterm-anchor"></a> <code class="codeph">EXPORT LOG</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d103847e499 d103847e369 ">
                                 <p>指定Data Pump Export生成的日志的位置。如果省略，则导出日志名为<code class="codeph">explog.log</code>并存储在<code class="codeph">DATAPUMP DIRECTORY</code>子句指定的位置或表空间目标中。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d103847e523" headers="d103847e366 ">
                                 <p><a id="d103847e525" class="indexterm-anchor"></a> <code class="codeph">IMPORT SCRIPT</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d103847e523 d103847e369 ">
                                 <p>指定RMAN生成的示例输入脚本的文件名，以用于在目标数据库中插入传输的表空间。如果省略，则导入脚本名为<code class="codeph">impscript.sql</code> 。该脚本存储在表空间目标中。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d103847e544" headers="d103847e366 "><a id="d103847e545" class="indexterm-anchor"></a> <code class="codeph">TABLESPACE DESTINATION</code> <span class="italic"><code class="codeph">tablespace_destination</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d103847e544 d103847e369 ">
                                 <p>在表空间传输操作完成后，指定传输的表空间的数据文件的位置。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d103847e557" headers="d103847e366 "><a id="d103847e558" class="indexterm-anchor"></a><a id="d103847e562" class="indexterm-anchor"></a> <code class="codeph">TO RESTORE POINT</code> <span class="italic"><code class="codeph">restore_point_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d103847e557 d103847e369 ">
                                 <p>指定表空间还原和恢复的还原点，其中创建还原点的SCN为包含上限的上限。由于限制是包含的，因此RMAN仅选择可用于还原或恢复表空间的文件， <span class="italic">包括</span>与还原点对应的SCN。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d103847e579" headers="d103847e366 ">
                                 <p><span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d103847e579 d103847e369 ">
                                 <p>指定过去时间，SCN或日志序列号（请参阅<a href="TRANSPORT-TABLESPACE.html#GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__CHDBHIHJ">示例3-78</a> ）。如果指定，RMAN会在导出之前的过去某个时间点将辅助实例的表空间恢复并恢复到其内容。
                                 </p>
                                 <p>如果重命名表空间，则无法使用此命令创建在重命名表空间之前的某个时间点设置的可传输表空间。RMAN不知道表空间的先前名称。</p>
                                 <p>表空间（包括<code class="codeph">UNTIL</code>时间的撤消段或<code class="codeph">TRANSPORT TABLESPACE</code> SCN）必须是辅助集的一部分。控制文件仅包含表空间的记录，这些表空间包含当前时间的还原段。如果具有还原段的表空间集在<code class="codeph">UNTIL</code>时间或SCN处不同，则<code class="codeph">TRANSPORT TABLESPACE</code>失败。因此，如果在<code class="codeph">NOCATALOG</code>模式下使用RMAN并指定<code class="codeph">UNTIL</code> ，则在<code class="codeph">TRANSPORT TABLESPACE</code>执行时具有还原段的表空间集必须等于在<code class="codeph">UNTIL</code>时间或SCN处具有还原段的表空间集。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__GUID-9CC02962-3D33-45D8-88E8-7592B316B5AA">例子</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__CHDBHIHJ">
                  <p class="titleinexample">例3-78使用带有过去时间的TRANSPORT TABLESPACE</p>
                  <p>在此示例中，可传输集的表空间是<code class="codeph">example</code>和<code class="codeph">tools</code> ，可传输集文件将存储在<code class="codeph">/disk1/transport_dest</code> ，可传输表空间将恢复到15分钟前的时间：</p><pre class="oac_no_warn" dir="ltr">TRANSPORT TABLESPACE例子，工具TABLESPACE DESTINATION'/ disk1 / transportdest'AUXILIARY DESTINATION'/ disk1 / auxdest'UNTIL TIME'SYSDATE-15/1440';</pre><p>部分样本输出如下：</p><pre class="oac_no_warn" dir="ltr">创建自动实例，SID ='egnr'用于自动实例的初始化参数：db_name = PROD compatible = 11.0.0 db_block_size = 8192。。。启动自动实例PROD。。。执行内存脚本执行命令：SET until子句在07-JUN-13分配通道开始恢复：ORA_AUX_DISK_1通道ORA_AUX_DISK_1：SID = 44设备类型= DISK通道ORA_AUX_DISK_1：启动数据文件备份集恢复通道ORA_AUX_DISK_1：恢复控制文件。。。输出文件名= / disk1 / auxdest / cntrl_tspitr_PROD_egnr.f在07-JUN-13 sql语句完成恢复：alter database mount clone database sql语句：alter system archive log当前sql语句：begin dbms_backup_restore。AutoBackupFlag（FALSE）;结束;启动完全重新同步恢复目录完全重新同步完成。。。执行内存脚本。。。使用通道ORA_AUX_DISK_1通道ORA_AUX_DISK_1在07-JUN-13开始恢复：启动数据文件备份集恢复通道ORA_AUX_DISK_1：指定要从备份集通道恢复的数据文件ORA_AUX_DISK_1：将数据文件00001恢复到/ disk1 / auxdest / TSPITR_PROD_EGNR / datafile / o1_mf_system_％ u_.dbf数据文件1切换到数据文件副本。。。开始媒体恢复。。。在07-JUN-13数据库打开后完成恢复。。。执行内存脚本。。。sql语句：alter tablespace示例只读删除自动实例关闭自动实例Oracle实例关闭自动实例删除辅助实例文件/disk1/auxdest/cntrl_tspitr_PROD_egnr.f已删除。。。</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D__CHDFIDHD">
                  <p class="titleinexample">示例3-79将TRANSPORT TABLESPACE与自定义文件位置一起使用</p>
                  <p>此示例说明了使用可选参数来控制与数据泵相关的文件（如转储文件）的位置。<code class="codeph">DATAPUMP DIRECTORY</code>必须引用目标数据库中存在的对象。使用<code class="codeph">CREATE DIRECTORY</code> SQL语句创建目录对象。
                  </p><pre class="oac_no_warn" dir="ltr">TRANSPORT TABLESPACE示例TABLESPACE DESTINATION'/ disk1 / transportdest'AUXILIARY DESTINATION'/ disk1 / auxdest'DATAPUMP DIRECTORY mypumpdir DUMP FILE'mydumpfile.dmp'ImpORT SCRIPT'myimportscript.sql'EXPORT LOG'myexportlog.log';</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
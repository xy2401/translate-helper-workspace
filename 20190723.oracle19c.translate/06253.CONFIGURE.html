<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>配置</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="CHANGE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="CONNECT.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference"></meta>
    <meta name="dcterms.isVersionOf" content="RCMRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CHANGE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="CONNECT.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-at-sign-to-quit.html" property="item" typeof="WebPage"><span property="name">RMAN命令：@（at符号）到QUIT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">配置</li>
            </ol>
            <a id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A" name="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A"></a><a id="RCMRF90071"></a><a id="RCMRF90072"></a><a id="RCMRF90073"></a><a id="RCMRF90074"></a><a id="RCMRF90075"></a><a id="RCMRF90076"></a><a id="RCMRF90077"></a><a id="RCMRF90079"></a><a id="RCMRF90080"></a><a id="RCMRF90081"></a><a id="RCMRF90082"></a><a id="RCMRF90083"></a><a id="RCMRF90084"></a><a id="RCMRF90085"></a><a id="RCMRF90086"></a><a id="RCMRF90087"></a><a id="RCMRF90088"></a><a id="RCMRF90089"></a><a id="RCMRF90090"></a><a id="RCMRF90091"></a><a id="RCMRF90092"></a><a id="RCMRF90093"></a><a id="RCMRF90094"></a><a id="RCMRF90095"></a><a id="RCMRF90514"></a><a id="RCMRF113"></a>
            
            <h2 id="RCMRF-GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A" class="sect2"><span class="enumeration_section">2.9</span>配置</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-4F9C3B03-597E-433A-9E15-F60D033EA560">目的</p>
                  <p>使用<code class="codeph">CONFIGURE</code>命令可以创建或更改影响特定数据库上的RMAN备份，还原，复制和维护作业的持久性配置。配置对此数据库上的任何RMAN会话有效，直到明确清除或更改配置为止。您可以使用<code class="codeph"><a href="SHOW.html#GUID-6C2AF43B-FADD-41AF-9408-852A69538E2F">SHOW</a></code>命令显示一个或多个数据库的配置。
                  </p>
                  <div class="infoboxnotealso" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-38280D82-4E07-485F-897F-90942607C590">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../bradv/configuring-rman-client-basic.html#BRADV8002" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南</span></a> ，了解如何配置RMAN环境</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-781A68AD-6969-425D-8163-3A9CB259AE25">其他主题</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDCACAG">先决条件</a></p>
                     </li>
                     <li>
                        <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHFHDB">使用说明</a></p>
                     </li>
                     <li>
                        <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDBHBBA">句法</a></p>
                     </li>
                     <li>
                        <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDJDIEA">语义</a></p>
                     </li>
                     <li>
                        <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDDCBH">例子</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDCACAG">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-4238CD57-8FB0-4777-8997-46BE9E4E282F">先决条件</p>
                  <p>仅在RMAN提示符下执行此命令。</p>
                  <p>除非指定<code class="codeph">FOR DB_UNIQUE_NAME</code>子句，否则需要与目标数据库建立RMAN连接。必须安装或打开目标数据库。
                  </p>
                  <p>在CDB中，您必须连接到根才能创建或更改配置设置。连接到PDB时无法配置设置。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHFHDB">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-6B29A62A-8AE9-4A8F-A3CE-35C5432FB1A1">使用说明</p>
                  <p><code class="codeph">CONFIGURE</code>命令始终在目标数据库控制文件中存储目标数据库的配置。如果将RMAN与恢复目录一起使用，则RMAN还会为目录中的每个已注册数据库存储持久性配置设置。
                  </p>
                  <p><span class="bold">默认RMAN配置设置</span></p>
                  <p><a id="d28529e243" class="indexterm-anchor"></a> RMAN <code class="codeph">CONFIGURE</code>设置具有默认值。您可以通过使用<code class="codeph">CLEAR</code>选项重新运行命令来返回任何<code class="codeph">CONFIGURE</code>命令的默认值，但不能以这种方式清除单个参数。例如，以下命令有效：</p><pre class="oac_no_warn" dir="ltr">配置频道设备类型sbt CLEAR</pre><p>但是，以下命令无效：</p><pre class="oac_no_warn" dir="ltr">配置通道设备类型sbt MAXPIECESIZE 5M CLEAR</pre><p><span class="bold">Data Guard环境中的RMAN配置</span></p>
                  <p><a id="d28529e267" class="indexterm-anchor"></a><a id="d28529e271" class="indexterm-anchor"></a>在Data Guard环境中，Oracle建议您始终将RMAN与恢复目录一起使用。您可以使用<code class="codeph">CONFIGURE</code>命令为Data Guard环境中的任何单个主数据库或备用数据库创建持久性RMAN配置，但备份保留策略，表空间排除和辅助名称的设置除外。因此，主数据库和备用数据库可以具有不同的通道配置，控制文件自动备份位置等。
                  </p>
                  <p>您可以使用<code class="codeph">FOR DB_UNIQUE_NAME</code>子句将RMAN未连接的数据库配置为<code class="codeph">TARGET</code> 。您可以使用<code class="codeph">CONFIGURE DB_UNIQUE_NAME</code>创建恢复目录已知的新物理备用数据库并隐式注册它。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDBHBBA">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-612E56B4-3537-43F8-9DF3-6E4D3E46E38C">句法</p>
                  <p><a id="d28529e294" class="indexterm-anchor"></a><a id="d28529e298" class="indexterm-anchor"></a> <span class="bold"><span class="italic">configure</span> :: =</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-B9A6D832-3EFA-4451-80BF-3D32CC249577"><img src="img/configure.gif" alt="configure.eps的描述如下" title="configure.eps的描述如下" longdesc="img_text/configure.html"><br><a href="img_text/configure.html">插图说明configure.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220__BABCCBBJ">datafileSpec :: =</a></span> ， <span class="italic"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDIHIEG">backupConf :: =</a></span> ， <span class="italic"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHEECI">cfauConf :: =</a></span> ， <span class="italic"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHIHDH">deviceConf :: =</a></span> ， <span class="italic"><a href="forDbUniqueNameOption.html#GUID-D1D9CFED-9A57-438A-A80C-D8B7B6E131BE__BABBBGBC">forDbUniqueNameOption :: =</a></span> ）</p>
                  <p><a id="d28529e332" class="indexterm-anchor"></a><a id="d28529e336" class="indexterm-anchor"></a> <span class="bold"><span class="italic">delalConf</span> :: =</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-EA67CAB9-FE67-48BC-9984-29E1D47B6A33"><img src="img/delalconf.gif" alt="下面是delalconf.eps的描述" title="下面是delalconf.eps的描述" longdesc="img_text/delalconf.html"><br><a href="img_text/delalconf.html">说明delalconf.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier :: =</a></span> ）</p>
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDIHIEG"><a id="d28529e354" class="indexterm-anchor"></a><a id="d28529e358" class="indexterm-anchor"></a> <span class="bold"><span class="italic">backupConf</span> :: =</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-BD3D52F8-766C-4DFC-8AD9-A0FEBD0E768E"><img src="img/backupconf.gif" alt="backupconf.eps的描述如下" title="backupconf.eps的描述如下" longdesc="img_text/backupconf.html"><br><a href="img_text/backupconf.html">backupconf.eps插图说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier :: =</a></span> ， <span class="italic"><a href="sizeSpec.html#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577__BABHAICB">sizeSpec :: =</a></span> ）</p>
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHEECI"><a id="d28529e380" class="indexterm-anchor"></a><a id="d28529e384" class="indexterm-anchor"></a> <span class="bold"><span class="italic">cfauConf</span> :: =</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-758799D0-DFCC-4EE1-8EAA-8696EBC1C0F5"><img src="img/cfauconf.gif" alt="cfauconf.eps的描述如下" title="cfauconf.eps的描述如下" longdesc="img_text/cfauconf.html"><br><a href="img_text/cfauconf.html">说明cfauconf.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier :: =</a></span> ， <span class="italic"><a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABHCHAG">formatSpec :: =</a></span> ）</p>
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHIHDH"><a id="d28529e407" class="indexterm-anchor"></a><a id="d28529e411" class="indexterm-anchor"></a> <span class="bold"><span class="italic">deviceConf</span> :: =</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-88A4112F-F9CE-4635-9CA6-C210659551AB"><img src="img/deviceconf.gif" alt="下面是deviceconf.eps的说明" title="下面是deviceconf.eps的说明" longdesc="img_text/deviceconf.html"><br><a href="img_text/deviceconf.html">插图描述deviceconf.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier :: =</a></span> ， <span class="italic"><a href="allocOperandList.html#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA__BABFFJCH">allocOperandList :: =</a></span> ）</p>
                  <p><a id="d28529e433" class="indexterm-anchor"></a><a id="d28529e437" class="indexterm-anchor"></a> <span class="bold"><span class="italic">forDbUniqueNameOption</span> :: =</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-ADB071A8-5C0E-4C1B-9A81-2125D82040C9"><img src="img/fordbuniquenameoption.gif" alt="下面是fordbuniquenameoption.eps的描述" title="下面是fordbuniquenameoption.eps的描述" longdesc="img_text/fordbuniquenameoption.html"><br><a href="img_text/fordbuniquenameoption.html">说明fordbuniquenameoption.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDJDIEA">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-3E4B26DF-0300-4F9E-87D5-84D9D2394E00">语义</p>
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1017464"><a id="d28529e452" class="indexterm-anchor"></a><a id="d28529e456" class="indexterm-anchor"></a> <span class="bold"><span class="italic">配置</span></span> 
                  </p>
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-98D50301-81B1-4410-8E2E-88A1A12733FE">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes CONFIGURE command parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d28529e472">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d28529e475">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e480" headers="d28529e472 "><code class="codeph">DB_UNIQUE_NAME</code> <span class="italic"><code class="codeph">db_unique_name</code> <code class="codeph">CONNECT IDENTIFIER</code></span> <code class="codeph">'</code> <span class="italic"><code class="codeph">connect_string</code></span> <code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e480 d28529e475 ">
                                 <p>指定<code class="codeph">DB_UNIQUE_NAME</code>指定的物理备用数据库的网络服务名称。 <code class="codeph">CONNECT IDENTIFIER</code>字符串不得包含数据库用户名和密码。
                                 </p>
                                 <p>RMAN还必须作为<code class="codeph">TARGET</code>连接到主数据库。 RMAN必须连接到恢复目录。
                                 </p>
                                 <p>运行<code class="codeph"><a href="RESYNC-CATALOG.html#GUID-DF91BD12-A00D-49CC-99C5-E8EDD0094CCE">RESYNC CATALOG</a></code> <code class="codeph">FROM DB_UNIQUE_NAME</code>命令时，Data Guard环境中的数据库使用网络服务名称与<span class="italic"><code class="codeph">db_unique_name</code></span>数据库连接。例如，假设备用数据库具有唯一名称<code class="codeph">standby1</code>和网络服务名称<code class="codeph">sby1</code> 。您将RMAN作为<code class="codeph">TARGET</code>连接到主数据库并执行<code class="codeph">CONFIGURE DB_UNIQUE_NAME 'standby1' CONNECT IDENTIFIER 'sby1'</code> 。当需要与<code class="codeph">standby1</code>建立Oracle Net连接时，环境中的每个主数据库和备用数据库都使用网络服务名称<code class="codeph">sby1</code> 。
                                 </p>
                                 <p><span class="bold">注意：</span>当目标数据库需要连接到其他备用数据库或主数据库时，它将使用现有的Data Guard身份验证机制作为<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>用户进行连接。
                                 </p>
                                 <p>假设您最近将RMAN作为<code class="codeph">TARGET</code>连接到主数据库并使用了<code class="codeph">CONFIGURE ...FOR DB_UNIQUE_NAME standby_new</code>配置备用数据库<code class="codeph">standby_new</code>备份设置。但是，您还没有将RMAN作为<code class="codeph">TARGET</code>连接到<code class="codeph">standby_new</code> 。在这种情况下，您可以执行<code class="codeph">RESYNC CATALOG FROM DB_UNIQUE_NAME standby_new</code> 。主数据库使用连接标识符与备用数据库建立Oracle Net连接。稍后将RMAN连接到备用数据库时，RMAN会将配置从恢复目录推送到已装入的控制文件。
                                 </p>
                                 <p><span class="bold">注意：</span>如果<code class="codeph">CONFIGURE DB_UNIQUE_NAME</code>指定的数据库未在恢复目录中注册，则RMAN会隐式注册它。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e584" headers="d28529e472 ">
                                 <p><code class="codeph">明确</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e584 d28529e475 ">
                                 <p>将参数返回到其默认设置。请参阅使用说明。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e592" headers="d28529e472 ">
                                 <p><span class="italic"><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDIFEEE">delalConf</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e592 d28529e475 ">
                                 <p>配置存档的重做日志删除策略。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e602" headers="d28529e472 "><code class="codeph">AUXNAME FOR DATAFILE</code> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span> <code class="codeph">CLEAR | TO</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e602 d28529e475 ">
                                 <p>将指定目标数据文件的辅助文件名配置为<code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code> （请参见<a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHHHDF">示例2-54</a> ）。指定<code class="codeph">CLEAR</code>以指定辅助文件名。
                                 </p>
                                 <p>如果您正在执行TSPITR或使用<code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code> ，则可以设置<code class="codeph">AUXNAME</code>以预配置文件名以在辅助数据库上使用，而无需在过程中手动指定辅助文件名。您不能将<code class="codeph">CONFIGURE AUXNAME</code>用于恢复集，您必须使用<code class="codeph">SET NEWNAME</code> 。</p>
                                 <p>例如，如果数据文件位于原始磁盘上，则必须在TSPITR期间使用此命令，并且出于性能原因必须将辅助数据文件还原到原始磁盘。通常，您在TSPITR中为<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间的数据文件以及包含回滚或还原段的表空间设置<code class="codeph">AUXNAME</code>参数。不要覆盖生产数据库正在使用的文件，并且可以在TSPITR完成后丢弃。实质上，数据文件的<code class="codeph">AUXNAME</code>是TSPITR可以创建它的临时副本的位置。
                                 </p>
                                 <p>使用<code class="codeph">DUPLICATE</code>命令重命名文件时， <code class="codeph">CONFIGURE</code> <span class="bold"> </span> <code class="codeph">AUXNAME</code>是<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME</code>的替代品。不同之处在于，在您第一次设置<code class="codeph">AUXNAME</code>后，在发出另一个<code class="codeph">DUPLICATE</code>命令时无需重置文件名： <code class="codeph">AUXNAME</code>设置保持有效，直到您发出<code class="codeph">CONFIGURE AUXNAME ...CLEAR</code> 。相反，每次执行<code class="codeph">DUPLICATE</code>命令时都必须重新<code class="codeph">SET NEWNAME</code>命令。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="../bradv/performing-rman-tspitr.html#BRADV009" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，了解如何执行RMAN TSPITR，以及<a href="../bradv/rman-duplicating-databases.html#BRADV-GUID-F31F9FCE-B610-49EB-B9DB-44B9AA4E838F" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，了解如何使用RMAN复制数据库</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e723" headers="d28529e472 ">
                                 <p><span class="italic"><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1017487">backupConf</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e723 d28529e475 ">
                                 <p>配置默认备份选项，例如双工，优化，排除表空间，备份集大小和保留策略。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e733" headers="d28529e472 ">
                                 <p><span class="italic"><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1017491">cfauConf</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e733 d28529e475 ">
                                 <p>配置控制文件自动备份设置。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e743" headers="d28529e472 "><code class="codeph">COMPRESSION ALGORITHM</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">algorithm_name</code></span> <code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e743 d28529e475 ">
                                 <p>指定RMAN用于创建压缩备份集的算法。</p>
                                 <p>默认压缩算法设置为<code class="codeph">BASIC</code> ，不需要高级压缩选项。
                                 </p>
                                 <p>但是，如果您启用了“高级压缩选项”，则可以从以下压缩级别中进行选择：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">HIGH -</code> <a id="d28529e769" class="indexterm-anchor"></a>最适合在较慢网络上进行备份，其中限制因素是网络速度</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">MEDIUM -</code> <a id="d28529e778" class="indexterm-anchor"></a>推荐用于大多数环境。压缩比和速度的良好组合</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">LOW</code> - <a id="d28529e788" class="indexterm-anchor"></a>对备份吞吐量的影响最小，适用于CPU资源是限制因素的环境。
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">注意：</span>压缩率通常从低到高增加，可能会消耗更多的CPU资源。
                                 </p>
                                 <p>由于各种压缩级别的性能取决于数据库中的数据性质，网络配置，系统资源以及计算机系统的类型及其功能，因此Oracle无法记录普遍适用的性能统计信息。关于哪个级别最佳的决定必须考虑系统与CPU的带宽和CPU的实际速度之间的平衡程度。强烈建议您对环境中的数据运行具有不同压缩级别的测试。根据您的环境，网络流量特征（工作负载）和数据集选择压缩级别是确保备份集压缩级别能够满足组织的性能要求和任何适用的服务级别协议的唯一方法。</p>
                                 <p><span class="bold">注意：</span> <a id="d28529e803" class="indexterm-anchor"></a><a id="d28529e805" class="indexterm-anchor"></a> <code class="codeph">V$RMAN_COMPRESSION_ALGORITHM</code>视图描述了支持的算法。
                                 </p>
                                 <p><span class="bold">另请参阅</span> ： <code class="codeph">V$RMAN_COMPRESSION_ALGORITHM</code> <span class="italic">Oracle数据库参考</span>条目。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e823" headers="d28529e472 ">
                                 <p>   <code class="codeph">优化负载</code>  
                                 </p>
                                 <p> <code class="codeph">{TRUE | FALSE}</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e823 d28529e475 ">
                                 <p>指定Oracle数据库是否在请求压缩备份时执行预压缩块处理。<code class="codeph">TRUE</code>是默认值， <code class="codeph">FALSE</code>启用预压缩处理。默认行为是不执行预压缩块处理。这样的处理可能消耗额外的CPU资源，并且对于包含所有最初加载的数据的块不需要，并且从未成为单行插入和删除的主题。指定<code class="codeph">FALSE</code>使用额外的CPU资源来执行预压缩块处理，该处理由内部块清理和碎片整理组成，可以提高二进制压缩级别。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <span class="italic">Oracle数据库备份和恢复用户指南，</span>以了解有关此选项的更多信息。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e853" headers="d28529e472 ">
                                 <p>   <code class="codeph">作为释放</code>  
                                 </p>
                                 <p><span class="italic">'版'</span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e853 d28529e475 ">
                                 <p>指定发行版本。版本号使用版本号格式，并且可以使用多达5个数字来完全限定版本。例如，10.2.0.3.0和11.2是可接受的值。此选项可确保未来版本的压缩算法稳定性。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e866" headers="d28529e472 ">
                                 <p><span class="italic"><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1019177">deviceConf</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e866 d28529e475 ">
                                 <p>配置设备的默认备份设置，例如默认备份设备，设备的通道配置，每个设备的默认备份类型以及并行度。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e876" headers="d28529e472 ">
                                 <p><code class="codeph">加密</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e876 d28529e475 ">
                                 <p>指定数据库或表空间的透明模式加密设置。</p>
                                 <p>除非使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ENCRYPTION</code>命令覆盖，否则此配置适用。为单个表空间指定的选项优先于为整个数据库指定的选项。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <span class="q">“ <a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHIGD">备份集加密</a> ”</span>以了解不同的备份加密模式，以及<a href="../asoag/introduction-to-transparent-data-encryption.html#ASOAG10139" target="_blank"><span class="italic">Oracle数据库高级安全性指南</span></a>以了解透明数据加密</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e908" headers="d28529e472 "><code class="codeph">ALGORITHM</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">algorithm_name</code></span> <code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e908 d28529e475 ">
                                 <p><a id="d28529e921" class="indexterm-anchor"></a>指定编写备份集时用于加密的默认算法。可能的值列在<a id="d28529e924" class="indexterm-anchor"></a><a id="d28529e926" class="indexterm-anchor"></a><a id="d28529e930" class="indexterm-anchor"></a><a id="d28529e934" class="indexterm-anchor"></a> <code class="codeph">V$RMAN_ENCRYPTION_ALGORITHMS</code> 。 <code class="codeph">CLEAR</code>选项将数据库重置为默认值。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e945" headers="d28529e472 "><code class="codeph">FOR DATABASE</code> <code class="codeph">[ON | OFF | CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e945 d28529e475 ">
                                 <p><a id="d28529e953" class="indexterm-anchor"></a><a id="d28529e957" class="indexterm-anchor"></a><a id="d28529e959" class="indexterm-anchor"></a>指定是否为整个数据库启用透明加密。选项如下：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">ON</code>启用所有数据库文件的加密。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OFF</code>关闭所有数据库文件的加密。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CLEAR</code>恢复默认设置<code class="codeph">OFF</code> 。</p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">注意：</span>必须使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ENCRYPTION IDENTIFIED BY</code>命令启用密码加密。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e996" headers="d28529e472 "><code class="codeph">FOR TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">[ON | OFF | CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e996 d28529e475 ">
                                 <p><a id="d28529e1008" class="indexterm-anchor"></a>指定是否为一个或多个表空间启用透明加密。表空间的已配置设置始终覆盖数据库级别的配置集。选项如下：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">ON</code>启用对指定表空间的加密，除非使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ENCRYPTION OFF FOR ALL TABLESPACES</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OFF</code>禁用指定表空间的加密，除非使用<code class="codeph">SET ENCRYPTION ON FOR ALL TABLESPACES</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CLEAR</code>表示指定表空间的加密由整个数据库的当前默认值确定。
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">注意：</span>必须使用<code class="codeph">SET ENCRYPTION IDENTIFIED BY</code>命令启用密码加密。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1048" headers="d28529e472 "><code class="codeph">FOR TABLESPACE</code> <span class="italic"><code class="codeph">pdb_name:tablespace_name</code></span> <code class="codeph">[ON | OFF | CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1048 d28529e475 ">
                                 <p>CDB中表空间的名称。多个数据库可以具有相同名称的表空间。名称前面的限定符唯一标识表空间。 <span class="italic"><code class="codeph">pdb-name</code></span>是PDB的名称。</p>
                                 <p>请参阅前面的<code class="codeph">FOR TABLESPACE</code>描述。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1071" headers="d28529e472 ">
                                 <p><code class="codeph">RMAN OUTPUT TO KEEP FOR</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">DAYS</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e1071 d28529e475 ">
                                 <p>将RMAN输出日志记录配置为<span class="italic"><code class="codeph">integer</code></span>指定的天<span class="italic"><code class="codeph">integer</code></span> 。有关RMAN命令输出的信息存储在两个视图<code class="codeph">RC_RMAN_OUTPUT</code>和<code class="codeph">V$RMAN_OUTPUT</code> 。将输出日志记录配置为<span class="italic"><code class="codeph">integer</code></span>天时，将从<code class="codeph">RC_RMAN_OUTPUT</code>和<code class="codeph">V$RMAN_OUTPUT</code>视图中删除任何早于<span class="italic"><code class="codeph">integer</code></span>天的日志记录条目。
                                 </p>
                                 <p>例如，假设现有输出日志记录配置设置为20天。使用<code class="codeph">CONFIGURE</code>命令将输出日志记录更改为10天。从<code class="codeph">RC_RMAN_OUTPUT</code>和<code class="codeph">V$_RMAN_OUTPUT</code>中删除任何超过10天的日志记录条目。</p>
                                 <p>要禁用RMAN输出日志记录，请将<span class="italic"><code class="codeph">integer</code></span>设置为零，如以下示例所示。
                                 </p><pre class="oac_no_warn" dir="ltr">配置RMAN输出保持0天;</pre><p>禁用输出日志记录时， <code class="codeph">RC_RMAN_OUTPUT</code>和<code class="codeph">V$RMAN_OUTPUT</code>视图中不存储任何日志记录信息。<code class="codeph">RC_RMAN_OUTPUT</code>中的现有日志记录条目<code class="codeph">RC_RMAN_OUTPUT</code>被删除。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1139" headers="d28529e472 ">
                                 <p>      <code class="codeph">明确</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e1139 d28529e475 ">
                                 <p>清除现有的RMAN输出日志记录配置并将其重置为7天，这是默认值。</p>
                                 <p>RMAN将输出日志记录信息存储在<code class="codeph">RC_RMAN_OUTPUT</code>和<code class="codeph">V$RMAN_OUTPUT</code>视图中。清除输出日志记录配置时，将从<code class="codeph">RC_RMAN_OUTPUT</code>视图中删除任何超过7天的日志记录条目（默认值）。<code class="codeph">V$RMAN_RMAN_OUTPUT</code>视图中超过7天的条目不会立即删除。仅在超出此视图允许的最大行数时才删除它们。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1162" headers="d28529e472 "><code class="codeph">SNAPSHOT CONTROLFILE</code> <code class="codeph">NAME TO '</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1162 d28529e475 ">
                                 <p><a id="d28529e1175" class="indexterm-anchor"></a>将快照控制文件名和位置配置为<code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code> 。如果运行<code class="codeph">CONFIGURE SNAPSHOT CONTROLFILE NAME CLEAR</code> ，则RMAN将快照控制文件名设置为其默认值。
                                 </p>
                                 <p>快照控制文件名的默认值是特定于平台的，并且取决于Oracle主目录。例如，某些UNIX系统上的默认值是<code class="codeph">?/dbs/snapcf_@.f</code> .如果清除控制文件名，并且更改了Oracle主目录，则快照控制文件的默认位置也会更改。
                                 </p>
                                 <p>快照控制文件名仅对此数据库有效。假设您将快照控制文件名配置为主数据库上的非默认值。如果使用<code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code>创建备用数据库，则备用数据库上的快照控制文件位置将设置为默认值。如果需要，可以将备用数据库上的快照位置配置为非默认值。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="../bradv/configuring-rman-client-advanced.html#BRADV141" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南</span></a> ，以获取有关快照控制文件的更多信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1213" headers="d28529e472 ">
                                 <p><span class="italic"><code class="codeph"><a href="forDbUniqueNameOption.html#GUID-D1D9CFED-9A57-438A-A80C-D8B7B6E131BE">forDbUniqueNameOption</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e1213 d28529e475 ">
                                 <p><a id="d28529e1222" class="indexterm-anchor"></a><a id="d28529e1226" class="indexterm-anchor"></a>在<code class="codeph">DB_UNIQUE_NAME</code>指定的Data Guard环境中的数据库的恢复目录中创建RMAN配置。您可以使用<span class="italic"><code class="codeph">db_unique_name</code></span>指定单个数据库，也可以对恢复目录中共享目标数据库的DBID（或<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code>命令指定的<code class="codeph">DBID</code> ）的所有数据库使用<code class="codeph">ALL</code> 。
                                 </p>
                                 <p>在Data Guard环境中执行操作时，需要恢复目录。RMAN必须作为<code class="codeph">TARGET</code>连接到已装入或已打开的数据库（可以是主数据库或备用数据库）， <span class="italic">或者</span>必须使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code>命令标识目标数据库。因此，您可以使用此子句为备用数据库创建持久性配置， <span class="italic">而无需</span>将<code class="codeph">TARGET</code>连接到备用数据库或主数据库。例如，您可以在创建备用数据库之前为其创建配置，以便在创建数据库后应用配置（请参阅<a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDEIDFD">示例2-56</a> ）。
                                 </p>
                                 <p>指定<code class="codeph">FOR DB_UNIQUE_NAME</code> ，RMAN会直接更新恢复目录中的配置元数据。当RMAN作为<code class="codeph">TARGET</code>连接到使用<code class="codeph">FOR DB_UNIQUE_NAME</code>更改其配置的数据库时，RMAN将使用恢复目录中的配置元数据更新已装入的控制文件。
                                 </p>
                                 <p><span class="bold">注意：</span>可以在备用数据库上本地运行<code class="codeph">CONFIGURE</code> ，然后为同一数据库运行<code class="codeph">CONFIGURE FOR DB_UNIQUE_NAME</code> ，而RMAN未作为<code class="codeph">TARGET</code>连接到此数据库。在这种情况下，恢复目录中的配置将覆盖特定数据库的控制文件中的配置。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDIFEEE"><span class="bold"><span class="italic">delalConf</span></span> 
                  </p>
                  <p><a id="d28529e1305" class="indexterm-anchor"></a>本子条款管理归档重做日志删除策略的持久性配置。
                  </p>
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-79CFB88F-8245-40EA-9BA2-72115130030C">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes CONFIGURE command delalConf parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d28529e1318">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d28529e1321">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1326" headers="d28529e1318 ">
                                 <p><code class="codeph" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHCEEH">ARCHIVELOG删除政策</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e1326 d28529e1321 ">
                                 <p>确定归档的重做日志文件何时可以删除。</p>
                                 <p>归档日志删除策略适用于所有日志归档目标，包括快速恢复区域。该策略不适用于备份集中的归档重做日志文件。</p>
                                 <p>数据库仅自动删除快速恢复区中的归档重做日志文件。你可以执行<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">...DELETE INPUT</code> ， <code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> <code class="codeph">ARCHIVELOG</code>或<code class="codeph">DELETE OBSOLETE</code>命令可从日志归档目标（包括恢复区域）手动删除日志。如果未在删除命令上指定<code class="codeph">FORCE</code> ，则这些删除命令将遵循存档日志删除策略。如果指定了<code class="codeph">FORCE</code> ，则删除命令将忽略存档日志删除策略。
                                 </p>
                                 <p>在恢复区域中，如果可能，数据库会保留符合删除条件的日志。当需要磁盘空间时，数据库首先删除最旧的日志。当恢复区域处于磁盘压力下时，数据库可能会删除根据快速恢复区域规则可回收的归档重做日志文件。</p>
                                 <p><span class="bold">注意：</span>删除策略不适用于外部归档重做日志文件，这些文件是逻辑备用数据库为其收集的日志<a id="d28529e1369" class="indexterm-anchor"></a> LogMiner会话。这些日志是从主数据库传输的，但与普通的归档重做日志文件不同，它们具有不同的DBID。无法在逻辑备用数据库上备份或还原外部归档的重做日志文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1373" headers="d28529e1318 "><code class="codeph">TO APPLIED ON</code> <code class="codeph">[ALL] STANDBY</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1373 d28529e1321 ">
                                 <p>如果<span class="italic">满足</span>以下<span class="italic">两个</span>条件，则归档重做日志文件有资格删除：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>已归档的重做日志文件已应用于所需的备用数据库。</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">BACKED UP ...不需要日志<code class="codeph">BACKED UP ...TIMES TO DEVICE TYPE</code>删除策略的时间。如果未设置<code class="codeph">BACKED UP</code>策略，则始终满足此条件。
                                       </p>
                                    </li>
                                 </ul>
                                 <p></p>
                                 <p>存在有效的备用远程数据库时，此策略适用于主数据库，备用数据库和<code class="codeph">FAR SYNC</code>备用数据库。
                                 </p>
                                 <p>对于主数据库，归档重做日志文件在备用数据库上应用后可以删除。如果不存在有效的备用数据库，则RMAN使用<code class="codeph">TO NONE</code>作为策略。对于备用数据库，归档的重做日志文件在应用于备用数据库和任何级联备用数据库后都有资格删除。
                                 </p>
                                 <p>考虑哪些远程目标取决于以下标准：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果未指定<code class="codeph">ALL</code> ，则归档重做日志文件在应用于所有必需远程目标后都有资格删除。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果指定<code class="codeph">ALL</code> ，则归档重做日志文件在所有远程目标上应用或使用后都是合格的，无论是否强制。
                                       </p>
                                       <p>例如，备用数据库<code class="codeph">sby1</code>可能是唯一接收日志的远程目标，但其他远程目标可以通过引用<code class="codeph">sby1</code>上的相同位置来应用日志。使用<code class="codeph">ALL</code> ， <code class="codeph">sby1</code>在<code class="codeph">sby1</code>不需要时立即将主数据库上的日志标记为已消耗，但在引用相同位置的所有其他相关远程目标应用或使用之前，不允许删除此日志。
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">注意：</span>将<code class="codeph">TO APPLIED</code>子句与<code class="codeph">NONE</code>或<code class="codeph">TO SHIPPED</code>子句一起指定是无效的。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a>以获取详细信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1464" headers="d28529e1318 "><code class="codeph">BACKED UP</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES TO DEVICE</code> <code class="codeph">TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1464 d28529e1321 ">
                                 <p>如果<span class="italic">满足</span>以下<span class="italic">两个</span>条件，则归档重做日志文件有资格删除：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>指定的设备类型上存在指定数量的归档日志备份。</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">TO SHIPPED TO ...不需要日志STANDBY</code>或<code class="codeph">TO APPLIED ON ...STANDBY</code>删除政策。如果未设置<code class="codeph">TO SHIPPED TO</code>策略，则始终满足此条件。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>如果使用此子句配置删除策略，则<code class="codeph">BACKUP ARCHIVELOG</code>命令将复制日志，除非指定的设备类型上存在<span class="italic"><code class="codeph">integer</code></span>备份。如果存在日志的<span class="italic"><code class="codeph">integer</code></span>备份，则<code class="codeph">BACKUP ARCHIVELOG</code>命令会跳过日志。这样，归档日志删除策略在<code class="codeph">BACKUP ARCHIVELOG</code>命令上用作默认的<code class="codeph">NOT BACKED UP</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES</code>子句。您可以通过在<code class="codeph">BACKUP</code>命令上指定<code class="codeph">FORCE</code>选项来覆盖此删除策略。
                                 </p>
                                 <p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1549" headers="d28529e1318 ">
                                 <p><code class="codeph">没有</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e1549 d28529e1321 ">
                                 <p>禁用存档日志删除策略。这是默认设置。</p>
                                 <p>存档的重做日志文件可以位于快速恢复区域的内部或外部。可以通过手动命令删除任何位置的日志。数据库只能自动删除快速恢复区域中的日志。</p>
                                 <p></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>为目标数据库配置远程目标时，如果已将已归档的重做日志文件传输到<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>指定的所需远程目标，则无论是在快速恢复区域还是在其外部，都可以进行删除。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果未配置远程目标，则快速恢复区中的归档重做日志文件如果已至少备份到磁盘或SBT， <span class="italic">或者</span>根据备份保留策略已过时，则可以删除快速恢复区中的归档重做日志文件。
                                       </p>
                                       <p>备份保留策略认为过时的日志<span class="italic">仅如果</span>不需要通过保证还原点日志<span class="italic">和</span>不被闪回数据库所需的日志。如果日志是在<code class="codeph">SYSDATE-'DB_FLASHBACK_RETENTION_TARGET'</code>之后创建的，则闪回数据库需要存档的重做日志文件。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>例如，假设已归档的重做日志文件已传输到所需的远程目标。根据恢复窗口保留策略，日志已过时，但尚未备份。在这种情况下，日志有资格删除。另外，假设日志是过时，并且已被备份到SBT，但还<span class="italic">没有</span>被转移到所需的远程目的地。在这种情况下，日志不符合删除条件。
                                 </p>
                                 <p>如果删除策略设置为<code class="codeph">NONE</code> ，并且对快速恢复区域外的归档重做日志文件执行删除命令，则RMAN仅遵循删除命令中指定的条件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1597" headers="d28529e1318 "><code class="codeph">TO SHIPPED TO</code> <code class="codeph">[ALL] STANDBY</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1597 d28529e1321 ">
                                 <p>如果<span class="italic">满足</span>以下<span class="italic">两个</span>条件，则归档重做日志文件有资格删除：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>已归档的重做日志文件已传输到所需的远程目标。</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">BACKED UP ...不需要日志<code class="codeph">BACKED UP ...TIMES TO DEVICE TYPE</code>删除策略的时间。如果未设置<code class="codeph">BACKED UP</code>删除策略，则始终满足此条件。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>存在有效的备用远程数据库时，此策略适用于主数据库，备用数据库和<code class="codeph">FAR SYNC</code>备用数据库。
                                 </p>
                                 <p></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>对于主数据库：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>如果存在有效的备用配置，则归档的重做日志文件在发送到备用数据库后才有资格删除。</p>
                                          </li>
                                          <li>
                                             <p>如果不存在有效的备用数据库，则RMAN使用<code class="codeph">TO NONE</code>作为默认策略。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p>对于备用数据库：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>如果存在有效的级联备用配置，则归档的重做日志文件在发送到级联备用数据库后才有资格删除。</p>
                                          </li>
                                          <li>
                                             <p>如果不存在有效的级联备用配置，则RMAN使用<code class="codeph">TO NONE</code>作为默认策略。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                                 <p>考虑哪些远程目标取决于以下标准：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果未指定<code class="codeph">ALL</code> ，则归档的重做日志文件仅在传输到强制远程目标后才有资格删除。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果指定<code class="codeph">ALL</code> ，则在传输到所有远程目标后，日志都有资格删除，无论是否强制。
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">注意：</span>将<code class="codeph">TO SHIPPED</code>子句与<code class="codeph">NONE</code>或<code class="codeph">TO APPLIED</code>子句一起指定是无效的。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a>以获取详细信息</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1017487"><span class="bold"><span class="italic">backupConf</span></span></p>
                  <p>本子条款管理与<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>命令相关的持久配置。一种配置是备份优化。如果启用备份优化，则如果已在设备类型上备份相同的文件，则RMAN不会将文件备份到设备类型。
                  </p>
                  <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__G1028761" title="描述跳过备份的标准，因为文件是相同的">表2-3</a>说明了备份优化用于确定文件是否相同且可能被跳过的标准。该表还说明了RMAN在启用备份优化时使用的算法，并且需要确定是否跳过相同文件的备份。如果RMAN没有跳过备份，那么它将完全按照指定进行备份。
                  </p>
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__G1028761">
                     <p class="titleintable">表2-3备份优化算法</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="备份优化算法" width="100%" border="1" summary="Describes criteria for skipping backups because the files are identical" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="14%" id="d28529e1720">文件类型</th>
                              <th align="left" valign="bottom" width="29%" id="d28529e1723">相同文件的标准</th>
                              <th align="left" valign="bottom" width="57%" id="d28529e1726">启用备份优化时的备份算法</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d28529e1731" headers="d28529e1720 ">
                                 <p>数据文件</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d28529e1731 d28529e1723 ">
                                 <p>数据文件必须具有相同的DBID，检查点SCN，创建SCN和<code class="codeph">RESETLOGS</code> SCN以及作为备份中已有数据文件的时间。数据文件必须正常脱机，只读或正常关闭。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d28529e1731 d28529e1726 ">
                                 <p>如果启用了基于恢复窗口的保留策略，则RMAN是否跳过数据文件取决于备份媒体。</p>
                                 <p>对于备份到磁带，如果最新备份早于恢复窗口，则即使存在相同数据文件的备份，RMAN也会对数据文件进行另一次备份。通过这种方式，磁带可以在到期后回收利用。</p>
                                 <p>对于备份到磁盘，如果磁盘上有相同的数据文件，则RMAN会跳过备份，即使该备份早于恢复窗口的开头。基于窗口的保留策略会使RMAN在需要时保留旧备份。</p>
                                 <p><a id="d28529e1748" class="indexterm-anchor"></a>如果使用<code class="codeph">CONFIGURE</code> <code class="codeph">RETENTION</code> <code class="codeph">POLICY</code> <code class="codeph">TO</code> <code class="codeph">REDUNDANCY</code> <span class="italic"><code class="codeph">r</code></span>启用了保留策略，则仅当指定设备上存在至少<span class="italic">n</span>个相同文件的备份时，RMAN才会跳过备份，其中<span class="italic"><code class="codeph">n</code></span> = <span class="italic"><code class="codeph">r</code></span> +1。
                                 </p>
                                 <p>如果未启用保留策略，则只有在指定设备上至少存在<span class="italic">n</span>个相同文件的备份时，RMAN才会跳过备份。RMAN按此优先顺序搜索<span class="italic">n的</span>值（即，列表上的值越大，列表中的值越低）：</p>
                                 <ol>
                                    <li>
                                       <p><code class="codeph">备份......COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SET BACKUP COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">为设备类型配置数据文件备份副本...TO</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><span class="italic">n</span> = 1</p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d28529e1823" headers="d28529e1720 ">
                                 <p>存档的重做日志</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d28529e1823 d28529e1723 ">
                                 <p>归档重做日志必须具有与备份中已存档的日志相同的线程，序列号和<code class="codeph">RESETLOGS</code> SCN以及时间。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d28529e1823 d28529e1726 ">
                                 <p>仅当指定设备上至少存在<span class="italic">n</span>个相同文件的备份时，RMAN才会跳过备份。RMAN按此优先顺序搜索<span class="italic">n的</span>值（即，列表上的值越大，列表中的值越低）：</p>
                                 <ol>
                                    <li>
                                       <p><code class="codeph">备份......COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SET BACKUP COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">配置ARCHIVELOG备份复制设备类型...TO</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><span class="italic">n</span> = 1</p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d28529e1872" headers="d28529e1720 ">
                                 <p>备份集</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d28529e1872 d28529e1723 ">
                                 <p>备份集必须具有与现有备份集相同的记录ID和标记。</p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d28529e1872 d28529e1726 ">
                                 <p>仅当指定设备上至少存在<span class="italic">n</span>个相同文件的备份时，RMAN才会跳过备份。默认情况下， <span class="italic">n</span> <code class="codeph">=1</code> 。RMAN按此优先顺序搜索<span class="italic">n的</span>其他值（即，列表中较高的值覆盖列表中较低的值）：</p>
                                 <ol>
                                    <li>
                                       <p><code class="codeph">备份......COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SET BACKUP COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><span class="italic">n</span> = 1</p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-5E779EDD-1DCA-47D0-AC1F-6573AF950107">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes CONFIGURE command backupConf parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d28529e1922">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d28529e1925">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1930" headers="d28529e1922 "><code class="codeph">{ARCHIVELOG | DATAFILE}</code> <code class="codeph">BACKUP COPIES FOR DEVICE TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span> <code class="codeph">TO</code> <span class="italic"><code class="codeph">integer</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1930 d28529e1925 ">
                                 <p><a id="d28529e1949" class="indexterm-anchor"></a><a id="d28529e1953" class="indexterm-anchor"></a><a id="d28529e1957" class="indexterm-anchor"></a><a id="d28529e1961" class="indexterm-anchor"></a>指定指定设备类型上<code class="codeph">DATAFILE</code> （包括数据文件和控制文件）或<code class="codeph">ARCHIVELOG</code>文件的每个备份集的副本数（请参阅<a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHFJJE">示例2-51</a> ）。您可以创建从<code class="codeph">1</code> （默认）到<code class="codeph">4</code>副本。
                                 </p>
                                 <p>RMAN可以将备份双工复制到磁盘或磁带，但不能同时将备份复制到磁带和磁盘。备份到磁带时，请确保副本数量不超过可用磁带设备的数量。此外，如果<code class="codeph">COPIES</code>大于1，那么<a id="d28529e1986" class="indexterm-anchor"></a><a id="d28529e1988" class="indexterm-anchor"></a><a id="d28529e1992" class="indexterm-anchor"></a>必须在目标数据库上启用<code class="codeph">BACKUP_TAPE_IO_SLAVES</code>初始化参数。
                                 </p>
                                 <p>控制文件自动备份从不双工。此外，快速恢复区域不允许双工。</p>
                                 <p>如果在<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>命令或<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code>命令中指定了双工，则会覆盖<code class="codeph">CONFIGURE</code>设置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2021" headers="d28529e1922 "><code class="codeph">BACKUP OPTIMIZATION</code> <code class="codeph">[ON | OFF | CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2021 d28529e1925 ">
                                 <p>切换备份优化<code class="codeph">ON</code>或<code class="codeph">OFF</code> （默认值）。指定<code class="codeph">CLEAR</code>以将优化返回到其默认值<code class="codeph">OFF</code> 。</p>
                                 <p>满足以下所有条件时启用备份优化：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>已运行<code class="codeph">CONFIGURE</code> <code class="codeph">BACKUP</code> <code class="codeph">OPTIMIZATION</code> <code class="codeph">ON</code>命令。
                                       </p>
                                    </li>
                                    <li>
                                       <p>使用<code class="codeph">ALL</code>或<code class="codeph">LIKE</code>选项运行<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">DATABASE</code> ， <code class="codeph">BACKUP ARCHIVELOG</code> ， <code class="codeph">BACKUP BACKUPSET ALL</code> ， <code class="codeph">BACKUP RECOVERY AREA</code> ， <code class="codeph">BACKUP RECOVERY FILES</code>或<code class="codeph">BACKUP DATAFILECOPY</code> 。</p>
                                    </li>
                                    <li>
                                       <p>RMAN作业使用仅一种设备类型的通道。</p>
                                    </li>
                                 </ul>
                                 <p>如果已在设备类型上备份相同的文件，则优化会阻止RMAN将文件备份到设备类型。如果备份优化导致在备份期间跳过所有文件，则RMAN不会发出错误信号。备份保留策略会影响备份优化跳过的文件。</p>
                                 <p><a id="d28529e2099" class="indexterm-anchor"></a><a id="d28529e2101" class="indexterm-anchor"></a>要使两个文件完全相同，其内容必须满足<a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__G1028761" title="描述跳过备份的标准，因为文件是相同的">表2-3中</a>所述的要求。在磁盘上或Oracle Secure Backup管理的介质上创建备份片段时，优化会在数据不属于活动事务时从备份中排除撤消数据。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">BACKUP ...DELETE INPUT</code>删除所有指定的归档重做日志，无论优化是否会在备份期间跳过这些文件。
                                 </p>
                                 <p><span class="bold">注意：</span> <a id="d28529e2122" class="indexterm-anchor"></a><a id="d28529e2124" class="indexterm-anchor"></a>您可以使用<code class="codeph">BACKUP</code>命令的<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGFFBB">FORCE</a></code>选项覆盖备份优化。
                                 </p>
                                 <p><span class="bold">另请参阅：“</span> <a href="../bradv/configuring-rman-client-basic.html#BRADV113" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a> ，以获取有关RMAN如何确定可以跳过文件备份的说明</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2146" headers="d28529e1922 "><code class="codeph">EXCLUDE FOR TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">[CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2146 d28529e1925 ">
                                 <p>从<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">DATABASE</code>和<code class="codeph">RESTORE DATABASE</code>命令中排除指定的表空间（请参阅<a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDDFAA">示例2-53</a> ）。您不能排除<code class="codeph">SYSTEM</code>表空间。
                                 </p>
                                 <p><code class="codeph">BACKUP</code>命令默认不排除表空间。您必须声明使用它的选项。排除存储为表空间的属性，而不是存储在单个数据文件中。以这种方式，排除不仅适用于当前的数据文件集，而且适用于将来添加到此表空间的任何文件。如果你运行<code class="codeph">CONFIGURE ...在排除表空间后CLEAR</code>它，然后返回默认配置nonexclusion。
                                 </p>
                                 <p>您仍然可以通过在<code class="codeph">BACKUP</code>命令中显式指定或通过在<code class="codeph">BACKUP</code> <code class="codeph">DATABASE</code>命令上指定<code class="codeph">NOEXCLUDE</code>选项来<code class="codeph">BACKUP</code>排除的表空间。同样，您可以通过在<code class="codeph">RESTORE TABLESPACE</code>命令中指定它来还原已排除的表空间。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2201" headers="d28529e1922 "><code class="codeph">EXCLUDE FOR TABLESPACE</code> <span class="italic"><code class="codeph">pdb_name:tablespace_name</code></span> <code class="codeph">[CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2201 d28529e1925 ">
                                 <p>PDB中表空间的名称。多个PDB可以具有相同名称的表空间。名称前面的限定符唯一标识表空间。 <span class="italic"><code class="codeph">pdb-name</code></span>是PDB的名称。</p>
                                 <p>请参阅前面的<code class="codeph">EXCLUDE FOR TABLESPACE</code>描述。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2224" headers="d28529e1922 ">
                                 <p><code class="codeph">MAXSETSIZE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2224 d28529e1925 ">
                                 <p>指定在通道上创建的每个备份集的最大大小。使用<code class="codeph">CLEAR</code>选项将<code class="codeph">MAXSETSIZE</code>返回到<code class="codeph">UNLIMITED</code>的默认值。</p>
                                 <p><span class="bold">注意：</span> <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">AS</code> <code class="codeph">COPY</code>忽略此选项。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2256" headers="d28529e1922 ">
                                 <p><code class="codeph">TO</code> <span class="italic"><code class="codeph">sizeSpec</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2256 d28529e1925 ">
                                 <p>将每个备份集的最大大小指定为<span class="italic"><code class="codeph">integer</code></span>千兆字节，千字节或兆字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2272" headers="d28529e1922 ">
                                 <p><code class="codeph">无限</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2272 d28529e1925 ">
                                 <p>指定备份集没有大小限制。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2280" headers="d28529e1922 ">
                                 <p><code class="codeph" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__BGBDJIHJ">保留政策</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2280 d28529e1925 ">
                                 <p>为RMAN标记为过时的备份集和副本指定持久的持续策略，即不需要且有资格删除。</p>
                                 <p>随着时间的推移，RMAN会根据保留策略中指定的条件将备份集和副本标记为已过时。当需要空间时，RMAN会自动删除快速恢复区域中的过时备份集和副本。RMAN不会自动删除快速恢复区域外的过时文件：您必须手动执行<code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> <code class="codeph">OBSOLETE</code>才能删除它们。
                                 </p>
                                 <p>对于备份，保留策略的基本单位是备份集（不是备份片）或映像副本。例如， <code class="codeph">BACKUP AS BACKUPSET COPIES 4 TABLESPACE users</code>创建一个双工为四个相同备份件的备份集。保留策略将此视为<span class="italic">一个</span>备份，而不是四个单独的备份。
                                 </p>
                                 <p><span class="bold">注意：</span>使用<code class="codeph">CLEAR</code>选项将<code class="codeph">RETENTION POLICY</code>恢复为其默认值<code class="codeph">REDUNDANCY 1</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2319" headers="d28529e1922 ">
                                 <p><code class="codeph">没有</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2319 d28529e1925 ">
                                 <p>禁用保留策略功能。RMAN不会将任何备份集或副本视为过时的。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2327" headers="d28529e1922 "><code class="codeph">TO RECOVERY WINDOW OF</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">DAYS</code> <code class="codeph">TO RECOVERY WINDOW OF</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2327 d28529e1925 ">
                                 <p>指定RMAN可以恢复数据库的时间窗口。</p>
                                 <p>窗口从当前时间（ <code class="codeph">SYSDATE</code> ）延伸到可恢复点，这是您要恢复的最早日期。可恢复性的点是<code class="codeph">SYSDATE</code> - 过去的<span class="italic"><code class="codeph">integer</code></span>天。使用此设置可以还原或恢复已删除的表空间或数据文件。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">REDUNDANCY</code>和<code class="codeph">RECOVERY WINDOW</code>选项是互斥的。只有一种类型的保留策略可以随时生效。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2362" headers="d28529e1922 ">
                                 <p><code class="codeph">TO REDUNDANCY</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2362 d28529e1925 ">
                                 <p>保留每个数据文件和控制文件的<span class="italic"><code class="codeph">integer</code></span>完整或0级备份。默认保留策略设置为<code class="codeph">REDUNDANCY 1</code> 。此设置仅考虑当前的数据文件集。
                                 </p>
                                 <p>如果存在多个数据文件或控制文件的<span class="italic"><code class="codeph">integer</code></span>或0级备份，则RMAN会将这些额外文件标记为过时。然后，RMAN确定最旧的保留备份，并将所有归档重做日志文件和早于此备份的日志备份标记为过时。<code class="codeph">DELETE OBSOLETE</code>命令删除过时的数据文件备份（完整或增量），控制文件备份以及归档日志备份或映像副本。
                                 </p>
                                 <p>以下方案说明了冗余备份策略中冗余的工作原理。假设冗余级别为1。您在星期一中午运行0级数据库备份，在星期二和星期三中午运行1级累积备份，在星期四中午运行0级备份。每次每日备份后立即运行<code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> <code class="codeph">OBSOLETE</code> 。星期三<code class="codeph">DELETE</code>命令不会删除星期二的1级备份，因为此备份不是多余的：星期二1级备份可用于将星期一0级备份恢复到星期二中午和星期三中午之间的时间。但是，星期四的<code class="codeph">DELETE</code>命令会删除先前的0级和1级备份。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">REDUNDANCY</code>和<code class="codeph">RECOVERY WINDOW</code>选项是互斥的。只有一种类型的保留策略可以随时生效。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1017491"><span class="bold"><span class="italic">cfauConf</span></span></p>
                  <p>本子条款创建与控制文件自动备份相关的持久配置。</p>
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-C55486B3-E675-484C-8261-AA71845F050E">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes CONFIGURE command cfauConf parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d28529e2430">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d28529e2433">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2438" headers="d28529e2430 ">
                                 <p><code class="codeph" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDCAHE">CONTROLFILE AUTOBACKUP</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2438 d28529e2433 ">
                                 <p>控制控制文件自动备份功能。</p>
                                 <p>默认情况下， <a id="d28529e2447" class="indexterm-anchor"></a><a id="d28529e2453" class="indexterm-anchor"></a>对于CDB和独立数据库，将<code class="codeph">COMPATIBLE</code>初始化参数设置为12.2或更高，将打开控制文件自动备份。
                                 </p>
                                 <p><span class="bold">注意：</span> Oracle建议您启用控制文件自动备份功能。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2466" headers="d28529e2430 ">
                                 <p><code class="codeph">上</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2466 d28529e2433 ">
                                 <p>在以下情况下执行控制文件自动备份：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>在RMAN提示符下发出每个<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>或<code class="codeph"><a href="CREATE-CATALOG.html#GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC">CREATE CATALOG</a></code>命令之后。
                                       </p>
                                    </li>
                                    <li>
                                       <p><a id="d28529e2489" class="indexterm-anchor"></a><a id="d28529e2493" class="indexterm-anchor"></a><a id="d28529e2495" class="indexterm-anchor"></a>每当<code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code>块中的<code class="codeph">BACKUP</code>命令后跟一个非<code class="codeph">BACKUP</code>的命令。</p>
                                    </li>
                                    <li>
                                       <p>如果块中的最后一个命令是<code class="codeph">BACKUP</code>则在每个<code class="codeph">RUN</code>块的末尾。</p>
                                    </li>
                                    <li>
                                       <p>在<code class="codeph">ARCHIVELOG</code>模式下对数据库进行结构更改之后。在<code class="codeph">NOARCHIVELOG</code>模式下，数据库不会发生结构更改后的自动备份。
                                       </p>
                                       <p>结构更改包括添加表空间，更改表空间或数据文件的状态（例如，使其联机），添加新的联机重做日志，重命名文件，添加新的重做线程，启用或禁用闪回数据库等等。与上述情况下发生的自动备份不同，此类自动备份仅适用于磁盘。您可以运行<code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP FOR DEVICE TYPE DISK</code>来设置非默认磁盘位置。
                                       </p>
                                       <p>从Oracle <span class="italic">11g</span>第2版开始，RMAN创建一个自动备份文件，其中包含在几分钟内发生的所有结构更改，而不是在对数据库的每次结构更改时创建控制文件的新备份。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>在备份或复制作业期间分配的第一个通道创建自动备份并将其放入其自己的备份集中;对于后结构自动备份，默认磁盘通道进行备份。RMAN将控制文件和服务器参数文件写入同一备份片。控制文件自动备份完成后，数据库会将包含备份片段的完整路径和设备类型的消息写入警报日志。</p>
                                 <p>磁盘上自动备份的默认位置是快速恢复区域（如果已配置）或特定于平台的位置（如果未配置）。RMAN使用默认格式<a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABBCDDA">％F</a>自动备份当前控制文件。您可以使用<code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP FORMAT</code>和<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">CONTROLFILE AUTOBACKUP FORMAT</code>命令更改位置和文件名格式。
                                 </p>
                                 <p>您无法配置RMAN以将自动备份写入多个位置。要创建多个控制文件备份，可以将备份作业中的最后一个命令设置为<code class="codeph">BACKUP CURRENT CONTROLFILE FORMAT</code>命令，该命令将控制文件备份到指定的<code class="codeph">FORMAT</code>位置，然后执行自动备份。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">CONTROLFILE AUTOBACKUP FORMAT</code>命令（可在<code class="codeph">RUN</code>块或RMAN提示符下指定）仅在会话中覆盖已配置的自动备份格式。优先顺序是：</p>
                                 <ol>
                                    <li>
                                       <p>在<code class="codeph">RUN</code>块内<code class="codeph">SET</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SET</code>在<code class="codeph">RMAN</code>提示</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">配置CONTROLFILE AUTOBACKUP格式</code></p>
                                    </li>
                                 </ol>
                                 <p>即使<code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP</code>设置为<code class="codeph">OFF</code> ，您也可以配置自动备份格式，但在这种情况下RMAN不会生成自动备份。要使RMAN进行自动备份，必须将<code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP</code>设置为<code class="codeph">ON</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2614" headers="d28529e2430 ">
                                 <p><code class="codeph">关闭</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2614 d28529e2433 ">
                                 <p>禁用自动备份功能（默认）。</p>
                                 <p>包含数据文件<code class="codeph">1</code>任何<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>命令都自动包括备份集中的当前控制文件和服务器参数文件。否则，RMAN不包含这些文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2632" headers="d28529e2430 ">
                                 <p><code class="codeph">明确</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2632 d28529e2433 ">
                                 <p>将此配置返回到其默认设置<code class="codeph">OFF</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2643" headers="d28529e2430 "><code class="codeph">DEVICE TYPE</code> <code class="codeph">FORMAT FOR</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span> <code class="codeph">TO</code> <span class="italic"><code class="codeph"><a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2643 d28529e2433 ">
                                 <p><a id="d28529e2666" class="indexterm-anchor"></a>在指定的设备类型上配置控制文件自动备份的默认位置和文件名格式（请参见<a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDFCFBB">示例2-55</a> ）。
                                 </p>
                                 <p>默认情况下，所有设备的格式均为<a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABBCDDA">％F</a> 。使用<code class="codeph">CONFIGURE</code>指定的任何默认格式字符串都必须包含<code class="codeph">%F</code>替换变量。使用任何其他替换变量都是错误的。指定<code class="codeph">CLEAR</code>以将格式返回到默认<code class="codeph">%F</code> 。</p>
                                 <p><a id="d28529e2689" class="indexterm-anchor"></a>如果启用了快速恢复区域，并且格式为默认值<code class="codeph">'%F'</code> ，则RMAN会在名为<code class="codeph">autobackup</code>的目录中的恢复区域中创建自动<code class="codeph">autobackup</code> 。否则，默认的自动备份位置是特定于操作系统的位置（ <code class="codeph">?UNIX，Linux和Windows上的/dbs</code> ）。
                                 </p>
                                 <p>串<code class="codeph"># default</code>在输出<code class="codeph">SHOW</code>时RMAN使用默认格式命令指示。如果手动将磁盘格式配置为<code class="codeph">'%F'</code> ，则即使启用了恢复区，RMAN也会在特定于操作系统的默认位置创建自动备份。要将格式更改回其默认值以便RMAN在恢复区域中创建自动备份，请运行“ <code class="codeph">CONFIGURE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK CLEAR</code>自动备份<code class="codeph">CONFIGURE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK CLEAR</code> 。</p>
                                 <p><span class="italic"><code class="codeph"><a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span>可以指定<a id="d28529e2725" class="indexterm-anchor"></a>自动存储管理磁盘组。以下示例为ASM磁盘组配置通道：</p><pre class="oac_no_warn" dir="ltr">配置CONTROLFILE AUTOBACKUP设备类型磁盘为'+ dgroup1';</pre><p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span> ，了解<code class="codeph">%F</code>替换变量的语义</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1019177"><span class="bold"><span class="italic">deviceConf</span></span></p>
                  <p>本子条款创建与通道和设备相关的持久配置。</p>
                  <p><span class="bold">已配置频道的名称</span></p>
                  <p><a id="d28529e2755" class="indexterm-anchor"></a> RMAN确定已配置通道的名称。RMAN使用以下约定： <code class="codeph">ORA_</code> <span class="italic"><code class="codeph">devicetype</code></span> <code class="codeph">_</code> <span class="italic"><code class="codeph">n</code></span> ，其中<span class="italic"><code class="codeph">devicetype</code></span>是指用户设备类型（例如<code class="codeph">DISK</code>或<code class="codeph">sbt_tape</code> ）， <span class="italic"><code class="codeph">n</code></span>是指通道号。以<code class="codeph">ORA_</code>前缀开头的通道名称由RMAN保留供自己使用。您无法手动分配名称以<code class="codeph">ORA_</code>开头的<code class="codeph">ORA_</code> 。
                  </p>
                  <div class="infoboxnote" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-BEB78C24-B06C-4FA2-9FAB-C02C6241D772">
                     <p class="notep1">注意：</p>
                     <p>该<code class="codeph">sbt</code>和<code class="codeph">sbt_tape</code>设备类型是同义的，但RMAN输出总是显示<code class="codeph">sbt_tape</code>输入是否是<code class="codeph">sbt</code>或<code class="codeph">sbt_tape</code> 。
                     </p>
                  </div>
                  <p>RMAN命名第一个<code class="codeph">DISK</code>通道<code class="codeph">ORA_DISK_1</code> ，第二个<code class="codeph">ORA_DISK_2</code> ，依此类推。RMAN名称第一<code class="codeph">sbt</code>通道<code class="codeph">ORA_SBT_TAPE_1</code> ，第二<code class="codeph">ORA_SBT_TAPE_2</code> ，等等。并行化通道时，RMAN始终按数字顺序分配通道，从1开始，以并行设置结束（ <code class="codeph">CONFIGURE DEVICE TYPE ...PARALLELISM</code> <span class="italic"><code class="codeph">n</code></span> ）。
                  </p>
                  <p>要在特定配置的通道上运行<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>或作业，请使用系统生成的通道名称。如果在<code class="codeph">CONFIGURE CHANNEL</code>命令中指定通道编号（请参阅<span class="italic"><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1019177">deviceConf</a></code></span>子句），则RMAN在系统生成的通道名称中使用相同的编号。
                  </p>
                  <p>自动通道分配也适用于维护命令。如果RMAN分配自动维护通道，则它使用与任何其他自动分配通道相同的命名约定。</p>
                  <p><span class="bold">Oracle RAC环境中的已配置通道</span></p>
                  <p>在Oracle RAC环境中使用RMAN时，Oracle建议您指定<code class="codeph">TARGET</code>连接字符串，以在群集中的各种实例上建立会话，具体取决于其负载和可用性。
                  </p>
                  <p>Oracle建议不要使用<code class="codeph">CONNECT</code>选项配置各个通道以连接到特定的Oracle RAC实例，因为它们会使RMAN脚本依赖于通道配置中指定的特定实例。如果其中一个实例不可用，则备份脚本无法运行。使用负载平衡连接字符串可使RMAN脚本更易于编码，并且可以更好地适应单个实例故障。
                  </p>
                  <p>如果您决定使用<code class="codeph">CONNECT</code>选项将RMAN通道定向到特定节点，则Oracle强烈建议您不要在通道配置中使用密码。如果具有每个实例的<code class="codeph">SYSACKUP</code>权限的用户的密码与<code class="codeph">TARGET</code>连接中的密码相同，则只需使用<code class="codeph">CONNECT "@</code> <span class="italic"><code class="codeph">nodename</code></span> <code class="codeph">"</code>配置通道。RMAN使用<code class="codeph">TARGET</code>连接中的用户ID和密码连接到该通道。
                  </p>
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-2C72BC97-C9F3-4967-80B2-813D2447F8E3">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes CONFIGURE command deviceConf parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d28529e2900">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d28529e2903">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2908" headers="d28529e2900 "><code class="codeph">[AUXILIARY] CHANNEL [</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">]</code> <code class="codeph">DEVICE TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2908 d28529e2903 ">
                                 <p>指定要配置或清除的标准或<code class="codeph">AUXILIARY</code>通道，以及通道的设备类型。
                                 </p>
                                 <p><span class="bold">注意：</span>在<code class="codeph">RUN</code>命令中使用<code class="codeph"><a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE">ALLOCATE CHANNEL</a></code>分配的<code class="codeph"><a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE">ALLOCATE CHANNEL</a></code>会覆盖已配置的自动通道。
                                 </p>
                                 <p>配置通用通道或指定通道编号，其中<span class="italic"><code class="codeph">integer</code></span>小于<code class="codeph">255</code> 。有关编号通道的说明，请参见<a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDDFAA">例2-53</a> 。
                                 </p>
                                 <p><a id="d28529e2956" class="indexterm-anchor"></a><a id="d28529e2958" class="indexterm-anchor"></a>如果指定了<code class="codeph">AUXILIARY</code> ，则此配置仅用于在辅助实例处分配的通道。如果辅助通道需要与目标实例分配的通道不同的参数，请指定辅助通道的配置信息。如果未指定辅助设备配置，则RMAN使用目标数据库设备配置配置任何辅助通道。
                                 </p>
                                 <p>您必须至少指定一个频道选项。例如，您不能发出诸如<code class="codeph">CONFIGURE CHANNEL 2 DEVICE TYPE DISK</code>的命令，但您可以发出命令，例如<code class="codeph">CONFIGURE CHANNEL 2 DEVICE TYPE DISK MAXPIECESIZE 2500K</code> 。</p>
                                 <p>对于指定设备类型的通用通道，新命令会删除此设备类型的先前设置。假设您运行以下命令：</p><pre class="oac_no_warn" dir="ltr">配置通道设备类型sbt MAXPIECESIZE 1G; CONFIGURE CHANNEL DEVICE TYPE sbt FORMAT'bkup_％U';</pre><p>第二个命令删除第一个命令的<code class="codeph">MAXPIECESIZE</code>设置。
                                 </p>
                                 <p><span class="bold">注意：</span> RMAN不会在<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>命令中同时为多种设备类型分配自动通道。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="../bradv/configuring-rman-client-advanced.html#BRADV134" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南</span></a> ，了解如何配置通道编号指定的自动通道</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3000" headers="d28529e2900 ">
                                 <p><code class="codeph">   </code><span class="italic"><code class="codeph"><a href="allocOperandList.html#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA">allocOperandList</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e3000 d28529e2903 ">
                                 <p>指定已配置通道的控制选项。</p>
                                 <p>如果使用非默认<code class="codeph">CONNECT</code>或<code class="codeph">PARMS</code>选项配置通道以创建备份或副本，则必须使用相同的已配置通道或手动分配具有相同选项的通道以还原或交叉检查这些备份。
                                 </p>
                                 <p><code class="codeph">FORMAT</code>参数可以指定自动存储管理磁盘组。以下示例为ASM磁盘组配置通道：</p><pre class="oac_no_warn" dir="ltr">CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT'+ dgroup1';</pre><p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="allocOperandList.html#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA">allocOperandList</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3037" headers="d28529e2900 ">
                                 <p><code class="codeph">明确</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e3037 d28529e2903 ">
                                 <p>清除指定的频道。例如， <code class="codeph">CONFIGURE CHANNEL 1 DEVICE TYPE DISK CLEAR</code>仅将通道1恢复为默认值，而<code class="codeph">CONFIGURE CHANNEL DEVICE TYPE DISK CLEAR</code>则将通用磁盘通道恢复为默认值。指定<code class="codeph">CLEAR</code>时，不能指定任何其他通道选项（例如， <code class="codeph">PARMS</code> ）。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3057" headers="d28529e2900 "><code class="codeph">DEFAULT DEVICE TYPE TO</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e3057 d28529e2903 ">
                                 <p>指定自动通道的默认设备类型。默认情况下， <code class="codeph">DISK</code>是默认设备类型。<code class="codeph">CLEAR</code>将默认设备类型返回<code class="codeph">DISK</code> 。</p>
                                 <p>默认情况下， <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>命令仅分配默认设备类型的通道。例如，如果为<code class="codeph">DISK</code>和<code class="codeph">sbt</code>配置自动通道并将默认设备类型设置为<code class="codeph">sbt</code> ，则RMAN仅在运行<code class="codeph">BACKUP DATABASE</code>命令时分配磁带通道。您可以通过在<code class="codeph">RUN</code>命令中手动分配通道，或通过在<code class="codeph">BACKUP</code>命令本身上指定<code class="codeph">DEVICE TYPE</code>来覆盖此行为（请参阅<a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHFJJE">示例2-51</a> ）。
                                 </p>
                                 <p>无论默认设备类型如何， <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code>命令都会分配所有已配置设备类型的自动通道。<code class="codeph">RESTORE</code>命令遵循每个已配置设备类型的<code class="codeph">PARALLELISM</code>设置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3123" headers="d28529e2900 "><code class="codeph">DEVICE TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e3123 d28529e2903 ">
                                 <p>指定要应用此<code class="codeph">CONFIGURE</code>命令中指定的设置的设备类型（磁盘或sbt）。<code class="codeph">CLEAR</code>选项将此设备的备份类型和并行设置重置为其默认值。
                                 </p>
                                 <p>如果运行<code class="codeph">CONFIGURE DEVICE TYPE</code>命令<code class="codeph">CONFIGURE DEVICE TYPE</code>默认设置，并且不为此设备类型运行<code class="codeph">CONFIGURE CHANNEL</code> ，则RMAN将分配所有通道而不使用其他通道控制选项。假设您配置<code class="codeph">sbt</code>设备并运行备份，如下所示：</p><pre class="oac_no_warn" dir="ltr">配置设备类型sbt PARALLELISM 1;备份设备类型sbt数据库;</pre><p>实际上，RMAN在执行此备份时执行以下操作：</p><pre class="oac_no_warn" dir="ltr">运行{ALLOCATE CHANNEL ORA_SBT_TAPE_1设备类型sbt;备份数据库; }</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3159" headers="d28529e2900 "><code class="codeph">BACKUP TYPE TO</code> <code class="codeph">[[COMPRESSED]</code> <code class="codeph">BACKUPSET | COPY]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e3159 d28529e2903 ">
                                 <p>配置磁盘或磁带备份的默认备份类型。对于SBT设备，不支持<code class="codeph">COPY</code>选项。磁盘的默认值是<code class="codeph">BACKUPSET</code> 。</p>
                                 <p>如果<code class="codeph">BACKUP TYPE</code>设置为<code class="codeph">BACKUPSET</code> ，则<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>命令始终生成备份集，而不管创建备份的媒体是什么。使用<code class="codeph">COMPRESSED</code>选项，生成的备份集使用二进制压缩。
                                 </p>
                                 <p>磁盘备份的默认位置是快速恢复区域（如果已配置）;否则，RMAN将备份存储在特定于平台的位置。备份文件名的默认格式为<code class="codeph"><a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABGHHGH">%U</a></code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3200" headers="d28529e2900 ">
                                 <p><code class="codeph">PARALLELISM</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e3200 d28529e2903 ">
                                 <p>配置为RMAN作业分配的指定设备类型的自动通道数。默认情况下， <code class="codeph">PARALLELISM</code>设置为<code class="codeph">1</code> 。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">CONFIGURE ...PARALLELISM</code>参数指定通道并行度，即RMAN在备份和还原操作期间分配的通道数。<code class="codeph">RECOVERY_PARALLELISM</code>初始化参数指定实例恢复中使用的进程数。
                                 </p>
                                 <p>假设您将磁盘备份的<code class="codeph">PARALLELISM</code>设置为<code class="codeph">2</code> （请参阅<a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHAFGH">示例2-52</a> ）。如果将默认设备类型设置为磁盘，则在RMAN提示符下运行<code class="codeph">BACKUP DATABASE</code>时，RMAN会分配两个磁盘通道。RMAN总是分配<code class="codeph">PARALLELISM</code>设置的通道数，尽管它可能只使用这些通道的子集。
                                 </p>
                                 <p><span class="bold">注意：</span>如果配置<span class="italic"><code class="codeph">n</code></span>手动编号的通道，则<code class="codeph">PARALLELISM</code>设置可以大于或小于<span class="italic"><code class="codeph">n</code></span> 。例如，您可以手动编号10个自动通道，并将<code class="codeph">PARALLELISM</code>配置为<code class="codeph">2</code>或<code class="codeph">12</code> 。
                                 </p>
                                 <p>要将设备类型的并行度更改为<span class="italic"><code class="codeph">n</code></span> ，请运行新的<code class="codeph">CONFIGURE DEVICE TYPE ...PARALLELISM</code> <span class="italic"><code class="codeph">n</code></span>命令。例如，您可以将<code class="codeph">sbt</code> configure <code class="codeph">PARALLELISM</code>更改为<code class="codeph">3</code> ，然后将其更改为<code class="codeph">2</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">配置设备类型sbt PARALLELISM 3;配置设备类型sbt PARALLELISM 2;</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3297" headers="d28529e2900 "><code class="codeph">SPARSE [ON | OFF]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e3297 d28529e2903 ">在对稀疏数据文件执行备份和恢复之前，将数据库的设备类型配置为稀疏或非稀疏。仅当数据库的<code class="codeph">COMPATIBLE</code>初始化参数设置为12.2或更高时，才能使用此设置。
                                 <p>如果<code class="codeph">SPARSE</code>设置设置为<code class="codeph">ON</code> ，则<code class="codeph">BACKUP</code>命令将创建稀疏备份， <code class="codeph">RESTORE</code>命令将从稀疏备份执行还原操作。如果设备的<code class="codeph">SPARSE</code>设置设置为<code class="codeph">OFF</code> ，则RMAN将继续像以前一样执行数据库备份和还原操作。
                                 </p>
                                 <p>如果数据库的<code class="codeph">COMPATIBLE</code>设置为12.2或更高，则<code class="codeph">ON</code>是默认设置。此设置将覆盖数据库的默认稀疏模式。
                                 </p>
                                 <p>有关稀疏数据库的详细信息，请参见“ <span class="italic">Oracle数据库备份和恢复用户指南”</span></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDDCBH">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-6316B87B-E743-47B5-9D45-93AE0AB4D908">例子</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-DAA9FDB0-1FF7-4368-B901-853525704C73">
                  <p class="titleinexample">示例2-50配置设备和备份选项</p>
                  <p>此示例配置设备类型<code class="codeph">DISK</code>和<code class="codeph">sbt</code>通道，并将默认设备类型设置为<code class="codeph">sbt</code> 。该示例还启用了备份优化并配置了两周的恢复窗口。
                  </p><pre class="oac_no_warn" dir="ltr">CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT'/ disk1 / backups /％U'; CONFIGURE CHANNEL DEVICE TYPE sbt PARMS'ENV =（OB_DEVICE_1 = tape1）';配置默认设备类型为sbt;配置备份优化;配置保留政策，以恢复14天的窗口;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHFJJE">
                  <p class="titleinexample">例2-51覆盖默认设备类型</p>
                  <p><a id="d28529e3362" class="indexterm-anchor"></a><a id="d28529e3366" class="indexterm-anchor"></a>此示例将双工配置为<code class="codeph">2</code>用于<code class="codeph">DISK</code>备份数据文件和控制文件（磁盘上的控制文件自动备份是特殊情况，并且从不双工），然后将<code class="codeph">sbt</code>配置为默认设备。
                  </p><pre class="oac_no_warn" dir="ltr">配置数据文件备份复制设备类型磁盘为2; CONFIGURE CHANNEL DEVICE TYPE sbt PARMS'ENV =（OB_DEVICE_1 = tape1）';配置默认设备类型为sbt;</pre><p>第一个<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>命令备份默认<code class="codeph">sbt</code>通道上的归档重做日志文件。第二个<code class="codeph">BACKUP</code>命令将数据库备份到磁盘位置。由于为磁盘备份启用了双工，因此会创建每个输出备份集的两个副本。
                  </p><pre class="oac_no_warn" dir="ltr">备份ARCHIVELOG ALL; BACKUP DEVICE TYPE DISK DATABASE FORMAT'/ disk1 / db_backup_％U'，'/ disk2 / db_backup_％U';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHAFGH">
                  <p class="titleinexample">示例2-52跨文件系统配置自动通道</p>
                  <p>此示例在两个文件系统中配置自动磁盘通道：</p><pre class="oac_no_warn" dir="ltr">配置设备类型磁盘并行2; CONFIGURE CHANNEL 1 DEVICE TYPE DISK FORMAT'/ disk1 /％U'; CONFIGURE CHANNEL 2 DEVICE TYPE DISK FORMAT'/ disk2 /％U';</pre><p>由于<code class="codeph">PARALLELISM</code>设置为<code class="codeph">2</code> ，因此以下命令将输出数据分为两个文件系统：</p><pre class="oac_no_warn" dir="ltr">备份设备类型磁盘数据库加ARCHIVELOG;</pre><p>以下<code class="codeph">LIST</code>命令显示如何并行化数据文件备份：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; LIST BACKUPSET 2031,2032;备份集列表=================== BS密钥类型LV大小设备类型经过时间完成时间------- ------ --- ------- ----------- ------------ --------------- 2031全401.99M磁碟00:00:57 19-JAN-13 BP密钥：2038状态：AVAILABLE压缩：否标签：TAG20130119T100532件名：/ disk1 / 24i7ssnc_1_1备份集中的数据文件列表2031文件LV类型Ckp SCN Ckp时间名称----- -  ---- ---------- --------- ---- 1 Full 973497 19-JAN-13 /disk3/oracle/dbs/t_db1.f 5 Full 973497 19 -JAN-13 /disk3/oracle/dbs/tbs_112.f BS密钥类型LV大小设备类型经过时间完成时间------- ----  -  ----------- --------- ------------ --------------- 2032 Full 133.29M DISK 00:00:57 19-JAN- 13 BP密钥：2039状态：可用压缩：否标签：TAG20130119T100532件名：/ disk2 / 25i7ssnc_1_1备份集中的数据文件列表2032文件LV类型Ckp SCN Ckp时间名称----  -  ---- ---- ------ --------- ---- 2 Full 973501 19-JAN-13 /disk3/oracle/dbs/t_ax1.f 3 Full 973501 19-JAN-13 / disk3 / oracle / D b s / t_undo1.f 4 Full 973501 19-JAN-13 /disk3/oracle/dbs/tbs_111.f</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDDFAA">
                  <p class="titleinexample">示例2-53在Oracle Real Application Clusters（Oracle RAC）配置中配置自动通道</p>
                  <p><a id="d28529e3423" class="indexterm-anchor"></a><a id="d28529e3427" class="indexterm-anchor"></a>此示例假定具有两个节点的Oracle RAC数据库。Oracle Secure Backup是媒体管理器。磁带机<code class="codeph">tape1</code>直接连接到<code class="codeph">node1</code> ，而磁带机<code class="codeph">tape2</code>直接连接到<code class="codeph">node2</code> 。该示例为每个群集节点配置自动SBT通道。
                  </p>
                  <p>此示例说明了与Oracle RAC实例<code class="codeph">node1</code>和<code class="codeph">node2</code>通道连接。对于两个通道连接，RMAN使用为目标数据库连接输入的相同用户名和密码。
                  </p><pre class="oac_no_warn" dir="ltr">配置设备类型sbt PARALLELISM 2;配置默认设备类型为sbt; CONFIGURE CHANNEL 1 DEVICE TYPE sbt CONNECT'@ node1'PARMS'ENV =（OB_DEVICE = tape1）'; CONFIGURE CHANNEL 2 DEVICE TYPE sbt CONNECT'@ node2'PARMS'ENV =（OB_DEVICE = tape2）';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHHHDF">
                  <p class="titleinexample">示例2-54配置辅助文件名</p>
                  <p>此示例使用<code class="codeph">CONFIGURE AUXNAME</code>为数据文件指定新文件名。<code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code>命令将数据库复制到具有不同目录结构的远程主机。
                  </p><pre class="oac_no_warn" dir="ltr">＃设置数据文件的辅助名称配置数据文件的AUXNAME 1到'/oracle/auxfiles/aux_1.f';将数据文件2的AUXNAME配置为'/oracle/auxfiles/aux_2.f';将DATAFILE 3的AUXNAME配置为'/oracle/auxfiles/aux_3.f';将数据文件4的AUXNAME配置为'/oracle/auxfiles/aux_4.f';运行{ALLOCATE AUXILIARY CHANNEL dupdb1 TYPE DISK; DUPLICATE TARGET DATABASE到dupdb LOGFILE GROUP 1（'？/dbs/dupdb_log_1_1.f'，'？/dbs/dupdb_log_1_2.f'）SIZE 4M，GROUP 2（'？/dbs/dupdb_log_2_1.f'，'？/dbs/dupdb_log_2_2.f'）SIZE 4M REUSE; }＃不指定数据文件的辅助名称，以免错误地覆盖它们：CONFIGURE AUXNAME FOR DATAFILE 1 CLEAR;配置数据文件的AUXNAME 2清除;配置数据文件的AUXNAME 3清除;配置数据文件的AUXNAME 4清除;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDFCFBB">
                  <p class="titleinexample">例2-55指定控制文件自动备份的默认格式</p>
                  <p>以下示例启用自动备份功能并配置<code class="codeph">DISK</code>和<code class="codeph">sbt</code>设备的默认自动备份格式：</p><pre class="oac_no_warn" dir="ltr">配置CONTROLFILE AUTOBACKUP ON;设备类型磁盘的配置控制文件自动包装格式为'/ disk2 /％F';配置CONTROLFILE AUTOBACKUP格式为设备类型sbt为'cf_auto_％F';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDEIDFD">
                  <p class="titleinexample">示例2-56创建备用数据库的配置</p>
                  <p>假设主数据库<code class="codeph">prod</code>与两个备用数据库关联，其中<code class="codeph">DB_UNIQUE_NAME</code>命名为<code class="codeph">dgprod3</code>和<code class="codeph">dgprod4</code> 。假设您启动RMAN并连接到<code class="codeph">prod</code>作为<code class="codeph">TARGET</code>并连接到恢复目录。以下命令配置数据库<code class="codeph">dgprod3</code>和<code class="codeph">dgprod4</code>的默认设备类型。
                  </p><pre class="oac_no_warn" dir="ltr">配置默认设备类型为DB_UNIQUE_NAME dgprod3;配置设备类型sbt PARALLELISM 2 FOR DB_UNIQUE_NAME dgprod3;配置默认设备类型为DB_UNIQUE_NAME dgprod4磁盘;</pre><p>只有在从恢复目录到控制文件的反向重新同步之后，才会使用配置更新两个备用数据库的控制文件，这在用户第一次连接到<code class="codeph">dgprod3</code>和<code class="codeph">dgprod4</code> 。
                  </p>
                  <p>以下<code class="codeph"><a href="SHOW.html#GUID-6C2AF43B-FADD-41AF-9408-852A69538E2F">SHOW</a></code>命令显示唯一名称为<code class="codeph">dgprod3</code>的数据库的持久性设备类型配置：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;为DB_UNIQUE_NAME显示设备类型dgprod3;使用db_unique_name DGPROD3的数据库的RMAN配置参数是：配置设备类型'SBT_TAPE'并行2备份类型到BACKUPSET;配置设备类型磁盘并行1备份类型到BACKUPSET; #default</pre><p>以下<code class="codeph">SHOW</code>命令显示恢复目录中已知的所有数据库的持久性配置，其DBID为3257174182（由前面的<code class="codeph">SET DBID</code>命令指定的值）：</p><pre class="oac_no_warn" dir="ltr">显示所有DB_UNIQUE_NAME ALL;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-684A4786-0167-4995-821E-B7E7B1789FA1">
                  <p class="titleinexample">示例2-57优化备份</p>
                  <p>此方案说明了<a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__G1028761" title="描述跳过备份的标准，因为文件是相同的">表2-3中</a>描述的备份优化行为。假设禁用了备份优化。上午9点，您将所有现有归档重做日志文件的三个副本备份到磁带。将备份双工复制到磁带时， <code class="codeph">BACKUP_TAPE_IO_SLAVES</code>初始化参数必须为<code class="codeph">true</code> 。
                  </p><pre class="oac_no_warn" dir="ltr">备份设备类型sbt COPIES 3 ARCHIVELOG ALL;</pre><p>上午11点，您启用了备份优化：</p><pre class="oac_no_warn" dir="ltr">配置备份优化;</pre><p>在中午，您运行以下归档重做日志备份：</p><pre class="oac_no_warn" dir="ltr">备份设备类型sbt COPIES 2 ARCHIVELOG ALL;</pre><pre class="oac_no_warn" dir="ltr">使用通道ORA_SBT_TAPE_1在存档的日志文件/d1/db1r_605ab325_1_34_612112605.arc中存档，以19-JAN-13当前日志开始备份;已经备份了3次跳过存档日志文件/d1/db1r_605ab325_1_35_612112605.arc;已经备份了3次跳过存档日志文件/d1/db1r_605ab325_1_36_612112605.arc;已经备份了3次跳过存档日志文件/d1/db1r_605ab325_1_37_612112605.arc;已经备份了3次跳过存档日志文件/d1/db1r_605ab325_1_38_612112605.arc;已经备份了3次跳过存档日志文件/d1/db1r_605ab325_1_39_612112605.arc;已备份3次通道ORA_SBT_TAPE_1：启动归档日志备份集通道ORA_SBT_TAPE_1：指定备份集中的归档日志存档日志thread = 1 sequence = 40 RECID = 170 STAMP = 612270506 channel ORA_SBT_TAPE_1：start piece 1 at 19-JAN-13频道ORA_SBT_TAPE_1：在19-JAN-13完成第1部分，2个拷贝和标签TAG20130119T110827个句柄= 2hi7t0db_1_1评论= API版本2.0，MMS版本10.1.0.0个句柄= 2hi7t0db_1_2评论= API版本2.0，MMS版本10.1.0.0</pre><p>在这种情况下， <code class="codeph">BACKUP</code> <code class="codeph">...</code> <code class="codeph">COPIES</code>设置会覆盖<code class="codeph">CONFIGURE</code> <code class="codeph">...</code> <code class="codeph">COPIES</code>设置，因此RMAN设置<span class="italic"><code class="codeph">n</code></span> <code class="codeph">=2</code> 。仅当<code class="codeph">sbt</code>设备上至少存在两个日志副本时，RMAN才会跳过日志备份。由于在上午9点或之前生成的所有日志的<code class="codeph">sbt</code>上存在每个日志的三个副本，因此RMAN会跳过这些日志的备份。但是，RMAN备份了上午9点之后生成的所有日志的两个副本，因为这些日志尚未备份到磁带。
                  </p>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-18E85E48-0512-48C9-B05B-FA4D64436A1B">
                  <p class="titleinexample">例2-58配置默认压缩算法</p>
                  <p>此示例假定您拥有数据库的Advanced Compression Option（ACO）的许可证。</p>
                  <p>如果要使<code class="codeph">MEDIUM</code>压缩算法成为所有压缩备份的默认压缩算法，请发出以下命令：</p><pre class="oac_no_warn" dir="ltr">配置压缩算法'MEDIUM';</pre><p>从此时起，您可以通过发出以下命令来使用<code class="codeph">MEDIUM</code>压缩算法：</p><pre class="oac_no_warn" dir="ltr">备份为压缩备份数据库;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-65CCC5D3-CEA4-4A42-A627-783D9DE85584">
                  <p class="titleinexample">示例2-59配置稀疏备份</p>
                  <p>此示例创建一个持久性配置，默认情况下，该备份配置会以磁盘和备份集格式创建稀疏备份。</p><code class="codeph">配置设备类型磁盘备份类型到BACKUPSET SPARSE ON;</code></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
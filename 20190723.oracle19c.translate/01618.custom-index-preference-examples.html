<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This appendix describes a few custom index preference examples."></meta>
      <meta name="description" content="This appendix describes a few custom index preference examples."></meta>
      <title>自定义索引首选项示例</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Application Developer&#39;s Guide "></meta>
      <meta property="og:description" content="This appendix describes a few custom index preference examples."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Application Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96275-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="CATSEARCH-query-application.html" title="Previous" type="text/html"></link>
      <link rel="next" href="glossary.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="CCAPP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CATSEARCH-query-application.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="glossary.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">自定义索引首选项示例</li>
            </ol>
            <a id="GUID-53BE8540-EBF3-4787-8A7D-86A6CF75BC39" name="GUID-53BE8540-EBF3-4787-8A7D-86A6CF75BC39"></a>
            
            <h2 id="CCAPP-GUID-53BE8540-EBF3-4787-8A7D-86A6CF75BC39" class="sect2"><span class="enumeration_chapter">C</span>自定义索引首选项示例</h2>
         </header>
         <div class="ind">
            <div>
               <p>本附录描述了一些自定义索引首选项示例。</p>
               <p>本附录包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-F488EE16-1E0A-445C-8424-499CE6317B2B">数据存储区示例</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-4C7C8277-BF9B-49CF-B394-20E131CC729B">NULL_FILTER示例：索引HTML文档</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-8EFE1A5F-BAD2-45A9-AB6F-90379EBD97A9">PROCEDURE_FILTER示例</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-F335465D-592B-4D74-8E58-1891600298B3">BASIC_LEXER示例：设置Printjoin字符</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-8680F1FC-0CCE-4E26-806A-08048896B5CE">MULTI_LEXER示例：索引多语言表</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-6FDF4DA0-11A6-48B2-A1A7-2D08D0E81D2A">BASIC_WORDLIST示例：启用子字符串和前缀索引</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-67A2ACB4-FB50-4EEB-9DC0-58BDA85014BA">BASIC_WORDLIST示例：启用通配符索引</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9082"></a><div class="props_rev_3"><a id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B" name="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B"></a><h3 id="CCAPP-GUID-F488EE16-1E0A-445C-8424-499CE6317B2B" class="sect3"><span class="enumeration_section">C.1</span>数据存储区示例</h3>
               <div>
                  <p>以下是设置直接，多列，URL和文件数据存储的示例。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B__GUID-029C469F-DDA7-4AC6-BED1-81212C8E67BA">指定DIRECT_DATASTORE</p>
                     <p>此示例创建一个带有<code class="codeph">CLOB</code>列的表来存储文本数据。然后，它使用文本数据填充两行，并使用系统定义的<code class="codeph">CTXSYS.DEFAULT_DATASTORE</code>首选项对表进行索引，该首选项使用<code class="codeph">DIRECT_DATASTORE</code>首选项类型。
                     </p><pre class="oac_no_warn" dir="ltr">create table mytable（id number primary key，docs clob）;插入mytable值（111555，'此文本将被编入索引'）;插入mytable值（111556，'这是一个默认的数据存储区示例'）;承诺;在mytable（docs）indextype上创建索引myindex是ctxsys.context参数（'DATASTORE CTXSYS.DEFAULT_DATASTORE'）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B__GUID-6F07D50F-7D76-43F5-A06C-81D5E8306940">指定MULTI_COLUMN_DATASTORE</p>
                  </div>
                  <!-- class="section" -->
                  <p>此示例在要连接和索引的三个文本列上创建名为<code class="codeph">my_multi</code>的多列数据存储区首选项：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_preference（'my_multi'，'MULTI_COLUMN_DATASTORE'）; ctx_ddl.set_attribute（'my_multi'，'columns'，'column1，column2，column3'）;结束;</pre><div class="section">
                     <p class="subhead2" id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B__GUID-4A2F1387-C3D8-421D-BF15-3BCE4DFFE44A">指定URL数据存储</p>
                     <p>此示例创建名为<code class="codeph">my_url</code>的<code class="codeph">URL_DATASTORE</code>首选项，其中设置了<code class="codeph">http_proxy,</code> <code class="codeph">no_proxy,</code>和<code class="codeph">timeout</code>属性。timeout属性设置为300秒。默认值用于未设置的属性。
                     </p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_preference（'my_url'，'URL_DATASTORE'）; ctx_ddl.set_attribute（ 'my_url'， 'HTTP_PROXY'， 'www-proxy.us.example.com'）; ctx_ddl.set_attribute（ 'my_url'， 'NO_PROXY'， 'us.example.com'）; ctx_ddl.set_attribute（ 'my_url'， 'TIMEOUT'， '300'）;结束;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B__GUID-7A40F698-80E3-433B-BC01-DB18E70D4CE9">指定文件数据存储</p>
                     <p>此示例使用<code class="codeph">FILE_DATASTORE</code>创建数据存储首选项，以告知系统要索引的文件存储在操作系统中。该示例使用<code class="codeph">CTX_DDL.SET_ATTRIBUTE</code>将<code class="codeph">PATH</code>属性设置为<code class="codeph">/docs</code>目录。
                     </p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_preference（'mypref'，'FILE_DATASTORE'）; ctx_ddl.set_attribute（'mypref'，'PATH'，'/ docs'）;结束;</pre></div>
                  <!-- class="section" -->
                  <div class="infoboxnotealso" id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B__GUID-26FA64E4-8126-4FF5-A7FB-81EDBC127445">
                     <p class="notep1">也可以看看：</p>
                     <p>有关数据存储的更多信息，请参阅<a href="../ccref/oracle-text-indexing-elements.html#CCREF0203" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                  </div>
               </div>
            </div><a id="CCAPP9087"></a><div class="props_rev_3"><a id="GUID-4C7C8277-BF9B-49CF-B394-20E131CC729B" name="GUID-4C7C8277-BF9B-49CF-B394-20E131CC729B"></a><h3 id="CCAPP-GUID-4C7C8277-BF9B-49CF-B394-20E131CC729B" class="sect3"><span class="enumeration_section">C.2</span> NULL_FILTER示例：索引HTML文档</h3>
               <div>
                  <p>如果您的文档集完全是HTML格式，那么Oracle建议您在过滤器首选项中使用<code class="codeph">NULL_FILTER</code> ，因为它不进行过滤。
                  </p>
                  <p>例如，要索引HTML文档集，请为<code class="codeph">NULL_FILTER</code>和<code class="codeph">HTML_SECTION_GROUP:</code>指定系统定义的首选项<code class="codeph">HTML_SECTION_GROUP:</code> 
                  </p><pre class="oac_no_warn" dir="ltr">在docs上创建索引myindex（htmlfile）indextype是ctxsys.context参数（'filter ctxsys.null_filter section group ctxsys.html_section_group'）;</pre></div>
            </div><a id="CCAPP9088"></a><div class="props_rev_3"><a id="GUID-8EFE1A5F-BAD2-45A9-AB6F-90379EBD97A9" name="GUID-8EFE1A5F-BAD2-45A9-AB6F-90379EBD97A9"></a><h3 id="CCAPP-GUID-8EFE1A5F-BAD2-45A9-AB6F-90379EBD97A9" class="sect3"><span class="enumeration_section">C.3</span> PROCEDURE_FILTER示例</h3>
               <div>
                  <p>考虑使用以下签名定义的<code class="codeph">CTXSYS.NORMALIZE</code>过滤器过程：</p><pre class="oac_no_warn" dir="ltr">PROCEDURE NORMALIZE（id IN ROWID，charset IN VARCHAR2，输入IN CLOB，输出IN OUT NOCOPY VARCHAR2）;</pre><p>要将此过程用作过滤器，请设置过滤器首选项：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_preference（'myfilt'，'procedure_filter'）; ctx_ddl.set_attribute（'myfilt'，'procedure'，'normalize'）; ctx_ddl.set_attribute（'myfilt'，'input_type'，'clob'）; ctx_ddl.set_attribute（'myfilt'，'output_type'，'varchar2'）; ctx_ddl.set_attribute（'myfilt'，'rowid_parameter'，'TRUE'）; ctx_ddl.set_attribute（'myfilt'，'charset_parameter'，'TRUE'）;结束;</pre></div>
            </div><a id="CCAPP9089"></a><div class="props_rev_3"><a id="GUID-F335465D-592B-4D74-8E58-1891600298B3" name="GUID-F335465D-592B-4D74-8E58-1891600298B3"></a><h3 id="CCAPP-GUID-F335465D-592B-4D74-8E58-1891600298B3" class="sect3"><span class="enumeration_section">C.4</span> BASIC_LEXER示例：设置Printjoin字符</h3>
               <div>
                  <p>Printjoin字符是要包含在索引令牌中的非字母数字字符，因此<span class="italic">副总裁</span>等词语被索引为<span class="italic">副总裁</span> 。
                  </p>
                  <p>以下示例设置<a id="d41877e501" class="indexterm-anchor"></a> printjoin字符是BASIC_LEXER的连字符和下划线<code class="codeph">BASIC_LEXER:</code></p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_preference（'mylex'，'BASIC_LEXER'）; ctx_ddl.set_attribute（'mylex'，'printjoins'，'_  - '）;结束;</pre><p>使用如前所示设置的printjoins字符创建索引：</p><pre class="oac_no_warn" dir="ltr">在mytable（docs）indextype上创建索引myindex是ctxsys.context参数（'LEXER mylex'）;</pre></div>
            </div><a id="CCAPP9090"></a><div class="props_rev_3"><a id="GUID-8680F1FC-0CCE-4E26-806A-08048896B5CE" name="GUID-8680F1FC-0CCE-4E26-806A-08048896B5CE"></a><h3 id="CCAPP-GUID-8680F1FC-0CCE-4E26-806A-08048896B5CE" class="sect3"><span class="enumeration_section">C.5</span> MULTI_LEXER示例：索引多语言表</h3>
               <div>
                  <p>使用<code class="codeph">MULTI_LEXER</code>首选项类型索引包含不同语言文档的列。例如，当文本列以英语，德语和法语存储文档时，请使用此首选项类型。
                  </p>
                  <p>第一步是使用主键，文本列和语言列创建多语言表：</p><pre class="oac_no_warn" dir="ltr">create table globaldoc（doc_id number primary key，lang varchar2（3），text clob）;</pre><p>假设该表主要包含英文文档，包含一些德语和日语文档。要处理这三种语言，您必须创建三个子词法分析器，一个用于英语，一个用于德语，一个用于日语：</p><pre class="oac_no_warn" dir="ltr">ctx_ddl.create_preference（ 'english_lexer'， 'BASIC_LEXER'）; ctx_ddl.set_attribute（ 'english_lexer'， 'index_themes'， '是'）; ctx_ddl.set_attribute（ 'english_lexer'， 'theme_language'， '英语'）; ctx_ddl.create_preference（ 'german_lexer'， 'BASIC_LEXER'）; ctx_ddl.set_attribute（ 'german_lexer'， '复合'， '德国'）; ctx_ddl.set_attribute（ 'german_lexer'， 'mixed_case'， '是'）; ctx_ddl.set_attribute（ 'german_lexer'， 'alternate_spelling'， '德语'）; ctx_ddl.create_preference（ 'japanese_lexer'， 'japanese_vgram_lexer'）;</pre><p>创建多词法分析器首选项：</p><pre class="oac_no_warn" dir="ltr">ctx_ddl.create_preference（'global_lexer'，'multi_lexer'）;</pre><p>由于存储的文档大多是英文，因此使用<code class="codeph">CTX_DDL.ADD_SUB_LEXER:</code>将英文词法分析器<code class="codeph">CTX_DDL.ADD_SUB_LEXER:</code>默认值<code class="codeph">CTX_DDL.ADD_SUB_LEXER:</code></p><pre class="oac_no_warn" dir="ltr">ctx_ddl.add_sub_lexer（ 'global_lexer'， '缺省'， 'english_lexer'）;</pre><p>使用<code class="codeph">CTX_DDL.ADD_SUB_LEXER</code>过程以各自的语言添加德语和日语词法分析器。还假设语言列以标准ISO 639-2语言代码表示，并将这些代码添加为备用值。
                  </p><pre class="oac_no_warn" dir="ltr">ctx_ddl.add_sub_lexer（ 'global_lexer'， '德国'， 'german_lexer'， 'GER'）; ctx_ddl.add_sub_lexer（ 'global_lexer'， '日'， 'japanese_lexer'， 'JPN'）;</pre><p>创建<code class="codeph">globalx</code>索引，在参数子句中指定多词法分析器首选项和语言列：</p><pre class="oac_no_warn" dir="ltr">在globaldoc（text）上创建索引globalx indextype是ctxsys.context参数（'lexer global_lexer language column lang'）;</pre></div>
            </div><a id="CCAPP9091"></a><div class="props_rev_3"><a id="GUID-6FDF4DA0-11A6-48B2-A1A7-2D08D0E81D2A" name="GUID-6FDF4DA0-11A6-48B2-A1A7-2D08D0E81D2A"></a><h3 id="CCAPP-GUID-6FDF4DA0-11A6-48B2-A1A7-2D08D0E81D2A" class="sect3"><span class="enumeration_section">C.6</span> BASIC_WORDLIST示例：启用子字符串和前缀索引</h3>
               <div>
                  <p><a id="d41877e686" class="indexterm-anchor"></a><a id="d41877e688" class="indexterm-anchor"></a>此示例通过为前缀和子字符串索引设置wordlist首选项来提高通配符查询的性能。对于前缀索引，该示例创建长度为3到4个字符的标记前缀。
                  </p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_preference（'mywordlist'，'BASIC_WORDLIST'）; ctx_ddl.set_attribute（ 'mywordlist'， 'PREFIX_INDEX'， 'TRUE'）; ctx_ddl.set_attribute（'mywordlist'，'PREFIX_MIN_LENGTH'，'3'）; ctx_ddl.set_attribute（'mywordlist'，'PREFIX_MAX_LENGTH'，'4'）; ctx_ddl.set_attribute（'mywordlist'，'SUBSTRING_INDEX'，'YES'）;结束;</pre></div>
            </div>
            <div class="sect2"><a id="GUID-67A2ACB4-FB50-4EEB-9DC0-58BDA85014BA" name="GUID-67A2ACB4-FB50-4EEB-9DC0-58BDA85014BA"></a><h3 id="CCAPP-GUID-67A2ACB4-FB50-4EEB-9DC0-58BDA85014BA" class="sect3"><span class="enumeration_section">C.7</span> BASIC_WORDLIST示例：启用通配符索引</h3>
               <div>
                  <p>通配符索引支持对所有通配符表达式进行快速有效的通配符搜索。</p>
                  <p>此示例创建一个wordlist首选项并启用通配符（“K-gram”）索引。默认情况下，K-k的K值为<code class="codeph">3:</code></p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_preference（'mywordlist'，'BASIC_WORDLIST'）; ctx_ddl.set_attribute（ 'mywordlist'， 'WILDCARD_INDEX'， 'TRUE'）;结束;</pre><div class="infoboxnotealso" id="GUID-67A2ACB4-FB50-4EEB-9DC0-58BDA85014BA__GUID-60D7C861-313E-49AF-A464-5BB61F251226">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">BASIC_WORDLIST</code>属性表以及<code class="codeph">WILDCARD_INDEX</code>和<code class="codeph">WILDCARD_INDEX_K</code>属性的更多信息，请<code class="codeph">BASIC_WORDLIST</code> <a href="../ccref/oracle-text-indexing-elements.html#CCREF-GUID-CD2DE39F-17F7-424E-8DB3-A16C7843965D" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
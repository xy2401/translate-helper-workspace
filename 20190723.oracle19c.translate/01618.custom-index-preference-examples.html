<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This appendix describes a few custom index preference examples.">
      <meta name="description" content="This appendix describes a few custom index preference examples.">
      <title>Custom Index Preference Examples</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Application Developer's Guide ">
      <meta property="og:description" content="This appendix describes a few custom index preference examples.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Application Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96275-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="CATSEARCH-query-application.html" title="Previous" type="text/html">
      <link rel="next" href="glossary.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer's Guide">
    <meta name="dcterms.isVersionOf" content="CCAPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CATSEARCH-query-application.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="glossary.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Application Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Custom Index Preference Examples</li>
            </ol>
            <a id="GUID-53BE8540-EBF3-4787-8A7D-86A6CF75BC39" name="GUID-53BE8540-EBF3-4787-8A7D-86A6CF75BC39"></a>
            
            <h2 id="CCAPP-GUID-53BE8540-EBF3-4787-8A7D-86A6CF75BC39" class="sect2"><span class="enumeration_chapter">C </span>Custom Index Preference Examples
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This appendix describes a few custom index preference examples.</p>
               <p>This appendix contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-F488EE16-1E0A-445C-8424-499CE6317B2B">Datastore Examples</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-4C7C8277-BF9B-49CF-B394-20E131CC729B">NULL_FILTER Example: Indexing HTML Documents</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-8EFE1A5F-BAD2-45A9-AB6F-90379EBD97A9">PROCEDURE_FILTER Example</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-F335465D-592B-4D74-8E58-1891600298B3">BASIC_LEXER Example: Setting Printjoin Characters</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-8680F1FC-0CCE-4E26-806A-08048896B5CE">MULTI_LEXER Example: Indexing a Multi-Language Table</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-6FDF4DA0-11A6-48B2-A1A7-2D08D0E81D2A">BASIC_WORDLIST Example: Enabling Substring and Prefix Indexing</a></p>
                  </li>
                  <li>
                     <p><a href="custom-index-preference-examples.html#GUID-67A2ACB4-FB50-4EEB-9DC0-58BDA85014BA">BASIC_WORDLIST Example: Enabling Wildcard Index</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9082"></a><div class="props_rev_3"><a id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B" name="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B"></a><h3 id="CCAPP-GUID-F488EE16-1E0A-445C-8424-499CE6317B2B" class="sect3"><span class="enumeration_section">C.1 </span>Datastore Examples
               </h3>
               <div>
                  <p>The following are examples for setting direct, multicolumn, URL, and file datastores.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B__GUID-029C469F-DDA7-4AC6-BED1-81212C8E67BA">Specifying DIRECT_DATASTORE</p>
                     <p>This example creates a table with a <code class="codeph">CLOB</code> column to store text data. It then populates two rows with text data and indexes the table by using the system-defined <code class="codeph">CTXSYS.DEFAULT_DATASTORE</code> preference, which uses the <code class="codeph">DIRECT_DATASTORE</code> preference type.
                     </p><pre class="oac_no_warn" dir="ltr">create table mytable(id number primary key, docs clob); 

insert into mytable values(111555,'this text will be indexed');
insert into mytable values(111556,'this is a default datastore example');
commit;

create index myindex on mytable(docs) 
  indextype is ctxsys.context 
  parameters ('DATASTORE CTXSYS.DEFAULT_DATASTORE');</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B__GUID-6F07D50F-7D76-43F5-A06C-81D5E8306940">Specifying MULTI_COLUMN_DATASTORE</p>
                  </div>
                  <!-- class="section" -->
                  <p>This example creates a multicolumn datastore preference called <code class="codeph">my_multi</code> on the three text columns to be concatenated and indexed:
                  </p><pre class="oac_no_warn" dir="ltr">begin
ctx_ddl.create_preference('my_multi', 'MULTI_COLUMN_DATASTORE');
ctx_ddl.set_attribute('my_multi', 'columns', 'column1, column2, column3');
end;</pre><div class="section">
                     <p class="subhead2" id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B__GUID-4A2F1387-C3D8-421D-BF15-3BCE4DFFE44A">Specifying URL Data Storage</p>
                     <p>This example creates a <code class="codeph">URL_DATASTORE</code> preference called <code class="codeph">my_url</code> to which the <code class="codeph">http_proxy,</code> <code class="codeph">no_proxy,</code> and <code class="codeph">timeout</code> attributes are set. The timeout attribute is set to 300 seconds. The defaults are used for the attributes that are not set.
                     </p><pre class="oac_no_warn" dir="ltr">begin
 ctx_ddl.create_preference('my_url','URL_DATASTORE');
 ctx_ddl.set_attribute('my_url','HTTP_PROXY','www-proxy.us.example.com');
 ctx_ddl.set_attribute('my_url','NO_PROXY','us.example.com');
 ctx_ddl.set_attribute('my_url','TIMEOUT','300');
end;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B__GUID-7A40F698-80E3-433B-BC01-DB18E70D4CE9">Specifying File Data Storage</p>
                     <p>This example creates a data storage preference by using <code class="codeph">FILE_DATASTORE</code> to tell the system that the files to be indexed are stored in the operating system. The example uses <code class="codeph">CTX_DDL.SET_ATTRIBUTE</code> to set the <code class="codeph">PATH</code> attribute to the <code class="codeph">/docs</code> directory. 
                     </p><pre class="oac_no_warn" dir="ltr">begin
ctx_ddl.create_preference('mypref', 'FILE_DATASTORE');
ctx_ddl.set_attribute('mypref', 'PATH', '/docs'); 
end;</pre></div>
                  <!-- class="section" -->
                  <div class="infoboxnotealso" id="GUID-F488EE16-1E0A-445C-8424-499CE6317B2B__GUID-26FA64E4-8126-4FF5-A7FB-81EDBC127445">
                     <p class="notep1">See Also:</p>
                     <p><a href="../ccref/oracle-text-indexing-elements.html#CCREF0203" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about data storage
                     </p>
                  </div>
               </div>
            </div><a id="CCAPP9087"></a><div class="props_rev_3"><a id="GUID-4C7C8277-BF9B-49CF-B394-20E131CC729B" name="GUID-4C7C8277-BF9B-49CF-B394-20E131CC729B"></a><h3 id="CCAPP-GUID-4C7C8277-BF9B-49CF-B394-20E131CC729B" class="sect3"><span class="enumeration_section">C.2 </span>NULL_FILTER Example: Indexing HTML Documents
               </h3>
               <div>
                  <p>If your document set is entirely in HTML, then Oracle recommends that you use <code class="codeph">NULL_FILTER</code> in your filter preference because it does no filtering.
                  </p>
                  <p>For example, to index an HTML document set, specify the system-defined preferences for <code class="codeph">NULL_FILTER</code> and <code class="codeph">HTML_SECTION_GROUP:</code> 
                  </p><pre class="oac_no_warn" dir="ltr">create index myindex on docs(htmlfile) indextype is ctxsys.context 
  parameters('filter ctxsys.null_filter
  section group ctxsys.html_section_group');</pre></div>
            </div><a id="CCAPP9088"></a><div class="props_rev_3"><a id="GUID-8EFE1A5F-BAD2-45A9-AB6F-90379EBD97A9" name="GUID-8EFE1A5F-BAD2-45A9-AB6F-90379EBD97A9"></a><h3 id="CCAPP-GUID-8EFE1A5F-BAD2-45A9-AB6F-90379EBD97A9" class="sect3"><span class="enumeration_section">C.3 </span>PROCEDURE_FILTER Example
               </h3>
               <div>
                  <p>Consider a <code class="codeph">CTXSYS.NORMALIZE</code> filter procedure that you define with the following signature:
                  </p><pre class="oac_no_warn" dir="ltr">PROCEDURE NORMALIZE(id IN ROWID, charset IN VARCHAR2, input IN CLOB, 
output IN OUT NOCOPY VARCHAR2);
</pre><p>To use this procedure as your filter, set up your filter preference:</p><pre class="oac_no_warn" dir="ltr">begin
ctx_ddl.create_preference('myfilt', 'procedure_filter');
ctx_ddl.set_attribute('myfilt', 'procedure', 'normalize');
ctx_ddl.set_attribute('myfilt', 'input_type', 'clob');
ctx_ddl.set_attribute('myfilt', 'output_type', 'varchar2');
ctx_ddl.set_attribute('myfilt', 'rowid_parameter', 'TRUE');
ctx_ddl.set_attribute('myfilt', 'charset_parameter', 'TRUE');
end;</pre></div>
            </div><a id="CCAPP9089"></a><div class="props_rev_3"><a id="GUID-F335465D-592B-4D74-8E58-1891600298B3" name="GUID-F335465D-592B-4D74-8E58-1891600298B3"></a><h3 id="CCAPP-GUID-F335465D-592B-4D74-8E58-1891600298B3" class="sect3"><span class="enumeration_section">C.4 </span>BASIC_LEXER Example: Setting Printjoin Characters
               </h3>
               <div>
                  <p>Printjoin characters are nonalphanumeric characters that are to be included in index tokens, so that words such as <span class="italic">vice-president</span> are indexed as <span class="italic">vice-president</span>.
                  </p>
                  <p>The following example sets <a id="d41877e501" class="indexterm-anchor"></a>printjoin characters to be the hyphen and underscore with <code class="codeph">BASIC_LEXER:</code></p><pre class="oac_no_warn" dir="ltr">begin
ctx_ddl.create_preference('mylex', 'BASIC_LEXER');
ctx_ddl.set_attribute('mylex', 'printjoins', '_-');
end;
</pre><p>Create the index with printjoins characters set as previously shown:</p><pre class="oac_no_warn" dir="ltr">create index myindex on mytable ( docs ) 
  indextype is ctxsys.context 
  parameters ( 'LEXER mylex' ); </pre></div>
            </div><a id="CCAPP9090"></a><div class="props_rev_3"><a id="GUID-8680F1FC-0CCE-4E26-806A-08048896B5CE" name="GUID-8680F1FC-0CCE-4E26-806A-08048896B5CE"></a><h3 id="CCAPP-GUID-8680F1FC-0CCE-4E26-806A-08048896B5CE" class="sect3"><span class="enumeration_section">C.5 </span>MULTI_LEXER Example: Indexing a Multilanguage Table
               </h3>
               <div>
                  <p>Use the <code class="codeph">MULTI_LEXER</code> preference type to index a column containing documents in different languages. For example, use this preference type when your text column stores documents in English, German, and French.
                  </p>
                  <p>The first step is to create the multilanguage table with a primary key, a text column, and a language column:</p><pre class="oac_no_warn" dir="ltr">create table globaldoc (
   doc_id number primary key,
   lang varchar2(3),
   text clob
);
</pre><p>Assume that the table holds mostly English documents, with some German and Japanese documents. To handle the three languages, you must create three sub-lexers, one for English, one for German, and one for Japanese:</p><pre class="oac_no_warn" dir="ltr">ctx_ddl.create_preference('english_lexer','basic_lexer');
ctx_ddl.set_attribute('english_lexer','index_themes','yes');
ctx_ddl.set_attribute('english_lexer','theme_language','english');

ctx_ddl.create_preference('german_lexer','basic_lexer');
ctx_ddl.set_attribute('german_lexer','composite','german');
ctx_ddl.set_attribute('german_lexer','mixed_case','yes');
ctx_ddl.set_attribute('german_lexer','alternate_spelling','german');

ctx_ddl.create_preference('japanese_lexer','japanese_vgram_lexer');
</pre><p>Create the multi-lexer preference:</p><pre class="oac_no_warn" dir="ltr">ctx_ddl.create_preference('global_lexer', 'multi_lexer');
</pre><p>Because the stored documents are mostly English, make the English lexer the default by using <code class="codeph">CTX_DDL.ADD_SUB_LEXER:</code></p><pre class="oac_no_warn" dir="ltr">ctx_ddl.add_sub_lexer('global_lexer','default','english_lexer');
</pre><p>Add the German and Japanese lexers in their respective languages with the <code class="codeph">CTX_DDL.ADD_SUB_LEXER</code> procedure. Also assume that the language column is expressed in the standard ISO 639-2 language codes, and add those codes as alternate values.
                  </p><pre class="oac_no_warn" dir="ltr">ctx_ddl.add_sub_lexer('global_lexer','german','german_lexer','ger');
ctx_ddl.add_sub_lexer('global_lexer','japanese','japanese_lexer','jpn');
</pre><p>Create the <code class="codeph">globalx</code> index, specifying the multi-lexer preference and the language column in the parameter clause:
                  </p><pre class="oac_no_warn" dir="ltr">create index globalx on globaldoc(text) indextype is ctxsys.context
parameters ('lexer global_lexer language column lang');</pre></div>
            </div><a id="CCAPP9091"></a><div class="props_rev_3"><a id="GUID-6FDF4DA0-11A6-48B2-A1A7-2D08D0E81D2A" name="GUID-6FDF4DA0-11A6-48B2-A1A7-2D08D0E81D2A"></a><h3 id="CCAPP-GUID-6FDF4DA0-11A6-48B2-A1A7-2D08D0E81D2A" class="sect3"><span class="enumeration_section">C.6 </span>BASIC_WORDLIST Example: Enabling Substring and Prefix Indexing
               </h3>
               <div>
                  <p><a id="d41877e686" class="indexterm-anchor"></a><a id="d41877e688" class="indexterm-anchor"></a>This example improves performance for wildcard queries by setting the wordlist preference for prefix and substring indexing. For prefix indexing, the example creates token prefixes between three and four characters long.
                  </p><pre class="oac_no_warn" dir="ltr">begin 
ctx_ddl.create_preference('mywordlist', 'BASIC_WORDLIST'); 
ctx_ddl.set_attribute('mywordlist','PREFIX_INDEX','TRUE');
ctx_ddl.set_attribute('mywordlist','PREFIX_MIN_LENGTH', '3');
ctx_ddl.set_attribute('mywordlist','PREFIX_MAX_LENGTH', '4');
ctx_ddl.set_attribute('mywordlist','SUBSTRING_INDEX', 'YES');
end;</pre></div>
            </div>
            <div class="sect2"><a id="GUID-67A2ACB4-FB50-4EEB-9DC0-58BDA85014BA" name="GUID-67A2ACB4-FB50-4EEB-9DC0-58BDA85014BA"></a><h3 id="CCAPP-GUID-67A2ACB4-FB50-4EEB-9DC0-58BDA85014BA" class="sect3"><span class="enumeration_section">C.7 </span>BASIC_WORDLIST Example: Enabling Wildcard Index
               </h3>
               <div>
                  <p>Wildcard indexing supports fast and efficient wildcard search for all wildcard expressions.</p>
                  <p>This example creates a wordlist preference and enables the wildcard (“K-gram”) index. By default, the K-grams have a K value of <code class="codeph">3:</code></p><pre class="oac_no_warn" dir="ltr">begin
     ctx_ddl.create_preference('mywordlist','BASIC_WORDLIST');
     ctx_ddl.set_attribute('mywordlist','WILDCARD_INDEX','TRUE');
end;</pre><div class="infoboxnotealso" id="GUID-67A2ACB4-FB50-4EEB-9DC0-58BDA85014BA__GUID-60D7C861-313E-49AF-A464-5BB61F251226">
                     <p class="notep1">See Also:</p>
                     <p><a href="../ccref/oracle-text-indexing-elements.html#CCREF-GUID-CD2DE39F-17F7-424E-8DB3-A16C7843965D" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about the <code class="codeph">BASIC_WORDLIST</code> attributes table and the <code class="codeph">WILDCARD_INDEX</code> and <code class="codeph">WILDCARD_INDEX_K</code> attributes
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
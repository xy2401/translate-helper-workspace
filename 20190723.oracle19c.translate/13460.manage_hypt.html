<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content>
      <meta name="description" content>
      <title>Managing Hybrid Partitioned Tables</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="VLDB and Partitioning Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="VLDB and Partitioning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="vldb-and-partitioning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T18:05:22-07:00">
      <meta name="dcterms.title" content="VLDB and Partitioning Guide">
      <meta name="dcterms.dateCopyrighted" content="2008, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96199-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="evolve-nopartition-table.html" title="Previous" type="text/html">
      <link rel="next" href="view-info-partition-tables-indexes.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="VLDBG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="evolve-nopartition-table.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="view-info-partition-tables-indexes.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">VLDB and Partitioning Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="partition-admin.html" property="item" typeof="WebPage"><span property="name">Partition Administration</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Managing Hybrid Partitioned Tables</li>
            </ol>
            <a id="GUID-ACBDB3B2-0A16-4CFD-8FF1-A57C9B3D907F" name="GUID-ACBDB3B2-0A16-4CFD-8FF1-A57C9B3D907F"></a>
            
            <h2 id="VLDBG-GUID-ACBDB3B2-0A16-4CFD-8FF1-A57C9B3D907F" class="sect2">Managing Hybrid Partitioned Tables</h2>
         </header>
         <div class="ind">
            <div>
               <p></p>
               <p>The following topics are discussed in this section:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="manage_hypt.html#GUID-EB77C4A7-761D-4218-A3C6-874152504F31" title="You can use the EXTERNAL PARTITION ATTRIBUTES clause of the CREATE TABLE statement to determine hybrid partitioning for a table. The partitions of the table can be external and or internal.">Creating Hybrid Partitioned Tables</a></p>
                  </li>
                  <li>
                     <p><a href="manage_hypt.html#GUID-FCFB85FC-AAB3-4BF4-94E6-34BE5112D83E" title="You can convert a table with only internal partitions to a hybrid partitioned table.">Converting to Hybrid Partitioned Tables</a></p>
                  </li>
                  <li>
                     <p><a href="manage_hypt.html#GUID-4D0F2F16-5601-4240-AD94-219D85FD6AED" title="You can convert a hybrid partitioned table to a table with only internal partitions.">Converting Hybrid Partitioned Tables to Internal Partitioned Tables</a></p>
                  </li>
                  <li>
                     <p><a href="manage_hypt.html#GUID-D8796A92-6DBA-423C-B27A-36C7D4FE2733" title="You can use Automatic Data Optimization (ADO) policies with hybrid partitioned tables under some conditions.">Using ADO With Hybrid Partitioned Tables</a></p>
                  </li>
                  <li>
                     <p><a href="manage_hypt.html#GUID-C33AD752-50CE-497E-B19A-8D7EF153D0DF">Splitting Partitions in a Hybrid Partitioned Table</a></p>
                  </li>
               </ul>
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-ACBDB3B2-0A16-4CFD-8FF1-A57C9B3D907F__GUID-DD34DC56-1381-4FB7-8149-D7C6278F21F4">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;" id="GUID-ACBDB3B2-0A16-4CFD-8FF1-A57C9B3D907F__UL_BNN_WGK_TGB">
                        <li>
                           <p><a href="partition-concepts.html#GUID-C2B04585-BCFC-40D6-AFAB-47DF99A31C76" title="Oracle hybrid partitioned tables combine classical internal partitioned tables with Oracle external partitioned tables to form a more general partitioning called hybrid partitioned tables.">Hybrid Partitioned Tables</a> for an overview of hybrid partitioned tables, including information about limitations
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-EB77C4A7-761D-4218-A3C6-874152504F31" name="GUID-EB77C4A7-761D-4218-A3C6-874152504F31"></a><h3 id="VLDBG-GUID-EB77C4A7-761D-4218-A3C6-874152504F31" class="sect3">Creating Hybrid Partitioned Tables</h3>
               <div>
                  <p>You can use the <code class="codeph">EXTERNAL PARTITION ATTRIBUTES</code> clause of the <code class="codeph">CREATE TABLE</code> statement to determine hybrid partitioning for a table. The partitions of the table can be external and or internal.
                  </p>
                  <p>A hybrid partitioned table enables partitions to reside both in database data files (internal partitions) and in external files and sources (external partitions). You can create and query a hybrid partitioned table to utilize the benefits of partitioning with classic partitioned tables, such as pruning, on data that is contained in both internal and external partitions. </p>
                  <p>The <code class="codeph">EXTERNAL PARTITION ATTRIBUTES</code> clause of the <code class="codeph">CREATE TABLE</code> statement is defined at the table level for specifying table level external parameters in the hybrid partitioned table, such as:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The access driver type, such as <code class="codeph">ORACLE_LOADER, ORACLE_DATAPUMP, ORACLE_HDFS, ORACLE_HIVE</code> 
                        </p>
                     </li>
                     <li>
                        <p>The default directory for all external partitions files</p>
                     </li>
                     <li>
                        <p>The access parameters</p>
                     </li>
                  </ul>
                  <p>The <code class="codeph">EXTERNAL</code> clause of the <code class="codeph">PARTITION</code> clause defines the partition as an external partition. When there is no <code class="codeph">EXTERNAL</code> clause, the partition is an internal partition. You can specify for each external partition different attributes than the default attributes defined at the table level, such the directory. For example, in <a href="manage_hypt.html#GUID-EB77C4A7-761D-4218-A3C6-874152504F31__CREATINGAHYBRIDPARTITIONEDTABLE-C09D6E1A">Example 4-42</a> the <code class="codeph">DEFAULT DIRECTORY</code> value for partitions <code class="codeph">sales_data2</code>, <code class="codeph">sales_data3</code>, and <code class="codeph">sales_data_acfs</code> is different than the <code class="codeph">DEFAULT DIRECTORY</code> value defined in the <code class="codeph">EXTERNAL PARTITION ATTRIBUTES</code> clause.
                  </p>
                  <p>When there is no external file defined for an external partition, the external partition is empty. It can be populated with an external file by using an <code class="codeph">ALTER TABLE MODIFY PARTITION</code> statement. Note that at least one partition must be an internal partition.
                  </p>
                  <p>In <a href="manage_hypt.html#GUID-EB77C4A7-761D-4218-A3C6-874152504F31__CREATINGAHYBRIDPARTITIONEDTABLE-C09D6E1A">Example 4-42</a>, a hybrid range-partitioned table is a created with four external partitions and two internal partitions. The external comma-separated (CSV) data files are stored in the <code class="codeph">sales_data</code> , <code class="codeph">sales_data2</code>, <code class="codeph">sales_data3</code>, and <code class="codeph">sales_data_acfs</code> directories defined by the <code class="codeph">DEFAULT DIRECTORY</code> clauses. <code class="codeph">sales_data</code> is defined as the overall <code class="codeph">DEFAULT DIRECTORY</code> in the <code class="codeph">EXTERNAL PARTITION ATTRIBUTES</code> clause. The other directories are defined at the partition level. <code class="codeph">sales_2014</code> and <code class="codeph">sales_2015</code> are internal partitions. Data directory <code class="codeph">sales_data_acfs</code> is stored on an Oracle ACFS file system to illustrate the use of that storage option.
                  </p>
                  <p>In <a href="manage_hypt.html#GUID-EB77C4A7-761D-4218-A3C6-874152504F31__ADDINGANEXTERNALPARTITIONTOAHYBRIDR-C4DCF5AD">Example 4-43</a>, an additional external partition is added to the hybrid range-partitioned table.
                  </p>
                  <div class="example" id="GUID-EB77C4A7-761D-4218-A3C6-874152504F31__CREATINGAHYBRIDPARTITIONEDTABLE-C09D6E1A">
                     <p class="titleinexample">Example 4-42 Creating a Hybrid Range-Partitioned Table</p><pre class="oac_no_warn" dir="ltr">REM CONNECT AS SYSDBA user, run the following to set up data directories that contain the data files
CREATE DIRECTORY sales_data AS '/u01/my_data/sales_data1';
GRANT READ,WRITE ON DIRECTORY sales_data TO hr;

CREATE DIRECTORY sales_data2 AS '/u01/my_data/sales_data2';
GRANT READ,WRITE ON DIRECTORY sales_data2 TO hr;

CREATE DIRECTORY sales_data3 AS '/u01/my_data/sales_data3';
GRANT READ,WRITE ON DIRECTORY sales_data3 TO hr;

REM set up a data directory on an Oracle ACFS mount point (file system)
CREATE DIRECTORY sales_data_acfs AS '/u01/acfsmounts/acfs1';
GRANT READ,WRITE ON DIRECTORY sales_data_acfs TO hr;

CONNECT AS hr, run the following
CREATE TABLE hybrid_partition_table
  ( prod_id       NUMBER        NOT NULL,
    cust_id       NUMBER        NOT NULL,
    time_id       DATE          NOT NULL,
    channel_id    NUMBER        NOT NULL,
    promo_id      NUMBER        NOT NULL,
    quantity_sold NUMBER(10,2)  NOT NULL,
    amount_sold   NUMBER(10,2)  NOT NULL
  )
    EXTERNAL PARTITION ATTRIBUTES (
      TYPE ORACLE_LOADER 
      DEFAULT DIRECTORY sales_data
       ACCESS PARAMETERS(
         FIELDS TERMINATED BY ','
         (prod_id,cust_id,time_id DATE 'dd-mm-yyyy',channel_id,promo_id,quantity_sold,amount_sold)
       ) 
      REJECT LIMIT UNLIMITED
     ) 
    PARTITION BY RANGE (time_id)
    (PARTITION sales_2014 VALUES LESS THAN (TO_DATE('01-01-2015','dd-mm-yyyy')),
     PARTITION sales_2015 VALUES LESS THAN (TO_DATE('01-01-2016','dd-mm-yyyy')),
     PARTITION sales_2016 VALUES LESS THAN (TO_DATE('01-01-2017','dd-mm-yyyy')) EXTERNAL 
          LOCATION ('sales2016_data.txt'),
     PARTITION sales_2017 VALUES LESS THAN (TO_DATE('01-01-2018','dd-mm-yyyy')) EXTERNAL 
          DEFAULT DIRECTORY sales_data2 LOCATION ('sales2017_data.txt'),
     PARTITION sales_2018 VALUES LESS THAN (TO_DATE('01-01-2019','dd-mm-yyyy')) EXTERNAL 
          DEFAULT DIRECTORY sales_data3 LOCATION ('sales2018_data.txt'),
     PARTITION sales_2019 VALUES LESS THAN (TO_DATE('01-01-2020','dd-mm-yyyy')) EXTERNAL
          DEFAULT DIRECTORY sales_data_acfs LOCATION ('sales2019_data.txt')
 );
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-EB77C4A7-761D-4218-A3C6-874152504F31__ADDINGANEXTERNALPARTITIONTOAHYBRIDR-C4DCF5AD">
                     <p class="titleinexample">Example 4-43 Adding an External Partition to a Hybrid Range-artitioned Table</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hybrid_partition_table 
      ADD PARTITION sales_2020 VALUES LESS THAN (TO_DATE('01-01-2021','dd-mm-yyyy'))
          EXTERNAL DEFAULT DIRECTORY sales_data_acfs  LOCATION ('sales2020_data.txt');
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-EB77C4A7-761D-4218-A3C6-874152504F31__NOTE-14131-A2C7F9EE">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="partition-concepts.html#GUID-C2B04585-BCFC-40D6-AFAB-47DF99A31C76" title="Oracle hybrid partitioned tables combine classical internal partitioned tables with Oracle external partitioned tables to form a more general partitioning called hybrid partitioned tables.">Hybrid Partitioned Tables</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-FCFB85FC-AAB3-4BF4-94E6-34BE5112D83E" name="GUID-FCFB85FC-AAB3-4BF4-94E6-34BE5112D83E"></a><h3 id="VLDBG-GUID-FCFB85FC-AAB3-4BF4-94E6-34BE5112D83E" class="sect3">Converting to Hybrid Partitioned Tables</h3>
               <div>
                  <p>You can convert a table with only internal partitions to a hybrid partitioned table.</p>
                  <p>In <a href="manage_hypt.html#GUID-FCFB85FC-AAB3-4BF4-94E6-34BE5112D83E__GUID-E36F46FC-E13D-425E-A405-70F0C230E02B">Example 4-44</a>, an internal range partitioned table is converted to a hybrid partitioned table. You must add external partition attributes to an existing table first, then add external partitions. Note that at least one partition must be an internal partition.
                  </p>
                  <div class="example" id="GUID-FCFB85FC-AAB3-4BF4-94E6-34BE5112D83E__GUID-E36F46FC-E13D-425E-A405-70F0C230E02B">
                     <p class="titleinexample">Example 4-44 Converting to a Hybrid Range-Partitioned Table</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE internal_to_hypt_table (
    prod_id       NUMBER        NOT NULL,
    cust_id       NUMBER        NOT NULL,
    time_id       DATE          NOT NULL,
    channel_id    NUMBER        NOT NULL,
    promo_id      NUMBER        NOT NULL,
    quantity_sold NUMBER(10,2)  NOT NULL,
    amount_sold   NUMBER(10,2)  NOT NULL
  )
   PARTITION by range (time_id) 
   (PARTITION sales_2014 VALUES LESS THAN (TO_DATE('01-01-2015','dd-mm-yyyy'))
  );

SELECT HYBRID FROM USER_TABLES WHERE TABLE_NAME = 'INTERNAL_TO_HYPT_TABLE';
HYB
---
NO

ALTER TABLE internal_to_hypt_table 
  ADD EXTERNAL PARTITION ATTRIBUTES
   (TYPE ORACLE_LOADER 
     DEFAULT DIRECTORY sales_data
     ACCESS PARAMETERS (
       FIELDS TERMINATED BY ','
       (prod_id,cust_id,time_id DATE 'dd-mm-yyyy',channel_id,promo_id,quantity_sold,amount_sold)
     )
   )
;

ALTER TABLE internal_to_hypt_table 
      ADD PARTITION sales_2015 VALUES LESS THAN (TO_DATE('01-01-2016','dd-mm-yyyy'))
          EXTERNAL LOCATION ('sales2015_data.txt');

ALTER TABLE internal_to_hypt_table 
      ADD PARTITION sales_2016 VALUES LESS THAN (TO_DATE('01-01-2017','dd-mm-yyyy'))
          EXTERNAL LOCATION ('sales2016_data.txt');

SELECT HYBRID FROM USER_TABLES WHERE TABLE_NAME = 'INTERNAL_TO_HYPT_TABLE';
HYB
---
YES

SELECT DEFAULT_DIRECTORY_NAME FROM USER_EXTERNAL_TABLES WHERE TABLE_NAME = 'INTERNAL_TO_HYPT_TABLE';
DEFAULT_DIRECTORY_NAME
---------------------------------------------------------------------------------------------
SALES_DATA
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-FCFB85FC-AAB3-4BF4-94E6-34BE5112D83E__GUID-0B5AAF34-445A-4960-A89F-6230C3BA120F">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;" id="GUID-FCFB85FC-AAB3-4BF4-94E6-34BE5112D83E__UL_APR_WKV_2GB">
                           <li>
                              <p><a href="partition-concepts.html#GUID-C2B04585-BCFC-40D6-AFAB-47DF99A31C76" title="Oracle hybrid partitioned tables combine classical internal partitioned tables with Oracle external partitioned tables to form a more general partitioning called hybrid partitioned tables.">Hybrid Partitioned Tables</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-4D0F2F16-5601-4240-AD94-219D85FD6AED" name="GUID-4D0F2F16-5601-4240-AD94-219D85FD6AED"></a><h3 id="VLDBG-GUID-4D0F2F16-5601-4240-AD94-219D85FD6AED" class="sect3">Converting Hybrid Partitioned Tables to Internal Partitioned Tables</h3>
               <div>
                  <p>You can convert a hybrid partitioned table to a table with only internal partitions.</p>
                  <p>In <a href="manage_hypt.html#GUID-4D0F2F16-5601-4240-AD94-219D85FD6AED__GUID-8BE285C0-0281-48C4-8702-4458C5A8282A">Example 4-45</a>, a hybrid partitioned table is converted to an internal range partitioned table. First, you must drop the external partitions and then you can drop the external partition attributes.
                  </p>
                  <div class="example" id="GUID-4D0F2F16-5601-4240-AD94-219D85FD6AED__GUID-8BE285C0-0281-48C4-8702-4458C5A8282A">
                     <p class="titleinexample">Example 4-45 Converting from a Hybrid Partitioned Table to an Internal Table</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE hypt_to_int_table
  ( prod_id       NUMBER        NOT NULL,
    cust_id       NUMBER        NOT NULL,
    time_id       DATE          NOT NULL,
    channel_id    NUMBER        NOT NULL,
    promo_id      NUMBER        NOT NULL,
    quantity_sold NUMBER(10,2)  NOT NULL,
    amount_sold   NUMBER(10,2)  NOT NULL
  )
    EXTERNAL PARTITION ATTRIBUTES (
     TYPE ORACLE_LOADER 
     DEFAULT DIRECTORY sales_data
       ACCESS PARAMETERS(
        FIELDS TERMINATED BY ','
        (prod_id,cust_id,time_id DATE 'dd-mm-yyyy',channel_id,promo_id,quantity_sold,amount_sold)
       ) 
      REJECT LIMIT UNLIMITED
     ) 
    PARTITION BY RANGE (time_id)
    (PARTITION sales_2014 VALUES LESS THAN (TO_DATE('01-01-2015','dd-mm-yyyy')),
     PARTITION sales_2015 VALUES LESS THAN (TO_DATE('01-01-2016','dd-mm-yyyy')),
     PARTITION sales_2016 VALUES LESS THAN (TO_DATE('01-01-2017','dd-mm-yyyy')) 
          EXTERNAL LOCATION ('sales2016_data.txt'),
     PARTITION sales_2017 VALUES LESS THAN (TO_DATE('01-01-2018','dd-mm-yyyy')) 
          EXTERNAL DEFAULT DIRECTORY sales_data2 LOCATION ('sales2017_data.txt'),
     PARTITION sales_2018 VALUES LESS THAN (TO_DATE('01-01-2019','dd-mm-yyyy')) 
          EXTERNAL DEFAULT DIRECTORY sales_data3 LOCATION ('sales2018_data.txt'),
     PARTITION sales_2019 VALUES LESS THAN (TO_DATE('01-01-2020','dd-mm-yyyy')) 
          EXTERNAL DEFAULT DIRECTORY sales_data_acfs LOCATION ('sales2019_data.txt')
 );

SELECT HYBRID FROM USER_TABLES WHERE TABLE_NAME = 'HYPT_TO_INT_TABLE';
HYB
---
YES

ALTER TABLE hypt_to_int_table DROP PARTITION sales_2016;
ALTER TABLE hypt_to_int_table DROP PARTITION sales_2017;
ALTER TABLE hypt_to_int_table DROP PARTITION sales_2018;
ALTER TABLE hypt_to_int_table DROP PARTITION sales_2019;

ALTER TABLE hypt_to_int_table DROP EXTERNAL PARTITION ATTRIBUTES();

SELECT HYBRID FROM USER_TABLES WHERE TABLE_NAME = 'HYPT_TO_INT_TABLE';
HYB
---
NO</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-4D0F2F16-5601-4240-AD94-219D85FD6AED__GUID-7739CEA5-8294-44BE-982E-F987BF74865A">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;" id="GUID-4D0F2F16-5601-4240-AD94-219D85FD6AED__UL_SL2_ZKV_2GB">
                           <li>
                              <p><a href="partition-concepts.html#GUID-C2B04585-BCFC-40D6-AFAB-47DF99A31C76" title="Oracle hybrid partitioned tables combine classical internal partitioned tables with Oracle external partitioned tables to form a more general partitioning called hybrid partitioned tables.">Hybrid Partitioned Tables</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-D8796A92-6DBA-423C-B27A-36C7D4FE2733" name="GUID-D8796A92-6DBA-423C-B27A-36C7D4FE2733"></a><h3 id="VLDBG-GUID-D8796A92-6DBA-423C-B27A-36C7D4FE2733" class="sect3">Using ADO With Hybrid Partitioned Tables</h3>
               <div>
                  <p>You can use Automatic Data Optimization (ADO) policies with hybrid partitioned tables under some conditions.</p>
                  <p>In <a href="manage_hypt.html#GUID-D8796A92-6DBA-423C-B27A-36C7D4FE2733__GUID-D162846C-E99D-4219-A7BF-80B0EA0A26A6">Example 4-46</a>, note that ADO policies are only defined on the internal partitions of the table.
                  </p>
                  <div class="example" id="GUID-D8796A92-6DBA-423C-B27A-36C7D4FE2733__GUID-D162846C-E99D-4219-A7BF-80B0EA0A26A6">
                     <p class="titleinexample">Example 4-46 Using ADO with a Hybrid Partitioned Table</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE TABLE hypt_ado_table
  ( prod_id       NUMBER        NOT NULL,
    cust_id       NUMBER        NOT NULL,
    time_id       DATE          NOT NULL,
    channel_id    NUMBER        NOT NULL,
    promo_id      NUMBER        NOT NULL,
    quantity_sold NUMBER(10,2)  NOT NULL,
    amount_sold   NUMBER(10,2)  NOT NULL
  )
    EXTERNAL PARTITION ATTRIBUTES (
     TYPE ORACLE_LOADER 
     DEFAULT DIRECTORY sales_data
       ACCESS PARAMETERS(
        FIELDS TERMINATED BY ','
        (prod_id,cust_id,time_id DATE 'dd-mm-yyyy',channel_id,promo_id,quantity_sold,amount_sold)
       ) 
      REJECT LIMIT UNLIMITED
     ) 
    PARTITION BY RANGE (time_id)
    (PARTITION sales_2014 VALUES LESS THAN (TO_DATE('01-01-2015','dd-mm-yyyy')),
     PARTITION sales_2015 VALUES LESS THAN (TO_DATE('01-01-2016','dd-mm-yyyy')),
     PARTITION sales_2016 VALUES LESS THAN (TO_DATE('01-01-2017','dd-mm-yyyy')) 
          EXTERNAL LOCATION ('sales2016_data.txt'),
     PARTITION sales_2017 VALUES LESS THAN (TO_DATE('01-01-2018','dd-mm-yyyy')) 
          EXTERNAL DEFAULT DIRECTORY sales_data2 LOCATION ('sales2017_data.txt'),
     PARTITION sales_2018 VALUES LESS THAN (TO_DATE('01-01-2019','dd-mm-yyyy')) 
          EXTERNAL DEFAULT DIRECTORY sales_data3 LOCATION ('sales2018_data.txt'),
     PARTITION sales_2019 VALUES LESS THAN (TO_DATE('01-01-2020','dd-mm-yyyy')) 
          EXTERNAL DEFAULT DIRECTORY sales_data4 LOCATION ('sales2019_data.txt')
 );
Table created.

SQL&gt; SELECT HYBRID FROM USER_TABLES WHERE TABLE_NAME = 'HYPT_ADO_TABLE';
HYB
---
YES

SQL&gt; ALTER TABLE hypt_ado_table MODIFY PARTITION sales_2014 ILM ADD POLICY ROW STORE COMPRESS ADVANCED ROW AFTER 6 MONTHS OF NO MODIFICATION;
Table altered.

SQL&gt; ALTER TABLE hypt_ado_table MODIFY PARTITION sales_2015 ILM ADD POLICY ROW STORE COMPRESS ADVANCED ROW AFTER 6 MONTHS OF NO MODIFICATION;
Table altered.

SQL&gt; SELECT POLICY_NAME, POLICY_TYPE, ENABLED FROM USER_ILMPOLICIES;
POLICY_NAME    POLICY_TYPE     ENA
-------------  --------------- -----
P1             DATA MOVEMENT   YES
P2             DATA MOVEMENT   YES</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-D8796A92-6DBA-423C-B27A-36C7D4FE2733__GUID-B5CD9F31-B3C0-4E69-B8D7-92A217807EDA">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="ilm-strategy-heatmap-ado.html#GUID-59C132D6-D36B-4B5E-B0CA-948C1B0E6836" title="To implement your ILM strategy, you can use Automatic Data Optimization (ADO) to automate the compression and movement of data between different tiers of storage within the database.">Using Automatic Data Optimization</a> for information about ADO policies
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-C33AD752-50CE-497E-B19A-8D7EF153D0DF" name="GUID-C33AD752-50CE-497E-B19A-8D7EF153D0DF"></a><h3 id="VLDBG-GUID-C33AD752-50CE-497E-B19A-8D7EF153D0DF" class="sect3">Splitting Partitions in a Hybrid Partitioned Table</h3>
               <div>
                  <p></p>
                  <p>In <a href="manage_hypt.html#GUID-C33AD752-50CE-497E-B19A-8D7EF153D0DF__GUID-EED9E506-AB5B-460F-B341-CCC970AF9299">Example 4-47</a>, the default (MAXVALUE) partition is split into a two partitions: a new partition and the existing default position. You can split a default partition similar to splitting any other partition.
                  </p>
                  <div class="example" id="GUID-C33AD752-50CE-497E-B19A-8D7EF153D0DF__GUID-EED9E506-AB5B-460F-B341-CCC970AF9299">
                     <p class="titleinexample">Example 4-47 Splitting the Default Partition in a Hybrid Partitioned Table</p><pre class="oac_no_warn" dir="ltr">
CREATE TABLE hybrid_split_table
  ( prod_id       NUMBER        NOT NULL,
    cust_id       NUMBER        NOT NULL,
    time_id       DATE          NOT NULL,
    channel_id    NUMBER        NOT NULL,
    promo_id      NUMBER        NOT NULL,
    quantity_sold NUMBER(10,2)  NOT NULL,
    amount_sold   NUMBER(10,2)  NOT NULL
  )
    EXTERNAL PARTITION ATTRIBUTES (
     TYPE ORACLE_LOADER 
     DEFAULT DIRECTORY sales_data
       ACCESS PARAMETERS(
        FIELDS TERMINATED BY ','
        (prod_id,cust_id,time_id DATE 'dd-mm-yyyy',channel_id,promo_id,quantity_sold,amount_sold)
       ) 
      REJECT LIMIT UNLIMITED
     ) 
    PARTITION BY RANGE (time_id)
     (PARTITION sales_2016 VALUES LESS THAN (TO_DATE('01-01-2017','dd-mm-yyyy')) 
          EXTERNAL LOCATION ('sales2016_data.txt'),
      PARTITION sales_2017 VALUES LESS THAN (TO_DATE('01-01-2018','dd-mm-yyyy')) 
          EXTERNAL LOCATION ('sales2017_data.txt'),
     PARTITION sales_2018 VALUES LESS THAN (TO_DATE('01-01-2019','dd-mm-yyyy')),
     PARTITION sales_2019 VALUES LESS THAN (TO_DATE('01-01-2020','dd-mm-yyyy')),
     PARTITION sales_future VALUES LESS THAN (MAXVALUE)
 );

SELECT HYBRID FROM USER_TABLES WHERE TABLE_NAME = 'HYBRID_SPLIT_TABLE';
HYB
---
YES

SELECT DEFAULT_DIRECTORY_NAME FROM USER_EXTERNAL_TABLES WHERE TABLE_NAME = 'HYBRID_SPLIT_TABLE';
DEFAULT_DIRECTORY_NAME
--------------------------------------------------------------------------------
SALES_DATA

INSERT INTO hybrid_split_table VALUES (1001,100,TO_DATE('10-02-2018','dd-mm-yyyy'),10,15,500,7500);
INSERT INTO hybrid_split_table VALUES (1002,110,TO_DATE('15-06-2018','dd-mm-yyyy'),12,18,100,3200);
...
INSERT INTO hybrid_split_table VALUES (1002,110,TO_DATE('12-01-2019','dd-mm-yyyy'),12,18,150,4800);
INSERT INTO hybrid_split_table VALUES (1001,100,TO_DATE('16-02-2019','dd-mm-yyyy'),10,15,400,6500);
...
INSERT INTO hybrid_split_table VALUES (1002,110,TO_DATE('19-02-2020','dd-mm-yyyy'),12,18,150,4800);
INSERT INTO hybrid_split_table VALUES (1001,100,TO_DATE('12-03-2020','dd-mm-yyyy'),10,15,400,6500);
...

SELECT * FROM hybrid_split_table PARTITION(sales_2016);
   PROD_ID    CUST_ID TIME_ID   CHANNEL_ID   PROMO_ID QUANTITY_SOLD AMOUNT_SOLD
---------- ---------- --------- ---------- ---------- ------------- -----------
      1001        100 10-JAN-16         10         15           500        7500
      1002        110 25-JAN-16         12         18           100        3200
...

SELECT * FROM hybrid_split_table PARTITION(sales_2017);
   PROD_ID    CUST_ID TIME_ID   CHANNEL_ID   PROMO_ID QUANTITY_SOLD AMOUNT_SOLD
---------- ---------- --------- ---------- ---------- ------------- -----------
      1002        110 15-JAN-17         12         18           100        3200
      1001        100 10-FEB-17         10         15           500        7500
...

SELECT * FROM hybrid_split_table PARTITION(sales_2018);
   PROD_ID    CUST_ID TIME_ID   CHANNEL_ID   PROMO_ID QUANTITY_SOLD AMOUNT_SOLD
---------- ---------- --------- ---------- ---------- ------------- -----------
      1001        100 10-FEB-18         10         15           500        7500
      1002        110 15-JUN-18         12         18           100        3200
...

SELECT * FROM hybrid_split_table PARTITION(sales_2019);
   PROD_ID    CUST_ID TIME_ID   CHANNEL_ID   PROMO_ID QUANTITY_SOLD AMOUNT_SOLD
---------- ---------- --------- ---------- ---------- ------------- -----------
      1002        110 12-JAN-19         12         18           150        4800
      1001        100 16-FEB-19         10         15           400        6500
...

<span class="bold">SELECT * FROM hybrid_split_table PARTITION(sales_future);</span>
   PROD_ID    CUST_ID TIME_ID   CHANNEL_ID   PROMO_ID QUANTITY_SOLD AMOUNT_SOLD
---------- ---------- --------- ---------- ---------- ------------- -----------
      1002        110 19-FEB-20         12         18           150        4800
      1001        100 12-MAR-20         10         15           400        6500
      1001        100 31-MAR-20         10         15           600        8000
      2105        101 25-APR-20         12         19           100        3000

ALTER TABLE hybrid_split_table 
  SPLIT PARTITION sales_future INTO
  (PARTITION sales_2020 VALUES LESS THAN (TO_DATE('01-01-2021','dd-mm-yyyy')),
   PARTITION sales_future
   );
<span class="bold">
SELECT * FROM hybrid_split_table PARTITION(sales_2020);</span>
   PROD_ID    CUST_ID TIME_ID   CHANNEL_ID   PROMO_ID QUANTITY_SOLD AMOUNT_SOLD
---------- ---------- --------- ---------- ---------- ------------- -----------
      1002        110 19-FEB-20         12         18           150        4800
      1001        100 12-MAR-20         10         15           400        6500
      1001        100 31-MAR-20         10         15           600        8000
      2105        101 25-APR-20         12         19           100        3000
<span class="bold">
SELECT * FROM hybrid_split_table PARTITION(sales_future);</span>
no rows selected
</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Use the Export and Import utilities in Oracle Data Pump to migrate data from one database to another.">
      <meta name="description" content="Use the Export and Import utilities in Oracle Data Pump to migrate data from one database to another.">
      <title>Migrating Data Using Oracle Data Pump</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Upgrade Guide">
      <meta property="og:description" content="Use the Export and Import utilities in Oracle Data Pump to migrate data from one database to another.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Upgrade Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00">
      <meta name="dcterms.title" content="Database Upgrade Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96252-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="downgrading-oracle-db-after-upgrade.html" title="Previous" type="text/html">
      <link rel="next" href="behavior-changes-deprecated-desupport-oracle-database.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="downgrading-oracle-db-after-upgrade.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="behavior-changes-deprecated-desupport-oracle-database.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Upgrade Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Migrating Data Using Oracle Data Pump</li>
            </ol>
            <a id="GUID-1BCDF563-1843-4B9F-B72E-75A0634D64C9" name="GUID-1BCDF563-1843-4B9F-B72E-75A0634D64C9"></a><a id="UPGRD008"></a>
            
            <h2 id="UPGRD-GUID-1BCDF563-1843-4B9F-B72E-75A0634D64C9" class="sect2"><span class="enumeration_chapter">8 </span>Migrating Data Using Oracle Data Pump
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Use the Export and Import utilities in Oracle Data Pump to migrate data from one database to another.</p>
               <p>Oracle Data Pump provides high performance Export (<code>expdp</code>) and Import (<code>impdp</code>) utilities. These utilities facilitate upgrading to Oracle Database.
               </p>
               <div class="infoboxnotealso" id="GUID-1BCDF563-1843-4B9F-B72E-75A0634D64C9__GUID-575C3B36-CC15-40A6-872D-44AE958DD858">
                  <p class="notep1">See Also:</p>
                  <p><a href="../sutil/index.html" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> for detailed information about Data Pump and the Export and Import utilities
                  </p>
               </div>
               <p>Topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="migrating-data-after-upgrade-oracle.html#GUID-F0E5FE65-14A1-4621-BA54-4239B84A1CBC">Overview of Data Pump and Export/Import For Migrating Data</a><br>Oracle provides Data Pump Export and Import to migrate (move) data from one Oracle database to another.
                  </li>
                  <li class="ulchildlink"><a href="migrating-data-after-upgrade-oracle.html#GUID-E6B205EB-3D36-41B9-A2C3-440DBFB00FAB">Migrating Data With Oracle Data Pump Before Upgrades</a><br>Use this Oracle Data Pump procedure to export data from the source database before you install the new Oracle Database software. Then import the data into the target upgraded database.
                  </li>
                  <li class="ulchildlink"><a href="migrating-data-after-upgrade-oracle.html#GUID-072AC19E-EEBF-4663-AB3A-4CFA74873C87">Importing a Full Oracle Database Using a Network Link</a><br>This database export/import method is an alternative to Oracle Data Pump migrations that is helpful when you are migrating to a different storage system.
                  </li>
                  <li class="ulchildlink"><a href="migrating-data-after-upgrade-oracle.html#GUID-A49DB1A6-CFB1-4830-89C4-BBF2E4A86DBC">Data Pump Requirements When Downgrading Oracle Database</a><br>You can obtain a downward-compatible dump file using Data Pump.
                  </li>
               </ul>
            </div>
            <a id="UPGRD12560"></a><div class="props_rev_3"><a id="GUID-F0E5FE65-14A1-4621-BA54-4239B84A1CBC" name="GUID-F0E5FE65-14A1-4621-BA54-4239B84A1CBC"></a><h3 id="UPGRD-GUID-F0E5FE65-14A1-4621-BA54-4239B84A1CBC" class="sect3">Overview of Data Pump and Export/Import For Migrating Data </h3>
               <div>
                  <p>Oracle provides Data Pump Export and Import to migrate (move) data from one Oracle database to another.</p>
                  <p>Migrating data by using Oracle Data Pump offers the following benefits:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Supports filtering the metadata that is exported and imported based upon objects and object types, using <code class="codeph">INCLUDE</code> and <code class="codeph">EXCLUDE</code> parameters.
                        </p>
                     </li>
                     <li>
                        <p>Supports different modes for unloading/loading portions of the database including: full database mode, schema mode, table mode, tablespace mode, and transportable tablespace mode.</p>
                     </li>
                     <li>
                        <p>Enables you to specify how partitioned tables should be handled during import operations, using the <code class="codeph">PARTITION_OPTIONS</code> parameter. 
                        </p>
                     </li>
                     <li>
                        <p>Provides support for the full range of data types. </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="choose-an-upgrade-method-for-oracle-database.html#GUID-C42206CA-0BCC-424A-A714-FBBE1B0A7BDE">The Export/Import Method for Migrating Data When Upgrading Oracle Database</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-F0E5FE65-14A1-4621-BA54-4239B84A1CBC__GUID-29FCB048-EA58-46CA-9278-97EE1626618C">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span class="italic">Oracle Database Utilities</span></a> for an overview of Data Pump Export and Import
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="migrating-data-after-upgrade-oracle.html#GUID-1BCDF563-1843-4B9F-B72E-75A0634D64C9" title="Use the Export and Import utilities in Oracle Data Pump to migrate data from one database to another.">Migrating Data Using Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD12565"></a><div class="props_rev_3"><a id="GUID-E6B205EB-3D36-41B9-A2C3-440DBFB00FAB" name="GUID-E6B205EB-3D36-41B9-A2C3-440DBFB00FAB"></a><h3 id="UPGRD-GUID-E6B205EB-3D36-41B9-A2C3-440DBFB00FAB" class="sect3">Migrating Data With Oracle Data Pump Before Upgrades</h3>
               <div>
                  <p>Use this Oracle Data Pump procedure to export data from the source database before you install the new Oracle Database software. Then import the data into the target upgraded database.</p>
                  <div class="section" id="GUID-E6B205EB-3D36-41B9-A2C3-440DBFB00FAB__BABFCIDH"></div>
                  <!-- class="section" -->
                  <ol>
                     <li>
                        <p>Install the new Oracle Database software, and ensure that it is patched to the latest Oracle bundle patch or patch set update (BP or PSU). Installation steps for Oracle Database are covered in your operating system-specific Oracle documentation.</p>
                     </li>
                     <li>
                        <p>Export data from the current database using the Export utility shipped with the current database.</p>
                        <p> The current database must not be available for updates during and after the export. If the current database is available to users for updates after the export, then before making the current database available, you must put procedures in place to copy the changes made in the current database to the new database after the import is complete.</p>
                        <p>To obtain a consistent point from which you can update the exported database, use one of the following options: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set <code class="codeph">FLASHBACK_TIME=SYSTIMESTAMP</code> in your parameter file, so that the image you obtain of the data in the tables that you export represents the committed state of the table data at the same single point-in-time for all the tables that you are exporting. 
                              </p>
                           </li>
                           <li>
                              <p>Use <code class="codeph">FLASHBACK_SCN</code> to select a specific system change number (SCN) that the Export can use to enable the Flashback Query utility.
                              </p>
                           </li>
                        </ul>
                        <p>Using a flashback option increases UNDO usage and retention.</p>
                     </li>
                     <li>
                        <p>Create the new database. If the new database is on the same server, and it has the same name as the current database, then shut down the current database before creating the new database.</p>
                        <p>(Option) You can change the storage parameters from the source database. You can pre-create tablespaces, users, and tables in the new database to improve space usage by changing storage parameters. When you pre-create tables using SQL*Plus, either run the database in the original database compatibility mode or make allowances for the specific data definition conversions that occur during import. </p>
                     </li>
                     <li>
                        <p>Start SQL*Plus in the new Oracle Database environment, and start an Oracle Database instance.</p>
                        <p>For example:</p><pre class="pre codeblock"><code>$ SQLPLUS / AS SYSDBA
SQL&gt; STARTUP</code></pre></li>
                     <li>
                        <p>If you have pre-created items, then specify the <code class="codeph">TABLE_EXISTS_ACTION=APPEND</code> option for Data Pump Import.
                        </p>
                        <div class="infoboxnote" id="GUID-E6B205EB-3D36-41B9-A2C3-440DBFB00FAB__GUID-1244660B-CC5B-42DA-A292-579808540568">
                           <p class="notep1">Note:</p>
                           <p>If the new database is created on the same server as the source database, and you do not want to overwrite the source database data files, then you must pre-create the tablespaces and set the following parameter values for the Data pump import:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">REUSE_DATAFILES=N</code> for Data Pump Import
                                 </p>
                                 <p>(Option) You can use the <code class="codeph">REMAP_DATAFILE, REMAP_TABLESPACE</code> and <code class="codeph">REMAP_TABLE</code> options to remap references to export database names in the dump file set to new, non-colliding names in the importing database.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DESTROY=N</code> for original Import.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>Import the objects exported from the current database by using the new database Import utility. To save the informational messages and error messages from the import session to a file, use the following parameters:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">LOGFILE</code> parameter for Data Pump Import
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">LOG</code> parameter for original Import
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>After the import, check the import log file for information about the imports of specific objects that completed successfully. If there were failures, check for information about any objects that failed.</p>
                     </li>
                     <li>
                        <p>Use further Import scenarios, or use SQL scripts that create the database objects to clean up incomplete imports (or possibly to start an entirely new import).</p>
                        <div class="infoboxnote" id="GUID-E6B205EB-3D36-41B9-A2C3-440DBFB00FAB__GUID-B2D6C107-24E0-4B2F-A259-53D4EA42A254">
                           <p class="notep1">Note:</p>
                           <p>If a Data Pump Export or Import job encounters an unrecoverable error, then the job can be restarted after the condition inducing the failure is corrected. The job continues automatically from the point of failure.</p>
                        </div>
                     </li>
                     <li>
                        <p>If changes are made to the current database after the export, then make sure that those changes are propagated to the new database before making it available to users. Refer to step 1 in this procedure.</p>
                     </li>
                     <li>
                        <p>Complete required post-upgrade tasks for your upgrade as described in Chapter 4, “Post-Upgrade Tasks for Oracle Database.” </p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../sutil/oracle-data-pump-export-utility.html#SUTIL200" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="migrating-data-after-upgrade-oracle.html#GUID-1BCDF563-1843-4B9F-B72E-75A0634D64C9" title="Use the Export and Import utilities in Oracle Data Pump to migrate data from one database to another.">Migrating Data Using Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52674"></a><div class="props_rev_3"><a id="GUID-072AC19E-EEBF-4663-AB3A-4CFA74873C87" name="GUID-072AC19E-EEBF-4663-AB3A-4CFA74873C87"></a><h3 id="UPGRD-GUID-072AC19E-EEBF-4663-AB3A-4CFA74873C87" class="sect3">Importing a Full Oracle Database Using a Network Link</h3>
               <div>
                  <p>This database export/import method is an alternative to Oracle Data Pump migrations that is helpful when you are migrating to a different storage system.</p>
                  <p>Set up a database link and use the Data Pump Import utility (<code>impdp</code>) to perform a full database import from a source database to a destination database. Using this method to migrate data means that dump files are not written, so you do not have to copy over dump files. This method is of particular benefit when you use different storage systems. However, you must work within the limits imposed by the earlier release Oracle Data Pump software during the Oracle Database export. 
                  </p>
                  <div class="infoboxnote" id="GUID-072AC19E-EEBF-4663-AB3A-4CFA74873C87__GUID-B4073A00-4C22-49E1-8160-197F0E371837">
                     <p class="notep1">Note:</p>
                     <p>To avoid interoperability errors, ensure that you have applied appropriate patchsets to the database you want to upgrade before you start the upgrade.</p>
                  </div>
                  <ol>
                     <li>
                        <p>Ensure that the exporting user at the source database has the <code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code> role.
                        </p>
                        <p>You must specify this exporting user when you create the database link.</p>
                     </li>
                     <li>
                        <p>Ensure that the importing user at the destination database has the <code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code> role.
                        </p>
                     </li>
                     <li>
                        <p>Create and test a database link between the source and destination databases.</p>
                     </li>
                     <li>
                        <p>Use the following command syntax to start a Data Pump export, where <code class="codeph"><span class="variable" translate="no">import_user</span></code> is the username for the importing user, and <code class="codeph"><span class="variable" translate="no">db_link</span></code> is the name of the database link owned by the exporting user:
                        </p><pre class="pre codeblock"><code>impdp <span class="variable" translate="no">import_user</span> NETWORK_LINK=<span class="variable" translate="no">db_link</span> FULL=Y NOLOGFILE=Y;
</code></pre><div class="infoboxnote" id="GUID-072AC19E-EEBF-4663-AB3A-4CFA74873C87__GUID-9DE96B49-75EC-48C3-835E-669FEC5692DC">
                           <p class="notep1">Note:</p>
                           <p>Running this command on the importing database implicitly triggers a Data Pump export operation (<code class="codeph">expdp</code>) on the exporting Oracle Database. 
                           </p>
                        </div>
                     </li>
                     <li>
                        <p> A log file for the import operation writes to the <code class="codeph">DATA_PUMP_DIR</code> directory. You can discover the location of this directory by running the following command:
                        </p><pre class="pre codeblock"><code>SQL&gt; select * from dba_directories where DIRECTORY_NAME like 'DATA_PUMP_DIR';
</code></pre><p>In carrying out this command, be aware that the XDB repository is not moved in a full database export and import operation. LONG columns and NESTED columns are also not moved. However, user-created XML schemas are moved.</p>
                     </li>
                  </ol>
                  <div class="infoboxnote" id="GUID-072AC19E-EEBF-4663-AB3A-4CFA74873C87__GUID-A9EDADAF-A48A-49E5-9F7E-E4BA87C069AB">
                     <p class="notep1">Note:</p>
                     <p>The import operation recreates users on the new destination server. The creation date for users in the <code class="codeph">dba_users</code> table shows the actual import date. The expiration date is updated to the value of the <code class="codeph">creation_date</code> plus the <code class="codeph">password_life_time</code> columns. The creation dates in the <code class="codeph">dba_users</code> table in the destination database are different from the values for the <code class="codeph">dba_users</code> table in the source database.
                     </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="migrating-data-after-upgrade-oracle.html#GUID-E6B205EB-3D36-41B9-A2C3-440DBFB00FAB">Migrating Data With Oracle Data Pump Before Upgrades</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-072AC19E-EEBF-4663-AB3A-4CFA74873C87__GUID-CF9CAF1A-9373-4641-823C-14C782B349AF">
                     <p class="notep1">See Also:</p>
                     <p><a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> to obtain the latest patchsets
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="migrating-data-after-upgrade-oracle.html#GUID-1BCDF563-1843-4B9F-B72E-75A0634D64C9" title="Use the Export and Import utilities in Oracle Data Pump to migrate data from one database to another.">Migrating Data Using Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD12563"></a><div class="props_rev_3"><a id="GUID-A49DB1A6-CFB1-4830-89C4-BBF2E4A86DBC" name="GUID-A49DB1A6-CFB1-4830-89C4-BBF2E4A86DBC"></a><h3 id="UPGRD-GUID-A49DB1A6-CFB1-4830-89C4-BBF2E4A86DBC" class="sect3">Data Pump Requirements When Downgrading Oracle Database</h3>
               <div>
                  <p>You can obtain a downward-compatible dump file using Data Pump.</p>
                  <p> When you use Oracle Data Pump with the downgrade process, the Oracle Database release to which you downgrade must be no more than one release earlier than the release from which you are downgrading.</p>
                  <p>Use one of the following Data Pump Export methods to obtain a downward-compatible dump file:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the Data Pump Export utility included in the current release Oracle Database home, and set the <span class="parmname" translate="no">VERSION</span> parameter to the release of the earlier target to which you are downgrading.
                        </p>
                        <p> Data Pump Import cannot read dump file sets created by the version of Oracle Data Pump that is later than the current Oracle Database release, unless you created these dump file sets with the <span class="parmname" translate="no">VERSION</span> parameter set to the release number of the target database. For this reason, the best way to perform a downgrade is to use Data Pump Export with the <span class="parmname" translate="no">VERSION</span> parameter set to the release number of the target database to which you are downgrading.
                        </p>
                     </li>
                     <li>
                        <p>Use the Data Pump Export utility with DOWNGRADE using the NETWORK_LINK parameter with the VERSION parameter.</p>
                        <p>If the compatibility level of the database to which you want to downgrade is earlier than the version of the export dump file sets you created, then you can still transfer data over a database link if the compatibility level of the Oracle Database from which you want to export is within two major release numbers. For example, if one database is Oracle Database 18c, then the other database must be 12<span class="italic">c</span> release 1 (12.1), or 12<span class="italic">c</span> release 2 (12.2). You can use Data Pump Export this way to recover from having the VERSION set to an incompatible value during a previous dump file export. 
                        </p>
                        <div class="infoboxnote" id="GUID-A49DB1A6-CFB1-4830-89C4-BBF2E4A86DBC__GUID-FE51B155-20C6-42AE-8965-54DA80D8FC54">
                           <p class="notep1">Note:</p>
                           <p>If you raise the compatibility level after you install the new release of Oracle Database, so that it uses features from the new release, then objects that use those new features cannot be downgraded. For example, if you use the long identifiers available with Oracle Database 18c, then objects with those long identifiers cannot be downgraded. After the downgrade, when you try to import those objects, and the Data Pump Import utility attempts to recreate objects that use long identifiers, you receive an error.</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-A49DB1A6-CFB1-4830-89C4-BBF2E4A86DBC__GUID-CD1B7371-6762-4F2E-87FB-43BFA47A6BF9">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sutil/oracle-data-pump-overview.html#SUTIL110" target="_blank"><span class="italic">Oracle Database Utilities</span></a> for more information about using the <span class="parmname" translate="no">VERSION</span> parameter
                           </p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="migrating-data-after-upgrade-oracle.html#GUID-1BCDF563-1843-4B9F-B72E-75A0634D64C9" title="Use the Export and Import utilities in Oracle Data Pump to migrate data from one database to another.">Migrating Data Using Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
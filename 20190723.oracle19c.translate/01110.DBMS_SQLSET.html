<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_SQLTUNE package provides an interface to manage SQL tuning sets."></meta>
      <meta name="description" content="The DBMS_SQLTUNE package provides an interface to manage SQL tuning sets."></meta>
      <title>DBMS_SQLSET</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_SQLTUNE package provides an interface to manage SQL tuning sets."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_SQLQ.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_SQLTUNE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_SQLQ.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_SQLTUNE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_SQLSET</li>
            </ol>
            <a id="GUID-DFF30D13-6724-46FC-B711-91C0A59EB1E1" name="GUID-DFF30D13-6724-46FC-B711-91C0A59EB1E1"></a>
            
            <h2 id="ARPLS-GUID-DFF30D13-6724-46FC-B711-91C0A59EB1E1" class="sect2"><span class="enumeration_chapter">162</span> DBMS_SQLSET</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_SQLTUNE</code>包提供了一个用于管理SQL调优集的接口。
               </p>
               <p>此程序包提供相同的子程序，但在某些情况下名称略有不同，作为<code class="codeph">DBMS_SQLTUNE</code>的SQL调整集子程序。不同之处在于<code class="codeph">DBMS_SQLSET</code>不需要Oracle Tuning Pack。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_SQLSET.html#GUID-69FACBF6-81B2-4023-8B7C-F057B2936AF1" title="使用此包管理SQL调优集。">DBMS_SQLSET概述</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SQLSET.html#GUID-2690BA8B-3598-4304-927C-2012BF4647C2" title="该程序包可供PUBLIC使用，并执行自己的安全检查。">DBMS_SQLSET安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SQLSET.html#GUID-97984C4A-BACE-4FAC-A9C2-5D872BF2B7C9" title="DBMS_SQLTUNE包中的SELECT_ *子程序返回SQLSET_ROW类型的对象。">DBMS_SQLSET数据结构</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SQLSET.html#GUID-89A098DD-7445-46A5-BF71-E0DCE85BEC31" title="此表列出了DBMS_SQLSET子程序并简要描述了它们。">DBMS_SQLSET子程序摘要</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-69FACBF6-81B2-4023-8B7C-F057B2936AF1" name="GUID-69FACBF6-81B2-4023-8B7C-F057B2936AF1"></a><h3 id="ARPLS-GUID-69FACBF6-81B2-4023-8B7C-F057B2936AF1" class="sect3"><span class="enumeration_section">162.1</span> DBMS_SQLSET概述</h3>
               <div>
                  <p>使用此包管理SQL调优集。</p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-69FACBF6-81B2-4023-8B7C-F057B2936AF1__GUID-5EB347B3-6508-4895-BC70-815D432844B0">
                        <p class="notep1">注意：</p>
                        <p>所有<code class="codeph">DBMS_SQLSET</code>子程序在<code class="codeph">DBMS_SQLTUNE</code>包中都具有等价物。
                        </p>
                     </div>
                     <p>SQL调优集存储SQL语句以及以下信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>执行上下文，例如解析模式名称和绑定值</p>
                        </li>
                        <li>
                           <p>执行统计信息，例如平均运行时间和执行计数</p>
                        </li>
                        <li>
                           <p>执行计划，是数据库为运行SQL语句而执行的操作序列</p>
                        </li>
                        <li>
                           <p>行源统计信息，例如为计划内执行的每个操作处理的行数</p>
                        </li>
                     </ul>
                     <p>您可以通过从多个源过滤或排序SQL语句来创建SQL调优集：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用<a href="DBMS_SQLSET.html#GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57" title="此函数从共享SQL区域收集SQL语句。">SELECT_CURSOR_CACHE函数</a>的共享SQL区域</p>
                        </li>
                        <li>
                           <p>使用<a href="DBMS_SQLSET.html#GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8" title="This function collects SQL statements from the workload repository.">SELECT_WORKLOAD_REPOSITORY函数</a>从自动工作负载存储库中<a href="DBMS_SQLSET.html#GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8" title="此函数从工作负载存储库收集SQL语句。">排名靠前的</a> SQL语句</p>
                        </li>
                        <li>
                           <p>使用<a href="DBMS_SQLSET.html#GUID-9D995019-91AB-4B1E-9EAF-031050789B21" title="这是一个读取SQL调优集内容的表函数。">SELECT_SQLSET函数的</a>其他SQL调优集</p>
                        </li>
                        <li>
                           <p>SQL Performance Analyzer任务比较结果使用<a href="DBMS_SQLSET.html#GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0" title="此函数从SQL Performance Analyzer比较任务收集SQL语句。">SELECT_SQLPA_TASK函数</a></p>
                        </li>
                        <li>
                           <p>使用<a href="DBMS_SQLSET.html#GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649" title="此表函数读取一个或多个跟踪文件的内容，并以sqlset_row的格式返回它找到的SQL语句。">SELECT_SQL_TRACE函数的</a> SQL跟踪文件</p>
                        </li>
                        <li>
                           <p>用户定义的工作负载</p>
                        </li>
                     </ul>
                     <p><a href="DBMS_SQLSET.html#GUID-89A098DD-7445-46A5-BF71-E0DCE85BEC31" title="此表列出了DBMS_SQLSET子程序并简要描述了它们。">DBMS_SQLSET子程序摘要中</a>列出的完整子程序组有助于实现此功能。例如：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_SQLSET.html#GUID-86F56216-7D47-4889-96D6-FC817E8AF44C" title="此过程或函数在数据库中创建SQL调优集对象。">CREATE_SQLSET过程和函数</a>在数据库中创建SQL调优集对象。
                           </p>
                        </li>
                        <li>
                           <p><a href="DBMS_SQLSET.html#GUID-75C4DB0B-519B-47B5-B42B-AF021F876428" title="此过程使用一组选定的SQL语句填充SQL调优集。您可以多次调用该过程来添加新的SQL语句或替换现有语句的属性。">LOAD_SQLSET过程</a>使用一组选定的SQL填充SQL调优集。</p>
                        </li>
                        <li>
                           <p><a href="DBMS_SQLSET.html#GUID-33AEFA37-9383-443E-8621-03711438430F" title="此过程将工作负载从共享SQL区域捕获到SQL调优集中。">CAPTURE_CURSOR_CACHE过程</a>在指定的时间间隔内从共享SQL区域收集SQL语句，尝试构建数据库工作负载的真实图像。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-2690BA8B-3598-4304-927C-2012BF4647C2" name="GUID-2690BA8B-3598-4304-927C-2012BF4647C2"></a><h3 id="ARPLS-GUID-2690BA8B-3598-4304-927C-2012BF4647C2" class="sect3"><span class="enumeration_section">162.2</span> DBMS_SQLSET安全模型</h3>
               <div>
                  <p>该程序包可供<code class="codeph">PUBLIC</code>使用，并执行自己的安全检查。
                  </p>
                  <div class="section">
                     <p>SQL调优集子程序需要<code class="codeph">ADMINISTER SQL TUNING SET</code>或<code class="codeph">ADMINISTER ANY SQL TUNING SET</code>权限。具有<code class="codeph">ADMINISTER SQL TUNING SET</code>权限的用户只能创建和修改他们拥有的SQL调优集。<code class="codeph">ADMINISTER ANY SQL TUNING SET</code>权限允许用户操作所有SQL调优集，甚至是其他用户拥有的调优集。例如，您可以使用<a href="DBMS_SQLSET.html#GUID-86F56216-7D47-4889-96D6-FC817E8AF44C" title="此过程或函数在数据库中创建SQL调优集对象。">CREATE_SQLSET过程和函数</a>来创建由不同用户拥有的SQL调优集。在这种情况下，不同的用户不需要具有<code class="codeph">ADMINISTER SQL TUNING SET</code>权限来操作SQL调优集。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-97984C4A-BACE-4FAC-A9C2-5D872BF2B7C9" name="GUID-97984C4A-BACE-4FAC-A9C2-5D872BF2B7C9"></a><h3 id="ARPLS-GUID-97984C4A-BACE-4FAC-A9C2-5D872BF2B7C9" class="sect3"><span class="enumeration_section">162.3</span> DBMS_SQLSET数据结构</h3>
               <div>
                  <p><code class="codeph">DBMS_SQLTUNE</code>包中的<code class="codeph">SELECT_ <span class="codeinlineitalic">*</span></code>子程序返回<code class="codeph">SQLSET_ROW</code>类型的对象。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-97984C4A-BACE-4FAC-A9C2-5D872BF2B7C9__GUID-821BE719-B8A5-43DB-BCCA-8D49306ACF68">对象类型</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_SQLTUNE.html#GUID-1F4AFB03-7B29-46FC-B3F2-CB01EC36326C" title="SQLSET_ROW对象为用户建模SQL调整集的内容。">SQLSET_ROW对象类型</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS68385"></a><a id="ARPLS68386"></a><a id="ARPLS68386"></a><a id="ARPLS68385"></a><div class="props_rev_3"><a id="GUID-1F4AFB03-7B29-46FC-B3F2-CB01EC36326C" name="GUID-1F4AFB03-7B29-46FC-B3F2-CB01EC36326C"></a><h4 id="ARPLS-GUID-1F4AFB03-7B29-46FC-B3F2-CB01EC36326C" class="sect4"><span class="enumeration_section">162.3.1</span> SQLSET_ROW对象类型</h4>
                  <div>
                     <p><code class="codeph">SQLSET_ROW</code>对象为用户建模SQL调整集的内容。
                     </p>
                     <div class="section">
                        <p>逻辑上，SQL调优集是<code class="codeph">SQLSET_ROW</code>对象的集合。每个<code class="codeph">SQLSET_ROW</code>包含一个SQL语句及其执行上下文，统计信息，绑定和计划。<code class="codeph">SELECT_ <span class="codeinlineitalic">*</span></code>子程序每个都将数据源建模为<code class="codeph">SQLSET_ROW</code>对象的集合，每个对象由（ <code class="codeph">sql_id</code> ， <code class="codeph">plan_hash_value</code> ）唯一标识。类似地， <code class="codeph">LOAD_SQLSET</code>过程将行类型为<code class="codeph">SQLSET_ROW</code>的游标作为输入，根据用户请求的策略<code class="codeph">SQLSET_ROW</code>处理每个<code class="codeph">SQLSET_ROW</code> 。
                        </p>
                        <p>几个子程序包接受SQL调优集或数据源内容的基本过滤器。这些过滤器根据定义的<code class="codeph">SQLSET_ROW</code>中的属性表示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F4AFB03-7B29-46FC-B3F2-CB01EC36326C__GUID-CD530571-1772-407A-B5DB-86B3DAF88175">句法</p><pre class="pre codeblock"><code>CREATE TYPE sqlset_row AS对象（sql_id VARCHAR（13），force_matching_signature NUMBER，sql_text CLOB，object_list sql_objects，bind_data RAW（2000），parsing_schema_name VARCHAR2（30），模块VARCHAR2（48），action VARCHAR2（32），elapsed_time NUMBER，cpu_time NUMBER ，buffer_gets NUMBER，disk_reads NUMBER，direct_writes NUMBER，rows_processed NUMBER，提取NUMBER，执行NUMBER，end_of_fetch_count NUMBER，optimizer_cost NUMBER，optimizer_env RAW（2000），优先级NUMBER，command_type NUMBER，first_load_time VARCHAR2（19），stat_period NUMBER，active_stat_period NUMBER，其他CLOB，plan_hash_value NUMBER，sql_plan sql_plan_table_type，bind_list sql_binds，con_dbid NUMBER，last_exec_start_time VARCHAR2（19））</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F4AFB03-7B29-46FC-B3F2-CB01EC36326C__GUID-01650B47-07E4-4203-BFBB-BF3825608295">属性</p>
                        <div class="tblformal" id="GUID-1F4AFB03-7B29-46FC-B3F2-CB01EC36326C__GUID-B159696E-3E91-4C70-9913-ADA275EDBE5F">
                           <p class="titleintable">表162-1 SQLSET_ROW属性</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SQLSET_ROW属性" width="100%" border="1" summary="This table describes the fields of the SQLSET_ROW Object Type and briefly describes them." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e811">属性</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e814">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e819" headers="d917986e811 ">
                                       <p><code class="codeph">SQL_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e819 d917986e814 ">
                                       <p>唯一的SQL ID。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e827" headers="d917986e811 ">
                                       <p><code class="codeph">forcing_matching_signature</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e827 d917986e814 ">
                                       <p>删除了文字，大小写和空格的签名。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e835" headers="d917986e811 ">
                                       <p><code class="codeph">SQL_TEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e835 d917986e814 ">
                                       <p>SQL语句的全文。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e843" headers="d917986e811 ">
                                       <p><code class="codeph">object_list中</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e843 d917986e814 ">
                                       <p>目前尚未实施。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e851" headers="d917986e811 ">
                                       <p><code class="codeph">bind_data</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e851 d917986e814 ">
                                       <p>绑定为此SQL捕获的数据。请注意，您不能为此参数和<code class="codeph">bind_list</code>规定参数 - 它们是互斥的。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e862" headers="d917986e811 ">
                                       <p><code class="codeph">parsing_schema_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e862 d917986e814 ">
                                       <p>解析SQL的模式。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e870" headers="d917986e811 ">
                                       <p><code class="codeph">模</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e870 d917986e814 ">
                                       <p>SQL的最后一个应用程序模块。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e878" headers="d917986e811 ">
                                       <p><code class="codeph">行动</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e878 d917986e814 ">
                                       <p>SQL的上一个应用程序操作。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e886" headers="d917986e811 ">
                                       <p><code class="codeph">ELAPSED_TIME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e886 d917986e814 ">
                                       <p>此SQL语句的总耗用时间。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e894" headers="d917986e811 ">
                                       <p><code class="codeph">CPU_TIME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e894 d917986e814 ">
                                       <p>此SQL语句的CPU总时间总和。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e902" headers="d917986e811 ">
                                       <p><code class="codeph">BUFFER_GETS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e902 d917986e814 ">
                                       <p>缓冲区总和的总和。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e911" headers="d917986e811 ">
                                       <p><code class="codeph">DISK_READS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e911 d917986e814 ">
                                       <p>总和磁盘读取总数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e919" headers="d917986e811 ">
                                       <p><code class="codeph">direct_writes</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e919 d917986e814 ">
                                       <p>总直接路径写入总数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e927" headers="d917986e811 ">
                                       <p><code class="codeph">rows_processed</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e927 d917986e814 ">
                                       <p>此SQL处理的总行数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e935" headers="d917986e811 ">
                                       <p><code class="codeph">取</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e935 d917986e814 ">
                                       <p>总和提取总数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e943" headers="d917986e811 ">
                                       <p><code class="codeph">处决</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e943 d917986e814 ">
                                       <p>此SQL语句的总执行次数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e951" headers="d917986e811 ">
                                       <p><code class="codeph">end_of_fetch_count</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e951 d917986e814 ">
                                       <p>获取所有行的SQL语句完全执行的次数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e959" headers="d917986e811 ">
                                       <p><code class="codeph">optimizer_cost</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e959 d917986e814 ">
                                       <p>此SQL的优化程序成本。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e967" headers="d917986e811 ">
                                       <p><code class="codeph">optimizer_env</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e967 d917986e814 ">
                                       <p>此SQL语句的优化程序环境。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e975" headers="d917986e811 ">
                                       <p><code class="codeph">优先</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e975 d917986e814 ">
                                       <p>用户定义的优先级（1,2,3）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e983" headers="d917986e811 ">
                                       <p><code class="codeph">COMMAND_TYPE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e983 d917986e814 ">
                                       <p>语句类型，例如<code class="codeph">INSERT</code>或<code class="codeph">SELECT</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e997" headers="d917986e811 ">
                                       <p><code class="codeph">first_load_time</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e997 d917986e814 ">
                                       <p>加载父光标的时间。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1006" headers="d917986e811 ">
                                       <p><code class="codeph">stat_period</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1006 d917986e814 ">
                                       <p>收集此SQL语句的统计信息的时间段（秒）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1014" headers="d917986e811 ">
                                       <p><code class="codeph">active_stat_period</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1014 d917986e814 ">
                                       <p>SQL语句处于活动状态的有效时间段（以秒为单位）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1022" headers="d917986e811 ">
                                       <p><code class="codeph">其他</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1022 d917986e814 ">
                                       <p>用户定义属性的其他列。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1030" headers="d917986e811 ">
                                       <p><code class="codeph">plan_hash_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1030 d917986e814 ">
                                       <p>计划计划的哈希值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1038" headers="d917986e811 ">
                                       <p><code class="codeph">SQL_PLAN</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1038 d917986e814 ">
                                       <p>SQL语句的执行计划。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1047" headers="d917986e811 ">
                                       <p><code class="codeph">bind_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1047 d917986e814 ">
                                       <p>用于SQL语句的用户指定的绑定列表。这用于用户指定的工作负载。请注意，您不能为此参数以及<code class="codeph">bind_data</code>规定参数：它们是互斥的。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1058" headers="d917986e811 ">
                                       <p><code class="codeph">con_dbid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1058 d917986e814 ">
                                       <p>PDB或CDB根的DBID。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1066" headers="d917986e811 ">
                                       <p><code class="codeph">last_exec_start_time</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1066 d917986e814 ">
                                       <p>此SQL语句的最近执行开始时间。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-89A098DD-7445-46A5-BF71-E0DCE85BEC31" name="GUID-89A098DD-7445-46A5-BF71-E0DCE85BEC31"></a><h3 id="ARPLS-GUID-89A098DD-7445-46A5-BF71-E0DCE85BEC31" class="sect3"><span class="enumeration_section">162.4</span> DBMS_SQLSET子程序摘要</h3>
               <div>
                  <p>此表列出了<code class="codeph">DBMS_SQLSET</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-89A098DD-7445-46A5-BF71-E0DCE85BEC31__GUID-5AD6863C-549E-48A2-AE60-77CB02ABF121">
                     <p class="titleintable">表162-2 DBMS_SQLSET包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SQLSET包子程序" width="100%" border="1" summary="This table lists the DBMS_SQLSET subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="51%" id="d917986e1176">子程序</th>
                              <th align="left" valign="bottom" width="49%" id="d917986e1179">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1184" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-8EAD90F2-D2E2-4F9D-9376-2238DE6934E3" title="此过程添加对现有SQL调优集的新引用，以指示客户端使用它。">ADD_REFERENCE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1184 d917986e1179 ">
                                 <p><span>此过程添加对现有SQL调优集的新引用，以指示客户端使用它。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1197" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-33AEFA37-9383-443E-8621-03711438430F" title="此过程将工作负载从共享SQL区域捕获到SQL调优集中。">CAPTURE_CURSOR_CACHE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1197 d917986e1179 ">
                                 <p><span>此过程将工作负载从共享SQL区域捕获到SQL调优集中。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1210" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-86F56216-7D47-4889-96D6-FC817E8AF44C" title="此过程或函数在数据库中创建SQL调优集对象。">CREATE_SQLSET过程和函数</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1210 d917986e1179 ">
                                 <p><span>此过程或函数在数据库中创建SQL调优集对象。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1223" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-99F4A1D9-A23B-448B-A833-1E29DCE010AF" title="此过程创建一个临时表，通过该表导入和导出SQL调优集。">CREATE_STGTAB程序</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1223 d917986e1179 ">
                                 <p><span>此过程创建一个临时表，通过该表导入和导出SQL调优集。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1236" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-90DEBB07-C668-46AD-9F4F-96B636E541C5" title="此过程从SQL调优集中删除一组SQL语句。">DELETE_SQLSET过程</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1236 d917986e1179 ">
                                 <p><span>此过程从SQL调优集中删除一组SQL语句。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1249" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-A2EAD94A-8142-46FB-A5BD-470E77CC1B82" title="如果SQL调整集不活动，则此过程将删除该调整集。">DROP_SQLSET过程</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1249 d917986e1179 ">
                                 <p><span>如果SQL调整集不活动，则此过程将删除该调整集。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1262" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-75C4DB0B-519B-47B5-B42B-AF021F876428" title="此过程使用一组选定的SQL语句填充SQL调优集。您可以多次调用该过程来添加新的SQL语句或替换现有语句的属性。">LOAD_SQLSET过程</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1262 d917986e1179 ">
                                 <p><span>此过程使用一组选定的SQL语句填充SQL调优集。您可以多次调用该过程来添加新的SQL语句或替换现有语句的属性。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1275" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-9CCDE7F8-6363-4082-9E76-B9A976F95789" title="此过程将一个或多个SQL调优集从SYS模式中的位置复制到CREATE_STGTAB过程创建的临时表。">PACK_STGTAB程序</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1275 d917986e1179 ">
                                 <p>此过程将一个或多个SQL调优集从<code class="codeph">SYS</code>模式中的位置复制到<code class="codeph">CREATE_STGTAB</code>过程创建的临时表。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1298" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-B912E8F4-ECC6-460D-B154-0551474A0717" title="此过程更改登台表中的调整集名称和所有者，以便可以使用不同的值解压缩它们。">REMAP_STGTAB程序</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1298 d917986e1179 ">
                                 <p><span>此过程更改登台表中的调整集名称和所有者，以便可以使用不同的值解压缩它们。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1311" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-31126D7E-4F52-404A-9B66-DFB5B1929E10" title="此过程取消激活SQL调整集以指示客户端不再使用它。">REMOVE_REFERENCE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1311 d917986e1179 ">
                                 <p><span>此过程取消激活SQL调整集以指示客户端不再使用它。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1324" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57" title="此函数从共享SQL区域收集SQL语句。">SELECT_CURSOR_CACHE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1324 d917986e1179 ">
                                 <p><span>此函数从工作负载存储库收集SQL语句。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1338" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649" title="此表函数读取一个或多个跟踪文件的内容，并以sqlset_row的格式返回它找到的SQL语句。">SELECT_SQL_TRACE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1338 d917986e1179 ">
                                 <p><span>此表函数读取一个或多个跟踪文件的内容，并以<code class="codeph">sqlset_row</code>的格式返回它找到的SQL语句。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1357" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0" title="此函数从SQL Performance Analyzer比较任务收集SQL语句。">SELECT_SQLPA_TASK函数</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1357 d917986e1179 ">
                                 <p><span>此函数从SQL Performance Analyzer比较任务收集SQL语句。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1370" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-9D995019-91AB-4B1E-9EAF-031050789B21" title="这是一个读取SQL调优集内容的表函数。">SELECT_SQLSET函数</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1370 d917986e1179 ">
                                 <p><span>这是一个读取SQL调优集内容的表函数。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1383" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8" title="此函数从工作负载存储库收集SQL语句。">SELECT_WORKLOAD_REPOSITORY函数</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1383 d917986e1179 ">
                                 <p><span>此函数从工作负载存储库收集SQL语句。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1396" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-9DF822AB-9D21-4DFB-8946-0C2C07BD9EAF" title="此过程将一个或多个SQL调优集从其在临时表中的位置复制到SQL调优集架构中，从而使它们成为正确的SQL调优集。">UNPACK_STGTAB程序</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1396 d917986e1179 ">
                                 <p><span>此过程将一个或多个SQL调优集从其在临时表中的位置复制到SQL调优集架构中，从而使它们成为正确的SQL调优集。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d917986e1409" headers="d917986e1176 ">
                                 <p><a href="DBMS_SQLSET.html#GUID-F2831B8D-135B-46B5-BCAE-788CCFC9F7DA" title="此重载过程会更新SQL调优集中SQL语句的选定字段。">UPDATE_SQLSET程序</a></p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d917986e1409 d917986e1179 ">
                                 <p><span>此重载过程会更新SQL调优集中SQL语句的选定字段。</span></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div class="sect3"><a id="GUID-8EAD90F2-D2E2-4F9D-9376-2238DE6934E3" name="GUID-8EAD90F2-D2E2-4F9D-9376-2238DE6934E3"></a><h4 id="ARPLS-GUID-8EAD90F2-D2E2-4F9D-9376-2238DE6934E3" class="sect4"><span class="enumeration_section">162.4.1</span> ADD_REFERENCE函数</h4>
                  <div>
                     <p><span>此过程添加对现有SQL调优集的新引用，以指示客户端使用它。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8EAD90F2-D2E2-4F9D-9376-2238DE6934E3__GUID-067D79CC-B165-457D-A709-0CBF1F895B53">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.ADD_REFERENCE（sqlset_name IN VARCHAR2，description IN VARCHAR2：= NULL，sqlset_owner IN VARCHAR2：= NULL）返回NUMBER;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8EAD90F2-D2E2-4F9D-9376-2238DE6934E3__d5e3355">参数</p>
                        <p><code class="codeph">DBMS_SQLTUNE.ADD_SQLSET_REFERENCE</code>和<code class="codeph">DBMS_SQLSET.ADD_REFERENCE</code>的参数相同。</p>
                        <div class="tblformal" id="GUID-8EAD90F2-D2E2-4F9D-9376-2238DE6934E3__d5e3366">
                           <p class="titleintable">表162-3 ADD_SQLSET_REFERENCE和ADD_REFERENCE函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ADD_SQLSET_REFERENCE和ADD_REFERENCE函数参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SQLTUNE.ADD_SQLSET_REFERENCE and DBMS_SQLSET.ADD_REFERENCE subprograms." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e1540">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e1543">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1548" headers="d917986e1540 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1548 d917986e1543 ">
                                       <p>指定SQL调优集的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1556" headers="d917986e1540 ">
                                       <p><code class="codeph">描述</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1556 d917986e1543 ">
                                       <p>提供SQL调优集使用的可选描述。</p>
                                       <p>如果长度超过256个字符，则会截断描述。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1566" headers="d917986e1540 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1566 d917986e1543 ">
                                       <p>指定SQL调优集的所有者，或指定当前架构所有者的<code class="codeph">NULL</code> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8EAD90F2-D2E2-4F9D-9376-2238DE6934E3__d5e3413">返回值</p>
                        <p>添加的引用的标识符。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8EAD90F2-D2E2-4F9D-9376-2238DE6934E3__GUID-6BC6B1AC-D695-4A8F-8F0B-035C1F92D435">使用说明</p>
                        <p>添加对SQL调优集的引用可防止调优集在使用时被修改。在SQL调优集上调用SQL Tuning Advisor会自动添加引用，因此仅在自动生成的引用<code class="codeph">ADD_REFERENCE</code>时才使用<code class="codeph">ADD_REFERENCE</code> 。<code class="codeph">ADD_REFERENCE</code>函数返回一个参考ID，您可以在以后提供给<code class="codeph">REMOVE_SQLSET_REFERENCE</code>过程。查询<code class="codeph">DBA_SQLSET_REFERENCES</code>视图以查找对指定SQL调优集的所有引用。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8EAD90F2-D2E2-4F9D-9376-2238DE6934E3__GUID-AF087DEA-3E62-430B-A59B-BA597CA8895B">例子</p>
                        <p>此示例生成对名为<code class="codeph">my_workload</code>的SQL调优集的引用，并将其存储在<code class="codeph">b_rid</code>变量中。
                        </p><pre class="pre codeblock"><code>VARIABLE b_rid NUMBER; EXEC：b_rid：= DBMS_SQLSET.ADD_REFERENCE（sqlset_name =&gt;'my_workload'，description =&gt;'my sts ref'）;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-33AEFA37-9383-443E-8621-03711438430F" name="GUID-33AEFA37-9383-443E-8621-03711438430F"></a><h4 id="ARPLS-GUID-33AEFA37-9383-443E-8621-03711438430F" class="sect4"><span class="enumeration_section">162.4.2</span> CAPTURE_CURSOR_CACHE程序</h4>
                  <div>
                     <p><span>此过程将工作负载从共享SQL区域捕获到SQL调优集中。</span></p>
                     <div class="section">
                        <p>该过程在一段时间内多次轮询缓存，并更新存储在那里的工作负载数据。它可以在需要的时间段内执行，以捕获整个系统工作负载。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33AEFA37-9383-443E-8621-03711438430F__GUID-E5B08BC6-7628-41CB-8D7D-4C2A83B4E129">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.CAPTURE_CURSOR_CACHE（sqlset_name IN VARCHAR2，time_limit IN POSITIVE：= 1800，repeat_interval IN POSITIVE：= 300，capture_option IN VARCHAR2：='MERGE'，capture_mode IN NUMBER：= MODE_REPLACE_OLD_STATS，basic_filter IN VARCHAR2：= NULL，sqlset_owner IN VARCHAR2：= NULL，recursive_sql IN VARCHAR2：= HAS_RECURSIVE_SQL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33AEFA37-9383-443E-8621-03711438430F__d5e3195">参数</p>
                        <p><code class="codeph">DBMS_SQLTUNE.CAPTURE_CURSOR_CACHE_SQLSET</code>和<code class="codeph">DBMS_SQLSET.CAPTURE_CURSOR_CACHE</code>的参数相同。</p>
                        <div class="tblformal" id="GUID-33AEFA37-9383-443E-8621-03711438430F__d5e3206">
                           <p class="titleintable">表162-4 CAPTURE_CURSOR_CACHE_SQLSET和CAPTURE_CURSOR_CACHE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CAPTURE_CURSOR_CACHE_SQLSET和CAPTURE_CURSOR_CACHE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SQLTUNE.CAPTURE_CURSOR_CACHE_SQLSET and DBMS_SQLSET.CAPTURE_CURSOR_CACHE subprograms." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e1734">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e1737">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1742" headers="d917986e1734 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1742 d917986e1737 ">
                                       <p>指定SQL调整集名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1750" headers="d917986e1734 ">
                                       <p><code class="codeph">时限</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1750 d917986e1737 ">
                                       <p>定义要执行的总时间（以秒为单位）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1758" headers="d917986e1734 ">
                                       <p><code class="codeph">REPEAT_INTERVAL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1758 d917986e1737 ">
                                       <p>定义在采样之间暂停的时间量（以秒为单位）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1766" headers="d917986e1734 ">
                                       <p><code class="codeph">capture_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1766 d917986e1737 ">
                                       <p>指定是插入新语句，更新现有语句还是两者。</p>
                                       <p>值为<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">MERGE</code> 。值与<code class="codeph">load_option</code>中的<code class="codeph">load_sqlset</code>相同。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1791" headers="d917986e1734 ">
                                       <p><code class="codeph">capture_mode</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1791 d917986e1737 ">
                                       <p>指定捕获模式（ <code class="codeph">UPDATE</code>和<code class="codeph">MERGE</code>捕获选项）。可能的值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">MODE_REPLACE_OLD_STATS</code> - 当执行次数大于SQL调优集中存储的数量时替换统计信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MODE_ACCUMULATE_STATS</code> - 为已存储的SQL的当前值添加新值。请注意，此模式检测语句是否已过期，因此统计信息的最终值是该语句存在的所有游标的统计信息的总和。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1816" headers="d917986e1734 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1816 d917986e1737 ">
                                       <p>定义要应用于每个样本的共享SQL区域的过滤器。</p>
                                       <p>如果调用者未设置<code class="codeph">basic_filter</code> ，则子程序仅捕获<code class="codeph">CREATE TABLE</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">SELECT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">MERGE</code>类型的语句。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1848" headers="d917986e1734 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1848 d917986e1737 ">
                                       <p>指定SQL调优集的所有者或当前架构所有者的<code class="codeph">NULL</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e1859" headers="d917986e1734 ">
                                       <p><code class="codeph">recursive_sql</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e1859 d917986e1737 ">
                                       <p>定义一个过滤器，其中包含SQL调优集（ <code class="codeph">HAS_RECURSIVE_SQL</code> ）中的递归SQL或将其排除（ <code class="codeph">NO_RECURSIVE_SQL</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33AEFA37-9383-443E-8621-03711438430F__GUID-BF19A40B-B809-4A9A-9912-A6C52C667E7A">例子</p>
                        <p>在此示例中，捕获发生在30秒的时间段内，每五秒轮询一次缓存。这将捕获在此期间但不在之前或之后运行的所有语句。如果第二次出现相同的语句，则该过程将使用新的匹配项替换存储的语句。</p>
                        <p>请注意，在生产系统中，时间限制和重复间隔将设置得更高。您应该根据系统的工作负载时间和共享SQL区域周转属性来调整<code class="codeph">time_limit</code>和<code class="codeph">repeat_interval</code>参数。
                        </p><pre class="pre codeblock"><code>EXEC DBMS_SQLSET.CAPTURE_CURSOR_CACHE（ -  sqlset_name =&gt;'my_workload'， -  time_limit =&gt; 30， -  repeat_interval =&gt; 5）;</code></pre><p>在以下调用中，您可以随时累积执行统计信息。此选项可以准确显示每个光标的累积活动，即使在不同的年龄范围内，但它比前一个示例更昂贵。</p><pre class="pre codeblock"><code>EXEC DBMS_SQLSET.CAPTURE_CURSOR_CACHE（ -  sqlset_name =&gt;'my_workload'， -  time_limit =&gt; 30， -  repeat_interval =&gt; 5， -  capture_mode =&gt; DBMS_SQLSET.MODE_ACCUMULATE_STATS）;</code></pre><p>此调用执行非常便宜的捕获，您只需插入新语句，并且在将它们插入SQL调优集后不再更新它们的统计信息</p><pre class="pre codeblock"><code>EXEC DBMS_SQLSET.CAPTURE_CURSOR_CACHE（ -  sqlset_name =&gt;'my_workload'， -  time_limit =&gt; 30， -  repeat_interval =&gt; 5， -  capture_option =&gt;'INSERT'）;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-86F56216-7D47-4889-96D6-FC817E8AF44C" name="GUID-86F56216-7D47-4889-96D6-FC817E8AF44C"></a><h4 id="ARPLS-GUID-86F56216-7D47-4889-96D6-FC817E8AF44C" class="sect4"><span class="enumeration_section">162.4.3</span> CREATE_SQLSET过程和函数</h4>
                  <div>
                     <p><span>此过程或函数在数据库中创建SQL调优集对象。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-86F56216-7D47-4889-96D6-FC817E8AF44C__GUID-C4AA163C-214F-472E-A0EA-711AB97DA5E5">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.CREATE_SQLSET（sqlset_name IN VARCHAR2，description IN VARCHAR2：= NULL sqlset_owner IN VARCHAR2：= NULL）;</code></pre><pre class="pre codeblock"><code>DBMS_SQLSET.CREATE_SQLSET（sqlset_name IN VARCHAR2：= NULL，description IN VARCHAR2：= NULL，sqlset_owner IN VARCHAR2：= NULL）RETURN VARCHAR2;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-86F56216-7D47-4889-96D6-FC817E8AF44C__d5e1663">参数</p>
                        <div class="tblformal" id="GUID-86F56216-7D47-4889-96D6-FC817E8AF44C__d5e1666">
                           <p class="titleintable">表162-5 CREATE_SQLSET过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_SQLSET过程参数" width="100%" border="1" summary="This table describes Parameters used by the CREATE_SQLSET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e2008">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e2011">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2016" headers="d917986e2008 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2016 d917986e2011 ">
                                       <p>指定创建的SQL调优集的名称。名称是传递给函数的名称。如果没有名称传递给该函数，则该函数会生成一个自动名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2024" headers="d917986e2008 ">
                                       <p><code class="codeph">描述</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2024 d917986e2011 ">
                                       <p>提供SQL调优集的可选描述。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2032" headers="d917986e2008 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2032 d917986e2011 ">
                                       <p>指定SQL调优集的所有者，或指定当前架构所有者的<code class="codeph">NULL</code> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-86F56216-7D47-4889-96D6-FC817E8AF44C__GUID-86EC7C18-A06B-4EAF-A931-7B5A559DA94F">返回值</p>
                        <p>指定创建的SQL调优集的名称。名称是传递给函数的名称。如果没有名称传递给该函数，则该函数会生成一个自动名称。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-86F56216-7D47-4889-96D6-FC817E8AF44C__GUID-2F00856A-526F-4A2A-8E70-CD18B505C47D">例子</p><pre class="pre codeblock"><code>EXEC DBMS_SQLSET.CREATE_SQLSET（ -  sqlset_name =&gt;'my_workload'， -  description =&gt;'complete application workload'）;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-99F4A1D9-A23B-448B-A833-1E29DCE010AF" name="GUID-99F4A1D9-A23B-448B-A833-1E29DCE010AF"></a><h4 id="ARPLS-GUID-99F4A1D9-A23B-448B-A833-1E29DCE010AF" class="sect4"><span class="enumeration_section">162.4.4</span> CREATE_STGTAB过程</h4>
                  <div>
                     <p><span>此过程创建一个临时表，通过该表导入和导出SQL调优集。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-99F4A1D9-A23B-448B-A833-1E29DCE010AF__GUID-4CF3C20E-2A1F-4298-AF38-2C58A05D4D5C">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.CREATE_STGTAB（table_name IN VARCHAR2，schema_name IN VARCHAR2：= NULL，tablespace_name IN VARCHAR2：= NULL，db_version IN NUMBER：= NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-99F4A1D9-A23B-448B-A833-1E29DCE010AF__d5e3515">参数</p>
                        <div class="tblformal" id="GUID-99F4A1D9-A23B-448B-A833-1E29DCE010AF__d5e3518">
                           <p class="titleintable">表162-6 CREATE_STGTAB_SQLSET和CREATE_STGTAB过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_STGTAB_SQLSET和CREATE_STGTAB过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_STGTAB_SQLSET and DBMS_SQLSET.CREATE_STGTAB subprograms." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d917986e2163">参数</th>
                                    <th align="left" valign="bottom" width="80%" id="d917986e2166">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e2171" headers="d917986e2163 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e2171 d917986e2166 ">
                                       <p>指定要创建的表。名称区分大小写。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e2179" headers="d917986e2163 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e2179 d917986e2166 ">
                                       <p>定义用于创建表的模式，或定义当前模式的<code class="codeph">NULL</code> 。名称区分大小写。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e2190" headers="d917986e2163 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e2190 d917986e2166 ">
                                       <p>指定用于存储登台表的表空间，或指定当前用户的默认表空间的<code class="codeph">NULL</code> 。名称区分大小写。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e2201" headers="d917986e2163 ">
                                       <p><code class="codeph">db_version</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e2201 d917986e2166 ">
                                       <p>指定确定登台表格式的数据库版本。</p>
                                       <p>您还可以创建较旧的数据库版本登台表，以将STS导出到较旧的数据库版本。使用以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">NULL</code> （默认值） - 指定当前数据库版本。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">STS_STGTAB_10_2_VERSION</code> - 指定10.2数据库版本。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">STS_STGTAB_11_1_VERSION</code> - 指定11.1数据库版本。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">STS_STGTAB_11_2_VERSION</code> - 指定11.2数据库版本。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">STS_STGTAB_12_1_VERSION</code> - 指定12.1数据库版本。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">STS_STGTAB_12_2_VERSION</code> - 指定12.2数据库版本。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-99F4A1D9-A23B-448B-A833-1E29DCE010AF__GUID-F7BF432F-BC3D-4503-9F94-899617684563">例子</p>
                        <p>创建用于打包并最终导出SQL调优集的临时表：</p><pre class="pre codeblock"><code>EXEC DBMS_SQLSET.CREATE_STGTAB（table_name =&gt;'STGTAB_SQLSET'）;</code></pre><p>创建一个临时表以在Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.2）格式中打包SQL调优集：</p><pre class="pre codeblock"><code>BEGIN DBMS_SQLSET.CREATE_STGTAB（table_name =&gt;'STGTAB_SQLSET_121'，db_version =&gt; DBMS_SQLSET.STS_STGTAB_12_1_VERSION）;结束;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-90DEBB07-C668-46AD-9F4F-96B636E541C5" name="GUID-90DEBB07-C668-46AD-9F4F-96B636E541C5"></a><h4 id="ARPLS-GUID-90DEBB07-C668-46AD-9F4F-96B636E541C5" class="sect4"><span class="enumeration_section">162.4.5</span> DELETE_SQLSET过程</h4>
                  <div>
                     <p><span>此过程从SQL调优集中删除一组SQL语句。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-90DEBB07-C668-46AD-9F4F-96B636E541C5__GUID-38A9A4F5-37F3-46C3-BCB6-D08C6652BD5C">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.DELETE_SQLSET（sqlset_name IN VARCHAR2，basic_filter IN VARCHAR2：= NULL，sqlset_owner IN VARCHAR2：= NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-90DEBB07-C668-46AD-9F4F-96B636E541C5__d5e1710">参数</p>
                        <div class="tblformal" id="GUID-90DEBB07-C668-46AD-9F4F-96B636E541C5__d5e1713">
                           <p class="titleintable">表162-7 DELETE_SQLSET过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DELETE_SQLSET过程参数" width="100%" border="1" summary="This table describes parameters used by the DELETE_SQLSET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e2367">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e2370">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2375" headers="d917986e2367 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2375 d917986e2370 ">
                                       <p>指定SQL调优集的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2383" headers="d917986e2367 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2383 d917986e2370 ">
                                       <p>指定SQL谓词以从SQL调优集中筛选SQL。此基本过滤器用作SQL调优集内容的where子句，以从SQL调优集中选择所需的SQL子集。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2391" headers="d917986e2367 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2391 d917986e2370 ">
                                       <p>指定SQL调优集的所有者，或指定当前架构所有者的<code class="codeph">NULL</code> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-90DEBB07-C668-46AD-9F4F-96B636E541C5__GUID-0FF33B09-BFED-4F20-B4F4-B34D19641A80">例子</p><pre class="pre codeblock"><code>- 删除sql调整集中的所有语句。EXEC DBMS_SQLSET.DELETE_SQLSET（sqlset_name =&gt;'my_workload'）; - 删除运行时间不到一秒的SQL调优集中的所有语句EXEC DBMS_SQLSET.DELETE_SQLSET（sqlset_name =&gt;'my_workload'， -  basic_filter =&gt;'elapsed_time &lt;1000000'）;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A2EAD94A-8142-46FB-A5BD-470E77CC1B82" name="GUID-A2EAD94A-8142-46FB-A5BD-470E77CC1B82"></a><h4 id="ARPLS-GUID-A2EAD94A-8142-46FB-A5BD-470E77CC1B82" class="sect4"><span class="enumeration_section">162.4.6</span> DROP_SQLSET过程</h4>
                  <div>
                     <p><span>如果SQL调整集不活动，则此过程将删除该调整集。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A2EAD94A-8142-46FB-A5BD-470E77CC1B82__GUID-D529DDA9-1198-4EC3-AF31-DCD38B36C8ED">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.DROP_SQLSET（sqlset_name IN VARCHAR2，sqlset_owner IN VARCHAR2：= NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A2EAD94A-8142-46FB-A5BD-470E77CC1B82__d5e1758">参数</p>
                        <div class="tblformal" id="GUID-A2EAD94A-8142-46FB-A5BD-470E77CC1B82__d5e1761">
                           <p class="titleintable">表162-8 DROP_SQLSET过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_SQLSET过程参数" width="100%" border="1" summary="This table describes Parameters used by the DROP_SQLSET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e2517">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e2520">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2525" headers="d917986e2517 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2525 d917986e2520 ">
                                       <p>指定SQL调优集的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2533" headers="d917986e2517 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2533 d917986e2520 ">
                                       <p>指定SQL调优集的所有者，或指定当前架构所有者的<code class="codeph">NULL</code> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A2EAD94A-8142-46FB-A5BD-470E77CC1B82__d5e1798">使用说明</p>
                        <p>当一个或多个客户端引用SQL调优集时，您不能删除它。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A2EAD94A-8142-46FB-A5BD-470E77CC1B82__GUID-69149682-3BC5-4396-9224-A58F64A68585">例子</p><pre class="pre codeblock"><code>- 删除sqlset。EXEC DBMS_SQLSET.DROP_SQLSET（'my_workload'）;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-75C4DB0B-519B-47B5-B42B-AF021F876428" name="GUID-75C4DB0B-519B-47B5-B42B-AF021F876428"></a><h4 id="ARPLS-GUID-75C4DB0B-519B-47B5-B42B-AF021F876428" class="sect4"><span class="enumeration_section">162.4.7</span> LOAD_SQLSET过程</h4>
                  <div>
                     <p><span>此过程使用一组选定的SQL语句填充SQL调优集。您可以多次调用该过程来添加新的SQL语句或替换现有语句的属性。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-75C4DB0B-519B-47B5-B42B-AF021F876428__GUID-908F4329-79F8-4B3B-9D9E-BDF13E345CEB">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.LOAD_SQLSET（sqlset_name IN VARCHAR2，populate_cursor IN sqlset_cursor，load_option IN VARCHAR2：='INSERT'，update_option IN VARCHAR2：='REPLACE'，update_condition IN VARCHAR2：= NULL，update_attributes IN VARCHAR2：= NULL，ignore_null IN BOOLEAN：= TRUE ，commit_rows IN POSITIVE：= NULL，sqlset_owner IN VARCHAR2：= NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-75C4DB0B-519B-47B5-B42B-AF021F876428__d5e1805">参数</p>
                        <div class="tblformal" id="GUID-75C4DB0B-519B-47B5-B42B-AF021F876428__d5e1807">
                           <p class="titleintable">表162-9 LOAD_SQLSET过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="LOAD_SQLSET过程参数" width="100%" border="1" summary="This table describes parameters used by the LOAD_SQLSET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e2664">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e2667">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2672" headers="d917986e2664 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2672 d917986e2667 ">
                                       <p>指定要加载的SQL调整集的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2680" headers="d917986e2664 ">
                                       <p><code class="codeph">populate_cursor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2680 d917986e2667 ">
                                       <p>指定要加载的SQL调整集的游标引用。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2688" headers="d917986e2664 ">
                                       <p><code class="codeph">load_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2688 d917986e2667 ">
                                       <p>指定将哪些语句加载到SQL调优集中。可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">INSERT</code> （默认） - 仅添加新语句。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">UPDATE</code> - 更新现有的SQL语句并忽略任何新语句。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MERGE</code> - 插入新语句并更新现有语句的信息。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2712" headers="d917986e2664 ">
                                       <p><code class="codeph">update_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2712 d917986e2667 ">
                                       <p>指定现有SQL语句的更新方式。</p>
                                       <p>仅当使用<code class="codeph">UPDATE</code>或<code class="codeph">MERGE</code>作为选项指定<code class="codeph">load_option</code>才会考虑此参数。可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">REPLACE</code> （默认） - 使用新统计信息，绑定列表，对象列表等更新语句。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ACCUMULATE</code> - 尽可能组合属性（例如，诸如<code class="codeph">elapsed_time</code>统计信息），否则用提供的值替换现有值（例如，模块和操作）。可以累积的SQL语句的属性有： <code class="codeph">elapsed_time</code> ， <code class="codeph">buffer_gets</code> ， <code class="codeph">direct_writes</code> ， <code class="codeph">disk_reads</code> ， <code class="codeph">row_processed</code> ， <code class="codeph">fetches</code> ， <code class="codeph">executions</code> ， <code class="codeph">end_of_fetch_count</code> ， <code class="codeph">stat_period</code>和<code class="codeph">active_stat_period</code> 。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2776" headers="d917986e2664 ">
                                       <p><code class="codeph">update_condition</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2776 d917986e2667 ">
                                       <p>指定何时执行更新。</p>
                                       <p>该过程仅在满足指定条件时执行更新。条件可以指数据源或目标。条件必须使用以下前缀来引用源或目标中的属性：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">OLD</code> - 引用SQL调优集（目标）中的语句属性。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NEW</code> - 引用输入语句（source）中的语句属性。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2797" headers="d917986e2664 ">
                                       <p><code class="codeph">update_attributes方法</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2797 d917986e2667 ">
                                       <p>指定在合并或更新期间要更新的SQL语句属性的列表。</p>
                                       <p>可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">NULL</code> （默认值） - 指定除执行上下文之外的输入游标的内容。换句话说，它等同于没有执行上下文的<code class="codeph">ALL</code> ，例如模块和操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC</code> - 仅指定统计信息和绑定。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> - 指定具有SQL计划的<code class="codeph">BASIC</code> （没有行源统计信息）且没有对象引用列表。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> - 指定所有属性，包括执行上下文属性，例如模块和操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p>要更新的逗号分隔属性名称列表：</p>
                                             <ul style="list-style-type:disc">
                                                <li>
                                                   <p><code class="codeph">EXECUTION_CONTEXT</code></p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">EXECUTION_STATISTICS</code></p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SQL_BINDS</code></p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SQL_PLAN</code></p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SQL_PLAN_STATISTICS</code> （类似于<code class="codeph">SQL_PLAN</code> ，添加了行源统计信息）</p>
                                                </li>
                                             </ul>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2862" headers="d917986e2664 ">
                                       <p><code class="codeph">ignore_null</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2862 d917986e2667 ">
                                       <p>指定在新值为<code class="codeph">NULL</code>时是否更新属性。</p>
                                       <p>如果为<code class="codeph">TRUE</code> ，则当新值为<code class="codeph">NULL</code>时，过程不会更新属性。也就是说，除非有意，否则不要覆盖<code class="codeph">NULL</code>值。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2884" headers="d917986e2664 ">
                                       <p><code class="codeph">commit_rows</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2884 d917986e2667 ">
                                       <p>指定是否在DML之后提交语句。</p>
                                       <p>如果提供了值，则在插入每个指定数量的语句后提交加载。如果提供<code class="codeph">NULL</code> ，则在操作结束时，加载仅提交一次。
                                       </p>
                                       <p>通过为此参数提供值，您可以在<code class="codeph">DBA_SQLSET</code>视图中监视SQL调整集加载操作的<code class="codeph">DBA_SQLSET</code> 。加载新的SQL语句时， <code class="codeph">STATEMENT_COUNT</code>值会增加。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e2905" headers="d917986e2664 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e2905 d917986e2667 ">
                                       <p>定义SQL调优集的所有者或当前架构所有者（或当前所有者的<code class="codeph">NULL</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-75C4DB0B-519B-47B5-B42B-AF021F876428__d5e2070">例外</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当<code class="codeph">sqlset_name</code>无效或相应的SQL调优集不存在，或者<code class="codeph">populate_cursor</code>不正确且无法执行时，此过程将返回错误。
                              </p>
                           </li>
                           <li>
                              <p>提供无效过滤器时也会引发异常。过滤器可能无效，因为它们不解析（例如，它们引用不在<code class="codeph">sqlset_row</code>属性），或者因为它们违反了用户的权限。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-75C4DB0B-519B-47B5-B42B-AF021F876428__d5e2090">使用说明</p>
                        <p>输入<code class="codeph">populate_cursor</code>中的行必须是<code class="codeph">SQLSET_ROW</code>类型。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-75C4DB0B-519B-47B5-B42B-AF021F876428__GUID-A22DCD06-336E-4DBB-ABE3-3EBE2347C53D">例子</p>
                        <p>在此示例中，您将使用所有共享SQL区域语句创建并填充SQL调优集，其中经过的时间为5秒或更长，不包括属于<code class="codeph">SYS</code>模式的语句。您可以选择SQL语句的所有属性，并使用默认模式将它们加载到调整集中。默认模式仅加载新语句，因为SQL调优集为空。
                        </p><pre class="pre codeblock"><code>- 创建调优集EXEC DBMS_SQLSET.CREATE_SQLSET（'my_workload'）; - 从共享SQL区域DECLARE cur DBMS_SQLSET.SQLSET_CURSOR填充调优集; BEGIN OPEN cur FOR SELECT VALUE（P）FROM table（DBMS_SQLSET.SELECT_CURSOR_CACHE（'parsing_schema_name &lt;&gt;''SYS''AND elapsed_time&gt; 5000000'，NULL，NULL，NULL，NULL，1，NULL，'ALL'））P; DBMS_SQLSET.LOAD_SQLSET（sqlset_name =&gt;'my_workload'，populate_cursor =&gt; cur）;结束; /</code></pre><p>现在，您希望使用工作负载存储库（AWR）中存储的内容来扩充此信息。您使用<code class="codeph">'ACCUMULATE'</code> <code class="codeph">update_option</code> <code class="codeph">'ACCUMULATE'</code>作为<code class="codeph">update_option</code>填充调优集，因为假设自拍摄快照以来当前在缓存中的游标已经老化。
                        </p>
                        <p>您省略了<code class="codeph">elapsed_time</code>过滤器，因为假定在AWR中捕获的任何语句都很重要，但您仍然丢弃<code class="codeph">SYS</code> -parsed游标以避免递归SQL。</p><pre class="pre codeblock"><code>DECLARE cur DBMS_SQLSET.SQLSET_CURSOR; BEGIN OPEN cur FOR SELECT VALUE（P）FROM table（DBMS_SQLSET.SELECT_WORKLOAD_REPOSITORY（1,2，'parsing_schema_name &lt;&gt;''SYS'''，NULL，NULL，NULL，NULL，1，NULL，'ALL'））P; DBMS_SQLSET.LOAD_SQLSET（sqlset_name =&gt;'my_workload'，populate_cursor =&gt; cur，load_option =&gt;'MERGE'，update_option =&gt;'ACCUMULATE'）;结束;</code></pre><p>以下示例是一个简单的加载，仅从工作负载存储库中插入新语句，跳过现有语句（在SQL调优集中）。请注意， <code class="codeph">'INSERT'</code>是<code class="codeph">LOAD_SQLSET</code>过程的<code class="codeph">load_option</code>参数的默认值。
                        </p><pre class="pre codeblock"><code>DECLARE cur sys_refcursor; BEGIN OPEN cur FOR SELECT VALUE（P）FROM table（DBMS_SQLSET.SELECT_WORKLOAD_REPOSITORY（1,2））P; DBMS_SQLSET.LOAD_SQLSET（sqlset_name =&gt;'my_workload'，populate_cursor =&gt; cur）;结束; /</code></pre><p>下一个示例演示了具有<code class="codeph">UPDATE</code>选项的加载。这会更新SQL调优集中已存在的语句，但不会添加新的语句。默认情况下，旧统计信息将替换为新值。
                        </p><pre class="pre codeblock"><code>DECLARE cur sys_refcursor; BEGIN OPEN cur FOR SELECT VALUE（P）FROM table（DBMS_SQLSET.SELECT_CURSOR_CACHE）P; DBMS_SQLSET.LOAD_SQLSET（sqlset_name =&gt;'my_workload'，populate_cursor =&gt; cur，load_option =&gt;'UPDATE'）;结束; /</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9CCDE7F8-6363-4082-9E76-B9A976F95789" name="GUID-9CCDE7F8-6363-4082-9E76-B9A976F95789"></a><h4 id="ARPLS-GUID-9CCDE7F8-6363-4082-9E76-B9A976F95789" class="sect4"><span class="enumeration_section">162.4.8</span> PACK_STGTAB程序</h4>
                  <div>
                     <p>此过程将一个或多个SQL调优集从<code class="codeph">SYS</code>模式中的位置复制到<code class="codeph">CREATE_STGTAB</code>过程创建的临时表。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9CCDE7F8-6363-4082-9E76-B9A976F95789__GUID-D9F94183-9D35-4F62-96D9-3DAA7E22579E">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.PACK_STGTAB（sqlset_name IN VARCHAR2，sqlset_owner IN VARCHAR2：= NULL，staging_table_name IN VARCHAR2，staging_schema_owner IN VARCHAR2：= NULL，db_version IN NUMBER：= NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9CCDE7F8-6363-4082-9E76-B9A976F95789__d5e3633">参数</p>
                        <p><code class="codeph">DBMS_SQLTUNE.PACK_STGTAB_SQLSET</code>和<code class="codeph">DBMS_SQLSET.PACK_STGTAB</code>过程的参数相同。
                        </p>
                        <div class="tblformal" id="GUID-9CCDE7F8-6363-4082-9E76-B9A976F95789__d5e3644">
                           <p class="titleintable">表162-10 PACK_STGTAB_SQLSET和PACK_STGTAB过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PACK_STGTAB_SQLSET和PACK_STGTAB过程参数" width="100%" border="1" summary="This table describes Parameters used by the PACK_STGTAB_SQLSET and PACK_STGTAB subprograms." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d917986e3118">参数</th>
                                    <th align="left" valign="bottom" width="80%" id="d917986e3121">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3126" headers="d917986e3118 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3126 d917986e3121 ">
                                       <p>指定要打包的SQL调整集的名称。名称区分大小写。允许使用通配符（ <code class="codeph">%</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3137" headers="d917986e3118 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3137 d917986e3121 ">
                                       <p>指定打包SQL调优集的类别。名称区分大小写。允许使用通配符（ <code class="codeph">%</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3148" headers="d917986e3118 ">
                                       <p><code class="codeph">staging_table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3148 d917986e3121 ">
                                       <p>指定要使用的表的名称。该值区分大小写。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3156" headers="d917986e3118 ">
                                       <p><code class="codeph">staging_schema_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3156 d917986e3121 ">
                                       <p>指定表所在的模式，或当前模式的<code class="codeph">NULL</code> 。该值区分大小写。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3167" headers="d917986e3118 ">
                                       <p><code class="codeph">db_version</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3167 d917986e3121 ">
                                       <p>指定确定登台表格式的数据库版本。您还可以创建较旧的数据库版本登台表，以将STS导出到较旧的数据库版本。使用以下任何值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">NULL</code> （默认值） - 指定当前数据库版本。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">STS_STGTAB_10_2_VERSION</code> - 指定10.2数据库版本。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">STS_STGTAB_11_1_VERSION</code> - 指定11.1数据库版本。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">STS_STGTAB_11_2_VERSION</code> - 指定11.2数据库版本。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9CCDE7F8-6363-4082-9E76-B9A976F95789__d5e3732">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要移动多个SQL调整集，请多次调用此过程。然后，您可以使用任何方法（例如数据库链接或Oracle Data Pump）将填充的临时表移动到目标数据库，然后解压缩目标数据库中的SQL调整集。</p>
                           </li>
                           <li>
                              <p>打包每个SQL调优集后，此函数发出<code class="codeph">COMMIT</code> 。如果在执行期间引发错误，则通过删除其行来清除临时表。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9CCDE7F8-6363-4082-9E76-B9A976F95789__GUID-7B4D7AA3-6A40-489D-9184-4AE21AD0267B">例子</p>
                        <p>将所有SQL调优集放在登台表中的数据库上：</p><pre class="pre codeblock"><code>BEGIN DBMS_SQLSET.PACK_STGTAB（sqlset_name =&gt;'％'，sqlset_owner =&gt;'％'，staging_table_name =&gt;'STGTAB_SQLSET'）;结束;</code></pre><p>仅将当前用户拥有的SQL调优集放在登台表中：</p><pre class="pre codeblock"><code>BEGIN DBMS_SQLSET.PACK_STGTAB（sqlset_name =&gt;'％'，staging_table_name =&gt;'STGTAB_SQLSET'）;结束;</code></pre><p>打包一个特定的SQL调优集：</p><pre class="pre codeblock"><code>BEGIN DBMS_SQLSET.PACK_STGTAB（sqlset_name =&gt;'my_workload'，staging_table_name =&gt;'STGTAB_SQLSET'）;结束;</code></pre><p>打包第二个SQL调优集：</p><pre class="pre codeblock"><code>BEGIN DBMS_SQLSET.PACK_STGTAB（sqlset_name =&gt;'workload_subset'，staging_table_name =&gt;'STGTAB_SQLSET'）;结束;</code></pre><p>将STS <code class="codeph">my_workload_subset</code>到为Oracle Database <span class="italic">11g</span>第2版（11.2）创建的临时表<code class="codeph">stgtab_sqlset</code> ：</p><pre class="pre codeblock"><code>BEGIN DBMS_SQLSET.PACK_STGTAB（sqlset_name =&gt;'workload_subset'，staging_table_name =&gt;'STGTAB_SQLSET'，db_version =&gt; DBMS_SQLSET.STS_STGTAB_11_2_VERSION）;结束;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B912E8F4-ECC6-460D-B154-0551474A0717" name="GUID-B912E8F4-ECC6-460D-B154-0551474A0717"></a><h4 id="ARPLS-GUID-B912E8F4-ECC6-460D-B154-0551474A0717" class="sect4"><span class="enumeration_section">162.4.9</span> REMAP_STGTAB程序</h4>
                  <div>
                     <p><span>此过程更改登台表中的调整集名称和所有者，以便可以使用不同的值解压缩它们。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B912E8F4-ECC6-460D-B154-0551474A0717__GUID-46B40BB7-9A3B-401B-8FEF-149E7DC4D21A">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.REMAP_STGTAB（old_sqlset_name IN VARCHAR2，old_sqlset_owner IN VARCHAR2：= NULL，new_sqlset_name IN VARCHAR2：= NULL，new_sqlset_owner IN VARCHAR2：= NULL，staging_table_name IN VARCHAR2，staging_schema_owner IN VARCHAR2：= NULL old_con_dbid IN NUMBER：= NULL，new_con_dbid IN NUMBER： = NULL）; ）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B912E8F4-ECC6-460D-B154-0551474A0717__d5e3842">参数</p>
                        <p>DBMS_SQLTUNE.REMAP_STGTAB_SQLSET和DBMS_SQLSET.REMAP_SQLSET过程的参数相同。</p>
                        <div class="tblformal" id="GUID-B912E8F4-ECC6-460D-B154-0551474A0717__d5e3847">
                           <p class="titleintable">表162-11 REMAP_STGTAB_SQLSET和REMAP_SQLSET过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMAP_STGTAB_SQLSET和REMAP_SQLSET过程参数" width="100%" border="1" summary="This table describes parameters used by the DBMS_SQLTUNE.REMAP_STGTAB_SQLSET and DBMS_SQLSET.REMAP_SQLSET procedures." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d917986e3353">参数</th>
                                    <th align="left" valign="bottom" width="80%" id="d917986e3356">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3361" headers="d917986e3353 ">
                                       <p><code class="codeph">old_sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3361 d917986e3356 ">
                                       <p>指定要为重映射操作定位的调整集的名称。不支持通配符（ <code class="codeph">%</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3372" headers="d917986e3353 ">
                                       <p><code class="codeph">old_sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3372 d917986e3356 ">
                                       <p>指定要为重映射操作定位的调优集所有者的新名称。当前架构所有者为<code class="codeph">NULL</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3383" headers="d917986e3353 ">
                                       <p><code class="codeph">new_sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3383 d917986e3356 ">
                                       <p>指定调优集的新名称，或<code class="codeph">NULL</code>以保持相同的调优集名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3394" headers="d917986e3353 ">
                                       <p><code class="codeph">new_sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3394 d917986e3356 ">
                                       <p>指定调优集的新所有者，或<code class="codeph">NULL</code>以保持相同的所有者名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3405" headers="d917986e3353 ">
                                       <p><code class="codeph">staging_table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3405 d917986e3356 ">
                                       <p>指定要在其上执行重映射操作的表的名称。该值区分大小写。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3413" headers="d917986e3353 ">
                                       <p><code class="codeph">staging_schema_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3413 d917986e3356 ">
                                       <p>指定登台表所有者的名称，或当前架构所有者的<code class="codeph">NULL</code> 。该值区分大小写。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3424" headers="d917986e3353 ">
                                       <p><code class="codeph">old_con_dbid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3424 d917986e3356 ">
                                       <p>指定要重新映射到新容器DBID的旧容器DBID。</p>
                                       <p>指定<code class="codeph">NULL</code>以使用相同的容器DBID。您必须同时提供<code class="codeph">old_con_dbid</code>和<code class="codeph">new_con_dbid</code>才能使重映射成功。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e3443" headers="d917986e3353 ">
                                       <p><code class="codeph">new_con_dbid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e3443 d917986e3356 ">
                                       <p>指定要用旧容器DBID替换的新容器DBID。</p>
                                       <p>指定<code class="codeph">NULL</code>以使用相同的容器DBID。您必须同时提供<code class="codeph">old_con_dbid</code>和<code class="codeph">new_con_dbid</code>才能使重映射成功。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B912E8F4-ECC6-460D-B154-0551474A0717__d5e3966">使用说明</p>
                        <p>多次调用此过程以重新映射多个调整集名称或所有者。此过程仅处理每个调用一个调整集。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B912E8F4-ECC6-460D-B154-0551474A0717__GUID-43D1122A-A863-4382-9119-FEEB2A19BDD9">例子</p><pre class="pre codeblock"><code>- 在解压缩之前，更改登台表中STS的名称。BEGIN DBMS_SQLSET.REMAP_STGTAB（old_sqlset_name =&gt;'my_workload'，old_sqlset_owner =&gt;'SH'，new_sqlset_name =&gt;'imp_workload'，staging_table_name =&gt;'STGTAB_SQLSET'）; - 在解压缩之前，更改登台表中STS的所有者。DBMS_SQLSET.REMAP_STGTAB（old_sqlset_name =&gt;'imp_workload'，old_sqlset_owner =&gt;'SH'，new_sqlset_owner =&gt;'SYS'，staging_table_name =&gt;'STGTAB_SQLSET'）;结束;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-31126D7E-4F52-404A-9B66-DFB5B1929E10" name="GUID-31126D7E-4F52-404A-9B66-DFB5B1929E10"></a><h4 id="ARPLS-GUID-31126D7E-4F52-404A-9B66-DFB5B1929E10" class="sect4"><span class="enumeration_section">162.4.10</span> REMOVE_REFERENCE程序</h4>
                  <div>
                     <p><span>此过程取消激活SQL调整集以指示客户端不再使用它。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-31126D7E-4F52-404A-9B66-DFB5B1929E10__GUID-8980312A-9935-466A-A0ED-155F5DE6E564">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.REMOVE_REFERENCE（sqlset_name IN VARCHAR2，reference_id IN NUMBER，sqlset_owner IN VARCHAR2：= NULL，force_remove IN NUMBER：= 0）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-31126D7E-4F52-404A-9B66-DFB5B1929E10__d5e3420">参数</p>
                        <p><code class="codeph">DBMS_SQLTUNE.REMOVE_SQLSET_REFERENCE</code>和<code class="codeph">DBMS_SQLSET.REMOVE_REFERENCE</code>过程的参数相同。
                        </p>
                        <div class="tblformal" id="GUID-31126D7E-4F52-404A-9B66-DFB5B1929E10__d5e3431">
                           <p class="titleintable">表162-12 REMOVE_SQLSET_REFERENCE和REMOVE_REFERENCE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_SQLSET_REFERENCE和REMOVE_REFERENCE过程参数" width="100%" border="1" summary="This table describes Parameters used by the REMOVE_SQLSET_REFERENCE and REMOVE_REFERENCE subprograms." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e3590">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e3593">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3598" headers="d917986e3590 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3598 d917986e3593 ">
                                       <p>指定SQL调优集的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3606" headers="d917986e3590 ">
                                       <p><code class="codeph">REFERENCE_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3606 d917986e3593 ">
                                       <p>指定要删除的引用的标识符。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3614" headers="d917986e3590 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3614 d917986e3593 ">
                                       <p>指定SQL调优集的所有者（或当前架构所有者的<code class="codeph">NULL</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3625" headers="d917986e3590 ">
                                       <p><code class="codeph">force_remove</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3625 d917986e3593 ">
                                       <p>指定是否可以为其他用户删除引用（ <code class="codeph">1</code> ）或是否无法删除它们（ <code class="codeph">0</code> ）。
                                       </p>
                                       <p>将此参数设置为<code class="codeph">1</code>仅在用户具有<code class="codeph">ADMINISTER ANY SQL TUNING SET</code>权限时才会生效。否则，数据库仅删除用户拥有的引用。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-31126D7E-4F52-404A-9B66-DFB5B1929E10__GUID-3B149B2D-44CA-413E-A87F-195C3FE392E3">例子</p>
                        <p>您可以在完成使用后删除给定SQL调优集上的引用，并希望再次使其可写。以下示例删除对<code class="codeph">my_workload</code>的引用：</p><pre class="pre codeblock"><code>EXEC DBMS_SQLSET.REMOVE_REFERENCE（sqlset_name =&gt;'my_workload'， -  reference_id =&gt;：rid）;</code></pre><p>使用<code class="codeph">DBA_SQLSET_REFERENCES</code>视图查找对给定SQL调优集的所有引用。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57" name="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57"></a><h4 id="ARPLS-GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57" class="sect4"><span class="enumeration_section">162.4.11</span> SELECT_CURSOR_CACHE函数</h4>
                  <div>
                     <p><span>此函数从共享SQL区域收集SQL语句。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-0EC6BE0B-A27D-45A9-9203-D139D2B33BCD">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.SELECT_CURSOR_CACHE（basic_filter IN VARCHAR2：= NULL，object_filter IN VARCHAR2：= NULL，ranking_measure1 IN VARCHAR2：= NULL，ranking_measure2 IN VARCHAR2：= NULL，ranking_measure3 IN VARCHAR2：= NULL，result_percentage IN NUMBER：= 1，result_limit IN NUMBER： = NULL，attribute_list IN VARCHAR2：='TYPICAL'，recursive_sql IN VARCHAR2：= HAS_RECURSIVE_SQL）RETURN sys.sqlset PIPELINED;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__d5e2102">参数</p>
                        <div class="tblformal" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__d5e2105">
                           <p class="titleintable">表162-13 SELECT_CURSOR_CACHE函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SELECT_CURSOR_CACHE函数参数" width="100%" border="1" summary="This table describes Parameters used by the SELECT_CURSOR_CACHE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e3773">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e3776">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3781" headers="d917986e3773 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3781 d917986e3776 ">
                                       <p>指定从<code class="codeph">SQLSET_ROW</code>属性上定义的共享SQL区域过滤SQL的SQL谓词。</p>
                                       <p>如果调用者未设置<code class="codeph">basic_filter</code> ，则子程序仅捕获<code class="codeph">CREATE TABLE</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">SELECT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">MERGE</code>类型的语句。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3816" headers="d917986e3773 ">
                                       <p><code class="codeph">object_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3816 d917986e3776 ">
                                       <p>目前不支持。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3824" headers="d917986e3773 ">
                                       <p><code class="codeph">ranking_measure（n）的</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3824 d917986e3776 ">
                                       <p>在所选SQL上定义<code class="codeph">ORDER BY</code>子句。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3835" headers="d917986e3773 ">
                                       <p><code class="codeph">result_percentage</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3835 d917986e3776 ">
                                       <p>指定根据提供的排名度量选择前<span class="italic">n</span> ％的过滤器。
                                       </p>
                                       <p>仅当提供一个排名度量时，该值才适用。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3848" headers="d917986e3773 ">
                                       <p><code class="codeph">RESULT_LIMIT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3848 d917986e3776 ">
                                       <p>根据排名度量排序的筛选源定义上限SQL。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3856" headers="d917986e3773 ">
                                       <p><code class="codeph">ATTRIBUTE_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3856 d917986e3776 ">
                                       <p>指定要在结果中返回的SQL语句属性的列表。</p>
                                       <p>可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> - 指定<code class="codeph">BASIC</code>加SQL计划（没有行源统计信息）且没有对象引用列表（默认）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC</code> - 指定除计划之外的所有属性（例如执行统计信息和绑定）。执行上下文始终是结果的一部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> - 指定所有属性。
                                             </p>
                                          </li>
                                          <li>
                                             <p>以逗号分隔的属性名称列表。</p>
                                             <p>此值仅返回SQL属性的子集：</p>
                                             <ul style="list-style-type:disc">
                                                <li>
                                                   <p><code class="codeph">EXECUTION_STATISTICS</code></p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">BIND_LIST</code></p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">object_list中</code></p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SQL_PLAN</code></p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SQL_PLAN_STATISTICS</code> - 与<code class="codeph">SQL_PLAN</code>和行源统计信息类似</p>
                                                </li>
                                             </ul>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e3915" headers="d917986e3773 ">
                                       <p><code class="codeph">recursive_sql</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e3915 d917986e3776 ">
                                       <p>指定过滤器必须在SQL调优集（ <code class="codeph">HAS_RECURSIVE_SQL</code> ，这是默认值）中包含递归SQL或将其排除（ <code class="codeph">NO_RECURSIVE_SQL</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__d5e2271">返回值</p>
                        <p>此函数返回每个数据源中找到的每个<code class="codeph">SQL_ID</code>或<code class="codeph">PLAN_HASH_VALUE</code>对的一个<code class="codeph">SQLSET_ROW</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__d5e2286">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>提供给此函数的过滤器将作为当前用户运行SQL的一部分进行评估。因此，它们使用该用户的安全权限执行，并且可以包含用户可以访问的任何构造和子查询，但不能包含。</p>
                           </li>
                           <li>
                              <p>用户需要共享SQL区域视图的权限。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-B615217F-C8F0-4171-9130-71C3BF272D48">
                        <p class="titleinexample">示例162-1具有500或更多缓冲区获取的语句</p>
                        <p>此查询获取具有500个缓冲区获取的语句的SQL ID和SQL文本：</p><pre class="pre codeblock"><code>SELECT SQL_ID，SQL_TEXT FROM TABLE（DBMS_SQLSET.SELECT_CURSOR_CACHE（'buffer_gets&gt; 500'））ORDER BY sql_id;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-3C71F8FE-1964-48C9-BD64-B39D813EAF2E">
                        <p class="titleinexample">示例162-2有关语句的所有信息</p>
                        <p>以下查询获取有关SQL ID为<code class="codeph">4rm4183czbs7j</code>的SQL语句的所有信息：</p><pre class="pre codeblock"><code>SELECT * FROM TABLE（DBMS_SQLSET.SELECT_CURSOR_CACHE（'sql_id =''4rm4183czbs7j'''））;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-737FE0FA-687B-4019-9668-D86ED5C87CBD">
                        <p class="titleinexample">示例162-3 SQL语句的多个计划</p>
                        <p>数据源可以为每个SQL语句存储多个计划。<code class="codeph">SELECT_CURSOR_CACHE</code>函数的输出是SQL行集对象，由SQL ID和计划散列值唯一标识。此示例使用SQL ID <code class="codeph">ay1m3ssvtrh24</code>查询语句的计划哈希值：</p><pre class="pre codeblock"><code>SELECT sql_id，plan_hash_value FROM table（DBMS_SQLSET.select_cursor_cache（'sql_id =''ay1m3ssvtrh24'''））ORDER BY sql_id，plan_hash_value;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-A588C682-4E30-45DF-88A1-B7ED72F36DFF">
                        <p class="titleinexample">示例162-4处理共享SQL区域中的所有语句</p>
                        <p>此示例处理共享SQL区域中的所有语句：</p><pre class="pre codeblock"><code>DECLARE cur sys_refcursor; BEGIN OPEN cur FOR SELECT VALUE（p）FROM TABLE（DBMS_SQLSET.SELECT_CURSOR_CACHE）p; - 处理游标中的每个语句（或将游标传递给load_sqlset）。关闭cur;结束; /</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-03E35FFE-F29C-4B88-98B5-C116CC02FB46">
                        <p class="titleinexample">示例162-5 SYS未解析的进程语句</p>
                        <p>此示例处理<code class="codeph">SYS</code>模式中未解析的所有语句：</p><pre class="pre codeblock"><code>DECLARE cur sys_refcursor; SELECT VALUE（p）FROM TABLE（DBMS_SQLSET.SELECT_CURSOR_CACHE（'parsing_schema_name &lt;&gt;''SYS'''））p; BEGIN OPEN cur; - 处理每个语句（或将游标传递给load_sqlset）。关闭cur;结束; /</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-A86724B8-BCF2-4F02-808E-A2A6184D61C8">
                        <p class="titleinexample">示例162-6应用程序模块和操作中的所有语句</p>
                        <p>此示例处理来自指定应用程序模块和操作的所有语句：</p><pre class="pre codeblock"><code>DECLARE cur sys_refcursor; BEGIN OPEN cur FOR SELECT VALUE（p）FROM TABLE（DBMS_SQLSET.SELECT_CURSOR_CACHE（'module =''MY_APPLICATION''和action =''MY_ACTION'''））p; - 处理每个语句（或将游标传递给load_sqlset）CLOSE cur;结束;/</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-174A2B98-05C9-45DB-BDA6-25EB99125883">
                        <p class="titleinexample">例162-7所有经过时间至少为五秒的语句</p>
                        <p>此示例处理运行至少五秒的所有语句：</p><pre class="pre codeblock"><code>DECLARE cur sys_refcursor; BEGIN OPEN cur FOR SELECT VALUE（P）FROM table（DBMS_SQLSET.SELECT_CURSOR_CACHE（'elapsed_time&gt; 5000000'））P; - 处理每个语句（或将游标传递给load_sqlset）CLOSE cur;结束; /</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-D5AA7C0A-0FC3-4C16-8680-A54F4370357E">
                        <p class="titleinexample">示例162-8 APPS模式中分析的语句</p>
                        <p>此示例处理在<code class="codeph">APPS</code>模式中解析并具有超过100个缓冲区获取的所有SQL语句：</p><pre class="pre codeblock"><code>DECLARE cur sys_refcursor; BEGIN OPEN cur FOR SELECT VALUE（p）FROM TABLE（DBMS_SQLSET.SELECT_CURSOR_CACHE（'buffer_gets&gt; 100 and parsing_schema_name =''APPS'''））p; - 处理每个语句（或将游标传递给load_sqlset）CLOSE cur;结束; /</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-E5458115-D3D6-48E0-B9C7-AB7FA560AB8F">
                        <p class="titleinexample">示例162-9计划和SQL语句</p>
                        <p>此示例处理超过5秒的所有SQL语句。它还选择这些陈述的计划。出于性能原因，该示例选择执行统计信息和SQL绑定。<code class="codeph">sqlset_row</code>的<code class="codeph">SQL_PLAN</code>属性为<code class="codeph">NULL</code> 。</p><pre class="pre codeblock"><code>- 选择所有超过5秒的语句，但是 - 选择计划（默认情况下我们只选择执行统计和绑定 - 出于性能原因 - 在这种情况下，sqlset_row的SQL_PLAN属性 - 为NULL）DECLARE cur SYS_REFCURSOR; BEGIN OPEN cur FOR SELECT VALUE（p）FROM TABLE（DBMS_SQLSET.SELECT_CURSOR_CACHE（basic_filter =&gt;'elapsed_time&gt; 5000000'，object_filter =&gt; NULL，ranking_measure1 =&gt; NULL，ranking_measure2 =&gt; NULL，ranking_measure3 =&gt; NULL，result_percentage =&gt; 1， result_limit =&gt; NULL，attribute_list =&gt;'EXECUTION_STATISTICS，SQL_BINDS，SQL_PLAN'，recursive_sql =&gt; HAS_RECURSIVE_SQL））p; - 处理每个语句（或将游标传递给load_sqlset）CLOSE cur;结束;/</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-E9BAD0F6-B459-4770-A49C-1A3E84A0FB73">
                        <p class="titleinexample">示例162-10按经过时间排序的前100个语句</p>
                        <p>此示例选择共享SQL区域中的前100个语句，按经过时间排序：</p><pre class="pre codeblock"><code>DECLARE cur sys_refcursor; BEGIN OPEN cur FOR SELECT VALUE（p）FROM TABLE（DBMS_SQLSET.SELECT_CURSOR_CACHE（basic_filter =&gt; NULL，object_filter =&gt; NULL，ranking_measure_1 =&gt;'ELAPSED_TIME'，ranking_measure_2 =&gt; NULL，ranking_measure_3 =&gt; NULL，result_percentage =&gt; 1，result_limit = &gt; 100，attribute_list =&gt;'TYPICAL'，recursive_sql =&gt; HAS_RECURSIVE_SQL）））p; - 处理每个语句（或将游标传递给load_sqlset）CLOSE cur;结束; /</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AA538760-6B33-4A86-A4F5-85C049A3BD57__GUID-52131506-7157-47ED-9955-CF625D03FE00">
                        <p class="titleinexample">示例162-11负责大多数缓冲区获取的语句</p>
                        <p>此示例处理累积占据共享SQL区域中90％缓冲区的语句。添加在一起的所有语句的缓冲区获取大约是当前共享SQL区域中所有语句总和的90％。</p><pre class="pre codeblock"><code>DECLARE cur sys_refcursor; BEGIN OPEN cur FOR SELECT VALUE（P）FROM table（DBMS_SQLSET.SELECT_CURSOR_CACHE（basic_filter =&gt; NULL，object_filter =&gt; NULL，ranking_measure_1 =&gt;'BUFFER_GETS'，ranking_measure_2 =&gt; NULL，ranking_measure_3 =&gt; NULL，result_percentage =&gt; .9，result_limit =&gt; NULL，attribute_list =&gt;'TYPICAL'，recursive_sql =&gt; HAS_RECURSIVE_SQL）））p; - 处理每个语句（或将游标传递给load_sqlset）。关闭cur;结束; /</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649" name="GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649"></a><h4 id="ARPLS-GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649" class="sect4"><span class="enumeration_section">162.4.12</span> SELECT_SQL_TRACE函数</h4>
                  <div>
                     <p><span>此表函数读取一个或多个跟踪文件的内容，并以<code class="codeph">sqlset_row</code>的格式返回它找到的SQL语句。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649__GUID-0473FE78-DD9A-43CC-A70B-B281801E14E0">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.SELECT_SQL_TRACE（目录IN VARCHAR2，file_name IN VARCHAR2：= NULL，mapping_table_name IN VARCHAR2：= NULL，mapping_table_owner IN VARCHAR2：= NULL ,, select_mode IN POSITIVE：= SINGLE_EXECUTION，options IN BINARY_INTEGER：= LIMITED_COMMAND_TYPE，pattern_start IN VARCHAR2：= NULL ，pattern_end IN VARCHAR2：= NULL，result_limit IN POSITIVE：= NULL）RETURN sys.sqlset PIPELINED;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649__d5e2297">参数</p>
                        <div class="tblformal" id="GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649__d5e2300">
                           <p class="titleintable">表162-14 SELECT_SQL_TRACE函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SELECT_SQL_TRACE函数参数" width="100%" border="1" summary="This table describes Parameters used by the SELECT_SQL_TRACE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e4168">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e4171">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4176" headers="d917986e4168 ">
                                       <p><code class="codeph">目录</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4176 d917986e4171 ">
                                       <p>定义包含跟踪文件的目录对象。此字段是必填字段。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4184" headers="d917986e4168 ">
                                       <p><code class="codeph">文件名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4184 d917986e4171 ">
                                       <p>指定跟踪文件的全部或部分名称。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该函数使用指定位置或路径中的当前或最新文件。匹配跟踪文件名支持<code class="codeph">'%'</code>通配符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4200" headers="d917986e4168 ">
                                       <p><code class="codeph">mapping_table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4200 d917986e4171 ">
                                       <p>指定映射表名称。</p>
                                       <p>请注意，映射表名称不区分大小写。如果映射表名称为<code class="codeph">NULL</code> ，则该函数使用当前数据库中的映射。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4213" headers="d917986e4168 ">
                                       <p><code class="codeph">mapping_table_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4213 d917986e4171 ">
                                       <p>指定映射表所有者。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该函数使用当前用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4226" headers="d917986e4168 ">
                                       <p><code class="codeph">选择模式</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4226 d917986e4171 ">
                                       <p>指定从跟踪中选择SQL的模式。</p>
                                       <p>可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SINGLE_EXECUTION</code> - 返回SQL的一次执行。这是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL_EXECUTIONS</code> - 返回所有执行。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4247" headers="d917986e4168 ">
                                       <p><code class="codeph">选项</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4247 d917986e4171 ">
                                       <p>指定返回哪些类型的SQL语句。</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">LIMITED_COMMAND_TYPE</code> - 使用命令类型<code class="codeph">CREATE</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">SELECT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">MERGE</code>返回SQL语句。该值是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL_COMMAND_TYPE</code> - 返回包含所有命令类型的SQL语句。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4285" headers="d917986e4168 ">
                                       <p><code class="codeph">pattern_start</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4285 d917986e4171 ">
                                       <p>指定要考虑的跟踪文件节的分隔模式。目前无法接受。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4293" headers="d917986e4168 ">
                                       <p><code class="codeph">pattern_end</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4293 d917986e4171 ">
                                       <p>指定要处理的跟踪文件节的结束分隔模式。目前无法接受。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4301" headers="d917986e4168 ">
                                       <p><code class="codeph">RESULT_LIMIT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4301 d917986e4171 ">
                                       <p>指定筛选源中的顶级SQL。如果为<code class="codeph">NULL</code> ，则默认为<code class="codeph">MAXSB4</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649__d5e2457">返回值</p>
                        <p>此函数返回<code class="codeph">SQLSET_ROW</code>对象。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649__GUID-D589CB3B-4954-4D4C-8B82-BA19CDE846AC">使用说明</p>
                        <p>为系统目录创建目录对象的能力会产生潜在的安全问题。例如，在CDB中，所有容器都将跟踪文件写入同一目录。在此目录上具有<code class="codeph">SELECT</code>权限的本地用户可以读取属于任何容器的跟踪文件的内容。
                        </p>
                        <p>要防止此类未经授权的访问，请将文件从默认SQL跟踪目录复制到其他目录，然后创建目录对象。使用<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句的<code class="codeph">PATH_PREFIX</code>子句确保与PDB关联的所有目录对象路径都限制在指定目录或其子目录中。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649__GUID-05F20254-64DD-4621-AB06-4DB1A00097CC">例子</p>
                        <p>以下代码显示如何为一些SQL语句启用SQL跟踪并将结果加载到SQL调优集中：</p><pre class="pre codeblock"><code>- 打开捕获数据库中的SQL跟踪ALTER SESSION SET EVENTS'10046 TRACE NAME CONTEXT FOREVER，LEVEL 4' - 运行sql语句SELECT 1 FROM DUAL; SELECT COUNT（*）FROM dba_tables WHERE table_name =：mytab; ALTER SESSION SET EVENTS'10046 TRACE NAME CONTEXT OFF'; - 从捕获数据库创建映射表CREATE TABLE映射AS SELECT object_id id，owner，substr（object_name，1,30）name FROM dba_objects WHERE object_type NOT IN（'CONSUMER GROUP'，'EVALUATION CONTEXT'，'FUNCTION'，' INDEXTYPE'，'JAVA CLASS'，'JAVA DATA'，'JAVA RESOURCE'，'LIBRARY'，'LOB'，'OPERATOR'，'PACKAGE'，'PACKAGE BODY'，'PROCEDURE'，'QUEUE'，'资源计划'，'TRIGGER'，'TYPE'，'TYPE BODY'）UNION ALL SELECT user_id id，username owner，NULL name FROM dba_users; - 创建存储SQL跟踪的目录对象CREATE DIRECTORY SQL_TRACE_DIR为'/ home / foo / trace'; - 创建STS EXEC DBMS_SQLSET.CREATE_SQLSET（'my_sts'，'test purpose'）; - 从SQL TRACE DECLARE cur sys_refcursor将SQL语句加载到STS中; BEGIN OPEN cur FOR SELECT值（p）FROM TABLE（DBMS_SQLSET.SELECT_SQL_TRACE（directory =&gt;'SQL_TRACE_DIR'，file_name =&gt;'％trc'，mapping_table_name =&gt;'mapping'））p; DBMS_SQLSET.LOAD_SQLSET（'my_sts'，cur）;关闭cur;结束; /</code></pre><div class="infoboxnotealso" id="GUID-98BE5AFB-C5B6-4495-AC53-5F8952A48649__GUID-38B15980-9AA1-4331-8878-9A5B1917D34B">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF55686" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">PATH_PREFIX</code>子句的更多信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0" name="GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0"></a><h4 id="ARPLS-GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0" class="sect4"><span class="enumeration_section">162.4.13</span> SELECT_SQLPA_TASK函数</h4>
                  <div>
                     <p><span>此函数从SQL Performance Analyzer比较任务收集SQL语句。</span></p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0__GUID-23E1DE01-14F4-4BC7-80CA-1D1830EDAA8D">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">SELECT_SQLPA_TASK</code>示例的<a href="../ratug/comparing-sql-trials.html#GUID-0B629FA1-FF45-44D0-BB2D-28FF762BC102" target="_blank"><span><cite>Oracle数据库测试指南</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0__GUID-9DF15692-D0DA-4476-B5BE-5EA8A9971DEC">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.SELECT_SQLPA_TASK（task_name IN VARCHAR2，task_owner IN VARCHAR2：= NULL，execution_name IN VARCHAR2：= NULL，level_filter IN VARCHAR2：='REGRESSED'，basic_filter IN VARCHAR2：= NULL，object_filter IN VARCHAR2：= NULL，attribute_list IN VARCHAR2：= 'TYPICAL'）RETURN sys.sqlset PIPELINED;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0__d5e2466">参数</p>
                        <div class="tblformal" id="GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0__d5e2469">
                           <p class="titleintable">表162-15 SELECT_SQLPA_TASK函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SELECT_SQLPA_TASK函数参数" width="100%" border="1" summary="This table describes Parameters used by the SELECT_SQLPA_TASK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d917986e4479">参数</th>
                                    <th align="left" valign="bottom" width="80%" id="d917986e4482">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e4487" headers="d917986e4479 ">
                                       <p><code class="codeph">任务名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e4487 d917986e4482 ">
                                       <p>指定SQL Performance Analyzer任务的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e4495" headers="d917986e4479 ">
                                       <p><code class="codeph">task_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e4495 d917986e4482 ">
                                       <p>指定SQL Performance Analyzer任务的所有者。如果为<code class="codeph">NULL</code> ，则假定当前用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e4506" headers="d917986e4479 ">
                                       <p><code class="codeph">execution_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e4506 d917986e4482 ">
                                       <p>指定将应用提供的筛选器的SQL Performance Analyzer任务执行的名称（类型<code class="codeph">COMPARE PERFORMANCE</code> ）。如果为<code class="codeph">NULL</code> ，则假定执行最近的<code class="codeph">COMPARE PERFORMANCE</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e4523" headers="d917986e4479 ">
                                       <p><code class="codeph">level_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e4523 d917986e4482 ">
                                       <p>指定要包含的SQL语句子集。格式与<code class="codeph">DBMS_SQLPA.REPORT_ANALYSIS_TASK.LEVEL</code>相同，删除了一些可能的字符串。
                                       </p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">IMPROVED</code>仅包含改进的SQL。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REGRESSED</code>仅包括回归SQL（默认）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CHANGED</code>仅包括性能已更改的SQL。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">UNCHANGED</code>仅包含性能不变的SQL。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CHANGED_PLANS</code>仅包含计划更改的SQL。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">UNCHANGED_PLANS</code>仅包含未更改计划的SQL。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ERRORS</code>仅包含仅包含错误的SQL。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MISSING_SQL</code>仅包含缺少的SQL语句（跨STS）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NEW_SQL</code>仅包含新的SQL语句（跨STS）。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e4580" headers="d917986e4479 ">
                                       <p><code class="codeph">基本过滤器</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e4580 d917986e4482 ">
                                       <p>除了级别筛选器之外，还指定用于筛选SQL的SQL谓词。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e4588" headers="d917986e4479 ">
                                       <p><code class="codeph">object_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e4588 d917986e4482 ">
                                       <p>目前不支持。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e4596" headers="d917986e4479 ">
                                       <p><code class="codeph">ATTRIBUTE_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e4596 d917986e4482 ">
                                       <p>定义要在结果中返回的SQL语句属性。</p>
                                       <p>可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> - 返回<code class="codeph">BASIC</code>加上SQL计划（没有行源统计信息）且没有对象引用列表。这是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC</code> - 返回除计划之外的所有属性（例如执行统计信息和绑定）。执行上下文始终是结果的一部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> - 返回所有属性。
                                             </p>
                                          </li>
                                          <li>
                                             <p>以逗号分隔的属性名称列表，它允许仅返回SQL属性的子集： <code class="codeph">EXECUTION_STATISTICS</code> ， <code class="codeph">SQL_BINDS</code> ， <code class="codeph">SQL_PLAN_STATISTICS</code> （类似于<code class="codeph">SQL_PLAN</code> +行源统计信息）。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0__d5e2640">返回值</p>
                        <p>此函数返回SQL调整集对象。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DAAA4DAE-9694-4530-BD2A-01EC33515BA0__d5e2646">使用说明</p>
                        <p>例如，您可以使用此函数创建一个SQL调优集，其中包含在SQL性能分析器（SPA）实验期间回归的SQL语句子集。您还可以指定其他任意过滤器。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9D995019-91AB-4B1E-9EAF-031050789B21" name="GUID-9D995019-91AB-4B1E-9EAF-031050789B21"></a><h4 id="ARPLS-GUID-9D995019-91AB-4B1E-9EAF-031050789B21" class="sect4"><span class="enumeration_section">162.4.14</span> SELECT_SQLSET函数</h4>
                  <div>
                     <p><span>这是一个读取SQL调优集内容的表函数。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9D995019-91AB-4B1E-9EAF-031050789B21__GUID-A67AF322-8F5C-445B-93B5-1AA6B4F47AD5">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.SELECT_SQLSET（sqlset_name IN VARCHAR2，basic_filter IN VARCHAR2：= NULL，object_filter IN VARCHAR2：= NULL，ranking_measure1 IN VARCHAR2：= NULL，ranking_measure2 IN VARCHAR2：= NULL，ranking_measure3 IN VARCHAR2：= NULL，result_percentage IN NUMBER：= 1， result_limit IN NUMBER：= NULL）attribute_list IN VARCHAR2：='TYPICAL'，plan_filter IN VARCHAR2：= NULL，sqlset_owner IN VARCHAR2：= NULL，recursive_sql IN VARCHAR2：= HAS_RECURSIVE_SQL）RETURN sys.sqlset PIPELINED;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9D995019-91AB-4B1E-9EAF-031050789B21__d5e2652">参数</p>
                        <div class="tblformal" id="GUID-9D995019-91AB-4B1E-9EAF-031050789B21__d5e2655">
                           <p class="titleintable">表162-16 SELECT_SQLSET函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SELECT_SQLSET函数参数" width="100%" border="1" summary="This table describes Parameters used by the SELECT_SQLSET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e4761">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e4764">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4769" headers="d917986e4761 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4769 d917986e4764 ">
                                       <p>指定要查询的SQL调整集的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4777" headers="d917986e4761 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4777 d917986e4764 ">
                                       <p>指定SQL谓词，以从<code class="codeph">SQLSET_ROW</code>属性上定义的SQL调优集中筛选SQL。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4788" headers="d917986e4761 ">
                                       <p><code class="codeph">object_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4788 d917986e4764 ">
                                       <p>目前不支持。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4796" headers="d917986e4761 ">
                                       <p><code class="codeph">ranking_measure（n）的</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4796 d917986e4764 ">
                                       <p>指定所选SQL上的<code class="codeph">ORDER BY</code>子句。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4807" headers="d917986e4761 ">
                                       <p><code class="codeph">result_percentage</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4807 d917986e4764 ">
                                       <p>指定根据提供的排名度量选择前<span class="italic">n</span> ％的过滤器。
                                       </p>
                                       <p>请注意，仅当提供了一个排名度量时，此参数才适用。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4820" headers="d917986e4761 ">
                                       <p><code class="codeph">RESULT_LIMIT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4820 d917986e4764 ">
                                       <p>来自筛选源的最高限制SQL，按排名度量排名。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4828" headers="d917986e4761 ">
                                       <p><code class="codeph">ATTRIBUTE_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4828 d917986e4764 ">
                                       <p>定义要在结果中返回的SQL语句属性。</p>
                                       <p>可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> - 返回除计划之外的所有属性（例如执行统计信息和绑定）。执行上下文包含在结果中。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> - 返回<code class="codeph">BASIC</code>加上SQL计划，但没有行源统计信息且没有对象引用列表。这是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> - 返回所有属性。
                                             </p>
                                          </li>
                                          <li>
                                             <p>以逗号分隔的属性名称列表。此值使函数只返回SQL属性的子集：</p>
                                             <ul style="list-style-type:disc">
                                                <li>
                                                   <p><code class="codeph">EXECUTION_STATISTICS</code></p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SQL_BINDS</code></p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SQL_PLAN_STATISTICS</code> （类似于<code class="codeph">SQL_PLAN</code>加上行源统计信息）</p>
                                                </li>
                                             </ul>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4877" headers="d917986e4761 ">
                                       <p><code class="codeph">plan_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4877 d917986e4764 ">
                                       <p>指定计划过滤器。</p>
                                       <p>此参数使您可以在语句具有多个计划时选择单个计划。可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">LAST_GENERATED</code> - 返回具有最新时间戳的计划。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">FIRST_GENERATED</code> - 返回最近时间戳的计划。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LAST_LOADED</code> - 返回包含最新<code class="codeph">FIRST_LOAD_TIME</code>统计信息的计划。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">FIRST_LOADED</code> - 返回具有最新<code class="codeph">FIRST_LOAD_TIME</code>统计信息的计划。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MAX_ELAPSED TIME</code> - 返回具有最大经过时间的计划。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MAX_BUFFER_GETS</code> - 返回具有最大缓冲区获取的计划。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MAX_DISK_READS</code> - 返回具有最大磁盘读数的计划。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MAX_DIRECT_WRITES</code> - 返回具有最大直接写入的计划。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MAX_OPTIMIZER_COST</code> - 返回具有最大优化程序成本值的计划。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4939" headers="d917986e4761 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4939 d917986e4764 ">
                                       <p>指定SQL调优集的所有者，或指定当前架构所有者的<code class="codeph">NULL</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e4950" headers="d917986e4761 ">
                                       <p><code class="codeph">recursive_sql</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e4950 d917986e4764 ">
                                       <p>指定过滤器必须在SQL调优集（ <code class="codeph">HAS_RECURSIVE_SQL</code> ，这是默认值）中包含递归SQL或将其排除（ <code class="codeph">NO_RECURSIVE_SQL</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9D995019-91AB-4B1E-9EAF-031050789B21__d5e2869">返回值</p>
                        <p>此函数返回每个数据源中找到的每个<code class="codeph">SQL_ID</code>或<code class="codeph">PLAN_HASH_VALUE</code>对的一个<code class="codeph">SQLSET_ROW</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9D995019-91AB-4B1E-9EAF-031050789B21__d5e2884">使用说明</p>
                        <p>提供给此函数的过滤器将作为当前用户运行SQL的一部分进行评估。因此，它们使用该用户的安全权限执行，并且可以包含用户可以访问的任何构造和子查询，但不能包含。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9D995019-91AB-4B1E-9EAF-031050789B21__GUID-630B7620-11F5-4417-B958-48E747C0473B">例子</p><pre class="pre codeblock"><code>- 从sql调整集中选择DECLARE cur sys_refcursor; BEGIN OPEN cur FOR SELECT VALUE（P）FROM table（DBMS_SQLSET.SELECT_SQLSET（'my_workload'））P; - 处理每个语句（或将游标传递给load_sqlset）CLOSE cur;结束; /</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8" name="GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8"></a><h4 id="ARPLS-GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8" class="sect4"><span class="enumeration_section">162.4.15</span> SELECT_WORKLOAD_REPOSITORY函数</h4>
                  <div>
                     <p><span>此函数从工作负载存储库收集SQL语句。</span></p>
                     <div class="section">
                        <p>重载的表单使您可以从以下来源收集SQL语句：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">begin_snap</code>和<code class="codeph">end_snap</code>之间的快照</p>
                           </li>
                           <li>
                              <p>工作负载存储库基准</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8__GUID-AD27DBE5-782D-4584-9DEC-7EB1640706C3">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.SELECT_WORKLOAD_REPOSITORY（START_Snap IN NUMBER，end_snap IN NUMBER，basic_filter IN VARCHAR2：= NULL，object_filter IN VARCHAR2：= NULL，ranking_measure1 IN VARCHAR2：= NULL，ranking_measure2 IN VARCHAR2：= NULL，ranking_measure3 IN VARCHAR2：= NULL，result_percentage IN NUMBER ：= 1，result_limit IN NUMBER：= NULL，attribute_list IN VARCHAR2：='TYPICAL'，recursive_sql IN VARCHAR2：= HAS_RECURSIVE_SQL，dbid IN NUMBER：= NULL）RETURN sys.sqlset PIPELINED; DBMS_SQLSET.SELECT_WORKLOAD REPOSITORY（baseline_name IN VARCHAR2，basic_filter IN VARCHAR2：= NULL，object_filter IN VARCHAR2：= NULL，ranking_measure1 IN VARCHAR2：= NULL，ranking_measure2 IN VARCHAR2：= NULL，ranking_measure3 IN VARCHAR2：= NULL，result_percentage IN NUMBER：= 1 ，result_limit IN NUMBER：= NULL，attribute_list IN VARCHAR2：='TYPICAL'，recursive_sql IN VARCHAR2：= HAS_RECURSIVE_SQL，dbid IN NUMBER：= NULL）RETURN sys.sqlset PIPELINED;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8__d5e2905">参数</p>
                        <div class="tblformal" id="GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8__d5e2908">
                           <p class="titleintable">表162-17 SELECT_WORKLOAD_REPOSITORY函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SELECT_WORKLOAD_REPOSITORY函数参数" width="100%" border="1" summary="This table describes Parameters used by the SELECT_WORKLOAD_REPOSITORY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e5113">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e5116">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5121" headers="d917986e5113 ">
                                       <p><code class="codeph">begin_snap</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5121 d917986e5116 ">
                                       <p>定义起始AWR快照（不包含）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5129" headers="d917986e5113 ">
                                       <p><code class="codeph">end_snap</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5129 d917986e5116 ">
                                       <p>定义结束AWR快照（包括）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5137" headers="d917986e5113 ">
                                       <p><code class="codeph">BASELINE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5137 d917986e5116 ">
                                       <p>指定AWR基准期的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5145" headers="d917986e5113 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5145 d917986e5116 ">
                                       <p>指定SQL谓词以从工作负载存储库中筛选SQL。过滤器是在<code class="codeph">SQLSET_ROW</code>属性上定义的。</p>
                                       <p>如果调用者未设置<code class="codeph">basic_filter</code> ，则子程序仅捕获<code class="codeph">CREATE TABLE</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">SELECT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">MERGE</code>类型的语句。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5180" headers="d917986e5113 ">
                                       <p><code class="codeph">object_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5180 d917986e5116 ">
                                       <p>目前不支持。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5188" headers="d917986e5113 ">
                                       <p><code class="codeph">ranking_measure（n）的</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5188 d917986e5116 ">
                                       <p>在所选SQL上定义<code class="codeph">ORDER BY</code>子句。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5199" headers="d917986e5113 ">
                                       <p><code class="codeph">result_percentage</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5199 d917986e5116 ">
                                       <p>指定根据提供的排名度量选择前<span class="italic">n</span> ％的过滤器。请注意，此百分比仅适用于给出一个排名度量的情况。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5210" headers="d917986e5113 ">
                                       <p><code class="codeph">RESULT_LIMIT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5210 d917986e5116 ">
                                       <p>根据提供的排名度量指定源中的上限SQL。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5218" headers="d917986e5113 ">
                                       <p><code class="codeph">ATTRIBUTE_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5218 d917986e5116 ">
                                       <p>指定要在结果中返回的SQL语句属性。可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> - 返回<code class="codeph">BASIC</code>加SQL计划（没有行源统计信息）且没有对象引用列表。这是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC</code> - 返回除计划外返回的所有属性（如执行统计信息和绑定）。执行上下文始终是结果的一部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> - 返回所有属性</p>
                                          </li>
                                          <li>
                                             <p>以逗号分隔的属性名称列表，它允许仅返回SQL属性的子集： <code class="codeph">EXECUTION_STATISTICS</code> ， <code class="codeph">SQL_BINDS</code> ， <code class="codeph">SQL_PLAN_STATISTICS</code> （类似于<code class="codeph">SQL_PLAN</code>加上行源统计信息）。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5260" headers="d917986e5113 ">
                                       <p><code class="codeph">recursive_sql</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5260 d917986e5116 ">
                                       <p>指定在SQL调优集（ <code class="codeph">HAS_RECURSIVE_SQL</code> ）中包含递归SQL或将其排除（ <code class="codeph">NO_RECURSIVE_SQL</code> ）的过滤器。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5274" headers="d917986e5113 ">
                                       <p><code class="codeph">DBID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5274 d917986e5116 ">
                                       <p>指定导入的或PDB级AWR数据的DBID。如果为<code class="codeph">NULL</code> ，则该函数使用当前数据库DBID。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8__d5e3090">返回值</p>
                        <p>此函数返回每个数据源中找到的每个<code class="codeph">SQL_ID</code>或<code class="codeph">PLAN_HASH_VALUE</code>对的一个<code class="codeph">SQLSET_ROW</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8__d5e3105">使用说明</p>
                        <p>提供给此函数的过滤器将作为当前用户运行SQL的一部分进行评估。因此，它们使用该用户的安全权限执行，并且可以包含用户可以访问的任何构造和子查询，但不能包含。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-96E5E452-023E-4198-9E1E-496B92FBE7C8__GUID-C2EF0DBE-BC94-4C67-AC72-85C807D7123E">例子</p><pre class="pre codeblock"><code>- 从快照中选择语句1-2 DECLARE cur sys_refcursor; BEGIN OPEN cur FOR SELECT VALUE（P）FROM table（DBMS_SQLSET.SELECT_WORKLOAD_REPOSITORY（1,2））P; - 处理每个语句（或将游标传递给load_sqlset）CLOSE cur;结束; /</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9DF822AB-9D21-4DFB-8946-0C2C07BD9EAF" name="GUID-9DF822AB-9D21-4DFB-8946-0C2C07BD9EAF"></a><h4 id="ARPLS-GUID-9DF822AB-9D21-4DFB-8946-0C2C07BD9EAF" class="sect4"><span class="enumeration_section">162.4.16</span> UNPACK_STGTAB程序</h4>
                  <div>
                     <p><span>此过程将一个或多个SQL调优集从其在临时表中的位置复制到SQL调优集架构中，从而使它们成为正确的SQL调优集。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9DF822AB-9D21-4DFB-8946-0C2C07BD9EAF__GUID-899FC5EB-6308-412D-8F18-337F2D6433AE">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.UNPACK_STGTAB（sqlset_name IN VARCHAR2：='％'，sqlset_owner IN VARCHAR2：= NULL，替换IN BOOLEAN，staging_table_name IN VARCHAR2，staging_schema_owner IN VARCHAR2：= NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9DF822AB-9D21-4DFB-8946-0C2C07BD9EAF__d5e3746">参数</p>
                        <p><code class="codeph">DBMS_SQLTUNE.UNPACK_STGTAB_SQLSET</code>和<code class="codeph">DBMS_SQLSET.UNPACK_STGTAB</code>的参数相同。</p>
                        <div class="tblformal" id="GUID-9DF822AB-9D21-4DFB-8946-0C2C07BD9EAF__d5e3757">
                           <p class="titleintable">表162-18 UNPACK_STGTAB_SQLSET和UNPACK_STGTAB过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNPACK_STGTAB_SQLSET和UNPACK_STGTAB过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SQLTUNE.UNPACK_STGTAB_SQLSET and DBMS_SQLSET.UNPACK_STGTAB subprograms." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d917986e5423">参数</th>
                                    <th align="left" valign="bottom" width="80%" id="d917986e5426">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e5431" headers="d917986e5423 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e5431 d917986e5426 ">
                                       <p>指定要解压缩的调优集的名称（不为null）。</p>
                                       <p>支持通配符（ <code class="codeph">%</code> ）在单个调用中解压缩多个调优集。例如，指定<code class="codeph">%</code>以从登台表中解压缩所有调优集。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e5447" headers="d917986e5423 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e5447 d917986e5426 ">
                                       <p>指定调整集所有者的名称，或者为当前架构所有者指定<code class="codeph">NULL</code> 。支持通配符（ <code class="codeph">%</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e5461" headers="d917986e5423 ">
                                       <p><code class="codeph">更换</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e5461 d917986e5426 ">
                                       <p>指定是否替换现有SQL调优集。如果为<code class="codeph">FALSE</code> ，则当您尝试创建已存在的调优集时，此过程会引发错误。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e5472" headers="d917986e5423 ">
                                       <p><code class="codeph">staging_table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e5472 d917986e5426 ">
                                       <p>指定在调用<code class="codeph">DBMS_SQLTUNE.PACK_STGTAB_SQLSET</code>或<code class="codeph">DBMS_SQLSET.PACK_STGTAB</code>过程（区分大小写）后移动的登台表的名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d917986e5486" headers="d917986e5423 ">
                                       <p><code class="codeph">staging_schema_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d917986e5486 d917986e5426 ">
                                       <p>指定登台表所有者的名称，或当前架构所有者的<code class="codeph">NULL</code> （区分大小写）。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9DF822AB-9D21-4DFB-8946-0C2C07BD9EAF__GUID-293569F9-9B5D-4352-B042-8175059479E7">例子</p><pre class="pre codeblock"><code>- 解压缩登台表中的所有STS EXEC DBMS_SQLSET.UNPACK_STGTAB（sqlset_name =&gt;'％'， -  sqlset_owner =&gt;'％'， -  replace =&gt; FALSE， -  staging_table_name =&gt;'STGTAB_SQLSET'）; - 当登台表中的STS与系统上的STS具有相同的名称/所有者时，STS解包期间可能会出现错误。在这种情况下，用户应该调用 -  remap_stgtab_sqlset来修补临时表，并使用该表来解压缩 - 将set替换为TRUE。 EXEC DBMS_SQLSET.UNPACK_STGTAB（sqlset_name =&gt;'％'， -  sqlset_owner =&gt;'％'， -  replace =&gt; TRUE， -  staging_table_name =&gt;'STGTAB_SQLSET'）;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F2831B8D-135B-46B5-BCAE-788CCFC9F7DA" name="GUID-F2831B8D-135B-46B5-BCAE-788CCFC9F7DA"></a><h4 id="ARPLS-GUID-F2831B8D-135B-46B5-BCAE-788CCFC9F7DA" class="sect4"><span class="enumeration_section">162.4.17</span> UPDATE_SQLSET过程</h4>
                  <div>
                     <p><span>此重载过程会更新SQL调优集中SQL语句的选定字段。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F2831B8D-135B-46B5-BCAE-788CCFC9F7DA__GUID-E0BF9E66-F046-4F51-B7EA-0BE8E9996BD4">句法</p><pre class="pre codeblock"><code>DBMS_SQLSET.UPDATE_SQLSET（sqlset_name IN VARCHAR2，sql_id IN VARCHAR2，plan_hash_value IN NUMBER：= NULL，attribute_name IN VARCHAR2，attribute_value IN VARCHAR2：= NULL，sqlset_owner IN VARCHAR2：= NULL）; DBMS_SQLSET.UPDATE_SQLSET（sqlset_name IN VARCHAR2，sql_id IN VARCHAR2，plan_hash_value IN NUMBER：= NULL，attribute_name IN VARCHAR2，attribute_value IN NUMBER：= NULL，sqlset_owner IN VARCHAR2：= NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F2831B8D-135B-46B5-BCAE-788CCFC9F7DA__d5e3111">参数</p>
                        <div class="tblformal" id="GUID-F2831B8D-135B-46B5-BCAE-788CCFC9F7DA__d5e3114">
                           <p class="titleintable">表162-19 UPDATE_SQLSET过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UPDATE_SQLSET过程参数" width="100%" border="1" summary="This table describes parameters used by the UPDATE_SQLSET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d917986e5609">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d917986e5612">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5617" headers="d917986e5609 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5617 d917986e5612 ">
                                       <p>指定SQL调优集的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5625" headers="d917986e5609 ">
                                       <p><code class="codeph">SQL_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5625 d917986e5612 ">
                                       <p>指定要更新的SQL语句的标识符。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5633" headers="d917986e5609 ">
                                       <p><code class="codeph">plan_hash值</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5633 d917986e5612 ">
                                       <p>指定SQL语句的执行计划的哈希值。</p>
                                       <p>如果要更新语句的特定计划的属性，而不是该语句的所有计划，请使用此参数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5643" headers="d917986e5609 ">
                                       <p><code class="codeph">ATTRIBUTE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5643 d917986e5612 ">
                                       <p>指定要修改的属性的名称。</p>
                                       <p>您可以更新<code class="codeph">MODULE</code> ， <code class="codeph">ACTION</code> ， <code class="codeph">PARSING_SCHEMA_NAME</code>和<code class="codeph">OTHER</code>的文本字段。您可以更新的唯一数字字段是<code class="codeph">PRIORITY</code> 。</p>
                                       <p>如果语句有多个计划，则该过程将更改所有计划的属性值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d917986e5670" headers="d917986e5609 ">
                                       <p><code class="codeph">ATTRIBUTE_VALUE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d917986e5670 d917986e5612 ">
                                       <p>指定属性的新值。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
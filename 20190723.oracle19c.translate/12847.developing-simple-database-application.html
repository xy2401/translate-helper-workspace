<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications."></meta>
      <meta name="description" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications."></meta>
      <title>开发简单的Oracle数据库应用程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="2 Day Developer&#39;s Guide "></meta>
      <meta property="og:description" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="2 Day Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="2-day-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T13:00:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94801-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="building-effective-applications.html" title="Previous" type="text/html"></link>
      <link rel="next" href="deploying-database-application.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="2 Day Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="TDDDG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="building-effective-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="deploying-database-application.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2天开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">开发简单的Oracle数据库应用程序</li>
            </ol>
            <a id="GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" name="GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7"></a><a id="TDDDG153"></a>
            
            <h2 id="TDDDG-GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" class="sect2"><span class="enumeration_chapter">9</span>开发简单的Oracle数据库应用程序</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='developing-simple-database-application'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C">关于申请</a><br>该应用程序具有以下目的，结构和命名约定。
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-D8812009-9F2A-4EB4-A973-036EDA23697D">为应用程序创建架构</a><br>使用本节中的过程，为应用程序创建模式。
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1">授予模式权限</a><br>要为模式授予权限，请使用SQL语句<span class="keyword">GRANT</span> 。</li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D">创建架构对象并加载数据</a><br>本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D">创建employees_pkg包</a><br>本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE">创建admin_pkg包</a><br>本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。
                  </li>
               </ul>
            </div>
            <a id="TDDDG154"></a><div class="props_rev_3"><a id="GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" name="GUID-11A0AA43-2038-4511-9A06-DB24958DF60C"></a><h3 id="TDDDG-GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" class="sect3"><span class="enumeration_section">9.1</span>关于应用程序</h3>
               <div>
                  <p>该应用程序具有以下目的，结构和命名约定。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-436CB761-34D0-49DB-8934-26F9CF88F712">申请目的</a><br>该应用程序适用于公司中的两种用户。
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7">申请结构</a><br>该应用程序使用以下架构对象和架构。
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-AA217345-C98E-435B-B3C9-F08D085E0980">应用程序中的命名约定</a><br>该应用程序使用这些命名约定。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG157"></a><div class="props_rev_3"><a id="GUID-436CB761-34D0-49DB-8934-26F9CF88F712" name="GUID-436CB761-34D0-49DB-8934-26F9CF88F712"></a><h4 id="TDDDG-GUID-436CB761-34D0-49DB-8934-26F9CF88F712" class="sect4"><span class="enumeration_section">9.1.1</span>申请目的</h4>
                  <div>
                     <p>该应用程序适用于公司中的两种用户。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>典型用户（员工经理）</p>
                        </li>
                        <li>
                           <p>应用管理员</p>
                        </li>
                     </ul>
                     <p>典型用户可以执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>让特定部门的员工参与进来</p>
                        </li>
                        <li>
                           <p>获取给定员工的工作历史记录</p>
                        </li>
                        <li>
                           <p>显示给定员工的一般信息（姓名，部门，工作，经理，薪水等）</p>
                        </li>
                        <li>
                           <p>更改给定员工的工资</p>
                        </li>
                        <li>
                           <p>改变给定员工的工作</p>
                        </li>
                     </ul>
                     <p>应用程序管理员可以执行以</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>更改现有作业的ID，标题或工资范围</p>
                        </li>
                        <li>
                           <p>添加一份新工作</p>
                        </li>
                        <li>
                           <p>更改现有部门的ID，名称或经理</p>
                        </li>
                        <li>
                           <p>添加一个新部门</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG158"></a><div class="props_rev_3"><a id="GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" name="GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7"></a><h4 id="TDDDG-GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" class="sect4"><span class="enumeration_section">9.1.2</span>应用程序的结构</h4>
                  <div>
                     <p>该应用程序使用以下架构对象和架构。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9">应用程序的模式对象</a><br></li>
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">应用程序的模式</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG161"></a><div class="props_rev_3"><a id="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9" name="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9"></a><h5 id="TDDDG-GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9" class="sect5"><span class="enumeration_section">9.1.2.1</span>应用程序的模式对象</h5>
                     <div>
                        <p>应用程序由以下模式对象组成：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>四个表，用于存储以下数据：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>工作</p>
                                 </li>
                                 <li>
                                    <p>部门</p>
                                 </li>
                                 <li>
                                    <p>雇员</p>
                                 </li>
                                 <li>
                                    <p>员工的工作经历</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>四个版本视图，涵盖表格，使您可以使用基于版本的重新定义（EBR）在使用时升级已完成的应用程序</p>
                           </li>
                           <li>
                              <p>两个触发器，用于执行业务规则</p>
                           </li>
                           <li>
                              <p>两个序列，为新部门和新员工生成唯一主键</p>
                           </li>
                           <li>
                              <p>两个包：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>employees_pkg，典型用户的应用程序接口（API）</p>
                                 </li>
                                 <li>
                                    <p>admin_pkg，应用程序管理员的API</p>
                                 </li>
                              </ul>
                              <p>典型用户和应用程序管理员仅通过其API访问应用程序。因此，他们只能通过调用包子程序来更改数据。</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9__GUID-39DF9CBB-66D3-4B7E-99F2-215A81EB83E5">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关架构对象的信息，请参阅<span class="q">“ <a href="two-day-developer-intro.html#GUID-D6CEA186-A6ED-4E4B-A479-76E0CAFCA0BA" title="Oracle Database将相关信息分组为称为模式的逻辑结构。逻辑结构包含模式对象。">关于Oracle数据库</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关EBR的信息，请参阅“ <a href="../adfns/editions.html#ADFNS020" target="_blank"><span class="italic">Oracle数据库开发指南</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" title="该应用程序使用以下架构对象和架构。">应用程序的结构</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG162"></a><div class="props_rev_3"><a id="GUID-DA4704AD-7557-4455-889E-3E1745B56D81" name="GUID-DA4704AD-7557-4455-889E-3E1745B56D81"></a><h5 id="TDDDG-GUID-DA4704AD-7557-4455-889E-3E1745B56D81" class="sect5"><span class="enumeration_section">9.1.2.2</span>应用程序的模式</h5>
                     <div>
                        <p>为了安全起见，应用程序使用这五个模式（或用户），每个模式<span class="italic">只</span>具有所需的权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>app_data，拥有除包之外的所有模式对象，并使用示例模式HR中的表中的数据加载其表</p>
                              <p>创建包的开发人员永远不会在此模式中工作。因此，它们不会意外地更改或删除应用程序模式对象。</p>
                           </li>
                           <li>
                              <p>app_code，只拥有包employee_pkg</p>
                              <p>employees_pkg的开发人员在此架构中工作。</p>
                           </li>
                           <li>
                              <p>app_admin，只拥有包admin_pkg</p>
                              <p>admin_pkg的开发人员在此架构中工作。</p>
                           </li>
                           <li>
                              <p>app_user，典型的应用程序用户，不拥有任何东西，只能执行employees_pkg</p>
                              <p>中间层应用程序服务器以app_user身份连接到连接池中的数据库。例如，如果这种模式受到SQL注入错误的攻击 - 攻击者只能查看和更改employees_pkg子程序允许它查看和更改的内容。攻击者无法删除表，升级权限，创建或更改架构对象或其他任何内容。</p>
                           </li>
                           <li>
                              <p>app_admin_user，一个应用程序管理员，不拥有任何东西，只能执行admin_pkg和employees_pkg</p>
                              <p>此架构的连接池非常小，只有特权用户才能访问它。如果此架构遭到破坏，攻击者只能查看和更改admin_pkg和employees_pkg子程序允许其查看和更改的内容。</p>
                           </li>
                        </ul>
                        <p>假设应用程序只有一个不拥有任何内容且可以执行employees_pkg和admin_pkg的模式，而不是app_user和app_admin_user。对于典型用户和应用程序管理员，此架构的连接池必须足够大。如果employees_pkg中存在SQL注入错误，则利用该错误的典型用户可以访问admin_pkg。</p>
                        <p>假设应用程序只有一个拥有所有模式对象（包括包）的模式，而不是app_data，app_code和app_admin。然后，包将具有表的所有特权，这将是不必要的和不合需要的。</p>
                        <p>例如，假设您有一个审计跟踪表AUDIT_TRAIL。您希望employees_pkg的开发人员能够写入AUDIT_TRAIL，但不能读取或更改它。您希望admin_pkg的开发人员能够读取AUDIT_TRAIL并写入它，但不能更改它。如果AUDIT_TRAIL，employees_pkg和admin_pkg属于同一模式，则这两个软件包的开发人员拥有AUDIT_TRAIL的所有权限。但是，如果AUDIT_TRAIL属于app_data，employees_pkg属于app_code，admin_pkg属于app_admin，那么您可以作为app_data连接到数据库并执行以下操作：</p><pre class="oac_no_warn" dir="ltr">授权将AUDIT_TRAIL插入app_code; GRANT INSERT，选择AUDIT_TRAIL到app_admin;</pre></div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-DA4704AD-7557-4455-889E-3E1745B56D81__GUID-C71C1BD3-57D6-406A-8EBD-65F56550C15D">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关模式的信息，请参阅<span class="q">“ <a href="two-day-developer-intro.html#GUID-D6CEA186-A6ED-4E4B-A479-76E0CAFCA0BA" title="Oracle Database将相关信息分组为称为模式的逻辑结构。逻辑结构包含模式对象。">关于Oracle数据库</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="two-day-developer-intro.html#GUID-F55D4815-FCD8-4075-AEBC-BC2B57A47F9E" title="HR示例模式可以与Oracle数据库一起安装。此架构包含有关员工 - 部门，位置，工作历史和相关信息的信息。与所有模式一样，HR具有表，视图，索引，过程，函数和其他属性。本文档中的示例和教程使用模式。">关于示例模式HR</a> ”</span> ，了解有关示例模式<code class="codeph">HR</code></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="building-effective-applications.html#GUID-32FBC335-6B08-4B50-B039-06BB9F500908" title="在为组成应用程序的模式对象授予权限时，请使用最小权限原则。">推荐的安全措施</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" title="该应用程序使用以下架构对象和架构。">应用程序的结构</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TDDDG286"></a><div class="props_rev_3"><a id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980" name="GUID-AA217345-C98E-435B-B3C9-F08D085E0980"></a><h4 id="TDDDG-GUID-AA217345-C98E-435B-B3C9-F08D085E0980" class="sect4"><span class="enumeration_section">9.1.3</span>应用程序中的命名约定</h4>
                  <div>
                     <p>该应用程序使用这些命名约定。</p>
                     <div class="tblformal" id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__GUID-8CE6D53D-040D-4C9C-A848-4881C8CAB52D">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Left column lists the items for which the application has naming conventions. Right column describes those conventions." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="52%" id="d40654e657">项目</th>
                                 <th align="left" valign="bottom" width="48%" id="d40654e660">名称</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e665" headers="d40654e657 ">
                                    <p>表</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e665 d40654e660 ">
                                    <p><span class="italic">表</span> ＃</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e674" headers="d40654e657 ">
                                    <p><span class="italic">表的</span>编辑视图＃</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e674 d40654e660 ">
                                    <p><span class="italic">表</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e685" headers="d40654e657 ">
                                    <p>在版本视图<span class="italic">表</span>上触发</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e685 d40654e660 ">
                                    <p><span class="italic">table</span> _ {a | b} <span class="italic">event</span> [_fer]其中：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>a标识AFTER触发器。</p>
                                       </li>
                                       <li>
                                          <p>b标识BEFORE触发器。</p>
                                       </li>
                                       <li>
                                          <p>fer识别FOR EACH ROW触发器。</p>
                                       </li>
                                       <li>
                                          <p><span class="italic">event</span>标识触发触发器的事件。例如：i表示INSERT，i表示INSERT或UPDATE，d表示DELETE。</p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e714" headers="d40654e657 ">
                                    <p><span class="italic">表</span> ＃中的PRIMARY KEY约束</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e714 d40654e660 ">
                                    <p><span class="italic">table</span> _pk</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e726" headers="d40654e657 ">
                                    <p><span class="italic">表</span> ＃上的NOT NULL约束。 <span class="italic">柱</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e726 d40654e660 ">
                                    <p><span class="italic">table_column</span> _not_null <a id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" name="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" href="#GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" table,="" table1,="" and="" table2="" are="" abbreviated="" to="" emp="" for="" employees,="" dept="" departments,="" job_hist="" job_history=")" ="" onclick="footdisplay(1, "><sup>脚1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e751" headers="d40654e657 ">
                                    <p>对<span class="italic">表</span> ＃的UNIQUE约束。 <span class="italic">柱</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e751 d40654e660 ">
                                    <p><span class="italic">table_column</span> _unique <a id="fnsrc_d40654e764" name="fnsrc_d40654e764" href="#fnsrc_d40654e764" table,="" table1,="" and="" table2="" are="" abbreviated="" to="" emp="" for="" employees,="" dept="" departments,="" job_hist="" job_history=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e767" headers="d40654e657 ">
                                    <p>检查<span class="italic">表</span> ＃的约束。 <span class="italic">柱</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e767 d40654e660 ">
                                    <p><span class="italic">table_column</span> _check <a id="fnsrc_d40654e780" name="fnsrc_d40654e780" href="#fnsrc_d40654e780" table,="" table1,="" and="" table2="" are="" abbreviated="" to="" emp="" for="" employees,="" dept="" departments,="" job_hist="" job_history=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e783" headers="d40654e657 ">
                                    <p>对<span class="italic">table1</span> ＃的REF约束。 <span class="italic">列</span>到<span class="italic">表2</span> ＃。 <span class="italic">柱</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e783 d40654e660 ">
                                    <p><span class="italic">table1</span> <code class="codeph">_to_</code> <span class="italic">table2</span> _fk <a id="fnsrc_d40654e806" name="fnsrc_d40654e806" href="#fnsrc_d40654e806" table,="" table1,="" and="" table2="" are="" abbreviated="" to="" emp="" for="" employees,="" dept="" departments,="" job_hist="" job_history=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e809" headers="d40654e657 ">
                                    <p>对<span class="italic">table1</span> ＃的REF约束。 <span class="italic">column1</span>到<span class="italic">table2</span> ＃。 <span class="italic">COLUMN2</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e809 d40654e660 ">
                                    <p><span class="italic">table1_col1</span> _to_ <span class="italic">table2_col2</span> _fk <a id="fnsrc_d40654e831" name="fnsrc_d40654e831" href="#fnsrc_d40654e831" table,="" table1,="" and="" table2="" are="" abbreviated="" to="" emp="" for="" employees,="" dept="" departments,="" job_hist="" job_history=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a> <a id="fn_2" name="fn_2" href="#fn_2" col1="" and="" col2="" are="" abbreviations="" of="" column="" names="" column1="" column2.="" a="" constraint="" cannot="" have="" more="" than="" 30="" characters=")" ="" onclick="footdisplay(2, "><sup>Foot 2</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e849" headers="d40654e657 ">
                                    <p><span class="italic">表</span> ＃的顺序</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e849 d40654e660 ">
                                    <p><span class="italic">table_sequence</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e860" headers="d40654e657 ">
                                    <p>参数名称</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e860 d40654e660 ">
                                    <p>p_ <span class="italic">name</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e870" headers="d40654e657 ">
                                    <p>局部变量名称</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e870 d40654e660 ">
                                    <p>l_ <span class="italic">名字</span></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p><span class="italic">table</span> ， <span class="italic">table1</span>和<span class="italic">table2</span>缩写为emp表示员工，部门表示部门，job_hist表示job_history。
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注2</sup></p><p><span class="italic">col1</span>和<span class="italic">col2</span>是列名<span class="italic">column1</span>和<span class="italic">column2的</span>缩写。约束名称不能超过30个字符。
                        </p>
                     <p></p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG164"></a><a id="TDDDG155"></a><div class="props_rev_3"><a id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" name="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D"></a><h3 id="TDDDG-GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" class="sect3"><span class="enumeration_section">9.2</span>为应用程序创建模式</h3>
               <div>
                  <p>使用本节中的过程，为应用程序创建模式。</p>
                  <div class="section">
                     <p>模式名称是：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>应用程序数据</p>
                        </li>
                        <li>
                           <p>的app_code</p>
                        </li>
                        <li>
                           <p>app_admin</p>
                        </li>
                        <li>
                           <p>APP_USER</p>
                        </li>
                        <li>
                           <p>app_admin_user</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-4BCC71E9-1DAD-4085-A110-F39B0976727B">
                        <p class="notep1">注意：</p>
                        <p>对于以下过程，您需要具有<span class="keyword">CREATE USER</span>和<span class="keyword">DROP USER</span>系统特权的用户的名称和密码。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-BF340FDB-259A-407B-ADF0-A401A02FB205">要创建架构（或用户） <span class="italic">schema_name</span> ：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>使用SQL * Plus，以具有<span class="keyword">CREATE USER</span>和<span class="keyword">DROP USER</span>系统特权的用户身份连接到Oracle数据库。</span><div>
                           <p>出现<samp class="sysout">SQL&gt;</samp>提示符。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>如果模式存在，请使用此SQL语句删除模式及其对象：</span><div><pre class="oac_no_warn" dir="ltr">DROP USER <span class="italic">schema_name</span> CASCADE;</pre><p>如果存在架构，则系统响应：</p><pre class="oac_no_warn" dir="ltr">用户掉线了
</pre><p>如果架构不存在，系统会响应：</p><pre class="oac_no_warn" dir="ltr">第1行的DROP USER <span class="italic">schema_name</span> CASCADE * ERROR：ORA-01918：用户' <span class="italic">schema_name</span> '不存在</pre></div>
                     </li>
                     <li class="stepexpand"><span>如果<span class="italic"><code class="codeph">schema_name</code></span>是<code class="codeph">app_data</code> ， <code class="codeph">app_code</code>或<code class="codeph">app_admin</code> ，则使用此SQL语句创建架构：</span><div><pre class="oac_no_warn" dir="ltr">CREATE USER <span class="italic">schema_name</span> IDENTIFIED BY <span class="italic">密码</span> DEFAULT TABLESPACE USERS QUOTA无限用户使用版本;</pre><p>否则，使用此SQL语句创建架构：</p><pre class="oac_no_warn" dir="ltr">CREATE USER <span class="italic">schema_name</span> IDENTIFIED BY <span class="italic">password</span> ENABLE EDITIONS;</pre><div class="infoboxnote" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-B7C28A86-140E-49F3-85C0-2D4EA8FC1E98">
                              <p class="notep1">警告：</p>
                              <p>选择安全密码。有关安全密码的准则，请参见“ <a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span class="italic">Oracle数据库安全指南”</span></a> 。
                              </p>
                           </div>
                           <p>系统响应：</p><pre class="oac_no_warn" dir="ltr">用户创建。
</pre></div>
                     </li>
                     <li class="stepexpand"><span>（可选）在SQL Developer中，使用<span class="q">“ <a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer是一个客户端程序，您可以使用它来访问Oracle数据库。">从SQL Developer连接到Oracle数据库</a> ”中</span>的指示信息为模式创建连接。</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-03CA2CB8-0A21-4DFE-8307-4FB0DCCB564C">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus连接到Oracle数据库</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">DROP</code> <code class="codeph">USER</code>语句的信息，请<a href="../sqlrf/DROP-USER.html#SQLRF01811" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">CREATE</code> <code class="codeph">USER</code>语句的信息，请<a href="../sqlrf/CREATE-USER.html#SQLRF01503" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TDDDG165"></a><div class="props_rev_3"><a id="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" name="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1"></a><h3 id="TDDDG-GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" class="sect3"><span class="enumeration_section">9.3</span>授予模式权限</h3>
               <div>
                  <p>要为模式授予权限，请使用SQL语句<span class="keyword">GRANT</span> 。</p>
                  <div class="section">
                     <p>您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">GRANT</span>语句。为了安全起见， <span class="italic">只</span>为每个模式授予它所需的权限。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8">授予app_data架构权限</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC">授予app_code架构权限</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67">授予app_admin架构权限</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788">授予app_user和app_admin_user架构权限</a><br></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1__GUID-8D933627-9BCD-488D-8ACB-BFE4783C9363">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关<span class="keyword">GRANT</span>语句的信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG167"></a><div class="props_rev_3"><a id="GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8" name="GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8"></a><h4 id="TDDDG-GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8" class="sect4"><span class="enumeration_section">9.3.1</span>向app_data架构授予权限</h4>
                  <div>
                     <div class="section">
                        <p><span class="italic">仅</span>向app_data架构授予执行以下操作的权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到Oracle数据库：</p><pre class="oac_no_warn" dir="ltr">授予创建会话到app_data;</pre></li>
                           <li>
                              <p>为应用程序创建表，视图，触发器和序列：</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE TABLE，创建视图，创建触发器，为app_data创建序列;</pre></li>
                           <li>
                              <p>将示例模式HR中的四个表中的数据加载到其自己的表中：</p><pre class="oac_no_warn" dir="ltr">在<span class="bold">HR.DEPARTMENTS上</span>选择<span class="bold">给</span> app_data;在<span class="bold">HR.EMPLOYEES上</span>选择给app_data;在<span class="bold">HR.JOB_HISTORY上</span>选择GRANT选择app_data;在<span class="bold">HR.JOBS上</span>选择<span class="bold">给</span> app_data;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="要为模式授予权限，请使用SQL语句GRANT。">向模式授予权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG170"></a><div class="props_rev_3"><a id="GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC" name="GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC"></a><h4 id="TDDDG-GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC" class="sect4"><span class="enumeration_section">9.3.2</span>授予app_code Schema权限</h4>
                  <div>
                     <div class="section">
                        <p><span class="italic">仅</span>向app_code模式授予执行以下操作的权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到Oracle数据库：</p><pre class="oac_no_warn" dir="ltr">授予创建会话app_code;</pre></li>
                           <li>
                              <p>创建包employees_pkg：</p><pre class="oac_no_warn" dir="ltr">授予app_code创建程序;</pre></li>
                           <li>
                              <p>创建同义词（为方便起见）：</p><pre class="oac_no_warn" dir="ltr">授予创建SYNONYM app_code;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="要为模式授予权限，请使用SQL语句GRANT。">向模式授予权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG171"></a><div class="props_rev_3"><a id="GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67" name="GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67"></a><h4 id="TDDDG-GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67" class="sect4"><span class="enumeration_section">9.3.3</span>授予app_admin架构权限</h4>
                  <div>
                     <div class="section">
                        <p><span class="italic">仅</span>向app_admin架构授予执行以下操作的权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到Oracle数据库：</p><pre class="oac_no_warn" dir="ltr">授予创建会话到app_admin;</pre></li>
                           <li>
                              <p>创建包admin_pkg：</p><pre class="oac_no_warn" dir="ltr">给予app_admin GRANT CREATE PROCEDURE;</pre></li>
                           <li>
                              <p>创建同义词（为方便起见）：</p><pre class="oac_no_warn" dir="ltr">GRANT创建SYNONYM到app_admin;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="要为模式授予权限，请使用SQL语句GRANT。">向模式授予权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG243"></a><div class="props_rev_3"><a id="GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788" name="GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788"></a><h4 id="TDDDG-GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788" class="sect4"><span class="enumeration_section">9.3.4</span>向app_user和app_admin_user模式授予权限</h4>
                  <div>
                     <div class="section">
                        <p><span class="italic">仅</span>向app_user和app_admin_user模式授予执行以下操作的权限：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到Oracle数据库：</p><pre class="oac_no_warn" dir="ltr">授予app_user创建会话;授予创建会话到app_admin_user;</pre></li>
                           <li>
                              <p>创建同义词（为方便起见）：</p><pre class="oac_no_warn" dir="ltr">GRANT创建SYNONYM到app_user;授予创建SYNONYM到app_admin_user;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="要为模式授予权限，请使用SQL语句GRANT。">向模式授予权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG284"></a><a id="TDDDG283"></a><div class="props_rev_3"><a id="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" name="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D"></a><h3 id="TDDDG-GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" class="sect3"><span class="enumeration_section">9.4</span>创建模式对象并加载数据</h3>
               <div>
                  <p>本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D__GUID-FB250A64-9086-428A-83F9-95CEEABA16D1">要创建架构对象并加载数据：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>以用户app_data身份连接到Oracle数据库。</span><div>
                           <p>有关说明，请参阅<span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus</a></span> <span class="q"><a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">连接到Oracle数据库</a></span> <span class="q">”</span>或<span class="q">“ <a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer是一个客户端程序，您可以使用它来访问Oracle数据库。">从SQL Developer连接到Oracle数据库</a> ”</span> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>使用除加载数据后必须添加的外键约束之外的所有必要约束创建表。</span></li>
                     <li class="stepexpand"><span>创建编辑视图。</span></li>
                     <li class="stepexpand"><span>创建触发器。</span></li>
                     <li class="stepexpand"><span>创建序列。</span></li>
                     <li class="stepexpand"><span>将数据加载到表中。</span></li>
                     <li class="stepexpand"><span>添加外键约束。</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF">创建表</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-768FDDA1-1A22-4DEE-9890-450FA676A049">创建编辑视图</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">创建触发器</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396">创建序列</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24">加载数据</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90">添加外键约束</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-4A22470D-2C45-44A9-940F-E39771CCCE76">向用户授予模式对象的权限</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG287"></a><a id="TDDDG285"></a><div class="props_rev_3"><a id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF" name="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF"></a><h4 id="TDDDG-GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF" class="sect4"><span class="enumeration_section">9.4.1</span>创建表</h4>
                  <div>
                     <div class="section">
                        <p>本节介绍如何为应用程序创建表，除了一个必需的约束，您必须在加载数据后添加这些约束。</p>
                        <div class="infoboxnote" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-66E96FBE-3079-48EF-8551-40BE6FBE87EA">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户<code class="codeph">app_data</code>身份连接到Oracle数据库。
                           </p>
                        </div>
                        <p>在以下过程中，您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Table创建表。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-D197EBA9-507A-4F23-98B2-6E620B2B7B7C">要创建表：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建作业＃，它存储有关公司中作业的信息（每个作业占一行）：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE jobs＃（job_id VARCHAR2（10）CONSTRAINT jobs_pk PRIMARY KEY，job_title VARCHAR2（35）CONSTRAINT jobs_job_title_not_null NOT NULL，min_salary NUMBER（6）CONSTRAINT jobs_min_salary_not_null NOT NULL，max_salary NUMBER（6）CONSTRAINT jobs_max_salary_not_null NOT NULL）/</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建部门＃，其中存储有关公司部门的信息（每个部门一行）：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE部门＃（department_id NUMBER（4）CONSTRAINT departments_pk PRIMARY KEY，department_name VARCHAR2（30）CONSTRAINT department_name_not_null NOT NULL CONSTRAINT department_name_unique UNIQUE，manager_id NUMBER（6））/</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建员工＃，其中存储有关公司员工的信息（每个员工一行）：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE employees＃（employee_id NUMBER（6）CONSTRAINT employees_pk PRIMARY KEY，first_name VARCHAR2（20）CONSTRAINT emp_first_name_not_null NOT NULL，last_name VARCHAR2（25）CONSTRAINT emp_last_name_not_null NOT NULL，email_addr VARCHAR2（25）CONSTRAINT emp_email_addr_not_null NOT NULL，hire_date DATE DEFAULT TRUNC（ SYSDATE）CONSTRAINT emp_hire_date_not_null NOT NULL CONSTRAINT emp_hire_date_check CHECK（TRUNC（hire_date）= hire_date），country_code VARCHAR2（5）CONSTRAINT emp_country_code_not_null NOT NULL，phone_number VARCHAR2（20）CONSTRAINT emp_phone_number_not_null NOT NULL， <span class="bold">job_id</span> CONSTRAINT emp_job_id_not_null NOT NULL CONSTRAINT emp_jobs_fk <span class="bold">REFERENCES jobs＃</span> ，job_start_date DATE CONSTRAINT emp_job_start_date_not_null NOT NULL，CONSTRAINT emp_job_start_date_check CHECK（TRUNC（JOB_START_DATE）= job_start_date），工资NUMBER（6）CONSTRAINT emp_salary_not_null NOT NULL， <span class="bold">manager_id</span> CONSTRAINT emp_mgr_to_empno_fk <span class="bold">REFERENCES employees＃</span> ， <span class="bold">department_id</span> CONSTRAINT emp_to_dept_fk <span class="bold">参考部门＃</span> ）/</pre><p>REF约束的原因是：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>员工必须拥有现有工作。也就是说，列雇员＃.job_id中的值也必须是列作业＃.job_id中的值。</p>
                                 </li>
                                 <li>
                                    <p>员工必须有一名也是员工的经理。也就是说，列员工＃.manager_id中的值也必须是列员工＃.employee_id中的值。</p>
                                 </li>
                                 <li>
                                    <p>员工必须在现有部门工作。也就是说，列雇员＃.department_id中的值也必须是列部门＃.department_id中的值。</p>
                                 </li>
                              </ul>
                              <p>此外，员工的经理必须是员工所在部门的经理。也就是说，列#surager_id列中的值也必须是列部门＃.manager_id中的值。但是，在创建部门＃时，您无法指定必要的约束，因为员工＃尚不存在。因此，您必须稍后向部门＃添加外键约束（请参阅<span class="q">“ <a href="developing-simple-database-application.html#GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90">添加外键约束</a> ”</span> ）。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建job_history＃，它存储公司中每个员工的工作历史记录（员工持有的每个工作一行）：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE JOB_HISTORY＃（EMPLOYEE_ID约束job_hist_to_employees_fk <span class="bold">参考员工＃，JOB_ID</span>约束job_hist_to_jobs_fk <span class="bold">参考职位＃，</span>起始日期工期约束job_hist_start_date_not_null NOT NULL日期，结束日期工期约束job_hist_end_date_not_null NOT NULL，部门标识约束job_hist_to_departments_fk <span class="bold">参考部门＃</span>约束job_hist_dept_id_not_null NOT NULL，约束job_history_pk PRIMARY KEY（EMPLOYEE_ID ，start_date），CONSTRAINT job_history_date_check CHECK（start_date &lt;end_date））/</pre><p>REF约束的原因是员工，工作和部门必须存在。那是：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>job_history＃.employee_id列中的值也必须是employee＃.employee_id列中的值。</p>
                                 </li>
                                 <li>
                                    <p>job_history＃.job_id列中的值也必须是列作业＃.job_id中的值。</p>
                                 </li>
                                 <li>
                                    <p>job_history＃.department_id列中的值也必须是列部门＃.department_id中的值。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-1E98C0F2-6F8A-443D-912F-1AB09ADE3782">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-87AA2B05-2B7B-49D9-AD21-1B2877113D23" title="要创建表，请使用SQL Developer工具Create Table或DDL语句CREATE TABLE。">创建表</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG288"></a><div class="props_rev_3"><a id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049" name="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049"></a><h4 id="TDDDG-GUID-768FDDA1-1A22-4DEE-9890-450FA676A049" class="sect4"><span class="enumeration_section">9.4.2</span>创建编辑视图</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-27894E6F-A616-45DA-A5A2-E74FC3875B1E">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>要创建编辑视图，请使用以下语句（按任意顺序）。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具“创建视图”创建编辑视图。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换版本查看作业选择*来自作业＃/创建或替换版本视图部门AS SELECT * FROM departments＃/ CREATE OR REPLACE EDITIONING VIEW employees AS SELECT * FROM employees＃/ CREATE OR REPLACE EDITIONING VIEW job_history AS SELECT * FROM job_history ＃/</pre><div class="infoboxnote" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-07C078BC-D782-4DBE-BB81-8B161E9E5452">
                           <p class="notep1">注意：</p>
                           <p>应用程序必须始终通过编辑视图引用基表。否则，编辑视图不会覆盖表格，并且您无法在使用时使用EBR升级已完成的应用程序。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-C798D39A-5B8B-4054-8B01-920F362AFBCD">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-31755C84-1EE1-41FF-9EC8-FD8CDE2D5BC1" title="要创建视图，请使用SQL Developer工具Create View或DDL语句CREATE VIEW。">创建视图</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关版本视图的一般信息，请参见<a href="../adfns/editions.html#ADFNS0202" target="_blank"><span class="italic">“Oracle数据库开发指南</span></a></p>
                           </li>
                           <li>
                              <p>有关准备应用程序以使用编辑视图的信息，请参见<a href="../adfns/editions.html#ADFNS99917" target="_blank"><span class="italic">“Oracle数据库开发指南</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG289"></a><div class="props_rev_3"><a id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E" name="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E"></a><h4 id="TDDDG-GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E" class="sect4"><span class="enumeration_section">9.4.3</span>创建触发器</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E__GUID-03DA2D70-A4E5-4FC6-AA9A-BEFFB3AB63E9">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>应用程序中的触发器会强制执行以下业务规则：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>与工作<span class="italic">j</span>的职员必须有最低和最高工资工作<span class="italic">j</span>之间的薪水。
                              </p>
                           </li>
                           <li>
                              <p>如果具有工作<span class="italic">j</span>的员工具有工资<span class="italic">s</span> ，则您不能将<span class="italic">j</span>的最低工资更改为大于<span class="italic">s</span>的值或将<span class="italic">j</span>的最大工资更改为小于<span class="italic">s</span>的值。（这样做会使现有数据无效。）
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E">创建触发器以实施第一个业务规则</a><br>第一个业务规则是：以工作<span class="italic">j</span>的职员必须具备的最低和最高工资工作<span class="italic">j</span>之间的薪水。
                        </li>
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-9A964406-B333-4064-9171-A9CA69B71E75">创建触发器以实施第二个业务规则</a><br>第二个业务规则是：如果具有工作<span class="italic">j</span>的员工具有工资<span class="italic">s</span> ，则您不能将<span class="italic">j</span>的最低工资更改为大于<span class="italic">s</span>的值或将<span class="italic">j</span>的最大工资更改为小于<span class="italic">s</span>的值。（这样做会使现有数据无效。）
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E__GUID-51C8BB99-7CBC-48E3-9129-3756F2355875">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="using-triggers.html#GUID-3744214A-861D-4C59-AD2D-95840B5B0871" title="触发器存储自动执行的PL / SQL单元（" fir=")=" ="">使用触发器</a> ，获取有关触发器的信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG290"></a><div class="props_rev_3"><a id="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" name="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E"></a><h5 id="TDDDG-GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" class="sect5"><span class="enumeration_section">9.4.3.1</span>创建触发器以实施第一个业务规则</h5>
                     <div>
                        <p>第一个业务规则是：以工作<span class="italic">j</span>的职员必须具备的最低和最高工资工作<span class="italic">j</span>之间的薪水。
                        </p>
                        <div class="section">
                           <p>将新行插入employees表或更新employees表的salary或job_id列时，可能会违反此规则。</p>
                           <p>要强制执行规则，请在版本控制视图员工上创建以下触发器。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">CREATE TRIGGER</span>语句。或者，您可以使用SQL Developer工具Create Trigger创建触发器。
                           </p><pre class="oac_no_warn" dir="ltr">创建或更换TRIGGER employees_aiufer插入或更新工资后，job_id ON员工每次行拒绝l_cnt NUMBER; <span class="bold">分享模式中的</span> BEGIN <span class="bold">LOCK TABLE工作;</span> - 确保作业不会更改 - 在以下查询期间。SELECT COUNT（*）INTO l_cnt FROM jobs WHERE job_id =：NEW.job_id AND：NEW.salary BETWEEN min_salary AND max_salary; IF（l_cnt &lt;&gt; 1）THEN RAISE_APPLICATION_ERROR（-20002，CASE WHEN：new.job_id =：old.job_id那么'工资修改无效'ELSE'工作重新分配使工资超出范围'END）;万一;结束; /</pre><p><code class="codeph">LOCK TABLE jobs IN SHARE MODE</code>可防止其他用户在触发器查询时更改表作业。在查询期间阻止对作业的更改是必要的，因为非阻塞读取会阻止触发器“看到”其他用户在触发器更改员工时对作业所做的更改（并防止这些用户“看到”触发器对员工所做的更改） 。
                           </p>
                           <p>在查询期间防止更改作业的另一种方法是在<span class="keyword">SELECT</span>语句中包含<span class="keyword">FOR UPDATE</span>子句。但是， <span class="keyword">SELECT FOR UPDATE</span>比<span class="keyword">SHARE MODE</span>中的<span class="keyword">LOCK TABLE作业</span>更多地限制并发。
                           </p>
                           <p><code class="codeph">LOCK TABLE jobs IN SHARE MODE</code>可防止其他用户更改作业，但不会阻止其他用户更改共享模式中的作业。对工作的改变可能比对员工的改变更为罕见。因此，在共享模式下锁定作业比在独占模式下锁定单行作业提供更多的并发性。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E__GUID-904717E7-1148-49F5-91B4-C4CF7DB78089">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<span class="keyword">在SHARE MODE中</span>锁定表的信息，请参见<a href="../adfns/sql-processing-for-application-developers.html#ADFNS99941" target="_blank"><span class="italic">“Oracle数据库开发指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关<span class="keyword">SELECT FOR UPDATE的</span>信息，请<a href="../lnpls/static-sql.html#LNPLS603" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="要创建触发器，请使用SQL Developer图形界面或DDL语句CREATE TRIGGER。">创建触发器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" title="使用SQL * Plus，本教程将介绍employees_pkg包的子程序如何工作。本教程还显示了触发器employees_aiufer和CHECK约束job_history_date_check的工作原理。">教程：显示employees_pkg子程序如何工作</a> ”</span>以查看employees_aiufer触发器的工作方式</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">创建触发器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG291"></a><div class="props_rev_3"><a id="GUID-9A964406-B333-4064-9171-A9CA69B71E75" name="GUID-9A964406-B333-4064-9171-A9CA69B71E75"></a><h5 id="TDDDG-GUID-9A964406-B333-4064-9171-A9CA69B71E75" class="sect5"><span class="enumeration_section">9.4.3.2</span>创建触发器以实施第二个业务规则</h5>
                     <div>
                        <p>第二个业务规则是：如果具有工作<span class="italic">j</span>的员工具有工资<span class="italic">s</span> ，则您不能将<span class="italic">j</span>的最低工资更改为大于<span class="italic">s</span>的值或将<span class="italic">j</span>的最大工资更改为小于<span class="italic">s</span>的值。（这样做会使现有数据无效。）
                        </p>
                        <div class="section">
                           <p>更新作业表的min_salary或max_salary列时，可能会违反此规则。</p>
                           <p>要强制执行规则，请在编辑视图作业上创建以下触发器。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">CREATE TRIGGER</span>语句。或者，您可以使用SQL Developer工具Create Trigger创建触发器。
                           </p><pre class="oac_no_warn" dir="ltr">创建或替换TRIGGER jobs_aufer更新min_salary，max_salary ON每个行的作业（NEW.min_salary&gt; OLD.min_salary或NEW.max_salary &lt;OLD.max_salary）DECLARE l_cnt NUMBER; BEGIN <span class="bold">LOCK TABLE员工分享模式;</span> SELECT COUNT（*）INTO l_cnt FROM employees WHERE job_id =：NEW.job_id AND salary NOT BETWEEN：NEW.min_salary and：NEW.max_salary; IF（l_cnt&gt; 0）THEN RAISE_APPLICATION_ERROR（-20001，'薪资更新会违反'|| l_cnt ||'现有员工记录'）;万一;结束; /</pre><p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code>阻止其他用户在触发器查询时更改表员工。在查询期间阻止对员工进行更改是必要的，因为非阻塞读取会阻止触发器“看到”其他用户在触发器更改作业时对员工所做的更改（并防止这些用户“看到”触发器对作业所做的更改） 。
                           </p>
                           <p>对于此触发器， <span class="keyword">SELECT FOR UPDATE</span> <span class="keyword">不能替代LOCK TABLE IN SHARE MODE</span> 。当您尝试更改此作业的工资范围时，此触发器必须阻止其他用户将工资更改为超出新范围。因此，触发器必须锁定employees表中具有此job_id的所有行， <span class="italic">并</span>锁定有人可以更新的所有行以具有此job_id。
                           </p>
                           <p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code>一种替代方法是使用DBMS_LOCK包创建具有job_id名称的命名锁，然后在employees和jobs表上使用触发器来使用此命名锁来防止并发更新。但是，使用DBMS_LOCK和多个触发器会对运行时性能产生负面影响。
                           </p>
                           <p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code>另一种替代方法是在employees表上创建一个触发器，对于每个已更改的员工行，该触发器会锁定作业中的相应作业行。但是，这种方法会导致对employees表的更新工作过多，这种情况经常发生。
                           </p>
                           <p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code>中比前面的备选方案更简单，并且对应用程序表的更改很少，并且可能在应用程序维护时发生，此时锁定表不会给用户带来不便。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9A964406-B333-4064-9171-A9CA69B71E75__GUID-DCBE8BE8-47EF-4A39-9B68-55767FBB19E0">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关使用<code class="codeph">SHARE</code> <code class="codeph">MODE</code>锁定表的信息，请<code class="codeph">SHARE</code> <a href="../adfns/sql-processing-for-application-developers.html#ADFNS99941" target="_blank"><span class="italic">“Oracle数据库开发指南</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_LOCK</code>包的信息，请<code class="codeph">DBMS_LOCK</code> <a href="../arpls/DBMS_LOCK.html#ARPLS021" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="要创建触发器，请使用SQL Developer图形界面或DDL语句CREATE TRIGGER。">创建触发器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" title="使用SQL * Plus，本教程将介绍admin_pkg包的子程序如何工作。该教程还显示了jobs_aufer触发器的工作原理。">教程：显示admin_pkg子程序的工作原理</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">创建触发器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TDDDG295"></a><div class="props_rev_3"><a id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396" name="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396"></a><h4 id="TDDDG-GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396" class="sect4"><span class="enumeration_section">9.4.4</span>创建序列</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396__GUID-8BE30CBA-E591-49C1-9DAF-4411EE43DC9C">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>要创建为新部门和新员工生成唯一主键的序列，请使用以下语句（按任意顺序）。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Sequence创建序列。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE SEQUENCE employees_sequence START WITH 210;创建SEQUENCE departments_sequence START WITH 275;</pre><p>为避免与将从示例模式HR中的表加载的数据冲突，employees_sequence和departments_sequence的起始编号必须分别超过employees.employee_id和departments.department_id的最大值。在<span class="q">“ <a href="developing-simple-database-application.html#GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24">加载数据</a> ”之后</span> ，此查询显示以下最大值：</p><pre class="oac_no_warn" dir="ltr">SELECT MAX（e.employee_id），MAX（d.department_id）FROM员工e，部门d;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">MAX（E.EMPLOYEE_ID）MAX（D.DEPARTMENT_ID）------------------ -------------------- 206 270</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396__GUID-948461FC-8EB0-429B-A716-EB8D90FE8201">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-474CBF2A-BDBF-498E-98DA-16B59E4D8050" title="序列是模式对象，您可以从中生成唯一的顺序值，这在您需要唯一主键时非常有用。序列通过伪列CURRVAL和NEXTVAL使用，它们分别返回序列的当前值和下一个值。">创建和管理序列</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG293"></a><a id="TDDDG292"></a><div class="props_rev_3"><a id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24" name="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24"></a><h4 id="TDDDG-GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24" class="sect4"><span class="enumeration_section">9.4.5</span>加载数据</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-DF76FD7E-5E87-4500-B80F-E156EE5F5820">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>使用示例模式HR中的表中的数据加载应用程序的表。</p>
                        <div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-7FAE29A2-9876-40E6-A724-22BD820DD3EF">
                           <p class="notep1">注意：</p>
                           <p>以下过程通过其编辑视图引用应用程序的表。</p>
                        </div>
                        <p>在以下过程中，您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-8FAD1AC2-B181-4AB5-9E30-48523B18CC7B">要将数据加载到表中：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用表HR.JOBS中的数据加载作业：</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO作业（job_id，job_title，min_salary，max_salary）SELECT job_id，job_title，min_salary，max_salary FROM HR.JOBS /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">创建了19行。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用表HR.DEPARTMENTS中的数据加载部门：</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO部门（department_id，department_name，manager_id）SELECT department_id，department_name，manager_id FROM HR.DEPARTMENTS /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">创建了27行。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用表HR.EMPLOYEES和HR.JOB_HISTORY中的数据加载员工，使用搜索的<span class="keyword">CASE</span>表达式和SQL函数从HR.phone_number和SQL函数获取employees.country_code和employees.phone_number以及从HR获取employees.job_start_date的标量子查询。 JOB_HISTORY：</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO员工（employee_id，first_name，last_name，email_addr，hire_date，country_code，phone_number，job_id，job_start_date，salary，manager_id，department_id）SELECT employee_id，first_name，last_name，email，hire_date，CASE WHEN phone_number LIKE'011。％'THEN'+'|| SUBSTR（phone_number，INSTR（phone_number，'。'）+ 1，INSTR（phone_number，'。'，1,2） -  INSTR（phone_number，'。'） -  1）ELSE' + 1'结束country_code，例如，当phone_number LIKE'011。％'那么SUBSTR（phone_number，INSTR（phone_number，'）。'，1,2）+1）ELSE phone_number END phone_number，job_id，NVL（（SELECT MAX（end_date + 1）FROM HR.JOB_HISTORY jh WHERE jh.employee_id = employees.employee_id），hire_date），salary，manager_id，department_id FROM HR.EMPLOYEES /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">创建了107行。</pre><div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-CFA34815-11D3-474B-8443-9D8CB5172243">
                                 <p class="notep1">注意：</p>
                                 <p>前面的<code class="codeph">INSERT</code>语句触发在<span class="q">“ <a href="developing-simple-database-application.html#GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" title="The first business rule is: An employee with job j must have a salary between the minimum and maximum salaries for job j.">创建触发器以强制执行第一个业务规则</a> ”中<a href="developing-simple-database-application.html#GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" title="第一个业务规则是：具有工作j的员工必须具有工作j的最低工资和最高工资之间的工资。">创建的触发器</a></span> 。
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用表HR.JOB_HISTORY中的数据加载job_history：</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO job_history（employee_id，job_id，start_date，end_date，department_id）SELECT employee_id，job_id，start_date，end_date，department_id FROM HR.JOB_HISTORY /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">创建了10行。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>提交更改：</span><div><pre class="oac_no_warn" dir="ltr">承诺;</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-ED1393DA-5B2B-4FE3-B6C3-BB2B28758BDB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="dml-and-transactions.html#GUID-E49519F6-5B93-43D9-852B-C6EB3DA8F1E1" title="INSERT语句将行插入现有表中。">关于INSERT声明</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="two-day-developer-intro.html#GUID-F55D4815-FCD8-4075-AEBC-BC2B57A47F9E" title="HR示例模式可以与Oracle数据库一起安装。此架构包含有关员工 - 部门，位置，工作历史和相关信息的信息。与所有模式一样，HR具有表，视图，索引，过程，函数和其他属性。本文档中的示例和教程使用模式。">关于样本模式HR</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="connecting-exploring-database.html#GUID-B7BACC62-95F0-42D9-BA26-882FE5268A0F" title="CASE表达式允许您使用IF ...然后 ...SQL语句中的ELSE逻辑，无需调用子程序。有两种CASE表达式，简单和搜索。">在查询中使用CASE表达式</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="connecting-exploring-database.html#GUID-703425FD-82B2-400F-AA87-C48604CE89FF" title="与NULL相关的函数有助于处理NULL值。">在查询中使用NULL相关函数</a> ”</span>以获取有关<code class="codeph">NVL</code>函数的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">SQL</code>函数的信息，请<a href="../sqlrf/Functions.html#SQLRF006" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG294"></a><div class="props_rev_3"><a id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90" name="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90"></a><h4 id="TDDDG-GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90" class="sect4"><span class="enumeration_section">9.4.6</span>添加外键约束</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90__GUID-6F6428F6-E766-4207-9294-2CA59329329D">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>既然表部门和员工包含数据，请使用以下<span class="keyword">ALTER TABLE</span>语句添加外键约束。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具添加外键添加约束。
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE部门#ADD CONSTRAINT dept_to_emp_fk FOREIGN KEY（manager_id）REFERENCES employees＃;</pre><p>如果在部门＃和employees＃包含数据之前添加此外键约束，则在尝试使用数据加载其中任何一个时会出现此错误：</p><pre class="oac_no_warn" dir="ltr">ORA-02291：违反了完整性约束（APP_DATA.JOB_HIST_TO_DEPT_FK） - 未找到父密钥</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90__GUID-3821D366-62C7-44D5-B5F1-E11B6250B9FC">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-A951A80F-7774-4620-8497-12E7DFFB663E" title="本教程介绍如何使用SQL Developer工具和ALTER TABLE语句向现有表添加约束。">教程：向现有表添加约束</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG296"></a><div class="props_rev_3"><a id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76" name="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76"></a><h4 id="TDDDG-GUID-4A22470D-2C45-44A9-940F-E39771CCCE76" class="sect4"><span class="enumeration_section">9.4.7</span>向用户授予模式对象权限</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76__GUID-C27129B1-CD15-4231-A823-3F79D58A2C5A">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_data身份连接到Oracle数据库。</p>
                        </div>
                        <p>要向用户授予权限，请使用SQL语句<span class="keyword">GRANT</span> 。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">GRANT</span>语句。
                        </p>
                        <p><span class="italic">仅</span>向app_code授予创建employees_pkg所需的权限：</p><pre class="oac_no_warn" dir="ltr">GRANT SELECT，INSERT，UPDATE，DELETE ON employees TO app_code; GRANT SELECT ON部门TO app_code; GRANT选择作业到app_code; GRANT SELECT，INSERT on job_history TO app_code; GRANT SELECT ON employees_sequence TO app_code;</pre><p><span class="italic">仅</span>向app_admin授予创建admin_pkg所需的权限：</p><pre class="oac_no_warn" dir="ltr">GRANT SELECT，INSERT，UPDATE，DELETE ON job to app_admin; GRANT SELECT，INSERT，UPDATE，DELETE ON部门TO app_admin; GRANT SELECT ON employees_sequence TO app_admin; GRANT SELECT ON departments_sequence TO app_admin;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76__GUID-A6CEEE31-96F2-4E10-B9D7-FEE739956BF5">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">GRANT</code>语句的信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建模式对象和加载数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG298"></a><a id="TDDDG297"></a><div class="props_rev_3"><a id="GUID-A814459E-682F-44DB-8421-CB960B924F2D" name="GUID-A814459E-682F-44DB-8421-CB960B924F2D"></a><h3 id="TDDDG-GUID-A814459E-682F-44DB-8421-CB960B924F2D" class="sect3"><span class="enumeration_section">9.5</span>创建employees_pkg包</h3>
               <div>
                  <p>本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-A814459E-682F-44DB-8421-CB960B924F2D__GUID-356AFDC3-BF42-4D24-999F-CA49444090CA">要创建employees_pkg包：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>以用户app_code身份连接到Oracle数据库。</span><div>
                           <p>有关说明，请参阅<span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus</a></span> <span class="q"><a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">连接到Oracle数据库</a></span> <span class="q">”</span>或<span class="q">“ <a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer是一个客户端程序，您可以使用它来访问Oracle数据库。">从SQL Developer连接到Oracle数据库</a> ”</span> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建这些同义词：</span><div><pre class="oac_no_warn" dir="ltr">为app_data.employees创建或替换SYNONYM <span class="bold">员工</span> ;为app_data.departments创建或替换SYNONYM <span class="bold">部门</span> ;为app_data.jobs创建或替换SYNONYM <span class="bold">作业</span> ;创建或替换SYNONYM <span class="bold">job_history</span> FOR app_data.job_history;</pre><p>您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">CREATE SYNONYM</span>语句。或者，您可以使用SQL Developer工具Create Synonym创建同义词。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建包规范。</span></li>
                     <li class="stepexpand"><span>创建包体。</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-47D45AFD-E557-420A-8757-E04F23FA896E">为employees_pkg创建包规范</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB">为employees_pkg创建包体</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-06901C50-69DC-4D42-9074-FB40FF8356EA">教程：显示employees_pkg子程序的工作原理</a><br>使用SQL * Plus，本教程将介绍employees_pkg包的子程序如何工作。本教程还显示了触发器employees_aiufer和<span class="keyword">CHECK</span>约束job_history_date_check的工作原理。
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25">向Exe_user和app_admin_user授予执行权限</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C">教程：将get_job_history调用为app_user或app_admin_user</a><br>使用SQL * Plus，本教程将演示如何以用户app_user（通常是管理员）或app_admin_user（应用程序管理员）的形式调用子程序app_code.employees_pkg.get_job_history。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A814459E-682F-44DB-8421-CB960B924F2D__GUID-7FBB6D7F-1955-48AA-A486-E0D678ADA6C7">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-75E0379C-171F-408D-8DAE-7EC55982F83F" title="要创建同义词，请使用SQL Developer工具Create Database Synonym或DDL语句CREATE SYNONYM。">创建同义词</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-711EE477-C725-40BE-A82B-1880EECBF912" title="包是一个PL / SQL单元，由相关的子程序和它们使用的声明游标和变量组成。Oracle建议您将子程序放入包中。">关于套餐</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG299"></a><div class="props_rev_3"><a id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E" name="GUID-47D45AFD-E557-420A-8757-E04F23FA896E"></a><h4 id="TDDDG-GUID-47D45AFD-E557-420A-8757-E04F23FA896E" class="sect4"><span class="enumeration_section">9.5.1</span>为employees_pkg创建包规范</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E__GUID-E0FFAA2B-6CF4-4D32-A4F9-61FF445CA383">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_code身份连接到Oracle数据库。</p>
                        </div>
                        <p>要为employees_pkg创建包规范（管理器的API），请使用以下<span class="keyword">CREATE PACKAGE</span>语句。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Package创建包。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换包裹employees_pkg AS程序get_employees_in_dept（p_deptno IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）;程序get_job_history（p_employee_id IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）;程序show_employee（p_employee_id IN employees.employee_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）; PROCEDURE update_salary（p_employee_id IN employees.employee_id％TYPE，p_new_salary IN employees.salary％TYPE）; PROCEDURE change_job（p_employee_id IN employees.employee_id％TYPE，p_new_job IN employees.job_id％TYPE，p_new_salary IN employees.salary％TYPE：= NULL，p_new_dept IN employees.department_id％TYPE：= NULL）; END employees_pkg; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E__GUID-464ADE65-571A-447B-99A1-18BFC4320C8C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">CREATE PACKAGE</span>语句的信息，请<a href="../lnpls/CREATE-PACKAGE-statement.html#LNPLS01371" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG300"></a><div class="props_rev_3"><a id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB" name="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB"></a><h4 id="TDDDG-GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB" class="sect4"><span class="enumeration_section">9.5.2</span>为employees_pkg创建包体</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB__GUID-91AC2F7C-F396-460E-884E-17C040FF751B">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_code身份连接到Oracle数据库。</p>
                        </div>
                        <p>要为employees_pkg（管理器的API）创建包体，请使用以下<span class="keyword">CREATE PACKAGE BODY</span>语句。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Body创建包。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换程序包employees_pkg AS程序get_employees_in_dept（p_deptno IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）IS l_cursor SYS_REFCURSOR; BEGIN OPEN p_result_set FOR SELECT e.employee_id，e.first_name || ''|| e.last_name名称，TO_CHAR（e.hire_date，'Dy Mon ddth，yyyy'）hire_date，j.job_title，m.first_name || ''|| m.last_name manager，d.department_name FROM employees e INNER JOIN jobs j ON（e.job_id = j.job_id）LEFT OUTER JOIN employees m ON（e.manager_id = m.employee_id）INNER JOIN departments d ON（e.department_id = d.department_id）WHERE e.department_id = p_deptno; END get_employees_in_dept;程序get_job_history（p_employee_id IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）是开始打开p_result_set FOR SELECT e。First_name || ''|| e.last_name name，j.job_title，e.job_start_date start_date，TO_DATE（NULL）end_date FROM employees e INNER JOIN jobs j ON（e.job_id = j.job_id）WHERE e.employee_id = p_employee_id UNION ALL SELECT e。First_name || ''|| e.last_name name，j.job_title，jh.start_date，jh.end_date FROM employees e INNER JOIN job_history jh ON（e.employee_id = jh.employee_id）INNER JOIN jobs j ON（jh.job_id = j.job_id）WHERE e。 employee_id = p_employee_id ORDER BY start_date DESC; END get_job_history;程序show_employee（p_employee_id IN employees.employee_id％TYPE，p_result_set IN OUT sys_refcursor）IS BEGIN OPEN p_result_set FOR SELECT * FROM（SELECT TO_CHAR（e.employee_id）employee_id，e.first_name ||''|| e.last_name name，e。 email_addr，TO_CHAR（e.hire_date，'dd-mon-yyyy'）hire_date，e.country_code，e.phone_number，j.job_title，TO_CHAR（e.job_start_date，'dd-mon-yyyy'）job_start_date，to_char（e。薪水），m.first_name ||''|| m.last_name manager，d.department_name FROM employees e INNER JOIN jobs j on（e.job_id = j.job_id）RIGHT OUTER JOIN员工m ON（m.employee_id = e .manager_id）INNER JOIN部门d ON（e.department_id = d.department_id）WHERE e.employee_id = p_employee_id）UNPIVOT（属性值为（employee_id，name，email_addr，hire_date，country_code，phone_number，job_title，job_start_date，salary，manager） ， 部门名称） ）; END show_employee; PROCEDURE update_salary（p_employee_id IN employees.employee_id％type，p_new_salary IN employees.salary％type）IS BEGIN UPDATE employees SET salary = p_new_salary WHERE employee_id = p_employee_id; END update_salary; PROCEDURE change_job（p_employee_id IN employees.employee_id％TYPE，p_new_job IN employees.job_id％TYPE，p_new_salary IN employees.salary％TYPE：= NULL，p_new_dept IN employees.department_id％TYPE：= NULL）IS BEGIN INSERT INTO job_history（employee_id，start_date ，end_date，job_id，department_id）SELECT employee_id，job_start_date，TRUNC（SYSDATE），job_id，department_id FROM employees WHERE employee_id = p_employee_id; UPDATE员工SET job_id = p_new_job，department_id = NVL（p_new_dept，department_id），薪水= NVL（p_new_salary，薪水），job_start_date = TRUNC（SYSDATE）WHERE employee_id = p_employee_id; END change_job; END employees_pkg; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB__GUID-447B81C2-0231-4435-A5A8-7005A9A5D8FB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">CREATE PACKAGE BODY</span>语句的信息，请<a href="../lnpls/CREATE-PACKAGE-BODY-statement.html#LNPLS01372" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG302"></a><a id="TDDDG301"></a><div class="props_rev_3"><a id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" name="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA"></a><h4 id="TDDDG-GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" class="sect4"><span class="enumeration_section">9.5.3</span>教程：显示employees_pkg子程序的工作方式</h4>
                  <div>
                     <p>使用SQL * Plus，本教程将介绍employees_pkg包的子程序如何工作。本教程还显示了触发器employees_aiufer和<span class="keyword">CHECK</span>约束job_history_date_check的工作原理。
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-15417D4B-4187-4725-A86A-70458903A76E">
                           <p class="notep1">注意：</p>
                           <p>您必须以SQL * Plus中的用户app_code连接到Oracle数据库。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-4D8E8C84-C4CD-40F7-8DEA-6CC3CDF5D631">要使用SQL * Plus来显示employees_pkg子程序的工作方式：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用格式化命令可提高输出的可读性。例如：</span><div><pre class="oac_no_warn" dir="ltr">SET LINESIZE 80 SET RECSEP WRAPPED SET RECSEPCHAR“=”列名称格式A15 WORD_WRAPPED COLUMN HIRE_DATE FORMAT A20 WORD_WRAPPED COLUMN DEPARTMENT_NAME格式A10 WORD_WRAPPED COLUMN JOB_TITLE格式A29 WORD_WRAPPED COLUMN MANAGER FORMAT A11 WORD_WRAPPED</pre></div>
                        </li>
                        <li class="stepexpand"><span>为子程序参数<span class="parmname" translate="no">p_result_set</span>的值声明一个绑定变量：</span><div><pre class="oac_no_warn" dir="ltr">变量c REFCURSOR</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示部门90中的员工：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_employees_in_dept（90，：c）</span> ;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">EMPLOYEE_ID姓名HIRE_DATE JOB_TITLE ----------- --------------- -------------------- --------------------------经理部----------- ---------- 100 Steven King Tue Jun 2003年6月17日总统执行官========================================= ================================== 102 Lex De Haan 2001年1月13日星期六行政副总裁Steven King执行官= ================================================== ======================== 101 Neena Kochhar 2005年9月21日星期三行政副总裁Steven King执行官============ ================================================== =============</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示员工101的工作历史记录：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_job_history（101，：c）</span> ;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">NAME JOB_TITLE START_DAT END_DATE --------------- -----------------------------  - ------- ------ Neena Kochhar管理副总裁16-MAR-05 Neena Kochhar会计经理28-OCT-01 15-MAR-05 Neena Kochhar公共会计师21-SEP-97 27 - 辛01</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示有关员工101的一般信息：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.show_employee（101，：c）</span> ;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">属性值--------------- --------------------------------- ------------- EMPLOYEE_ID 101姓名Neena Kochhar EMAIL_ADDR NKOCHHAR HIRE_DATE 21-sep-2005 COUNTRY_CODE +1 PHONE_NUMBER 515.123.4568 <span class="bold">JOB_TITLE管理副总裁</span> JOB_START_DATE 16-mar-05 <span class="bold">SALARY 17000</span>经理Steven King DEPARTMENT_NAME执行选择了11行。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示有关工作管理副总裁的信息：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_title ='行政副总裁';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">JOB_ID JOB_TITLE MIN_SALARY MAX_SALARY ---------- ----------------------------- ------- --- ---------- AD_VP管理副总裁15000 30000</pre></div>
                        </li>
                        <li class="stepexpand"><span>尝试为员工101提供超出工作范围的新薪水：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.update_salary（101,30001）</span> ;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC employees_pkg.update_salary（101,30001）; BEGIN employees_pkg.update_salary（101,30001）;结束; *第1行的错误：ORA-20002：工资修改无效ORA-06512：在“APP_DATA.EMPLOYEES_AIUFER”，第13行<span class="bold">ORA-04088：执行触发'APP_DATA.EMPLOYEES_AIUFER'ORA</span> -06512 <span class="bold">期间出错</span> ：at“APP_CODE.EMPLOYEES_PKG” ，第77行ORA-06512：第1行</pre></div>
                        </li>
                        <li class="stepexpand"><span>为员工101提供工作范围内的新工资，并再次显示有关她的一般信息：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.update_salary（101,18000）</span> ; EXEC <span class="bold">employees_pkg.show_employee（101，：c）</span> ;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">属性值--------------- --------------------------------- ------------- EMPLOYEE_ID 101姓名Neena Kochhar EMAIL_ADDR NKOCHHAR HIRE_DATE 21-sep-2005 COUNTRY_CODE +1 PHONE_NUMBER 515.123.4568 JOB_TITLE行政副总裁JOB_START_DATE 16-mar-05薪酬<span class="bold">18000</span>经理Steven King DEPARTMENT_NAME执行选择了11行。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>将员工101的工作改为当前工作，薪水较低：</span><div><pre class="oac_no_warn" dir="ltr">EXEC employees_pkg.change_job（101，'AD_VP'，17500,90）;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; exec employees_pkg.change_job（101，'AD_VP'，17500,90）; BEGIN employees_pkg.change_job（101，'AD_VP'，17500,80）;结束; *第1行的错误： <span class="bold">ORA-02290：检查约束（APP_DATA.JOB_HISTORY_DATE_CHECK）违反</span> ORA-06512：在“APP_CODE.EMPLOYEES_PKG”，第101行ORA-06512：在第1行</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示有关员工的信息。（注意，上一步中的语句没有改变工资;它是18000，而不是17500.）</span><div><pre class="oac_no_warn" dir="ltr">exec employees_pkg.show_employee（101，：c）;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">属性值--------------- --------------------------------- ------------- EMPLOYEE_ID 101姓名Neena Kochhar EMAIL_ADDR NKOCHHAR HIRE_DATE 21-sep-2005 COUNTRY_CODE +1 PHONE_NUMBER 515.123.4568 JOB_TITLE管理副总裁JOB_START_DAM 10-mar-2015 SALARY 18000 MANAGER Steven King DEPARTMENT_NAME Executive选择了11行。</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-2A2FBCBF-82F3-4B96-9FB2-B5B7A7C17CC5">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../sqpug/index.html" target="_blank"><span class="italic">SQL * Plus用户指南和参考</span></a>有关SQL * Plus命令的信息</p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG303"></a><div class="props_rev_3"><a id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25" name="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25"></a><h4 id="TDDDG-GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25" class="sect4"><span class="enumeration_section">9.5.4</span>向app_user和app_admin_user授予执行权限</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25__GUID-5438A8F4-1133-4B95-9E05-9ADA07FB083D">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_code身份连接到Oracle数据库。</p>
                        </div>
                        <p>要将包employees_pkg的执行权限授予app_user（通常是管理员）和app_admin_user（应用程序管理员），请使用以下<span class="keyword">GRANT</span>语句（按任意顺序）。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。
                        </p><pre class="oac_no_warn" dir="ltr">对employee_pkg进行GRANT EXECUTE TO app_user;对employee_pkg进行GRANT EXECUTE TO app_admin_user;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25__GUID-B76FCD24-B452-4002-810F-C633691A7071">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">应用程序的架构</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">GRANT</span>语句的信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG305"></a><a id="TDDDG304"></a><div class="props_rev_3"><a id="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C" name="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C"></a><h4 id="TDDDG-GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C" class="sect4"><span class="enumeration_section">9.5.5</span>教程：将get_job_history调用为app_user或app_admin_user</h4>
                  <div>
                     <p>使用SQL * Plus，本教程将演示如何以用户app_user（通常是管理员）或app_admin_user（应用程序管理员）的形式调用子程序app_code.employees_pkg.get_job_history。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C__GUID-BF3CEDB3-2A36-4530-8E56-C554BD3F7DA5">要以app_user或app_admin_user调用employees_pkg.get_job_history：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>从SQL * Plus以用户app_user或app_admin_user连接到Oracle数据库。</span><div>
                              <p>有关说明，请参阅<span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus连接到Oracle数据库</a> ”</span> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建此同义词：</span><div><pre class="oac_no_warn" dir="ltr">创建SYNONYM <span class="bold">employees_pkg</span> FOR app_code.employees_pkg;</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示员工101的工作历史记录：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_job_history（101，：c）</span> ;打印c</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">NAME JOB_TITLE START_DAT END_DATE --------------- -----------------------------  - ------- ----- Neena Kochhar管理副总裁16-MAR-05 15-MAY-12 Neena Kochhar会计经理28-OCT-01 15-MAR-05 Neena Kochhar Public Accountant 21 -SEP-97 27-OCT-01</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG307"></a><a id="TDDDG306"></a><div class="props_rev_3"><a id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" name="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE"></a><h3 id="TDDDG-GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" class="sect3"><span class="enumeration_section">9.6</span>创建admin_pkg包</h3>
               <div>
                  <p>本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE__GUID-F5720039-919D-4849-9089-42FBC1DF555D">要创建admin_pkg包：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>以用户app_admin身份连接到Oracle数据库。</span><div>
                           <p>有关说明，请参阅<span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus</a></span> <span class="q"><a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">连接到Oracle数据库</a></span> <span class="q">”</span>或<span class="q">“ <a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer是一个客户端程序，您可以使用它来访问Oracle数据库。">从SQL Developer连接到Oracle数据库</a> ”</span> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建这些同义词：</span><div><pre class="oac_no_warn" dir="ltr">为app_data.departments创建SYNONYM <span class="bold">部门</span> ;为app_data.jobs创建SYNONYM <span class="bold">作业</span> ;创建SYNONYM <span class="bold">departments_sequence</span> FOR app_data.departments_sequence;</pre><p>您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入<span class="keyword">CREATE SYNONYM</span>语句。或者，您可以使用SQL Developer工具Create Synonym创建表。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建包规范。</span></li>
                     <li class="stepexpand"><span>创建包体。</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3">为admin_pkg创建包规范</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B">为admin_pkg创建包体</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80">教程：显示admin_pkg子程序的工作原理</a><br>使用SQL * Plus，本教程将介绍admin_pkg包的子程序如何工作。该教程还显示了jobs_aufer触发器的工作原理。
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674">将执行权限授予app_admin_user</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E">教程：将add_department调用为app_admin_user</a><br>使用SQL * Plus，本教程将介绍如何以用户app_admin_user（应用程序管理员）的身份调用app_admin.admin_pkg.add_department函数，然后查看有关新部门的信息。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE__GUID-9DDB6CB2-B282-47CB-9697-C3304D728AC2">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-BE4C6796-7476-47E3-9F25-224135863A96" title="同义词是另一个模式对象的别名。使用同义词的一些原因是安全性（例如，隐藏对象的所有者和位置）和便利性。">创建和管理同义词</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-711EE477-C725-40BE-A82B-1880EECBF912" title="包是一个PL / SQL单元，由相关的子程序和它们使用的声明游标和变量组成。Oracle建议您将子程序放入包中。">关于套餐</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单的Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG308"></a><div class="props_rev_3"><a id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3" name="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3"></a><h4 id="TDDDG-GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3" class="sect4"><span class="enumeration_section">9.6.1</span>创建admin_pkg的包规范</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3__GUID-CE8AF502-B158-4E8F-B491-023C9F7B07A7">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_admin身份连接到Oracle数据库。</p>
                        </div>
                        <p>要为应用程序管理员创建admin_pkg的包规范，请使用以下<span class="keyword">CREATE PACKAGE</span>语句。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Package创建包。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换包装admin_pkg AS程序update_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE：= NULL，p_min_salary IN jobs.min_salary％TYPE：= NULL，p_max_salary IN jobs.max_salary％TYPE：= NULL） ;程序add_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE，p_min_salary IN jobs.min_salary％TYPE，p_max_salary IN jobs.max_salary％TYPE）; PROCEDURE update_department（p_department_id IN departmentss.department_id％TYPE，p_department_name IN departments.department_name％TYPE：= NULL，p_manager_id IN departments.manager_id％TYPE：= NULL，p_update_manager_id IN BOOLEAN：= FALSE）;功能add_department（p_department_name IN departments.department_name％TYPE，p_manager_id IN departments.manager_id％TYPE）RETURN departments.department_id％TYPE; END admin_pkg; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3__GUID-AA77F641-4821-4394-85B2-CF57C89C0502">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">CREATE PACKAGE</span>语句的信息，请<a href="../lnpls/CREATE-PACKAGE-statement.html#LNPLS01371" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">创建admin_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG309"></a><div class="props_rev_3"><a id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B" name="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B"></a><h4 id="TDDDG-GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B" class="sect4"><span class="enumeration_section">9.6.2</span>为admin_pkg创建包体</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B__GUID-8EE74AED-913E-4C38-9729-A4DB62D6F683">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_admin身份连接到Oracle数据库。</p>
                        </div>
                        <p>要为应用程序管理员的API创建admin_pkg的程序包主体，请使用以下<span class="keyword">CREATE PACKAGE BODY</span>语句。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。或者，您可以使用SQL Developer工具Create Body创建包。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换程序包admin_pkg AS程序update_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE：= NULL，p_min_salary IN jobs.min_salary％TYPE：= NULL，p_max_salary IN jobs.max_salary％TYPE：= NULL ）是BEGIN UPDATE作业SET job_title = NVL（p_job_title，job_title），min_salary = NVL（p_min_salary，min_salary），max_salary = NVL（p_max_salary，max_salary）WHERE job_id = p_job_id; END update_job;程序add_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE，p_min_salary IN jobs.min_salary％TYPE，p_max_salary IN jobs.max_salary％TYPE）IS BEGIN INSERT INTO jobs（job_id，job_title，min_salary，max_salary）VALUES （p_job_id，p_job_title，p_min_salary，p_max_salary）; END add_job;过程update_department（p_department_id IN departmentss.department_id％TYPE，p_department_name IN departments.department_name％TYPE：= NULL，p_manager_id IN departments.manager_id％TYPE：= NULL，p_update_manager_id IN BOOLEAN：= FALSE）IS BEGIN IF（p_update_manager_id）THEN UPDATE departments SET department_name = NVL（p_department_name，department_name），manager_id = p_manager_id WHERE department_id = p_department_id; ELSE UPDATE部门SET department_name = NVL（p_department_name，department_name）WHERE department_id = p_department_id;万一; END update_department;功能add_department（p_department_name IN departments.department_name％TYPE，p_manager_id IN departments.manager_id％TYPE）RETURN departments.department_id％TYPE IS l_department_id departments.department_id％TYPE; BEGIN INSERT INTO部门（department_id，department_name，manager_id）VALUES（departments_sequence。NEXTVAL，p_department_name，p_manager_id）RETURNING department_id INTO l_department_id;返回l_department_id; END add_department; END admin_pkg; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B__GUID-AC43A0C2-2997-4ACA-A23A-F690A79A62E7">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="该应用程序具有以下目的，结构和命名约定。">关于应用程序</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">CREATE PACKAGE BODY</span>语句的信息，请<a href="../lnpls/CREATE-PACKAGE-BODY-statement.html#LNPLS01372" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">创建admin_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG311"></a><a id="TDDDG310"></a><div class="props_rev_3"><a id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" name="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80"></a><h4 id="TDDDG-GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" class="sect4"><span class="enumeration_section">9.6.3</span>教程：显示admin_pkg子程序的工作原理</h4>
                  <div>
                     <p>使用SQL * Plus，本教程将介绍admin_pkg包的子程序如何工作。该教程还显示了jobs_aufer触发器的工作原理。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-79A8DC2E-951F-474E-814D-BDABAFB5605A">
                           <p class="notep1">注意：</p>
                           <p>您必须以SQL * Plus中的用户app_admin身份连接到Oracle数据库。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-ED3BC188-D0A6-4B8B-B27F-9845451031B1">要显示admin_pkg子程序的工作方式：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>显示ID为AD_VP的作业信息：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_id ='AD_VP';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">JOB_ID JOB_TITLE MIN_SALARY MAX_SALARY ---------- -----------------------------------  - --------- ---------- AD_VP管理副总裁15000 30000</pre></div>
                        </li>
                        <li class="stepexpand"><span>增加此作业的最高工资并再次显示相关信息：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_job（'AD_VP'，p_max_salary =&gt; 31000）</span> ; SELECT * FROM jobs WHERE job_id ='AD_VP';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">JOB_ID JOB_TITLE MIN_SALARY MAX_SALARY ---------- -----------------------------------  - --------- ---------- AD_VP管理副总裁15000 <span class="bold">31000</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示ID为IT_PROG的作业信息：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_id ='IT_PROG';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">JOB_ID JOB_TITLE MIN_SALARY MAX_SALARY ---------- -----------------------------------  - --------- ---------- IT_PROG Programmer 4000 10000</pre></div>
                        </li>
                        <li class="stepexpand"><span>尝试增加这份工作的最高工资：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_job（'IT_PROG'，p_max_salary =&gt; 4001）</span> ;</pre><p>结果（来自SQL * Plus）：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC admin_pkg.update_job（'IT_PROG'，p_max_salary =&gt; 4001）; BEGIN admin_pkg.update_job（'IT_PROG'，p_max_salary =&gt; 4001）;结束; *第1行的错误：ORA-20001：工资更新将违反5条现有员工记录ORA-06512：在“APP_DATA.JOBS_AUFER”第12行<span class="bold">ORA-04088：执行触发器'APP_DATA.JOBS_AUFER'时出错'</span> ORA-06512：at “APP_ADMIN.ADMIN_PKG”，第10行ORA-06512：第1行</pre></div>
                        </li>
                        <li class="stepexpand"><span>添加新作业并显示相关信息：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.add_job（'AD_CLERK'，'Administrative Clerk'，3000,7000）</span> ; SELECT * FROM jobs WHERE job_id ='AD_CLERK';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">JOB_ID JOB_TITLE MIN_SALARY MAX_SALARY ---------- -----------------------------------  - --------- ---------- AD_CLERK行政文员3000 7000</pre></div>
                        </li>
                        <li class="stepexpand"><span>显示有关部门100的信息：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM departments WHERE department_id = 100;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME MANAGER_ID ------------- ------------------------------ ---- ------ 100财经108</pre></div>
                        </li>
                        <li class="stepexpand"><span>更改部门100的名称和经理并显示有关它的信息：</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_department（100，'Financial Services'）</span> ; EXEC <span class="bold">admin_pkg.update_department（100，p_manager_id =&gt; 111，</span> <span class="bold">p_update_manager_id =&gt; true）;</span> SELECT * FROM departments WHERE department_id = 100;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME MANAGER_ID ------------- ------------------------------ ---- ------ 100金融服务111</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-CD1620D4-AE22-4751-A4E6-16DA27601024">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="您可以创建和管理PL / SQL包。">创建和管理包</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">创建admin_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG312"></a><div class="props_rev_3"><a id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674" name="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674"></a><h4 id="TDDDG-GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674" class="sect4"><span class="enumeration_section">9.6.4</span>向app_admin_user授予执行权限</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674__GUID-09FA5224-1755-4EB3-AEDC-097799482FBA">
                           <p class="notep1">注意：</p>
                           <p>您必须以用户app_admin身份连接到Oracle数据库。</p>
                        </div>
                        <p>要将包admin_pkg的执行权限授予app_admin_user（应用程序管理员），请使用以下<span class="keyword">GRANT</span>语句。您可以在SQL * Plus或SQL Developer的<span class="wintitle">工作表</span>中输入语句。
                        </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON admin_pkg TO app_admin_user;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674__GUID-4E3B9BAE-26AA-4598-B04E-6B70E6723D84">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">应用程序的架构</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">GRANT</span>语句的信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">创建admin_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG314"></a><a id="TDDDG315"></a><a id="TDDDG313"></a><div class="props_rev_3"><a id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E" name="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E"></a><h4 id="TDDDG-GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E" class="sect4"><span class="enumeration_section">9.6.5</span>教程：将add_department调用为app_admin_user</h4>
                  <div>
                     <p>使用SQL * Plus，本教程将介绍如何以用户app_admin_user（应用程序管理员）的身份调用app_admin.admin_pkg.add_department函数，然后查看有关新部门的信息。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E__GUID-5A508C63-01C3-4712-B5F1-77DD9B1179CC">要以app_admin_user身份调用admin_pkg.add_department：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>从SQL * Plus以用户app_admin_user身份连接到Oracle数据库。</p>
                              <p>有关说明，请参阅<span class="q">“ <a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL * Plus是一个客户端程序，您可以从中访问Oracle数据库。本主题说明如何启动SQL * Plus并连接到Oracle数据库。">从SQL * Plus连接到Oracle数据库</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>创建此同义词：</p><pre class="oac_no_warn" dir="ltr">创建SYNONYM <span class="bold">admin_pkg</span> FOR app_admin.admin_pkg;</pre></li>
                           <li>
                              <p>为函数的返回值声明一个绑定变量：</p><pre class="oac_no_warn" dir="ltr">变量n NUMBER</pre></li>
                           <li>
                              <p>添加一个没有经理的新部门：</p><pre class="oac_no_warn" dir="ltr">执行：n：= admin_pkg.add_department（'新部门'，NULL）;</pre></li>
                           <li>
                              <p>显示新部门经理的ID：</p><pre class="oac_no_warn" dir="ltr">打印：n</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">N ---------- 275</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E__GUID-A66A740F-A087-4CD3-A602-1AA812967B61">要查看有关新部门的信息：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以用户app_admin身份连接到Oracle数据库。</span></li>
                        <li class="stepexpand"><span>显示有关新部门的信息：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM departments WHERE department_name LIKE'New department％';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME MANAGER_ID ------------- ------------------------------ ---- ------ 275新系</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">创建admin_pkg包</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
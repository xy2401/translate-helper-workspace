<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="For a default installation, Oracle Database automatically manages undo. There is typically no need for DBA intervention. However, if your installation uses Oracle Flashback operations, you may need to perform some undo management tasks to ensure the success of these operations."></meta>
      <meta name="description" content="For a default installation, Oracle Database automatically manages undo. There is typically no need for DBA intervention. However, if your installation uses Oracle Flashback operations, you may need to perform some undo management tasks to ensure the success of these operations."></meta>
      <title>管理撤消</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content="For a default installation, Oracle Database automatically manages undo. There is typically no need for DBA intervention. However, if your installation uses Oracle Flashback operations, you may need to perform some undo management tasks to ensure the success of these operations."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="transporting-data.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-oracle-managed-files.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="transporting-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-oracle-managed-files.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-structure-and-storage.html" property="item" typeof="WebPage"><span property="name">Oracle数据库结构和存储</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理撤消</li>
            </ol>
            <a id="GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" name="GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0"></a><a id="ADMIN013"></a>
            
            <h2 id="ADMIN-GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" class="sect2"><span class="enumeration_chapter">16</span>管理撤消</h2>
         </header>
         <div class="ind">
            <div>
               <p>对于默认安装，Oracle数据库会自动管理撤消。通常不需要DBA干预。但是，如果您的安装使用Oracle闪回操作，则可能需要执行一些撤消管理任务以确保这些操作成功。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-undo.html#GUID-4454BE93-9160-4D92-9F93-EFB2958FC03D">什么是撤消？</a><br>Oracle数据库创建和管理用于回滚或撤消对数据库的更改的信息。这些信息包括交易行为的记录，主要是在交易之前。这些记录统称为<span class="bold">撤消</span> 。
                  </li>
                  <li class="ulchildlink"><a href="managing-undo.html#GUID-106B56C9-CB60-4E46-86A6-BF645E9E1A7F">自动撤消管理简介</a><br>Oracle数据库可以自动管理撤消信息和空间。
                  </li>
                  <li class="ulchildlink"><a href="managing-undo.html#GUID-C1272948-3E08-45D9-BD5A-D6461E249EFB">设置最小撤消保留期限</a><br>您可以通过设置<code class="codeph">UNDO_RETENTION</code>初始化参数来指定最小撤消保留期限（以秒为单位）。
                  </li>
                  <li class="ulchildlink"><a href="managing-undo.html#GUID-F7D30328-A0CC-4F81-BA54-0FCFC2095F8B">调整固定大小的撤消表空间</a><br>使用固定大小的撤消表空间，自动调整撤消保留通常可以获得更好的结果。如果您决定使用固定大小的撤消表空间，则Undo Advisor可以帮助您估算所需的容量。
                  </li>
                  <li class="ulchildlink"><a href="managing-undo.html#GUID-B994F33A-0905-4A7F-BA8C-2B76B43E8188">管理撤消表空间</a><br>您可以通过完成创建，更改和删除任务来管理撤消表空间。您还可以切换撤消表空间并为撤消空间建立用户配额。
                  </li>
                  <li class="ulchildlink"><a href="managing-undo.html#GUID-B159A41D-C28C-4E6E-BAAF-FE5ACE2C18B7">迁移到自动撤消管理</a><br>如果您当前正在使用回滚段来管理撤消空间，Oracle强烈建议您将数据库迁移到自动撤消管理。
                  </li>
                  <li class="ulchildlink"><a href="managing-undo.html#GUID-9A6B9475-63ED-4204-93DD-2B77BEB858CE">管理临时撤消</a><br>默认情况下，临时表的撤消记录存储在撤消表空间中，并以重做方式记录，这与对持久表管理撤消的方式相同。但是，您可以使用<code class="codeph">TEMP_UNDO_ENABLED</code>初始化参数将临时表的撤消与永久表的撤消分开。当此参数设置为<code class="codeph">TRUE</code> ，临时表的撤消称为<span class="bold">临时撤消</span> 。
                  </li>
                  <li class="ulchildlink"><a href="managing-undo.html#GUID-F9B85E9D-D56A-43D2-AB52-918C0FE4D609">撤消空间数据字典视图</a><br>您可以在自动撤消管理模式下查询一组视图，以获取有关撤消空间的信息。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0__GUID-87C44FCF-CF78-4E5A-9665-2656E398D886">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="using-oracle-managed-files.html#GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" title="Oracle数据库可以管理组成数据库的文件。">使用Oracle Managed Files</a>获取有关创建撤消表空间的信息，该表空间的数据文件由Oracle数据库创建和管理。
                  </p>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-database-structure-and-storage.html#GUID-F11D30A7-BF12-4D8F-A1C2-D7437D38F8C7" title="您可以创建和管理数据库结构和存储组件。">Oracle数据库结构和存储</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN11460"></a><div class="props_rev_3"><a id="GUID-4454BE93-9160-4D92-9F93-EFB2958FC03D" name="GUID-4454BE93-9160-4D92-9F93-EFB2958FC03D"></a><h3 id="ADMIN-GUID-4454BE93-9160-4D92-9F93-EFB2958FC03D" class="sect3"><span class="enumeration_section">16.1</span>撤消什么？
               </h3>
               <div>
                  <p>Oracle数据库创建和管理用于回滚或撤消对数据库的更改的信息。这些信息包括交易行为的记录，主要是在交易之前。这些记录统称为<span class="bold">撤消</span> 。
                  </p>
                  <p>撤消记录用于：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>发出<code class="codeph">ROLLBACK</code>语句时<code class="codeph">ROLLBACK</code>事务</p>
                     </li>
                     <li>
                        <p>恢复数据库</p>
                     </li>
                     <li>
                        <p>提供读取一致性</p>
                     </li>
                     <li>
                        <p>使用Oracle闪回查询分析早期时间点的数据</p>
                     </li>
                     <li>
                        <p>使用Oracle闪回功能从逻辑损坏中恢复</p>
                     </li>
                  </ul>
                  <p>发出<code class="codeph">ROLLBACK</code>语句时，撤消记录用于撤消未提交事务对数据库所做的更改。在数据库恢复期间，撤消记录用于撤消从重做日志应用于数据文件的任何未提交的更改。撤消记录通过为另一个用户正在更改数据的同时访问数据的用户维护数据的前映像来提供读取一致性。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-4454BE93-9160-4D92-9F93-EFB2958FC03D__GUID-919C7A94-918A-484B-88D8-CE7DA7F0E3D4">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../cncpt/logical-storage-structures.html#CNCPT305" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" title="对于默认安装，Oracle数据库会自动管理撤消。通常不需要DBA干预。但是，如果您的安装使用Oracle闪回操作，则可能需要执行一些撤消管理任务以确保这些操作成功。">管理撤消</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11461"></a><div class="props_rev_3"><a id="GUID-106B56C9-CB60-4E46-86A6-BF645E9E1A7F" name="GUID-106B56C9-CB60-4E46-86A6-BF645E9E1A7F"></a><h3 id="ADMIN-GUID-106B56C9-CB60-4E46-86A6-BF645E9E1A7F" class="sect3"><span class="enumeration_section">16.2</span>自动撤消管理简介</h3>
               <p>Oracle数据库可以自动管理撤消信息和空间。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-281C5BFE-BAED-47C3-BFF7-806C0954F3EC">自动撤消管理概述</a><br>Oracle提供了一种全自动机制，称为自动撤消管理，用于管理撤消信息和空间。通过自动撤消管理，数据库管理撤消表空间中的还原段。
                     </li>
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-28EA4133-BC73-4036-87F2-656FC1A6D9A2">撤消保留期</a><br><span class="bold">撤消保留期</span>是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" title="对于默认安装，Oracle数据库会自动管理撤消。通常不需要DBA干预。但是，如果您的安装使用Oracle闪回操作，则可能需要执行一些撤消管理任务以确保这些操作成功。">管理撤消</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11462"></a><div class="props_rev_3"><a id="GUID-281C5BFE-BAED-47C3-BFF7-806C0954F3EC" name="GUID-281C5BFE-BAED-47C3-BFF7-806C0954F3EC"></a><h4 id="ADMIN-GUID-281C5BFE-BAED-47C3-BFF7-806C0954F3EC" class="sect4"><span class="enumeration_section">16.2.1</span>自动撤消管理概述</h4>
                  <div>
                     <p>Oracle提供了一种全自动机制，称为自动撤消管理，用于管理撤消信息和空间。通过自动撤消管理，数据库管理撤消表空间中的还原段。</p>
                     <p>自动撤消管理是新安装的数据库的默认模式。使用Database Configuration Assistant（DBCA）创建数据库时，将自动创建名为<code class="codeph">UNDOTBS1</code>的自动扩展撤消表空间。
                     </p>
                     <p>您还可以显式创建撤消表空间。<span class="q">“ <a href="managing-undo.html#GUID-49219733-ABC4-488E-850B-A704B171ACF5" title="When you are creating a database, you can create an undo tablespace with the CREATE DATABASE statement. In an existing database, you can create an undo tablespace with the CREATE UNDO TABLESPACE statement.">创建撤消表空间</a> ”</span>中介绍了<span class="q"><a href="managing-undo.html#GUID-49219733-ABC4-488E-850B-A704B171ACF5" title="在创建数据库时，可以使用CREATE DATABASE语句创建撤消表空间。在现有数据库中，您可以使用CREATE UNDO TABLESPACE语句创建撤消表空间。">创建撤消表空间的方法</a></span> 。
                     </p>
                     <p>数据库实例启动时，数据库会自动选择第一个可用的撤消表空间。如果没有可用的撤消表空间，则实例将在没有撤消表空间的情况下启动，并将撤消记录存储在<code class="codeph">SYSTEM</code>表空间中。建议不要这样做，并且会向警报日志文件写入警报消息，以警告系统在没有撤消表空间的情况下运行。
                     </p>
                     <p>如果数据库包含多个撤消表空间，则可以选择在启动时指定要使用特定的撤消表空间。这是通过设置<code class="codeph">UNDO_TABLESPACE</code>初始化参数来完成的，如下例所示：</p><pre class="oac_no_warn" dir="ltr">UNDO_TABLESPACE = undotbs_01</pre><p>如果初始化参数中指定的表空间不存在，则<code class="codeph">STARTUP</code>命令失败。<code class="codeph">UNDO_TABLESPACE</code>参数可用于将特定的撤消表空间分配给Oracle Real Application Clusters环境中的实例。
                     </p>
                     <p>数据库也可以在<span class="italic">手动撤消管理模式下运行</span> 。在此模式下，撤消空间通过回滚段进行管理，不使用撤消表空间。
                     </p>
                     <div class="infoboxnote" id="GUID-281C5BFE-BAED-47C3-BFF7-806C0954F3EC__GUID-FAE8D895-DE7D-4B6E-86B9-753CB992ECAE">
                        <p class="notep1">注意：</p>
                        <p>回滚段的空间管理很复杂。Oracle强烈建议将数据库保留为自动撤消管理模式。</p>
                     </div>
                     <p>以下是摘要<a id="d168466e338" class="indexterm-anchor"></a> undo管理的初始化参数：</p>
                     <div class="tblformal" id="GUID-281C5BFE-BAED-47C3-BFF7-806C0954F3EC__GUID-4A620D46-6270-4168-A4FB-CD612BF17E97">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="In column 1 this table lists the initialization parameters relating to automatic undo management. Column 2 describes each parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="33%" id="d168466e351">初始化参数</th>
                                 <th align="left" valign="bottom" width="67%" id="d168466e354">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d168466e359" headers="d168466e351 ">
                                    <p><code class="codeph"><a href="../refrn/UNDO_MANAGEMENT.html#REFRN10224" target="_blank">UNDO_MANAGEMENT</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d168466e359 d168466e354 ">
                                    <p>如果为<code class="codeph">AUTO</code>或null，则启用自动撤消管理。如果是<code class="codeph">MANUAL</code> ，则设置手动撤消管理模式。默认为<code class="codeph">AUTO</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d168466e379" headers="d168466e351 ">
                                    <p><code class="codeph"><a href="../refrn/UNDO_TABLESPACE.html#REFRN10227" target="_blank">UNDO_TABLESPACE</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d168466e379 d168466e354 ">
                                    <p>可选，仅在自动撤消管理模式下有效。指定撤消表空间的名称。仅在数据库具有多个撤消表空间并且您希望指示数据库实例使用特定的撤消表空间时使用。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>启用自动撤消管理后，如果初始化参数文件包含与手动撤消管理相关的参数，则忽略它们。</p>
                     <div class="infoboxnote" id="GUID-281C5BFE-BAED-47C3-BFF7-806C0954F3EC__GUID-919E8828-0CF8-4AF3-B009-DE1494D44355">
                        <p class="notep1">注意：</p>
                        <p>早期版本的Oracle数据库默认为手动撤消管理模式。要更改为自动撤消管理，必须首先创建撤消表空间，然后将<code class="codeph">UNDO_MANAGEMENT</code>初始化参数更改为<code class="codeph">AUTO</code> 。如果您的Oracle数据库是Oracle9 <span class="italic">i</span>或更高版本，并且您想要更改为自动撤消管理，请参阅“ <a href="../upgrd/index.html" target="_blank"><span class="italic">Oracle数据库升级指南”</span></a>以获取相关说明。
                        </p>
                        <p>null <code class="codeph">UNDO_MANAGEMENT</code>初始化参数默认为Oracle Database <span class="italic">11g</span>及更高版本中的自动撤消管理模式，但默认为早期版本中的手动撤消管理模式。因此，在将先前版本升级到当前版本时，必须小心谨慎。<a href="../upgrd/index.html" target="_blank"><span class="italic">“Oracle数据库升级指南”</span></a>介绍了迁移到自动撤消管理模式的正确方法，包括有关如何调整撤消表空间大小的信息。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-106B56C9-CB60-4E46-86A6-BF645E9E1A7F" title="Oracle数据库可以自动管理撤消信息和空间。">自动撤消管理简介</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-28EA4133-BC73-4036-87F2-656FC1A6D9A2" name="GUID-28EA4133-BC73-4036-87F2-656FC1A6D9A2"></a><h4 id="ADMIN-GUID-28EA4133-BC73-4036-87F2-656FC1A6D9A2" class="sect4"><span class="enumeration_section">16.2.2</span>撤销保留期限</h4>
                  <p><span class="bold">撤消保留期</span>是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-undo.html#GUID-049380AF-220F-43C0-81B2-27DCD7953574">关于撤消保留期</a><br>启用自动撤消管理时，始终存在当前的<span class="bold">撤消保留期</span> ，这是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。
                        </li>
                        <li class="ulchildlink"><a href="managing-undo.html#GUID-43B6D26F-1EF6-4A25-B831-D90E625C7649">自动调整撤消保留</a><br>Oracle数据库根据撤消表空间的配置方式自动调整撤消保留期。
                        </li>
                        <li class="ulchildlink"><a href="managing-undo.html#GUID-FE48AEC0-64AE-4431-8A29-CD4EA15E6548">保留保证</a><br>为了保证长时间运行的查询或Oracle闪回操作的成功，您可以启用保留保证。
                        </li>
                        <li class="ulchildlink"><a href="managing-undo.html#GUID-3F10B6D7-4A77-4486-A72C-301CFA6F47A9">撤消保留调整和警报阈值</a><br>对于固定大小的撤消表空间，数据库根据数据库统计信息和撤消表空间的大小计算最佳保留期。
                        </li>
                        <li class="ulchildlink"><a href="managing-undo.html#GUID-8450E94B-D55D-47D6-9872-0778464AD77E">跟踪调整的撤消保留期</a><br>您可以通过查询<code class="codeph">V$UNDOSTAT</code>视图的<code class="codeph">TUNED_UNDORETENTION</code>列来确定当前保留期。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-106B56C9-CB60-4E46-86A6-BF645E9E1A7F" title="Oracle数据库可以自动管理撤消信息和空间。">自动撤消管理简介</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN10180"></a><div class="props_rev_3"><a id="GUID-049380AF-220F-43C0-81B2-27DCD7953574" name="GUID-049380AF-220F-43C0-81B2-27DCD7953574"></a><h5 id="ADMIN-GUID-049380AF-220F-43C0-81B2-27DCD7953574" class="sect5"><span class="enumeration_section">16.2.2.1</span>关于撤消保留期限</h5>
                     <div>
                        <p>启用自动撤消管理时，始终存在当前的<span class="bold">撤消保留期</span> ，这是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。
                        </p>
                        <p>提交事务后，不再需要撤消数据进行回滚或事务恢复。但是，出于一致的读取目的，长时间运行的查询可能需要此旧的撤消信息来生成数据块的旧图像。此外，几个Oracle闪回功能的成功还取决于旧的撤消信息的可用性。由于这些原因，希望尽可能长时间地保留旧的撤销信息。</p>
                        <p>旧的（已提交的）早于当前撤消保留期的撤消信息据说<span class="italic">已过期</span> ，其空间可供新事务覆盖。具有小于当前撤消保留期的年龄的旧撤消信息被认为是<span class="italic">未过期的</span>并且被保留以用于一致的读取和Oracle闪回操作。
                        </p>
                        <p>Oracle数据库根据撤消表空间大小和系统活动自动调整撤消保留期。您可以通过设置<code class="codeph">UNDO_RETENTION</code>初始化参数来指定最小撤消保留期（以秒为单位）。此参数对撤消保留的确切影响如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于固定大小的撤消表空间，将忽略<code class="codeph">UNDO_RETENTION</code>参数。数据库始终根据系统活动和撤消表空间大小调整撤消保留期以获得最佳保留期。有关详细信息，请参阅<span class="q">“ <a href="managing-undo.html#GUID-43B6D26F-1EF6-4A25-B831-D90E625C7649" title="Oracle数据库根据撤消表空间的配置方式自动调整撤消保留期。">撤消保留的自动调整</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>对于启用了<code class="codeph">AUTOEXTEND</code>选项的撤消表空间，数据库会尝试遵守<code class="codeph">UNDO_RETENTION</code>指定的最短保留期。当空间不足时，表空间会自动扩展，而不是覆盖未过期的撤消信息。如果为自动扩展的撤消表空间指定了<code class="codeph">MAXSIZE</code>子句，则在达到最大大小时，数据库可能会开始覆盖未过期的撤消信息。由DBCA自动创建的<code class="codeph">UNDOTBS1</code>表空间是自动扩展的。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-28EA4133-BC73-4036-87F2-656FC1A6D9A2" title="撤消保留期是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。">撤消保留期</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11464"></a><div class="props_rev_3"><a id="GUID-43B6D26F-1EF6-4A25-B831-D90E625C7649" name="GUID-43B6D26F-1EF6-4A25-B831-D90E625C7649"></a><h5 id="ADMIN-GUID-43B6D26F-1EF6-4A25-B831-D90E625C7649" class="sect5"><span class="enumeration_section">16.2.2.2</span>撤消保留的自动调整</h5>
                     <div>
                        <p>Oracle数据库根据撤消表空间的配置方式自动调整撤消保留期。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果使用<code class="codeph">AUTOEXTEND</code>选项配置撤消表空间，则数据库会动态调整撤消保留期，使其比系统上运行时间最长的活动查询稍长。但是，此保留期可能不足以适应Oracle闪回操作。导致<code class="codeph">snapshot</code> <code class="codeph">too</code> <code class="codeph">old</code>错误的Oracle闪回操作表明您必须进行干预以确保保留足够的撤消数据以支持这些操作。为了更好地适应Oracle闪回功能，您可以将<code class="codeph">UNDO_RETENTION</code>参数设置为等于预期最长的Oracle闪回操作的值，也可以将撤消表空间更改为固定大小。
                              </p>
                           </li>
                           <li>
                              <p>如果撤消表空间是固定大小，则数据库会动态调整撤消保留期，以便为该表空间大小和当前系统负载提供最佳保留。此最佳可能保留时间通常显着大于运行时间最长的活动查询的持续时间。</p>
                              <p>如果您决定将撤消表空间更改为固定大小，则必须选择足够大的表空间大小。如果选择的撤消表空间大小太小，则可能发生以下两个错误：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>DML可能会失败，因为没有足够的空间来容纳新事务的撤消。</p>
                                 </li>
                                 <li>
                                    <p>长时间运行的查询可能会失败，一个<code class="codeph">snapshot</code> <code class="codeph">too</code> <code class="codeph">old</code>的错误，这意味着有读一致性还原数据不足。
                                    </p>
                                 </li>
                              </ul>
                              <p>有关详细信息，请参阅<span class="q">“ <a href="managing-undo.html#GUID-F7D30328-A0CC-4F81-BA54-0FCFC2095F8B" title="使用固定大小的撤消表空间，自动调整撤消保留通常可以获得更好的结果。如果您决定使用固定大小的撤消表空间，则Undo Advisor可以帮助您估算所需的容量。">调整固定大小的撤消表空间</a> ”</span> 。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-43B6D26F-1EF6-4A25-B831-D90E625C7649__GUID-D951240F-797F-41AF-A7B8-8E117DC35E36">
                           <p class="notep1">注意：</p>
                           <p>LOB不支持自动调整撤消保留。这是因为LOB的撤消信息存储在段本身中而不是存储在撤消表空间中。对于LOB，数据库尝试遵守<code class="codeph">UNDO_RETENTION</code>指定的最小撤消保留期。但是，如果空间变小，则可能会覆盖未到期的LOB撤消信息。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-43B6D26F-1EF6-4A25-B831-D90E625C7649__GUID-BD431DB7-CAEE-42D7-8F95-76293D8980F5">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="managing-undo.html#GUID-C1272948-3E08-45D9-BD5A-D6461E249EFB" title="您可以通过设置UNDO_RETENTION初始化参数来指定最小撤消保留期限（以秒为单位）。">设置最小撤消保留期</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-28EA4133-BC73-4036-87F2-656FC1A6D9A2" title="撤消保留期是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。">撤消保留期</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11463"></a><div class="props_rev_3"><a id="GUID-FE48AEC0-64AE-4431-8A29-CD4EA15E6548" name="GUID-FE48AEC0-64AE-4431-8A29-CD4EA15E6548"></a><h5 id="ADMIN-GUID-FE48AEC0-64AE-4431-8A29-CD4EA15E6548" class="sect5"><span class="enumeration_section">16.2.2.3</span>保留保证</h5>
                     <div>
                        <p>为了保证长时间运行的查询或Oracle闪回操作的成功，您可以启用保留保证。</p>
                        <p>如果启用了保留保证，则保证指定的最小撤消保留;数据库永远不会覆盖未过期的撤消数据，即使这意味着由于撤消表空间中的空间不足导致事务失败。如果未启用保留保证，则数据库可以在空间不足时覆盖未过期的撤消，从而降低系统的撤消保留。默认情况下禁用此选项。</p>
                        <div class="infoboxnotewarn" id="GUID-FE48AEC0-64AE-4431-8A29-CD4EA15E6548__GUID-E4873846-72C2-410A-AC37-BA10ED507EF0">
                           <p class="notep1">警告：</p>
                           <p>启用保留保证可能导致多个DML操作失败。谨慎使用。</p>
                        </div>
                        <p>通过使用<code class="codeph">CREATE DATABASE</code>或<code class="codeph">CREATE UNDO TABLESPACE</code>语句创建撤消表空间的<code class="codeph">RETENTION GUARANTEE</code>子句，可以启用保留保证。或者，您可以稍后在<code class="codeph">ALTER TABLESPACE</code>语句中指定此子句。您可以使用<code class="codeph">RETENTION NOGUARANTEE</code>子句禁用保留保证。
                        </p>
                        <p>您可以使用<code class="codeph">DBA_TABLESPACES</code>视图来确定撤消表空间的保留保证设置。名为<code class="codeph">RETENTION</code>的列包含值<code class="codeph">GUARANTEE</code> ， <code class="codeph">NOGUARANTEE</code>或<code class="codeph">NOT</code> <code class="codeph">APPLY</code> ，其中<code class="codeph">NOT</code> <code class="codeph">APPLY</code>用于除undo表空间之外的表空间。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-28EA4133-BC73-4036-87F2-656FC1A6D9A2" title="撤消保留期是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。">撤消保留期</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12328"></a><div class="props_rev_3"><a id="GUID-3F10B6D7-4A77-4486-A72C-301CFA6F47A9" name="GUID-3F10B6D7-4A77-4486-A72C-301CFA6F47A9"></a><h5 id="ADMIN-GUID-3F10B6D7-4A77-4486-A72C-301CFA6F47A9" class="sect5"><span class="enumeration_section">16.2.2.4</span>撤消保留调整和警报阈值</h5>
                     <div>
                        <p>对于固定大小的撤消表空间，数据库根据数据库统计信息和撤消表空间的大小计算最佳保留期。</p>
                        <p>为了实现最佳的撤消管理，数据库不是基于表空间大小的100％进行调整，而是根据表空间大小的85％调整撤消保留期，或者根据使用的空间的警告警报阈值百分比调整，以较低者为准。（警告警报阈值默认为85％，但可以更改。）因此，如果将撤消表空间的警告警报阈值设置为低于85％，则可能会减小撤消保留期的调整大小。有关表空间警报阈值的详细信息，请参阅<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070" title="默认情况下定义了两个警报阈值：警告和严重。警告阈值是空间开始低的限制。关键阈值是一个严重的限制，值得您立即关注。数据库在两个阈值处发出警报。">管理表空间警报</a> ”</span> 。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-28EA4133-BC73-4036-87F2-656FC1A6D9A2" title="撤消保留期是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。">撤消保留期</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12329"></a><div class="props_rev_3"><a id="GUID-8450E94B-D55D-47D6-9872-0778464AD77E" name="GUID-8450E94B-D55D-47D6-9872-0778464AD77E"></a><h5 id="ADMIN-GUID-8450E94B-D55D-47D6-9872-0778464AD77E" class="sect5"><span class="enumeration_section">16.2.2.5</span>跟踪调谐的撤销保留期</h5>
                     <div>
                        <p>您可以通过查询<code class="codeph">V$UNDOSTAT</code>视图的<code class="codeph">TUNED_UNDORETENTION</code>列来确定当前保留期。
                        </p>
                        <div class="section">
                           <p>此视图在过去4天内每个10分钟统计信息收集时间间隔包含一行。（超过4天，数据在<code class="codeph">DBA_HIST_UNDOSTAT</code>视图中可用。）<code class="codeph">TUNED_UNDORETENTION</code>在几秒钟内给出。
                           </p><pre class="oac_no_warn" dir="ltr">select to_char（begin_time，'DD-MON-RR HH24：MI'）begin_time，to_char（end_time，'DD-MON-RR HH24：MI'）end_time，来自v $ undostat命令的tuned_undoretention by end_time; BEGIN_TIME END_TIME TUNED_UNDORETENTION --------------- --------------- ----------------- -  04-FEB-05 00:01 04-FEB-05 00:11 12100 ...07-FEB-05 23:21 07-FEB-05 23:31 86700 07-FEB-05 23:31 07-FEB-05 23:41 86700 07-FEB-05 23:41 07-FEB-05 23:51选择86700 07-FEB-05 23:51 07-FEB-05 23:52 86700 576行。
</pre><p>有关<code class="codeph">V$UNDOSTAT</code>更多信息，请参见<a href="../refrn/V-UNDOSTAT.html#REFRN30295" target="_blank"><span class="italic">Oracle数据库参考</span></a> 。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-28EA4133-BC73-4036-87F2-656FC1A6D9A2" title="撤消保留期是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。">撤消保留期</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN11465"></a><div class="props_rev_3"><a id="GUID-C1272948-3E08-45D9-BD5A-D6461E249EFB" name="GUID-C1272948-3E08-45D9-BD5A-D6461E249EFB"></a><h3 id="ADMIN-GUID-C1272948-3E08-45D9-BD5A-D6461E249EFB" class="sect3"><span class="enumeration_section">16.3</span>设置最小撤消保留期限</h3>
               <div>
                  <p>您可以通过设置<code class="codeph">UNDO_RETENTION</code>初始化参数来指定最小撤消保留期限（以秒为单位）。
                  </p>
                  <div class="section">
                     <p>如<span class="q">“ <a href="managing-undo.html#GUID-049380AF-220F-43C0-81B2-27DCD7953574" title="启用自动撤消管理时，始终存在当前的撤消保留期，这是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。">关于撤消保留期限</a> ”</span>中所述，当前撤消保留期可以自动调整为大于<code class="codeph">UNDO_RETENTION</code> ，或者，除非启用了保留保证，否则如果撤消表空间中的空间不足，则小于<code class="codeph">UNDO_RETENTION</code> 。
                     </p>
                     <p>要设置最小撤消保留期限：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>执行以下操作之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在初始化参数文件中设置<code class="codeph">UNDO_RETENTION</code> 。
                                 </p><pre class="oac_no_warn" dir="ltr">UNDO_RETENTION = 1800</pre></li>
                              <li>
                                 <p>使用<code class="codeph">ALTER SYSTEM</code>语句随时更改<code class="codeph">UNDO_RETENTION</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET UNDO_RETENTION = 2400;</pre></li>
                           </ul>
                        </li>
                     </ul>
                     <p><code class="codeph">UNDO_RETENTION</code>参数更改的效果是立即生效的，但只有当前的撤消表空间有足够的空间时才能实现。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" title="对于默认安装，Oracle数据库会自动管理撤消。通常不需要DBA干预。但是，如果您的安装使用Oracle闪回操作，则可能需要执行一些撤消管理任务以确保这些操作成功。">管理撤消</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11466"></a><div class="props_rev_3"><a id="GUID-F7D30328-A0CC-4F81-BA54-0FCFC2095F8B" name="GUID-F7D30328-A0CC-4F81-BA54-0FCFC2095F8B"></a><h3 id="ADMIN-GUID-F7D30328-A0CC-4F81-BA54-0FCFC2095F8B" class="sect3"><span class="enumeration_section">16.4</span>调整固定大小的撤消表空间大小</h3>
               <div>
                  <p>使用固定大小的撤消表空间，自动调整撤消保留通常可以获得更好的结果。如果您决定使用固定大小的撤消表空间，则Undo Advisor可以帮助您估算所需的容量。</p>
                  <div class="section">
                     <p>您可以通过Oracle Enterprise Manager Database Express（EM Express）或<code class="codeph">DBMS_ADVISOR</code> PL / SQL包访问Undo Advisor。EM Express是访问顾问的首选方法。有关通过EM Express使用Undo Advisor的更多信息，请参阅<a href="../admqs/managing-database-storage-structures.html#ADMQS0635" target="_blank"><span class="italic">Oracle Database 2 Day DBA</span></a> 。</p>
                     <p>Undo Advisor依赖于对自动工作负载存储库（AWR）中收集的数据的分析。因此，AWR具有足够的工作负载统计数据非常重要，以便Undo Advisor可以提供准确的建议。对于新创建的数据库，可能无法立即获得足够的统计信息。在这种情况下，请继续使用默认的自动扩展撤消表空间，直到至少一个工作负载周期完成。</p>
                     <p>对AWR统计信息的收集间隔和保留期的调整可能会影响顾问程序生成的建议的精确度和类型。有关更多信息，请参见“ <a href="../tgdba/gathering-database-statistics.html#TGDBA196" target="_blank"><span class="italic">Oracle数据库性能调整指南”</span></a>
                     </p>
                     <p>要使用Undo Advisor，首先要估算这两个值：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>预期运行时间最长的查询的长度</p>
                           <p>数据库完成工作负载周期后，您可以在“自动还原管理”页面的“系统活动”子页面上查看“最长运行查询”字段。</p>
                        </li>
                        <li>
                           <p>Oracle闪回操作所需的最长时间间隔</p>
                           <p>例如，如果您希望过去运行最多48小时的Oracle闪回查询，则您的Oracle闪回要求为48小时。</p>
                        </li>
                     </ul>
                     <p>然后，您将获取这两个值的最大值，并将该值用作Undo Advisor的输入。</p>
                     <p>运行Undo Advisor不会改变撤消表空间的大小。顾问只返回一个推荐。必须使用<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>语句将表空间数据文件更改为固定大小。
                     </p>
                     <p>以下示例假定undo表空间有一个名为<code class="codeph">undotbs.dbf</code>自动扩展数据文件。该示例将表空间更改为固定大小300MB。</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE DATAFILE'/oracle/dbs/undotbs.dbf'RESIZE 300M; ALTER DATABASE DATAFILE'/oracle/dbs/undotbs.dbf'AUTOEXTEND OFF;</pre><div class="infoboxnote" id="GUID-F7D30328-A0CC-4F81-BA54-0FCFC2095F8B__GUID-D4C9FE99-E2CE-4D74-9E7B-AA8AFA8C04BE">
                        <p class="notep1">注意：</p>
                        <p>为了使undo表空间固定大小，Oracle建议您首先在数据库创建后留出足够的时间来运行完整的工作负载，从而允许undo表空间增长到其处理工作负载所需的最小大小。然后，您可以使用Undo Advisor确定（如果需要）设置撤消表空间大小的大小，以允许长时间运行的查询和Oracle闪回操作。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-014AE5F8-A5A8-4612-8F16-08D4752F0C78">激活Undo Advisor PL / SQL接口</a><br>您可以通过顾问程序框架创建撤消顾问程序任务来激活撤消顾问程序。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F7D30328-A0CC-4F81-BA54-0FCFC2095F8B__GUID-42D5CFFF-5DFF-4666-B241-27CFC95EAF48">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../admqs/managing-database-storage-structures.html#ADMQS0635" target="_blank"><span class="italic">Oracle Database 2 Day DBA</span></a> ，提供有关使用Undo Advisor计算最小撤消表空间大小的说明</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" title="对于默认安装，Oracle数据库会自动管理撤消。通常不需要DBA干预。但是，如果您的安装使用Oracle闪回操作，则可能需要执行一些撤消管理任务以确保这些操作成功。">管理撤消</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11469"></a><div class="props_rev_3"><a id="GUID-014AE5F8-A5A8-4612-8F16-08D4752F0C78" name="GUID-014AE5F8-A5A8-4612-8F16-08D4752F0C78"></a><h4 id="ADMIN-GUID-014AE5F8-A5A8-4612-8F16-08D4752F0C78" class="sect4"><span class="enumeration_section">16.4.1</span>激活Undo Advisor PL / SQL接口</h4>
                  <div>
                     <p>您可以通过顾问程序框架创建撤消顾问程序任务来激活撤消顾问程序。</p>
                     <div class="section">
                        <p>以下示例创建一个undo advisor任务来评估undo表空间。顾问的名称是“撤消顾问”。该分析基于自动工作负载存储库快照，您必须通过设置参数<code class="codeph">START_SNAPSHOT</code>和<code class="codeph">END_SNAPSHOT</code>来指定这些快照。在以下示例中， <code class="codeph">START_SNAPSHOT</code>为“1”， <code class="codeph">END_SNAPSHOT</code>为“2”。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE tID NUMBER; tname VARCHAR2（30）; oid NUMBER; BEGIN DBMS_ADVISOR.CREATE_TASK（'撤消顾问'，tid，tname，'撤消顾问任务'）; DBMS_ADVISOR.CREATE_OBJECT（tname，'UNDO_TBS'，null，null，null，'null'，oid）; DBMS_ADVISOR.SET_TASK_PARAMETER（tname，'TARGET_OBJECTS'，oid）; DBMS_ADVISOR.SET_TASK_PARAMETER（tname，'START_SNAPSHOT'，1）; DBMS_ADVISOR.SET_TASK_PARAMETER（tname，'END_SNAPSHOT'，2）; DBMS_ADVISOR.SET_TASK_PARAMETER（tname，'INSTANCE'，1）; DBMS_ADVISOR.execute_task（TNAME）;结束; /</pre><p>创建顾问程序任务后，您可以在EM Express中查看自动数据库诊断监视器中的输出和建议。此信息也可在<code class="codeph">DBA_ADVISOR_*</code>数据字典视图中找到（ <code class="codeph">DBA_ADVISOR_TASKS</code> ， <code class="codeph">DBA_ADVISOR_OBJECTS</code> ， <code class="codeph">DBA_ADVISOR_FINDINGS</code> ， <code class="codeph">DBA_ADVISOR_RECOMMENDATIONS</code>等）。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-014AE5F8-A5A8-4612-8F16-08D4752F0C78__GUID-E35EBDD6-A3B3-45A0-BC1D-4237345B2340">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-E9B57A45-2688-42B6-9782-D49702D51F24" title="要使用Segment Advisor，请检查Automatic Segment Advisor的结果，并可选择手动运行Segment Advisor。">使用Segment Advisor</a> ”</span>作为为其他顾问程序创建顾问程序任务的示例</p>
                           </li>
                           <li>
                              <p>有关EM Express中自动数据库诊断监视器的信息，请参见<a href="../admqs/monitoring-and-tuning-the-database.html#ADMQS1021" target="_blank"><span class="italic">Oracle Database 2 Day DBA</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">DBA_ADVISOR_*</code>数据字典视图的信息，请<code class="codeph">DBA_ADVISOR_*</code> <a href="../refrn/index.html" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-F7D30328-A0CC-4F81-BA54-0FCFC2095F8B" title="使用固定大小的撤消表空间，自动调整撤消保留通常可以获得更好的结果。如果您决定使用固定大小的撤消表空间，则Undo Advisor可以帮助您估算所需的容量。">调整固定大小的撤消表空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11470"></a><div class="props_rev_3"><a id="GUID-B994F33A-0905-4A7F-BA8C-2B76B43E8188" name="GUID-B994F33A-0905-4A7F-BA8C-2B76B43E8188"></a><h3 id="ADMIN-GUID-B994F33A-0905-4A7F-BA8C-2B76B43E8188" class="sect3"><span class="enumeration_section">16.5</span>管理撤消表空间</h3>
               <p>您可以通过完成创建，更改和删除任务来管理撤消表空间。您还可以切换撤消表空间并为撤消空间建立用户配额。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-B9A62413-C613-4CD2-9A03-5ED80B18E0C8">创建撤消表空间</a><br>尽管Database Configuration Assistant（DBCA）会自动为新安装创建撤消表空间，但有时您可能需要手动创建撤消表空间。
                     </li>
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-B103ED51-A921-4E47-A665-BEB5DC927085">更改撤消表空间</a><br>您可以使用<code class="codeph">ALTER TABLESPACE</code>语句更改撤消表空间。
                     </li>
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-825E2A2F-7AEB-4D7A-B8BA-B1533D7BE512">删除撤消表空间</a><br>使用<code class="codeph">DROP TABLESPACE</code>语句删除撤消表空间。
                     </li>
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-DC7DBC48-E2B9-48D3-A0EB-1355704390F3">切换撤消表空间</a><br>您可以从使用一个撤消表空间切换到另一个。由于<code class="codeph">UNDO_TABLESPACE</code>初始化参数是动态参数，因此<code class="codeph">ALTER SYSTEM SET</code>语句可用于分配新的撤消表空间。
                     </li>
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-B9AE4692-B3C9-4481-8B13-F581BAD0FF8B">为撤消空间建立用户配额</a><br>您可以使用Oracle数据库资源管理器为撤消空间建立用户配额。数据库资源管理器指令<code class="codeph">UNDO_POOL</code>允许DBA限制一组用户（资源使用者组）消耗的撤消空间量。
                     </li>
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-981972D3-655C-42E5-B79D-17C9D6A84A2C">管理撤消表空间的空间阈值警报</a><br>Oracle数据库通过在表空间可用空间不足时发出警报来提供管理表空间磁盘空间的主动帮助。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" title="对于默认安装，Oracle数据库会自动管理撤消。通常不需要DBA干预。但是，如果您的安装使用Oracle闪回操作，则可能需要执行一些撤消管理任务以确保这些操作成功。">管理撤消</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-B9A62413-C613-4CD2-9A03-5ED80B18E0C8" name="GUID-B9A62413-C613-4CD2-9A03-5ED80B18E0C8"></a><h4 id="ADMIN-GUID-B9A62413-C613-4CD2-9A03-5ED80B18E0C8" class="sect4"><span class="enumeration_section">16.5.1</span>创建撤消表空间</h4>
                  <p>尽管Database Configuration Assistant（DBCA）会自动为新安装创建撤消表空间，但有时您可能需要手动创建撤消表空间。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-undo.html#GUID-49219733-ABC4-488E-850B-A704B171ACF5">关于创建撤消表空间</a><br>在创建数据库时，可以使用<code class="codeph">CREATE DATABASE</code>语句创建撤消表空间。在现有数据库中，您可以使用<code class="codeph">CREATE UNDO TABLESPACE</code>语句创建撤消表空间。
                        </li>
                        <li class="ulchildlink"><a href="managing-undo.html#GUID-AF9FF46C-9F35-45E4-BBA6-2781C21D22FB">使用CREATE DATABASE创建撤消表空间</a><br>您可以使用<code class="codeph">CREATE DATABASE</code>语句的<code class="codeph">UNDO TABLESPACE</code>子句创建特定的撤消表空间。
                        </li>
                        <li class="ulchildlink"><a href="managing-undo.html#GUID-C78DC3F8-BABD-4DFF-B4E2-5154D45D64C4">使用CREATE UNDO TABLESPACE语句</a><br><code class="codeph">CREATE UNDO TABLESPACE</code>语句与<code class="codeph">CREATE TABLESPACE</code>语句相同，但指定了<code class="codeph">UNDO</code>关键字。数据库确定撤消表空间的大多数属性，但您可以指定<code class="codeph">DATAFILE</code>子句。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-B994F33A-0905-4A7F-BA8C-2B76B43E8188" title="您可以通过完成创建，更改和删除任务来管理撤消表空间。您还可以切换撤消表空间并为撤消空间建立用户配额。">管理撤消表空间</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11471"></a><div class="props_rev_3"><a id="GUID-49219733-ABC4-488E-850B-A704B171ACF5" name="GUID-49219733-ABC4-488E-850B-A704B171ACF5"></a><h5 id="ADMIN-GUID-49219733-ABC4-488E-850B-A704B171ACF5" class="sect5"><span class="enumeration_section">16.5.1.1</span>关于创建撤消表空间</h5>
                     <div>
                        <p>在创建数据库时，可以使用<code class="codeph">CREATE DATABASE</code>语句创建撤消表空间。在现有数据库中，您可以使用<code class="codeph">CREATE UNDO TABLESPACE</code>语句创建撤消表空间。
                        </p>
                        <p>创建撤消表空间有两种方法。第一种方法在发出<code class="codeph">CREATE DATABASE</code>语句时创建撤消表空间。在创建新数据库时会发生这种情况，并且实例以自动撤消管理模式（ <code class="codeph">UNDO_MANAGEMENT = AUTO</code> ）启动。第二种方法与现有数据库一起使用。它使用<code class="codeph">CREATE UNDO TABLESPACE</code>语句。
                        </p>
                        <p>您无法在撤消表空间中创建数据库对象。它保留用于系统管理的撤消数据。</p>
                        <p>Oracle Database使您可以创建单文件撤消表空间。单文件或bigfile表空间在<span class="q">“ <a href="managing-tablespaces.html#GUID-7E376766-D99D-4274-BF00-8DC1E6FC5063" title="bigfile表空间是一个包含单个但可能非常大（最多4G块）数据文件的表空间。相反，传统的小文件表空间可以包含多个数据文件，但文件不能太大。">Bigfile表空间</a> ”</span>中讨论。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-B9A62413-C613-4CD2-9A03-5ED80B18E0C8" title="尽管Database Configuration Assistant（DBCA）会自动为新安装创建撤消表空间，但有时您可能需要手动创建撤消表空间。">创建撤消表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11472"></a><div class="props_rev_3"><a id="GUID-AF9FF46C-9F35-45E4-BBA6-2781C21D22FB" name="GUID-AF9FF46C-9F35-45E4-BBA6-2781C21D22FB"></a><h5 id="ADMIN-GUID-AF9FF46C-9F35-45E4-BBA6-2781C21D22FB" class="sect5"><span class="enumeration_section">16.5.1.2</span>使用CREATE DATABASE创建撤消表空间</h5>
                     <div>
                        <p>您可以使用<code class="codeph">CREATE DATABASE</code>语句的<code class="codeph">UNDO TABLESPACE</code>子句创建特定的撤消表空间。
                        </p>
                        <div class="section">
                           <p>以下语句说明了在<code class="codeph">CREATE DATABASE</code>语句中使用<code class="codeph">UNDO TABLESPACE</code>子句。undo表空间名为<code class="codeph">undotbs_01</code> ，为其分配了一个数据文件<code class="codeph">/u01/oracle/rbdb1/undo0101.dbf</code> 。
                           </p><pre class="oac_no_warn" dir="ltr">创建数据库rbdb1 CONTROLFILE REUSE。。。UNDO TABLESPACE undotbs_01 DATAFILE'/u01/oracle/rbdb1/undo0101.dbf';</pre><p>如果在<code class="codeph">CREATE DATABASE</code>期间无法成功创建撤消表空间，则整个<code class="codeph">CREATE DATABASE</code>操作将失败。您必须清理数据库文件，更正错误并重试<code class="codeph">CREATE DATABASE</code>操作。
                           </p>
                           <p><code class="codeph">CREATE DATABASE</code>语句还允许您在创建数据库时创建单文件撤消表空间。这在<span class="q">“ <a href="creating-and-configuring-an-oracle-database.html#GUID-35A12594-29EB-4545-A6AD-63B9AC3A5671" title="Oracle数据库简化了表空间的管理，并允许您创建bigfile表空间，从而支持超大型数据库。">在数据库创建期间支持Bigfile表空间</a> ”中</span>讨论。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-AF9FF46C-9F35-45E4-BBA6-2781C21D22FB__GUID-98E6A9CD-6F18-4882-980B-B458AFB3DBF5">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../sqlrf/CREATE-DATABASE.html#SQLRF01204" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> ，了解使用<code class="codeph">CREATE DATABASE</code>语句创建撤消表空间的语法</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-B9A62413-C613-4CD2-9A03-5ED80B18E0C8" title="尽管Database Configuration Assistant（DBCA）会自动为新安装创建撤消表空间，但有时您可能需要手动创建撤消表空间。">创建撤消表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11473"></a><div class="props_rev_3"><a id="GUID-C78DC3F8-BABD-4DFF-B4E2-5154D45D64C4" name="GUID-C78DC3F8-BABD-4DFF-B4E2-5154D45D64C4"></a><h5 id="ADMIN-GUID-C78DC3F8-BABD-4DFF-B4E2-5154D45D64C4" class="sect5"><span class="enumeration_section">16.5.1.3</span>使用CREATE UNDO TABLESPACE语句</h5>
                     <div>
                        <p><code class="codeph">CREATE UNDO TABLESPACE</code>语句与<code class="codeph">CREATE TABLESPACE</code>语句相同，但指定了<code class="codeph">UNDO</code>关键字。数据库确定撤消表空间的大多数属性，但您可以指定<code class="codeph">DATAFILE</code>子句。
                        </p>
                        <div class="section">
                           <p>此示例使用<code class="codeph">AUTOEXTEND</code>选项创建<code class="codeph">undotbs_02</code>撤消表空间：</p><pre class="oac_no_warn" dir="ltr">创建UNDO TABLESPACE undotbs_02 DATAFILE'/u01/oracle/rbdb1/undo0201.dbf'SIZE 2M REUSE AUTOEXTEND ON;</pre><p>您可以创建多个撤消表空间，但其中只有一个可以在任何时候处于活动状态。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C78DC3F8-BABD-4DFF-B4E2-5154D45D64C4__GUID-29B895CA-A145-40F9-9113-58B102269EA8">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../sqlrf/CREATE-TABLESPACE.html#SQLRF01403" target="_blank"><span class="italic">Oracle Database SQL语言参考</span></a> ，了解使用<code class="codeph">CREATE UNDO TABLESPACE</code>语句创建撤消表空间的语法</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-B9A62413-C613-4CD2-9A03-5ED80B18E0C8" title="尽管Database Configuration Assistant（DBCA）会自动为新安装创建撤消表空间，但有时您可能需要手动创建撤消表空间。">创建撤消表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN11474"></a><div class="props_rev_3"><a id="GUID-B103ED51-A921-4E47-A665-BEB5DC927085" name="GUID-B103ED51-A921-4E47-A665-BEB5DC927085"></a><h4 id="ADMIN-GUID-B103ED51-A921-4E47-A665-BEB5DC927085" class="sect4"><span class="enumeration_section">16.5.2</span>更改撤消表空间</h4>
                  <div>
                     <p>您可以使用<code class="codeph">ALTER TABLESPACE</code>语句更改撤消表空间。
                     </p>
                     <div class="section">
                        <p>但是，由于撤消表空间的大多数方面都是系统管理的，因此您只需关注以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>添加数据文件</p>
                           </li>
                           <li>
                              <p>重命名数据文件</p>
                           </li>
                           <li>
                              <p>使数据文件联机或使其脱机</p>
                           </li>
                           <li>
                              <p>开始或结束数据文件上的打开备份</p>
                           </li>
                           <li>
                              <p>启用和禁用撤消保留保证</p>
                           </li>
                        </ul>
                        <p>这些也是您允许更改的唯一属性。</p>
                        <p>如果撤消表空间空间不足，或者您希望阻止它执行此操作，则可以向其添加更多文件或调整现有数据文件的大小。</p>
                        <p>以下示例将另一个数据文件添加到undo tablespace undotbs_01：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE undotbs_01添加数据文件'/u01/oracle/rbdb1/undo0102.dbf'AUTOEXTEND ON NEXT 1M MAXSIZE UNLIMITED;</pre><p>你可以使用<code class="codeph">ALTER DATABASE...DATAFILE</code>语句用于调整大小或扩展数据文件。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B103ED51-A921-4E47-A665-BEB5DC927085__GUID-2DC7FA0A-B957-48E7-A8B7-A972B35098B1">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-data-files-and-temp-files.html#GUID-8E7A9714-85CB-45F3-8384-00D68EAC3E58" title="您可以更改数据文件的大小。例如，如果数据库中需要更多空间，则可以增加一个或多个数据文件的大小。">更改数据文件大小</a> ”</span></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER TABLESPACE</code>语法的<a href="../sqlrf/ALTER-TABLESPACE.html#SQLRF01002" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-B994F33A-0905-4A7F-BA8C-2B76B43E8188" title="您可以通过完成创建，更改和删除任务来管理撤消表空间。您还可以切换撤消表空间并为撤消空间建立用户配额。">管理撤消表空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11475"></a><div class="props_rev_3"><a id="GUID-825E2A2F-7AEB-4D7A-B8BA-B1533D7BE512" name="GUID-825E2A2F-7AEB-4D7A-B8BA-B1533D7BE512"></a><h4 id="ADMIN-GUID-825E2A2F-7AEB-4D7A-B8BA-B1533D7BE512" class="sect4"><span class="enumeration_section">16.5.3</span>删除撤消表空间</h4>
                  <div>
                     <p>使用<code class="codeph">DROP TABLESPACE</code>语句删除撤消表空间。
                     </p>
                     <div class="section">
                        <p>以下示例删除了撤消表空间<code class="codeph">undotbs_01</code> ：</p><pre class="oac_no_warn" dir="ltr">DROP TABLESPACE undotbs_01;</pre><p>只有当任何实例当前未使用撤消表空间时，才能删除该表空间。如果撤消表空间包含任何未完成的事务（例如，事务已死但尚未恢复），则<code class="codeph">DROP TABLESPACE</code>语句将失败。但是，由于<code class="codeph">DROP TABLESPACE</code>删除撤消表空间，即使它包含未过期的撤消信息（在保留期内），如果某些现有查询需要撤消信息，则必须注意不要删除撤消表空间。
                        </p>
                        <p><code class="codeph">DROP TABLESPACE</code>用于还原表的行为就像<code class="codeph">DROP TABLESPACE...INCLUDING CONTENTS</code> 。撤消表空间的所有内容。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-825E2A2F-7AEB-4D7A-B8BA-B1533D7BE512__GUID-63FEB8DF-D7C1-4631-8B54-3A690C0E3FA2">
                        <p class="notep1">也可以看看：</p>
                        <p><code class="codeph">DROP TABLESPACE</code>语法的<a href="../sqlrf/DROP-TABLESPACE.html#SQLRF01807" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-B994F33A-0905-4A7F-BA8C-2B76B43E8188" title="您可以通过完成创建，更改和删除任务来管理撤消表空间。您还可以切换撤消表空间并为撤消空间建立用户配额。">管理撤消表空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11476"></a><div class="props_rev_3"><a id="GUID-DC7DBC48-E2B9-48D3-A0EB-1355704390F3" name="GUID-DC7DBC48-E2B9-48D3-A0EB-1355704390F3"></a><h4 id="ADMIN-GUID-DC7DBC48-E2B9-48D3-A0EB-1355704390F3" class="sect4"><span class="enumeration_section">16.5.4</span>切换撤消表空间</h4>
                  <div>
                     <p>您可以从使用一个撤消表空间切换到另一个。由于<code class="codeph">UNDO_TABLESPACE</code>初始化参数是动态参数，因此<code class="codeph">ALTER SYSTEM SET</code>语句可用于分配新的撤消表空间。
                     </p>
                     <div class="section">
                        <p>以下语句切换到新的undo表空间：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET UNDO_TABLESPACE = undotbs_02;</pre><p>假设<code class="codeph">undotbs_01</code>是当前的undo表空间，在此命令成功执行后，实例使用<code class="codeph">undotbs_02</code>代替<code class="codeph">undotbs_01</code>作为其undo表空间。
                        </p>
                        <p>如果存在切换到的表空间存在以下任何条件，则会报告错误并且不会发生切换：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>表空间不存在</p>
                           </li>
                           <li>
                              <p>表空间不是撤消表空间</p>
                           </li>
                           <li>
                              <p>表空间已被另一个实例使用（仅在Oracle RAC环境中）</p>
                           </li>
                        </ul>
                        <p>执行切换操作时数据库处于联机状态，并且在执行此命令时可以执行用户事务。当切换操作成功完成时，在切换操作开始后启动的所有事务都将分配给新的撤消表空间中的事务表。</p>
                        <p>切换操作不会等待旧的撤消表空间中的事务提交。如果旧的撤消表空间中存在任何挂起的事务，则旧的撤消表空间将进入<code class="codeph">PENDING OFFLINE</code>模式（状态）。在此模式下，现有事务可以继续执行，但新用户事务的撤消记录不能存储在此撤消表空间中。
                        </p>
                        <p>即使在切换操作成功完成后，撤销表空间也可以在此<code class="codeph">PENDING OFFLINE</code>模式下存在。<code class="codeph">PENDING OFFLINE</code> <a id="d168466e1913" class="indexterm-anchor"></a> undo tablespace不能被其他实例使用，也不能被删除。最终，在提交所有活动事务后，撤消表空间自动从<code class="codeph">PENDING OFFLINE</code>模式进入<code class="codeph">OFFLINE</code>模式。从那时起，撤消表空间可用于其他实例（在Oracle Real Application Cluster环境中）。
                        </p>
                        <p>如果<code class="codeph">UNDO TABLESPACE</code>的参数值设置为''（两个单引号），则切换当前的撤消表空间，并切换下一个可用的撤消表空间。请谨慎使用此语句，因为可能没有可用的撤消表空间。
                        </p>
                        <p>以下示例取消分配当前的undo表空间：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET UNDO_TABLESPACE ='';</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-B994F33A-0905-4A7F-BA8C-2B76B43E8188" title="您可以通过完成创建，更改和删除任务来管理撤消表空间。您还可以切换撤消表空间并为撤消空间建立用户配额。">管理撤消表空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11477"></a><div class="props_rev_3"><a id="GUID-B9AE4692-B3C9-4481-8B13-F581BAD0FF8B" name="GUID-B9AE4692-B3C9-4481-8B13-F581BAD0FF8B"></a><h4 id="ADMIN-GUID-B9AE4692-B3C9-4481-8B13-F581BAD0FF8B" class="sect4"><span class="enumeration_section">16.5.5</span>建立撤消空间的用户配额</h4>
                  <div>
                     <p>您可以使用Oracle数据库资源管理器为撤消空间建立用户配额。数据库资源管理器指令<code class="codeph">UNDO_POOL</code>允许DBA限制一组用户（资源使用者组）消耗的撤消空间量。
                     </p>
                     <p>您可以为每个使用者组指定一个撤消池。撤消池控制消费者组可以生成的总撤消量。当消费者组生成的总撤消超过其撤消限制时，终止生成撤消的当前<code class="codeph">UPDATE</code>事务。在从池中释放撤消空间之前，任何其他成员都不能执行进一步的更新。
                     </p>
                     <p>如果未明确定义<code class="codeph">UNDO_POOL</code>指令，则允许用户使用无限制的撤消空间。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B9AE4692-B3C9-4481-8B13-F581BAD0FF8B__GUID-2566CD17-0B38-4822-9FF0-79CC71F934AC">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="managing-resources-with-oracle-database-resource-manager.html#GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" title="Oracle数据库资源管理器（资源管理器）使您可以管理数据库的资源分配。">使用Oracle数据库资源管理器管理资源</a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-B994F33A-0905-4A7F-BA8C-2B76B43E8188" title="您可以通过完成创建，更改和删除任务来管理撤消表空间。您还可以切换撤消表空间并为撤消空间建立用户配额。">管理撤消表空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11478"></a><div class="props_rev_3"><a id="GUID-981972D3-655C-42E5-B79D-17C9D6A84A2C" name="GUID-981972D3-655C-42E5-B79D-17C9D6A84A2C"></a><h4 id="ADMIN-GUID-981972D3-655C-42E5-B79D-17C9D6A84A2C" class="sect4"><span class="enumeration_section">16.5.6</span>管理撤消表空间的空间阈值警报</h4>
                  <div>
                     <p>Oracle数据库通过在表空间可用空间不足时发出警报来提供管理表空间磁盘空间的主动帮助。</p>
                     <p>有关如何为撤消表空间设置警报阈值的信息，请参阅<span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-7C425A1F-3F8F-488D-B7B8-06F432D2C070" title="默认情况下定义了两个警报阈值：警告和严重。警告阈值是空间开始低的限制。关键阈值是一个严重的限制，值得您立即关注。数据库在两个阈值处发出警报。">管理表空间警报</a> ”</span> 。
                     </p>
                     <p>除了主动撤消空间警报之外，如果您的系统具有导致<code class="codeph">SNAPSHOT</code> <code class="codeph">TOO</code> <code class="codeph">OLD</code>错误的长时间运行查询，Oracle数据库还会提供警报。为防止过多警报，长时间查询警报最多每24小时发出一次。生成警报后，您可以检查EM Express的Undo Advisor页面以获取有关撤消表空间的更多信息。有关通过EM Express使用Undo Advisor的更多信息，请参阅<a href="../admqs/managing-database-storage-structures.html#ADMQS0635" target="_blank"><span class="italic">Oracle Database 2 Day DBA</span></a> 。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-B994F33A-0905-4A7F-BA8C-2B76B43E8188" title="您可以通过完成创建，更改和删除任务来管理撤消表空间。您还可以切换撤消表空间并为撤消空间建立用户配额。">管理撤消表空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11479"></a><div class="props_rev_3"><a id="GUID-B159A41D-C28C-4E6E-BAAF-FE5ACE2C18B7" name="GUID-B159A41D-C28C-4E6E-BAAF-FE5ACE2C18B7"></a><h3 id="ADMIN-GUID-B159A41D-C28C-4E6E-BAAF-FE5ACE2C18B7" class="sect3"><span class="enumeration_section">16.6</span>迁移到自动撤消管理</h3>
               <div>
                  <p>如果您当前正在使用回滚段来管理撤消空间，Oracle强烈建议您将数据库迁移到自动撤消管理。</p>
                  <p>有关说明，请参见<a href="../upgrd/index.html" target="_blank"><span class="italic">Oracle数据库升级指南</span></a> 。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" title="对于默认安装，Oracle数据库会自动管理撤消。通常不需要DBA干预。但是，如果您的安装使用Oracle闪回操作，则可能需要执行一些撤消管理任务以确保这些操作成功。">管理撤消</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN13740"></a><div class="props_rev_3"><a id="GUID-9A6B9475-63ED-4204-93DD-2B77BEB858CE" name="GUID-9A6B9475-63ED-4204-93DD-2B77BEB858CE"></a><h3 id="ADMIN-GUID-9A6B9475-63ED-4204-93DD-2B77BEB858CE" class="sect3"><span class="enumeration_section">16.7</span>管理临时撤消</h3>
               <p>默认情况下，临时表的撤消记录存储在撤消表空间中，并以重做方式记录，这与对持久表管理撤消的方式相同。但是，您可以使用<code class="codeph">TEMP_UNDO_ENABLED</code>初始化参数将临时表的撤消与永久表的撤消分开。当此参数设置为<code class="codeph">TRUE</code> ，临时表的撤消称为<span class="bold">临时撤消</span> 。
               </p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-EB6F70B8-BC3E-4D69-991C-7DFC932009B4">关于管理临时撤消</a><br>临时撤消记录存储在数据库的临时表空间中，因此不会记录在重做日志中。启用临时撤消后，临时表空间使用的某些段会存储临时撤消，这些段称为<span class="bold">临时撤消段</span> 。
                     </li>
                     <li class="ulchildlink"><a href="managing-undo.html#GUID-73EAD58E-14D2-4DA4-A126-22401B82231A">启用和禁用临时撤消</a><br>您可以为会话或系统启用或禁用临时撤消。为此，请设置<code class="codeph">TEMP_UNDO_ENABLED</code>初始化参数。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" title="对于默认安装，Oracle数据库会自动管理撤消。通常不需要DBA干预。但是，如果您的安装使用Oracle闪回操作，则可能需要执行一些撤消管理任务以确保这些操作成功。">管理撤消</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13741"></a><div class="props_rev_3"><a id="GUID-EB6F70B8-BC3E-4D69-991C-7DFC932009B4" name="GUID-EB6F70B8-BC3E-4D69-991C-7DFC932009B4"></a><h4 id="ADMIN-GUID-EB6F70B8-BC3E-4D69-991C-7DFC932009B4" class="sect4"><span class="enumeration_section">16.7.1</span>关于管理临时撤消</h4>
                  <div>
                     <p>临时撤消记录存储在数据库的临时表空间中，因此不会记录在重做日志中。启用临时撤消后，临时表空间使用的某些段会存储临时撤消，这些段称为<span class="bold">临时撤消段</span> 。
                     </p>
                     <p>启用临时撤消后，可能需要增加临时表空间的大小以考虑撤消记录。</p>
                     <p>启用临时撤消可带来以下好处：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>临时撤消可以减少撤消表空间中存储的撤消量。</p>
                           <p>撤消表空间中的较少撤消可以导致撤消记录的更实际的撤消保留期要求。</p>
                        </li>
                        <li>
                           <p>临时撤消会减小重做日志的大小。</p>
                           <p>性能得到改善，因为重做日志中写入的数据较少，而解析重做日志记录的组件（如LogMiner）性能更好，因为要解析的重做数据较少。</p>
                        </li>
                        <li>
                           <p>临时撤消使用Oracle Active Data Guard选项对物理备用数据库中的临时表启用数据操作语言（DML）操作。但是，必须在主数据库上发出创建临时表的数据定义语言（DDL）操作。</p>
                        </li>
                     </ul>
                     <p>您可以为特定会话或整个系统启用临时撤消。使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>语句为会话启用临时撤消时，会话将创建临时撤消，而不会影响其他会话。使用<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>语句为系统启用临时撤消时，所有现有会话和新会话都会创建临时撤消。
                     </p>
                     <p>当会话第一次使用临时对象时， <code class="codeph">TEMP_UNDO_ENABLED</code>会话的其余部分设置<code class="codeph">TEMP_UNDO_ENABLED</code>初始化参数的当前值。因此，如果为会话启用了临时撤消，并且会话使用临时对象，则无法为会话禁用临时撤消。同样，如果为会话禁用临时撤消并且会话使用临时对象，则无法为会话启用临时撤消。
                     </p>
                     <p>对于具有Oracle Active Data Guard选项的物理备用数据库，默认情况下启用临时撤消。由于默认设置， <code class="codeph">TEMP_UNDO_ENABLED</code>初始化参数对具有Active Data Guard选项的物理备用数据库没有影响。
                     </p>
                     <div class="infoboxnote" id="GUID-EB6F70B8-BC3E-4D69-991C-7DFC932009B4__GUID-86317552-3F90-4450-BD63-42266580680F">
                        <p class="notep1">注意：</p>
                        <p>仅当数据库的兼容级别为12.0.0或更高时，才能启用临时撤消。</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EB6F70B8-BC3E-4D69-991C-7DFC932009B4__GUID-0F8FA54A-4C69-4DF1-B26E-419A981DC59C">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-tables.html#GUID-A48CB362-FC15-4A26-8386-906A55F6788E" title="示例说明了如何创建全局临时表。">创建一个临时表</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-undo.html#GUID-049380AF-220F-43C0-81B2-27DCD7953574" title="启用自动撤消管理时，始终存在当前的撤消保留期，这是Oracle数据库在覆盖之前尝试保留旧撤消信息的最短时间。">关于撤消保留期</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">TEMP_UNDO_ENABLED</code>初始化参数的详细信息，请<code class="codeph">TEMP_UNDO_ENABLED</code> <a href="../refrn/TEMP_UNDO_ENABLED.html#REFRN10326" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p><a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB5163" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                           </li>
                           <li>
                              <p>有关临时还原段的详细信息，请参阅<a href="../cncpt/logical-storage-structures.html#CNCPT89227" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-9A6B9475-63ED-4204-93DD-2B77BEB858CE" title="默认情况下，临时表的撤消记录存储在撤消表空间中，并以重做方式记录，这与对持久表管理撤消的方式相同。但是，您可以使用TEMP_UNDO_ENABLED初始化参数将临时表的撤消与永久表的撤消分开。当此参数设置为TRUE时，临时表的撤消称为临时撤消。">管理临时撤消</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13742"></a><div class="props_rev_3"><a id="GUID-73EAD58E-14D2-4DA4-A126-22401B82231A" name="GUID-73EAD58E-14D2-4DA4-A126-22401B82231A"></a><h4 id="ADMIN-GUID-73EAD58E-14D2-4DA4-A126-22401B82231A" class="sect4"><span class="enumeration_section">16.7.2</span>启用和禁用临时撤消</h4>
                  <div>
                     <p>您可以为会话或系统启用或禁用临时撤消。为此，请设置<code class="codeph">TEMP_UNDO_ENABLED</code>初始化参数。
                     </p>
                     <div class="section">
                        <p>要启用或禁用临时撤消：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，连接到数据库。</p>
                              <p>如果要为会话启用或禁用临时撤消，请在SQL * Plus中启动会话。</p>
                              <p>如果要为系统启用或禁用临时撤消，则以管理用户身份连接SQL * Plus中的<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>系统特权。
                              </p>
                              <p>请参见<span class="q">“ <a href="getting-started-with-database-administration.html#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle数据库包括以下组件：Oracle数据库实例（一组进程和内存）以及一组包含用户数据和系统数据的磁盘文件。">使用SQL * Plus连接到数据库</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>设置<code class="codeph">TEMP_UNDO_ENABLED</code>初始化参数：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要为会话启用临时撤消，请运行以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET TEMP_UNDO_ENABLED = TRUE;</pre></li>
                                 <li>
                                    <p>要禁用会话的临时撤消，请运行以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET TEMP_UNDO_ENABLED = FALSE;</pre></li>
                                 <li>
                                    <p>要为系统启用临时撤消，请运行以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TEMP_UNDO_ENABLED = TRUE;</pre><p>为系统启用临时撤消后，会话可以使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>语句禁用临时撤消。
                                    </p>
                                 </li>
                                 <li>
                                    <p>要禁用系统的临时撤消，请运行以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TEMP_UNDO_ENABLED = FALSE;</pre><p>在为系统禁用临时撤消后，会话可以使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>语句启用临时撤消。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>您还可以通过在服务器参数文件或文本初始化参数文件<code class="codeph">TEMP_UNDO_ENABLED</code>设置为<code class="codeph">TRUE</code>来为系统启用临时撤消。在这种情况下，除非通过<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>语句为系统禁用临时撤消或通过<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>语句禁用会话，否则所有新会话都会创建临时撤消。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-73EAD58E-14D2-4DA4-A126-22401B82231A__GUID-0E808DCA-9D2D-4320-A112-E396C6C19485">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">TEMP_UNDO_ENABLED</code>初始化参数的详细信息，请<code class="codeph">TEMP_UNDO_ENABLED</code> <a href="../refrn/TEMP_UNDO_ENABLED.html#REFRN10326" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p>有关在Oracle Data Guard环境中启用和禁用临时撤消的信息，请参阅<a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB5163" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-9A6B9475-63ED-4204-93DD-2B77BEB858CE" title="默认情况下，临时表的撤消记录存储在撤消表空间中，并以重做方式记录，这与对持久表管理撤消的方式相同。但是，您可以使用TEMP_UNDO_ENABLED初始化参数将临时表的撤消与永久表的撤消分开。当此参数设置为TRUE时，临时表的撤消称为临时撤消。">管理临时撤消</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11480"></a><div class="props_rev_3"><a id="GUID-F9B85E9D-D56A-43D2-AB52-918C0FE4D609" name="GUID-F9B85E9D-D56A-43D2-AB52-918C0FE4D609"></a><h3 id="ADMIN-GUID-F9B85E9D-D56A-43D2-AB52-918C0FE4D609" class="sect3"><span class="enumeration_section">16.8</span>撤消空间数据字典视图</h3>
               <div>
                  <p>您可以在自动撤消管理模式下查询一组视图，以获取有关撤消空间的信息。</p>
                  <div class="section">
                     <p>除了此处列出的视图外，您还可以从可用于查看表空间和数据文件信息的视图中获取信息。有关获取有关这些视图的信息的信息，请参阅<span class="q">“ <a href="managing-data-files-and-temp-files.html#GUID-8873DB8E-71AF-4793-A4F7-2694FD4E10F9" title="一组数据字典视图提供有关数据库的数据文件的有用信息。">数据文件数据字典视图</a> ”</span> 。
                     </p>
                     <p>以下动态性能视图对于获取有关撤消表空间的空间信息非常有用：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-F9B85E9D-D56A-43D2-AB52-918C0FE4D609__GUID-F6AA1748-28FB-45DB-AD00-ED0DFF7D788C">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Column 1 lists the views that are useful for obtaining information about the undo tablespace. Column 2 describes each view." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="35%" id="d168466e2561">视图</th>
                              <th align="left" valign="bottom" width="65%" id="d168466e2564">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d168466e2569" headers="d168466e2561 ">
                                 <p><code class="codeph"><a href="../refrn/V-UNDOSTAT.html#REFRN30295" target="_blank">V $ UNDOSTAT</a></code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d168466e2569 d168466e2564 ">
                                 <p>包含用于监视和调整撤消空间的统计信息。使用此视图可帮助估计当前工作负载所需的还原空间量。数据库还使用此信息来帮助调整系统中的撤消使用情况。该视图仅在自动撤消管理模式下有意义。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d168466e2580" headers="d168466e2561 ">
                                 <p><code class="codeph"><a href="../refrn/V-TEMPUNDOSTAT.html#REFRN30689" target="_blank">V $ TEMPUNDOSTAT</a></code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d168466e2580 d168466e2564 ">
                                 <p>包含用于监视和调整临时撤消空间的统计信息。使用此视图可帮助估计当前工作负载的临时表空间中所需的临时撤消空间量。数据库还使用此信息来帮助调整系统中的临时撤消使用情况。仅当启用临时撤消时，此视图才有意义。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d168466e2591" headers="d168466e2561 ">
                                 <p><code class="codeph"><a href="../refrn/V-ROLLSTAT.html#REFRN30210" target="_blank">V $ ROLLSTAT</a></code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d168466e2591 d168466e2564 ">
                                 <p>对于自动撤消管理模式，信息反映撤消表空间中撤消段的行为</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d168466e2602" headers="d168466e2561 ">
                                 <p><code class="codeph"><a href="../refrn/V-TRANSACTION.html#REFRN30291" target="_blank">V $ TRANSACTION</a></code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d168466e2602 d168466e2564 ">
                                 <p>包含还原段信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d168466e2613" headers="d168466e2561 ">
                                 <p><code class="codeph"><a href="../refrn/DBA_UNDO_EXTENTS.html#REFRN23299" target="_blank">DBA_UNDO_EXTENTS</a></code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d168466e2613 d168466e2564 ">
                                 <p>显示撤消表空间中每个范围的状态和大小。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d168466e2624" headers="d168466e2561 ">
                                 <p><code class="codeph"><a href="../refrn/DBA_HIST_UNDOSTAT.html#REFRN23460" target="_blank">DBA_HIST_UNDOSTAT</a></code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d168466e2624 d168466e2564 ">
                                 <p>包含<code class="codeph">V$UNDOSTAT</code>信息的统计快照。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">V$UNDOSTAT</code>视图对于监视事务执行对当前实例中的撤消空间的影响非常有用。统计信息可用于撤消空间消耗，事务并发，撤消保留的调整以及实例中长时间运行的查询的长度和SQL ID。
                     </p>
                     <p>视图中的每一行都包含实例中收集的统计信息，间隔为十分钟。行由<code class="codeph">BEGIN_TIME</code>列值按降序排列。每行属于标记为（ <code class="codeph">BEGIN_TIME</code> ， <code class="codeph">END_TIME</code> ）的时间间隔。每列表示在该时间间隔内为特定统计信息收集的数据。视图的第一行包含（部分）当前时间段的统计信息。该视图包含总共576行，跨越4天周期。
                     </p>
                     <p>以下示例显示了<code class="codeph">V$UNDOSTAT</code>视图上的查询结果。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT TO_CHAR（BEGIN_TIME，'MM / DD / YYYY HH24：MI：SS'）BEGIN_TIME，TO_CHAR（END_TIME，'MM / DD / YYYY HH24：MI：SS'）END_TIME，UNDOTSN，UNDOBLKS，TXNCOUNT，MAXCONCURRENCY为“MAXCON” FROM v $ UNDOSTAT WHERE rownum &lt;= 144; BEGIN_TIME END_TIME UNDOTSN UNDOBLKS TXNCOUNT MAXCON ------------------- ------------------- ------ ---- ---------- ---------- ---------- 10/28/2004 14:25:12 10/28/2004 14 ：32：17 8 74 12071108 3 10/28/2004 14:15:12 10/28/2004 14:25:12 8 49 12070698 2 10/28/2004 14:05:12 10/28/2004 14:15 ：12 8 125 12070220 1 10/28/2004 13:55:12 10/28/2004 14:05:12 8 99 12066511 3 ...4/27/2004 14:45:12 10/27/2004 14:55:12 8 15 11831676 1 10/27/2004 14:35:12 10/27/2004 14:45:12 8 154 11831165 2 144行选择。
</pre><p>上面的示例显示了自2004年10月27日14:35:12之后24小时内系统中的撤消空间消耗情况。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-undo.html#GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" title="对于默认安装，Oracle数据库会自动管理撤消。通常不需要DBA干预。但是，如果您的安装使用Oracle闪回操作，则可能需要执行一些撤消管理任务以确保这些操作成功。">管理撤消</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>解决随时间推移的性能下降问题</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-2-day-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:50:24-08:00"></meta>
      <meta name="dcterms.title" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96346-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="resolving-transient-performance-problems.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-automatic-workload-repository-warehouse.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TDPPT"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="resolving-transient-performance-problems.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-automatic-workload-repository-warehouse.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库2天+性能调整指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-III-reactive-database-tuning.html" property="item" typeof="WebPage"><span property="name">反应性数据库调整</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">解决随时间推移的性能下降问题</li>
            </ol>
            <a id="GUID-71C2B1BD-6906-47B0-9FF5-BD3268F0C7C8" name="GUID-71C2B1BD-6906-47B0-9FF5-BD3268F0C7C8"></a><a id="TDPPT089"></a>
            
            <h2 id="TDPPT-GUID-71C2B1BD-6906-47B0-9FF5-BD3268F0C7C8" class="sect2"><span class="enumeration_chapter">9</span>随着时间的推移解决性能下降问题</h2>
         </header>
         <div class="ind">
            <div>
               <p>当您的数据库在过去（例如6个月前）以最佳状态执行时，数据库的性能下降会发生，但会逐渐降级到用户可能会注意到的程度。该<a id="d17088e80" class="indexterm-anchor"></a><a id="d17088e86" class="indexterm-anchor"></a><a id="d17088e90" class="indexterm-anchor"></a><a id="d17088e94" class="indexterm-anchor"></a>自动工作负载存储库（AWR）比较期间报告使您可以比较两个时间段之间的数据库性能。
               </p>
               <p>虽然AWR报告显示两个快照（或两个时间点）之间的AWR数据，但AWR比较周期报告显示两个周期（或两个AWR报告，总共四个快照）之间的差异。使用AWR比较期间报告可帮助您识别两个时间段之间不同的详细性能属性和配置设置。为AWR比较期间报告选择的两个时间段可以具有不同的持续时间。该报告通过每个时间段在数据库上花费的时间量来统计统计数据，并显示按周期之间的最大差异排序的统计数据。</p>
               <p>例如，历史上在晚上10点到午夜之间在维护窗口中完成的批处理工作负载当前显示性能不佳并且在凌晨2点完成。您可以在性能当天的晚上10点到午夜生成AWR比较期间报告表现不佳，从上午10点到凌晨2点表现不错。这些报告的比较应确定这两个时间段内不同的配置设置，工作负载配置文件和统计信息。根据确定的差异，您可以诊断性能下降的原因。</p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="resolving-performance-degradation-over-time.html#GUID-37F8C7A8-241D-4F9D-A120-24DED3A7BFA0">管理基准</a></p>
                  </li>
                  <li>
                     <p><a href="resolving-performance-degradation-over-time.html#GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486">运行AWR比较期间报告</a></p>
                  </li>
                  <li>
                     <p><a href="resolving-performance-degradation-over-time.html#GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313">使用AWR比较期间报告</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-71C2B1BD-6906-47B0-9FF5-BD3268F0C7C8__GUID-5F4F94BC-A6AA-4906-B67A-626F758BE1A6">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="oracle-database-performance-method.html#GUID-811C438C-149B-4BFE-A40A-1FAF2BF67C95">使用自动工作负载存储库收集数据库统计信息</a> ”</span></p>
                     </li>
                  </ul>
               </div>
            </div><a id="TDPPT230"></a><div class="props_rev_3"><a id="GUID-37F8C7A8-241D-4F9D-A120-24DED3A7BFA0" name="GUID-37F8C7A8-241D-4F9D-A120-24DED3A7BFA0"></a><h3 id="TDPPT-GUID-37F8C7A8-241D-4F9D-A120-24DED3A7BFA0" class="sect3"><span class="enumeration_section">9.1</span>管理基线</h3>
               <div>
                  <p>基线<a id="d17088e211" class="indexterm-anchor"></a><a id="d17088e215" class="indexterm-anchor"></a>是诊断性能问题的有效方法。AWR <a id="d17088e220" class="indexterm-anchor"></a>通过使您能够指定和保留一对或一系列快照作为基线，支持捕获基线数据。基线中包含的快照将从自动AWR清除过程中排除，并将无限期保留。
                  </p>
                  <p>移动窗口基线对应于AWR保留期内存在的所有AWR数据。Oracle数据库自动维护系统定义的移动窗口基线。窗口的默认大小是当前AWR保留期，默认为8天。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-A4600C0D-286F-4B0C-9397-ACEA363E1EF8">创建基线</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-11A9CFFC-CBD1-47FF-904D-03B003C21A2E">删除基线</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C">计算基线的阈值统计</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-2831079F-326B-4F10-8B4F-D90DC0FDE270">设置基准的度量标准阈值</a></p>
                     </li>
                  </ul>
               </div><a id="TDPPT231"></a><div class="props_rev_3"><a id="GUID-A4600C0D-286F-4B0C-9397-ACEA363E1EF8" name="GUID-A4600C0D-286F-4B0C-9397-ACEA363E1EF8"></a><h4 id="TDPPT-GUID-A4600C0D-286F-4B0C-9397-ACEA363E1EF8" class="sect4"><span class="enumeration_section">9.1.1</span>创建基线</h4>
                  <div>
                     <p><a id="d17088e331" class="indexterm-anchor"></a>在创建基线之前，请仔细考虑您选择的基准时间段，因为它应表示数据库在最佳级别运行。将来，您可以将这些基准与在性能不佳期间捕获的其他基准或快照进行比较，以分析性能随时间的降低。
                     </p>
                     <p>您可以创建以下类型的基线：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-DD973799-98E7-446C-AACA-7A185666D81E">创建单个基线</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C">创建重复基线</a></p>
                        </li>
                     </ul>
                  </div><a id="TDPPT232"></a><div class="props_rev_3"><a id="GUID-DD973799-98E7-446C-AACA-7A185666D81E" name="GUID-DD973799-98E7-446C-AACA-7A185666D81E"></a><h5 id="TDPPT-GUID-DD973799-98E7-446C-AACA-7A185666D81E" class="sect5"><span class="enumeration_section">9.1.1.1</span>创建单个基准</h5>
                     <div>
                        <div class="section">
                           <p>在单个固定时间间隔捕获单个基线。例如，可以在2012年2月5日下午5:00到晚上8:00捕获单个基线</p>
                           <p>您可以选择将来的开始和结束时间来创建捕获未来数据库活动的基准。如果开始时间和结束时间都在将来，则还会创建与基线同名的基线模板。一个<a id="d17088e434" class="indexterm-anchor"></a>基准模板是一种规范，它使Oracle数据库能够自动生成未来时间段的基准。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-F8E86AB7-09EB-4DE0-9A41-F60D43C8C6B8">要创建单个基线：</p>
                           <ol>
                              <li>
                                 <p>访问数据库主页。</p>
                                 <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>从<span class="bold">Performance</span>菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">AWR Administration</span> 。
                                 </p>
                                 <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将出现“性能”页面。</p>
                              </li>
                              <li>
                                 <p>在“管理快照和基准”下，单击“基准”旁边的数字。</p>
                                 <p>将显示“AWR基准”页面，其中显示了现有基准的列表。</p>
                                 <div class="figure" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-C4CEFDE0-AE9A-4088-8978-0880D9AC418B"><img src="img/awr_baselines.gif" alt="awr_baselines.gif的描述如下" title="awr_baselines.gif的描述如下" longdesc="img_text/awr_baselines.html"><br><a href="img_text/awr_baselines.html">说明awr_baselines.gif的描述</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">创建”</span>
                                 </p>
                                 <p>将显示“创建基准：基线间隔类型”页面。</p>
                              </li>
                              <li>
                                 <p>选择<span class="bold">单一</span> 。
                                 </p>
                                 <div class="figure" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-0FB4482F-C156-4FB8-8B07-555A1270ABD4"><img src="img/baseline_interval_single.gif" alt="baseline_interval_single.gif的描述如下" title="baseline_interval_single.gif的描述如下" longdesc="img_text/baseline_interval_single.html"><br><a href="img_text/baseline_interval_single.html">插图描述baseline_interval_single.gif</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>单击<span class="bold">继续</span> 。
                                 </p>
                                 <p>将出现“创建基准：单基线”页面。</p>
                                 <div class="figure" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-823BEF04-26A0-4548-A7E8-10E79FD8C4C7"><img src="img/create_baseline_single.gif" alt="下面是create_baseline_single.gif的描述" title="下面是create_baseline_single.gif的描述" longdesc="img_text/create_baseline_single.html"><br><a href="img_text/create_baseline_single.html">插图描述create_baseline_single.gif</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>在“ <span class="bold">基准名称”</span>字段中，输入<span class="bold">基准的名称</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“基准时间间隔”下，选择是使用基准的快照范围还是时间范围。执行以下操作之一：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>要使用范围，请选择“ <span class="bold">快照范围”</span> 。完成以下步骤：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>在“选择时间段”下，通过选择“ <span class="bold">期间开始时间”</span>和“活动会话”图表下方与所需开始时间对应的快照图标，选择基准的开始时间。
                                             </p>
                                          </li>
                                          <li>
                                             <p>通过选择“ <span class="bold">期末结束时间”</span>和“活动会话”图表下方与所需结束时间对应的快照图标，选择基准的结束时间。
                                             </p>
                                          </li>
                                          <li>
                                             <p>（可选）要查看未在“活动会话”图表下方显示的较旧快照，请展开“ <span class="bold">更改图表时间段”</span> 。在“ <span class="bold">图表开始日期”</span>字段中输入所需的开始日期，在“ <span class="bold">结束日期”</span>字段中输入所需的结束日期，然后单击<span class="bold">“执行”</span> 。</p>
                                          </li>
                                       </ul>
                                       <p>在此示例中，选择了2012年2月7日上午10:50到11:20的快照范围。</p>
                                       <div class="figure" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-2AE1C3F9-3C70-4B28-8C79-C1A422A17757"><img src="img/baseline_snapshot_range.gif" alt="baseline_snapshot_range.gif的描述如下" title="baseline_snapshot_range.gif的描述如下" longdesc="img_text/baseline_snapshot_range.html"><br><a href="img_text/baseline_snapshot_range.html">插图描述baseline_snapshot_range.gif</a></div>
                                       <!-- class="figure" -->
                                    </li>
                                    <li>
                                       <p>要使用时间范围，请选择<span class="bold">时间范围</span> 。完成以下步骤：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>在“ <span class="bold">开始时间”</span>字段中，选择基准的开始时间。
                                             </p>
                                          </li>
                                          <li>
                                             <p>在“ <span class="bold">结束时间”</span>字段中，选择基准的结束时间。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>在以下示例中，选择2012年2月7日下午12:20至下午12:35的时间范围。</p>
                                       <div class="figure" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-94337892-A02B-4C83-9047-C51ED8EA8CE6"><img src="img/create_baseline_time_range.gif" alt="下面是create_baseline_time_range.gif的描述" title="下面是create_baseline_time_range.gif的描述" longdesc="img_text/create_baseline_time_range.html"><br><a href="img_text/create_baseline_time_range.html">说明create_baseline_time_range.gif的说明</a></div>
                                       <!-- class="figure" -->
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>单击<span class="bold">完成</span> 。
                                 </p>
                                 <p>AWR Baselines页面重新出现，显示新创建的基线。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TDPPT233"></a><div class="props_rev_3"><a id="GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C" name="GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C"></a><h5 id="TDPPT-GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C" class="sect5"><span class="enumeration_section">9.1.1.2</span>创建重复基线</h5>
                     <div>
                        <div class="section">
                           <p>重复基线是在特定时间段内的时间间隔内重复的基线。例如，重复基线可以在2012年2月7日至2013年2月7日的每个星期一下午1:00至3:00重复。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C__GUID-584FD55E-172D-41CC-9341-D45CD72DBF45">要创建重复基线：</p>
                           <ol>
                              <li>
                                 <p>访问“AWR基线”页面，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-DD973799-98E7-446C-AACA-7A185666D81E">创建单个基线</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">创建”</span>
                                 </p>
                                 <p>将显示“创建基准：基线间隔类型”页面。</p>
                              </li>
                              <li>
                                 <p>选择“ <span class="bold">重复”</span> ，然后单击“ <span class="bold">继续”</span> 。
                                 </p>
                                 <p>将出现“创建基准：重复基准模板”页面。</p>
                              </li>
                              <li>
                                 <p>在“ <span class="bold">基准名称前缀”</span>字段中，输入<span class="bold">基准的名称前缀</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“基准时间段”下，指定希望基准开始收集AWR数据的时间和基准收集的持续时间。</p>
                              </li>
                              <li>
                                 <p>在“频率”下，执行以下操作之一：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果您希望每天重复基线，请选择<span class="bold">每日</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果你想基线重复每周选择<span class="bold">每周</span> ，然后选择要在其基线重复星期几。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>在基线创建间隔下，完成以下步骤：</p>
                                 <ol type="a">
                                    <li>
                                       <p>在“ <span class="bold">开始时间”</span>字段中，选择数据收集开始时的日期和时间。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“ <span class="bold">结束时间”</span>字段中，选择数据收集结束时的日期和时间。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在“清除策略”下，输入保留捕获的基准的天数。</p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">完成</span> 。
                                 </p>
                                 <p>将创建与基线名称前缀同名的基准模板。一个<a id="d17088e752" class="indexterm-anchor"></a>基准模板是一种规范，它使Oracle数据库能够自动生成未来时间段的基准。
                                 </p>
                                 <p>此示例创建一个基线，该基线每周一次从2009年2月6日上午8:00到10:00再到2010年2月6日重复。每个捕获的基线在30天后到期。</p>
                                 <div class="figure" id="GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C__GUID-769EFDDA-2C77-494F-9CAC-A74FD8280436"><img src="img/create_baseline_repeating.gif" alt="下面是create_baseline_repeating.gif的描述" title="下面是create_baseline_repeating.gif的描述" longdesc="img_text/create_baseline_repeating.html"><br><a href="img_text/create_baseline_repeating.html">插图描述create_baseline_repeating.gif</a></div>
                                 <!-- class="figure" -->
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TDPPT234"></a><div class="props_rev_3"><a id="GUID-11A9CFFC-CBD1-47FF-904D-03B003C21A2E" name="GUID-11A9CFFC-CBD1-47FF-904D-03B003C21A2E"></a><h4 id="TDPPT-GUID-11A9CFFC-CBD1-47FF-904D-03B003C21A2E" class="sect4"><span class="enumeration_section">9.1.2</span>删除基线</h4>
                  <div>
                     <div class="section">
                        <p><a id="d17088e846" class="indexterm-anchor"></a>要节省存储空间，您可能需要定期删除存储在数据库中的未使用的基准。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-11A9CFFC-CBD1-47FF-904D-03B003C21A2E__GUID-3B611C9D-470B-4AFB-A568-1BCF9C65B340">删除基线：</p>
                        <ol>
                           <li>
                              <p>访问“AWR基线”页面，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-DD973799-98E7-446C-AACA-7A185666D81E">创建单个基线</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>选择基准，然后单击“ <span class="bold">删除”</span> 。
                              </p>
                              <p>将出现“确认”页面。</p>
                           </li>
                           <li>
                              <p>选择是否清除与基线关联的基础数据。</p>
                              <p>基础数据包括基线中保留的各个快照以及为基准计算的任何统计信息。执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要删除基础数据，请选择“ <span class="bold">清除与基准关联的基础数据”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>要保留基础数据，请选择<span class="bold">“不清除与基准关联的基础数据”</span> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>单击<span class="bold">是</span> 。
                              </p>
                              <p>AWR Baselines页面重新出现。将显示一条消息，通知您已成功删除基线。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT235"></a><div class="props_rev_3"><a id="GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C" name="GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C"></a><h4 id="TDPPT-GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C" class="sect4"><span class="enumeration_section">9.1.3</span>计算基线的阈值统计信息</h4>
                  <div>
                     <div class="section">
                        <p><a id="d17088e980" class="indexterm-anchor"></a>通过计算基线的阈值统计信息，您可以在“性能”页面的图表中以图形方式显示计算的统计数据。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C__GUID-5B8B2F29-529E-496A-B55B-9BCB7F84C25F">要计算基线的阈值统计信息：</p>
                        <ol>
                           <li>
                              <p>访问“AWR基线”页面，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-DD973799-98E7-446C-AACA-7A185666D81E">创建单个基线</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>选择要为其计算统计信息的基准。</p>
                              <p>选择尚未具有计算统计数据的基线。这些基线在Statistics Computed列中由No标识。</p>
                           </li>
                           <li>
                              <p>从“操作”列表中，选择“ <span class="bold">计划统计计算”</span> ，然后单击<span class="bold">“执行”</span> 。</p>
                              <p>将出现“计算阈值统计信息”页面。</p>
                              <p>此示例计算基线<code class="codeph">BASELINE_TUE_1120</code>统计信息。
                              </p>
                              <div class="figure" id="GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C__GUID-8B2F1E31-856D-4CF9-B098-CE502AE795DE"><img src="img/compute_threshold_stats.gif" alt="compute_threshold_stats.gif的描述如下" title="compute_threshold_stats.gif的描述如下" longdesc="img_text/compute_threshold_stats.html"><br><a href="img_text/compute_threshold_stats.html">说明compute_threshold_stats.gif的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“ <span class="bold">名称”</span>字段中，输入任务的名称。
                              </p>
                              <p>或者，您可以选择使用系统生成的名称。</p>
                           </li>
                           <li>
                              <p>在“ <span class="bold">描述”</span>字段中，输入任务的描述。
                              </p>
                              <p>或者，您可以选择使用系统生成的描述。</p>
                           </li>
                           <li>
                              <p>在“开始”下，执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>选择<span class="bold">立即</span>以在提交任务后<span class="bold">立即</span>运行任务。
                                    </p>
                                 </li>
                                 <li>
                                    <p>选择“ <span class="bold">稍后”</span>以使用“日期和时间”字段在以后指定的时间运行任务。
                                    </p>
                                 </li>
                              </ul>
                              <p>此计算是资源密集型的，因此您可能希望将其安排在非高峰时段运行。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">提交”</span>
                              </p>
                              <p>将显示“AWR基准”页面。将显示一条消息，通知您已为所选基准安排了统计计算。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C__GUID-6586D6A8-2066-4732-95C1-D297110E019B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-81073595-A0B0-474C-937B-376B58D7C414">自定义数据库性能页面</a> ”，</span>以获取有关在“性能”页面上显示计算统计信息的信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT332"></a><div class="props_rev_3"><a id="GUID-2831079F-326B-4F10-8B4F-D90DC0FDE270" name="GUID-2831079F-326B-4F10-8B4F-D90DC0FDE270"></a><h4 id="TDPPT-GUID-2831079F-326B-4F10-8B4F-D90DC0FDE270" class="sect4"><span class="enumeration_section">9.1.4</span>设置基线的度量阈值</h4>
                  <div>
                     <p>如<span class="q">“ <a href="monitoring-performance-alerts.html#GUID-E4359985-FDE3-4083-AC4F-09E711B0E4B9">为性能警报设置度量标准阈值</a> ”中所述</span> ，a <a id="d17088e1160" class="indexterm-anchor"></a> metric是累积统计量的变化率。警报会在超过特定指标阈值时通知您。当超过度量阈值时，系统处于不合需要的状态。您可以编辑基准指标的阈值设置。
                     </p>
                     <p>您可以创建以下类型的基线：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-FC994193-0397-44D2-87DB-32D222E9EFD9">设置默认移动基线的度量标准阈值</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F">设置所选基准的度量标准阈值</a></p>
                        </li>
                     </ul>
                  </div><a id="TDPPT333"></a><div class="props_rev_3"><a id="GUID-FC994193-0397-44D2-87DB-32D222E9EFD9" name="GUID-FC994193-0397-44D2-87DB-32D222E9EFD9"></a><h5 id="TDPPT-GUID-FC994193-0397-44D2-87DB-32D222E9EFD9" class="sect5"><span class="enumeration_section">9.1.4.1</span>设置默认移动基线的度量阈值</h5>
                     <div>
                        <div class="section">
                           <p>本节介绍了为默认移动基线设置度量标准阈值的最简单方法。您可以根据常见的数据库工作负载配置文件（如OLTP，数据仓库和OLTP以及夜间批处理作业）选择一组基本度量标准阈值设置。选择工作负载配置文件后，您可以根据需要扩展或更改阈值。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-FC994193-0397-44D2-87DB-32D222E9EFD9__GUID-CC436CB8-6F6A-47D6-828A-6F07182526AC">要为默认移动基线设置度量标准阈值：</p>
                           <ol>
                              <li>
                                 <p>访问数据库主页。</p>
                                 <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>从“ <span class="bold">性能”</span>菜单中，选择“ <span class="bold">自适应阈值”</span> 。
                                 </p>
                                 <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。</p>
                                 <p>将显示“基准度量标准阈值”页面的“阈值配置”选项卡。</p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">快速配置</span> 。
                                 </p>
                                 <p>将显示“快速配置：基准度量标准阈值”页面。</p>
                              </li>
                              <li>
                                 <p>在<span class="bold">Workload Profile中</span> ，根据您使用数据库的方式选择以下选项之一：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="bold">主要是OLTP（一天24小时纯处理）</span></p>
                                    </li>
                                    <li>
                                       <p><span class="bold">主要是数据仓库（查询和负载密集型）</span></p>
                                    </li>
                                    <li>
                                       <p><span class="bold">交替（白天OLTP和夜间批处理）</span></p>
                                    </li>
                                 </ul>
                                 <p>在此示例中，选择了<span class="bold">主要OLTP</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">继续</span> 。
                                 </p>
                                 <p>将显示“快速配置：查看OLTP阈值设置”页面。</p>
                                 <div class="figure" id="GUID-FC994193-0397-44D2-87DB-32D222E9EFD9__GUID-21CE67EB-B766-4FF5-847F-90A7260D44A8"><img src="img/threshold_quick.gif" alt="threshold_quick.gif的描述如下" title="threshold_quick.gif的描述如下" longdesc="img_text/threshold_quick.html"><br><a href="img_text/threshold_quick.html">说明threshold_quick.gif的描述</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>查看度量标准阈值设置，然后单击“ <span class="bold">完成”</span> 。
                                 </p>
                                 <p>您将返回“基准度量标准阈值”页面，并选中“阈值配置”选项卡。将显示度量标准阈值设置。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TDPPT334"></a><div class="props_rev_3"><a id="GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F" name="GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F"></a><h5 id="TDPPT-GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F" class="sect5"><span class="enumeration_section">9.1.4.2</span>设置所选基准的度量标准阈值</h5>
                     <div>
                        <div class="section">
                           <p>本节介绍如何选择基准并编辑其阈值。您可以配置阈值类型，例如，它是基于显着性级别，最大值百分比还是固定值。您还可以配置阈值级别，以确定数据库何时生成严重警报和警告。</p>
                           <p>您可以编辑默认移动基线的阈值或您在AWR基线页面中创建的基线。从AWR Baselines页面调度统计计算后，您可以在Edit Thresholds页面中选择基线，并且统计数据已在静态基线上完成计算。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F__GUID-0ED294DD-0043-4BE8-BE05-FFF02EC8535F">要为选定的移动基线设置度量标准阈值：</p>
                           <ol>
                              <li>
                                 <p>访问“基准度量标准阈值”页面，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-FC994193-0397-44D2-87DB-32D222E9EFD9">设置默认移动基准的度量标准阈值</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“视图”列表中，选择“ <span class="bold">基本度量标准”</span> 。
                                 </p>
                                 <p>将显示“基准度量标准阈值”页面。</p>
                              </li>
                              <li>
                                 <p>在“ <span class="bold">类别/名称”</span>列中，单击要设置或更改其阈值的度量标准的链接。
                                 </p>
                                 <p>例如，单击<span class="bold">“事务数”（每秒）</span> 。
                                 </p>
                                 <p>将显示“编辑阈值：事务数（每秒）”。</p>
                                 <div class="figure" id="GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F__GUID-C3AF6895-568A-4143-BF3E-5EC88A1CBEE1"><img src="img/edit_thresholds.gif" alt="edit_thresholds.gif的描述如下" title="edit_thresholds.gif的描述如下" longdesc="img_text/edit_thresholds.html"><br><a href="img_text/edit_thresholds.html">插图描述edit_thresholds.gif</a></div>
                                 <!-- class="figure" -->
                                 <p>此页面上的图表提供了24小时内度量标准活动的简单而详细的视图。在顶部简单图表中，单击一天以查看针对24小时周期绘制的指标值。</p>
                              </li>
                              <li>
                                 <p>在<span class="bold">AWR Baseline</span>下的Name列表中，选择默认的<span class="bold">SYSTEM_MOVING_WINDOW</span>或AWR Baselines页面中创建的基线的名称。
                                 </p>
                                 <p>从AWR基线页面调度统计计算并且统计信息已在静态基线上完成计算后，AWR基线列表中将显示基线。</p>
                                 <p>在此示例中，选择了<code class="codeph">BASELINE_TUE_1120</code> 。
                                 </p>
                                 <p>页面刷新以显示您选择的基线的图表。</p>
                              </li>
                              <li>
                                 <p>在“阈值设置”部分中，完成以下步骤以更改设置：</p>
                                 <ol type="a">
                                    <li>
                                       <p>在“ <span class="bold">阈值类型”</span>列表中，选择一种类型。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“ <span class="bold">关键”</span>列表中，选择一个级别。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“ <span class="bold">警告”</span>列表中，选择一个值。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“ <span class="bold">出现次数”</span>列表中，选择一个值。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">应用阈值”</span> 。
                                 </p>
                                 <p>“基准度量标准阈值”页面重新出现。该页面显示已更改的度量标准阈值设置。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="TDPPT091"></a><div class="props_rev_3"><a id="GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486" name="GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486"></a><h3 id="TDPPT-GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486" class="sect3"><span class="enumeration_section">9.2</span>运行AWR比较周期报告</h3>
               <div>
                  <p>本节介绍如何使用企业管理器云控制（云控制）运行AWR比较期间报告。</p>
                  <p>您可以使用AWR比较期间报告来比较两个时间段之间的数据库性能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3">比较基线与另一个基线或一对快照</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-E03E4B6C-11C5-48E0-8078-25C9D9AB6684">比较当前系统性能与基准期</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB">比较两对快照</a></p>
                     </li>
                  </ul>
               </div><a id="TDPPT137"></a><div class="props_rev_3"><a id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3" name="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3"></a><h4 id="TDPPT-GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3" class="sect4"><span class="enumeration_section">9.2.1</span>比较基线与另一个基线或一对快照</h4>
                  <div>
                     <div class="section">
                        <p>当性能下降时，您可以运行AWR比较周期报告，将作为新基线或一对快照捕获的性能下降的性能与现有基准进行比较。您必须具有表示系统以最佳级别运行的基线。如果现有基线不可用，则使用两对任意快照比较两个时间段之间的数据库性能，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB">比较两对快照</a> ”中所述</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-837EBBD0-8E92-4289-A279-434364DCC283">要将基线与另一个基线进行比较：</p>
                        <ol>
                           <li>
                              <p>访问数据库主页。</p>
                              <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>从<span class="bold">Performance</span>菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">AWR Administration</span> 。
                              </p>
                              <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将显示“自动工作负载存储库”页面。</p>
                              <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-5ABF653D-AB8E-49E2-B8AD-223B5D9AB928"><img src="img/awr1.gif" alt="awr1.gif的描述如下" title="awr1.gif的描述如下" longdesc="img_text/awr1.html"><br><a href="img_text/awr1.html">说明awr1.gif的描述</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“管理快照和基准”下，单击“基准”旁边的链接。</p>
                              <p>将显示“AWR基准”页面。</p>
                           </li>
                           <li>
                              <p>完成以下步骤：</p>
                              <ol type="a">
                                 <li>
                                    <p>选择要用于报告的基准。</p>
                                    <p>必须至少有一个现有基线可用。</p>
                                 </li>
                                 <li>
                                    <p>从Actions列表中，选择<span class="bold">Compare Periods</span> ，然后单击<span class="bold">Go</span> 。</p>
                                 </li>
                              </ol>
                              <p>将显示“比较期间：第二期开始”页面。在第一个时间段下，将显示所选基线。</p>
                              <p>在此示例中，选择了名为<code class="codeph">BASELINE_TUE_1120</code>的基线。
                              </p>
                              <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-4F56AFD6-C640-4309-A601-55228150329F"><img src="img/baseline_first_period.gif" alt="下面是baseline_first_period.gif的描述" title="下面是baseline_first_period.gif的描述" longdesc="img_text/baseline_first_period.html"><br><a href="img_text/baseline_first_period.html">插图描述baseline_first_period.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>将在第一个时间段中选择的基线与另一个基线或一对快照进行比较。执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要与其他基准进行比较，请选择“ <span class="bold">选择基准”</span>和要在第二个时间段内使用的基准，然后单击“ <span class="bold">下一步”</span> 。
                                    </p>
                                    <p>将显示“比较期间：审阅”页面。转到第<a href="resolving-performance-degradation-over-time.html#GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__CACEFBFG">7</a>步。
                                    </p>
                                 </li>
                                 <li>
                                    <p>要与一对快照进行比较，请选择“ <span class="bold">选择开始快照”</span>和要在第二个时间段内使用的开始快照，然后单击“ <span class="bold">下一步”</span> 。
                                    </p>
                                    <p>该示例选择在2012年2月7日下午1:00拍摄的快照18</p>
                                    <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-0CE0C607-DB0E-427B-AE65-1EBC8F0F4CBE"><img src="img/awr_snapshot2_begin2.gif" alt="下面是awr_snapshot2_begin2.gif的描述" title="下面是awr_snapshot2_begin2.gif的描述" longdesc="img_text/awr_snapshot2_begin2.html"><br><a href="img_text/awr_snapshot2_begin2.html">说明描述awr_snapshot2_begin2.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>比较期间：第二期结束出现。继续下一步。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>选择要包含在报告中的快照周期的结束快照，然后单击“ <span class="bold">下一步”</span> 。
                              </p>
                              <p>在该示例中，选择了在2009年2月7日下午12:50拍摄的快照1500。</p>
                              <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-B1F609C0-E9AB-4B8D-9DC9-CAE181186457"><img src="img/awr_snapshot2_end2.gif" alt="下面是awr_snapshot2_end2.gif的描述" title="下面是awr_snapshot2_end2.gif的描述" longdesc="img_text/awr_snapshot2_end2.html"><br><a href="img_text/awr_snapshot2_end2.html">说明描述awr_snapshot2_end2.gif</a></div>
                              <!-- class="figure" -->
                              <p>将显示“比较期间：审阅”页面。</p>
                              <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-FF877072-DC64-42E3-A175-CDD1BE2523F9"><img src="img/awr2_review.gif" alt="下面是awr2_review.gif的描述" title="下面是awr2_review.gif的描述" longdesc="img_text/awr2_review.html"><br><a href="img_text/awr2_review.html">说明awr2_review.gif的描述</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__CACEFBFG">
                              <p>查看要包含在报告中的期间，然后单击“ <span class="bold">完成”</span> 。
                              </p>
                              <p>将显示“比较期间：结果”页面。</p>
                              <p>所选期间的数据显示在“ <span>常规”</span>子页面下。您可以通过从“查看数据”列表中选择一个选项来查看每秒或每个事务的数据。
                              </p>
                              <div class="infoboxnote" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-9BB435F1-314E-4DF3-9F74-45A7758892EA">
                                 <p class="notep1">注意：</p>
                                 <p>如果时间段具有不同的长度，则在计算差异之前将数据在数据库时间上归一化，以便可以比较不同长度的时段。</p>
                              </div>
                              <p>在此示例中，几乎每个度量标准都显示在第一个时间段内消耗了更多资源。条形图表示两个时期中值的比例。没有条表示等价值。此示例的报告显示每秒显着更多的数据库块更改，并在第一个时间段中解析时间而不是在第二个时间段中。</p>
                              <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-DFF0AA14-E62D-4A71-9FB2-02359FAF001C"><img src="img/awr2_results_general.gif" alt="下面是awr2_results_general.gif的描述" title="下面是awr2_results_general.gif的描述" longdesc="img_text/awr2_results_general.html"><br><a href="img_text/awr2_results_general.html">说明描述awr2_results_general.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>单击<span class="bold">“报告”</span>以查看报告。
                              </p>
                              <p>生成报告时，将显示“处理：查看报告”页面。完成后，将显示报告。</p>
                           </li>
                           <li>
                              <p>（可选）执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要更改期间，请单击“ <span class="bold">更改期间”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>将报告另存为HTML文件<a id="d17088e1871" class="indexterm-anchor"></a> ，单击“ <span class="bold">保存到文件”</span> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-97B32061-3B4F-4D72-8161-8CF773CFD6A8">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-A4600C0D-286F-4B0C-9397-ACEA363E1EF8">创建基线</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313">使用AWR比较期间报告</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT525"></a><div class="props_rev_3"><a id="GUID-E03E4B6C-11C5-48E0-8078-25C9D9AB6684" name="GUID-E03E4B6C-11C5-48E0-8078-25C9D9AB6684"></a><h4 id="TDPPT-GUID-E03E4B6C-11C5-48E0-8078-25C9D9AB6684" class="sect4"><span class="enumeration_section">9.2.2</span>将当前系统性能与基准周期进行比较</h4>
                  <div>
                     <div class="section">
                        <p><a id="d17088e1978" class="indexterm-anchor"></a>您可能已经注意到生产系统上的性能变化，并且想知道原因，或者您可能已经实现了对生产系统的更改，并希望了解更改的效果，例如增加的并发等待。
                        </p>
                        <p>比较周期ADDM在两个时间段内比较数据库服务器的性能，并返回描述性能更改和更改根源的报告。Advisor可以分析由Cloud Control监控的任何Oracle RDBMS版本10.2.0.4或更高版本。以下过程说明如何从比较期间ADDM启动报告。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>从Performance菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">Period Period ADDM</span> 。</span></li>
                        <li class="stepexpand"><span>从“运行比较期间ADDM”页面，指定所需的比较和基期：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">比较期</span> - 通常表示不正常运行的时间段。但是，您也可以使用顾问程序来了解与早期时间段相比，现在性能有何提高。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">基期</span> - 表示数据库正常运行的已知（基线或参考）期间。您应该选择性能可接受的基准期，并且工作负载尽可能相似或相同。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">“运行”</span>以显示“数据库比较期间报告”</span></li>
                        <li class="stepexpand"><span>检查报告的各个部分，以了解两个时期之间的性能变化以及更改的原因：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">概观</span></p>
                                    <p>报告的这一部分显示了SQL通用性，它是基于两个时段共有的SQL语句的平均资源消耗的基本和比较时段之间的可比性。</p>
                                    <p>通用性值100％表示两个时间段中的工作负载“签名”相同。值为0％表示两个时间段没有特定工作负载维度的共同项。</p>
                                    <p>公共性基于输入类型（即SQL正在执行）以及执行SQL语句的负载。因此，仅在一个时间段内运行但不消耗大量时间的SQL语句不会影响通用性。因此，即使某些SQL语句仅在两个句点之一中运行，两个工作负载也可以具有100％的通用性，前提是这些SQL语句不会消耗大量资源。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">组态</span></p>
                                    <p>显示的信息显示按实例，主机和数据库分类的各种参数的基本周期和比较周期值。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">发现</span></p>
                                    <p>调查结果可以显示性能改进，并确定系统更改导致的主要性能差异。对于消极结果，如果您了解并消除原因，可以消除负面结果。</p>
                                    <p>基准期和比较期显示的值表示与数据库时间有关的性能。</p>
                                    <p>变更影响值表示从一个时间段到另一个时间段的性能变化规模的度量。它适用于按每个时间段消耗的总数据库时间来衡量的问题或项目。绝对值按降序排序。</p>
                                    <p>如果值为正，则发生改善，如果值为负，则发生回归。例如，-200％的变化影响意味着期间2是期间1的三倍。</p>
                                    <p>您可以运行性能调整工具（如ADDM和SQL Tuning Advisor）来修复比较期间的问题，以提高一般系统性能。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">资源</span></p>
                                    <p>此处显示的信息提供了两个时间段的数据库时间划分的摘要，并显示了CPU，内存，I / O和互连的资源使用情况（仅限Oracle RAC）。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>根据您的观察，决定如何继续解决效果回归，然后实施您的行动计划。</span></li>
                     </ol>
                  </div>
               </div><a id="TDPPT138"></a><div class="props_rev_3"><a id="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB" name="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB"></a><h4 id="TDPPT-GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB" class="sect4"><span class="enumeration_section">9.2.3</span>比较两对快照</h4>
                  <div>
                     <div class="section">
                        <p>如果现有基线不可用，则可以使用两对任意快照来比较数据库性能。在数据库执行最佳时使用一对，在数据库执行不良时使用另一对。必须至少有四个快照可用。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__GUID-533820B8-FC40-4051-935C-3C8C946B5DA4">要使用两对快照比较性能：</p>
                        <ol>
                           <li>
                              <p>访问数据库主页。</p>
                              <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>从<span class="bold">Performance</span>菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">Compare Periods Reports</span> 。
                              </p>
                              <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将显示“运行比较期间报告”页面。</p>
                           </li>
                           <li id="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACDEAAF">
                              <p>在第一个时间段中，选择“ <span class="bold">按快照”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“开始快照”中，单击放大镜图标。</p>
                              <p>将显示“搜索和选择：快照”页面。</p>
                           </li>
                           <li>
                              <p>选择要包含在报告中的第一个快照周期的起始点，然后单击“ <span class="bold">选择”</span> 。
                              </p>
                              <p>您将返回“运行比较期间报告”页面。</p>
                           </li>
                           <li>
                              <p>在“结束快照”中，单击放大镜图标。</p>
                              <p>将显示“搜索和选择：快照”页面。</p>
                           </li>
                           <li id="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACIEHGH">
                              <p>选择要包含在报告中的第一个快照周期的结束点，然后单击“ <span class="bold">选择”</span> 。
                              </p>
                              <p>您将返回“运行比较期间报告”页面。</p>
                           </li>
                           <li>
                              <p>在第二阶段，重复步骤<a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACDEAAF">3</a>到步骤<a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACIEHGH">7</a> 。
                              </p>
                           </li>
                           <li id="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACDIBBC">
                              <p>单击“ <span class="bold">生成报告”</span> 。
                              </p>
                              <p>“报告结果”部分显示在“运行比较期间报告”页面上。该部分包含工作负载存储库比较期间报告。</p>
                           </li>
                           <li>
                              <p>（可选）执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要更改期间，请重复步骤<a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACDEAAF">3</a>到步骤<a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACDIBBC">9</a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>将报告另存为HTML文件<a id="d17088e2237" class="indexterm-anchor"></a> ，单击“ <span class="bold">保存到文件”</span> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TDPPT428"></a><a id="TDPPT092"></a><div class="props_rev_3"><a id="GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313" name="GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313"></a><h3 id="TDPPT-GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313" class="sect3"><span class="enumeration_section">9.3</span>使用AWR比较期间报告</h3>
               <div>
                  <p>在AWR比较期间报告之后<a id="d17088e2332" class="indexterm-anchor"></a>在您要比较的时间段内生成，您可以使用它来分析性能下降。要了解如何创建报告，请参阅<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486">运行AWR比较期间报告</a> ”</span> 。
                  </p>
                  <p><a href="resolving-performance-degradation-over-time.html#GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313__BABIEEAI">图9-1</a>显示了AWR比较期间报告的一部分。
                  </p>
                  <div class="figure" id="GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313__BABIEEAI">
                     <p class="titleinfigure">图9-1 AWR比较周期报告</p><img src="img/awr_report.gif" alt="下面是图9-1的描述" title="下面是图9-1的描述" longdesc="img_text/awr_report.html"><br><a href="img_text/awr_report.html">“图9-1 AWR比较周期报告”的描述</a></div>
                  <!-- class="figure" -->
                  <p>AWR比较期间报告分为以下几个部分：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-904381EB-84A6-49C6-855A-E9B3DEF120AD">AWR比较期间报告摘要</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-F51C37C7-077B-4534-B057-C39FBF71EC03">AWR比较期间报告的详细信息</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-9E201F34-C7A4-4866-B73E-D17C9F64D7B0">AWR比较期间报告中的补充信息</a></p>
                     </li>
                  </ul>
               </div><a id="TDPPT093"></a><div class="props_rev_3"><a id="GUID-904381EB-84A6-49C6-855A-E9B3DEF120AD" name="GUID-904381EB-84A6-49C6-855A-E9B3DEF120AD"></a><h4 id="TDPPT-GUID-904381EB-84A6-49C6-855A-E9B3DEF120AD" class="sect4"><span class="enumeration_section">9.3.1</span> AWR比较期报告摘要</h4>
                  <div>
                     <p>报告摘要<a id="d17088e2452" class="indexterm-anchor"></a>位于AWR比较期间报告的开头，并汇总了有关报告中使用的快照集和负载的信息。报告摘要包含以下部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-E3EF2DC2-DFC1-439F-BF86-02894D1CA562">快照集</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-CA404B4A-27A6-4611-B4DC-E347D80629FD">主机配置比较</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-13DA0DF7-322C-46A5-A5A0-A39AAF46D730">缓存大小</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-4CF5AA67-BDD0-4E32-A89D-79353D605704">加载配置文件</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-7B828612-4394-4D4B-9185-288FCBF025A8">最佳定时活动</a></p>
                        </li>
                     </ul>
                  </div><a id="TDPPT094"></a><div class="props_rev_3"><a id="GUID-E3EF2DC2-DFC1-439F-BF86-02894D1CA562" name="GUID-E3EF2DC2-DFC1-439F-BF86-02894D1CA562"></a><h5 id="TDPPT-GUID-E3EF2DC2-DFC1-439F-BF86-02894D1CA562" class="sect5"><span class="enumeration_section">9.3.1.1</span>快照集</h5>
                     <div>
                        <p>“快照集”部分显示有关用于此报告的快照集的信息，例如实例，主机和快照信息。</p>
                        <p>在<a href="resolving-performance-degradation-over-time.html#GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313__BABIEEAI">图9-1</a>所示的示例中，第一个快照周期对应于2月7日从10:50到11:20的性能稳定的时间。第二个快照周期对应于从12:50到13:00在同一天发生性能下降的时间。
                        </p>
                     </div>
                  </div><a id="TDPPT095"></a><div class="props_rev_3"><a id="GUID-CA404B4A-27A6-4611-B4DC-E347D80629FD" name="GUID-CA404B4A-27A6-4611-B4DC-E347D80629FD"></a><h5 id="TDPPT-GUID-CA404B4A-27A6-4611-B4DC-E347D80629FD" class="sect5"><span class="enumeration_section">9.3.1.2</span>主机配置比较</h5>
                     <div>
                        <p>“主机配置比较”部分比较两个快照集中使用的主机配置。例如，该报告会比较物理内存和CPU数量。配置差异量化为％Diff列中的百分比。</p>
                     </div>
                  </div><a id="TDPPT314"></a><div class="props_rev_3"><a id="GUID-13DA0DF7-322C-46A5-A5A0-A39AAF46D730" name="GUID-13DA0DF7-322C-46A5-A5A0-A39AAF46D730"></a><h5 id="TDPPT-GUID-13DA0DF7-322C-46A5-A5A0-A39AAF46D730" class="sect5"><span class="enumeration_section">9.3.1.3</span>缓存大小</h5>
                     <div>
                        <p>“缓存大小”部分比较两个快照集中使用的数据库配置。例如，报告会比较SGA和日志缓冲区大小。配置差异量化为％Diff列中的百分比。</p>
                     </div>
                  </div><a id="TDPPT096"></a><div class="props_rev_3"><a id="GUID-4CF5AA67-BDD0-4E32-A89D-79353D605704" name="GUID-4CF5AA67-BDD0-4E32-A89D-79353D605704"></a><h5 id="TDPPT-GUID-4CF5AA67-BDD0-4E32-A89D-79353D605704" class="sect5"><span class="enumeration_section">9.3.1.4</span>负载配置文件</h5>
                     <div>
                        <p>“加载配置文件”部分比较两个快照集中使用的加载。负载差异量化为％Diff列中的百分比。</p>
                        <div class="figure" id="GUID-4CF5AA67-BDD0-4E32-A89D-79353D605704__GUID-A2C21E7D-5DAD-416A-A52C-942F14D3B8CB"><img src="img/awr_load_profile.gif" alt="下面是awr_load_profile.gif的描述" title="下面是awr_load_profile.gif的描述" longdesc="img_text/awr_load_profile.html"><br><a href="img_text/awr_load_profile.html">说明awr_load_profile.gif的描述</a></div>
                        <!-- class="figure" -->
                        <p>在此示例中，第一个时段内每秒的DB时间高出100％。每秒CPU时间高出100％。</p>
                     </div>
                  </div><a id="TDPPT097"></a><div class="props_rev_3"><a id="GUID-7B828612-4394-4D4B-9185-288FCBF025A8" name="GUID-7B828612-4394-4D4B-9185-288FCBF025A8"></a><h5 id="TDPPT-GUID-7B828612-4394-4D4B-9185-288FCBF025A8" class="sect5"><span class="enumeration_section">9.3.1.5</span>最佳定时事件</h5>
                     <div>
                        <p>Top Timed Events部分是报告中最有用的部分之一。此部分显示在每个快照集中消耗了最高DB总时间百分比的五个定时事件或操作。</p>
                        <div class="figure" id="GUID-7B828612-4394-4D4B-9185-288FCBF025A8__GUID-8DFE6EE2-31B2-4F47-84A6-CDE3AF624D57"><img src="img/awr_top5_timed_events.gif" alt="下面是awr_top5_timed_events.gif的描述" title="下面是awr_top5_timed_events.gif的描述" longdesc="img_text/awr_top5_timed_events.html"><br><a href="img_text/awr_top5_timed_events.html">描述说明awr_top5_timed_events.gif</a></div>
                        <!-- class="figure" -->
                        <p>在此示例中，CPU时间和数据库文件顺序读取的等待次数在第一个时段中显着高于在第二个时段中。</p>
                     </div>
                  </div>
               </div><a id="TDPPT315"></a><div class="props_rev_3"><a id="GUID-F51C37C7-077B-4534-B057-C39FBF71EC03" name="GUID-F51C37C7-077B-4534-B057-C39FBF71EC03"></a><h4 id="TDPPT-GUID-F51C37C7-077B-4534-B057-C39FBF71EC03" class="sect4"><span class="enumeration_section">9.3.2</span> AWR比较期报告的详细信息</h4>
                  <div>
                     <p>报告详情<a id="d17088e2992" class="indexterm-anchor"></a>部分遵循AWR比较期间报告的摘要，并提供有关报告中使用的快照集和负载的统计信息。例如，该部分包括时间模型统计信息，等待事件，SQL执行时间和实例活动的统计信息。
                     </p>
                  </div>
               </div><a id="TDPPT319"></a><div class="props_rev_3"><a id="GUID-9E201F34-C7A4-4866-B73E-D17C9F64D7B0" name="GUID-9E201F34-C7A4-4866-B73E-D17C9F64D7B0"></a><h4 id="TDPPT-GUID-9E201F34-C7A4-4866-B73E-D17C9F64D7B0" class="sect4"><span class="enumeration_section">9.3.3</span> AWR比较期报告中的补充信息</h4>
                  <div>
                     <p>补充信息<a id="d17088e3082" class="indexterm-anchor"></a>位于AWR比较周期报告的末尾，并提供有关初始化参数和SQL语句的其他信息。init.ora参数部分<a id="d17088e3089" class="indexterm-anchor"></a>列出第一个快照集的所有初始化参数值。SQL Text的完整列表部分按SQL ID列出每个语句，并显示SQL语句的文本。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
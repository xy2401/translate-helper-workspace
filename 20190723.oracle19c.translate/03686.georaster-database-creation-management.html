<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter describes how to perform important GeoRaster database creation and management operations.">
      <meta name="description" content="This chapter describes how to perform important GeoRaster database creation and management operations.">
      <title>GeoRaster Database Creation and Management</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="GeoRaster Developer's Guide ">
      <meta property="og:description" content="This chapter describes how to perform important GeoRaster database creation and management operations.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="GeoRaster Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-georaster-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-14T11:48:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94793-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="georaster-datatypes.html" title="Previous" type="text/html">
      <link rel="next" href="georaster-data-manipulation.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer's Guide">
    <meta name="dcterms.isVersionOf" content="GEORS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="georaster-datatypes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="georaster-data-manipulation.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">GeoRaster Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">GeoRaster Database Creation and Management</li>
            </ol>
            <a id="GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" name="GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6"></a><a id="GEORS300"></a>
            
            <h2 id="GEORS-GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" class="sect2"><span class="enumeration_chapter">3 </span>GeoRaster Database Creation and Management
            </h2>
         </header>
         <div class="ind">
            <div>
               <div><span>This chapter describes how to perform important GeoRaster database creation and management operations.</span> A typical workflow to build and manage a GeoRaster database consists of most or all of the steps described.
               </div>
               <p>After you enable GeoRaster for all schemas that will use the feature, create the GeoRaster objects, load the data, and validate the GeoRaster objects, you can perform the remaining operations in any order, depending on your application needs. You may also be able to skip certain operations.</p>
               <p>Some operations can be performed using SQL, and some operations must be performed using PL/SQL blocks. You must update the GeoRaster object after you insert, update, reformat, compress, decompress, or delete the metadata or cell data of the GeoRaster object and before you commit the changes (see <a href="georaster-data-manipulation.html#GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121">Updating GeoRaster Objects Before Committing</a>). For some examples of these operations, see the demo files described in <a href="georaster-overview-and-concepts.html#GUID-0B5D0180-E897-4F30-9E65-65D827024A95" title="GeoRaster includes several PL/SQL and Java sample code files that show common operations.">GeoRaster PL/SQL and Java Demo Files</a> and the examples in <a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="The SDO_GEOR package contains subprograms (functions and procedures) for creating, modifying, and retrieving information about GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram."> SDO_GEOR Package Reference</a>.
               </p>
               <p>See also the operations in <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="This chapter describes how to perform several important GeoRaster data query and manipulation operations.">GeoRaster Data Query and Manipulation</a>.
               </p>
               <p>Other chapters in this book cover advanced topics (<a href="raster-algebra-and-analytics.html#GUID-C75744C9-FA04-4391-96F2-59EF2EA212FF" title="This chapter describes the raster algebra language (PL/SQL and algebraic expressions) and related raster operations, including conditional queries, cell value-based updates or edits, mathematical operations, classify, on-the-fly statistical analysis, logical operations, and their applications in cartographic modeling.">Raster Algebra and Analytics</a> and <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking."> Image Processing and Virtual Mosaic</a>), and provide detailed reference information about GeoRaster PL/SQL packages (<a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="The SDO_GEOR package contains subprograms (functions and procedures) for creating, modifying, and retrieving information about GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram.">SDO_GEOR Package Reference</a>, <a href="SDO_GEOR_ADMIN-reference.html#GUID-6F9B00F3-56C1-4AF9-82A6-DFBAB1BB489E" title="The SDO_GEOR_ADMIN package contains subprograms (functions and procedures) for administrative operations related to GeoRaster. This chapter presents reference information, with one or more examples, for each subprogram."> SDO_GEOR_ADMIN Package Reference</a>, <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-92406947-E079-487D-B0D0-3342ECC23E34" title="The SDO_GEOR_AGGR package contains subprograms (functions and procedures) for performing advanced large-scale mosaicking, appending, and virtual mosaic operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram."> SDO_GEOR_AGGR Package Reference</a>, <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="The SDO_GEOR_RA package contains subprograms (functions and procedures) for raster algebra and analytic operations related to GeoRaster. This chapter presents reference information, with one or more examples, for each subprogram."> SDO_GEOR_RA Package Reference</a>, and <a href="SDO_GEOR_UTL-reference.html#GUID-080B4F44-F59D-4E2A-AA97-FF209C69C4D2" title="The SDO_GEOR_UTL package contains subprograms (functions and procedures) for utility operations related to GeoRaster. This chapter presents reference information, with one or more examples, for each subprogram."> SDO_GEOR_UTL Package Reference</a>).
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-20119C51-6B07-4535-954E-7C55850F51F3">Enabling GeoRaster at the Schema Level</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88">Adding Data Files and Temporary Tablespaces for GeoRaster Users</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13">Creating the GeoRaster Table and Raster Data Tables</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D">Creating New GeoRaster Objects</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-FC1E8154-B852-4D5D-A348-45E69785BF81">Loading Raster Data</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-B79DA887-66D0-4961-A2EA-2052144F2B17">Validating GeoRaster Objects</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">Georeferencing GeoRaster Objects</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-004D9CB3-916E-46C3-830B-FA2C88625B88">Generating and Setting Spatial Extents</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E">Indexing GeoRaster Objects</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-C65D9E81-48AA-4569-B8E3-2A52263B2435">Viewing GeoRaster Objects</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-D45DBC81-B4E5-4D06-B1F2-82339C6F52E2">Exporting GeoRaster Objects</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD">Using GeoRaster with Workspace Manager and Label Security</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32">Maintaining Efficient Tablespace Use by GeoRaster Objects</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-D3750F8A-54EB-4334-9F52-522BBEE82BD3">Checking GeoRaster Tables and Objects in the Database</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E">Maintaining GeoRaster Objects and System Data in the Database</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1">Transferring GeoRaster Data Between Databases</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-51C68427-CA7F-4E85-90AD-780D770DF81F">Using Transportable Tablespaces with GeoRaster Data</a><br></li>
               </ul>
            </div>
            
            <div class="props_rev_3"><a id="GUID-20119C51-6B07-4535-954E-7C55850F51F3" name="GUID-20119C51-6B07-4535-954E-7C55850F51F3"></a><h3 id="GEORS-GUID-20119C51-6B07-4535-954E-7C55850F51F3" class="sect3"><span class="enumeration_section">3.1 </span>Enabling GeoRaster at the Schema Level
               </h3>
               <div>
                  <div class="section">
                     <p>GeoRaster must be enabled for each database schema that will use the GeoRaster feature.</p>
                     <p>By default, the GeoRaster feature is disabled after the Oracle Spatial and Graph is initially installed. GeoRaster can be enabled only within the scope of a schema (that is, not for the entire database), and it must be enabled for each schema that will use the GeoRaster feature.</p>
                     <p>To enable GeoRaster, follow these steps <span class="italic">for each schema</span> for which GeoRaster will be enabled:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect to the database as the user for that schema. For example:</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SCOTT/<span class="italic">&lt;password-for-scott&gt;</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Enter the following statement:</span><div><pre class="oac_no_warn" dir="ltr">EXECUTE sdo_geor_admin.enableGeoRaster;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Verify that GeoRaster is now enabled by checking that the following statement returns <code class="codeph">TRUE</code>:</span><div><pre class="oac_no_warn" dir="ltr">SELECT sdo_geor_admin.isGeoRasterEnabled FROM DUAL;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Ensure that the user for this schema has the CREATE TRIGGER privilege (which is required for GeoRaster to work properly). If the user does not have the CREATE TRIGGER privilege (or if you do not know), connect as a DBA user and grant the user that privilege. For example:</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA
GRANT create trigger TO scott;</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>If a GeoRaster table has been created and populated with data, then after a database upgrade, GeoRaster is automatically enabled for that tableâ€™s schema, and you do <span class="italic"><span class="bold">not</span></span> need to re-enable GeoRaster for the schema. (Just ensure that the CREATE TABLE privilege is granted to the user.)
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1375"></a><div class="props_rev_3"><a id="GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88" name="GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88"></a><h3 id="GEORS-GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88" class="sect3"><span class="enumeration_section">3.2 </span>Adding Data Files and Temporary Tablespaces for GeoRaster Users
               </h3>
               <div>
                  <p>A GeoRaster database is typically very large. For storage and performance reasons, a database schema should use one or more user tablespaces for GeoRaster data storage (avoid using the system tablespace for storing GeoRaster data), and you should add data files to the tablespaces appropriately. If Oracle Automatic Storage Management (Oracle ASM) or a bigfile tablespace is not being used, you should create many data files for each tablespace and distribute the data files on different disks if possible. You also should create data files or alter existing data files, so that they automatically increase in size when more space is needed in the database. </p>
                  <p>A GeoRaster table can contain a large (potentially almost unlimited) number of GeoRaster objects. A raster data table (RDT) should be used to contain the raster blocks of a limited number of GeoRaster objects, depending on the size of the rasters. In contrast with GeoRaster tables, an RDT should not grow too large, unless partitioning is to be applied. Also, RDTs can be created on different tablespaces, so that the raster blocks are distributed to different disks. (See also <a href="georaster-database-creation-management.html#GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13">Creating the GeoRaster Table and Raster Data Tables</a>.)
                  </p>
                  <p>A GeoRaster database may use a temporary tablespace for some operations. When compression is involved in GeoRaster operations, particularly for large scale mosaicking operations, some temporary spaces are needed to store intermediate compressed or uncompressed data. If the GeoRaster user does not have a temporary tablespace, the database system temporary tablespace is used. This is not efficient and may slow down the mosaicking and other operations. Therefore, you should always create temporary tablespaces for GeoRaster users. For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT system/<span class="italic">&lt;password&gt;</span>; 
CREATE TEMPORARY TABLESPACE geor_temp TEMPFILE 'geor_temp_1.f' SIZE 1G AUTOEXTEND ON; 
ALTER USER <span class="italic">&lt;georaster_user&gt;</span> TEMPORARY TABLESPACE geor_temp;
</pre><p>In general, the amount of temporary space needed is limited. However, for large scale mosaicking, if the result is to be compressed, the temporary space needed is equal to the uncompressed image size of the result. Therefore, specify <code class="codeph">AUTOEXTEND ON</code> when you create temporary tablespaces for GeoRaster users.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS986"></a><div class="props_rev_3"><a id="GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13" name="GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13"></a><h3 id="GEORS-GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13" class="sect3"><span class="enumeration_section">3.3 </span>Creating the GeoRaster Table and Raster Data Tables
               </h3>
               <div>
                  <p>Before you can work with GeoRaster objects, you must create a GeoRaster table and one or more raster data tables, if they do not already exist. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8">Creating a GeoRaster Table</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431">Creating Raster Data Tables</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-41CD2847-8823-479A-AC0F-A991B2F083A9">GeoRaster DML Trigger</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS988"></a><a id="GEORS987"></a><div class="props_rev_3"><a id="GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8" name="GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8"></a><h4 id="GEORS-GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8" class="sect4"><span class="enumeration_section">3.3.1 </span>Creating a GeoRaster Table
                  </h4>
                  <div>
                     <p>A GeoRaster table is any table that includes at least one column of type SDO_GEORASTER. The column can be an attribute column of another user-defined object type. <a href="georaster-database-creation-management.html#GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8__CHDEJAIF">Example 3-1</a> creates a GeoRaster table named CITY_IMAGES, which contains a column named IMAGE for storing GeoRaster objects.
                     </p>
                     <div class="example" id="GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8__CHDEJAIF">
                        <p class="titleinexample">Example 3-1 Creating a GeoRaster Table for City Images</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE city_images (image_id NUMBER PRIMARY KEY, image_description VARCHAR2(50), image SDO_GEORASTER);
</pre><p>For more information about GeoRaster tables, see <a href="georaster-overview-and-concepts.html#GUID-DB21CC32-06DC-4E18-A4FB-B15C389C1F72" title="GeoRaster optimizes the physical storage of metadata and data.">GeoRaster Physical Storage</a>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13">Creating the GeoRaster Table and Raster Data Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS991"></a><a id="GEORS1214"></a><a id="GEORS989"></a><div class="props_rev_3"><a id="GUID-9A353A7D-CD42-4692-AFD2-554353919431" name="GUID-9A353A7D-CD42-4692-AFD2-554353919431"></a><h4 id="GEORS-GUID-9A353A7D-CD42-4692-AFD2-554353919431" class="sect4"><span class="enumeration_section">3.3.2 </span>Creating Raster Data Tables
                  </h4>
                  <div>
                     <p><a id="d16109e496" class="indexterm-anchor"></a><a id="d16109e500" class="indexterm-anchor"></a>After creating a GeoRaster table, you should create one or more raster data tables (RDTs) to be used with the objects in the GeoRaster table. You can create a raster data table as an object table or as a relational table. You should use the LOB storage format SecureFiles LOBs (SecureFiles) when creating RDTs. Using SecureFiles significantly improves the performance of GeoRaster operations, compared to using the original LOB storage paradigm BasicFiles LOBS (BasicFiles).
                     </p>
                     <p><a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDEEBGE">Example 3-2</a> creates a raster data table using SecureFiles. The RDT will be used to store all raster blocks of one or many GeoRaster objects in the CITY_IMAGES table or other GeoRaster tables. (The association between a GeoRaster object and a raster data table is not made until you create a GeoRaster object, as explained in <a href="georaster-database-creation-management.html#GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D">Creating New GeoRaster Objects</a>.)
                     </p>
                     <div class="example" id="GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDEEBGE">
                        <p class="titleinexample">Example 3-2 Creating a Raster Data Table Using SecureFiles</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE city_images_rdt OF SDO_RASTER
  (PRIMARY KEY (rasterID, pyramidLevel, bandBlockNumber,
    rowBlockNumber, columnBlockNumber))
  TABLESPACE im_tbs_2
  LOB(rasterBlock) STORE AS SECUREFILE
    (CACHE);
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDCEIAC">
                        <p class="titleinexample">Example 3-3 Creating a Raster Data Table (Relational) Using SecureFiles</p>
                        <p><a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDCEIAC">Example 3-3</a> creates a raster data table with the same name as in <a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDEEBGE">Example 3-2</a>, also using SecureFiles, but creating it as a relational table instead of an object table.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE city_images_rdt
  (rasterID NUMBER,
  pyramidLevel NUMBER,
  bandBlockNumber NUMBER,
  rowBlockNumber NUMBER,
  columnBlockNumber NUMBER,
  blockMBR SDO_GEOMETRY,
  rasterBlock BLOB,
  CONSTRAINT pkey PRIMARY KEY (rasterId, pyramidLevel, bandBlockNumber,
    rowBlockNumber, columnBlockNumber))
  LOB (rasterblock) STORE AS SECUREFILE(cache);
</pre><p>The CREATE TABLE statement for a raster data table must include the following clause (which is included in the preceding examples): </p><pre class="oac_no_warn" dir="ltr">  (PRIMARY KEY (rasterID, pyramidLevel, bandBlockNumber,
    rowBlockNumber, columnBlockNumber))
</pre><p>This PRIMARY KEY clause creates a B-tree index on the raster data table, and this index is essential for optimal query performance.</p>
                        <p>When you use BasicFiles, you can specify a larger CHUNK size (16 or 32 KB) for the LOB storage to improve performance. With SecureFiles, there is no need to specify the CHUNK size parameter, and there are few other storage parameters to consider. Raster data tables using SecureFiles LOBs must be created in a tablespace with the automatic segment space management option. For information about using Oracle SecureFiles and performance considerations for BasicFiles LOBs, see <a href="../adlob/index.html" target="_blank"><span class="italic">Oracle Database SecureFiles and Large Objects Developer's Guide</span></a>.
                        </p>
                        <p>For reference information about creating tables, including specifying LOB storage, see the section about the CREATE TABLE statement in <a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a>.
                        </p>
                        <p>For more information about the keywords and options when creating a raster data table, see <a href="georaster-overview-and-concepts.html#GUID-2F832FEF-9937-4BF9-BB32-FBD056FCF017">Raster Data Table</a>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13">Creating the GeoRaster Table and Raster Data Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS992"></a><div class="props_rev_3"><a id="GUID-41CD2847-8823-479A-AC0F-A991B2F083A9" name="GUID-41CD2847-8823-479A-AC0F-A991B2F083A9"></a><h4 id="GEORS-GUID-41CD2847-8823-479A-AC0F-A991B2F083A9" class="sect4"><span class="enumeration_section">3.3.3 </span>GeoRaster DML Trigger
                  </h4>
                  <div>
                     <p>To ensure the consistency and integrity of internal GeoRaster tables and data structures, GeoRaster automatically creates a unique DML trigger for each GeoRaster column whenever a user creates a GeoRaster table (that is, a table with at least one GeoRaster column), with the following exception: if you use the ALTER TABLE statement to add one or more GeoRaster columns, you must call the <a href="SDO_GEOR_UTL-reference.html#GUID-CCA772B5-AA1E-4A53-B64C-67D8F6052CF2">SDO_GEOR_UTL.createDMLTrigger</a> procedure to create the DML trigger on each added GeoRaster column. In some scenarios, such as a database upgrade or a data migration, you can call the <a href="SDO_GEOR_UTL-reference.html#GUID-AD56A631-0111-44A2-8A94-4F326FCABA3B">SDO_GEOR_UTL.recreateDMLTriggers</a> procedure to re-create the DML triggers on all GeoRaster columns.
                     </p>
                     <p>The trigger is fired after each of the following data manipulation language (DML) operations affecting a GeoRaster object: insertion of a row, update of a GeoRaster object, and deletion of a row.</p>
                     <p>GeoRaster automatically performs the following actions when the trigger is fired:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>After an insert operation, the trigger inserts a row with the GeoRaster table name, GeoRaster column name, raster data table name, and <code class="codeph">rasterID</code> value into the USER_SDO_GEOR_SYSDATA view (described in <a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster uses a system data table (also called the sysdata table) to maintain the relationship between GeoRaster tables and their related raster data tables.">GeoRaster System Data Views (xxx_SDO_GEOR_SYSDATA)</a>). If an identical entry already exists, an exception is raised.
                           </p>
                        </li>
                        <li>
                           <p>After an update operation, if the new GeoRaster object is null or empty, the trigger deletes the old GeoRaster object. If there is no entry in the USER_SDO_GEOR_SYSDATA view for the old GeoRaster object (that is, if the old GeoRaster object is null), the trigger inserts a row into that view for the new GeoRaster object. If there is an entry in the USER_SDO_GEOR_SYSDATA view for the old GeoRaster object, the trigger updates the information to reflect the new GeoRaster object.</p>
                        </li>
                        <li>
                           <p>After a delete operation, the trigger deletes raster data blocks for the GeoRaster object in its raster data table, and it deletes the row in the USER_SDO_GEOR_SYSDATA view for the GeoRaster object.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13">Creating the GeoRaster Table and Raster Data Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS993"></a><div class="props_rev_3"><a id="GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D" name="GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D"></a><h3 id="GEORS-GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D" class="sect3"><span class="enumeration_section">3.4 </span>Creating New GeoRaster Objects
               </h3>
               <div>
                  <p>Before you can store a GeoRaster image in a GeoRaster table, you must create the GeoRaster object and insert it into a GeoRaster table before you start working on it. To create a new GeoRaster object, you have the following options:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Initialize an empty GeoRaster object, using the <a href="SDO_GEOR-reference.html#GUID-524A6FD9-24D3-4CCA-A9D1-0B23819E4CA6">SDO_GEOR.init</a> function.
                        </p>
                     </li>
                     <li>
                        <p>Create a blank GeoRaster object, using the <a href="SDO_GEOR-reference.html#GUID-7D203CE7-A6F0-4545-92B4-5E8ED3E007FE">SDO_GEOR.createBlank</a> function.
                        </p>
                     </li>
                  </ul>
                  <p>You cannot perform any GeoRaster operations if the object has not been properly created (that is, if the object is an atomic null). The <a href="SDO_GEOR-reference.html#GUID-524A6FD9-24D3-4CCA-A9D1-0B23819E4CA6">SDO_GEOR.init</a> and <a href="SDO_GEOR-reference.html#GUID-7D203CE7-A6F0-4545-92B4-5E8ED3E007FE">SDO_GEOR.createBlank</a> functions initialize GeoRaster objects with their raster data table and raster ID values if these are not already specified, and the GeoRaster DML trigger ensures that the raster data table name and raster ID value pair is unique for the current user. 
                  </p>
                  <p>If the new GeoRaster object will hold raster cell data (resulting from another GeoRaster procedure, such as <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>, <a href="SDO_GEOR-reference.html#GUID-827C49FA-3759-4EC3-8ED5-A9A4E623EEEB">SDO_GEOR.subset</a>, or <a href="SDO_GEOR-reference.html#GUID-72D93D49-BF98-4AB9-8FEA-C386A1BE1071">SDO_GEOR.copy</a>), and if the raster data table for this new GeoRaster object does not exist, you must first create the raster data table. For information about creating a raster data table, including examples, see <a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431">Creating Raster Data Tables</a>.
                  </p>
                  <p><a id="d16109e711" class="indexterm-anchor"></a><a id="d16109e713" class="indexterm-anchor"></a>To avoid potential GeoRaster data problems (some of which are described in <a href="georaster-database-creation-management.html#GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E">Maintaining GeoRaster Objects and System Data in the Database</a>), an initialized GeoRaster object must be <span class="bold">registered</span> in the GeoRaster system views, which is done automatically when you insert the GeoRaster object into a GeoRaster table. This should be done before you perform any other operations on the GeoRaster object. Any GeoRaster operations that need to manipulate the raster data table raise an exception if the source or target GeoRaster object is not registered.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS994"></a><div class="props_rev_3"><a id="GUID-FC1E8154-B852-4D5D-A348-45E69785BF81" name="GUID-FC1E8154-B852-4D5D-A348-45E69785BF81"></a><h3 id="GEORS-GUID-FC1E8154-B852-4D5D-A348-45E69785BF81" class="sect3"><span class="enumeration_section">3.5 </span>Loading Raster Data
               </h3>
               <div>
                  <p>To load and export imagery or raster data, you can consider third-party ETL tools (see the note in <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a>). For example, you can use the gdal_translate command line and other GDAL utilities (<a href="http://www.gdal.org/gdal_utilities.html" target="_blank">http://www.gdal.org/gdal_utilities.html</a>), which fully supports GeoRaster through the Oracle Spatial GeoRaster driver.
                  </p>
                  <p>You can also use features in GeoRaster to load raster data, With GeoRaster, you have the following options:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the GDAL based ETL tool for concurrent batch loading and exporting. This tool is described in <a href="georaster-overview-and-concepts.html#GUID-6E9B9872-7222-45AD-8FE1-CAFF596D3955">GDAL-Based ETL Wizard for Concurrent Batch Loading and Exporting</a>.
                        </p>
                     </li>
                     <li>
                        <p>In PL/SQL call the&nbsp;<a href="SDO_GEOR_GDAL-reference.html#GUID-FD266345-B16B-41EA-8567-07265C15EF61">SDO_GEOR_GDAL.translate</a>&nbsp;procedure to load images into GeoRaster objects.
                        </p>
                     </li>
                     <li>
                        <p>In PL/SQL, call the <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> procedure to load images into GeoRaster objects.
                        </p>
                     </li>
                     <li>
                        <p>Use the GeoRaster JAI-based loader tool or viewer tool, which are described in <a href="georaster-overview-and-concepts.html#GUID-8FE18098-EE55-490D-81C9-7DE1DCFDDB34">JAI-Based Viewer_ Loader_ and Exporter</a>.
                        </p>
                     </li>
                  </ul>
                  <p>With the last two options (<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> and JAI-based tool), you can do the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Compress raster data and store the data in JPEG-compressed or DEFLATE-compressed GeoRaster objects.</p>
                     </li>
                     <li>
                        <p>Load an ESRI world file or a Digital Globe RPC text file (.rpb) into an existing GeoRaster object, and georeference the raster data without reloading it. You can also specify an SRID with the world file and generate the spatial extent of the data.</p>
                     </li>
                     <li>
                        <p>Load a GeoTIFF format file with georeferencing, with or without raster data. To load and export the georeferencing information of GeoTIFF images, the GeoTIFF libraries are required. See <a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">Georeferencing GeoRaster Objects</a> for instructions.
                        </p>
                     </li>
                  </ul>
                  <p>After loading raster data into a GeoRaster object, you must ensure that the object is valid by calling the <a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a> function, as explained in <a href="georaster-database-creation-management.html#GUID-B79DA887-66D0-4961-A2EA-2052144F2B17">Validating GeoRaster Objects</a>.
                  </p>
                  <p>Because an ESRI world file or .<code class="codeph">rpb</code> file does not contain coordinate system information, you can specify the SRID value of a coordinate reference system for the load operation. However, if you do not specify an SRID, the model SRID of the GeoRaster objects is set to 0 (zero) by the loader, which means that the GeoRaster object is invalid, and therefore you must use the <a href="SDO_GEOR-reference.html#GUID-8CE5E5B6-F109-444F-9CE2-91580CD085D3">SDO_GEOR.setModelSRID</a> procedure to specify a valid model space for this object. If you do not yet know the coordinate system of the model space, <a id="d16109e851" class="indexterm-anchor"></a><a id="d16109e853" class="indexterm-anchor"></a>you can specify the SRID value as 999999, which means that the coordinate reference system is unknown. (Specifically, SRID 999999 is associated with a coordinate reference system named <code class="codeph">unknown CRS</code>.) Later, when you know the actual coordinate reference system of the model space, you can set the SRID value accordingly.
                  </p>
                  <p>For more information about the <code class="codeph">unknown CRS</code> (SRID 999999) coordinate reference system, see <a href="../spatl/coordinate-systems-concepts.html#SPATL734" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a>.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-FFB6CD25-B4AC-4746-BAC5-E9ED82D763F0">Loading with Blocking and Optimal Padding</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-A60C8EB8-E7BF-41D6-B674-5DD5EF383426">Loading JPEG and JPEG 2000 Images Without Decompression</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-7FBC6EB0-D4B8-43F8-A6F5-11C4319632AB">Reformatting the Source Raster Before Loading</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-FFB6CD25-B4AC-4746-BAC5-E9ED82D763F0" name="GUID-FFB6CD25-B4AC-4746-BAC5-E9ED82D763F0"></a><h4 id="GEORS-GUID-FFB6CD25-B4AC-4746-BAC5-E9ED82D763F0" class="sect4"><span class="enumeration_section">3.5.1 </span>Loading with Blocking and Optimal Padding
                  </h4>
                  <div>
                     <p>Unless you want to load JPEG or JPEG2000 images and store them without any change, when you load an image or raster file into GeoRaster object, always consider and apply appropriate blocking of the data, because file formats might have very different blocking schemes. In general, blocking sizes should be 512x512 or larger. There is no absolute rule for the blocking sizes, but the larger the raster, the larger the blocking sizes you might use. For regular rasters, 512x512 to 2048x2048 is appropriate. For very small images (less than 1024x1024x3), no blocking may be a good choice. Avoid blocking sizes that are either too small (such as 64x64 and 128x128) or too large, and avoid extreme blocking sizes such as 0.5 (one-half), 1, or 8 rows of pixels per block. Generally, the rectangular shape of blocks should be a square or close to a square. For different applications, you might tune the blocking to balance efficient storage with optimal performance.</p>
                     <p>You should also always apply optimal padding during loading. In other words, specify <code class="codeph">blocking=OPTIMALPADDING</code> in addition to specifying <code class="codeph">blocksize</code>. GeoRaster applies padding to the right column and bottom row of blocks to make them the same size as other blocks. If the block size is not optimal for a specific raster, the default resulting padding would waste some storage space. When you specify<code class="codeph">blocking=OPTIMALPADDING</code>, all GeoRaster procedures and the ETL tools automatically adjust the GeoRaster dimension size array so that it will be optimal for reducing the amount of padding in GeoRaster object storage. The adjustment is always made around the user-specified values. See the explanation of the <code class="codeph">blocking</code> keyword in the table in the Usage Notes for the <a href="SDO_GEOR_UTL-reference.html#GUID-4F642F02-94B1-40FA-8C92-E916031293D1">SDO_GEOR_UTL.calcOptimizedBlockSize</a>procedure.
                     </p>
                     <p>For how to apply optimal padding when using the GDAL command line, see the following example:</p><pre class="pre codeblock"><code>gdal_translate -of georaster /images/image_1.tif \
      georaster:georaster/georaster@my_db, image_table, raster \
      -co "insert=(id,label,raster) values (1, 'image_1', sdo_geor.init('rdt_table', 1)" \
      -co blockxsize= 512 \
      -co blockysize=512 \
      -co blockbsize=3 \
      -co blocking=optimalpadding \
      -co interleave=BIP
</code></pre><p>For how to apply optimal padding when using the <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> procedure, see the examples in the reference topic for that procedure.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-FC1E8154-B852-4D5D-A348-45E69785BF81">Loading Raster Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A60C8EB8-E7BF-41D6-B674-5DD5EF383426" name="GUID-A60C8EB8-E7BF-41D6-B674-5DD5EF383426"></a><h4 id="GEORS-GUID-A60C8EB8-E7BF-41D6-B674-5DD5EF383426" class="sect4"><span class="enumeration_section">3.5.2 </span>Loading JPEG and JPEG 2000 Images Without Decompression
                  </h4>
                  <div>
                     <p>GeoRaster supports JPEG compression, in which the GeoRaster blocks are stored as JPEG files. GeoRaster also supports JPEG 2000 compression, in which the GeoRaster has a single block stored as a JPEG 2000 file. There are some special cases where you can load and export JPEG or JPEG 2000 images <span class="italic">without</span> decompressing and recompressing, thus improving performance significantly. 
                     </p>
                     <p>For JPEG, you can use the JAI-based GeoRaster loader to load the image directly without decompression and recompression if the image file is a JPEG file, the GeoRaster object's compression type is specified as JPEG-F and no blocking is specified for the GeoRaster object's storage (that is, the GeoRaster object has only one block). </p>
                     <p>For JPEG 2000, you can use GDAL or the GDAL-based GeoRaster ETL tool to load the image directly without decompression and recompression &#x2013; if the image file is a JPEG2000 file and if no parameters in use require any change to the internal structure of the JPEG 2000 file.  For example, the following script loads the JPEG 2000 file directly without decompression. </p><pre class="pre codeblock"><code>gdal_translate -of georaster /images/image_3.jp2 \
      georaster:georaster/georaster@my_db,image_table,raster \
      -co "insert=(id,label,raster) values (3, 'image_3', sdo_geor.init('rdt_table', 3)" \
      -co compress=jp2-f
</code></pre><p>However, if any of the parameter in use require changing the internal structure of the JPEG 2000 data, direct loading will not be possible. The following example requires decompression and recompression, resulting in a substantial increase of the loading time. </p><pre class="pre codeblock"><code>gdal_translate -of georaster /images/image_4.jp2 \
      georaster:georaster/georaster@my_db,image_table,raster \
      -co "insert=(id,label,raster) values (4, 'image_4', sdo_geor.init('rdt_table', 4)" \
      -co compress=jp2-f \
      -co blockxsize=1024 \
      -co blockysize=1024 \
      -srcwin 100 200 1000 1000 \
      -outsize 50% 50%
</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-FC1E8154-B852-4D5D-A348-45E69785BF81">Loading Raster Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS995"></a><div class="props_rev_3"><a id="GUID-7FBC6EB0-D4B8-43F8-A6F5-11C4319632AB" name="GUID-7FBC6EB0-D4B8-43F8-A6F5-11C4319632AB"></a><h4 id="GEORS-GUID-7FBC6EB0-D4B8-43F8-A6F5-11C4319632AB" class="sect4"><span class="enumeration_section">3.5.3 </span>Reformatting the Source Raster Before Loading
                  </h4>
                  <div>
                     <p>The GeoRaster JAI-based loader does not support source raster files in BSQ interleaving, and it might raise an "insufficient memory" error if the files are too big, and it might have other restrictions. To avoid such problems, you can reformat and reblock the source files so that they can be properly loaded. However, it is recommended that you use the GDAL-based ETL loader, which generally does not have such issues and requirements.</p>
                     <p>As an example, one way to do this is to use GDAL, an Open Source raster transformation library available from <a href="http://www.gdal.org" target="_blank"><code class="codeph">http://www.gdal.org</code></a>, to reformat or reblock the image or raster file so that JAI (Java Advanced Imaging) can handle it. GDAL supports GeoRaster natively and can import and export GeoRaster objects directly, and can also process GeoRaster objects; for more information, see <a href="http://www.oracle.com/technetwork/database/enterprise-edition/getting-started-with-gdal-133874.pdf" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/database/enterprise-edition/getting-started-with-gdal-133874.pdf</code></a>. You can also use GDAL to generate TFW files. For example, execute commands such as the following two (each command on a single line) using the GDAL command line or (for batch conversion) shell:
                     </p><pre class="oac_no_warn" dir="ltr">gdal_translate -of GTiff -co "TFW=YES" -co "INTERLEAVE=PIXEL" -co "TILED=YES" D:\my_image.tif D:\my_new_image.tif
 
gdal_translate -of GTiff -co "TILED=YES" -co "TFW=YES" D:\my_image.ecw D:\my_new_image.tif
</pre><p>In the preceding example, the first command generates a TFW file, changes the interleaving to BIP (which is supported by JAI), and reblocks the image to 256x256. The second command converts ECW to TIFF, generates TFW, and reblocks the image.</p>
                     <p>Then use the GeoRaster loader tool (described in <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a>) , specifying reblocking so that the image can be loaded successfully and later retrieved from the database efficiently, as in the following example (a single command):
                     </p><pre class="oac_no_warn" dir="ltr">java -Xmx1024m oracle.spatial.georaster.tools.GeoRasterLoader mymachine db11 6521 georaster georaster thin 32 T globe image "blocking=true, blocksize=(512,512,3)" "D:my_image.tif,2,RDT_15, D:\my_image.tfw,82213"
</pre><p>If you receive an "insufficient memory" error when calling <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> to load a very large image, try loading the image with a different blocking size parameter or reblock the image into smaller internal tile sizes using GDAL before loading. For extremely large images, you can also use GDAL to tile the image into multiple smaller image files with sizes that JAI can handle, or you use GDAL to load and export the images directly.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-FC1E8154-B852-4D5D-A348-45E69785BF81">Loading Raster Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS996"></a><div class="props_rev_3"><a id="GUID-B79DA887-66D0-4961-A2EA-2052144F2B17" name="GUID-B79DA887-66D0-4961-A2EA-2052144F2B17"></a><h3 id="GEORS-GUID-B79DA887-66D0-4961-A2EA-2052144F2B17" class="sect3"><span class="enumeration_section">3.6 </span>Validating GeoRaster Objects
               </h3>
               <div>
                  <p>Before you use a GeoRaster object or after you manually edit the raster data and metadata of a GeoRaster object, you should ensure that the object is valid. Validation for a GeoRaster object includes checking the registration of the GeoRaster object, checking the metadata and the raster cell data, and making sure that the metadata and data are consistent. For example, validation checks the raster type, dimension information, and the actual sizes of cell blocks, and it performs other checks.</p>
                  <p>If you used the GeoRaster loader tool described in <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a>, the GeoRaster objects were validated during the load operation.
                  </p>
                  <p>GeoRaster provides the following validation subprograms:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a> validates the GeoRaster object, including cell data and metadata. It returns <code class="codeph">TRUE</code> if the object is valid; otherwise, it returns one of the following: an Oracle error code indicating why the GeoRaster object is invalid, <code class="codeph">FALSE</code> if validation fails for an unknown reason, or <code class="codeph">NULL</code> if the GeoRaster object is null. You should always use this function after you create a GeoRaster object.
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-64122DD0-D412-49A9-A73B-7D550CCCA78E">SDO_GEOR.schemaValidate</a> validates the metadata against the GeoRaster XML schema. You can use this function to locate errors if the <a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a> function returned the error code 13454. The <a href="SDO_GEOR-reference.html#GUID-64122DD0-D412-49A9-A73B-7D550CCCA78E">SDO_GEOR.schemaValidate</a> and <a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a> functions do not validate the spatial extent geometry.
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-1AC1C8C0-9D2D-45F5-9D09-EE802DEDDD76">SDO_GEOR.validateBlockMBR</a> validates the <code class="codeph">blockMBR</code> geometry associated with each raster block stored in the raster data table. If there are any invalid <code class="codeph">blockMBR</code> geometries, call the <a href="SDO_GEOR-reference.html#GUID-3D259BE8-962A-457D-96AB-70282BD75B2C">SDO_GEOR.generateBlockMBR</a> procedure to regenerate them.
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS997"></a><div class="props_rev_3"><a id="GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0" name="GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0"></a><h3 id="GEORS-GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0" class="sect3"><span class="enumeration_section">3.7 </span>Georeferencing GeoRaster Objects
               </h3>
               <div>
                  <p>Georeferencing, as explained in <a href="georaster-overview-and-concepts.html#GUID-E32BF03B-DB83-422E-B7D0-C0F3073890F9" title="The GeoRaster spatial reference system (SRS), a metadata component of the GeoRaster object, includes information related to georeferencing. Georeferencing establishes the relationship between cell coordinates of GeoRaster data and real-world ground coordinates (or some local coordinates). Georeferencing assigns ground coordinates to cell coordinates, and cell coordinates to ground coordinates.">Georeferencing</a>, establishes the relationship between cell coordinates of GeoRaster data and real-world ground coordinates (or some local coordinates). If you need to georeference GeoRaster objects, the following approaches are available:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If the original image is already georeferenced and if the georeferencing information is stored in an ESRI world file or .<code class="codeph">rpb</code> file containing RPC coefficients you can use the <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> procedure to load an ESRI world file or .<code class="codeph">rpb</code> file from a file or from a CLOB object, along with the image data itself (in either FILE or BLOB format). You can also use the GeoRaster client-side loader tool (described in <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a>) to load an ESRI world file or .<code class="codeph">rpb</code> file from a file, along with the image file itself.
                        </p>
                        <p>Because an ESRI world file or .<code class="codeph">rpb</code> file does not specify the model coordinate system, you can set the model space of the georeferenced GeoRaster object using an Oracle SRID in either of the following ways: specify the SRID along with the world file as a parameter to the <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> procedure or the GeoRaster client-side loader (described in <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a>); or, after loading the world file, call the <a href="SDO_GEOR-reference.html#GUID-8CE5E5B6-F109-444F-9CE2-91580CD085D3">SDO_GEOR.setModelSRID</a> procedure. You can also call the <a href="SDO_GEOR-reference.html#GUID-8CE5E5B6-F109-444F-9CE2-91580CD085D3">SDO_GEOR.setModelSRID</a> procedure to change the model space of a georeferenced GeoRaster object.
                        </p>
                     </li>
                     <li>
                        <p>If the original image is a georeferenced GeoTIFF image, you can use the <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> procedure to load the image with georeferencing, by specifying <code class="codeph">GEOTIFF</code> as the input format. To load only the georeferencing information from a GeoTIFF image, without the raster image data, into an existing GeoRaster object, add the <code class="codeph">raster=false</code> storage parameter. You can specify a backup SRID with the <code class="codeph">srid</code> storage parameter, in case the GeoTIFF configuration values do not match any SRID recognized by Oracle Spatial and Graph.
                        </p>
                        <p>The GeoTIFF <code class="codeph">PixelIsArea</code> raster space is equivalent to the GeoRaster upperleft-based cell coordinate system. An export to GeoTiff is always in <code class="codeph">PixelIsArea</code> raster space, with a half-pixel adjustment of the affine transformation if the GeoRaster object is in center-based cell coordinate system. An import from GeoTIFF is always to the GeoRaster center-based cell coordinate system, with a half-pixel adjustment of the affine transformation if the GeoTIFF file is specified in <code class="codeph">PixelIsArea</code> raster space.
                        </p>
                        <p>You can also use the GeoRaster client-side loader tool (described in <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a>) to load GeoTIFF images with georeferencing, using the storage parameter <code class="codeph">geotiff=true</code>. If you omit this parameter or specify <code class="codeph">geotiff=false</code>, the image is loaded as a simple TIFF image without georeferencing. The <code class="codeph">raster</code> and <code class="codeph">srid</code> storage parameters also apply to the client-side loader tool.
                        </p>
                        <p>To load or export GeoTIFF images with the GeoRaster client-side tools, add the following GeoTIFF libraries to your CLASSPATH definition:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">xtiff-jai.jar</code> (available from the SourceForge Extensible-TIFF-JAI group)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">geotiff-jai.jar</code> (available from the SourceForge GeoTIFF-JAI group)
                              </p>
                           </li>
                        </ul>
                        <p><a id="d16109e1347" class="indexterm-anchor"></a><a id="d16109e1349" class="indexterm-anchor"></a>To load or export GeoTIFF images with the <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> or <a href="SDO_GEOR-reference.html#GUID-6261233E-5E90-479C-97FD-8125C28EC838">SDO_GEOR.exportTo</a> procedure, load these libraries into the MDSYS schema by connecting to the database as the SYSTEM user, editing <span class="italic"><code class="codeph">$ORACLE_HOME</code></span><code class="codeph">/md/admin/sdoldgtf.sql</code> as needed to reflect the paths to the <code class="codeph">xtiff-jai.jar</code> and <code class="codeph">geotiff-jai.jar</code> files, and running the <code class="codeph">sdoldgtf.sql</code> SQL*Plus script. As an alternative to using the <code class="codeph">sdoldgtf.sql</code> script, you can enter the following commands:
                        </p><pre class="oac_no_warn" dir="ltr">loadjava -user system/<span class="italic">password@database</span> -resolve -force -synonym -schema MDSYS -grant PUBLIC xtiff-jai.jar

loadjava -user system/<span class="italic">password@database</span> -resolve -force -synonym -schema MDSYS -grant PUBLIC geotiff-jai.jar
</pre><p>If the database is downgraded to a release before Oracle Database 11<span class="italic">g</span>, these libraries should be uninstalled according to the script in <span class="italic"><code class="codeph">$ORACLE_HOME</code></span><code class="codeph">/md/admin/sdormgtf.sql</code>, editing it as needed to reflect the paths to the <code class="codeph">xtiff-jai.jar</code> and <code class="codeph">geotiff-jai.jar</code> files, and either running the <code class="codeph">sdormgtf.sql</code> script or entering the following commands:
                        </p><pre class="oac_no_warn" dir="ltr">dropjava -user system/<span class="italic">password@database</span> -resolve -force -synonym -schema MDSYS -grant PUBLIC xtiff-jai.jar

dropjava -user system/<span class="italic">password@database</span> -resolve -force -synonym -schema MDSYS -grant PUBLIC geotiff-jai.jar
</pre></li>
                     <li>
                        <p>You can use the <a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a> procedure to add, modify, and delete georeferencing information by directly accessing the GeoRaster SRS metadata. For example, you can create an SDO_GEOR_SRS object and assign the coefficients and related georeferencing information, and then call the <a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a> procedure to add or update the spatial reference information of any GeoRaster object. You can use the <a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a> procedure to set up the spatial reference information for all supported functional fitting georeferencing models. Examples of setting up the SRS information from an existing DLT model and from an existing RPC model are included in reference section for the <a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a> procedure.
                        </p>
                        <p>If you know that one GeoRaster object has the same SRS information as another GeoRaster object, you can call the <a href="SDO_GEOR-reference.html#GUID-FBC8D0DC-4C02-484B-8D99-F34A4C157EA7">SDO_GEOR.getSRS</a> function to retrieve an SDO_GEOR_SRS object from this GeoRaster object, and then call the <a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a> procedure to georeference the first GeoRaster object.
                        </p>
                     </li>
                     <li>
                        <p>If the GeoRaster object can be georeferenced using an affine transformation, you can call the <a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> procedure to georeference a GeoRaster object directly. As described in the reference information for the <a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>, this procedure takes the coefficients <code class="codeph">A</code>, <code class="codeph">B</code>, <code class="codeph">C</code>, <code class="codeph">D</code>, <code class="codeph">E</code>, <code class="codeph">F</code> and other information, converts them into the coefficients <code class="codeph">a</code>, <code class="codeph">b</code>, <code class="codeph">c</code>, <code class="codeph">d</code>, <code class="codeph">e</code>, <code class="codeph">f</code>, and stores them in the spatial reference information of a GeoRaster object. If the original raster data is rectified and if the model coordinate of its origin (upper-left corner) is (x0, y0) and its spatial resolution or scale is <code class="codeph">s</code>, then the following are true: A = s, B = 0, C = x0, D = 0, E = -s, F = y0.
                        </p>
                     </li>
                     <li>
                        <p>If you have ground control points (GCPs) or want to collect GCPs yourself, you can call the <a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> function to georeference the GeoRaster object. For more information, see <a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" title="In addition to spatial referencing capability, advanced georeferencing capabilities are available.">Advanced Georeferencing</a>.
                        </p>
                     </li>
                  </ul>
                  <p><a id="d16109e1513" class="indexterm-anchor"></a><a id="d16109e1517" class="indexterm-anchor"></a>Based on the SRS information of a georeferenced GeoRaster object, transforming GeoRaster coordinate information means finding the model (ground) coordinate associated with a specific cell (raster) coordinate, and the reverse. That is, you can do the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Given a specific cell coordinate, you can find the associated model space coordinate using the <a href="SDO_GEOR-reference.html#GUID-9BA7B6F8-B6AE-4D4B-A264-F4977FB998C8">SDO_GEOR.getModelCoordinate</a> function. For example, if you identify a point in an image, you can find the longitude and latitude coordinates associated with that point.
                        </p>
                     </li>
                     <li>
                        <p>Given a model space coordinate, you can find the associated cell coordinate using the <a href="SDO_GEOR-reference.html#GUID-65B7D251-A852-44AE-904A-36787748A6E6">SDO_GEOR.getCellCoordinate</a> function. For example, if you identify longitude and latitude coordinates, you can find the cell in an image associated with those coordinates.
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS998"></a><div class="props_rev_3"><a id="GUID-004D9CB3-916E-46C3-830B-FA2C88625B88" name="GUID-004D9CB3-916E-46C3-830B-FA2C88625B88"></a><h3 id="GEORS-GUID-004D9CB3-916E-46C3-830B-FA2C88625B88" class="sect3"><span class="enumeration_section">3.8 </span>Generating and Setting Spatial Extents
               </h3>
               <div>
                  <p>When a GeoRaster object is created, its spatial extent (<code class="codeph">spatialExtent</code> attribute, described in <a href="georaster-datatypes.html#GUID-E392DB15-C7C3-40E8-815C-527D2CD1F45F">spatialExtent Attribute</a>) is not necessarily the enclosing geometry in its model space coordinate system. The spatial extent (footprint) geometry might initially be null, or it might reflect the cell space coordinate system or some other coordinate system. The ability to generate and set spatial extents is useful for building large GeoRaster databases of a global or large regional scope, in which the spatial extents are in one global geodetic coordinate system while the GeoRaster objects (imagery, DEMs, and so on) are in different projected coordinate systems. In such a case, you can create a spatial (R-tree) index on the spatial extents, which requires that all spatial extent geometries have the same SRID value.
                  </p>
                  <p>To ensure that the spatial extent geometry of each GeoRaster object in a table is correct for its model space coordinate system (or for any other coordinate system that you may want to use), you must set the spatial extent. Moreover, to use a spatial index on the spatial extent geometries (described in <a href="georaster-database-creation-management.html#GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E">Indexing GeoRaster Objects</a>), all indexed geometries must be based on the same coordinate system (that is, have the same SRID value).
                  </p>
                  <p>You can set the spatial extent in any of the following ways: specify <code class="codeph">spatialExtent=TRUE</code> as a storage parameter to the <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> procedure or the GeoRaster client-side loader (described in <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a>), use the SQL UPDATE statement, or set the spatial extent during loading with GDAL. If you use the <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> procedure or the loader, the SRID cannot be null or 0 (zero), and if there is an R-tree index on the GeoRaster spatial extent, the SRID of the spatial extent must match the SRID of the existing spatial index; otherwise, the spatial extent is set to a null value.
                  </p>
                  <p>In addition, if you do not already have the spatial extent geometry, you can generate it using the <a href="SDO_GEOR-reference.html#GUID-45E80146-A186-418F-9396-260BCC7A3BE8">SDO_GEOR.generateSpatialExtent</a> function, and use that geometry to update the GeoRaster object. The following example updates the spatial extent geometry of a specified GeoRaster object in the CITY_IMAGES table (created in <a href="georaster-database-creation-management.html#GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8__CHDEJAIF">Example 3-1</a> in <a href="georaster-database-creation-management.html#GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8">Creating a GeoRaster Table</a>) to the generated spatial extent (reflecting the model coordinate system) of that object:
                  </p><pre class="oac_no_warn" dir="ltr">UPDATE city_images c
  SET c.image.spatialExtent = sdo_geor.generateSpatialExtent(image)
    WHERE c.image_id = 100;
COMMIT;
</pre><p>The following example updates the spatial extent geometry of all GeoRaster objects in the CITY_IMAGES table to the generated spatial extent (reflecting the model coordinate system) of that object:</p><pre class="oac_no_warn" dir="ltr">UPDATE city_images c
  SET c.image.spatialExtent = sdo_geor.generateSpatialExtent(image)
    WHERE c.image.spatialExtent is null;
COMMIT;
</pre><p>If you already know the spatial extent geometry for a GeoRaster object, or if you want the spatial extent geometry to be based on a coordinate system other than the one for the model space, construct the SDO_GEOMETRY object or select it from a table, and then update the GeoRaster object to set its spatial extent attribute to that geometry, as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">DECLARE
 geom sdo_geometry;
BEGIN
-- Set geom to an SDO_GEOMETRY object that covers the spatial extent
-- of the desired GeoRaster object. If necessary, perform coordinate
-- system transformation before setting geom.
-- geom := sdo_geometry(...);
  UPDATE city_images c
    SET c.image.spatialExtent = geom WHERE c.image_id = 100;
  COMMIT;
END;</pre></div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-2512A66C-3558-4374-95AB-5A090D99EA78">Special Considerations if the GeoRaster Table Has a Spatial Index</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1194"></a><div class="props_rev_3"><a id="GUID-2512A66C-3558-4374-95AB-5A090D99EA78" name="GUID-2512A66C-3558-4374-95AB-5A090D99EA78"></a><h4 id="GEORS-GUID-2512A66C-3558-4374-95AB-5A090D99EA78" class="sect4"><span class="enumeration_section">3.8.1 </span>Special Considerations if the GeoRaster Table Has a Spatial Index
                  </h4>
                  <div>
                     <p>If you create a spatial R-tree index on the GeoRaster spatial extents (as described in <a href="georaster-database-creation-management.html#GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E">Indexing GeoRaster Objects</a>), all spatial extent geometries must have the same SRID value. However, the GeoRaster objects may have different model SRIDs, and most GeoRaster operations automatically generate a spatial extent for the output GeoRaster objects based on the model SRID of the source GeoRaster object or objects. This can cause problems when the resulting GeoRaster object with a spatial extent is updated into a GeoRaster table, which might already have a spatial index built on its <code class="codeph">spatialExtent</code> attribute but using a different SRID.
                     </p>
                     <p>In such cases, you must transform the spatial extent to the same SRID as that of the spatial index before the insert or update operation. The following example performs a mosaic operation, but then transforms the spatial extent of the resulting GeoRaster object to SRID 4326 before updating the GeoRaster table with that object.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  gr sdo_georaster;
BEGIN
  SELECT georaster INTO gr FROM mosaic_test WHERE georid=1 FOR UPDATE;
  sdo_geor.mosaic('mosaic_data', 'georaster', gr, 'blocking=OPTIMALPADDING,
blocksize=(512,512)');
  -- Transform the spatial extent geometry, if ncessary.
  -- In this example example, the modelSRID of the mosaic is 27302,
  -- but the SRID of the spatial index on mosaic_test is 4326.
  <span class="bold">gr.spatialExtent := sdo_cs.transform(gr.spatialExtent, 4326);</span>
  UPDATE mosaic_test SET georaster=gr WHERE georid=1;
END;
/
</pre><p>If a spatial R-tree index exists, a commit operation after an insert or update operation causes the index to be updated if the inserted or updated GeoRaster object has a spatial extent geometry. This could slow some operations if you perform a commit after each operation, particularly for batch jobs such as batch image loading. It is usually more efficient to balance the performance of index updates with GeoRaster operations, and to commit only in batches after the operations.</p>
                     <p>For example, image data loading (the <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> procedure and the GeoRaster loader) is followed by an internal commit operation, so it would be inefficient to load while generating spatial extents by specifying <code class="codeph">spatialExtent=TRUE</code>. Instead, you should probably specify <code class="codeph">spatialExtent=FALSE</code>, and then update the <code class="codeph">spatialExtent</code> attribute afterward, to speed the loading process.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-004D9CB3-916E-46C3-830B-FA2C88625B88">Generating and Setting Spatial Extents</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS999"></a><div class="props_rev_3"><a id="GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E" name="GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E"></a><h3 id="GEORS-GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E" class="sect3"><span class="enumeration_section">3.9 </span>Indexing GeoRaster Objects
               </h3>
               <div>
                  <div class="section">
                     <p>GeoRaster data can be indexed in various ways. The most important index you can create on a GeoRaster object is a spatial (R-tree) index on the spatial extent (footprint) geometry of the GeoRaster object (<code class="codeph">spatialExtent</code> attribute, described in <a href="georaster-datatypes.html#GUID-E392DB15-C7C3-40E8-815C-527D2CD1F45F">spatialExtent Attribute</a>). For large-scale geospatial image and raster databases, you should always create spatial indexes on the GeoRaster columns. The following are the basic steps to create a spatial index on GeoRaster column. (The examples assume that the GeoRaster table name is CITY_IMAGES and its GeoRaster column name is IMAGE.)
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Insert a row into the USER_SDO_GEOM_METADATA view with the georaster table name (CITY_IMAGES in this example) and the spatial extent of the GeoRaster column name (IMAGE.SPATIALEXTENT). Be sure that the correct SRID value (3371 in this example) is registered.</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_geom_metadata
    (TABLE_NAME,
     COLUMN_NAME,
     DIMINFO,
     SRID)
VALUES (
     'city_images',
     'image.spatialextent',
     SDO_DIM_ARRAY(
        SDO_DIM_ELEMENT('X', -1000000000, 1000000000, 0.005),
        SDO_DIM_ELEMENT('Y', -1000000000, 1000000000, 0.005)),
     3371
);
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Create a spatial index on the GeoRaster column, as in the following example which creates a spatial index named CITY_IMAGES_IDX on the spatial extents of the images using default values for all parameters.</span><div><pre class="oac_no_warn" dir="ltr">CREATE INDEX city_images_idx 
      ON city_images (image.spatialextent)
      INDEXTYPE IS MDSYS.SPATIAL_INDEX;
</pre><p>The preceding statement may fail if there are some invalid spatial extents or if the SRID values in the GeoRaster table do not match the SRID registered in the preceding step. If the statement fails, ensure that all GeoRaster objects have a valid <code class="codeph">spatialExtent</code> geometry attribute and that all <code class="codeph">spatialExtent</code> geometries have the same SRID. (Null for the <code class="codeph">spatialExtent</code> values is acceptable.) Then re-create the spatial index. 
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>See also <a href="georaster-database-creation-management.html#GUID-2512A66C-3558-4374-95AB-5A090D99EA78">Special Considerations if the GeoRaster Table Has a Spatial Index</a> for special considerations if the GeoRaster table already has a spatial index. For more information about creating spatial indexes and about advanced capabilities, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/geors&amp;id=SPATL583" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a>.
                     </p>
                     <p>You can also create one or more other indexes, such as:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Function-based indexes on metadata objects using the Oracle XMLType or Oracle Text document indexing functionality</p>
                        </li>
                        <li>
                           <p>Standard indexes on other user-defined columns of the GeoRaster table, such as cloud coverage, water coverage, or vegetation</p>
                        </li>
                     </ul>
                     <p>You should also create a single B-tree index on the <code class="codeph">rasterId</code>, <code class="codeph">pyramidLevel</code>, <code class="codeph">bandBlockNumber</code>, <code class="codeph">rowBlockNumber</code>, and <code class="codeph">columnBlockNumber</code> columns of each raster data table. This should be done using <code class="codeph">PRIMARY KEY (rasterID, pyramidLevel, bandBlockNumber,rowBlockNumber, columnBlockNumber)</code>, as shown in <a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDEEBGE">Example 3-2</a> and <a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDCEIAC">Example 3-3</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1006"></a><div class="props_rev_3"><a id="GUID-C65D9E81-48AA-4569-B8E3-2A52263B2435" name="GUID-C65D9E81-48AA-4569-B8E3-2A52263B2435"></a><h3 id="GEORS-GUID-C65D9E81-48AA-4569-B8E3-2A52263B2435" class="sect3"><span class="enumeration_section">3.10 </span>Viewing GeoRaster Objects
               </h3>
               <div>
                  <p>To view GeoRaster objects, you have the following options:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Call the <a href="SDO_GEOR-reference.html#GUID-6261233E-5E90-479C-97FD-8125C28EC838">SDO_GEOR.exportTo</a> procedure to export GeoRaster objects to image files, and then display the images using image tools or a Web browser.
                        </p>
                     </li>
                     <li>
                        <p>Use the standalone GeoRaster viewer tool (one of the tools described in <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a>).
                        </p>
                     </li>
                     <li>
                        <p>Use Oracle Fusion Middleware MapViewer or its associated Map Builder utility.</p>
                     </li>
                  </ul>
                  <p>With the GeoRaster viewer tool, you can select a GeoRaster object of a database schema (user), query and display the whole or a subset of a GeoRaster object, zoom in and zoom out, scroll, and perform other basic operations. The pyramid level, cell coordinates, and model coordinates (if the object is georeferenced) are displayed for the point at the mouse pointer location. You can display individual cell values and choose different layers of a multiband or hyperspectral image for RGB full color display. The blocking boundaries can be overlapped on the top of the display. Depending on the data and your requests, the viewer can display the raster data in grayscale, pseudocolor, and 24-bit true color over an intranet or the Internet. Some of the basic GeoRaster metadata is also displayed.</p>
                  <p>The GeoRaster viewer tool allows you to display a virtual mosaic defined as one or a list of GeoRaster tables or views.</p>
                  <p>The GeoRaster viewer tool provides a set of image processing operators for enhanced display of the GeoRaster objects, especially for those whose cell depth is greater than 8 or is a floating-point number. It can also display and apply bitmap masks on the GeoRaster objects if they have bitmap masks.</p>
                  <p>The GeoRaster viewer tool also includes menu commands to call the GeoRaster loader and exporter tools, thus enabling you to use a single tool as an interface to the capabilities of all the GeoRaster tools.</p>
                  <p>Visualization applications can leverage the default RGBA and default pyramid level specifications in the GeoRaster objects. You can set up different bands in a multiband image as the default Red, Green, Blue, and Alpha channels by calling <a href="SDO_GEOR-reference.html#GUID-3E6EA4DC-DEEF-42B7-B296-92FA58515C4D">SDO_GEOR.setDefaultColorLayer</a> or <a href="SDO_GEOR-reference.html#GUID-70FC29B9-588B-47E1-BC48-DE3162C6785E">SDO_GEOR.setDefaultRed</a>, <a href="SDO_GEOR-reference.html#GUID-0CB5060E-6733-40E0-B6AE-3951378EDC4A">SDO_GEOR.setDefaultGreen</a>, <a href="SDO_GEOR-reference.html#GUID-45AB9089-BF53-474B-B59C-28AEE5A34C59">SDO_GEOR.setDefaultBlue</a>, and <a href="SDO_GEOR-reference.html#GUID-9E830C52-D920-4A12-BEB6-73CBCD277CDB">SDO_GEOR.setDefaultAlpha</a>. For large images, you can call <a href="SDO_GEOR-reference.html#GUID-DAD267E0-410B-493F-92E8-FE7F6EF33B6F">SDO_GEOR.setDefaultPyramidLevel</a> to set up the best resolution (pyramid) level of an image for initial display in the applications. For example, for a complete overview of a whole image, it is best to set the top pyramid level as the default pyramid level.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1007"></a><div class="props_rev_3"><a id="GUID-D45DBC81-B4E5-4D06-B1F2-82339C6F52E2" name="GUID-D45DBC81-B4E5-4D06-B1F2-82339C6F52E2"></a><h3 id="GEORS-GUID-D45DBC81-B4E5-4D06-B1F2-82339C6F52E2" class="sect3"><span class="enumeration_section">3.11 </span>Exporting GeoRaster Objects
               </h3>
               <div>
                  <p>To load and export imagery or raster data, always consider third-party ETL tools (see the note in <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a>)
                  </p>
                  <p>If you use features in GeoRaster to export GeoRaster objects to image files, you have the following options: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the GDAL-based ETL tool for concurrent batch exporting, which is described in <a href="georaster-overview-and-concepts.html#GUID-6E9B9872-7222-45AD-8FE1-CAFF596D3955">GDAL-Based ETL Wizard for Concurrent Batch Loading and Exporting</a>.
                        </p>
                     </li>
                     <li>
                        <p>Call the <a href="SDO_GEOR-reference.html#GUID-6261233E-5E90-479C-97FD-8125C28EC838">SDO_GEOR.exportTo</a> procedure (which can export either to a file or to a BLOB object).
                        </p>
                     </li>
                     <li>
                        <p>Use the GeoRaster exporter tool or viewer tool, which are described in <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster Tools: Viewer_ Loader_ Exporter</a>.
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1011"></a><div class="props_rev_3"><a id="GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD" name="GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD"></a><h3 id="GEORS-GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD" class="sect3"><span class="enumeration_section">3.12 </span>Using GeoRaster with Workspace Manager and Label Security
               </h3>
               <div>
                  <p>Oracle Workspace Manager provides a versioning capability for the raster blocks of a GeoRaster object. Oracle Label Security supports GeoRaster objects with enhanced security at the row level of raster blocks.</p>
                  <p>To use GeoRaster with Oracle Workspace Manager or Oracle Label Security, you should create a raster data table (RDT) as a relational table for the GeoRaster objects (see <a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDCEIAC">Example 3-3</a>). You do not need to define an object view of SDO_RASTER type on the base relational RDT.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-A78EEF50-DA67-476E-96C0-F4715620098B">Using GeoRaster with Workspace Manager</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-F33D17DF-B8D8-40CD-8040-44A6F8684B7E">Using GeoRaster with Label Security</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1012"></a><div class="props_rev_3"><a id="GUID-A78EEF50-DA67-476E-96C0-F4715620098B" name="GUID-A78EEF50-DA67-476E-96C0-F4715620098B"></a><h4 id="GEORS-GUID-A78EEF50-DA67-476E-96C0-F4715620098B" class="sect4"><span class="enumeration_section">3.12.1 </span>Using GeoRaster with Workspace Manager
                  </h4>
                  <div>
                     <p>With Workspace Manager, you can conveniently manage changes to the raster data by saving different raster data versions and making modifications in different workspaces. To use GeoRaster with Workspace Manager, you must use relational raster data tables for raster storage and version-enable these relational raster data tables. For example (general format):</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_WM.EnableVersioning (&lt;rdt_relational_table&gt;, 'VIEW_WO_OVERWRITE');
</pre><div class="infoboxnote" id="GUID-A78EEF50-DA67-476E-96C0-F4715620098B__GUID-BAFAA41B-8F5D-4D3C-9165-85202FCE164B">
                        <p class="notep1">Note:</p>
                        <p>You can version-enable only raster data tables. Do not version-enable any GeoRaster tables, where GeoRaster objects are stored, and do not perform any operations that will require a GeoRaster table to be modified while you are in a workspace.</p>
                     </div>
                     <p>After you version-enable a relational RDT, you can use the subprograms in the DBMS_WM package to manage changes to the raster data. If you need to directly modify a raster block, call the DBMS_WM.copyForUpdate procedure before the operation, as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">declare
  geor sdo_georaster;
  cond varchar2(1000);
  lb   blob;
  r1   raw(1024);
  amt  number;
begin
  r1 := utl_raw.copies(utl_raw.cast_to_raw('0'),1024);
 
  select georaster into geor from georaster_table where georid=1;
  cond := 'rasterId=' || geor.rasterId || ' AND pyramidLevel=0 AND ' ||
          ' bandBlockNumber=0 AND rowBlockNumber=0 AND columnBlockNumber=0';
  dbms_wm.copyForUpdate(geor.rasterDataTable, cond);
  sdo_geor.getRasterBlockLocator(geor, 0, 0, 0, 0, lb, null, 'TRUE');
  amt := 1024;
  dbms_lob.write(lb, amt, 1, r1);
end;
/
</pre><p>However, if you modify raster data using GeoRaster subprograms, you do <span class="italic">not</span> need to call the DBMS_WM.copyForUpdate procedure beforehand.
                     </p>
                     <p>For information about Workspace Manager, see <a href="../adwsm/introduction-to-workspace-manager.html#ADWSM010" target="_blank"><span class="italic">Oracle Database Workspace Manager Developer's Guide</span></a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD">Using GeoRaster with Workspace Manager and Label Security</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1013"></a><div class="props_rev_3"><a id="GUID-F33D17DF-B8D8-40CD-8040-44A6F8684B7E" name="GUID-F33D17DF-B8D8-40CD-8040-44A6F8684B7E"></a><h4 id="GEORS-GUID-F33D17DF-B8D8-40CD-8040-44A6F8684B7E" class="sect4"><span class="enumeration_section">3.12.2 </span>Using GeoRaster with Label Security
                  </h4>
                  <div>
                     <div class="section">
                        <p>Oracle Label Security provides row-level access control for sensitive data based on a user's level of security clearance. To use GeoRaster with Label Security, follow these basic steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create the GeoRaster table and relational RDT or RDTs.</span></li>
                        <li class="stepexpand"><span>Create an Oracle Label Security policy and define the label components.</span></li>
                        <li class="stepexpand"><span>Create labeling functions for the GeoRaster table and the relational RDT or RDTs.</span><div>
                              <p>The labels for rows in a GeoRaster table should be generated according to the application's requirements. Use the same label for both the row that stores a GeoRaster object and for the GeoRaster object's raster rows in the associated RDT; otherwise, the GeoRaster objects might be invalid or have an inconsistent status.</p>
                              <p>The following example creates the labeling function for a relational RDT:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION gen_rdt_label(rdt_name varchar2, rid number)
  RETURN LBACSYS.LBAC_LABEL
AS
  tabname varchar2(80);
  schema  varchar2(32);
  grcol   varchar2(1024);
  colname varchar2(30);
  label   NUMBER;
BEGIN
  EXECUTE IMMEDIATE
   'SELECT v.owner, v.table_name, v.column_name grcol, p.column_name ' ||
   '  FROM all_sdo_geor_sysdata v, all_sa_policies p, all_sa_table_policies t '
   || ' WHERE v.rdt_table_name=:1 AND v.raster_id=:2 AND ' ||
   ' v.owner=t.schema_name AND v.table_name=t.table_name AND ' ||
   ' p.policy_name=t.policy_name ' 
   INTO schema, tabname, grcol, colname
   USING upper(rdt_name), rid;
  EXECUTE IMMEDIATE
    'SELECT t.' || colname  ||
     ' FROM ' || schema || '.' || tabname || ' t ' ||
     ' WHERE t.' || grcol || '.rasterdatatable=:1 AND ' ||
     '       t.' || grcol || '.rasterid=:2' 
    INTO label
    USING upper(rdt_name), rid;
  RETURN LBACSYS.LBAC_LABEL.NEW_LBAC_LABEL(label);
END;
/
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Apply the Label Security policy to a GeoRaster table and its associated RDT or RDTs.</span><div>
                              <p>The following example (general format) applies a Label Security policy to an RDT using the labeling function example from the preceding step.</p><pre class="oac_no_warn" dir="ltr">BEGIN
  SA_POLICY_ADMIN.REMOVE_TABLE_POLICY(&lt;policy_name&gt;,&lt;schema_name&gt;,&lt;rdt_relational_table&gt;);
  SA_POLICY_ADMIN.APPLY_TABLE_POLICY(
    POLICY_NAME =&gt; &lt;policy_name&gt;,
    SCHEMA_NAME =&gt; &lt;schema_name&gt;,
    TABLE_NAME  =&gt; &lt;rdt_relational_table&gt;,
    TABLE_OPTIONS =&gt; 'READ_CONTROL,WRITE_CONTROL,CHECK_CONTROL',
    LABEL_FUNCTION =&gt; '&lt;schema_name&gt;.gen_rdt_label(&lt;rdt_relational_table&gt;,:new.rasterid)',
    PREDICATE =&gt; NULL);
END;
/
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create and authorize users, and complete other administrative tasks related to Label Security.</span></li>
                     </ol>
                     <div class="section">
                        <p>You can load GeoRaster data before or after applying the policy to the tables.</p>
                        <p>The ALL_SDO_GEOR_SYSDATA view (described in <a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster uses a system data table (also called the sysdata table) to maintain the relationship between GeoRaster tables and their related raster data tables.">GeoRaster System Data Views (xxx_SDO_GEOR_SYSDATA)</a>) contains system data for all GeoRaster objects accessible by the current user, and accessibility in this case is determined by the user's privileges as defined in the context of discretionary access control (DAC).
                        </p>
                        <p>After the label for a GeoRaster table row is updated, ensure that the related data labels in the RDT are updated, so that the labels are synchronized.</p>
                        <p>For information about Label Security, see <a href="../olsag/introduction-to-oracle-label-security.html#OLSAG001" target="_blank"><span class="italic">Oracle Label Security Administrator's Guide</span></a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD">Using GeoRaster with Workspace Manager and Label Security</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS1015"></a><a id="GEORS1016"></a><a id="GEORS1014"></a><div class="props_rev_3"><a id="GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32" name="GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32"></a><h3 id="GEORS-GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32" class="sect3"><span class="enumeration_section">3.13 </span>Maintaining Efficient Tablespace Use by GeoRaster Objects
               </h3>
               <div>
                  <p>After delete or rollback operations, unused space allocated to a raster data table might not be promptly returned to the underlying tablespace. This could result in wasted tablespace area, and it can be a significant issue if the amount of raster data is large. If the raster data table is created using BasicFiles LOBs in an automatic segment space management tablespace, you can explicitly shrink the <code class="codeph">rasterBlock</code> LOB segment or the raster data table by altering the raster data table, as shown in <a href="georaster-database-creation-management.html#GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32__CHDCJDDI">Example 3-4</a> and <a href="georaster-database-creation-management.html#GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32__CHDFHADH">Example 3-5</a>.
                  </p>
                  <div class="example" id="GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32__CHDCJDDI">
                     <p class="titleinexample">Example 3-4 Shrinking a BasicFile RasterBlock LOB Segment</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE city_images_rdt MODIFY LOB (rasterBlock) (SHRINK SPACE);</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32__CHDFHADH">
                     <p class="titleinexample">Example 3-5 Shrinking a Raster Data Table</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE city_images_rdt ENABLE ROW MOVEMENT;
ALTER TABLE city_images_rdt SHRINK SPACE CASCADE;
</pre></div>
                  <!-- class="example" -->
                  <p>If you are using SecureFiles, or if you are using BasicFiles allocated in a manual segment space management tablespace, you cannot reclaim unused space using the ALTER TABLE statements as shown in the preceding examples. Instead, you should create some working (for temporary use) raster data tables and try to put any intermittent results in these RDTs, and then drop these working RDTs after they are no longer needed.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-D3750F8A-54EB-4334-9F52-522BBEE82BD3" name="GUID-D3750F8A-54EB-4334-9F52-522BBEE82BD3"></a><h3 id="GEORS-GUID-D3750F8A-54EB-4334-9F52-522BBEE82BD3" class="sect3"><span class="enumeration_section">3.14 </span>Checking GeoRaster Tables and Objects in the Database
               </h3>
               <div>
                  <p>For database management purposes, you might need check on GeoRaster tables and objects in the whole database or under a specific schema. After the GeoRaster database is created, you have the following options for checking or listing existing GeoRaster tables, RDT tables, and GeoRaster objects.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the following subprograms check the status of existing GeoRaster objects and related objects in the current schema or the database, depending on the privileges associated with the database connection.</p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-2B2ED5B6-BE91-4BBD-91F0-1A9B98565283">SDO_GEOR_ADMIN.listGeoRasterObjects</a> lists all GeoRaster objects defined in the current schema; or if you call this function while connected as the MDSYS user, all GeoRaster objects defined in the database are listed.
                        </p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-E7199BAA-4C99-4D5C-A2E5-F2DC95442D14">SDO_GEOR_ADMIN.listGeoRasterColumns</a> lists all GeoRaster columns defined in the current schema; or if you call this function while connected as the MDSYS user,  all GeoRaster columns defined in the database are listed.
                        </p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-3BDBD3E3-6FA2-4230-9042-2DF812BCF629">SDO_GEOR_ADMIN.listGeoRasterTables</a> lists all GeoRaster tables defined in the current schema; or if you call this function while connected as the MDSYS user,  all GeoRaster tables defined in the database are listed.
                        </p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-2CDF0178-612F-4DCA-A63D-E151AC4C3CCF">SDO_GEOR_ADMIN.listRDT</a> lists all&nbsp; raster data tables (RDTs) defined in the current schema; or if you call this function while connected as the MDSYS user,  all raster data tables (RDTs) defined in the database are listed. 
                        </p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-C1A8A6F0-8085-4343-8FAE-08E590FFBBB8">SDO_GEOR_ADMIN.listRegisteredRDT</a> lists all registered raster data tables (RDTs) defined in the current schema; or if you call this function while connected as the MDSYS user,&nbsp;all registered RDTs defined in the database are listed . An RDT is&nbsp;<span class="italic">registered</span>&nbsp;if at least one entry in the SYSDATA table refers to it.
                        </p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-579B7EA9-5D89-45B2-A9F2-FC9BE216C827">SDO_GEOR_ADMIN.listUnregisteredRDT</a> lists all unregistered raster data tables (RDTs) defined in the current schema; or if you call this function while connected as the MDSYS user, all unregistered RDTs defined in the database are listed.. An RDT is <span class="italic">unregistered</span>&nbsp;if no entry in the SYSDATA table refers to it.
                        </p>
                     </li>
                     <li>
                        <p>Run SQL queries directly against GeoRaster metadata views, and check or list GeoRaster tables and objects stored in the different schemas. This approach is more flexible than calling subprograms. It also enables some query results that cannot be returned by functions defined in the SDO_GEOR_ADMIN package. The  following are some sample queries.</p>
                        <p>List all&nbsp;GeoRaster objects that are defined in the schema HERMAN and MYTEST and accessible by the current schema.</p><pre class="pre codeblock"><code>SELECT owner,TABLE_NAME,COLUMN_NAME,RDT_TABLE_NAME,RASTER_ID from&nbsp;all_sdo_geor_sysdata where owner='HERMAN' or owner='MYTEST';</code></pre><p>Count the total number of&nbsp;GeoRaster objects accessible by the current schema.</p><pre class="pre codeblock"><code>SELECT count(*) from&nbsp;all_sdo_geor_sysdata;</code></pre><p>Count the total number of&nbsp;GeoRaster objects stored in the GeoRaster table GTF_TABLE in the current schema.</p><pre class="pre codeblock"><code>SELECT count(*) from user_sdo_geor_sysdata where TABLE_NAME='GTF_TABLE';</code></pre><p>List all GeoRaster objects stored in the RDT table RDT_1 in the current schema.</p><pre class="pre codeblock"><code>SELECT TABLE_NAME,COLUMN_NAME,RDT_TABLE_NAME,RASTER_ID from user_sdo_geor_sysdata where RDT_TABLE_NAME='RDT_1';</code></pre><p>Find out all GeoRaster tables that store some raster data in or reference the RDT table RDT_1 in the current schema.</p><pre class="pre codeblock"><code>SELECT distinct TABLE_NAME from user_sdo_geor_sysdata where RDT_TABLE_NAME='RDT_1';</code></pre><p>List all RDT tables that are used by the GeoRaster table GTF_TABLE in the current schema.</p><pre class="pre codeblock"><code>SELECT distinct RDT_TABLE_NAME from user_sdo_geor_sysdata where TABLE_NAME='GTF_TABLE';</code></pre></li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1017"></a><div class="props_rev_3"><a id="GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E" name="GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E"></a><h3 id="GEORS-GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E" class="sect3"><span class="enumeration_section">3.15 </span>Maintaining GeoRaster Objects and System Data in the Database
               </h3>
               <div>
                  <p>Although GeoRaster provides internal database mechanism to prevent the creation of invalid GeoRaster objects and system data, sometimes such GeoRaster objects and system data might exist in the database, especially after an upgrade from a previous release, or after some user errors in operations on GeoRaster system data. Examples of such invalid objects and system data include the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>An entry in the GeoRaster system data views (<span class="italic">xxx</span>_SDO_GEOR_SYSDATA, described in <a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster uses a system data table (also called the sysdata table) to maintain the relationship between GeoRaster tables and their related raster data tables.">GeoRaster System Data Views (xxx_SDO_GEOR_SYSDATA)</a>) refers to a nonexistent GeoRaster table or column.
                        </p>
                     </li>
                     <li>
                        <p>Two or more GeoRaster objects have the same pair of RDT name and raster ID values.</p>
                     </li>
                     <li>
                        <p>Some GeoRaster objects, tables, columns, or RDTs not registered.</p>
                     </li>
                     <li>
                        <p>An RDT name is not unique.</p>
                     </li>
                     <li>
                        <p>A GeoRaster object is non-empty or nonblank, but an associated RDT does not exist.</p>
                     </li>
                  </ul>
                  <p>After a database upgrade, you should do the following.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Call the <a href="SDO_GEOR_ADMIN-reference.html#GUID-05037DB2-5C29-4B19-ABF5-7586CF3117C8">SDO_GEOR_ADMIN.isGeoRasterEnabled</a> function to ensure that GeoRaster is enabled for the current schema.
                        </p>
                     </li>
                     <li>
                        <p>Call the <a href="SDO_GEOR_ADMIN-reference.html#GUID-2E813E4E-C5A5-4884-97FA-DB8E6BEC87D6">SDO_GEOR_ADMIN.isUpgradeNeeded</a> function to check for any invalid GeoRaster objects and invalid system data for the current version. 
                        </p>
                     </li>
                     <li>
                        <p>If there are any errors or invalid data, call the <a href="SDO_GEOR_ADMIN-reference.html#GUID-7B7D8C75-46E9-4278-8B2E-60675055A8F2">SDO_GEOR_ADMIN.upgradeGeoRaster</a> function to have the problems automatically corrected.
                        </p>
                     </li>
                     <li>
                        <p>If you connect as user MDSYS, the <a href="SDO_GEOR_ADMIN-reference.html#GUID-7B7D8C75-46E9-4278-8B2E-60675055A8F2">SDO_GEOR_ADMIN.upgradeGeoRaster</a> function upgrades all GeoRaster objects in the database; otherwise, it upgrades only GeoRaster objects in the schema of the current user. (See the reference and usage information about <a href="SDO_GEOR_ADMIN-reference.html#GUID-7B7D8C75-46E9-4278-8B2E-60675055A8F2">SDO_GEOR_ADMIN.upgradeGeoRaster</a>.
                        </p>
                     </li>
                  </ul>
                  <p>For regular maintenance due to possible user errors, several functions and procedures will be helpful in checking for and correcting invalid GeoRaster objects and system data entries:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>To check if GeoRaster is enabled, call <a href="SDO_GEOR_ADMIN-reference.html#GUID-05037DB2-5C29-4B19-ABF5-7586CF3117C8">SDO_GEOR_ADMIN.isGeoRasterEnabled</a></p>
                     </li>
                     <li>
                        <p>To enable GeoRaster. call <a href="SDO_GEOR_ADMIN-reference.html#GUID-F0868A0F-7DFB-4F0F-AA30-0CC41D8B708E">SDO_GEOR_ADMIN.enableGeoRaster</a></p>
                     </li>
                     <li>
                        <p>To check for errors, call <a href="SDO_GEOR_ADMIN-reference.html#GUID-786E293A-2F1B-4605-AC82-4B788A1BDED6">SDO_GEOR_ADMIN.checkSysdataEntries</a> and <a href="SDO_GEOR_ADMIN-reference.html#GUID-579B7EA9-5D89-45B2-A9F2-FC9BE216C827">SDO_GEOR_ADMIN.listUnregisteredRDT</a>.
                        </p>
                     </li>
                     <li>
                        <p></p>
                     </li>
                     <li>
                        <p>To check for dangling raster data, call <a href="SDO_GEOR_ADMIN-reference.html#GUID-C20A7F7C-C861-437E-BFD3-791B7AFAFB4C">SDO_GEOR_ADMIN.listDanglingRasterData</a>.
                        </p>
                     </li>
                     <li>
                        <p>To correct all invalid system data entries, call <a href="SDO_GEOR_ADMIN-reference.html#GUID-3EEACD9B-7B9C-4606-9DC0-966CFE0CB469">SDO_GEOR_ADMIN.maintainSysdataEntries</a>.
                        </p>
                     </li>
                     <li>
                        <p>To create correct DML triggers for all GeoRaster columns, call <a href="SDO_GEOR_ADMIN-reference.html#GUID-8FC19048-E701-4D73-98E5-64140ED503B3">SDO_GEOR_ADMIN.registerGeoRasterColumns</a>.
                        </p>
                     </li>
                     <li>
                        <p>To register all existing GeoRaster objects in the sysdata table, call <a href="SDO_GEOR_ADMIN-reference.html#GUID-13898CD3-CD1F-4C78-A023-1ED2B3D6C524">SDO_GEOR_ADMIN.registerGeoRasterObjects</a>.
                        </p>
                     </li>
                  </ul>
                  <p>See the reference and usage information about these procedures and functions in <a href="SDO_GEOR_ADMIN-reference.html#GUID-6F9B00F3-56C1-4AF9-82A6-DFBAB1BB489E" title="The SDO_GEOR_ADMIN package contains subprograms (functions and procedures) for administrative operations related to GeoRaster. This chapter presents reference information, with one or more examples, for each subprogram."> SDO_GEOR_ADMIN Package Reference</a>.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1018"></a><div class="props_rev_3"><a id="GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1" name="GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1"></a><h3 id="GEORS-GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1" class="sect3"><span class="enumeration_section">3.16 </span>Transferring GeoRaster Data Between Databases
               </h3>
               <div>
                  <div class="section">
                     <p>You can use either the Data Pump Export and Import utilities or the original Export and Import utilities to transfer GeoRaster data between databases. You must export and import rows from both the GeoRaster table and its related raster data table or tables. After the transfer, you do not need to insert the GeoRaster system data for the imported GeoRaster objects into the USER_SDO_GEOR_SYSDATA view (described in <a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster uses a system data table (also called the sysdata table) to maintain the relationship between GeoRaster tables and their related raster data tables.">GeoRaster System Data Views (xxx_SDO_GEOR_SYSDATA)</a>) in the target schema; however, you should use the <a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a> function to check the validity of imported GeoRaster objects before you perform any operations on these objects.
                     </p>
                     <p>For information about the Data Pump Export and Import utilities and the original Export and Import utilities, see <a href="../sutil/oracle-data-pump-overview.html#SUTIL801" target="_blank"><span class="italic">Oracle Database Utilities</span></a>.
                     </p>
                     <p>To transfer GeoRaster data between databases, follow these general steps:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>Check for and resolve any conflicts, as explained in <a href="georaster-database-creation-management.html#GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696">Checking for and Resolving Conflicts</a>.</span></li>
                     <li><span>Perform the data transfer, as explained in <a href="georaster-database-creation-management.html#GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE">Performing the GeoRaster Data Transfer</a>.</span></li>
                  </ol>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696">Checking for and Resolving Conflicts</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE">Performing the GeoRaster Data Transfer</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1019"></a><div class="props_rev_3"><a id="GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696" name="GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696"></a><h4 id="GEORS-GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696" class="sect4"><span class="enumeration_section">3.16.1 </span>Checking for and Resolving Conflicts
                  </h4>
                  <div>
                     <p>For a successful import of GeoRaster data into a target database, there must be no conflicts in the target schema's GeoRaster system data. The following conditions can cause a conflict:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A raster data table with the same name is already defined in another schema in the target database.</p>
                           <p>For example, you might plan to import a GeoRaster object by creating its raster data table (RDT) in the target schema, but an existing RDT in the target schema might already have the same name. In this case, you should use the <a href="SDO_GEOR_ADMIN-reference.html#GUID-2CDF0178-612F-4DCA-A63D-E151AC4C3CCF">SDO_GEOR_ADMIN.listRDT</a> or <a href="SDO_GEOR_ADMIN-reference.html#GUID-05492210-9524-40A2-8A29-6B7028566FAA">SDO_GEOR_ADMIN.isRDTNameUnique</a> function to check both source database and target database to see if there are RDT name conflicts; and if there are any conflicts, use the <a href="SDO_GEOR_UTL-reference.html#GUID-9B5168A6-2624-4E80-B8C8-DC4815B94E36">SDO_GEOR_UTL.renameRDT</a> procedure to rename the RDT to a different name in the target database to solve the conflicts before you import the GeoRaster objects.
                           </p>
                        </li>
                        <li>
                           <p>Any pairs of raster data table name and raster ID to be inserted into the target schema's USER_SDO_GEOR_SYSDATA view are not unique.</p>
                           <p>For example, if you import RDT data by appending to an existing RDT in the target database, this conflict might occur. In this case, before importing the data into the target database, use the <a href="SDO_GEOR_ADMIN-reference.html#GUID-2B2ED5B6-BE91-4BBD-91F0-1A9B98565283">SDO_GEOR_ADMIN.listGeoRasterObjects</a> function to list all GeoRaster objects defined in the target schema, and make sure that there are no conflicts in the combination of RDT name and raster ID between existing GeoRaster data and the GeoRaster data to be imported. If there are any conflicts, change the raster ID of the GeoRaster object in the target schema to resolve the conflicts; otherwise, those GeoRaster objects with conflicts in the dump file will get rejected when you perform import process.
                           </p>
                        </li>
                     </ul>
                     <p>If you need to check the raster data table (RDT) name and raster ID (RID) information in the dump file, you have the following options: check the information in the source database; request the information from the provider of the dump file; load the dump file into a separate test database and check the information there; or (if you cannot use a separate database for testing) load the dump file into a test schema in the current database and check the information. To load the dump file into a test schema in the current database and check the information, follow these steps:</p>
                     <ol>
                        <li>
                           <p>Create a test schema in the target database.</p>
                        </li>
                        <li>
                           <p>Load all GeoRaster tables into this test schema from the dump file, using the Data Pump Import utility with the <code class="codeph">CONTENT = METADATA_ONLY</code> parameter.
                           </p>
                        </li>
                        <li>
                           <p>Connect to the database as the MDSYS user, and disable all DML triggers on the GeoRaster tables that were loaded in the preceding step.</p>
                        </li>
                        <li>
                           <p>Load the data into the GeoRaster tables, using the Data Pump Import utility with the <code class="codeph">CONTENT = DATA_ONLY</code> parameter.
                           </p>
                        </li>
                        <li>
                           <p>Retrieve the RDT/RID (raster data table name and raster ID) pairs directly from the GeoRaster tables in the test schema.</p>
                        </li>
                     </ol>
                     <p>After you resolve conflicts, you should ensure the integrity of GeoRaster metadata and data (see <a href="georaster-database-creation-management.html#GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E">Maintaining GeoRaster Objects and System Data in the Database</a>). You should also validate any fixed GeoRaster objects before performing a commit or any other operation.
                     </p>
                     <p>For general information about resolving conflicts during import operations, see the description of the <code class="codeph">TABLE_EXISTS_ACTION</code> parameter in the Data Pump Import chapter of <a href="../sutil/datapump-import-utility.html#SUTIL300" target="_blank"><span class="italic">Oracle Database Utilities</span></a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1">Transferring GeoRaster Data Between Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1020"></a><div class="props_rev_3"><a id="GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE" name="GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE"></a><h4 id="GEORS-GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE" class="sect4"><span class="enumeration_section">3.16.2 </span>Performing the GeoRaster Data Transfer
                  </h4>
                  <div>
                     <p>Performing the GeoRaster data transfer involves exporting data from one database and importing it into another.</p>
                     <div class="infoboxnote" id="GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE__GUID-DBFB8C5F-1D61-4A5D-8FEC-87B78A472D99">
                        <p class="notep1">Note:</p>
                        <p>To successfully import GeoRaster data into a Release 19<span class="bold">c</span> database, GeoRaster must be enabled for the imported schema and the schema user must have the CREATE TRIGGER privilege.
                        </p>
                     </div>
                     <p>When you export GeoRaster data from one database and import it into another, the GeoRaster database management system ensures that the necessary GeoRaster internal DML triggers and system data entries are automatically generated after the GeoRaster tables and objects are imported into the target database. (GeoRaster internal DDL triggers are created when GeoRaster is enabled.)</p>
                     <p>Therefore, all GeoRaster internal DML triggers and DDL triggers (which maintain the integrity of the GeoRaster data) should be excluded in <code class="codeph">expdp</code> and <code class="codeph">impdp</code> operations; otherwise, some <code class="codeph">impdp</code> errors such as the following will be raised, even though the errors can be safely ignored:
                     </p><pre class="oac_no_warn" dir="ltr">ORA-39083: Object type TRIGGER failed to create with error:
ORA-13391:  GeoRaster reserved names cannot be used to create regular triggers
</pre><p>To export GeoRaster data, do as you would for other types of data, but exclude the GeoRaster internal DML triggers (whose names start with <code class="codeph">GRDMLTR_</code>) and the internal DDL triggers (named <code class="codeph">SDO_GEOR_ADDL_TRIGGER</code> and <code class="codeph">SDO_GEOR_BDDL_TRIGGER</code>). For example: 
                     </p><pre class="oac_no_warn" dir="ltr">expdp scott schemas=scott directory=dump_dir dumpfile=exp.dmp parfile=exclude.par
Enter password: <span class="italic">password</span>
</pre><p>where the <code class="codeph">exclude.par</code> file contains the following:
                     </p><pre class="oac_no_warn" dir="ltr">exclude=trigger:"like 'GRDMLTR_%'"
exclude=trigger:"= 'SDO_GEOR_ADDL_TRIGGER'"
exclude=trigger:"= 'SDO_GEOR_BDDL_TRIGGER'" 
</pre><p>To import GeoRaster data, do as you would for other types of data, but exclude the GeoRaster internal DML triggers (whose names start with <code class="codeph">GRDMLTR_</code>) and DDL triggers (<code class="codeph">SDO_GEOR_ADDL_TRIGGER</code> and <code class="codeph">SDO_GEOR_BDDL_TRIGGER</code> from a Release 19<span class="italic">c</span> database) if you did not exclude them in the export operation. For example: 
                     </p>
                     <ol>
                        <li>
                           <p>Ensure that no conflicts exist between the GeoRaster data to be imported and the existing GeoRaster data in the target database, as explained in <a href="georaster-database-creation-management.html#GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696">Checking for and Resolving Conflicts</a>.
                           </p>
                           <p>If any conflicts are not resolved, some exceptions will be raised and only non-conflicted GeoRaster data will be imported into the target database.</p>
                        </li>
                        <li>
                           <p>Import GeoRaster data as you would for other types of data, but exclude the GeoRaster internal DML triggers (whose names start with <code class="codeph">GRDMLTR_</code>) and DDL triggers (<code class="codeph">SDO_GEOR_ADDL_TRIGGER</code> and <code class="codeph">SDO_GEOR_BDDL_TRIGGER</code> from a Release 19<span class="italic">c</span> database) if you did not exclude them in the export operation. For example:
                           </p><pre class="oac_no_warn" dir="ltr">impdp scott schemas=scott directory=dump_dir dumpfile=exp.dmp parfile=exclude.par
Enter password: <span class="italic">password</span>
</pre><p>where the <code class="codeph">exclude.par</code> file contains the following:
                           </p><pre class="oac_no_warn" dir="ltr">exclude=trigger:"like 'GRDMLTR_%'"
exclude=trigger:"= 'SDO_GEOR_ADDL_TRIGGER'"
exclude=trigger:"= 'SDO_GEOR_BDDL_TRIGGER'" 
</pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1">Transferring GeoRaster Data Between Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS1195"></a><div class="props_rev_3"><a id="GUID-51C68427-CA7F-4E85-90AD-780D770DF81F" name="GUID-51C68427-CA7F-4E85-90AD-780D770DF81F"></a><h3 id="GEORS-GUID-51C68427-CA7F-4E85-90AD-780D770DF81F" class="sect3"><span class="enumeration_section">3.17 </span>Using Transportable Tablespaces with GeoRaster Data
               </h3>
               <div>
                  <div class="section">
                     <p>You can use the Oracle Database transportable tablespaces feature with GeoRaster data.</p>
                     <p>If a tablespace to be transported contains any spatial indexes on the GeoRaster tables or raster data tables (RDTs), you may have to take some preparatory steps. See the Usage Notes for the SDO_UTIL.PREPARE_FOR_TTS and SDO_UTIL.INITIALIZE_INDEXES_FOR_TTS procedures in <a href="../spatl/SDO_UTIL-reference.html#SPATL180" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a> for more information about using the transportable tablespace feature with spatial data.
                     </p>
                     <p>For a successful import of GeoRaster data into a target database, there must be no conflicts in the target schema's GeoRaster system data. Before you transport the tablespace to another database or schema, it is recommended (but not required) that you check for and resolve such conflicts by following the procedure described in <a href="georaster-database-creation-management.html#GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696">Checking for and Resolving Conflicts</a>. For this reason, you should design GeoRaster tables and RDT tables so as to avoid such foreseeable conflicts before you use such transportable tablespaces in the source database.
                     </p>
                     <p>Regardless or whether a transported tablespace has any spatial indexes, after transporting the tablespace that contains GeoRaster objects, do the following:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>Call the <a href="SDO_GEOR_ADMIN-reference.html#GUID-13898CD3-CD1F-4C78-A023-1ED2B3D6C524">SDO_GEOR_ADMIN.registerGeoRasterObjects</a> procedure (described in <a href="SDO_GEOR_ADMIN-reference.html#GUID-6F9B00F3-56C1-4AF9-82A6-DFBAB1BB489E" title="The SDO_GEOR_ADMIN package contains subprograms (functions and procedures) for administrative operations related to GeoRaster. This chapter presents reference information, with one or more examples, for each subprogram."> SDO_GEOR_ADMIN Package Reference</a>) to register all GeoRaster objects in the current schema or new database.</span></li>
                     <li><span>Before you use the transported GeoRaster data, perform the "regular maintenance" operations described in <a href="georaster-database-creation-management.html#GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E">Maintaining GeoRaster Objects and System Data in the Database</a>, to maintain GeoRaster objects and system data and to ensure all GeoRaster objects are correctly transported and properly registered.</span></li>
                     <li><span>If you find any conflicts, call the <a href="SDO_GEOR_UTL-reference.html#GUID-9B5168A6-2624-4E80-B8C8-DC4815B94E36">SDO_GEOR_UTL.renameRDT</a> or <a href="SDO_GEOR_UTL-reference.html#GUID-94664890-EDA7-4518-B87A-99AD4D8672DA">SDO_GEOR_UTL.makeRDTNamesUnique</a> procedure to solve such conflicts, and validate again.</span></li>
                  </ol>
                  <div class="section">
                     <p>For detailed information about transportable tablespaces and transporting tablespaces to other databases, see <a href="../admin/transporting-data.html#ADMIN11394" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="This chapter describes how to perform important GeoRaster database creation and management operations.">GeoRaster Database Creation and Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
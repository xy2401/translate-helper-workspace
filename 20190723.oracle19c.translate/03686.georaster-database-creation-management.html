<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes how to perform important GeoRaster database creation and management operations."></meta>
      <meta name="description" content="This chapter describes how to perform important GeoRaster database creation and management operations."></meta>
      <title>GeoRaster数据库创建和管理</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="GeoRaster Developer&#39;s Guide "></meta>
      <meta property="og:description" content="This chapter describes how to perform important GeoRaster database creation and management operations."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="GeoRaster Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-georaster-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T11:48:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94793-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="georaster-datatypes.html" title="Previous" type="text/html"></link>
      <link rel="next" href="georaster-data-manipulation.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="GEORS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="georaster-datatypes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="georaster-data-manipulation.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">GeoRaster开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">GeoRaster数据库创建和管理</li>
            </ol>
            <a id="GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" name="GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6"></a><a id="GEORS300"></a>
            
            <h2 id="GEORS-GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" class="sect2"><span class="enumeration_chapter">3</span> GeoRaster数据库创建和管理</h2>
         </header>
         <div class="ind">
            <div>
               <div><span>本章介绍如何执行重要的GeoRaster数据库创建和管理操作。</span> 构建和管理GeoRaster数据库的典型工作流程包括所描述的大部分或全部步骤。
               </div>
               <p>为将使用该功能的所有模式启用GeoRaster后，创建GeoRaster对象，加载数据并验证GeoRaster对象，您可以按任何顺序执行其余操作，具体取决于您的应用程序需求。您也可以跳过某些操作。</p>
               <p>某些操作可以使用SQL执行，某些操作必须使用PL / SQL块执行。在插入，更新，重新格式化，压缩，解压缩或删除GeoRaster对象的元数据或单元数据之后以及提交更改之前，必须<a href="georaster-data-manipulation.html#GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121">更新GeoRaster对象</a> （请参阅<a href="georaster-data-manipulation.html#GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121">在提交之前更新GeoRaster对象</a> ）。有关这些操作的一些示例，请参阅<a href="georaster-overview-and-concepts.html#GUID-0B5D0180-E897-4F30-9E65-65D827024A95" title="GeoRaster includes several PL/SQL and Java sample code files that show common operations.">GeoRaster PL / SQL和Java</a>演示文件中描述的<a href="georaster-overview-and-concepts.html#GUID-0B5D0180-E897-4F30-9E65-65D827024A95" title="GeoRaster包含几个显示常见操作的PL / SQL和Java示例代码文件。">演示文件</a>以及<a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="SDO_GEOR包中包含用于创建，修改和检索有关GeoRaster对象的信息的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR包参考中</a>的示例。
               </p>
               <p>另请参阅<a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作中的操作</a> 。
               </p>
               <p>本书的其他章节涵盖了高级主题（ <a href="raster-algebra-and-analytics.html#GUID-C75744C9-FA04-4391-96F2-59EF2EA212FF" title="本章介绍了栅格代数语言（PL / SQL和代数表达式）和相关的栅格操作，包括条件查询，基于单元格的更新或编辑，数学运算，分类，动态统计分析，逻辑运算及其制图建模中的应用。">光栅代数和分析</a>以及<a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a> ），并提供了有关GeoRaster PL / SQL包的详细参考信息（ <a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="SDO_GEOR包中包含用于创建，修改和检索有关GeoRaster对象的信息的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR包参考</a> ， <a href="SDO_GEOR_ADMIN-reference.html#GUID-6F9B00F3-56C1-4AF9-82A6-DFBAB1BB489E" title="SDO_GEOR_ADMIN包中包含与GeoRaster相关的管理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_ADMIN包参考</a> ， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-92406947-E079-487D-B0D0-3342ECC23E34" title="SDO_GEOR_AGGR包中包含用于在GeoRaster对象上执行高级大规模镶嵌，追加和虚拟镶嵌操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_AGGR包参考</a> ， <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a> ，以及<a href="SDO_GEOR_UTL-reference.html#GUID-080B4F44-F59D-4E2A-AA97-FF209C69C4D2" title="SDO_GEOR_UTL包中包含与GeoRaster相关的实用程序操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_UTL包参考</a> ）。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-20119C51-6B07-4535-954E-7C55850F51F3">在架构级别启用GeoRaster</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88">为GeoRaster用户添加数据文件和临时表空间</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13">创建GeoRaster表和栅格数据表</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D">创建新的GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-FC1E8154-B852-4D5D-A348-45E69785BF81">加载栅格数据</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-B79DA887-66D0-4961-A2EA-2052144F2B17">验证GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">地理配准GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-004D9CB3-916E-46C3-830B-FA2C88625B88">生成和设置空间范围</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E">索引GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-C65D9E81-48AA-4569-B8E3-2A52263B2435">查看GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-D45DBC81-B4E5-4D06-B1F2-82339C6F52E2">导出GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD">将GeoRaster与Workspace Manager和Label Security一起使用</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32">维护GeoRaster对象使用的高效表空间</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-D3750F8A-54EB-4334-9F52-522BBEE82BD3">检查数据库中的GeoRaster表和对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E">维护数据库中的GeoRaster对象和系统数据</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1">在数据库之间传输GeoRaster数据</a><br></li>
                  <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-51C68427-CA7F-4E85-90AD-780D770DF81F">将可传输表空间与GeoRaster数据一起使用</a><br></li>
               </ul>
            </div>
            
            <div class="props_rev_3"><a id="GUID-20119C51-6B07-4535-954E-7C55850F51F3" name="GUID-20119C51-6B07-4535-954E-7C55850F51F3"></a><h3 id="GEORS-GUID-20119C51-6B07-4535-954E-7C55850F51F3" class="sect3"><span class="enumeration_section">3.1</span>在架构级别启用GeoRaster</h3>
               <div>
                  <div class="section">
                     <p>必须为将使用GeoRaster功能的每个数据库架构启用GeoRaster。</p>
                     <p>默认情况下，在最初安装Oracle Spatial and Graph后，将禁用GeoRaster功能。GeoRaster只能在模式范围内启用（即不适用于整个数据库），并且必须为将使用GeoRaster功能的每个模式启用GeoRaster。</p>
                     <p>要启用GeoRaster，请对将启用GeoRaster <span class="italic">的每个架构</span>执行以下步骤：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>以该架构的用户身份连接到数据库。例如：</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SCOTT / <span class="italic">&lt;password-for-scott&gt;</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>输入以下语句：</span><div><pre class="oac_no_warn" dir="ltr">执行sdo_geor_admin.enableGeoRaster;</pre></div>
                     </li>
                     <li class="stepexpand"><span>通过检查以下语句是否返回<code class="codeph">TRUE</code>验证现在是否已启用GeoRaster：</span><div><pre class="oac_no_warn" dir="ltr">SELECT sdo_geor_admin.isGeoRasterEnabled FROM DUAL;</pre></div>
                     </li>
                     <li class="stepexpand"><span>确保此模式的用户具有CREATE TRIGGER权限（GeoRaster正常工作所需的权限）。如果用户没有CREATE TRIGGER权限（或者您不知道），请以DBA用户身份连接并向用户授予该权限。例如：</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA GRANT创建触发器TO scott;</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>如果的GeoRaster表已创建并用数据填充，那么数据库升级后的GeoRaster自动为表的模式启用，您<span class="italic"><span class="bold">不需要</span></span>为架构重新启用的GeoRaster。（只需确保为用户授予CREATE TABLE权限。）
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1375"></a><div class="props_rev_3"><a id="GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88" name="GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88"></a><h3 id="GEORS-GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88" class="sect3"><span class="enumeration_section">3.2</span>为GeoRaster用户添加数据文件和临时表空间</h3>
               <div>
                  <p>GeoRaster数据库通常非常大。出于存储和性能原因，数据库模式应使用一个或多个用户表空间来存储GeoRaster（避免使用系统表空间存储GeoRaster数据），并且应该适当地将数据文件添加到表空间。如果未使用Oracle自动存储管理（Oracle ASM）或bigfile表空间，则应为每个表空间创建许多数据文件，并尽可能将数据文件分发到不同的磁盘上。您还应该创建数据文件或更改现有数据文件，以便在数据库中需要更多空间时自动增加它们的大小。</p>
                  <p>GeoRaster表可以包含大量（可能几乎无限制）的GeoRaster对象。应使用栅格数据表（RDT）来包含有限数量的GeoRaster对象的栅格块，具体取决于栅格的大小。与GeoRaster表相比，RDT不应该变得太大，除非要应用分区。此外，可以在不同的表空间上创建RDT，以便将栅格块分发到不同的磁盘。（另请参阅<a href="georaster-database-creation-management.html#GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13">创建GeoRaster表和栅格数据表</a> 。）
                  </p>
                  <p>GeoRaster数据库可以使用临时表空间进行某些操作。当GeoRaster操作中涉及压缩时，特别是对于大规模镶嵌操作，需要一些临时空间来存储中间压缩或未压缩数据。如果GeoRaster用户没有临时表空间，则使用数据库系统临时表空间。这不是有效的，并且可能减慢镶嵌和其他操作。因此，您应始终为GeoRaster用户创建临时表空间。例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT system / <span class="italic">&lt;密码&gt;</span> ; CREATE TEMPORARY TABLESPACE geor_temp TEMPFILE'geor_temp_1.f'SIZE 1G AUTOEXTEND ON; ALTER USER <span class="italic">&lt;georaster_user&gt;</span> TEMPORARY TABLESPACE geor_temp;</pre><p>通常，所需的临时空间量是有限的。但是，对于大规模镶嵌，如果要压缩结果，则所需的临时空间等于结果的未压缩图像大小。因此，在为GeoRaster用户创建临时表空间时，请指定<code class="codeph">AUTOEXTEND ON</code> 。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS986"></a><div class="props_rev_3"><a id="GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13" name="GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13"></a><h3 id="GEORS-GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13" class="sect3"><span class="enumeration_section">3.3</span>创建GeoRaster表和栅格数据表</h3>
               <div>
                  <p>在使用GeoRaster对象之前，必须创建一个GeoRaster表和一个或多个栅格数据表（如果它们尚不存在）。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8">创建GeoRaster表</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431">创建栅格数据表</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-41CD2847-8823-479A-AC0F-A991B2F083A9">GeoRaster DML触发器</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS988"></a><a id="GEORS987"></a><div class="props_rev_3"><a id="GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8" name="GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8"></a><h4 id="GEORS-GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8" class="sect4"><span class="enumeration_section">3.3.1</span>创建GeoRaster表</h4>
                  <div>
                     <p>GeoRaster表是包含至少一个SDO_GEORASTER类型的列的任何表。该列可以是另一个用户定义的对象类型的属性列。<a href="georaster-database-creation-management.html#GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8__CHDEJAIF">例3-1</a>创建了一个名为CITY_IMAGES的GeoRaster表，其中包含一个名为IMAGE的列，用于存储GeoRaster对象。
                     </p>
                     <div class="example" id="GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8__CHDEJAIF">
                        <p class="titleinexample">示例3-1为城市图像创建GeoRaster表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE city_images（image_id NUMBER PRIMARY KEY，image_description VARCHAR2（50），image SDO_GEORASTER）;</pre><p>有关GeoRaster表的更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-DB21CC32-06DC-4E18-A4FB-B15C389C1F72" title="GeoRaster优化元数据和数据的物理存储。">GeoRaster物理存储</a> 。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13">创建GeoRaster表和栅格数据表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS991"></a><a id="GEORS1214"></a><a id="GEORS989"></a><div class="props_rev_3"><a id="GUID-9A353A7D-CD42-4692-AFD2-554353919431" name="GUID-9A353A7D-CD42-4692-AFD2-554353919431"></a><h4 id="GEORS-GUID-9A353A7D-CD42-4692-AFD2-554353919431" class="sect4"><span class="enumeration_section">3.3.2</span>创建栅格数据表</h4>
                  <div>
                     <p><a id="d16109e496" class="indexterm-anchor"></a><a id="d16109e500" class="indexterm-anchor"></a>创建GeoRaster表后，您应创建一个或多个栅格数据表（RDT）以与GeoRaster表中的对象一起使用。您可以将栅格数据表创建为对象表或关系表。在创建RDT时，您应该使用LOB存储格式SecureFiles LOB（SecureFiles）。与使用原始LOB存储范例BasicFiles LOBS（BasicFiles）相比，使用SecureFiles可显着提高GeoRaster操作的性能。
                     </p>
                     <p><a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDEEBGE">示例3-2</a>使用SecureFiles创建栅格数据表。RDT将用于存储CITY_IMAGES表或其他GeoRaster表中的一个或多个GeoRaster对象的所有栅格块。（在创建GeoRaster对象之前，不会创建GeoRaster对象和栅格数据表之间的关联，如<a href="georaster-database-creation-management.html#GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D">创建新的GeoRaster对象中所述</a> 。）
                     </p>
                     <div class="example" id="GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDEEBGE">
                        <p class="titleinexample">示例3-2使用SecureFiles创建栅格数据表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE city_images_rdt OF SDO_RASTER（PRIMARY KEY（rasterID，pyramidLevel，bandBlockNumber，rowBlockNumber，columnBlockNumber））TABLESPACE im_tbs_2 LOB（rasterBlock）STORE AS SECUREFILE（CACHE）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDCEIAC">
                        <p class="titleinexample">示例3-3使用SecureFiles创建栅格数据表（关系）</p>
                        <p><a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDCEIAC">示例3-3</a>创建了一个与<a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDEEBGE">示例3-2中</a>名称相同的栅格数据表，也使用SecureFiles，但将其创建为关系表而不是对象表。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE city_images_rdt（rasterID NUMBER，pyramidLevel NUMBER，bandBlockNumber NUMBER，rowBlockNumber NUMBER，columnBlockNumber NUMBER，blockMBR SDO_GEOMETRY，rasterBlock BLOB，CONSTRAINT pkey PRIMARY KEY（rasterId，pyramidLevel，bandBlockNumber，rowBlockNumber，columnBlockNumber））LOB（rasterblock）STORE AS SECUREFILE（缓存）;</pre><p>栅格数据表的CREATE TABLE语句必须包含以下子句（包含在前面的示例中）：</p><pre class="oac_no_warn" dir="ltr">（PRIMARY KEY（rasterID，pyramidLevel，bandBlockNumber，rowBlockNumber，columnBlockNumber））</pre><p>此PRIMARY KEY子句在栅格数据表上创建B树索引，此索引对于最佳查询性能至关重要。</p>
                        <p>使用BasicFiles时，可以为LOB存储指定更大的CHUNK大小（16或32 KB）以提高性能。使用SecureFiles，无需指定CHUNK大小参数，并且几乎没有其他存储参数需要考虑。必须使用自动段空间管理选项在表空间中创建使用SecureFiles LOB的栅格数据表。有关使用Oracle SecureFiles和BasicFiles LOB的性能注意事项的信息，请参阅<a href="../adlob/index.html" target="_blank"><span class="italic">Oracle Database SecureFiles和Large Objects Developer's Guide</span></a> 。
                        </p>
                        <p>有关创建表的参考信息（包括指定LOB存储），请参阅“ <a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span class="italic">Oracle数据库SQL语言参考”中</span></a>有关CREATE TABLE语句的部分。
                        </p>
                        <p>有关创建栅格数据表时关键字和选项的更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-2F832FEF-9937-4BF9-BB32-FBD056FCF017">栅格数据表</a> 。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13">创建GeoRaster表和栅格数据表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS992"></a><div class="props_rev_3"><a id="GUID-41CD2847-8823-479A-AC0F-A991B2F083A9" name="GUID-41CD2847-8823-479A-AC0F-A991B2F083A9"></a><h4 id="GEORS-GUID-41CD2847-8823-479A-AC0F-A991B2F083A9" class="sect4"><span class="enumeration_section">3.3.3</span> GeoRaster DML触发器</h4>
                  <div>
                     <p>为确保内部GeoRaster表和数据结构的一致性和完整性，只要用户创建GeoRaster表（即具有至少一个GeoRaster列的表），GeoRaster就会自动为每个GeoRaster列创建唯一的DML触发器，但具有以下异常：如果使用ALTER TABLE语句添加一个或多个GeoRaster列，则必须调用<a href="SDO_GEOR_UTL-reference.html#GUID-CCA772B5-AA1E-4A53-B64C-67D8F6052CF2">SDO_GEOR_UTL.createDMLTrigger</a>过程以在每个添加的GeoRaster列上创建DML触发器。在某些情况下，例如数据库升级或数据迁移，您可以调用<a href="SDO_GEOR_UTL-reference.html#GUID-AD56A631-0111-44A2-8A94-4F326FCABA3B">SDO_GEOR_UTL.recreateDMLTriggers</a>过程在所有GeoRaster列上重新创建DML触发器。
                     </p>
                     <p>在影响GeoRaster对象的以下每个数据操作语言（DML）操作之后触发触发器：插入行，更新GeoRaster对象和删除行。</p>
                     <p>触发器触发时，GeoRaster会自动执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在插入操作之后，触发器将带有GeoRaster表名，GeoRaster列名，栅格数据表名和<code class="codeph">rasterID</code>值的行插入USER_SDO_GEOR_SYSDATA视图（在<a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）中描述</a> ）。如果已存在相同的条目，则会引发异常。
                           </p>
                        </li>
                        <li>
                           <p>在更新操作之后，如果新的GeoRaster对象为null或为空，则触发器将删除旧的GeoRaster对象。如果旧的GeoRaster对象的USER_SDO_GEOR_SYSDATA视图中没有条目（即，如果旧的GeoRaster对象为null），则触发器会在该视图中为新的GeoRaster对象插入一行。如果旧的GeoRaster对象的USER_SDO_GEOR_SYSDATA视图中有条目，则触发器会更新信息以反映新的GeoRaster对象。</p>
                        </li>
                        <li>
                           <p>执行删除操作后，触发器会在其栅格数据表中删除GeoRaster对象的栅格数据块，并删除GeoRaster对象的USER_SDO_GEOR_SYSDATA视图中的行。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-796CD9B4-27C6-49F5-B374-CB4316ABBE13">创建GeoRaster表和栅格数据表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS993"></a><div class="props_rev_3"><a id="GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D" name="GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D"></a><h3 id="GEORS-GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D" class="sect3"><span class="enumeration_section">3.4</span>创建新的GeoRaster对象</h3>
               <div>
                  <p>在将GeoRaster图像存储在GeoRaster表中之前，必须先创建GeoRaster对象并将其插入GeoRaster表，然后再开始处理。要创建新的GeoRaster对象，您有以下选择：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<a href="SDO_GEOR-reference.html#GUID-524A6FD9-24D3-4CCA-A9D1-0B23819E4CA6">SDO_GEOR.init</a>函数初始化一个空的GeoRaster对象。
                        </p>
                     </li>
                     <li>
                        <p>使用<a href="SDO_GEOR-reference.html#GUID-7D203CE7-A6F0-4545-92B4-5E8ED3E007FE">SDO_GEOR.createBlank</a>函数创建一个空白的GeoRaster对象。
                        </p>
                     </li>
                  </ul>
                  <p>如果未正确创建对象（即，如果对象是原子null），则无法执行任何GeoRaster操作。<a href="SDO_GEOR-reference.html#GUID-524A6FD9-24D3-4CCA-A9D1-0B23819E4CA6">SDO_GEOR.init</a>和<a href="SDO_GEOR-reference.html#GUID-7D203CE7-A6F0-4545-92B4-5E8ED3E007FE">SDO_GEOR.createBlank</a>函数使用栅格数据表和栅格ID值初始化GeoRaster对象（如果尚未指定），GeoRaster DML触发器确保栅格数据表名称和栅格ID值对于当前是唯一的用户。
                  </p>
                  <p>如果新的GeoRaster对象将保存栅格单元数据（由另一个GeoRaster过程产生，例如<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> ， <a href="SDO_GEOR-reference.html#GUID-827C49FA-3759-4EC3-8ED5-A9A4E623EEEB">SDO_GEOR.subset</a>或<a href="SDO_GEOR-reference.html#GUID-72D93D49-BF98-4AB9-8FEA-C386A1BE1071">SDO_GEOR.copy</a> ），并且如果此新GeoRaster对象的栅格数据表不存在，则必须首先创建栅格数据表。有关创建栅格数据表的信息（包括示例），请参阅<a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431">创建栅格数据表</a> 。
                  </p>
                  <p><a id="d16109e711" class="indexterm-anchor"></a><a id="d16109e713" class="indexterm-anchor"></a>为避免潜在的GeoRaster数据问题（其中一些<a href="georaster-database-creation-management.html#GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E">在数据库</a>中<a href="georaster-database-creation-management.html#GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E">维护GeoRaster对象和系统数据中</a>有所描述），必须在GeoRaster系统视图中<span class="bold">注册</span>初始化的GeoRaster对象，这在将GeoRaster对象插入GeoRaster时自动完成。表。这应该在您对GeoRaster对象执行任何其他操作之前完成。如果未注册源或目标GeoRaster对象，则需要操作栅格数据表的任何GeoRaster操作都会引发异常。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS994"></a><div class="props_rev_3"><a id="GUID-FC1E8154-B852-4D5D-A348-45E69785BF81" name="GUID-FC1E8154-B852-4D5D-A348-45E69785BF81"></a><h3 id="GEORS-GUID-FC1E8154-B852-4D5D-A348-45E69785BF81" class="sect3"><span class="enumeration_section">3.5</span>加载栅格数据</h3>
               <div>
                  <p>要加载和导出图像或栅格数据，可以考虑使用第三方ETL工具（请参阅<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster工具中</a>的注释<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">：Viewer_ Loader_ Exporter</a> ）。例如，您可以使用gdal_translate命令行和其他GDAL实用程序（ <a href="http://www.gdal.org/gdal_utilities.html" target="_blank">http://www.gdal.org/gdal_utilities.html</a> ），它通过Oracle Spatial GeoRaster驱动程序完全支持GeoRaster。
                  </p>
                  <p>您还可以使用GeoRaster中的功能来加载栅格数据。使用GeoRaster，您有以下选项：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用基于GDAL的ETL工具进行并发批量加载和导出。在<a href="georaster-overview-and-concepts.html#GUID-6E9B9872-7222-45AD-8FE1-CAFF596D3955">基于GDAL的ETL向导中</a>描述了此工具， <a href="georaster-overview-and-concepts.html#GUID-6E9B9872-7222-45AD-8FE1-CAFF596D3955">用于并发批量加载和导出</a> 。
                        </p>
                     </li>
                     <li>
                        <p>在PL / SQL中调用<a href="SDO_GEOR_GDAL-reference.html#GUID-FD266345-B16B-41EA-8567-07265C15EF61">SDO_GEOR_GDAL.translate</a>过程以将图像加载到GeoRaster对象中。
                        </p>
                     </li>
                     <li>
                        <p>在PL / SQL中，调用<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>过程将图像加载到GeoRaster对象中。
                        </p>
                     </li>
                     <li>
                        <p>使用基于JAI的Viewer <a href="georaster-overview-and-concepts.html#GUID-8FE18098-EE55-490D-81C9-7DE1DCFDDB34">-Loader_和Exporter</a>中描述的基于GeoRaster JAI的加载器工具或查看器工具。
                        </p>
                     </li>
                  </ul>
                  <p>使用最后两个选项（ <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>和基于JAI的工具），您可以执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>压缩栅格数据并将数据存储在JPEG压缩或DEFLATE压缩的GeoRaster对象中。</p>
                     </li>
                     <li>
                        <p>将ESRI世界文件或Digital Globe RPC文本文件（.rpb）加载到现有GeoRaster对象中，并对栅格数据进行地理配准，而无需重新加载。您还可以使用world文件指定SRID并生成数据的空间范围。</p>
                     </li>
                     <li>
                        <p>使用地理配准加载带有或不带栅格数据的GeoTIFF格式文件。要加载和导出GeoTIFF图像的地理配准信息，需要GeoTIFF库。有关说明，请参阅<a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">Georeferencing GeoRaster对象</a> 。
                        </p>
                     </li>
                  </ul>
                  <p>将栅格数据加载到GeoRaster对象后，必须通过调用<a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a>函数确保该对象有效，如<a href="georaster-database-creation-management.html#GUID-B79DA887-66D0-4961-A2EA-2052144F2B17">验证GeoRaster对象中所述</a> 。
                  </p>
                  <p>因为ESRI世界文件或。 <code class="codeph">rpb</code>文件不包含坐标系信息，可以为加载操作指定坐标参考系统的SRID值。但是，如果未指定SRID，则加载程序将GeoRaster对象的模型SRID设置为0（零），这意味着GeoRaster对象无效，因此必须使用<a href="SDO_GEOR-reference.html#GUID-8CE5E5B6-F109-444F-9CE2-91580CD085D3">SDO_GEOR.setModelSRID</a>过程指定此对象的有效模型空间。如果您还不知道模型空间的坐标系， <a id="d16109e851" class="indexterm-anchor"></a><a id="d16109e853" class="indexterm-anchor"></a>您可以将SRID值指定为999999，这意味着坐标参考系统未知。（具体来说，SRID 999999与名为<code class="codeph">unknown CRS</code>的坐标参考系统相关联。）稍后，当您知道模型空间的实际坐标参照系时，可以相应地设置SRID值。
                  </p>
                  <p>有关<code class="codeph">unknown CRS</code> （SRID 999999）坐标参考系统的更多信息，请参阅<a href="../spatl/coordinate-systems-concepts.html#SPATL734" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a> 。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-FFB6CD25-B4AC-4746-BAC5-E9ED82D763F0">加载阻塞和最佳填充</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-A60C8EB8-E7BF-41D6-B674-5DD5EF383426">在不解压缩的情况下加载JPEG和JPEG 2000图像</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-7FBC6EB0-D4B8-43F8-A6F5-11C4319632AB">加载前重新格式化源光栅</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-FFB6CD25-B4AC-4746-BAC5-E9ED82D763F0" name="GUID-FFB6CD25-B4AC-4746-BAC5-E9ED82D763F0"></a><h4 id="GEORS-GUID-FFB6CD25-B4AC-4746-BAC5-E9ED82D763F0" class="sect4"><span class="enumeration_section">3.5.1</span>使用阻塞和最佳填充加载</h4>
                  <div>
                     <p>除非您要加载JPEG或JPEG2000图像并将其存储而不进行任何更改，否则在将图像或光栅文件加载到GeoRaster对象时，请始终考虑并应用适当的数据阻止，因为文件格式可能具有非常不同的阻止方案。通常，阻塞大小应为512x512或更大。阻塞大小没有绝对规则，但栅格越大，您可能使用的阻塞大小越大。对于常规栅格，512x512到2048x2048是合适的。对于非常小的图像（小于1024x1024x3），没有阻塞可能是一个不错的选择。避免阻止太小（例如64x64和128x128）或太大的大小，并避免极端阻塞大小，例如每块0.5（一半），1或8行像素。通常，块的矩形形状应该是正方形或接近正方形。对于不同的应用程序，您可以调整阻塞以平衡高效存储并获得最佳性能。</p>
                     <p>您还应始终在加载期间应用最佳填充。换句话说，除了指定<code class="codeph">blocksize</code>之外， <code class="codeph">blocking=OPTIMALPADDING</code>指定<code class="codeph">blocking=OPTIMALPADDING</code> 。GeoRaster将填充应用于右列和底行块，使其与其他块的大小相同。如果块大小不是特定栅格的最佳值，则默认的结果填充会浪费一些存储空间。当您指定<code class="codeph">blocking=OPTIMALPADDING</code> ，所有GeoRaster过程和ETL工具都会自动调整GeoRaster维度大小数组，以便最适合减少GeoRaster对象存储中的填充量。始终围绕用户指定的值进行调整。请参阅<a href="SDO_GEOR_UTL-reference.html#GUID-4F642F02-94B1-40FA-8C92-E916031293D1">SDO_GEOR_UTL.calcOptimizedBlockSize</a>过程的使用说明中表中的<code class="codeph">blocking</code>关键字的说明。
                     </p>
                     <p>有关如何在使用GDAL命令行时应用最佳填充，请参阅以下示例：</p><pre class="pre codeblock"><code>gdal_translate -of georaster /images/image_1.tif \ georaster：georaster / georaster @ my_db，image_table，raster \ -co“insert =（id，label，raster）values（1，'image_1'，sdo_geor.init（'rdt_table' ，1）“\ -co blockxsize = 512 \ -co blockysize = 512 \ -co blockbsize = 3 \ -co blocking = optimalpadding \ -co interleave = BIP</code></pre><p>有关如何在使用<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>过程时应用最佳填充，请参阅该过程的参考主题中的示例。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-FC1E8154-B852-4D5D-A348-45E69785BF81">加载栅格数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A60C8EB8-E7BF-41D6-B674-5DD5EF383426" name="GUID-A60C8EB8-E7BF-41D6-B674-5DD5EF383426"></a><h4 id="GEORS-GUID-A60C8EB8-E7BF-41D6-B674-5DD5EF383426" class="sect4"><span class="enumeration_section">3.5.2在不解</span>压缩的情况下加载JPEG和JPEG 2000图像</h4>
                  <div>
                     <p>GeoRaster支持JPEG压缩，其中GeoRaster块存储为JPEG文件。GeoRaster还支持JPEG 2000压缩，其中GeoRaster将单个块存储为JPEG 2000文件。在某些特殊情况下，您可以在<span class="italic">不进行</span>解压缩和重新压缩的情况下加载和导出JPEG或JPEG 2000图像，从而显着提高性能。
                     </p>
                     <p>对于JPEG，如果图像文件是JPEG文件，则可以使用基于JAI的GeoRaster加载程序直接加载图像而不进行解压缩和重新压缩，GeoRaster对象的压缩类型指定为JPEG-F并且没有为GeoRaster对象指定阻塞存储（即GeoRaster对象只有一个块）。</p>
                     <p>对于JPEG 2000，您可以使用GDAL或基于GDAL的GeoRaster ETL工具直接加载图像而无需解压缩和重新压缩 - 如果图像文件是JPEG2000文件，并且如果没有使用的参数需要更改JPEG的内部结构2000档。例如，以下脚本直接加载JPEG 2000文件而不进行解压缩。</p><pre class="pre codeblock"><code>gdal_translate -of georaster /images/image_3.jp2 \ georaster：georaster / georaster @ my_db，image_table，raster \ -co“insert =（id，label，raster）values（3，'image_3'，sdo_geor.init（'rdt_table'） ，3）“\ -cocress = jp2-f</code></pre><p>但是，如果使用的任何参数需要更改JPEG 2000数据的内部结构，则无法直接加载。以下示例需要解压缩和再压缩，从而导致加载时间的显着增加。</p><pre class="pre codeblock"><code>gdal_translate -of georaster /images/image_4.jp2 \ georaster：georaster / georaster @ my_db，image_table，raster \ -co“insert =（id，label，raster）values（4，'image_4'，sdo_geor.init（'rdt_table'） ，4）“\ -co compress = jp2-f \ -co blockxsize = 1024 \ -co blockysize = 1024 \ -srcwin 100 200 1000 1000 \ -outsize 50％50％</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-FC1E8154-B852-4D5D-A348-45E69785BF81">加载栅格数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS995"></a><div class="props_rev_3"><a id="GUID-7FBC6EB0-D4B8-43F8-A6F5-11C4319632AB" name="GUID-7FBC6EB0-D4B8-43F8-A6F5-11C4319632AB"></a><h4 id="GEORS-GUID-7FBC6EB0-D4B8-43F8-A6F5-11C4319632AB" class="sect4"><span class="enumeration_section">3.5.3</span>加载前重新格式化源光栅</h4>
                  <div>
                     <p>基于GeoRaster JAI的加载程序不支持BSQ交错中的源光栅文件，如果文件太大，它可能会引发“内存不足”错误，并且可能有其他限制。为避免此类问题，您可以重新格式化和重新锁定源文件，以便可以正确加载它们。但是，建议您使用基于GDAL的ETL加载程序，该加载程序通常没有此类问题和要求。</p>
                     <p>例如，一种方法是使用<a href="http://www.gdal.org" target="_blank"><code class="codeph">http://www.gdal.org</code></a>提供的开源光栅转换库GDAL重新格式化或重新格式化图像或光栅文件，以便JAI（Java Advanced Imaging）可以处理它。GDAL本身支持GeoRaster，可以直接导入和导出GeoRaster对象，也可以处理GeoRaster对象;有关更多信息，请参阅<a href="http://www.oracle.com/technetwork/database/enterprise-edition/getting-started-with-gdal-133874.pdf" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/database/enterprise-edition/getting-started-with-gdal-133874.pdf</code></a> 。您还可以使用GDAL生成TFW文件。例如，使用GDAL命令行或（用于批量转换）shell执行以下两个命令（单行上的每个命令）：</p><pre class="oac_no_warn" dir="ltr">gdal_translate -of GTiff -co“TFW = YES”-co“INTERLEAVE = PIXEL”-co“TILED = YES”D：\ my_image.tif D：\ my_new_image.tif gdal_translate -of GTiff -co“TILED = YES”-co “TFW = YES”D：\ my_image.ecw D：\ my_new_image.tif</pre><p>在前面的示例中，第一个命令生成TFW文件，将交错更改为BIP（由JAI支持），并将图像重新锁定为256x256。第二个命令将ECW转换为TIFF，生成TFW，并重新锁定图像。</p>
                     <p>然后使用GeoRaster加载器工具（在<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster工具中</a>描述<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">：Viewer_ Loader_ Exporter</a> ），指定重新锁定，以便可以成功加载图像，然后有效地从数据库中检索图像，如下例所示（单个命令）：</p><pre class="oac_no_warn" dir="ltr">java -Xmx1024m oracle.spatial.georaster.tools。GeoRasterLoader mymachine db11 6521 georaster georaster thin 32 T globe image“blocking = true，blocksize =（512,512,3）”“D：my_image.tif，2，RDT_15，D：\ my_image.tfw，82213”</pre><p>如果在调用<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>以加载非常大的图像时收到“内存不足”错误，请尝试使用不同的块大小参数加载图像，或者在加载前使用GDAL将图像重新锁定为较小的内部图块大小。对于非常大的图像，您还可以使用GDAL将图像平铺为多个较小的图像文件，其大小可以是JAI可以处理的，或者使用GDAL直接加载和导出图像。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-FC1E8154-B852-4D5D-A348-45E69785BF81">加载栅格数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS996"></a><div class="props_rev_3"><a id="GUID-B79DA887-66D0-4961-A2EA-2052144F2B17" name="GUID-B79DA887-66D0-4961-A2EA-2052144F2B17"></a><h3 id="GEORS-GUID-B79DA887-66D0-4961-A2EA-2052144F2B17" class="sect3"><span class="enumeration_section">3.6</span>验证GeoRaster对象</h3>
               <div>
                  <p>在使用GeoRaster对象之前或手动编辑GeoRaster对象的栅格数据和元数据之后，应确保该对象有效。验证GeoRaster对象包括检查GeoRaster对象的注册，检查元数据和栅格单元数据，以及确保元数据和数据一致。例如，验证检查栅格类型，尺寸信息和单元块的实际大小，并执行其他检查。</p>
                  <p>如果您使用了GeoRaster <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">Tools：Viewer_ Loader_ Exporter中</a>描述的GeoRaster加载程序工具，则在加载操作期间会验证GeoRaster对象。
                  </p>
                  <p>GeoRaster提供以下验证子程序：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a>验证GeoRaster对象，包括单元格数据和元数据。如果对象有效，则返回<code class="codeph">TRUE</code> ;否则，返回下列之一：指示Oracle错误代码，为什么GeoRaster对象是无效的， <code class="codeph">FALSE</code>如果验证未知原因而失败，或<code class="codeph">NULL</code>如果GeoRaster对象为空。创建GeoRaster对象后，应始终使用此功能。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-64122DD0-D412-49A9-A73B-7D550CCCA78E">SDO_GEOR.schemaValidate</a>根据GeoRaster XML架构验证元数据。如果<a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a>函数返回错误代码13454，则可以使用此函数来定位错误。<a href="SDO_GEOR-reference.html#GUID-64122DD0-D412-49A9-A73B-7D550CCCA78E">SDO_GEOR.schemaValidate</a>和<a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a>函数不验证空间范围几何。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-1AC1C8C0-9D2D-45F5-9D09-EE802DEDDD76">SDO_GEOR.validateBlockMBR</a>验证与栅格数据表中存储的每个栅格块关联的<code class="codeph">blockMBR</code>几何。如果存在任何无效的<code class="codeph">blockMBR</code>几何，请调用<a href="SDO_GEOR-reference.html#GUID-3D259BE8-962A-457D-96AB-70282BD75B2C">SDO_GEOR.generateBlockMBR</a>过程以重新生成它们。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS997"></a><div class="props_rev_3"><a id="GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0" name="GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0"></a><h3 id="GEORS-GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0" class="sect3"><span class="enumeration_section">3.7</span>地理配准GeoRaster对象</h3>
               <div>
                  <p>如地理参考中所解释的， <a href="georaster-overview-and-concepts.html#GUID-E32BF03B-DB83-422E-B7D0-C0F3073890F9" title="GeoRaster空间参考系统（SRS）是GeoRaster对象的元数据组件，包括与地理配准相关的信息。地理配准建立了GeoRaster数据的单元坐标与真实世界地面坐标（或某些本地坐标）之间的关系。地理配准将地面坐标分配给单元格坐标，将单元格坐标分配给地面坐标。">地理</a>配准建立了GeoRaster数据的单元坐标与真实世界地面坐标（或某些本地坐标）之间的关系。如果需要对GeoRaster对象进行地理配准，可以使用以下方法：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果原始图像已经过地理配准，并且地理配准信息存储在ESRI世界文件中。包含RPC系数的<code class="codeph">rpb</code>文件，您可以使用<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>过程加载ESRI世界文件或。来自文件或CLOB对象的<code class="codeph">rpb</code>文件，以及图像数据本身（以FILE或BLOB格式）。您还可以使用GeoRaster客户端加载器工具（在<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster工具中</a>描述<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">：Viewer_ Loader_ Exporter</a> ）来加载ESRI世界文件或。来自文件的<code class="codeph">rpb</code>文件以及图像文件本身。
                        </p>
                        <p>因为ESRI世界文件或。 <code class="codeph">rpb</code>文件未指定模型坐标系，您可以使用Oracle SRID以下列任一方式设置地理参考GeoRaster对象的模型空间：将SRID与世界文件一起指定为<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>过程的参数或GeoRaster客户端加载器（在<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">GeoRaster Tools：Viewer_ Loader_ Exporter中描述</a> ）;或者，在加载世界文件后，调用<a href="SDO_GEOR-reference.html#GUID-8CE5E5B6-F109-444F-9CE2-91580CD085D3">SDO_GEOR.setModelSRID</a>过程。您还可以调用<a href="SDO_GEOR-reference.html#GUID-8CE5E5B6-F109-444F-9CE2-91580CD085D3">SDO_GEOR.setModelSRID</a>过程来更改地理配准的GeoRaster对象的模型空间。
                        </p>
                     </li>
                     <li>
                        <p>如果原始图像是地理配准的GeoTIFF图像，则可以使用<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>过程通过将<code class="codeph">GEOTIFF</code>指定为输入格式来加载具有地理配<code class="codeph">GEOTIFF</code>的图像。要仅将没有栅格图像数据的GeoTIFF图像中的地理配准信息加载到现有GeoRaster对象中，请添加<code class="codeph">raster=false</code>存储参数。如果GeoTIFF配置值与Oracle Spatial and Graph识别的任何SRID不匹配，则可以使用<code class="codeph">srid</code>存储参数指定备份SRID。
                        </p>
                        <p>GeoTIFF <code class="codeph">PixelIsArea</code>栅格空间相当于GeoRaster基于左上角的单元坐标系。导出到GeoTiff始终位于<code class="codeph">PixelIsArea</code>栅格空间中，如果GeoRaster对象位于基于中心的单元坐标系中，则会对仿射变换进行半像素调整。从GeoTIFF导入始终是基于GeoRaster中心的单元坐标系，如果在<code class="codeph">PixelIsArea</code>栅格空间中指定了GeoTIFF文件，则会对仿射变换进行半像素调整。
                        </p>
                        <p>您还可以使用GeoRaster客户端加载器工具（在<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster工具：Viewer_ Loader_ Exporter中描述</a> ）使用存储参数<code class="codeph">geotiff=true</code>加载具有地理<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">配准的</a> GeoTIFF图像。如果省略此参数或指定<code class="codeph">geotiff=false</code> ，则图像将作为简单的TIFF图像加载，而不进行地理配准。<code class="codeph">raster</code>和<code class="codeph">srid</code>存储参数也适用于客户端加载器工具。
                        </p>
                        <p>要使用GeoRaster客户端工具加载或导出GeoTIFF图像，请将以下GeoTIFF库添加到CLASSPATH定义中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">xtiff-jai.jar</code> （可从SourceForge Extensible-TIFF-JAI组获得）</p>
                           </li>
                           <li>
                              <p><code class="codeph">geotiff-jai.jar</code> （可从SourceForge GeoTIFF-JAI组获得）</p>
                           </li>
                        </ul>
                        <p><a id="d16109e1347" class="indexterm-anchor"></a><a id="d16109e1349" class="indexterm-anchor"></a>要使用<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>或<a href="SDO_GEOR-reference.html#GUID-6261233E-5E90-479C-97FD-8125C28EC838">SDO_GEOR.exportTo</a>过程加载或导出GeoTIFF图像，请通过以SYSTEM用户身份连接到数据库将这些库加载到MDSYS模式中，根据需要编辑<span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">/md/admin/sdoldgtf.sql</code>以反映<code class="codeph">xtiff-jai.jar</code>和<code class="codeph">geotiff-jai.jar</code>文件的路径，并运行<code class="codeph">sdoldgtf.sql</code> SQL * Plus脚本。作为使用<code class="codeph">sdoldgtf.sql</code>脚本的替代方法，您可以输入以下命令：</p><pre class="oac_no_warn" dir="ltr">loadjava -user system / <span class="italic">password @ database</span> -resolve -force -synonym -schema MDSYS -grant PUBLIC xtiff-jai.jar loadjava -user system / <span class="italic">password @ database</span> -resolve -force -synonym -schema MDSYS -grant PUBLIC geotiff-jai.jar</pre><p>如果数据库降级到Oracle Database <span class="italic">11g</span>之前的版本，则应根据<span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">/md/admin/sdormgtf.sql</code>的脚本卸载这些库，根据需要对其进行编辑以反映<code class="codeph">xtiff-jai.jar</code>的路径和<code class="codeph">geotiff-jai.jar</code>文件，并运行<code class="codeph">sdormgtf.sql</code>脚本或输入以下命令：</p><pre class="oac_no_warn" dir="ltr">dropjava -user system / <span class="italic">password @ database</span> -resolve -force -synonym -schema MDSYS -grant PUBLIC xtiff-jai.jar dropjava -user system / <span class="italic">password @ database</span> -resolve -force -synonym -schema MDSYS -grant PUBLIC geotiff-jai.jar</pre></li>
                     <li>
                        <p>您可以使用<a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a>过程通过直接访问GeoRaster SRS元数据来添加，修改和删除地理配准信息。例如，您可以创建SDO_GEOR_SRS对象并分配系数和相关的地理配准信息，然后调用<a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a>过程以添加或更新任何GeoRaster对象的空间参考信息。您可以使用<a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a>过程为所有支持的功能拟合地理配准模型设置空间参考信息。从现有DLT模型和现有RPC模型设置SRS信息的示例包含在<a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a>过程的参考部分中。
                        </p>
                        <p>如果您知道一个GeoRaster对象与另一个GeoRaster对象具有相同的SRS信息，则可以调用<a href="SDO_GEOR-reference.html#GUID-FBC8D0DC-4C02-484B-8D99-F34A4C157EA7">SDO_GEOR.getSRS</a>函数从此GeoRaster对象检索SDO_GEOR_SRS对象，然后调用<a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a>过程以对第一个GeoRaster对象进行地理配准。
                        </p>
                     </li>
                     <li>
                        <p>如果可以使用仿射变换对GeoRaster对象进行地理配准，则可以调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>过程直接对GeoRaster对象进行地理配准。如<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>的参考信息中所述，该过程采用系数<code class="codeph">A</code> ， <code class="codeph">B</code> ， <code class="codeph">C</code> ， <code class="codeph">D</code> ， <code class="codeph">E</code> ， <code class="codeph">F</code>等信息，将它们转换为系数<code class="codeph">a</code> ， <code class="codeph">b</code> ， <code class="codeph">c</code> ， <code class="codeph">d</code> ， <code class="codeph">e</code> ， <code class="codeph">f</code>和将它们存储在GeoRaster对象的空间参考信息中。如果原始栅格数据被纠正并且其原点（左上角）的模型坐标是（x0，y0）并且其空间分辨率或比例是<code class="codeph">s</code> ，则以下情况为真：A = s，B = 0， C = x0，D = 0，E = -s，F = y0。
                        </p>
                     </li>
                     <li>
                        <p>如果您有地面控制点（GCP）或想要自己收集GCP，您可以调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>函数对GeoRaster对象进行地理配准。有关更多信息，请参阅<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" title="除了空间参考功能外，还提供了高级地理配准功能。">高级地理配准</a> 。
                        </p>
                     </li>
                  </ul>
                  <p><a id="d16109e1513" class="indexterm-anchor"></a><a id="d16109e1517" class="indexterm-anchor"></a>基于地理配准的GeoRaster对象的SRS信息，转换GeoRaster坐标信息意味着找到与特定单元格（栅格）坐标相关联的模型（地面）坐标，反之亦然。也就是说，您可以执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>给定特定的单元格坐标，您可以使用<a href="SDO_GEOR-reference.html#GUID-9BA7B6F8-B6AE-4D4B-A264-F4977FB998C8">SDO_GEOR.getModelCoordinate</a>函数找到关联的模型空间坐标。例如，如果您识别图像中的某个点，则可以找到与该点关联的经度和纬度坐标。
                        </p>
                     </li>
                     <li>
                        <p>给定模型空间坐标，您可以使用<a href="SDO_GEOR-reference.html#GUID-65B7D251-A852-44AE-904A-36787748A6E6">SDO_GEOR.getCellCoordinate</a>函数找到关联的单元格坐标。例如，如果您标识经度和纬度坐标，则可以在与这些坐标关联的图像中找到该单元格。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS998"></a><div class="props_rev_3"><a id="GUID-004D9CB3-916E-46C3-830B-FA2C88625B88" name="GUID-004D9CB3-916E-46C3-830B-FA2C88625B88"></a><h3 id="GEORS-GUID-004D9CB3-916E-46C3-830B-FA2C88625B88" class="sect3"><span class="enumeration_section">3.8</span>生成和设置空间范围</h3>
               <div>
                  <p>创建GeoRaster对象时，其空间范围（ <code class="codeph">spatialExtent</code>属性，在<a href="georaster-datatypes.html#GUID-E392DB15-C7C3-40E8-815C-527D2CD1F45F">spatialExtent属性中</a>描述）不一定是其模型空间坐标系中的封闭几何。空间范围（足迹）几何可能最初为空，或者它可能反映单元格空间坐标系或某些其他坐标系。生成和设置空间范围的功能对于构建全局或大型区域范围的大型GeoRaster数据库非常有用，其中空间范围位于一个全局大地坐标系中，而GeoRaster对象（图像，DEM等）位于不同的投影坐标系。在这种情况下，您可以在空间范围上创建空间（R树）索引，这要求所有空间范围几何具有相同的SRID值。
                  </p>
                  <p>要确保表中每个GeoRaster对象的空间范围几何对于其模型空间坐标系（或您可能要使用的任何其他坐标系）是正确的，必须设置空间范围。此外，要在空间范围几何上使用空间索引（在<a href="georaster-database-creation-management.html#GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E">索引地理栅格对象中</a>描述），所有索引几何必须基于相同的坐标系（即，具有相同的SRID值）。
                  </p>
                  <p>您可以通过以下任何方式设置空间范围：将<code class="codeph">spatialExtent=TRUE</code>指定为<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>过程或GeoRaster客户端加载程序（在<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">GeoRaster工具：Viewer_ Loader_ Exporter中</a>描述）的存储参数，使用SQL UPDATE语句，或使用GDAL加载期间设置空间范围。如果使用<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>过程或加载程序，则SRID不能为null或0（零），并且如果GeoRaster空间范围上存在R树索引，则空间范围的SRID必须与SRID的SRID匹配。现有空间指数;否则，空间范围设置为空值。
                  </p>
                  <p>此外，如果您还没有空间范围几何体，则可以使用<a href="SDO_GEOR-reference.html#GUID-45E80146-A186-418F-9396-260BCC7A3BE8">SDO_GEOR.generateSpatialExtent</a>函数生成它，并使用该几何体更新GeoRaster对象。以下示例将CITY_IMAGES表（在<a href="georaster-database-creation-management.html#GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8">创建GeoRaster表</a>中的<a href="georaster-database-creation-management.html#GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8__CHDEJAIF">示例3-1</a>中<a href="georaster-database-creation-management.html#GUID-2524D3F1-8E8B-476B-839C-E8D518AEF7B8">创建</a> ）中指定的GeoRaster对象的空间范围几何更新为该对象的生成空间范围（反映模型坐标系）：</p><pre class="oac_no_warn" dir="ltr">UPDATE city_images c SET c.image.spatialExtent = sdo_geor.generateSpatialExtent（image）WHERE c.image_id = 100;承诺;</pre><p>以下示例将CITY_IMAGES表中所有GeoRaster对象的空间范围几何更新为该对象的生成空间范围（反映模型坐标系）：</p><pre class="oac_no_warn" dir="ltr">UPDATE city_images c SET c.image.spatialExtent = sdo_geor.generateSpatialExtent（image）WHERE c.image.spatialExtent为null;承诺;</pre><p>如果您已经知道GeoRaster对象的空间范围几何，或者您希望空间范围几何基于除模型空间之外的坐标系，请构造SDO_GEOMETRY对象或从表中选择它，然后更新GeoRaster对象以将其空间范围属性设置为该几何，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">DECLARE geom sdo_geometry; BEGIN  - 将geom设置为覆盖所需GeoRaster对象的空间范围的SDO_GEOMETRY对象。如有必要，在设置geom之前执行坐标系转换。-  geom：= sdo_geometry（...）; UPDATE city_images c SET c.image.spatialExtent = geom WHERE c.image_id = 100;承诺;结束;</pre></div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-2512A66C-3558-4374-95AB-5A090D99EA78">如果GeoRaster表具有空间索引，则需要特别注意</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1194"></a><div class="props_rev_3"><a id="GUID-2512A66C-3558-4374-95AB-5A090D99EA78" name="GUID-2512A66C-3558-4374-95AB-5A090D99EA78"></a><h4 id="GEORS-GUID-2512A66C-3558-4374-95AB-5A090D99EA78" class="sect4"><span class="enumeration_section">3.8.1</span> GeoRaster表具有空间索引的特殊注意事项</h4>
                  <div>
                     <p>如果在GeoRaster空间范围上创建空间R树索引（如<a href="georaster-database-creation-management.html#GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E">索引GeoRaster对象中所述</a> ），则所有空间范围几何必须具有相同的SRID值。但是，GeoRaster对象可能具有不同的模型SRID，并且大多数GeoRaster操作会根据源GeoRaster对象的模型SRID自动为输出GeoRaster对象生成空间范围。当具有空间范围的结果GeoRaster对象更新为GeoRaster表时，这可能会导致问题，该表可能已经在其<code class="codeph">spatialExtent</code>属性上构建了空间索引，但使用了不同的SRID。</p>
                     <p>在这种情况下，必须在插入或更新操作之前将空间范围转换为与空间索引相同的SRID。以下示例执行镶嵌操作，但在使用该对象更新GeoRaster表之前，将生成的GeoRaster对象的空间范围转换为SRID 4326。</p><pre class="oac_no_warn" dir="ltr">DECLARE gr sdo_georaster; BEGIN SELECT georaster INTO gr FROM mosaic_test WHERE georid = 1 FOR UPDATE; sdo_geor.mosaic（'mosaic_data'，'georaster'，gr，'blocking = OPTIMALPADDING，blocksize =（512,512）'）; - 如果必要，转换空间范围几何。- 在此示例示例中，镶嵌的modelSRID为27302，但mosaic_test上的空间索引的SRID为4326。
  <span class="bold">gr.spatialExtent：= sdo_cs.transform（gr.spatialExtent，4326）;</span>更新mosaic_test SET georaster = gr WHERE georid = 1;结束; /</pre><p>如果存在空间R树索引，则插入或更新操作之后的提交操作会导致在插入或更新的GeoRaster对象具有空间范围几何时更新索引。如果在每次操作后执行提交，这可能会减慢某些操作，尤其是对于批处理作业（如批量映像加载）。通常，更高效地平衡索引更新的性能与GeoRaster操作，并且仅在操作之后批量提交。</p>
                     <p>例如，图像数据加载（ <a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>过程和GeoRaster加载器）之后是内部提交操作，因此通过指定<code class="codeph">spatialExtent=TRUE</code>来加载生成空间范围时效率很低。相反，您应该指定<code class="codeph">spatialExtent=FALSE</code> ，然后更新<code class="codeph">spatialExtent</code>属性，以加快加载过程。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-004D9CB3-916E-46C3-830B-FA2C88625B88">生成和设置空间范围</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS999"></a><div class="props_rev_3"><a id="GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E" name="GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E"></a><h3 id="GEORS-GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E" class="sect3"><span class="enumeration_section">3.9</span>索引GeoRaster对象</h3>
               <div>
                  <div class="section">
                     <p>可以通过各种方式索引GeoRaster数据。您可以在GeoRaster对象上创建的最重要的索引是GeoRaster对象的空间范围（覆盖）几何上的空间（R树）索引（ <code class="codeph">spatialExtent</code>属性，在<a href="georaster-datatypes.html#GUID-E392DB15-C7C3-40E8-815C-527D2CD1F45F">spatialExtent属性中</a>描述）。对于大规模地理空间图像和栅格数据库，应始终在GeoRaster列上创建空间索引。以下是在GeoRaster列上创建空间索引的基本步骤。（这些示例假设GeoRaster表名称为CITY_IMAGES，其GeoRaster列名称为IMAGE。）
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>在USER_SDO_GEOM_METADATA视图中插入一行，其中包含georaster表名（本例中为CITY_IMAGES）和GeoRaster列名的空间范围（IMAGE.SPATIALEXTENT）。确保注册了正确的SRID值（本例中为3371）。</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_geom_metadata（TABLE_NAME，COLUMN_NAME，DIMINFO，SRID）VALUES（'city_images'，'image.spatialextent'，SDO_DIM_ARRAY（SDO_DIM_ELEMENT（'X'， -  100000000000,1000000000,0.005），SDO_DIM_ELEMENT（'Y'， -  100000000，1000000000） ，0.005）），3371）;</pre></div>
                     </li>
                     <li class="stepexpand"><span>在GeoRaster列上创建空间索引，如下例所示，该示例使用所有参数的默认值在图像的空间范围上创建名为CITY_IMAGES_IDX的空间索引。</span><div><pre class="oac_no_warn" dir="ltr">CREATE INDEX city_images_idx ON city_images（image.spatialextent）INDEXTYPE是MDSYS.SPATIAL_INDEX;</pre><p>如果存在一些无效的空间范围，或者GeoRaster表中的SRID值与上一步骤中注册的SRID不匹配，则上述语句可能会失败。如果语句失败，请确保所有GeoRaster对象都具有有效的<code class="codeph">spatialExtent</code>几何属性，并且所有<code class="codeph">spatialExtent</code>几何都具有相同的SRID。 （可以接受<code class="codeph">spatialExtent</code>值的空值。）然后重新创建空间索引。
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <p><a href="georaster-database-creation-management.html#GUID-2512A66C-3558-4374-95AB-5A090D99EA78">如果GeoRaster表具有空间索引</a> ，如果GeoRaster表已具有空间索引，请参阅<a href="georaster-database-creation-management.html#GUID-2512A66C-3558-4374-95AB-5A090D99EA78">特殊注意事项以</a>获取特殊注意事项。有关创建空间索引和高级功能的更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/geors&amp;id=SPATL583" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a> 。
                     </p>
                     <p>您还可以创建一个或多个其他索引，例如：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用Oracle XMLType或Oracle Text文档索引功能对元数据对象进行基于函数的索引</p>
                        </li>
                        <li>
                           <p>GeoRaster表的其他用户定义列上的标准索引，例如云覆盖，水覆盖或植被</p>
                        </li>
                     </ul>
                     <p>您还应该在每个栅格数据表的<code class="codeph">rasterId</code> ， <code class="codeph">pyramidLevel</code> ， <code class="codeph">bandBlockNumber</code> ， <code class="codeph">rowBlockNumber</code>和<code class="codeph">columnBlockNumber</code>列上创建单个B树索引。这应该使用<code class="codeph">PRIMARY KEY (rasterID, pyramidLevel, bandBlockNumber,rowBlockNumber, columnBlockNumber)</code> ，如<a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDEEBGE">例3-2</a>和<a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDCEIAC">例3-3所示</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1006"></a><div class="props_rev_3"><a id="GUID-C65D9E81-48AA-4569-B8E3-2A52263B2435" name="GUID-C65D9E81-48AA-4569-B8E3-2A52263B2435"></a><h3 id="GEORS-GUID-C65D9E81-48AA-4569-B8E3-2A52263B2435" class="sect3"><span class="enumeration_section">3.10</span>查看GeoRaster对象</h3>
               <div>
                  <p>要查看GeoRaster对象，您有以下选择：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>调用<a href="SDO_GEOR-reference.html#GUID-6261233E-5E90-479C-97FD-8125C28EC838">SDO_GEOR.exportTo</a>过程将GeoRaster对象导出到图像文件，然后使用图像工具或Web浏览器显示图像。
                        </p>
                     </li>
                     <li>
                        <p>使用独立的GeoRaster查看器工具（GeoRaster工具中描述的<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">工具之一：Viewer_ Loader_ Exporter</a> ）。
                        </p>
                     </li>
                     <li>
                        <p>使用Oracle融合中间件MapViewer或其关联的Map Builder实用程序。</p>
                     </li>
                  </ul>
                  <p>使用GeoRaster查看器工具，您可以选择数据库模式（用户）的GeoRaster对象，查询和显示GeoRaster对象的全部或子集，放大和缩小，滚动以及执行其他基本操作。对于鼠标指针位置处的点，显示金字塔等级，单元坐标和模型坐标（如果对象是地理配准的）。您可以显示单个单元格值，并为RGB全彩色显示选择多波段或高光谱图像的不同层。阻挡边界可以重叠在显示器的顶部。根据数据和您的请求，查看器可以通过Intranet或Internet以灰度，伪彩色和24位真彩色显示栅格数据。还会显示一些基本的GeoRaster元数据。</p>
                  <p>GeoRaster查看器工具允许您显示定义为一个或一组GeoRaster表或视图的虚拟马赛克。</p>
                  <p>GeoRaster查看器工具提供了一组图像处理运算符，用于增强GeoRaster对象的显示，特别是对于单元格深度大于8或者是浮点数的那些。如果它们具有位图掩码，它还可以在GeoRaster对象上显示和应用位图蒙版。</p>
                  <p>GeoRaster查看器工具还包括用于调用GeoRaster加载程序和导出程序工具的菜单命令，因此您可以使用单个工具作为所有GeoRaster工具功能的接口。</p>
                  <p>可视化应用程序可以利用GeoRaster对象中的默认RGBA和默认金字塔等级规范。您可以通过调用<a href="SDO_GEOR-reference.html#GUID-3E6EA4DC-DEEF-42B7-B296-92FA58515C4D">SDO_GEOR.setDefaultColorLayer</a>或<a href="SDO_GEOR-reference.html#GUID-70FC29B9-588B-47E1-BC48-DE3162C6785E">SDO_GEOR.setDefaultRed</a> ， <a href="SDO_GEOR-reference.html#GUID-0CB5060E-6733-40E0-B6AE-3951378EDC4A">SDO_GEOR.setDefaultGreen</a> ， <a href="SDO_GEOR-reference.html#GUID-45AB9089-BF53-474B-B59C-28AEE5A34C59">SDO_GEOR.setDefaultBlue</a>和<a href="SDO_GEOR-reference.html#GUID-9E830C52-D920-4A12-BEB6-73CBCD277CDB">SDO_GEOR.setDefaultAlpha</a> ，将多频段图像中的不同波段设置为默认的红色，绿色，蓝色和Alpha通道。对于大图像，您可以调用<a href="SDO_GEOR-reference.html#GUID-DAD267E0-410B-493F-92E8-FE7F6EF33B6F">SDO_GEOR.setDefaultPyramidLevel</a>来设置图像的最佳分辨率（金字塔）级别，以便在应用程序中进行初始显示。例如，要获得整个图像的完整概览，最好将顶部金字塔等级设置为默认金字塔等级。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1007"></a><div class="props_rev_3"><a id="GUID-D45DBC81-B4E5-4D06-B1F2-82339C6F52E2" name="GUID-D45DBC81-B4E5-4D06-B1F2-82339C6F52E2"></a><h3 id="GEORS-GUID-D45DBC81-B4E5-4D06-B1F2-82339C6F52E2" class="sect3"><span class="enumeration_section">3.11</span>导出GeoRaster对象</h3>
               <div>
                  <p>要加载和导出图像或栅格数据，请始终考虑第三方ETL工具（请参阅<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial includes tools for viewing, loading, and exporting GeoRaster data.">GeoRaster工具中</a>的注释<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">：Viewer_ Loader_ Exporter</a> ）</p>
                  <p>如果使用GeoRaster中的功能将GeoRaster对象导出到图像文件，则可以使用以下选项：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用基于GDAL的ETL工具进行并发批量导出，在<a href="georaster-overview-and-concepts.html#GUID-6E9B9872-7222-45AD-8FE1-CAFF596D3955">基于GDAL的ETL向导中进行并发批量加载和导出</a> 。
                        </p>
                     </li>
                     <li>
                        <p>调用<a href="SDO_GEOR-reference.html#GUID-6261233E-5E90-479C-97FD-8125C28EC838">SDO_GEOR.exportTo</a>过程（可以导出到文件或BLOB对象）。
                        </p>
                     </li>
                     <li>
                        <p>使用GeoRaster导出工具或查看器工具， <a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">GeoRaster工具：Viewer_ Loader_ Exporter中</a>对此进行了描述。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1011"></a><div class="props_rev_3"><a id="GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD" name="GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD"></a><h3 id="GEORS-GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD" class="sect3"><span class="enumeration_section">3.12</span>将GeoRaster与Workspace Manager和Label Security一起使用</h3>
               <div>
                  <p>Oracle Workspace Manager为GeoRaster对象的栅格块提供版本控制功能。Oracle Label Security支持在栅格块的行级别增强安全性的GeoRaster对象。</p>
                  <p>要将GeoRaster与Oracle Workspace Manager或Oracle Label Security一起使用，您应该创建一个栅格数据表（RDT）作为GeoRaster对象的关系表（参见<a href="georaster-database-creation-management.html#GUID-9A353A7D-CD42-4692-AFD2-554353919431__CHDCEIAC">示例3-3</a> ）。您不需要在基本关系RDT上定义SDO_RASTER类型的对象视图。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-A78EEF50-DA67-476E-96C0-F4715620098B">将GeoRaster与Workspace Manager一起使用</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-F33D17DF-B8D8-40CD-8040-44A6F8684B7E">使用带有标签安全性的GeoRaster</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1012"></a><div class="props_rev_3"><a id="GUID-A78EEF50-DA67-476E-96C0-F4715620098B" name="GUID-A78EEF50-DA67-476E-96C0-F4715620098B"></a><h4 id="GEORS-GUID-A78EEF50-DA67-476E-96C0-F4715620098B" class="sect4"><span class="enumeration_section">3.12.1</span>将GeoRaster与Workspace Manager一起使用</h4>
                  <div>
                     <p>使用Workspace Manager，您可以通过保存不同的栅格数据版本并在不同的工作区中进行修改，方便地管理栅格数据的更改。要将GeoRaster与Workspace Manager一起使用，必须使用关系栅格数据表进行栅格存储，并为这些关系栅格数据表启用版本。例如（一般格式）：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_WM.EnableVersioning（&lt;rdt_relational_table&gt;，'VIEW_WO_OVERWRITE'）;</pre><div class="infoboxnote" id="GUID-A78EEF50-DA67-476E-96C0-F4715620098B__GUID-BAFAA41B-8F5D-4D3C-9165-85202FCE164B">
                        <p class="notep1">注意：</p>
                        <p>您只能通过版本启用栅格数据表。不要对存储GeoRaster对象的任何GeoRaster表进行版本启用，也不要执行任何需要在工作空间中修改GeoRaster表的操作。</p>
                     </div>
                     <p>在启用关系型RDT的版本启用后，可以使用DBMS_WM包中的子程序来管理对栅格数据的更改。如果需要直接修改栅格块，请在操作之前调用DBMS_WM.copyForUpdate过程，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">宣告geor sdo_georaster; cond varchar2（1000）; lb blob; r1 raw（1024）; amt数; begin r1：= utl_raw.copies（utl_raw.cast_to_raw（'0'），1024）;从Georaster_table中选择georaster到geor，其中georid = 1; cond：='rasterId ='|| geor.rasterId || 'AND pyramidLevel = 0 AND'|| 'bandBlockNumber = 0 AND rowBlockNumber = 0 AND columnBlockNumber = 0'; dbms_wm.copyForUpdate（geor.rasterDataTable，cond）; sdo_geor.getRasterBlockLocator（geor，0,0,0,0，lb，null，'TRUE'）; amt：= 1024; dbms_lob.write（lb，amt，1，r1）;结束; /</pre><p>但是，如果您使用的GeoRaster子程序修改栅格数据，你<span class="italic">不需要</span>事先致电DBMS_WM.copyForUpdate程序。
                     </p>
                     <p>有关Workspace Manager的信息，请参阅<a href="../adwsm/introduction-to-workspace-manager.html#ADWSM010" target="_blank"><span class="italic">Oracle Database Workspace Manager Developer's Guide</span></a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD">将GeoRaster与Workspace Manager和Label Security一起使用</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1013"></a><div class="props_rev_3"><a id="GUID-F33D17DF-B8D8-40CD-8040-44A6F8684B7E" name="GUID-F33D17DF-B8D8-40CD-8040-44A6F8684B7E"></a><h4 id="GEORS-GUID-F33D17DF-B8D8-40CD-8040-44A6F8684B7E" class="sect4"><span class="enumeration_section">3.12.2</span>使用具有标签安全性的GeoRaster</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Label Security根据用户的安全级别级别为敏感数据提供行级访问控制。要将GeoRaster与Label Security一起使用，请执行以下基本步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建GeoRaster表和关系RDT或RDT。</span></li>
                        <li class="stepexpand"><span>创建Oracle Label Security策略并定义标签组件。</span></li>
                        <li class="stepexpand"><span>为GeoRaster表和关系RDT或RDT创建标签函数。</span><div>
                              <p>应根据应用程序的要求生成GeoRaster表中行的标签。对存储GeoRaster对象的行和相关RDT中的GeoRaster对象的栅格行使用相同的标签;否则，GeoRaster对象可能无效或状态不一致。</p>
                              <p>以下示例为关系RDT创建标签函数：</p><pre class="oac_no_warn" dir="ltr">创建或替换函数gen_rdt_label（rdt_name varchar2，rid number）RETURN LBACSYS.LBAC_LABEL AS tabname varchar2（80）; schema varchar2（32）; grcol varchar2（1024）; colname varchar2（30）;标签NUMBER; BEGIN EXECUTE IMMEDIATE'SELECT v.owner，v.table_name，v.column_name grcol，p.column_name'|| 'FROM all_sdo_geor_sysdata v，all_sa_policies p，all_sa_table_policies t'|| 'WHERE v.rdt_table_name =：1 AND v.raster_id =：2 AND'|| 'v.owner = t.schema_name AND v.table_name = t.table_name AND'|| 'p.policy_name = t.policy_name'INTO schema，tabname，grcol，colname USING upper（rdt_name），rid;执行立即'选择t。' || colname || 'FROM'||架构|| '' || tabname || 't'|| '在哪里。' || grcol || '.rasterdatatable =：1 AND'|| “不。” || grcol || '.rasterid =：2'INTO标签USING upper（rdt_name），rid; RETURN LBACSYS.LBAC_LABEL.NEW_LBAC_LABEL（label）;结束; /</pre></div>
                        </li>
                        <li class="stepexpand"><span>将Label Security策略应用于GeoRaster表及其关联的RDT或RDT。</span><div>
                              <p>以下示例（通用格式）使用上一步骤中的标签功能示例将标签安全策略应用于RDT。</p><pre class="oac_no_warn" dir="ltr">BEGIN SA_POLICY_ADMIN.REMOVE_TABLE_POLICY（&lt;policy_name&gt;，&lt;schema_name&gt;，&lt;rdt_relational_table&gt;）; SA_POLICY_ADMIN.APPLY_TABLE_POLICY（POLICY_NAME =&gt; &lt;policy_name&gt;，SCHEMA_NAME =&gt; &lt;schema_name&gt;，TABLE_NAME =&gt; &lt;rdt_relational_table&gt;，TABLE_OPTIONS =&gt;'READ_CONTROL，WRITE_CONTROL，CHECK_CONTROL'，LABEL_FUNCTION =&gt;'&lt;schema_name&gt; .gen_rdt_label（&lt;rdt_relational_table&gt;， ：new.rasterid）'，PREDICATE =&gt; NULL）;结束; /</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建和授权用户，并完成与Label Security相关的其他管理任务。</span></li>
                     </ol>
                     <div class="section">
                        <p>您可以在将策略应用于表之前或之后加载GeoRaster数据。</p>
                        <p>ALL_SDO_GEOR_SYSDATA视图（在<a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）中描述</a> ）包含当前用户可访问的所有GeoRaster对象的系统数据，在这种情况下的可访问性由用户的权限决定，如在自主访问控制（DAC）的上下文中定义的。
                        </p>
                        <p>更新GeoRaster表行的标签后，请确保更新RDT中的相关数据标签，以便同步标签。</p>
                        <p>有关标签安全性的信息，请参阅“ <a href="../olsag/introduction-to-oracle-label-security.html#OLSAG001" target="_blank"><span class="italic">Oracle Label Security管理员指南”</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-BBE8942E-96B3-4EBE-ADB9-AA3FC8FFF3DD">将GeoRaster与Workspace Manager和Label Security一起使用</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS1015"></a><a id="GEORS1016"></a><a id="GEORS1014"></a><div class="props_rev_3"><a id="GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32" name="GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32"></a><h3 id="GEORS-GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32" class="sect3"><span class="enumeration_section">3.13</span>维护GeoRaster对象使用的高效表空间</h3>
               <div>
                  <p>在删除或回滚操作之后，分配给栅格数据表的未使用空间可能不会立即返回到基础表空间。这可能导致浪费的表空间区域，如果栅格数据量很大，则可能是一个重要问题。如果使用自动段空间管理表空间中的BasicFiles LOB创建栅格数据表，则可以通过更改栅格数据表来显式缩小<code class="codeph">rasterBlock</code> LOB段或栅格数据表，如<a href="georaster-database-creation-management.html#GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32__CHDCJDDI">示例3-4</a>和<a href="georaster-database-creation-management.html#GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32__CHDFHADH">示例3-5所示</a> 。
                  </p>
                  <div class="example" id="GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32__CHDCJDDI">
                     <p class="titleinexample">示例3-4缩小BasicFile RasterBlock LOB段</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE city_images_rdt MODIFY LOB（rasterBlock）（SHRINK SPACE）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-CE77309C-2712-4EC0-B92B-B3A0A028EB32__CHDFHADH">
                     <p class="titleinexample">示例3-5缩小栅格数据表</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE city_images_rdt ENABLE ROW MOVEMENT; ALTER TABLE city_images_rdt SHRINK SPACE CASCADE;</pre></div>
                  <!-- class="example" -->
                  <p>如果您正在使用SecureFiles，或者您正在使用在手动段空间管理表空间中分配的BasicFiles，则无法使用ALTER TABLE语句回收未使用的空间，如前面的示例所示。相反，您应该创建一些工作（用于临时使用）栅格数据表，并尝试在这些RDT中放置任何间歇性结果，然后在不再需要它们之后删除这些工作RDT。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-D3750F8A-54EB-4334-9F52-522BBEE82BD3" name="GUID-D3750F8A-54EB-4334-9F52-522BBEE82BD3"></a><h3 id="GEORS-GUID-D3750F8A-54EB-4334-9F52-522BBEE82BD3" class="sect3"><span class="enumeration_section">3.14</span>检查数据库中的GeoRaster表和对象</h3>
               <div>
                  <p>出于数据库管理的目的，您可能需要检查整个数据库中或特定模式下的GeoRaster表和对象。创建GeoRaster数据库后，您可以使用以下选项来检查或列出现有的GeoRaster表，RDT表和GeoRaster对象。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用以下子程序检查当前架构或数据库中现有GeoRaster对象和相关对象的状态，具体取决于与数据库连接关联的权限。</p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-2B2ED5B6-BE91-4BBD-91F0-1A9B98565283">SDO_GEOR_ADMIN.listGeoRasterObjects</a>列出当前模式中定义的所有GeoRaster对象;或者，如果在作为MDSYS用户连接时调用此函数，则会列出数据库中定义的所有GeoRaster对象。
                        </p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-E7199BAA-4C99-4D5C-A2E5-F2DC95442D14">SDO_GEOR_ADMIN.listGeoRasterColumns</a>列出当前模式中定义的所有GeoRaster列;或者如果在作为MDSYS用户连接时调用此函数，则会列出数据库中定义的所有GeoRaster列。
                        </p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-3BDBD3E3-6FA2-4230-9042-2DF812BCF629">SDO_GEOR_ADMIN.listGeoRasterTables</a>列出当前模式中定义的所有GeoRaster表;或者如果在作为MDSYS用户连接时调用此函数，则会列出数据库中定义的所有GeoRaster表。
                        </p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-2CDF0178-612F-4DCA-A63D-E151AC4C3CCF">SDO_GEOR_ADMIN.listRDT</a>列出了当前模式中定义的所有栅格数据表（RDT）;或者，如果在作为MDSYS用户连接时调用此函数，则会列出数据库中定义的所有栅格数据表（RDT）。
                        </p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-C1A8A6F0-8085-4343-8FAE-08E590FFBBB8">SDO_GEOR_ADMIN.listRegisteredRDT</a>列出了当前模式中定义的所有已注册的栅格数据表（RDT）;或者如果在作为MDSYS用户连接时调用此函数，则会列出数据库中定义的所有已注册的RDT。如果SYSDATA表中至少有一个条目引用RDT，则会<span class="italic">注册</span> RDT。
                        </p>
                        <p><a href="SDO_GEOR_ADMIN-reference.html#GUID-579B7EA9-5D89-45B2-A9F2-FC9BE216C827">SDO_GEOR_ADMIN.listUnregisteredRDT</a>列出当前模式中定义的所有未注册的栅格数据表（RDT）;或者如果在作为MDSYS用户连接时调用此函数，则会列出数据库中定义的所有未注册的RDT。如果SYSDATA表中没有条目引用RDT，则<span class="italic">取消注册</span> RDT。
                        </p>
                     </li>
                     <li>
                        <p>直接针对GeoRaster元数据视图运行SQL查询，并检查或列出存储在不同模式中的GeoRaster表和对象。这种方法比调用子程序更灵活。它还启用了一些SDO_GEOR_ADMIN包中定义的函数无法返回的查询结果。以下是一些示例查询。</p>
                        <p>列出在架构HERMAN和MYTEST中定义并可由当前架构访问的所有GeoRaster对象。</p><pre class="pre codeblock"><code>从all_sdo_geor_sysdata中选择所有者，TABLE_NAME，COLUMN_NAME，RDT_TABLE_NAME，RASTER_ID，其中owner ='HERMAN'或owner ='MYTEST';</code></pre><p>计算当前架构可访问的GeoRaster对象的总数。</p><pre class="pre codeblock"><code>来自all_sdo_geor_sysdata的SELECT count（*）;</code></pre><p>计算当前架构中GeoRaster表GTF_TABLE中存储的GeoRaster对象的总数。</p><pre class="pre codeblock"><code>来自user_sdo_geor_sysdata的SELECT count（*），其中TABLE_NAME ='GTF_TABLE';</code></pre><p>列出当前架构中存储在RDT表RDT_1中的所有GeoRaster对象。</p><pre class="pre codeblock"><code>来自user_sdo_geor_sysdata的SELECT TABLE_NAME，COLUMN_NAME，RDT_TABLE_NAME，RASTER_ID，其中RDT_TABLE_NAME ='RDT_1';</code></pre><p>找出所有GeoRaster表，它们在当前模式中存储或引用RDT表RDT_1中的某些栅格数据。</p><pre class="pre codeblock"><code>从user_sdo_geor_sysdata中选择不同的TABLE_NAME，其中RDT_TABLE_NAME ='RDT_1';</code></pre><p>列出当前架构中GeoRaster表GTF_TABLE使用的所有RDT表。</p><pre class="pre codeblock"><code>从user_sdo_geor_sysdata中选择不同的RDT_TABLE_NAME，其中TABLE_NAME ='GTF_TABLE';</code></pre></li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1017"></a><div class="props_rev_3"><a id="GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E" name="GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E"></a><h3 id="GEORS-GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E" class="sect3"><span class="enumeration_section">3.15</span>维护数据库中的GeoRaster对象和系统数据</h3>
               <div>
                  <p>虽然GeoRaster提供内部数据库机制来防止创建无效的GeoRaster对象和系统数据，但有时此类GeoRaster对象和系统数据可能存在于数据库中，尤其是在从先前版本升级之后，或者在GeoRaster系统上运行时出现一些用户错误之后数据。此类无效对象和系统数据的示例包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>GeoRaster系统数据视图中的条目（ <span class="italic">xxx</span> _SDO_GEOR_SYSDATA，在<a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）中描述</a> ）是指不存在的GeoRaster表或列。
                        </p>
                     </li>
                     <li>
                        <p>两个或多个GeoRaster对象具有相同的RDT名称和栅格ID值对。</p>
                     </li>
                     <li>
                        <p>某些GeoRaster对象，表，列或RDT未注册。</p>
                     </li>
                     <li>
                        <p>RDT名称不是唯一的。</p>
                     </li>
                     <li>
                        <p>GeoRaster对象是非空的或非空的，但是不存在关联的RDT。</p>
                     </li>
                  </ul>
                  <p>数据库升级后，您应该执行以下操作。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-05037DB2-5C29-4B19-ABF5-7586CF3117C8">SDO_GEOR_ADMIN.isGeoRasterEnabled</a>函数以确保为当前架构启用了GeoRaster。
                        </p>
                     </li>
                     <li>
                        <p>调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-2E813E4E-C5A5-4884-97FA-DB8E6BEC87D6">SDO_GEOR_ADMIN.isUpgradeNeeded</a>函数以检查当前版本的任何无效GeoRaster对象和无效系统数据。
                        </p>
                     </li>
                     <li>
                        <p>如果有任何错误或无效数据，请调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-7B7D8C75-46E9-4278-8B2E-60675055A8F2">SDO_GEOR_ADMIN.upgradeGeoRaster</a>函数以自动更正问题。
                        </p>
                     </li>
                     <li>
                        <p>如果以MDSYS用户身份连接， <a href="SDO_GEOR_ADMIN-reference.html#GUID-7B7D8C75-46E9-4278-8B2E-60675055A8F2">SDO_GEOR_ADMIN.upgradeGeoRaster</a>函数将升级数据库中的所有GeoRaster对象;否则，它仅升级当前用户的架构中的GeoRaster对象。（请参阅有关<a href="SDO_GEOR_ADMIN-reference.html#GUID-7B7D8C75-46E9-4278-8B2E-60675055A8F2">SDO_GEOR_ADMIN.upgradeGeoRaster</a>的参考和用法信息。
                        </p>
                     </li>
                  </ul>
                  <p>对于由于可能的用户错误而进行的常规维护，有几个函数和过程将有助于检查和更正无效的GeoRaster对象和系统数据条目：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>要检查GeoRaster是否已启用，请调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-05037DB2-5C29-4B19-ABF5-7586CF3117C8">SDO_GEOR_ADMIN.isGeoRasterEnabled</a></p>
                     </li>
                     <li>
                        <p>启用GeoRaster。调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-F0868A0F-7DFB-4F0F-AA30-0CC41D8B708E">SDO_GEOR_ADMIN.enableGeoRaster</a></p>
                     </li>
                     <li>
                        <p>要检查错误，请调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-786E293A-2F1B-4605-AC82-4B788A1BDED6">SDO_GEOR_ADMIN.checkSysdataEntries</a>和<a href="SDO_GEOR_ADMIN-reference.html#GUID-579B7EA9-5D89-45B2-A9F2-FC9BE216C827">SDO_GEOR_ADMIN.listUnregisteredRDT</a> 。</p>
                     </li>
                     <li>
                        <p></p>
                     </li>
                     <li>
                        <p>要检查悬空栅格数据，请调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-C20A7F7C-C861-437E-BFD3-791B7AFAFB4C">SDO_GEOR_ADMIN.listDanglingRasterData</a> 。
                        </p>
                     </li>
                     <li>
                        <p>要更正所有无效的系统数据条目，请调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-3EEACD9B-7B9C-4606-9DC0-966CFE0CB469">SDO_GEOR_ADMIN.maintainSysdataEntries</a> 。
                        </p>
                     </li>
                     <li>
                        <p>要为所有GeoRaster列创建正确的DML触发器，请调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-8FC19048-E701-4D73-98E5-64140ED503B3">SDO_GEOR_ADMIN.registerGeoRasterColumns</a> 。
                        </p>
                     </li>
                     <li>
                        <p>要在sysdata表中注册所有现有GeoRaster对象，请调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-13898CD3-CD1F-4C78-A023-1ED2B3D6C524">SDO_GEOR_ADMIN.registerGeoRasterObjects</a> 。
                        </p>
                     </li>
                  </ul>
                  <p>请参阅<a href="SDO_GEOR_ADMIN-reference.html#GUID-6F9B00F3-56C1-4AF9-82A6-DFBAB1BB489E" title="SDO_GEOR_ADMIN包中包含与GeoRaster相关的管理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_ADMIN包参考中</a>有关这些过程和函数的参考和用法信息。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1018"></a><div class="props_rev_3"><a id="GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1" name="GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1"></a><h3 id="GEORS-GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1" class="sect3"><span class="enumeration_section">3.16</span>在数据库之间传输GeoRaster数据</h3>
               <div>
                  <div class="section">
                     <p>您可以使用数据泵导出和导入实用程序或原始导出和导入实用程序在数据库之间传输GeoRaster数据。您必须从GeoRaster表及其相关的栅格数据表中导出和导入行。传输后，您无需将导入的GeoRaster对象的GeoRaster系统数据插入目标模式中的USER_SDO_GEOR_SYSDATA视图（在<a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）中描述</a> ）;但是，在对这些对象执行任何操作之前，应使用<a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a>函数检查导入的GeoRaster对象的有效性。
                     </p>
                     <p>有关数据泵导出和导入实用程序以及原始导出和导入实用程序的信息，请参阅<a href="../sutil/oracle-data-pump-overview.html#SUTIL801" target="_blank"><span class="italic">Oracle数据库实用程序</span></a> 。
                     </p>
                     <p>要在数据库之间传输GeoRaster数据，请按照以下常规步骤操作：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>检查并解决任何冲突，如<a href="georaster-database-creation-management.html#GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696">检查和解决冲突中所述</a> 。</span></li>
                     <li><span>执行数据传输，如<a href="georaster-database-creation-management.html#GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE">执行GeoRaster数据传输中所述</a> 。</span></li>
                  </ol>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696">检查和解决冲突</a><br></li>
                     <li class="ulchildlink"><a href="georaster-database-creation-management.html#GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE">执行GeoRaster数据传输</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1019"></a><div class="props_rev_3"><a id="GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696" name="GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696"></a><h4 id="GEORS-GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696" class="sect4"><span class="enumeration_section">3.16.1</span>检查和解决冲突</h4>
                  <div>
                     <p>为了将GeoRaster数据成功导入目标数据库，目标模式的GeoRaster系统数据中必定没有冲突。以下情况可能会导致冲突：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>已在目标数据库的另一个模式中定义具有相同名称的栅格数据表。</p>
                           <p>例如，您可能计划通过在目标模式中创建其栅格数据表（RDT）来导入GeoRaster对象，但目标模式中的现有RDT可能已具有相同的名称。在这种情况下，您应该使用<a href="SDO_GEOR_ADMIN-reference.html#GUID-2CDF0178-612F-4DCA-A63D-E151AC4C3CCF">SDO_GEOR_ADMIN.listRDT</a>或<a href="SDO_GEOR_ADMIN-reference.html#GUID-05492210-9524-40A2-8A29-6B7028566FAA">SDO_GEOR_ADMIN.isRDTNameUnique</a>函数来检查源数据库和目标数据库，以查看是否存在RDT名称冲突;如果存在任何冲突，请使用<a href="SDO_GEOR_UTL-reference.html#GUID-9B5168A6-2624-4E80-B8C8-DC4815B94E36">SDO_GEOR_UTL.renameRDT</a>过程将RDT重命名为目标数据库中的其他名称，以便在导入GeoRaster对象之前解决冲突。
                           </p>
                        </li>
                        <li>
                           <p>要插入目标模式的USER_SDO_GEOR_SYSDATA视图的任何栅格数据表名称和栅格ID对都不是唯一的。</p>
                           <p>例如，如果通过附加到目标数据库中的现有RDT来导入RDT数据，则可能会发生此冲突。在这种情况下，在将数据导入目标数据库之前，使用<a href="SDO_GEOR_ADMIN-reference.html#GUID-2B2ED5B6-BE91-4BBD-91F0-1A9B98565283">SDO_GEOR_ADMIN.listGeoRasterObjects</a>函数列出目标模式中定义的所有GeoRaster对象，并确保现有GeoRaster之间的RDT名称和栅格ID组合中没有冲突数据和要导入的GeoRaster数据。如果存在任何冲突，请更改目标模式中GeoRaster对象的栅格ID以解决冲突;否则，执行导入过程时，转储文件中存在冲突的GeoRaster对象将被拒绝。
                           </p>
                        </li>
                     </ul>
                     <p>如果需要检查转储文件中的栅格数据表（RDT）名称和栅格ID（RID）信息，可以使用以下选项：检查源数据库中的信息;请求转储文件提供者提供的信息;将转储文件加载到单独的测试数据库中并检查其中的信息;或者（如果您不能使用单独的数据库进行测试）将转储文件加载到当前数据库中的测试模式中并检查信息。要将转储文件加载到当前数据库中的测试模式并检查信息，请按照下列步骤操作：</p>
                     <ol>
                        <li>
                           <p>在目标数据库中创建测试模式。</p>
                        </li>
                        <li>
                           <p>使用带有<code class="codeph">CONTENT = METADATA_ONLY</code>参数的数据泵导入实用程序，将所有GeoRaster表从转储文件加载到此测试模式中。
                           </p>
                        </li>
                        <li>
                           <p>以MDSYS用户身份连接到数据库，并禁用上一步中加载的GeoRaster表上的所有DML触发器。</p>
                        </li>
                        <li>
                           <p>使用带有<code class="codeph">CONTENT = DATA_ONLY</code>参数的数据泵导入实用程序将数据加载到GeoRaster表中。
                           </p>
                        </li>
                        <li>
                           <p>直接从测试模式中的GeoRaster表中检索RDT / RID（栅格数据表名称和栅格ID）对。</p>
                        </li>
                     </ol>
                     <p>解决冲突后，应确保GeoRaster元数据和数据的完整性（请参阅<a href="georaster-database-creation-management.html#GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E">在数据库中维护GeoRaster对象和系统数据</a> ）。您还应该在执行提交或任何其他操作之前验证任何已修复的GeoRaster对象。
                     </p>
                     <p>有关在导入操作期间解决冲突的一般信息，请参阅<a href="../sutil/datapump-import-utility.html#SUTIL300" target="_blank"><span class="italic">Oracle数据库实用程序</span></a>的“数据泵导入”一章中的<code class="codeph">TABLE_EXISTS_ACTION</code>参数的说明。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1">在数据库之间传输GeoRaster数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1020"></a><div class="props_rev_3"><a id="GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE" name="GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE"></a><h4 id="GEORS-GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE" class="sect4"><span class="enumeration_section">3.16.2</span>执行GeoRaster数据传输</h4>
                  <div>
                     <p>执行GeoRaster数据传输涉及从一个数据库导出数据并将其导入另一个数据库。</p>
                     <div class="infoboxnote" id="GUID-1B3CA536-A9A6-41AB-B704-13B66A4957EE__GUID-DBFB8C5F-1D61-4A5D-8FEC-87B78A472D99">
                        <p class="notep1">注意：</p>
                        <p>要成功将GeoRaster数据导入Release 19 <span class="bold">c</span>数据库，必须为导入的模式启用GeoRaster，并且模式用户必须具有CREATE TRIGGER权限。
                        </p>
                     </div>
                     <p>从一个数据库导出GeoRaster数据并将其导入另一个数据库时，GeoRaster数据库管理系统可确保在将GeoRaster表和对象导入目标数据库后自动生成必要的GeoRaster内部DML触发器和系统数据条目。（启用GeoRaster时会创建GeoRaster内部DDL触发器。）</p>
                     <p>因此，应该在<code class="codeph">expdp</code>和<code class="codeph">impdp</code>操作中排除所有GeoRaster内部DML触发器和DDL触发器（维护GeoRaster数据的完整性）;否则，即使可以安全地忽略错误，也会引发一些诸如以下的<code class="codeph">impdp</code>错误：</p><pre class="oac_no_warn" dir="ltr">ORA-39083：对象类型TRIGGER无法创建错误：ORA-13391：GeoRaster保留名称不能用于创建常规触发器</pre><p>要导出GeoRaster数据，请像处理其他类型的数据一样，但要排除GeoRaster内部DML触发器（名称以<code class="codeph">GRDMLTR_</code> ）和内部DDL触发器（名为<code class="codeph">SDO_GEOR_ADDL_TRIGGER</code>和<code class="codeph">SDO_GEOR_BDDL_TRIGGER</code> ）。例如：</p><pre class="oac_no_warn" dir="ltr">expdp scott schemas = scott directory = dump_dir dumpfile = exp.dmp parfile = exclude.par输入密码： <span class="italic">password</span>
</pre><p>其中<code class="codeph">exclude.par</code>文件包含以下内容：</p><pre class="oac_no_warn" dir="ltr">exclude = trigger：“like'GRDMLTR_％'”exclude = trigger：“='SDO_GEOR_ADDL_TRIGGER'”exclude = trigger：“='SDO_GEOR_BDDL_TRIGGER'”</pre><p>要导入GeoRaster数据，请像处理其他类型的数据一样，但如果未将其排除在外，则排除GeoRaster内部DML触发器（其名称以<code class="codeph">GRDMLTR_</code> ）和DDL触发器（来自Release 19 <span class="italic">c</span>数据库的<code class="codeph">SDO_GEOR_ADDL_TRIGGER</code>和<code class="codeph">SDO_GEOR_BDDL_TRIGGER</code> ）出口业务。例如：</p>
                     <ol>
                        <li>
                           <p>确保要导入的GeoRaster数据与目标数据库中的现有GeoRaster数据之间不存在冲突，如<a href="georaster-database-creation-management.html#GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696">检查和解决冲突中所述</a> 。
                           </p>
                           <p>如果未解决任何冲突，则会引发一些异常，并且只将非冲突的GeoRaster数据导入目标数据库。</p>
                        </li>
                        <li>
                           <p>像导入其他类型的数据一样导入GeoRaster数据，但如果您没有在导出操作中排除它们，则排除GeoRaster内部DML触发器（其名称以<code class="codeph">GRDMLTR_</code> ）和DDL触发器（来自Release 19 <span class="italic">c</span>数据库的<code class="codeph">SDO_GEOR_ADDL_TRIGGER</code>和<code class="codeph">SDO_GEOR_BDDL_TRIGGER</code> ） 。例如：</p><pre class="oac_no_warn" dir="ltr">impdp scott schemas = scott directory = dump_dir dumpfile = exp.dmp parfile = exclude.par输入密码： <span class="italic">password</span>
</pre><p>其中<code class="codeph">exclude.par</code>文件包含以下内容：</p><pre class="oac_no_warn" dir="ltr">exclude = trigger：“like'GRDMLTR_％'”exclude = trigger：“='SDO_GEOR_ADDL_TRIGGER'”exclude = trigger：“='SDO_GEOR_BDDL_TRIGGER'”</pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-0F77203F-486F-4160-A03C-8E7EA2594DB1">在数据库之间传输GeoRaster数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS1195"></a><div class="props_rev_3"><a id="GUID-51C68427-CA7F-4E85-90AD-780D770DF81F" name="GUID-51C68427-CA7F-4E85-90AD-780D770DF81F"></a><h3 id="GEORS-GUID-51C68427-CA7F-4E85-90AD-780D770DF81F" class="sect3"><span class="enumeration_section">3.17</span>将可传输表空间与GeoRaster数据一起使用</h3>
               <div>
                  <div class="section">
                     <p>您可以将Oracle数据库可传输表空间功能与GeoRaster数据一起使用。</p>
                     <p>如果要传输的表空间包含GeoRaster表或栅格数据表（RDT）上的任何空间索引，则可能需要执行一些准备步骤。有关将可传输表空间功能与空间数据一起使用的详细信息，请参阅<a href="../spatl/SDO_UTIL-reference.html#SPATL180" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a>中有关SDO_UTIL.PREPARE_FOR_TTS和SDO_UTIL.INITIALIZE_INDEXES_FOR_TTS过程的使用说明。
                     </p>
                     <p>为了将GeoRaster数据成功导入目标数据库，目标模式的GeoRaster系统数据中必定没有冲突。在将表空间传输到另一个数据库或模式之前，建议（但不要求）按照检查和解决冲突中描述的过程检查并解决此类<a href="georaster-database-creation-management.html#GUID-2EA1AFDA-D11D-4913-87B3-DF222E290696">冲突</a> 。因此，您应该设计GeoRaster表和RDT表，以便在源数据库中使用此类可传输表空间之前避免这种可预见的冲突。
                     </p>
                     <p>无论传输的表空间是否具有任何空间索引，在传输包含GeoRaster对象的表空间后，请执行以下操作：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>调用<a href="SDO_GEOR_ADMIN-reference.html#GUID-13898CD3-CD1F-4C78-A023-1ED2B3D6C524">SDO_GEOR_ADMIN.registerGeoRasterObjects</a>过程（在<a href="SDO_GEOR_ADMIN-reference.html#GUID-6F9B00F3-56C1-4AF9-82A6-DFBAB1BB489E" title="SDO_GEOR_ADMIN包中包含与GeoRaster相关的管理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_ADMIN包参考中</a>描述）以在当前模式或新数据库中注册所有GeoRaster对象。</span></li>
                     <li><span>在使用传输的GeoRaster数据之前，请执行维护<a href="georaster-database-creation-management.html#GUID-14CEA0C1-837D-4DD4-A255-80ECCC28615E">数据库中的GeoRaster对象和系统数据中</a>描述的“常规维护”操作，以维护GeoRaster对象和系统数据，并确保正确传输和正确注册所有GeoRaster对象。</span></li>
                     <li><span>如果发现任何冲突，请调用<a href="SDO_GEOR_UTL-reference.html#GUID-9B5168A6-2624-4E80-B8C8-DC4815B94E36">SDO_GEOR_UTL.renameRDT</a>或<a href="SDO_GEOR_UTL-reference.html#GUID-94664890-EDA7-4518-B87A-99AD4D8672DA">SDO_GEOR_UTL.makeRDTNamesUnique</a>过程来解决此类冲突，然后再次进行验证。</span></li>
                  </ol>
                  <div class="section">
                     <p>有关可传输表空间和将表空间传输到其他数据库的详细信息，请参见“ <a href="../admin/transporting-data.html#ADMIN11394" target="_blank"><span class="italic">Oracle数据库管理员指南”</span></a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>计算</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide and Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide and Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sqlplus-users-guide-and-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T05:48:09-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96459-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="COLUMN.html" title="Previous" type="text/html"></link>
      <link rel="next" href="CONNECT.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL*Plus User&#39;s Guide and Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQPUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="COLUMN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="CONNECT.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指南和参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Plus-reference.html" property="item" typeof="WebPage"><span property="name">SQL * Plus参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Plus-command-reference.html" property="item" typeof="WebPage"><span property="name">SQL * Plus命令参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">计算</li>
            </ol>
            <a id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C" name="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C"></a><a id="SQPUG600"></a><a id="SQPUG035"></a>
            
            <h2 id="SQPUG-GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C" class="sect2"><span class="enumeration_section">12.14</span>计算</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__GUID-2D4B027E-117C-4742-A2E1-D0FB22DB9A30">句法</p><pre class="oac_no_warn" dir="ltr">COMP [UTE] [ <span class="italic">函数</span> [LAB [EL] <span class="italic">text</span> ] ...OF { <span class="italic">expr</span> | <span class="italic">专栏</span> | <span class="italic">别名</span> } ...ON { <span class="italic">expr</span> | <span class="italic">专栏</span> | <span class="italic">别名</span> |报告|行......）</pre><p>结合BREAK命令，计算<a id="d27678e59" class="indexterm-anchor"></a>并打印摘要行<a id="d27678e64" class="indexterm-anchor"></a> ，对所选行的子集使用各种标准计算。 <a id="d27678e69" class="indexterm-anchor"></a> 它还列出了所有COMPUTE定义。有关如何创建摘要的详细信息，请参阅<span class="bold"><a href="formatting-SQL-Plus-reports.html#GUID-6E7DC1AB-5886-4841-AC40-695FDBCA9BA9">关于使用间距和摘要行清除报表</a></span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__GUID-7823985D-7174-4E76-AFC6-8CCDB9CFB110">条款</p><pre class="oac_no_warn" dir="ltr"><span class="italic">功能</span> ......</pre><p>表示<a href="COMPUTE.html#GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__BACGEJEB" title="显示COMPUTE函数，它们的描述和适用的数据类型。">表12-2中</a>列出的函数之一。如果指定多个函数，请使用空格分隔函数。
                  </p>
                  <p>COMPUTE命令功能始终以AVG，COUNT，MINIMUM，MAXIMUM，NUMBER，SUM，STD，VARIANCE的顺序执行，而不管它们在COMPUTE命令中的顺序如何。</p>
                  <div class="tblformal" id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__BACGEJEB">
                     <p class="titleintable">表12-2计算功能</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="计算功能" width="100%" border="1" summary="Shows the COMPUTE functions, their description, and the applicable datatypes." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="18%" id="d27678e106">功能</th>
                              <th align="left" valign="bottom" width="46%" id="d27678e109">单位计算</th>
                              <th align="left" valign="bottom" width="36%" id="d27678e112">适用于数据类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e117" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">AVG</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e117 d27678e109 ">
                                 <p>非空值的平均值</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e117 d27678e112 ">
                                 <p>数</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e127" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">计数]</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e127 d27678e109 ">
                                 <p>计数非空值</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e127 d27678e112 ">
                                 <p>所有类型</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e137" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">Min（最小）</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e137 d27678e109 ">
                                 <p>最低价值</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e137 d27678e112 ">
                                 <p>NUMBER，CHAR，NCHAR，VARCHAR2（VARCHAR），NVARCHAR2（NCHAR VARYING）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e147" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">最大值]</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e147 d27678e109 ">
                                 <p>最大价值</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e147 d27678e112 ">
                                 <p>NUMBER，CHAR，NCHAR，VARCHAR2（VARCHAR），NVARCHAR2（NCHAR VARYING）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e157" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">数]</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e157 d27678e109 ">
                                 <p>行数</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e157 d27678e112 ">
                                 <p>所有类型</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e167" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">和</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e167 d27678e109 ">
                                 <p>非空值的总和</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e167 d27678e112 ">
                                 <p>数</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e177" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">STD</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e177 d27678e109 ">
                                 <p>非空值的标准偏差</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e177 d27678e112 ">
                                 <p>数</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e187" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">方差]</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e187 d27678e109 ">
                                 <p>非空值的方差</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e187 d27678e112 ">
                                 <p>数</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" --><pre class="oac_no_warn" dir="ltr">LAB [EL] <span class="italic">文本</span></pre><p><a id="d27678e201" class="indexterm-anchor"></a>定义要为计算值打印的标签。如果不<a id="d27678e206" class="indexterm-anchor"></a>使用LABEL子句， <span class="italic">文本</span>默认为未缩写的函数关键字。您必须在包含空格或标点符号的<span class="italic">文本</span>周围放置单引号。标签打印左对齐并截断为列宽或线宽，以较小者为准。最大标签长度是<a id="d27678e217" class="indexterm-anchor"></a> 500个字符。
                  </p>
                  <p>计算值的标签显示在指定的break列中。要禁止标签，请在break列上使用COLUMN命令的NOPRINT选项。</p>
                  <p>如果在COMPUTE命令中重复某个函数，SQL * Plus会发出警告并使用该函数的第一个匹配项。</p>
                  <p>使用ON REPORT和ON ROW计算，标签出现在SELECT语句中列出的第一列中。可以通过在SELECT语句中首先使用NOPRINT列来禁止标签。当您在SELECT语句ON REPORT或ON ROW中计算第一列的函数时，计算的值将出现在第一列中，并且不显示标签。要查看标签，请先在SELECT列表中选择一个虚拟列。</p><pre class="oac_no_warn" dir="ltr">OF { <span class="italic">expr</span> | <span class="italic">专栏</span> | <span class="italic">别名</span> } ...</pre><p>在OF子句中， <a id="d27678e242" class="indexterm-anchor"></a>您可以通过将表达式或函数引用放在双引号中来引用SELECT语句中的表达式或函数引用。列名和别名不需要引号。
                  </p><pre class="oac_no_warn" dir="ltr">ON { <span class="italic">expr</span> | <span class="italic">专栏</span> | <span class="italic">别名</span> |报告|行......</pre><p>如果有多个COMPUTE <a id="d27678e260" class="indexterm-anchor"></a><a id="d27678e264" class="indexterm-anchor"></a><a id="d27678e268" class="indexterm-anchor"></a><a id="d27678e272" class="indexterm-anchor"></a><a id="d27678e276" class="indexterm-anchor"></a><a id="d27678e280" class="indexterm-anchor"></a><a id="d27678e284" class="indexterm-anchor"></a><a id="d27678e288" class="indexterm-anchor"></a>命令引用ON子句中的同一列，仅应用最后一个COMPUTE命令。
                  </p>
                  <p>参考一个<a id="d27678e295" class="indexterm-anchor"></a> ON子句中的SQL SELECT表达式或函数引用，将表达式或函数引用放在引号中。列名和别名不需要引号。
                  </p>
                  <p>输入COMPUTE不带子句列出全部<a id="d27678e302" class="indexterm-anchor"></a> COMPUTE定义。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__GUID-6D24D6E8-D1BB-451D-BE8E-AE873202C452">用法</p>
                  <p>为了进行计算，必须满足以下条件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您在OF子句中引用的一个或多个表达式，列或列别名也必须位于SELECT命令中。</p>
                     </li>
                     <li>
                        <p>您在ON子句中引用的表达式，列或列别名必须出现在SELECT命令和最近的BREAK中<a id="d27678e319" class="indexterm-anchor"></a>命令。
                        </p>
                     </li>
                     <li>
                        <p>如果在ON子句中引用ROW或REPORT，也请在最近的BREAK命令中引用ROW或REPORT。</p>
                     </li>
                  </ul>
                  <p>要删除所有COMPUTE定义，请使用CLEAR COMPUTES命令。</p>
                  <p>请注意，如果对正在执行COMPUTE的列使用NOPRINT选项，则还会抑制COMPUTE结果。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__GUID-BE4DDA63-F5B2-41A4-8BD2-F6DD8791C7F9">例子</p>
                  <p>要对“客户经理”，AC_MGR和“销售员”，SA_MAN，计算标签为“TOTAL”的作业分类的工资进行小计，请输入</p><pre class="oac_no_warn" dir="ltr">BREAK ON JOB_ID SKIP 1;在JOB_ID上计算SUM LABEL'总计'SALAL; SELECT JOB_ID，LAST_NAME，SALARY FROM EMP_DETAILS_VIEW WHERE JOB_ID IN（'AC_MGR'，'SA_MAN'）ORDER BY JOB_ID，SALARY;</pre><pre class="pre codeblock"><code>JOB_ID LAST_NAME SALARY ---------- ------------------------- ---------- AC_MGR希金斯12000 ********** ---------- TOTAL 12000 SA_MAN Zlotkey 10500 Cambrault 11000 Errazuriz 12000合作伙伴13500 Russell 14000 ********** ------ ----共选择了61000 6行。</code></pre><p>要计算报告中大于12,000的工资总额，请输入</p><pre class="oac_no_warn" dir="ltr">报告栏上的报告延迟的计算总和DUMMY HEADING''SELECT''DUMMY，SALARY，EMPLOYEE_ID来自EMP_DETAILS_VIEW，其中SALARY&gt; 12000按薪酬排序;</pre><pre class="pre codeblock"><code>SALARY EMPLOYEE_ID --- ---------- ----------- 13000 201 13500 146 14000 145 17000 101 17000 102 24000 100 ---------- sum 98500选择了6行。</code></pre><p>要计算执行和会计部门的平均和最高工资，请输入</p><pre class="oac_no_warn" dir="ltr">打开DEPARTMENT_NAME SKIP 1 COMPUTE AVG LABEL'Dept Average' -  MAX LABEL'Dept Maximum' -  DEPARTMENT_NAME上的SALARY SELECT BEARTMENT_NAME，LAST_NAME，来自EMP_DETAILS_VIEW的SALARY DEPARTMENT_NAME IN（'Executive'，'Accounting'）订购DEPARTMENT_NAME;</pre><pre class="pre codeblock"><code>DEPARTMENT_NAME LAST_NAME SALARY ------------------------------ ----------------- -------- ----------会计Higgins 12000 Gietz 8300 *************************** *** ----------部门平均10150部门最高12000行政大王24000 Kochhar 17000 De Haan 17000 *********************** ******* ---------- Dept Average 19333.3333 Dept Maximum 24000</code></pre><p>要在不打印计算标签的情况下对部门&lt;= 20的工资进行汇总，请输入</p><pre class="oac_no_warn" dir="ltr">COLUMN DUMMY NOPRINT在DUMMY SKIP上的DUMMY BREAK上的SALAL计算总和1选择DEPARTMENT_ID DUMMY，DEPARTMENT_ID，LAST_NAME，来自EMP_DETAILS_VIEW的SALARY DEPARTMENT_ID &lt;= 20按DEPARTMENT_ID排序;</pre><pre class="pre codeblock"><code>DEPARTMENT_ID LAST_NAME SALARY ------------- ------------------------- --------- -  10 Whalen 4400 ---------- 4400 20 Hartstein 13000 20 Fay 6000 ---------- 19000</code></pre><p>要在不打印计算标签的情况下总计报告末尾的工资，请输入</p><pre class="oac_no_warn" dir="ltr">COLUMN DUMMY NOPRINT DUMMY DUMMY BREAK SALUM DUMMY，DEPARTMENT_ID，LAST_NAME，SALAL from EMP_DETAILS_VIEW WHART DEPARTMENT_ID &lt;= 30 ORDER BY DEPARTMENT_ID;</pre><pre class="pre codeblock"><code>DEPARTMENT_ID LAST_NAME SALARY ------------- ------------------------- --------- -  10 Whalen 4400 20 Hartstein 13000 20 Fay 6000 30 Raphaely 11000 30 Khoo 3100 30 Baida 2900 30 Tobias 2800 30 Himuro 2600 30 Colmenares 2500 ---------- 48300 9行选择。</code></pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>配置应用程序会话</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-security-administrators-and-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:21:48-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2012, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95725-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-application-users-and-application-roles.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configuring-application-privileges-and-access-contol-lists.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBFSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-application-users-and-application-roles.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configuring-application-privileges-and-access-contol-lists.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Security管理员和开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">配置应用程序会话</li>
            </ol>
            <a id="GUID-B44ACBB0-AC90-439D-9CDE-541285C31328" name="GUID-B44ACBB0-AC90-439D-9CDE-541285C31328"></a><a id="DBFSG30000"></a>
            
            <h2 id="DBFSG-GUID-B44ACBB0-AC90-439D-9CDE-541285C31328" class="sect2"><span class="enumeration_chapter">3</span>配置应用程序会话</h2>
         </header>
         <div class="ind">
            <div>
               <div class="p">本章包含：<ul style="list-style-type:disc">
                     <li>
                        <p><a href="configuring-application-sessions.html#GUID-EE4F1485-2F88-41B7-A82D-A33E705B3278">关于申请会议</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-application-sessions.html#GUID-4646E40B-780C-4373-BC04-2214FC2F1B8B">关于创建和维护应用程序会话</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-application-sessions.html#GUID-1678A791-8C84-4AAF-A6C4-259F8CBB8A87">关于操作应用程序会话状态</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-application-sessions.html#GUID-828BD9A7-E7E6-4A24-A69B-4E939FEA7167">关于外部用户和角色的管理API</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-application-sessions.html#GUID-29457379-758E-4A45-AA24-C9F9D8A3C26F" title="描述通过ACL的会话权限范围，允许每个主体会话权限授予通过主体上的ACL集，其中主体可以是应用程序用户或动态角色。">关于Real Application Security会话权限通过ACL确定范围</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBFSG99091"></a><div class="props_rev_3"><a id="GUID-EE4F1485-2F88-41B7-A82D-A33E705B3278" name="GUID-EE4F1485-2F88-41B7-A82D-A33E705B3278"></a><h3 id="DBFSG-GUID-EE4F1485-2F88-41B7-A82D-A33E705B3278" class="sect3">关于申请会议</h3>
               <div>
                  <p>应用程序会话包含与应用程序及其用户相关的信息。应用程序会话将应用程序会话状态存储为属性 - 值对的集合。这些属性值对分为命名空间。与传统的<span class="italic">重量级</span>数据库会话不同，应用程序会话不拥有自己的数据库资源，例如事务和游标。由于应用程序会话比重量级会话消耗的服务器资源少得多，因此应用程序会话可以专用于每个最终应用程序用户。应用程序会话可以在数据库中保留，并以较低的成本稍后恢复。
                  </p>
                  <p>要配置应用程序会话，您需要分两个阶段：</p>
                  <ol>
                     <li>
                        <p>您可以创建和维护应用程序会话。</p>
                     </li>
                     <li>
                        <p>您可以在会话期间操纵会话状态。</p>
                     </li>
                  </ol>
                  <p>您可以使用PL / SQL API或Java API来配置应用程序会话。本章介绍PL / SQL中应用程序会话的编程创建，使用和维护，并包含可比较Java信息的特定链接。</p>
                  <div class="infoboxnotealso" id="GUID-EE4F1485-2F88-41B7-A82D-A33E705B3278__GUID-DF49DDC3-CCEF-48FD-B8C1-8E924A12A6B8">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="real-application-security-sql-functions.html#GUID-35DB088C-AA74-4F99-A1F6-9BF187F6E0EB">Oracle数据库真实应用程序安全性SQL函数</a>和<a href="real-application-security-plsql-packages.html#GUID-42EF8B2A-31E4-4EE9-8963-5BDE681193A5">Oracle数据库真实应用程序安全性PL / SQL包，</a>以获取有关PL / SQL API语法的信息</p>
                        </li>
                        <li>
                           <p>有关Java API语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181">使用Java应用程序中的Real Application Security</a>获取有关使用Java API执行任务的信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="p">本节包含：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23">关于Real Application Security中的应用程序会话</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-247C2449-A52E-47D0-8D56-85047E700751">应用程序会话的优点</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG99092"></a><a id="DBFSG301"></a><div class="props_rev_3"><a id="GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23" name="GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23"></a><h4 id="DBFSG-GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23" class="sect4">关于Real Application Security中的应用程序会话</h4>
                  <div>
                     <p><a href="configuring-application-sessions.html#GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23__CJAJIBHB">图3-1</a>显示了Real Application Security架构图，并指出了应用程序会话如何适应它。该图显示了应用程序<a id="d11248e434" class="indexterm-anchor"></a><a id="d11248e438" class="indexterm-anchor"></a>在数据库中创建应用程序会话。其中一些应用程序会话与传统数据库（DB）会话相关联。
                     </p>
                     <p><a href="configuring-application-sessions.html#GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23__CJAJIBHB">图3-1</a>还显示了Real Application Security的其他组件，例如ACL，应用程序权限，应用程序用户和应用程序角色。
                     </p>
                     <div class="figure" id="GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23__CJAJIBHB">
                        <p class="titleinfigure">图3-1 Real Application Security Architecture</p><img src="img/fs_arch.png" alt="下面是图3-1的描述" title="下面是图3-1的描述" longdesc="img_text/fs_arch.html"><br><a href="img_text/fs_arch.html">“图3-1实际应用安全架构”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="DBFSG302"></a><div class="props_rev_3"><a id="GUID-247C2449-A52E-47D0-8D56-85047E700751" name="GUID-247C2449-A52E-47D0-8D56-85047E700751"></a><h4 id="DBFSG-GUID-247C2449-A52E-47D0-8D56-85047E700751" class="sect4">应用程序会话的优点</h4>
                  <div>
                     <p>申请会议<a id="d11248e565" class="indexterm-anchor"></a>比传统的数据库会话具有功能优势。例如，传统的数据库会话通常不知道最终用户身份或这些最终用户的安全策略。反之：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>应用程序会话封装了最终用户的安全上下文。它们使应用程序能够根据最终用户身份使用数据库授权机制进行访问控制。</p>
                        </li>
                        <li>
                           <p>应用程序会话可以同时与多个数据库会话相关联。</p>
                        </li>
                        <li>
                           <p>它们可供Oracle Real Application Clusters（Oracle RAC）环境中的所有节点访问。</p>
                        </li>
                     </ul>
                     <p>应用程序会话比传统数据库会话具有以下性能优势</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>可以使用比传统数据库会话更少的开销创建它们。</p>
                        </li>
                        <li>
                           <p>它们可以持久存储在数据库中，并以最低的成本恢复。</p>
                        </li>
                        <li>
                           <p>Real Application Security可以使用缓存在客户端上收集会话属性更改和会话状态。然后，将这些更改附加到数据库，直到下一个数据库往返，减少数据库往返次数。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="DBFSG99093"></a><div class="props_rev_3"><a id="GUID-4646E40B-780C-4373-BC04-2214FC2F1B8B" name="GUID-4646E40B-780C-4373-BC04-2214FC2F1B8B"></a><h3 id="DBFSG-GUID-4646E40B-780C-4373-BC04-2214FC2F1B8B" class="sect3">关于创建和维护应用程序会话</h3>
               <div>
                  <div class="p">本节包含：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39">创建应用程序会话</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F">创建匿名应用程序会话</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-C5889D1C-AE40-4FAE-A453-B65157155D17">将应用程序会话附加到传统数据库会话</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-97CA5620-0D2F-436D-94BE-55D57953A05E">为应用程序会话设置Cookie</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA">将应用程序用户分配给匿名应用程序会话</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3">在当前应用会话中将当前应用用户切换到另一个应用用户</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-EC9AEA9F-C552-4123-8789-122ADB283D86">关于创建全局回调事件处理程序</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14">为应用程序会话配置全局回调事件处理程序</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99">保存应用程序会话</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80">从传统数据库会话中分离应用程序会话</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446">销毁应用程序会话</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG99095"></a><a id="DBFSG99094"></a><div class="props_rev_3"><a id="GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39" name="GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39"></a><h4 id="DBFSG-GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39" class="sect4">创建应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.CREATE_SESSION</code>过程或使用Java中<code class="codeph">XSSessionManager</code>类的<code class="codeph">createSession</code>方法创建应用程序会话。要创建应用程序会话，调用用户需要<code class="codeph">CREATE_SESSION</code>应用程序权限。可以通过<code class="codeph">XS_SESSION_ADMIN</code>数据库角色或<code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API调用获取此特权（有关详细信息，请参阅<span class="q">“ <a href="XS_ADMIN_UTIL-package.html#GUID-7F29B504-8BEA-43C6-B791-A01899B66FB9">GRANT_SYSTEM_PRIVILEGE过程</a> ”</span> ）。<code class="codeph">CREATE_SESSION</code>过程在<code class="codeph">sessionid</code> out参数中填充新创建的会话的唯一标识符。此唯一标识符可用于在将来的呼叫中引用会话。<code class="codeph">DBA_XS_SESSIONS</code>数据字典视图显示数据库中的所有应用程序会话。
                        </p>
                        <p>您还可以指定创建会话时要创建的命名空间列表。如果在创建会话期间指定名称空间，则调用方必须在名称空间或<code class="codeph">ADMIN_NAMESPACE</code>系统特权上具有应用程序权限<code class="codeph">MODIFY_NAMESPACE</code>或<code class="codeph">MODIFY_ATTRIBUTE</code> 。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39__CHDBJIJC">示例3-1</a>显示了如何使用<code class="codeph">lwuser1</code>创建应用程序会话。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39__CHDBJIJC">
                        <p class="titleinexample">示例3-1创建应用程序会话</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; BEGIN <span class="bold">SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）;</span>结束;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39__GUID-585C7C23-6081-417D-B2BB-EE6E38A1157A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-9C80BEC1-29EA-430D-B597-3CA6182A7DFB">CREATE_SESSION</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">createSession</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E__BGBJJCCB">参见示例6-2</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG352"></a><a id="DBFSG303"></a><div class="props_rev_3"><a id="GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F" name="GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F"></a><h4 id="DBFSG-GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F" class="sect4">创建匿名应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>您还可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.CREATE_SESSION</code>过程或使用Java中<code class="codeph">XSSessionManager</code>类的<code class="codeph">createAnonymousSession</code>方法创建匿名应用程序会话。要通过PL / SQL API创建匿名会话，必须指定预定义的用户名<code class="codeph">XSGUEST</code> 。</p>
                        <p><a href="configuring-application-sessions.html#GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F__BABHBJGI">示例3-2</a>显示了如何使用预定义的用户<code class="codeph">XSGUEST</code>创建匿名会话。</p>
                        <p>创建匿名应用程序会话后，您可以将指定用户分配给会话。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F__BABHBJGI">
                        <p class="titleinexample">示例3-2创建匿名应用程序会话</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; BEGIN <span class="bold">SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'XSGUEST'，sessionid）;</span>结束;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F__GUID-F838604E-1B64-4FD3-A675-02B639BA66F0">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-9C80BEC1-29EA-430D-B597-3CA6182A7DFB">CREATE_SESSION</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">createAnonymousSession</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E__BGBJJCCB">参见示例6-2</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99098"></a><a id="DBFSG99097"></a><div class="props_rev_3"><a id="GUID-C5889D1C-AE40-4FAE-A453-B65157155D17" name="GUID-C5889D1C-AE40-4FAE-A453-B65157155D17"></a><h4 id="DBFSG-GUID-C5889D1C-AE40-4FAE-A453-B65157155D17" class="sect4">将应用程序会话附加到传统数据库会话</h4>
                  <div>
                     <div class="section">
                        <p>要使用应用程序会话，它必须与数据库会话相关联。此操作称为<code class="codeph">attach</code> 。您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.ATTACH_SESSION</code>过程或Java中<code class="codeph">XSSessionManager</code>类的<code class="codeph">attachSession</code>方法将应用程序会话附加到传统数据库会话。数据库会话一次只能附加一个应用程序会话。<code class="codeph">DBA_XS_ACTIVE_SESSIONS</code>动态数据字典视图显示数据库中所有连接的应用程序会话。
                        </p>
                        <p>要执行此过程，传统会话用户必须具有<code class="codeph">ATTACH_SESSION</code>应用程序特权。可以通过<code class="codeph">XS_SESSION_ADMIN</code>数据库角色或<code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API调用获取此特权。如果指定名称空间，则要求用户在名称空间或<code class="codeph">ADMIN_NAMESPACE</code>系统特权上具有应用程序权限<code class="codeph">MODIFY_NAMESPACE</code>或<code class="codeph">MODIFY_ATTRIBUTE</code> 。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-C5889D1C-AE40-4FAE-A453-B65157155D17__CHDFDGIA">示例3-3</a>显示了如何将应用程序会话附加到数据库会话。
                        </p>
                        <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，Oracle Label Security支持Real Application Security用户。这意味着在附加操作期间在Real Application Security会话中建立了Oracle Label Security上下文，以便可以在Real Application Security用户会话中执行Oracle Label Security授权。Oracle Label Security提供了在Oracle数据库中定义数据标签，分配用户标签和保护敏感应用程序数据的功能。
                        </p>
                        <p>例如，使用Oracle Label Security数据标签允许根据其机密性级别对表的每一行进行标记。数据标签由3个组件组成：级别，隔离专区和组。因此，给定的数据标签应该具有一个级别，零个或多个隔离区以及与之关联的零个或多个组。隔离区允许在一个级别内定义更精细的粒度 - 属于特定项目的所有数据都可以使用相同的隔离专区进行标记。组是分层的，因此组可以与父组相关联。</p>
                        <p>此外，使用Oracle Label Security用户标签，可以为每个用户分配限制对标记数据的访问的标签。为每个用户分配一系列级别，隔离专区和组，并且每个会话可以在该授权范围内操作以访问该范围内的标记数据。</p>
                        <p>此外，使用特权，Oracle Label Security特权是特定于策略的，用于为用户提供执行特殊操作或访问标签授权之外的数据的特定权限。所有政策特定权限列表是： <code class="codeph">FULL</code> ， <code class="codeph">READ</code> ， <code class="codeph">COMPACCESS</code> ， <code class="codeph">PROFILE_ACCESS</code> ， <code class="codeph">WRITEUP</code> ， <code class="codeph">WRITEDOWN</code> ，并<code class="codeph">WRITEACROSS</code> 。</p>
                        <p>使用Oracle Label Security，可以使用受信任的存储程序。可信存储程序单元是已被授予一个或多个标签安全权限的存储过程，函数或包。可信存储的程序单元用于让用户以受控方式执行特权操作，或者更新多个标签上的数据。通过向程序单元授予权限，可以有效地减少用户所需的权限。</p>
                        <p>使用Oracle Label Security，在定义数据标签或用户标签或两者并为用户分配适当的权限后，将策略应用于表或整个模式。在表上应用策略时，标签安全性会在表上创建特定于策略的NUMBER列，以存储之前为策略定义的数据标签的等效数字。该列可以创建为用户可见列或隐藏列。在表上应用策略时，用户可以指定各种强制选项。例如， <code class="codeph">READ_CONTROL</code>强制选项可以保护表免受查询的影响， <code class="codeph">WRITE_CONTROL</code>可以保护它免受DML操作的影响。
                        </p>
                        <p>因此，在Real Application Security会话中建立Oracle Label Security上下文允许<code class="codeph">SELECT</code>和DML操作返回为Real Application Security用户授权的结果。
                        </p>
                        <p>要附加具有动态角色的会话，可以在PL / SQL <code class="codeph">ATTACH_SESSION</code>过程中传递动态角色列表。
                        </p>
                        <div class="infoboxnote" id="GUID-C5889D1C-AE40-4FAE-A453-B65157155D17__GUID-2BC0C37A-A46F-43D3-B8B5-3E85D01DFABE">
                           <p class="notep1">注意：</p>
                           <p>在开发应用程序时，请确保在<code class="codeph">ATTACH_SESSION</code>中捕获所有应用程序最终用户操作...<code class="codeph">DETACH_SESSION</code>编程块。（有关更多信息，请参阅<span class="q">“ <a href="configuring-application-sessions.html#GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80">从传统数据库会话中分离应用程序会话</a> ”</span> ）。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C5889D1C-AE40-4FAE-A453-B65157155D17__CHDFDGIA">
                        <p class="titleinexample">示例3-3附加应用程序会话</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid raw（16）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; <span class="bold">SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）;</span>结束;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-C5889D1C-AE40-4FAE-A453-B65157155D17__GUID-9999A50D-BE98-4BFB-9176-596D3A35FD78">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-2CCDFDD1-F3B4-4EE5-A261-7871B18A0A91">ATTACH_SESSION</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">attachSession</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__BABJCJBI">参见示例6-3</a></p>
                              </li>
                              <li>
                                 <p>有关Oracle Label Security的信息，请参阅<a href="../olsag/oracle-label-security-pl-sql-packages.html#OLSAG3285" target="_blank"><span><cite>“Oracle Label Security管理员指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99101"></a><a id="DBFSG99100"></a><div class="props_rev_3"><a id="GUID-97CA5620-0D2F-436D-94BE-55D57953A05E" name="GUID-97CA5620-0D2F-436D-94BE-55D57953A05E"></a><h4 id="DBFSG-GUID-97CA5620-0D2F-436D-94BE-55D57953A05E" class="sect4">为应用程序会话设置Cookie</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.SET_SESSION_COOKIE</code>过程或Java中<code class="codeph">XSSessionManager</code>类的<code class="codeph">setCookie</code>方法将特定cookie与应用程序会话相关联。cookie也可以在创建会话时通过<code class="codeph">CREATE_SESSION</code> PL / SQL API <code class="codeph">CREATE_SESSION</code> 。 Cookie是在应用程序会话期间由网站嵌入用户会话中的令牌。因此，下次同一用户从该网站请求内容时，它会将cookie发送到应用程序会话，这允许服务器将会话与该用户相关联。
                        </p>
                        <p>要执行此过程，必须为用户授予<code class="codeph">MODIFY_SESSION</code>应用程序特权。可以通过<code class="codeph">XS_SESSION_ADMIN</code>数据库角色或<code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API调用获取此特权。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-97CA5620-0D2F-436D-94BE-55D57953A05E__CHDBFGIE">示例3-4</a>显示了如何为应用程序会话设置cookie。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-97CA5620-0D2F-436D-94BE-55D57953A05E__CHDBFGIE">
                        <p class="titleinexample">示例3-4为应用程序会话设置Cookie</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid raw（16）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; <span class="bold">SYS.DBMS_XS_SESSIONS.SET_SESSION_COOKIE（'Cookie1'，sessionid）;</span>结束;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-97CA5620-0D2F-436D-94BE-55D57953A05E__GUID-C233AB56-336A-4E65-8555-1C97F77B0BF4">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-AEA590DF-3C7C-4A50-A38E-53DB54266BF2">SET_SESSION_COOKIE</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">setCookie</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-23E01854-C532-4A86-AB09-B4C10342410D__BABJJBHF">参见示例6-20</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99104"></a><a id="DBFSG99103"></a><div class="props_rev_3"><a id="GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA" name="GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA"></a><h4 id="DBFSG-GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA" class="sect4">将应用程序用户分配给匿名应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.ASSIGN_USER</code>过程或Java中<code class="codeph">XSSessionManager</code>类的<code class="codeph">assignUser</code>方法将指定的应用程序用户分配给当前连接的匿名应用程序会话。分配用户会将用户会话从匿名用户更改为指定用户。
                        </p>
                        <p>要执行此过程，调度程序或连接用户必须具有<code class="codeph">ASSIGN_USER</code>应用程序特权。可以通过<code class="codeph">XS_SESSION_ADMIN</code>数据库角色或<code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API调用获取此特权。如果指定名称空间，则需要在用户名或<code class="codeph">ADMIN_NAMESPACE</code>系统权限上为用户授予应用程序权限<code class="codeph">MODIFY_NAMESPACE</code>或<code class="codeph">MODIFY_ATTRIBUTE</code> 。还可以使用<code class="codeph">DBMS_XS_SESSIONS.ASSIGN_USER</code>过程启用动态角色列表。
                        </p>
                        <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，Oracle Label Security支持Real Application Security用户。如果Real Application Security用户在任何Oracle Label Security策略中获得授权，则在<code class="codeph">assign_user</code>调用期间， <code class="codeph">assign_user</code>指定的Real Application Security用户会话建立相应的标签安全授权。因此，在Real Application Security会话中建立Oracle Label Security上下文允许<code class="codeph">SELECT</code>和DML操作返回为Real Application Security用户授权的结果。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA__CJABGBAF">示例3-5</a>显示了如何将应用程序用户<code class="codeph">lwuser1</code>分配给应用程序会话。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA__CJABGBAF">
                        <p class="titleinexample">示例3-5将应用程序用户分配给应用程序会话</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid raw（16）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'XSGUEST'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; <span class="bold">SYS.DBMS_XS_SESSIONS.ASSIGN_USER（ 'lwuser1'）;</span>结束;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA__GUID-E0B0826B-90CF-42F2-98DB-AE9A57F5BB20">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-C93E0B47-6F3E-44E0-8A3F-5EE868050923">ASSIGN_USER</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">assignUser</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABJABAB">参见示例6-5</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-application-sessions.html#GUID-C5889D1C-AE40-4FAE-A453-B65157155D17">将应用程序会话附加到传统数据库会话，</a>以获取有关Oracle Label Security如何支持Real Application Security用户的信息</p>
                              </li>
                              <li>
                                 <p>有关Oracle Label Security的信息，请参阅<a href="../olsag/oracle-label-security-pl-sql-packages.html#OLSAG3285" target="_blank"><span><cite>“Oracle Label Security管理员指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG116"></a><a id="DBFSG115"></a><div class="props_rev_3"><a id="GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3" name="GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3"></a><h4 id="DBFSG-GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3" class="sect4">在当前应用会话中将当前应用用户切换到另一个应用用户</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.SWITCH_USER</code>过程或Java中的<code class="codeph">Session</code>接口的<code class="codeph">switchUser</code>方法，将当前应用程序会话的安全上下文切换或代理给指定应用程序用户的新初始化安全上下文。要代理其他应用程序用户，必须在执行切换操作之前将当前应用程序会话用户设置为目标用户的代理用户。这是通过<code class="codeph">XS_PRINCIPAL.ADD_PROXY_USER</code> PL / SQL API执行的。</p>
                        <p>切换用户会更改两个指定用户之间的用户会话。</p>
                        <p>如果代理操作的目标应用程序用户具有为代理用户设置的筛选角色（代理角色）列表，则会在会话中启用它们。</p>
                        <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，Oracle Label Security支持Real Application Security用户。这意味着的Oracle标签安全方面<code class="codeph">target_user</code>将基于来自开关建立<code class="codeph">proxy_user</code>会话到<code class="codeph">target_user</code>会话。
                        </p>
                        <p>您可以在切换操作后保留或清除应用程序命名空间和属性。当<code class="codeph">keep_state</code>参数设置为<code class="codeph">TRUE</code> ，将保留所有应用程序名称空间和属性;否则，会话中的所有先前状态都被清除。
                        </p>
                        <p>如果指定名称空间，则需要在用户名或<code class="codeph">ADMIN_NAMESPACE</code>系统权限上为用户授予应用程序权限<code class="codeph">MODIFY_NAMESPACE</code>或<code class="codeph">MODIFY_ATTRIBUTE</code> 。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3__CIHJIGIE">示例3-6</a>显示了如何在当前应用程序会话中将应用程序用户<code class="codeph">lwuser1</code>切换到应用程序用户<code class="codeph">lwuser2</code> 。请注意，名称空间模板<code class="codeph">ns1</code>和<code class="codeph">ns2</code>应该已由<code class="codeph">SYSDBA</code>创建。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3__CIHJIGIE">
                        <p class="titleinexample">示例3-6将应用程序用户切换到当前应用程序会话中的另一个应用程序用户</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; nsList DBMS_XS_NSATTRLIST; BEGIN nsList：= DBMS_XS_NSATTRLIST（DBMS_XS_NSATTR（'ns1'），DBMS_XS_NSATTR（'ns2'））; SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; <span class="bold">SYS.DBMS_XS_SESSIONS.SWITCH_USER（username =&gt;'lwuser2'，</span> <span class="bold">keep_state =&gt; TRUE，</span> <span class="bold">namespaces =&gt; nsList）;</span>结束;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3__GUID-032E53DB-82C3-44E7-9DFE-5CE00E573397">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-6F9F4CE9-A434-4F43-9141-48E3F7B0A800">SWITCH_USER</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">assignUser</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABDIGAE">参见示例6-6</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-application-sessions.html#GUID-C5889D1C-AE40-4FAE-A453-B65157155D17">将应用程序会话附加到传统数据库会话，</a>以获取有关Oracle Label Security如何支持Real Application Security用户的信息</p>
                              </li>
                              <li>
                                 <p>有关Oracle Label Security的信息，请参阅<a href="../olsag/oracle-label-security-pl-sql-packages.html#OLSAG3285" target="_blank"><span><cite>“Oracle Label Security管理员指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-EC9AEA9F-C552-4123-8789-122ADB283D86" name="GUID-EC9AEA9F-C552-4123-8789-122ADB283D86"></a><h4 id="DBFSG-GUID-EC9AEA9F-C552-4123-8789-122ADB283D86" class="sect4">关于创建全局回调事件处理程序</h4>
                  <div>
                     <p>回调事件处理程序过程必须遵循原型，其中包含一组指定的参数。</p>
                     <p>例如，以下<code class="codeph">callback_procedure</code>指定现有的PL / SQL过程，该过程是事件处理程序并显示其两种可能的形式。
                     </p><pre class="pre codeblock"><code>PROCEDURE callback_procedure（rawid中的sessionid，错误输出pls_integer）</code></pre><p>第一种形式包括两个参数， <code class="codeph">RAW</code>的<code class="codeph">sessionid</code>和out参数<code class="codeph">error</code> ，用于设置错误。<code class="codeph">sessionid</code>包含触发事件的会话的会话ID。可以在事件处理程序代码中使用out <code class="codeph">error</code>参数来显示错误。
                     </p><pre class="pre codeblock"><code>PROCEDURE callback_procedure（rawid中的sessionid，varchar2中的用户，错误输出pls_integer）</code></pre><p>第二种形式包括<code class="codeph">VARCHAR2</code>的附加参数<code class="codeph">user</code> ，以指定触发此事件的用户。
                     </p>
                     <div class="infoboxnote" id="GUID-EC9AEA9F-C552-4123-8789-122ADB283D86__GUID-EA10EF55-6296-43E8-B6E9-A280AF32AA83">
                        <p class="notep1">注意：</p>
                        <p>必须将错误值显式设置为PL / SQL正文或异常块中的值，如下所示， <code class="codeph">error:= 0;</code> 。
                        </p>
                        <p>否则，引发以下错误， <code class="codeph">ORA-46071: Error occured in event handler &lt;name-of-event-handler&gt;</code>出现错误，后跟另一个错误， <code class="codeph">ORA-1405: fetched column value is NULL</code> ，表示错误值为<code class="codeph">NULL</code> 。</p>
                     </div>
                     <p>以下示例显示使用第二种形式的回调过程显式设置错误值。</p><pre class="pre codeblock"><code>创建或替换包CALLBACK_PACKAGE作为程序CALLBACK_PROCEDURE（RAW中的sessionid，VARCHAR2中的用户，错误输出PLS_INTEGER）; END CALLBACK_PACKAGE; / CREATE或REPLACE PACKAGE BODY CALLBACK_PACKAGE作为程序CALLBACK_PROCEDURE（RAW中的sessionid，VARCHAR2中的用户，错误输出PLS_INTEGER）IS BEGIN错误：= 0; dbms_output.put_line（'内部回调过程'）;其他错误的例外：= 0; DBMS_OUTPUT.PUT_LINE（ '错误'）; END CALLBACK_PROCEDURE; END CALLBACK_PACKAGE;</code></pre><div class="infoboxnotealso" id="GUID-EC9AEA9F-C552-4123-8789-122ADB283D86__GUID-48976A13-BCB0-4C33-AEB7-7EB4C5751244">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="configuring-application-sessions.html#GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14">为应用程序会话配置全局回调事件处理程序</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="DBFSG353"></a><a id="DBFSG99107"></a><a id="DBFSG99106"></a><div class="props_rev_3"><a id="GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14" name="GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14"></a><h4 id="DBFSG-GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14" class="sect4">为应用程序会话配置全局回调事件处理程序</h4>
                  <div>
                     <div class="section">
                        <p>全局回调事件处理程序是一个预定义的PL / SQL过程，可以在发生某些感兴趣的会话事件时调用该过程来检查，记录和修改会话状态。您可以在会话事件上添加多个全局回调事件处理程序。创建PL / SQL过程后，您可以分别使用以下过程注册或取消注册，或启用或禁用它：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DBMS_XS_SESSIONS.ADD_GLOBAL_CALLBACK</code></p>
                              <p>使用此过程注册回调事件处理程序。</p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_XS_SESSIONS.DELETE_GLOBAL_CALLBACK</code></p>
                              <p>使用此过程取消注册全局回调。</p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_XS_SESSIONS.ENABLE_GLOBAL_CALLBACK</code></p>
                              <p>使用此过程通过为启用指定<code class="codeph">TRUE</code>值或为禁用指定<code class="codeph">FALSE</code>来启用或禁用全局回调过程。
                              </p>
                           </li>
                        </ul>
                        <p>要执行这些API，用户必须具有<code class="codeph">CALLBACK</code>应用程序权限。这可以通过<code class="codeph">XSPROVISIONER</code>应用程序角色或通过调用<code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API获得。您可以配置一个或多个全局回调事件处理程序，以便在应用程序会话中使用。如果配置多个回调事件处理程序，Oracle数据库将按创建顺序执行处理程序。
                        </p>
                        <p>（可选）您可以按照以下步骤更改执行顺序：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>运行<code class="codeph">DBMS_XS_SESSIONS.DELETE_GLOBAL_CALLBACK</code>过程以取消注册任何现有回调。</span></li>
                        <li><span>运行<code class="codeph">DBMS_XS_SESSIONS.ADD_GLOBAL_CALLBACK</code>过程以注册回调。</span></li>
                     </ol>
                     <div class="example" id="GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14__BABJFGEH">
                        <p class="titleinexample">示例3-7在应用程序会话中注册全局回调</p><pre class="oac_no_warn" dir="ltr">BEGIN <span class="bold">SYS.DBMS_XS_SESSIONS.ADD_GLOBAL_CALLBACK（DBMS_XS_SESSIONS.CREATE_SESSION_EVENT，</span> 'CALLBACK_SCHM'， 'CALLBACK_PKG'， 'CALLBACK_PROC'）;结束; /</pre><p><a href="configuring-application-sessions.html#GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14__CJAIBHEF" title="该表有2列，第1列是会话事件，第2列是执行回调的时间。">表3-1</a>列出了可以使用回调事件处理程序的会话事件。
                        </p>
                        <div class="tblformal" id="GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14__CJAIBHEF">
                           <p class="titleintable">表3-1可以使用回调事件处理程序的会话事件</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="可以使用回调事件处理程序的会话事件" width="100%" border="1" summary="This table has 2 columns, Column 1 is session event and column 2 is when the callback will be executed. " frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="56%" id="d11248e2476">会议活动</th>
                                    <th align="left" valign="bottom" width="44%" id="d11248e2479">何时执行回调</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2484" headers="d11248e2476 ">
                                       <p>创建新的应用程序会话</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2484 d11248e2479 ">
                                       <p>创建会话后。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2491" headers="d11248e2476 ">
                                       <p>附加到现有的应用程序会话</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2491 d11248e2479 ">
                                       <p>会议结束后。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2498" headers="d11248e2476 ">
                                       <p>启用动态应用程序角色</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2498 d11248e2479 ">
                                       <p>启用动态应用程序角色后。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2505" headers="d11248e2476 ">
                                       <p>禁用动态应用程序角色</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2505 d11248e2479 ">
                                       <p>禁用动态应用程序角色后。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2512" headers="d11248e2476 ">
                                       <p>直接登录应用程序会话</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2512 d11248e2479 ">
                                       <p>附加会话后（如果会话附加作为应用程序会话的直接登录的一部分调用）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2519" headers="d11248e2476 ">
                                       <p>将指定的应用程序用户分配给匿名应用程序会话</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2519 d11248e2479 ">
                                       <p>将指定用户分配给匿名应用程序会话后。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2526" headers="d11248e2476 ">
                                       <p>从一个命名的应用程序用户代理到另一个命名的应用程序用户</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2526 d11248e2479 ">
                                       <p>切换应用程序用户后（如果应用程序用户未代理回原始应用程序用户）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2533" headers="d11248e2476 ">
                                       <p>从命名的应用程序用户回溯到原始应用程序用户</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2533 d11248e2479 ">
                                       <p>切换应用程序用户后（如果应用程序用户代理回原始应用程序用户）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2540" headers="d11248e2476 ">
                                       <p>启用常规应用程序角色</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2540 d11248e2479 ">
                                       <p>启用应用程序角色后。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2547" headers="d11248e2476 ">
                                       <p>禁用常规应用程序角色</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2547 d11248e2479 ">
                                       <p>禁用应用程序角色后。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2554" headers="d11248e2476 ">
                                       <p>从现有应用程序会话或数据库会话中分离</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2554 d11248e2479 ">
                                       <p>在会话分离之前。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2562" headers="d11248e2476 ">
                                       <p>终止现有的应用程序会话或数据库会话</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2562 d11248e2479 ">
                                       <p>在会话被销毁之前。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="56%" id="d11248e2569" headers="d11248e2476 ">
                                       <p>直接注销应用程序会话或数据库会话</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d11248e2569 d11248e2479 ">
                                       <p>在分离会话之前（如果会话分离是作为应用程序会话的直接注销的一部分调用的）。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>假设您要在创建会话后初始化某些特定于应用程序的状态。<a href="configuring-application-sessions.html#GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14__BABJFGEH">例3-7</a>显示了如何注册设置状态<code class="codeph">CALLBACK_PROC</code>的全局回调，该状态<code class="codeph">CALLBACK_PROC</code>在包<code class="codeph">CALLBACK_PKG</code>定义并由模式<code class="codeph">CALLBACK_SCHM</code>拥有。</p>
                        <p>状态<code class="codeph">CALLBACK_PROC</code>被注册为事件<code class="codeph">CREATE_SESSION_EVENT</code>的全局回调。</p>
                        <p>有关更多示例以及有关这些过程语法的详细信息，请参阅以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="DBMS_XS_SESSION-package.html#GUID-A26E667D-741A-4371-9BE3-CCE27BE99FB6">ADD_GLOBAL_CALLBACK过程</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="DBMS_XS_SESSION-package.html#GUID-EE158701-CDD0-4C6E-8225-EA300F9FC352">DELETE_GLOBAL_CALLBACK过程</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="DBMS_XS_SESSION-package.html#GUID-5C06BDE3-60A1-4EAF-8D16-4DB7931C779F">ENABLE_GLOBAL_CALLBACK过程</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG118"></a><a id="DBFSG117"></a><div class="props_rev_3"><a id="GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99" name="GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99"></a><h4 id="DBFSG-GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99" class="sect4">保存应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.SAVE_SESSION</code>过程或Java中<code class="codeph">XSSessionManager</code>类的<code class="codeph">saveSession</code>方法保存当前用户应用程序会话。当会话更改需要使用与此会话相同的会话立即传播到其他会话时，请使用保存操作。如果未使用保存操作，则仅在分离此会话后，会话更改才会反映在其他会话中。
                        </p>
                        <p>主叫用户无需执行此操作的权限。</p>
                        <p><a href="configuring-application-sessions.html#GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99__CIHCIDEF">例3-8</a>显示了如何保存当前用户应用程序会话。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99__CIHCIDEF">
                        <p class="titleinexample">示例3-8保存当前用户应用程序会话</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.DBMS_XS_SESSIONS.SAVE_SESSION;结束;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99__GUID-EA1CE3D1-5F2C-4D3A-95BF-AE781E7411DA">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-0F69D39A-CA89-4F88-9268-BABEED216B9D">SAVE_SESSION</a>有关这些PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">detachSession</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__CHDEGGGJ">参见示例7-4</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99114"></a><a id="DBFSG99115"></a><a id="DBFSG99113"></a><div class="props_rev_3"><a id="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80" name="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80"></a><h4 id="DBFSG-GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80" class="sect4">从传统数据库会话中分离应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用以下任一过程从传统数据库会话中分离应用程序会话：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DBMS_XS_SESSIONS.DETACH_SESSION（abort =&gt; FALSE）</code></p>
                              <p>使用此过程分离会话并提交自上次保存会话更改以来所做的任何更改。将<code class="codeph">abort</code>参数指定为<code class="codeph">FALSE</code> （默认值）时，将保留当前会话中执行的所有更改。当前连接的用户无需任何其他权限即可执行此操作。
                              </p>
                              <p>始终在当前连接的会话上执行<code class="codeph">DETACH_SESSION</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_XS_SESSIONS.DETACH_SESSION（abort =&gt; TRUE）</code> 
                              </p>
                              <p>使用此过程分离会话而不保存更改。将<code class="codeph">abort</code>参数指定为<code class="codeph">TRUE</code> ，它将回滚在当前会话中执行的更改。自附加以来对会话所做的角色和命名空间更改将被丢弃。
                              </p>
                           </li>
                        </ul>
                        <p><a href="configuring-application-sessions.html#GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__CHDHCGFJ">示例3-9</a>显示了如何从数据库会话中分离应用程序会话并提交更改。请注意，您可以在任何位置调用<code class="codeph">DETACH_SESSION</code>来分离当前连接的会话。
                        </p>
                        <p>您可以在Java中使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">detachSession</code>方法。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__CJAEGIAB">示例3-10</a>显示了如何在不保存任何更改的情况下从应用程序会话中分离数据库会话。
                        </p>
                        <div class="infoboxnote" id="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__GUID-A73D40C7-7A20-410F-AB44-AD85935BF8E0">
                           <p class="notep1">注意：</p>
                           <p>在开发应用程序时，请确保在<code class="codeph">ATTACH_SESSION</code>中捕获所有应用程序最终用户操作...<code class="codeph">DETACH_SESSION</code>编程块。（有关更多信息，请参阅<span class="q">“ <a href="configuring-application-sessions.html#GUID-C5889D1C-AE40-4FAE-A453-B65157155D17">将应用程序会话附加到传统数据库会话</a> ”</span> ）</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__CHDHCGFJ">
                        <p class="titleinexample">示例3-9分离和提交应用程序会话</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; ...
  <span class="bold">SYS.DBMS_XS_SESSIONS.DETACH_SESSION;</span> ...结束;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__CJAEGIAB">
                        <p class="titleinexample">示例3-10分离和不提交应用程序会话</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; ...
  <span class="bold">SYS.DBMS_XS_SESSIONS.DETACH_SESSION（TRUE）</span> ;结束;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__GUID-DCF0E3B5-EBAE-4C71-A9FA-FC073AA0CFE8">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-E991C805-AFFF-432D-877B-262EE8E9FA32">DETACH_SESSION</a>有关这些PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">detachSession</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B__BABJFIGH">参见示例6-21</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99119"></a><a id="DBFSG99118"></a><div class="props_rev_3"><a id="GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446" name="GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446"></a><h4 id="DBFSG-GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446" class="sect4">销毁应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.DESTROY_SESSION</code>过程或使用Java中<code class="codeph">XSSessionManager</code>类的<code class="codeph">destroySession</code>方法终止应用程序会话。此过程还会将所有传统会话与应用程序会话分离。
                        </p>
                        <p>要执行此过程，调用用户必须具有<code class="codeph">TERMINATE_SESSION</code>应用程序特权。可以通过<code class="codeph">XS_SESSION_ADMIN</code>数据库角色或<code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API调用获取此特权。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446__CHDJJCFI">示例3-11</a>显示了如何销毁应用程序会话。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446__CHDJJCFI">
                        <p class="titleinexample">示例3-11销毁应用程序会话</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; SYS.DBMS_XS_SESSIONS.DETACH_SESSION; <span class="bold">SYS.DBMS_XS_SESSIONS.DESTROY_SESSION（的sessionid）;</span>结束;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446__GUID-465383DF-344D-4E42-8D55-13BEBD50AD30">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-65D575BD-FE85-4DA6-9C0D-8A3C9BD31E2A">DESTROY_SESSION</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">destroySession</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004__BGBIJIFH">参见示例6-22</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="DBFSG99121"></a><div class="props_rev_3"><a id="GUID-1678A791-8C84-4AAF-A6C4-259F8CBB8A87" name="GUID-1678A791-8C84-4AAF-A6C4-259F8CBB8A87"></a><h3 id="DBFSG-GUID-1678A791-8C84-4AAF-A6C4-259F8CBB8A87" class="sect3">关于操作应用程序会话状态</h3>
               <div>
                  <div class="p">本节包含：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-0B1ED666-0401-4050-BE4E-EF375752A39B">关于使用命名空间模板创建命名空间</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-28231539-41C0-41DE-A0CE-AE7E682B51CB">在应用程序会话中初始化命名空间</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F">在应用程序会话中设置会话属性</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA">在应用程序会话中获取会话属性</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-367C8369-8532-4C69-8C15-F514C3363DEC">在应用程序会话中创建自定义属性</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916">删除应用程序会话中的命名空间</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-56469A83-DD02-4A99-B220-43AB653E7316">为会话启用应用程序角色</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-application-sessions.html#GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD">禁用会话的应用程序角色</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG99122"></a><div class="props_rev_3"><a id="GUID-0B1ED666-0401-4050-BE4E-EF375752A39B" name="GUID-0B1ED666-0401-4050-BE4E-EF375752A39B"></a><h4 id="DBFSG-GUID-0B1ED666-0401-4050-BE4E-EF375752A39B" class="sect4">关于使用命名空间模板创建命名空间</h4>
                  <div>
                     <p>应用程序使用命名空间来存储应用程序定义的属性 - 值对。通常，应用程序需要在不同的应用程序会话中使用相同的命名空间。命名空间模板提供了一种定义和初始化命名空间的方法。</p>
                     <p>命名空间模板定义命名空间及其属性。它用于在应用程序会话中初始化命名空间。命名空间名称必须与定义它的模板相同。</p>
                     <div class="p">本节包含：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="configuring-application-sessions.html#GUID-BF0AACF5-D06C-47E1-B83C-1D354C2CF2F3">命名空间模板的组件</a></p>
                           </li>
                           <li>
                              <p><a href="configuring-application-sessions.html#GUID-472A5EFF-EFE3-49FD-8103-1EDD4C841947">关于命名空间视图</a></p>
                           </li>
                           <li>
                              <p><a href="configuring-application-sessions.html#GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2">为应用程序会话创建命名空间模板</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DBFSG354"></a><div class="props_rev_3"><a id="GUID-BF0AACF5-D06C-47E1-B83C-1D354C2CF2F3" name="GUID-BF0AACF5-D06C-47E1-B83C-1D354C2CF2F3"></a><h5 id="DBFSG-GUID-BF0AACF5-D06C-47E1-B83C-1D354C2CF2F3" class="sect5">命名空间模板的组件</h5>
                     <div>
                        <p>命名空间模板包括以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>命名空间的名称</p>
                              <p>应用程序名称空间的名称唯一标识名称空间。在应用程序会话中创建名称空间时使用此名称。</p>
                           </li>
                           <li>
                              <p>命名空间处理程序</p>
                              <p>设置或检索属性值时，将调用命名空间处理程序。指定处理程序是可选的。</p>
                              <p>命名空间可以与事件处理函数相关联。只要对为事件处理注册的属性执行操作，服务器就会调用此函数。事件处理函数提供有属性名称，属性值和事件代码作为参数。例如：</p><pre class="oac_no_warn" dir="ltr">FUNCTION event_handling_function_name（session_id IN RAW，名称空间IN VARCHAR2，属性IN VARCHAR2，old_value IN VARCHAR2，new_value IN VARCHAR2，event_code IN PLS_INTEGER）RETURNS PLS_INTEGER;</pre></li>
                           <li>
                              <p>属性列表</p>
                              <p>属性列表包括为命名空间定义的属性。创建命名空间时，会在会话中创建这些属性。</p>
                              <p>您可以为属性指定以下可选数据：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>默认值</p>
                                    <p>在应用程序会话中创建命名空间时，使用默认值初始化该属性。<code class="codeph">FIRSTREAD_EVENT</code>和<code class="codeph">FIRSTREAD_PLUS_UPDATE_EVENT</code>的默认值和事件类型不能同时存在。
                                    </p>
                                 </li>
                                 <li>
                                    <p>事件类型</p>
                                    <p>您可以为属性指定以下事件类型：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">FIRSTREAD_EVENT</code></p>
                                          <p>指定此事件类型以在首次读取尚未设置其值的属性时调用命名空间处理程序。仅当尚未为属性设置默认值时，才能指定此事件类型。</p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">UPDATE_EVENT</code></p>
                                          <p>指定此事件类型以在更新属性值时调用命名空间处理程序。</p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">FIRSTREAD_PLUS_UPDATE_EVENT</code></p>
                                          <p>指定此事件类型以在首次读取其值尚未设置的属性或更新其值时调用命名空间处理程序。仅当尚未为属性设置默认值时，才能指定此事件类型。</p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>命名空间ACL</p>
                              <p>命名空间操作的特权模型。命名空间操作受模板上设置的ACL保护。默认情况下， <code class="codeph">NS_UNRESTRICTED_ACL</code>在模板上设置，允许对从模板创建的名称空间进行无限制操作。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DBFSG355"></a><div class="props_rev_3"><a id="GUID-472A5EFF-EFE3-49FD-8103-1EDD4C841947" name="GUID-472A5EFF-EFE3-49FD-8103-1EDD4C841947"></a><h5 id="DBFSG-GUID-472A5EFF-EFE3-49FD-8103-1EDD4C841947" class="sect5">关于命名空间视图</h5>
                     <div>
                        <p>您可以通过查询这些数据字典视图，在当前和所有应用程序会话中找到有关命名空间模板，命名空间模板属性和命名空间属性的信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="real-application-security-data-dictionary-views.html#GUID-F09A3547-CD7F-4F77-AFE9-2177C750D586">DBA_XS_NS_TEMPLATES</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="real-application-security-data-dictionary-views.html#GUID-8B005814-5098-4FB7-AED2-A85787449044">DBA_XS_NS_TEMPLATE_ATTRIBUTES</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="real-application-security-data-dictionary-views.html#GUID-EA10A73F-B1EA-4E70-9E6A-5659ABCC97A1">DBA_XS_SESSION_NS_ATTRIBUTES</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="real-application-security-data-dictionary-views.html#GUID-D22D4EF6-5C79-4056-AF9B-64EAA7D94BFE">V $ XS_SESSION_NS_ATTRIBUTES</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DBFSG389"></a><a id="DBFSG388"></a><div class="props_rev_3"><a id="GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2" name="GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2"></a><h5 id="DBFSG-GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2" class="sect5">为应用程序会话创建命名空间模板</h5>
                     <div>
                        <div class="section">
                           <p>您可以使用PL / SQL中的<code class="codeph">XS_NAMESPACE.CREATE_TEMPLATE</code>过程或Java中<code class="codeph">Session</code>接口的<code class="codeph">createNamespace</code>方法创建命名空间模板。
                           </p>
                           <p><a href="configuring-application-sessions.html#GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2__BABDDIJA">示例3-12</a>显示了如何为应用程序会话创建命名空间模板<code class="codeph">ns1</code> 。它使用<code class="codeph">attrs</code>属性列表定义此命名空间的属性。由于此命名空间模板在模板上设置了<code class="codeph">NS_UNRESTRICTED_ACL</code> ，因此允许对从模板创建的命名空间进行无限制操作。
                           </p>
                           <p>调用用户必须具有<code class="codeph">ADMIN_ANY_SEC_POLICY</code>应用程序权限，这允许它管理名称空间模板和属性。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2__BABDDIJA">
                           <p class="titleinexample">示例3-12创建命名空间模板</p><pre class="oac_no_warn" dir="ltr">DECLARE attrs XS $ NS_ATTRIBUTE_LIST; BEGIN attrs：= XS $ NS_ATTRIBUTE_LIST（）; attrs.extend（3）; attrs（1）：= XS $ NS_ATTRIBUTE（'attr1'，'value1'，XS_NAMESPACE.UPDATE_EVENT）; attrs（2）：= XS $ NS_ATTRIBUTE（'attr2'，null，XS_NAMESPACE.FIRSTREAD_PLUS_UPDATE_EVENT）; attrs（3）：= XS $ NS_ATTRIBUTE（'attr3'，'value3'）; <span class="bold">SYS.XS_NAMESPACE.CREATE_TEMPLATE（name =&gt;'ns1'，</span> <span class="bold">description =&gt;'namespace template 1'，</span> <span class="bold">attr_list =&gt; attrs，</span> <span class="bold">schema =&gt;'SCOTT'，</span> <span class="bold">package =&gt;'PKG1'，</span> <span class="bold">function =&gt;'FN1'，</span> <span class="bold">acl = &gt; 'SYS.NS_UNRESTRICTED_ACL'）;</span>结束; /</pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2__GUID-ECEE8106-A0FA-4A9E-A32D-D6456FACD0C9">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="XS_NAMESPACE-package.html#GUID-2ECCB0F0-0B24-4538-8B15-DEA704931B3E">CREATE_TEMPLATE</a>有关此PL / SQL过程语法的信息的过程</p>
                                 </li>
                                 <li>
                                    <p>有关Java <code class="codeph">createNamespace</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                                 </li>
                                 <li>
                                    <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304__BGBEFDHB">参见示例6-10</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="DBFSG99125"></a><div class="props_rev_3"><a id="GUID-28231539-41C0-41DE-A0CE-AE7E682B51CB" name="GUID-28231539-41C0-41DE-A0CE-AE7E682B51CB"></a><h4 id="DBFSG-GUID-28231539-41C0-41DE-A0CE-AE7E682B51CB" class="sect4">在应用程序会话中初始化命名空间</h4>
                  <div>
                     <div class="section">
                        <p>在任何以下事件期间，可以使用命名空间模板初始化命名空间，如本节所述：</p>
                        <div class="p">本节包含：<ul style="list-style-type:disc">
                              <li>
                                 <p><a href="configuring-application-sessions.html#GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252">创建会话时初始化命名空间</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-application-sessions.html#GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464">在附加会话时初始化命名空间</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-application-sessions.html#GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD">将命名应用程序用户分配给匿名应用程序会话时初始化命名空间</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-application-sessions.html#GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2">在应用程序会话中切换应用程序用户时初始化命名空间</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-application-sessions.html#GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73">显式初始化命名空间</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div><a id="DBFSG99812"></a><a id="DBFSG99126"></a><div class="props_rev_3"><a id="GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252" name="GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252"></a><h5 id="DBFSG-GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252" class="sect5">创建会话时初始化命名空间</h5>
                     <div>
                        <div class="section">
                           <p>使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.CREATE_SESSION</code>过程或Java中的<code class="codeph">XSSessionManager</code>类的<code class="codeph">createSession</code>方法创建应用程序会话时，可以指定要初始化的名称空间列表。
                           </p>
                           <p><a href="configuring-application-sessions.html#GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252__BABJDCJB">示例3-13</a>显示了在创建应用程序会话时如何初始化两个名称空间<code class="codeph">ns1</code>和<code class="codeph">ns2</code> 。
                           </p>
                           <p>如果在创建会话期间指定名称空间，则需要在调用名称空间中为调用者授予应用程序权限<code class="codeph">MODIFY_NAMESPACE</code>或<code class="codeph">MODIFY_ATTRIBUTE</code> ，或者授予调用者<code class="codeph">ADMIN_NAMESPACE</code>系统特权。
                           </p>
                           <div class="infoboxnote" id="GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252__GUID-152C3C4E-943B-4E86-87CC-9CC2B57B9C7C">
                              <p class="notep1">注意：</p>
                              <p><a href="configuring-application-sessions.html#GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252__BABJDCJB">示例3-13中</a>使用的命名空间必须已经定义了相应的命名空间模板。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252__BABJDCJB">
                           <p class="titleinexample">示例3-13创建应用程序会话时初始化命名空间</p><pre class="oac_no_warn" dir="ltr">DECLARE nsList DBMS_XS_NSATTRLIST; sessionid RAW（16）; BEGIN nsList：= DBMS_XS_NSATTRLIST（DBMS_XS_NSATTR（'ns1'），DBMS_XS_NSATTR（'ns2'））; SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid，FALSE，FALSE，nsList）;结束; /</pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252__GUID-DF0BFFB9-9FCD-466F-B895-3061161654BA">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="DBMS_XS_SESSION-package.html#GUID-9C80BEC1-29EA-430D-B597-3CA6182A7DFB">CREATE_SESSION</a>有关此PL / SQL过程语法的信息的过程</p>
                                 </li>
                                 <li>
                                    <p>有关Java <code class="codeph">createSession</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                                 </li>
                                 <li>
                                    <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E__BGBJJCCB">参见示例6-2</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DBFSG99813"></a><a id="DBFSG99127"></a><div class="props_rev_3"><a id="GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464" name="GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464"></a><h5 id="DBFSG-GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464" class="sect5">在附加会话时初始化命名空间</h5>
                     <div>
                        <div class="section">
                           <p>使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.ATTACH_SESSION</code>过程或使用Java中的<code class="codeph">XSSessionManager</code>类的<code class="codeph">attachSession</code>方法附加会话时，可以指定要初始化的名称空间列表。
                           </p>
                           <p><a href="configuring-application-sessions.html#GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464__BABICEAC">示例3-14</a>显示了在附加应用程序会话时如何初始化两个名称空间<code class="codeph">ns1</code>和<code class="codeph">ns2</code> 。
                           </p>
                           <p>如果指定名称空间，则需要在用户名或<code class="codeph">ADMIN_NAMESPACE</code>系统权限上为用户授予应用程序权限<code class="codeph">MODIFY_NAMESPACE</code>或<code class="codeph">MODIFY_ATTRIBUTE</code> 。
                           </p>
                           <div class="infoboxnote" id="GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464__GUID-6EC4A435-DDB9-4584-BCCF-A08EFEC4D4C5">
                              <p class="notep1">注意：</p>
                              <p><a href="configuring-application-sessions.html#GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464__BABICEAC">示例3-14中</a>使用的命名空间必须已经定义了相应的命名空间模板。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464__BABICEAC">
                           <p class="titleinexample">示例3-14附加应用程序会话时初始化命名空间</p><pre class="oac_no_warn" dir="ltr">DECLARE nsList DBMS_XS_NSATTRLIST; sessionid RAW（16）; BEGIN nsList：= DBMS_XS_NSATTRLIST（DBMS_XS_NSATTR（'ns1'），DBMS_XS_NSATTR（'ns2'））; SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; <span class="bold">SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（sessionid，NULL，NULL，NULL，NULL，nsList）;</span>结束; /</pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464__GUID-219BDF9C-7053-4C52-A13F-C9B9A4313F3E">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="DBMS_XS_SESSION-package.html#GUID-2CCDFDD1-F3B4-4EE5-A261-7871B18A0A91">ATTACH_SESSION</a>有关此PL / SQL过程语法的信息的过程</p>
                                 </li>
                                 <li>
                                    <p>有关Java <code class="codeph">attachSession</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                                 </li>
                                 <li>
                                    <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__BABJCJBI">参见示例6-3</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DBFSG99814"></a><a id="DBFSG99128"></a><div class="props_rev_3"><a id="GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD" name="GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD"></a><h5 id="DBFSG-GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD" class="sect5">将命名应用程序用户分配给匿名应用程序会话时初始化命名空间</h5>
                     <div>
                        <div class="section">
                           <p>使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.ASSIGN_USER</code>过程或Java中<code class="codeph">XSSessionManager</code>类的<code class="codeph">assignUser</code>方法将应用程序用户分配给应用程序会话时，可以指定要初始化的名称空间列表。
                           </p>
                           <p>如果指定名称空间，则需要在用户名或<code class="codeph">ADMIN_NAMESPACE</code>系统权限上为用户授予应用程序权限<code class="codeph">MODIFY_NAMESPACE</code>或<code class="codeph">MODIFY_ATTRIBUTE</code> 。
                           </p>
                           <p><a href="configuring-application-sessions.html#GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD__BABBECBI">示例3-15</a>显示了在将应用程序用户分配给应用程序会话时如何初始化两个名称空间<code class="codeph">ns1</code>和<code class="codeph">ns2</code> 。
                           </p>
                           <div class="infoboxnote" id="GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD__GUID-F87E68B8-A580-414D-99E4-C183D6FCD371">
                              <p class="notep1">注意：</p>
                              <p><a href="configuring-application-sessions.html#GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD__BABBECBI">示例3-15中</a>使用的命名空间必须已经定义了相应的命名空间模板。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD__BABBECBI">
                           <p class="titleinexample">示例3-15将应用程序用户分配给应用程序会话时初始化命名空间</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（30）; nsList DBMS_XS_NSATTRLIST; BEGIN nsList：= DBMS_XS_NSATTRLIST（DBMS_XS_NSATTR（'ns1'），DBMS_XS_NSATTR（'ns2'））; SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'XSGUEST'，sessionid）; <span class="bold">SYS.DBMS_XS_SESSIONS.ASSIGN_USER（username =&gt;'lwuser2'，</span> <span class="bold">sessionid =&gt; sessionid，</span> <span class="bold">namespaces =&gt; nsList）;</span>结束; /</pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD__GUID-C833669E-B59D-4E12-A759-6A28FDEC3C61">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="DBMS_XS_SESSION-package.html#GUID-C93E0B47-6F3E-44E0-8A3F-5EE868050923">ASSIGN_USER</a>有关此PL / SQL过程语法的信息的过程</p>
                                 </li>
                                 <li>
                                    <p>有关Java <code class="codeph">assignUser</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                                 </li>
                                 <li>
                                    <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABJABAB">参见示例6-5</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DBFSG99815"></a><a id="DBFSG99129"></a><div class="props_rev_3"><a id="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2" name="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2"></a><h5 id="DBFSG-GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2" class="sect5">在应用程序会话中切换应用程序用户时初始化命名空间</h5>
                     <div>
                        <div class="section">
                           <p>使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.SWITCH_USER</code>过程或使用Java中的<code class="codeph">Session</code>接口的<code class="codeph">switchUser</code>方法在应用程序会话中切换应用程序用户时，可以指定要初始化的名称空间列表。
                           </p>
                           <p>如果指定名称空间，则需要在用户名或<code class="codeph">ADMIN_NAMESPACE</code>系统权限上为用户授予应用程序权限<code class="codeph">MODIFY_NAMESPACE</code>或<code class="codeph">MODIFY_ATTRIBUTE</code> 。
                           </p>
                           <div class="infoboxnote" id="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__GUID-CE819E65-16E4-4219-882E-5063208C1E56">
                              <p class="notep1">注意：</p>
                              <p>为了能够从交换机<code class="codeph">lwuser1</code>到<code class="codeph">lwuser2</code>安装在会议结束后，必须先定义<code class="codeph">lwuser2</code>作为目标用户<code class="codeph">lwuser1</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">exec XS_PRINCIPAL.ADD_PROXY_USER（'lwuser2'，'lwuser1'）;</pre></div>
                           <p><a href="configuring-application-sessions.html#GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__BABDDJGE">示例3-16</a>显示了在应用程序会话中切换应用程序用户时如何初始化两个名称空间<code class="codeph">ns1</code>和<code class="codeph">ns2</code> 。
                           </p>
                           <div class="infoboxnote" id="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__GUID-673BE5C3-1EDE-498E-A654-BDBDE531CD02">
                              <p class="notep1">注意：</p>
                              <p><a href="configuring-application-sessions.html#GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__BABDDJGE">示例3-16中</a>使用的命名空间必须已经定义了相应的命名空间模板。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__BABDDJGE">
                           <p class="titleinexample">示例3-16在应用程序会话中切换应用程序用户时初始化命名空间</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（30）; nsList DBMS_XS_NSATTRLIST; BEGIN nsList：= DBMS_XS_NSATTRLIST（DBMS_XS_NSATTR（'ns1'），DBMS_XS_NSATTR（'ns2'））; SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS。 DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; <span class="bold">SYS.DBMS_XS_SESSIONS.SWITCH_USER（username =&gt;'lwuser2'，</span> <span class="bold">namespaces =&gt; nsList）;</span>结束; /</pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__GUID-AF2B6D7E-A764-4C05-80DA-211F78427445">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="DBMS_XS_SESSION-package.html#GUID-6F9F4CE9-A434-4F43-9141-48E3F7B0A800">SWITCH_USER</a>有关此PL / SQL过程语法的信息的过程</p>
                                 </li>
                                 <li>
                                    <p>有关Java <code class="codeph">switchUser</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                                 </li>
                                 <li>
                                    <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABDIGAE">参见示例6-6</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DBFSG99816"></a><a id="DBFSG99130"></a><div class="props_rev_3"><a id="GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73" name="GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73"></a><h5 id="DBFSG-GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73" class="sect5">显式初始化命名空间</h5>
                     <div>
                        <div class="section">
                           <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.CREATE_NAMESPACE</code>过程或Java中<code class="codeph">Session</code>接口的<code class="codeph">createNamespace</code>方法在应用程序会话中显式初始化命名空间。
                           </p>
                           <p>要执行<code class="codeph">DBMS_XS_SESSIONS.CREATE_NAMESPACE</code>过程，调用用户必须具有命名空间或<code class="codeph">ADMIN_NAMESPACE</code>系统特权的<code class="codeph">MODIFY_NAMESPACE</code>应用程序特权。
                           </p>
                           <p><a href="configuring-application-sessions.html#GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73__BABEHAHF">示例3-17</a>显示了如何在应用程序会话中显式初始化命名空间<code class="codeph">ns1</code> 。
                           </p>
                           <div class="infoboxnote" id="GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73__GUID-D30577AA-90BA-4F49-8287-DEABBA3F81BA">
                              <p class="notep1">注意：</p>
                              <p><a href="configuring-application-sessions.html#GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73__BABEHAHF">示例3-17中</a>使用的命名空间必须已经定义了相应的命名空间模板。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73__BABEHAHF">
                           <p class="titleinexample">示例3-17在应用程序会话中显式初始化命名空间</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（30）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; <span class="bold">SYS.DBMS_XS_SESSIONS.CREATE_NAMESPACE（ 'NS1'）;</span>结束; /</pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73__GUID-0A66FEF0-24A5-4DC2-8D2E-93A63849CF8F">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="DBMS_XS_SESSION-package.html#GUID-0D41166C-98B5-4043-8A20-E524A2AE8BA6">CREATE_NAMESPACE</a>有关此PL / SQL过程语法的信息的过程</p>
                                 </li>
                                 <li>
                                    <p>有关Java <code class="codeph">createNamespace</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                                 </li>
                                 <li>
                                    <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304__BGBEFDHB">参见示例6-10</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="DBFSG99133"></a><a id="DBFSG99132"></a><div class="props_rev_3"><a id="GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F" name="GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F"></a><h4 id="DBFSG-GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F" class="sect4">在应用程序会话中设置会话属性</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.SET_ATTRIBUTE</code>过程或Java中的<code class="codeph">SessionNamespace</code>接口方法的<code class="codeph">setAttribute</code>方法设置特定会话属性的值。
                        </p>
                        <p>需要为调用用户授予对命名空间或<code class="codeph">ADMIN_NAMESPACE</code>系统特权的<code class="codeph">MODIFY_ATTRIBUTE</code>应用程序特权。
                        </p>
                        <div class="infoboxnote" id="GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F__GUID-31FB6AFB-B9BC-4114-B5BC-358947588039">
                           <p class="notep1">注意：</p>
                           <p>属性可以存储长度最多为4000个字符的字符串值。</p>
                        </div>
                        <p><a href="configuring-application-sessions.html#GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F__CJABGGGE">示例3-18</a>显示了如何为应用程序会话的属性<code class="codeph">attr1</code>设置值<code class="codeph">val1</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F__CJABGGGE">
                        <p class="titleinexample">示例3-18为应用程序会话设置命名空间属性</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; SYS.DBS_XS_SESSIONS.CREATE_NAMESPACE（ 'NS1'）; <span class="bold">SYS.DBMS_XS_SESSIONS.SET_ATTRIBUTE（'ns1'，'attr1'，'val1'）;</span> SYS.DBMS_XS_SESSIONS.DETACH_SESSION; SYS.DBMS_XS_SESSIONS.DESTROY_SESSION（的sessionid）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F__GUID-3FAEFABC-E90B-4567-8B3B-BCFC506A16E2">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-D82F1CAA-EE0A-4A75-A1B9-4BFCD301FDC4">SET_ATTRIBUTE过程</a>以获取有关此PL / SQL过程语法的更多信息</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">setAttribute</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-BEF803A4-9CE4-4F82-B31A-FFC5C1C0E567">关于设置会话命名空间属性</a>以获取有关Java中此任务的信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99136"></a><a id="DBFSG99135"></a><div class="props_rev_3"><a id="GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA" name="GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA"></a><h4 id="DBFSG-GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA" class="sect4">在应用程序会话中获取会话属性</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.GET_ATTRIBUTE</code>过程或使用Java中的<code class="codeph">SessionNamespace</code>接口方法的<code class="codeph">getAttribute</code>方法来检索特定会话属性的值。
                        </p>
                        <p>不需要为调用用户授予使用<code class="codeph">DBMS_XS_SESSIONS.GET_ATTRIBUTE</code>过程获取属性的任何权限。
                        </p>
                        <div class="infoboxnote" id="GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA__GUID-57A9B4F1-15F1-454B-B765-B0E70166E144">
                           <p class="notep1">注意：</p>
                           <p>如果尚未设置属性值，并且已为该属性指定了<code class="codeph">FIRSTREAD_EVENT</code> ，则尝试读取该属性值会触发对命名空间事件处理程序的调用。命名空间事件处理程序过程通常为属性设置值，并执行其他特定于应用程序的处理任务。
                           </p>
                        </div>
                        <p><a href="configuring-application-sessions.html#GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA__CHDGJHAC">示例3-19</a>显示了如何检索应用程序会话的属性<code class="codeph">attr1</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA__CHDGJHAC">
                        <p class="titleinexample">示例3-19获取应用程序会话的命名空间属性</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; attrib_out_val VARCHAR2（4000）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; SYS.DBMS_XS_SESSIONS.CREATE_NAMESPACE（ 'NS1'）; SYS.DBMS_XS_SESSIONS.SET_ATTRIBUTE（'ns1'，'attr1'，'val1'）; <span class="bold">SYS.DBMS_XS_SESSIONS.GET_ATTRIBUTE（'ns1'，'attr1'，attrib_out_val）;</span> SYS.DBMS_XS_SESSIONS.DETACH_SESSION; SYS.DBMS_XS_SESSIONS.DESTROY_SESSION（的sessionid）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA__GUID-55FC55FC-A213-4480-8393-81EB4A9B60EC">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-9A541912-E165-4204-A1A4-4E044628E8AE">GET_ATTRIBUTE</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">getAttribute</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2">获取会话命名空间属性</a>以获取有关Java中此任务的信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99139"></a><a id="DBFSG99138"></a><div class="props_rev_3"><a id="GUID-367C8369-8532-4C69-8C15-F514C3363DEC" name="GUID-367C8369-8532-4C69-8C15-F514C3363DEC"></a><h4 id="DBFSG-GUID-367C8369-8532-4C69-8C15-F514C3363DEC" class="sect4">在应用程序会话中创建自定义属性</h4>
                  <div>
                     <div class="section">
                        <p>您可以创建在使用一个命名空间的自定义属性<code class="codeph">DBMS_XS_SESSIONS.CREATE_ATTRIBUTE</code>在PL / SQL程序或<code class="codeph">createAttribute</code>的方法<code class="codeph">SessionNamespace</code>在Java接口的方法。
                        </p>
                        <p>自定义属性与模板属性不同。模板属性是命名空间模板的一部分，并在创建命名空间时在会话中自动创建。使用<code class="codeph">CREATE_ATTRIBUTE</code>过程以编程方式在命名空间中创建自定义属性。
                        </p>
                        <p>调用应用程序需要被授予对命名空间或<code class="codeph">ADMIN_NAMESPACE</code>系统特权的<code class="codeph">MODIFY_ATTRIBUTE</code>应用程序特权。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-367C8369-8532-4C69-8C15-F514C3363DEC__CJAIGCFB">示例3-20</a>显示了如何在应用程序会话的命名空间中创建自定义属性<code class="codeph">customattr</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-367C8369-8532-4C69-8C15-F514C3363DEC__CJAIGCFB">
                        <p class="titleinexample">示例3-20为应用程序会话创建自定义命名空间属性</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; attrib_out_val VARCHAR2（4000）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; SYS.DBMS_XS_SESSIONS.CREATE_NAMESPACE（ 'NS1'）; <span class="bold">SYS.DBMS_XS_SESSIONS.CREATE_ATTRIBUTE（ 'NS1'， 'customattr'， 'default_value_custom'，NULL）;</span> SYS.DBMS_XS_SESSIONS.SET_ATTRIBUTE（ 'NS1'， 'customattr'， 'NEWVALUE'）; SYS.DBMS_XS_SESSIONS.GET_ATTRIBUTE（'ns1'，'customattr'，attrib_out_val）; SYS.DBMS_XS_SESSIONS.DETACH_SESSION; SYS.DBMS_XS_SESSIONS.DESTROY_SESSION（的sessionid）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-367C8369-8532-4C69-8C15-F514C3363DEC__GUID-D9BBE61A-551C-4CFD-8F22-30737C013DB2">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-60C4E4D8-714F-4732-815F-2261F8B5D022">CREATE_ATTRIBUTE</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">createAttribute</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57__BGBGEEGH">参见示例6-13</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99148"></a><a id="DBFSG99147"></a><div class="props_rev_3"><a id="GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916" name="GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916"></a><h4 id="DBFSG-GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916" class="sect4">删除应用程序会话中的命名空间</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.DELETE_NAMESPACE</code>过程或Java中的<code class="codeph">SessionNamespace</code>接口方法的<code class="codeph">deleteAttribute</code>方法，从应用程序会话中删除命名空间及其标识的所有属性。
                        </p>
                        <p>调用用户必须具有命名空间或<code class="codeph">ADMIN_NAMESPACE</code>系统特权的<code class="codeph">MODIFY_NAMESPACE</code>应用程序特权。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916__CJABDJCE">示例3-21</a>显示了如何从应用程序会话中删除命名空间<code class="codeph">ns1</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916__CJABDJCE">
                        <p class="titleinexample">示例3-21删除应用程序会话中的命名空间</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; out_value VARCHAR2（4000）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; SYS.DBMS_XS_SESSIONS.CREATE_NAMESPACE（ 'NS1'）; SYS.DBMS_XS_SESSIONS.SET_ATTRIBUTE（'ns1'，'attr1'，'val1'）; SYS.DBMS_XS_SESSIONS.GET_ATTRIBUTE（'ns1'，'attr1'，out_value）; <span class="bold">SYS.DBMS_XS_SESSIONS.DELETE_NAMESPACE（ 'NS1'）;</span> SYS.DBMS_XS_SESSIONS.DETACH_SESSION; SYS.DBMS_XS_SESSIONS.DESTROY_SESSION（的sessionid）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916__GUID-349FAE0D-72FC-4F95-866E-A7F96BE1576F">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-E1FEF449-B93D-46A8-9319-63DB225C0BF6">DELETE_NAMESPACE</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">deleteNamespace</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-07954A29-1F53-4609-9F69-7A883972E6D0__BGBEIACD">参见示例6-11</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99142"></a><a id="DBFSG99141"></a><div class="props_rev_3"><a id="GUID-56469A83-DD02-4A99-B220-43AB653E7316" name="GUID-56469A83-DD02-4A99-B220-43AB653E7316"></a><h4 id="DBFSG-GUID-56469A83-DD02-4A99-B220-43AB653E7316" class="sect4">为会话启用应用程序角色</h4>
                  <div>
                     <div class="section">
                        <p>您只能使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.ENABLE_ROLE</code>过程或Java中的<code class="codeph">Session</code>接口的<code class="codeph">enableRole</code>方法，仅启用应用程序会话用户的直接授予的常规应用程序角色。
                        </p>
                        <p><code class="codeph">DBA_XS_SESSION_ROLES</code>动态数据字典视图列出了在所有应用程序会话中启用的应用程序角色。<code class="codeph">V$XS_SESSION_ROLES</code>动态数据字典视图列出了当前连接的应用程序会话中启用的应用程序角色。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-56469A83-DD02-4A99-B220-43AB653E7316__CHDHIAAG">示例3-22</a>显示了如何在应用程序会话中启用角色。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-56469A83-DD02-4A99-B220-43AB653E7316__CHDHIAAG">
                        <p class="titleinexample">示例3-22在应用程序会话中启用角色</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; <span class="bold">SYS.DBMS_XS_SESSIONS.ENABLE_ROLE（ 'auth1_role'）;</span> SYS.DBMS_XS_SESSIONS.DETACH_SESSION; SYS.DBMS_XS_SESSIONS.DESTROY_SESSION（的sessionid）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-56469A83-DD02-4A99-B220-43AB653E7316__GUID-5B869A6D-C94E-477B-86C7-94479D72096F">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-7EB3339F-E06A-4F0C-8615-D049CA3D9AD2">ENABLE_ROLE</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">enableRole</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-51C12565-C2CE-4406-8152-3D67D4001A9B__BABIFEGI">参见示例6-7</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99145"></a><a id="DBFSG99144"></a><div class="props_rev_3"><a id="GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD" name="GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD"></a><h4 id="DBFSG-GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD" class="sect4">禁用会话的应用程序角色</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用PL / SQL中的<code class="codeph">DBMS_XS_SESSIONS.DISABLE_ROLE</code>过程或Java中<code class="codeph">Session</code>接口的<code class="codeph">disableRole</code>方法禁用特定会话的应用程序角色。
                        </p>
                        <p><a href="configuring-application-sessions.html#GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD__CJAGGGDE">示例3-23</a>显示了如何在应用程序会话中禁用角色。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD__CJAGGGDE">
                        <p class="titleinexample">示例3-23禁用应用程序会话中的角色</p><pre class="oac_no_warn" dir="ltr">DECLARE sessionid RAW（16）; BEGIN SYS.DBMS_XS_SESSIONS.CREATE_SESSION（'lwuser1'，sessionid）; SYS.DBMS_XS_SESSIONS.ATTACH_SESSION（的sessionid）; SYS.DBMS_XS_SESSIONS.ENABLE_ROLE（ 'auth1_role'）; <span class="bold">SYS.DBMS_XS_SESSIONS.DISABLE_ROLE（ 'auth1_role'）;</span> SYS.DBMS_XS_SESSIONS.DETACH_SESSION; SYS.DBMS_XS_SESSIONS.DESTROY_SESSION（的sessionid）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD__GUID-7764C2F7-FCAA-40F2-A3D7-D379291DBA75">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="DBMS_XS_SESSION-package.html#GUID-4EC230A2-6155-420F-B995-0D9C4B5C3B38">DISABLE_ROLE</a>有关此PL / SQL过程语法的信息的过程</p>
                              </li>
                              <li>
                                 <p>有关Java <code class="codeph">disableRole</code>方法语法的信息，请参阅<a href="../jadfs/index.html" target="_blank"><span><cite>Oracle数据库Real Application Security Java API参考</cite></span></a> （采用Javadoc格式）</p>
                              </li>
                              <li>
                                 <p>有关此任务的Java示例的信息，请<a href="using-real-application-security-in-java-applications.html#GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9__BABJJGHA">参见示例6-8</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="DBFSG127"></a><div class="props_rev_3"><a id="GUID-828BD9A7-E7E6-4A24-A69B-4E939FEA7167" name="GUID-828BD9A7-E7E6-4A24-A69B-4E939FEA7167"></a><h3 id="DBFSG-GUID-828BD9A7-E7E6-4A24-A69B-4E939FEA7167" class="sect3">关于外部用户和角色的管理API</h3>
               <div>
                  <div class="p">本节介绍外部用户和角色所需的以下管理API：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_XS_SESSION-package.html#GUID-9C80BEC1-29EA-430D-B597-3CA6182A7DFB">CREATE_SESSION过程</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_XS_SESSION-package.html#GUID-2CCDFDD1-F3B4-4EE5-A261-7871B18A0A91">ATTACH_SESSION程序</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_XS_SESSION-package.html#GUID-C93E0B47-6F3E-44E0-8A3F-5EE868050923">ASSIGN_USER程序</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_XS_SESSION-package.html#GUID-0F69D39A-CA89-4F88-9268-BABEED216B9D">SAVE_SESSION程序</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-29457379-758E-4A45-AA24-C9F9D8A3C26F" name="GUID-29457379-758E-4A45-AA24-C9F9D8A3C26F"></a><h3 id="DBFSG-GUID-29457379-758E-4A45-AA24-C9F9D8A3C26F" class="sect3">关于Real Application Security会话权限通过ACL确定范围</h3>
               <div>
                  <p>描述通过ACL的会话权限范围，允许每个主体会话权限授予通过主体上的ACL集，其中主体可以是应用程序用户或动态角色。</p>
                  <p>在Oracle数据库12c <span class="italic">分别</span> 1版（12.1），真正应用安全会议权限授予通过<code class="codeph">GRANT_SYSTEM_PRIVILEGE</code>程序或通过撤销<code class="codeph">REVOKE_SYSTEM_PRIVILEGE</code>在程序<code class="codeph">XS_ADMIN_UTIL</code>包。这些授权适用于整个系统，允许被授权者对任何Real Application Security主体进行会话操作的授权。这是使用种子系统ACL  - <code class="codeph">SESSIONACL</code> 。所有会话权限检查都在此ACL中完成。对于运行具有多个用户社区的多个应用程序的数据库，这种方法对于适当地管理Real Application Security会话管理变得麻烦。
                  </p>
                  <p>会话权限范围解决了两个问题。第一个问题是谁可以创建，附加，分离或销毁用户的会话。第二个问题是谁可以为用户会话启用动态角色。由于永远不能授予动态角色并且只能动态启用动态角色，因此需要通过ACL进行会话特权限定。由于常规角色被授予应用程序用户，因此不需要ACL。</p>
                  <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，Real Application Security通过ACL支持会话权限范围。此功能允许通过主体上的ACL设置每个主要会话权限授予。包含会话权限授予的ACL可以在常规Real Application Security应用程序用户或动态角色上设置，但不能在常规Real Application Security角色或外部主体上设置。由于可以根据应用程序用户上设置的ACL或会话操作中涉及的动态角色强制实施Real Application Security会话范围，因此您可以更精细地将会话操作限制为特定用户社区。例如，您可以为可以由单独的会话管理器（调度程序）管理的单独用户社区设置会话操作，因此属于同一用户社区的用户将在其上设置相同的ACL。此外，通过添加新权限<code class="codeph">ENABLE_DYNAMIC_ROLE</code>来限制启用和禁用动态角色，可以将启用和禁用动态角色限制为适当的调度程序。即使从先前附加启用现有会话范围动态角色，也会强制实施此权限。借助这些功能，Real Application Security会话管理员可以为会话权限提供范围，允许用户为一个Real Application Security用户社区或已授予其的一组Real Application Security用户社区创建或附加或修改会话特权。
                  </p>
                  <p>可以使用Real Application Security最低系统权限<code class="codeph">PROVISION</code>在创建时在主体上设置ACL，该权限可以创建，修改或删除应用程序用户和应用程序角色。此外，您还可以使用<code class="codeph">CREATE_USER</code>过程和<code class="codeph">CREATE_DYNAMIC_ROLE</code>过程，这要求调用者具有<code class="codeph">ALTER USER</code>或<code class="codeph">ALTER ROLE</code>权限，具体取决于所创建的主体;或者可以在使用<code class="codeph">SET_ACL</code>过程创建主体之后创建ACL，这需要调用者具有与前面提到的相同的权限，具体取决于主体是应用程序用户还是动态角色。在使用<code class="codeph">SET_ACL</code>过程设置ACL之前，应用程序用户或动态角色和ACL必须已存在，并且必须已在<code class="codeph">SYS</code>模式中创建ACL。
                  </p>
                  <p>会话操作要求将特定会话权限授予会话管理器，具体取决于系统范围的ACL或附加到受影响的用户或角色的ACL的会话操作。<code class="codeph">ADMINISTER_SESSION</code>权限聚合所有特定会话权限。与所有会话权限一样，此权限可以通过系统范围的ACL或主体特定ACL授予会话管理器。与其他系统权限一样，审核新权限的使用。在用户或动态角色上设置的ACL将覆盖系统范围的ACL。</p>
                  <p>增强了<code class="codeph">DBA_XS_USERS</code>和<code class="codeph">DBA_XS_DYNAMIC_ROLES</code>视图，以显示在Real Application Security应用程序用户或动态角色上设置的ACL的附加列。
                  </p>
                  <p>系统级会话权限授予可以与主体特定ACL共存，但主体特定ACL授权具有优先权。此优先级很重要，因为Real Application Security主体特定ACL可以具有否定授权。请注意，否定授权只能出现在主体特定ACL中，而不能出现在系统ACL中。</p>
                  <p>下表描述了会话权限检查的行为，该检查将主体特定ACL（第1列）与系统ACL（第2列）进行比较，并将会话权限检查（第3列）的结果显示为True或False。例如，如果在主体特定ACL中未授予或拒绝已检查的权限，则会检查系统ACL是否存在该权限。</p>
                  <div class="tblformal" id="GUID-29457379-758E-4A45-AA24-C9F9D8A3C26F__GUID-CE3DC05D-157A-4658-9369-23126B3C1D56">
                     <p class="titleintable">表3-2会话权限检查</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="会话权限检查" border="1" summary="This table contains 3 columns and 4 rows that describe the behavior of the session privilege check comparing the principal specific ACL (column 1) versus the System ACL (column 2) and the result of the system privilege check (column 3) as being either True or False. " frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d11248e6678">主要特定ACL</th>
                              <th align="left" valign="bottom" id="d11248e6680">系统ACL</th>
                              <th align="left" valign="bottom" id="d11248e6682">会话权限检查结果</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d11248e6686" headers="d11248e6678 ">格兰特</td>
                              <td align="left" valign="top" headers="d11248e6686 d11248e6680 ">拒绝，授予或未指定</td>
                              <td align="left" valign="top" headers="d11248e6686 d11248e6682 ">真正</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d11248e6693" headers="d11248e6678 ">拒绝</td>
                              <td align="left" valign="top" headers="d11248e6693 d11248e6680 ">拒绝，授予或未指定</td>
                              <td align="left" valign="top" headers="d11248e6693 d11248e6682 ">假</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d11248e6700" headers="d11248e6678 ">未指定或ACL不存在</td>
                              <td align="left" valign="top" headers="d11248e6700 d11248e6680 ">格兰特</td>
                              <td align="left" valign="top" headers="d11248e6700 d11248e6682 ">真正</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d11248e6707" headers="d11248e6678 ">未指定或ACL不存在</td>
                              <td align="left" valign="top" headers="d11248e6707 d11248e6680 ">未标明。</td>
                              <td align="left" valign="top" headers="d11248e6707 d11248e6682 ">假</td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-29457379-758E-4A45-AA24-C9F9D8A3C26F__GUID-4D7E39AA-EF3E-4631-969F-2B76DAA58E88">根据Principal上的ACL设置强制实现会话权限</p>
                     <p>会话权限根据会话操作中Real Application Security应用程序用户上设置的ACL强制实施。根据动态角色上设置的ACL强制实施启用动态角色的权限。例如，创建会话操作要求调用者在Real Application Security应用程序用户的ACL集中具有<code class="codeph">CREATE_SESSION</code>特权。同样，具有动态角色的附加操作需要在动态角色上设置的ACL中具有<code class="codeph">ENABLE_DYNAMIC_ROLES</code>权限。如前所述的任何现有系统级会话权限授予仍然可以共存，但主体特定ACL授权优先。
                     </p>
                     <p>特权检查首先在与主体关联的ACL中完成（如果有这样的设置）。如果ACL检查成功，则操作将通过。如果检查发现拒绝，则操作将失败并且权限错误不足。如果既未找到grant也未拒绝，则检查在与SESSION_SC安全类关联的系统ACL中完成，并且操作失败或成功基于此权限检查结果。</p>
                     <p>下表列出了Real Application Security会话操作以及执行该操作所需的会话权限。此信息对于在特定会话操作的主体上创建ACL非常有用。请注意， <code class="codeph">ADMINISTER_SESSION</code>权限会聚合此表中列出的所有会话权限。
                     </p>
                     <div class="tblformal" id="GUID-29457379-758E-4A45-AA24-C9F9D8A3C26F__GUID-6DB1901E-EED4-4504-902E-2F28565EBB69">
                        <p class="titleintable">表3-3会话权限操作以及执行它们所需的权限</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="会话权限操作和执行它们所需的权限" border="1" summary="This table indicates in column 1 the session operation and describes the required session privilege (if any) in column 2." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d11248e6741">会话操作</th>
                                 <th align="left" valign="bottom" id="d11248e6743">必需的会话权限</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6747" headers="d11248e6741 ">创建会话</td>
                                 <td align="left" valign="top" headers="d11248e6747 d11248e6743 ">Real Application Security应用程序用户（用于创建会话）或系统ACL中设置的ACL中的<code class="codeph">CREATE_SESSION</code>权限。如果主体特定ACL中存在否定授权，则操作将失败。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6754" headers="d11248e6741 ">附加会话</td>
                                 <td align="left" valign="top" headers="d11248e6754 d11248e6743 ">在Real Application Security应用程序用户（用于创建会话）或在系统ACL中设置的ACL中的<code class="codeph">ATTACH_SESSION</code>权限。在动态角色（用于创建会话）或系统ACL中设置的ACL中的<code class="codeph">ENABLE_DYNAMIC_ROLE</code>权限。如果主体特定ACL中存在否定授权，则操作将失败。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6764" headers="d11248e6741 ">分配用户</td>
                                 <td align="left" valign="top" headers="d11248e6764 d11248e6743 ">在要分配的指定Real Application Security应用程序用户或系统ACL中的ACL集中的<code class="codeph">ASSIGN_SESSION</code>权限。在动态角色（用于创建会话）或系统ACL中设置的ACL中的<code class="codeph">ENABLE_DYNAMIC_ROLE</code>权限。因此，如果启用了动态角色，则会检查这些权限。如果主体特定ACL中存在否定授权，则操作将失败。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6774" headers="d11248e6741 ">切换用户</td>
                                 <td align="left" valign="top" headers="d11248e6774 d11248e6743 ">根据代理配置，不进行会话权限检查。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6779" headers="d11248e6741 ">启用角色</td>
                                 <td align="left" valign="top" headers="d11248e6779 d11248e6743 ">没有会话权限检查。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6784" headers="d11248e6741 ">禁用角色</td>
                                 <td align="left" valign="top" headers="d11248e6784 d11248e6743 ">没有会话权限检查。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6789" headers="d11248e6741 ">命名空间操作（创建命名空间，删除命名空间，创建属性，设置属性，重置属性，删除属性）</td>
                                 <td align="left" valign="top" headers="d11248e6789 d11248e6743 ">没有会话权限检查，只有名称空间权限检查。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6794" headers="d11248e6741 ">保存会话，分离会话</td>
                                 <td align="left" valign="top" headers="d11248e6794 d11248e6743 ">没有会话权限检查。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6799" headers="d11248e6741 ">破坏会话</td>
                                 <td align="left" valign="top" headers="d11248e6799 d11248e6743 ">在Real Application Security应用程序用户（用于创建会话）或在系统ACL中设置的ACL中的<code class="codeph">TERMINATE_SESSION</code>权限。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6806" headers="d11248e6741 ">设置会话Cookie</td>
                                 <td align="left" valign="top" headers="d11248e6806 d11248e6743 ">在Real Application Security应用程序用户（用于创建会话）或在系统ACL中设置的ACL中的<code class="codeph">MODIFY_SESSION</code>权限。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6813" headers="d11248e6741 ">设置不活动超时</td>
                                 <td align="left" valign="top" headers="d11248e6813 d11248e6743 ">在Real Application Security应用程序用户（用于创建会话）或在系统ACL中设置的ACL中的<code class="codeph">MODIFY_SESSION</code>权限。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6821" headers="d11248e6741 ">重新授权会话</td>
                                 <td align="left" valign="top" headers="d11248e6821 d11248e6743 ">在Real Application Security应用程序用户（用于创建会话）或在系统ACL中设置的ACL中的<code class="codeph">MODIFY_SESSION</code>权限。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6828" headers="d11248e6741 ">从Cookie获取SID</td>
                                 <td align="left" valign="top" headers="d11248e6828 d11248e6743 ">没有会话权限检查。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11248e6833" headers="d11248e6741 ">全局回调配置（添加全局回调，删除全局回调，启用全局回调）</td>
                                 <td align="left" valign="top" headers="d11248e6833 d11248e6743 ">没有会话权限检查，只有回调权限检查。</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-29457379-758E-4A45-AA24-C9F9D8A3C26F__GUID-2BF80D03-4D61-41AE-87F2-915C73C495DE">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="XS_ADMIN_UTIL-package.html#GUID-7F29B504-8BEA-43C6-B791-A01899B66FB9">GRANT_SYSTEM_PRIVILEGE过程</a>和<a href="XS_ADMIN_UTIL-package.html#GUID-B0EFF106-9A56-4864-B537-E7296C819606">REVOKE_SYSTEM_PRIVILEGE过程</a></p>
                           </li>
                           <li>
                              <p><a href="predefined-objects-in-real-application-security.html#GUID-D0BDAD25-C19F-471A-8237-AEEAD4252187">安全类</a></p>
                           </li>
                           <li>
                              <p><a href="XS_PRINCIPAL-package.html#GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D">CREATE_USER过程</a> ， <a href="XS_PRINCIPAL-package.html#GUID-5D3C1B51-E0D8-45F0-B9E2-40EBE4C1F3C5">CREATE_DYNAMIC_ROLE过程</a>和<a href="XS_PRINCIPAL-package.html#GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A">SET_ACL过程</a></p>
                           </li>
                           <li>
                              <p><a href="real-application-security-data-dictionary-views.html#GUID-97B36DFE-DA8F-41E3-9141-37C8B0E6E2ED">DBA_XS_USERS</a>和<a href="real-application-security-data-dictionary-views.html#GUID-3F8717CD-401D-4264-9739-5612D3D82D32">DBA_XS_DYNAMIC_ROLES</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-D1BEF808-20B7-47AF-B26E-27011C009CAA" name="GUID-D1BEF808-20B7-47AF-B26E-27011C009CAA"></a><h4 id="DBFSG-GUID-D1BEF808-20B7-47AF-B26E-27011C009CAA" class="sect4">使用ACL授予主体的会话权限</h4>
                  <div>
                     <p>描述如何在创建用户时以及在用户创建后使用ACL为主体授予会话权限。</p>
                     <div class="section">以下示例说明如何在创建用户时以及在创建用户之后通过ACL， <code class="codeph">USER_ACL</code>向主体授予会话权限。
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D1BEF808-20B7-47AF-B26E-27011C009CAA__GUID-D5E70E28-CC56-4FAE-AAAA-432F326D167A">
                        <div class="p">首先，创建ACL <code class="codeph">USER_ACL</code>并将权限<code class="codeph">ADMINISTER_SESSION</code>授予用户<code class="codeph">lwuser3</code> ，并将权限<code class="codeph">CREATE_SESSION</code> ， <code class="codeph">MODIFY_SESSION</code>和<code class="codeph">ATTACH_SESSION</code>授予用户<code class="codeph">lwuser4</code> ，并将权限<code class="codeph">CREATE_SESSION</code>和<code class="codeph">MODIFY_SESSION</code>授予用户<code class="codeph">lwuser5</code> 。<pre class="pre codeblock"><code>sqlplus / nolog SQL&gt; CONNECT SYS / <span class="italic">password</span> as SYSDBA SQL&gt; GRANT CREATE SESSION，XS_SESSION_ADMIN to SEC_MGR IDENTIFIED BY <span class="italic">password</span> ; SQL&gt; EXEC SYS.XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE（'PROVISION'，'sec_mgr'，SYS.XS_ADMIN_UTIL.PTYPE_DB）;</code></pre><pre class="pre codeblock"><code>CONNECT SEC_MGR输入密码： <span class="italic">密码</span>已连接。</code></pre><pre class="pre codeblock"><code>DECLARE ace_list XS $ ACE_LIST; BEGIN ace_list：= XS $ ACE_LIST（XS $ ACE_TYPE（privilege_list =&gt; XS $ NAME_LIST（'“ADMINISTER_SESSION”'），授予=&gt; true，principal_name =&gt;'lwuser3'），XS $ ACE_TYPE（privilege_list =&gt; XS $ NAME_LIST（ '“CREATE_SESSION”'，'“MODIFY_SESSION”'，'“ATTACH_SESSION”'），grant =&gt; true，principal_name =&gt;'lwuser4'），XS $ ACE_TYPE（privilege_list =&gt; XS $ NAME_LIST（'“CREATE_SESSION”'，' “MODIFY_SESSION”'），grant =&gt; true，principal_name =&gt;'lwuser5'））; sys.xs_acl.create_acl（name =&gt;'USER_ACL'，ace_list =&gt; ace_list，sec_class =&gt;'SESSIONPRIVS'，description =&gt;'Session management'）;结束; /</code></pre></div>
                        <div class="p">接下来，创建用户<code class="codeph">lwuser3</code>和<code class="codeph">lwuser4</code>并为这些用户授予ACL， <code class="codeph">USER_ACL</code> 。<pre class="pre codeblock"><code>BEGIN SYS.XS_PRINCIPAL.CREATE_USER（name =&gt;'lwuser3'，schema =&gt;'HR'，acl =&gt;'USER_ACL'; END; / EXEC SYS.XS_PRINCIPAL.SET_PASSWORD（'lwuser3'，' <span class="italic">password</span> '）;</code></pre><pre class="pre codeblock"><code>BEGIN SYS.XS_PRINCIPAL.CREATE_USER（name =&gt;'lwuser4'，schema =&gt;'HR'，acl =&gt;'USER_ACL'; END; / EXEC SYS.XS_PRINCIPAL.SET_PASSWORD（'lwuser4'，' <span class="italic">password</span> '）;</code></pre></div>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-D1BEF808-20B7-47AF-B26E-27011C009CAA__GUID-939BCF9B-4387-433B-879F-E7328097E42F">
                        <div class="p">接下来，创建用户<code class="codeph">lwuser5</code>并设置ACL， <code class="codeph">USER_ACL</code> ，使用该用户<code class="codeph">SET_ACL</code>过程。<pre class="pre codeblock"><code>sqlplus SEC_MGR输入密码： <span class="italic">密码</span>已连接。</code></pre><pre class="pre codeblock"><code>BEGIN SYS.XS_PRINCIPAL.CREATE_USER（name =&gt;'lwuser5'，schema =&gt;'HR'）;结束; / EXEC SYS.XS_PRINCIPAL.SET_ACL（'lwuser5'，'USER_ACL'）;</code></pre></div>
                        <div class="infoboxnotealso" id="GUID-D1BEF808-20B7-47AF-B26E-27011C009CAA__GUID-2BF80D03-4D61-41AE-87F2-915C73C495DE">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="XS_ADMIN_UTIL-package.html#GUID-7F29B504-8BEA-43C6-B791-A01899B66FB9">GRANT_SYSTEM_PRIVILEGE过程</a>和<a href="XS_ADMIN_UTIL-package.html#GUID-B0EFF106-9A56-4864-B537-E7296C819606">REVOKE_SYSTEM_PRIVILEGE过程</a></p>
                              </li>
                              <li>
                                 <p><a href="predefined-objects-in-real-application-security.html#GUID-D0BDAD25-C19F-471A-8237-AEEAD4252187">安全类</a></p>
                              </li>
                              <li>
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D">CREATE_USER过程</a> ， <a href="XS_PRINCIPAL-package.html#GUID-5D3C1B51-E0D8-45F0-B9E2-40EBE4C1F3C5">CREATE_DYNAMIC_ROLE过程</a>和<a href="XS_PRINCIPAL-package.html#GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A">SET_ACL过程</a></p>
                              </li>
                              <li>
                                 <p><a href="real-application-security-data-dictionary-views.html#GUID-97B36DFE-DA8F-41E3-9141-37C8B0E6E2ED">DBA_XS_USERS</a>和<a href="real-application-security-data-dictionary-views.html#GUID-3F8717CD-401D-4264-9739-5612D3D82D32">DBA_XS_DYNAMIC_ROLES</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>NTH_VALUE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="NLSSORT.html" title="Previous" type="text/html">
      <link rel="next" href="NTILE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="NLSSORT.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="NTILE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">NTH_VALUE </li>
            </ol>
            <a id="GUID-F8A0E88C-67E5-4AA6-9515-95D03A7F9EA0" name="GUID-F8A0E88C-67E5-4AA6-9515-95D03A7F9EA0"></a><a id="SQLRF51563"></a><a id="SQLRF51564"></a><a id="SQLRF51565"></a><a id="SQLRF30031"></a>
            
            <h2 id="SQLRF-GUID-F8A0E88C-67E5-4AA6-9515-95D03A7F9EA0" class="sect2">NTH_VALUE </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-F8A0E88C-67E5-4AA6-9515-95D03A7F9EA0__GUID-56A22C88-1E90-4258-86E1-932357D9CEA1">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-F8A0E88C-67E5-4AA6-9515-95D03A7F9EA0__GUID-581A2DAE-8361-470B-9D07-3C3971549490"><img src="img/nth_value.gif" alt="Description of nth_value.eps follows" title="Description of nth_value.eps follows" longdesc="img_text/nth_value.html"><br><a href="img_text/nth_value.html">Description of the illustration nth_value.eps</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-F8A0E88C-67E5-4AA6-9515-95D03A7F9EA0__GUID-031D4262-5DC0-4923-8319-92F4BA505BFF">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="Analytic-Functions.html#GUID-527832F7-63C0-4445-8C16-307FA5084056">Analytic Functions</a>"</span> for information on syntax, semantics, and restrictions of the <span class="italic"><code class="codeph">analytic_clause</code></span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8A0E88C-67E5-4AA6-9515-95D03A7F9EA0__GUID-A8E665C7-FA23-4090-9E15-5F1DB0F3E7E9">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">NTH_VALUE</code> returns the <span class="italic"><code class="codeph">measure_expr</code></span> value of the <span class="italic">n</span>th row in the window defined by the <span class="italic"><code class="codeph">analytic_clause</code></span>. The returned value has the data type of the <span class="italic"><code class="codeph">measure_expr</code></span>.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>{<code class="codeph">RESPECT</code> | <code class="codeph">IGNORE</code>} <code class="codeph">NULLS</code> determines whether null values of <span class="italic"><code class="codeph">measure_expr</code></span> are included in or eliminated from the calculation. The default is <code class="codeph">RESPECT</code> <code class="codeph">NULLS</code>.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">n</code></span> determines the <span class="italic">n</span>th row for which the measure value is to be returned. <span class="italic"><code class="codeph">n</code></span> can be a constant, bind variable, column, or an expression involving them, as long as it resolves to a positive integer. The function returns <code class="codeph">NULL</code> if the data source window has fewer than <span class="italic"><code class="codeph">n</code></span> rows. If <span class="italic"><code class="codeph">n</code></span> is null, then the function returns an error.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">FROM</code> {<code class="codeph">FIRST</code> | <code class="codeph">LAST</code>} determines whether the calculation begins at the first or last row of the window. The default is <code class="codeph">FROM</code> <code class="codeph">FIRST</code>.
                        </p>
                     </li>
                  </ul>
                  <p>If you omit the <span class="italic"><code class="codeph">windowing_clause</code></span> of the <span class="italic"><code class="codeph">analytic_clause</code></span>, it defaults to <code class="codeph">RANGE</code> <code class="codeph">BETWEEN</code> <code class="codeph">UNBOUNDED</code> <code class="codeph">PRECEDING</code> <code class="codeph">AND</code> <code class="codeph">CURRENT</code> <code class="codeph">ROW</code>. This default sometimes returns an unexpected value for <code class="codeph">NTH_VALUE</code> ... <code class="codeph">FROM</code> <code class="codeph">LAST</code> ... , because the last value in the window is at the bottom of the window, which is not fixed. It keeps changing as the current row changes. For expected results, specify the <span class="italic"><code class="codeph">windowing_clause</code></span> as <code class="codeph">RANGE</code> <code class="codeph">BETWEEN</code> <code class="codeph">UNBOUNDED</code> <code class="codeph">PRECEDING</code> <code class="codeph">AND</code> <code class="codeph">UNBOUNDED</code> <code class="codeph">FOLLOWING</code>. Alternatively, you can specify the <span class="italic"><code class="codeph">windowing_clause</code></span> as <code class="codeph">RANGE</code> <code class="codeph">BETWEEN</code> <code class="codeph">CURRENT</code> <code class="codeph">ROW</code> <code class="codeph">AND</code> <code class="codeph">UNBOUNDED</code> <code class="codeph">FOLLOWING</code>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-F8A0E88C-67E5-4AA6-9515-95D03A7F9EA0__GUID-2D39D334-5E0F-4D17-ABE5-E3DE03D10BAD">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../dwhsg/sql-analysis-reporting-data-warehouses.html#DWHSG02017" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information on the use of this function
                           </p>
                        </li>
                        <li>
                           <p>Appendix C in <a href="../nlspg/appendix-C-collation-derivation-and-determination-rules-for-SQL-operations.html#NLSPG-GUID-AFCE41ED-775B-4A00-AF38-C436776AE0C5" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a> for the collation derivation rules, which define the collation assigned to the return value of <code class="codeph">NTH_VALUE</code> when it is a character value
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8A0E88C-67E5-4AA6-9515-95D03A7F9EA0__GUID-F59D6409-9FBF-422D-82AF-1163BFA78BF0">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example shows the minimum <span class="italic"><code class="codeph">amount_sold</code></span> value for the second <span class="italic"><code class="codeph">channel_id</code></span> in ascending order for each <span class="italic"><code class="codeph">prod_id</code></span> between 13 and 16:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT prod_id, channel_id, MIN(amount_sold),
    NTH_VALUE(MIN(amount_sold), 2) OVER (PARTITION BY prod_id ORDER BY channel_id
    ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) nv
  FROM sales
  WHERE prod_id BETWEEN 13 and 16
  GROUP BY prod_id, channel_id;

   PROD_ID CHANNEL_ID MIN(AMOUNT_SOLD)         NV
---------- ---------- ---------------- ----------
        13          2           907.34      906.2
        13          3            906.2      906.2
        13          4           842.21      906.2
        14          2          1015.94    1036.72
        14          3          1036.72    1036.72
        14          4           935.79    1036.72
        15          2           871.19     871.19
        15          3           871.19     871.19
        15          4           871.19     871.19
        16          2           266.84     266.84
        16          3           266.84     266.84
        16          4           266.84     266.84
        16          9            11.99     266.84

13 rows selected.</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_AUTO_INDEX package provides the interface for managing auto indexes in an Oracle database."></meta>
      <meta name="description" content="The DBMS_AUTO_INDEX package provides the interface for managing auto indexes in an Oracle database."></meta>
      <title>DBMS_AUTO_INDEX</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_AUTO_INDEX package provides the interface for managing auto indexes in an Oracle database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_AUTO_SQLTUNE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_AUTO_REPORT.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_AUTO_SQLTUNE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_AUTO_REPORT.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_AUTO_INDEX</li>
            </ol>
            <a id="GUID-78C59A20-2F92-448F-96F7-6C4FBB355E42" name="GUID-78C59A20-2F92-448F-96F7-6C4FBB355E42"></a>
            
            <h2 id="ARPLS-GUID-78C59A20-2F92-448F-96F7-6C4FBB355E42" class="sect2"><span class="enumeration_chapter">29</span> DBMS_AUTO_INDEX</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_AUTO_INDEX</code>包提供用于管理Oracle数据库中的自动索引的接口。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_AUTO_INDEX.html#GUID-D1713635-9577-40B7-8BC8-A6C9321883AE" title="DBMS_AUTO_INDEX包是用于在Oracle数据库中配置自动索引和生成自动索引操作报告的接口。">DBMS_AUTO_INDEX概述</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_AUTO_INDEX.html#GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640" title="此表列出了DBMS_AUTO_INDEX包子程序并简要描述了它们。">DBMS_AUTO_INDEX子程序摘要</a></p>
                  </li>
               </ul>
            </div>
            <div class="props_rev_3"><a id="GUID-D1713635-9577-40B7-8BC8-A6C9321883AE" name="GUID-D1713635-9577-40B7-8BC8-A6C9321883AE"></a><h3 id="ARPLS-GUID-D1713635-9577-40B7-8BC8-A6C9321883AE" class="sect3"><span class="enumeration_section">29.1</span> DBMS_AUTO_INDEX概述</h3>
               <p><code class="codeph">DBMS_AUTO_INDEX</code>包是用于在Oracle数据库中配置自动索引和生成自动索引操作报告的接口。
               </p>
            </div>
            <div class="props_rev_3"><a id="GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640" name="GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640"></a><h3 id="ARPLS-GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640" class="sect3"><span class="enumeration_section">29.2</span> DBMS_AUTO_INDEX子程序摘要</h3>
               <div>
                  <p>此表列出了<code class="codeph">DBMS_AUTO_INDEX</code>程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640__DBMS_AUTO_INDEXPACKAGESUBPROGRAMS-C29E99FF">
                     <p class="titleintable">表29-1 DBMS_AUTO_INDEX包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_AUTO_INDEX包子程序" width="100%" border="1" summary="This table lists the DBMS_AUTO_INDEX package subprograms in the alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="41%" id="d153970e294">程序</th>
                              <th align="left" valign="bottom" width="59%" id="d153970e297">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d153970e302" headers="d153970e294 ">
                                 <p><a href="DBMS_AUTO_INDEX.html#GUID-93A19936-453A-4C62-8DFB-FB52AC70C838" title="此过程配置与自动索引相关的设置。">配置程序</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d153970e302 d153970e297 ">
                                 <p>配置与自动索引相关的设置。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d153970e313" headers="d153970e294 ">
                                 <p><a href="DBMS_AUTO_INDEX.html#GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9" title="此过程从架构或表中删除除用于约束的索引之外的所有索引。">DROP_SECONDARY_INDEXES过程</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d153970e313 d153970e297 ">
                                 <p>从架构或表中删除除用于约束的索引之外的所有索引。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d153970e324" headers="d153970e294 ">
                                 <p><a href="DBMS_AUTO_INDEX.html#GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5" title="此函数返回在数据库中的特定时间段内执行的自动索引操作的报告。">REPORT_ACTIVITY函数</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d153970e324 d153970e297 ">
                                 <p>返回在数据库中的特定时间段内执行的自动索引操作的报告。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d153970e335" headers="d153970e294 ">
                                 <p><a href="DBMS_AUTO_INDEX.html#GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D" title="此函数返回在数据库中执行的上一次自动索引操作的报告。">REPORT_LAST_ACTIVITY函数</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d153970e335 d153970e297 ">
                                 <p>返回在数据库中执行的上一次自动索引操作的报告。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div class="sect3"><a id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838" name="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838"></a><h4 id="ARPLS-GUID-93A19936-453A-4C62-8DFB-FB52AC70C838" class="sect4"><span class="enumeration_section">29.2.1</span>配置程序</h4>
                  <div>
                     <p>此过程配置与自动索引相关的设置。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__SYNTAX-1EFA3383">句法</p><pre class="pre codeblock"><code>DBMS_AUTO_INDEX.CONFIGURE（parameter_name IN VARCHAR2，parameter_value IN VARCHAR2，允许IN BOOLEAN DEFAULT TRUE）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__PARAMETERS-1EFA38D3">参数</p>
                        <div class="tblformal" id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__GUID-CADA479D-EF68-48D7-81BC-7AF4935A2533">
                           <p class="titleintable">表29-2配置过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="配置过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_INDEX.CONFIGURE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d153970e453">参数</th>
                                    <th align="left" valign="bottom" id="d153970e456">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e461" headers="d153970e453 ">
                                       <p><code class="codeph">PARAMETER_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e461 d153970e456 ">
                                       <p>自动索引配置设置。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_MODE</code> ：自动索引的操作模式。它可以具有以下值之一：</p>
                                             <ul id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__UL_LJL_MZQ_YFB" style="list-style-type:disc">
                                                <li>
                                                   <p><code class="codeph">IMPLEMENT</code> ：在此模式下，新的自动索引创建为<span class="italic">可见</span>索引，任何现有的<span class="italic">不可见</span>自动索引也设置为<span class="italic">可见</span>索引。在此模式下，可以在SQL语句中使用自动索引。
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">REPORT ONLY</code> ：在此模式下，新的自动索引创建为<span class="italic">不可见的</span>索引，不能在SQL语句中使用。
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">OFF</code> ：在此模式下，禁用自动索引功能，即不会创建新的自动索引并禁用现有的自动索引。
                                                   </p>
                                                </li>
                                             </ul>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_SCHEMA</code> ：要包含或排除使用自动索引的模式。它的值区分大小写，可以包含通配符。其行为由<code class="codeph">allow</code>参数控制。
                                             </p>
                                             <p>自动索引过程管理两个模式列表 - <span class="italic">包含列表</span>和<span class="italic">排除列表</span> 。包含列表包含可以使用自动索引的模式。排除列表包含无法使用自动索引的模式。最初，这两个列表都是空的，并且在为数据库启用自动索引时，数据库中的所有模式都可以使用自动索引。
                                             </p>
                                             <p>如果包含列表包含至少一个模式，则只有包含列表中列出的模式可以使用自动索引。</p>
                                             <p>如果包含列表为空且排除列表包含至少一个模式，则除排除列表中列出的模式外，所有模式都可以使用自动索引。</p>
                                             <p>如果列表（包含列表和排除列表）都包含至少一个模式，则除排除列表中列出的模式外，所有模式都可以使用自动索引。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_RETENTION_FOR_AUTO</code> ：未使用的自动索引在数据库中保留的天数，之后将被删除。默认值为373天。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_RETENTION_FOR_MANUAL</code> ：未使用的手动创建的索引（非自动索引）在数据库中保留的天数，之后将被删除。当它设置为<code class="codeph">NULL</code> ，自动索引过程不会删除手动创建的索引。默认值为<code class="codeph">NULL</code> 。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_REPORT_RETENTION</code> ：自动索引日志在删除之前在数据库中保留的天数。由于基于这些日志生成自动索引报告，因此无法在超出为<code class="codeph">AUTO_INDEX_REPORT_RETENTION</code>指定的值的时间段内生成自动索引报告。默认值为31天。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_DEFAULT_TABLESPACE</code> ：用于存储自动索引的表空间。默认值为<code class="codeph">NULL</code> ，这意味着在数据库创建期间指定的默认永久表空间用于存储自动索引。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_SPACE_BUDGET</code> ：用于自动索引的表空间大小的百分比。仅当在数据库创建期间指定的默认表空间用于存储自动索引时，才能使用此配置设置。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e562" headers="d153970e453 ">
                                       <p><code class="codeph">PARAMETER_VALUE</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e562 d153970e456 ">
                                       <p><code class="codeph">parameter_name</code>指定的配置设置的值。
                                       </p>
                                       <p>如果将其设置为<code class="codeph">NULL</code> ，则会为配置设置指定默认值。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e578" headers="d153970e453 ">
                                       <p><code class="codeph">允许</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e578 d153970e456 ">
                                       <p>此参数仅适用于<code class="codeph">AUTO_INDEX_SCHEMA</code>配置设置，它可以具有以下值之一：</p>
                                       <ul id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__UL_V1N_FXT_CGB" style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">TRUE</code> ：将指定的架构添加到包含列表。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">FALSE</code> ：将指定的架构添加到排除列表中。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NULL</code> ：从当前添加的列表中删除指定的架构。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>有关包含列表和排除列表的详细信息，请参阅<code class="codeph">AUTO_INDEX_SCHEMA</code>配置设置的说明。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__GUID-0DC78826-9979-4C15-ACAB-BAE034BB7C82">例子</p>
                        <p>这些示例基于包含列表和排除列表最初为空的假设。</p>
                        <p>以下示例将<code class="codeph">SH</code>和<code class="codeph">HR</code>模式添加到排除列表中，以便只有<code class="codeph">SH</code>和<code class="codeph">HR</code>模式不能使用自动索引。
                        </p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_SCHEMA'，parameter_value =&gt;'SH'，allow =&gt; FALSE）; dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_SCHEMA'，parameter_value =&gt;'HR'，allow =&gt; FALSE）;结束;</pre><p>以下示例从排除列表中删除<code class="codeph">HR</code>模式，以便它也可以使用自动索引。现在，只有<code class="codeph">SH</code>模式不能使用自动索引，因为它是添加到排除列表的唯一模式。
                        </p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_SCHEMA'，parameter_value =&gt;'HR'，allow =&gt; NULL）;结束;</pre><p>以下示例从排除列表中删除所有模式，以便所有模式都可以使用自动索引。</p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_SCHEMA'，parameter_value =&gt; NULL，allow =&gt; TRUE）;结束;</pre><p>以下示例将<code class="codeph">HR</code>模式添加到包含列表，以便只有<code class="codeph">HR</code>模式可以使用自动索引。
                        </p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_SCHEMA'，parameter_value =&gt;'HR'，allow =&gt; TRUE）;结束;</pre><p>以下示例将自动索引的保留期设置为90天。</p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_RETENTION_FOR_AUTO'，parameter_value =&gt;'90'）;结束;</pre><p>以下示例将自动索引的保留期设置为默认值373天。</p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_RETENTION_FOR_AUTO'，parameter_value =&gt; NULL）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9" name="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9"></a><h4 id="ARPLS-GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9" class="sect4"><span class="enumeration_section">29.2.2</span> DROP_SECONDARY_INDEXES过程</h4>
                  <div>
                     <p>此过程从架构或表中删除除用于约束的索引之外的所有索引。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9__SYNTAX-1EFA3383">句法</p><pre class="pre codeblock"><code>DBMS_AUTO_INDEX.DROP_SECONDARY_INDEXES（ownname IN VARCHAR2 DEFAULT NULL，tabname IN VARCHAR2 DEFAULT NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9__PARAMETERS-1EFA38D3">参数</p>
                        <div class="tblformal" id="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9__GUID-4C155119-2976-4999-98B0-33EF1D5BA3EB">
                           <p class="titleintable">表29-3 DROP_SECONDARY_INDEXES过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_SECONDARY_INDEXES过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_INDEX.DROP_SECONDARY_INDEXES subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d153970e772">参数</th>
                                    <th align="left" valign="bottom" id="d153970e775">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e780" headers="d153970e772 ">
                                       <p><code class="codeph">ownname</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e780 d153970e775 ">
                                       <p>（可选）需要删除所有索引的模式的名称。</p>
                                       <p><span class="bold">注意：</span>不会删除用于约束的索引。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e792" headers="d153970e772 ">
                                       <p><code class="codeph">TABNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e792 d153970e775 ">
                                       <p>（可选）需要删除所有索引的表的名称。</p>
                                       <p><span class="bold">注意：</span>不会删除用于约束的索引。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9__GUID-0DC78826-9979-4C15-ACAB-BAE034BB7C82">例子</p>
                        <p>以下示例从<code class="codeph">SH</code>模式中删除除用于约束的索引之外的所有索引。
                        </p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.drop_secondary_indexes（'SH'）;结束;</pre><p>以下示例从<code class="codeph">HR</code>模式中的<code class="codeph">EMP</code>表中删除除用于约束的索引之外的所有索引。
                        </p><pre class="oac_no_warn" dir="ltr">开始dbms_auto_index.drop_secondary_indexes（'HR'，'EMP'）;结束;</pre><p>以下示例删除除用于约束的索引之外的所有索引，其中用户具有数据库中所有模式的删除权限。</p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.drop_secondary_indexes;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5" name="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5"></a><h4 id="ARPLS-GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5" class="sect4"><span class="enumeration_section">29.2.3</span> REPORT_ACTIVITY功能</h4>
                  <div>
                     <p>此函数返回在数据库中的特定时间段内执行的自动索引操作的报告。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5__SYNTAX-1EFA3383">句法</p><pre class="pre codeblock"><code>DBMS_AUTO_INDEX.REPORT_ACTIVITY（在TIMESTAMP中具有TIME ZONE DEFAULT SYSTIMESTAMP的activity_start  -  1，带有TIME ZONE DEFAULT SYSTIMESTAMP的TIMESTAMP中的activity_end，输入IN VARCHAR2 DEFAULT'TEXT'，IN VARCHAR2 DEFAULT'ALL'部分，级别IN VARCHAR2 DEFAULT'TYPICAL'）RETURN CLOB ;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5__PARAMETERS-1EFA38D3">参数</p>
                        <div class="tblformal" id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5__GUID-4C155119-2976-4999-98B0-33EF1D5BA3EB">
                           <p class="titleintable">表29-4 REPORT_ACTIVITY函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_ACTIVITY函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_INDEX.REPORT_ACTIVITY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d153970e935">参数</th>
                                    <th align="left" valign="bottom" id="d153970e938">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e943" headers="d153970e935 ">
                                       <p><code class="codeph">开始时间</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e943 d153970e938 ">
                                       <p>从报告中考虑执行的自动索引操作的时间。如果指定了<code class="codeph">NULL</code> ，则会考虑上次执行的自动索引操作。如果没有为此参数指定值，则在开始时间考虑当前时间减去一天（24小时）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e954" headers="d153970e935 ">
                                       <p><code class="codeph">时间结束</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e954 d153970e938 ">
                                       <p>为报告考虑执行的自动索引操作的时间。如果未指定任何值，则将当前时间视为结束时间。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e962" headers="d153970e935 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e962 d153970e938 ">
                                       <p>报告格式。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">文本</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">HTML</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">XML</code></p>
                                          </li>
                                       </ul>
                                       <p>默认值为<code class="codeph">TEXT</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e988" headers="d153970e935 ">
                                       <p><code class="codeph">部分</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e988 d153970e938 ">
                                       <p>要包含在报告中的部分。它可以包含以下值的组合：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SUMMARY</code> ：仅包括报告中的摘要详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">INDEX_DETAILS</code> ：仅包括报表中的自动索引详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">VERIFICATION_DETAILS</code> ：仅包括报告中的自动索引验证详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ERRORS</code> ：仅包括报告中的错误详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：在报告中包括所有部分（摘要详细信息，自动索引详细信息，自动索引验证详细信息和错误详细信息）。这是默认值。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>可以使用<code class="codeph">+</code>或<code class="codeph">-</code>运算符指定这些值的组合，如以下示例所示：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SUMMARY +INDEX_DETAILS +ERRORS</code> ：在报告中包括摘要详细信息，自动索引详细信息和错误详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL -ERRORS</code> ：包括报告中的所有部分，错误详细信息部分除外。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e1041" headers="d153970e935 ">
                                       <p><code class="codeph">水平</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e1041 d153970e938 ">
                                       <p>要包含在报告中的自动索引信息的级别。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：在报告中包含基本的自动索引信息。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：在报告中包含典型的自动索引信息。这是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：在报告中包含所有自动索引信息。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5__RETURNVALUE-1F18267A">回报价值</p>
                        <p>在数据库中指定时间段内执行的自动索引操作的报告。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5__GUID-0DC78826-9979-4C15-ACAB-BAE034BB7C82">例子</p>
                        <p>以下示例生成过去24小时内执行的自动索引操作的典型报告。报告以文本格式生成，包含所有部分（摘要详细信息，自动索引详细信息，自动索引验证详细信息和错误详细信息）。</p><pre class="oac_no_warn" dir="ltr">声明报告clob：= null;开始报告：= dbms_auto_index.report_activity（）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D" name="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D"></a><h4 id="ARPLS-GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D" class="sect4"><span class="enumeration_section">29.2.4</span> REPORT_LAST_ACTIVITY函数</h4>
                  <div>
                     <p>此函数返回在数据库中执行的上一次自动索引操作的报告。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D__SYNTAX-1EFA3383">句法</p><pre class="pre codeblock"><code>DBMS_AUTO_INDEX.REPORT_LAST_ACTIVITY（输入IN VARCHAR2 DEFAULT'TEXT'，IN VARCHAR2 DEFAULT'ALL'部分，级别IN VARCHAR2 DEFAULT'TYPICAL'）返回CLOB;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D__PARAMETERS-1EFA38D3">参数</p>
                        <div class="tblformal" id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D__GUID-4C155119-2976-4999-98B0-33EF1D5BA3EB">
                           <p class="titleintable">表29-5 REPORT_LAST_ACTIVITY函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_LAST_ACTIVITY函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_INDEX.REPORT_LAST_ACTIVITY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d153970e1184">参数</th>
                                    <th align="left" valign="bottom" id="d153970e1187">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e1192" headers="d153970e1184 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e1192 d153970e1187 ">
                                       <p>报告格式。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">文本</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">HTML</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">XML</code></p>
                                          </li>
                                       </ul>
                                       <p>默认值为<code class="codeph">TEXT</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e1218" headers="d153970e1184 ">
                                       <p><code class="codeph">部分</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e1218 d153970e1187 ">
                                       <p>要包含在报告中的部分。它可以包含以下值的组合：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SUMMARY</code> ：仅包括报告中的摘要详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">INDEX_DETAILS</code> ：仅包括报表中的自动索引详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">VERIFICATION_DETAILS</code> ：仅包括报告中的自动索引验证详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ERRORS</code> ：仅包括报告中的错误详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：在报告中包括所有部分（摘要详细信息，自动索引详细信息，自动索引验证详细信息和错误详细信息）。这是默认值。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>可以使用<code class="codeph">+</code>或<code class="codeph">-</code>运算符指定这些值的组合，如以下示例所示：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SUMMARY +INDEX_DETAILS +ERRORS</code> ：在报告中包括摘要详细信息，自动索引详细信息和错误详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL -ERRORS</code> ：包括报告中的所有部分，错误详细信息部分除外。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e1271" headers="d153970e1184 ">
                                       <p><code class="codeph">水平</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e1271 d153970e1187 ">
                                       <p>要包含在报告中的自动索引信息的级别。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：在报告中包含基本的自动索引信息。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：在报告中包含典型的自动索引信息。这是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：在报告中包含所有自动索引信息。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D__RETURNVALUE-1F18267A">回报价值</p>
                        <p>在数据库中执行的最后一次自动索引操作的报告。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D__GUID-0DC78826-9979-4C15-ACAB-BAE034BB7C82">例子</p>
                        <p>以下示例生成在数据库中执行的上一次自动索引操作的典型报告。报告以文本格式生成，包含所有部分（摘要详细信息，自动索引详细信息，自动索引验证详细信息和错误详细信息）。</p><pre class="oac_no_warn" dir="ltr">声明报告clob：= null;开始报告：= dbms_auto_index.report_last_activity（）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create and manage several types of schema objects with Oracle Database."></meta>
      <meta name="description" content="You can create and manage several types of schema objects with Oracle Database."></meta>
      <title>管理架构对象</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content="You can create and manage several types of schema objects with Oracle Database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="schema-objects.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-space-for-schema-objects.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="schema-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-space-for-schema-objects.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="schema-objects.html" property="item" typeof="WebPage"><span property="name">架构对象</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理架构对象</li>
            </ol>
            <a id="GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" name="GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B"></a><a id="ADMIN021"></a>
            
            <h2 id="ADMIN-GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" class="sect2"><span class="enumeration_chapter">18</span>管理架构对象</h2>
         </header>
         <div class="ind">
            <p>您可以使用Oracle数据库创建和管理多种类型的模式对象。</p>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-C71E5A48-F74A-4EF8-BD73-B1282FE3730E">在单个操作中创建多个表和视图</a><br>您可以使用<code class="codeph">CREATE SCHEMA</code>语句在一个操作中创建多个表和视图并授予权限。如果单个表，视图或授予失败，则回滚整个语句。没有创建任何对象，也没有授予权限。
                  </li>
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-4319DB4B-9D79-4AAB-91D5-B6DE81B4C2C9">分析表，索引和群集</a><br>您可以收集有关模式对象的统计信息，分析统计信息并验证模式对象。
                  </li>
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-14D4966B-997B-4C26-9AD8-89EDF7B26F53">截断表和群集</a><br>您可以删除表的所有行或一组聚簇表中的所有行，以便表（或群集）仍然存在，但是完全为空。例如，考虑一个包含月度数据的表，并且在每个月末，您必须在归档其数据后清空它（删除所有行）。
                  </li>
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-C43A872C-7BBE-455F-9D06-41A10A107FB6">启用和禁用触发器</a><br>数据库触发器是存储在数据库中并在发生特定条件时激活（“触发”）的过程，例如向表中添加行。
                  </li>
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA">管理完整性约束</a><br>完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在<code class="codeph">CREATE TABLE</code>或<code class="codeph">ALTER TABLE</code>语句中，并标识受约束影响的一列或多列，并标识约束的条件。
                  </li>
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-5AD7C0D3-BE26-4369-84F6-0C6DB5E0EBED">重命名架构对象</a><br>有几种方法可以重命名对象。
                  </li>
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-46D82F8E-C360-4223-B469-18039B1FFB21">管理对象依赖项</a><br>Oracle数据库提供了一种自动机制，可确保从属对象始终与其引用的对象保持同步。您也可以手动重新编译无效对象。
                  </li>
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498">管理对象名称解析</a><br>SQL语句中引用的对象名称可以由多个部分组成，以句点分隔。Oracle数据库执行特定操作来解析对象名称。
                  </li>
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-EF3A83FC-DAD6-4151-961D-628CD2B9D56D">切换到不同的架构</a><br>使用<code class="codeph">ALTER SESSION</code> SQL语句切换到其他模式。
                  </li>
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037">管理版本</a><br>使用基于版本的重新定义来升级其应用程序的应用程序开发人员可能会要求您执行需要DBA权限的与版本相关的任务。
                  </li>
                  <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-743F4E97-5D26-4877-BF4F-923ACECD8BEF">显示有关架构对象的信息</a><br>Oracle数据库提供了一个PL / SQL包，使您可以确定创建对象的DDL和可用于显示有关模式对象的信息的数据字典视图。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="schema-objects.html#GUID-2DA8C61C-58B0-4892-8E5D-E7A9120BC120" title="您可以在Oracle数据库中创建和管理架构对象。">模式对象</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN11523"></a><div class="props_rev_3"><a id="GUID-C71E5A48-F74A-4EF8-BD73-B1282FE3730E" name="GUID-C71E5A48-F74A-4EF8-BD73-B1282FE3730E"></a><h3 id="ADMIN-GUID-C71E5A48-F74A-4EF8-BD73-B1282FE3730E" class="sect3"><span class="enumeration_section">18.1</span>在单个操作中创建多个表和视图</h3>
               <div>
                  <p>您可以使用<code class="codeph">CREATE SCHEMA</code>语句在一个操作中创建多个表和视图并授予权限。如果单个表，视图或授予失败，则回滚整个语句。没有创建任何对象，也没有授予权限。
                  </p>
                  <div class="section">
                     <p></p>
                     <p>具体而言， <code class="codeph">CREATE SCHEMA</code>语句中<span class="italic">只能</span>包含<code class="codeph">CREATE TABLE</code> ， <code class="codeph">CREATE VIEW</code> ，和<code class="codeph">GRANT</code>语句。您必须具有发布包含语句所需的特权。您实际上并未创建模式，这是在使用<code class="codeph">CREATE USER</code>语句<code class="codeph">CREATE USER</code> 。相反，您正在填充架构。
                     </p>
                     <p>以下语句创建两个表和一个连接两个表中的数据的视图：</p><pre class="oac_no_warn" dir="ltr">CREATE SCHEMA AUTHORIZATION scott CREATE TABLE dept（deptno NUMBER（3,0）PRIMARY KEY，dname VARCHAR2（15），loc VARCHAR2（25））CREATE TABLE emp（empno NUMBER（5,0）PRIMARY KEY，ename VARCHAR2（15）NOT NULL，作业VARCHAR2（10），mgr NUMBER（5,0），hiredate DATE DEFAULT（sysdate），sal NUMBER（7,2），comm NUMBER（7,2），deptno NUMBER（3,0）NOT NULL CONSTRAINT dept_fkey参考文献dept）CREATE VIEW sales_staff AS SELECT empno，ename，sal，comm FROM emp WHERE deptno = 30 WITH CHECK OPTION CONSTRAINT sales_staff_cnst GRANT SELECT ON sales_staff TO human_resources;</pre><p><code class="codeph">CREATE SCHEMA</code>语句不支持ANSI <code class="codeph">CREATE TABLE</code>和<code class="codeph">CREATE VIEW</code>语句的Oracle数据库扩展，包括<code class="codeph">STORAGE</code>子句。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-C71E5A48-F74A-4EF8-BD73-B1282FE3730E__GUID-DC6FF6C2-012E-4B13-AC58-D0E0AD158E63">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">CREATE SCHEMA</code>语句的语法和其他信息，请<a href="../sqlrf/CREATE-SCHEMA.html#SQLRF01313" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-4319DB4B-9D79-4AAB-91D5-B6DE81B4C2C9" name="GUID-4319DB4B-9D79-4AAB-91D5-B6DE81B4C2C9"></a><h3 id="ADMIN-GUID-4319DB4B-9D79-4AAB-91D5-B6DE81B4C2C9" class="sect3"><span class="enumeration_section">18.2</span>分析表，索引和集群</h3>
               <p>您可以收集有关模式对象的统计信息，分析统计信息并验证模式对象。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-DB5A9A4E-054B-4ECF-8E97-C93DC9783675">关于分析表，索引和群集</a><br>您可以收集有关架构对象的信息并分析该信息。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-1F5331A0-176B-428E-B735-ED9D74C8B675">使用DBMS_STATS收集表和索引统计信息</a><br>您可以使用<code class="codeph">DBMS_STATS</code>包或<code class="codeph">ANALYZE</code>语句来收集有关表，索引或集群的物理存储特征的统计信息。这些统计信息存储在数据字典中，优化程序可以使用这些统计信息为访问分析对象的SQL语句选择最有效的执行计划。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-4D413507-A992-44B0-8366-867B78E0B6FF">验证表，索引，群集和物化视图</a><br>要验证表，索引，集群或物化视图的结构的完整性，请使用带有<code class="codeph">VALIDATE STRUCTURE</code>选项的<code class="codeph">ANALYZE</code>语句。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-F25B8EBF-670E-44C9-B399-3AE1D521D065">使用查询交叉验证表和索引</a><br>在某些情况下， <code class="codeph">ANALYZE</code>语句需要花费过多的时间才能完成。在这些情况下，您可以使用SQL查询来验证索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-AA49BB99-71E6-439C-BB0F-D4F0EAF63FB7">列出表和群集的链式行</a><br>您可以使用带有<code class="codeph">LIST CHAINED ROWS</code>子句的<code class="codeph">ANALYZE</code>语句查看表或集群的已链接和已迁移行。此语句的结果存储在显式创建的指定表中，以接受<code class="codeph">LIST CHAINED ROWS</code>子句返回的信息。这些结果可用于确定您是否有足够的空间来更新行。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11524"></a><div class="props_rev_3"><a id="GUID-DB5A9A4E-054B-4ECF-8E97-C93DC9783675" name="GUID-DB5A9A4E-054B-4ECF-8E97-C93DC9783675"></a><h4 id="ADMIN-GUID-DB5A9A4E-054B-4ECF-8E97-C93DC9783675" class="sect4"><span class="enumeration_section">18.2.1</span>关于分析表，索引和群集</h4>
                  <div>
                     <p>您可以收集有关架构对象的信息并分析该信息。</p>
                     <p>您将模式对象（表，索引或集群）分析为：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>收集并管理它的统计数据</p>
                        </li>
                        <li>
                           <p>验证其存储格式的有效性</p>
                        </li>
                        <li>
                           <p>标识表或集群的已迁移和链接的行</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-DB5A9A4E-054B-4ECF-8E97-C93DC9783675__GUID-B712E70E-D72A-47A7-869F-0604A27C7C56">
                        <p class="notep1">注意：</p>
                        <p>不要使用<code class="codeph">ANALYZE</code>的<code class="codeph">COMPUTE</code>和<code class="codeph">ESTIMATE</code>子句来收集优化程序统计信息。这些条款已被弃用。而是使用<code class="codeph">DBMS_STATS</code>包，它允许您并行收集统计信息，收集分区对象的全局统计信息，以及以其他方式微调统计信息收集。基于成本的优化器（取决于统计信息）最终将仅使用<code class="codeph">DBMS_STATS</code>收集的统计信息。有关<code class="codeph">DBMS_STATS</code>包的更多信息，请参见<a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                        </p>
                        <p>必须使用<code class="codeph">ANALYZE</code>语句（而不是<code class="codeph">DBMS_STATS</code> ）进行与基于开销的优化程序无关的统计信息收集，例如：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">VALIDATE</code>或<code class="codeph">LIST</code> <code class="codeph">CHAINED</code> <code class="codeph">ROWS</code>子句</p>
                           </li>
                           <li>
                              <p>收集freelist块的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-4319DB4B-9D79-4AAB-91D5-B6DE81B4C2C9" title="您可以收集有关模式对象的统计信息，分析统计信息并验证模式对象。">分析表，索引和群集</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11525"></a><div class="props_rev_3"><a id="GUID-1F5331A0-176B-428E-B735-ED9D74C8B675" name="GUID-1F5331A0-176B-428E-B735-ED9D74C8B675"></a><h4 id="ADMIN-GUID-1F5331A0-176B-428E-B735-ED9D74C8B675" class="sect4"><span class="enumeration_section">18.2.2</span>使用DBMS_STATS收集表和索引统计信息</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_STATS</code>包或<code class="codeph">ANALYZE</code>语句来收集有关表，索引或集群的物理存储特征的统计信息。这些统计信息存储在数据字典中，优化程序可以使用这些统计信息为访问分析对象的SQL语句选择最有效的执行计划。
                     </p>
                     <p>Oracle建议使用更通用的<code class="codeph">DBMS_STATS</code>包来收集优化程序统计信息，但必须使用<code class="codeph">ANALYZE</code>语句来收集与优化程序无关的统计信息，例如空块，平均空间等。
                     </p>
                     <p><code class="codeph">DBMS_STATS</code>包允许收集统计信息，包括利用并行执行和统计信息的外部操作。统计信息可以存储在数据字典之外的表中，可以在不影响优化程序的情况下对其进行操作。可以在数据库之间复制统计信息，也可以制作备份副本。
                     </p>
                     <p>以下<code class="codeph">DBMS_STATS</code>过程可以收集优化程序统计信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">GATHER_INDEX_STATS</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GATHER_TABLE_STATS</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GATHER_SCHEMA_STATS</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GATHER_DATABASE_STATS</code> 
                           </p>
                           <div class="infoboxnotealso" id="GUID-1F5331A0-176B-428E-B735-ED9D74C8B675__GUID-263F6A0B-02CA-433E-A315-BDF6E8360668">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关使用<code class="codeph">DBMS_STATS</code>收集优化程序统计信息的信息，请<code class="codeph">DBMS_STATS</code> <a href="../tgsql/gathering-optimizer-statistics.html#TGSQL389" target="_blank"><span class="italic">“Oracle数据库SQL调整指南”</span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> ，以获取<code class="codeph">DBMS_STATS</code>包的说明</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-4319DB4B-9D79-4AAB-91D5-B6DE81B4C2C9" title="您可以收集有关模式对象的统计信息，分析统计信息并验证模式对象。">分析表，索引和群集</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11526"></a><div class="props_rev_3"><a id="GUID-4D413507-A992-44B0-8366-867B78E0B6FF" name="GUID-4D413507-A992-44B0-8366-867B78E0B6FF"></a><h4 id="ADMIN-GUID-4D413507-A992-44B0-8366-867B78E0B6FF" class="sect4"><span class="enumeration_section">18.2.3</span>验证表，索引，集群和物化视图</h4>
                  <div>
                     <p>要验证表，索引，集群或物化视图的结构的完整性，请使用带有<code class="codeph">VALIDATE STRUCTURE</code>选项的<code class="codeph">ANALYZE</code>语句。
                     </p>
                     <div class="section">
                        <p>如果结构有效，则不返回任何错误。但是，如果结构已损坏，则会收到错误消息。</p>
                        <p>例如，在极少数情况下（例如硬件或其他系统故障），索引可能会损坏并且无法正确执行。验证索引时，可以确认索引中的每个条目都指向关联表的正确行。如果索引已损坏，则可以删除并重新创建它。</p>
                        <p>如果表，索引或集群已损坏，则将其删除并重新创建它。如果物化视图已损坏，则执行完全刷新并确保已解决问题。如果问题未得到纠正，请删除并重新创建物化视图。</p>
                        <p>以下语句分析<code class="codeph">emp</code>表：</p><pre class="oac_no_warn" dir="ltr">分析表emp验证结构;</pre><p>您可以通过包含<code class="codeph">CASCADE</code>选项来验证对象和所有依赖对象（例如，索引）。以下语句验证<code class="codeph">emp</code>表和所有关联的索引：</p><pre class="oac_no_warn" dir="ltr">分析表emp验证结构级联;</pre><p>默认情况下， <code class="codeph">CASCADE</code>选项执行完整验证。由于此操作可能是资源密集型的，因此可以使用<code class="codeph">FAST</code>子句执行更快的验证版本。此版本使用优化的检查算法检查是否存在损坏，但不报告有关损坏的详细信息。如果<code class="codeph">FAST</code>检查发现损坏，则可以使用<code class="codeph">CASCADE</code>选项而不使用<code class="codeph">FAST</code>子句来查找它。以下语句对<code class="codeph">emp</code>表和所有关联索引执行快速验证：</p><pre class="oac_no_warn" dir="ltr">分析表CE验证结构级联快速;</pre><p>如果快速验证花费了过多的时间，那么您可以选择使用SQL查询验证各个索引。请参阅<span class="q">“ <a href="managing-schema-objects.html#GUID-F25B8EBF-670E-44C9-B399-3AE1D521D065" title="在某些情况下，ANALYZE语句需要花费过多的时间才能完成。在这些情况下，您可以使用SQL查询来验证索引。">使用查询对表和索引进行交叉验证</a> ”</span> 。
                        </p>
                        <p>您可以指定要在对正在验证的对象进行DML时在线执行结构验证。验证不太全面，正在进行的DML会影响对象，但这可以通过在线执行<code class="codeph">ANALYZE</code>的灵活性来抵消。以下语句在线验证<code class="codeph">emp</code>表和所有关联的索引：</p><pre class="oac_no_warn" dir="ltr">分析表在线验证结构级联;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4D413507-A992-44B0-8366-867B78E0B6FF__GUID-F55B1E59-8D89-4881-98A2-D2325E0472F1">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">ANALYZE</code>语句的更多信息，请<a href="../sqlrf/ANALYZE.html#SQLRF01105" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-4319DB4B-9D79-4AAB-91D5-B6DE81B4C2C9" title="您可以收集有关模式对象的统计信息，分析统计信息并验证模式对象。">分析表，索引和群集</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN14215"></a><div class="props_rev_3"><a id="GUID-F25B8EBF-670E-44C9-B399-3AE1D521D065" name="GUID-F25B8EBF-670E-44C9-B399-3AE1D521D065"></a><h4 id="ADMIN-GUID-F25B8EBF-670E-44C9-B399-3AE1D521D065" class="sect4"><span class="enumeration_section">18.2.4</span>使用查询交叉验证表和索引</h4>
                  <div>
                     <p>在某些情况下， <code class="codeph">ANALYZE</code>语句需要花费过多的时间才能完成。在这些情况下，您可以使用SQL查询来验证索引。
                     </p>
                     <div class="section">
                        <p>如果查询确定表和索引之间存在不一致，则可以使用<code class="codeph">ANALYZE</code>语句对索引进行全面分析。由于数据库中的大多数对象通常都没有损坏，因此您可以使用此快速查询来消除许多表作为损坏的候选者，并且仅对可能已损坏的表使用ANALYZE语句。
                        </p>
                        <p>要验证索引，请运行以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT / * + FULL（ALIAS）PARALLEL（ALIAS，DOP）* / SUM（ORA_HASH（ROWID））FROM <span class="italic">table_name</span> ALIAS WHERE ALIAS。 <span class="italic">index_column</span> IS NOT NULL MINUS SELECT / * + INDEX_FFS（ALIAS <span class="italic">index_name</span> ）PARALLEL_INDEX（ALIAS， <span class="italic">index_name</span> ，DOP）* / SUM（ORA_HASH（ROWID））FROM <span class="italic">table_name</span> ALIAS WHERE ALIAS。 <span class="italic">index_column</span> IS NOT NULL;</pre><p>运行查询时，请进行以下替换：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>输入<span class="italic">table_name</span>占位符的表名。
                              </p>
                           </li>
                           <li>
                              <p>输入<span class="italic">index_column</span>占位符的索引列。
                              </p>
                           </li>
                           <li>
                              <p>输入<span class="italic">index_name</span>占位符的索引名称。
                              </p>
                           </li>
                        </ul>
                        <p>如果查询返回任何行，则可能存在不一致，您可以使用<code class="codeph">ANALYZE</code>语句进行进一步诊断。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F25B8EBF-670E-44C9-B399-3AE1D521D065__GUID-4B953268-2498-478E-9A89-446931127DA0">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">ANALYZE</code>语句的更多信息，请<a href="../sqlrf/ANALYZE.html#SQLRF53672" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-4319DB4B-9D79-4AAB-91D5-B6DE81B4C2C9" title="您可以收集有关模式对象的统计信息，分析统计信息并验证模式对象。">分析表，索引和群集</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11527"></a><div class="props_rev_3"><a id="GUID-AA49BB99-71E6-439C-BB0F-D4F0EAF63FB7" name="GUID-AA49BB99-71E6-439C-BB0F-D4F0EAF63FB7"></a><h4 id="ADMIN-GUID-AA49BB99-71E6-439C-BB0F-D4F0EAF63FB7" class="sect4"><span class="enumeration_section">18.2.5</span>列出表和簇的链式行</h4>
                  <p>您可以使用带有<code class="codeph">LIST CHAINED ROWS</code>子句的<code class="codeph">ANALYZE</code>语句查看表或集群的已链接和已迁移行。此语句的结果存储在显式创建的指定表中，以接受<code class="codeph">LIST CHAINED ROWS</code>子句返回的信息。这些结果可用于确定您是否有足够的空间来更新行。
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-D836A2C1-1FB2-45E6-A1C2-8D91F3A6FAA7">创建CHAINED_ROWS表</a><br>创建表以接受<code class="codeph">ANALYZE...返回的数据<code class="codeph">ANALYZE...LIST</code> <code class="codeph">CHAINED</code> <code class="codeph">ROWS</code>语句，执行<code class="codeph">UTLCHAIN.SQL</code>或<code class="codeph">UTLCHN1.SQL</code>脚本。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-1660BF4E-DEC6-4F8B-81D9-0669996B73D8">消除表中的迁移或链接行</a><br>您可以使用<code class="codeph">CHAINED_ROWS</code>表中的信息来减少或消除现有表中的已迁移和链接的行。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-4319DB4B-9D79-4AAB-91D5-B6DE81B4C2C9" title="您可以收集有关模式对象的统计信息，分析统计信息并验证模式对象。">分析表，索引和群集</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11528"></a><div class="props_rev_3"><a id="GUID-D836A2C1-1FB2-45E6-A1C2-8D91F3A6FAA7" name="GUID-D836A2C1-1FB2-45E6-A1C2-8D91F3A6FAA7"></a><h5 id="ADMIN-GUID-D836A2C1-1FB2-45E6-A1C2-8D91F3A6FAA7" class="sect5"><span class="enumeration_section">18.2.5.1</span>创建CHAINED_ROWS表</h5>
                     <div>
                        <p>创建表以接受<code class="codeph">ANALYZE...返回的数据<code class="codeph">ANALYZE...LIST</code> <code class="codeph">CHAINED</code> <code class="codeph">ROWS</code>语句，执行<code class="codeph">UTLCHAIN.SQL</code>或<code class="codeph">UTLCHN1.SQL</code>脚本。
                        </p>
                        <div class="section">
                           <p>这些脚本由数据库提供。他们在提交脚本的用户的模式中创建一个名为<code class="codeph">CHAINED_ROWS</code>的表。
                           </p>
                           <div class="infoboxnote" id="GUID-D836A2C1-1FB2-45E6-A1C2-8D91F3A6FAA7__GUID-6FB584DC-CC7B-401E-A7A6-22E6ACB0E5AF">
                              <p class="notep1">注意：</p>
                              <p>您为执行创建<code class="codeph">CHAINED_ROWS</code>表而选择的脚本取决于数据库的兼容级别以及您正在分析的表的类型。有关更多信息，请参见<a href="../sqlrf/ANALYZE.html#SQLRF01105" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                              </p>
                           </div>
                           <p>创建<code class="codeph">CHAINED_ROWS</code>表后，在<code class="codeph">ANALYZE</code>语句的<code class="codeph">INTO</code>子句中指定它。例如，以下语句将包含有关<code class="codeph">emp_dept</code>集群中已链接行的信息的行插入到<code class="codeph">CHAINED_ROWS</code>表中：</p><pre class="oac_no_warn" dir="ltr">分析群集emp_dept列出链接到CHAINED_ROWS;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-D836A2C1-1FB2-45E6-A1C2-8D91F3A6FAA7__GUID-565D6153-598F-4C2A-96D0-049591D1F746">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">CHAINED_ROWS</code>表的说明，请<a href="../refrn/CHAINED_ROWS.html#REFRN29502" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-space-for-schema-objects.html#GUID-E9B57A45-2688-42B6-9782-D49702D51F24" title="要使用Segment Advisor，请检查Automatic Segment Advisor的结果，并可选择手动运行Segment Advisor。">使用Segment Advisor</a> ”</span>获取有关Segment Advisor如何报告具有多余行链接的表的信息。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-AA49BB99-71E6-439C-BB0F-D4F0EAF63FB7" title="您可以使用带有LIST CHAINED ROWS子句的ANALYZE语句查看表或集群的已链接和已迁移行。此语句的结果存储在显式创建的指定表中，以接受LIST CHAINED ROWS子句返回的信息。这些结果可用于确定您是否有足够的空间来更新行。">列出表和群集的链接行</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11529"></a><div class="props_rev_3"><a id="GUID-1660BF4E-DEC6-4F8B-81D9-0669996B73D8" name="GUID-1660BF4E-DEC6-4F8B-81D9-0669996B73D8"></a><h5 id="ADMIN-GUID-1660BF4E-DEC6-4F8B-81D9-0669996B73D8" class="sect5"><span class="enumeration_section">18.2.5.2</span>消除表中的迁移或链接行</h5>
                     <div>
                        <p>您可以使用<code class="codeph">CHAINED_ROWS</code>表中的信息来减少或消除现有表中的已迁移和链接的行。
                        </p>
                        <div class="section">
                           <p>使用以下过程：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>使用<code class="codeph">ANALYZE</code>语句收集有关已迁移和已链接行的信息。</span><div><pre class="oac_no_warn" dir="ltr">ANALYZE TABLE order_hist LIST CHAINED ROWS;</pre></div>
                           </li>
                           <li class="stepexpand"><span>查询输出表：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM CHAINED_ROWS WHERE TABLE_NAME ='ORDER_HIST'; OWNER_NAME TABLE_NAME CLUST ...HEAD_ROWID TIMESTAMP ---------- ---------- -----... ------------------  - ------- SCOTT ORDER_HIST ......AAAAluAAHAAAAA1AAA 04-MAR-96 SCOTT ORDER_HIST ......AAAAluAAHAAAAA1AAB 04-MAR-96 SCOTT ORDER_HIST ......AAAAluAAHAAAAA1AAC 04-MAR-96</pre><p>输出列出了迁移或链接的所有行。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如果输出表显示您有许多已迁移或已链接的行，则可以通过继续执行以下步骤来消除已迁移的行：</span></li>
                           <li class="stepexpand"><span>创建一个与现有表具有相同列的中间表，以保存已迁移和链接的行：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE int_order_hist AS SELECT * FROM order_hist WHERE ROWID IN（从CHAINED_ROWS中选择HEAD_ROWID WHERE TABLE_NAME ='ORDER_HIST'）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>从现有表中删除已迁移和已链接的行：</span><div><pre class="oac_no_warn" dir="ltr">DELETE FROM order_hist WHERE ROWID IN（从CHAINED_ROWS中选择HEAD_ROWID WHERE TABLE_NAME ='ORDER_HIST'）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>将中间表的行插入现有表中：</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO order_hist SELECT * FROM int_order_hist;</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除中间表：</span><div><pre class="oac_no_warn" dir="ltr">DROP TABLE int_order_history;</pre></div>
                           </li>
                           <li class="stepexpand"><span>从输出表中删除步骤1中收集的信息：</span><div><pre class="oac_no_warn" dir="ltr">DELETE FROM CHAINED_ROWS WHERE TABLE_NAME ='ORDER_HIST';</pre></div>
                           </li>
                           <li class="stepexpand"><span>再次使用<code class="codeph">ANALYZE</code>语句，并查询输出表。</span></li>
                        </ol>
                        <div class="section">
                           <p>出现在输出表中的任何行都是链接的。您只能通过增加数据块大小来消除链接的行。在所有情况下都可能无法避免链接。对于具有<code class="codeph">LONG</code>列或大<code class="codeph">CHAR</code>或<code class="codeph">VARCHAR2</code>列的表，链接通常是不可避免的。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-AA49BB99-71E6-439C-BB0F-D4F0EAF63FB7" title="您可以使用带有LIST CHAINED ROWS子句的ANALYZE语句查看表或集群的已链接和已迁移行。此语句的结果存储在显式创建的指定表中，以接受LIST CHAINED ROWS子句返回的信息。这些结果可用于确定您是否有足够的空间来更新行。">列出表和群集的链接行</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN11530"></a><div class="props_rev_3"><a id="GUID-14D4966B-997B-4C26-9AD8-89EDF7B26F53" name="GUID-14D4966B-997B-4C26-9AD8-89EDF7B26F53"></a><h3 id="ADMIN-GUID-14D4966B-997B-4C26-9AD8-89EDF7B26F53" class="sect3"><span class="enumeration_section">18.3</span>截断表和集群</h3>
               <p>您可以删除表的所有行或一组聚簇表中的所有行，以便表（或群集）仍然存在，但是完全为空。例如，考虑一个包含月度数据的表，并且在每个月末，您必须在归档其数据后清空它（删除所有行）。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-2B4076D5-AFF6-4338-8D00-6194EC629660">使用DELETE截断表</a><br>您可以使用<code class="codeph">DELETE</code> SQL语句<code class="codeph">DELETE</code>表的行。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-EE12ABAE-3656-4581-820E-6FB3F3D406A4">使用DROP和CREATE截断表</a><br>您可以删除表，然后重新创建表以截断它。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-B6D06F99-EA91-44B1-A6B3-4B07C8DF9C6D">使用TRUNCATE</a><br>您可以使用<code class="codeph">TRUNCATE</code>语句删除表的所有行。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11531"></a><div class="props_rev_3"><a id="GUID-2B4076D5-AFF6-4338-8D00-6194EC629660" name="GUID-2B4076D5-AFF6-4338-8D00-6194EC629660"></a><h4 id="ADMIN-GUID-2B4076D5-AFF6-4338-8D00-6194EC629660" class="sect4"><span class="enumeration_section">18.3.1</span>使用DELETE截断表</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DELETE</code> SQL语句<code class="codeph">DELETE</code>表的行。
                     </p>
                     <div class="section">
                        <p>例如，以下语句删除<code class="codeph">emp</code>表中的所有行：</p><pre class="oac_no_warn" dir="ltr">DELETE FROM emp;</pre><p>如果在使用<code class="codeph">DELETE</code>语句时表或集群中存在许多行，则在删除行时会消耗大量系统资源。例如，表中的CPU时间，重做日志空间和还原段空间以及任何关联的索引都需要资源。此外，删除每一行时，可以触发触发器。先前分配给结果空表或集群的空间仍与该对象相关联。使用<code class="codeph">DELETE</code>您可以选择要删除的行，而<code class="codeph">TRUNCATE</code>和<code class="codeph">DROP</code>会影响整个对象。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2B4076D5-AFF6-4338-8D00-6194EC629660__GUID-0EA5607E-B016-4DE7-9809-9A1B60C84D2D">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">DELETE</code>语句的语法和其他信息，请<a href="../sqlrf/DELETE.html#SQLRF01505" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-14D4966B-997B-4C26-9AD8-89EDF7B26F53" title="您可以删除表的所有行或一组聚簇表中的所有行，以便表（或群集）仍然存在，但是完全为空。例如，考虑一个包含月度数据的表，并且在每个月末，您必须在归档其数据后清空它（删除所有行）。">截断表和群集</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11532"></a><div class="props_rev_3"><a id="GUID-EE12ABAE-3656-4581-820E-6FB3F3D406A4" name="GUID-EE12ABAE-3656-4581-820E-6FB3F3D406A4"></a><h4 id="ADMIN-GUID-EE12ABAE-3656-4581-820E-6FB3F3D406A4" class="sect4"><span class="enumeration_section">18.3.2</span>使用DROP和CREATE截断表</h4>
                  <div>
                     <p>您可以删除表，然后重新创建表以截断它。</p>
                     <div class="section">
                        <p>例如，删除以下语句然后重新创建<code class="codeph">emp</code>表：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE emp; CREATE TABLE emp（...）;</pre><p>删除并重新创建表或集群时，还会删除所有关联的索引，完整性约束和触发器，并且所有依赖于删除的表或集群表的对象都将失效。此外，删除了删除的表或聚簇表的所有授权。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-14D4966B-997B-4C26-9AD8-89EDF7B26F53" title="您可以删除表的所有行或一组聚簇表中的所有行，以便表（或群集）仍然存在，但是完全为空。例如，考虑一个包含月度数据的表，并且在每个月末，您必须在归档其数据后清空它（删除所有行）。">截断表和群集</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11533"></a><div class="props_rev_3"><a id="GUID-B6D06F99-EA91-44B1-A6B3-4B07C8DF9C6D" name="GUID-B6D06F99-EA91-44B1-A6B3-4B07C8DF9C6D"></a><h4 id="ADMIN-GUID-B6D06F99-EA91-44B1-A6B3-4B07C8DF9C6D" class="sect4"><span class="enumeration_section">18.3.3</span>使用TRUNCATE</h4>
                  <div>
                     <p>您可以使用<code class="codeph">TRUNCATE</code>语句删除表的所有行。
                     </p>
                     <div class="section">
                        <p>例如，以下语句截断<code class="codeph">emp</code>表：</p><pre class="oac_no_warn" dir="ltr">TRUNCATE TABLE emp;</pre><p>使用<code class="codeph">TRUNCATE</code>语句提供了一种快速有效的方法，用于从表或集群中删除所有行。<code class="codeph">TRUNCATE</code>语句不会生成任何撤消信息，并且会立即提交。它是一个DDL语句，无法回滚。<code class="codeph">TRUNCATE</code>语句不会影响与被截断的表（约束和触发器）或授权相关联的任何结构。<code class="codeph">TRUNCATE</code>语句还指定在截断后当前为表分配的空间是否返回到包含表空间。
                        </p>
                        <p>您可以截断自己架构中的任何表或集群。具有<code class="codeph">DROP ANY TABLE</code>系统特权的任何用户都可以截断任何模式中的表或集群。
                        </p>
                        <p>在截断包含父键的表或聚簇表之前，必须禁用所有引用不同表中的外键。不必禁用自引用约束。</p>
                        <p>当<code class="codeph">TRUNCATE</code>语句从表中删除行时，不会触发与表关联的触发器。此外，如果启用了审计，则<code class="codeph">TRUNCATE</code>语句不会生成与<code class="codeph">DELETE</code>语句相对应的任何审计信息。而是为正在发出的<code class="codeph">TRUNCATE</code>语句生成单个审计记录。
                        </p>
                        <p>无法截断散列集群，也不能单独截断散列或索引集群中的表。截断索引集群会删除集群中所有表的所有行。如果必须从单个聚簇表中删除所有行，请使用<code class="codeph">DELETE</code>语句或删除并重新创建表。
                        </p>
                        <p><code class="codeph">TRUNCATE</code>语句有几个选项可控制在截断后是否将当前为表或集群分配的空间返回到包含的表空间。
                        </p>
                        <p>这些选项也适用于任何关联的索引。截断表或集群时，所有关联的索引也会被截断。由于截断，截断的表，集群或关联索引的存储参数不会更改。</p>
                        <p>这些<code class="codeph">TRUNCATE</code>选项是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DROP STORAGE</code>是默认选项，它将分配给结果表的区数减少到<code class="codeph">MINEXTENTS</code>的原始设置。然后释放的扩展区返回到系统，并可由其他对象使用。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DROP</code> <code class="codeph">ALL</code> <code class="codeph">STORAGE</code>丢弃该段。除了<code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code>语句之外， <code class="codeph">DROP</code> <code class="codeph">ALL</code> <code class="codeph">STORAGE</code>也适用于<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">TRUNCATE</code> <code class="codeph">(SUB)PARTITION</code>语句。此选项还会删除与要截断的分区关联的任何从属对象段。
                              </p>
                              <p>群集不支持<code class="codeph">DROP</code> <code class="codeph">ALL</code> <code class="codeph">STORAGE</code> 。
                              </p><pre class="oac_no_warn" dir="ltr">TRUNCATE TABLE emp DROP ALL STORAGE;</pre></li>
                           <li>
                              <p><code class="codeph">REUSE STORAGE</code>指定当前为表或集群分配的所有空间仍然分配给它。例如，以下语句会截断<code class="codeph">emp_dept</code>集群，以前为集群分配的所有扩展区都可用于后续插入和删除：</p><pre class="oac_no_warn" dir="ltr">TRUNCATE CLUSTER emp_dept REUSE STORAGE;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B6D06F99-EA91-44B1-A6B3-4B07C8DF9C6D__GUID-64A9DD50-E6DF-45DB-AA42-4070B8AAC6AF">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">TRUNCATE TABLE</code>语句的语法和其他信息，请<a href="../sqlrf/TRUNCATE-TABLE.html#SQLRF01707" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">TRUNCATE CLUSTER</code>语句的语法和其他信息，请<a href="../sqlrf/TRUNCATE-CLUSTER.html#SQLRF20029" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关审核的信息，请参见<a href="../dbseg/part_6.html#DBSEG006" target="_blank"><span class="italic">“Oracle数据库安全指南</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-14D4966B-997B-4C26-9AD8-89EDF7B26F53" title="您可以删除表的所有行或一组聚簇表中的所有行，以便表（或群集）仍然存在，但是完全为空。例如，考虑一个包含月度数据的表，并且在每个月末，您必须在归档其数据后清空它（删除所有行）。">截断表和群集</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-C43A872C-7BBE-455F-9D06-41A10A107FB6" name="GUID-C43A872C-7BBE-455F-9D06-41A10A107FB6"></a><h3 id="ADMIN-GUID-C43A872C-7BBE-455F-9D06-41A10A107FB6" class="sect3"><span class="enumeration_section">18.4</span>启用和禁用触发器</h3>
               <div>
                  <p>数据库触发器是存储在数据库中并在发生特定条件时激活（“触发”）的过程，例如向表中添加行。</p>
                  <p>您可以使用触发器来补充数据库的标准功能，以提供高度自定义的数据库管理系统。例如，您可以创建一个触发器来限制对表的DML操作，只允许在正常工作时间发出的语句。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-CC16D430-A0C0-4CE4-A8F1-9E3E46354519">关于启用和禁用触发器</a><br>如果发出触发语句并且触发限制（如果有）计算为true，则启用的触发器将执行其触发器主体。默认情况下，首次创建时会启用触发器。即使发出了触发语句且触发限制（如果有）的计算结果为true，禁用的触发器也不会执行其触发器主体。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-2B5335AD-903A-4CB4-9860-055208FEDC2E">启用触发器</a><br>使用带有<code class="codeph">ENABLE</code>选项的<code class="codeph">ALTER TRIGGER</code>语句启用禁用的触发器。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-BF54CB3A-AD90-42E1-9586-CED852F6CF04">禁用触发器</a><br>使用带有<code class="codeph">DISABLE</code>选项的<code class="codeph">ALTER TRIGGER</code>语句禁用触发器。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11534"></a><div class="props_rev_3"><a id="GUID-CC16D430-A0C0-4CE4-A8F1-9E3E46354519" name="GUID-CC16D430-A0C0-4CE4-A8F1-9E3E46354519"></a><h4 id="ADMIN-GUID-CC16D430-A0C0-4CE4-A8F1-9E3E46354519" class="sect4"><span class="enumeration_section">18.4.1</span>关于启用和禁用触发器</h4>
                  <div>
                     <p>如果发出触发语句并且触发限制（如果有）计算为true，则启用的触发器将执行其触发器主体。默认情况下，首次创建时会启用触发器。即使发出了触发语句且触发限制（如果有）的计算结果为true，禁用的触发器也不会执行其触发器主体。</p>
                     <p>数据库触发器可以与表，模式或数据库相关联。他们在以下情况下被隐式解雇：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>针对关联表执行DML语句（ <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code> ）</p>
                        </li>
                        <li>
                           <p>在数据库或模式中的对象上执行某些DDL语句（例如： <code class="codeph">ALTER</code> ， <code class="codeph">CREATE</code> ， <code class="codeph">DROP</code> ）</p>
                        </li>
                        <li>
                           <p>发生指定的数据库事件（例如： <code class="codeph">STARTUP</code> ， <code class="codeph">SHUTDOWN</code> ， <code class="codeph">SERVERERROR</code> ）</p>
                        </li>
                     </ul>
                     <p>这不是一个完整的列表。有关导致触发器触发的语句和数据库事件的完整列表，请参阅<a href="../sqlrf/CREATE-TRIGGER.html#SQLRF01405" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                     </p>
                     <p>使用<code class="codeph">CREATE TRIGGER</code>语句创建触发器。它们可以被定义为在触发事件<code class="codeph">BEFORE</code>或<code class="codeph">AFTER</code>触发，或者<code class="codeph">INSTEAD OF</code>它。下面的语句创建一个触发器<code class="codeph">scott.emp_permit_changes</code>上表<code class="codeph">scott.emp</code> 。触发器在执行任何指定语句之前触发。
                     </p><pre class="oac_no_warn" dir="ltr">在scott.emp上删除或插入或更新之前创建TRIGGER scott.emp_permit_changes。。。
<span class="italic">pl / sql块</span> 。。。
</pre><p>您可以稍后通过发出<code class="codeph">DROP TRIGGER</code>语句从数据库中<code class="codeph">DROP TRIGGER</code> 。
                     </p>
                     <p>要使用<code class="codeph">ALTER TABLE</code>语句启用或禁用触发器，您必须拥有该表，具有该表的<code class="codeph">ALTER</code>对象特权，或具有<code class="codeph">ALTER ANY TABLE</code>系统特权。要使用<code class="codeph">ALTER TRIGGER</code>语句启用或禁用单个触发器，您必须拥有触发器或具有<code class="codeph">ALTER ANY TRIGGER</code>系统特权。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CC16D430-A0C0-4CE4-A8F1-9E3E46354519__GUID-8F7D4E5F-3F2B-43C1-BB01-4C77FE31E7C4">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关触发器的更详细说明，请参见<a href="../cncpt/server-side-programming.html#CNCPT118" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">CREATE TRIGGER</code>语句语法的<a href="../sqlrf/CREATE-TRIGGER.html#SQLRF01405" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关创建和使用触发器的信息，请<a href="../lnpls/plsql-triggers.html#LNPLS020" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-C43A872C-7BBE-455F-9D06-41A10A107FB6" title="数据库触发器是存储在数据库中并激活的过程（" fire=")=" ="">启用和禁用触发器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11535"></a><div class="props_rev_3"><a id="GUID-2B5335AD-903A-4CB4-9860-055208FEDC2E" name="GUID-2B5335AD-903A-4CB4-9860-055208FEDC2E"></a><h4 id="ADMIN-GUID-2B5335AD-903A-4CB4-9860-055208FEDC2E" class="sect4"><span class="enumeration_section">18.4.2</span>启用触发器</h4>
                  <div>
                     <p>使用带有<code class="codeph">ENABLE</code>选项的<code class="codeph">ALTER TRIGGER</code>语句启用禁用的触发器。
                     </p>
                     <div class="section">
                        <p>要在<code class="codeph">inventory</code>表上启用名为<code class="codeph">reorder</code>的已禁用触发器，请输入以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER TRIGGER重新订购ENABLE;</pre><p>要启用为特定表定义的所有触发器，请使用带有<code class="codeph">ENABLE ALL TRIGGERS</code>选项的<code class="codeph">ALTER TABLE</code>语句。要启用为<code class="codeph">INVENTORY</code>表定义的所有触发器，请输入以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE库存使ENABLE ALL TRIGGERS;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2B5335AD-903A-4CB4-9860-055208FEDC2E__GUID-18A83407-D1E8-40B2-BB77-EB0E61C944D4">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">ALTER TRIGGER</code>语句的语法和其他信息，请<a href="../sqlrf/ALTER-TRIGGER.html#SQLRF01101" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-C43A872C-7BBE-455F-9D06-41A10A107FB6" title="数据库触发器是存储在数据库中并激活的过程（" fire=")=" ="">启用和禁用触发器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11536"></a><div class="props_rev_3"><a id="GUID-BF54CB3A-AD90-42E1-9586-CED852F6CF04" name="GUID-BF54CB3A-AD90-42E1-9586-CED852F6CF04"></a><h4 id="ADMIN-GUID-BF54CB3A-AD90-42E1-9586-CED852F6CF04" class="sect4"><span class="enumeration_section">18.4.3</span>禁用触发器</h4>
                  <div>
                     <p>使用带有<code class="codeph">DISABLE</code>选项的<code class="codeph">ALTER TRIGGER</code>语句禁用触发器。
                     </p>
                     <div class="section">
                        <p>如果满足下列条件之一，请考虑暂时禁用触发器：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>触发器引用的对象不可用。</p>
                           </li>
                           <li>
                              <p>您必须执行大量数据加载并希望它在不触发触发器的情况下快速继续。</p>
                           </li>
                           <li>
                              <p>您正在将数据加载到触发器适用的表中。</p>
                           </li>
                        </ul>
                        <p>要禁用<code class="codeph">inventory</code>表上的触发器<code class="codeph">reorder</code> ，请输入以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER TRIGGER重新排序DISABLE;</pre><p>您可以使用带有<code class="codeph">DISABLE ALL TRIGGERS</code>选项的<code class="codeph">ALTER TABLE</code>语句同时<code class="codeph">DISABLE ALL TRIGGERS</code>与表关联的所有触发器。例如，要禁用为<code class="codeph">inventory</code>表定义的所有触发器，请输入以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE库存禁用所有触发器;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-C43A872C-7BBE-455F-9D06-41A10A107FB6" title="数据库触发器是存储在数据库中并激活的过程（" fire=")=" ="">启用和禁用触发器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11537"></a><div class="props_rev_3"><a id="GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" name="GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA"></a><h3 id="ADMIN-GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" class="sect3"><span class="enumeration_section">18.5</span>管理完整性约束</h3>
               <div>
                  <p>完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在<code class="codeph">CREATE TABLE</code>或<code class="codeph">ALTER TABLE</code>语句中，并标识受约束影响的一列或多列，并标识约束的条件。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-70A229C3-B8A2-413C-9783-A7EDB7022665">诚信约束国</a><br>完整性约束强制执行业务规则并防止将无效信息输入表中。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-F504F7C9-D201-4B32-A25C-17650FE49002">在定义时设置完整性约束</a><br>在<code class="codeph">CREATE TABLE</code>或<code class="codeph">ALTER TABLE</code>语句中定义完整性约束时，可以根据您的<code class="codeph">ENABLE</code> / <code class="codeph">DISABLE</code>子句规范确定启用，禁用，验证或不验证它。如果未在约束定义中指定<code class="codeph">ENABLE</code> / <code class="codeph">DISABLE</code>子句，则数据库会自动启用并验证约束。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-90ACCD15-C65D-4595-9887-CC7588824E71">修改，重命名或删除现有的完整性约束</a><br>您可以使用<code class="codeph">ALTER TABLE</code>语句来启用，禁用，修改或删除约束。当数据库使用<code class="codeph">UNIQUE</code>或<code class="codeph">PRIMARY KEY</code>索引来强制执行约束，并且删除或禁用与该索引关联的约束时，将删除索引，除非您另行指定。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-FC924C05-E241-4FDA-9D80-D094F95CB6BD">推迟约束检查</a><br>当数据库检查约束时，如果不满足约束，则它会发出错误信号。您可以推迟检查约束的有效性，直到事务结束。当您发出<code class="codeph">SET CONSTRAINTS</code>语句时， <code class="codeph">SET CONSTRAINTS</code>模式将持续到事务的持续时间，或者直到另一个<code class="codeph">SET CONSTRAINTS</code>语句重置该模式。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-1DBBC985-4943-4C75-BFAD-6DECC340088C">报告约束异常</a><br>如果在验证约束时存在异常，则返回错误并且完整性约束保持不生效。如果由于存在完整性约束异常而未成功执行语句，则会回滚该语句。如果存在异常，则在更新或删除约束的所有异常之前，您无法验证约束。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-328CBDDA-98F9-41A5-8698-A492E177D8DA">查看约束信息</a><br>Oracle数据库提供了一组视图，使您可以查看表上的约束定义并标识在约束中指定的列。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA__GUID-D7285C1C-900B-46B9-89BB-91CD82D985DB">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../cncpt/data-integrity.html#CNCPT021" target="_blank"><span class="italic">Oracle Database Concepts</span></a>可以更全面地讨论完整性约束</p>
                        </li>
                        <li>
                           <p><a href="../adfns/data-integrity.html#ADFNS004" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> ，了解在应用程序中使用完整性约束的详细信息和示例</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-70A229C3-B8A2-413C-9783-A7EDB7022665" name="GUID-70A229C3-B8A2-413C-9783-A7EDB7022665"></a><h4 id="ADMIN-GUID-70A229C3-B8A2-413C-9783-A7EDB7022665" class="sect4"><span class="enumeration_section">18.5.1</span>完整性约束状态</h4>
                  <p>完整性约束强制执行业务规则并防止将无效信息输入表中。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-BF457CD9-DD31-4673-BDDB-F7965A8C04E0">关于诚信约束国</a><br>您可以指定启用约束（ <code class="codeph">ENABLE</code> ）或禁用约束（ <code class="codeph">DISABLE</code> ）。如果启用了约束，则在数据库中输入或更新数据时会检查数据，并且不会输入不符合约束的数据。如果禁用约束，则可以允许不符合的数据进入数据库。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-3099DAE4-399D-4701-8A9A-AA947CCDE94C">关于禁用约束</a><br>要强制执行完整性约束定义的规则，应始终启用约束，但您可以考虑在某些情况下禁用它们。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-084A3732-98C4-46D6-9676-FCACF48C1785">关于启用约束</a><br>启用约束时，不会将违反约束的行插入表中。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-085CDFF3-301B-4769-826D-8931E16FAA7B">关于启用Novalidate约束状态</a><br>当约束处于启用无效状态时，将检查所有后续语句是否符合约束。但是，不检查表中的任何现有数据。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-E367A78E-8FA7-49A7-B848-462EF3F1096C">有效使用完整性约束：程序</a><br>以特定顺序使用完整性约束状态非常重要。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" title="完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在CREATE TABLE或ALTER TABLE语句中，并标识受约束影响的一列或多列，并标识约束的条件。">管理完整性约束</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11538"></a><div class="props_rev_3"><a id="GUID-BF457CD9-DD31-4673-BDDB-F7965A8C04E0" name="GUID-BF457CD9-DD31-4673-BDDB-F7965A8C04E0"></a><h5 id="ADMIN-GUID-BF457CD9-DD31-4673-BDDB-F7965A8C04E0" class="sect5"><span class="enumeration_section">18.5.1.1</span>关于完整性约束状态</h5>
                     <div>
                        <p>您可以指定启用约束（ <code class="codeph">ENABLE</code> ）或禁用约束（ <code class="codeph">DISABLE</code> ）。如果启用了约束，则在数据库中输入或更新数据时会检查数据，并且不会输入不符合约束的数据。如果禁用约束，则可以允许不符合的数据进入数据库。
                        </p>
                        <p>此外，您可以指定表中的现有数据必须符合约束（ <code class="codeph">VALIDATE</code> ）。相反，如果指定<code class="codeph">NOVALIDATE</code> ，则无法确保现有数据符合要求。
                        </p>
                        <p>在表上定义的完整性约束可以处于以下状态之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ENABLE</code> ， <code class="codeph">VALIDATE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ENABLE</code> ， <code class="codeph">NOVALIDATE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DISABLE</code> ， <code class="codeph">VALIDATE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DISABLE</code> ， <code class="codeph">NOVALIDATE</code></p>
                           </li>
                        </ul>
                        <p>有关这些状态的含义以及对其后果的理解的详细信息，请参阅<a href="../sqlrf/constraint.html#SQLRF52214" target="_blank"><span class="italic">Oracle数据库SQL语言参考。</span></a>这里讨论了其中一些后果。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-70A229C3-B8A2-413C-9783-A7EDB7022665" title="完整性约束强制执行业务规则并防止将无效信息输入表中。">完整性约束状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11539"></a><div class="props_rev_3"><a id="GUID-3099DAE4-399D-4701-8A9A-AA947CCDE94C" name="GUID-3099DAE4-399D-4701-8A9A-AA947CCDE94C"></a><h5 id="ADMIN-GUID-3099DAE4-399D-4701-8A9A-AA947CCDE94C" class="sect5"><span class="enumeration_section">18.5.1.2</span>关于禁用约束</h5>
                     <div>
                        <p>要强制执行完整性约束定义的规则，应始终启用约束，但您可以考虑在某些情况下禁用它们。</p>
                        <p>但是，请考虑暂时禁用表的完整性约束，原因如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将大量数据加载到表中时</p>
                           </li>
                           <li>
                              <p>执行对表进行大量更改的批处理操作时（例如，通过向现有编号添加1000来更改每个员工的编号）</p>
                           </li>
                           <li>
                              <p>一次导入或导出一个表时</p>
                           </li>
                        </ul>
                        <p>在所有这三种情况下，暂时禁用完整性约束可以提高操作性能，尤其是在数据仓库配置中。</p>
                        <p>在禁用该约束时，可以输入违反约束的数据。因此，在完成前面的项目符号列表中列出的任何操作后，应始终启用约束。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-70A229C3-B8A2-413C-9783-A7EDB7022665" title="完整性约束强制执行业务规则并防止将无效信息输入表中。">完整性约束状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11540"></a><div class="props_rev_3"><a id="GUID-084A3732-98C4-46D6-9676-FCACF48C1785" name="GUID-084A3732-98C4-46D6-9676-FCACF48C1785"></a><h5 id="ADMIN-GUID-084A3732-98C4-46D6-9676-FCACF48C1785" class="sect5"><span class="enumeration_section">18.5.1.3</span>关于启用约束</h5>
                     <div>
                        <p>启用约束时，不会将违反约束的行插入表中。</p>
                        <p>但是，当禁用约束时，可以插入这样的行。此行称为约束的例外。如果约束处于启用未经验证状态，则在禁用约束时输入的数据导致的违规仍然存在。必须更新或删除违反约束的行，以便将约束置于验证状态。</p>
                        <p>在尝试启用约束时，您可以识别特定完整性约束的例外。请参阅<span class="q">“ <a href="managing-schema-objects.html#GUID-1DBBC985-4943-4C75-BFAD-6DECC340088C" title="如果在验证约束时存在异常，则返回错误并且完整性约束保持不生效。如果由于存在完整性约束异常而未成功执行语句，则会回滚该语句。如果存在异常，则在更新或删除约束的所有异常之前，您无法验证约束。">报告约束异常</a> ”</span> 。违反约束的所有行都在<code class="codeph">EXCEPTIONS</code>表中记录，您可以检查该表。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-70A229C3-B8A2-413C-9783-A7EDB7022665" title="完整性约束强制执行业务规则并防止将无效信息输入表中。">完整性约束状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11541"></a><div class="props_rev_3"><a id="GUID-085CDFF3-301B-4769-826D-8931E16FAA7B" name="GUID-085CDFF3-301B-4769-826D-8931E16FAA7B"></a><h5 id="ADMIN-GUID-085CDFF3-301B-4769-826D-8931E16FAA7B" class="sect5"><span class="enumeration_section">18.5.1.4</span>关于启用Novalidate约束状态</h5>
                     <div>
                        <p>当约束处于启用无效状态时，将检查所有后续语句是否符合约束。但是，不检查表中的任何现有数据。</p>
                        <p>具有启用无效约束的表可能包含无效数据，但无法向其添加新的无效数据。在无效状态中启用约束在上载有效OLTP数据的数据仓库配置中最有用。</p>
                        <p>启用约束不需要验证。启用约束novalidate比启用和验证约束要快得多。此外，验证已启用的约束在验证期间不需要任何DML锁定（与验证先前禁用的约束不同）。执行保证在验证期间不会引入任何违规行为。因此，无需验证即可启用，可以减少通常与启用约束相关的停机时间。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-70A229C3-B8A2-413C-9783-A7EDB7022665" title="完整性约束强制执行业务规则并防止将无效信息输入表中。">完整性约束状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11542"></a><div class="props_rev_3"><a id="GUID-E367A78E-8FA7-49A7-B848-462EF3F1096C" name="GUID-E367A78E-8FA7-49A7-B848-462EF3F1096C"></a><h5 id="ADMIN-GUID-E367A78E-8FA7-49A7-B848-462EF3F1096C" class="sect5"><span class="enumeration_section">18.5.1.5</span>有效使用完整性约束：程序</h5>
                     <div>
                        <p>以特定顺序使用完整性约束状态非常重要。</p>
                        <div class="section">
                           <p>按以下顺序使用完整性约束状态可确保获得最佳效益：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>禁用状态。</span></li>
                           <li><span>执行操作（加载，导出，导入）。</span></li>
                           <li><span>启用无效状态。</span></li>
                           <li><span>启用状态。</span></li>
                        </ol>
                        <div class="section">
                           <p>按此顺序使用约束的一些好处是：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>没有锁。</p>
                              </li>
                              <li>
                                 <p>所有约束都可以同时启用状态。</p>
                              </li>
                              <li>
                                 <p>约束启用是并行完成的。</p>
                              </li>
                              <li>
                                 <p>允许在表上进行并发活动。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-70A229C3-B8A2-413C-9783-A7EDB7022665" title="完整性约束强制执行业务规则并防止将无效信息输入表中。">完整性约束状态</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN11543"></a><div class="props_rev_3"><a id="GUID-F504F7C9-D201-4B32-A25C-17650FE49002" name="GUID-F504F7C9-D201-4B32-A25C-17650FE49002"></a><h4 id="ADMIN-GUID-F504F7C9-D201-4B32-A25C-17650FE49002" class="sect4"><span class="enumeration_section">18.5.2</span>在定义时设置完整性约束</h4>
                  <p>在<code class="codeph">CREATE TABLE</code>或<code class="codeph">ALTER TABLE</code>语句中定义完整性约束时，可以根据您的<code class="codeph">ENABLE</code> / <code class="codeph">DISABLE</code>子句规范确定启用，禁用，验证或不验证它。如果未在约束定义中指定<code class="codeph">ENABLE</code> / <code class="codeph">DISABLE</code>子句，则数据库会自动启用并验证约束。
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-42E09A81-E031-4A37-923C-1AA5EE51E680">在定义时禁用约束</a><br>您可以在定义完整性约束时禁用它。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-62A3B6A4-3DCB-4C83-9EF9-1A305270D225">在定义时启用约束</a><br>您可以在定义完整性约束时启用它。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" title="完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在CREATE TABLE或ALTER TABLE语句中，并标识受约束影响的一列或多列，并标识约束的条件。">管理完整性约束</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11544"></a><div class="props_rev_3"><a id="GUID-42E09A81-E031-4A37-923C-1AA5EE51E680" name="GUID-42E09A81-E031-4A37-923C-1AA5EE51E680"></a><h5 id="ADMIN-GUID-42E09A81-E031-4A37-923C-1AA5EE51E680" class="sect5"><span class="enumeration_section">18.5.2.1</span>在定义时禁用约束</h5>
                     <div>
                        <p>您可以在定义完整性约束时禁用它。</p>
                        <div class="section">
                           <p>以下<code class="codeph">CREATE TABLE</code>和<code class="codeph">ALTER TABLE</code>语句都定义和禁用完整性约束：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE emp（empno NUMBER（5）PRIMARY KEY DISABLE，...; ALTER TABLE emp ADD PRIMARY KEY（empno）DISABLE;</pre><p>定义和禁用完整性约束的<code class="codeph">ALTER TABLE</code>语句永远不会失败，因为表中的行违反了完整性约束。允许约束的定义，因为它的规则未得到强制执行。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-F504F7C9-D201-4B32-A25C-17650FE49002" title="在CREATE TABLE或ALTER TABLE语句中定义完整性约束时，可以根据您的ENABLE / DISABLE子句规范确定启用，禁用，验证或不验证它。如果未在约束定义中指定ENABLE / DISABLE子句，则数据库会自动启用并验证约束。">在定义时设置完整性约束</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11545"></a><div class="props_rev_3"><a id="GUID-62A3B6A4-3DCB-4C83-9EF9-1A305270D225" name="GUID-62A3B6A4-3DCB-4C83-9EF9-1A305270D225"></a><h5 id="ADMIN-GUID-62A3B6A4-3DCB-4C83-9EF9-1A305270D225" class="sect5"><span class="enumeration_section">18.5.2.2</span>在定义时启用约束</h5>
                     <div>
                        <p>您可以在定义完整性约束时启用它。</p>
                        <div class="section">
                           <p>以下<code class="codeph">CREATE TABLE</code>和<code class="codeph">ALTER TABLE</code>语句都定义并启用完整性约束：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE emp（empno NUMBER（5）CONSTRAINT emp.pk PRIMARY KEY，...; ALTER TABLE emp ADD CONSTRAINT emp.pk PRIMARY KEY（empno）;</pre><p>定义和尝试启用完整性约束的<code class="codeph">ALTER TABLE</code>语句可能会失败，因为表的行违反了完整性约束。如果是这种情况，则回滚该语句，并且不存储和不启用约束定义。
                           </p>
                           <p>启用<code class="codeph">UNIQUE</code>或<code class="codeph">PRIMARY KEY</code>约束时，将创建关联的索引。
                           </p>
                           <div class="infoboxnote" id="GUID-62A3B6A4-3DCB-4C83-9EF9-1A305270D225__GUID-94176693-0702-4243-9A3C-85EDB264765E">
                              <p class="notep1">注意：</p>
                              <p>在<span class="q">“ <a href="managing-schema-objects.html#GUID-E367A78E-8FA7-49A7-B848-462EF3F1096C" title="It is important to use integrity constraint states in a particular order.">有效使用完整性约束：过程</a> ”中</span>描述了用于启用可以利用并行性<span class="q"><a href="managing-schema-objects.html#GUID-E367A78E-8FA7-49A7-B848-462EF3F1096C" title="以特定顺序使用完整性约束状态非常重要。">的约束的有效过程</a></span> 。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-62A3B6A4-3DCB-4C83-9EF9-1A305270D225__GUID-817236C9-F5A6-4297-B08E-30978AB16FA7">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="managing-indexes.html#GUID-8DC3DFF0-28C4-4873-91AD-DCBC0AEF8D1D" title="Oracle数据库通过在唯一键或主键上创建唯一索引，对表强制执行UNIQUE键或PRIMARY KEY完整性约束。">创建与约束相关的索引</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-F504F7C9-D201-4B32-A25C-17650FE49002" title="在CREATE TABLE或ALTER TABLE语句中定义完整性约束时，可以根据您的ENABLE / DISABLE子句规范确定启用，禁用，验证或不验证它。如果未在约束定义中指定ENABLE / DISABLE子句，则数据库会自动启用并验证约束。">在定义时设置完整性约束</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN11546"></a><div class="props_rev_3"><a id="GUID-90ACCD15-C65D-4595-9887-CC7588824E71" name="GUID-90ACCD15-C65D-4595-9887-CC7588824E71"></a><h4 id="ADMIN-GUID-90ACCD15-C65D-4595-9887-CC7588824E71" class="sect4"><span class="enumeration_section">18.5.3</span>修改，重命名或删除现有的完整性约束</h4>
                  <div>
                     <p>您可以使用<code class="codeph">ALTER TABLE</code>语句来启用，禁用，修改或删除约束。当数据库使用<code class="codeph">UNIQUE</code>或<code class="codeph">PRIMARY KEY</code>索引来强制执行约束，并且删除或禁用与该索引关联的约束时，将删除索引，除非您另行指定。
                     </p>
                     <p>启用外键引用<code class="codeph">PRIMARY</code>或<code class="codeph">UNIQUE</code>键时，不能禁用或删除<code class="codeph">PRIMARY</code>或<code class="codeph">UNIQUE</code>键约束或索引。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-378C9612-6B45-44F9-AD26-0040C32A73A8">禁用和启用约束</a><br>您可以禁用已启用的完整性约束并启用禁用的完整性约
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-E2BBB7F9-F200-4587-80E3-49CB7A06DB1C">重命名约束</a><br><code class="codeph">ALTER TABLE...RENAME CONSTRAINT</code>语句使您可以重命名表的任何当前存在的约束。新约束名称不得与用户的任何现有约束名称冲突。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-A80EC943-E866-4973-9305-5A1A657675A2">减少限制</a><br>如果强制执行的规则不再为真，或者不再需要约束，则可以删除完整性约束。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" title="完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在CREATE TABLE或ALTER TABLE语句中，并标识受约束影响的一列或多列，并标识约束的条件。">管理完整性约束</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11547"></a><div class="props_rev_3"><a id="GUID-378C9612-6B45-44F9-AD26-0040C32A73A8" name="GUID-378C9612-6B45-44F9-AD26-0040C32A73A8"></a><h5 id="ADMIN-GUID-378C9612-6B45-44F9-AD26-0040C32A73A8" class="sect5"><span class="enumeration_section">18.5.3.1</span>禁用和启用约束</h5>
                     <div>
                        <p>您可以禁用已启用的完整性约束并启用禁用的完整性约</p>
                        <div class="section">
                           <p>以下语句禁用完整性约束。第二个语句指定要保留关联的索引。</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept DISABLE CONSTRAINT dname_ukey; ALTER TABLE dept DISABLE PRIMARY KEY KEEP INDEX，DISABLE UNIQUE（dname，loc）KEEP INDEX;</pre><p>以下语句启用novalidate禁用完整性约束：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept ENABLE NOVALIDATE CONSTRAINT dname_ukey; ALTER TABLE dept ENABLE NOVALIDATE PRIMARY KEY，ENABLE NOVALIDATE UNIQUE（dname，loc）;</pre><p>以下语句启用或验证禁用的完整性约束：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept MODIFY CONSTRAINT dname_key VALIDATE; ALTER TABLE dept MODIFY PRIMARY KEY ENABLE NOVALIDATE;</pre><p>以下语句启用禁用完整性约束：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept ENABLE CONSTRAINT dname_ukey; ALTER TABLE dept ENABLE PRIMARY KEY，ENABLE UNIQUE（dname，loc）;</pre><p>要在一个步骤中禁用或删除<code class="codeph">UNIQUE</code>键或<code class="codeph">PRIMARY KEY</code>约束以及所有相关的<code class="codeph">FOREIGN KEY</code>约束，请使用<code class="codeph">DISABLE</code>或<code class="codeph">DROP</code>子句的<code class="codeph">CASCADE</code>选项。例如，以下语句禁用<code class="codeph">PRIMARY KEY</code>约束和依赖于它的任何<code class="codeph">FOREIGN KEY</code>约束：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept DISABLE PRIMARY KEY CASCADE;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-90ACCD15-C65D-4595-9887-CC7588824E71" title="您可以使用ALTER TABLE语句来启用，禁用，修改或删除约束。当数据库使用UNIQUE或PRIMARY KEY索引来强制执行约束，并且删除或禁用与该索引关联的约束时，将删除索引，除非您另行指定。">修改，重命名或删除现有完整性约束</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11548"></a><div class="props_rev_3"><a id="GUID-E2BBB7F9-F200-4587-80E3-49CB7A06DB1C" name="GUID-E2BBB7F9-F200-4587-80E3-49CB7A06DB1C"></a><h5 id="ADMIN-GUID-E2BBB7F9-F200-4587-80E3-49CB7A06DB1C" class="sect5"><span class="enumeration_section">18.5.3.2</span>重命名约束</h5>
                     <div>
                        <p><code class="codeph">ALTER TABLE...RENAME CONSTRAINT</code>语句使您可以重命名表的任何当前存在的约束。新约束名称不得与用户的任何现有约束名称冲突。
                        </p>
                        <div class="section">
                           <p>以下语句重命名table <code class="codeph">dept</code>的<code class="codeph">dname_ukey</code>约束：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept RENAME CONSTRAINT dname_ukey TO dname_unikey;</pre><p>重命名约束时，基表上的所有依赖项仍然有效。</p>
                           <p><code class="codeph">RENAME CONSTRAINT</code>子句提供了一种重命名系统生成的约束名称的方法。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-90ACCD15-C65D-4595-9887-CC7588824E71" title="您可以使用ALTER TABLE语句来启用，禁用，修改或删除约束。当数据库使用UNIQUE或PRIMARY KEY索引来强制执行约束，并且删除或禁用与该索引关联的约束时，将删除索引，除非您另行指定。">修改，重命名或删除现有完整性约束</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11549"></a><div class="props_rev_3"><a id="GUID-A80EC943-E866-4973-9305-5A1A657675A2" name="GUID-A80EC943-E866-4973-9305-5A1A657675A2"></a><h5 id="ADMIN-GUID-A80EC943-E866-4973-9305-5A1A657675A2" class="sect5"><span class="enumeration_section">18.5.3.3</span>删除约束</h5>
                     <div>
                        <p>如果强制执行的规则不再为真，或者不再需要约束，则可以删除完整性约束。</p>
                        <div class="section">
                           <p>您可以使用<code class="codeph">ALTER TABLE</code>语句删除约束，并使用以下子句之一：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">DROP</code> <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> 
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DROP</code> <code class="codeph">UNIQUE</code> 
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DROP</code> <code class="codeph">CONSTRAINT</code> 
                                 </p>
                              </li>
                           </ul>
                           <p>以下两个语句删除了完整性约束。第二个语句保持索引与<code class="codeph">PRIMARY KEY</code>约束关联：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept DROP UNIQUE（dname，loc）; ALTER TABLE emp DROP PRIMARY KEY KEEP INDEX DROP CONSTRAINT dept_fkey;</pre><p>如果<code class="codeph">FOREIGN KEY</code>引用<code class="codeph">UNIQUE</code>或<code class="codeph">PRIMARY KEY</code> ，则必须在<code class="codeph">DROP</code>语句中包含<code class="codeph">CASCADE CONSTRAINTS</code>子句，否则不能删除约束。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-90ACCD15-C65D-4595-9887-CC7588824E71" title="您可以使用ALTER TABLE语句来启用，禁用，修改或删除约束。当数据库使用UNIQUE或PRIMARY KEY索引来强制执行约束，并且删除或禁用与该索引关联的约束时，将删除索引，除非您另行指定。">修改，重命名或删除现有完整性约束</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN11550"></a><div class="props_rev_3"><a id="GUID-FC924C05-E241-4FDA-9D80-D094F95CB6BD" name="GUID-FC924C05-E241-4FDA-9D80-D094F95CB6BD"></a><h4 id="ADMIN-GUID-FC924C05-E241-4FDA-9D80-D094F95CB6BD" class="sect4"><span class="enumeration_section">18.5.4</span>推迟约束检查</h4>
                  <div>
                     <p>当数据库检查约束时，如果不满足约束，则它会发出错误信号。您可以推迟检查约束的有效性，直到事务结束。当您发出<code class="codeph">SET CONSTRAINTS</code>语句时， <code class="codeph">SET CONSTRAINTS</code>模式将持续到事务的持续时间，或者直到另一个<code class="codeph">SET CONSTRAINTS</code>语句重置该模式。
                     </p>
                     <div class="infoboxnote" id="GUID-FC924C05-E241-4FDA-9D80-D094F95CB6BD__GUID-64495736-DC0F-47B9-A6F4-4EC80D2E8ED0">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您不能在触发器内发出<code class="codeph">SET CONSTRAINT</code>语句。
                              </p>
                           </li>
                           <li>
                              <p>可延迟的唯一键和主键必须使用非唯一索引。</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-FDF6445E-D1E0-4305-B1D4-C5D4310CA1FB">设置所有约束延迟</a><br>如果必须延迟事务的约束，则必须在实际开始处理用于操作数据的应用程序中的任何数据之前设置延迟的所有约束。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-41981E1D-6F0D-4D94-A761-92DDB38BB81F">检查提交（可选）</a><br>通过在发出<code class="codeph">COMMIT</code>之前发出<code class="codeph">SET CONSTRAINTS ALL IMMEDIATE</code>语句，可以在提交之前检查约束违规。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" title="完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在CREATE TABLE或ALTER TABLE语句中，并标识受约束影响的一列或多列，并标识约束的条件。">管理完整性约束</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11551"></a><div class="props_rev_3"><a id="GUID-FDF6445E-D1E0-4305-B1D4-C5D4310CA1FB" name="GUID-FDF6445E-D1E0-4305-B1D4-C5D4310CA1FB"></a><h5 id="ADMIN-GUID-FDF6445E-D1E0-4305-B1D4-C5D4310CA1FB" class="sect5"><span class="enumeration_section">18.5.4.1</span>设置延迟的所有约束</h5>
                     <div>
                        <p>如果必须延迟事务的约束，则必须在实际开始处理用于操作数据的应用程序中的任何数据之前设置延迟的所有约束。</p>
                        <div class="section">
                           <p>使用以下DML语句设置延迟的所有可延迟约束：</p><pre class="oac_no_warn" dir="ltr">设置约束所有延迟;</pre><div class="infoboxnote" id="GUID-FDF6445E-D1E0-4305-B1D4-C5D4310CA1FB__GUID-16D4044C-08CA-4975-BFE8-BE84C0863FB8">
                              <p class="notep1">注意：</p>
                              <p><code class="codeph">SET CONSTRAINTS</code>语句仅适用于当前事务。只要约束存在，创建约束时指定的默认值就会保留。<code class="codeph">ALTER SESSION SET CONSTRAINTS</code>语句仅适用于当前会话。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-FC924C05-E241-4FDA-9D80-D094F95CB6BD" title="当数据库检查约束时，如果不满足约束，则它会发出错误信号。您可以推迟检查约束的有效性，直到事务结束。当您发出SET CONSTRAINTS语句时，SET CONSTRAINTS模式将持续到事务的持续时间，或者直到另一个SET CONSTRAINTS语句重置该模式。">延迟约束检查</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11552"></a><div class="props_rev_3"><a id="GUID-41981E1D-6F0D-4D94-A761-92DDB38BB81F" name="GUID-41981E1D-6F0D-4D94-A761-92DDB38BB81F"></a><h5 id="ADMIN-GUID-41981E1D-6F0D-4D94-A761-92DDB38BB81F" class="sect5"><span class="enumeration_section">18.5.4.2</span>检查提交（可选）</h5>
                     <div>
                        <p>通过在发出<code class="codeph">COMMIT</code>之前发出<code class="codeph">SET CONSTRAINTS ALL IMMEDIATE</code>语句，可以在提交之前检查约束违规。</p>
                        <div class="section">
                           <p>如果约束存在任何问题，则此语句将失败，并确定导致错误的约束。如果在违反约束时提交，则回滚事务并收到错误消息。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-FC924C05-E241-4FDA-9D80-D094F95CB6BD" title="当数据库检查约束时，如果不满足约束，则它会发出错误信号。您可以推迟检查约束的有效性，直到事务结束。当您发出SET CONSTRAINTS语句时，SET CONSTRAINTS模式将持续到事务的持续时间，或者直到另一个SET CONSTRAINTS语句重置该模式。">延迟约束检查</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN11553"></a><div class="props_rev_3"><a id="GUID-1DBBC985-4943-4C75-BFAD-6DECC340088C" name="GUID-1DBBC985-4943-4C75-BFAD-6DECC340088C"></a><h4 id="ADMIN-GUID-1DBBC985-4943-4C75-BFAD-6DECC340088C" class="sect4"><span class="enumeration_section">18.5.5</span>报告约束异常</h4>
                  <div>
                     <p>如果在验证约束时存在异常，则返回错误并且完整性约束保持不生效。如果由于存在完整性约束异常而未成功执行语句，则会回滚该语句。如果存在异常，则在更新或删除约束的所有异常之前，您无法验证约束。</p>
                     <div class="section">
                        <p>要确定哪些行违反了完整性约束，请使用<code class="codeph">ENABLE</code>子句中的<code class="codeph">EXCEPTIONS</code>选项发出<code class="codeph">ALTER TABLE</code>语句。<code class="codeph">EXCEPTIONS</code>选项将所有异常行的rowid，表所有者，表名和约束名放入指定的表中。
                        </p>
                        <p>在启用约束之前，必须创建适当的异常报告表以接受来自<code class="codeph">ENABLE</code>子句的<code class="codeph">EXCEPTIONS</code>选项的信息。您可以通过执行<code class="codeph">UTLEXCPT.SQL</code>脚本或<code class="codeph">UTLEXPT1.来创建例外表<code class="codeph">UTLEXPT1.SQL</code>脚本。
                        </p>
                        <div class="infoboxnote" id="GUID-1DBBC985-4943-4C75-BFAD-6DECC340088C__GUID-803804BB-BEED-4C49-A3EE-6C460718EFCB">
                           <p class="notep1">注意：</p>
                           <p>您为执行创建<code class="codeph">EXCEPTIONS</code>表而选择的脚本取决于您正在分析的表的类型。有关更多信息，请参见<a href="../sqlrf/constraint.html#SQLRF52229" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                           </p>
                        </div>
                        <p>这两个脚本都创建了一个名为<code class="codeph">EXCEPTIONS</code>的表。您可以通过修改和重新提交脚本来创建具有不同名称的其他异常表。
                        </p>
                        <p>以下语句尝试验证<code class="codeph">dept</code>表的<code class="codeph">PRIMARY KEY</code> ，如果存在异常，则将信息插入名为<code class="codeph">EXCEPTIONS</code>的表中：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept使主要关键例外成为例外;</pre><p>如果存在重复的主键值<code class="codeph">dept</code>表和名称<code class="codeph">PRIMARY KEY</code>的约束<code class="codeph">dept</code>是<code class="codeph">sys_c00610</code> ，那么下面的查询将显示这些例外情况：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM EXCEPTIONS;</pre><p>显示以下例外情况：</p><pre class="oac_no_warn" dir="ltr">fROWID OWNER TABLE_NAME CONSTRAINT ------------------ --------- -------------- ----- ------ AAAAZ9AABAAABvqAAB SCOTT DEPS SYS_C00610 AAAAZ9AABAAABvqAAG SCOTT DEPS SYS_C00610</pre><p>更具信息性的查询是将异常报告表和主表中的行连接起来，列出违反特定约束的实际行，如以下语句和结果所示：</p><pre class="oac_no_warn" dir="ltr">SELECT deptno，dname，loc FROM dept，EXCEPTIONS WHERE EXCEPTIONS.constraint ='SYS_C00610'AND dept.rowid = EXCEPTIONS.row_id; DEPTNO DNAME LOC ---------- -------------- ----------- 10会计纽约10研究报告</pre><p>必须从包含约束的表中更新或删除违反约束的所有行。更新异常时，必须将违反约束的值更改为与约束一致的值或null。更新或删除主表中的行后，应删除异常报告表中异常的相应行，以避免与以后的异常报告混淆。更新主表和异常报告表的语句应位于同一事务中以确保事务一致性。</p>
                        <p>要更正前面示例中的例外，您可以发出以下事务：</p><pre class="oac_no_warn" dir="ltr">UPDATE dept SET deptno = 20 WHERE dname ='RESEARCH'; DELETE FROM EXCEPTIONS WHERE constraint ='SYS_C00610';承诺;</pre><p>管理异常时，目标是消除异常报告表中的所有异常。</p>
                        <div class="infoboxnote" id="GUID-1DBBC985-4943-4C75-BFAD-6DECC340088C__GUID-5B246042-B7A7-451F-9141-A7F38C53188C">
                           <p class="notep1">注意：</p>
                           <p>在更正禁用约束的表的当前异常时，其他用户可以发出创建新异常的语句。您可以通过在开始消除异常之前标记约束<code class="codeph">ENABLE NOVALIDATE</code>来避免这种情况。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1DBBC985-4943-4C75-BFAD-6DECC340088C__GUID-093502BA-6A34-4284-B072-BE89C6572CC0">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">EXCEPTIONS</code>表的说明，请<a href="../refrn/EXCEPTIONS.html#REFRN29511" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" title="完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在CREATE TABLE或ALTER TABLE语句中，并标识受约束影响的一列或多列，并标识约束的条件。">管理完整性约束</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11554"></a><div class="props_rev_3"><a id="GUID-328CBDDA-98F9-41A5-8698-A492E177D8DA" name="GUID-328CBDDA-98F9-41A5-8698-A492E177D8DA"></a><h4 id="ADMIN-GUID-328CBDDA-98F9-41A5-8698-A492E177D8DA" class="sect4"><span class="enumeration_section">18.5.6</span>查看约束信息</h4>
                  <div>
                     <p>Oracle数据库提供了一组视图，使您可以查看表上的约束定义并标识在约束中指定的列。</p>
                     <div class="tblformal" id="GUID-328CBDDA-98F9-41A5-8698-A492E177D8DA__GUID-2C271BFA-37B3-4E59-A7C2-DE959E71804A">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Column 1 displays the names of views that identify constraint definitions on tables. Column 2 describes each view." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d176439e3568">视图</th>
                                 <th align="left" valign="bottom" width="65%" id="d176439e3571">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d176439e3576" headers="d176439e3568 ">
                                    <p><code class="codeph">DBA_CONSTRAINTS</code> 
                                    </p>
                                    <p><code class="codeph">ALL_CONSTRAINTS</code> 
                                    </p>
                                    <p><code class="codeph">USER_CONSTRAINTS</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d176439e3576 d176439e3571 ">
                                    <p><code class="codeph">DBA</code>视图描述了数据库中的所有约束定义。<code class="codeph">ALL</code>视图描述了当前用户可访问的约束定义。<code class="codeph">USER</code>视图描述了当前用户拥有的约束定义。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d176439e3601" headers="d176439e3568 ">
                                    <p><code class="codeph">DBA_CONS_COLUMNS</code> 
                                    </p>
                                    <p><code class="codeph">ALL_CONS_COLUMNS</code> 
                                    </p>
                                    <p><code class="codeph">USER_CONS_COLUMNS</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d176439e3601 d176439e3571 ">
                                    <p><code class="codeph">DBA</code>视图描述数据库中约束中指定的所有列。<code class="codeph">ALL</code>视图仅描述在约束中指定的当前用户可访问的那些列。<code class="codeph">USER</code>视图仅描述在约束中指定的当前用户拥有的那些列。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-328CBDDA-98F9-41A5-8698-A492E177D8DA__GUID-37E9D847-AFBD-4B42-8AA3-105A2BA0F2EC">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">*_CONSTRAINTS</code>视图的信息，请参阅<a href="../refrn/ALL_CONSTRAINTS.html#REFRN20047" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">*_CONS_COLUMNS</code>视图的信息，请参阅<a href="../refrn/ALL_CONS_COLUMNS.html#REFRN20045" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" title="完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在CREATE TABLE或ALTER TABLE语句中，并标识受约束影响的一列或多列，并标识约束的条件。">管理完整性约束</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11555"></a><div class="props_rev_3"><a id="GUID-5AD7C0D3-BE26-4369-84F6-0C6DB5E0EBED" name="GUID-5AD7C0D3-BE26-4369-84F6-0C6DB5E0EBED"></a><h3 id="ADMIN-GUID-5AD7C0D3-BE26-4369-84F6-0C6DB5E0EBED" class="sect3"><span class="enumeration_section">18.6</span>重命名架构对象</h3>
               <div>
                  <p>有几种方法可以重命名对象。</p>
                  <div class="section">
                     <p>要重命名对象，它必须位于您的架构中。您可以通过以下任一方式重命名架构对象：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>删除并重新创建对象</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">RENAME</code>语句重命名对象</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">ALTER</code>重命名对象...<code class="codeph">RENAME</code>语句（用于索引和触发器）</p>
                        </li>
                     </ul>
                     <p>如果删除并重新创建对象，则为该对象授予的所有权限都将丢失。重新创建对象时必须重新授予权限。</p>
                     <p>可以使用<code class="codeph">RENAME</code>语句重命名表，视图，序列或表，视图或序列的私有同义词。使用<code class="codeph">RENAME</code>语句时，将为新名称继续执行对象的完整性约束，索引和授权。例如，以下语句重命名<code class="codeph">sales_staff</code>视图：</p><pre class="oac_no_warn" dir="ltr">RENAME sales_staff to dept_30;</pre><div class="infoboxnote" id="GUID-5AD7C0D3-BE26-4369-84F6-0C6DB5E0EBED__GUID-C8842970-7073-4C4E-B720-8D3A2808BB1C">
                        <p class="notep1">注意：</p>
                        <p>您不能将<code class="codeph">RENAME</code>用于存储的PL / SQL程序单元，公共同义词或群集。要重命名此类对象，必须删除并重新创建它。
                        </p>
                     </div>
                     <p>在重命名架构对象之前，请考虑以下效果：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>依赖于重命名对象的所有视图和PL / SQL程序单元都将变为无效，并且必须在下次使用之前重新编译。</p>
                        </li>
                        <li>
                           <p>重命名对象的所有同义词在使用时都会返回错误。</p>
                           <div class="infoboxnotealso" id="GUID-5AD7C0D3-BE26-4369-84F6-0C6DB5E0EBED__GUID-26889110-9990-4E49-8AC6-5312B66D36FD">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">RENAME</code>语句语法的<a href="../sqlrf/RENAME.html#SQLRF01608" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11556"></a><div class="props_rev_3"><a id="GUID-46D82F8E-C360-4223-B469-18039B1FFB21" name="GUID-46D82F8E-C360-4223-B469-18039B1FFB21"></a><h3 id="ADMIN-GUID-46D82F8E-C360-4223-B469-18039B1FFB21" class="sect3"><span class="enumeration_section">18.7</span>管理对象依赖关系</h3>
               <p>Oracle数据库提供了一种自动机制，可确保从属对象始终与其引用的对象保持同步。您也可以手动重新编译无效对象。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-919EF353-E9F4-4767-B6BD-5191BE3E38E5">关于对象依赖项和对象失效</a><br>某些类型的架构对象引用其他对象。引用另一个对象的对象称为<span class="bold">依赖对象</span> ，被引用的对象是引用的<span class="bold">对象</span> 。这些引用是在编译时建立的，如果编译器无法解析它们，则编译的依赖对象将标记为<span class="italic">无效</span> 。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-5B63369E-8E2F-4A4D-B89D-880C66AA9A54">使用DDL手动重新编译无效对象</a><br>您可以使用<code class="codeph">ALTER</code>语句手动重新编译单个架构对象。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-48829176-5BF4-43FB-BD08-3EBB7D8FF183">使用PL / SQL包过程手动重新编译无效对象</a><br>如果您不提供模式名称参数，则<code class="codeph">RECOMP_SERIAL</code>过程将重新编译指定模式中的所有无效对象，或数据库中的所有无效对象。<code class="codeph">RECOMP_PARALLEL</code>过程执行相同操作，但并行使用多个CPU。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN12618"></a><a id="ADMIN11557"></a><div class="props_rev_3"><a id="GUID-919EF353-E9F4-4767-B6BD-5191BE3E38E5" name="GUID-919EF353-E9F4-4767-B6BD-5191BE3E38E5"></a><h4 id="ADMIN-GUID-919EF353-E9F4-4767-B6BD-5191BE3E38E5" class="sect4"><span class="enumeration_section">18.7.1</span>关于对象依赖关系和对象失效</h4>
                  <div>
                     <p>某些类型的架构对象引用其他对象。引用另一个对象的对象称为<span class="bold">依赖对象</span> ，被引用的对象是引用的<span class="bold">对象</span> 。这些引用是在编译时建立的，如果编译器无法解析它们，则编译的依赖对象将标记为<span class="italic">无效</span> 。
                     </p>
                     <p>例如，视图包含引用表或其他视图的查询，PL / SQL子程序可能会调用其他子程序，并且可能使用静态SQL来引用表或视图。</p>
                     <p>Oracle数据库提供了一种自动机制，可确保从属对象始终与其引用的对象保持同步。创建依赖对象时，数据库会跟踪依赖对象与其引用对象之间的依赖关系。当引用的对象以可能影响依赖对象的方式更改时，依赖对象将标记为无效。在可以使用依赖对象之前，必须针对引用对象的新定义重新编译无效的依赖对象。引用无效依赖对象时自动重新编译。</p>
                     <p>了解可能使架构对象无效的更改非常重要，因为失效会影响在数据库上运行的应用程序。本节介绍对象如何变为无效，如何识别无效对象以及如何验证无效对象。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-919EF353-E9F4-4767-B6BD-5191BE3E38E5__GUID-647A186C-E4B1-4354-A3D8-4A97C566FD02">对象失效</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在典型的运行应用程序中，您不希望视图或存储过程变得无效，因为应用程序通常不会在正常执行期间更改表结构或更改视图或存储过程定义。使用修补程序脚本或临时DDL语句修补或升级应用程序时，通常会发生对表，视图或PL / SQL单元的更改。应用修补程序更改一组引用对象后，从属对象可能会无效。</p>
                        <p>使用以下查询显示数据库中的无效对象集：</p><pre class="oac_no_warn" dir="ltr">SELECT object_name，object_type FROM dba_objects WHERE status ='INVALID';</pre><p>当架构对象变为无效时，Oracle Enterprise Manager Cloud Control中的数据库主页会显示警报。</p>
                        <p>对象失效以两种方式影响应用程序。首先，必须先重新验证无效对象，然后才能由应用程序使用它。重新验证会增加应用程序执行的延迟。如果无效对象的数量很大，则第一次执行时增加的延迟可能很大。其次，过程，函数或包的失效可能导致其他会话同时执行过程，函数或包的异常。如果在不同会话中使用应用程序时应用了修补程序，则执行应用程序的会话会注意到正在使用的对象已失效，并引发以下4个异常之一：ORA-04061，ORA-04064，ORA-04065或ORA-04068。必须通过在修补程序后重新启动应用程序会话来纠正这些异常。</p>
                        <p>您可以使用带有<code class="codeph">COMPILE</code>子句的相应SQL语句强制数据库重新编译模式对象。有关详细信息，请参阅<span class="q">“ <a href="managing-schema-objects.html#GUID-5B63369E-8E2F-4A4D-B89D-880C66AA9A54" title="您可以使用ALTER语句手动重新编译单个架构对象。">使用DDL手动重新编译无效对象</a> ”</span> 。
                        </p>
                        <p>如果您知道存在大量无效对象，请使用<code class="codeph">UTL_RECOMP</code> PL / SQL包执行批量重新编译。有关详细信息，请参阅<span class="q">“ <a href="managing-schema-objects.html#GUID-48829176-5BF4-43FB-BD08-3EBB7D8FF183" title="如果您不提供模式名称参数，则RECOMP_SERIAL过程将重新编译指定模式中的所有无效对象，或数据库中的所有无效对象。RECOMP_PARALLEL过程执行相同操作，但并行使用多个CPU。">使用PL / SQL程序包手动重新编译无效对象</a> ”</span> 。
                        </p>
                        <p>以下是架构对象失效的一些一般规则：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在引用的对象与其每个依赖对象之间，数据库跟踪依赖项中涉及的引用对象的元素。例如，如果单表视图仅选择表中的列的子集，则只有那些列涉及依赖项。对于对象的每个依赖项，如果对依赖项中涉及的任何元素的定义进行了更改（包括删除元素），则依赖对象将失效。相反，如果仅对依赖项中未涉及的元素的定义进行更改，则依赖对象仍然有效。</p>
                              <p>因此，在许多情况下，如果在更改模式对象时小心谨慎，开发人员可以避免依赖对象的失效以及数据库的不必要的额外工作。</p>
                           </li>
                           <li>
                              <p>依赖对象是<span class="italic">级联无效的</span> 。如果任何对象因任何原因变为无效，则该对象的所有依赖对象将立即失效。
                              </p>
                           </li>
                           <li>
                              <p>如果撤消对架构对象的任何对象权限，则依赖对象会级联无效。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-919EF353-E9F4-4767-B6BD-5191BE3E38E5__GUID-2D08BA67-756A-4636-AEA0-55ABA4CC0B9B">
                        <p class="notep1">也可以看看：</p>
                        <p>有关架构对象依赖性的更多详细信息，请参见<a href="../cncpt/tables-and-table-clusters.html#CNCPT1859" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-46D82F8E-C360-4223-B469-18039B1FFB21" title="Oracle数据库提供了一种自动机制，可确保从属对象始终与其引用的对象保持同步。您也可以手动重新编译无效对象。">管理对象依赖项</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12491"></a><div class="props_rev_3"><a id="GUID-5B63369E-8E2F-4A4D-B89D-880C66AA9A54" name="GUID-5B63369E-8E2F-4A4D-B89D-880C66AA9A54"></a><h4 id="ADMIN-GUID-5B63369E-8E2F-4A4D-B89D-880C66AA9A54" class="sect4"><span class="enumeration_section">18.7.2</span>使用DDL手动重编译无效对象</h4>
                  <div>
                     <p>您可以使用<code class="codeph">ALTER</code>语句手动重新编译单个架构对象。
                     </p>
                     <div class="section">
                        <p>例如，要重新编译包体<code class="codeph">Pkg1</code> ，您将执行以下DDL语句：</p><pre class="oac_no_warn" dir="ltr">更改包装pkg1 COMPILE REUSE SETTINGS;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5B63369E-8E2F-4A4D-B89D-880C66AA9A54__GUID-2C9D9A4E-81B4-4415-A072-879619A84DAE">
                        <p class="notep1">也可以看看：</p>
                        <p>有关各种<code class="codeph">ALTER</code>语句的语法和其他信息，请<a href="../sqlrf/index.html" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-46D82F8E-C360-4223-B469-18039B1FFB21" title="Oracle数据库提供了一种自动机制，可确保从属对象始终与其引用的对象保持同步。您也可以手动重新编译无效对象。">管理对象依赖项</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12619"></a><a id="ADMIN12492"></a><div class="props_rev_3"><a id="GUID-48829176-5BF4-43FB-BD08-3EBB7D8FF183" name="GUID-48829176-5BF4-43FB-BD08-3EBB7D8FF183"></a><h4 id="ADMIN-GUID-48829176-5BF4-43FB-BD08-3EBB7D8FF183" class="sect4"><span class="enumeration_section">18.7.3</span>使用PL / SQL包过程手动重编译无效对象</h4>
                  <div>
                     <p>如果您不提供模式名称参数，则<code class="codeph">RECOMP_SERIAL</code>过程将重新编译指定模式中的所有无效对象，或数据库中的所有无效对象。<code class="codeph">RECOMP_PARALLEL</code>过程执行相同操作，但并行使用多个CPU。
                     </p>
                     <div class="section">
                        <p>在应用程序升级或修补程序之后，最好重新验证无效对象，以避免因按需对象重新验证而导致的应用程序延迟。Oracle提供<code class="codeph">UTL_RECOMP</code>包以帮助对象重新验证。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-48829176-5BF4-43FB-BD08-3EBB7D8FF183__GUID-E147C598-AFC0-407B-A21C-8226397F9976">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>执行以下PL / SQL块以并行和依赖顺序重新验证数据库中的所有无效对象：</p><pre class="oac_no_warn" dir="ltr">开始utl_recomp.recomp_parallel（）;结束; /</pre><p>您还可以使用程序包<code class="codeph">DBMS_UTILITY</code>重新验证各个无效对象。以下PL / SQL块重新验证模式<code class="codeph">HR</code>的过程<code class="codeph">UPDATE_SALARY</code> ：</p><pre class="oac_no_warn" dir="ltr">begin dbms_utility.validate（'HR'，'UPDATE_SALARY'，namespace =&gt; 1）;结束; /</pre><p>以下PL / SQL块重新验证包体<code class="codeph">HR.ACCT_MGMT</code> ：</p><pre class="oac_no_warn" dir="ltr">开始dbms_utility.validate（'HR'，'ACCT_MGMT'，namespace =&gt; 2）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-48829176-5BF4-43FB-BD08-3EBB7D8FF183__GUID-8D4ED9C4-DD97-4A0D-B51D-0153565FE207">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">UTL_RECOMP</code>包的更多信息，请<code class="codeph">UTL_RECOMP</code> <a href="../arpls/UTL_RECOMP.html#ARPLS380" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">DBMS_UTILITY</code>包的更多信息，请<a href="../arpls/DBMS_UTILITY.html#ARPLS73195" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-46D82F8E-C360-4223-B469-18039B1FFB21" title="Oracle数据库提供了一种自动机制，可确保从属对象始终与其引用的对象保持同步。您也可以手动重新编译无效对象。">管理对象依赖项</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11561"></a><div class="props_rev_3"><a id="GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498" name="GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498"></a><h3 id="ADMIN-GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498" class="sect3"><span class="enumeration_section">18.8</span>管理对象名称解析</h3>
               <div>
                  <p>SQL语句中引用的对象名称可以由多个部分组成，以句点分隔。Oracle数据库执行特定操作来解析对象名称。</p>
                  <div class="section">
                     <p>以下描述数据库如何解析对象名称。</p>
                     <ol>
                        <li>
                           <p>Oracle数据库尝试限定SQL语句中引用的第一个名称。例如，在<code class="codeph">scott.emp</code> ， <code class="codeph">scott</code>是第一件。如果只有一件，那么一件就被认为是第一件。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>在当前模式中，数据库搜索名称与对象名称的第一部分匹配的对象。如果找不到这样的对象，则继续步骤<a href="managing-schema-objects.html#GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498__i1007092">1.b.</a>
                                 </p>
                              </li>
                              <li id="GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498__i1007092">
                                 <p>数据库搜索与名称的第一部分匹配的公共同义词。如果找不到，则继续步骤<a href="managing-schema-objects.html#GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498__i1007097">1.c.</a>
                                 </p>
                              </li>
                              <li id="GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498__i1007097">
                                 <p>数据库搜索名称与对象名称的第一部分匹配的模式。如果找到一个，则架构是合格的架构，并继续步骤<a href="managing-schema-objects.html#GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498__CHDFAFED">1.d。</a>
                                 </p>
                                 <p>如果在步骤<a href="managing-schema-objects.html#GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498__i1007097">1.c中</a>未找到模式，则无法限定对象，并且数据库返回错误。
                                 </p>
                              </li>
                              <li id="GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498__CHDFAFED">
                                 <p>在限定模式中，数据库搜索名称与对象名称的第二部分匹配的对象。</p>
                                 <p>如果第二部分与先前合格的模式中的对象不对应或者没有第二部分，则数据库返回错误。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>架构对象已被限定。名称的任何剩余部分必须与找到的对象的有效部分匹配。例如，如果<code class="codeph">scott.emp.deptno</code>是名称，则<code class="codeph">scott</code>被限定为模式， <code class="codeph">emp</code>被限定为表， <code class="codeph">deptno</code>必须对应于列（因为<code class="codeph">emp</code>是表）。如果<code class="codeph">emp</code>被限定为包，则<code class="codeph">deptno</code>必须对应于该包的公共常量，变量，过程或函数。
                           </p>
                        </li>
                     </ol>
                     <p>当全局对象名称在分布式数据库中显式或间接地在同义词中使用时，本地数据库会在本地解析引用。例如，它解析了远程表的全局对象名称的同义词。部分解析的语句将发送到远程数据库，远程数据库将按此处所述完成对象的解析。</p>
                     <p>由于数据库如何解析引用，因此对象可能依赖于其他对象的不存在。当依赖对象使用将被解释为另一个对象的引用时，会出现这种情况。例如，假设以下内容：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在当前时间点， <code class="codeph">company</code>架构包含一个名为<code class="codeph">emp</code>的表。
                           </p>
                        </li>
                        <li>
                           <p>一个<code class="codeph">PUBLIC</code>命名同义词<code class="codeph">emp</code>为其创建<code class="codeph">company.emp</code>和<code class="codeph">SELECT</code>的特权<code class="codeph">company.emp</code>被授予<code class="codeph">PUBLIC</code>角色。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">jward</code>架构不包含名为<code class="codeph">emp</code>的表或私有同义词。
                           </p>
                        </li>
                        <li>
                           <p>用户<code class="codeph">jward</code>使用以下语句在其模式中创建视图：</p><pre class="oac_no_warn" dir="ltr">CREATE VIEW dept_salaries AS SELECT deptno，MIN（sal），AVG（sal），MAX（sal）FROM emp GROUP BY deptno ORDER BY deptno;</pre></li>
                     </ul>
                     <p>当<code class="codeph">jward</code>创建<code class="codeph">dept_salaries</code>视图时，通过首先查找<code class="codeph">jward.emp</code>作为表，视图或私有同义词，找不到任何一个，然后作为名为<code class="codeph">emp</code>的公共同义词找到，来解析对<code class="codeph">emp</code>的引用。其结果是，该数据库指出， <code class="codeph">jward.dept_salaries</code>取决于对不存在<code class="codeph">jward.emp</code>和存在<code class="codeph">public.emp</code> 。
                     </p>
                     <p>现在假设<code class="codeph">jward</code>决定使用以下语句在其模式中创建一个名为<code class="codeph">emp</code>的新视图：</p><pre class="oac_no_warn" dir="ltr">CREATE VIEW emp AS SELECT empno，ename，mgr，deptno FROM company.emp;</pre><p>请注意， <code class="codeph">jward.emp</code>与<code class="codeph">company.emp</code>结构不同。
                     </p>
                     <p>在尝试解析对象定义中的引用时，数据库在内部记录新依赖对象对“不存在”对象的依赖关系 - 架构对象（如果存在）将更改对象定义的解释。如果稍后创建不存在的对象，则必须注意这种依赖性。如果创建了一个不存在的对象，则必须使所有依赖对象失效，以便可以重新编译和验证依赖对象，并且必须将所有依赖于函数的索引标记为不可用。</p>
                     <p>因此，在上例中，作为<code class="codeph">jward.emp</code>创建， <code class="codeph">jward.dept_salaries</code>无效，因为它依赖于<code class="codeph">jward.emp</code> 。然后，当使用<code class="codeph">jward.dept_salaries</code>时，数据库会尝试重新编译视图。当数据库解析对<code class="codeph">emp</code>的引用时，它会找到<code class="codeph">jward.emp</code> （ <code class="codeph">public.emp</code>不再是引用的对象）。由于<code class="codeph">jward.emp</code>没有<code class="codeph">sal</code>列，因此数据库在替换视图时会发现错误，使其无效。
                     </p>
                     <p>总之，如果稍后创建了不存在的对象，则必须管理在对象解析期间检查的不存在对象的依赖关系。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-4C396C8C-FBF6-4024-AB22-8A7103CEF498__GUID-5676E470-9E4F-496B-B6B3-9306C8C08A3B">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="distributed-database-concepts.html#GUID-24D64E22-E0BE-41FC-9120-01C9E425339C" title="创建数据库链接后，可以执行访问远程数据库上的对象的SQL语句。您还必须在远程数据库中获得授权才能访问特定的远程对象。">架构对象和数据库链接</a> ”，</span>用于获取有关分布式数据库中名称解析的信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN02101"></a><div class="props_rev_3"><a id="GUID-EF3A83FC-DAD6-4151-961D-628CD2B9D56D" name="GUID-EF3A83FC-DAD6-4151-961D-628CD2B9D56D"></a><h3 id="ADMIN-GUID-EF3A83FC-DAD6-4151-961D-628CD2B9D56D" class="sect3"><span class="enumeration_section">18.9</span>切换到不同的模式</h3>
               <div>
                  <p>使用<code class="codeph">ALTER SESSION</code> SQL语句切换到其他模式。
                  </p>
                  <div class="section">
                     <p>以下语句将当前会话的架构设置为语句中指定的架构名称。</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET CURRENT_SCHEMA = &lt; <span class="italic">schema name</span> &gt;</pre><p>在后续SQL语句中，Oracle数据库在省略限定符时使用此模式名称作为模式限定符。此外，数据库使用指定模式的临时表空间来排序，连接和存储临时数据库对象。会话保留其原始权限，并且不会通过前面的<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>语句获取任何额外权限。
                     </p>
                     <p>在以下示例中，在提示时提供密码：</p><pre class="oac_no_warn" dir="ltr">CONNECT scott ALTER SESSION SET CURRENT_SCHEMA = joe; SELECT * FROM emp;</pre><p>由于<code class="codeph">emp</code>不是模式限定的，因此表名称在模式<code class="codeph">joe</code>下解析。但是如果<code class="codeph">scott</code>没有对表<code class="codeph">joe</code> select权限。 <code class="codeph">emp</code> ，然后<code class="codeph">scott</code>无法执行<code class="codeph">SELECT</code>语句。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN13166"></a><div class="props_rev_3"><a id="GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037" name="GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037"></a><h3 id="ADMIN-GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037" class="sect3"><span class="enumeration_section">18.10</span>管理版本</h3>
               <p>使用基于版本的重新定义来升级其应用程序的应用程序开发人员可能会要求您执行需要DBA权限的与版本相关的任务。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-73C18F23-CFC1-43F5-A9C6-D7C40A856252">关于基于版本和版本的重新定义</a><br>基于版本的重定义使您可以在应用程序使用时升级应用程序的数据库对象，从而最大限度地减少或消除停机时间。这是通过在称为<span class="bold">版本</span>的私有环境中更改（重新定义）数据库对象来实现的。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-E05B2C83-720F-425D-B9AC-F14BA2571820">基于版本的重新定义的DBA任务</a><br>用户必须具有执行与基于版本的重新定义相关的任务所需的权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-3FE083AD-6DE5-4F4E-92A0-1BFDD923A2D1">设置数据库默认版</a><br>数据库始终存在默认版本。这是数据库会话最初使用的版本，如果它在连接时未明确指示版本。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-6223757D-D63A-4E0B-8497-C95FC3F2CB5C">查询数据库默认版</a><br>数据库缺省版本存储为数据库属性。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-C11D21A6-718E-4D5D-8E31-D624D16E38DD">设置数据库服务的Edition属性</a><br>您可以在创建服务时设置数据库服务的edition属性，也可以修改现有数据库服务以设置其edition属性。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-161B0CB1-1AF6-4632-9434-B42B8E69EE10">使用版本</a><br>要查看或修改特定版本中的对象，必须先<span class="italic">使用</span>该版本。您可以指定连接到数据库时要使用的版本。如果未指定版本，则会话将从数据库默认版本开始。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-E1365066-390F-4466-8088-F7422907764C">版本数据字典视图</a><br>有几个数据字典视图有助于管理版本。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13167"></a><div class="props_rev_3"><a id="GUID-73C18F23-CFC1-43F5-A9C6-D7C40A856252" name="GUID-73C18F23-CFC1-43F5-A9C6-D7C40A856252"></a><h4 id="ADMIN-GUID-73C18F23-CFC1-43F5-A9C6-D7C40A856252" class="sect4"><span class="enumeration_section">18.10.1</span>关于基于版本和版本的重新定义</h4>
                  <div>
                     <p>基于版本的重定义使您可以在应用程序使用时升级应用程序的数据库对象，从而最大限度地减少或消除停机时间。这是通过在称为<span class="bold">版本</span>的私有环境中更改（重新定义）数据库对象来实现的。
                     </p>
                     <p>只有在进行了所有更改并进行了测试后，才能为用户提供新版本的应用程序。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-73C18F23-CFC1-43F5-A9C6-D7C40A856252__GUID-A39511B0-F7AA-4C8A-89DC-AA3C2B17C10F">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../adfns/editions.html#ADFNS020" target="_blank"><span class="italic">Oracle数据库开发指南</span></a> ，完整讨论基于版本的重新定义</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037" title="使用基于版本的重新定义来升级其应用程序的应用程序开发人员可能会要求您执行需要DBA权限的与版本相关的任务。">管理版本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13169"></a><a id="ADMIN13168"></a><div class="props_rev_3"><a id="GUID-E05B2C83-720F-425D-B9AC-F14BA2571820" name="GUID-E05B2C83-720F-425D-B9AC-F14BA2571820"></a><h4 id="ADMIN-GUID-E05B2C83-720F-425D-B9AC-F14BA2571820" class="sect4"><span class="enumeration_section">18.10.2</span>基于版本的重新定义的DBA任务</h4>
                  <div>
                     <p>用户必须具有执行与基于版本的重新定义相关的任务所需的权限。</p>
                     <p><a href="managing-schema-objects.html#GUID-E05B2C83-720F-425D-B9AC-F14BA2571820__CHDEJBBH" title="该表有两列。第一个列出第二个任务列出了一个交叉引用，以找出有关该任务的更多信息。">表18-1</a>总结了需要通常仅授予DBA的权限的与版本相关的任务。任何被授予<code class="codeph">DBA</code>角色的用户都可以执行这些任务。
                     </p>
                     <div class="tblformal" id="GUID-E05B2C83-720F-425D-B9AC-F14BA2571820__CHDEJBBH">
                        <p class="titleintable">表18-1基于版本的重新定义的DBA任务</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="基于版本的重新定义的DBA任务" width="100%" border="1" summary="This table has two columns.  The first lists a task in the second lists a cross reference to find out more information about the task." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="50%" id="d176439e4662">任务</th>
                                 <th align="left" valign="bottom" width="50%" id="d176439e4665">看到</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d176439e4670" headers="d176439e4662 ">
                                    <p>授予或撤消创建，更改和删除版本的权限</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d176439e4670 d176439e4665 ">
                                    <p><a href="../sqlrf/CREATE-EDITION.html#SQLRF20017" target="_blank"><code class="codeph">CREATE</code> <code class="codeph">EDITION</code></a>和<a href="../sqlrf/DROP-EDITION.html#SQLRF20019" target="_blank"><code class="codeph">DROP</code> <code class="codeph">EDITION</code></a> SQL语句</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d176439e4693" headers="d176439e4662 ">
                                    <p>启用架构的版本</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d176439e4693 d176439e4665 ">
                                    <p><a href="../adfns/editions.html#ADFNS99878" target="_blank"><span class="italic">Oracle数据库开发指南</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d176439e4703" headers="d176439e4662 ">
                                    <p>设置数据库默认版本</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d176439e4703 d176439e4665 ">
                                    <p><span class="q">“ <a href="managing-schema-objects.html#GUID-3FE083AD-6DE5-4F4E-92A0-1BFDD923A2D1" title="数据库始终存在默认版本。这是数据库会话最初使用的版本，如果它在连接时未明确指示版本。">设置数据库默认版</a> ”</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d176439e4716" headers="d176439e4662 ">
                                    <p>设置数据库服务的edition属性</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d176439e4716 d176439e4665 ">
                                    <p><span class="q">“ <a href="managing-schema-objects.html#GUID-C11D21A6-718E-4D5D-8E31-D624D16E38DD" title="您可以在创建服务时设置数据库服务的edition属性，也可以修改现有数据库服务以设置其edition属性。">设置数据库服务的版本属性</a> ”</span></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037" title="使用基于版本的重新定义来升级其应用程序的应用程序开发人员可能会要求您执行需要DBA权限的与版本相关的任务。">管理版本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13170"></a><div class="props_rev_3"><a id="GUID-3FE083AD-6DE5-4F4E-92A0-1BFDD923A2D1" name="GUID-3FE083AD-6DE5-4F4E-92A0-1BFDD923A2D1"></a><h4 id="ADMIN-GUID-3FE083AD-6DE5-4F4E-92A0-1BFDD923A2D1" class="sect4"><span class="enumeration_section">18.10.3</span>设置数据库默认版本</h4>
                  <div>
                     <p>数据库始终存在默认版本。这是数据库会话最初使用的版本，如果它在连接时未明确指示版本。</p>
                     <div class="section">
                        <p>要设置数据库默认版本：</p>
                        <ol>
                           <li>
                              <p>以具有<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>权限的用户身份连接到数据库，并在版本上<code class="codeph">USE</code> <code class="codeph">WITH GRANT OPTION</code> <code class="codeph">USE</code>权限。
                              </p>
                           </li>
                           <li>
                              <p>输入以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE DEFAULT EDITION = <span class="italic">edition_name</span> ;</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3FE083AD-6DE5-4F4E-92A0-1BFDD923A2D1__GUID-FF46009F-F5E8-42D3-AE59-AA1FD9DCBAFF">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="getting-started-with-database-administration.html#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle数据库包括以下组件：Oracle数据库实例（一组进程和内存）以及一组包含用户数据和系统数据的磁盘文件。">使用SQL * Plus连接到数据库</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037" title="使用基于版本的重新定义来升级其应用程序的应用程序开发人员可能会要求您执行需要DBA权限的与版本相关的任务。">管理版本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13171"></a><div class="props_rev_3"><a id="GUID-6223757D-D63A-4E0B-8497-C95FC3F2CB5C" name="GUID-6223757D-D63A-4E0B-8497-C95FC3F2CB5C"></a><h4 id="ADMIN-GUID-6223757D-D63A-4E0B-8497-C95FC3F2CB5C" class="sect4"><span class="enumeration_section">18.10.4</span>查询数据库缺省版</h4>
                  <div>
                     <p>数据库缺省版本存储为数据库属性。</p>
                     <div class="section">
                        <p>要查询数据库默认版本：</p>
                        <ol>
                           <li>
                              <p>以任何用户身份连接到数据库。</p>
                           </li>
                           <li>
                              <p>输入以下语句：</p><pre class="oac_no_warn" dir="ltr">SELECT PROPERTY_VALUE来自DATABASE_PROPERTIES，其中PROPERTY_NAME ='DEFAULT_EDITION'; PROPERTY_VALUE ------------------------------ ORA $ BASE</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-6223757D-D63A-4E0B-8497-C95FC3F2CB5C__GUID-88C55321-6CF9-4A49-93C3-A43491ADEA4A">
                           <p class="notep1">注意：</p>
                           <p>属性名称<code class="codeph">DEFAULT_EDITION</code>区分大小写，必须以大写形式提供。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037" title="使用基于版本的重新定义来升级其应用程序的应用程序开发人员可能会要求您执行需要DBA权限的与版本相关的任务。">管理版本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13454"></a><div class="props_rev_3"><a id="GUID-C11D21A6-718E-4D5D-8E31-D624D16E38DD" name="GUID-C11D21A6-718E-4D5D-8E31-D624D16E38DD"></a><h4 id="ADMIN-GUID-C11D21A6-718E-4D5D-8E31-D624D16E38DD" class="sect4"><span class="enumeration_section">18.10.5</span>设置数据库服务的Edition属性</h4>
                  <div>
                     <p>您可以在创建服务时设置数据库服务的edition属性，也可以修改现有数据库服务以设置其edition属性。</p>
                     <div class="infoboxnote" id="GUID-C11D21A6-718E-4D5D-8E31-D624D16E38DD__GUID-9296C0B7-B394-4ABB-8C85-221B2D73B41B">
                        <p class="notep1">注意：</p>
                        <p>实例的数据库服务数量有上限。有关此限制的更多信息，请参见<a href="../refrn/process-and-runtime-limits.html#REFRN0044" target="_blank"><span class="italic">Oracle数据库参考</span></a> 。
                        </p>
                     </div>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-7219E959-A1DE-47AF-B522-1FB12B61B6F8">关于设置数据库服务的Edition属性</a><br>设置服务的edition属性时，指定服务的所有后续连接（例如客户端连接和<code class="codeph">DBMS_SCHEDULER</code>作业）都将此版本用作初始会话版本。但是，如果会话连接指定了不同的版本，则会话连接中指定的版本将用于会话版本。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-63418D5B-00FA-43E9-BAC1-4A39288B6655">在数据库服务创建期间设置版本属性</a><br>您可以使用<code class="codeph">SRVCTL</code>实用程序或<code class="codeph">DBMS_SERVICE</code>包在创建服务时设置数据库服务的edition属性。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-629D79FC-E834-4017-819E-0A5EDBED1A5F">设置现有数据库服务的Edition属性</a><br>您可以使用<code class="codeph">SRVCTL</code>实用程序或<code class="codeph">DBMS_SERVICE</code>包来设置现有数据库服务的edition属性。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037" title="使用基于版本的重新定义来升级其应用程序的应用程序开发人员可能会要求您执行需要DBA权限的与版本相关的任务。">管理版本</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-7219E959-A1DE-47AF-B522-1FB12B61B6F8" name="GUID-7219E959-A1DE-47AF-B522-1FB12B61B6F8"></a><h5 id="ADMIN-GUID-7219E959-A1DE-47AF-B522-1FB12B61B6F8" class="sect5"><span class="enumeration_section">18.10.5.1</span>关于设置数据库服务的Edition属性</h5>
                     <div>
                        <p>设置服务的edition属性时，指定服务的所有后续连接（例如客户端连接和<code class="codeph">DBMS_SCHEDULER</code>作业）都将此版本用作初始会话版本。但是，如果会话连接指定了不同的版本，则会话连接中指定的版本将用于会话版本。
                        </p>
                        <p>要检查数据库服务的edition属性，请在<code class="codeph">ALL_SERVICES</code>视图或<code class="codeph">DBA_SERVICES</code>视图中查询<code class="codeph">EDITION</code>列。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-C11D21A6-718E-4D5D-8E31-D624D16E38DD" title="您可以在创建服务时设置数据库服务的edition属性，也可以修改现有数据库服务以设置其edition属性。">设置数据库服务的Edition属性</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13455"></a><div class="props_rev_3"><a id="GUID-63418D5B-00FA-43E9-BAC1-4A39288B6655" name="GUID-63418D5B-00FA-43E9-BAC1-4A39288B6655"></a><h5 id="ADMIN-GUID-63418D5B-00FA-43E9-BAC1-4A39288B6655" class="sect5"><span class="enumeration_section">18.10.5.2</span>在创建数据库服务期间设置Edition属性</h5>
                     <div>
                        <p>您可以使用<code class="codeph">SRVCTL</code>实用程序或<code class="codeph">DBMS_SERVICE</code>包在创建服务时设置数据库服务的edition属性。
                        </p>
                        <div class="section">
                           <p>按照<span class="q">“ <a href="creating-and-configuring-an-oracle-database.html#GUID-8A3CB5F9-8523-4B62-9127-57BB8F0CCEAF" title="根据您的数据库配置，有几种方法可以创建数据库服务。">创建数据库服务</a> ”中</span>的说明操作，并使用适当的选项设置数据库服务的编辑属性：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果您的单实例数据库由Oracle Restart管理，请使用<code class="codeph">SRVCTL</code>实用程序创建数据库服务并指定<code class="codeph">-edition</code>选项以设置其edition属性。
                                 </p>
                                 <p>对于具有<code class="codeph">dbcrm</code>的<code class="codeph">DB_UNIQUE_NAME</code>的<code class="codeph">dbcrm</code> ，此示例创建名为<code class="codeph">crmbatch</code>的新数据库服务，并将数据库服务的edition属性设置为<code class="codeph">e2</code> ：</p><pre class="oac_no_warn" dir="ltr">srvctl add service -db dbcrm -service crmbatch -edition e2</pre></li>
                              <li>
                                 <p>如果Oracle Restart不管理您的单实例数据库，请使用<code class="codeph">DBMS_SERVICE.CREATE_SERVICE</code>过程，并指定<code class="codeph">edition</code>参数以设置数据库服务的edition属性。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-C11D21A6-718E-4D5D-8E31-D624D16E38DD" title="您可以在创建服务时设置数据库服务的edition属性，也可以修改现有数据库服务以设置其edition属性。">设置数据库服务的Edition属性</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13456"></a><div class="props_rev_3"><a id="GUID-629D79FC-E834-4017-819E-0A5EDBED1A5F" name="GUID-629D79FC-E834-4017-819E-0A5EDBED1A5F"></a><h5 id="ADMIN-GUID-629D79FC-E834-4017-819E-0A5EDBED1A5F" class="sect5"><span class="enumeration_section">18.10.5.3</span>设置现有数据库服务的Edition属性</h5>
                     <div>
                        <p>您可以使用<code class="codeph">SRVCTL</code>实用程序或<code class="codeph">DBMS_SERVICE</code>包来设置现有数据库服务的edition属性。
                        </p>
                        <div class="section">
                           <p>要设置现有数据库服务的edition属性：</p>
                           <ol>
                              <li>
                                 <p>停止数据库服务。</p>
                              </li>
                              <li>
                                 <p>使用适当的选项设置数据库服务的edition属性：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果您的单实例数据库由Oracle Restart管理，请使用<code class="codeph">SRVCTL</code>实用程序修改数据库服务并指定<code class="codeph">-edition</code>选项以设置其edition属性。
                                       </p>
                                       <p>对于具有<code class="codeph">dbcrm</code>的<code class="codeph">DB_UNIQUE_NAME</code>的<code class="codeph">dbcrm</code> ，此示例修改名为<code class="codeph">crmbatch</code>的数据库服务，并将服务的edition属性设置为<code class="codeph">e3</code> ：</p><pre class="oac_no_warn" dir="ltr">srvctl修改服务-db dbcrm -service crmbatch -edition e3</pre></li>
                                    <li>
                                       <p>如果Oracle Restart不管理您的单实例数据库，请使用<code class="codeph">DBMS_SERVICE.MODIFY_SERVICE</code>过程，并指定<code class="codeph">edition</code>参数以设置数据库服务的edition属性。运行<code class="codeph">MODIFY_SERVICE</code>过程时，请确保将<code class="codeph">modify_edition</code>参数设置为<code class="codeph">TRUE</code> 。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>启动数据库服务。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-629D79FC-E834-4017-819E-0A5EDBED1A5F__GUID-2F8261A0-DC70-436F-9E71-3699627EF04E">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="configuring-automatic-restart-of-an-oracle-database.html#GUID-5832E064-85C6-453C-B932-99700B1732A9" title="使用Oracle Restart功能配置Oracle数据库，以便在硬件或软件发生故障后或数据库主机重新启动时自动重新启动数据库，侦听器和其他Oracle组件。">配置Oracle数据库的自动重新启动，</a>以获取使用Oracle Restart管理数据库服务的信息</p>
                              </li>
                              <li>
                                 <p>有关使用<code class="codeph">DBMS_SERVICE</code>包管理数据库服务的信息，请参阅<a href="../arpls/DBMS_SERVICE.html#ARPLS092" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-C11D21A6-718E-4D5D-8E31-D624D16E38DD" title="您可以在创建服务时设置数据库服务的edition属性，也可以修改现有数据库服务以设置其edition属性。">设置数据库服务的Edition属性</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13172"></a><div class="props_rev_3"><a id="GUID-161B0CB1-1AF6-4632-9434-B42B8E69EE10" name="GUID-161B0CB1-1AF6-4632-9434-B42B8E69EE10"></a><h4 id="ADMIN-GUID-161B0CB1-1AF6-4632-9434-B42B8E69EE10" class="sect4"><span class="enumeration_section">18.10.6</span>使用版本</h4>
                  <div>
                     <p>要查看或修改特定版本中的对象，必须先<span class="italic">使用</span>该版本。您可以指定连接到数据库时要使用的版本。如果未指定版本，则会话将从数据库默认版本开始。
                     </p>
                     <div class="section">
                        <p>要使用其他版本，请提交以下声明：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = <span class="italic">edition_name</span> ;</pre><p>以下语句首先将当前版本设置为<code class="codeph">e2</code> ，然后设置为<code class="codeph">ora$base</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = e2; ...ALTER SESSION SET EDITION = ora $ base;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-161B0CB1-1AF6-4632-9434-B42B8E69EE10__GUID-EE6D81AD-D44C-4981-842E-71A577E4ECC9">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关使用版本的详细信息，请参阅<a href="../adfns/editions.html#ADFNS99921" target="_blank"><span class="italic">“Oracle数据库开发指南”</span></a> ，以及有关确定当前版本的说明</p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="getting-started-with-database-administration.html#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle数据库包括以下组件：Oracle数据库实例（一组进程和内存）以及一组包含用户数据和系统数据的磁盘文件。">使用SQL * Plus连接到数据库</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037" title="使用基于版本的重新定义来升级其应用程序的应用程序开发人员可能会要求您执行需要DBA权限的与版本相关的任务。">管理版本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13173"></a><div class="props_rev_3"><a id="GUID-E1365066-390F-4466-8088-F7422907764C" name="GUID-E1365066-390F-4466-8088-F7422907764C"></a><h4 id="ADMIN-GUID-E1365066-390F-4466-8088-F7422907764C" class="sect4"><span class="enumeration_section">18.10.7</span>版本数据字典视图</h4>
                  <div>
                     <p>有几个数据字典视图有助于管理版本。</p>
                     <div class="section">
                        <p>下表列出了其中三个。有关完整列表，请参阅<a href="../adfns/editions.html#ADFNS0204" target="_blank"><span class="italic">Oracle数据库开发指南</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E1365066-390F-4466-8088-F7422907764C__GUID-DC97118E-35AC-43C6-9ECB-3F6C2CECA848">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Column 1 lists the names of views and, column 2 describes each view." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="28%" id="d176439e5308">视图</th>
                                 <th align="left" valign="bottom" width="72%" id="d176439e5311">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d176439e5316" headers="d176439e5308 ">
                                    <p><code class="codeph">* _EDITIONS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d176439e5316 d176439e5311 ">
                                    <p>列出数据库中的所有版本。（注意： <code class="codeph">USER_EDITIONS</code>不存在。）
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d176439e5327" headers="d176439e5308 ">
                                    <p><code class="codeph">* _OBJECTS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d176439e5327 d176439e5311 ">
                                    <p>描述数据库中当前版本中可见（实际或继承）的每个对象。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d176439e5335" headers="d176439e5308 ">
                                    <p><code class="codeph">* _OBJECTS_AE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d176439e5335 d176439e5311 ">
                                    <p>描述所有版本中数据库中的每个实际对象。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-17DBA74B-01D6-461F-8DCC-73AF1CF30037" title="使用基于版本的重新定义来升级其应用程序的应用程序开发人员可能会要求您执行需要DBA权限的与版本相关的任务。">管理版本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11562"></a><div class="props_rev_3"><a id="GUID-743F4E97-5D26-4877-BF4F-923ACECD8BEF" name="GUID-743F4E97-5D26-4877-BF4F-923ACECD8BEF"></a><h3 id="ADMIN-GUID-743F4E97-5D26-4877-BF4F-923ACECD8BEF" class="sect3"><span class="enumeration_section">18.11</span>显示模式对象的信息</h3>
               <p>Oracle数据库提供了一个PL / SQL包，使您可以确定创建对象的DDL和可用于显示有关模式对象的信息的数据字典视图。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-060F2808-C1BE-49FA-9C8E-158FE182B603">使用PL / SQL包显示有关模式对象的信息</a><br>Oracle提供的PL / SQL包过程<code class="codeph">DBMS_METADATA.GET_DDL</code>允许您获取有关模式对象的元数据（以用于创建对象的DDL的形式）。
                     </li>
                     <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-043A5C7C-7F0F-485B-BB5E-8A26DADA1F86">模式对象数据字典视图</a><br>这些视图显示有关架构对象的一般信息。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="您可以使用Oracle数据库创建和管理多种类型的模式对象。">管理架构对象</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN12620"></a><a id="ADMIN11563"></a><div class="props_rev_3"><a id="GUID-060F2808-C1BE-49FA-9C8E-158FE182B603" name="GUID-060F2808-C1BE-49FA-9C8E-158FE182B603"></a><h4 id="ADMIN-GUID-060F2808-C1BE-49FA-9C8E-158FE182B603" class="sect4"><span class="enumeration_section">18.11.1</span>使用PL / SQL包显示有关模式对象的信息</h4>
                  <div>
                     <p>Oracle提供的PL / SQL包过程<code class="codeph">DBMS_METADATA.GET_DDL</code>允许您获取有关模式对象的元数据（以用于创建对象的DDL的形式）。
                     </p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-060F2808-C1BE-49FA-9C8E-158FE182B603__GUID-1038EAE1-74AD-4DD5-8533-EBCEB2D9DBC3">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_METADATA.html#ARPLS026" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> ，以获取<code class="codeph">DBMS_METADATA</code>包的说明</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-060F2808-C1BE-49FA-9C8E-158FE182B603__GUID-E6813993-6EB0-471B-B547-526C0836EF15">示例：使用DBMS_METADATA包</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">DBMS_METADATA</code>包是用于获取模式对象的完整定义的强大工具。它使您可以一次获取对象的所有属性。该对象被描述为DDL，可用于（重新）创建它。
                        </p>
                        <p>在以下语句中， <code class="codeph">GET_DDL</code>函数用于获取当前模式中所有表的DDL，过滤掉嵌套表和溢出段。<code class="codeph">SET_TRANSFORM_PARAM</code> （句柄值等于<code class="codeph">DBMS_METADATA.SESSION_TRANSFORM</code>意味着“对于当前会话”）用于指定不在SQL DDL中返回存储子句。之后，会话级转换参数将重置为其默认值。设置后，转换参数值将保持有效，直到专门重置为其默认值。
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_METADATA.SET_TRANSFORM_PARAM（DBMS_METADATA.SESSION_TRANSFORM，'STORAGE'，false）; SELECT DBMS_METADATA.GET_DDL（'TABLE'，u.table_name）FROM USER_ALL_TABLES u WHERE u.nested ='NO'AND（u.iot_type为null或u.iot_type ='IOT'）; EXECUTE DBMS_METADATA.SET_TRANSFORM_PARAM（DBMS_METADATA.SESSION_TRANSFORM，'DEFAULT'）;</pre><p><code class="codeph">DBMS_METADATA.GET_DDL</code>的输出是<code class="codeph">LONG</code>数据类型。使用SQL * Plus时，默认情况下可能会截断输出。在发出<code class="codeph">DBMS_METADATA.GET_DDL</code>语句之前发出以下SQL * Plus命令，以确保不截断输出：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SET LONG 9999</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-743F4E97-5D26-4877-BF4F-923ACECD8BEF" title="Oracle数据库提供了一个PL / SQL包，使您可以确定创建对象的DDL和可用于显示有关模式对象的信息的数据字典视图。">显示有关模式对象的信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11564"></a><div class="props_rev_3"><a id="GUID-043A5C7C-7F0F-485B-BB5E-8A26DADA1F86" name="GUID-043A5C7C-7F0F-485B-BB5E-8A26DADA1F86"></a><h4 id="ADMIN-GUID-043A5C7C-7F0F-485B-BB5E-8A26DADA1F86" class="sect4"><span class="enumeration_section">18.11.2</span>模式对象数据字典视图</h4>
                  <div>
                     <p>这些视图显示有关架构对象的一般信息。</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-043A5C7C-7F0F-485B-BB5E-8A26DADA1F86__GUID-350A5C36-07C9-46E6-A65F-0934FA97B7A1">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Column 1 lists the names of views that can be used to view general information about schema objects. Column 2 describes each view." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d176439e5557">视图</th>
                                 <th align="left" valign="bottom" width="70%" id="d176439e5560">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d176439e5565" headers="d176439e5557 ">
                                    <p><code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN23146" target="_blank">DBA_OBJECTS</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN20146" target="_blank">ALL_OBJECTS</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN26146" target="_blank">USER_OBJECTS</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d176439e5565 d176439e5560 ">
                                    <p><code class="codeph">DBA</code>视图描述数据库中的所有模式对象。<code class="codeph">ALL</code>视图描述当前用户可访问的对象。<code class="codeph">USER</code>视图描述当前用户拥有的对象。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d176439e5596" headers="d176439e5557 ">
                                    <p><code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN23036" target="_blank">DBA_CATALOG</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN20036" target="_blank">ALL_CATALOG</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="../refrn/USER_CATALOG.html#REFRN26036" target="_blank">USER_CATALOG</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d176439e5596 d176439e5560 ">
                                    <p>列出数据库中所有表，视图，同义词和序列的名称，类型和所有者（ <code class="codeph">USER</code>视图不显示所有者）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d176439e5622" headers="d176439e5557 ">
                                    <p><code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN23053" target="_blank">DBA_DEPENDENCIES</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN20053" target="_blank">ALL_DEPENDENCIES</a></code> 
                                    </p>
                                    <p><code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=REFRN26053" target="_blank">USER_DEPENDENCIES</a></code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d176439e5622 d176439e5560 ">
                                    <p>列出过程，包，函数，包体和触发器之间的所有依赖关系，包括没有任何数据库链接的视图的依赖关系。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-10DB95E6-6058-4CBC-B22C-05206FB92F5A">示例1：按类型显示架构对象</a><br>您可以查询<code class="codeph">USER_OBJECTS</code>视图以列出发出查询的用户拥有的所有对象。
                        </li>
                        <li class="ulchildlink"><a href="managing-schema-objects.html#GUID-EEF4BFFD-6817-4742-96F8-0977CDE75C09">示例2：显示视图和同义词的依赖关系</a><br>创建视图或同义词时，视图或同义词基于其基础基础对象。<code class="codeph">ALL_DEPENDENCIES</code> ， <code class="codeph">USER_DEPENDENCIES</code>和<code class="codeph">DBA_DEPENDENCIES</code>数据字典视图可用于显示视图的依赖关系。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-743F4E97-5D26-4877-BF4F-923ACECD8BEF" title="Oracle数据库提供了一个PL / SQL包，使您可以确定创建对象的DDL和可用于显示有关模式对象的信息的数据字典视图。">显示有关模式对象的信息</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11565"></a><div class="props_rev_3"><a id="GUID-10DB95E6-6058-4CBC-B22C-05206FB92F5A" name="GUID-10DB95E6-6058-4CBC-B22C-05206FB92F5A"></a><h5 id="ADMIN-GUID-10DB95E6-6058-4CBC-B22C-05206FB92F5A" class="sect5"><span class="enumeration_section">18.11.2.1</span>示例1：按类型显示架构对象</h5>
                     <div>
                        <p>您可以查询<code class="codeph">USER_OBJECTS</code>视图以列出发出查询的用户拥有的所有对象。
                        </p>
                        <div class="section">
                           <p>以下查询列出了发出查询的用户拥有的所有对象：</p><pre class="oac_no_warn" dir="ltr">SELECT OBJECT_NAME，OBJECT_TYPE FROM USER_OBJECTS;</pre><p>以下是查询输出：</p><pre class="oac_no_warn" dir="ltr">OBJECT_NAME OBJECT_TYPE ------------------------- ------------------- EMP_DEPT CLUSTER EMP TABLE DEPT TABLE EMP_DEPT_INDEX INDEX PUBLIC_EMP SYNONYM EMP_MGR视图</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-043A5C7C-7F0F-485B-BB5E-8A26DADA1F86" title="这些视图显示有关架构对象的一般信息。">模式对象数据字典视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11566"></a><div class="props_rev_3"><a id="GUID-EEF4BFFD-6817-4742-96F8-0977CDE75C09" name="GUID-EEF4BFFD-6817-4742-96F8-0977CDE75C09"></a><h5 id="ADMIN-GUID-EEF4BFFD-6817-4742-96F8-0977CDE75C09" class="sect5"><span class="enumeration_section">18.11.2.2</span>示例2：显示视图和同义词的依赖关系</h5>
                     <div>
                        <p>创建视图或同义词时，视图或同义词基于其基础基础对象。<code class="codeph">ALL_DEPENDENCIES</code> ， <code class="codeph">USER_DEPENDENCIES</code>和<code class="codeph">DBA_DEPENDENCIES</code>数据字典视图可用于显示视图的依赖关系。
                        </p>
                        <div class="section">
                           <p><code class="codeph">ALL</code> <code class="codeph">_SYNONYMS</code> ， <code class="codeph">USER_SYNONYMS</code>和<code class="codeph">DBA_SYNONYMS</code>数据字典视图可用于列出同义词的基础对象。例如，以下查询列出了用户<code class="codeph">jward</code>创建的同义词的基础对象：</p><pre class="oac_no_warn" dir="ltr">SELECT TABLE_OWNER，TABLE_NAME，SYNONYM_NAME FROM DBA_SYNONYMS WHERE OWNER ='JWARD';</pre><p>以下是查询输出：</p><pre class="oac_no_warn" dir="ltr">TABLE_OWNER TABLE_NAME SYNONYM_NAME ---------------------- ----------- -------------- --- SCOTT DEPT DEPT SCOTT EMP EMP</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-schema-objects.html#GUID-043A5C7C-7F0F-485B-BB5E-8A26DADA1F86" title="这些视图显示有关架构对象的一般信息。">模式对象数据字典视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
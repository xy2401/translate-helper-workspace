<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>Oracle Clusterware故障排除</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00"></meta>
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95727-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-cluster-registry-utility-reference.html" title="Previous" type="text/html"></link>
      <link rel="next" href="glossary.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-cluster-registry-utility-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="glossary.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">“Clusterware管理和部署指南”</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Clusterware故障排除</li>
            </ol>
            <a id="GUID-5D0B8A16-31FA-4376-BCFC-DC77F6CEC60A" name="GUID-5D0B8A16-31FA-4376-BCFC-DC77F6CEC60A"></a><a id="CWADD025"></a>
            
            <h2 id="CWADD-GUID-5D0B8A16-31FA-4376-BCFC-DC77F6CEC60A" class="sect2"><span class="enumeration_appendix">K</span> Oracle Clusterware故障排除</h2>
         </header>
         <div class="ind">
            <div>
               <p>本附录介绍了对Oracle Clusterware环境的监控，并说明了如何启用动态调试以排除Oracle Clusterware处理故障，并启用特定组件和特定Oracle Clusterware资源的调试和跟踪，以便集中精力进行故障排除。</p>
               <p>本附录包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="troubleshooting-oracle-clusterware.html#GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C" title="查看此内容以了解Oracle Clusterware如何使用ADR的特定于集群件的方面。">Oracle Clusterware诊断和警报日志数据</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-clusterware.html#GUID-50FAE797-1174-49DD-9FAB-A23E6A208537">诊断收集脚本</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-clusterware.html#GUID-545CEDAE-8A83-405B-86C1-2410DD6DDDBB" title="在升级期间，在运行Oracle Clusterware root.sh脚本时，您可能会看到以下消息：">滚动升级和驱动程序安装问题</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-clusterware.html#GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B">测试区域委派</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-clusterware.html#GUID-FA795984-F89F-4D2F-8A06-5AE37FBC416E">Oracle Clusterware警报</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-FE2479DE-DC5C-43DD-9A08-27047FB1347D" name="GUID-FE2479DE-DC5C-43DD-9A08-27047FB1347D"></a><h3 id="CWADD-GUID-FE2479DE-DC5C-43DD-9A08-27047FB1347D" class="sect3">对不兼容的车队修补和配置客户端资源进行故障排除</h3>
               <div>
                  <p>如果手动将注册为Fleet Patching and Provisioning目标的Oracle Clusterware 12 <span class="italic">c</span> （12.1）目标升级到更高版本，则结果将是不兼容的Fleet Patching和Provisioning Client资源。
                  </p>
                  <div class="section">要使用Fleet Patching and Provisioning注册Fleet Patching和Provisioning Client资源，您必须在Fleet Patching and Provisioning Server上执行以下步骤：<div class="infoboxnote" id="GUID-FE2479DE-DC5C-43DD-9A08-27047FB1347D__GUID-7BFE0D0C-D040-45E0-90E0-F58147C64C19">
                        <p class="notep1">注意：</p>这些相同的步骤适用于将Oracle Clusterware 12 <span class="italic">c</span> （12.2）Fleet Patching和Provisioning Client群集升级到导致连接问题的更高版本。
                     </div>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>如果目标正在运行，请停止目标上的Fleet Patching and Provisioning Client资源。</span></li>
                     <li class="stepexpand"><span>在Fleet Patching and Provisioning Server上运行以下命令：</span><div>更新Fleet Patching和Provisioning Server上的Fleet Patching and Provisioning Client凭据：<pre class="pre codeblock"><code>$ rhpctl修改客户端-client <span class="variable" translate="no">client_name</span> -password</code></pre><p>将数据从存储库导出到Fleet Patching and Provisioning Client数据文件：</p><pre class="pre codeblock"><code>$ rhpctl export client -client <span class="variable" translate="no">client_name</span> -clienetdata <span class="variable" translate="no">file_name</span> .xml</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>将您在上一步中创建的<code class="codeph">xml</code>文件复制到Fleet Patching and Provisioning Client集群中的节点，然后运行以下命令以更新客户端凭据：</span><div><pre class="pre codeblock"><code>$ srvctl修改rhpclient -clientdata <span class="variable" translate="no">file_name</span> .xml</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>启动Fleet Patching and Provisioning Client：</span><div><pre class="pre codeblock"><code>$ srvctl启动rhpclient</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>验证Fleet Patching和Provisioning Client是否已成功启动：</span><div><pre class="pre codeblock"><code>$ srvctl status rhpclient</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>要验证Fleet Patching和Provisioning Client是否已正确注册Fleet Patching and Provisioning Server，请运行以下命令并搜索命令输出中报告的Fleet Patching和Provisioning Client注册端口：</span><div><pre class="pre codeblock"><code>$ rhpctl查询客户端-client <span class="variable" translate="no">client_cluster</span></code></pre></div>
                     </li>
                  </ol>
               </div>
            </div>
            <div class="sect2"><a id="GUID-23BEE10D-F2CE-4785-83EE-21A7A7605A47" name="GUID-23BEE10D-F2CE-4785-83EE-21A7A7605A47"></a><h3 id="CWADD-GUID-23BEE10D-F2CE-4785-83EE-21A7A7605A47" class="sect3">使用群集资源活动日志来监视群集资源故障</h3>
               <div>
                  <p>群集资源活动日志提供有关资源故障的精确和特定信息，与诊断日志分开。</p>
                  <p>如果Oracle Clusterware管理的资源出现故障，则Oracle Clusterware会在Grid Infrastructure Management资源库中的<strong class="term">群集资源活动日志中</strong>记录有关故障的消息。由于资源，托管节点或网络出现问题，可能会发生故障。群集资源活动日志提供资源故障原因的统一视图。
                  </p>
                  <p>对集群资源活动日志的写入使用活动ID进行标记，并且任何相关数据都将获得相同的父活动ID，并嵌套在父数据下。例如，如果Oracle Clusterware正在运行并且您运行<code class="codeph">crsctl stop clusterware -all</code>命令，则所有活动都会获取活动ID，相关活动将使用相同的父活动ID进行标记。在每个节点上，该命令在父ID下创建子ID，并使用相应的活动ID标记每个相应的活动。此外，各个节点上的每个资源基于父ID创建子ID，从而创建活动ID的层次结构。通过活动ID层次结构，您可以分析数据以查找特定活动。
                  </p>
                  <p>例如，您可能拥有许多资源，这些资源之间具有复杂的依赖关系，并且具有数据库服务。星期五，您会看到所有资源都在一个节点上运行，但是当您在星期一返回时，每个资源都在不同的节点上，并且您想知道原因。使用<code class="codeph">crsctl query calog</code>命令，可以查询群集资源活动日志，以查找涉及这些资源和数据库服务的所有活动。输出提供了完整的流，您可以查询父服务故障转移ID中的每个子ID，并具体查看发生的情况和原因。
                  </p>
                  <p>您可以使用筛选器查询群集资源活动日志中的任意数量的字段。例如，您可以查询特定操作系统用户（如<code class="codeph">root</code>所写的所有活动。<code class="codeph">crsctl query calog</code>命令生成的输出可以以表格格式或XML格式显示。
                  </p>
                  <p>群集资源活动日志是当前Oracle Clusterware日志记录和警报日志消息的附件。</p>
                  <div class="p">
                     <div class="infoboxnote" id="GUID-23BEE10D-F2CE-4785-83EE-21A7A7605A47__GUID-2F538D6C-6113-4868-863F-C8E85B5C4BD1">
                        <p class="notep1">注意：</p>
                        <p>Oracle Clusterware不会将包含安全相关信息（如登录凭据）的消息写入群集活动日志。</p>
                     </div>
                  </div>
                  <p>使用以下命令管理和查看群集资源活动日志的内容：</p>
               </div>
               <div class="sect3"><a id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F" name="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F"></a><h4 id="CWADD-GUID-257FAEAB-3AD6-4255-98CA-6416787E948F" class="sect4">crsctl查询calog</h4>
                  <div>
                     <p>查询符合特定条件的群集资源活动日志。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-CF0852F7-006F-4F6B-8A22-D05050FC2132">句法</p><pre class="pre codeblock"><code>crsctl查询calog [-aftertime“ <span class="variable" translate="no">timestamp</span> ”] [-beforetime“ <span class="variable" translate="no">timestamp</span> ”] [ <span class="variable" translate="no">time_interval</span> “ <span class="variable" translate="no">time_interval</span> ”| -follow] [-filter“ <span class="variable" translate="no">filter_expression</span> ”] [-fullfmt | -xmlfmt]</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-90B37207-F8E4-43A5-8F9F-DF20E3761BD9">参数</p>
                        <div class="tblformal" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-07DFD5AA-1229-4E2A-81EB-19B1C39737F4">
                           <p class="titleintable">表K-1 crsctl查询calog命令参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="crsctl query calog命令参数" border="1" summary="Describes the crsctl query calog command parameters." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d199619e652">参数</th>
                                    <th align="left" valign="bottom" width="20%" id="d199619e654">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e658" headers="d199619e652 "><code class="codeph">- 时间“ <span class="variable" translate="no">timestamp</span> ”</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e658 d199619e654 ">
                                       <p>显示特定时间后记录的活动。</p>
                                       <p>在<code class="codeph">YYYY-MM-DD HH24:MI:SS[.指定时间戳<code class="codeph">YYYY-MM-DD HH24:MI:SS[.FF][TZH:TZM]</code>或<code class="codeph">YYYY-MM-DD</code>或<code class="codeph">HH24:MI:SS[.FF][TZH:TZM]</code>格式。
                                       </p>
                                       <p><code class="codeph">TZH</code>和<code class="codeph">TZM</code>代表时区小时和分钟， <code class="codeph">FF</code>代表微秒。
                                       </p>
                                       <p>如果指定<code class="codeph">[TZH:TZM]</code> ，则<code class="codeph">crsctl</code>命令将UTC视为时区。如果未指定<code class="codeph">[TZH:TZM]</code> ，则<code class="codeph">crsctl</code>命令将假定运行<code class="codeph">crsctl</code>命令的群集节点的本地时区。
                                       </p>
                                       <p>将此参数与<code class="codeph">-beforetime</code>一起使用可查询以特定时间间隔记录的活动。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e711" headers="d199619e652 "><code class="codeph">-foreforetime“ <span class="variable" translate="no">timestamp</span> ”</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e711 d199619e654 ">
                                       <p>显示特定时间之前记录的活动。</p>
                                       <p>在<code class="codeph">YYYY-MM-DD HH24:MI:SS[.指定时间戳<code class="codeph">YYYY-MM-DD HH24:MI:SS[.FF][TZH:TZM]</code>或<code class="codeph">YYYY-MM-DD</code>或<code class="codeph">HH24:MI:SS[.FF][TZH:TZM]</code>格式。
                                       </p>
                                       <p><code class="codeph">TZH</code>和<code class="codeph">TZM</code>代表时区小时和分钟， <code class="codeph">FF</code>代表微秒。
                                       </p>
                                       <p>如果指定<code class="codeph">[TZH:TZM]</code> ，则<code class="codeph">crsctl</code>命令将UTC视为时区。如果未指定<code class="codeph">[TZH:TZM]</code> ，则<code class="codeph">crsctl</code>命令将假定运行<code class="codeph">crsctl</code>命令的群集节点的本地时区。
                                       </p>
                                       <p>将此参数与<code class="codeph">-aftertime</code>一起使用可查询以特定时间间隔记录的活动。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e764" headers="d199619e652 "><code class="codeph"><span class="variable" translate="no">time_interval</span> “ <span class="variable" translate="no">time_interval</span> ”| -跟随</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e764 d199619e654 ">
                                       <p>使用<code class="codeph">-duration</code>指定在使用<code class="codeph">-aftertime</code>参数时要查询的时间间隔。
                                       </p>
                                       <p>以<code class="codeph">DD HH:MM:SS</code>格式指定时间戳。
                                       </p>
                                       <p>使用<code class="codeph">-follow</code>可在活动发生时显示连续的活动流。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e790" headers="d199619e652 "><code class="codeph">-filter“ <span class="variable" translate="no">filter_expression</span> ”</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e790 d199619e654 ">
                                       <p>使用<code class="codeph">-filter</code>参数查询群集资源活动日志中的任意数量的字段。
                                       </p>
                                       <p>要指定多个过滤器，请使用逗号分隔的过滤器表达式列表，并用双引号（ <code class="codeph">""</code> ）括起来。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e808" headers="d199619e652 "><code class="codeph">-fullfmt | -xmlfmt</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e808 d199619e654 ">
                                       <p>要显示群集资源活动日志数据，请选择完整或XML格式。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-4E5ED2CF-FFAF-4CE5-A08C-4308F7B4FEE6">群集资源活动日志字段</p>
                        <p>使用<code class="codeph">-filter</code>参数查询群集资源活动日志中的任意数量的字段。
                        </p>
                        <div class="tblformal" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-FAEB6A3B-F6B6-49F7-91B0-A288EF3A3285">
                           <p class="titleintable">表K-2群集资源活动日志字段</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="群集资源活动日志字段" border="1" summary="Describes the fields in the cluster resource activity log." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d199619e833">领域</th>
                                    <th align="left" valign="bottom" width="20%" id="d199619e835">描述</th>
                                    <th align="left" valign="bottom" width="20%" id="d199619e837">用例</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e841" headers="d199619e833 "><code class="codeph">时间戳</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e841 d199619e835 ">
                                       <p>记录群集资源活动的时间。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e841 d199619e837 ">
                                       <p>使用此过滤器查询在特定时间记录的所有活动。</p>
                                       <p>这是一种替代<code class="codeph">-aftertime</code> ， <code class="codeph">-beforetime</code>和<code class="codeph">-duration</code>命令参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e862" headers="d199619e833 "><code class="codeph">writer_process_id</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e862 d199619e835 ">
                                       <p>写入群集资源活动日志的进程的ID。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e862 d199619e837 ">
                                       <p>仅查询特定进程生成的活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e872" headers="d199619e833 "><code class="codeph">writer_process_name</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e872 d199619e835 ">
                                       <p>写入群集资源活动日志的进程的名称。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e872 d199619e837 ">
                                       <p>查询特定进程时，CRSCTL将返回特定进程的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e882" headers="d199619e833 "><code class="codeph">writer_user</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e882 d199619e835 ">
                                       <p>正在写入群集资源活动日志的用户的名称。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e882 d199619e837 ">
                                       <p>查询特定用户编写的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e892" headers="d199619e833 "><code class="codeph">writer_group</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e892 d199619e835 ">
                                       <p>正在写入群集资源活动日志的用户所属的组的名称。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e892 d199619e837 ">
                                       <p>查询属于特定用户组的用户编写的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e902" headers="d199619e833 "><code class="codeph">writer_hostname</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e902 d199619e835 ">
                                       <p>写入群集资源活动日志的主机的名称。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e902 d199619e837 ">
                                       <p>查询特定主机写入的所有活动。</p> 
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e913" headers="d199619e833 "><code class="codeph">writer_clustername</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e913 d199619e835 ">
                                       <p>写入群集资源活动日志的群集的名称。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e913 d199619e837 ">
                                       <p>查询特定集群写入的所有活动。</p> 
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e924" headers="d199619e833 "><code class="codeph">nls_product</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e924 d199619e835 ">
                                       <p>NLS消息的产品，例如<code class="codeph">CRS</code> ， <code class="codeph">ORA</code>或<code class="codeph">srvm</code> 。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e924 d199619e837 ">
                                       <p>查询具有特定产品名称的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e943" headers="d199619e833 "><code class="codeph">nls_facility</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e943 d199619e835 ">
                                       <p>NLS消息的功能，例如<code class="codeph">CRS</code>或<code class="codeph">PROC</code> 。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e943 d199619e837 ">
                                       <p>查询具有特定设施名称的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e959" headers="d199619e833 "><code class="codeph">nls_id</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e959 d199619e835 ">
                                       <p>NLS消息的ID，例如<span class="variable" translate="no">42008</span> 。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e959 d199619e837 ">
                                       <p>查询具有特定消息ID的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e972" headers="d199619e833 "><code class="codeph">nls_field_count</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e972 d199619e835 ">
                                       <p>NLS消息中的字段数。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e972 d199619e837 ">
                                       <p>使用大于，小于或等于<code class="codeph">nls_field_count</code>命令参数查询与NLS消息对应的所有活动。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e986" headers="d199619e833 "><code class="codeph">nls_field1</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e986 d199619e835 ">
                                       <p>NLS消息的第一个字段。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e986 d199619e837 ">
                                       <p>查询与NLS消息的第一个参数匹配的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e996" headers="d199619e833 "><code class="codeph">nls_field1_type</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e996 d199619e835 ">
                                       <p>NLS消息中第一个字段的类型。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e996 d199619e837 ">
                                       <p>查询与NLS消息的第一个参数的特定类型匹配的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1006" headers="d199619e833 "><code class="codeph">nls_format</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1006 d199619e835 ">
                                       <p>NLS消息的格式（例如， <samp class="msgph">资源'％s'）已被修改</samp> 。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1006 d199619e837 ">
                                       <p>查询与特定格式的NLS消息匹配的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1019" headers="d199619e833 "><code class="codeph">nls_message</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1019 d199619e835 ">
                                       <p>写入群集资源活动日志的整个NLS消息（例如， <samp class="msgph">Resource'ora.cvu'）已被修改</samp> 。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1019 d199619e837 ">
                                       <p>查询与特定NLS消息匹配的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1032" headers="d199619e833 "><code class="codeph">ACTID</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1032 d199619e835 ">
                                       <p>每个群集活动日志的唯一活动ID。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1032 d199619e837 ">
                                       <p>查询与特定ID匹配的所有活动。</p>
                                       <p>此外，仅指定部分<code class="codeph">actid</code>并列出<code class="codeph">actid</code>是活动ID子集的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1050" headers="d199619e833 "><code class="codeph">is_planned</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1050 d199619e835 ">
                                       <p>确认活动是否已计划。</p>
                                       <p>例如，如果用户在节点上发出命令<code class="codeph">crsctl stop crs</code> ，则堆栈停止并且资源退回。
                                       </p>
                                       <p>运行<code class="codeph">crsctl stop crs</code>命令会生成活动并登录到<code class="codeph">calog</code> 。由于这是计划的操作，因此<code class="codeph">is_planned</code>字段设置为true（1）。
                                       </p>
                                       <p>否则， <code class="codeph">is_planned</code>字段设置为false（0）。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1050 d199619e837 ">
                                       <p>查询所有计划或计划外活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1081" headers="d199619e833 "><code class="codeph">onbehalfof_user</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1081 d199619e835 ">
                                       <p>代表集群活动日志写入的用户的名称。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1081 d199619e837 ">
                                       <p>查询代表特定用户编写的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1091" headers="d199619e833 "><code class="codeph">entity_isoraentity</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1091 d199619e835 ">
                                       <p>确认记录了calog活动的实体是否是oracle实体。</p>
                                       <p>例如，如果启动或停止资源（例如<code class="codeph">ora.***</code> ，则会在群集资源活动日志中记录所有这些活动。
                                       </p>
                                       <p>由于<code class="codeph">ora.***</code>是Oracle实体，因此<code class="codeph">entity_isoraentity</code>字段设置为true（1）。
                                       </p>
                                       <p>否则， <code class="codeph">entity_isoraentity</code>字段设置为false（0）。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1091 d199619e837 ">
                                       <p>查询Oracle或非Oracle实体记录的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1119" headers="d199619e833 "><code class="codeph">ENTITY_TYPE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1119 d199619e835 ">
                                       <p>写入集群活动日志的实体类型，例如<span class="italic">服务器</span> 。
                                       </p> 
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1119 d199619e837 ">
                                       <p>查询与特定实体匹配的所有活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1133" headers="d199619e833 "><code class="codeph">实体名称</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1133 d199619e835 ">
                                       <p>实体的名称，例如，为其写入集群活动日志的<span class="variable" translate="no">foo</span> 。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1133 d199619e837 ">
                                       <p>查询与特定实体名称匹配的所有集群活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1146" headers="d199619e833 "><code class="codeph">entity_hostname</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1146 d199619e835 ">
                                       <p>与写入集群活动日志的实体关联的主机名称，例如<code class="codeph">node1</code> 。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1146 d199619e837 ">
                                       <p>查询与特定主机名匹配的所有群集活动。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1160" headers="d199619e833 "><code class="codeph">entity_clustername</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1160 d199619e835 ">
                                       <p>群集的名称，例如， <span class="variable" translate="no">cluster1</span>与其中群集活动日志写入该实体相关联。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1160 d199619e837 ">
                                       <p>查询与特定群集名称匹配的所有群集活动。</p>。
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-D8D0C7D3-859B-48AC-B9DA-C21897AC74A2">使用说明</p>
                        <p>使用布尔运算符将简单滤镜组合到称为表达式滤镜的表达式</p>
                        <p>用双引号（“”）括起时间戳和时间间隔。</p>
                        <p>将过滤器表达式括在双引号（“”）中。</p>
                        <p>将包含括号或空格的值括在单引号（''）中。</p>
                        <div class="p">如果未找到匹配的记录，则Oracle Clusterware Control（CRSCTL）实用程序将显示以下消息：<pre class="oac_no_warn" dir="ltr">CRS-40002：没有活动与查询匹配。</pre></div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-1A6A12DD-7827-480A-A716-2616AEF9E872">例子</p>
                        <p>过滤器的示例包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">"writer_user==root"</code> ：将显示限制为仅限root用户。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">"customer_data=='GEN_RESTART@SERVERNAME(rwsbi08)=StartCompleted~'"</code>限制所述显示器<code class="codeph">customer_data</code>具有指定值<code class="codeph">GEN_RESTART@SERVERNAME(node1)=StartCompleted~</code>
                              </p>
                           </li>
                        </ul>
                        <div class="p">要查询所有资源活动并以完整格式显示输出：<pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -fullfmt</span> ---- ACTIVITY START ----时间戳：2016-09-27 17：55：43.152000 writer_process_id：6538 writer_process_name：crsd.bin writer_user：root writer_group：root writer_hostname：node1 writer_clustername：cluster1-mb1 customer_data：CHECK_RESULTS = -408040060~nls_product：CRS nls_facility：CRS nls_id：2938 nls_field_count：1 nls_field1：ora.cvu nls_field1_type：25 nls_field1_len：0 nls_format：资源'％s'已被修改。nls_message：资源'ora.cvu'已被修改。actid：14732093665106538/1816699/1 is_planned：1 onbehalfof_user：grid onbehalfof_hostname：node1 entity_isoraentity：1 entity_type：resource entity_name：ora.cvu entity_hostname：node1 entity_clustername：cluster1-mb1 ---- ACTIVITY END ----</code></pre></div>
                        <div class="p">要查询所有资源活动并以XML格式显示输出：<pre class="pre codeblock"><code><span class="bold">$ crsctl查询calog -xmlfmt</span> &lt;？xml version =“1.0”encoding =“UTF-8”？&gt; &lt;activities&gt; &lt;activity&gt; &lt;timestamp&gt; 2016-09-27 17：55：43.152000 &lt;/ timestamp&gt; &lt;writer_process_id&gt; 6538 &lt;/ writer_process_id&gt; &lt;writer_process_name&gt; crsd.bin &lt;/ writer_process_name&gt; &lt;writer_user&gt; root &lt;/ writer_user&gt; &lt;writer_group&gt; root &lt;/ writer_group&gt; &lt;writer_hostname&gt; node1 &lt;/ writer_hostname&gt; &lt;writer_clustername&gt; cluster1-mb1 &lt;/ writer_clustername&gt; &lt;customer_data&gt; CHECK_RESULTS = -408040060~ &lt;/ customer_data&gt; &lt;nls_product&gt; CRS &lt;/ nls_product&gt; &lt;nls_facility&gt; CRS &lt;/ nls_facility&gt; &lt;nls_id&gt; 2938 &lt;/ nls_id&gt; &lt;nls_field_count&gt; 1 &lt;/ nls_field_count&gt; &lt;nls_field1&gt; ora.cvu &lt;/ nls_field1&gt; &lt;nls_field1_type&gt; 25 &lt;/ nls_field1_type&gt; &lt;nls_field1_len&gt; 0 &lt;/ nls_field1_len&gt; &lt;nls_format&gt;资源'％s'已被修改。&lt;/ nls_format&gt; &lt;nls_message&gt;资源'ora.cvu'已被修改。&lt;/ nls_message&gt; &lt;actid&gt; 14732093665106538/1816699/1 &lt;/ actid&gt; &lt;is_planned&gt; 1 &lt;/ is_planned&gt; &lt; onbehalfof_user&gt; grid &lt;/ onbehalfof_user&gt; &lt;onbehalfof_hostname&gt; node1 &lt;/ onbehalfof_hostname&gt; &lt;entity_isoraentity&gt; 1 &lt;/ entity_isoraentity&gt; &lt;entity_type&gt; resource &lt;/ entity_type&gt; &lt;entity_name&gt; ora.cvu &lt;/ entity_name&gt; &lt;entity_hostname&gt; node1 &lt;/ entity_hostname&gt; &lt;entity_clustername&gt; cluster1-mb1 &lt;/ entity_clustername&gt; &lt;/ activity&gt; &lt;/ activities&gt;</code></pre></div>
                        <div class="p">要在特定时间后查询两小时的资源活动，并以XML格式显示输出：<pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -aftertime“2016-09-28 17:55:43”-duration“0 02:00:00”-xmlfmt</span> &lt;？xml version =“1.0”encoding =“UTF-8”？&gt; &lt;activities&gt; &lt;activity&gt; &lt;timestamp&gt; 2016-09-28 17：55：45.992000 &lt;/ timestamp&gt; &lt;writer_process_id&gt; 6538 &lt;/ writer_process_id&gt; &lt;writer_process_name&gt; crsd.bin &lt;/ writer_process_name&gt; &lt;writer_user&gt; root &lt;/ writer_user&gt; &lt;writer_group&gt; root &lt;/ writer_group&gt; &lt;writer_hostname&gt; node1 &lt;/ writer_hostname&gt; &lt;writer_clustername&gt; cluster1-mb1 &lt;/ writer_clustername&gt; &lt;customer_data&gt; CHECK_RESULTS = 1718139884~ &lt;/ customer_data&gt; &lt;nls_product&gt; CRS &lt;/ nls_product&gt; &lt;nls_facility&gt; CRS &lt; / nls_facility&gt; &lt;nls_id&gt; 2938 &lt;/ nls_id&gt; &lt;nls_field_count&gt; 1 &lt;/ nls_field_count&gt; &lt;nls_field1&gt; ora.cvu &lt;/ nls_field1&gt; &lt;nls_field1_type&gt; 25 &lt;/ nls_field1_type&gt; &lt;nls_field1_len&gt; 0 &lt;/ nls_field1_len&gt; &lt;nls_format&gt;资源' ％s'已被修改。&lt;/ nls_format&gt; &lt;nls_message&gt;资源'ora.cvu'已被修改。&lt;/ nls_message&gt; &lt;actid&gt; 14732093665106538/1942009/1 &lt;/ actid&gt; &lt;is_planned&gt; 1 &lt;/ is_planned&gt; &lt;onbehalfof_user &gt; grid &lt;/ onbehalfof_user&gt; &lt;onbehalfof_hostname&gt; node1 &lt;/ onbehalfof_hostname&gt; &lt;entity_isoraentity&gt; 1 &lt;/ entity_isoraentity&gt; &lt;entity_type&gt; resource &lt;/ entity_type&gt; &lt;entity_name&gt; ora.cvu &lt;/ entity_name&gt; &lt;entity_hostname&gt; node1 &lt;/ entity_hostname&gt; &lt;entity_clustername&gt; cluster1-mb1 &lt;/ entity_clustername&gt; &lt;/ activity&gt; &lt;/ activities&gt;</code></pre></div>
                        <div class="p">要在特定时间查询资源活动：<pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -filter“timestamp =='2016-09-28 17：55：45.992000'”</span> 2016-09-28 17：55：45.992000：资源'ora.cvu'已被修改。 ：14732093665106538/1942009/1：</code></pre></div>
                        <p>使用过滤器<code class="codeph">writer_user</code>和<code class="codeph">customer_data</code>查询资源活动：</p>
                        <div class="p"><pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -filter“writer_user == root AND customer_data =='GEN_RESTART @ SERVERNAME（node1）= StartCompleted〜'” -  fullfmt</span></code></pre></div>
                        <p><span class="italic">要么</span></p>
                        <div class="p"><pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -filter“（writer_user == root）AND（customer_data =='GEN_RESTART @ SERVERNAME（node1）= StartCompleted~'）” -  fullfmt</span></code></pre></div>
                        <div class="p"><pre class="pre codeblock"><code>---- ACTIVITY START ----时间戳：2016-09-15 17：42：57.517000 writer_process_id：6538 writer_process_name：crsd.bin writer_user：root writer_group：root writer_hostname：node1 writer_clustername：cluster1-mb1 customer_data：GEN_RESTART @ SERVERNAME（ rwsbi08）= StartCompleted~nls_product：CRS nls_facility：CRS nls_id：2938 nls_field_count：1 nls_field1：ora.testdb.db nls_field1_type：25 nls_field1_len：0 nls_format：资源'％s'已被修改。nls_message：资源'ora.devdb.db'已被修改。actid：14732093665106538/659678/1 is_planned：1 onbehalfof_user：oracle onbehalfof_hostname：node1 entity_isoraentity：1 entity_type：resource entity_name：ora.testdb.db entity_hostname：node1 entity_clustername：cluster1-mb1 ---- ACTIVITY END ----</code></pre></div>
                        <div class="p">查询UTC + 08：00时间“2016-11-15 22:53:08”后生成的所有calog：<pre class="pre codeblock"><code>$ crsctl query calog -aftertime“2016-11-15 22:53:08 + 08:00”</code></pre></div>
                        <div class="p">查询UTC-08：00时间“2016-11-15 22:53:08”后生成的所有calog：<pre class="pre codeblock"><code>$ crsctl query calog -aftertime“2016-11-15 22：53：08-08：00”</code></pre></div>
                        <div class="p">通过使用微秒指定时间戳来查询所有calog：<pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -aftertime“2016-11-16 01：07：53.063000”</span> 2016-11-16 01：07：53.558000：资源'ora.cvu'已被修改。 ：14792791129816600/2580/7：2016-11-16 01：07：53.562000：清除'rwsam02'上的'ora.cvu'成功：14792791129816600/2580/8：</code></pre></div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634" name="GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634"></a><h4 id="CWADD-GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634" class="sect4">crsctl得到calog maxsize</h4>
                  <div>
                     <p>要存储Oracle Clusterware管理的资源活动信息，请查询分配给群集资源活动日志的最大空间。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634__GUID-84276244-DEF1-4D3B-9F55-BB87D201828A">句法</p><pre class="pre codeblock"><code>crsctl得到calog maxsize</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634__GUID-05A3462E-E66B-4F1A-8692-A6E0FD09302E">参数</p>
                        <p><code class="codeph">crsctl get calog maxsize</code>命令没有参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634__GUID-D341C513-599D-48BC-BBEF-CD3B2CD78365">例</p>
                        <p>以下示例返回分配给群集资源活动日志的最大空间以存储活动：</p><pre class="pre codeblock"><code><span class="bold">$ crsctl get calog maxsize</span> CRS-6760：Oracle集群活动日志的最大大小为1024 MB。</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-26CC9484-F06F-41DD-8796-19BD450171D7" name="GUID-26CC9484-F06F-41DD-8796-19BD450171D7"></a><h4 id="CWADD-GUID-26CC9484-F06F-41DD-8796-19BD450171D7" class="sect4">crsctl获得calog保留时间</h4>
                  <div>
                     <p>查询群集资源活动日志的保留时间。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-26CC9484-F06F-41DD-8796-19BD450171D7__GUID-4252DB18-2B26-4BA1-85A6-102D6169F6C8">句法</p><pre class="pre codeblock"><code>crsctl获得calog保留时间</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-26CC9484-F06F-41DD-8796-19BD450171D7__GUID-13653CE8-61A9-499E-A58D-08BF1751839D">参数</p>
                        <p><code class="codeph">crsctl get calog retentiontime</code>命令没有参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-26CC9484-F06F-41DD-8796-19BD450171D7__GUID-DC7EC2EF-872A-45D4-9D92-07B2C0DD34FE">例子</p>
                        <p>以下示例以小时数的形式返回群集活动日志的保留时间：</p><pre class="pre codeblock"><code><span class="bold">$ crsctl get calog retentiontime</span> CRS-6781：群集活动日志的保留时间为73小时。</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E" name="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E"></a><h4 id="CWADD-GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E" class="sect4">crsctl set calog maxsize</h4>
                  <div>
                     <p>配置分配的最大空间量，以存储Oracle Clusterware管理的资源活动信息。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E__GUID-80888B9B-549B-48A5-AA12-549F25FB41B9">句法</p><pre class="pre codeblock"><code>crsctl set calog maxsize <span class="variable" translate="no">maximum_size</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E__GUID-C0ADB4BE-0988-4443-8C40-E029E12AFB0F">使用说明</p>
                        <div class="p">指定要分配给群集资源活动日志的存储空间的最大大小的值（MB）。
                           <div class="infoboxnote" id="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E__GUID-F787C617-3896-4C48-9E21-6EF79DD76D4E">
                              <p class="notep1">注意：</p>如果减少存储空间量，则存储的内容将丢失。
                           </div>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E__GUID-BAD37F8E-4EDC-4C17-8D19-6C745C069B26">例</p>
                        <p>以下示例将用于存储Oracle Clusterware管理的资源活动信息的最大空间量设置为1024 MB：</p><pre class="pre codeblock"><code>$ crsctl set calog maxsize 1024</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B" name="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B"></a><h4 id="CWADD-GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B" class="sect4">crsctl设置calog保留时间</h4>
                  <div>
                     <p>配置群集资源活动日志的保留时间。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B__GUID-262646F1-3766-4965-8064-D4A6EEB2645D">句法</p><pre class="pre codeblock"><code>crsctl设定calog保留<span class="variable" translate="no">hours</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B__GUID-B558CCBC-1CBD-4AC3-939D-8FAF0B29C44F">参数</p>
                        <p><code class="codeph">crsctl set calog retentiontime</code>命令需要花费数小时作为参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B__GUID-5C396E67-8E77-428C-B9DC-E3FA0C493A0B">使用说明</p>
                        <p>指定群集资源活动日志的保留时间的值（以小时为单位）。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B__GUID-28B75581-88B3-458C-A491-530C4431E014">例子</p>
                        <p>以下示例将群集资源活动日志的保留时间设置为72小时：</p><pre class="pre codeblock"><code>$ crsctl set calog retentiontime 72</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CWADD91091"></a><div class="sect2"><a id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C" name="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C"></a><h3 id="CWADD-GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C" class="sect3">Oracle Clusterware诊断和警报日志数据</h3>
               <div>
                  <p>查看此内容以了解Oracle Clusterware如何使用ADR的特定于集群件的方面。</p>
                  <p>Oracle Clusterware使用Oracle数据库故障诊断基础结构来管理诊断数据及其警报日志。因此，大多数诊断数据驻留在自动诊断存储库（ADR）中，ADR是位于安装期间指定的基目录下的目录和文件的集合。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-67428E93-3592-4368-9240-EBFF06E099B6">ADR目录结构</p>
                  </div>
                  <!-- class="section" -->
                  <p>Oracle Clusterware ADR数据是在称为ADR基础的根目录下编写的。由于ADR以外的组件使用此目录，因此它也可以称为Oracle基础。您指定在Oracle Grid Infrastructure安装期间用作基础的文件系统路径，并且只有在重新安装Oracle Grid Infrastructure时才能更改。</p>
                  <p>ADR文件驻留在ADR主目录中。在给定主机上运行的Oracle Clusterware的ADR主目录始终具有以下结构：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_BASE</span> / diag / crs / <span class="italic">host_name</span> / crs</pre><p>在前面的示例中， <span class="italic"><code class="codeph">ORACLE_BASE</code></span>是您在安装Oracle Grid Infrastructure时指定的Oracle基本路径， <span class="italic"><code class="codeph">host_name</code></span>是主机的名称。在Windows平台上，此路径使用反斜杠（ <code class="codeph">\</code> ）分隔目录名称。
                  </p>
                  <p>在ADR主页下面是特定类型ADR数据的各种目录。最感兴趣的目录是<code class="codeph">incident</code> 。<code class="codeph">trace</code>目录包含Oracle Clusterware守护程序和命令行程序编写的所有正常（非事件）跟踪文件以及Oracle Clusterware警报日志的简单文本版本。该组织与Oracle Clusterware 12 <span class="italic">c第</span> 1版（12.1.0.2）之前的版本有很大不同，其中诊断日志文件是在每个守护程序的不同目录下编写的。
                  </p>
                  <p>要更改日志级别，请编辑<code class="codeph"><span class="variable" translate="no">ORACLE_BASE</span> /crsdata/ <span class="variable" translate="no">host_name</span> /crsdiag/ocrcheck.ini</code>文件。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-54C1A8E6-4380-4311-987B-BD5D31D3B93F">跟踪目录中的文件</p>
                     <p>从Oracle Clusterware 12 <span class="italic">c第</span> 1版（12.1.0.2）开始，Oracle Clusterware程序编写的诊断数据文件称为<span class="italic">跟踪文件，</span>并具有<code class="codeph">.trc</code>文件扩展名，并一起显示在<a id="d199619e2076" class="indexterm-anchor"></a> ADR主页的<code class="codeph">trace</code>子目录。这些文件的命名约定通常使用可执行程序名称作为文件名，可能根据程序类型使用其他数据进行扩充。
                     </p>
                     <p>Oracle Clusterware命令行程序编写的跟踪文件在跟踪文件名中包含操作系统进程ID（PID），以区分同一命令程序的多个调用中的数据。例如，CRSCTL写入的跟踪数据使用以下名称结构： <code class="codeph">crsctl_</code> <span class="italic"><code class="codeph">PID</code></span> <code class="codeph">.trc</code> 。在此示例中， <span class="italic"><code class="codeph">PID</code></span>是显示为十进制数字的操作系统进程ID。
                     </p>
                     <p>Oracle Clusterware守护程序程序编写的跟踪文件在文件名中不包含PID，并且它们还受到影响命名的文件轮换机制的影响。旋转意味着当前守护程序跟踪文件达到特定大小时，文件将关闭，重命名，并打开新的跟踪文件。这会发生固定次数，然后丢弃守护程序中最旧的跟踪文件，保持旋转设置为固定大小。</p>
                     <p>大多数Oracle Clusterware守护程序使用的文件大小限制为10 MB，旋转集大小为10个文件，因此总共保留了100 MB的跟踪数据。给定守护程序的当前跟踪文件只使用程序名称作为文件名;旋转中的旧文件会在文件名后附加一个数字。例如，Oracle高可用性服务守护程序（OHASD）当前正在写入的跟踪文件名为<code class="codeph">ohasd.trc</code> ;最近<code class="codeph">ohasd_</code>出的跟踪文件名为<code class="codeph">ohasd_</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">.trc</code> ，其中<span class="italic"><code class="codeph">n</code></span>是一个不断增加的十进制整数。具有最高<span class="italic"><code class="codeph">n</code></span>的文件实际上是最近存档的跟踪，具有最低<span class="italic"><code class="codeph">n</code></span>的文件是最早的。</p>
                     <p>Oracle Clusterware代理是守护程序，其跟踪文件受特殊命名约定的约束，这些约定指示代理的来源（无论是由OHASD还是Cluster Ready Services守护程序（CRSD）生成）和代理程序的操作系统用户名运行。因此，代理的名称结构是：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">origin_executable_user_name</span></pre><div class="infoboxnote" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-E0BC2361-A5A5-4718-A9EC-43A2088F9262">
                        <p class="notep1">注意：</p>
                        <p>名称结构中的前两个下划线（_）是文字的，并包含在跟踪文件名中。<span class="italic"><code class="codeph">user_name</code></span>的下划线不是文件命名约定的一部分。
                        </p>
                     </div>
                     <p>在前面的示例中， <span class="italic"><code class="codeph">origin</code></span>是<code class="codeph">ohasd</code>或<code class="codeph">crsd</code> ， <span class="italic"><code class="codeph">executable</code></span>是可执行程序名称， <span class="italic"><code class="codeph">user_name</code></span>是操作系统用户名。此外，由于它们是守护程序，因此代理程序跟踪文件受前面描述的旋转机制的约束，因此在发生旋转后会出现带有附加<span class="italic"><code class="codeph">_n</code></span>后缀的文件。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-6107731A-7797-4403-B671-2FD1EEA1B853">Oracle Clusterware警报日志</p>
                     <p>除了跟踪文件之外，Oracle Clusterware ADR主目录中的<code class="codeph">trace</code>子目录包含简单文本Oracle Clusterware警报日志。它的名称始终为<code class="codeph">alert.log</code> 。警报日志也作为XML文件写入ADR主目录的<code class="codeph">alert</code>子目录中，但最容易读取文本警报日志。
                     </p>
                     <p>当Oracle Clusterware出现问题或问题时，警报日志是第一个查看的日志。与Oracle数据库实例警报日志不同，Oracle Clusterware警报日志中的消息将被标识，记录和本地化（转换）。Oracle Clusterware警报消息是针对发生的大多数重要事件或错误编写的。</p>
                     <div class="infoboxnote" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-21BCA4C7-3C62-4D20-97D1-C770CC6D74DD">
                        <p class="notep1">注意：</p>
                        <p>写入Oracle Clusterware跟踪文件的消息和数据通常不会记录和翻译，主要由My Oracle Support用于问题诊断。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-40B53C6B-6395-43CB-B771-8228C9FDB045">事件跟踪文件</p>
                     <p>Oracle Clusterware程序中会出现某些错误，这些错误会引发ADR事件。在大多数情况下，应将这些错误报告给My Oracle Support进行诊断。事件的发生通常会在Oracle Clusterware警报日志中生成一条或多条描述性消息。</p>
                     <p>除了警报消息之外，事件还会导致受影响的程序产生特殊的，单独的<a id="d199619e2188" class="indexterm-anchor"></a>包含与错误相关的诊断数据的跟踪文件。这些特定于事件的跟踪文件收集在<a id="d199619e2191" class="indexterm-anchor"></a> ADR主目录的<code class="codeph">incident</code>子目录而不是<code class="codeph">trace</code>子目录。报告错误时，会收集正常跟踪文件和事件跟踪文件并将其提交给Oracle。
                     </p>
                     <div class="infoboxnotealso" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-F0DDF8AE-938F-4146-8BD4-B73500F8FC4E">
                        <p class="notep1">也可以看看：</p>
                        <p>有关事件和数据收集的更多信息，请参见<a href="../admin/diagnosing-and-resolving-problems.html#ADMIN11007" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-F7F6FF42-134B-47CA-9098-96064F33746C">其他诊断数据</p>
                     <p>除ADR数据外，Oracle Clusterware还会收集或使用与问题诊断相关的其他数据。从Oracle Clusterware 12 <span class="italic">c第</span> 1版（12.1.0.2）开始，此数据位于ADR使用的相同基本路径下，但在具有以下形式的单独目录结构中： <span class="italic"><code class="codeph">ORACLE_BASE</code></span> <code class="codeph">/crsdata/</code> <span class="italic"><code class="codeph">host_name</code></span> 。在此示例中， <span class="italic"><code class="codeph">ORACLE_BASE</code></span>是您在安装Grid Infrastructure时指定的Oracle基本路径， <span class="italic"><code class="codeph">host_name</code></span>是主机的名称。
                     </p>
                     <p>在此目录中，在给定主机上有几个子目录。如果出现问题，则最感兴趣的两个子目录被命名<a id="d199619e2236" class="indexterm-anchor"></a> <code class="codeph">core</code>和<a id="d199619e2243" class="indexterm-anchor"></a> <code class="codeph">output</code> 。当用于核心文件的正常ADR位置不可用时（例如，在程序中初始化ADR服务之前）， <code class="codeph">core</code>目录是Oracle Clusterware守护程序核心文件的编写位置。<code class="codeph">output</code>目录是Oracle Clusterware守护程序重定向其C标准输出和标准错误文件的位置。这些文件通常使用由可执行文件名称组成的名称结构，其中字符<span class="italic">OUT</span>附加到<code class="codeph">.trc</code>文件扩展名（如跟踪文件）。例如，Cluster Time Synchronization Service守护程序的重定向标准输出名为<code class="codeph">octssdOUT.trc</code> 。通常，守护进程对这些文件写的很少，但在某些故障情况下，可能会在那里写入重要数据。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../admin/diagnosing-and-resolving-problems.html#ADMIN11257" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a></li>
                        <li><a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span class="italic">Oracle数据库实用程序</span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="CWADD92990"></a><a id="CWADD92991"></a><a id="CWADD92992"></a><a id="CWADD92989"></a><div class="sect2"><a id="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537" name="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537"></a><h3 id="CWADD-GUID-50FAE797-1174-49DD-9FAB-A23E6A208537" class="sect3">诊断收集脚本</h3>
               <div>
                  <p>发生Oracle Clusterware错误时，运行<a id="d199619e2398" class="indexterm-anchor"></a><a id="d199619e2400" class="indexterm-anchor"></a> <code class="codeph">diagcollection.pl</code>诊断收集脚本，用于将Oracle Clusterware中的诊断信息收集到跟踪文件中。诊断程序提供了其他信息，因此My Oracle Support可以解决问题。从<span class="italic"><code class="codeph">Grid_home</code></span> <code class="codeph">/bin</code>目录以<code class="codeph">root</code>身份运行此脚本。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537__GUID-2C0F1195-BEF7-4ADE-8CF2-398F218B44C7">句法</p>
                  </div>
                  <!-- class="section" -->
                  <p>使用diagcollection.pl脚本，语法如下：</p><pre class="oac_no_warn" dir="ltr">diagcollection.pl {--collect [--crs | --acfs | -all] [--chmos [--incidenttime <span class="italic">time</span> [--incidentduration <span class="italic">time</span> ]]] [--adr <span class="italic">location</span> [--aftimeime <span class="italic">time</span> [--beforetime <span class="italic">time</span> ]]] [--crshome <span class="italic">path</span> | - 清洁| --coreanalyze}]</pre><div class="infoboxnote" id="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537__GUID-6C7BEBD2-583F-427A-B320-6B036317D2CA">
                     <p class="notep1">注意：</p>
                     <p><code class="codeph">diagcollection.pl</code>脚本参数前面都有两个破折号（ <code class="codeph">--</code> ）。
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537__GUID-86253E80-5DB1-46CC-A7E2-0FFBB63702F5">参数</p>
                  </div>
                  <!-- class="section" -->
                  <p><a href="troubleshooting-oracle-clusterware.html#GUID-50FAE797-1174-49DD-9FAB-A23E6A208537__CHDHFHDH" title="此表列出并描述了diagcollection.pl脚本使用的参数。">表K-3</a>列出并描述了<code class="codeph">diagcollection.pl</code>脚本使用的参数。
                  </p>
                  <div class="tblformal" id="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537__CHDHFHDH">
                     <p class="titleintable">表K-3 diagcollection.pl脚本参数</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="diagcollection.pl脚本参数" width="100%" border="1" summary="This table lists and describes parameters used with the diagcollection.pl script." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d199619e2471">参数</th>
                              <th align="left" valign="bottom" width="69%" id="d199619e2474">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d199619e2479" headers="d199619e2471 "><pre class="oac_no_warn" dir="ltr">- 搜集</pre></td>
                              <td align="left" valign="top" width="69%" headers="d199619e2479 d199619e2474 ">
                                 <p>将此参数与以下任何参数一起使用：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">--crs</code> ：使用此参数收集Oracle Clusterware诊断信息</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--acfs</code> ：使用此参数收集Oracle ACFS诊断信息</p>
                                       <p><span class="bold">注意：</span>您只能在UNIX系统上使用此参数。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--all</code> ：使用此参数收集除CHM（OS）数据之外的所有诊断信息</p>
                                       <p><span class="bold">注意：</span>这是默认值。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--chmos</code> ：使用此参数收集以下CHM诊断信息</p>
                                       <p><code class="codeph">--incidenttime</code> <span class="italic"><code class="codeph">time</code></span> ：使用此参数从指定时间收集CHM（OS）数据</p>
                                       <p><span class="bold">注意：</span>时间格式为MM / DD / YYYYHH24：MM：SS。</p>
                                       <p><code class="codeph">--incidentduration</code> <span class="italic"><code class="codeph">time</code></span> ：将此参数与<code class="codeph">--incidenttime</code>一起使用，以在指定时间后收集CHM（OS）数据</p>
                                       <p><span class="bold">注意：</span>时间格式为HH：MM。如果不使用<code class="codeph">--incidentduration</code> ，则会收集在<code class="codeph">--incidenttime</code>指定的时间之后的所有CHM（OS）数据。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--adr</code> <span class="italic"><code class="codeph">location</code></span> ：自动诊断存储库命令解释程序（ADRCI）使用此参数指定用于收集ADR诊断信息的位置</p>
                                       <p><span class="bold">另请参阅：</span> <a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span class="italic">Oracle数据库实用程序</span></a> ，以获取有关ADRCI的更多信息</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--aftertime</code> <span class="italic"><code class="codeph">time</code></span> ：将此参数与<code class="codeph">--adr</code>参数一起使用，以在指定时间后收集存档</p>
                                       <p><span class="bold">注意：</span>时间格式为YYYYMMDDHHMISS24。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--beforetime</code> <span class="italic"><code class="codeph">time</code></span> ：将此参数与<code class="codeph">--adr</code>参数一起使用，以在指定时间之前收集存档</p>
                                       <p><span class="bold">注意：</span>时间格式为YYYYMMDDHHMISS24。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--crshome</code> <span class="italic"><code class="codeph">path</code></span> ：使用此参数覆盖Oracle Clusterware主目录的位置</p>
                                       <p><span class="bold">注意：</span> <code class="codeph">diagcollection.pl</code>脚本通常从系统配置（ <code class="codeph">olr.loc</code>文件或Windows注册表）派生Oracle Clusterware主目录的位置，因此不需要此参数。
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d199619e2611" headers="d199619e2471 "><pre class="oac_no_warn" dir="ltr">- 清洁</pre></td>
                              <td align="left" valign="top" width="69%" headers="d199619e2611 d199619e2474 ">
                                 <p>使用此参数可清除<code class="codeph">diagcollection.pl</code>脚本收集的诊断信息。
                                 </p>
                                 <p><span class="bold">注意：</span>您不能将此参数与<code class="codeph">--collect</code>一起<code class="codeph">--collect</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d199619e2628" headers="d199619e2471 "><pre class="oac_no_warn" dir="ltr">--coreanalyze</pre></td>
                              <td align="left" valign="top" width="69%" headers="d199619e2628 d199619e2474 ">
                                 <p>使用此参数从核心文件中提取信息并将其存储在文本文件中。</p>
                                 <p><span class="bold">注意：</span>您只能在UNIX系统上使用此参数。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-604188B0-3984-4192-A33E-048145B42E36" name="GUID-604188B0-3984-4192-A33E-048145B42E36"></a><h3 id="CWADD-GUID-604188B0-3984-4192-A33E-048145B42E36" class="sect3">Oracle Extended Clusters中的存储拆分</h3>
               <div>
                  <p>当两个或多个不同站点之间的专用网络可用且处于联机状态但存储网络发生故障时，会发生存储拆分。</p>
                  <p>当Oracle自动存储管理（Oracle ASM）在具有三个站点（两个数据站点和仲裁站点）的典型扩展群集配置中检测到存储拆分时，其中一个数据站点将终止并隔离自身及其包含的其余节点集群。如果Oracle ASM尝试在隔离的站点上启动，则会发生错误CRS-2971。</p>
                  <p>解决问题，如下：</p>
                  <ol id="GUID-604188B0-3984-4192-A33E-048145B42E36__OL_WRJ_DBZ_1GB">
                     <li>解决导致存储拆分的站点间连接问题。</li>
                     <li>确保所有Oracle ASM磁盘组都安装在未隔离的站点上，如下所示：<pre class="pre codeblock"><code>SELECT group_number，name，state FROM v $ asm_diskgroup_stat;</code></pre></li>
                     <li>通过对每个磁盘组运行以下命令，获取属于这些磁盘组的联机磁盘列表：<pre class="pre codeblock"><code>SELECT路径FROM v $ asm_disk_stat WHERE group_number = <span class="variable" translate="no">group_number</span> AND state ='NORMAL'AND mode_status ='ONLINE';</code></pre></li>
                     <li>对于您在上一步中获得的每条路径，请确保可以从隔离的站点访问磁盘，如下所示：<pre class="pre codeblock"><code>asmcmd lsdsk -I  - 成员' <span class="variable" translate="no">path</span> '</code></pre></li>
                     <li>如果上述验证成功，则重新启动隔离的站点，如下所示：<pre class="pre codeblock"><code>crsctl修改集群站点<span class="variable" translate="no">site_name</span> -s rejuvenate</code></pre></li>
                  </ol>
               </div>
            </div><a id="CWADD92959"></a><div class="sect2"><a id="GUID-545CEDAE-8A83-405B-86C1-2410DD6DDDBB" name="GUID-545CEDAE-8A83-405B-86C1-2410DD6DDDBB"></a><h3 id="CWADD-GUID-545CEDAE-8A83-405B-86C1-2410DD6DDDBB" class="sect3">滚动升级和驱动程序安装问题</h3>
               <div>
                  <p>在升级期间，在运行Oracle Clusterware <code class="codeph">root.sh</code>脚本时，您可能会看到以下消息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>ACFS-9427无法卸载ADVM / ACFS驱动程序。建议重启系统。</p>
                     </li>
                     <li>
                        <p>ACFS-9428无法加载ADVM / ACFS驱动程序。建议重启系统。</p>
                     </li>
                  </ul>
                  <p>如果在升级初始（第一个）节点期间看到这些错误消息，请执行以下操作：</p>
                  <ol>
                     <li>
                        <p>完成群集中所有其他节点的升级。</p>
                     </li>
                     <li>
                        <p>重新启动初始节点。</p>
                     </li>
                     <li>
                        <p>再次在初始节点上运行<code class="codeph">root.sh</code>脚本。
                        </p>
                     </li>
                     <li>
                        <p>以安装Oracle Grid Infrastructure的用户身份运行<code class="codeph"><span class="variable" translate="no">Grid_home</span> /gridSetup -executeConfigTools</code>脚本以完成升级。
                        </p>
                     </li>
                  </ol>
                  <p>对于初始节点以外的节点（开始安装的节点）：</p>
                  <ol>
                     <li>
                        <p>重新启动发生错误的节点。</p>
                     </li>
                     <li>
                        <p>在发生错误的节点上以<code class="codeph">root</code>身份运行<code class="codeph">orainstRoot.sh</code>脚本。
                        </p>
                     </li>
                     <li>
                        <p>将目录更改为Grid主目录，并在发生错误的节点上运行<code class="codeph">root.sh</code>脚本。
                        </p>
                     </li>
                  </ol>
               </div>
            </div><a id="CWADD92399"></a><div class="sect2"><a id="GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B" name="GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B"></a><h3 id="CWADD-GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B" class="sect3">测试区域委派</h3>
               <div>
                  <div class="infoboxnotealso" id="GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B__GUID-A2C7F93F-C129-412D-A910-3E0122D04682">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用此过程中引用的CRSCTL命令的信息，请<a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-1A6774CF-FD5F-463E-817F-34E4466443C7" title="CRSCTL是您与Oracle Clusterware之间的接口，用于解析和调用Oracle Clusterware API的Oracle Clusterware API。有关使用CRSCTL命令行界面的信息。在Oracle RAC或Oracle Restart环境中使用这些命令。检查群集同步服务的状态。检查事件管理器的状态。检索本地服务器的主机名。注册要由Oracle Clusterware管理的资源。从Oracle Clusterware配置中删除资源。预测在不更改系统的情况下添加资源的效果。预测资源失败的后果。模拟重新定位资源而不更改系统。预测在不更改系统的情况下修改资源的效果。预测在不更改系统的情况下启动资源的影响。预测在不更改系统的情况下停止资源的效果。显示指定资源的用户和组权限。修改Oracle Clusterware中特定资源的属性。将资源重定位到群集中的另一台服务器。重新启动集群中的空闲资源，而不必运行两个命令来停止和启动资源。设置特定资源的权限。在群集中的特定服务器上启动空闲资源。获取任意数量的特定资源的状态和配置信息。停止运行资源。根据资源组类型创建资源组。对指定组的所有成员资源启动检查操作。从Oracle Clusterware中删除一个或多个资源组。预测添加资源组而不更改系统的影响。预测资源失败的后果。预测在不更改系统的情况下重新定位资源组的效果。预测启动资源组而不更改系统的影响。预测在不更改系统的情况下停止资源组的效果。将资源组及其成员资源的完整信息和属性导出到脚本文件。修改资源组以添加属性或更新现有属性的值。将联机资源组从源服务器重定位到目标服务器。在它们当前所在的服务器上重新启动资源组。在特定或预配置的服务器或服务器池上启动一个或多个资源组。显示资源组的状态。在可选指定的预配置服务器或服务器池上停止一个或多个资源组。在Oracle Clusterware中注册新的资源组类型。从Oracle Clusterware中删除一个或多个资源组类型。修改资源组类型以添加属性或更新现有属性的值。返回特定模块的跟踪设置。设置特定模块的跟踪参数。在Oracle Clusterware中创建资源类型。从Oracle Clusterware配置中删除资源类型。获得特定资源类型的权限。修改现有资源类型。设置特定资源类型的资源的权限。获取一个或多个特定资源类型的配置信息。创建并添加用户到钱包。从钱包中删除钱包或用户。修改特定钱包中特定用户的密码。从钱包中查询低权限用户。您只能在Oracle RAC环境中使用以下命令。对特定资源执行特定操作。添加服务器类别。删除服务器类别。修改现有服务器类别。获取有关服务器类别的信息。从群集中的任何节点检查Oracle Clusterware堆栈的状态。在群集中的任何节点上运行时启动Oracle Clusterware堆栈。在群集中的任何节点上运行命令时，停止群集中的所有服务器或特定服务器上的Oracle Clusterware堆栈。获取集群类信息。显示集群配置信息。从用于保护节点间通信的禁用密码套件列表添加密码套件或从中删除密码套件。确定群集是否为扩展群集。获取Oracle Flex Cluster中Hub节点的值。设置Oracle Flex Cluster的最大Hub节点数。确定是否为Oracle Flex Clusters配置了群集或获取当前状态。将标准群集更改为Oracle Flex群集。显示当前群集名称。使用crsctl add cluster site命令将站点添加到扩展群集。使用crsctl delete cluster site命令从扩展群集中删除特定站点。修改扩展群集中站点的配置。显示扩展群集中的站点信息。列出传输层安全性使用的可用密码套件，用于保护节点间通信。使用crsctl get cluster type命令确定群集是Oracle Flex群集还是应用程序群集。设置集群的类型。crsctl get cpu equivalency命令获取CPU_EQUIVALENCY服务器配置属性的值。crsctl set cpu equivalency命令为CPU_EQUIVALENCY服务器配置属性设置一个值。检查本地服务器上的Oracle高可用性服务和Oracle Clusterware堆栈的状态。显示Oracle高可用性服务自动启动配置。在服务器引导时阻止Oracle高可用性服务的自动启动。在服务器引导时启用Oracle高可用性服务的自动启动。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。显示群集中运行的Oracle Clusterware软件的活动版本和已配置的修补程序级别。将用户添加到群集管理员列表中。从Oracle Clusterware管理员列表中删除用户。显示具有Oracle Clusterware管理权限的用户列表。获取Oracle Clusterware自动资源启动条件的值。设置Oracle Clusterware自动资源启动条件。显示在修补节点时在Grid Home修补程序存储库中更新的修补程序级别。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的版本。使用crsctl query crs site命令确定特定主机或磁盘所属的站点。显示已安装的Oracle Clusterware的已配置修补程序级别。显示已在指定节点上成功启动的软件的最新版本。获取特定Cluster Synchronization Services参数的值。引发许多特定节点。设置Cluster Synchronization Services参数的值。取消许多服务器。取消设置Cluster Synchronization Services参数的值并将其恢复为默认值。检索存储在本地智能平台管理接口（IPMI）设备的Oracle本地注册表中的地址。存储Oracle本地注册表中本地智能平台管理接口（IPMI）设备的地址。存储Oracle本地注册表中智能平台管理界面（IPMI）管理员的登录凭据。确定本地服务器上的Oracle Clusterware是否已配置为使用IPMI进行故障隔离。清除Oracle本地注册表中以前存储的所有IPMI配置（登录凭据和IP地址）。确定本地系统上是否存在智能平台管理接口（IPMI）驱动程序。列出禁用自动重新启动群集同步服务的问题。发生特定问题时停止自动重新启动群集同步服务。从Oracle Clusterware配置中删除投票文件。显示群集同步服务使用的投票文件，投票文件的状态以及磁盘的位置，无论它们是存储在Oracle ASM中还是存储在其他位置。检查群集时间同步服务的状态。在指定端口的网络上发送DHCP发现数据包。如果网络上存在DHCP服务器，则它们会响应发现消息并且命令成功。显示Oracle Clusterware代理用于从DHCP服务器获取已配置群集资源的IP地址的客户端ID。VIP类型是必需的。向特定客户端ID发送DHCP租约释放请求，并将网络上的释放数据包发送到特定端口。将网络上的DHCP请求报文发送到指定端口。替换用于查找投票文件的现有发现字符串。获取DNS查找具有指定DNS服务器的名称返回的地址列表。使用指定的子网掩码在指定接口上启动给定的IP名称或IP地址。检查网络上的给定IP地址是否已启动。使用指定的子网掩码停止指定接口上的给定IP名称或IP地址。列出可以调试的模块的组件。为新成员集群创建配置部署文件。删除成员集群配置。显示成员集群的配置。从群集中删除节点。获取本地节点的名称。获取群集中节点的已配置节点角色。将配置策略添加到策略集。从策略集中删除配置策略。预测在不更改系统的情况下激活特定策略的效果。修改现有配置策略。获取配置策略的状态和定义。以文本文件的形式创建一个反映服务器池配置的策略集。修改现有策略集。获取策略集中的当前策略，包括访问控制列表，该列表管理谁可以修改集，最后激活的策略以及现在生效的配置（称为当前策略）。在特定资源的特定于应用程序的代理程序内启动检查操作。将资源重定位到群集中的另一台服务器。检查RESOURCE_USE_ENABLED服务器配置参数的当前设置值。为运行此命令的服务器设置RESOURCE_USE_ENABLED服务器配置参数的值。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动升级模式。模拟添加服务器而不更改系统。预测删除服务器而不更改系统的影响。预测在不更改系统的情况下将服务器重定位到其他服务器池的影响。修改特定服务器的配置。将服务器重定位到其他服务器池。获取一个或多个特定服务器的状态和配置信息。获取CSS_CRITICAL服务器属性的当前配置值设置CSS_CRITICAL服务器属性的配置值。检查SERVER_LABEL服务器属性的当前设置值。为运行此命令的服务器设置SERVER_LABEL服务器配置属性的配置值。添加用于将非数据库资源（例如应用程序服务器）托管到Oracle Clusterware的服务器池。从Oracle Clusterware配置中删除服务器池。预测添加服务器池而不更改系统的影响。模拟删除服务器池而不更改系统。使用crsctl eval modify serverpool命令可预测修改服务器池的效果，而无需更改系统。此命令可能对群集管理员有用。检索特定服务器池的权限。修改现有服务器池。设置特定服务器池的权限。检索一个或多个特定服务器池的状态和配置信息。验证守护程序是否可以侦听指定的地址和端口。启动将侦听指定IP地址和端口的测试DNS服务器。查询在指定地址和本地主机名上运行的测试DNS服务器。停止测试DNS服务器。移动或替换现有的投票文件。您只能在Oracle Restart环境中使用这些命令。检查ohasd的状态。显示服务器上Oracle高可用性服务堆栈的自动启动配置。在服务器启动时禁用Oracle High Availability Services堆栈的自动启动。在服务器启动时启用Oracle High Availability Services堆栈的自动启动。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的发行版本。显示本地节点上的软件版本。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。您可以使用crsctl set log命令作为root用户，以便为群集就绪服务（CRS），群集同步服务（CSS），事件管理器（EVM）和群集件子组件启用动态调试。设置Oracle Clusterware的日志级别。您可以通过设置环境变量或运行crsctl set log命令来启用Oracle Clusterware模块及其组件和资源的调试。">参见Oracle Clusterware Control（CRSCTL）实用程序参考</a></p>
                  </div>
                  <p>使用以下过程测试区域委派：</p>
                  <ol>
                     <li>
                        <p>以<code class="codeph">root</code>身份运行以下命令启动GNS VIP：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">#crsctl</span> start ip -A <span class="italic">IP_name</span> / <span class="italic">netmask</span> / <span class="italic">interface_name</span>
</pre><p><span class="italic"><code class="codeph">interface_name</code></span>应该是公共网络的公共接口和网络掩码。
                        </p>
                     </li>
                     <li>
                        <p>通过运行以下命令在GNS VIP上启动测试DNS服务器（如果端口号小于1024，则必须以<code class="codeph">root</code>身份运行此命令）：</p><pre class="oac_no_warn" dir="ltr">#crsctl start testdns -address <span class="italic">address</span> [-port <span class="italic">port</span> ]</pre><p>此命令启动测试DNS服务器以侦听指定IP和端口上的DNS转发数据包。</p>
                     </li>
                     <li>
                        <p>通过以<code class="codeph">root</code>身份运行以下命令，确保可以从其他节点访问GNS VIP：</p><pre class="oac_no_warn" dir="ltr">crsctl status ip -A <span class="italic">IP_name</span>
</pre></li>
                     <li>
                        <p>通过运行以下命令直接查询DNS服务器：</p><pre class="oac_no_warn" dir="ltr">crsctl query dns -name <span class="italic">name</span> -dnsserver <span class="italic">DNS_server_address</span>
</pre><p>此命令失败，并显示以下错误：</p>
                        <p><span class="bold">CRS-10023：</span>域名查找名称asdf.foo.com失败。操作系统错误：主机名查找失败</p>
                        <p>查看<span class="italic"><code class="codeph">Grid_home</code></span> <code class="codeph">/log/</code> <span class="italic"><code class="codeph">host_name</code></span> <code class="codeph">/client/odnsd_*.log</code>以查看测试DNS服务器是否收到了查询。这验证了DNS查询未被防火墙阻止。
                        </p>
                     </li>
                     <li id="GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B__CHDBGJEE">
                        <p>通过运行以下命令查询GNS域查询的DNS委派：</p><pre class="oac_no_warn" dir="ltr">crsctl查询dns -name <span class="italic">名称</span></pre><div class="infoboxnote" id="GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B__GUID-9308DBCF-E4AB-42E0-B21B-219142FC7CBB">
                           <p class="notep1">注意：</p>
                           <p>此步骤与上一步骤之间的唯一区别是您未提供<code class="codeph">-dnsserver</code> <span class="italic"><code class="codeph">DNS_server_address</code></span>选项。这会导致命令查询<code class="codeph">/etc/resolv.conf</code>配置的名称服务器。与上一步一样，命令失败并出现相同的错误。再次，查看<code class="codeph">odnsd*.log</code>以确保<code class="codeph">odnsd</code>收到查询。如果步骤<a href="troubleshooting-oracle-clusterware.html#GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B__CHDBGJEE">5</a>成功但步骤6没有，则必须检查DNS配置。
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>运行以下命令停止测试DNS服务器：</p><pre class="oac_no_warn" dir="ltr">crsctl stop testdns -address <span class="italic">address</span>
</pre></li>
                     <li>
                        <p>通过以<code class="codeph">root</code>身份运行以下命令来停止GNS VIP：</p><pre class="oac_no_warn" dir="ltr">crsctl stop ip -A <span class="italic">IP_name</span> / <span class="italic">netmask</span> / <code class="codeph">interface_name</code></pre></li>
                  </ol>
               </div>
            </div><a id="CWADD91086"></a><div class="sect2"><a id="GUID-FA795984-F89F-4D2F-8A06-5AE37FBC416E" name="GUID-FA795984-F89F-4D2F-8A06-5AE37FBC416E"></a><h3 id="CWADD-GUID-FA795984-F89F-4D2F-8A06-5AE37FBC416E" class="sect3">Oracle Clusterware警报</h3>
               <div>
                  <p>Oracle Clusterware将消息写入ADR警报日志文件（如前所述），以用于各种重要事件。警报日志消息通常被本地化（翻译）并携带消息标识符，该标识符可用于查找关于消息的附加信息。如果Oracle Clusterware出现问题，则首先要查看警报日志。</p>
                  <p>以下是来自两个不同的警报日志消息的示例<a id="d199619e3405" class="indexterm-anchor"></a><a id="d199619e3409" class="indexterm-anchor"></a><a id="d199619e3413" class="indexterm-anchor"></a> CRS守护程序进程：</p><pre class="oac_no_warn" dir="ltr">2014-07-16 00：27：22.074 [CTSSD（12817）] CRS-2403：主机stnsp014上的群集时间同步服务处于观察者模式。2014-07-16 00：27：22.146 [CTSSD（12817）] CRS-2407：新的群集时间同步服务参考节点是主机stnsp013。2014-07-16 00：27：22.753 [CTSSD（12817）] CRS-2401：群集时间同步服务在主机stnsp014上启动。2014-07-16 00：27：43.754 [CRSD（12975）] CRS-1012：OCR服务在节点stnsp014上启动。2014-07-16 00：27：46.339 [CRSD（12975）] CRS-1201：CRSD在节点stnsp014上启动。
</pre><p>以下示例显示了群集重新配置后Oracle Cluster Time Synchronization Service（OCTSS）的启动：</p><pre class="oac_no_warn" dir="ltr">2014-07-15 23：51：17.532 [CTSSD（12813）] CRS-2403：主机stnsp014上的群集时间同步服务处于观察者模式。2014-07-15 23：51：18.292 [CTSSD（12813）] CRS-2407：新的群集时间同步服务参考节点是主机stnsp013。2014-07-15 23：51：18.961 [CTSSD（12813）] CRS-2401：群集时间同步服务在主机stnsp014上启动。</pre></div><a id="CWADD92956"></a><div class="sect3"><a id="GUID-1D16C5C9-DF65-4214-BB95-AACF18371548" name="GUID-1D16C5C9-DF65-4214-BB95-AACF18371548"></a><h4 id="CWADD-GUID-1D16C5C9-DF65-4214-BB95-AACF18371548" class="sect4">警报消息使用诊断记录唯一ID</h4>
                  <div>
                     <p>从Oracle Database <span class="italic">11g第</span> 2版（11.2）开始，某些Oracle Clusterware消息包含由“ <code class="codeph">(:</code> ”和“ <code class="codeph">:)</code> ”包围的文本标识符。通常，标识符是以“ <code class="codeph">Details in...</code> ”开头的消息文本的一部分，包括Oracle Clusterware诊断日志文件路径和名称，类似于以下示例。标识符称为a <a id="d199619e3554" class="indexterm-anchor"></a> DRUID或诊断记录唯一ID：</p><pre class="oac_no_warn" dir="ltr">2014-07-16 00：18：44.472 [ORAROOTAGENT（13098）] CRS-5822：代理'/scratch/12.1/grid/bin/orarootagent_root'与服务器断开连接。详细信息（/ CRSAGF00117 :)位于/scratch/12.1/grid/log/stnsp014/agent/crsd/orarootagent_ root / orarootagent_root.log。
</pre><p>DRUID用于将外部产品消息与诊断日志文件中的条目和内部Oracle Clusterware程序代码位置相关联。它们对客户没有直接意义，主要由My Oracle Support在诊断问题时使用。</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
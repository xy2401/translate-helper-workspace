<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_XA package contains the XA/Open interface for applications to call XA interface in PL/SQL. Using this package, application developers can switch or share transactions across SQL*Plus sessions or processes using PL/SQL."></meta>
      <meta name="description" content="The DBMS_XA package contains the XA/Open interface for applications to call XA interface in PL/SQL. Using this package, application developers can switch or share transactions across SQL*Plus sessions or processes using PL/SQL."></meta>
      <title>DBMS_XA</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_XA package contains the XA/Open interface for applications to call XA interface in PL/SQL. Using this package, application developers can switch or share transactions across SQL*Plus sessions or processes using PL/SQL."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_WORKLOAD_REPOSITORY.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_XDB.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_WORKLOAD_REPOSITORY.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_XDB.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_XA</li>
            </ol>
            <a id="GUID-2651DDA5-02B7-4432-9843-C07E1F52E904" name="GUID-2651DDA5-02B7-4432-9843-C07E1F52E904"></a><a id="ARPLS209"></a><a id="ARPLS209"></a>
            
            <h2 id="ARPLS-GUID-2651DDA5-02B7-4432-9843-C07E1F52E904" class="sect2"><span class="enumeration_chapter">185</span> DBMS_XA</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_XA</code>包中包含XA / Open接口，供应用程序在PL / SQL中调用XA接口。使用此包，应用程序开发人员可以使用PL / SQL跨SQL * Plus会话或进程切换或共享事务。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_XA.html#GUID-3244BEBB-110C-46DE-86B9-783E9F11C943" title="这些子程序允许PL / SQL应用程序定义全局事务分支ID（XID），并将当前会话与事务分支关联或取消关联。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XA.html#GUID-FFF8E2A1-B242-4A29-87EA-C65A5113F4DB" title="此包在SYS下创建。此程序包提供的操作在当前调用用户下执行，而不是在程序包所有者SYS下执行。使用当前用户的权限执行从匿名PL / SQL块调用的任何DBMS_XA子程序。从存储过程调用的任何DBMS_XA子程序都是使用存储过程所有者的权限执行的。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643" title="DBMS_XA包定义了几个可用于指定参数值的常量。">常量</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XA.html#GUID-40814FCC-E43B-411A-A27D-AC63DF20732E" title="根据分布式事务处理的X / Open CAE标准的XA规范，当事务仍与当前会话关联时，可能不会调用XA_PREPARE / COMMIT / ROLLBACK / FORGET。只有在调用XA_END以便没有与当前会话关联的任何事务之后，应用程序才可以调用XA_PREPARE / COMMIT / ROLLBACK / FORGET。">操作说明</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XA.html#GUID-BAB2807B-7F40-463F-BEA3-0253944BE576" title="DBMS_XA包使用此OBJECT类型和关联的TABLE类型。">数据结构</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XA.html#GUID-F21B6DFA-2785-49B3-BFF0-CAC7181C5FA9" title="该表列出了DBMS_XA子程序并简要描述了它们。">DBMS_XA子程序摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-2651DDA5-02B7-4432-9843-C07E1F52E904__GUID-B917CB66-A2CC-4E80-8781-5B219A41647E">
                  <p class="notep1">也可以看看：</p>
                  <p>有关<a href="../adfns/xa.html#ADFNS017" target="_blank">“使用Oracle XA开发应用程序</a> <span class="italic">”</span>的更多信息<a href="../adfns/xa.html#ADFNS017" target="_blank">，请参见“</a> <span class="italic">Oracle数据库高级应用程序开发人员指</span> 
                  </p>
               </div>
            </div><a id="ARPLS69151"></a><a id="ARPLS69151"></a><div class="props_rev_3"><a id="GUID-3244BEBB-110C-46DE-86B9-783E9F11C943" name="GUID-3244BEBB-110C-46DE-86B9-783E9F11C943"></a><h3 id="ARPLS-GUID-3244BEBB-110C-46DE-86B9-783E9F11C943" class="sect3"><span class="enumeration_section">185.1</span> DBMS_XA概述</h3>
               <div>
                  <p>这些子程序允许PL / SQL应用程序定义全局事务分支ID（ <code class="codeph">XID</code> ），并将当前会话与事务分支关联或取消关联。
                  </p>
                  <div class="section">
                     <p>随后，可以通过遵循两阶段提交协议来准备和提交这些事务分支。如果仅涉及一个资源管理器，则还支持单阶段提交协议。</p>
                     <p>还为PL / SQL应用程序提供了接口，以便为可能从当前会话开始的任何新全局事务分支设置超时值。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS69152"></a><a id="ARPLS69152"></a><div class="props_rev_3"><a id="GUID-FFF8E2A1-B242-4A29-87EA-C65A5113F4DB" name="GUID-FFF8E2A1-B242-4A29-87EA-C65A5113F4DB"></a><h3 id="ARPLS-GUID-FFF8E2A1-B242-4A29-87EA-C65A5113F4DB" class="sect3"><span class="enumeration_section">185.2</span> DBMS_XA安全模型</h3>
               <div>
                  <p>此包在<code class="codeph">SYS</code>下创建。此程序包提供的操作在当前调用用户下执行，而不是在程序包所有者<code class="codeph">SYS</code>下执行。使用当前用户的权限执行从匿名PL / SQL块调用的任何<code class="codeph">DBMS_XA</code>子程序。从存储过程调用的任何<code class="codeph">DBMS_XA</code>子程序都是使用存储过程所有者的特权执行的。
                  </p>
                  <div class="section">
                     <p><code class="codeph">SYS</code> <code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限。 <code class="codeph">DBA_PENDING_TRANSACTIONS</code>需要谁需要执行用户<code class="codeph">XA_RECOVER</code>子程序。
                     </p>
                     <p>需要操纵其他用户创建的XA事务的用户需要<code class="codeph">FORCE ANY TRANSACTION</code>权限。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS69153"></a><a id="ARPLS69154"></a><a id="ARPLS69155"></a><a id="ARPLS69154"></a><a id="ARPLS69155"></a><a id="ARPLS69153"></a><div class="props_rev_3"><a id="GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643" name="GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643"></a><h3 id="ARPLS-GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643" class="sect3"><span class="enumeration_section">185.3</span> DBMS_XA常量</h3>
               <div>
                  <p><code class="codeph">DBMS_XA</code>包定义了几个可用于指定参数值的常量。
                  </p>
                  <div class="section">
                     <p>该软件包使用<a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BEHJAGEE" title="此表描述了DBMS_XA子程序使用的常量。">表185-1中</a>所示的常量用于<a href="DBMS_XA.html#GUID-61B54B33-22CE-4860-95FA-5B6490FC7119" title="此函数将当前会话与xid指定的事务分支相关联。">XA_START函数</a>和<a href="DBMS_XA.html#GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E" title="此函数取消当前会话与xid指定的事务分支的关联。">XA_END函数</a>的标志字段。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BEHJAGEE">
                     <p class="titleintable">表185-1 XA_START和XA_END函数的标志字段的DBMS_XA常量</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBA_XA XA_START和XA_END函数的标志字段常量" width="100%" border="1" summary="This table describes constants used by DBMS_XA subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d1125079e552">名称</th>
                              <th align="left" valign="bottom" width="18%" id="d1125079e555">类型</th>
                              <th align="left" valign="bottom" width="25%" id="d1125079e558">值</th>
                              <th align="left" valign="bottom" width="32%" id="d1125079e561">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e566" headers="d1125079e552 ">
                                 <p><code class="codeph">TMNOFLAGS</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e566 d1125079e555 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d1125079e566 d1125079e558 ">
                                 <p>00000000</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1125079e566 d1125079e561 ">
                                 <p>表示未选择任何标志值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e581" headers="d1125079e552 ">
                                 <p><code class="codeph">TMSUCCESS</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e581 d1125079e555 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d1125079e581 d1125079e558 ">
                                 <p><code class="codeph">UTL_RAW.CAST_TO_BINARY_INTEGER</code> （'04000000'）</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1125079e581 d1125079e561 ">
                                 <p>将调用者与事务分支分离</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e598" headers="d1125079e552 ">
                                 <p><code class="codeph">TMJOIN</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e598 d1125079e555 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d1125079e598 d1125079e558 ">
                                 <p><code class="codeph">UTL_RAW.CAST_TO_BINARY_INTEGER</code> （'00200000'）</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1125079e598 d1125079e561 ">
                                 <p>Caller正在加入现有的交易分支。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e616" headers="d1125079e552 ">
                                 <p><code class="codeph">TMSUSPEND</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e616 d1125079e555 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d1125079e616 d1125079e558 ">
                                 <p><code class="codeph">UTL_RAW.CAST_TO_BINARY_INTEGER</code> （'02000000'）</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1125079e616 d1125079e561 ">
                                 <p>来电者暂停而不是结束</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e633" headers="d1125079e552 ">
                                 <p><code class="codeph">TMRESUME</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e633 d1125079e555 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d1125079e633 d1125079e558 ">
                                 <p><code class="codeph">UTL_RAW.CAST_TO_BINARY_INTEGER</code> （'08000000'）</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1125079e633 d1125079e561 ">
                                 <p>呼叫者正在恢复与暂停的事务分支的关联。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">DBMS_XA</code>程序包使用<a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">表185-2中</a>显示的常量作为可能的返回值</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI">
                     <p class="titleintable">表185-2可能的返回值的DBMS_XA常量</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XA可能返回值的常量" width="100%" border="1" summary="This table describes constants used by DBMS_XA subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d1125079e672">名称</th>
                              <th align="left" valign="bottom" width="18%" id="d1125079e675">类型</th>
                              <th align="left" valign="bottom" width="24%" id="d1125079e678">值</th>
                              <th align="left" valign="bottom" width="33%" id="d1125079e681">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e686" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBBASE</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e686 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e686 d1125079e678 ">
                                 <p>100</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e686 d1125079e681 ">
                                 <p>回滚代码的包含下限</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e701" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBROLLBACK</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e701 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e701 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e701 d1125079e681 ">
                                 <p>回滚是由一个未指明的原因引起的</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e717" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBCOMMFAIL</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e717 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e717 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +1</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e717 d1125079e681 ">
                                 <p>回滚是由通信故障引起的</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e734" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBDEADLOCK</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e734 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e734 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +2</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e734 d1125079e681 ">
                                 <p>检测到死锁</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e751" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBINTEGRITY</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e751 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e751 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +3</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e751 d1125079e681 ">
                                 <p>检测到违反资源完整性的条件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e768" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBOTHER</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e768 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e768 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +4</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e768 d1125079e681 ">
                                 <p>资源管理器因未列出的原因回滚了该事务</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e785" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBPROTO</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e785 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e785 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +5</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e785 d1125079e681 ">
                                 <p>资源管理器中发生协议错误</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e802" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBTIMEOUT</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e802 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e802 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +6</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e802 d1125079e681 ">
                                 <p>交易分支耗时长</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e819" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBTRANSIENT</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e819 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e819 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +7</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e819 d1125079e681 ">
                                 <p>可以重试事务分支</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e836" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBEND</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e836 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e836 d1125079e678 ">
                                 <p><code class="codeph">XA_RBTRANSIENT</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e836 d1125079e681 ">
                                 <p>回滚代码的包含上限</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e852" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_NOMIGRATE</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e852 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e852 d1125079e678 ">
                                 <p>9</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e852 d1125079e681 ">
                                 <p>交易分支可能已经启发式完成</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e868" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_HEURHAZ</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e868 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e868 d1125079e678 ">
                                 <p>8</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e868 d1125079e681 ">
                                 <p>交易分支可能已经启发式完成</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e883" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_HEURCOM</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e883 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e883 d1125079e678 ">
                                 <p>7</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e883 d1125079e681 ">
                                 <p>交易分支一直是启发式的</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e898" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_HEURRB</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e898 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e898 d1125079e678 ">
                                 <p>6</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e898 d1125079e681 ">
                                 <p>事务分支已经启发式回滚</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e913" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_HEURMIX</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e913 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e913 d1125079e678 ">
                                 <p>五</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e913 d1125079e681 ">
                                 <p>一些交易分支已经启发式承诺，其他分支回滚</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e928" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RETRY</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e928 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e928 d1125079e678 ">
                                 <p>4</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e928 d1125079e681 ">
                                 <p>例行程序返回时没有任何效果，可能会重新发布</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e943" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RDONLY</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e943 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e943 d1125079e678 ">
                                 <p>3</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e943 d1125079e681 ">
                                 <p>交易是只读的并且已经提交</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e958" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_OK</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e958 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e958 d1125079e678 ">
                                 <p>0</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e958 d1125079e681 ">
                                 <p>正常执行</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e973" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_ASYNC</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e973 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e973 d1125079e678 ">
                                 <p>-2</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e973 d1125079e681 ">
                                 <p>异步操作已经非常出色</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e988" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_RMERR</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e988 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e988 d1125079e678 ">
                                 <p>-3</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e988 d1125079e681 ">
                                 <p>事务分支中发生资源管理器错误</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1003" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_NOTA</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1003 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1003 d1125079e678 ">
                                 <p>-4</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1003 d1125079e681 ">
                                 <p>XID无效</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1018" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_INVAL</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1018 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1018 d1125079e678 ">
                                 <p>-5</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1018 d1125079e681 ">
                                 <p>给出了无效的参数</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1034" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_PROTO</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1034 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1034 d1125079e678 ">
                                 <p>-6</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1034 d1125079e681 ">
                                 <p>在不正确的上下文中调用例程</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1049" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_RMFAIL</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1049 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1049 d1125079e678 ">
                                 <p>-7</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1049 d1125079e681 ">
                                 <p>资源经理不可用</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1064" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_DUPID</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1064 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1064 d1125079e678 ">
                                 <p>-8</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1064 d1125079e681 ">
                                 <p>XID已经存在</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1079" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_OUTSIDE</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1079 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1079 d1125079e678 ">
                                 <p>-9</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1079 d1125079e681 ">
                                 <p>资源经理在全球交易之外做工作</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS69156"></a><a id="ARPLS69156"></a><div class="props_rev_3"><a id="GUID-40814FCC-E43B-411A-A27D-AC63DF20732E" name="GUID-40814FCC-E43B-411A-A27D-AC63DF20732E"></a><h3 id="ARPLS-GUID-40814FCC-E43B-411A-A27D-AC63DF20732E" class="sect3"><span class="enumeration_section">185.4</span> DBMS_XA操作说明</h3>
               <div>
                  <p>在遵守的X / Open CAE标准的分布式事务处理，XA规范<code class="codeph">XA_PREPARE</code> / <code class="codeph">COMMIT</code> / <code class="codeph">ROLLBACK</code> / <code class="codeph">FORGET</code>当事务仍与当前会话相关联可能不会被调用。只有在<code class="codeph">XA_END</code>已调用，所以不存在与当前会话相关的任何事务，应用程序可以调用<code class="codeph">XA_PREPARE</code> / <code class="codeph">COMMIT</code> / <code class="codeph">ROLLBACK</code> / <code class="codeph">FORGET</code> 。</p>
                  <div class="section">
                     <p><code class="codeph">XAER_PROTO</code>从返回的错误<code class="codeph">XA_PREPARE</code> / <code class="codeph">COMMIT</code> / <code class="codeph">ROLLBACK</code> / <code class="codeph">FORGET</code> ，如果事务正在与当前会话相关联。
                     </p>
                     <p>在调用任何软件包子程序之前，必须已经建立了与Oracle数据库服务器后端或资源管理器的连接/会话。不支持资源管理器标识符。如果涉及多个资源管理器，则必须在调用任何包子程序之前为每个资源管理器预先建立多个连接/会话。如果在全局事务处理过程中建立了多个连接/会话，则调用者必须确保与特定全局事务分支标识符（XID）关联的所有这些连接/会话都建立到同一资源管理器。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS69157"></a><a id="ARPLS69157"></a><div class="props_rev_3"><a id="GUID-BAB2807B-7F40-463F-BEA3-0253944BE576" name="GUID-BAB2807B-7F40-463F-BEA3-0253944BE576"></a><h3 id="ARPLS-GUID-BAB2807B-7F40-463F-BEA3-0253944BE576" class="sect3"><span class="enumeration_section">185.5</span> DBMS_XA数据结构</h3>
               <div>
                  <p><code class="codeph">DBMS_XA</code>包使用此<code class="codeph">OBJECT</code>类型和关联的<code class="codeph">TABLE</code>类型。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-BAB2807B-7F40-463F-BEA3-0253944BE576__GUID-A3550EDB-3344-4C06-A18E-79AFDF5FD63E">对象类型</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BAB2807B-7F40-463F-BEA3-0253944BE576__GUID-96540941-F6B9-4449-A2B4-11F85B0E0EB0">表类型</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_XA.html#GUID-D6DAAF67-611E-4C06-A433-212C5C259726" title="此类型用于定义表示全局事务分支列表的xid数组。">DBMS_XA_XID_ARRAY表类型</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS69158"></a><a id="ARPLS69159"></a><a id="ARPLS69159"></a><a id="ARPLS69158"></a><div class="props_rev_3"><a id="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" name="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6"></a><h4 id="ARPLS-GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" class="sect4"><span class="enumeration_section">185.5.1</span> DBMS_XA DBMS_XA_XID对象类型</h4>
                  <div>
                     <p>PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6__GUID-D093D6E5-7D25-4E2D-B976-627B75D2EE1E">
                           <p class="notep1">注意：</p>
                           <p>有关更多信息，请参阅公共XA标准中的“分布式事务处理：XA规范”。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6__GUID-A145AF50-7350-467B-A8D0-EEBAF7912F64">句法</p><pre class="oac_no_warn" dir="ltr">TYPE DBMS_XA_XID是OBJECT（formatid NUMBER，gtrid RAW（64），bqual RAW（64），构造函数DBMS_XA_XID（gtrid IN NUMBER）RETURN SELF AS RESULT，构造函数DBMS_XA_XID（gtrid IN RAW，bqual IN RAW） <code class="codeph">RETURN SELF AS RESULT</code> ，构造函数DBMS_XA_XID（formatid IN NUMBER，gtrid IN RAW，bqual IN RAW DEFAULT HEXTORAW（'00000000000000000000000000000001'）） <code class="codeph">RETURN SELF AS RESULT</code> ）</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6__GUID-D74E2A9A-CBDB-4DC1-A08D-9FB256B3067F">属性</p>
                        <div class="tblformal" id="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6__GUID-59043300-58C7-4223-A8A3-D952C1549B2B">
                           <p class="titleintable">表185-3 DBMS_XA_XID对象类型</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XA_XID对象类型" width="100%" border="1" summary="This table liststhe attributes of the DBMS_XA_XID object type and briefly describes them." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e1469">属性</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e1472">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e1477" headers="d1125079e1469 ">
                                       <p><code class="codeph">formatid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e1477 d1125079e1472 ">
                                       <p>格式标识符，标识不同事务管理器（TM）的数字</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e1485" headers="d1125079e1469 ">
                                       <p><code class="codeph">的gtrid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e1485 d1125079e1472 ">
                                       <p>唯一标识全局事务的全局事务标识符，其最大大小为64字节</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e1493" headers="d1125079e1469 ">
                                       <p><code class="codeph">的bqual</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e1493 d1125079e1472 ">
                                       <p>分支限定符，其中最大大小为64字节</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69160"></a><a id="ARPLS69160"></a><div class="props_rev_3"><a id="GUID-D6DAAF67-611E-4C06-A433-212C5C259726" name="GUID-D6DAAF67-611E-4C06-A433-212C5C259726"></a><h4 id="ARPLS-GUID-D6DAAF67-611E-4C06-A433-212C5C259726" class="sect4"><span class="enumeration_section">185.5.2</span> DBMS_XA DBMS_XA_XID_ARRAY表类型</h4>
                  <div>
                     <p>此类型用于定义表示全局事务分支列表的<code class="codeph">xid</code>数组。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D6DAAF67-611E-4C06-A433-212C5C259726__GUID-FEEC37CF-E288-4E7B-996F-8AD3F9A13224">句法</p><pre class="oac_no_warn" dir="ltr">TYPE DBMS_XA_XID_ARRAY作为DBMS_XA_XID的表</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ARPLS69161"></a><a id="ARPLS69162"></a><a id="ARPLS69162"></a><a id="ARPLS69161"></a><div class="props_rev_3"><a id="GUID-F21B6DFA-2785-49B3-BFF0-CAC7181C5FA9" name="GUID-F21B6DFA-2785-49B3-BFF0-CAC7181C5FA9"></a><h3 id="ARPLS-GUID-F21B6DFA-2785-49B3-BFF0-CAC7181C5FA9" class="sect3"><span class="enumeration_section">185.6</span> DBMS_XA子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_XA</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-F21B6DFA-2785-49B3-BFF0-CAC7181C5FA9__GUID-7F6D5B24-8F5E-4D15-A75D-7AA09B94A34E">
                     <p class="titleintable">表185-4 DBMS_XA包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XA包子程序" width="100%" border="1" summary="This table lists the DBMS_XA subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="35%" id="d1125079e1700">子程序</th>
                              <th align="left" valign="bottom" width="65%" id="d1125079e1703">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1708" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-534C5304-32D7-46D7-A059-83FF33A8A2F9" title="当其中一个Oracle Real Application Clusters（Oracle RAC）实例失败时，此过程可用于同步不确定事务。">DIST_TXN_SYNC程序</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1708 d1125079e1703 ">
                                 <p>用于在使用Oracle Real Application Clusters（Oracle RAC）时恢复同步</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1720" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-E183C7FF-6818-430B-B92D-7691DC9F8153" title="此函数提交xid指定的全局事务。">XA_COMMIT函数</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1720 d1125079e1703 ">
                                 <p>提交<code class="codeph">xid</code>指定的全局事务</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1737" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E" title="此函数取消当前会话与xid指定的事务分支的关联。">XA_END功能</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1737 d1125079e1703 ">
                                 <p>取消当前会话与<code class="codeph">xid</code>指定的事务分支的关联</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1754" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA" title="此函数通知资源管理器忘记启发式提交或回滚事务分支。">XA_FORGET函数</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1754 d1125079e1703 ">
                                 <p>通知资源管理器忘记启发式提交或回滚事务分支。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1766" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08" title="如果以前的XA调用失败，此函数将获取最后一个Oracle错误代码。">XA_GETLASTOER功能</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1766 d1125079e1703 ">
                                 <p>如果以前的XA调用失败，则获取最后一个Oracle错误代码。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1778" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1" title="此函数准备xid中指定的事务分支，以便在可能的情况下随后提交事务。">XA_PREPARE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1778 d1125079e1703 ">
                                 <p>准备<code class="codeph">xid</code>指定的事务分支，以便在可能的情况下随后提交事务</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1796" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE" title="此函数从资源管理器获取准备好或启发式完成的事务分支的列表。">XA_RECOVER函数</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1796 d1125079e1703 ">
                                 <p>从资源管理器获得准备好或启发式完成的事务分支的列表</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1808" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-AB177806-535A-4221-B678-0A5630289AEC" title="此函数通知资源管理器回滚代表事务分支完成的工作。">XA_ROLLBACK函数</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1808 d1125079e1703 ">
                                 <p>通知资源管理器回滚代表事务分支完成的工作</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1820" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545" title="此函数设置当前会话的事务超时（以秒为单位）。">XA_SETTIMEOUT功能</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1820 d1125079e1703 ">
                                 <p>设置当前会话的事务超时（以秒为单位）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1832" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-61B54B33-22CE-4860-95FA-5B6490FC7119" title="此函数将当前会话与xid指定的事务分支相关联。">XA_START功能</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1832 d1125079e1703 ">
                                 <p>将当前会话与<code class="codeph">xid</code>指定的事务分支关联</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS69163"></a><a id="ARPLS69163"></a><div class="props_rev_3"><a id="GUID-534C5304-32D7-46D7-A059-83FF33A8A2F9" name="GUID-534C5304-32D7-46D7-A059-83FF33A8A2F9"></a><h4 id="ARPLS-GUID-534C5304-32D7-46D7-A059-83FF33A8A2F9" class="sect4"><span class="enumeration_section">185.6.1</span> DIST_TXN_SYNC过程</h4>
                  <div>
                     <p>当其中一个Oracle Real Application Clusters（Oracle RAC）实例失败时，此过程可用于同步不确定事务。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-534C5304-32D7-46D7-A059-83FF33A8A2F9__GUID-2B8F3C5E-91B7-45D3-B910-9F50429B5F5B">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.DIST_TXN_SYNC;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69164"></a><a id="ARPLS69165"></a><a id="ARPLS69165"></a><a id="ARPLS69164"></a><div class="props_rev_3"><a id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153" name="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153"></a><h4 id="ARPLS-GUID-E183C7FF-6818-430B-B92D-7691DC9F8153" class="sect4"><span class="enumeration_section">185.6.2</span> XA_COMMIT函数</h4>
                  <div>
                     <p>此函数提交<code class="codeph">xid</code>指定的全局事务。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153__GUID-5879765A-C9B9-41ED-90CB-D37641283668">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_COMMIT（xid IN DBMS_XA_XID，onePhase IN BOOLEAN）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153__GUID-CCA1C21F-F6BA-4095-9225-F3DF76780296">参数</p>
                        <div class="tblformal" id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153__GUID-FCB3601F-2B6F-4994-B236-EDB4C14B3A12">
                           <p class="titleintable">表185-5 <span class="italic"><span class="bold">XA_COMMIT函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_COMMIT函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_COMMIT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e2059">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e2062">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2067" headers="d1125079e2059 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2067 d1125079e2062 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2081" headers="d1125079e2059 ">
                                       <p><code class="codeph">ONEPHASE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2081 d1125079e2062 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则应用单阶段提交</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153__GUID-5B6A30D7-05B0-4AA0-BE8B-B32374BC67A9">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。指示错误的可能返回值为： <code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAIL</code> ， <code class="codeph">XAER_NOTA</code> ， <code class="codeph">XAER_INVAL</code>或<code class="codeph">XAER_PROTO</code> 。其他可能的返回值包括： <code class="codeph">XA_OK</code> ， <code class="codeph">XA_RB</code> *， <code class="codeph">XA_HEURHAZ</code> ， <code class="codeph">XA_HEURCOM</code> ， <code class="codeph">XA_HEURRB</code>和<code class="codeph">XA_HEURMIX</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153__GUID-866006D1-7FB8-4931-81D9-0F0BA69AA45C">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>应用程序不能调用<code class="codeph">COMMIT</code> ，而是必须调用<code class="codeph">XA_COMMIT</code>来提交<code class="codeph">xid</code>指定的全局事务。如果用户需要提交由其他用户创建的事务分支，则必须向用户授予<code class="codeph">FORCE</code> <code class="codeph">ANY</code> <code class="codeph">TRANSACTION</code> 。
                              </p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">onePhase</code>为<code class="codeph">TRUE</code> ，则资源管理器应使用单阶段提交协议来提交代表<code class="codeph">xid</code>完成的工作。否则，仅当全局事务的所有分支都已成功准备且前面的<code class="codeph">XA_PREPARE</code>调用已返回<code class="codeph">XA_OK</code> ，才应<code class="codeph">XA_COMMIT</code> 。
                              </p>
                           </li>
                           <li>
                              <p>应用程序必须为<code class="codeph">XA_PREPARE</code>已返回<code class="codeph">XA_OK</code>的全局事务的每个事务分支进行单独的<code class="codeph">XA_COMMIT</code>调用。</p>
                           </li>
                           <li>
                              <p>如果资源管理器未提交事务并且参数<code class="codeph">onePhase</code>设置为<code class="codeph">TRUE</code> ，则资源管理器可以返回<code class="codeph">XA_RB</code> *代码之一。返回后，资源管理器已回滚分支的工作并已释放所有保留的资源。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69166"></a><a id="ARPLS69167"></a><a id="ARPLS69167"></a><a id="ARPLS69166"></a><div class="props_rev_3"><a id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E" name="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E"></a><h4 id="ARPLS-GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E" class="sect4"><span class="enumeration_section">185.6.3</span> XA_END功能</h4>
                  <div>
                     <p>此函数取消当前会话与<code class="codeph">xid</code>指定的事务分支的关联。
                     </p>
                     <div class="section">
                        <p>当控制线程完成或需要暂停处理事务分支时，事务管理器调用<code class="codeph">XA_END</code> 。当应用程序部分或全部完成其部分工作时（例如，在阻塞某些事件之前，为了让其他控制线程在分支上工作），就会发生这种情况。当<code class="codeph">XA_END</code>成功返回时，控制的调用线程不再与分支主动关联，但分支仍然存在</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E__GUID-F3F5D129-36A0-4B51-9D51-C5200A03089D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_END（xid IN DBMS_XA_XID，标志IN PLS_INTEGER）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E__GUID-9C44CDE8-5244-41CB-9DE5-091837C5FE36">参数</p>
                        <div class="tblformal" id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E__GUID-ABB30DA5-636C-4220-A4E8-ADAC0E634813">
                           <p class="titleintable">表185-6 <span class="italic"><span class="bold">XA_END函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_END函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_END subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e2332">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e2335">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2340" headers="d1125079e2332 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2340 d1125079e2335 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2354" headers="d1125079e2332 ">
                                       <p><code class="codeph">旗</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2354 d1125079e2335 ">
                                       <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BEHJAGEE" title="此表描述了DBMS_XA子程序使用的常量。">见表185-1</a> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E__GUID-E8703022-662B-49DD-BC8B-C48CE11B1FD7">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。错误的可能返回值是<code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAILED</code> ， <code class="codeph">XAER_NOTA</code> ， <code class="codeph">XAER_INVAL</code> ， <code class="codeph">XAER_PROTO</code>或<code class="codeph">XA_RB</code> *。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E__GUID-94D88503-44DC-464F-A6F8-93C83A4C1D77">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>可以在flag中指定<code class="codeph">TMSUCCESS</code>或<code class="codeph">TMSUSPEND</code> ，如果返回值为<code class="codeph">XA_OK</code> ，则事务分支与处于分离状态的当前会话解除关联。不支持<code class="codeph">TMFAIL</code> 。<code class="codeph">XA_END</code>可与任一被称为<code class="codeph">TMSUCCESS</code>或<code class="codeph">TMSUSPEND</code>撇清从当前会话由XID标识的事务分支。
                              </p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">XA_END</code>成功，则返回<code class="codeph">XA_OK</code> 。应用程序必须检查返回值并处理错误情况。仅当返回<code class="codeph">XA_OK</code>时，应用程序才会继续进行其他正常操作。
                              </p>
                           </li>
                           <li>
                              <p>在不调用<code class="codeph">XA_END</code>情况下执行<code class="codeph">ROLLBACK</code>语句将回滚当前事务所做的更改。但是，在调用<code class="codeph">XA_END</code>之前，事务上下文仍与当前会话关联。
                              </p>
                           </li>
                           <li>
                              <p>在不调用<code class="codeph">XA_END</code>情况下执行<code class="codeph">COMMIT</code>语句将导致<code class="codeph">ORA</code> - <code class="codeph">02089</code> ：在从属会话中不允许<code class="codeph">COMMIT</code> 。
                              </p>
                           </li>
                           <li>
                              <p>在<code class="codeph">XA_END</code>之后执行COMMIT或ROLLBACK语句对<code class="codeph">xid</code>标识的事务没有影响，因为此事务不再与当前会话关联。提交事务ID或<a href="DBMS_XA.html#GUID-AB177806-535A-4221-B678-0A5630289AEC" title="此函数通知资源管理器回滚代表事务分支完成的工作。">XA_ROLLBACK函数</a>以提交/回滚由<code class="codeph">xid</code>指定的事务。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69168"></a><a id="ARPLS69169"></a><a id="ARPLS69169"></a><a id="ARPLS69168"></a><div class="props_rev_3"><a id="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA" name="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA"></a><h4 id="ARPLS-GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA" class="sect4"><span class="enumeration_section">185.6.4</span> XA_FORGET函数</h4>
                  <div>
                     <p>此函数通知资源管理器忘记启发式提交或回滚事务分支。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA__GUID-42A4E721-D5FA-42E9-97C1-2C30259FD2A0">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_FORGET（xid IN DBMS_XA_XID）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA__GUID-FE71C854-8C37-4B9C-A658-22BE3933698F">参数</p>
                        <div class="tblformal" id="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA__GUID-BD3BFAD7-7819-458C-A62F-33D73973DDDC">
                           <p class="titleintable">表185-7 <span class="italic"><span class="bold">XA_FORGET函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_FORGET函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_FORGET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e2595">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e2598">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2603" headers="d1125079e2595 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2603 d1125079e2598 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA__GUID-F8C5DFBE-CCF9-4382-9D05-9715C2F6B97B">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。可能的返回值是<code class="codeph">XA_OK</code> ， <code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAIL</code> ， <code class="codeph">XAER_NOTA</code> ， <code class="codeph">XAER_INVAL</code>或<code class="codeph">XAER_PROTO</code> 。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69170"></a><a id="ARPLS69170"></a><div class="props_rev_3"><a id="GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08" name="GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08"></a><h4 id="ARPLS-GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08" class="sect4"><span class="enumeration_section">185.6.5</span> XA_GETLASTOER函数</h4>
                  <div>
                     <p>如果以前的XA调用失败，此函数将获取最后一个Oracle错误代码。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08__GUID-E0C0804C-023A-45D7-A1FB-2E04F5B77C60">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_GETLASTOER RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08__GUID-E65E92AC-3837-4E92-B69D-6723F328E52F">返回值</p>
                        <p>返回值包含最后一个Oracle错误代码。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69171"></a><a id="ARPLS69172"></a><a id="ARPLS69172"></a><a id="ARPLS69171"></a><div class="props_rev_3"><a id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1" name="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1"></a><h4 id="ARPLS-GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1" class="sect4"><span class="enumeration_section">185.6.6</span> XA_PREPARE函数</h4>
                  <div>
                     <p>此函数准备<code class="codeph">xid</code>指定的事务分支，以便在可能的情况下随后提交事务。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1__GUID-622B5DFA-4C2C-4AFB-88DC-E274BD718A1C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_PREPARE（xid IN DBMS_XA_XID）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1__GUID-E2ECA847-73EA-4C48-938B-8FE4E2D105BA">参数</p>
                        <div class="tblformal" id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1__GUID-12680E1E-5767-42D2-8A08-BC8641505D16">
                           <p class="titleintable">表185-8 <span class="italic"><span class="bold">XA_PREPARE函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_PREPARE函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_PREPARE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e2861">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e2864">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2869" headers="d1125079e2861 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2869 d1125079e2864 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1__GUID-D8BEBE2A-A285-40FD-8014-22EFEA486F28">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。可能的返回码包括： <code class="codeph">XA_OK</code> ， <code class="codeph">XA_RDONLY</code> ， <code class="codeph">XA_RB</code> *， <code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAIL</code> ， <code class="codeph">XAER_NOTA</code> ， <code class="codeph">XAER_INVAL</code>或<code class="codeph">XAER_PROTO</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1__GUID-4639F145-8C22-42FD-809D-A3F43150F05A">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果用户需要准备由其他用户创建的事务分支，则必须向用户授予<code class="codeph">FORCE</code> <code class="codeph">ANY</code> <code class="codeph">TRANSACTION</code> 。
                              </p>
                           </li>
                           <li>
                              <p>应用程序必须跟踪一个全局事务的所有分支，并准备每个事务分支。仅当全局事务的所有分支都已成功准备且<code class="codeph">XA_PREPARE</code>已返回<code class="codeph">XA_OK</code> ，应用程序才可以继续调用<code class="codeph">XA_COMMIT</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69173"></a><a id="ARPLS69173"></a><div class="props_rev_3"><a id="GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE" name="GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE"></a><h4 id="ARPLS-GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE" class="sect4"><span class="enumeration_section">185.6.7</span> XA_RECOVER函数</h4>
                  <div>
                     <p>此函数从资源管理器获取准备好或启发式完成的事务分支的列表。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE__GUID-DDFEC683-1F6F-4FFC-85E0-504374C70822">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_RECOVER返回DBMS_XA_XID_ARRAY;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE__GUID-A84459CC-4AE3-41AE-B124-86E65CB60EFF">返回值</p>
                        <p>请参见<a href="DBMS_XA.html#GUID-D6DAAF67-611E-4C06-A433-212C5C259726" title="此类型用于定义表示全局事务分支列表的xid数组。">DBMS_XA_XID_ARRAY表类型</a></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE__GUID-CDB8A72F-2682-4E56-81D5-8B58EE64CA21">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>不支持标志<code class="codeph">TMSTARTSCAN</code> ， <code class="codeph">TMENDSCAN</code> ， <code class="codeph">TMNOFLAGS</code> 。
                              </p>
                           </li>
                           <li>
                              <p>必须将权限<code class="codeph">SELECT</code> <code class="codeph">ON</code> <code class="codeph">DBA_PENDING_TRANSACTIONS</code>授予需要调用<code class="codeph">XA_RECOVER</code>的用户。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69174"></a><a id="ARPLS69175"></a><a id="ARPLS69175"></a><a id="ARPLS69174"></a><div class="props_rev_3"><a id="GUID-AB177806-535A-4221-B678-0A5630289AEC" name="GUID-AB177806-535A-4221-B678-0A5630289AEC"></a><h4 id="ARPLS-GUID-AB177806-535A-4221-B678-0A5630289AEC" class="sect4"><span class="enumeration_section">185.6.8</span> XA_ROLLBACK函数</h4>
                  <div>
                     <p>此函数通知资源管理器回滚代表事务分支完成的工作。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AB177806-535A-4221-B678-0A5630289AEC__GUID-2778E7B3-FF1A-4025-BA6E-77BDF91D0534">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_ROLLBACK（xid IN DBMS_XA_XID）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB177806-535A-4221-B678-0A5630289AEC__GUID-0E08D3A4-6456-4B94-8B5D-16DE8BCC90D7">参数</p>
                        <div class="tblformal" id="GUID-AB177806-535A-4221-B678-0A5630289AEC__GUID-7AB10B23-B2FB-4704-8473-AD7BB511FAE6">
                           <p class="titleintable">表185-9 <span class="italic"><span class="bold">XA_ROLLBACK函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_ROLLBACK函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_ROLLBACK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e3198">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e3201">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e3206" headers="d1125079e3198 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e3206 d1125079e3201 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB177806-535A-4221-B678-0A5630289AEC__GUID-AA3409D7-0510-429F-A26C-CA00851FA41D">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。可能的返回值为： <code class="codeph">XA_OK</code> ， <code class="codeph">XA_RB</code> *， <code class="codeph">XA_HEURHAZ</code> ， <code class="codeph">XA_HEURCOM</code> ， <code class="codeph">XA_HEURRB</code>或<code class="codeph">XA_HEURMIX</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB177806-535A-4221-B678-0A5630289AEC__GUID-4B3542BE-4404-4185-A48C-5FCCFD6ECCC3">使用说明</p>
                        <p>如果用户需要回滚由其他用户创建的事务分支，则必须向用户授予<code class="codeph">FORCE</code> <code class="codeph">ANY</code> <code class="codeph">TRANSACTION</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69176"></a><a id="ARPLS69177"></a><a id="ARPLS69177"></a><a id="ARPLS69176"></a><div class="props_rev_3"><a id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545" name="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545"></a><h4 id="ARPLS-GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545" class="sect4"><span class="enumeration_section">185.6.9</span> XA_SETTIMEOUT功能</h4>
                  <div>
                     <p>此函数设置当前会话的事务超时（以秒为单位）。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545__GUID-541583CB-5A31-4FB1-9672-F647ABE766B0">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_SETTIMEOUT（在PLS_INTEGER中的秒数）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545__GUID-B660AD2F-FA2F-4A75-92FC-7443BAD29191">参数</p>
                        <div class="tblformal" id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545__GUID-3AB0AF93-A741-46CD-9AB7-501A19522D99">
                           <p class="titleintable">表185-10 <span class="italic"><span class="bold">XA_SETTIMEOUT函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_SETTIMEOUT函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_SETTIMEOUTT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e3374">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e3377">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e3382" headers="d1125079e3374 ">
                                       <p><code class="codeph">秒</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e3382 d1125079e3377 ">
                                       <p>超时值指示在系统自动中止事务之前，事务分支可能与会话解除关联的最长时间（以秒为单位）。默认值为60秒。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545__GUID-85B174D6-9A12-4657-AAB2-2658A2D0F548">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。可能的返回值是<code class="codeph">XA_OK</code> ， <code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAIL</code>或<code class="codeph">XAER_INVAL</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545__GUID-D5C1FDC1-8378-42DE-A76F-6B154935B186">使用说明</p>
                        <p>仅当返回值为<code class="codeph">XA_OK</code> ，才会成功设置超时值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69178"></a><a id="ARPLS69179"></a><a id="ARPLS69179"></a><a id="ARPLS69178"></a><div class="props_rev_3"><a id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119" name="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119"></a><h4 id="ARPLS-GUID-61B54B33-22CE-4860-95FA-5B6490FC7119" class="sect4"><span class="enumeration_section">185.6.10</span> XA_START功能</h4>
                  <div>
                     <p>此函数将当前会话与<code class="codeph">xid</code>指定的事务分支相关联。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119__GUID-8567E2FF-8C05-44AE-B126-12E77EBB0760">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_START（xid IN DBMS_XA_XID，标志IN PLS_INTEGER）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119__GUID-2F8821FC-3FB4-48B0-AD58-4E1D5DA47198">参数</p>
                        <div class="tblformal" id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119__GUID-568EDD3B-8EA7-41E6-874B-060B8884F875">
                           <p class="titleintable">表185-11 <span class="italic"><span class="bold">XA_START功能参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_START函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_STARTsubprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e3534">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e3537">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e3542" headers="d1125079e3534 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e3542 d1125079e3537 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e3556" headers="d1125079e3534 ">
                                       <p><code class="codeph">旗</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e3556 d1125079e3537 ">
                                       <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BEHJAGEE" title="此表描述了DBMS_XA子程序使用的常量。">见表185-1</a> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119__GUID-847E2176-EB8B-40C5-A88E-6BF7710E72B2">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119__GUID-4A637354-35D2-4CDE-B631-6F4BBD58CA8B">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果在flag中指定了<code class="codeph">TMJOIN</code>或<code class="codeph">TMRESUME</code> ，则start用于加入由<code class="codeph">xid</code>标识的现有事务分支。使用<code class="codeph">TMSUCCESS</code>标志分离事务时，应使用<code class="codeph">TMJOIN</code>标志。<code class="codeph">TMRESUME</code>当事务分支与分离应采用<code class="codeph">TMSUSPEND</code>标志。可以使用任一标志调用<code class="codeph">XA_START</code>以加入现有事务分支。
                              </p>
                           </li>
                           <li>
                              <p>如果在flag中指定了<code class="codeph">TMNOFLAGS</code> ，并且既未指定<code class="codeph">TMJOIN</code>也<code class="codeph">TMRESUME</code>指定<code class="codeph">TMJOIN</code> ， <code class="codeph">TMRESUME</code>启动新的事务分支。如果<code class="codeph">xid</code>指定的事务分支已存在，则<code class="codeph">XA_START</code>将返回<code class="codeph">XAER_DUPID</code>错误代码。
                              </p>
                           </li>
                           <li>
                              <p>错误的可能返回值包括： <code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAIL</code> ， <code class="codeph">XAER_DUPID</code> ， <code class="codeph">XAER_OUTSIDE</code> ， <code class="codeph">XAER_NOTA</code> ， <code class="codeph">XAER_INVAL</code>和<code class="codeph">XAER_PROTO</code> 。</p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">XA_START</code>成功，则返回<code class="codeph">XA_OK</code> 。应用程序必须检查返回值并处理错误情况。仅当返回<code class="codeph">XA_OK</code>时，PL / SQL应用程序才会继续进行其他正常操作。不支持事务堆叠。如果存在与当前会话关联的活动事务，则可能不会调用它来启动或加入另一个事务。如果使用与会话关联的活动全局事务分支调用<code class="codeph">XAER_PROTO</code>则将返回<code class="codeph">XA_START</code> 。如果使用与当前会话关联的本地事务调用<code class="codeph">XAER_OUTSIDE</code>则将返回<code class="codeph">XA_START</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
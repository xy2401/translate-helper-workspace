<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle Text provides a name search feature to handle inaccurate data and misspelled names."></meta>
      <meta name="description" content="Oracle Text provides a name search feature to handle inaccurate data and misspelled names."></meta>
      <title>使用Oracle文本名称搜索</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Application Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Oracle Text provides a name search feature to handle inaccurate data and misspelled names."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Application Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96275-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="searching-document-sections-in-oracle-text.html" title="Previous" type="text/html"></link>
      <link rel="next" href="working-with-thesaurus-in-oracle-text.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="CCAPP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="searching-document-sections-in-oracle-text.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="working-with-thesaurus-in-oracle-text.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle文本名称搜索</li>
            </ol>
            <a id="GUID-B1190985-8419-4E6D-83AF-60F1A1474071" name="GUID-B1190985-8419-4E6D-83AF-60F1A1474071"></a><a id="CCAPP9534"></a>
            
            <h2 id="CCAPP-GUID-B1190985-8419-4E6D-83AF-60F1A1474071" class="sect2"><span class="enumeration_chapter">12</span>使用Oracle文本名称搜索</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Text提供名称搜索功能来处理不准确的数据和拼写错误的名称。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-oracle-text-name-search.html#GUID-D3E9CF36-BB4A-4C66-8E62-CD723A2399F4">名称搜索概述</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-text-name-search.html#GUID-41C7CABC-597C-499D-BD29-326A65A0B65A">使用名称搜索的示例</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9535"></a><div class="props_rev_3"><a id="GUID-D3E9CF36-BB4A-4C66-8E62-CD723A2399F4" name="GUID-D3E9CF36-BB4A-4C66-8E62-CD723A2399F4"></a><h3 id="CCAPP-GUID-D3E9CF36-BB4A-4C66-8E62-CD723A2399F4" class="sect3"><span class="enumeration_section">12.1</span>名称搜索概述</h3>
               <div>
                  <p>习惯于一种文化的拼写规则的人可能难以将这些相同的规则应用于来自不同文化的名称。名称搜索（也称为名称匹配）提供了一种解决方案，以匹配由于正交变化而在拼写上可能不同的专有名称。它还使您能够搜索有些不准确的数据，例如当记录的名字和姓氏未正确分段时可能会出现这种情况。名称搜索的主要优点是能够处理有些不准确的数据。
                  </p>
               </div>
            </div><a id="CCAPP9536"></a><div class="props_rev_3"><a id="GUID-41C7CABC-597C-499D-BD29-326A65A0B65A" name="GUID-41C7CABC-597C-499D-BD29-326A65A0B65A"></a><h3 id="CCAPP-GUID-41C7CABC-597C-499D-BD29-326A65A0B65A" class="sect3"><span class="enumeration_section">12.2</span>名称搜索示例</h3>
               <div>
                  <p><a id="d34646e214" class="indexterm-anchor"></a>以下示例说明了如何使用<a id="d34646e219" class="indexterm-anchor"></a>用于搜索名称的<code class="codeph">NDATA</code>部分：</p><pre class="oac_no_warn" dir="ltr">放桌子的人; create table people（full_name varchar2（2000））;插入人的价值观（'John Black Smith'）; -  multi_column数据存储区是一种在我们的数据周围添加节标记的便捷方式exec ctx_ddl.drop_preference（'name_ds'）begin ctx_ddl.create_preference（'name_ds'，'MULTI_COLUMN_DATASTORE'）; ctx_ddl.set_attribute（'name_ds'，'COLUMNS'，'full_name'）;结束; / exec ctx_ddl.drop_section_group（'name_sg'）; begin ctx_ddl.create_section_group（'name_sg'，'BASIC_SECTION_GROUP'）; ctx_ddl.add_ndata_section（'name_sg'，'full_name'，'full_name'）;结束; /  - 您可以选择加载昵称词库 -  HOST ctxload -thes -name nicknames -file nicknames.txt exec ctx_ddl.drop_preference（'name_wl'）; begin ctx_ddl.create_preference（'name_wl'，'BASIC_WORDLIST'）; ctx_ddl.set_attribute（'name_wl'，'NDATA_ALTERNATE_SPELLING'，'FALSE'）; ctx_ddl.set_attribute（'name_wl'，'NDATA_BASE_LETTER'，'TRUE'）; - 仅当您加载了同义词库时才包含以下行 - 文件nicknames.txt： -  ctx_ddl.set_attribute（'name_wl'，'NDATA_THESAURUS'，'nicknames'）; ctx_ddl.set_attribute（'name_wl'，'NDATA_JOIN_PARTICLES'，'de：di：la：da：el：del：qi：abd：los：la：dos：do：an：li：yi：yu：van：jon：un ：赛：本：人'）;结束; / create index people_idx on people（full_name）indextype是ctxsys.context参数（'datastore name_ds section group name_sg wordlist name_wl'）; - 现在您可以使用以下SQL命名搜索：var name varchar2（80）; exec：name：='Jon Blacksmith'select / * + FIRST_ROWS * / full_name，得分（1）来自包含的人（full_name，'ndata（full_name，'||：name ||'）'，1）&gt; 0 order按得分（1）desc /</pre><p>以下示例说明了使用<code class="codeph">NDATA</code>节搜索名称的更复杂版本：</p><pre class="oac_no_warn" dir="ltr">create table emp（first_name varchar2（30），middle_name varchar2（30），last_name varchar2（30），email varchar2（30），phone varchar2（30））;插入emp值（'John'，'Black'，'Smith'，'john.smith @ example.org'，'123-456-7890'）; - 用户数据存储过程创建或替换过程empuds_proc（rid in rowid，tlob in out nocopy clob）是tag varchar2（30）; phone varchar2（30）;从c1开始（从emp中选择FIRST_NAME，MIDDLE_NAME，LAST_NAME，EMAIL，PHONE，其中rowid = rid）loop tag：='&lt;email&gt;'; dbms_lob.writeappend（tlob，length（tag），tag）;如果（c1。EMAIL不为null）然后dbms_lob.writeappend（tlob，length（c1。电子邮件），c1。电子邮件）;万一; tag：='&lt;/ email&gt;'; dbms_lob.writeappend（tlob，length（tag），tag）; tag：='&lt;phone&gt;'; dbms_lob.writeappend（tlob，length（tag），tag）;如果（c1。电话不为空）然后电话：= nvl（REGEXP_SUBSTR（c1。电话，'\ d \ d \ d \ d（$ | \ s）'），''）; dbms_lob.writeappend（tlob，length（phone），phone）;万一; tag：='&lt;/ phone&gt;'; dbms_lob.writeappend（tlob，length（tag），tag）; tag：='&lt;fullname&gt;'; dbms_lob.writeappend（tlob，length（tag），tag）;如果（c1。FIRST_NAME不为null）然后dbms_lob.writeappend（tlob，length（c1。FIRST_NAME），c1。名字）; dbms_lob.writeappend（tlob，length（''），''）;万一;如果（c1。MIDDLE_NAME不为null）然后是dbms_lob.writeappend（tlob，length（c1。MIDDLE_NAME），c1。中间名字）; dbms_lob.writeappend（tlob，length（''），''）;万一;如果（c1。LAST_NAME不为null）然后dbms_lob.writeappend（tlob，length（c1。LAST_NAME），c1。姓）;万一; tag：='&lt;/ fullname&gt;'; dbms_lob.writeappend（tlob，length（tag），tag）;结束循环;结束; /--list show errors exec ctx_ddl.drop_preference（'empuds'）;开始ctx_ddl.create_preference（'empuds'，'user_datastore'）; ctx_ddl.set_attribute（'empuds'，'procedure'，'empuds_proc'）; ctx_ddl.set_attribute（'empuds'，'output_type'，'CLOB'）;结束; / exec ctx_ddl.drop_section_group（'namegroup'）; begin ctx_ddl.create_section_group（'namegroup'，'BASIC_SECTION_GROUP'）; ctx_ddl.add_ndata_section（'namegroup'，'fullname'，'fullname'）; ctx_ddl.add_ndata_section（'namegroup'，'phone'，'phone'）; ctx_ddl.add_ndata_section（'namegroup'，'email'，'email'）;结束; /  - 需要加载昵称词库 -  ctxload -thes -name nicknames -file dr0thsnames.txt  - 您可以在 -  $ ORACLE_HOME / ctx / sample / thes目录下找到示例昵称同义词库文件dr0thsnames.txt。exec ctx_ddl.drop_preference（'ndata_wl'）;开始ctx_ddl.create_preference（'NDATA_WL'，'BASIC_WORDLIST'）; ctx_ddl.set_attribute（'NDATA_WL'，'NDATA_ALTERNATE_SPELLING'，'FALSE'）; ctx_ddl.set_attribute（'NDATA_WL'，'NDATA_BASE_LETTER'，'TRUE'）; ctx_ddl.set_attribute（'NDATA_WL'，'NDATA_THESAURUS'，'NICKNAMES'）; ctx_ddl.set_attribute（'NDATA_WL'，'NDATA_JOIN_PARTICLES'，'de：di：la：da：el：del：qi：abd：los：la：dos：do：an：li：yi：yu：van：jon：un ：赛：本：人'）;结束; / exec ctx_output.start_log（'emp_log'）;在emp（first_name）上创建索引name_idx indextype是ctxsys.context参数（'datastore empuds section group namegroup wordlist ndata_wl memory 500M'）; exec ctx_output.end_log; - 现在您可以使用以下SQL命名搜索：var name varchar2（80）; exec：name：='Jon Blacksmith'选择first_name，middle_name，last_name，phone，email，scr from（select / * + FIRST_ROWS * / first_name，middle_name，last_name，phone，email，score（1）scr from emp where contains（ first_name，'ndata（phone，'||：name ||'）OR ndata（email，'||：name ||'）OR ndata（fullname，'||：name ||'）'，1）&gt; 0按得分（1）desc），其中rownum &lt;= 10;</pre></div>
            </div>
         </div>
      </article>
   </body>
</html>
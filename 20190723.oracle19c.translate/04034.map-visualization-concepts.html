<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter explains concepts that you should be familiar with before using the map visualizer."></meta>
      <meta name="description" content="This chapter explains concepts that you should be familiar with before using the map visualizer."></meta>
      <title>映射可视化概念</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Map Visualization Developer&#39;s Guide "></meta>
      <meta property="og:description" content="This chapter explains concepts that you should be familiar with before using the map visualizer."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Map Visualization Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-map-visualization-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T11:37:22-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94797-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction-to-map-visualization-component.html" title="Previous" type="text/html"></link>
      <link rel="next" href="map-visualization-servers.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Map Visualization Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JIMPV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-map-visualization-component.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="map-visualization-servers.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">地图可视化开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">映射可视化概念</li>
            </ol>
            <a id="GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" name="GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9"></a><a id="JIMPV2000"></a>
            
            <h2 id="JIMPV-GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" class="sect2"><span class="enumeration_chapter">2</span>地图可视化概念</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍在使用地图可视化工具之前应该熟悉的概念。</p>
               <p>一些基本概念包括<span class="italic">样式</span> ， <span class="italic">主题</span> ， <span class="italic">基本映射</span> ， <span class="italic">映射元数据</span>和<span class="italic">映射</span> 。
               </p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>样式定义与样式关联的要素的渲染属性。例如，文本样式确定如何在地图上标记此类要素，而线条样式确定线性要素（例如道路）的再现。</p>
                  </li>
                  <li>
                     <p>主题是通过使用样式规则与样式相关联的要素（具有空间和非空间属性的实体）的集合。</p>
                  </li>
                  <li>
                     <p>基本地图由一个或多个主题组成。（基本地图不应与任何主题同名。）</p>
                  </li>
                  <li>
                     <p>映射元数据由存储在数据库中的样式，主题和基本映射的存储库组成。</p>
                  </li>
                  <li>
                     <p>地图是地图可视化工具为响应地图请求而创建的组件之一。地图可以是图像文件，图像文件的对象表示或引用图像文件的URL。</p>
                  </li>
               </ul>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-58B56611-5D1C-41ED-A994-D5BEEDD5CFFB">Map Visualizer概述</a><br>当应用程序使用地图可视化工具时，它会将特定样式（如颜色和图案）应用于特定主题（即空间要素的集合，例如城市，河流和高速公路）以渲染地图（例如GIF图像）用于在网页上显示）。
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997">样式</a><br><span class="bold">样式</span>是可用于表示空间要素的可视属性。
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705">主题</a><br><span class="italic">主题</span>可能是地图可视化工具中最重要的概念。<span class="bold">主题</span>是特定数据层的可视化表示。
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95">地图</a><br>地图可以包含元素和属性的组合。
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-5AC30A9E-37E7-49FE-AFEE-AB220B600925">数据源</a><br>数据源对应于数据库架构或用户。
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-788ABF14-7506-40CF-B5E0-D47352BD1A59">如何生成地图</a><br>当地图请求到达地图可视化服务器时，服务器会选择与请求中的主数据源关联的免费渲染器。</li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8">跨模式映射请求</a><br>数据库用户可以发出指定主题的映射请求，该主题使用与另一个数据库用户相关联的数据，以从其他数据源用户有权访问的表中选择数据。
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4">Map Visualizer中的工作区管理器支持</a><br>Workspace Manager是Oracle数据库功能，允许您在数据库中对一个或多个表进行版本启用。
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5">映射Visualizer元数据视图</a><br>描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。</li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-F68E694A-F27A-4E89-9D65-D37D232C1254">Oracle Maps</a><br>Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。它由来自服务器端和客户端的组件组成。
                  </li>
               </ul>
            </div>
            <a id="JIMPV9527"></a><div class="props_rev_3"><a id="GUID-58B56611-5D1C-41ED-A994-D5BEEDD5CFFB" name="GUID-58B56611-5D1C-41ED-A994-D5BEEDD5CFFB"></a><h3 id="JIMPV-GUID-58B56611-5D1C-41ED-A994-D5BEEDD5CFFB" class="sect3"><span class="enumeration_section">2.1</span> Map Visualizer概述</h3>
               <div>
                  <p>当应用程序使用地图可视化工具时，它会将特定样式（如颜色和图案）应用于特定主题（即空间要素的集合，例如城市，河流和高速公路）以渲染地图（例如GIF图像）用于在网页上显示）。</p>
                  <p>例如，应用程序可能会显示一个地图，其中州立公园以绿色显示，而餐馆则以红色星标记。地图通常有几个主题代表政治或物理实体，或两者兼而有之。例如，地图可能显示国家和州的边界，城市，山脉，河流和历史遗址。渲染地图时，每个主题代表完整图像中的一个图层。</p>
                  <p>地图可视化工具允许您定义样式，主题和基本地图，包括将一个或多个样式应用于每个主题的规则。这些样式，主题，基本映射和关联规则存储在MDSYS模式下的映射定义表中的数据库中，并且您可以通过元数据视图看到它们。数据库实例中的所有样式都由所有用户共享。您可以访问的映射元数据（样式集，主题集和基本映射集）由<a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.">Map Visualizer元</a>数据视图中描述的<a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。">地图可视化工具元数据视图确定</a> （例如，USER_SDO_STYLES，USER_SDO_THEMES和USER_SDO_MAPS）。<a id="d7682e181" class="indexterm-anchor"></a>给定用户可以访问的一组映射定义对象有时称为该用户的<span class="italic">映射配置文件</span> 。您可以使用<a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="本章简要介绍了地图可视化组件Map Builder工具，也称为Oracle Map Builder。它不提供有关工具界面的详细信息;为此，您应该使用Oracle Map Builder时可以使用的在线帮助。">Oracle Map Builder Tool中</a>描述的独立Map Builder工具管理样式，主题和基本地图。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">映射可视化概念</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9529"></a><a id="JIMPV9528"></a><div class="props_rev_3"><a id="GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" name="GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997"></a><h3 id="JIMPV-GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" class="sect3"><span class="enumeration_section">2.2</span>样式</h3>
               <div>
                  <p><span class="bold">样式</span>是可用于表示空间要素的可视属性。
                  </p>
                  <p>用于表示点，线和面要素的基本地图符号和标签被定义并存储为单独的样式。每种样式都有一个唯一的名称，并以XML语法定义一个或多个图形元素。</p>
                  <p>每种样式都是以下类型之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">颜色</span> ：填充或笔触（边框）或两者的颜色。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">标记</span> ：具有指定填充和描边颜色的图形或图像。标记通常用于表示点特征，例如机场，滑雪胜地和历史景点。
                        </p>
                        <p>为线要素指定标记样式时，渲染引擎会在线上选择合适的点，并将标记样式（例如，美国州际公路的盾牌标记）应用于该点。</p>
                     </li>
                     <li>
                        <p><span class="bold">线条</span> ：线条样式（宽度，颜色，结束样式，连接样式）以及可选的中心线，边线和井号。线通常用于线性特征，例如高速公路，河流，管道和电力传输线。您还可以使用套管线样式，这对于绘制街道和高速公路非常有用。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">区域</span> ：颜色或纹理，以及可选的笔触颜色。区域通常用于多边形特征，例如县和人口普查区域。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">文本</span> ：字体规范（大小和系列），可选择突出显示（粗体，斜体）和前景色。文本通常用于注释和标注（例如城市和河流的名称）。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">高级</span> ：主要用于专题制图的合成，在<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754">专题制图中</a>有所描述。关键的高级样式是<code class="codeph">BucketStyle</code> ，它定义了一组简单渲染（和可选标记）样式与一组存储桶之间的关系。对于要绘制的每个要素，使用该要素中的指定值或一组值来确定要素落入哪个存储桶，然后使用与该存储桶关联的样式绘制要素。铲斗样式在<a href="xml-formats-map-visualizer.html#GUID-85FE8BC7-DA9E-4264-8045-D8B3C54050AF">铲斗样式</a>中描述。
                        </p>
                        <p>还提供了两种特殊类型的桶样式：颜色方案（在<a href="xml-formats-map-visualizer.html#GUID-577FABC2-FFA1-458C-9C0B-2E93D21EA1A3">颜色方案样式中</a>描述）和可变（渐变）标记（在<a href="xml-formats-map-visualizer.html#GUID-3AA7E47E-8C54-4382-AC5A-42D5ED73856A">可变标记样式中</a>描述）。其他高级样式是点密度（在<a href="xml-formats-map-visualizer.html#GUID-64F7BB3E-94E3-433C-AF2C-F6C3D51B2A56">点密度标记样式中</a>描述），条形图（在<a href="xml-formats-map-visualizer.html#GUID-F878EE21-DBCE-47C3-A842-CF69DEA0F92C">条形图标记样式中</a>描述），集合（在<a href="xml-formats-map-visualizer.html#GUID-786D9C05-C3C2-4A90-B5DE-6B5718DC792E">集合样式中</a>描述），可变饼图（在<a href="xml-formats-map-visualizer.html#GUID-4F10A15B-88D4-4941-8063-834932D4F481">可变饼图样式中</a>描述）和热图（在<a href="xml-formats-map-visualizer.html#GUID-751BB8F1-237A-4688-A0DA-229225771FDF">热图样式中</a>描述。
                        </p>
                     </li>
                  </ul>
                  <p><a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997__BABFHDAJ" title="样式类型和关联的Java类">表2-1</a>列出了每种样式的适用几何类型。
                  </p>
                  <div class="tblformal" id="GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997__BABFHDAJ">
                     <p class="titleintable">表2-1 <span>样式类型和适用的几何类型</span></p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="样式类型和适用的几何类型" width="100%" border="1" summary="Style Types and Associated Java Classes" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d7682e361">款式</th>
                              <th align="left" valign="bottom" width="80%" id="d7682e364">适用的几何类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e369" headers="d7682e361 ">
                                 <p>颜色</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e369 d7682e364 ">
                                 <p>（随便哪种）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e376" headers="d7682e361 ">
                                 <p>标记</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e376 d7682e364 ">
                                 <p>点，线</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e383" headers="d7682e361 ">
                                 <p>线</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e383 d7682e364 ">
                                 <p>线</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e390" headers="d7682e361 ">
                                 <p>区域</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e390 d7682e364 ">
                                 <p>多边形</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e397" headers="d7682e361 ">
                                 <p>文本</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e397 d7682e364 ">
                                 <p>（随便哪种）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e404" headers="d7682e361 ">
                                 <p>高级</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e404 d7682e364 ">
                                 <p>（随便哪种）</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>数据库用户的所有样式都存储在该用户的USER_SDO_STYLES视图中，该视图在<a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。">Map Visualizer元数据视图</a>和<a href="map-visualization-concepts.html#GUID-818EC731-8296-4594-9327-F573E930F56B">xxx_SDO_STYLES视图中进行了描述</a> 。
                  </p>
                  <p><a id="d7682e422" class="indexterm-anchor"></a><a id="d7682e424" class="indexterm-anchor"></a><a id="d7682e428" class="indexterm-anchor"></a>您还可以创建任何样式类型的<span class="bold">动态定义样式</span> （即临时样式）作为地图请求的一部分。要创建它们，请使用Oracle Maps JavaScript API，使用类和方法动态创建所有类型的样式。
                  </p>
                  <p>你实际创建的是样式的XML定义;它是地图可视化服务器，它在处理地图请求时实际从定义创建这种动态定义的样式，并在请求完成时丢弃动态创建的样式。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF">缩放样式的大小（可缩放样式）</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB">为铲斗指定标签样式</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520">定位文本标签和标记</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F">使文本样式粘滞</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-443058E1-C632-4068-B50E-D34CEED7C0EF">获取任何样式的示例图像</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-6BC2C93D-008E-434E-B7EE-9F870F8A5EC9">允许文本样式重叠或重叠</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">映射可视化概念</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9531"></a><a id="JIMPV9532"></a><a id="JIMPV9530"></a><div class="props_rev_3"><a id="GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF" name="GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF"></a><h4 id="JIMPV-GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF" class="sect4"><span class="enumeration_section">2.2.1</span>缩放样式的大小（可缩放样式）</h4>
                  <div>
                     <p>如果在样式定义中指定了默认像素（ <code class="codeph">px</code> ）以外的单位，则样式将变为可缩放的：即，当用户在地图上放大或缩小时，与样式关联的要素的大小将进行缩放。例如，如果您指定的标记样式的宽度和高度<code class="codeph">100m</code> ，标记根据在当前缩放级别的地图比例尺显示为正方形，每边有100米。
                     </p>
                     <p>以下是样式类型和可以具有关联大小单位的属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>标记样式：标记大小（高度和宽度）和文本属性（字体大小，标签偏移）</p>
                        </li>
                        <li>
                           <p>线条样式：整体线宽，中心线宽和虚线图案，翼线宽度和虚线图案，散列标记和标记图案（大小，偏移，间隔）</p>
                        </li>
                        <li>
                           <p>文字样式：字体大小，光晕宽度</p>
                        </li>
                        <li>
                           <p>条形图样式：条形宽度和高度</p>
                        </li>
                        <li>
                           <p>点密度样式：点宽和高度</p>
                        </li>
                        <li>
                           <p>饼图样式：坑半径</p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF__CIHGAAHE">
                        <p class="titleinexample">示例2-1可伸缩标记样式</p>
                        <p><a href="map-visualization-concepts.html#GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF__CIHGAAHE">例2-1</a>在每个尺寸的15公里（ <code class="codeph">15.0km</code> ）的边界框内定义了一个星形标记。该定义可能有助于在显示一个国家的全部或大部分地图的地图上识别州的首府城市;但是，对于放大特定城市及其当地周边区域的显示器来说，它不会有用。
                        </p><pre class="oac_no_warn" dir="ltr">&lt;style name =“M.STAR_CAPITAL_CITY”&gt; &lt;svg width =“1in”height =“1in”&gt; &lt;desc /&gt; &lt;g class =“marker”style =“stroke：＃000000; fill：＃FF0000; fill-opacity ：0; <span class="bold">宽度：15.0km;高度：15.0km</span> ; font-family：对话框; font-size：12; font-fill：＃FF0000“&gt; &lt;折线点=”138.0,123.0,161.0,198.0,100.0,152.0， 38.0,198.0,61.0,123.0,0.0,76.0,76.0,76.0,100.0,0.0,123.0,76.0,199.0,76.0“/&gt; &lt;/ g&gt; &lt;/ svg&gt; &lt;/ style&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF__CIHJGEFJ">
                        <p class="titleinexample">示例2-2可缩放的线型</p>
                        <p><a href="map-visualization-concepts.html#GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF__CIHJGEFJ">实施例2-2</a>定义了与10米（总线宽度的线样式<code class="codeph">10.0m</code> ）和1米（的边界线宽度<code class="codeph">1.0m</code> ）。该定义可能有助于识别主要公路的首都城市。
                        </p><pre class="oac_no_warn" dir="ltr">&lt;style name =“L.PRIMARY_HIGHWAY”&gt; &lt;svg width =“1in”height =“1in”&gt; &lt;desc&gt; &lt;/ desc&gt; &lt;g class =“line”cased =“true”style =“fill：＃33a9ff; <span class="bold">stroke-width：10.0m</span> “&gt; &lt;line class =”parallel“style =”fill：#aa55cc; <span class="bold">stroke-width：1.0m</span> “/&gt; &lt;/ g&gt; &lt;/ svg&gt; &lt;/ style&gt;</pre><p>当地图可视化工具渲染或标记尺寸单位不是像素的样式时，它首先根据当前地图区域和显示区域将尺寸单位转换为屏幕像素，然后渲染或标记样式。当用户在地图上放大或缩小时，可缩放样式的大小会发生变化。如果缩小导致整体样式大小小于或等于零，则不会渲染或标记样式。</p>
                        <p>大小单位只能用于与已知空间参考系统（SRS）相关联的数据。如果数据没有SRS或未知SRS，则像素用于所有大小值。另请注意，在图例生成器实用程序呈现的图例和预览中，使用像素值而不是任何指定的大小单位。（传说在<a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D">地图图例中</a>有解释。）
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="样式是可用于表示空间要素的可视属性。">样式</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9535"></a><a id="JIMPV9534"></a><a id="JIMPV9533"></a><div class="props_rev_3"><a id="GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB" name="GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB"></a><h4 id="JIMPV-GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB" class="sect4"><span class="enumeration_section">2.2.2</span>指定桶的标签样式</h4>
                  <div>
                     <p>对于基于集合的存储桶样式和各个基于范围的存储桶样式（分别在“ <a href="xml-formats-map-visualizer.html#GUID-85FE8BC7-DA9E-4264-8045-D8B3C54050AF">存储桶样式”</a>和“ <a href="xml-formats-map-visualizer.html#GUID-577FABC2-FFA1-458C-9C0B-2E93D21EA1A3">颜色方案样式”中介绍</a> ），可以使用每个存储桶元素中的<code class="codeph">label_style</code>属性指定标注样式。<a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABFAACF">示例2-3</a>创建了一个名为<code class="codeph">V.COUNTY_POP_DENSITY</code>的高级样式，其中为每个存储桶分配了一个文本标签样式（使用<code class="codeph">label_style</code>属性），其中一些样式用于多个存储桶。
                     </p>
                     <div class="example" id="GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABFAACF">
                        <p class="titleinexample">示例2-3每个铲斗的高级样式和文本标签样式</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;AdvancedStyle&gt; &lt;BucketStyle&gt; &lt;Buckets&gt; &lt;RangedBucket seq =“0”label =“＆lt; 150k”low =“ -  Infinity”high =“150000”style =“C.CB_QUAL_8_CLASS_DARK2_1”label_style =“T.BLUE_SERIF_12”/ &gt; &lt;RangedBucket seq =“1”label =“150k  -  350k”low =“150000”high =“350000”style =“C.CB_QUAL_8_CLASS_DARK2_2”label_style =“T.BLUE_SERIF_12”/&gt; &lt;RangedBucket seq =“2”label = “350k  -  600k”low =“350000”high =“600000”style =“C.CB_QUAL_8_CLASS_DARK2_3”label_style =“T.BROWN_SERIF_12”/&gt; &lt;RangedBucket seq =“3”label =“600k  -  1000k”low =“600000” high =“1000000”style =“C.CB_QUAL_8_CLASS_DARK2_4”label_style =“T.BROWN_SERIF_12”/&gt; &lt;RangedBucket seq =“4”label =“1000k  -  1500k”low =“1000000”high =“1500000”style =“C。 CB_QUAL_8_CLASS_DARK2_5“label_style =”T.GREY_SERIF_12“/&gt; &lt;RangedBucket seq =”5“label =”1500k  -  2500k“low =”1500000“high =”2500000“style =”C.CB_QUAL_8_CLASS_DARK2_6“label_style =”T.GREY_SERIF_12“/ &gt; &lt;RangedBucket seq =“6”label =“2500k  -  5000k”low =“2500000”high =“5000000”style =“C.CB_QUAL_8_CLASS_DARK2_7”label_style =“T.GREEN_SERIF_12 “/&gt; &lt;RangedBucket seq =”7“label =”＆gt; = 5000k“low =”5000000“high =”Infinity“style =”C.CB_QUAL_8_CLASS_DARK2_8“label_style =”T.GREEN_SERIF_12“/&gt; &lt;/ Buckets&gt; &lt;/ BucketStyle&gt; &lt;/ AdvancedStyle&gt;</pre><p>对于单个基于范围的桶，下限值是包含的，而上限值是独占的（除了具有大于其他范围中的任何值的值的范围;其上限值是包含的）。不允许范围具有与其他范围中的值重叠的值范围。</p>
                        <p>如果<a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABFAACF">示例2-3中</a>的<code class="codeph">V.COUNTY_POP_DENSITY</code>样式用于地图请求，它将显示一个可能类似于<a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABGAHJE">图2-1中</a>显示的地图，其中县名称显示的标签反映了各种文本样式（在此案件取决于该县的总人口）。
                        </p>
                        <div class="figure" id="GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABGAHJE">
                           <p class="titleinfigure">图2-1不同铲斗的不同标签样式</p><img src="img/thematic_map_display.gif" alt="下面描述图2-1" title="下面描述图2-1" longdesc="img_text/thematic_map_display.html"><br><a href="img_text/thematic_map_display.html">“图2-1不同铲斗的不同标签样式”的说明</a></div>
                        <!-- class="figure" -->
                        <p>在<a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABFAACF">示例2-3中</a> ，除最后一个之外的所有存储桶都指定了标签样式。对于属于没有指定标签样式的存储桶的任何功能，应用于该功能的标签样式（如果有）取决于以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果主题样式规则的<code class="codeph">&lt;label&gt;</code>元素指定高级样式本身以外的标签样式，则使用指定的标签样式标记要素。在以下示例中，由于<code class="codeph">&lt;label&gt;</code>元素的样式规范（ <code class="codeph">T.STATE_NAME</code> ）与<code class="codeph">&lt;features&gt;</code>元素的样式规范（ <code class="codeph">V.COUNTY_POP_DENSITY</code> ）不同，因此使用<code class="codeph">T.STATE_NAME</code>标记属于没有指定标签样式的存储桶的功能。 <code class="codeph">T.STATE_NAME</code>风格：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules&gt; &lt;rule column =“TOTPOP”&gt; &lt;features style =“ <span class="bold">V.COUNTY_POP_DENSITY</span> ”&gt; &lt;/ features&gt; &lt;label column =“county”style =“ <span class="bold">T.STATE NAME</span> ”&gt; 1 &lt;/ label&gt; &lt;/ rule &gt; &lt;/ styling_rules&gt;</pre></li>
                           <li>
                              <p>如果主题样式规则的<code class="codeph">&lt;label&gt;</code>元素将高级样式指定为其标签样式，则<span class="italic">不会</span>标记该功能。（这就是为什么<a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABGAHJE">图2-1</a>中的某些县没有标记的原因。）在以下示例中，由于<code class="codeph">&lt;features&gt;</code>和<code class="codeph">&lt;label&gt;</code>元素都指定了高级样式<code class="codeph">V.COUNTY_POP_DENSITY</code> ，因此不会标记属于没有指定标签样式的存储桶的功能：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules&gt; &lt;rule column =“TOTPOP”&gt; &lt;features style =“ <span class="bold">V.COUNTY_POP_DENSITY</span> ”&gt; &lt;/ features&gt; &lt;label column =“county”style =“ <span class="bold">V.COUNTY_POP_DENSITY</span> ”&gt; 1 &lt;/ label&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre></li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="样式是可用于表示空间要素的可视属性。">样式</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9536"></a><div class="props_rev_3"><a id="GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520" name="GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520"></a><h4 id="JIMPV-GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520" class="sect4"><span class="enumeration_section">2.2.3</span>定位文本标签和标记</h4>
                  <div>
                     <p>您可以使用定向点控制地图上文本标签和标记的方向。定向点是Oracle Spatial and Graph中特殊类型的点几何。在定向点中，坐标表示点的位置和虚拟端点，以指示方向矢量。对齐文本或根据方向向量旋转标记符号，这在“ <a href="map-visualization-concepts.html#GUID-D684505E-36E9-4DC5-920F-734C57FA016D">控制标记方向”中进行了</a>解释和说明。有关定向点的更多信息，请参阅<a href="../spatl/spatial-datatypes-metadata.html#SPATL534" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a> 。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9">控制文本样式方向</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-D684505E-36E9-4DC5-920F-734C57FA016D">控制标记方向</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="样式是可用于表示空间要素的可视属性。">样式</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9539"></a><a id="JIMPV9538"></a><a id="JIMPV9537"></a><div class="props_rev_3"><a id="GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9" name="GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9"></a><h5 id="JIMPV-GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9" class="sect5"><span class="enumeration_section">2.2.3.1</span>控制文本样式方向</h5>
                     <div>
                        <p>要在方向矢量方向上定向点的文本标签，可以将该点指定为地图请求中的Oracle Spatial和Graph定向点。当地图可视化器标记定向点时，它会自动将文本标签居中在点位置上，并对齐标签，使其指向方向矢量的方向。</p>
                        <p>对于要标记的每个要素，必须将其位置指定为方向点。您可以将这些定向点分组到一个表中，并在包含点几何的列上创建空间索引。然后，您可以根据表格创建主题，指定所需的文本样式作为标签，并指定透明颜色样式作为渲染样式，以便点本身不会显示在地图上。</p>
                        <p><a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBCCFJ">示例2-4</a>是一个地图请求，用于标记具有坐标（12,14,0.3,0.2）的单个定向点，其中（12,14）表示点的X和Y坐标，（0.3,0.2）表示方向向量。它使用动态定义的透明颜色样式（名为<code class="codeph">transparent_color</code> ）来渲染点，以确保显示文本但不显示基础点。
                        </p>
                        <div class="example" id="GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBCCFJ">
                           <p class="titleinexample">示例2-4标记定向点</p><pre class="oac_no_warn" dir="ltr">&lt;map_request title =“Labeling Oriented Points”datasource =“my_datasource”width =“400”height =“300”antialiase =“true”format =“PNG_STREAM”&gt; &lt;themes&gt; &lt;theme name =“theme1”&gt; &lt;jdbc_query spatial_column = “geom”jdbc_srid =“8265”render_style =“transparent_color”label_column =“label”label_style =“t.street name”datasource =“tilsmenv”&gt; SELECT SDO_GEOMETRY（2001,8265，NULL，SDO_ELEM_INFO_ARRAY（1,1,1,3） ，1,0），SDO_ORDINATE_ARRAY <span class="bold">（12,14，.3，.2）</span> ）geom，'Oriented Point'标签FROM dual &lt;/ jdbc_query&gt; &lt;/ theme&gt; &lt;/ themes&gt; &lt;styles&gt; &lt;style name =“ <span class="bold">transparent_color</span> ” &gt; &lt;svg width =“1in”height =“1in”&gt; &lt;g class =“color”style =“stroke：#ff0000; stroke-opacity：0”&gt; &lt;rect width =“50”height =“50”/&gt; &lt;/ g&gt; &lt;/ svg&gt; &lt;/ style&gt; &lt;/ styles&gt; &lt;/ map_request&gt;</pre><p><a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBIHFF">图2-2</a>显示了<a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBCCFJ">示例2-4中</a>请求生成的部分映射。（标签是<span class="italic">Oriented Point</span> 。）
                           </p>
                           <div class="figure" id="GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBIHFF">
                              <p class="titleinfigure">图2-2定向点标签的地图显示</p><img src="img/mv_oriented_pt_label.gif" alt="下面是图2-2的描述" title="下面是图2-2的描述" longdesc="img_text/mv_oriented_pt_label.html"><br><a href="img_text/mv_oriented_pt_label.html">“图2-2定向点标签的地图显示”的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520">定位文本标签和标记</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9541"></a><a id="JIMPV9540"></a><div class="props_rev_3"><a id="GUID-D684505E-36E9-4DC5-920F-734C57FA016D" name="GUID-D684505E-36E9-4DC5-920F-734C57FA016D"></a><h5 id="JIMPV-GUID-D684505E-36E9-4DC5-920F-734C57FA016D" class="sect5"><span class="enumeration_section">2.2.3.2</span>控制标记方向</h5>
                     <div>
                        <p>将标记样式应用于定向点时，地图可视化工具会自动旋转标记样式，使其指向方向矢量。标记样式的任何必要旋转都围绕标记的中心。</p>
                        <p><a href="map-visualization-concepts.html#GUID-D684505E-36E9-4DC5-920F-734C57FA016D__BABIIJGD">图2-3</a>显示了如何使用定向点来控制标记样式的方向。在此图中，首先显示原始标记样式而不进行任何旋转。但是，当标记应用于<a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9">控制文本样式方向</a>中的<a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBCCFJ">示例2-4</a>中所示的相同定向点时，标记样式会相应地旋转（在这种情况下逆时针旋转约34度）以反映方向矢量。
                        </p>
                        <div class="figure" id="GUID-D684505E-36E9-4DC5-920F-734C57FA016D__BABIIJGD">
                           <p class="titleinfigure">图2-3定向标记</p><img src="img/oriented_marker.gif" alt="下面是图2-3的描述" title="下面是图2-3的描述" longdesc="img_text/oriented_marker.html"><br><a href="img_text/oriented_marker.html">“图2-3定向标记”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520">定位文本标签和标记</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9543"></a><a id="JIMPV9542"></a><div class="props_rev_3"><a id="GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F" name="GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F"></a><h4 id="JIMPV-GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F" class="sect4"><span class="enumeration_section">2.2.4</span>使文本样式粘滞</h4>
                  <div>
                     <p>您可以指定文本样式为“粘性”，这意味着将其用作标签样式的任何功能都将始终在地图上绘制其文本标签。<a href="map-visualization-concepts.html#GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F__BABIIHBJ">例2-5</a>显示了一个样式的XML定义，其<code class="codeph">sticky</code>属性设置为<code class="codeph">true</code> 。
                     </p>
                     <div class="example" id="GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F__BABIIHBJ">
                        <p class="titleinexample">示例2-5具有粘性属性的文本样式</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;svg width =“1in”height =“1in”&gt; &lt;desc&gt; &lt;/ desc&gt; &lt;g class =“text” <span class="bold">sticky =“true”</span> style =“font-style：plain; font-family：Serif; font-大小：11pt; font-weight：bold;填充：＃000000“&gt; Hello World！&lt;/ g&gt; &lt;/ svg&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="样式是可用于表示空间要素的可视属性。">样式</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9545"></a><a id="JIMPV9546"></a><a id="JIMPV9544"></a><div class="props_rev_3"><a id="GUID-443058E1-C632-4068-B50E-D34CEED7C0EF" name="GUID-443058E1-C632-4068-B50E-D34CEED7C0EF"></a><h4 id="JIMPV-GUID-443058E1-C632-4068-B50E-D34CEED7C0EF" class="sect4"><span class="enumeration_section">2.2.5</span>获取任何样式的样本图像</h4>
                  <div>
                     <p>要获取存储在数据库中的任何预定义样式的示例图像，您可以向地图可视化服务器发出简单的HTTP请求。此请求可以指定样本图像的大小，背景颜色和返回图像的格式。如果要在网页上显示样式的可视列表，构建自定义地图图例或仅查看各种样式的显示方式，此类请求非常有用。</p>
                     <p>HTTP请求具有以下参数，除了<code class="codeph">sty</code>之外，所有参数都是可选的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">sty</code> （必需）指定样式的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ds</code>指定可以访问样式的数据源。默认情况下，使用默认的地图可视化工具数据源。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">w</code>指定样本图像的宽度（以像素为单位）。默认值为20。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">h</code>指定样本图像的高度（以像素为单位）。默认值为20。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">f</code>指定样本图像的格式。可能的值是直接PNG图像流的<code class="codeph">png</code> ，PNG图像的URL的<code class="codeph">png_url</code> ，直接GIF图像流的<code class="codeph">gif</code> ，或GIF图像的URL的<code class="codeph">gif_url</code> 。默认值为<code class="codeph">png</code> ，这意味着地图可视化服务器将直接将生成的PNG图像数据流回客户端，而无需先将其保存到服务器磁盘。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">bg</code>指定样本图像的背景颜色。格式必须是<code class="codeph">0x</code> <span class="italic"><code class="codeph">rrggbb</code></span>形式的十六进制字符串，例如0x808080（灰色）。默认值为0xffffff（白色）。
                           </p>
                           <p>对于透明背景，请将<code class="codeph">bg</code>指定为扩展十六进制字符串以包含alpha值，格式为<code class="codeph">0x</code> <span class="italic"><code class="codeph">aarrggbb</code></span> 。例如，0x00ffffff将使样式图像的背景完全透明，而0x55ffffff是透明度值为0x55（十进制值80）的白色背景。alpha值的范围可以从0x00（完全透明）到0xff（完全不透明）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">aa</code>指定是否应以抗锯齿模式呈现样本图像。默认值为字符串<code class="codeph">true</code> 。如果您不想使用抗锯齿，请指定字符串<code class="codeph">false</code> 。
                           </p>
                        </li>
                     </ul>
                     <p><a id="d7682e1146" class="indexterm-anchor"></a>以下示例生成具有灰色背景的抗锯齿PNG图像，默认大小为20x20像素，从地图可视化工具默认数据源显示名为<code class="codeph">M.STAR</code>的标记样式：</p><pre class="oac_no_warn" dir="ltr">http://www.mycorp.com/mapviewer/omserver?sty=m.star&amp;bg=808080</pre><p>上述请求生成的显示类似于<a href="map-visualization-concepts.html#GUID-443058E1-C632-4068-B50E-D34CEED7C0EF__BABJABJF">图2-4中</a>的显示。
                     </p>
                     <div class="figure" id="GUID-443058E1-C632-4068-B50E-D34CEED7C0EF__BABJABJF">
                        <p class="titleinfigure">图2-4指定标记样式的示例图像</p><img src="img/sample_image_1.gif" alt="下面是图2-4的描述" title="下面是图2-4的描述" longdesc="img_text/sample_image_1.html"><br><a href="img_text/sample_image_1.html">“图2-4指定标记样式的样本图像”的描述</a></div>
                     <!-- class="figure" -->
                     <p>下面的例子生成具有默认白色背景，60个像素的宽度，和25个像素的高度的反混叠GIF图像，显示命名为线型<code class="codeph">L.PH</code>来自名为地图可视化数据源<code class="codeph">mvdemo</code> ：</p><pre class="oac_no_warn" dir="ltr">http://www.mycorp.com/mapviewer/omserver?sty=l.ph&amp;ds=mvdemo&amp;f=gif&amp;w=60&amp;h=25&amp;aa=true</pre><p>上述请求生成的显示类似于<a href="map-visualization-concepts.html#GUID-443058E1-C632-4068-B50E-D34CEED7C0EF__BABGICDG">图2-5中</a>的显示。
                     </p>
                     <div class="figure" id="GUID-443058E1-C632-4068-B50E-D34CEED7C0EF__BABGICDG">
                        <p class="titleinfigure">图2-5指定线型的示例图像</p><img src="img/sample_image_2.gif" alt="下面是图2-5的描述" title="下面是图2-5的描述" longdesc="img_text/sample_image_2.html"><br><a href="img_text/sample_image_2.html">“图2-5指定线型示例图像”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="样式是可用于表示空间要素的可视属性。">样式</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV10102"></a><a id="JIMPV10101"></a><div class="props_rev_3"><a id="GUID-6BC2C93D-008E-434E-B7EE-9F870F8A5EC9" name="GUID-6BC2C93D-008E-434E-B7EE-9F870F8A5EC9"></a><h4 id="JIMPV-GUID-6BC2C93D-008E-434E-B7EE-9F870F8A5EC9" class="sect4"><span class="enumeration_section">2.2.6</span>允许文本样式重叠或重叠</h4>
                  <div>
                     <p>您可以指定文本样式<code class="codeph">allow-overlap</code> ，这意味着任何区域要素（例如将其用作标签样式的多边形）都将允许其文本标签在地图上重叠。以下示例显示了<code class="codeph">allow-overlap</code>属性设置为<code class="codeph">true</code>的样式的XML定义。
                     </p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;svg width =“1in”height =“1in”&gt; &lt;desc&gt; &lt;/ desc&gt; &lt;g class =“text”allow-overlap =“true”style =“font-style：plain; font-family：Serif; font-size：11pt; font-weight：bold;填充：＃000000“&gt; Hello World！&lt;/ g&gt; &lt;/ svg&gt;</pre><p>例如，如果国家/地区的名称用作标签文本，并且其样式的属性值为<code class="codeph">allow-overlap="true"</code> ，则<code class="codeph">allow-overlap="true"</code>其他要素的标签（例如州名称）与其重叠。下图显示了渲染地图的一部分，其中国家标签“美国”与州标签“Colorado”和“Kansas”略有重叠。
                     </p>
                     <div class="figure" id="GUID-6BC2C93D-008E-434E-B7EE-9F870F8A5EC9__GUID-20DBD3F8-DB86-4AFF-B7FA-FD0FCEFE9856">
                        <p class="titleinfigure">图2-6带有allow-overlap =“true”的文本样式</p><img src="img/allow_overlap.jpg" alt="下面是图2-6的描述" title="下面是图2-6的描述" longdesc="img_text/allow_overlap.html"><br><a href="img_text/allow_overlap.html">“图2-6带有allow-overlap =的文本样式=”true“”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="样式是可用于表示空间要素的可视属性。">样式</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9547"></a><div class="props_rev_3"><a id="GUID-DABE41E7-BF70-4892-8842-99D947B6A705" name="GUID-DABE41E7-BF70-4892-8842-99D947B6A705"></a><h3 id="JIMPV-GUID-DABE41E7-BF70-4892-8842-99D947B6A705" class="sect3"><span class="enumeration_section">2.3</span>主题</h3>
               <div>
                  <p><span class="italic">主题</span>可能是地图可视化工具中最重要的概念。<span class="bold">主题</span>是特定数据层的可视化表示。
                  </p>
                  <p>从概念上讲，主题是一组共享相似属性的地理要素，另外还有渲染和标注规则，它们告诉地图可视化工具使用哪些样式来渲染和标记要素。更确切地说，当您定义主题时，实际上是在为地图可视化工具提供以下信息：在何处以及如何获取数据，以及如何呈现和标记数据。</p>
                  <p>根据主题的创建方式，它还可以分类为预定义主题或动态（JDBC）主题。对于<span class="bold">预定义的主题</span> ，主题的定义在独立的Map Builder工具中创建并存储在数据库中。对于<span class="bold">动态主题</span> ，主题的定义（XML）由应用程序实时创建。动态主题通常使用应用程序构造的自定义SQL查询来获取其数据。
                  </p>
                  <p>通常，主题的数据来自空间启用的表，即具有SDO_GEOMETRY类型的列的数据库表或视图。例如，名为<code class="codeph">US_STATES</code>的主题可能基于STATES表，该表具有名为GEOMETRY的列，以及任何其他非空间属性列。这种类型的主题通常称为几何主题。除了几何数据，其他类型的数据库管理的地理数据可以与相应类型的主题相关联;例如：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>存储在BLOB中的地理配准图像（图像主题）</p>
                     </li>
                     <li>
                        <p>Oracle Spatial and Graph GeoRaster数据（GeoRaster主题）</p>
                     </li>
                     <li>
                        <p>Oracle Spatial and Graph网络数据模型（网络主题）</p>
                     </li>
                     <li>
                        <p>Oracle Spatial and Graph拓扑数据模型（拓扑主题）</p>
                     </li>
                     <li>
                        <p>制图注释文本（注释主题）</p>
                     </li>
                  </ul>
                  <p>地图可视化主题不仅可用于呈现存储在数据库中的地理数据，还可用于呈现源自其他来源的数据，例如Web服务（WFS，WMS和WMTS）或本地文件系统（通过自定义空间数据提供程序界面） ）。</p>
                  <p>无论与主题相关联的数据类型（表示外部渲染的地图图层的WMS和WMTS主题除外），仍需要为每个主题定义地图可视化器样式规则，并且样式规则引用的样式必须存在并作为映射元数据的一部分存储在数据库中。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">预定义主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E">JDBC主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575">图像主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9">网络主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-5A7910EC-68E5-4310-A816-217FCD1E4460">拓扑主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-C0538735-A453-4161-BADF-1FB8BA628B26">WFS主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8">WMTS主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42">自定义几何主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9">注释文本主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024">LRS（线性参考系统）主题</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754">专题制图</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-F07E0F57-702A-4C14-923D-52BAEE467762">影响主题外观的属性</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">映射可视化概念</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9548"></a><div class="props_rev_3"><a id="GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED" name="GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED"></a><h4 id="JIMPV-GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED" class="sect4"><span class="enumeration_section">2.3.1</span>预定义主题</h4>
                  <div>
                     <p><span class="bold">预定义主题</span>是一个主题，其定义存储在用户的数据库模式中。数据库用户的所有预定义主题都存储在该用户的USER_SDO_THEMES视图中（在<a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。">Map Visualizer元数据视图中</a>描述，尤其是<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图</a> ）。在地图请求中包含预定义主题时，只需指定主题名称。地图可视化工具自动查找主题的定义，基于它构建查询，检索相关的空间和属性数据，并根据主题的样式规则呈现数据。
                     </p>
                     <p><a id="d7682e1470" class="indexterm-anchor"></a>每个预定义主题必须具有关联的基表或视图。如果您将主题基于视图，则必须在视图所有者中插入一行<a id="d7682e1475" class="indexterm-anchor"></a> USER_SDO_GEOM_METADATA视图（在<a href="../spatl/spatial-datatypes-metadata.html#SPATL545" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide中描述</span></a> ），指定视图及其空间列。如果视图是连接视图（即，如果它基于多个表），则必须在<a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="A theme definition contains one &lt;styling_rules&gt; element, which may have several other elements depending on the theme type.">主题的样式规则中</a>指定<code class="codeph">key_column</code>属性（在<a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="主题定义包含一个&lt;styling_rules&gt;元素，根据主题类型，该元素可能包含多个其他元素。">主题：样式规则中</a>描述）。此要求的原因是默认情况下，地图可视化工具会根据基表中的rowid缓存预定义主题的几何;但是，对于连接视图，没有ROWID伪列，因此您必须指定键列。
                     </p>
                     <p>对于大多数类型的预定义主题（但不是WMS主题），您可以使用地图生成器工具来创建和预览主题。有关Map Builder工具的信息，请参阅<a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="本章简要介绍了地图可视化组件Map Builder工具，也称为Oracle Map Builder。它不提供有关工具界面的详细信息;为此，您应该使用Oracle Map Builder时可以使用的在线帮助。">Oracle Map Builder工具</a> 。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD">预定义空间几何主题中的样式规则</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB">Map Visualizer如何为样式规则制定SQL查询</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-FA13BA3E-86EF-45B4-8888-E755E3A04C5C">带绑定参数的样式规则</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB">在单个样式规则中应用多个渲染样式</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B">使用具有缩放范围的多个渲染样式</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB">缓存预定义主题</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203">特征标签和国际化</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-9108FDF5-54BF-49C7-B390-B9E2D7B07CA5">线性要素的主要和次要标签</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9550"></a><a id="JIMPV9549"></a><div class="props_rev_3"><a id="GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD" name="GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD"></a><h5 id="JIMPV-GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD" class="sect5"><span class="enumeration_section">2.3.1.1</span>预定义空间几何主题中的样式规则</h5>
                     <div>
                        <p>每个预定义主题始终与一个或多个<span class="bold">样式规则</span>相关联，XML格式的规范控制主题如何显示的方面。本节介绍预定义空间几何主题的样式规则，例如<a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__BABEBFDE">示例2-6中</a>显示的机场主题。其他类型的主题（如图像，GeoRaster，网络和拓扑主题）都有自己独特的样式规则要求，这些将在解释这些主题的章节中讨论。但是，所有类型主题的样式规则都分组在XML文档中的<code class="codeph">&lt;styling_rules&gt;</code>元素下，该元素存储在USER_SDO_THEMES视图中每个预定义主题的STYLING_RULES列中。（ <code class="codeph">&lt;styling_rules&gt;</code> DTD在<a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="主题定义包含一个&lt;styling_rules&gt;元素，根据主题类型，该元素可能包含多个其他元素。">主题：样式规则中</a>描述。）
                        </p>
                        <div class="infoboxnote" id="GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__GUID-0DF1FEC8-91A1-40DF-ABB7-5BC726F4CF04">
                           <p class="notep1">注意：</p>
                           <p>以下命名约定用于本章示例中样式名称中的前缀： <code class="codeph">v.</code>表示变量（高级样式）， <code class="codeph">m.</code>表示标记， <code class="codeph">c.</code>表示颜色， <code class="codeph">l.</code>表示行和<code class="codeph">t.</code>表示文字。（如果样式不在当前用户的架构下，则必须指定所有者的架构名称，后跟冒号。例如： <code class="codeph">mdsys:c.red</code> 。）
                           </p>
                           <p>在XML文档的内容（字符数据）中， <code class="codeph">&amp;lt;</code>和<code class="codeph">&amp;gt;</code>必须分别用来表示<code class="codeph">&lt;</code>和<code class="codeph">&gt;</code> 。否则， <code class="codeph">&lt;</code>或<code class="codeph">&gt;</code> （例如在<code class="codeph">WHERE CATEGORY &gt; 'B'</code> ）将由XML解析器解释为XML标记的一部分。
                           </p>
                        </div>
                        <div class="example" id="GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__BABEBFDE">
                           <p class="titleinexample">示例2-6机场主题样式规则的XML定义</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules&gt; &lt;rule&gt; &lt;features style =“c.black grey”&gt; runway_number＆gt; 1 &lt;/ features&gt; &lt;label column =“name”style =“t.airport name”&gt; 1 &lt;/ label&gt; &lt;/ rule&gt; &lt;rule&gt; &lt;features style =“m.airplane”&gt; runway_number = 1 &lt;/ features&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre><p>每个样式规则都有一个必需的<code class="codeph">&lt;features&gt;</code>元素和一个可选的<code class="codeph">&lt;label&gt;</code>元素。<code class="codeph">&lt;features&gt;</code>元素指定将根据用户定义的谓词以及要用于所选要素的样式选择表或视图中的哪一行或多行（要素）。您可以将任何有效的SQL谓词指定为此元素的值。<code class="codeph">&lt;label&gt;</code>元素指定是否注释所选要素，如果是，则表或视图中的哪一列用于文本标签。
                           </p>
                           <p>在<a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__BABEBFDE">示例2-6中</a> ，有两个与<code class="codeph">Airport</code>主题相关联的样式规则：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>第一个规则指定只满足条件的那些行<code class="codeph">runway_number &amp;gt; 1</code> （即跑道号大于1），并使用名为<code class="codeph">c.black gray</code>的样式渲染这些样式。如果未提供任何值，则不应用WHERE子句条件。例如，假设定义如下（即省略<code class="codeph">runway_number &amp;gt; 1</code>条件）：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules&gt; &lt;rule&gt; &lt;features style =“c.black grey”/&gt; &lt;label column =“name”style =“t.airport name”&gt; 1 &lt;/ label&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre><p>在这种情况下，将选择所有机场功能，并使用名为<code class="codeph">c.black gray</code>的颜色样式进行渲染。
                                 </p>
                                 <p><a id="d7682e1716" class="indexterm-anchor"></a>第一个规则还有一个<code class="codeph">&lt;label&gt;</code>元素，它使用文本样式<code class="codeph">t.airport name</code>指定表或视图中的NAME列将用于注释每个机场。<code class="codeph">&lt;label&gt;</code>元素的值（可以是任何求值为数值的SQL表达式）用于确定是否对要素进行注释。如果数值大于零，则将对该功能进行注释。在这种情况下，因为值是常量1，所以<code class="codeph">&lt;features&gt;</code>元素指定的所有要素都将使用NAME列中的值进行注释。如果某个要素的值小于或等于零，则不会对该要素进行注释。
                                 </p>
                              </li>
                              <li>
                                 <p>适用于仅有一条跑道的机场的第二条规则没有<code class="codeph">&lt;label&gt;</code>元素，因此无法对所有此类机场进行注释。此外，满足第二个规则的<code class="codeph">m.airplane</code>将使用其<code class="codeph">&lt;features&gt;</code>元素中指定的不同样式（ <code class="codeph">m.airplane</code> ）进行渲染。
                                 </p>
                              </li>
                           </ul>
                           <p>您可以将每个样式规则视为对主题的基表或视图的过滤，因为它仅选择行的子集并应用该规则的呈现和标注样式。实际上，地图可视化工具为每个样式规则制定了完整的SQL查询。此查询字符串遵循固定格式，如<a href="map-visualization-concepts.html#GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB">Map Visualizer如何为样式规则制定SQL查询中所述</a> 。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">预定义主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9551"></a><div class="props_rev_3"><a id="GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB" name="GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB"></a><h5 id="JIMPV-GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB" class="sect5"><span class="enumeration_section">2.3.1.2</span> Map Visualizer如何为样式规则制定SQL查询</h5>
                     <div>
                        <p>要查看地图可视化工具如何为样式规则制定SQL查询，请考虑机场主题示例中的第一个样式规则（ <a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD">预定义空间几何主题</a>中的<a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD">样式规则中的</a> <a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__BABEBFDE">示例2-6</a> ）：</p><pre class="oac_no_warn" dir="ltr">&lt;styling_rules&gt; &lt;rule&gt; &lt;features style =“c.black grey”&gt; runway_number＆gt; 1 &lt;/ features&gt; &lt;label column =“name”style =“t.airport name”&gt; 1 &lt;/ label&gt; &lt;/ rule&gt;。 。 。&lt;/ styling_rules&gt;</pre><p>当地图可视化工具处理此主题时，它会为此样式规则制定一个查询字符串，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT ROWID，GEOMETRY，'C.BLACK GRAY'，NAME，'T.AIRPORT NAME'，1，'rule＃0'FROM AIRPORT_POINT WHERE MDSYS.SDO_FILTER（GEOMETRY，MDSYS.SDO_GEOMETRY（2003,8265，NULL，MDSYS.SDO_ELEM_INFO_ARRAY） （1,1003,3），MDSYS.SDO_ORDINATE_ARRAY（：mvqboxxl，：mvqboxyl，：mvqboxxh，：mvqboxyh）），'querytype = WINDOW'）='TRUE'</pre><p>在前面的查询字符串中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>主题的基表名称<code class="codeph">AIRPORT_POINT</code>出现在FROM子句中</p>
                           </li>
                           <li>
                              <p>SELECT列表包括ROWID作为第一列。ROWID是预定义主题的默认key_column属性。</p>
                           </li>
                           <li>
                              <p>SELECT列表中的下一列是GEOMETRY。这是此主题的几何列。</p>
                           </li>
                           <li>
                              <p>SELECT列表中的下一列是文字字符串<code class="codeph">'C.BLACK GRAY'</code> ，它是此规则的呈现样式名称。
                              </p>
                           </li>
                           <li>
                              <p>SELECT列表中的下一列是NAME列，它将提供标签文本。它在此样式规则的<code class="codeph">&lt;label&gt;</code>元素中指定。
                              </p>
                           </li>
                           <li>
                              <p>SELECT列表中的下一列是文字字符串<code class="codeph">'T.AIRPORT NAME'</code> ，它是<code class="codeph">&lt;label&gt;</code>元素中指定的标签样式名称。
                              </p>
                           </li>
                           <li>
                              <p>SELECT列表中的下一列是文字值<code class="codeph">1</code> ，它是<code class="codeph">&lt;label&gt;</code>元素本身的值。
                              </p>
                           </li>
                           <li>
                              <p>SELECT列表中的下一列是文字字符串<code class="codeph">'rule#0'</code> 。这仅由地图可视化工具在内部使用。
                              </p>
                           </li>
                           <li>
                              <p>大型WHERE子句本质上是一个Oracle Spatial and Graph过滤运算符SDO_FILTER。这个WHERE子句是由地图可视化自动添加（而<span class="italic">不是</span>你需要指定定义主题时的东西）。它确保仅从基表中获取与当前地图查看窗口联系的那些地理要素。四个绑定变量<code class="codeph">mvqboxxl</code> ， <code class="codeph">mvqboxyl</code> ， <code class="codeph">mvqboxxh</code>和<code class="codeph">mvqboxyh</code>将自动填入当前地图查看窗口的坐标。
                              </p>
                           </li>
                        </ul>
                        <p>在为预定义几何主题的样式规则的样式规则构造SQL查询时，地图可视化工具始终使用前面的格式。它使用不同的格式来查询其他类型的主题，例如拓扑或GeoRaster主题。这里没有描述这些其他查询的格式;但是，如果您感兴趣，可以将地图可视化工具实例的日志记录级别设置为<code class="codeph">FINEST</code> ，提交包含特定类型主题的地图请求，并检查地图可视化工具日志文件以查看地图可视化工具构建的确切查询。
                        </p>
                        <p>现在，查询结果集中的每一行（或特征）都包含地图可视化工具所需的所有信息：空间数据，渲染和标注样式名称，标签文本和标签条件。然后，地图可视化工具为每一行构造一个内存中的要素对象，并将它们发送到渲染管道以显示在地图上。</p>
                        <p>如果为主题指定了两个或多个样式规则，则会对规则的SQL查询（从头到尾）执行UNION ALL操作，以从表或视图中获取限定特征。</p>
                        <p>如果在规则中指定了高级样式，则该规则的查询的SELECT列表将包括高级样式所需的其他属性列。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">预定义主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9552"></a><div class="props_rev_3"><a id="GUID-FA13BA3E-86EF-45B4-8888-E755E3A04C5C" name="GUID-FA13BA3E-86EF-45B4-8888-E755E3A04C5C"></a><h5 id="JIMPV-GUID-FA13BA3E-86EF-45B4-8888-E755E3A04C5C" class="sect5"><span class="enumeration_section">2.3.1.3</span>带绑定参数的样式规则</h5>
                     <div>
                        <p><a id="d7682e1905" class="indexterm-anchor"></a><a id="d7682e1907" class="indexterm-anchor"></a><a id="d7682e1911" class="indexterm-anchor"></a><a id="d7682e1913" class="indexterm-anchor"></a>正如<a href="map-visualization-concepts.html#GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB">Map Visualizer如何为样式规则制定SQL查询中所述，样式规则</a>的<code class="codeph">&lt;features&gt;</code>元素可以定义查询条件以从基表或视图中选择要素。此查询条件通常包含硬编码的SQL表达式，例如机场主题中的<code class="codeph">runway_num &gt; 1</code> 。但是，您可以在查询谓词中包含绑定变量。这样的主题通常被称为<span class="italic">模板化主题</span> ，因为它实质上定义了如何显示某些特征的模板，并且通过向查询谓词提供绑定值在运行时确定精确的特征集。
                        </p>
                        <p>模板化主题的概念允许您定义单个主题并使映射请求之间的绑定值发生变化。例如，请考虑以下样式规则：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules&gt; &lt;rule&gt; &lt;features style =“C.RED”&gt;（ <span class="bold">state_abrv =：1</span> ）&lt;/ features&gt; &lt;label column =“STATE”style =“T.STATE NAME”&gt; 1 &lt;/ label&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre><p>前面的样式规则定义了一个<code class="codeph">&lt;features&gt;</code>元素，其中的查询条件基于<code class="codeph">state_abrv</code>属性的值，应用程序必须提供该属性。在map visualizer请求中，必须在theme部分定义绑定参数，并且每个绑定参数由值和SQL类型定义。在地图请求的以下主题定义中，状态缩写值为<code class="codeph">ME</code> ，变量SQL类型为<code class="codeph">String</code> 。值<code class="codeph">ME</code>将与预定义的主题样式规则一起使用。
                        </p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“THEME_US_DYN_STATES”&gt; &lt;binding_parameters&gt; &lt;parameter value =“ME”type =“String”/&gt; &lt;/ binding_parameters&gt; &lt;/ theme&gt;</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">预定义主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9554"></a><a id="JIMPV9553"></a><div class="props_rev_3"><a id="GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB" name="GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB"></a><h5 id="JIMPV-GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB" class="sect5"><span class="enumeration_section">2.3.1.4</span>在单个样式规则中应用多个渲染样式</h5>
                     <div>
                        <p>样式规则的<code class="codeph">&lt;feature&gt;</code>元素允许您使用<code class="codeph">style</code>属性仅指定一种呈现样式。如果要在不使用多个主题的情况下将多种呈现样式应用于要素，则无法指定多个样式规则，因为每个规则都会选择不同的要素子集。要在不使用多个主题的情况下将多种渲染样式应用于要素，必须使用<code class="codeph">&lt;rendering&gt;</code>元素而不是<code class="codeph">&lt;features&gt;</code>元素的<code class="codeph">style</code>属性。
                        </p>
                        <p><code class="codeph">&lt;rendering&gt;</code>元素具有以下示例中显示的格式：</p><pre class="oac_no_warn" dir="ltr">&lt;rendering&gt; &lt;style name =“V.POIVMK”value_columns =“FEATURE_CODE”&gt; &lt;substyle name =“V.POIVBKT”value_columns =“POINT_ID”changes =“FILL_COLOR”/&gt; &lt;/ style&gt; &lt;/ rendering&gt;</pre><p>在<code class="codeph">&lt;rendering&gt;</code>元素中， <code class="codeph">&lt;style&gt;</code>元素指定<code class="codeph">&lt;rendering&gt;</code>要素时要使用的样式的名称，以及一个或多个用于高级样式的值列（逗号分隔）。在前面的示例中，样式名称为<code class="codeph">V.POIMVK</code> ，值<code class="codeph">V.POIMVK</code> FEATURE_CODE。</p>
                        <p>在<code class="codeph">&lt;style&gt;</code>元素中， <code class="codeph">&lt;substyle&gt;</code>元素允许使用两个属性值的组合来渲染要素，例如通过<code class="codeph">&lt;style&gt;</code>元素定义要素形状和<code class="codeph">&lt;substyle&gt;</code>元素定义要素颜色。这对于一次渲染点要素非常有用，但基于两个属性值。您可以指定一个或多个值列（逗号分隔），以及要应用的更改（当前仅支持<code class="codeph">FILL_COLOR</code> ）。
                        </p>
                        <p>您可以使用<code class="codeph">&lt;rendering&gt;</code>元素指定多个<code class="codeph">&lt;style&gt;</code>元素，以实现以下目标：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要创建一种高级样式，其中与某些属性（列）关联的基本高级样式可以通过使用子类使其呈现受到某些其他属性的影响。例如，高级样式可以基于一个值列显示不同大小的标记，而使用辅助颜色样式可以根据另一个值列更改这些标记的填充颜色。</p>
                           </li>
                           <li>
                              <p>使用多个样式渲染要素（实现堆叠样式的效果）。</p>
                           </li>
                        </ul>
                        <p><a href="map-visualization-concepts.html#GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB__CIHJEEFJ">示例2-7</a>显示了使用<code class="codeph">&lt;rendering&gt;</code>元素的预定义主题样式规则。<code class="codeph">&lt;features&gt;</code>元素是规则的一部分，必须定义，因为它还指定了查询条件，但未指定样式属性。<code class="codeph">&lt;rendering&gt;</code>元素定义了如何呈现要素。
                        </p>
                        <div class="example" id="GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB__CIHJEEFJ">
                           <p class="titleinexample">示例2-7样式规则使用&lt;rendering&gt;元素</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules&gt; &lt;rule&gt; &lt;features&gt; &lt;/ features&gt; &lt;label column =“NAME”style =“T.STREET2”&gt; 1 &lt;/ label&gt; &lt;rendering&gt; &lt;style name =“V.POIVMK”value_columns =“FEATURE_CODE “&gt; &lt;substyle name =”V.POIVBKT“value_columns =”POINT_ID“changes =”FILL_COLOR“/&gt; &lt;/ style&gt; &lt;/ rendering&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre><p><code class="codeph">&lt;rendering&gt;</code>元素还可以与动态主题，几何主题和拓扑主题一起使用。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">预定义主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10068"></a><a id="JIMPV10067"></a><div class="props_rev_3"><a id="GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B" name="GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B"></a><h5 id="JIMPV-GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B" class="sect5"><span class="enumeration_section">2.3.1.5</span>使用具有比例范围的多种渲染样式</h5>
                     <div>
                        <p><code class="codeph">&lt;rendering&gt;</code>元素（请参阅<a href="map-visualization-concepts.html#GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB">在单个样式规则中应用多个渲染样式</a> ）可以定义多个<code class="codeph">&lt;style&gt;</code>元素。您还可以为每个<code class="codeph">&lt;style&gt;</code>元素指定比例范围。通过使用具有比例范围的多个堆叠样式，您可以为不同比例定义具有不同表示的单个主题。
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B__CIHGCCIJ">示例2-8</a>显示了具有堆叠样式的主题样式规则。每种样式都定义了比例范围。
                        </p>
                        <div class="example" id="GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B__CIHGCCIJ">
                           <p class="titleinexample">示例2-8具有堆叠样式的主题样式规则</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules&gt; &lt;rule&gt; &lt;features&gt; &lt;/ features&gt; &lt;label column =“STATE”style =“T.S02_STATE_ABBREVS”&gt; 1 &lt;/ label&gt; &lt;rendering&gt; &lt;style name =“C.COUNTIES”max_scale =“5.0 E7“scale_mode =”RATIO“/&gt; &lt;style name =”C.RB13_1“min_scale =”5.0E7“max_scale =”1.0E7“scale_mode =”RATIO“/&gt; &lt;style name =”L.DPH“min_scale =”1.0 E7“scale_mode =”RATIO“/&gt; &lt;/ rendering&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">预定义主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9555"></a><div class="props_rev_3"><a id="GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB" name="GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB"></a><h5 id="JIMPV-GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB" class="sect5"><span class="enumeration_section">2.3.1.6</span>预定义主题的缓存</h5>
                     <div>
                        <p>默认情况下，地图可视化工具在从数据库中提取以供地图可视化工具渲染引擎处理时，会自动缓存预定义主题的空间数据。相比之下，动态（JDBC）主题的数据永远不会缓存在地图可视化工具中。如果您不希望缓存预定义主题的任何数据（例如对于其基础基表不断更新的主题），则可以在主题的<code class="codeph">&lt;styling_rules&gt;</code>元素中将<code class="codeph">caching</code>属性设置为<code class="codeph">NONE</code> 。（ <code class="codeph">&lt;styling_rules&gt;</code>元素，包括<code class="codeph">caching</code>属性，在<a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="主题定义包含一个&lt;styling_rules&gt;元素，根据主题类型，该元素可能包含多个其他元素。">主题：样式规则中</a>描述。）
                        </p>
                        <p>对于基本数据为静态或只读的常用主题，请指定<code class="codeph">caching ALL</code>以获得最佳性能。这使得地图可视化工具在首次访问主题定义时，获取所有要素（包括空间数据，属性数据和与之关联的样式信息）并将其缓存在地图可视化器内存中，从而创建内存中的R-主题空间数据的树。需要该主题的所有后续请求都在本地发生，而不是发送到数据库。
                        </p>
                        <p><a id="d7682e2217" class="indexterm-anchor"></a>如果<code class="codeph">caching</code>属性值为<code class="codeph">NORMAL</code> （默认值），则每次请求涉及该主题的地图时，地图可视化工具都会查询数据库以获取空间数据和任何关联的属性数据。但是，如果已经缓存了由rowid或用户指定的键列引用的任何空间几何数据，则会跳过unpickling进程（从原始数据库几何格式到Java几何对象的转换）。但是，如果内存不是问题，并且经常使用的主题可以完全适合缓存，则应指定<code class="codeph">caching ALL</code> ，以在初始加载后消除该主题的几乎所有数据库访问。
                        </p>
                        <p>由于地图可视化工具空间数据缓存是全局的，因此地图可视化工具访问的所有预定义主题都会竞争全局固定大小的内存缓存。缓存完全驻留在内存中，您可以指定缓存的最大大小，如<a href="introduction-to-map-visualization-component.html#GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781">自定义空间数据缓存中所述</a> 。达到缓存限制时，将从缓存中删除较旧的缓存数据，以便为最近访问的数据腾出空间，但不会从缓存中删除使用<code class="codeph">caching ALL</code>指定的主题数据，并且地图可视化工具不会重新查询数据库对于这些主题。
                        </p>
                        <p>目前，对于预定义的注记和自定义几何主题，禁用了缓存。对于自定义几何主题，您可以在提供程序实现中实现缓存机制。但是，对于每个请求，都会创建一个新的提供者实例;如果您实现本地缓存机制，它将丢失。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">预定义主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9928"></a><a id="JIMPV9927"></a><div class="props_rev_3"><a id="GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203" name="GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203"></a><h5 id="JIMPV-GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203" class="sect5"><span class="enumeration_section">2.3.1.7</span>特征标签和国际化</h5>
                     <div>
                        <p>地图可视化工具包括对翻译的主题标签的支持。通常使用预定义的地图可视化工具主题，您可以指定标签列，该列将提供用于标记主题的每个要素的所有文本字符串。这些文本字符串是以特定语言（例如英语）存储在数据库表列中的字符串值。但是，您还可以使用<span class="italic">资源束</span>提供这些存储的字符串值的不同转换。当此类翻译文本字符串可用时，您可以指示地图可视化工具使用特定语言或区域设置标记主题的要素。
                        </p>
                        <div class="infoboxnote" id="GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203__GUID-DB7CE037-FF1E-4752-B4C0-121CB65B4603">
                           <p class="notep1">注意：</p>
                           <p>此时，只有预定义的几何主题支持资源包。</p>
                        </div>
                        <p>提供翻译和指示地图可视化工具使用特定用户语言标记主题的步骤如下：</p>
                        <ol>
                           <li>
                              <p>准备翻译。</p>
                              <p>典型的地图可视化工具预定义几何主题从表中获取所有基础数据。您可以指定其中一个（字符串类型）列作为此主题的标签列。这称为标签列。当标签列需要翻译成不同的语言时，您从表中提取所有值，并将它们存储在属性文件中，例如<code class="codeph">StringResources.properties</code> 。（请注意，文件名<code class="codeph">StringResources.properties</code>假定提取的文本都是英文的。如果不是，则属性文件名需要遵循约定，其中语言代码和可选区域或国家/地区代码是文件名中的后缀。例如， <code class="codeph">StringResources_fr.properties</code>仅包含法语翻译，而<code class="codeph">StringResources_zh_CN.properties</code>仅包含简体中文。）
                              </p>
                              <p>属性文件是纯文本文件，遵循非常简单的格式。例如，一个简单的<code class="codeph">StringResources.properties</code>文件可能包含以下内容：</p><pre class="oac_no_warn" dir="ltr">＃这是字符串的英文版。加州=加利福尼亚州内华达州=内华达州蒙大拿州=蒙大拿州</pre><p>第一行是注释，以<code class="codeph">#</code>字符开头。每个后续行包含一对键（第一个字符串）和值（第二个字符串）。键直接来自标签列，而值是相应的翻译。由于此特定文件包含默认的英文文本字符串，因此键和值（转换）在每种情况下都相同。请注意，键应始终使用英语。
                              </p>
                              <p>在此默认属性文件中，您的翻译专家应创建一组属性文件，每个翻译都有一个文件。使用前面的简单示例，简体中文（ <code class="codeph">StringResources_zh_CN.properties</code> ）的翻译文件应如下所示，其中每个键的值已被密钥的中文翻译替换，编码为Unicode字符串：</p><pre class="oac_no_warn" dir="ltr">＃这是字符串的中文版。加利福尼亚州= \ u6CA1 \ u6709 \ u5448 \ u7300 \ u7384 \ u7343 \ u3002 \ u3002内华达= \ u65E0 \ u6CD5 \ u52A0 \ u8F7D \ u4E3B \ u9898 \ u3002蒙大拿州= \ u65E0 \ u6CD5 \ u52A0 \ u8F7D \ u6837 \ u5F0F \ u3002</pre><p>默认属性文件<code class="codeph">StringResouces.properties</code>以及共享相同文件名的所有语言特定文件（语言和区域后缀除外）共同形成所谓的<span class="italic">资源包</span> 。在这种情况下，资源包名为<code class="codeph">StringResources</code> 。您可以使用任何您喜欢的名称命名资源包，但不同的包（包含不同的键集）应始终使用不同的基本名称。
                              </p>
                              <p>有关Java资源包和属性文件的更多信息，请参阅Java语言文档。</p>
                           </li>
                           <li>
                              <p>将已翻译的文本字符串作为Java资源包提供，该资源包可以基于Java资源类或普通属性文件。</p>
                              <p>在翻译完所有标签文本字符串之后，必须将所有文件（资源包）放在地图可视化工具CLASSPATH中，以便地图可视化工具可以在运行时找到这些文件。通常，您可以使用map visualizer <code class="codeph">WEB-INF/classes</code>文件夹：将所有文件（包括基本<code class="codeph">StringResources.properties</code>和特定于语言的文件（如<code class="codeph">StringResources_fr.properties</code>和<code class="codeph">StringResources_zh_CN.properties</code> ））复制到此文件夹中。
                              </p>
                              <p>如果将资源包的所有文件放在<code class="codeph">WEB-INF/classes</code>下的子文件夹中，则资源包的名称（如地图可视化工具所知）将需要以此子文件夹名称为前缀。这与将Java类放在包名后面的目录结构中的方式类似。例如，如果将所有<code class="codeph">StringResources*.properties</code>文件放在<code class="codeph">WEB-INF/classes/i18n/</code> ，那么稍后当您使用地图可视化工具注册资源包时，资源包的实际名称应为<code class="codeph">i18n.StringResources</code> 。
                              </p>
                           </li>
                           <li>
                              <p>通过向资源包注册地图可视化工具，在主题定义中指定资源包的名称。</p>
                              <p>要使地图可视化工具找到已翻译的类，必须在主题定义中指定资源包的完整名称。最简单的方法是使用Map Builder实用程序，将资源包名称指定为主题编辑器的“高级参数”窗格中的“转换类”。<a href="map-visualization-concepts.html#GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203__CIHFFACC">图2-7</a>显示了为Translation Class指定的<code class="codeph">StringResources</code> 。
                              </p>
                              <div class="figure" id="GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203__CIHFFACC">
                                 <p class="titleinfigure">图2-7为主题指定资源包</p><img src="img/translation_class.gif" alt="下面是图2-7的描述" title="下面是图2-7的描述" longdesc="img_text/translation_class.html"><br><a href="img_text/translation_class.html">“图2-7为主题指定资源包”的描述</a></div>
                              <!-- class="figure" -->
                              <p>如上一步所述，如果资源包文件位于子文件夹中，则子文件夹名称必须是资源包的基本名称，以句点分隔，就好像资源包文件是包中的Java类一样。</p>
                           </li>
                           <li>
                              <p>请求地图或主题时指定语言参数。</p>
                              <p>为Oracle Maps JavaScript API（在<a href="oracle-maps.html#GUID-0D5BC30A-40AC-4347-89FA-E95D44918E32" title="Oracle Maps JavaScript客户端是一个基于浏览器的地图可视化引擎，它在地图图块服务器之上工作，并使用HTML5技术。">Oracle Maps JavaScript API中</a>描述）或XML映射请求API（在<a href="map-visualization-servers.html#GUID-0D2CF483-95C0-45D0-B4E8-5A4578741A63" title="地图可视化工具作为一组Java Enterprise Edition包，包含一组服务器以提供地图服务。">Map Visualization Servers中</a>描述）指定每个映射请求的首选语言。
                              </p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>在JavaScript代码中，在MVThemeBasedFOI类的调用中指定标签语言代码。以下示例使FOI主题以简体中文显示其标签：</p><pre class="oac_no_warn" dir="ltr">themebasedfoi = new MVThemeBasedFOI（'themebasedfoi1'，'mvdemo.theme_demo_states'）; <span class="bold">themebasedfoi.setLabelLanguageCode（“zh-cn”）</span> ; themebasedfoi.enableLabels（真）;</pre><p>使用<code class="codeph">setLabelLanguageCode(lang_code)</code>方法，您可以指定语言代码，以便地图可视化工具使用指定语言的文本字符串标记<code class="codeph">setLabelLanguageCode(lang_code)</code> ，该字符串必须是2个字母的语言代码（例如<code class="codeph">zh</code> ），后跟可选的连字符（ - ）和2个字母的国家代码（例如<code class="codeph">zh-cn</code> ）。语言代码由ISO 639标准定义，并列在多个网站上，例如<a href="http://www.loc.gov/standards/iso639-2/php/English_list.php" target="_blank"><code class="codeph">http://www.loc.gov/standards/iso639-2/php/English_list.php</code></a> 。如果未找到指定语言代码的已翻译文本字符串，则将使用英语文本字符串（或用于主题的默认字符串）进行标记。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在XML映射请求中，在<code class="codeph">lang</code>属性中指定语言。以下示例使标签以简体中文显示：</p><pre class="oac_no_warn" dir="ltr">&lt;map_request title =“Oracle LBS MAP”basemap =“demo_map”datasource =“mvdemo”width =“640”height =“480” <span class="bold">lang =“zh-CN”</span> format =“PNG_STREAM”&gt; &lt;center size =“5.15”&gt; &lt;geoFeature&gt; &lt;geometricProperty typeName =“center”&gt; &lt;Point&gt; &lt;coordinates&gt; -122.2615,37.5266 &lt;/ coordinates&gt; &lt;/ Point&gt; &lt;/ geometricProperty&gt; &lt;/ geoFeature&gt; &lt;/ center&gt; &lt;/ map_request&gt;</pre><p>只能使用ISO 639标准指定的语言代码和国家代码作为可能的<code class="codeph">lang</code>值。如果使用可选的国家/地区代码，则必须使用连字符（ - ）将其连接到语言代码。国家/地区代码和语言代码不区分大小写。
                                    </p>
                                    <p>如果将<code class="codeph">lang</code>属性指定为XML映射请求的一部分，则会将呈现给结果映射的每个主题检查以查看它是否具有关联的资源包。如果主题没有关联的资源包，或者找不到指定语言的翻译文本字符串，则使用默认值（存储在表列中的值）。
                                    </p>
                                    <p>如果未将<code class="codeph">lang</code>属性指定为XML映射请求的一部分，则始终使用默认文本字符串值（存储在表列中的值），而不管映射可视化器本身对哪个区域设置有效（或者更确切地说，它包含JVM） ）。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">预定义主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10103"></a><div class="props_rev_3"><a id="GUID-9108FDF5-54BF-49C7-B390-B9E2D7B07CA5" name="GUID-9108FDF5-54BF-49C7-B390-B9E2D7B07CA5"></a><h5 id="JIMPV-GUID-9108FDF5-54BF-49C7-B390-B9E2D7B07CA5" class="sect5"><span class="enumeration_section">2.3.1.8</span>线性特征的主要和次要标签</h5>
                     <div>
                        <p>地图可视化工具包括支持使用主要和次要标签标记线性要素。例如，街道名称可以标记为其英文名称作为主标签，并使用其本地（本机）语言作为辅助标签（反之亦然）。标记线性要素时，主要和次要标签在适用时沿着要素交替标记。</p>
                        <p>为地图可视化工具主题指定标签列时，该列将提供主要和辅助文本字符串，由“|||”分隔（三条垂直线）。例如，“Garden St ||| Rua Jardim”的文本字符串包含“Garden St”（英语）的主要文本字符串和“Rua Jardim”（葡萄牙语）的次要文本字符串。实际上，该标签列可以是两个现有列的串联，并且可以使用数据库触发器来保持其与两个基本列的一致性。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">预定义主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9557"></a><a id="JIMPV9556"></a><div class="props_rev_3"><a id="GUID-78BAAC41-964B-401F-A30E-31544CF4B73E" name="GUID-78BAAC41-964B-401F-A30E-31544CF4B73E"></a><h4 id="JIMPV-GUID-78BAAC41-964B-401F-A30E-31544CF4B73E" class="sect4"><span class="enumeration_section">2.3.2</span> JDBC主题</h4>
                  <div>
                     <p><span class="bold">JDBC主题</span>是使用地图请求动态定义的主题。 JDBC主题不会像预定义主题那样永久存储在数据库中。
                     </p>
                     <p>对于JDBC主题，您必须指定一个有效的SQL查询，以检索所有必需的空间数据（几何或其他类型的数据，如图像，GeoRaster，网络或拓扑）。如果需要属性数据，例如专题制图或空间数据分析，则查询也必须选择它。换句话说，您必须为JDBC主题提供正确且完整的查询。除了查询之外，您还可以指定要用于主题的呈现和标注样式。</p>
                     <p>对于基于空间几何的JDBC主题，地图可视化工具根据以下规则处理查询中指定的列：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>SDO_GEOMETRY类型的列被视为空间数据列。</p>
                        </li>
                        <li>
                           <p>名称或别名与JDBC主题的<code class="codeph">label_column</code>属性中指定的列匹配的任何列<code class="codeph">label_column</code>将被视为标签列，其值将用作标签的文本。
                           </p>
                        </li>
                        <li>
                           <p>任何其他列都被视为属性数据列，地图可视化工具可能使用也可能不使用。例如，如果呈现样式是高级样式，则该样式按照它们在查询的SELECT列表中出现的顺序处理任何属性列。因此，如果要执行专题制图并使用高级样式，则除了几何列和可选标注列之外，还必须指定专题制图所需的所有属性列。（标签列也可以是属性列，在这种情况下，您不需要在SELECT列表中指定该列。）</p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E__I1011943">示例2-9</a>是包含JDBC主题的映射请求。
                     </p>
                     <div class="example" id="GUID-78BAAC41-964B-401F-A30E-31544CF4B73E__I1011943">
                        <p class="titleinexample">示例2-9映射请求中的JDBC主题</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;map_request title =“我的MAP”datasource =“mvdemo”&gt; &lt;themes&gt; &lt;theme name =“jdbc_theme_1”&gt; &lt;jdbc_query datasource =“mvdemo”jdbc_srid =“41052”spatial_column =“geometry”render_style =“C.RED” &gt;从状态中选择几何，其中name ='MA'&lt;/ jdbc_query&gt; &lt;/ theme&gt; &lt;/ themes&gt; &lt;/ map_request&gt;</pre><p>地图可视化工具为<a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E__I1011943">示例2-9中</a>的JDBC主题执行的完整查询是：</p><pre class="oac_no_warn" dir="ltr">SELECT geometry FROM状态WHERE name ='MA';</pre><p>对于此请求，地图可视化工具会生成一个地图，该地图仅包含执行此JDBC主题查询后所选几何图形。但是，在更典型的情况下，映射请求将需要使用多个JDBC主题在基本映射的顶部绘制其他动态数据。此外，地图请求可以具有与之关联的查询窗口;也就是说，用户可能想要仅看到整个基本地图中包括的区域的一部分。在这种情况下，JDBC主题中的SQL查询将受到空间窗口查询，以消除任何不需要的结果。</p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9">基于两列定义点JDBC主题</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1">在数据库中存储复杂的JDBC主题</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9559"></a><a id="JIMPV9560"></a><a id="JIMPV9558"></a><div class="props_rev_3"><a id="GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9" name="GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9"></a><h5 id="JIMPV-GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9" class="sect5"><span class="enumeration_section">2.3.2.1</span>基于两列定义点JDBC主题</h5>
                     <div>
                        <p>如果数据库表使用两列（例如经度和纬度）来表示点坐标，则可以基于两列来定义JDBC主题以呈现点。该表不需要具有空间几何列，但它可以有一个;但是，如果主题请求定义了点列以及几何列，则地图可视化工具将尝试使用两列而不是几何列来渲染点。</p>
                        <p><a href="map-visualization-concepts.html#GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHJHEFF">示例2-10</a>是一个JDBC主题，它从名为POI的表的两列（名为LONG_LOC和LAT_LOC）中呈现点。 x_column和y_column属性指定包含点坐标值的列。在此示例中，使用C.RED样式呈现点，并使用T.POI_NAME样式呈现NAME列中的表值。
                        </p>
                        <div class="example" id="GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHJHEFF">
                           <p class="titleinexample">示例2-10基于列的JDBC主题</p><pre class="oac_no_warn" dir="ltr">&lt;map_request&gt;。 。 。&lt;center&gt;。 。 。&lt;/ center&gt; &lt;themes&gt; &lt;theme name =“theme1”&gt; &lt;jdbc_query datasource =“mvdemo”jdbc_srid =“8265” <span class="bold">x_column =“long_loc”</span> <span class="bold">y_column =“lat_loc”</span> render_style =“C.RED”label_column =“name”label_style =“T.POI_NAME”&gt; SELECT long_loc，lat_loc，name FROM poi &lt;/ jdbc_query&gt; &lt;/ theme&gt; &lt;/ themes&gt; &lt;/ map_request&gt;</pre><p>如果请求指定了有效的查询窗口（即不是完整范围），则会根据请求窗口的大小自动将WHERE表达式添加到查询中。</p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHCIHJD">
                           <p class="titleinexample">示例2-11基于列的JDBC主题，带有查询窗口</p>
                           <p>如果表具有几何列，则可以指定SQL代码以将几何列用作过滤器。<a href="map-visualization-concepts.html#GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHCIHJD">示例2-11</a>与<a href="map-visualization-concepts.html#GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHJHEFF">示例2-10</a>类似，但它添加了SDO_FILTER运算符的使用，以根据名为GEOMETRY的列中的几何指定查询窗口。在<a href="map-visualization-concepts.html#GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHCIHJD">例2-11中</a> ，问号（？）字符表示查询窗口矩形的左下和右上坐标取自运行时提供的值（本例中未显示）。
                           </p><pre class="oac_no_warn" dir="ltr">&lt;map_request&gt;。 。 。&lt;center&gt;。 。 。&lt;/ center&gt; &lt;themes&gt; &lt;theme name =“theme1”&gt; &lt;jdbc_query datasource =“mvdemo”jdbc_srid =“8265” <span class="bold">x_column =“long_loc”</span> <span class="bold">y_column =“lat_loc”</span> render_style =“C.RED”label_column =“name”label_style =“T.POI_NAME”&gt; SELECT long_loc，lat_loc FROM poi <span class="bold">WHERE</span> <span class="bold">SDO_FILTER</span> （geometry，MDSYS.SDO_GEOMETRY（2003,8265，NULL，MDSYS.SDO_ELEM_INFO_ARRAY（1,1003,3），MDSYS.SDO_ORDINATE_ARRAY（ <span class="bold">？，？，？，？</span> ）），'querytype = WINDOW'）='TRUE'&lt;/ jdbc_query&gt; &lt;/ theme&gt; &lt;/ themes&gt; &lt;/ map_request&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E">JDBC主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9562"></a><a id="JIMPV9561"></a><div class="props_rev_3"><a id="GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1" name="GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1"></a><h5 id="JIMPV-GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1" class="sect5"><span class="enumeration_section">2.3.2.2</span>在数据库中存储复杂的JDBC主题</h5>
                     <div>
                        <p>有时，JDBC主题的SQL查询非常复杂，您可能希望保存查询。在这种情况下，您可以定义预定义主题（其定义存储在数据库的USER_SDO_THEMES视图中），然后将完整SQL查询作为该主题样式规则中<code class="codeph">&lt;features&gt;</code>元素的内容包含在内。
                        </p>
                        <p>然后使用<code class="codeph">&lt;features&gt;</code>元素中指定的要素样式渲染使用完整查询检索的几何。将忽略为此类主题定义的基表，因为完整的SQL查询已包含FROM子句。仍需要USER_SDO_THEMES视图中定义的几何列，它必须与用户提供的SQL查询中选择的几何列相同。如果样式规则具有<code class="codeph">&lt;label&gt;</code>元素，则指定的标签样式用于标记几何，只要查询选择包含标签文本的列即可。
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1__I1012691">示例2-12</a>是具有复杂SQL查询的预定义主题的示例<code class="codeph">&lt;styling_rules&gt;</code>元素。
                        </p>
                        <div class="example" id="GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1__I1012691">
                           <p class="titleinexample">示例2-12预定义主题中的复杂查询</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules&gt; &lt;rule&gt; &lt;features style =“L.POOR_ROADS”asis =“true”&gt;从（select / * + no_merge use_hash（ab）* / a.street_id中选择sdo_lrs.clip_geom_segment（geometry，start_measure，end_measure）几何，name，start_measure，end_measure，geometry from（select / * + no_merge * / a.street_id，name，geometry from philly_roads a where sdo_filter（geometry，sdo_geometry（2002,41124，null，sdo_elem_info_array（1,2,1），sdo_ordinate_array （？，？，？，？）），'querytype = window'）='TRUE'）a，philly_road_conditions b where condition ='POOR'和a.street_id = b.street_id）&lt;/ features&gt; &lt;/ rule&gt; &lt; / styling_rules&gt;</pre><p>尽管<a href="map-visualization-concepts.html#GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1__I1012691">示例2-12</a>被定义为预定义主题，但当用户请求包含此主题的地图时，地图可视化工具仍会在运行时将其视为JDBC主题。与普通JDBC主题一样，默认情况下，地图可视化工具会在SQL查询之上强制执行窗口过滤过程（如果查询窗口包含在地图请求中）。要覆盖此默认行为并在不进行任何修改的情况下执行提供的查询字符串，请在<code class="codeph">&lt;features&gt;</code>元素中指定<code class="codeph">asis="true"</code> ，如<a href="map-visualization-concepts.html#GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1__I1012691">示例2-12</a>所示。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E">JDBC主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9577"></a><a id="JIMPV9576"></a><div class="props_rev_3"><a id="GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575" name="GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575"></a><h4 id="JIMPV-GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575" class="sect4"><span class="enumeration_section">2.3.3</span>图像主题</h4>
                  <div>
                     <p><span class="bold">图像主题</span>是一种特殊的地图可视化主题，可用于可视化地理参考的图像（光栅）数据，例如来自遥感和航空摄影。
                     </p>
                     <p>您可以在数据库中动态或永久地（作为预定义主题）定义图像主题。您可以在地图中使用带有矢量（非图像）主题的图像主题。<a href="map-visualization-concepts.html#GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575__I1012823">图2-8</a>显示了一个地图，其中图像主题（显示波士顿市部分航空照片）覆盖了主题，显示了城市中的几种道路。
                     </p>
                     <div class="figure" id="GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575__I1012823">
                        <p class="titleinfigure">图2-8显示波士顿公路的图像主题和其他主题</p><img src="img/img_boston.gif" alt="下面是图2-8的描述" title="下面是图2-8的描述" longdesc="img_text/img_boston.html"><br><a href="img_text/img_boston.html">“图2-8图像主题和显示波士顿公路的其他主题”的描述</a></div>
                     <!-- class="figure" -->
                     <p>在定义图像主题之前，必须遵循以下规则来组织图像数据：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将图像数据以其原始格式（如JPEG）存储在数据库表的BLOB列中，或者作为指向原始图像文件的Oracle Multimedia对象（ORDSYS.ORDImage）。</p>
                        </li>
                        <li>
                           <p>将几何（SDO_GEOMETRY）列添加到同一个表中，并为该列中的每个图像存储最小边界矩形（MBR）。</p>
                           <p>MBR列中的每个几何图形都包含图像的地理边界，而不是像素空间中的大小。例如，如果正射影像图像的大小为2000 x 2000像素，但覆盖了从（936000,248000）角落开始并且宽度和高度为8000米的地面矩形，则几何列的MBR应填充为（936000,248000,944000,256000）。</p>
                        </li>
                        <li>
                           <p>在USER_SDO_GEOM_METADATA视图中插入几何列的条目。</p>
                        </li>
                        <li>
                           <p>在几何列上创建空间索引。</p>
                        </li>
                     </ul>
                     <p>要预定义图像主题，请遵循<a href="map-visualization-concepts.html#GUID-B8E43D15-B170-4A62-BE5B-F6115D534984">创建预定义图像主题中</a>的准则。要在地图请求定义动态图像的主题，按照定义JDBC主题的指导方针，在解释的<a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E">JDBC主题</a> ，但是要注意的动态图像主题以下的其他注意事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>定义图像主题时，必须提供原始图像分辨率信息。</p>
                        </li>
                        <li>
                           <p>默认情况下，地图可视化工具会在生成带有图像主题的地图时自动缩放图像数据，以使其适合当前查询窗口。要禁用此自动缩放，请在地图请求中指定<code class="codeph">imagescaling="false"</code> 。</p>
                        </li>
                     </ul>
                     <p>对于任何图像主题定义，地图可视化工具仅支持GIF，JPEG，PNG和TIFF图像格式。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-B8E43D15-B170-4A62-BE5B-F6115D534984">创建预定义图像主题</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9579"></a><a id="JIMPV9578"></a><div class="props_rev_3"><a id="GUID-B8E43D15-B170-4A62-BE5B-F6115D534984" name="GUID-B8E43D15-B170-4A62-BE5B-F6115D534984"></a><h5 id="JIMPV-GUID-B8E43D15-B170-4A62-BE5B-F6115D534984" class="sect5"><span class="enumeration_section">2.3.3.1</span>创建预定义图像主题</h5>
                     <div>
                        <p>要创建预定义的图像主题，必须通过在USER_SDO_THEMES视图中插入行来存储图像主题的定义（在<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图中</a>描述）。<a href="map-visualization-concepts.html#GUID-B8E43D15-B170-4A62-BE5B-F6115D534984__I1012335">例2-13</a>存储图像主题的定义。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">theme_type</code>必须是<code class="codeph">image</code>才能将此主题识别为图像主题。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">image_column</code>指定存储实际图像数据的基表或视图中的列。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">image_format</code>是标识图像数据格式的字符串。如果指定<code class="codeph">GIF</code>或<code class="codeph">JPEG</code> ，则地图可视化工具始终可以渲染图像数据。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">image_resolution</code>是一个可选属性，用于标识原始图像分辨率（每个像素的<code class="codeph">image_unit</code>单位数）。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">image_unit</code>是一个可选属性，但如果指定<code class="codeph">image_resolution</code>属性则需要该属性。<code class="codeph">image_unit</code>属性指定分辨率的单位，例如<code class="codeph">M</code>为米。此属性的值必须是MDSYS.SDO_DIST_UNITS表的SDO_UNIT列中的值之一。在<a href="map-visualization-concepts.html#GUID-B8E43D15-B170-4A62-BE5B-F6115D534984__I1012335">示例2-13中</a> ，图像分辨率为每像素2米。
                              </p>
                           </li>
                        </ul>
                        <p><code class="codeph">&lt;styling_rules&gt;</code>元素的DTD显示在<a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="主题定义包含一个&lt;styling_rules&gt;元素，根据主题类型，该元素可能包含多个其他元素。">主题：样式规则中</a> 。
                        </p>
                        <div class="example" id="GUID-B8E43D15-B170-4A62-BE5B-F6115D534984__I1012335">
                           <p class="titleinexample">示例2-13创建预定义图像主题</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes VALUES（'IMAGE_LEVEL_2'，'金字塔等级2的正射影像'，'IMAGES'，'IMAGE_MBR'，'&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“image”image_column =“image”image_format =“JPEG”image_resolution =“2”image_unit =“M”&gt; &lt;rule&gt; &lt;features style =“C.RED”&gt; plevel = 2 &lt;/ features&gt; &lt; / rule&gt; &lt;/ styling_rules&gt;'）;</pre><p><a href="map-visualization-concepts.html#GUID-B8E43D15-B170-4A62-BE5B-F6115D534984__I1012335">例2-13</a>创建了一个名为<code class="codeph">IMAGE_LEVEL_2</code>的图像主题。基表（存储所有图像数据和相关MBR）被命名为IMAGES，图像的最小边界矩形（MBR）存储在名为IMAGE_MBR的列中。在USER_SDO_THEMES视图的STYLING_RULES列中，插入了一个带有一个<code class="codeph">&lt;styling_rules&gt;</code>元素的XML文档。
                           </p>
                           <p>图像主题的<code class="codeph">&lt;styling_rules&gt;</code>元素具有以下属性：</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575">图像主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9581"></a><a id="JIMPV9582"></a><a id="JIMPV9580"></a><div class="props_rev_3"><a id="GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297" name="GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297"></a><h4 id="JIMPV-GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297" class="sect4"><span class="enumeration_section">2.3.4</span> GeoRaster主题</h4>
                  <div>
                     <p><span class="bold">GeoRaster主题</span>是一种特殊的地图可视化主题，可用于可视化GeoRaster对象。GeoRaster是Oracle Spatial and Graph的一项功能，可用于存储，索引，查询，分析和交付栅格图像和网格化数据及其关联的元数据。使用SDO_GEORASTER数据类型定义GeoRaster对象。有关GeoRaster的详细信息，请参阅<a href="../geors/georaster-overview-and-concepts.html#GEORS100" target="_blank"><span class="italic">Oracle Spatial and Graph GeoRaster开发人员指南</span></a> 。
                     </p>
                     <p>在将地图可视化工具与GeoRaster主题一起使用之前，必须确保Java Advanced Imaging（JAI）库文件（ <code class="codeph">jai_core.jar</code>和<code class="codeph">jai_codec.jar</code> ）位于地图可视化工具库路径中。您还必须使用GeoRaster数据执行以下操作：</p>
                     <ol>
                        <li>
                           <p>对GeoRaster数据进行地理配准以建立GeoRaster数据的单元坐标与真实世界地面坐标（或一些其他本地坐标）之间的关系。</p>
                           <p>如果您使用的是Oracle Database Release 10.1，则还必须设置空间分辨率值。</p>
                        </li>
                        <li>
                           <p>生成或定义与栅格数据关联的空间范围（覆盖区）。</p>
                        </li>
                        <li>
                           <p>（可选）生成表示不同大小和分辨率的光栅图像或数据的金字塔等级。</p>
                        </li>
                        <li>
                           <p>在USER_SDO_GEOM_METADATA视图中插入一行，该视图指定GeoRaster表的名称和GeoRaster列的SPATIALEXTENT属性（即SDO_GEORASTER类型的列）。以下示例为名为GEOR_TABLE的表插入一行，其中包含名为GEOR_COLUMN的GeoRaster列：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO USER_SDO_GEOM_METADATA VALUES（'geor_table'，'geor_column.spatialextent'，SDO_DIM_ARRAY（SDO_DIM_ELEMENT（'X'，496602.844,695562.844,0.000005），SDO_DIM_ELEMENT（'Y'，8788409.499,8973749.499,0.000005）），82279-SRID）;</pre></li>
                        <li>
                           <p>在GeoRaster表的空间范围上创建空间索引。以下示例在名为GEOR_TABLE的表的空间范围上创建名为GEOR_IDX的空间索引：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX geor_idx ON geor_table（geor_column.spatialextent）INDEXTYPE IS MDSYS.SPATIAL_INDEX;</pre></li>
                     </ol>
                     <p><a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3">创建预定义GeoRaster主题</a> <a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABDJIBH">示例2-17</a>准备GeoRaster数据以供使用，并将GeoRaster主题存储在数据库中。
                     </p>
                     <p>地图可视化工具支持两种类型的地图请求，其中包含来自GeoRaster表的对象：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>包含用于选择一个或多个GeoRaster对象的SQL语句的请求</p>
                        </li>
                        <li>
                           <p>通过组合其栅格数据表名称和SDO_GEORASTER对象中的<code class="codeph">rasterID</code>属性值来指定单个GeoRaster对象的请求。（SDO_GEORASTER对象中的<code class="codeph">rasterID</code>属性值与GeoRaster表中的任何主键或ID列不同且无关。）
                           </p>
                        </li>
                     </ul>
                     <p>以下元素和属性适用于GeoRaster主题的定义：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">&lt;jdbc_georaster_query&gt;</code>元素：指定这是动态定义的GeoRaster主题。对于使用SQL语句选择一个或多个GeoRaster对象的主题，此元素包含SQL查询语句（不带终止分号）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">georaster_table</code>属性：指定GeoRaster表的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">georaster_column</code>属性：指定GeoRaster表中SDO_GEORASTER类型的列的名称。
                           </p>
                        </li>
                        <li>
                           <p><a id="d7682e3124" class="indexterm-anchor"></a><a id="d7682e3126" class="indexterm-anchor"></a><a id="d7682e3130" class="indexterm-anchor"></a><a id="d7682e3134" class="indexterm-anchor"></a><a id="d7682e3138" class="indexterm-anchor"></a> <code class="codeph">polygon_mask</code>属性（可选）：指定一组表示多边形的二维坐标，用作遮罩，使多边形遮罩外部的GeoRaster图像部分透明。坐标定义为x1，y1，x2，y2，.... 。 。 。掩码坐标必须位于数据坐标空间中。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">raster_bands</code>属性（可选）：指定要分配给红色，绿色和蓝色通道的波段成分。如果仅指定一个值，则生成的图像使用一个波段（单色图像的灰度级）。如果指定两个值，则它们用于红色和绿色通道，存储在GeoRaster元数据中的默认蓝色带用于蓝色通道。如果未指定此属性，则地图可视化工具将使用存储在GeoRaster元数据中的默认值。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">raster_pyramid</code>属性（可选）：指定金字塔等级（分辨率等级）。如果未指定此属性，则地图可视化工具会为当前窗口查询和设备区域计算最佳金字塔等级。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">raster_id</code>属性（仅当定义不包含SQL语句时）：指定映射请求的单个GeoRaster对象的SDO_GEORASTER对象定义中的<code class="codeph">rasterID</code>属性值。</p>
                        </li>
                        <li>
                           <p><code class="codeph">raster_table</code>属性（可选，仅当定义不包含SQL语句时）：指定与映射请求的单个GeoRaster对象关联的栅格数据表。</p>
                        </li>
                        <li>
                           <p><code class="codeph">transparent_nodata</code>属性（可选）：指定是否将任何GeoRaster NODATA值呈现为透明。默认值为“ <code class="codeph">false</code> ”。
                           </p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297__BABHEAEG">示例2-14</a>定义了一个GeoRaster主题，其中包含一个选择单个GeoRaster对象的SQL语句。主题将带1分配给红色通道，将带2分配给绿色通道，将带3分配给蓝色通道。由于未指定<code class="codeph">raster_pyramid</code>属性，因此地图可视化工具通过使用在地理配准过程期间或之后设置的空间分辨率值来计算最佳金字塔等级。（在<a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297__BABHEAEG">例2-14中</a> ，WHERE子句中的<code class="codeph">georid=1</code>引用名为PCI_IMAGE的GeoRaster表中名为GEORID的列。）
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297__BABFDHAB">示例2-15</a>定义了一个GeoRaster主题，该主题指定单个GeoRaster对象，其SDO_GEORASTER对象中的<code class="codeph">rasterID</code>属性值为1（ <code class="codeph">raster_id="1"</code> ）并与名为RDT_PCI的栅格数据表相关联。主题将2指定为金字塔等级。
                     </p>
                     <p>副题</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3">创建预定义的GeoRaster主题</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610">在GeoRaster主题中使用位图蒙版</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75">GeoRaster主题的重新投射</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-C46972F3-7E5B-4EEF-B806-F3CD976ABB53">虚拟马赛克主题</a></p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297__BABHEAEG">
                        <p class="titleinexample">示例2-14包含SQL语句的GeoRaster主题</p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“georaster_theme”&gt; &lt;jdbc_georaster_query georaster_table =“pci_image”georaster_column =“georaster”raster_bands =“1,2,3”jdbc_srid =“82301”datasource =“mvdemo”asis =“false”&gt; SELECT georaster FROM pci_image WHERE georid = 1 &lt;/ jdbc_georaster_query&gt; &lt;/ theme&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297__BABFDHAB">
                        <p class="titleinexample">示例2-15 GeoRaster主题指定栅格ID和栅格数据表</p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“georaster_theme”&gt; &lt;jdbc_georaster_query georaster_table =“pci_image”georaster_column =“georaster”raster_id =“1”raster_table =“rdt_pci”raster_pyramid =“2”raster_bands =“1,2,3”jdbc_srid =“82301”datasource =“mvdemo”asis =“false”&gt; &lt;/ jdbc_georaster_query&gt; &lt;/ theme&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3">创建预定义的GeoRaster主题</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610">在GeoRaster主题中使用位图蒙版</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75">GeoRaster主题的重新投射</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-C46972F3-7E5B-4EEF-B806-F3CD976ABB53">虚拟马赛克主题</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9584"></a><a id="JIMPV9585"></a><a id="JIMPV9583"></a><div class="props_rev_3"><a id="GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3" name="GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3"></a><h5 id="JIMPV-GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3" class="sect5"><span class="enumeration_section">2.3.4.1</span>创建预定义的GeoRaster主题</h5>
                     <div>
                        <p>要创建预定义的GeoRaster主题，必须通过在USER_SDO_THEMES视图中插入行来存储GeoRaster主题的定义（在<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图中</a>描述）。<a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABFBHGB">例2-16</a>存储了GeoRaster主题的定义。
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABFBHGB">例2-16</a>创建了一个名为<code class="codeph">GEOR_BANDS_012</code>的GeoRaster主题，其中波段0分配给红色通道，波段1分配给绿色通道，波段2分配给蓝色通道。GeoRaster表名称（本例中为GEOR_TABLE）插入USER_SDO_THEMES视图的BASE_TABLE列，GeoRaster列名称（本例中为GEOR_COLUMN）插入GEOMETRY_COLUMN列，并插入带有一个<code class="codeph">&lt;styling_rules&gt;</code>元素的XML文档在STYLING_RULES列中。
                        </p>
                        <p>在GeoRaster主题的<code class="codeph">&lt;styling_rules&gt;</code>元素中， <code class="codeph">theme_type</code>必须是<code class="codeph">georaster</code> ，以便将此主题识别为GeoRaster主题。
                        </p>
                        <p>所述<code class="codeph">&lt;styling_rules&gt;</code>要的GeoRaster主题元素可以包含在所描述的属性<a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">的GeoRaster主题</a> ，包括<code class="codeph">raster_bands</code> ， <code class="codeph">raster_pyramid</code> ， <code class="codeph">raster_id</code> ，和<code class="codeph">raster_table</code> ，如图<a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABFBHGB">实施例2-16</a> 。或者，GeoRaster主题的<code class="codeph">&lt;styling_rules&gt;</code>元素可以是规则定义。例如，要创建一个GeoRaster主题，从GeoRaster表中选择满足WHERE子句条件<code class="codeph">georid=1</code>的GeoRaster对象，请将<a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABFBHGB">示例2-16中</a>的<code class="codeph">&lt;styling_rules&gt;</code>元素替换为以下内容：</p><pre class="oac_no_warn" dir="ltr">&lt;styling_rules theme_type =“georaster”&gt; &lt;rule&gt; &lt;features&gt; georid = 1 &lt;/ features&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre><p>GeoRaster主题的<code class="codeph">&lt;styling_rules&gt;</code>元素还可以指定一个或多个位图蒙版，如<a href="map-visualization-concepts.html#GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610">使用GeoRaster主题的位图蒙版中所述</a> 。
                        </p>
                        <p><code class="codeph">&lt;styling_rules&gt;</code>元素的DTD显示在<a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="主题定义包含一个&lt;styling_rules&gt;元素，根据主题类型，该元素可能包含多个其他元素。">主题：样式规则中</a> 。
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABDJIBH">示例2-17</a>准备GeoRaster数据以与存储在数据库中的GeoRaster主题一起使用。代码示例中的注释简要描述了主要步骤。有关使用GeoRaster数据的要求和步骤的详细信息，请参阅<a href="../geors/georaster-database-creation-management.html#GEORS300" target="_blank"><span class="italic">Oracle Spatial and Graph GeoRaster开发人员指南</span></a> 。
                        </p>
                        <div class="example" id="GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABFBHGB">
                           <p class="titleinexample">示例2-16创建预定义的GeoRaster主题</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes VALUES（'GEOR_BANDS_012'，'波段0表示红色，1表示绿色，2表示蓝色'，'GEOR_TABLE'，'GEOR_COLUMN'，'&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“georaster”raster_table =“RDT_PCI”raster_id =“1”raster_bands =“0,1,2”&gt; &lt;/ styling_rules&gt;'）;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABDJIBH">
                           <p class="titleinexample">示例2-17准备GeoRaster数据以与GeoRaster主题一起使用</p><pre class="oac_no_warn" dir="ltr">connect scott输入密码： <span class="italic">password</span> SET ECHO ON SET FEEDBACK 1 SET NUMWIDTH 10 SET LINESIZE 100 SET PAGESIZE 10000 SET SERVEROUTPUT ON SIZE 5000 SET LONG 20000 SET TIMING ON call dbms_java.set_output（5000）; -------------------------------------------------- -----------------  - 创建一个GeoRaster表（一个具有SDO_GEORASTER对象类型的列的表）。-------------------------------------------------- ----------------- create table georaster_table（georid number primary key，type varchar2（32），georaster sdo_georaster）; -------------------------------------------------- -----------------  - 如果 -  Oracle数据库版本在11.1之前，则在GeoRaster表上创建GeoRaster DML触发器。（在版本11.1及更高版本中 - 此触发器是自动创建的，因此您无需手动创建它。）-------------------------------------------------- -----------------调用sdo_geor_utl.createDMLTrigger（'georaster_table'，'georaster'）; -------------------------------------------------- -----------------  - 创建栅格数据表（RDT）。-   - 用于存储GeoRaster对象的单元数据。- 此步骤不是必需的。如果RDT表不存在，则GeoRaster过程或函数将在需要时自动生成它。- 但是，对于巨大的GeoRaster对象，在这些表上进行一些调整和设置可以显着提高可伸缩性和性能。- 在这些情况下，用户最好创建RDT。- 如果创建主键，则必须将主键添加到RDT。-------------------------------------------------- -----------------创建sd_raster的表rdt_geor（主键（rasterId，pyramidLevel，bandBlockNumber，rowBlockNumber，columnBlockNumber））lob（rasterblock）存储为（nocache nologging）;承诺; ----------------  - 导入图像。----------------连接系统;输入密码： <span class="italic">密码</span>调用dbms_java.grant_permission（'MDSYS'，'SYS：java.io。FilePermission'，'lbs / demo / images / l7_ms.tif'，'read'）;调用dbms_java.grant_permission（'SCOTT'，'SYS：java.io。FilePermission'，'lbs / demo / images / l7_ms.tif'，'read'）;连接斯科特;输入密码： <span class="italic">密码</span>声明geor SDO_GEORASTER;从georaster_table开始删除georid = 1;插入georaster_table值（1，'TIFF'，sdo_geor.init（'rdt_geor'，1））;从georaster_table中选择georaster到geor，georid = 1表示更新; sdo_geor.importFrom（geor，''，'TIFF'，'file'，'lbs / demo / images / l7_ms.tif'）;更新georaster_table set georaster = geor georid = 1;承诺;结束; /连接系统;输入密码： <span class="italic">密码</span>调用dbms_java.revoke_permission（'MDSYS'，'SYS：java.io。FilePermission'，'lbs / demo / images / l7_ms.tif'，'read'）;调用dbms_java.revoke_permission（'SCOTT'，'SYS：java.io。FilePermission'，'lbs / demo / images / l7_ms.tif'，'read'）;连接斯科特;输入密码： <span class="italic">密码</span> --------------------------  - 如果需要，更改GeoRaster格式。- 为此，您可以调用SDO_GEOR.changeFormatCopy。- 以下用于金字塔，空间分辨率设置和 - 空间范围生成的操作也可以组合到一个PLSQL块中。--------------------------声明gr1 sdo_georaster;开始 -   - 将changeFormat与GeoRaster对象一起使用： -   -  1。选择源GeoRaster对象。从Georaster_table中选择georaster到gr1，其中georid = 1; -  2。做出改变。（交织是依赖于应用程序的。对于TIFF图像， - 默认交错是BSQ。）sdo_geor.changeFormat（gr1，'blocksize =（512,512,3）interleaving = BIP'）; -  3。更新GeoRaster表中的GeoRaster对象。更新georaster_table set georaster = gr1其中georid = 1;承诺;结束; / ---------------------------  - 生成金字塔等级（强烈推荐，但可选）。--------------------------- declare gr sdo_georaster;开始 -  1。选择源GeoRaster对象。从georaster_table中选择georaster到gr，其中georid = 1表示更新; -  2。生成金字塔。sdo_geor.generatePyramid（gr，'resampling = NN'）; -  3。更新原始GeoRaster对象。更新georaster_table set georaster = gr其中georid = 1;承诺;结束; / -----------------------------  - 对GeoRaster对象进行地理配准。----------------------------- DECLARE gr sdo_georaster; BEGIN SELECT georaster INTO gr FROM georaster_table WHERE georid = 1 FOR UPDATE; sdo_geor.georeference（gr，82216,1，sdo_number_array（30,0,410000.000000），sdo_number_array（0，-30,3759000.000000））;更新georaster_table SET georaster = gr WHERE georid = 1;承诺; END; / -----------------------------  - 设置空间分辨率（仅限10gR1所需）------ -----------------------  - 如果您使用的是Oracle Database Release 10.1，请设置空间分辨率。（如果您使用的是10.2版，则不需要。）空间分辨率值 - （30,30）来自ESRI世界文件或地理参考信息; - 但是，如果这些值不属于原始地理配准元数据，则可能必须计算这些值。DECLARE gr sdo_georaster; BEGIN SELECT georaster INTO gr FROM georaster_table WHERE georid = 1 FOR UPDATE; sdo_geor.setSpatialResolutions（gr，sdo_number_array（30,30））;更新georaster_table SET georaster = gr WHERE georid = 1;承诺;结束; / ------------------------  - 更新空间范围。------------------------ DECLARE sptext sdo_geometry; BEGIN SELECT sdo_geor.generateSpatialExtent（a.georaster）INTO sptext FROM georaster_table a WHERE a.georid = 1 FOR UPDATE;更新georaster_table a SET a.georaster.spatialextent = sptext WHERE a.georid = 1;承诺; END; / commit; -------------------------------------------------- ----------------  - 为GeoRaster空间范围列创建元数据信息。-------------------------------------------------- ---------------- INSERT INTO USER_SDO_GEOM_METADATA VALUES（'GEORASTER_TABLE'，'georaster.spatialextent'，SDO_DIM_ARRAY（SDO_DIM_ELEMENT（'X'，410000.0,470000.0,0.000005），SDO_DIM_ELEMENT（'Y '，3699000.0,3759000。，0.000005）），82216  -  SRID）; ------------------------  - 在空间范围上创建空间索引。------------------------ CREATE INDEX georaster_idx ON georaster_table（georaster.spatialextent）INDEXTYPE IS MDSYS.SPATIAL_INDEX; -------------------------------------------------- ------  - 为地图可视化工具创建预定义的GeoRaster主题。-------------------------------------------------- ------ INSERT INTO user_sdo_themes VALUES（'GEORASTER_TABLE'，'GeoTiff image'，'GEORASTER_TABLE'，'GEORASTER'，'&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“georaster”raster_table =“RDT_GEOR”raster_id =“1”raster_bands =“0,1,2”&gt; &lt;/ styling_rules&gt;'）;承诺;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9587"></a><a id="JIMPV9586"></a><div class="props_rev_3"><a id="GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610" name="GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610"></a><h5 id="JIMPV-GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610" class="sect5"><span class="enumeration_section">2.3.4.2</span>使用GeoRaster主题的位图掩码</h5>
                     <div>
                        <p>在Oracle Spatial and Graph GeoRaster中，可以将位图掩码分配给存储在数据库中的GeoRaster图层。<span class="bold">位图掩码</span>是一个特殊的一位深矩形栅格网格，每个像素的值为0或1。它用于在另一个图像内定义不规则形状的区域。1位定义区域的内部，0位定义区域的外部。有关位图掩码的更多信息，请参阅<a href="../geors/georaster-overview-and-concepts.html#GEORS941" target="_blank"><span class="italic">Oracle Spatial and Graph GeoRaster开发人员指南</span></a> 。
                        </p>
                        <p>要指定具有GeoRaster主题的位图蒙版，请使用<code class="codeph">&lt;bitmap_masks&gt;</code>元素中的<code class="codeph">&lt;styling_rules&gt;</code>元素作为预定义主题，如<a href="map-visualization-concepts.html#GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610__CIHJBHAF">例2-18</a>所示。
                        </p>
                        <p><code class="codeph">&lt;bitmap_masks&gt;</code>元素包含一个或多个<code class="codeph">&lt;mask&gt;</code>元素，每个元素都具有特定GeoRaster对象的掩码定义。在<a href="map-visualization-concepts.html#GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610__CIHJBHAF">例2-18中</a> ，为RDT_MASS_COLOR_MOSAIC表中光栅ID为1的GeoRaster对象的第1层和第2层定义了一个掩码。<code class="codeph">&lt;mask&gt;</code>元素具有以下属性：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">raster_id</code>指定GeoRaster对象的栅格ID值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">raster_table</code>指定栅格数据表（RDT）。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">layers</code>指定要用于掩码的GeoRaster对象中的图层编号。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">zeromapping</code>指定在位图像素上渲染期间应用的透明度值，其值为0（零）。属性值可以是0（完全透明）到255（完全不透明）。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">onemapping</code>指定在位图像素上渲染期间应用的透明度值，值为1。属性值可以是0（完全透明）到255（完全不透明）。
                              </p>
                           </li>
                        </ul>
                        <div class="example" id="GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610__CIHJBHAF">
                           <p class="titleinexample">示例2-18预定义GeoRaster主题中的位图蒙版</p><pre class="oac_no_warn" dir="ltr">&lt;styling_rules theme_type =“georaster”raster_id =“1”raster_table =“RDT_MASS_COLOR_MOSAIC”&gt; &lt;bitmap_masks&gt; &lt;mask layers =“1,2”zeromapping =“0”onemapping =“255”/&gt; &lt;/ bitmap_masks&gt; &lt;/ styling_rules&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9930"></a><a id="JIMPV9929"></a><div class="props_rev_3"><a id="GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75" name="GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75"></a><h5 id="JIMPV-GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75" class="sect5"><span class="enumeration_section">2.3.4.3</span> GeoRaster主题的<span class="enumeration_section">重新</span>投影</h5>
                     <div>
                        <p>通过适用于版本11.2.0.1的Oracle Spatial and Graph GeoRaster，可以将GeoRaster对象重新投影到不同的SRID中。建议您应用Oracle数据库补丁10259201，以避免在地图可视化工具中渲染对象时相邻重新投影的GeoRaster对象的黑色边界。有关详细信息，请参阅Oracle Oracle支持文档ID 1272931.1， <span class="italic">Oracle Mapviewer中通过Wms重新投影Georaster数据后的黑线</span> 。
                        </p>
                        <p>在地图可视化工具中，如果其SRID与地图请求SRID不同，则将重新投影GeoRaster主题。重投影仅用于渲染，不对原始GeoRaster对象进行任何更改。对于没有重新投影支持的旧数据库，不会重新投影GeoRaster对象。</p>
                        <p>可用的重投影模式是BILINEAR（默认使用），NN，CUBIC，AVERAGE4，AVERAGE16。有关重投影的更多信息，请参阅<a href="../geors/image-processing-virtual-mosaic.html#GEORS1274" target="_blank"><span class="italic">Oracle Spatial和图形的GeoRaster开发人员指南</span></a> 。
                        </p>
                        <p>要指定具有GeoRaster主题的重新投影模式，请使用<code class="codeph">&lt;styling_rules&gt;</code>元素中的<code class="codeph">reproj_mode</code>关键字作为预定义主题，如<a href="map-visualization-concepts.html#GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75__CIHBDFAI">示例2-19</a>所示。
                        </p>
                        <div class="example" id="GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75__CIHBDFAI">
                           <p class="titleinexample">示例2-19预定义GeoRaster主题中的重新投影模式</p><pre class="oac_no_warn" dir="ltr">&lt;styling_rules theme_type =“georaster”reproj_mode =“CUBIC”&gt; &lt;/ styling_rules&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10104"></a><div class="props_rev_3"><a id="GUID-C46972F3-7E5B-4EEF-B806-F3CD976ABB53" name="GUID-C46972F3-7E5B-4EEF-B806-F3CD976ABB53"></a><h5 id="JIMPV-GUID-C46972F3-7E5B-4EEF-B806-F3CD976ABB53" class="sect5"><span class="enumeration_section">2.3.4.4</span>虚拟镶嵌主题</h5>
                     <div>
                        <p>在Oracle Spatial and Graph GeoRaster中，虚拟马赛克被定义为来自一个或多个GeoRaster表或视图的任何大量地理参考GeoRaster对象（已纠正或未校正），这些表被视为单个GeoRaster对象。</p>
                        <p>可以使用不同的方式定义虚拟马赛克，例如使用单个或多个GeoRaster表（或具有GeoRaster列的视图），以及使用完整的SQL查询语句来生成GeoRaster对象的集合。</p>
                        <p>地图可视化工具支持创建以下类型的预定义GeoRaster虚拟马赛克主题：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>基于具有GeoRaster列的表的主题，可能包含查询条件。还可以定义具有GeoRaster列的表的列表。以下XML定义定义了基于虚拟镶嵌主题的表LANDSAT5_IMAGES和GeoRaster列IMAGE：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“georaster”virtual_mosaic =“true”&gt; &lt;virtual_mosaic srid =“32617”nodata_cell =“true”&gt; &lt;tables&gt; &lt;table name =“LANDSAT5_IMAGES”georaster_column =“IMAGE”/&gt; &lt;/ tables&gt; &lt;/ virtual_mosaic&gt; &lt;/ styling_rules&gt;</pre></li>
                           <li>
                              <p>基于完整SQL查询的主题。以下XML定义基于SQL查询指定虚拟镶嵌主题：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“georaster”virtual_mosaic =“true”&gt; &lt;virtual_mosaic srid =“32617”nodata_cell =“true”&gt; &lt;sql&gt;从landsat5_images中选择图像&lt;/ sql&gt; &lt;/ virtual_mosaic&gt; &lt;/ styling_rules&gt;</pre></li>
                        </ul>
                        <p>可以为虚拟镶嵌主题定义以下参数。</p>
                        <p><code class="codeph">srid</code> ：空间参照系（坐标系）值。
                        </p>
                        <p><code class="codeph">nodata_cell</code> ：指定在处理重叠区域时是否考虑NODATA（NODATA值或NODATA位图掩码）。<code class="codeph">TRUE</code>导致具有NODATA值的任何单元格被视为NODATA单元格，并且单元格值不参与重叠区域计算; <code class="codeph">FALSE</code>导致具有NODATA值的任何单元格被视为正常单元格，并且单元格值将参与重叠区域计算。默认值为<code class="codeph">FALSE</code> 。如果该值是<code class="codeph">TRUE</code>和再采样方法是<code class="codeph">BILINEAR</code> ， <code class="codeph">BIQUADRATIC</code> ， <code class="codeph">CUBIC</code> ， <code class="codeph">AVERAGE4</code> ，或<code class="codeph">AVERAGE16</code> ，每当涉及重采样计算一个单元格的值是NODATA值，重新采样的结果也是NODATA值。如果存在多个NODATA值或值范围，则生成的NODATA值是与当前栅格图层关联的最小NODATA值。
                        </p>
                        <p><code class="codeph">common_point_rule</code> ：在重叠区域获取单元格值的方法。可以具有以下值之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OLDEST</code> ：使用GeoRaster对象中具有元数据中最早的<code class="codeph">EndDataTime</code>的值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">END</code> ：使用上次遇到的GeoRaster对象的值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">LATEST</code> ：使用元数据中具有最新<code class="codeph">EndDataTime</code>的GeoRaster对象的值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OLDEST</code> ：使用GeoRaster对象中具有元数据中最早的<code class="codeph">EndDataTime</code>的值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CTC</code> ：使用最接近输出窗口中心的GeoRaster对象的值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">HIGH</code> ：使用所有重叠的GeoRaster对象的最大单元格值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">LOW</code> ：使用所有重叠GeoRaster对象的最小单元格值</p>
                           </li>
                           <li>
                              <p><code class="codeph">AVERAGE</code> ：使用重叠GeoRaster对象的所有单元格值的平均值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">HISHRES</code> ：使用具有最高空间分辨率的GeoRaster对象的值。
                              </p>
                           </li>
                        </ul>
                        <p><code class="codeph">resampling_mode</code> ：指定在马赛克操作期间使用的重采样方法（如果涉及重新采样或需要进行整流）。可以有以下值之一： <code class="codeph">NN</code> ， <code class="codeph">BILINEAR</code> ， <code class="codeph">BIQUADRATIC</code> ， <code class="codeph">CUBIC</code> ， <code class="codeph">AVERAGE4</code> ，或<code class="codeph">AVERAGE16</code> 。
                        </p>
                        <p><code class="codeph">resampling_tolerance</code> ：指定在源GeoRaster对象未完全对齐时不进行重采样的容差。该值应介于0和0.5之间，其中单位为像素或单元格（例如，0.5表示半个像素或单元格）。如果未指定，则使用0.5，这意味着不会进行重采样。
                        </p>
                        <p><code class="codeph">color_balance</code> ：指定颜色平衡的方法。可以具有以下值之一： <code class="codeph">NONE</code> ， <code class="codeph">LINEARSTRETCHING</code> ， <code class="codeph">NORMALIZATION</code> 。</p>
                        <p><code class="codeph">min_stretch_value</code> ：如果<code class="codeph">color_balance</code>不是<code class="codeph">LINEARSTRETCHING</code> ，则忽略;否则，指定线性拉伸方法范围内的最低值。默认为0。
                        </p>
                        <p><code class="codeph">max_stretch_value</code> ：如果<code class="codeph">color_balance</code>不是<code class="codeph">LINEARSTRETCHING</code> ，则忽略;否则，指定线性拉伸方法范围内的最高值。默认为255。
                        </p>
                        <p><code class="codeph">mean</code> ：如果<code class="codeph">color_balance</code>不是<code class="codeph">NORMALIZATION</code> ，则忽略;否则，指定规范化方法的参考均值。
                        </p>
                        <p><code class="codeph">standard_deviation</code> ：如果<code class="codeph">color_balance</code>不是<code class="codeph">NORMALIZATION</code> ，则忽略;否则，指定标准化方法的参考标准偏差。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9589"></a><a id="JIMPV9588"></a><div class="props_rev_3"><a id="GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9" name="GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9"></a><h4 id="JIMPV-GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9" class="sect4"><span class="enumeration_section">2.3.5</span>网络主题</h4>
                  <div>
                     <p><span class="bold">网络主题</span>是一种特殊的地图可视化主题，可用于可视化使用Oracle Spatial and Graph网络数据模型定义的网络。网络由一组节点和链接组成。虽然链路和路径通常具有方向，但是网络可以是定向的或不定向的。网络可以组织成不同的抽象级别，称为网络层次结构。地图可视化器假定网络中的网络空间表使用相同的坐标系，并且这些表按照<a href="../topol/network-data-model-graph-overview.html#TOPOL700" target="_blank"><span class="italic">Oracle空间和图形拓扑数据模型和网络数据模型图开发人员指南中的</span></a>描述进行索引和注册。
                     </p>
                     <p>网络节点，链接和路径表存储SDO_GEOMETRY类型的几何。您可以创建使用这些几何的JDBC主题。此外，您可以定义考虑网络方面的动态主题，例如定向网络的链接方向。</p>
                     <p>以下元素和属性适用于网络主题的定义：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">&lt;jdbc_network_query&gt;</code>元素：指定这是动态定义的网络主题。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">network_name</code>属性：指定网络的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">network_level</code>属性（可选）：指定此主题适用的网络层次结构级别。（对于非分层网络，请指定1，这是默认值。）
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">link_style</code>属性（可选）：指定要用于链接的样式名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">direction_style</code>属性（可选）：指定要用于链接方向标记的样式名称（例如，方向箭头图像）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">bidirection_style</code>属性（可选）：指定要用于双向链接的样式名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">direction_position</code>属性（可选）：指定方向标记相对于链接开始的位置，为0到1之间的数字。例如，0.85表示链接起点和终点之间的85％。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">direction_markersize</code>属性（可选）：指定方向标记的大小（像素数）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">direction_multimarker</code>属性（可选）：指定是否应在链接上重复方向标记： <code class="codeph">true</code>在指定的起始位置和该距离的每个后续间隔重复标记; <code class="codeph">false</code> （默认值）不重复标记。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">link_labelstyle</code>属性（可选）：指定要用于<code class="codeph">link_labelcolumn</code>属性中指定的列中链接标签的样式名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">link_labelcolumn</code>属性（可选）：指定包含要使用<code class="codeph">link_labelstyle</code>属性中指定的样式呈现的链接标签的列的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_style</code>属性（可选）：指定要用于节点的样式名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_markersize</code>属性（可选）：指定节点标记的大小（像素数）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_labelstyle</code>属性（可选）：指定要用于<code class="codeph">node_labelcolumn</code>属性中指定的列中的节点标签的样式名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_labelcolumn</code>属性（可选）：指定包含要使用<code class="codeph">node_labelstyle</code>属性中指定的样式呈现的节点标签的列的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">path_ids</code>属性（可选）：指定要呈现的存储路径的一个或多个路径ID值。对于多个路径，请使用逗号分隔路径ID值。例如， <code class="codeph">path_ids="1,3,4"</code>指定要渲染路径ID值为1,3和4的路径。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">path_styles</code>属性（可选）：指定与<code class="codeph">path_ids</code>属性中指定的路径关联的一个或多个样式名称。例如， <code class="codeph">path_styles="C.RED,C.GREEN,C.BLUE"</code>指定用于呈现<code class="codeph">path_ids</code>属性中指定的第一，第二和第三路径（分别）的<code class="codeph">path_ids</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">path_labelstyle</code>属性（可选）：指定要用于<code class="codeph">path_labelcolumn</code>属性中指定的列中的路径标签的样式名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">path_labelcolumn</code>属性（可选）：指定包含要使用<code class="codeph">path_labelstyle</code>属性中指定的样式呈现的路径标签的列的名称。
                           </p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896">使用Map Visualizer进行</a>网络分析中描述了与网络分析相关的其他网络主题属性。
                     </p>
                     <p>网络主题可以组合链接，节点和路径的属性，或任何组合。在这种情况下，地图可视化工具首先渲染链接，然后是路径，然后是节点。</p>
                     <p><a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9__BABIIGDI">示例2-20</a>定义了一个网络主题，该主题指定了名为<code class="codeph">NYC_NET</code>的网络中链接和节点显示的属性。</p>
                     <div class="example" id="GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9__BABIIGDI">
                        <p class="titleinexample">示例2-20网络主题</p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“net_theme”user_clickable =“false”&gt; &lt;jdbc_network_query network_name =“NYC_NET”network_level =“1”jdbc_srid =“8307”datasource =“mvdemo”link_style =“C.RED”direction_style =“M.IMAGE105_BW”direction_position =“0.85”direction_markersize =“8”node_style =“M.STAR”node_markersize =“5”asis =“false”&gt; &lt;/ jdbc_network_query&gt; &lt;/ theme&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D">创建预定义的网络主题</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896">使用Map Visualizer进行网络分析</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9591"></a><a id="JIMPV9590"></a><div class="props_rev_3"><a id="GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D" name="GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D"></a><h5 id="JIMPV-GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D" class="sect5"><span class="enumeration_section">2.3.5.1</span>创建预定义网络主题</h5>
                     <div>
                        <p>要创建预定义的网络主题，必须通过在USER_SDO_THEMES视图中插入行来存储网络主题的定义（在<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图中</a>描述）。<a href="map-visualization-concepts.html#GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D__BABDBBAD">示例2-21</a>存储网络主题的定义。
                        </p>
                        <div class="example" id="GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D__BABDBBAD">
                           <p class="titleinexample">示例2-21创建预定义的网络主题</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes VALUES（'NYC_NET_1'，'纽约市网络'，'NYC_NET_LINK_TABLE'，'几何'，'&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“network”network_name =“NYC_NET”network_level =“1”&gt; &lt;rule&gt; &lt;features&gt; &lt;link style =“C.RED”direction_style =“M.IMAGE105_BW”direction_position =“0.85”direction_markersize =“8 “&gt; &lt;/ link&gt; &lt;path ids =”1,3“styles =”C.BLUE，C.GREEN“&gt; &lt;/ path&gt; &lt;node style =”M.CIRCLE“markersize =”5“&gt; &lt;/ node&gt; &lt;/ features&gt; &lt;label&gt; &lt;link column =“LINK_ID”style =“T.STREET NAME”&gt; 1 &lt;/ link&gt; &lt;/ label&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;'）;</pre><p><a href="map-visualization-concepts.html#GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D__BABDBBAD">实施例2-21</a>将创建名为网络主题<code class="codeph">NYC_NET_1</code>名为网络的1级<code class="codeph">NYC_NET</code> 。网络表名称（本例中为NYC_NET_LINK_TABLE）插入USER_SDO_THEMES视图的BASE_TABLE列，链接几何列名称（本例中为GEOMETRY）插入GEOMETRY_COLUMN列，带有一个<code class="codeph">&lt;styling_rules&gt;</code>元素的XML文档为插入STYLING_RULES列。
                           </p>
                           <p>在网络主题的<code class="codeph">&lt;styling_rules&gt;</code>元素中， <code class="codeph">theme_type</code>必须是<code class="codeph">network</code> ，以便将此主题识别为网络主题。链接，路径和节点的元素可以在相同的<code class="codeph">&lt;features&gt;</code>元素中指定，如<a href="map-visualization-concepts.html#GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D__BABDBBAD">例2-21中所示</a> ：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>链接要素规则指定所有链接的样式<code class="codeph">C.RED</code>和方向标记属性。
                                 </p>
                              </li>
                              <li>
                                 <p>的路径特征规则指定风格<code class="codeph">C.BLUE</code>用于与所述路径ID值1的路径，和风格<code class="codeph">C.GREEN</code>用于与所述路径ID值3的路径。
                                 </p>
                              </li>
                              <li>
                                 <p>节点功能规则指定样式<code class="codeph">M.CIRCLE</code> ，标记大小为5。
                                 </p>
                              </li>
                           </ul>
                           <p><a href="map-visualization-concepts.html#GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D__BABDBBAD">示例2-21</a>还包含链接的<code class="codeph">&lt;label&gt;</code>元素，指定链接列<code class="codeph">LINK_ID</code>和标签样式<code class="codeph">T.STREET NAME</code> 。</p>
                           <p><code class="codeph">&lt;styling_rules&gt;</code>元素的DTD显示在<a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="主题定义包含一个&lt;styling_rules&gt;元素，根据主题类型，该元素可能包含多个其他元素。">主题：样式规则中</a> 。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9">网络主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9593"></a><a id="JIMPV9594"></a><a id="JIMPV9592"></a><div class="props_rev_3"><a id="GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896" name="GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896"></a><h5 id="JIMPV-GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896" class="sect5"><span class="enumeration_section">2.3.5.2</span>使用Map Visualizer进行网络分析</h5>
                     <div>
                        <p>网络模型Java API提供了多种网络分析功能。您可以定义支持最短路径和成本内分析功能的地图可视化器网络主题。某些属性适用于这两种功能，某些属性仅适用于相关的相关功能。</p>
                        <p>对于所有网络分析功能， <a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9">网络主题中</a>描述的<code class="codeph">&lt;jdbc_network_query&gt;</code>元素和网络相关属性适用于<a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9">网络主题</a>的定义。
                        </p>
                        <p><a id="d7682e4218" class="indexterm-anchor"></a><a id="d7682e4220" class="indexterm-anchor"></a>对于最短路径分析，以下属性适用于网络主题的定义：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">analysis_algorithm</code>属性：指定要使用的最短路径分析算法。必须是<code class="codeph">DIJKSTRA</code>或<code class="codeph">ASEARCH</code> 。</p>
                           </li>
                           <li>
                              <p><code class="codeph">shortestpath_style</code>属性：指定用于最短路径的样式名称。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">shortestpath_startnode</code>属性：指定要用于分析的起始节点。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">shortestpath_endnode</code>属性：指定要用于分析的结束节点。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">shortestpath_startstyle</code>属性（可选）：指定要用于起始节点的样式名称。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">shortestpath_endstyle</code>属性（可选）：指定要用于结束节点的样式名称。
                              </p>
                           </li>
                        </ul>
                        <p><a href="map-visualization-concepts.html#GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896__BABJEBHC">示例2-22</a>定义了可用于最短路径分析的网络主题。
                        </p>
                        <p><a id="d7682e4266" class="indexterm-anchor"></a><a id="d7682e4268" class="indexterm-anchor"></a>对于成本内分析，以下属性适用于网络主题的定义：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">analysis_algorithm</code>属性：必须是<code class="codeph">WITHINCOST</code> 。</p>
                           </li>
                           <li>
                              <p><code class="codeph">withincost_startnode</code>属性：指定要用于分析的起始节点。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">withincost_cost</code>属性：指定要包含的节点的成本截止值。可以从开始节点以小于或等于指定值的成本到达的所有节点都包含在结果显示中。不包括从起始节点无法到达的节点或仅以超过指定值的成本到达的节点。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">withincost_startstyle</code>属性（可选）：指定要用于起始节点的样式名称。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">withincost_style</code>属性：指定在起始节点与指定成本截止值内的每个节点之间的显示路径中用于链接的样式名称。
                              </p>
                           </li>
                        </ul>
                        <p><a href="map-visualization-concepts.html#GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896__BABCJADC">示例2-23</a>定义了可用于成本内分析的网络主题。
                        </p>
                        <div class="example" id="GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896__BABJEBHC">
                           <p class="titleinexample">示例2-22最短路径分析的网络主题</p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“shortest_path_theme”user_clickable =“false”&gt; &lt;jdbc_network_query network_name =“BI_TEST”network_level =“1”jdbc_srid =“0”datasource =“mvdemo”analysis_algorithm =“DIJKSTRA”shortestpath_style =“L.PH”shortestpath_startnode =“ 20“shortestpath_endnode =”101“shortestpath_startstyle =”M.STAR“shortestpath_endstyle =”M.CIRCLE“asis =”false“&gt; &lt;/ jdbc_network_query&gt; &lt;/ theme&gt;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896__BABCJADC">
                           <p class="titleinexample">示例2-23用于成本内分析的网络主题</p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“within_cost_theme”user_clickable =“false”&gt; &lt;jdbc_network_query network_name =“BI_TEST”network_level =“1”jdbc_srid =“0”datasource =“mvdemo”analysis_algorithm =“WITHINCOST”withincost_startnode =“20”withincost_style =“L。 PH“withincost_cost =”1“withincost_startstyle =”M.STAR“asis =”false“&gt; &lt;/ jdbc_network_query&gt; &lt;/ theme&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9">网络主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9596"></a><a id="JIMPV9597"></a><a id="JIMPV9595"></a><div class="props_rev_3"><a id="GUID-5A7910EC-68E5-4310-A816-217FCD1E4460" name="GUID-5A7910EC-68E5-4310-A816-217FCD1E4460"></a><h4 id="JIMPV-GUID-5A7910EC-68E5-4310-A816-217FCD1E4460" class="sect4"><span class="enumeration_section">2.3.6</span>拓扑主题</h4>
                  <div>
                     <p><span class="bold">拓扑主题</span>是一种特殊的地图可视化主题，可用于可视化使用Oracle Spatial and Graph拓扑数据模型定义的拓扑。拓扑数据模型允许您处理拓扑中有关节点，边和面的数据。节点，边和面的空间表示是SDO_GEOMETRY类型的空间几何。对于节点和边缘，显式存储几何;对于面，存储初始线（外部和内部），允许生成面几何。
                     </p>
                     <p>除了节点，边和面的空间表示之外，拓扑还可以具有特征。特征（也称为拓扑几何）是现实世界对象的空间表示。每个要素都定义为SDO_TOPO_GEOMETRY类型的对象，该对象标识拓扑几何类型，拓扑几何ID，拓扑几何图层ID和拓扑ID。有关详细信息，请参阅<a href="../topol/topology-data-model-overview.html#TOPOL100" target="_blank"><span class="italic">Oracle Spatial and Graph拓扑数据模型和网络数据模型图开发人员指南</span></a> 。
                     </p>
                     <p>地图可视化工具可以呈现拓扑功能。它还可以在调试模式下呈现主题（本节稍后介绍），以显示拓扑的节点，边和面。对于每个拓扑主题，地图可视化工具使用存储在USER_SDO_TOPO_METADATA视图中的拓扑元数据信息。</p>
                     <p>以下元素和属性适用于拓扑主题的定义：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">&lt;jdbc_topology_query&gt;</code> element：指定这是动态定义的拓扑主题。该元素可以指定SQL查询语句（没有终止分号）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">topology_name</code>属性：指定<code class="codeph">topology_name</code>的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">feature_table</code>属性：指定要素表的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">spatial_column</code>属性：指定SDO_TOPO_GEOMETRY类型的空间要素列的名称。</p>
                        </li>
                        <li>
                           <p><code class="codeph">label_column</code>属性：指定要素表中包含要与每个要素一起使用的文本标签的列。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">label_style</code>属性：指定用于在标签列中呈现标签的文本样式的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">render_style</code>属性：指定用于呈现拓扑的样式的名称。
                           </p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-5A7910EC-68E5-4310-A816-217FCD1E4460__BABFJGJF">示例2-24</a>定义了一个拓扑主题，该主题指定了CITY_DATA拓扑中LAND_PARCELS表中要素和标签显示的属性。SQL语句指定空间要素列和标签列，它包括要素表中的所有行。
                     </p>
                     <p><a id="d7682e4412" class="indexterm-anchor"></a><a id="d7682e4416" class="indexterm-anchor"></a><a id="d7682e4422" class="indexterm-anchor"></a>地图可视化工具还支持渲染拓扑的节点，边和面的<span class="bold">调试模式</span> 。要指定调试模式，请在<code class="codeph">&lt;theme&gt;</code>元素中包含<code class="codeph">mode="debug"</code>属性。除了本节前面提到的<code class="codeph">&lt;jdbc_topology_query&gt;</code>属性之外，还可以在调试模式下使用以下属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">edge_style</code>属性：指定用于渲染边的样式的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">edge_label_style</code>属性：指定用于渲染边标签的文本样式的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">edge_marker_style</code>属性：指定要用于边标记的标记样式的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">edge_marker_size</code>属性：指定边标记的大小（像素数）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_style</code>属性：指定用于呈现节点的样式的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_label_style</code>属性：指定用于呈现节点标签的文本样式的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">face_style</code>属性：指定用于渲染面的样式的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">face_label_style</code>属性：指定用于渲染面标签的文本样式的名称。
                           </p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-5A7910EC-68E5-4310-A816-217FCD1E4460__BABJADBJ">示例2-25</a>定义了一个调试模式拓扑主题，用于从CITY_DATA拓扑中的所有要素表中呈现要素，边，节点和面。
                     </p>
                     <div class="example" id="GUID-5A7910EC-68E5-4310-A816-217FCD1E4460__BABFJGJF">
                        <p class="titleinexample">示例2-24拓扑主题</p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“topo_theme”user_clickable =“false”&gt; &lt;jdbc_topology_query topology_name =“CITY_DATA”feature_table =“LAND_PARCELS”label_column =“FEATURE_NAME”spatial_column =“FEATURE”label_style =“T.CITY NAME”render_style =“C.COUNTIES” jdbc_srid =“0”datasource =“topology”asis =“false”&gt;选择要素，来自land_parcels的feature_name &lt;/ jdbc_topology_query&gt; &lt;/ theme&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5A7910EC-68E5-4310-A816-217FCD1E4460__BABJADBJ">
                        <p class="titleinexample">示例2-25使用调试模式的拓扑主题</p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“topo_theme”mode =“debug”user_clickable =“false”&gt; &lt;jdbc_topology_query topology_name =“CITY_DATA”edge_style =“C.RED”edge_marker_style =“M.IMAGE105_BW”edge_marker_size =“8”edge_label_style =“T.EDGE “node_style =”M.CIRCLE“node_label_style =”T.NODE“face_style =”C.BLUE“face_label_style =”T.FACE“jdbc_srid =”0“datasource =”topology“asis =”false“&gt; &lt;/ jdbc_topology_query&gt; &lt; /主题&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-5ED5586B-833F-4477-954C-58CD78006733">创建预定义拓扑主题</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9599"></a><a id="JIMPV9598"></a><div class="props_rev_3"><a id="GUID-5ED5586B-833F-4477-954C-58CD78006733" name="GUID-5ED5586B-833F-4477-954C-58CD78006733"></a><h5 id="JIMPV-GUID-5ED5586B-833F-4477-954C-58CD78006733" class="sect5"><span class="enumeration_section">2.3.6.1</span>创建预定义拓扑主题</h5>
                     <div>
                        <p>要创建预定义拓扑主题，必须通过在USER_SDO_THEMES视图中插入行来存储拓扑主题的定义（在<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图中</a>描述）。<a href="map-visualization-concepts.html#GUID-5ED5586B-833F-4477-954C-58CD78006733__BABGJCBH">示例2-26</a>存储拓扑主题的定义。
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-5ED5586B-833F-4477-954C-58CD78006733__BABGJCBH">例2-26</a>创建一个名为拓扑主题<code class="codeph">LANDPARCELS</code>名为拓扑<code class="codeph">CITY_DATA</code> 。功能表名称（本例中为LAND_PARCELS）插入USER_SDO_THEMES视图的BASE_TABLE列，功能列名称（本例中为FEATURE）插入GEOMETRY_COLUMN列，并插入带有一个<code class="codeph">&lt;styling_rules&gt;</code>元素的XML文档在STYLING_RULES列中。
                        </p>
                        <p>在拓扑主题的<code class="codeph">&lt;styling_rules&gt;</code>元素中， <code class="codeph">theme_type</code>必须是<code class="codeph">topology</code> ，以便将此主题识别为拓扑主题。<a href="map-visualization-concepts.html#GUID-5ED5586B-833F-4477-954C-58CD78006733__BABGJCBH">示例2-26中</a>的主题定义了一个样式规则，该规则使用<code class="codeph">C.RED</code>样式呈现<code class="codeph">CITY_DATA</code>拓扑中的所有地块特征，并使用<code class="codeph">T.TEXT STYLE</code>标签样式表示要素表的FEATURE_NAME列中的值。
                        </p>
                        <p><code class="codeph">&lt;styling_rules&gt;</code>元素的DTD显示在<a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="主题定义包含一个&lt;styling_rules&gt;元素，根据主题类型，该元素可能包含多个其他元素。">主题：样式规则中</a> 。
                        </p>
                        <div class="example" id="GUID-5ED5586B-833F-4477-954C-58CD78006733__BABGJCBH">
                           <p class="titleinexample">示例2-26创建预定义拓扑主题</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes VALUES（'LANDPARCELS'，'地块的拓扑主题'，'LAND_PARCELS'，'FEATURE'，'&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“topology”topology_name =“CITY_DATA”&gt; &lt;rule&gt; &lt;features style =“C.RED”&gt; &lt;/ features&gt; &lt;label column =“FEATURE_NAME”style =“T.TEXT STYLE”&gt; &lt;/ label &gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;'）;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-5A7910EC-68E5-4310-A816-217FCD1E4460">拓扑主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9601"></a><a id="JIMPV9600"></a><div class="props_rev_3"><a id="GUID-C0538735-A453-4161-BADF-1FB8BA628B26" name="GUID-C0538735-A453-4161-BADF-1FB8BA628B26"></a><h4 id="JIMPV-GUID-C0538735-A453-4161-BADF-1FB8BA628B26" class="sect4"><span class="enumeration_section">2.3.7</span> WFS主题</h4>
                  <div>
                     <p><span class="bold">WFS主题</span>是一种特殊的地图可视化主题，支持使用Open GIS Consortium（OGC）Web要素服务（WFS）协议（特别是WFS 1.0.0实现规范）呈现的数据呈现。
                     </p>
                     <p>WFS主题在概念上类似于几何主题，用户可以渲染和标记要素。在呈现WFS主题时使用WFS操作<code class="codeph">GetCapabilities</code> ， <code class="codeph">DescribeFeatureType</code>和<code class="codeph">GetFeature</code> 。访问WFS服务时，地图可视化工具会缓存有关功能和要素类型的信息。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">GetCapabilities</code>检索服务器常规信息，包括发出请求的URL地址和可用功能。通常，WFS功能请求具有以下形式：</p><pre class="oac_no_warn" dir="ltr">HTTP：//本地主机：1979 /的GeoServer / WFS /获得性能SERVICE = WFS＆VERSION = 1.0.0＆REQUEST =获得性能</pre><p>结果包括一个&lt;Capabilities&gt;元素，其中包含WFS请求的URL地址。例如，以下内容包括HTTP <code class="codeph">GET</code>和<code class="codeph">POST</code>请求的GetCapabilities URL。
                           </p><pre class="oac_no_warn" dir="ltr">&lt;Capability&gt; &lt;Request&gt; &lt;GetCapabilities&gt; &lt;DCPType&gt; &lt;HTTP&gt; &lt;获取onlineResource =“http：// localhost：1979 / geoserver / wfs / GetCapabilities？” /&gt; &lt;/ HTTP&gt; &lt;/ DCPType&gt; &lt;DCPType&gt; &lt;HTTP&gt; &lt;发布在线资源=“http：// localhost：1979 / geoserver / wfs / GetCapabilities？” /&gt; &lt;/ HTTP&gt; &lt;/ DCPType&gt; &lt;/ GetCapabilities&gt;。 。 。&lt;/能力&gt;</pre></li>
                        <li>
                           <p><code class="codeph">DescribeFeatureType</code>检索特征信息，包括属性和类型。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GetFeature</code>检索要素几何和属性。<code class="codeph">GetFeature</code>请求的输出格式是GML2。
                           </p>
                        </li>
                     </ul>
                     <p>以下属性适用于WFS主题的定义：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">datasource</code>属性：指定将从中加载样式的地图可视化工具数据源。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">feature_attributes</code>属性：指定可与高级样式一起使用的要素属性（除了几何和标签列）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">feature_ids</code>属性：指定要检索的WFS功能ID。功能ID使用WFS响应中的<code class="codeph">fid</code>名称表示。如果指定了要素ID，则WFS请求中不使用空间过滤器和查询条件。</p>
                        </li>
                        <li>
                           <p><code class="codeph">feature_name</code>属性：指定WFS功能名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">key_column</code>属性：指定要用作键列的属性。适用于预定义的主题，可以在Oracle Maps应用程序中使用。如果未指定<code class="codeph">key_column</code> <code class="codeph">fid</code>用作键列。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">label_column</code>属性：指定要素表中包含要与每个WFS要素一起使用的文本标签的列。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">label_style</code>属性：指定用于在标签列中呈现标签的文本样式的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">query_condition</code>属性：指定要应用于WFS主题的<code class="codeph">WHERE</code>子句条件。不能是使用多个括号定义的表达式层次结构的复杂条件。查询中的每个字符串必须用空格分隔。如果无法解析条件，则会在WFS请求中忽略该条件。如果指定<code class="codeph">feature_ids</code>属性，则会忽略任何查询条件。以下是有效表达式的示例：</p><pre class="oac_no_warn" dir="ltr">state_name ='New Hampshire'或state_name ='New York'（state_name ='New Hampshire'或state_name ='New York'）和top_pop&gt; 700000（state_name ='New Hampshire'或state_name ='New York'）和（top_pop &gt; 700000）</pre></li>
                        <li>
                           <p><code class="codeph">render_style</code>属性：指定用于渲染几何的样式的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">service_url</code> attribute：对应于HTTP <code class="codeph">GET</code>请求的功能地址。地图可视化工具的service_url参数必须是<code class="codeph">&lt;GetCapabilities&gt;</code>元素中HTTP <code class="codeph">GET</code>的在线资源地址。在前面的示例中，要使用的值是： <code class="codeph">http://localhost:1979/geoserver/wfs/GetCapabilities?</code></p>
                           <p>不包括Capabilities参数<code class="codeph">SERVICE</code> ， <code class="codeph">VERSION</code>和<code class="codeph">REQUEST</code> ;仅使用功能信息中的URL。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">spatial_column</code>属性：指定SDO_TOPO_GEOMETRY类型的空间要素列的名称。</p>
                        </li>
                        <li>
                           <p><code class="codeph">srs</code>属性：以EPSG或Oracle Spatial和Graph格式指定WFS功能的空间参照系（坐标系）名称。例如， <code class="codeph">EPSG:4325</code> ， <code class="codeph">SDO:8307</code>和<code class="codeph">8307</code> （空间和图形SRID值）指定相同的SRS。如果指定了EPSG SRS值，则地图可视化工具会尝试识别等效的空间和图形（SDO）SRID;如果未找到匹配的SRID，则假定主题的SRID为零（0）。地图可视化工具查找匹配的SRID值，如下所示：</p>
                           <ol>
                              <li>
                                 <p>使用SDO中指定的任何自定义映射到EPSG SRID映射文件指定的映射可视化器配置文件，如<a href="introduction-to-map-visualization-component.html#GUID-431C67C1-3566-4490-AF9E-647606A28073">自定义SRS映射中所述</a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>使用空间和图形功能SDO_CS.MAP_EPSG_SRID_TO_ORACLE获取等效的SDO代码（如果此功能在用于存储数据的Oracle数据库版本中可用）。</p>
                              </li>
                              <li>
                                 <p>如果可以找到匹配项，请使用MDSYS.CS_SRS表中的EPSG代码。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>可以定义<code class="codeph">user</code>和<code class="codeph">password</code>属性以访问使用基本身份验证的安全WFS服务器。
                           </p>
                           <p>如果WFS服务器部署在WebLogic Application Server中，则必须将参数<code class="codeph">-DUseSunHttpHandler=true</code>添加到WebLogic Server的启动脚本中。
                           </p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-C0538735-A453-4161-BADF-1FB8BA628B26__CIHCJGJB">示例2-27</a>显示了具有动态WFS主题的请求。WFS服务是<code class="codeph">geoserver</code> ，它安装在本地系统上。
                     </p>
                     <div class="example" id="GUID-C0538735-A453-4161-BADF-1FB8BA628B26__CIHCJGJB">
                        <p class="titleinexample">示例2-27具有动态WFS主题的WFS请求</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;map_request title =“WFS MAP”datasource =“mvdemo”width =“640”height =“480”bgcolor =“＃a6cae0”antialiase =“true”mapfilename =“wfs_map”format =“PNG_URL”&gt; &lt;center size = “20。”&gt; &lt;geoFeature&gt; &lt;geometryProperty typeName =“center”&gt; &lt;Point&gt; &lt;coordinates&gt; -70。，44。&lt;/ coordinates&gt; &lt;/ Point&gt; &lt;/ geometricProperty&gt; &lt;/ geoFeature&gt; &lt;/ center&gt; &lt;themes &gt; &lt;theme name =“wfs”&gt; &lt;wfs_feature_request service_url =“http：// localhost：1979 / geoserver / wfs / GetCapabilities？” srs =“EPSG：4326”feature_name =“states”spatial_column =“the_geom”render_style =“C.COUNTIES”label_column =“STATE_NAME”label_style =“T.STATE NAME”datasource =“mvdemo”/&gt; &lt;/ theme&gt; &lt;/主题&gt; &lt;/ map_request&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282">创建预定义的WFS主题</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9603"></a><a id="JIMPV9604"></a><a id="JIMPV9602"></a><div class="props_rev_3"><a id="GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282" name="GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282"></a><h5 id="JIMPV-GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282" class="sect5"><span class="enumeration_section">2.3.7.1</span>创建预定义的WFS主题</h5>
                     <div>
                        <p>要创建预定义的WFS主题，必须通过在USER_SDO_THEMES视图中插入行来存储WFS主题的定义（在<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图中</a>描述）。<a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHHFAFF">例2-28</a>存储了WFS主题的定义。
                        </p>
                        <p>在<a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHHFAFF">例2-28中</a> ，WFS特征<code class="codeph">POI</code>用作基表，属性<code class="codeph">THE_GEOM</code>是空间列。样式规则信息包含<code class="codeph">service_url</code>和<code class="codeph">srs</code>信息;虽然未在<a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHHFAFF">例2-28中</a>示出，但它也可以指定<code class="codeph">key_column</code>值。样式规则的<code class="codeph">&lt;features&gt;</code>和<code class="codeph">&lt;label&gt;</code>元素类似于几何主题中使用的规则。隐藏信息（ <code class="codeph">&lt;hidden_info&gt;</code>元素）也可以在Oracle Maps应用程序中定义和使用。
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHDHCJD">示例2-29</a>显示了使用<a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHHFAFF">示例2-28中</a>创建的预定义主题的映射请求。
                        </p>
                        <p>在某些情况下，代理信息可能会影响对WFS服务器的访问。如果发生这种情况，请在地图可视化工具配置文件中指定相应的代理参数。</p>
                        <div class="example" id="GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHHFAFF">
                           <p class="titleinexample">示例2-28创建预定义的WFS主题</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes VALUES（'WFS_THEME1'，'WFS'，'POI'，'THE_GEOM'，'&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“wfs”service_url =“http：// localhost：1979 / geoserver / wfs / GetCapabilities？” srs =“EPSG：4326”&gt; &lt;hidden_info&gt; &lt;field column =“NAME”name =“name”/&gt; &lt;field column =“MAINPAGE”name =“mainpage”/&gt; &lt;/ hidden_info&gt; &lt;rule&gt; &lt;features style = “M.STAR”&gt; &lt;/ features&gt; &lt;label column =“NAME”style =“T.STREET NAME”&gt; 1 &lt;/ label&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;'）;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHDHCJD">
                           <p class="titleinexample">示例2-29具有预定义WFS主题的映射请求</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;map_request title =“预定义的WFS MAP”datasource =“mvdemo”width =“640”height =“480”bgcolor =“＃a6cae0”antialiase =“true”format =“PNG_STREAM”&gt; &lt;themes&gt; &lt;theme name =“ wfs_theme1“/&gt; &lt;/ themes&gt; &lt;/ map_request&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-C0538735-A453-4161-BADF-1FB8BA628B26">WFS主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9932"></a><a id="JIMPV9931"></a><div class="props_rev_3"><a id="GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8" name="GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8"></a><h4 id="JIMPV-GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8" class="sect4"><span class="enumeration_section">2.3.8</span> WMTS主题</h4>
                  <div>
                     <p><span class="bold">WMTS主题</span>支持使用Open GIS Consortium（OGC）Web Map Tile Service（WMTS）标准，特别是WMTS 1.0.0实现标准提供的数据呈现。
                     </p>
                     <p>WMTS主题通过Internet从启用WMTS的服务器获取磁贴图像并呈现图像。启用WMTS的服务器上的磁贴图像在空间上以预定义的内容，范围和分辨率引用。</p>
                     <p>呈现WMTS主题时使用WMTS操作<code class="codeph">GetCapabilities</code> ， <code class="codeph">GetTile</code>和<code class="codeph">GetFeatureInfo</code> 。当地图可视化工具访问WMTS服务时，它会缓存该WMTS服务的功能信息。在创建WMTS主题时，您可能需要在Map Builder中指定代理服务器，并在使用WMTS主题时编辑地图可视化器配置文件（ <code class="codeph">MapViewerConfig.xml</code> ）。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">GetCapabilities</code>操作检索服务器的一般信息，包括发出请求的URL地址和可用的功能。通常，WMTS功能请求具有以下形式：</p><pre class="oac_no_warn" dir="ltr">http://maps.opengeo.org/geowebcache/service/wmts?service=WMTS&amp;version=1.0.0&amp;request=GetCapabilities</pre><p>结果包括一个<code class="codeph">&lt;Capabilities&gt;</code>元素，其中包含WMTS请求的URL地址。例如，以下内容包括HTTP GET或POST请求的<code class="codeph">GetCapabilities</code> URL：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”encoding =“UTF-8”？&gt; &lt;Capabilities xmlns =“http://www.opengis.net/wmts/1.0”xmlns：ows =“http://www.opengis.net/ows/1.1”xmlns：xlink =“http：// www。 w3.org/1999/xlink“xmlns：xsi =”http://www.w3.org/2001/XMLSchema-instance“xmlns：gml =”http://www.opengis.net/gml“xsi：schemaLocation = “http://www.opengis.net/wmts/1.0 http://schemas.opengis.net/wmts/1.0/wmtsGetCapabilities_response.xsd”version =“1.0.0”&gt; &lt;ows：ServiceIdentification&gt; &lt;ows：Title&gt; <span class="bold">Web地图平铺服务 -  GeoWebCache</span> &lt;/ ows：标题&gt; &lt;ows：ServiceType&gt; <span class="bold">OGC WMTS</span> &lt;/ ows：ServiceType&gt; &lt;ows：ServiceTypeVersion&gt; 1.0.0 &lt;/ ows：ServiceTypeVersion&gt; &lt;/ ows：ServiceIdentification&gt; &lt;ows：ServiceProvider&gt; &lt;ows：ProviderName&gt; <span class="bold">http://maps.opengeo.org/geowebcache/service/wmts</span> &lt;/ ows：ProviderName&gt; &lt;ows：ProviderSite xlink：href =“http://maps.opengeo.org/geowebcache/service/wmts “/&gt; &lt;ows：ServiceContact&gt; &lt;ows：IndividualName&gt; <span class="bold">GeoWebCache用户</span> &lt;/ ows：IndividualName&gt; &lt;/ ows：ServiceContact&gt; &lt;/ ows：ServiceProvider&gt; &lt;ows：OperationsMetadata&gt; &lt;ows：Operation name =”GetCapabilities“&gt; &lt;ows ：DCP&gt; &lt;ows：HTTP&gt; &lt;ows ：获取xlink：href =“http://maps.opengeo.org/geowebcache/service/wmts？”&gt; &lt;ows：Constraint name =“GetEncoding”&gt; &lt;ows：AllowedValues&gt; &lt;ows：Value&gt; <span class="bold">KVP</span> &lt;/ ows：值&gt; &lt;/ ows：AllowedValues&gt; &lt;/ ows：Constraint&gt; &lt;/ ows：Get&gt; &lt;/ ows：HTTP&gt; &lt;/ ows：DCP&gt; &lt;/ ows：Operation&gt; &lt;ows：Operation name =“GetTile”&gt; &lt;ows ：DCP&gt; &lt;ows：HTTP&gt; &lt;ows：获取xlink：href =“http://maps.opengeo.org/geowebcache/service/wmts？”&gt; &lt;ows：Constraint name =“GetEncoding”&gt; &lt;ows：AllowedValues&gt; &lt;ows：Value&gt; <span class="bold">KVP</span> &lt;/ ows：Value&gt; &lt;/ ows：AllowedValues&gt; &lt;/ ows：Constraint&gt; &lt;/ ows：Get&gt; &lt;/ ows：HTTP&gt; &lt;/ ows：DCP&gt; &lt;/ ows：Operation&gt; &lt;ows ：操作名称=“GetFeatureInfo”&gt; &lt;ows：DCP&gt; &lt;ows：HTTP&gt; &lt;ows：获取xlink：href =“http://maps.opengeo.org/geowebcache/service/wmts？”&gt; &lt;ows：约束名称=“GetEncoding”&gt; &lt;ows：AllowedValues&gt; &lt;ows：Value&gt; KVP &lt;/ ows：Value&gt; &lt;/ ows：AllowedValues&gt; &lt;/ ows：Constraint&gt; &lt;/ ows：Get&gt; &lt;/ ows：HTTP&gt; &lt;/ ows： DCP&gt; &lt;/ ows：Operation&gt; &lt;/ ows：OperationsMetadata&gt; &lt;Contents&gt; &lt;Layer&gt; &lt;ows：Title&gt; bluemarble &lt;/ ows：Title&gt; &lt;ows：WGS84BoundingBox&gt; &lt;ows：LowerCorner&gt; -180.0 -90.0 &lt;/ ows： LowerCorner&gt; &lt; ows：UpperCorner&gt; 180.0 90.0 &lt;/ ows：UpperCorner&gt; &lt;/ ows：WGS84BoundingBox&gt; &lt;ows：Identifier&gt; <span class="bold">bluemarble</span> &lt;/ ows：Identifier&gt; &lt;Style isDefault =“true”&gt; &lt;ows：Identifier&gt; <span class="bold">_null</span> &lt;/ ows：Identifier&gt; &lt;/ Style&gt; &lt;Format&gt; <span class="bold">image / png</span> &lt;/ Format&gt; &lt;Format&gt; <span class="bold">image / jpeg</span> &lt;/ Format&gt; &lt;TileMatrixSetLink&gt; &lt;TileMatrixSet&gt; <span class="bold">EPSG：4326</span> &lt;/ TileMatrixSet&gt; &lt;/ TileMatrixSetLink&gt; &lt;TileMatrixSetLink&gt; &lt;TileMatrixSet&gt; <span class="bold">EPSG：900913</span> &lt;/ TileMatrixSet&gt; &lt;/ TileMatrixSetLink&gt; &lt;/ Layer&gt; ...&lt;TileMatrixSet&gt; &lt;ows：Identifier&gt; <span class="bold">EPSG：4326</span> &lt;/ ows：Identifier&gt; &lt;ows：SupportedCRS&gt; <span class="bold">urn：ogc：def：crs：EPSG :: 4326</span> &lt;/ ows：SupportedCRS&gt; &lt;TileMatrix&gt; &lt;ows：Identifier&gt; E <span class="bold">PSG ：4326：0</span> &lt;/ ows：Identifier&gt; &lt;ScaleDenominator&gt; <span class="bold">2.795411320143589E8</span> &lt;/ ScaleDenominator&gt; &lt;TopLeftCorner&gt; <span class="bold">90.0 -180.0</span> &lt;/ TopLeftCorner&gt; &lt;TileWidth&gt; <span class="bold">256</span> &lt;/ TileWidth&gt; &lt;TileHeight&gt; <span class="bold">256</span> &lt;/ TileHeight&gt; &lt;MatrixWidth&gt; <span class="bold">2</span> &lt; / MatrixWidth&gt; &lt;MatrixHeight&gt; <span class="bold">1</span> &lt;/ MatrixHeight&gt; &lt;/ TileMatrix&gt; ...&lt;/ TileMatrixSet&gt; ...&lt;/ Contents&gt; &lt;ServiceMetadataURL xlink：href =“http://maps.opengeo.org/geowebcache/service/wmts?REQUEST=getcapabilities&amp;amp;VERSION=1.0.0”/&gt; &lt;/ Capabilities&gt;</pre></li>
                        <li>
                           <p><code class="codeph">GetTile</code>操作从WMTS服务器检索切片图像。对服务器的请求包含定义图块图像的键值对（KVP）的参数。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GetFeatureInfo</code>操作允许WMTS客户端在特定查询层的特定区块的特定位置请求信息。
                           </p>
                        </li>
                     </ul>
                     <p>有关这些操作的详细说明， <a href="http://www.opengeospatial.org/standards/wmts" target="_blank"><code class="codeph">http://www.opengeospatial.org/standards/wmts</code></a> 。</p>
                     <p>以下属性适用于WMTS主题的定义：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">current_threads</code>属性（可选）：一个整数（int）变量;默认值为8。它是从WMTS服务器检索切片图像的并发线程数。通常，大量并发线程允许更多线程从地图服务器并行检索图像切片。其他约束因素可能会阻止您使用数百个数字，但您可能会尝试将其设置为16,32或更大的值以便更快地处理。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">format</code>属性：指定存储在WMTS服务器中的切片图像格式。地图可视化工具支持tif，jpeg，png和png8格式。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">layer</code> attribute：指定要为其提取切片图像的图层名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">matrix_set_id</code>属性：指定要从中提取切片图像的矩阵集的ID。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">service_url</code> attribute：对应于HTTP GET请求的功能地址。地图可视化工具的<code class="codeph">service_url</code>参数必须是<code class="codeph">&lt;GetCapabilities&gt;</code>元素中HTTP GET的在线资源地址。在前面的示例中，要使用的值是： <code class="codeph">http://maps.opengeo.org/geowebcache/service/wmts?</code> ： <code class="codeph">http://maps.opengeo.org/geowebcache/service/wmts?</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">snap_to_tile_scale</code>属性（可选）：布尔值（ <code class="codeph">true</code>或<code class="codeph">false</code> ）;默认值为<code class="codeph">false</code> 。
                           </p>
                           <p>当<code class="codeph">snap_to_tile_scale</code>设置为<code class="codeph">true</code> ，请求比例（从设备窗口大小和请求数据窗口大小派生）将捕捉到最接近的图块比例;地图比例将在图块比例中。例如，如果存在比例系列为...，1：4000,1：2000,1.1000,1：500，......的图块，请求比例为1：1600将被捕捉到1：2000图块比例，并且map将使用相同的1：2000比例， <a href="map-visualization-concepts.html#GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8__CIHIFFFH">如图2-9</a>所示。
                           </p>
                           <div class="figure" id="GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8__CIHIFFFH">
                              <p class="titleinfigure">图2-9 snap_to_tile_scale属性</p><img src="img/snap_to_tile_scale.jpg" alt="下面是图2-9的描述" title="下面是图2-9的描述" longdesc="img_text/snap_to_tile_scale.html"><br><a href="img_text/snap_to_tile_scale.html">“图2-9 snap_to_tile_scale属性”的说明</a></div>
                           <!-- class="figure" -->
                           <p>如果地图请求具有多个指定<code class="codeph">snap_to_tile_scale</code>为<code class="codeph">true</code> WMTS主题，则只有第一个WMTS <code class="codeph">snap_to_tile_scale</code>规范设置为<code class="codeph">true</code>而所有其他规则都重置为<code class="codeph">false</code> 。这是逻辑行为。例如，如果两个这样的主题都将属性设置为<code class="codeph">true</code> ，但两个WMTS切片比例系列彼此不同（两个地图服务器可能来自使用不同比例系列的不同机构），则第一个主题将使用其最接近的图块比例以检索图块数据和最终请求比例;同时，第二个主题必须将其<code class="codeph">snap_to_tile_scale</code>重置为<code class="codeph">false</code> ，然后必须根据其<code class="codeph">tile_resizing_option</code>找到自己的切片比例，然后检索切片，最后调整切片大小以匹配第一个主题的切片比例。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">style</code>属性：目前未在地图可视化工具中使用;默认为字符串<code class="codeph">default</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">tile_resizing_option</code>属性（可选）：字符串<code class="codeph">unbiased</code> ， <code class="codeph">expand_biased</code>或<code class="codeph">contract_biased</code> ;默认是<code class="codeph">unbiased</code> 。如果<code class="codeph">snap_to_tile_scale</code>设置为<code class="codeph">true</code> ，则忽略<code class="codeph">tile_resizing_option</code> 。
                           </p>
                           <p>有关更多信息，请参阅<a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478">tile_resizing_option属性的工作原理</a> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">timeout</code>属性（可选）：一个整数，指定请求的超时时间（以毫秒为单位）;默认值为0，（即，等待响应的请求没有限制）。
                           </p>
                           <p>指定此属性可确保在地图服务器在指定时间段内未响应时终止映射请求，从而释放资源。您可以尝试使用30000（30,000毫秒或30秒）的值。</p>
                        </li>
                        <li>
                           <p><code class="codeph">top_left_corner_x</code>属性（可选）：由WMTS服务器提供的整个切片图像范围的左上角的x坐标值。如果未指定，则使用从WMTS服务器检索的值。如果指定此属性，还要指定<code class="codeph">top_left_corner_y</code>属性。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">top_left_corner_y</code>属性（可选）：WMTS服务器提供的整个切片图像范围左上角的y坐标值。如果未指定，则使用从WMTS服务器检索的值。如果指定此属性，还要指定<code class="codeph">top_left_corner_x</code>属性。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">version</code>属性：WMTS服务器实现的WMTS规范的版本。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478">tile_resizing_option属性如何工作</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B">snap_to_tile_scale和tile_resizing_option属性使用指南</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA">创建预定义的WMTS主题</a><br></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8__GUID-B82708F2-7365-42AD-84B1-148FA1AFEF56">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="ogc-wmts-support-map-visualzation-component.html#GUID-FD2428ED-0400-4D11-83F4-9AB59FE766C9" title="地图可视化组件支持使用Open GIS Consortium（OGC）Web Map Tile Service（WMTS）协议（特别是WMS 1.0.0实现规范）提供的数据呈现">OGC WMTS支持地图可视化组件，</a>以获取有关地图可视化工具，WMTS操作的WMTS服务以及为地图可视化工具准备WMTS服务的信息。
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9934"></a><a id="JIMPV9935"></a><a id="JIMPV9936"></a><a id="JIMPV9933"></a><div class="props_rev_3"><a id="GUID-5B11247C-C383-4DED-8DE2-AED637647478" name="GUID-5B11247C-C383-4DED-8DE2-AED637647478"></a><h5 id="JIMPV-GUID-5B11247C-C383-4DED-8DE2-AED637647478" class="sect5"><span class="enumeration_section">2.3.8.1</span> tile_resizing_option属性的工作原理</h5>
                     <div>
                        <p>如果WMTS主题的<code class="codeph">snap_to_tile_scale</code>属性为false（默认值）或省略，则始终<code class="codeph">tile_resizing_option</code>请求比例，并在选择适当的图块比例时使用<code class="codeph">tile_resizing_option</code>属性值（指定或默认）。但是，如果snap_to_tile_scale为true，则忽略<code class="codeph">tile_resizing_option</code>属性值。
                        </p>
                        <p><code class="codeph">tile_resizing_option</code>属性值可以是以下字符串值之一：string <code class="codeph">unbiased</code> （默认值）， <code class="codeph">expand_biased</code>或<code class="codeph">contract_biased</code> 。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">unbiased</code> （默认）：选择最接近的图块比例级别，然后展开或缩小图块图像以生成请求比例中的地图。例如，在<a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHBBJGE">图2-10中</a> ，如果请求比例落在1：3000和1：1500的比例范围内，则使用瓦片比例1：2000来生成任何请求比例图。
                              </p>
                              <div class="figure" id="GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHBBJGE">
                                 <p class="titleinfigure">图2-10无偏瓦片_resizing_option值</p><img src="img/unbiased_option.jpg" alt="下面是图2-10的描述" title="下面是图2-10的描述" longdesc="img_text/unbiased_option.html"><br><a href="img_text/unbiased_option.html">“图2-10无偏瓦片_resizing_option值”的描述</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p><code class="codeph">expand_biased</code> ：当识别适当的图块比例以在请求比例中生成地图时，使用用于扩展图块图像以呈现请求图的偏好。换句话说，您更喜欢使用较小的图块比例来生成请求比例的地图。目前实施了8：2的扩展优惠比率。例如，在<a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHHJCGF">图2-11中</a> ，如果其比例在1：2400到1：1200的范围内，则使用瓦片比例1：2000来生成请求图。
                              </p>
                              <div class="figure" id="GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHHJCGF">
                                 <p class="titleinfigure">图2-11 expand_biased tile_resizing_option值</p><img src="img/expand_biased_option.jpg" alt="下面是图2-11的描述" title="下面是图2-11的描述" longdesc="img_text/expand_biased_option.html"><br><a href="img_text/expand_biased_option.html">“图2-11 expand_biased tile_resizing_option值”的描述</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p><code class="codeph">contract_biased</code> ：当识别适当的图块比例以在请求比例中生成地图时，使用约束图块以呈现请求图的偏好。换句话说，您更喜欢使用更大的图块比例来生成请求比例的地图。目前正在实施8：2的合同优惠比率。例如，在<a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHIEEBB">图2-12中</a> ，如果其比例在1：3600到1：1800的范围内，则使用瓦片比例1：2000来生成请求图。
                              </p>
                              <div class="figure" id="GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHIEEBB">
                                 <p class="titleinfigure">图2-12 contract_biased tile_resizing_option值</p><img src="img/contract_biased_option.jpg" alt="下面是图2-12的描述" title="下面是图2-12的描述" longdesc="img_text/contract_biased_option.html"><br><a href="img_text/contract_biased_option.html">“图2-12 contract_biased tile_resizing_option值”的描述</a></div>
                              <!-- class="figure" -->
                           </li>
                        </ul>
                        <p>另请参见<a href="map-visualization-concepts.html#GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B">snap_to_tile_scale和tile_resizing_option属性使用指南</a> 。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8">WMTS主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9938"></a><a id="JIMPV9937"></a><div class="props_rev_3"><a id="GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B" name="GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B"></a><h5 id="JIMPV-GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B" class="sect5"><span class="enumeration_section">2.3.8.2</span> snap_to_tile_scale和tile_resizing_option属性使用指南</h5>
                     <div>
                        <p>本节介绍使用<code class="codeph">snap_to_tile_scale</code>和<code class="codeph">tile_resizing_option</code>属性生成质量更好的地图的一般准则。由于映射具有各种各样的应用程序，因此您还可以使用域知识来设置最符合您需求的属性值。
                        </p>
                        <p>尽可能将<code class="codeph">snap_to_tile_scale</code>设置为<code class="codeph">true</code>以使用最接近的切片比例而不是请求比例，因为原始切片贴图具有最佳的贴图质量。
                        </p>
                        <p>但是，如果必须遵守请求比例，请在设置属性时考虑以下事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果设置<code class="codeph">tile_resizing_option</code>值，请省略<code class="codeph">snap_to_tile_scale</code>属性或将其设置为<code class="codeph">false</code> （默认值）。如果<code class="codeph">snap_to_tile_scale</code>设置为<code class="codeph">true</code> ，则不会<code class="codeph">snap_to_tile_scale</code>请求比例，而是使用最接近的切片比例。
                              </p>
                           </li>
                           <li>
                              <p>如果地图是具有注释和细线性<code class="codeph">expand_biased</code>的地形图，则可能需要使用<code class="codeph">expand_biased</code>选项。
                              </p>
                           </li>
                           <li>
                              <p>如果地图是专题地图，例如土地覆盖地图，您可能需要使用<code class="codeph">contract_biased</code>选项。
                              </p>
                           </li>
                           <li>
                              <p>如果地图是卫星图像，您可能需要使用<code class="codeph">unbiased</code>或<code class="codeph">contract_biased</code>选项。
                              </p>
                           </li>
                        </ul>
                        <p>关于tile_resizing_option可能的值：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通常， <code class="codeph">contract_biased</code>选项可以生成具有更多细节的地图，但是这些地图可能需要比来自<code class="codeph">expand_biased</code>选项的地图更多的<code class="codeph">expand_biased</code> ，并且检索更多地块需要更多时间。
                              </p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">snap_to_tile_scale</code>请求比例（当<code class="codeph">snap_to_tile_scale</code>属性设置为<code class="codeph">false</code> ），当请求比例足够接近瓦片比例时，无论指定的<code class="codeph">tile_resizing_option</code>如何，都将采用相同的操作（扩展或收缩）。例如，如果<a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478">tile_resizing_option属性如何工作中</a>的请求比例为1：1900，则将检索并扩展1：2000中的瓦片地图，以1：1900的地图比例呈现请求图，无论是否<code class="codeph">unbiased</code> ， <code class="codeph">expand_biased</code> <code class="codeph">unbiased</code>或<code class="codeph">contract_biased</code> <code class="codeph">expand_biased</code>选择;类似地，如果请求比例是1：2100，则还将检索1：2000中的瓦片地图，然后缩小以按照1：2100的比例呈现所请求的地图。
                              </p>
                           </li>
                        </ul>
                        <p><a href="map-visualization-concepts.html#GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B__CIHDIAIA">例2-30</a>显示了一个带有动态WMTS主题的请求，其中指定了<code class="codeph">snap_to_tile_scale="true"</code> 。
                        </p>
                        <div class="example" id="GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B__CIHDIAIA">
                           <p class="titleinexample">示例2-30具有动态WMTS主题的请求</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;map_request title =“OpenGeo wmts theme（bluemarble）”datasource =“mvdemo”width =“1024”height =“900”mapfilename =“Bluemarble”format =“PNG_STREAM”&gt; &lt;center size =“80.0”&gt; &lt;geoFeature&gt; &lt;geometryProperty typeName =“center”&gt; &lt;Point&gt; &lt;coordinates&gt; -112,42.0 &lt;/ coordinates&gt; &lt;/ Point&gt; &lt;/ geometricProperty&gt; &lt;/ geoFeature&gt; &lt;/ center&gt; &lt;themes&gt; &lt;theme name =“wmtstheme：Earth” timeout =“10000” <span class="bold">snap_to_tile_scale =“true”</span> &gt; &lt;wmts_gettile_request&gt; &lt;service_url&gt; http://maps.opengeo.org/geowebcache/service/wmts &lt;/ service_url&gt; &lt;version&gt; 1.0.0 &lt;/ version&gt; &lt;layer&gt; bluemarble &lt;/ layer&gt; &lt;matrix_set_id&gt; EPSG：4326 &lt;/ matrix_set_id&gt; &lt;format&gt; image / png &lt;/ format&gt; &lt;style&gt; default &lt;/ style&gt; &lt;top_left_corner_x&gt; -180.0 &lt;/ top_left_corner_x&gt; &lt;top_left_corner_y&gt; 90.0 &lt;/ top_left_corner_y&gt; &lt; / wmts_gettile_request&gt; &lt;/ theme&gt; &lt;/ themes&gt; &lt;/ map_request&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8">WMTS主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9940"></a><a id="JIMPV9941"></a><a id="JIMPV9939"></a><div class="props_rev_3"><a id="GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA" name="GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA"></a><h5 id="JIMPV-GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA" class="sect5"><span class="enumeration_section">2.3.8.3</span>创建预定义的WMTS主题</h5>
                     <div>
                        <p>要创建预定义的WMTS主题，必须通过在USER_SDO_THEMES视图中插入一行来存储WMTS主题的定义（在<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图中</a>描述）。<a href="map-visualization-concepts.html#GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHGFJEE">例2-31</a>存储了WMTS主题的定义。
                        </p>
                        <p>在<a href="map-visualization-concepts.html#GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHGFJEE">例2-31中</a> ， <code class="codeph">earth_image</code>是WMTS主题的名称， <code class="codeph">table_spaceholder</code>和<code class="codeph">geom_col_spaceholder</code>是虚拟值，用于填充USER_SDO_THEMES视图中的BASE_TABLE和GEOMETRY_COLUMN列。样式规则信息包含<code class="codeph">service_url</code> ， <code class="codeph">layer</code> ， <code class="codeph">matrix_set_id</code> ， <code class="codeph">format</code>和<code class="codeph">style</code>信息。未指定<code class="codeph">top_left_corner_x</code>和<code class="codeph">top_left_corner_y</code>属性，因此默认情况下使用从WMTS服务器检索的值。
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHDGFIJ">例2-32</a>显示了使用<a href="map-visualization-concepts.html#GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHGFJEE">例2-31中</a>创建的预定义主题的映射请求。
                        </p>
                        <div class="example" id="GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHGFJEE">
                           <p class="titleinexample">示例2-31创建预定义的WMTS主题</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes VALUES（'earth_image'，'Opengeo.org demo'，'table_spaceholder'，'geom_col_spaceholder'，'&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“wmts”&gt; &lt;version&gt; 1.0.0 &lt;/ version&gt; &lt;service_url&gt; http://maps.opengeo.org/geowebcache/service/wmts &lt;/ service_url&gt; &lt;layer&gt; bluemarble &lt;/ layer&gt; &lt; matrix_set_id&gt; EPSG：4326 &lt;/ matrix_set_id&gt; &lt;format&gt; image / png &lt;/ format&gt; &lt;style&gt; default &lt;/ style&gt; &lt;/ styling_rules&gt;'）;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHDGFIJ">
                           <p class="titleinexample">示例2-32具有预定义WMTS主题的映射请求</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;map_request title =“OpenGeo预定义的wmts主题”datasource =“mvdemo”width =“1024”height =“768”mapfilename =“Bluemarle：Earth”format =“PNG_STREAM”&gt; &lt;center size =“10.0”&gt; &lt;geoFeature&gt; &lt;geometryProperty typeName =“center”&gt; &lt;Point&gt; &lt;coordinates&gt; -75.0,42.0 &lt;/ coordinates&gt; &lt;/ Point&gt; &lt;/ geometricProperty&gt; &lt;/ geoFeature&gt; &lt;/ center&gt; &lt;themes&gt; &lt;theme name =“earth_image”/&gt; &lt;/ themes&gt; &lt;/ map_request&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8">WMTS主题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9606"></a><a id="JIMPV9607"></a><a id="JIMPV9605"></a><div class="props_rev_3"><a id="GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42" name="GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42"></a><h4 id="JIMPV-GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42" class="sect4"><span class="enumeration_section">2.3.9</span>自定义几何主题</h4>
                  <div>
                     <div class="section">
                        <p>自定义几何主题与外部空间数据（除Oracle Spatial和Graph之外的本机格式的空间数据，如shapefile）相关联。自定义几何主题使用空间提供程序类来检索本机数据，外部提供程序必须使用空间数据提供程序插件机制。地图可视化工具提供外部提供程序必须实现的空间提供程序接口类。接口实现具有以下方法（其中一些主要提供可以在Map Builder等应用程序的用户界面中使用的信息）：</p><pre class="oac_no_warn" dir="ltr">public interface SDataProvider {/ ** *返回提供程序的初始化参数。* @return String []  - 带初始化参数名称的数组* / public String [] getInitParameterNames（）; / ** *返回运行时参数名称。运行时参数是提供程序在检索数据对象时可能使用的其他参数*。* @return String []  - 带有运行时参数名称的数组* / public String [] getRuntimeParameterNames（）; / ** *返回一个值，该值提供运行时参数值的提示。*此hin可用作用户界面中的工具提示。* @param runtimeParam * @return表示提示值的String，如果没有可用提示，则返回null * / public String getRuntimeParameterHintValue（String runtimeParam）; / ** *此方法用于设置特定*数据提供程序的初始化参数。* @param params  - 初始化方法使用的参数。* @return boolean  - 如果成功则为true;否则为false * / public boolean init（Properties params）; / ** *此方法基于*特定传入映射请求的给定参数，创建并返回SDataSet实例，该实例包含此提供程序生成的所有空间数据。 * &lt;br&gt; * map visualizer在自定义主题生成器实现上调用此方法。* * @param queryWin搜索区域以检索空间对象。假设窗口已经在数据提供者空间参考系统上。* @param nonSpatialColumns  - 将随对象返回的属性列表。* @param queryCondition  - 查询条件表达式（可能具有绑定参数）。* @param bindingParameters  - 带有绑定参数的查询条件的绑定变量。* @param params  - 提供程序可用于检索数据的参数。* @return SDataObject  -  SDataSet类的一个实例;如果失败则为null。* / public SDataSet buildDataSet（Rectangle2D queryWin，String [] nonSpatialColumns，String queryCondition，Object [] bindingParameters，Properties params）; / ** *返回此数据提供程序的现有属性列表。* @param参数提供者可用于获取属性列表的参数。* @return Field []  - 此提供程序的属性数组。* / public Field [] getAttributeList（Properties params）; / ** *返回数据集空间范围MBR。 * @param params提供程序可用于获取数据范围的参数* @return Rectangle2D  - 此提供程序的数据空间范围。* / public Rectangle2D getDataExtents（Properties params）; / ** *返回提供者是否可以构建空间索引。*如果为true，表示可以调用buildSpatialIndex方法。* @return * / public boolean canBuildSpatialIndex（）; / ** *在数据集上构建空间索引。* @param params提供程序可用于构建空间索引的参数。* @return boolean  - 如果saptial索引创建成功，则为true。* / public boolean buildSpatialIndex（Properties params）; / ** *清除提供者内部缓存（如果提供者实现缓存）。* / public void clearCache（）; / ** *返回可用于查询空间表的参数名称。*可以更多地用作用户界面的信息。* @return * / public String [] getParametersToQuerySpatialMetadata（）; / ** *返回空间表和空间列。* @param params必须定义从* getParametersToQuerySpatialMetadata返回的参数。* @return定义表名的数组列表（index [0]）*和空间列（index [1]）* / public String [] [] getSpatialTables（Properties params）; }</pre><p>必须实现<code class="codeph">init</code>和<code class="codeph">buildDataSet</code>方法。其他方法实现可以为空;但是，应用程序（例如Oracle Map Builder Tool）可以使用这些方法来处理有关空间数据提供程序的信息。提供者可以实现自己的空间索引机制; map visualizer为shapefile提供程序提供了一个实现， <code class="codeph">buildSpatialIndex</code>方法在<code class="codeph">shapefile</code>目录中创建了一个扩展名为<code class="codeph">.oix</code>的索引文件。<a href="creating-registering-custom-spatial-data-provider.html#GUID-EEDC5892-3E42-477E-BCC8-140873665EC4" title="本附录显示了空间数据提供程序的示例实现，并说明了如何注册此提供程序以与地图可视化组件一起使用。">创建和注册自定义空间数据提供程序</a>包含如何使用地图可视化工具实现和注册示例空间提供程序的示例。
                        </p>
                        <p>要使用自定义几何主题在地图可视化工具中渲染原生数据，请按照下列步骤操作：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>基于插件接口实现空间提供程序类，并使用提供程序实现生成jar文件。将jar文件复制到属于map visualizer CLASSPATH定义的目录中。</span></li>
                        <li class="stepexpand"><span>在地图可视化工具配置中注册提供商。地图可视化工具附带一个shapefile提供程序来访问ESRI shapefile，一个GDAL-OGR提供程序访问OGR支持的数据格式，一个Teradata提供程序访问存储在Teradata数据库中的数据。（有关在这些环境中处理空间数据的详细信息，请参阅GDAL-OGR和Teradata文档。）GDAL-OGR库<code class="codeph">gdal.jar</code>和Teradata库<code class="codeph">terajdbc4.jar</code>和<code class="codeph">tdgssconfig.jar</code>必须位于服务器类路径上。地图可视化工具配置文件中的注册部分如下所示：</span><div><pre class="oac_no_warn" dir="ltr">&lt;s_data_provider id =“shapefileSDP”class =“oracle.sdovis。ShapefileDataProvider“&gt; &lt;parameters&gt; &lt;参数名称=”datadir“value =”/ temp / data“/&gt; &lt;/ parameters&gt; &lt;/ s_data_provider&gt;</pre><p>每个提供程序必须定义<code class="codeph">id</code>和<code class="codeph">class</code>名： <code class="codeph">id</code>是标识提供程序的唯一名称，而<code class="codeph">class</code>对应于Java类实现。<code class="codeph">&lt;parameters&gt;</code>元素定义提供程序的初始化参数。
                              </p>
                              <p>对于shapefile提供程序，初始化参数<code class="codeph">datadir</code>定义了地图可视化工具查找数据文件的位置，因此它应该是地图可视化工具可访问的目录。地图可视化工具首先根据主题定义信息查找数据文件;如果无法访问主题定义中定义的数据路径，则地图可视化工具会查找配置文件中定义的数据路径。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建与外部空间数据提供者关联的自定义几何主题。</span></li>
                     </ol>
                     <div class="example" id="GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42__CIHJBHJG">
                        <p class="titleinexample">示例2-33定义动态自定义几何主题</p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“custom_geom_theme_1”&gt; &lt;custom_geom_theme provider_id =“shapefileSDP”srid =“26986”render_style =“C.RED”label_column =“parcel_id”label_style =“T.CITY NAME”datasource =“mvdemo”&gt; &lt;parameters&gt; &lt;参数name =“filename”value =“/ lbs / demo / shapefile / parcel.shp”/&gt; &lt;/ parameters&gt; &lt;/ custom_geom_theme&gt; &lt;/ theme&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42__CIHFJCGI">
                        <p class="titleinexample">示例2-34存储预定义的自定义几何主题</p><pre class="oac_no_warn" dir="ltr">插入user_sdo_themes值（'SHAPE_THEME'，'Shapefile theme'，'CUSTOM_TABLE'，'GEOMETRY'，'&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“geom_custom”srid =“26986”provider_id =“shapefileSDP”&gt; &lt;rule&gt; &lt;features style =“C.RED”&gt; &lt;/ features&gt; &lt;label column =“PARCEL_ID”style =“T.CITY NAME “&gt; 1 &lt;/ label&gt; &lt;/ rule&gt; &lt;parameters&gt; &lt;parameter name =”filename“value =”/ lbs / demo / shapefile / parcel.shp“/&gt; &lt;/ parameters&gt; &lt;/ styling_rules&gt;'）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42__GUID-8B3780D6-3E52-4DF0-999A-4559FC45A788">
                        <p>虽然外部空间数据位于Oracle数据库之外，但您仍需要使用数据库连接来呈现此数据。数据库用于存储与主题相关的元数据信息，以及用于呈现和标记数据的样式信息。</p>
                        <p><a href="map-visualization-concepts.html#GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42__CIHJBHJG">示例2-33</a>显示了动态自定义几何主题的定义。XML元素<code class="codeph">&lt;custom_geom_theme&gt;</code>标识自定义几何主题。<code class="codeph">&lt;parameters&gt;</code>元素定义提供程序要使用的运行时参数。在这种情况下， <code class="codeph">"filename"</code>是运行时参数， <code class="codeph">"/lbs/demo/shapefile/parcel.shp"</code>定义文件路径。地图可视化工具首先尝试使用此文件路径定义;但如果它不可访问，它将使用配置文件中为shapefile空间提供程序定义的数据目录值。
                        </p>
                        <p>可用空间提供程序的运行时参数如下（请注意，Map Builder提供了加密参数值的选项）：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于shapefile提供者：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">filename</code> ：磁盘上shapefile（.shp）的完整路径</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>对于GDAL-OGR：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">datasource</code> ：完整的OGR数据源字符串。根据数据源格式，此字符串可能会有所不同。（有关连接到GDAL-OGR支持的不同格式的详细信息，请参阅GDAL-OGR文档。）
                                    </p>
                                    <p>对于文件格式，此参数的值通常是存档的完整路径。</p>
                                    <p>对于数据库连接，请输入完整的连接字符串以访问空间表和空间列。例如，对于具有一个空间列的Postgis表名STATES，该值可能是：</p><pre class="oac_no_warn" dir="ltr">datasource = PG：dbname ='template_postgis'host ='localhost'port ='5432'user ='postgres'password ='manager'stice = states</pre></li>
                              </ul>
                           </li>
                           <li>
                              <p>对于Teradata提供商：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">jdbcurl</code> ：与Teradata数据库的JDBC连接。字符串格式为：</p><pre class="oac_no_warn" dir="ltr">jdbc： <span class="italic">teradata</span> ：// <span class="italic">&lt;host_address&gt;</span> / DATABASE = &lt; <span class="italic">db_name&gt;</span> ，DBS_PORT = <span class="italic">&lt;db_port&gt;</span> ，TMODE = ANSI，CHARSET = UTF8</pre></li>
                                 <li>
                                    <p><code class="codeph">user</code> ：数据库用户。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">password</code> ：数据库密码。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">containerds</code> ：可选。在应用程序服务器上定义的Teradata容器数据源的名称（例如，WebLogic）。如果已定义，则将首先在map可视化工具中使用它，而不是<code class="codeph">jdbcurl</code>值。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">basetable</code> ：空间表的名称。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">geomcolumn</code> ：空间列的名称。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">fetchsize</code> ：可选。要预取的行数。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>动态自定义几何主题的可用属性是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">provider_id</code>指定空间提供者。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">datasource</code>指定Oracle数据库连接。此连接用于检索样式以呈现空间数据。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">srid</code>指定空间参照系（Oracle Spatial and Graph坐标系）。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">render_style</code>指定渲染<code class="codeph">render_style</code>时要使用的样式。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">label_column</code>指定包含要与主题一起使用的标签文本的列的名称。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">label_style</code>指定标记<code class="codeph">label_style</code>时要使用的样式。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">feature_attributes</code>指定可用于高级样式的其他属性。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">key_column</code>指定可在Oracle Maps应用程序中使用的键属性。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">query_condition</code>指定用于筛选功能选择的WHERE子句。Shapefile提供程序不支持查询条件;但是，OGR提供程序可用于呈现具有查询条件的shapefile。查询条件表达式可以定义绑定参数（例如， <code class="codeph">attr = :1</code> ）。
                              </p>
                           </li>
                        </ul>
                        <p><a href="map-visualization-concepts.html#GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42__CIHFJCGI">示例2-34</a>显示了如何存储预定义的自定义几何主题定义。使用GEOMETRY作为几何列名称，您可以为基表名称指定任何名称。<code class="codeph">"theme_type=geom_custom"</code>属性将主题标识为自定义主题。<code class="codeph">&lt;rule&gt;</code>元素具有与Oracle Spatial and Graph几何主题相同的功能。<code class="codeph">&lt;parameters&gt;</code>元素定义提供者接受的运行时参数。对于shapefile提供程序，运行时<code class="codeph">parameter</code> filename定义shapefile数据的路径。
                        </p>
                        <p>您可以通过在map_request中指定参数来覆盖预定义自定义几何主题的运行时参数部分。例如，您可以在<code class="codeph">&lt;map_request&gt;</code>元素中包含以下内容：</p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“CUSTOM_THEME”&gt; &lt;parameters&gt; &lt;parameter name =“filename”value =“/ lbs / demo / shapefile / counties.shp”/&gt; &lt;/ parameters&gt; &lt;/ theme&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9609"></a><a id="JIMPV9610"></a><a id="JIMPV9611"></a><a id="JIMPV9612"></a><a id="JIMPV9608"></a><div class="props_rev_3"><a id="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9" name="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9"></a><h4 id="JIMPV-GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9" class="sect4"><span class="enumeration_section">2.3.10</span>注释文本主题</h4>
                  <div>
                     <p>Oracle Spatial and Graph支持<span class="italic">OpenGIS地理信息实现规范中</span>指定的注释文本<span class="italic">- 简单的特征访问 - 第1部分：通用体系结构</span> ，它将<span class="bold">注释文本</span>定义为“可以携带地理相关或临时数据的简单放置文本”与过程相关的信息作为可显示的文本。此文本可用于在编辑器中或在更简单的地图中显示。它通常缺乏完整的制图质量，但可以作为任何应用所需的此类文本的近似值。“</p>
                     <p>Oracle Spatial and Graph提供用于存储注释文本的ST_ANNOTATION_TEXT对象类型，以及用于存储与注释文本相关的元数据的USER_ANNOTATION_TEXT_METADATA和ALL_ANNOTATION_TEXT_METADATA视图。有关注释文本支持的更多信息，请参阅<a href="../spatl/sql-multimedia-type-support.html#SPATL568" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a> 。
                     </p>
                     <p>每个注释文本对象可以具有一个或多个元素，并且每个元素由以下定义：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>值：与元素关联的文本。如果值为null，则文本派生自第一个非null前面的元素值。如果所有前面的元素都具有空值，则文本是从元数据派生的文本表达式值。</p>
                        </li>
                        <li>
                           <p>位置：与注释文本对象关联的空间位置。</p>
                        </li>
                        <li>
                           <p>引线：与注释文本对象关联的线性要素。</p>
                        </li>
                        <li>
                           <p>属性：用于显示文本的图形属性。如果值为null，则从元数据中的属性值派生图形属性。</p>
                        </li>
                     </ul>
                     <p>元数据视图中的文本表达式可以是以下任何一种：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>列名称。</p>
                        </li>
                        <li>
                           <p>应用于列名称的函数。例如： <code class="codeph">substr(my_col,1,3)</code></p>
                        </li>
                        <li>
                           <p>两个或多个列名称的串联。例如： <code class="codeph">column_1 || column_2 || column_3</code></p>
                        </li>
                        <li>
                           <p>与列名无关的文本值。在这种情况下，它被视为一个简单的文本字符串，用于任何具有空值的文本元素。</p>
                        </li>
                     </ul>
                     <p>地图可视化工具中的注释文本主题与具有ST_ANNOTATION_TEXT类型列的数据库表相关联。对于每个注释文本元素，地图可视化工具将呈现：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>注释文本元素的值（如果不为null）作为字符串，使用基于元素属性实时创建的文本样式。</p>
                        </li>
                        <li>
                           <p>与注释文本元素关联的引导线（如果不为null）。在这种情况下，用户可以选择地图可视化工具样式来渲染引导线。</p>
                        </li>
                     </ul>
                     <p>每个注释文本元素都有一个由几何表示的包络，用于空间索引。因此，您必须执行以下操作以在地图可视化工具中使用带注释文本表的空间索引：</p>
                     <ol>
                        <li>
                           <p>在USER_ANNOTATION_TEXT_METADATA视图中插入一行，该视图指定注释文本列的名称和注释文本列的PRIVATEENVELOPE属性（即ST_ANNOTATION_TEXT类型的列）。</p>
                           <p>以下示例为名为ANNOTEXT_TABLE的表插入一行，其中包含名为TEXTOBJ的注释文本列：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO USER_SDO_GEOM_METADATA VALUES（'ANNOTEXT_TABLE'，'TEXTOBJ.PRIVATEENVELOPE'，SDO_DIM_ARRAY（SDO_DIM_ELEMENT（'X'，0.0,10.0,0.0005），SDO_DIM_ELEMENT（'Y'，0.0,10.0,0.0005）），null  -  SRID）;</pre></li>
                        <li>
                           <p>在注释文本表的注释文本信封上创建空间索引。</p>
                           <p>以下示例在名为ANNOTEXT_TABLE的表的注释包络上创建名为ANNO_TEXT_IDX的空间索引：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX anno_text_idx ON annotext_table（textobj.privateenvelope）INDEXTYPE IS mdsys.spatial_index;</pre></li>
                     </ol>
                     <p>对于具有有效SRID信息的主题，如果定义了元数据基本地图比例，则元素文本大小将随着地图放大或缩小而缩放。</p>
                     <p><a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHEHCBJ">示例2-35</a>定义了地图可视化工具中预定义注释文本主题的样式规则。该结构类似于其他地图可视化主题。目前，只为每个注释主题处理一个样式规则。在此示例中，主题类型是<code class="codeph">annotation</code> ，要素样式L. <code class="codeph">PH</code>用于呈现引导线，并且查询条件<code class="codeph">(id = 1 or id = 2)</code>附加在最终查询上。
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFGGGA">示例2-36</a>显示了动态注释文本主题的主题定义。定义的参数是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">datasource</code> ：数据源名称</p>
                        </li>
                        <li>
                           <p><code class="codeph">jdbc_srid</code> ：空间参考标识符</p>
                        </li>
                        <li>
                           <p><code class="codeph">annotation_table</code> ：注释文本表</p>
                        </li>
                        <li>
                           <p><code class="codeph">annotation_column</code> ：注释文本列</p>
                        </li>
                        <li>
                           <p><code class="codeph">leaderline_style</code> ：要使用的领导者线型</p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHDJHEC">示例2-37</a>与<a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFGGGA">示例2-36</a>类似，但它添加了以下行为：如果<code class="codeph">annotation_column</code>列包含空值，则<code class="codeph">textexpr_column</code>的值将用于注释。在<a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHDJHEC">例2-37中</a> ，假设ANNOTATION_TABLE表包含名为DEFAULT_ANNOTATION的列（在<a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFIAHJ">例2-38中使用</a> ）。此附加列在<code class="codeph">textexpr_column</code>属性和SELECT语句中指定。
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFIAHJ">例2-38</a>创建了一个注释文本表，并准备将其与地图可视化工具一起使用。
                     </p>
                     <div class="example" id="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHEHCBJ">
                        <p class="titleinexample">示例2-35预定义注释文本主题的样式规则</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“annotation”&gt; &lt;rule&gt; &lt;features style =“L.PH”&gt;（id = 1或id = 2）&lt;/ features&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFGGGA">
                        <p class="titleinexample">示例2-36动态注释文本主题定义</p><pre class="oac_no_warn" dir="ltr">&lt;themes&gt; &lt;theme name =“theme1”&gt; &lt;jdbc_annotation_query datasource =“tilsmenv”jdbc_srid =“0”annotation_table =“ANNOTEXT_TABLE”annotation_column =“textobj”leaderline_style =“L.PH”&gt;从annotext_table中选择textobj &lt;/ jdbc_annotation_query&gt; &lt; / theme&gt; &lt;/ themes&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHDJHEC">
                        <p class="titleinexample">示例2-37具有默认注释列的动态注释文本主题</p><pre class="oac_no_warn" dir="ltr">&lt;themes&gt; &lt;theme name =“theme1”&gt; &lt;jdbc_annotation_query datasource =“tilsmenv”jdbc_srid =“0”annotation_table =“ANNOTEXT_TABLE”annotation_column =“textobj” <span class="bold">textexpr_column =“default_annotation”</span> leaderline_style =“L.PH”&gt; select textobj <span class="bold">，default_annotation</span>来自annotext_table &lt;/ jdbc_annotation_query&gt; &lt;/ theme&gt; &lt;/ themes&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFIAHJ">
                        <p class="titleinexample">示例2-38生成注释文本数据的脚本</p><pre class="oac_no_warn" dir="ltr">SET ECHO ON SET FEEDBACK 1 SET NUMWIDTH 10 SET LINESIZE 100 SET PAGESIZE 10000 SET SERVEROUTPUT ON SIZE 5000 SET LONG 20000 SET TIMING ON call dbms_java.set_output（5000）; -------------------------------------------------- -------------------  - 创建注释文本表（具有ST_ANNOTATION_TEXT对象类型的 - 列的表），并插入一些记录。-------------------------------------------------- ------------------- create table annotext_table（id number，default_annotation varchar2（32），textobj ST_ANNOTATION_TEXT）;插入annotext_table值（1，'Text_1'，ST_ANNOTATION_TEXT（ST_ANNOTATIONTEXTELEMENT_ARRAY（ST_ANNOTATIONTEXTELEMENT（'样本标签1'，SDO_GEOMETRY（2001，null，sdo_point_type（1,1，null），null，null），SDO_GEOMETRY（2002，null ，null，SDO_ELEM_INFO_ARRAY（1,2,1），SDO_ORDINATE_ARRAY（0,0,1,1）），NULL）））））;插入annotext_table值（2，'Text_2'，ST_ANNOTATION_TEXT（ST_ANNOTATIONTEXTELEMENT_ARRAY（ST_ANNOTATIONTEXTELEMENT（'样本标签2'，SDO_GEOMETRY（2001，null，sdo_point_type（10,10，null），null，null），SDO_GEOMETRY（2002，null ，null，SDO_ELEM_INFO_ARRAY（1,2,1），SDO_ORDINATE_ARRAY（5,10,10,10）），NULL）））））;插入annotext_table值（3，'Text_3'，ST_ANNOTATION_TEXT（ST_ANNOTATIONTEXTELEMENT_ARRAY（ST_ANNOT_TEXTELEMENT_ARRAY（ST_ANNOTATIONTEXTELEMENT（null，SDO_GEOMETRY（2002，null，null，SDO_ELEM_INFO_ARRAY（1,2,1），SDO_ORDINATE_ARRAY（2,5,4,5,6， 5）），SDO_GEOMETRY（2002，null，null，SDO_ELEM_INFO_ARRAY（1,2,1），SDO_ORDINATE_ARRAY（4,3,4,5）），'&lt;？xml version =“1.0”encoding =“UTF-8”？&gt; &lt;textAttributes xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：noNamespaceSchemaLocation =“../../ annotation_text.xsd“&gt; &lt;textStyle fontFamily =”Dialog“fontSize =”14“fill =”blue“/&gt; &lt;textlayout /&gt; &lt;/ textAttributes&gt;'）））））; ------- -------------------------------------------------- ------------  - 在用户元数据视图中注册注释文本表。-------------------------------------------------- -------------------插入USER_ANNOTATION_TEXT_METADATA值（'ANNOTEXT_TABLE'，'TEXTOBJ'，null，null，null）; -------------------------------------------------- -------------------  - 更新元数据信息。-------------------------------------------------- -------------------更新user_annotation_text_metadata set text_expression ='default_annotation'，text_attributes ='&lt;？xml version =“1.0”encoding =“UTF-8”？&gt; &lt;textAttributes xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：noNamespaceSchemaLocation =“../../ annotation_text.xsd“&gt; &lt;textStyle fontFamily =”Serif“fontSize =”14“fill =”＃ff0000“/&gt; &lt;textlayout /&gt; &lt;/ textAttributes&gt;'; ----------- -------------------------------------------------- ---------在用户 - 几何图元数据视图上注册注释文本几何包络。-------------------------------------------------- ------------------- INSERT INTO USER_SDO_GEOM_METADATA VALUES（'ANNOTEXT_TABLE'，'TEXTOBJ.PRIVATEENVELOPE'，SDO_DIM_ARRAY（SDO_DIM_ELEMENT（'X'，0.0,10.0,0.0005），SDO_DIM_ELEMENT （'Y'，0.0,10.0,0.0005）），null  -  SRID）; -------------------------------------------------- -------------------  - 在注释文本信封上创建空间索引。-------------------------------------------------- -------------------在annotext_table上创建索引anno_text_idx（textobj.privateenvelope）indextype是mdsys.spatial_index; -------------------------------------------------- -------------------  - 将预定义主题插入到地图可视化工具的主题视图中。-------------------------------------------------- ------------------- INSERT INTO user_sdo_themes VALUES（'ANNOTEXT_THEME'，'Annotation text'，'ANNOTEXT_TABLE'，'TEXTOBJ'，'&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“annotation”&gt; &lt;rule&gt; &lt;features style =“L.PH”&gt; &lt;/ features&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;'）;承诺;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9992"></a><a id="JIMPV9993"></a><a id="JIMPV9991"></a><div class="props_rev_3"><a id="GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024" name="GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024"></a><h4 id="JIMPV-GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024" class="sect4"><span class="enumeration_section">2.3.11</span> LRS（线性参考系统）主题</h4>
                  <div>
                     <p>LRS主题是一种特殊的地图可视化主题，可用于可视化使用Oracle Spatial and Graph的线性参考系统（LRS）定义的特征，这在<a href="../spatl/lrs-linear-referencing-system-concepts.html#SPATL060" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide中</span></a>有所说明。
                     </p>
                     <p>LRS主题需要两个表：一个（ <span class="bold">LRS表</span> ）具有LRS几何列，另一个（ <span class="bold">连接表</span> ）具有一个或两个<span class="bold">度量列</span> 。点事件必须在连接表中有一个度量列（例如，位于度量为<span class="italic">m1</span>的道路标志，以及以度量为<span class="italic">m2</span>的事故）;线性事件必须有两个测量列，一个用于起始测量，一个用于结束测量（例如，从测量<span class="italic">m1</span>到测量<span class="italic">m2</span> ，路面条件差，从测量<span class="italic">n1</span>到测量<span class="italic">n2</span> ，条件是公平的）。每个事件都存储在连接表的一行中。
                     </p>
                     <p>定义LRS主题后，您只需在使用主题时在地图请求中指定主题名称。地图可视化工具自动查找主题的定义并构造连接这两个指定表的查询;然后，它通过内部使用LRS函数生成几何数据，用于点事件的SDO_LRS.LOCATE_PT或用于线性事件的SDO_LRS.CLIP_GEOM_SEGMENT。然后，地图可视化工具根据主题的样式规则渲染生成的点或线性段及其属性数据。</p>
                     <p>要创建预定义的LRS主题，必须通过在USER_SDO_THEMES视图中插入行来将LRS主题的定义存储在数据库中。<a href="map-visualization-concepts.html#GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHDJBDF">例2-39</a>存储名为<code class="codeph">LRS_THEME</code>的LRS主题的定义。</p>
                     <p>在<a href="map-visualization-concepts.html#GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHDJBDF">例2-39中</a> ，LRS表名（INTERSTATES_LRS，有三列，GEOM，HIGHWAY和ROUTEN）插入USER_SDO_THEMES视图的BASE_TABLE列，LRS几何列（GEOM）插入GEOMETRY_COLUMN列，带有一个<code class="codeph">&lt;styling_rules&gt;</code>元素的XML文档将插入到STYLING_RULES列中。
                     </p>
                     <p>在<code class="codeph">&lt;styling_rules&gt;</code>用于LRS主题元素， <code class="codeph">theme_type</code>必须<code class="codeph">lrs</code>为了这个主题将被认为是一个LRS的主题。
                     </p>
                     <p>如果省略了可选的<code class="codeph">key_column</code>属性，则在构造查询字符串以从数据库中获取数据时不会包含任何键列。这与预定义的几何主题不同，其中ROWID列是默认键列。
                     </p>
                     <p>子元素<code class="codeph">&lt;rule&gt;</code> ， <code class="codeph">&lt;hidden_info&gt;</code> ， <code class="codeph">&lt;join_table&gt;</code>和<code class="codeph">&lt;join_columns&gt;</code>可以包含在<code class="codeph">&lt;styling_rules&gt;</code>元素中。<code class="codeph">&lt;join_table&gt;</code>和<code class="codeph">&lt;join_columns&gt;</code>子元素特定于LRS主题。
                     </p>
                     <p>LRS主题的<code class="codeph">&lt;rule&gt;</code>元素类似于预定义主题中的定义，但其子元素<code class="codeph">&lt;features&gt;</code>必须包含<code class="codeph">asis</code>属性，其值设置为<code class="codeph">true</code> （ <code class="codeph">asis="true"</code> ）。<code class="codeph">&lt;styling_rules&gt;</code>元素中可以有0个，1个或多个<code class="codeph">&lt;rule&gt;</code>元素。
                     </p>
                     <p><code class="codeph">&lt;hidden_info&gt;</code>元素对于LRS主题是可选的。它定义为在Oracle Maps应用程序中使用。它从LRS表或连接表或两者中指定属性列表。
                     </p>
                     <p>在<code class="codeph">&lt;join_table&gt;</code>元素中， <code class="codeph">name</code>属性（本例中为<code class="codeph">pavement_condition</code> ）指定连接表名称。在此示例中，连接表包含诸如id，seg_id，condition，from_measure和to_measure之类的列。如果两个测量列用于在连接表来定义线性事件，那么属性<code class="codeph">start_measure</code>和<code class="codeph">end_measure</code> （ <code class="codeph">from_measure</code>和<code class="codeph">to_measure</code>在这个例子中）必须被指定，其指示在连接表的测量结果列名。如果连接表包含一个点事件度量，则在此<code class="codeph">&lt;join_table&gt;</code>元素中指定一个<code class="codeph">measure</code>属性。
                     </p>
                     <p>在<code class="codeph">&lt;join_columns&gt;</code>元素中，必须指定<code class="codeph">lrs_table_column</code>和<code class="codeph">join_table_column</code>属性，其中<code class="codeph">lrs_table_column</code>定义LRS表中的列， <code class="codeph">join_table_column</code>指定连接表中的列以连接这两个表。
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHEDGIB">示例2-40</a>显示了使用<a href="map-visualization-concepts.html#GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHDJBDF">示例2-39中</a>的预定义LRS主题的映射请求。
                     </p>
                     <div class="infoboxnotealso" id="GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__GUID-4849341A-2012-4277-BD83-F9C88A34EAA8">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="xml-formats-map-visualizer.html#GUID-40C2D442-B6C8-4C29-97C8-9A5335DB09E5" title="本附录描述了使用地图可视化组件元数据视图定义样式，主题和基本地图的XML格式。">样式，主题，基本地图和地图图层的XML格式，用于</a>有关特定于LRS主题的元素和属性的参考信息（例如<code class="codeph">&lt;join_table&gt;</code>和<code class="codeph">&lt;join_columns&gt;</code>元素）。
                        </p>
                     </div>
                     <div class="example" id="GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHDJBDF">
                        <p class="titleinexample">示例2-39创建LRS主题</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes（name，description，base_table，geometry_column，styling_rules）VALUES（'LRS_THEME'，'LRS主题示例包含3个规则，2个度量列'，'INTERSTATES_LRS'，'GEOM'，'&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules key_column =“id”theme_type =“lrs”&gt; &lt;rule&gt; &lt;features asis =“true”&gt; condition =''good''&lt;/ features&gt; &lt;label column =“condition”style =“T.STREET NAME “/&gt; &lt;rendering&gt; &lt;style name =”L.PTH“/&gt; &lt;/ rendering&gt; &lt;/ rule&gt; &lt;rule&gt; &lt;features asis =”true“&gt; condition =''fair''&lt;/ features&gt; &lt;label column =“condition”style =“T.STREET NAME”/&gt; &lt;rendering&gt; &lt;style name =“L.SH”/&gt; &lt;/ rendering&gt; &lt;/ rule&gt; &lt;rule&gt; &lt;features asis =“true”&gt; condition =' 'poor''&lt;/ features&gt; &lt;label column =“condition”style =“T.STREET NAME”/&gt; &lt;rendering&gt; &lt;style name =“L.MAJOR STREET”/&gt; &lt;/ rendering&gt; &lt;/ rule&gt; &lt;hidden_info &gt; &lt;field column =“highway”name =“highway name”/&gt; &lt;field column =“routen”name =“highway number”/&gt; &lt;field column =“condition”name =“pavement condition”/&gt; &lt;/ hidden_info&gt; &lt;join_table name =“pavement_condition”start_measure =“from_measure”end_measure =“to_measure”/&gt; &lt;join_columns lrs_table_column =“highway”join_table_column =“seg_id”/&gt; &lt;/ styling_rules&gt;'）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHEDGIB">
                        <p class="titleinexample">示例2-40具有预定义LRS主题的映射请求</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;map_request title =“LRS主题测试”datasource =“mvdemo”width =“640”height =“480”bgcolor =“＃a6caf0”antialiase =“true”format =“PNG_STREAM”&gt; &lt;center size =“45”&gt; &lt;geoFeature&gt; &lt;geometryProperty typeName =“center”&gt; &lt;Point&gt; &lt;coordinates&gt; -95,35 &lt;/ coordinates&gt; &lt;/ Point&gt; &lt;/ geometricProperty&gt; &lt;/ geoFeature&gt; &lt;/ center&gt; &lt;themes&gt; &lt; <span class="bold">theme name =“LRS_THEME “</span> /&gt; &lt;/ themes&gt; &lt;/ map_request&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9564"></a><a id="JIMPV9572"></a><a id="JIMPV9565"></a><a id="JIMPV9566"></a><a id="JIMPV9567"></a><a id="JIMPV9568"></a><a id="JIMPV9569"></a><a id="JIMPV9570"></a><a id="JIMPV9571"></a><a id="JIMPV9563"></a><div class="props_rev_3"><a id="GUID-387C98FD-359C-4646-9802-6E69B79A0754" name="GUID-387C98FD-359C-4646-9802-6E69B79A0754"></a><h4 id="JIMPV-GUID-387C98FD-359C-4646-9802-6E69B79A0754" class="sect4"><span class="enumeration_section">2.3.12</span>专题制图</h4>
                  <div>
                     <p><span class="bold">专题制图</span>是指基于属性值绘制空间要素。地图可视化工具使用专题地图来创建地图，其中颜色或符号应用于要素以指示其属性。例如，可以使用具有不同色调的颜色绘制<code class="codeph">Counties</code>主题，这些颜色直接映射到每个县的人口密度，或者可以使用实心圆绘制<code class="codeph">Earthquakes</code>主题，其大小映射到每个地震的规模或损坏。
                     </p>
                     <p>要实现专题映射，必须首先创建适合专题图类型的高级样式，然后为要将高级样式指定为渲染样式的要素创建主题。在主题的样式规则中，还必须在表或视图中指定属性列，其值将用于确定如何通过高级样式以主题方式呈现要素。</p>
                     <p>例如，假设您要显示一个地图，其中每个地区使用的颜色反映特定产品的销售水平。为此，请创建一个高级样式，该样式定义一系列单独的基于范围的存储桶（请参阅基于单个范围的存储<a href="xml-formats-map-visualizer.html#GUID-3DEE62C7-780A-429D-B21F-CC79D43B0ACB">桶</a> ），其中每个存储桶包含产品的预定义销售值范围，并且每个存储桶都具有关联的呈现样式。（每个区域将使用与该区域的销售价值下降范围相关联的样式进行渲染。）同时指定一列或多列的名称，以提供要根据范围检查的属性值。换句话说，高级样式定义了如何根据销售值映射区域，主题的样式规则将高级样式和包含实际销售值的属性列绑定在一起。
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__BABDIBEA">图2-13</a>显示了高级样式和主题之间的关系，以及样式和主题与基表的关系。在此图中，名为<code class="codeph">V.SALES</code>的高级样式定义了一系列存储桶。名为<code class="codeph">SALES_BY_REGION</code>的预定义主题在其样式规则中指定了<code class="codeph">V.SALES</code>样式。该主题还将REGIONS表中的SALES列标识为要将其值与样式中的存储区范围进行比较的列。（除了渲染样式之外或代替渲染样式，每个桶都可以与标签样式相关联，如<a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB">为桶指定标签样式中所述</a> 。）
                     </p>
                     <div class="figure" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__BABDIBEA">
                        <p class="titleinfigure">图2-13专题图：高级风格和主题关系</p><img src="img/thematic_mapping.gif" alt="下面是图2-13的描述" title="下面是图2-13的描述" longdesc="img_text/thematic_mapping.html"><br><a href="img_text/thematic_mapping.html">“图2-13专题图：高级风格和主题关系”的描述</a></div>
                     <!-- class="figure" -->
                     <p>除了<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__BABDIBEA">图2-13中</a>显示的各个基于范围的存储桶之外，地图可视化工具还支持其他存储桶样式，如“ <a href="xml-formats-map-visualizer.html#GUID-85FE8BC7-DA9E-4264-8045-D8B3C54050AF">存储桶样式”中所述</a> 。您还可以使用多个属性列进行专题制图，例如绘制饼图时。
                     </p>
                     <p>本节的其余部分介绍了专题制图的其他示例。</p>
                     <p><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007769">例2-41</a>是<code class="codeph">Earthquakes</code>主题的XML定义。
                     </p>
                     <div class="infoboxnote" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__GUID-9976376C-01B9-4A97-8CC5-3C18E8F606B5">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">label</code> <a id="d7682e6514" class="indexterm-anchor"></a>属性值（例如， <code class="codeph">label="less than 4"</code> ）未显示在地图上，但仅在为高级样式编译的标签中使用。
                        </p>
                        <p><code class="codeph">seq</code> <a id="d7682e6525" class="indexterm-anchor"></a>地图可视化器忽略属性值（例如， <code class="codeph">seq="0"</code> ），它仅根据元素在定义中出现的顺序来确定序列。
                        </p>
                     </div>
                     <p><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007840">例2-42</a>使用了<code class="codeph">&lt;VariableMarkerStyle&gt;</code>标记。以下示例使用<code class="codeph">&lt;ColorSchemeStyle&gt;</code>标记创建加利福尼亚州人口普查区块的专题地图。<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008144">例2-43</a>说明了使用渐变色标进行人口密度的专题制图。<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008145">例2-44</a>是使用渐变色标的家庭平均收入的专题图。<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008146">例2-45</a>也是家庭平均收入的主题图，但它对每个收入范围使用特定的颜色样式而不是分级。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">m.esso gasstation</code> ， <code class="codeph">m.texaco gasstation</code> ，以及其他样式名称在其名称中的单词之间有一个空格。
                           </p>
                        </li>
                        <li>
                           <p>名称不区分大小写。因此，请务必不要将案例用作区分名称的方法。例如， <code class="codeph">m.esso gasstation</code>和<code class="codeph">M.ESSO GASSTATION</code>被认为是同一个名称。
                           </p>
                        </li>
                        <li>
                           <p>可以使用<code class="codeph">#DEFAULT#</code>作为其值来指定默认收集桶。此存储桶用于未在其他存储桶中指定的任何列值（加油站名称）。
                           </p>
                        </li>
                     </ul>
                     <p>然后定义主题（ <code class="codeph">theme_gasstation</code> ），指定包含公司名称的表中的列（MERK）。<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008631">示例2-47</a>中显示了主题的样式规则。
                     </p>
                     <div class="tblformal" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__BABFBACD">
                        <p class="titleintable">表2-2与汽油站主题一起使用的表</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="表与汽油站主题一起使用" width="100%" border="1" summary="Table Used with Gasoline Stations Theme" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="16%" id="d7682e6588">柱</th>
                                 <th align="left" valign="bottom" width="84%" id="d7682e6591">数据类型</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6596" headers="d7682e6588 ">
                                    <p>FID</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6596 d7682e6591 ">
                                    <p>NOT NULL NUMBER</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6603" headers="d7682e6588 ">
                                    <p>ID</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6603 d7682e6591 ">
                                    <p>数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6610" headers="d7682e6588 ">
                                    <p>NAAM</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6610 d7682e6591 ">
                                    <p>VARCHAR2（31）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6617" headers="d7682e6588 ">
                                    <p>STRAAT_</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6617 d7682e6591 ">
                                    <p>VARCHAR2（30）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6624" headers="d7682e6588 ">
                                    <p>NR</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6624 d7682e6591 ">
                                    <p>数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6631" headers="d7682e6588 ">
                                    <p>电视</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6631 d7682e6591 ">
                                    <p>VARCHAR2（1）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6638" headers="d7682e6588 ">
                                    <p>A和</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6638 d7682e6591 ">
                                    <p>VARCHAR2（2）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6645" headers="d7682e6588 ">
                                    <p>PCODE</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6645 d7682e6591 ">
                                    <p>VARCHAR2（6）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6652" headers="d7682e6588 ">
                                    <p>国家地点</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6652 d7682e6591 ">
                                    <p>VARCHAR2（10）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6659" headers="d7682e6588 ">
                                    <p>GEOM</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6659 d7682e6591 ">
                                    <p>SDO_GEOMETRY</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6666" headers="d7682e6588 ">
                                    <p>MERK</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6666 d7682e6591 ">
                                    <p>VARCHAR2（40）</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>在此表中，GEOM列包含空间几何，MERK列包含公司名称（ <code class="codeph">Shell</code> ， <code class="codeph">Esso</code>等）。
                     </p>
                     <p><code class="codeph">theme_gasstation</code>主题的样式规则指定由GEOM列的内容指定的位置处的标记（样式<code class="codeph">v.gasstations</code> ）由该行的MERK列的值确定。样式<code class="codeph">v.gasstations</code> （参见<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008592">例2-46</a> ）指定如果列值为<code class="codeph">Shell</code> ，则使用样式<code class="codeph">m.shell gasstation</code> ;如果列值为<code class="codeph">Esso</code> ，则使用样式<code class="codeph">m.esso gasstation</code> ;等等，包括如果列值是<code class="codeph">Avia</code> ， <code class="codeph">Benzinex</code> ， <code class="codeph">Q8</code> ， <code class="codeph">Total</code>和<code class="codeph">Witte Pomp</code>任何一个，请使用样式<code class="codeph">m.generic gasstation;</code>如果列值不是前面的值，请使用样式<code class="codeph">m.default gasstation</code> 。
                     </p>
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007769">
                        <p class="titleinexample">例2-41地震主题样式规则的XML定义</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“nature”&gt; &lt;rule column =“RICHTER_SCALE”&gt; &lt;features style =“v.earthquakes”&gt; &lt;/ features&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre><p><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007769">例2-41中</a>的主题只有一条规则。<code class="codeph">&lt;rule&gt;</code>元素包含一个名为<code class="codeph">column</code>的属性，该属性未出现在<a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__BABEBFDE">示例2-6</a>中的<code class="codeph">Airport</code>主题中。<code class="codeph">column</code>属性指定一个或多个列（逗号分隔），这些列提供专题映射所需的属性值。为<code class="codeph">&lt;features&gt;</code>元素指定的样式名为<code class="codeph">v.earthquakes</code> ，它是一种高级样式。
                        </p>
                        <p><code class="codeph">Earthquakes</code>主题定义的另一部分指定包含要呈现的数据的表。除了用于空间数据的列（类型为SDO_GEOMETRY）之外，此表还必须包含名为RICHTER_SCALE的列。（SDO_GEOMETRY类型的表和列必须分别在USER_SDO_THEMES视图的BASE_TABLE和GEOMETRY_COLUMN列中标识，该视图在<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图中</a>描述。）RICHTER_SCALE列的格式必须为NUMBER。要了解原因，请查看<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007840">示例2-42</a>中的高级样式定义。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007840">
                        <p class="titleinexample">例2-42地震主题的高级样式定义</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;AdvancedStyle&gt; &lt;VariableMarkerStyle basemarker =“m.circle”startsize =“7”increment =“4”&gt; &lt;Buckets&gt; &lt;RangedBucket seq =“0”label =“小于4”high =“4”/&gt; &lt;RangedBucket seq =“1”label =“4  -  5”low =“4”high =“5”/&gt; &lt;RangedBucket seq =“2”label =“5  -  6”low =“5”high =“6”/&gt; &lt;RangedBucket seq =“3”label =“6  -  7”low =“6”high =“7”/&gt; &lt;RangedBucket seq =“4”label =“7 and up”low =“7”/&gt; &lt;/ Buckets &gt; &lt;/ VariableMarkerStyle&gt; &lt;/ AdvancedStyle&gt;</pre><p>此样式指定名为<code class="codeph">m.circle</code>的标记用于指示地震的位置。要为地震渲染的标记的大小取决于该行的RICHTER_SCALE列的数值。在该示例中，存在五个桶，每个桶覆盖预定范围的值。例如，如果里氏震级为5.7级，则标记大小为15像素（7 + 4 + 4），因为值5.7落在第三个桶（5-6）中，起始标记大小为7个像素（ <code class="codeph">startsize="7"</code> ），每个范围增量为4（ <code class="codeph">increment="4"</code> ）。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008144">
                        <p class="titleinexample">实施例2-43使用渐变色方案绘制种群密度</p><pre class="oac_no_warn" dir="ltr">#ca pop density usbg_hhinfo &lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules theme_type =“political”&gt; &lt;rule column =“densitycy”&gt; &lt;features style =“v.CA Pop density”&gt; &lt;/ features&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre><p>名为USBG_HHINFO的表包含一个名为DENSITYCY的列（在<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008144">例2-43中使用</a> ）。对应于此人口密度主题的样式（ <code class="codeph">v.CA Pop density</code> ）的定义如下：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;AdvancedStyle&gt; &lt;ColorSchemeStyle basecolor =“＃ffff00”strokecolor =“＃00aaaa”&gt; &lt;Buckets low =“0.0”high =“20000.0”nbuckets =“10”/&gt; &lt;/ ColorSchemeStyle&gt; &lt;/ AdvancedStyle&gt;</pre><p>基色（ <code class="codeph">basecolor</code> ）和冲程的颜色（ <code class="codeph">strokecolor</code> ）是使用十六进制表示法指定的24位RGB（红-绿-蓝）值。基色值用于第一个存储桶。通过首先将基色从RGB转换为HSB（色调饱和度 - 亮度）模型然后将亮度降低每个桶的固定增量来获得每个后续桶的颜色值。因此，第一个桶是最亮的，最后一个是最暗的。</p>
                        <p>如<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008144">例2-43所示</a> ， <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008145">例2-44</a>说明了使用基色和渐变色方案，这次是为了显示家庭收入。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008145">
                        <p class="titleinexample">例2-44使用渐变色配色方案绘制家庭平均收入</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;！ -  #ca hh income theme table = usbg_hhinfo  - &gt; &lt;styling_rules&gt; &lt;rule column =“avghhicy”&gt; &lt;features style =“v.ca income”&gt; &lt;/ features&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre><p>名为USBG_HHINFO的表包含一个名为AVGHHICY的列（在<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008145">例2-44</a>和<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008146">例2-45中使用</a> ）。与该平均家庭收入主题相对应的风格（ <code class="codeph">v.ca income</code> ）的定义如下：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;AdvancedStyle&gt; &lt;ColorSchemeStyle basecolor =“＃ffff00”strokecolor =“＃00aaaa”&gt; &lt;！ - 带颜色渐变的收入范围 - &gt; &lt;Buckets&gt; &lt;RangedBucket seq =“0”label =“小于10k” high =“10000”/&gt; &lt;RangedBucket seq =“1”label =“10-15k”low =“10000”high =“15000”/&gt; &lt;RangedBucket seq =“2”label =“15-20k”low =“ 15000“high =”20000“/&gt; &lt;RangedBucket seq =”3“label =”20-25k“low =”20000“high =”25000“/&gt; &lt;RangedBucket seq =”4“label =”25-35k“low =“25000”high =“35000”/&gt; &lt;RangedBucket seq =“5”label =“35-50k”low =“35000”high =“50000”/&gt; &lt;RangedBucket seq =“6”label =“50-75k “low =”50000“high =”75000“/&gt; &lt;RangedBucket seq =”7“label =”75-100k“low =”75000“high =”100000“/&gt; &lt;RangedBucket seq =”8“label =”100 -125k“low =”100000“high =”125000“/&gt; &lt;RangedBucket seq =”9“label =”125-150k“low =”125000“high =”150000“/&gt; &lt;RangedBucket seq =”10“label = “150-250k”low =“150000”high =“250000”/&gt; &lt;RangedBucket seq =“11”label =“250-500k”low =“250000”high =“500000”/&gt; &lt;RangedBucket seq =“12” label =“500k及以上”low =“500000”/&gt; &lt;/ Buckets&gt; &lt;/ ColorScheme Style&gt; &lt;/ AdvancedStyle&gt;</pre><p>对于单个基于范围的桶，下限值是包含的，而上限值是独占的（除了具有大于其他范围中的任何值的值的范围;其上限值是包含的）。不允许范围具有与其他范围中的值重叠的值范围。</p>
                        <p><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008146">例2-45</a>对每个平均家庭收入范围使用特定颜色样式。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008146">
                        <p class="titleinexample">例2-45使用每种收入范围的颜色映射家庭平均收入</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;！ -  #ca hh income theme table = usbg_hhinfo  - &gt; &lt;styling_rules&gt; &lt;rule column =“avghhicy”&gt; &lt;features style =“v.ca income 2”&gt; &lt;/ features&gt; &lt;/ rule&gt; &lt;/ styling_rules &gt;</pre><p><code class="codeph">v.ca income 2</code>风格的定义如下：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;AdvancedStyle&gt; &lt;BucketStyle&gt; &lt;Buckets&gt; &lt;！ - 具有特定颜色的收入范围 - &gt; &lt;RangedBucket seq =“0”label =“小于10k”high =“10000”style =“c.rb13_1”/ &gt; &lt;RangedBucket seq =“1”label =“10-15k”low =“10000”high =“15000”style =“c.rb13_2”/&gt; &lt;RangedBucket seq =“2”label =“15-20k”low = “15000”high =“20000”style =“c.rb13_3”/&gt; &lt;RangedBucket seq =“3”label =“20-25k”low =“20000”high =“25000”style =“c.rb13_4”/&gt; &lt;RangedBucket seq =“4”label =“25-35k”low =“25000”high =“35000”style =“c.rb13_5”/&gt; &lt;RangedBucket seq =“5”label =“35-50k”low =“ 35000“high =”50000“style =”c.rb13_6“/&gt; &lt;RangedBucket seq =”6“label =”50-75k“low =”50000“high =”75000“style =”c.rb13_7“/&gt; &lt; RangedBucket seq =“7”label =“75-100k”low =“75000”high =“100000”style =“c.rb13_8”/&gt; &lt;RangedBucket seq =“8”label =“100-125k”low =“100000 “high =”125000“style =”c.rb13_9“/&gt; &lt;RangedBucket seq =”9“label =”125-150k“low =”125000“high =”150000“style =”c.rb13_10“/&gt; &lt;RangedBucket seq =“10”label =“150-250k”low =“150000”high =“250000”style =“c.rb13_11”/&gt; &lt;RangedBu cket seq =“11”label =“250-350k”low =“250000”high =“350000”style =“c.rb13_12”/&gt; &lt;RangedBucket seq =“12”label =“350k及以上”low =“350000 “style =”c.rb13_13“/&gt; &lt;/ Buckets&gt; &lt;/ BucketStyle&gt; &lt;/ AdvancedStyle&gt;</pre><p>每个<code class="codeph">&lt;RangedBucket&gt;</code>定义都具有指定的样式。
                        </p>
                        <p>以下示例创建了一种先进的样式来识别由不同石油公司运营的加油站，以及使用该样式的主题。<code class="codeph">&lt;CollectionBucket&gt;</code>标签用于将列值（ <code class="codeph">Shell</code> ; <code class="codeph">Esso</code> ; <code class="codeph">Texaco</code> ; <code class="codeph">BP</code> ;任何<code class="codeph">Avia</code> ， <code class="codeph">Benzinex</code> ， <code class="codeph">Q8</code> ， <code class="codeph">Total</code> ， <code class="codeph">Witte Pomp</code> ;以及所有其他类型的默认类别）与适合该公司工作站的样式相关联，如<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008592">例2-46</a>所示。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008592">
                        <p class="titleinexample">例2-46汽油站主题的高级样式定义</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;AdvancedStyle&gt; &lt;BucketStyle&gt; &lt;Buckets&gt; &lt;CollectionBucket seq =“0”label =“Shell”style =“m.shell gasstation”&gt; Shell &lt;/ CollectionBucket&gt; &lt;CollectionBucket seq =“1”label =“Esso”style = “m.esso gasstation”&gt; Esso &lt;/ CollectionBucket&gt; &lt;CollectionBucket seq =“2”label =“Texaco”style =“m.texaco gasstation”&gt; Texaco &lt;/ CollectionBucket&gt; &lt;CollectionBucket seq =“3”label =“BP” style =“m.bp gasstation”&gt; BP &lt;/ CollectionBucket&gt; &lt;CollectionBucket seq =“4”label =“Other”style =“m.generic gasstation”&gt; Avia，Benzinex，Q8，Total，Witte Pomp &lt;/ CollectionBucket&gt; &lt; CollectionBucket seq =“5”label =“DEFAULT”style =“m.default gasstation”&gt;＃DEFAULT＃&lt;/ CollectionBucket&gt; &lt;/ Buckets&gt; &lt;/ BucketStyle&gt; &lt;/ AdvancedStyle&gt;</pre><p><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008592">例2-46的</a>注释：</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008631">
                        <p class="titleinexample">例2-47加油站主题定义的样式规则</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules&gt; &lt;rule column =“merk”&gt; &lt;features style =“v.gasstations”&gt; &lt;/ features&gt; &lt;label column =“merk”style =“t。SansSerif red 10“&gt; 1 &lt;/ label&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;</pre><p>此主题取决于名为NED_GASSTATIONS的表，该表具有<a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__BABFBACD" title="表与汽油站主题一起使用">表2-2中</a>所示的列（列名反映了开发人员的语言为荷兰语的事实）。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C">使用外部属性数据进行专题制图</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9574"></a><a id="JIMPV9573"></a><div class="props_rev_3"><a id="GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C" name="GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C"></a><h5 id="JIMPV-GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C" class="sect5"><span class="enumeration_section">2.3.12.1</span>使用外部属性数据进行专题制图</h5>
                     <div>
                        <p>之前关于专题制图的讨论假设属性数据（例如销售总数）和地理空间数据（表示边界，位置等的几何对象）都在同一个数据库中。但是，属性数据可以来自当前数据库之外的源;例如，属性数据可能反映在不同数据库上执行的商业智能（BI）查询的聚合结果，或者属性数据可能来自从电子表格导出的逗号分隔的销售值列表。来自包含地理空间数据的数据库外部的这种属性数据称为<span class="bold">外部属性数据</span> 。
                        </p>
                        <p>要将外部属性数据与地图可视化工具一起使用，必须使用<span class="bold">非空间数据提供程序</span>插件机制，其中自定义数据提供程序与同一地图请求中的地图可视化工具主题（预定义或动态）相关联。当地图可视化工具处理主题时，它会调用非空间数据提供者将非空间属性数据与为主题获取的空间数据相关联。
                        </p>
                        <p>要使用非空间数据提供程序，请按照下列步骤操作：</p>
                        <ol>
                           <li>
                              <p>通过实现map visualizer定义的接口<code class="codeph">oracle.mapviewer.share.ext.来实现Java非空间数据提供程序<code class="codeph">oracle.mapviewer.share.ext.NSDataProvider</code> 。
                              </p>
                           </li>
                           <li>
                              <p>使用地图可视化工具（在其配置文件中）注册非空间数据提供程序实现。在那里，您还可以指定实现可能依赖的一组全局参数。每个自定义数据提供程序实现类都必须具有您指定的唯一ID。</p>
                           </li>
                           <li>
                              <p>将包含非空间数据提供程序实现类的库放在地图可视化工具的库路径中，例如其<code class="codeph">web/WEB-INF/lib</code>目录。
                              </p>
                           </li>
                           <li>
                              <p>通过在地图可视化工具Java客户端API类MapViewer上调用以下方法，将非空间数据提供程序实现包含在地图请求中：</p><pre class="oac_no_warn" dir="ltr">addNSDataProvider（java.lang中。字符串providerId，java.lang。字符串forTheme，java.lang。字符串spatialKeyColumn，java.lang。字符串customRenderingStyle，java.util。属性参数，长时间超时）</pre><p>有关<code class="codeph">addNSDataProvider</code>参数的信息，请参阅地图可视化工具的Javadoc参考信息，可在URL中以<code class="codeph">http://</code> <span class="italic"><code class="codeph">host:port</code></span> <code class="codeph">/mapviewer/mapclient</code>的形式<code class="codeph">/mapviewer/mapclient</code> ，其中<span class="italic">主机</span>和<span class="italic">端口</span>指示Oracle Fusion Middleware侦听传入请求的位置。例如： <code class="codeph">http://www.mycorp.com:8888/mapviewer/mapclient</code> ： <code class="codeph">http://www.mycorp.com:8888/mapviewer/mapclient</code> ： <code class="codeph">http://www.mycorp.com:8888/mapviewer/mapclient</code></p>
                           </li>
                        </ol>
                        <p><a href="map-visualization-concepts.html#GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C__BABBFDEI">例2-48</a>显示了一个简单的非空间数据提供程序实现。此实现还随地图可视化工具一起提供，作为默认的非空间数据提供者。
                        </p>
                        <div class="example" id="GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C__BABBFDEI">
                           <p class="titleinexample">示例2-48非空间（外部）数据提供程序实现</p><pre class="oac_no_warn" dir="ltr">import java.io.BufferedReader中; import java.io.的FileReader; import java.util。性能; import java.util。向量; import oracle.mapviewer.share.ext。NSDataSet; import oracle.mapviewer.share.ext。NSDataProvider; import oracle.mapviewer.share.ext。NSRow; import oracle.lbs.util。记录仪; import oracle.mapviewer.share。领域; / ** * NSDataProvider接口的简单实现。调用时，它将表格属性数据提供给文件或URL的地图可视化器*。文件中的数据必须按照以下方式进行组织：&lt;br&gt; * &lt;UL&gt; * &lt;LI&gt;第一行包含单个字符，即后续行中列之间的分隔符*。* &lt;LI&gt;文件中第一行之后的每一行代表一个数据行* &lt;LI&gt;行中的每个字段必须用分隔符char分隔* &lt;LI&gt;每行中的第一个字段必须是字符串（键）作为*键;其余字段必须是数值* &lt;/ UL&gt; * *在映射请求中合并此数据提供程序时，必须指定以下*两个参数之一：* &lt;UL&gt; * &lt;LI&gt;文件（如果自定义数据）存储在本地文件中;如果可以从Web访问自定义数据，则此参数*指定该文件的完整路径* &lt;LI&gt; url;此参数* specife是数据文件的完整URL。* &lt;/ UL&gt; * * * / public class NSDataProviderDefault实现NSDataProvider {private static Logger log = Logger.getLogger（“oracle.sdovis.nsdpDefault”）; public boolean init（Properties params）{return true; public NSDataSet buildDataSet（Properties params）{String file = params.getProperty（“file”）;如果（文件！= null）返回readFromFile（file）; String url = params.getProperty（“url”）;如果（网址！= null）返回readFromUrl（url）; log.error（“必须提供默认NS数据提供程序的文件或URL。”）; return null; public void destroy（）{} protected NSDataSet readFromFile（String file）{BufferedReader in = null; try {in = new BufferedReader（new FileReader（file））; String line = in.readLine（）; String delimiter = line.substring（0,1）; Vector rows = new Vector（）; while（（line = in.readLine（））！= null）{NSRow row = buildRow（line，delimiter）;如果（行！= null）rows.add（row）; NSDataSet res = new NSDataSet（rows）;返回资源; } catch（Exception ex）{log.error（ex）; return null;终于{try {if（in！）= null）in.close（）; } catch（Exception e）{}}} protected NSDataSet readFromUrl（String url）{log.error（“url not supported yet。”）; return null; } protected NSRow buildRow（String line，String delimiter）{if（line == null || line.length（）&lt;1）return null; String [] fields = line.split（delimiter）; if（fields == null || fields.length == 0）返回null; Field [] row = new Field [fields.length];字段a =新字段（字段[0]）; a.setKey（真）; row [0] = a; for（int i = 1; i &lt;fields.length; i ++）{try {double d = Double.parseDouble（fields [i]）; a =新字段（d）; row [i] = a; } catch（异常e）{log.warn（“无效的行字段（key =”+ fields [0] +“）”）; return null;返回新的NSRow（行）; }}</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754">专题制图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9575"></a><div class="props_rev_3"><a id="GUID-F07E0F57-702A-4C14-923D-52BAEE467762" name="GUID-F07E0F57-702A-4C14-923D-52BAEE467762"></a><h4 id="JIMPV-GUID-F07E0F57-702A-4C14-923D-52BAEE467762" class="sect4"><span class="enumeration_section">2.3.13</span>影响主题外观的属性</h4>
                  <div>
                     <p><code class="codeph">&lt;theme&gt;</code>元素的某些属性仅影响地图显示的外观，而不是确定与主题相关联的数据。这些与外观相关的属性控制在生成地图时是否以及如何处理和呈现主题。示例包括以下属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">min_scale</code>和<code class="codeph">max_scale</code>确定是否以各种地图比例（分辨率级别）显示主题。例如，如果要显示街道地图，则某些地图比例尺会使街道变得过于密集而无法显示可用的显示，例如查看整个州或省时。在这种情况下，您应该为街道创建主题，并指定最小和最大比例值，以确保在比例适当时显示受主题影响的各个街道，否则不显示。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">labels_always_on</code>确定如果主题的标签与另一个标签重叠，是否会显示主题的标签。通过选择适当的<code class="codeph">labels_always_on</code>值并选择要在地图请求中处理的主题的适当顺序，您可以控制标签可能变得杂乱以及哪些标签优先显示。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">fast_unpickle</code>确定要使用的unpickling（unstreaming）方法，这可能涉及显示中性能和精度之间的权衡。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">fixed_svglabel</code> ， <code class="codeph">visible_in_svg</code> ， <code class="codeph">selectable_in_svg</code> ， <code class="codeph">onclick</code> ， <code class="codeph">onmousemove</code> ， <code class="codeph">onmouseover</code>和<code class="codeph">onmouseout</code>会影响SVG贴图的外观。
                           </p>
                        </li>
                     </ul>
                     <p>要指定任何与外观相关的属性，请使用XML API的<code class="codeph">&lt;theme&gt;</code>元素（在[31.2.20]中描述）。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="主题可能是地图可视化工具中最重要的概念。主题是特定数据层的可视化表示。">主题</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9614"></a><a id="JIMPV9613"></a><div class="props_rev_3"><a id="GUID-B39C38B9-8852-4085-A4B0-7454557A5C95" name="GUID-B39C38B9-8852-4085-A4B0-7454557A5C95"></a><h3 id="JIMPV-GUID-B39C38B9-8852-4085-A4B0-7454557A5C95" class="sect3"><span class="enumeration_section">2.4</span>地图</h3>
               <div>
                  <p>地图可以包含元素和属性的组合。</p>
                  <p>这些要素和属性可包括以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>背景图片</p>
                     </li>
                     <li>
                        <p>标题</p>
                     </li>
                     <li>
                        <p>传说</p>
                     </li>
                     <li>
                        <p>查询窗口</p>
                     </li>
                     <li>
                        <p>脚注（例如版权声明）</p>
                     </li>
                     <li>
                        <p>基地图</p>
                     </li>
                     <li>
                        <p>预定义的主题（除了基本地图中的任何主题）</p>
                     </li>
                     <li>
                        <p>JDBC主题（使用动态查询）</p>
                     </li>
                     <li>
                        <p>动态定义（临时）样式</p>
                     </li>
                  </ul>
                  <p>在地图请求中指定时，这些元素和属性定义生成的地图的内容和外观。<a href="map-visualization-servers.html#GUID-0D2CF483-95C0-45D0-B4E8-5A4578741A63" title="地图可视化工具作为一组Java Enterprise Edition包，包含一组服务器以提供地图服务。">映射可视化服务器</a>包含有关映射请求的可用元素和属性的详细信息。</p>
                  <p><a id="d7682e7210" class="indexterm-anchor"></a>地图可以在窗口中具有基本地图和在彼此顶部呈现的一堆主题。<a id="d7682e7213" class="indexterm-anchor"></a><a id="d7682e7215" class="indexterm-anchor"></a><a id="d7682e7217" class="indexterm-anchor"></a>地图具有相关的坐标系，地图中的所有主题必须共享。例如，如果地图坐标系是8307（对于<span class="italic">经度/纬度（WGS 84）</span> ，用于GPS设备的最常见系统），则地图中的所有主题必须具有使用该坐标系定义的几何。
                  </p>
                  <p><a id="d7682e7224" class="indexterm-anchor"></a><a id="d7682e7228" class="indexterm-anchor"></a><a id="d7682e7230" class="indexterm-anchor"></a><a id="d7682e7232" class="indexterm-anchor"></a>您可以通过指定基本地图名称或使用编程界面添加主题来向地图添加主题。添加主题的顺序决定了它们的渲染顺序，最后指定的主题位于顶部，因此请确保您知道在背景和前景中需要哪些主题。
                  </p>
                  <p>数据库用户的所有基本映射名称和定义都存储在该用户的USER_SDO_MAPS视图中，该视图在<a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。">Map Visualizer元数据视图</a>和<a href="map-visualization-concepts.html#GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC">xxx_SDO_MAPS视图中进行了描述</a> 。<a id="d7682e7248" class="indexterm-anchor"></a> USER_SDO_MAPS视图中的DEFINITION列包含基本映射的XML定义。
                  </p>
                  <p><a id="d7682e7254" class="indexterm-anchor"></a> <a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95__I1008430">例2-49</a>显示了基本映射定义。
                  </p>
                  <div class="example" id="GUID-B39C38B9-8852-4085-A4B0-7454557A5C95__I1008430">
                     <p class="titleinexample">例2-49基本映射的XML定义</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;map_definition&gt; &lt;theme name =“theme_us_states”min_scale =“10”max_scale =“0”/&gt; &lt;theme name =“theme_us_parks”min_scale =“5”max_scale =“0”/&gt; &lt;theme name =“theme_us_highways”min_scale =“5”max_scale =“0”/&gt; &lt;theme name =“theme_us_streets”min_scale =“0.05”max_scale =“0”/&gt; &lt;/ map_definition&gt;</pre><p>基本地图中的每个主题都可以与显示它的可见比例范围相关联。在<a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95__I1008430">示例2-49中</a> ，除非地图请求的地图比例为0.05或更小且大于0（在这种情况下，显示大量细节的比例），否则不会显示名为<code class="codeph">theme_us_streets</code>的主题。如果未指定<code class="codeph">min_scale</code>和<code class="codeph">max_scale</code>属性，则只要显示基本地图，就会显示主题。（有关地图比例的更多信息，请参阅<a href="map-visualization-concepts.html#GUID-815266CF-CBB4-4CA8-B8E8-18353B89BFCA">地图大小和比例</a> 。）
                     </p>
                     <p>基本地图中主题的显示顺序与基本地图定义中的顺序相同。在<a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95__I1008430">例2-49中</a> ，首先渲染<code class="codeph">theme_us_states</code>主题，然后是<code class="codeph">theme_us_parks</code> ，然后是<code class="codeph">theme_us_highways</code> ，最后（如果地图比例在所有指定范围内） <code class="codeph">theme_us_streets</code> 。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-815266CF-CBB4-4CA8-B8E8-18353B89BFCA">地图大小和比例</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D">地图图例</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">映射可视化概念</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9615"></a><div class="props_rev_3"><a id="GUID-815266CF-CBB4-4CA8-B8E8-18353B89BFCA" name="GUID-815266CF-CBB4-4CA8-B8E8-18353B89BFCA"></a><h4 id="JIMPV-GUID-815266CF-CBB4-4CA8-B8E8-18353B89BFCA" class="sect4"><span class="enumeration_section">2.4.1</span>地图大小和比例</h4>
                  <div>
                     <p>地图大小是地图数据空间单位的地图高度。例如，如果地图数据在WGS 84地理坐标中，则地图中心为（-120.5,36.5），大小为2，则地图的高度为2个十进制度，较低的Y（纬度）值为35.5度，上面的Y值是37.5度。</p>
                     <p>地图比例表示为用户数据空间中的单位，在屏幕或设备上以1英寸表示。地图可视化器的地图比例实际上是将地图比例表示为1 / <span class="italic">n</span>的流行方法中的分母值，其中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>1，分子，在显示的地图上是1个单位（地图可视化器为1英寸）。</p>
                        </li>
                        <li>
                           <p><span class="italic">n</span> ，分母，是在显示的地图上由1个单位（地图可视化器为1英寸）表示的度量单位数（例如，十进制度数，米或英里）。
                           </p>
                        </li>
                     </ul>
                     <p>例如：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果计算机显示器上的1英寸表示0.5小数的用户数据，则分数为1 / 0.5。分数的十进制值是2.0，但是地图可视化器的比例值是0.5。</p>
                        </li>
                        <li>
                           <p>如果计算机显示器上的1英寸表示2英里的用户数据，则分数为1/2。分数的十进制值为0.5，但地图可视化器的比例值为2。</p>
                        </li>
                        <li>
                           <p>如果计算机显示器上的1英寸代表10英里的用户数据，则分数为1/10。分数的十进制值为0.1，但地图可视化器的比例值为10。</p>
                        </li>
                     </ul>
                     <p><a id="d7682e7386" class="indexterm-anchor"></a><a id="d7682e7388" class="indexterm-anchor"></a> <code class="codeph">&lt;theme&gt;</code>元素中的<code class="codeph">min_scale</code>和<code class="codeph">max_scale</code>属性描述<code class="codeph">&lt;theme&gt;</code>的可见比例范围。这些属性控制是否显示主题，具体取决于当前地图比例。<code class="codeph">min_scale</code>的默认比例值为正无穷大， <code class="codeph">max_scale</code>的默认值为负无穷大（或者换句话说，默认情况下显示所有地图比例的主题，如果可能，则给出显示特征）。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">min_scale</code>是必须放大显示以显示主题的值。例如，如果park的<code class="codeph">min_scale</code>值为5，并且当前地图比例值为5或更小但大于<code class="codeph">max_scale</code>值，则park将包含在显示中;但是，如果缩小显示以使地图比例值大于5，则不会在显示中包含公园。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">max_scale</code>是必须放大显示以使主题不显示的值。例如，如果县的<code class="codeph">max_scale</code>值为3，并且当前地图比例值为3或更小，则县中的县将不包括在内;但是，如果缩小显示以使地图比例值大于3，则各个县将包含在显示中。
                           </p>
                        </li>
                     </ul>
                     <p>较高的<code class="codeph">min_scale</code>值与较少的地图细节相关联，较小的比例与制图术语相关联，而较高的<code class="codeph">max_scale</code>值与较大的地图细节相关联，较大的比例与制图术语相关联。（请注意，地图比例尺的地图比例尺意义与制图地图比例的流行含义不同。）主题的<code class="codeph">min_scale</code>值应大于<code class="codeph">max_scale</code>值。<a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95" title="地图可以包含元素和属性的组合。">Maps中的</a> <a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95__I1008430">示例2-49</a>包括<code class="codeph">min_scale</code>和<code class="codeph">max_scale</code>值。
                     </p>
                     <p><a id="d7682e7457" class="indexterm-anchor"></a><a id="d7682e7459" class="indexterm-anchor"></a>您还可以使用主题标签比例参数<code class="codeph">label_min_scale</code>和<code class="codeph">label_max_scale</code>为主题标签指定比例值，以便显示或隐藏具有与基本主题比例不同的值的标签。这些参数类似于<code class="codeph">min_scale</code>和<code class="codeph">max_scale</code>参数，但如果地图比例位于<code class="codeph">label_min_scale</code>和<code class="codeph">label_max_scale</code>定义的可见范围内， <code class="codeph">label_min_scale</code> <code class="codeph">label_max_scale</code> 。（如果主题不在<code class="codeph">min_scale</code>和<code class="codeph">max_scale</code>定义的可见比例范围内，则忽略标签比例值。）以下是带有标签比例值的主题定义;当地图比例介于5和2之间时，将显示标签，但是当地图比例介于10和0之间时，将显示主题特征：</p><pre class="oac_no_warn" dir="ltr">&lt;theme name =“theme_us_states”min_scale =“10”max_scale =“0” <span class="bold">label_min_scale =“5”label_max_scale =“2”</span> /&gt;</pre><p>要确定地图可视化工具返回的地图的当前地图比例，首先根据与地图数据关联的坐标系找到地图大小，即地图的高度（垂直跨度）。例如，假设请求高度为10（英里，米，十进制度或任何测量单位）的地图与数据相关联，并且地图是在尺寸为500乘350的设备上绘制的像素，其中350是高度。地图可视化器假设典型的屏幕分辨率为96 dpi。因为96像素等于1英寸，返回的地图的高度是3.646英寸（350/96 = 3.646）。在此示例中，地图的大小为10，因此地图比例约为2.743（10 / 3.646 = 2.743）。</p>
                     <p>或者，您可以通过将<code class="codeph">scale_mode</code>主题属性值指定为<code class="codeph">ratio</code> ，使用地图比例值来请求地图而不指定单位，例如50000，比例为1：50000。（如果<code class="codeph">scale_mode</code>主题属性值为<code class="codeph">screen_inch</code> ，则比例指的是单位。）要使用没有单位定义的比例，请求指定中心和比例比例的地图。
                     </p>
                     <p>要查找比例刻度的等效地图可视化器屏幕英制刻度，请按照下列步骤操作：</p>
                     <ol>
                        <li>
                           <p>找到与一个屏幕像素关联的仪表的数字分数。例如，如果屏幕分辨率为96 dpi（每英寸点数），则每个屏幕像素的屏幕上的米数为0.000265（即0.0254 / 96）。</p>
                        </li>
                        <li>
                           <p>找到一个屏幕像素的地图比例（ <code class="codeph">mapdotScale</code>值），如下所示：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于投影数据（米），将步骤1的结果乘以比例刻度。例如，如果比例尺为50000（5万）且屏幕分辨率为96 dpi，则每个像素的结果为13.25米（50000 * 0.000265）。</p>
                              </li>
                              <li>
                                 <p>对于大地测量数据（度），将步骤1的结果乘以每个度数的米数（在地球表面上）。（此数字取决于与数据关联的坐标系。）例如，如果一度= 111195米且屏幕分辨率为96 dpi，则每个像素的结果为29.466675米（111195 * 0.000265）。</p>
                              </li>
                              <li>
                                 <p>对于使用任何其他单位的数据，请使用米的投影数据方法。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>因为地图可视化器比例是每屏幕英寸而不是每个屏幕像素，所以将步骤2的结果乘以dpi值。例如，如果步骤2的结果在96 dpi时为13.25米，则每英寸屏幕的米数为1272（13.25 * 96）。</p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95" title="地图可以包含元素和属性的组合。">地图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9618"></a><a id="JIMPV9617"></a><a id="JIMPV9619"></a><a id="JIMPV9620"></a><a id="JIMPV9616"></a><div class="props_rev_3"><a id="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D" name="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D"></a><h4 id="JIMPV-GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D" class="sect4"><span class="enumeration_section">2.4.2</span>地图图例</h4>
                  <div>
                     <p><span class="bold">地图图例</span>是在地图顶部绘制的插图，描述了各种颜色，符号，线条，图案等的表示形式。您可以灵活地指定图例的内容和外观。您可以：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>自定义背景，边框样式和字体</p>
                        </li>
                        <li>
                           <p>在图例中有一列或多列</p>
                        </li>
                        <li>
                           <p>为单独的图例条目添加空间</p>
                        </li>
                        <li>
                           <p>缩进图例条目</p>
                        </li>
                        <li>
                           <p>使用任何地图可视化工具样式，包括高级样式</p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010585">示例2-50</a>是包含图例的请求的摘录。
                     </p>
                     <div class="figure" id="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010621">
                        <p class="titleinfigure">图2-14带图例的地图</p><img src="img/legend.gif" alt="下面是图2-14的描述" title="下面是图2-14的描述" longdesc="img_text/legend.html"><br><a href="img_text/legend.html">“图2-14地图与传奇”的描述</a></div>
                     <!-- class="figure" -->
                     <p><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010585">例2-50</a>和<a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010621">图2-14的</a>注释：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>此示例显示了包含单个列的图例，但您可以在图例中创建多个列。</p>
                        </li>
                        <li>
                           <p>列定义中的每个条目都可以标识标签文本以及文本是否为要添加的垂直空白的图例标题（ <code class="codeph">is_title="true"</code> ），样式名称和关联文本，或者分隔符（ <code class="codeph">is_separator="true"</code> ） （在此示例中的<span class="italic">城市</span>条目之后）。
                           </p>
                        </li>
                     </ul>
                     <p><a id="d7682e7638" class="indexterm-anchor"></a><a id="d7682e7642" class="indexterm-anchor"></a>作为在一个或多个&lt;column&gt;元素中指定图例内容的替代方法，您可以根据地图请求请求<span class="bold">自动图例</span> 。使用自动图例，您可以指定图例标题，地图可视化工具会根据与地图区域进行任何交互的主题生成图例。考虑来自地图请求和基本地图的主题。（但是，某些图例项可能不可见，例如，如果主题与查询窗口交互但在地图上没有可见主题的功能。）
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__CIHHGAJD">示例2-51</a>是请求自动图例的地图请求（因为<code class="codeph">&lt;legend&gt;</code>元素不包含任何<code class="codeph">&lt;column&gt;</code>元素）。
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__CIHCEJFB">例2-52</a>请求一个自动图例，其中<code class="codeph">&lt;legend&gt;</code>元素指定用于生成图例项的主题。在此示例中，即使地图结果显示更多主题，图例项也基于<code class="codeph">&lt;legend&gt;</code>元素中指定的<code class="codeph">THEME_COUNTIES_3397829</code>和<code class="codeph">THEME_US_AIRPORT</code>主题。
                     </p>
                     <p>您无法将自动图例与<code class="codeph">&lt;column&gt;</code>元素结合使用。如果<code class="codeph">&lt;legend&gt;</code>元素包含任何<code class="codeph">&lt;column&gt;</code>元素，则会创建列/条目图例。
                     </p>
                     <p>在构建自动图例项时，地图可视化工具使用以下注意事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>每个图例列最多包含五个条目（高级样式被视为一个条目）。</p>
                        </li>
                        <li>
                           <p>简单渲染样式的图例文本来自主题描述（如果已定义），否则来自主题名称。</p>
                        </li>
                        <li>
                           <p>如果在多个主题中使用渲染样式，则样式将在图例中重复，但文本与其应用的主题相关。</p>
                        </li>
                        <li>
                           <p>图例中不会重复标注样式。标签样式的样式文本来自样式描述。</p>
                        </li>
                        <li>
                           <p>图例中不会重复高级样式。</p>
                        </li>
                     </ul>
                     <p>如果还指定了地图标题，注释或徽标（或任何组合），请确保图例和其他要素具有不同的位置。（地图标题，注释和徽标在“ <a href="introduction-to-map-visualization-component.html#GUID-69148567-C00C-441A-BBA7-D42EB32879A7">指定全局地图配置选项”中进行了说明</a> 。）图例的默认位置是<code class="codeph">SOUTH_WEST</code> 。</p>
                     <div class="example" id="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010585">
                        <p class="titleinexample">示例2-50地图请求中包含的图例</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;map_request basemap =“density_map”datasource =“mvdemo”width =“640”height =“480”bgcolor =“＃a6cae0”antialiase =“false”format =“PNG_STREAM”&gt; &lt;center size =“4.2”&gt; &lt;geoFeature render_style =“m.image134_bw”&gt; &lt;geometricProperty typeName =“center”&gt; &lt;Point srsName =“SDO：8307”&gt; &lt;coordinates&gt; -121.2615,37.5266 &lt;/ coordinates&gt; &lt;/ Point&gt; &lt;/ geometryProperty&gt; &lt;/ geoFeature&gt; &lt; / center&gt; &lt;legend bgstyle =“fill：#ffffff; fill-opacity：100; stroke：＃a3a3a3”profile =“MEDIUM”position =“SOUTH_WEST”&gt; &lt;column&gt; &lt;entry text =“Legend”is_title =“true” /&gt; &lt;entry style =“M.IMAGE134_BW”text =“Center”/&gt; &lt;entry style =“M.ALL_CITY_L2”text =“Cities”/&gt; &lt;entry is_separator =“true”/&gt; &lt;entry style =“L。 S04_ROAD_INTERSTATE“text =”Interstates“/&gt; &lt;entry text =”县人口：“/&gt; &lt;entry style =”V.COUNTY_POP_DENSITY_8“tab =”1“/&gt; &lt;/ column&gt; &lt;/ legend&gt; &lt;！ -  &lt;themes &gt; &lt;/ themes&gt;  - &gt; &lt;/ map_request&gt;</pre><p><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010621">图2-14</a>显示了<a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010585">示例2-50中</a>指定的图例的地图。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__CIHHGAJD">
                        <p class="titleinexample">例2-51具有自动图例的地图请求</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;map_request title =“自动图例”datasource =“mvdemo”width =“640”height =“480”bgcolor =“＃a6cae0”antialiase =“false”format =“PNG_STREAM”&gt; &lt;center size =“4.5”&gt; &lt; geoFeature&gt; &lt;geometricProperty typeName =“center”&gt; &lt;Point&gt; &lt;coordinates&gt; -122.2615,37.5266 &lt;/ coordinates&gt; &lt;/ Point&gt; &lt;/ geometricProperty&gt; &lt;/ geoFeature&gt; &lt;/ center&gt; &lt;themes&gt; &lt;theme name =“THEME_COUNTIES_3397829” /&gt; &lt;theme name =“THEME_US_ROAD1”/&gt; &lt;theme name =“THEME_US_AIRPORT”/&gt; &lt;/ themes&gt; <span class="bold">&lt;legend bgstyle =“fill：#ffffff; fill-opacity：128; stroke：#ff0000; stroke-opacity：128 “profile =”medium“font =”Courier“&gt;</span> <span class="bold">&lt;/ legend&gt;</span> &lt;/ map_request&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__CIHCEJFB">
                        <p class="titleinexample">例2-52指定主题的自动图例</p><pre class="oac_no_warn" dir="ltr">&lt;map_request title =“定义了主题的图例”datasource =“mvdemo”width =“640”height =“480”bgcolor =“＃a6cae0”antialiase =“false”format =“PNG_STREAM”&gt; &lt;center size =“4.5”&gt; &lt;geoFeature&gt; &lt;geometricProperty typeName =“center”&gt; &lt;Point&gt; &lt;coordinates&gt; -122.2615,37.5266 &lt;/ coordinates&gt; &lt;/ Point&gt; &lt;/ geometryProperty&gt; &lt;/ geoFeature&gt; &lt;/ center&gt; &lt;themes&gt; &lt;theme name =“THEME_COUNTIES_3397829 “/&gt; &lt;theme name =”THEME_US_ROAD1“/&gt; &lt;theme name =”THEME_US_AIRPORT“/&gt; &lt;/ themes&gt; &lt;legend bgstyle =”fill：#ffffff; fill-opacity：128; stroke：#ff0000; stroke-opacity： 128“profile =”medium“font =”Courier“&gt; <span class="bold">&lt;themes&gt;</span> <span class="bold">&lt;theme name =”THEME_COUNTIES_3397829“/&gt;</span> <span class="bold">&lt;theme name =”THEME_US_AIRPORT“/&gt;</span> <span class="bold">&lt;/ themes&gt;</span> &lt;/ legend&gt; &lt;/ map_request&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95" title="地图可以包含元素和属性的组合。">地图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9621"></a><div class="props_rev_3"><a id="GUID-5AC30A9E-37E7-49FE-AFEE-AB220B600925" name="GUID-5AC30A9E-37E7-49FE-AFEE-AB220B600925"></a><h3 id="JIMPV-GUID-5AC30A9E-37E7-49FE-AFEE-AB220B600925" class="sect3"><span class="enumeration_section">2.5</span>数据来源</h3>
               <div>
                  <p>数据源对应于数据库架构或用户。</p>
                  <p>在可以在数据库模式中绘制任何空间数据之前，必须首先为模式定义（创建）永久或动态的数据源：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您可以通过在地图可视化工具配置文件（ <code class="codeph">mapViewerConfig.xml</code> ）中指定其连接信息和用户登录凭据来永久定义数据源。
                        </p>
                     </li>
                     <li>
                        <p>您可以使用地图可视化工具管理（管理员）页面动态定义或修改数据源。</p>
                     </li>
                  </ul>
                  <p>每个映射请求都必须指定主数据源。但是，您可以为添加到地图请求的各个主题指定不同的数据源。这使得汇总跨不同数据库模式存储的数据变得容易。如果主题没有指定的数据源，则它与主数据源相关联。基本映射（以及其中包含的主题）始终与主数据源相关联。处理主题时，必须可以从数据源或与主题关联的源访问其所有基础数据以及其定义中引用的样式。</p>
                  <p><a id="d7682e7805" class="indexterm-anchor"></a><a id="d7682e7807" class="indexterm-anchor"></a><a id="d7682e7809" class="indexterm-anchor"></a>每个数据源都有关联的渲染器（有时称为映射器或映射器），其数量由<code class="codeph">&lt;map_data_source&gt;</code>元素中的<code class="codeph">number_of_mappers</code>属性确定。此属性（在<a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">定义永久映射数据源中</a>描述）会影响在处理映射请求时为每个数据源创建的数据库连接数。数据源中指定的呈示符数也是可以为该数据源处理的最大并发请求数。每个额外的渲染器只需要少量内存，因此指定大量渲染器（例如100）的主要潜在缺点是，如果允许太多的映射请求通过，则底层CPU资源可能会受到影响，从而影响整个地图可视化服务器的性能。
                  </p>
                  <p><a id="d7682e7822" class="indexterm-anchor"></a><a id="d7682e7824" class="indexterm-anchor"></a>每个数据源都有自己的内部元数据缓存。元数据缓存包含所有访问样式的定义，以及源自数据源的所有预定义主题的定义。这消除了在需要时重复查询数据库以定义样式或预定义主题的需要。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A">目录数据源</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">映射可视化概念</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV10105"></a><div class="props_rev_3"><a id="GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A" name="GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A"></a><h4 id="JIMPV-GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A" class="sect4"><span class="enumeration_section">2.5.1</span>目录数据源</h4>
                  <div>
                     <p>目录数据源从本地文件获取其所有数据。存储数据文件的本地目录与存储<code class="codeph">mapViewerConfig.xml</code>文件的位置有关。从另一个角度来看，目录数据源不需要Oracle数据库，因为所有必需的数据（空间几何数据及其属性，以及如何更新空间数据的元数据，如样式和主题）都存储在本地文件。
                     </p>
                     <p>以下是创建和使用目录数据源的一般步骤：</p>
                     <ol>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-E91D4AC7-DFFB-4308-B0EC-4FF392F19C24">从Oracle数据库导出必要的元数据</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC">导出必要的空间表</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-6ADE83B9-AB84-4D71-BCF2-7C4B31EE0AC8">编辑Map Visualizer配置文件以添加目录数据源</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-9DC5E3F3-3C51-4BB9-A4D3-EB6B44825B3B">重新启动Map Visualizer Server</a></p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-E91D4AC7-DFFB-4308-B0EC-4FF392F19C24">从Oracle数据库导出必要的元数据</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC">导出必要的空间表</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-6ADE83B9-AB84-4D71-BCF2-7C4B31EE0AC8">编辑Map Visualizer配置文件以添加目录数据源</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-9DC5E3F3-3C51-4BB9-A4D3-EB6B44825B3B">重新启动Map Visualizer Server</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-5AC30A9E-37E7-49FE-AFEE-AB220B600925" title="数据源对应于数据库架构或用户。">数据源</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV10106"></a><div class="props_rev_3"><a id="GUID-E91D4AC7-DFFB-4308-B0EC-4FF392F19C24" name="GUID-E91D4AC7-DFFB-4308-B0EC-4FF392F19C24"></a><h5 id="JIMPV-GUID-E91D4AC7-DFFB-4308-B0EC-4FF392F19C24" class="sect5"><span class="enumeration_section">2.5.1.1</span>从Oracle数据库导出必要的元数据</h5>
                     <div>
                        <p>在创建目录数据源之前，必须使用Map Builder实用程序将元数据导出到<code class="codeph">USER_SDO_CACHED_MAPS.xml</code> ， <code class="codeph">USER_SDO_THEMES.xml</code>和<code class="codeph">U</code> <code class="codeph">SER_SDO_STYLES.xm</code> l文件。以下注意事项适用：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>目录数据源中仅支持外部切片图层。因此，导出到USER_SDO_CACHED_MAPS.xml的切片图层必须是外部切片图层，例如Oracle eLocation地图服务。</p>
                           </li>
                           <li>
                              <p>必须将USER_SDO_THEMES.xml中主题所需的所有样式导出到USER_SDO_STYLES.xml文件中。</p>
                           </li>
                           <li>
                              <p>您需要记下所有导出主题使用的所有必需空间数据表（从中获取空间数据的主题基表），以便您可以将每个基表导出到GeoJSON文件中（在<a href="map-visualization-concepts.html#GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC">导出必要的空间表中进行了</a>解释）。
                              </p>
                           </li>
                        </ul>
                        <ol>
                           <li>
                              <p>在Map Builder实用程序中，选择<span class="bold">Tools</span> ，然后选择<span class="bold">Export Metadata to XML</span> 。</p>
                           </li>
                           <li>
                              <p>选择用于存储元数据的临时目录。</p>
                           </li>
                           <li>
                              <p>接受表名的默认前缀（ <code class="codeph">USER_SDO_</code> ）。
                              </p>
                           </li>
                           <li>
                              <p>选择要导出的切片图层，主题和样式。（如果您不确定所需主题需要哪些样式，则可以导出所有样式。）</p>
                           </li>
                           <li>
                              <p>单击“确定”以执行导出操作。</p>
                              <p><code class="codeph">USER_SDO_CACHED_MAPS.xml</code> ， <code class="codeph">USER_SDO_THEMES.xml</code>和<code class="codeph">U</code> <code class="codeph">SER_SDO_STYLES.xm</code> l文件在指定目录中创建。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A">目录数据源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10107"></a><div class="props_rev_3"><a id="GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC" name="GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC"></a><h5 id="JIMPV-GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC" class="sect5"><span class="enumeration_section">2.5.1.2</span>导出必要的空间表</h5>
                     <div>
                        <p>对于目录数据源，空间数据集存储在GeoJSON文件中。一个GeoJSON文件对应一个空间表就是数据库。要导出空间表，请将请求发送到地图可视化工具服务器。</p>
                        <p>例如，如果<code class="codeph">USER_SDO_THEMES.xml</code>文件中的目录数据源主题（假设主题也称为OBIEE_COUNTRY）需要名为OBIEE_COUNTRY的空间表，则需要将此空间表导出为GeoJSON文件。作为约定，您可以使用与空间表的名称相同的名称来命名它。在这种情况下，它被命名为<code class="codeph">OBIEE_CONTRY.json</code> 。
                        </p>
                        <ol>
                           <li>
                              <p>检查<code class="codeph">USER_SDO_THEMES.xml</code>文件中的主题定义。例如，如果名为OBIEE_COUNTRY的主题使用OBIEE_COUNTRY空间表，则需要导出空间表。必须标识表的列和期望的名称，并且列名与主题定义中的名称属性相同。在以下示例中，ISO_COUNTRY_CODE列被映射为<code class="codeph">Country Code</code> ：</p><pre class="oac_no_warn" dir="ltr">&lt;theme&gt; &lt;name&gt; OBIEE_COUNTRY &lt;/ name&gt; &lt;description&gt; &lt;！[CDATA [OBIEE Country]]&gt; &lt;/ description&gt; &lt;base_table&gt; OBIEE_COUNTRY &lt;/ base_table&gt; &lt;geometry_column&gt; GEOMETRY &lt;/ geometry_column&gt; &lt;styling_rules&gt; &lt;！[CDATA [&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;styling_rules&gt; &lt;hidden_info&gt; &lt;field <span class="bold">column =“ISO_COUNTRY_CODE”name =“Country Code”</span> /&gt; &lt;field column =“NAME”name =“Country Name”/&gt; &lt;field column =“NAME_INIT”name =“Country Name（ Init）“/&gt; &lt;/ hidden_info&gt; &lt;rule&gt; &lt;features style =”C.AIRPORTS“&gt; &lt;/ features&gt; &lt;label column =”NAME_LABEL“style =”T.COUNTRY_NAME_10“&gt; 1 &lt;/ label&gt; &lt;/ rule&gt; &lt;/ styling_rules&gt;]]&gt; &lt;/ styling_rules&gt; &lt;/ theme&gt;。 。 。
</pre></li>
                           <li>
                              <p>标识空间表列。在以下示例中，基表OBIEE_COUNTRY具有名为GEOMETRY的空间几何列：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; describe obiee_country Name Null？输入----------------------------- -------- ------------ ---------------- NAME VARCHAR2（255 CHAR）NAME_INIT VARCHAR2（1020 CHAR）OBIEE_LOWER VARCHAR2（1020 CHAR）ISO_COUNTRY_CODE VARCHAR2（5）SQKM NUMBER（11）NAME_LABEL VARCHAR2（255 CHAR） <span class="bold">GEOMETRY MDSYS.SDO_GEOMETRY</span>
</pre></li>
                           <li>
                              <p>为地图可视化工具数据服务器创建请求字符串。例如，如果OBIEE_COUNTRY是基表，并且地图可视化工具在<code class="codeph">localhost:8080</code>运行，并且如果数据源名称是<code class="codeph">my_ds_name</code>且启用了空间数据检索，则可以发送如下所示的请求字符串：</p><pre class="oac_no_warn" dir="ltr">http：// localhost：8080 / mapviewer / dataserver / my_ds_name？t = obiee_country＆sql =选择iso_country_code作为id，iso_country_code作为“国家代码”，名称作为“国家名称”，name_init作为“国家名称（Init）”，name_label，几何来自obiee_country＆id_col = id＆simplify = true＆threshold = 90＆include_label_box = true</pre><p>在这种情况下，可以使用名称<code class="codeph">OBIEE_COUNTRY.json</code>将数据集保存到存储导出的元数据（ <code class="codeph">USER_SDO_CACHED_MAPS.xml</code> ， <code class="codeph">USER_SDO_THEMES.xml</code>和<code class="codeph">USER_SDO_STYLES.xml</code>文件）的临时文件夹中。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A">目录数据源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10108"></a><div class="props_rev_3"><a id="GUID-6ADE83B9-AB84-4D71-BCF2-7C4B31EE0AC8" name="GUID-6ADE83B9-AB84-4D71-BCF2-7C4B31EE0AC8"></a><h5 id="JIMPV-GUID-6ADE83B9-AB84-4D71-BCF2-7C4B31EE0AC8" class="sect5"><span class="enumeration_section">2.5.1.3</span>编辑Map Visualizer配置文件以添加目录数据源</h5>
                     <div>
                        <p>编辑<code class="codeph">mapViewerConfig.xml</code>文件并添加目录数据源。例如：</p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name =“catalogds1”catalog_dir =“../ catalogs / datafolder1”private =“true”number_of_mappers =“3”allow_jdbc_theme_based_foi =“true”editable =“false”/&gt;</pre><p>对于前面的目录数据源定义，您必须创建相对于存储<code class="codeph">mapViewerConfig.xml file</code>位置的指定<code class="codeph">catalog_dir</code>文件夹，然后将所有数据文件复制到该文件夹中：即三个导出的元数据文件（ <code class="codeph">USER_SDO_CACHED_MAPS.xml</code> ， <code class="codeph">USER_SDO_THEMES.xml</code>和<code class="codeph">USER_SDO_STYLES.xml</code> ）以及所有导出的GeoJSON文件，例如本例中的<code class="codeph">OBIEE_COUNTRY.json</code> 。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A">目录数据源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10109"></a><div class="props_rev_3"><a id="GUID-9DC5E3F3-3C51-4BB9-A4D3-EB6B44825B3B" name="GUID-9DC5E3F3-3C51-4BB9-A4D3-EB6B44825B3B"></a><h5 id="JIMPV-GUID-9DC5E3F3-3C51-4BB9-A4D3-EB6B44825B3B" class="sect5"><span class="enumeration_section">2.5.1.4</span>重新启动Map Visualizer Server</h5>
                     <div>
                        <p>重新启动地图可视化服务器。</p>
                        <p>重新启动地图可视化工具服务器后，应该可以从此目录数据源访问所有导出的切片图层和主题。例如，如果您发送如下地图请求，则应该会看到地图图像：</p><pre class="oac_no_warn" dir="ltr">http：// localhost：8080 / mapviewer / omserver？xml_request = &lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;map_request datasource =“catalogds1”width =“1024”height =“768”format =“PNG_STREAM”&gt; &lt;center size =“200”&gt; &lt;geoFeature&gt; &lt;geometryProperty typeName =“center”&gt; &lt;Point&gt; &lt;coordinates&gt; 0 ，0 &lt;/ coordinates&gt; &lt;/ Point&gt; &lt;/ geometricProperty&gt; &lt;/ geoFeature&gt; &lt;/ center&gt; &lt;themes&gt; &lt;theme name =“OBIEE_COUNTRY”&gt; &lt;/ theme&gt; &lt;/ themes&gt; &lt;/ map_request&gt;</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A">目录数据源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="JIMPV9622"></a><div class="props_rev_3"><a id="GUID-788ABF14-7506-40CF-B5E0-D47352BD1A59" name="GUID-788ABF14-7506-40CF-B5E0-D47352BD1A59"></a><h3 id="JIMPV-GUID-788ABF14-7506-40CF-B5E0-D47352BD1A59" class="sect3"><span class="enumeration_section">2.6</span>如何生成地图</h3>
               <div>
                  <p>当地图请求到达地图可视化服务器时，服务器会选择与请求中的主数据源关联的免费渲染器。</p>
                  <p>本主题描述了地图可视化工具服务器生成地图所遵循的过程。简而言之，地图可视化工具执行以下步骤：</p>
                  <ol>
                     <li>
                        <p>解析并处理传入的XML映射请求。</p>
                     </li>
                     <li>
                        <p>准备每个主题的数据（并行执行）。</p>
                     </li>
                     <li>
                        <p>渲染并标记每个主题。</p>
                     </li>
                     <li>
                        <p>生成最终图像或文件。</p>
                     </li>
                  </ol>
                  <p>地图可视化工具生成的每个地图都来自其接收有效的XML地图请求。解析XML映射请求并验证其内容。然后，地图可视化工具会创建XML请求中指定的任何动态样式。它根据基本映射中包含的所有主题（如果指定了基本映射）以及任何指定的预定义或JDBC主题构建主题列表。请求中的所有单个功能都分组为一个临时主题。换句话说，在解析传入请求之后，必须在地图上显示的所有数据都显示在地图可视化器渲染引擎的主题列表中。</p>
                  <p>列表中主题的排序很重要，因为它决定了主题的呈现顺序。基本映射中包含的所有主题（如果存在）首先添加到列表中，然后是所有指定的主题（预定义或JDBC）。包含所有单个功能的主题将添加为列表中的最后一个主题。创建并保存地图的任何其他请求的要素（例如图例，地图标题或脚注）以便稍后呈现。</p>
                  <p>对于请求中的每个主题，地图可视化工具然后创建一个单独的执行线程来准备其数据，以便主题的准备并行进行。对于预定义的主题，这意味着基于主题的定义和任何其他信息（例如当前地图请求窗口）来制定查询。此查询将发送到数据库以供执行，并返回结果集。地图可视化工具根据结果集创建单独的可渲染对象。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于完全缓存的预定义主题，不会向数据库发送任何查询，因为所有可渲染对象都是可用的。</p>
                     </li>
                     <li>
                        <p>对于JDBC主题，用户提供的查询要么按原样执行（当JDBC主题定义中的<code class="codeph">asis</code>属性值为<code class="codeph">TRUE</code>时），要么自动应用空间过滤器子查询。空间过滤器部分用于将用户查询的结果限制为当前请求窗口内的结果。
                        </p>
                     </li>
                     <li>
                        <p>对于已具有可渲染功能的主题（例如包含请求中所有单个功能的主题），无需创建可渲染对象。</p>
                     </li>
                  </ul>
                  <p>在准备好地图请求的所有主题并收集了所有必要的数据之后，地图可视化工具开始渲染地图。它创建一个空的新内存图像来保存结果图，并使用必要的背景（颜色或图像）绘制空图像。然后它呈现主题列表中的所有主题。</p>
                  <div class="infoboxnote" id="GUID-788ABF14-7506-40CF-B5E0-D47352BD1A59__GUID-25C5AE85-C15D-4DDB-BC0C-A2384A15405D">
                     <p class="notep1">注意：</p>
                     <p>无论主题列表中的位置如何，所有图像或GeoRaster主题始终首先呈现。但是，所有其他主题都按照它们在主题列表中出现的顺序呈现。</p>
                  </div>
                  <p>对于每个主题，要素按照地图可视化工具内部确定的顺序进行渲染。每个特征的渲染涉及调用其渲染样式的绘制方法。在渲染完所有主题后，标签流程开始。对于其特征必须用文本标记的每个主题，地图可视化器调用算法来标记每个特征，具体算法取决于特征的类型（例如多边形或线）。</p>
                  <p>在所有主题都已渲染并且（在需要时）标记后，地图可视化工具会在内部地图图像上绘制任何其他地图要素（例如图例）。然后，地图可视化工具将该图像转换为原始地图请求中指定的所需格式（例如PNG或GIF）;但是，对于SVG贴图，地图可视化工具最初会创建一个空的SVG地图对象，而不是使用内部图像，然后根据渲染过程创建一个SVG文档，并将其插入到地图对象中。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">映射可视化概念</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9624"></a><a id="JIMPV9625"></a><a id="JIMPV9626"></a><a id="JIMPV9627"></a><a id="JIMPV9623"></a><div class="props_rev_3"><a id="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8" name="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8"></a><h3 id="JIMPV-GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8" class="sect3"><span class="enumeration_section">2.7</span>跨模式映射请求</h3>
               <div>
                  <p>数据库用户可以发出指定主题的映射请求，该主题使用与另一个数据库用户相关联的数据，以从其他数据源用户有权访问的表中选择数据。</p>
                  <p>例如，假设用户SCOTT想要使用与用户MVDEMO相关联的数据发出地图请求。通常，必须在用户MVDEMO拥有的相关表上授予用户SCOTT SELECT访问权限，并且<code class="codeph">&lt;theme&gt;</code>元素通常应指定<span class="italic">schema-name.table-name</span>格式的任何表。在此示例场景中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于几何表，将MVDEMO的几何表上的SELECT权限授予SCOTT（请参见<a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIAGBE">例2-53</a> ）。
                        </p>
                     </li>
                     <li>
                        <p>对于GeoRaster表，将GeoRaster表的SELECT权限和MVDEMO的栅格数据表授予SCOTT（参见<a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIDFAE">例2-54</a> ）。
                        </p>
                     </li>
                     <li>
                        <p>对于拓扑数据模型表，授予拓扑表，拓扑列索引表和相关拓扑信息表的SELECT权限（ <span class="italic">topology-name</span> _EDGE $， <span class="italic">topology-name</span> _NODE $， <span class="italic">topology-name</span> _FACE $， <span class="italic">topology-name</span> _RELATION $ ）MVDEMO到SCOTT（见<a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHBIHGH">例2-55</a> ）。
                        </p>
                     </li>
                     <li>
                        <p>对于网络数据模型表，将MVDEMO的网络链路，节点，路径和路径链接表的SELECT权限授予SCOTT（参见<a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHCAIGI">例2-56</a> ）。
                        </p>
                     </li>
                  </ul>
                  <p><a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIAGBE">例2-53</a>显示了一个动态主题，它从SCOTT用户定义的数据源访问MVDEMO.STATES几何表。
                  </p>
                  <p><a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIDFAE">例2-54</a>显示了一个动态主题，它从SCOTT用户定义的数据源访问MVDEMO.GEORASTER_TABLE GeoRaster表及其RDT。以<span class="italic">schema-name.table-name</span>格式指定基（GeoRaster）表。
                  </p>
                  <p><a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHBIHGH">例2-55</a>显示了一个动态主题，它从SCOTT用户定义的数据源访问MVDEMO.LAND_PARCELS拓扑表和CITY_DATA拓扑的信息表。如果它们由与数据源关联的模式不同的模式拥有， <span class="italic">则以schema-name.object-name</span>格式指定要素表和拓扑。
                  </p>
                  <p>在<a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHBIHGH">示例2-55中</a> ，必须在拓扑列索引表名称（ <span class="italic">&lt;topology-column-index-table-name&gt;</span> ）上授予SELECT，因为拓扑中的映射可视化工具使用与要素表拓扑列关联的空间索引表查询。您可以按如下方式确定拓扑列索引表名称。假设以下信息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>拓扑功能表所有者：MVDEMO</p>
                     </li>
                     <li>
                        <p>拓扑要素表名称：LAND_PARCELS</p>
                     </li>
                     <li>
                        <p>拓扑要素表拓扑列名称：FEATURE</p>
                     </li>
                  </ul>
                  <p>以下查询返回索引表名称（在此示例中为MDTP_14E60 $）：</p><pre class="oac_no_warn" dir="ltr">SQL&gt;从all_sdo_index_info中选择sdo_index_table，其中table_owner ='MVDEMO'和table_name ='LAND_PARCELS'和column_name ='FEATURE'SDO_INDEX_TABLE ------------------------- ------- MDTP_14E60 $</pre><p>然后，修改<a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHBIHGH">示例2-55中</a>的最后一个GRANT语句以指定<span class="italic">&lt;topology-column-index-table-name&gt;</span> 。在这种情况下：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; grant select on MDTP_14E60 $ to SCOTT;</pre><p><a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHCAIGI">例2-56</a>显示了一个动态主题，用于访问MVDEMO.BI_TEST网络及其链接，节点，路径和路径链接表。以<span class="italic">schema-name.network-name</span>格式指定网络名称。
                  </p>
                  <div class="example" id="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIAGBE">
                     <p class="titleinexample">例2-53交叉模式访问：几何表</p><pre class="oac_no_warn" dir="ltr">SQL&gt;授予SCOTT的STATES选择权; 。 。 。&lt;themes&gt; &lt;theme name =“theme1”&gt; &lt;jdbc_query datasource =“scottds”spatial_column =“geom”render_style =“MVDEMO：C.COUNTIES”jdbc_srid =“8265”&gt;从MVDEMO.STATES选择geom &lt;/ jdbc_query&gt; &lt;/主题&gt; &lt;/ themes&gt;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIDFAE">
                     <p class="titleinexample">例2-54跨模式访问：GeoRaster表</p><pre class="oac_no_warn" dir="ltr">SQL&gt;授予GEORASTER_TABLE到SCOTT的选择权; SQL&gt;将RDT_GEOR1上的select选择授予SCOTT; 。 。 。&lt;themes&gt; &lt;theme name =“georaster_theme”&gt; &lt;jdbc_georaster_query georaster_table =“MVDEMO.georaster_table”georaster_column =“georaster”raster_table =“rdt_geor1”raster_id =“1”jdbc_srid =“8307”datasource =“scottds”asis =“false” &gt; &lt;/ jdbc_georaster_query&gt; &lt;/ theme&gt; &lt;/ themes&gt;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHBIHGH">
                     <p class="titleinexample">示例2-55跨模式访问：拓扑功能表</p><pre class="oac_no_warn" dir="ltr">SQL&gt; grant在CITY_DATA_FACE $上选择SCOTT; SQL&gt;将CITY_DATA_EDGE $上的select选择为SCOTT; SQL&gt;将CITY_DATA_NODE $上的select选择为SCOTT; SQL&gt;将CITY_DATA_RELATION $上的select选择为SCOTT; SQL&gt; grant选择LAND_PARCELS到SCOTT; SQL&gt;将<span class="italic">&lt;topology-column-index-table-name&gt;</span>上的select选择授予SCOTT; 。 。 。&lt;themes&gt; &lt;theme name =“topo_theme”&gt; &lt;jdbc_topology_query topology_name =“MVDEMO.CITY_DATA”feature_table =“MVDEMO.LAND_PARCELS”spatial_column =“FEATURE”render_style =“MVDEMO：C.COUNTIES”jdbc_srid =“0”datasource =“scottds “asis =”false“&gt;从MVDEMO.land_parcels中选择要素&lt;/ jdbc_topology_query&gt; &lt;/ theme&gt; &lt;/ themes&gt;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHCAIGI">
                     <p class="titleinexample">例2-56跨模式访问：网络表</p><pre class="oac_no_warn" dir="ltr">SQL&gt;授予选择BI_TEST_LINK $到SCOTT; SQL&gt;将BI_TEST_NODE $上的select选择为SCOTT; SQL&gt; grant选择BI_TEST_PATH $到SCOTT; SQL&gt;将BI_TEST_PLINK $的select选择授予SCOTT; 。 。 。&lt;themes&gt; &lt;theme name =“net_theme”&gt; &lt;jdbc_network_query network_name =“MVDEMO.BI_TEST”network_level =“1”jdbc_srid =“0”datasource =“scottds”link_style =“MVDEMO：C.RED”node_style =“MVDEMO：M .CIRCLE“node_markersize =”5“asis =”false“&gt; &lt;/ jdbc_network_query&gt; &lt;/ theme&gt; &lt;/ themes&gt;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">映射可视化概念</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9629"></a><a id="JIMPV9628"></a><div class="props_rev_3"><a id="GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4" name="GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4"></a><h3 id="JIMPV-GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4" class="sect3"><span class="enumeration_section">2.8</span> Map Visualizer中的Workspace Manager支持</h3>
               <div>
                  <p>Workspace Manager是Oracle数据库功能，允许您在数据库中对一个或多个表进行版本启用。</p>
                  <p>在启用了版本的表之后，工作空间中的用户会自动查看他们感兴趣的数据库行的正确版本。有关Workspace Manager的详细信息，请参阅<a href="../adwsm/workspace-manager-concepts-usage.html#ADWSM99111" target="_blank"><span class="italic">Oracle Database Workspace Manager Developer's Guide</span></a> 。
                  </p>
                  <p>您可以从特定工作空间，工作空间中的特定保存点或工作空间中特定日期附近的点请求映射。<code class="codeph">&lt;theme&gt;</code>元素的以下属性与Workspace Manager的支持相关：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d7682e8519" class="indexterm-anchor"></a> <code class="codeph">workspace_name</code>属性：指定从中获取地图数据的工作空间的名称。
                        </p>
                     </li>
                     <li>
                        <p><a id="d7682e8526" class="indexterm-anchor"></a> <code class="codeph">workspace_savepoint</code>属性：指定要在指定工作空间中转到的保存点的名称。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">workspace_date</code>属性：指定指定<code class="codeph">workspace_date</code>要转到的日期（即指定日期或附近的点）。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">workspace_date_format</code>属性：指定日期格式。默认值为<code class="codeph">mmddyyyyhh24miss</code> 。仅当您指定了<code class="codeph">workspace_date</code>属性时，此属性才适用。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">workspace_date_nlsparam</code>属性：指定全球化支持选项。选项和缺省值与用于日期转换的<code class="codeph">TO_CHAR</code>函数的<code class="codeph">nlsparam</code>参数相同，这在<a href="../sqlrf/TO_CHAR-datetime.html#SQLRF06129" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>有所描述。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">workspace_date_tswtz</code>属性：指定布尔值。<code class="codeph">TRUE</code>表示输入日期采用时区格式的时间戳; <code class="codeph">FALSE</code> （默认值）表示输入日期是日期字符串。
                        </p>
                     </li>
                  </ul>
                  <p>在地图可视化工具中使用Workspace Manager支持需要<code class="codeph">workspace_name</code>属性。
                  </p>
                  <p>如果既未指定<code class="codeph">workspace_savepoint</code>也未指定<code class="codeph">workspace_date</code>属性，则地图可视化工具将转到所定义工作空间的最新版本。如果同时指定<code class="codeph">workspace_savepoint</code>和<code class="codeph">workspace_date</code>属性，则地图可视化工具将使用指定的日期而不是保存点名称。
                  </p>
                  <p><a href="map-visualization-concepts.html#GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4__BABDEAGD">示例2-57</a>显示了使用与Workspace Manager支持相关的属性（以粗体显示）的动态主题的定义。在此示例中，地图可视化工具将在保存点<code class="codeph">sp1</code>处呈现与工作空间<code class="codeph">wsp_1</code>相关的数据。
                  </p>
                  <p>以下注意事项适用于预定义主题的地图可视化缓存（在<a href="map-visualization-concepts.html#GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB">“预定义主题的缓存”中进行了</a>说明）以及与Workspace Manager相关的地图可视化器属性的使用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果在主题的<code class="codeph">&lt;styling_rules&gt;</code>元素中将<code class="codeph">caching</code>属性设置为<code class="codeph">ALL</code> ，则会忽略与预定义主题相关的Workspace Manager相关属性。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">workspace_name</code>属性，则不会考虑缓存数据。
                        </p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4__BABDEAGD">
                     <p class="titleinexample">示例2-57映射请求中与工作区管理器相关的属性</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;map_request。 。 。&lt;themes&gt; &lt;theme name =“wmtheme”user_clickable =“false” <span class="bold">workspace_name =“wsp_1”workspace_savepoint =“sp1”</span> &gt; &lt;jdbc_query spatial_column =“GEOM”render_style =“stylename”jdbc_srid =“8307”datasource =“mvdemo”asis = “false”&gt;从GEOM_TABLE中选择GEOM，ATTR &lt;/ jdbc_query&gt; &lt;/ theme&gt; &lt;/ themes&gt;。 。 。&lt;/ map_request&gt;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">映射可视化概念</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9632"></a><div class="props_rev_3"><a id="GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" name="GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5"></a><h3 id="JIMPV-GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" class="sect3"><span class="enumeration_section">2.9</span> Map Visualizer元数据视图</h3>
               <div>
                  <p>描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。</p>
                  <p>但是，您永远不应该直接更新这些表。每个地图可视化工具用户都在与该用户关联的架构中提供以下视图：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>USER_SDO_STYLES和ALL_SDO_STYLES包含有关样式的信息。这些视图在<a href="map-visualization-concepts.html#GUID-818EC731-8296-4594-9327-F573E930F56B">xxx_SDO_STYLES视图</a>中描述。
                        </p>
                     </li>
                     <li>
                        <p>USER_SDO_THEMES和ALL_SDO_THEMES包含有关主题的信息。这些视图在<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图</a>中描述。
                        </p>
                     </li>
                     <li>
                        <p>USER_SDO_MAPS和ALL_SDO_MAPS包含有关基本映射的信息。这些视图在<a href="map-visualization-concepts.html#GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC">xxx_SDO_MAPS Views</a>中描述。
                        </p>
                     </li>
                     <li>
                        <p>USER_SDO_CACHED_MAPS和ALL_SDO_CACHED_MAPS包含有关地图图块层的配置设置的信息。这些视图在<a href="map-visualization-concepts.html#GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF">xxx_SDO_CACHED_MAPS视图</a>中描述。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5__GUID-84702B02-2604-410E-96F3-7EB5184421F9">
                     <p class="notep1">注意：</p>
                     <p>您可以使用Map Builder工具（在<a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="本章简要介绍了地图可视化组件Map Builder工具，也称为Oracle Map Builder。它不提供有关工具界面的详细信息;为此，您应该使用Oracle Map Builder时可以使用的在线帮助。">Oracle Map Builder工具中</a>描述）来管理大多数映射元数据。但是，对于某些功能，您必须使用SQL语句来更新地图可视化工具元数据视图。
                     </p>
                  </div>
                  <p>USER_SDO_xxx视图包含有关用户（模式）拥有的映射元素（样式，主题，基本映射，缓存映射）的元数据信息，ALL_SDO_xxx视图包含有关用户具有SELECT权限的映射元素的元数据信息。</p>
                  <p>ALL_SDO_xxx视图包含一个OWNER列，用于标识对象所有者的架构。USER_SDO_xxx视图不包含OWNER列。</p>
                  <p>任何用户都可以引用数据库中定义的所有样式来定义用户的主题，具有文本样式的标记或高级样式。但是，主题和基本地图不会在用户之间共享;因此，例如，您无法在您创建的基本地图中引用其他用户的主题。</p>
                  <p>以下规则适用于访问映射元数据：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果需要添加，删除或修改任何元数据，则必须使用USER_SDO_xxx视图执行操作。ALL_SDO_xxx视图会自动更新，以反映您对USER_SDO_xxx视图所做的任何更改。</p>
                     </li>
                     <li>
                        <p>如果只需要对所有样式的元数据具有读访问权限，则应使用ALL_SDO_STYLES视图。OWNER和NAME列都构成了主键;因此，当您指定样式时，请务必同时包含OWNER和NAME。</p>
                     </li>
                  </ul>
                  <p><a id="d7682e8753" class="indexterm-anchor"></a><a id="d7682e8755" class="indexterm-anchor"></a>前面的地图可视化工具元数据视图在以下文件中定义：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">$ ORACLE_HOME</span> /lbs/admin/mapdefinition.sql</pre><p>地图可视化工具还使用一些其他元数据视图，这些视图可以在其他文件中定义。您永远不应该修改这些视图的内容，其中包括以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d7682e8770" class="indexterm-anchor"></a> MDSYS.USER_SDO_TILE_ADMIN_TASKS包含有关与地图图块管理相关的长任务的信息。如果停止长地图切片图层任务（例如预取然后重新启动任务），则地图可视化工具将使用USER_SDO_TILE_ADMIN_TASKS视图中的信息来恢复任务，而不是在开始时重新开始。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-818EC731-8296-4594-9327-F573E930F56B">xxx_SDO_STYLES视图</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC">xxx_SDO_MAPS视图</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF">xxx_SDO_CACHED_MAPS视图</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">映射可视化概念</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9638"></a><a id="JIMPV9639"></a><a id="JIMPV9637"></a><div class="props_rev_3"><a id="GUID-818EC731-8296-4594-9327-F573E930F56B" name="GUID-818EC731-8296-4594-9327-F573E930F56B"></a><h4 id="JIMPV-GUID-818EC731-8296-4594-9327-F573E930F56B" class="sect4"><span class="enumeration_section">2.9.1</span> xxx_SDO_STYLES视图</h4>
                  <div>
                     <p>USER_SDO_STYLES和ALL_SDO_STYLES视图具有<a href="map-visualization-concepts.html#GUID-818EC731-8296-4594-9327-F573E930F56B__BABCFEDB" title="xxx_SDO_STYLES视图">表2-3中</a>列出的列。
                     </p>
                     <div class="tblformal" id="GUID-818EC731-8296-4594-9327-F573E930F56B__BABCFEDB">
                        <p class="titleintable">表2-3 xxx_SDO_STYLES视图</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="xxx_SDO_STYLES视图" width="100%" border="1" summary="xxx_SDO_STYLES Views" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d7682e8859">列名称</th>
                                 <th align="left" valign="bottom" width="17%" id="d7682e8862">数据类型</th>
                                 <th align="left" valign="bottom" width="65%" id="d7682e8865">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8870" headers="d7682e8859 ">
                                    <p>所有者</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8870 d7682e8862 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8870 d7682e8865 ">
                                    <p>拥有样式的架构（仅限ALL_SDO_STYLES）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8880" headers="d7682e8859 ">
                                    <p>名称</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8880 d7682e8862 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8880 d7682e8865 ">
                                    <p>与样式关联的唯一名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8890" headers="d7682e8859 ">
                                    <p>类型</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8890 d7682e8862 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8890 d7682e8865 ">
                                    <p>以下值之一：COLOR，MARKER，LINE，AREA，TEXT或ADVANCED</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8900" headers="d7682e8859 ">
                                    <p>描述</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8900 d7682e8862 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8900 d7682e8865 ">
                                    <p>关于样式的可选描述性文本</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8910" headers="d7682e8859 ">
                                    <p>定义</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8910 d7682e8862 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8910 d7682e8865 ">
                                    <p>XML定义的风格</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8920" headers="d7682e8859 ">
                                    <p>图片</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8920 d7682e8862 ">
                                    <p>BLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8920 d7682e8865 ">
                                    <p>使用基于图像的符号（用于标记）或填充（用于区域）的标记或区域样式的图像内容（例如， <code class="codeph">airport.gif</code> ）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8933" headers="d7682e8859 ">
                                    <p>几何</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8933 d7682e8862 ">
                                    <p>SDO_GEOMETRY</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8933 d7682e8865 ">
                                    <p>（保留供将来使用）</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>根据Oracle数据库版本，ALL_SDO_STYLES视图可能包含MDSYS架构拥有的样本样式。如果在系统上定义了这些样式，则可以在主题定义和映射请求中指定它们，并且可以检查用于定义自己样式的想法的XML定义。</p>
                     <p>要指定由当前用户以外的模式所拥有的样式（或其他类型的地图可视化对象），必须指定模式名称，并且必须使用冒号（:)，而不是句点，模式名称和对象名称。以下摘录自<code class="codeph">&lt;jdbc_query&gt;</code>元素引用MDSYS架构拥有的名为<code class="codeph">C.RED</code>的样式：</p><pre class="oac_no_warn" dir="ltr">&lt;jdbc_query。 。 。 render_style =“MDSYS：C.RED”&gt;。 。 。&lt;/ jdbc_query&gt;</pre><p><a href="map-visualization-concepts.html#GUID-818EC731-8296-4594-9327-F573E930F56B__BABIIIGB">示例2-58</a>查找MDSYS架构拥有的所有当前定义的样式的名称，并显示其中一个样式的类型，描述和XML定义。（为了便于阅读，重新格式化了示例输出。）
                     </p>
                     <div class="example" id="GUID-818EC731-8296-4594-9327-F573E930F56B__BABIIIGB">
                        <p class="titleinexample">示例2-58查找MDSYS模式所拥有的样式</p><pre class="oac_no_warn" dir="ltr">SELECT owner，name FROM all_sdo_styles WHERE owner ='MDSYS';所有者名称-------------------------------- ---------------- ---------------- MDSYS C.BLACK MDSYS C.BLACK GREY MDSYS C.BLUE MDSYS C.COUNTIES MDSYS C.FACILITY。 。 。MDSYS L.MAJOR STREET MDSYS L.MAJOR TOLL ROAD MDSYS L.MQ_ROAD2 MDSYS L.PH MDSYS L.POOR_ROADS MDSYS L.PTH MDSYS L.RAILROAD MDSYS L.RAMP MDSYS L.SH MDSYS L.STATE BOUNDARY。 。 。MDSYS M.REDSQ MDSYS M.SMALL TRIANGLE MDSYS M.STAR MDSYS M.TOWN HALL MDSYS M.TRIANGLE MDSYS T.AIRPORT NAME MDSYS T.CITY NAME MDSYS T.MAP TITLE MDSYS T.PARK NAME MDSYS T.RED STREET MDSYS T.道路名称MDSYS T.SHIELD1 MDSYS T.SHIELD2 MDSYS T.STATE NAME MDSYS T.STREET NAME。 。 。- 显示一种样式的类型，描述和XML定义。SET LONG 4000; SELECT owner，name，type，description，definition FROM all_sdo_styles WHERE name ='L.PH';所有者姓名类型描述------ ----- ------ ------------------ MDSYS L.PH LINE主要高速公路定义--- -------------------------------------------------- ---------------------- &lt;？xml version =“1.0”standalone =“yes”？&gt; &lt;svg width =“1in”height =“1in”&gt; &lt;desc&gt; &lt;/ desc&gt; &lt;g class =“line”style =“fill：＃33a9ff; stroke-width：4”&gt; &lt;line class =“parallel” style =“fill：#aa55cc; stroke-width：1.0”/&gt; &lt;/ g&gt; &lt;/ svg&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。">映射Visualizer元数据视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9636"></a><a id="JIMPV9635"></a><div class="props_rev_3"><a id="GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347" name="GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347"></a><h4 id="JIMPV-GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347" class="sect4"><span class="enumeration_section">2.9.2</span> xxx_SDO_THEMES视图</h4>
                  <div>
                     <p>USER_SDO_THEMES和ALL_SDO_THEMES视图具有<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347__BABDFIBG" title="xxx_SDO_THEMES视图">表2-4中</a>列出的列。
                     </p>
                     <div class="tblformal" id="GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347__BABDFIBG">
                        <p class="titleintable">表2-4 xxx_SDO_THEMES视图</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="xxx_SDO_THEMES视图" width="100%" border="1" summary="xxx_SDO_THEMES Views" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d7682e9021">列名称</th>
                                 <th align="left" valign="bottom" width="16%" id="d7682e9024">数据类型</th>
                                 <th align="left" valign="bottom" width="65%" id="d7682e9027">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9032" headers="d7682e9021 ">
                                    <p>所有者</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9032 d7682e9024 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9032 d7682e9027 ">
                                    <p>拥有主题的架构（仅限ALL_SDO_THEMES）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9042" headers="d7682e9021 ">
                                    <p>名称</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9042 d7682e9024 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9042 d7682e9027 ">
                                    <p>与主题相关联的唯一名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9052" headers="d7682e9021 ">
                                    <p>描述</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9052 d7682e9024 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9052 d7682e9027 ">
                                    <p>关于主题的可选描述性文本</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9062" headers="d7682e9021 ">
                                    <p>BASE_TABLE</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9062 d7682e9024 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9062 d7682e9027 ">
                                    <p>包含空间几何列的表或视图</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9072" headers="d7682e9021 ">
                                    <p>GEOMETRY_COLUMN</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9072 d7682e9024 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9072 d7682e9027 ">
                                    <p>空间几何列的名称（类型为SDO_GEOMETRY）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9082" headers="d7682e9021 ">
                                    <p>STYLING_RULES</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9082 d7682e9024 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9082 d7682e9027 ">
                                    <p>要定义与主题相关联的样式规则的XML定义</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。">映射Visualizer元数据视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9634"></a><a id="JIMPV9633"></a><div class="props_rev_3"><a id="GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC" name="GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC"></a><h4 id="JIMPV-GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC" class="sect4"><span class="enumeration_section">2.9.3</span> xxx_SDO_MAPS视图</h4>
                  <div>
                     <p>USER_SDO_MAPS和ALL_SDO_MAPS视图具有<a href="map-visualization-concepts.html#GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC__BABDABHB" title="xxx_SDO_MAPS视图">表2-5中</a>列出的列。
                     </p>
                     <div class="tblformal" id="GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC__BABDABHB">
                        <p class="titleintable">表2-5 xxx_SDO_MAPS视图</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="xxx_SDO_MAPS视图" width="100%" border="1" summary="xxx_SDO_MAPS Views" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d7682e9149">列名称</th>
                                 <th align="left" valign="bottom" width="16%" id="d7682e9152">数据类型</th>
                                 <th align="left" valign="bottom" width="65%" id="d7682e9155">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9160" headers="d7682e9149 ">
                                    <p>所有者</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9160 d7682e9152 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9160 d7682e9155 ">
                                    <p>拥有基本映射的模式（仅限ALL_SDO_MAPS）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9170" headers="d7682e9149 ">
                                    <p>名称</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9170 d7682e9152 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9170 d7682e9155 ">
                                    <p>与基本地图关联的唯一名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9180" headers="d7682e9149 ">
                                    <p>描述</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9180 d7682e9152 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9180 d7682e9155 ">
                                    <p>有关基本地图的可选描述性文字</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9190" headers="d7682e9149 ">
                                    <p>定义</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9190 d7682e9152 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9190 d7682e9155 ">
                                    <p>主题列表的XML定义及其与基本映射关联的比例值范围信息</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。">映射Visualizer元数据视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV10111"></a><a id="JIMPV10110"></a><div class="props_rev_3"><a id="GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF" name="GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF"></a><h4 id="JIMPV-GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF" class="sect4"><span class="enumeration_section">2.9.4</span> xxx_SDO_CACHED_MAPS视图</h4>
                  <div>
                     <p>USER_SDO_MAPS和ALL_SDO_MAPS视图具有<a href="map-visualization-concepts.html#GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF__CIHBEHHI" title="xxx_SDO_MAPS视图">表2-6中</a>列出的列。
                     </p>
                     <div class="tblformal" id="GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF__CIHBEHHI">
                        <p class="titleintable">表2-6 xxx_SDO_CACHED_MAPS视图</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="xxx_SDO_CACHED_MAPS视图" width="100%" border="1" summary="xxx_SDO_MAPS Views" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d7682e9257">列名称</th>
                                 <th align="left" valign="bottom" width="16%" id="d7682e9260">数据类型</th>
                                 <th align="left" valign="bottom" width="65%" id="d7682e9263">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9268" headers="d7682e9257 ">
                                    <p>名称</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9268 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9268 d7682e9263 ">
                                    <p>缓存的地图源的唯一名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9278" headers="d7682e9257 ">
                                    <p>描述</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9278 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9278 d7682e9263 ">
                                    <p>有关缓存的地图源的可选描述性文本</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9288" headers="d7682e9257 ">
                                    <p>TILES_TABLE</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9288 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9288 d7682e9263 ">
                                    <p>（目前未使用）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9298" headers="d7682e9257 ">
                                    <p>在线</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9298 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9298 d7682e9263 ">
                                    <p>如果地图图块层处于联机状态，则为<code class="codeph">YES</code>如果地图图块图层处于脱机状态，则为<code class="codeph">NO</code> 。当缓存中缺少图块并且地图图块层处于联机状态时，地图图块服务器将获取图块并将获取的图块返回给客户端。当缺少切片并且地图切片图层处于脱机状态时，地图切片服务器将不会获取切片但会将空白图像返回给客户端。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9313" headers="d7682e9257 ">
                                    <p>的Is_Internal</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9313 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9313 d7682e9263 ">
                                    <p>如果地图源是内部地图源，则为<code class="codeph">YES</code>如果地图源是外部地图源，则为<code class="codeph">NO</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9328" headers="d7682e9257 ">
                                    <p>定义</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9328 d7682e9260 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9328 d7682e9263 ">
                                    <p>地图切片图层的XML定义，如本节后面所述。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9338" headers="d7682e9257 ">
                                    <p>BASE_MAP</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9338 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9338 d7682e9263 ">
                                    <p>如果地图源是内部地图源，则缓存的地图可视化工基础地图的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9348" headers="d7682e9257 ">
                                    <p>MAP_ADAPTER</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9348 d7682e9260 ">
                                    <p>BLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9348 d7682e9263 ">
                                    <p>包含外部地图服务提供程序的适配器Java类的jar文件，如本节后面所述。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>有关使用USER_SDO_CACHED_MAPS视图的详细信息，请参阅<a href="map-visualization-servers.html#GUID-A144D404-681B-4BBE-A3FF-E9826A5DF605">映射平铺服务器配置</a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。">映射Visualizer元数据视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV10112"></a><div class="props_rev_3"><a id="GUID-F68E694A-F27A-4E89-9D65-D37D232C1254" name="GUID-F68E694A-F27A-4E89-9D65-D37D232C1254"></a><h3 id="JIMPV-GUID-F68E694A-F27A-4E89-9D65-D37D232C1254" class="sect3"><span class="enumeration_section">2.10</span> Oracle Maps</h3>
               <div>
                  <p>Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。它由来自服务器端和客户端的组件组成。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-F4F3B338-4BAA-4F43-A161-AC0401030231">Oracle Maps概述</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8">Oracle Maps应用程序的体系结构</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="本章介绍在使用地图可视化工具之前应该熟悉的概念。">映射可视化概念</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9780"></a><div class="props_rev_3"><a id="GUID-F4F3B338-4BAA-4F43-A161-AC0401030231" name="GUID-F4F3B338-4BAA-4F43-A161-AC0401030231"></a><h4 id="JIMPV-GUID-F4F3B338-4BAA-4F43-A161-AC0401030231" class="sect4"><span class="enumeration_section">2.10.1</span> Oracle Maps概述</h4>
                  <div>
                     <p>Oracle Maps包含以下主要组件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>地图图块服务器，用于在地图图像图块请求上高速缓存并提供预生成的地图图像图块</p>
                        </li>
                        <li>
                           <p>在客户端地图图像请求时，生成地图的地图服务器将空间数据形成到映射客户端</p>
                        </li>
                        <li>
                           <p>一种地图数据服务器，用于从空间数据提供程序向映射客户端提取空间数据</p>
                        </li>
                        <li>
                           <p>基于Ajax的JavaScript映射客户端。（Ajax是异步JavaScript和XML的首字母缩写。）该客户端提供浏览和与地图交互的功能，以及灵活的应用程序编程接口（API）。</p>
                        </li>
                     </ul>
                     <p>地图图块服务器（地图图像缓存引擎，在<a href="map-visualization-servers.html#GUID-7E88B130-FB2F-47D1-A8B2-909CFB1454AC" title="地图图块服务器是一种地图图像缓存引擎，用于获取，缓存和提供预生成的固定大小的地图图像图块。">地图图块服务器中</a>描述）自动获取和缓存由Oracle Spatial and Graph地图可视化工具或其他启用Web的地图提供程序呈现的地图图像图块。它还为客户端提供缓存的地图图像切片，这些客户端是使用Oracle Maps客户端API开发的Web应用程序。然后，客户端可以自动将多个地图图像切片拼接成无缝的大地图。由于地图图像切片通常是预生成和缓存的，因此应用程序用户将体验到快速的地图查看性能。
                     </p>
                     <p>JavaScript映射客户端是一个浏览器侧面图显示引擎，它从服务器获取地图内容，并将其呈现给客户端应用程序。它：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>从地图可视化服务器，第三方地图服务提供商或其本地磁盘存储中获取地图图像切片</p>
                        </li>
                        <li>
                           <p>从地图可视化服务器，第三方空间数据提供程序或其本地磁盘存储中检索空间数据，然后在客户端自动将空间数据呈现为地图图像</p>
                        </li>
                        <li>
                           <p>为应用程序提供可自定义的与地图相关的用户交互控件，例如地图拖动和单击</p>
                        </li>
                        <li>
                           <p>提供其他内置功能和实用程序，以自定义地图内容和地图布局设计</p>
                        </li>
                     </ul>
                     <p>JavaScript映射客户端可以轻松地与任何Web应用程序或门户集成。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-F68E694A-F27A-4E89-9D65-D37D232C1254" title="Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。它由来自服务器端和客户端的组件组成。">Oracle Maps</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9782"></a><a id="JIMPV9781"></a><div class="props_rev_3"><a id="GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8" name="GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8"></a><h4 id="JIMPV-GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8" class="sect4"><span class="enumeration_section">2.10.2</span> Oracle Maps应用程序的体系结构</h4>
                  <div>
                     <p><a href="map-visualization-concepts.html#GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8__BABEDCCG">图2-15</a>显示了使用Oracle Maps开发的Web制图应用程序的体系结构。
                     </p>
                     <div class="figure" id="GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8__BABEDCCG">
                        <p class="titleinfigure">图2-15 Oracle Maps应用程序的体系结构</p><img src="img/arch_omaps2.jpg" alt="下面是图2-15的描述" title="下面是图2-15的描述" longdesc="img_text/arch_omaps2.html"><br><a href="img_text/arch_omaps2.html">“图2-15 Oracle Maps应用程序架构”的说明</a></div>
                     <!-- class="figure" -->
                     <p>参考<a href="map-visualization-concepts.html#GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8__BABEDCCG">图2-15</a> ，应用程序与Oracle Maps架构交互，如下所示：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该应用程序是使用JavaScript开发的，它在Web浏览器的JavaScript引擎中运行。</p>
                        </li>
                        <li>
                           <p>应用程序调用JavaScript地图客户端从地图图块服务器获取地图图像图块，然后在Web浏览器中显示该图。</p>
                        </li>
                        <li>
                           <p>应用程序调用JavaScript地图客户端从服务器获取其他形式的地图服务（例如WMS和WMTS）中的地图图像，然后显示地图图像。</p>
                        </li>
                        <li>
                           <p>应用程序调用JavaScript地图客户端从地图数据服务器获取空间数据，然后呈现要显示的地图图像。</p>
                        </li>
                        <li>
                           <p>JavaScript地图客户端控制应用程序的与地图相关的用户交互。</p>
                        </li>
                        <li>
                           <p>当地图可视化服务器接收到地图图像请求时，该请求可以是其支持的几种类型之一：对其地图图块服务器的地图图像图块请求，对其地图服务器的地图图像请求，对其WMS服务器的WMS地图请求，或WMTS地图图像平铺请求到其WMTS服务器。每个请求都将由服务器相应地处理。</p>
                           <p>示例1：当地图图块服务器接收到地图图像图块请求时，它首先检查所请求的图块是否已被高速缓存。如果磁贴已经在缓存中，则缓存的磁贴将返回到客户端。如果磁贴不在缓存中，则映射磁贴服务器将磁贴提取到缓存中并将其返回给客户端。可以直接从地图可视化器地图渲染引擎或外部Web地图服务提供者获取平铺。</p>
                           <p>示例2：当服务器接收到地图服务器的地图图像请求（而不是地图图块请求）时，地图服务器呈现图像并将其返回给客户端。请注意，与地图图块服务器不同，地图服务器根据指定的数据边界生成地图，并将数据渲染到具有指定尺寸的图像上，但不会缓存地图图像。</p>
                        </li>
                        <li>
                           <p>当地图数据服务器接收到地图数据请求时，它检索空间数据并将空间数据而不是地图图像返回给客户端。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="map-visualization-concepts.html#GUID-F68E694A-F27A-4E89-9D65-D37D232C1254" title="Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。它由来自服务器端和客户端的组件组成。">Oracle Maps</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
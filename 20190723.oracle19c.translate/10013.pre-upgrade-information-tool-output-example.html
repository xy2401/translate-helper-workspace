<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="In this example, you can see how the Pre-Upgrade Information Tool displays recommended fixes, but does not carry out fixes automatically."></meta>
      <meta name="description" content="In this example, you can see how the Pre-Upgrade Information Tool displays recommended fixes, but does not carry out fixes automatically."></meta>
      <title>升级前信息工具输出示例</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Migrating Non-CDBs to New Hardware with the Same Operating System and for a New Release"></meta>
      <meta property="og:description" content="In this example, you can see how the Pre-Upgrade Information Tool displays recommended fixes, but does not carry out fixes automatically."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Migrating Non-CDBs to New Hardware with the Same Operating System and for a New Release"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="migrating-non-cdbs-new-hardware-same-operating-system-and-new-release.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-08T17:30:30-08:00"></meta>
      <meta name="dcterms.title" content="Migrating Non-CDBs to New Hardware with the Same Operating System and for a New Release"></meta>
      <meta name="dcterms.dateCopyrighted" content="2018, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F10898-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="evaluate-dependencies-and-add-acls-for-net-util-packages.html" title="Previous" type="text/html"></link>
      <link rel="next" href="enabling-oracle-db-vault-after-upgrading-oracle-db.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="SPMSU"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="evaluate-dependencies-and-add-acls-for-net-util-packages.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="enabling-oracle-db-vault-after-upgrading-oracle-db.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">使用相同的操作系统和新版本将非CDB迁移到新硬件</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="preparing-to-upgrade.html" property="item" typeof="WebPage"><span property="name">准备升级Oracle数据库</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-the-pre-upgrade-information-tool-for-oracle-db.html" property="item" typeof="WebPage"><span property="name">使用Oracle数据库的升级前信息工具</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">升级前信息工具输出示例</li>
            </ol>
            <a id="GUID-0C496815-1826-4E28-8437-36FA549000F9" name="GUID-0C496815-1826-4E28-8437-36FA549000F9"></a>
            
            <h2 id="SPMSU-GUID-0C496815-1826-4E28-8437-36FA549000F9" class="sect2">升级前信息工具输出示例</h2>
         </header>
         <div class="ind">
            <div>
               <p>在此示例中，您可以看到升级前信息工具如何显示建议的修复程序，但不会自动执行修复。</p>
               <p>您可以控制修复脚本的运行方式和时间。</p>
               <p>以下示例显示了通过在版本12.2.0.1 CDB上运行Oracle Database 18c升级前信息工具生成并写入<code>preupgrade.log</code>的输出：</p><pre class="pre codeblock"><code>$ java -jar preupgrade.jar TEXT TERMINAL由Oracle数据库升级前信息工具版本18.0.0.0.0在2018-06-13T15：08：45生成的报告升级到版本：18.0.0.0.0 ===== ==================================升级前数据库的状态========= ==============================数据库名称：CDB2容器名称：CDB $ ROOT容器ID：1版本：12.2.0.1。 0兼容：12.2.0 Blocksize：8192平台：Linux x86 64位时区文件：26数据库日志模式：NOARCHIVELOG Readonly：FALSE版本：EE Oracle组件升级操作当前状态------------- --- -------------- -------------- Oracle Server [待升级] VALID JServer JAVA虚拟机[待升级] VALID Oracle XDK for Java [待升级] VALID Real Application Clusters [待升级] OPTION OFF Oracle Workspace Manager [待升级] VALID Oracle Label Security [待升级] VALID Oracle XML数据库[待升级] VALID Oracle Java包[待升级] VALID ============== BEFOR升级==============要求采取的行动================无推荐行动============= ====== 1。运行12.2.0.1.0 $ ORACLE_HOME / rdbms / admin / utlrp.sql以重新编译无效对象。您可以使用SET SERVEROUTPUT ON查看各个无效对象; EXECUTE DBMS_PREUP.INVALID_OBJECTS; 3个对象是INVALID。在数据库升级之前，SYS / SYSTEM或用户模式中不应有INVALID对象。2。查看并删除任何不必要的HIDDEN / UNDERSCORE参数。该数据库包含以下名称以下划线开头的初始化参数：_exclude_seed_cdb_view在数据库升级之前删除隐藏的参数，除非您的应用程序供应商和/或Oracle Support状态不同。需要在pfile / spfile中进行更改。3。（AUTOFIXUP）使用以下命令收集非高峰时间数据库升级之前的过时数据字典统计信息：EXECUTE DBMS_STATS.GATHER_DICTIONARY_STATS;字典统计信息不存在或过时（不是最新的）。字典统计有助于Oracle优化器找到有效的SQL执行计划，对于正确的升级时序至关重要。Oracle建议在数据库升级之前的最近24小时内收集字典统计信息。有关管理优化程序统计信息的信息，请参阅“12.2.0.1 Oracle数据库SQL调优指南”。仅提供信息================ 4。为了帮助您跟踪表空间分配，以下AUTOEXTEND表空间应在升级过程中成功扩展。最小尺寸表空间大小升级---------- ---------- ----------- SYSAUX 550 MB 616 MB系统700 MB 1117 MB TEMP 22 MB 150 MB UNDOTBS1 315 MB 433 MB用于升级的最小表空间大小是估计值。5。无需任何行动。使用默认并行升级选项，具有1个PDB的此CDB将首先升级CDB $ ROOT，然后使用每个PDB 2个并行进程一次升级最多1个PDB。可以按照“数据库升级指南”中的说明调整并行升级的PDB数量和每个PDB的并行进程数。ORACLE生成的修补脚本=============================数据库CDB2容器CDB $ ROOT中的所有问题，上面都标识为BEFORE UPGRADE“（AUTOFIXUP）”可以通过从容器SQL&gt; @ / u01 / app / oracle / cfgtoollogs / CDB2 / preupgrade / preupgrade_fixups.sql =============中执行以下内容来解决。升级=============要求采取的行动================无推荐行动=============== ==== 6。使用DBMS_DST包升级数据库时区文件。数据库使用时区文件版本26，目标18.0.0.0.0版本附带时区文件版本31。Oracle建议升级到所需（最新）版本的时区文件。有关更多信息，请参阅“18.0.0.0.0 Oracle数据库全球化支持指南”中的“使用时区数据升级时区文件和时间戳”。7。（AUTOFIXUP）使用以下命令在升级后收集字典统计信息：EXECUTE DBMS_STATS.GATHER_DICTIONARY_STATS; Oracle建议在升级后收集字典统计信息。字典统计为Oracle优化器提供了必要的信息，以帮助它找到有效的SQL执行计划。数据库升级后，需要重新收集统计信息，因为现在可能存在在升级期间发生重大更改的表或尚未收集统计信息的新表。8。在升级后以及使用以下命令在系统上存在代表性工作负载时收集有关固定对象的统计信息：EXECUTE DBMS_STATS.GATHER_FIXED_OBJECTS_STATS;所有preupgrade运行都会给出此建议。固定对象统计信息为Oracle优化器提供基本信息，以帮助其找到有效的SQL执行计划。这些统计信息特定于生成它们的Oracle数据库版本，并且可能在数据库升级时过时。有关管理优化程序统计信息的信息，请参阅“12.2.0.1 Oracle数据库SQL调优指南”。ORACLE生成的修补脚本=============================数据库CDB2容器CDB $ ROOT中的所有问题，上面标识为AFTER UPGRADE“（AUTOFIXUP）”可以通过在容器SQL&gt; @ / u01 / app / oracle / cfgtoollogs / CDB2 / preupgrade / postupgrade_fixups.sql中执行以下内容来解决：Oracle Database升级前信息工具版本18.0.0.0生成的报告.0在2018-06-13T15：08：58升级到版本：18.0.0.0.0 ============================ ===========升级前数据库的状态================================ =======数据库名称：CDB2容器名称：PDB $ SEED容器ID：2版本：12.2.0.1.0兼容：12.2.0 Blocksize：8192平台：Linux x86 64位时区文件：26数据库日志模式：NOARCHIVELOG Readonly：TRUE Edition：EE Oracle组件升级操作当前状态---------------- -------------- ------ -------- Oracle Server [待升级] VALID Real Application Clusters [待升级] OPTION OFF Oracle Workspace Manager [待升级] VALID Oracle XML数据库[待升级] VALID ==============升级之前==============要求的行动=== =============无推荐行动=================== 1。运行12.2.0.1.0 $ ORACLE_HOME / rdbms / admin / utlrp.sql以重新编译无效对象。您可以使用SET SERVEROUTPUT ON查看各个无效对象; EXECUTE DBMS_PREUP.INVALID_OBJECTS; 6个对象是INVALID。在数据库升级之前，SYS / SYSTEM或用户模式中不应有INVALID对象。2。查看并删除任何不必要的HIDDEN / UNDERSCORE参数。该数据库包含以下名称以下划线开头的初始化参数：_exclude_seed_cdb_view在数据库升级之前删除隐藏的参数，除非您的应用程序供应商和/或Oracle Support状态不同。需要在pfile / spfile中进行更改。3。（AUTOFIXUP）使用以下命令收集非高峰时间数据库升级之前的过时数据字典统计信息：EXECUTE DBMS_STATS.GATHER_DICTIONARY_STATS;字典统计信息不存在或过时（不是最新的）。字典统计有助于Oracle优化器找到有效的SQL执行计划，对于正确的升级时序至关重要。Oracle建议在数据库升级之前的最近24小时内收集字典统计信息。有关管理优化程序统计信息的信息，请参阅“12.2.0.1 Oracle数据库SQL调优指南”。4。（AUTOFIXUP）在升级之前收集有关固定对象的统计信息。没有固定对象表收集了统计信息。在升级之前，建议收集有关固定对象的统计信息（如果尚未收集）。有关管理优化程序统计信息的信息，请参阅“12.2.0.1 Oracle数据库SQL调优指南”。仅提供信息================ 5。为了帮助您跟踪表空间分配，以下AUTOEXTEND表空间应在升级过程中成功扩展。最小尺寸表空间大小升级---------- ---------- ----------- SYSAUX 235 MB 500 MB系统210 MB 584 MB TEMP 20 MB 150 MB UNDOTBS1 210 MB 412 MB用于升级的最小表空间大小是估计值。6。无需任何行动。使用默认并行升级选项，具有1个PDB的此CDB将首先升级CDB $ ROOT，然后使用每个PDB 2个并行进程一次升级最多1个PDB。可以按照“数据库升级指南”中的说明调整并行升级的PDB数量和每个PDB的并行进程数。ORACLE生成的修补脚本=============================数据库CDB2容器PDB $ SEED中的所有问题，上面都标识为BEFORE UPGRADE“（AUTOFIXUP）”可以通过在容器SQL&gt; @ / u01 / app / oracle / cfgtoollogs / CDB2 / preupgrade / preupgrade_fixups.sql =============中执行以下内容来解决。升级=============要求采取的行动================无推荐行动=============== ==== 7。使用DBMS_DST包升级数据库时区文件。数据库使用时区文件版本26，目标18.0.0.0.0版本附带时区文件版本31。Oracle建议升级到所需（最新）版本的时区文件。有关更多信息，请参阅“18.0.0.0.0 Oracle数据库全球化支持指南”中的“使用时区数据升级时区文件和时间戳”。8。（AUTOFIXUP）使用以下命令在升级后收集字典统计信息：EXECUTE DBMS_STATS.GATHER_DICTIONARY_STATS; Oracle建议在升级后收集字典统计信息。字典统计为Oracle优化器提供了必要的信息，以帮助它找到有效的SQL执行计划。数据库升级后，需要重新收集统计信息，因为现在可能存在在升级期间发生重大更改的表或尚未收集统计信息的新表。9。在升级后以及使用以下命令在系统上存在代表性工作负载时收集有关固定对象的统计信息：EXECUTE DBMS_STATS.GATHER_FIXED_OBJECTS_STATS;所有preupgrade运行都会给出此建议。固定对象统计信息为Oracle优化器提供基本信息，以帮助其找到有效的SQL执行计划。这些统计信息特定于生成它们的Oracle数据库版本，并且可能在数据库升级时过时。有关管理优化程序统计信息的信息，请参阅“12.2.0.1 Oracle数据库SQL调优指南”。ORACLE GENERATED FIXUP SCRIPT =============================数据库CDB2容器PDB $ SEED中的所有问题，上面标识为AFTER UPGRADE“（AUTOFIXUP）”可以通过在容器SQL&gt; @ / u01 / app / oracle / cfgtoollogs / CDB2 / preupgrade / postupgrade_fixups.sql ==============中执行以下操作来解决。 ==== PREUPGRADE SUMMARY ================== /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/preupgrade.log / u01 / app / oracle / cfgtoollogs / CDB2 /pregrade/preupgrade_fixups.sql /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/postupgrade_fixups.sql在整个CDB上执行修复脚本：升级前：1。使用以下命令执行preupgrade fixups $ ORACLE_HOME / perl / bin / perl -I $ ORACLE_HOME / perl / lib -I $ ORACLE_HOME / rdbms / admin $ ORACLE_HOME / rdbms / admin / catcon.pl -l / u01 / app / oracle / cfgtoollogs / CDB2 / preupgrade / -b preup_CDB2 /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/preupgrade_fixups.sql 2。查看/ u01 / app / oracle / cfgtoollogs / CDB2 / preupgrade /下的日志：升级后：1。使用以下命令执行postupgrade fixups $ ORACLE_HOME / perl / bin / perl -I $ ORACLE_HOME / perl / lib -I $ ORACLE_HOME / rdbms / admin $ ORACLE_HOME / rdbms / admin / catcon.pl -l / u01 / app / oracle / cfgtoollogs / CDB2 / preupgrade / -b postup_CDB2 /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/postupgrade_fixups.sql 2。在/ u01 / app / oracle / cfgtoollogs / CDB2 / preupgrade / Preupgrade完成后查看日志：2018-06-13T15：09：00</code></pre></div>
            <div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="using-the-pre-upgrade-information-tool-for-oracle-db.html#GUID-C0219AF1-AD43-4097-B358-E53E48958647" title="查看这些主题以了解并使用升级前信息工具（preupgrade.jar）。">使用Oracle数据库的升级前信息工具</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>
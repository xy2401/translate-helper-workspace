<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>在Java应用程序中使用Real Application Security</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-security-administrators-and-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:21:48-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2012, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95725-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-data-security.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-fusion-middleware-integration-with-real-application-security.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBFSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-data-security.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-fusion-middleware-integration-with-real-application-security.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Security管理员和开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在Java应用程序中使用Real Application Security</li>
            </ol>
            <a id="GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181" name="GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181"></a><a id="DBFSG99844"></a>
            
            <h2 id="DBFSG-GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181" class="sect2"><span class="enumeration_chapter">6</span>在Java应用程序中使用Real Application Security</h2>
         </header>
         <div class="ind">
            <div>
               <div class="p">本章介绍如何在Java应用程序中使用Real Application Security。本章包含以下部分：<ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-F003B955-1845-41BE-B818-02CDC6231EBA">关于初始化中间层</a></p>
                     </li>
                     <li>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-BC164147-DE1C-4E73-84B7-715540C5FC88">关于管理Real Application Security会话</a></p>
                     </li>
                     <li>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F">使用Java API验证应用程序用户</a></p>
                     </li>
                     <li>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-A3A5BE47-E770-4206-8DA8-4A9D70FA89E3">关于使用ACL授权应用程序用户</a></p>
                     </li>
                     <li>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3">人力资源管理用例：用Java实现</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBFSG99845"></a><div class="props_rev_3"><a id="GUID-F003B955-1845-41BE-B818-02CDC6231EBA" name="GUID-F003B955-1845-41BE-B818-02CDC6231EBA"></a><h3 id="DBFSG-GUID-F003B955-1845-41BE-B818-02CDC6231EBA" class="sect3">关于初始化中间层</h3>
               <div>
                  <p><code class="codeph">XSSessionManager</code>类管理会话的生命周期。它提供了创建，附加，分配，分离和销毁会话的方法。它还提供了执行缓存活动的方法。
                  </p>
                  <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315">关于中间层配置模式</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-565444BC-7235-4E94-9D67-B6640330B958">使用getSessionManager方法</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-910C7955-080E-4DD2-9C6E-4B4FFF61FEEE">关于更改中间层缓存设置</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG464"></a><div class="props_rev_3"><a id="GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315" name="GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315"></a><h4 id="DBFSG-GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315" class="sect4">关于中间层配置模式</h4>
                  <div>
                     <p>您可以使用<a id="d28828e385" class="indexterm-anchor"></a>一个中间层配置模式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Dispatcher模式 - 获取具有调度程序连接的会话管理器</p>
                        </li>
                     </ul>
                     <p>在调度程序模式下，调度程序用户必须具有会话管理和缓存访问权限。应用程序用户不需要任何会话或缓存权限。可以将两个预定义的数据库角色<code class="codeph">xs_session_admin</code>和<code class="codeph">xs_cache_admin</code>授予调度程序。
                     </p>
                     <p>为了获得最佳安全实践，应该为应用程序用户提供最少的权限，因此调度程序模式是建议的中间层配置。</p>
                  </div>
               </div><a id="DBFSG462"></a><a id="DBFSG463"></a><a id="DBFSG99848"></a><a id="DBFSG99846"></a><div class="props_rev_3"><a id="GUID-565444BC-7235-4E94-9D67-B6640330B958" name="GUID-565444BC-7235-4E94-9D67-B6640330B958"></a><h4 id="DBFSG-GUID-565444BC-7235-4E94-9D67-B6640330B958" class="sect4">使用getSessionManager方法</h4>
                  <div>
                     <div class="section">
                        <p>有一种方法可以使会话管理器遵循<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315">关于中间层配置模式</a> ” <a href="using-real-application-security-in-java-applications.html#GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315">中</a></span>描述的<span class="q"><a href="using-real-application-security-in-java-applications.html#GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315">中间层配置模式</a></span> ：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>传递调度程序用户的连接或连接池。通过这种方式，所需的权限被授予调度程序。<code class="codeph">xs_session_admin</code>两个预定义角色<code class="codeph">xs_session_admin</code>和<code class="codeph">xs_cache_admin</code>授予调度程序用户。调度程序用户是直接登录Real Application Security用户。
                              </p>
                           </li>
                        </ul>
                        <p>使用调度程序模式，您可以通过获取会话管理器的实例来启动Real Application Security中间层（请参阅<a href="using-real-application-security-in-java-applications.html#GUID-565444BC-7235-4E94-9D67-B6640330B958__BGBGGGIC">示例6-1</a> ）。使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">getSessionManager</code>方法（粗体字）获取会话管理器的实例。此方法使用单个连接或连接池初始化Real Application Security会话管理器。<code class="codeph">getSessionManager</code>方法的调用者应具有Java身份验证和授权服务（JAAS）权限<code class="codeph">XSSecurityPermission("initSecurityManager")</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-565444BC-7235-4E94-9D67-B6640330B958__BGBJBIGB">
                        <p class="subhead3" id="GUID-565444BC-7235-4E94-9D67-B6640330B958__GUID-6C0162EE-0531-4A66-BDDE-550C195E2772">会话管理器的权限</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Real Application Security会话管理器使用特权用户的连接进行初始化，该特权用户代表常规Real Application Security应用程序用户授权会话操作。如果会话管理器具有会话操作权限，则会话管理器下的每个应用程序用户不需要具有会话操作权限，并且应用程序用户的会话操作可以作为可信方执行。会话管理器授权连接的会话操作，因此您无需将<code class="codeph">createSession</code>和<code class="codeph">attachToSession</code>权限直接授予常规Real Application Security应用程序用户。此会话管理员必须具有以下权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Real Application Security数据库对象权限，用于管理中间层中的缓存数据。</p>
                           </li>
                           <li>
                              <p>会话生命周期管理权限，以便会话管理器代表Real Application Security应用程序用户和外部用户创建或附加会话。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-565444BC-7235-4E94-9D67-B6640330B958__GUID-2C6CCE2C-C4C2-42A7-9E5B-B898DD15E5CC">会话管理器的角色</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>会话管理器需要以下两个角色才能拥有<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-565444BC-7235-4E94-9D67-B6640330B958__BGBJBIGB">会话管理器</a></span>权限”中提到的<span class="q"><a href="using-real-application-security-in-java-applications.html#GUID-565444BC-7235-4E94-9D67-B6640330B958__BGBJBIGB">权限</a></span> ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>具有以下权限的数据库角色<code class="codeph">xs_cache_admin</code> ：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>查询Real Application Security实体和同步元数据的权限</p>
                                 </li>
                                 <li>
                                    <p>权限执行密钥交换的代码</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>实际的应用程序安全性的作用， <code class="codeph">xs_session_admin</code> ，与<code class="codeph">ADMIN_SESSION</code>特权</p>
                           </li>
                        </ul>
                        <p>这些角色是在系统中预定义的。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-565444BC-7235-4E94-9D67-B6640330B958__BGBGGGIC">
                        <p class="titleinexample">示例6-1如何使用单个连接在Java中获取会话管理器的实例</p><pre class="oac_no_warn" dir="ltr">静态XSSessionManager管理器; static Connection dispatcherConn = null; int cacheMaxIdleTime = 30; int cacheMaxsize = 2048000;字符串主机;字符串端口; String sid; ...dispatcherConn = DriverManager.getConnection（“jdbc：oracle：thin：@”+ host +“：”+ port +“：”+ sid，dispatcherUser，dispatcherPassword）; ...
<span class="bold">manager = XSSessionManager.getSessionManager（dispatcherConn，cacheMaxIdleTime，cacheMaxsize）;</span>
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG99849"></a><div class="props_rev_3"><a id="GUID-910C7955-080E-4DD2-9C6E-4B4FFF61FEEE" name="GUID-910C7955-080E-4DD2-9C6E-4B4FFF61FEEE"></a><h4 id="DBFSG-GUID-910C7955-080E-4DD2-9C6E-4B4FFF61FEEE" class="sect4">关于更改中间层缓存设置</h4>
                  <div>
                     <p>初始化会话管理器后，它会开始将一些数据（如ACL和Security类信息）添加到缓存中。可以重用此缓存数据。使用默认设置初始化缓存，以后可以更改。</p>
                     <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-7F9509F7-6BFF-449B-A817-95E7969CAB73">关于设置最大缓存空闲时间</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-AA44F843-8DB3-470C-9BF6-B82B86E4666E">关于设置最大缓存大小</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-52D7EF79-6554-4086-B62E-9AEBFD6F0C50">关于获取最大缓存空闲时间</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-8692B1EC-5636-4D40-A16C-39FB49C02456">关于获取最大缓存大小</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-5328F766-CB95-4B39-AA3B-7D95C611EE44">关于从缓存中删除条目</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-8101F9C6-43ED-4209-AB56-F28DEB35FC9E">关于清除缓存</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DBFSG99850"></a><div class="props_rev_3"><a id="GUID-7F9509F7-6BFF-449B-A817-95E7969CAB73" name="GUID-7F9509F7-6BFF-449B-A817-95E7969CAB73"></a><h5 id="DBFSG-GUID-7F9509F7-6BFF-449B-A817-95E7969CAB73" class="sect5">关于设置最大缓存空闲时间</h5>
                     <div>
                        <p>设置<a id="d28828e899" class="indexterm-anchor"></a>最大缓存空闲时间，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">setCacheMaxIdleTime</code>方法。<code class="codeph">setCacheMaxIdleTime</code>方法设置缓存无需更新即可运行的最大分钟数。
                        </p>
                        <p>如果尝试从缓存中获取对象并且<code class="codeph">XSSessionManager</code>没有调用<code class="codeph">updateCache</code>方法一段时间等于<code class="codeph">setCacheMaxIdleTime</code>方法设置的值，那么在返回任何对象之前，会强制调用<code class="codeph">updateCache</code>方法来检查所有缓存的对象仍然有效。<code class="codeph">setCacheMaxIdleTime</code>方法的调用者必须具有JAAS权限<code class="codeph">XSSecurityPermission("setCacheMaxIdleTime")</code> 。
                        </p>
                     </div>
                  </div><a id="DBFSG99851"></a><div class="props_rev_3"><a id="GUID-AA44F843-8DB3-470C-9BF6-B82B86E4666E" name="GUID-AA44F843-8DB3-470C-9BF6-B82B86E4666E"></a><h5 id="DBFSG-GUID-AA44F843-8DB3-470C-9BF6-B82B86E4666E" class="sect5">关于设置最大缓存大小</h5>
                     <div>
                        <p>设置<a id="d28828e1050" class="indexterm-anchor"></a>最大缓存大小，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">setCacheMaxSize</code>方法。此方法设置中间层上的缓存大小。
                        </p>
                        <p>缓存的默认大小为10MB。最小缓存大小为1MB。 <code class="codeph">setCacheMaxSize</code>方法的调用者必须具有JAAS权限<code class="codeph">XSSecurityPermission("setCacheMaxSize")</code> 。
                        </p>
                     </div>
                  </div><a id="DBFSG99852"></a><div class="props_rev_3"><a id="GUID-52D7EF79-6554-4086-B62E-9AEBFD6F0C50" name="GUID-52D7EF79-6554-4086-B62E-9AEBFD6F0C50"></a><h5 id="DBFSG-GUID-52D7EF79-6554-4086-B62E-9AEBFD6F0C50" class="sect5">关于获取最大缓存空闲时间</h5>
                     <div>
                        <p>得到的<a id="d28828e1186" class="indexterm-anchor"></a>最大缓存空闲时间，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">getCacheMaxIdleTime</code>方法。此方法返回缓存没有<code class="codeph">updateCache</code>调用以更新缓存的最大分钟数。<code class="codeph">getCachemaxIdleTime</code>方法的调用者必须具有JAAS权限<code class="codeph">XSSecurityPermission("getCacheMaxIdleTime")</code> 。
                        </p>
                     </div>
                  </div><a id="DBFSG99853"></a><div class="props_rev_3"><a id="GUID-8692B1EC-5636-4D40-A16C-39FB49C02456" name="GUID-8692B1EC-5636-4D40-A16C-39FB49C02456"></a><h5 id="DBFSG-GUID-8692B1EC-5636-4D40-A16C-39FB49C02456" class="sect5">关于获取最大缓存大小</h5>
                     <div>
                        <p>得到的<a id="d28828e1323" class="indexterm-anchor"></a>最大缓存大小，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">getCacheMaxSize</code>方法。此方法以字节为单位返回缓存的最大大小。<code class="codeph">getCacheMaxSize</code>方法的调用者必须具有JAAS权限XSSecurityPermission（“getCacheMaxSize”）。
                        </p>
                     </div>
                  </div><a id="DBFSG99854"></a><div class="props_rev_2"><a id="GUID-5328F766-CB95-4B39-AA3B-7D95C611EE44" name="GUID-5328F766-CB95-4B39-AA3B-7D95C611EE44"></a><h5 id="DBFSG-GUID-5328F766-CB95-4B39-AA3B-7D95C611EE44" class="sect5">关于从缓存中删除条目</h5>
                     <div>
                        <p>为了从缓存中删除条目，使用缓存逐出算法以及水印级别。水印级别确定数据在被删除之前应保留在内存缓存中的时间。当高速缓存大小达到高水印时，高速缓存逐出算法移除条目，直到高速缓存大小达到低水印。</p>
                        <div class="p">本节介绍从缓存中删除条目的以下活动：<ul style="list-style-type:disc">
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-2F0EB720-4ADB-40D7-8738-B7B95EBC2DB7">关于设置WaterMark</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-0B74A41C-A241-42F5-9B25-92BB70C85578">关于获得High WaterMark</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-B39AE5D8-E06F-4E5C-BC25-12151461A58D">关于获得低水标记</a></p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="DBFSG99855"></a><div class="props_rev_3"><a id="GUID-2F0EB720-4ADB-40D7-8738-B7B95EBC2DB7" name="GUID-2F0EB720-4ADB-40D7-8738-B7B95EBC2DB7"></a><h6 id="DBFSG-GUID-2F0EB720-4ADB-40D7-8738-B7B95EBC2DB7" class="sect6">关于设置WaterMark</h6>
                        <div>
                           <p>设置<a id="d28828e1590" class="indexterm-anchor"></a>水印，使用<code class="codeph">XSSessionManager</code>类中的<code class="codeph">setWaterMark</code>方法。<code class="codeph">setWaterMark</code>方法的调用者必须具有JAAS权限<code class="codeph">XSSecurityPermission("setWaterMark")</code> 。
                           </p>
                        </div>
                     </div><a id="DBFSG99856"></a><div class="props_rev_3"><a id="GUID-0B74A41C-A241-42F5-9B25-92BB70C85578" name="GUID-0B74A41C-A241-42F5-9B25-92BB70C85578"></a><h6 id="DBFSG-GUID-0B74A41C-A241-42F5-9B25-92BB70C85578" class="sect6">关于获得High WaterMark</h6>
                        <div>
                           <p>得到的<a id="d28828e1723" class="indexterm-anchor"></a>缓存的高水印，使用<code class="codeph">XSSessionManager</code>类中的<code class="codeph">getHighWaterMark</code>方法。
                           </p>
                        </div>
                     </div><a id="DBFSG99857"></a><div class="props_rev_3"><a id="GUID-B39AE5D8-E06F-4E5C-BC25-12151461A58D" name="GUID-B39AE5D8-E06F-4E5C-BC25-12151461A58D"></a><h6 id="DBFSG-GUID-B39AE5D8-E06F-4E5C-BC25-12151461A58D" class="sect6">关于获得低水标记</h6>
                        <div>
                           <p>得到的<a id="d28828e1851" class="indexterm-anchor"></a>缓存的低水印，使用<a id="d28828e1858" class="indexterm-anchor"></a>来自<code class="codeph">XSSessionManager</code>类的<code class="codeph">getLowWaterMark</code>方法。
                           </p>
                        </div>
                     </div>
                  </div><a id="DBFSG99858"></a><div class="props_rev_3"><a id="GUID-8101F9C6-43ED-4209-AB56-F28DEB35FC9E" name="GUID-8101F9C6-43ED-4209-AB56-F28DEB35FC9E"></a><h5 id="DBFSG-GUID-8101F9C6-43ED-4209-AB56-F28DEB35FC9E" class="sect5">关于清除缓存</h5>
                     <div>
                        <p>清除缓存<a id="d28828e1983" class="indexterm-anchor"></a>明确地从中间层，使用<a id="d28828e1990" class="indexterm-anchor"></a> <code class="codeph">XSSessionManager</code>类的<code class="codeph">clearCache</code>方法。此方法显式清除中间层的共享缓存。<code class="codeph">clearCache</code>方法的调用者必须具有JAAS权限<code class="codeph">XSSecurityPermission("clearCache")</code> 。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="DBFSG99861"></a><div class="props_rev_3"><a id="GUID-BC164147-DE1C-4E73-84B7-715540C5FC88" name="GUID-BC164147-DE1C-4E73-84B7-715540C5FC88"></a><h3 id="DBFSG-GUID-BC164147-DE1C-4E73-84B7-715540C5FC88" class="sect3">关于管理Real Application Security会话</h3>
               <div>
                  <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E">创建Real Application Security用户会话</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A">附加应用程序会话</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9">分配或切换应用程序用户</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-930E5B82-A24B-482C-BCB6-44113251D5C8">启用Real Application Security应用程序角色</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-6ED38345-63A3-490E-84A6-037C42B3164F">关于以会话用户身份执行命名空间操作</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-1A982585-B7E7-4AB7-92F3-B5B07C240AF8">关于执行其他与会话相关的活动</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B">分离应用程序会话</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004">销毁真实应用程序安全应用程序会话</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG99863"></a><a id="DBFSG99862"></a><div class="props_rev_3"><a id="GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E" name="GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E"></a><h4 id="DBFSG-GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E" class="sect4">创建Real Application Security用户会话</h4>
                  <div>
                     <div class="section">
                        <p>创建一个实时应用安全用户会话，例如， <code class="codeph">lws</code> ，应用程序用户<code class="codeph">lwuser</code> ，使用<code class="codeph">createSession</code>所述的方法<code class="codeph">XSSessionManager</code>类（参见<a href="using-real-application-security-in-java-applications.html#GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E__BGBJJCCB">实施例6-2</a> ）。<code class="codeph">createSession</code>方法（粗体字）。使用传递的指定参数在服务器上创建会话。执行此操作需要数据库往返。
                        </p>
                        <p>要创建匿名的Real Application Security应用程序会话，请使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">createAnonymousSession</code>方法。此会话的应用程序用户是预定义的匿名用户，因此在此方法中不传递任何用户参数。
                        </p>
                        <p>这两种方法都支持使用cookie和命名空间。</p>
                        <p>作为参数传递的cookie可用于在将来的调用中标识新创建的Real Application Security应用程序会话，直到cookie值更改或会话被销毁。</p>
                        <p>作为参数传递的名称空间可用于在会话中创建名称空间。有关详细信息，请参阅<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-6ED38345-63A3-490E-84A6-037C42B3164F">关于将会话空间操作作为会话用户执行</a> ”</span> 。
                        </p>
                        <p>可以重新分配特定应用程序用户以接管此会话。在这种情况下，仍然保留匿名用户的某些会话状态。有关详细信息，请参阅<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9">分配或切换应用程序用户</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E__BGBJJCCB">
                        <p class="titleinexample">示例6-2如何使用Java创建实际应用程序安全性会话</p><pre class="oac_no_warn" dir="ltr">Session lws = null;静态XSSessionManager管理器; static Connection lwsConn = null; static String user =“lwuser”; String cookie =“nst”; ...
<span class="bold">lws = manager.createSession（lwsConn，user，cookie，null）;</span> ...
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG466"></a><a id="DBFSG467"></a><a id="DBFSG465"></a><div class="props_rev_3"><a id="GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A" name="GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A"></a><h4 id="DBFSG-GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A" class="sect4">附加应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>附加申请<a id="d28828e2450" class="indexterm-anchor"></a> session，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">attachSession</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__BABJCJBI">例6-3</a> ）。<code class="codeph">attachSession</code>方法（粗体字体）将JDBC连接附加到指定的Real Application Security应用程序会话对象。它还启用或禁用动态应用程序角色，创建会话的命名空间以及设置身份验证时间。
                        </p>
                        <p>您还可以使用ID或cookie附加到会话，如<a href="using-real-application-security-in-java-applications.html#GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__CHDIHFHI">例6-4</a>所示。有关使用cookie附加到会话的另一个示例，请参见<a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__CHDBGHHC">示例7-2</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__BABJCJBI">
                        <p class="titleinexample">示例6-3如何使用Java附加Real Application Security会话</p><pre class="oac_no_warn" dir="ltr">Session lws = null; static Connection lwsConn = null;静态XSSessionManager管理器; static String user =“lwuser”; String cookie =“lwscookie”; List &lt;String&gt; edynamicRoles = new ArrayList &lt;String&gt;（）; edynamicRoles.add（ “EDYNROLE001”）; edynamicRoles.add（ “EDYNROLE002”）; List &lt;String&gt; ddynamicRoles = new ArrayList &lt;String&gt;（）; ddynamicRoles.add（ “DDYNROLE001”）; ddynamicRoles.add（ “DDYNROLE002”）; ...lws = manager.createSession（lwsConn，user，cookie，null）; <span class="bold">manager.attachSession（lwsConn，lws，edynamicRoles，ddynamicRoles，null，new Timestamp（System.currentTimeMillis（）））;</span>
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__CHDIHFHI">
                        <p class="titleinexample">示例6-4如何使用Cookie附加</p><pre class="oac_no_warn" dir="ltr">Session lws = null; static Connection lwsConn = null;静态XSSessionManager管理器; ...lws = manager.attachSessionByCookie（lwsConn，“myCookie”，null，null，null，null，null）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG471"></a><a id="DBFSG472"></a><a id="DBFSG470"></a><div class="props_rev_3"><a id="GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9" name="GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9"></a><h4 id="DBFSG-GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9" class="sect4">分配或切换应用程序用户</h4>
                  <div>
                     <div class="section">
                        <p>如果您有匿名会话，则可以稍后将其重新分配给其他应用程序用户。否则，如果您的会话已分配给应用程序用户，则可以将会话切换到另一个应用程序用户。在任何一种情况下，必须首先附加会话，然后才能分配或切换应用程序用户。</p>
                        <p>要为以前的匿名应用程序用户指定名称，请使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">assignUser</code>方法（请参见<a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABJABAB">示例6-5</a> ）。<code class="codeph">assignUser</code>方法（粗体字体） <code class="codeph">assignUser</code>上下文（用户和角色）更改为给定用户（例如<code class="codeph">lwuser</code> ，但保留现有命名空间。它也可以通过任何给定的动态角色和命名空间参数同时更改会话，方法与<code class="codeph">attachSession</code>方法相同。除非通过另一个调用删除它们，否则关联的会话属性仍然有效。
                        </p>
                        <p>要将会话用户从命名用户（非匿名）更改为另一个命名用户，请使用Session对象的<code class="codeph">switchUser</code>方法。
                        </p>
                        <p>禁用在附加会话时分配的任何保留动态应用程序角色的请求。仅当新应用程序用户也包含在新应用程序用户的动态应用程序角色列表中时，才会保留动态应用程序角色。除非重置会话属性列表，否则关联的会话属性仍然有效。</p>
                        <p>此方法将会话上下文（用户和角色）更改为目标用户（有关角色更改的详细信息，请参阅<span class="q">“ <a href="configuring-application-sessions.html#GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3">将当前应用程序用户切换到当前应用程序会话中的另一个应用程序用户</a> ”</span> ），但默认情况下<span class="italic">不</span>保留现有命名空间。如果要保留现有命名空间，可以使用Session对象的<code class="codeph">switchUserKeepState</code>方法。它也可以通过任何给定的动态角色和命名空间参数同时更改会话，方法与<code class="codeph">attachSession</code>方法相同。
                        </p>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABDIGAE">例6-6</a>演示了如何将应用程序用户从<code class="codeph">lwuser</code>到<code class="codeph">lwuser1</code> 。<code class="codeph">switchUser</code>方法以粗体字体显示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABJABAB">
                        <p class="titleinexample">示例6-5如何使用Java将应用程序用户分配给会话</p><pre class="oac_no_warn" dir="ltr">Session lws = null;静态XSSessionManager管理器; static String user =“lwuser”; ...
<span class="bold">manager.assignUser（lws，user，null，null，null，new Timestamp（System.currentTimeMillis（）））;</span>
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABDIGAE">
                        <p class="titleinexample">示例6-6如何使用Java在会话中切换应用程序用户</p><pre class="oac_no_warn" dir="ltr">Session lws = null; Vector &lt;String&gt; listOfNamespaces; static String user =“lwuser”; List &lt;String&gt; nslist1 = new ArrayList &lt;String&gt;（）; ...manager.assignUser（lws，user，nslist1，nslist2，nslist3，new Timestamp（System.currentTimeMillis（）））; ...
<span class="bold">lws.switchUser（ “lwuser1”，listOfNamespaces）;</span>
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG473"></a><div class="props_rev_3"><a id="GUID-930E5B82-A24B-482C-BCB6-44113251D5C8" name="GUID-930E5B82-A24B-482C-BCB6-44113251D5C8"></a><h4 id="DBFSG-GUID-930E5B82-A24B-482C-BCB6-44113251D5C8" class="sect4">启用Real Application Security应用程序角色</h4>
                  <div>
                     <div class="section">
                        <p>Real Application Security应用程序角色是一个角色，只能授予Real Application Security应用程序用户或其他Real Application Security应用程序角色。Real Application Security应用程序角色通过数据库角色授予数据库权限。数据库权限被授予数据库角色，而后者又被授予Real Application Security应用程序角色。有关Real Application Security应用程序用户和应用程序角色的更多信息，请参阅<span class="q">“ <a href="indroducing-oracle-database-real-application-security.html#GUID-75ECE2BF-08EE-451E-B303-43DB307382F6">Principals：Users and Roles</a> ”</span> 。
                        </p>
                        <div class="p">本节介绍与应用程序角色关联的以下操作：<ul style="list-style-type:disc">
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-51C12565-C2CE-4406-8152-3D67D4001A9B">启用Real Application Security应用程序角色</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9">禁用Real Application Security应用程序角色</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7">检查是否启用了真正的应用程序安全应用程序角色</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DBFSG475"></a><a id="DBFSG474"></a><div class="props_rev_3"><a id="GUID-51C12565-C2CE-4406-8152-3D67D4001A9B" name="GUID-51C12565-C2CE-4406-8152-3D67D4001A9B"></a><h5 id="DBFSG-GUID-51C12565-C2CE-4406-8152-3D67D4001A9B" class="sect5">启用Real Application Security应用程序角色</h5>
                     <div>
                        <div class="section">
                           <p>启用Real Application Security应用程序<a id="d28828e2935" class="indexterm-anchor"></a>授予当前应用程序用户会话的角色，使用<code class="codeph">Session</code>接口的<code class="codeph">enableRole</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-51C12565-C2CE-4406-8152-3D67D4001A9B__BABIFEGI">例6-7</a> ）。
                           </p>
                           <p>如果当前禁用了特定的应用程序角色，则<code class="codeph">enableRole</code>方法（粗体字体）无效。此操作需要数据库往返。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-51C12565-C2CE-4406-8152-3D67D4001A9B__BABIFEGI">
                           <p class="titleinexample">示例6-7如何在Java中启用Real Application Security应用程序角色</p><pre class="oac_no_warn" dir="ltr">静态会话lws;静态角色r1; ...r1 =新角色（“HROLE1”，null，0）; <span class="bold">lws.enableRole（R1）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG477"></a><a id="DBFSG476"></a><div class="props_rev_3"><a id="GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9" name="GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9"></a><h5 id="DBFSG-GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9" class="sect5">禁用Real Application Security应用程序角色</h5>
                     <div>
                        <div class="section">
                           <p>禁用Real Application Security <a id="d28828e3077" class="indexterm-anchor"></a>授予当前用户会话的应用程序角色，使用<code class="codeph">Session</code>接口的<code class="codeph">disableRole</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9__BABJJGHA">例6-8</a> ）。此操作需要数据库往返。<code class="codeph">disableRole</code>方法以粗体字体表示。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9__BABJJGHA">
                           <p class="titleinexample">示例6-8如何在Java中禁用实际应用程序安全应用程序角色</p><pre class="oac_no_warn" dir="ltr">静态会话lws;静态角色r1; ...r1 =新角色（“HROLE1”，null，0）; lws.enableRole（R1）; ...
<span class="bold">lws.disableRole（R1）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG479"></a><a id="DBFSG478"></a><div class="props_rev_3"><a id="GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7" name="GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7"></a><h5 id="DBFSG-GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7" class="sect5">检查是否启用了真正的应用程序安全应用程序角色</h5>
                     <div>
                        <div class="section">
                           <p>测试指定的应用程序<a id="d28828e3218" class="indexterm-anchor"></a>在Real Application Security应用程序会话中启用角色，使用<a id="d28828e3223" class="indexterm-anchor"></a> <code class="codeph">Session</code>接口的<code class="codeph">isRoleEnabled</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7__BABDCGIJ">例6-9</a> ）。<code class="codeph">isRoleEnabled</code>方法以粗体字体表示。
                           </p>
                           <p>此方法没有关联的数据库操作。您必须具有<code class="codeph">administerSession</code> Real Application Security应用程序特权才能调用此方法。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7__BABDCGIJ">
                           <p class="titleinexample">示例6-9如何测试是否在Java中启用了真正的应用程序安全应用程序角色</p><pre class="oac_no_warn" dir="ltr">静态会话lws; ...lws.enableRole（ “HROLE1”）; ...
<span class="bold">boolean b = lws.isRoleEnabled（“HROLE1”）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="DBFSG99901"></a><div class="props_rev_3"><a id="GUID-6ED38345-63A3-490E-84A6-037C42B3164F" name="GUID-6ED38345-63A3-490E-84A6-037C42B3164F"></a><h4 id="DBFSG-GUID-6ED38345-63A3-490E-84A6-037C42B3164F" class="sect4">关于以会话用户身份执行命名空间操作</h4>
                  <div>
                     <p>命名空间是会话上下文的一组附加属性。应用程序使用命名空间来存储应用程序定义的属性 - 值对。当前会话用户应具有<code class="codeph">MODIFY_NAMESPACE</code> （用于名称空间）和<code class="codeph">MODIFY_ATTRIBUTE</code> （用于属性）应用程序权限。有关命名空间的更多信息，请参阅<span class="q">“ <a href="configuring-application-sessions.html#GUID-0B1ED666-0401-4050-BE4E-EF375752A39B">关于使用命名空间模板创建命名空间</a> ”</span> 。
                     </p>
                     <div class="p">本节介绍如何执行以下活动：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304">创建命名空间</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-07954A29-1F53-4609-9F69-7A883972E6D0">删除命名空间</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2">隐式创建命名空间</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-D7FC21CA-68C1-4890-80BF-379C0D7445FC">关于使用命名空间属性</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DBFSG99903"></a><a id="DBFSG99902"></a><div class="props_rev_3"><a id="GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304" name="GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304"></a><h5 id="DBFSG-GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304" class="sect5">创建命名空间</h5>
                     <div>
                        <div class="section">
                           <p>要在Java中创建命名空间，请使用<code class="codeph">Session</code>接口的<code class="codeph">createNamespace</code>方法（请参阅<a href="using-real-application-security-in-java-applications.html#GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304__BGBEFDHB">示例6-10</a> ）。<code class="codeph">createNamespace</code>方法（以粗体字体表示）创建一个新的会话命名空间<a id="d28828e3527" class="indexterm-anchor"></a>使用名称与指定名称匹配的名称空间模板文档。如果在模板文档中指定了事件处理程序，则指定的事件处理程序将应用于使用该模板创建的所有名称空间。
                           </p>
                           <div class="infoboxnote" id="GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304__GUID-ED2842BE-9C6F-4A3F-B52D-95EFEB92C2B9">
                              <p class="notep1">注意：</p>
                              <p>您还可以通过使用前面部分中讨论的<code class="codeph">createSession</code>和<code class="codeph">attachSession</code>方法将名称空间名称作为参数传递来创建名称空间。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304__BGBEFDHB">
                           <p class="titleinexample">示例6-10如何在Java中创建命名空间</p><pre class="oac_no_warn" dir="ltr">Session lws = null; ...
<span class="bold">SessionNamespace ns = lws.createNamespace（“TESTNS1”）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG99927"></a><a id="DBFSG99926"></a><div class="props_rev_3"><a id="GUID-07954A29-1F53-4609-9F69-7A883972E6D0" name="GUID-07954A29-1F53-4609-9F69-7A883972E6D0"></a><h5 id="DBFSG-GUID-07954A29-1F53-4609-9F69-7A883972E6D0" class="sect5">删除命名空间</h5>
                     <div>
                        <div class="section">
                           <p>删除一个<a id="d28828e3665" class="indexterm-anchor"></a> Java中的命名空间，使用<code class="codeph">Session</code>接口的<code class="codeph">deleteNamespace</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-07954A29-1F53-4609-9F69-7A883972E6D0__BGBEIACD">例6-11</a> ）。<code class="codeph">deleteNamespace</code>方法（粗体字体）从会话中删除命名空间。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-07954A29-1F53-4609-9F69-7A883972E6D0__BGBEIACD">
                           <p class="titleinexample">示例6-11如何在Java中删除命名空间</p><pre class="oac_no_warn" dir="ltr">Session lws = null; ...SessionNamespace ns = lws.createNamespace（“TESTNS1”）; ...
<span class="bold">lws.deleteNamespace（ “TESTNS1”）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG99905"></a><a id="DBFSG99904"></a><div class="props_rev_3"><a id="GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2" name="GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2"></a><h5 id="DBFSG-GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2" class="sect5">隐式创建命名空间</h5>
                     <div>
                        <div class="section">
                           <p>隐含地<a id="d28828e3806" class="indexterm-anchor"></a>创建名称空间对象以表示会话名称空间，使用<code class="codeph">Session</code>接口的<code class="codeph">getNamespace</code>方法（请参阅<a href="using-real-application-security-in-java-applications.html#GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2__BGBCDFGB">示例6-12</a> ）。<code class="codeph">getNamespace</code>方法以粗体字体表示。如果指定的命名空间已存在，则抛出错误。
                           </p>
                           <p>要检索命名空间的String表示形式，请使用<a id="d28828e3824" class="indexterm-anchor"></a> <code class="codeph">SessionNamespace</code>接口的<code class="codeph">toString</code>方法。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2__BGBCDFGB">
                           <p class="titleinexample">示例6-12如何在Java中隐式创建命名空间</p><pre class="oac_no_warn" dir="ltr">Session lws = null; ...
<span class="bold">SessionNamespace ns2 = lws.getNamespace（“TESTNS1”）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG99909"></a><div class="props_rev_3"><a id="GUID-D7FC21CA-68C1-4890-80BF-379C0D7445FC" name="GUID-D7FC21CA-68C1-4890-80BF-379C0D7445FC"></a><h5 id="DBFSG-GUID-D7FC21CA-68C1-4890-80BF-379C0D7445FC" class="sect5">关于使用命名空间属性</h5>
                     <div>
                        <p>会话命名空间管理单个应用程序模块在会话期间存储的属性。会话命名空间将属性存储在单个命名空间，一组访问控制限制或单个事件处理程序过程中，该过程调度该命名空间的属性更改事件。</p>
                        <div class="p">本节介绍如何执行以下活动：<ul style="list-style-type:disc">
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57">创建会话命名空间属性</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-BEF803A4-9CE4-4F82-B31A-FFC5C1C0E567">关于设置会话命名空间属性</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2">获取会话命名空间属性</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E">列出属性</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29">重置属性</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-4679C940-38C5-4013-997A-7A4D45184508">删除属性</a></p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="DBFSG99911"></a><a id="DBFSG99910"></a><div class="props_rev_3"><a id="GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57" name="GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57"></a><h6 id="DBFSG-GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57" class="sect6">创建会话命名空间属性</h6>
                        <div>
                           <div class="section">
                              <p>创建一个<a id="d28828e4105" class="indexterm-anchor"></a> Java中的session namespace属性，使用<code class="codeph">SessionNamespace</code>接口的<code class="codeph">createAttribute</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57__BGBGEEGH">例6-13</a> ）。<code class="codeph">createAttribute</code>方法（粗体字体）在命名空间中创建一个新属性。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57__BGBGEEGH">
                              <p class="titleinexample">示例6-13如何在Java中创建会话命名空间属性</p><pre class="oac_no_warn" dir="ltr">String name1 =“empid'; String value1 =”JB007“; SessionNamespace ns; ...
<span class="bold">SessionNamespaceAttribute sa1 = ns.createAttribute（name1，value1）;</span> ...
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="DBFSG480"></a><div class="props_rev_3"><a id="GUID-BEF803A4-9CE4-4F82-B31A-FFC5C1C0E567" name="GUID-BEF803A4-9CE4-4F82-B31A-FFC5C1C0E567"></a><h6 id="DBFSG-GUID-BEF803A4-9CE4-4F82-B31A-FFC5C1C0E567" class="sect6">关于设置会话命名空间属性</h6>
                        <div>
                           <p>设置一个<a id="d28828e4243" class="indexterm-anchor"></a> Java中的session namespace属性，使用<code class="codeph">SessionNamespace</code>接口的<code class="codeph">setAttribute</code>方法。
                           </p>
                        </div>
                     </div><a id="DBFSG99913"></a><a id="DBFSG99912"></a><div class="props_rev_3"><a id="GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2" name="GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2"></a><h6 id="DBFSG-GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2" class="sect6">获取会话命名空间属性</h6>
                        <div>
                           <div class="section">
                              <p>要检索<a id="d28828e4371" class="indexterm-anchor"></a> Java中的会话命名空间属性，使用<code class="codeph">SessionNamespace</code>接口的<code class="codeph">getAttribute</code>方法（请参见<a href="using-real-application-security-in-java-applications.html#GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2__BGBFFFAD">例6-14</a> ）。<code class="codeph">getAttribute</code>方法（粗体字体）返回其名称指定为参数的属性。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2__BGBFFFAD">
                              <p class="titleinexample">示例6-14如何在Java中检索会话命名空间属性</p><pre class="oac_no_warn" dir="ltr">String name =“empid'; String value =”JB007“; SessionNamespace ns; ...SessionNamespaceAttribute sa = ns.createAttribute（name，value）; ...
<span class="bold">String attrvalue = ns.getAttribute（“empid”）。getValue（）;</span> <span class="bold">ns.getAttribute（ “EMPID”）的setValue（ “NEWVALUE”）;</span> ...
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="DBFSG99921"></a><a id="DBFSG99920"></a><div class="props_rev_3"><a id="GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E" name="GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E"></a><h6 id="DBFSG-GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E" class="sect6">列出属性</h6>
                        <div>
                           <div class="section">
                              <p>列出属性<a id="d28828e4514" class="indexterm-anchor"></a>在命名空间中，使用<code class="codeph">SessionNamespace</code>接口的<code class="codeph">listAttributes</code>方法（请参见<a href="using-real-application-security-in-java-applications.html#GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E__BGBFJEAC">例6-15</a> ）。<code class="codeph">listAttributes</code>方法（粗体字体）返回命名空间中属性名称的集合</p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E__BGBFJEAC">
                              <p class="titleinexample">示例6-15如何在Java中列出属性</p><pre class="oac_no_warn" dir="ltr">String name1 =“empid'; String value1 =”JB007“; SessionNamespace ns; ...SessionNamespaceAttribute sa1 = ns.createAttribute（name1，value1）; ...
<span class="bold">for（Enumeration e = ns.listAttributes（）; e.hasMoreElements（）;）</span> {System.out.println（“ - ”+ e.nextElement（））; } ...
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="DBFSG99923"></a><a id="DBFSG99922"></a><div class="props_rev_3"><a id="GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29" name="GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29"></a><h6 id="DBFSG-GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29" class="sect6">重置属性</h6>
                        <div>
                           <div class="section">
                              <p>要重置<a id="d28828e4654" class="indexterm-anchor"></a>在Java中使用属性，使用<code class="codeph">SessionNamespace</code>接口的<code class="codeph">resetAttribute</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29__BGBIEIGE">例6-16</a> ）。<code class="codeph">resetAttribute</code>方法（粗体字体）将名称空间中的属性重置为其默认值。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29__BGBIEIGE">
                              <p class="titleinexample">示例6-16如何在Java中重置属性</p><pre class="oac_no_warn" dir="ltr">String name1 =“empid'; String value1 =”JB007“; SessionNamespace ns; ...SessionNamespaceAttribute sa1 = ns.createAttribute（name1，value1）; ...
<span class="bold">ns.resetAttribute（ “EMPID”）;</span> ...
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="DBFSG99925"></a><a id="DBFSG99924"></a><div class="props_rev_3"><a id="GUID-4679C940-38C5-4013-997A-7A4D45184508" name="GUID-4679C940-38C5-4013-997A-7A4D45184508"></a><h6 id="DBFSG-GUID-4679C940-38C5-4013-997A-7A4D45184508" class="sect6">删除属性</h6>
                        <div>
                           <div class="section">
                              <p>删除<a id="d28828e4795" class="indexterm-anchor"></a> Java中的一个属性，使用<a id="d28828e4800" class="indexterm-anchor"></a> <code class="codeph">deleteAttribute</code>所述的方法<code class="codeph">SessionNamespace</code>接口（参见<a href="using-real-application-security-in-java-applications.html#GUID-4679C940-38C5-4013-997A-7A4D45184508__BGBHJDED">实施例6-17</a> ）。<code class="codeph">deleteAttribute</code>方法（粗体字体）删除命名空间中的特定属性。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-4679C940-38C5-4013-997A-7A4D45184508__BGBHJDED">
                              <p class="titleinexample">示例6-17如何在Java中删除属性</p><pre class="oac_no_warn" dir="ltr">String name1 =“empid'; String value1 =”JB007“; SessionNamespace ns; ...SessionNamespaceAttribute sa1 = ns.createAttribute（name1，value1）; ...
<span class="bold">ns.deleteAttribute（ “EMPID”）;</span> ...
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div>
                  </div>
               </div><a id="DBFSG682"></a><div class="props_rev_3"><a id="GUID-ED231373-C97C-436C-9EF1-BDC33D723B9D" name="GUID-ED231373-C97C-436C-9EF1-BDC33D723B9D"></a><h4 id="DBFSG-GUID-ED231373-C97C-436C-9EF1-BDC33D723B9D" class="sect4">关于将命名空间操作作为会话管理器执行</h4>
                  <div>
                     <p>每个命名空间都有一个关联的ACL，用于确定谁可以操作命名空间及其属性。如果应用程序不希望当前会话用户操作命名空间，但允许会话管理器执行此操作，则可以将其作为会话管理器<code class="codeph">XSSessionManager</code>来完成。
                     </p>
                     <p><code class="codeph">XSSessionManager</code>有一组重载方法作为Session来管理命名空间。其用法类似于<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-6ED38345-63A3-490E-84A6-037C42B3164F">关于以会话用户身份执行命名空间操作</a> ”</span>中为会话用户所描述的用法。
                     </p>
                     <p>请注意，会话管理器实例<code class="codeph">XSSessionManager</code>可能不适用于应用程序代码;只有受信任的基础架构层才能使用会话管理器来操作这样一个安全的命名空间。
                     </p>
                  </div>
               </div><a id="DBFSG481"></a><div class="props_rev_3"><a id="GUID-1A982585-B7E7-4AB7-92F3-B5B07C240AF8" name="GUID-1A982585-B7E7-4AB7-92F3-B5B07C240AF8"></a><h4 id="DBFSG-GUID-1A982585-B7E7-4AB7-92F3-B5B07C240AF8" class="sect4">关于执行其他与会话相关的活动</h4>
                  <div>
                     <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-1076C1C0-E2AB-42EE-BE5B-9E0D696ADC76">关于获取与会话关联的Oracle连接</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-20026189-D342-40D1-8629-462020DD4D67">关于获取会话的应用程序用户标识</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7">获取会话的会话ID</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-27784741-9900-41B7-9D35-4D7866D26D4B">关于获取会话的字符串表示形式</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6">获取会话Cookie</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-8481DB9B-7085-4F2B-8C96-27A81F18CEFA">将会话不活动超时设置为会话管理器</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-23E01854-C532-4A86-AB09-B4C10342410D">将会话Cookie设置为会话管理器</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DBFSG482"></a><div class="props_rev_3"><a id="GUID-1076C1C0-E2AB-42EE-BE5B-9E0D696ADC76" name="GUID-1076C1C0-E2AB-42EE-BE5B-9E0D696ADC76"></a><h5 id="DBFSG-GUID-1076C1C0-E2AB-42EE-BE5B-9E0D696ADC76" class="sect5">关于获取与会话关联的Oracle连接</h5>
                     <div>
                        <p>获取Oracle连接<a id="d28828e5217" class="indexterm-anchor"></a>与会话相关联，如果它当前绑定到一个会话，则使用<code class="codeph">Session</code>接口的<code class="codeph">getConnection</code>方法。
                        </p>
                     </div>
                  </div><a id="DBFSG483"></a><div class="props_rev_3"><a id="GUID-20026189-D342-40D1-8629-462020DD4D67" name="GUID-20026189-D342-40D1-8629-462020DD4D67"></a><h5 id="DBFSG-GUID-20026189-D342-40D1-8629-462020DD4D67" class="sect5">关于获取会话的应用程序用户标识</h5>
                     <div>
                        <p>获得申请<a id="d28828e5342" class="indexterm-anchor"></a>特定会话的用户标识符（ID），使用<code class="codeph">Session</code>接口的<code class="codeph">getUserId</code>方法。
                        </p>
                        <p>要检查会话的应用程序用户是否是匿名的，请使用<code class="codeph">Session</code>接口的<code class="codeph">isAnonymous</code>方法。
                        </p>
                     </div>
                  </div><a id="DBFSG485"></a><a id="DBFSG484"></a><div class="props_rev_3"><a id="GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7" name="GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7"></a><h5 id="DBFSG-GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7" class="sect5">获取会话的会话ID</h5>
                     <div>
                        <div class="section">
                           <p>获得会议<a id="d28828e5478" class="indexterm-anchor"></a>特定会话的标识符（ID），使用<code class="codeph">Session</code>接口的<code class="codeph">getId</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7__BABJIIIH">例6-18</a> ）。<code class="codeph">getId</code>方法以粗体字体表示。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7__BABJIIIH">
                           <p class="titleinexample">示例6-18如何使用Java获取会话的会话ID</p><pre class="oac_no_warn" dir="ltr">Session lws = null; ...
<span class="bold">System.out.println（“会话ID为”+ lws.getId（））;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG488"></a><div class="props_rev_3"><a id="GUID-27784741-9900-41B7-9D35-4D7866D26D4B" name="GUID-27784741-9900-41B7-9D35-4D7866D26D4B"></a><h5 id="DBFSG-GUID-27784741-9900-41B7-9D35-4D7866D26D4B" class="sect5">关于获取会话的字符串表示形式</h5>
                     <div>
                        <p>获取String表示形式<a id="d28828e5616" class="indexterm-anchor"></a>在会话中，使用<code class="codeph">Session</code>接口的<code class="codeph">toString</code>方法。
                        </p>
                     </div>
                  </div><a id="DBFSG493"></a><a id="DBFSG492"></a><div class="props_rev_3"><a id="GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6" name="GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6"></a><h5 id="DBFSG-GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6" class="sect5">获取会话Cookie</h5>
                     <div>
                        <div class="section">
                           <p>获得安全会话<a id="d28828e5743" class="indexterm-anchor"></a>用于会话的cookie，使用<code class="codeph">Session</code>接口的<code class="codeph">getSessionCookie</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6__BABBGHHH">例6-19</a> ）。<code class="codeph">getSessionCookie</code>方法以粗体字体表示。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6__BABBGHHH">
                           <p class="titleinexample">示例6-19如何使用Java获取安全会话Cookie</p><pre class="oac_no_warn" dir="ltr">静态会话lws; ...
<span class="bold">System.out.println（lws.getSessionCookie（））</span> ;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG489"></a><div class="props_rev_3"><a id="GUID-8481DB9B-7085-4F2B-8C96-27A81F18CEFA" name="GUID-8481DB9B-7085-4F2B-8C96-27A81F18CEFA"></a><h5 id="DBFSG-GUID-8481DB9B-7085-4F2B-8C96-27A81F18CEFA" class="sect5">将会话不活动超时设置为会话管理器</h5>
                     <div>
                        <div class="section">
                           <p>设置超时<a id="d28828e5883" class="indexterm-anchor"></a>会话，使用<a id="d28828e5888" class="indexterm-anchor"></a> <code class="codeph">SessionManager</code>接口的<code class="codeph">setInactivityTimeout</code>方法。此方法以分钟为单位设置会话超时。
                           </p>
                           <p><code class="codeph">setInactivityTimeout</code>方法会覆盖正常的会话超时配置。方法是：</p><pre class="oac_no_warn" dir="ltr">sessionManager.setInactivityTimeout（Session session，int minutes）;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DBFSG491"></a><a id="DBFSG490"></a><div class="props_rev_3"><a id="GUID-23E01854-C532-4A86-AB09-B4C10342410D" name="GUID-23E01854-C532-4A86-AB09-B4C10342410D"></a><h5 id="DBFSG-GUID-23E01854-C532-4A86-AB09-B4C10342410D" class="sect5">将会话Cookie设置为会话管理器</h5>
                     <div>
                        <div class="section">
                           <p>设置安全<a id="d28828e6021" class="indexterm-anchor"></a>会话cookie用于会话，使用<a id="d28828e6026" class="indexterm-anchor"></a> <code class="codeph">SessionManager</code>接口的<code class="codeph">setCookie</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-23E01854-C532-4A86-AB09-B4C10342410D__BABJJBHF">例6-20</a> ）。<code class="codeph">setCookie</code>方法（粗体字体）返回用于此会话的安全会话cookie。方法是：</p><pre class="oac_no_warn" dir="ltr">sessionManager.setCookie（LWS “newCookieValue”）;</pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-23E01854-C532-4A86-AB09-B4C10342410D__BABJJBHF">
                           <p class="titleinexample">示例6-20如何使用Java设置安全会话Cookie</p><pre class="oac_no_warn" dir="ltr">静态XSSessionManager管理器; ...
<span class="bold">manager.sessionManager.setCookie（lws，“巧克力片”）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="DBFSG469"></a><a id="DBFSG468"></a><div class="props_rev_3"><a id="GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B" name="GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B"></a><h4 id="DBFSG-GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B" class="sect4">分离应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>分离Real Application Security <a id="d28828e6167" class="indexterm-anchor"></a> Java中的应用程序会话，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">detachSession</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B__BABJFIGH">例6-21</a> ）。<code class="codeph">detachSession</code>方法（粗体字）分离其接受的对象作为参数的会话。<code class="codeph">detachSession</code>方法调用在数据库级别提交请求中的所有更改。执行此操作需要数据库往返。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B__BABJFIGH">
                        <p class="titleinexample">示例6-21如何使用Java分离实际应用程序安全会话</p><pre class="oac_no_warn" dir="ltr">Session lws = null;静态XSSessionManager管理器; static Connection lwsConn = null; static String user =“lwuser”;字符串cookie; ...lws = manager.createSession（lwsConn，user，cookie，null）; manager.attachSession（lwsConn，lws，null，null，null，new Timestamp（System.currentTimeMillis（）））; ...
<span class="bold">manager.detachSession（LWS）;</span> ...
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG99866"></a><a id="DBFSG99865"></a><div class="props_rev_3"><a id="GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004" name="GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004"></a><h4 id="DBFSG-GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004" class="sect4">销毁真实应用程序安全应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>摧毁<a id="d28828e6312" class="indexterm-anchor"></a>使用Java中的Real Application Security应用程序会话，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">destroySession</code>方法（请参见<a href="using-real-application-security-in-java-applications.html#GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004__BGBIJIFH">示例6-22</a> ）。<code class="codeph">destroySession</code>方法（粗体字体）接受数据库连接对象和会话对象作为参数。调用此方法后，无法再从任何JVM访问已销毁的会话。需要数据库往返来执行此操作以及创建会话。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004__BGBIJIFH">
                        <p class="titleinexample">示例6-22如何在Java中销毁实际应用程序安全会话</p><pre class="oac_no_warn" dir="ltr">Session lws = null; static Connection lwsConn = null;静态XSSessionManager管理器; static String user =“lwuser”;字符串cookie; ...lws = manager.createSession（lwsConn，user，cookie，null）; manager.attachSession（lwsConn，lws，null，null，null，new Timestamp（System.currentTimeMillis（）））; ...manager.detachSession（LWS）; <span class="bold">manager.destroySession（lwsConn，lws）;</span> ...
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="DBFSG99938"></a><a id="DBFSG99937"></a><div class="props_rev_3"><a id="GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F" name="GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F"></a><h3 id="DBFSG-GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F" class="sect3">使用Java API验证应用程序用户</h3>
               <div>
                  <div class="section">
                     <p>验证应用程序<a id="d28828e6453" class="indexterm-anchor"></a>用户是应用程序所需的主要安全功能。<code class="codeph">XSAuthenticationModule</code>类用于验证应用程序用户。<code class="codeph">XSAuthenticationModule</code>类的<code class="codeph">authenticate</code>方法用于验证应用程序用户凭据（请参见<a href="using-real-application-security-in-java-applications.html#GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F__BGBJHDID">示例6-23</a> ）。<code class="codeph">authenticate</code>方法以粗体字体表示。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F__BGBJHDID">
                     <p class="titleinexample">示例6-23如何使用Java验证应用程序用户</p><pre class="oac_no_warn" dir="ltr">boolean authOk = false; String dbUser; String passwd;字符串主机;字符串端口; String sid; ...
<span class="bold">authOk = XSAuthenticationModule.authenticate（host +“：”+ port +“：”+ sid，dbUser，passwd）;</span> ...
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBFSG99928"></a><div class="props_rev_3"><a id="GUID-A3A5BE47-E770-4206-8DA8-4A9D70FA89E3" name="GUID-A3A5BE47-E770-4206-8DA8-4A9D70FA89E3"></a><h3 id="DBFSG-GUID-A3A5BE47-E770-4206-8DA8-4A9D70FA89E3" class="sect3">关于使用ACL授权应用程序用户</h3>
               <div>
                  <p>授权是应用程序所需的另一个主要安全功能。在Real Application Security中，授权策略包括访问控制列表（ACL）和应用程序权限。它们在Real Application Security数据库中定义，并在中间层的缓存中进行管理。应用程序权限是数据权限。数据权限用于定义函数或操作对数据的访问。一旦函数将连接附加到会话，任何通过连接传递的查询都将由数据库服务器自动强制执行。</p>
                  <div class="p"><code class="codeph">AclId</code>类提供了各种方法来执行以下操作：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1">构造ACL标识符</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747">使用checkAcl方法</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-AF830025-6F45-4E53-9506-6F6260AF6F4B">关于获取与特定ACL关联的数据权限</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG497"></a><a id="DBFSG99929"></a><div class="props_rev_3"><a id="GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1" name="GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1"></a><h4 id="DBFSG-GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1" class="sect4">构造ACL标识符</h4>
                  <div>
                     <div class="section">
                        <p>构建一个<a id="d28828e6735" class="indexterm-anchor"></a>访问控制列表（ACL）标识符，使用<code class="codeph">AclId</code>类的重载参数化构造函数之一（请参见<a href="using-real-application-security-in-java-applications.html#GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1__BGBDEFAE">示例6-24</a> ）。如果要从原始二进制数据构造ACL标识符，请使用以下构造函数：</p><pre class="oac_no_warn" dir="ltr">public AclId（byte [] raw）</pre><p>调用此构造函数时，将创建使用从查询的<code class="codeph">ora_get_aclids</code>运算符返回的原始二进制文件的ACL标识符。
                        </p>
                        <p>如果要从内部ACL标识符构造ACL标识符，请使用以下构造函数：</p><pre class="oac_no_warn" dir="ltr">public AclId（java.util。名单&lt;java.lang中。长&gt; ids）</pre><p>调用此构造函数时，它会使用内部ACL标识符创建ACL标识符。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1__BGBDEFAE">
                        <p class="titleinexample">示例6-24如何构造ACL标识符</p><pre class="oac_no_warn" dir="ltr">Session lws = null; static byte [] aclRaw; ...AclId id = new AclId（aclRaw）; boolean ret = lws.checkAcl（aclRaw，“UPDATE_INFO”）; ...</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG498"></a><a id="DBFSG99934"></a><div class="props_rev_3"><a id="GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747" name="GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747"></a><h4 id="DBFSG-GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747" class="sect4">使用checkAcl方法</h4>
                  <div>
                     <div class="section">
                        <p>检查一个或多个ACL <a id="d28828e6879" class="indexterm-anchor"></a>对于指定的数据权限，请使用<code class="codeph">XSAccessController</code>类的<code class="codeph">checkAcl</code>方法。根据<code class="codeph">AclId</code>对象中定义的一个或多个ACL检查数据特权。只有在ACL中授予所有数据权限时， <code class="codeph">checkAcl</code>方法才返回<code class="codeph">true</code> 。请务必注意，不需要在单个ACL中授予所有权限。使用<code class="codeph">checkAcl</code>方法需要一个会话，如<a href="using-real-application-security-in-java-applications.html#GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747__BGBCBEIA">例6-25</a>所示。
                        </p>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747__BGBCBEIA">例6-25</a>演示了如何获取与数据特权<code class="codeph">privileges22</code>相关联的ACL。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747__BGBCBEIA">
                        <p class="titleinexample">示例6-25如何获取指定数据权限的ACL</p><pre class="oac_no_warn" dir="ltr">boolean ret; Session lws = null; AclId id2 = new AclId（ids）; List &lt;String&gt; privileges22 = new ArrayList &lt;String&gt;（）; ...ret = XSAccessController.checkAcl（lws，id2，privileges22）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG99936"></a><div class="props_rev_3"><a id="GUID-AF830025-6F45-4E53-9506-6F6260AF6F4B" name="GUID-AF830025-6F45-4E53-9506-6F6260AF6F4B"></a><h4 id="DBFSG-GUID-AF830025-6F45-4E53-9506-6F6260AF6F4B" class="sect4">关于获取与特定ACL关联的数据权限</h4>
                  <div>
                     <p>获取数据集合<a id="d28828e7031" class="indexterm-anchor"></a>对于给定的会话，在给定ACL中授予的权限使用<code class="codeph">Session</code>类的<code class="codeph">getPrivileges</code>方法。
                     </p>
                     <div class="infoboxnote" id="GUID-AF830025-6F45-4E53-9506-6F6260AF6F4B__GUID-0C7C27E4-2FF8-4061-A52A-CCCC76047D49">
                        <p class="notep1">注意：</p>
                        <p>您可以使用<code class="codeph">checkAcl</code>方法实现数据安全性，使用<code class="codeph">checkPrivilege</code>方法实现功能安全性。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="DBFSG456"></a><a id="DBFSG501"></a><a id="DBFSG502"></a><a id="DBFSG503"></a><a id="DBFSG504"></a><a id="DBFSG505"></a><a id="DBFSG506"></a><a id="DBFSG500"></a><div class="props_rev_3"><a id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3" name="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3"></a><h3 id="DBFSG-GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3" class="sect3">人力资源管理用例：用Java实现</h3>
               <div>
                  <div class="section">
                     <p>本节介绍如何在中间层验证与数据安全性相关的应用程序权限。此Java示例基于<span class="q">“ <a href="configuring-data-security.html#GUID-C6EF75C9-C167-4482-828E-065BD552E0B7">Real Application Security：All It All Together</a> ”</span>中描述的安全人力资源（HR）场景。它使用示例<code class="codeph">HR</code>模式中的<code class="codeph">EMPLOYEES</code>表。该示例使用两个Real Application Security应用程序用户<code class="codeph">DAUSTIN</code>和<code class="codeph">SMAVRIS</code>来说明Real Application Security概念。该示例可分为以下模块：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CHDGBCJB">设置中间层相关配置</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBJCEEE">设置连接并初始化中间层</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBDHCEF">使用中间层API设置会话和授权</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBGGIID">在数据库上运行查询</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBJCIGH">执行清理操作</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBCBIJJ">主要方法</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CHDGBCJB">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-755253E6-ECF0-417C-B8BF-0E38C9D3CEA7">设置中间层相关配置</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>要设置中档配置包括创建一个<code class="codeph">DISPATCHER</code>用户名和密码，并授予该用户的<code class="codeph">xscacfeadmin</code>和<code class="codeph">xsessionadmin</code>真正应用安全管理员权限。
                     </p><pre class="oac_no_warn" dir="ltr">exec xs_principal.create_user（name =&gt;'dispatcher'，schema =&gt;'HR'）; exec sys.xs_principal.set_password（'dispatcher'，' <span class="italic">password</span> '）; exec xs_principal.grant_roles（'dispatcher'，'xscacheadmin'）; exec xs_principal.grant_roles（'dispatcher'，'xssessionadmin'）;</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBJCEEE">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-E2A6A33B-8443-4E2F-8590-A3940ECFB80A">设置连接并初始化中间层</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这个例子<a id="d28828e7248" class="indexterm-anchor"></a>使用<code class="codeph">setupConnection</code>方法创建与数据库的连接。<code class="codeph">setupConnection</code>方法接受String数组作为参数，其中：</p>
                     <p><code class="codeph">args[0]</code> =数据库用户</p>
                     <p><code class="codeph">args[1]</code> =密码</p>
                     <p><code class="codeph">args[2]</code> =主持人</p>
                     <p>此方法还通过调用<code class="codeph">oracle.security.xs.的<code class="codeph">getSessionManager</code>方法初始化中间层<code class="codeph">oracle.security.xs.XSSecurityManager</code>类。
                     </p><pre class="oac_no_warn" dir="ltr">public static void setupConnection（String [] args）throws Exception {mgrConnection = DriverManager.getConnection（args [2]，“dispatcher”，“ <span class="italic">password</span> ”）; mgr = XSSessionManager.getSessionManager（mgrConnection，30,2048000）; appConnection = DriverManager.getConnection（args [2]，args [0]，args [1]）; }</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBDHCEF">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-E253697C-E16C-48C9-A0A9-3099D118CBDE">使用中间层API设置会话和授权</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这个例子<a id="d28828e7292" class="indexterm-anchor"></a><a id="d28828e7298" class="indexterm-anchor"></a>使用<code class="codeph">queryAsUser</code>方法设置会话并使用中间层<code class="codeph">checkAcl</code>方法进行授权。此示例创建会话并附加会话，然后调用<code class="codeph">queryEmployees</code>方法。<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBGGIID">在数据库上运行查询</a> ”中</span>的<code class="codeph">queryEmployees</code>方法检查ACL是否具有<code class="codeph">UPDATE</code>权限，如果为<code class="codeph">TRUE</code> ，则允许更新;它再次检查ACL以获取<code class="codeph">VIEW_SALARY</code>应用程序权限，如果为<code class="codeph">TRUE</code> ，则允许访问<code class="codeph">SALARY</code>列并显示所有员工记录，包括<code class="codeph">SALARY</code>列中的敏感数据。然后在显示员工记录后，它会分离会话，并销毁会话。
                     </p><pre class="oac_no_warn" dir="ltr">private static void queryAsUser（String user）抛出SQLException {System.out.println（“\ nQuery HR.EMPLOYEES表as user”“+ user +”\“”）;尝试{Session lws = mgr.createSession（appConnection，user，null，null）; mgr.attachSession（appConnection，lws，null，null，null，null，null）; queryEmployees（LWS）; mgr.detachSession（LWS）; mgr.destroySession（appConnection，lws）; } catch（Exception e）{e.printStackTrace（）; }}</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBGGIID">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-D27C5F71-B5DC-4788-A290-07CDEDB3F879">在数据库上运行查询</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这个例子<a id="d28828e7349" class="indexterm-anchor"></a>使用<code class="codeph">queryEmployees</code>方法在HR数据库上运行查询。
                     </p><pre class="oac_no_warn" dir="ltr">public static void queryEmployees（Session lws）throws SQLException {Connection conn = lws.getConnection（）;字符串查询=“从hr.employees \ temp中选择email，first_name，last_name，department_id，salary，ora_get_aclids（emp），其中department_id in（40,60,100）通过电子邮件订购”;语句stmt = null; ResultSet rs = null; System.out.printf（“EMAIL | FIRST_NAME | LAST_NAME | DEPT | SALARY | UPDATE | VIEW_SALARY \ n”）; try {stmt = conn.createStatement（）; rs = stmt.executeQuery（query）; while（rs.next（））{String email = rs.getString（“EMAIL”）; String first_name = rs.getString（“FIRST_NAME”）; String last_name = rs.getString（“LAST_NAME”）; String department_id = rs.getString（“DEPARTMENT_ID”）;字符串工资; if（（（OracleResultSet）rs）。getAuthorizationIndicator（“SALARY”）== AuthorizationIndicator。NONE）{salary = rs.getString（“SALARY”）; } else {salary =“*****”; } byte [] aclRaw = rs.getBytes（6）;字符串更新，viewSalary; if（XSAccessController.checkAcl（lws，aclRaw，“UPDATE”））{update =“true”; } else {update =“false”; if（XSAccessController.checkAcl（lws，aclRaw，“VIEW_SALARY”））{viewSalary =“true”; } else {viewSalary =“false”; System.out.printf（“％9s |％12s |％12s |％6s |％8s |％8s |％8s \ n”，email，first_name，last_name，department_id，salary，update，viewSalary）; catch（Exception e）{e.printStackTrace（）; } finally {try {if（rs！）= null）rs.close（）; } catch（例外e）{};试试{if（stmt！= null）stmt.close（）; } catch（例外e）{}; }}}</pre><p><code class="codeph">queryEmployees</code>方法为应用程序用户<code class="codeph">DAUSTIN</code>和<code class="codeph">SMAVRIS</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBJCIGH">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-C4FB5BCD-BD3B-4D58-98FD-B89B9A0B3CDC">执行清理操作</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这个例子<a id="d28828e7379" class="indexterm-anchor"></a>使用<code class="codeph">cleanup</code>方法进行系统清理操作。
                     </p><pre class="oac_no_warn" dir="ltr">public static void cleanupConnection（）抛出异常{mgrConnection.close（）; appConnection.close（）; }</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBCBIJJ">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-C4B9B0EF-3685-4931-BF91-078335C62851">主要方法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这个部分<a id="d28828e7397" class="indexterm-anchor"></a>包含所讨论的Java示例的<code class="codeph">main</code>方法。此部分还包含运行该程序必须导入的不同软件包。
                     </p><pre class="oac_no_warn" dir="ltr">import java.sql。连接; import java.sql。DriverManager的; import java.sql。ResultSet的; import java.sql。的SQLException; import java.sql。声明; import java.util。数组列表; import java.util。清单; import oracle.jdbc。一个OracleDriver; import oracle.jdbc。OracleResultSet; import oracle.jdbc。OracleResultSet。AuthorizationIndicator; import oracle.security.xs。角色; import oracle.security.xs。会议; import oracle.security.xs。XSAccessController; import oracle.security.xs。XSSessionManager; / ** * HR演示java版，检查中间层* / public class的数据安全相关权限HRDemo {static Connection mgrConnection = null; static Connection appConnection = null; static XSSessionManager mgr = null; static String user = null; public static void main（String [] args）{try {DriverManager.registerDriver（new OracleDriver（））; if（args.length&gt; = 3）{user = args [0]; } else {System.out.println（“用法HRDemo用户pwd dbURL”）; System.exit（1）; } setupConnection（args）; queryAsUser（ “DAUSTIN”）; queryAsUser（ “SMAVRIS”）; cleanupConnection（）; } catch（Exception e1）{e1.printStackTrace（）; }}</pre></div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>在Java中运行Security HR演示假定已运行<span class="q">“ <a href="real-application-security-hr-demo.html#GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4">设置安全HR演示组件</a> ”中</span>描述的设置脚本来设置Real Application Security组件。</span></li>
                     <li class="stepexpand"><span>编译Java代码。</span><div><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / jdk6 / bin / javac -classpath $ ORACLE_HOME / rdbms_ho / jlib / xs.jar：$ ORACLE_HOME / dbjava / lib / ojdbc6.jar HRdemo.java</pre><div class="infoboxnote" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-8BB95CE3-813F-42C6-8AD5-92F20979B559">
                              <p class="notep1">注意：</p>
                              <p>您必须将JDK 6与<code class="codeph">xs.jar</code>和<code class="codeph">ojdbc6.jar</code> ，它们位于Oracle主目录中。不同的罐子和JDK可能无法正常工作。
                              </p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>运行Java代码。</span><div><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / jdk6 / bin / java -classpath $ ORACLE_HOME / rdbms_ho / jlib / xs.jar：$ ORACLE_HOME / dbjava / lib / ojdbc6.jar HRdemo db_hr db_hr jdbc：oracle：thin：@myserver：myport：mysid</pre></div>
                     </li>
                  </ol>
               </div>
               <div class="sect3"><a id="CHDDJHBI" name="CHDDJHBI"></a><h4 id="DBFSG-CHDDJHBI" class="sect4">产量</h4>
                  <div>
                     <div class="section">
                        <p>在Java中运行Security HR演示假定已运行<span class="q">“ <a href="real-application-security-hr-demo.html#GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4">设置安全HR演示组件</a> ”中</span>描述的设置脚本来设置Real Application Security组件。运行Security HR演示时，将返回两个查询的结果。
                        </p>
                        <p>第一个查询与应用程序用户<code class="codeph">DAUSTIN</code>一起运行，应用程序用户<code class="codeph">DAUSTIN</code>具有应用程序角色<code class="codeph">EMP_ROLE</code>和<code class="codeph">IT_ROLE</code> ，因此他可以查看IT部门中的员工记录，但除了自己的工资记录外，他无法查看<code class="codeph">SALARY</code>列。查询结果如下：</p><pre class="oac_no_warn" dir="ltr">将HR.EMPLOYEES表作为用户“DAUSTIN”EMAIL |进行查询FIRST_NAME | LAST_NAME | DEPT | SALARY |更新| VIEW_SALARY AHUNOLD |亚历山大|胡诺尔德| 60 | ***** |假|假BERNST |布鲁斯|恩斯特| 60 | ***** |假|假DAUSTIN |大卫|奥斯汀| 60 | 4800 |假|真正的DLORENTZ |戴安娜|洛伦兹| 60 | ***** |假|假VPATABAL |瓦利| Pataballa | 60 | ***** |假|假</pre><p>请注意，应用程序用户<code class="codeph">DAUSTIN</code>只能查看自己记录的<code class="codeph">SALARY</code>列数据，而不能查看其他记录。
                        </p>
                        <p>第二个查询与应用程序用户SMAVRIS一起运行，应用程序用户SMAVRIS具有应用程序角色<code class="codeph">EMP_ROLE</code>和<code class="codeph">HR_ROLE</code> ，因此她可以查看和更新所有员工记录。查询结果如下：</p><pre class="oac_no_warn" dir="ltr">将HR.EMPLOYEES表作为用户“SMAVRIS”EMAIL |进行查询FIRST_NAME | LAST_NAME | DEPT | SALARY |更新| VIEW_SALARY AHUNOLD |亚历山大|胡诺尔德| 60 | 9000 |真|真的BERNST |布鲁斯|恩斯特| 60 | 6000 |真|真的DAUSTIN |大卫|奥斯汀| 60 | 4800 |真|真DFAVIET |丹尼尔| Faviet | 100 | 9000 |真|真正的DLORENTZ |戴安娜|洛伦兹| 60 | 4200 |真|真正的ISCIARRA |伊斯梅尔| Sciarra | 100 | 7700 |真|真的JCHEN |约翰|陈| 100 | 8200 |真|真JMURMAN |何塞曼努埃尔| Urman | 100 | 7800 |真|真正的LPOPP |路易斯|波普| 100 | 6900 |真|真正的NGREENBE |南希|格林伯格| 100 | 12008 |真|真正的SMAVRIS |苏珊| Mavris | 40 | 6500 |真|真正的VPATABAL |瓦利| Pataballa | 60 | 4800 |真|真正</pre><p>请注意，应用程序用户<code class="codeph">SMAVRIS</code>可以查看所有员工记录，包括<code class="codeph">SALARY</code>列中的所有数据。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
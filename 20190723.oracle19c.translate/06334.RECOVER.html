<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>恢复</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="rman-commands-recover-to-validate.html" title="Previous" type="text/html"></link>
      <link rel="next" href="REGISTER-DATABASE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference"></meta>
    <meta name="dcterms.isVersionOf" content="RCMRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="rman-commands-recover-to-validate.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="REGISTER-DATABASE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-recover-to-validate.html" property="item" typeof="WebPage"><span property="name">RMAN命令：RECOVER to VALIDATE</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">恢复</li>
            </ol>
            <a id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95" name="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95"></a><a id="RCMRF90237"></a><a id="RCMRF90238"></a><a id="RCMRF90613"></a><a id="RCMRF90239"></a><a id="RCMRF90614"></a><a id="RCMRF90240"></a><a id="RCMRF90241"></a><a id="RCMRF90242"></a><a id="RCMRF90615"></a><a id="RCMRF90244"></a><a id="RCMRF90245"></a><a id="RCMRF90616"></a><a id="RCMRF90247"></a><a id="RCMRF90248"></a><a id="RCMRF90249"></a><a id="RCMRF90617"></a><a id="RCMRF90251"></a><a id="RCMRF90252"></a><a id="RCMRF90618"></a><a id="RCMRF90253"></a><a id="RCMRF90254"></a><a id="RCMRF90255"></a><a id="RCMRF90256"></a><a id="RCMRF90257"></a><a id="RCMRF90258"></a><a id="RCMRF90259"></a><a id="RCMRF90619"></a><a id="RCMRF90620"></a><a id="RCMRF90621"></a><a id="RCMRF140"></a>
            
            <h2 id="RCMRF-GUID-CA98040F-9865-4F4F-BAF2-91C518612E95" class="sect2"><span class="enumeration_section">3.1</span>恢复</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-E2EEEAE0-06B3-4D2E-8A83-1A9DD49AF7C2">目的</p>
                  <p><a id="d69128e179" class="indexterm-anchor"></a><a id="d69128e181" class="indexterm-anchor"></a><a id="d69128e185" class="indexterm-anchor"></a><a id="d69128e189" class="indexterm-anchor"></a><a id="d69128e193" class="indexterm-anchor"></a>使用<code class="codeph">RECOVER</code>命令执行以下不同任务之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>执行完整恢复整个数据库或一个或多个恢复的数据文件</p>
                     </li>
                     <li>
                        <p>执行数据库（DBPITR），可插拔数据库（PDB），表空间（TSPITR），表或表分区的时间点恢复</p>
                     </li>
                     <li>
                        <p>将增量备份应用于数据文件映像副本（ <span class="italic">而不是</span>还原的数据文件）以及时向前滚动</p>
                     </li>
                     <li>
                        <p>恢复数据文件中的损坏数据块或数据块集</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-CABC3DC6-1EE1-421F-BACB-D2E12B7000AF">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../bradv/rman-complete-database-recovery.html#BRADV8005" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南</span></a> ，了解如何恢复数据文件</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-54DB059A-FF1D-4027-931F-CFBE966ECB50">先决条件</p>
                  <p>恢复所需的所有重做或增量更改必须存在于磁盘或SBT中。如果RMAN需要在恢复期间还原增量备份或归档重做日志文件，则必须配置自动通道或手动分配创建这些备份的相同类型的通道。</p>
                  <p><a id="d69128e230" class="indexterm-anchor"></a>如果在加密数据库或表空间上执行介质恢复，则在执行介质恢复时必须打开Oracle密钥库。请参阅<a href="../admin/managing-tablespaces.html#ADMIN12327" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a>以了解加密表空间。
                  </p>
                  <p></p>
                  <p>要使用预包装备份在目标CDB中执行恢复，必须打开根，并且必须以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的公共用户身份连接到根。
                  </p>
                  <p></p>
                  <p>在使用共享撤消的CDB中，要执行一个或多个PDB的时间点恢复，必须提供包含所列PDB的CDB的根和种子数据库的备份。</p>
                  <p>要在PDB中执行表空间的TSPITR，必须提供包含PDB的CDB的根和种子数据库（ <code class="codeph">PDB$SEED</code> ）的备份。
                  </p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBDFJFG"><span class="bold">特殊于RECOVER BLOCK的先决条件</span></p>
                  <p>以下先决条件适用于<code class="codeph">RECOVER BLOCK</code> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d69128e268" class="indexterm-anchor"></a><a id="d69128e270" class="indexterm-anchor"></a><a id="d69128e274" class="indexterm-anchor"></a>目标数据库必须以<code class="codeph">ARCHIVELOG</code>模式运行，并使用当前控制文件打开或挂载。
                        </p>
                     </li>
                     <li>
                        <p>RMAN只能恢复标记为媒体损坏的块。该<a id="d69128e285" class="indexterm-anchor"></a><a id="d69128e287" class="indexterm-anchor"></a> <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>视图指示自最近的<code class="codeph">BACKUP</code>或<code class="codeph">BACKUP ...以来文件中的哪些块被标记为已损坏<code class="codeph">BACKUP ...对文件运行VALIDATE</code>命令。
                        </p>
                     </li>
                     <li>
                        <p><a id="d69128e302" class="indexterm-anchor"></a>包含损坏块的数据文件的备份必须是完全备份而不是代理备份。如果仅存在代理备份，则可以将它们还原到磁盘上的非默认位置，在这种情况下，RMAN会将它们视为数据文件副本。然后，您可以使用数据文件副本进行块介质恢复。
                        </p>
                     </li>
                     <li>
                        <p>RMAN只能使用归档的重做日志文件进行恢复。阻止介质恢复无法在丢失或无法访问的日志中生存，尽管有时可能会丢失或无法访问的记录（请参阅<a href="../bradv/rman-block-media-recovery.html#BRADV118" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南</span></a> ）。
                        </p>
                     </li>
                     <li>
                        <p>为使RMAN能够在闪回日志中搜索损坏块的良好副本，必须在目标数据库上启用闪回数据库。</p>
                     </li>
                     <li>
                        <p>为使RMAN能够在备用数据库中搜索损坏块的良好副本，目标数据库必须与Data Guard环境中的物理备用数据库相关联。此外，物理备用数据库必须在受管恢复中以只读方式打开。</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-0795BA20-1B1D-457C-9356-41EA26EB01DE">
                     <p class="notep1">注意：</p>
                     <p>此操作需要有效的Data Guard许可证。</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDJBACD">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-4A9DDA45-6C70-4EFA-A1B0-597F0CD3D347">使用说明</p>
                  <p>默认情况下，RMAN执行完全恢复。对于时间点恢复，最佳做法是在<code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code>命令中的<code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code>和<code class="codeph">RECOVER</code>命令之前输入<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">UNTIL</code>命令，以便<code class="codeph">UNTIL</code>时间适用于这两个命令。如果在还原数据库后运行<code class="codeph">SET UNTIL</code> ，则可能无法将数据库恢复到目标时间，因为还原的文件的时间戳可能晚于目标时间。
                  </p>
                  <div class="infoboxnote" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-2BB576D3-8963-4E72-9060-A02160E5639E">
                     <p class="notep1">注意：</p>
                     <p>使用备份控制文件进行不完全恢复或恢复后，必须使用<code class="codeph">RESETLOGS</code>选项打开数据库。
                     </p>
                  </div>
                  <p><span class="bold">增量备份和归档重做日志文件</span></p>
                  <p><a id="d69128e366" class="indexterm-anchor"></a>除<code class="codeph">RECOVER BLOCK</code> ，RMAN可以使用增量备份和归档重做日志文件进行恢复。RMAN使用以下搜索顺序：</p>
                  <ol>
                     <li>
                        <p>磁盘或磁带上的增量备份集</p>
                     </li>
                     <li>
                        <p>磁盘上存档的重做日志文件</p>
                     </li>
                     <li>
                        <p>磁盘上存档的重做日志备份</p>
                     </li>
                     <li>
                        <p>磁带上存档的重做日志备份集</p>
                     </li>
                  </ol>
                  <p>当RMAN选择目标来还原存档的重做日志文件时，它使用以下优先顺序：</p>
                  <ol>
                     <li>
                        <p><code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ARCHIVELOG DESTINATION</code></p>
                     </li>
                     <li>
                        <p>该<a id="d69128e402" class="indexterm-anchor"></a> <code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>参数，其值设置为<code class="codeph">LOCATION=USE_DB_RECOVERY_FILE_DEST</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">LOG_ARCHIVE_DEST_1</code></p>
                     </li>
                  </ol>
                  <p>RMAN可以将增量备份应用于未从增量备份还原的数据文件。如果存在重叠级别的增量备份，则RMAN会自动选择覆盖最长时间段的级别。</p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHAJF"><span class="bold">使用存储快照进行恢复</span><a id="d69128e421" class="indexterm-anchor"></a><a id="d69128e425" class="indexterm-anchor"></a></p>
                  <p>通过Storage Snapshot Optimization，您可以使用第三方技术获取存储快照，而无需将数据库或关联的数据文件置于<code class="codeph">BACKUP</code>模式。使用存储快照恢复数据库时，请指定<code class="codeph">SNAPSHOT TIME</code>选项。
                  </p>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-D74FCC5A-A06C-42D6-A992-32DE427071AC">
                     <p class="notep1">也可以看看：</p>
                     <p>有关指定快照时间的信息，请参见“ <a href="../bradv/user-managed-flashback-dbpitr.html#BRADV727" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a></p>
                  </div>
                  <p>要在恢复操作中使用，快照必须符合以下要求。请您的供应商保证合规性。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>快照期间数据库崩溃一致。</p>
                     </li>
                     <li>
                        <p>快照保留每个文件的写入顺序。</p>
                     </li>
                     <li>
                        <p>快照技术存储快照完成的时间。</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-534F440E-B7A4-4B28-B13A-146304135AA7">
                     <p class="notep1">警告：</p>
                     <p>请注意数据库快照是否可用。如果在快照期间进行了结构更改，Oracle数据库不会使用快照进行恢复。某些SQL操作可以进行数据库结构更改，不应在快照期间使用。此类操作的一些示例包括<code class="codeph">OFFLINE</code> ， <code class="codeph">ONLINE</code> ， <code class="codeph">READONLY</code> ， <code class="codeph">DROP</code> ， <code class="codeph">RENAME</code> ， <code class="codeph">SHRINK</code>和<code class="codeph">ADD</code>子句。
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-0E8A6B09-3A17-4A69-B93A-D8DC78ACCF18">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使数据库结构更改的子句的信息，请参阅<a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span class="italic">Oracle数据库SQL语言参考中的</span></a> <code class="codeph">ALTER DATABASE</code>和<code class="codeph">ALTER TABLESPACE</code>命令</p>
                  </div>
                  <p><span class="bold">通过RESETLOGS恢复</span></p>
                  <p>您必须先<code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code>数据文件，然后才能恢复它们。如果要恢复的数据文件来自父级化身，RMAN可以透明地通过<code class="codeph">RESETLOGS</code>操作进行恢复。如果需要， <code class="codeph">RECOVER</code>命令还可以从以前的数据库版本中恢复和应用归档重做日志文件和增量备份，即使这些日志是在以前版本的Oracle数据库中生成的。
                  </p>
                  <p>通过<code class="codeph">OPEN RESETLOGS</code>进行恢复时，请确保拥有恢复所需的所有日志。在以前的数据库版本中，您必须具有从备份时间到SCN小于<code class="codeph">RESETLOGS SCN</code>的日志。化身表必须具有从数据库备份创建时起的<code class="codeph">RESETLOGS</code>操作的完整历史记录。如果在<code class="codeph">V$DATABASE_INCARNATION</code>找不到完整的元数据，则可以使用<code class="codeph"><a href="CATALOG.html#GUID-6E337759-9860-463A-BF7C-8512B272B8E1">CATALOG</a></code>为缺少的化身中的归档重做日志文件重新创建此元数据。
                  </p>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-F1C84C0F-5BF0-45A0-866C-0D7EFD208082">
                     <p class="notep1">也可以看看：</p>
                     <p><code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code>命令用于说明还原存档重做日志文件的默认位置。在快速恢复区域中登录日志时，RMAN会自动指定<code class="codeph">MAXSIZE</code>选项。
                     </p>
                  </div>
                  <p><span class="bold">恢复CDB和PDB</span><a id="d69128e543" class="indexterm-anchor"></a><a id="d69128e547" class="indexterm-anchor"></a><a id="d69128e551" class="indexterm-anchor"></a><a id="d69128e555" class="indexterm-anchor"></a></p>
                  <p>RMAN使您可以在根或PDB中恢复整个多租户容器数据库（CDB），根，一个或多个PDB以及表空间。您可以为PDB和CDB执行完全恢复或时间点恢复。但是，您无法将根恢复到指定的时间点。</p>
                  <p>恢复CDB和PDB的过程类似于非CDB的过程。不同之处在于连接到CDB或PDB以及使用的命令。要恢复整个CDB，根或多个PDB，请连接到根。要恢复特定PDB，请连接到该PDB。要恢复PDB，请使用<code class="codeph">RECOVER PLUGGABLE DATABASE</code>命令。要恢复整个CDB，请使用<code class="codeph">RECOVER DATABASE</code>命令并恢复根，使用<code class="codeph">RECOVER DATABASE ROOT</code>命令。
                  </p>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-57812173-E962-49EE-A77D-A3CD12866D9D">
                     <p class="notep1">也可以看看：</p>
                     <p>有关连接到CDB和PDB的信息，请<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a> ”</span></p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-6F472BF4-CDDF-477F-B334-85ECFE12C039">
                     <p class="notep1">也可以看看：</p>
                     <p>有关执行CDB PDB恢复的信息，请参见<a href="../bradv/rman-complete-database-recovery.html#BRADV-GUID-1F744C63-2D4C-4F65-8773-1340A85993ED" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                  </div>
                  <p>在Data Guard环境中，您可能需要在主数据库的时间点恢复之后还原整个CDB，以使备用数据库跟随主数据库。</p>
                  <p><span class="bold">恢复稀疏数据库</span></p>
                  <p>当<code class="codeph">COMPATIBLE</code>初始化参数设置为12.2或更高时，RMAN还允许您为多租户和非CDB稀疏数据库执行时间点恢复。为了完全恢复，RMAN通过应用归档重做日志文件和联机重做日志来恢复数据文件。因此， <code class="codeph">FROM SPARSE</code>和<code class="codeph">FROM NONSPARSE</code>子句不适用于完全恢复。对于时间点恢复，RMAN首先恢复数据文件然后恢复它们，因此， <code class="codeph">FROM SPARSE</code>和<code class="codeph">FROM NONSPARSE</code>子句适用于PITR。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-556716D3-A8C9-403C-9D20-05D91101C2B4">句法</p>
                  <p><a id="d69128e614" class="indexterm-anchor"></a><a id="d69128e618" class="indexterm-anchor"></a> <span class="bold"><span class="italic">recover</span> :: =</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-626816AA-492D-40F4-823E-F18B2E559D2B"><img src="img/recover.gif" alt="recover.eps的描述如下" title="recover.eps的描述如下" longdesc="img_text/recover.html"><br><a href="img_text/recover.html">说明recover.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier :: =</a></span> ， <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE">recoverObject :: =</a></span> ， <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB">recoverOptionList :: =</a></span> ）</p>
                  <p><a id="d69128e644" class="indexterm-anchor"></a><a id="d69128e648" class="indexterm-anchor"></a> <span class="bold"><span class="italic">recoverSpec</span> :: =</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-95C09C81-4D2A-469A-92D9-5406587262FB"><img src="img/recoverspec.gif" alt="recoverspec.eps的描述如下" title="recoverspec.eps的描述如下" longdesc="img_text/recoverspec.html"><br><a href="img_text/recoverspec.html">说明recoverspec.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE">recoverObject :: =</a></span> ， <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIDHBB">blockObject :: =</a></span> ， <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB">recoverOptionList :: =</a></span> ）</p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE"><a id="d69128e674" class="indexterm-anchor"></a><a id="d69128e678" class="indexterm-anchor"></a> <span class="bold"><span class="italic">recoverObject</span> :: =</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-8DCC3752-98AF-42A1-9424-BB3AA7E55921"><img src="img/recoverobject.gif" alt="recoverobject.eps的描述如下" title="recoverobject.eps的描述如下" longdesc="img_text/recoverobject.html"><br><a href="img_text/recoverobject.html">说明recoverobject.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEGJI">dbObject</a></span> ， <span class="italic"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABEDABD">untilClause :: =</a></span> ）</p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHCII"><a id="d69128e700" class="indexterm-anchor"></a> <span class="bold"><span class="italic">dbObject</span> :: =</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A5F60A2C-39AF-436E-8DED-C75012D2568B"><img src="img/dbobject.gif" alt="dbobject.eps的描述如下" title="dbobject.eps的描述如下" longdesc="img_text/dbobject.html"><br><a href="img_text/dbobject.html">说明dbobject.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIDHBB"><a id="d69128e713" class="indexterm-anchor"></a><a id="d69128e717" class="indexterm-anchor"></a> <span class="bold"><span class="italic">blockObject</span> :: =</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-67388E93-D8D6-47B6-BDA5-0AED88D2E424"><img src="img/blockobject.gif" alt="下面是blockobject.eps的描述" title="下面是blockobject.eps的描述" longdesc="img_text/blockobject.html"><br><a href="img_text/blockobject.html">插图描述blockobject.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220__BABCCBBJ">datafileSpec :: =</a></span> ）</p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB"><a id="d69128e735" class="indexterm-anchor"></a><a id="d69128e739" class="indexterm-anchor"></a> <span class="bold"><span class="italic">recoverOptionList</span> :: =</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-5918B74D-F768-40DF-A974-DF6569C81C7E"><img src="img/recoveroptionlist.gif" alt="recoveroptionlist.eps的描述如下" title="recoveroptionlist.eps的描述如下" longdesc="img_text/recoveroptionlist.html"><br><a href="img_text/recoveroptionlist.html">说明recoveroptionlist.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFADCCJE">remapTableList :: =</a></span> ， <span class="italic"><a href="sizeSpec.html#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577__BABHAICB">sizeSpec :: =</a></span> ）</p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFADCCJE"><span class="bold"><span class="italic">remapTableList</span> :: =</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-F3F8F791-01F9-4786-988A-59C86673D5FF"><img src="img/remaptablelist.gif" alt="下面是remaptablelist.eps的描述" title="下面是remaptablelist.eps的描述" longdesc="img_text/remaptablelist.html"><br><a href="img_text/remaptablelist.html">说明remaptablelist.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-10B79C7C-F269-4531-9B9E-1DE4E1E743BD">语义</p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBHDECB"><span class="bold"><span class="italic">恢复</span></span></p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-BAD26656-02EE-4DAC-8BA0-8CBFF972BBF7">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes RECOVER command parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e783">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e786">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e791" headers="d69128e783 ">
                                 <p><code class="codeph">DEVICE TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e791 d69128e786 ">
                                 <p>仅为指定的设备类型分配自动通道。例如，如果配置自动磁盘和磁带通道，并且发出<code class="codeph">RECOVER DEVICE TYPE DISK</code> ，则RMAN仅分配磁盘通道。
                                 </p>
                                 <p>在指定<code class="codeph">DEVICE TYPE</code>选项之前，使用<code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">DEVICE TYPE</code>命令<code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">DEVICE TYPE</code> （ <code class="codeph">DISK</code>除外，它是预先配置的）。
                                 </p>
                                 <p><span class="bold">注意：</span>您无法手动分配通道，然后运行<code class="codeph">RECOVER DEVICE TYPE</code> 。</p>
                                 <p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e840" headers="d69128e783 ">
                                 <p><span class="italic"><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDBIFBF">recoverSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e840 d69128e786 ">
                                 <p>指定要恢复的对象的类型。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDBIFBF"><span class="bold"><span class="italic">recoverSpec</span></span></p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-5CA85DE2-B4F2-4844-9C6E-32A85D645F06">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes RECOVER command recoverSpec parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e861">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e864">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e869" headers="d69128e861 ">
                                 <p><span class="italic"><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBIGJEH">recoverObject</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e869 d69128e864 ">
                                 <p>指定要恢复的对象的类型。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e879" headers="d69128e861 ">
                                 <p><span class="italic"><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDCAGGA">blockObject</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e879 d69128e864 ">
                                 <p>指定要使用块介质恢复恢复的块。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e889" headers="d69128e861 ">
                                 <p><span class="italic"><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__I999383">recoverOptionList</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e889 d69128e864 ">
                                 <p>指定恢复选项。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBIGJEH"><span class="bold"><span class="italic">recoverObject</span></span></p>
                  <p>本小节指定要恢复的文件。有关语法图，请参阅<span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE">recoverObject :: =</a></span> 。
                  </p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-F4C3820B-534E-4F16-BF3C-768698D33D91">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes RECOVER command recoverObject parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e916">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e919">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e924" headers="d69128e916 ">
                                 <p><span class="italic"><code class="codeph"><a href="dbObject.html#GUID-C5C5EC3A-1B4E-4591-8E70-715E4BDC9FF8">dbObject</a></code></span> <code class="codeph">COPY OF</code>   
                                 </p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e924 d69128e919 ">
                                 <p>将增量备份应用于指定的映像副本，以将其前滚到与文件的最新增量备份相等或之前的任何时间。现有的图像副本被覆盖并在恢复期间保持模糊状态。恢复映像副本后，RMAN进行自动备份。</p>
                                 <p>此命令更新数据文件副本，而<span class="italic">不是</span>当前数据库文件的介质恢复。此命令旨在与<code class="codeph">BACKUP ...一起使用<code class="codeph">BACKUP ...FOR RECOVER OF COPY</code>恢复FOR RECOVER OF COPY</code>语法以使用增量更新的备份实施策略。
                                 </p>
                                 <p>必须满足以下要求：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>必须至少存在要恢复的每个数据文件的一个副本。</p>
                                    </li>
                                    <li>
                                       <p>必须存在要恢复的映像副本后执行的增量备份。</p>
                                    </li>
                                 </ul>
                                 <p>如果存在可以应用增量备份以执行操作的多个可能副本，则RMAN选择一个合适的副本。</p>
                                 <p><span class="bold">注意：如果</span> RMAN无法恢复到指定的时间，则会发出警告（而不是错误），因为没有可用的增量备份。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e962" headers="d69128e916 ">
                                 <p><code class="codeph">WITH TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e962 d69128e919 ">
                                 <p>指定标记名称以标识要前滚的图像副本。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e974" headers="d69128e916 ">
                                 <p><code class="codeph">DATAFILECOPY</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e974 d69128e919 ">
                                 <p>将增量备份应用于指定的数据文件映像副本（请参阅<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDFCFJI">示例3-4</a> ）。请参阅<code class="codeph">RECOVER COPY OF</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e995" headers="d69128e916 ">
                                 <p><span class="italic"><code class="codeph"><a href="dbObject.html#GUID-C5C5EC3A-1B4E-4591-8E70-715E4BDC9FF8">DBOBJECT</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e995 d69128e919 ">
                                 <p>指定需要恢复的数据块。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1006" headers="d69128e916 ">
                                 <p><code class="codeph">备用数据库</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1006 d69128e919 ">
                                 <p></p>
                                 <p>应用增量备份，前滚，然后重新启动物理备用数据库。必须使用<code class="codeph">FROM SERVICE</code>子句指定用于刷新备用数据库的主数据库。
                                 </p>
                                 <p>以目标身份连接到物理备用数据库，并在<code class="codeph">FROM SERVICE</code>子句中指定物理备用数据库的网络服务名称。
                                 </p>
                                 <p><span class="bold">注意：</span>可以与<code class="codeph">STANDBY DATABASE</code>一起使用的唯一子句是<code class="codeph">PFILE</code>和<code class="codeph">FROM SERVICE</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1036" headers="d69128e916 ">
                                 <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAIFDBG"><code class="codeph">FOREIGN DATAFILECOPY</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1036 d69128e919 ">
                                 <p>指定需要通过应用增量备份使外部数据文件副本的名称一致。这些外部数据文件副本是在不一致的跨平台备份期间使用带有<code class="codeph">ALLOW INCONSISTENT</code>子句的<code class="codeph">CONVERT</code>或<code class="codeph">BACKUP</code>命令创建的。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1060" headers="d69128e916 ">
                                 <p>  <code class="codeph">FROM BACKUPSET</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1060 d69128e919 ">
                                 <p>指定包含跨平台增量备份的备份集的名称，该备份集必须应用于使用<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAIFDBG">FOREIGN DATAFILECOPY'filename'</a>子句指定的外部数据文件副本。
                                 </p>
                                 <p>要应用跨平台增量备份，必须满足以下条件：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>跨平台增量备份中每个数据文件的起始SCN必须小于外部数据文件副本的当前检查点SCN。</p>
                                    </li>
                                    <li>
                                       <p>不得修改外部数据文件副本。</p>
                                       <p>例如，它不应该插入目标数据库，更改为读写模式，然后更改回只读模式。这会更改外部数据文件副本标头中的数据库ID和文件号。</p>
                                    </li>
                                 </ul>
                                 <p>如果不满足这些条件，则会发生错误，并且跨平台增量备份不会应用于外部数据文件副本。</p>
                                 <p></p>
                                 <p><span class="bold">注意：</span>您不能将包含多个备份集的增量备份应用于一组外部数据文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1098" headers="d69128e916 ">
                                 <p><code class="codeph">TABLE</code> <span class="italic"><code class="codeph">schema.table</code></span> <code class="codeph">[:</code> <span class="italic"><code class="codeph">partition</code></span> <code class="codeph">]</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1098 d69128e919 ">
                                 <p>指定必须恢复的表或表分区。目标数据库必须处于读写模式。</p>
                                 <p></p>
                                 <p>在执行恢复之前，RMAN会检查目标主机上是否有足够的空间来存储恢复期间使用的辅助实例的文件。如果不存在足够的空间，则RMAN将显示错误消息并退出。</p>
                                 <p>您可以使用<code class="codeph">REMAP TABLE</code>选项为目标数据库中的已恢复表或表分区分配新名称。
                                 </p>
                                 <p>将恢复的表导入目标数据库时，如果目标数据库中存在具有相同名称的表，则会显示一条错误消息，指示必须使用<code class="codeph">REMAP TABLE</code>子句重命名表。
                                 </p>
                                 <p>从分区表中仅恢复某些分区时，每个分区将作为单独的表导入目标数据库。如果<code class="codeph">REMAP TABLE</code>未用于重命名已恢复的对象，则RMAN使用表名和分区名的串联为每个表命名。已恢复对象的表名称格式为<span class="italic"><code class="codeph">tablename_partitionname</code></span> 。如果目标数据库中存在具有此名称的表，则RMAN会将_1附加到生成的表名称。如果存在具有此名称的表，则RMAN会将_2附加到表名，依此类推。
                                 </p>
                                 <p>参见<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEEDH">例3-8</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1142" headers="d69128e916 ">
                                 <p><code class="codeph">OF PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1142 d69128e919 ">
                                 <p>在CDB中，a的名称<a id="d69128e1153" class="indexterm-anchor"></a><a id="d69128e1157" class="indexterm-anchor"></a>其中必须恢复的表或表分区所在的PDB。要恢复PDB中的表或表分区，必须按照<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”中的说明</span>连接到根。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1167" headers="d69128e916 ">
                                 <p><code class="codeph">跳跃</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1167 d69128e919 ">
                                 <p>在开始介质恢复之前，使指定表空间中的数据文件脱机。介质恢复完成后，这些文件将保持脱机状态。</p>
                                 <p>此选项对于避免恢复仅包含临时数据的表空间或推迟某些表空间的恢复非常有用。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1177" headers="d69128e916 ">
                                 <p><code class="codeph">永远</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1177 d69128e919 ">
                                 <p>使用<code class="codeph">DROP</code>选项使数据文件脱机（请参阅<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDGFJAD">示例3-3</a> ）。在使用<code class="codeph">RESETLOGS</code>选项打开数据库后，如果要删除指定的表空间，请使用<code class="codeph">SKIP FOREVER TABLESPACE</code> 。
                                 </p>
                                 <p><span class="bold">注意：</span>如果执行不完全恢复，则<code class="codeph">SKIP</code>需要<code class="codeph">FOREVER</code>选项。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1207" headers="d69128e916 "><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1207 d69128e919 ">
                                 <p>指定要脱机的表空间的名称。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1218" headers="d69128e916 ">
                                 <p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">pdb_name</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1218 d69128e919 ">
                                 <p>PDB中表空间的名称。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1234" headers="d69128e916 ">
                                 <p><code class="codeph">SNAPSHOT TIME</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">date_string</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1234 d69128e919 ">
                                 <p>指定使用存储快照优化创建的快照备份的基于时间的恢复。 date_string是快照完成的时间，以RMAN <code class="codeph">TIME</code>格式（由<code class="codeph">NLS_DATE_FORMAT</code>环境变量定义）指定。
                                 </p>
                                 <p>您可以将<code class="codeph">SNAPSHOT TIME</code>与<code class="codeph">UNTIL TIME</code>或<code class="codeph">UNTIL SCN</code>结合使用来执行数据库时间点恢复（DBPITR）。但是，您只能将DBPITR执行到某个时间或SCN大于指定的快照完成时间。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <span class="q">“ <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHAJF">使用存储快照</a></span>进行<span class="q"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHAJF">恢复</a> ”，</span>以获取有关快照系统要求以及如何指定快照时间的信息。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1275" headers="d69128e916 "><a id="d69128e1276" class="indexterm-anchor"></a><a id="d69128e1280" class="indexterm-anchor"></a> <code class="codeph">TO RESTORE POINT</code> <span class="italic"><code class="codeph">restore_point_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1275 d69128e919 ">
                                 <p>指定用于终止<code class="codeph">RECOVER</code>命令的还原点，其中创建还原点的SCN为包含上限的上限。由于限制是包含的，因此RMAN仅选择可用于恢复<span class="italic">并包括</span>与还原点对应的SCN的文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1300" headers="d69128e916 ">
                                 <p><span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1300 d69128e919 ">
                                 <p>指定用于终止<code class="codeph">RECOVER</code>命令的过去时间，SCN或日志序列号。
                                 </p>
                                 <p>与一个或多个表空间一起使用时，该子句指示命名表空间的表空间时间点恢复（TSPITR）操作。不要将此子句与<code class="codeph">RECOVER DATAFILE</code>或<code class="codeph">RECOVER DATABASE</code> （请参阅<span class="q">“ <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDJBACD">使用说明</a> ”</span> ）。在数据库时间点恢复（DBPITR）之后，必须使用<code class="codeph">RESETLOGS</code>选项打开数据库。
                                 </p>
                                 <p><span class="bold">另见：</span> <span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1338" headers="d69128e916 ">
                                 <p><code class="codeph">直到可用的重做</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1338 d69128e919 ">查找最后一个可用的归档重做日志和联机重做日志，并将数据库恢复到缺少日志的位置。
                                 <p>只有在为整个数据库执行恢复时，才能使用此选项。您无法使用<code class="codeph">UNTIL AVAILABLE REDO</code>选项恢复数据文件，表空间或PDB。
                                 </p>
                                 <p>要为PDB执行时间点恢复，必须指定SCN以进行恢复。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEGJI"><span class="bold"><span class="italic">DBOBJECT</span></span></p>
                  <p>本子条款指定是恢复数据库还是恢复数据库的子集。有关语法图，请参阅<span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHCII">dbObject :: =</a></span> 。
                  </p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-C00879F3-38C3-4D79-ADBD-DB07E23AA9C9">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes dbObject subclause parameters of RECOVER command" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e1369">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e1372">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1377" headers="d69128e1369 "><code class="codeph">应用根数据库</code></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1377 d69128e1372 ">
                                 <p></p>
                                 <p>指定应用程序根目录中的所有数据文件。</p>
                                 <p>使用<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限以普通用户身份连接到CDB根目录。或者，以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的应用程序通用用户身份连接到应用程序根目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1399" headers="d69128e1369 ">
                                 <p><code class="codeph">数据库</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1399 d69128e1372 ">
                                 <p>指定整个数据库（请参阅<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDGFJAD">示例3-3</a> ）。对于CDB，它指定整个CDB。</p>
                                 <p>在CDB中，恢复整个CDB。您连接到根以备份整个CDB，如<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”中所述</span> 。
                                 </p>
                                 <p></p>
                                 <p>在应用程序容器中，将整个应用程序容器恢复到指定的时间点。这包括应用程序根目录和属于此应用程序根目录的所有应用程序PDB。您以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的应用程序通用用户身份连接到应用程序根目录。
                                 </p>
                                 <p>默认情况下， <code class="codeph">RECOVER DATABASE</code>命令不会恢复在恢复文件的时间点处于脱机正常状态的文件。RMAN省略了脱机正常文件而无需进一步检查。
                                 </p>
                                 <p>在丢失控制文件后进行恢复时，RMAN会自动更新控制文件以指向磁盘上数据文件的实际位置（请参阅<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDEAEGH">示例3-5</a> ）。
                                 </p>
                                 <p>如果RMAN遇到重做以添加数据文件，则RMAN会自动创建新数据文件，除非在恢复期间跳过包含添加的数据文件的表空间。在恢复之前恢复备份控制文件并且备份控制文件不包含最近添加的数据文件的记录时，可能会出现这种情况。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1435" headers="d69128e1369 ">
                                 <p><code class="codeph">数据库根</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1435 d69128e1372 ">
                                 <p>仅指定<a id="d69128e1442" class="indexterm-anchor"></a><a id="d69128e1446" class="indexterm-anchor"></a> CDB中的根。按照<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”中的说明</span>连接到根目录。
                                 </p>
                                 <p></p>
                                 <p>在应用程序容器中，恢复属于应用程序根目录和所有应用程序PDB的在线数据文件。以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的应用程序通用用户身份连接到应用程序根目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1465" headers="d69128e1369 ">
                                 <p><code class="codeph">PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1465 d69128e1372 ">
                                 <p>指定一个或多个<a id="d69128e1477" class="indexterm-anchor"></a><a id="d69128e1481" class="indexterm-anchor"></a> CDB中的PDB。没有其他PDB受到影响;他们可以保持开放和运作。使用逗号分隔的列表指定多个PDB。要使用此子句，必须连接到root。
                                 </p>
                                 <p>执行完全恢复不需要您连接到根。您连接到根以执行以下任何PDB操作：时间点恢复，表恢复，TSPITR或复制。要连接到根或PDB，请参阅<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB”</a> 。</span> 。
                                 </p>
                                 <p></p>
                                 <p>在应用程序容器中，以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的公共用户身份连接到CDB根目录，并在<code class="codeph">SYSBACKUP</code>指定应用程序根目录的<code class="codeph"><span class="codeinlineitalic">pdb_name</span></code>以恢复应用程序根目录和所有应用程序PDB。
                                 </p>
                                 <p>要恢复应用程序PDB，请以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACK</code>权限的应用程序通用用户身份连接到应用程序根目录。要恢复多个应用程序PDB，请指定应用程序PDB名称的公共分隔列表。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1515" headers="d69128e1369 ">
                                 <p><code class="codeph">DATAFILE</code> <span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></span></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1515 d69128e1372 ">
                                 <p>通过文件名或绝对数据文件号指定一个或多个数据文件的列表。</p>
                                 <p>必须安装或打开目标数据库。如果数据库已打开，则要恢复的数据文件必须处于脱机状态。</p>
                                 <p>如果未使用恢复目录，则文件名必须是控制文件中记录的数据文件的名称。如果使用恢复目录，则数据文件的文件名必须是目录中记录的最新名称，即使控制文件中的名称最近已更新。例如，假设在控制文件中重命名了数据文件，但在重新同步目录之前实例失败。在<code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code>命令中指定数据文件的旧名称，因为这是目录中记录的名称。
                                 </p>
                                 <p><span class="bold">注意：</span>您不能随意将各个数据文件恢复到不同的时间点，尽管您可以将整个数据库恢复到单个时间点，或者将完全包含的表空间恢复到与数据库其余部分（TSPITR）不同的时间点。有关TSPITR的详细信息，请参阅“ <a href="../bradv/performing-rman-tspitr.html#BRADV009" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”中</span></a>描述的过程。
                                 </p>
                                 <p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1557" headers="d69128e1369 "><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1557 d69128e1372 ">
                                 <p>指定一个或多个表空间的列表。必须安装或打开目标数据库。如果数据库已打开，则要恢复的表空间必须处于脱机状态。</p>
                                 <p>连接到根目录时<a id="d69128e1569" class="indexterm-anchor"></a><a id="d69128e1575" class="indexterm-anchor"></a> CDB，指定根中的表空间。指定连接到PDB时PDB中的表空间的名称。</p>
                                 <p>在CDB中，在连接到根时指定根中的表空间的名称，并在连接到PDB时指定PDB中的表空间的名称。</p>
                                 <p><span class="bold">注意：</span>如果RMAN遇到重做以添加数据文件，则RMAN会自动创建新数据文件。在恢复之前恢复备份控制文件并且备份控制文件不包含最近添加的数据文件的记录时，可能会出现这种情况。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1587" headers="d69128e1369 ">
                                 <p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">pdb-name</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1587 d69128e1372 ">
                                 <p>PDB中表空间的名称。多个PDB可以具有相同名称的表空间。名称前面的限定符唯一标识表空间。仅在连接到根时才需要此语法。直接连接到PDB时，请使用<code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span> 。 <span class="italic"><code class="codeph">pdb-name</code></span>是PDB的名称。</p>
                                 <p>有关一般信息，请参阅前面的<code class="codeph">TABLESPACE</code>描述。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDCAGGA"><span class="bold"><span class="italic">blockObject</span></span></p>
                  <p>本小节指定了需要恢复的数据块。有关语法图，请参阅<span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIDHBB">blockObject :: =</a></span> 。有关阻止介质恢复的先决条件，请参阅<span class="q">“ <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBDFJFG">RECOVER BLOCK</a></span>特有的先决条件<span class="q">”</span> 。
                  </p>
                  <p>您可以使用<code class="codeph">RECOVER CORRUPTION LIST</code>恢复<code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>视图中报告的所有块，也可以指定数据文件编号和块编号或表空间和数据块地址（DBA）。RMAN只能执行单个块的完全恢复。
                  </p>
                  <p>默认情况下，如果启用了闪回数据库，则RMAN会在闪回日志中搜索损坏块的良好副本。默认情况下，如果目标数据库存在于Data Guard环境中，则<code class="codeph">RECOVER BLOCK</code>命令可以自动将块从物理备用数据库检索到主数据库，反之亦然。
                  </p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-FEA4B081-D317-4180-81E6-9054E16ACA7B">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes RECOVER command blockObject parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e1654">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e1657">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1662" headers="d69128e1654 ">
                                 <p><a id="d69128e1664" class="indexterm-anchor"></a><a id="d69128e1666" class="indexterm-anchor"></a><code class="codeph">CORRUPTION LIST</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1662 d69128e1657 ">
                                 <p>恢复<code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>视图中列出的所有物理损坏的块。阻止介质恢复可能无法修复所有列出的逻辑损坏的块。在这些情况下，备用恢复方法（如表空间时间点恢复）或删除和重新创建受影响的对象可能会修复损坏。
                                 </p>
                                 <p>该<a id="d69128e1680" class="indexterm-anchor"></a><a id="d69128e1682" class="indexterm-anchor"></a> <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>视图显示Oracle数据库组件（如RMAN命令， <code class="codeph">ANALYZE</code> ，SQL查询等）标记为已损坏的块。简而言之，任何遇到过程的过程<a id="d69128e1692" class="indexterm-anchor"></a><a id="d69128e1694" class="indexterm-anchor"></a> <code class="codeph">ORA-1578</code>错误在此视图中记录块损坏。以下类型的损坏会导致向此视图添加行：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>物理腐败（有时称为媒体腐败）。数据库根本无法识别块：校验和无效，块包含全零，或块的页眉和页脚不匹配。</p>
                                    </li>
                                    <li>
                                       <p>逻辑腐败。该块具有有效的校验和，页眉和页脚匹配等，但内容在逻辑上是不一致的。</p>
                                    </li>
                                 </ul>
                                 <p>该视图不记录可以通过验证块和段之间的关系来检测的损坏，但不能通过检查单个块来检测。</p>
                                 <p><span class="bold">注意：</span>修复或检测到块已修复的任何RMAN命令都会更新<code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> 。例如，RMAN在成功阻止介质恢复结束时更新存储库。如果<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> ， <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code>或<code class="codeph"><a href="VALIDATE.html#GUID-ECE57997-40CE-4029-A434-320441D2AD1E">VALIDATE</a></code>命令检测到块不再被破坏，则它会从视图中删除已修复的块。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1733" headers="d69128e1654 ">
                                 <p><code class="codeph">DATAFILE</code> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span>       
                                 </p>
                                 <p><code class="codeph">BLOCK</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TO</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1733 d69128e1657 ">
                                 <p>恢复数据文件中的单个数据块或数据块集。它可以从备用数据库或主数据库中复制块。<code class="codeph">TO</code>范围包括在内，因此<code class="codeph">BLOCK 10 TO BLOCK 20</code>包括块10和块20。
                                 </p>
                                 <p>当数据丢失或损坏适用于少量块而不是整个数据文件时，块介质恢复很有用。通常，在跟踪文件中的错误消息中或通过<code class="codeph"><a href="ADVISE-FAILURE.html#GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C">ADVISE FAILURE</a></code>命令报告块损坏。块级数据丢失通常来自：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>I / O错误导致轻微数据丢失</p>
                                    </li>
                                    <li>
                                       <p>写入磁盘的内存损坏</p>
                                    </li>
                                 </ul>
                                 <p>如果未指定<span class="italic"><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__I999383">recoverOptionList</a></code></span>的选项，并且在数据库上启用了闪回数据库，则<code class="codeph">RECOVER BLOCK</code>首先搜索闪回日志，然后搜索备份以获取要恢复的块的正常版本。
                                 </p>
                                 <p>在恢复完成之前，无法访问标记为介质损坏的块。</p>
                                 <p><span class="bold">注意：</span>您只能执行单个块的完全恢复。换句话说，在将所有重做应用于块之前，您无法停止恢复。
                                 </p>
                                 <p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1806" headers="d69128e1654 "><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">DBA</code> <span class="italic"><code class="codeph">integer</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1806 d69128e1657 ">
                                 <p>指定包含损坏块的表空间名称或编号以及损坏块的数据块地址（DBA）。您只能在损坏的块上执行块介质恢复。</p>
                                 <p><span class="bold">注意：</span>无法恢复数据文件头块（块1）。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1828" headers="d69128e1654 ">
                                 <p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">pdb-name</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">DBA</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1828 d69128e1657 ">
                                 <p>PDB中表空间的名称。多个PDB可以具有相同名称的表空间。名称前面的限定符唯一标识表空间。 <span class="italic"><code class="codeph">pdb-name</code></span>是PDB的名称。</p>
                                 <p>有关一般信息，请参阅前面的<code class="codeph">TABLESPACE</code>描述。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__I999383"><span class="bold"><span class="italic">recoverOptionList</span></span></p>
                  <p>本小节规定了各种恢复选项。有关语法图，请参阅<span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB">recoverOptionList :: =</a></span> 。
                  </p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-B6882697-4195-4B85-8FB3-E38351AF4A86">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes RECOVER command recoverOptionList parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e1878">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e1881">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1886" headers="d69128e1878 ">
                                 <p><code class="codeph">ALLOW</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">CORRUPTION</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1886 d69128e1881 ">
                                 <p>指定允许恢复继续时可以容忍的损坏块数。您可以在重做日志损坏的情况下设置此参数。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1901" headers="d69128e1878 ">
                                 <p><code class="codeph">ARCHIVELOG TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1901 d69128e1881 ">
                                 <p>指定在恢复期间使用的归档日志备份的标记。标记名称不区分大小写并以全部大写形式显示。如果标记的备份不包含用于恢复的所有必需的归档重做日志文件，则RMAN会根据需要使用日志或增量备份。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1913" headers="d69128e1878 "><code class="codeph">AUXILIARY DESTINATION</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">location</code></span> <code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1913 d69128e1881 ">
                                 <p>如果未明确指定单个文件的其他位置，则指定在TSPITR期间创建辅助集数据文件，控制文件和联机重做日志的位置。</p>
                                 <p>如果没有为TSPITR指定<code class="codeph">AUXILIARY DESTINATION</code> ，则必须在使用<code class="codeph">UNTIL</code>子句执行<code class="codeph">RECOVER TABLESPACE</code>之前指定各个辅助集数据文件，控制文件和联机重做日志的命名。否则，TSPITR失败。
                                 </p>
                                 <p>在执行PDB的时间点恢复时，如果未指定辅助目标，则将快速恢复区域用作辅助目标。如果未指定辅助目标且未配置快速恢复区域，则PDB的恢复将失败。</p>
                                 <p><span class="bold">另请参阅：</span> “ <a href="../bradv/performing-rman-tspitr.html#BRADV009" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”中</span></a>有关TSPITR的章节，以获取有关辅助目标的更多详细信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1950" headers="d69128e1878 ">
                                 <p><code class="codeph">检查逻辑</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1950 d69128e1881 ">
                                 <p>测试通过物理损坏检查逻辑损坏的数据和索引块，例如，行片段或索引条目的损坏。如果RMAN发现逻辑损坏，则它会在<code class="codeph">alert.log</code>和服务器会话跟踪文件中记录该块。
                                 </p>
                                 <p><code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">MAXCORRUPT</code>设置表示文件允许的物理和逻辑损坏总数。默认情况下， <code class="codeph">MAXCORRUPT</code>为<code class="codeph">0</code> ，因此如果存在任何损坏的块，则介质恢复将失败。如果允许恢复包括损坏的块，则将<code class="codeph">MAXCORRUPT</code>设置为导致介质恢复失败的最小数量的损坏块。例如，要容忍一个损坏的块，请将<code class="codeph">MAXCORRUPT</code>设置为1。
                                 </p>
                                 <p>如果为文件检测到的物理和逻辑损坏总数小于其<code class="codeph">MAXCORRUPT</code>设置，则RMAN命令完成，数据库将使用损坏的块范围填充<code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> 。否则，该命令将终止，而不会填充<code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1995" headers="d69128e1878 ">
                                 <p><code class="codeph">DATAPUMP DESTINATION</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">datapump_destination</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1995 d69128e1881 ">
                                 <p>指定数据泵导出转储文件的位置，该文件包含从RMAN备份恢复的表或表分区。</p>
                                 <p>如果未指定数据泵目标，RMAN将在<code class="codeph">AUXILARY DESTINATION</code>指示的目标中创建导出转储文件。如果未指定辅助目标，则RMAN会在特定于操作系统的默认位置创建转储文件。在Linux上，默认位置是<code class="codeph">$ORACLE_HOME/dbs</code> 。在Windows上，默认位置为<code class="codeph">%ORACLE_HOME\database</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2022" headers="d69128e1878 ">
                                 <p><code class="codeph">删除ARCHIVELOG</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2022 d69128e1881 ">
                                 <p>删除从不再需要的备份或副本还原的归档重做日志文件。在<code class="codeph">RESTORE</code>命令启动之前，RMAN不会删除磁盘上存档的重做日志文件。如果未指定<code class="codeph">MAXSIZE</code> ，则RMAN会在应用时删除已还原的归档重做日志文件。
                                 </p>
                                 <p><span class="bold">注意：</span>如果归档的重做日志文件还原到快速恢复区域，则默认情况下会启用<code class="codeph">DELETE ARCHIVELOG</code>选项。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2043" headers="d69128e1878 ">
                                 <p><code class="codeph">MAXSIZE</code> <span class="italic"><code class="codeph">sizeSpec</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2043 d69128e1881 ">
                                 <p>对于还原的归档重做日志文件，不要使用大于<span class="italic"><code class="codeph">sizeSpec</code></span>的磁盘空间量。如果恢复需要恢复大于<code class="codeph">MAXSIZE</code>值的日志，则RMAN会报告错误，指示您必须增加<code class="codeph">MAXSIZE</code>值。如果<code class="codeph">MAXSIZE</code>小于包含日志的备份集，则RMAN必须多次读取备份集以提取日志。在这种情况下，RMAN发出警告以增加<code class="codeph">MAXSIZE</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2071" headers="d69128e1878 ">
                                 <p><code class="codeph">DUMP FILE</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2071 d69128e1881 ">
                                 <p>指定包含已恢复表或表分区的数据泵导出转储文件的名称。如果未指定转储文件的名称，RMAN将根据目标数据库的操作系统分配默认名称。默认名称为<code class="codeph">tspitr_</code> <span class="italic"><code class="codeph">SID-of-clone_n.dmp</code></span> ，其中<span class="italic"><code class="codeph">SID-of-clone</code></span>是RMAN用于恢复的辅助数据库的Oracle SID， <span class="italic"><code class="codeph">n</code></span>是随机生成的数字。转储文件在<code class="codeph">DATAPUMP DESTINATION</code>指定的位置创建。</p>
                                 <p>如果<code class="codeph">DATAPUMP DESTINATION</code>包含具有在<code class="codeph">DUMP FILE</code>指定的名称的<code class="codeph">DUMP FILE</code> ，则恢复过程将失败。
                                 </p>
                                 <p><span class="bold">另请参见：</span> <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBHIFDB">DATAPUMP DESTINATION</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2118" headers="d69128e1878 ">
                                 <p><code class="codeph">排除闪回日志</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2118 d69128e1881 ">
                                 <p>不搜索闪回日志以查找要还原的块。默认情况下，如果启用了闪回数据库，RMAN将搜索闪回日志。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2126" headers="d69128e1878 ">
                                 <p><code class="codeph">排除待机</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2126 d69128e1881 ">
                                 <p>不搜索物理备用数据库以查找要还原的块。默认情况下，在Data Guard环境中，RMAN从物理备用数据库中搜索块。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2134" headers="d69128e1878 ">
                                 <p><code class="codeph">来自BACKUPSET</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2134 d69128e1881 ">
                                 <p>指定仅还原备份集。仅在执行块介质恢复时支持此子句。<code class="codeph">RECOVER ...BLOCK</code>命令用于执行块介质恢复。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2146" headers="d69128e1878 ">
                                 <p><code class="codeph">来自DATAFILECOPY</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2146 d69128e1881 ">
                                 <p>仅还原数据文件映像副本。</p>
                                 <p>仅在执行块介质恢复时支持此子句。<code class="codeph">RECOVER ...</code><code class="codeph">BLOCK</code>命令用于执行块介质恢复。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2161" headers="d69128e1878 "><code class="codeph">从SPARSE</code></td>
                              <td align="left" valign="top" width="71%" headers="d69128e2161 d69128e1881 ">
                                 <p></p>
                                 <p>从选定的稀疏备份还原数据文件后，从存档日志和重做日志中恢复数据文件。RMAN首先从稀疏备份还原数据文件，然后恢复数据文件。</p>
                                 <p>要使用<code class="codeph">FROM SPARSE</code>子句执行恢复，要还原的稀疏数据库的<code class="codeph">COMPATIBLE</code>初始化参数必须为12.2或更高。
                                 </p>
                                 <p><span class="bold">注意：</span>此子句仅在执行时间点恢复时使用。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2181" headers="d69128e1878 "><code class="codeph">来自NONSPARSE</code></td>
                              <td align="left" valign="top" width="71%" headers="d69128e2181 d69128e1881 ">
                                 <p></p>
                                 <p>对指定的非稀疏数据库执行传统的完全恢复。首先从非稀疏备份还原数据文件，然后恢复。要使用<code class="codeph">FROM NONSPARSE</code>子句执行时间点恢复，要还原的稀疏数据库的<code class="codeph">COMPATIBLE</code>初始化参数必须设置为12.2或更高。数据文件首先从非稀疏备份还原，然后恢复。
                                 </p>
                                 <p><span class="bold">注意：</span>此子句仅在执行时间点恢复时使用。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2199" headers="d69128e1878 ">
                                 <p><code class="codeph">FROM PLATFORM</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">platform</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2199 d69128e1881 ">
                                 <p>指定创建跨平台备份的源平台的名称。指定的平台名称必须与跨平台备份标头中存储的平台标识符匹配。</p>
                                 <p>在目标数据库上执行转换时，此子句是必需的。如果在源数据库上执行转换（通过使用<code class="codeph">BACKUP</code>命令中的<code class="codeph">TO PLATFORM</code>子句），则此子句是可选的。省略此子句时，仍可以通过使用<code class="codeph">FROM BACKUPSET</code>子句指定<code class="codeph">FOREIGN DATAFILECOPY</code>子句来恢复跨平台备份。
                                 </p>
                                 <p></p>
                                 <p>要通过网络连接到远程数据库来执行跨平台表空间传输，请使用带有<code class="codeph">FROM SERVICE</code>子句的<code class="codeph">FROM PLATFORM</code>子句。然后，RMAN在源数据库上创建所需的备份集，将它们传输到目标数据库，然后在目标上还原它们。
                                 </p>
                                 <p>请参阅<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAIFDBG">FOREIGN DATAFILECOPY'文件名'</a> 。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="../bradv/rman-transporting-data-across-platforms.html#BRADV-GUID-65AADCB6-CC9A-4229-9AB8-805C37E4471F" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，以获取有关源和目标平台转换的更多信息。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2253" headers="d69128e1878 ">
                                 <p><code class="codeph">来自PREPLUGIN</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2253 d69128e1881 ">
                                 <p>使用预刷新增量备份和预刷新存档重做日志备份来恢复PDB。 PDB可以是插入当前CDB的源非CDB或PDB。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2261" headers="d69128e1878 ">
                                 <p><code class="codeph">FROM SERVICE</code> <span class="italic"><code class="codeph">service_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2261 d69128e1881 ">
                                 <p>使用通过网络从远程数据库传输的备份集恢复数据文件。 <span class="italic"><code class="codeph">service_name</code></span>指定远程数据库的服务名称。
                                 </p>
                                 <p>请参阅<span class="q">“ <a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CFAFGIJJ">使用远程主机中的文件还原数据文件和控制文件</a> ”</span> 。
                                 </p>
                                 <p></p>
                                 <p>要通过网络连接到远程数据库来执行跨平台表空间传输，请使用带有<code class="codeph">FROM SERVICE</code>子句的<code class="codeph">FROM PLATFORM</code>子句。RMAN连接到源数据库，创建所需的备份，将它们传输到目标，然后还原目标上的备份。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2292" headers="d69128e1878 "><code class="codeph">非封闭的块</code></td>
                              <td align="left" valign="top" width="71%" headers="d69128e2292 d69128e1881 ">
                                 <p>将恢复扩展到<code class="codeph">V$NONLOGGED_BLOCK</code>视图中列出的非记录块。RMAN首先执行验证以确定未记录的块范围，然后使用这些范围来执行<span class="italic">dbObject</span>子句中指定的对象的恢复。在Oracle Database 11.2和更早版本中， <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>视图中提供了有关非记录块的信息。
                                 </p>
                                 <p>在物理备用数据库上运行时， <code class="codeph">RECOVER</code>从主数据库中提取数据块。在主数据库上运行时，将从最合适的备用数据库中提取数据块。在这种情况下，必须安装主数据库。
                                 </p>
                                 <p>在使用此选项发出<code class="codeph">RECOVER</code>命令之前，必须停止备用恢复。
                                 </p>
                                 <p>如果目标数据库未使用自动内存管理且未设置<code class="codeph">SGA_TARGET</code>参数，则必须为<code class="codeph">DATA_TRANSFER_CACHE_SIZE</code>初始化参数指定值。
                                 </p>
                                 <p></p>
                                 <p><span class="bold">另请参阅：</span> <a href="../sbydb/creating-oracle-data-guard-physical-standby.html#GUID-AE2B1237-57A1-4745-A04C-4246A831A963" target="_blank"><span><span><cite>Oracle Data Guard概念和管理</cite></span></span></a></p>
                                 <p><span class="bold">另请参阅：</span> <a href="../admin/managing-memory.html#ADMIN-GUID-0E201F66-D280-472A-AD80-20AB8F7E9C01" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                                 <p><span class="bold">另请参见：</span> <a href="../refrn/DATA_TRANSFER_CACHE_SIZE.html#REFRN-GUID-322093B7-1673-490D-8A1A-5F461D7897DD" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2355" headers="d69128e1878 ">
                                 <p><code class="codeph">FROM TAG</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">tag_name</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2355 d69128e1881 ">
                                 <p>指定在恢复期间使用的增量备份的标记。如果标记的备份不包含恢复所需的所有必要增量，则RMAN会根据需要使用日志或增量备份。标记名称不区分大小写并以全部大写形式显示。</p>
                                 <p><span class="bold">另请参阅：</span> <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>以了解如何将标记应用于双工备份集的单个副本，以及了解备份标记的默认文件名格式</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2380" headers="d69128e1878 ">
                                 <p><code class="codeph">NOPARALLEL</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2380 d69128e1881 ">
                                 <p>不并行执行介质恢复。并行执行是<code class="codeph">RECOVER</code>的默认执行（请参阅<code class="codeph">RECOVER</code>的说明<code class="codeph">RECOVER ...PARALLEL</code>选项）。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2394" headers="d69128e1878 ">
                                 <p><code class="codeph">NOREDO</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2394 d69128e1881 ">
                                 <p>在恢复期间禁止重做日志的应用。仅应用增量备份。</p>
                                 <p>此选项的一个用途是使用增量备份来更新<code class="codeph">NOARCHIVELOG</code>数据库的完整备份（请参阅<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDHFBFI">示例3-6</a> ）。如果没有重做日志，则需要<code class="codeph">NOREDO</code>选项。如果在恢复<code class="codeph">NOARCHIVELOG</code>数据库时未指定<code class="codeph">NOREDO</code> ，则RMAN将终止恢复并发出错误。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">NOARCHIVELOG</code>数据库的增量备份只能在一致关闭后进行。
                                 </p>
                                 <p>另一个用途是更新备用数据库或重复数据库。使用<code class="codeph">BACKUP INCREMENTAL FROM SCN</code>命令创建的增量备份可以应用于备用数据库或重复数据库。<a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard概念和管理中</span></a>描述了备用数据库过程<a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank">。</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2435" headers="d69128e1878 ">
                                 <p><code class="codeph">NOTABLEIMPORT</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2435 d69128e1881 ">
                                 <p>指定RMAN不得将已恢复的表或表分区导入目标数据库。</p>
                                 <p>已恢复的对象存储在使用<code class="codeph">DUMP FILE</code>和<code class="codeph" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBHIFDB">DATAPUMP DESTINATION</code>指定的数据泵导出转储文件中。如果省略这些子句，则会在默认位置创建导出转储文件。
                                 </p>
                                 <p>必要时，需要将导出转储文件中包含的表或表分区显式导入目标数据库。使用Data Pump导入实用程序导入已恢复的对象。</p>
                                 <p><span class="bold">注意：</span>您不能将<code class="codeph">NOTABLEIMPORT</code>与<code class="codeph">REMAP TABLE</code>或<code class="codeph">REMAP TABLESPACE</code>子句一起使用。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2467" headers="d69128e1878 ">
                                 <p><code class="codeph">平行</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2467 d69128e1881 ">
                                 <p>指定并行恢复（默认）。</p>
                                 <p>默认情况下，数据库使用并行介质恢复来提高介质恢复前滚阶段的性能。要覆盖执行并行恢复的默认行为，请使用带有<code class="codeph">NOPARALLEL</code>选项的<code class="codeph">RECOVER</code>或<code class="codeph">RECOVER PARALLEL 0</code> 。
                                 </p>
                                 <p>在并行介质恢复中，数据库使用“分工”方法在向前滚动时将不同的进程分配给不同的数据块，从而使操作更有效。进程数源自<a id="d69128e2487" class="indexterm-anchor"></a><a id="d69128e2489" class="indexterm-anchor"></a> <code class="codeph">CPU_COUNT</code>初始化参数，默认情况下等于系统上的CPU数。例如，如果在<code class="codeph">CPU_COUNT</code>为4的系统上执行并行恢复，并且只恢复了一个数据文件，则四个生成的进程从数据文件中读取块并应用重做。
                                 </p>
                                 <p>通常，恢复是对数据块的读取和写入进行I / O绑定。块级别的并行性只有在增加总I / O时才有助于恢复性能，例如，绕过操作系统对异步I / O的限制。具有高效异步I / O的系统几乎没有从并行介质恢复中获益。</p>
                                 <p><span class="bold">注意：</span> <a id="d69128e2505" class="indexterm-anchor"></a><a id="d69128e2507" class="indexterm-anchor"></a> <code class="codeph">RECOVERY_PARALLELISM</code>初始化参数仅控制实例或崩溃恢复。媒体恢复不受<code class="codeph">RECOVERY_PARALLELISM</code>使用的值的影响。</p>
                                 <p><span class="bold">另请参见：</span> <a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>有关<code class="codeph">CREATE TABLE</code>的讨论中的<code class="codeph">PARALLEL</code>子句的说明</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2532" headers="d69128e1878 ">
                                 <p><code class="codeph">   </code><span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2532 d69128e1881 ">
                                 <p>指定<span class="italic"><code class="codeph">integer</code></span>并行度。
                                 </p>
                                 <p>每个并行线程可以使用一个或两个并行执行服务器。可选的。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2549" headers="d69128e1878 ">
                                 <p><code class="codeph">FILE_NAME_CONVERT</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2549 d69128e1881 ">
                                 <p></p>
                                 <p>指定在将PDB跨平台传输到目标CDB期间，源CDB上的数据库文件名如何映射到目标CDB上的相应文件。</p>
                                 <p>指定用于转换文件名的字符串对。您可以根据需要使用多对源和目标替换字符串。例如，您可以将字符串模式设置为以下值：</p><pre class="pre codeblock"><code>FILE_NAME_CONVERT =（'str1'，'str2'，'str3'，'str4'...）</code></pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2562" headers="d69128e1878 ">
                                 <p><code class="codeph">REMAP TABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2562 d69128e1881 ">
                                 <p></p>
                                 <p>重命名目标数据库中的已恢复表或表分区。</p>
                                 <p>可以将恢复的表或表分区映射到与它们最初存在的目标数据库模式不同的目标数据库模式。将表或表分区恢复到不同的模式时，可以重命名对象或保留原始对象名。您可以将所有指定的对象导入到同一目标模式或不同的目标模式中。</p>
                                 <p>单个<code class="codeph">RECOVER</code>命令可以包含属于不同源模式的表和表分区。
                                 </p>
                                 <p>恢复分区表时，如果仅重新映射表中的某些分区，则所有表分区都将作为单独的表导入。使用<code class="codeph">REMAP TABLE</code>选项时，不会导入命名约束和索引。
                                 </p>
                                 <p><span class="bold"><span class="italic">注意：</span></span>您无法重新映射<code class="codeph">RECOVER</code>命令的<code class="codeph">TABLE</code>子句中未列出的表或分区。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2594" headers="d69128e1878 ">
                                 <p><code class="codeph">REMAP TABLESPACE</code> <span class="italic"><code class="codeph">source_tablespace_name:target_tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2594 d69128e1881 ">
                                 <p>将恢复的表或表分区导入到与源数据库中所属的表空间不同的表空间中。</p>
                                 <p><code class="codeph">source_tablespace_name</code>指的是表空间，其中表或分区驻留在源数据库中，而<code class="codeph">target_tablespace_name</code>指的是必须将表或表分区导入其中的表空间的名称。
                                 </p>
                                 <p>使用REMAP选项时，不会导入命名约束和索引。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2615" headers="d69128e1878 ">
                                 <p><span class="italic"><code class="codeph">sizeSpec</code></span> <code class="codeph">SECTION SIZE</code> <span class="italic"><code class="codeph">sizeSpec</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2615 d69128e1881 ">
                                 <p>通过将每个文件划分为指定的节大小来并行化验证。</p>
                                 <p>请参见<span class="q">“ <a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBJCAHI">SECTION SIZE sizeSpec</a> ”</span> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2633" headers="d69128e1878 ">
                                 <p><code class="codeph">跳过离线</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2633 d69128e1881 ">
                                 <p></p>
                                 <p>在恢复期间跳过脱机数据文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2642" headers="d69128e1878 ">
                                 <p><code class="codeph">跳过READONLY</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2642 d69128e1881 ">
                                 <p>忽略恢复中的只读文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2650" headers="d69128e1878 ">
                                 <p><code class="codeph">测试</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2650 d69128e1881 ">
                                 <p>启动试验恢复。</p>
                                 <p>如果正常的恢复过程遇到问题，则试用恢复很有用。它使数据库能够预览重做流以检测可能的问题。试用恢复以类似于正常恢复的方式应用重做，但它不会将更改写入磁盘，并在试用恢复结束时回滚其更改。</p>
                                 <p><span class="bold">注意：</span>仅当您已恢复自上次<code class="codeph">RESETLOGS</code>操作以来所执行的备份时，才能使用此子句。否则，数据库将返回错误。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2667" headers="d69128e1878 "><code class="codeph">UNDO TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d69128e2667 d69128e1881 ">
                                 <p>指定在目标时间具有还原段的表空间列表。仅适用于<code class="codeph">RECOVER TABLESPACE</code> 。</p>
                                 <p>在TSPITR期间，RMAN需要有关哪些表空间在TSPITR目标时间具有还原段的信息。如果使用此信息，通常可在恢复目录中使用此信息。</p>
                                 <p>如果没有恢复目录，或者如果在恢复目录中找不到该信息，则如果在目标时间具有还原段的表空间集合等于具有还原段的表空间集合，则RMAN继续运行。如果此假设不正确，则TSPITR会因错误而失败。在这种情况下，您可以使用<code class="codeph">UNDO TABLESPACE</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2688" headers="d69128e1878 ">
                                 <p><code class="codeph">使用[COMPRESSED] BACKUPSET</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2688 d69128e1881 ">
                                 <p>指定正在恢复的文件必须作为压缩备份集从远程数据库传输，如果<code class="codeph">USING COMPRESSED BACKUPSET</code> 。默认情况下，RMAN将文件作为备份集传输。因此，即使您不使用<code class="codeph">USING BACKUPSET</code>子句，文件也会作为备份集传输。来自RMAN配置的压缩算法用于执行压缩。您可以通过在<code class="codeph">RECOVER</code>命令之前运行<code class="codeph">SET COMPRESSION ALGORITHM</code>来使用不同的压缩算法。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2709" headers="d69128e1878 ">
                                 <p><code class="codeph">USING</code> <code class="codeph"><span class="codeinlineitalic">'filename'</span></code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2709 d69128e1881 ">
                                 <p></p>
                                 <p>执行PDB跨平台传输到不同的目标CDB。包含将PDB插入目标CDB所需的元数据的XML文件使用<code class="codeph"><span class="codeinlineitalic">filename</span></code>指定。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2726" headers="d69128e1878 ">
                                 <p><code class="codeph">确认标题</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2726 d69128e1881 ">
                                 <p>报告和验证 - 但不还原 -  RMAN可用于还原恢复所需文件的备份。</p>
                                 <p>使用<code class="codeph">VALIDATE HEADER</code>运行<code class="codeph">RECOVER</code>时，RMAN执行与指定<code class="codeph">RESTORE ...</code>时相同的功能<code class="codeph">RESTORE ...</code> <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFAJFI">PREVIEW</a></code>选项。但是，除了列出还原和恢复所需的文件之外，RMAN还会验证备份文件头，以确定磁盘上或介质管理目录中的文件是否与RMAN存储库中的元数据相对应。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <code class="codeph">RESTORE ...</code>的说明<code class="codeph">RESTORE ...</code> <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFAJFI">PREVIEW</a></code>选项</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAGEBEI">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-9CC03609-50AD-4DA6-9E59-0415AC566B12"><span class="italic">remapTableList</span></p>
                  <p>本小节指定必须恢复的表或表分区。</p>
                  <p></p>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-170D876A-CABB-4A02-BC24-C35E8DE2C371">
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Element descriptions for RECOVER remapTableList" frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="29%" id="d69128e2774">语法元素</th>
                           <th align="left" valign="bottom" width="71%" id="d69128e2777">描述</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="29%" id="d69128e2782" headers="d69128e2774 ">
                              <p><code class="codeph">old_schema</code></p>
                           </td>
                           <td align="left" valign="top" width="71%" headers="d69128e2782 d69128e2777 ">
                              <p>包含要恢复的表或表分区的模式的名称。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="29%" id="d69128e2790" headers="d69128e2774 ">
                              <p><code class="codeph">old_tablename</code></p>
                           </td>
                           <td align="left" valign="top" width="71%" headers="d69128e2790 d69128e2777 ">
                              <p>必须恢复的表的名称。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="29%" id="d69128e2798" headers="d69128e2774 ">
                              <p><code class="codeph">划分</code></p>
                           </td>
                           <td align="left" valign="top" width="71%" headers="d69128e2798 d69128e2777 ">
                              <p>必须恢复的表分区的名称。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="29%" id="d69128e2806" headers="d69128e2774 ">
                              <p><code class="codeph">new_schema</code></p>
                           </td>
                           <td align="left" valign="top" width="71%" headers="d69128e2806 d69128e2777 ">
                              <p>必须恢复表和表分区的模式的名称。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="29%" id="d69128e2814" headers="d69128e2774 ">
                              <p><code class="codeph">new_tablename</code></p>
                           </td>
                           <td align="left" valign="top" width="71%" headers="d69128e2814 d69128e2777 ">
                              <p>目标数据库中已恢复的表或表分区的名称。</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A9CFEB9A-926F-4D11-AF9D-39ACD242006C">例子</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-BA087714-AD22-48A1-AA29-8D55298AFE99">
                  <p class="titleinexample">示例3-1在开放式数据库中恢复表空间</p>
                  <p><a id="d69128e2828" class="indexterm-anchor"></a><a id="d69128e2830" class="indexterm-anchor"></a>假设包含表空间<code class="codeph">users</code>数据文件的磁盘由于硬件错误而变得不可用，但在几分钟后就会修复。此示例使表空间<code class="codeph">users</code>脱机，使用自动通道将数据文件还原到其默认位置并恢复它们（删除从磁带还原的日志），然后使表空间重新联机。
                  </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户立即离线; RESTORE TABLESPACE用户; RECOVER TABLESPACE用户DELETE ARCHIVELOG MAXSIZE 2M; ALTER TABLESPACE用户在线;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A03F2C8D-C33B-4E77-8D25-F5DCE6646BB6">
                  <p class="titleinexample">示例3-2恢复还原到新位置的数据文件</p>
                  <p><a id="d69128e2845" class="indexterm-anchor"></a>此示例使用预配置的磁盘通道并手动分配一个介质管理通道以使用磁盘上的数据文件副本和磁带上的备份，并将表空间<code class="codeph">USERS</code>的数据文件还原到其他位置。
                  </p><pre class="oac_no_warn" dir="ltr">RUN {ALLOCATE CHANNEL ch1 DEVICE TYPE sbt; ALTER TABLESPACE用户立即离线;为数据文件设置NEWNAME'/disk1/oradata/prod/users01.dbf'TO'/disk2/users01.dbf'; RESTORE TABLESPACE用户; SWITCH DATAFILE ALL; RECOVER TABLESPACE用户; ALTER TABLESPACE用户在线; }</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDGFJAD">
                  <p class="titleinexample">示例3-3使用备份控制文件和恢复目录执行DBPITR</p>
                  <p><a id="d69128e2859" class="indexterm-anchor"></a>假设由于磁盘故障导致所有数据文件，所有控制文件和归档重做日志58丢失。还假设您没有增量备份。您必须使用可用的归档重做日志文件恢复数据库。您不需要还原表空间<code class="codeph">TOOLS</code>因为它在最近的备份之前是只读的。将RMAN连接到目标数据库和恢复目录后，发出以下命令：</p><pre class="oac_no_warn" dir="ltr">STARTUP FORCE NOMOUNT;运行{SET UNTIL SEQUENCE 40 THREAD 1; ＃恢复数据库，直到日志序列40 RESTORE CONTROLFILE; ALTER DATABASE MOUNT; RESTORE DATABASE SKIP TABLESPACE工具; RECOVER DATABASE SKIP TABLESPACE工具; ALTER DATABASE OPEN RESETLOGS;</pre><p>RMAN自动跳过数据文件<code class="codeph">8</code>的恢复和恢复，数据文件<code class="codeph">8</code>是只读表空间中的数据文件。以下部分示例输出表示跳过：</p><pre class="oac_no_warn" dir="ltr">使用通道ORA_DISK_1分配通道：ORA_SBT_TAPE_1通道ORA_SBT_TAPE_1：SID = 104设备类型= SBT_TAPE通道ORA_SBT_TAPE_1：Oracle Secure Backup跳过数据文件8;已恢复到文件/disk1/oradata/prod/tools01.dbf通道ORA_DISK_1：启动数据文件备份集还原。。。在19-FEB-13完成恢复使用通道ORA_DISK_1在19-FEB-13开始恢复，使用通道ORA_SBT_TAPE_1数据文件8未处理，因为文件是只读的</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDFCFJI">
                  <p class="titleinexample">示例3-4逐步更新备份</p>
                  <p><a id="d69128e2881" class="indexterm-anchor"></a><a id="d69128e2885" class="indexterm-anchor"></a>通过逐步更新备份，可以避免对数据文件进行完整映像副本备份的开销，同时还可以最大限度地减少介质恢复数据库所需的时间。此示例使您可以恢复到前一周内的任何SCN，但可以避免必须应用一天以上的重做。
                  </p>
                  <p>假设您每天运行以下脚本。首次执行时，该脚本使用指定的标记在磁盘上创建数据库的映像副本备份。在第二次到第七次执行时，脚本会创建数据库的1级差异备份。在第八次和所有后续执行中，RMAN将1级增量应用于7天前制作的数据文件副本，然后使用前一天的更改进行新的1级备份。</p><pre class="oac_no_warn" dir="ltr">运行{TRATVER COPY OF DATABASE with TAG'incr_update'ENTIL TIME'SYSDATE  -  7';用TAG'incr_update'数据库恢复补充级别1以恢复复制; }</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDEAEGH">
                  <p class="titleinexample">示例3-5从备用数据库上的控制文件丢失中恢复</p>
                  <p><a id="d69128e2898" class="indexterm-anchor"></a>假设由于介质故障而导致备用数据库<code class="codeph">dgprod3</code>控制文件丢失。主数据库和备用数据库共享SBT存储。磁带上存在主数据库控制文件的备份。
                  </p>
                  <p>启动RMAN客户端并连接到<code class="codeph">dgprod3</code>作为<code class="codeph">TARGET</code>并连接到恢复目录。以下RMAN命令还原备用数据库可用的控制文件，将文件名更新为磁盘上的现有文件，并恢复备用数据库：</p><pre class="oac_no_warn" dir="ltr">RESTORE CONTROLFILE; ALTER DATABASE MOUNT;恢复数据库;</pre><p>然后，您可以在备用数据库上启动重做应用。</p>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDHFBFI">
                  <p class="titleinexample">示例3-6恢复NOARCHIVELOG数据库</p>
                  <p><a id="d69128e2922" class="indexterm-anchor"></a><a id="d69128e2926" class="indexterm-anchor"></a><a id="d69128e2930" class="indexterm-anchor"></a>您可以通过应用增量备份对在<code class="codeph">NOARCHIVELOG</code>模式下运行的数据库执行有限的恢复恢复。增量备份必须一致，就像在<code class="codeph">NOARCHIVELOG</code>模式下运行的数据库的所有备份一样，因此在打开数据库时无法备份数据库。
                  </p>
                  <p>假设您使用恢复目录在<code class="codeph">NOARCHIVELOG</code>模式下运行数据库<code class="codeph">prod</code> 。你一直关闭数据库，使数据库的0级备份<code class="codeph">prod</code>到磁带上周日下午。您始终关闭数据库，并在星期三和星期五凌晨3:00对磁带进行1级差异增量备份。
                  </p>
                  <p>星期六，媒体故障会破坏一半的数据文件和所有在线重做日志。由于联机日志丢失，因此必须在<code class="codeph">RECOVER</code>命令中指定<code class="codeph">NOREDO</code>选项。否则，RMAN在应用星期五增量备份后搜索重做日志，并在找不到它们时发出错误消息。
                  </p>
                  <p>将RMAN连接到<code class="codeph">prod</code>和目录数据库后，恢复如下：</p><pre class="oac_no_warn" dir="ltr">STARTUP FORCE NOMOUNT; RESTORE CONTROLFILE; ＃从一致备份恢复控制文件ALTER DATABASE MOUNT; RESTORE DATABASE; ＃从一致备份恢复数据文件RECOVER DATABASE NOREDO; ＃指定NOREDO，因为联机重做日志丢失了ALTER DATABASE OPEN RESETLOGS;</pre><p>恢复的数据库仅反映星期五增量备份时的更改。由于没有归档的重做日志文件，因此无法恢复增量备份后所做的更改。</p>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A154A3CC-90CE-4DE1-AF19-54D705893DA6">
                  <p class="titleinexample">示例3-7恢复数据库中的所有块损坏</p>
                  <p>此示例运行备份验证以填充<code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>视图，然后恢复视图中记录的任何损坏块。两个命令都包含示例输出。
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt;验证<span class="bold">数据库;</span>使用通道ORA_DISK_1通道ORA_DISK_1在19-FEB-13开始验证：开始验证数据文件通道ORA_DISK_1：指定用于验证的数据文件。。。数据文件列表=================文件状态标记损坏空块阻止检查高SCN ---- ------ ---------- ---- ------------ --------------- ---------- 1 FAILED 0 4070 57600 555975文件名： /disk1/oradata/prod/system01.dbf块类型块处理失败块---------- -------------- ---------- ------数据1 41550索引0 7677其他0 4303。。。RMAN&gt; <span class="bold">恢复腐败清单;</span>使用通道ORA_DISK_1分配的通道在19-FEB-13开始恢复：ORA_SBT_TAPE_1通道ORA_SBT_TAPE_1：SID = 104设备类型= SBT_TAPE通道ORA_SBT_TAPE_1：Oracle Secure Backup搜索块图像的闪回日志，直到SCN 547548完成闪回日志搜索，恢复1块启动媒体恢复介质恢复完成，已用时间：00：00：03在19-FEB-13完成恢复</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEEDH">
                  <p class="titleinexample">示例3-8从备份中恢复表分区</p>
                  <p>此示例将表<code class="codeph">SALES</code>的分区<code class="codeph">sales_2009</code>和<code class="codeph">sales_2010</code>恢复到目标数据库的SCN为34582的时间。在源数据库中，表由架构<code class="codeph">SH</code>拥有。将这些分区导入目标数据库时，会将分区创建为名为<code class="codeph">historic_sales_2009</code>和<code class="codeph">historic_sales_2010</code>表。
                  </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE SH.SALES：SALES_2009，SH.SALES：SALES_2010 UNTIL SCN 34582 AUXILIARY DESTINATION'/ tmp / oracle / recover'REMAP TABLE'SH'。'SALES'：'SALES_2009'：'HISTORIC_SALES_2009'，'SH'。'SALES'： 'SALES_2010'： 'HISTORIC_SALES_2010';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-9C3F590D-6BC1-481C-BA17-C6F8B8432D2E">
                  <p class="titleinexample">示例3-9将表恢复到指定的日志序列并重命名表</p>
                  <p>此示例使用辅助实例将表<code class="codeph">EMP</code>从<code class="codeph">SCOTT</code>模式恢复到数据库的日志序列号为5466的时间。恢复<code class="codeph">EMP</code>表后，使用名称<code class="codeph">MY_EMP</code>将其导入目标数据库。</p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE SCOTT.EMP直到序列5466 AUXILARY DESTINATION'/ tmp / recover'REMAP TABLE'SCOTT'。'EMP'： 'MY_EMP';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-12B467A8-372A-4797-AE0D-123DA9C862C0">
                  <p class="titleinexample">示例3-10将表恢复到指定时间并进入不同的表空间</p>
                  <p>此示例将表<code class="codeph">EMP</code>和<code class="codeph">DEPT</code>恢复到<code class="codeph">UNTIL TIME</code>子句指定的时间点。这些表最初是<code class="codeph">EXAMPLE_TBS</code>表空间的一部分。但是，在恢复操作之后，它们将映射到目标数据库中的表空间<code class="codeph">MY_TBS</code> 。
                  </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE SCOTT.EMP，SCOTT.DEPT直到“TO_CHAR（'12 / 23/2012 12:00:00'，'mm / dd / yyyy hh24：mi：ss'）”AUXILIARY DESTINATION'/ tmp / oracle / recover 'REMAP TABLESPACE'Example_TBS'：'MY_TBS';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-73587392-C1F7-40A7-AD3A-7C196B9CBF45">
                  <p class="titleinexample">示例3-11将<span class="bold">多个表恢复到不同的模式</span></p>
                  <p>此示例恢复表<code class="codeph">HR.EMPLOYEES</code>和<code class="codeph">SH.CHANNELS</code>表，直到指定的SCN。恢复的<code class="codeph">EMPLOYEES</code>表映射到EXAMPLES模式，恢复的CHANNELS表映射到<code class="codeph">TEST</code>模式。这些模式已在目标数据库中创建。<code class="codeph">CHANNELS</code>表存储在<code class="codeph">SALES_TBS</code>表空间中。表恢复后，它将映射到<code class="codeph">NEW_SALES_TBS</code>表空间。辅助目标用于存储作为表恢复过程的一部分创建的临时数据库文件。
                  </p>
                  <p>要恢复此表，您必须备份<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code> ，undo， <code class="codeph">HR</code>和<code class="codeph">SH</code>表空间。创建备份时，数据库必须处于<code class="codeph">ARCHIVELOG</code>模式。
                  </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE hr.employees，sh.channels UNTIL SCN 3456 REMAP TABLE hr.employees：examples.employees，sh.channels：test.channels REMAP TABLESPACE'SALES_TBS'：'NEW_SALES_TBS'AUXILIARY DESTINATION'/ tmp / auxdest';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-E695DDEA-1C67-4E90-84AE-DAE2E787757D">
                  <p class="titleinexample">示例3-12将<span class="bold">表分区恢复为不同的模式</span></p>
                  <p>此示例将<code class="codeph">SH</code>模式中的分区<code class="codeph">SALES_H1_1997</code>和<code class="codeph">SALES_H2_1997</code>恢复到使用SCN指定的先前时间点。分区分别重命名为<code class="codeph">historic_sales_h1_1997</code>和<code class="codeph">historic_sales_h2_1997</code> 。必须将恢复的分区导入到目标数据库中存在的模式<code class="codeph">new_sh</code>中。
                  </p>
                  <p>必须将<code class="codeph">COMPATIBLE</code>设置为11.1.0或更高，因为正在恢复分区。存在指定恢复SCN处的<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code> ， <code class="codeph">UNDO</code>和<code class="codeph">SH</code>表空间的备份。创建备份时，数据库必须处于<code class="codeph">ARCHIVELOG</code>模式。
                  </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE sh.sales：sales_h1_1997，sh.sales：sales_h2_1997 UNTIL SCN 810234878 REMAP TABLE sh.sales：sales_h1_1997：sh.historic_sales_h1_1997，sh.sales：sales_h2_1997：sh.historic_sales_h2_1997 AUXILIARY DESTINATION'/ tmp / auxdest /';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-4E82B26B-4CFA-449E-A75C-E45070D9DA23">
                  <p class="titleinexample">示例3-13 <span class="bold">将PDB的跨平台备份恢复到目标CDB</span></p>
                  <p></p>
                  <p>此示例在目标数据库上还原PDB <code class="codeph">pdb2</code>的跨平台一致增量级别1备份。目标CDB和源CDB位于不同的平台上，但使用相同的endian格式。
                  </p>
                  <p><code class="codeph">USING</code>子句指定XML文件的名称，该文件包含将PDB插入目标CDB所需的元数据。 <code class="codeph">FOREIGN DATAFILECOPY</code>子句列出了在恢复此PDB的数据文件时创建的所有数据文件。需要对所有这些数据文件执行恢复。<code class="codeph">FILE_NAME_CONVERT</code>子句指定必须如何在目标CDB中重命名源CDB上的文件名</p><pre class="pre codeblock"><code>从PLATFORM'Linux x86 64位'使用'/u02/backup_restore/metadata_pdb2.xml'FILE_NAME_CONVERT =（'/ u01 / oradata'，'/ u02 / oradata / cdb'）FOREIGN DATAFILECOPY'/ u02 / oradata / pdb1恢复。 dbf'，'/ u02 / oradata / pdb1_tmp.dbf'FROM BACKUPSET'/u02/backup_restore/bkup_level1_pdb1.bck';</code></pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
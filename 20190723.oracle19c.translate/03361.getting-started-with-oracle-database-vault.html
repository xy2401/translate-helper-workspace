<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Before you can start using Oracle Database Vault, you must register it with the Oracle database."></meta>
      <meta name="description" content="Before you can start using Oracle Database Vault, you must register it with the Oracle database."></meta>
      <title>Oracle Database Vault入门</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide "></meta>
      <meta property="og:description" content="Before you can start using Oracle Database Vault, you must register it with the Oracle database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-vault-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-28T15:24:22-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96302-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="what-to-expect-after-you-enable-oracle-database-vault.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configuring-realms.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Vault Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DVADM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="what-to-expect-after-you-enable-oracle-database-vault.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configuring-realms.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Database Vault入门</li>
            </ol>
            <a id="GUID-D3F37B71-0935-462C-A459-557D28F8CF20" name="GUID-D3F37B71-0935-462C-A459-557D28F8CF20"></a><a id="DVADM002"></a>
            
            <h2 id="DVADM-GUID-D3F37B71-0935-462C-A459-557D28F8CF20" class="sect2"><span class="enumeration_chapter">3</span> Oracle Database Vault入门</h2>
         </header>
         <div class="ind">
            <div>
               <p>在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D">关于使用Oracle数据库注册Oracle Database Vault</a><br>安装Oracle数据库之后，必须使用安装它的Oracle数据库注册（即配置和启用）Oracle Database Vault。
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D">在多租户环境中向Oracle数据库注册Oracle Database Vault</a><br>您可以基于多种方案在多租户环境中注册Oracle Database Vault。
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB">在非多租户环境中注册数据库保管库</a><br>您可以在非多租户环境中从SQL * Plus注册Oracle Database Vault。
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2">验证是否已配置并启用数据库保管库</a><br><code class="codeph">DBA_DV_STATUS</code> ， <code class="codeph">CDB_DV_STATUS</code> ， <code class="codeph">DBA_OLS_STATUS</code>和<code class="codeph">CDB_OLS_STATUS</code>数据字典视图验证是否已配置并启用Oracle数据库。
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a><br>Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD">快速入门教程：从DBA访问保护架构</a><br>本教程介绍如何围绕<code class="codeph">HR</code>模式创建领域。
                  </li>
               </ul>
            </div>
            <a id="DVADM71415"></a><div class="props_rev_3"><a id="GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D" name="GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D"></a><h3 id="DVADM-GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D" class="sect3">关于使用Oracle数据库注册Oracle Database Vault</h3>
               <div>
                  <p>安装Oracle数据库之后，必须使用安装它的Oracle数据库注册（即配置和启用）Oracle Database Vault。</p>
                  <p>当您选择在安装过程中包含默认数据库时，Oracle数据库包括Database Vault，但您必须先注册它才能使用它。如果您创建自定义数据库，则可以使用DBCA为其安装和启用Database Vault。注册过程启用Oracle Label Security（如果尚未启用）。Oracle Database Vault需要Oracle Label Security，但除非您单独开始使用Oracle Label Security并创建Oracle Label Security策略，否则它不需要单独的许可证。此过程适用于CDB根，应用程序根目录和当前可插拔数据库（PDB），以及单实例和Oracle Real Application Clusters（Oracle RAC）安装。在多租户数据库中，必须先使用CDB根配置Database Vault，然后才能配置任何PDB Database Vault。</p>
                  <p>作为注册过程的一部分，您创建了Database Vault备份帐户。这些是包含关键数据库保管库角色的帐户。最初使用这些帐户将角色置备到具有管理权限的命名用户。维护备份帐户将允许您从命名用户中恢复丢失或以某种方式错放其凭据，因为<code class="codeph">SYS</code>将无法为具有这些角色的用户重置这些密码。
                  </p>
                  <p>您可以在多租户和非多租户环境中注册Oracle数据库。对于多租户环境，您可以选择多种方法进行注册。</p>
                  <div class="infoboxnote" id="GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D__GUID-1E94AF86-0609-4112-AB72-4547728B0DE9">
                     <p class="notep1">注意：</p>如果您已从早于Oracle Database 12 <span class="italic">c</span>的版本升级，并且在早期版本中已启用早期Oracle Database Vault，则在升级过程完成后，您必须使用<code class="codeph">DBMS_MACADM.ENABLE_DV</code>过程启用Oracle Database Vault 。
                     <p>在多租户环境中，如果要从版本12c之前的版本迁移非Database Vault注册的Oracle数据库，则必须手动安装Database Vault。</p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DVADM30031"></a><div class="props_rev_3"><a id="GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" name="GUID-68558E32-ABD0-4495-8677-4F9E09283E5D"></a><h3 id="DVADM-GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" class="sect3">在多租户环境中向Oracle数据库注册Oracle Database Vault</h3>
               <div>
                  <p>您可以基于多种方案在多租户环境中注册Oracle Database Vault。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864">关于在多租户环境中注册Database Vault</a><br>在多租户环境中，必须先在CDB根目录中注册Oracle Database Vault，然后才能在任何关联的PDB中注册Database Vault。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A">在CDB根目录中注册Database Vault</a><br>在多租户环境中，您向将使用CDB根目录中的数据库保管库强制角色的普通用户注册Oracle Database Vault。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193">注册Database Vault公共用户以管理特定PDB</a><br>在多租户环境中，您必须首先在根目录中注册Oracle Database Vault，然后在PDB中注册。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-75E90559-133D-4B5E-B658-D77810B590C6">注册Database Vault本地用户以管理特定PDB</a><br>在多租户环境中，您必须先在根目录中注册Oracle Database Vault，然后再在PDB中注册。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-54699671-483A-49EF-B900-81D286845E8E">插入启用Database Vault的PDB</a><br>在SQL * Plus中，在多租户环境中，您可以插入已启用Database Vault的数据库。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260">在多租户环境中手动安装Oracle Database Vault</a><br>在某些情况下，对于多租户环境，您必须手动安装Oracle Database Vault。例如，没有Database Vault的11g Oracle数据库升级到版本12c，然后转换为PDB以插入12c Database Vault启用的数据库。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864" name="GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864"></a><h4 id="DVADM-GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864" class="sect4">关于在多租户环境中注册Database Vault</h4>
                  <div>
                     <p>在多租户环境中，必须先在CDB根目录中注册Oracle Database Vault，然后才能在任何关联的PDB中注册Database Vault。</p>
                     <p>在CDB根目录中分配了<code class="codeph">DV_OWNER</code>和<code class="codeph">DV_ACCTMGR</code>角色的普通用户也可以在PDB中具有相同的角色。PDB可以使用相同的公共用户注册Database Vault，也可以使用单独的PDB本地用户。<code class="codeph">DV_ACCTMGR</code>角色通常授予CDB根目录中的公共用户。当您使用CDB根注册Database Vault时，可以将<code class="codeph">DV_OWNER</code>本地或通常授予CDB根公共用户。在本地向普通用户授予<code class="codeph">DV_OWNER</code>可防止常见的<code class="codeph">DV_OWNER</code>用户在任何PDB中使用此角色。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71417"></a><div class="props_rev_3"><a id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" name="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A"></a><h4 id="DVADM-GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" class="sect4">在CDB根目录中注册Database Vault</h4>
                  <div>
                     <p>在多租户环境中，您向将使用CDB根目录中的数据库保管库强制角色的普通用户注册Oracle Database Vault。</p>
                     <ol>
                        <li class="stepexpand"><span>在多租户环境中，以具有创建用户权限并授予<code class="codeph">CREATE SESSION</code>和<code class="codeph">SET CONTAINER</code>权限的用户身份登录数据库实例的根目录。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>sqlplus c ## dba_debra输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand" id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__CHDGDEIB"><span>选择将用于数据库保管库所有者（ <code class="codeph">DV_OWNER</code>角色）和数据库保管库客户管理器（ <code class="codeph">DV_ACCTMGR</code>角色）帐户的用户帐户（或创建新用户）。</span><div>
                              <p>Oracle强烈建议您为每个角色维护两个帐户。一个帐户（主要命名的用户帐户）将在日常使用，另一个帐户将用作备份帐户，以防主帐户的密码丢失并且必须重置。</p>
                           </div>
                           <div>
                              <p>使用<code class="codeph">c##</code>或<code class="codeph">C##</code>这些帐户的名称。例如：</p><pre class="pre codeblock"><code>GRANT CREATE SESSION，SET CONTAINER to c ## sec_admin_owen IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL; GRANT CREATE SESSION，SET CONTAINER to c ## dbv_owner_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL; GRANT CREATE SESSION，SET CONTAINER to c ## accts_admin_ace IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL; GRANT CREATE SESSION，SET CONTAINER to c ## dbv_acctmgr_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;</code></pre><p>在本规范中：</p>
                              <ul id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__UL_EFL_1LP_GFB" style="list-style-type:disc">
                                 <li>如果新角色<code class="codeph">DV_ADMIN</code>和<code class="codeph">DV_ACCTMGR</code>尚不存在，则创建主帐户（ <code class="codeph">c##sec_admin_owen</code>和<code class="codeph">c##accts_admin_ace</code> ）。</li>
                                 <li>使用安全密码替换<span class="italic"><code class="codeph">password</code></span> 。
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限以<code class="codeph">SYS</code>用户身份连接到root</span><div><pre class="pre codeblock"><code>CONN SYS AS SYSDBA输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>配置两个备份Database Vault用户帐户。</span><div>例如：<pre class="pre codeblock"><code>BEGIN CONFIGURE_DV（dvowner_uname =&gt;'c ## dbv_owner_root_backup'，dvacctmgr_uname =&gt;'c ## dbv_acctmgr_root_backup'，force_local_dvowner =&gt; FALSE）;结束; /</code></pre></div>
                           <div>在此示例中，将<code class="codeph">force_local_dvowner</code>设置为<code class="codeph">FALSE</code>可使公共用户具有与此CDB根关联的PDB的<code class="codeph">DV_OWNER</code>权限。将其设置为<code class="codeph">TRUE</code>限制公共<code class="codeph">DV_OWNER</code>用户仅具有CDB根的<code class="codeph">DV_OWNER</code>角色权限。如果您将<code class="codeph">DV_OWNER</code>本地授予CDB根公共用户，则该用户无法将<code class="codeph">DV_OWNER</code>角色共同授予任何其他用户。
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译根目录中的无效对象。</span><div><pre class="pre codeblock"><code>@？/rdbms/admin/utlrp.sql</code></pre><p>如果脚本提供说明，请按照说明操作，然后再次运行脚本。如果脚本异常终止而未给出任何指示，则再次运行它。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>作为刚刚配置的主Database Vault Owner用户连接到root。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_owner_root_backup输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令之一启用Oracle Database Vault：</span><div>
                              <ul id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__UL_LYQ_35D_R2B" style="list-style-type:disc">
                                 <li>
                                    <p>要使Oracle Database Vault能够使用常规模式：</p><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></li>
                                 <li>
                                    <p>如果每个关联的PDB都需要在此数据库中启用Database Vault，请使用以下命令。（完成此过程后，您需要启用每个PDB。）在重新启动数据库之后，未启用Database Vault的PDB将处于受限模式，直到PDB中启用了Database Vault：</p><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV（strict_mode =&gt;'y'）;</code></pre></li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限进行连接。</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>重启数据库。</span><div><pre class="pre codeblock"><code>关机立即启动</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>验证是否已安装并启用Oracle Database Vault和Oracle Label Security。</span><div><pre class="pre codeblock"><code>SELECT * FROM DBA_DV_STATUS; SELECT * FROM DBA_OLS_STATUS; SELECT * FROM CDB_DV_STATUS; SELECT * FROM CDB_OLS_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_owner_root_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO c ## sec_admin_owen WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予备份<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_acctmgr_root_backup输入密码： <span class="italic">password</span> GRANT DV_ACCTMGR to c ## accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault提供基于特定用户任务的默认角色，并遵循职责分离概念。">Oracle Database Vault角色</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-0C1B6A4D-EB14-4C69-B569-2128BC66C24C" title="DV_PATCH_ADMIN角色用于修补操作。">DV_PATCH_ADMIN数据库保管库数据库修补程序角色</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E" title="CONFIGURE_DV过程配置最初的两个Oracle数据库用户帐户，分别被授予DV_OWNER和DV_ACCTMGR角色。">CONFIGURE_DV一般系统维护程序</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71429"></a><div class="props_rev_3"><a id="GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193" name="GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193"></a><h4 id="DVADM-GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193" class="sect4">注册Database Vault公共用户以管理特定PDB</h4>
                  <div>
                     <p>在多租户环境中，您必须首先在根目录中注册Oracle Database Vault，然后在PDB中注册。</p>
                     <div class="section">如果您首先尝试在PDB中注册，则会<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code>错误<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code> 。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>如果尚未执行此操作，请标识或创建命名的公共用户帐户，以用作Database Vault帐户以及关联的备份帐户。</span></li>
                        <li class="stepexpand"><span>确保您已在CDB根目录中注册了Oracle Database Vault，并且<code class="codeph">DV_OWNER</code>角色已共同授予普通用户。</span></li>
                        <li class="stepexpand"><span>以PDB本地的管理员身份连接到PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT dba_debra @ <span class="italic">pdb_name</span>输入密码： <span class="italic">密码</span>
</code></pre><p>要查找可用的PDB，请查询<code class="codeph">DBA_PDBS</code>数据字典视图。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>为此PDB的用户授予<code class="codeph">CREATE SESSION</code>和<code class="codeph">SET CONTAINER</code>权限。</span><div>例如：<pre class="pre codeblock"><code>GRANT CREATE SESSION，SET CONTAINER to c ## sec_admin_owen CONTAINER = CURRENT; GRANT CREATE SESSION，SET CONTAINER to c ## accts_admin_ace CONTAINER = CURRENT;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以<code class="codeph">SYS</code>用户身份连接<code class="codeph">SYSDBA</code>管理权限</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>仍在PDB中时，配置两个备份Database Vault用户帐户。</span><div><pre class="pre codeblock"><code>BEGIN CONFIGURE_DV（dvowner_uname =&gt;'c ## dbv_owner_root_backup'，dvacctmgr_uname =&gt;'c ## dbv_acctmgr_root_backup'）;结束; /</code></pre><p>在此示例中，省略<code class="codeph">force_local_dvowner</code>参数，因为它是不必要的。在PDB中配置的所有普通用户都受限于PDB的范围。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译此PDB中的无效对象。</span><div><pre class="pre codeblock"><code>@？/rdbms/admin/utlrp.sql</code></pre><p>如果脚本提供说明，请按照说明操作，然后再次运行脚本。如果脚本异常终止而未给出任何指示，则再次运行它。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>作为您刚刚配置的备份Database Vault Owner用户连接到PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT c ## dbv_owner_root_backup @ <span class="italic">pdb_name</span>输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>在此PDB中启用Oracle Database Vault。</span><div><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限连接到CDB。</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>关闭并重新打开PDB。</span><div>例如：<pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE; ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>验证是否已为Database Vault配置和启用PDB。</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span> SELECT * FROM DBA_DV_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_owner_root_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO c ## sec_admin_owen WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予主<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_acctmgr_root_backup输入密码： <span class="italic">password</span> GRANT DV_ACCTMGR to c ## accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault提供基于特定用户任务的默认角色，并遵循职责分离概念。">Oracle Database Vault角色</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-0C1B6A4D-EB14-4C69-B569-2128BC66C24C" title="DV_PATCH_ADMIN角色用于修补操作。">DV_PATCH_ADMIN数据库保管库数据库修补程序角色</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E" title="CONFIGURE_DV过程配置最初的两个Oracle数据库用户帐户，分别被授予DV_OWNER和DV_ACCTMGR角色。">CONFIGURE_DV一般系统维护程序</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" title="在多租户环境中，您向将使用CDB根目录中的数据库保管库强制角色的普通用户注册Oracle Database Vault。">在CDB根目录中注册Database Vault</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-75E90559-133D-4B5E-B658-D77810B590C6" name="GUID-75E90559-133D-4B5E-B658-D77810B590C6"></a><h4 id="DVADM-GUID-75E90559-133D-4B5E-B658-D77810B590C6" class="sect4">注册Database Vault本地用户以管理特定PDB</h4>
                  <div>
                     <p>在多租户环境中，您必须先在根目录中注册Oracle Database Vault，然后再在PDB中注册。</p>
                     <div class="p">如果您首先尝试在PDB中注册，则会<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code>错误<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code> 。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在多租户环境中，以具有创建用户权限并授予<code class="codeph">CREATE SESSION</code>和<code class="codeph">SET CONTAINER</code>权限的用户身份登录PDB。</span><div>例如：<pre class="pre codeblock"><code>sqlplus sec_admin <span class="italic">@pdb_name</span>输入密码： <span class="italic">密码</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>如果不使用现有的本地用户命名帐户来创建新的Database Vault角色，请创建新的命名本地用户帐户。</span><div>在这两种情况下，您必须创建备份帐户以保留数据库保管库角色，以防命名用户丢失或忘记其密码。</div>
                           <div><pre class="pre codeblock"><code>GRANT创建会话，将容器设置为sec_admin_owen通过<span class="italic">密码</span>识别; GRANT创建会话，将容器设置为dbv_owner_backup IDENTIFIED BY <span class="italic">password</span> ; GRANT创建会话，将容器设置为accts_admin_ace通过<span class="italic">密码</span>识别; GRANT创建会话，将容器设置为dbv_acctmgr_backup IDENTIFIED BY <span class="italic">密码</span> ;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>确保您已在CDB根目录中注册了Oracle Database Vault。</span><div>暂时连接到根，然后查询<code class="codeph">DBA_DV_STATUS</code>视图。<pre class="pre codeblock"><code>CONNECT SYS / AS SYSDBA输入密码： <span class="italic">password</span> SELECT * FROM DBA_DV_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限以<code class="codeph">SYS</code>用户身份连接到PDB。</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>仍在PDB中时，配置两个备份Database Vault用户帐户。</span><div><pre class="pre codeblock"><code>BEGIN CONFIGURE_DV（dvowner_uname =&gt;'dbv_owner_backup'，dvacctmgr_uname =&gt;'dbv_acctmgr_backup'）;结束; /</code></pre><p>在此示例中，省略<code class="codeph">force_local_dvowner</code>参数，因为它是不必要的。在PDB中配置时，将在本地授予Database Vault角色。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译此PDB中的无效对象。</span><div><pre class="pre codeblock"><code>@？/rdbms/admin/utlrp.sql</code></pre><p>如果脚本提供说明，请按照说明操作，然后再次运行脚本。如果脚本异常终止而未给出任何说明，请再次运行。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>作为您刚刚配置的备份Database Vault Owner用户连接到PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT dbv_owner_backup @ <span class="italic">pdb_name</span>输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>在此PDB中启用Oracle Database Vault。</span><div><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限连接到CDB。</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>关闭并重新打开PDB。</span><div><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE; ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>验证是否已为Database Vault配置和启用PDB。</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span> SELECT * FROM DBA_DV_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT dbv_owner_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO sec_admin_owen WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予备份<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT dbv_acctmgr_backup输入密码： <span class="italic">password</span> GRANT DV_ACCTMGR to c ## accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault提供基于特定用户任务的默认角色，并遵循职责分离概念。">Oracle Database Vault角色</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" title="在多租户环境中，您向将使用CDB根目录中的数据库保管库强制角色的普通用户注册Oracle Database Vault。">在CDB根目录中注册Database Vault</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-54699671-483A-49EF-B900-81D286845E8E" name="GUID-54699671-483A-49EF-B900-81D286845E8E"></a><h4 id="DVADM-GUID-54699671-483A-49EF-B900-81D286845E8E" class="sect4">插入启用Database Vault的PDB</h4>
                  <div>
                     <p>在SQL * Plus中，在多租户环境中，您可以插入已启用Database Vault的数据库。</p>
                     <p>在此方案中，插入的数据库具有自己的本地Database Vault帐户。请注意，如果将启用了Database Vault的数据库插入未启用Database Vault的CDB，则PDB将保持受限模式，直到您在CDB中启用Database Vault，然后重新启动CDB。如果将未启用Database Vault的PDB插入启用了Database Vault的CDB，则PDB将保持受限模式，直到您在PDB中启用Database Vault，然后重新启动PDB。仍然可以使用此插入的非Database Vault启用的PDB。但是，如果CDB是使用严格选项集启用的Database Vault，则PDB必须启用Database Vault。</p>
                     <p>在插入支持Database Vault的PDB并且将数据库保管库角色授予普通用户之前，请确保完全了解插入PDB对普通用户的影响。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../multi/plugging-in-a-pdb.html#MULTI-GUID-E7122CD7-47CA-4A89-A419-8CDEE622AF70" target="_blank"><span class="italic">Oracle多租户管理员指南</span></a></li>
                           <li><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG-GUID-81D0494C-E838-4DD9-AC82-B56473F98D06" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260" name="GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260"></a><h4 id="DVADM-GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260" class="sect4">在多租户环境中手动安装Oracle Database Vault</h4>
                  <div>
                     <p>在某些情况下，对于多租户环境，您必须手动安装Oracle Database Vault。例如，没有Database Vault的11g Oracle数据库升级到版本12c，然后转换为PDB以插入12c Database Vault启用的数据库。</p>
                     <div class="section">如果在将PDB插入安装了Database Vault和Label Security的CDB时此PDB没有这些产品，则必须在PDB中手动安装Oracle Database Vault（和Oracle Label Security）。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>作为已被授予<code class="codeph">SYSDBA</code>管理权限的用户，请登录到要在其中安装Oracle Database Vault的PDB。</span><div>
                              <p>例如，要登录名为<code class="codeph">hr_pdb</code>的PDB：</p><pre class="pre codeblock"><code>sqlplus sec_admin @ hr_pdb as sysdba输入密码： <span class="italic">password</span></code></pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如有必要，请检查此PDB上是否已安装Oracle Database Vault和Oracle Label Security。</span><div>如果存在<code class="codeph">DVSYS</code>帐户（用于Database Vault）和<code class="codeph">LBACSYS</code>帐户（用于标签安全性），则PDB上存在Database Vault和Label Security。</div>
                           <div><pre class="pre codeblock"><code>SELECT USERNAME FROM DBA_USERS WHERE USERNAME IN（'DVSYS'，'LBACSYS'）;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>如果既未安装Database Vault也未安装Label Security，则通过执行<code class="codeph">catols.sql</code>脚本来安装Oracle Label Security。</span><div><pre class="pre codeblock"><code>@ $ ORACLE_HOME / RDBMS /管理/ catols.sql</code></pre><p>必须先安装Oracle Label Security，然后才能安装Oracle Database Vault。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>通过执行<code class="codeph">catmac.sql</code>脚本来安装Oracle Database Vault。</span><div><pre class="pre codeblock"><code>@ $ ORACLE_HOME / RDBMS /管理/ catmac.sql</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>在<code class="codeph">Enter value for 1</code>提示符下，输入<code class="codeph">SYSTEM</code>作为表空间以安装<code class="codeph">DVSYS</code> 。</span></li>
                        <li class="stepexpand"><span>在<code class="codeph">Enter value for 2</code>提示符下，输入PDB的临时表空间。</span></li>
                     </ol>
                     <div class="section">安装完成后，您可以在PDB中注册Oracle Database Vault。如果数据库保管库尚未在CDB中注册，则必须先关闭PDB，然后才能在CDB根目录中注册Database Vault。数据库保管库必须先在CDB根目录中注册，然后才能在PDB中注册。数据库保管库在CDB根目录中注册并且数据库已重新启动后，您可以打开PDB并注册数据库保管库。</div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DVADM71416"></a><div class="props_rev_3"><a id="GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB" name="GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB"></a><h3 id="DVADM-GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB" class="sect3">在非多租户环境中注册数据库保管库</h3>
               <div>
                  <p>您可以在非多租户环境中从SQL * Plus注册Oracle Database Vault。</p>
                  <ol>
                     <li class="stepexpand"><span>以具有创建用户帐户权限的用户身份登录数据库实例，并将<code class="codeph">CREATE SESSION</code>权限授予其他用户。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin输入密码： <span class="italic">密码</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>识别（或在必要时创建新的命名用户帐户）命名用户帐户，以用于数据库保管库所有者（ <code class="codeph">DV_OWNER</code>角色）和数据库保管库客户管理器（ <code class="codeph">DV_ACCTMGR</code>角色）帐户。</span><div>
                           <p>Oracle强烈建议您为每个角色创建两个帐户。一个帐户（主要命名的用户帐户）将在日常使用，另一个帐户将用作备份帐户，以防主帐户的密码丢失并且必须重置。</p>
                        </div>
                        <div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">GRANT创建会话到sec_admin_owen IDENTIFIED BY <span class="italic">密码</span> ; GRANT创建会话到dbv_owner_backup IDENTIFIED BY <span class="italic">密码</span> ; GRANT创建会话到accts_admin_ace IDENTIFIED BY <span class="italic">密码</span> ; GRANT创建会话到dbv_acctmgr_backup IDENTIFIED BY <span class="italic">密码</span> ;</pre><p>请遵循“ <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle数据库安全指南”中</cite></span></a>的准则，将<span class="italic"><code class="codeph">password</code></span>替换为安全的密码。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限进行连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA输入密码： <span class="italic">密码</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>使用两个备份用户帐户配置Database Vault。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN CONFIGURE_DV（dvowner_uname =&gt;'dbv_owner_backup'，dvacctmgr_uname =&gt;'dbv_acctmgr_backup'）;结束; /</pre><p>请勿为这些用户帐户输入名称<code class="codeph">DV_OWNER</code> ， <code class="codeph">DV_ACCTMGR</code>或任何其他Database Vault角色的名称。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译失效的对象。</span><div><pre class="oac_no_warn" dir="ltr">@？/rdbms/admin/utlrp.sql</pre><p>如果脚本为您提供了任何说明，请按照它们操作，然后再次运行该脚本。如果脚本异常终止而未给出任何说明，请再次运行。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>作为刚刚配置的备份Database Vault Owner用户进行连接。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT dbv_owner_backup输入密码： <span class="italic">密码</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>启用Oracle Database Vault。</span><div><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_DV;</pre></div>
                     </li>
                     <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限进行连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA</pre></div>
                     </li>
                     <li class="stepexpand"><span>重启数据库。</span><div><pre class="oac_no_warn" dir="ltr">关机立即启动</pre></div>
                     </li>
                     <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT dbv_owner_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO sec_admin_owen WITH ADMIN OPTION;</pre></div>
                     </li>
                     <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予主<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT dbv_acctmgr_backup输入密码： <span class="italic">密码</span> GRANT DV_ACCTMGR TO accts_admin_ace WITH ADMIN OPTION;</pre></div>
                     </li>
                     <li class="stepexpand"><span>验证配置是否成功。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA SELECT * FROM DBA_DV_STATUS; SELECT * FROM DBA_OLS_STATUS;</pre></div>
                     </li>
                     <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                        <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault提供基于特定用户任务的默认角色，并遵循职责分离概念。">Oracle Database Vault角色</a></li>
                        <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DVADM71421"></a><div class="props_rev_3"><a id="GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" name="GUID-B5569AED-AC16-482C-BA6D-34E275F016D2"></a><h3 id="DVADM-GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" class="sect3">验证是否已配置并启用数据库保管库</h3>
               <div>
                  <p><code class="codeph">DBA_DV_STATUS</code> ， <code class="codeph">CDB_DV_STATUS</code> ， <code class="codeph">DBA_OLS_STATUS</code>和<code class="codeph">CDB_OLS_STATUS</code>数据字典视图验证是否已配置并启用Oracle数据库。
                  </p>
                  <div class="section">除Oracle Database Vault管理员外，Oracle Database <code class="codeph">SYS</code>用户和已被授予<code class="codeph">DBA</code>角色的用户可以查询这些视图。
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于Database Vault：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果要查找非多租户数据库的数据库保管库状态，或者仅在根目录或单个PDB的多租户环境中，请查询<code class="codeph">DBA_DV_STATUS</code> 。例如：</p><pre class="pre codeblock"><code>SELECT * FROM DBA_DV_STATUS;</code></pre><p>输出类似于以下内容：</p><pre class="pre codeblock"><code>NAME STATUS -------------------- ----------- DV_CONFIGURE_STATUS TRUE DV_ENABLE_STATUS TRUE</code></pre></li>
                              <li>
                                 <p>如果要在多租户环境中查找所有PDB的数据库保管库状态（作为具有管理权限的公共用户），请查询<code class="codeph">CDB_DV_STATUS</code> ，它提供了容器ID（ <code class="codeph">CON_ID</code> ）字段的添加。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>对于Oracle Label Security，请查询以下数据字典视图，这些视图与其Database Vault等效视图类似：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">DBA_OLS_STATUS</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">CDB_OLS_STATUS</code></p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DVADM30001"></a><div class="props_rev_3"><a id="GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" name="GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6"></a><h3 id="DVADM-GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" class="sect3">从Oracle Enterprise Cloud Control登录Oracle Database Vault</h3>
               <div>
                  <p>Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。</p>
                  <div class="section">Oracle Database Vault页面可用于从集中控制台管理和监视受Database Vault保护的数据库。通过此控制台，您可以自动执行警报，查看Database Vault报告以及将Database Vault策略传播到其他受Database Vault保护的数据库。</div>
                  <!-- class="section" -->
                  <div class="p">在尝试登录之前，请确保已按照Oracle Enterprise Manager联机帮助配置了计划与Database Vault一起使用的Cloud Control目标数据库。还必须在Oracle数据库中注册Oracle Database Vault。</div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>启动云控制。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">https://myserver.example.com:7799/em</pre></div>
                     </li>
                     <li class="stepexpand"><span>以安全管理员身份登录Cloud Control。</span></li>
                     <li class="stepexpand"><span>在Cloud Control主页中，从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库”</span> 。</span></li>
                     <li class="stepexpand"><span>在“数据库”页面中，选择要连接的受Oracle Database Vault保护的数据库的链接。</span><div>
                           <p>将显示“数据库”主页。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>从<span class="bold">Security</span>菜单中，选择<span class="bold">Database Vault</span> 。</span><div>
                           <p>出现“数据库登录”页面。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>输入以下信息：</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold">用户名：</span>输入已被授予相应Oracle Database Vault角色的用户的名称：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>创建和传播Database Vault策略： <code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>角色， <code class="codeph">SELECT ANY DICTIONARY</code>权限</p>
                                    </li>
                                    <li>
                                       <p>查看Database Vault警报和报告： <code class="codeph">DV_OWNER</code> ， <code class="codeph">DV_ADMIN</code>或<code class="codeph">DV_SECANALYST</code>角色， <code class="codeph">SELECT ANY DICTIONARY</code>特权</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p><span class="bold">密码：</span>输入您的密码。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">角色：</span>从列表中选择<span class="bold">NORMAL</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">另存为：</span>如果您希望下次显示此页面时自动填写这些凭据，请选中此复选框。凭据以安全的方式存储在企业管理器中。访问这些凭据取决于当前登录的用户。
                                 </p>
                              </li>
                           </ul>
                           <p>将显示Database Vault主页。</p><br><img src="img/em_dv_home_page.png" alt="em_dv_home_page.png的描述如下" title="em_dv_home_page.png的描述如下" longdesc="img_text/em_dv_home_page.html"><br><a href="img_text/em_dv_home_page.html">em_dv_home_page.png插图的描述</a><br></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-F9FF7E47-641E-45D3-8EF2-3EA6B9FFD6A3" title="Oracle Database Vault提供了管理Oracle Database Vault所需的一组角色。">关于Oracle Database Vault角色</a></li>
                        <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-990B6C45-901E-46B5-B5B2-0CE24C3ED42E" title="Oracle Database Vault管理员可以在Oracle Enterprise Manager云控制中执行任务，例如将策略传播到其他数据库。">将Oracle Database Vault与Oracle Enterprise Manager配合使用</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DVADM70135"></a><div class="props_rev_3"><a id="GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" name="GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD"></a><h3 id="DVADM-GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" class="sect3">快速入门教程：从DBA访问保护架构</h3>
               <div>
                  <p>本教程介绍如何围绕<code class="codeph">HR</code>模式创建领域。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B">关于本教程</a><br>在本教程中，您将使用Oracle Database Vault PL / SQL包为<code class="codeph">HR</code>示例数据库模式创建一个领域。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-872977EE-3DAD-46F4-8AE3-36176093F999">步骤1：以SYSTEM身份登录以访问HR模式</a><br>您必须为本教程启用<code class="codeph">HR</code>模式。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C">第2步：创建一个领域</a><br>领域可以保护一个或多个模式，单个模式对象和数据库角色。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16">第3步：创建SEBASTIAN用户帐户</a><br>在此阶段，没有数据库帐户或角色有权访问或以其他方式操作域将保护的数据库对象。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7">第4步：让用户SEBASTIAN测试领域</a><br>在此阶段，让用户<code class="codeph">SEBASTIAN</code>测试该领域，即使他具有<code class="codeph">READ ANY TABLE</code>系统特权。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833">第5步：为领域创建授权</a><br>接下来，必须授予用户<code class="codeph">SEBASTIAN</code>对HR Apps领域的授权，以便他可以访问<code class="codeph">HR.EMPLOYEES</code>表。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7">第6步：测试领域</a><br>要测试该域，您必须尝试以<code class="codeph">HR</code>以外的用户身份访问<code class="codeph">EMPLOYEES</code>表。</li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A">步骤7：如果未启用统一审核，则运行报告</a><br>由于您为HR Apps域启用了失败审核，因此您可以生成报告以查找任何安全违规。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2">步骤8：删除本教程的组件</a><br>如果不再需要，可以删除为本教程创建的组件。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
               <a id="DVADM71114"></a><div class="props_rev_3"><a id="GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B" name="GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B"></a><h4 id="DVADM-GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B" class="sect4">关于本教程</h4>
                  <div>
                     <p>在本教程中，您将使用Oracle Database Vault PL / SQL包为<code class="codeph">HR</code>示例数据库模式创建一个领域。
                     </p>
                     <p>在<code class="codeph">HR</code>模式中， <code class="codeph">EMPLOYEES</code>表包含应该从公司中的大多数员工隐藏的工资等信息，包括具有管理访问权限的员工。要实现此目的，请将<code class="codeph">HR</code>模式添加到保护区域的安全对象中，该对象在Oracle Database Vault中称为<span class="italic">领域</span> ，位于数据库中。然后你授予这个领域有限的授权。之后，您测试领域以确保它已被正确保护。最后，要了解Oracle Database Vault如何为您在测试领域时尝试的可疑活动提供审计跟踪，您将运行报告。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70137"></a><div class="props_rev_3"><a id="GUID-872977EE-3DAD-46F4-8AE3-36176093F999" name="GUID-872977EE-3DAD-46F4-8AE3-36176093F999"></a><h4 id="DVADM-GUID-872977EE-3DAD-46F4-8AE3-36176093F999" class="sect4">步骤1：以SYSTEM身份登录以访问HR模式</h4>
                  <div>
                     <p>您必须为本教程启用<code class="codeph">HR</code>模式。
                     </p>
                     <div class="p">在开始本教程之前，请确保已安装<code class="codeph">HR</code>示例模式。<a href="../comsc/introduction-to-sample-schemas.html#COMSC005" target="_blank"><span><cite>Oracle数据库示例模式</cite></span></a>描述了如何安装示例模式。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DBA</code>角色的用户身份登录数据库实例，然后访问<code class="codeph">HR</code>模式。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus系统输入密码： <span class="italic">密码</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>在多租户环境中，连接到相应的PDB。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM @ my_pdb输入密码： <span class="italic">密码</span>
</pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>查询<code class="codeph">HR.EMPLOYEES</code>表如下。</span><div><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，来自HR.EMPLOYEES的SALARY ROWNUM &lt;10;</pre><p>输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME LAST_NAME SALARY -------------------- -------------------------  - -------- Steven King 24000 Neena Kochhar 17000 Lex De Haan 17000 Alexander Hunold 9000 Bruce Ernst 6000 David Austin 4800 Valli Pataballa 4800 Diana Lorentz 4200 Nancy Greenberg 12008 9行入选。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>如果<code class="codeph">HR</code>模式已锁定且已过期，请以<code class="codeph">DV_ACCTMGR</code>用户身份登录数据库实例，然后解锁并<code class="codeph">DV_ACCTMGR</code>该帐户。例如：</span><div><pre class="oac_no_warn" dir="ltr">sqlplus bea_dvacctmgr <span class="italic">- 对于多租户环境，sqlplus bea_dvacctmgr @hrpdb</span>输入密码： <span class="italic">password</span> ALTER USER HR <span class="italic">ACCOCO UNENOCK</span> IDENTIFIED BY <span class="italic">password</span>
</pre><p>请遵循“ <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle数据库安全指南”中</cite></span></a>的准则，将<span class="italic"><code class="codeph">password</code></span>替换为安全的密码。
                              </p>
                              <p>如您所见， <code class="codeph">SYSTEM</code>可以访问<code class="codeph">HR</code>模式的<code class="codeph">EMPLOYEES</code>表中的工资信息。这是因为<code class="codeph">SYSTEM</code>自动被授予<code class="codeph">DBA</code>角色，其中包括<code class="codeph">SELECT ANY TABLE</code>系统特权。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>不要退出SQL * Plus。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70138"></a><div class="props_rev_3"><a id="GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C" name="GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C"></a><h4 id="DVADM-GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C" class="sect4">第2步：创建一个领域</h4>
                  <div>
                     <p>领域可以保护一个或多个模式，单个模式对象和数据库角色。</p>
                     <div class="section">创建领域后，您可以创建适用于领域内架构及其架构对象的安全限制。您需要为<code class="codeph">HR</code>模式创建一个领域。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以已授予<code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>角色和<code class="codeph">SELECT ANY DICTIONARY</code>权限的用户身份从Cloud Control登录Oracle Database Vault Administrator。<a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a>说明了如何登录。</span></li>
                        <li class="stepexpand"><span>在“管理”页面的“数据库Vault组件”下，单击<span class="bold">“域”</span> 。</span></li>
                        <li class="stepexpand"><span>在Oracle Database Vault Administrator的“Realms”页面中，单击“ <span class="bold">Create”</span> 。</span></li>
                        <li class="stepexpand"><span>在“创建域”页面的“常规”下，在“ <span class="bold">名称”</span>后输入“ <code class="codeph">HR Apps</code> 。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Description</span>字段中，输入<code class="codeph">Realm to protect the HR schema</code> 。</span></li>
                        <li class="stepexpand"><span>不选中<span class="bold">Mandatory Realm</span>复选框。</span></li>
                        <li class="stepexpand"><span>在Status之后，确保选中<span class="bold">Enabled</span>以便可以使用领域。</span></li>
                        <li class="stepexpand"><span>在“审核选项”下，确保选中“ <span class="bold">审核失败”</span> ，以便稍后可以创建审核试用。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">下一步”</span>以显示“Realm安全对象”页面。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">添加”</span>按钮，在“添加安全对象”对话框中，输入以下信息：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">所有者：</span>输入<code class="codeph">HR</code>以选择<code class="codeph">HR</code>模式。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">对象类型：</span>输入<code class="codeph">TABLE</code> 。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">对象名称：</span>输入<code class="codeph">EMPLOYEES</code> 。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span><div>
                              <p><code class="codeph">HR.EMPLOYEES</code>表被添加到Create Realm：Realm Secured Objects页面。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">“完成”</span> ，然后单击“ <span class="bold">完成”</span> 。</span></li>
                     </ol>
                     <div class="section">
                        <p>在此阶段，您已创建域，但尚未为其分配任何授权。您将在本教程的后面部分进行处理。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71219"></a><div class="props_rev_3"><a id="GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16" name="GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16"></a><h4 id="DVADM-GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16" class="sect4">第3步：创建SEBASTIAN用户帐户</h4>
                  <div>
                     <p>在此阶段，没有数据库帐户或角色有权访问或以其他方式操作域将保护的数据库对象。</p>
                     <div class="section">
                        <p>因此，下一步是授权数据库帐户或数据库角色，以便他们可以访问领域中的模式。您将创建<code class="codeph">SEBASTIAN</code>用户帐户。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL * Plus中，以具有<code class="codeph">DV_ACCTMGR</code>角色的Database Vault帐户管理器身份进行<code class="codeph">DV_ACCTMGR</code> ，并创建本地用户<code class="codeph">SEBASTIAN</code> 。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT bea_dvacctmgr <span class="italic">- 或者，CONNECT bea_dvacctmgr @hrpdb</span>输入密码： <span class="italic">密码</span> GRANT创建会话以通过<span class="italic">密码</span>识别SEBASTIAN;</pre><p>使用安全密码替换<span class="italic"><code class="codeph">password</code></span> 。有关创建密码的最低要求，请参见“ <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle数据库安全指南”</cite></span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>以<code class="codeph">SYS</code>与<code class="codeph">SYSDBA</code>权限连接，然后为<code class="codeph">SEBASTIAN</code>授予以下附加权限。</span><div><pre class="oac_no_warn" dir="ltr">将SYS作为SYSDBA连接<span class="italic">- 或者，连接SYS @hrpdb</span> AS SYSDBA输入密码： <span class="italic">password</span> GRANT READ <span class="italic">SEY</span> TABLE TO SEBASTIAN;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>不要退出SQL * Plus;当你测试领域时，你需要它来进行<a href="getting-started-with-oracle-database-vault.html#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" title="要测试该域，您必须尝试以HR以外的用户身份访问EMPLOYEES表。">第6步：测试</a>领域。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7" name="GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7"></a><h4 id="DVADM-GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7" class="sect4">第4步：让用户SEBASTIAN测试领域</h4>
                  <div>
                     <p>在此阶段，让用户<code class="codeph">SEBASTIAN</code>测试该领域，即使他具有<code class="codeph">READ ANY TABLE</code>系统特权。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>以<code class="codeph">SEBASTIAN</code>用户身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT sebastian输入密码： <span class="italic">密码</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>查询<code class="codeph">HR.EMPLOYEES</code>表。</span><div><pre class="oac_no_warn" dir="ltr">从CO.EMPLOYEES中选择COUNT（*）;</pre></div>
                           <div>
                              <p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">第1行的错误：ORA-01031：权限不足</pre></div>
                        </li>
                     </ol>
                     <div class="section">即使用户<code class="codeph">SEBASTIAN</code>具有<code class="codeph">READ ANY TABLE</code>系统特权，他也无法查询<code class="codeph">HR.EMPLOYEES</code>表，因为HR Apps领域优先于<code class="codeph">READ ANY TABLE</code>系统特权。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70140"></a><div class="props_rev_3"><a id="GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833" name="GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833"></a><h4 id="DVADM-GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833" class="sect4">第5步：为领域创建授权</h4>
                  <div>
                     <p>接下来，必须授予用户<code class="codeph">SEBASTIAN</code>对HR Apps领域的授权，以便他可以访问<code class="codeph">HR.EMPLOYEES</code>表。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>在Database Vault Administrator的Realms页面中，选择领域列表中的<span class="bold">HR Apps</span> ，然后单击<span class="bold">Edit</span> 。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">下一步”</span>按钮，直到到达“域”授权页面。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">添加”</span> ，然后在“添加授权”对话框中输入以下信息：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">领域授权受让人：</span>输入<code class="codeph">SEBASTIAN</code> 。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">领域授权类型：</span>从列表中选择<span class="bold">参与者</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">领域授权规则集：</span>将此字段留空。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span><div>
                              <p>参与者授权允许HR应用领域中的用户<code class="codeph">SEBASTIAN</code>管理对HR应用领域保护的对象的访问，操纵和创建。在这种情况下， <code class="codeph">HR</code>用户和<code class="codeph">SEBASTIAN</code>是唯一允许查看<code class="codeph">EMPLOYEES</code>表的用户。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">“完成”</span> ，然后单击<span class="bold">“</span> <span class="bold">完成”</span> 。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70141"></a><div class="props_rev_3"><a id="GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" name="GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7"></a><h4 id="DVADM-GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" class="sect4">第6步：测试领域</h4>
                  <div>
                     <p>要测试该域，您必须尝试以<code class="codeph">HR</code>以外的用户身份访问<code class="codeph">EMPLOYEES</code>表。</p>
                     <div class="section">
                        <p><code class="codeph">SYSTEM</code>帐户通常可以访问<code class="codeph">HR</code>模式中的所有对象，但是现在您已经使用Oracle Database Vault保护了<code class="codeph">EMPLOYEES</code>表，现在不再是这种情况了。
                        </p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，以<code class="codeph">SYSTEM</code>身份连接。</p><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM <span class="italic">- 或者，CONNECT SYSTEM @ hrpdb</span>输入密码： <span class="italic">密码</span>
</pre></li>
                           <li>
                              <p>尝试再次访问<code class="codeph">EMPLOYEES</code>表中的薪水信息：</p><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，来自HR.EMPLOYEES的SALARY ROWNUM &lt;10;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">第1行出错：ORA-01031：权限不足</pre><p><code class="codeph">SYSTEM</code>不再能够访问EMPLOYEES表中的薪资信息。（事实上，即使用户<code class="codeph">SYS</code>也无法访问此表。）但是，用户<code class="codeph">SEBASTIAN</code>确实可以访问此信息。
                              </p>
                           </li>
                           <li>
                              <p>以<code class="codeph">SEBASTIAN</code>用户身份连接。</p><pre class="oac_no_warn" dir="ltr">CONNECT sebastian <span class="italic">- 或者，CONNECT sebastian @ hrpdb</span>输入密码： <span class="italic">密码</span>
</pre></li>
                           <li>
                              <p>执行以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，来自HR.EMPLOYEES的SALARY ROWNUM &lt;10;</pre><p>输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME LAST_NAME SALARY -------------------- -------------------------  - -------- Steven King 24000 Neena Kochhar 17000 Lex De Haan 17000 Alexander Hunold 9000 Bruce Ernst 6000 David Austin 4800 Valli Pataballa 4800 Diana Lorentz 4200 Nancy Greenberg 12008 9行入选。</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70142"></a><div class="props_rev_3"><a id="GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A" name="GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A"></a><h4 id="DVADM-GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A" class="sect4">步骤7：如果未启用统一审核，则运行报告</h4>
                  <div>
                     <p>由于您为HR Apps域启用了失败审核，因此您可以生成报告以查找任何安全违规。</p>
                     <div class="section">
                        <p>例如，您可以为在<a href="getting-started-with-oracle-database-vault.html#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" title="要测试该域，您必须尝试以HR以外的用户身份访问EMPLOYEES表。">步骤6：测试领域中</a>尝试的违规生成报告。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL * Plus中，以用户<code class="codeph">SYSTEM</code>身份连接，并确保未启用统一审核。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM <span class="italic">- 或者，CONNECT SYSTEM @hrpdb</span>输入密码： <span class="italic">password</span> SQL&gt; SELECT VALUE FROM V $ OPTION WHERE PARAMETER ='Unified Auditing';</pre><p>如果<code class="codeph">VALUE</code>返回<code class="codeph">TRUE</code> ，则无法完成此部分。转到<a href="getting-started-with-oracle-database-vault.html#GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" title="如果不再需要，可以删除为本教程创建的组件。">步骤8：删除本教程的组件</a> 。
                              </p>
                              <p>如果启用了统一审核，则必须创建统一审核策略以捕获事件。有关如何为Oracle Database Vault创建统一审核策略的信息，请参见“ <a href="../dbseg/configuring-audit-policies.html#DBSEG419" target="_blank"><span><cite>Oracle数据库安全指南”</cite></span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在Database Vault Administrator页面中，单击<span class="bold">Home</span>以显示主页。</span></li>
                        <li class="stepexpand"><span>在Database Vault主页的<span class="bold">“报告”</span>下，选择“ <span class="bold">数据库Vault报告”</span> 。</span></li>
                        <li class="stepexpand"><span>在Database Vault Reports页面中，选择<span class="bold">Database Vault Enforcement Audit Report</span> 。</span></li>
                        <li class="stepexpand"><span>从<span class="bold">Database Vault Audit Report</span>列表中，选择<span class="bold">Realm Audit Report</span> 。</span></li>
                        <li class="stepexpand"><span>在“搜索”区域的“ <span class="bold">命令”</span>菜单中，选择“ <span class="bold">等于”，</span>然后在文本字段中输入“ <code class="codeph">SELECT</code> 。然后单击<span class="bold">搜索</span> 。</span><div>
                              <p>该报告显示在“搜索”区域后面的表中。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">确定”</span>退出报告。</span></li>
                     </ol>
                     <div class="section">
                        <p>Oracle Database Vault会生成一个报告，列出违规类型（在本例中为上一节中输入的<code class="codeph">SELECT</code>语句），发生的时间和地点，尝试违规的登录帐户以及违规情况。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70143"></a><div class="props_rev_3"><a id="GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" name="GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2"></a><h4 id="DVADM-GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" class="sect4">步骤8：删除本教程的组件</h4>
                  <div>
                     <p>如果不再需要，可以删除为本教程创建的组件。</p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>删除用户<code class="codeph">SEBASTIAN</code> 。</p>
                              <p>在SQL * Plus中，以Oracle Database Vault帐户管理器（例如， <code class="codeph">bea_dvacctmgr</code> ） <code class="codeph">bea_dvacctmgr</code> ，然后按如下方式删除<code class="codeph">SEBASTIAN</code> ：</p><pre class="oac_no_warn" dir="ltr">sqlplus bea_dvacctmgr <span class="italic">- 或者，CONNECT bea_dvacctmgr @hrpdb</span>输入密码： <span class="italic">password</span> DROP USER SEBASTIAN;</pre></li>
                           <li>
                              <p>删除HR Apps领域。</p>
                              <ol type="a">
                                 <li>
                                    <p>在Cloud Control中，确保以具有<code class="codeph">DV_OWNER</code>角色的用户身份登录。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在Database Vault主页中，单击“ <span class="bold">管理”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在Realms页面中，从领域列表中选择<code class="codeph">HR Apps</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">删除”</span> ，然后在“确认”窗口中单击“ <span class="bold">是”</span> 。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>如有必要，在SQL * Plus中，锁定并使<code class="codeph">HR</code>帐户过期。
                              </p><pre class="oac_no_warn" dir="ltr">ALTER USER HR账户锁密码存款;</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
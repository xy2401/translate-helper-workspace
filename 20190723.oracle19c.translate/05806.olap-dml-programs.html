<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>OLAP DML程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="DML Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="DML Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="olap-dml-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T13:59:56-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1994, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96403-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="olap-dml-options.html" title="Previous" type="text/html"></link>
      <link rel="next" href="olap-dml-functions-a-k.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP DML Reference"></meta>
    <meta name="dcterms.isVersionOf" content="OLADM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="olap-dml-options.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="olap-dml-functions-a-k.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">DML参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">OLAP DML程序</li>
            </ol>
            <a id="GUID-6CC5769C-7292-42CD-BF33-BBECF9456606" name="GUID-6CC5769C-7292-42CD-BF33-BBECF9456606"></a><a id="OLADM260"></a><a id="olapdml_programs"></a>
            
            <h2 id="OLADM-GUID-6CC5769C-7292-42CD-BF33-BBECF9456606" class="sect2"><span class="enumeration_chapter">6个</span> OLAP DML程序</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章提供有关创建OLAP DML程序的信息。它包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0">OLAP DML提供的程序</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-09BE96DD-BEDA-431E-995E-95C698EBB132">创建OLAP DML程序</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">指定程序内容</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC">编译程序</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-08276648-C7E2-4B1C-A107-A372450210D0">测试和调试程序</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-6DF87053-F027-45F6-873B-EE240C3F33BE">执行程序</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0">OLAP DML程序的常见类型</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC">Oracle OLAP查找用户编写的程序</a></p>
                  </li>
               </ul>
            </div><a id="OLADM261"></a><a id="olapdml_programs_provided_with_dml"></a><div class="props_rev_3"><a id="GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0" name="GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0"></a><h3 id="OLADM-GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0" class="sect3"><span class="enumeration_section">6.1</span> OLAP DML提供的程序</h3>
               <div>
                  <p>OLAP DML提供了许多程序，您可以使用这些程序来处理以前在Oracle数据库数据字典中定义的OLAP多维数据集和多维数据集维度。这些程序列在<span class="q">“ <a href="olap-dml-basic-concepts.html#GUID-D5779171-E334-4EFC-8C5C-957A4AD22EE5">Cube-Aware OLAP DML语句</a> ”中</span> 。
                  </p>
                  <p>它还提供以下直接在分析工作区上工作的程序：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-B7A03CAD-BD8A-4633-92D8-333E5D30B955">ALLCOMPILE</a>使用COMPILE命令编译当前分析工作区中的每个可编译对象，一次一个。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-CC708B7C-7264-4716-82D7-D3BE4E2B2539">ALLSTAT</a>将当前分析工作区中所有维的状态设置为维的默认状态列表。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-7E15216F-8529-488B-8A2B-C17A9405CAE4">AWDESCRIBE</a>将有关当前分析工作区的信息发送到当前outfile。在摘要页面之后，它提供了两个部分的报告：显示名称，类型和描述的分析工作区对象的字母列表;和对象类型的每个对象的DESCRIBE。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-EDC7F9E2-1D07-42FF-AC5F-46A8735DEB2D">COPYDFN</a>通过从当前工作空间或附加工作空间中已定义的对象复制定义来定义分析工作空间中的新对象。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-C5F6EAE0-9A00-4F22-B2B5-753471F33250">FORECAST.REPORT</a>生成使用FORECAST命令创建的预测的标准报告。该报告显示预测的参数，包括预测公式和平均绝对百分比误差，然后显示预测值。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-1B30E714-3236-466D-9777-68EA704B51DF">FULLDSC</a>生成一个报告，列出一个或多个工作空间对象的定义，包括对象的属性和触发器。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-functions-a-k.html#GUID-6BCF9603-239C-4309-9484-55DF8F68E58B">ISDATE</a>确定是否可以将文本表达式转换为DATE值。当文本表达式表示有效日期时，它返回YES;没有的时候没有。（注意，ISDATE实际上并不进行转换。您必须使用CONVERT进行转换。）
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-6730EB17-D6E4-4E9D-92A0-C60D5BE0439C">LISTBY</a>生成分析工作区中所有对象的名称报告，这些对象的尺寸由一个或多个指定的尺寸或复合材料<a href="olap-dml-commands-h-z.html#GUID-6730EB17-D6E4-4E9D-92A0-C60D5BE0439C">标注</a>或相关。您可以在任何连接的工作空间中使用带有维或复合的LISTBY。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-67A0A769-8D3B-4089-94A3-95987FDDDCCF">LISTNAMES</a>生成一个报告，列出分析工作区中对象的名称。您可以将列表限制为特定类型的对象，并且可以按字母顺序列出每种对象类型的名称。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-161883C7-BD6D-428E-A124-2A9EEE272790">MODEL.COMPRPT</a>生成一个报告，显示模型方程如何分组为块。对于步骤块和用于与横同时块<span class="italic">-</span>维依赖，报告列出参与依赖的尺寸。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-7EBE833F-18B5-4A0B-AAAC-B449D3D60056">MODEL.DEPRT</a>生成一个报告，列出每个模型方程所依赖的变量和维度值。当依赖关系是维度时，报告会给出维度的名称。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-94EE42D6-F56F-45EB-AD45-263F51F5ACEE">MODEL.XEQRPT</a>生成有关模型执行情况的报告。该报告指定解决方案失败的块，并显示用于求解同时块的模型选项的值。
                        </p>
                     </li>
                     <li>
                        <p>当PAGING设置为<code class="codeph">YES</code>时，常用于报表程序或LISTNAMES的<a href="olap-dml-commands-h-z.html#GUID-D23745E5-506E-42DF-B992-7AEAE83C74C1">PAGE会</a>强制输出中断。 PAGE的可选参数根据页面上剩余的行数指定条件分页符。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-CF8E6243-1E8C-40D8-B094-5FD118A396AF">REGRESS.REPORT</a>生成使用REGRESS命令执行的回归的标准报告。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-7CB1E8F9-520F-4992-96D8-D006910909B6">STATUS</a>向当前outfile发送一个或多个维度，维度代理或值集的状态，或分析工作区中所有维度的状态。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-5EA99BE9-9A33-4218-BC3B-22E0BE47DAFB">STDHDR</a>在报告输出的每个页面的顶部生成标准Oracle OLAP标题。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-functions-l-z.html#GUID-2D537F2F-D313-4625-BBA3-2698F68A5D0B">VALSPERPAGE</a>计算适合一页的指定宽度变量的最大值数。页面是工作空间中的存储单元。
                        </p>
                     </li>
                  </ul>
                  <p>由于ISDATE和VALSPERPAGE程序类似于简单函数，因此它们按字母顺序记录在OLAP DML函数中的<a href="olap-dml-functions-a-k.html#GUID-61DF603D-3BD7-43B0-B14A-9C536BFF80CE">OLAP DML函数：A  -  K</a>和<a href="olap-dml-functions-l-z.html#GUID-B01E26A8-F738-4D2C-A274-6B0B3941A2A7">OLAP DML函数：L  -  Z.</a> OLAP DML提供的其他程序与<a href="olap-dml-commands-a-g.html#GUID-E53A76E2-3ED0-4084-BEFC-942266F3F811" title="The ALLOCATE command calculates lower-level data from upper-level data by allocating variable data down a hierarchical dimension.">OLAP DML命令：AG</a>和<a href="olap-dml-commands-h-z.html#GUID-C5C279D8-A1CE-4814-B6AE-BDD06AF798D8">OLAP DML命令：HZ</a>中的<a href="olap-dml-commands-a-g.html#GUID-E53A76E2-3ED0-4084-BEFC-942266F3F811" title="ALLOCATE命令通过在分层维度下分配可变数据来计算来自上层数据的较低级别数据。">OLAP DML命令</a>一起按字母顺序记录。</p>
               </div>
            </div><a id="OLADM262"></a><a id="olapdml_creating_programs"></a><div class="props_rev_3"><a id="GUID-09BE96DD-BEDA-431E-995E-95C698EBB132" name="GUID-09BE96DD-BEDA-431E-995E-95C698EBB132"></a><h3 id="OLADM-GUID-09BE96DD-BEDA-431E-995E-95C698EBB132" class="sect3"><span class="enumeration_section">6.2</span>创建OLAP DML程序</h3>
               <div>
                  <div class="section">
                     <p>OLAP DML程序是在OLAP DML中编写的。它作用于分析工作区中的数据，并帮助您完成某些工作区管理或分析任务。您可以编写OLAP DML程序来执行必须在分析工作区中重复执行的任务，或者可以将它们作为正在开发的应用程序的一部分进行编写。</p>
                     <p>要创建OLAP DML程序，请执行以下步骤：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>发出DEFINE PROGRAM语句来定义程序对象。当您使用的程序是一个函数时，请包含<span class="italic"><tt>数据类型</tt></span>或<span class="italic"><tt>维度</tt></span>参数。</span></li>
                     <li><span>将内容添加到程序中，以指定要执行的处理，如<span class="q">“ <a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">指定程序内容</a> ”中所述</span> 。</span></li>
                     <li><span>按照<span class="q">“ <a href="olap-dml-programs.html#GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC">编译程序</a> ”中的</span>描述<span class="q"><a href="olap-dml-programs.html#GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC">编译程序</a></span> 。</span></li>
                     <li><span>按照<span class="q">“ <a href="olap-dml-programs.html#GUID-08276648-C7E2-4B1C-A107-A372450210D0">测试和调试程序</a> ”中的</span>描述<span class="q"><a href="olap-dml-programs.html#GUID-08276648-C7E2-4B1C-A107-A372450210D0">测试和调试程序</a></span> 。</span></li>
                     <li><span>按照<span class="q">“ <a href="olap-dml-programs.html#GUID-6DF87053-F027-45F6-873B-EE240C3F33BE">执行程序</a> ”</span>中的说明<span class="q"><a href="olap-dml-programs.html#GUID-6DF87053-F027-45F6-873B-EE240C3F33BE">执行程序</a></span> 。</span></li>
                  </ol>
               </div>
            </div><a id="OLADM263"></a><a id="olapdml_specify_prog_contents"></a><div class="props_rev_3"><a id="GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055" name="GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055"></a><h3 id="OLADM-GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055" class="sect3"><span class="enumeration_section">6.3</span>指定程序内容</h3>
               <div>
                  <p>程序的内容包含以下OLAP DML语句：</p>
                  <ol>
                     <li>
                        <p>PROGRAM语句，指示程序内容的开头。（在OLAP工作表的“编辑”窗口中编写规范时省略。）</p>
                     </li>
                     <li>
                        <p>（可选）定义任何局部变量的VARIABLE语句。</p>
                     </li>
                     <li>
                        <p>（可选）声明参数的ARGUMENT语句。（有关详细信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF">传递参数</a> ”</span> 。）
                        </p>
                     </li>
                     <li>
                        <p>其他OLAP DML语句，用于指定要执行的处理。您几乎可以在程序中使用任何OLAP DML语句。还有一些OLAP DML语句，例如控制流语句，仅在程序中使用。</p>
                        <p>在向程序中添加行时，请使用以下格式指南：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>每行代码最多可包含4,000个字节。</p>
                           </li>
                           <li>
                              <p>要在下一行继续单个语句，请在要删除的行的末尾放置一个连字符（ <code class="codeph">-</code> ）。连字符称为连续字符。
                              </p>
                           </li>
                           <li>
                              <p>您不能在文本文字的中间使用延续字符。</p>
                           </li>
                           <li>
                              <p>要在一行中写入多个语句，请使用分号（ <code class="codeph">;</code> ）分隔语句。
                              </p>
                           </li>
                           <li>
                              <p>将文字文本用单引号（ <code class="codeph">'</code> ）括起来。要在文字文本中包含单引号，请在其前面加上反斜杠（ <code class="codeph">\</code> ）。要指定转义序列，请参阅<span class="q">“ <a href="data-types-operators-and-expressions.html#GUID-5272CD1A-1D62-4832-8B57-A71A9AC84C8B">转义序列</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p><a id="d57722e368" class="indexterm-anchor"></a><a id="d57722e370" class="indexterm-anchor"></a>用双引号（ <code class="codeph">"</code> ）引用注释。在一些语句之后，您可以在行的开头或行的末尾添加注释，前面加双引号。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>最后的END语句，指示程序内容的结束。（在OLAP工作表的“编辑”窗口中编写规范时省略。）</p>
                     </li>
                  </ol>
               </div><a id="OLADM264"></a><div class="props_rev_3"><a id="GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289" name="GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289"></a><h4 id="OLADM-GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289" class="sect4"><span class="enumeration_section">6.3.1</span>创建用户定义的函数</h4>
                  <div>
                     <p>通常编写的一种类型的程序是用户定义函数，您可以在OLAP DML语句中使用它，就像使用OLAP DML函数一样。用户定义的函数只是一个返回值的OLAP DML程序。有关用户定义函数的<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__BABIGFDB">示例</a> ，请参见<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__BABIGFDB">示例9-44</a> 。
                     </p>
                     <p><a id="d57722e414" class="indexterm-anchor"></a><a id="d57722e418" class="indexterm-anchor"></a><a id="d57722e422" class="indexterm-anchor"></a>创建用户定义的函数时，使用包含<span class="italic"><tt>数据类型</tt></span>和<span class="italic"><tt>维度</tt></span>参数的DEFINE PROGRAM语句。在程序中，包含一个返回值的RETURN语句。程序中的返回表达式应与其定义中指定的数据类型匹配。如果返回值的数据类型与其定义中指定的数据类型不匹配，则该值将转换为定义中的数据类型。
                     </p>
                     <p><a id="d57722e436" class="indexterm-anchor"></a><a id="d57722e440" class="indexterm-anchor"></a><a id="d57722e444" class="indexterm-anchor"></a>用户定义的函数可以接受参数。用户定义的函数仅返回单个值。但是，当您在循环维度的上下文中为用户定义的函数提供参数时（例如，在REPORT语句中），该函数将返回与其参数具有相同维度的结果。
                     </p>
                     <p>您必须在程序中使用ARGUMENT语句声明参数，并且必须在程序名称后面的括号中指定参数。</p>
                     <div class="infoboxnotealso" id="GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289__GUID-4D9979D0-EBFB-4788-A56A-B8E1162BAFBF">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="olap-dml-programs.html#GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF">传递参数</a> ”</span>以获取有关在程序中使用参数的更多信息。
                        </p>
                     </div>
                  </div>
               </div><a id="OLADM265"></a><div class="props_rev_3"><a id="GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF" name="GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF"></a><h4 id="OLADM-GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF" class="sect4"><span class="enumeration_section">6.3.2</span>传递参数</h4>
                  <div>
                     <p>使用ARGUMENT语句来声明简单和复杂的参数（例如表达式）。ARGUMENT语句还可以方便地将参数从一个程序传递到另一个程序，或创建自己的用户定义函数，因为通过使用这些语句，您可以声明任何数据类型，维度或值集的参数。任何ARGUMENT语句必须位于程序中的第一个可执行行之前。运行程序时，这些声明的参数将使用您作为程序参数提供的值进行初始化。然后程序可以像使用局部变量一样使用这些参数。</p>
                  </div><a id="OLADM266"></a><div class="props_rev_3"><a id="GUID-19EB8220-BF70-4483-A5BE-8CEE2EFB73D2" name="GUID-19EB8220-BF70-4483-A5BE-8CEE2EFB73D2"></a><h5 id="OLADM-GUID-19EB8220-BF70-4483-A5BE-8CEE2EFB73D2" class="sect5"><span class="enumeration_section">6.3.2.1</span>使用多个参数</h5>
                     <div>
                        <p><a id="d57722e516" class="indexterm-anchor"></a>程序可以根据需要声明任意数量的参数。当使用指定的参数执行程序时，参数将与程序中声明的参数进行位置匹配。运行程序时，必须使用空格而不是逗号或其他标点符号分隔参数。标点符号被视为参数的一部分。有关传递多个参数的示例，请参见<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDEGHGE">示例9-45</a> 。
                        </p>
                     </div>
                  </div><a id="OLADM267"></a><div class="props_rev_3"><a id="GUID-398C4D08-6330-4486-A952-D062DC42FD8C" name="GUID-398C4D08-6330-4486-A952-D062DC42FD8C"></a><h5 id="OLADM-GUID-398C4D08-6330-4486-A952-D062DC42FD8C" class="sect5"><span class="enumeration_section">6.3.2.2在</span>不将值转换为特定数据类型的情况下处理参数</h5>
                     <div>
                        <p>有时您希望OLAP DML程序能够处理参数而无需将值转换为特定数据类型。在这种情况下，您可以在ARGUMENT和VARIABLE语句中指定<code class="codeph">WORKSHEET</code>的数据类型，以定义程序的参数和临时变量。您可以使用WKSDATA来确定参数或变量的实际数据类型。
                        </p>
                     </div>
                  </div><a id="OLADM268"></a><div class="props_rev_3"><a id="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98" name="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98"></a><h5 id="OLADM-GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98" class="sect5"><span class="enumeration_section">6.3.2.3</span>使用符号和替换将参数作为文本传递</h5>
                     <div>
                        <p><a id="d57722e586" class="indexterm-anchor"></a><a id="d57722e590" class="indexterm-anchor"></a><a id="d57722e594" class="indexterm-anchor"></a><a id="d57722e598" class="indexterm-anchor"></a><a id="d57722e602" class="indexterm-anchor"></a>将简单的文本参数传递给程序是很常见的。但是，在某些情况下，您可能希望编写更多通用程序或传递更复杂的文本参数，例如分析工作区对象中的所有数据或表达式结果的参数。在这些情况下，您可以使用替换表达式传递参数。以这种方式传递参数称为<span class="bold">＆符号替换</span> 。
                        </p>
                        <p>对于以下类型的参数，您必须<span class="italic">始终</span>使用＆符号进行适当的替换：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>工作空间对象的名称，例如<code class="codeph">units</code>或<code class="codeph">product</code></p>
                           </li>
                           <li>
                              <p>报表关键字，例如REPORT中的<code class="codeph">COMMA</code>或<code class="codeph">NOCOMMA</code> <code class="codeph"> </code>语句，或SORT命令中的<code class="codeph">A</code>或<code class="codeph">D</code></p>
                           </li>
                        </ul>
                        <p>当您使用＆符替换将名称而不是工作空间对象的值传递给程序时，程序可以访问对象本身。当程序必须在多个操作中操作对象时，此功能非常有用。</p>
                        <div class="infoboxnote" id="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98__GUID-F7A62EF4-5986-4066-B15F-E7554FCD8944">
                           <p class="notep1">注意：</p>
                           <p>您无法编译和保存包含＆符号的任何程序行。相反，该行在运行时进行评估，这可能会降低程序的速度。因此，为了最大限度地提高性能，请避免在另一种技术可用时使用＆符号替换。</p>
                        </div>
                        <p>有关使用＆符替换传递多个维值的<a href="olap-dml-commands-h-z.html#GUID-C84F165D-930A-461C-976B-F4C28F6DCA14__CHDFHBAJ">示例</a> ，请参见<a href="olap-dml-commands-h-z.html#GUID-C84F165D-930A-461C-976B-F4C28F6DCA14__CHDFHBAJ">示例10-18</a> 。有关使用＆符号替换来传递表达式文本的<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDBIFDI">示例</a> ，请参见<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDBIFDI">示例9-47</a> 。有关使用＆符替换传递对象名称和关键字的<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDFCJBB">示例</a> ，请参见<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDFCJBB">示例9-48</a> 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98__GUID-26ED4B3B-216B-491C-BC7E-432EF088071B">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="data-types-operators-and-expressions.html#GUID-5F4213DB-AA4C-4F73-84C7-3ECFE2616672">替代表达</a> ”</span>有关＆符号替换的更多信息。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="OLADM1428"></a><a id="OLADM269"></a><div class="props_rev_3"><a id="GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD" name="GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD"></a><h4 id="OLADM-GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD" class="sect4"><span class="enumeration_section">6.3.3</span>程序流程控制</h4>
                  <div>
                     <p>与大多数编程语言一样，OLAP DML有几个语句可用于确定程序中的控制流。但是，由于许多OLAP DML语句的固有循环特性，您必须在OLAP DML程序中较不频繁地编写显式循环。</p>
                     <p>下表列出了OLAP DML控制流语句。OLAP DML语句的循环特性在<span class="q">“ <a href="olap-dml-basic-concepts.html#GUID-D032BBB4-A0ED-41C1-80B7-D93CA5172FD6">OLAP DML语句应用于数据对象的所有值</a> ”中讨论</span> 。
                     </p>
                     <p>OLAP DML包含通常在编程语言中找到的控制流语句。下表列出了这些陈述：</p>
                     <div class="tblformal" id="GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD__G679844">
                        <p class="titleintable">表6-1确定控制流量的声明</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="确定控制流量的声明" width="100%" border="1" summary="This table lists the OLAP DML statements that you only use within an OLAP DML program." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d57722e711">声明</th>
                                 <th align="left" valign="bottom" width="70%" id="d57722e714">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e719" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-27A49A77-F73F-4852-B0CF-34A8A145FDFC">打破</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e719 d57722e714 ">
                                    <p>将程序控制从SWITCH，FOR或WHILE语句中转移到紧跟在与SWITCH，FOR或WHILE相关联的DOEND之后的语句。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e727" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-A97E3A63-90EA-4005-96BB-B02053FE4988">继续</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e727 d57722e714 ">
                                    <p>将程序控制转移到FOR或WHILE循环的末尾（就在DO / DOEND语句之前），允许循环重复。您只能在程序中使用CONTINUE，并且只能使用FOR或WHILE。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e735" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-15C78632-3125-49A3-A859-1CF655599087">做......DOEND</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e735 d57722e714 ">
                                    <p>包括一组一个或多个语句。DO和DOEND通常用于括起一组语句，这些语句将在IF语句指定的条件下执行，FOR或WHILE引入的重复循环中的一组语句或SWITCH语句的CASE标签。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e743" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-387C3D9C-3204-494D-B01D-7D66CEF3F392">对于</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e743 d57722e714 ">
                                    <p>指定一个或多个维度，其状态控制一个或多个语句的重复。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e751" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-8AB3731E-B99D-4EF8-83D7-9DFE3D6B240E">去</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e751 d57722e714 ">
                                    <p>通过指示要执行的下一个程序语句来更改程序中的语句执行顺序。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e759" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-D407815D-BDFB-4186-AA82-2526C3676855">如果...然后...ELSE命令</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e759 d57722e714 ">
                                    <p>如果满足指定条件，则在程序中执行一个或多个语句。可选地，它还在不满足条件时执行备选语句或语句组。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e767" headers="d57722e711 ">
                                    <p><a href="olap-dml-options.html#GUID-8C65970A-F914-4D78-8B80-9A65B75B2F5D">OKFORLIMIT</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e767 d57722e714 ">
                                    <p>一个选项，用于确定是否可以限制在显式FOR循环中循环的维。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e775" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-80C294ED-B4E1-40D8-A9E1-9E7A1EC54124">返回</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e775 d57722e714 ">
                                    <p>在最后一行之前终止程序的执行。您可以选择指定程序返回的值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e783" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-5395AE41-C6A2-4AD4-A1AC-606B3986A3CA">信号</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e783 d57722e714 ">
                                    <p>生成错误消息并停止程序的正常执行。当程序包含活动陷阱标签时，执行将分支到标签。如果没有陷阱标签，程序的执行将终止，如果程序被另一个程序调用，则执行控制将返回到调用程序。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e791" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-8254C656-5F02-4B1A-888B-B4505EFFCDD8">SWITCH命令</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e791 d57722e714 ">
                                    <p>在程序中提供多路径分支。程序执行期间采用的特定路径取决于使用SWITCH指定的控制表达式的值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e799" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-9AC4D116-A4B3-406C-8DE3-7BD1B59CE0D0">TEMPSTAT</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e799 d57722e714 ">
                                    <p>限制循环的维度，FOR循环内部或REPORT语句生成的循环内部。在TEMPSTAT之后的语句之后恢复状态。如果DO ...DOEND短语遵循TEMPSTAT，当遇到匹配的DOEND或BREAK或GOTO语句时，状态将恢复。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e808" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-F1C50CA4-3D41-47A2-924F-567C2A36BFB3">陷阱</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e808 d57722e714 ">
                                    <p>当程序中发生错误或用户中断程序时，程序执行将转移到标签。当执行分支到陷阱标签时，该标签将被停用。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e816" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-D8796F7B-3C9D-4159-9164-E0C391D81CB2">而</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e816 d57722e714 ">
                                    <p>在布尔表达式的值保持为TRUE时重复执行语句。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="OLADM270"></a><div class="props_rev_3"><a id="GUID-5E27F806-FF9F-4FC4-B02F-CB8CF9A49740" name="GUID-5E27F806-FF9F-4FC4-B02F-CB8CF9A49740"></a><h4 id="OLADM-GUID-5E27F806-FF9F-4FC4-B02F-CB8CF9A49740" class="sect4"><span class="enumeration_section">6.3.4</span>保留环境设置</h4>
                  <div>
                     <p>有两种类型的环境：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d57722e856" class="indexterm-anchor"></a><a id="d57722e860" class="indexterm-anchor"></a>会话环境。在程序运行之前生效的维度状态，选项值和输出目标构成会话环境。
                           </p>
                        </li>
                        <li>
                           <p><a id="d57722e867" class="indexterm-anchor"></a><a id="d57722e871" class="indexterm-anchor"></a>计划环境。您在程序中使用的维度状态，选项值和输出目标构成了程序环境。
                           </p>
                        </li>
                     </ul>
                  </div><a id="OLADM271"></a><div class="props_rev_3"><a id="GUID-B9C62BFB-D08E-473F-BA1A-79B570FAB419" name="GUID-B9C62BFB-D08E-473F-BA1A-79B570FAB419"></a><h5 id="OLADM-GUID-B9C62BFB-D08E-473F-BA1A-79B570FAB419" class="sect5"><span class="enumeration_section">6.3.4.1</span>更改程序环境</h5>
                     <div>
                        <p>要在程序中执行任务，通常必须更改输出目标或某些维度和选项值。例如，您可以运行每月销售报表，该报表始终显示最近六个月的销售数据。您可能希望显示没有小数位的数据，包括销售数字为零的文本“No Sales”，并将报告发送到文件。要设置此程序环境，可以在程序中使用以下语句。</p><pre class="oac_no_warn" dir="ltr">LIMIT月份最后6个DECIMALS = 0 ZSPELL ='没有销售'OUTFILE monsales.txt</pre><pre class="oac_no_warn" dir="ltr"></pre><p>为避免中断会话环境，程序的初始化部分应保存程序中设置的维度和选项的值。程序执行后，您可以恢复保存的环境，以便其他程序不需要关心是否已更改任何值。此外，当您将输出发送到文件时，退出部分应将输出目标返回到默认的outfile。</p>
                     </div>
                  </div><a id="OLADM272"></a><div class="props_rev_3"><a id="GUID-326A584A-2C0A-4073-8F27-0027252B82AD" name="GUID-326A584A-2C0A-4073-8F27-0027252B82AD"></a><h5 id="OLADM-GUID-326A584A-2C0A-4073-8F27-0027252B82AD" class="sect5"><span class="enumeration_section">6.3.4.2</span>保存和恢复环境的方法</h5>
                     <div>
                        <p><a id="d57722e940" class="indexterm-anchor"></a><a id="d57722e944" class="indexterm-anchor"></a>以下建议可让您保存程序或会话的环境：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果要保存当前程序中更改的维度，值集，选项或单个单元格变量的当前状态或值，请使用PUSHLEVEL和PUSH语句。您可以使用POPLEVEL和POP语句恢复当前状态值。</p>
                           </li>
                           <li>
                              <p>如果要保存，访问或更新当前会话中使用的维度，值集，选项，单单元格变量或单单元格关系的当前状态或值，请使用命名上下文。使用CONTEXT命令定义上下文。</p>
                           </li>
                        </ul>
                        <p>上下文是保存会话期间使用的对象值的最复杂方法。使用上下文，您可以访问，更新和提交保存的对象值。相比之下，PUSH和POP只允许您保存和恢复值。通常，您在程序中使用PUSH和POP语句进行仅在程序执行期间应用的更改。</p>
                     </div>
                  </div><a id="OLADM273"></a><div class="props_rev_3"><a id="GUID-66BD6AD7-0002-4301-873A-4A12B4172D13" name="GUID-66BD6AD7-0002-4301-873A-4A12B4172D13"></a><h5 id="OLADM-GUID-66BD6AD7-0002-4301-873A-4A12B4172D13" class="sect5"><span class="enumeration_section">6.3.4.3</span>保存维的状态或选项的值</h5>
                     <div>
                        <p><a id="d57722e988" class="indexterm-anchor"></a><a id="d57722e992" class="indexterm-anchor"></a><a id="d57722e996" class="indexterm-anchor"></a><a id="d57722e1000" class="indexterm-anchor"></a><a id="d57722e1004" class="indexterm-anchor"></a> PUSH语句保存维度的当前状态，选项的值或单个单元格变量的值。例如，要保存<code class="codeph">DECIMALS</code>选项的当前值以便在程序持续时间内将其设置为其他值，请在初始化部分中使用以下语句。
                        </p><pre class="oac_no_warn" dir="ltr">PUSH DECIMALS</pre><pre class="oac_no_warn" dir="ltr"></pre><p><a id="d57722e1016" class="indexterm-anchor"></a><a id="d57722e1018" class="indexterm-anchor"></a><a id="d57722e1022" class="indexterm-anchor"></a><a id="d57722e1026" class="indexterm-anchor"></a><a id="d57722e1030" class="indexterm-anchor"></a><a id="d57722e1034" class="indexterm-anchor"></a>您无需知道保存选项的原始值或稍后恢复它。您可以使用POP语句恢复保存的值。
                        </p><pre class="oac_no_warn" dir="ltr">POP DECIMALS</pre><pre class="oac_no_warn" dir="ltr"></pre><p>当错误导致程序异常终止以及程序正常结束时，您必须确保执行POP语句。因此，将POP语句放在程序的正常和异常退出部分中。</p>
                     </div>
                  </div><a id="OLADM274"></a><div class="props_rev_3"><a id="GUID-99535339-6B89-4FEB-A7E6-71F1027FA94E" name="GUID-99535339-6B89-4FEB-A7E6-71F1027FA94E"></a><h5 id="OLADM-GUID-99535339-6B89-4FEB-A7E6-71F1027FA94E" class="sect5"><span class="enumeration_section">6.3.4.4一次</span>保存多个值</h5>
                     <div>
                        <p><a id="d57722e1073" class="indexterm-anchor"></a><a id="d57722e1075" class="indexterm-anchor"></a>您可以在单个PUSH语句中保存一个或多个维的状态以及任意数量的选项和变量的值，并且可以使用单个POP语句还原这些值，如以下示例所示。
                        </p><pre class="oac_no_warn" dir="ltr">PUSH月份DECIMALS ZSPELL ......POP月份DECIMALS ZSPELL</pre></div>
                  </div><a id="OLADM275"></a><div class="props_rev_3"><a id="GUID-42EC6C90-1D8B-4CA8-9A80-0194B619BF4A" name="GUID-42EC6C90-1D8B-4CA8-9A80-0194B619BF4A"></a><h5 id="OLADM-GUID-42EC6C90-1D8B-4CA8-9A80-0194B619BF4A" class="sect5"><span class="enumeration_section">6.3.4.5</span>使用级别标记</h5>
                     <div>
                        <p>保存多个维度和选项的值时，PUSHLEVEL和POPLEVEL语句提供了一种保存和恢复会话环境的便捷方法。</p>
                        <p>首先使用PUSHLEVEL语句建立级别标记。建立级别标记后，使用PUSH语句保存维度的状态以及选项或单细胞变量的值。</p>
                        <p><a id="d57722e1113" class="indexterm-anchor"></a>在PUSHLEVEL和POPLEVEL语句之间放置多个PUSH语句时，将使用单个POPLEVEL语句还原那些PUSH语句中指定的所有对象。
                        </p>
                        <p>通过使用PUSHLEVEL和POPLEVEL，您可以在编写程序时保存一些输入，因为您只能输入一次对象列表。您还可以降低从列表中省略对象或拼写错误对象名称的风险。</p>
                        <p>有关创建级别标记的示例，请参见<a href="olap-dml-commands-h-z.html#GUID-66899C5F-9C89-421F-9CB5-75B868429B83__CHDGEDJB">示例10-85</a> 。<a href="olap-dml-commands-h-z.html#GUID-66899C5F-9C89-421F-9CB5-75B868429B83__CHDGJFIG">例10-86</a>说明了嵌套PUSHLEVEL和POPLEVEL语句。
                        </p>
                     </div>
                  </div><a id="OLADM276"></a><div class="props_rev_3"><a id="GUID-5FDF2789-23B3-42B7-A9F0-1288A37CEDE1" name="GUID-5FDF2789-23B3-42B7-A9F0-1288A37CEDE1"></a><h5 id="OLADM-GUID-5FDF2789-23B3-42B7-A9F0-1288A37CEDE1" class="sect5"><span class="enumeration_section">6.3.4.6</span>使用CONTEXT一次保存多个值</h5>
                     <div>
                        <p><a id="d57722e1156" class="indexterm-anchor"></a><a id="d57722e1158" class="indexterm-anchor"></a>作为使用PUSHLEVEL和POPLEVEL的替代方法，您可以使用CONTEXT命令。创建上下文后，可以在上下文中保存维度的当前状态以及选项，单单元格变量，值集和单单元格关系的值。然后，您可以从上下文中恢复部分或全部对象值。CONTEXT函数返回有关上下文中对象的信息。
                        </p>
                     </div>
                  </div>
               </div><a id="OLADM277"></a><div class="props_rev_3"><a id="GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36" name="GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36"></a><h4 id="OLADM-GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36" class="sect4"><span class="enumeration_section">6.3.5</span>处理错误</h4>
                  <div>
                     <p><a id="d57722e1190" class="indexterm-anchor"></a><a id="d57722e1194" class="indexterm-anchor"></a><a id="d57722e1196" class="indexterm-anchor"></a><a id="d57722e1200" class="indexterm-anchor"></a>当程序中的任何位置发生错误时，Oracle OLAP将执行以下操作：</p>
                     <ol>
                        <li>
                           <p>在ERRORNAME选项中存储错误的名称，并在ERRORTEXT选项中存储错误消息的文本。</p>
                           <div class="infoboxnote" id="GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36__GUID-3A23DE33-20E5-4B3A-971A-950B9AF598D8">
                              <p class="notep1">注意：</p>
                              <p>当ERRNAMES选项设置为默认值<code class="codeph">YES</code> ，ERRORTEXT选项包含错误的名称（即ERRORNAME选项的值）和错误消息的文本。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>当ECHOPROMPT为<code class="codeph">YES</code> ，Oracle OLAP将输入行，错误消息和输出行回显到当前outfile。使用OUTFILE或DBGOUTFILE语句时，可以捕获文件中的错误消息。有关将输出定向到文件的示例，请参见<a href="olap-dml-commands-h-z.html#GUID-16EA592C-4458-4D7F-AF4C-E458F7271C95__CHDGDBEH">示例10-69</a> 。
                           </p>
                        </li>
                        <li>
                           <p>当错误捕获关闭时，程序的执行将停止。启用错误捕获时，将捕获错误。</p>
                        </li>
                     </ol>
                  </div><a id="OLADM278"></a><div class="props_rev_3"><a id="GUID-813DC8E5-2D36-408D-B9EC-727ED096D578" name="GUID-813DC8E5-2D36-408D-B9EC-727ED096D578"></a><h5 id="OLADM-GUID-813DC8E5-2D36-408D-B9EC-727ED096D578" class="sect5"><span class="enumeration_section">6.3.5.1</span>捕获错误</h5>
                     <div>
                        <p><a id="d57722e1253" class="indexterm-anchor"></a><a id="d57722e1255" class="indexterm-anchor"></a>要确保程序正常运行，请预测错误并设置系统来处理它们。您可以使用TRAP语句打开程序中的错误捕获机制。当错误捕获打开并发出错误信号时，则不会停止执行程序。相反，错误捕获执行以下操作：</p>
                        <ol>
                           <li>
                              <p>关闭错误捕获机制以防止在错误处理过程中发生其他错误的情况下无限循环</p>
                           </li>
                           <li>
                              <p>分支到<code class="codeph">TRAP</code>语句中指定的标签</p>
                           </li>
                           <li>
                              <p>执行标签后面的语句</p>
                           </li>
                        </ol>
                     </div>
                  </div><a id="OLADM279"></a><div class="props_rev_3"><a id="GUID-2F1CC781-D205-40B9-8438-1CB65BC28DA3" name="GUID-2F1CC781-D205-40B9-8438-1CB65BC28DA3"></a><h5 id="OLADM-GUID-2F1CC781-D205-40B9-8438-1CB65BC28DA3" class="sect5"><span class="enumeration_section">6.3.5.2</span>将错误传递给调用程序</h5>
                     <div>
                        <p>要将错误传递给调用程序，可以使用以下两种方法之一。您使用的方法取决于您希望何时生成错误消息。使用第一种方法，Oracle OLAP立即生成消息，然后错误条件通过程序链传递。使用第二种方法，Oracle OLAP首先通过程序链传递错误，然后生成消息。有关详细信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C">传递错误：方法一</a> ”</span>和<span class="q">“ <a href="olap-dml-programs.html#GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369">传递错误：方法二</a> ”</span> 。
                        </p>
                        <p>使用这两种方法，在链中的每个程序中都会发生相应的错误处理，并且在某些时候Oracle OLAP会向当前的outfile发送错误消息。</p>
                     </div><a id="OLADM280"></a><div class="props_rev_3"><a id="GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C" name="GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C"></a><h6 id="OLADM-GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C" class="sect6"><span class="enumeration_section">6.3.5.2.1</span>传递错误：方法一</h6>
                        <div>
                           <p>使用此方法，Oracle OLAP立即生成消息，然后通过程序链传递错误条件。</p>
                           <p>使用带有（默认）PRINT选项的TRAP语句。发生错误时，Oracle OLAP会生成错误消息，并且执行将分支到陷阱标签。在陷阱标签之后，执行所需的任何清理，然后执行以下语句。</p><pre class="oac_no_warn" dir="ltr">信号PRGERR</pre><pre class="oac_no_warn" dir="ltr"></pre><p>使用此语句会创建一个错误条件，该条件将传递给运行当前程序的程序。但是，PRGERR不会产生错误消息。PRGERR将ERRORNAME选项设置为空值。</p>
                           <p>当调用程序包含陷阱标签时，执行将分支到标签。当嵌套程序序列中的每个程序以这种方式使用TRAP和SIGNAL时，您可以将错误条件传递到整个程序序列。</p>
                        </div>
                     </div><a id="OLADM281"></a><div class="props_rev_3"><a id="GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369" name="GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369"></a><h6 id="OLADM-GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369" class="sect6"><span class="enumeration_section">6.3.5.2.2</span>传递错误：方法二</h6>
                        <div>
                           <p>使用此方法，Oracle OLAP首先通过程序链传递错误，然后生成消息。</p>
                           <p>使用带有NOPRINT选项的TRAP语句。发生错误时，执行会转移到陷阱标签，但会禁止显示错误消息。在陷阱标签之后，执行所需的任何清理，然后执行以下语句。</p><pre class="oac_no_warn" dir="ltr">SIGNAL ERRORNAME ERRORTEXT</pre><pre class="oac_no_warn" dir="ltr"></pre><p>选项ERRORNAME和ERRORTEXT包含原始错误的名称和消息，因此此SIGNAL语句将重现原始错误。然后将错误传递给运行当前程序的程序。</p>
                           <p>当调用程序还包含陷阱标签时，执行将分支到其标签。当一系列嵌套程序中的每个程序都使用<code class="codeph">TRAP...NOPRINT</code>和<code class="codeph">SIGNAL</code> <code class="codeph">ERRORNAME</code> <code class="codeph">ERRORTEXT</code>以这种方式，您可以通过整个程序序列传递错误条件。Oracle OLAP在链的末尾生成错误消息。
                           </p>
                           <p>当您达到要处理错误并继续应用程序的级别时，请省略SIGNAL语句。您可以使用SHOW语句显示自己的消息。</p>
                        </div>
                     </div>
                  </div><a id="OLADM282"></a><div class="props_rev_3"><a id="GUID-6A440F90-9FD1-4871-8333-2AFD40835AE2" name="GUID-6A440F90-9FD1-4871-8333-2AFD40835AE2"></a><h5 id="OLADM-GUID-6A440F90-9FD1-4871-8333-2AFD40835AE2" class="sect5"><span class="enumeration_section">6.3.5.3</span>抑制错误消息</h5>
                     <div>
                        <p><a id="d57722e1435" class="indexterm-anchor"></a>如果您不想生成通常为给定错误提供的错误消息，则可以将TRAP语句与<code class="codeph">NOPRINT</code>关键字一起使用。
                        </p><pre class="oac_no_warn" dir="ltr">TRAP ON错误NOPRINT</pre><pre class="oac_no_warn" dir="ltr"></pre><p>在<code class="codeph">TRAP</code>使用<code class="codeph">NOPRINT</code>关键字时，控制分支到<code class="codeph">error</code>标签，并且在发生错误时不会发出错误消息。然后执行<code class="codeph">error</code>标签后面的语句。
                        </p>
                        <p>当您取消错误消息时，您可能希望在异常退出部分中生成自己的消息。<code class="codeph">SHOW</code>语句生成您指定的文本但不表示错误。
                        </p><pre class="oac_no_warn" dir="ltr">TRAP ON错误NOPRINT ...错误：......显示'报告不会生成。“</pre><p>生成消息后，程序继续下一个语句。</p>
                     </div>
                  </div><a id="OLADM283"></a><div class="props_rev_3"><a id="GUID-8335DD91-CBD9-4D0A-B67F-496FF92ED52B" name="GUID-8335DD91-CBD9-4D0A-B67F-496FF92ED52B"></a><h5 id="OLADM-GUID-8335DD91-CBD9-4D0A-B67F-496FF92ED52B" class="sect5"><span class="enumeration_section">6.3.5.4</span>创建自己的错误消息</h5>
                     <div>
                        <p><a id="d57722e1498" class="indexterm-anchor"></a><a id="d57722e1500" class="indexterm-anchor"></a><a id="d57722e1504" class="indexterm-anchor"></a>语句或语句序列不符合其要求时发生的所有错误都会自动发出信号。在您的程序中，您可以为自己的应用程序建立其他要求。如果未满足要求，您可以执行<code class="codeph">SIGNAL</code>语句来发出错误信号。
                        </p>
                        <p>您可以给出错误任何名称。执行<code class="codeph">SIGNAL</code>语句时，您指定的错误名称将存储在<code class="codeph">ERRORNAME</code>选项中，就像自动存储OLAP DML错误名称一样。在<code class="codeph">SIGNAL</code>语句中指定自己的错误消息时，就会在生成OLAP DML错误消息时生成消息。当您使用<code class="codeph">TRAP</code>语句捕获错误时， <code class="codeph">SIGNAL</code>语句在生成错误消息后分支到<code class="codeph">TRAP</code>标签。
                        </p>
                        <p>有关发出错误信号的<a href="olap-dml-commands-h-z.html#GUID-5395AE41-C6A2-4AD4-A1AC-606B3986A3CA__CHDCDDAI">示例</a> ，请参见<a href="olap-dml-commands-h-z.html#GUID-5395AE41-C6A2-4AD4-A1AC-606B3986A3CA__CHDCDDAI">例10-123</a> 。
                        </p>
                        <p>如果要生成警告消息而不分支到错误标签，则可以使用<a href="olap-dml-commands-h-z.html#GUID-0E4911F1-FBE6-463E-BB00-BB4419E0AF1C__CHDDCAAA">示例10-121中</a>所示的<code class="codeph">SHOW</code>语句。
                        </p>
                     </div>
                  </div><a id="OLADM284"></a><div class="props_rev_3"><a id="GUID-485092D6-D203-40C3-823E-D54DBDFCE74D" name="GUID-485092D6-D203-40C3-823E-D54DBDFCE74D"></a><h5 id="OLADM-GUID-485092D6-D203-40C3-823E-D54DBDFCE74D" class="sect5"><span class="enumeration_section">6.3.5.5</span>处理嵌套程序中的错误</h5>
                     <div>
                        <p>处理嵌套程序中的错误时，每个程序中的错误处理部分应该还原环境。它还可以处理该程序特有的任何特殊错误条件。例如，当您的程序发出自己的错误信号时，您可以包含测试该错误的语句。</p>
                        <p>嵌套程序中发生的任何其他错误都应该通过程序链传递并在每个程序中处理。要通过一系列嵌套程序传递错误，您可以使用以下两种方法之一，具体取决于您希望生成错误消息的时间：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>立即生成错误消息，然后错误条件通过程序链传递，如<a href="olap-dml-commands-h-z.html#GUID-F1C50CA4-3D41-47A2-924F-567C2A36BFB3__CHDBJGHD">例10-157所示</a> 。
                              </p>
                           </li>
                           <li>
                              <p>错误首先通过程序链传递，错误消息在链的末尾产生，如<a href="olap-dml-commands-h-z.html#GUID-F1C50CA4-3D41-47A2-924F-567C2A36BFB3__CHDDHFCC">例10-158所示</a> 。
                              </p>
                           </li>
                        </ul>
                        <p>两种方法都使用<code class="codeph">SIGNAL</code>语句。
                        </p>
                     </div>
                  </div><a id="OLADM285"></a><div class="props_rev_3"><a id="GUID-F9AF0FF1-D873-40FA-AF5A-90205320926D" name="GUID-F9AF0FF1-D873-40FA-AF5A-90205320926D"></a><h5 id="OLADM-GUID-F9AF0FF1-D873-40FA-AF5A-90205320926D" class="sect5"><span class="enumeration_section">6.3.5.6</span>保存会话环境时处理错误</h5>
                     <div>
                        <p><a id="d57722e1622" class="indexterm-anchor"></a><a id="d57722e1626" class="indexterm-anchor"></a>要正确处理，同时要保存会话环境中可能出现的错误，把你的<code class="codeph">PUSHLEVEL</code>在之前声明<code class="codeph">TRAP</code>声明，您的<code class="codeph">PUSH</code>后声明<code class="codeph">TRAP</code>声明。
                        </p><pre class="oac_no_warn" dir="ltr">PUSHLEVEL'firstlevel'TRAP ON错误PUSH ...</pre><pre class="oac_no_warn" dir="ltr"></pre><p><a id="d57722e1647" class="indexterm-anchor"></a>在程序的异常退出部分中，放置错误标签（后跟冒号）和恢复会话环境并处理错误的语句。异常退出部分可能如下所示。
                        </p><pre class="oac_no_warn" dir="ltr">错误：POPLEVEL'firstlevel'OUTFILE EOF</pre><pre class="oac_no_warn" dir="ltr"></pre><p>这些语句恢复已保存的维度状态和选项值，并将输出重新路由到默认的outfile。</p>
                     </div>
                  </div>
               </div>
            </div><a id="OLADM286"></a><a id="olapdml_compiling_programs"></a><div class="props_rev_3"><a id="GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC" name="GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC"></a><h3 id="OLADM-GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC" class="sect3"><span class="enumeration_section">6.4</span>编译程序</h3>
               <div>
                  <p>您可以使用<code class="codeph">COMPILE</code>语句显式编译程序。如果没有显式编译程序，那么在第一次运行程序时会编译它。
                  </p>
                  <p><a id="d57722e1692" class="indexterm-anchor"></a><a id="d57722e1696" class="indexterm-anchor"></a>编译程序时，它会将程序语句转换为有效的处理代码，该代码的执行速度比程序的原始文本快得多。在程序中遇到错误时，编译未完成，程序被认为是未编译的。
                  </p>
                  <p><a id="d57722e1702" class="indexterm-anchor"></a><a id="d57722e1706" class="indexterm-anchor"></a>编译程序后，每次在当前会话中运行程序时都会使用编译的代码。在编译程序后更新和提交分析工作区时，已编译的代码将保存在分析工作区中，并用于在将来的会话中运行该程序。因此，请确保在编译程序后更新并提交。当程序是许多用户运行的应用程序的一部分时，在程序编译后发出更新和提交尤其重要。除非程序的已编译版本保存在分析工作区中，否则将在每个用户会话中单独重新编译该程序。
                  </p>
                  <p><a href="olap-dml-commands-a-g.html#GUID-932941E8-A664-4E93-BFE5-4E60AFC02D19__CHDGDAFC">例9-69</a>说明了使用COMPILE编译程序</p>
               </div><a id="OLADM287"></a><div class="props_rev_3"><a id="GUID-B04A6F75-3396-4D26-AD2F-A444842ADB10" name="GUID-B04A6F75-3396-4D26-AD2F-A444842ADB10"></a><h4 id="OLADM-GUID-B04A6F75-3396-4D26-AD2F-A444842ADB10" class="sect4"><span class="enumeration_section">6.4.1</span>查找程序是否已编译</h4>
                  <div>
                     <p>您可以使用<code class="codeph">OBJ</code>函数的<code class="codeph">ISCOMPILED</code>选项来确定自上次修改以来分析工作区中的特定程序是否已编译。该函数返回一个布尔值。
                     </p><pre class="oac_no_warn" dir="ltr">SHOW OBJ（ISCOMPILED'myprogram'）</pre></div>
               </div><a id="OLADM288"></a><div class="props_rev_3"><a id="GUID-88F8F231-9CF1-4ECD-8977-3FB2F9386A21" name="GUID-88F8F231-9CF1-4ECD-8977-3FB2F9386A21"></a><h4 id="OLADM-GUID-88F8F231-9CF1-4ECD-8977-3FB2F9386A21" class="sect4"><span class="enumeration_section">6.4.2</span>防止编译的编程方法</h4>
                  <div>
                     <p><span class="italic">不</span>编译包含＆符替换的程序行。在程序运行之前，不会捕获任何语法错误。正确编译其他行的程序被认为是编译程序。
                     </p>
                     <p>当程序定义一个对象然后在程序中使用该对象时，该程序无法编译。<code class="codeph">COMPILE</code>将对象的引用视为拼写错误，因为该对象在分析工作区中尚不存在。
                     </p>
                  </div>
               </div>
            </div><a id="OLADM289"></a><a id="olapdml_testing_debug_programs"></a><div class="props_rev_3"><a id="GUID-08276648-C7E2-4B1C-A107-A372450210D0" name="GUID-08276648-C7E2-4B1C-A107-A372450210D0"></a><h3 id="OLADM-GUID-08276648-C7E2-4B1C-A107-A372450210D0" class="sect3"><span class="enumeration_section">6.5</span>测试和调试程序</h3>
               <div>
                  <p><a id="d57722e1820" class="indexterm-anchor"></a><a id="d57722e1824" class="indexterm-anchor"></a>即使您的程序编译干净，您也必须通过运行它来测试程序。运行程序可以帮助您检测语句中的错误，包括符号替换，逻辑错误和任何嵌套程序中的错误。
                  </p>
                  <p>要通过运行程序来测试程序，请使用一整套测试数据，这些数据是程序处理的典型数据。要确认您测试程序的所有功能（包括错误处理机制），请使用不同的数据和响应多次运行程序。使用以下测试数据：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>落在预期范围内</p>
                     </li>
                     <li>
                        <p>超出预期范围</p>
                     </li>
                     <li>
                        <p>导致程序的每个部分执行</p>
                     </li>
                  </ul>
               </div><a id="OLADM290"></a><div class="props_rev_3"><a id="GUID-A3A12991-61AE-453E-A2A0-CD344D131B3E" name="GUID-A3A12991-61AE-453E-A2A0-CD344D131B3E"></a><h4 id="OLADM-GUID-A3A12991-61AE-453E-A2A0-CD344D131B3E" class="sect4"><span class="enumeration_section">6.5.1</span>生成诊断消息</h4>
                  <div>
                     <p>每次运行程序时，请确认程序以正确的顺序执行其语句并确保输出正确。为了帮助分析程序的执行，可以在程序中包含<code class="codeph">SHOW</code>或TRACE语句以生成诊断或状态消息。然后在测试完成后删除<code class="codeph">these</code>语句。
                     </p>
                     <p>当您在程序或嵌套程序中检测到或怀疑错误时，可以使用本节其余部分中描述的调试技术来跟踪错误。</p>
                  </div>
               </div><a id="OLADM291"></a><div class="props_rev_3"><a id="GUID-80BE649E-C979-44BE-99F5-97E13810C429" name="GUID-80BE649E-C979-44BE-99F5-97E13810C429"></a><h4 id="OLADM-GUID-80BE649E-C979-44BE-99F5-97E13810C429" class="sect4"><span class="enumeration_section">6.5.2</span>识别错误的代码行</h4>
                  <div>
                     <p><a id="d57722e1908" class="indexterm-anchor"></a>将BADLINE选项设置为<code class="codeph">YES</code> ，会在遇到错误代码行时生成其他信息以及任何错误消息。发生错误时，错误消息，程序名称和触发错误的程序行将发送到当前outfile。您可以编辑指定的程序以更正错误，然后运行原始程序。有关使用BADLINE的示例，请参见<a href="olap-dml-options.html#GUID-7FEA0D37-47DF-4547-8BF1-296E91622F2A__CHDHEFID">示例5-4</a> 。</p>
                  </div>
               </div><a id="OLADM292"></a><div class="props_rev_3"><a id="GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF" name="GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF"></a><h4 id="OLADM-GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF" class="sect4"><span class="enumeration_section">6.5.3将</span>输出发送到调试文件</h4>
                  <div>
                     <p>当程序包含逻辑错误时，程序可能会执行而不会产生错误消息，但它会执行错误的语句集或产生不正确的结果。例如，假设您在<code class="codeph">IF</code>语句中错误地编写了布尔表达式（例如，您使用<code class="codeph">NE</code>而不是<code class="codeph">EQ</code> ）。程序执行您指定的语句，但它在错误的条件下执行。
                     </p>
                     <p>要在程序逻辑中查找错误，您必须经常查看语句的执行顺序。一种方法是创建调试文件，然后通过发出以下DML语句检查文件以诊断程序中的任何问题：</p>
                     <ol>
                        <li>
                           <p>通过发出DBGOUTFILE语句来创建调试文件。
                           </p>
                        </li>
                        <li>
                           <p>通过将PRGTRACE选项设置为<code class="codeph">YES</code> ，指定在执行行时将每个程序行发送到调试文件。</p>
                        </li>
                        <li>
                           <p><a id="d57722e1973" class="indexterm-anchor"></a> （可选）如果希望调试文件将程序行与程序输入和错误消息交织在一起，请将ECHOPROMPT选项设置为<code class="codeph">YES</code> 。</p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF__GUID-2D6C7BB7-ABEF-442E-9E19-B0381A695A01">
                        <p class="notep1">也可以看看：</p>
                        <p>以下使用调试文件的示例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="olap-dml-commands-a-g.html#GUID-1B5FA1D0-5147-471B-B3AD-C16504825FDB__CHDBDJGH">例9-76</a></p>
                           </li>
                           <li>
                              <p><a href="olap-dml-commands-a-g.html#GUID-1B5FA1D0-5147-471B-B3AD-C16504825FDB__CHDIAHIB">例9-77</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="OLADM293"></a><a id="olapdml_executing_programs"></a><div class="props_rev_3"><a id="GUID-6DF87053-F027-45F6-873B-EE240C3F33BE" name="GUID-6DF87053-F027-45F6-873B-EE240C3F33BE"></a><h3 id="OLADM-GUID-6DF87053-F027-45F6-873B-EE240C3F33BE" class="sect3"><span class="enumeration_section">6.6</span>执行程序</h3>
               <div>
                  <p><a id="d57722e2020" class="indexterm-anchor"></a>您可以使用CALL语句调用不返回值的程序。您将参数括在括号中，并按值传递它们。例如，假设您创建一个名为<code class="codeph">addit</code>的简单程序来添加两个<code class="codeph">INTEGER</code>值。您可以在应用程序的主程序中使用CALL语句来调用该程序。
                  </p>
                  <p>您也可以像发出OLAP DML语句一样调用程序。您可以使用与使用内置函数相同的方式调用用户定义的函数。您可以在表达式中使用程序名称，并将括号中的程序参数（如果有）括起来。对于不返回值的程序（用户定义的命令），您可以像使用OLAP DML命令一样使用程序名称。当您将用户定义的程序作为函数调用时，程序将返回<code class="codeph">NA</code> 。</p>
                  <p>您还可以创建在Oracle OLAP时自动执行的程序：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>执行AW ATTACH。 AW CREATE，AW DELETE，AW DETACH，DEFINE，MAINTAIN，PROPERTY，UPDATE或SET语句，如<span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”中所述</span> 。
                        </p>
                     </li>
                     <li>
                        <p>遇到$ NATRIGGER中描述的<code class="codeph">NA</code>值。</p>
                     </li>
                  </ul>
               </div>
            </div><a id="OLADM294"></a><a id="olapdml_programs_common_types"></a><div class="props_rev_3"><a id="GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0" name="GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0"></a><h3 id="OLADM-GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0" class="sect3"><span class="enumeration_section">6.7</span> OLAP DML程序的常见类型</h3>
               <div>
                  <p>本节提供有关以下类型程序的概述信息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E">数据导入和导出程序</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-91C66052-0A4C-473B-A613-2828EDF37D0F">聚合，分配和建模程序</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4">预测计划</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002">导出和导入工作区对象的程序</a></p>
                     </li>
                  </ul>
               </div><a id="OLADM295"></a><div class="props_rev_3"><a id="GUID-128665B4-3043-47DA-B474-D164EA25908E" name="GUID-128665B4-3043-47DA-B474-D164EA25908E"></a><h4 id="OLADM-GUID-128665B4-3043-47DA-B474-D164EA25908E" class="sect4"><span class="enumeration_section">6.7.1</span>启动程序</h4>
                  <div>
                     <p><a id="d57722e2137" class="indexterm-anchor"></a>启动程序是您编写的程序，当执行AW ATTACH语句时，Oracle OLAP会按名称检查。除非您定义和编写它们，否则分析工作区中不存在启动程序。在启动程序中，您可以执行任何OLAP DML语句，也可以运行任何自己的程序。例如，启动程序可能会将选项设置为适合您的应用程序的值。
                     </p>
                     <p>首次连接分析工作区时，Oracle OLAP按指示的顺序查找并执行Oracle OLAP启动程序（如果存在）：</p>
                     <ol>
                        <li>
                           <p>许可计划。权限程序的执行由AW ATTACH语句中指定的附件模式以及您要附加的分析工作区中是否存在相关权限程序来确定。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-92DA4681-6C52-40E6-AE18-C0285558073B">权限程序</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>OnAttach计划。OnAttach程序的执行取决于您如何编码AW ATTACH语句的ONATTACH和NOONATTACH子句以及您附加的分析工作区中是否存在名为ONATTACH的程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3">OnAttach程序</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>Autogo计划。Autogo程序的执行取决于您如何编写AW ATTACH语句的AUTOGO和NOAUTOGO子句以及您附加的分析工作区中是否存在名为AUTOGO的程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747">Autogo程序</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>触发程序。触发器程序的执行取决于已连接的分析工作区中是否存在名为TRIGGER_AW的程序。当一个附加的分析工作区中存在TRIGGER_AW程序时，只要您创建，附加，分离或删除任何其他分析工作区，就会执行该程序。有关详细信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”</span>和<a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a> 。</p>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-128665B4-3043-47DA-B474-D164EA25908E__GUID-60DD9BA7-473E-4BBC-A68B-C1B5B6CDB760">
                        <p class="notep1">注意：</p>
                        <p>在一个会话中，当你：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>重新安装一个附加的工作空间中，Oracle OLAP <span class="italic">不</span>查找和执行权限的程序和OnAttach程序。
                              </p>
                           </li>
                           <li>
                              <p>重新附加以前分离的工作空间，Oracle OLAP不执行权限程序，OnAttach程序或Autogo程序， <span class="italic">除非</span>您使用包含NOCACHE关键字的AW DETACH语句分离该工作空间。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="OLADM1429"></a><a id="OLADM296"></a><div class="props_rev_3"><a id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B" name="GUID-92DA4681-6C52-40E6-AE18-C0285558073B"></a><h5 id="OLADM-GUID-92DA4681-6C52-40E6-AE18-C0285558073B" class="sect5"><span class="enumeration_section">6.7.1.1</span>许可计划</h5>
                     <div>
                        <p><a id="d57722e2222" class="indexterm-anchor"></a>权限程序是您编写的程序，用于授予用户访问工作区数据的权限。<a id="d57722e2227" class="indexterm-anchor"></a><a id="d57722e2231" class="indexterm-anchor"></a><a id="d57722e2233" class="indexterm-anchor"></a><a id="d57722e2235" class="indexterm-anchor"></a>当用户首次附加分析工作区时，Oracle OLAP会检查是否存在适用于附件模式的权限程序。
                        </p>
                        <div class="infoboxnote" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__GUID-607CEE1A-51BA-447D-ACAF-F4D691772B90">
                           <p class="notep1">注意：</p>
                           <p>当您重新安装一个附加的工作空间中，Oracle OLAP <span class="italic">不</span>查找和执行权限的程序。
                           </p>
                        </div>
                        <p>每种附件模式的权限程序必须具有特定名称，如下表所示：</p>
                        <div class="tblformal" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__CHDHEDEJ">
                           <p class="titleintable">表6-2不同附件模式的权限程序名称</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="不同附件模式的权限程序的名称" width="100%" border="1" summary="This table lists the program names that you need to use to create a permission program for the various analytic workspace attachment modes." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="44%" id="d57722e2256">附件模式</th>
                                    <th align="left" valign="bottom" width="56%" id="d57722e2259">计划名称</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="44%" id="d57722e2264" headers="d57722e2256 ">
                                       <p>只读</p>
                                    </td>
                                    <td align="left" valign="top" width="56%" headers="d57722e2264 d57722e2259 ">
                                       <p><a href="olap-dml-programs.html#GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4">PERMIT_READ</a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="44%" id="d57722e2272" headers="d57722e2256 ">
                                       <p>多路写入，读/写</p>
                                    </td>
                                    <td align="left" valign="top" width="56%" headers="d57722e2272 d57722e2259 ">
                                       <p><a href="olap-dml-programs.html#GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E">PERMIT_WRITE</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>当存在适当的权限程序时，Oracle OLAP会执行该程序。当用户在附加分析工作区时指定密码时，密码将作为参数传递给权限程序以进行处理。</p>
                        <div class="infoboxnote" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__GUID-8206F76F-1F7C-4D5F-95BF-27C4DD4EE45B">
                           <p class="notep1">注意：</p>
                           <p>维度代理具有其维度的访问权限。使用维度上的PERMIT授予或拒绝访问该维度的维度代理的值的权限。</p>
                        </div>
                        <p>权限程序允许您控制对它们所在的分析工作区的两种访问级别。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在分析工作区级别访问 - 根据权限程序的返回值，用户是否被授予对整个分析工作区的访问权限。您可以使用返回值向Oracle OLAP指示用户是否有权附加工作空间。</p>
                           </li>
                           <li>
                              <p>在对象级别访问 - 在只读或读/写附件的权限程序中，您可以指定授予或限制对各个工作区对象的访问权限的PERMIT语句。PERMIT程序必须与它们发出PERMIT语句的对象位于同一工作区中。</p>
                              <div class="infoboxnote" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__GUID-38608803-45C8-4F17-A9FE-AAA006756F3F">
                                 <p class="notep1">注意：</p>
                                 <p>给定权限程序中引用的所有对象必须存在于同一分析工作区中。</p>
                              </div>
                           </li>
                        </ul>
                        <p>要创建权限程序，请使用可识别的名称定义用户定义的功能（如<span class="q">“ <a href="olap-dml-programs.html#GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289">创建用户定义的功能</a> ”中所述</span> ），然后按<span class="q">“ <a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">指定程序内容</a> ”中的</span>说明定义<span class="q"><a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">程序的内容</a></span> 。
                        </p>
                     </div>
                  </div><a id="OLADM297"></a><div class="props_rev_3"><a id="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3" name="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3"></a><h5 id="OLADM-GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3" class="sect5"><span class="enumeration_section">6.7.1.2</span> OnAttach程序</h5>
                     <div>
                        <p><a id="d57722e2335" class="indexterm-anchor"></a> OnAttach程序可以具有任何名称，也可以明确命名为<code class="codeph">ONATTACH</code> 。</p>
                        <div class="infoboxnote" id="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3__GUID-9EBB720F-15DA-42C6-B404-B253E9CDDD28">
                           <p class="notep1">注意：</p>
                           <p>使用OLAP API将分析工作区创建为OLAP多维数据集时，OLAP API还可以创建名为<code class="codeph">ONATTACH</code>的程序。您无法修改以这种方式自动创建的<code class="codeph">ONATTACH</code>程序。此外，不建议覆盖<code class="codeph">ONATTACH</code>的执行。
                           </p>
                           <p>因此，当这种类型的<code class="codeph">ONATTACH</code>程序存在于分析工作区中时，请创建不同类型的启动程序，以指定在附加分析工作区时要执行的行为。
                           </p>
                        </div>
                        <p>如何指定OnAttach程序的执行因其名称而异：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当一个程序名为<code class="codeph"><a href="olap-dml-programs.html#GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE">ONATTACH</a></code> 。存在于分析工作区中，每次附加工作空间时，该程序将自动执行，除非您在AW ATTACH语句中包含NOOTTACH关键字，或者除非您包含指定不同程序名称的ONATTACH子句。
                              </p>
                           </li>
                           <li>
                              <p>要执行未命名为<code class="codeph">ONATTACH</code>的OnAttach程序，请在<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>语句的ONATTACH子句中指定程序的名称。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3__GUID-CC1B1E91-FF64-4F87-81BD-49A072F48D94">
                           <p class="notep1">注意：</p>
                           <p>当您重新安装一个附加的缓存工作区中，Oracle OLAP <span class="italic">不</span>查找和执行OnAttach程序。要强制分析工作区完全分离，以便Oracle OLAP在您重新分配工作区时查找并执行OnAttach程序，请在DETACH语句中指定分离分析工作区的NOCACHE关键字。
                           </p>
                        </div>
                     </div>
                  </div><a id="OLADM1430"></a><div class="props_rev_3"><a id="GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747" name="GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747"></a><h5 id="OLADM-GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747" class="sect5"><span class="enumeration_section">6.7.1.3</span> Autogo计划</h5>
                     <div>
                        <p><a id="d57722e2415" class="indexterm-anchor"></a> Autogo程序可以具有任何名称，也可以明确命名为<code class="codeph">AUTOGO</code> 。</p>
                        <p>如何指定Autogo程序的执行因其名称而异：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当分析工作区中存在名为<a href="olap-dml-programs.html#GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B">AUTOGO</a>的程序时，每次附加工作空间时，除非在AW ATTACH语句中包含NOAUTOGO关键字，否则该程序将自动执行，或者除非您包含指定不同程序名称的AUTOGO子句。
                              </p>
                           </li>
                           <li>
                              <p>要执行未命名为<code class="codeph">AUTOGO</code>的Autogo程序，请在<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>语句的AUTOGO子句中指定程序的名称。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="OLADM298"></a><div class="props_rev_3"><a id="GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E" name="GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E"></a><h4 id="OLADM-GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E" class="sect4"><span class="enumeration_section">6.7.2</span>数据导入和导出程序</h4>
                  <div>
                     <p><a id="d57722e2470" class="indexterm-anchor"></a><a id="d57722e2474" class="indexterm-anchor"></a><a id="d57722e2478" class="indexterm-anchor"></a><a id="d57722e2480" class="indexterm-anchor"></a> OLAP DML支持将关系表，平面文件和电子表格中的数据导入分析工作区对象;并将数据从分析工作区对象导出到关系表，平面文件和电子表格。
                     </p>
                  </div><a id="OLADM299"></a><div class="props_rev_3"><a id="GUID-E83E19C5-2117-4E4D-80E0-10E45D646F79" name="GUID-E83E19C5-2117-4E4D-80E0-10E45D646F79"></a><h5 id="OLADM-GUID-E83E19C5-2117-4E4D-80E0-10E45D646F79" class="sect5"><span class="enumeration_section">6.7.2.1</span>将数据导入关系表并从关系表导出数据</h5>
                     <div>
                        <p>您可以使用OLAP DML SQL语句在SQL OLAP DML程序中嵌入SQL语句。使用OLAP DML SQL语句，您可以将关系表中的数据导入分析工作空间对象，并将数据从分析工作空间对象导出到关系表。</p>
                     </div><a id="OLADM300"></a><div class="props_rev_3"><a id="GUID-100070C8-819C-4DD9-AB37-C81E8CC57CFB" name="GUID-100070C8-819C-4DD9-AB37-C81E8CC57CFB"></a><h6 id="OLADM-GUID-100070C8-819C-4DD9-AB37-C81E8CC57CFB" class="sect6"><span class="enumeration_section">6.7.2.1.1</span>将关系表中的数据导入工作空间对象</h6>
                        <div>
                           <p><a id="d57722e2542" class="indexterm-anchor"></a>使用OLAP DML程序中的OLAP DML SQL语句，您可以使用隐式游标或显式游标将关系数据复制到分析工作区对象中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要使用隐式游标将关系表中的数据复制到分析工作空间对象中，请使用SQL SELECT语句。您可以在OLAP工作表中或OLAP DML程序中以交互方式使用此OLAP DML语句。</p>
                              </li>
                              <li>
                                 <p>要使用显式游标将关系表中的数据复制到分析工作空间对象中，请按指示的顺序使用以下语句。您只能在OLAP DML程序中使用这些语句。您不能在OLAP工作表中以交互方式使用它们。</p>
                                 <ol>
                                    <li>
                                       <p>SQL DECLARE CURSOR通过将SQL游标与SELECT语句或过程相关联来定义SQL游标。</p>
                                    </li>
                                    <li>
                                       <p>SQL OPEN激活SQL游标。</p>
                                    </li>
                                    <li>
                                       <p>SQL FETCH和SQL IMPORT检索和处理游标指定的数据。</p>
                                    </li>
                                    <li>
                                       <p>SQL CLOSE关闭SQL游标。</p>
                                    </li>
                                    <li>
                                       <p>SQL CLEANUP取消SQL游标声明并释放SQL游标的内存资源。</p>
                                    </li>
                                 </ol>
                              </li>
                           </ul>
                           <p>有关将表数据复制到工作空间对象的程序示例，请参见<a href="olap-dml-commands-h-z.html#GUID-45FC5AC8-1CEB-4DBB-9F21-3A858F2E5022">SQL FETCH</a>和<a href="olap-dml-commands-h-z.html#GUID-E185DE15-2F8F-4476-B8FA-8FAC6F02FB00">SQL IMPORT</a> 。</p>
                        </div>
                     </div><a id="OLADM301"></a><div class="props_rev_3"><a id="GUID-0E42AE27-B1A9-4DCC-9389-81125CED3DDE" name="GUID-0E42AE27-B1A9-4DCC-9389-81125CED3DDE"></a><h6 id="OLADM-GUID-0E42AE27-B1A9-4DCC-9389-81125CED3DDE" class="sect6"><span class="enumeration_section">6.7.2.1.2将</span>数据从OLAP DML对象导出到关系表</h6>
                        <div>
                           <p>在程序中，您可以使用带有INSERT关键字的OLAP DML SQL语句将数据从分析工作区对象复制到关系表中。通常，您可以通过在OLAP DML程序中发出以下语句来执行此操作：</p>
                           <ol>
                              <li>
                                 <p>SQL PREPARE语句， <a id="d57722e2612" class="indexterm-anchor"></a>预编译INSERT和UPDATE语句。
                                 </p>
                              </li>
                              <li>
                                 <p>SQL EXECUTE语句，用于执行在步骤1中预编译的语句。</p>
                              </li>
                           </ol>
                        </div>
                     </div>
                  </div><a id="OLADM302"></a><div class="props_rev_3"><a id="GUID-3A4F1783-9569-4798-A906-0FF5383BF801" name="GUID-3A4F1783-9569-4798-A906-0FF5383BF801"></a><h5 id="OLADM-GUID-3A4F1783-9569-4798-A906-0FF5383BF801" class="sect5"><span class="enumeration_section">6.7.2.2</span>将数据导入平面文件并从平面文件导出数据</h5>
                     <div>
                        <p>Oracle OLAP提供了几个语句，可用于从平面文件读取数据或将数据写入平面文件。这些陈述经常在特殊程序中一起使用。</p>
                     </div>
                  </div><a id="OLADM303"></a><div class="props_rev_3"><a id="GUID-75907607-5BBF-45E8-A225-B970B6C0F924" name="GUID-75907607-5BBF-45E8-A225-B970B6C0F924"></a><h5 id="OLADM-GUID-75907607-5BBF-45E8-A225-B970B6C0F924" class="sect5"><span class="enumeration_section">6.7.2.3</span>从电子表格导入数据和从电子表格导出数据</h5>
                     <div>
                        <p>在OLAP DML程序中，您可以使用IMPORT语句将数据从电子表格导入分析工作区对象。您可以使用EXPORT语句将分析工作区对象中的数据导出到电子表格中。</p>
                     </div>
                  </div>
               </div><a id="OLADM304"></a><div class="props_rev_3"><a id="GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0" name="GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0"></a><h4 id="OLADM-GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0" class="sect4"><span class="enumeration_section">6.7.3</span>触发程序</h4>
                  <div>
                     <p>Oracle OLAP将DEFINE，MAINTAIN，PROPERTY，SET（=）UPDATE和AW命令识别为可触发OLAP DML程序执行的事件。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>由DEFINE，MAINTAIN，PROPERTY，UPDATE或SET命令触发的程序称为对象触发程序，本节和<a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0">TRIGGER命令</a>主题中对此进行了讨论。
                           </p>
                        </li>
                        <li>
                           <p>名为<a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a>的程序，在一个分析工作区内定义，在创建，附加，分离或删除另一个分析工作区时触发。有关详细信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a> ”</span>的讨论。
                           </p>
                        </li>
                     </ul>
                     <p>经常编写触发器程序以维护特定于应用程序的元数据。触发器程序具有某些特性，具体取决于触发它们的语句。某些触发器程序在执行触发语句之前执行;一些之后。Oracle OLAP将参数传递给由某些语句触发的程序，而不是其他语句。Oracle OLAP在大多数触发器程序执行之前不会更改维度状态，但会在某些MAINTAIN语句触发程序执行之前更改维度状态。在大多数情况下，您可以为触发器程序提供您选择的任何名称，但某些事件需要具有特定名称的程序。 <span class="q">“ <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1">对象触发程序的</a></span>特征<span class="q">”</span>讨论了这些特征。
                     </p>
                     <div class="infoboxnotealso" id="GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0__GUID-F85E757B-B070-4C39-B088-8F3A519C3BD5">
                        <p class="notep1">也可以看看：</p>
                        <p>以下陈述：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="olap-dml-functions-l-z.html#GUID-A0FB7103-D63D-42B9-ADC8-2CE3E1A2C732">TRIGGER函数</a> ， <a href="olap-dml-commands-a-g.html#GUID-A90506EF-24DF-44C0-86CA-0D51AFAD921B">DESCRIBE</a>命令和<a href="olap-dml-functions-l-z.html#GUID-4AD8C727-8B19-4840-8F68-C11EF7E08DC3">OBJ</a>函数，用于检索有关触发器的信息。
                              </p>
                           </li>
                           <li>
                              <p><a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a>选项，可用于禁用所有触发器。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="OLADM305"></a><div class="props_rev_3"><a id="GUID-A5B8C035-27E8-4595-AC2F-BD158A998554" name="GUID-A5B8C035-27E8-4595-AC2F-BD158A998554"></a><h5 id="OLADM-GUID-A5B8C035-27E8-4595-AC2F-BD158A998554" class="sect5"><span class="enumeration_section">6.7.3.1</span>创建对象触发程序</h5>
                     <div>
                        <div class="section">
                           <p>在分析工作区中定义对象后，可以按照以下过程为该对象创建触发器程序：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>按照DEFINE PROGRAM中的描述定义程序。</span></li>
                           <li class="stepexpand"><span>确定要为程序命名的内容以及程序是否可以是用户定义的程序。（ <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="此表列出了触发程序的OLAP DML语句，程序所需的名称（如果有），是否可以将程序定义为函数，以及程序是否需要参数。">见表6-3</a> 。）如果程序可以是用户定义的程序，则决定是否要将触发程序定义为用户定义的函数。</span></li>
                           <li class="stepexpand"><span>按照<span class="q">“ <a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">指定程序内容</a> ”中的</span>描述对实际程序进行编码。</span></li>
                           <li class="stepexpand"><span>编码触发器程序时，请牢记以下几点：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>使用<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="此表列出了触发程序的OLAP DML语句，程序所需的名称（如果有），是否可以将程序定义为函数，以及程序是否需要参数。">表6-3</a>确定Oracle OLAP是否将值传递给程序。如果是，请使用ARGUMENT语句在程序中声明这些参数，并使用VARIABLE语句定义值的程序变量。（有关参数的具体信息，请参阅<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI" title="此表描述了需要参数的触发器程序的参数。">表6-4</a> 。）
                                       </p>
                                    </li>
                                    <li>
                                       <p>每次Oracle OLAP为定义了事件的对象分配值时，都会执行由Assign事件触发的程序。因此，由Assign语句循环遍历分配值的对象时，由Assign事件触发的程序通常反复执行。您可以使用TRIGGERASSIGN分配一个值，该值与触发程序执行的赋值语句指定的值不同。</p>
                                    </li>
                                    <li>
                                       <p>在某些情况下，Oracle OLAP会在维护事件触发程序执行时更改正在维护的维度的状态。有关详细信息，请<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGCCCAI" title="此表说明了当Maintain事件触发程序执行时，Oracle OLAP如何更改维护维度的状态。">参见表6-5</a></p>
                                    </li>
                                    <li>
                                       <p>在程序中使用CALLTYPE函数来标识程序作为触发器被调用。</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>当触发程序<span class="italic">不是</span> TRIGGER_AFTER_UPDATE，TRIGGER_BEFORE_UPDATE或TRIGGER_DEFINE程序时，使用TRIGGER命令将程序与所需的对象和事件相关联。</span></li>
                           <li class="stepexpand"><span>不支持递归触发器。<span class="italic">在</span>触发程序本身的触发器程序中发出相同的DML语句之前，必须将USETRIGGERS选项设置为<code class="codeph">NO</code> 。例如，假设您编写了一个名为<code class="codeph">TRIGGER_MAINTAIN_ADD</code>的程序，该程序由MAINTAIN ADD语句触发。在<code class="codeph">TRIGGER_MAINTAIN_ADD</code>程序中，必须在发出MAINTAIN语句之前将USETRIGGERS选项设置为<code class="codeph">NO</code> 。</span></li>
                        </ol>
                     </div>
                  </div><a id="OLADM1431"></a><a id="OLADM1432"></a><a id="OLADM1433"></a><a id="OLADM306"></a><div class="props_rev_3"><a id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1" name="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1"></a><h5 id="OLADM-GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1" class="sect5"><span class="enumeration_section">6.7.3.2</span>对象触发程序的特征</h5>
                     <div>
                        <p>Object t rigger程序具有某些特征，具体取决于触发它们的语句。某些触发器程序在执行触发语句之前执行;一些之后。Oracle OLAP将参数传递给由某些语句触发的程序，而不是其他语句。Oracle OLAP在大多数触发器程序执行之前不会更改维度状态，但会在某些MAINTAIN语句触发程序执行之前更改维度状态。在大多数情况下，您可以为触发器程序提供您选择的任何名称，但某些事件需要具有特定名称的程序。
                        </p>
                        <p><a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="此表列出了触发程序的OLAP DML语句，程序所需的名称（如果有），是否可以将程序定义为函数，以及程序是否需要参数。">表6-3</a>列出了触发程序的OLAP DML语句，程序所需的名称（如果有），Oracle OLAP是否使用程序返回的值，以及Oracle OLAP是否将参数传递给程序。
                        </p>
                        <p>在设计触发器程序时，请牢记以下几点：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在DML语句<span class="italic">之前</span>执行的触发器 - 对于在触发OLAP DML语句执行之前执行的触发器程序，您可以将触发器程序定义为返回<code class="codeph">BOOLEAN</code>值的用户定义函数。程序返回的值确定Oracle OLAP是否执行触发执行触发器程序的语句。当程序返回<code class="codeph">FALSE</code> ，Oracle OLAP不执行触发语句;当它返回<code class="codeph">TRUE</code>或<code class="codeph">NA</code> ，触发语句执行。
                              </p>
                           </li>
                           <li>
                              <p>传递给触发程序的参数 -  Oracle OLAP将参数传递给某些触发器程序。<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="此表列出了触发程序的OLAP DML语句，程序所需的名称（如果有），是否可以将程序定义为函数，以及程序是否需要参数。">表6-3</a>列出了这些程序。<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI" title="此表描述了需要参数的触发器程序的参数。">表6-4</a>中提供了这些参数的描述。使用ARGUMENT语句在程序中声明这些参数。使用VARIABLE定义值的程序变量。使用WKSDATA功能检索与参数的数据类型<code class="codeph">WORKSHEET</code>数据类型。
                              </p>
                           </li>
                           <li>
                              <p>分配触发器程序 - 每次为指定事件的对象赋值时，Oracle OLAP都会执行由Assign事件触发的程序。因此，由Assign语句循环遍历分配值的对象时，由Assign事件触发的程序通常反复执行。每次执行时，要分配的值将作为argument1传递给Assign触发器程序。（有关更多信息，请参阅<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI" title="此表描述了需要参数的触发器程序的参数。">表6-4</a> ;有关<a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0__CEGCIIGC">示例，</a>请参见<a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0__CEGCIIGC">示例10-163</a> 。）在Assign触发器程序中，您可以使用TRIGGER ASSIGN语句分配与触发执行Assign触发器程序的赋值语句指定的值不同的值。
                              </p>
                              <p><span class="italic">只有</span>在公式为其定义了“指定”触发器时，才能为公式指定值。使用Assign事件为公式分配值时，Oracle OLAP会为指定值的事件执行触发器程序，并将指定的值传递给触发器程序。该分配触发并<code class="codeph">not</code>更改公式本身的定义。有关公式上的“分配”触发器的示例，请参见<a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0__CEGCIBAE">示例10-165</a> 。
                              </p>
                           </li>
                           <li>
                              <p>维护触发器程序和维度状态 - 在某些情况下，Oracle OLAP会在维护事件触发程序执行时更改维护维度的状态。有关详细信息，请<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGCCCAI" title="此表说明了当Maintain事件触发程序执行时，Oracle OLAP如何更改维护维度的状态。">参见表6-5</a> 。
                              </p>
                           </li>
                           <li>
                              <p>维护触发器和维度代理 - 维度代理的维护触发器与维护其他对象的触发器不同。当维度代理具有维护触发器时，您只能成功针对维度代理发出MAINTAIN语句。为<span class="italic">没有</span>维护触发器的代理维度发出MAINTAIN语句会返回错误。此外，对于Maintain Add和Maintain Merge触发器，是否将参数传递给程序取决于定义触发器的对象：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对于具有Maintain触发器的维度代理，Oracle OLAP会为每个添加或合并的值执行一次触发器程序，并将该值传递给程序。</p>
                                 </li>
                                 <li>
                                    <p>对于具有Maintain触发器的其他对象，Oracle OLAP仅在MAINTAIN语句执行后执行触发器程序，并且没有值传递给程序</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <div class="tblformal" id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB">
                           <p class="titleintable">表6-3对象触发程序特征</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="对象触发程序特征" width="100%" border="1" summary="This table lists the OLAP DML statements that trigger programs, the required name of the program (if any), whether or not you can define the program as a function, and whether or not the program requires arguments." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d57722e2999">触发声明（事件）</th>
                                    <th align="left" valign="bottom" width="38%" id="d57722e3002">程序名称</th>
                                    <th align="left" valign="bottom" width="11%" id="d57722e3005">返回值</th>
                                    <th align="left" valign="bottom" width="15%" id="d57722e3008">通过论证</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3013" headers="d57722e2999 ">
                                       <p>=（赋值）语句（SET）</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3013 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3013 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3013 d57722e3008 ">
                                       <p>是</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3026" headers="d57722e2999 ">
                                       <p>限定</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3026 d57722e3002 ">
                                       <p><a href="olap-dml-programs.html#GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8">TRIGGER_DEFINE</a></p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3026 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3026 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3040" headers="d57722e2999 ">
                                       <p>维持ADD</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3040 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3040 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3040 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3053" headers="d57722e2999 ">
                                       <p>维护删除（ <span class="italic">不是</span>全部）</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3053 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3053 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3053 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3069" headers="d57722e2999 ">
                                       <p>保持全部删除</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3069 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3069 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3069 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3082" headers="d57722e2999 ">
                                       <p>保持合并</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3082 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3082 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3082 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3095" headers="d57722e2999 ">
                                       <p>保持运动</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3095 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3095 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3095 d57722e3008 ">
                                       <p>是</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3108" headers="d57722e2999 ">
                                       <p>维持重新命名</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3108 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3108 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3108 d57722e3008 ">
                                       <p>是</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3121" headers="d57722e2999 ">
                                       <p>属性</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3121 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3121 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3121 d57722e3008 ">
                                       <p>是</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3134" headers="d57722e2999 ">
                                       <p>更新（更新AW）</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3134 d57722e3002 ">
                                       <p><a href="olap-dml-programs.html#GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65">TRIGGER_AFTER_UPDATE</a></p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3134 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3134 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3148" headers="d57722e2999 ">
                                       <p>更新（更新AW）</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3148 d57722e3002 ">
                                       <p><a href="olap-dml-programs.html#GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB">TRIGGER_BEFORE_UPDATE</a></p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3148 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3148 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3163" headers="d57722e2999 ">
                                       <p>更新（更新多个）</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3163 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3163 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3163 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p></p>
                        <div class="tblformal" id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI">
                           <p class="titleintable">表6-4传递给触发器程序的参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="传递给触发程序的参数" width="100%" border="1" summary="This table describes the arguments of trigger programs that require arguments." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="15%" id="d57722e3187">事件</th>
                                    <th align="left" valign="bottom" width="46%" id="d57722e3190">ARGUMENT1</th>
                                    <th align="left" valign="bottom" width="39%" id="d57722e3193">ARGUMENT2</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3198" headers="d57722e3187 ">
                                       <p>属性</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3198 d57722e3190 ">
                                       <p>当PROPERTY语句将属性分配给对象时，属性的名称。当PROPERTY语句删除一个或多个属性时， <code class="codeph">the literal DELETE</code> 。 （<code class="codeph">TEXT</code>数据类型）</p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3198 d57722e3193 ">
                                       <p>当<span class="italic">argument1的</span>值为<code class="codeph">DELETE</code> ，属性的名称或文字<code class="codeph">ALL</code> 。在所有其他情况下，属性的名称。（ <code class="codeph">WORKSHEET</code>数据类型）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3226" headers="d57722e3187 ">
                                       <p>分配</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3226 d57722e3190 ">
                                       <p>要分配的值。如果知道要为其分配值的对象的数据类型，请为该参数指定该数据类型。如果不知道实际数据类型，请指定<code class="codeph">WORKSHEET</code>作为参数的数据类型。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3226 d57722e3193 ">
                                       <p>没有。Oracle OLAP只向程序传递一个参数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3239" headers="d57722e3187 ">
                                       <p>保持添加</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3239 d57722e3190 ">
                                       <p></p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3239 d57722e3193 ">
                                       <p>（仅限维度代理）增值。（ <code class="codeph">WORKSHEET data type)</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3250" headers="d57722e3187 ">
                                       <p>保持重命名</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3250 d57722e3190 ">
                                       <p>要重命名的维值。（ <code class="codeph">TEXT</code>数据类型）</p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3250 d57722e3193 ">
                                       <p>维度成员的新名称。（ <code class="codeph">WORKSHEET</code>数据类型）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3266" headers="d57722e3187 ">
                                       <p>合并</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3266 d57722e3190 ">
                                       <p></p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3266 d57722e3193 ">
                                       <p>（仅限维度代理）合并的值。（ <code class="codeph">WORKSHEET data type)</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3277" headers="d57722e3187 ">
                                       <p>保持移动</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3277 d57722e3190 ">
                                       <p>要移动的维值的位置。（ <code class="codeph">TEXT</code>数据类型）</p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3277 d57722e3193 ">
                                       <p>文字<code class="codeph">BEFORE</code>或<code class="codeph">AFTER</code> 。 （<code class="codeph">WORKSHEET</code>数据类型）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p></p>
                        <div class="tblformal" id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGCCCAI">
                           <p class="titleintable">表6-5维护事件影响维度状态触发程序的方式</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="如何通过维护事件触发程序效果维度状态" width="100%" border="1" summary="This table explains how Oracle OLAP changes the status of the dimension being maintained when a Maintain event triggeres the execution of a program." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d57722e3309">活动Subevent</th>
                                    <th align="left" valign="bottom" width="74%" id="d57722e3312">程序执行前的维度状态</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3317" headers="d57722e3309 ">
                                       <p>保持添加</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3317 d57722e3312 ">
                                       <p>状态设置为刚添加的维值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3324" headers="d57722e3309 ">
                                       <p>保持删除</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3324 d57722e3312 ">
                                       <p>状态设置为要删除的维值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3331" headers="d57722e3309 ">
                                       <p>保持全部删除</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3331 d57722e3312 ">
                                       <p>当前状态不会更改。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3338" headers="d57722e3309 ">
                                       <p>合并</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3338 d57722e3312 ">
                                       <p>状态设置为刚刚合并的维值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3345" headers="d57722e3309 ">
                                       <p>保持移动</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3345 d57722e3312 ">
                                       <p>状态设置为要移动的维值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3352" headers="d57722e3309 ">
                                       <p>保持重命名</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3352 d57722e3312 ">
                                       <p>当前状态不会更改。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="OLADM307"></a><div class="props_rev_3"><a id="GUID-91C66052-0A4C-473B-A613-2828EDF37D0F" name="GUID-91C66052-0A4C-473B-A613-2828EDF37D0F"></a><h4 id="OLADM-GUID-91C66052-0A4C-473B-A613-2828EDF37D0F" class="sect4"><span class="enumeration_section">6.7.4</span>聚合，分配和建模程序</h4>
                  <div>
                     <p>要使用OLAP DML聚合，分配或建模数据，首先要通过定义计算规范来指定要执行的计算，如<span class="q">“ <a href="formulas-models-aggregations-and-allocations.html#GUID-5483B557-E17F-4DFD-A5BB-FC785EEFCB20">创建计算对象</a> ”中所述</span> 。稍后，要将具有聚合，分配或建模值的变量填充为数据库维护过程，请编写程序以执行计算对象。有关在这些程序中使用的OLAP DML语句的详细信息，请参阅<span class="q">“ <a href="formulas-models-aggregations-and-allocations.html#GUID-F20C02E1-E771-4DA9-AFD1-B6FB2BFB6E18">运行模型</a> ”</span> ， <span class="q">“ <a href="formulas-models-aggregations-and-allocations.html#GUID-8A57C56B-B39B-4C05-95D2-8DBA5D6FD2BD">执行聚合</a> ”</span>和<span class="q">“ <a href="formulas-models-aggregations-and-allocations.html#GUID-BA7B4A64-E4BC-4C2B-B504-2A1C5E94680B">分配数据</a> ”</span> 。
                     </p>
                  </div>
               </div><a id="OLADM308"></a><div class="props_rev_3"><a id="GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4" name="GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4"></a><h4 id="OLADM-GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4" class="sect4"><span class="enumeration_section">6.7.5</span>预测程序</h4>
                  <div>
                     <div class="section">
                        <p>OLAP DML有几个相关的语句，允许您使用Geneva Forecasting引擎预测数据，该引擎是Roadmap Technologies的统计预测引擎，广泛用于需求规划应用程序。</p>
                        <p>要使用Geneva Forecasting引擎进行预测，请执行以下步骤：</p>
                        <ol>
                           <li>
                              <p>将未来时间值添加到时间维度。</p>
                           </li>
                           <li>
                              <p>创建一个变量来保存预测结果。</p>
                           </li>
                           <li>
                              <p>写一个预测程序。在该计划中，按照指示的顺序发布以下声明：</p>
                              <ol type="a">
                                 <li>
                                    <p>FCOPEN功能 - 创建预测上下文。</p>
                                 </li>
                                 <li>
                                    <p>FCSET命令 - 指定预测特征。</p>
                                 </li>
                                 <li>
                                    <p>FCEXEC命令 - 执行预测并使用预测数据填充Oracle OLAP变量。</p>
                                 </li>
                                 <li>
                                    <p>FCQUERY功能 - 检索有关预测特征或预测试验的信息。</p>
                                 </li>
                                 <li>
                                    <p>FCCLOSE命令 - 关闭预测上下文。</p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <p>有关使用这些语句预测数据的<a href="olap-dml-commands-a-g.html#GUID-4F77C39A-337D-437D-9C57-A3F56F936635__CIHFBEEF">示例，</a>请参见<a href="olap-dml-commands-a-g.html#GUID-4F77C39A-337D-437D-9C57-A3F56F936635__CIHFBEEF">示例9-119</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM309"></a><div class="props_rev_3"><a id="GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002" name="GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002"></a><h4 id="OLADM-GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002" class="sect4"><span class="enumeration_section">6.7.6</span>导出和导入工作区对象的程序</h4>
                  <div>
                     <p><a id="d57722e3497" class="indexterm-anchor"></a><a id="d57722e3499" class="indexterm-anchor"></a><a id="d57722e3503" class="indexterm-anchor"></a><a id="d57722e3507" class="indexterm-anchor"></a><a id="d57722e3509" class="indexterm-anchor"></a>您可以将整个工作区，多个工作区对象，单个工作区对象或分析工作区对象的一部分导出到特殊格式的EIF文件。然后，您可以将信息导入同一模式或不同模式中的其他工作区。
                     </p>
                     <p>导出和导入的一个原因是将数据移动到新位置。另一个目的是在添加并删除许多对象或维值后，从分析工作区中删除多余的空间。为此，请发出EXPORT语句将所有数据放入EIF文件，使用其他名称创建另一个工作区，然后使用IMPORT语句将EIF文件导入新工作区。导入到同一数据库后，可以删除旧工作区并使用与原始工作区相同的工作区别名引用新工作区。</p>
                     <p>以下语句将当前分析工作区中的所有数据和定义复制到名为<code class="codeph">mydir</code>的目录对象中名为<code class="codeph">reorg.eif</code>的EIF文件中。
                     </p><pre class="oac_no_warn" dir="ltr">导出所有EIF文件'mydir / reorg.eif'</pre></div>
               </div>
            </div><a id="OLADM311"></a><div class="sect2"><a id="GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC" name="GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC"></a><h3 id="OLADM-GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC" class="sect3"><span class="enumeration_section">6.8</span> Oracle OLAP查找的用户编写的程序</h3>
               <div>
                  <p>Oracle OLAP使用以下名称查找Oracle OLAP程序，并按照每个程序主题中的说明执行它们。</p>
                  <ul class="simple" style="list-style-type:none;padding-left:0">
                     <li><a href="olap-dml-programs.html#GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B">AUTOGO</a></li>
                     <li><a href="olap-dml-programs.html#GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE">ONATTACH</a></li>
                     <li><a href="olap-dml-programs.html#GUID-41BF0229-149A-46F6-B386-0F7958590CBB">ONDETACH</a></li>
                     <li><a href="olap-dml-programs.html#GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4">PERMIT_READ</a></li>
                     <li><a href="olap-dml-programs.html#GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E">PERMIT_WRITE</a></li>
                     <li><a href="olap-dml-programs.html#GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65">TRIGGER_AFTER_UPDATE</a></li>
                     <li><a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a></li>
                     <li><a href="olap-dml-programs.html#GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB">TRIGGER_BEFORE_UPDATE</a></li>
                     <li><a href="olap-dml-programs.html#GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8">TRIGGER_DEFINE</a></li>
                  </ul>
               </div><a id="OLADM1434"></a><a id="AUTOGO"></a><div class="sect3"><a id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B" name="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B"></a><h4 id="OLADM-GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B" class="sect4"><span class="enumeration_section">6.8.1</span> AUTOGO</h4>
                  <div>
                     <p><a id="d57722e3612" class="indexterm-anchor"></a><a id="d57722e3614" class="indexterm-anchor"></a><a id="d57722e3618" class="indexterm-anchor"></a><a id="d57722e3620" class="indexterm-anchor"></a> AUTOGO程序是您可以创建的程序，当执行<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>命令时，Oracle OLAP会按名称检查。
                     </p>
                     <p>附加包含名为AUTOGO的程序的分析工作区时，除非AW ATTACH语句包含NOAUTOGO子句或指定具有不同名称的程序的AUTOGO子句，否则Oracle OLAP将执行ONATTACH程序。</p>
                     <div class="infoboxnote" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-48E9C31C-D949-41E4-9B11-23028BC4937D">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查此程序和其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-BD5ADE81-91F9-47C3-A400-DE66F59B87DD">回报价值</p>
                        <p><code class="codeph">布尔</code> 
                        </p>
                        <p>Oracle OLAP成功设置并附加分析工作区时为<code class="codeph">TRUE</code> ;或者当它没有或当Autogo程序抛出异常时为<code class="codeph">FALSE</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-C8C18F01-7330-4482-878B-4B900A9FDB09">
                        <p class="notep1">注意：</p>
                        <p>建议您使用正常的返回值而不是依赖异常来创建返回值<code class="codeph">FALSE</code> 。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-45907744-35D5-4889-983B-DD60236FB9C2">句法</p>
                        <p>要使用名称<code class="codeph">AUTOGO</code>定义程序， <code class="codeph">AUTOGO</code>使用<a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM中</a>显示的语法。使用以下参数将实际程序编码为用户定义的函数。
                        </p>
                        <p>AUTOGO（ <span class="italic">密码</span> ）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-9D1D7426-F50B-436B-AED3-716B117F05D4">参数</p>
                        <p>有关<span class="italic">密码的</span>说明，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-2EBC919F-617A-471A-951E-ED3E3BA40579">例子</p>
                        <p>有关附件程序的行为<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例</a> ，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例9-50</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM312"></a><a id="OLADM1435"></a><a id="ONATTACH"></a><div class="sect3"><a id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE" name="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE"></a><h4 id="OLADM-GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE" class="sect4"><span class="enumeration_section">6.8.2</span> ONATTACH</h4>
                  <div>
                     <p><a id="d57722e3722" class="indexterm-anchor"></a><a id="d57722e3724" class="indexterm-anchor"></a><a id="d57722e3728" class="indexterm-anchor"></a><a id="d57722e3730" class="indexterm-anchor"></a> ONATTACH程序是您可以创建的程序，当执行<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>命令时，Oracle OLAP会按名称检查。
                     </p>
                     <p>附加包含名为ONATTACH的程序的分析工作区时，除非AW ATTACH语句包含NOONATTACH子句或指定具有不同名称的程序的ONATTACH子句，否则Oracle OLAP将执行ONATTACH程序。</p>
                     <p>根据<code class="codeph">onattach</code>程序中的语句，授予或拒绝用户访问特定对象或对象值集。对于多写器附件，您可以使用<a href="olap-dml-commands-a-g.html#GUID-3F7EDB63-D96B-4965-9E97-F10CC29612BC">ACQUIRE</a>命令来访问各个工作区对象。对于只读和读/写附件，您可以使用<a href="olap-dml-commands-h-z.html#GUID-C4913E34-637F-4599-B87D-C2FFDBFA455D">PERMIT</a>命令授予或限制对单个工作区对象的访问权限。给定<code class="codeph">onattach</code>程序中引用的所有对象必须存在于同一分析工作区中。
                     </p>
                     <div class="infoboxnote" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-1D3CD76E-4C13-4AAF-95DC-AA536DF49C1F">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查此程序和其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-A3BDF0E3-613C-4169-8425-1AE8086D7CE0">回报价值</p>
                        <p><code class="codeph">布尔</code> 
                        </p>
                        <p>Oracle OLAP成功设置并附加分析工作区时为<code class="codeph">TRUE</code> ;或者当它没有或当<code class="codeph">onattach</code>程序抛出异常时为<code class="codeph">FALSE</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-F39189CD-7D0E-48B1-98B2-8B527491FE4A">
                        <p class="notep1">注意：</p>
                        <p>建议您使用正常的返回值而不是依赖异常来创建返回值<code class="codeph">FALSE</code> 。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-67CC84DC-A54E-4969-A78F-103C2F08E08D">句法</p>
                        <p>要使用名称<code class="codeph">ONATTACH</code>定义程序， <code class="codeph">ONATTACH</code>使用<a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM中</a>显示的语法。使用以下参数将实际程序编码为用户定义的函数。
                        </p>
                        <p>ONATTACH（{READ | WRITE | EXCLUSIVE | MULTI} <span class="italic">密码</span> ）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-9B5B9E5D-0D29-4AEF-A64A-B7545FA11626">参数</p>
                        <p>有关附件模式（即READ，WRITE，EXCLUSIVE和MULTI）和<span class="italic">密码的</span>说明，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-2229F198-776A-4CE3-BA34-DF6051C0824D">使用说明</p>
                        <p>ONATTACH由OLAP API创建的程序</p>
                        <p>使用OLAP API将分析工作区创建为OLAP多维数据集时，OLAP API还可以创建名为ONATTACH的程序。您<span class="italic">无法</span>修改以这种方式自动创建的ONATTACH程序。此外，不建议覆盖此ONATTACH的执行。
                        </p>
                        <p>因此，在分析工作区中存在此类ONATTACH程序时，请创建不同类型的启动程序，以指定在附加分析工作区时要执行的行为。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-366933D4-6739-457D-9205-43AB15BC8589">例子</p>
                        <p>有关附件程序的行为<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例</a> ，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例9-50</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM313"></a><div class="sect3"><a id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB" name="GUID-41BF0229-149A-46F6-B386-0F7958590CBB"></a><h4 id="OLADM-GUID-41BF0229-149A-46F6-B386-0F7958590CBB" class="sect4"><span class="enumeration_section">6.8.3</span> ONDETACH</h4>
                  <div>
                     <p><a id="d57722e3861" class="indexterm-anchor"></a><a id="d57722e3863" class="indexterm-anchor"></a><a id="d57722e3867" class="indexterm-anchor"></a> ONDETACH程序是您可以创建的程序，当执行<a href="olap-dml-commands-a-g.html#GUID-6416B2AA-7E9C-4CE7-8888-0B4A8456EF94">AW DETACH</a>命令时，Oracle OLAP会按名称检查。根据程序返回的值，Oracle OLAP在分离分析工作区后立即执行程序中的代码。
                     </p>
                     <div class="infoboxnote" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-36330D49-B42D-4FCB-B640-BA5D29B9CBAD">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-A1159041-BA31-4F9A-9EC2-CC4636BAC2B1">回报价值</p>
                        <p><code class="codeph">布尔</code> 
                        </p>
                        <p>Oracle OLAP成功分离分析工作区时为<code class="codeph">TRUE</code> ;或者当它没有或者<code class="codeph">detach</code>程序抛出异常时为<code class="codeph">FALSE</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-B6111ABC-BE33-4E62-9BFA-E53B385EE7BE">
                        <p class="notep1">注意：</p>
                        <p>建议您使用正常的返回值而不是依赖异常来创建返回值<code class="codeph">FALSE</code> 。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-8146212F-C5DF-4A8B-AF8D-F2E64BDD2C78">句法</p>
                        <p>要定义名为<code class="codeph">ONDETACH</code>的程序， <code class="codeph">ONDETACH</code>使用<a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM中</a>显示的语法。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM314"></a><a id="PERMIT_READ"></a><div class="sect3"><a id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4" name="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4"></a><h4 id="OLADM-GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4" class="sect4"><span class="enumeration_section">6.8.4</span> PERMIT_READ</h4>
                  <div>
                     <p><a id="d57722e3946" class="indexterm-anchor"></a> PERMIT_READ程序是一个程序<a id="d57722e3949" class="indexterm-anchor"></a><a id="d57722e3953" class="indexterm-anchor"></a><a id="d57722e3955" class="indexterm-anchor"></a>您可以创建并在执行<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>只读命令时按名称检查Oracle OLAP。根据程序返回的值，Oracle OLAP在附加分析工作区后执行程序中的代码。根据<code class="codeph">permit_read</code>程序中的语句，用户被授予或拒绝访问特定对象或对象值集。在<code class="codeph">permit_read</code>程序中，您可以指定授予或限制对单个工作空间对象的访问权限的<a href="olap-dml-commands-h-z.html#GUID-C4913E34-637F-4599-B87D-C2FFDBFA455D">PERMIT</a>命令。给定<code class="codeph">permit_read</code>引用的所有对象必须存在于同一分析工作区中。
                     </p>
                     <div class="infoboxnote" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-05974AAA-4A6D-4848-9498-4717E05467B5">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查此程序和其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-86C5AABE-DCA3-4444-8F84-9A5801096437">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="olap-dml-options.html#GUID-7A354BA1-BC11-4FDB-8E9B-908EDBFB1634">PERMITERROR</a>选项， <a href="olap-dml-options.html#GUID-F2C35395-AD89-4E78-ABCD-78F7DCD544A6">PERMITREADERROR</a>选项和<a href="olap-dml-programs.html#GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E">PERMIT_WRITE</a>程序</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-D76F432C-9462-4767-A080-D3543F80FB49">回报价值</p>
                        <p><code class="codeph">布尔</code> 
                        </p>
                        <p>Oracle OLAP成功设置并附加分析工作区时为<code class="codeph">TRUE</code> ;如果没有，或者<code class="codeph">permit_read</code>程序抛出异常，则<code class="codeph">permit_read</code> <code class="codeph">FALSE</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-164114B0-9830-4F6B-9455-3417167BADF2">
                        <p class="notep1">注意：</p>
                        <p>建议您使用正常的返回值而不是依赖异常来创建返回值<code class="codeph">FALSE</code> 。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-898CC43F-B667-462C-B6FA-825F8E5C79FD">句法</p>
                        <p>要使用名称<code class="codeph">PERMIT_READ</code>定义程序， <code class="codeph">PERMIT_READ</code>使用<a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM中</a>显示的语法。使用以下参数将实际程序编码为用户定义的函数。
                        </p>
                        <p>PERMIT_READ（ <span class="italic">密码</span> ）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-4A31DDE1-E21D-4CEF-960C-1CFD48CC1D2B">参数</p>
                        <p>有关<span class="italic">密码</span>的说明，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> 。当用户在附加分析工作区时指定密码时，密码将作为参数传递给程序进行处理。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-C0BCFF6F-FE64-4840-BF16-917BE963AC9F">例子</p>
                        <p>要查看附加分析工作区时执行权限程序的顺序，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例9-50</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM315"></a><a id="PERMIT_WRITE"></a><div class="sect3"><a id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E" name="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E"></a><h4 id="OLADM-GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E" class="sect4"><span class="enumeration_section">6.8.5</span> PERMIT_WRITE</h4>
                  <div>
                     <p><a id="d57722e4081" class="indexterm-anchor"></a> PERMIT_WRITE程序<a id="d57722e4084" class="indexterm-anchor"></a><a id="d57722e4088" class="indexterm-anchor"></a><a id="d57722e4090" class="indexterm-anchor"></a>是一个可以创建的程序，当执行<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>读/写命令时，Oracle OLAP会按名称检查。根据程序返回的值，Oracle OLAP在附加分析工作区后执行程序中的代码。根据<code class="codeph">permit_write</code>程序中的语句，授予或拒绝用户访问特定对象或对象值集。在<code class="codeph">permit_write</code>程序中，您可以指定授予或限制对单个工作空间对象的访问权限的<a href="olap-dml-commands-h-z.html#GUID-C4913E34-637F-4599-B87D-C2FFDBFA455D">PERMIT</a>命令。给定<code class="codeph">permit_write</code>程序中引用的所有对象必须存在于同一分析工作区中。
                     </p>
                     <div class="infoboxnote" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-EAA4172A-8D34-423F-9870-664E2E954E3B">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查此程序和其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-A0F4DFD5-743A-4B6A-8131-8DE4BEEDFF67">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="olap-dml-options.html#GUID-7A354BA1-BC11-4FDB-8E9B-908EDBFB1634">PERMITERROR</a>选项， <a href="olap-dml-options.html#GUID-F2C35395-AD89-4E78-ABCD-78F7DCD544A6">PERMITREADERROR</a>选项和<a href="olap-dml-programs.html#GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4">PERMIT_READ</a>程序</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-8FFDD9FD-DA7B-4B21-B31F-C30F33B31E5F">回报价值</p>
                        <p><code class="codeph">布尔</code> 
                        </p>
                        <p>Oracle OLAP成功设置并附加分析工作区时为<code class="codeph">TRUE</code> ;如果没有，或者<code class="codeph">permit_write</code>程序抛出异常，则<code class="codeph">permit_write</code> <code class="codeph">FALSE</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-66B18C50-1887-43D0-9259-D9698D151AE5">
                        <p class="notep1">注意：</p>
                        <p>建议您使用正常的返回值而不是依赖异常来创建返回值<code class="codeph">FALSE</code> 。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-8D549E24-7B16-43C8-B9A4-6A63B2CFD366">句法</p>
                        <p>要使用名称<code class="codeph">PERMIT_WRITE</code>定义程序， <code class="codeph">PERMIT_WRITE</code>使用<a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM中</a>显示的语法。使用以下参数将实际程序编码为用户定义的函数。
                        </p>
                        <p>PERMIT_WRITE（ <span class="italic">密码</span> ）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-B44D55C3-CA6B-434F-A3E0-F9DDF29E843C">参数</p>
                        <p>有关<span class="italic">密码</span>的说明，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> 。当用户在附加分析工作区时指定密码时，密码将作为参数传递给程序进行处理。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-12B3CBB9-7452-4F16-A7FD-3EA8CB1CB8C2">例子</p>
                        <p>要查看附加分析工作区时执行权限程序的顺序，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例9-50</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM316"></a><a id="OLADM1436"></a><a id="TRIGGER_AFTER_UPDATE"></a><div class="sect3"><a id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65" name="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65"></a><h4 id="OLADM-GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65" class="sect4"><span class="enumeration_section">6.8.6</span> TRIGGER_AFTER_UPDATE</h4>
                  <div>
                     <p><a id="d57722e4218" class="indexterm-anchor"></a><a id="d57722e4220" class="indexterm-anchor"></a><a id="d57722e4224" class="indexterm-anchor"></a><a id="d57722e4228" class="indexterm-anchor"></a><a id="d57722e4232" class="indexterm-anchor"></a><a id="d57722e4236" class="indexterm-anchor"></a>一个<a id="d57722e4241" class="indexterm-anchor"></a><a id="d57722e4243" class="indexterm-anchor"></a><a id="d57722e4247" class="indexterm-anchor"></a> TRIGGER_AFTER_UPDATE程序是您可以在分析工作区中创建的程序，当执行该分析工作区的<a href="olap-dml-commands-h-z.html#GUID-96C177F0-933E-42E5-8C70-BDA6EBD398F0">UPDATE</a>命令时，Oracle OLAP会按名称检查该程序。当程序存在于您要更新的同一分析工作区中时，Oracle OLAP会在执行UPDATE后执行该程序。</p>
                     <div class="infoboxnote" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-CAC1D27E-30B2-480E-8BE6-E8980E6C2A50">
                        <p class="notep1">注意：</p>
                        <p>必须将<a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a>选项设置为其默认值<code class="codeph">TRUE</code>才能执行TRIGGER_AFTER_UPDATE程序</p>
                     </div>
                     <div class="infoboxnote" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-D8F1D500-0E80-4DB1-BC23-C35559CE825A">
                        <p class="notep1">注意：</p>
                        <p><span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-1BDC38D6-07A8-4417-BDB8-C843D6E8EA30">句法</p>
                        <p>要创建名为<code class="codeph">TRIGGER_AFTER_UPDATE</code>的程序，请遵循<span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发器程序</a> ”中</span>提供的准则。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-9BFC7614-F33E-4D1F-A5F6-D2B31D32DA24">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-68E8BF44-A16C-4250-9404-07A07BE02DE4">
                        <p class="titleinexample">例6-1 TRIGGER_AFTER_UPDATE程序</p>
                        <p>假设您已在分析工作区中定义了以下程序。</p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_AFTER_UPDATE PROGRAM PROGRAM SHOW JOINCHARS（'calltype ='CALLTYPE）SHOW JOINCHARS（'triggering event ='TRIGGER（EVENT））SHOW JOINCHARS（'trigger subevent ='TRIGGER（SUBEVENT））END</pre><p>当您发出UPDATE语句时，程序将执行并显示以下输出。</p><pre class="oac_no_warn" dir="ltr">calltype = TRIGGER触发事件= AFTER_UPDATE触发subevent = AW</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLADM317"></a><a id="OLADM1437"></a><a id="OLADM1438"></a><a id="TRIGGER_AW"></a><div class="sect3"><a id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525" name="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525"></a><h4 id="OLADM-GUID-08832CCD-34C7-44D7-AEE9-3668616E8525" class="sect4"><span class="enumeration_section">6.8.7</span> TRIGGER_AW</h4>
                  <div>
                     <p><a id="d57722e4329" class="indexterm-anchor"></a><a id="d57722e4331" class="indexterm-anchor"></a><a id="d57722e4335" class="indexterm-anchor"></a><a id="d57722e4339" class="indexterm-anchor"></a><a id="d57722e4343" class="indexterm-anchor"></a></p>
                     <p>TRIGGER_AW程序是一个程序，您可以在一个分析工作区中创建该程序，并且当该分析工作区是最新的并且您创建，附加，分离或删除任何其他分析工作区时，Oracle OLAP会按名称检查该程序。</p>
                     <div class="infoboxnote" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-E3BCC969-E5BE-426A-80D3-5CFAE661ABE7">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查此程序和其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-81A579AD-E68C-4F0A-9F51-81896A0815A4">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-51552FAB-2E1E-423D-B5CB-08D8F193DE9C">回报价值</p>
                        <p>没有。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-61F2FEF4-94CF-438E-96AD-E59AB58B70CC">句法</p>
                        <p>要创建名为<code class="codeph">TRIGGER_AW</code>的程序，请遵循<span class="q">“ <a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__CHDHDDIB">如何创建TRIGGER_AW程序</a> ”中</span>提供的指导原则。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-BD434A80-AE8E-4C6C-92F8-42A7C4852CC4">使用说明</p>
                        <p id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__CHDHDDIB">如何创建TRIGGER_AW计划</p>
                        <p>您可以按照以下步骤创建TRIGGER_AW程序：</p>
                        <ol>
                           <li>
                              <p>按照DEFINE PROGRAM中的描述定义程序。</p>
                           </li>
                           <li>
                              <p>将程序命名为TRIGGER_AW。</p>
                           </li>
                           <li>
                              <p>按照<span class="q">“ <a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">指定程序内容</a> ”中的</span>描述对实际程序进行编码。
                              </p>
                              <div class="infoboxnote" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-9DEB12BC-5FFE-43D1-B5DA-761FCE0EF04B">
                                 <p class="notep1">注意：</p>
                                 <p>不支持递归触发器。<span class="italic">在</span> TRIGGER_AW程序中发出AW语句之前，必须将USETRIGGERS选项设置为<code class="codeph">NO</code></p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-672F0212-24F2-4104-AE82-745EAB804287">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-348F5622-182B-4DD6-B40C-A1BE16CCA1AE">
                        <p class="titleinexample">例6-2 TRIGGER_AW程序</p>
                        <p>假设您已在名为<code class="codeph">my_aw</code>的分析工作区中定义了具有以下定义的程序。
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_AW计划程序显示CALLTYPE显示触发器（事件）显示触发器（次要）显示触发器（名称）结束</pre><p>附加<code class="codeph">my_aw</code>工作空间时，将显示指定的值。
                        </p><pre class="oac_no_warn" dir="ltr">AW附着MY_AW TRIGGER AW ATTACH MY_AW</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLADM318"></a><a id="OLADM1439"></a><a id="TRIGGER_BEFORE_UPDATE"></a><div class="sect3"><a id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB" name="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB"></a><h4 id="OLADM-GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB" class="sect4"><span class="enumeration_section">6.8.8</span> TRIGGER_BEFORE_UPDATE</h4>
                  <div>
                     <p><a id="d57722e4459" class="indexterm-anchor"></a><a id="d57722e4461" class="indexterm-anchor"></a><a id="d57722e4465" class="indexterm-anchor"></a><a id="d57722e4469" class="indexterm-anchor"></a><a id="d57722e4473" class="indexterm-anchor"></a><a id="d57722e4477" class="indexterm-anchor"></a><a id="d57722e4481" class="indexterm-anchor"></a> TRIGGER_BEFORE_UPDATE程序是您可以创建的程序，当执行<a href="olap-dml-commands-h-z.html#GUID-96C177F0-933E-42E5-8C70-BDA6EBD398F0">UPDATE</a>命令时，Oracle OLAP会按名称检查。当程序存在于您要更新的同一分析工作区中时，Oracle OLAP会执行该程序，然后根据程序返回的值（如果有），执行或不更新工作区。
                     </p>
                     <div class="infoboxnote" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-F77BBC83-43B5-49B1-B905-835EFBEE78FA">
                        <p class="notep1">注意：</p>
                        <p>必须将<a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a>选项设置为其默认值<code class="codeph">TRUE</code>才能执行TRIGGER_BEFORE_UPDATE程序</p>
                     </div>
                     <div class="infoboxnote" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-7C66C585-5FAF-45F5-83B4-3EB61CB2533A">
                        <p class="notep1">注意：</p>
                        <p><span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-9E110585-BAAC-4DA7-B359-1416D08A8D40">回报价值</p>
                        <p>您可以将程序编写为返回<code class="codeph">BOOLEAN</code>值的函数。在这种情况下，当程序返回FALSE时，Oracle OLAP不会执行触发执行TRIGGER_BEFORE_UPDATE程序的UPDATE语句;当程序返回<code class="codeph">TRUE</code>或<code class="codeph">NA</code> ，执行UPDATE语句。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-4740647E-0804-4A8F-9D43-93921F9317AA">句法</p>
                        <p>要创建名为<code class="codeph">TRIGGER_UPDATE</code>的程序，请遵循<span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发器程序</a> ”中</span>提供的准则。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-D8C06C7E-65F5-44E7-AE81-52A1A0DD4FD4">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__CEGCBCAB">
                        <p class="titleinexample">例6-3 TRIGGER_BEFORE_UPDATE程序</p>
                        <p>假设名为<code class="codeph">myaw</code>的分析工作区具有带有以下定义的TRIGGER_BEFORE_UPDATE程序。
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_BEFORE_UPDATE PROGRAM BOOLEAN PROGRAM SHOW JOINCHARS（'calltype ='CALLTYPE）SHOW JOINCHARS（'triggering event ='TRIGGER（EVENT））SHOW JOINCHARS（'trigger subevent ='TRIGGER（SUBEVENT））RETURN TRUE END</pre><p>假设您定义了名为<code class="codeph">myvar</code>的<code class="codeph">TEXT</code>变量，然后发出UPDATE语句。TRIGGER_BEFORE_UPDSATE程序执行。
                        </p><pre class="oac_no_warn" dir="ltr">calltype = TRIGGER触发事件= BEFORE_UPDATE触发subevent = AW</pre><p>由于程序返回TRUE，因此在分离并重新连接工作空间后， <code class="codeph">myva</code>的定义将存在。
                        </p><pre class="oac_no_warn" dir="ltr">AW DETACH myaw AW ATTACH myaw DESCRIBE DEFINE TRIGGER_BEFORE_UPDATE PROGRAM BOOLEAN PROGRAM SHOW JOINCHARS（'calltype ='CALLTYPE）SHOW JOINCHARS（'triggering event ='TRIGGER（EVENT））SHOW JOINCHARS（'trigger subevent ='TRIGGER（SUBEVENT））RETURN TRUE END定义MYVAR VARIABLE TEXT</pre><p>但是，如果您修改了程序以使其返回<code class="codeph">FALSE</code> ，那么当您分离并重新连接工作空间时，不仅<code class="codeph">myva</code> r定义不在工作空间中，TRIGGER_BEFORE_UPDATE程序的定义也不会在工作空间中。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLADM319"></a><a id="OLADM1440"></a><a id="TRIGGER_DEFINE"></a><div class="sect3"><a id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8" name="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8"></a><h4 id="OLADM-GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8" class="sect4"><span class="enumeration_section">6.8.9</span> TRIGGER_DEFINE</h4>
                  <div>
                     <p><a id="d57722e4599" class="indexterm-anchor"></a><a id="d57722e4601" class="indexterm-anchor"></a><a id="d57722e4605" class="indexterm-anchor"></a><a id="d57722e4609" class="indexterm-anchor"></a><a id="d57722e4613" class="indexterm-anchor"></a><a id="d57722e4617" class="indexterm-anchor"></a><a id="d57722e4621" class="indexterm-anchor"></a> TRIGGER_DEFINE程序是您创建的程序，Oracle OLAP在执行<a href="olap-dml-commands-a-g.html#GUID-569FA3A3-ADF7-488B-9D39-AB8785572C11">DEFINE</a>命令时按名称检查。当程序存在于您定义新对象的同一分析工作空间中时，Oracle OLAP会执行该程序。
                     </p>
                     <div class="infoboxnote" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-95CBCCF6-5420-49E4-96FA-730FB12DF28C">
                        <p class="notep1">注意：</p>
                        <p>必须将<a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a>选项设置为其默认值<code class="codeph">TRUE</code>才能执行TRIGGER_DEFINE程序</p>
                     </div>
                     <div class="infoboxnote" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-5F0484C5-594A-466D-8D74-D334F72302BA">
                        <p class="notep1">注意：</p>
                        <p><span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-2DA6837C-036D-424D-9E59-3D992C32A30A">句法</p>
                        <p>要创建名为<code class="codeph">TRIGGER_DEFINE</code>的程序，请遵循<span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”中</span>提供的准则。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-EA49A5C7-EBB0-4660-8920-B0D574EA9007">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-C10F33A3-A21C-482C-96B0-F73817A4DF36">
                        <p class="titleinexample">例6-4 TRIGGER_DEFINE程序</p>
                        <p>假设您已在分析工作区中编写了带有以下描述的TRIGGER_DEFINE程序。</p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_DEFINE程序程序显示JOINCHARS（'calltype ='CALLTYPE）显示JOINCHARS（'triggering event ='TRIGGER（EVENT））SHOW JOINCHARS（'完全限定对象名='TRIGGER（NAME））SHOW JOINCHARS（'object of object =' OBJ（TYPE TRIGGER（NAME））DESCRIBE＆TRIGGER（NAME）END</pre><p>假设，如以下语句所示，您发出DEFINE VARIABLE语句来定义名为<code class="codeph">myvar</code>的变量。如语句后面的输出所示，Oracle OLAP定义变量并执行TRIGGER_DEFINE程序。
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE myvar VARIABLE TEXT calltype = TRIGGER触发事件= DEFINE完全限定对象名称= MYAW！MYVAR类型的对象= VARIABLE DEFINE MYVAR VARIABLE TEXT</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
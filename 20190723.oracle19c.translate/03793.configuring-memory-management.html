<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can use Automatic Data Optimization (ADO) and Automatic In-Memory to manage objects in the IM column store dynamically."></meta>
      <meta name="description" content="You can use Automatic Data Optimization (ADO) and Automatic In-Memory to manage objects in the IM column store dynamically."></meta>
      <title>自动管理内存中的对象</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database In-Memory Guide"></meta>
      <meta property="og:description" content="You can use Automatic Data Optimization (ADO) and Automatic In-Memory to manage objects in the IM column store dynamically."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database In-Memory Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00"></meta>
      <meta name="dcterms.title" content="Database In-Memory Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96137-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="populating-the-imcs-manually.html" title="Previous" type="text/html"></link>
      <link rel="next" href="advanced-optimizations-for-in-memory-queries.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="populating-the-imcs-manually.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="advanced-optimizations-for-in-memory-queries.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库内存指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-the-im-column-store.html" property="item" typeof="WebPage"><span property="name">配置和填充IM列存储</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">自动管理内存中的对象</li>
            </ol>
            <a id="GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1" name="GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1"></a>
            
            <h2 id="INMEM-GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1" class="sect2"><span class="enumeration_chapter">6</span>自动管理内存中对象</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用自动数据优化（ADO）和<span>自动内存</span>来动态管理IM列存储中的对象。
               </p>
               <p>ADO使用<a href="glossary.html#GUID-4FEDBC6E-5B87-452A-9759-84351F542D91"><span class="xrefglossterm">热图</span></a> ，它跟踪块和段的数据访问模式。ADO和热图是<a href="glossary.html#GUID-B5B1D073-F6AB-4021-9103-B26E269AEBA4"><span class="xrefglossterm">信息生命周期管理（ILM）的一部分</span></a> ，它是一组用于管理从创建到归档或删除的数据的流程和策略。本章假定您熟悉ILM，ADO和热图。
               </p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068">为IM列存储启用ADO</a><br><strong class="term">自动数据优化（ADO）</strong>可根据这些策略创建策略并自动执行操作，以实施ILM策略。
                  </li>
                  <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C">配置自动内存</a><br><span><span>自动内存</span>使用访问跟踪，列统计信息和其他相关统计信息来管理IM列存储中的对象。</span></li>
               </ul>
               <div class="infoboxnotealso" id="GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1__GUID-B5263558-08BC-49D3-8408-514416B29667">
                  <p class="notep1">也可以看看：</p>
                  <p>有关ILM，ADO和热图的背景知识的<a href="../vldbg/ilm-strategy-heatmap-ado.html#GUID-59C132D6-D36B-4B5E-B0CA-948C1B0E6836" target="_blank"><span><cite>Oracle数据库VLDB和分区指南</cite></span></a></p>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="configuring-the-im-column-store.html#GUID-8844C889-E381-4B77-8A51-7AA6462B14D7" title="您可以启用内存列存储（IM列存储）并调整其大小。您还可以为对象配置内存设置，并在IM列存储中填充这些对象。">配置和填充IM列存储</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" name="GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068"></a><h3 id="INMEM-GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" class="sect3"><span class="enumeration_section">6.1</span>为IM列存储启用ADO</h3>
               <div>
                  <p><strong class="term">自动数据优化（ADO）</strong>可根据这些策略创建策略并自动执行操作，以实施ILM策略。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-8228EE59-831D-44CB-AF22-3C2D8EBD6E27">关于ADO策略和IM列存储</a><br>ADO通过<strong class="term">ADO策略</strong>管理IM列存储。您只能在段级别创建带有<code class="codeph">INMEMORY</code>子句的ADO策略。
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3">ADO和IM列存储的目的</a><br>ADO将IM列存储作为新数据层进行管理。
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C">ADO如何使用柱状数据</a><br>从ADO角度来看，IM列存储是另一个存储层。
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE">ADO和IM列存储的控件</a><br>使用<code class="codeph">HEAT_MAP</code>初始化参数启用热图。通过SQL和PL / SQL接口控制ADO。
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43">为IM列存储创建ADO策略</a><br>您可以使用ADO策略根据热图统计信息为对象设置，修改或删除<code class="codeph">INMEMORY</code>子句。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1" title="您可以使用自动数据优化（ADO）和自动内存来动态管理IM列存储中的对象。">自动管理内存中对象</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-8228EE59-831D-44CB-AF22-3C2D8EBD6E27" name="GUID-8228EE59-831D-44CB-AF22-3C2D8EBD6E27"></a><h4 id="INMEM-GUID-8228EE59-831D-44CB-AF22-3C2D8EBD6E27" class="sect4"><span class="enumeration_section">6.1.1</span>关于ADO策略和IM列存储</h4>
                  <div>
                     <p>ADO通过<strong class="term">ADO策略</strong>管理IM列存储。您只能在段级别创建带有<code class="codeph">INMEMORY</code>子句的ADO策略。
                     </p>
                     <p>数据库将ADO策略视为对象的属性。ADO策略位于数据库级别，而不是实例级别。Oracle数据库支持以下类型的Database In-Memory ADO策略：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">INMEMORY</code>政策</p>
                           <p>此策略使用<code class="codeph">INMEMORY</code>属性标记对象，使其可用于IM列存储中的填充。在表级别设置时， <code class="codeph">INMEMORY</code>属性仅适用于内部分区;因此，混合分区表的外部分区不受策略管理。
                           </p>
                        </li>
                        <li>
                           <p>重新压缩政策</p>
                           <p>此策略更改<code class="codeph">INMEMORY</code>对象的压缩级别。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">NO INMEMORY</code>政策</p>
                           <p>此策略从IM列存储中删除对象并删除其<code class="codeph">INMEMORY</code>属性。
                           </p>
                        </li>
                     </ul>
                     <p>Oracle数据库支持以下标准以确定何时应用策略：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>自修改对象以来的指定天数</p>
                           <p>从<code class="codeph">DBA_HEAT_MAP_SEGMENT</code>视图中的<code class="codeph">SEGMENT_WRITE_TIME</code>列中获取此值。
                           </p>
                        </li>
                        <li>
                           <p>访问对象后指定的天数</p>
                           <p>此值是<code class="codeph">DBA_HEAT_MAP_SEGMENT</code>视图中<code class="codeph">SEGMENT_WRITE_TIME</code> ， <code class="codeph">FULL_SCAN</code>和<code class="codeph">LOOKUP_SCAN</code>列中的较大值。
                           </p>
                        </li>
                        <li>
                           <p>自创建对象以来的指定天数</p>
                           <p>从<code class="codeph">DBA_OBJECTS</code>的<code class="codeph">CREATED</code>列获取此值。</p>
                        </li>
                        <li>
                           <p>用户定义的函数返回一个布尔值</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8228EE59-831D-44CB-AF22-3C2D8EBD6E27__GUID-944F6AEA-1384-4B41-AA08-89E6E1638579">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../refrn/DBA_HEAT_MAP_SEGMENT.html#GUID-F580902E-B58B-4F37-9FA3-531BAC8A2B18" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">DBA_HEAT_MAP_SEGMENT</code>视图</p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span><cite>Oracle Database SQL语言参考</cite></span></a> ，了解<code class="codeph">INMEMORY</code>子句</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="自动数据优化（ADO）可根据这些策略创建策略并自动执行操作，以实施ILM策略。">为IM列存储启用ADO</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3" name="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3"></a><h4 id="INMEM-GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3" class="sect4"><span class="enumeration_section">6.1.2</span> ADO和IM列存储的目的</h4>
                  <div>
                     <p>ADO将IM列存储作为新数据层进行管理。</p>
                     <p>您可以创建策略，以便在不经常访问IM列存储时从其中逐出对象，并在更频繁地访问对象时填充对象，从而提高查询性能。ADO使用热图统计信息管理IM列存储。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3__GUID-BE99B517-8E2F-4880-8F2F-0F19A302839C">INMEMORY政策的目的</p>
                        <p>在许多数据库中，片段在创建后经过大量修改。为了最大限度地提高性能，当写入活动平息时，ADO可以在IM列存储中填充这些段。例如，如果您每天向表中添加一个分区，那么您可以创建一个策略，在创建后一天填充<code class="codeph">sales_2016_d100</code>分区：</p><pre class="pre codeblock"><code>ALTER TABLE销售修改分区sales_2016_d100 ILM添加政策设置INMEMORY MEMCOMPRESS在创作1天后获得高优先级</code></pre><p>类似地，您可能知道创建后两个月表上的写入活动会消退，并且希望在满足此时间条件时填充此对象：</p><pre class="pre codeblock"><code>更新表2016_ski_sales ILM添加政策设定内容存储为创作60天后的关键优先级</code></pre><p>上述策略会导致<code class="codeph">2016_ski_sales</code>表的所有现有分区和新分区继承该策略。当段符合策略条件时，数据库会使用指定的<code class="codeph">INMEMORY</code>子句独立标记每个分区。如果该段已具有<code class="codeph">INMEMORY</code>策略，则数据库将忽略新策略。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3__GUID-5D9D2AED-4C8C-4148-B3FC-EBC7FA18CCDA">重新压缩政策的目的</p>
                        <p>您可能希望根据访问模式压缩IM列存储中的数据。例如，您可能希望在段上的DML活动停止后2天将段从DML压缩更改为查询压缩：</p><pre class="pre codeblock"><code>ALTER TABLE lineorders ILM ADD POLICY MODIFY INMEMORY MEMCOMPRESS在2天没有修改的情况下获得高价</code></pre><p>如果未在IM列存储中填充对象，则此策略仅更改压缩属性。如果在IM列存储中填充对象，则ADO使用新的压缩级别重新填充对象。如果段尚未具有<code class="codeph">INMEMORY</code>属性，则数据库将忽略该策略。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3__GUID-63E1836B-7F10-4503-BB77-081BD598AB81">没有INMEMORY政策的目的</p>
                        <p>要优化IM列存储中的空间，您可能希望使用<code class="codeph">NO INMEMORY</code>策略驱逐非活动段。此策略还可用于通过不频繁的查询来防止非活动段的填充。例如，如果特定销售分区的报告在一年中频繁运行，但通常不是每周运行，那么您可能希望在一周无法访问后逐出该分区：</p><pre class="pre codeblock"><code>ALTER TABLE销售修改分区sales_2015_q1 ILM添加政策7天后无法访问;</code></pre><p>如果很少查询1998年的销售表，那么您可能希望在1天无法访问后逐出：</p><pre class="pre codeblock"><code>ALTER TABLE sales_1998 ILM添加政策在没有访问的1天之后没有任何内容;</code></pre><p>永远不会阻止被驱逐段的查询。数据库总是可以通过传统的缓冲区缓存机制访问数据。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3__GUID-397A752E-0834-4462-B5A0-FD22466F9589">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="in-memory-column-store-architecture.html#GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6" title="无论是启用还是禁用IM列存储，数据库缓冲区高速缓存都以相同的方式存储和处理数据块。缓冲区I / O和缓冲池的功能相同。">数据库缓冲区高速缓存中的行数据</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../vldbg/manage-data-db-ilm.html#GUID-AC2B567F-14EF-4E7A-9992-076A2A820305" target="_blank"><span><cite>Oracle数据库VLDB和分区指南</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="自动数据优化（ADO）可根据这些策略创建策略并自动执行操作，以实施ILM策略。">为IM列存储启用ADO</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C" name="GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C"></a><h4 id="INMEM-GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C" class="sect4"><span class="enumeration_section">6.1.3</span> ADO如何使用列式数据</h4>
                  <div>
                     <p>从ADO角度来看，IM列存储是另一个存储层。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-DE6B25DF-0041-434B-B755-D9A9739EA0D8">热图如何运作</a><br>启用后，热图会自动发现数据访问模式。ADO使用热图数据在数据库级别实现用户定义的策略。
                        </li>
                        <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-31B56CFD-81D1-45F7-AC96-FE38BCAD2B0D">政策评估的工作原理</a><br>IM列存储策略的策略评估使用与评估其他ADO策略相同的基础结构。数据库在维护窗口期间自动评估和执行策略。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="自动数据优化（ADO）可根据这些策略创建策略并自动执行操作，以实施ILM策略。">为IM列存储启用ADO</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-DE6B25DF-0041-434B-B755-D9A9739EA0D8" name="GUID-DE6B25DF-0041-434B-B755-D9A9739EA0D8"></a><h5 id="INMEM-GUID-DE6B25DF-0041-434B-B755-D9A9739EA0D8" class="sect5"><span class="enumeration_section">6.1.3.1</span>热图的工作<span class="enumeration_section">原理</span></h5>
                     <div>
                        <p>启用后，热图会自动发现数据访问模式。ADO使用热图数据在数据库级别实现用户定义的策略。</p>
                        <p>热图自动跟踪行和段级别的使用信息。在行级别，热图跟踪数据修改时间，然后将这些时间聚合到块级别。在段级别，热图跟踪修改，全表扫描和索引查找的时间。</p>
                        <p>启用IM列存储时，热图会跟踪列数据的访问模式。例如， <code class="codeph">sales</code>表可能是“热门”，而<code class="codeph">locations</code>表可能是“冷”。ADO算法对于柱状数据和基于行的数据的工作方式相同。
                        </p>
                        <p>数据库定期将热图数据写入数据字典。数据库在数据字典视图中公开热图数据。例如，要获取In-Memory对象的读取和写入时间，请查询<code class="codeph">ALL_HEAT_MAP_SEGMENT</code>视图。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-DE6B25DF-0041-434B-B755-D9A9739EA0D8__GUID-E191252E-4985-42C2-8FCE-011F3A1B0527">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../vldbg/ilm-strategy-heatmap-ado.html#GUID-FB83C140-B7E7-4EF8-959A-A990ECE20369" target="_blank"><span><cite>Oracle Database VLDB和分区指南</cite></span></a>了解有关热图的更多信息</p>
                              </li>
                              <li>
                                 <p><a href="../refrn/ALL_HEAT_MAP_SEGMENT.html#GUID-4DB68EA8-3F71-4A62-AA97-96F89522CC26" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">ALL_HEAT_MAP_SEGMENT</code>视图</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C" title="从ADO角度来看，IM列存储是另一个存储层。">ADO如何与列数据一起使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-31B56CFD-81D1-45F7-AC96-FE38BCAD2B0D" name="GUID-31B56CFD-81D1-45F7-AC96-FE38BCAD2B0D"></a><h5 id="INMEM-GUID-31B56CFD-81D1-45F7-AC96-FE38BCAD2B0D" class="sect5"><span class="enumeration_section">6.1.3.2</span>政策评估的工作<span class="enumeration_section">原理</span></h5>
                     <div>
                        <p>IM列存储策略的策略评估使用与评估其他ADO策略相同的基础结构。数据库在维护窗口期间自动评估和执行策略。</p>
                        <p>数据库使用热图统计信息评估策略，热量统计信息存储在数据字典中。设置<code class="codeph">INMEMORY</code>属性主要是元数据操作，因此对性能的影响最小。
                        </p>
                        <p>ADO使用Job Scheduler来执行填充。内存协调器进程（IMCO）执行填充。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="in-memory-column-store-architecture.html#GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E" title="内存中协调器进程（IMCO）管理IM列存储的许多任务。其主要任务是启动背景人口和重新填充柱状数据。">内存协调器进程（IMCO）</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C" title="从ADO角度来看，IM列存储是另一个存储层。">ADO如何与列数据一起使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE" name="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE"></a><h4 id="INMEM-GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE" class="sect4"><span class="enumeration_section">6.1.4</span> ADO和IM列存储的控制</h4>
                  <div>
                     <p>使用<code class="codeph">HEAT_MAP</code>初始化参数启用热图。通过SQL和PL / SQL接口控制ADO。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-F2ADE4AC-D97C-4854-93F1-CBABD243160F">DDL声明中的ILM条款</p>
                        <p>创建内存中策略不需要新的SQL语句，但ILM子句有新选项。下表描述了ADO和IM列存储的SQL选项。</p>
                        <div class="infoboxnote" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-4D58202C-4BFF-4DD5-BA49-4BE3DABB46A8">
                           <p class="notep1">注意：</p><code class="codeph">INMEMORY</code>属性仅适用于混合分区表的内部分区。
                        </div>
                        <div class="tblformal" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__INITIALIZATIONPARAMETERSFORADOANDTH-07F12A50">
                           <p class="titleintable">表6-1 ADO的ILM子句和IM列存储</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="适用于ADO的ILM条款和IM列存储" border="1" summary="Describes DDL options relevant for ADO. The column 1 heading is “Clause.” The column 2 heading is “Description.” The column 3 heading is “Examples.”" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d18748e1246">条款</th>
                                    <th align="left" valign="bottom" width="20%" id="d18748e1248">描述</th>
                                    <th align="left" valign="bottom" width="20%" id="d18748e1250">例子</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1254" headers="d18748e1246 "><code class="codeph">设置INMEMORY</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1254 d18748e1248 ">设置对象的<code class="codeph">INMEMORY</code>属性</td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1254 d18748e1250 "><pre class="pre codeblock"><code>ALTER TABLE sh.sales ILM ADD POLICY SET INMEMORY MEMCOMPRESS创建30天以后的低优先级高分段;</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1266" headers="d18748e1246 "><code class="codeph">修改内容</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1266 d18748e1248 ">修改对象的压缩级别</td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1266 d18748e1250 "><pre class="pre codeblock"><code>ALTER TABLE sh.customers ILM ADD政策修改内容，在创作30天后获得高度优先的重要部分;</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1275" headers="d18748e1246 "><code class="codeph">没有内容</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1275 d18748e1248 ">设置对象的<code class="codeph">NO INMEMORY</code>属性</td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1275 d18748e1250 "><pre class="pre codeblock"><code>ALTER TABLE sh.products ILM ADD政策在创作30天后没有内存部分;</code></pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-94CF39CD-21EF-4D27-86CF-D64AD9370748">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../sqlrf/CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__ILM_INMEMORY_POLICY-43AD0556" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">CREATE TABLE</code>的<span class="italic">ilm_policy_clause</span>的更多信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-35AB810A-7B57-4F22-868C-F0AB4E6A6F7F">初始化参数</p>
                        <p>下表描述了与ADO和IM列存储相关的初始化参数。</p>
                        <div class="tblformal" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-AB0D7B0A-4B3B-4364-A8C0-3FB372B301E0">
                           <p class="titleintable">表6-2 ADO和IM列存储的初始化参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ADO和IM列存储的初始化参数" border="1" summary="Describes initialization parameters relevant for ADO. The column 1 heading is “Initialization Parameter.” The column 2 heading is “Description.”" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d18748e1314">初始化参数</th>
                                    <th align="left" valign="bottom" width="20%" id="d18748e1316">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1320" headers="d18748e1314 "><code class="codeph">兼容</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1320 d18748e1316 ">指定数据库必须与之保持兼容性的版本。要使ADO管理IM列存储，请将此参数设置为<code class="codeph">12.2.0</code>或更高版本。
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1329" headers="d18748e1314 "><code class="codeph">HEAT_MAP</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1329 d18748e1316 ">启用热图和ADO功能。要使ADO管理IM列存储，请将此参数设置为<code class="codeph">ON</code> 。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1338" headers="d18748e1314 "><code class="codeph">INMEMORY_SIZE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1338 d18748e1316 ">启用IM列存储。必须将此参数设置为非零值。</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-6132D292-8FD9-4AF5-984D-24A5CBA2090F">PL / SQL包</p>
                        <p>下表描述了与ADO和IM列存储相关的PL / SQL包。</p>
                        <div class="tblformal" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-A85A22FC-3855-492B-B9D9-79C01F0B8BDF">
                           <p class="titleintable">表6-3 ADO和IM列存储的PL / SQL包</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ADO和IM列存储的PL / SQL包" border="1" summary="Describes packages relevant for ADO. The column 1 heading is “Package.” The column 2 heading is “Description.”" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d18748e1358">包</th>
                                    <th align="left" valign="bottom" width="20%" id="d18748e1360">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1364" headers="d18748e1358 "><code class="codeph">DBMS_HEAT_MAP</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1364 d18748e1360 ">在表空间，段，对象，范围和块级别显示详细的热图数据。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1370" headers="d18748e1358 "><code class="codeph">DBMS_ILM</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1370 d18748e1360 ">使用ADO策略实施ILM策略。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1376" headers="d18748e1358 "><code class="codeph">DBMS_ILM_ADMIN</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1376 d18748e1360 ">自定义ADO策略执行。</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-C8CE2D0E-8C55-4D73-8083-E3A854F171B2">
                           <p class="notep1">也可以看看：</p>
                           <p><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span>以了解有关<a href="../arpls/DBMS_HEAT_MAP.html#ARPLS-GUID-1EC43785-1279-4EAF-8370-9FA1027886D8" target="_blank"><code class="codeph">DBMS_HEAT_MAP</code></a> ， <a href="../arpls/DBMS_ILM.html#ARPLS-GUID-C4E7D45F-82DA-45AF-A652-FC9481A2C20F" target="_blank"><code class="codeph">DBMS_ILM</code></a>和<a href="../arpls/DBMS_ILM_ADMIN.html#ARPLS-GUID-D1E74EDA-DCEA-4A38-8167-E9B210610064" target="_blank"><code class="codeph">DBMS_ILM_ADMIN</code></a>包的更多信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-2E5C51E4-E351-4525-8E84-A56CB5D8AC25">V $和数据字典视图</p>
                        <p>下表描述了与ADO和IM列存储相关的视图。</p>
                        <div class="tblformal" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-7261933F-8ECF-49F0-9089-372BA553777B">
                           <p class="titleintable">表6-4 ADO和IM列存储的视图</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ADO和IM列存储的视图" border="1" summary="Describes views relevant for ADO. The column 1 heading is “View.” The column 2 heading is “Description.”" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d18748e1417">视图</th>
                                    <th align="left" valign="bottom" width="20%" id="d18748e1419">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1423" headers="d18748e1417 "><code class="codeph">DBA_HEAT_MAP_SEG_HISTOGRAM</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1423 d18748e1419 ">显示用户可见的所有段的段访问信息。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1429" headers="d18748e1417 "><code class="codeph">DBA_HEAT_MAP_SEGMENT</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1429 d18748e1419 ">显示用户可见的所有段的最新段访问时间。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1435" headers="d18748e1417 "><code class="codeph">DBA_HEATMAP_TOP_OBJECTS</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1435 d18748e1419 ">默认情况下显示前10000个对象的热图信息。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1441" headers="d18748e1417 "><code class="codeph">DBA_HEATMAP_TOP_TABLESPACES</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1441 d18748e1419 ">显示前10000个表空间的热图信息。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1447" headers="d18748e1417 "><code class="codeph">DBA_ILMDATAMOVEMENTPOLICIES</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1447 d18748e1419 ">显示特定于数据库中ADO策略的数据移动相关属性的信息。<code class="codeph">action_type</code>列描述与IM列存储相关的策略。可能的值为<code class="codeph">COMPRESSION</code> ， <code class="codeph">STORAGE</code> ， <code class="codeph">EVICT</code>和<code class="codeph">ANNOTATE</code> 。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1468" headers="d18748e1417 "><code class="codeph">V $ HEAT_MAP_SEGMENT</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1468 d18748e1419 ">显示实时段访问信息。</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-0EB79DA0-2338-4402-9916-05071D45B3B2">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关视图的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="自动数据优化（ADO）可根据这些策略创建策略并自动执行操作，以实施ILM策略。">为IM列存储启用ADO</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43" name="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43"></a><h4 id="INMEM-GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43" class="sect4"><span class="enumeration_section">6.1.5</span>为IM列存储创建ADO策略</h4>
                  <div>
                     <p>您可以使用ADO策略根据热图统计信息为对象设置，修改或删除<code class="codeph">INMEMORY</code>子句。
                     </p>
                     <div class="section">要创建ADO IM列存储策略，请在<code class="codeph">ALTER TABLE</code>语句中指定<code class="codeph">ILM ADD POLICY</code>子句，然后指定以下子句之一：<ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">SET INMEMORY ......分割</code></p>
                              <p>当您只想在DML活动平息时使用<code class="codeph">INMEMORY</code>属性标记段时，此选项很有用。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">修改INMEMORY ......MEMCOMPRESS ......分割</code></p>
                              <p>在频繁修改时，存储未压缩的数据或<code class="codeph">MEMCOMPRESS FOR DML</code>级别的数据是合适的。替代压缩级别更适合查询。如果段上的活动从大多数写入转换为大多数读取，则可以使用<code class="codeph">MODIFY</code>子句应用不同的压缩方法。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">没有内容......分割</code></p>
                              <p>当对段的访问随时间减少（变为“冷”）时，此选项很有用，并且可防止由于随机访问而导致该段的填充。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43__GUID-4001562A-07EE-4552-87DC-3C79B8B275BA">先决条件</p>
                        <p>在使用ADO IM列存储策略之前，必须满足以下先决条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过将<code class="codeph">INMEMORY_SIZE</code>初始化参数设置为非零值并重新启动数据库，为数据库启用IM列存储。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">HEAT_MAP</code>初始化参数必须设置为<code class="codeph">ON</code> 。</p>
                              <p>热图提供了段级别的数据访问跟踪和段级别和行级别的数据修改跟踪。</p>
                           </li>
                           <li>
                              <p><code class="codeph">COMPATIBLE</code>初始化参数必须设置为<code class="codeph">12.2.0</code>或更高。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43__GUID-F93B2BEF-4724-4FD7-B529-574E8384A600">要创建ADO策略：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus或SQL Developer中，以具有必要权限的用户身份登录数据库。</p>
                           </li>
                           <li>
                              <p>使用带有<code class="codeph">ILM ADD POLICY ...的<code class="codeph">ALTER TABLE</code>语句<code class="codeph">ILM ADD POLICY ...INMEMORY</code>条款。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43__GUID-EC32411C-D52D-4DB3-A187-8063D4390EC3">
                        <p class="titleinexample">示例6-1创建驱逐策略</p>
                        <p>在此示例中，您将创建一个策略，指定<code class="codeph">oe.order_items</code>表在三天内未被访问时从IM列存储中逐出。ADO IM列存储策略必须是段级策略。
                        </p><pre class="pre codeblock"><code>更改表oe.order_items ILM添加政策在3天无法访问后没有内容;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43__GUID-B2F2BC6A-90EA-4C93-A600-18B76C694EAA">
                        <p class="titleinexample">示例6-2使用DBMS_ILM执行ILM策略</p>
                        <p>您还可以手动评估和执行策略。因此，您可以通过编程方式确定何时需要压缩或分层对象。以下示例为<code class="codeph">sh.sales</code>手动执行ADO任务：</p><pre class="pre codeblock"><code>DECLARE v_executonid NUMBER; BEGIN DBMS_ILM.EXECUTE_ILM（owner =&gt;'SH'，object_name =&gt;'SALES'，execution_mode =&gt; DBMS_ILM.ILM_EXECUTION_OFFLINE，task_id =&gt; v_executionid）;结束; /</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43__GUID-3D50F8EF-9837-44DF-9BB7-5970BC3F12E9">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>用于<code class="codeph">CREATE TABLE</code>语法和语义的<a href="../sqlrf/CREATE-TABLE.html#SQLRF-GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_ILM.html#ARPLS-GUID-C4E7D45F-82DA-45AF-A652-FC9481A2C20F" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_ILM</code>包的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="自动数据优化（ADO）可根据这些策略创建策略并自动执行操作，以实施ILM策略。">为IM列存储启用ADO</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" name="GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C"></a><h3 id="INMEM-GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" class="sect3"><span class="enumeration_section">6.2</span>配置<span>自动内存</span></h3>
               <div>
                  <p><span><span>自动内存</span>使用访问跟踪，列统计信息和其他相关统计信息来管理IM列存储中的对象。</span></p>
                  <p><span>如果IM列存储已满，并且其他更频繁访问的段将受益于IM列存储中的填充，则IM列存储将驱逐非活动段。但是，如果IM列存储配置为保存所有<code class="codeph">INMEMORY</code>段，则<span>自动内存</span>不会执行任何操作。</span></p>
                  <p>本章包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-4FBE20C4-5524-45C1-8E71-C679B8B760F5">自动内存的目的</a><br>为确保始终填充工作数据集， <span>Automatic In-Memory会</span>自动驱逐冷（不经常访问）的段。
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-D06C8FD9-7872-4B97-B22C-19CC07BB566A">自动内存如何工作</a><br>数据驱逐单位是<code class="codeph">INMEMORY</code>段。
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47">自动内存的用户界面</a><br>使用初始化参数<span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>启用和禁用<span>自动内存</span> 。</li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59">控制自动内存</a><br>使用<span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>初始化参数来控制<span>自动内存中</span> 。
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B">设置自动内存中的时间间隔</a><br>使用<code class="codeph">DBMS_INMEMORY</code>包设置<span>Automatic In-Memory</span>检查的使用情况统计信息的时间间隔。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1" title="您可以使用自动数据优化（ADO）和自动内存来动态管理IM列存储中的对象。">自动管理内存中对象</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-4FBE20C4-5524-45C1-8E71-C679B8B760F5" name="GUID-4FBE20C4-5524-45C1-8E71-C679B8B760F5"></a><h4 id="INMEM-GUID-4FBE20C4-5524-45C1-8E71-C679B8B760F5" class="sect4"><span class="enumeration_section">6.2.1</span> <span>自动内存中的</span>目的</h4>
                  <div>
                     <p>为确保始终填充工作数据集， <span>Automatic In-Memory会</span>自动驱逐冷（不经常访问）的段。
                     </p>
                     <p>IM列存储仅删除填充的段（如果它被删除或移动）， <code class="codeph">INMEMORY</code>选项被删除，或者IM ADO策略对其进行操作。当<code class="codeph">INMEMORY</code>数据集的大小超过IM列存储的可用内存时，会发生内存压力，并且某些已填充的段将变为非活动状态。为获得最佳性能，IM列存储应包含最常查询的段，称为<a href="glossary.html#GUID-8BF7008F-20DE-422A-8513-5331BB0530D9"><span class="xrefglossterm">工作数据集</span></a> 。
                     </p>
                     <p>通常，工作数据集随许多应用程序的时间而变化。因此，优化需要DBA的定期监视和手动干预，以逐出IM存储元素或创建ADO IM策略。这两项任务都需要充分了解工作量。</p>
                     <p>通过自动驱逐冷段， <span>Automatic In-Memory</span>具有以下优点：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>改善了性能</p>
                           <p>通过逐出冷段来减轻内存压力， <span>自动内存</span>可以提高工作负载的性能，因为工作数据集驻留在IM列存储中。
                           </p>
                        </li>
                        <li>
                           <p>易于管理</p>
                           <p>通过驱逐冷段来管理IM列存储器以减轻存储器压力涉及显着的用户干预。<span>自动内存</span>通过最少的用户干预解决了这些问题。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" title="自动内存使用访问跟踪，列统计信息和其他相关统计信息来管理IM列存储中的对象。">配置自动内存中</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-D06C8FD9-7872-4B97-B22C-19CC07BB566A" name="GUID-D06C8FD9-7872-4B97-B22C-19CC07BB566A"></a><h4 id="INMEM-GUID-D06C8FD9-7872-4B97-B22C-19CC07BB566A" class="sect4"><span class="enumeration_section">6.2.2</span> <span>自动内存</span>工作原理</h4>
                  <div>
                     <p>数据驱逐单位是<code class="codeph">INMEMORY</code>段。
                     </p>
                     <p><code class="codeph">INMEMORY</code>段仅在其优先级为<code class="codeph">NONE</code>时才有资格被驱逐。基本流程如下：</p>
                     <ol>
                        <li>
                           <p>填充作业失败，这意味着IM列存储空间已用尽。</p>
                        </li>
                        <li>
                           <p>数据库使用符合条件的填充段的内部统计信息来定义要驱逐的对象集。统计数据类似于热图所使用的统计数据，但不需要启用热图。</p>
                        </li>
                        <li>
                           <p>对于集合中的每个段，数据库会检查是否为该段启用了ADO策略：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果启用的策略要求保留该段，则ADO策略将覆盖<span>自动内存中</span> 。数据库什么都不做。
                                 </p>
                              </li>
                              <li>
                                 <p>如果没有策略阻止驱逐，则<span>自动内存中</span>提交任务以驱逐段。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>W <span class="italic">nnn</span>进程会驱逐通过上述检查的任何段，从而释放IM列存储中的空间。
                           </p>
                           <p>对于被驱逐的段，保留<code class="codeph">INMEMORY</code>属性。
                           </p>
                        </li>
                     </ol>
                     <p>例如，每晚批处理作业加载<code class="codeph">sales</code>分区（优先级为<code class="codeph">NONE</code> ），然后查询分区以触发填充。由于IM列存储几乎处于其最大容量，因此仅填充分区的一半行。无法完全填充新分区会触发<span>自动内存</span> ，从而驱逐冷段。新分区的后续按需填充作业将完全填充新的<code class="codeph">sales</code>分区。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D06C8FD9-7872-4B97-B22C-19CC07BB566A__GUID-64E6E1B9-B6B0-4618-A715-4DF159941180">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="in-memory-column-store-architecture.html#GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3" title="空间管理工作者流程（Wnnn）代表IMCO填充或重新填充数据。">空间管理工作者流程（Wnnn）</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" title="自动内存使用访问跟踪，列统计信息和其他相关统计信息来管理IM列存储中的对象。">配置自动内存中</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47" name="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47"></a><h4 id="INMEM-GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47" class="sect4"><span class="enumeration_section">6.2.3</span> <span>自动内存中的</span>用户界面</h4>
                  <div>
                     <p>使用初始化参数<span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>启用和禁用<span>自动内存</span> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-B90179E0-3071-42EF-8B39-09CB7451FAE8">初始化参数</p>
                        <p>系统级初始化参数<span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>具有以下可能值：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OFF</code> （默认）</p>
                              <p>此选项禁用<span>自动内存中</span> ，将IM列存储返回到其<span>Oracle Database 12c</span>第2版（12.2.0.1）行为。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">低</code></p>
                              <p>在内存压力下，数据库会从IM列存储中驱逐冷段。</p>
                           </li>
                           <li>
                              <p><code class="codeph">介质</code></p>
                              <p>此级别包括一个额外的优化，可确保首先填充因内存压力而未填充的任何热段。</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-4B9E84BD-95B3-47C5-8C04-53F32C3BD1E4">
                           <p class="notep1">注意：</p>
                           <p><span>自动内存</span>不需要启用<code class="codeph">HEAT_MAP</code>初始化参数。
                           </p>
                        </div>
                        <p>Oracle建议您为工作数据集配置足够的内存以适应IM列存储。作为调整额外的<span>自动内存中</span>共享池要求的经验法则，将5 KB乘以SGA内存的<code class="codeph">INMEMORY</code>段数。例如，如果10,000个段具有<code class="codeph">INMEMORY</code>属性，则为<span>自动内存中</span>保留50 MB的共享池。
                        </p>
                        <div class="infoboxnotealso" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-18393CFB-A158-40D1-BB0F-0AE7F3744539">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../refrn/INMEMORY_AUTOMATIC_LEVEL.html#REFRN-GUID-707EC2D3-4824-494A-96B3-FBE9F6FD4B89" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>更多信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-E662E2F9-616C-40A6-8CF0-6E19C49620AB">DBMS_INMEMORY_ADMIN</p>
                        <p>使用<code class="codeph">DBMS_INMEMORY_ADMIN</code>包来控制<span>Automatic In-Memory</span>考虑统计信息的时间窗口。例如，您可以指定<span>Automatic In-Memory</span>仅考虑过去一个月或过去一周。
                        </p>
                        <p>使用<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code>过程设置<code class="codeph">AIM_STATWINDOW_DAYS</code>常量。例如，要将滑动统计窗口设置为7天，请执行以下程序：</p><pre class="pre codeblock"><code>EXEC DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER（DBMS_INMEMORY_ADMIN.AIM_STATWINDOW_DAYS，7）;</code></pre><p><code class="codeph">AIM_STATWINDOW_DAYS</code>的默认值为<code class="codeph">31</code>天。
                        </p>
                        <p>相应<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER</code>过程获得当前设定<code class="codeph">AIM_STATWINDOW_DAYS</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-B36627CB-3356-4F2D-B810-A14298EDD2AF">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_INMEMORY.html#ARPLS-GUID-74D95DFA-BB53-4B51-BECD-0D5310C95671" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code>和<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER</code>更多信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-7C4118D1-1E95-4721-8423-95B5A88CAC5D">V $ VIEWS</p>
                        <p><code class="codeph">V$IM_ADOTASKS</code>和<code class="codeph">DBA_INMEMORY_AIMTASKS</code>视图使您可以跟踪<span>自动内存中</span>任务所做的决策。<code class="codeph">V$IM_ADOTASKDETAILS</code>和<code class="codeph">DBA_INMEMORY_AIMTASKDETAILS</code>视图描述了与任务相关的详细信息。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-41F2754C-CC7D-4365-B50E-1D09C1F46621">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../refrn/dynamic-performance-v-views-2.html#GUID-B200B2D6-08D4-49B0-9FD9-8AF6AED37202" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">V$IM_ADOTASKS</code>更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" title="自动内存使用访问跟踪，列统计信息和其他相关统计信息来管理IM列存储中的对象。">配置自动内存中</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59" name="GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59"></a><h4 id="INMEM-GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59" class="sect4"><span class="enumeration_section">6.2.4</span>控制<span>自动内存</span></h4>
                  <div>
                     <p>使用<span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>初始化参数来控制<span>自动内存中</span> 。
                     </p>
                     <div class="section">
                        <p>默认情况下， <span>Automatic In-Memory</span>设置为<code class="codeph">OFF</code> 。通过将<span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>设置为<code class="codeph">MEDIUM</code>或<code class="codeph">LOW</code>来启用它。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59__GUID-BB17CC5E-74D2-4765-8037-B3266A92F9F7">先决条件</p>
                        <p>要使用<code class="codeph">ALTER SYSTEM</code>设置此参数，您必须具有<code class="codeph">ALTER SYSTEM</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59__GUID-1449D9BB-4783-4684-AAA5-D5736285221F">要更改<span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>设置：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus或SQL Developer中，以具有必要权限的用户身份登录数据库。</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ALTER SYSTEM</code>语句指定<span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span> 。
                              </p>
                              <p>以下示例禁用<span>内存中的自动</span> ：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span> =' <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span> = BOTH;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59__GUID-030B9E2F-6B03-41EA-B921-D06537C82147">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../refrn/INMEMORY_AUTOMATIC_LEVEL.html#REFRN-GUID-707EC2D3-4824-494A-96B3-FBE9F6FD4B89" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" title="自动内存使用访问跟踪，列统计信息和其他相关统计信息来管理IM列存储中的对象。">配置自动内存中</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B" name="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B"></a><h4 id="INMEM-GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B" class="sect4"><span class="enumeration_section">6.2.5</span>设置<span>自动内存中</span>的时间间隔</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_INMEMORY</code>包设置<span>Automatic In-Memory</span>检查的使用情况统计信息的时间间隔。
                     </p>
                     <div class="section">
                        <p>默认情况下， <span>Automatic In-Memory会</span>检查过去31天的使用情况统计信息。您可以通过提供改变当前设置<code class="codeph">AIM_STATWINDOW_DAYS</code>参数<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B__GUID-6E1043B5-3C39-47C2-8FB5-6B6CD939EE42">先决条件</p>
                        <p>您必须具有管理员权限才能执行<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code>和<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER</code>过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B__GUID-9316EC41-E121-45F2-B4EF-AA7CC1D9CD75">假设</p>
                        <p>您想将间隔设置为7天。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B__GUID-1449D9BB-4783-4684-AAA5-D5736285221F">要更改<span>自动内存</span>间隔设置：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus或SQL Developer中，以具有管理权限的用户身份登录数据库。</p>
                           </li>
                           <li>
                              <p>（可选）检查<code class="codeph">aim_statwindow_days</code>参数的当前设置。
                              </p>
                              <p>以下示例调用<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER</code>过程：</p><pre class="pre codeblock"><code>VARIABLE b_interval NUMBER BEGIN DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER（DBMS_INMEMORY_ADMIN.AIM_STATWINDOW_DAYS，：b_interval）;结束; / PRINT b_interval B_INTERVAL ----------------------------- 31</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code>过程更改<code class="codeph">aim_statwindow_days</code>设置。
                              </p>
                              <p>以下代码将设置更改为7天：</p><pre class="pre codeblock"><code>BEGIN DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER（DBMS_INMEMORY_ADMIN.AIM_STATWINDOW_DAYS，7）;结束; /</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B__GUID-B5AE1AE7-C52C-4CD1-B957-9C6E3EECD4D8">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_INMEMORY.html#ARPLS-GUID-74D95DFA-BB53-4B51-BECD-0D5310C95671" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code>和<code class="codeph">DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER</code>过程的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" title="自动内存使用访问跟踪，列统计信息和其他相关统计信息来管理IM列存储中的对象。">配置自动内存中</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
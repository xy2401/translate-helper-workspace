<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Lists and describes cartridge services string formatting functions."></meta>
      <meta name="description" content="Lists and describes cartridge services string formatting functions."></meta>
      <title>盒式磁带服务 - 字符串格式化接口</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="Lists and describes cartridge services string formatting functions."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="cartridge-services-file-io-interface.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oci-any-type-and-data-functions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="cartridge-services-file-io-interface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oci-any-type-and-data-functions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oci-cartridge-functions.html" property="item" typeof="WebPage"><span property="name">OCI墨盒功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">盒式磁带服务 - 字符串格式化接口</li>
            </ol>
            <a id="GUID-E776154D-D72B-4709-9217-FC793F7C72F3" name="GUID-E776154D-D72B-4709-9217-FC793F7C72F3"></a><a id="LNOCI17577"></a><a id="LNOCI196"></a>
            
            <h2 id="LNOCI-GUID-E776154D-D72B-4709-9217-FC793F7C72F3" class="sect2"><span class="enumeration_section">29.7</span>盒式磁带服务 - 字符串格式化接口</h2>
         </header>
         <div class="ind">
            <div>
               <p>列出并描述盒式磁带服务字符串格式化功能。</p>
               <div class="section">
                  <p><a href="cartridge-services-string-formatting-interface.html#GUID-E776154D-D72B-4709-9217-FC793F7C72F3__CIHBEIJH" title="该表有2列。第1列是函数名称，第2列描述其用途。">表29-6</a>列出了本节中描述的字符串格式化函数。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-E776154D-D72B-4709-9217-FC793F7C72F3__CIHBEIJH">
                  <p class="titleintable">表29-6字符串格式化函数</p>
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="字符串格式化函数" width="100%" border="1" summary="This table has 2 columns. Column 1 is the function name and column 2 describes its purpose." frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="59%" id="d291463e201">功能</th>
                           <th align="left" valign="bottom" width="41%" id="d291463e204">目的</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="59%" id="d291463e209" headers="d291463e201 ">
                              <p><a href="cartridge-services-string-formatting-interface.html#GUID-1169EE66-5032-4D27-97C6-44AA35349E7D" title="初始化OCIFormat包。">OCIFormatInit（）</a></p>
                           </td>
                           <td align="left" valign="top" width="41%" headers="d291463e209 d291463e204 ">
                              <p>初始化OCIFormat包</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="59%" id="d291463e221" headers="d291463e201 ">
                              <p><a href="cartridge-services-string-formatting-interface.html#GUID-BA446061-9994-4DCA-9402-C4001AE1A73B" title="使用提交给它的参数列表并根据给定的格式字符串将文本字符串写入提供的文本缓冲区。">OCIFormatString（）</a></p>
                           </td>
                           <td align="left" valign="top" width="41%" headers="d291463e221 d291463e204 ">
                              <p>将文本字符串写入提供的文本缓冲区</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="59%" id="d291463e233" headers="d291463e201 ">
                              <p><a href="cartridge-services-string-formatting-interface.html#GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0" title="终止OCIFormat包。">OCIFormatTerm（）</a></p>
                           </td>
                           <td align="left" valign="top" width="41%" headers="d291463e233 d291463e204 ">
                              <p>终止OCIFormat包</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-E776154D-D72B-4709-9217-FC793F7C72F3__GUID-A8D9A8CF-034F-4B84-9413-0CBD747585D4">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用这些功能的详细信息，请<a href="../addci/using-cartridge-services.html#ADDCI4676" target="_blank"><span><cite>参见“Oracle数据库数据盒带开发人员指南”</cite></span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
            </div><a id="LNOCI17578"></a><div class="props_rev_3"><a id="GUID-1169EE66-5032-4D27-97C6-44AA35349E7D" name="GUID-1169EE66-5032-4D27-97C6-44AA35349E7D"></a><h3 id="LNOCI-GUID-1169EE66-5032-4D27-97C6-44AA35349E7D" class="sect3"><span class="enumeration_section">29.7.1</span> OCIFormatInit（）</h3>
               <div>
                  <p>初始化OCIFormat包。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-1169EE66-5032-4D27-97C6-44AA35349E7D__GUID-0617D72E-009C-483C-B378-BD407711873E">目的</p>
                     <p>初始化OCIFormat包。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1169EE66-5032-4D27-97C6-44AA35349E7D__GUID-8098EB2C-62D2-4692-9513-0468425435D9">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIFormatInit（void * hndl，OCIError * err）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1169EE66-5032-4D27-97C6-44AA35349E7D__GUID-BC496C82-C0D7-436E-8CED-1013C0AD1736">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-1169EE66-5032-4D27-97C6-44AA35349E7D__GUID-4048E8BE-B00F-46A3-AC61-DD2CC6FBC35B"><!-- --></a> hndl（IN）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1169EE66-5032-4D27-97C6-44AA35349E7D__GUID-97BF6BF4-20A8-483A-9B80-871442F3CA93"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1169EE66-5032-4D27-97C6-44AA35349E7D__GUID-EE20702F-FE1F-4AD6-9CC9-A721D624859B">评论</p>
                     <p>必须在调用任何其他OCIFormat例程之前调用此例程，并且必须只调用一次。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1169EE66-5032-4D27-97C6-44AA35349E7D__GUID-69A7CB3D-BDE0-41A5-8335-5E418FB5DA2C">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17581"></a><a id="LNOCI17586"></a><a id="LNOCI17580"></a><div class="props_rev_3"><a id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B" name="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B"></a><h3 id="LNOCI-GUID-BA446061-9994-4DCA-9402-C4001AE1A73B" class="sect3"><span class="enumeration_section">29.7.2</span> OCIFormatString（）</h3>
               <div>
                  <p>使用提交给它的参数列表并根据给定的格式字符串将文本字符串写入提供的文本缓冲区。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-29B90946-6C5B-4A29-B0CC-52A58DECBD6D">目的</p>
                     <p>使用提交给它的参数列表并根据给定的格式字符串将文本字符串写入提供的文本缓冲区。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-7B12DF4D-5072-440D-BFA0-9636EA95CA44">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIFormatString（void * hndl，OCIError * err，OraText * buffer，sbig_ora bufferLength，sbig_ora * returnLength，const OraText * formatString，...）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-D614EC67-A398-4EF4-AFAD-7FC628D20EFC">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-BF3F0CD7-02C8-4513-BB87-C3B847D072E5"><!-- --></a> hndl（IN）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-DEBC9F40-D77C-4A35-8622-0ED1C7A6192D"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-790745FF-88C1-476E-BD1C-BBFF7A3650D1"><!-- --></a>缓冲区（OUT）</dt>
                        <dd>
                           <p>包含字符串的缓冲区。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-69C9142A-0DC6-4024-9479-21681037B607"><!-- --></a> bufferLength（IN）</dt>
                        <dd>
                           <p>缓冲区的长度，以字节为单位。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-A79A60D3-B7FF-4C28-9D23-EDCD653CF9FD"><!-- --></a> returnLength（OUT）</dt>
                        <dd>
                           <p>写入缓冲区的字节数（不包括终止<code class="codeph">NULL</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-56BFE2D0-5747-420C-8935-D07DC8912613"><!-- --></a> formatString（IN）</dt>
                        <dd>
                           <p>格式字符串，可以是文字文本和格式规范的任意组合。格式规范由百分比字符（％）分隔，后跟任意数量（包括无）的可选格式修饰符，并由强制格式代码终止。如果格式字符串以％结尾，即没有格式修饰符或后面的格式说明符，则不执行任何操作。<a href="cartridge-services-string-formatting-interface.html#GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__CIHFJIDC" title="该表有2列。第1列是标志值，第2列描述其操作。">表29-7</a>和<a href="cartridge-services-string-formatting-interface.html#GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__CIHCDFJF" title="该表有2列。第1列是格式代码，第2列描述其操作。">表29-8</a>中描述了可用的格式修饰符和格式代码。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-232EB1C6-E8AB-46CD-8D50-D1A4E99705F7"><!-- --></a> ......（在）</dt>
                        <dd>
                           <p><code class="codeph">OCIFormat type wrapper</code> （ <code class="codeph">variable</code> ）形式的可变数量的参数，其中<code class="codeph">variable</code>必须是包含要使用的值的变量。不允许使用常量值或表达式作为<code class="codeph">OCIFormat type wrappers</code>参数;接下来列出了可用的<code class="codeph">OCIFormat type wrappers</code> 。必须使用<code class="codeph">OCIFormatEnd</code>终止参数列表。
                           </p>
                           <p><code class="codeph">OCIFormatUb1（ub1变量）;</code></p>
                           <p><code class="codeph">OCIFormatUb2（ub2变量）;</code></p>
                           <p><code class="codeph">OCIFormatUb4（ub4变量）;</code></p>
                           <p><code class="codeph">OCIFormatUword（uword变量）;</code></p>
                           <p><code class="codeph">OCIFormatUbig_ora（ubig_ora变量）;</code></p>
                           <p><code class="codeph">OCIFormatSb1（sb1变量）;</code></p>
                           <p><code class="codeph">OCIFormatSb2（sb2变量）;</code></p>
                           <p><code class="codeph">OCIFormatSb4（sb4变量）;</code></p>
                           <p><code class="codeph">OCIFormatSword（剑变量）;</code></p>
                           <p><code class="codeph">OCIFormatSbig_ora（sbig_ora变量）;</code></p>
                           <p><code class="codeph">OCIFormatEb1（eb1变量）;</code></p>
                           <p><code class="codeph">OCIFormatEb2（eb2变量）;</code></p>
                           <p><code class="codeph">OCIFormatEb4（eb4变量）;</code></p>
                           <p><code class="codeph">OCIFormatEword（eword变量）;</code></p>
                           <p><code class="codeph">OCIFormatChar（文本变量）;</code></p>
                           <p><code class="codeph">OCIFormatText（const text * variable）;</code></p>
                           <p><code class="codeph">OCIFormatDouble（双变量）;</code></p>
                           <p><code class="codeph">OCIFormatDvoid（const dvoid * variable）;</code></p>
                           <p><code class="codeph">OCIFormatEnd</code></p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-AAB69DC2-F6E4-489B-B8D4-FEF524BAC7DC">评论</p>
                     <p>第一次调用此例程之前必须先调用<code class="codeph">OCIFormatInit()</code>例程来初始化<code class="codeph">OCIFormat</code>包以供使用。当不再需要此例程时，通过调用<code class="codeph">OCIFormatTerm()</code>例程来终止<code class="codeph">OCIFormat</code>包。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-D7FE9857-E19D-4A75-A7CB-1997A1680C0D">格式修饰符</p>
                     <p>格式修改器改变或扩展格式规范，允许更专业的输出。格式修饰符（如<a href="cartridge-services-string-formatting-interface.html#GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__CIHFJIDC" title="该表有2列。第1列是标志值，第2列描述其操作。">表29-7中所述</a> ）可以是任何顺序，并且都是可选的。
                     </p>
                     <div class="tblformal" id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__CIHFJIDC">
                        <p class="titleintable">表29-7格式修饰符标志</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="格式修饰符标志" width="100%" border="1" summary="This table has 2 columns. Column 1 is the flag value and column 2 describes its operation." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d291463e890">旗</th>
                                 <th align="left" valign="bottom" width="80%" id="d291463e893">手术</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d291463e898" headers="d291463e890 ">
                                    <p><code class="codeph">' - '</code></p>
                                 </td>
                                 <td align="left" valign="top" width="80%" headers="d291463e898 d291463e893 ">
                                    <p>左对齐字段中的输出。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d291463e906" headers="d291463e890 ">
                                    <p><code class="codeph">'+'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="80%" headers="d291463e906 d291463e893 ">
                                    <p>始终为数字类型打印一个符号（'+'或' - '）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d291463e914" headers="d291463e890 ">
                                    <p><code class="codeph">''</code></p>
                                 </td>
                                 <td align="left" valign="top" width="80%" headers="d291463e914 d291463e893 ">
                                    <p>如果未打印数字符号，则在符号位置打印一个空格。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d291463e922" headers="d291463e890 ">
                                    <p><code class="codeph">'0'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="80%" headers="d291463e922 d291463e893 ">
                                    <p>用零填充数字输出，而不是空格。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果<code class="codeph">'+'</code>和<code class="codeph">' '</code>标志都使用相同的格式规范，则忽略<code class="codeph">' '</code>标志。
                           </p>
                        </li>
                        <li>
                           <p>如果在同一格式规范中使用<code class="codeph">'-'</code>和<code class="codeph">'0'</code>标志，则忽略<code class="codeph">'-'</code>标志。
                           </p>
                        </li>
                     </ul>
                     <p>替代输出：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于八进制格式代码，添加前导零。</p>
                        </li>
                        <li>
                           <p>对于十六进制格式代码，添加前导'0x'。</p>
                        </li>
                        <li>
                           <p>对于浮点格式代码，输出始终具有基数字符。</p>
                        </li>
                     </ul>
                     <p>场宽</p>
                     <p><code class="codeph">&lt;w&gt;</code>其中<code class="codeph">&lt;w&gt;</code>是指定最小字段宽度的数字。转换的参数打印在至少这个宽的字段中，如果需要则更宽。如果转换后的参数占用的字段宽度少于字段宽度，则会在左侧（或右侧用于左对齐）填充以构成字段宽度。填充字符通常是空格，但如果指定了零填充标志，则它为零。特殊字符<code class="codeph">'*'</code>可用于<code class="codeph">&lt;w&gt;</code>并指示当前参数将用于字段宽度值;实际字段或精度作为下一个顺序参数。
                     </p>
                     <p>精确</p>
                     <p><code class="codeph">.&lt;p&gt;</code> （句号后面跟着数字<code class="codeph">&lt;p&gt;</code> ），指定从字符串打印的最大显示位置数，或十进制数的小数点后的数字，或者打印的最小位数。整数类型（添加前导零以弥补差异）。特殊字符<code class="codeph">'*'</code>可用于<code class="codeph">&lt;p&gt;</code> ，表示当前参数包含精度值。
                     </p>
                     <p>论证索引</p>
                     <p>（ <code class="codeph">&lt;n&gt;</code> ）其中<code class="codeph">&lt;n&gt;</code>是参数列表的整数索引，第一个参数为1。如果在格式规范中未指定参数索引，则选择第一个参数。下一次在格式规范中未指定参数索引时，将选择第二个参数，依此类推。带有和不带参数索引的格式规范可以是任何顺序，并且在操作中彼此独立。
                     </p>
                     <p>例如，格式字符串<code class="codeph">"%u %(4)u %u %(2)u %u"</code>选择给予<code class="codeph">OCIFormatString()</code>的第一，第四，第二，第二和第三个参数。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-CC379E62-F1F2-4424-805C-ECAAA878F645">格式代码</p>
                     <p>格式代码指定如何格式化正在写入字符串的参数。</p>
                     <p>请注意，这些格式代码（如<a href="cartridge-services-string-formatting-interface.html#GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__CIHCDFJF" title="该表有2列。第1列是格式代码，第2列描述其操作。">表29-8中所述</a> ）可以以大写形式显示，这会导致输出中的所有字母字符以大写形式显示，但未转换的文本字符串除外。
                     </p>
                     <div class="tblformal" id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__CIHCDFJF">
                        <p class="titleintable">表29-8指定格式代码的格式代码如何格式化写入字符串的参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="格式代码以指定如何格式化写入字符串的参数" width="100%" border="1" summary="This table has 2 columns. Column 1 is the format code and column 2 describes its operation." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="15%" id="d291463e1037">代码</th>
                                 <th align="left" valign="bottom" width="85%" id="d291463e1040">手术</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1045" headers="d291463e1037 ">
                                    <p><code class="codeph">'C'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1045 d291463e1040 ">
                                    <p>编译器字符集中的单字节字符</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1053" headers="d291463e1037 ">
                                    <p><code class="codeph">'d'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1053 d291463e1040 ">
                                    <p>有符号十进制整数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1061" headers="d291463e1037 ">
                                    <p><code class="codeph">'E'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1061 d291463e1040 ">
                                    <p>形式的指数（科学）表示法[ <code class="codeph">-]&lt;d&gt;&lt;r&gt;[&lt;d&gt;...]e+[&lt;d&gt;]&lt;d&gt;&lt;d&gt;</code>其中<code class="codeph">&lt;r&gt;</code>是当前语言的基数字符， <code class="codeph">&lt;d&gt;</code>是任何单个数字;默认精度由常量<code class="codeph">OCIFormatDP</code> 。可以选择将精度指定为格式修饰符。使用0的精度抑制基数字符;指数始终以至少2位数打印，最多可以打3（例如，1e + 01,1e + 10和1e + 100）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1081" headers="d291463e1037 ">
                                    <p><code class="codeph">'F'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1081 d291463e1040 ">
                                    <p>修复了<code class="codeph">[-]&lt;d&gt;[&lt;d&gt;...]&lt;r&gt;[&lt;d&gt;...]</code>形式的十进制表示法，其中<code class="codeph">&lt;r&gt;</code>是当前语言的相应基数字符， <code class="codeph">&lt;d&gt;</code>是任意字符个位数;可以选择将精度指定为格式修饰符。使用精度0可抑制基数字符。默认精度由常量<code class="codeph">OCIFormatDP</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1101" headers="d291463e1037 ">
                                    <p><code class="codeph">'G'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1101 d291463e1040 ">
                                    <p>可变浮点表示法;选择<code class="codeph">'e'</code>或<code class="codeph">'f'</code> ，如果数字符合指定的精度，则选择<code class="codeph">'f'</code> （如果未指定，则选择默认精度），只有当指数格式允许打印更多有效数字时才选择<code class="codeph">'e'</code> ;如果数字没有小数部分，则不打印基数字符</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1121" headers="d291463e1037 ">
                                    <p><code class="codeph">'一世'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1121 d291463e1040 ">
                                    <p>与<code class="codeph">'d'</code>相同</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1131" headers="d291463e1037 ">
                                    <p><code class="codeph">'O'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1131 d291463e1040 ">
                                    <p>无符号八进制整数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1139" headers="d291463e1037 ">
                                    <p><code class="codeph">'P'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1139 d291463e1040 ">
                                    <p>特定于操作系统的指针打印输出</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1147" headers="d291463e1037 ">
                                    <p><code class="codeph">'S'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1147 d291463e1040 ">
                                    <p>使用其类型的默认格式代码打印参数：</p>
                                    <p><code class="codeph">ociformatub&lt;n&gt;</code> ， <code class="codeph">ociformatuword</code> ， <code class="codeph">ociformatubig_ora</code> ， <code class="codeph">ociformateb&lt;n&gt;</code>和<code class="codeph">ociformateword</code> 。
                                    </p>
                                    <p>使用的格式代码是'u'。</p>
                                    <p><code class="codeph">ociformatsb&lt;n&gt;</code> ， <code class="codeph">ociformatsword</code>和<code class="codeph">ociformatsbig_ora</code> 。
                                    </p>
                                    <p>使用的格式代码是'd'。</p>
                                    <p><code class="codeph">ociformatchar</code></p>
                                    <p>使用的格式代码是'c'。</p>
                                    <p><code class="codeph">ociformattext</code></p>
                                    <p>打印文本，直到找到尾随<code class="codeph">NULL</code> 。
                                    </p>
                                    <p><code class="codeph">ociformatdouble</code></p>
                                    <p>使用的格式代码是'g'。</p>
                                    <p><code class="codeph">ociformatdvoid</code></p>
                                    <p>使用的格式代码是'p'。</p>
                                    <p><code class="codeph">'％' - 打印'％'。</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1212" headers="d291463e1037 ">
                                    <p><code class="codeph">'U'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1212 d291463e1040 ">
                                    <p>无符号十进制整数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d291463e1220" headers="d291463e1037 ">
                                    <p>'X'</p>
                                 </td>
                                 <td align="left" valign="top" width="85%" headers="d291463e1220 d291463e1040 ">
                                    <p>无符号十六进制整数</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-20371E55-FC6B-4E96-BE33-E013458ACC78">例</p>
                     <p>使用OCIFormatString（）为两个国家格式化日期两种不同的方式</p><pre class="oac_no_warn" dir="ltr">/ *此示例显示了国际化背景下任意参数* / / *选择的强大功能。根据格式字符串，两个不同的* / / *国家/地区以*两种不同的方式格式化* / / *日期，但提交给OCIFormatString的* / / *参数列表保持* / / *不变。* / text buffer [255]; ub1天，月，年; OCIError *错误; void * hndl; sbig_ora returnLen; /* 设置日期。* /天= 10;月= 3;年= 97; / *以美国风格计算日期：mm / dd / yy * / OCIFormatString（hndl，err，buffer，（sbig_ora）sizeof（缓冲区），＆returnLen（const text *）“％（2）02u /％（1 ）02u /％（3）02u“，OCIFormatUb1（天），OCIFormatUb1（月），OCIFormatUb1（年），OCIFormatEnd）; / *缓冲区是“03/10/97”。* / / *以新西兰风格计算出日期：dd / mm / yy * / OCIFormatString（hndl，err，buffer，（sbig_ora）sizeof（缓冲区），＆returnLen（const text *）“％（1）02u /％ （2）02u /％（3）02u“，OCIFormatUb1（天），OCIFormatUb1（月），OCIFormatUb1（年），OCIFormatEnd）; / *缓冲区是“10/03/97”。* /</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BA446061-9994-4DCA-9402-C4001AE1A73B__GUID-1B26AAF1-65C2-4FD1-B22A-3775574AACC8">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="cartridge-services-string-formatting-interface.html#GUID-1169EE66-5032-4D27-97C6-44AA35349E7D" title="初始化OCIFormat包。">OCIFormatInit（）</a></li>
                        <li><a href="cartridge-services-string-formatting-interface.html#GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0" title="终止OCIFormat包。">OCIFormatTerm（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17579"></a><div class="props_rev_3"><a id="GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0" name="GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0"></a><h3 id="LNOCI-GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0" class="sect3"><span class="enumeration_section">29.7.3</span> OCIFormatTerm（）</h3>
               <div>
                  <p>终止OCIFormat包。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0__GUID-52C4C12A-80AD-4758-A5DC-570FCEE888D4">目的</p>
                     <p>终止OCIFormat包。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0__GUID-27515023-D406-4637-A6E4-362D933BEDDB">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIFormatTerm（void * hndl，OCIError * err）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0__GUID-B6C09434-9F2E-4169-9E94-90DC41825DB2">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0__GUID-19EA5EDB-584C-4523-838F-7DC44489BDCD"><!-- --></a> hndl（IN）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0__GUID-74607B11-1D37-4FAD-9CF5-DD8E29F17154"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0__GUID-D066482F-48CC-435C-9E00-54E9C2F2C41B">评论</p>
                     <p>必须在不再使用OCIFormat包之后调用此函数，并且只能调用一次。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1D87D4F1-A793-426B-9759-A9DDC6F328B0__GUID-F7E36A76-FD5B-47CB-A703-4D995951CCA7">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
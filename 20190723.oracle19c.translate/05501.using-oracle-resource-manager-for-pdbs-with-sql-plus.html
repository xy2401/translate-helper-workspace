<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">
      <meta name="description" content="Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">
      <title>Using Oracle Resource Manager for PDBs</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator’s Guide ">
      <meta property="og:description" content="Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96136-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-database-utilities-in-a-cdb.html" title="Previous" type="text/html">
      <link rel="next" href="using-oracle-scheduler-with-a-cdb.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="MULTI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-database-utilities-in-a-cdb.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-oracle-scheduler-with-a-cdb.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-oracle-features-in-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">Using Oracle Features in a Multitenant Environment</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Oracle Resource Manager for PDBs</li>
            </ol>
            <a id="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" name="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D"></a><a id="ADMIN13774"></a>
            
            <h2 id="MULTI-GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" class="sect2"><span class="enumeration_chapter">22 </span>Using Oracle Resource Manager for PDBs
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).</p>
               <p>This chapter assumes that you meet the following prerequisites:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>You understand how to configure and manage a CDB. </p>
                  </li>
                  <li>
                     <p>You understand how to use Resource Manager to allocate resources in a non-CDB. </p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D__GUID-141F2F04-BAAB-4972-91E2-BD4940193274">
                  <p class="notep1">Note:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can complete the tasks in this chapter using SQL*Plus or Oracle SQL Developer.</p>
                     </li>
                     <li>
                        <p>You can also administer the Resource Manager with the graphical user interface of Oracle Enterprise Manager Cloud Control (Cloud Control).</p>
                     </li>
                     <li>
                        <p>For simplicity, this chapter refers to PDBs, application roots, and application PDBs as “PDBs.”</p> 
                     </li>
                  </ul>
               </div>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657">Overview of Oracle Resource Manager in a Multitenant Environment</a><br>In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1">Managing CDB Resource Plans</a><br>In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822">Managing PDB Resource Plans</a><br>You can create, enable, and modify resource plans for individual PDBs.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A">Monitoring PDBs Managed by Oracle Database Resource Manager</a><br>A set of dynamic performance views enables you to monitor the results of your Oracle Database Resource Manager settings for PDBs.
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D__GUID-8522B1D8-45DD-424A-BD97-5DE546E332D0">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="managing-a-multitenant-environment.html#GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" title="You can administer a multitenant environment using SQL*Plus or Enterprise Manager Cloud Control (Cloud Control).">Administering a Multitenant Environment</a>"</span></p>
                     </li>
                     <li>
                        <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn more about Resource Manager
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="using-oracle-features-in-a-multitenant-environment.html#GUID-CE922DAA-66FB-430B-96E5-29FF50BFD2FF" title="You can use Oracle Database features in a multitenant environment.">Using Oracle Features in a Multitenant Environment</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" name="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657"></a><h3 id="MULTI-GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" class="sect3"><span class="enumeration_section">22.1 </span>Overview of Oracle Resource Manager in a Multitenant Environment
               </h3>
               <div>
                  <p>In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.</p>
                  <p>In a multitenant environment, Resource Manager operates on two levels:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>CDB level</p>
                        <p>Resource Manager can manage the workloads for multiple PDBs that are contending for system and CDB resources. You can specify how resources are allocated to PDBs, and you can limit the resource utilization of specific PDBs. The principal tool is a CDB resource plan.</p>
                     </li>
                     <li>
                        <p>PDB level</p>
                        <p>Resource Manager can manage the workloads within each PDB. The principal tool is a PDB resource plan.</p>
                     </li>
                  </ul>
                  <p>Resource Manager allocates the resources in two steps:</p>
                  <ol>
                     <li id="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657__CACEABFF">
                        <p>It allocates a portion of the system's resources to each PDB.</p>
                     </li>
                     <li>
                        <p>In a specific PDB, it allocates a portion of system resources obtained in the preceding step to each session connected to the PDB.</p>
                     </li>
                  </ol>
                  <div class="infoboxnote" id="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657__GUID-FA5AA2CE-D6E7-4215-A904-637065B50156">
                     <p class="notep1">Note:</p>
                     <p>Resource Manager manages activity in the root automatically.</p>
                  </div>
                  <p>To use Resource Manager in a multitenant environment, you must meet the following prerequisites:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The CDB must exist and must contain PDBs.</p>
                     </li>
                     <li>
                        <p>To complete a task that uses the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package, you must have <code class="codeph">ADMINISTER_RESOURCE_MANAGER</code> system privilege.
                        </p>
                     </li>
                  </ul>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1">Purpose of Resource Management in a Multitenant Environment</a><br>Resource Manager can provide more efficient use of resources for a CDB.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-19400E80-882F-424F-A19A-9FEB54F83577">Overview of Resource Plan Directives</a><br>A <strong class="term">CDB resource plan</strong> allocates resources to its PDBs according to its set of resource plan directives (directives).
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2">Background and Administrative Tasks and Consumer Groups</a><br>In a CDB, background and administrative tasks map to the Resource Manager consumer groups that run them optimally.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6">Initialization Parameters for Multitenant Resource Management</a><br>Use initialization parameters for control memory and I/O in a PDB.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657__GUID-C5736F93-3AFE-4630-BDF6-1C398C8418B7">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="creating-and-configuring-a-cdb.html#GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" title="Creating and configuring a &nbsp;multitenant container database (CDB) includes tasks such as planning, creating the CDB, and optionally configuring EM Express.">Creating and Configuring a CDB</a>"</span> and <span class="q">"<a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="You can create PDBs, application containers, and application seeds using a variety of techniques.">Creating and Removing PDBs and Application Containers</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-1A627E9A-0138-4DA8-B2E3-E98D3C4AA65D" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn more about the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">Using Oracle Resource Manager for PDBs</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13776"></a><div class="props_rev_3"><a id="GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1" name="GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1"></a><h4 id="MULTI-GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1" class="sect4"><span class="enumeration_section">22.1.1 </span>Purpose of Resource Management in a Multitenant Environment
                  </h4>
                  <div>
                     <p>Resource Manager can provide more efficient use of resources for a CDB.</p>
                     <p>When resource allocation decisions for a CDB are left to the operating system, you may encounter the following problems with workload management:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Inappropriate allocation of resources among PDBs</p>
                           <p>The operating system distributes resources equally among all active processes and cannot prioritize one task over another. Therefore, one or more PDBs might use an inordinate amount of the system resources, leaving the other PDBs starved for resources.</p>
                        </li>
                        <li>
                           <p>Inappropriate allocation of resources within a single PDB</p>
                           <p>One or more sessions connected to a single PDB might use an inordinate amount of the system resources, leaving other sessions connected to the same PDB starved for resources. </p>
                        </li>
                        <li>
                           <p>Inconsistent performance of PDBs</p>
                           <p>A single PDB might perform inconsistently when other PDBs are competing for more system resources or less system resources at various times.</p>
                        </li>
                        <li>
                           <p>Lack of resource usage data for PDBs</p>
                           <p>Resource usage data is critical for monitoring and tuning PDBs. It might be possible to use operating system monitoring tools to gather the resource usage data for a non-CDB if it is the only database running on the system. However, in a CDB, operating system monitoring tools are no longer as useful because there are multiple PDBs running on the system.</p>
                        </li>
                     </ul>
                     <p>Resource Manager helps to overcome these problems by allowing the CDB more control over how hardware resources are allocated among the PDBs and within PDBs.</p>
                     <p>In a CDB with multiple PDBs, some PDBs typically are more important than others. The Resource Manager enables you to prioritize and limit the resource usage of specific PDBs. With the Resource Manager, you can:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Specify that different PDBs should receive different shares of the system resources so that more resources are allocated to the more important PDBs</p>
                        </li>
                        <li>
                           <p>Limit the CPU usage of a particular PDB</p>
                        </li>
                        <li>
                           <p>Limit the number of parallel execution servers that a particular PDB can use</p>
                        </li>
                        <li>
                           <p>Limit the memory usage of a particular PDB</p>
                        </li>
                        <li>
                           <p>Specify the amount of memory guaranteed for a particular PDB</p>
                        </li>
                        <li>
                           <p>Specify the maximum amount of memory a particular PDB can use</p>
                        </li>
                        <li>
                           <p>Use PDB performance profiles for different sets of PDB</p>
                           <p>A performance profile for a set of PDBs can specify shares of system resources, CPU usage, and number of parallel execution servers. PDB performance profiles enable you to manage resources for large numbers of PDBs by specifying Resource Manager directives for profiles instead of individual PDBs.</p>
                        </li>
                        <li>
                           <p>Limit the resource usage of different sessions connected to a single PDB</p>
                        </li>
                        <li>
                           <p>Limit the I/O generated by specific PDBs</p>
                        </li>
                        <li>
                           <p>Monitor the resource usage of PDBs</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13778"></a><div class="props_rev_3"><a id="GUID-19400E80-882F-424F-A19A-9FEB54F83577" name="GUID-19400E80-882F-424F-A19A-9FEB54F83577"></a><h4 id="MULTI-GUID-19400E80-882F-424F-A19A-9FEB54F83577" class="sect4"><span class="enumeration_section">22.1.2 </span>Overview of Resource Plan Directives
                  </h4>
                  <div>
                     <p>A <strong class="term">CDB resource plan</strong> allocates resources to its PDBs according to its set of resource plan directives (directives).
                     </p>
                     <p>A parent-child relationship exists between a CDB resource plan and its resource plan directives. Each directive references either a set of PDBs in a performance profile, or a single PDB. </p>
                     <p>You can specify directives for both individual PDBs and for PDB performance profiles in the same CDB. No two directives for the currently active plan can reference the same PDB or the same PDB performance profile.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1A8B2FD9-0541-43BF-95D6-E56E400088BC">PDB Performance Profiles</a><br>A <strong class="term">PDB performance profile</strong> configures resource plan directives for a set of PDBs that have the same priorities and resource controls. 
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-15823DBC-33C8-4D4F-AD46-0AD4FBE169BA">Resource Plan Directives</a><br>Directives control allocation of CPU and parallel execution servers.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-1A8B2FD9-0541-43BF-95D6-E56E400088BC" name="GUID-1A8B2FD9-0541-43BF-95D6-E56E400088BC"></a><h5 id="MULTI-GUID-1A8B2FD9-0541-43BF-95D6-E56E400088BC" class="sect5"><span class="enumeration_section">22.1.2.1 </span>PDB Performance Profiles
                     </h5>
                     <div>
                        <p>A <strong class="term">PDB performance profile</strong> configures resource plan directives for a set of PDBs that have the same priorities and resource controls. 
                        </p>
                        <p>For example, you might create a performance profiles called Gold, Silver, and Bronze. Each profile specifies a different set of directives depending on the importance of the type of PDB. Gold PDBs are more mission critical than Silver PDBs, which are more mission critical than Bronze PDBs. A PDB specifies its performance profile with the <code class="codeph">DB_PERFORMANCE_PROFILE</code> initialization parameter.
                        </p>
                        <p>You can use PDB lockdown profiles to specify PDB initialization parameters that control resources, such as <code class="codeph">SGA_TARGET</code> and <code class="codeph">PGA_AGGREGATE_LIMIT</code>. A lockdown profile prevents the PDB administrator from modifying the settings. 
                        </p>
                        <p>Oracle recommends using matching names for performance profiles and lockdown profiles. To prevent PDB owners from switching profiles, Oracle recommends putting the PDB performance profile in the PDB lockdown profile.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-19400E80-882F-424F-A19A-9FEB54F83577" title="A CDB resource plan allocates resources to its PDBs according to its set of resource plan directives (directives).">Overview of Resource Plan Directives</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-15823DBC-33C8-4D4F-AD46-0AD4FBE169BA" name="GUID-15823DBC-33C8-4D4F-AD46-0AD4FBE169BA"></a><h5 id="MULTI-GUID-15823DBC-33C8-4D4F-AD46-0AD4FBE169BA" class="sect5"><span class="enumeration_section">22.1.2.2 </span>Resource Plan Directives
                     </h5>
                     <div>
                        <p>Directives control allocation of CPU and parallel execution servers.</p>
                        <p>A directive can control the allocation of resources to PDBs based on the share value that you specify for each PDB or PDB performance profile. A higher share value results in more resources. For example, you can specify that one PDB is allocated double the resources allocated to a second PDB by setting the share value for the first PDB twice as high as the share value for the second PDB. Similarly, you can specify that one PDB performance profile is allocated double the resources allocated to a second PDB performance profile by setting the share value for the first PDB performance profile twice as high as the share value for the second PDB performance profile. The settings apply to the set of PDBs that use each profile.</p>
                        <p>You can also specify utilization limits for PDBs and PDB performance profiles. The limit controls allocation to the PDB or performance profile. For example, the limit can control how much CPU a PDB gets as a percentage of the total CPU available to the CDB.</p>
                        <p>You can use both shares and utilization limits together for precise control over the resources allocated to each PDB and PDB performance profile in a CDB.</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-15823DBC-33C8-4D4F-AD46-0AD4FBE169BA__GUID-8C2F418B-3CF1-4FD9-8567-632EB58F1C79">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-3B2EF996-3BE8-413D-968C-14339FACFC12" title="There are several ways to restrict PDB users for enhanced security.">About Restricting PDB Users for Enhanced Security</a>"</span> for more information about PDB lockdown profiles
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-19400E80-882F-424F-A19A-9FEB54F83577" title="A CDB resource plan allocates resources to its PDBs according to its set of resource plan directives (directives).">Overview of Resource Plan Directives</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13788"></a><div class="props_rev_3"><a id="GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2" name="GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2"></a><h4 id="MULTI-GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2" class="sect4"><span class="enumeration_section">22.1.3 </span>Background and Administrative Tasks and Consumer Groups
                  </h4>
                  <div>
                     <p>In a CDB, background and administrative tasks map to the Resource Manager consumer groups that run them optimally.</p>
                     <p>Resource Manager uses the following rules to map a task to a consumer group:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A task is mapped to a consumer group in the container that starts the task. </p>
                           <p>If a task starts in the CDB root, then the task maps to a consumer group in the CDB root. If the task starts in a PDB, then the task maps to a consumer group in the PDB.</p>
                        </li>
                        <li>
                           <p>Many maintenance and administrative tasks automatically map to a consumer group. </p>
                           <p>For example, automated maintenance tasks map to <code class="codeph">ORA$AUTOTASK</code>. In certain cases, the tasks map to a consumer group, but the mapping is modifiable. Such tasks include RMAN backup, RMAN image copy, Oracle Data Pump, and In-Memory population.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2__GUID-2DBDD619-E1B7-42AE-BFFF-592FD87E6E6F">
                        <p class="notep1">Note:</p>
                        <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-AC101C05-DD43-445C-85F7-0A04DCBC2EE0" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn more about the mapping rules for predefined consumer groups
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13775"></a><div class="props_rev_3"><a id="GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" name="GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6"></a><h4 id="MULTI-GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" class="sect4"><span class="enumeration_section">22.1.4 </span>Initialization Parameters for Multitenant Resource Management
                  </h4>
                  <div>
                     <p>Use initialization parameters for control memory and I/O in a PDB.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252">Memory-Related Initialization Parameters for PDBs</a><br>Several initialization parameters control the memory usage of a PDB.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2">I/O-Related Initialization Parameters for PDBs</a><br>The <code class="codeph">MAX_IOPS</code> and <code class="codeph">MAX_MBPS</code> initialization parameters limit the disk I/O generated by a PDB.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-939361C2-FCD4-4049-B63F-0DDC442BE847">CPU-Related Initialization Parameters for PDBs</a><br>The <code class="codeph">CPU_COUNT</code> initialization parameter specifies the number of CPUs available for Oracle Database to use.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252" name="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252"></a><h5 id="MULTI-GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252" class="sect5"><span class="enumeration_section">22.1.4.1 </span>Memory-Related Initialization Parameters for PDBs
                     </h5>
                     <div>
                        <p>Several initialization parameters control the memory usage of a PDB.</p>
                        <p>When the PDB is the current container, the initialization parameters in the following table control the memory usage of the current PDB. When one or more of these parameters is set for a PDB, ensure that the CDB and the other PDBs have sufficient memory for their operations. The initialization parameters control the memory usage of PDBs only if the following conditions are met:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">NONCDB_COMPATIBLE</code> initialization parameter is set to <code class="codeph">false</code> in the CDB root.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">MEMORY_TARGET</code> initialization parameter is not set or is set to <code class="codeph">0</code> (zero) in the CDB root.
                              </p>
                           </li>
                        </ul>
                        <div class="tblformal" id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252__GUID-73A434E4-F48C-4440-BA3C-56844D263C76">
                           <p class="titleintable">Table 22-1 Initialization Parameters That Control the Memory Usage of PDBs</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Initialization Parameters That Control the Memory Usage of PDBs" summary="This table describes the initialization parameters that control the memory usage of PDBs." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d102832e1165">Initialization Parameter</th>
                                    <th align="left" valign="bottom" width="20%" id="d102832e1167">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1171" headers="d102832e1165 ">
                                       <p><code class="codeph">DB_CACHE_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1171 d102832e1167 ">
                                       <p>Sets the minimum, guaranteed buffer cache space for the PDB.</p>
                                       <p>The following requirements must be met:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>It must be less than or equal to 50% of the setting for the <code class="codeph">DB_CACHE_SIZE</code> in the CDB root.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The sum of the <code class="codeph">DB_CACHE_SIZE</code> settings for all PDBs must be less than or equal to 50% of the setting for the <code class="codeph">DB_CACHE_SIZE</code> in the CDB root.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>These requirements do not apply if the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a nonzero value in the CDB root.
                                       </p>
                                       <p>When the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a nonzero, the following requirements must be met:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>The values of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> in a PDB must be less than or equal to 50% of the PDB’s <code class="codeph">SGA_TARGET</code> value.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The values of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> in a PDB must be less than or equal to 50% of the <code class="codeph">SGA_TARGET</code> value at the CDB level.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The sum of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> across all the PDBs in a CDB must be less than or equal to 50% of the <code class="codeph">SGA_TARGET</code> value at the CDB level.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1244" headers="d102832e1165 ">
                                       <p><code class="codeph">SHARED_POOL_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1244 d102832e1167 ">
                                       <p>Sets the minimum, guaranteed shared pool space for the PDB.</p>
                                       <p>The following requirements must be met:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>It must be less than or equal to 50% of the setting for the <code class="codeph">SHARED_POOL_SIZE</code> in the CDB root.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The sum of the <code class="codeph">SHARED_POOL_SIZE</code> settings for all PDBs must be less than or equal to 50% of the setting for the <code class="codeph">SHARED_POOL_SIZE</code> in the CDB root.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>These requirements do not apply if the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a nonzero value in the CDB root.
                                       </p>
                                       <p>When the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a nonzero, the following requirements must be met:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>The values of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> in a PDB must be less than or equal to 50% of the PDB’s <code class="codeph">SGA_TARGET</code> value.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The values of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> in a PDB must be less than or equal to 50% of the <code class="codeph">SGA_TARGET</code> value at the CDB level.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The sum of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> across all the PDBs in a CDB must be less than or equal to 50% of the <code class="codeph">SGA_TARGET</code> value at the CDB level.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1317" headers="d102832e1165 ">
                                       <p><code class="codeph">SGA_MIN_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1317 d102832e1167 ">
                                       <p>Sets the minimum SGA size for the PDB.</p>
                                       <p>The following requirements must be met:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>It must be less than or equal to 50% of the setting for the <code class="codeph">SGA_TARGET</code> in the CDB root.
                                             </p>
                                          </li>
                                          <li>
                                             <p>It must be less than or equal to 50% of the setting for the <code class="codeph">SGA_TARGET</code> in the PDB.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The sum of the <code class="codeph">SGA_MIN_SIZE</code> settings for all PDBs must be less than or equal to 50% of the setting for the <code class="codeph">SGA_TARGET</code> in the CDB root.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>These requirements do not apply if the <code class="codeph">SGA_TARGET</code> initialization parameter is not set or is set to <code class="codeph">0</code> (zero) in the CDB root.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1357" headers="d102832e1165 ">
                                       <p><code class="codeph">SGA_TARGET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1357 d102832e1167 ">
                                       <p>Sets the maximum SGA size for the PDB.</p>
                                       <p>The <code class="codeph">SGA_TARGET</code> setting in the PDB is enforced only if the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a nonzero value in the CDB root. The <code class="codeph">SGA_TARGET</code> setting in the PDB must be less than or equal to the <code class="codeph">SGA_TARGET</code> setting in the CDB root.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1379" headers="d102832e1165 ">
                                       <p><code class="codeph">PGA_AGGREGATE_LIMIT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1379 d102832e1167 ">
                                       <p>Sets the maximum PGA size for the PDB.</p>
                                       <p>The following requirements must be met:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>It must be less than or equal to the setting for the <code class="codeph">PGA_AGGREGATE_LIMIT</code> in the CDB root.
                                             </p>
                                          </li>
                                          <li>
                                             <p>It must be greater than or equal to two times the setting for the <code class="codeph">PGA_AGGREGATE_TARGET</code> in the PDB.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1402" headers="d102832e1165 ">
                                       <p><code class="codeph">PGA_AGGREGATE_TARGET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1402 d102832e1167 ">
                                       <p>Sets the target aggregate PGA size for the PDB.</p>
                                       <p>The following requirements must be met:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>It must be less than or equal to the <code class="codeph">PGA_AGGREGATE_TARGET</code> value set at the CDB level.
                                             </p>
                                          </li>
                                          <li>
                                             <p>It must be less than or equal to 50% of the <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter value set at the CDB level.
                                             </p>
                                          </li>
                                          <li>
                                             <p>It must be less than or equal to 50% of the <code class="codeph">PGA_AGGREGATE_LIMIT</code> value set in the PDB.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="example" id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252__GUID-FAAD3AE2-BABF-4FE6-8924-CEF021181327">
                           <p class="titleinexample">Example 22-1 Setting the Maximum Aggregate PGA Memory Available for a PDB</p>
                           <p>With the PDB as the current container, run the following SQL statement to set the <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter both in memory and in the SPFILE to 90 MB:
                           </p><pre class="pre codeblock"><code>ALTER SYSTEM SET PGA_AGGREGATE_LIMIT = 90M SCOPE = BOTH;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252__GUID-9B8491D6-9BD8-42D8-AECE-D9AC39D969DA">
                           <p class="titleinexample">Example 22-2 Setting the Minimum SGA Size for a PDB</p>i
                           <p>With the PDB as the current container, run the following SQL statement to set the <code class="codeph">SGA_MIN_SIZE</code> initialization parameter both in memory and in the SPFILE to 500 MB:
                           </p><pre class="pre codeblock"><code>ALTER SYSTEM SET SGA_MIN_SIZE = 500M SCOPE = BOTH;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" title="Use initialization parameters for control memory and I/O in a PDB.">Initialization Parameters for Multitenant Resource Management</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2" name="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2"></a><h5 id="MULTI-GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2" class="sect5"><span class="enumeration_section">22.1.4.2 </span>I/O-Related Initialization Parameters for PDBs
                     </h5>
                     <div>
                        <p>The <code class="codeph">MAX_IOPS</code> and <code class="codeph">MAX_MBPS</code> initialization parameters limit the disk I/O generated by a PDB.
                        </p>
                        <p>A large amount of disk I/O can cause poor performance. Several factors can result in excess disk I/O, such as poorly designed SQL or index and table scans in high-volume transactions. If one PDB is generating a large amount of disk I/O, then it can degrade the performance of other PDBs in the same CDB.</p>
                        <p>Use one or both of the following initialization parameters to limit the I/O generated by a specific PDB:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">MAX_IOPS</code> initialization parameter limits the number of I/O operations for each second.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">MAX_MBPS</code> initialization parameter limits the megabytes for I/O operations for each second.
                              </p>
                           </li>
                        </ul>
                        <p>If you set both preceding initialization parameters for a single PDB, then Oracle Database enforces both limits. Note that these limits are <span class="italic">not</span> enforced for Oracle Exadata, which uses I/O Resource Management (IORM) to manage I/Os between PDBs.
                        </p>
                        <p>If these initialization parameters are set with the CDB root as the current container, then the values become the default values for all containers in the CDB. If they are set with an application root as the current container, then the values become the default values for all application PDBs in the application container. When they are set with a PDB or application PDB as the current container, then the settings take precedence over the default settings in the CDB root or the application root. These parameters cannot be set in a non-CDB.</p>
                        <p>The default for both initialization parameters is 0 (zero). If these initialization parameters are set to 0 (zero) in a PDB, and the CDB root is set to 0, then there is no I/O limit for the PDB.  If these initialization parameters are set to 0 (zero) in an application PDB, and its application root is set to 0, then there is no I/O limit for the application PDB.</p>
                        <p>Critical I/O operations, such as ones for the control file and password file, are exempted from the limit and continue to run even if the limit is reached. However, all I/O operations, including critical I/O operations, are counted when the number of I/O operations and the megabytes for I/O operations are calculated.</p>
                        <p>You can use the <code class="codeph">DBA_HIST_RSRC_PDB_METRIC</code> view to calculate a reasonable I/O limit for a PDB. Consider the values in the following columns when calculating a limit: <code class="codeph">IOPS</code>, <code class="codeph">IOMBPS</code>, <code class="codeph">IOPS_THROTTLE_EXEMPT</code>, and <code class="codeph">IOMBPS_THROTTLE_EXEMPT</code>. The <code class="codeph">rsmgr:io rate limit</code> wait event indicates that a limit was reached.
                        </p>
                        <div class="example" id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2__GUID-FC7E23FC-00D2-419B-9EE9-8D27A0CA9296">
                           <p class="titleinexample">Example 22-3 Limiting the I/O Generated by a PDB</p>
                           <p>With the PDB as the current container, run the following SQL statement to set the <code class="codeph">MAX_IOPS</code> initialization parameter both in memory and in the SPFILE to a limit of 1,000 I/O operations for each second:
                           </p><pre class="pre codeblock"><code>ALTER SYSTEM SET MAX_IOPS = 1000 SCOPE = BOTH;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2__GUID-775B5C73-BD07-47A1-BB2D-8882BAD3FC3E">
                           <p class="titleinexample">Example 22-4 Limiting the Megabytes of I/O Generated by a PDB</p>
                           <p>With the PDB as the current container, run the following SQL statement to set the <code class="codeph">MAX_MBPS</code> initialization parameter both in memory and in the SPFILE to a limit of 200 MB of I/O for each second:
                           </p><pre class="pre codeblock"><code>ALTER SYSTEM SET MAX_MBPS = 200 SCOPE = BOTH;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2__GUID-2B73E8F6-BE81-4ECA-B46D-CCE58CB4B339">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="You can use the ALTER SYSTEM statement to modify a PDB.">Modifying a PDB at the System Level</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../refrn/MAX_IOPS.html#REFRN-GUID-7D89F457-0CE6-4152-98EA-7F1BE4E0ADC7" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">MAX_IOPS</code> initialization parameter
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../refrn/MAX_MBPS.html#REFRN-GUID-9F7E0143-76FB-488A-9A04-2D85F1417CB6" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">MAX_MBPS</code> initialization parameter
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" title="Use initialization parameters for control memory and I/O in a PDB.">Initialization Parameters for Multitenant Resource Management</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-939361C2-FCD4-4049-B63F-0DDC442BE847" name="GUID-939361C2-FCD4-4049-B63F-0DDC442BE847"></a><h5 id="MULTI-GUID-939361C2-FCD4-4049-B63F-0DDC442BE847" class="sect5"><span class="enumeration_section">22.1.4.3 </span>CPU-Related Initialization Parameters for PDBs
                     </h5>
                     <div>
                        <p>The <code class="codeph">CPU_COUNT</code> initialization parameter specifies the number of CPUs available for Oracle Database to use.
                        </p>
                        <p><span class="italic">Instance caging</span> is a technique that uses an initialization parameter to limit the number of CPUs that an instance can use simultaneously. You can set <code class="codeph">CPU_COUNT</code> at the PDB level. If Resource Manager is enabled, then the PDB is “caged” (restricted) to the number of CPUs specified by <code class="codeph">CPU_COUNT</code>.
                        </p>
                        <p><code class="codeph">CPU_COUNT</code> works the same way as the <code class="codeph">utilization_limit</code> directive in the CDB plan. However, the <code class="codeph">CPU_COUNT</code> limit is expressed in terms of number of CPUs rather than utilization percentage. If both the <code class="codeph">utilization_limit</code> and <code class="codeph">CPU_COUNT</code> are specified, then the lower limit is enforced. 
                        </p>
                        <p><code class="codeph">CPU_COUNT</code> is advantageous because when the PDB is plugged into a new container, the <code class="codeph">CPU_COUNT</code> setting remains with the plugged-in PDB. Also, Oracle Database uses the <code class="codeph">CPU_COUNT</code> setting for a PDB to derive many other PDB parameters, such as those for parallel execution.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" title="Use initialization parameters for control memory and I/O in a PDB.">Initialization Parameters for Multitenant Resource Management</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" name="GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1"></a><h3 id="MULTI-GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" class="sect3"><span class="enumeration_section">22.2 </span>Managing CDB Resource Plans
               </h3>
               <div>
                  <p>In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D">About CDB Resource Plans</a><br>Create CDB resource plans that allocate shares and resource limits for PDBs.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594">Creating a CDB Resource Plan for Managing PDBs</a><br>To create a CDB resource plan for individual PDBs and define the directives for the plan, use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E">Creating a CDB Resource Plan for Managing PDBs: Scenario</a><br>This scenario illustrates each of the steps involved in creating a CDB resource plan for individual PDBs.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80">Creating a CDB Resource Plan with PDB Performance Profiles</a><br>Use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to create a CDB resource plan for PDB performance profiles and define the directives for the plan. Each PDB that uses a profile adopts the CDB resource plan directive.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371">Creating a CDB Resource Plan for PDB Performance Profiles: Scenario</a><br>This scenario illustrates the steps involved in creating a CDB resource plan for PDB performance profiles. 
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E05500C-C8C0-4E99-B753-133515175437">Enabling a CDB Resource Plan</a><br>You enable the Resource Manager for a CDB by setting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the root.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697">Modifying a CDB Resource Plan</a><br>Modifying a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386">Disabling a CDB Resource Plan</a><br>Disable the Resource Manager for a CDB by unsetting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the CDB root.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172">Viewing Information About Plans and Directives in a CDB</a><br>You can view information about CDB resource plans, CDB resource plan directives, and predefined resource plans in a CDB.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">Using Oracle Resource Manager for PDBs</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13777"></a><div class="props_rev_3"><a id="GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" name="GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D"></a><h4 id="MULTI-GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" class="sect4"><span class="enumeration_section">22.2.1 </span>About CDB Resource Plans
                  </h4>
                  <div>
                     <p>Create CDB resource plans that allocate shares and resource limits for PDBs.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2">Shares for Allocating Resources to PDBs</a><br>To allocate resources among PDBs, assign a share value to each PDB or performance profile. A higher share value results in more guaranteed resources for a PDB or the PDBs that use the performance profile.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569">Utilization Limits for PDBs</a><br>A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile. 
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA">The Default Directive for PDBs</a><br>When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">Managing CDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13943"></a><a id="ADMIN13781"></a><a id="ADMIN13779"></a><div class="props_rev_3"><a id="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" name="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2"></a><h5 id="MULTI-GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" class="sect5"><span class="enumeration_section">22.2.1.1 </span>Shares for Allocating Resources to PDBs
                     </h5>
                     <div>
                        <p>To allocate resources among PDBs, assign a share value to each PDB or performance profile. A higher share value results in more guaranteed resources for a PDB or the PDBs that use the performance profile.</p>
                        <p>Specify a share value for a PDB using the <code class="codeph">DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE</code> procedure and for a PDB performance profile using the <code class="codeph">DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE</code> procedure. In both cases, the <code class="codeph">shares</code> parameter specifies the share value for the PDB. Multiple PDBs can use the same PDB performance profile.
                        </p>
                        <p>The following figure shows an example of three PDBs with share values specified for them in a CDB resource plan.</p>
                        <div class="figure" id="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2__CACCDGEE">
                           <p class="titleinfigure">Figure 22-1 Shares in a CDB Resource Plan</p><img src="img/admin_vm_101.png" alt="Description of Figure 22-1 follows" title="Description of Figure 22-1 follows" longdesc="img_text/admin_vm_101.html"><br><a href="img_text/admin_vm_101.html">Description of "Figure 22-1 Shares in a CDB Resource Plan"</a></div>
                        <!-- class="figure" -->
                        <p>The preceding figure shows that the total number of shares is seven (3 plus 3 plus 1). The <code class="codeph">salespdb</code> and the <code class="codeph">servicespdb</code> PDB are each guaranteed 3/7 of the resources, while the <code class="codeph">hrpdb</code> PDB is guaranteed 1/7 of the resources. However, any PDB can use more than the guaranteed amount of a resource when no resource contention exists.
                        </p>
                        <p>The following table shows the resource allocation to the PDBs in the preceding figure based on the share values. The table assumes that loads of the PDBs consume all system resources allocated.</p>
                        <div class="tblformal" id="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2__CACDBDCG">
                           <p class="titleintable">Table 22-2 Resource Allocation for Sample PDBs</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Resource Allocation for Sample PDBs" summary="This table lists system resources and describes how the resources are allocated to the sample pluggable databases." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="21%" id="d102832e2206">Resource</th>
                                    <th align="left" valign="bottom" width="44%" id="d102832e2209">Resource Allocation</th>
                                    <th align="left" valign="bottom" width="35%" id="d102832e2212">See Also</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d102832e2216" headers="d102832e2206 ">
                                       <p>CPU</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d102832e2216 d102832e2209 ">
                                       <p>The <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs can consume the same amount of CPU resources. The <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs are each guaranteed three times more CPU resource than the <code class="codeph">hrpdb</code> PDB.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d102832e2216 d102832e2212 ">
                                       <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-514BDECF-BE80-4CCA-A00D-EF37C2CFC435" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about this resource
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d102832e2246" headers="d102832e2206 ">
                                       <p>Parallel execution servers</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d102832e2246 d102832e2209 ">
                                       <p>Queued parallel queries from the <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs are selected equally. Queued parallel queries from the <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs are selected three times as often as queued parallel queries from the <code class="codeph">hrpdb</code> PDB.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d102832e2246 d102832e2212 ">
                                       <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-15685C9E-AD79-4342-BFA9-18D478915267" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about this resource
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13783"></a><a id="ADMIN13944"></a><a id="ADMIN13782"></a><div class="props_rev_3"><a id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" name="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569"></a><h5 id="MULTI-GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" class="sect5"><span class="enumeration_section">22.2.1.2 </span>Utilization Limits for PDBs
                     </h5>
                     <div>
                        <p>A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile. </p>
                        <p>You can specify utilization limits for CPU and parallel execution servers. Utilization limits for a PDB are set by the CDB resource plan.</p>
                        <p>The following table describes utilization limits for PDBs and the Resource Manager action taken when a PDB reaches a utilization limit. For limits specified with a PDB performance profile, the limit applies to every PDB that uses the PDB performance profile. For example, if <code class="codeph">pdb1</code> and <code class="codeph">pdb20</code> have a performance profile <code class="codeph">BRONZE</code>, and if <code class="codeph">BRONZE</code> has a limit set to 10%, then <code class="codeph">pdb1</code> has a 10% limit and <code class="codeph">pdb20</code> has a 10% limit.
                        </p>
                        <div class="tblformalwide" id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__CACECBGJ">
                           <p class="titleintable">Table 22-3 Utilization Limits for PDBs</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Utilization Limits for PDBs" summary="This table lists each resource, the resource usage limit for each resource, and the Resource Manager action when a limit is reached." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="17%" id="d102832e2403">Resource</th>
                                    <th align="left" valign="bottom" width="41%" id="d102832e2406">Resource Utilization Limit</th>
                                    <th align="left" valign="bottom" width="41%" id="d102832e2409">Resource Manager Action When Limit Is Reached</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d102832e2414" headers="d102832e2403 ">
                                       <p>CPU</p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d102832e2414 d102832e2406 ">
                                       <p>The CPU utilization limit for sessions connected to a PDB is set by the <code class="codeph">utilization_limit</code> parameter in subprograms of the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package. The <code class="codeph">utilization_limit</code> parameter specifies the percentage of the system resources that a PDB can use. The value ranges from 0 to 100.
                                       </p>
                                       <p>You can also limit CPU for a PDB by setting the initialization parameter <code class="codeph">CPU_COUNT</code>. For example, if you set the <code class="codeph">CPU_COUNT</code> to <code class="codeph">8</code>, then the PDB cannot use more than 8 CPUs at any time. If both <code class="codeph">utilization_limit</code> and <code class="codeph">CPU_COUNT</code> are specified, then the more restrictive (lower) value is enforced.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d102832e2414 d102832e2409 ">
                                       <p>Resource Manager throttles the PDB sessions so that the CPU utilization for the PDB does not exceed the utilization limit.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d102832e2450" headers="d102832e2403 ">
                                       <p>Parallel execution servers</p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d102832e2450 d102832e2406 ">
                                       <p>You can limit the number of parallel execution servers in a PDB by means of parallel statement queuing. The limit is a “queuing point” because the database queues parallel queries when the limit is reached.</p>
                                       <p>You can set the limit (queuing point) in either of the following ways:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>The value of the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter setting in the PDB
                                             </p>
                                          </li>
                                          <li>
                                             <p>The value of the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter setting in the CDB root multiplied by the value of the <code class="codeph">parallel_server_limit</code> directive set for the PDB in the CDB resource manager plan
                                             </p>
                                             <p>For example, if the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter is set to 200 in the CDB root, and if the  <code class="codeph">parallel_server_limit</code> directive for a PDB is set to 10%, then utilization limit for the PDB is 20 parallel execution servers (200 * .10). 
                                             </p>
                                          </li>
                                       </ul>
                                       <p>If the limit is set in both preceding ways, then the lower limit of the two is used. See <a href="../refrn/PARALLEL_MAX_SERVERS.html#REFRN-GUID-B6CE9EA3-B846-4AA7-B668-FD3BEE433A24" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for the default value for <code class="codeph">PARALLEL_SERVERS_TARGET</code>.
                                       </p>
                                       <p><span class="bold">Note:</span> Oracle recommends using the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter instead of the <code class="codeph">parallel_server_limit</code> directive in a CDB plan.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d102832e2450 d102832e2409 ">
                                       <p>Resource Manager queues parallel queries when the number of parallel execution servers used by the PDB would exceed the limit.</p>
                                       <p><span class="bold">Note:</span> In a CDB, parallel statements are queued based on the <code class="codeph">PARALLEL_SERVERS_TARGET</code> settings at both the PDB and CDB level. A statement is queued when the number of parallel servers used by the PDB exceeds the target for the PDB or when the number of parallel servers used by all PDBs exceeds the target for the CDB.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>The following figure shows an example of three PDBs with shares and utilization limits specified for them in a CDB resource plan.</p>
                        <div class="figure" id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__CACJBEJH">
                           <p class="titleinfigure">Figure 22-2 Shares and Utilization Limits in a CDB Resource Plan</p><img src="img/admin_vm_104.png" alt="Description of Figure 22-2 follows" title="Description of Figure 22-2 follows" longdesc="img_text/admin_vm_104.html"><br><a href="img_text/admin_vm_104.html">Description of "Figure 22-2 Shares and Utilization Limits in a CDB Resource Plan"</a></div>
                        <!-- class="figure" -->
                        <p>The preceding figure shows that there are no utilization limits on the <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs because <code class="codeph">utilization_limit</code> and <code class="codeph">parallel_server_limit</code> are both set to 100% for them. However, the <code class="codeph">hrpdb</code> PDB is limited to 70% of the applicable system resources because <code class="codeph">utilization_limit</code> and <code class="codeph">parallel_server_limit</code> are both set to 70%.
                        </p>
                        <div class="infoboxnote" id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__GUID-54FCF13B-7245-4A9C-8B4F-4ED424A7F9D4">
                           <p class="notep1">Note:</p>
                           <p>This scenario assumes that the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter does not specify a lower limit in a PDB. When the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter specifies a lower limit for parallel execution servers in a PDB, the lower limit is used.
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__GUID-52E33166-F9B5-4642-A73E-BA364EB4818B">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-B1E0B0A8-2709-4A1C-821D-9CEC35B03603" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../refrn/CPU_COUNT.html#REFRN-GUID-78CDCDE7-5A1D-4AC1-B5BD-B185CB296416" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about <code class="codeph">CPU_COUNT</code></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13785"></a><a id="ADMIN13945"></a><a id="ADMIN13784"></a><div class="props_rev_3"><a id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" name="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA"></a><h5 id="MULTI-GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" class="sect5"><span class="enumeration_section">22.2.1.3 </span>The Default Directive for PDBs
                     </h5>
                     <div>
                        <p>When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.</p>
                        <p>The following table shows the attributes of the initial default directive for PDBs.</p>
                        <div class="tblformal" id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACGHHJA">
                           <p class="titleintable">Table 22-4 Initial Default Directive Attributes for PDBs</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Initial Default Directive Attributes for PDBs" summary="This table shows each default directive and its value." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="50%" id="d102832e2675">Directive Attribute</th>
                                    <th align="left" valign="bottom" width="50%" id="d102832e2678">Value</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d102832e2683" headers="d102832e2675 ">
                                       <p><code class="codeph">shares</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d102832e2683 d102832e2678 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d102832e2691" headers="d102832e2675 ">
                                       <p><code class="codeph">utilization_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d102832e2691 d102832e2678 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d102832e2699" headers="d102832e2675 ">
                                       <p><code class="codeph">parallel_server_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d102832e2699 d102832e2678 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>When a PDB is plugged into a CDB and no directive is defined for it, the PDB uses the default directive for PDBs.</p>
                        <p>You can create new directives for the new PDB. You can also change the default directive attribute values for PDBs by using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package.
                        </p>
                        <p>When a PDB is unplugged from a CDB, the directive for the PDB is retained. If the same PDB is plugged back into the CDB, then it uses the directive defined for it if the directive was not deleted manually.</p>
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">Figure 22-3</a> shows an example of the default directive in a CDB resource plan.
                        </p>
                        <div class="figure" id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">
                           <p class="titleinfigure">Figure 22-3 Default Directive in a CDB Resource Plan</p><img src="img/admin_vm_103.png" alt="Description of Figure 22-3 follows" title="Description of Figure 22-3 follows" longdesc="img_text/admin_vm_103.html"><br><a href="img_text/admin_vm_103.html">Description of "Figure 22-3 Default Directive in a CDB Resource Plan"</a></div>
                        <!-- class="figure" -->
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">Figure 22-3</a> shows that the default PDB directive specifies that the <code class="codeph">share</code> is 1, the <code class="codeph">utilization_limit</code> is 50%, and the <code class="codeph">parallel_server_limit</code> is 50%. Any PDB that is part of the CDB and does not have directives defined for it uses the default PDB directive. <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">Figure 22-3</a> shows the PDBs <code class="codeph">marketingpdb</code> and <code class="codeph">testingpdb</code> using the default PDB directive. Therefore, <code class="codeph">marketingpdb</code> and <code class="codeph">testingpdb</code> each get 1 share and utilization limits of 50.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__GUID-4D81CAFE-2132-4F3D-BF23-916FDBE5FA4A">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D" title="When you create a PDB in a CDB, you can create a CDB resource plan directive for the PDB using the CREATE_CDB_PLAN_DIRECTIVE procedure. The directive specifies how resources are allocated to the new PDB.">Creating New CDB Resource Plan Directives for a PDB</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD" title="You can update the default directive for PDBs in a CDB resource plan using the UPDATE_CDB_DEFAULT_DIRECTIVE procedure. The default directive applies to PDBs for which specific directives have not been defined.">Updating the Default Directive for PDBs in a CDB Resource Plan</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="You can create PDBs, application containers, and application seeds using a variety of techniques.">Creating and Removing PDBs and Application Containers</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="removing-a-pdb.html#GUID-893E1D67-BD95-4757-B862-03AD13AFF722" title="Just as you can plug a PDB into a CDB, you can unplug a PDB from a CDB.">Unplugging a PDB from a CDB</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-CDF30CA7-5A14-4C17-8C32-746F0763A7C9" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about the parallel server limit
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13790"></a><div class="props_rev_3"><a id="GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594" name="GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594"></a><h4 id="MULTI-GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594" class="sect4"><span class="enumeration_section">22.2.2 </span>Creating a CDB Resource Plan for Managing PDBs
                  </h4>
                  <div>
                     <p>To create a CDB resource plan for individual PDBs and define the directives for the plan, use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package.
                     </p>
                     <div class="section">
                        <p>The general steps for creating a CDB resource plan for individual PDBs are the following:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Create the pending area using the <code class="codeph">CREATE_PENDING_AREA</code> procedure.</span></li>
                        <li><span>Create the CDB resource plan using the <code class="codeph">CREATE_CDB_PLAN</code> procedure.</span></li>
                        <li><span>Create directives for the PDBs using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure.</span></li>
                        <li><span>(Optional) Update the default PDB directive using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure.</span></li>
                        <li><span>Validate the pending area using the <code class="codeph">VALIDATE_PENDING_AREA</code> procedure.</span></li>
                        <li><span>Submit the pending area using the <code class="codeph">SUBMIT_PENDING_AREA</code> procedure.</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">Managing CDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13792"></a><a id="ADMIN13793"></a><a id="ADMIN13795"></a><a id="ADMIN13796"></a><a id="ADMIN13797"></a><a id="ADMIN13798"></a><a id="ADMIN13799"></a><a id="ADMIN13800"></a><a id="ADMIN13801"></a><a id="ADMIN13791"></a><div class="props_rev_3"><a id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E" name="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E"></a><h4 id="MULTI-GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E" class="sect4"><span class="enumeration_section">22.2.3 </span>Creating a CDB Resource Plan for Managing PDBs: Scenario
                  </h4>
                  <div>
                     <p>This scenario illustrates each of the steps involved in creating a CDB resource plan for individual PDBs.</p>
                     <div class="section">
                        <p>The scenario assumes that you want to create a CDB resource plan for a CDB named <code class="codeph">newcdb</code>. The plan includes a directive for each PDB. In this scenario, you also update the default directive and the AutoTask directive.
                        </p>
                        <p>The directives are defined using various procedures in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package. The attributes of each directive are defined using parameters in these procedures. <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACJAEDB" title="This table lists each directive parameter and provides a description of each directive parameter.">Table 22-5</a> describes the types of directives in the plan.
                        </p>
                        <div class="tblformal" id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACJAEDB">
                           <p class="titleintable">Table 22-5 Attributes for PDB Directives in a CDB Resource Plan</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Attributes for PDB Directives in a CDB Resource Plan" summary="This table lists each directive parameter and provides a description of each directive parameter." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d102832e3052">Directive Attribute</th>
                                    <th align="left" valign="bottom" width="38%" id="d102832e3055">Description</th>
                                    <th align="left" valign="bottom" width="28%" id="d102832e3058">See Also</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d102832e3063" headers="d102832e3052 ">
                                       <p><code class="codeph">shares</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3063 d102832e3055 ">
                                       <p>Resource allocation share for CPU and parallel execution server resources.</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3063 d102832e3058 ">
                                       <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" title="To allocate resources among PDBs, assign a share value to each PDB or performance profile. A higher share value results in more guaranteed resources for a PDB or the PDBs that use the performance profile.">Shares for Allocating Resources to PDBs</a>"</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d102832e3079" headers="d102832e3052 ">
                                       <p><code class="codeph">utilization_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3079 d102832e3055 ">
                                       <p>Resource utilization limit for CPU.</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3079 d102832e3058 ">
                                       <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile.">Utilization Limits for PDBs</a>"</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d102832e3095" headers="d102832e3052 ">
                                       <p><code class="codeph">parallel_server_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3095 d102832e3055 ">
                                       <p>Maximum percentage of parallel execution servers that a PDB can use before queuing parallel statements.</p>
                                       <p>When the <code class="codeph">parallel_server_limit</code> directive is specified for a PDB, the limit is the <code class="codeph">PARALLEL_SERVERS_TARGET</code> value of the CDB root multiplied by the value of the <code class="codeph">parallel_server_limit</code> parameter in the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure.
                                       </p>
                                       <p><span class="bold">Note:</span> Oracle recommends using the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter instead of the <code class="codeph">parallel_server_limit</code> directive in a CDB plan.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3095 d102832e3058 ">
                                       <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile.">Utilization Limits for PDBs</a>"</span></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 22-6</a> describes how the CDB resource plan allocates resources to its PDBs using the directive attributes described in <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACJAEDB" title="This table lists each directive parameter and provides a description of each directive parameter.">Table 22-5</a>.
                        </p>
                        <div class="tblformalwide" id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF">
                           <p class="titleintable">Table 22-6 Sample Directives for PDBs in a CDB Resource Plan</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Sample Directives for PDBs in a CDB Resource Plan" summary="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d102832e3157">PDB</th>
                                    <th align="left" valign="bottom" width="27%" id="d102832e3160">shares Directive</th>
                                    <th align="left" valign="bottom" width="27%" id="d102832e3163">utilization_limit Directive</th>
                                    <th align="left" valign="bottom" width="27%" id="d102832e3166">parallel_server_limit Directive</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e3171" headers="d102832e3157 ">
                                       <p><code class="codeph">salespdb</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3171 d102832e3160 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3171 d102832e3163 ">
                                       <p>Unlimited</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3171 d102832e3166 ">
                                       <p>Unlimited</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e3185" headers="d102832e3157 ">
                                       <p><code class="codeph">servicespdb</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3185 d102832e3160 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3185 d102832e3163 ">
                                       <p>Unlimited</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3185 d102832e3166 ">
                                       <p>Unlimited</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e3199" headers="d102832e3157 ">
                                       <p><code class="codeph">hrpdb</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3199 d102832e3160 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3199 d102832e3163 ">
                                       <p>70</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3199 d102832e3166 ">
                                       <p>70</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e3213" headers="d102832e3157 ">
                                       <p>Default</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3213 d102832e3160 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3213 d102832e3163 ">
                                       <p>50</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3213 d102832e3166 ">
                                       <p>50</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e3226" headers="d102832e3157 ">
                                       <p>AutoTask</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3226 d102832e3160 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3226 d102832e3163 ">
                                       <p>75</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3226 d102832e3166 ">
                                       <p>75</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>The <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs are more important than the other PDBs in the CDB. Therefore, they get a higher share (3), unlimited CPU utilization resource, and unlimited parallel execution server resource.
                        </p>
                        <p>The default directive applies to PDBs for which specific directives have not been defined. For this scenario, assume that the CDB has several PDBs that use the default directive. This scenario updates the default directive.</p>
                        <p>In addition, this scenario updates the AutoTask directive. The AutoTask directive applies to automatic maintenance tasks that are run in the root maintenance window.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__GUID-B1D3CCB7-977A-4CF4-80ED-936368A651E7">To create a CDB resource plan:</p>
                        <ol>
                           <li>
                              <p>Create a pending area using the <code class="codeph">CREATE_PENDING_AREA</code> procedure:
                              </p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();</code></pre></li>
                           <li>
                              <p>Create a CDB resource plan named <code class="codeph">newcdb_plan</code> using the <code class="codeph">CREATE_CDB_PLAN</code> procedure:
                              </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN(
    plan    =&gt; 'newcdb_plan',
    comment =&gt; 'CDB resource plan for newcdb');
END;
/</code></pre></li>
                           <li>
                              <p>Create the CDB resource plan directives for the PDBs using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. Each directive specifies how resources are allocated to a specific PDB.
                              </p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 22-6</a> describes the directives for the <code class="codeph">salespdb</code>, <code class="codeph">servicespdb</code>, and <code class="codeph">hrpdb</code> PDBs in this scenario. Run the following procedures to create these directives:
                              </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    pluggable_database    =&gt; 'salespdb', 
    shares                =&gt; 3, 
    utilization_limit     =&gt; 100,
    parallel_server_limit =&gt; 100);
END;
/

BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    pluggable_database    =&gt; 'servicespdb', 
    shares                =&gt; 3, 
    utilization_limit     =&gt; 100,
    parallel_server_limit =&gt; 100);
END;
/

BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    pluggable_database    =&gt; 'hrpdb', 
    shares                =&gt; 1, 
    utilization_limit     =&gt; 70,
    parallel_server_limit =&gt; 70);
END;
/
</code></pre><p>All other PDBs in this CDB use the default PDB directive.</p>
                           </li>
                           <li>
                              <p>If the current default CDB resource plan directive for PDBs does not meet your requirements, then update the directive using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure.
                              </p>
                              <p>The default directive applies to PDBs for which specific directives have not been defined. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.">The Default Directive for PDBs</a>"</span> for more information.
                              </p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 22-6</a> describes the default directive that PDBs use in this scenario. Run the following procedure to update the default directive:
                              </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_DEFAULT_DIRECTIVE(
    plan                      =&gt; 'newcdb_plan', 
    new_shares                =&gt; 1, 
    new_utilization_limit     =&gt; 50,
    new_parallel_server_limit =&gt; 50);
END;
/</code></pre></li>
                           <li>
                              <p>Validate the pending area using the <code class="codeph">VALIDATE_PENDING_AREA</code> procedure:
                              </p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();</code></pre></li>
                           <li>
                              <p>Submit the pending area using the <code class="codeph">SUBMIT_PENDING_AREA</code> procedure:
                              </p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">Managing CDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80" name="GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80"></a><h4 id="MULTI-GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80" class="sect4"><span class="enumeration_section">22.2.4 </span>Creating a CDB Resource Plan with PDB Performance Profiles
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to create a CDB resource plan for PDB performance profiles and define the directives for the plan. Each PDB that uses a profile adopts the CDB resource plan directive.
                     </p>
                     <div class="section">
                        <p>The general steps for creating a CDB resource plan with PDB performance profiles are the following:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Create the pending area using the <code class="codeph">CREATE_PENDING_AREA</code> procedure.</span></li>
                        <li><span>Create the CDB resource plan using the <code class="codeph">CREATE_CDB_PLAN</code> procedure.</span></li>
                        <li><span>Create directives for the PDB performance profiles using the <code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code> procedure.</span></li>
                        <li><span>(Optional) Update the default PDB directive using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure.</span></li>
                        <li><span>Validate the pending area using the <code class="codeph">VALIDATE_PENDING_AREA</code> procedure.</span></li>
                        <li><span>Submit the pending area using the <code class="codeph">SUBMIT_PENDING_AREA</code> procedure.</span></li>
                        <li><span>For each PDB that will use a profile, set the <code class="codeph">DB_PERFORMANCE_PROFILE</code> initialization parameter and specify the profile name. </span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">Managing CDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371" name="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371"></a><h4 id="MULTI-GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371" class="sect4"><span class="enumeration_section">22.2.5 </span>Creating a CDB Resource Plan for PDB Performance Profiles: Scenario
                  </h4>
                  <div>
                     <p>This scenario illustrates the steps involved in creating a CDB resource plan for PDB performance profiles. </p>
                     <div class="section"> 
                        <p> The scenario assumes that you want to create a CDB resource plan for a CDB named <code class="codeph">newcdb</code>. The plan includes a directive for each PDB performance profile. In this scenario, you also update the default directive and the AutoTask directive.
                        </p>
                        <p>In the CDB resource plan, you give each profile a name. In each PDB, you set the <code class="codeph">DB_PERFORMANCE_PROFILE</code> initialization parameter to specify which PDB performance profile the PDB uses.
                        </p>
                        <p>The directives are defined using various procedures in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package. The attributes of each directive are defined using parameters in these procedures. The following table describes the types of directives in the plan.
                        </p>
                        <div class="tblformal" id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACJAEDB">
                           <p class="titleintable">Table 22-7 Attributes for PDB Performance Profile Directives in a CDB Resource Plan</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Attributes for PDB Performance Profile Directives in a CDB Resource Plan" summary="This table lists each directive parameter and provides a description of each directive parameter." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d102832e3593">Directive Attribute</th>
                                    <th align="left" valign="bottom" width="38%" id="d102832e3596">Description</th>
                                    <th align="left" valign="bottom" width="29%" id="d102832e3599">See Also</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d102832e3603" headers="d102832e3593 ">
                                       <p><code class="codeph">shares</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3603 d102832e3596 ">
                                       <p>Resource allocation share for CPU and parallel execution server resources.</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d102832e3603 d102832e3599 "><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" title="To allocate resources among PDBs, assign a share value to each PDB or performance profile. A higher share value results in more guaranteed resources for a PDB or the PDBs that use the performance profile.">Shares for Allocating Resources to PDBs</a>"</span></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d102832e3618" headers="d102832e3593 ">
                                       <p><code class="codeph">utilization_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3618 d102832e3596 ">
                                       <p>Resource utilization limit for CPU.</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d102832e3618 d102832e3599 "><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile.">Utilization Limits for PDBs</a>"</span></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d102832e3633" headers="d102832e3593 ">
                                       <p><code class="codeph">parallel_server_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3633 d102832e3596 ">
                                       <p>Maximum percentage of parallel execution servers that a PDB can use.</p>
                                       <p>When the <code class="codeph">parallel_server_limit</code> directive is specified for a PDB performance profile, the limit is the value of the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter setting in the CDB root multiplied by the value of the <code class="codeph">parallel_server_limit</code> parameter in the <code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code> procedure.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d102832e3633 d102832e3599 ">
                                       <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile.">Utilization Limits for PDBs</a>"</span></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>The following table describes how the CDB resource plan allocates resources to its PDB performance profiles using the directive attributes described in <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACJAEDB" title="This table lists each directive parameter and provides a description of each directive parameter.">Table 22-7</a>.
                        </p>
                        <div class="tblformalwide" id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACBBBCF">
                           <p class="titleintable">Table 22-8 Sample Directives for PDB Performance Profiles in a CDB Resource Plan</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Sample Directives for PDB Performance Profiles in a CDB Resource Plan" summary="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="16%" id="d102832e3681">PDB</th>
                                    <th align="left" valign="bottom" width="25%" id="d102832e3684">shares Directive</th>
                                    <th align="left" valign="bottom" width="28%" id="d102832e3687">utilization_limit Directive</th>
                                    <th align="left" valign="bottom" width="31%" id="d102832e3690">parallel_server_limit Directive</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d102832e3695" headers="d102832e3681 ">
                                       <p><code class="codeph">gold</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d102832e3695 d102832e3684 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3695 d102832e3687 ">
                                       <p>Unlimited</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d102832e3695 d102832e3690 ">
                                       <p>Unlimited</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d102832e3709" headers="d102832e3681 ">
                                       <p><code class="codeph">silver</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d102832e3709 d102832e3684 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3709 d102832e3687 ">
                                       <p>40</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d102832e3709 d102832e3690 ">
                                       <p>40</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d102832e3723" headers="d102832e3681 ">
                                       <p><code class="codeph">bronze</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d102832e3723 d102832e3684 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3723 d102832e3687 ">
                                       <p>20</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d102832e3723 d102832e3690 ">
                                       <p>20</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d102832e3737" headers="d102832e3681 ">
                                       <p>Default</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d102832e3737 d102832e3684 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3737 d102832e3687 ">
                                       <p>10</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d102832e3737 d102832e3690 ">
                                       <p>10</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d102832e3750" headers="d102832e3681 ">
                                       <p>AutoTask</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d102832e3750 d102832e3684 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3750 d102832e3687 ">
                                       <p>60</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d102832e3750 d102832e3690 ">
                                       <p>60</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>The default directive applies to PDBs for which specific directives have not been defined. For this scenario, assume that the CDB has several PDBs that use the default directive. This scenario updates the default directive.</p>
                        <p>In addition, this scenario updates the AutoTask directive. The AutoTask directive applies to automatic maintenance tasks that are run in the root maintenance window.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__GUID-FBD9ECAF-88A7-4963-B857-25B139057C63">To create a CDB resource plan for PDB performance profiles:</p>
                        <ol>
                           <li>
                              <p>For each PDB that will use a profile, set the <code class="codeph">DB_PERFORMANCE_PROFILE</code> initialization parameter to the name of the profile that the PDB will use.
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>Run an <code class="codeph">ALTER SYSTEM</code> statement to set the parameter.
                                    </p>
                                    <p>For example, with the PDB as the current container, run the following SQL statement:</p><pre class="pre codeblock"><code>ALTER SYSTEM SET DB_PERFORMANCE_PROFILE=gold SCOPE=spfile;</code></pre></li>
                                 <li>
                                    <p>Close the PDB:</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE CLOSE IMMEDIATE;</code></pre></li>
                                 <li>
                                    <p>Open the PDB:</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE OPEN;</code></pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>Create a pending area using the <code class="codeph">CREATE_PENDING_AREA</code> procedure:
                              </p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();</code></pre></li>
                           <li>
                              <p>Create a CDB resource plan named <code class="codeph">newcdb_plan</code> using the <code class="codeph">CREATE_CDB_PLAN</code> procedure:
                              </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN(
    plan    =&gt; 'newcdb_plan',
    comment =&gt; 'CDB resource plan for newcdb');
END;
/</code></pre></li>
                           <li>
                              <p>Create the CDB resource plan directives for the PDBs using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. Each directive specifies how resources are allocated to a specific PDB.
                              </p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 22-6</a> describes the directives for the <code class="codeph">gold</code>, <code class="codeph">silver</code>, and <code class="codeph">bronze</code> profiles in this scenario. Run the following procedures to create these directives:
                              </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    profile               =&gt; 'gold', 
    shares                =&gt; 3, 
    utilization_limit     =&gt; 100,
    parallel_server_limit =&gt; 100);
END;
/

BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    profile               =&gt; 'silver', 
    shares                =&gt; 2, 
    utilization_limit     =&gt; 40,
    parallel_server_limit =&gt; 40);
END;
/

BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    profile               =&gt; 'bronze', 
    shares                =&gt; 1, 
    utilization_limit     =&gt; 20,
    parallel_server_limit =&gt; 20);
END;
/
</code></pre><p>All other PDBs in this CDB use the default PDB directive.</p>
                           </li>
                           <li>
                              <p>If the current default CDB resource plan directive for PDBs does not meet your requirements, then update the directive using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure.
                              </p>
                              <p>The default directive applies to PDBs for which specific directives have not been defined.</p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 22-6</a> describes the default directive that PDBs use in this scenario. Run the following procedure to update the default directive:
                              </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_DEFAULT_DIRECTIVE(
    plan                      =&gt; 'newcdb_plan', 
    new_shares                =&gt; 1, 
    new_utilization_limit     =&gt; 10,
    new_parallel_server_limit =&gt; 10);
END;
/</code></pre></li>
                           <li>
                              <p>Validate the pending area using the <code class="codeph">VALIDATE_PENDING_AREA</code> procedure:
                              </p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();</code></pre></li>
                           <li>
                              <p>Submit the pending area using the <code class="codeph">SUBMIT_PENDING_AREA</code> procedure:
                              </p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__GUID-4D81CAFE-2132-4F3D-BF23-916FDBE5FA4A">
                        <p class="notep1">See Also:</p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.">The Default Directive for PDBs</a>"</span></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">Managing CDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13803"></a><div class="props_rev_3"><a id="GUID-3E05500C-C8C0-4E99-B753-133515175437" name="GUID-3E05500C-C8C0-4E99-B753-133515175437"></a><h4 id="MULTI-GUID-3E05500C-C8C0-4E99-B753-133515175437" class="sect4"><span class="enumeration_section">22.2.6 </span>Enabling a CDB Resource Plan
                  </h4>
                  <div>
                     <p>You enable the Resource Manager for a CDB by setting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the root.
                     </p>
                     <div class="section">
                        <p>This parameter specifies the top plan, which is the plan to be used for the current CDB instance. If no plan is specified with this parameter, then the Resource Manager is not enabled.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E05500C-C8C0-4E99-B753-133515175437__GUID-B570282E-B58C-4020-8C61-91D65C3F5C4D">Prerequisites</p>
                        <p>Before enabling a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E05500C-C8C0-4E99-B753-133515175437__GUID-354B4FCB-A05A-47F3-A6FA-FFB3136DC323">To enable a CDB resource plan:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the root.</p>
                           </li>
                           <li>
                              <p>Perform one of the following actions:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use an <code class="codeph">ALTER SYSTEM</code> statement to set the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter to the CDB resource plan.
                                    </p>
                                    <p>The following example sets the CDB resource plan to <code class="codeph">newcdb_plan</code> using an <code class="codeph">ALTER SYSTEM</code> statement:
                                    </p><pre class="pre codeblock"><code>ALTER SYSTEM SET RESOURCE_MANAGER_PLAN = 'newcdb_plan';
</code></pre></li>
                                 <li>
                                    <p>In a text initialization parameter file, set the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter to the CDB resource plan, and restart the CDB.
                                    </p>
                                    <p>The following example sets the CDB resource plan to <code class="codeph">newcdb_plan</code> in an initialization parameter file:
                                    </p><pre class="pre codeblock"><code>RESOURCE_MANAGER_PLAN = 'newcdb_plan'
</code></pre></li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3E05500C-C8C0-4E99-B753-133515175437__GUID-E53FEF9C-527E-493B-89ED-EB018DD4197C">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../admin/oracle-scheduler-concepts.html#ADMIN-GUID-6B8C0335-D36B-44D3-95BC-82FA2141D967" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn how to schedule a CDB resource plan change with Oracle Scheduler
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">Managing CDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13816"></a><div class="props_rev_3"><a id="GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" name="GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697"></a><h4 id="MULTI-GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" class="sect4"><span class="enumeration_section">22.2.7 </span>Modifying a CDB Resource Plan
                  </h4>
                  <div>
                     <p>Modifying a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-548307C2-72BE-436E-B843-4419CD77540D">Updating a CDB Resource Plan</a><br>You can update a CDB resource plan to change its comment using the <code class="codeph">UPDATE_CDB_PLAN</code> procedure.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3">Managing CDB Resource Plan Directives for a PDB</a><br>You can create, update, and delete CDB resource plan directives for a PDB.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71">Managing CDB Resource Plan Directives for a PDB Performance Profile</a><br>You can create, update, and delete CDB resource plan directives for a PDB performance profile. 
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD">Updating the Default Directive for PDBs in a CDB Resource Plan</a><br>You can update the default directive for PDBs in a CDB resource plan using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure. The default directive applies to PDBs for which specific directives have not been defined.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0">Updating the Default Directive for Maintenance Tasks in a CDB Resource Plan</a><br>You can update the AutoTask directive in a CDB resource plan using the <code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code> procedure. The AutoTask directive applies to automatic maintenance tasks that are run in the root maintenance window.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB">Deleting a CDB Resource Plan</a><br>You can delete a CDB resource plan using the <code class="codeph">DELETE_CDB_PLAN</code> procedure.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">Managing CDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13817"></a><div class="props_rev_3"><a id="GUID-548307C2-72BE-436E-B843-4419CD77540D" name="GUID-548307C2-72BE-436E-B843-4419CD77540D"></a><h5 id="MULTI-GUID-548307C2-72BE-436E-B843-4419CD77540D" class="sect5"><span class="enumeration_section">22.2.7.1 </span>Updating a CDB Resource Plan
                     </h5>
                     <div>
                        <p>You can update a CDB resource plan to change its comment using the <code class="codeph">UPDATE_CDB_PLAN</code> procedure.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-548307C2-72BE-436E-B843-4419CD77540D__GUID-638B4EB2-BF6A-41D7-8358-D09EB531BE4D">Prerequisites</p>
                           <p>Before updating a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-548307C2-72BE-436E-B843-4419CD77540D__GUID-15940CB8-1480-49F8-9277-8672E08BC0C1">To update a CDB resource plan:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, ensure that the current container is the root.</p>
                              </li>
                              <li>
                                 <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                              <li>
                                 <p>Run the <code class="codeph">UPDATE_CDB_PLAN</code> procedure, and enter a new comment in the <code class="codeph">new_comment</code> parameter.
                                 </p>
                                 <p>For example, the following procedure changes the comment for the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                 </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_PLAN(
    plan        =&gt; 'newcdb_plan',
    new_comment =&gt; 'CDB plan for PDBs in newcdb');
END;
/
</code></pre></li>
                              <li>
                                 <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                              <li>
                                 <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-548307C2-72BE-436E-B843-4419CD77540D__GUID-D9FFF20D-39F2-489C-8529-5912B530D2DF">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="Modifying a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.">Modifying a CDB Resource Plan</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" name="GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3"></a><h5 id="MULTI-GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" class="sect5"><span class="enumeration_section">22.2.7.2 </span>Managing CDB Resource Plan Directives for a PDB
                     </h5>
                     <div>
                        <p>You can create, update, and delete CDB resource plan directives for a PDB.</p>
                        <p>This section contains the following topics:</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D">Creating New CDB Resource Plan Directives for a PDB</a><br>When you create a PDB in a CDB, you can create a CDB resource plan directive for the PDB using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the new PDB.
                           </li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-FF00B9A0-293F-4544-9121-104E53F898B9">Updating CDB Resource Plan Directives for a PDB</a><br>You can update the CDB resource plan directive for a PDB using the <code class="codeph">UPDATE_CDB_PLAN_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the PDB.
                           </li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119">Deleting CDB Resource Plan Directives for a PDB</a><br>You can delete the CDB resource plan directive for a PDB using the <code class="codeph">DELETE_CDB_PLAN_DIRECTIVE</code> procedure.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="Modifying a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.">Modifying a CDB Resource Plan</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN13819"></a><div class="props_rev_3"><a id="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D" name="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D"></a><h6 id="MULTI-GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D" class="sect6"><span class="enumeration_section">22.2.7.2.1 </span>Creating New CDB Resource Plan Directives for a PDB
                        </h6>
                        <div>
                           <p>When you create a PDB in a CDB, you can create a CDB resource plan directive for the PDB using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the new PDB.
                           </p>
                           <div class="section">
                              <p class="subhead3" id="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D__GUID-EC5C95B8-5B27-448A-B4FA-E4CA2996343E">Prerequisites</p>
                              <p>Before creating a new CDB resource plan directive for a PDB, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D__GUID-FBD94788-E2E5-4559-8AFE-A94C5CF2C133">To create a new CDB resource plan directive for a PDB:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure, and specify the appropriate values for the new PDB.
                                    </p>
                                    <p>For example, the following procedure allocates resources to a PDB named <code class="codeph">operpdb</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    pluggable_database    =&gt; 'operpdb', 
    shares                =&gt; 1, 
    utilization_limit     =&gt; 20,
    parallel_server_limit =&gt; 30);
END;
/
</code></pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D__GUID-99D4A9C7-DEAF-4FEE-A287-7D0E7B7E8454">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" title="You can create, update, and delete CDB resource plan directives for a PDB.">Managing CDB Resource Plan Directives for a PDB</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13821"></a><div class="props_rev_3"><a id="GUID-FF00B9A0-293F-4544-9121-104E53F898B9" name="GUID-FF00B9A0-293F-4544-9121-104E53F898B9"></a><h6 id="MULTI-GUID-FF00B9A0-293F-4544-9121-104E53F898B9" class="sect6"><span class="enumeration_section">22.2.7.2.2 </span>Updating CDB Resource Plan Directives for a PDB
                        </h6>
                        <div>
                           <p>You can update the CDB resource plan directive for a PDB using the <code class="codeph">UPDATE_CDB_PLAN_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the PDB.
                           </p>
                           <div class="section">
                              <p class="subhead3" id="GUID-FF00B9A0-293F-4544-9121-104E53F898B9__GUID-98C95338-7FC6-4692-B2AC-75C1CF7C99E3">Prerequisites</p>
                              <p>Before updating a CDB resource plan directive for a PDB, ensure that you meet the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-FF00B9A0-293F-4544-9121-104E53F898B9__GUID-05DC8C3D-8C84-4F5A-A991-D26646E2BBDB">To update a CDB resource plan directive for a PDB:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">UPDATE_CDB_PLAN_DIRECTIVE</code> procedure, and specify the new resource allocation values for the PDB.
                                    </p>
                                    <p>For example, the following procedure updates the resource allocation to a PDB named <code class="codeph">operpdb</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_PLAN_DIRECTIVE(
    plan                      =&gt; 'newcdb_plan', 
    pluggable_database        =&gt; 'operpdb', 
    new_shares                =&gt; 1, 
    new_utilization_limit     =&gt; 10,
    new_parallel_server_limit =&gt; 20);
END;
/
</code></pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-FF00B9A0-293F-4544-9121-104E53F898B9__GUID-01B9F722-B565-4FE4-93DC-6C9BDFDAB931">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" title="You can create, update, and delete CDB resource plan directives for a PDB.">Managing CDB Resource Plan Directives for a PDB</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13823"></a><div class="props_rev_3"><a id="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119" name="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119"></a><h6 id="MULTI-GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119" class="sect6"><span class="enumeration_section">22.2.7.2.3 </span>Deleting CDB Resource Plan Directives for a PDB
                        </h6>
                        <div>
                           <p>You can delete the CDB resource plan directive for a PDB using the <code class="codeph">DELETE_CDB_PLAN_DIRECTIVE</code> procedure.
                           </p>
                           <div class="section">
                              <p>You might delete the directive for a PDB if you unplug or drop the PDB. However, you can retain the directive, and if the PDB is plugged into the CDB in the future, the existing directive applies to the PDB.</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119__GUID-3AD3BE53-6404-4DDA-93D9-EC509AE19CC5">Prerequisites</p>
                              <p>Before deleting a CDB resource plan directive for a PDB, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119__GUID-C9D7391B-38B8-4A28-B789-F400CDD6D51A">To delete a CDB resource plan directive for a PDB:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">DELETE_CDB_PLAN_DIRECTIVE</code> procedure, and specify the CDB resource plan and the PDB.
                                    </p>
                                    <p>For example, the following procedure deletes the directive for a PDB named <code class="codeph">operpdb</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.DELETE_CDB_PLAN_DIRECTIVE(
    plan               =&gt; 'newcdb_plan', 
    pluggable_database =&gt; 'operpdb');
END;
/
</code></pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119__GUID-2DAC6ADA-8ECC-4B7E-9800-3CC6A3823AF5">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" title="You can create, update, and delete CDB resource plan directives for a PDB.">Managing CDB Resource Plan Directives for a PDB</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" name="GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71"></a><h5 id="MULTI-GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" class="sect5"><span class="enumeration_section">22.2.7.3 </span>Managing CDB Resource Plan Directives for a PDB Performance Profile
                     </h5>
                     <div>
                        <p>You can create, update, and delete CDB resource plan directives for a PDB performance profile. </p>
                        <p>This section contains the following topics:</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D">Creating New CDB Resource Plan Directives for a PDB Performance Profile</a><br>You can create a CDB resource plan directive for the a new PDB performance profile using the <code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the all PDBs that use the new profile.
                           </li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91">Updating CDB Resource Plan Directives for a PDB Performance Profile</a><br>Update the CDB resource plan directive for a PDB performance profile using the <code class="codeph">UPDATE_CDB_PROFILE_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the PDBs that use the PDB performance profile.
                           </li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740">Deleting CDB Resource Plan Directives for a PDB Performance Profile</a><br>You can delete the CDB resource plan directive for a PDB performance profile using the <code class="codeph">DELETE_CDB_PROFILE_DIRECTIVE</code> procedure.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="Modifying a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.">Modifying a CDB Resource Plan</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="props_rev_3"><a id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D" name="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D"></a><h6 id="MULTI-GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D" class="sect6"><span class="enumeration_section">22.2.7.3.1 </span>Creating New CDB Resource Plan Directives for a PDB Performance Profile
                        </h6>
                        <div>
                           <p>You can create a CDB resource plan directive for the a new PDB performance profile using the <code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the all PDBs that use the new profile.
                           </p>
                           <div class="section">
                              <p class="subhead3" id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D__GUID-75EE72AF-F10D-4087-8A64-1E9E9A50FB85">Prerequisites</p>
                              <p>Before creating a new CDB resource plan directive for a PDB performance profile, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D__GUID-4128575B-04CF-40FA-8355-734B7591ABB6">To create a new CDB resource plan directive for a PDB performance profile:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code> procedure, and specify the appropriate values for the new PDB performance profile.
                                    </p>
                                    <p>For example, the following procedure allocates resources to a PDB performance profile named <code class="codeph">copper</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    profile               =&gt; 'copper', 
    shares                =&gt; 1, 
    utilization_limit     =&gt; 20,
    parallel_server_limit =&gt; 30);
END;
/
</code></pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                              </ol>
                              <div class="infoboxnote" id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D__GUID-F8FC639F-008F-4319-9202-C74B38EA1AC3">
                                 <p class="notep1">Note:</p>For a PDB to use the new profile, the PDB must have the <code class="codeph">DB_PERFORMANCE_PROFILE</code> initialization parameter set to the profile name. 
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D__GUID-99D4A9C7-DEAF-4FEE-A287-7D0E7B7E8454">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" title="You can create, update, and delete CDB resource plan directives for a PDB performance profile.">Managing CDB Resource Plan Directives for a PDB Performance Profile</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91" name="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91"></a><h6 id="MULTI-GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91" class="sect6"><span class="enumeration_section">22.2.7.3.2 </span>Updating CDB Resource Plan Directives for a PDB Performance Profile
                        </h6>
                        <div>
                           <p>Update the CDB resource plan directive for a PDB performance profile using the <code class="codeph">UPDATE_CDB_PROFILE_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the PDBs that use the PDB performance profile.
                           </p>
                           <div class="section">
                              <p>Before updating a CDB resource plan directive for a PDB performance profile, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91__GUID-B6B0E86B-C562-49E4-B1D4-13022C0B4797">To update a CDB resource plan directive for a PDB performance profile:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">UPDATE_CDB_PROFILE_DIRECTIVE</code> procedure, and specify the new resource allocation values for the PDB performance profile.
                                    </p>
                                    <p>For example, the following procedure updates the resource allocation for a PDB performance profile named <code class="codeph">copper</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_PROFILE_DIRECTIVE(
    plan                      =&gt; 'newcdb_plan', 
    profile                   =&gt; 'copper', 
    new_shares                =&gt; 1, 
    new_utilization_limit     =&gt; 10,
    new_parallel_server_limit =&gt; 20);
END;
/
</code></pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91__GUID-01B9F722-B565-4FE4-93DC-6C9BDFDAB931">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" title="You can create, update, and delete CDB resource plan directives for a PDB performance profile.">Managing CDB Resource Plan Directives for a PDB Performance Profile</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740" name="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740"></a><h6 id="MULTI-GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740" class="sect6"><span class="enumeration_section">22.2.7.3.3 </span>Deleting CDB Resource Plan Directives for a PDB Performance Profile
                        </h6>
                        <div>
                           <p>You can delete the CDB resource plan directive for a PDB performance profile using the <code class="codeph">DELETE_CDB_PROFILE_DIRECTIVE</code> procedure.
                           </p>
                           <div class="section">
                              <p>If no PDBs use a performance profile, then you might delete the directive for the profile.</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740__GUID-27C64E43-5832-4A7D-9639-CF0E534951FC">Prerequisites</p>
                              <p>Before deleting a CDB resource plan directive for a PDB performance profile, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740__GUID-C9D7391B-38B8-4A28-B789-F400CDD6D51A">To delete a CDB resource plan directive for a PDB performance profile:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">DELETE_CDB_PROFILE_DIRECTIVE</code> procedure, and specify the CDB resource plan and the PDB performance profile.
                                    </p>
                                    <p>For example, the following procedure deletes the directive for a PDB named <code class="codeph">operpdb</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.DELETE_CDB_PLAN_DIRECTIVE(
    plan    =&gt; 'newcdb_plan', 
    profile =&gt; 'operpdb');
END;
/
</code></pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740__GUID-2DAC6ADA-8ECC-4B7E-9800-3CC6A3823AF5">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" title="You can create, update, and delete CDB resource plan directives for a PDB performance profile.">Managing CDB Resource Plan Directives for a PDB Performance Profile</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN13827"></a><div class="props_rev_3"><a id="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD" name="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD"></a><h5 id="MULTI-GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD" class="sect5"><span class="enumeration_section">22.2.7.4 </span>Updating the Default Directive for PDBs in a CDB Resource Plan
                     </h5>
                     <div>
                        <p>You can update the default directive for PDBs in a CDB resource plan using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure. The default directive applies to PDBs for which specific directives have not been defined.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD__GUID-EB48E77C-0839-46FF-BC98-E47D97DF4C06">Prerequisites</p>
                           <p>Before updating the default directive for PDBs in a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD__GUID-5015165D-71A5-40B8-8BAB-355E98C3D14A">To update the default directive for PDBs in a CDB resource plan:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, ensure that the current container is the root.</p>
                              </li>
                              <li>
                                 <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                              <li>
                                 <p>Run the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure, and specify the appropriate default resource allocation values.
                                 </p>
                                 <p>For example, the following procedure updates the default directive for PDBs in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                 </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_DEFAULT_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    new_shares            =&gt; 2, 
    new_utilization_limit =&gt; 40);
END;
/
</code></pre></li>
                              <li>
                                 <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                              <li>
                                 <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD__GUID-89D30DBF-2D08-4785-AAA6-6C834A6C071B">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.">The Default Directive for PDBs</a>"</span> for more information.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                              </li>
                              <li>
                                 <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="Modifying a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.">Modifying a CDB Resource Plan</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13829"></a><div class="props_rev_3"><a id="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0" name="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0"></a><h5 id="MULTI-GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0" class="sect5"><span class="enumeration_section">22.2.7.5 </span>Updating the Default Directive for Maintenance Tasks in a CDB Resource Plan
                     </h5>
                     <div>
                        <p>You can update the AutoTask directive in a CDB resource plan using the <code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code> procedure. The AutoTask directive applies to automatic maintenance tasks that are run in the root maintenance window.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0__GUID-FB19C916-815C-4100-9E3D-3930F15A95C4">Prerequisites</p>
                           <p>Before updating the default directive for maintenance tasks in a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0__GUID-383E3D9E-9EE3-4DB1-B1C2-D3ED62B1ECE1">To update the AutoTask directive for maintenance tasks in a CDB resource plan:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, ensure that the current container is the root.</p>
                              </li>
                              <li>
                                 <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                              <li>
                                 <p>Run the <code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code> procedure, and specify the appropriate AutoTask resource allocation values.
                                 </p>
                                 <p>For example, the following procedure updates the AutoTask directive for maintenance tasks in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                 </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_AUTOTASK_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    new_shares            =&gt; 2, 
    new_utilization_limit =&gt; 60);
END;
/
</code></pre></li>
                              <li>
                                 <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                              <li>
                                 <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0__GUID-97E3869B-F4C9-41C6-9652-13FACF286525">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="Modifying a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.">Modifying a CDB Resource Plan</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13825"></a><div class="props_rev_3"><a id="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB" name="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB"></a><h5 id="MULTI-GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB" class="sect5"><span class="enumeration_section">22.2.7.6 </span>Deleting a CDB Resource Plan
                     </h5>
                     <div>
                        <p>You can delete a CDB resource plan using the <code class="codeph">DELETE_CDB_PLAN</code> procedure.
                        </p>
                        <div class="section">
                           <p>The resource plan must be disabled. You might delete a CDB resource plan if the plan is no longer needed. You can enable a different CDB resource plan, or you can disable Resource Manager for the CDB.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB__GUID-33920065-F694-4F91-97D7-2AB3BE3221D1">Prerequisites</p>
                           <p>Before deleting a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB__GUID-474611AA-0182-4D48-A2ED-00C1A0EEBB42">To delete a CDB resource plan:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, ensure that the current container is the root.</p>
                              </li>
                              <li>
                                 <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                              <li>
                                 <p>Run the <code class="codeph">DELETE_CDB_PLAN</code> procedure, and specify the CDB resource plan.
                                 </p>
                                 <p>For example, the following procedure deletes the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                 </p><pre class="pre codeblock"><code>BEGIN
  DBMS_RESOURCE_MANAGER.DELETE_CDB_PLAN(
    plan =&gt; 'newcdb_plan');
END;
/
</code></pre></li>
                              <li>
                                 <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                              <li>
                                 <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB__GUID-784F2FE3-7890-472F-AF92-C51B9C9DDDA7">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                              </li>
                              <li>
                                 <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E05500C-C8C0-4E99-B753-133515175437" title="You enable the Resource Manager for a CDB by setting the RESOURCE_MANAGER_PLAN initialization parameter in the root.">Enabling a CDB Resource Plan</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386" title="Disable the Resource Manager for a CDB by unsetting the RESOURCE_MANAGER_PLAN initialization parameter in the CDB root.">Disabling a CDB Resource Plan</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="Modifying a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.">Modifying a CDB Resource Plan</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13805"></a><div class="props_rev_3"><a id="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386" name="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386"></a><h4 id="MULTI-GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386" class="sect4"><span class="enumeration_section">22.2.8 </span>Disabling a CDB Resource Plan
                  </h4>
                  <div>
                     <p>Disable the Resource Manager for a CDB by unsetting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the CDB root.
                     </p>
                     <div class="section">
                        <p>A CDB resource plan that specifies shares or utilization limits for PDBs is required to enable CPU management, both between PDBs and within a PDB. If a resource plan with shares or utilization limits is enabled for a PDB, and if the CDB resource plan is not specified, then the CDB resource plan is set to <code class="codeph">DEFAULT_CDB_PLAN</code>. This setting gives equal shares to all PDBs and specifies no utilization limits. To disable CPU resource management throughout the CDB, set <code class="codeph">RESOURCE_MANAGER_PLAN</code> to <code class="codeph">ORA$INTERNAL_CDB_PLAN</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386__GUID-A23864A7-59C4-42BD-864C-CE6BC6D9AD46">Prerequisites</p>
                        <p>Before disabling a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386__GUID-71716041-8D3F-4193-B63D-095CF6437C10">To disable a CDB resource plan:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the root.</p>
                           </li>
                           <li>
                              <p>Perform one of the following actions:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use an <code class="codeph">ALTER SYSTEM</code> statement to unset the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter for the CDB.
                                    </p>
                                    <p>The following example unsets the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter using an <code class="codeph">ALTER SYSTEM</code> statement:
                                    </p><pre class="pre codeblock"><code>ALTER SYSTEM SET RESOURCE_MANAGER_PLAN = '';
</code></pre></li>
                                 <li>
                                    <p>In an initialization parameter file, unset the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter, and restart the CDB.
                                    </p>
                                    <p>The following example unsets the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in an initialization parameter file:
                                    </p><pre class="pre codeblock"><code>RESOURCE_MANAGER_PLAN = 
</code></pre></li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386__GUID-2DAC6ADA-8ECC-4B7E-9800-3CC6A3823AF5">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-B2AC2F0B-F55E-40CD-AF37-A09E31BAA732" title="You can shut down a CDB instance in the same way that you shut down a non-CDB instance.">Shutting Down a CDB Instance</a>"</span> 
                              </p>
                           </li>
                           <li>
                              <p><a href="../admin/starting-up-and-shutting-down.html#ADMIN-GUID-203404B5-5157-4F29-A241-B8ABC4753819" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about starting up a database
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">Managing CDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13833"></a><div class="props_rev_3"><a id="GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172" name="GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172"></a><h4 id="MULTI-GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172" class="sect4"><span class="enumeration_section">22.2.9 </span>Viewing Information About Plans and Directives in a CDB
                  </h4>
                  <div>
                     <p>You can view information about CDB resource plans, CDB resource plan directives, and predefined resource plans in a CDB.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-D9CBC576-4C49-4C47-9328-937E81409C0D">Viewing CDB Resource Plans</a><br>An example illustrates using the <code class="codeph">DBA_CDB_RSRC_PLANS</code> view to display all CDB resource plans defined in the CDB.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-E89C4503-9DAB-4600-B406-01AAC01F4734">Viewing CDB Resource Plan Directives</a><br>An example illustrates using the <code class="codeph">DBA_CDB_RSRC_PLAN_DIRECTIVES</code> view to display all directives defined in all CDB resource plans in the CDB.
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172__GUID-E5A9CF45-8772-45D3-B46A-3DFE5DC35800">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-9CF57A7E-CCE3-4F80-9E21-29AF9B2283F0" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about monitoring Oracle Database Resource Manager
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">Managing CDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13834"></a><div class="props_rev_3"><a id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D" name="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D"></a><h5 id="MULTI-GUID-D9CBC576-4C49-4C47-9328-937E81409C0D" class="sect5"><span class="enumeration_section">22.2.9.1 </span>Viewing CDB Resource Plans
                     </h5>
                     <div>
                        <p>An example illustrates using the <code class="codeph">DBA_CDB_RSRC_PLANS</code> view to display all CDB resource plans defined in the CDB.
                        </p>
                        <div class="section">
                           <p>The <code class="codeph">DEFAULT_CDB_PLAN</code> is a default CDB plan that is supplied with Oracle Database. You can use this default plan if it meets your requirements.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D__GUID-6433E6A8-1885-4925-9068-F9DDD31AD3CA">To view CDB resource plans:</p>
                           <ol>
                              <li>
                                 <p>Start SQL*Plus or SQL Developer, and log in to the CDB root.</p>
                              </li>
                              <li>
                                 <p>Run the following query:</p><pre class="pre codeblock"><code>COLUMN PLAN FORMAT A30
COLUMN STATUS FORMAT A10
COLUMN COMMENTS FORMAT A35
 
SELECT PLAN, STATUS, COMMENTS 
FROM   DBA_CDB_RSRC_PLANS 
ORDER BY PLAN;
</code></pre><p>Your output looks similar to the following:</p><pre class="pre codeblock"><code>PLAN                           STATUS     COMMENTS
------------------------------ ---------- -----------------------------------
DEFAULT_CDB_PLAN                          Default CDB plan
DEFAULT_MAINTENANCE_PLAN                  Default CDB maintenance plan
NEWCDB_PLAN                               CDB plan for PDBs in newcdb
ORA$INTERNAL_CDB_PLAN                     Internal CDB plan
</code></pre></li>
                           </ol>
                           <div class="infoboxnote" id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D__GUID-9EC6EFBA-B90B-42B9-8376-0D38D88BD4F2">
                              <p class="notep1">Note:</p>
                              <p>Plans in the pending area have a status of <code class="codeph">PENDING</code>. Plans in the pending area are being edited. Any plan that is not in the pending area has a <code class="codeph">NULL</code> status.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D__GUID-81E80ABD-1851-4811-8538-830AB6439030">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172" title="You can view information about CDB resource plans, CDB resource plan directives, and predefined resource plans in a CDB.">Viewing Information About Plans and Directives in a CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13835"></a><div class="props_rev_3"><a id="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734" name="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734"></a><h5 id="MULTI-GUID-E89C4503-9DAB-4600-B406-01AAC01F4734" class="sect5"><span class="enumeration_section">22.2.9.2 </span>Viewing CDB Resource Plan Directives
                     </h5>
                     <div>
                        <p>An example illustrates using the <code class="codeph">DBA_CDB_RSRC_PLAN_DIRECTIVES</code> view to display all directives defined in all CDB resource plans in the CDB.
                        </p>
                        <div class="section">
                           <p>The <code class="codeph">DEFAULT_CDB_PLAN</code> is a default CDB plan that is supplied with Oracle Database. With <code class="codeph">DEFAULT_CDB_PLAN</code>, every PDB has 1 share and a utilization limit of 100. You can use this default plan if it meets your requirements. Note that <code class="codeph">ORA$DEFAULT_PDB_DIRECTIVE</code> is the default directive for PDBs. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734__GUID-357C8979-4C49-4EE4-93A1-7FB07798BCA9">To view CDB resource plan directives:</p>
                           <ol>
                              <li>
                                 <p>Start SQL*Plus or SQL Developer, and log in to the CDB root.</p>
                              </li>
                              <li>
                                 <p>Run the following query:</p><pre class="pre codeblock"><code>COLUMN PLAN HEADING 'Plan' FORMAT A24
COLUMN PLUGGABLE_DATABASE HEADING 'Pluggable Database' FORMAT A25
COLUMN SHARES HEADING 'Shares' FORMAT 999
COLUMN UTILIZATION_LIMIT HEADING 'Utilization|Limit' FORMAT 999
COLUMN PARALLEL_SERVER_LIMIT HEADING 'Parallel|Server|Limit' FORMAT 999
 
SELECT PLAN, 
       PLUGGABLE_DATABASE, 
       SHARES, 
       UTILIZATION_LIMIT,
       PARALLEL_SERVER_LIMIT
  FROM DBA_CDB_RSRC_PLAN_DIRECTIVES
  ORDER BY PLAN;
</code></pre><p>Your output looks similar to the following: </p><pre class="pre codeblock"><code>                                                                      Parallel 
                                                          Utilization   Server 
Plan                     Pluggable Database        Shares       Limit    Limit  
------------------------ ------------------------- ------ ----------- -------- 
DEFAULT_CDB_PLAN         ORA$DEFAULT_PDB_DIRECTIVE      1         100      100
DEFAULT_CDB_PLAN         ORA$AUTOTASK                              90      100
DEFAULT_MAINTENANCE_PLAN ORA$AUTOTASK                              90      100
DEFAULT_MAINTENANCE_PLAN ORA$DEFAULT_PDB_DIRECTIVE      1         100      100
NEWCDB_PLAN              HRPDB                          1          70       70 
NEWCDB_PLAN              SALESPDB                       3         100      100  
NEWCDB_PLAN              ORA$DEFAULT_PDB_DIRECTIVE      1          50       50   
NEWCDB_PLAN              ORA$AUTOTASK                   1          75       75    
NEWCDB_PLAN              SERVICESPDB                    3         100      100   
</code></pre><p>The preceding output shows the directives for the <code class="codeph">newcdb_plan</code> created in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E" title="This scenario illustrates each of the steps involved in creating a CDB resource plan for individual PDBs.">Creating a CDB Resource Plan for Managing PDBs: Scenario</a>"</span> and modified in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="Modifying a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.">Modifying a CDB Resource Plan</a>"</span>.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734__GUID-6B8D4EEE-5B1E-408F-BD76-089A6C113F90">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.">The Default Directive for PDBs</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172" title="You can view information about CDB resource plans, CDB resource plan directives, and predefined resource plans in a CDB.">Viewing Information About Plans and Directives in a CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN13815"></a><div class="props_rev_3"><a id="GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" name="GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822"></a><h3 id="MULTI-GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" class="sect3"><span class="enumeration_section">22.3 </span>Managing PDB Resource Plans
               </h3>
               <div>
                  <p>You can create, enable, and modify resource plans for individual PDBs.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17">About PDB Resource Plans</a><br>A PDB resource plan determines how the resources for a specific PDB are allocated to consumer groups within this PDB.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A">Creating a PDB Resource Plan</a><br>You create a PDB resource plan in the same way that you create a resource plan for a non-CDB. You use procedures in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> PL/SQL package to create the plan.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1">Enabling a PDB Resource Plan</a><br>Enable a PDB resource plan by setting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter to the plan with an <code>ALTER SYSTEM</code> statement when the current container is the PDB.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-ACF0635C-2642-48C3-8484-245826F16F31">Modifying a PDB Resource Plan</a><br>You can use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to modify a PDB resource plan in the same way you would modify the resource plan for a non-CDB.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E">Disabling a PDB Resource Plan</a><br>You disable a PDB resource plan by unsetting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the PDB.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">Using Oracle Resource Manager for PDBs</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13787"></a><a id="ADMIN13946"></a><a id="ADMIN13786"></a><div class="props_rev_3"><a id="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" name="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17"></a><h4 id="MULTI-GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" class="sect4"><span class="enumeration_section">22.3.1 </span>About PDB Resource Plans
                  </h4>
                  <div>
                     <p>A PDB resource plan determines how the resources for a specific PDB are allocated to consumer groups within this PDB.</p>
                     <p>A PDB resource plan is similar to a resource plan for a non-CDB. A PDB resource plan differs from a CDB resource plan, which determines the amount of resources allocated to each PDB.</p>
                     <p>In a CDB, the following restrictions apply to PDB resource plans:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A PDB resource plan cannot have subplans.</p>
                        </li>
                        <li>
                           <p>A PDB resource plan can have a maximum of eight consumer groups.</p>
                        </li>
                        <li>
                           <p>A PDB resource plan cannot have a multiple-level scheduling policy.</p>
                        </li>
                     </ul>
                     <p>If you create a PDB using a non-CDB, and the non-CDB contains resource plans, then these resource plans might not conform to the preceding restrictions. In this case, Oracle Database automatically transforms these resource plans into equivalent PDB resource plans that meet these requirements. The original resource plans and directives are recorded in the <code class="codeph">DBA_RSRC_PLANS</code> and <code class="codeph">DBA_RSRC_PLAN_DIRECTIVES</code> views with the <code class="codeph">LEGACY</code> status.
                     </p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CB12C1BE-B9EA-49C6-A7BD-2D2EED0CB7E4">CDB Resource Plan Requirements When Creating PDB Resource Plans</a><br>When you create PDB resource plans, the CDB resource plan must meet certain requirements.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1A579F10-E768-4699-B689-A66622A50B08">PDB Resource Plan: Example</a><br>A one-to-many relationship exists between CDB resource plans and PDB resource plans.
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17__GUID-8538DA05-AF23-44A3-9F6E-5BB3E8E7249B">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="Create CDB resource plans that allocate shares and resource limits for PDBs.">About CDB Resource Plans</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="overview-of-pdb-creation.html#GUID-F68E6FE9-919B-4665-95F7-785E69E07264" title="You have multiple options for moving a non-CDB into a PDB.">Options for Creating a PDB from a Non-CDB</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-4BBE0B17-3B05-49FA-979A-C649A9EE6DD9" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn more about resource plans
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" title="You can create, enable, and modify resource plans for individual PDBs.">Managing PDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-CB12C1BE-B9EA-49C6-A7BD-2D2EED0CB7E4" name="GUID-CB12C1BE-B9EA-49C6-A7BD-2D2EED0CB7E4"></a><h5 id="MULTI-GUID-CB12C1BE-B9EA-49C6-A7BD-2D2EED0CB7E4" class="sect5"><span class="enumeration_section">22.3.1.1 </span>CDB Resource Plan Requirements When Creating PDB Resource Plans
                     </h5>
                     <div>
                        <p>When you create PDB resource plans, the CDB resource plan must meet certain requirements.</p>
                        <p>Create directives for a CDB resource plan by using the <code class="codeph">DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE</code> procedure. Create directives for a PDB resource plan using the <code class="codeph">CREATE_PLAN_DIRECTIVE</code> procedure in the same package. When you create one or more PDB resource plans and there is no CDB resource plan, the CDB uses the <code class="codeph">DEFAULT_CDB_PLAN</code> that is supplied with Oracle Database.
                        </p>
                        <p>The following table describes the requirements for the CDB resource plan and the results when the requirements are not met. The parameter values described in the "CDB Resource Plan Requirements" column are for the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. The parameter values described in the "Results When Requirements Are Not Met" column are for the <code class="codeph">CREATE_PLAN_DIRECTIVE</code> procedure.
                        </p>
                        <div class="tblformalwide" id="GUID-CB12C1BE-B9EA-49C6-A7BD-2D2EED0CB7E4__CACDAFEA">
                           <p class="titleintable">Table 22-9 CDB Resource Plan Requirements for PDB Resource Plans</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="CDB Resource Plan Requirements for PDB Resource Plans" summary="This table lists each resource, the consolidation plan requirements for the resource, and the results if the requirements are not met." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d102832e7013">Resource</th>
                                    <th align="left" valign="bottom" width="42%" id="d102832e7016">CDB Resource Plan Requirements</th>
                                    <th align="left" valign="bottom" width="40%" id="d102832e7019">Results When Requirements Are Not Met</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e7024" headers="d102832e7013 ">
                                       <p>CPU</p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d102832e7024 d102832e7016 ">
                                       <p>One of the following requirements must be met:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>A share value must be specified for the PDB using the <code class="codeph">shares</code> parameter.
                                             </p>
                                          </li>
                                          <li>
                                             <p>A utilization limit for CPU below 100 must be specified for the PDB using the <code class="codeph">utilization_limit</code> parameter.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>These values can be set in a directive for the specific PDB or in a default directive.</p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d102832e7024 d102832e7019 ">
                                       <p>The CPU allocation policy of the PDB resource plan is not enforced.</p>
                                       <p>The CPU limit specified by the <code class="codeph">utilization_limit</code> parameter in the PDB resource plan is not enforced.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e7054" headers="d102832e7013 ">
                                       <p>Parallel execution servers</p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d102832e7054 d102832e7016 ">
                                       <p>One of the following requirements must be met:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>A share value must be specified for the PDB using the <code class="codeph">shares</code> parameter.
                                             </p>
                                          </li>
                                          <li>
                                             <p>A parallel server limit below 100 must be specified for the PDB using the <code class="codeph">parallel_server_limit</code> parameter.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>These values can be set in a directive for the specific PDB or in a default directive.</p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d102832e7054 d102832e7019 ">
                                       <p>The parallel execution server allocation policy of the PDB resource plan is not enforced.</p>
                                       <p>The parallel server limit specified by <code class="codeph">parallel_server_limit</code> in the PDB resource plan is not enforced. However, you can set the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter in a PDB to enforce the parallel limit.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="A PDB resource plan determines how the resources for a specific PDB are allocated to consumer groups within this PDB.">About PDB Resource Plans</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-1A579F10-E768-4699-B689-A66622A50B08" name="GUID-1A579F10-E768-4699-B689-A66622A50B08"></a><h5 id="MULTI-GUID-1A579F10-E768-4699-B689-A66622A50B08" class="sect5"><span class="enumeration_section">22.3.1.2 </span>PDB Resource Plan: Example
                     </h5>
                     <div>
                        <p>A one-to-many relationship exists between CDB resource plans and PDB resource plans.</p>
                        <p>The following figure shows an example of a CDB resource plan and a PDB resource plan.</p>
                        <div class="figure" id="GUID-1A579F10-E768-4699-B689-A66622A50B08__CACGGGJG">
                           <p class="titleinfigure">Figure 22-4 A CDB Resource Plan and a PDB Resource Plan</p><img src="img/admin_vm_102.png" alt="Description of Figure 22-4 follows" title="Description of Figure 22-4 follows" longdesc="img_text/admin_vm_102.html"><br><a href="img_text/admin_vm_102.html">Description of "Figure 22-4 A CDB Resource Plan and a PDB Resource Plan"</a></div>
                        <!-- class="figure" -->
                        <p>The preceding figure shows some of the directives in a PDB resource plan for the <code class="codeph">servicespdb</code> PDB. Other PDBs in the CDB can also have PDB resource plans.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="A PDB resource plan determines how the resources for a specific PDB are allocated to consumer groups within this PDB.">About PDB Resource Plans</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13807"></a><div class="props_rev_3"><a id="GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A" name="GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A"></a><h4 id="MULTI-GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A" class="sect4"><span class="enumeration_section">22.3.2 </span>Creating a PDB Resource Plan
                  </h4>
                  <div>
                     <p>You create a PDB resource plan in the same way that you create a resource plan for a non-CDB. You use procedures in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> PL/SQL package to create the plan.
                     </p>
                     <div class="section">
                        <p>A CDB resource plan allocates a portion of the system's resources to a PDB. A PDB resource plan determines how this portion is allocated within the PDB. </p>
                        <p>The following is a summary of the steps required to create a PDB resource plan:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>In SQL*Plus, ensure that the current container is a PDB.</span></li>
                        <li><span>Create a pending area using the <code class="codeph">CREATE_PENDING_AREA</code> procedure.</span></li>
                        <li><span>Create, modify, or delete consumer groups using the <code class="codeph">CREATE_CONSUMER_GROUP</code> procedure.</span></li>
                        <li><span>Map sessions to consumer groups using the <code class="codeph">SET_CONSUMER_GROUP_MAPPING</code> procedure.</span></li>
                        <li><span>Create the PDB resource plan using the <code class="codeph">CREATE_PLAN</code> procedure.</span></li>
                        <li><span>Create PDB resource plan directives using the <code class="codeph">CREATE_PLAN_DIRECTIVE</code> procedure.</span></li>
                        <li><span>Validate the pending area using the <code class="codeph">VALIDATE_PENDING_AREA</code> procedure.</span></li>
                        <li><span>Submit the pending area using the <code class="codeph">SUBMIT_PENDING_AREA</code> procedure.</span></li>
                     </ol>
                     <div class="section">
                        <p>Ensure that the current container is a PDB and that the user has the required privileges when you complete these steps. See <a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-4816CA07-1376-45FD-82D4-F9E332936683" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for detailed information about completing these steps.
                        </p>
                        <p>You also have the option of creating a simple resource plan that is adequate for many situations using the <code class="codeph">CREATE_SIMPLE_PLAN</code> procedure. See <a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-EFC4517C-6C4D-44F8-A652-2266D6FB49EB" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about creating a simple resource plan.
                        </p>
                        <div class="infoboxnote" id="GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A__GUID-A68BB797-4DE8-4A29-A2C0-90E55C170A25">
                           <p class="notep1">Note:</p>
                           <p>Some restrictions apply to PDB resource plans. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="A PDB resource plan determines how the resources for a specific PDB are allocated to consumer groups within this PDB.">About PDB Resource Plans</a>"</span> for information.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" title="You can create, enable, and modify resource plans for individual PDBs.">Managing PDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13811"></a><a id="ADMIN13809"></a><div class="props_rev_3"><a id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1" name="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1"></a><h4 id="MULTI-GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1" class="sect4"><span class="enumeration_section">22.3.3 </span>Enabling a PDB Resource Plan
                  </h4>
                  <div>
                     <p>Enable a PDB resource plan by setting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter to the plan with an <code>ALTER SYSTEM</code> statement when the current container is the PDB.
                     </p>
                     <div class="section">
                        <p>If no plan is specified with this parameter, then no PDB resource plan is enabled for the PDB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1__GUID-A5526D5A-5A28-4BE9-B83D-17704394C90E">Prerequisites</p>
                        <p>Before enabling a PDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1__GUID-C822A2F3-1434-4C95-BADF-5B7E9E5E6D37">To enable a PDB resource plan:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is a PDB.</p>
                           </li>
                           <li>
                              <p>Use an <code>ALTER SYSTEM</code> statement to set the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter to the PDB resource plan.
                              </p>
                           </li>
                        </ol>
                        <p>You can also schedule a PDB resource plan change with Oracle Scheduler. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1__GUID-71001B10-3B10-405F-89A3-A77BF885FD0F">
                        <p class="titleinexample">Example 22-5 Enabling a PDB Resource Plan</p>
                        <p>The following example sets the PDB resource plan to <code class="codeph">salespdb_plan</code>.
                        </p><pre class="pre codeblock"><code>ALTER SYSTEM SET RESOURCE_MANAGER_PLAN = 'salespdb_plan';
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1__GUID-A0783E44-4F15-48BF-9F55-ED1CAA4A7D6F">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="You can use the ALTER SYSTEM statement to modify a PDB.">Modifying a PDB at the System Level</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../admin/oracle-scheduler-concepts.html#ADMIN-GUID-6B8C0335-D36B-44D3-95BC-82FA2141D967" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn how to schedule a PDB resource plan change with Oracle Scheduler
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" title="You can create, enable, and modify resource plans for individual PDBs.">Managing PDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13831"></a><div class="props_rev_3"><a id="GUID-ACF0635C-2642-48C3-8484-245826F16F31" name="GUID-ACF0635C-2642-48C3-8484-245826F16F31"></a><h4 id="MULTI-GUID-ACF0635C-2642-48C3-8484-245826F16F31" class="sect4"><span class="enumeration_section">22.3.4 </span>Modifying a PDB Resource Plan
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to modify a PDB resource plan in the same way you would modify the resource plan for a non-CDB.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-ACF0635C-2642-48C3-8484-245826F16F31__GUID-5F05E728-E5E7-432D-951B-62B02CF0A1D4">Prerequisites</p>
                        <p>Before modifying a PDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-ACF0635C-2642-48C3-8484-245826F16F31__GUID-0AE3C1D6-D66C-4D62-AA03-B0F84D42E513">To modify a PDB resource plan:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is a PDB.</p>
                           </li>
                           <li>
                              <p>Create a pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</code></pre></li>
                           <li>
                              <p>Modify the PDB resource plan by completing one or more of the following tasks:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Update a consumer group using the <code class="codeph">UPDATE_CONSUMER_GROUP</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Delete a consumer group using the <code class="codeph">DELETE_CONSUMER_GROUP</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Update a resource plan using the <code class="codeph">UPDATE_PLAN</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Delete a resource plan using the <code class="codeph">DELETE_PLAN</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Update a resource plan directive using the <code class="codeph">UPDATE_PLAN_DIRECTIVE</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Delete a resource plan directive using the <code class="codeph">DELETE_PLAN_DIRECTIVE</code> procedure.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Validate the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</code></pre></li>
                           <li>
                              <p>Submit the pending area:</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-ACF0635C-2642-48C3-8484-245826F16F31__GUID-2FD844FB-F79F-428E-B02D-BCA15329DBCC">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="A PDB resource plan determines how the resources for a specific PDB are allocated to consumer groups within this PDB.">About PDB Resource Plans</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-86F4CE3C-3B5C-41D6-A50D-E965E13C1408" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for instructions about completing the consumer group tasks
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" title="You can create, enable, and modify resource plans for individual PDBs.">Managing PDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13814"></a><a id="ADMIN13812"></a><div class="props_rev_3"><a id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E" name="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E"></a><h4 id="MULTI-GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E" class="sect4"><span class="enumeration_section">22.3.5 </span>Disabling a PDB Resource Plan
                  </h4>
                  <div>
                     <p>You disable a PDB resource plan by unsetting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the PDB.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E__GUID-D043ECDE-D46A-407D-BEB5-39F40A792E10">Prerequisites</p>
                        <p>Before disabling a PDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="In a CDB, workloads within multiple PDBs can compete for system and CDB resources. Resource plans solve this problem.">Overview of Oracle Resource Manager in a Multitenant Environment</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E__GUID-B9769C9A-91E8-4A01-98D0-4157CE561598">To disable a PDB resource plan:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is a PDB.</p>
                           </li>
                           <li>
                              <p>Use an <code class="codeph">ALTER SYSTEM</code> statement to unset the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter for the PDB.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E__GUID-352DCF99-414B-45A3-862C-CFB3BC3E1AAA">
                        <p class="titleinexample">Example 22-6 Disabling a PDB Resource Plan</p>
                        <p>The following example disables the PDB resource plan.</p><pre class="pre codeblock"><code>ALTER SYSTEM SET RESOURCE_MANAGER_PLAN = '';</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E__GUID-7E83A43E-BB6B-4C3D-911D-E38C59C5B5CB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="You can use the ALTER SYSTEM statement to modify a PDB.">Modifying a PDB at the System Level</a>"</span></p>
                           </li>
                           <li>
                              <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB.">About Container Access in a CDB</a>"</span>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" title="You can create, enable, and modify resource plans for individual PDBs.">Managing PDB Resource Plans</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" name="GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A"></a><h3 id="MULTI-GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" class="sect3"><span class="enumeration_section">22.4 </span>Monitoring PDBs Managed by Oracle Database Resource Manager
               </h3>
               <div>
                  <p>A set of dynamic performance views enables you to monitor the results of your Oracle Database Resource Manager settings for PDBs.</p>
                  <div class="section">
                     <p>This section contains the following topics:</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D">About Resource Manager Views for PDBs</a><br>You can monitor the results of your Oracle Database Resource Manager settings for PDBs using views.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B">Monitoring CPU Usage for PDBs</a><br>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track CPU metrics in milliseconds, in terms of number of sessions, or in terms of utilization for the past one minute.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962">Monitoring Parallel Execution for PDBs</a><br>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track parallel statements and parallel server use for PDBs.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97">Monitoring the I/O Generated by PDBs</a><br>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track the amount of I/O generated by PDBs. 
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-93699AC3-9601-484E-A72A-11D1A716F853">Monitoring Memory Usage for PDBs</a><br>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track the amount memory used by PDBs.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">Using Oracle Resource Manager for PDBs</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D" name="GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D"></a><h4 id="MULTI-GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D" class="sect4"><span class="enumeration_section">22.4.1 </span>About Resource Manager Views for PDBs
                  </h4>
                  <div>
                     <p>You can monitor the results of your Oracle Database Resource Manager settings for PDBs using views.</p>
                     <p>The following views are available:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">V$RSRCPDBMETRIC</code></p>
                           <p>The <code class="codeph">V$RSRCPDBMETRIC</code> view provides current statistics on resource consumption for PDBs, including CPU usage, parallel execution, I/O generated, and memory usage.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">V$RSRCPDBMETRIC_HISTORY</code></p>
                           <p>The columns in the <code class="codeph">V$RSRCPDBMETRIC_HISTORY</code> view are the same as the columns in the <code class="codeph">V$RSRCPDBMETRIC</code> view. The only difference between these views is that the <code class="codeph">V$RSRCPDBMETRIC</code> view contains metrics for the past one minute only, whereas the <code class="codeph">V$RSRCPDBMETRIC_HISTORY</code> view contains metrics for the last 60 minutes.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">V$RSRC_PDB</code></p>
                           <p>The <code class="codeph">V$RSRC_PDB</code> view provides cumulative statistics. The statistics are accumulated since the time that the CDB resource plan was set.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DBA_HIST_RSRC_PDB_METRIC</code></p>
                           <p>This view contains the historical statistics of <code class="codeph">V$RSRCPDBMETRIC_HISTORY</code>, taken using Automatic Workload Repository (AWR) snapshots.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D__GUID-430AABFE-858C-4042-B198-3245E0321BA6">
                        <p class="notep1">Note:</p>
                        <p>The <code class="codeph">V$RSRCPDBMETRIC</code> and <code class="codeph">V$RSRCPDBMETRIC_HISTORY</code> views record statistics for resources that are not currently being managed by Resource Manager when the <code class="codeph">STATISTICS_LEVEL</code> initialization parameter is set to <code class="codeph">ALL</code> or <code class="codeph">TYPICAL</code>.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D__GUID-C9ACD060-F7BA-4DB0-AD9C-54D4F9F4EBC3">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../tgsql/monitoring-database-operations.html#TGSQL789" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> for more information about real-time SQL monitoring
                              </p>
                           </li>
                           <li>
                              <p><a href="../refrn/V-RSRCMGRMETRIC.html#REFRN-GUID-35F9BE03-3DCB-46FC-8D00-4BC5BCBBC443" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about <code class="codeph">V$RSRCPDBMETRIC</code>, <code class="codeph">V$RSRCPDBMETRIC_HISTORY</code>, <code class="codeph">V$RSRC_PDB</code>, and <code class="codeph">DBA_HIST_RSRC_PDB_METRIC</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" title="A set of dynamic performance views enables you to monitor the results of your Oracle Database Resource Manager settings for PDBs.">Monitoring PDBs Managed by Oracle Database Resource Manager</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B" name="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B"></a><h4 id="MULTI-GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B" class="sect4"><span class="enumeration_section">22.4.2 </span>Monitoring CPU Usage for PDBs
                  </h4>
                  <div>
                     <p>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track CPU metrics in milliseconds, in terms of number of sessions, or in terms of utilization for the past one minute.
                     </p>
                     <div class="section">
                        <p>The view provides real-time metrics for each PDB and is very useful in scenarios where you are running workloads and want to continuously monitor CPU resource utilization.</p>
                        <p>The active CDB resource plan manages CPU usage for a PDB. Use this view to compare the maximum and average CPU utilization for PDBs with other PDB settings such as the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>CPU time used</p>
                           </li>
                           <li>
                              <p>Time waiting for CPU</p>
                           </li>
                           <li>
                              <p>Average number of sessions that are consuming CPU</p>
                           </li>
                           <li>
                              <p>Number of sessions that are waiting for CPU allocation</p>
                           </li>
                        </ul>
                        <p>For example, you can view the amount of CPU resources a PDB used and how long it waited for resource allocation. Alternatively, you can view how many sessions from each PDB are executed against the total number of active sessions.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B__GUID-3F16E7BF-2FE9-4E44-BC88-60D1E5C3648D"> Tracking CPU Consumption in Terms of CPU Utilization for PDBs</p>
                        <p>To track CPU consumption in terms of CPU utilization, query the <code class="codeph">CPU_UTILIZATION_LIMIT</code> and <code class="codeph">AVG_CPU_UTILIZATION</code> columns. <code class="codeph">AVG_CPU_UTILIZATION</code> lists the average percentage of the server's CPU that is consumed by a PDB. <code class="codeph">CPU_UTILIZATION_LIMIT</code> represents the maximum percentage of the server's CPU that a PDB can use. This limit is set using the <code class="codeph">UTILIZATION_LIMIT</code> directive attribute.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, 
       p.PDB_NAME, 
       r.CPU_UTILIZATION_LIMIT, 
       r.AVG_CPU_UTILIZATION 
FROM   V$RSRCPDBMETRIC r, 
       CDB_PDBS p
WHERE r.CON_ID = p.CON_ID;
</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B__GUID-0C0C307C-51EC-49A4-98A6-4770D4120860">Tracking CPU Consumption and Throttling for PDBs</p>
                        <p>Use the <code class="codeph">CPU_CONSUMED_TIME</code> and <code class="codeph">CPU_TIME_WAIT</code> columns to track CPU consumption and throttling in milliseconds for each PDB. The column <code class="codeph">NUM_CPUS</code> represents the number of CPUs that Resource Manager is managing.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, 
       p.PDB_NAME, 
       r.CPU_CONSUMED_TIME, 
       r.CPU_WAIT_TIME, 
       r.NUM_CPUS 
FROM   V$RSRCPDBMETRIC r, 
       CDB_PDBS p
WHERE r.CON_ID = p.CON_ID;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B__GUID-AE511C5F-F832-418A-8B5C-48560957FCC2">Tracking CPU Consumption and Throttling in Terms of Number of Sessions for PDBs</p>
                        <p>To track the CPU consumption and throttling in terms of number of sessions, use the <code class="codeph">RUNNING_SESSIONS_LIMIT</code>, <code class="codeph">AVG_RUNNING_SESSIONS</code>, and <code class="codeph">AVG_WAITING_SESSIONS</code> columns. <code class="codeph">RUNNING_SESSIONS_LIMIT</code> lists the maximum number of sessions from a particular PDB that can be running at any time. This limit is defined by the <code class="codeph">UTILIZATION_LIMIT</code> directive attribute that you set for the PDB. <code class="codeph">AVG_RUNNING_SESSIONS</code> lists the average number of sessions that are consuming CPU, and <code class="codeph">AVG_WAITING_SESSIONS</code> lists the average number of sessions that are waiting for CPU.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, 
       p.PDB_NAME, 
       r.RUNNING_SESSIONS_LIMIT, 
       r.AVG_RUNNING_SESSIONS, 
       r.AVG_WAITING_SESSIONS 
FROM   V$RSRCPDBMETRIC r, 
       CDB_PDBS p
WHERE r.CON_ID = p.CON_ID;</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" title="A set of dynamic performance views enables you to monitor the results of your Oracle Database Resource Manager settings for PDBs.">Monitoring PDBs Managed by Oracle Database Resource Manager</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962" name="GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962"></a><h4 id="MULTI-GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962" class="sect4"><span class="enumeration_section">22.4.3 </span>Monitoring Parallel Execution for PDBs
                  </h4>
                  <div>
                     <p>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track parallel statements and parallel server use for PDBs.
                     </p>
                     <div class="section">
                        <p>Parallel execution servers for a PDB are managed with the active CDB resource plan of the PDB's CDB. To track parallel statements and parallel server use for PDBs, use the <code class="codeph">AVG_ACTIVE_PARALLEL_STMTS</code>, <code class="codeph">AVG_QUEUED_PARALLEL_STMTS</code>, <code class="codeph">AVG_ACTIVE_PARALLEL_SERVERS</code>, <code class="codeph">AVG_QUEUED_PARALLEL_SERVERS</code>, and <code class="codeph">PARALLEL_SERVERS_LIMIT</code> columns.
                        </p>
                        <p><code class="codeph">AVG_ACTIVE_PARALLEL_STMTS</code> and <code class="codeph">AVG_ACTIVE_PARALLEL_SERVERS</code> list the average number of parallel statements running and the average number of parallel servers used by the parallel statements. <code class="codeph">AVG_QUEUED_PARALLEL_STMTS</code> and <code class="codeph">AVG_QUEUED_PARALLEL_SERVERS</code> list the average number of parallel statements queued and average number of parallel servers that were requested by queued parallel statements. <code class="codeph">PARALLEL_SERVERS_LIMIT</code> lists the number of parallel servers allowed to be used by the PDB.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.AVG_ACTIVE_PARALLEL_STMTS, r.AVG_QUEUED_PARALLEL_STMTS, 
   r.AVG_ACTIVE_PARALLEL_SERVERS, r.AVG_QUEUED_PARALLEL_SERVERS, r.PARALLEL_SERVERS_LIMIT
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;
</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" title="A set of dynamic performance views enables you to monitor the results of your Oracle Database Resource Manager settings for PDBs.">Monitoring PDBs Managed by Oracle Database Resource Manager</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97" name="GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97"></a><h4 id="MULTI-GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97" class="sect4"><span class="enumeration_section">22.4.4 </span>Monitoring the I/O Generated by PDBs
                  </h4>
                  <div>
                     <p>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track the amount of I/O generated by PDBs. 
                     </p>
                     <div class="section">
                        <p>I/O is limited for a PDB by setting the <code class="codeph">MAX_IOPS</code> initialization parameter or the <code class="codeph">MAX_MBPS</code> initialization parameter in the PDB. Use this view to compare the I/O generated by PDBs in terms of the number of operations each second and the number of megabytes each second.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97__GUID-C3EF8D4D-8E30-47E2-A919-5780050BBB84">Tracking the Number of I/O Operations Generated Each Second by PDBs</p>
                        <p>To track the I/O operations generated each second by PDBs during the previous minute, use the <code class="codeph">IOPS</code> column.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.IOPS 
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;
</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97__GUID-8B417FF8-392D-4DBE-8CB8-41BCB295B90C">Tracking the Number Megabytes Generated for I/O Operations Each Second by PDBs</p>
                        <p>To track number of megabytes generated for I/O operations each second by PDBs during the previous minute, use the <code class="codeph">IOMBPS</code> column.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.IOMBPS 
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" title="A set of dynamic performance views enables you to monitor the results of your Oracle Database Resource Manager settings for PDBs.">Monitoring PDBs Managed by Oracle Database Resource Manager</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-93699AC3-9601-484E-A72A-11D1A716F853" name="GUID-93699AC3-9601-484E-A72A-11D1A716F853"></a><h4 id="MULTI-GUID-93699AC3-9601-484E-A72A-11D1A716F853" class="sect4"><span class="enumeration_section">22.4.5 </span>Monitoring Memory Usage for PDBs
                  </h4>
                  <div>
                     <p>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track the amount memory used by PDBs.
                     </p>
                     <div class="section">
                        <p>Use this view to track the amount of SGA, PGA, buffer cache, and shared pool memory currently used by PDBs.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To track the current memory usage, in bytes, for specific PDBs, use the <code class="codeph">SGA_BYTES</code>, <code class="codeph">PGA_BYTES</code>, <code class="codeph">BUFFER_CACHE_BYTES</code>, and <code class="codeph">SHARED_POOL_BYTES</code> columns.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.SGA_BYTES, r.PGA_BYTES, r.BUFFER_CACHE_BYTES, r.SHARED_POOL_BYTES
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" title="A set of dynamic performance views enables you to monitor the results of your Oracle Database Resource Manager settings for PDBs.">Monitoring PDBs Managed by Oracle Database Resource Manager</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
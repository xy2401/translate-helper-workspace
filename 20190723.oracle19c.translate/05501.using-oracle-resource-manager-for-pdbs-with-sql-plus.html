<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB)."></meta>
      <meta name="description" content="Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB)."></meta>
      <title>使用Oracle Resource Manager进行PDB</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator’s Guide "></meta>
      <meta property="og:description" content="Use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB)."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96136-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-database-utilities-in-a-cdb.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-oracle-scheduler-with-a-cdb.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="MULTI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-database-utilities-in-a-cdb.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-oracle-scheduler-with-a-cdb.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-oracle-features-in-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">在多租户环境中使用Oracle功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle Resource Manager进行PDB</li>
            </ol>
            <a id="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" name="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D"></a><a id="ADMIN13774"></a>
            
            <h2 id="MULTI-GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" class="sect2"><span class="enumeration_chapter">22</span>使用Oracle Resource Manager进行PDB</h2>
         </header>
         <div class="ind">
            <div>
               <p>使用PL / SQL包过程来管理Oracle Resource Manager（资源管理器），以便将资源分配给多租户容器数据库（CDB）中的可插拔数据库（PDB）。</p>
               <p>本章假定您满足以下先决条件：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>您了解如何配置和管理CDB。</p>
                  </li>
                  <li>
                     <p>您了解如何使用资源管理器在非CDB中分配资源。</p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D__GUID-141F2F04-BAAB-4972-91E2-BD4940193274">
                  <p class="notep1">注意：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您可以使用SQL * Plus或Oracle SQL Developer完成本章中的任务。</p>
                     </li>
                     <li>
                        <p>您还可以使用Oracle Enterprise Manager云控制（云控制）的图形用户界面管理资源管理器。</p>
                     </li>
                     <li>
                        <p>为简单起见，本章将PDB，应用程序根和应用程序PDB称为“PDB”。</p> 
                     </li>
                  </ul>
               </div>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657">多租户环境中的Oracle Resource Manager概述</a><br>在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1">管理CDB资源计划</a><br>在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822">管理PDB资源计划</a><br>您可以为各个PDB创建，启用和修改资源计划。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A">监视由Oracle数据库资源管理器管理的PDB</a><br>通过一组动态性能视图，您可以监视PDB的Oracle数据库资源管理器设置的结果。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D__GUID-8522B1D8-45DD-424A-BD97-5DE546E332D0">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="managing-a-multitenant-environment.html#GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" title="您可以使用SQL * Plus或企业管理器云控制（云控制）管理多租户环境。">管理多租户环境</a> ”</span></p>
                     </li>
                     <li>
                        <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关Resource Manager的更多信息</p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="using-oracle-features-in-a-multitenant-environment.html#GUID-CE922DAA-66FB-430B-96E5-29FF50BFD2FF" title="您可以在多租户环境中使用Oracle数据库功能。">在多租户环境中使用Oracle功能</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" name="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657"></a><h3 id="MULTI-GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" class="sect3"><span class="enumeration_section">22.1</span>多租户环境中的Oracle Resource Manager概述</h3>
               <div>
                  <p>在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。</p>
                  <p>在多租户环境中，资源管理器在两个级别上运行：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>CDB级别</p>
                        <p>资源管理器可以管理争用系统和CDB资源的多个PDB的工作负载。您可以指定如何为PDB分配资源，还可以限制特定PDB的资源利用率。主要工具是CDB资源计划。</p>
                     </li>
                     <li>
                        <p>PDB水平</p>
                        <p>资源管理器可以管理每个PDB中的工作负载。主要工具是PDB资源计划。</p>
                     </li>
                  </ul>
                  <p>资源管理器分两步分配资源：</p>
                  <ol>
                     <li id="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657__CACEABFF">
                        <p>它将系统资源的一部分分配给每个PDB。</p>
                     </li>
                     <li>
                        <p>在特定的PDB中，它将在前一步骤中获得的系统资源的一部分分配给连接到PDB的每个会话。</p>
                     </li>
                  </ol>
                  <div class="infoboxnote" id="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657__GUID-FA5AA2CE-D6E7-4215-A904-637065B50156">
                     <p class="notep1">注意：</p>
                     <p>资源管理器自动管理根中的活动。</p>
                  </div>
                  <p>要在多租户环境中使用资源管理器，您必须满足以下先决条件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>CDB必须存在且必须包含PDB。</p>
                     </li>
                     <li>
                        <p>要完成使用<code class="codeph">DBMS_RESOURCE_MANAGER</code>程序包的任务，您必须具有<code class="codeph">ADMINISTER_RESOURCE_MANAGER</code>系统特权。
                        </p>
                     </li>
                  </ul>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1">多租户环境中资源管理的目的</a><br>资源管理器可以为CDB提供更有效的资源使用。</li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-19400E80-882F-424F-A19A-9FEB54F83577">资源计划指令概述</a><br><strong class="term">CDB资源计划</strong>根据其资源计划指令集（指令）为其PDB分配资源。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2">背景和管理任务以及消费者群体</a><br>在CDB中，后台和管理任务映射到以最佳方式运行它们的资源管理器使用者组。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6">多租户资源管理的初始化参数</a><br>在PDB中使用控制存储器和I / O的初始化参数。</li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657__GUID-C5736F93-3AFE-4630-BDF6-1C398C8418B7">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="creating-and-configuring-a-cdb.html#GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" title="创建和配置多租户容器数据库（CDB）包括计划，创建CDB和可选配置EM Express等任务。">创建和配置CDB</a> ”</span>和<span class="q">“ <a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="您可以使用各种技术创建PDB，应用程序容器和应用程序种子。">创建和删除PDB和应用程序容器</a> ”</span></p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-1A627E9A-0138-4DA8-B2E3-E98D3C4AA65D" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关<code class="codeph">DBMS_RESOURCE_MANAGER</code>包的更多信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="使用PL / SQL包过程来管理Oracle Resource Manager（资源管理器），以便将资源分配给多租户容器数据库（CDB）中的可插拔数据库（PDB）。">使用Oracle Resource Manager for PDB</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13776"></a><div class="props_rev_3"><a id="GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1" name="GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1"></a><h4 id="MULTI-GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1" class="sect4"><span class="enumeration_section">22.1.1</span>多租户环境中资源管理的目的</h4>
                  <div>
                     <p>资源管理器可以为CDB提供更有效的资源使用。</p>
                     <p>当CDB的资源分配决策留给操作系统时，您可能会遇到以下工作负载管理问题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>PDB之间资源分配不当</p>
                           <p>操作系统在所有活动进程中平均分配资源，并且不能将一个任务优先于另一个任务。因此，一个或多个PDB可能使用过多的系统资源，而其他PDB则缺乏资源。</p>
                        </li>
                        <li>
                           <p>在单个PDB中不恰当地分配资源</p>
                           <p>连接到单个PDB的一个或多个会话可能使用过多的系统资源，而连接到同一PDB的其他会话则缺乏资源。</p>
                        </li>
                        <li>
                           <p>PDB的性能不一致</p>
                           <p>当其他PDB在不同时间竞争更多系统资源或更少系统资源时，单个PDB可能执行不一致。</p>
                        </li>
                        <li>
                           <p>缺乏PDB的资源使用数据</p>
                           <p>资源使用数据对于监控和调整PDB至关重要。如果非CDB是系统上运行的唯一数据库，则可以使用操作系统监视工具来收集非CDB的资源使用情况数据。但是，在CDB中，操作系统监视工具不再有用，因为系统上运行了多个PDB。</p>
                        </li>
                     </ul>
                     <p>资源管理器通过允许CDB更多地控制如何在PDB之间和PDB内分配硬件资源来帮助克服这些问题。</p>
                     <p>在具有多个PDB的CDB中，一些PDB通常比其他PDB更重要。资源管理器使您可以确定特定PDB的资源使用的优先级并限制它们。使用资源管理器，您可以：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>指定不同的PDB应接收不同的系统资源份额，以便为更重要的PDB分配更多资源</p>
                        </li>
                        <li>
                           <p>限制特定PDB的CPU使用率</p>
                        </li>
                        <li>
                           <p>限制特定PDB可以使用的并行执行服务器的数量</p>
                        </li>
                        <li>
                           <p>限制特定PDB的内存使用量</p>
                        </li>
                        <li>
                           <p>指定特定PDB的保证内存量</p>
                        </li>
                        <li>
                           <p>指定特定PDB可以使用的最大内存量</p>
                        </li>
                        <li>
                           <p>将PDB性能配置文件用于不同的PDB集</p>
                           <p>一组PDB的性能配置文件可以指定系统资源的共享，CPU使用率和并行执行服务器的数量。PDB性能配置文件使您可以通过为配置文件而不是单个PDB指定资源管理器指令来管理大量PDB的资源。</p>
                        </li>
                        <li>
                           <p>限制连接到单个PDB的不同会话的资源使用情况</p>
                        </li>
                        <li>
                           <p>限制特定PDB生成的I / O.</p>
                        </li>
                        <li>
                           <p>监控PDB的资源使用情况</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13778"></a><div class="props_rev_3"><a id="GUID-19400E80-882F-424F-A19A-9FEB54F83577" name="GUID-19400E80-882F-424F-A19A-9FEB54F83577"></a><h4 id="MULTI-GUID-19400E80-882F-424F-A19A-9FEB54F83577" class="sect4"><span class="enumeration_section">22.1.2</span>资源计划指令概述</h4>
                  <div>
                     <p><strong class="term">CDB资源计划</strong>根据其资源计划指令集（指令）为其PDB分配资源。
                     </p>
                     <p>CDB资源计划与其资源计划指令之间存在父子关系。每个指令都引用性能配置文件中的一组PDB或单个PDB。</p>
                     <p>您可以在同一CDB中为单个PDB和PDB性能配置文件指定指令。当前活动计划的两个指令不能引用相同的PDB或相同的PDB性能配置文件。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1A8B2FD9-0541-43BF-95D6-E56E400088BC">PDB性能配置文件</a><br><strong class="term">PDB性能配置文件</strong>为具有相同优先级和资源控制的一组PDB配置资源计划指令。
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-15823DBC-33C8-4D4F-AD46-0AD4FBE169BA">资源计划指令</a><br>指令控制CPU和并行执行服务器的分配。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-1A8B2FD9-0541-43BF-95D6-E56E400088BC" name="GUID-1A8B2FD9-0541-43BF-95D6-E56E400088BC"></a><h5 id="MULTI-GUID-1A8B2FD9-0541-43BF-95D6-E56E400088BC" class="sect5"><span class="enumeration_section">22.1.2.1</span> PDB性能配置文件</h5>
                     <div>
                        <p><strong class="term">PDB性能配置文件</strong>为具有相同优先级和资源控制的一组PDB配置资源计划指令。
                        </p>
                        <p>例如，您可以创建名为Gold，Silver和Bronze的性能配置文件。每个配置文件根据PDB类型的重要性指定一组不同的指令。黄金PDB比Silver PDB更具关键性，Silver PDB比Bronze PDB更具关键性。PDB使用<code class="codeph">DB_PERFORMANCE_PROFILE</code>初始化参数指定其性能配置文件。
                        </p>
                        <p>您可以使用PDB锁定配置文件来指定控制资源的PDB初始化参数，例如<code class="codeph">SGA_TARGET</code>和<code class="codeph">PGA_AGGREGATE_LIMIT</code> 。锁定配置文件可防止PDB管理员修改设置。
                        </p>
                        <p>Oracle建议为性能配置文件和锁定配置文件使用匹配的名称。为防止PDB所有者切换配置文件，Oracle建议将PDB性能配置文件放入PDB锁定配置文件中。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-19400E80-882F-424F-A19A-9FEB54F83577" title="CDB资源计划根据其资源计划指令集（指令）为其PDB分配资源。">资源计划指令概述</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-15823DBC-33C8-4D4F-AD46-0AD4FBE169BA" name="GUID-15823DBC-33C8-4D4F-AD46-0AD4FBE169BA"></a><h5 id="MULTI-GUID-15823DBC-33C8-4D4F-AD46-0AD4FBE169BA" class="sect5"><span class="enumeration_section">22.1.2.2</span>资源计划指令</h5>
                     <div>
                        <p>指令控制CPU和并行执行服务器的分配。</p>
                        <p>指令可以根据您为每个PDB或PDB性能配置文件指定的共享值来控制对PDB的资源分配。较高的股票价值会带来更多资源。例如，您可以通过将第一个PDB的共享值设置为第二个PDB的共享值的两倍来指定为一个PDB分配两倍于分配给第二个PDB的资源。同样，通过将第一个PDB性能配置文件的共享值设置为第二个PDB性能配置文件的共享值的两倍，可以指定将一个PDB性能配置文件分配为分配给第二个PDB性能配置文件的资源的两倍。这些设置适用于使用每个配置文件的PDB集。</p>
                        <p>您还可以为PDB和PDB性能配置文件指定利用率限制。限制控制PDB或性能配置文件的分配。例如，限制可以控制PDB获得的CPU数量占CDB可用总CPU的百分比。</p>
                        <p>您可以同时使用共享和利用率限制来精确控制分配给CDB中每个PDB和PDB性能配置文件的资源。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-15823DBC-33C8-4D4F-AD46-0AD4FBE169BA__GUID-8C2F418B-3CF1-4FD9-8567-632EB58F1C79">
                           <p class="notep1">也可以看看：</p>
                           <p>有关PDB锁定配置文件的详细信息，请参阅<span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-3B2EF996-3BE8-413D-968C-14339FACFC12" title="有几种方法可以限制PDB用户以增强安全性。">关于限制PDB用户以增强安全性</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-19400E80-882F-424F-A19A-9FEB54F83577" title="CDB资源计划根据其资源计划指令集（指令）为其PDB分配资源。">资源计划指令概述</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13788"></a><div class="props_rev_3"><a id="GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2" name="GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2"></a><h4 id="MULTI-GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2" class="sect4"><span class="enumeration_section">22.1.3</span>背景和管理任务以及消费者组</h4>
                  <div>
                     <p>在CDB中，后台和管理任务映射到以最佳方式运行它们的资源管理器使用者组。</p>
                     <p>资源管理器使用以下规则将任务映射到使用者组：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>任务将映射到启动任务的容器中的使用者组。</p>
                           <p>如果任务在CDB根目录中启动，则任务将映射到CDB根目录中的使用者组。如果任务在PDB中启动，则任务映射到PDB中的使用者组。</p>
                        </li>
                        <li>
                           <p>许多维护和管理任务会自动映射到使用者组。</p>
                           <p>例如，自动维护任务映射到<code class="codeph">ORA$AUTOTASK</code> 。在某些情况下，任务映射到使用者组，但映射是可修改的。此类任务包括RMAN备份，RMAN映像副本，Oracle数据泵和内存中的填充。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2__GUID-2DBDD619-E1B7-42AE-BFFF-592FD87E6E6F">
                        <p class="notep1">注意：</p>
                        <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-AC101C05-DD43-445C-85F7-0A04DCBC2EE0" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关预定义使用者组的映射规则的更多信息</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13775"></a><div class="props_rev_3"><a id="GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" name="GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6"></a><h4 id="MULTI-GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" class="sect4"><span class="enumeration_section">22.1.4</span>多租户资源管理的初始化参数</h4>
                  <div>
                     <p>在PDB中使用控制存储器和I / O的初始化参数。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252">PDB的内存相关初始化参数</a><br>几个初始化参数控制PDB的内存使用。</li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2">PDB的I / O相关初始化参数</a><br><code class="codeph">MAX_IOPS</code>和<code class="codeph">MAX_MBPS</code>初始化参数限制PDB生成的磁盘I / O.</li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-939361C2-FCD4-4049-B63F-0DDC442BE847">PDB的CPU相关初始化参数</a><br><code class="codeph">CPU_COUNT</code>初始化参数指定可供Oracle数据库使用的CPU数。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252" name="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252"></a><h5 id="MULTI-GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252" class="sect5"><span class="enumeration_section">22.1.4.1</span> PDB的与存储器相关的初始化参数</h5>
                     <div>
                        <p>几个初始化参数控制PDB的内存使用。</p>
                        <p>当PDB是当前容器时，下表中的初始化参数控制当前PDB的内存使用情况。为PDB设置一个或多个这些参数时，请确保CDB和其他PDB具有足够的内存用于其操作。仅当满足以下条件时，初始化参数才控制PDB的内存使用情况：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">NONCDB_COMPATIBLE</code>初始化参数在CDB根目录中设置为<code class="codeph">false</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">MEMORY_TARGET</code>初始化参数未设置或在CDB根目录中设置为<code class="codeph">0</code> （零）。
                              </p>
                           </li>
                        </ul>
                        <div class="tblformal" id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252__GUID-73A434E4-F48C-4440-BA3C-56844D263C76">
                           <p class="titleintable">表22-1控制PDB内存使用情况的初始化参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="控制PDB内存使用的初始化参数" border="1" summary="This table describes the initialization parameters that control the memory usage of PDBs." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d102832e1165">初始化参数</th>
                                    <th align="left" valign="bottom" width="20%" id="d102832e1167">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1171" headers="d102832e1165 ">
                                       <p><code class="codeph">DB_CACHE_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1171 d102832e1167 ">
                                       <p>设置PDB的最小保证缓冲区高速缓存空间。</p>
                                       <p>必须满足以下要求：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>它必须小于或等于CDB根目录中<code class="codeph">DB_CACHE_SIZE</code>设置的50％。
                                             </p>
                                          </li>
                                          <li>
                                             <p>所有PDB的<code class="codeph">DB_CACHE_SIZE</code>设置总和必须小于或等于CDB根目录中<code class="codeph">DB_CACHE_SIZE</code>设置的50％。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>如果在CDB根目录中将<code class="codeph">SGA_TARGET</code>初始化参数设置为非零值，则这些要求不适用。
                                       </p>
                                       <p>当<code class="codeph">SGA_TARGET</code>初始化参数设置<code class="codeph">SGA_TARGET</code> ，必须满足以下要求：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>PDB中<code class="codeph">DB_CACHE_SIZE</code>加<code class="codeph">SHARED_POOL_SIZE</code>的值必须小于或等于PDB的<code class="codeph">SGA_TARGET</code>值的50％。
                                             </p>
                                          </li>
                                          <li>
                                             <p>PDB中<code class="codeph">DB_CACHE_SIZE</code>加<code class="codeph">SHARED_POOL_SIZE</code>的值必须小于或等于CDB级别的<code class="codeph">SGA_TARGET</code>值的50％。
                                             </p>
                                          </li>
                                          <li>
                                             <p>CDB中所有PDB上的<code class="codeph">DB_CACHE_SIZE</code>加<code class="codeph">SHARED_POOL_SIZE</code>的总和必须小于或等于CDB级别的<code class="codeph">SGA_TARGET</code>值的50％。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1244" headers="d102832e1165 ">
                                       <p><code class="codeph">SHARED_POOL_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1244 d102832e1167 ">
                                       <p>设置PDB的最小保证共享池空间。</p>
                                       <p>必须满足以下要求：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>它必须小于或等于CDB根目录中<code class="codeph">SHARED_POOL_SIZE</code>设置的50％。
                                             </p>
                                          </li>
                                          <li>
                                             <p>所有PDB的<code class="codeph">SHARED_POOL_SIZE</code>设置总和必须小于或等于CDB根中<code class="codeph">SHARED_POOL_SIZE</code>设置的50％。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>如果在CDB根目录中将<code class="codeph">SGA_TARGET</code>初始化参数设置为非零值，则这些要求不适用。
                                       </p>
                                       <p>当<code class="codeph">SGA_TARGET</code>初始化参数设置<code class="codeph">SGA_TARGET</code> ，必须满足以下要求：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>PDB中<code class="codeph">DB_CACHE_SIZE</code>加<code class="codeph">SHARED_POOL_SIZE</code>的值必须小于或等于PDB的<code class="codeph">SGA_TARGET</code>值的50％。
                                             </p>
                                          </li>
                                          <li>
                                             <p>PDB中<code class="codeph">DB_CACHE_SIZE</code>加<code class="codeph">SHARED_POOL_SIZE</code>的值必须小于或等于CDB级别的<code class="codeph">SGA_TARGET</code>值的50％。
                                             </p>
                                          </li>
                                          <li>
                                             <p>CDB中所有PDB上的<code class="codeph">DB_CACHE_SIZE</code>加<code class="codeph">SHARED_POOL_SIZE</code>的总和必须小于或等于CDB级别的<code class="codeph">SGA_TARGET</code>值的50％。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1317" headers="d102832e1165 ">
                                       <p><code class="codeph">SGA_MIN_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1317 d102832e1167 ">
                                       <p>设置PDB的最小SGA大小。</p>
                                       <p>必须满足以下要求：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>它必须小于或等于CDB根中<code class="codeph">SGA_TARGET</code>设置的50％。
                                             </p>
                                          </li>
                                          <li>
                                             <p>它必须小于或等于PDB中<code class="codeph">SGA_TARGET</code>设置的50％。</p>
                                          </li>
                                          <li>
                                             <p>所有PDB的<code class="codeph">SGA_MIN_SIZE</code>设置总和必须小于或等于CDB根中<code class="codeph">SGA_TARGET</code>设置的50％。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>如果未设置<code class="codeph">SGA_TARGET</code>初始化参数或在CDB根目录中将其设置为<code class="codeph">0</code> （零），则这些要求不适用。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1357" headers="d102832e1165 ">
                                       <p><code class="codeph">SGA_TARGET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1357 d102832e1167 ">
                                       <p>设置PDB的最大SGA大小。</p>
                                       <p>仅当<code class="codeph">SGA_TARGET</code>初始化参数在CDB根目录中设置为非零值时，才会强制执行PDB中的<code class="codeph">SGA_TARGET</code>设置。PDB中的<code class="codeph">SGA_TARGET</code>设置必须小于或等于CDB根目录中的<code class="codeph">SGA_TARGET</code>设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1379" headers="d102832e1165 ">
                                       <p><code class="codeph">PGA_AGGREGATE_LIMIT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1379 d102832e1167 ">
                                       <p>设置PDB的最大PGA大小。</p>
                                       <p>必须满足以下要求：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>它必须小于或等于CDB根目录中<code class="codeph">PGA_AGGREGATE_LIMIT</code>的设置。
                                             </p>
                                          </li>
                                          <li>
                                             <p>它必须大于或等于PDB中<code class="codeph">PGA_AGGREGATE_TARGET</code>设置的两倍。</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d102832e1402" headers="d102832e1165 ">
                                       <p><code class="codeph">PGA_AGGREGATE_TARGET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d102832e1402 d102832e1167 ">
                                       <p>设置PDB的目标聚合PGA大小。</p>
                                       <p>必须满足以下要求：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>它必须小于或等于CDB级别设置的<code class="codeph">PGA_AGGREGATE_TARGET</code>值。
                                             </p>
                                          </li>
                                          <li>
                                             <p>它必须小于或等于CDB级别设置的<code class="codeph">PGA_AGGREGATE_LIMIT</code>初始化参数值的50％。
                                             </p>
                                          </li>
                                          <li>
                                             <p>它必须小于或等于PDB中设置的<code class="codeph">PGA_AGGREGATE_LIMIT</code>值的50％。</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="example" id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252__GUID-FAAD3AE2-BABF-4FE6-8924-CEF021181327">
                           <p class="titleinexample">例22-1设置PDB可用的最大聚合PGA内存</p>
                           <p>将PDB作为当前容器，运行以下SQL语句将内存和SPFILE中的<code class="codeph">PGA_AGGREGATE_LIMIT</code>初始化参数设置为90 MB：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET PGA_AGGREGATE_LIMIT = 90M SCOPE = BOTH;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252__GUID-9B8491D6-9BD8-42D8-AECE-D9AC39D969DA">
                           <p class="titleinexample">例22-2设置PDB的最小SGA大小</p>一世<p>将PDB作为当前容器，运行以下SQL语句将内存和SPFILE中的<code class="codeph">SGA_MIN_SIZE</code>初始化参数设置为500 MB：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET SGA_MIN_SIZE = 500M SCOPE = BOTH;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" title="在PDB中使用控制存储器和I / O的初始化参数。">多租户资源管理的初始化参数</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2" name="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2"></a><h5 id="MULTI-GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2" class="sect5"><span class="enumeration_section">22.1.4.2 PDB的</span> I / O相关初始化参数</h5>
                     <div>
                        <p><code class="codeph">MAX_IOPS</code>和<code class="codeph">MAX_MBPS</code>初始化参数限制PDB生成的磁盘I / O.</p>
                        <p>大量磁盘I / O可能导致性能下降。有几个因素可能导致磁盘I / O过多，例如设计不佳的SQL或大批量事务中的索引和表扫描。如果一个PDB生成大量磁盘I / O，则会降低同一CDB中其他PDB的性能。</p>
                        <p>使用以下一个或两个初始化参数来限制特定PDB生成的I / O：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">MAX_IOPS</code>初始化参数限制<code class="codeph">MAX_IOPS</code>的I / O操作数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">MAX_MBPS</code>初始化参数限制<code class="codeph">MAX_MBPS</code> I / O操作的兆字节数。
                              </p>
                           </li>
                        </ul>
                        <p>如果为单个PDB设置了两个先前的初始化参数，则Oracle数据库会强制执行这两个限制。请注意，Oracle Exadata <span class="italic">不会</span>强制实施这些限制，后者使用I / O资源管理（IORM）来管理PDB之间的I / O.
                        </p>
                        <p>如果使用CDB root作为当前容器设置这些初始化参数，则值将成为CDB中所有容器的默认值。如果使用应用程序根目录设置它们作为当前容器，则这些值将成为应用程序容器中所有应用程序PDB的默认值。当使用PDB或应用程序PDB设置它们作为当前容器时，设置优先于CDB根目录或应用程序根目录中的默认设置。这些参数不能在非CDB中设置。</p>
                        <p>两个初始化参数的默认值均为0（零）。如果这些初始化参数在PDB中设置为0（零），并且CDB根设置为0，则PDB没有I / O限制。如果这些初始化参数在应用程序PDB中设置为0（零），并且其应用程序根目录设置为0，则应用程序PDB没有I / O限制。</p>
                        <p>关键I / O操作（例如控制文件和密码文件的操作）不受限制，即使达到限制也会继续运行。但是，计算I / O操作的数量和I / O操作的兆字节时，将计算所有I / O操作（包括关键I / O操作）。</p>
                        <p>您可以使用<code class="codeph">DBA_HIST_RSRC_PDB_METRIC</code>视图来计算PDB的合理I / O限制。计算限制时，请考虑以下列中的值： <code class="codeph">IOPS</code> ， <code class="codeph">IOMBPS</code> ， <code class="codeph">IOPS_THROTTLE_EXEMPT</code>和<code class="codeph">IOMBPS_THROTTLE_EXEMPT</code> 。 <code class="codeph">rsmgr:io rate limit</code>等待事件表示已达到限制。
                        </p>
                        <div class="example" id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2__GUID-FC7E23FC-00D2-419B-9EE9-8D27A0CA9296">
                           <p class="titleinexample">例22-3限制PDB生成的I / O.</p>
                           <p>将PDB作为当前容器，运行以下SQL语句，将内存和SPFILE中的<code class="codeph">MAX_IOPS</code>初始化参数设置为<code class="codeph">MAX_IOPS</code> 1,000个I / O操作的限制：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET MAX_IOPS = 1000 SCOPE = BOTH;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2__GUID-775B5C73-BD07-47A1-BB2D-8882BAD3FC3E">
                           <p class="titleinexample">例22-4限制PDB生成的I / O兆字节数</p>
                           <p>将PDB作为当前容器，运行以下SQL语句，将内存和SPFILE中的<code class="codeph">MAX_MBPS</code>初始化参数设置为<code class="codeph">MAX_MBPS</code> 200 MB的I / O限制：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET MAX_MBPS = 200 SCOPE = BOTH;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2__GUID-2B73E8F6-BE81-4ECA-B46D-CCE58CB4B339">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="您可以使用ALTER SYSTEM语句来修改PDB。">在系统级修改PDB</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">MAX_IOPS</code>初始化参数的更多信息，请<code class="codeph">MAX_IOPS</code> <a href="../refrn/MAX_IOPS.html#REFRN-GUID-7D89F457-0CE6-4152-98EA-7F1BE4E0ADC7" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">MAX_MBPS</code>初始化参数的更多信息，请<code class="codeph">MAX_MBPS</code> <a href="../refrn/MAX_MBPS.html#REFRN-GUID-9F7E0143-76FB-488A-9A04-2D85F1417CB6" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" title="在PDB中使用控制存储器和I / O的初始化参数。">多租户资源管理的初始化参数</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-939361C2-FCD4-4049-B63F-0DDC442BE847" name="GUID-939361C2-FCD4-4049-B63F-0DDC442BE847"></a><h5 id="MULTI-GUID-939361C2-FCD4-4049-B63F-0DDC442BE847" class="sect5"><span class="enumeration_section">22.1.4.3</span> PDB的CPU相关初始化参数</h5>
                     <div>
                        <p><code class="codeph">CPU_COUNT</code>初始化参数指定可供Oracle数据库使用的CPU数。
                        </p>
                        <p><span class="italic">实例囚笼</span>是一种使用初始化参数来限制实例可以同时使用的CPU数量的技术。您可以在PDB级别设置<code class="codeph">CPU_COUNT</code> 。如果启用了资源管理器，则PDB将“禁止”（限制）为<code class="codeph">CPU_COUNT</code>指定的CPU数。</p>
                        <p><code class="codeph">CPU_COUNT</code>工作方式与CDB计划中的<code class="codeph">utilization_limit</code>指令相同。但是， <code class="codeph">CPU_COUNT</code>限制以CPU数量而非利用率百分比表示。如果同时指定了<code class="codeph">utilization_limit</code>和<code class="codeph">CPU_COUNT</code> ，则强制执行下限。
                        </p>
                        <p><code class="codeph">CPU_COUNT</code>是有利的，因为当PDB插入新容器时， <code class="codeph">CPU_COUNT</code>设置保留在插入的PDB中。此外，Oracle数据库使用PDB的<code class="codeph">CPU_COUNT</code>设置来派生许多其他PDB参数，例如用于并行执行的参数。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" title="在PDB中使用控制存储器和I / O的初始化参数。">多租户资源管理的初始化参数</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" name="GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1"></a><h3 id="MULTI-GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" class="sect3"><span class="enumeration_section">22.2</span>管理CDB资源计划</h3>
               <div>
                  <p>在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D">关于CDB资源计划</a><br>创建为PDB分配份额和资源限制的CDB资源计划。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594">创建用于管理PDB的CDB资源计划</a><br>要为各个PDB创建CDB资源计划并定义计划的指令，请使用<code class="codeph">DBMS_RESOURCE_MANAGER</code>包。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E">创建用于管理PDB的CDB资源计划：场景</a><br>此方案说明了为各个PDB创建CDB资源计划所涉及的每个步骤。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80">使用PDB性能配置文件创建CDB资源计划</a><br>使用<code class="codeph">DBMS_RESOURCE_MANAGER</code>包为PDB性能概要文件创建CDB资源计划，并定义计划的指令。使用配置文件的每个PDB都采用CDB资源计划指令。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371">为PDB性能配置文件创建CDB资源计划：方案</a><br>此方案说明了为PDB性能配置文件创建CDB资源计划所涉及的步骤。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E05500C-C8C0-4E99-B753-133515175437">启用CDB资源计划</a><br>通过在根目录中设置<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数，可以为CDB启用资源管理器。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697">修改CDB资源计划</a><br>修改CDB资源计划包括更新计划，创建，更新或删除PDB的计划指令以及更新默认指令等任务。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386">禁用CDB资源计划</a><br>通过取消设置CDB根目录中的<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数来禁用CDB的资源管理器。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172">查看有关CDB中计划和指令的信息</a><br>您可以在CDB中查看有关CDB资源计划，CDB资源计划指令和预定义资源计划的信息。</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="使用PL / SQL包过程来管理Oracle Resource Manager（资源管理器），以便将资源分配给多租户容器数据库（CDB）中的可插拔数据库（PDB）。">使用Oracle Resource Manager for PDB</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13777"></a><div class="props_rev_3"><a id="GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" name="GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D"></a><h4 id="MULTI-GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" class="sect4"><span class="enumeration_section">22.2.1</span>关于CDB资源计划</h4>
                  <div>
                     <p>创建为PDB分配份额和资源限制的CDB资源计划。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2">将资源分配给PDB的份额</a><br>要在PDB之间分配资源，请为每个PDB或性能配置文件分配共享值。较高的共享值可为PDB或使用性能配置文件的PDB提供更有保证的资源。
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569">PDB的利用率限制</a><br>利用率限制限制特定PDB或特定PDB性能配置文件的系统资源使用。
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA">PDB的默认指令</a><br>如果未明确定义PDB的指令，PDB将使用PDB的默认指令。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。">管理CDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13943"></a><a id="ADMIN13781"></a><a id="ADMIN13779"></a><div class="props_rev_3"><a id="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" name="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2"></a><h5 id="MULTI-GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" class="sect5"><span class="enumeration_section">22.2.1.1</span>为PDB分配资源的股份</h5>
                     <div>
                        <p>要在PDB之间分配资源，请为每个PDB或性能配置文件分配共享值。较高的共享值可为PDB或使用性能配置文件的PDB提供更有保证的资源。</p>
                        <p>指定使用一个PDB每股价值<code class="codeph">DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE</code>程序和使用一个PDB性能配置<code class="codeph">DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE</code>程序。在这两种情况下， <code class="codeph">shares</code>参数指定PDB的共享值。多个PDB可以使用相同的PDB性能配置文件。
                        </p>
                        <p>下图显示了在CDB资源计划中为其指定了共享值的三个PDB的示例。</p>
                        <div class="figure" id="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2__CACCDGEE">
                           <p class="titleinfigure">图22-1 CDB资源计划中的份额</p><img src="img/admin_vm_101.png" alt="下面是图22-1的描述" title="下面是图22-1的描述" longdesc="img_text/admin_vm_101.html"><br><a href="img_text/admin_vm_101.html">“图22-1 CDB资源计划中的股票”的描述</a></div>
                        <!-- class="figure" -->
                        <p>上图显示共享的总数为7（3加3加1）。<code class="codeph">salespdb</code>和<code class="codeph">servicespdb</code> PDB各自保证3/7的资源，而<code class="codeph">hrpdb</code> PDB保证1/7的资源。但是，当不存在资源争用时，任何PDB都可以使用超过保证的资源量。
                        </p>
                        <p>下表显示了基于共享值的上图中PDB的资源分配。该表假定PDB的负载消耗所有分配的系统资源。</p>
                        <div class="tblformal" id="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2__CACDBDCG">
                           <p class="titleintable">表22-2样本PDB的资源分配</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="样本PDB的资源分配" width="100%" border="1" summary="This table lists system resources and describes how the resources are allocated to the sample pluggable databases." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="21%" id="d102832e2206">资源</th>
                                    <th align="left" valign="bottom" width="44%" id="d102832e2209">资源分配</th>
                                    <th align="left" valign="bottom" width="35%" id="d102832e2212">也可以看看</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d102832e2216" headers="d102832e2206 ">
                                       <p>中央处理器</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d102832e2216 d102832e2209 ">
                                       <p><code class="codeph">salespdb</code>和<code class="codeph">servicespdb</code> PDB可以消耗相同数量的CPU资源。<code class="codeph">salespdb</code>和<code class="codeph">servicespdb</code> PDB每个保证的CPU资源是<code class="codeph">hrpdb</code> PDB的<code class="codeph">hrpdb</code> 。</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d102832e2216 d102832e2212 ">
                                       <p>有关此资源的详细信息，请<a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-514BDECF-BE80-4CCA-A00D-EF37C2CFC435" target="_blank"><span><cite>参见“Oracle数据库管理员指南”</cite></span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d102832e2246" headers="d102832e2206 ">
                                       <p>并行执行服务器</p>
                                    </td>
                                    <td align="left" valign="top" width="44%" headers="d102832e2246 d102832e2209 ">
                                       <p>来自<code class="codeph">salespdb</code>和<code class="codeph">servicespdb</code> PDB的排队并行查询被平均选择。来自<code class="codeph">salespdb</code>和<code class="codeph">servicespdb</code> PDB的排队并行查询的选择频率是来自<code class="codeph">hrpdb</code> PDB的排队并行查询的<code class="codeph">hrpdb</code> 。</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d102832e2246 d102832e2212 ">
                                       <p>有关此资源的详细信息，请<a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-15685C9E-AD79-4342-BFA9-18D478915267" target="_blank"><span><cite>参见“Oracle数据库管理员指南”</cite></span></a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于CDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13783"></a><a id="ADMIN13944"></a><a id="ADMIN13782"></a><div class="props_rev_3"><a id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" name="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569"></a><h5 id="MULTI-GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" class="sect5"><span class="enumeration_section">22.2.1.2</span> PDB的利用率限制</h5>
                     <div>
                        <p>利用率限制限制特定PDB或特定PDB性能配置文件的系统资源使用。</p>
                        <p>您可以为CPU和并行执行服务器指定利用率限制。PDB的利用率限制由CDB资源计划设置。</p>
                        <p>下表介绍了PDB的使用限制以及PDB达到利用率限制时所采取的资源管理器操作。对于使用PDB性能配置文件指定的限制，该限制适用于使用PDB性能配置文件的每个PDB。例如，如果<code class="codeph">pdb1</code>和<code class="codeph">pdb20</code>具有性能配置文件<code class="codeph">BRONZE</code> ，并且如果<code class="codeph">BRONZE</code>的限制设置为10％，则<code class="codeph">pdb1</code>具有10％的限制， <code class="codeph">pdb20</code>具有10％的限制。
                        </p>
                        <div class="tblformalwide" id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__CACECBGJ">
                           <p class="titleintable">表22-3 PDB的利用率限制</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="PDB的利用率限制" width="100%" border="1" summary="This table lists each resource, the resource usage limit for each resource, and the Resource Manager action when a limit is reached." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="17%" id="d102832e2403">资源</th>
                                    <th align="left" valign="bottom" width="41%" id="d102832e2406">资源利用限制</th>
                                    <th align="left" valign="bottom" width="41%" id="d102832e2409">达到限制时的资源管理器操作</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d102832e2414" headers="d102832e2403 ">
                                       <p>中央处理器</p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d102832e2414 d102832e2406 ">
                                       <p>连接到PDB的会话的CPU利用率限制由<code class="codeph">DBMS_RESOURCE_MANAGER</code>程序包的子程序中的<code class="codeph">utilization_limit</code>参数设置。<code class="codeph">utilization_limit</code>参数指定PDB可以使用的系统资源的百分比。值范围为0到100。
                                       </p>
                                       <p>您还可以通过设置初始化参数<code class="codeph">CPU_COUNT</code>来限制PDB的CPU。例如，如果将<code class="codeph">CPU_COUNT</code>设置为<code class="codeph">8</code> ，则PDB在任何时候都不能使用超过8个CPU。如果同时指定了<code class="codeph">utilization_limit</code>和<code class="codeph">CPU_COUNT</code> ，则会强制执行更严格（更低）的值。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d102832e2414 d102832e2409 ">
                                       <p>资源管理器限制PDB会话，以便PDB的CPU利用率不超过利用率限制。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d102832e2450" headers="d102832e2403 ">
                                       <p>并行执行服务器</p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d102832e2450 d102832e2406 ">
                                       <p>您可以通过并行语句排队来限制PDB中并行执行服务器的数量。限制是一个“排队点”，因为数据库在达到限制时会对并行查询进行排队。</p>
                                       <p>您可以通过以下任一方式设置限制（排队点）：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>PDB中<code class="codeph">PARALLEL_SERVERS_TARGET</code>初始化参数设置的值</p>
                                          </li>
                                          <li>
                                             <p>CDB根目录中<code class="codeph">PARALLEL_SERVERS_TARGET</code>初始化参数设置的值乘以CDB资源管理器计划中为PDB设置的<code class="codeph">parallel_server_limit</code>指令的值</p>
                                             <p>例如，如果CDB根目录中的<code class="codeph">PARALLEL_SERVERS_TARGET</code>初始化参数设置为200，并且PDB的<code class="codeph">parallel_server_limit</code>指令设置为10％，则PDB的利用率限制为20个并行执行服务器（200 * .10）。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>如果以前两种方式设置限制，则使用两者的下限。有关<code class="codeph">PARALLEL_SERVERS_TARGET</code>的默认值，请参见<a href="../refrn/PARALLEL_MAX_SERVERS.html#REFRN-GUID-B6CE9EA3-B846-4AA7-B668-FD3BEE433A24" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> 。</p>
                                       <p><span class="bold">注意：</span> Oracle建议在CDB计划中使用<code class="codeph">PARALLEL_SERVERS_TARGET</code>初始化参数而不是<code class="codeph">parallel_server_limit</code>指令。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d102832e2450 d102832e2409 ">
                                       <p>当PDB使用的并行执行服务器数量超过限制时，Resource Manager会对并行查询进行排队。</p>
                                       <p><span class="bold">注意：</span>在CDB中，并行语句根据PDB和CDB级别的<code class="codeph">PARALLEL_SERVERS_TARGET</code>设置排队。当PDB使用的并行服务器数超过PDB的目标数或者所有PDB使用的并行服务器数超过CDB的目标数时，语句将排队。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>下图显示了在CDB资源计划中为其指定了共享和利用率限制的三个PDB的示例。</p>
                        <div class="figure" id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__CACJBEJH">
                           <p class="titleinfigure">图22-2 CDB资源计划中的份额和利用率限制</p><img src="img/admin_vm_104.png" alt="下面是图22-2的描述" title="下面是图22-2的描述" longdesc="img_text/admin_vm_104.html"><br><a href="img_text/admin_vm_104.html">“图22-2 CDB资源计划中的份额和利用率限制”的说明</a></div>
                        <!-- class="figure" -->
                        <p>上图显示<code class="codeph">salespdb</code>和<code class="codeph">servicespdb</code> PDB没有利用率限制，因为<code class="codeph">utilization_limit</code>和<code class="codeph">parallel_server_limit</code>都设置为100％。但是， <code class="codeph">hrpdb</code> PDB限制为适用系统资源的70％，因为<code class="codeph">utilization_limit</code>和<code class="codeph">parallel_server_limit</code>都设置为70％。
                        </p>
                        <div class="infoboxnote" id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__GUID-54FCF13B-7245-4A9C-8B4F-4ED424A7F9D4">
                           <p class="notep1">注意：</p>
                           <p>此方案假定<code class="codeph">PARALLEL_SERVERS_TARGET</code>初始化参数未指定PDB中的下限。当<code class="codeph">PARALLEL_SERVERS_TARGET</code>初始化参数指定PDB中并行执行服务器的下限时，使用下限。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__GUID-52E33166-F9B5-4642-A73E-BA364EB4818B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-B1E0B0A8-2709-4A1C-821D-9CEC35B03603" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../refrn/CPU_COUNT.html#REFRN-GUID-78CDCDE7-5A1D-4AC1-B5BD-B185CB296416" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">CPU_COUNT</code></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于CDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13785"></a><a id="ADMIN13945"></a><a id="ADMIN13784"></a><div class="props_rev_3"><a id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" name="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA"></a><h5 id="MULTI-GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" class="sect5"><span class="enumeration_section">22.2.1.3</span> PDB的默认指令</h5>
                     <div>
                        <p>如果未明确定义PDB的指令，PDB将使用PDB的默认指令。</p>
                        <p>下表显示了PDB的初始默认指令的属性。</p>
                        <div class="tblformal" id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACGHHJA">
                           <p class="titleintable">表22-4 PDB的初始缺省指令属性</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PDB的初始默认指令属性" width="100%" border="1" summary="This table shows each default directive and its value." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="50%" id="d102832e2675">指令属性</th>
                                    <th align="left" valign="bottom" width="50%" id="d102832e2678">值</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d102832e2683" headers="d102832e2675 ">
                                       <p><code class="codeph">分享</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d102832e2683 d102832e2678 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d102832e2691" headers="d102832e2675 ">
                                       <p><code class="codeph">utilization_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d102832e2691 d102832e2678 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d102832e2699" headers="d102832e2675 ">
                                       <p><code class="codeph">parallel_server_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d102832e2699 d102832e2678 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>当PDB插入CDB并且没有为其定义指令时，PDB使用PDB的默认指令。</p>
                        <p>您可以为新PDB创建新指令。您还可以使用<code class="codeph">DBMS_RESOURCE_MANAGER</code>程序包中的<code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code>过程更改PDB的默认指令属性值。
                        </p>
                        <p>从CDB拔出PDB时，将保留PDB的指令。如果将相同的PDB插回CDB，则如果未手动删除该指令，则使用为其定义的指令。</p>
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">图22-3</a>显示了CDB资源计划中的默认指令示例。
                        </p>
                        <div class="figure" id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">
                           <p class="titleinfigure">图22-3 CDB资源计划中的默认指令</p><img src="img/admin_vm_103.png" alt="下面是图22-3的描述" title="下面是图22-3的描述" longdesc="img_text/admin_vm_103.html"><br><a href="img_text/admin_vm_103.html">“图22-3 CDB资源计划中的默认指令”的描述</a></div>
                        <!-- class="figure" -->
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">图22-3</a>显示默认PDB指令指定<code class="codeph">share</code>为1， <code class="codeph">utilization_limit</code>为50％， <code class="codeph">parallel_server_limit</code>为50％。任何属于CDB并且没有为其定义的指令的PDB都使用默认的PDB指令。<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">图22-3</a>显示了使用默认PDB指令的<code class="codeph">testingpdb</code> <code class="codeph">marketingpdb</code>和<code class="codeph">testingpdb</code> 。因此， <code class="codeph">marketingpdb</code>和<code class="codeph">testingpdb</code>各获得1份，利用率限制为50。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__GUID-4D81CAFE-2132-4F3D-BF23-916FDBE5FA4A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D" title="在CDB中创建PDB时，可以使用CREATE_CDB_PLAN_DIRECTIVE过程为PDB创建CDB资源计划指令。该指令指定如何将资源分配给新PDB。">为PDB创建新的CDB资源计划指令</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD" title="您可以使用UPDATE_CDB_DEFAULT_DIRECTIVE过程更新CDB资源计划中PDB的默认指令。默认指令适用于尚未定义特定指令的PDB。">更新CDB资源计划中PDB的默认指令</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="您可以使用各种技术创建PDB，应用程序容器和应用程序种子。">创建和删除PDB和应用程序容器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="removing-a-pdb.html#GUID-893E1D67-BD95-4757-B862-03AD13AFF722" title="就像您可以将PDB插入CDB一样，您可以从CDB上拔下PDB。">从CDB上拔掉PDB</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关并行服务器限制的信息，请参见<a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-CDF30CA7-5A14-4C17-8C32-746F0763A7C9" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于CDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13790"></a><div class="props_rev_3"><a id="GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594" name="GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594"></a><h4 id="MULTI-GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594" class="sect4"><span class="enumeration_section">22.2.2</span>创建用于管理PDB的CDB资源计划</h4>
                  <div>
                     <p>要为各个PDB创建CDB资源计划并定义计划的指令，请使用<code class="codeph">DBMS_RESOURCE_MANAGER</code>包。
                     </p>
                     <div class="section">
                        <p>为各个PDB创建CDB资源计划的一般步骤如下：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>使用<code class="codeph">CREATE_PENDING_AREA</code>过程创建挂起区域。</span></li>
                        <li><span>使用<code class="codeph">CREATE_CDB_PLAN</code>过程创建CDB资源计划。</span></li>
                        <li><span>使用<code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code>过程为PDB创建指令。</span></li>
                        <li><span>（可选）使用<code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code>过程更新默认PDB指令。</span></li>
                        <li><span>使用<code class="codeph">VALIDATE_PENDING_AREA</code>过程验证待处理区域。</span></li>
                        <li><span>使用<code class="codeph">SUBMIT_PENDING_AREA</code>过程提交待处理区域。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。">管理CDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13792"></a><a id="ADMIN13793"></a><a id="ADMIN13795"></a><a id="ADMIN13796"></a><a id="ADMIN13797"></a><a id="ADMIN13798"></a><a id="ADMIN13799"></a><a id="ADMIN13800"></a><a id="ADMIN13801"></a><a id="ADMIN13791"></a><div class="props_rev_3"><a id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E" name="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E"></a><h4 id="MULTI-GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E" class="sect4"><span class="enumeration_section">22.2.3</span>创建用于管理PDB的CDB资源计划：场景</h4>
                  <div>
                     <p>此方案说明了为各个PDB创建CDB资源计划所涉及的每个步骤。</p>
                     <div class="section">
                        <p>该方案假定您要为名为<code class="codeph">newcdb</code>的CDB创建CDB资源计划。该计划包括每个PDB的指令。在此方案中，您还将更新默认指令和AutoTask指令。
                        </p>
                        <p>使用<code class="codeph">DBMS_RESOURCE_MANAGER</code>包中的各种过程定义指令。使用这些过程中的参数定义每个指令的属性。<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACJAEDB" title="此表列出了每个指令参数，并提供了每个指令参数的说明。">表22-5</a>描述了计划中的指令类型。
                        </p>
                        <div class="tblformal" id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACJAEDB">
                           <p class="titleintable">表22-5 CDB资源计划中PDB指令的属性</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CDB资源计划中PDB指令的属性" width="100%" border="1" summary="This table lists each directive parameter and provides a description of each directive parameter." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d102832e3052">指令属性</th>
                                    <th align="left" valign="bottom" width="38%" id="d102832e3055">描述</th>
                                    <th align="left" valign="bottom" width="28%" id="d102832e3058">也可以看看</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d102832e3063" headers="d102832e3052 ">
                                       <p><code class="codeph">分享</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3063 d102832e3055 ">
                                       <p>CPU和并行执行服务器资源的资源分配份额。</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3063 d102832e3058 ">
                                       <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" title="要在PDB之间分配资源，请为每个PDB或性能配置文件分配共享值。较高的共享值可为PDB或使用性能配置文件的PDB提供更有保证的资源。">为PDB分配资源的份额</a> ”</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d102832e3079" headers="d102832e3052 ">
                                       <p><code class="codeph">utilization_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3079 d102832e3055 ">
                                       <p>CPU的资源利用率限制。</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3079 d102832e3058 ">
                                       <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="利用率限制限制特定PDB或特定PDB性能配置文件的系统资源使用。">PDB的利用率限制</a> ”</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d102832e3095" headers="d102832e3052 ">
                                       <p><code class="codeph">parallel_server_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3095 d102832e3055 ">
                                       <p>在排队并行语句之前PDB可以使用的并行执行服务器的最大百分比。</p>
                                       <p>为PDB指定<code class="codeph">parallel_server_limit</code>指令时，限制是CDB根的<code class="codeph">PARALLEL_SERVERS_TARGET</code>值乘以<code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code>过程中<code class="codeph">parallel_server_limit</code>参数的值。
                                       </p>
                                       <p><span class="bold">注意：</span> Oracle建议在CDB计划中使用<code class="codeph">PARALLEL_SERVERS_TARGET</code>初始化参数而不是<code class="codeph">parallel_server_limit</code>指令。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3095 d102832e3058 ">
                                       <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="利用率限制限制特定PDB或特定PDB性能配置文件的系统资源使用。">PDB的利用率限制</a> ”</span></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="此表列出了每个可插拔数据库，并显示了每个可插拔数据库的以下指令的值：mgmt_p1，utilization_limit和parallel_server_limit。">表22-6</a>说明了CDB资源计划如何使用<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACJAEDB" title="此表列出了每个指令参数，并提供了每个指令参数的说明。">表22-5中</a>描述的指令属性为其PDB分配资源。
                        </p>
                        <div class="tblformalwide" id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF">
                           <p class="titleintable">表22-6 CDB资源计划中PDB的样本指令</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="CDB资源计划中PDB的样本指令" width="100%" border="1" summary="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d102832e3157">PDB</th>
                                    <th align="left" valign="bottom" width="27%" id="d102832e3160">股票指令</th>
                                    <th align="left" valign="bottom" width="27%" id="d102832e3163">utilization_limit指令</th>
                                    <th align="left" valign="bottom" width="27%" id="d102832e3166">parallel_server_limit指令</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e3171" headers="d102832e3157 ">
                                       <p><code class="codeph">salespdb</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3171 d102832e3160 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3171 d102832e3163 ">
                                       <p>无限</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3171 d102832e3166 ">
                                       <p>无限</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e3185" headers="d102832e3157 ">
                                       <p><code class="codeph">servicespdb</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3185 d102832e3160 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3185 d102832e3163 ">
                                       <p>无限</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3185 d102832e3166 ">
                                       <p>无限</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e3199" headers="d102832e3157 ">
                                       <p><code class="codeph">hrpdb</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3199 d102832e3160 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3199 d102832e3163 ">
                                       <p>70</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3199 d102832e3166 ">
                                       <p>70</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e3213" headers="d102832e3157 ">
                                       <p>默认</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3213 d102832e3160 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3213 d102832e3163 ">
                                       <p>50</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3213 d102832e3166 ">
                                       <p>50</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e3226" headers="d102832e3157 ">
                                       <p>AUTOTASK</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3226 d102832e3160 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3226 d102832e3163 ">
                                       <p>75</p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d102832e3226 d102832e3166 ">
                                       <p>75</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><code class="codeph">salespdb</code>和<code class="codeph">servicespdb</code> PDB比CDB中的其他PDB更重要。因此，它们获得更高的份额（3），无限的CPU利用率资源和无限的并行执行服务器资源。
                        </p>
                        <p>默认指令适用于尚未定义特定指令的PDB。对于这种情况，假设CDB有几个使用默认指令的PDB。此方案更新默认指令。</p>
                        <p>此外，此方案更新AutoTask指令。AutoTask指令适用于在根维护窗口中运行的自动维护任务。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__GUID-B1D3CCB7-977A-4CF4-80ED-936368A651E7">要创建CDB资源计划：</p>
                        <ol>
                           <li>
                              <p>使用<code class="codeph">CREATE_PENDING_AREA</code>过程创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">CREATE_CDB_PLAN</code>过程创建名为<code class="codeph">newcdb_plan</code>的CDB资源计划：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN（plan =&gt;'newcdb_plan'，comment =&gt;'newcdb的CDB资源计划'）;结束; /</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code>过程为PDB创建CDB资源计划指令。每个指令指定如何将资源分配给特定PDB。</p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="此表列出了每个可插拔数据库，并显示了每个可插拔数据库的以下指令的值：mgmt_p1，utilization_limit和parallel_server_limit。">表22-6</a> <code class="codeph">hrpdb</code>了此方案中<code class="codeph">salespdb</code> ， <code class="codeph">servicespdb</code>和<code class="codeph">hrpdb</code> PDB的指令。运行以下过程以创建这些指令：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE（plan =&gt;'newcdb_plan'，pluggable_database =&gt;'salespdb'，shares =&gt; 3，utilization_limit =&gt; 100，parallel_server_limit =&gt; 100）;结束; / BEGIN DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE（plan =&gt;'newcdb_plan'，pluggable_database =&gt;'servicespdb'，shares =&gt; 3，utilization_limit =&gt; 100，parallel_server_limit =&gt; 100）;结束; / BEGIN DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE（plan =&gt;'newcdb_plan'，pluggable_database =&gt;'hrpdb'，shares =&gt; 1，utilization_limit =&gt; 70，parallel_server_limit =&gt; 70）;结束; /</code></pre><p>此CDB中的所有其他PDB都使用默认的PDB指令。</p>
                           </li>
                           <li>
                              <p>如果PDB的当前默认CDB资源计划指令不符合您的要求，则使用<code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code>过程更新指令。
                              </p>
                              <p>默认指令适用于尚未定义特定指令的PDB。有关详细信息，请参阅<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="如果未明确定义PDB的指令，PDB将使用PDB的默认指令。">PDB的默认指令</a> ”</span> 。
                              </p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="此表列出了每个可插拔数据库，并显示了每个可插拔数据库的以下指令的值：mgmt_p1，utilization_limit和parallel_server_limit。">表22-6</a>说明了PDB在此方案中使用的默认指令。运行以下过程以更新默认指令：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.UPDATE_CDB_DEFAULT_DIRECTIVE（plan =&gt;'newcdb_plan'，new_shares =&gt; 1，new_utilization_limit =&gt; 50，new_parallel_server_limit =&gt; 50）;结束; /</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">VALIDATE_PENDING_AREA</code>过程验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">SUBMIT_PENDING_AREA</code>过程提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。">管理CDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80" name="GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80"></a><h4 id="MULTI-GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80" class="sect4"><span class="enumeration_section">22.2.4</span>使用PDB性能配置文件创建CDB资源计划</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_RESOURCE_MANAGER</code>包为PDB性能概要文件创建CDB资源计划，并定义计划的指令。使用配置文件的每个PDB都采用CDB资源计划指令。
                     </p>
                     <div class="section">
                        <p>使用PDB性能配置文件创建CDB资源计划的一般步骤如下：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>使用<code class="codeph">CREATE_PENDING_AREA</code>过程创建挂起区域。</span></li>
                        <li><span>使用<code class="codeph">CREATE_CDB_PLAN</code>过程创建CDB资源计划。</span></li>
                        <li><span>使用<code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code>过程为PDB性能概要文件创建指令。</span></li>
                        <li><span>（可选）使用<code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code>过程更新默认PDB指令。</span></li>
                        <li><span>使用<code class="codeph">VALIDATE_PENDING_AREA</code>过程验证待处理区域。</span></li>
                        <li><span>使用<code class="codeph">SUBMIT_PENDING_AREA</code>过程提交待处理区域。</span></li>
                        <li><span>对于将使用配置文件的每个PDB，请设置<code class="codeph">DB_PERFORMANCE_PROFILE</code>初始化参数并指定配置文件名称。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。">管理CDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371" name="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371"></a><h4 id="MULTI-GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371" class="sect4"><span class="enumeration_section">22.2.5</span>为PDB性能配置文件创建CDB资源计划：方案</h4>
                  <div>
                     <p>此方案说明了为PDB性能配置文件创建CDB资源计划所涉及的步骤。</p>
                     <div class="section"> 
                        <p>该方案假定您要为名为<code class="codeph">newcdb</code>的CDB创建CDB资源计划。该计划包括每个PDB性能配置文件的指令。在此方案中，您还将更新默认指令和AutoTask指令。
                        </p>
                        <p>在CDB资源计划中，您为每个配置文件命名。在每个PDB中，设置<code class="codeph">DB_PERFORMANCE_PROFILE</code>初始化参数以指定PDB使用的PDB性能配置文件。
                        </p>
                        <p>使用<code class="codeph">DBMS_RESOURCE_MANAGER</code>包中的各种过程定义指令。使用这些过程中的参数定义每个指令的属性。下表描述了计划中的指令类型。
                        </p>
                        <div class="tblformal" id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACJAEDB">
                           <p class="titleintable">表22-7 CDB资源计划中PDB性能配置文件指令的属性</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CDB资源计划中PDB性能概要指令的属性" width="100%" border="1" summary="This table lists each directive parameter and provides a description of each directive parameter." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d102832e3593">指令属性</th>
                                    <th align="left" valign="bottom" width="38%" id="d102832e3596">描述</th>
                                    <th align="left" valign="bottom" width="29%" id="d102832e3599">也可以看看</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d102832e3603" headers="d102832e3593 ">
                                       <p><code class="codeph">分享</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3603 d102832e3596 ">
                                       <p>CPU和并行执行服务器资源的资源分配份额。</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d102832e3603 d102832e3599 "><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" title="要在PDB之间分配资源，请为每个PDB或性能配置文件分配共享值。较高的共享值可为PDB或使用性能配置文件的PDB提供更有保证的资源。">为PDB分配资源的份额</a> ”</span></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d102832e3618" headers="d102832e3593 ">
                                       <p><code class="codeph">utilization_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3618 d102832e3596 ">
                                       <p>CPU的资源利用率限制。</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d102832e3618 d102832e3599 "><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="利用率限制限制特定PDB或特定PDB性能配置文件的系统资源使用。">PDB的利用率限制</a> ”</span></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d102832e3633" headers="d102832e3593 ">
                                       <p><code class="codeph">parallel_server_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d102832e3633 d102832e3596 ">
                                       <p>PDB可以使用的并行执行服务器的最大百分比。</p>
                                       <p>为PDB性能概要文件指定<code class="codeph">parallel_server_limit</code>指令时，该限制是CDB根目录中<code class="codeph">PARALLEL_SERVERS_TARGET</code>初始化参数设置的值乘以<code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code>过程中<code class="codeph">parallel_server_limit</code>参数的值。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d102832e3633 d102832e3599 ">
                                       <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="利用率限制限制特定PDB或特定PDB性能配置文件的系统资源使用。">PDB的利用率限制</a> ”</span></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>下表描述了CDB资源计划如何使用<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACJAEDB" title="此表列出了每个指令参数，并提供了每个指令参数的说明。">表22-7中</a>所述的指令属性将资源分配给其PDB性能配置文件。
                        </p>
                        <div class="tblformalwide" id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACBBBCF">
                           <p class="titleintable">表22-8 CDB资源计划中PDB性能配置文件的示例指令</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="CDB资源计划中PDB性能配置文件的样本指令" width="100%" border="1" summary="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="16%" id="d102832e3681">PDB</th>
                                    <th align="left" valign="bottom" width="25%" id="d102832e3684">股票指令</th>
                                    <th align="left" valign="bottom" width="28%" id="d102832e3687">utilization_limit指令</th>
                                    <th align="left" valign="bottom" width="31%" id="d102832e3690">parallel_server_limit指令</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d102832e3695" headers="d102832e3681 ">
                                       <p><code class="codeph">金</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d102832e3695 d102832e3684 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3695 d102832e3687 ">
                                       <p>无限</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d102832e3695 d102832e3690 ">
                                       <p>无限</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d102832e3709" headers="d102832e3681 ">
                                       <p><code class="codeph">银</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d102832e3709 d102832e3684 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3709 d102832e3687 ">
                                       <p>40</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d102832e3709 d102832e3690 ">
                                       <p>40</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d102832e3723" headers="d102832e3681 ">
                                       <p><code class="codeph">青铜</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d102832e3723 d102832e3684 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3723 d102832e3687 ">
                                       <p>20</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d102832e3723 d102832e3690 ">
                                       <p>20</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d102832e3737" headers="d102832e3681 ">
                                       <p>默认</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d102832e3737 d102832e3684 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3737 d102832e3687 ">
                                       <p>10</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d102832e3737 d102832e3690 ">
                                       <p>10</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d102832e3750" headers="d102832e3681 ">
                                       <p>AUTOTASK</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d102832e3750 d102832e3684 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d102832e3750 d102832e3687 ">
                                       <p>60</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d102832e3750 d102832e3690 ">
                                       <p>60</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>默认指令适用于尚未定义特定指令的PDB。对于这种情况，假设CDB有几个使用默认指令的PDB。此方案更新默认指令。</p>
                        <p>此外，此方案更新AutoTask指令。AutoTask指令适用于在根维护窗口中运行的自动维护任务。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__GUID-FBD9ECAF-88A7-4963-B857-25B139057C63">为PDB性能配置文件创建CDB资源计划：</p>
                        <ol>
                           <li>
                              <p>对于将使用配置文件的每个PDB，将<code class="codeph">DB_PERFORMANCE_PROFILE</code>初始化参数设置为PDB将使用的配置文件的名称。
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>运行<code class="codeph">ALTER SYSTEM</code>语句以设置参数。
                                    </p>
                                    <p>例如，将PDB作为当前容器，运行以下SQL语句：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET DB_PERFORMANCE_PROFILE = gold SCOPE = spfile;</code></pre></li>
                                 <li>
                                    <p>关闭PDB：</p><pre class="pre codeblock"><code>ALTER PLOGGABLE DATABASE CLOSE IMMEDIATE;</code></pre></li>
                                 <li>
                                    <p>打开PDB：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE OPEN;</code></pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>使用<code class="codeph">CREATE_PENDING_AREA</code>过程创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">CREATE_CDB_PLAN</code>过程创建名为<code class="codeph">newcdb_plan</code>的CDB资源计划：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN（plan =&gt;'newcdb_plan'，comment =&gt;'newcdb的CDB资源计划'）;结束; /</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code>过程为PDB创建CDB资源计划指令。每个指令指定如何将资源分配给特定PDB。</p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="此表列出了每个可插拔数据库，并显示了每个可插拔数据库的以下指令的值：mgmt_p1，utilization_limit和parallel_server_limit。">表22-6</a>描述了此方案中的<code class="codeph">gold</code> ， <code class="codeph">silver</code>和<code class="codeph">bronze</code>配置文件的指令。运行以下过程以创建这些指令：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE（plan =&gt;'newcdb_plan'，profile =&gt;'gold'，shares =&gt; 3，utilization_limit =&gt; 100，parallel_server_limit =&gt; 100）;结束; / BEGIN DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE（plan =&gt;'newcdb_plan'，profile =&gt;'silver'，shares =&gt; 2，utilization_limit =&gt; 40，parallel_server_limit =&gt; 40）;结束; / BEGIN DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE（plan =&gt;'newcdb_plan'，profile =&gt;'bronze'，shares =&gt; 1，utilization_limit =&gt; 20，parallel_server_limit =&gt; 20）;结束; /</code></pre><p>此CDB中的所有其他PDB都使用默认的PDB指令。</p>
                           </li>
                           <li>
                              <p>如果PDB的当前默认CDB资源计划指令不符合您的要求，则使用<code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code>过程更新指令。
                              </p>
                              <p>默认指令适用于尚未定义特定指令的PDB。</p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="此表列出了每个可插拔数据库，并显示了每个可插拔数据库的以下指令的值：mgmt_p1，utilization_limit和parallel_server_limit。">表22-6</a>说明了PDB在此方案中使用的默认指令。运行以下过程以更新默认指令：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.UPDATE_CDB_DEFAULT_DIRECTIVE（plan =&gt;'newcdb_plan'，new_shares =&gt; 1，new_utilization_limit =&gt; 10，new_parallel_server_limit =&gt; 10）;结束; /</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">VALIDATE_PENDING_AREA</code>过程验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">SUBMIT_PENDING_AREA</code>过程提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__GUID-4D81CAFE-2132-4F3D-BF23-916FDBE5FA4A">
                        <p class="notep1">也可以看看：</p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="如果未明确定义PDB的指令，PDB将使用PDB的默认指令。">PDB的默认指令</a> ”</span></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。">管理CDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13803"></a><div class="props_rev_3"><a id="GUID-3E05500C-C8C0-4E99-B753-133515175437" name="GUID-3E05500C-C8C0-4E99-B753-133515175437"></a><h4 id="MULTI-GUID-3E05500C-C8C0-4E99-B753-133515175437" class="sect4"><span class="enumeration_section">22.2.6</span>启用CDB资源计划</h4>
                  <div>
                     <p>通过在根目录中设置<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数，可以为CDB启用资源管理器。
                     </p>
                     <div class="section">
                        <p>此参数指定顶部计划，该计划是用于当前CDB实例的计划。如果未使用此参数指定计划，则不会启用资源管理器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E05500C-C8C0-4E99-B753-133515175437__GUID-B570282E-B58C-4020-8C61-91D65C3F5C4D">先决条件</p>
                        <p>在启用CDB资源计划之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E05500C-C8C0-4E99-B753-133515175437__GUID-354B4FCB-A05A-47F3-A6FA-FFB3136DC323">要启用CDB资源计划：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，确保当前容器是根。</p>
                           </li>
                           <li>
                              <p>请执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">ALTER SYSTEM</code>语句将<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数设置为CDB资源计划。
                                    </p>
                                    <p>以下示例使用<code class="codeph">ALTER SYSTEM</code>语句将CDB资源计划设置为<code class="codeph">newcdb_plan</code> ：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET RESOURCE_MANAGER_PLAN ='newcdb_plan';</code></pre></li>
                                 <li>
                                    <p>在文本初始化参数文件中，将<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数设置为CDB资源计划，然后重新启动CDB。</p>
                                    <p>以下示例在初始化参数文件中将CDB资源计划设置为<code class="codeph">newcdb_plan</code> ：</p><pre class="pre codeblock"><code>RESOURCE_MANAGER_PLAN ='newcdb_plan'</code></pre></li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3E05500C-C8C0-4E99-B753-133515175437__GUID-E53FEF9C-527E-493B-89ED-EB018DD4197C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../admin/oracle-scheduler-concepts.html#ADMIN-GUID-6B8C0335-D36B-44D3-95BC-82FA2141D967" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解如何使用Oracle Scheduler安排更改CDB资源计划</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。">管理CDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13816"></a><div class="props_rev_3"><a id="GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" name="GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697"></a><h4 id="MULTI-GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" class="sect4"><span class="enumeration_section">22.2.7</span>修改CDB资源计划</h4>
                  <div>
                     <p>修改CDB资源计划包括更新计划，创建，更新或删除PDB的计划指令以及更新默认指令等任务。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-548307C2-72BE-436E-B843-4419CD77540D">更新CDB资源计划</a><br>您可以使用<code class="codeph">UPDATE_CDB_PLAN</code>过程更新CDB资源计划以更改其注释。
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3">管理PDB的CDB资源计划指令</a><br>您可以为PDB创建，更新和删除CDB资源计划指令。</li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71">管理PDB性能配置文件的CDB资源计划指令</a><br>您可以为PDB性能配置文件创建，更新和删除CDB资源计划指令。
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD">更新CDB资源计划中PDB的默认指令</a><br>您可以使用<code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code>过程更新CDB资源计划中PDB的默认指令。默认指令适用于尚未定义特定指令的PDB。
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0">更新CDB资源计划中维护任务的默认指令</a><br>您可以使用<code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code>过程更新CDB资源计划中的AutoTask指令。AutoTask指令适用于在根维护窗口中运行的自动维护任务。
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB">删除CDB资源计划</a><br>您可以使用<code class="codeph">DELETE_CDB_PLAN</code>过程删除CDB资源计划。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。">管理CDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13817"></a><div class="props_rev_3"><a id="GUID-548307C2-72BE-436E-B843-4419CD77540D" name="GUID-548307C2-72BE-436E-B843-4419CD77540D"></a><h5 id="MULTI-GUID-548307C2-72BE-436E-B843-4419CD77540D" class="sect5"><span class="enumeration_section">22.2.7.1</span>更新CDB资源计划</h5>
                     <div>
                        <p>您可以使用<code class="codeph">UPDATE_CDB_PLAN</code>过程更新CDB资源计划以更改其注释。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-548307C2-72BE-436E-B843-4419CD77540D__GUID-638B4EB2-BF6A-41D7-8358-D09EB531BE4D">先决条件</p>
                           <p>在更新CDB资源计划之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-548307C2-72BE-436E-B843-4419CD77540D__GUID-15940CB8-1480-49F8-9277-8672E08BC0C1">要更新CDB资源计划：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，确保当前容器是根。</p>
                              </li>
                              <li>
                                 <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                              <li>
                                 <p>运行<code class="codeph">UPDATE_CDB_PLAN</code>过程，并在<code class="codeph">new_comment</code>参数中输入新注释。
                                 </p>
                                 <p>例如，以下过程更改<code class="codeph">newcdb_plan</code> CDB资源计划的注释：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.UPDATE_CDB_PLAN（plan =&gt;'newcdb_plan'，new_comment =&gt;'newcdb中PDB的CDB计划'）;结束; /</code></pre></li>
                              <li>
                                 <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                              <li>
                                 <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-548307C2-72BE-436E-B843-4419CD77540D__GUID-D9FFF20D-39F2-489C-8529-5912B530D2DF">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="修改CDB资源计划包括更新计划，创建，更新或删除PDB的计划指令以及更新默认指令等任务。">修改CDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" name="GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3"></a><h5 id="MULTI-GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" class="sect5"><span class="enumeration_section">22.2.7.2</span>管理PDB的CDB资源计划指令</h5>
                     <div>
                        <p>您可以为PDB创建，更新和删除CDB资源计划指令。</p>
                        <p>本节包含以下主题：</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D">为PDB创建新的CDB资源计划指令</a><br>在CDB中创建PDB时，可以使用<code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code>过程为PDB创建CDB资源计划指令。该指令指定如何将资源分配给新PDB。</li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-FF00B9A0-293F-4544-9121-104E53F898B9">更新PDB的CDB资源计划指令</a><br>您可以使用<code class="codeph">UPDATE_CDB_PLAN_DIRECTIVE</code>过程更新PDB的CDB资源计划指令。该指令指定如何将资源分配给PDB。</li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119">删除PDB的CDB资源计划指令</a><br>您可以使用<code class="codeph">DELETE_CDB_PLAN_DIRECTIVE</code>过程删除PDB的CDB资源计划指令。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="修改CDB资源计划包括更新计划，创建，更新或删除PDB的计划指令以及更新默认指令等任务。">修改CDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN13819"></a><div class="props_rev_3"><a id="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D" name="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D"></a><h6 id="MULTI-GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D" class="sect6"><span class="enumeration_section">22.2.7.2.1</span>为PDB创建新的CDB资源计划指令</h6>
                        <div>
                           <p>在CDB中创建PDB时，可以使用<code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code>过程为PDB创建CDB资源计划指令。该指令指定如何将资源分配给新PDB。</p>
                           <div class="section">
                              <p class="subhead3" id="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D__GUID-EC5C95B8-5B27-448A-B4FA-E4CA2996343E">先决条件</p>
                              <p>在为PDB创建新的CDB资源计划指令之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D__GUID-FBD94788-E2E5-4559-8AFE-A94C5CF2C133">要为PDB创建新的CDB资源计划指令：</p>
                              <ol>
                                 <li>
                                    <p>在SQL * Plus中，确保当前容器是根。</p>
                                 </li>
                                 <li>
                                    <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>运行<code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code>过程，并为新PDB指定适当的值。</p>
                                    <p>例如，以下过程将资源分配给<code class="codeph">newcdb_plan</code> CDB资源计划中名为<code class="codeph">operpdb</code>的PDB：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE（plan =&gt;'newcdb_plan'，pluggable_database =&gt;'operpdb'，shares =&gt; 1，utilization_limit =&gt; 20，parallel_server_limit =&gt; 30）;结束; /</code></pre></li>
                                 <li>
                                    <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D__GUID-99D4A9C7-DEAF-4FEE-A287-7D0E7B7E8454">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" title="您可以为PDB创建，更新和删除CDB资源计划指令。">管理PDB的CDB资源计划指令</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13821"></a><div class="props_rev_3"><a id="GUID-FF00B9A0-293F-4544-9121-104E53F898B9" name="GUID-FF00B9A0-293F-4544-9121-104E53F898B9"></a><h6 id="MULTI-GUID-FF00B9A0-293F-4544-9121-104E53F898B9" class="sect6"><span class="enumeration_section">22.2.7.2.2</span>更新PDB的CDB资源计划指令</h6>
                        <div>
                           <p>您可以使用<code class="codeph">UPDATE_CDB_PLAN_DIRECTIVE</code>过程更新PDB的CDB资源计划指令。该指令指定如何将资源分配给PDB。</p>
                           <div class="section">
                              <p class="subhead3" id="GUID-FF00B9A0-293F-4544-9121-104E53F898B9__GUID-98C95338-7FC6-4692-B2AC-75C1CF7C99E3">先决条件</p>
                              <p>在更新PDB的CDB资源计划指令之前，请确保满足<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-FF00B9A0-293F-4544-9121-104E53F898B9__GUID-05DC8C3D-8C84-4F5A-A991-D26646E2BBDB">要更新PDB的CDB资源计划指令：</p>
                              <ol>
                                 <li>
                                    <p>在SQL * Plus中，确保当前容器是根。</p>
                                 </li>
                                 <li>
                                    <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>运行<code class="codeph">UPDATE_CDB_PLAN_DIRECTIVE</code>过程，并为PDB指定新的资源分配值。</p>
                                    <p>例如，以下过程将资源分配更新为<code class="codeph">newcdb_plan</code> CDB资源计划中名为<code class="codeph">operpdb</code>的PDB：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.UPDATE_CDB_PLAN_DIRECTIVE（plan =&gt;'newcdb_plan'，pluggable_database =&gt;'operpdb'，new_shares =&gt; 1，new_utilization_limit =&gt; 10，new_parallel_server_limit =&gt; 20）;结束; /</code></pre></li>
                                 <li>
                                    <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-FF00B9A0-293F-4544-9121-104E53F898B9__GUID-01B9F722-B565-4FE4-93DC-6C9BDFDAB931">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" title="您可以为PDB创建，更新和删除CDB资源计划指令。">管理PDB的CDB资源计划指令</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13823"></a><div class="props_rev_3"><a id="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119" name="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119"></a><h6 id="MULTI-GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119" class="sect6"><span class="enumeration_section">22.2.7.2.3</span>删除PDB的CDB资源计划指令</h6>
                        <div>
                           <p>您可以使用<code class="codeph">DELETE_CDB_PLAN_DIRECTIVE</code>过程删除PDB的CDB资源计划指令。
                           </p>
                           <div class="section">
                              <p>如果拔下或拔出PDB，可以删除PDB的指令。但是，您可以保留该指令，如果将来将PDB插入CDB，则现有指令适用于PDB。</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119__GUID-3AD3BE53-6404-4DDA-93D9-EC509AE19CC5">先决条件</p>
                              <p>在删除PDB的CDB资源计划指令之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119__GUID-C9D7391B-38B8-4A28-B789-F400CDD6D51A">要删除PDB的CDB资源计划指令：</p>
                              <ol>
                                 <li>
                                    <p>在SQL * Plus中，确保当前容器是根。</p>
                                 </li>
                                 <li>
                                    <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>运行<code class="codeph">DELETE_CDB_PLAN_DIRECTIVE</code>过程，并指定CDB资源计划和PDB。</p>
                                    <p>例如，以下过程将删除<code class="codeph">newcdb_plan</code> CDB资源计划中名为<code class="codeph">operpdb</code>的PDB的指令：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.DELETE_CDB_PLAN_DIRECTIVE（plan =&gt;'newcdb_plan'，pluggable_database =&gt;'operpdb'）;结束; /</code></pre></li>
                                 <li>
                                    <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119__GUID-2DAC6ADA-8ECC-4B7E-9800-3CC6A3823AF5">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" title="您可以为PDB创建，更新和删除CDB资源计划指令。">管理PDB的CDB资源计划指令</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" name="GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71"></a><h5 id="MULTI-GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" class="sect5"><span class="enumeration_section">22.2.7.3</span>管理PDB性能配置文件的CDB资源计划指令</h5>
                     <div>
                        <p>您可以为PDB性能配置文件创建，更新和删除CDB资源计划指令。</p>
                        <p>本节包含以下主题：</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D">为PDB性能配置文件创建新的CDB资源计划指令</a><br>您可以使用<code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code>过程为新的PDB性能概要文件创建CDB资源计划指令。该指令指定如何将资源分配给使用新配置文件的所有PDB。
                           </li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91">更新PDB性能配置文件的CDB资源计划指令</a><br>使用<code class="codeph">UPDATE_CDB_PROFILE_DIRECTIVE</code>过程更新PDB性能概要文件的CDB资源计划指令。该指令指定如何将资源分配给使用PDB性能配置文件的PDB。
                           </li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740">删除PDB性能配置文件的CDB资源计划指令</a><br>您可以使用<code class="codeph">DELETE_CDB_PROFILE_DIRECTIVE</code>过程删除PDB性能概要文件的CDB资源计划指令。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="修改CDB资源计划包括更新计划，创建，更新或删除PDB的计划指令以及更新默认指令等任务。">修改CDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="props_rev_3"><a id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D" name="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D"></a><h6 id="MULTI-GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D" class="sect6"><span class="enumeration_section">22.2.7.3.1</span>为PDB性能配置文件创建新的CDB资源计划指令</h6>
                        <div>
                           <p>您可以使用<code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code>过程为新的PDB性能概要文件创建CDB资源计划指令。该指令指定如何将资源分配给使用新配置文件的所有PDB。
                           </p>
                           <div class="section">
                              <p class="subhead3" id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D__GUID-75EE72AF-F10D-4087-8A64-1E9E9A50FB85">先决条件</p>
                              <p>在为PDB性能概要文件创建新的CDB资源计划指令之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D__GUID-4128575B-04CF-40FA-8355-734B7591ABB6">要为PDB性能概要文件创建新的CDB资源计划指令，请执行以下操作：</p>
                              <ol>
                                 <li>
                                    <p>在SQL * Plus中，确保当前容器是根。</p>
                                 </li>
                                 <li>
                                    <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>运行<code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code>过程，并为新的PDB性能配置文件指定适当的值。
                                    </p>
                                    <p>例如，以下过程将资源分配给<code class="codeph">newcdb_plan</code> CDB资源计划中名为<code class="codeph">copper</code>的PDB性能概要文件：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE（plan =&gt;'newcdb_plan'，profile =&gt;'copper'，shares =&gt; 1，utilization_limit =&gt; 20，parallel_server_limit =&gt; 30）;结束; /</code></pre></li>
                                 <li>
                                    <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                              </ol>
                              <div class="infoboxnote" id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D__GUID-F8FC639F-008F-4319-9202-C74B38EA1AC3">
                                 <p class="notep1">注意：</p>要使PDB使用新配置文件，PDB必须将<code class="codeph">DB_PERFORMANCE_PROFILE</code>初始化参数设置为配置文件名称。
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D__GUID-99D4A9C7-DEAF-4FEE-A287-7D0E7B7E8454">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" title="您可以为PDB性能配置文件创建，更新和删除CDB资源计划指令。">管理PDB性能概要文件的CDB资源计划指令</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91" name="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91"></a><h6 id="MULTI-GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91" class="sect6"><span class="enumeration_section">22.2.7.3.2</span>更新PDB性能配置文件的CDB资源计划指令</h6>
                        <div>
                           <p>使用<code class="codeph">UPDATE_CDB_PROFILE_DIRECTIVE</code>过程更新PDB性能概要文件的CDB资源计划指令。该指令指定如何将资源分配给使用PDB性能配置文件的PDB。
                           </p>
                           <div class="section">
                              <p>在更新PDB性能概要文件的CDB资源计划指令之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91__GUID-B6B0E86B-C562-49E4-B1D4-13022C0B4797">要更新PDB性能概要文件的CDB资源计划指令，请执行以下操作：</p>
                              <ol>
                                 <li>
                                    <p>在SQL * Plus中，确保当前容器是根。</p>
                                 </li>
                                 <li>
                                    <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>运行<code class="codeph">UPDATE_CDB_PROFILE_DIRECTIVE</code>过程，并为PDB性能概要文件指定新的资源分配值。
                                    </p>
                                    <p>例如，以下过程更新<code class="codeph">newcdb_plan</code> CDB资源计划中名为<code class="codeph">copper</code>的PDB性能概要文件的资源分配：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.UPDATE_CDB_PROFILE_DIRECTIVE（plan =&gt;'newcdb_plan'，profile =&gt;'copper'，new_shares =&gt; 1，new_utilization_limit =&gt; 10，new_parallel_server_limit =&gt; 20）;结束; /</code></pre></li>
                                 <li>
                                    <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91__GUID-01B9F722-B565-4FE4-93DC-6C9BDFDAB931">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" title="您可以为PDB性能配置文件创建，更新和删除CDB资源计划指令。">管理PDB性能概要文件的CDB资源计划指令</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740" name="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740"></a><h6 id="MULTI-GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740" class="sect6"><span class="enumeration_section">22.2.7.3.3</span>删除PDB性能配置文件的CDB资源计划指令</h6>
                        <div>
                           <p>您可以使用<code class="codeph">DELETE_CDB_PROFILE_DIRECTIVE</code>过程删除PDB性能概要文件的CDB资源计划指令。
                           </p>
                           <div class="section">
                              <p>如果没有PDB使用性能配置文件，则可以删除配置文件的指令。</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740__GUID-27C64E43-5832-4A7D-9639-CF0E534951FC">先决条件</p>
                              <p>在删除PDB性能概要文件的CDB资源计划指令之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740__GUID-C9D7391B-38B8-4A28-B789-F400CDD6D51A">要删除PDB性能概要文件的CDB资源计划指令，请执行以下操作：</p>
                              <ol>
                                 <li>
                                    <p>在SQL * Plus中，确保当前容器是根。</p>
                                 </li>
                                 <li>
                                    <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>运行<code class="codeph">DELETE_CDB_PROFILE_DIRECTIVE</code>过程，并指定CDB资源计划和PDB性能配置文件。
                                    </p>
                                    <p>例如，以下过程将删除<code class="codeph">newcdb_plan</code> CDB资源计划中名为<code class="codeph">operpdb</code>的PDB的指令：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.DELETE_CDB_PLAN_DIRECTIVE（plan =&gt;'newcdb_plan'，profile =&gt;'operpdb'）;结束; /</code></pre></li>
                                 <li>
                                    <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                                 <li>
                                    <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740__GUID-2DAC6ADA-8ECC-4B7E-9800-3CC6A3823AF5">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" title="您可以为PDB性能配置文件创建，更新和删除CDB资源计划指令。">管理PDB性能概要文件的CDB资源计划指令</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN13827"></a><div class="props_rev_3"><a id="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD" name="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD"></a><h5 id="MULTI-GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD" class="sect5"><span class="enumeration_section">22.2.7.4</span>更新CDB资源计划中PDB的默认指令</h5>
                     <div>
                        <p>您可以使用<code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code>过程更新CDB资源计划中PDB的默认指令。默认指令适用于尚未定义特定指令的PDB。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD__GUID-EB48E77C-0839-46FF-BC98-E47D97DF4C06">先决条件</p>
                           <p>在更新CDB资源计划中的PDB的默认指令之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD__GUID-5015165D-71A5-40B8-8BAB-355E98C3D14A">要更新CDB资源计划中PDB的默认指令：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，确保当前容器是根。</p>
                              </li>
                              <li>
                                 <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                              <li>
                                 <p>运行<code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code>过程，并指定适当的默认资源分配值。
                                 </p>
                                 <p>例如，以下过程更新<code class="codeph">newcdb_plan</code> CDB资源计划中PDB的默认指令：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.UPDATE_CDB_DEFAULT_DIRECTIVE（plan =&gt;'newcdb_plan'，new_shares =&gt; 2，new_utilization_limit =&gt; 40）;结束; /</code></pre></li>
                              <li>
                                 <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                              <li>
                                 <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD__GUID-89D30DBF-2D08-4785-AAA6-6C834A6C071B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关详细信息，请参阅<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="如果未明确定义PDB的指令，PDB将使用PDB的默认指令。">PDB的默认指令</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                              </li>
                              <li>
                                 <p>请参阅<span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="修改CDB资源计划包括更新计划，创建，更新或删除PDB的计划指令以及更新默认指令等任务。">修改CDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13829"></a><div class="props_rev_3"><a id="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0" name="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0"></a><h5 id="MULTI-GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0" class="sect5"><span class="enumeration_section">22.2.7.5</span>更新CDB资源计划中维护任务的默认指令</h5>
                     <div>
                        <p>您可以使用<code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code>过程更新CDB资源计划中的AutoTask指令。AutoTask指令适用于在根维护窗口中运行的自动维护任务。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0__GUID-FB19C916-815C-4100-9E3D-3930F15A95C4">先决条件</p>
                           <p>在更新CDB资源计划中的维护任务的默认指令之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0__GUID-383E3D9E-9EE3-4DB1-B1C2-D3ED62B1ECE1">要更新CDB资源计划中的维护任务的AutoTask指令：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，确保当前容器是根。</p>
                              </li>
                              <li>
                                 <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                              <li>
                                 <p>运行<code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code>过程，并指定相应的AutoTask资源分配值。
                                 </p>
                                 <p>例如，以下过程更新<code class="codeph">newcdb_plan</code> CDB资源计划中的维护任务的AutoTask指令：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.UPDATE_CDB_AUTOTASK_DIRECTIVE（plan =&gt;'newcdb_plan'，new_shares =&gt; 2，new_utilization_limit =&gt; 60）;结束; /</code></pre></li>
                              <li>
                                 <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                              <li>
                                 <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0__GUID-97E3869B-F4C9-41C6-9652-13FACF286525">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="修改CDB资源计划包括更新计划，创建，更新或删除PDB的计划指令以及更新默认指令等任务。">修改CDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13825"></a><div class="props_rev_3"><a id="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB" name="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB"></a><h5 id="MULTI-GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB" class="sect5"><span class="enumeration_section">22.2.7.6</span>删除CDB资源计划</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DELETE_CDB_PLAN</code>过程删除CDB资源计划。
                        </p>
                        <div class="section">
                           <p>必须禁用资源计划。如果不再需要该计划，您可以删除CDB资源计划。您可以启用其他CDB资源计划，也可以禁用CDB的资源管理器。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB__GUID-33920065-F694-4F91-97D7-2AB3BE3221D1">先决条件</p>
                           <p>在删除CDB资源计划之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB__GUID-474611AA-0182-4D48-A2ED-00C1A0EEBB42">要删除CDB资源计划：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，确保当前容器是根。</p>
                              </li>
                              <li>
                                 <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                              <li>
                                 <p>运行<code class="codeph">DELETE_CDB_PLAN</code>过程，并指定CDB资源计划。
                                 </p>
                                 <p>例如，以下过程将删除<code class="codeph">newcdb_plan</code> CDB资源计划：</p><pre class="pre codeblock"><code>BEGIN DBMS_RESOURCE_MANAGER.DELETE_CDB_PLAN（plan =&gt;'newcdb_plan'）;结束; /</code></pre></li>
                              <li>
                                 <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                              <li>
                                 <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB__GUID-784F2FE3-7890-472F-AF92-C51B9C9DDDA7">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                              </li>
                              <li>
                                 <p>请参阅<span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E05500C-C8C0-4E99-B753-133515175437" title="通过在根目录中设置RESOURCE_MANAGER_PLAN初始化参数，可以为CDB启用资源管理器。">启用CDB资源计划</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386" title="通过取消设置CDB根目录中的RESOURCE_MANAGER_PLAN初始化参数来禁用CDB的资源管理器。">禁用CDB资源计划</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="修改CDB资源计划包括更新计划，创建，更新或删除PDB的计划指令以及更新默认指令等任务。">修改CDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13805"></a><div class="props_rev_3"><a id="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386" name="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386"></a><h4 id="MULTI-GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386" class="sect4"><span class="enumeration_section">22.2.8</span>禁用CDB资源计划</h4>
                  <div>
                     <p>通过取消设置CDB根目录中的<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数来禁用CDB的资源管理器。
                     </p>
                     <div class="section">
                        <p>需要在PDB之间和PDB内启用CPU管理的CDB资源计划，该计划指定PDB的共享或利用率限制。如果为PDB启用了具有共享或利用率限制的资源计划，并且未指定CDB资源计划，则CDB资源计划将设置为<code class="codeph">DEFAULT_CDB_PLAN</code> 。此设置为所有PDB提供相等的份额，并指定无利用率限制。要在整个CDB中禁用CPU资源管理，请将<code class="codeph">RESOURCE_MANAGER_PLAN</code>设置为<code class="codeph">ORA$INTERNAL_CDB_PLAN</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386__GUID-A23864A7-59C4-42BD-864C-CE6BC6D9AD46">先决条件</p>
                        <p>在禁用CDB资源计划之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386__GUID-71716041-8D3F-4193-B63D-095CF6437C10">要禁用CDB资源计划：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，确保当前容器是根。</p>
                           </li>
                           <li>
                              <p>请执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">ALTER SYSTEM</code>语句取消设置CDB的<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数。</p>
                                    <p>以下示例使用<code class="codeph">ALTER SYSTEM</code>语句取消设置<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET RESOURCE_MANAGER_PLAN ='';</code></pre></li>
                                 <li>
                                    <p>在初始化参数文件中，取消设置<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数，然后重新启动CDB。</p>
                                    <p>以下示例在初始化参数文件中取消设置<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数：</p><pre class="pre codeblock"><code>RESOURCE_MANAGER_PLAN =</code></pre></li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386__GUID-2DAC6ADA-8ECC-4B7E-9800-3CC6A3823AF5">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-B2AC2F0B-F55E-40CD-AF37-A09E31BAA732" title="您可以按照关闭非CDB实例的方式关闭CDB实例。">关闭CDB实例</a> ”</span> 
                              </p>
                           </li>
                           <li>
                              <p>有关启动数据库的信息，请参见<a href="../admin/starting-up-and-shutting-down.html#ADMIN-GUID-203404B5-5157-4F29-A241-B8ABC4753819" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。">管理CDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13833"></a><div class="props_rev_3"><a id="GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172" name="GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172"></a><h4 id="MULTI-GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172" class="sect4"><span class="enumeration_section">22.2.9</span>查看CDB中有关计划和指令的信息</h4>
                  <div>
                     <p>您可以在CDB中查看有关CDB资源计划，CDB资源计划指令和预定义资源计划的信息。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-D9CBC576-4C49-4C47-9328-937E81409C0D">查看CDB资源计划</a><br>示例说明如何使用<code class="codeph">DBA_CDB_RSRC_PLANS</code>视图显示CDB中定义的所有CDB资源计划。</li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-E89C4503-9DAB-4600-B406-01AAC01F4734">查看CDB资源计划指令</a><br>示例说明如何使用<code class="codeph">DBA_CDB_RSRC_PLAN_DIRECTIVES</code>视图显示CDB中所有CDB资源计划中定义的所有指令。</li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172__GUID-E5A9CF45-8772-45D3-B46A-3DFE5DC35800">
                        <p class="notep1">也可以看看：</p>
                        <p>有关监视Oracle数据库资源管理器的信息，请参见<a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-9CF57A7E-CCE3-4F80-9E21-29AF9B2283F0" target="_blank"><span><cite>“Oracle数据库管理员指南</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CD7B6826-3F4D-450B-9081-69F7BAC3EBF1" title="在CDB中，PDB可能具有不同的优先级。您可以创建CDB资源计划，以根据这些优先级将资源分配给不同的PDB。">管理CDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13834"></a><div class="props_rev_3"><a id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D" name="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D"></a><h5 id="MULTI-GUID-D9CBC576-4C49-4C47-9328-937E81409C0D" class="sect5"><span class="enumeration_section">22.2.9.1</span>查看CDB资源计划</h5>
                     <div>
                        <p>示例说明如何使用<code class="codeph">DBA_CDB_RSRC_PLANS</code>视图显示CDB中定义的所有CDB资源计划。</p>
                        <div class="section">
                           <p><code class="codeph">DEFAULT_CDB_PLAN</code>是Oracle数据库随附的默认CDB计划。如果符合您的要求，您可以使用此默认计划。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D__GUID-6433E6A8-1885-4925-9068-F9DDD31AD3CA">要查看CDB资源计划：</p>
                           <ol>
                              <li>
                                 <p>启动SQL * Plus或SQL Developer，然后登录CDB根目录。</p>
                              </li>
                              <li>
                                 <p>运行以下查询：</p><pre class="pre codeblock"><code>列计划格式A30列状态格式A10栏目评论格式A35选择计划，状态，评论来自DBA_CDB_RSRC_PLANS按计划排序;</code></pre><p>您的输出类似于以下内容：</p><pre class="pre codeblock"><code>计划状态评论------------------------------ ---------- ------- ---------------------------- DEFAULT_CDB_PLAN默认CDB计划DEFAULT_MAINTENANCE_PLAN默认CDB维护计划NEWCDB_PLAN newcdb中的PDB CDB计划ORA $ INTERNAL_CDB_PLAN内部CDB计划</code></pre></li>
                           </ol>
                           <div class="infoboxnote" id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D__GUID-9EC6EFBA-B90B-42B9-8376-0D38D88BD4F2">
                              <p class="notep1">注意：</p>
                              <p>在等待区计划有一个状态<code class="codeph">PENDING</code> 。正在编辑待定区域的计划。任何不在待处理区域的计划都具有<code class="codeph">NULL</code>状态。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D__GUID-81E80ABD-1851-4811-8538-830AB6439030">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172" title="您可以在CDB中查看有关CDB资源计划，CDB资源计划指令和预定义资源计划的信息。">查看有关CDB中计划和指令的信息</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13835"></a><div class="props_rev_3"><a id="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734" name="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734"></a><h5 id="MULTI-GUID-E89C4503-9DAB-4600-B406-01AAC01F4734" class="sect5"><span class="enumeration_section">22.2.9.2</span>查看CDB资源计划指令</h5>
                     <div>
                        <p>示例说明如何使用<code class="codeph">DBA_CDB_RSRC_PLAN_DIRECTIVES</code>视图显示CDB中所有CDB资源计划中定义的所有指令。</p>
                        <div class="section">
                           <p><code class="codeph">DEFAULT_CDB_PLAN</code>是Oracle数据库随附的默认CDB计划。使用<code class="codeph">DEFAULT_CDB_PLAN</code> ，每个PDB有1个共享，利用率限制为100。如果符合您的要求，您可以使用此默认计划。请注意， <code class="codeph">ORA$DEFAULT_PDB_DIRECTIVE</code>是PDB的默认指令。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734__GUID-357C8979-4C49-4EE4-93A1-7FB07798BCA9">要查看CDB资源计划指令：</p>
                           <ol>
                              <li>
                                 <p>启动SQL * Plus或SQL Developer，然后登录CDB根目录。</p>
                              </li>
                              <li>
                                 <p>运行以下查询：</p><pre class="pre codeblock"><code>COLUMN PLAN HEADING'Plan'格式A24 COLUMN PLUGGABLE_DATABASE HEADING'可插拔数据库'格式A25列共享标题'共享'格式999列使用_LIIT标题'使用|限制'格式999列PARALLEL_SERVER_LIMIT标题'并行|服务器|限制'格式999选择计划， PLUGGABLE_DATABASE，SHARES，UTILIZATION_LIMIT，PARALLEL_SERVER_LIMIT FROM DBA_CDB_RSRC_PLAN_DIRECTIVES ORDER BY PLAN;</code></pre><p>您的输出类似于以下内容：</p><pre class="pre codeblock"><code>并行利用率服务器计划可插拔数据库共享限制------------------------ ----------------- -------- ------ ----------- -------- DEFAULT_CDB_PLAN ORA $ DEFAULT_PDB_DIRECTIVE 1 100 100 DEFAULT_CDB_PLAN ORA $ AUTOTASK 90 100 DEFAULT_MAINTENANCE_PLAN ORA $ AUTOTASK 90 100 DEFAULT_MAINTENANCE_PLAN ORA $ DEFAULT_PDB_DIRECTIVE 1 100 100 NEWCDB_PLAN HRPDB 1 70 70 NEWCDB_PLAN SALESPDB 3 100 100 NEWCDB_PLAN ORA $ DEFAULT_PDB_DIRECTIVE 1 50 50 NEWCDB_PLAN ORA $ AUTOTASK 1 75 75 NEWCDB_PLAN SERVICESPDB 3 100 100</code></pre><p>前面的输出显示了在<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E" title="This scenario illustrates each of the steps involved in creating a CDB resource plan for individual PDBs.">创建用于管理PDB的CDB资源计划：场景</a> ”中<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E" title="此方案说明了为各个PDB创建CDB资源计划所涉及的每个步骤。">创建</a></span>的<code class="codeph">newcdb_plan</code>的指令，并在<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="Modifying a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.">修改CDB资源计划</a> ”中</span>进行了<span class="q"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="修改CDB资源计划包括更新计划，创建，更新或删除PDB的计划指令以及更新默认指令等任务。">修改</a></span> 。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734__GUID-6B8D4EEE-5B1E-408F-BD76-089A6C113F90">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="如果未明确定义PDB的指令，PDB将使用PDB的默认指令。">PDB的默认指令</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172" title="您可以在CDB中查看有关CDB资源计划，CDB资源计划指令和预定义资源计划的信息。">查看有关CDB中计划和指令的信息</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN13815"></a><div class="props_rev_3"><a id="GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" name="GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822"></a><h3 id="MULTI-GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" class="sect3"><span class="enumeration_section">22.3</span>管理PDB资源计划</h3>
               <div>
                  <p>您可以为各个PDB创建，启用和修改资源计划。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17">关于PDB资源计划</a><br>PDB资源计划确定如何将特定PDB的资源分配给此PDB中的使用者组。</li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A">创建PDB资源计划</a><br>您创建PDB资源计划的方式与为非CDB创建资源计划的方式相同。您可以使用<code class="codeph">DBMS_RESOURCE_MANAGER</code> PL / SQL包中的<code class="codeph">DBMS_RESOURCE_MANAGER</code>来创建计划。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1">启用PDB资源计划</a><br>当前容器是PDB时，通过使用<code>ALTER SYSTEM</code>语句将<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数设置为计划来启用PDB资源计划。</li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-ACF0635C-2642-48C3-8484-245826F16F31">修改PDB资源计划</a><br>您可以使用<code class="codeph">DBMS_RESOURCE_MANAGER</code>包修改PDB资源计划，方法与修改非CDB的资源计划的方式相同。</li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E">禁用PDB资源计划</a><br>您可以通过取消PDB中的<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数来禁用PDB资源计划。</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="使用PL / SQL包过程来管理Oracle Resource Manager（资源管理器），以便将资源分配给多租户容器数据库（CDB）中的可插拔数据库（PDB）。">使用Oracle Resource Manager for PDB</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13787"></a><a id="ADMIN13946"></a><a id="ADMIN13786"></a><div class="props_rev_3"><a id="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" name="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17"></a><h4 id="MULTI-GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" class="sect4"><span class="enumeration_section">22.3.1</span>关于PDB资源计划</h4>
                  <div>
                     <p>PDB资源计划确定如何将特定PDB的资源分配给此PDB中的使用者组。</p>
                     <p>PDB资源计划类似于非CDB的资源计划。 PDB资源计划与CDB资源计划不同，CDB资源计划确定分配给每个PDB的资源量。</p>
                     <p>在CDB中，以下限制适用于PDB资源计划：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>PDB资源计划不能有子计划。</p>
                        </li>
                        <li>
                           <p>PDB资源计划最多可包含八个使用者组。</p>
                        </li>
                        <li>
                           <p>PDB资源计划不能具有多级调度策略。</p>
                        </li>
                     </ul>
                     <p>如果使用非CDB创建PDB，并且非CDB包含资源计划，则这些资源计划可能不符合前面的限制。在这种情况下，Oracle数据库会自动将这些资源计划转换为满足这些要求的等效PDB资源计划。原始资源计划和指令记录在具有<code class="codeph">LEGACY</code>状态的<code class="codeph">DBA_RSRC_PLANS</code>和<code class="codeph">DBA_RSRC_PLAN_DIRECTIVES</code>视图中。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-CB12C1BE-B9EA-49C6-A7BD-2D2EED0CB7E4">创建PDB资源计划时的CDB资源计划要求</a><br>创建PDB资源计划时，CDB资源计划必须满足特定要求。
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1A579F10-E768-4699-B689-A66622A50B08">PDB资源计划：示例</a><br>CDB资源计划与PDB资源计划之间存在一对多关系。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17__GUID-8538DA05-AF23-44A3-9F6E-5BB3E8E7249B">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="创建为PDB分配份额和资源限制的CDB资源计划。">关于国家开发银行资源计划</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="overview-of-pdb-creation.html#GUID-F68E6FE9-919B-4665-95F7-785E69E07264" title="您有多个选项可以将非CDB移动到PDB中。">从非CDB创建PDB的选项</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-4BBE0B17-3B05-49FA-979A-C649A9EE6DD9" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关资源计划的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" title="您可以为各个PDB创建，启用和修改资源计划。">管理PDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-CB12C1BE-B9EA-49C6-A7BD-2D2EED0CB7E4" name="GUID-CB12C1BE-B9EA-49C6-A7BD-2D2EED0CB7E4"></a><h5 id="MULTI-GUID-CB12C1BE-B9EA-49C6-A7BD-2D2EED0CB7E4" class="sect5"><span class="enumeration_section">22.3.1.1</span>创建PDB资源计划时的CDB资源计划要求</h5>
                     <div>
                        <p>创建PDB资源计划时，CDB资源计划必须满足特定要求。</p>
                        <p>使用<code class="codeph">DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE</code>过程为CDB资源计划创建指令。使用同一包中的<code class="codeph">CREATE_PLAN_DIRECTIVE</code>过程为PDB资源计划创建指令。创建一个或多个PDB资源计划且没有CDB资源计划时，CDB使用Oracle数据库提供的<code class="codeph">DEFAULT_CDB_PLAN</code> 。
                        </p>
                        <p>下表描述了CDB资源计划的要求以及未满足要求时的结果。“CDB资源计划要求”列中描述的参数值适用于<code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code>过程。“不符合要求时的结果”列中描述的参数值适用于<code class="codeph">CREATE_PLAN_DIRECTIVE</code>过程。
                        </p>
                        <div class="tblformalwide" id="GUID-CB12C1BE-B9EA-49C6-A7BD-2D2EED0CB7E4__CACDAFEA">
                           <p class="titleintable">表22-9 PDB资源计划的CDB资源计划要求</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="PDB资源计划的CDB资源计划要求" width="100%" border="1" summary="This table lists each resource, the consolidation plan requirements for the resource, and the results if the requirements are not met." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d102832e7013">资源</th>
                                    <th align="left" valign="bottom" width="42%" id="d102832e7016">CDB资源计划要求</th>
                                    <th align="left" valign="bottom" width="40%" id="d102832e7019">结果何时不符合要求</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e7024" headers="d102832e7013 ">
                                       <p>中央处理器</p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d102832e7024 d102832e7016 ">
                                       <p>必须满足以下要求之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>必须使用<code class="codeph">shares</code>参数为PDB指定共享值。
                                             </p>
                                          </li>
                                          <li>
                                             <p>必须使用<code class="codeph">utilization_limit</code>参数为PDB指定CPU低于100的利用率限制。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>可以在特定PDB的指令中或在default指令中设置这些值。</p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d102832e7024 d102832e7019 ">
                                       <p>不强制执行PDB资源计划的CPU分配策略。</p>
                                       <p>不强制执行PDB资源计划中的<code class="codeph">utilization_limit</code>参数指定的CPU限制。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d102832e7054" headers="d102832e7013 ">
                                       <p>并行执行服务器</p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d102832e7054 d102832e7016 ">
                                       <p>必须满足以下要求之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>必须使用<code class="codeph">shares</code>参数为PDB指定共享值。
                                             </p>
                                          </li>
                                          <li>
                                             <p>必须使用<code class="codeph">parallel_server_limit</code>参数为PDB指定低于100的并行服务器限制。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>可以在特定PDB的指令中或在default指令中设置这些值。</p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d102832e7054 d102832e7019 ">
                                       <p>不强制执行PDB资源计划的并行执行服务器分配策略。</p>
                                       <p>不强制执行PDB资源计划中<code class="codeph">parallel_server_limit</code>指定的并行服务器限制。但是，您可以在PDB中设置<code class="codeph">PARALLEL_SERVERS_TARGET</code>初始化参数以强制执行并行限制。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="PDB资源计划确定如何将特定PDB的资源分配给此PDB中的使用者组。">关于PDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-1A579F10-E768-4699-B689-A66622A50B08" name="GUID-1A579F10-E768-4699-B689-A66622A50B08"></a><h5 id="MULTI-GUID-1A579F10-E768-4699-B689-A66622A50B08" class="sect5"><span class="enumeration_section">22.3.1.2</span> PDB资源计划：示例</h5>
                     <div>
                        <p>CDB资源计划与PDB资源计划之间存在一对多关系。</p>
                        <p>下图显示了CDB资源计划和PDB资源计划的示例。</p>
                        <div class="figure" id="GUID-1A579F10-E768-4699-B689-A66622A50B08__CACGGGJG">
                           <p class="titleinfigure">图22-4 CDB资源计划和PDB资源计划</p><img src="img/admin_vm_102.png" alt="下面是图22-4的描述" title="下面是图22-4的描述" longdesc="img_text/admin_vm_102.html"><br><a href="img_text/admin_vm_102.html">“图22-4 CDB资源计划和PDB资源计划”的描述</a></div>
                        <!-- class="figure" -->
                        <p>上图显示了<code class="codeph">servicespdb</code> PDB的PDB资源计划中的一些指令。 CDB中的其他PDB也可以具有PDB资源计划。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="PDB资源计划确定如何将特定PDB的资源分配给此PDB中的使用者组。">关于PDB资源计划</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13807"></a><div class="props_rev_3"><a id="GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A" name="GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A"></a><h4 id="MULTI-GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A" class="sect4"><span class="enumeration_section">22.3.2</span>创建PDB资源计划</h4>
                  <div>
                     <p>您创建PDB资源计划的方式与为非CDB创建资源计划的方式相同。您可以使用<code class="codeph">DBMS_RESOURCE_MANAGER</code> PL / SQL包中的<code class="codeph">DBMS_RESOURCE_MANAGER</code>来创建计划。
                     </p>
                     <div class="section">
                        <p>CDB资源计划将系统资源的一部分分配给PDB。 PDB资源计划确定如何在PDB中分配该部分。</p>
                        <p>以下是创建PDB资源计划所需步骤的摘要：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>在SQL * Plus中，确保当前容器是PDB。</span></li>
                        <li><span>使用<code class="codeph">CREATE_PENDING_AREA</code>过程创建挂起区域。</span></li>
                        <li><span>使用<code class="codeph">CREATE_CONSUMER_GROUP</code>过程创建，修改或删除使用者组。</span></li>
                        <li><span>使用<code class="codeph">SET_CONSUMER_GROUP_MAPPING</code>过程<code class="codeph">SET_CONSUMER_GROUP_MAPPING</code>映射到使用者组。</span></li>
                        <li><span>使用<code class="codeph">CREATE_PLAN</code>过程创建PDB资源计划。</span></li>
                        <li><span>使用<code class="codeph">CREATE_PLAN_DIRECTIVE</code>过程创建PDB资源计划指令。</span></li>
                        <li><span>使用<code class="codeph">VALIDATE_PENDING_AREA</code>过程验证待处理区域。</span></li>
                        <li><span>使用<code class="codeph">SUBMIT_PENDING_AREA</code>过程提交待处理区域。</span></li>
                     </ol>
                     <div class="section">
                        <p>确保当前容器是PDB，并且在完成这些步骤后用户具有所需的权限。有关完成这些步骤的详细信息，请参见“ <a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-4816CA07-1376-45FD-82D4-F9E332936683" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                        </p>
                        <p>您还可以选择使用<code class="codeph">CREATE_SIMPLE_PLAN</code>过程创建适用于许多情况的简单资源计划。有关创建简单资源计划的信息，请参见“ <a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-EFC4517C-6C4D-44F8-A652-2266D6FB49EB" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                        </p>
                        <div class="infoboxnote" id="GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A__GUID-A68BB797-4DE8-4A29-A2C0-90E55C170A25">
                           <p class="notep1">注意：</p>
                           <p>一些限制适用于PDB资源计划。有关信息，请参阅<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="PDB资源计划确定如何将特定PDB的资源分配给此PDB中的使用者组。">关于PDB资源计划</a> ”</span> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" title="您可以为各个PDB创建，启用和修改资源计划。">管理PDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13811"></a><a id="ADMIN13809"></a><div class="props_rev_3"><a id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1" name="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1"></a><h4 id="MULTI-GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1" class="sect4"><span class="enumeration_section">22.3.3</span>启用PDB资源计划</h4>
                  <div>
                     <p>当前容器是PDB时，通过使用<code>ALTER SYSTEM</code>语句将<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数设置为计划来启用PDB资源计划。</p>
                     <div class="section">
                        <p>如果未使用此参数指定计划，则不会为PDB启用PDB资源计划。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1__GUID-A5526D5A-5A28-4BE9-B83D-17704394C90E">先决条件</p>
                        <p>在启用PDB资源计划之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1__GUID-C822A2F3-1434-4C95-BADF-5B7E9E5E6D37">要启用PDB资源计划：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，确保当前容器是PDB。</p>
                           </li>
                           <li>
                              <p>使用<code>ALTER SYSTEM</code>语句将<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数设置为PDB资源计划。
                              </p>
                           </li>
                        </ol>
                        <p>您还可以使用Oracle Scheduler计划PDB资源计划更改。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1__GUID-71001B10-3B10-405F-89A3-A77BF885FD0F">
                        <p class="titleinexample">示例22-5启用PDB资源计划</p>
                        <p>以下示例将PDB资源计划设置为<code class="codeph">salespdb_plan</code> 。
                        </p><pre class="pre codeblock"><code>ALTER SYSTEM SET RESOURCE_MANAGER_PLAN ='salespdb_plan';</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1__GUID-A0783E44-4F15-48BF-9F55-ED1CAA4A7D6F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="您可以使用ALTER SYSTEM语句来修改PDB。">在系统级修改PDB</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../admin/oracle-scheduler-concepts.html#ADMIN-GUID-6B8C0335-D36B-44D3-95BC-82FA2141D967" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解如何使用Oracle Scheduler调度PDB资源计划更改</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" title="您可以为各个PDB创建，启用和修改资源计划。">管理PDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13831"></a><div class="props_rev_3"><a id="GUID-ACF0635C-2642-48C3-8484-245826F16F31" name="GUID-ACF0635C-2642-48C3-8484-245826F16F31"></a><h4 id="MULTI-GUID-ACF0635C-2642-48C3-8484-245826F16F31" class="sect4"><span class="enumeration_section">22.3.4</span>修改PDB资源计划</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_RESOURCE_MANAGER</code>包修改PDB资源计划，方法与修改非CDB的资源计划的方式相同。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-ACF0635C-2642-48C3-8484-245826F16F31__GUID-5F05E728-E5E7-432D-951B-62B02CF0A1D4">先决条件</p>
                        <p>在修改PDB资源计划之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-ACF0635C-2642-48C3-8484-245826F16F31__GUID-0AE3C1D6-D66C-4D62-AA03-B0F84D42E513">修改PDB资源计划：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，确保当前容器是PDB。</p>
                           </li>
                           <li>
                              <p>创建待定区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA（）;</code></pre></li>
                           <li>
                              <p>通过完成以下一项或多项任务来修改PDB资源计划：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">UPDATE_CONSUMER_GROUP</code>过程更新使用者组。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">DELETE_CONSUMER_GROUP</code>过程删除使用者组。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">UPDATE_PLAN</code>过程更新资源计划。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">DELETE_PLAN</code>过程删除资源计划。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">UPDATE_PLAN_DIRECTIVE</code>过程更新资源计划指令。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">DELETE_PLAN_DIRECTIVE</code>过程删除资源计划指令。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>验证待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA（）;</code></pre></li>
                           <li>
                              <p>提交待处理区域：</p><pre class="pre codeblock"><code>exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA（）;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-ACF0635C-2642-48C3-8484-245826F16F31__GUID-2FD844FB-F79F-428E-B02D-BCA15329DBCC">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="PDB资源计划确定如何将特定PDB的资源分配给此PDB中的使用者组。">关于PDB资源计划</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>有关完成使用者组任务的说明，请参见“ <a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-86F4CE3C-3B5C-41D6-A50D-E965E13C1408" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" title="您可以为各个PDB创建，启用和修改资源计划。">管理PDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13814"></a><a id="ADMIN13812"></a><div class="props_rev_3"><a id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E" name="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E"></a><h4 id="MULTI-GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E" class="sect4"><span class="enumeration_section">22.3.5</span>禁用PDB资源计划</h4>
                  <div>
                     <p>您可以通过取消PDB中的<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数来禁用PDB资源计划。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E__GUID-D043ECDE-D46A-407D-BEB5-39F40A792E10">先决条件</p>
                        <p>在禁用PDB资源计划之前，请完成<span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" title="在CDB中，多个PDB中的工作负载可以竞争系统和CDB资源。资源计划解决了这个问题。">多租户环境中的Oracle Resource Manager概述</a> ”中</span>描述的先决条件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E__GUID-B9769C9A-91E8-4A01-98D0-4157CE561598">要禁用PDB资源计划：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，确保当前容器是PDB。</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ALTER SYSTEM</code>语句取消设置PDB的<code class="codeph">RESOURCE_MANAGER_PLAN</code>初始化参数。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E__GUID-352DCF99-414B-45A3-862C-CFB3BC3E1AAA">
                        <p class="titleinexample">示例22-6禁用PDB资源计划</p>
                        <p>以下示例禁用PDB资源计划。</p><pre class="pre codeblock"><code>ALTER SYSTEM SET RESOURCE_MANAGER_PLAN ='';</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E__GUID-7E83A43E-BB6B-4C3D-911D-E38C59C5B5CB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="您可以使用ALTER SYSTEM语句来修改PDB。">在系统级修改PDB</a> ”</span></p>
                           </li>
                           <li>
                              <p>请参阅<span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" title="您可以为各个PDB创建，启用和修改资源计划。">管理PDB资源计划</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" name="GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A"></a><h3 id="MULTI-GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" class="sect3"><span class="enumeration_section">22.4</span>监视由Oracle数据库资源管理器管理的PDB</h3>
               <div>
                  <p>通过一组动态性能视图，您可以监视PDB的Oracle数据库资源管理器设置的结果。</p>
                  <div class="section">
                     <p>本节包含以下主题：</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D">关于PDB的资源管理器视图</a><br>您可以使用视图监视PDB的Oracle数据库资源管理器设置的结果。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B">监视PDB的CPU使用情况</a><br><code class="codeph">V$RSRCPDBMETRIC</code>视图使您能够以毫秒，会话数或过去一分钟的利用率来跟踪CPU指标。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962">监视PDB的并行执行</a><br><code class="codeph">V$RSRCPDBMETRIC</code>视图使您可以跟踪PDB的并行语句和并行服务器使用。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97">监视PDB生成的I / O.</a><br><code class="codeph">V$RSRCPDBMETRIC</code>视图使您可以跟踪PDB生成的I / O量。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-93699AC3-9601-484E-A72A-11D1A716F853">监视PDB的内存使用情况</a><br><code class="codeph">V$RSRCPDBMETRIC</code>视图使您可以跟踪PDB使用的内存量。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="使用PL / SQL包过程来管理Oracle Resource Manager（资源管理器），以便将资源分配给多租户容器数据库（CDB）中的可插拔数据库（PDB）。">使用Oracle Resource Manager for PDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D" name="GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D"></a><h4 id="MULTI-GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D" class="sect4"><span class="enumeration_section">22.4.1</span>关于PDB的资源管理器视图</h4>
                  <div>
                     <p>您可以使用视图监视PDB的Oracle数据库资源管理器设置的结果。</p>
                     <p>可以使用以下视图：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">V $ RSRCPDBMETRIC</code></p>
                           <p><code class="codeph">V$RSRCPDBMETRIC</code>视图提供有关PDB资源消耗的当前统计信息，包括CPU使用率，并行执行，生成的I / O和内存使用情况。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">V $ RSRCPDBMETRIC_HISTORY</code></p>
                           <p>在列<code class="codeph">V$RSRCPDBMETRIC_HISTORY</code>观点是一样的，在列<code class="codeph">V$RSRCPDBMETRIC</code>视图。这些视图之间的唯一区别是<code class="codeph">V$RSRCPDBMETRIC</code>视图仅包含过去一分钟的度量标准，而<code class="codeph">V$RSRCPDBMETRIC_HISTORY</code>视图包含过去60分钟的度量标准。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">V $ RSRC_PDB</code></p>
                           <p><code class="codeph">V$RSRC_PDB</code>视图提供累积统计信息。自CDB资源计划设定以来累计统计数据。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DBA_HIST_RSRC_PDB_METRIC</code></p>
                           <p>此视图包含使用自动工作负载存储库（AWR）快照获取的<code class="codeph">V$RSRCPDBMETRIC_HISTORY</code>的历史统计信息。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D__GUID-430AABFE-858C-4042-B198-3245E0321BA6">
                        <p class="notep1">注意：</p>
                        <p>当<code class="codeph">STATISTICS_LEVEL</code>初始化参数设置为<code class="codeph">ALL</code>或<code class="codeph">TYPICAL</code>时， <code class="codeph">V$RSRCPDBMETRIC</code>和<code class="codeph">V$RSRCPDBMETRIC_HISTORY</code>视图记录资源管理器当前未管理的资源的<code class="codeph">STATISTICS_LEVEL</code> 。</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-055ADDB3-DBC2-4FFE-9BB5-F575EB24761D__GUID-C9ACD060-F7BA-4DB0-AD9C-54D4F9F4EBC3">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关实时SQL监视的详细信息，请<a href="../tgsql/monitoring-database-operations.html#TGSQL789" target="_blank"><span><cite>参见“Oracle数据库SQL调优指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../refrn/V-RSRCMGRMETRIC.html#REFRN-GUID-35F9BE03-3DCB-46FC-8D00-4BC5BCBBC443" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> ，了解<code class="codeph">V$RSRCPDBMETRIC</code> ， <code class="codeph">V$RSRCPDBMETRIC_HISTORY</code> ， <code class="codeph">V$RSRC_PDB</code>和<code class="codeph">DBA_HIST_RSRC_PDB_METRIC</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" title="通过一组动态性能视图，您可以监视PDB的Oracle数据库资源管理器设置的结果。">监视由Oracle数据库资源管理器管理的PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B" name="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B"></a><h4 id="MULTI-GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B" class="sect4"><span class="enumeration_section">22.4.2</span>监控PDB的CPU使用情况</h4>
                  <div>
                     <p><code class="codeph">V$RSRCPDBMETRIC</code>视图使您能够以毫秒，会话数或过去一分钟的利用率来跟踪CPU指标。
                     </p>
                     <div class="section">
                        <p>该视图为每个PDB提供实时指标，在您运行工作负载并希望持续监控CPU资源利用率的情况下非常有用。</p>
                        <p>活动CDB资源计划管理PDB的CPU使用情况。使用此视图可将PDB的最大和平均CPU利用率与其他PDB设置进行比较，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用的CPU时间</p>
                           </li>
                           <li>
                              <p>等待CPU的时间</p>
                           </li>
                           <li>
                              <p>消耗CPU的平均会话数</p>
                           </li>
                           <li>
                              <p>等待CPU分配的会话数</p>
                           </li>
                        </ul>
                        <p>例如，您可以查看PDB使用的CPU资源量以及等待资源分配的时间。或者，您可以查看每个PDB执行的会话数与活动会话总数的比值。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B__GUID-3F16E7BF-2FE9-4E44-BC88-60D1E5C3648D">根据PDB的CPU利用率跟踪CPU消耗</p>
                        <p>要根据CPU利用率跟踪CPU消耗，请查询<code class="codeph">CPU_UTILIZATION_LIMIT</code>和<code class="codeph">AVG_CPU_UTILIZATION</code>列。<code class="codeph">AVG_CPU_UTILIZATION</code>列出了PDB使用的服务器CPU的平均百分比。 <code class="codeph">CPU_UTILIZATION_LIMIT</code>表示PDB可以使用的服务器CPU的最大百分比。使用<code class="codeph">UTILIZATION_LIMIT</code>指令属性设置此限制。
                        </p>
                        <p>以下查询通过显示容器ID（ <code class="codeph">CON_ID</code> ）和每个PDB的名称来显示此信息：</p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10 SELECT r。CON_ID，p。PDB_NAME，r。CPU_UTILIZATION_LIMIT，r。AVG_CPU_UTILIZATION来自V $ RSRCPDBMETRIC r，CDB_PDBS p WHERE r。CON_ID = p。CON_ID;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B__GUID-0C0C307C-51EC-49A4-98A6-4770D4120860">跟踪PDB的CPU消耗和限制</p>
                        <p>使用<code class="codeph">CPU_CONSUMED_TIME</code>和<code class="codeph">CPU_TIME_WAIT</code>列来跟踪每个PDB的CPU消耗和限制（以毫秒为单位）。 <code class="codeph">NUM_CPUS</code>列表示资源管理器正在管理的CPU数。
                        </p>
                        <p>以下查询通过显示容器ID（ <code class="codeph">CON_ID</code> ）和每个PDB的名称来显示此信息：</p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10 SELECT r。CON_ID，p。PDB_NAME，r。CPU_CONSUMED_TIME，r。CPU_WAIT_TIME，r。NUM_CPUS FROM V $ RSRCPDBMETRIC r，CDB_PDBS p WHERE r。CON_ID = p。CON_ID;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B__GUID-AE511C5F-F832-418A-8B5C-48560957FCC2">根据PDB的会话数跟踪CPU消耗和节流</p>
                        <p>要根据会话数跟踪CPU消耗和限制，请使用<code class="codeph">RUNNING_SESSIONS_LIMIT</code> ， <code class="codeph">AVG_RUNNING_SESSIONS</code>和<code class="codeph">AVG_WAITING_SESSIONS</code>列。<code class="codeph">RUNNING_SESSIONS_LIMIT</code>列出了可以随时运行的特定PDB的最大会话数。此限制由您为PDB设置的<code class="codeph">UTILIZATION_LIMIT</code>指令属性定义。 <code class="codeph">AVG_RUNNING_SESSIONS</code>列出了消耗CPU的平均会话数， <code class="codeph">AVG_WAITING_SESSIONS</code>列出了等待CPU的平均会话数。</p>
                        <p>以下查询通过显示容器ID（ <code class="codeph">CON_ID</code> ）和每个PDB的名称来显示此信息：</p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10 SELECT r。CON_ID，p。PDB_NAME，r。RUNNING_SESSIONS_LIMIT，r。AVG_RUNNING_SESSIONS，r。AVG_WAITING_SESSIONS来自V $ RSRCPDBMETRIC r，CDB_PDBS p WHERE r。CON_ID = p。CON_ID;</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" title="通过一组动态性能视图，您可以监视PDB的Oracle数据库资源管理器设置的结果。">监视由Oracle数据库资源管理器管理的PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962" name="GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962"></a><h4 id="MULTI-GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962" class="sect4"><span class="enumeration_section">22.4.3</span>监控PDB的并行执行</h4>
                  <div>
                     <p><code class="codeph">V$RSRCPDBMETRIC</code>视图使您可以跟踪PDB的并行语句和并行服务器使用。
                     </p>
                     <div class="section">
                        <p>PDB的并行执行服务器使用PDB CDB的活动CDB资源计划进行管理。要跟踪PDB的并行语句和并行服务器使用，请使用<code class="codeph">AVG_ACTIVE_PARALLEL_STMTS</code> ， <code class="codeph">AVG_QUEUED_PARALLEL_STMTS</code> ， <code class="codeph">AVG_ACTIVE_PARALLEL_SERVERS</code> ， <code class="codeph">AVG_QUEUED_PARALLEL_SERVERS</code>和<code class="codeph">PARALLEL_SERVERS_LIMIT</code>列。
                        </p>
                        <p><code class="codeph">AVG_ACTIVE_PARALLEL_STMTS</code>和<code class="codeph">AVG_ACTIVE_PARALLEL_SERVERS</code>列出了运行的并行语句的平均数以及并行语句使用的并行服务器的平均数。<code class="codeph">AVG_QUEUED_PARALLEL_STMTS</code>和<code class="codeph">AVG_QUEUED_PARALLEL_SERVERS</code>列出了排队的并行语句的平均数以及排队并行语句请求的平行并行服务器数。<code class="codeph">PARALLEL_SERVERS_LIMIT</code>列出了PDB允许使用的并行服务器数。</p>
                        <p>以下查询通过显示容器ID（ <code class="codeph">CON_ID</code> ）和每个PDB的名称来显示此信息：</p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10 SELECT r。CON_ID，p。PDB_NAME，r。AVG_ACTIVE_PARALLEL_STMTS，r。AVG_QUEUED_PARALLEL_STMTS，r。AVG_ACTIVE_PARALLEL_SERVERS，r。AVG_QUEUED_PARALLEL_SERVERS，r。PARALLEL_SERVERS_LIMIT来自V $ RSRCPDBMETRIC r，CDB_PDBS p WHERE r。CON_ID = p。CON_ID;</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" title="通过一组动态性能视图，您可以监视PDB的Oracle数据库资源管理器设置的结果。">监视由Oracle数据库资源管理器管理的PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97" name="GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97"></a><h4 id="MULTI-GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97" class="sect4"><span class="enumeration_section">22.4.4</span>监控PDB生成的I / O.</h4>
                  <div>
                     <p><code class="codeph">V$RSRCPDBMETRIC</code>视图使您可以跟踪PDB生成的I / O量。
                     </p>
                     <div class="section">
                        <p>通过在PDB中设置<code class="codeph">MAX_IOPS</code>初始化参数或<code class="codeph">MAX_MBPS</code>初始化参数，I / O仅限于PDB。使用此视图可以比较PDB生成的I / O，包括每秒的操作数和每秒的兆字节数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97__GUID-C3EF8D4D-8E30-47E2-A919-5780050BBB84">跟踪PDB每秒生成的I / O操作数</p>
                        <p>要跟踪前一分钟PDB每秒生成的I / O操作，请使用<code class="codeph">IOPS</code>列。
                        </p>
                        <p>以下查询通过显示容器ID（ <code class="codeph">CON_ID</code> ）和每个PDB的名称来显示此信息：</p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10 SELECT r。CON_ID，p。PDB_NAME，r。IOPS FROM V $ RSRCPDBMETRIC r，CDB_PDBS p WHERE r。CON_ID = p。CON_ID;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97__GUID-8B417FF8-392D-4DBE-8CB8-41BCB295B90C">通过PDB跟踪每秒为I / O操作生成的数字兆字节数</p>
                        <p>要跟踪前一分钟PDB每秒为I / O操作生成的兆字节数，请使用<code class="codeph">IOMBPS</code>列。
                        </p>
                        <p>以下查询通过显示容器ID（ <code class="codeph">CON_ID</code> ）和每个PDB的名称来显示此信息：</p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10 SELECT r。CON_ID，p。PDB_NAME，r。IOMBPS来自V $ RSRCPDBMETRIC r，CDB_PDBS p WHERE r。CON_ID = p。CON_ID;</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" title="通过一组动态性能视图，您可以监视PDB的Oracle数据库资源管理器设置的结果。">监视由Oracle数据库资源管理器管理的PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-93699AC3-9601-484E-A72A-11D1A716F853" name="GUID-93699AC3-9601-484E-A72A-11D1A716F853"></a><h4 id="MULTI-GUID-93699AC3-9601-484E-A72A-11D1A716F853" class="sect4"><span class="enumeration_section">22.4.5</span>监控PDB的内存使用情况</h4>
                  <div>
                     <p><code class="codeph">V$RSRCPDBMETRIC</code>视图使您可以跟踪PDB使用的内存量。
                     </p>
                     <div class="section">
                        <p>使用此视图可跟踪PDB当前使用的SGA，PGA，缓冲区高速缓存和共享池内存的数量。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要跟踪特定PDB的当前内存使用情况（以字节为单位），请使用<code class="codeph">SGA_BYTES</code> ， <code class="codeph">PGA_BYTES</code> ， <code class="codeph">BUFFER_CACHE_BYTES</code>和<code class="codeph">SHARED_POOL_BYTES</code>列。
                        </p>
                        <p>以下查询通过显示容器ID（ <code class="codeph">CON_ID</code> ）和每个PDB的名称来显示此信息：</p><pre class="pre codeblock"><code>COLUMN PDB_NAME FORMAT A10 SELECT r。CON_ID，p。PDB_NAME，r。SGA_BYTES，r。PGA_BYTES，r。BUFFER_CACHE_BYTES，r。SHARED_POOL_BYTES来自V $ RSRCPDBMETRIC r，CDB_PDBS p WHERE r。CON_ID = p。CON_ID;</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" title="通过一组动态性能视图，您可以监视PDB的Oracle数据库资源管理器设置的结果。">监视由Oracle数据库资源管理器管理的PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
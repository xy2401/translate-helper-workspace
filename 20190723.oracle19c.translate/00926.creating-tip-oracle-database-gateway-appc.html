<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>创建提示</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-appc-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T18:35:49-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18239-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="pga-utility-oracle-database-gateway-appc.html" title="Previous" type="text/html"></link>
      <link rel="next" href="developing-appc-client-app-sna-only.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="APPUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="pga-utility-oracle-database-gateway-appc.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="developing-appc-client-app-sna-only.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建提示</li>
            </ol>
            <a id="GUID-78D4439E-7DD6-45DF-842E-35007FCC572B" name="GUID-78D4439E-7DD6-45DF-842E-35007FCC572B"></a><a id="APPUG300"></a>
            
            <h2 id="APPUG-GUID-78D4439E-7DD6-45DF-842E-35007FCC572B" class="sect2"><span class="enumeration_chapter">3</span>创建提示</h2>
         </header>
         <div class="ind">
            <div>
               <p>这个<a id="d15950e30" class="indexterm-anchor"></a>以下部分详细介绍了如何定义，生成和编译事务接口包（TIP）。它假定已存在远程主机事务程序（RTP）。此事务程序具有操作特性，用于指定如何定义TIP以及客户端应用程序如何使用TIP。<a id="d15950e35" class="indexterm-anchor"></a><a id="d15950e39" class="indexterm-anchor"></a></p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="creating-tip-oracle-database-gateway-appc.html#GUID-0B156FA9-B9D0-40AD-94E1-1281EF41CEEA">授予TIP创建者权限</a></p>
                  </li>
                  <li>
                     <p><a href="creating-tip-oracle-database-gateway-appc.html#GUID-4C184553-3AB2-4832-B048-BF94BCFAE3C5">评估RHT</a></p>
                  </li>
                  <li>
                     <p><a href="creating-tip-oracle-database-gateway-appc.html#GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837">定义和生成TIP</a></p>
                  </li>
                  <li>
                     <p><a href="creating-tip-oracle-database-gateway-appc.html#GUID-85216411-6881-4AEE-9C11-A6A1FC0C7F0C">编译提示</a></p>
                  </li>
                  <li>
                     <p><a href="creating-tip-oracle-database-gateway-appc.html#GUID-16F7D081-B82F-4BC1-8514-4E167CFA7E46">提示内容文档（tipname.doc）</a></p>
                  </li>
               </ul>
               <p>以下步骤创建用于远程主机事务（RHT）的TIP：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>评估RHT</p>
                  </li>
                  <li>
                     <p>准备PGAU声明</p>
                  </li>
                  <li>
                     <p>定义和生成TIP</p>
                  </li>
                  <li>
                     <p>编写提示</p>
                  </li>
               </ul>
            </div><a id="APPUG958"></a><div class="props_rev_3"><a id="GUID-0B156FA9-B9D0-40AD-94E1-1281EF41CEEA" name="GUID-0B156FA9-B9D0-40AD-94E1-1281EF41CEEA"></a><h3 id="APPUG-GUID-0B156FA9-B9D0-40AD-94E1-1281EF41CEEA" class="sect3">授予TIP创建者权限</h3>
               <div>
                  <p>每个TIP开发人员都需要访问以下内容<a id="d15950e128" class="indexterm-anchor"></a> PL / SQL包，随Oracle数据库一起提供：</p>
                  <p>对于Microsoft Windows：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">DBMS_PIPE</code>在<code class="codeph">%ORACLE_HOME%\rdbms\admin</code><a id="d15950e143" class="indexterm-anchor"></a><a id="d15950e145" class="indexterm-anchor"></a></p>
                     </li>
                     <li>
                        <p><code class="codeph">%ORACLE_HOME%\rdbms\admin</code> <code class="codeph">UTL_RAW</code><a id="d15950e156" class="indexterm-anchor"></a><a id="d15950e158" class="indexterm-anchor"></a></p>
                     </li>
                     <li>
                        <p><code class="codeph">UTL_PG</code>在<code class="codeph">%ORACLE_HOME%\rdbms\admin</code><a id="d15950e167" class="indexterm-anchor"></a><a id="d15950e171" class="indexterm-anchor"></a></p>
                     </li>
                  </ul>
                  <p>对于基于UNIX的系统：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">$ORACLE_HOME/rdbms/admin</code> <code class="codeph">DBMS_PIPE</code><a id="d15950e185" class="indexterm-anchor"></a><a id="d15950e187" class="indexterm-anchor"></a></p>
                     </li>
                     <li>
                        <p><code class="codeph">$ORACLE_HOME/rdbms/admin</code> <code class="codeph">UTL_RAW</code><a id="d15950e198" class="indexterm-anchor"></a><a id="d15950e200" class="indexterm-anchor"></a></p>
                     </li>
                     <li>
                        <p><code class="codeph">$ORACLE_HOME/rdbms/admin</code> <code class="codeph">UTL_PG</code><a id="d15950e209" class="indexterm-anchor"></a><a id="d15950e213" class="indexterm-anchor"></a></p>
                     </li>
                  </ul>
                  <p>如果用户以外的任何人<a id="d15950e219" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code>将开发TIP，他们需要明确的资助来执行这些操作。有关私有和公共授权的详细信息，请参阅安装指南中适用于您的通信协议的配置部分中的“可选配置步骤”部分。
                  </p>
               </div>
            </div><a id="APPUG959"></a><div class="props_rev_3"><a id="GUID-4C184553-3AB2-4832-B048-BF94BCFAE3C5" name="GUID-4C184553-3AB2-4832-B048-BF94BCFAE3C5"></a><h3 id="APPUG-GUID-4C184553-3AB2-4832-B048-BF94BCFAE3C5" class="sect3">评估RHT</h3>
               <div>
                  <div class="section">
                     <p>请按照以下步骤识别并熟悉远程主机事务数据交换。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860">识别远程主机事务</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-9F009D52-CA13-4F71-83A9-3E77D7F6AA55">PGAU DEFINE CALL命令</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-C00293CB-2FA3-447B-A79D-FCB70D7000D9">PGAU DEFINE DATA命令</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-A16BDF52-DC3E-4DF9-B4C7-C3E6BEEA9415">使用SNA在网关上进行PGAU DEFINE TRANSACTION命令</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-BDC76DB5-2655-4809-9435-494EF07C95A6">使用TCP / IP在网关上进行PGAU DEFINE TRANSACTION命令</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942">编写PGAU声明</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-F09DAE14-356A-42C6-B0E9-E0BF7064BE6B">编写PGAU脚本文件</a></span></li>
                  </ol>
               </div><a id="APPUG1296"></a><a id="APPUG1297"></a><a id="APPUG960"></a><div class="props_rev_3"><a id="GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860" name="GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860"></a><h4 id="APPUG-GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860" class="sect4">识别远程主机事务</h4>
                  <div>
                     <p>您必须首先确定RHT数据交换步骤。这些是RHT程序中嵌入的发送和接收调用。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860__GUID-6BFBBFCB-93DB-41A6-A5DE-D56CBE538DEA"><span class="bold">如果您的网关使用SNA通信协议：</span></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>RHT数据交换步骤使用以下语言标识：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您可以使用COBOL：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>CICS</p>
                                 </li>
                                 <li>
                                    <p>IM小号</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>您可以使用IBM 370 Assembler：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>CICS</p>
                                 </li>
                                 <li>
                                    <p>IM小号</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>您可以将IBM REXX用于：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>CICS</p>
                                 </li>
                                 <li>
                                    <p>IM小号</p>
                                 </li>
                                 <li>
                                    <p>Z / OS</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860__GUID-F47DBAF0-6E22-443D-AEF8-061225DB17DC">如果您的网关使用TCP / IP通信协议：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>当网关对IMS Connect使用TCP / IP支持时，IMS是唯一支持的OLTP。RHT程序必须使用嵌入式<a id="d15950e393" class="indexterm-anchor"></a> I / O PCB函数调用。该功能仅在COBOL和汇编语言下识别。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="APPUG961"></a><div class="props_rev_3"><a id="GUID-9F009D52-CA13-4F71-83A9-3E77D7F6AA55" name="GUID-9F009D52-CA13-4F71-83A9-3E77D7F6AA55"></a><h4 id="APPUG-GUID-9F009D52-CA13-4F71-83A9-3E77D7F6AA55" class="sect4">PGAU DEFINE CALL命令</h4>
                  <div>
                     <p>制作每个数据交换的呼叫清单。该列表规定了一系列PGAU <code class="codeph">DEFINE CALL</code>语句。有关此PGAU命令的更多信息，请参阅<a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19">Procedural Gateway Administration Utility中的</a> <span class="q">“ <a href="pga-utility-oracle-database-gateway-appc.html#GUID-01EEB1ED-7AB6-4BFA-AF6F-A9D36A44C0B1">DEFINE CALL</a> ”</span> 。
                     </p>
                     <p>您将为每个调用使用的三个重要参数是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">cname</code> ：要创建的调用定义的名称;</p>
                        </li>
                        <li>
                           <p><code class="codeph">dname</code> ：要交换的数据结构的名称;和</p>
                        </li>
                        <li>
                           <p>是发送（ <code class="codeph">OUT</code> ）还是接收（ <code class="codeph">IN</code> ）</p>
                        </li>
                     </ul>
                     <p>RHT发送对应于TIP <code class="codeph">OUT</code> ，RHT接收对应于TIP <code class="codeph">IN</code> 。</p>
                     <p><span class="bold">如果您的通信协议是SNA</span> ：有关PGAU <code class="codeph">DEFINE CALL</code>命令的更多信息，请参阅<a href="developing-appc-client-app-sna-only.html#GUID-0522D9DF-E342-4451-A167-0FD0E5ADD13D">灵活调用序列</a> 。
                     </p>
                     <p><span class="bold">如果您的通信协议是TCP / IP</span> ：有关PGAU <code class="codeph">DEFINE CALL</code>命令的更多信息，请参阅<a href="developing-appc-client-app-tcpip-only.html#GUID-864E03E4-0F1A-478B-A76D-3D9624312D67">灵活调用序列</a> 。
                     </p>
                     <p>PGAU呼叫条目仅定义一次，因此消除任何重复。</p>
                     <p>此调用列表定义TIP函数调用，而不是它们的使用顺序。请注意，每次调用的顺序是事务的行为，并指示高级应用程序对TIP进行的调用顺序，然后TIP通过数据库网关服务器调用RHT。虽然此调用序列对于维护应用程序和RHT之间的同步至关重要，但TIP只是应用程序的访问方法，并且不了解更高级别的调用顺序。</p>
                  </div>
               </div><a id="APPUG962"></a><div class="props_rev_3"><a id="GUID-C00293CB-2FA3-447B-A79D-FCB70D7000D9" name="GUID-C00293CB-2FA3-447B-A79D-FCB70D7000D9"></a><h4 id="APPUG-GUID-C00293CB-2FA3-447B-A79D-FCB70D7000D9" class="sect4">PGAU DEFINE DATA命令</h4>
                  <div>
                     <p>对于RHT呼叫列表中的每个呼叫，标识在呼叫缓冲区中发送或接收的RHT数据结构。</p>
                     <p>制作每个这样的结构的数据列表。该列表规定了一系列PGAU <code class="codeph">DEFINE DATA</code>语句。
                     </p>
                     <p>您将用于<code class="codeph">DEFINE DATA</code>的两个重要参数是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">dname:</code>要创建的数据定义的名称;和</p>
                        </li>
                        <li>
                           <p><code class="codeph">dname.ext:</code>存储数据定义的文件。
                           </p>
                        </li>
                     </ul>
                     <p>PGAU数据条目仅定义一次，因此消除任何重复。</p>
                     <div class="infoboxnote" id="GUID-C00293CB-2FA3-447B-A79D-FCB70D7000D9__GUID-F7752931-E1DA-436C-9263-7961D9B5EB03">
                        <p class="notep1">注意：</p>
                        <p>将COBOL记录布局（副本）移动到网关系统。</p>
                        <p>在定义数据项时，PGAU可以使用副本作为输入。确定要交换的数据项后，使用文件传输程序将副本下载到网关系统。副本稍后用于定义数据项。<a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-AA9B8762-BDAF-4EED-A8B0-09F8A937F04E">管理实用程序示例中</a>记录了示例中使用的示例副本。
                        </p>
                     </div>
                  </div>
               </div><a id="APPUG963"></a><div class="props_rev_3"><a id="GUID-A16BDF52-DC3E-4DF9-B4C7-C3E6BEEA9415" name="GUID-A16BDF52-DC3E-4DF9-B4C7-C3E6BEEA9415"></a><h4 id="APPUG-GUID-A16BDF52-DC3E-4DF9-B4C7-C3E6BEEA9415" class="sect4">使用SNA在网关上进行PGAU DEFINE TRANSACTION命令</h4>
                  <div>
                     <p>确定RHT程序的网络地址信息。您的网络或OLTP系统程序员可以为您提供此信息。</p>
                     <p><a id="d15950e618" class="indexterm-anchor"></a>您将用于PGAU <code class="codeph">DEFINE TRANSACTION</code>的五个重要参数是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">侧面配置文件名称</code></span> 
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">TP名称</code></span> 
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">LU名字</code></span> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LOGMODE</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">同步级别</code> 
                           </p>
                        </li>
                     </ul>
                     <p>您还必须为OLTP期望数据的语言标识全球化支持字符集（ <code class="codeph">charset</code> ）。
                     </p>
                     <p>此时，如果您的网关使用SNA，则继续<a href="creating-tip-oracle-database-gateway-appc.html#GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942">编写PGAU语句</a> 。
                     </p>
                  </div>
               </div><a id="APPUG1298"></a><a id="APPUG964"></a><div class="props_rev_3"><a id="GUID-BDC76DB5-2655-4809-9435-494EF07C95A6" name="GUID-BDC76DB5-2655-4809-9435-494EF07C95A6"></a><h4 id="APPUG-GUID-BDC76DB5-2655-4809-9435-494EF07C95A6" class="sect4">使用TCP / IP在网关上进行PGAU DEFINE TRANSACTION命令</h4>
                  <div>
                     <p>在使用此命令之前，您需要知道IMS Connect主机名（或TCP / IP地址），端口号以及在其中定义为列的其他IMS Connect参数。 <a id="d15950e711" class="indexterm-anchor"></a> <code class="codeph">PGA_TCP_IMSC</code>表。有关使用<code class="codeph">pg4tcpmap</code>工具将参数映射到TCP / IP的准备工作的完整信息，请参阅<a href="pg4tcpmap-commands-tcpip.html#GUID-CDAD0D0C-6070-4E0E-9B97-E4DCF919510F">PG4TCPMAP命令（仅限TCP / IP）</a> 。
                     </p>
                     <p>当你运行<a id="d15950e725" class="indexterm-anchor"></a> <code class="codeph">pg4tcpmap</code>工具需要指定一个唯一的名称（Side Profile Name）。该名称必须与您在此处用于创建提示的名称相同。</p>
                     <p><span class="bold">如果要将网关从SNA转换为TCP / IP通信协议以调用IMS事务，则需要重新生成TIP。</span></p>
                     <p>有关详细信息，请参阅<a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19">Procedural Gateway Administration Utility</a> 。
                     </p>
                  </div>
               </div><a id="APPUG965"></a><div class="props_rev_3"><a id="GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942" name="GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942"></a><h4 id="APPUG-GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942" class="sect4">编写PGAU声明</h4>
                  <div>
                     <p>在评估RHT之后，将TIP定义为PGAU以放置在<a id="d15950e780" class="indexterm-anchor"></a> PG DD。</p>
                     <ol>
                        <li>
                           <p>写一个<a id="d15950e789" class="indexterm-anchor"></a><a id="d15950e793" class="indexterm-anchor"></a>数据列表中每个条目的<code class="codeph">DEFINE DATA</code>语句。例如，如果您的RHT有三种不同的数据结构，那么您的数据定义可能是：</p><pre class="oac_no_warn" dir="ltr">DEFINE DATA dname1 LANGUAGE（IBMVSCOBOLII）INFILE（dnamel.ext）; DEFINE DATA dname2 LANGUAGE（IBMVSCOBOLII）INFILE（dname2.ext）; DEFINE DATA dname3 LANGUAGE（IBMVSCOBOLII）INFILE（dname3.ext）;</pre><p>然后，您必须将包含这些数据定义的源文件复制或传输到PGAU可以将其作为输入读取的目录。</p>
                        </li>
                        <li>
                           <p>写一个<a id="d15950e805" class="indexterm-anchor"></a><a id="d15950e807" class="indexterm-anchor"></a>您的通话清单中每个条目的<code class="codeph">DEFINE CALL</code>语句。例如，如果您的RHT有一个接收发送接收发送序列，您的呼叫定义将是：</p><pre class="oac_no_warn" dir="ltr">DEFINE CALL cname1 PARMS（（dnamel IN））; DEFINE CALL cname2 PARMS（（dname2 OUT））; DEFINE CALL cname3 PARMS（（dname3 IN））; DEFINE CALL cname4 PARMS（（dname2 OUT））;</pre><div class="infoboxnote" id="GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942__GUID-6CF9E823-50C9-4BE4-8AD8-D777698978D0">
                              <p class="notep1">注意：</p>
                              <p>您可以选择重写您的呼叫定义，以便将数据传输合并到更少的交换中，只要您不改变数据传输顺序即可。例如：</p>
                              <p><code class="codeph">DEFINE CALL cname1 PARMS（（dname1 IN），</code></p>
                              <p><code class="codeph">（dname2 OUT））;</code></p>
                              <p><code class="codeph">DEFINE CALL cname3 PARMS（（dname3 IN），</code></p>
                              <p><code class="codeph">（dname2 OUT））;</code></p>
                              <p>这减少了应用程序和TIP之间的调用，从四次调用到每次调用时传递<code class="codeph">IN</code>和<code class="codeph">OUT</code>参数的两次调用。由于TIP总是在<code class="codeph">OUT</code>参数之前处理<code class="codeph">IN</code>参数，因此数据传输顺序不变。但是，这种合并并非总是可行。
                              </p>
                              <p><span class="bold">如果您的通信协议是SNA</span> ：有关PGAU <code class="codeph">DEFINE CALL</code>命令的更多信息，请参阅<a href="developing-appc-client-app-sna-only.html#GUID-0522D9DF-E342-4451-A167-0FD0E5ADD13D">灵活调用序列</a> 。
                              </p>
                              <p><span class="bold">如果您的通信协议是TCP / IP</span> ：有关PGAU <code class="codeph">DEFINE CALL</code>命令的更多信息，请参阅<a href="developing-appc-client-app-tcpip-only.html#GUID-864E03E4-0F1A-478B-A76D-3D9624312D67">灵活调用序列</a> 。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>写一个<a id="d15950e870" class="indexterm-anchor"></a><a id="d15950e872" class="indexterm-anchor"></a> <code class="codeph">DEFINE TRANSACTION</code>语句，包含每个调用，指定网络地址和全球化支持信息：</p><pre class="oac_no_warn" dir="ltr">DEFINE TRANSACTION tname CALLS（cname1 cname2，....cnameN）ENVIRONMENT（IBM370）SIDEPROF（profname）| TPNAME（tpid）LUNAME（luname）LOGMODE（模式）SYNCLEVEL（n）NLS_LANGUAGE（charset）;</pre></li>
                        <li>
                           <p>你可以添加一个<a id="d15950e884" class="indexterm-anchor"></a><a id="d15950e886" class="indexterm-anchor"></a> <code class="codeph">GENERATE</code>语句创建TIP规范：</p><pre class="oac_no_warn" dir="ltr">生成tname</pre><div class="infoboxnote" id="GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942__GUID-BF7045BB-0378-48E3-9110-E0416BB4DB70">
                              <p class="notep1">注意：</p>
                              <p>你也可以添加一个<a id="d15950e899" class="indexterm-anchor"></a> <code class="codeph">REPORT</code>语句列出<code class="codeph">tname</code>的PG DD条目：</p>
                              <p><code class="codeph">使用带有DATA的CALLS报告事务tname;</code></p>
                              <p>还使用Comments注释脚本：</p>
                              <p><code class="codeph">REM这是一个评论</code></p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="APPUG966"></a><div class="props_rev_3"><a id="GUID-F09DAE14-356A-42C6-B0E9-E0BF7064BE6B" name="GUID-F09DAE14-356A-42C6-B0E9-E0BF7064BE6B"></a><h4 id="APPUG-GUID-F09DAE14-356A-42C6-B0E9-E0BF7064BE6B" class="sect4">编写PGAU脚本文件</h4>
                  <div>
                     <p>上一节介绍了通过PGAU命令行处理器执行PGAU语句时需要遵循的步骤。作为一种节省时间的措施，您可以选择将所有语句（ <code class="codeph">DEFINE DATA</code> ， <code class="codeph">DEFINE CALL</code>和<code class="codeph">DEFINE TRANSACTION</code> ）写入单个语句中<a id="d15950e956" class="indexterm-anchor"></a><a id="d15950e958" class="indexterm-anchor"></a>名为<code class="codeph">tname.ctl</code> PGAU脚本文件，顺序如下：</p>
                     <ol>
                        <li>
                           <p>定义数据</p>
                        </li>
                        <li>
                           <p>定义呼叫</p>
                        </li>
                        <li>
                           <p>定义交易</p>
                        </li>
                        <li>
                           <p>生成</p>
                           <div class="infoboxnote" id="GUID-F09DAE14-356A-42C6-B0E9-E0BF7064BE6B__GUID-F9E10FD7-C897-4342-BBEB-F9D0794A160B">
                              <p class="notep1">注意：</p>
                              <p>因为您可能会多次运行此脚本，所以应该包括<a id="d15950e982" class="indexterm-anchor"></a> <code class="codeph">UNDEFINE</code>语句首先删除PG DD中的任何先前条目。</p>
                           </div>
                        </li>
                     </ol>
                     <p>这是<code class="codeph">tname.ctl</code> PGAU脚本文件的示例：</p><pre class="oac_no_warn" dir="ltr">UNDEFINE TRANSACTION tname版本（全部）; UNDEFINE CALL cname1版本（全部）; UNDEFINE CALL cname2版本（全部）; UNDEFINE DATA dname1版本（全部）; UNDEFINE DATA dname2版本（全部）; UNDEFINE DATA dname3版本（全部）; DEFINE DATA dname1 LANGUAGE（IBMVSCOBOLII）INFILE（dnamel.ext）; DEFINE DATA dname2 LANGUAGE（IBMVSCOBOLII）INFILE（dname2.ext）; DEFINE DATA dname3 LANGUAGE（IBMVSCOBOLII）INFILE（dname3.ext）; DEFINE CALL cname1 PARMS（dname1 IN），（dname2 OUT））; DEFINE CALL cname2 PARMS（dname3 IN），（dname2 OUT））; DEFINE TRANSACTION tname CALLS（cname1，cname2，....cnameN）ENVIRONMENT（IBM370）SIDEPROF（profname）| TPNAME（tpid）LUNAME（luname）LOGMODE（模式）SYNCLEVEL（n）NLS_LANGUAGE（charset）;生成tname</pre></div>
               </div>
            </div><a id="APPUG967"></a><div class="props_rev_3"><a id="GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837" name="GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837"></a><h3 id="APPUG-GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837" class="sect3">定义和生成TIP</h3>
               <div>
                  <div class="section">
                     <p>创建控制文件后，使用PGAU创建<a id="d15950e1037" class="indexterm-anchor"></a> PG DD条目和<a id="d15950e1042" class="indexterm-anchor"></a>提示规范文件。
                     </p>
                     <div class="infoboxnote" id="GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837__GUID-059949B6-C0A7-4025-BAF5-178E2C3F5A88">
                        <p class="notep1">注意：</p>
                        <p>运行PGAU的用户标识必须具有：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>写访问输出规范文件（ <code class="codeph">pgau.pkh, pgau.pkb</code>和<code class="codeph">pgau.doc</code> ），其中<code class="codeph">pgau</code>是默认名称;和</p>
                           </li>
                           <li>
                              <p>读访问数据定义源文件（ <code class="codeph">dname.ext</code> ），其中<code class="codeph">dname.ext</code>将在PGAU <code class="codeph">DEFINE DATA</code>语句中指定。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>针对存储在Oracle Database Gateway中的PG DD调用PGAU以获取APPC管理员的用户ID：</p>
                     <p>对于Microsoft Windows：</p><pre class="oac_no_warn" dir="ltr">C：\&gt; pgau PGAU&gt; connect pgaadmin \ pw @ <span class="italic">database_specification_string</span> 
</pre><p>对于基于UNIX的系统：</p><pre class="oac_no_warn" dir="ltr">$ pgau PGAU&gt; connect pgaadmin / pw @ <span class="italic">database_specification_string</span> 
</pre><p>发出以下命令：</p><pre class="oac_no_warn" dir="ltr">PGAU&gt;在PGAU上设置回显&gt;假脱机tname.def PGAU&gt; @tname.ctl PGAU&gt;假脱机</pre><p>TIP现在可以编译了。默认情况下<a id="d15950e1097" class="indexterm-anchor"></a><a id="d15950e1099" class="indexterm-anchor"></a> <code class="codeph">GENERATE</code>语句将您的TIP规范写入当前目录中的以下输出文件：</p><pre class="oac_no_warn" dir="ltr">pgau.pkh（TIP Header）pgau.pkb（TIP Body）pgau.doc（TIP内容文档）</pre><div class="infoboxnote" id="GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837__GUID-91657630-1ABA-425E-9D09-AD8835DDDA4D">
                        <p class="notep1">注意：</p>
                        <p>您可以选择添加<a id="d15950e1112" class="indexterm-anchor"></a> <span class="italic">假脱机</span>和<span class="italic">回显</span>你的脚本（ <code class="codeph">tname.ctl</code> ）或者使用她的增强功能，例如使用PG DD角色和PGAU <a id="d15950e1130" class="indexterm-anchor"></a><a id="d15950e1133" class="indexterm-anchor"></a>共享PG DD的<code class="codeph">GROUP</code>语句。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">如果您的网关使用SNA</span> ：有关详细信息，请参阅<a href="developing-appc-client-app-sna-only.html#GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788">客户端应用程序开发（仅限SNA）</a> 。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">如果您的网关对IMS Connect使用TCP / IP支持</span> ：有关详细信息，请参阅<a href="developing-appc-client-app-tcpip-only.html#GUID-705991C2-2CC2-4FAB-A04C-D63485B571FC">客户端应用程序开发（仅限TCP / IP）</a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG968"></a><div class="props_rev_3"><a id="GUID-85216411-6881-4AEE-9C11-A6A1FC0C7F0C" name="GUID-85216411-6881-4AEE-9C11-A6A1FC0C7F0C"></a><h3 id="APPUG-GUID-85216411-6881-4AEE-9C11-A6A1FC0C7F0C" class="sect3">编译提示</h3>
               <div>
                  <div class="section">
                     <p>退出PGAU。保留在当前目录中并调用<a id="d15950e1200" class="indexterm-anchor"></a>在SQL * Plus。
                     </p>
                     <p>对于Microsoft Windows：</p><pre class="oac_no_warn" dir="ltr">C：\&gt; sqlplus <span class="italic">userid / pw @ database_specification_string</span> SQL&gt;在SQL上设置echo&gt; @ pgau.pkh SQL&gt; @ pgau.pkb</pre><p>对于基于UNIX的系统：</p><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">userid / pw @ database_specification_string</span> SQL&gt;在SQL上设置echo&gt; @ pgau.pkh SQL&gt; @ pgau.pkb</pre><p>最后两个命令分别编译TIP规范和正文。</p>
                     <p>您现在已经编译了一个可以由客户端应用程序调用的TIP。如果您的客户端应用程序已经编写，则可以开始测试。</p>
                     <p>有关设计客户端应用程序和编译TIP的更多信息，请参阅<a href="oracle-database-gateway-appc-introduction.html#GUID-305ED3CC-1F1B-4D77-BDFE-6294CF2073D2">APPC</a>和<a href="tip-internals-oracle-database-gateway-appc.html#GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17">Tip Internals的</a> <a href="oracle-database-gateway-appc-introduction.html#GUID-305ED3CC-1F1B-4D77-BDFE-6294CF2073D2">Oracle Database Gateway简介</a> 。
                     </p>
                     <p><span class="bold">如果您的网关使用SNA</span> ：有关PGAU语句语法和用法的信息，请参阅<a href="developing-appc-client-app-sna-only.html#GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788">客户端应用程序开发（仅限SNA）</a> 。
                     </p>
                     <p><span class="bold">如果您的网关对IMS Connect使用TCP / IP支持</span> ：有关PGAU语句语法和用法的信息，请参阅<a href="developing-appc-client-app-tcpip-only.html#GUID-705991C2-2CC2-4FAB-A04C-D63485B571FC">客户端应用程序开发（仅限TCP / IP）</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG969"></a><div class="sect2"><a id="GUID-16F7D081-B82F-4BC1-8514-4E167CFA7E46" name="GUID-16F7D081-B82F-4BC1-8514-4E167CFA7E46"></a><h3 id="APPUG-GUID-16F7D081-B82F-4BC1-8514-4E167CFA7E46" class="sect3">提示内容文档（tipname.doc）</h3>
               <div>
                  <p>本节讨论用户发出PGAU <code class="codeph">GENERATE</code>命令时<code class="codeph">GENERATE</code>的TIP文档文件。此TIP内容文件描述了函数调用和<a id="d15950e1290" class="indexterm-anchor"></a> TIP中提供的PL / <code class="codeph">SQL</code>变量和数据类型。</p>
                  <p><a id="d15950e1299" class="indexterm-anchor"></a> PGAU <code class="codeph">GENERATE</code>始终生成一个名为的TIP内容文件<a id="d15950e1307" class="indexterm-anchor"></a><a id="d15950e1309" class="indexterm-anchor"></a><a id="d15950e1313" class="indexterm-anchor"></a> <span class="italic"><code class="codeph">tipname</code></span> <code class="codeph">.doc</code> 。文件名是PGAU <code class="codeph">GENERATE</code>命令中指定的事务的名称，文件类型始终为<code class="codeph">.doc</code> 。此TIP内容文件包含以下部分：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d15950e1333" class="indexterm-anchor"></a> <code class="codeph">GENERATION</code>状态</p>
                        <p>此部分包含生成TIP的状态。</p>
                     </li>
                     <li>
                        <p><a id="d15950e1346" class="indexterm-anchor"></a>提示交易</p>
                        <p>此部分标识已定义的事务属性。这些是<code class="codeph">PGAU DEFINE TRANSACTION</code>定义的结果。
                        </p>
                     </li>
                     <li>
                        <p><a id="d15950e1360" class="indexterm-anchor"></a>提示默认呼叫</p>
                        <p>本节标识用户应用程序初始化和终止事务所进行的调用的语法。无论TIP或事务是如何定义的，PGAU都会在每个TIP中生成这些调用。</p>
                     </li>
                     <li>
                        <p> <a id="d15950e1372" class="indexterm-anchor"></a>提示用户呼叫</p>
                        <p>本节标识用户为应用程序与事务交互定义的调用的语法。</p>
                     </li>
                     <li>
                        <p><a id="d15950e1383" class="indexterm-anchor"></a>提示用户声明</p>
                        <p>本节标识TIP包公共数据类型声明，由每个调用参数中指定的用户数据定义隐含。</p>
                     </li>
                     <li>
                        <p><a id="d15950e1394" class="indexterm-anchor"></a>提示用户变量</p>
                        <p>本节包含可由应用程序引用或由应用程序引用的TIP变量。</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
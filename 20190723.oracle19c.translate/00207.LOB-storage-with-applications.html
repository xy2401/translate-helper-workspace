<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>带应用程序的LOB存储</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="securefiles-and-large-objects-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:58:18-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96333-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="application-design-with-LOBs.html" title="Previous" type="text/html"></link>
      <link rel="next" href="advanced-design-considerations.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SecureFiles and Large Objects Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADLOB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="application-design-with-LOBs.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="advanced-design-considerations.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database SecureFiles和Large Objects Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="application-design-with-LOBs.html" property="item" typeof="WebPage"><span property="name">LOB的应用程序设计</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">带应用程序的LOB存储</li>
            </ol>
            <a id="GUID-A81490D2-D92D-4513-81B3-FD672D0D267C" name="GUID-A81490D2-D92D-4513-81B3-FD672D0D267C"></a><a id="ADLOB45259"></a>
            
            <h2 id="ADLOB-GUID-A81490D2-D92D-4513-81B3-FD672D0D267C" class="sect2"><span class="enumeration_chapter">13</span> LOB存储与应用程序</h2>
         </header>
         <div class="ind">
            <div>
               <p>包含具有LOB列的表的应用程序可以使用<code class="codeph">SECUREFILE</code>和<code class="codeph">BASICFILE</code> LOB。如果某个功能仅适用于一种LOB，则说明这一点。
               </p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="LOB-storage-with-applications.html#GUID-F02AB4ED-3EF6-436D-B441-074034D1EB7A">包含LOB的表</a></p>
                  </li>
                  <li>
                     <p><a href="LOB-storage-with-applications.html#GUID-FCF2526E-DB6D-4A77-AA4F-1DFB59E90784">LOB列的数据类型</a></p>
                  </li>
                  <li>
                     <p><a href="LOB-storage-with-applications.html#GUID-517E1234-EFCD-4D16-B69B-23F72A18A77D">LOB存储参数</a></p>
                  </li>
                  <li>
                     <p><a href="LOB-storage-with-applications.html#GUID-DF2C343F-6937-4E9B-A15F-141A90AAC92E">LOB列索引</a></p>
                  </li>
                  <li>
                     <p><a href="LOB-storage-with-applications.html#GUID-F4B2B0C3-6E8E-47A4-A46C-8014DAAD7B42">分区表中的LOB操作</a></p>
                  </li>
                  <li>
                     <p><a href="LOB-storage-with-applications.html#GUID-5E0E0772-C5CE-458A-AD07-E8DB32C24231">索引组织表中的LOB</a></p>
                  </li>
                  <li>
                     <p><a href="LOB-storage-with-applications.html#GUID-FD9C0216-EACF-4F21-B298-11336B4F4E75">分区索引组织表中LOB的限制</a></p>
                  </li>
                  <li>
                     <p><a href="LOB-storage-with-applications.html#GUID-FFA3FAB5-694E-49C5-A8AF-B21B441BEFCC">更新嵌套表中的LOB</a></p>
                  </li>
               </ul>
            </div><a id="ADLOB45260"></a><div class="props_rev_3"><a id="GUID-F02AB4ED-3EF6-436D-B441-074034D1EB7A" name="GUID-F02AB4ED-3EF6-436D-B441-074034D1EB7A"></a><h3 id="ADLOB-GUID-F02AB4ED-3EF6-436D-B441-074034D1EB7A" class="sect3">包含LOB的表</h3>
               <div>
                  <p>创建包含LOB的表时，请使用以下准则：</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-B30B5E05-1220-4880-A64D-3A6275E20C08">持久LOB初始化为NULL或Empty</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-138D2EC5-7097-4710-9F6E-5FE2F01E4B21">初始化LOB</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-B48DCD1B-0533-48FF-9F7C-AB673A35AE0A">将持久性LOB列和属性初始化为值</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-F38219C8-6B10-49AF-AC9C-2548FC2D31A2">将BFILE初始化为NULL或文件名</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB45261"></a><div class="props_rev_3"><a id="GUID-B30B5E05-1220-4880-A64D-3A6275E20C08" name="GUID-B30B5E05-1220-4880-A64D-3A6275E20C08"></a><h4 id="ADLOB-GUID-B30B5E05-1220-4880-A64D-3A6275E20C08" class="sect4">持久LOB初始化为NULL或Empty</h4>
                  <div>
                     <p>您可以设置持久性LOB（即表中的LOB列）或您定义的对象类型中的LOB属性为<code class="codeph">NULL</code>或空：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">将持久性LOB设置为NULL：</span>设置为<code class="codeph">NULL</code>的LOB没有定位符。<code class="codeph">NULL</code>值存储在表中的行中，而不是定位符。这与所有其他数据类型的过程相同。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">将持久LOB设置为空：</span>相反，存储在表中的空LOB是具有定位符的零长度LOB。因此，如果您从空的LOB列或属性中进行<code class="codeph">SELECT</code> ，那么您将获得一个定位器，您可以使用该定位器使用支持的编程环境（如OCI或<code class="codeph">PL/SQL(DBMS_LOB</code> ））使用数据填充LOB。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-B30B5E05-1220-4880-A64D-3A6275E20C08__NOTE-133-DFDBEB8C">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="overview-of-supplied-LOB-APIs.html#GUID-54BD371D-4486-48FD-BBCE-6374D03E5697">提供的LOB API概述，</a>以获取有关支持的环境的更多信息</p>
                     </div>
                  </div><a id="ADLOB45262"></a><div class="props_rev_3"><a id="GUID-2A9490EB-7791-4EDA-8218-F96AFEBDF92E" name="GUID-2A9490EB-7791-4EDA-8218-F96AFEBDF92E"></a><h5 id="ADLOB-GUID-2A9490EB-7791-4EDA-8218-F96AFEBDF92E" class="sect5">将持久LOB设置为NULL</h5>
                     <div>
                        <div class="section">
                           <p>您可能希望在插入行时将持久性LOB值设置为<code class="codeph">NULL</code> 。
                           </p>
                           <p>这些是有用的可能情况：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果您在<code class="codeph">INSERT</code>时没有LOB数据。</p>
                              </li>
                              <li>
                                 <p>如果要使用<code class="codeph">SELECT</code>语句（如下所示）来确定LOB是否包含<code class="codeph">NULL</code>值：</p><pre class="oac_no_warn" dir="ltr">SELECT COUNT（*）FROM print_media WHERE ad_graphic IS NOT NULL; SELECT COUNT（*）FROM print_media WHERE ad_graphic IS NULL;</pre></li>
                           </ul>
                           <p>请注意，您不能在<code class="codeph">NULL</code>上调用OCI或<code class="codeph">DBMS_LOB</code>函数<a id="d75921e406" class="indexterm-anchor"></a><a id="d75921e410" class="indexterm-anchor"></a><a id="d75921e412" class="indexterm-anchor"></a><a id="d75921e414" class="indexterm-anchor"></a> LOB，因此您必须使用SQL <code class="codeph">UPDATE</code>语句将LOB列重置为非<code class="codeph">NULL</code> （或空）值。
                           </p>
                           <p>关键是你不能在支持的编程环境中对<code class="codeph">NULL.</code>的LOB进行函数调用<code class="codeph">NULL.</code>这些函数仅适用于定位器，如果LOB列为<code class="codeph">NULL</code> ，则行中没有定位器。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB45263"></a><div class="props_rev_3"><a id="GUID-6F7EDF6A-C374-4584-93D2-115EA892CF24" name="GUID-6F7EDF6A-C374-4584-93D2-115EA892CF24"></a><h5 id="ADLOB-GUID-6F7EDF6A-C374-4584-93D2-115EA892CF24" class="sect5">将持久LOB设置为空</h5>
                     <div>
                        <div class="section">
                           <p>您可以将持久性LOB初始化为<code class="codeph">EMPTY</code>而不是<code class="codeph">NULL</code> 。这样做，使您可以获取LOB实例的定位器，而无需使用数据填充LOB。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用<code class="codeph">INSERT</code>语句中的SQL函数<code class="codeph">EMPTY_BLOB()</code>或<code class="codeph">EMPTY_CLOB()</code>将持久LOB设置为<code class="codeph">EMPTY</code> ，如下所示。
                                 </p><pre class="oac_no_warn" dir="ltr">插入a_table VALUES（EMPTY_BLOB（））;</pre></li>
                           </ul>
                           <p><a id="d75921e537" class="indexterm-anchor"></a>或者，您可以使用<code class="codeph">RETURNING</code>子句在一个操作中获取LOB定位器，而不是调用后续的<code class="codeph">SELECT</code>语句：</p><pre class="oac_no_warn" dir="ltr">DECLARE Lob_loc BLOB; BEGIN INSERT INTO a_table VALUES（EMPTY_BLOB（））RETURNING blob_col INTO Lob_loc; <span class="italic">/ *现在使用定位器Lob_loc用数据* /</span> END <span class="italic">填充BLOB</span> ;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADLOB45264"></a><div class="props_rev_3"><a id="GUID-138D2EC5-7097-4710-9F6E-5FE2F01E4B21" name="GUID-138D2EC5-7097-4710-9F6E-5FE2F01E4B21"></a><h4 id="ADLOB-GUID-138D2EC5-7097-4710-9F6E-5FE2F01E4B21" class="sect4">初始化LOB</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用以下<code class="codeph">INSERT</code>语句初始化<code class="codeph">print_media</code>的LOB：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO print_media VALUES（1001，EMPTY_CLOB（），EMPTY_CLOB（），NULL，EMPTY_BLOB（），EMPTY_BLOB（），NULL，NULL，NULL，NULL）;</pre><p>该值设置<code class="codeph">ad_sourcetext</code> <span class="italic">，</span> <code class="codeph">ad_fltextn</code> <span class="italic">，</span> <code class="codeph">ad_composite</code> <span class="italic">和</span> <code class="codeph">ad_photo</code>为空值，并设定<code class="codeph">ad_graphic</code>到<code class="codeph">NULL</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-138D2EC5-7097-4710-9F6E-5FE2F01E4B21__TABLEFORLOBEXAMPLESTHEPMSCHEMAPRINT-DFDB1470">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="working-with-LOBs.html#GUID-D71F0CBE-0717-41A2-BCD4-71E1DDF895D1" title="许多Oracle LOB示例使用Oracle Database Sample Schema PM的print_media表。">表的LOB例子：PM模式print_media表</a>为<code class="codeph">print_media</code>表。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45265"></a><div class="props_rev_3"><a id="GUID-B48DCD1B-0533-48FF-9F7C-AB673A35AE0A" name="GUID-B48DCD1B-0533-48FF-9F7C-AB673A35AE0A"></a><h4 id="ADLOB-GUID-B48DCD1B-0533-48FF-9F7C-AB673A35AE0A" class="sect4">将持久性LOB列和属性初始化为值<code class="codeph"></code></h4>
                  <div>
                     <div class="section">
                        <p>您可以将LOB列或LOB属性初始化为包含超过4G字节数据的值，即10.2版之前的限制。</p>
                        <div class="infoboxnotealso" id="GUID-B48DCD1B-0533-48FF-9F7C-AB673A35AE0A__GUID-9C508C22-8374-42BA-8F66-8D56528791DD">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="data-interface-for-persistent-LOBs.html#GUID-4BFDD493-F3FE-451C-9B03-21669D635586">持久LOB的数据接口</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45266"></a><div class="props_rev_3"><a id="GUID-F38219C8-6B10-49AF-AC9C-2548FC2D31A2" name="GUID-F38219C8-6B10-49AF-AC9C-2548FC2D31A2"></a><h4 id="ADLOB-GUID-F38219C8-6B10-49AF-AC9C-2548FC2D31A2" class="sect4">将BFILE初始化为NULL或文件名</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">BFILE</code>可以初始化为<code class="codeph">NULL</code>或文件名。为此，您可以使用<code class="codeph">BFILENAME()</code>函数。
                        </p>
                        <div class="infoboxnotealso" id="GUID-F38219C8-6B10-49AF-AC9C-2548FC2D31A2__GUID-9C4A1F06-F4CB-4967-95AF-C1EA5A8DEE2A">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="LOB-APIs-for-BFILE-operations.html#GUID-8E287C3F-32D5-4AF6-9858-FDBCFA28A480">BFILENAME和初始化</a> ”</span> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB101"></a><div class="props_rev_3"><a id="GUID-D3001FAF-1C46-4913-964B-61BCC14039B8" name="GUID-D3001FAF-1C46-4913-964B-61BCC14039B8"></a><h4 id="ADLOB-GUID-D3001FAF-1C46-4913-964B-61BCC14039B8" class="sect4">对LOB段的第一范围的限制</h4>
                  <div>
                     <p>任何段的第一个范围<span class="italic">至少</span>需要<span class="italic">2个块</span> （如果<code class="codeph">FREELIST GROUPS</code>为0）。也就是说，段的初始范围大小应至少为2个块。LOB段是不同的，因为如果LOB是BasicFiles LOB，它们在第一个范围<span class="italic">中至少</span>需要<span class="italic">3个</span>块，如果LOB是SecureFiles LOB则需要16个块。</p>
                     <p>如果您尝试在具有initial = 2块的永久字典管理表空间中创建LOB段，则它仍然有效，因为永久字典管理表空间中的段可能会覆盖表空间的默认存储设置。</p>
                     <p>但是，如果临时类型的统一，本地管理的表空间或字典管理的表空间或本地管理的临时表空间的扩展区大小为2个块，则无法在这些表空间中创建LOB段。这是因为在这些表空间类型中，范围大小是固定的，并且不会忽略表空间的默认存储设置。</p>
                  </div>
               </div>
            </div><a id="ADLOB45267"></a><div class="props_rev_3"><a id="GUID-FCF2526E-DB6D-4A77-AA4F-1DFB59E90784" name="GUID-FCF2526E-DB6D-4A77-AA4F-1DFB59E90784"></a><h3 id="ADLOB-GUID-FCF2526E-DB6D-4A77-AA4F-1DFB59E90784" class="sect3">LOB列的数据类型</h3>
               <div>
                  <p>选择数据类型时，请考虑以下三个主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-4362287B-6452-4E37-B34D-477A8ACEA4C9">LOBs与LONG和LONG RAW类型相比</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-710BFEBD-ECCE-4598-BB69-31D6EDCD7C4F">LOB中的变宽字符数据存储</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-AABE1311-0928-4D4D-9C1C-926EBF977B61">用LOB隐式转换字符集</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB45269"></a><a id="ADLOB45268"></a><div class="props_rev_3"><a id="GUID-4362287B-6452-4E37-B34D-477A8ACEA4C9" name="GUID-4362287B-6452-4E37-B34D-477A8ACEA4C9"></a><h4 id="ADLOB-GUID-4362287B-6452-4E37-B34D-477A8ACEA4C9" class="sect4">LOBs与LONG和LONG RAW类型相比</h4>
                  <div>
                     <div class="section">
                        <p><a href="LOB-storage-with-applications.html#GUID-4362287B-6452-4E37-B34D-477A8ACEA4C9__G1017705" title="该表在前面的文本中描述">表13-1</a>列出了LOB，LONG和LONG RAW类型之间的相似点和不同点。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-4362287B-6452-4E37-B34D-477A8ACEA4C9__G1017705">
                        <p class="titleintable">表13-1 LOBs与LONG RAW</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="LOBs与LONG RAW" width="100%" border="1" summary="This table is described in the preceding text" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="47%" id="d75921e1057">LOB数据类型</th>
                                 <th align="left" valign="bottom" width="53%" id="d75921e1060">长期和长期数据类型</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d75921e1065" headers="d75921e1057 ">
                                    <p>您可以将多个LOB存储在一行中</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d75921e1065 d75921e1060 ">
                                    <p>每行只能存储一个<code class="codeph">LONG</code>或<code class="codeph">LONG</code> <code class="codeph">RAW</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d75921e1081" headers="d75921e1057 ">
                                    <p><code class="codeph">LOB</code>可以是用户定义的数据类型的属性</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d75921e1081 d75921e1060 ">
                                    <p>这是不可能的，无论是<code class="codeph">LONG</code>或<code class="codeph">LONG</code> <code class="codeph">RAW</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d75921e1098" headers="d75921e1057 ">
                                    <p>只有LOB定位器存储在表列中; <code class="codeph">BLOB</code>和<code class="codeph">CLOB</code>数据可以存储在单独的表空间中， <code class="codeph">BFILE</code>数据存储为外部文件。
                                    </p>
                                    <p>对于内联LOB，数据库存储表列中小于约4000字节数据的LOB。</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d75921e1098 d75921e1060 ">
                                    <p>在<code class="codeph">LONG</code>或<code class="codeph">LONG</code> <code class="codeph">RAW</code>的情况下，整个值存储在表列中。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d75921e1125" headers="d75921e1057 ">
                                    <p>访问LOB列时，可以选择获取定位器或数据。</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d75921e1125 d75921e1060 ">
                                    <p>当您访问<code class="codeph">LONG</code>或<code class="codeph">LONG</code> <code class="codeph">RAW,</code>将返回整个值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d75921e1141" headers="d75921e1057 ">
                                    <p>根据您的块大小，LOB最大可达128 TB或更大。</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d75921e1141 d75921e1060 ">
                                    <p><code class="codeph">LONG</code>或<code class="codeph">LONG</code> <code class="codeph">RAW</code>实例的大小限制为2千兆字节。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d75921e1157" headers="d75921e1057 ">
                                    <p>使用LOB以随机，分段方式操作数据具有更大的灵活性。可以随机访问偏移量来访问LOB。</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d75921e1157 d75921e1060 ">
                                    <p>使用<code class="codeph">LONG or LONG RAW data.</code>以随机，分段方式操纵数据的灵活性较低<code class="codeph">LONG or LONG RAW data.</code>必须从开头到所需位置访问<code class="codeph">LONG</code> <code class="codeph">.</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d75921e1171" headers="d75921e1057 ">
                                    <p>您可以使用Oracle Golden Gate复制LOB。</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d75921e1171 d75921e1060 ">
                                    <p>LONG或LONG RAW无法进行复制。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADLOB45270"></a><div class="props_rev_3"><a id="GUID-710BFEBD-ECCE-4598-BB69-31D6EDCD7C4F" name="GUID-710BFEBD-ECCE-4598-BB69-31D6EDCD7C4F"></a><h4 id="ADLOB-GUID-710BFEBD-ECCE-4598-BB69-31D6EDCD7C4F" class="sect4">LOB中的变宽字符数据存储</h4>
                  <div>
                     <p><code class="codeph">CLOB</code>和<code class="codeph">NCLOB</code>数据类型中的变宽字符数据以与UCS2 Unicode字符集格式兼容的内部格式存储。这确保了不同宽度格式的字符数据不存在存储损失。如果您使用LOB存储不同宽度的字符数据，请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>即使使用不同宽度的<code class="codeph">CHAR</code>或<code class="codeph">NCHAR</code>数据库字符集，也可以创建包含<code class="codeph">CLOB</code>和<code class="codeph">NCLOB</code>列的表。
                           </p>
                        </li>
                        <li>
                           <p>无论是否使用宽度不同的<code class="codeph">CHAR</code>数据库字符集，都可以创建包含具有<code class="codeph">CLOB</code>属性的数据类型的表。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB45271"></a><div class="props_rev_3"><a id="GUID-AABE1311-0928-4D4D-9C1C-926EBF977B61" name="GUID-AABE1311-0928-4D4D-9C1C-926EBF977B61"></a><h4 id="ADLOB-GUID-AABE1311-0928-4D4D-9C1C-926EBF977B61" class="sect4">用LOB隐式转换字符集</h4>
                  <div>
                     <div class="section">
                        <p>对于OCI（Oracle调用接口）中使用的<code class="codeph">CLOB</code>和<code class="codeph">NCLOB</code>实例，或访问OCI功能的任何编程环境，在从一个字符集转换为另一个字符集时，将隐式执行字符集转换。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在加载到<code class="codeph">CLOB</code>或<code class="codeph">NCLOB</code>时，使用<code class="codeph">DBMS_LOB.LOADCLOBFROMFILE</code> API执行从二进制数据到字符数据的隐式转换。</p>
                           </li>
                        </ul>
                        <p>除<code class="codeph">DBMS_LOB.LOADCLOBFROMFILE</code> ，LOB API不执行从二进制数据到字符数据的隐式转换。
                        </p>
                        <p>例如，当您使用<code class="codeph">DBMS_LOB.LOADFROMFILE</code> API填充<code class="codeph">CLOB</code>或<code class="codeph">NCLOB</code> ，您将使用来自<code class="codeph">BFILE</code>二进制数据填充LOB。在这种情况下，必须在调用<code class="codeph">DBMS_LOB.LOADFROMFILE</code>之前对<code class="codeph">BFILE</code>数据执行字符集转换。</p>
                        <div class="infoboxnotealso" id="GUID-AABE1311-0928-4D4D-9C1C-926EBF977B61__GUID-AD48511D-F922-408F-A5B0-67C48FC94FAC">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../nlspg/choosing-character-set.html#NLSPG002" target="_blank"><span class="italic">Oracle数据库全球化支持指南</span></a> ，了解有关字符集转换的更多详细信息。
                           </p>
                        </div>
                        <div class="infoboxnote" id="GUID-AABE1311-0928-4D4D-9C1C-926EBF977B61__GUID-42B7C4B8-5E40-4655-BF7E-D282522536B8">
                           <p class="notep1">注意：</p>
                           <p>如果数据库表中存在用户定义的<code class="codeph">CLOB</code>列，则无法将数据库字符集从单字节更改为多字节字符集。如果数据库表中存在用户定义的<code class="codeph">NCLOB</code>列，则无法在<code class="codeph">AL16UTF16</code>和<code class="codeph">UTF8</code>之间更改国家字符集。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADLOB45272"></a><div class="props_rev_3"><a id="GUID-517E1234-EFCD-4D16-B69B-23F72A18A77D" name="GUID-517E1234-EFCD-4D16-B69B-23F72A18A77D"></a><h3 id="ADLOB-GUID-517E1234-EFCD-4D16-B69B-23F72A18A77D" class="sect3">LOB存储参数</h3>
               <div>
                  <p>在设计具有LOB存储的表时，应考虑某些LOB存储特性。有关<code class="codeph">SECUREFILE</code>参数的讨论：</p>
                  <div class="infoboxnotealso" id="GUID-517E1234-EFCD-4D16-B69B-23F72A18A77D__GUID-F6341725-7994-42D1-83E6-8EDA0BDA7C24">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="using-oracle-LOBs-storage.html#GUID-D4B9A527-6DF8-4451-B88B-B973E961D9F7" title="CREATE TABLE语句使用特定于SecureFiles或BasicFiles LOB存储或两者的参数来使用LOB存储。">使用LOB存储创建表</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="using-oracle-LOBs-storage.html#GUID-E82DC080-8AA0-46F5-B6C6-DDAB7105BC9F" title="您可以使用ALTER TABLE语句和特定的LOB相关参数修改LOB存储。">带LOB存储的ALTER TABLE</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-B82B3C24-1FAF-4661-96A0-28241FD2A052">内联和外线LOB存储</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-D3BD47D3-DD6A-4DC9-9BAF-5DBB60918087">为持久性LOB定义表空间和存储特性</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB45273"></a><div class="props_rev_3"><a id="GUID-B82B3C24-1FAF-4661-96A0-28241FD2A052" name="GUID-B82B3C24-1FAF-4661-96A0-28241FD2A052"></a><h4 id="ADLOB-GUID-B82B3C24-1FAF-4661-96A0-28241FD2A052" class="sect4">内联和外线LOB存储</h4>
                  <div>
                     <p>LOB列存储引用实际LOB值位置的定位器。</p>
                     <p>实际LOB值存储在表行（内联）或表行外（行外），具体取决于创建表时指定的列属性，以及LOB的大小。</p>
                     <p>当满足以下任何一种情况时，LOB值将存储在线外：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果您明确指定<a id="d75921e1635" class="indexterm-anchor"></a>创建表时，LOB存储子句中的<code class="codeph">DISABLE</code> <code class="codeph">STORAGE</code> <code class="codeph">IN</code> <code class="codeph">ROW</code> 。
                           </p>
                        </li>
                        <li>
                           <p>如果LOB的大小大于<a id="d75921e1652" class="indexterm-anchor"></a>无论列的LOB存储属性如何，大约4000字节（4000减去系统控制信息）。
                           </p>
                        </li>
                        <li>
                           <p>如果更新存储在线外的LOB并且生成的LOB小于大约4000字节，则它仍然存储在线外。</p>
                        </li>
                     </ul>
                     <p>当满足以下任何条件时，LOB值将以内联方式存储：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>当存储在给定行中的LOB的大小很小时，大约4000字节或更少，并且您要么明确指定<a id="d75921e1666" class="indexterm-anchor"></a> <code class="codeph">ENABLE</code> <code class="codeph">STORAGE</code> <code class="codeph">IN</code> <code class="codeph">ROW</code>或LOB存储子句当您创建表，或当你不指定此参数（这是默认值）。
                           </p>
                        </li>
                        <li>
                           <p><a id="d75921e1682" class="indexterm-anchor"></a>当LOB值为<code class="codeph">NULL</code> （无论列的LOB存储属性如何）。
                           </p>
                        </li>
                     </ul>
                     <p>使用默认的LOB存储属性（内联存储）可以提高数据库性能;它避免了为较小的LOB值创建和管理外部存储的开销。如果存储在数据库中的LOB值通常很小，则建议使用内联存储。</p>
                     <div class="infoboxnote" id="GUID-B82B3C24-1FAF-4661-96A0-28241FD2A052__GUID-B7BB0C04-C07C-4B16-B3C1-B0B618C319FE">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d75921e1694" class="indexterm-anchor"></a> LOB定位器始终存储在行中。
                              </p>
                           </li>
                           <li>
                              <p><a id="d75921e1699" class="indexterm-anchor"></a>无论LOB存储属性还是LOB值（ <code class="codeph">NULL</code> ，空或其他），LOB定位器始终存在于任何LOB实例。
                              </p>
                           </li>
                           <li>
                              <p><a id="d75921e1707" class="indexterm-anchor"></a>如果使用<code class="codeph">DISABLE STORAGE IN ROW</code>属性创建LOB并且BasicFiles LOB保存任何数据，则使用至少一个<code class="codeph">CHUNK</code>的外部存储空间;即使LOB的大小小于<code class="codeph">CHUNK</code>大小。
                              </p>
                           </li>
                           <li>
                              <p><a id="d75921e1723" class="indexterm-anchor"></a>如果使用<code class="codeph">EMPTY_CLOB()</code>或<code class="codeph">EMPTY_BLOB()</code>初始化LOB列，则不存在LOB值，甚至不存在<code class="codeph">NULL</code> 。该行仅包含LOB定位符。没有使用额外的LOB存储。
                              </p>
                           </li>
                           <li>
                              <p><a id="d75921e1737" class="indexterm-anchor"></a> LOB存储属性不会影响<code class="codeph">BFILE</code>列。<code class="codeph">BFILE</code>数据始终存储在数据库外部的操作系统文件中。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADLOB45274"></a><div class="props_rev_3"><a id="GUID-D3BD47D3-DD6A-4DC9-9BAF-5DBB60918087" name="GUID-D3BD47D3-DD6A-4DC9-9BAF-5DBB60918087"></a><h4 id="ADLOB-GUID-D3BD47D3-DD6A-4DC9-9BAF-5DBB60918087" class="sect4">为持久性LOB定义表空间和存储特性</h4>
                  <div>
                     <div class="section">
                        <p>在表中定义LOB时，可以显式指示每个<span class="italic">持久LOB</span>列的表空间和存储特征。
                        </p>
                        <p>要创建BasicFiles LOB， <code class="codeph">BASICFILE</code>关键字是可选的，但为了清楚起见，建议使用它，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE ContainsLOB_tab（n NUMBER，c CLOB）lob（c）STORE AS BASICFILE segname（TABLESPACE lobtbs1 CHUNK 4096 PCTVERSION 5 NOCACHE LOGGING STORAGE（MAXEXTENTS 5））;</pre><p>对于SecureFiles， <code class="codeph">SECUREFILE</code>关键字是必需的，如以下示例所示（假设<code class="codeph">TABLESPACE lobtbs1</code>为<code class="codeph">ASSM</code> ）：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE ContainsLOB_tab1（n NUMBER，c CLOB）lob（c）STORE AS SECUREFILE sfsegname（TABLESPACE lobtbs1 RETENTION AUTO CACHE LOGGING STORAGE（MAXEXTENTS 5））;</pre><div class="infoboxnote" id="GUID-D3BD47D3-DD6A-4DC9-9BAF-5DBB60918087__GUID-173834AE-0048-4526-97D5-80BEEB58EC88">
                           <p class="notep1">注意：</p>
                           <p>您没有为<span class="italic">外部</span> LOB（ <code class="codeph">BFILE</code> ）指定的表空间或存储特性，因为它们未存储在数据库中。
                           </p>
                        </div>
                        <p>如果必须修改现有LOB列上的LOB存储参数，请使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">...MOVE</code>声明。您可以更改<code class="codeph">RETENTION</code> ， <code class="codeph">PCTVERSION</code> ， <code class="codeph">CACHE</code> ， <code class="codeph">NOCACHE</code> <code class="codeph">LOGGING</code> ， <code class="codeph">NOLOGGING</code>或<code class="codeph">STORAGE</code>设置。您也可以使用<code class="codeph">ALTER TABLE ...更改<code class="codeph">TABLESPACE</code> <code class="codeph">ALTER TABLE ...MOVE</code>声明。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADLOB45275"></a><div class="props_rev_3"><a id="GUID-96AEB423-5231-4E3A-B520-2C5FB95170E7" name="GUID-96AEB423-5231-4E3A-B520-2C5FB95170E7"></a><h5 id="ADLOB-GUID-96AEB423-5231-4E3A-B520-2C5FB95170E7" class="sect5">分配LOB数据段名称</h5>
                     <div>
                        <div class="section">
                           <p>如前面的示例所示，为LOB数据段指定名称可以实现更直观的工作环境。查询LOB数据字典视图<code class="codeph">USER_LOBS</code> ， <code class="codeph">ALL_LOBS</code> ， <code class="codeph">DBA_LOBS</code> ，您会看到您选择的LOB数据段而不是系统生成的名称。
                           </p>
                           <div class="infoboxnotealso" id="GUID-96AEB423-5231-4E3A-B520-2C5FB95170E7__NOTE-1212-DFDB4754">
                              <p class="notep1">也可以看看：</p>
                              <p>有关初始化参数的更多信息，请<a href="../refrn/initialization-parameters.html#REFRN-GUID-6F1C3203-0AA0-4AF1-921C-A027DD7CB6A9" target="_blank"><span><cite>参见Oracle数据库</cite></span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADLOB45276"></a><div class="props_rev_3"><a id="GUID-ADF08322-C5CA-4348-831A-6F172F06E9C1" name="GUID-ADF08322-C5CA-4348-831A-6F172F06E9C1"></a><h4 id="ADLOB-GUID-ADF08322-C5CA-4348-831A-6F172F06E9C1" class="sect4">LOB列或属性的LOB存储特征</h4>
                  <div>
                     <p>可以为LOB列或LOB属性指定的LOB存储特性包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">TABLESPACE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">PCTVERSION</code>或<code class="codeph">RETENTION</code></p>
                           <p>请注意，您可以为BasicFiles LOB指定<code class="codeph">PCTVERSION</code>或<code class="codeph">RETENTION</code> ，但不能同时指定两者。对于SecureFiles，只能指定<code class="codeph">RETENTION</code>参数。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CACHE</code> / <code class="codeph">NOCACHE/CACHE READS</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">日志/ NOLOGGING</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CHUNK</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ENABLE</code> / <code class="codeph">DISABLE</code> <code class="codeph">STORAGE</code> <code class="codeph">IN</code> <code class="codeph">ROW</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">存储</code></p>
                        </li>
                     </ul>
                     <p>对于大多数用户，这些存储特性的默认值就足够了。如果要微调LOB存储，请考虑以下准则。</p>
                     <div class="infoboxnotealso" id="GUID-ADF08322-C5CA-4348-831A-6F172F06E9C1__GUID-FFCB481B-393A-4BE9-A35E-EEA53E2BE693">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../sqlrf/storage_clause.html#SQLRF30013" target="_blank"><span class="italic">Oracle数据库SQL语言参考中的</span></a> <code class="codeph">STORAGE</code>子句</p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF54529" target="_blank"><span class="italic">Oracle数据库SQL语言参考中的</span></a> <code class="codeph">RETENTION</code>参数</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADLOB45277"></a><div class="props_rev_3"><a id="GUID-4AA058A3-E537-4A0F-B4C8-8AC299FB6019" name="GUID-4AA058A3-E537-4A0F-B4C8-8AC299FB6019"></a><h4 id="ADLOB-GUID-4AA058A3-E537-4A0F-B4C8-8AC299FB6019" class="sect4">TABLESPACE和LOB指数</h4>
                  <div>
                     <p>LOB索引是与LOB存储密切相关的内部结构。这意味着用户可能不会删除LOB索引并重建它。</p>
                     <div class="infoboxnote" id="GUID-4AA058A3-E537-4A0F-B4C8-8AC299FB6019__GUID-CC085188-AB68-4455-AAE8-E79F60C2021B">
                        <p class="notep1">注意：</p>
                        <p>该<code class="codeph"> </code> LOB索引不能改变。
                        </p>
                     </div>
                     <p>系统根据LOB存储子句中的规范确定用于LOB数据和LOB索引的表空间：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果<span class="italic">没有</span>为LOB数据指定表空间，则表的表空间用于LOB数据和索引。
                           </p>
                        </li>
                        <li>
                           <p>如果为LOB数据指定表空间，则LOB数据和索引都使用指定的表空间。</p>
                        </li>
                     </ul>
                  </div><a id="ADLOB45278"></a><div class="props_rev_3"><a id="GUID-6688329D-2718-4E6C-8947-DB212D435103" name="GUID-6688329D-2718-4E6C-8947-DB212D435103"></a><h5 id="ADLOB-GUID-6688329D-2718-4E6C-8947-DB212D435103" class="sect5">非分区表中LOB索引的表空间</h5>
                     <div>
                        <p>创建表时，如果为非分区表指定LOB索引的表空间，则会忽略表空间的规范，并且LOB索引与LOB数据位于同一位置。分区LOB不包含LOB索引语法。</p>
                        <p>为LOB存储段指定单独的表空间可以减少对表的表空间的争用。</p>
                     </div>
                  </div>
               </div><a id="ADLOB45280"></a><a id="ADLOB45279"></a><div class="props_rev_3"><a id="GUID-8181A78E-C8ED-4BFD-BE2C-73B340B78EBD" name="GUID-8181A78E-C8ED-4BFD-BE2C-73B340B78EBD"></a><h4 id="ADLOB-GUID-8181A78E-C8ED-4BFD-BE2C-73B340B78EBD" class="sect4">PCTVERSION</h4>
                  <div>
                     <p>修改BasicFiles LOB时，会生成新版本的BasicFiles LOB页面，以支持对BasicFiles LOB值的先前版本的一致读取。</p>
                     <p><code class="codeph">PCTVERSION</code>是旧版BasicFiles LOB数据页可占用的所有已使用的BasicFiles LOB数据空间的百分比。只要旧版本的BasicFiles LOB数据页开始占用超过<code class="codeph">PCTVERSION</code>使用的BasicFiles LOB空间的数量，Oracle数据库就会尝试回收旧版本<code class="codeph">PCTVERSION</code>用它们。换句话说， <code class="codeph">PCTVERSION</code>是可用于对旧的BasicFiles LOB数据进行版本控制的BasicFiles LOB数据块的百分比。
                     </p>
                     <p><code class="codeph">PCTVERSION</code>的默认值为10（％），最小值为0，最大值为100。
                     </p>
                     <p>要确定<code class="codeph">PCTVERSION</code>应设置的值，请考虑以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>BasicFiles LOB多久更新一次？</p>
                        </li>
                        <li>
                           <p>读取更新的BasicFiles LOB的频率是多少？</p>
                        </li>
                     </ul>
                     <p><a href="LOB-storage-with-applications.html#GUID-8181A78E-C8ED-4BFD-BE2C-73B340B78EBD__g1017753" title="该表在前面的文本中描述">表13-2</a>提供了一些指导，用于在给定更新百分比“X”的情况下确定合适的<code class="codeph">PCTVERSION</code>值。
                     </p>
                     <div class="tblformal" id="GUID-8181A78E-C8ED-4BFD-BE2C-73B340B78EBD__g1017753">
                        <p class="titleintable">表13-2推荐的PCTVERSION设置</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="推荐的PCTVERSION设置" width="100%" border="1" summary="This table is described in the preceding text" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="34%" id="d75921e2405">BasicFiles LOB更新模式</th>
                                 <th align="left" valign="bottom" width="48%" id="d75921e2408">BasicFiles LOB读取模式</th>
                                 <th align="left" valign="bottom" width="17%" id="d75921e2411">PCTVERSION</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d75921e2416" headers="d75921e2405 ">
                                    <p>更新X％数据的X％</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d75921e2416 d75921e2408 ">
                                    <p>读取更新的LOB</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d75921e2416 d75921e2411 ">
                                    <p>X％</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d75921e2426" headers="d75921e2405 ">
                                    <p>更新X％数据的X％</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d75921e2426 d75921e2408 ">
                                    <p>读取LOB但不读取更新的LOB</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d75921e2426 d75921e2411 ">
                                    <p>0％</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d75921e2436" headers="d75921e2405 ">
                                    <p>更新X％数据的X％</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d75921e2436 d75921e2408 ">
                                    <p>读取更新和未更新的LOB</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d75921e2436 d75921e2411 ">
                                    <p>2X％</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d75921e2446" headers="d75921e2405 ">
                                    <p>永远不要更新LOB</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d75921e2446 d75921e2408 ">
                                    <p>读取LOB</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d75921e2446 d75921e2411 ">
                                    <p>0％</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果您的应用程序需要多次BasicFiles LOB更新并同时读取大量的BasicFiles LOB列，那么请考虑为<code class="codeph">PCTVERSION</code>使用更高的值，例如20％。
                     </p>
                     <p>将<code class="codeph">PCTVERSION</code>设置为默认值的两倍允许将更多空闲页面用于旧版本的数据页面。由于大型查询可能需要一致读取BasicFiles LOB列，因此保留旧版本的BasicFiles LOB页可能很有用。在这种情况下，BasicFiles LOB存储可能会增长，因为数据库不会积极地重用可用页面。
                     </p>
                     <p>如果应用程序中的持久性BasicFiles LOB实例只创建并写入一次，并且之后主要是只读的，则更新很少发生。在这种情况下，请考虑使用较低的<code class="codeph">PCTVERSION</code>值，例如5％或更低。
                     </p>
                     <p>BasicFiles LOB更新越不频繁和越小，必须为BasicFiles LOB数据的旧副本保留的空间越少。如果已知现有的BasicFiles LOB是只读的，那么您可以安全地将<code class="codeph">PCTVERSION</code>设置为0％，因为旧版本的数据永远不会需要任何页面。
                     </p>
                  </div>
               </div><a id="ADLOB45281"></a><div class="props_rev_3"><a id="GUID-8FB3E176-1024-4531-9706-BA9C75C7CD28" name="GUID-8FB3E176-1024-4531-9706-BA9C75C7CD28"></a><h4 id="ADLOB-GUID-8FB3E176-1024-4531-9706-BA9C75C7CD28" class="sect4">BasicFiles LOB的RETENTION参数</h4>
                  <div>
                     <p>您可以在<code class="codeph">CREATE TABLE</code>或<code class="codeph">ALTER TABLE</code>语句的LOB存储子句中指定<code class="codeph">RETENTION</code>参数，以替代<code class="codeph">PCTVERSION</code>参数。这样做，将LOB列配置为在<span class="italic">一段时间内</span>存储旧版本的LOB数据，而不是使用表空间的百分比。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE ContainsLOB_tab（n NUMBER，c CLOB）lob（c）STORE AS BASICFILE segname（TABLESPACE lobtbs1 CHUNK 4096 RETENTION NOCACHE LOGGING STORAGE（MAXEXTENTS 5））;</pre><p><code class="codeph">RETENTION</code>参数设计用于数据库的<code class="codeph">UNDO</code>功能，例如闪回版本查询。当LOB列设置了<code class="codeph">RETENTION</code>属性时，旧版本的LOB数据将保留<code class="codeph">UNDO_RETENTION</code>参数指定的时间量。
                     </p>
                     <p>请注意以下有关<code class="codeph">RETENTION</code>参数的信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于LOB列，未启用<code class="codeph">UNDO</code> SQL，因为它与其他数据类型一样。必须在LOB列上设置<code class="codeph">RETENTION</code>属性才能在LOB数据上使用Undo SQL。
                           </p>
                        </li>
                        <li>
                           <p>您无法显式设置<code class="codeph">RETENTION</code>参数的值。保留LOB版本的时间由<code class="codeph">UNDO_RETENTION</code>参数确定。
                           </p>
                        </li>
                        <li>
                           <p>仅在自动撤消管理模式下支持使用<code class="codeph">RETENTION</code>参数。必须先配置表以使用“自动还原管理”，然后才能在LOB列上设置“ <code class="codeph">RETENTION</code> ”。<a id="d75921e2603" class="indexterm-anchor"></a><a id="d75921e2605" class="indexterm-anchor"></a> ASSM需要LOB <code class="codeph">RETENTION</code>是在BasicFiles LOB的效果。如果BasicFiles LOB驻留在MSSM表空间中，则会以静默方式忽略SQL的<code class="codeph">RETENTION</code>参数（在<code class="codeph">STORE</code> <code class="codeph">AS</code>子句中）。
                           </p>
                        </li>
                        <li>
                           <p>LOB存储子句可以指定<code class="codeph">RETENTION</code>或<code class="codeph">PCTVERSION</code> ，但不能同时指定两者。
                           </p>
                           <div class="infoboxnotealso" id="GUID-8FB3E176-1024-4531-9706-BA9C75C7CD28__GUID-17252E5F-5368-4B80-AC65-5194D99B5192">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关使用数据库闪回功能的更多信息，请参见<a href="../adfns/flashback.html#ADFNS1008" target="_blank"><span class="italic">“Oracle数据库开发指南”</span></a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>有关LOB存储子句语法的详细信息，请<a href="../sqlrf/storage_clause.html#SQLRF30013" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a>
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB45282"></a><div class="props_rev_3"><a id="GUID-9569D544-FF47-4753-8763-E456C628A559" name="GUID-9569D544-FF47-4753-8763-E456C628A559"></a><h4 id="ADLOB-GUID-9569D544-FF47-4753-8763-E456C628A559" class="sect4">SecureFiles LOB的RETENTION参数</h4>
                  <div>
                     <p>为SecureFiles指定<code class="codeph">RETENTION</code>参数表示数据库动态地管理SecureFiles存储的一致读取数据，同时考虑诸如数据库的<code class="codeph">UNDO</code>模式之类的因素。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果数据库处于<code class="codeph">FLASHBACK</code>模式，则指定<code class="codeph">MAX</code>以限制LOB <code class="codeph">UNDO</code>保留的大小（以字节为单位）。如果指定<code class="codeph">MAX</code> ，则还必须在<code class="codeph">storage_clause</code>指定<code class="codeph">MAXSIZE</code>子句。
                           </p>
                        </li>
                        <li>
                           <p>如果要保留<code class="codeph">UNDO</code>足以仅用于一致读取目的，请指定<code class="codeph">AUTO</code> 。这是默认值。
                           </p>
                        </li>
                        <li>
                           <p>如果一致读取或闪回目的不需要<code class="codeph">UNDO</code>则指定<code class="codeph">NONE</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>默认<code class="codeph">RETENTION</code>为SecureFiles的是<code class="codeph">AUTO</code> 。</p>
                  </div>
               </div><a id="ADLOB45284"></a><a id="ADLOB45283"></a><div class="props_rev_3"><a id="GUID-0299AFF9-7A92-47E3-A83E-59F2574A0ADF" name="GUID-0299AFF9-7A92-47E3-A83E-59F2574A0ADF"></a><h4 id="ADLOB-GUID-0299AFF9-7A92-47E3-A83E-59F2574A0ADF" class="sect4">CACHE / NOCACHE / CACHE READS</h4>
                  <div>
                     <p>创建包含LOB的表时，请根据<a href="LOB-storage-with-applications.html#GUID-0299AFF9-7A92-47E3-A83E-59F2574A0ADF__g1017777" title="该表在前面的文本中描述">表13-3中</a>的准则使用缓存选项：</p>
                     <div class="tblformal" id="GUID-0299AFF9-7A92-47E3-A83E-59F2574A0ADF__g1017777">
                        <p class="titleintable">表13-3何时使用CACHE，NOCACHE和CACHE READS</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="何时使用CACHE，NOCACHE和CACHE READS" width="100%" border="1" summary="This table is described in the preceding text" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d75921e2856">缓存模式</th>
                                 <th align="left" valign="bottom" width="34%" id="d75921e2859">读</th>
                                 <th align="left" valign="bottom" width="34%" id="d75921e2862">写</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d75921e2867" headers="d75921e2856 ">
                                    <p><code class="codeph">CACHE READS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d75921e2867 d75921e2859 ">
                                    <p>经常</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d75921e2867 d75921e2862 ">
                                    <p>偶尔或偶尔</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d75921e2878" headers="d75921e2856 ">
                                    <p><code class="codeph">CACHE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d75921e2878 d75921e2859 ">
                                    <p>经常</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d75921e2878 d75921e2862 ">
                                    <p>经常</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d75921e2889" headers="d75921e2856 ">
                                    <p><code class="codeph">NOCACHE</code> （默认）</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d75921e2889 d75921e2859 ">
                                    <p>偶尔或偶尔</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d75921e2889 d75921e2862 ">
                                    <p>决不</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="ADLOB45285"></a><div class="props_rev_3"><a id="GUID-F6D60D84-6A90-443C-87D7-7171BAB2B1E7" name="GUID-F6D60D84-6A90-443C-87D7-7171BAB2B1E7"></a><h5 id="ADLOB-GUID-F6D60D84-6A90-443C-87D7-7171BAB2B1E7" class="sect5">CACHE / NOCACHE / CACHE READS：LOB值和缓冲区高速缓存</h5>
                     <div>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>CACHE：LOB页面放在缓冲区缓存中以便更快地访问。</p>
                           </li>
                           <li>
                              <p>NOCACHE：作为<code class="codeph">STORE AS</code>子句中的参数， <code class="codeph">NOCACHE</code>指定不将LOB值带入缓冲区高速缓存。
                              </p>
                           </li>
                           <li>
                              <p>CACHE READS：LOB值仅在读取期间而不是在写入操作期间进入缓冲区高速缓存。</p>
                           </li>
                        </ul>
                        <p><code class="codeph">NOCACHE</code>是SecureFiles和BasicFiles LOB的默认值。
                        </p>
                        <div class="infoboxnote" id="GUID-F6D60D84-6A90-443C-87D7-7171BAB2B1E7__GUID-651BBC04-26BA-44CD-98C8-442DA37F61CC">
                           <p class="notep1">注意：</p>
                           <p>使用<code class="codeph">CACHE</code>选项可以在从LOB列读取和写入数据时提高性能。但是，它可能会过早地将其他非LOB页面从缓冲区缓存中移除。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADLOB45286"></a><div class="props_rev_3"><a id="GUID-3543D99F-A826-4750-8E94-7BAE754E0792" name="GUID-3543D99F-A826-4750-8E94-7BAE754E0792"></a><h4 id="ADLOB-GUID-3543D99F-A826-4750-8E94-7BAE754E0792" class="sect4">LOGFING / NOLOGGING BasicFiles LOB的参数</h4>
                  <div>
                     <p>[ <code class="codeph">NO</code> ] <code class="codeph">LOGGING</code>参数用于以与其他表操作相同的方式使用LOB。在通常情况下，如果省略[ <code class="codeph">NO</code> ] <code class="codeph">LOGGING</code>子句，则这意味着既没有指定<code class="codeph">NO</code> <code class="codeph">LOGGING</code>也没有指定<code class="codeph">LOGGING</code> ，并且表或表分区的logging属性默认为它所驻留的表空间的logging属性。
                     </p>
                     <p>对于LOB，根据<code class="codeph">CACHE</code>的规定，还有另一种选择。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">指定了</span> <span class="bold">CACHE</span>并省略了[ <code class="codeph">NO</code> ] <code class="codeph">LOGGING</code>子句。<code class="codeph">LOGGING</code>自动实现（因为您不能使用<code class="codeph">CACHE</code> <code class="codeph">NOLOGGING</code> ）。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">未指定</span> <span class="bold">CACHE，</span>省略[ <code class="codeph">NO</code> ] <code class="codeph">LOGGING</code>子句。该过程的默认方式与对表和分区表的默认方式相同。也就是说，[ <code class="codeph">NO</code> ] <code class="codeph">LOGGING</code>值是从LOB段所在的表空间获得的。
                           </p>
                        </li>
                     </ul>
                     <p>还应牢记以下问题。</p>
                  </div><a id="ADLOB45287"></a><div class="props_rev_3"><a id="GUID-34BAE5A1-E016-4AE4-A805-BE7FDFB785DD" name="GUID-34BAE5A1-E016-4AE4-A805-BE7FDFB785DD"></a><h5 id="ADLOB-GUID-34BAE5A1-E016-4AE4-A805-BE7FDFB785DD" class="sect5">LOB <span class="bold">始终为</span> LOB <span class="bold">索引页</span> <span class="bold">生成撤消</span></h5>
                     <div>
                        <p>无论是否设置了<code class="codeph">LOGGING</code>或<code class="codeph">NOLOGGING</code> ，LOB都不会为LOB数据页生成回滚信息（撤消），因为旧的LOB数据存储在版本中。
                        </p>
                        <p>为LOB创建的回滚信息往往很小，因为它仅用于LOB索引页面更改。</p>
                     </div>
                  </div><a id="ADLOB45288"></a><div class="sect4"><a id="GUID-6B0BA57E-A7F1-4182-BA3C-B1CF36C9D4F7" name="GUID-6B0BA57E-A7F1-4182-BA3C-B1CF36C9D4F7"></a><h5 id="ADLOB-GUID-6B0BA57E-A7F1-4182-BA3C-B1CF36C9D4F7" class="sect5"><span class="bold">当</span> <span class="bold">日志</span>记录<span class="bold">设置的Oracle生成</span> LOB <span class="bold">数据页</span> <span class="bold">全部重做</span></h5>
                     <div>
                        <p><code class="codeph">NOLOGGING</code>旨在用于客户不关心介质恢复的情况。
                        </p>
                        <p>因此，如果磁盘/磁带/存储介质出现故障，则无法从日志中恢复更改，因为从未记录更改。</p>
                     </div><a id="ADLOB45289"></a><div class="props_rev_3"><a id="GUID-5F05A5C6-E45E-4751-8E41-6781EFD09458" name="GUID-5F05A5C6-E45E-4751-8E41-6781EFD09458"></a><h6 id="ADLOB-GUID-5F05A5C6-E45E-4751-8E41-6781EFD09458" class="sect6">NOLOGGING对于批量加载或插入非常有用。</h6>
                        <div>
                           <p>例如，在将数据加载到LOB中时，如果您不关心重做并且只能在失败时启动加载，请将LOB数据段存储特性设置为<code class="codeph">NOCACHE</code> <code class="codeph">NOLOGGING</code> 。这为初始数据加载提供了良好的性能。
                           </p>
                           <p>完成加载数据后，如有必要，使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>修改LOB数据段的LOB存储特性以进行正常的LOB操作，例如，修改为<code class="codeph">CACHE</code>或<code class="codeph">NOCACHE</code> <code class="codeph">LOGGING</code> 。</p>
                           <div class="infoboxnote" id="GUID-5F05A5C6-E45E-4751-8E41-6781EFD09458__GUID-092EB5A5-B02F-4334-BC69-8DC64AF87632">
                              <p class="notep1">注意：</p>
                              <p> <code class="codeph">CACHE</code>意味着你也得到了<code class="codeph">LOGGING</code> 。</p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="ADLOB45290"></a><div class="props_rev_3"><a id="GUID-29BA6DC0-C48E-4AC9-8A64-1FD99B7D36CC" name="GUID-29BA6DC0-C48E-4AC9-8A64-1FD99B7D36CC"></a><h4 id="ADLOB-GUID-29BA6DC0-C48E-4AC9-8A64-1FD99B7D36CC" class="sect4">用于SecureFiles LOB的LOGGING / FILESYSTEM_LIKE_LOGGING</h4>
                  <div>
                     <p><code class="codeph">NOLOGGING</code>和<code class="codeph">LOGGING</code>参数应用于以与其他表操作相同的方式使用LOB。
                     </p>
                     <p>在通常情况下，如果省略<code class="codeph">logging_clause</code> ，则SecureFiles从其所在的表空间继承其logging属性。在这种情况下，如果<code class="codeph">NOLOGGING</code>是默认值，则SecureFiles默认为<code class="codeph">FILESYSTEM_LIKE_LOGGING</code> 。</p>
                     <div class="infoboxnote" id="GUID-29BA6DC0-C48E-4AC9-8A64-1FD99B7D36CC__GUID-54DF22E7-AD66-49FD-B5F0-F0C91D5A4908">
                        <p class="notep1">注意：</p>
                        <p>使用<code class="codeph">CACHE</code>选项可以在从LOB列读取和写入数据时提高性能。但是，它可能会过早地将其他非LOB页面从缓冲区缓存中移除。
                        </p>
                     </div>
                  </div><a id="ADLOB45291"></a><div class="props_rev_3"><a id="GUID-7F10CD88-C74A-40DE-B3E3-148228CB318F" name="GUID-7F10CD88-C74A-40DE-B3E3-148228CB318F"></a><h5 id="ADLOB-GUID-7F10CD88-C74A-40DE-B3E3-148228CB318F" class="sect5">CACHE意味着记录</h5>
                     <div>
                        <p>对于SecureFiles，还有一个替代方案，具体取决于<code class="codeph">CACHE</code>的指定方式：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果指定了<code class="codeph">CACHE</code>并且省略了<code class="codeph">LOGGING</code>子句，则使用<code class="codeph">LOGGING</code> 。
                              </p>
                           </li>
                           <li>
                              <p>如果未指定<code class="codeph">CACHE</code> ，则省略logging_clause。然后，该过程的默认方式与对表和分区表的默认方式相同。也就是说， <code class="codeph">LOGGING</code>值是从LOB值所在的表空间获得的。如果表空间是<code class="codeph">NOLOGGING</code> ，则SecureFiles默认为<code class="codeph">FILESYSTEM_LIKE_LOGGING</code> 。</p>
                           </li>
                        </ul>
                        <p>请记住以下问题。</p>
                     </div>
                  </div><a id="ADLOB45292"></a><div class="props_rev_3"><a id="GUID-D4E7E0CF-8FB4-4219-B5BF-7D4119CA4274" name="GUID-D4E7E0CF-8FB4-4219-B5BF-7D4119CA4274"></a><h5 id="ADLOB-GUID-D4E7E0CF-8FB4-4219-B5BF-7D4119CA4274" class="sect5">SecureFiles和一种生成REDO和UNDO的有效方法</h5>
                     <div>
                        <p>这意味着Oracle数据库确定为块更改生成<code class="codeph">REDO</code>和<code class="codeph">UNDO</code>是否更有效，类似于堆块，或者它是否生成类似于BasicFiles LOB的新块的版本和完整<code class="codeph">REDO</code> 。
                        </p>
                     </div>
                  </div><a id="ADLOB45293"></a><div class="props_rev_3"><a id="GUID-965E951A-5B7B-4F78-8710-146F61FA8D2C" name="GUID-965E951A-5B7B-4F78-8710-146F61FA8D2C"></a><h5 id="ADLOB-GUID-965E951A-5B7B-4F78-8710-146F61FA8D2C" class="sect5">FILESYSTEM_LIKE_LOGGING对批量加载或插入很有用</h5>
                     <div>
                        <p>例如，在将数据加载到LOB中时，如果您不关心<code class="codeph">REDO</code>并且只能在失败时启动加载，请将LOB数据段存储特征设置为<code class="codeph">FILESYSTEM_LIKE_LOGGING</code> 。这为初始数据加载提供了良好的性能。
                        </p>
                        <p>完成加载数据后，如有必要，使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>修改LOB数据段的LOB存储特性，以进行正常的LOB操作。例如，到<code class="codeph">CACHE</code>或<code class="codeph">NOCACHE</code> <code class="codeph">LOGGING</code> 。</p>
                     </div>
                  </div>
               </div><a id="ADLOB45294"></a><div class="props_rev_3"><a id="GUID-A3D50A10-E688-4DB3-A3EB-07AC7D0019A6" name="GUID-A3D50A10-E688-4DB3-A3EB-07AC7D0019A6"></a><h4 id="ADLOB-GUID-A3D50A10-E688-4DB3-A3EB-07AC7D0019A6" class="sect4">CHUNK</h4>
                  <div>
                     <p>块是一个或多个Oracle块。</p>
                     <p>您可以在创建包含LOB的表时指定BasicFiles LOB的块大小。这对应于Oracle数据库在访问或修改LOB值时使用的数据大小。块的一部分用于存储与系统相关的信息，其余部分用于存储LOB值。您正在使用的API具有一个函数，该函数返回LOB块中用于存储LOB值的空间量。在PL / SQL中使用<code class="codeph">DBMS_LOB.GETCHUNKSIZE</code> 。在OCI中，使用<code class="codeph">OCILobGetChunkSize()</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-A3D50A10-E688-4DB3-A3EB-07AC7D0019A6__GUID-36DF509D-44E8-4DB2-8BB8-D95EC7A78BB0">
                        <p class="notep1">注意：</p>
                        <p>如果表空间块大小与数据库块大小相同，则<code class="codeph">CHUNK</code>也是数据库块大小的倍数。默认的<code class="codeph">CHUNK</code>大小等于一个表空间块的大小，最大值为32K。</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-A3D50A10-E688-4DB3-A3EB-07AC7D0019A6__GUID-935B92CA-0CFE-48B5-AE69-F94DE9AE9682">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="advanced-design-considerations.html#GUID-FD6659DC-8792-4D7C-AC07-9EABEA02DF91">Terabyte-Size LOB Support</a> ”</span>有关最大LOB大小的信息</p>
                     </div>
                  </div><a id="ADLOB45295"></a><div class="props_rev_3"><a id="GUID-D2B33837-A830-492D-954F-032B44C331AF" name="GUID-D2B33837-A830-492D-954F-032B44C331AF"></a><h5 id="ADLOB-GUID-D2B33837-A830-492D-954F-032B44C331AF" class="sect5">CHUNK的价值</h5>
                     <div>
                        <p>一旦选择了<code class="codeph">CHUNK</code>的值（当创建LOB列时），就无法更改它。
                        </p>
                        <p>因为您无法更改值<code class="codeph">CHUNK</code> ，所以选择一个可以优化存储和性能要求的值非常重要。对于SecureFiles， <code class="codeph">CHUNK</code>是一种建议大小，用于向后兼容。
                        </p>
                     </div><a id="ADLOB45297"></a><a id="ADLOB45296"></a><div class="props_rev_3"><a id="GUID-99B90EA0-666D-430B-9D0F-44699629D0F4" name="GUID-99B90EA0-666D-430B-9D0F-44699629D0F4"></a><h6 id="ADLOB-GUID-99B90EA0-666D-430B-9D0F-44699629D0F4" class="sect6">空间考虑因素</h6>
                        <div>
                           <p>对于内联存储的LOB， <code class="codeph">CHUNK</code>的值无关紧要。
                           </p>
                           <p>如果设置了<code class="codeph">ENABLE</code> <code class="codeph">STORAGE</code> <code class="codeph">IN</code> <code class="codeph">ROW</code> ，并且LOB定位器和LOB数据的大小小于大约4000字节，则会发生内联存储。但是，当LOB数据存储在线外时，它总是占用<code class="codeph">CHUNK</code>参数的倍数的空间。如果您的数据很小，这可能会导致大量的空间浪费，但<code class="codeph">CHUNK</code>设置为大量。<a href="LOB-storage-with-applications.html#GUID-99B90EA0-666D-430B-9D0F-44699629D0F4__CIHFGJEE" title="数据大小与CHUNK大小">表13-4</a>说明了这一点：</p>
                           <div class="tblformalwide" id="GUID-99B90EA0-666D-430B-9D0F-44699629D0F4__CIHFGJEE">
                              <p class="titleintable">表13-4数据大小和CHUNK大小</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="数据大小和CHUNK大小" width="100%" border="1" summary="Data Size vs CHUNK size" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="30%" id="d75921e4006">数据大小</th>
                                       <th align="left" valign="bottom" width="15%" id="d75921e4009">CHUNK尺寸</th>
                                       <th align="left" valign="bottom" width="39%" id="d75921e4012">用于存储LOB的磁盘空间</th>
                                       <th align="left" valign="bottom" width="17%" id="d75921e4015">空间利用率（百分比）</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d75921e4020" headers="d75921e4006 ">
                                          <p>3500启用行存储</p>
                                       </td>
                                       <td align="left" valign="top" width="15%" headers="d75921e4020 d75921e4009 ">
                                          <p>不相干</p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d75921e4020 d75921e4012 ">
                                          <p>3500排</p>
                                       </td>
                                       <td align="left" valign="top" width="17%" headers="d75921e4020 d75921e4015 ">
                                          <p>100</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d75921e4033" headers="d75921e4006 ">
                                          <p>3500禁用行中的存储</p>
                                       </td>
                                       <td align="left" valign="top" width="15%" headers="d75921e4033 d75921e4009 ">
                                          <p>32 KB</p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d75921e4033 d75921e4012 ">
                                          <p>32 KB</p>
                                       </td>
                                       <td align="left" valign="top" width="17%" headers="d75921e4033 d75921e4015 ">
                                          <p>10</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d75921e4046" headers="d75921e4006 ">
                                          <p>3500禁用行中的存储</p>
                                       </td>
                                       <td align="left" valign="top" width="15%" headers="d75921e4046 d75921e4009 ">
                                          <p>4 KB</p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d75921e4046 d75921e4012 ">
                                          <p>4 KB</p>
                                       </td>
                                       <td align="left" valign="top" width="17%" headers="d75921e4046 d75921e4015 ">
                                          <p>90</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d75921e4059" headers="d75921e4006 ">
                                          <p>33 KB</p>
                                       </td>
                                       <td align="left" valign="top" width="15%" headers="d75921e4059 d75921e4009 ">
                                          <p>32 KB</p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d75921e4059 d75921e4012 ">
                                          <p>64 KB</p>
                                       </td>
                                       <td align="left" valign="top" width="17%" headers="d75921e4059 d75921e4015 ">
                                          <p>51</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d75921e4072" headers="d75921e4006 ">
                                          <p>2 GB +10</p>
                                       </td>
                                       <td align="left" valign="top" width="15%" headers="d75921e4072 d75921e4009 ">
                                          <p>32 KB</p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d75921e4072 d75921e4012 ">
                                          <p>2 GB + 32 KB</p>
                                       </td>
                                       <td align="left" valign="top" width="17%" headers="d75921e4072 d75921e4015 ">
                                          <p>99+</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                     </div><a id="ADLOB45298"></a><div class="props_rev_3"><a id="GUID-AFD8D735-D009-4D1D-8D49-0365437CBFF5" name="GUID-AFD8D735-D009-4D1D-8D49-0365437CBFF5"></a><h6 id="ADLOB-GUID-AFD8D735-D009-4D1D-8D49-0365437CBFF5" class="sect6">性能注意事项</h6>
                        <div>
                           <p>以大块方式访问LOB更有效。</p>
                           <p>您可以将<code class="codeph">CHUNK</code>设置为最常访问或写入的数据大小。例如，如果一次只访问一个LOB数据<code class="codeph">CHUNK</code> ，则将<code class="codeph">CHUNK</code>设置为一个块的大小。如果你有大LOB，并读取或写入大量数据，那么为<code class="codeph">CHUNK</code>选择一个大值。</p>
                        </div>
                     </div>
                  </div><a id="ADLOB45299"></a><div class="props_rev_3"><a id="GUID-F83BB44C-C37B-40F1-94D4-8A50D61E1C6A" name="GUID-F83BB44C-C37B-40F1-94D4-8A50D61E1C6A"></a><h5 id="ADLOB-GUID-F83BB44C-C37B-40F1-94D4-8A50D61E1C6A" class="sect5">将INITIAL和NEXT设置为大于CHUNK</h5>
                     <div>
                        <p>如果明确指定LOB的存储特性，请确保LOB数据段存储的<code class="codeph">INITIAL</code>和<code class="codeph">NEXT</code>设置为大于<code class="codeph">CHUNK</code>大小的大小。
                        </p>
                        <p>例如，如果数据库块大小为2KB并且您指定了8KB的<code class="codeph">CHUNK</code> ，那么请确保<code class="codeph">INITIAL</code>和<code class="codeph">NEXT</code>大于8KB，并且最好大得多（例如，至少16KB）。
                        </p>
                        <p>换句话说：如果为<code class="codeph">INITIAL,</code> <code class="codeph">NEXT</code>或LOB <code class="codeph">CHUNK</code>大小指定值，请确保以下列方式设置它们：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CHUNK</code> &lt;= <code class="codeph">NEXT</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CHUNK</code> &lt;= <code class="codeph">INITIAL</code> 
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADLOB45300"></a><div class="props_rev_3"><a id="GUID-2FEF93D4-621B-41FF-829A-E45339DFB11C" name="GUID-2FEF93D4-621B-41FF-829A-E45339DFB11C"></a><h4 id="ADLOB-GUID-2FEF93D4-621B-41FF-829A-E45339DFB11C" class="sect4">在行条款中启用或禁用存储</h4>
                  <div>
                     <div class="p"><code class="codeph">ENABLE</code> | <code class="codeph">DISABLE</code> <code class="codeph">STORAGE</code> <code class="codeph">IN</code> <code class="codeph">ROW</code>子句用于指示LOB是应该内联（在行中）还是在行外存储。如果LOB保存<code class="codeph">IN</code> <code class="codeph">ROW</code> ，<ul style="list-style-type:disc">
                           <li>
                              <p>对于没有压缩和加密的LOB以及具有安全文件压缩的LOB，启用了Exadata下推</p>
                           </li>
                           <li>
                              <p>在没有压缩和加密的情况下为LOB启用内存中</p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnote" id="GUID-2FEF93D4-621B-41FF-829A-E45339DFB11C__GUID-3D0C17A5-47AE-4B7A-AA57-5A2A66A89A9B">
                        <p class="notep1">注意：</p>
                        <p>一旦你做了它，你可能不会改变这个规范：如果你<code class="codeph">ENABLE STORAGE IN ROW</code> ，那么你不能将它改为行中的<code class="codeph">DISABLE STORAGE IN ROW</code> ，反之亦然。
                        </p>
                     </div>
                     <p>默认为<code class="codeph">ENABLE</code> <code class="codeph">STORAGE</code> <code class="codeph">IN</code> <code class="codeph">ROW</code> 。
                     </p>
                  </div>
               </div><a id="ADLOB45301"></a><div class="props_rev_3"><a id="GUID-B5F583AE-B96A-4D57-BA26-41D048FE28B5" name="GUID-B5F583AE-B96A-4D57-BA26-41D048FE28B5"></a><h4 id="ADLOB-GUID-B5F583AE-B96A-4D57-BA26-41D048FE28B5" class="sect4">行中启用或禁用存储的指南</h4>
                  <div>
                     <p>存储在该行中的最大LOB数据量是<code class="codeph">VARCHAR2</code>的最大大小（4000）。这包括控制信息和LOB值。如果指示LOB应存储在行中，则一旦LOB值和控制信息大于约4000，则LOB值将自动移出行。
                     </p>
                     <p>这表明以下准则：</p>
                     <p>默认情况下，ENABLE STORAGE IN ROW通常是最佳选择，原因如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">小LOB：</span>如果LOB很小（小于大约4000字节），那么在读取行时可以读取整个LOB而无需额外的磁盘I / O.</p>
                        </li>
                        <li>
                           <p><span class="bold">大LOB：</span>如果LOB很大（大于大约4000字节），那么即使在将LOB数据移出行之后，如果设置了ENABLE STORAGE IN ROW，控制信息仍然存储在行中。该控制信息可以使我们更快地读取外线LOB数据。
                           </p>
                        </li>
                     </ul>
                     <p>但是，在某些情况下， <code class="codeph">DISABLE STORAGE IN ROW</code>是更好的选择。这是因为将LOB存储在行中会增加行的大小。如果要执行大量基表处理（例如全表扫描，多行访问（范围扫描）或许多<code class="codeph">UPDATE</code> / <code class="codeph">SELECT</code>到LOB列以外的列），这会影响性能。
                     </p>
                  </div>
               </div>
            </div><a id="ADLOB45302"></a><div class="props_rev_3"><a id="GUID-DF2C343F-6937-4E9B-A15F-141A90AAC92E" name="GUID-DF2C343F-6937-4E9B-A15F-141A90AAC92E"></a><h3 id="ADLOB-GUID-DF2C343F-6937-4E9B-A15F-141A90AAC92E" class="sect3">LOB列索引</h3>
               <div>
                  <p>您可以使用不同的技术来索引LOB列。</p>
                  <div class="infoboxnote" id="GUID-DF2C343F-6937-4E9B-A15F-141A90AAC92E__GUID-97D49844-1442-4B60-89F4-F5A68E2C0E4F">
                     <p class="notep1">注意：</p>
                     <p>移动LOB列后，必须重建任何现有表索引。<a id="d75921e4556" class="indexterm-anchor"></a></p>
                  </div>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-12808065-C59B-4ED4-BAD8-1BF38C1FC73F">LOB列上的域索引</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-FA3F48B2-17CB-4D51-A281-7C6844576424">LOB列上的文本索引</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-1E54F133-F2E6-43E3-9EFA-4AF53D898C39">LOB上基于函数的索引</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-FF748A89-941D-4131-A782-F400994223F9">LOB列的可扩展索引</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-3936617F-ACBD-4F81-9D69-FCE1ADC3787A">Oracle Text Indexing支持XML</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB45303"></a><div class="props_rev_3"><a id="GUID-12808065-C59B-4ED4-BAD8-1BF38C1FC73F" name="GUID-12808065-C59B-4ED4-BAD8-1BF38C1FC73F"></a><h4 id="ADLOB-GUID-12808065-C59B-4ED4-BAD8-1BF38C1FC73F" class="sect4">LOB列上的域索引</h4>
                  <div>
                     <p>您可以通过构建专门适用于您的域的索引来提高查询性能。随数据库提供的可扩展性接口允许域索引，这是用于实现此类域特定索引的框架。</p>
                     <div class="infoboxnote" id="GUID-12808065-C59B-4ED4-BAD8-1BF38C1FC73F__GUID-76A7AC0B-0C45-4DA1-A8C3-457B0D96DB53">
                        <p class="notep1">注意：</p>
                        <p>您无法在LOB列上构建B树或位图索引。<a id="d75921e4663" class="indexterm-anchor"></a><a id="d75921e4667" class="indexterm-anchor"></a></p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-12808065-C59B-4ED4-BAD8-1BF38C1FC73F__GUID-E51D090B-1C34-4952-9ECB-D183CA453634">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../addci/building-domain-indexes.html#ADDCI290" target="_blank"><span class="italic">Oracle数据库数据盒开发人员指南</span></a> ，了解有关构建域特定索引的信息。
                        </p>
                     </div>
                  </div>
               </div><a id="ADLOB45304"></a><div class="props_rev_3"><a id="GUID-FA3F48B2-17CB-4D51-A281-7C6844576424" name="GUID-FA3F48B2-17CB-4D51-A281-7C6844576424"></a><h4 id="ADLOB-GUID-FA3F48B2-17CB-4D51-A281-7C6844576424" class="sect4">LOB列上的文本索引</h4>
                  <div>
                     <p>根据LOB列内容的性质，其中一个Oracle Text选项也可用于构建索引。</p>
                     <p>例如，如果文本文档存储在<code class="codeph">CLOB</code>列中，则可以构建文本索引以加速<code class="codeph">CLOB</code>列上基于文本的查询的性能。
                     </p>
                     <div class="infoboxnotealso" id="GUID-FA3F48B2-17CB-4D51-A281-7C6844576424__GUID-C333FDAB-D3F3-4946-846A-3C234122BCAD">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../ccapp/index.html" target="_blank"><span class="italic">Oracle Text Application Developer's Guide，</span></a>用于使用<code class="codeph">CLOB</code>列存储文本数据的示例</p>
                     </div>
                  </div>
               </div><a id="ADLOB45305"></a><div class="props_rev_3"><a id="GUID-1E54F133-F2E6-43E3-9EFA-4AF53D898C39" name="GUID-1E54F133-F2E6-43E3-9EFA-4AF53D898C39"></a><h4 id="ADLOB-GUID-1E54F133-F2E6-43E3-9EFA-4AF53D898C39" class="sect4">LOB上基于函数的索引</h4>
                  <div>
                     <p>一个<a id="d75921e4831" class="indexterm-anchor"></a><a id="d75921e4835" class="indexterm-anchor"></a>基于函数的索引是基于表达式构建的索引。它将索引功能扩展到列上的索引之外。基于函数的索引增加了访问数据的各种方式。
                     </p>
                     <p>无法在嵌套表或LOB列上构建基于函数的索引。但是，您可以在VARRAY上构建基于函数的索引。</p>
                     <p>喜欢<a id="d75921e4842" class="indexterm-anchor"></a> LOB列上的可扩展索引和域索引，在LOB列上执行DML操作时，基于函数的索引也会自动更新。更新任何可扩展索引时，也会更新基于函数的索引。
                     </p>
                     <div class="infoboxnotealso" id="GUID-1E54F133-F2E6-43E3-9EFA-4AF53D898C39__GUID-198FBEEB-A82B-4017-9427-F9B1DECD804F">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用基于函数的索引的更多信息，请<a href="../adfns/indexes.html#ADFNS00505" target="_blank"><span class="italic">参见“Oracle数据库开发指</span></a>
                        </p>
                     </div>
                  </div>
               </div><a id="ADLOB45306"></a><div class="props_rev_3"><a id="GUID-FF748A89-941D-4131-A782-F400994223F9" name="GUID-FF748A89-941D-4131-A782-F400994223F9"></a><h4 id="ADLOB-GUID-FF748A89-941D-4131-A782-F400994223F9" class="sect4">LOB列的可扩展索引</h4>
                  <div>
                     <p>该数据库提供<span class="italic">可扩展索引</span> ，该功能使您可以根据需要定义新索引类型。这基于协作索引的概念，其中数据盒和数据库构建和维护诸如文本和空间之类的数据类型的索引，例如，用于在线分析处理（OLAP）。
                     </p>
                     <p>盒式磁带负责定义索引结构，在加载和更新操作期间维护索引内容，以及在查询处理期间搜索索引。索引结构可以作为堆组织存储在Oracle中，也可以作为索引组织表存储，或者作为操作系统文件存储在外部。</p>
                     <p>为了支持此结构，数据库提供了<span class="italic">索引类型</span> 。索引类型的目的是通过数据盒式磁带为复杂域（如文本，空间，图像和OLAP）启用高效的搜索和检索功能。索引类型类似于Oracle Server中内置的排序或位映射索引类型。不同之处在于索引类型由数据盒式开发人员实现，而Oracle内核实现内置索引。一旦数据盒式开发人员实现了新的索引类型，数据盒式磁带的最终用户就可以像使用内置索引类型一样使用它。
                     </p>
                     <p>当数据库系统处理域索引，数据盒式磁带的物理存储时</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>定义索引的格式和内容。这使得磁带盒能够定义可以容纳复杂数据对象的索引结构。</p>
                        </li>
                        <li>
                           <p>构建，删除和更新域索引。墨盒处理构建和维护索引结构。请注意，这与为简单SQL数据类型提供的医学索引功能有很大不同。此外，由于索引被建模为元组的集合，因此直接支持就地更新。</p>
                        </li>
                        <li>
                           <p>访问和解释索引的内容。此功能使数据盒式磁带成为查询处理的组成部分。也就是说，数据库查询的内容相关子句由数据盒式磁带处理。</p>
                        </li>
                     </ul>
                     <p>通过支持可扩展索引，数据库显着减少了开发访问复杂数据类型（如LOB）的高性能解决方案所需的工作量。</p>
                  </div><a id="ADLOB45307"></a><div class="sect4"><a id="GUID-D9B44BF2-1240-4155-92BB-32576598AF93" name="GUID-D9B44BF2-1240-4155-92BB-32576598AF93"></a><h5 id="ADLOB-GUID-D9B44BF2-1240-4155-92BB-32576598AF93" class="sect5">可扩展优化器</h5>
                     <div>
                        <p>可扩展优化器功能允许用户定义函数和索引的作者创建统计信息收集，选择性和成本函数。优化程序在选择查询计划时使用此信息。因此，基于成本的优化器被扩展为使用用户提供的信息。</p>
                        <p>可扩展索引功能使您可以定义新的运算符，索引类型和域索引。对于此类用户定义的运算符和域索引，可扩展优化器功能允许用户控制优化程序用于选择执行计划的三个主要组件： <span class="italic">统计信息，选择性</span>和<span class="italic">成本</span> 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-D9B44BF2-1240-4155-92BB-32576598AF93__GUID-636747F8-4C2A-4D91-A268-A96DFE372E04">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../addci/introduction-to-data-cartridges.html#ADDCI4256" target="_blank"><span class="italic">Oracle数据库数据盒开发人员指南</span></a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADLOB45308"></a><div class="props_rev_3"><a id="GUID-3936617F-ACBD-4F81-9D69-FCE1ADC3787A" name="GUID-3936617F-ACBD-4F81-9D69-FCE1ADC3787A"></a><h4 id="ADLOB-GUID-3936617F-ACBD-4F81-9D69-FCE1ADC3787A" class="sect4">Oracle Text Indexing支持XML</h4>
                  <div>
                     <p>您可以在<code class="codeph">CLOB</code>列上创建Oracle Text索引并对XML数据执行查询。
                     </p>
                     <div class="infoboxnotealso" id="GUID-3936617F-ACBD-4F81-9D69-FCE1ADC3787A__GUID-6364DF32-18F2-469B-8B52-857C3BEFC11A">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../adxdk/introduction-to-XDK.html#ADXDK-GUID-48EA5544-C75E-43DF-BAC1-2740D7002F07" target="_blank"><span><cite>Oracle XML Developer's Kit程序员指南</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF-GUID-4775F5FE-4569-4DF4-A7CA-B20EC6880CAB" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../ccapp/understanding-oracle-text-application-development.html#CCAPP-GUID-CF13C01A-F5E6-4EF5-839B-C09CF0024D5E" target="_blank"><span><cite>Oracle Text Application Developer's Guide</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADLOB45309"></a><div class="props_rev_3"><a id="GUID-F4B2B0C3-6E8E-47A4-A46C-8014DAAD7B42" name="GUID-F4B2B0C3-6E8E-47A4-A46C-8014DAAD7B42"></a><h3 id="ADLOB-GUID-F4B2B0C3-6E8E-47A4-A46C-8014DAAD7B42" class="sect3">分区表中的LOB操作</h3>
               <div>
                  <p>您可以对包含的表进行分区<code class="codeph"></code> LOB列。
                  </p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-A37C90DC-0DC7-4883-A6FF-59FBC7D44D56">关于在分区表中操作LOB</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-96390DD8-BDC3-4B81-AD24-88F66D97E870">对包含LOB列的表进行分区</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-86D2A49E-A956-433D-9BF2-C63A01F27047">在包含分区LOB列的表上创建索引</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-43137298-9F9C-45D7-B253-05279E547EEC">移动包含LOB的分区</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-EE4CE357-4385-4CD5-ADFD-765855EC5EF0">拆分包含LOB的分区</a></p>
                     </li>
                     <li>
                        <p><a href="LOB-storage-with-applications.html#GUID-1D318F25-B9D8-4AD9-BFAE-8DA8C9378EE3">合并包含LOB的分区</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-A37C90DC-0DC7-4883-A6FF-59FBC7D44D56" name="GUID-A37C90DC-0DC7-4883-A6FF-59FBC7D44D56"></a><h4 id="ADLOB-GUID-A37C90DC-0DC7-4883-A6FF-59FBC7D44D56" class="sect4">关于在分区表中操作LOB</h4>
                  <div>
                     <p>因此，LOB可以利用分区的所有好处，包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>LOB段可以分布在多个表空间之间，以平衡I / O负载并使备份和恢复更易于管理。</p>
                        </li>
                        <li>
                           <p>分区表中的LOB变得更容易维护。</p>
                        </li>
                        <li>
                           <p>可以将LOB划分为逻辑组，以加快对作为组访问的LOB的操作。</p>
                        </li>
                     </ul>
                     <p>本节介绍了可以在分区表中操作LOB的一些方法。</p>
                  </div>
               </div><a id="ADLOB45310"></a><div class="props_rev_3"><a id="GUID-96390DD8-BDC3-4B81-AD24-88F66D97E870" name="GUID-96390DD8-BDC3-4B81-AD24-88F66D97E870"></a><h4 id="ADLOB-GUID-96390DD8-BDC3-4B81-AD24-88F66D97E870" class="sect4">对包含LOB列的表进行分区</h4>
                  <div>
                     <div class="section">
                        <p>RANGE分区，LIST分区和HASH分区表支持LOB。复合堆组织表也可以有LOB。</p>
                        <p>您可以使用以下技术对包含LOB列的表进行分区：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">CREATE TABLE</code>语句的<code class="codeph">PARTITION BY ...</code>子句<code class="codeph">CREATE TABLE</code> 。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ALTER TABLE ...将分区添加到现有<code class="codeph">ALTER TABLE ...ADD PARTITION</code>条款。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ALTER TABLE ...与具有分区LOB列的表交换分区<code class="codeph">ALTER TABLE ...EXCHANGE PARTITION</code>条款。请注意，只有当两个表具有相同的存储属性时，才能使用<code class="codeph">EXCHANGE PARTITION</code> ，例如，两个表都存储了不符合要求的LOB。
                              </p>
                           </li>
                        </ul>
                        <p>建议在<code class="codeph">CREATE TABLE</code>的同时创建LOB分区（在<code class="codeph">CREATE TABLE</code>语句中）。如果在创建表时在LOB列上创建分区，则该列可以保存存储在内联或外联LOB中的LOB。
                        </p>
                        <p>创建表后，只能在外部存储的LOB列上创建新的LOB分区。此外，分区维护操作<code class="codeph">SPLIT PARTITION</code>和<code class="codeph">MERGE PARTITIONS</code>仅适用于存储LOB外线的LOB列。
                        </p>
                        <div class="infoboxnote" id="GUID-96390DD8-BDC3-4B81-AD24-88F66D97E870__NOTE-1224-DFDB9B2C">
                           <p class="notep1">注意：</p>
                           <p>创建表后，无法更改存储属性</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-96390DD8-BDC3-4B81-AD24-88F66D97E870__GUID-26D3482B-4E9A-42DB-88F6-B7938B412873">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关LOB存储属性的更多信息，请参阅<a href="LOB-storage-with-applications.html#GUID-517E1234-EFCD-4D16-B69B-23F72A18A77D">LOB存储参数</a></p>
                              </li>
                              <li>
                                 <p>有关LOB限制的其他信息，对<a href="LOB-storage-with-applications.html#GUID-FD9C0216-EACF-4F21-B298-11336B4F4E75">分区索引组织表</a>中的LOB的限制</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45311"></a><div class="props_rev_3"><a id="GUID-86D2A49E-A956-433D-9BF2-C63A01F27047" name="GUID-86D2A49E-A956-433D-9BF2-C63A01F27047"></a><h4 id="ADLOB-GUID-86D2A49E-A956-433D-9BF2-C63A01F27047" class="sect4">在包含分区LOB列的表上创建索引</h4>
                  <div>
                     <div class="section">
                        <p><a id="d75921e5468" class="indexterm-anchor"></a>要提高查询性能，可以在分区LOB列上创建索引。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX <span class="italic">index_name</span> ON <span class="italic">table_name</span> （ <span class="italic">LOB_column_1</span> ， <span class="italic">LOB_column_2</span> ，...）本地;</pre><p>请注意，LOB列仅支持基于域和函数的索引。LOB不支持其他类型的索引，例如唯一索引。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45312"></a><div class="props_rev_3"><a id="GUID-43137298-9F9C-45D7-B253-05279E547EEC" name="GUID-43137298-9F9C-45D7-B253-05279E547EEC"></a><h4 id="ADLOB-GUID-43137298-9F9C-45D7-B253-05279E547EEC" class="sect4">移动包含LOB的分区</h4>
                  <div>
                     <div class="section">
                        <p><a id="d75921e5555" class="indexterm-anchor"></a>您可以将LOB分区移动到不同的表空间。如果表空间不再足以容纳分区，这将非常有用。为此，请使用<code class="codeph">ALTER TABLE ...MOVE PARTITION</code>条款。例如：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE <span class="italic">current_table</span> MOVE PARTITION <span class="italic">partition_name</span> TABLESPACE <span class="italic">destination_table_space</span> LOB（ <span class="italic">column_name</span> ）STORE AS（TABLESPACE <span class="italic">current_tablespace</span> ）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45313"></a><div class="props_rev_3"><a id="GUID-EE4CE357-4385-4CD5-ADFD-765855EC5EF0" name="GUID-EE4CE357-4385-4CD5-ADFD-765855EC5EF0"></a><h4 id="ADLOB-GUID-EE4CE357-4385-4CD5-ADFD-765855EC5EF0" class="sect4">拆分包含LOB的分区</h4>
                  <div>
                     <div class="section">
                        <p><a id="d75921e5646" class="indexterm-anchor"></a>您可以使用<code class="codeph">ALTER TABLE ...将包含LOB的分区拆分为两个大小相等的分区<code class="codeph">ALTER TABLE ...SPLIT PARTITION</code>条款。这样做允许您将一个或两个新分区放在新的表空间中。例如：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE <span class="italic">table_name</span> SPLIT PARTITION <span class="italic">partition_name</span> AT（ <span class="italic">partition_range_upper_bound</span> ）INTO（PARTITION <span class="italic">partition_name</span> ，PARTITION <span class="italic">new_partition_name</span> TABLESPACE <span class="italic">new_tablespace_name</span> LOB（ <span class="italic">column_name</span> ）STORE AS（TABLESPACE <span class="italic">tablespace_name</span> ）...;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45314"></a><div class="props_rev_3"><a id="GUID-1D318F25-B9D8-4AD9-BFAE-8DA8C9378EE3" name="GUID-1D318F25-B9D8-4AD9-BFAE-8DA8C9378EE3"></a><h4 id="ADLOB-GUID-1D318F25-B9D8-4AD9-BFAE-8DA8C9378EE3" class="sect4">合并包含LOB的分区</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用<code class="codeph">ALTER TABLE ...合并包含LOB列的分区<code class="codeph">ALTER TABLE ...MERGE PARTITIONS</code>条款。
                        </p>
                        <p>此技术对于回收未使用的分区空间很有用。例如：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE <span class="italic">table_name</span> MERGE PARTITIONS <span class="italic">partition_1</span> ， <span class="italic">partition_2</span> INTO PARTITION <span class="italic">new_partition</span> TABLESPACE <span class="italic">new_tablespace_name</span> LOB（ <span class="italic">column_name</span> ）存储为（TABLESPACE <span class="italic">tablespace_name</span> ）...;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADLOB45316"></a><a id="ADLOB45315"></a><div class="props_rev_3"><a id="GUID-5E0E0772-C5CE-458A-AD07-E8DB32C24231" name="GUID-5E0E0772-C5CE-458A-AD07-E8DB32C24231"></a><h3 id="ADLOB-GUID-5E0E0772-C5CE-458A-AD07-E8DB32C24231" class="sect3">索引组织表中的LOB</h3>
               <div>
                  <p>索引组织表（IOT）支持内部和外部LOB列。在大多数情况下，对IOT中的LOB进行SQL DDL，DML和分段操作会产生与普通表相同的结果。唯一的例外是创建期间LOB的默认语义。主要区别是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic"><span class="bold">表空间映射</span></span> ：默认情况下，或除非另有指定，否则将在表空间中创建LOB数据和索引段，在该表空间中创建索引组织表的主键索引段。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><span class="bold">内联与外部存储相比</span></span> ：默认情况下，在没有溢出段的情况下创建的索引组织表中的所有LOB都存储在行外。换句话说，如果创建的索引组织表没有溢出段，则此表中的LOB将其默认存储属性设置为<code class="codeph">DISABLE</code> <code class="codeph">STORAGE</code> <code class="codeph">IN</code> <code class="codeph">ROW</code> 。如果您强行尝试为此类LOB指定<code class="codeph">ENABLE</code> <code class="codeph">STORAGE</code> <code class="codeph">IN</code> <code class="codeph">ROW</code>子句，则SQL会引发错误。
                        </p>
                        <p>另一方面，如果指定了溢出段，则索引组织表中的LOB完全模仿传统表中的语义。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-5E0E0772-C5CE-458A-AD07-E8DB32C24231__NOTE-123-DFDC1E0B">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="LOB-storage-with-applications.html#GUID-D3BD47D3-DD6A-4DC9-9BAF-5DBB60918087">为持久性LOB定义表空间和存储特性</a></p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-5E0E0772-C5CE-458A-AD07-E8DB32C24231__GUID-A0FA4C25-57AC-4EDF-909E-ECE599440CE3">带有LOB列的索引组织表（IOT）示例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>请考虑以下示例：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE iotlob_tab（c1 INTEGER PRIMARY KEY，c2 BLOB，c3 CLOB，c4 VARCHAR2（20））组织索引表格IOT_ts PCTFREE 10 PCTUSED 10 INITRANS 1 MAXTRANS 1 STORAGE（INITIAL 4K）PCTTHRESHOLD 50包括c2溢出表格iTO_ts PCTFREE 10 PCTUSED 10 INITRANS 1 MAXTRANS 1个存储（初始8K）LOB（c2）存储为lobseg（TABLESPACE lob_ts禁止存储在行中16384 PCTVERSION 10 CACHE STORAGE（INITIAL 2M）INDEX lobidx_c1（TABLESPACE lobidx_ts STORAGE（INITIAL 4K）））;</pre><p>执行这些语句会导致创建索引组织表<code class="codeph">iotlob_tab</code>其中包含以下元素：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>表空间<code class="codeph">iot_ts</code>中的主键索引段<span class="italic">，</span></p>
                        </li>
                        <li>
                           <p>表空间<code class="codeph">ioto_ts</code>的溢出数据段</p>
                        </li>
                        <li>
                           <p>从列<code class="codeph">C3</code>开始的列显式存储在溢出数据段中</p>
                        </li>
                        <li>
                           <p>表空间<code class="codeph">lob_ts</code>中的<code class="codeph">BLOB</code> （列<code class="codeph">C2</code> ）数据段</p>
                        </li>
                        <li>
                           <p>表空间<code class="codeph">lobidx_ts</code>中的<code class="codeph">BLOB</code> （列<code class="codeph">C2</code> ）索引段</p>
                        </li>
                        <li>
                           <p>表空间中的<code class="codeph">CLOB</code> （列<code class="codeph">C3</code> ）数据段<code class="codeph">iot_ts</code></p>
                        </li>
                        <li>
                           <p>表空间中的<code class="codeph">CLOB</code> （列<code class="codeph">C3</code> ）索引段<code class="codeph">iot_ts</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CLOB</code> （列<code class="codeph">C3</code> ）凭借具有溢出段的IOT而成行存储</p>
                        </li>
                        <li>
                           <p>明确强制<code class="codeph">BLOB</code> （列<code class="codeph">C2</code> ）存储在行外</p>
                           <div class="infoboxnote" id="GUID-5E0E0772-C5CE-458A-AD07-E8DB32C24231__GUID-9C49B6C6-040D-4B1C-AEF9-83D28943E2AA">
                              <p class="notep1">注意：</p>
                              <p>如果未指定溢出，则默认情况下C2和C3都将存储在行外。</p>
                           </div>
                        </li>
                     </ul>
                     <p>其他LOB功能，例如<code class="codeph">BFILE</code>和不同的字符宽度LOB，也在索引组织表中受支持，它们的用法与传统表的用法相同。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADLOB510"></a><div class="props_rev_3"><a id="GUID-FD9C0216-EACF-4F21-B298-11336B4F4E75" name="GUID-FD9C0216-EACF-4F21-B298-11336B4F4E75"></a><h3 id="ADLOB-GUID-FD9C0216-EACF-4F21-B298-11336B4F4E75" class="sect3">分区索引组织表中LOB的限制</h3>
               <div>
                  <p>范围，列表和散列分区的索引组织表支持LOB列，具有以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>不支持复合分区索引组织表。</p>
                     </li>
                     <li>
                        <p>关系和对象分区索引组织表（按范围，散列或列表分区）可以保存LOB，如下所示;但是，不支持分区维护操作，例如<code class="codeph">MOVE</code> ， <code class="codeph">SPLIT</code>和<code class="codeph">MERGE</code> ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>VARRAY数据类型存储为LOB数据类型</p>
                           </li>
                           <li>
                              <p>具有LOB属性的抽象数据类型</p>
                           </li>
                           <li>
                              <p>具有LOB类型的嵌套表</p>
                              <div class="infoboxnotealso" id="GUID-FD9C0216-EACF-4F21-B298-11336B4F4E75__GUID-FF0F22FD-A4B5-4C81-9FD3-CFA6BF1DD951">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="working-with-LOBs.html#GUID-BA662EA5-4955-4582-B12E-3312FE4B1D6A" title="本节提供有关LOB规则和限制的详细信息。">LOB规则和限制</a> ”</span>中给出了对LOB列的其他限制。
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
            </div><a id="ADLOB45317"></a><div class="props_rev_3"><a id="GUID-FFA3FAB5-694E-49C5-A8AF-B21B441BEFCC" name="GUID-FFA3FAB5-694E-49C5-A8AF-B21B441BEFCC"></a><h3 id="ADLOB-GUID-FFA3FAB5-694E-49C5-A8AF-B21B441BEFCC" class="sect3">更新嵌套表中的LOB</h3>
               <div>
                  <div class="section">
                     <p>要更新嵌套表中的LOB，必须显式锁定包含LOB的行。为此，必须在更新LOB值之前在子查询中指定FOR UPDATE子句。</p>
                     <p>请注意，锁定父表的行不会锁定包含LOB列的嵌套表的行。</p>
                     <div class="infoboxnote" id="GUID-FFA3FAB5-694E-49C5-A8AF-B21B441BEFCC__GUID-5FD08603-F948-4E5A-81F2-E7C2E2800E8F">
                        <p class="notep1">注意：</p>
                        <p>包含LOB列的嵌套表是唯一支持创建LOB集合的数据结构。您无法创建任何LOB数据类型的<code class="codeph">VARRAY</code> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="To work with JSON data in PL/SQL, you can use these data structures."></meta>
      <meta name="description" content="To work with JSON data in PL/SQL, you can use these data structures."></meta>
      <title>JSON数据结构</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="To work with JSON data in PL/SQL, you can use these data structures."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="JMS-Types.html" title="Previous" type="text/html"></link>
      <link rel="next" href="Logical-Change-Record-TYPEs.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="JMS-Types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="Logical-Change-Record-TYPEs.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">JSON数据结构</li>
            </ol>
            <a id="GUID-BDE10AAA-445B-47B5-8A39-D86C8EA99283" name="GUID-BDE10AAA-445B-47B5-8A39-D86C8EA99283"></a>
            
            <h2 id="ARPLS-GUID-BDE10AAA-445B-47B5-8A39-D86C8EA99283" class="sect2"><span class="enumeration_chapter">278</span> JSON数据结构</h2>
         </header>
         <div class="ind">
            <div>
               <p>要在PL / SQL中使用JSON数据，可以使用这些数据结构。</p>
               <div class="section">
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="json-types.html#GUID-639D871E-D116-4793-888E-F7948E48F4DE" title="JSON_ELEMENT_T是JSON_OBJECT_T，JSON_SCALAR_T和JSON_ARRAY_T对象类型的超类型。">JSON_ELEMENT_T对象类型</a></p>
                     </li>
                     <li>
                        <p><a href="json-types.html#GUID-10062646-E36F-48B1-9F24-751B613DFB5A" title="JSON_OBJECT_T是JSON_ELEMENT_T对象类型的子类型。它对应于JSON对象结构。">JSON_OBJECT_T对象类型</a></p>
                     </li>
                     <li>
                        <p><a href="json-types.html#GUID-69E61601-5533-418B-8C03-E591B4F7FE36" title="JSON_ARRAY_T是JSON_ELEMENT_T对象类型的子类型。JSON_ARRAY_T对应于JSON数组结构。">JSON_ARRAY_T对象类型</a></p>
                     </li>
                     <li>
                        <p><a href="json-types.html#GUID-B9526171-92E2-423A-8831-872ADCC71D1E" title="JSON_SCALAR_T是JSON_ELEMENT_T对象类型的子类型。">JSON_SCALAR_T对象类型</a></p>
                     </li>
                     <li>
                        <p><a href="json-types.html#GUID-50692D34-FEAF-471E-BA22-17530E31D95D" title="JSON_KEY_LIST是VARCHAR2（4000）的varray。">JSON_KEY_LIST类型</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="../adjsn/pl-sql-object-types-for-json.html#ADJSN-GUID-C0C2A8C0-99BD-4770-9EA2-B7D53804FC18" target="_blank"><span class="italic">Oracle数据库JSON开发人员指南</span></a></li>
                     <li><a href="http://www.json.org" target="_blank">JSON标准</a></li>
                  </ul>
               </div>
            </div>
            <div class="sect2"><a id="GUID-639D871E-D116-4793-888E-F7948E48F4DE" name="GUID-639D871E-D116-4793-888E-F7948E48F4DE"></a><h3 id="ARPLS-GUID-639D871E-D116-4793-888E-F7948E48F4DE" class="sect3"><span class="enumeration_section">278.1</span> JSON_ELEMENT_T对象类型</h3>
               <div>
                  <p><code class="codeph">JSON_ELEMENT_T</code>是<code class="codeph">JSON_OBJECT_T</code> ， <code class="codeph">JSON_SCALAR_T</code>和<code class="codeph">JSON_ARRAY_T</code>对象类型的超类型。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-5F8FBD64-A38B-4326-AAC5-4A881F24A7D0">描述</p>
                     <p>请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>要创建JSON_ELEMENT_T的实例，请使用<code class="codeph">parse</code>函数。有关详细信息，请参阅下面的“构造函数”部分。
                           </p>
                        </li>
                        <li>
                           <p>您无法创建空的JSON_ELEMENT_T实例。要创建空JSON容器，请根据其中一个子类型创建它。</p>
                        </li>
                        <li>
                           <p>要将JSON_ELEMENT_T强制转换为子类型（例如，JSON_OBJECT_T），您需要使用TREAT AS执行显式强制转换。例如：</p><pre class="oac_no_warn" dir="ltr">TREAT（elem AS JSON_OBJECT_T）</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-17EE8ECD-505B-4867-B23A-7C8905AFF0FD">构造函数</p>
                     <p>您可以使用<code class="codeph">parse</code>函数创建JSON_ELEMENT_T实例。该函数将VARCHAR2，CLOB或BLOB数据作为输入，并返回JSON_ELEMENT_T实例。
                     </p><pre class="oac_no_warn" dir="ltr">STATIC FUNCTION parse（json VARCHAR2）RETURN JSON_ELEMENT_T STATIC FUNCTION parse（json CLOB）RETURN JSON_ELEMENT_T STATIC FUNCTION parse（json BLOB）RETURN JSON_ELEMENT_T</pre><p>只有UTF8编码的JSON作为BLOB传递。</p>
                     <p><code class="codeph">parse</code>函数将JSON字符串作为输入，并设置JSON数据的内部表示。如果提供的输入无效JSON，则会引发错误消息。有效的JSON必须通过“IS JSON”SQL条件的松散检查。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-8BCC06CD-04C9-4679-A01D-893543A65C06">序列化</p>
                     <p>序列化是<code class="codeph">parse</code>函数的反转。序列化操作采用JSON数据的内存表示形式并将其打印到字符串。序列化功能和程序是：</p><pre class="oac_no_warn" dir="ltr">成员函数to_String返回VARCHAR2成员函数to_Number返回数字成员函数to_Date返回日期成员函数to_Timestamp返回TIMESTAMP成员函数to_Boolean返回BOOLEAN成员函数to_Clob返回CLOB成员函数to_Blob返回BLOB成员程序to_Clob（c IN OUT CLOB）成员程序to_Blob（c IN OUT BLOB）</pre><p><code class="codeph">to_Clob</code>和<code class="codeph">to_Blob</code> <span class="italic">过程</span>接受CLOB或BLOB输入，并使您能够提供用作序列化目标的LOB。例如，可以提供EMPTY_LOB。输入LOB不能为NULL。</p>
                     <p>如果使用<code class="codeph">to_Clob</code> <span class="italic">函数</span> ，则会创建新的CLOB。如果您不想先创建CLOB，那么可以使用<code class="codeph">to_Clob</code>或<code class="codeph">to_Blob</code> <span class="italic">函数</span> ，它们不带参数并生成临时lob。
                     </p>
                     <p><code class="codeph">to_Blob</code>仅序列化为UTF8格式。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-E8FDDC18-6CD1-47E5-852D-3F23E17D43AD">内省</p>
                     <p>Introspection使您可以在不修改JSON对象的情况下发现它们的属性。内省函数是：</p><pre class="oac_no_warn" dir="ltr">成员函数is_Object返回布尔成员函数is_Array返回布尔成员函数is_Scalar返回布尔成员函数is_String返回布尔成员函数is_Number返回布尔成员函数is_Boolean返回布尔成员函数is_True返回布尔成员函数is_False返回布尔成员函数is_Null返回布尔成员函数is_Date RETURN BOOLEAN成员函数is_Timestamp返回布尔成员函数get_Size返回数字</pre><p><code class="codeph">get_size</code>函数的返回值取决于JSON类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于标量，它返回<code class="codeph">1</code> 。
                           </p>
                        </li>
                        <li>
                           <p>对于对象，它返回键的数量。</p>
                        </li>
                        <li>
                           <p>对于数组，它返回项目数。</p>
                        </li>
                     </ul>
                     <p>请注意，JSON本身不支持日期和时间戳。相反，它们通常被建模为字符串。DOM API允许您将日期和时间戳添加为标量值，并保留它们直到序列化为JSON，然后按照ISO 8601格式打印为字符串。如果添加了类型为date或timestamp的SQL值，则<code class="codeph">is_Date</code>和<code class="codeph">is_Timestamp</code>函数将返回true。如果已将日期添加为字符串（例如，作为ISO 8601），则<code class="codeph">is_Date</code>和<code class="codeph">is_Timestamp</code>函数将返回false。您可以使用Oracle转换函数<code class="codeph">to_Date</code>和<code class="codeph">to_Timestamp</code>将日期的字符串表示形式和时间戳转换为Oracle表示形式。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-C5122358-0EA0-4D43-9600-ECF42A53BCBB">错误处理</p>
                     <p>您可以设置JSON处理的错误处理级别。您可能不希望为每个不匹配引发错误。使用<code class="codeph">on_Error</code>过程可以指定何时应该引发错误：</p><pre class="oac_no_warn" dir="ltr">成员程序on_Error（值NUMBER）</pre><p><code class="codeph">on_Error</code>过程定义了在PL / SQL操作期间遇到错误时发生的情况，例如get调用。
                     </p>
                     <p>默认情况下不会引发错误，而是返回NULL。</p>
                     <p>您在JSON_ELEMENT_T实例上调用<code class="codeph">On_error</code> ，它为所有后续调用设置错误行为。要将行为重置为默认值，可以调用<code class="codeph">on_Error(0)</code> 。
                     </p>
                     <p><code class="codeph">value</code>参数的<code class="codeph">value</code> ：</p>
                     <div class="tblformal" id="GUID-639D871E-D116-4793-888E-F7948E48F4DE__GUID-01D146CD-4467-4EF7-B5E0-42BA44070E57">
                        <p class="titleintable">表278-1 ON_ERROR过程中值的参数值</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="ON_ERROR过程中值Parameter的值" width="100%" border="1" summary="This table describes the values for the value parameter in the ON_ERROR procedure." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d1587413e423">值</th>
                                 <th align="left" valign="bottom" width="20%" id="d1587413e425">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1587413e429" headers="d1587413e423 ">0</td>
                                 <td align="left" valign="top" width="20%" headers="d1587413e429 d1587413e425 ">重置为默认行为，即返回NULL而不是引发错误。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1587413e434" headers="d1587413e423 ">1</td>
                                 <td align="left" valign="top" width="20%" headers="d1587413e434 d1587413e425 ">提出所有错误。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1587413e439" headers="d1587413e423 ">2</td>
                                 <td align="left" valign="top" width="20%" headers="d1587413e439 d1587413e425 ">如果未检测到值，则引发错误。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1587413e444" headers="d1587413e423 ">3</td>
                                 <td align="left" valign="top" width="20%" headers="d1587413e444 d1587413e425 ">如果数据类型不匹配则引发错误，例如，如果您对字符串值调用GET_NUMBER。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1587413e449" headers="d1587413e423 ">4</td>
                                 <td align="left" valign="top" width="20%" headers="d1587413e449 d1587413e425 ">如果输入无效，则会引发错误，例如，如果数组超出范围。</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>您可以组合值。例如，您可以指定7以指示3和4的组合。</p>
                     <p>在以下示例中，引发错误，因为“a”的值为“xyz”，无法将其转换为数字。如果尚未调用<code class="codeph">on_Error</code>过程，则返回NULL，并且不会引发错误。
                     </p><pre class="oac_no_warn" dir="ltr">声明jo JSON_OBJECT_T; begin jo：= JSON_OBJECT_T.parse（'{a：“xyz”}'）;乔。ON_ERROR（1）; DBMS_OUTPUT.PUT_LINE（jo.get_Number（ 'A'））;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A" name="GUID-10062646-E36F-48B1-9F24-751B613DFB5A"></a><h3 id="ARPLS-GUID-10062646-E36F-48B1-9F24-751B613DFB5A" class="sect3"><span class="enumeration_section">278.2</span> JSON_OBJECT_T对象类型</h3>
               <div>
                  <p><code class="codeph">JSON_OBJECT_T</code>是JSON_ELEMENT_T对象类型的子类型。它对应于JSON对象结构。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-F055C65B-84E3-483B-912B-9E0196738893">构造函数</p>
                     <p>您可以使用以下构造函数创建一个空的JSON_OBJECT_T实例。</p><pre class="oac_no_warn" dir="ltr">构造函数JSON_OBJECT_T自动返回结果</pre><p>您可以使用以下<code class="codeph">parse</code>函数之一创建JSON_OBJECT_T实例：</p><pre class="oac_no_warn" dir="ltr">STATIC FUNCTION parse（json VARCHAR2）RETURN JSON_OBJECT_T STATIC FUNCTION parse（json CLOB）RETURN JSON_OBJECT_T STATIC FUNCTION parse（json BLOB）RETURN JSON_OBJECT_T</pre><p>您还可以使用以下构造函数之一创建JSON_OBJECT_T实例：</p><pre class="oac_no_warn" dir="ltr">构造函数JSON_OBJECT_T（jsn VARCHAR2）返回自身为结果，构造函数JSON_OBJECT_T（jsn CLOB）返回自身为结果，构造函数JSON_OBJECT_T（jsn BLOB）返回自身为结果，构造函数JSON_OBJECT_T（e JSON_ELEMENT_T）返回自我结果</pre><p>只有UTF8编码的JSON作为BLOB传递。</p>
                     <p><code class="codeph">parse</code>函数将JSON字符串作为输入，并设置JSON数据的内部表示。如果提供的输入不是有效的JSON对象，则会引发错误消息。输入必须指定JSON对象，而不是数组。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-42836CFB-B5D6-45B0-AA90-68ABFF7D5315">获取功能和程序</p>
                     <p>以下函数和过程使您可以检索JSON对象的值：</p><pre class="oac_no_warn" dir="ltr">成员函数get（key VARCHAR2）RETURN JSON_ELEMENT_T成员函数get_String（key VARCHAR2）RETURN VARCHAR2成员函数get_Number（键VARCHAR2）返回数字成员函数get_Date（键VARCHAR2）返回日期成员函数get_Timestamp（键VARCHAR2）返回TIMESTAMP成员函数get_Boolean（键VARCHAR2）返回BOOLEAN成员函数get_Clob（key VARCHAR2）RETURN CLOB成员函数get_Blob（key VARCHAR2）返回BLOB成员函数get_Object（key VARCHAR2）RETURN JSON_OBJECT_T成员函数get_Array（key VARCHAR2）RETURN JSON_ARRAY_T成员程序get_Clob（键号，c IN OUT CLOB）会员程序get_Blob（密钥NUMBER，c IN OUT BLOB）</pre><p>注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">get</code>函数具有引用语义。这意味着如果修改了返回的JSON_ELEMENT_T，则包含JSON_ELEMENT_T的内容也会更改。有关详细信息，请参阅下面的<a href="json-types.html#GUID-10062646-E36F-48B1-9F24-751B613DFB5A__REFERENCESEMANTICS-1FB7D130">参考语义</a>部分。
                           </p>
                        </li>
                        <li>
                           <p>如果值不是字符串，则<code class="codeph">GET_STRING</code>函数将该值转换为字符串。因此，即使IS_STRING返回false， <code class="codeph">GET_STRING</code>函数<code class="codeph">GET_STRING</code>返回非空值。
                           </p>
                        </li>
                        <li>
                           <p>如果可能，所有“get”函数都执行转换。如果无法进行转换，则可能会引发错误，具体取决于<code class="codeph">ON_ERROR</code>的设置。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">GET_CLOB</code>和<code class="codeph">GET_BLOB</code> <span class="italic">过程</span>接受CLOB或BLOB作为输入，使您能够提供用作序列化目标的LOB。例如，可以提供EMPTY_LOB。如果使用<code class="codeph">GET_CLOB</code> <span class="italic">函数</span> ，则将隐式创建新的CLOB。输入LOB不能为NULL。如果您不想先创建BLOB或CLOB，则可以使用GET_CLOB或GET_BLOB函数，它们不带参数并生成临时LOB。</p>
                     <p><code class="codeph">GET_BLOB</code>仅序列化为UTF8格式。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-72ABF406-ECBF-4D26-AF1D-29CF64CF6F82">设定程序</p>
                     <p>以下过程使您可以设置JSON对象的值。现有值（如果存在）将被覆盖。</p><pre class="oac_no_warn" dir="ltr">成员程序put（密钥VARCHAR2，值JSON_ELEMENT_T）成员程序put（密钥VARCHAR2，值VARCHAR2）成员程序put（密钥VARCHAR2，值NUMBER）成员程序put（密钥VARCHAR2，值BOOLEAN）成员程序put（密钥VARCHAR2，值DATE）成员程序put（密钥VARCHAR2，值TIMESTAMP）成员程序put_Null（密钥VARCHAR2）</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-02E551ED-AC46-4269-91CA-49CFC24803E8">内省函数</p>
                     <p>Introspection使您可以在不修改JSON对象的情况下发现它们的属性。内省函数是：</p><pre class="oac_no_warn" dir="ltr">成员函数具有（键VARCHAR2）RETURN BOOLEAN成员函数get_Type（键VARCHAR2）RETURN VARCHAR2成员函数get_Keys RETURN JSON_KEY_LIST</pre><p>get_Keys函数返回对象类型JSON_KEY_LIST，它是VARCHAR2（4000）的varray。varray包含JSON对象中的键名。对于给定的JSON对象，get_Keys函数最多返回32767个字段名称。如果将其应用于具有超过32767个字段的对象，则会引发错误。</p>
                     <p>下面的示例遍历varray的各项以构建包含所有键名的JSON_ARRAY_T对象。</p><pre class="oac_no_warn" dir="ltr">声明jo JSON_OBJECT_T; ja JSON_ARRAY_T;键JSON_KEY_LIST; keys_string VARCHAR2（100）;开始ja：= new JSON_ARRAY_T; jo：= JSON_OBJECT_T.parse（'{“name”：“fred”，“jobTitle”：“codemonkey”，“projects”：[“json”，“xml”]}'）; keys：= jo.get_keys; for i in 1..keys.count loop ja.append（keys（i））;结束循环; keys_string：= ja.to_string; DBMS_OUTPUT.PUT_LINE（keys_string）;结束; /</pre><p>输出是：</p><pre class="oac_no_warn" dir="ltr">[ “名称”， “JOBTITLE”， “项目”]</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-9DC108CB-88B4-48EB-942A-78FA01C296CF">修改程序</p>
                     <p>以下过程使您可以删除或重命名JSON对象中的键。</p><pre class="oac_no_warn" dir="ltr">成员过程删除（密钥VARCHAR2）成员过程rename_Key（keyOld VARCHAR2，keyNew VARCHAR2）</pre><p>不支持重复的键名称，并将引发错误。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-075E3B0C-0D60-492C-B228-B07C9C3782C3">克隆功能</p>
                     <p>此函数生成JSON对象的副本。引用语义更改为值语义。</p><pre class="oac_no_warn" dir="ltr">成员函数clone RETURN JSON_OBJECT_T</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__REFERENCESEMANTICS-1FB7D130">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-1389FF0F-B3F9-4CF3-9A4D-EE1F717F8608">参考语义</p>
                     <p>调用返回JSON_ELEMENT_T对象的<code class="codeph">get</code>函数始终返回对复杂值而不是副本的引用。这意味着更改返回值会影响其容器。请参阅下面的示例。
                     </p><pre class="oac_no_warn" dir="ltr">声明数据JSON_OBJECT_T;地址JSON_OBJECT_T;拉链号;开始数据：=新JSON_OBJECT_T（'{“first”：“John”，“last”：“Doe”，“address”：{“country”：“USA”，“zip”：“94065”}}'）; address：= data.get_object（'address'）; DBMS_OUTPUT.PUT_LINE（address.to_string）; -  1）标量值的VALUE SEMANTICS  - （更改值对容器没有影响）zip：= address.get_number（'zip'）; DBMS_OUTPUT.PUT_LINE（拉链）; zip：= 12345; DBMS_OUTPUT.PUT_LINE（拉链）; - 地址仍然是相同的dbms_output.put_line（address.to_string）; -  2）复数值的参考语义 - '地址'是对'data'address.put（'zip'，12345）内复杂地址值的引用; address.put（'street'，'Detour Road'）; DBMS_OUTPUT.PUT_LINE（data.to_string）;结束; /</pre><p>如果您不想要引用语义，可以使用<code class="codeph">clone</code>函数创建返回对象的副本。这将值与其容器分离。在上面的示例中，您可以通过替换此行来创建“地址”对象的副本：</p><pre class="oac_no_warn" dir="ltr">address：= data.get_object（'address'）;</pre><p>用这一行：</p><pre class="oac_no_warn" dir="ltr">address：= data.get_object（'address'）。clone;</pre><p>在此之后，更改地址不会影响包含对象的“数据”的值。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-10062646-E36F-48B1-9F24-751B613DFB5A__GUID-67DC773B-DE65-496D-8A31-A0E1D732A6E5">更新示例</p>
                     <p>以下示例将项目的价格更新10％。</p><pre class="oac_no_warn" dir="ltr">WITH FUNCTION updatePrice（VARCHAR2中的jsonTxt）RETURN VARCHAR2是jo JSON_OBJECT_T; oldPrice NUMBER; BEGIN jo：= new JSON_OBJECT_T（jsonTxt）; oldPrice：= jo.get_number（'price'）; jo.put（'price'，oldPrice * 1.1）; RETURN jo.to_string（）;结束; SELECT updatePrice（col）FROM t1;</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36" name="GUID-69E61601-5533-418B-8C03-E591B4F7FE36"></a><h3 id="ARPLS-GUID-69E61601-5533-418B-8C03-E591B4F7FE36" class="sect3"><span class="enumeration_section">278.3</span> JSON_ARRAY_T对象类型</h3>
               <div>
                  <p><code class="codeph">JSON_ARRAY_T</code>是<code class="codeph">JSON_ELEMENT_T</code>对象类型的子类型。<code class="codeph">JSON_ARRAY_T</code>对应于JSON数组结构。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-027F8C09-D18F-4EBB-9135-2C94625F0793">构造函数</p>
                     <p>您可以使用以下构造函数创建空JSON_ARRAY_T实例。</p><pre class="oac_no_warn" dir="ltr">构造函数JSON_ARRAY_T自动返回结果</pre><p>您可以使用以下<code class="codeph">parse</code>函数之一创建JSON_ARRAY_T实例：</p><pre class="oac_no_warn" dir="ltr">STATIC FUNCTION parse（json VARCHAR2）RETURN JSON_ARRAY_T STATIC FUNCTION parse（json CLOB）RETURN JSON_ARRAY_T STATIC FUNCTION parse（json BLOB）RETURN JSON_ARRAY_T</pre><p>您还可以使用以下构造函数创建JSON_ARRAY_T实例：</p><pre class="oac_no_warn" dir="ltr">构造函数JSON_Array_T（jsn VARCHAR2）返回自身作为结果构造函数JSON_Array_T（jsn CLOB）返回自身作为结果构造函数JSON_Array_T（jsn BLOB）返回自身作为结果函数JSON_Array_T（e JSON_ELEMENT_T）返回自我结果</pre><p>只有UTF8编码的JSON作为BLOB传递。</p>
                     <p><code class="codeph">parse</code>函数将JSON字符串作为输入，并设置JSON数据的内部表示。如果提供的输入无效JSON，则会引发错误消息。输入必须指定JSON数组，而不是对象。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-7A93FF09-F705-477D-A8C8-F99D3B700630">获取功能和程序</p>
                     <p>以下函数和过程使您可以检索JSON数组的值：</p><pre class="oac_no_warn" dir="ltr">成员函数get（pos NUMBER）RETURN JSON_ELEMENT_T成员函数get_String（pos NUMBER）RETURN VARCHAR2成员函数get_Number（pos NUMBER）返回编号成员函数get_Date（pos NUMBER）返回日期成员函数get_Timestamp（pos NUMBER）返回TIMESTAMP成员函数get_Boolean（pos NUMBER）返回BOOLEAN成员函数get_Clob（pos NUMBER）返回CLOB成员函数get_Blob（pos NUMBER）返回BLOB成员程序get_Clob（pos NUMBER，c IN OUT CLOB）成员程序get_Blob（pos NUMBER，c IN OUT BLOB）</pre><p>注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">get</code>函数具有引用语义。这意味着如果修改了返回的JSON_ELEMENT_T，那么包含的JSON_ELEMENT_T也会被更改。
                           </p>
                        </li>
                        <li>
                           <p>如果值不是字符串，则<code class="codeph">GET_STRING</code>函数将该值转换为字符串。即使IS_STRING返回false，该函数也会返回非null值。
                           </p>
                        </li>
                        <li>
                           <p>如果可能，所有“get”函数都执行转换。如果无法进行转换，则可能会引发错误，具体取决于<code class="codeph">ON_ERROR</code>的设置。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">GET_CLOB</code>和<code class="codeph">GET_BLOB</code> <span class="italic">过程</span>接受CLOB或BLOB作为输入，使您能够提供用作序列化目标的LOB。例如，可以提供EMPTY_LOB。如果使用<code class="codeph">GET_CLOB</code> <span class="italic">函数</span> ，则将隐式创建新的CLOB。输入LOB不能为NULL。如果您不想先创建BLOB或CLOB，则可以使用GET_CLOB或GET_BLOB函数，它们不带参数并生成临时LOB。</p>
                     <p><code class="codeph">GET_BLOB</code>仅序列化为UTF8格式。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-5761855C-FEC8-447C-B957-020CC85B7390">设定程序</p>
                     <p>以下过程使您可以在JSON数组中的指定位置设置值。除非请求覆盖，否则这些过程在指定位置插入（而不是覆盖）。</p><pre class="oac_no_warn" dir="ltr">成员程序放（pos NUMBER，值VARCHAR2，覆盖BOOLEAN DEFAULT FALSE）成员程序put（pos NUMBER，value NUMBER，覆盖BOOLEAN DEFAULT FALSE）成员程序put（pos NUMBER，值BOOLEAN，覆盖BOOLEAN DEFAULT FALSE）成员程序put（pos NUMBER，值JSON_ELEMENT_T，覆盖BOOLEAN DEFAULT FALSE）成员程序put（pos NUMBER，值DATE，覆盖BOOLEAN DEFAULT FALSE）成员程序put（pos NUMBER，value TIMESTAMP，覆盖BOOLEAN DEFAULT FALSE）成员程序put_Null（pos NUMBER，覆盖BOOLEAN DEFAULT假）</pre><p>以下过程将指定的值附加到JSON数组的末尾：</p><pre class="oac_no_warn" dir="ltr">成员程序附加（值JSON_ELEMENT_T）成员程序追加（值VARCHAR2）成员程序追加（值NUMBER）成员程序追加（值BOOLEAN）成员程序追加（值DATE）成员程序追加（值TIMESTAMP）成员程序append_Null</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-E11A0BB6-9804-44E8-9127-A8E0CD33008B">内省功能</p>
                     <p>Introspection使您可以在不修改JSON数组的情况下发现它们的属性。</p><pre class="oac_no_warn" dir="ltr">成员函数get_Type（pos NUMBER）RETURN VARCHAR2</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-141F4B0F-4748-4278-9386-EF87450591B5">修改程序</p>
                     <p>以下过程使您可以删除JSON数组中指定位置的值。</p><pre class="oac_no_warn" dir="ltr">会员程序删除（pos NUMBER）</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-69E61601-5533-418B-8C03-E591B4F7FE36__GUID-A789A751-4A76-4720-8C16-B1154F5BEC12">克隆功能</p>
                     <p>此函数生成JSON数组的副本。引用语义更改为值语义。</p><pre class="oac_no_warn" dir="ltr">成员函数clone RETURN JSON_ARRAY_T</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-B9526171-92E2-423A-8831-872ADCC71D1E" name="GUID-B9526171-92E2-423A-8831-872ADCC71D1E"></a><h3 id="ARPLS-GUID-B9526171-92E2-423A-8831-872ADCC71D1E" class="sect3"><span class="enumeration_section">278.4</span> JSON_SCALAR_T对象类型</h3>
               <div>
                  <p><code class="codeph">JSON_SCALAR_T</code>是<code class="codeph">JSON_ELEMENT_T</code>对象类型的子类型。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B9526171-92E2-423A-8831-872ADCC71D1E__GUID-A810D2EF-4B32-4944-8E10-DA418A75B668">描述</p>
                     <p><code class="codeph">JSON_SCALAR_T</code>实例捕获一个标量值，例如字符串“fred”或数字1。除了从<code class="codeph">JSON_ELEMENT_T.</code>继承的函数或过程之外，此类型没有任何函数或过程<code class="codeph">JSON_ELEMENT_T.</code>您无法直接创建此类型的实例。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-50692D34-FEAF-471E-BA22-17530E31D95D" name="GUID-50692D34-FEAF-471E-BA22-17530E31D95D"></a><h3 id="ARPLS-GUID-50692D34-FEAF-471E-BA22-17530E31D95D" class="sect3"><span class="enumeration_section">278.5</span> JSON_KEY_LIST类型</h3>
               <div>
                  <p><code class="codeph">JSON_KEY_LIST</code>是<code class="codeph">VARCHAR2(4000)</code>的varray。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-50692D34-FEAF-471E-BA22-17530E31D95D__GUID-08FBAAD2-2FEB-4B06-A633-066E3D42A472">描述</p>
                     <p>此类型由<a href="json-types.html#GUID-10062646-E36F-48B1-9F24-751B613DFB5A" title="JSON_OBJECT_T是JSON_ELEMENT_T对象类型的子类型。它对应于JSON对象结构。">JSON_OBJECT_T对象类型中</a>的<code class="codeph">get_Keys</code>函数使用。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
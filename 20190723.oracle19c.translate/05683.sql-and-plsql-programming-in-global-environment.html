<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>全局环境中的SQL和PL / SQL编程</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Globalization Support Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Globalization Support Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-globalization-support-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:55:13-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96349-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-globalization-development-kit.html" title="Previous" type="text/html"></link>
      <link rel="next" href="OCI-programming-in-global-environment.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Globalization Support Guide"></meta>
    <meta name="dcterms.isVersionOf" content="NLSPG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-globalization-development-kit.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="OCI-programming-in-global-environment.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库全球化支持指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">全局环境中的SQL和PL / SQL编程</li>
            </ol>
            <a id="GUID-B16ADD64-24AC-46FC-B96F-D15B28C70C1D" name="GUID-B16ADD64-24AC-46FC-B96F-D15B28C70C1D"></a><a id="NLSPG009"></a>
            
            <h2 id="NLSPG-GUID-B16ADD64-24AC-46FC-B96F-D15B28C70C1D" class="sect2"><span class="enumeration_chapter">9</span>全局环境中的SQL和PL / SQL编程</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章包含对全球化支持环境中的SQL编程有用的信息。本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-BB47294E-98E2-4193-85F8-4475401F95C8">具有可选NLS参数的区域设置相关SQL函数</a></p>
                  </li>
                  <li>
                     <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-7E4AA2C5-8CD7-4836-AA69-6C8E02594FAC">其他与语言环境相关的SQL函数</a></p>
                  </li>
                  <li>
                     <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-1EB0DFBE-FF78-4DAC-A549-58F0A5C35C9F">全局环境中SQL和PL / SQL编程的其他主题</a></p>
                  </li>
               </ul>
            </div><a id="NLSPG429"></a><div class="props_rev_3"><a id="GUID-BB47294E-98E2-4193-85F8-4475401F95C8" name="GUID-BB47294E-98E2-4193-85F8-4475401F95C8"></a><h3 id="NLSPG-GUID-BB47294E-98E2-4193-85F8-4475401F95C8" class="sect3"><span class="enumeration_section">9.1</span>具有可选NLS参数的与语言环境相关的SQL函数</h3>
               <div>
                  <p>可以为其行为取决于全球化支持约定的所有SQL函数指定NLS参数。这些功能是：</p><pre class="pre codeblock"><code>TO_CHAR TO_DATE TO_NUMBER NLS_UPPER NLS_LOWER NLS_INITCAP NLSSORT</code></pre><p>明确指定这些函数的可选NLS参数使得能够独立于会话的NLS参数来评估函数。对于包含数字和日期作为字符串文字的SQL语句，此功能非常重要。</p>
                  <p>例如，如果为日期指定的语言是<code class="codeph">AMERICAN</code>则会正确评估以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name FROM employees WHERE hire_date&gt; '01 -JAN-2005';</pre><p>通过使用类似于以下的语句，可以使此类查询独立于当前日期语言：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name FROM employees WHERE hire_date&gt; TO_DATE（'01 -JAN-2005'，'DD-MON-YYYY'，'NLS_DATE_LANGUAGE = AMERICAN'）;</pre><p>通过这种方式，可以在必要时定义独立于会话语言的SQL语句。当字符串文字出现在视图， <code class="codeph">CHECK</code>约束或触发器中的SQL语句中时，此类语句是必需的。
                  </p>
                  <div class="infoboxnote" id="GUID-BB47294E-98E2-4193-85F8-4475401F95C8__GUID-187E0F48-BCC2-4D09-B527-B5FEAB537BC7">
                     <p class="notep1">注意：</p>
                     <p>只有必须独立于会话NLS参数值的SQL语句才应在依赖于语言环境的SQL函数中显式指定可选的NLS参数。在SQL函数中使用NLS参数的会话默认值通常会带来更好的性能。</p>
                  </div>
                  <p>所有字符函数都支持单字节和多字节字符。除非明确说明，否则字符函数逐字符操作，而不是逐字节操作。</p>
                  <p>本节的其余部分包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-4C2F8D76-8DC1-4066-9DFD-1F01FACCC432">SQL函数中NLS参数的默认值</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-9C3508E2-F00A-4BE3-8923-5F893678884D">在SQL函数中指定NLS参数</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-3A2A3358-8203-4474-8905-7E055D77A435">SQL函数中不可接受的NLS参数</a></p>
                     </li>
                  </ul>
               </div><a id="NLSPG430"></a><div class="props_rev_3"><a id="GUID-4C2F8D76-8DC1-4066-9DFD-1F01FACCC432" name="GUID-4C2F8D76-8DC1-4066-9DFD-1F01FACCC432"></a><h4 id="NLSPG-GUID-4C2F8D76-8DC1-4066-9DFD-1F01FACCC432" class="sect4"><span class="enumeration_section">9.1.1</span> SQL函数中NLS参数的缺省值</h4>
                  <div>
                     <p>当SQL函数评估视图和触发器时，当前会话的默认值将用于NLS函数参数。当SQL函数评估<code class="codeph">CHECK</code>约束时，它们使用在创建数据库时为NLS参数指定的默认值。
                     </p>
                  </div>
               </div><a id="NLSPG842"></a><a id="NLSPG431"></a><div class="props_rev_3"><a id="GUID-9C3508E2-F00A-4BE3-8923-5F893678884D" name="GUID-9C3508E2-F00A-4BE3-8923-5F893678884D"></a><h4 id="NLSPG-GUID-9C3508E2-F00A-4BE3-8923-5F893678884D" class="sect4"><span class="enumeration_section">9.1.2</span>在SQL函数中指定NLS参数</h4>
                  <div>
                     <div class="section">
                        <p>NLS参数在SQL函数中指定如下：</p><pre class="oac_no_warn" dir="ltr">' <span class="italic"><code class="codeph">parameter</code></span> = <span class="italic"><code class="codeph">value</code></span> '</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">'NLS_DATE_LANGUAGE = AMERICAN'</pre><p>可以在SQL函数中指定以下NLS参数：</p><pre class="pre codeblock"><code>NLS_DATE_LANGUAGE NLS_NUMERIC_CHARACTERS NLS_CURRENCY NLS_ISO_CURRENCY NLS_DUAL_CURRENCY NLS_CALENDAR NLS_SORT</code></pre><p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-9C3508E2-F00A-4BE3-8923-5F893678884D__CIHDAACF" title="此表列出了NLS参数及其有效的SQL函数。">表9-1</a>显示了哪些NLS参数对特定SQL函数有效。
                        </p>
                        <div class="tblformal" id="GUID-9C3508E2-F00A-4BE3-8923-5F893678884D__CIHDAACF">
                           <p class="titleintable">表9-1 SQL函数及其有效NLS参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SQL函数及其有效NLS参数" width="100%" border="1" summary="This table lists NLS parameters and their valid SQL functions." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d78171e413">SQL函数</th>
                                    <th align="left" valign="bottom" id="d78171e416">有效的NLS参数</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d78171e421" headers="d78171e413 "><pre class="pre codeblock"><code>至今</code></pre></td>
                                    <td align="left" valign="top" headers="d78171e421 d78171e416 "><pre class="pre codeblock"><code>NLS_DATE_LANGUAGE NLS_CALENDAR</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d78171e428" headers="d78171e413 "><pre class="pre codeblock"><code>TO_NUMBER</code></pre></td>
                                    <td align="left" valign="top" headers="d78171e428 d78171e416 "><pre class="pre codeblock"><code>NLS_NUMERIC_CHARACTERS NLS_CURRENCY NLS_DUAL_CURRENCY NLS_ISO_CURRENCY</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d78171e435" headers="d78171e413 "><pre class="pre codeblock"><code>TO_CHAR，TO_NCHAR</code></pre></td>
                                    <td align="left" valign="top" headers="d78171e435 d78171e416 "><pre class="pre codeblock"><code>NLS_DATE_LANGUAGE NLS_NUMERIC_CHARACTERS NLS_CURRENCY NLS_ISO_CURRENCY NLS_DUAL_CURRENCY NLS_CALENDAR</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d78171e442" headers="d78171e413 "><pre class="pre codeblock"><code>NLS_UPPER，NLS_LOWER，NLS_INITCAP，NLSSORT</code></pre></td>
                                    <td align="left" valign="top" headers="d78171e442 d78171e416 "><pre class="pre codeblock"><code>NLS_SORT</code></pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>以下示例显示如何在SQL函数中使用NLS参数：</p><pre class="oac_no_warn" dir="ltr">TO_DATE（'1-JAN-99'，'DD-MON-YY'，'nls_date_language = American'）TO_CHAR（hire_date，'DD / MON / YYYY'，'nls_date_language = French'）TO_CHAR（SYSDATE，'DD / MON / YYYY'，'nls_date_language =''繁体中文'''）TO_NUMBER（'13 .000,00'，'99G999D99'，'nls_numeric_characters ='',.'''）TO_CHAR（薪水，'9G999D99L'，'nls_numeric_characters ='',.''nls_currency =''EUR'''）TO_CHAR（salary，'9G999D99C'，'nls_numeric_characters =''。，''nls_iso_currency = Japan'）NLS_UPPER（last_name，'nls_sort = Swiss'）NLSSORT（last_name，'nls_sort =德语'）</pre><div class="infoboxnote" id="GUID-9C3508E2-F00A-4BE3-8923-5F893678884D__GUID-45453CDB-1417-45EA-8762-03CD5F54020E">
                           <p class="notep1">注意：</p>
                           <p>在某些语言中，某些小写字符对应多个大写字符，反之亦然。因此， <code class="codeph">NLS_UPPER</code> ， <code class="codeph">NLS_LOWER</code>和<code class="codeph">NLS_INITCAP</code>函数的输出长度可能与输入的长度不同。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-9C3508E2-F00A-4BE3-8923-5F893678884D__GUID-327DAEC3-256A-42ED-A950-3AE457FCC2B1">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-911BCCDC-6FA9-4B5E-B76E-C7D05B969E26">特殊大写字母</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-9E1B89DF-1E19-4660-9D5C-A27D628DDD16">特殊小写字母</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="NLSPG432"></a><div class="props_rev_3"><a id="GUID-3A2A3358-8203-4474-8905-7E055D77A435" name="GUID-3A2A3358-8203-4474-8905-7E055D77A435"></a><h4 id="NLSPG-GUID-3A2A3358-8203-4474-8905-7E055D77A435" class="sect4"><span class="enumeration_section">9.1.3</span> SQL函数中不可接受的NLS参数</h4>
                  <div>
                     <p>除<code class="codeph">NLSSORT</code>外，SQL函数不接受以下NLS参数：</p><pre class="pre codeblock"><code>NLS_LANGUAGE NLS_TERRITORY NLS_DATE_FORMAT</code></pre><p><code class="codeph">NLS_DATE_FORMAT</code>和<code class="codeph">NLS_TERRITORY_FORMAT</code>不被接受为参数，因为它们可能会干扰所需的格式掩码。如果NLS参数在<code class="codeph">TO_CHAR</code>或<code class="codeph">TO_DATE</code>函数中，则必须始终指定日期格式。因此， <code class="codeph">NLS_DATE_FORMAT</code>和<code class="codeph">NLS_TERRITORY_FORMAT</code>不是<code class="codeph">TO_CHAR</code>或<code class="codeph">TO_DATE</code>函数的有效NLS参数。如果在<code class="codeph">TO_CHAR</code>或<code class="codeph">TO_DATE</code>函数中指定<code class="codeph">NLS_DATE_FORMAT</code>或<code class="codeph">NLS_TERRITORY_FORMAT</code> ，则会返回错误。
                     </p>
                     <p><code class="codeph">NLS_LANGUAGE</code>可能会干扰<code class="codeph">NLS_DATE_LANGUAGE</code>的会话值。例如，如果在<code class="codeph">TO_CHAR</code>函数中指定<code class="codeph">NLS_LANGUAGE</code> ，则如果它与<code class="codeph">NLS_DATE_LANGUAGE</code>的会话值不同，则忽略其值。</p>
                  </div>
               </div>
            </div><a id="NLSPG433"></a><div class="props_rev_3"><a id="GUID-7E4AA2C5-8CD7-4836-AA69-6C8E02594FAC" name="GUID-7E4AA2C5-8CD7-4836-AA69-6C8E02594FAC"></a><h3 id="NLSPG-GUID-7E4AA2C5-8CD7-4836-AA69-6C8E02594FAC" class="sect3"><span class="enumeration_section">9.2</span>其他与语言环境相关的SQL函数</h3>
               <div>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-CC307763-CC57-460A-80FC-ED3395BC94AB">CONVERT函数</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB">不同长度语义的SQL函数</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE">类似于不同长度语义的条件</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-D9CD67BB-C3A7-4C77-BB46-48C65B4DF264">字符集SQL函数</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497">NLSSORT功能</a></p>
                     </li>
                  </ul>
               </div><a id="NLSPG434"></a><div class="props_rev_3"><a id="GUID-CC307763-CC57-460A-80FC-ED3395BC94AB" name="GUID-CC307763-CC57-460A-80FC-ED3395BC94AB"></a><h4 id="NLSPG-GUID-CC307763-CC57-460A-80FC-ED3395BC94AB" class="sect4"><span class="enumeration_section">9.2.1</span> CONVERT函数</h4>
                  <div>
                     <p><a id="d78171e804" class="indexterm-anchor"></a><a id="d78171e808" class="indexterm-anchor"></a><a id="d78171e812" class="indexterm-anchor"></a><a id="d78171e814" class="indexterm-anchor"></a> <code class="codeph">CONVERT</code>函数可以在字符集之间转换字符数据。
                     </p>
                     <p><code class="codeph">CONVERT</code>函数将一个字符集中的字符串的二进制表示形式转换为另一个字符集。它使用与数据库和客户端字符集之间的转换完全相同的技术。因此，它使用<a id="d78171e827" class="indexterm-anchor"></a>替换字符并具有相同的限制。
                     </p>
                     <div class="infoboxnotealso" id="GUID-CC307763-CC57-460A-80FC-ED3395BC94AB__GUID-64A765ED-0FB6-480E-B225-20C86A4BC69C">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="choosing-character-set.html#GUID-B02F1730-CE1B-4210-BBA6-ED605E507D6F">客户端和服务器之间的字符集转换</a> ”</span></p>
                     </div>
                     <p><code class="codeph">CONVERT</code>的语法如下：</p><pre class="oac_no_warn" dir="ltr">CONVERT（ <span class="italic"><code class="codeph">char</code></span> ， <span class="italic"><code class="codeph">dest_char_set</code></span> [， <span class="italic"><code class="codeph">source_char_set</code></span> ]）</pre><p><span class="italic"><code class="codeph">char</code></span>是要转换的值。 <span class="italic"><code class="codeph">source_char_set</code></span>是源字符集， <span class="italic"><code class="codeph">dest_char_set</code></span>是目标字符集。如果未指定<span class="italic"><code class="codeph">source_char_set</code></span>参数，则默认为数据库字符集。
                     </p>
                     <div class="infoboxnotealso" id="GUID-CC307763-CC57-460A-80FC-ED3395BC94AB__GUID-19B1E6D2-02AC-47D8-B761-DD80EAB87DDA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">CONVERT</code>函数的更多信息，请<a href="../sqlrf/CONVERT.html#SQLRF00620" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="appendix-A-locale-data.html#GUID-2547D8E3-DC0F-4970-B9B4-3D0E03BA050A">字符集转换支持</a> ”</span>用于仅用于<code class="codeph">CONVERT</code>功能的字符集编码</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="NLSPG843"></a><a id="NLSPG435"></a><div class="props_rev_3"><a id="GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB" name="GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB"></a><h4 id="NLSPG-GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB" class="sect4"><span class="enumeration_section">9.2.2</span>不同长度语义的SQL函数</h4>
                  <div>
                     <p>Oracle提供了根据不同长度语义工作的SQL函数。有三组这样的SQL函数： <code class="codeph">SUBSTR</code> ， <code class="codeph">LENGTH</code>和<code class="codeph">INSTR</code> 。组中的每个函数都基于不同类型的长度语义，并通过附加到函数名称的字符或数字来区分。例如， <code class="codeph">SUBSTRB</code>基于字节语义。
                     </p>
                     <p><code class="codeph">SUBSTR</code>函数返回子字符串的请求部分。<code class="codeph">LENGTH</code>函数返回字符串的长度。<code class="codeph">INSTR</code>函数在字符串中搜索子字符串。
                     </p>
                     <p><code class="codeph">SUBSTR</code>函数以不同方式计算字符串的长度。<a href="sql-and-plsql-programming-in-global-environment.html#GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB__CIHBDIBC" title="该表在前面的文本中描述">表9-2</a>总结了计算方法。
                     </p>
                     <div class="tblformalwide" id="GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB__CIHBDIBC">
                        <p class="titleintable">表9-2 SUBSTR函数如何计算字符串的长度</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="SUBSTR函数如何计算字符串的长度" width="100%" border="1" summary="This table is described in the preceding text" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d78171e1014">功能</th>
                                 <th align="left" valign="bottom" width="83%" id="d78171e1017">计算方法</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1022" headers="d78171e1014 ">
                                    <p><code class="codeph">SUBSTR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1022 d78171e1017 ">
                                    <p>根据与数据类型的字符集关联的长度语义计算字符串的长度（以字符为单位）。例如，AL32UTF8字符以UCS-4字符计算。UTF8和AL16UTF16字符以UCS-2字符计算。补充字符在AL32UTF8中计为一个字符，在UTF8和AL16UTF16中计为两个字符。由于<code class="codeph">VARCHAR</code>和<code class="codeph">NVARCHAR2</code>可能使用不同的字符集，因此即使两个字符串相同， <code class="codeph">SUBSTR</code>也可能为不同的数据类型提供不同的结果。如果您的应用程序需要一致性，则使用<code class="codeph">SUBSTR2</code>或<code class="codeph">SUBSTR4</code>分别强制所有语义计算为UCS-2或UCS-4。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1045" headers="d78171e1014 ">
                                    <p><code class="codeph">SUBSTRB</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1045 d78171e1017 ">
                                    <p>以字节为单位计算字符串的长度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1053" headers="d78171e1014 ">
                                    <p><code class="codeph">SUBSTR2</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1053 d78171e1017 ">
                                    <p>计算UCS-2字符的字符串长度，符合Java字符串和Windows客户端环境。字符以UCS-2或16位Unicode值表示。补充字符计为两个字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1061" headers="d78171e1014 ">
                                    <p><code class="codeph">SUBSTR4</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1061 d78171e1017 ">
                                    <p>以UCS-4字符计算字符串的长度。字符以UCS-4或32位Unicode值表示。补充字符计为一个字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1069" headers="d78171e1014 ">
                                    <p><code class="codeph">SUBSTRC</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1069 d78171e1017 ">
                                    <p>计算Unicode组合字符中字符串的长度。补充字符和组合字符计为一个字符。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><code class="codeph">LENGTH</code>和<code class="codeph">INSTR</code>函数根据添加到函数名称的字符或数字以相同的方式计算字符串长度。
                     </p>
                     <p>以下示例演示了字符集为AL32UTF8的数据库上<code class="codeph">SUBSTR</code>和<code class="codeph">SUBSTRB</code>之间的差异。
                     </p>
                     <p>对于字符串<code class="codeph">Fußball,</code>以下语句返回一个长度为4个字符的子字符串，以第二个字符开头：</p><pre class="oac_no_warn" dir="ltr">SELECT SUBSTR（'Fußball'，2,4）SUBSTR FROM DUAL; SUBS ----ußba</pre><p>对于字符串<code class="codeph">Fußball,</code>以下语句返回一个4字节长的子字符串，从第二个字节开始：</p><pre class="oac_no_warn" dir="ltr">SELECT SUBSTRB（'Fußball'，2,4）来自DUAL的SUBSTRB; SUB ---ußb</pre><div class="infoboxnotealso" id="GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB__GUID-2A072DEF-C65D-4D66-8070-99C2139087BA">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">SUBSTR</code> ， <code class="codeph">LENGTH</code>和<code class="codeph">INSTR</code>函数的更多信息，请<a href="../sqlrf/About-SQL-Functions.html#SQLRF51173" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                  </div>
               </div><a id="NLSPG844"></a><a id="NLSPG436"></a><div class="props_rev_3"><a id="GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE" name="GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE"></a><h4 id="NLSPG-GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE" class="sect4"><span class="enumeration_section">9.2.3</span>不同长度语义的条件</h4>
                  <div>
                     <p><code class="codeph">LIKE</code>条件指定使用模式匹配的测试。等于运算符（=）将一个字符值与另一个字符值完全匹配，但<code class="codeph">LIKE</code>条件通过搜索第二个指定的模式的第一个值来匹配一个字符值的一部分。
                     </p>
                     <p><code class="codeph">LIKE</code>使用与输入字符集关联的长度语义计算字符串的长度。<code class="codeph">LIKE2</code> ， <code class="codeph">LIKE4</code>和<code class="codeph">LIKEC</code>条件总结在<a href="sql-and-plsql-programming-in-global-environment.html#GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE__G1007320" title="该表在前面的文本中描述">表9-3中</a> 。
                     </p>
                     <div class="tblformalwide" id="GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE__G1007320">
                        <p class="titleintable">表9-3 LIKE条件</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="像条件" width="100%" border="1" summary="This table is described in the preceding text" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d78171e1240">功能</th>
                                 <th align="left" valign="bottom" width="83%" id="d78171e1243">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1248" headers="d78171e1240 ">
                                    <p><code class="codeph">LIKE2</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1248 d78171e1243 ">
                                    <p>在UCS-2语义中表示字符时使用。补充字符被视为两个字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1256" headers="d78171e1240 ">
                                    <p><code class="codeph">样4</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1256 d78171e1243 ">
                                    <p>在UCS-4语义中表示字符时使用。补充字符被视为一个字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1264" headers="d78171e1240 ">
                                    <p><code class="codeph">LIKEC</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1264 d78171e1243 ">
                                    <p>在Unicode完整字符语义中表示字符时使用。组合字符被视为一个字符。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>没有<code class="codeph">LIKEB</code>条件。
                     </p>
                  </div>
               </div><a id="NLSPG437"></a><div class="props_rev_3"><a id="GUID-D9CD67BB-C3A7-4C77-BB46-48C65B4DF264" name="GUID-D9CD67BB-C3A7-4C77-BB46-48C65B4DF264"></a><h4 id="NLSPG-GUID-D9CD67BB-C3A7-4C77-BB46-48C65B4DF264" class="sect4"><span class="enumeration_section">9.2.4</span>字符集SQL函数</h4>
                  <div>
                     <p>两个SQL函数<code class="codeph">NLS_CHARSET_NAME</code>和<code class="codeph">NLS_CHARSET_ID</code>可以在字符集ID号和字符集名称之间进行转换。它们由需要通过OCI确定绑定变量的字符集ID号的程序使用。<a id="d78171e1356" class="indexterm-anchor"></a></p>
                     <p>另一个SQL函数<code class="codeph">NLS_CHARSET_DECL_LEN</code>在给定列的字节长度的情况下以字符数返回列的声明长度。
                     </p>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-9C93FB3E-6642-4D05-8394-FF88EEAD64EA">从字符集编号转换为字符集名称</a></p>
                        </li>
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-55D0BD42-56EC-4765-9DFB-4F2D3E904560">从字符集名称转换为字符集编号</a></p>
                        </li>
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-3CC9B10F-0A9E-4FCC-B09E-FE1607ED0E38">返回NCHAR列的长度</a></p>
                           <div class="infoboxnotealso" id="GUID-D9CD67BB-C3A7-4C77-BB46-48C65B4DF264__GUID-B7E420AC-2502-4A68-BDC8-93F9E6AB841E">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../sqlrf/About-SQL-Functions.html#SQLRF51173" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                           </div>
                        </li>
                     </ul>
                  </div><a id="NLSPG438"></a><div class="props_rev_3"><a id="GUID-9C93FB3E-6642-4D05-8394-FF88EEAD64EA" name="GUID-9C93FB3E-6642-4D05-8394-FF88EEAD64EA"></a><h5 id="NLSPG-GUID-9C93FB3E-6642-4D05-8394-FF88EEAD64EA" class="sect5"><span class="enumeration_section">9.2.4.1</span>从字符集编号转换为字符集名称</h5>
                     <div>
                        <p><code class="codeph">NLS_CHARSET_NAME</code> （ <span class="italic"><code class="codeph">n</code></span> ）函数返回与ID号对应的字符集的名称<span class="italic"> </span> <span class="italic"><code class="codeph">n</code></span> 。如果<span class="italic"><code class="codeph">n</code></span>不是可识别的字符集ID值，则该函数返回<code class="codeph">NULL</code> 。
                        </p>
                     </div>
                  </div><a id="NLSPG439"></a><div class="props_rev_3"><a id="GUID-55D0BD42-56EC-4765-9DFB-4F2D3E904560" name="GUID-55D0BD42-56EC-4765-9DFB-4F2D3E904560"></a><h5 id="NLSPG-GUID-55D0BD42-56EC-4765-9DFB-4F2D3E904560" class="sect5"><span class="enumeration_section">9.2.4.2</span>从字符集名称转换为字符集编号</h5>
                     <div>
                        <p><code class="codeph">NLS_CHARSET_ID</code> （ <span class="italic"><code class="codeph">text</code></span> ）返回与<span class="italic"><code class="codeph">text</code></span>指定的名称对应的字符集ID。 <span class="italic"><code class="codeph">text</code></span>定义为运行时<code class="codeph">VARCHAR2</code>数量，即字符集名称。<code class="codeph">text</code>值可以是<code class="codeph">NLSRTL</code>名称， <code class="codeph">NLSRTL</code>名称可以解析为不是数据库字符集或国家字符集的字符集。
                        </p>
                        <p>如果为<span class="italic"><code class="codeph">text</code></span>输入值<code class="codeph">CHAR_CS</code> ，则该函数返回数据库字符集的ID。如果为<span class="italic"><code class="codeph">text</code></span>输入值<code class="codeph">NCHAR_CS</code> ，则该函数返回数据库的国家字符集的ID。如果<span class="italic"><code class="codeph">text</code></span>不是可识别的名称，则该函数返回<code class="codeph">NULL</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-55D0BD42-56EC-4765-9DFB-4F2D3E904560__GUID-2295974B-6BE3-4533-866B-1C969CEE5BBA">
                           <p class="notep1">注意：</p>
                           <p>必须以大写字符输入<span class="italic"><code class="codeph">text</code></span>的值。
                           </p>
                        </div>
                     </div>
                  </div><a id="NLSPG440"></a><div class="props_rev_3"><a id="GUID-3CC9B10F-0A9E-4FCC-B09E-FE1607ED0E38" name="GUID-3CC9B10F-0A9E-4FCC-B09E-FE1607ED0E38"></a><h5 id="NLSPG-GUID-3CC9B10F-0A9E-4FCC-B09E-FE1607ED0E38" class="sect5"><span class="enumeration_section">9.2.4.3</span>返回NCHAR列的长度</h5>
                     <div>
                        <p>在给定列的字节长度的情况下， <code class="codeph">NLS_CHARSET_DECL_LEN</code> （ <span class="italic"><code class="codeph">BYTECNT</code></span> ， <span class="italic"><code class="codeph">CSID</code></span> ）以字符数返回列的声明长度。<span class="italic"><code class="codeph">BYTECNT</code></span>是列的字节长度。<span class="italic"><code class="codeph">CSID</code></span>是列的字符集ID。
                        </p>
                     </div>
                  </div>
               </div><a id="NLSPG845"></a><a id="NLSPG846"></a><a id="NLSPG847"></a><a id="NLSPG441"></a><div class="props_rev_3"><a id="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497" name="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497"></a><h4 id="NLSPG-GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497" class="sect4"><span class="enumeration_section">9.2.5</span> NLSSORT功能</h4>
                  <div>
                     <p><code class="codeph">NLSSORT</code>函数使您可以强制<code class="codeph">ORDER BY</code> ， <code class="codeph">GROUP BY</code> ，比较条件和许多其他校对敏感操作的特定归类（排序顺序）。但是，从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，强制执行此类操作的特定排序规则的推荐方法是使用<code class="codeph">COLLATE</code>运算符。<code class="codeph">COLLATE</code>运算符适用于所有对结果敏感的操作，包括不能使用<code class="codeph">NLSSORT</code>操作，例如<code class="codeph">MAX</code> ， <code class="codeph">MIN</code>和<code class="codeph">INSTR</code> 。</p>
                     <div class="infoboxnotealso" id="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497__GUID-B86B77ED-A994-4ACC-B48A-4D9506AB3582">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-4146F48A-FB6F-4593-8098-BDF45404EB24">表达式评估和COLLATE运算符</a> ”</span></p>
                     </div>
                     <p><code class="codeph">NLSSORT</code>函数为其角色参数计算排序规则键。排序规则键是数据类型<code class="codeph">RAW</code>的值，它具有以下属性：当为两个（可能不同的）源字符值的给定排序规则创建的两个排序规则键被比较为二进制时，它们的相互排序对应于预期的相互排序此归类中的源字符值，即<code class="codeph">NLSSORT(c1) &lt; NLSSORT(c2)</code> ，当且仅当<code class="codeph">c1 &lt; c2</code> ，其中<code class="codeph">NLSSORT</code>和字符运算符<code class="codeph">&lt;</code> （小于）使用相同的归类。
                     </p>
                     <p>用于<code class="codeph">ORDER BY</code> ， <code class="codeph">GROUP BY</code> ，比较条件和其他校对敏感操作的排序规则由数据绑定排序规则确定规则确定。如果这些规则产生伪排序规则，则会话参数<code class="codeph">NLS_COMP</code>和<code class="codeph">NLS_SORT</code>确定实际排序规则。
                     </p>
                     <div class="infoboxnotealso" id="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497__GUID-5D495F29-8CC5-41EB-BCA9-FA19366F002E">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="appendix-C-collation-derivation-and-determination-rules-for-SQL-operations.html#GUID-88301F82-36AE-47DB-8F60-54FAEEAECADE">整理决定</a> ”</span></p>
                     </div>
                     <p>以下示例使用<code class="codeph">NLS_SORT</code>会话参数指定德语排序<code class="codeph">NLS_SORT</code> 。它假定<code class="codeph">column1</code>的声明排序规则是<code class="codeph">USING_NLS_COMP</code>或<code class="codeph">USING_NLS_SORT</code> 。</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET NLS_SORT = GERMAN; SELECT * FROM table1 ORDER BY column1;</pre><p>以下示例首先将<code class="codeph">NLS_SORT</code>会话参数设置为德语，但<code class="codeph">NLSSORT</code>函数通过指定法语排序来覆盖它。
                     </p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET NLS_SORT = GERMAN; SELECT * FROM table1 ORDER BY NLSSORT（column1，'NLS_SORT = FRENCH'）;</pre><p>当<code class="codeph">NLS_COMP</code>设置为<code class="codeph">BINARY</code>并且声明的引用列的排序规则为<code class="codeph">USING_NLS_COMP</code>时， <code class="codeph">WHERE</code>子句使用二进制比较。但是，可以通过在<code class="codeph">WHERE</code>子句中使用<code class="codeph">NLSSORT</code>函数来覆盖它。
                     </p>
                     <div class="infoboxnote" id="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497__GUID-E1626E8D-903A-4694-9577-213736DB2458">
                        <p class="notep1">注意：</p>
                        <p>如果未使用数据绑定排序规则功能，则所有列都具有<code class="codeph">USING_NLS_COMP</code>的声明排序<code class="codeph">USING_NLS_COMP</code> 。</p>
                     </div>
                     <p>以下示例使用<code class="codeph">WHERE</code>子句进行语言比较。
                     </p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET NLS_COMP = BINARY; SELECT * FROM table1 WHERE NLSSORT（column1，'NLS_SORT = FRENCH'）&gt; NLSSORT（column2，'NLS_SORT = FRENCH'）;</pre><p>将<code class="codeph">NLS_COMP</code>会话参数设置为<code class="codeph">LINGUISTIC</code>会导致在<code class="codeph">WHERE</code>子句中使用<code class="codeph">NLS_SORT</code>值。
                     </p>
                     <p>Oracle数据库可以隐式地将<code class="codeph">NLSSORT</code>函数添加到子查询中的SQL表达式，以实现一类对排序规则敏感的操作的语言行为。隐式添加的<code class="codeph">NLSSORT</code>调用在SQL语句的执行计划中可见。
                     </p>
                     <div class="infoboxnote" id="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497__GUID-BE57E9B1-8167-4F32-A5D0-89AAC744E0EF">
                        <p class="notep1">注意：</p>
                        <p>无论是显式调用还是隐式调用， <code class="codeph">NLSSORT</code>函数都可能在某些条件下报告错误<code class="codeph">ORA-12742</code> 。有关此错误的更多详细信息，请参阅<span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-F2CF03B7-BD32-42D5-803A-0F4F03A1D4FE">避免ORA-12742错误</a> ”</span> 。
                        </p>
                     </div>
                     <p>本节的其余部分包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-65741DDD-B962-4D2A-9352-12789CC21A5A">NLSSORT语法</a></p>
                        </li>
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF">比较WHERE子句中的字符串</a></p>
                        </li>
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-ECF1E342-FB26-48C8-9BE0-F6938791DB88">控制ORDER BY子句</a></p>
                        </li>
                     </ul>
                  </div><a id="NLSPG442"></a><div class="props_rev_3"><a id="GUID-65741DDD-B962-4D2A-9352-12789CC21A5A" name="GUID-65741DDD-B962-4D2A-9352-12789CC21A5A"></a><h5 id="NLSPG-GUID-65741DDD-B962-4D2A-9352-12789CC21A5A" class="sect5"><span class="enumeration_section">9.2.5.1</span> NLSSORT语法</h5>
                     <div>
                        <div class="section">
                           <p>有四种方法可以使用<code class="codeph">NLSSORT</code> ：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">NLSSORT()</code> ，它依赖于整理确定规则</p>
                              </li>
                              <li>
                                 <p><code class="codeph">NLSSORT(column1, 'NLS_SORT=</code> <span class="italic"><code class="codeph">xxxx</code></span> <code class="codeph">')</code> 
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">NLSSORT(column1, 'NLS_LANG=</code> <span class="italic"><code class="codeph">xxxx</code></span> <code class="codeph">')</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">NLSSORT(column1, 'NLS_LANGUAGE=</code> <span class="italic"><code class="codeph">xxxx</code></span> <code class="codeph">')</code></p>
                              </li>
                           </ul>
                           <p><code class="codeph">NLSSORT</code>函数的<code class="codeph">NLS_LANG</code>参数与<code class="codeph">NLS_LANG</code>客户端环境设置不同。在<code class="codeph">NLSSORT</code>函数中， <code class="codeph">NLS_LANG</code>指定缩写的语言名称，例如<code class="codeph">US</code> for American或<code class="codeph">PL</code> for Polish。例如：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM table1 ORDER BY NLSSORT（column1，'NLS_LANG = PL'）;</pre><p>在<code class="codeph">NLSSORT</code>调用中指定语言时，该函数将使用该语言的默认排序规则。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="NLSPG443"></a><div class="props_rev_3"><a id="GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF" name="GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF"></a><h5 id="NLSPG-GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF" class="sect5"><span class="enumeration_section">9.2.5.2</span>比较WHERE子句中的字符串</h5>
                     <div>
                        <p><code class="codeph">NLSSORT</code>使应用程序能够执行遵循字母约定的字符串匹配。通常， <code class="codeph">WHERE</code>子句中的字符串使用字符的二进制值进行比较。如果一个字符在数据库字符集中具有更大的二进制值，则认为该字符大于另一个字符。因为基于二进制值的字符序列可能与语言的字母序列不匹配，所以这种比较可能不遵循字母惯例。例如，如果列（ <code class="codeph">column1</code> ）包含ISO 8859-1 8位字符集中的值ABC，ABZ，BCD和ÄBC，则以下查询将返回<code class="codeph">BCD</code>和<code class="codeph">ÄBC</code>因为<code class="codeph">Ä</code>的数值高于<code class="codeph">B</code> ：</p><pre class="oac_no_warn" dir="ltr">SELECT column1 FROM table1 WHERE column1&gt;'B';</pre><p>在德语中， <code class="codeph">Ä</code>在<code class="codeph">B</code>之前按字母顺序排序，但在瑞典语中， <code class="codeph">Ä</code>在<code class="codeph">Z</code>之后排序。可以在<code class="codeph">WHERE</code>子句中使用<code class="codeph">NLSSORT</code>进行语言比较：</p><pre class="oac_no_warn" dir="ltr">WHERE NLSSORT（col） <span class="italic"><code class="codeph">comparison_operator</code></span> NLSSORT（ <span class="italic"><code class="codeph">comparison_string</code></span> ）</pre><p>请注意， <code class="codeph">NLSSORT</code>必须位于比较运算符的两侧。例如：</p><pre class="oac_no_warn" dir="ltr">SELECT column1 FROM table1 WHERE NLSSORT（column1）&gt; NLSSORT（'B'）;</pre><p>如果设置了德语语言排序，则该语句不会返回以<code class="codeph">Ä</code>开头的字符串，因为<code class="codeph">Ä</code>出现在德语字母表中的<code class="codeph">B</code>之前。如果设置了瑞典语语言排序，则返回以<code class="codeph">Ä</code>开头的字符串，因为<code class="codeph">Ä</code>出现在瑞典语字母表中的<code class="codeph">Z</code>之后。
                        </p>
                        <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，使<code class="codeph">&gt;</code> （大于）运算符使用语言比较的推荐方法是将<code class="codeph">COLLATE</code>运算符添加到其中一个比较值。例如：</p><pre class="pre codeblock"><code>SELECT column1 FROM table1 WHERE column1 COLLATE USING_NLS_SORT&gt;'B';</code></pre><p>如果要强制执行特定的排序规则， <code class="codeph">USING_NLS_SORT</code>考虑会话NLS参数，则可以指定它来代替伪排序<code class="codeph">USING_NLS_SORT</code> 。例如：</p><pre class="pre codeblock"><code>SELECT column1 FROM table1 WHERE column1 COLLATE GERMAN&gt;'B';</code></pre><div class="infoboxnote" id="GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF__GUID-3F46EDBF-D4EE-4E0C-B641-DFD04BF5033C">
                           <p class="notep1">注意：</p>
                           <p>如果删除操作符<code class="codeph">COLLATE</code>并在声明<code class="codeph">table1</code>中<code class="codeph">column1</code>排序规则时指定相应的排序规则，则将获得与上述<code class="codeph">COLLATE</code>运算符示例中显示的结果相同的结果。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF__GUID-4FDCEC69-ED14-4D6A-BD83-20E22E195985">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-C8F381FC-FD1F-411E-B92D-256B728BAFAA">为列指定数据绑定排序规则</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="NLSPG445"></a><div class="props_rev_3"><a id="GUID-ECF1E342-FB26-48C8-9BE0-F6938791DB88" name="GUID-ECF1E342-FB26-48C8-9BE0-F6938791DB88"></a><h5 id="NLSPG-GUID-ECF1E342-FB26-48C8-9BE0-F6938791DB88" class="sect5"><span class="enumeration_section">9.2.5.3</span>控制ORDER BY子句</h5>
                     <div>
                        <p>如果正在使用语言排序，则<code class="codeph">ORDER BY</code>子句对字符数据使用隐式<code class="codeph">NLSSORT</code> 。<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句的排序机制（语言或二进制）对应用程序是透明的。但是，如果在<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句中显式指定了<code class="codeph">NLSSORT</code>函数，则不会执行隐式<code class="codeph">NLSSORT</code> 。
                        </p>
                        <p>如果<code class="codeph">NLS_SORT</code>会话参数定义了语言排序，则应用程序中的<code class="codeph">ORDER BY</code>子句使用隐式<code class="codeph">NLSSORT</code>函数。如果指定显式<code class="codeph">NLSSORT</code>函数，则它将覆盖隐式<code class="codeph">NLSSORT</code>函数。
                        </p>
                        <p>当排序机制被定义为语言时， <code class="codeph">ORDER</code> <code class="codeph">BY</code>子句中通常不需要<code class="codeph">NLSSORT</code>函数。
                        </p>
                        <p>当排序机制默认或定义为二进制时，那么像下面这样的查询使用二进制排序：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name FROM employees ORDER BY last_name;</pre><p>德语语言排序可以如下获得：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name FROM employees ORDER BY NLSSORT（last_name，'NLS_SORT = GERMAN'）;</pre><div class="infoboxnotealso" id="GUID-ECF1E342-FB26-48C8-9BE0-F6938791DB88__GUID-66363717-F90A-48B7-BBDD-BE40DEF212C0">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-3D736236-BF98-4A4D-9D09-293AAA50A04E">使用语言整理</a> ”</span></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="NLSPG446"></a><div class="props_rev_3"><a id="GUID-1EB0DFBE-FF78-4DAC-A549-58F0A5C35C9F" name="GUID-1EB0DFBE-FF78-4DAC-A549-58F0A5C35C9F"></a><h3 id="NLSPG-GUID-1EB0DFBE-FF78-4DAC-A549-58F0A5C35C9F" class="sect3"><span class="enumeration_section">9.3</span>全局环境中SQL和PL / SQL编程的其他主题</h3>
               <div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-155B5CEA-070D-48A5-A01C-44946C5DF6C4">SQL日期格式掩码</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-2679DAC4-AC21-4AB1-A2EF-8382620B1C89">计算周数</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-9FEE0C03-A841-41BE-A819-2EA9BA535B81">SQL数字格式掩码</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-3E5ADD9C-2EDD-4E48-B8E7-01E83BF93193">将外部BFILE数据加载到LOB列中</a></p>
                        <div class="infoboxnotealso" id="GUID-1EB0DFBE-FF78-4DAC-A549-58F0A5C35C9F__GUID-7A784CF8-68F5-455B-9CEF-500760E32EFC">
                           <p class="notep1">也可以看看：</p>
                           <p>有关格式掩码的完整说明，请<a href="../sqlrf/Format-Models.html#SQLRF00212" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </div>
                     </li>
                  </ul>
               </div><a id="NLSPG447"></a><div class="props_rev_3"><a id="GUID-155B5CEA-070D-48A5-A01C-44946C5DF6C4" name="GUID-155B5CEA-070D-48A5-A01C-44946C5DF6C4"></a><h4 id="NLSPG-GUID-155B5CEA-070D-48A5-A01C-44946C5DF6C4" class="sect4"><span class="enumeration_section">9.3.1</span> SQL日期格式掩码</h4>
                  <div>
                     <p>几种格式<a id="d78171e2667" class="indexterm-anchor"></a> <code class="codeph">TO_CHAR</code>提供了掩码<a id="d78171e2672" class="indexterm-anchor"></a> ， <code class="codeph">TO_DATE</code> <a id="d78171e2679" class="indexterm-anchor"></a>和<code class="codeph">TO_NUMBER</code> <a id="d78171e2686" class="indexterm-anchor"></a>功能。
                     </p>
                     <p><code class="codeph">RM</code> （罗马月）格式<a id="d78171e2696" class="indexterm-anchor"></a> element返回一个月作为罗马数字。您可以使用<code class="codeph">RM</code>或<code class="codeph">rm</code>指定大写或小写。例如，对于2007年9月7日的日期， <code class="codeph">DD-rm-YYYY</code>返回<code class="codeph">07-ix-2007</code> ， <code class="codeph">DD-RM-YYYY</code>返回<code class="codeph">07-IX-2007</code> 。
                     </p>
                     <p>请注意， <code class="codeph">MON</code>和<code class="codeph">DY</code>格式掩码明确支持月份和日期缩写，长度可能不是三个字符。例如，可以分别为法语“Lundi”和“Mardi”指定缩写“Lu”和“Ma”。
                     </p>
                  </div>
               </div><a id="NLSPG448"></a><div class="props_rev_3"><a id="GUID-2679DAC4-AC21-4AB1-A2EF-8382620B1C89" name="GUID-2679DAC4-AC21-4AB1-A2EF-8382620B1C89"></a><h4 id="NLSPG-GUID-2679DAC4-AC21-4AB1-A2EF-8382620B1C89" class="sect4"><span class="enumeration_section">9.3.2</span>计算周数</h4>
                  <div>
                     <p><code class="codeph">WW</code>格式掩码返回的周数根据以下算法计算： <code class="codeph">int(dayOfYear+6)/7</code> 。该算法不遵循ISO <a id="d78171e2808" class="indexterm-anchor"></a>标准（2015年，1992年6月15日）。<a id="d78171e2811" class="indexterm-anchor"></a></p>
                     <p>支持ISO <a id="d78171e2815" class="indexterm-anchor"></a><a id="d78171e2819" class="indexterm-anchor"></a>标准，提供<code class="codeph">IW</code>格式元素。它返回ISO周号。此外， <code class="codeph">I</code> ， <code class="codeph">IY</code> ， <code class="codeph">IYY</code>和<code class="codeph">IYYY</code>格式元素（与<code class="codeph">Y</code> ， <code class="codeph">YY</code> ， <code class="codeph">YYY</code>和<code class="codeph">YYYY</code>格式元素的行为等效）返回与ISO周数相关的年份。
                     </p>
                     <p>在ISO标准中，与ISO周数相关的年份可能与日历年不同。例如，1988年1月1日是1987年的ISO周53号。一周总是在星期一开始，到星期日结束。周数根据以下规则确定：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果1月1日是星期五，星期六或星期日，则包括1月1日在内的一周是上一年的最后一周，因为一周中的大多数日子都属于上一年。</p>
                        </li>
                        <li>
                           <p>如果1月1日是星期一，星期二，星期三或星期四，那么这一周是新年的第一周，因为一周中的大多数日子都属于新的一年。</p>
                        </li>
                     </ul>
                     <p>例如，1991年1月1日是星期二，所以1990年12月31日星期一，1991年1月6日星期日，是第1周。因此，1990年12月31日的ISO周数和年份是1991年1月。要获取ISO周编号，请使用<code class="codeph">IW</code>格式掩码作为星期编号和年份的<code class="codeph">IY</code>格式之一。<a id="d78171e2869" class="indexterm-anchor"></a><a id="d78171e2871" class="indexterm-anchor"></a><a id="d78171e2873" class="indexterm-anchor"></a><a id="d78171e2877" class="indexterm-anchor"></a></p>
                  </div>
               </div><a id="NLSPG449"></a><div class="props_rev_3"><a id="GUID-9FEE0C03-A841-41BE-A819-2EA9BA535B81" name="GUID-9FEE0C03-A841-41BE-A819-2EA9BA535B81"></a><h4 id="NLSPG-GUID-9FEE0C03-A841-41BE-A819-2EA9BA535B81" class="sect4"><span class="enumeration_section">9.3.3</span> SQL数字格式掩码</h4>
                  <div>
                     <div class="section">
                        <p>几种额外的格式<a id="d78171e2963" class="indexterm-anchor"></a>元素用于格式化数字：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-9FEE0C03-A841-41BE-A819-2EA9BA535B81__GUID-43675CF6-B467-43AE-BE7D-B1A0F86DDD85">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists some of the SQL format masks for formatting numbers." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d78171e2975">元件</th>
                                 <th align="left" valign="bottom" width="30%" id="d78171e2978">描述</th>
                                 <th align="left" valign="bottom" width="50%" id="d78171e2981">目的</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d78171e2986" headers="d78171e2975 ">
                                    <p><code class="codeph">d</code></p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d78171e2986 d78171e2978 ">
                                    <p>十进制</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d78171e2986 d78171e2981 ">
                                    <p>返回小数点字符<a id="d78171e2996" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d78171e3001" headers="d78171e2975 ">
                                    <p><code class="codeph">G</code></p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d78171e3001 d78171e2978 ">
                                    <p>组</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d78171e3001 d78171e2981 ">
                                    <p>返回组分隔符<a id="d78171e3011" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d78171e3016" headers="d78171e2975 ">
                                    <p><code class="codeph">大号</code></p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d78171e3016 d78171e2978 ">
                                    <p>当地货币</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d78171e3016 d78171e2981 ">
                                    <p>返回本地货币符号<a id="d78171e3026" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d78171e3031" headers="d78171e2975 ">
                                    <p><code class="codeph">C</code></p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d78171e3031 d78171e2978 ">
                                    <p>国际货币</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d78171e3031 d78171e2981 ">
                                    <p>返回ISO货币符号<a id="d78171e3041" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d78171e3046" headers="d78171e2975 ">
                                    <p><code class="codeph">RN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d78171e3046 d78171e2978 ">
                                    <p>罗马数字</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d78171e3046 d78171e2981 ">
                                    <p>返回数字作为其等效的罗马数字<a id="d78171e3056" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>对于罗马数字，您可以分别使用<code class="codeph">RN</code>或<code class="codeph">rn</code>指定大写或小写。要转换的数字必须是1到3999范围内的整数<span>。</span></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="NLSPG450"></a><div class="props_rev_3"><a id="GUID-3E5ADD9C-2EDD-4E48-B8E7-01E83BF93193" name="GUID-3E5ADD9C-2EDD-4E48-B8E7-01E83BF93193"></a><h4 id="NLSPG-GUID-3E5ADD9C-2EDD-4E48-B8E7-01E83BF93193" class="sect4"><span class="enumeration_section">9.3.4将</span>外部BFILE数据加载到LOB列中</h4>
                  <div>
                     <p><code class="codeph">DBMS_LOB</code> PL / SQL包可以将外部<code class="codeph">BFILE</code>数据加载到<code class="codeph">LOB</code>列中。Oracle数据库在将二进制数据加载到<code class="codeph">CLOB</code>或<code class="codeph">NCLOB</code>列之前执行字符集转换。因此， <code class="codeph">BFILE</code>数据不需要与数据库或国家字符集在同一字符集中才能正常工作。API将指定<code class="codeph">BFILE</code>字符集中的数据转换为<code class="codeph">CLOB</code>数据类型的数据库字符集，或<code class="codeph">NCLOB</code>数据类型的国家字符集。加载发生在服务器上，因为客户端不支持<code class="codeph">BFILE</code>数据。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用<code class="codeph">DBMS_LOB.LOADBLOBFROMFILE</code>加载<code class="codeph">BLOB</code>列。
                           </p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">DBMS_LOB.LOADCLOBFROMFILE</code>加载<code class="codeph">CLOB</code>和<code class="codeph">NCLOB</code>列。
                           </p>
                           <div class="infoboxnotealso" id="GUID-3E5ADD9C-2EDD-4E48-B8E7-01E83BF93193__GUID-FBBFB997-A25F-49E1-B062-EA3AE478A515">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../arpls/DBMS_LOB.html#ARPLS600" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../adlob/using-LOB-APIs.html#ADLOB1017" target="_blank"><span class="italic">Oracle Database SecureFiles和大对象开发人员指南</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
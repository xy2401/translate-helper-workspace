<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>ANSI动态SQL</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="c-c-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T03:52:01-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96467-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="Oracle-dynamic-SQL.html" title="Previous" type="text/html"></link>
      <link rel="next" href="Oracle-dynamic-SQL-method-4.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*C/C++ Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Oracle-dynamic-SQL.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="Oracle-dynamic-SQL-method-4.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="applications.html" property="item" typeof="WebPage"><span property="name">应用</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ANSI动态SQL</li>
            </ol>
            <a id="GUID-BF450DA3-B05F-403E-B5DF-C967A20524BF" name="GUID-BF450DA3-B05F-403E-B5DF-C967A20524BF"></a><a id="LNPCC014"></a>
            
            <h2 id="LNPCC-GUID-BF450DA3-B05F-403E-B5DF-C967A20524BF" class="sect2"><span class="enumeration_chapter">14</span> ANSI动态SQL</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍Oracle的实现<a id="d75516e22" class="indexterm-anchor"></a> ANSI动态SQL（也称为SQL标准动态SQL），应该用于新的方法4应用程序。它对旧版Oracle动态SQL方法4进行了增强，如前一章所述。
               </p>
               <p>ANSI方法4支持所有Oracle类型，而老的Oracle方法4 <span class="italic">不</span>支持的对象类型，游标变量，结构，DML返回条款，Unicode的变量，LOB的数组。
               </p>
               <p>在ANSI动态SQL中，描述符由Oracle内部维护，而在较旧的Oracle动态SQL方法4中，描述符在用户的Pro * C / C ++程序中定义。在这两种情况下，方法4意味着您的Pro * C / C ++程序接受或构建包含不同数量的主机变量的SQL语句。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="ANSI-dynamic-SQL.html#GUID-89EBF009-D3AE-4410-9BB6-A55DBE07BC41">ANSI动态SQL的基础知识</a></p>
                  </li>
                  <li>
                     <p><a href="ANSI-dynamic-SQL.html#GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5">ANSI SQL语句概述</a></p>
                  </li>
                  <li>
                     <p><a href="ANSI-dynamic-SQL.html#GUID-D40DCC4E-4B07-4C21-92CA-D060FF716700">Oracle Extensions</a></p>
                  </li>
                  <li>
                     <p><a href="ANSI-dynamic-SQL.html#GUID-5473577F-3537-4DD6-B879-7DB1411EB7E8">ANSI动态SQL预编译器选项</a></p>
                  </li>
                  <li>
                     <p><a href="ANSI-dynamic-SQL.html#GUID-C0D00130-3193-4038-A730-98471BF8E259">动态SQL语句的完整语法</a></p>
                  </li>
                  <li>
                     <p><a href="ANSI-dynamic-SQL.html#GUID-F216E6D1-16BA-400A-8C26-75AC9398264A">示例程序</a></p>
                  </li>
               </ul>
            </div><a id="LNPCC4033"></a><div class="props_rev_3"><a id="GUID-89EBF009-D3AE-4410-9BB6-A55DBE07BC41" name="GUID-89EBF009-D3AE-4410-9BB6-A55DBE07BC41"></a><h3 id="LNPCC-GUID-89EBF009-D3AE-4410-9BB6-A55DBE07BC41" class="sect3"><span class="enumeration_section">14.1</span> ANSI动态SQL的基础知识</h3>
               <div>
                  <p>考虑SQL语句：</p><pre class="oac_no_warn" dir="ltr">SELECT ename，empno FROM emp WHERE deptno =：deptno_data</pre><p>您使用ANSI动态SQL的步骤如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>声明变量，包括用于保存要执行的语句的字符串。</p>
                     </li>
                     <li>
                        <p>为输入和输出变量分配描述符。</p>
                     </li>
                     <li>
                        <p>准备声明。</p>
                     </li>
                     <li>
                        <p>描述输入描述符的输入。</p>
                     </li>
                     <li>
                        <p>设置输入描述符（在我们的示例中是一个输入主机绑定变量<code class="codeph">deptno_data)</code> 。
                        </p>
                     </li>
                     <li>
                        <p>声明并打开动态游标。</p>
                     </li>
                     <li>
                        <p>设置输出描述符（在我们的示例中，输出主机变量<code class="codeph">ename</code>和<code class="codeph">empno)</code> 。
                        </p>
                     </li>
                     <li>
                        <p>重复获取数据，使用GET DESCRIPTOR从每行检索<code class="codeph">ename</code>和<code class="codeph">empno</code>数据字段。
                        </p>
                     </li>
                     <li>
                        <p>对检索到的数据执行某些操作（例如，输出它）。</p>
                     </li>
                     <li>
                        <p>关闭动态游标并取消分配输入和输出描述符。</p>
                     </li>
                  </ul>
               </div><a id="LNPCC4034"></a><a id="LNPCC3574"></a><div class="props_rev_3"><a id="GUID-4C3798E6-854E-438B-85A9-BC34CE2B314E" name="GUID-4C3798E6-854E-438B-85A9-BC34CE2B314E"></a><h4 id="LNPCC-GUID-4C3798E6-854E-438B-85A9-BC34CE2B314E" class="sect4"><span class="enumeration_section">14.1.1</span>预编译器选项</h4>
                  <div>
                     <p>将微预编译器选项DYNAMIC设置为ANSI，或将宏选项MODE设置为ANSI，这将导致DYNAMIC的默认值为ANSI。 DYNAMIC的另一个设置是ORACLE。</p>
                     <p>要使用ANSI类型代码，请将预编译器微选项TYPE_CODE设置为ANSI，或将宏选项MODE设置为ANSI，使TYPE_CODE的默认设置为ANSI。要将TYPE_CODE设置为ANSI，DYNAMIC也必须是ANSI。</p>
                     <p>Oracle在<a href="ANSI-dynamic-SQL.html#GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5">ANSI SQL语句概述</a>中对ANSI SQL类型的实现与ANSI标准不完全匹配。例如，声明为INTEGER的列的描述将返回NUMERIC的代码。随着Oracle越来越接近ANSI标准，可能需要进行微小的行为更改。如果希望应用程序可跨数据库平台移植并且尽可能符合ANSI，则将ANSI类型与预编译器选项TYPE_CODE设置为ANSI。如果不接受此类更改，请不要将TYPE_CODE设置为ANSI。
                     </p>
                  </div>
               </div>
            </div><a id="LNPCC4036"></a><a id="LNPCC4035"></a><div class="props_rev_3"><a id="GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5" name="GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5"></a><h3 id="LNPCC-GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5" class="sect3"><span class="enumeration_section">14.2</span> ANSI SQL语句概述</h3>
               <div>
                  <p>在动态SQL语句中使用它之前，首先分配描述符区域。</p>
                  <p>ALLOCATE DESCRIPTOR语句语法为：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ALLOCATE DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> } [WITH MAX { <span class="italic">：occurrence</span> |] <span class="italic">numeric_literal</span> }];</pre><p>全局描述符可用于程序中的任何模块。只能在分配本地描述符的文件中访问本地描述符。本地是默认值。</p>
                  <p>描述符名称<code class="codeph">desc_nam,</code>可以是单引号中的文字或存储在主变量中的字符值。
                  </p>
                  <p><code class="codeph">occurrences</code>数是描述符可以容纳的最大绑定变量或列数。这必须是数字文字。默认值为100。
                  </p>
                  <p>当不再需要描述符时，取消分配它以节省内存。否则，在没有更多活动数据库连接时自动完成释放。</p>
                  <p>解除分配声明是：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL DEALLOCATE DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> };</pre><p>使用DESCRIBE语句获取有关准备好的SQL语句的信息。DESCRIBE INPUT描述了已准备好的动态语句的绑定变量。DESCRIBE OUTPUT（默认值）可以给出输出列的数量，类型和长度。简化的语法是：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL DESCRIBE [INPUT | OUTPUT] <span class="italic">sql_statement</span>使用[SQL] DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> };</pre><p>如果您的SQL语句具有输入和输出值，则必须分配两个描述符：一个用于输入，一个用于输出值。如果没有输入值，例如：</p><pre class="oac_no_warn" dir="ltr">SELECT ename，empno FROM emp;</pre><p>那么就不需要输入描述符。</p>
                  <p>使用SET DESCRIPTOR语句指定INSERTS，UPDATES，DELETES和SELECT语句的WHERE子句的输入值。如果尚未对输入描述符进行DESCRIBE，请使用SET DESCRIPTOR设置输入绑定变量的数量（存储在<code class="codeph">COUNT</code> ）：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SET DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> } COUNT = {： <span class="italic">kount</span> | <span class="italic">numeric_literal</span> };</pre><p><code class="codeph">kount</code>可以是主变量或数字文字，例如5。对每个主机变量使用SET DESCRIPTOR语句，至少给出变量的数据源：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SET DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> } VALUE <span class="italic">item_number</span> DATA =： <span class="italic">hv3</span> ;</pre><p>您还可以设置输入主机变量的类型和长度：</p>
                  <div class="infoboxnote" id="GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5__GUID-267F11F1-44A3-4474-87A1-D46DEFE4FA56">
                     <p class="notep1">注意：</p>
                     <p>当TYPE_CODE = ORACLE时，如果未设置TYPE和LENGTH，要么显式使用SET语句，要么通过执行DESCRIBE OUTPUT隐式设置，预编译器将使用从主机变量本身派生的值。当TYPE_CODE = ANSI时，必须使用<a href="ANSI-dynamic-SQL.html#GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5__G1022936" title="ANSI SQL数据类型">表14-1中</a>的值设置TYPE。您还应该设置LENGTH，因为ANSI默认长度可能与主变量的长度不匹配。
                     </p>
                  </div><pre class="oac_no_warn" dir="ltr">EXEC SQL SET DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> } VALUE <span class="italic">item_number</span> TYPE =： <span class="italic">hv1</span> ，LENGTH =： <span class="italic">hv2</span> ，DATA =： <span class="italic">hv3</span> ;</pre><p>我们使用标识符<code class="codeph">hv1</code> ， <code class="codeph">hv2</code>和<code class="codeph">hv3</code>来提醒我们必须由主变量提供值。 <span class="italic">item_number</span>是SQL语句中输入变量的位置。
                  </p>
                  <p>如果TYPE_CODE设置为ANSI，TYPE是从下表中选择的类型代码：</p>
                  <div class="tblformal" id="GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5__G1022936">
                     <p class="titleintable">表14-1 ANSI SQL数据类型</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="ANSI SQL数据类型" width="100%" border="1" summary="ANSI SQL Datatypes" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="71%" id="d75516e370">数据类型</th>
                              <th align="left" valign="bottom" width="29%" id="d75516e373">类型代码</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="71%" id="d75516e378" headers="d75516e370 ">
                                 <p>字符</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d75516e378 d75516e373 ">
                                 <p>1</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="71%" id="d75516e385" headers="d75516e370 ">
                                 <p>字符变化</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d75516e385 d75516e373 ">
                                 <p>12</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="71%" id="d75516e392" headers="d75516e370 ">
                                 <p>日期</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d75516e392 d75516e373 ">
                                 <p>9</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="71%" id="d75516e399" headers="d75516e370 ">
                                 <p>DECIMAL</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d75516e399 d75516e373 ">
                                 <p>3</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="71%" id="d75516e406" headers="d75516e370 ">
                                 <p>双精度</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d75516e406 d75516e373 ">
                                 <p>8</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="71%" id="d75516e413" headers="d75516e370 ">
                                 <p>浮动</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d75516e413 d75516e373 ">
                                 <p>6</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="71%" id="d75516e420" headers="d75516e370 ">
                                 <p>整数</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d75516e420 d75516e373 ">
                                 <p>4</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="71%" id="d75516e427" headers="d75516e370 ">
                                 <p>数字</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d75516e427 d75516e373 ">
                                 <p>2</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="71%" id="d75516e434" headers="d75516e370 ">
                                 <p>真实</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d75516e434 d75516e373 ">
                                 <p>7</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="71%" id="d75516e441" headers="d75516e370 ">
                                 <p>SMALLINT</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d75516e441 d75516e373 ">
                                 <p>五</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>DATA是要输入的主变量的值</p>
                  <p>您还可以设置其他输入值，例如指标，精度和比例。</p>
                  <p>SET DESCRIPTOR语句中的数值必须声明为<code class="codeph">int</code>或<code class="codeph">short int</code> ，但指示符和返回的长度值除外，您必须将其声明为<code class="codeph">short int</code> 。
                  </p>
                  <p>例如，在以下示例中，当您要检索<code class="codeph">empno</code> ，请设置以下值：VALUE = 2，因为<code class="codeph">empno</code>是动态SQL语句中的第二个输出主机变量。主机变量<code class="codeph">empno_typ</code>设置为3（整数的Oracle类型）。主机整数<code class="codeph">empno_len</code>的长度设置为4，即主机变量的大小。DATA等同于主机变量<code class="codeph">empno_data</code> ，它将从数据库表中接收值。代码片段如下：</p><pre class="oac_no_warn" dir="ltr">...char * dyn_statement =“SELECT ename，empno FROM emp WHERE deptno =：deptno_number”; int empno_data; int empno_typ = 3; int empno_len = 4; ...EXEC SQL SET DESCRIPTOR'out'VALUE 2 TYPE =：empno_typ，LENGTH =：empno_len，DATA =：empno_data;</pre><p>设置输入值后，使用输入描述符执行或打开语句。如果语句中有输出值，请在执行FETCH之前设置它们。如果您已执行DESCRIBE OUTPUT，则可能必须测试主机变量的实际类型和长度。DESCRIBE执行产生的内部类型和长度与主机变量外部类型和长度不同。</p>
                  <p>在输出描述符的FETCH之后，使用GET DESCRIPTOR访问返回的数据。我们再次在本章后面展示了一个简化的语法及详细信息：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL GET DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> } VALUE <span class="italic">item_number</span> ： <span class="italic">hv1</span> = DATA，： <span class="italic">hv2</span> = INDICATOR，： <span class="italic">hv3</span> = RETURNED_LENGTH;</pre><p><code class="codeph">desc_nam</code>和<code class="codeph">item_number</code>可以是文字或主变量。描述符名称可以是文字，例如“out”。项目编号可以是数字文字，例如2。
                  </p>
                  <p><code class="codeph">hv1, hv2, and hv3</code>是主变量。它们必须是主变量，而不是文字。示例中只显示了三个。
                  </p>
                  <p>对所有数值使用<span class="bold">long</span> <span class="bold">，</span> <span class="bold">int</span>或<span class="bold">short</span> ，但指标和返回的长度变量除外，它们必须很<code class="codeph">short</code> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5__GUID-825F7CC6-EEFA-41F4-8BB1-F4AD19E3ADBB">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-72068D5F-21E9-4C42-92FC-536437D246FB__G34096" title="Oracle外部数据类型和数据类型代码">表15-2</a>了解Oracle类型代码</p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="ANSI-dynamic-SQL.html#GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D">SET DESCRIPTOR</a> ”</span>有关所有可能的描述符项名称的完整讨论</p>
                        </li>
                        <li>
                           <p><a href="ANSI-dynamic-SQL.html#GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D__G1022893" title="GET DESC的描述符项名称的定义">表14-4</a>列出了可以获得的所有可能返回数据项。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCC4037"></a><div class="props_rev_3"><a id="GUID-AA394CB8-AED3-4941-9E13-1B94C0128724" name="GUID-AA394CB8-AED3-4941-9E13-1B94C0128724"></a><h4 id="LNPCC-GUID-AA394CB8-AED3-4941-9E13-1B94C0128724" class="sect4"><span class="enumeration_section">14.2.1</span>示例代码</h4>
                  <div>
                     <div class="section">
                        <p>以下示例演示了ANSI Dynamic SQL的用法。它分配一个输入描述符（'in'）和一个输出描述符（'out'）来执行SELECT语句。使用SET DESCRIPTOR语句设置输入值。将打开并获取游标，并使用GET DESCRIPTOR语句检索生成的输出值。</p><pre class="oac_no_warn" dir="ltr">...char * dyn_statement =“SELECT ename，empno FROM emp WHERE deptno =：deptno_data”; int deptno_type = 3，deptno_len = 2，deptno_data = 10; int ename_type = 97，ename_len = 30; char ename_data [31]; int empno_type = 3，empno_len = 4; int empno_data; long SQLCODE = 0; ...main（）{/ *放置初步代码，包括连接，这里。* / ...EXEC SQL ALLOCATE DESCRIPTOR'in'; EXEC SQL ALLOCATE DESCRIPTOR'out'; EXEC SQL PREPARE s FROM：dyn_statement; EXEC SQL DESCRIBE INPUT s使用DESCRIPTOR'in'; EXEC SQL SET DESCRIPTOR'在'VALUE 1 TYPE =：deptno_type，LENGTH =：deptno_len，DATA =：deptno_data; EXEC SQL DECLARE c CURSOR FOR s; EXEC SQL OPEN c使用DESCRIPTOR'in'; EXEC SQL DESCRIBE OUTPUT使用DESCRIPTOR'out'; EXEC SQL SET DESCRIPTOR'out'VALUE 1 TYPE =：ename_type，LENGTH =：ename_len，DATA =：ename_data; EXEC SQL SET DESCRIPTOR'out'VALUE 2 TYPE =：empno_type，LENGTH =：empno_len，DATA =：empno_data; EXEC SQL WHENEVER NOT FOUND DO BREAK; while（SQLCODE == 0）{EXEC SQL FETCH c INTO DESCRIPTOR'out'; EXEC SQL GET DESCRIPTOR'out'VALUE 1：ename_data = DATA; EXEC SQL GET DESCRIPTOR'out'VALUE 2：empno_data = DATA; printf（“\ nEname =％s Empno =％s”，ename_data，empno_data）; } EXEC SQL CLOSE c; EXEC SQL DEALLOCATE DESCRIPTOR'in'; EXEC SQL DEALLOCATE DESCRIPTOR'out'; ...}</pre><p>可滚动游标也可以与ANSI动态SQL一起使用。为了将ANSI动态SQL与可滚动游标一起使用，我们在SCROLL模式下将游标DECLARE。使用各种获取方向模式和FETCH语句来访问结果集。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCC4038"></a><div class="props_rev_3"><a id="GUID-D40DCC4E-4B07-4C21-92CA-D060FF716700" name="GUID-D40DCC4E-4B07-4C21-92CA-D060FF716700"></a><h3 id="LNPCC-GUID-D40DCC4E-4B07-4C21-92CA-D060FF716700" class="sect3"><span class="enumeration_section">14.3</span> Oracle扩展</h3>
               <div>
                  <p>接下来将介绍这些扩展：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>SET语句中数据项的引用语义。</p>
                     </li>
                     <li>
                        <p>用于批量操作的数组。</p>
                     </li>
                     <li>
                        <p>支持对象类型，NCHAR列和LOB。</p>
                     </li>
                  </ul>
               </div><a id="LNPCC4039"></a><div class="props_rev_3"><a id="GUID-1F46FC36-3190-4613-A4BF-6B31B2F276F4" name="GUID-1F46FC36-3190-4613-A4BF-6B31B2F276F4"></a><h4 id="LNPCC-GUID-1F46FC36-3190-4613-A4BF-6B31B2F276F4" class="sect4"><span class="enumeration_section">14.3.1</span>参考语义</h4>
                  <div>
                     <p>ANSI标准指定了<span class="italic">值</span>语义。为了提高性能，Oracle已将此标准扩展为包含<span class="italic">引用</span>语义。
                     </p>
                     <p>值语义可以复制主变量数据。引用语义使用主机变量的地址，避免复制。因此，引用语义可以为大量数据提供性能改进。</p>
                     <p>要帮助加快提取速度，请在数据子句之前使用REF关键字：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SET DESCRIPTOR'out'VALUE 1 TYPE =：ename_type，LENGTH =：ename_len，REF DATA =：ename_data; EXEC SQL DESCRIPTOR'out'VALUE 2 TYPE =：empno_type，LENGTH =：empno_len，REF DATA =：empno_data;</pre><p>然后主机变量接收检索结果。不需要GET声明。在每个FETCH之后，检索到的数据直接写入<code class="codeph">ename_data</code>和<code class="codeph">empno_data</code> 。</p>
                     <p><span class="italic">仅</span>在DATA，INDICATOR和RETURNED_LENGTH项之前允许使用REF关键字（这可以随着每一行获取而变化），如此代码片段中所示：</p><pre class="oac_no_warn" dir="ltr">int indi，returnLen; ...EXEC SQL SET DESCRIPTOR'out'VALUE 1 TYPE =：ename_type，LENGTH =：ename_len，REF DATA =：ename_data，REF INDICATOR =：indi，REF RETURNED_LENGTH =：returnLen;</pre><p>每次获取后， <code class="codeph">returnLen</code>保存实际检索的<code class="codeph">ename</code>字段长度，这对<code class="codeph">CHAR</code>或<code class="codeph">VARCHAR2</code>数据很有用。
                     </p>
                     <p><code class="codeph">ename_len</code>将不会收到返回的长度。FETCH语句不会更改它。使用DESCRIBE语句，然后使用GET语句在获取数据行之前找出最大列宽。
                     </p>
                     <p>REF关键字也用于其他类型的SQL语句而不是SELECT，以加快它们的速度。使用引用语义，使用主机变量而不是复制到描述符区域中的值。使用执行SQL语句时的主变量数据，而不是SET时的数据。这是一个例子：</p><pre class="oac_no_warn" dir="ltr">int x = 1; EXEC SQL SET DESCRIPTOR'value'VALUE 1 DATA =：x; EXEC SQL SET DESCRIPTOR'引用'VALUE 1 REF DATA =：x; x = 2; EXEC SQL EXECUTE s使用DESCRIPTOR'值'; / *将使用x = 1 * / EXEC SQL EXECUTE s使用DESCRIPTOR'引用'; / *将使用x = 2 * /</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="ANSI-dynamic-SQL.html#GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D">设置描述符</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4040"></a><div class="props_rev_3"><a id="GUID-E56A766C-79F9-4AA7-8DF1-833DF8191296" name="GUID-E56A766C-79F9-4AA7-8DF1-833DF8191296"></a><h4 id="LNPCC-GUID-E56A766C-79F9-4AA7-8DF1-833DF8191296" class="sect4"><span class="enumeration_section">14.3.2</span>关于使用数组进行批量操作</h4>
                  <div>
                     <p>Oracle通过提供批量操作来扩展ANSI动态SQL。要使用批量操作，请使用带有数组大小的<code class="codeph">FOR</code>子句指定输入数据量或要处理的行数。
                     </p>
                     <p><code class="codeph">FOR</code>子句在ALLOCATE语句中用于提供最大数据量或行数。例如，要使用最大数组大小100：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FOR 100 ALLOCATE DESCRIPTOR'out';</pre><p>要么：</p><pre class="oac_no_warn" dir="ltr">int array_size = 100; ...EXEC SQL FOR：array_size ALLOCATE DESCRIPTOR'out';</pre><p>然后在访问描述符的后续语句中使用<code class="codeph">FOR</code>子句。在输出描述符中，FETCH语句的数组大小必须等于或小于ALLOCATE语句中已使用的数组大小：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FOR 20 FETCH c1使用DESCRIPTOR'out';</pre><p>获取DATA，INDICATOR或RETURNED_LENGTH值的同一描述符的后续GET语句必须使用与FETCH语句相同的数组大小。</p><pre class="oac_no_warn" dir="ltr">int val_data [20];简短的val_indi [20]; ...EXEC SQL FOR 20获取DESCRIPTOR'输出'值1：val_data = DATA，：val_indi = INDICATOR;</pre><p>但是，引用其他不同行的项的GET语句（如LENGTH，TYPE和COUNT） <span class="italic">不得</span>使用<code class="codeph">FOR</code>子句：</p><pre class="oac_no_warn" dir="ltr">int cnt，len; ...EXEC SQL GET DESCRIPTOR'out'：cnt = COUNT; EXEC SQL GET DESCRIPTOR'out'VALUE 1：len = LENGTH;</pre><p>具有引用语义的SET语句也是如此。在FETCH之前并使用DATA，INDICATOR或RETURNED_LENGTH的引用语义的SET语句必须与FETCH具有相同的数组大小：</p><pre class="oac_no_warn" dir="ltr">int ref_data [20];简短的ref_indi [20]; ...EXEC SQL FOR 20 SET DESCRIPTOR'out'VALUE 1 REF DATA =：ref_data，REF INDICATOR =：ref_indi;</pre><p>同样，对于用于输入的描述符，例如，要插入一批行，EXECUTE或OPEN语句必须使用等于或小于ALLOCATE语句中使用的大小的数组大小。对于值和参考语义，访问DATA，INDICATOR或RETURNED_LENGTH的SET语句必须使用与EXECUTE语句中相同的数组大小。</p>
                     <p>FOR子句从不在DEALLOCATE或PREPARE语句中使用。</p>
                     <p>下面的代码示例说明了没有输出描述符的批量操作（没有输出，只有要插入到表<code class="codeph">emp</code>输入）。<code class="codeph">COUNT</code>值为2（在INSERT语句中有两个主变量， <code class="codeph">ename_arr</code>和<code class="codeph">empno_arr</code> ）。数据数组<code class="codeph">ename_arr</code>包含三个字符串：“Tom”，“Dick”和“Harry”。对于第二个元素，指标数组<code class="codeph">ename_ind</code>的值为-1;因此将插入NULL而不是“Dick”。数据数组<code class="codeph">empno_arr</code>包含三个员工编号。DML返回子句可用于确认插入的实际名称。
                     </p><pre class="oac_no_warn" dir="ltr">...char * dyn_statement =“INSERT INTO emp（ename）VALUES（：ename_arr）”; char ename_arr [3] [6] = {Tom“，”Dick“，”Harry“}; short ename_ind [3] = {0，-1,0}; int ename_len = 6，ename_type = 97，cnt = 2; int empno_arr [3] = {8001,8002,8003}; int empno_len = 4; int empno_type = 3; int array_size = 3; EXEC SQL FOR：array_size ALLOCATE DESCRIPTOR'in';'EXEC SQL SET DESCRIPTOR'in'COUNT =： cnt; EXEC SQL SET DESCRIPTOR'在'VALUE 1 TYPE =：ename_type，LENGTH =：ename_len; EXEC SQL SET DESCRIPTOR'在'VALUE 2 TYPE =：empno_type，LENGTH =：empno_len; EXEC SQL FOR：array_size SET DESCRIPTOR'in' VALUE 1 DATA =：ename_arr，INDICATOR =：ename_ind; EXEC SQL FOR：array_size SET DESCRIPTOR'in'VALUE 2 DATA =：empno_arr; EXEC SQL PREPARE s FROM：dyn_statement; EXEC SQL FOR：array_size EXECUTE s使用DESCRIPTOR'in'; ...
</pre><p>上面的代码将插入以下值：</p><pre class="oac_no_warn" dir="ltr">EMPNO ENAME 8001 Tom 8002 8003 Harry</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="embedded-SQL.html#GUID-A44FA873-61D5-42AF-A93E-1CA2041D9A3D">DML返回条款</a></li>
                           <li><a href="host-arrays.html#GUID-A5ABD676-CF67-4EFF-82A4-82D94A653DD0">关于使用FOR子句</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4041"></a><div class="props_rev_3"><a id="GUID-E2986ED3-1776-4DE7-AD3A-DED02C10CC90" name="GUID-E2986ED3-1776-4DE7-AD3A-DED02C10CC90"></a><h4 id="LNPCC-GUID-E2986ED3-1776-4DE7-AD3A-DED02C10CC90" class="sect4"><span class="enumeration_section">14.3.3</span>支持结构数组</h4>
                  <div>
                     <p>必须将HOST_STRIDE_LENGTH设置为结构的大小，将INDICATOR_STRIDE_LENGTH设置为指示器结构的大小，将RETURNED_LENGTH_STRIDE设置为返回的长度结构的大小。</p>
                     <p>ANSI动态SQL支持结构数组，但旧的Oracle动态SQL <span class="italic">不</span>支持这些结构数组。</p>
                  </div>
               </div><a id="LNPCC4042"></a><div class="props_rev_3"><a id="GUID-F7D9D346-586F-4743-A4A7-F69F2366D5BB" name="GUID-F7D9D346-586F-4743-A4A7-F69F2366D5BB"></a><h4 id="LNPCC-GUID-F7D9D346-586F-4743-A4A7-F69F2366D5BB" class="sect4"><span class="enumeration_section">14.3.4</span>支持对象类型</h4>
                  <div>
                     <p>对于您自己定义的对象类型，请使用等于108的Oracle TYPE。对于对象类型列，请使用DESCRIBE语句获取USER_DEFINED_TYPE_VERSION，USER_DEFINED_TYPE_NAME，USER_DEFINED_TYPE_NAME_LENGTH，USER_DEFINED_TYPE_SCHEMA和USER_DEFINED_TYPE_SCHEMA_LENGTH。</p>
                     <p>如果不使用DESCRIBE语句来检索这些值，则必须通过SET DESCRIPTOR语句自行设置它们。</p>
                  </div>
               </div>
            </div><a id="LNPCC4044"></a><a id="LNPCC4045"></a><a id="LNPCC4043"></a><div class="props_rev_3"><a id="GUID-5473577F-3537-4DD6-B879-7DB1411EB7E8" name="GUID-5473577F-3537-4DD6-B879-7DB1411EB7E8"></a><h3 id="LNPCC-GUID-5473577F-3537-4DD6-B879-7DB1411EB7E8" class="sect3"><span class="enumeration_section">14.4</span> ANSI动态SQL预编译器选项</h3>
               <div>
                  <div class="section">
                     <p>宏选项<a id="d75516e932" class="indexterm-anchor"></a> MODE设置ANSI兼容性特性并控制许多功能。它可以具有值ANSI或ORACLE。对于单个功能，有微量选项可以覆盖MODE设置。
                     </p>
                     <p>预编译器微选项<a id="d75516e939" class="indexterm-anchor"></a> <span class="italic">DYNAMIC</span>指定动态SQL中的描述符行为。预编译器微选项<a id="d75516e946" class="indexterm-anchor"></a> <span class="italic">TYPE_CODE</span>指定是使用ANSI还是Oracle数据类型代码。
                     </p>
                     <p>当宏选项MODE设置为ANSI时，微选项DYNAMIC自动变为ANSI。当MODE设置为ORACLE时，DYNAMIC变为ORACLE。</p>
                     <p>DYNAMIC和TYPE_CODE不能内联使用。</p>
                     <p>此表描述了功能以及DYNAMIC设置如何影响它们。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-5473577F-3537-4DD6-B879-7DB1411EB7E8__G1022849">
                     <p class="titleintable">表14-2 DYNAMIC选项设置</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DYNAMIC选项设置" width="100%" border="1" summary="DYNAMIC Option Settings" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="27%" id="d75516e970">功能</th>
                              <th align="left" valign="bottom" width="37%" id="d75516e973">DYNAMIC = ANSI</th>
                              <th align="left" valign="bottom" width="37%" id="d75516e976">DYNAMIC = ORACLE</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d75516e981" headers="d75516e970 ">
                                 <p>描述符创建。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e981 d75516e973 ">
                                 <p>必须使用ALLOCATE语句。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e981 d75516e976 ">
                                 <p>必须使用函数SQLSQLDAAlloc（）。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d75516e991" headers="d75516e970 ">
                                 <p>描述符破坏。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e991 d75516e973 ">
                                 <p>可以使用DEALLOCATE语句。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e991 d75516e976 ">
                                 <p>可以使用函数SQLLDAFree（）。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d75516e1001" headers="d75516e970 ">
                                 <p>检索数据。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e1001 d75516e973 ">
                                 <p>可以使用FETCH和GET语句。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e1001 d75516e976 ">
                                 <p>必须只使用FETCH语句。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d75516e1011" headers="d75516e970 ">
                                 <p>设置输入数据。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e1011 d75516e973 ">
                                 <p>可以使用DESCRIBE INPUT语句。必须使用SET语句。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e1011 d75516e976 ">
                                 <p>必须在代码中设置描述符值。必须使用DESCRIBE BIND VARIABLES语句。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d75516e1021" headers="d75516e970 ">
                                 <p>描述符表示。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e1021 d75516e973 ">
                                 <p>单引号文字或包含描述符名称的主机标识符。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e1021 d75516e976 ">
                                 <p>主机变量，指向SQLDA的指针。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d75516e1031" headers="d75516e970 ">
                                 <p>可用的数据类型。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e1031 d75516e973 ">
                                 <p>除BIT和所有Oracle类型之外的所有ANSI类型。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e1031 d75516e976 ">
                                 <p>Oracle类型，除了对象，LOB，结构数组和游标变量。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>微型选项TYPE_CODE由预编译器设置为与宏选项MODE相同的设置。如果DYNAMIC等于ANSI，TYPE_CODE只能等于ANSI。</p>
                     <p>以下是TYPE_CODE设置对应的功能：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-5473577F-3537-4DD6-B879-7DB1411EB7E8__G1022881">
                     <p class="titleintable">表14-3 TYPE_CODE选项设置</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="TYPE_CODE选项设置" width="100%" border="1" summary="TYPE_CODE Option Settings" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="27%" id="d75516e1056">功能</th>
                              <th align="left" valign="bottom" width="37%" id="d75516e1059">TYPE_CODE = ANSI</th>
                              <th align="left" valign="bottom" width="37%" id="d75516e1062">TYPE_CODE = ORACLE</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d75516e1067" headers="d75516e1056 ">
                                 <p>在动态SQL中输入和返回的数据类型代码编号。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e1067 d75516e1059 ">
                                 <p>当ANSI类型存在时，使用ANSI代码。否则，请使用Oracle代码编号的否定值。</p>
                                 <p>仅在DYNAMIC = ANSI时有效。</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d75516e1067 d75516e1062 ">
                                 <p>使用Oracle代码。</p>
                                 <p>无论DYNAMIC的设置如何，都可以使用。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="precompiler-options.html#GUID-639D5AF6-3CC0-4F9A-A501-DF9C791388B5">模式</a></li>
                        <li><a href="advanced-topics.html#GUID-3B79020D-735A-47A9-84DA-401D86E8F712">SQLLIB公共函数的新名称</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCC4046"></a><div class="props_rev_3"><a id="GUID-C0D00130-3193-4038-A730-98471BF8E259" name="GUID-C0D00130-3193-4038-A730-98471BF8E259"></a><h3 id="LNPCC-GUID-C0D00130-3193-4038-A730-98471BF8E259" class="sect3"><span class="enumeration_section">14.5</span>动态SQL语句的完整语法</h3>
               <div>
                  <p>有关所有这些语句的更多详细信息，请参阅<a href="embedded-SQL-statements-and-directives.html#GUID-0ABBFB3E-F2BA-4906-8DEF-53EA78D758B5">嵌入式SQL语句和指令</a> 。
                  </p>
               </div><a id="LNPCC4048"></a><a id="LNPCC4049"></a><a id="LNPCC4050"></a><a id="LNPCC4051"></a><a id="LNPCC4047"></a><div class="props_rev_3"><a id="GUID-1D870984-33FA-4F37-B8B6-DB8026205334" name="GUID-1D870984-33FA-4F37-B8B6-DB8026205334"></a><h4 id="LNPCC-GUID-1D870984-33FA-4F37-B8B6-DB8026205334" class="sect4"><span class="enumeration_section">14.5.1</span>分配描述<span class="enumeration_section">符</span></h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-1D870984-33FA-4F37-B8B6-DB8026205334__GUID-B39644BB-378D-461A-A16A-40C60A601A4A">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此语句分配SQL描述符区域。提供描述符和主机绑定项的最大出现次数以及数组大小。此语句仅适用于ANSI动态SQL。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1D870984-33FA-4F37-B8B6-DB8026205334__GUID-CE1793C0-45CF-4103-98EB-AAE8D0400792">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [FOR [：] <span class="italic">array_size</span> ] ALLOCATE DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> } [WITH MAX <span class="italic">occurrence</span> ];</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1D870984-33FA-4F37-B8B6-DB8026205334__GUID-EA40B444-4862-468A-8764-99E132096121">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>ARRAY_SIZE</p>
                        <p>这是一个支持数组处理的可选子句（它是Oracle扩展）。它告诉预编译器描述符可用于数组处理。</p>
                        <p>全球|本地</p>
                        <p>如果未输入，则可选范围子句默认为LOCAL。只能在分配本地描述符的文件中访问本地描述符。全局描述符可以在编译单元的任何模块中使用。</p>
                        <p>desc_nam</p>
                        <p>描述符名称。本地描述符在模块中必须是唯一的。如果先前已分配描述符但未解除分配，则会生成运行时错误。全局描述符对于应用程序必须是唯一的，否则会导致运行时错误。</p>
                        <p>事件</p>
                        <p>描述符中可能的最大主机变量数。它必须是0到64K之间的整数常量，否则返回错误。默认值为100。该条款是可选的。如果预编译器不符合这些规则，则会导致错误。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1D870984-33FA-4F37-B8B6-DB8026205334__GUID-A39245B0-8031-436A-BA14-3EA4F264D6B6">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">使用MAX 50执行SQL ALLOCATE DESCRIPTOR'SELDES'; EXEC SQL FOR：批处理ALLOCATE DESCRIPTOR GLOBAL：绑定与MAX 25;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4053"></a><a id="LNPCC4054"></a><a id="LNPCC4055"></a><a id="LNPCC4056"></a><a id="LNPCC4052"></a><div class="props_rev_3"><a id="GUID-39530428-24E2-4576-941B-C9859616DEBB" name="GUID-39530428-24E2-4576-941B-C9859616DEBB"></a><h4 id="LNPCC-GUID-39530428-24E2-4576-941B-C9859616DEBB" class="sect4"><span class="enumeration_section">14.5.2</span> DEALLOCATE DESCRIPTOR</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-39530428-24E2-4576-941B-C9859616DEBB__GUID-D43D4476-2898-4601-A9B9-EBA1998827BF">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此语句释放先前已分配的SQL描述符区域以释放内存。此语句仅用于ANSI动态SQL。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-39530428-24E2-4576-941B-C9859616DEBB__GUID-9721A988-93B6-4889-801C-6D357A64B96E">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL DEALLOCATE DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> };</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-39530428-24E2-4576-941B-C9859616DEBB__GUID-D195059A-B377-498C-9503-77E3E748EC48">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>全球|本地</p>
                        <p>如果未输入，则可选范围子句默认为LOCAL。只能在分配本地描述符的文件中访问本地描述符。全局描述符可以在编译单元的任何模块中使用。</p>
                        <p>desc_nam</p>
                        <p>如果尚未分配具有相同名称和作用域的描述符，或者已经分配和取消分配了描述符，则会导致运行时错误。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-39530428-24E2-4576-941B-C9859616DEBB__GUID-E26FEDE9-1710-4D36-8CD6-99DF36F7F64B">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL DEALLOCATE DESCRIPTOR GLOBAL'SELDES'; EXEC SQL DEALLOCATE DESCRIPTOR：binddes;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4058"></a><a id="LNPCC4059"></a><a id="LNPCC4060"></a><a id="LNPCC4061"></a><a id="LNPCC4062"></a><a id="LNPCC4063"></a><a id="LNPCC4064"></a><a id="LNPCC4065"></a><a id="LNPCC4057"></a><div class="props_rev_3"><a id="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D" name="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D"></a><h4 id="LNPCC-GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D" class="sect4"><span class="enumeration_section">14.5.3</span>获取描述<span class="enumeration_section">符</span></h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D__GUID-7E30C062-D5B8-4B4F-91A7-31E224BCE03D">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>用于从SQL描述符区域获取信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D__GUID-9E765B7D-8CDA-4895-BD87-EEB9EFBB074C">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [FOR [：] <span class="italic">array_size</span> ]获取DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> } {： <span class="italic">hv0</span> = COUNT | VALUE <span class="italic">item_number</span> ： <span class="italic">hv1</span> = <span class="italic">item_name1</span> [{，： <span class="italic">hvN</span> = <span class="italic">item_nameN</span> }]};</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D__GUID-6F1F078A-94A5-49E5-9925-F2172DA3181F">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>ARRAY_SIZE</p>
                        <p><code class="codeph">FOR array_size</code>是可选的Oracle扩展。 <code class="codeph">array_size</code>必须等于FETCH语句中的字段<code class="codeph">array_size</code> 。
                        </p>
                        <p>计数</p>
                        <p>绑定变量的总数。</p>
                        <p>desc_nam</p>
                        <p>描述符名称。</p>
                        <p>全球|本地</p>
                        <p>如果未输入，则可选范围子句默认为LOCAL。只能在分配本地描述符的文件中访问本地描述符。全局描述符可以在编译单元的任何模块中使用。</p>
                        <p>VALUE item_number</p>
                        <p>项目在SQL语句中的位置。 <code class="codeph">item_number</code>可以是变量或常量。如果<code class="codeph">item_number</code>大于<code class="codeph">COUNT</code> ，则返回“未找到数据”条件。 <code class="codeph">item_number</code>必须大于0。
                        </p>
                        <p>hv1 .. hvN</p>
                        <p>这些是传输值的主变量。</p>
                        <p>item_name1 .. item_nameN</p>
                        <p>描述符项名称对应于主变量。可能的ANSI描述符项名称是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D__G1022893">
                        <p class="titleintable">表14-4 GET DESCRIPTOR的描述符项名称的定义</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="GET DESCRIPTOR的描述符项名称的定义" width="100%" border="1" summary="Definitions of Descriptor Item Names for GET DESC" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d75516e1409">描述符项目名称</th>
                                 <th align="left" valign="bottom" width="69%" id="d75516e1413">含义</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1419" headers="d75516e1409 ">
                                    <p><code class="codeph">类型</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1419 d75516e1413 ">
                                    <p>如果ANSI数据类型不在表中且TYPE_CODE = ANSI，则使用Oracle类型代码的负值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1427" headers="d75516e1409 ">
                                    <p><code class="codeph">长度</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1427 d75516e1413 ">
                                    <p>列中的数据长度：NCHAR的字符数;否则以字节为单位由DESCRIBE OUTPUT设置。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1435" headers="d75516e1409 ">
                                    <p><code class="codeph">OCTET_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1435 d75516e1413 ">
                                    <p>以字节为单位的数据长度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1443" headers="d75516e1409 ">
                                    <p><code class="codeph">RETURNED_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1443 d75516e1413 ">
                                    <p>FETCH后的实际数据长度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1451" headers="d75516e1409 ">
                                    <p><code class="codeph">RETURNED_OCTET_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1451 d75516e1413 ">
                                    <p>返回数据的长度，以字节为单位。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1459" headers="d75516e1409 ">
                                    <p><code class="codeph">精确</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1459 d75516e1413 ">
                                    <p>位数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1467" headers="d75516e1409 ">
                                    <p><code class="codeph">规模</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1467 d75516e1413 ">
                                    <p>对于精确数字类型，小数点右侧的位数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1475" headers="d75516e1409 ">
                                    <p><code class="codeph">NULLABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1475 d75516e1413 ">
                                    <p>如果为1，则列可以具有NULL值。如果为0，则列不能具有NULL值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1483" headers="d75516e1409 ">
                                    <p><code class="codeph">指示符</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1483 d75516e1413 ">
                                    <p>相关指标值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1491" headers="d75516e1409 ">
                                    <p><code class="codeph">数据</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1491 d75516e1413 ">
                                    <p>数据值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1499" headers="d75516e1409 ">
                                    <p><code class="codeph">名称</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1499 d75516e1413 ">
                                    <p>列名。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1508" headers="d75516e1409 ">
                                    <p><code class="codeph">CHARACTER_SET_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1508 d75516e1413 ">
                                    <p>列的字符集。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>Oracle附加描述符项名称是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D__G1022973">
                        <p class="titleintable">表14-5 GET DESCRIPTOR的描述符项名称定义的Oracle扩展</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="用于GET DESCRIPTOR的描述符项名称定义的Oracle扩展" width="100%" border="1" summary="Oracle Extensions to Definitions of Descriptor Item Names for GET DESCRIPTOR" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d75516e1528">描述符项目名称</th>
                                 <th align="left" valign="bottom" width="69%" id="d75516e1532">含义</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1538" headers="d75516e1528 ">
                                    <p><code class="codeph">NATIONAL_CHARACTER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1538 d75516e1532 ">
                                    <p>如果是2，NCHAR或NVARCHAR2。如果是1，字符。如果为0，则为非字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1546" headers="d75516e1528 ">
                                    <p><code class="codeph">INTERNAL_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1546 d75516e1532 ">
                                    <p>内部长度，以字节为单位。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1554" headers="d75516e1528 ">
                                    <p><code class="codeph">HOST_STRIDE_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1554 d75516e1532 ">
                                    <p>主机结构的大小（以字节为单位）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1562" headers="d75516e1528 ">
                                    <p><code class="codeph">INDICATOR_STRIDE_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1562 d75516e1532 ">
                                    <p>指标结构的大小（以字节为单位）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1570" headers="d75516e1528 ">
                                    <p><code class="codeph">RETURNED_LENGTH_STRIDE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1570 d75516e1532 ">
                                    <p>返回长度结构的大小（以字节为单位）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1578" headers="d75516e1528 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_VERSION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1578 d75516e1532 ">
                                    <p>用于对象类型版本的字符表示。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1586" headers="d75516e1528 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1586 d75516e1532 ">
                                    <p>对象类型的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1594" headers="d75516e1528 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_NAME_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1594 d75516e1532 ">
                                    <p>对象类型名称的长度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1602" headers="d75516e1528 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_SCHEMA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1602 d75516e1532 ">
                                    <p>用于对象模式的字符表示。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1610" headers="d75516e1528 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_SCHEMA_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1610 d75516e1532 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_SCHEMA</code>长度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1621" headers="d75516e1528 ">
                                    <p><code class="codeph">NATIONAL_CHARACTER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1621 d75516e1532 ">
                                    <p>如果是2，NCHAR或NVARCHAR2。如果是1，字符。如果为0，则为非字符。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D__GUID-3BF2EC36-3B25-4100-B4B9-FEA837ECF312">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在GET DESCRIPTOR语句中使用FOR子句，该语句仅包含DATA，INDICATOR和RETURNED_LENGTH项。</p>
                        <p>内部类型由DESCRIBE OUTPUT语句提供。对于输入和输出，必须将类型设置为主变量的外部类型。</p>
                        <p>TYPE是ANSI SQL数据类型代码。如果ANSI类型不在表中，请使用Oracle类型代码的负值。</p>
                        <p>LENGTH包含具有固定宽度国家字符集的字段的列长度（以字符为单位）。其他字符列以字节为单位。它在DESCRIBE OUTPUT中设置。</p>
                        <p>RETURNED_LENGTH是FETCH语句设置的实际数据长度。它是以LENGTH描述的字节或字符。字段OCTET_LENGTH和RETURNED_OCTET_LENGTH是以字节为单位的长度。</p>
                        <p>NULLABLE = 1表示该列可以具有NULLS; NULLABLE = 0表示它不能。</p>
                        <p>CHARACTER_SET_NAME仅对字符列有意义。对于其他类型，它是未定义的。DESCRIBE OUTPUT语句获取该值。</p>
                        <p>DATA和INDICATOR是该列的数据值和指示器状态。如果data = NULL，但未请求指示符，则在运行时生成错误（“DATA EXCEPTION，NULL VALUE，NO INDICATOR PARAMETER”）。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D__GUID-2776F1B0-362A-4DF0-BE2E-3C8EE26934C0">特定于Oracle的描述符项目名称</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p></p>
                        <p>如果列是NCHAR或NVARCHAR2列，则NATIONAL_CHARACTER = 2。如果列是字符（但不是国家字符）列，则此项目设置为1。如果是非字符列，则在执行DESCRIBE OUTPUT后该项为0。</p>
                        <p>INTERNAL_LENGTH用于与Oracle动态方法4兼容。它与Oracle SQL描述符区域的length成员具有相同的值。</p>
                        <p>DESCRIBE OUTPUT语句不返回以下三项。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>HOST_STRIDE_LENGTH是主变量结构的大小。</p>
                           </li>
                           <li>
                              <p>INDICATOR_STRIDE_LENGTH是指标变量结构的大小。</p>
                           </li>
                           <li>
                              <p>RETURNED_LENGTH_STRIDE是返回长度变量的结构大小</p>
                           </li>
                        </ul>
                        <p>当预编译器选项OBJECTS设置为YES时，以下项目仅适用于对象类型。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>USER_DEFINED_TYPE_VERSION包含类型版本的字符表示形式。</p>
                           </li>
                           <li>
                              <p>USER_DEFINED_TYPE_NAME是该类型名称的字符表示形式。</p>
                           </li>
                           <li>
                              <p>USER_DEFINED_TYPE_NAME_LENGTH是类型名称的长度（以字节为单位）。</p>
                           </li>
                           <li>
                              <p>USER_DEFINED_TYPE_SCHEMA是类型的模式名称的字符表示形式。</p>
                           </li>
                           <li>
                              <p>USER_DEFINED_TYPE_SCHEMA_LENGTH是类型的模式名称的字符长度。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D__GUID-C6C2F695-D65E-4D85-8A6F-878BAD701C19">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL GET DESCRIPTOR：binddes：n = COUNT; EXEC SQL获取描述符'SELDES'的值1：t = TYPE，：l = LENGTH; EXEC SQL FOR：批处理获取描述符本地'SELDES'值：sel_item_no：i = INDICATOR，：v = DATA;</pre><div class="infoboxnotealso" id="GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D__GUID-7FE90F60-8143-4C88-B60E-1839CFF0B11A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="ANSI-dynamic-SQL.html#GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5__G1022936" title="ANSI SQL数据类型">表14-1</a>了解ANSI类型代码</p>
                              </li>
                              <li>
                                 <p>Oracle <span class="q"><a href="Oracle-dynamic-SQL-method-4.html#GUID-72068D5F-21E9-4C42-92FC-536437D246FB__G34096" title="Oracle External Datatypes and Datatype Codes">表格</a></span>代码的<span class="q">“ <a href="Oracle-dynamic-SQL-method-4.html#GUID-72068D5F-21E9-4C42-92FC-536437D246FB__G34096" title="Oracle外部数据类型和数据类型代码">表15-2</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-B516B7C8-1859-4A54-B15D-DF0C3D3C474D">Oracle动态SQL：方法4</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4067"></a><a id="LNPCC4068"></a><a id="LNPCC4069"></a><a id="LNPCC4070"></a><a id="LNPCC4071"></a><a id="LNPCC4072"></a><a id="LNPCC4073"></a><a id="LNPCC4066"></a><div class="props_rev_3"><a id="GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D" name="GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D"></a><h4 id="LNPCC-GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D" class="sect4"><span class="enumeration_section">14.5.4</span>设置描述符</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D__GUID-3A20788F-A0E6-4ABA-A736-F69E0817406E">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此语句从主机变量设置描述符区域中的信息。SET DESCRIPTOR语句<span class="italic">仅</span>支持项名称的主机变量。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D__GUID-17F40BD0-7176-4052-8818-557598EECEB3">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [FOR <span class="italic">array_size</span> ] SET DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> } {COUNT =： <span class="italic">hv0</span> | VALUE <span class="italic">item_number</span> [REF] <span class="italic">item_name1</span> =： <span class="italic">hv1</span> [{，[REF] <span class="italic">item_nameN</span> =： <span class="italic">hvN</span> }]};</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D__GUID-891F8D42-FDE1-4165-B14A-9912FC7CFDE7">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>ARRAY_SIZE</p>
                        <p>此可选Oracle子句允许在仅设置描述符项DATA，INDICATOR和RETURNED_LENGTH时使用数组。您不能在包含FOR子句的SET DESCRIPTOR中使用其他项。所有主机变量数组大小必须匹配。对用于FETCH语句的SET语句使用相同的数组大小。</p>
                        <p>全球|本地</p>
                        <p>如果未输入，则可选范围子句默认为LOCAL。只能在分配本地描述符的文件中访问本地描述符。全局描述符可以在编译单元的任何模块中使用。</p>
                        <p>desc_nam</p>
                        <p>描述符名称。它遵循ALLOCATE DESCRIPTOR中的规则。</p>
                        <p>计数</p>
                        <p>绑定（输入）或定义（输出）变量的数量。</p>
                        <p>VALUE item_number</p>
                        <p>位于主机变量的动态SQL语句中。</p>
                        <p>hv1 .. hvN</p>
                        <p>您设置的主变量（不是常量）。</p>
                        <p>item_nameI</p>
                        <p>与GET DESCRIPTOR语法类似， <code class="codeph">desc_item_name</code>可以采用这些值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D__G1045758">
                        <p class="titleintable">表14-6 SET DESCRIPTOR的描述符项名称</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SET DESCRIPTOR的描述符项目名称" width="100%" border="1" summary="Descriptor Item Names for SET DESCRIPTOR" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d75516e1839">描述符项目名称</th>
                                 <th align="left" valign="bottom" width="69%" id="d75516e1843">含义</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1849" headers="d75516e1839 ">
                                    <p><code class="codeph">类型</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1849 d75516e1843 ">
                                    <p>如果没有相应的ANSI类型，请使用Oracle类型的负值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1857" headers="d75516e1839 ">
                                    <p><code class="codeph">长度</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1857 d75516e1843 ">
                                    <p>列中的最大数据长度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1865" headers="d75516e1839 ">
                                    <p><code class="codeph">指示符</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1865 d75516e1843 ">
                                    <p>相关指标值。设置参考语义。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1873" headers="d75516e1839 ">
                                    <p><code class="codeph">数据</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1873 d75516e1843 ">
                                    <p>要设置的数据的值。设置参考语义。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1881" headers="d75516e1839 ">
                                    <p><code class="codeph">CHARACTER_SET_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1881 d75516e1843 ">
                                    <p>列的字符集。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1889" headers="d75516e1839 ">
                                    <p><code class="codeph">类型</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1889 d75516e1843 ">
                                    <p>如果没有相应的ANSI类型，请使用Oracle类型的负值。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>有关ANSI类型代码，请<a href="ANSI-dynamic-SQL.html#GUID-B4F31F00-0589-4E65-B245-6CA28F6A85D5__G1022936" title="ANSI SQL数据类型">参见表14-1</a> ;有关Oracle类型代码，请参阅<span class="q">“ <a href="Oracle-dynamic-SQL-method-4.html#GUID-72068D5F-21E9-4C42-92FC-536437D246FB__G34096" title="Oracle外部数据类型和数据类型代码">表15-2</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>描述符项名称的Oracle扩展是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D__G1045970">
                        <p class="titleintable">表14-7 SET DESCRIPTOR的描述符项目名称的Oracle扩展</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="用于SET DESCRIPTOR的描述符项目名称的Oracle扩展" width="100%" border="1" summary="Oracle Extensions to Descriptor Item Names for SET DESCRIPTOR" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d75516e1923">描述符项目名称</th>
                                 <th align="left" valign="bottom" width="69%" id="d75516e1927">含义</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1933" headers="d75516e1923 ">
                                    <p><code class="codeph">RETURNED_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1933 d75516e1927 ">
                                    <p>FETCH后返回的长度。设置是否使用引用语义。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1941" headers="d75516e1923 ">
                                    <p><code class="codeph">NATIONAL_CHARACTER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1941 d75516e1927 ">
                                    <p>当输入主机变量是NCHAR或NVARCHAR2类型时，设置为2。</p>
                                    <p>国家字符设置清除时设置为0。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1951" headers="d75516e1923 ">
                                    <p><code class="codeph">HOST_STRIDE_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1951 d75516e1927 ">
                                    <p>主机变量struct的大小（以字节为单位）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1959" headers="d75516e1923 ">
                                    <p><code class="codeph">INDICATOR_STRIDE_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1959 d75516e1927 ">
                                    <p>指标变量的大小（以字节为单位）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1967" headers="d75516e1923 ">
                                    <p><code class="codeph">RETURNED_LENGTH_STRIDE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1967 d75516e1927 ">
                                    <p>返回长度结构的大小（以字节为单位）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1975" headers="d75516e1923 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1975 d75516e1927 ">
                                    <p>对象类型的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1983" headers="d75516e1923 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_NAME_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1983 d75516e1927 ">
                                    <p>对象类型名称的长度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1991" headers="d75516e1923 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_SCHEMA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1991 d75516e1927 ">
                                    <p>用于对象模式的字符表示。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d75516e1999" headers="d75516e1923 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_SCHEMA_LENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d75516e1999 d75516e1927 ">
                                    <p><code class="codeph">USER_DEFINED_TYPE_SCHEMA</code>长度。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D__GUID-12D30B30-7BDE-4334-A58D-4E1433C0545E">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>引用语义是另一个可选的Oracle扩展，可以提高性能。在这些描述符项名称之前使用关键字REF：DATA，INDICATOR，RETURNED_LENGTH。使用REF关键字时，不需要使用GET语句。复杂数据类型（对象和集合类型，结构数组和DML返回子句）都需要SET DESCRIPTOR的REF形式。</p>
                        <p>如果程序将DESCRIPTOR重用于另一个SQL，则DESCRIPTOR的旧值仍然存在。</p>
                        <p>当使用REF时，在SET中使用关联的主机变量本身。在这种情况下不需要GET。只能在使用REF语义而不是值语义时设置RETURNED_LENGTH。</p>
                        <p>对FETCH中使用的SET或GET语句使用相同的数组大小。</p>
                        <p>对于NCHAR主机输入值，将NATIONAL_CHAR字段设置为2。</p>
                        <p>当DESCRIPTOR用于旧SQL中的NCHAR主机输入值时，将NATIONAL_CHARACTER字段设置为0。</p>
                        <p>设置对象类型的特征时，必须设置USER_DEFINED_TYPE_NAME和USER_DEFINED_TYPE_NAME_LENGTH。</p>
                        <p>如果省略，则USER_DEFINED_TYPE_SCHEMA和USER_DEFINED_TYPE_SCHEMA_LENGTH默认为当前连接。</p>
                        <p>将CHARACTER_SET_NAME设置为UTF16以获得客户端Unicode支持。数据将采用UCS2编码，RETURNED_LENGTH采用CHARS。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D__GUID-BF426287-1491-4159-8072-A5BBAA6B74A7">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">int bindno = 2; short indi = -1; char data =“ignore”; int batch = 1; EXEC SQL FOR：批处理ALLOCATE DESCRIPTOR'binddes'; EXEC SQL SET DESCRIPTOR GLOBAL：binddes COUNT = 3; EXEC SQL FOR：batch SET DESCRIPTOR：bindes VALUE：bindno INDICATOR =：indi，DATA =：data; ...</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="ANSI-dynamic-SQL.html#GUID-78FA7AFE-CB9B-487E-9A91-06003FDC219D">获取描述符</a></li>
                           <li><a href="embedded-SQL.html#GUID-A44FA873-61D5-42AF-A93E-1CA2041D9A3D">DML返回条款</a></li>
                           <li><a href="ANSI-dynamic-SQL.html#GUID-E56A766C-79F9-4AA7-8DF1-833DF8191296">关于使用阵列进行批量操作</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-C1251DD8-6299-4A82-BE01-4D7235E76E9D__GUID-C2F86E0D-82B0-47A9-BCA8-F2B66285D615">
                        <p class="notep1">也可以看看：</p>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4075"></a><a id="LNPCC4076"></a><a id="LNPCC4077"></a><a id="LNPCC4078"></a><a id="LNPCC4074"></a><div class="props_rev_3"><a id="GUID-AC47FC84-157A-4E2A-AD7C-E1DA65958E01" name="GUID-AC47FC84-157A-4E2A-AD7C-E1DA65958E01"></a><h4 id="LNPCC-GUID-AC47FC84-157A-4E2A-AD7C-E1DA65958E01" class="sect4"><span class="enumeration_section">14.5.5</span>使用PREPARE</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-AC47FC84-157A-4E2A-AD7C-E1DA65958E01__GUID-20B0CEC0-82A1-44B3-8A7C-E54716C8B4F8">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此方法中使用的PREPARE语句与其他动态SQL方法中使用的PREPARE语句相同。Oracle扩展允许SQL语句的带引号的字符串以及变量。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC47FC84-157A-4E2A-AD7C-E1DA65958E01__GUID-5AB525B0-98F4-44C6-9A0A-FFC69EBBF92E">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL PREPARE <span class="italic">statement_id</span> FROM： <span class="italic">sql_statement</span> ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC47FC84-157A-4E2A-AD7C-E1DA65958E01__GUID-918F1F74-EEE2-4D45-9E42-52393B76D2EC">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>statement_id</p>
                        <p>不得宣布这一点;它是未声明的SQL标识符。</p>
                        <p>sql_statement</p>
                        <p>保存嵌入式SQL语句的字符串（常量或变量）。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC47FC84-157A-4E2A-AD7C-E1DA65958E01__GUID-F1DC47CE-DEFE-420D-AE40-7F23A6EEEA52">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">char * statement =“SELECT ENAME FROM emp WHERE deptno =：d”; EXEC SQL PREPARE S1 FROM：statement;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4080"></a><a id="LNPCC4081"></a><a id="LNPCC4082"></a><a id="LNPCC4083"></a><a id="LNPCC4084"></a><a id="LNPCC4079"></a><div class="props_rev_3"><a id="GUID-82AB7A8F-4CD5-4A2A-BE12-91CCEB4F3A4A" name="GUID-82AB7A8F-4CD5-4A2A-BE12-91CCEB4F3A4A"></a><h4 id="LNPCC-GUID-82AB7A8F-4CD5-4A2A-BE12-91CCEB4F3A4A" class="sect4"><span class="enumeration_section">14.5.6</span>描述输入</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-82AB7A8F-4CD5-4A2A-BE12-91CCEB4F3A4A__GUID-1FC9AFB4-F943-4B23-B924-9422B76158D1">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此语句返回有关绑定变量的信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-82AB7A8F-4CD5-4A2A-BE12-91CCEB4F3A4A__GUID-14F4FB96-B076-45BD-B723-C847132A7DA8">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL DESCRIBE INPUT <span class="italic">statement_id</span>使用[SQL] DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> };</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-82AB7A8F-4CD5-4A2A-BE12-91CCEB4F3A4A__GUID-F42E02DB-E4D9-43F6-B7B9-2159A4576815">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>statement_id</p>
                        <p>与PREPARE和DESCRIBE OUTPUT中使用的相同。不得宣布这一点;它是一个未声明的SQL标识符。</p>
                        <p>全球|本地</p>
                        <p>如果未输入，则可选范围子句默认为LOCAL。只能在分配本地描述符的文件中访问本地描述符。全局描述符可以在编译单元的任何模块中使用。</p>
                        <p></p>
                        <p>desc_nam</p>
                        <p>描述符名称。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-82AB7A8F-4CD5-4A2A-BE12-91CCEB4F3A4A__GUID-BE30D3B9-5144-4D56-BE1F-9C1F89995512">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>DESCRIBE INPUT仅设置COUNT和NAME项。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-82AB7A8F-4CD5-4A2A-BE12-91CCEB4F3A4A__GUID-7E6A8EB8-C0FC-4746-A4D3-21CB50741A18">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL DESCRIBE INPUT S1使用SQL DESCRIPTOR GLOBAL：binddes; EXEC SQL使用DESCRIPTOR'输入'描述输入S2;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4086"></a><a id="LNPCC4087"></a><a id="LNPCC4088"></a><a id="LNPCC4089"></a><a id="LNPCC4085"></a><div class="props_rev_3"><a id="GUID-92918804-0091-413F-BD86-5F5274891445" name="GUID-92918804-0091-413F-BD86-5F5274891445"></a><h4 id="LNPCC-GUID-92918804-0091-413F-BD86-5F5274891445" class="sect4"><span class="enumeration_section">14.5.7</span>描述输出</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-92918804-0091-413F-BD86-5F5274891445__GUID-58074930-3FAA-4D51-97E7-DD8A55FF5017">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此语句可获取有关PREPAREd语句中的输出列的信息。ANSI语法与旧的Oracle语法不同。存储在SQL描述符区域中的信息是返回的值的数量以及类型，长度和名称等相关信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-92918804-0091-413F-BD86-5F5274891445__GUID-7B8F560E-55DA-4E10-B02C-260B5E89C3BD">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL DESCRIBE [OUTPUT] <span class="italic">statement_id</span>使用[SQL] DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> } <span class="italic">;</span></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-92918804-0091-413F-BD86-5F5274891445__GUID-F3F8D6C8-ABE0-4E4E-A51B-26FE87966BEB">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>statement_id</p>
                        <p>与PREPARE中使用的相同。不得宣布这一点;它是一个未声明的SQL标识符。</p>
                        <p>全球|本地</p>
                        <p>如果未输入，则可选范围子句默认为LOCAL。只能在分配本地描述符的文件中访问本地描述符。全局描述符可以在编译单元的任何模块中使用。</p>
                        <p>desc_nam</p>
                        <p>描述符名称。</p>
                        <p>OUTPUT是默认值，可以省略。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-92918804-0091-413F-BD86-5F5274891445__GUID-B610E242-E325-461E-9EEB-EA70F2449C1E">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">char * desname =“SELDES”; EXEC SQL DESCRIBE S1使用SQL DESCRIPTOR'SELDES'; / *或者，* / EXEC SQL DESCRIBE OUTPUT S1使用DESCRIPTOR：desname;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4091"></a><a id="LNPCC4092"></a><a id="LNPCC4093"></a><a id="LNPCC4094"></a><a id="LNPCC4095"></a><a id="LNPCC4090"></a><div class="props_rev_3"><a id="GUID-00B73490-5667-4D86-A0D8-1792BF794A28" name="GUID-00B73490-5667-4D86-A0D8-1792BF794A28"></a><h4 id="LNPCC-GUID-00B73490-5667-4D86-A0D8-1792BF794A28" class="sect4"><span class="enumeration_section">14.5.8</span>执行</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-00B73490-5667-4D86-A0D8-1792BF794A28__GUID-7161DF1F-E247-433A-9E18-3C2CB3AA3D29">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>EXECUTE在准备好的SQL语句中匹配输入和输出变量，然后执行该语句。通过允许一个语句中的两个描述符支持DML返回子句，此ANSI版本的EXECUTE与旧的EXECUTE语句不同。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-00B73490-5667-4D86-A0D8-1792BF794A28__GUID-8A3A32F3-9E8D-4E25-B16B-5BEA077DF2E2">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [FOR： <span class="italic">array_size</span> ] EXECUTE <span class="italic">statement_id</span> [USING [SQL] DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> }] [INTO [SQL] DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam</span> | <span class="italic">string_literal</span> }];</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-00B73490-5667-4D86-A0D8-1792BF794A28__GUID-CFB5BD5D-3ED1-4D39-AA11-4A3873DFD705">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>ARRAY_SIZE</p>
                        <p>语句将处理的行数。</p>
                        <p>statement_id</p>
                        <p>与PREPARE中使用的相同。不得宣布这一点;它是一个未声明的SQL标识符。它可以是文字。</p>
                        <p>全球|本地</p>
                        <p>如果未输入，则可选范围子句默认为LOCAL。只能在分配本地描述符的文件中访问本地描述符。全局描述符可以在编译单元的任何模块中使用。</p>
                        <p>desc_nam</p>
                        <p>描述符名称。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-00B73490-5667-4D86-A0D8-1792BF794A28__GUID-8E6162A4-5D34-4A4B-AEB2-46FDAC7B64CC">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>INTO子句为INSERT，UPDATE和DELETE实现DML返回子句。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-00B73490-5667-4D86-A0D8-1792BF794A28__GUID-7CB58661-D7B6-40DA-9AF4-824A81C4BBED">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE S1使用SQL DESCRIPTOR GLOBAL：binddes; EXEC SQL EXECUTE S2使用描述符：bv1进入描述符'SELDES';</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="embedded-SQL.html#GUID-A44FA873-61D5-42AF-A93E-1CA2041D9A3D">DML返回条款</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4097"></a><a id="LNPCC4098"></a><a id="LNPCC4099"></a><a id="LNPCC4100"></a><a id="LNPCC4096"></a><div class="props_rev_3"><a id="GUID-CC11EA53-B423-478F-A62F-F5639AC8F17D" name="GUID-CC11EA53-B423-478F-A62F-F5639AC8F17D"></a><h4 id="LNPCC-GUID-CC11EA53-B423-478F-A62F-F5639AC8F17D" class="sect4"><span class="enumeration_section">14.5.9</span>使用EXECUTE IMMEDIATE</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-CC11EA53-B423-478F-A62F-F5639AC8F17D__GUID-2310C1A0-ADF0-4917-9DA6-330E230D41C8">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>执行包含SQL语句的文字或主机变量字符串。此语句的ANSI SQL形式与旧的Oracle动态SQL中的相同：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC11EA53-B423-478F-A62F-F5639AC8F17D__GUID-91DCB6F5-5CC3-46EF-AF6E-96017E842390">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE IMMEDIATE {： <span class="italic">sql_statement</span> | <span class="italic">string_literal</span> }</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC11EA53-B423-478F-A62F-F5639AC8F17D__GUID-E22DE205-28F3-49D2-929D-F45CEB33E44B">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>sql_statement</p>
                        <p>字符串中的SQL语句或PL / SQL块。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC11EA53-B423-478F-A62F-F5639AC8F17D__GUID-77B2A51B-0579-4826-97F0-6E4D950414F0">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE IMMEDIATE：statement;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4102"></a><a id="LNPCC4103"></a><a id="LNPCC4104"></a><a id="LNPCC4105"></a><a id="LNPCC4101"></a><div class="props_rev_3"><a id="GUID-6B921727-7A70-4280-892B-64444691D28A" name="GUID-6B921727-7A70-4280-892B-64444691D28A"></a><h4 id="LNPCC-GUID-6B921727-7A70-4280-892B-64444691D28A" class="sect4"><span class="enumeration_section">14.5.10</span>使用DYNAMIC DECLARE CURSOR</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-6B921727-7A70-4280-892B-64444691D28A__GUID-88BDCAF9-45B6-486A-BC0E-5C01053D0527">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>声明与作为查询的语句关联的游标。这是通用Declare Cursor语句的一种形式。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6B921727-7A70-4280-892B-64444691D28A__GUID-9A55CED1-8E8F-4580-B4E4-16CBF36C79EF">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE <span class="italic">cursor_name</span> CURSOR FOR <span class="italic">statement_id;</span></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6B921727-7A70-4280-892B-64444691D28A__GUID-30F69975-AF0F-4EE5-9138-0BF551F8EEF2">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>CURSOR_NAME</p>
                        <p>游标变量（SQL标识符，而不是主变量）。</p>
                        <p>statement_id</p>
                        <p>未声明的SQL标识符。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6B921727-7A70-4280-892B-64444691D28A__GUID-749F6525-580A-4DC8-A576-93E61E8A7768">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">S1的EXEC SQL DECLARE C1 CURSOR;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4107"></a><a id="LNPCC4108"></a><a id="LNPCC4109"></a><a id="LNPCC4110"></a><a id="LNPCC4111"></a><a id="LNPCC4106"></a><div class="props_rev_3"><a id="GUID-B721BCBF-F624-419D-B9F6-84B9244A39A1" name="GUID-B721BCBF-F624-419D-B9F6-84B9244A39A1"></a><h4 id="LNPCC-GUID-B721BCBF-F624-419D-B9F6-84B9244A39A1" class="sect4"><span class="enumeration_section">14.5.11</span> OPEN游标</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-B721BCBF-F624-419D-B9F6-84B9244A39A1__GUID-000A43F0-8148-427F-BF73-A4088D293BA3">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>OPEN语句将输入参数与游标关联，然后打开游标。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B721BCBF-F624-419D-B9F6-84B9244A39A1__GUID-20176522-F128-4564-AFDE-AF430CE9F3EA">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [FOR： <span class="italic">array_size</span> ] OPEN <span class="italic">dyn_cursor</span> [[USING [SQL] DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam1</span> | <span class="italic">string_literal</span> }] [INTO [SQL] DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam2</span> | <span class="italic">string_literal</span> }]];</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B721BCBF-F624-419D-B9F6-84B9244A39A1__GUID-FDD9127E-A2A8-430E-9E81-52B1B01ED3BF">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>ARRAY_SIZE</p>
                        <p>此限制小于或等于分配描述符时指定的数字。</p>
                        <p>dyn_cursor</p>
                        <p>游标变量。</p>
                        <p>全球|本地</p>
                        <p>如果未输入，则可选范围子句默认为LOCAL。只能在分配本地描述符的文件中访问本地描述符。全局描述符可以在编译单元的任何模块中使用。</p>
                        <p>desc_nam</p>
                        <p>描述符名称。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B721BCBF-F624-419D-B9F6-84B9244A39A1__GUID-FA348FC3-04B0-4254-B510-D0B2C65D78E8">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果与游标关联的预准备语句包含冒号或问号，则必须指定USING子句，否则在运行时会产生错误。支持DML返回子句。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B721BCBF-F624-419D-B9F6-84B9244A39A1__GUID-C1379A4F-BEF3-4CA3-BCE0-F7DB7E06DF29">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL OPEN C1使用SQL DESCRIPTOR：binddes; EXEC SQL FOR：限制OPEN C2使用DESCRIPTOR：b1，：b2 INTO SQL DESCRIPTOR：seldes;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="embedded-SQL.html#GUID-A44FA873-61D5-42AF-A93E-1CA2041D9A3D">DML返回条款</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4113"></a><a id="LNPCC4114"></a><a id="LNPCC4115"></a><a id="LNPCC4116"></a><a id="LNPCC4117"></a><a id="LNPCC4112"></a><div class="props_rev_3"><a id="GUID-2B6A37AD-8114-4D1A-BF82-83A3D43EB3FC" name="GUID-2B6A37AD-8114-4D1A-BF82-83A3D43EB3FC"></a><h4 id="LNPCC-GUID-2B6A37AD-8114-4D1A-BF82-83A3D43EB3FC" class="sect4"><span class="enumeration_section">14.5.12</span> FETCH</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-2B6A37AD-8114-4D1A-BF82-83A3D43EB3FC__GUID-3AC46534-0911-44D4-8C3D-F0A0B8871C49">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>获取使用动态DECLARE语句声明的游标的行。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B6A37AD-8114-4D1A-BF82-83A3D43EB3FC__GUID-7F4864AE-A907-47A7-BEAC-7DE0EA58F21D">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [FOR： <span class="italic">array_size</span> ] FETCH <span class="italic">游标</span> INTO [SQL] DESCRIPTOR [GLOBAL | LOCAL] { <span class="italic">：desc_nam | string_literal</span> };</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B6A37AD-8114-4D1A-BF82-83A3D43EB3FC__GUID-F38CCA1C-C0DB-4F76-B8F8-4BA516AAEE8F">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>ARRAY_SIZE</p>
                        <p>语句将处理的行数。</p>
                        <p>光标</p>
                        <p>先前声明的动态游标。</p>
                        <p>全球|本地</p>
                        <p>如果未输入，则可选范围子句默认为LOCAL。只能在分配本地描述符的文件中访问本地描述符。全局描述符可以在编译单元的任何模块中使用。</p>
                        <p>desc_nam</p>
                        <p>描述符名称。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B6A37AD-8114-4D1A-BF82-83A3D43EB3FC__GUID-64E74F7A-43F6-4847-8547-FD313C44C1A9">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>FOR子句中的可选<code class="codeph">array_size</code>必须小于或等于ALLOCATE DESCRIPTOR语句中指定的数字。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B6A37AD-8114-4D1A-BF82-83A3D43EB3FC__GUID-83BB09CC-564B-4522-AE33-E1D8A983F07D">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">执行SQL FETCH从C1到DESCRIPTOR'SELDES'; EXEC SQL FOR：arsz FETCH C2 INTO DESCRIPTOR：desc;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4119"></a><a id="LNPCC4120"></a><a id="LNPCC4121"></a><a id="LNPCC4122"></a><a id="LNPCC4118"></a><div class="props_rev_3"><a id="GUID-09ABA189-63C4-4A7C-8179-8B4A5698BC5F" name="GUID-09ABA189-63C4-4A7C-8179-8B4A5698BC5F"></a><h4 id="LNPCC-GUID-09ABA189-63C4-4A7C-8179-8B4A5698BC5F" class="sect4"><span class="enumeration_section">14.5.13</span>关闭动态光标</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-09ABA189-63C4-4A7C-8179-8B4A5698BC5F__GUID-22F5F2FD-0821-449B-B614-1463E7E0CCE8">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>关闭动态游标。语法没有从旧的Oracle方法4更改：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-09ABA189-63C4-4A7C-8179-8B4A5698BC5F__GUID-3F20F508-E5BA-4787-AFBB-0BBE1767985E">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL CLOSE <span class="italic">游标</span> ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-09ABA189-63C4-4A7C-8179-8B4A5698BC5F__GUID-DC8AAF89-F203-4992-AC0E-66292A4A27C7">变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>光标</p>
                        <p>先前声明的动态游标。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-09ABA189-63C4-4A7C-8179-8B4A5698BC5F__GUID-1F1916A2-709F-4AD4-8DC7-DF164296BE8B">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL CLOSE C1;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4123"></a><div class="props_rev_3"><a id="GUID-71C2F06E-CAFD-4E7B-AFF3-CBC6451D882A" name="GUID-71C2F06E-CAFD-4E7B-AFF3-CBC6451D882A"></a><h4 id="LNPCC-GUID-71C2F06E-CAFD-4E7B-AFF3-CBC6451D882A" class="sect4"><span class="enumeration_section">14.5.14</span>与Oracle动态方法4的差异</h4>
                  <div>
                     <p>ANSI动态SQL接口支持Oracle动态方法4支持的所有数据类型，并添加了以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>ANSI动态SQL支持所有数据类型，包括对象类型，结果集和LOB类型。</p>
                        </li>
                        <li>
                           <p>ANSI模式使用内部<span class="italic">SQL描述符区域</span> ，该<span class="italic">区域</span>是Oracle旧动态方法4中使用的外部SQLDA的扩展，用于存储其输入和输出信息。
                           </p>
                        </li>
                        <li>
                           <p>引入了新的嵌入式SQL语句：ALLOCATE DESCRIPTOR，DEALLOCATE DESCRIPTOR，DESCRIBE，GET DESCRIPTOR和SET DESCRIPTOR。</p>
                        </li>
                        <li>
                           <p>DESCRIBE语句不返回ANSI动态SQL中的指示符变量的名称。</p>
                        </li>
                        <li>
                           <p>ANSI动态SQL不允许您指定返回的列名称或表达式的最大大小。默认大小设置为128。</p>
                        </li>
                        <li>
                           <p>描述符名称必须是单引号中的标识符或以冒号开头的主变量。</p>
                        </li>
                        <li>
                           <p>对于输出，DESCRIBE中的可选SELECT LIST FOR子句将替换为可选关键字OUTPUT。 INTO子句由USING DESCRIPTOR子句替换，该子句可以包含可选的关键字SQL。</p>
                        </li>
                        <li>
                           <p>对于输入，DESCRIBE的可选BIND VARIABLES FOR子句可以由关键字INPUT替换。 INTO子句由USING DESCRIPTOR子句替换，该子句可以包含可选的关键字SQL。</p>
                        </li>
                        <li>
                           <p>可选关键字SQL可以位于EXECUTE，FETCH和OPEN语句的USING子句中的关键字DESCRIPTOR之前。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCC4124"></a><div class="props_rev_3"><a id="GUID-2B1BBBD2-4E13-422C-ACF1-625727D1E747" name="GUID-2B1BBBD2-4E13-422C-ACF1-625727D1E747"></a><h4 id="LNPCC-GUID-2B1BBBD2-4E13-422C-ACF1-625727D1E747" class="sect4"><span class="enumeration_section">14.5.15</span>限制（ANSI动态SQL）</h4>
                  <div>
                     <p>对ANSI动态SQL的限制是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您不能在同一模块中混用ANSI和Oracle动态SQL方法。</p>
                        </li>
                        <li>
                           <p>预编译器选项DYNAMIC必须设置为ANSI。仅当DYNAMIC设置为ANSI时，预编译器选项TYPE_CODE才能设置为ANSI。</p>
                        </li>
                        <li>
                           <p>SET语句仅支持主变量作为项名称。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNPCC4125"></a><div class="props_rev_3"><a id="GUID-F216E6D1-16BA-400A-8C26-75AC9398264A" name="GUID-F216E6D1-16BA-400A-8C26-75AC9398264A"></a><h3 id="LNPCC-GUID-F216E6D1-16BA-400A-8C26-75AC9398264A" class="sect3"><span class="enumeration_section">14.6</span>示例程序</h3>
               <div>
                  <p>以下两个程序位于demo目录中。</p>
               </div><a id="LNPCC4126"></a><div class="props_rev_3"><a id="GUID-9E71C9FC-CBE5-4D50-8977-4B73C12521FF" name="GUID-9E71C9FC-CBE5-4D50-8977-4B73C12521FF"></a><h4 id="LNPCC-GUID-9E71C9FC-CBE5-4D50-8977-4B73C12521FF" class="sect4"><span class="enumeration_section">14.6.1</span> ansidyn1.pc</h4>
                  <div>
                     <div class="section">
                        <p>此程序演示如何使用ANSI Dynamic SQL处理直到运行时才知道的SQL语句。它旨在演示使用ANSI动态SQL的最简单（尽管不是最有效）的方法。它使用ANSI兼容的值语义和ANSI类型代码。ANSI SQLSTATE用于错误号。描述符名称是文字。所有输入和输出都是通过ANSI变化的字符类型。</p>
                        <p>该程序使用您的用户名和密码将您连接到ORACLE，然后提示您输入SQL语句。使用常规（非嵌入式）SQL语法输入合法的SQL或PL / SQL语句，并使用分号终止每个语句。您的陈述将被处理。如果是查询，则显示已提取的行。</p>
                        <p>您可以输入多行语句。限制为1023个字符。变量MAX_VAR_LEN的大小有限制，定义为255。该程序最多可处理40个绑定变量和40个选择列表项。值语义不支持DML返回子句和用户定义的类型。</p>
                        <p>使用mode = ansi预编译程序，例如：</p><pre class="oac_no_warn" dir="ltr">proc mode = ansi ansidyn1</pre><p>使用<code class="codeph">mode=ansi</code>会将dynamic和<code class="codeph">type_code</code>设置为ansi。
                        </p><pre class="oac_no_warn" dir="ltr">/ ******************* ****************** ANSI动态演示1：具有值语义，文字描述符名称和ANSI类型代码的ANSI动态SQL此程序演示如何使用ANSI动态SQL处理SQL语句直到运行时才知道。它旨在演示使用ANSI动态SQL的最简单（尽管不是最有效）的方法。它使用ANSI兼容的值语义和ANSI类型代码。ANSI Sqlstate用于错误号。描述符名称是文字。所有输入和输出都是通过ANSI变化的字符类型。该程序使用您的用户名和密码将您连接到ORACLE，然后提示您输入SQL语句。使用常规，非嵌入式SQL语法输入合法的SQL或PL / SQL语句，并使用seimcolon终止每个语句。您的陈述将被处理。如果是查询，则显示已提取的行。您可以输入多行语句。限制为1023个字符。变量MAX_VAR_LEN的大小有限制，定义为255。该程序最多可处理40个绑定变量和40个选择列表项。值语义不支持DML返回语句和用户定义类型。使用mode = ansi预编译程序，例如：proc mode = ansi ansidyn1使用mode = ansi将dynamic和type_code设置为ansi。************************************************** ***************** / #include &lt;stdio.h&gt; #include &lt;string.h&gt; #include &lt;setjmp.h&gt; #include &lt;stdlib.h&gt; #include &lt;sqlcpr .h&gt; #define MAX_OCCURENCES 40 #define MAX_VAR_LEN 255 #define MAX_NAME_LEN 31 #ifndef NULL #define NULL 0 #endif / * Prototypes * / #if defined（__ STDC__）void sql_error（void）; int oracle_connect（void）; int get_dyn_statement（void）; int process_input（void）; int process_output（void）; void help（void）; #else void sql_error（/ * _ void _ * /）; int oracle_connect（/ * _ void _ * /）; int get_dyn_statement（/ * void _ * /）; int process_input（/ * _ void _ * /）; int process_output（/ * _ void _ * /）; void help（/ * _ void _ * /）; #endif EXEC SQL INCLUDE sqlca; char SQLSTATE [6]; / *全局变量* / EXEC SQL BEGIN DECLARE SECTION; char dyn_statement [1024]; char SQLSTATE [6]; EXEC SQL END DECLARE SECTION; / *定义一个缓冲区来保存longjmp状态信息。* / jmp_buf jmp_continue; / *错误例程的全局标志。* / int parse_flag = 0; / *表示语句的全局标志是select * / int select_found; void main（）{/ *连接到数据库。* / if（oracle_connect（）！= 0）退出（1）;执行SQL WHENEVER SQLERROR DO sql_error（）; / *分配输入和输出描述符。* / EXEC SQL ALLOCATE DESCRIPTOR'input_descriptor'; EXEC SQL ALLOCATE DESCRIPTOR'output_descriptor'; / *处理SQL语句。* / for（;;）{（void）setjmp（jmp_continue）; / *获取声明。打破“退出”。* / if（get_dyn_statement（）！= 0）休息; / *准备语句并声明游标。* / parse_flag = 1; / *为sql_error（）设置一个标志。* / EXEC SQL PREPARE S FROM：dyn_statement; parse_flag = 0; / *取消设置标志。* / EXEC SQL DECLARE C CURSOR FOR S; / *调用处理输入的函数。* / if（process_input（））exit（1）; / *打开游标并执行语句。* / EXEC SQL OPEN C使用DESCRIPTOR'input_descriptor'; / *调用处理输出的函数。* / if（process_output（））exit（1）; / *关闭光标。* / EXEC SQL CLOSE C; } / * end of for（;;）statement-processing loop * / / *释放描述符* / EXEC SQL DEALLOCATE DESCRIPTOR'input_descriptor'; EXEC SQL DEALLOCATE DESCRIPTOR'output_descriptor'; EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL COMMIT WORK;放（“\ n祝你有个美好的一天！\ n“）; EXEC SQL WHENEVER SQLERROR DO sql_error（）; return;} int get_dyn_statement（）{char * cp，linebuf [256]; int iter，plsql; for（plsql = 0，iter = 1 ;;）{if （iter == 1）{printf（“\ nSQL&gt;”）; dyn_statement [0] ='\ 0'; select_found = 0;} fgets（linebuf，sizeof linebuf，stdin）; cp = strrchr（linebuf，'\ n '）; if（cp &amp;&amp; cp！= linebuf）* cp ='';否则如果（cp == linebuf）继续; if（（strncmp（linebuf，“SELECT”，6）== 0）||（strncmp（linebuf，“select”，6）== 0））{select_found = 1 ;; } if（（strncmp（linebuf，“EXIT”，4）== 0）||（strncmp（linebuf，“exit”，4）== 0））{return -1; } else if（linebuf [0] =='？'|| （strncmp（linebuf，“HELP”，4）== 0）|| （strncmp（linebuf，“help”，4）== 0））{help（）; iter = 1;继续; if（strstr（linebuf，“BEGIN”）||（strstr（linebuf，“begin”）））{plsql = 1; } strcat（dyn_statement，linebuf）; if（（plsql &amp;&amp;（cp = strrchr（dyn_statement，'/'）））||（！plsql &amp;&amp;（cp = strrchr（dyn_statement，';'））））{* cp ='\ 0';打破; } else {iter ++; printf（“％3d”，iter）;返回0; int process_input（）{int i; EXEC SQL BEGIN DECLARE SECTION; char name [31]; int input_count，input_len，occurrence，ANSI_varchar_type; char input_buf [MAX_VAR_LEN]; EXEC SQL END DECLARE SECTION; EXEC SQL DESCRIBE INPUT S使用DESCRIPTOR'input_descriptor'; EXEC SQL GET DESCRIPTOR'input_descriptor'：input_count = COUNT; ANSI_varchar_type = 12; for（i = 0; i &lt;input_count; i ++）{occurrence = i +1; / * occurence是1基于* / EXEC SQL GET DESCRIPTOR'input_descriptor'VALUE：发生：name = NAME; printf（“\ n输入变量的值％*。* s：”，10,31，name）; fgets（input_buf，sizeof（input_buf），stdin）; input_len = strlen（input_buf） -  1; / *摆脱新行* / input_buf [input_len] ='\ 0'; / * null terminate * / EXEC SQL SET DESCRIPTOR'input_descriptor'VALUE：出现TYPE =：ANSI_varchar_type，LENGTH =：input_len，DATA =：input_buf; } return（sqlca.sqlcode）; } int process_output（）{int i，j; EXEC SQL BEGIN DECLARE SECTION; int output_count，occurrence，type，len，col_len;简短的; char数据[MAX_VAR_LEN]，名称[MAX_NAME_LEN]; EXEC SQL END DECLARE SECTION;如果（！select_found）return（0）;使用DESCRIPTOR'output_descriptor'执行SQL DESCRIBE OUTPUT; EXEC SQL GET DESCRIPTOR'output_descriptor'：output_count = COUNT; printf（“\ n”）; type = 12; / * ANSI VARYING字符类型* / len = MAX_VAR_LEN; / *使用最大分配长度* /（i = 0; i &lt;output_count; i ++）{occurrence = i + 1; EXEC SQL GET DESCRIPTOR'output_descriptor'VALUE：出现：name = NAME; printf（“％ -  *。* s”，9,9，name）; EXEC SQL SET DESCRIPTOR'output_descriptor'VALUE：出现TYPE =：type，LENGTH =：len; } printf（“\ n”）; / * FETCH选择每一行并打印列值。* / EXEC SQL WHENEVER NOT FOUND GOTO end_select_loop; for（;;）{EXEC SQL FETCH C INTO DESCRIPTOR'output_descriptor'; for（i = 0; i &lt;output_count; i ++）{occurrence = i + 1; EXEC SQL GET DESCRIPTOR'output_descriptor'VALUE：发生：data = DATA，：indi = INDICATOR; if（indi == -1）printf（“％ -  *。* s”，9,9，“NULL”）; else printf（“％ -  *。* s”，9,9，数据）; / *简化输出格式化* / / *截断将发生，但列将排列* /} printf（“\ n”）; } end_select_loop：return（0）; } void help（）{puts（“\ n \ n在SQL&gt;提示符处输入SQL语句或PL / SQL块。”）; puts（“语句可以继续多行，除了”）; puts（“在字符串文字中。”）; puts（“用分号终止SQL语句。”）; puts（“终止PL / SQL块（可以包含嵌入的分号）”）; puts（“用斜杠（/）。”）; puts（“Typing \”exit \“（不需要分号）退出程序。”）; puts（“你打字”？\“或\”帮助\“获取此消息。\ n \ n”）; } void sql_error（）{/ * ORACLE错误处理程序* / printf（“\ n \ nANSI sqlstate：％s：”，SQLSTATE）; printf（“\ n \ n％.70s \ n”，sqlca.sqlerrm.sqlerrmc）; if（parse_flag）printf（“SQL语句中字符偏移％d处的解析错误。\ n”，sqlca.sqlerrd [4]）; EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL ROLLBACK WORK; longjmp（jmp_continue，1）; } int oracle_connect（）{EXEC SQL BEGIN DECLARE SECTION; VARCHAR用户名[128]; VARCHAR密码[32]; EXEC SQL END DECLARE SECTION; printf（“\ nusername：”）; fgets（（char *）username.arr，sizeof username.arr，stdin）; username.arr [strlen（（char *）username.arr）-1] ='\ 0'; username.len =（unsigned short）strlen（（char *）username.arr）; printf（“密码：”）; fgets（（char *）password.arr，sizeof password.arr，stdin）; password.arr [strlen（（char *）password.arr） -  1] ='\ 0'; password.len =（unsigned short）strlen（（char *）password.arr）;执行SQL WHENEVER SQLERROR GOTO connect_error; EXEC SQL CONNECT：用户名IDENTIFIED BY：密码; printf（“\ n以用户％s连接到ORACLE。\ n”，username.arr）;返回0; connect_error：fprintf（stderr，“无法以用户％s \ n”连接到ORACLE，username.arr）;返回-1; }</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4127"></a><div class="props_rev_3"><a id="GUID-60184CBB-D503-4E9C-8ECF-A5FBEE320D40" name="GUID-60184CBB-D503-4E9C-8ECF-A5FBEE320D40"></a><h4 id="LNPCC-GUID-60184CBB-D503-4E9C-8ECF-A5FBEE320D40" class="sect4"><span class="enumeration_section">14.6.2</span> ansidyn2.pc</h4>
                  <div>
                     <div class="section">
                        <p>此程序演示如何使用ANSI Dynamic SQL处理直到运行时才知道的SQL语句。它使用Oracle扩展进行批处理和引用语义。</p>
                        <p>该程序使用您的用户名和密码将您连接到ORACLE，然后提示您输入SQL语句。使用交互式，非嵌入式SQL语法输入合法SQL或PL / SQL语句，以分号结束语句。您的陈述将被处理。如果是查询，则显示已提取的行。</p>
                        <p>您可以输入多行语句。限制为1023个字符。变量MAX_VAR_LEN的大小有限制，定义为255。该程序最多可处理40个绑定变量和40个选择列表项。</p>
                        <p>使用<code class="codeph">dynamic = ansi</code>预编译程序，例如：</p><pre class="oac_no_warn" dir="ltr">proc dynamic = ansi ansidyn2 / ******************************************** *********************** ANSI动态演示2：ANSI动态SQL，在主机变量中具有引用语义，批处理和全局描述符名称此程序演示如何使用ANSI动态用于处理直到运行时才知道的SQL语句的SQL。它使用Oracle扩展进行批处理和引用语义。该程序使用您的用户名和密码将您连接到ORACLE，然后提示您输入SQL语句。使用交互式，非嵌入式SQL语法输入合法SQL或PL / SQL语句，使用seimcolon终止语句。您的陈述将被处理。如果是查询，则显示已提取的行。如果您的语句具有输入绑定变量（除了在where子句中），程序将询问输入数组大小，然后允许您输入该数量的输入值。如果您的语句有输出，程序将询问您输出数组大小，并使用该值执行数组fetchng。它还会将一个批次中提取的行输出到一起，因此使用较小的值来输出数组大小将改善输出的外观。例如，连接为scott / tiger，尝试选择empno，en来自emp，输出数组大小为4;您可以输入多行语句。限制为1023个字符。变量MAX_VAR_LEN的大小有限制，定义为255。该程序最多可处理40个绑定变量和40个选择列表项。使用dynamic = ansi编译程序，例如：proc dynamic = ansi ansidyn2 ********************************** ********************************* / #include &lt;stdio.h&gt; #include &lt;string.h&gt; #include &lt;setjmp.h&gt; #include &lt;stdlib.h&gt; #include &lt;sqlcpr.h&gt; #define MAX_OCCURENCES 40 #define MAX_ARRSZ 100 #define MAX_VAR_LEN 255 #define MAX_NAME_LEN 31 #ifndef NULL #define NULL 0 #endif / * Prototypes * /＃ if defined（__ STDC__）void sql_error（void）; int oracle_connect（void）; int get_dyn_statement（void）; int process_input（void）; int process_output（void）; void rows_processed（void）; void help（void）; #else void sql_error（/ * _ void _ * /）; int oracle_connect（/ * _ void _ * /）; int get_dyn_statement（/ * void _ * /）; int process_input（/ * _ void _ * /）; int process_output（/ * _ void _ * /）; void rows_processed（/ * _ void _ * /）; void help（/ * _ void _ * /）; #endif EXEC SQL INCLUDE sqlca; / *全局变量* / char dyn_statement [1024]; / *语句变量* / EXEC SQL VAR dyn_statement IS STRING（1024）; char indesc [] =“input_descriptor”; / *描述符名称* / char outdesc [] =“output_descriptor”; char输入[MAX_OCCURENCES] [MAX_ARRSZ] [MAX_VAR_LEN +1]，/ *数据区* /输出[MAX_OCCURENCES] [MAX_ARRSZ] [MAX_VAR_LEN + 1]; short outindi [MAX_OCCURENCES] [MAX_ARRSZ]; / *输出指标* /短* iptr; int in_array_size; / *输入批量的大小，即行数* / int out_array_size; / *输入批次的大小，即行数* / int max_array_size = MAX_ARRSZ; / *最大数组大小用于分配* / char * dml_commands [] = {“SELECT”，“select”，“INSERT”，“insert”，“UPDATE”，“update”，“DELETE”，“delete”}; int select_found，cursor_open = 0; / *定义一个缓冲区来保存longjmp状态信息。* / jmp_buf jmp_continue; / *错误例程的全局标志。* / int parse_flag = 0; void main（）{/ *连接到数据库。* / if（oracle_connect（）！= 0）退出（1）;执行SQL WHENEVER SQLERROR DO sql_error（）; / *分配输入和输出描述符。* / EXEC SQL FOR：max_array_size ALLOCATE DESCRIPTOR GLOBAL：indesc; EXEC SQL FOR：max_array_size ALLOCATE DESCRIPTOR GLOBAL：outdesc; / *处理SQL语句。* / for（;;）{（void）setjmp（jmp_continue）; / *获取声明。打破“退出”。* / if（get_dyn_statement（）！= 0）休息; / *准备语句并声明游标。* / parse_flag = 1; / *为sql_error（）设置一个标志。* / EXEC SQL PREPARE S FROM：dyn_statement; parse_flag = 0; / *取消设置标志。* / EXEC SQL DECLARE C CURSOR FOR S; / *调用处理输入的函数。* / if（process_input（））exit（1）; / *打开游标并执行语句。* / EXEC SQL FOR：in_array_size OPEN C使用DESCRIPTOR GLOBAL：indesc; cursor_open = 1; / *调用处理输出的函数。* / if（process_output（））exit（1）; / *告诉用户处理了多少行。* / rows_processed（）; } / * end of for（;;）语句处理循环* / / *关闭游标。* / if（cursor_open）EXEC SQL CLOSE C; / *释放描述符* / EXEC SQL DEALLOCATE DESCRIPTOR GLOBAL：indesc; EXEC SQL DEALLOCATE DESCRIPTOR GLOBAL：outdesc; EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL COMMIT WORK RELEASE;放（“\ n祝你有个美好的一天！\ n“）; EXEC SQL WHENEVER SQLERROR DO sql_error（）; return;} int get_dyn_statement（）{char * cp，linebuf [256]; int iter，plsql; for（plsql = 0，iter = 1 ;;）{if （iter == 1）{printf（“\ nSQL&gt;”）; dyn_statement [0] ='\ 0'; select_found = 0;} fgets（linebuf，sizeof linebuf，stdin）; cp = strrchr（linebuf，'\ n '）; if（cp &amp;&amp; cp！= linebuf）* cp ='';否则如果（cp == linebuf）继续; if（（strncmp（linebuf，“SELECT”，6）== 0）||（strncmp（linebuf，“select”，6）== 0））{select_found = 1 ;; } if（（strncmp（linebuf，“EXIT”，4）== 0）||（strncmp（linebuf，“exit”，4）== 0））{return -1; } else if（linebuf [0] =='？'|| （strncmp（linebuf，“HELP”，4）== 0）|| （strncmp（linebuf，“help”，4）== 0））{help（）; iter = 1;继续; if（strstr（linebuf，“BEGIN”）||（strstr（linebuf，“begin”）））{plsql = 1; } strcat（dyn_statement，linebuf）; if（（plsql &amp;&amp;（cp = strrchr（dyn_statement，'/'）））||（！plsql &amp;&amp;（cp = strrchr（dyn_statement，';'））））{* cp ='\ 0';打破; } else {iter ++; printf（“％3d”，iter）;返回0; int process_input（）{int i，j; char name [31]; int input_count，input_len = MAX_VAR_LEN; int发生，string_type = 5; int string_len; char arr_size [3];使用DESCRIPTOR GLOBAL的EXEC SQL DESCRIBE输入：indesc; EXEC SQL GET DESCRIPTOR GLOBAL：indesc：input_count = COUNT; if（input_count&gt; 0 &amp;&amp;！select_found）{/ *获取输入数组大小* / printf（“\ n输入数组大小的值（最大值为％d）：”，max_array_size）; fgets（arr_size，4，stdin）; in_array_size = atoi（arr_size）; } else {in_array_size = 1; } for（i = 0; i &lt;input_count; i ++）{occurrence = i +1; / * occurence是1基于* / EXEC SQL GET DESCRIPTOR GLOBAL：indesc VALUE：出现：name = NAME; for（j = 0; j &lt;in_array_size; j ++）{if（in_array_size == 1）printf（“\ n输入变量的值％*。* s：”，10,31，name）; else printf（“\ n输入％d％s输入变量的值％*。* s：”，j + 1，（（j == 0）？“st”:( j == 1）？“nd”:( j == 2）？“rd”：“th”），10,31，姓名）; fgets（input [i] [j]，sizeof（input [i] [j]），stdin）; string_len = strlen（input [i] [j]）; input [i] [j] [string_len  -  1] ='\ 0'; / *将\ n更改为\ 0 * /} EXEC SQL SET DESCRIPTOR GLOBAL：indesc VALUE：出现TYPE =：string_type，LENGTH =：input_len; EXEC SQL FOR：in_array_size SET DESCRIPTOR GLOBAL：indesc VALUE：发生REF DATA =：input [i]; } return（sqlca.sqlcode）; } int process_output（）{int i，j; int output_count，发生; int type，output_len = MAX_VAR_LEN;字符名称[MAX_OCCURENCES] [MAX_NAME_LEN]; int rows_this_fetch = 0，cumulative_rows = 0; char arr_size [3];如果（！select_found）return（0）; EXEC SQL描述输出使用DESCRIPTOR GLOBAL：outdesc; EXEC SQL GET DESCRIPTOR GLOBAL：outdesc：output_count = COUNT; if（output_count&gt; 0）{printf（“\ n输出数组大小的值（最大值为％d）：”，max_array_size）; fgets（arr_size，4，stdin）; out_array_size = atoi（arr_size）; if（out_array_size &lt;1）/ *必须至少有一个* / out_array_size = 1; printf（“\ n”）; for（i = 0; i &lt;output_count; i ++）{occurrence = i + 1; EXEC SQL GET DESCRIPTOR GLOBAL：outdesc VALUE：出现：type = TYPE，：name [i] = NAME;发生= i + 1; / *出现是一个基于* / type = 5; / *强制所有数据为空终止字符* / EXEC SQL SET DESCRIPTOR GLOBAL：outdesc VALUE：出现TYPE =：type，LENGTH =：output_len; iptr =（short *）＆outindi [i]; / *没有多维非char主机变量* / EXEC SQL FOR：out_array_size SET DESCRIPTOR GLOBAL：outdesc VALUE：发生REF DATA =：output [i]，REF INDICATOR =：iptr; } EXEC SQL WHENEVER NOT FOUND GOTO end_select_loop; / *打印列标题* / for（j = 0; j &lt;out_array_size; j ++）for（i = 0; i &lt;output_count; i ++）printf（“％ -  *。* s”，9,9，name [i ]）;的printf（ “\ n”）; / * FETCH选择每一行并打印列值。* / for（;;）{EXEC SQL FOR：out_array_size FETCH C INTO DESCRIPTOR GLOBAL：outdesc; rows_this_fetch = sqlca.sqlerrd [2]  -  cumulative_rows; cumulative_rows = sqlca.sqlerrd [2]; if（rows_this_fetch）for（j = 0; j &lt;out_array_size &amp;&amp; j &lt;rows_this_fetch; j ++）{/ *使用简化格式的列输出* / for（i = 0; i &lt;output_count; i ++）{if（outindi [i] [j] == -1）printf（“％ -  *。* s”，9,9，“NULL”）; else printf（“％ -  *。* s”，9,9，output [i] [j]）; / *简化* / / *输出格式化可能导致截断* / / *但列将排列* /}} printf（“\ n”）; } end_select_loop：/ *打印任何未打印的行* / rows_this_fetch = sqlca.sqlerrd [2]  -  cumulative_rows; cumulative_rows = sqlca.sqlerrd [2]; if（rows_this_fetch）for（j = 0; j &lt;out_array_size &amp;&amp; j &lt;rows_this_fetch; j ++）{/ *使用简化格式的列输出* / for（i = 0; i &lt;output_count; i ++）{if（outindi [i] [j] == -1）printf（“％ -  *。* s”，9,9，“NULL”）; else printf（“％ -  *。* s”，9,9，output [i] [j]）; } return（0）; } void rows_processed（）{int i; for（i = 0; i &lt;8; i ++）{if（strncmp（dyn_statement，dml_commands [i]，6）== 0）{printf（“\ n \ n％d row％c processing。\ n”，sqlca .sqlerrd [2]，sqlca.sqlerrd [2] == 1？''：'s'）;打破;返回; } void help（）{puts（“\ n \ n在SQL&gt;提示符处输入SQL语句或PL / SQL块。”）; puts（“语句可以继续多行，除了”）; puts（“在字符串文字中。”）; puts（“用分号终止SQL语句。”）; puts（“终止PL / SQL块（可以包含嵌入的分号）”）; puts（“用斜杠（/）。”）; puts（“Typing \”exit \“（不需要分号）退出程序。”）; puts（“你打字”？\“或\”帮助\“获取此消息。\ n \ n”）; } void sql_error（）{/ * ORACLE错误处理程序* / printf（“\ n \ n％.70s \ n”，sqlca.sqlerrm.sqlerrmc）; if（parse_flag）printf（“SQL语句中字符偏移％d处的解析错误。\ n”，sqlca.sqlerrd [4]）; EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL ROLLBACK WORK; longjmp（jmp_continue，1）; } int oracle_connect（）{EXEC SQL BEGIN DECLARE SECTION; VARCHAR用户名[128]; VARCHAR密码[32]; EXEC SQL END DECLARE SECTION; printf（“\ nusername：”）; fgets（（char *）username.arr，sizeof username.arr，stdin）; username.arr [strlen（（char *）username.arr）-1] ='\ 0'; username.len =（unsigned short）strlen（（char *）username.arr）; printf（“密码：”）; fgets（（char *）password.arr，sizeof password.arr，stdin）; password.arr [strlen（（char *）password.arr） -  1] ='\ 0'; password.len =（unsigned short）strlen（（char *）password.arr）;执行SQL WHENEVER SQLERROR GOTO connect_error; EXEC SQL CONNECT：用户名IDENTIFIED BY：密码; printf（“\ n以用户％s连接到ORACLE。\ n”，username.arr）;返回0; connect_error：fprintf（stderr，“无法以用户％s \ n”连接到ORACLE，username.arr）;返回-1; }</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
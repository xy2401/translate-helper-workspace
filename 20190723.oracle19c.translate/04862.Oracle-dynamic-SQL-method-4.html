<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>Oracle动态SQL：方法4</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="cobol-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:40:40-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96466-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="ANSI-dynamic-SQL.html" title="Previous" type="text/html"></link>
      <link rel="next" href="multithreaded-applications.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*COBOL Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ANSI-dynamic-SQL.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="multithreaded-applications.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="applications.html" property="item" typeof="WebPage"><span property="name">应用</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle动态SQL：方法4</li>
            </ol>
            <a id="GUID-C6256169-5928-466C-B7C7-960D20705EED" name="GUID-C6256169-5928-466C-B7C7-960D20705EED"></a><a id="LNPCB011"></a>
            
            <h2 id="LNPCB-GUID-C6256169-5928-466C-B7C7-960D20705EED" class="sect2"><span class="enumeration_chapter">11</span> Oracle动态SQL：方法4</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何实现Oracle动态SQL方法4，它允许程序接受或构建包含不同数量的主机变量的动态SQL语句。</p>
               <p>应使用“ANSI Dynamic SQL”中描述的较新的ANSI SQL方法4开发新的应用程序。ANSI方法4支持所有Oracle类型，而老的Oracle方法4 <span class="italic">不</span>支持游标变量，项目组的表，DML返回条款和LOB的。
               </p>
               <p>讨论的主题包括以下内容：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-ADB6E6AD-E098-418D-A702-1848E04EF385">满足方法4的特殊要求</a> 
                     </p>
                  </li>
                  <li>
                     <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-C689132A-8C42-4F2F-AA86-EF747D7EB7C3">理解SQL描述符区域（SQLDA）</a></p>
                  </li>
                  <li>
                     <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194">SQLDA变量</a></p>
                  </li>
                  <li>
                     <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-D0FBC7DB-FF8D-4D08-A06D-1F3A1666BDA1">先决条件知识</a></p>
                  </li>
                  <li>
                     <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-2235722D-A4D2-453D-99EE-339F48C96F28">基本步骤</a></p>
                  </li>
                  <li>
                     <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-2BC00CD0-1649-4E6B-B12F-CBBE7ECF0ABE">仔细看看每一步</a></p>
                  </li>
                  <li>
                     <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-3CE8E1BC-F39A-42A6-A01C-D2277ADABB36">使用方法4的主机表</a></p>
                  </li>
                  <li>
                     <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-C057FFDB-75E2-4123-AFD8-49FBF8561B49">示例程序10：动态SQL方法4</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-C6256169-5928-466C-B7C7-960D20705EED__GUID-B84FD4BD-FCCF-438F-9B62-8FCA6960C24A">
                  <p class="notep1">注意：</p>
                  <p>有关动态SQL方法1,2和3的讨论以及Oracle方法4的概述，请参阅“Oracle Dynamic SQL”。</p>
               </div>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="ANSI-dynamic-SQL.html#GUID-D6E9ACBE-EFF4-42F6-A855-B510004F4164">ANSI动态SQL</a></li>
                     <li><a href="Oracle-dynamic-SQL.html#GUID-C325218F-3DFF-4551-A5EB-483ADB24E324">Oracle动态SQL</a></li>
                  </ul>
               </div>
            </div>
            <a id="LNPCB707"></a><div class="props_rev_3"><a id="GUID-ADB6E6AD-E098-418D-A702-1848E04EF385" name="GUID-ADB6E6AD-E098-418D-A702-1848E04EF385"></a><h3 id="LNPCB-GUID-ADB6E6AD-E098-418D-A702-1848E04EF385" class="sect3"><span class="enumeration_section">11.1</span>满足方法4的特殊要求</h3>
               <div>
                  <p>在研究方法4的要求之前，您应该熟悉术语<span class="italic">select-list项</span>和<span class="italic">占位符</span> 。选择列表项是查询中关键字SELECT后面的列或表达式。例如，以下动态查询包含三个选择列表项：</p><pre class="oac_no_warn" dir="ltr">从EMP中选择ENAME，JOB，SAL + COMM，DEPTNO = 20</pre><p>占位符是伪绑定（输入）变量，它们在SQL语句中保存实际绑定变量的位置。您没有声明占位符，可以将它们命名为您喜欢的任何名称。绑定变量的占位符最常用于SET，VALUES和WHERE子句中。例如，以下动态SQL语句每个都包含两个占位符。</p><pre class="oac_no_warn" dir="ltr">插入EMP（EMPNO，DEPTNO）值（：E，：D）从部门删除DEPTNO =：DNUM和LOC =：DLOC</pre><p>占位符不能引用表或列名称。</p>
               </div><a id="LNPCB708"></a><div class="props_rev_3"><a id="GUID-393CDFE4-8A89-44AA-90BC-F9B32FB14473" name="GUID-393CDFE4-8A89-44AA-90BC-F9B32FB14473"></a><h4 id="LNPCB-GUID-393CDFE4-8A89-44AA-90BC-F9B32FB14473" class="sect4"><span class="enumeration_section">11.1.1</span>方法4的优点</h4>
                  <div>
                     <p>与方法1,2和3不同，动态SQL方法4允许您的程序：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>接受或构建包含未知数量的选择列表项或占位符的动态SQL语句</p>
                        </li>
                        <li>
                           <p>明确控制Oracle和COBOL类型之间的数据类型转换</p>
                        </li>
                     </ul>
                     <p>要为程序添加此灵活性，必须为运行时库提供其他信息。<a id="d72777e160" class="indexterm-anchor"></a></p>
                  </div>
               </div><a id="LNPCB709"></a><div class="props_rev_3"><a id="GUID-9003045A-98CE-4150-AFEE-62BA00643E30" name="GUID-9003045A-98CE-4150-AFEE-62BA00643E30"></a><h4 id="LNPCB-GUID-9003045A-98CE-4150-AFEE-62BA00643E30" class="sect4"><span class="enumeration_section">11.1.2</span>数据库需要的信息</h4>
                  <div>
                     <p>Pro * COBOL为所有可执行的动态SQL语句生成对Oracle的调用。如果动态SQL语句不包含选择列表项或占位符，则数据库不需要其他信息来执行该语句。以下DELETE语句属于此类别：</p><pre class="oac_no_warn" dir="ltr">*动态SQL语句......移动'从EMP转移到DEPTNO = 30'到STMT。</pre><p>但是，大多数动态SQL语句包含绑定变量的选择列表项或占位符，如以下UPDATE语句所示：</p><pre class="oac_no_warn" dir="ltr">*带占位符的动态SQL语句......移动'更新EMP设置COMM =：C，其中EMPNO =：E'到STMT。</pre><p>要执行包含选择列表项或绑定变量的占位符或两者的动态SQL语句，数据库需要有关将保存输出或输入值的程序变量的信息。具体而言，数据库需要以下信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>选择列表项的数量和绑定变量的数量</p>
                        </li>
                        <li>
                           <p>每个选择列表项和绑定变量的长度</p>
                        </li>
                        <li>
                           <p>每个选择列表项和绑定变量的数据类型</p>
                        </li>
                        <li>
                           <p>每个输出变量的内存地址，用于存储选择列表项的值，以及每个绑定变量的地址</p>
                        </li>
                     </ul>
                     <p>例如，要写入select-list项的值，数据库需要相应输出变量的地址。</p>
                  </div>
               </div><a id="LNPCB710"></a><div class="props_rev_3"><a id="GUID-13734790-CB3A-4E9F-A65B-AD290EED0B98" name="GUID-13734790-CB3A-4E9F-A65B-AD290EED0B98"></a><h4 id="LNPCB-GUID-13734790-CB3A-4E9F-A65B-AD290EED0B98" class="sect4"><span class="enumeration_section">11.1.3</span>存储信息的位置</h4>
                  <div>
                     <p>数据库需要的有关绑定变量的选择列表项或占位符的所有信息（除了它们的值）都存储在称为SQL描述符区域（SQLDA）的程序数据结构中。</p>
                     <p>选择列表项的描述存储在<span class="italic">选择的SQLDA中</span> ，绑定变量的占位符描述存储在<span class="italic">绑定的SQLDA中</span> 。<a id="d72777e244" class="indexterm-anchor"></a><a id="d72777e248" class="indexterm-anchor"></a></p>
                     <p>select-list项的值存储在输出缓冲区中;绑定变量的值存储在输入缓冲区中。您可以使用库例程SQLADR将这些数据缓冲区的地址存储在select或bind SQLDA中，以便数据库知道在何处写入输出值和读取输入值。<a id="d72777e252" class="indexterm-anchor"></a><a id="d72777e256" class="indexterm-anchor"></a></p>
                     <p>值如何存储在这些数据变量中？FETCH使用游标生成输出值，输入值由程序填充，通常来自用户交互输入的信息。</p>
                  </div>
               </div><a id="LNPCB711"></a><div class="props_rev_3"><a id="GUID-E5A252C9-C8A4-4A0D-841D-A465950E514C" name="GUID-E5A252C9-C8A4-4A0D-841D-A465950E514C"></a><h4 id="LNPCB-GUID-E5A252C9-C8A4-4A0D-841D-A465950E514C" class="sect4"><span class="enumeration_section">11.1.4</span>如何获取信息</h4>
                  <div>
                     <p>您使用DESCRIBE语句来帮助获取数据库所需的信息。DESCRIBE SELECT LIST语句检查每个选择列表项以确定其名称，数据类型，约束，长度，比例和精度，然后将此信息存储在选择的SQLDA中供您使用。例如，您可以使用选择列表名称作为打印输出中的列标题。DESCRIBE还存储SQLDA中的选择列表项的总数。</p>
                     <p>DESCRIBE BIND VARIABLES语句检查每个占位符以确定其名称和长度，然后将此信息存储在输入缓冲区中并绑定SQLDA供您使用。例如，您可以使用占位符名称来提示用户输入绑定变量的值。</p>
                  </div>
               </div>
            </div><a id="LNPCB712"></a><div class="props_rev_3"><a id="GUID-C689132A-8C42-4F2F-AA86-EF747D7EB7C3" name="GUID-C689132A-8C42-4F2F-AA86-EF747D7EB7C3"></a><h3 id="LNPCB-GUID-C689132A-8C42-4F2F-AA86-EF747D7EB7C3" class="sect3"><span class="enumeration_section">11.2</span>了解SQL描述符区域（SQLDA）</h3>
               <div>
                  <p>本节详细介绍了SQLDA数据结构。您将学习如何声明它，它包含哪些变量，如何初始化它们以及如何在程序中使用它们。<a id="d72777e313" class="indexterm-anchor"></a><a id="d72777e315" class="indexterm-anchor"></a></p>
               </div><a id="LNPCB713"></a><div class="props_rev_3"><a id="GUID-3750CA2B-A9F1-4EFE-B2D5-86FA01499C48" name="GUID-3750CA2B-A9F1-4EFE-B2D5-86FA01499C48"></a><h4 id="LNPCB-GUID-3750CA2B-A9F1-4EFE-B2D5-86FA01499C48" class="sect4"><span class="enumeration_section">11.2.1</span> SQLDA的用途</h4>
                  <div>
                     <p>对于包含未知数量的选择列表项或绑定变量的占位符的动态SQL语句，需要方法4。要处理这种动态SQL语句，程序必须显式声明SQLDAs，也称为<span class="italic">描述符</span> 。每个描述符对应于程序中的一个组项。<a id="d72777e346" class="indexterm-anchor"></a></p>
                     <p><span class="italic">选择描述符</span>存储选择列表项的描述和包含选择列表项的名称和值的输出缓冲区的地址。<a id="d72777e355" class="indexterm-anchor"></a><a id="d72777e359" class="indexterm-anchor"></a></p>
                     <div class="infoboxnote" id="GUID-3750CA2B-A9F1-4EFE-B2D5-86FA01499C48__GUID-C75358CC-0F6F-40AF-97F2-5FF61603A042">
                        <p class="notep1">注意：</p>
                        <p>选择列表项的名称可以是列名，列别名，也可以是SAL + COMM等表达式的文本。<a id="d72777e364" class="indexterm-anchor"></a><a id="d72777e368" class="indexterm-anchor"></a></p>
                     </div>
                     <p><span class="italic">绑定描述符</span>存储绑定变量和指示符变量的描述以及存储绑定变量和指示符变量的名称和值的输入缓冲区的地址。<a id="d72777e377" class="indexterm-anchor"></a><a id="d72777e381" class="indexterm-anchor"></a><a id="d72777e385" class="indexterm-anchor"></a><a id="d72777e389" class="indexterm-anchor"></a></p>
                     <p>请记住，一些描述符变量包含地址，而不是值。因此，您必须声明数据缓冲区以保存值。您可以决定所需输入和输出缓冲区的大小。因为COBOL不支持指针，所以必须使用库子例程SQLADR来获取输入和输出缓冲区的地址。您将学习如何在“使用SQLADR”部分中调用SQLADR。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="Oracle-dynamic-SQL-method-4.html#GUID-EE6FD907-F6B2-49B6-BD60-453810E3EE59">使用SQLADR</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCB714"></a><div class="props_rev_3"><a id="GUID-D0FAD28C-3EE5-4ECB-AEA4-A48DAFCFD348" name="GUID-D0FAD28C-3EE5-4ECB-AEA4-A48DAFCFD348"></a><h4 id="LNPCB-GUID-D0FAD28C-3EE5-4ECB-AEA4-A48DAFCFD348" class="sect4"><span class="enumeration_section">11.2.2</span>多个SQLDA</h4>
                  <div>
                     <p>如果您的程序有多个活动的动态SQL语句，则每个语句必须具有自己的SQLDA。您可以声明任意数量的具有不同名称的SQLDA。例如，您可以声明三个名为SELDSC1，SELDSC2和SELDSC3的选择SQLDDA，以便您可以从三个同时打开的游标进行FETCH。但是，非并发游标可以重用SQLDA。</p>
                  </div>
               </div><a id="LNPCB716"></a><a id="LNPCB717"></a><a id="LNPCB715"></a><div class="props_rev_3"><a id="GUID-BD97527B-614D-4AFB-8C9F-EDB21E690BE8" name="GUID-BD97527B-614D-4AFB-8C9F-EDB21E690BE8"></a><h4 id="LNPCB-GUID-BD97527B-614D-4AFB-8C9F-EDB21E690BE8" class="sect4"><span class="enumeration_section">11.2.3</span>声明SQLDA</h4>
                  <div>
                     <div class="section">
                        <p>要声明select和bind SQLDAs，可以使用示例select和绑定SQLDA将它们编码到程序中， <a href="Oracle-dynamic-SQL-method-4.html#GUID-BD97527B-614D-4AFB-8C9F-EDB21E690BE8__CDDHABCF">如图11-1</a>所示。您可以修改表格尺寸以满足您的需求。
                        </p>
                        <div class="infoboxnote" id="GUID-BD97527B-614D-4AFB-8C9F-EDB21E690BE8__GUID-87B619D7-0782-4480-851C-AFDD5453CC3E">
                           <p class="notep1">注意：</p>
                           <p>对于字节交换平台，在声明SQLDA时使用COMP5而不是COMP。</p>
                        </div>
                        <div class="figure" id="GUID-BD97527B-614D-4AFB-8C9F-EDB21E690BE8__CDDHABCF">
                           <p class="titleinfigure">图11-1 Pro * COBOL SQLDA描述符和数据缓冲区示例（32位）</p><img src="img/pco81005.gif" alt="下面是图11-1的描述" title="下面是图11-1的描述" longdesc="img_text/pco81005.html"><br><a href="img_text/pco81005.html">“图11-1示例Pro * COBOL SQLDA描述符和数据缓冲区（32位）”的说明</a></div>
                        <!-- class="figure" -->
                        <div class="infoboxnote" id="GUID-BD97527B-614D-4AFB-8C9F-EDB21E690BE8__GUID-DD9F9882-D858-4A99-AC2D-3DBD27003C0F">
                           <p class="notep1">注意：</p>
                           <p>对于64位平台，在声明SQLDA时使用PIC S9（18）声明而不是PIC S9（9）。</p>
                        </div>
                        <p>您可以将SQLDAs存储在文件中（例如，名为SELDSC和BNDDSC），然后使用INCLUDE语句将文件复制到程序中，如下所示：<a id="d72777e469" class="indexterm-anchor"></a><a id="d72777e473" class="indexterm-anchor"></a><a id="d72777e477" class="indexterm-anchor"></a><a id="d72777e481" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL包含SELDSC END-EXEC。 EXEC SQL包含BNDDSC END-EXEC。</pre><p><a href="Oracle-dynamic-SQL-method-4.html#GUID-BD97527B-614D-4AFB-8C9F-EDB21E690BE8__I25351">图11-2</a>显示了变量是由SQLADR调用，DESCRIBE命令，FETCH命令还是程序分配设置的。
                        </p>
                        <div class="figure" id="GUID-BD97527B-614D-4AFB-8C9F-EDB21E690BE8__I25351">
                           <p class="titleinfigure">图11-2如何设置变量</p><img src="img/pco81006.gif" alt="下面是图11-2的描述" title="下面是图11-2的描述" longdesc="img_text/pco81006.html"><br><a href="img_text/pco81006.html">“图11-2如何设置变量”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCB719"></a><a id="LNPCB720"></a><a id="LNPCB721"></a><a id="LNPCB722"></a><a id="LNPCB723"></a><a id="LNPCB724"></a><a id="LNPCB725"></a><a id="LNPCB726"></a><a id="LNPCB727"></a><a id="LNPCB728"></a><a id="LNPCB729"></a><a id="LNPCB730"></a><a id="LNPCB731"></a><a id="LNPCB732"></a><a id="LNPCB733"></a><a id="LNPCB734"></a><a id="LNPCB735"></a><a id="LNPCB736"></a><a id="LNPCB737"></a><a id="LNPCB738"></a><a id="LNPCB739"></a><a id="LNPCB740"></a><a id="LNPCB741"></a><a id="LNPCB742"></a><a id="LNPCB718"></a><div class="props_rev_3"><a id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194" name="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194"></a><h3 id="LNPCB-GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194" class="sect3"><span class="enumeration_section">11.3</span> SQLDA变量</h3>
               <div>
                  <div class="section">
                     <p>本节介绍SQLDA中每个变量的用途和用法。<a id="d72777e546" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-E5A055F1-61B1-4370-8D36-98F9A7806700">SQLDNUM</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>此变量指定可包含在DESCRIBE中的选择列表项或占位符的最大数量。因此，SQLDNUM确定描述符表中的元素数。<a id="d72777e556" class="indexterm-anchor"></a><a id="d72777e560" class="indexterm-anchor"></a></p>
                     <p>在发出DESCRIBE命令之前，必须将此变量设置为描述符表的维度。在DESCRIBE之后，必须将其重置为DESCRIBE中的实际变量数，该变量存储在SQLDFND中。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-F9A6E7E8-C104-472E-81AD-9E3EEAD53FB7">SQLDFND</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>SQLDFND变量是DESCRIBE命令找到的选择列表项或占位符的实际数量。<a id="d72777e570" class="indexterm-anchor"></a><a id="d72777e574" class="indexterm-anchor"></a></p>
                     <p>SQLDFND由DESCRIBE设置。如果SQLDFND为负数，则DESCRIBE命令会找到过多的选择列表项或占位符，以表示描述符的大小。例如，如果将SQLDNUM设置为10但DESCRIBE找到11个选择列表项或占位符，则SQLDFND设置为-11。如果发生这种情况，则无法在不重新分配描述符的情况下处理SQL语句。</p>
                     <p>在DESCRIBE之后，必须将SQLDNUM设置为等于SQLDFND。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-F5B86827-B3E0-427A-9337-6AD6C10D78A8">SELDV | BNDDV</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDV | BNDDV</span>表包含存储select-list或bind-variable值的数据缓冲区的地址。<a id="d72777e589" class="indexterm-anchor"></a><a id="d72777e593" class="indexterm-anchor"></a><a id="d72777e595" class="indexterm-anchor"></a><a id="d72777e599" class="indexterm-anchor"></a></p>
                     <p>您必须使用SQLADR设置SELDV或BNDDV的元素。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-1A7FDFC9-C2C6-47C3-A380-AE9D5D1992AB">选择描述符</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下声明</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FETCH ...使用描述符...
</pre><p>指示数据库在由SELDV（1）到SELDV（SQLDNUM）寻址的数据缓冲区中存储FETCHed选择列表值。因此，数据库将第J个选择列表值存储在SEL-DV（J）中。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-4D1CF284-8B53-4E9D-8F35-455F4F15DD35">绑定描述符</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>必须在发出OPEN命令之前设置绑定描述符。以下声明</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OPEN ...使用描述符...
</pre><p>指示Oracle使用BNDDV（1）到BNDDV（SQLDNUM）寻址的绑定变量值来执行动态SQL语句。（通常，值由用户输入。）数据库在BND-DV（J）中找到第J个绑定变量值。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-8F128B01-2FAB-427A-8110-E70D78E98285">SELDFMT | BNDDFMT</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDFMT | BNDDFMT</span>表包含存储select-list或bind-variable转换格式字符串的数据缓冲区的地址。您目前只能将它用于COBOL压缩小数。转换字符串的格式为PP。+ SS或PP.-SS，其中PP是精度，SS是比例。有关精度和比例的定义，请参阅<a href="Oracle-dynamic-SQL-method-4.html#GUID-09B53741-283E-420D-988C-2E87D1CB505E">Coercing数据类型中的</a> <span class="q">“提取精度和比例”</span> 。<a id="d72777e639" class="indexterm-anchor"></a><a id="d72777e643" class="indexterm-anchor"></a><a id="d72777e647" class="indexterm-anchor"></a><a id="d72777e649" class="indexterm-anchor"></a></p>
                     <p>格式字符串的使用是可选的。如果需要第J个选择列表项或绑定变量的转换格式，请使用SQLADR设置SELDFMT（J）或BNDDFMT（J），然后在SEL-DFMT中存储压缩十进制格式（例如<code class="codeph">07.+02</code> ）或BND-DFMT。否则，将SELDFMT（J）或BNDDFMT（J）设置为零。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-5C829D07-2D8D-4E7F-8D7F-A73BCF2A387C">SELDVLN | BNDDVLN</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDVLN | BNDDVLN</span>表包含存储在数据缓冲区中的select-list变量或绑定变量值的长度。<a id="d72777e665" class="indexterm-anchor"></a><a id="d72777e669" class="indexterm-anchor"></a><a id="d72777e671" class="indexterm-anchor"></a><a id="d72777e675" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-EB47A703-8600-4350-B335-FB0EE53A112C">选择描述符</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>DESCRIBE SELECT LIST将长度表设置为每个选择列表项的预期最大值。但是，您可能希望在发出FETCH命令之前重置某些长度。FETCH最多返回<span class="italic">n个</span>字符，其中<span class="italic">n</span>是FETCH命令之前SELDVLN（J）的值。
                     </p>
                     <p>数据类型的长度格式不同。对于CHAR选择列表项，DESCRIBE SELECT LIST将SELDVLN（J）设置为选择列表项的最大长度（以字节为单位）。对于NUMBER个选择列表项，分别在变量的低字节和下一个字节中返回缩放和精度。您可以使用库例程SQLPRC从SELDVLN中提取精度和比例值。请参阅“提取精度和比例”部分。</p>
                     <p>必须在FETCH之前将SELDVLN（J）重置为数据缓冲区所需的长度。例如，在将NUMBER强制转换为COBOL字符串时，请将SELDVLN（J）设置为数字的精度加上符号和小数点的2。将NUMBER强制转换为COBOL浮点数时，请将SELDVLN（J）设置为系统上相应浮点类型的长度。</p>
                     <p>有关强制数据类型长度的更多信息，请参阅“转换数据”部分。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-68A7E624-409A-4F98-8548-2087911FDCC0">绑定描述符</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>必须在发出OPEN命令之前设置绑定描述符长度。例如，您可以使用以下语句来设置用户输入的绑定变量字符串的长度：</p><pre class="oac_no_warn" dir="ltr">程序部门。 ...执行GET-INPUT-VAR从1乘1变化J直到JND&gt;在BNDDSC中的SQLDNUM。 ...GET-INPUT-VAR。显示“输入值”，BND-DH-VNAME（J）。接受输入字符串。在BNDDVLN（J）中以“”进入BND-DV（J）计数而取消输入输入字符串。
</pre><p>由于Oracle使用SELDV（J）或BNDDV（J）中的地址间接访问数据缓冲区，因此它不知道该缓冲区中值的长度。如果要更改Oracle用于第J个select-list或bind-variable值的长度，请将SELDVLN（J）或BNDDVLN（J）重置为所需的长度。每个输入或输出缓冲区可以具有不同的长度。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-6B91249B-4CDB-4CAF-AEAA-AAF2DE3CAEB0">SELDFMTL | BNDDFMTL</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这是一个包含select-list或bind-variable转换格式字符串长度的表。目前，您只能将它用于COBOL压缩十进制数。</p>
                     <p>格式字符串的使用是可选的。如果需要第J个选择列表项或绑定变量的转换格式，请在OPEN之前将SELDFMTL（J）或BNDDFMTL（J）设置为OPEN之前的SEL-DFMT或BND中存储的压缩十进制格式的长度 - DFMT。否则，将SELDFMTL（J）或BNDDFMTL（J）设置为零。</p>
                     <p>如果SELDFMTL（J）或BNDDFMTL（J）的值为零，则不使用SELDFMT（J）或BNDDFMT（J）。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-CF3D4A7C-EBF4-4E11-90A9-193EE3E80CF3">SELDVTYP | BNDDVTYP</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDVTYP | BNDDVTYP</span>表包含select-list或bind-variable值的数据类型代码。这些代码确定在存储在SELDV元素寻址的数据缓冲区中时如何转换Oracle数据。 “转换数据”中进一步描述了数据类型描述符表。<a id="d72777e725" class="indexterm-anchor"></a><a id="d72777e729" class="indexterm-anchor"></a><a id="d72777e731" class="indexterm-anchor"></a><a id="d72777e735" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-97AE56AC-97F6-468E-8F2F-BF52AB481580">选择描述符</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>DESCRIBE SELECT LIST将数据类型代码表设置为选择列表中项目的<span class="italic">内部</span>数据类型（例如，VARCHAR2，CHAR，NUMBER或DATE）。
                     </p>
                     <p>在执行FETCH之前，您可能希望重置某些数据类型，因为数据类型的内部格式可能难以处理。出于显示目的，将选择列表值的数据类型强制转换为VARCHAR2通常是个好主意。对于计算，您可能希望将数字从Oracle强制转换为COBOL格式。请参阅“强制数据类型”。</p>
                     <p>SELDVTYP（J）的高位被设置为指示第J个选择列表列的NULL /非NULL状态。在发出OPEN或FETCH命令之前，必须始终清除该位。使用库例程SQLNUL检索数据类型代码并清除NULL / not NULL位。有关更多信息，请参阅：“处理NULL /非NULL数据类型”。</p>
                     <p>最好将NUMBER内部数据类型更改为与SELDV（J）寻址的COBOL数据缓冲区兼容的外部数据类型。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-CA99F67A-F13B-4029-BD0D-1F94024D9334">绑定描述符</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>DESCRIBE BIND VARIABLES将数据类型代码表设置为零。在发出OPEN命令之前，必须重置数据类型表。代码表示由BNDDV（J）寻址的缓冲区的外部（COBOL）数据类型。通常，绑定变量值存储在字符串中，因此数据类型表元素设置为1（VARCHAR2数据类型代码）。</p>
                     <p>要更改第J个选择列表或绑定变量值的数据类型，请将SELDVTYP（J）或BNDDVTYP（J）重置为所需的数据类型。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-2AF7ED5B-8B4B-4F13-B693-C576DB00DBF8">SELDI | BNDDI</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDI | BNDDI</span>表包含存储指示符变量值的数据缓冲区的地址。您必须使用SQLADR设置SELDI或BNDDI的元素。<a id="d72777e769" class="indexterm-anchor"></a><a id="d72777e773" class="indexterm-anchor"></a><a id="d72777e775" class="indexterm-anchor"></a><a id="d72777e779" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-1B71D455-E519-443A-9345-940EBE2A9F92">选择描述符</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>必须在发出FETCH命令之前设置此表。当Oracle执行语句时</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FETCH ...使用描述符...
</pre><p>如果Jth返回的select-list值为NULL，则SELDI（J）寻址的缓冲区设置为-1。否则，将其设置为零（值不为NULL）或正整数（该值被截断）。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-819CB264-388F-4030-BD6A-D79E3C024CF7">绑定描述符</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>必须初始化此表并在发出OPEN命令之前设置关联的指示符变量。当Oracle执行语句时</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OPEN ...使用描述符...
</pre><p>BNDDI（J）寻址的缓冲区确定第J个绑定变量是否为NULL。如果指示符变量的值为-1，则其关联的绑定变量为NULL。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-E6FDA8CC-280C-4ED1-BB0E-E57DEFE10D24">SELDH-VNAME | BNDDH-VNAME</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDH-VNAME | BNDDH-VNAME</span>表包含存储在动态SQL语句中出现的选择列表或占位符名称的数据缓冲区的地址。在发出DESCRIBE命令之前，必须使用SQLADR设置SELDH-VNAME或BNDDH-VNAME的元素。<a id="d72777e811" class="indexterm-anchor"></a><a id="d72777e815" class="indexterm-anchor"></a><a id="d72777e817" class="indexterm-anchor"></a><a id="d72777e821" class="indexterm-anchor"></a></p>
                     <p>DESCRIBE指示Oracle将第J个选择列表项或占位符的名称存储在SELDH-VNAME（J）或BNDDH-VNAME（J）所寻址的数据缓冲区中。因此，Oracle将第J个选择列表或占位符名称存储在SEL-DH-VNAME（J）或BND-DH-VNAME（J）中。</p>
                     <div class="infoboxnote" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-13317B60-499D-4F45-A274-55A3189CF156">
                        <p class="notep1">注意：</p>
                        <p><span class="bold">SELDH-VNAME | BNDDH-VNAME</span>表仅包含列的名称， <span class="italic">而不</span>包含table-qualifier.column名称，即使您在SQL语句中提供它也是如此。例如，如果您要在SQL语句中对select-list进行描述， <code class="codeph">select a.owner from all_tables</code>软件将<code class="codeph">not a.owner</code>返回<code class="codeph">not a.owner</code> ，而是返回<code class="codeph">owner</code> 。如有必要，应使用列别名正确标识选择列表中的列。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-C0B20A3A-AD0F-47FC-B4A4-DAA12B133E45">SELDH-MAX-VNAMEL | BNDDH-MAX-VNAMEL</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDH-MAX-VNAMEL | BNDDH-MAX-VNAMEL</span>表包含存储选择列表或占位符名称的数据缓冲区的最大长度。缓冲区由SELDH-VNAME或BNDDH-VNAME的元素寻址。<a id="d72777e852" class="indexterm-anchor"></a><a id="d72777e856" class="indexterm-anchor"></a><a id="d72777e858" class="indexterm-anchor"></a><a id="d72777e862" class="indexterm-anchor"></a></p>
                     <p>在发出DESCRIBE命令之前，必须设置SELDH-MAX-VNAMEL或BNDDH-MAX-VNAMEL的元素。每个选择列表或占位符名称缓冲区可以具有不同的长度。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-9740DEA9-EDFB-4967-908A-32EEC4B992A3">SELDH-CUR-VNAMEL | BNDDH-CUR-VNAMEL</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDH-CUR-VNAMEL | BNDDH-CUR-VNAMEL</span>表包含选择列表或占位符名称的实际长度。DESCRIBE将实际长度表设置为每个选择列表或占位符名称中的字符数。<a id="d72777e875" class="indexterm-anchor"></a><a id="d72777e879" class="indexterm-anchor"></a><a id="d72777e881" class="indexterm-anchor"></a><a id="d72777e885" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-7BE6E3C7-159A-41F4-94AC-E401B43569A6">SELDI-VNAME | BNDDI-VNAME</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDI-VNAME | BNDDI-VNAME</span>表包含存储指示符变量名称的数据缓冲区的地址。
                     </p>
                     <p>您可以将指标变量值与选择列表项和绑定变量相关联。但是，您只能将指示符变量名称与绑定变量相关联。您只能将此表与绑定描述符一起使用。 <a id="d72777e898" class="indexterm-anchor"></a><a id="d72777e902" class="indexterm-anchor"></a><a id="d72777e904" class="indexterm-anchor"></a><a id="d72777e908" class="indexterm-anchor"></a> 在发出DESCRIBE命令之前，必须使用SQLADR设置BNDDI-VNAME的元素。
                     </p>
                     <p>DESCRIBE BIND VARIABLES指示Oracle将任何指示符变量名称存储在BNDDI-VNAME（1）通过BNDDI-VNAME（SQLDNUM）寻址的数据缓冲区中。因此，Oracle将第J个指示符变量名称存储在BND-DI-VNAME（J）中。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-E1575A9A-4C6F-464D-9049-7683EE9F5D25">SELDI-MAX-VNAMEL | BNDDI-MAX-VNAMEL</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDI-MAX-VNAMEL | BNDDI-MAX-VNAMEL</span>表包含存储指示符变量名称的数据缓冲区的最大长度。缓冲区由SELDI-VNAME或BNDDI-VNAME的元素寻址。</p>
                     <p>您只能将指示符变量名称与绑定变量相关联。您只能将此表与绑定描述符一起使用。<a id="d72777e924" class="indexterm-anchor"></a><a id="d72777e928" class="indexterm-anchor"></a><a id="d72777e930" class="indexterm-anchor"></a><a id="d72777e934" class="indexterm-anchor"></a></p>
                     <p>在发出DESCRIBE命令之前，必须将元素BNDDI-MAX-VNAMEL（1）设置为BNDDI-MAX-VNAMEL（SQLDNUM）。每个指示符变量名称缓冲区可以具有不同的长度。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-DB521173-970D-4811-81FC-C493F5DCB756">SELDI-CUR-VNAMEL | BNDDI-CUR-VNAMEL</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDI-CUR-VNAMEL | BNDDI-CUR-VNAMEL</span>表包含指标变量名称的实际长度。您只能将指示符变量名称与绑定变量相关联。您只能将此表与绑定描述符一起使用。<a id="d72777e948" class="indexterm-anchor"></a><a id="d72777e952" class="indexterm-anchor"></a><a id="d72777e954" class="indexterm-anchor"></a><a id="d72777e958" class="indexterm-anchor"></a></p>
                     <p>DESCRIBE BIND VARIABLES将实际长度表设置为每个指标变量名称中的字符数。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-94C634CB-2BC8-4C5E-93BA-A74F471B30AB">SELDFCLP | BNDDFCLP</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDFCLP | BNDDFCLP</span>表保留供将来使用。它必须存在，因为Oracle期望组项SELDSC或BNDDSC具有特定大小。 <a id="d72777e971" class="indexterm-anchor"></a><a id="d72777e975" class="indexterm-anchor"></a><a id="d72777e977" class="indexterm-anchor"></a><a id="d72777e981" class="indexterm-anchor"></a> 您当前必须将SELDFCLP和BNDDFCLP的元素设置为零。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50504330-0DCB-49BE-8FC8-E87C5BB55194__GUID-94D4B762-326E-4D46-A8D3-B35FFBC11C9C">SELDFCRCP | BNDDFCRCP</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">SELDFCRCP | BNDDFCRCP</span>表保留供将来使用。它必须存在，因为Oracle期望组项SELDSC或BNDDSC具有特定大小。 <a id="d72777e993" class="indexterm-anchor"></a><a id="d72777e997" class="indexterm-anchor"></a><a id="d72777e999" class="indexterm-anchor"></a><a id="d72777e1003" class="indexterm-anchor"></a> 必须将SELDFCRCP和BNDDFCRCP的元素设置为零。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="Oracle-dynamic-SQL-method-4.html#GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF">转换数据</a></li>
                        <li><a href="Oracle-dynamic-SQL-method-4.html#GUID-09B53741-283E-420D-988C-2E87D1CB505E">强制数据类型</a></li>
                        <li><a href="Oracle-dynamic-SQL-method-4.html#GUID-AEF3AEC0-3D49-45F1-910E-143DDA6E9A64">处理NULL /非NULL数据类型</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCB743"></a><div class="props_rev_3"><a id="GUID-D0FBC7DB-FF8D-4D08-A06D-1F3A1666BDA1" name="GUID-D0FBC7DB-FF8D-4D08-A06D-1F3A1666BDA1"></a><h3 id="LNPCB-GUID-D0FBC7DB-FF8D-4D08-A06D-1F3A1666BDA1" class="sect3"><span class="enumeration_section">11.4</span>先决条件知识</h3>
               <div>
                  <p>您需要具备以下主题的工作知识才能实现动态SQL方法4：<a id="d72777e1051" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用库例程SQLADR</p>
                     </li>
                     <li>
                        <p>转换数据</p>
                     </li>
                     <li>
                        <p>强制数据类型</p>
                     </li>
                     <li>
                        <p>处理NULL / not NULL数据类型</p>
                     </li>
                  </ul>
               </div><a id="LNPCB744"></a><div class="props_rev_3"><a id="GUID-EE6FD907-F6B2-49B6-BD60-453810E3EE59" name="GUID-EE6FD907-F6B2-49B6-BD60-453810E3EE59"></a><h4 id="LNPCB-GUID-EE6FD907-F6B2-49B6-BD60-453810E3EE59" class="sect4"><span class="enumeration_section">11.4.1</span>使用SQLADR</h4>
                  <div>
                     <div class="section">
                        <p>必须调用库子例程SQLADR以获取存储输入和输出值的数据缓冲区的地址。将地址存储在绑定中或选择SQLDA，以便Oracle知道读取绑定变量值的位置或写入选择列表值。</p>
                        <p>使用语法调用SQLADR<a id="d72777e1095" class="indexterm-anchor"></a><a id="d72777e1099" class="indexterm-anchor"></a><a id="d72777e1103" class="indexterm-anchor"></a><a id="d72777e1107" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">CALL“SQLADR”使用BUFFER，ADDRESS。</pre><p>哪里：</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-EE6FD907-F6B2-49B6-BD60-453810E3EE59__GUID-FC60596C-19D7-4B90-9BD4-227938C4A9C0"><!-- --></a> BUFFER</dt>
                           <dd>
                              <p>是一个数据缓冲区，用于存储选择列表项，绑定变量或指示符变量的值或名称。</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-EE6FD907-F6B2-49B6-BD60-453810E3EE59__GUID-5EBE25E8-190A-46E4-890F-182C58C34464"><!-- --></a>地址</dt>
                           <dd>
                              <p>是一个返回数据缓冲区地址的整数变量。</p>
                              <p>对SQLADR的调用将BUFFER的地址存储在ADDRESS中。下一个示例使用SQLADR初始化选择描述符表SELDV，SELDH-VNAME和SELDI。它们的元素用于选择列表值，选择列表名称和指示符值的数据缓冲区。</p><pre class="oac_no_warn" dir="ltr">程序部门。 ...执行INIT-SELDSC从1乘1变化J直到J&gt; SQLDSUM在SELDSC中。 ...INIT-SELDSC。使用SEL-DV（J），SELDV（J）调用“SQLADR”。使用SEL-DH-VNAME（J），SELDH-VNAME（J）调用“SQLADR”。使用SEL-DI（J），SELDI（J）调用“SQLADR”。</pre></dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB746"></a><a id="LNPCB747"></a><a id="LNPCB748"></a><a id="LNPCB749"></a><a id="LNPCB750"></a><a id="LNPCB751"></a><a id="LNPCB745"></a><div class="props_rev_3"><a id="GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF" name="GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF"></a><h4 id="LNPCB-GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF" class="sect4"><span class="enumeration_section">11.4.2</span>转换数据</h4>
                  <div>
                     <div class="section">
                        <p>本节提供有关数据类型描述符表的更多详细信息。在既不使用数据类型等效也不使用动态SQL方法4的主机程序中，内部和外部数据类型之间的转换是在预编译时确定的。默认情况下，Pro * COBOL为每个主机变量分配特定的外部数据类型。例如，Pro * COBOL将INTEGER外部数据类型分配给PIC S9（n）COMP类型的主机变量。</p>
                        <p>但是，方法4允许您控制数据转换和格式。您可以通过在数据类型描述符表中设置数据类型代码来指定转换。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__GUID-5D77D547-E448-4A32-BABC-5C59AE434063">内部数据类型</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>内部数据类型指定Oracle用于在数据库表中存储列值以表示伪列值的格式。<a id="d72777e1178" class="indexterm-anchor"></a><a id="d72777e1182" class="indexterm-anchor"></a></p>
                        <p>发出DESCRIBE SELECT LIST命令时，Oracle会将每个选择列表项的内部数据类型代码返回到SELDVTYP（数据类型）描述符表。例如，第J个选择列表项的数据类型代码将返回到SELDVTYP（J）。</p>
                        <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__G26357" title="q">表11-1</a>显示了内部数据类型及其代码：</p>
                        <div class="tblformal" id="GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__G26357">
                           <p class="titleintable">表11-1内部数据类型和相关代码</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="内部数据类型和相关代码" width="100%" border="1" summary="q" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d72777e1204">内部数据类型</th>
                                    <th align="left" valign="bottom" width="69%" id="d72777e1207">码</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d72777e1212" headers="d72777e1204 ">
                                       <p>VARCHAR2</p>
                                       <p>数</p>
                                       <p>长</p>
                                       <p>ROWID</p>
                                       <p>日期</p>
                                       <p>生的</p>
                                       <p>LONG RAW</p>
                                       <p>CHAR</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d72777e1212 d72777e1207 ">
                                       <p>1</p>
                                       <p>2</p>
                                       <p>8</p>
                                       <p>11</p>
                                       <p>12</p>
                                       <p>23</p>
                                       <p>24</p>
                                       <p>96</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__GUID-8F587216-E04A-4059-85A5-48CBE828EB41">外部数据类型</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>外部数据类型指定用于在输入和输出主机变量中存储值的格式。<a id="d72777e1252" class="indexterm-anchor"></a><a id="d72777e1256" class="indexterm-anchor"></a></p>
                        <p>DESCRIBE BIND VARIABLES命令将数据类型代码的BNDDVTYP表设置为零。因此，必须<span class="italic">在</span>发出OPEN命令<span class="italic">之前</span>重置代码。这些代码告诉Oracle各种绑定变量需要哪些外部数据类型。对于第J个绑定变量，将BNDDVTYP（J）重置为所需的外部数据类型。
                        </p>
                        <p>下表显示了外部数据类型及其代码，以及相应的COBOL数据类型：</p>
                        <div class="tblformal" id="GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__G26226">
                           <p class="titleintable">表11-2 Oracle外部和相关COBOL数据类型</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle外部和相关COBOL数据类型" width="100%" border="1" summary="q" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d72777e1278">名称</th>
                                    <th align="left" valign="bottom" width="11%" id="d72777e1281">码</th>
                                    <th align="left" valign="bottom" width="62%" id="d72777e1284">COBOL数据类型</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1289" headers="d72777e1278 ">
                                       <p>VARCHAR2</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1289 d72777e1281 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1289 d72777e1284 ">
                                       <p>当MODE = ANSI时，PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1302" headers="d72777e1278 ">
                                       <p>数</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1302 d72777e1281 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1302 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1315" headers="d72777e1278 ">
                                       <p>整数</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1315 d72777e1281 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1315 d72777e1284 ">
                                       <p>PIC S9（ <span class="italic">n</span> ）COMP</p>
                                       <p>（在SPARC Solaris 64位平台上使用COMP，而不是COMP5）</p>
                                       <p>PIC S9（ <span class="italic">n</span> ）COMP5</p>
                                       <p>（用于字节交换平台的COMP5）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1337" headers="d72777e1278 ">
                                       <p>浮动</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1337 d72777e1281 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1337 d72777e1284 ">
                                       <p>COMP-1</p>
                                       <p>COMP-2</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1349" headers="d72777e1278 ">
                                       <p>STRING（ <a href="Oracle-dynamic-SQL-method-4.html#GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__CDDHDHEH">1</a> ）</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1349 d72777e1281 ">
                                       <p>五</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1349 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1365" headers="d72777e1278 ">
                                       <p>VARNUM</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1365 d72777e1281 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1365 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1378" headers="d72777e1278 ">
                                       <p>DECIMAL</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1378 d72777e1281 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1378 d72777e1284 ">
                                       <p>PIC S9（n）V9（n）COMP-3</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1388" headers="d72777e1278 ">
                                       <p>长</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1388 d72777e1281 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1388 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1401" headers="d72777e1278 ">
                                       <p>VARCHAR（ <a href="Oracle-dynamic-SQL-method-4.html#GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__I10728">2</a> ）</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1401 d72777e1281 ">
                                       <p>9</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1401 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）变化</p>
                                       <p>PIC N（ <span class="italic">n</span> ）变化</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1422" headers="d72777e1278 ">
                                       <p>ROWID</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1422 d72777e1281 ">
                                       <p>11</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1422 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1435" headers="d72777e1278 ">
                                       <p>日期</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1435 d72777e1281 ">
                                       <p>12</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1435 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1449" headers="d72777e1278 ">
                                       <p>VARRAW（ <a href="Oracle-dynamic-SQL-method-4.html#GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__I10728">2</a> ）</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1449 d72777e1281 ">
                                       <p>15</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1449 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1465" headers="d72777e1278 ">
                                       <p>生的</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1465 d72777e1281 ">
                                       <p>23</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1465 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1478" headers="d72777e1278 ">
                                       <p>LONG RAW</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1478 d72777e1281 ">
                                       <p>24</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1478 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1491" headers="d72777e1278 ">
                                       <p>UNSIGNED</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1491 d72777e1281 ">
                                       <p>68</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1491 d72777e1284 ">
                                       <p>（不支持）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1501" headers="d72777e1278 ">
                                       <p>显示</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1501 d72777e1281 ">
                                       <p>91</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1501 d72777e1284 ">
                                       <p>PIC S9 ... 9V9 ... 9显示标志领先独立</p>
                                       <p>PIC S9（ <span class="italic">n</span> ）V9（ <span class="italic">n</span> ）显示标志领先分离</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1519" headers="d72777e1278 ">
                                       <p>LONG VARCHAR（ <a href="Oracle-dynamic-SQL-method-4.html#GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__I10728">2</a> ）</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1519 d72777e1281 ">
                                       <p>94</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1519 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1535" headers="d72777e1278 ">
                                       <p>长萝卜（ <a href="Oracle-dynamic-SQL-method-4.html#GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__I10728">2</a> ）</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1535 d72777e1281 ">
                                       <p>95</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1535 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1551" headers="d72777e1278 ">
                                       <p>CHARF</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1551 d72777e1281 ">
                                       <p>96</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1551 d72777e1284 ">
                                       <p>当MODE = ANSI时，PIC X（ <span class="italic">n</span> ）</p>
                                       <p>当MODE = ANSI时，PIC N（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1569" headers="d72777e1278 ">
                                       <p>CHARZ（ <a href="Oracle-dynamic-SQL-method-4.html#GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__CDDHDHEH">1</a> ）</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1569 d72777e1281 ">
                                       <p>97</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1569 d72777e1284 ">
                                       <p>PIC X（ <span class="italic">n</span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d72777e1585" headers="d72777e1278 ">
                                       <p>光标</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d72777e1585 d72777e1281 ">
                                       <p>102</p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d72777e1585 d72777e1284 ">
                                       <p>SQL游标</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><span class="bold">备注</span> ：</p>
                        <ol>
                           <li id="GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__CDDHDHEH">
                              <p>仅用于EXEC SQL VAR语句。</p>
                           </li>
                           <li id="GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__I10728">
                              <p>包括<span class="italic">n</span>字节长度字段。
                              </p>
                           </li>
                        </ol>
                        <p>有关数据类型及其格式的详细信息，请参阅“Oracle数据库数据类型”。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__GUID-9AA8E668-882C-4BB4-99C7-AD45848486AF">PL / SQL数据类型</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>PL / SQL提供了各种预定义的标量和复合数据类型。<span class="italic">标量</span>类型没有内部组件。<span class="italic">复合</span>类型具有可以单独操作的内部组件。“初始化描述符”显示预定义的PL / SQL标量数据类型及其内部数据类型等效性</p>
                        <div class="tblformal" id="GUID-55C667BD-07E8-44F1-BCF9-4C80354634AF__GUID-60D6D1A9-FEC6-4488-B8C2-D6E19A014E33">
                           <p class="titleintable">表11-3 <span class="italic"><span class="bold">具有内部数据类型的PL / SQL数据类型等效项</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="具有内部数据类型的PL / SQL数据类型等效性" width="100%" border="1" summary="q" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d72777e1634">PL / SQL数据类型</th>
                                    <th align="left" valign="bottom" width="69%" id="d72777e1637">Oracle内部数据类型</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d72777e1642" headers="d72777e1634 ">
                                       <p>VARCHAR</p>
                                       <p>VARCHAR2</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d72777e1642 d72777e1637 ">
                                       <p>VARCHAR2</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d72777e1651" headers="d72777e1634 ">
                                       <p>BINARY_INTEGER</p>
                                       <p>DEC</p>
                                       <p>DECIMAL</p>
                                       <p>双精度</p>
                                       <p>浮动</p>
                                       <p>INT</p>
                                       <p>整数</p>
                                       <p>自然</p>
                                       <p>数</p>
                                       <p>数字</p>
                                       <p>正</p>
                                       <p>真实</p>
                                       <p>SMALLINT</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d72777e1651 d72777e1637 ">
                                       <p>数</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d72777e1683" headers="d72777e1634 ">
                                       <p>长</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d72777e1683 d72777e1637 ">
                                       <p>长</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d72777e1690" headers="d72777e1634 ">
                                       <p>ROWID</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d72777e1690 d72777e1637 ">
                                       <p>ROWID</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d72777e1697" headers="d72777e1634 ">
                                       <p>日期</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d72777e1697 d72777e1637 ">
                                       <p>日期</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d72777e1704" headers="d72777e1634 ">
                                       <p>生的</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d72777e1704 d72777e1637 ">
                                       <p>生的</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d72777e1711" headers="d72777e1634 ">
                                       <p>LONG RAW</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d72777e1711 d72777e1637 ">
                                       <p>LONG RAW</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d72777e1718" headers="d72777e1634 ">
                                       <p>CHAR</p>
                                       <p>字符</p>
                                       <p>串</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d72777e1718 d72777e1637 ">
                                       <p>CHAR</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="datatypes-and-host-variables.html#GUID-6B4F2049-A1CB-4FDA-9CA5-DBC64865DE60">Oracle数据库数据类型</a></li>
                           <li><a href="Oracle-dynamic-SQL-method-4.html#GUID-20A4B1C9-9C1C-41C8-818D-1BA0BCB0C4E8">初始化描述符</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCB753"></a><a id="LNPCB754"></a><a id="LNPCB755"></a><a id="LNPCB752"></a><div class="props_rev_3"><a id="GUID-09B53741-283E-420D-988C-2E87D1CB505E" name="GUID-09B53741-283E-420D-988C-2E87D1CB505E"></a><h4 id="LNPCB-GUID-09B53741-283E-420D-988C-2E87D1CB505E" class="sect4"><span class="enumeration_section">11.4.3</span>强制数据类型</h4>
                  <div>
                     <div class="section">
                        <p>对于选择描述符，DESCRIBE SELECT LIST可以返回任何内部数据类型。通常，与字符数据一样，内部数据类型与您要使用的外部数据类型完全对应。但是，一些内部数据类型映射到可能难以处理的外部数据类型。因此，您可能希望重置SELDVTYP描述符表中的某些元素。</p>
                        <p>例如，您可能希望将NUMBER值重置为FLOAT值，这些值对应于COBOL中的PIC S9（ <span class="italic">n</span> ）V9（ <span class="italic">n</span> ）COMP-1值。 Oracle在FETCH时间执行内部和外部数据类型之间的任何必要转换。一定要重置数据类型的DESCRIBE SELECT LIST <span class="italic">之后</span> ，但<span class="italic">之前</span>的FETCH。<a id="d72777e1800" class="indexterm-anchor"></a><a id="d72777e1804" class="indexterm-anchor"></a><a id="d72777e1809" class="indexterm-anchor"></a></p>
                        <p>对于绑定描述符，DESCRIBE BIND VARIABLES <span class="italic">并不</span>返回绑定变量的数据类型，只是它们的数量和名称。因此，必须显式设置数据类型代码的BNDDVTYP表，以告知Oracle每个绑定变量的外部数据类型。Oracle在OPEN时执行外部和内部数据类型之间的任何必要转换。
                        </p>
                        <p>在SELDVTYP或BNDDVTYP描述符表中重置数据类型代码时，您将“强制数据类型”。例如，要将Jth select-list值强制转换为VARCHAR2，请使用以下语句：</p><pre class="oac_no_warn" dir="ltr">*将选择列表值强制转换为VARCHAR2。移动1到SELDVTYP（J）。
</pre><p>将NUMBER选择列表值强制转换为VARCHAR2以进行显示时，还必须提取值的精度和比例字节，并使用它们计算最大显示长度。然后，在FETCH之前，必须重置SELDVLN（长度）描述符表的相应元素，以告知Oracle要使用的缓冲区长度。要指定第J个选择列表值的长度，请将SELDVLN（J）设置为所需的长度。<a id="d72777e1824" class="indexterm-anchor"></a></p>
                        <p>例如，如果DESCRIBE SELECT LIST发现第J个选择列表项的类型为NUMBER，并且您希望将返回的值存储在声明为PIC S9（ <span class="italic">n</span> ）V9（ <span class="italic">n</span> ）COMP-1的COBOL变量中，则只需设置SELDVTYP （J）到4和SELDVLN（J）到你系统上COMP-1号的长度。<a id="d72777e1836" class="indexterm-anchor"></a></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-09B53741-283E-420D-988C-2E87D1CB505E__GUID-B6F9F4E7-3B79-46C2-8FD5-578C3ED47C3C">例外</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在某些情况下，DESCRIBE SELECT LIST返回的内部数据类型可能不适合您的目的。两个例子是DATE和NUMBER。当您描述DATE选择列表项时，Oracle将数据类型代码12返回给SELDVTYP表。除非您在FETCH之前重置代码，否则日期值将以其7字节内部格式返回。要以默认字符格式获取日期，必须将数据类型代码从12更改为1（VARCHAR2），并将SELDVLN值从7增加到9。</p>
                        <p>同样，当您描述NUMBER选择列表项时，Oracle会将数据类型代码2返回给SELDVTYP表。除非您在FETCH之前重置代码，否则数值将以其内部格式返回，这可能是不可取的。因此，将代码从2更改为1（VARCHAR2），3（INTEGER），4（FLOAT）或其他一些适当的数据类型。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-09B53741-283E-420D-988C-2E87D1CB505E__i9038">
                        <p class="subhead3" id="GUID-09B53741-283E-420D-988C-2E87D1CB505E__GUID-69DA4C82-AF9D-4944-A22C-E80CDB144710">提取精度和规模</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>库子例程SQLPRC提取精度和比例。通常，它在DESCRIBE SELECT LIST之后使用，其第一个参数是SELDVLN（J）。要调用SQLPRC，请使用以下语法<a id="d72777e1854" class="indexterm-anchor"></a><a id="d72777e1858" class="indexterm-anchor"></a><a id="d72777e1862" class="indexterm-anchor"></a><a id="d72777e1866" class="indexterm-anchor"></a><a id="d72777e1870" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">使用LENGTH，PRECISION，SCALE调用“SQLPRC”。</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-09B53741-283E-420D-988C-2E87D1CB505E__GUID-C9258260-DE17-4F1F-8394-19B400F8BD03">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="q" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d72777e1886">句法</th>
                                    <th align="left" valign="bottom" width="71%" id="d72777e1889">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d72777e1894" headers="d72777e1886 ">
                                       <p>长度</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d72777e1894 d72777e1889 ">
                                       <p>是一个整数变量，用于存储NUMBER值的长度。值的比例和精度分别存储在低位和高位字节中。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d72777e1901" headers="d72777e1886 ">
                                       <p>精确</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d72777e1901 d72777e1889 ">
                                       <p>是一个整数变量，它返回NUMBER值的<span class="italic">精度</span> 。Precision是有效数字的位数。如果select-list项指的是未指定大小的NUMBER，则设置为零。在这种情况下，由于未指定大小，因此假设最大精度为38。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d72777e1911" headers="d72777e1886 ">
                                       <p>规模</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d72777e1911 d72777e1889 ">
                                       <p>是一个整数变量，它返回NUMBER值的<span class="italic">比例</span> 。Scale指定舍入将发生的位置。例如，2的刻度表示该值四舍五入到最接近的百分位数（3.456变为3.46）;等级为-3表示该数字四舍五入到最接近的千位（3.456变为3000）。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>以下示例显示如何使用SQLPRC计算将被强制转换为VARCHAR2的NUMBER值的最大显示长度：<a id="d72777e1922" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">工作储存部分。 01 PRECISION PIC S9（9）COMP。 01 SCALE PIC S9（9）COMP。 01 DISPLAY-LENGTH PIC S9（9）COMP。 01 MAX-LENGTH PIC S9（9）COMP值80。...程序部门。 ...执行ADJUST-LENGTH变化J从1乘1直到J&gt; SQLDNUM在SELDSC中。调整长度。 *如果数据类型为NUMBER，则提取精度和比例。如果SELDVTYP（J）= 2使用SELDVLN（J），PRECISION，SCALE调用“SQLPRC”。移动0显示 - 长度。 *如果选择列表项*指的是未指定大小的NUMBER，则精度设置为零。我们允许*最大精度为10。如果SELDVTYP（J）= 2且PRECISION = 0则移动10到显示长度。 *允许可能的小数点和符号。如果SELDVTYP（J）= 2且精度&gt; 0则增加2以精确度显示精度以显示长度。 ...
</pre><p>请注意，子例程调用中的第一个参数是选择列表长度表中的第J个元素。</p>
                        <p>在SQLLIB运行时库中定义的SQLPRC过程将返回零作为某些SQL数据类型的精度和小数位数值。SQLPR2过程类似于SQLPRC，因为它具有相同的语法并返回相同的二进制值，但此表中显示的数据类型除外：</p>
                        <div class="tblformal" id="GUID-09B53741-283E-420D-988C-2E87D1CB505E__GUID-7825952A-C4BD-4FDC-9389-AA5090FA6DBE">
                           <p class="titleintable">表11-4 SQLPR2过程的数据类型例外</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SQLPR2过程的数据类型异常" width="100%" border="1" summary="q" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d72777e1943">SQL数据类型</th>
                                    <th align="left" valign="bottom" width="29%" id="d72777e1946">二进制精度</th>
                                    <th align="left" valign="bottom" width="36%" id="d72777e1949">二进制比例</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d72777e1954" headers="d72777e1943 ">
                                       <p>浮动</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d72777e1954 d72777e1946 ">
                                       <p>126</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d72777e1954 d72777e1949 ">
                                       <p>-127</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d72777e1964" headers="d72777e1943 ">
                                       <p>FLOAT（ <span class="italic">n</span> ）</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d72777e1964 d72777e1946 ">
                                       <p><span class="italic">n</span> （范围是1 ..126）</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d72777e1964 d72777e1949 ">
                                       <p>-127</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d72777e1979" headers="d72777e1943 ">
                                       <p>真实</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d72777e1979 d72777e1946 ">
                                       <p>63</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d72777e1979 d72777e1949 ">
                                       <p>-127</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d72777e1989" headers="d72777e1943 ">
                                       <p>双精度</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d72777e1989 d72777e1946 ">
                                       <p>126</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d72777e1989 d72777e1949 ">
                                       <p>-127</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB756"></a><div class="props_rev_3"><a id="GUID-AEF3AEC0-3D49-45F1-910E-143DDA6E9A64" name="GUID-AEF3AEC0-3D49-45F1-910E-143DDA6E9A64"></a><h4 id="LNPCB-GUID-AEF3AEC0-3D49-45F1-910E-143DDA6E9A64" class="sect4"><span class="enumeration_section">11.4.4</span>处理NULL /非NULL数据类型</h4>
                  <div>
                     <div class="section">
                        <p>对于每个select-list列（非表达式），DESCRIBE SELECT LIST在select描述符的数据类型表中返回NULL / not NULL指示。如果第J个select-list列被约束为非NULL，则SELDVTYP（J）数据类型变量的高位清零;否则，它被设定。<a id="d72777e2023" class="indexterm-anchor"></a></p>
                        <p>在OPEN或FETCH语句中使用数据类型之前，如果设置了NULL状态位，则必须清除它。永远不要设置位。</p>
                        <p>您可以使用库例程SQLNUL来查明列是否允许NULL数据类型并清除数据类型的NULL状态位。您可以使用语法调用SQLNUL<a id="d72777e2033" class="indexterm-anchor"></a><a id="d72777e2037" class="indexterm-anchor"></a><a id="d72777e2041" class="indexterm-anchor"></a><a id="d72777e2045" class="indexterm-anchor"></a><a id="d72777e2049" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">使用VALUE-TYPE，TYPE-CODE，NULL-STATUS调用“SQLNUL”。</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-AEF3AEC0-3D49-45F1-910E-143DDA6E9A64__GUID-66F7E3E6-7ED7-40AF-9814-0F4A0621EADC">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="q" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d72777e2065">句法</th>
                                    <th align="left" valign="bottom" width="71%" id="d72777e2068">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d72777e2073" headers="d72777e2065 ">
                                       <p>值类型</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d72777e2073 d72777e2068 ">
                                       <p>是一个2字节的整数变量，用于存储select-list列的数据类型代码。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d72777e2080" headers="d72777e2065 ">
                                       <p>TYPE-CODE</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d72777e2080 d72777e2068 ">
                                       <p>是一个2字节的整数变量，它返回清除高位的select-list列的数据类型代码。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d72777e2087" headers="d72777e2065 ">
                                       <p>NULL-STATUS</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d72777e2087 d72777e2068 ">
                                       <p>是一个整数变量，它返回select-list列的NULL状态。 1表示该列允许NULL; 0意味着它没有。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>以下示例显示如何使用SQLNUL：<a id="d72777e2095" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">工作储存部分。 ...*为子程序调用声明变量。01 NULL-STATUS PIC S9（9）COMP。 ...程序部门。主要。执行SQL WHENEVER SQLERROR GOTO SQL-ERROR END-EXEC。 ...执行HANDLE-NULLS从1乘1变化J直到J&gt; SQLDNUM在SELDSC中。 ...把手空值。 *找出列是否为NULL，并清除高位。使用SELDVTYP（J），SELDVTYP（J），NULL-STATUS调用“SQLNUL”。 *如果NULL-STATUS = 1，则允许NULL。
</pre><p>请注意，子例程调用中的第一个和第二个参数是相同的。它们分别是清除NULL状态位之前和之后的数据类型变量。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCB757"></a><div class="props_rev_3"><a id="GUID-2235722D-A4D2-453D-99EE-339F48C96F28" name="GUID-2235722D-A4D2-453D-99EE-339F48C96F28"></a><h3 id="LNPCB-GUID-2235722D-A4D2-453D-99EE-339F48C96F28" class="sect3"><span class="enumeration_section">11.5</span>基本步骤</h3>
               <div>
                  <div class="section">
                     <p>方法4可用于处理<span class="italic">任何</span>动态SQL语句。在“使用方法4使用主机表”中的示例中，将处理查询，以便您可以查看如何处理输入和输出主机变量。<a id="d72777e2132" class="indexterm-anchor"></a></p>
                     <p>要处理动态查询，我们的示例程序采取以下步骤：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>声明用于保存查询文本的主机字符串。</span></li>
                     <li><span>声明选择和绑定描述符。</span></li>
                     <li><span>设置可以DESCRIBEd的选择列表项和占位符的最大数量。</span></li>
                     <li><span>初始化select和bind描述符。</span></li>
                     <li><span>将查询文本存储在主机字符串中。</span></li>
                     <li><span>从主机字符串中预处理查询。</span></li>
                     <li><span>为查询DECLARE游标。</span></li>
                     <li><span>将绑定变量描述为绑定描述符。</span></li>
                     <li><span>将占位符数量重置为DESCRIBE实际找到的数量。</span></li>
                     <li><span>获取DESCRIBE找到的绑定变量的值。</span></li>
                     <li><span>使用绑定描述符打开游标。</span></li>
                     <li><span>将选择列表描述为选择描述符。</span></li>
                     <li><span>将选择列表项的数量重置为DESCRIBE实际找到的数字。</span></li>
                     <li><span>重置每个选择列表项的长度和数据类型以用于显示目的。</span></li>
                     <li><span>使用select描述符从数据库INTO数据缓冲区中FETCH一行。</span></li>
                     <li><span>处理FETCH返回的select-list值。</span></li>
                     <li><span>当FETCH没有更多行时关闭光标。</span></li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-2235722D-A4D2-453D-99EE-339F48C96F28__GUID-0298A330-FE6C-4FAB-B79C-1387031B9E06">
                        <p class="notep1">注意：</p>
                        <p>如果动态SQL语句<span class="italic">不是</span>查询或包含已知数量的选择列表项或占位符，则前面的一些步骤是不必要的。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="Oracle-dynamic-SQL-method-4.html#GUID-3CE8E1BC-F39A-42A6-A01C-D2277ADABB36">使用方法4的主机表</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCB758"></a><div class="props_rev_3"><a id="GUID-2BC00CD0-1649-4E6B-B12F-CBBE7ECF0ABE" name="GUID-2BC00CD0-1649-4E6B-B12F-CBBE7ECF0ABE"></a><h3 id="LNPCB-GUID-2BC00CD0-1649-4E6B-B12F-CBBE7ECF0ABE" class="sect3"><span class="enumeration_section">11.6</span>仔细研究每一步</h3>
               <div>
                  <p>本节将更详细地讨论每个步骤。本章末尾将介绍说明方法4的完整示例程序。使用方法4，您可以使用以下嵌入式SQL语句序列：<a id="d72777e2231" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL PREPARE &lt;statement_name&gt; FROM {：&lt;host_string&gt; | &lt;string_literal&gt;} END-EXEC。 EXEC SQL DECLARE &lt;cursor_name&gt; CURSOR FOR &lt;statement_name&gt; END-EXEC。对于&lt;statement_name&gt; INTO &lt;bind_descriptor_name&gt; END-EXEC，EXEC SQL DESCRIBE BIND VARIABLES。 EXEC SQL OPEN &lt;cursor_name&gt; [USING DESCRIPTOR &lt;bind_descriptor_name&gt;] END-EXEC。 EXEC SQL DESCRIBE [SELECT LIST FOR] &lt;statement_name&gt; INTO &lt;select_descriptor_name&gt; END-EXEC。 EXEC SQL FETCH &lt;cursor_name&gt; USING DESCRIPTOR &lt;select_descriptor_name&gt; END-EXEC。 EXEC SQL CLOSE &lt;cursor_name&gt; END-EXEC。</pre><p>如果已知动态查询中的选择列表项的数量，则可以省略DESCRIBE SELECT LIST并使用以下方法3 FETCH语句：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FETCH &lt;cursor_name&gt; INTO &lt;host_variable_list&gt; END-EXEC。</pre><p>或者，如果已知动态SQL语句中绑定变量的占位符数，则可以省略DESCRIBE BIND VARIABLES并使用以下方法3 OPEN语句：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OPEN &lt;cursor_name&gt; [USING &lt;host_variable_list&gt;] END-EXEC。</pre><p>下一节将说明这些语句如何允许宿主程序使用描述符接受和处理动态SQL语句。</p>
                  <div class="infoboxnote" id="GUID-2BC00CD0-1649-4E6B-B12F-CBBE7ECF0ABE__GUID-F85B379C-EEEE-41AB-A44D-A218E537FD41">
                     <p class="notep1">注意：</p>
                     <p>以下讨论伴随着几个数字。为了避免使图形混乱，有必要将描述符表限制为3个元素，并将名称和值的最大长度分别限制为5个和10个字符。</p>
                  </div>
               </div><a id="LNPCB759"></a><div class="props_rev_3"><a id="GUID-53813A15-CF5D-4A42-B04B-9F678FBC261F" name="GUID-53813A15-CF5D-4A42-B04B-9F678FBC261F"></a><h4 id="LNPCB-GUID-53813A15-CF5D-4A42-B04B-9F678FBC261F" class="sect4"><span class="enumeration_section">11.6.1</span>声明主机字符串</h4>
                  <div>
                     <div class="section">
                        <p>您的程序需要一个宿主变量来存储动态SQL语句的文本。必须将主变量（在我们的示例中为SELECTSTMT）声明为字符串：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION END-EXEC。 ...01 SELECTSTMT PIC X（120）。EXEC SQL END DECLARE SECTION END-EXEC。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB760"></a><div class="props_rev_3"><a id="GUID-6F093975-E5AE-4677-BA1C-B35C09E580E3" name="GUID-6F093975-E5AE-4677-BA1C-B35C09E580E3"></a><h4 id="LNPCB-GUID-6F093975-E5AE-4677-BA1C-B35C09E580E3" class="sect4"><span class="enumeration_section">11.6.2</span>声明SQLDA</h4>
                  <div>
                     <div class="section">
                        <p>因为我们示例中的查询可能包含未知数量的选择列表项或占位符，所以必须声明选择和绑定描述符。您可以使用INCLUDE将它们复制到程序中，而不是对SQLDAs进行硬编码，如下所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL包含SELDSC END-EXEC。 EXEC SQL包含BNDDSC END-EXEC。</pre><p>作为参考，SELDSC的INCLUDEd声明如下：</p><pre class="oac_no_warn" dir="ltr">工作储存部分。 ...01 SELDSC。 05 SQLDNUM PIC S9（9）COMP。 05 SQLDFND PIC S9（9）COMP。 05 SELDVAR发生3次。 10 SELDV PIC S9（9）COMP。 10 SELDFMT PIC S9（9）COMP。 10 SELDVLN PIC S9（9）COMP。 10 SELDFMTL PIC S9（4）COMP。 10 SELDVTYP PIC S9（4）COMP。 10 SELDI PIC S9（9）COMP。 10 SELDH-VNAME PIC S9（9）COMP。 10 SELDH-MAX-VNAMEL PIC S9（4）COMP。 10 SELDH-CUR-VNAMEL PIC S9（4）COMP。 10 SELDI-VNAME PIC S9（9）COMP。 10 SELDI-MAX-VNAMEL PIC S9（4）COMP。 10 SELDI-CUR-VNAMEL PIC S9（4）COMP。 10 SELDFCLP PIC S9（9）COMP。 10 SELDFCRCP PIC S9（9）COMP。 01 XSELDI。 05 SEL-DI发生3次PIC S9（9）COMP。 01 XSELDIVNAME。 05 SEL-DI-VNAME发生3次PIC X（5）。01 XSELDV。 05 SEL-DV发生3次PIC X（10）。01 XSELDHVNAME。 05 SEL-DH-VNAME发生3次PIC X（5）。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB761"></a><div class="props_rev_3"><a id="GUID-5560D184-F3DB-47B0-B2E3-9D2A81670552" name="GUID-5560D184-F3DB-47B0-B2E3-9D2A81670552"></a><h4 id="LNPCB-GUID-5560D184-F3DB-47B0-B2E3-9D2A81670552" class="sect4"><span class="enumeration_section">11.6.3</span>设置最大编号为DESCRIBE</h4>
                  <div>
                     <div class="section">
                        <p>接下来，您可以设置可以描述的选择列表项或占位符的最大数量，如下所示：</p><pre class="oac_no_warn" dir="ltr">在SELDSC中移动3到SQLDNUM。在BNDDSC中移动3到SQLDNUM。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB763"></a><a id="LNPCB764"></a><a id="LNPCB762"></a><div class="props_rev_3"><a id="GUID-20A4B1C9-9C1C-41C8-818D-1BA0BCB0C4E8" name="GUID-20A4B1C9-9C1C-41C8-818D-1BA0BCB0C4E8"></a><h4 id="LNPCB-GUID-20A4B1C9-9C1C-41C8-818D-1BA0BCB0C4E8" class="sect4"><span class="enumeration_section">11.6.4</span>初始化描述符</h4>
                  <div>
                     <div class="section">
                        <p>您必须初始化几个描述符变量。有些需要库子例程SQLADR。</p>
                        <p>在我们的示例中，您将名称缓冲区的最大长度存储在SELDH-MAX-VNAMEL，BNDDH-MAX-VNAMEL和BNDDI-MAX-VNAMEL表中，并使用SQLADR在SELDV中存储值和名称缓冲区的地址， SELDI，BNDDV，BNDDI，SELDH-VNAME，BNDDH-VNAME和BNDDI-VNAME表。 <a id="d72777e2365" class="indexterm-anchor"></a> 
                        </p><pre class="oac_no_warn" dir="ltr">程序部门。 ...执行INIT-SELDSC从1乘1变化J直到J&gt; SQLDSUM在SELDSC中。执行INIT-BNDDSC从1比1变化J直到JND&gt;在BNDDSC中的SQLDNUM。 ...INIT-SELDSC。移动空间到SEL-DV（J）。将空间移动到SEL-DH-VNAME（J）。移动5到SELDH-MAX-VNAMEL（J）。使用SEL-DV（J），SELDV（J）调用“SQLADR”。使用SEL-DH-VNAME（J），SELDH-VNAME（J）调用“SQLADR”。使用SEL-DI（J），SELDI（J）调用“SQLADR”。...INIT-BNDDSC。移动空间到BND-DV（J）。移动到BND-DH-VNAME（J）的空间。移动空间到BND-DI-VNAME（J）。移动5到BNDDH-MAX-VNAMEL（J）。移动5到BNDDI-MAX-VNAMEL（J）。使用BND-DV（J），BNDDV（J）调用“SQLADR”。使用BND-DH-VNAME（J），BNDDH-VNAME（J）调用“SQLADR”。使用BND-DI（J），BNDDI（J）调用“SQLADR”。使用BND-DI-VNAME（J），BNDDI-VNAME（J）调用“SQLADR”。...
</pre><p><a href="Oracle-dynamic-SQL-method-4.html#GUID-20A4B1C9-9C1C-41C8-818D-1BA0BCB0C4E8__I10618">图11-3</a>和<a href="Oracle-dynamic-SQL-method-4.html#GUID-20A4B1C9-9C1C-41C8-818D-1BA0BCB0C4E8__I10659">图11-4</a>表示结果描述符。
                        </p>
                        <div class="figure" id="GUID-20A4B1C9-9C1C-41C8-818D-1BA0BCB0C4E8__I10618">
                           <p class="titleinfigure">图11-3初始化的选择描述符</p><img src="img/pco81007.gif" alt="下面是图11-3的描述" title="下面是图11-3的描述" longdesc="img_text/pco81007.html"><br><a href="img_text/pco81007.html">“图11-3初始化选择描述符”的描述</a></div>
                        <!-- class="figure" -->
                        <div class="figure" id="GUID-20A4B1C9-9C1C-41C8-818D-1BA0BCB0C4E8__I10659">
                           <p class="titleinfigure">图11-4初始化的绑定描述符</p><img src="img/pco81008.gif" alt="下面是图11-4的描述" title="下面是图11-4的描述" longdesc="img_text/pco81008.html"><br><a href="img_text/pco81008.html">“图11-4初始化绑定描述符”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB765"></a><div class="props_rev_3"><a id="GUID-E60D5DB8-2307-412A-B983-2B7961F42C19" name="GUID-E60D5DB8-2307-412A-B983-2B7961F42C19"></a><h4 id="LNPCB-GUID-E60D5DB8-2307-412A-B983-2B7961F42C19" class="sect4"><span class="enumeration_section">11.6.5</span>将查询文本存储在主机字符串中</h4>
                  <div>
                     <div class="section">
                        <p>接下来，提示用户输入SQL语句，然后将输入字符串存储在SELECTSTMT中，如下所示：</p><pre class="oac_no_warn" dir="ltr">显示“输入SELECT语句：”没有进展。接受SELECTSTMT。</pre><p>我们假设用户输入以下字符串：</p><pre class="oac_no_warn" dir="ltr">SELECT ENAME，EMPNO，COMM from EMP WHERE COMM &lt;：BONUS</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB766"></a><div class="props_rev_3"><a id="GUID-6988273B-7782-435F-808B-78F7851D4A34" name="GUID-6988273B-7782-435F-808B-78F7851D4A34"></a><h4 id="LNPCB-GUID-6988273B-7782-435F-808B-78F7851D4A34" class="sect4"><span class="enumeration_section">11.6.6</span>从主机字符串中<span class="enumeration_section">预处理</span>查询</h4>
                  <div>
                     <div class="section">
                        <p>PREPARE解析SQL语句并为其命名。在我们的示例中，PREPARE解析主机字符串SELECTSTMT并为其命名为SQLSTMT，如下所示：<a id="d72777e2444" class="indexterm-anchor"></a><a id="d72777e2448" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL PREPARE SQLSTMT FROM：SELECTSTMT END-EXEC。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB767"></a><div class="props_rev_3"><a id="GUID-1CE2B4F0-2C17-460A-8EB5-E88551C4ABFF" name="GUID-1CE2B4F0-2C17-460A-8EB5-E88551C4ABFF"></a><h4 id="LNPCB-GUID-1CE2B4F0-2C17-460A-8EB5-E88551C4ABFF" class="sect4"><span class="enumeration_section">11.6.7</span> DECLARE一个游标</h4>
                  <div>
                     <div class="section">
                        <p>DECLARE CURSOR通过为游标指定名称并将其与特定的SELECT语句相关联来定义游标。</p>
                        <p>要为静态查询声明游标，请使用以下语法：<a id="d72777e2481" class="indexterm-anchor"></a><a id="d72777e2485" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE cursor_name CURSOR FOR SELECT ...
</pre><p>要为动态查询声明游标，PREPARE为动态查询指定的语句名称将替换静态查询。在我们的示例中，DECLARE CURSOR定义了一个名为EMPCURSOR的游标，并将其与SQLSTMT关联，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQLSTMT END-EXEC的EXEC SQL DECLARE EMPCURSOR CURSOR。</pre><div class="infoboxnote" id="GUID-1CE2B4F0-2C17-460A-8EB5-E88551C4ABFF__GUID-8C1C9C72-4588-4F32-AF0D-5C9EC1DE70F1">
                           <p class="notep1">注意：</p>
                           <p>您必须为所有动态SQL语句声明游标，而不仅仅是查询。对于非查询，OPENing游标执行动态SQL语句。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB769"></a><a id="LNPCB768"></a><div class="props_rev_3"><a id="GUID-712DE012-D9C3-4FDE-AB66-1068EA0F444B" name="GUID-712DE012-D9C3-4FDE-AB66-1068EA0F444B"></a><h4 id="LNPCB-GUID-712DE012-D9C3-4FDE-AB66-1068EA0F444B" class="sect4"><span class="enumeration_section">11.6.8</span>描述绑定变量</h4>
                  <div>
                     <div class="section">
                        <p>DESCRIBE BIND VARIABLES将绑定变量的描述放入绑定描述符中。在我们的示例中，DESCRIBE准备BNDDSC如下：<a id="d72777e2524" class="indexterm-anchor"></a><a id="d72777e2528" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">执行SQL描述SQLSTMT到BNDDSC END-EXEC的绑定变量。</pre><p>请注意，BNDDSC <span class="italic">不得</span>以冒号为前缀。
                        </p>
                        <p>DESCRIBE BIND VARIABLES语句必须遵循PREPARE语句，但必须在OPEN语句之前。</p>
                        <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-712DE012-D9C3-4FDE-AB66-1068EA0F444B__I14773">图11-5</a>显示了DESCRIBE之后的示例中的绑定描述符。请注意，DESCRIBE已将SQLDFND设置为在已处理的SQL语句中找到的实际占位符数。
                        </p>
                        <div class="figure" id="GUID-712DE012-D9C3-4FDE-AB66-1068EA0F444B__I14773">
                           <p class="titleinfigure">图11-5 DESCRIBE后的绑定描述符</p><img src="img/pco81009.gif" alt="下面是图11-5的描述" title="下面是图11-5的描述" longdesc="img_text/pco81009.html"><br><a href="img_text/pco81009.html">“图11-5 DESCRIBE后的绑定描述符”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB770"></a><div class="props_rev_3"><a id="GUID-CF0A7FC5-AB98-4CE3-B176-637CA41CA82B" name="GUID-CF0A7FC5-AB98-4CE3-B176-637CA41CA82B"></a><h4 id="LNPCB-GUID-CF0A7FC5-AB98-4CE3-B176-637CA41CA82B" class="sect4"><span class="enumeration_section">11.6.9</span>重置<span class="enumeration_section">占位符</span>数量</h4>
                  <div>
                     <div class="section">
                        <p>接下来，您必须将最大占位符数重置为DESCRIBE实际找到的数字，如下所示：</p><pre class="oac_no_warn" dir="ltr">如果SQLDFND IN BNDDSC &lt;0 DISPLAY“太多绑定变量”GOTO ROLL-BACK ELSE将BNDDSC中的SQLDFND移动到BNDDSC END-IF中的SQLDNUM。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB772"></a><a id="LNPCB771"></a><div class="props_rev_3"><a id="GUID-7620E808-7738-427C-8EE0-66CE2511C45E" name="GUID-7620E808-7738-427C-8EE0-66CE2511C45E"></a><h4 id="LNPCB-GUID-7620E808-7738-427C-8EE0-66CE2511C45E" class="sect4"><span class="enumeration_section">11.6.10</span>获取绑定变量的值</h4>
                  <div>
                     <div class="section">
                        <p>您的程序必须在SQL语句中获取绑定变量的值。程序如何获取值取决于您。例如，它们可以是硬编码的，从文件中读取或以交互方式输入。</p>
                        <p>在我们的示例中，必须为绑定变量分配一个值，该变量替换查询WHERE子句中的占位符BONUS。提示用户输入值，然后处理它，如下所示：</p><pre class="oac_no_warn" dir="ltr">程序部门。 ...执行GET-INPUT-VAR从1乘1变化J直到JND&gt;在BNDDSC中的SQLDNUM。 ...GET-INPUT-VAR。 ...*将0 DESCRIBEd替换为数据类型表* 1，以避免“无效的数据类型”Oracle错误。移动1到BNDDVTYP（J）。*获取绑定变量的值。显示“输入值”，BND-DH-VNAME（J）。接受输入字符串。在BNDDVLN（J）中以“”进入BND-DV（J）计数而取消输入输入字符串。
</pre><p>假设用户为BONUS提供了值625，下一个表显示了生成的绑定描述符。</p>
                        <div class="figure" id="GUID-7620E808-7738-427C-8EE0-66CE2511C45E__GUID-5CDBAAC2-A10F-4E17-8BB7-B7433CE2D8B7">
                           <p class="titleinfigure">图11-6分配值后的绑定描述符</p><img src="img/pco81010.gif" alt="下面是图11-6的描述" title="下面是图11-6的描述" longdesc="img_text/pco81010.html"><br><a href="img_text/pco81010.html">“图11-6分配值后的绑定描述符”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB773"></a><div class="props_rev_3"><a id="GUID-C26DE703-9405-41B1-A224-944EE7F5A130" name="GUID-C26DE703-9405-41B1-A224-944EE7F5A130"></a><h4 id="LNPCB-GUID-C26DE703-9405-41B1-A224-944EE7F5A130" class="sect4"><span class="enumeration_section">11.6.11</span>打开光标</h4>
                  <div>
                     <div class="section">
                        <p>动态查询的OPEN语句类似于静态查询的语句，除了游标与绑定描述符相关联。在运行时确定并存储在由绑定描述符表的元素寻址的缓冲区中的值用于评估SQL语句。通过查询，这些值还用于标识活动集。<a id="d72777e2639" class="indexterm-anchor"></a><a id="d72777e2643" class="indexterm-anchor"></a></p>
                        <p>在我们的示例中，OPEN将EMPCURSOR与BNDDSC关联如下：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OPEN EMPCUR使用DESCRIPTOR BNDDSC END-EXEC。</pre><p>请记住，BNDDSC <span class="italic">不得</span>以冒号为前缀。
                        </p>
                        <p>然后，OPEN执行SQL语句。通过查询，OPEN还可以识别活动集并将光标定位在第一行。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB775"></a><a id="LNPCB774"></a><div class="props_rev_3"><a id="GUID-1D08C0CF-1812-41C1-B399-A893E44BE4F4" name="GUID-1D08C0CF-1812-41C1-B399-A893E44BE4F4"></a><h4 id="LNPCB-GUID-1D08C0CF-1812-41C1-B399-A893E44BE4F4" class="sect4"><span class="enumeration_section">11.6.12</span>描述选择列表</h4>
                  <div>
                     <div class="section">
                        <p>如果动态SQL语句是查询，则DESCRIBE SELECT LIST语句必须遵循OPEN语句，但必须在FETCH语句之前。<a id="d72777e2685" class="indexterm-anchor"></a><a id="d72777e2689" class="indexterm-anchor"></a></p>
                        <p>DESCRIBE SELECT LIST将选择列表项的描述放入选择描述符中。在我们的示例中，DESCRIBE准备SELDSC如下：</p><pre class="oac_no_warn" dir="ltr">执行SQL描述SQLSTMT进入SELDSC END-EXEC的选择列表。</pre><p>访问数据字典时，DESCRIBE设置每个选择列表值的长度和数据类型。</p>
                        <p><a href="Oracle-dynamic-SQL-method-4.html#GUID-1D08C0CF-1812-41C1-B399-A893E44BE4F4__I10665">图11-7</a>显示了DESCRIBE之后的示例中的选择描述符。请注意，DESCRIBE已将SQLDFND设置为查询选择列表中找到的实际项目数。如果SQL语句不是查询，则SQLDFND设置为零。另请注意，NUMBER长度尚不可用。对于定义为NUMBER的列，必须使用库子例程SQLPRC来提取精度和比例。请参阅“强制数据类型”部分。
                        </p>
                        <div class="figure" id="GUID-1D08C0CF-1812-41C1-B399-A893E44BE4F4__I10665">
                           <p class="titleinfigure">图11-7 DESCR后选择描述符</p><img src="img/pco81011.gif" alt="下面是图11-7的描述" title="下面是图11-7的描述" longdesc="img_text/pco81011.html"><br><a href="img_text/pco81011.html">“图11-7 DESCR后选择描述符”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="Oracle-dynamic-SQL-method-4.html#GUID-09B53741-283E-420D-988C-2E87D1CB505E">强制数据类型</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCB776"></a><div class="props_rev_3"><a id="GUID-0678F117-2BFC-4C65-9943-B507305DA11E" name="GUID-0678F117-2BFC-4C65-9943-B507305DA11E"></a><h4 id="LNPCB-GUID-0678F117-2BFC-4C65-9943-B507305DA11E" class="sect4"><span class="enumeration_section">11.6.13</span>重置选择列表项的数量</h4>
                  <div>
                     <div class="section">
                        <p>接下来，您必须将选择列表项的最大数量重置为DESCRIBE实际找到的数字，如下所示：</p><pre class="oac_no_warn" dir="ltr">在SELDSC中将SQLDFND传递给SELDSC中的SQLDNUM。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB778"></a><a id="LNPCB777"></a><div class="props_rev_3"><a id="GUID-390491F0-318D-434C-9470-E462BF369098" name="GUID-390491F0-318D-434C-9470-E462BF369098"></a><h4 id="LNPCB-GUID-390491F0-318D-434C-9470-E462BF369098" class="sect4"><span class="enumeration_section">11.6.14</span>重置每个选择列表项的长度/数据类型</h4>
                  <div>
                     <div class="section">
                        <p>在获取select-list值之前，该示例重置length和datatype表中的一些元素以用于显示目的。</p><pre class="oac_no_warn" dir="ltr">程序部门。 ...执行COOLE-COLUMN-TYPE从1乘1变化J直到J&gt; SQLDNUM在SELDSC中。 ...强制列-TYPE。 *清除NULL位。使用SELDVTYP（J），SELDVTYP（J），NULL-STATUS调用“SQLNUL”。 *如果数据类型为DATE，则延长至9个字符。如果SELDVTYP（J）= 12移动9到SELDVLN（J）。*如果数据类型为NUMBER，则提取精度和比例。移动0显示 - 长度。如果SELDVTYP（J）= 2且PRECISION = 0则移动10到显示长度。如果SELDVTYP（J）= 2且精度&gt; 0则增加2以精确度显示精度以显示长度。如果SELDVTYP（J）= 2如果显示长度&gt;最大长度显示“列值对于数据缓冲区而言太大。”去结束程序以及显示SELDVLN（J）的长度。*将数据类型强制转换为VARCHAR2。移动1到SELDVTYP（J）。</pre><p><a href="Oracle-dynamic-SQL-method-4.html#GUID-390491F0-318D-434C-9470-E462BF369098__I10667">图11-8</a>显示了结果选择描述符。请注意，NUMBER长度现在可用，并且所有数据类型都是VARCHAR2。SELDVLN（2）和SELDVLN（3）中的长度为6和9，因为我们将DESCRIBEd长度4和7增加2以允许可能的符号和小数点。
                        </p>
                        <div class="figure" id="GUID-390491F0-318D-434C-9470-E462BF369098__I10667">
                           <p class="titleinfigure">图11-8 FETCH之前的选择描述符</p><img src="img/pco81011.gif" alt="下面是图11-8的描述" title="下面是图11-8的描述" longdesc="img_text/pco81011.html"><br><a href="img_text/pco81011.html">“图11-8在FETCH之前选择描述符”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB779"></a><div class="props_rev_3"><a id="GUID-25158397-4D35-4DDE-9C82-332912EB7C7C" name="GUID-25158397-4D35-4DDE-9C82-332912EB7C7C"></a><h4 id="LNPCB-GUID-25158397-4D35-4DDE-9C82-332912EB7C7C" class="sect4"><span class="enumeration_section">11.6.15</span>来自激活集的FETCH行</h4>
                  <div>
                     <div class="section">
                        <p>FETCH从活动集返回一行，将select-list值存储在数据缓冲区中，并将光标前进到活动集中的下一行。如果没有更多行，FETCH将SQLCA，SQLCODE变量或SQLSTATE变量中的SQLCODE设置为“找不到数据”错误代码。在以下示例中，FETCH将列ENAME，EMPNO和COMM的值返回给SELDSC：<a id="d72777e2805" class="indexterm-anchor"></a><a id="d72777e2809" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">使用DESCRIPTOR SELDSC END-EXEC的EXEC SQL FETCH EMPCURSOR。</pre><p>“在FETCH之后选择描述符”在FETCH之后的示例中显示了选择描述符。请注意，Oracle已将select-list和指示符值存储在SELDV和SELDI元素所寻址的数据缓冲区中。</p>
                        <p>对于数据类型1，Oracle的输出缓冲区，使用存储在SELDVLN中的长度，左对齐CHAR或VARCHAR2数据，并右对齐NUMBER数据。</p>
                        <p>从EMP表中的VARCHAR2（10）列检索值<code class="codeph">MARTIN</code> 。使用SELDVLN（1）中的长度，Oracle左对齐10字节字段中的值，填充缓冲区。
                        </p>
                        <p>从NUMBER（4）列检索值7654并强制转换为<code class="codeph">7654</code> 。但是，SELDVLN（2）中的长度增加了2以允许可能的符号和小数点，因此Oracle右对齐6字节字段中的值。
                        </p>
                        <p>从NUMBER（7,2）列中检索值482.50并强制为482.50。同样，SELDVLN（3）中的长度增加了2，因此Oracle右对齐9字节字段中的值。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB780"></a><div class="props_rev_3"><a id="GUID-9C78E036-70BE-4AA0-9FA0-15094CADAED6" name="GUID-9C78E036-70BE-4AA0-9FA0-15094CADAED6"></a><h4 id="LNPCB-GUID-9C78E036-70BE-4AA0-9FA0-15094CADAED6" class="sect4"><span class="enumeration_section">11.6.16</span>获取和处理选择列表值</h4>
                  <div>
                     <div class="section">
                        <p>在FETCH之后，您的程序可以处理FETCH返回的选择列表值。在我们的示例中，处理了ENAME，EMPNO和COMM列的值。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB782"></a><a id="LNPCB781"></a><div class="props_rev_3"><a id="GUID-FE34D4FA-F5C4-49C9-A6B6-7FA63467300C" name="GUID-FE34D4FA-F5C4-49C9-A6B6-7FA63467300C"></a><h4 id="LNPCB-GUID-FE34D4FA-F5C4-49C9-A6B6-7FA63467300C" class="sect4"><span class="enumeration_section">11.6.17</span>关闭光标</h4>
                  <div>
                     <div class="section">
                        <p><a id="d72777e2881" class="indexterm-anchor"></a><a id="d72777e2885" class="indexterm-anchor"></a> CLOSE禁用光标。在我们的示例中，CLOSE禁用EMPCURSOR，如下所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CLOSE EMPCURSOR END-EXEC</pre><div class="figure" id="GUID-FE34D4FA-F5C4-49C9-A6B6-7FA63467300C__CDDDHFIG">
                           <p class="titleinfigure">图11-9 FETCH后选择描述符</p><img src="img/pco81013.gif" alt="下面是图11-9的描述" title="下面是图11-9的描述" longdesc="img_text/pco81013.html"><br><a href="img_text/pco81013.html">“图11-9 FETCH后选择描述符”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCB783"></a><div class="props_rev_3"><a id="GUID-3CE8E1BC-F39A-42A6-A01C-D2277ADABB36" name="GUID-3CE8E1BC-F39A-42A6-A01C-D2277ADABB36"></a><h3 id="LNPCB-GUID-3CE8E1BC-F39A-42A6-A01C-D2277ADABB36" class="sect3"><span class="enumeration_section">11.7</span>使用方法4使用主机表</h3>
               <div>
                  <div class="section">
                     <p>要使用方法4的输入或输出主机表，必须使用可选的FOR子句告诉Oracle主机表的大小。有关FOR子句的详细信息，请参阅“主机表”。</p>
                     <p>设置第J个选择列表项或绑定变量的描述符条目，但SELDVLN（J）或BNDDVLN（J）不是寻址单个数据缓冲区，而是寻址数据缓冲区表。然后根据需要在EXECUTE或FETCH语句中使用FOR子句，以告知Oracle要处理的表元素的数量。</p>
                     <p>此过程是必要的，因为Oracle无法了解主机表的大小。</p>
                     <p>在以下示例中（仅32位），使用两个输入主机表将8对EMPNO和DEPTNO值插入到表EMP中。请注意，EXECUTE可用于方法4的非查询。</p><pre class="oac_no_warn" dir="ltr">识别部门。 PROGRAM-ID。 DYN4INS。环境部门。数据部门。工作储存部分。 01 BNDDSC。 02 SQLDNUM PIC S9（9）COMP VALUE 2。02 SQLDFND PIC S9（9）COMP。 02 BNDDVAR发生2次。 03 BNDDV PIC S9（9）COMP。 03 BNDDFMT PIC S9（9）COMP。 03 BNDDVLN PIC S9（9）COMP。 03 BNDDFMTL PIC S9（4）COMP。 03 BNDDVTYP PIC S9（4）COMP。 03 BNDDI PIC S9（9）COMP。 03 BNDDH-VNAME PIC S9（9）COMP。 03 BNDDH-MAX-VNAMEL PIC S9（4）COMP。 03 BNDDH-CUR-VNAMEL PIC S9（4）COMP。 03 BNDDI-VNAME PIC S9（9）COMP。 03 BNDDI-MAX-VNAMEL PIC S9（4）COMP。 03 BNDDI-CUR-VNAMEL PIC S9（4）COMP。 03 BNDDFCLP PIC S9（9）COMP。 03 BNDDFCRCP PIC S9（9）COMP。 01 XBNDDI。 03 BND-DI发生2次PIC S9（4）COMP。 01 XBNDDIVNAME。 03 BND-DI-VNAME发生2次PIC X（80）。01 XBNDDV。 *由于您知道SQL语句是什么，因此可以设置*最多包含2列和* 8行的二维表。每个元素最长可达10个字符。（您*可以根据您的需要更改这些值。）03 BND-COLUMN发生2次。 05 BND-ELEMENT发生8次PIC X（10）。01 XBNDDHVNAME。 03 BND-DH-VNAME发生2次PIC X（80）。01 COLUMN-INDEX PIC 999。01 ROW-INDEX PIC 999。01 DUMMY-INTEGER PIC 9999。EXEC SQL BEGIN DECLARE SECTION END-EXEC。 01 USERNAME PIC X（20）。01 PASSWD PIC X（20）。01 DYN-STATEMENT PIC X（80）。01行数PIC S9（4）COMP。 EXEC SQL END DECLARE SECTION END-EXEC。 EXEC SQL包含SQLCA END-EXEC。程序部门。 START-MAIN。执行SQL WHENEVER SQLERROR GOTO SQL-ERROR END-EXEC。将“SCOTT”移至USERNAME。将“TIGER”转移到PASSWD。 EXEC SQL CONNECT：USERNAME IDENTIFIED BY：PASSWD END-EXEC。显示“连接到Oracle”。*初始化绑定和选择描述符。执行INIT-BNDDSC THRU INIT-BNDDSC-EXIT变化列索引从1比1直到列指数&gt; 2。*设置SQL语句。向DYN-STATEMENT移动空间。移动“插入EMP（EMPNO，DEPTNO）值（：EMPNO，：DEPTNO）”到DYN-STATEMENT。显示DYN-STATEMENT。 *准备SQL语句。EXEC SQL PREPARE S1 FROM：DYN-STATEMENT END-EXEC。 *描述绑定变量。EXEC SQL描述了用于S1进入BNDDSC END-EXEC的绑定变量。执行Z-BIND型THRU Z-BIND-TYIT变异柱索引从1比1直到列指数&gt; 2。如果SQLDFND在BNDDSC &lt;0显示“太多的各种变量”。转到SQL-ERROR ELSE显示“BIND VARS =”没有推进将BNDDSC中的SQLDFND移动到DUMMY-INTEGER显示DUMMY-INTEGER将BNDDSC中的SQLDFND移动到BNDDSC中的SQLDNUM。移动8到行数。执行所有价值全部获得所有价值 - 从1比1出口不断变化的行指数直到行数指数&gt;行数。 *执行SQL语句。EXEC SQL FOR：行数执行S1使用DESCRIPTOR BNDDSC END-EXEC。显示“插入”没有进展。将SQLERRD（3）移到DUMMY-INTEGER。显示虚拟整合，没有进步。显示“行”。转到END-SQL。 SQL-ERROR。 *显示任何SQL错误消息和代码。显示SQLERRMC。 EXEC SQL ROLLBACK工作发布END-EXEC。停止运行。 END-SQL。执行SQL WHENEVER SQLERROR CONTINUE END-EXEC。 EXEC SQL COMMIT WORK RELEASE END-EXEC。停止运行。 INIT-BNDDSC。 *启动COBOL PERFORM过程，初始化bind *描述符。移动80到BNDDH-MAX-VNAMEL（COLUMN-INDEX）。CALL“SQLADR”使用BND-DH-VNAME（COLUMN-INDEX）BNDDH-VNAME（COLUMN-INDEX）。移动80到BNDDI-MAX-VNAMEL（COLUMN-INDEX）。使用BND-DI-VNAME（COLUMN-INDEX）BNDDI-VNAME（COLUMN-INDEX）调用“SQLADR”。移动10到BNDDVLN（COLUMN-INDEX）。使用BND-ELEMENT（COLUMN-INDEX，1）BNDDV（COLUMN-INDEX）调用“SQLADR”。移动到BNDDI（COLUMN-INDEX）。使用BND-DI（COLUMN-INDEX）BNDDI（COLUMN-INDEX）调用“SQLADR”。移动到BNDDFMT（COLUMN-INDEX）。移动到BNDDFMTL（COLUMN-INDEX）。移动到BNDDFCLP（COLUMN-INDEX）。移动到BNDDFCRCP（COLUMN-INDEX）。INIT-BNDDSC-EXIT。出口。 Z-BIND-TYPE。 *用0s将0s DESCRIBEd替换为数据类型表，以避免“无效数据类型”Oracle错误。移动1到BNDDVTYP（COLUMN-INDEX）。Z-BIND-TYPE-EXIT。出口。 GET-ALL-值。 *获取每一行的绑定变量。ROW-INDEX显示“输入行数值”。执行GIDE-BIND-VARS变化列索引从1比1直到列指数&gt;在BNDDSC中的SQLDFND。 GET-ALL值-EXIT。出口。 GET-BIND-VARS。 *获取每个绑定变量的值。显示“输入值”，BND-DH-VNAME（COLUMN-INDEX），没有任何进展。接受BND-ELEMENT（COLUMN-INDEX，ROW-INDEX）。GET-BIND-VARS-EXIT。出口。</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="host-tables.html#GUID-11D1B8B5-B5E0-4EB8-8DCB-85D44752F7BB">主机表</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCB784"></a><div class="props_rev_3"><a id="GUID-C057FFDB-75E2-4123-AFD8-49FBF8561B49" name="GUID-C057FFDB-75E2-4123-AFD8-49FBF8561B49"></a><h3 id="LNPCB-GUID-C057FFDB-75E2-4123-AFD8-49FBF8561B49" class="sect3"><span class="enumeration_section">11.8</span>示例程序10：动态SQL方法4</h3>
               <div>
                  <p>此程序显示使用动态SQL方法4所需的基本步骤。</p>
                  <div class="infoboxnote" id="GUID-C057FFDB-75E2-4123-AFD8-49FBF8561B49__GUID-B8C2FA7F-0268-4A1B-B484-5ECBF2CF05DD">
                     <p class="notep1">注意：</p>
                     <p>以下示例仅为32位。为避免出现问题，请使用<code class="codeph">$ORACLE_HOME/precomp/demo/procob2/sample10.pco</code>的示例，并包含变量声明文件的正确版本。
                     </p>
                     <p><code class="codeph">bndsel.cob</code> <code class="codeph">precomp/public</code> （64位计算机）中的<code class="codeph">bndsel.cob</code> 64位版本</p>
                     <p><code class="codeph">bndsel.cob_32</code> <code class="codeph">precomp/public32</code> （64位计算机）中的32位版本</p>
                  </div>
                  <p>登录后，程序会提示用户输入SQL语句，准备语句，声明游标，使用DESCRIBE BIND检查任何绑定变量，打开游标，并描述任何选择列表变量。如果输入SQL语句是查询，程序将获取每行数据，然后关闭游标。<a id="d72777e2992" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">************************************************** ************* *示例程序10：动态SQL方法4 * * * *此程序显示使用动态* * SQL方法4所需的基本步骤。登录到ORACLE后，程序* *提示用户输入SQL语句，PREPAREs * *语句，DECLAREs游标，使用DESCRIBE BIND检查任何绑定变量* *，打开游标，然后DESCRIBE任何* * select-列表变量。如果输入的SQL语句是* *查询，程序会对每行数据进行FETCH，然后CLOSE * * *。* ************************************************* **************身份识别部门。 PROGRAM-ID。DYNSQL4。环境部门。数据部门。工作储存部分。 01 BNDDSC。 02 SQLDNUM PIC S9（9）COMP值20。02 SQLDFND PIC S9（9）COMP。 02 BNDDVAR发生20次。 03 BNDDV PIC S9（9）COMP。 03 BNDDFMT PIC S9（9）COMP。 03 BNDDVLN PIC S9（9）COMP。 03 BNDDFMTL PIC S9（4）COMP。 03 BNDDVTYP PIC S9（4）COMP。 03 BNDDI PIC S9（9）COMP。 03 BNDDH-VNAME PIC S9（9）COMP。 03 BNDDH-MAX-VNAMEL PIC S9（4）COMP。 03 BNDDH-CUR-VNAMEL PIC S9（4）COMP。 03 BNDDI-VNAME PIC S9（9）COMP。 03 BNDDI-MAX-VNAMEL PIC S9（4）COMP。 03 BNDDI-CUR-VNAMEL PIC S9（4）COMP。 03 BNDDFCLP PIC S9（9）COMP。 03 BNDDFCRCP PIC S9（9）COMP。 01 XBNDDI。 03 BND-DI发生20次PIC S9（4）COMP。 01 XBNDDIVNAME。 03 BND-DI-VNAME发生20次PIC X（80）。01 XBNDDV。 03 BND-DV发生20次PIC X（80）。01 XBNDDHVNAME。 03 BND-DH-VNAME发生20次PIC X（80）。01 SELDSC。 02 SQLDNUM PIC S9（9）COMP值20。02 SQLDFND PIC S9（9）COMP。 02 SELDVAR发生20次。 03 SELDV PIC S9（9）COMP。 03 SELDFMT PIC S9（9）COMP。 03 SELDVLN PIC S9（9）COMP。 03 SELDFMTL PIC S9（4）COMP。 03 SELDVTYP PIC S9（4）COMP。 03 SELDI PIC S9（9）COMP。 03 SELDH-VNAME PIC S9（9）COMP。 03 SELDH-MAX-VNAMEL PIC S9（4）COMP。 03 SELDH-CUR-VNAMEL PIC S9（4）COMP。 03 SELDI-VNAME PIC S9（9）COMP。 03 SELDI-MAX-VNAMEL PIC S9（4）COMP。 03 SELDI-CUR-VNAMEL PIC S9（4）COMP。 03 SELDFCLP PIC S9（9）COMP。 03 SELDFCRCP PIC S9（9）COMP。 01 XSELDI。 03 SEL-DI OCCURS 20次PIC S9（4）COMP。 01 XSELDIVNAME。 03 SEL-DI-VNAME发生20次PIC X（80）。01 XSELDV。 03 SEL-DV发生20次PIC X（80）。01 XSELDHVNAME。 03 SEL-DH-VNAME发生20次PIC X（80）。01表 - 索引PIC 9（3）。01 VAR-COUNT PIC 9（2）。01 ROW-COUNT PIC 9（4）。01 NO-MORE-DATA PIC X（1）值“N”。01 NULLS-ALLOWED PIC S9（9）COMP。 01 PRECISION PIC S9（9）COMP。 01 SCALE PIC S9（9）COMP。 01 DISPLAY-LENGTH PIC S9（9）COMP。 01 MAX-LENGTH PIC S9（9）COMP值80。01 COLUMN-NAME PIC X（30）。01 NULL-VAL PIC X（80）值空间。 EXEC SQL BEGIN DECLARE SECTION END-EXEC。 01 USERNAME PIC X（20）。01 PASSWD PIC X（20）。01 DYN-STATEMENT PIC X（80）。EXEC SQL END DECLARE SECTION END-EXEC。 EXEC SQL包含SQLCA END-EXEC。程序部门。 START-MAIN。执行SQL WHENEVER SQLERROR GOTO SQL-ERROR END-EXEC。显示“USERNAME：”，没有任何进展。接受用户名。显示“密码：”没有进展。接受PASSWD。 EXEC SQL CONNECT：USERNAME IDENTIFIED BY：PASSWD END-EXEC。显示“与用户ORACLE连接：”，USERNAME。 *初始化绑定和选择描述符。执行INIT-BNDDSC变化表索引从1比1直到表索引&gt; 20。执行INIT-SELDSC变化表索引从1比1直到表索引&gt; 20。*从操作员处获取SQL语句。显示“输入没有终结符的SQL语句：”。显示“&gt;”没有进展。接受DYN-STATEMENT。显示“”。*准备SQL语句并声明游标。 EXEC SQL PREPARE S1 FROM：DYN-STATEMENT END-EXEC。用于S1 END-EXEC的EXEC SQL DECLARE C1游标。 *描述任何绑定变量。 EXEC SQL描述了用于S1进入BNDDSC END-EXEC的绑定变量。如果SQLDFND在BNDDSC &lt;0显示“太多的各种变量”。转到结束 -  SQL ELSE显示“绑定变量的数量：”没有进展，将BNDDSC中的SQLDFND移动到VAR-COUNT显示VAR-COUNT将BNDDSC中的SQLDFND移动到BNDDSC END-IF中的SQLDNUM。 *用1S替换描述* BIND DESCRIPTOR的数据字段的0S以避免“无效数据”* ORACLE ERROR移动1到表索引。 FIX-BIND-TYPE。移动1到BNDDVTYP（表索引）向表索引添加1如果表索引&lt;= 20转到固定绑定类型。 *让用户填写各种变量。如果SQLDFND IN BNDDSC = 0转到描述项目。移动1到表索引。 GET-BIND-VAR。显示“输入值”，BND-DH-VNAME（TABLE-INDEX）。接受BND-DV（TABLE-INDEX）。添加1到TABLE-INDEX IF TABLE-INDEX &lt;= BNDDSC中的SQLDFND转到GET-BIND-VAR。 *打开游标并描述选择列表项目。 DESCRIBE项。 EXEC SQL OPEN C1使用DESCRIPTOR BNDDSC END-EXEC。 EXEC SQL描述S1进入SELDSC END-EXEC的选择列表。如果SELDSC中的SQLDFND &lt;0显示“太多选择列表项”。转到结束-SQL ELSE显示“选项列表项目的数量：”没有进展，在SELDSC中将SQLDFND传送到VAR-COUNT显示VAR-COUNT显示“”在SELDSC中将SQLDFND传送到SELDSC END-IF中的SQLDNUM。 *将所有选择列表项目的数据转换为VARCHAR2。如果SQLDSUM IN SELDSC&gt; 0执行COERCE-COLUMN-TYPE变化表索引从1乘1到UNTIL TABLE-INDEX&gt; SQLDNUM在SELDSC显示“”。*每个行和每个选项列表值。如果SQLDSUM IN SELDSC&gt; 0执行FETCH-ROWS直到NO-MORE-DATA =“Y”。显示“显示”处理的行数：“没有进展。将SQLERRD（3）移到ROW-COUNT。显示行数。 *清理和终止。 EXEC SQL CLOSE C1 END-EXEC。 EXEC SQL COMMIT WORK RELEASE END-EXEC。显示“”。显示“有一个好日子！”。显示“”。停止运行。 *显示ORACLE错误消息和代码。 SQL-ERROR。显示“”。显示SQLERRMC。 END-SQL。执行SQL WHENEVER SQLERROR CONTINUE END-EXEC。 EXEC SQL ROLLBACK工作发布END-EXEC。停止运行。 *在这里开始执行的子项目：* INIT-BNDDSC：初始化BIND DESCRIPTOR。 INIT-BNDDSC。将空间移动到BND-DH-VNAME（TABLE-INDEX）。移动80到BNDDH-MAX-VNAMEL（表 - 索引）。CALL“SQLADR”使用BND-DH-VNAME（TABLE-INDEX）BNDDH-VNAME（TABLE-INDEX）。将空格移动到BND-DI-VNAME（TABLE-INDEX）。移动80到BNDDI-MAX-VNAMEL（表 - 索引）。使用BND-DI-VNAME（TABLE-INDEX）BNDDI-VNAME（TABLE-INDEX）调用“SQLADR”。将空间移动到BND-DV（TABLE-INDEX）。移动80到BNDDVLN（表 - 索引）。使用BND-DV（TABLE-INDEX）BNDDV（TABLE-INDEX）调用“SQLADR”。移动到BND-DI（表 - 索引）。使用BND-DI（TABLE-INDEX）BNDDI（TABLE-INDEX）调用“SQLADR”。移动到BNDDFMT（表 - 索引）。移动到BNDDFMTL（表 - 索引）。移动到BNDDFCLP（表 - 索引）。移动零到BNDDFCRCP（TABLE-INDEX）。* INIT-SELDSC：初始化SELECT DESCRIPTOR。 INIT-SELDSC。将空间移动到SEL-DH-VNAME（TABLE-INDEX）。移动80到SELDH-MAX-VNAMEL（表 - 索引）。使用SEL-DH-VNAME（TABLE-INDEX）SELDH-VNAME（TABLE-INDEX）调用“SQLADR”。将空格移动到SEL-DI-VNAME（TABLE-INDEX）。移动80到SELDI-MAX-VNAMEL（表索引）。使用SEL-DI-VNAME（TABLE-INDEX）SELDI-VNAME（TABLE-INDEX）调用“SQLADR”。将空间移动到SEL-DV（TABLE-INDEX）。移动80到SELDVLN（TABLE-INDEX）。使用SEL-DV（TABLE-INDEX）SELDV（TABLE-INDEX）调用“SQLADR”。移动零到SEL-DI（表索引）。使用SEL-DI（TABLE-INDEX）SELDI（TABLE-INDEX）调用“SQLADR”。移动到SELDFMT（TABLE-INDEX）。移动零到SELDFMTL（TABLE-INDEX）。将零移至SELDFCLP（TABLE-INDEX）。将零移至SELDFCRCP（TABLE-INDEX）。* COERCE SELECT-LIST DATATYPES到VARCHAR2。强制列-TYPE。使用SELDVTYP（TABLE-INDEX）调用“SQLNUL”SELDVTYP（TABLE-INDEX）NULLS-ALLOWED。 *如果DATATYPE是日期，长度为9个字符。如果SELDVTYP（TABLE-INDEX）= 12移动9到SELDVLN（TABLE-INDEX）。*如果数字是数字，则设置精确度。如果SELDVTYP（TABLE-INDEX）= 2调用“SQLPRC”使用SELDVLN（TABLE-INDEX）精度等级。移动0显示 - 长度。如果SELDVTYP（TABLE-INDEX）= 2且PRECISION = 0则移动40到显示长度。如果SELDVTYP（表 - 索引）= 2且精度&gt; 0则添加2以精确度显示精度以显示长度。如果SELDVTYP（表索引）= 2如果显示长度&gt;最大长度显示“列值对于数据缓冲区来说太大了”。转到结束 -  SQL ELSE显示SELDVLN（TABLE-INDEX）的显示长度。* COCHCE DATATYPES到VARCHAR2。移动1到SELDVTYP（TABLE-INDEX）。*显示栏目标题。将SEL-DH-VNAME（TABLE-INDEX）移动到列名称。显示栏名称（1：SELDVLN（TABLE-INDEX）），“”没有进展。 * FETCH A ROW并打印选择列表值。获取 - 行。 EXEC SQL FETCH C1使用DESCRIPTOR SELDSC END-EXEC。如果SQLCODE NOT = 0，则将“Y”移动到NO-MORE-DATA。如果SQLCODE = 0执行打印列值，则从1比1改变表索引UNTIL TABLE-INDEX&gt; SELDNC显示中的SQLDNUM“”。*打印选择列表值。 PRINT列值。 IF SEL-DI（TABLE-INDEX）= -1显示NULL-VAL（1：SELDVLN（TABLE-INDEX）），“”没有高级ELSE显示SEL-DV（表索引）（1：SELDVLN（表索引） ）），“”没有先进的结束 - 如果。</pre></div>
            </div>
         </div>
      </article>
   </body>
</html>
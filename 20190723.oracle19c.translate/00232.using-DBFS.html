<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用DBFS</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="securefiles-and-large-objects-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:58:18-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96333-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="creating-your-own-DBFS-store.html" title="Previous" type="text/html"></link>
      <link rel="next" href="LOB-demonstration-files.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SecureFiles and Large Objects Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADLOB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-your-own-DBFS-store.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="LOB-demonstration-files.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database SecureFiles和Large Objects Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-file-system.html" property="item" typeof="WebPage"><span property="name">数据库文件系统（DBFS）</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用DBFS</li>
            </ol>
            <a id="GUID-817DFDC2-7729-4CB6-BAE7-598E9B021DD8" name="GUID-817DFDC2-7729-4CB6-BAE7-598E9B021DD8"></a><a id="ADLOB0006"></a>
            
            <h2 id="ADLOB-GUID-817DFDC2-7729-4CB6-BAE7-598E9B021DD8" class="sect2"><span class="enumeration_chapter">25</span>使用DBFS</h2>
         </header>
         <div class="ind">
            <div>
               <p>DBFS文件系统实现包括创建和访问文件系统并对其进行管理。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-DBFS.html#GUID-E0712718-FD3F-40DF-8B5A-EC689B1C65DA" title="DBFS是Oracle数据库安装的一部分，安装在ORACLE_HOME下。">DBFS安装</a></p>
                  </li>
                  <li>
                     <p><a href="using-DBFS.html#GUID-A4B1B3D5-7080-47EF-86C4-67D6E8F0FC37" title="DBFS文件系统可以是分区的或非分区的。它可能要求用户拥有某些特权。">创建DBFS文件系统</a></p>
                  </li>
                  <li>
                     <p><a href="using-DBFS.html#GUID-B03D476F-934D-4AD8-B4D7-493B1C0D7513" title="您可以通过先决条件，访问接口，DBFS安全模型和XML DB服务器协议访问DBFS文件系统。">DBFS文件系统访问</a></p>
                  </li>
                  <li>
                     <p><a href="using-DBFS.html#GUID-8665C1E7-C96A-4B17-A8F7-1889858EEF18" title="如果Oracle RAC集群中的某个数据库实例发生故障，dbfs_client程序可以故障转移到其他现有数据库实例之一。">DBFS管理</a></p>
                  </li>
                  <li>
                     <p><a href="using-DBFS.html#GUID-68FE78C8-798C-40DB-8566-F09EB27F4CC9" title="DBFS在线文件系统重组是一个功能强大的数据移动工具，具有这些优势。">收缩和重组DBFS文件系统</a></p>
                  </li>
               </ul>
            </div><a id="ADLOB45994"></a><div class="props_rev_3"><a id="GUID-E0712718-FD3F-40DF-8B5A-EC689B1C65DA" name="GUID-E0712718-FD3F-40DF-8B5A-EC689B1C65DA"></a><h3 id="ADLOB-GUID-E0712718-FD3F-40DF-8B5A-EC689B1C65DA" class="sect3">DBFS安装</h3>
               <div>
                  <p>DBFS是Oracle数据库安装的一部分，安装在<code class="codeph">ORACLE_HOME</code>下。</p>
                  <p><code class="codeph">$ORACLE_HOME/rdbms/admin</code>包含以下DBFS实用程序脚本：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>内容API（CAPI）</p>
                     </li>
                     <li>
                        <p>SecureFiles商店（SFS）</p>
                     </li>
                  </ul>
                  <p><code class="codeph">$ORACLE_HOME/bin</code>包含：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">dbfs_client</code>可执行文件</p>
                     </li>
                  </ul>
                  <p><code class="codeph">$ORACLE_HOME/rdbms/admin</code>包含：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>内容存储库的SQL（ <code class="codeph">.plb</code>扩展名）脚本</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADLOB45995"></a><div class="props_rev_3"><a id="GUID-A4B1B3D5-7080-47EF-86C4-67D6E8F0FC37" name="GUID-A4B1B3D5-7080-47EF-86C4-67D6E8F0FC37"></a><h3 id="ADLOB-GUID-A4B1B3D5-7080-47EF-86C4-67D6E8F0FC37" class="sect3">创建DBFS文件系统</h3>
               <div>
                  <p>DBFS文件系统可以是分区的或非分区的。它可能要求用户拥有某些特权。</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-DBFS.html#GUID-579C0D02-6F1F-4723-B1FA-674615E1F5FD" title="数据库用户必须具有创建文件系统的最小权限集。">创建DBFS文件系统所需的权限</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-D78E46D3-8C20-45E2-9418-D674EA45317B" title="您可以创建非分区或分区文件系统。分区是在DBFS中创建文件系统的最佳性能和最具可伸缩性的方式，并且是默认方式。">非分区与分区DBFS文件系统的优点</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-C66F22F9-1C95-41C4-8F32-EE46DF9E4A62" title="您可以通过以具有DBFS管理员权限的用户身份登录来运行DBFS_CREATE_FILESYSTEM.SQL来创建文件系统。">创建非分区文件系统</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-8735D535-2E13-4702-95F9-01F931F2BF46" title="分区在数据库中创建多个物理段，文件在这些分区中随机分布。">创建分区文件系统</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-04EDEAFA-765A-44BA-98D6-B7DD415B9020" title="您可以通过运行DBFS_DROP_FILESYSTEM.SQL来删除文件系统。">删除文件系统</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB46187"></a><div class="props_rev_3"><a id="GUID-579C0D02-6F1F-4723-B1FA-674615E1F5FD" name="GUID-579C0D02-6F1F-4723-B1FA-674615E1F5FD"></a><h4 id="ADLOB-GUID-579C0D02-6F1F-4723-B1FA-674615E1F5FD" class="sect4">创建DBFS文件系统所需的权限</h4>
                  <div>
                     <p>数据库用户必须具有创建文件系统的最小权限集。</p>
                     <p>用户必须具有以下权限：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">GRANT CONNECT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">创建会话</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">RESOURCE</code> ， <code class="codeph">CREATE TABLE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">创建程序</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DBFS_ROLE</code></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB46188"></a><div class="props_rev_3"><a id="GUID-D78E46D3-8C20-45E2-9418-D674EA45317B" name="GUID-D78E46D3-8C20-45E2-9418-D674EA45317B"></a><h4 id="ADLOB-GUID-D78E46D3-8C20-45E2-9418-D674EA45317B" class="sect4">非分区与分区DBFS文件系统的优点</h4>
                  <div>
                     <p>您可以创建非分区或分区文件系统。分区是在DBFS中创建文件系统的最佳性能和最具可伸缩性的方式，并且是默认方式。</p>
                     <p>空间不能在分区之间共享，因此即使其他分区有空间，一个分区也可能用完空间。如果文件系统大小与单个文件的大小相比，这通常不是问题。但是，如果文件大小占文件系统大小的很大百分比，即使文件系统未满，也可能导致<code class="codeph">ENOSPC</code>错误。
                     </p>
                     <p>分区的另一个含义是<span class="italic">重命名</span>操作可能需要重写文件，如果文件很大，这可能很昂贵。
                     </p>
                  </div>
               </div><a id="ADLOB46189"></a><div class="props_rev_3"><a id="GUID-C66F22F9-1C95-41C4-8F32-EE46DF9E4A62" name="GUID-C66F22F9-1C95-41C4-8F32-EE46DF9E4A62"></a><h4 id="ADLOB-GUID-C66F22F9-1C95-41C4-8F32-EE46DF9E4A62" class="sect4">创建非分区文件系统</h4>
                  <div>
                     <p>您可以通过以具有DBFS管理员权限的用户身份登录来运行<code class="codeph">DBFS_CREATE_FILESYSTEM.SQL</code>来创建文件系统。
                     </p>
                     <div class="section">
                        <p>这些步骤使您可以创建文件系统。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>登录数据库实例：</span><div><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">dbfs_user</span> / <span class="italic">@db_server</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>输入以下命令：</span><div><pre class="oac_no_warn" dir="ltr">@ $ ORACLE_HOME / rdbms / admin / dbfs_create_filesystem.sql <span class="italic">tablespace_name</span> <span class="italic">file_system_name</span>
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>例如，要在现有表空间<code class="codeph">dbfs_tbspc</code>创建名为<code class="codeph">staging_area</code>的文件系统：</p><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">dbfs_user</span> / <span class="italic">db_server</span> @ $ ORACLE_HOME / rdbms / admin / dbfs_create_filesystem.sql dbfs_tbspc staging_area</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB46190"></a><div class="props_rev_3"><a id="GUID-8735D535-2E13-4702-95F9-01F931F2BF46" name="GUID-8735D535-2E13-4702-95F9-01F931F2BF46"></a><h4 id="ADLOB-GUID-8735D535-2E13-4702-95F9-01F931F2BF46" class="sect4">创建分区文件系统</h4>
                  <div>
                     <p>分区在数据库中创建多个物理段，文件在这些分区中随机分布。</p>
                     <div class="section">
                        <p>您可以通过运行<code class="codeph">DBFS_CREATE_FILESYSTEM</code> <code class="codeph">_ADVANCED</code>来创建分区文件系统。以具有DBFS管理员权限的用户身份登录时的<code class="codeph">SQL</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>登录数据库实例：</span><div><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">dbfs_user</span> / <span class="italic">@db_server</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>输入以下命令：</span><div><pre class="oac_no_warn" dir="ltr">@ $ ORACLE_HOME / rdbms / admin / dbfs_create_filesystem_advanced.sql tablespace_name <span class="italic">file_system_name</span> nocompress nodeduplicate noencrypt partition</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>例如，要在现有表空间<code class="codeph">dbfs_tbspc</code>创建名为<code class="codeph">staging_area</code>的分区文件系统：</p><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">dbfs_user</span> / <span class="italic">@db_server</span> @ $ ORACLE_HOME / rdbms / admin / dbfs_create_filesystem_advanced.sql dbfs_tbspc staging_area nocompress nodeduplicate noencrypt partition</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45996"></a><div class="props_rev_3"><a id="GUID-04EDEAFA-765A-44BA-98D6-B7DD415B9020" name="GUID-04EDEAFA-765A-44BA-98D6-B7DD415B9020"></a><h4 id="ADLOB-GUID-04EDEAFA-765A-44BA-98D6-B7DD415B9020" class="sect4">删除文件系统</h4>
                  <div>
                     <p>您可以通过运行<code class="codeph">DBFS_DROP_FILESYSTEM.SQL</code>来删除文件系统。</p>
                     <ol>
                        <li class="stepexpand"><span>登录数据库实例：</span><div><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">dbfs_user</span> / <span class="italic">@db_server</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>输入以下命令：</span><div><pre class="oac_no_warn" dir="ltr">@ $ ORACLE_HOME / rdbms / admin / dbfs_drop_filesystem.sql <span class="italic"><code class="codeph">file_system_name</code></span>
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADLOB46191"></a><div class="props_rev_3"><a id="GUID-B03D476F-934D-4AD8-B4D7-493B1C0D7513" name="GUID-B03D476F-934D-4AD8-B4D7-493B1C0D7513"></a><h3 id="ADLOB-GUID-B03D476F-934D-4AD8-B4D7-493B1C0D7513" class="sect3">DBFS文件系统访问</h3>
               <div>
                  <p>您可以通过先决条件，访问接口，DBFS安全模型和XML DB服务器协议访问DBFS文件系统。</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-DBFS.html#GUID-A1D6C48E-E6AF-450A-8F0E-52FEBF06197B" title="DBFS文件系统客户端（名为dbfs_client）在将使用某些先决条件访问DBFS文件系统的每个系统上运行。">DBFS客户端先决条件</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-F436D220-6BE5-4D72-BF2C-D59B343616CA" title="DBFS客户端命令行界面允许您直接访问存储在DBFS中的文件。">DBFS客户端命令行界面操作</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-6B646446-BD50-44CD-9C52-4B1039242910" title="您可以仅在Linux和Solaris中使用dbfs_client挂载DBFS。">DBFS安装接口（仅限Linux和Solaris）</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-85540258-FBB9-452B-8C20-F1D00A2ECA31">文件系统安全模型</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-D6AE78C9-C618-4842-8B44-2BE42E1BEDE3">HTTP_ WebDAV_和FTP访问DBFS</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB45992"></a><div class="props_rev_3"><a id="GUID-A1D6C48E-E6AF-450A-8F0E-52FEBF06197B" name="GUID-A1D6C48E-E6AF-450A-8F0E-52FEBF06197B"></a><h4 id="ADLOB-GUID-A1D6C48E-E6AF-450A-8F0E-52FEBF06197B" class="sect4">DBFS客户端先决条件</h4>
                  <div>
                     <p>DBFS文件系统客户端（名为<code class="codeph">dbfs_client</code> ）在将使用某些先决条件访问DBFS文件系统的每个系统上运行。
                     </p>
                     <p>DBFS文件系统客户端<code class="codeph">dbfs_client</code>的先决条件是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">dbfs_</code> <code class="codeph">client</code>主机必须安装Oracle客户端库。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">dbfs_client</code>可以在Linux，Linux上使用DBFS命令接口用作直接RDBMS客户端。X64，Solaris，Solaris64，AIX，HPUX和Windows平台。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">dbfs_client</code>只能在Linux，Linux上用作挂载客户端。X64和Solaris 11平台。这需要以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">dbfs_client</code>主机必须安装<code class="codeph">FUSE</code> Linux软件包或Solaris <code class="codeph">libfuse</code>软件包。
                                 </p>
                              </li>
                              <li>
                                 <p>必须创建一个名为<code class="codeph">fuse</code>的组，其用户名作为成员运行<code class="codeph">dbfs_client</code> 。
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-A1D6C48E-E6AF-450A-8F0E-52FEBF06197B__NOTE-14334-DFF87B69">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="using-DBFS.html#GUID-6B646446-BD50-44CD-9C52-4B1039242910" title="您可以仅在Linux和Solaris中使用dbfs_client挂载DBFS。">DBFS挂载接口（仅限Linux和Solaris）</a>以获取更多详细信息。
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB46002"></a><div class="props_rev_3"><a id="GUID-F436D220-6BE5-4D72-BF2C-D59B343616CA" name="GUID-F436D220-6BE5-4D72-BF2C-D59B343616CA"></a><h4 id="ADLOB-GUID-F436D220-6BE5-4D72-BF2C-D59B343616CA" class="sect4">DBFS客户端命令行界面操作</h4>
                  <div>
                     <p>DBFS客户端命令行界面允许您直接访问存储在DBFS中的文件。</p>
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-DBFS.html#GUID-456ECF58-F9B5-4F53-8111-B88079DE7650" title="DBFS客户端命令行界面允许您执行许多预定义的命令，例如从网络上的任何主机复制文件进出DBFS文件系统。">关于DBFS客户端命令行界面</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-CF1B0455-8D24-44BA-9E74-167AC8A01FE5" title="您可以通过提供路径名来创建内容存储库路径">创建内容存储路径</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-9022B3BF-FF83-4B71-85F1-449CDBF34B28" title="您可以使用mkdir命令创建新目录。">创建目录</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-FD6E5F79-2DE5-4F4E-99D2-6AF7D571ECBA" title="您可以使用ls命令列出目录的内容。">列出目录</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-240F6913-94D1-4646-8130-8A3942298EE1" title="您可以使用cp命令将文件或目录从源位置复制到目标位置。">复制文件和目录</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-FD1B94B7-57A3-4A53-9C46-ACB75A348B7A" title="您可以使用命令rm删除文件或目录。">删除文件和目录</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="props_rev_3"><a id="GUID-456ECF58-F9B5-4F53-8111-B88079DE7650" name="GUID-456ECF58-F9B5-4F53-8111-B88079DE7650"></a><h5 id="ADLOB-GUID-456ECF58-F9B5-4F53-8111-B88079DE7650" class="sect5">关于DBFS客户端命令行界面</h5>
                     <div>
                        <p>DBFS客户端命令行界面允许您执行许多预定义的命令，例如从网络上的任何主机复制文件进出DBFS文件系统。</p>
                        <p></p>
                        <p>命令行界面的性能略高于DBFS客户端安装界面，因为它不会挂载文件系统，从而绕过用户空间文件系统。但是，它对应用程序不透明。</p>
                        <p>DBFS客户端安装接口允许通过文件系统安装点安装DBFS，从而通过通用文件系统操作提供对存储在DBFS中的文件的透明访问。</p>
                        <p>要运行DBFS命令，请为DBFS客户端指定<code class="codeph">--command</code> 。
                        </p>
                     </div>
                  </div><a id="ADLOB46192"></a><div class="props_rev_3"><a id="GUID-CF1B0455-8D24-44BA-9E74-167AC8A01FE5" name="GUID-CF1B0455-8D24-44BA-9E74-167AC8A01FE5"></a><h5 id="ADLOB-GUID-CF1B0455-8D24-44BA-9E74-167AC8A01FE5" class="sect5">创建内容存储路径</h5>
                     <div>
                        <p>您可以通过提供路径名来创建内容存储库路径</p>
                        <div class="section">
                           <p>所有DBFS内容存储路径必须以<code class="codeph">dbfs:</code> 。这是一个示例： <code class="codeph">dbfs:/staging_area/file1</code> 。指定的所有数据库路径名必须是绝对路径。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> <span class="bold">--command</span> <span class="italic">命令</span> [ <span class="italic">开关</span> ] [ <span class="italic">参数</span> ]</pre><p>哪里：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">command</code></span>是可执行命令，例如<code class="codeph">ls</code> ， <code class="codeph">cp</code> ， <code class="codeph">mkdir</code>或<code class="codeph">rm</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">switches</code></span>特定于每个命令。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">arguments</code></span>是文件名或目录名，并且特定于每个命令。
                                 </p>
                              </li>
                           </ul>
                           <p>请注意， <code class="codeph">dbfs_client</code>在发生故障时返回非零值。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46007"></a><div class="props_rev_3"><a id="GUID-9022B3BF-FF83-4B71-85F1-449CDBF34B28" name="GUID-9022B3BF-FF83-4B71-85F1-449CDBF34B28"></a><h5 id="ADLOB-GUID-9022B3BF-FF83-4B71-85F1-449CDBF34B28" class="sect5">创建目录</h5>
                     <div>
                        <p>您可以使用<code class="codeph">mkdir</code>命令创建新目录。
                        </p>
                        <div class="section">
                           <p>使用以下语法：</p><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> --command mkdir <span class="italic">directory_name</span>
</pre><p>哪里：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">directory_name</code></span>是创建的目录的名称。例如：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString <span class="bold">--command mkdir</span> dbfs：/ staging_area / dir1</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46004"></a><div class="props_rev_3"><a id="GUID-FD6E5F79-2DE5-4F4E-99D2-6AF7D571ECBA" name="GUID-FD6E5F79-2DE5-4F4E-99D2-6AF7D571ECBA"></a><h5 id="ADLOB-GUID-FD6E5F79-2DE5-4F4E-99D2-6AF7D571ECBA" class="sect5">列出目录</h5>
                     <div>
                        <p>您可以使用<code class="codeph">ls</code>命令列出目录的内容。
                        </p>
                        <div class="section">
                           <p>使用以下语法：</p><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> <span class="bold">--command ls</span> [ <span class="italic">switches</span> ] <span class="italic">target</span>
</pre><p>哪里</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">target</code></span>是列出的目录。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">switches</code></span>是以下任意组合：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">-</code> <span class="italic"><code class="codeph">a</code></span>显示所有文件，包括“ <code class="codeph">.</code> '和' <code class="codeph">..</code>”。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">-</code> <span class="italic"><code class="codeph">l</code></span>显示长列表格式：每个文件的名称，文件类型，权限和大小。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">-</code> <span class="italic"><code class="codeph">R</code></span>递归地列出子目录。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString <span class="bold">--command ls</span> dbfs：/ staging_area / dir1</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString --command ls -l -a -R dbfs：/ staging_area / dir1</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46005"></a><div class="props_rev_3"><a id="GUID-240F6913-94D1-4646-8130-8A3942298EE1" name="GUID-240F6913-94D1-4646-8130-8A3942298EE1"></a><h5 id="ADLOB-GUID-240F6913-94D1-4646-8130-8A3942298EE1" class="sect5">复制文件和目录</h5>
                     <div>
                        <p>您可以使用<code class="codeph">cp</code>命令将文件或目录从源位置复制到目标位置。
                        </p>
                        <div class="section">
                           <p><code class="codeph">cp</code>命令还支持目录的递归复制。
                           </p><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> <span class="bold">--command cp</span> [ <span class="italic">switches</span> ] <code class="codeph">source</code> <code class="codeph">destination</code></pre><p>哪里：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">source</code></span>是源位置。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">destination</code></span>是目标位置。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">switches</code></span>是<code class="codeph">-R</code>或<code class="codeph">-r</code> ，用于递归地将所有源内容复制到目标目录中的选项。
                                 </p>
                              </li>
                           </ul>
                           <p>以下示例将本地目录的内容（ <code class="codeph">01-01-10-dump</code>递归复制到<code class="codeph">01-01-10-dump</code>的目录中：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString <span class="bold">--command cp</span> -R 01-01-10-dump dbfs：/ staging_area /</pre><p>以下示例将文件<code class="codeph">hello.txt</code>从DBFS复制到本地文件<code class="codeph">Hi.txt</code> ：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString <span class="bold">--command cp</span> dbfs：/staging_area/hello.txt Hi.txt</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46006"></a><div class="props_rev_3"><a id="GUID-FD1B94B7-57A3-4A53-9C46-ACB75A348B7A" name="GUID-FD1B94B7-57A3-4A53-9C46-ACB75A348B7A"></a><h5 id="ADLOB-GUID-FD1B94B7-57A3-4A53-9C46-ACB75A348B7A" class="sect5">删除文件和目录</h5>
                     <div>
                        <p>您可以使用命令<code class="codeph">rm</code>删除文件或目录。
                        </p>
                        <div class="section">
                           <p>命令<code class="codeph">rm</code>还支持递归删除目录。
                           </p><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> --command rm [ <span class="italic">switches</span> ] <span class="italic">target</span>
</pre><p>哪里：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">target</code></span>是列出的目录。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">switches</code></span>是<code class="codeph">-R</code>或<code class="codeph">-r</code> ，递归删除所有内容的选项。
                                 </p>
                              </li>
                           </ul>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString --command rm dbfs：/staging_area/srcdir/hello.txt</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString --command rm -R dbfs：/ staging_area / dir1</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADLOB45997"></a><div class="props_rev_3"><a id="GUID-6B646446-BD50-44CD-9C52-4B1039242910" name="GUID-6B646446-BD50-44CD-9C52-4B1039242910"></a><h4 id="ADLOB-GUID-6B646446-BD50-44CD-9C52-4B1039242910" class="sect4">DBFS安装接口（仅限Linux和Solaris）</h4>
                  <div>
                     <p>您可以<code class="codeph">dbfs_client</code>在Linux和Solaris中使用<code class="codeph">dbfs_client</code>挂载DBFS。
                     </p>
                     <p>说明指出了Linux和Solaris平台的不同要求。</p>
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-DBFS.html#GUID-0FA47FD4-B4CA-4365-9519-7C70F9DA3183" title="如果安装FUSE，则可以在Solaris 11 SRU7及更高版本中将dbfs_client用作装入客户端">在Solaris 11 SRU7及更高版本上安装FUSE</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-257CA83F-3AEC-45C9-A5D6-8B487FE43630" title="您可以通过运行dbfs_client程序来装入DBFS存储。">挂载DBFS存储</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-04B0BDF1-43D6-41DB-BC9C-95E9D90778D2" title="在Solaris上，用户必须具有Solaris权限PRIV_SYS_MOUNT才能对DBFS文件系统执行装入和卸载操作。">特定于Solaris的权限</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-4D1F748B-D6EF-48CA-B037-A42A7D295B64" title="Solaris和Linux的dbfs_client mount命令使用特定语法。">关于Solaris和Linux的Mount命令</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-F959E952-C82E-4BEF-96C8-DC17A745D7F4" title="配置各种环境变量后，可以使用钱包挂载文件系统。">使用电子钱包挂载文件系统</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-69C0676E-EE2B-4B4B-9956-908D47AA3C54" title="您可以使用dbfs_client挂载文件系统。">在命令提示符下使用密码挂载文件系统</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-AF702BBF-96BF-4CD7-A9F4-3C385839D5E2" title="您可以使用从文件中读取的密码安装文件系统。">使用从文件读取的密码挂载文件系统</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-0524AFB6-7C12-4F5B-B934-8C7026727ABB" title="在Linux中，您可以运行fusermount来卸载文件系统。">卸载文件系统</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-135813E9-9DD0-48B1-BBE9-6FA28C757D3B" title="在Linux中，您可以配置fstab实用程序以使用dbfs_client来装入DBFS文件系统。">通过适用于Linux的fstab实用程序安装DBFS</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-69F6C5D1-FF77-4AA0-A07C-A7B525C0453F">通过适用于Solaris的vfstab实用程序安装DBFS</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-78E752D1-3E67-483A-9A59-DD30FDF4A728">对挂载文件系统的限制</a></p>
                        </li>
                     </ul>
                  </div><a id="ADLOB46193"></a><div class="props_rev_3"><a id="GUID-0FA47FD4-B4CA-4365-9519-7C70F9DA3183" name="GUID-0FA47FD4-B4CA-4365-9519-7C70F9DA3183"></a><h5 id="ADLOB-GUID-0FA47FD4-B4CA-4365-9519-7C70F9DA3183" class="sect5">在Solaris 11 SRU7及更高版本上安装FUSE</h5>
                     <div>
                        <p>如果安装<code class="codeph">FUSE</code> ，则可以在Solaris 11 SRU7及更高版本<code class="codeph">dbfs_client</code>用作装入客户端</p>
                        <div class="section">
                           <p>安装<code class="codeph">FUSE</code>以在Solaris 11 SRU7及更高版本<code class="codeph">dbfs_client</code>用作装入客户端。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>以<code class="codeph">root</code>身份运行以下程序包。
                                 </p><pre class="oac_no_warn" dir="ltr">pkg安装libfuse</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB45998"></a><div class="props_rev_3"><a id="GUID-257CA83F-3AEC-45C9-A5D6-8B487FE43630" name="GUID-257CA83F-3AEC-45C9-A5D6-8B487FE43630"></a><h5 id="ADLOB-GUID-257CA83F-3AEC-45C9-A5D6-8B487FE43630" class="sect5">挂载DBFS存储</h5>
                     <div>
                        <p>您可以通过运行<code class="codeph">dbfs_client</code>程序来装入DBFS存储。
                        </p>
                        <div class="section">
                           <p>运行<code class="codeph">dbfs_client</code>程序。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>确保<code class="codeph">LD_LIBRARY_PATH</code>具有到Oracle客户端库的正确路径。</span></li>
                           <li><span>运行<code class="codeph">dbfs_client</code>程序。</span></li>
                        </ol>
                        <div class="section">
                           <p>在卸载文件系统之前， <code class="codeph">dbfs_client</code>程序不会返回。
                           </p>
                           <div class="infoboxnotealso" id="GUID-257CA83F-3AEC-45C9-A5D6-8B487FE43630__USINGORACLEWALLETWITHDBFSCLIENTFORT-DFF8A2A0">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="using-DBFS.html#GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02">将Oracle Wallet与DBFS Client配合使用可获得</a>最安全的密码指定方法</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46194"></a><div class="props_rev_3"><a id="GUID-04B0BDF1-43D6-41DB-BC9C-95E9D90778D2" name="GUID-04B0BDF1-43D6-41DB-BC9C-95E9D90778D2"></a><h5 id="ADLOB-GUID-04B0BDF1-43D6-41DB-BC9C-95E9D90778D2" class="sect5">特定于Solaris的权限</h5>
                     <div>
                        <p>在Solaris上，用户必须具有Solaris权限<code class="codeph">PRIV_SYS_MOUNT</code>才能对DBFS文件系统执行装入和卸载操作。
                        </p>
                        <p>为用户提供Solaris权限<code class="codeph">PRIV_SYS_MOUNT</code> 。
                        </p>
                        <ol>
                           <li>
                              <p>编辑<code class="codeph">/etc/user_attr</code> 。
                              </p>
                           </li>
                           <li>
                              <p>添加或修改用户条目（假设用户是Oracle），如下所示：</p><pre class="oac_no_warn" dir="ltr">oracle :::: type = normal; project = group.dba; defaultpriv = basic，priv_sys_mount ;; auth s = solaris.smf。*</pre></li>
                        </ol>
                     </div>
                  </div><a id="ADLOB46195"></a><div class="props_rev_3"><a id="GUID-4D1F748B-D6EF-48CA-B037-A42A7D295B64" name="GUID-4D1F748B-D6EF-48CA-B037-A42A7D295B64"></a><h5 id="ADLOB-GUID-4D1F748B-D6EF-48CA-B037-A42A7D295B64" class="sect5">关于Solaris和Linux的Mount命令</h5>
                     <div>
                        <p>Solaris和Linux的<code class="codeph">dbfs_client</code> mount命令使用特定语法。
                        </p>
                        <p>句法：</p><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> <span class="italic">[</span> -o <span class="italic">option_1</span> -o <span class="italic">option_2</span> <span class="italic">...</span> <span class="italic">]</span> <span class="italic">mount_point</span>
</pre><p>强制参数是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">db_user</code></span>是拥有DBFS内容存储库文件系统的数据库用户的名称。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">db_server</code></span>是Oracle数据库服务器的有效连接字符串，例如<code class="codeph">hrdb_host:1521/hrservice</code> 。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">mount_point</code></span>是数据库文件系统的安装路径。请注意，数据库用户拥有的所有文件系统在安装点都可见。
                              </p>
                           </li>
                        </ul>
                        <p>选项是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">direct_io</code> ：绕过OS页面缓存并为大文件提供改进的性能。使用此选项无法执行文件系统中的程序。当DBFS用作ETL临时区域时，Oracle建议使用此选项。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">wallet</code> ：在后台运行DBFS客户端。必须配置电子钱包以获取其凭据。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">failover</code> ：将DBFS客户端<code class="codeph">failover</code>到幸存的数据库实例而不会丢失数据。预计写入会产生一些性能成本，特别是对于小文件。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">allow_root</code> ：允许root用户访问文件系统。您必须在<code class="codeph">/etc/fuse.conf</code>配置文件中设置<code class="codeph">user_allow_other</code>参数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">allow_other</code> ：允许其他用户访问文件系统。您必须在<code class="codeph">/etc/fuse.conf</code>配置文件中设置<code class="codeph">user_allow_other</code>参数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">rw</code> ：将文件系统挂载为读写。这是默认设置。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ro</code> ：以只读方式挂载文件系统。文件无法修改。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">trace_level=</code> <span class="italic"><code class="codeph">n</code></span>设置跟踪级别。跟踪级别为：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">1调试</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">2 INFO</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">3警告</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">4 ERROR</code> ：默认跟踪级别。它仅在发生错误时输出诊断信息。建议始终启用此跟踪级别。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">5关键</code></p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">trace_file=STR</code> ：指定跟踪日志文件，其中<code class="codeph">STR</code>可以是<span class="italic"><code class="codeph">file_name</code></span>或<code class="codeph">syslog</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">trace_size=</code> <span class="italic"><code class="codeph">trcfile_size</code></span> ：以MB <code class="codeph">trace_size=</code> <span class="italic"><code class="codeph">trcfile_size</code></span>指定跟踪文件的大小。默认情况下， <code class="codeph">dbfs_client</code>在两个10MB文件之间轮换跟踪输出。为<code class="codeph">trace_size</code>指定<code class="codeph">0</code> <code class="codeph">trace_size</code>跟踪文件的最大大小设置为无限制。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADLOB46196"></a><div class="props_rev_3"><a id="GUID-F959E952-C82E-4BEF-96C8-DC17A745D7F4" name="GUID-F959E952-C82E-4BEF-96C8-DC17A745D7F4"></a><h5 id="ADLOB-GUID-F959E952-C82E-4BEF-96C8-DC17A745D7F4" class="sect5">使用电子钱包挂载文件系统</h5>
                     <div>
                        <p>配置各种环境变量后，可以使用钱包挂载文件系统。</p>
                        <div class="section">
                           <p>在装入带钱包的文件系统之前，必须先正确配置<code class="codeph">LD_LIBRARY_PATH</code>和<span class="italic"><code class="codeph">ORACLE_HOME</code></span>环境变量。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以admin用户身份登录。</span></li>
                           <li class="stepexpand"><span>挂载DBFS存储。（Oracle建议您不要以root用户身份执行此步骤。）</span><div><pre class="oac_no_warn" dir="ltr">％dbfs_client @ / dbfsdb -o wallet，rw，user，direct_io / mnt / dbfs</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]要测试上一步是否成功，请以admin用户身份列出<code class="codeph">dbfs</code>目录。</span><div><pre class="oac_no_warn" dir="ltr">$ ls / mnt / tdbfs</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div class="sect5"><a id="TASK-14-DFF8D7B9" name="TASK-14-DFF8D7B9"></a><h6 id="ADLOB-TASK-14-DFF8D7B9" class="sect6"></h6>
                        <div>
                           <div class="section">
                              <p class="subhead3" id="TASK-14-DFF8D7B9__GUID-47680EDD-07ED-4D75-BF40-EFF8F2558126"></p>
                              <div class="infoboxnotealso" id="TASK-14-DFF8D7B9__USINGORACLEWALLETWITHDBFSCLIENT-DFF8E4C4">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="using-DBFS.html#GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02">将Oracle Wallet与DBFS客户端配合使用</a></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-69C0676E-EE2B-4B4B-9956-908D47AA3C54" name="GUID-69C0676E-EE2B-4B4B-9956-908D47AA3C54"></a><h5 id="ADLOB-GUID-69C0676E-EE2B-4B4B-9956-908D47AA3C54" class="sect5">在命令提示符下使用密码挂载文件系统</h5>
                     <div>
                        <p>您可以使用<code class="codeph">dbfs_client</code>挂载文件系统。
                        </p>
                        <div class="section">
                           <p>您必须在命令提示符下输入密码才能使用<code class="codeph">dbfs_client</code>挂载文件系统。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString / mnt / dbfs密码：xxxxxxx</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-AF702BBF-96BF-4CD7-A9F4-3C385839D5E2" name="GUID-AF702BBF-96BF-4CD7-A9F4-3C385839D5E2"></a><h5 id="ADLOB-GUID-AF702BBF-96BF-4CD7-A9F4-3C385839D5E2" class="sect5">使用从文件读取的密码挂载文件系统</h5>
                     <div>
                        <p>您可以使用从文件中读取的密码安装文件系统。</p>
                        <div class="section">
                           <p>以下示例安装文件系统并释放终端。它从文件中读取密码：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ nohup dbfs_client ETLUser @ DBConnectString / mnt / dbfs &lt; <span class="italic">passwordfile</span> .f＆$ ls -l / mnt / dbfs drwxrwxrwx 10 root root 0 Feb 9 17:28 staging_area</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB45999"></a><div class="props_rev_3"><a id="GUID-0524AFB6-7C12-4F5B-B934-8C7026727ABB" name="GUID-0524AFB6-7C12-4F5B-B934-8C7026727ABB"></a><h5 id="ADLOB-GUID-0524AFB6-7C12-4F5B-B934-8C7026727ABB" class="sect5">卸载文件系统</h5>
                     <div>
                        <p>在Linux中，您可以运行<code class="codeph">fusermount</code>来卸载文件系统。
                        </p>
                        <div class="section">
                           <p>要在Linux中运行<code class="codeph">fusermount</code> ，请执行以下操作：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ fusermount -u &lt; <span class="italic"><code class="codeph">mount point</code></span> &gt;</pre></li>
                           </ul>
                           <p>在Solaris中，您可以运行<code class="codeph">umount</code>来卸载文件系统。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ umount -u &lt; <span class="italic"><code class="codeph">mount point</code></span> &gt;</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46000"></a><div class="props_rev_3"><a id="GUID-135813E9-9DD0-48B1-BBE9-6FA28C757D3B" name="GUID-135813E9-9DD0-48B1-BBE9-6FA28C757D3B"></a><h5 id="ADLOB-GUID-135813E9-9DD0-48B1-BBE9-6FA28C757D3B" class="sect5">通过适用于Linux的fstab实用程序安装DBFS</h5>
                     <div>
                        <p>在Linux中，您可以配置<code class="codeph">fstab</code>实用程序以使用<code class="codeph">dbfs_client</code>来装入DBFS文件系统。
                        </p>
                        <div class="section">
                           <p>要通过<code class="codeph">/etc/fstab</code>挂载DBFS，必须使用Oracle Wallet进行身份验证。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">root</code>用户身份登录。</span></li>
                           <li class="stepexpand"><span>将<code class="codeph">dbfs_client</code>的用户和组更改为用户<code class="codeph">root</code>和组<code class="codeph">fuse</code> 。</span><div><pre class="oac_no_warn" dir="ltr">#chown root.fuse $ ORACLE_HOME / bin / dbfs_client</pre></div>
                           </li>
                           <li class="stepexpand"><span>在<code class="codeph">dbfs_client</code>上设置<code class="codeph">setuid</code>位，并仅将<code class="codeph">execute</code>权限限制为用户和组。</span><div><pre class="oac_no_warn" dir="ltr">#chmod u + rwxs，g + rx-w，o-rwx dbfs_client</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建<code class="codeph">/sbin</code> <code class="codeph">dbfs_client</code>的符号链接为“ <code class="codeph">mount.dbfs</code> ”。</span><div><pre class="oac_no_warn" dir="ltr">$ ln -s $ ORACLE_HOME / bin / dbfs_client /sbin/mount.dbfs</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建一个名为“ <code class="codeph">fuse</code> ”的新Linux组。</span></li>
                           <li class="stepexpand"><span>将运行DBFS客户端的Linux用户添加到<code class="codeph">fuse</code>组。</span></li>
                           <li class="stepexpand"><span><code class="codeph">/etc/fstab</code>下行添加到<code class="codeph">/etc/fstab</code> ：</span><div><pre class="oac_no_warn" dir="ltr">/sbin/mount.dbfs# <span class="italic">db_user</span> @ <span class="italic">db_server</span> <span class="italic">mount_point</span> fuse rw，user，noauto 0 0</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">/sbin/mount.dbfs#/@DBConnectString / mnt / dbfs fuse rw，user，noauto 0 0</pre></div>
                           </li>
                           <li class="stepexpand"><span>Linux用户可以使用标准Linux <code class="codeph">mount</code>命令安装DBFS文件系统。例如：</span><div><pre class="oac_no_warn" dir="ltr">$ mount / mnt / dbfs</pre><p>请注意， <code class="codeph">FUSE</code>目前不支持<code class="codeph">automount</code> 。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADLOB46197"></a><div class="props_rev_3"><a id="GUID-69F6C5D1-FF77-4AA0-A07C-A7B525C0453F" name="GUID-69F6C5D1-FF77-4AA0-A07C-A7B525C0453F"></a><h5 id="ADLOB-GUID-69F6C5D1-FF77-4AA0-A07C-A7B525C0453F" class="sect5">通过适用于Solaris的vfstab实用程序安装DBFS</h5>
                     <div>
                        <div class="section">
                           <p>在Solaris上，通常使用<code class="codeph">vfstab</code>实用程序配置文件系统。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>创建一个mount shell脚本<code class="codeph">mount_dbfs.sh</code>以用于启动<code class="codeph">dbfs_client</code> 。必须导出Oracle RDBMS所需的所有环境变量。这些环境变量包括<code class="codeph">TNS_ADMIN</code> ， <code class="codeph">ORACLE_HOME</code>和<code class="codeph">LD_LIBRARY_PATH</code> 。例如：</span><div><pre class="oac_no_warn" dir="ltr">＃！/ bin / ksh export TNS_ADMIN = / export / home / oracle / dbfs / tnsadmin export ORACLE_HOME = / export / home / oracle / 11.2.0 / dbhome_1 export DBFS_USER = dbfs_user export DBFS_PASSWD = / tmp / passwd.f export DBFS_DB_CONN = dbfs_db export O = $ ORACLE_HOME export LD_LIBRARY_PATH = $ O / lib：$ O / rdbms / lib：/ usr / lib：/ lib：$ LD_LIBRARY_PATH export NOHUP_LOG = / tmp / dbfs.nohup（nohup $ ORACLE_HOME / bin / dbfs_client $ DBFS_USER @ $ DBFS_DB_CONN &lt;$ DBFS_PASSWD 2&gt;＆1＆）＆</pre></div>
                           </li>
                           <li class="stepexpand"><span>将DBFS条目添加到<code class="codeph">/etc/vfstab</code> 。为<code class="codeph">device_to_mount</code>指定<code class="codeph">mount_dbfs.sh</code>脚本。指定<code class="codeph">uvfs</code>为<code class="codeph">FS_type</code> 。指定no <code class="codeph">formount_at_boot</code> 。根据需要指定挂载选项。例如：</span><div><pre class="oac_no_warn" dir="ltr">/usr/local/bin/mount_dbfs.sh  -  / mnt / dbfs uvfs  -  no rw，allow_other</pre></div>
                           </li>
                           <li class="stepexpand"><span>用户可以使用标准Solaris mount命令安装DBFS文件系统。例如：</span><div><pre class="oac_no_warn" dir="ltr">$ mount / mnt / dbfs</pre></div>
                           </li>
                           <li class="stepexpand"><span>用户可以使用标准Solaris umount命令卸载DBFS文件系统。例如：</span><div><pre class="oac_no_warn" dir="ltr">$ umount / mnt / dbfs</pre></div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADLOB46001"></a><div class="props_rev_3"><a id="GUID-78E752D1-3E67-483A-9A59-DD30FDF4A728" name="GUID-78E752D1-3E67-483A-9A59-DD30FDF4A728"></a><h5 id="ADLOB-GUID-78E752D1-3E67-483A-9A59-DD30FDF4A728" class="sect5">对挂载文件系统的限制</h5>
                     <div>
                        <p>DBFS支持大多数具有异常的文件系统操作。例外情况是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">IOCTL</code></p>
                           </li>
                           <li>
                              <p>范围锁定（支持文件锁定）</p>
                           </li>
                           <li>
                              <p>通过<code class="codeph">libaio</code>异步I / O.</p>
                           </li>
                           <li>
                              <p><code class="codeph">O_DIRECT</code>文件打开</p>
                           </li>
                           <li>
                              <p>硬链接，管道</p>
                           </li>
                           <li>
                              <p>其他特殊文件模式</p>
                           </li>
                        </ul>
                        <p>除共享可写模式外，支持内存映射文件。出于性能原因，每次读取文件数据或文件数据属性时，DBFS都不会更新文件访问时间。</p>
                        <p>如果指定了<code class="codeph">direct_io</code>选项，则无法从安装了DBFS的文件系统运行程序。
                        </p>
                        <p>Oracle不支持使用NFS或Samba导出DBFS文件系统。</p>
                     </div>
                  </div>
               </div><a id="ADLOB46010"></a><div class="props_rev_3"><a id="GUID-85540258-FBB9-452B-8C20-F1D00A2ECA31" name="GUID-85540258-FBB9-452B-8C20-F1D00A2ECA31"></a><h4 id="ADLOB-GUID-85540258-FBB9-452B-8C20-F1D00A2ECA31" class="sect4">文件系统安全模型</h4>
                  <div>
                     <p>数据库管理DBFS中的安全性。它不使用操作系统安全模型。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-DBFS.html#GUID-6006E126-7A80-4D8F-B35B-23E31096F512">关于文件系统安全模型</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-B23998F8-3354-4FBE-82F9-39D4739EE934">启用共享根访问</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-CBDEAA51-801F-444D-8895-CCDE0C21662B">关于多个数据库用户之间的DBFS访问</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-0932DE6C-801B-4F37-8BA9-33866E76FF7A">建立跨多个数据库用户的DBFS访问共享</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="props_rev_3"><a id="GUID-6006E126-7A80-4D8F-B35B-23E31096F512" name="GUID-6006E126-7A80-4D8F-B35B-23E31096F512"></a><h5 id="ADLOB-GUID-6006E126-7A80-4D8F-B35B-23E31096F512" class="sect5">关于文件系统安全模型</h5>
                     <div>
                        <p>DBFS在安全模型下运行，默认情况下，用户创建的所有文件系统对该用户都是私有的。</p>
                        <p>Oracle建议维护此模型。由于操作系统用户和Oracle数据库用户不同，因此可以允许多个操作系统用户安装单个DBFS文件系统。这些安装可能具有不同的安装选项和权限。例如， <code class="codeph">user1</code>可以将DBFS文件系统挂载为<code class="codeph">READ ONLY</code> ， <code class="codeph">user2</code>可以将其挂载为<code class="codeph">READ WRITE</code> 。但是，Oracle数据库将两个用户视为具有相同的权限，因为他们将作为同一个数据库用户访问文件系统。
                        </p>
                        <p>访问数据库文件系统需要数据库登录作为数据库用户，该用户具有作为文件系统基础的表的特权。数据库管理员向数据库用户授予对文件系统的访问权限，不同的数据库用户可以对文件系统具有不同的<code class="codeph">READ</code>或<code class="codeph">UPDATE</code>权限。数据库管理员可以访问存储在DBFS文件系统中的所有文件。
                        </p>
                        <p>在每台客户端计算机上，对DBFS安装点的访问仅限于安装文件系统的操作系统用户。但是，这并不限制可以访问DBFS文件系统的用户数，因为许多用户可能会单独安装相同的DBFS文件系统。</p>
                        <p>DBFS仅执行数据库权限检查。安装DBFS文件系统时，Linux会执行操作系统文件级权限检查。使用命令界面或直接使用PL / SQL接口时，DBFS不执行此检查。</p>
                     </div>
                  </div><a id="ADLOB46163"></a><a id="ADLOB46162"></a><div class="props_rev_3"><a id="GUID-B23998F8-3354-4FBE-82F9-39D4739EE934" name="GUID-B23998F8-3354-4FBE-82F9-39D4739EE934"></a><h5 id="ADLOB-GUID-B23998F8-3354-4FBE-82F9-39D4739EE934" class="sect5">启用共享根访问</h5>
                     <div>
                        <div class="section">
                           <p>作为安装文件系统的操作系统用户，您可以通过指定<code class="codeph">allow_root</code>选项来允许对文件系统进行root访问。此选项要求<code class="codeph">/etc/fuse.conf</code>文件包含<code class="codeph">user_allow_other</code>字段，如<a href="using-DBFS.html#GUID-B23998F8-3354-4FBE-82F9-39D4739EE934__CIHDHFDH">例25-1所示</a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-B23998F8-3354-4FBE-82F9-39D4739EE934__CIHDHFDH">
                           <p class="titleinexample">示例25-1为其他用户启用根访问权限</p><pre class="oac_no_warn" dir="ltr">＃允许用户指定'allow_root'挂载选项。user_allow_other</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADLOB46164"></a><div class="props_rev_3"><a id="GUID-CBDEAA51-801F-444D-8895-CCDE0C21662B" name="GUID-CBDEAA51-801F-444D-8895-CCDE0C21662B"></a><h5 id="ADLOB-GUID-CBDEAA51-801F-444D-8895-CCDE0C21662B" class="sect5">关于多个数据库用户之间的DBFS访问</h5>
                     <div>
                        <p>某些情况可能要求多个数据库用户访问同一文件系统。例如，拥有文件系统的数据库用户可能是特权用户，并且共享其用户凭证可能会带来安全风险。为了缓解这种情况，DBFS允许多个数据库用户共享文件系统状态的子集。</p>
                        <p>虽然通过DBFS内容API进行的DBFS注册和安装对每个用户都是私有的，但是基础文件系统和它们所依赖的表可以在用户之间共享。完成此操作后，各个文件系统可以由不同的数据库用户独立安装和使用，可以通过SQL / PLSQL或<code class="codeph">dbfs_client</code> API使用。</p>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-0932DE6C-801B-4F37-8BA9-33866E76FF7A" name="GUID-0932DE6C-801B-4F37-8BA9-33866E76FF7A"></a><h5 id="ADLOB-GUID-0932DE6C-801B-4F37-8BA9-33866E76FF7A" class="sect5">建立跨多个数据库用户的DBFS访问共享</h5>
                     <div>
                        <div class="section">
                           <p>您可以跨多个数据库用户共享DBFS。</p>
                           <p>在以下示例中，用户<code class="codeph">user1</code>能够修改文件系统，用户<code class="codeph">user2</code>可以看到这些更改。这里， <code class="codeph">user1</code>是创建文件系统的数据库用户， <code class="codeph">user2</code>是最终使用<code class="codeph">dbfs_client</code>挂载和访问文件系统的数据库用户。<code class="codeph">user1</code>和<code class="codeph">user2</code>必须具有<code class="codeph">DBFS_ROLE</code>权限。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以创建文件系统的用户身份进行连接。</span><div><pre class="oac_no_warn" dir="ltr">sys @ tank as sysdba&gt; connect user1已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建文件系统<code class="codeph">user1_FS</code> ，注册存储，并将其挂载为<code class="codeph">user1_mt</code> 。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; exec dbms_dbfs_sfs.createFilesystem（'user1_FS'）; user1 @ tank&gt; exec dbms_dbfs_content.registerStore（'user1_FS'，'posix'，'DBMS_DBFS_SFS'）; user1 @ tank&gt; exec dbms_dbfs_content.mountStore（'user1_FS'，'user1_mnt'）; user1 @ tank&gt; commit;</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]您可以通过查看所有安装来检查上一步是否已成功完成。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; select * from table（dbms_dbfs_content.listMounts）; STORE_NAME | STORE_ID | PROVIDER_NAME --------------------- |  -  --------- | -------------- ---------------------------- PROVIDER_PKG | PROVIDER_ID | PROVIDER_VERSION | STORE_FEATURES --------------- ------ | ----------- | --------------------- | --------- ----------- STORE_GUID ---------- STORE_MOUNT --------------------------- ------------------------------------------------- CREATED -------------------------------------------------- -------------------------- MOUNT_PROPERTIES（PROPNAME，PROPVALUE，TYPECODE）---------------- -------------------------------------------------- ---------- user1_FS | 1362968596 | posix“DBMS_DBFS_SFS”| 3350646887 | 0.5.0 | 12714135 141867344 user1_mnt 01-FEB-10 09.44.25.357858 PM DBMS_DBFS_CONTENT_PROPERTIES_T（DBMS_DBFS_CONTENT_PROPERTY_T（'principal'，（null），9），DBMS_DBFS_CONTENT_PROPERTY_T（'owner'，（null），9），DBMS_DBFS_CONTENT_PROPERTY_T（'acl'，（null）， 9），DBMS_DBFS_CONTENT_PROPERTY_T（'asof'，（null），187），DBMS_DBFS_CONTENT_PROPERTY_T（'read_only'，'0'，2））</pre><p></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>[可选]以将使用<code class="codeph">dbfs_client</code>的用户身份进行连接。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; connect user2已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]请注意， <code class="codeph">user2</code>无法看到<code class="codeph">user1</code>的DBFS状态，因为他没有挂载。</span><div><pre class="oac_no_warn" dir="ltr">user2 @ tank&gt; select * from table（dbms_dbfs_content.listMounts）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>在以<code class="codeph">user1</code>身份连接时，导出文件系统<code class="codeph">user1_FS</code>以访问具有<code class="codeph">DBFS_ROLE</code>权限的任何用户。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; exec dbms_dbfs_sfs.exportFilesystem（'user1_FS'）; user1 @ tank&gt; commit;</pre></div>
                           </li>
                           <li class="stepexpand"><span>以将使用<code class="codeph">dbfs_client</code>的用户身份进行连接。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; connect user2已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>作为<code class="codeph">user2</code> ，查看所有可用表。</span><div><pre class="oac_no_warn" dir="ltr">user2 @ tank&gt; select * from table（dbms_dbfs_sfs.listTables）; SCHEMA_NAME | TABLE_NAME | PTABLE_NAME --------------------------- | ----------------- ---------- | ------------------- VERSION＃------------------ -------------- CREATED ----------------------------------- ---------------------------------------- FORMATTED --------- -------------------------------------------------- ---------------- PROPERTIES（PROPNAME，PROPVALUE，TYPECODE）-------------------------- ------------------------------------------------- user1 | SFS $ _FST_11 | SFS $ _FSTP_11 0.5.0 01-FEB-10 09.43.53.497856 PM 01-FEB-10 09.43.53.497856 PM（null）</pre></div>
                           </li>
                           <li class="stepexpand"><span>作为<code class="codeph">user2</code> ，注册并挂载存储，但不要重新创建<code class="codeph">user1_FS</code>文件系统。</span><div><pre class="oac_no_warn" dir="ltr">user2 @ tank&gt; exec dbms_dbfs_sfs.registerFilesystem（'user2_FS'，'user1'，'SFS $ _FST_11'）; user2 @ tank&gt; exec dbms_dbfs_content.registerStore（'user2_FS'，'posix'，'DBMS_DBFS_SFS'）; user2 @ tank&gt; exec dbms_dbfs_content.mountStore（'user2_FS'，'user2_mnt'）; user2 @ tank&gt; commit;</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]作为<code class="codeph">user2</code> ，您可以通过查看所有安装来检查上一步是否已成功完成。</span><div><pre class="oac_no_warn" dir="ltr">user2 @ tank&gt; select * from table（dbms_dbfs_content.listMounts）; STORE_NAME | STORE_ID | PROVIDER_NAME --------------------- |  -  --------- | -------------- ---------------------------- PROVIDER_PKG | PROVIDER_ID | PROVIDER_VERSION | STORE_FEATURES --------------- ------ | ----------- | --------------------- | --------- ----------- STORE_GUID ---------- STORE_MOUNT --------------------------- ------------------------------------------------- CREATED -------------------------------------------------- -------------------------- MOUNT_PROPERTIES（PROPNAME，PROPVALUE，TYPECODE）---------------- -------------------------------------------------- ---------- user2_FS | 1362968596 | posix“DBMS_DBFS_SFS”| 3350646887 | 0.5.0 | 12714135 141867344 user1_mnt 01-FEB-10 09.46.16.013046 PM DBMS_DBFS_CONTENT_PROPERTIES_T（DBMS_DBFS_CONTENT_PROPERTY_T（'principal'，（null），9），DBMS_DBFS_CONTENT_PROPERTY_T（'owner'，（null），9），DBMS_DBFS_CONTENT_PROPERTY_T（'acl'，（null）， 9），DBMS_DBFS_CONTENT_PROPERTY_T（'asof'，（null），187），DBMS_DBFS_CONTENT_PROPERTY_T（'read_only'，'0'，2））</pre><p></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>[可选]列出<code class="codeph">user2</code>和<code class="codeph">user1</code>路径名。请注意，另一个安装， <code class="codeph">user2_mnt,</code>店面<code class="codeph">user2_FS,</code>可供<code class="codeph">user2</code> 。但是， <code class="codeph">user2</code>的基础文件系统数据与<code class="codeph">user1</code>相同。</span><div><pre class="oac_no_warn" dir="ltr">user2 @ tank&gt;从dbfs_content中选择路径名; PATHNAME ------------------------------------------------- ------------------------------ / user2_mnt /user2_mnt/.sfs/tools /user2_mnt/.sfs/snapshots / user2_mnt /。 sfs / content /user2_mnt/.sfs/attributes /user2_mnt/.sfs/RECYCLE /user2_mnt/.sfs user2 @ tank&gt; connect user1已连接。user1 @ tank&gt;从dbfs_content中选择路径名; PATHNAME --------------------- / user1_mnt /user1_mnt/.sfs/tools /user1_mnt/.sfs/snapshots /user1_mnt/.sfs/content /user1_mnt/.sfs / attributes /user1_mnt/.sfs/RECYCLE /user1_mnt/.sfs</pre></div>
                           </li>
                           <li class="stepexpand"><span>在文件系统<code class="codeph">user1_FS</code> ， <code class="codeph">user1</code>创建文件<span class="italic"><code class="codeph">xxx</code></span> 。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; var ret number; user1 @ tank&gt; var data blob; user1 @ tank&gt; exec：ret：= dbms_fuse.fs_create（'/ user1_mnt / <span class="italic">xxx</span> '，content =&gt;：data）; user1 @ tank&gt; select：ret from dual; ：RET ---------- 0</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]写入上一步中创建的文件<span class="italic"><code class="codeph">xxx</code></span> 。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; var buf varchar2（100）; user1 @ tank&gt; exec：buf：='hello world'; user1 @ tank&gt; exec dbms_lob.writeappend（：data，length（：buf），utl_raw.cast_to_raw（：buf））; user1 @ tank&gt; commit;</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]显示文件<span class="italic"><code class="codeph">xxx</code></span>存在，并包含附加数据。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt;从dbfs_content中选择路径名，utl_raw.cast_to_varchar2（filedata），其中filedata不为null; PATHNAME ------------------------------------------------- ------------------------------ UTL_RAW.CAST_TO_VARCHAR2（FILEDATA）-------------- -------------------------------------------------- --------------- / user1_mnt / <span class="italic">xxx</span> hello world</pre></div>
                           </li>
                           <li class="stepexpand"><span>用户<code class="codeph">user2</code>在自己的DBFS特定路径名和挂载前缀中看到相同的文件。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; connect user2已连接。user2 @ tank&gt;从dbfs_content中选择路径名，utl_raw.cast_to_varchar2（filedata），其中filedata不为null; PATHNAME ------------------------------------------------- ------------------------------ UTL_RAW.CAST_TO_VARCHAR2（FILEDATA）-------------- -------------------------------------------------- --------------- / user2_mnt / <span class="italic">xxx</span> hello world</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>导出和注册配对完成后，两个用户在基础表的使用方面表现相同。<code class="codeph">exportFilesystem()</code>过程管理访问相同数据的必要授权，这些数据在模式之间共享。在<code class="codeph">user1</code>调用<code class="codeph">exportFilesystem()</code> ，可以向具有<code class="codeph">DBFS_ROLE</code>任何用户授予文件系统访问权限。请注意，可以指定其他角色。
                           </p>
                           <p>随后， <code class="codeph">user2</code>可以创建共享相同的底层存储作为新的文件系统DBFS <code class="codeph">user1_FS</code>文件系统，通过调用<code class="codeph">dbms_dbfs_sfs.registerFilesystem()</code> <code class="codeph">dbms_dbfs_sfs.registerStore()</code>和<code class="codeph">dmbs_dbfs_sfs.mountStore()</code>过程调用。
                           </p>
                           <p>当多个数据库用户共享文件系统时，他们必须确保所有数据库用户在所有者（此处为<code class="codeph">user1</code> ）删除文件系统之前取消注册他们对文件系统的兴趣。
                           </p>
                           <p>Oracle不建议您以<code class="codeph">root</code>身份运行DBFS。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADLOB46203"></a><div class="props_rev_3"><a id="GUID-D6AE78C9-C618-4842-8B44-2BE42E1BEDE3" name="GUID-D6AE78C9-C618-4842-8B44-2BE42E1BEDE3"></a><h4 id="ADLOB-GUID-D6AE78C9-C618-4842-8B44-2BE42E1BEDE3" class="sect4">HTTP，WebDAV和FTP访问DBFS</h4>
                  <div>
                     <p>通过Internet启用对DBFS的HTTP，WebDAV和FTP访问的组件使用各种XML DB服务器协议。</p>
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-DBFS.html#GUID-A7D24E13-93A7-4B58-92BB-27A93D1A5226">通过XDB访问DBFS的Internet</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-253DFD3A-DEE3-4D0C-BC06-3D423EA05EC6">Web分布式创作和版本控制（WebDAV）访问</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-02C9A2D0-3647-48BE-81FF-876EB45CBC2F">FTP访问DBFS</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-7A591ACE-C0BD-4AED-A216-22CC06645901">HTTP访问DBFS</a></p>
                        </li>
                     </ul>
                  </div><a id="ADLOB46212"></a><div class="props_rev_3"><a id="GUID-A7D24E13-93A7-4B58-92BB-27A93D1A5226" name="GUID-A7D24E13-93A7-4B58-92BB-27A93D1A5226"></a><h5 id="ADLOB-GUID-A7D24E13-93A7-4B58-92BB-27A93D1A5226" class="sect5">通过XDB访问DBFS的Internet</h5>
                     <div>
                        <p>要为具有DBFS身份验证的数据库用户提供已注册和已装入的DBFS存储的分层文件系统视图，存储将显示在路径<code class="codeph">/dbfs</code> 。
                        </p>
                        <p><code class="codeph">/dbfs</code>文件夹是一个虚拟文件夹，因为其子树中的资源存储在DBFS存储库中，而不是XDB存储库中。XDB为根路径名“ <code class="codeph">/</code> ”（具有调用者权限）发出<code class="codeph">dbms_dbfs_content.list()</code>命令，并接收商店访问点列表作为<code class="codeph">/dbfs</code>文件夹中的子文件夹。该列表与传递给<code class="codeph">dbms_dbfs_content.mountStore().</code> <code class="codeph">store_mount</code>参数相当<code class="codeph">dbms_dbfs_content.mountStore().</code> FTP和WebDAV用户可以导航到这些商店，而HTTP和HTTPS用户可以从浏览器访问URL。
                        </p>
                        <p>请注意，XDB存储库实现的功能（如存储库事件，资源配置和ACL）不适用于<code class="codeph">/dbfs</code>文件夹。
                        </p>
                        <p><a href="DBFS-content-API.html#GUID-630BE6DB-0178-4EE4-8D7D-824BA886F68E" title="您可以使应用程序在多个不同的编程环境中使用数据库文件系统（DBFS）。">DBFS Content API，</a>用于DBFS存储库创建，注册，注销，装载，卸载和删除的准则</p>
                     </div>
                  </div><a id="ADLOB46213"></a><div class="props_rev_3"><a id="GUID-253DFD3A-DEE3-4D0C-BC06-3D423EA05EC6" name="GUID-253DFD3A-DEE3-4D0C-BC06-3D423EA05EC6"></a><h5 id="ADLOB-GUID-253DFD3A-DEE3-4D0C-BC06-3D423EA05EC6" class="sect5">Web分布式创作和版本控制（WebDAV）访问</h5>
                     <div>
                        <p>WebDAV是一种IETF标准协议，通过Internet为用户提供与存储库类似的文件系统接口。</p>
                        <p>WebDAV服务器文件夹通常通过Microsoft Windows上的Web文件夹（2000 / NT / XP / Vista / 7等）访问。您可以使用其完全限定名称访问资源，例如<code class="codeph">/dbfs/sfs1/dir1/file1.txt</code> ，其中<code class="codeph">sfs1</code>是DBFS存储的名称。
                        </p>
                        <p>您需要在Windows上设置WebDAV才能访问DBFS文件系统。</p>
                        <div class="infoboxnotealso" id="GUID-253DFD3A-DEE3-4D0C-BC06-3D423EA05EC6__GUID-5B101177-8FAF-4C5D-859F-2EF0C594CFBD">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../adxdb/repository-access-using-protocols.html#ADXDB5562" target="_blank"><span class="italic">Oracle XML DB开发人员指南</span></a></p>
                        </div>
                        <p>访问DBFS虚拟文件夹所需的用户身份验证与XDB存储库相同。</p>
                        <p>当WebDAV客户端第一次连接到WebDAV服务器时，通常会提示用户输入用户名和密码，客户端将其用于所有后续请求。从协议的角度来看，每个请求都包含身份验证信息，XDB使用该身份验证信息将用户身份验证为有效的数据库用户。如果用户不存在，则客户端无法访问DBFS存储库或XDB存储库。身份验证成功后，数据库用户将成为会话中的当前用户。</p>
                        <p>XDB支持基本身份验证和摘要身份验证。出于安全原因，强烈建议在启用基本身份验证时使用HTTPS传输。</p>
                     </div>
                  </div><a id="ADLOB46214"></a><div class="props_rev_3"><a id="GUID-02C9A2D0-3647-48BE-81FF-876EB45CBC2F" name="GUID-02C9A2D0-3647-48BE-81FF-876EB45CBC2F"></a><h5 id="ADLOB-GUID-02C9A2D0-3647-48BE-81FF-876EB45CBC2F" class="sect5">FTP访问DBFS</h5>
                     <div>
                        <p>对DBFS的FTP访问使用大多数基于Unix的发行版中的标准FTP客户端。FTP是一种基于客户端 - 服务器架构的文件传输机制，具有独立的控制和数据连接。</p>
                        <p>FTP用户被认证为数据库用户。RFC 959中概述的协议使用明文用户名和密码进行身份验证。因此，FTP不是安全协议。</p>
                        <p>DBFS支持以下命令：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">USER</code> ：验证用户名</p>
                           </li>
                           <li>
                              <p><code class="codeph">PASS</code> ：验证密码</p>
                           </li>
                           <li>
                              <p><code class="codeph">CWD</code> ：更改工作目录</p>
                           </li>
                           <li>
                              <p><code class="codeph">CDUP</code> ：更改<code class="codeph">CDUP</code>目录</p>
                           </li>
                           <li>
                              <p><code class="codeph">QUIT</code> ：断开连接</p>
                           </li>
                           <li>
                              <p><code class="codeph">PORT</code> ：指定服务器应连接的地址和端口</p>
                           </li>
                           <li>
                              <p><code class="codeph">PASV</code> ：进入被动模式</p>
                           </li>
                           <li>
                              <p><code class="codeph">TYPE</code> ：设置传输模式，例如ASCII或二进制</p>
                           </li>
                           <li>
                              <p><code class="codeph">RETR</code> ：传输文件的副本</p>
                           </li>
                           <li>
                              <p><code class="codeph">STOR</code> ：接受数据并将数据存储于服务器站点中的文件</p>
                           </li>
                           <li>
                              <p><code class="codeph">RNFR</code> ：重命名</p>
                           </li>
                           <li>
                              <p><code class="codeph">RNTO</code> ：重命名为</p>
                           </li>
                           <li>
                              <p><code class="codeph">DELE</code> ：删除文件</p>
                           </li>
                           <li>
                              <p><code class="codeph">RMD</code> ：删除目录</p>
                           </li>
                           <li>
                              <p><code class="codeph">MKD</code> ：制作一个目录</p>
                           </li>
                           <li>
                              <p><code class="codeph">PWD</code> ：打印工作目录</p>
                           </li>
                           <li>
                              <p><code class="codeph">LIST</code> ：列出文件或目录。默认为当前目录。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NLST</code> ：返回<code class="codeph">NLST</code>中的文件名</p>
                           </li>
                           <li>
                              <p><code class="codeph">HELP</code> ：使用文档</p>
                           </li>
                           <li>
                              <p><code class="codeph">SYST</code> ：返回系统类型</p>
                           </li>
                           <li>
                              <p><code class="codeph">FEAT</code> ：获取服务器实现的功能列表</p>
                           </li>
                           <li>
                              <p><code class="codeph">NOOP</code> ：无操作（用于保持活动）</p>
                           </li>
                           <li>
                              <p><code class="codeph">EPRT</code> ：服务器应连接的扩展地址（IPv6）和端口</p>
                           </li>
                           <li>
                              <p><code class="codeph">EPSV</code> ：进入扩展被动模式（IPv6）</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADLOB46215"></a><div class="props_rev_3"><a id="GUID-7A591ACE-C0BD-4AED-A216-22CC06645901" name="GUID-7A591ACE-C0BD-4AED-A216-22CC06645901"></a><h5 id="ADLOB-GUID-7A591ACE-C0BD-4AED-A216-22CC06645901" class="sect5">HTTP访问DBFS</h5>
                     <div>
                        <p>用户通过HTTP / HTTPS协议进行只读访问。用户使用带有URL的XDB HTTP服务器将其浏览器指向DBFS存储，例如<code class="codeph">https://hostname:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/dbfs/sfs1</code> ，其中<code class="codeph">sfs1</code>是DBFS存储名称。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADLOB46008"></a><div class="props_rev_3"><a id="GUID-8665C1E7-C96A-4B17-A8F7-1889858EEF18" name="GUID-8665C1E7-C96A-4B17-A8F7-1889858EEF18"></a><h3 id="ADLOB-GUID-8665C1E7-C96A-4B17-A8F7-1889858EEF18" class="sect3">DBFS管理</h3>
               <div>
                  <p><a id="d96781e4827" class="indexterm-anchor"></a> DBFS管理包括执行诊断，管理故障转移，执行备份等的工具。
                  </p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-DBFS.html#GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02">将Oracle Wallet与DBFS客户端配合使用</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-E834E96E-F30D-45C0-8AF0-55B2F6361723">DBFS诊断</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48" title="如果Oracle RAC集群中的某个数据库实例发生故障，dbfs_client程序可以故障转移到其他现有数据库实例之一。">防止故障转移事件期间的数据丢失</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-98B94C27-7E22-4198-A3D2-A1B697D6B681">绕过客户端写缓存</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-FE5CE3DE-FDC1-4F47-8407-D70FFA00AF99">备份DBFS</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-DE04F6CD-8E24-4CD8-8A74-1FAAE54211A9">DBFS的小文件性能</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22">为DBFS启用高级SecureFiles LOB功能</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB46009"></a><div class="props_rev_3"><a id="GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02" name="GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02"></a><h4 id="ADLOB-GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02" class="sect4">将Oracle Wallet与DBFS客户端配合使用</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Wallet允许DBFS客户端安装DBFS存储，而无需用户输入密码。</p>
                        <div class="infoboxnotealso" id="GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02__ORACLEDATABASEENTERPRISEUSERSECURIT-DFF94F39">
                           <p class="notep1">也可以看看：</p>
                           <p>有关创建和管理钱包的详细信息，请参见“ <a href="../dbimi/using-oracle-wallet-manager.html#DBIMI160" target="_blank"><span class="italic">Oracle数据库企业用户安全管理员指南”</span></a></p>
                        </div>
                        <p>“ <code class="codeph">/@</code> ”语法表示使用钱包，如步骤<a href="using-DBFS.html#GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02__CIHEDBAE">7</a>所示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>为钱包创建一个目录。例如：</span><div><pre class="oac_no_warn" dir="ltr">mkdir $ ORACLE_HOME / oracle / wallet</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建自动登录钱包。</span><div><pre class="oac_no_warn" dir="ltr">mkstore -wrl $ ORACLE_HOME / oracle / wallet -create</pre></div>
                        </li>
                        <li class="stepexpand"><span>在客户端的<code class="codeph">sqlnet.ora</code>文件中添加钱包位置：</span><div><pre class="oac_no_warn" dir="ltr">WALLET_LOCATION =（SOURCE =（METHOD = FILE）（METHOD_DATA =（DIRECTORY = $ ORACLE_HOME / oracle / wallet）））</pre></div>
                        </li>
                        <li class="stepexpand"><span>在客户端的<code class="codeph">sqlnet.ora</code>文件中添加以下参数：</span><div><pre class="oac_no_warn" dir="ltr">SQLNET.WALLET_OVERRIDE = TRUE</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建凭据：</span><div><pre class="oac_no_warn" dir="ltr">mkstore -wrl <span class="italic">WALLET_LOCATION</span> -createCredential <span class="italic">db_connect_string</span> <span class="italic">用户名</span> <span class="italic">密码</span>
</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">mkstore -wrl $ ORACLE_HOME / oracle / wallet -createCredential DBConnectString scott <span class="italic">密码</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>将连接别名添加到<code class="codeph">tnsnames.ora</code>文件中。</span></li>
                        <li class="stepexpand" id="GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02__CIHEDBAE"><span>将<code class="codeph">dbfs_client</code>与Oracle Wallet一起使用。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client -o wallet / @ DBConnectString / mnt / dbfs</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADLOB46011"></a><div class="props_rev_3"><a id="GUID-E834E96E-F30D-45C0-8AF0-55B2F6361723" name="GUID-E834E96E-F30D-45C0-8AF0-55B2F6361723"></a><h4 id="ADLOB-GUID-E834E96E-F30D-45C0-8AF0-55B2F6361723" class="sect4">DBFS诊断</h4>
                  <div>
                     <p><code class="codeph">dbfs_client</code>程序支持多级跟踪以帮助诊断问题。它可以使用Linux上的<code class="codeph">syslog</code>守护程序将跟踪输出到文件或<code class="codeph">/var/log/messages</code> 。
                     </p>
                     <p>跟踪到文件时， <code class="codeph">dbfs_client</code>程序会在磁盘上保留两个跟踪文件。 <code class="codeph">dbfs_client</code> ，自动旋转跟踪文件，并将磁盘使用量限制为20 MB。</p>
                     <p>默认情况下，除了始终记录到<code class="codeph">/var/log/messages</code>关键消息之外，将关闭跟踪。
                     </p>
                     <p>如果<code class="codeph">dbfs_client</code>无法连接到Oracle数据库，请使用<code class="codeph">trace_level</code>和<code class="codeph">trace_file</code>选项启用跟踪。跟踪将其他消息打印到日志文件以便于调试。
                     </p>
                     <p>DBFS使用Oracle数据库存储文件。有时，Oracle服务器问题会作为错误传播到<code class="codeph">dbfs_client</code> 。如果存在<code class="codeph">dbfs_client</code>错误，请查看Oracle服务器日志以查看这是否是根本原因。
                     </p>
                  </div>
               </div><a id="ADLOB46166"></a><a id="ADLOB46012"></a><div class="props_rev_3"><a id="GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48" name="GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48"></a><h4 id="ADLOB-GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48" class="sect4">防止故障转移事件期间的数据丢失</h4>
                  <div>
                     <p>如果Oracle RAC集群中的某个数据库实例发生故障， <code class="codeph">dbfs_client</code>程序可以故障转移到其他现有数据库实例之一。
                     </p>
                     <div class="p">要使<code class="codeph">dbfs_client</code>故障转移正常工作，您必须修改Oracle数据库服务并指定故障转移参数。运行<code class="codeph">DBMS_SERVICE.MODIFY_SERVICE</code>过程以修改服务，如<a href="using-DBFS.html#GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48__CIHJDDEE">例25-2</a>所示</div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48__CIHJDDEE">
                        <p class="titleinexample">示例25-2启用DBFS客户端故障转移事件</p><pre class="oac_no_warn" dir="ltr">exec DBMS_SERVICE.MODIFY_SERVICE（service_name =&gt;'service_name'，aq_ha_notifications =&gt; true，failover_method =&gt;'BASIC'，failover_type =&gt;'SELECT'，failover_retries =&gt; 180，failover_delay =&gt; 1）;</pre><p>完成先决条件后，可以防止在后端Oracle数据库实例发生故障后DBFS连接故障转移期间数据丢失。在这种情况下，如果客户端丢失连接，则缓存的<span class="italic">写入</span>可能会丢失。但是，后端故障转移到其他Oracle RAC实例或备用数据库不会导致写入丢失。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>指定<code class="codeph">-o failover</code>挂载选项：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client <span class="italic">database_user</span> @ <span class="italic">database_server</span> -o failover / mnt / dbfs</pre></li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADLOB46013"></a><div class="props_rev_3"><a id="GUID-98B94C27-7E22-4198-A3D2-A1B697D6B681" name="GUID-98B94C27-7E22-4198-A3D2-A1B697D6B681"></a><h4 id="ADLOB-GUID-98B94C27-7E22-4198-A3D2-A1B697D6B681" class="sect4">绕过客户端写缓存</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">dbfs_client</code>的共享和缓存语义与使用<span class="italic">close-to-open缓存一致性</span>行为的NFS类似。这允许<code class="codeph">dbfs_client</code>多个副本访问同一共享文件系统。默认模式缓存写入客户端并在超时后或用户关闭文件后刷新它们。此外，对文件的写入仅对编写器关闭文件后打开文件的客户端显示。
                        </p>
                        <p>您可以绕过客户端写入缓存。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>打开文件时指定<code class="codeph">O_SYNC</code> 。
                              </p>
                              <p>强制在缓存中写入磁盘调用<code class="codeph">fsync</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB46014"></a><div class="props_rev_3"><a id="GUID-FE5CE3DE-FDC1-4F47-8407-D70FFA00AF99" name="GUID-FE5CE3DE-FDC1-4F47-8407-D70FFA00AF99"></a><h4 id="ADLOB-GUID-FE5CE3DE-FDC1-4F47-8407-D70FFA00AF99" class="sect4">备份DBFS</h4>
                  <div>
                     <p>备份DBFS有两种方法。您可以在数据库级别备份作为文件系统基础的表，或者通过装入点使用文件系统备份实用程序（如Oracle Secure Backup）。</p>
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-DBFS.html#GUID-CF5FAA8E-5F15-483C-9684-7A9F05B7EE18">数据库级别的DBFS备份</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-3A4486EB-05E9-442C-B93D-880984472D69">通过文件系统实用程序进行DBFS备份</a></p>
                        </li>
                     </ul>
                  </div><a id="ADLOB46168"></a><div class="props_rev_3"><a id="GUID-CF5FAA8E-5F15-483C-9684-7A9F05B7EE18" name="GUID-CF5FAA8E-5F15-483C-9684-7A9F05B7EE18"></a><h5 id="ADLOB-GUID-CF5FAA8E-5F15-483C-9684-7A9F05B7EE18" class="sect5">数据库级别的DBFS备份</h5>
                     <div>
                        <p>在数据库级别备份表的一个优点是文件系统中的文件始终与数据库中的关系数据一致。完全还原和恢复数据库还可以完全还原和恢复文件系统，而不会丢失数据。在数据库的时间点恢复期间，文件将恢复到指定的时间。与通常的数据库备份一样，备份期间发生的修改不会影响还原的一致性。整个恢复的文件系统始终与指定的时间戳保持一致。</p>
                     </div>
                  </div><a id="ADLOB46169"></a><div class="props_rev_3"><a id="GUID-3A4486EB-05E9-442C-B93D-880984472D69" name="GUID-3A4486EB-05E9-442C-B93D-880984472D69"></a><h5 id="ADLOB-GUID-3A4486EB-05E9-442C-B93D-880984472D69" class="sect5">通过文件系统实用程序进行DBFS备份</h5>
                     <div>
                        <div class="section">
                           <p>使用文件系统备份实用程序备份文件系统的优点是可以更轻松地从备份还原单个文件。上次备份后对已还原文件所做的任何更改都将丢失。</p>
                           <p>如果使用Oracle Secure Backup管理服务器计划备份，请指定<code class="codeph">allow_root</code>挂载选项。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADLOB46015"></a><div class="props_rev_3"><a id="GUID-DE04F6CD-8E24-4CD8-8A74-1FAAE54211A9" name="GUID-DE04F6CD-8E24-4CD8-8A74-1FAAE54211A9"></a><h4 id="ADLOB-GUID-DE04F6CD-8E24-4CD8-8A74-1FAAE54211A9" class="sect4">DBFS的小文件性能</h4>
                  <div>
                     <p>与任何共享文件系统一样，小文件的DBFS性能落后于本地文件系统的性能。</p>
                     <p>DBFS中的每个文件数据或元数据操作都必须通过<code class="codeph">FUSE</code>用户模式文件系统，然后通过网络转发到数据库。因此，未在客户端上缓存的每个操作都需要几毫秒才能在DBFS中运行。</p>
                     <p>对于涉及到磁盘的输入/输出（IO）的操作，等待磁盘IO会屏蔽时间延迟开销。当然，较大的IO比较小的IO具有更低的百分比开销。对于不发出磁盘IO的操作，网络开销更明显。</p>
                     <p>当您将一些小文件上的操作与本地文件系统进行比较时，开销并不明显，但影响数千个小文件的操作会产生更明显的开销。例如，列出单个目录或查看单个文件会产生接近瞬时的响应，而在具有数千个文件的目录树中进行搜索会导致较大的相对开销。</p>
                  </div>
               </div><a id="ADLOB46170"></a><a id="ADLOB46016"></a><div class="props_rev_3"><a id="GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22" name="GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22"></a><h4 id="ADLOB-GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22" class="sect4">为DBFS启用高级SecureFiles LOB功能</h4>
                  <div>
                     <div class="section">
                        <p>DBFS提供SecureFiles LOB提供的高级功能：压缩，重复数据删除，加密和分区。</p>
                        <p>例如，可以将DBFS配置为具有分区的压缩文件系统。在创建DBFS文件系统时，必须为文件系统指定一组已启用的功能。</p>
                        <div class="infoboxnotealso" id="GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22__USINGORACLELOBSTORAGEANDCREATINGAPA-DFF9C4E2">
                           <p class="notep1">也可以看看：</p>
                           <p>有关SecureFiles LOB功能的更多信息，请<a href="using-oracle-LOBs-storage.html#GUID-EC76077B-3EE9-491E-AC6D-171DA919B84C" title="Oracle LOB存储有两种类型，SecureFiles LOB存储和BasicFiles LOB存储，它们与不同类型的表空间一起使用。">使用Oracle LOB存储</a>和<a href="using-DBFS.html#GUID-8735D535-2E13-4702-95F9-01F931F2BF46" title="分区在数据库中创建多个物理段，文件在这些分区中随机分布。">创建分区文件系统</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22__GUID-E34C30BB-4066-4E46-BC7E-ADA00283E4B9">
                        <p class="titleinexample">示例25-3为DBFS启用高级安全文件LOB功能</p><pre class="oac_no_warn" dir="ltr">$ sqlplus @dbfs_create_filesystem_advanced <span class="italic">tablespace_name</span> <span class="italic">file_systemname</span> [compress-high |压缩介质|压缩低| nocompress] [重复数据删除| nodeduplicate] [加密| noencrypt] [分区|非分区]</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADLOB46216"></a><div class="props_rev_3"><a id="GUID-68FE78C8-798C-40DB-8566-F09EB27F4CC9" name="GUID-68FE78C8-798C-40DB-8566-F09EB27F4CC9"></a><h3 id="ADLOB-GUID-68FE78C8-798C-40DB-8566-F09EB27F4CC9" class="sect3">收缩和重组DBFS文件系统</h3>
               <div>
                  <p>DBFS文件系统使用联机文件系统重组来缩小自身，从而将已分配的空间释放回包含的表空间。</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-DBFS.html#GUID-53227EBD-8AFE-47CF-813F-6B509677B83E">关于更改DBFS文件系统</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-FD348CE7-CE3D-4A88-B5D2-6EBAFFC35923" title="DBFS在线文件系统重组是一个功能强大的数据移动工具，具有这些优势。">在线文件系统重组的优点</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-93914AB9-E5DB-4C02-82CC-D9E9EF15F00B">确定在线文件系统重组的可用性</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-3DF29109-3B00-4C76-819F-6017BF4671A0">调用在线文件系统重组</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-53227EBD-8AFE-47CF-813F-6B509677B83E" name="GUID-53227EBD-8AFE-47CF-813F-6B509677B83E"></a><h4 id="ADLOB-GUID-53227EBD-8AFE-47CF-813F-6B509677B83E" class="sect4">关于更改DBFS文件系统</h4>
                  <div>
                     <p>与其他数据库段一样，DBFS文件系统随着文件和目录的添加或扩大而动态增长。通过从保存DBFS文件系统的表空间到构成文件系统的各个段的空间分配来实现增长。</p>
                     <p>但是，即使删除了DBFS文件系统中的文件和目录，分配的空间也不会释放回包含的表空间，而是继续存在并可供其他DBFS实体使用。名为Online Filesystem Reorganization的进程通过缩小DBFS文件系统来解决此问题。</p>
                     <p>DBFS联机文件系统重组实用程序在内部使用Oracle数据库联机重定义工具，原始文件系统和临时占位符对应于联机重定义模型中的基础和临时对象。</p>
                     <div class="infoboxnotealso" id="GUID-53227EBD-8AFE-47CF-813F-6B509677B83E__GUID-A62284D2-7AD4-4C53-8DA1-C2A956837954">
                        <p class="notep1">也可以看看：</p>
                        <p>有关在线重新定义的详细信息，请参见<a href="../admin/managing-tables.html#ADMIN01514" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                     </div>
                  </div>
               </div><a id="ADLOB46217"></a><div class="props_rev_3"><a id="GUID-FD348CE7-CE3D-4A88-B5D2-6EBAFFC35923" name="GUID-FD348CE7-CE3D-4A88-B5D2-6EBAFFC35923"></a><h4 id="ADLOB-GUID-FD348CE7-CE3D-4A88-B5D2-6EBAFFC35923" class="sect4">在线文件系统重组的优点</h4>
                  <div>
                     <p>DBFS在线文件系统重组是一个功能强大的数据移动工具，具有这些优势。</p>
                     <p>这些是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">它在线：</span>当重组正在进行时，文件系统仍可完全用于所有应用程序的读写操作。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">它可以重新组织结构：</span> DBFS文件系统的底层物理结构和组织可以通过多种方式进行更改，例如：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>可以将非分区文件系统转换为分区文件系统，反之亦然。</p>
                              </li>
                              <li>
                                 <p>可以选择性地启用或禁用特殊SecureFiles LOB属性，包括压缩，加密和重复数据删除属性。</p>
                              </li>
                              <li>
                                 <p>文件系统中的数据可以跨表空间移动，也可以在同一个表空间中移动。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="bold">它可以同时重新组织多个文件系统：</span>如果没有临时文件系统具有相同的名称且表空间有足够的可用空间，则可以同时重新组织多个不同的文件系统，通常是每个重组文件系统的空间要求的两倍。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB46218"></a><div class="props_rev_3"><a id="GUID-93914AB9-E5DB-4C02-82CC-D9E9EF15F00B" name="GUID-93914AB9-E5DB-4C02-82CC-D9E9EF15F00B"></a><h4 id="ADLOB-GUID-93914AB9-E5DB-4C02-82CC-D9E9EF15F00B" class="sect4">确定在线文件系统重组的可用性</h4>
                  <div>
                     <div class="section">
                        <p>Oracle数据库<span class="italic">12c的</span> DBFS及更高版本支持的在线文件系统重组。一些早期版本也支持该设施。要确定您的版本是否存在，请查询DBFS PL / SQL包中的特定函数，如下所示：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>查询DBFS PL / SQL包中的特定函数。</p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr">$ sqlplus / as sysdba SELECT * FROM dba_procedures WHERE owner ='SYS'和object_name ='DBMS_DBFS_SFS'和procedure_name ='REORGANIZEFS';</pre><p>如果此查询返回与此输出中的行类似的单行，则DBFS安装支持联机文件系统重组。如果查询未返回任何行，则应升级DBFS安装或需要bug-10051996的修补程序。</p><pre class="oac_no_warn" dir="ltr">所有者------------------------------------------------- --------------------------------- OBJECT_NAME ---------------- -------------------------------------------------- ---------------- PROCEDURE_NAME --------------------------------- ------------------------------------------------- OBJECT_ID | SUBPROGRAM_ID | OVERLOAD | OBJECT_TYPE | AGG | PIP ---------- | ------------- | --------------- -------------------- | ------------- | --- | --- IMPLTYPEOWNER ------- -------------------------------------------------- ------------------------- IMPLTYPENAME ------------------------ -------------------------------------------------- -------- PAR | INT | DET | AUTHID --- | --- | --- | ------------ SYS DBMS_DBFS_SFS REORGANIZEFS 11424 | 52 |（null）| PACKAGE | NO | NO（null）（null）NO | NO | NO | CURRENT_USER</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB46219"></a><div class="props_rev_3"><a id="GUID-3DF29109-3B00-4C76-819F-6017BF4671A0" name="GUID-3DF29109-3B00-4C76-819F-6017BF4671A0"></a><h4 id="ADLOB-GUID-3DF29109-3B00-4C76-819F-6017BF4671A0" class="sect4">调用在线文件系统重组</h4>
                  <div>
                     <div class="section">
                        <p>您可以通过创建临时DBFS文件系统来执行联机文件系统重组。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>创建具有所需新组织和结构的临时DBFS文件系统：包括所需的目标表空间（可能与正在重组的文件系统相同的表空间），所需的目标SecureFiles LOB存储属性（压缩，加密或重复数据删除）等等。</span></li>
                        <li><span>调用PL / SQL过程以使用新创建的临时文件系统重新组织DBFS文件系统以进行数据移动。</span></li>
                        <li><span>重组过程完成后，删除临时文件系统。</span></li>
                     </ol>
                     <div class="section">
                        <p>下面的示例使用名为<code class="codeph">TMP_FS</code>的临时文件系统将表空间<code class="codeph">TS1</code> DBFS文件系统<code class="codeph">FS1</code>重新组织为新的表空间<code class="codeph">TS2</code> ，其中所有文件系统都属于数据库用户<code class="codeph">dbfs_user</code> ：</p><pre class="oac_no_warn" dir="ltr">$ cd $ ORACLE_HOME / rdbms / admin $ sqlplus dbfs_user / *** @dbfs_create_filesystem TS2 TMP_FS EXEC DBMS_DBFS_SFS.REORGANIZEFS（'FS1'，'TMP_FS'）; @dbfs_drop_filesystem TMP_FS退出;</pre><p>哪里：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">TMP_FS</code>可以具有任何有效名称。它旨在作为临时占位符，可以删除（如上例所示）或保留为原始文件系统的完全物化的时间点快照。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">FS1</code>是原始文件系统，不受尝试重组的影响。在重组期间，它仍可用于所有DBFS操作，包括SQL，PL / SQL和<code class="codeph">dbfs_client</code>挂载和命令行。在重组结束时，FS1具有用于创建<code class="codeph">TMP_FS</code>的新结构和组织，反之亦然（ <code class="codeph">TMP_FS</code>将具有最初用于<code class="codeph">FS1</code>的结构和组织）。如果重组因任何原因失败，DBFS会尝试清除<code class="codeph">FS1</code>的内部状态。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">TS2</code>需要足够的空间来容纳<code class="codeph">FS1</code>所有活动（未删除）的文件和目录。
                              </p>
                           </li>
                           <li>
                              <p>如果文件系统在同一个表空间中作为收缩的一部分移动，则<code class="codeph">TS1</code>至少需要<code class="codeph">FS1</code>使用的空间量的两倍。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
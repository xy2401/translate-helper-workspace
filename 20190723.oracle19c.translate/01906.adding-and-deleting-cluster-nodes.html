<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Describes how to add nodes to an existing cluster, and how to delete nodes from clusters."></meta>
      <meta name="description" content="Describes how to add nodes to an existing cluster, and how to delete nodes from clusters."></meta>
      <title>添加和删除群集节点</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta property="og:description" content="Describes how to add nodes to an existing cluster, and how to delete nodes from clusters."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00"></meta>
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95727-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-oracle-cluster-registry-and-voting-files.html" title="Previous" type="text/html"></link>
      <link rel="next" href="cloning-oracle-clusterware.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-oracle-cluster-registry-and-voting-files.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="cloning-oracle-clusterware.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">“Clusterware管理和部署指南”</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">添加和删除群集节点</li>
            </ol>
            <a id="GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458" name="GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458"></a><a id="CWADD1167"></a>
            
            <h2 id="CWADD-GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458" class="sect2"><span class="enumeration_chapter">7</span>添加和删除群集节点</h2>
         </header>
         <div class="ind">
            <div>
               <p>描述如何将节点添加到现有集群，以及如何从集群中删除节点。</p>
               <p>本章提供Linux，UNIX和Windows系统的这些任务的过程。</p>
               <div class="infoboxnote" id="GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458__GUID-C19FF93E-2BAF-41B8-B269-A40AF3165619">
                  <p class="notep1">注意：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>除非另有说明，否则请以安装Oracle Clusterware的用户身份执行所有添加和删除节点步骤。</p>
                     </li>
                     <li>
                        <p>您可以使用Fleet Patching和Provisioning添加和删除群集节点。</p>
                     </li>
                     <li>
                        <p>Oracle建议您使用<span class="q">“克隆Oracle Clusterware”中</span>描述的克隆过程来创建集群。
                        </p>
                     </li>
                  </ul>
               </div>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="adding-and-deleting-cluster-nodes.html#GUID-25D8D7A2-5240-401F-A998-00C4B525413F">添加群集节点的先决条件步骤</a></p>
                  </li>
                  <li>
                     <p><a href="adding-and-deleting-cluster-nodes.html#GUID-1965B829-795E-4977-9500-E16F1CE2A856" title="在Linux和UNIX系统上添加或删除群集节点。">在Linux和UNIX系统上添加和删除群集节点</a></p>
                  </li>
                  <li>
                     <p><a href="adding-and-deleting-cluster-nodes.html#GUID-D39503EC-3E13-4AF7-8A57-932B6E382C7B" title="从Windows系统中删除群集节点。">在Windows系统上添加和删除群集节点</a></p>
                  </li>
               </ul>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="cloning-oracle-clusterware.html#GUID-502ABA1D-8246-4A13-BE72-3E806B77AB8F" title="要设置新的Oracle Clusterware环境，请在一个节点上以交互模式或静默模式运行gridSetup.sh实用程序，就像为新集群安装Oracle Grid Infrastructure时一样。您还可以使用克隆将节点添加到群集。">克隆Oracle Clusterware</a></li>
                  </ul>
               </div>
            </div><a id="CWADD90987"></a><div class="props_rev_3"><a id="GUID-25D8D7A2-5240-401F-A998-00C4B525413F" name="GUID-25D8D7A2-5240-401F-A998-00C4B525413F"></a><h3 id="CWADD-GUID-25D8D7A2-5240-401F-A998-00C4B525413F" class="sect3">添加群集节点的先决条件步骤</h3>
               <div>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-25D8D7A2-5240-401F-A998-00C4B525413F__GUID-2BF47DD1-B474-4B94-8CB1-34250BDB9BD6">
                        <p class="notep1">注意：</p>
                        <p>在将节点添加到群集之前，请确保执行<span><cite>Oracle Grid Infrastructure安装和升级指南（适用于Linux）中</cite></span>列出的预安装任务。
                        </p>
                        <p><span class="italic">不要</span>安装Oracle Clusterware。将节点添加到群集时，将从现有节点复制该软件。
                        </p>
                     </div>
                     <p>完成以下步骤以准备要添加到群集的节点：</p>
                     <ol>
                        <li>
                           <p>建立物理连接。</p>
                           <p>将节点的硬件连接到群集的网络基础结构。这包括建立电气连接，配置网络互连，配置共享磁盘子系统连接等。有关此步骤的详细信息，请参阅硬件供应商文档。</p>
                        </li>
                        <li>
                           <p>安装操作系统。</p>
                           <p>在群集中的其他节点上安装与操作系统匹配的操作系统的克隆映像。这包括安装所需的服务补丁，更新和驱动程序。有关此过程的详细信息，请参阅操作系统供应商文档。</p>
                           <div class="infoboxnote" id="GUID-25D8D7A2-5240-401F-A998-00C4B525413F__GUID-9D4F50DD-7BFD-4653-B436-6592DD613F02">
                              <p class="notep1">注意：</p>
                              <p>Oracle建议您使用克隆的映像。但是，如果安装符合安装要求，则根据供应商文档安装操作系统。</p>
                           </div>
                        </li>
                        <li>
                           <p>创建Oracle用户。</p>
                           <p>您必须在现有节点上存在的新节点上创建所有Oracle用户。例如，如果要将节点添加到具有两个节点的集群，并且这两个节点具有Oracle Grid Infrastructure主目录和Oracle主目录的不同所有者，则必须在新节点上创建这些所有者，即使您这样做不打算在新节点上安装Oracle主目录。</p>
                           <div class="infoboxnote" id="GUID-25D8D7A2-5240-401F-A998-00C4B525413F__GUID-3B0163C1-0EAB-448E-83BA-1544EE1DCB6B">
                              <p class="notep1">注意：</p>
                              <p>仅对Linux和UNIX系统执行此步骤。</p>
                           </div>
                           <p>以<code class="codeph">root</code>用户身份，使用与现有节点上相同的用户ID和组ID创建Oracle用户和组。
                           </p>
                        </li>
                        <li>
                           <p>确保在节点上配置了SSH。</p>
                           <div class="infoboxnote" id="GUID-25D8D7A2-5240-401F-A998-00C4B525413F__GUID-A9D98D13-54C9-47EA-A57A-3774687626F9">
                              <p class="notep1">注意：</p>
                              <p>安装Oracle Clusterware 12 <span class="italic">c</span>时配置SSH。如果未配置SSH，请参阅“ <span><cite>Oracle Grid Infrastructure安装和升级指南”</cite></span>以获取有关配置SSH的信息。</p>
                           </div>
                        </li>
                        <li>
                           <p>使用Cluster Verification Utility（CVU）验证硬件和操作系统安装。</p>
                           <p>在要添加的节点上配置硬件和操作系统后，可以运行以下命令以验证要添加的节点是否可由群集中的其他节点访问。您还可以使用此命令验证用户与本地节点中所有给定节点的等效性，所有给定节点之间的节点连接性，所有给定节点对共享存储的可访问性等等。</p>
                           <ol type="a">
                              <li>
                                 <p>从现有节点上的<code class="codeph"><span class="variable" translate="no">Grid_home</span> /bin</code>目录中，运行CVU命令以获取参考节点的属性与属于当前集群环境的所有其他节点的详细比较。将<code class="codeph"><span class="variable" translate="no">ref_node</span></code>替换为现有集群中您希望CVU与要添加的节点进行比较的节点的名称。在<code class="codeph">-n</code>选项后指定以逗号分隔的节点列表。在以下示例中， <code class="codeph"><span class="variable" translate="no">orainventory_group</span></code>是Oracle Inventory组的名称， <code class="codeph"><span class="variable" translate="no">osdba_group</span></code>是OSDBA组的名称：</p><pre class="pre codeblock"><code>$ cluvfy comp peer [-refnode <span class="variable" translate="no">ref_node</span> ] -n <span class="variable" translate="no">node_list</span> [-orainv <span class="variable" translate="no">orainventory_group</span> ] [-osdba <span class="variable" translate="no">osdba_group</span> ] [-verbose]</code></pre></li>
                              <li>
                                 <p>确保Grid Infrastructure Management Repository至少为每个节点添加了超过500 MB的空间，如下所示：</p><pre class="pre codeblock"><code>$ oclumon manage -get repsize</code></pre><p>如果需要，添加额外空间，如下所示：</p><pre class="pre codeblock"><code>$ oclumon manage -repos <span class="variable" translate="no">total_in_MB</span></code></pre><div class="infoboxnotealso" id="GUID-25D8D7A2-5240-401F-A998-00C4B525413F__GUID-6AE75113-5EF9-4E80-BFD1-D1934E194EF0">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关使用OCLUMON的详细信息，请参见<span><cite>Oracle Autonomous Health Framework用户指南</cite></span></p>
                                 </div>
                              </li>
                           </ol>
                           <div class="infoboxnote" id="GUID-25D8D7A2-5240-401F-A998-00C4B525413F__GUID-352DE339-DA28-4C34-AF87-98688B60C178">
                              <p class="notep1">注意：</p>
                              <p>对于参考节点，选择要与CVU进行比较的群集节点，例如，使用<code class="codeph">-n</code>选项指定要添加的节点。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <p>完成本节中的过程后，即可将节点添加到群集中。</p>
                     <div class="infoboxnote" id="GUID-25D8D7A2-5240-401F-A998-00C4B525413F__GUID-C4657204-52E5-402B-8350-59DB40E592C8">
                        <p class="notep1">注意：</p>
                        <p>完成Oracle Clusterware安装后，请避免更改主机名，包括添加或删除域资格。必须从群集中删除具有已更改主机名的节点，并使用新名称添加回来。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../cwlin/oracle-grid-infrastructure-installation-checklist.html#CWLIN-GUID-71A93E07-7E50-449C-B425-02F04A2EA8E6" target="_blank"><span><cite>适用于Linux的Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                        <li><a href="../atnms/oclumon-command-reference.html#ATNMS-GUID-1A00F7D4-4843-4647-AFF8-07021719404F" target="_blank"><span><cite>Oracle自治健康框架用户指南</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="CWADD90988"></a><div class="props_rev_3"><a id="GUID-1965B829-795E-4977-9500-E16F1CE2A856" name="GUID-1965B829-795E-4977-9500-E16F1CE2A856"></a><h3 id="CWADD-GUID-1965B829-795E-4977-9500-E16F1CE2A856" class="sect3">在Linux和UNIX系统上添加和删除群集节点</h3>
               <div>
                  <p>在Linux和UNIX系统上添加或删除群集节点。</p>
                  <p>添加节点一节中的过程假定您已执行<span class="q">“添加群集节点的先决条件步骤”</span>部分中的<span class="q">步骤</span> 。
                  </p>
                  <p>节点添加过程的最后一步包括将Oracle Clusterware主目录从现有节点上的Oracle Clusterware主目录扩展到要添加的节点。</p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="adding-and-deleting-cluster-nodes.html#GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B" title="您可以使用三种方法将节点添加到群集。">在Linux和UNIX系统上添加群集节点</a></p>
                     </li>
                     <li>
                        <p><a href="adding-and-deleting-cluster-nodes.html#GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A" title="从Linux和UNIX系统上的群集中删除节点。">在Linux和UNIX系统上删除群集节点</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-1965B829-795E-4977-9500-E16F1CE2A856__GUID-A9653A53-1DCC-477D-8631-935AB663A781">
                     <p class="notep1">注意：</p>
                     <p>从Oracle Clusterware <span class="italic">11g第</span> 2版（11.2）开始，Oracle Universal Installer在添加节点时默认为静默模式。
                     </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="adding-and-deleting-cluster-nodes.html#GUID-25D8D7A2-5240-401F-A998-00C4B525413F">添加群集节点的先决条件步骤</a></li>
                     </ul>
                  </div>
               </div><a id="CWADD90989"></a><div class="props_rev_3"><a id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B" name="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B"></a><h4 id="CWADD-GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B" class="sect4">在Linux和UNIX系统上添加群集节点</h4>
                  <div>
                     <p>您可以使用三种方法将节点添加到群集。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-24D09AEA-4021-4654-AB2E-2101369AA7A6">使用Fleet Patching和Provisioning添加节点</p>
                        <p>如果您有Fleet Patching和Provisioning Server，则可以使用Fleet Patching和Provisioning使用一个命令将节点添加到集群，如以下示例所示：</p><pre class="pre codeblock"><code>$ rhpctl addnode gihome -client rhpclient -newnodes clientnode2：clientnode2-vip -root</code></pre><p>前述示例将一个命名节点<code class="codeph">clientnode2</code>与VIP <code class="codeph">clientnode2-vip</code>对舰队修补和供应客户端命名<code class="codeph">rhpclient</code> ，使用根证书（登录为要添加的节点）。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-32510CA8-6F06-4C07-8CE1-7715B99D970A">使用Oracle Grid Infrastructure安装程序添加节点</p>
                        <div class="p">如果您不想使用Fleet Patching和Provisioning将节点添加到群集，则可以使用Oracle Grid Infrastructure安装程序完成该任务。
                           <div class="infoboxnote" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-1CD6C85C-0E6D-48F7-9855-376B02C75D72">
                              <p class="notep1">注意：</p>您可以使用<code><span class="variable" translate="no">$Oracle_home</span> /install/response/gridSetup.rsp</code>模板创建响应文件，以使用Oracle Grid Infrastructure安装程序为非交互（静默模式）操作添加节点。
                           </div>
                        </div>
                        <p>使用Oracle Grid Infrastructure安装程序将节点添加到集群</p>
                        <ol>
                           <li>
                              <p>运行<code class="codeph">./gridSetup.sh</code>以启动安装程序。
                              </p>
                           </li>
                           <li>
                              <p>在“ <span class="wintitle">选择配置选项”</span>页面上，选择“ <span class="uicontrol bold">向群集添加更多节点”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“ <span class="wintitle">群集节点信息”</span>页上，单击“ <span class="uicontrol bold">添加...”</span>以提供要添加的节点的信息。
                              </p>
                           </li>
                           <li>
                              <p>验证过程在“ <span class="wintitle">执行先决条件检查”</span>页面上完成后，请检查摘要，然后单击“ <span class="uicontrol bold">安装”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>如果出现提示，则以root身份运行<code class="codeph">orainstRoot.sh</code>脚本，以使用中央库存的位置填充<code class="codeph">/etc/oraInst.loc</code>文件。例如：</p><pre class="pre codeblock"><code>#/opt/oracle/oraInventory/orainstRoot.sh</code></pre></li>
                           <li id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__CFHFEJIA">
                              <p>如果在群集上配置了Oracle RAC或Oracle RAC One Node数据库并且您具有本地Oracle主目录，请执行以下操作将Oracle数据库主目录扩展到<code class="codeph">node3</code> ：</p>
                              <ol type="a">
                                 <li>
                                    <p>导航到<code class="codeph">node1</code>上的<code class="codeph"><span class="variable" translate="no">Oracle_home</span></code> <code class="codeph">/addnode</code>目录，并使用以下语法以安装Oracle RAC的用户身份运行<code class="codeph">addnode.sh</code>脚本：</p><pre class="pre codeblock"><code>$ ./addnode.sh“CLUSTER_NEW_NODES = {node3}”</code></pre></li>
                                 <li>
                                    <p>以<code class="codeph">root</code> <code class="codeph">/root.sh</code>在<code class="codeph">node3</code>上运行<code class="codeph"><span class="variable" translate="no">Oracle_home</span></code> <code class="codeph">/root.sh</code>脚本，其中<code class="codeph"><span class="variable" translate="no">Oracle_home</span></code>是Oracle RAC主目录。
                                    </p>
                                 </li>
                              </ol>
                              <p>如果您具有使用Oracle自动存储管理群集文件系统（Oracle ACFS）共享的共享Oracle主目录，请执行以下操作以将Oracle数据库主目录扩展到<code class="codeph">node3</code> ：</p>
                              <ol type="a">
                                 <li>
                                    <p>以<code class="codeph">root</code> <code class="codeph">/root.sh</code>在<code class="codeph">node3</code>上运行<code class="codeph"><span class="variable" translate="no">Grid_home</span></code> <code class="codeph">/root.sh</code>脚本，其中<code class="codeph"><span class="variable" translate="no">Grid_home</span></code>是Oracle Grid Infrastructure主目录。
                                    </p>
                                 </li>
                                 <li>
                                    <p>从要添加的节点上的<code class="codeph"><span class="variable" translate="no">Oracle_home</span></code> <code class="codeph">/oui/bin</code>目录中安装Oracle RAC的用户运行以下命令，以添加Oracle RAC数据库主目录：</p><pre class="pre codeblock"><code>$ ./runInstaller -attachHome ORACLE_HOME =“ORACLE_HOME”“CLUSTER_NODES = {node3}”LOCAL_NODE =“node3”ORACLE_HOME_NAME =“ <span class="variable" translate="no">home_name</span> ”-cfs</code></pre></li>
                                 <li>
                                    <p>导航到<code class="codeph">node1</code>上的<code class="codeph"><span class="variable" translate="no">Oracle_home</span></code> <code class="codeph">/addnode</code>目录，并使用以下语法以安装Oracle RAC的用户身份运行<code class="codeph">addnode.sh</code>脚本：</p><pre class="pre codeblock"><code>$ ./addnode.sh -noCopy“CLUSTER_NEW_NODES = {node3}”</code></pre><div class="infoboxnote" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-B63EA082-E180-43A2-AF1F-7A1155295086">
                                       <p class="notep1">注意：</p>
                                       <p>使用<code class="codeph">-noCopy</code>选项，因为目标节点上的Oracle主目录已经完全填充了软件。
                                       </p>
                                    </div>
                                 </li>
                              </ol>
                              <p>如果在<span class="italic">不是</span> Oracle ACFS的共享文件系统上具有共享Oracle主目录，则必须首先在目标节点上为Oracle RAC数据库主目录创建装入点，装载并附加Oracle RAC数据库主目录，然后更新Oracle库存，如下：</p>
                              <ol type="a">
                                 <li>
                                    <p>在群集中的现有节点上运行<code class="codeph">srvctl config database -db <span class="variable" translate="no">db_name</span></code>命令以获取装入点信息。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在<code class="codeph">node3</code>以<code class="codeph">root</code>身份运行以下命令以创建挂载点：</p><pre class="pre codeblock"><code>#mkdir -p <span class="variable" translate="no">mount_point_path</span></code></pre></li>
                                 <li>
                                    <p>装载承载Oracle RAC数据库主目录的文件系统。</p>
                                 </li>
                                 <li>
                                    <p>从要添加的节点上的<code class="codeph"><span class="variable" translate="no">Oracle_home</span></code> <code class="codeph">/oui/bin</code>目录中安装Oracle RAC的用户运行以下命令，以添加Oracle RAC数据库主目录：</p><pre class="pre codeblock"><code>$ ./runInstaller -attachHome ORACLE_HOME =“ORACLE_HOME”“CLUSTER _NODES = { <span class="variable" translate="no">local_node_name</span> }”LOCAL_NODE =“ <span class="variable" translate="no">node_name</span> ”ORACLE_HOME_NAME =“ <span class="variable" translate="no">home_name</span> ”-cfs</code></pre><p>导航到<code class="codeph">node1</code>上的<code class="codeph"><span class="variable" translate="no">Oracle_home</span> /addnode</code>目录，并使用以下语法以安装Oracle RAC的用户身份运行<code class="codeph">addnode.sh</code>脚本：</p><pre class="oac_no_warn" dir="ltr">$ ./addnode.sh -noCopy“CLUSTER_NEW_NODES = {node3}”</pre><div class="infoboxnote" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-9E6DDBC1-E6AD-4D4D-B093-CD063C5920B4">
                                       <p class="notep1">注意：</p>
                                       <p>使用<code class="codeph">-noCopy</code>选项，因为目标节点上的Oracle主目录已经完全填充了软件。
                                       </p>
                                    </div>
                                 </li>
                              </ol>
                              <div class="infoboxnote" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-738D8668-E5CD-4EA3-A2C4-365B8FA3EFEB">
                                 <p class="notep1">注意：</p>运行<code class="codeph">addnode.sh</code> ，确保<code><span class="variable" translate="no">Grid_home</span> /network/admin/samples</code>目录的权限设置为750。
                              </div>
                           </li>
                           <li>
                              <p>运行<code class="codeph"><span class="variable" translate="no">Grid_home</span> /root.sh</code>上的脚本<code class="codeph">node3</code>为<code class="codeph">root</code>和运行脚本以后，按指示。
                              </p>
                              <div class="infoboxnote" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-C5F5BA72-89E4-4467-81F2-659F069B7D67">
                                 <p class="notep1">注意：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果在步骤<a href="adding-and-deleting-cluster-nodes.html#GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__CFHFEJIA">6中</a>运行了<code class="codeph">root.sh</code>脚本，则无需再次运行它。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果您有策略管理的数据库，则必须确保在运行<code class="codeph">root.sh</code>脚本之前将Oracle主目录克隆到新节点。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果在要添加到集群的节点上配置了任何管理员管理的数据库实例，则必须在运行<code class="codeph">root.sh</code>脚本之前将Oracle主目录扩展到新节点。
                                       </p>
                                       <p>或者，使用<code class="codeph">srvctl remove instance</code>命令删除管理员管理的数据库实例。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <p>通过从<code class="codeph"><span class="variable" translate="no">Grid_home</span> /bin</code>目录以<code class="codeph">root</code>身份运行以下命令，在新节点上启动Oracle ACFS资源：</p><pre class="pre codeblock"><code>#srvctl start filesystem -device <span class="variable" translate="no">volume_device_name</span> -node node3</code></pre><div class="infoboxnote" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-916DDEED-7892-406C-BC3B-4F904F62B013">
                                 <p class="notep1">注意：</p>
                                 <p>确保Oracle ACFS资源（包括Oracle主服务器所在的Oracle ACFS注册表资源和Oracle ACFS文件系统资源）在新添加的节点上处于联机状态。</p>
                              </div>
                           </li>
                           <li>
                              <p>以安装Oracle Clusterware的用户身份运行以下CVU命令以检查群集完整性。此命令验证是否已成功将任意数量的指定节点添加到网络，共享存储和集群件级别的集群中：</p><pre class="pre codeblock"><code>$ cluvfy stage -post nodeadd -n node3 [-verbose]</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="rapid-home-provisioning.html#GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" title="Fleet Patching and Provisioning是一种用于配置和维护Oracle主目录的软件生命周期管理方法。">车队修补和供应与维护</a></li>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                           <li><a href="cluster-verification-utility-reference.html#GUID-F9E3F87E-BFEC-4D50-A11E-0F096EC05880" title="使用cluvfy stage -pre nodeadd命令在将指定节点添加到现有集群之前验证它们是否已正确配置，并在添加节点之前验证集群的完整性。使用cluvfy stage -post nodeadd命令验证指定的节点是否已成功添加到网络，共享存储和集群件级别的集群中。">cluvfy stage [-pre | -post] nodeadd</a></li>
                           <li><a href="../racad/adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#RACAD-GUID-53F37237-C0D8-4EEF-B845-EDFD56B9715A" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                           <li><a href="../racad/adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#RACAD-GUID-A46AFF14-33F8-4379-AEC2-5A4F4FC8199E" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD90992"></a><div class="props_rev_3"><a id="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A" name="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A"></a><h4 id="CWADD-GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A" class="sect4">在Linux和UNIX系统上删除群集节点</h4>
                  <div>
                     <p>从Linux和UNIX系统上的群集中删除节点。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A__GUID-1FEBB7F1-07E1-494E-8778-C8243656E4B8">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在从群集中删除节点之前，可以从节点中删除Oracle RAC数据库实例，但不需要执行此步骤。如果不删除实例，则仍配置实例但从不运行。从群集中删除节点不会从群集中删除节点的配置信息。剩余配置信息不会干扰群集的操作。</p>
                                 <p><span class="bold">另请参阅：“</span> <span><cite>Oracle Real Application Clusters管理和部署指南”</cite></span> ，以获取有关删除Oracle RAC数据库实例的更多信息</p>
                              </li>
                              <li>
                                 <p>如果删除GNS服务的群集的最后一个节点，则必须从GNS中删除该群集的条目。</p>
                              </li>
                              <li>
                                 <p>如果群集中的节点已取消固定，则Oracle Clusterware会在一段时间后忽略这些节点，并且您无需删除它们。</p>
                              </li>
                              <li>
                                 <p>如果为节点创建特定于节点的配置（例如，禁用特定节点上的服务，或将节点添加到服务器池的候选列表），则从群集中删除节点时，不会删除特定于节点的配置。必须手动删除此类节点特定的配置。</p>
                              </li>
                              <li>
                                 <p>在对群集进行任何更改后，将在OCR中自动备份表决文件。</p>
                              </li>
                              <li>
                                 <p>如果要从Oracle Flex群集中删除非Hub节点，则只需完成此过程的步骤1到步骤4。</p>
                              </li>
                           </ul>
                        </div>
                        <p>要从群集中删除节点：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>确保<code class="codeph"><span class="variable" translate="no">Grid_home</span></code>在每个节点上正确指定Oracle Clusterware主目录的完整目录路径，其中<code class="codeph"><span class="variable" translate="no">Grid_home</span></code>是已安装的Oracle Clusterware软件的位置。</span></li>
                        <li class="stepexpand"><span>以<code class="codeph">root</code>用户身份或以安装Oracle Clusterware的用户身份运行以下命令，以确定要删除的节点是否处于活动状态以及是否已固定：</span><div><pre class="pre codeblock"><code>$ olsnodes -s -t</code></pre><p>如果节点已固定，则运行<code class="codeph">crsctl unpin css</code>命令。否则，请继续执行下一步。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在要删除的节点上，根据您是否具有共享或本地Oracle主目录，请以安装Oracle Clusterware的用户身份完成以下过程之一：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对于本地主目录，请通过运行以下命令从要删除的节点卸载Oracle Clusterware主目录，其中<code class="codeph"><span class="variable" translate="no">Grid_home</span></code>是为Oracle Clusterware主目录定义的路径：</p><pre class="pre codeblock"><code>$ <span class="variable" translate="no">Grid_home</span> / deinstall / deinstall -local</code></pre><div class="infoboxnote" id="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A__GUID-90DC8FCB-2FF1-4274-BE4D-5AC0A645EA59">
                                       <p class="notep1">警告：</p>
                                       <p></p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>如果未指定<code class="codeph">-local</code>标志，那么该命令将从群集中的每个节点中删除Oracle Grid Infrastructure主目录。
                                             </p>
                                          </li>
                                          <li>
                                             <p>如果剪切并粘贴上述命令，则将其粘贴到文本编辑器中，然后将其粘贴到命令行以删除此文档可能包含的任何格式。</p>
                                          </li>
                                       </ul>
                                    </div>
                                    <div class="infoboxnote" id="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A__GUID-3A4F2019-9A8A-4A27-B928-87AB46B4EBA2">
                                       <p class="notep1">注意：</p>或者，在配置Oracle Grid Infrastructure之后，如果要从网格基础结构中删除任何节点，则可以通过运行<code class="codeph"><span class="variable" translate="no">Grid_home</span> /gridSetup.sh</code> ， <span class="bold">从群集中</span>选择“ <span class="bold">删除节点”</span>并按照提示进行<span class="bold">删除</span> 。
                                    </div>
                                 </li>
                                 <li>
                                    <p>如果您有共享主目录，请在要删除的节点上按以下顺序运行以下命令。</p>
                                    <p>运行以下命令以取消配置Oracle Clusterware：</p><pre class="pre codeblock"><code>$ <span class="variable" translate="no">Grid_home</span> /crs/install/rootcrs.sh -deconfig -force</code></pre><p>从<code class="codeph"><span class="variable" translate="no">Grid_home</span></code> <code class="codeph">/oui/bin</code>目录运行以下命令以分离Grid home：</p><pre class="pre codeblock"><code>$ ./runInstaller -detachHome ORACLE_HOME = <span class="variable" translate="no">Grid_home</span> -silent -local</code></pre><p>按照安装实用程序的提示手动删除任何配置文件。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>从您<span class="italic">未删除的</span>任何节点，以<code class="codeph">root</code>身份从<code class="codeph"><span class="variable" translate="no">Grid_home</span></code> <code class="codeph">/bin</code>目录运行以下命令，以从群集中删除该节点：</span><div><pre class="pre codeblock"><code><span class="variable" translate="no">node_to_be_deleted</span> delete node -n <span class="variable" translate="no">node_to_be_deleted</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行以下CVU命令以验证是否已从群集中成功删除指定的节点：</span><div><pre class="pre codeblock"><code>$ cluvfy stage -post nodedel -n <span class="variable" translate="no">node_list</span> [-verbose]</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>如果删除Oracle Clusterware关闭的群集节点，请确定已删除节点的VIP是否仍然存在，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl config vip -node <span class="variable" translate="no">deleted_node_name</span></code></pre><p>如果VIP仍然存在，则删除它，如下所示：</p><pre class="pre codeblock"><code>$ srvctl stop vip -node <span class="variable" translate="no">deleted_node_name</span> $ srvctl remove vip -vip <span class="variable" translate="no">deleted_vip_name</span></code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p><span class="bold">使用Fleet Patching和Provisioning删除节点</span></p>
                        <p>或者，您可以使用Fleet Patching和Provisioning使用一个命令从群集中删除节点，如以下示例所示：</p><pre class="pre codeblock"><code>$ rhpctl deletenode gihome -client rhpclient -node clientnode2 -root</code></pre><p>前面的例子中删除一个指定节点<code class="codeph">clientnode2</code>从舰队修补和供应客户端命名<code class="codeph">rhpclient</code> ，使用根证书（登录为要删除的节点）。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../racad/adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#RACAD-GUID-BFA0BA52-0387-4B90-AAC9-9DABA85A36E1" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                           <li><a href="cluster-verification-utility-reference.html#GUID-73A94814-62E0-425C-ABA6-DE1D6DF45747" title="验证是否已从群集中成功删除特定节点。通常，此命令将验证是否已删除特定于节点的接口配置详细信息，节点不再是群集配置的一部分，并且已执行正确的Oracle ASM清理。">cluvfy stage -post nodedel</a></li>
                           <li><a href="rapid-home-provisioning.html#GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" title="Fleet Patching and Provisioning是一种用于配置和维护Oracle主目录的软件生命周期管理方法。">车队修补和供应与维护</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD90995"></a><div class="props_rev_3"><a id="GUID-D39503EC-3E13-4AF7-8A57-932B6E382C7B" name="GUID-D39503EC-3E13-4AF7-8A57-932B6E382C7B"></a><h3 id="CWADD-GUID-D39503EC-3E13-4AF7-8A57-932B6E382C7B" class="sect3">在Windows系统上添加和删除群集节点</h3>
               <div>
                  <p>本节介绍Windows系统上的群集节点添加和删除。本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="adding-and-deleting-cluster-nodes.html#GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D">在Windows系统上将节点添加到群集</a></p>
                     </li>
                     <li>
                        <p><a href="adding-and-deleting-cluster-nodes.html#GUID-DDED83A3-F1BB-43EB-AFA4-FDAF51E84EAF" title="从Windows系统中删除群集节点。">在Windows系统上删除群集节点</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D39503EC-3E13-4AF7-8A57-932B6E382C7B__GUID-50EA8375-3D9F-4040-8ACF-C23451308FBB">
                     <p class="notep1">也可以看看：</p>
                     <p>有关删除整个群集的详细信息，请参阅<span><cite>适用于Microsoft Windows x64（64位）的Oracle Grid Infrastructure安装和升级指南</cite></span></p>
                  </div>
               </div><a id="CWADD90996"></a><div class="props_rev_3"><a id="GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D" name="GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D"></a><h4 id="CWADD-GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D" class="sect4">在Windows系统上将节点添加到群集</h4>
                  <div>
                     <div class="section">
                        <p>确保在<span class="q">添加节点</span>之前完成<span class="q">“添加群集节点的先决条件步骤”中</span>列出的<span class="q">先决条件</span> 。
                        </p>
                        <p>此过程描述如何将节点添加到群集。此过程假定：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>存在一个名为<code class="codeph">node1</code>和<code class="codeph">node2</code>节点的现有集群</p>
                           </li>
                           <li>
                              <p>您正在添加名为<code class="codeph">node3</code>的节点</p>
                           </li>
                           <li>
                              <p>您已在本地主目录的<code class="codeph">node1</code>和<code class="codeph">node2</code>上成功安装了Oracle Clusterware，其中<code class="codeph"><span class="variable" translate="no">Grid_home</span></code>表示已成功安装的主目录</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D__GUID-A0FC9024-5652-4D74-8A92-E258AD4B3EB4">
                           <p class="notep1">注意：</p>
                           <p>请勿使用本节中描述的过程在Windows系统上从Oracle Database <span class="italic">10g第</span> 1版（10.1）升级Oracle数据库的配置中添加群集节点。
                           </p>
                        </div>
                        <p>要添加节点：</p>
                        <ol>
                           <li>
                              <p>验证集群和<code class="codeph">node3</code>的完整性：</p><pre class="pre codeblock"><code>C：\&gt; cluvfy stage -pre nodeadd -n node3 [-fixup] [-verbose]</code></pre><p>您可以指定<code class="codeph">-fixup</code>选项以及CVU在验证失败时打印指令以修复集群或节点的目录。
                              </p>
                           </li>
                           <li>
                              <p>在<code class="codeph">node1</code> ，转到<code class="codeph"><span class="variable" translate="no">Grid_home</span> \addnode</code>目录并运行<code class="codeph">addnode.bat</code>脚本，如下所示：</p><pre class="pre codeblock"><code>C：\&gt; addnode.bat“CLUSTER_NEW_NODES = {node3}”“CLUSTER_NEW_VIRTUAL_HOSTNAMES = {node3-vip}”</code></pre></li>
                           <li>
                              <p>在新节点上运行以下命令：</p><pre class="pre codeblock"><code>C：\&gt; <span class="variable" translate="no">Grid_home</span> \ crs \ config \ gridconfig.bat</code></pre></li>
                           <li>
                              <p><span class="italic">仅</span>当您将数据库主机配置为使用Oracle ACFS时， <span class="italic">才</span>需要执行以下步骤：</p>
                              <ol type="a">
                                 <li id="GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D__CFHDFCEI">
                                    <p>对于配置为使用Oracle ACFS的每个数据库，请从Oracle RAC数据库主目录运行以下命令：</p><pre class="pre codeblock"><code>C：\&gt; <span class="variable" translate="no">ORACLE_HOME</span> / bin / srvctl stop database -db <span class="variable" translate="no">database_unique_name</span></code></pre><div class="infoboxnote" id="GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D__GUID-D23333CF-54F9-4E6B-BDFC-CBC8D257C209">
                                       <p class="notep1">注意：</p>
                                       <p>运行<code class="codeph">srvctl config database</code>命令以列出使用Oracle Clusterware配置的所有数据库。使用<code class="codeph">srvctl config database -db</code> <code class="codeph"><span class="variable" translate="no">database_unique_name</span></code>查找数据库详细信息。如果<code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span></code>路径指向Oracle ACFS装入路径，则数据库使用Oracle ACFS。使用命令输出查找配置为在新添加的节点上运行的数据库实例名称。
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>使用Windows Server Manager Control来停止和删除服务。</p>
                                 </li>
                                 <li>
                                    <p>对于在步骤<a href="adding-and-deleting-cluster-nodes.html#GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D__CFHDFCEI">4.a中</a>收集的每个数据库和数据库主目录，请运行以下命令：</p><pre class="pre codeblock"><code>C：\&gt; <span class="variable" translate="no">ORACLE_HOME</span> / bin / srvctl start database -db <span class="variable" translate="no">database_unique_name</span></code></pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>运行以下命令以验证所有已配置节点（已存在的节点和已添加的节点）上的Oracle Clusterware组件的完整性：</p><pre class="pre codeblock"><code>C：\&gt; cluvfy stage -post crsinst -n all [-verbose]</code></pre></li>
                        </ol>
                        <p>完成本节中有关添加节点的过程后，您可以选择将Oracle数据库与Oracle RAC组件一起扩展到新节点，使其成为现有Oracle RAC数据库的成员。</p>
                        <div class="infoboxnotealso" id="GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D__GUID-25382E7A-60CC-4D21-998A-EE16EA3995CE">
                           <p class="notep1">也可以看看：</p>
                           <p>有关将Oracle数据库与Oracle RAC一起扩展到新节点的详细信息，请参阅<span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D__GUID-FBF46B97-D023-4E93-85C3-D91340433B7B">为Microsoft Transaction Server创建OraMTS服务</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Oracle Transaction for Microsoft Transaction Server（OraMTS）允许Oracle数据库用作Microsoft应用程序协调事务中的资源管理器。OraMTS充当Oracle数据库到Microsoft分布式事务处理协调器（MSDTC）的代理。因此，OraMTS提供客户端连接池，并允许利用Oracle的客户端组件参与可升级和分布式事务。此外，OraMTS可以与在任何操作系统上运行的Oracle数据库一起运行，因为服务本身是在Windows上运行的。</p>
                        <p>在早于Oracle数据库<span class="italic">12c的</span>版本中，OraMTS服务被作为一个纯软件的安装过程中创建的。从Oracle Database 12 <span class="italic">c开始</span> ，您必须使用配置工具来创建此服务。
                        </p>
                        <p>在添加节点或为Oracle RAC执行仅软件安装后创建OraMTS服务，如下所示：</p>
                        <ol>
                           <li>
                              <p>打开命令窗口。</p>
                           </li>
                           <li>
                              <p>将目录更改为<code class="codeph">%ORACLE_HOME%\bin</code> 。
                              </p>
                           </li>
                           <li>
                              <p>运行<code class="codeph">OraMTSCtl</code>实用程序以创建OraMTS服务，其中<code class="codeph"><span class="variable" translate="no">host_name</span></code>是应在其上创建服务的节点列表：</p><pre class="pre codeblock"><code>C：\ .. bin&gt; oramtsctl.exe -new -host <span class="variable" translate="no">host_name</span></code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="adding-and-deleting-cluster-nodes.html#GUID-25D8D7A2-5240-401F-A998-00C4B525413F">添加群集节点的先决条件步骤</a></li>
                           <li><a href="../racad/adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#RACAD-GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cwadd&amp;id=NTMTS-GUID-DB70DB58-370C-4B98-A559-C5CA94415085" target="_blank"><span><cite>适用于Microsoft Windows的Microsoft Transaction Server开发人员指南的Oracle服务</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-2FC91C59-35C2-4714-AAD2-9F35E3A4BB4D__GUID-4A09E0EC-345C-4805-8CB6-DC0C66BC2688">
                        <p class="notep1">也可以看看：</p>
                        <p><span><cite>适用于Microsoft Windows的Microsoft Transaction Server开发人员指南的Oracle服务，</cite></span>以获取有关OraMTS的更多信息，OraMTS允许Oracle数据库用作分布式事务中的资源管理器</p>
                     </div>
                  </div>
               </div><a id="CWADD90997"></a><div class="props_rev_3"><a id="GUID-DDED83A3-F1BB-43EB-AFA4-FDAF51E84EAF" name="GUID-DDED83A3-F1BB-43EB-AFA4-FDAF51E84EAF"></a><h4 id="CWADD-GUID-DDED83A3-F1BB-43EB-AFA4-FDAF51E84EAF" class="sect4">在Windows系统上删除群集节点</h4>
                  <div>
                     <p>从Windows系统中删除群集节点。</p>
                     <div class="section">
                        <p>此过程假定Oracle Clusterware安装在<code class="codeph">node1</code> ， <code class="codeph">node2</code>和<code class="codeph">node3</code> ，并且您要从群集中删除<code class="codeph">node3</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-DDED83A3-F1BB-43EB-AFA4-FDAF51E84EAF__GUID-2AC16357-57F0-4304-97AE-19969F2FE23A">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Oracle不支持使用Oracle Enterprise Manager删除Windows系统上的节点。</p>
                              </li>
                              <li>
                                 <p>如果删除GNS服务的群集的最后一个节点，则必须从GNS中删除该群集的条目。</p>
                              </li>
                              <li>
                                 <p>在从群集中删除节点之前，可以从节点中删除Oracle RAC数据库实例，但不需要执行此步骤。如果不删除实例，则仍配置实例但从不运行。从群集中删除节点不会从群集中删除节点的配置信息。剩余配置信息不会干扰群集的操作。</p>
                                 <p><span class="bold">另请参阅：“</span> <span><cite>Oracle Real Application Clusters管理和部署指南”</cite></span> ，以获取有关删除Oracle RAC数据库实例的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <p>要删除Windows系统上的群集节点：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>只有在要删除的节点上有本地主目录时，才使用<code class="codeph">-local</code>选项运行以下命令以更新节点列表：</span><div><pre class="pre codeblock"><code>C：\&gt; <span class="variable" translate="no">Grid_home</span> \ oui \ bin \ setup.exe -updateNodeList ORACLE_HOME = <span class="variable" translate="no">Grid_home</span> “CLUSTER_NODES = { <span class="variable" translate="no">node_to_be_deleted</span> }”CRS = TRUE -local</code></pre><div class="infoboxnote" id="GUID-DDED83A3-F1BB-43EB-AFA4-FDAF51E84EAF__GUID-D2ACF6C2-92AA-40FB-9600-235FA7F29234">
                                 <p class="notep1">注意：</p>
                                 <p>如果要从Oracle Flex群集中删除非Hub节点，则表示您没有运行此命令。</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在要删除的节点上运行deinstall工具以卸载和取消配置Oracle Clusterware主目录，如下所示：</span><div><pre class="pre codeblock"><code>C：\ <span class="variable" translate="no">Grid_home</span> \ deinstall \&gt; deinstall.bat -local</code></pre><div class="infoboxnote" id="GUID-DDED83A3-F1BB-43EB-AFA4-FDAF51E84EAF__GUID-F26A6633-8B8A-4480-AFC2-14551A3A2356">
                                 <p class="notep1">警告：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果未指定<code class="codeph">-local</code>标志，那么该命令将从群集中的每个节点中删除Oracle Grid Infrastructure主目录。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果剪切并粘贴上述命令，则将其粘贴到文本编辑器中，然后将其粘贴到命令行以删除此文档可能包含的任何格式。</p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在未删除的节点上，运行以下命令：</span><div><pre class="pre codeblock"><code>C：\&gt; <span class="variable" translate="no">Grid_home</span> \ bin \ crsctl删除节点-n <span class="variable" translate="no">node_to_be_deleted</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行以下CVU命令以验证是否已从群集中成功删除指定的节点：</span><div><pre class="pre codeblock"><code>C：\&gt; cluvfy stage -post nodedel -n <span class="variable" translate="no">node_list</span> [-verbose]</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>如果删除Oracle Clusterware关闭的群集节点，请确定已删除节点的VIP是否仍然存在，如下所示：</span><div><pre class="pre codeblock"><code>C：\&gt; <span class="variable" translate="no">ORACLE_HOME</span> / bin / srvctl config vip -node <span class="variable" translate="no">deleted_node_name</span></code></pre><p>如果VIP仍然存在，则删除它，如下所示：</p><pre class="pre codeblock"><code>C：\&gt; <span class="variable" translate="no">ORACLE_HOME</span> / bin / srvctl srvctl stop vip -node <span class="variable" translate="no">deleted_node_name</span> C：\&gt; <span class="variable" translate="no">ORACLE_HOME</span> / bin / srvctl srvctl remove vip -node <span class="variable" translate="no">deleted_node_name</span></code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../racad/adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#RACAD-GUID-7CCBB478-056F-4701-864F-2B18D5748E61" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                           <li><a href="cluster-verification-utility-reference.html#GUID-73A94814-62E0-425C-ABA6-DE1D6DF45747" title="验证是否已从群集中成功删除特定节点。通常，此命令将验证是否已删除特定于节点的接口配置详细信息，节点不再是群集配置的一部分，并且已执行正确的Oracle ASM清理。">cluvfy stage -post nodedel</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
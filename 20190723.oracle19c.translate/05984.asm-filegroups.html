<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle ASM provides database-oriented storage management with flex and extended disk groups."></meta>
      <meta name="description" content="Oracle ASM provides database-oriented storage management with flex and extended disk groups."></meta>
      <title>管理Oracle ASM Flex磁盘组</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="Oracle ASM provides database-oriented storage management with flex and extended disk groups."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96198-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="maintain-diskgroups.html" title="Previous" type="text/html"></link>
      <link rel="next" href="asm-files-directories-templates.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OSTMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="maintain-diskgroups.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="asm-files-directories-templates.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-instance-diskgroup.html" property="item" typeof="WebPage"><span property="name">Oracle ASM实例和磁盘组</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="admin-asm-diskgroups.html" property="item" typeof="WebPage"><span property="name">管理Oracle ASM磁盘组</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理Oracle ASM Flex磁盘组</li>
            </ol>
            <a id="GUID-1A056184-65E1-449C-B36A-83AF259A2309" name="GUID-1A056184-65E1-449C-B36A-83AF259A2309"></a>
            
            <h2 id="OSTMG-GUID-1A056184-65E1-449C-B36A-83AF259A2309" class="sect2">管理Oracle ASM Flex磁盘组</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle ASM提供面向数据库的存储管理，包括flex和扩展磁盘组。</p>
               <p>Oracle ASM Flex磁盘组是支持Oracle ASM文件组的磁盘组类型。Oracle ASM文件组描述属于数据库的一组文件，并允许在文件组或数据库级别执行存储管理。Oracle ASM扩展磁盘组具有Flex磁盘组的所有功能，并且具有在扩展（或伸展）群集环境中高度可用的特定设计。</p>
               <p></p>
               <p></p>
               <p>本节讨论以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="asm-filegroups.html#GUID-096D903B-6646-4927-9AA6-BC6A07AD2310" title="Oracle ASM Flex磁盘组是支持Oracle ASM文件组和配额组的磁盘组类型。">关于Oracle ASM Flex磁盘组</a></p>
                  </li>
                  <li>
                     <p><a href="asm-filegroups.html#GUID-B2AC119F-BFFE-4288-A721-E8B97D574632" title="Oracle ASM文件组是一组共享同一组属性和特征的文件。">关于Oracle ASM文件组</a></p>
                  </li>
                  <li>
                     <p><a href="asm-filegroups.html#GUID-BE9083C8-A5DF-48CD-BB32-C8A6FCDA3E7B">关于Oracle ASM文件组属性</a></p>
                  </li>
                  <li>
                     <p><a href="asm-filegroups.html#GUID-A4AA7D67-082F-402D-8164-53193B405211">关于Oracle ASM文件组的配额组</a></p>
                  </li>
                  <li>
                     <p><a href="asm-filegroups.html#GUID-5A0CD2C9-3BE4-45FB-B5B6-5CD58D7F89EA" title="Oracle ASM扩展磁盘组具有Flex磁盘组的所有功能，其特定设计在扩展（拉伸）群集环境中具有高可用性，该环境包含跨多个物理上分离的站点的节点。">关于Oracle ASM扩展磁盘组</a></p>
                  </li>
                  <li>
                     <p><a href="asm-filegroups.html#GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2">关于使用Oracle ASM Flex磁盘组进行时间点数据库克隆</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-096D903B-6646-4927-9AA6-BC6A07AD2310" name="GUID-096D903B-6646-4927-9AA6-BC6A07AD2310"></a><h3 id="OSTMG-GUID-096D903B-6646-4927-9AA6-BC6A07AD2310" class="sect3">关于Oracle ASM Flex磁盘组</h3>
               <div>
                  <p>Oracle ASM Flex磁盘组是支持Oracle ASM文件组和配额组的磁盘组类型。</p>
                  <p>通常，除磁盘组级别外，灵活磁盘组还允许用户以数据库的粒度管理存储。</p>
                  <p>以下是Flex磁盘组的特征：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Flex磁盘组中的文件冗余非常灵活，可以在数据库级别进行存储管理。</p>
                     </li>
                     <li>
                        <p>Flex磁盘组的文件组用于描述数据库文件。</p>
                        <p>每个数据库都有自己的文件组，除磁盘组级别外，还可以在文件组级别完成存储管理。例如，您可以为不同的文件组指定不同的冗余和重新平衡设置。文件组与配额组关联，从而实现轻松的配额管理。</p>
                     </li>
                     <li>
                        <p>Flex磁盘组的冗余设置设置为<code class="codeph">FLEX</code> <code class="codeph">REDUNDANCY</code>并且Flex磁盘组的每个文件组都有自己的冗余属性设置。
                        </p>
                     </li>
                     <li>
                        <p>Flex磁盘组通常可以容忍两个故障，与<code class="codeph">HIGH</code>冗余磁盘组相同。
                        </p>
                        <p>但是，如果磁盘组的故障组少于五个，则它只能容忍一个故障。此限制是磁盘组的仲裁要求的结果。</p>
                     </li>
                     <li>
                        <p>数据库容忍的故障取决于Flex磁盘组中其关联文件组的冗余设置。</p>
                     </li>
                     <li>
                        <p>Flex磁盘组至少需要三个故障组。</p>
                     </li>
                     <li>
                        <p>如果具有<code class="codeph">FLEX</code> <code class="codeph">REDUNDANCY</code>的磁盘组只有两个常规故障组和一个仲裁故障组，则即使为Flex磁盘组中的数据库文件选择了<code class="codeph">HIGH</code> <code class="codeph">REDUNDANCY</code> ，也只会存储两个数据副本。此行为是仅有两个常规故障组的结果。但是，如果稍后添加其他常规故障组，则会自动创建第三个数据副本。添加常规故障组后，如果一个故障组丢失并且重新平衡成功完成，则在第二个故障组脱机后，磁盘组可以保持挂载状态。
                        </p>
                     </li>
                     <li>
                        <p>可以使用<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> SQL语句的<code class="codeph">CONVERT</code> <code class="codeph">REDUNDANCY</code> <code class="codeph">TO</code> <code class="codeph">FLEX</code>子句对<code class="codeph">NORMAL</code>或<code class="codeph">HIGH</code>冗余磁盘组执行迁移（转换）到Flex磁盘组。您无法将<code class="codeph">EXTERNAL</code>冗余磁盘组迁移到<code class="codeph">FLEX</code>冗余磁盘组。
                        </p>
                        <div class="infoboxnote" id="GUID-096D903B-6646-4927-9AA6-BC6A07AD2310__GUID-BB6B9DC8-E822-40BE-81C2-7AE163D8ECAC">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>迁移到Flex磁盘组时，磁盘组必须至少具有三个故障组。</p>
                              </li>
                              <li>
                                 <p>必须启用虚拟分配元数据（VAM）迁移磁盘组属性，并且在迁移之前完成迁移，而不使用限制性安装。</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>Flex磁盘组可以创建时间点数据库克隆。</p>
                        <p>时间点数据库克隆是特定数据库的完整副本，而不是底层存储系统。仅复制数据文件。创建其他文件，或根据需要引用其他文件以创建克隆。有关Flex磁盘组和时间点数据库克隆的信息，请参阅<a href="asm-filegroups.html#GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2">关于使用Oracle ASM Flex磁盘组的时间点数据库克隆</a> 。
                        </p>
                     </li>
                     <li>
                        <p>分配单元（AU）的默认大小为4 M.</p>
                     </li>
                     <li>
                        <p>虚拟磁盘组启用并需要虚拟分配的元数据（VAM）。</p>
                     </li>
                     <li>
                        <p>Flex磁盘组要求<code class="codeph">COMPATIBLE.ASM</code>和<code class="codeph">COMPATIBLE.RDBMS</code>磁盘组属性设置为<code class="codeph">12.2</code>或更高。
                        </p>
                     </li>
                     <li>
                        <p>要在Flex磁盘组上创建Oracle ADVM卷， <code class="codeph">COMPATIBLE.ADVM</code>磁盘组属性必须设置为<code class="codeph">12.2</code>或更高。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-096D903B-6646-4927-9AA6-BC6A07AD2310__GUID-691BBFFB-D793-4B2F-82DD-DFDE98DD23B5">
                     <p class="notep1">注意：</p>
                     <p><code class="codeph">V$ASM_DISKGROUP</code>视图中的<code class="codeph">REQUIRED_MIRROR_FREE_MB</code>和<code class="codeph">USABLE_FILE_MB</code>列报告没有Flex磁盘组的值。
                     </p>
                  </div>
                  <p>以下示例说明如何使用SQL语句：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>创建Flex磁盘组</p>
                     </li>
                     <li>
                        <p>将普通磁盘组迁移到Flex磁盘组</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-096D903B-6646-4927-9AA6-BC6A07AD2310__GUID-BBEBE7C2-B1F1-47DB-96B4-AB033F4F6267">
                     <p class="titleinexample">示例4-13使用CREATE DISKGROUP创建Flex磁盘组</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE DISKGROUP flex_data FLEX REDUNDANCY DISK my_disk_discovery_path;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-096D903B-6646-4927-9AA6-BC6A07AD2310__GUID-79351911-2267-4326-A51F-D0271FF227EA">
                     <p class="titleinexample">示例4-14使用ALTER DISKGROUP将普通磁盘组迁移到Flex磁盘组</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE DISKGROUP normaltoflex NORMAL REDUNDANCY DISK'/ devices / diskm *'ATTRIBUTE'au_size'='4M'，'compatible.asm'= '19 .0'，'compatible.rdbms'= '19 .0'，'compatible.advm'= '19 0.0' ;已创建磁盘组。SQL&gt; ALTER DISKGROUP normaltoflex CONVERT REDUNDANCY TO FLEX; Diskgroup改变了。SQL&gt; SELECT name，type FROM V $ ASM_DISKGROUP WHERE name ='NORMALTOFLEX'; NAME TYPE ------------------------------ ------ NORMALTOFLEX FLEX</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-B2AC119F-BFFE-4288-A721-E8B97D574632" name="GUID-B2AC119F-BFFE-4288-A721-E8B97D574632"></a><h3 id="OSTMG-GUID-B2AC119F-BFFE-4288-A721-E8B97D574632" class="sect3">关于Oracle ASM文件组</h3>
               <div>
                  <p>Oracle ASM文件组是一组共享同一组属性和特征的文件。</p>
                  <p>文件组的一个主要好处是能够为共享同一磁盘组的每个数据库使用不同的可用性规范。</p>
                  <p>Oracle ASM文件组的属性集包括冗余，重新平衡重建优先级，重新平衡功率限制，客户端兼容性，条带化，配额组和访问控制列表。</p>
                  <p>以下列表提供了有关文件组的重要说明。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>磁盘组至少包含一个文件组，即默认文件组。</p>
                     </li>
                     <li>
                        <p>磁盘组可以包含多个文件组。</p>
                     </li>
                     <li>
                        <p>磁盘组必须具有<code class="codeph">FLEX</code>或<code class="codeph">EXTENDED</code>冗余才能包含文件组。
                        </p>
                     </li>
                     <li>
                        <p>磁盘组可以存储属于多个数据库的文件，每个数据库都有一个单独的文件组。</p>
                     </li>
                     <li>
                        <p>数据库在磁盘组中只能有一个文件组。</p>
                     </li>
                     <li>
                        <p>数据库可以跨多个磁盘组，其中多个文件组位于不同的磁盘组中。属于多个磁盘组中的数据库的文件组应该具有相同的名称，以便一致性和易于识别。</p>
                     </li>
                     <li>
                        <p>文件组只能属于一个磁盘组。</p>
                     </li>
                     <li>
                        <p>文件组只能描述一个数据库，PDB，CDB，卷或集群。</p>
                     </li>
                     <li>
                        <p>Flex磁盘组中的Oracle ADVM卷的文件组始终具有关联卷的名称。文件组中只能有一个卷。</p>
                     </li>
                     <li>
                        <p>文件组只能属于一个配额组。</p>
                     </li>
                     <li>
                        <p>自动创建的文件组与通用配额组关联。</p>
                     </li>
                     <li>
                        <p>创建数据库，PDB或CDB时，如果现有文件组的客户端ID或名称与数据库，PDB或CDB的ID或名称匹配，则该文件组用于描述其文件。否则，将为数据库，PDB或CDB创建新的文件组。</p>
                     </li>
                     <li>
                        <p>由于create database操作而自动创建的文件组被标识为系统创建的。删除数据库时，将删除此系统创建的文件组。但是，如果手动创建文件组，则在删除相关数据库时不会自动删除该文件组。您必须显式删除手动创建的文件组。</p>
                     </li>
                  </ul>
                  <p>下图说明了在多租户环境中使用Oracle ASM文件组和配额组。在该图示中，PDB3可以是PDB2的克隆。不同磁盘组中的文件组和配额组可以具有相同的名称。</p>
                  <div class="figure" id="GUID-B2AC119F-BFFE-4288-A721-E8B97D574632__ORACLEASMFILEGROUPS-B4F91F55">
                     <p class="titleinfigure">图4-1 Oracle ASM文件组</p><img src="img/ostmg_3v_013a.png" alt="下面是图4-1的描述" title="下面是图4-1的描述" longdesc="img_text/ostmg_3v_013a.html"><br><a href="img_text/ostmg_3v_013a.html">“图4-1 Oracle ASM文件组”的说明</a></div>
                  <!-- class="figure" -->
                  <p>在图中，磁盘组1和磁盘组2中名为PDB1的文件组专用于可插拔数据库PDB1，磁盘组1中指定为PDB2的文件组和磁盘组2专用于可插拔数据库PDB2，磁盘组中名为PDB3的文件组1和磁盘组2专用于可插拔数据库PDB3。</p>
                  <p>磁盘组1中的文件组PDB1属于磁盘组1中的配额组QGRP1。磁盘组2中的文件组PDB1属于磁盘组2中的配额组QGRP1。磁盘组1中的文件组PDB2和PDB3属于磁盘组1中的配额组QGRP2。磁盘组2中的文件组PDB2和PDB3属于磁盘组2中的配额组QGRP2。</p>
                  <p>您可以使用SQL语句管理文件组。例如，您可以使用<code class="codeph">ALTER DISKGROUP</code> SQL语句的<code class="codeph">FILEGROUP</code>子句来管理文件组。<a href="asm-filegroups.html#GUID-B2AC119F-BFFE-4288-A721-E8B97D574632__GUID-F35EAC45-C386-4963-8BCB-ECBF3700D8B0">示例4-15</a>说明了如何使用SQL语句为可插拔数据库添加文件组。SQL语句还将新添加的文件组与现有配额组相关联。<a href="asm-filegroups.html#GUID-B2AC119F-BFFE-4288-A721-E8B97D574632__ALTERDISKGROUPDATA1MODIFYFILEGROUPF-A0EEC5B2">例4-16</a>说明了如何修改文件组中特定文件类型的<code class="codeph">redundancy</code>属性。
                  </p>
                  <div class="example" id="GUID-B2AC119F-BFFE-4288-A721-E8B97D574632__GUID-F35EAC45-C386-4963-8BCB-ECBF3700D8B0">
                     <p class="titleinexample">示例4-15将文件组添加到数据库</p><pre class="pre codeblock"><code>ALTER DISKGROUP DiskGroup_1 ADD FILEGROUP FileGroup_PDB1 DATABASE PDB1 SET'quota_group'='QuotaGroup_QGRP1'; ALTER DISKGROUP DiskGroup_1 ADD FILEGROUP FileGroup_PDB2 DATABASE PDB2 SET'quota_group'='QuotaGroup_QGRP2';</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B2AC119F-BFFE-4288-A721-E8B97D574632__ALTERDISKGROUPDATA1MODIFYFILEGROUPF-A0EEC5B2">
                     <p class="titleinexample">示例4-16修改文件组</p><pre class="pre codeblock"><code>ALTER DISKGROUP DiskGroup_1 MODIFY FILEGROUP FileGroup_PDB1 SET'datafile.redundancy'='HIGH';</code></pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>ASMCMD提供以下命令来管理和跟踪文件和配额组。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">chfg</code>和<code class="codeph">chqg</code>修改文件组或配额组</p>
                        </li>
                        <li>
                           <p><code class="codeph">lsfg</code>和<code class="codeph">lsqg</code>列出文件组或配额组</p>
                        </li>
                        <li>
                           <p><code class="codeph">mkfg</code>和<code class="codeph">mkqg</code>用于创建文件组或配额组</p>
                        </li>
                        <li>
                           <p><code class="codeph">rmfg</code>和<code class="codeph">rmqg</code>删除文件组或配额组</p>
                        </li>
                        <li>
                           <p><code class="codeph">mvfg</code>移动文件组</p>
                        </li>
                     </ul>
                     <p>您可以使用带有<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code>的<code class="codeph">CASCADE</code>关键字删除包含其关联文件的文件组（包括内容）。<code class="codeph">DROP</code> <code class="codeph">FILEGROUP</code> SQL语句或带有ASMCMD <code class="codeph">rmfg</code>命令的<code class="codeph">—r</code>选项。
                     </p>
                     <p>要监视Oracle ASM文件组，可以检查<code class="codeph">V$ASM_FILEGROUP</code> ， <code class="codeph">V$ASM_FILEGROUP_PROPERTY</code>和<code class="codeph">V$ASM_FILEGROUP_FILE</code>视图。您还可以使用ASMCMD <code class="codeph">lsfg</code>命令显示有关Oracle ASM文件组的信息。
                     </p>
                     <div class="infoboxnotealso" id="GUID-B2AC119F-BFFE-4288-A721-E8B97D574632__ORACLEDATABASEREFERENCEFORINFORMATI-02AF190A">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关配额组的信息，请参阅有关<a href="asm-filegroups.html#GUID-A4AA7D67-082F-402D-8164-53193B405211">Oracle ASM文件组</a>的配额组。
                              </p>
                           </li>
                           <li>
                              <p><a href="asmcmd-filegroup-commands.html#GUID-A70318CD-A096-43E7-9CCD-F3A3621C81AC" title="本主题提供ASMCMD命令的摘要，使您可以管理Oracle ASM文件组和配额组。">ASMCMD文件组管理命令，</a>以获取有关管理Oracle ASM文件组的ASMCMD命令的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">V$ASM*</code>动态性能视图的信息，请<a href="../refrn/dynamic-performance-views.html#REFRN003" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-BE9083C8-A5DF-48CD-BB32-C8A6FCDA3E7B" name="GUID-BE9083C8-A5DF-48CD-BB32-C8A6FCDA3E7B"></a><h3 id="OSTMG-GUID-BE9083C8-A5DF-48CD-BB32-C8A6FCDA3E7B" class="sect3">关于Oracle ASM文件组属性</h3>
               <div>
                  <p>以下列表总结了文件组的属性。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">COMPATIBLE.CLIENT</code></p>
                        <p>此文件组属性的当前值是文件打开操作期间的最后一个已知客户端兼容性。</p>
                        <p>必须将<code class="codeph">COMPATIBLE.RDBMS</code>磁盘组属性设置为小于或等于：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>每个文件组的<code class="codeph">COMPATIBLE.CLIENT</code> （设置时）</p>
                           </li>
                           <li>
                              <p><code class="codeph">COMPATIBLE</code>数据库初始化参数（对于连接到Oracle ASM的每个数据库）</p>
                           </li>
                           <li>
                              <p>磁盘组的<code class="codeph">COMPATIBLE.ASM</code></p>
                           </li>
                        </ul>
                        <p>您必须是Oracle ASM管理员才能修改此属性。</p>
                     </li>
                     <li>
                        <p><code class="codeph">DBCLONE_STATUS</code></p>
                        <p>此文件组属性指定数据库拆分操作的状态。无法手动设置此属性。</p>
                        <p>在与此文件组关联的数据库的拆分操作期间，文件组属性包含以下值之一。</p>
                        <ul id="GUID-BE9083C8-A5DF-48CD-BB32-C8A6FCDA3E7B__UL_MMZ_FMC_4GB" style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">制备</code></p>
                              <p>准备数据库以进行拆分的过程已经开始，但数据库尚未准备好进行拆分。</p>
                           </li>
                           <li>
                              <p><code class="codeph">备</code></p>
                              <p>准备过程已完成，数据库已准备好拆分。</p>
                           </li>
                           <li>
                              <p><code class="codeph">分裂</code></p>
                              <p>已经开始拆分数据库文件的过程。</p>
                           </li>
                           <li>
                              <p><code class="codeph">分裂完成</code></p>
                              <p>数据库已被拆分。</p>
                           </li>
                           <li>
                              <p><code class="codeph">DROPPING</code></p>
                              <p>删除准备好的数据库克隆的过程已经开始。</p>
                           </li>
                           <li>
                              <p><code class="codeph">失败</code></p>
                              <p>克隆操作失败。重新平衡操作应该删除不完整的克隆。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">所有者</code></p>
                        <p>此文件组属性指定<code class="codeph">OWNER</code>设置。要设置<code class="codeph">OWNER</code>属性，必须将<code class="codeph">ACCESS_CONTROL.ENABLED</code>磁盘组属性设置为<code class="codeph">TRUE</code>以启用Oracle ASM文件访问控制。指定为所有者的用户必须是磁盘组的成员。
                        </p>
                        <p>只有Oracle ASM管理员的<code class="codeph">OWNER</code> ，该<code class="codeph">OWNER</code>的的<code class="codeph">USER_GROUP</code>与文件组关联，以及成员<code class="codeph">USER_GROUP</code>与文件组关联可以修改标记有文件组的属性<code class="codeph">A database administrator can modify this property</code> 。仅当<code class="codeph">ACCESS_CONTROL.ENABLED</code>为true时才会出现<code class="codeph">ACCESS_CONTROL.ENABLED</code>情况。
                        </p>
                        <p>您可以使用<code class="codeph">V$ASM_FILEGROUP</code>视图的<code class="codeph">USER_NUMBER</code>和<code class="codeph">USER_INCARNATION</code>列显示所有者。<code class="codeph">USER_NUMBER</code>和<code class="codeph">USER_INCARNATION</code>的值可以与<code class="codeph">V$ASM_USER</code>视图的<code class="codeph">USER_NUMBER</code>和<code class="codeph">INCARNATION</code>列连接，以显示用户名。
                        </p>
                        <p>默认值为<code class="codeph">NULL</code> 。</p>
                        <p>您必须是Oracle ASM管理员才能修改此属性。</p>
                     </li>
                     <li>
                        <p><code class="codeph">PARENT_FILEGROUP_NUMBER</code></p>
                        <p>此文件组属性指定父文件组编号。无法手动设置此属性。</p>
                        <p>准备拆分数据库时，将为影子文件创建子文件组。子文件组自动设置<code class="codeph">PARENT_FILEGROUP_NUMBER</code>属性。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">POWER_LIMIT</code></p>
                        <p>此文件组属性指定重新平衡功率，该功能确定此文件组的磁盘重新平衡的并行重定位数。有效设置为<code class="codeph">1</code>到<code class="codeph">1024</code> 。重新平衡文件组时，将按如下方式应用功率限制值：</p>
                        <ol>
                           <li>
                              <p>如果已在<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">REBALANCE</code> SQL语句或ASMCMD <code class="codeph">rebal</code>命令中明确指定了power选项，则<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code>语句或ASMCMD <code class="codeph">rebal</code>命令中指定的功率值将用于重新平衡所有文件组。
                              </p>
                           </li>
                           <li>
                              <p>如果未在SQL重新平衡语句或ASMCMD重新平衡命令中指定电源选项，则文件组<code class="codeph">POWER_LIMIT</code>属性值（如果已设置）适用于文件组重新平衡。
                              </p>
                           </li>
                           <li>
                              <p>如果未在SQL重新平衡语句或ASMCMD重新平衡命令中指定电源选项，并且尚未为文件组设置<code class="codeph">POWER_LIMIT</code>属性，则电源值默认为文件组重新平衡的<code class="codeph">ASM_POWER_LIMIT</code>初始化参数的值。
                              </p>
                           </li>
                        </ol>
                        <p>您必须是数据库管理员才能修改此属性。</p>
                     </li>
                     <li>
                        <p><code class="codeph">优先</code></p>
                        <p>此文件组属性指定重新平衡优先级，并确保在其他文件之前重新平衡某些类型的文件。优先级最高的文件组首先完全重新平衡，然后是具有次高优先级的文件组，依此类推到最低优先级。</p>
                        <p>您可以将重新平衡优先级设置为<code class="codeph">HIGHEST</code> ， <code class="codeph">HIGH</code> ， <code class="codeph">MEDIUM</code> ， <code class="codeph">LOW</code>或<code class="codeph">LOWEST</code> 。默认值为<code class="codeph">MEDIUM</code> 。</p>
                        <p>您必须是数据库管理员才能修改此属性。</p>
                     </li>
                     <li>
                        <p><code class="codeph">QUOTA_GROUP</code></p>
                        <p>此文件组属性指定此文件组所属的配额组的名称。有效设置是现有配额组名称。默认值为<code class="codeph">GENERIC</code> 。磁盘组中的每个文件组都必须是配额组的成员。
                        </p>
                        <p>您必须是Oracle ASM管理员才能修改此属性。</p>
                     </li>
                     <li>
                        <p><code class="codeph">冗余</code></p>
                        <p>此文件类型属性指定文件组的冗余。每种文件类型的默认冗余设置都是从系统模板派生的。有效设置为<code class="codeph">HIGH</code> ， <code class="codeph">MIRROR</code> ， <code class="codeph">PARITY</code>和<code class="codeph">UNPROTECTED</code> 。</p>
                        <p>为减少与Oracle ASM相关的数据保护开销，为Flex磁盘组提供单奇偶校验保护。奇偶校验冗余仅限于不需要持续更新的数据，以减少对奇偶校验保护的执行影响。<code class="codeph">PARITY</code>设置适用于一次写入文件，例如存档日志和备份集，并且不支持数据文件和读/写文件。<code class="codeph">PARITY</code>在Flex磁盘组中至少需要三个常规（非仲裁）故障组。如果在创建奇偶校验文件时有三个或四个故障组，则每个奇偶校验范围集都有两个数据范围。对于双向镜像文件，这种情况会产生50％的冗余开销，而不是100％的冗余开销。如果在创建奇偶校验文件时存在五个或更多故障组，则每个奇偶校验范围集具有四个数据范围。这种情况导致25％的冗余开销。
                        </p>
                        <p>创建文件后，可以更改文件的冗余。如果冗余已更改，则<code class="codeph">V$ASM_FILE</code>的<code class="codeph">REMIRROR</code>列包含<code class="codeph">Y</code>以指示文件需要新镜像，启动重新平衡以使新冗余生效。重新平衡完成后， <code class="codeph">REMIRROR</code>列中的值包含<code class="codeph">N</code>
                        </p>
                        <p>将文件组冗余属性从<code class="codeph">HIGH</code> ， <code class="codeph">MIRROR</code>或<code class="codeph">UNPROTECTED</code>设置修改为<code class="codeph">PARITY</code>设置时，文件组中现有文件的冗余不会更改。此行为也适用于从<code class="codeph">PARITY</code>更改为<code class="codeph">HIGH</code> ， <code class="codeph">MIRROR</code>或<code class="codeph">UNPROTECTED</code>设置。但是，将来创建的任何文件都采用新的冗余设置。
                        </p>
                        <p>如果文件组中的冗余增加，则重新平衡完成后， <code class="codeph">V$ASM_FILE</code>的<code class="codeph">REDUNDANCY</code>列的值将增加。但是，如果文件组中的冗余减少，则在重新平衡运行之前， <code class="codeph">V$ASM_FILE</code>的<code class="codeph">REDUNDANCY</code>列的值会立即降低。
                        </p>
                        <p>更改文件类型粒度或整个文件组的冗余会影响所有文件类型。</p>
                        <p>您必须是数据库管理员才能修改此属性。</p>
                     </li>
                     <li>
                        <p><code class="codeph">STRIPING</code></p>
                        <p>此文件类型属性指定每种文件类型的<code class="codeph">STRIPING</code>设置。通常，每种文件类型的默认值都是足够的，不会更改。
                        </p>
                        <p>大多数文件都有<code class="codeph">COARSE</code>条带，但默认情况下具有<code class="codeph">FINE</code>条带的控制文件除外。有效设置为<code class="codeph">COARSE</code>和<code class="codeph">FINE</code> 。默认值为<code class="codeph">COARSE</code>或从文件类型模板派生。
                        </p>
                        <p><code class="codeph">STRIPING</code>仅影响新创建的文件，并且在创建文件后无法更改。
                        </p>
                        <p>您必须是数据库管理员才能设置此属性。</p>
                     </li>
                     <li>
                        <p><code class="codeph">USER_GROUP</code></p>
                        <p>此文件组属性指定<code class="codeph">USER_GROUP</code>设置。要设置<code class="codeph">USER_GROUP</code>属性，必须将<code class="codeph">ACCESS_CONTROL.ENABLED</code>磁盘组属性设置为<code class="codeph">TRUE</code>以启用Oracle ASM文件访问控制。指定的用户组必须是现有用户组。
                        </p>
                        <p>只有Oracle ASM管理员的<code class="codeph">OWNER</code> ，该<code class="codeph">OWNER</code>的的<code class="codeph">USER_GROUP</code>与文件组关联，以及成员<code class="codeph">USER_GROUP</code>与文件组关联可以修改标记有文件组的属性<code class="codeph">A database administrator can modify this property</code> 。仅当<code class="codeph">ACCESS_CONTROL.ENABLED</code>为true时才会出现<code class="codeph">ACCESS_CONTROL.ENABLED</code>情况。
                        </p>
                        <p>您可以使用<code class="codeph">V$ASM_FILEGROUP</code>视图的<code class="codeph">USERGROUP_NUMBER</code>和<code class="codeph">USERGROUP_INCARNATION</code>列显示用户组信息。<code class="codeph">USERGROUP_NUMBER</code>和<code class="codeph">USERGROUP_INCARNATION</code>的值可以与<code class="codeph">V$ASM_USERGROUP</code>视图的<code class="codeph">USERGROUP_NUMBER</code>和<code class="codeph">INCARNATION</code>列结合使用，以显示用户组名称。
                        </p>
                        <p>在文件组中创建的文件将继承<code class="codeph">USER_GROUP</code>属性设置。
                        </p>
                        <p>克隆继承<code class="codeph">USER_GROUP</code>属性设置。
                        </p>
                        <p>默认值为<code class="codeph">NULL</code> 。</p>
                        <p>您必须是Oracle ASM管理员才能修改此属性。</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-BE9083C8-A5DF-48CD-BB32-C8A6FCDA3E7B__GUID-5F9AFFF2-0E4F-426D-9363-7FA2884C85A4">
                     <p class="titleinexample">示例4-17为文件类型设置文件组属性</p>
                     <p>以下SQL语句为<code class="codeph">datafile</code>和<code class="codeph">archivelog</code>文件类型设置<code class="codeph">REDUNDANCY</code>文件组属性。
                     </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP DiskGroup_2 MODIFY FILEGROUP FileGroup_PDB1 SET'datafile.redundancy'='HIGH'; ALTER DISKGROUP DiskGroup_2 MODIFY FILEGROUP FileGroup_PDB1 SET'archivelog.redundancy'='MIRROR';</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BE9083C8-A5DF-48CD-BB32-C8A6FCDA3E7B__GUID-735CA2C8-D2DA-441A-95D8-F218A6DCE8ED">
                     <p class="titleinexample">示例4-18设置ADVM卷的文件组冗余属性</p>
                     <p>以下SQL语句设置Oracle ADVM卷的<code class="codeph">REDUNDANCY</code>文件组属性。要使Oracle ADVM卷能够更改冗余， <code class="codeph">COMPATIBLE.ASM</code>和<code class="codeph">COMPATIBLE.ADVM</code>必须设置为<code class="codeph">18.1</code>或更高版本。对于Oracle ADVM卷，您无法更改各个文件类型的冗余设置。
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DISKGROUP数据修改FILEGROUP第1卷SET'redundancy'='high';</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-BE9083C8-A5DF-48CD-BB32-C8A6FCDA3E7B__GUID-21A4C6DA-C7B3-46BD-B4BF-D9804A80417A">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="asm-files-directories-templates.html#GUID-9D43CE5E-AB31-47EB-BE30-813764BB40F5" title="Oracle ASM支持数据库所需的大多数文件类型。">Oracle ASM支持哪些类型的文件？</a> 获取Oracle ASM文件类型的列表</p>
                           </li>
                           <li>
                              <p>有关Oracle ASM文件访问控制的信息<a href="asm-access-control-diskgroups.html#GUID-89BB888A-BA1C-4095-BB6D-C3BE142CB371" title="Oracle ASM文件访问控制为Oracle ASM磁盘组的内容提供可选保护，防止未经授权的Oracle ASM客户端（例如未经授权的数据库）意外访问。">，请管理磁盘组</a>的Oracle ASM文件访问控制</p>
                           </li>
                           <li>
                              <p><span><cite>Oracle数据库参考，</cite></span>以获取有关<a href="../refrn/V-ASM_FILEGROUP_PROPERTY.html#REFRN-GUID-DA2152BF-2582-4E96-A2B6-5EB262113EEE" target="_blank">V $ ASM_FILEGROUP_PROPERTY</a>和<a href="../refrn/V-ASM_FILEGROUP.html#REFRN-GUID-FCC3152C-7416-4322-A0F8-BB6A3AB2987E" target="_blank">V $ ASM_FILEGROUP</a>动态性能视图中显示的文件组属性的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-A4AA7D67-082F-402D-8164-53193B405211" name="GUID-A4AA7D67-082F-402D-8164-53193B405211"></a><h3 id="OSTMG-GUID-A4AA7D67-082F-402D-8164-53193B405211" class="sect3">关于Oracle ASM文件组的配额组</h3>
               <div>
                  <p>配额组定义分配给一组Oracle ASM文件组的配额。文件组只属于一个配额组。有关文件组的信息，请参阅<a href="asm-filegroups.html#GUID-B2AC119F-BFFE-4288-A721-E8B97D574632" title="Oracle ASM文件组是一组共享同一组属性和特征的文件。">关于Oracle ASM文件组</a> 。
                  </p>
                  <p>配额可以描述不同数据库使用的空间总和。</p>
                  <p>以下列表提供了有关文件组的配额组的重要说明。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>文件组只能属于一个配额组。</p>
                     </li>
                     <li>
                        <p>配额组不能跨越多个磁盘组。</p>
                     </li>
                     <li>
                        <p>配额组描述一个文件组或同一磁盘组中的多个文件组使用的空间聚合。</p>
                        <p>PDB的文件组和该PDB的克隆的文件组可以是文件组将共享公共配额组的方案。</p>
                        <p>默认情况下，文件组克隆会继承父级的配额组。但是，克隆可能属于不同的配额组。</p>
                     </li>
                     <li>
                        <p>创建文件并调整其大小时，将强制执行配额。</p>
                     </li>
                     <li>
                        <p>配额是物理空间。</p>
                        <p>因此，如果配额限制已设置为10 M，则双向镜像6 M文件超出配额。</p>
                     </li>
                     <li>
                        <p>每个配额组都有两个值：限制和当前使用的空间。</p>
                        <p>可以将限制值设置为低于当前使用的空间。此操作可防止为与此配额组关联的文件组描述的文件分配任何其他空间。</p>
                     </li>
                     <li>
                        <p>无论目标配额组是否有足够的空间用于文件组，都可以将文件组从一个配额组移动到另一个配额组。</p>
                        <p>此功能使Oracle ASM管理员可以停止特定文件组描述的任何文件分配额外空间。</p>
                     </li>
                  </ul>
                  <p>您可以使用SQL和ASMCMD命令管理配额组。以下示例说明如何使用SQL语句将配额组添加到磁盘组，以及如何将文件组从其当前配额组移动到新配额组。</p>
                  <div class="example" id="GUID-A4AA7D67-082F-402D-8164-53193B405211__GUID-F82DDDF3-8C88-4749-B403-76C1B3BE77E2">
                     <p class="titleinexample">示例4-19将配额组添加到磁盘组</p><pre class="pre codeblock"><code>ALTER DISKGROUP DiskGroup_2 ADD QUOTAGROUP QuotaGroup_QGRP3 SET'quota'= 10m;</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-A4AA7D67-082F-402D-8164-53193B405211__ALTERDISKGROUPDATA1MODIFYFILEGROUPF-A0DD55D9">
                     <p class="titleinexample">示例4-20将文件组移动到新的配额组</p><pre class="pre codeblock"><code>ALTER DISKGROUP DiskGroup_2 MODIFY FILEGROUP FileGroup_PDB1 SET'quota_group'='QuotaGroup_QGRP3';</code></pre></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-5A0CD2C9-3BE4-45FB-B5B6-5CD58D7F89EA" name="GUID-5A0CD2C9-3BE4-45FB-B5B6-5CD58D7F89EA"></a><h3 id="OSTMG-GUID-5A0CD2C9-3BE4-45FB-B5B6-5CD58D7F89EA" class="sect3">关于Oracle ASM扩展磁盘组</h3>
               <div>
                  <p>Oracle ASM扩展磁盘组具有Flex磁盘组的所有功能，其特定设计在扩展（拉伸）群集环境中具有高可用性，该环境包含跨多个物理上分离的站点的节点。</p>
                  <p>以下是扩展磁盘组的特征：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>扩展磁盘组的冗余设置设置为<code class="codeph">EXTENDED</code> <code class="codeph">REDUNDANCY</code> ，扩展磁盘组的每个文件组都有自己的冗余属性设置。
                        </p>
                     </li>
                     <li>
                        <p>为每个站点指定扩展磁盘组中的文件和文件组的冗余，而不是为每个磁盘组指定。</p>
                        <p>这意味着由<code class="codeph">REDUNDANCY</code>设置确定的份数乘以数据站点的数量。如果<code class="codeph">REDUNDANCY</code>设置为<code class="codeph">MIRROR</code> ，那么指定两个副本，导致两个数据站点总共四个副本。
                        </p>
                     </li>
                     <li>
                        <p>扩展磁盘组可以容忍整个站点的丢失，以及另一个站点中最多两个故障组的丢失。</p>
                        <p>这意味着除了故障组级别之外，扩展磁盘组还可以容忍站点级别的故障。</p>
                     </li>
                     <li>
                        <p>创建磁盘组期间，所有数据站点必须具有相同数量的故障组。</p>
                     </li>
                     <li>
                        <p>为每个磁盘组指定配额组，而不是为每个站点指定配额组。</p>
                     </li>
                     <li>
                        <p>配额组限制是所有站点中所有副本所需的物理空间。</p>
                        <p>例如，对于两个数据站点，冗余设置为<code class="codeph">MIRROR</code>的6 M文件使用24 M的配额限制。
                        </p>
                     </li>
                     <li>
                        <p>必须总共有三个站点，两个数据站点和一个仲裁站点才能创建扩展磁盘组。每个数据站点应具有三个故障组，仲裁站点应具有一个故障组。</p>
                     </li>
                     <li>
                        <p>对于数据库文件，冗余设置由扩展磁盘组的文件组的冗余设置决定。</p>
                     </li>
                     <li>
                        <p><code class="codeph">COMPATIBLE.ASM</code>和<code class="codeph">COMPATIBLE.RDBMS</code>磁盘组属性必须设置为<code class="codeph">12.2</code>或更高。
                        </p>
                     </li>
                     <li>
                        <p>最小分配单位（AU）大小为4 M.</p>
                     </li>
                     <li>
                        <p>不支持从其他磁盘组类型转换为扩展磁盘组。</p>
                     </li>
                     <li>
                        <p>如果已配置Oracle Exadata，则可以从单元推断出故障组的<code class="codeph">SITE</code>规范。否则，可以在创建磁盘组时使用SQL语句指定站点规范。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-5A0CD2C9-3BE4-45FB-B5B6-5CD58D7F89EA__THEREQUIRED_MIRROR_FREE_MBANDUSABLE-F958AF93">
                     <p class="notep1">注意：</p>
                     <p><code class="codeph">V$ASM_DISKGROUP</code>视图中的<code class="codeph">REQUIRED_MIRROR_FREE_MB</code>和<code class="codeph">USABLE_FILE_MB</code>列报告没有扩展磁盘组的值。
                     </p>
                  </div>
                  <p>以下示例说明如何使用SQL语句创建扩展磁盘组。</p>
                  <div class="example" id="GUID-5A0CD2C9-3BE4-45FB-B5B6-5CD58D7F89EA__USINGCREATEANDALTERDISKGROUPWITHEXT-F9586EEB">
                     <p class="titleinexample">示例4-21将CREATE DISKGROUP与扩展磁盘组一起使用</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE DISKGROUP extended_site_data EXTENDED REDUNDANCY SITE NY FAILGROUP fg1 DISK'/ devices / disks / disk01'FAILGROUP fg2 DISK'/ devices / disks / disk02'FAILGROUP fg3 DISK'/ devices / disks / disk03'SITE NJ FAILGROUP fg4 DISK'/ devices / disks / disk04'FAILGROUP fg5 DISK'/ devices / disks / disk05'FAILGROUP fg6 DISK'/ devices / disks / disk06'SITE QM QUORUM FAILGROUP fg7 DISK'/ devices / disks / disk07';</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2" name="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2"></a><h3 id="OSTMG-GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2" class="sect3">关于使用Oracle ASM Flex磁盘组进行时间点数据库克隆</h3>
               <div>
                  <p>在创建时间点数据库克隆之前，请查看以下要求。</p>
                  <div class="infoboxnote" id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__GUID-14263F6C-C541-42A0-8A8E-402F6BB24976">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>仅在Oracle ASM flex和扩展磁盘组中支持时间点数据库克隆。</p>
                        </li>
                        <li>
                           <p>只有Oracle Database 18c（版本18.1或更高版本）支持时间点数据库克隆。</p>
                        </li>
                        <li>
                           <p>时间点数据库克隆需要磁盘组兼容性属性<code class="codeph">COMPATIBLE.ASM</code>和<code class="codeph">COMPATIBLE.RDBMS</code>设置为<code class="codeph">18.0</code>或更高版本。
                           </p>
                        </li>
                        <li>
                           <p>源数据库（父）必须是可插拔数据库。创建的数据库克隆（子）是同一容器数据库下的可插拔数据库。</p>
                        </li>
                     </ul>
                  </div>
                  <p>Oracle ASM支持创建时间点数据库克隆，该克隆是可插拔数据库的镜像副本。要克隆的数据库的所有数据文件都应存在于单个磁盘组中。克隆操作可用于快速配置相同的副本。您可以在数据库克隆中指定数据库数据文件的冗余设置，或者该设置可以默认为正在克隆的源数据库中的数据文件的冗余。</p>
                  <p>在克隆过程中创建的数据文件副本最初与源相同。但是，在克隆过程完成后，对源的更新不会导致对已克隆的子项进行任何更改。<code class="codeph">V$ASM_DBCLONE_INFO</code>视图显示源数据库，克隆数据库及其文件组之间的关系。应在Oracle ASM实例上运行<code class="codeph">V$ASM_DBCLONE_INFO</code> 。
                  </p>
                  <p>在本主题中显示的示例中，源数据库存在于<code class="codeph">DATA</code> flex磁盘组中。
                  </p>
                  <p>数据库克隆包含以下步骤：</p>
                  <ol>
                     <li>
                        <p>准备镜像副本</p>
                        <p>在此步骤中，Oracle ASM为其他数据副本分配空间。此过程涉及创建克隆文件并将其与源文件链接。但是，此时不会复制数据;在重镜像期间完成复制。在重新平衡的准备阶段进行重镜像，这是作为此步骤的一部分启动的。任何时候都只能存在一个镜像副本。给定数据库或可插拔数据库的所有数据文件都应驻留在单个磁盘组中。必须先使用镜像副本创建数据库克隆，然后才能创建另一个镜像副本。</p>
                        <p>将创建一个文件组，并且所有克隆的文件都将成为此文件组的一部分。文件组中的数据库数据文件的冗余设置为您指定的值，或者默认值为源文件组的冗余设置。与克隆关联的配额组与源数据库的配额组相同。</p>
                        <p>与克隆关联的Oracle ASM文件访问控制属性与与源数据库关联的属性相同。例如，数据库克隆的文件访问控制用户组属性与源数据库的属性相同。</p>
                        <p>在此步骤结束时以及开始下一步之前，您可以删除准备好的镜像副本，如<a href="asm-filegroups.html#GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__DROPPINGTHEPREPAREDMIRRORCOPY-46A22AFF">删除准备</a>好的镜像副本中所述。
                        </p>
                     </li>
                     <li>
                        <p>拆分镜像副本并创建数据库克隆</p>
                        <p>准备和复制步骤必须在开始此步骤之前完成。您可以在Oracle ASM实例上显示<code class="codeph">V$ASM_DBCLONE_INFO</code>视图，以查询正在进行的准备操作的状态。当文件组准备好拆分时， <code class="codeph">V$ASM_DBCLONE_INFO</code>视图的<code class="codeph">DBCLONE_STATUS</code>列指示<code class="codeph">PREPARED</code> 。
                        </p>
                        <p>使用<code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code>启动的进程会中断源数据库文件与克隆的数据库文件之间的关系。
                        </p>
                     </li>
                  </ol>
                  <div class="section" id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__PREPARINGTHEMIRROREDCOPY-46A2241E">
                     <p class="subhead2" id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__GUID-224B8971-418A-4832-92CA-E951125A01A7">准备镜像副本</p>
                     <p>以下示例准备镜像副本并在<code class="codeph">DATA</code>磁盘组上创建文件组。在发出<code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> <code class="codeph">PREPARE</code> SQL命令之前，必须连接到正在准备克隆的源可插拔数据库（ <code class="codeph">pdb1</code>中为<code class="codeph">pdb1</code> ）。
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SHOW CON_NAME CON_NAME ------------------------------ CDB $ ROOT SQL&gt; ALTER SESSION SET CONTAINER = pdb1;会话改变了。SQL&gt; SHOW CON_NAME CON_NAME ------------------------------ PDB1 SQL&gt; ALTER PLUGGABLE DATABASE PREPARE MIRROR COPY pdb1_mirror;可插拔数据库已更改。
</pre><p>您可以在Oracle ASM实例上查询<code class="codeph">V$ASM_DBCLONE_INFO</code>视图以检查进程的状态。
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM V $ ASM_DBCLONE_INFO; GROUP_NUMBER DBCLONE_NAME MIRRORCOPY_NAME：DBCLONE_STATUS PARENT_DBNAME PARENT_FILEGROUP_NAME CON_ID ------------ ------------ --------------- ---- ---------- ------------- --------------------- ------ 1 DB_UNKNOWN PDB1_MIRROR PREPARED ORCL_PDB1 ORCL_PDB1 0</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__SPLITTINGTHEMIRROREDCOPYANDCREATING-46A227B0">
                     <p class="subhead2" id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__GUID-B509A43E-FE1D-412A-AAE6-A676A1A96F76">拆分镜像副本并创建数据库克隆</p>
                     <p>以下示例使用镜像副本<code class="codeph">pdb1_mirror</code>创建<code class="codeph">newpdb1</code>数据库克隆。 <code class="codeph">newpdb1</code>是<code class="codeph">pdb1</code>可插拔数据库的克隆，并插入CDB。必须在CDB的根容器中运行<code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> SQL命令。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SHOW CON_NAME CON_NAME ------------------------------ CDB $ ROOT SQL&gt; CREATE PLUGGABLE DATABASE newpdb1 FROM pdb1使用MIRROR COPY pdb1_mirror ;可插拔数据库已创建。SQL&gt; ALTER SESSION SET CONTAINER = newpdb1;会话改变了。SQL&gt; SHOW CON_NAME CON_NAME ------------------------------ NEWPDB1</pre><p>您可以在Oracle ASM实例上查询<code class="codeph">V$ASM_DBCLONE_INFO</code> ， <code class="codeph">V$ASM_FILEGROUP</code>和<code class="codeph">V$ASM_FILEGROUP_PROPERTY</code>视图以获取其他信息。
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM V $ ASM_DBCLONE_INFO; GROUP_NUMBER DBCLONE_NAME MIRRORCOPY_NAME：DBCLONE_STATUS PARENT_DBNAME PARENT_FILEGROUP_NAME CON_ID ------------ ------------- --------------- --- ------------ ------------- --------------------- ---- -  1 ORCL_NEWPDB1 PDB1_MIRROR SPLIT COMLETED ORCL_PDB1 ORCL_PDB1 0 SQL&gt; SELECT NAME，GROUP_NUMBER，FILEGROUP_NUMBER FROM V $ ASM_FILEGROUP; NAME GROUP_NUMBER FILEGROUP_NUMBER ------------------------------------ ----------- -  ---------------- DEFAULT_FILEGROUP 1 0 ORCL_CDB $ ROOT 1 1 ORCL_PDB $ SEED 1 2 ORCL_PDB1 1 3 PDB1_MIRROR 1 4 SQL&gt; SELECT NAME，VALUE FROM V $ ASM_FILEGROUP_PROPERTY WHERE FILEGROUP_NUMBER = 4 ; NAME VALUE ------------------------------------ ------------ ------------------------ PRIORITY MEDIUM PARENT_FILEGROUP_NUMBER 3 DBCLONE_STATUS SPLIT COMPLETED COMPATIBLE.CLIENT 18.0.0.0.0 REDUNDANCY MIRROR STRIPING FINE ...</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__DROPPINGTHEPREPAREDMIRRORCOPY-46A22AFF">
                     <p class="subhead2" id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__GUID-95F73ED4-0ED9-4361-93F0-6399AF7FF98E">删除准备好的镜像副本</p>
                     <p>准备镜像副本后，在拆分镜像副本并创建数据库克隆之前，可以删除准备好的镜像副本。</p>
                     <p>drop操作会丢弃<code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> <code class="codeph">PREPARE</code> SQL命令执行的所有更改。与<code class="codeph">PREPARE</code> SQL操作类似，drop操作也会触发相应磁盘组的重新平衡。您可以使用<code class="codeph">V$ASM_DBCLONE_INFO</code>视图查询正在进行的放置操作的状态。该<code class="codeph">DBCLONE_STATUS</code>的列<code class="codeph">V$ASM_DBCLONE_INFO</code>观点表示<code class="codeph">DROPPING</code>当文件组被丢弃，放弃所有更改后的条目被删除。
                     </p>
                     <p>以下示例说明了在连接到源可插拔数据库（ <code class="codeph">pdb1</code>中为<code class="codeph">pdb1</code> ）时如何删除准备好的镜像副本。
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SESSION SET CONTAINER = pdb1;会话改变了。SQL&gt; ALTER PLUGGABLE DATABASE DROP MIRROR COPY pdb1_mirror;可插拔数据库已更改。</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__CLEANINGUPAFTERFAILEDATTEMPTS-46A22F56">
                     <p class="subhead2" id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__GUID-72044EE2-C474-441B-8EC7-F9FF43020E08">尝试失败后清理</p>
                     <p>当时间点克隆过程不成功时， <code class="codeph">V$ASM_DBCLONE_INFO</code>视图的<code class="codeph">DBCLONE_STATUS</code>列指示<code class="codeph">FAILED</code> 。如果尝试创建时间点克隆失败，则可以通过在磁盘组上发出重新平衡来清除文件组来解决此问题。例如，在连接到Oracle ASM实例后，您可以运行以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DISKGROUP数据重置等待;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2__ORACLEDATABASEADMINISTRATORSGUIDEFO-0853B1DB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关多租户数据库的信息，请参阅<a href="../multi/introduction-to-the-multitenant-architecture.html#MULTI-GUID-267F7D12-D33F-4AC9-AA45-E9CD671B6F22" target="_blank"><span><cite>“Oracle多租户管理员指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> SQL语句的信息，请<a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF55686" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">V$ASM_DBCLONE_INFO</code>视图的信息，请<a href="../refrn/V-ASM_DBCLONE_INFO.html#REFRN-GUID-434D0A47-A61C-4882-8FAC-9539F272E609" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
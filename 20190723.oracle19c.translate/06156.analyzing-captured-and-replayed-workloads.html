<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports."></meta>
      <meta name="description" content="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports."></meta>
      <title>分析捕获和重放的工作负载</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Testing Guide "></meta>
      <meta property="og:description" content="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Testing Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96279-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="replaying-a-database-workload.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-workload-intelligence.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide"></meta>
    <meta name="dcterms.isVersionOf" content="RATUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="replaying-a-database-workload.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-workload-intelligence.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">测试指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-replay.html" property="item" typeof="WebPage"><span property="name">数据库重播</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">分析捕获和重放的工作负载</li>
            </ol>
            <a id="GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E" name="GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E"></a><a id="RATUG159"></a>
            
            <h2 id="RATUG-GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E" class="sect2"><span class="enumeration_chapter">13</span>分析捕获和重放的工作负载</h2>
         </header>
         <div class="ind">
            <div>
               <div><span>本章介绍如何使用各种数据库重放报告分析捕获和重放的工作负载。</span> 本章包含以下部分：</div>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1" title="工作负载捕获报告包含捕获的工作负载统计信息，有关捕获的顶级会话活动的信息以及捕获过程中使用的任何工作负载过滤器。">使用Workload Capture报告</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD" title="工作负载重播报告包含可用于衡量捕获系统和重放系统之间性能差异的信息。">使用工作负载重播报告</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D" title="重播比较期间报告可用于多种目的。">使用重播比较期间报告</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-91CE0855-A551-4585-B4FC-7CCDEB813882" title="使用SQL Performance Analyzer报告将工作负载重放中的SQL调优集与工作负载捕获中的另一个SQL调优集或两个工作负载重放中的两个SQL调优集进行比较。">使用SQL Performance Analyzer报告</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E__GUID-C3C4F84C-5A8B-44EC-A5A5-6ED94EFB0F74">
                  <p class="notep1">注意：</p>
                  <p>重播分析完成后，您可以在工作负载捕获时将数据库还原到其原始状态，并在工作负载目录对象备份到另一个物理位置后重复工作负载重放以测试对系统的其他更改。</p>
               </div>
            </div><a id="RATUG287"></a><div class="props_rev_3"><a id="GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1" name="GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1"></a><h3 id="RATUG-GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1" class="sect3"><span class="enumeration_section">13.1</span>使用Workload Capture报告</h3>
               <div>
                  <p>工作负载捕获报告包含捕获的工作负载统计信息，有关捕获的顶级会话活动的信息以及捕获过程中使用的任何工作负载过滤器。</p>
                  <p>以下部分描述了如何生成和使用工作负载捕获报告：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" title="本节介绍如何使用Oracle Enterprise Manager生成工作负载捕获报告。">使用Enterprise Manager访问Workload Capture报告</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" title="您可以使用DBMS_WORKLOAD_CAPTURE包生成工作负载捕获报告。">使用API生成工作负载捕获报告</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-47F7FA60-746E-449C-8DDD-439FDED31125" title="工作负载捕获报告包含可用于评估工作负载捕获有效性的各种类型的信息。">查看Workload Capture报告</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG271"></a><a id="RATUG160"></a><div class="props_rev_3"><a id="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" name="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149"></a><h4 id="RATUG-GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" class="sect4"><span class="enumeration_section">13.1.1</span>使用Enterprise Manager访问Workload Capture报告</h4>
                  <div>
                     <p>本节介绍如何使用Oracle Enterprise Manager生成工作负载捕获报告。</p>
                     <div class="section">
                        <p>生成工作负载捕获报告的主要工具是Oracle Enterprise Manager。如果由于某种原因Oracle Enterprise Manager不可用，您可以使用API生成工作负载捕获报告，如<span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" title="您可以使用DBMS_WORKLOAD_CAPTURE包生成工作负载捕获报告。">使用API生成工作负载捕获报告</a> ”中所述</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149__GUID-B2EE3C89-34B9-4D2D-9FC6-849ED0BAA214">要使用Enterprise Manager访问工作负载捕获报告：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>从Enterprise Manager Cloud Control控制台的Enterprise菜单中，选择<span class="bold">Quality Management</span> ，然后选择<span class="bold">Database Replay</span> 。</span><div>
                              <p>如果出现“数据库登录”页面，请以具有管理员权限的用户身份登录。</p>
                              <p>将显示“数据库重播”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>从“数据库重放”页面的“捕获的工作负载”选项卡中获取状态不是“已完成”的捕获，从“捕获”表中单击所需捕获的名称。</span><div>
                              <p>将显示“数据库重播”页面的“摘要”选项卡。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">报告”</span>选项卡以访问“工作负载捕获”报告和“Workload Capture ASH Analytics”报告的控件。</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>Workload Capture报告包含详细输出，显示已捕获但未捕获的数据组件的类型。</p>
                                 </li>
                                 <li>
                                    <p>Capture ASH Analytics报告显示哪些会话消耗的数据库时间最多。此报告提供堆叠图表，以帮助您可视化多个维度的活动会话活动，例如事件，活动类，模块/操作，会话，实例ID和PL / SQL功能。</p>
                                    <p>报告的“其他活动”列表选项表示尚未捕获活动。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>访问报告后，可以单击“ <span class="bold">保存”进行保存</span> 。</span><div>
                              <div class="infoboxnotealso" id="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149__GUID-F0976359-5047-4795-8CD7-691428930AB2">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-47F7FA60-746E-449C-8DDD-439FDED31125" title="工作负载捕获报告包含可用于评估工作负载捕获有效性的各种类型的信息。">查看Workload Capture报告</a> ”</span>以获取有关如何解释工作负载捕获报告的信息</p>
                                    </li>
                                    <li>
                                       <p><a href="../tgdba/analyzing-sampled-data.html#TGDBA277" target="_blank"><span><cite>Oracle数据库性能调整指南</cite></span></a> ，了解有关ASH（活动会话历史记录）的信息</p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="RATUG4263"></a><a id="RATUG161"></a><div class="props_rev_3"><a id="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" name="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92"></a><h4 id="RATUG-GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" class="sect4"><span class="enumeration_section">13.1.2</span>使用API生成工作负载捕获报告</h4>
                  <div>
                     <div><span>您可以使用<code class="codeph">DBMS_WORKLOAD_CAPTURE</code>包生成工作负载捕获报告。</span> 您还可以使用Oracle Enterprise Manager生成工作负载捕获报告，如<span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" title="本节介绍如何使用Oracle Enterprise Manager生成工作负载捕获报告。">使用Enterprise Manager访问Workload Capture报告</a> ”中所述</span> 。
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92__GUID-F420E842-EB9E-4343-8CC5-5AD64646AA2E">要生成有关最新工作负载捕获的报告：</p>
                        <ol>
                           <li>
                              <p>使用<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <a id="d27884e497" class="indexterm-anchor"></a> <code class="codeph">GET_CAPTURE_INFO</code>程序。
                              </p>
                              <p><code class="codeph">GET_CAPTURE_INFO</code>过程检索有关工作负载捕获的所有信息，并返回工作负载捕获的<code class="codeph">cap_id</code> 。此函数使用<code class="codeph">dir</code> required参数，该参数指定工作负载捕获目录对象的名称。
                              </p>
                           </li>
                           <li>
                              <p>调用<code class="codeph">DBMS_WORKLOAD_CAPTURE.REPORT</code>函数。
                              </p>
                              <p>该<code class="codeph">REPORT</code>功能生成使用报告<code class="codeph">cap_id</code> ，是由返回<code class="codeph">GET_CAPTURE_INFO</code>程序。此函数使用以下参数：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">capture_id</code>必需参数与包含将为其生成报告的工作负载捕获的目录相关。该目录应该是包含工作负载捕获的主机系统中的有效目录。这个参数的值应该匹配<code class="codeph">cap_id</code>由返回<code class="codeph">GET_CAPTURE_INFO</code>程序。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">format</code> required参数指定报告格式。有效值包括<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_TEXT</code>和<code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <code class="codeph">TYPE_HTML</code> 。</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在此示例中， <code class="codeph">GET_CAPTURE_INFO</code>过程检索有关<code class="codeph">jul14</code>目录中的工作负载捕获的所有信息，并返回工作负载捕获的<code class="codeph">cap_id</code> 。该<code class="codeph">REPORT</code>功能然后生成使用文本报告<code class="codeph">cap_id</code> ，是由返回<code class="codeph">GET_CAPTURE_INFO</code>程序。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE cap_id NUMBER; cap_rpt CLOB; BEGIN cap_id：= DBMS_WORKLOAD_CAPTURE.GET_CAPTURE_INFO（dir =&gt;'jul14'）; cap_rpt：= DBMS_WORKLOAD_CAPTURE.REPORT（capture_id =&gt; cap_id，format =&gt; DBMS_WORKLOAD_CAPTURE.TYPE_TEXT）;结束; /</pre><div class="infoboxnotealso" id="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92__GUID-9C562F36-CAFF-49EC-9279-6C523BFF0FB3">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-47F7FA60-746E-449C-8DDD-439FDED31125" title="工作负载捕获报告包含可用于评估工作负载捕获有效性的各种类型的信息。">查看Workload Capture报告</a> ”</span>以获取有关如何解释工作负载捕获报告的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_WORKLOAD_CAPTURE</code>包的信息，请<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> <a href="../arpls/DBMS_WORKLOAD_CAPTURE.html#ARPLS207" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG162"></a><div class="props_rev_3"><a id="GUID-47F7FA60-746E-449C-8DDD-439FDED31125" name="GUID-47F7FA60-746E-449C-8DDD-439FDED31125"></a><h4 id="RATUG-GUID-47F7FA60-746E-449C-8DDD-439FDED31125" class="sect4"><span class="enumeration_section">13.1.3</span>查看工作负载捕获报告</h4>
                  <div>
                     <div><span>工作负载捕获报告包含可用于评估工作负载捕获有效性的各种类型的信息。</span> 使用此报告中提供的信息，您可以确定捕获的工作负载是否：</div>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>表示要重播的实际工作负载</p>
                        </li>
                        <li>
                           <p>不包含您要排除的任何工作负载</p>
                        </li>
                        <li>
                           <p>可以重播</p>
                        </li>
                     </ul>
                     <p>工作负载捕获报告中包含的信息分为以下几类：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关工作负载捕获的详细信息（例如工作负载捕获的名称，已定义的过滤器，日期，时间和捕获的SCN）</p>
                        </li>
                        <li>
                           <p>有关工作负载捕获的总体统计信息（例如捕获的总数据库时间，捕获的登录数和事务数）以及相对于总系统活动的相应百分比</p>
                        </li>
                        <li>
                           <p>捕获的工作负载的配置文件</p>
                        </li>
                        <li>
                           <p>由于版本限制而导致的未捕获工作负载的配置文件</p>
                        </li>
                        <li>
                           <p>使用已定义过滤器排除的未捕获工作负载的配置文件</p>
                        </li>
                        <li>
                           <p>由后台进程或预定作业组成的未捕获工作负载的配置文件</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG288"></a><div class="props_rev_3"><a id="GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD" name="GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD"></a><h3 id="RATUG-GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD" class="sect3"><span class="enumeration_section">13.2</span>使用工作负载重播报告</h3>
               <div>
                  <p>工作负载重播报告包含可用于衡量捕获系统和重放系统之间性能差异的信息。</p>
                  <p>以下部分描述了如何生成和查看工作负载重播报告：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" title="本节介绍如何使用Oracle Enterprise Manager生成工作负载重播报告。">使用Enterprise Manager访问工作负载重播报告</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" title="您可以使用DBMS_WORKLOAD_REPLAY包生成工作负载重播报告。">使用API生成工作负载重播报告</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" title="工作负载重播报告中包含的信息包括性能和重放差异。">查看工作负载重播报告</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG272"></a><a id="RATUG163"></a><div class="props_rev_3"><a id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" name="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143"></a><h4 id="RATUG-GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" class="sect4"><span class="enumeration_section">13.2.1</span>使用Enterprise Manager访问工作负载重播报告</h4>
                  <div>
                     <p>本节介绍如何使用Oracle Enterprise Manager生成工作负载重播报告。</p>
                     <div class="section">
                        <p>生成工作负载重放报告的主要工具是Oracle Enterprise Manager。如果由于某种原因Oracle Enterprise Manager不可用，您可以使用API生成工作负载重播报告，如<span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" title="您可以使用DBMS_WORKLOAD_REPLAY包生成工作负载重播报告。">使用API生成工作负载重播报告</a> ”中所述</span></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-C3812502-F5DB-4AB5-841E-E7F37A5E9D2C">使用Enterprise Manager访问工作负载重播报告：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>从Enterprise Manager Cloud Control控制台的Enterprise菜单中，选择<span class="bold">Quality Management</span> ，然后选择<span class="bold">Database Replay</span> 。</span><div>
                              <p>如果出现“数据库登录”页面，请以具有管理员权限的用户身份登录。</p>
                              <p>将显示“数据库重播”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">重播任务”</span>选项卡，然后选择要访问其报告的重播。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">报告”</span>选项卡可访问各个报告。</span><div>
                              <p>您可以查看几种类型的报告以完成工作负载重放：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>数据库重播</p>
                                    <p>使用此报告以表格格式查看完整的重播统计信息，包括重播差异和工作负载配置文件。</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-AC4085B9-0061-41AF-97DF-DDE2E7AD7148"><img src="img/dbr_replay_replay_rep.gif" width="226" alt="下面是dbr_replay_replay_rep.gif的描述" title="下面是dbr_replay_replay_rep.gif的描述" longdesc="img_text/dbr_replay_replay_rep.html"><br><a href="img_text/dbr_replay_replay_rep.html">说明dbr_replay_replay_rep.gif的描述</a></div>
                                    <!-- class="figure" -->
                                 </li>
                                 <li>
                                    <p>比较期间ADDM</p>
                                    <p>使用此报告可以执行一次工作负载重放与其捕获或同一捕获的另一次重放的高级别比较。只能使用此报告比较包含至少5分钟数据库时间的工作负载重放。</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-77F8B559-FCA7-4865-A217-B65074A035AA"><img src="img/dbr_replay_addm_rep.gif" width="511" alt="下面是dbr_replay_addm_rep.gif的描述" title="下面是dbr_replay_addm_rep.gif的描述" longdesc="img_text/dbr_replay_addm_rep.html"><br><a href="img_text/dbr_replay_addm_rep.html">插图描述dbr_replay_addm_rep.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>检查报告的以下部分，以了解两个时期之间的性能变化以及更改的原因：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>概观</p>
                                          <p>报告的这一部分显示了SQL通用性，它是基于两个时段共有的SQL语句的平均资源消耗的基本和比较时段之间的可比性。</p>
                                          <p>通用性值100％表示两个时间段中的工作负载“签名”相同。预计此用例的通用性为100％，因为重放的工作负载是相同的（假设您没有使用重放过滤器）。值为0％表示两个时间段没有特定工作负载维度的共同项。</p>
                                          <p>公共性基于输入类型（即SQL正在执行）以及执行SQL语句的负载。因此，仅在一个时间段内运行但不消耗大量时间的SQL语句不会影响通用性。因此，即使某些SQL语句仅在两个句点之一中运行，两个工作负载也可以具有100％的通用性，前提是这些SQL语句不会消耗大量资源。</p>
                                       </li>
                                       <li>
                                          <p>组态</p>
                                          <p>显示的信息显示按实例，主机和数据库分类的各种参数的基本周期和比较周期值。</p>
                                       </li>
                                       <li>
                                          <p>发现</p>
                                          <p>调查结果可以显示性能改进，并确定系统更改导致的主要性能差异。对于消极结果，如果您了解并消除原因，可以消除负面结果。</p>
                                          <p>基准期和比较期显示的值表示与数据库时间有关的性能。</p>
                                          <p>变更影响值表示从一个时间段到另一个时间段的性能变化规模的度量。它适用于按每个时间段消耗的总数据库时间来衡量的问题或项目。绝对值按降序排序。</p>
                                          <p>如果值为正，则发生改善，如果值为负，则发生回归。例如，-200％的变化影响意味着期间2是期间1的三倍。</p>
                                          <p>您可以运行性能调整工具（如ADDM和SQL Tuning Advisor）来修复比较期间的问题，以提高一般系统性能。</p>
                                       </li>
                                       <li>
                                          <p>资源</p>
                                          <p>显示的信息提供了两个时间段的数据库时间划分的摘要，并显示了CPU，内存，I / O和互连的资源使用情况（仅限Oracle RAC）。</p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>SQL性能分析器</p>
                                    <p>使用此报告将工作负载捕获中的SQL调优集与工作负载重放中的另一个SQL调优集或两个工作负载重放中的两个SQL调优集进行比较。将SQL调优集与数据库重放进行比较提供了比SQL性能分析器测试执行更多的信息，因为它考虑并显示了每个SQL语句的所有执行计划，而SQL性能分析器测试执行每个SQL语句只为每个SQL语句生成一个执行计划。</p>
                                 </li>
                                 <li>
                                    <p>重播比较期间</p>
                                    <p>使用此报告将一个工作负载重放的AWR数据与其捕获或同一捕获的另一个重放进行比较。在运行此报告之前，必须先前已导出捕获或重放工作负载的AWR数据。</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-6584967C-486C-4E9D-B11F-AD2376A8C07B"><img src="img/dbr_replay_compare_per_rep.gif" width="505" alt="下面是dbr_replay_compare_per_rep.gif的描述" title="下面是dbr_replay_compare_per_rep.gif的描述" longdesc="img_text/dbr_replay_compare_per_rep.html"><br><a href="img_text/dbr_replay_compare_per_rep.html">说明描述dbr_replay_compare_per_rep.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>有关使用此报告的信息，请参阅<span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" title="通过查看重播比较期间报告，您可以确定是否发生任何重播差异以及是否存在任何重大的性能变化。">查看重播比较期间报告</a> ”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>重播ASH Analytics</p>
                                    <p>“重播ASH分析”报告包含针对您在下拉菜单中选择的类别重播的指定工作负载持续时间的活动会话历史记录（ASH）信息。在运行此报告之前，必须先从捕获或重放的工作负载中导出AWR数据。</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-C62B12B6-F29B-41E1-B292-C283AE76AAD6"><img src="img/dbr_replay_ash_anal_rep.gif" width="475" alt="下面是dbr_replay_ash_anal_rep.gif的描述" title="下面是dbr_replay_ash_anal_rep.gif的描述" longdesc="img_text/dbr_replay_ash_anal_rep.html"><br><a href="img_text/dbr_replay_ash_anal_rep.html">插图描述dbr_replay_ash_anal_rep.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>该图表显示了等待类的工作负载活动细分值，并提供了对系统产生负面影响的顶级活动会话的详细统计信息。</p>
                                    <p>您可以选择使用“加载映射”来获取系统活动的图形视图。当您不想查看活动在所选时间段内如何随时间变化时，加载地图对于查看单维或多维布局中的活动非常有用。</p>
                                 </li>
                              </ul>
                              <div class="infoboxnotealso" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-A29DB88A-8EE2-4828-9529-383ABFC6A72E">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="../tdppt/resolving-performance-degradation-over-time.html#TDPPT093" target="_blank"><span><cite>“Oracle数据库2天+性能调整指南”</cite></span></a> ，了解有关如何解释重播比较期间报告的信息</p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="RATUG4264"></a><a id="RATUG164"></a><div class="props_rev_3"><a id="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" name="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA"></a><h4 id="RATUG-GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" class="sect4"><span class="enumeration_section">13.2.2</span>使用API生成工作负载重播报告</h4>
                  <div>
                     <div><span>您可以使用<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包生成工作负载重播报告。</span> 您还可以使用Oracle Enterprise Manager生成工作负载重播报告，如<span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" title="本节介绍如何使用Oracle Enterprise Manager生成工作负载重播报告。">使用Enterprise Manager访问工作负载重播报告</a> ”中所述</span> 。
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA__GUID-5067CDE0-3F2B-40D3-98C4-677481750485">使用API生成有关工作负载捕获的最新工作负载重放的报告：</p>
                        <ol>
                           <li>
                              <p>通过调用<code class="codeph">DBMS_WORKLOAD_REPLAY</code>从重放目录对象中检索有关工作负载捕获的信息和工作负载重放尝试的历史记录。 <a id="d27884e1162" class="indexterm-anchor"></a> <code class="codeph">GET_REPLAY_INFO</code>函数，如<span class="q">“ <a href="replaying-a-database-workload.html#GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA" title="您可以从重放目录对象中检索有关工作负载捕获的所有信息，以及从目录中检索工作负载重放尝试的历史记录。">检索有关工作负载重播的信息</a> ”中所述</span> 。
                              </p>
                              <p><code class="codeph">GET_REPLAY_INFO</code>函数返回单个捕获目录的<code class="codeph">cap_id</code> （对于统一捕获目录，返回的<code class="codeph">cap_id</code>为0）。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">cap_id</code>这是由返回<code class="codeph">GET_REPLAY_INFO</code>功能，运行一个查询返回合适<code class="codeph">rep_id</code>工作负载的最新重播。
                              </p>
                           </li>
                           <li>
                              <p>调用<code class="codeph">DBMS_WORKLOAD_REPLAY.REPORT</code>函数。
                              </p>
                              <p><code class="codeph">REPORT</code>函数使用<code class="codeph">SELECT</code>语句返回的<code class="codeph">rep_id</code>生成报告。
                              </p>
                              <p><code class="codeph">REPORT</code>函数使用以下参数：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">replay_id</code> required参数指定包含将为其生成报告的工作负载重放的目录。该目录应该是包含工作负载重放的主机系统中的有效目录。此参数的值应与上一个查询返回的<code class="codeph">rep_id</code>匹配。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">format</code>参数required参数指定报告格式。有效值包括<code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <code class="codeph">TYPE_TEXT</code> ， <code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <code class="codeph">TYPE_HTML</code>和<code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <code class="codeph">TYPE_XML</code> 。</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在此示例中， <code class="codeph">GET_REPLAY_INFO</code>函数从<code class="codeph">jul14</code>重放目录对象中检索有关工作负载捕获的所有信息以及所有工作负载重放尝试的历史记录。该函数返回捕获目录的<code class="codeph">cap_id</code> ，该目录可与<code class="codeph">DBA_WORKLOAD_REPLAYS</code>视图中的<code class="codeph">CAPTURE_ID</code>列关联，以访问检索到的信息。<code class="codeph">SELECT</code>语句为最新的工作负载重放返回相应的<code class="codeph">rep_id</code> 。然后， <code class="codeph">REPORT</code>函数使用<code class="codeph">SELECT</code>语句返回的<code class="codeph">rep_id</code>生成HTML报告。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE cap_id NUMBER; rep_id NUMBER; rep_rpt CLOB; BEGIN cap_id：= DBMS_WORKLOAD_REPLAY.GET_REPLAY_INFO（replay_dir =&gt;'jul14'）; / *获取该捕获的最新重放* / SELECT max（id）INTO rep_id FROM dba_workload_replays WHERE capture_id = cap_id; rep_rpt：= DBMS_WORKLOAD_REPLAY.REPORT（replay_id =&gt; rep_id，format =&gt; DBMS_WORKLOAD_REPLAY.TYPE_HTML）;结束; /</pre><div class="infoboxnotealso" id="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA__GUID-11ACC2E6-503D-4A2F-81A6-B22FE12D3893">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" title="工作负载重播报告中包含的信息包括性能和重放差异。">查看工作负载重播报告</a> ”，</span>以获取有关如何解释工作负载重播报告的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包的信息，请<code class="codeph">DBMS_WORKLOAD_REPLAY</code> <a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG165"></a><div class="props_rev_3"><a id="GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" name="GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46"></a><h4 id="RATUG-GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" class="sect4"><span class="enumeration_section">13.2.3</span>查看工作负载重播报告</h4>
                  <div>
                     <div>在测试系统上重放工作负载之后，与捕获的内容相比，重放的内容可能会有所不同。有许多因素可能导致重放分歧，可以使用工作负载重放报告进行分析。<span>工作负载重播报告中包含的信息包括性能和重放差异。</span></div>
                     <p>当在重放系统中引入影响数据库整体性能的新算法时，可能会出现性能差异。例如，如果在较新版本的Oracle数据库上重播工作负载，则新算法可能会导致特定请求运行得更快，并且分歧将显示为更快的执行。在这种情况下，这是一个理想的分歧。</p>
                     <p>当DML或SQL查询的结果与最初在工作负载中捕获的结果不匹配时，会发生数据偏差。例如，SQL语句在重放期间返回的行数可能少于捕获期间返回的行数。</p>
                     <p>重播数据库调用时发生错误分歧：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>遇到未捕获的新错误</p>
                        </li>
                        <li>
                           <p>不会遇到捕获的错误</p>
                        </li>
                        <li>
                           <p>遇到与捕获的错误不同的错误</p>
                        </li>
                     </ul>
                     <p>工作负载重播报告中包含的信息分为以下几类：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关工作负载重放和工作负载捕获的详细信息，例如作业名称，状态，数据库信息，每个进程的持续时间和时间，以及目录对象和路径</p>
                        </li>
                        <li>
                           <p>为工作负载重播选择的重播选项以及已启动的重播客户端数</p>
                        </li>
                        <li>
                           <p>有关工作负载重放和工作负载捕获的总体统计信息（例如捕获和重放的总数据库时间，捕获和重放的登录和事务数）以及与系统总活动相对应的百分比</p>
                        </li>
                        <li>
                           <p>重播工作量的配置文件</p>
                        </li>
                        <li>
                           <p>重播分歧</p>
                        </li>
                        <li>
                           <p>错误分歧</p>
                        </li>
                        <li>
                           <p>DML和SQL查询数据发散</p>
                        </li>
                     </ul>
                     <p>从Oracle Database Release 19c开始，工作负载重放报告提供诊断慢速工作负载重放所需的信息。工作负载重播报告中包含的信息包含以下附加部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972">重播会话</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B">同步</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF">跟踪提交</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-4C618972-7153-4797-BDBC-15B63E9E6922">会话失败</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="sect4"><a id="GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972" name="GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972"></a><h5 id="RATUG-GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972" class="sect5"><span class="enumeration_section">13.2.3.1</span>重播会话</h5>
                     <div>
                        <p>“重播会话”部分包括有关正在进行和已完成的重播会话的统计信息，例如热门事件，最慢的重播会话和最快的重播会话。仅在重播正在进行时，才会显示与正在进行的重播会话相关的统计信息。使用本节中的信息可以了解正在进行和已完成的重播会话的顶级事件，比捕获速度慢的重放会话，以及捕获和重放之间会话已用时间的比较。</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B" name="GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B"></a><h5 id="RATUG-GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B" class="sect5"><span class="enumeration_section">13.2.3.2</span>同步</h5>
                     <div>
                        <p>在工作负载重放期间，将保留捕获的SQL语句的执行顺序。在重放期间延迟或阻止SQL语句的执行时，结果是工作负载重放速度变慢。</p>
                        <p>“同步”部分包含有关阻止执行其中一个同步SQL语句的会话的信息。仅当阻止SQL语句的执行时才会显示此信息。使用本节中的信息可以了解工作负载重放被阻止或比工作负载捕获慢的原因。本节还包括顶级事件和顶级SQL语句，其中包含与运行同步SQL语句的会话相关的顶级事件。</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF" name="GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF"></a><h5 id="RATUG-GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF" class="sect5"><span class="enumeration_section">13.2.3.3</span>跟踪提交</h5>
                     <div>
                        <p>数据库重放跟踪工作负载捕获期间执行的提交以及执行之间消耗的时间。它可以检测缓慢的提交并识别捕获的工作负载的部分，从而减慢工作负载的重放速度。</p>
                        <p>Tracked Commits部分包含有关捕获的提交数量和执行提交的时间的信息。使用此信息可以查找工作负载重放是否比工作负载捕获慢。</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-4C618972-7153-4797-BDBC-15B63E9E6922" name="GUID-4C618972-7153-4797-BDBC-15B63E9E6922"></a><h5 id="RATUG-GUID-4C618972-7153-4797-BDBC-15B63E9E6922" class="sect5"><span class="enumeration_section">13.2.3.4</span>会话失败</h5>
                     <div>
                        <p>当用户会话的工作负载重放失败时，将跳过会话中剩余呼叫的重播。“会话失败”部分包括有关会话失败期间执行的SQL语句，失败会话的文件ID和呼叫计数器以及未执行的调用总数的信息。</p>
                     </div>
                  </div>
               </div>
            </div><a id="RATUG289"></a><div class="props_rev_3"><a id="GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D" name="GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D"></a><h3 id="RATUG-GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D" class="sect3"><span class="enumeration_section">13.3</span>使用重放比较期间报告</h3>
               <div>
                  <div><span>重播比较期间报告可用于多种目的。</span> 例如，您可以使用重播比较期间报告来比较以下性能：</div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>工作负载重放到其工作负载捕获</p>
                     </li>
                     <li>
                        <p>工作负载重放到同一工作负载捕获的另一次重放</p>
                     </li>
                     <li>
                        <p>多个工作负载捕获到整合重播</p>
                     </li>
                  </ul>
                  <p>以下部分描述了如何生成和查看重播比较期间报告：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300" title="本节介绍如何使用DBMS_WORKLOAD_REPLAY包生成重播比较期间报告。">使用API生成重放比较期间报告</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" title="通过查看重播比较期间报告，您可以确定是否发生任何重播差异以及是否存在任何重大的性能变化。">查看重播比较期间报告</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D__GUID-E634A0A9-E5A6-4AF7-83C3-B8C14B2FA952">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-consolidated-database-replay.html#GUID-62AAF505-1DD4-414A-9F1D-4386B59B7138" title="通过数据库重放，您可以捕获生产系统上的工作负载并在测试系统上重放它。这在评估或采用新数据库技术时非常有用，因为这些更改可以在测试系统上进行测试，而不会影响生产系统。">使用Consolidated Database Replay</a>获取有关Consolidated Database Replay的信息</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RATUG292"></a><div class="props_rev_3"><a id="GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300" name="GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300"></a><h4 id="RATUG-GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300" class="sect4"><span class="enumeration_section">13.3.1</span>使用API生成重放比较期间报告</h4>
                  <div>
                     <div><span>本节介绍如何使用<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包生成重播比较期间报告。</span> 此报告仅比较包含至少5分钟数据库时间的工作负载重放。
                     </div>
                     <div class="section">
                        <p>要生成重播比较期间报告，请使用<code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <a id="d27884e1991" class="indexterm-anchor"></a> <code class="codeph">COMPARE_PERIOD_REPORT</code>程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_WORKLOAD_REPLAY.COMPARE_PERIOD_REPORT（replay_id1 =&gt; 12，replay_id2 =&gt; 17，format =&gt; DBMS_WORKLOAD_CAPTURE.TYPE_HTML，result =&gt;：report_bind）;结束; /</pre><p>在此示例中， <code class="codeph">COMPARE_PERIOD_REPORT</code>过程以HTML格式生成重播比较期间报告，该报告将重播ID为12的工作负载重放与ID为17的另一重放进行比较。
                        </p>
                        <p>此示例中的<code class="codeph">COMPARE_PERIOD_REPORT</code>过程使用以下参数：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">replay_id1</code>参数指定更改后将为其生成报告的工作负载重放的数字标识符。此参数是必需的。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">replay_id2</code>参数指定在生成报告的更改之前的工作负载重放的数字标识符。如果未指定，将与工作负载捕获执行比较。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">format</code>参数指定报告格式。有效值包括<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_HTML</code> HTML和<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_XML</code> for XML。此参数是必需的。
                              </p>
                           </li>
                           <li>
                              <p>result参数指定报告的输出。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300__GUID-9EB5B6BC-79A1-4D54-8A43-D203AE440D36">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" title="通过查看重播比较期间报告，您可以确定是否发生任何重播差异以及是否存在任何重大的性能变化。">查看重播比较期间报告</a> ”</span> ，了解有关如何解释重播比较期间报告的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包的信息，请<code class="codeph">DBMS_WORKLOAD_REPLAY</code> <a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG304"></a><div class="props_rev_3"><a id="GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" name="GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7"></a><h4 id="RATUG-GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" class="sect4"><span class="enumeration_section">13.3.2</span>查看重播比较期间报告</h4>
                  <div>
                     <p>通过查看重播比较期间报告，您可以确定是否发生任何重播差异以及是否存在任何重大的性能变化。</p>
                     <p>根据正在进行的比较类型，生成以下三种类型的重播比较期间报告之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>捕捉与重播</p>
                           <p>此报告类型将工作负载重放的性能与其工作负载捕获进行比较。</p>
                        </li>
                        <li>
                           <p>重播与重播</p>
                           <p>此报告类型比较同一工作负载捕获的两个工作负载重放的性能。</p>
                        </li>
                        <li>
                           <p>合并重播</p>
                           <p>此报告类型将多个工作负载捕获的性能与整合的重放进行比较。此报告类型仅提供ASH数据比较部分。有关此报告类型的详细信息，请参阅<span class="q">“ <a href="using-consolidated-database-replay.html#GUID-D7C55F09-D604-4AD6-8B4A-C8C93D954954" title="使用重播比较期间报告执行统一数据库重放的报告和分析。看到" ="">统一数据库重播的报告和分析</a> ”</span> 。
                           </p>
                        </li>
                     </ul>
                     <p>所有重播比较期间报告类型都包含有关正在比较的两个运行之间最重要更改的信息。使用此信息确定要采取的适当操作。例如，如果发现新的并发问题，请查看自动数据库诊断监视器（ADDM）报告以诊断问题。如果发现新的SQL性能问题，请运行SQL Tuning Advisor来解决问题。</p>
                     <p>重播比较期间报告中的信息分为以下几个部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319" title="此部分包含有关在报告中比较的两个运行的元数据。">一般信息</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-49084501-0794-40B8-AC1B-DA5290D6797C" title="本节包含第二次运行相对于第一次运行的分歧分析。如果分析显示出显着差异，请查看完整的分歧报告。">重看发散</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-41FDA25A-559C-4A32-822F-E2FADD192701" title="此部分包含两次运行的高级性能统计信息比较（例如数据库时间的更改）。">主要业绩统计</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A" title="本节比较从一次运行到下一次运行的各个SQL语句的性能变化。">热门SQL /电话</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E" title="本节比较两次运行的CPU和I / O使用情况。对所有实例求和CPU数，并对实例的CPU使用率求平均值。">硬件使用比较</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-539DA111-5C84-42DA-A642-878193C66280" title="本节包含两种运行中ADDM分析的比较，这两种运行按影响的绝对差异排序。">ADDM比较</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8" title="本节比较两次运行中的ASH数据。">ASH数据比较</a></p>
                        </li>
                     </ul>
                  </div><a id="RATUG4160"></a><div class="props_rev_3"><a id="GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319" name="GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319"></a><h5 id="RATUG-GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319" class="sect5"><span class="enumeration_section">13.3.2.1</span>一般信息</h5>
                     <div><span>此部分包含有关在报告中比较的两个运行的元数据。</span> 此处还显示了两次运行之间的任何<code class="codeph">init.ora</code>参数更改。查看本节以验证是否执行了正在测试的系统更改。
                     </div>
                  </div><a id="RATUG4161"></a><div class="props_rev_3"><a id="GUID-49084501-0794-40B8-AC1B-DA5290D6797C" name="GUID-49084501-0794-40B8-AC1B-DA5290D6797C"></a><h5 id="RATUG-GUID-49084501-0794-40B8-AC1B-DA5290D6797C" class="sect5"><span class="enumeration_section">13.3.2.2</span>重播发散</h5>
                     <p>本节包含第二次运行相对于第一次运行的分歧分析。如果分析显示出显着差异，请查看完整的分歧报告。</p>
                  </div><a id="RATUG4162"></a><div class="props_rev_3"><a id="GUID-41FDA25A-559C-4A32-822F-E2FADD192701" name="GUID-41FDA25A-559C-4A32-822F-E2FADD192701"></a><h5 id="RATUG-GUID-41FDA25A-559C-4A32-822F-E2FADD192701" class="sect5"><span class="enumeration_section">13.3.2.3</span>主要性能统计</h5>
                     <div><span>此部分包含两次运行的高级性能统计信息比较（例如数据库时间的更改）。</span> 如果比较显示数据库时间的变化不显着，那么两次运行之间的性能通常是相似的。如果数据库时间发生重大变化，请查看统计信息以确定导致最大更改的组件（CPU或用户I / O）。
                     </div>
                  </div><a id="RATUG4163"></a><div class="props_rev_3"><a id="GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A" name="GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A"></a><h5 id="RATUG-GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A" class="sect5"><span class="enumeration_section">13.3.2.4</span>顶级SQL /调用</h5>
                     <div><span>本节比较从一次运行到下一次运行的各个SQL语句的性能变化。</span> SQL语句按数据库时间的总变化排序。大多数数据库时间回归的热门SQL语句是SQL调优的最佳候选者。
                     </div>
                  </div><a id="RATUG4164"></a><div class="props_rev_3"><a id="GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E" name="GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E"></a><h5 id="RATUG-GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E" class="sect5"><span class="enumeration_section">13.3.2.5</span>硬件使用比较</h5>
                     <div>
                        <p>本节比较两次运行的CPU和I / O使用情况。对所有实例求和CPU数，并对实例的CPU使用率求平均值。</p>
                        <p>显示数据和临时文件的I / O统计信息。单块读取时间的高值（远高于10毫秒）表明系统受I / O限制。如果是这种情况，则查看总读取和写入时间，以确定延迟是由过多的I / O请求还是由于I / O吞吐量较差引起的。</p>
                     </div>
                  </div><a id="RATUG4165"></a><div class="props_rev_3"><a id="GUID-539DA111-5C84-42DA-A642-878193C66280" name="GUID-539DA111-5C84-42DA-A642-878193C66280"></a><h5 id="RATUG-GUID-539DA111-5C84-42DA-A642-878193C66280" class="sect5"><span class="enumeration_section">13.3.2.6</span> ADDM比较</h5>
                     <div>
                        <div><span>本节包含两种运行中ADDM分析的比较，这两种运行按影响的绝对差异排序。</span> 比较两次运行的ADDM结果，以确定仅在一次运行中存在的可能问题。如果要测试的系统更改旨在提高数据库性能，请验证ADDM结果中是否反映了预期的改进。
                        </div>
                        <div class="infoboxnotealso" id="GUID-539DA111-5C84-42DA-A642-878193C66280__GUID-EC707E51-7CA5-47A8-AD43-AD44C1076774">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关ADDM分析的信息，请参见<a href="../tgdba/automatic-performance-diagnostics.html#TGDBA94240" target="_blank"><span><cite>“Oracle数据库性能调整指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RATUG4166"></a><div class="props_rev_3"><a id="GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8" name="GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8"></a><h5 id="RATUG-GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8" class="sect5"><span class="enumeration_section">13.3.2.7</span> ASH数据比较</h5>
                     <div>
                        <div><span>本节比较两次运行中的ASH数据。</span> 比较期间的开始时间和结束时间显示在表格中。这些时间可能与正在比较的两次运行的捕获和重放时间不匹配。相反，这些时间代表采集ASH样本的时间。
                        </div>
                        <p>ASH数据比较部分包含以下小节：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159" title="本节总结了基于数据库时间和等待时间分布的两次运行期间的活动。">比较摘要</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0" title="此部分按总数据库时间，CPU时间和等待时间显示两次运行的顶级SQL语句。">热门SQL</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-3FB2475D-FA69-42A0-A105-E485911511A6" title="此部分显示两次运行的顶部长期运行的SQL语句。每个长时间运行的SQL语句都包含有关查询的详细信息，例如最大，最小和平均响应时间。">长时间运行的SQL</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A" title="本节提取两次运行中常见的SQL语句，并按平均响应时间和总数据库时间的差异显示最常见的SQL语句。">常见的SQL</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-7A13086F-7311-47CB-9641-97FBB578409F" title="此部分包含有关两次运行的总体等待时间的顶级对象的详细信息。">顶级对象</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8__GUID-B10938D8-E39F-4953-A528-683F33AF9926">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关ASH的信息，请参见<a href="../tgdba/analyzing-sampled-data.html#TGDBA277" target="_blank"><span><cite>“Oracle数据库性能调整指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="RATUG4196"></a><a id="RATUG4197"></a><a id="RATUG4167"></a><div class="props_rev_3"><a id="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159" name="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159"></a><h6 id="RATUG-GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159" class="sect6"><span class="enumeration_section">13.3.2.7.1</span>比较摘要</h6>
                        <div>
                           <div><span>本节总结了基于数据库时间和等待时间分布的两次运行期间的活动。</span> 例如：</div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>DB Time Distribution表示如何在CPU使用，等待时间和I / O请求之间分配总数据库时间。</p>
                                 <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABBAAAH">图13-1</a>显示了示例报告的DB Time Distribution子部分。
                                 </p>
                                 <div class="figure" id="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABBAAAH">
                                    <p class="titleinfigure">图13-1数据库时间分布</p><img src="img/dbr_rep_db_time_dist.gif" width="243" alt="下面是图13-1的描述" title="下面是图13-1的描述" longdesc="img_text/dbr_rep_db_time_dist.html"><br><a href="img_text/dbr_rep_db_time_dist.html">“图13-1 DB时间分布”的描述</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>等待时间分布表示总等待时间如何在等待事件中分配。两个运行都列出了最高等待事件类，事件名称和事件计数。</p>
                                 <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABFBEBH">图13-2</a>显示了示例报告的等待时间分布子部分。
                                 </p>
                                 <div class="figure" id="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABFBEBH">
                                    <p class="titleinfigure">图13-2等待时间分布</p><img src="img/dbr_rep_wait_time_dist.gif" width="339" alt="下面是图13-2的描述" title="下面是图13-2的描述" longdesc="img_text/dbr_rep_wait_time_dist.html"><br><a href="img_text/dbr_rep_wait_time_dist.html">“图13-2等待时间分布”的描述</a></div>
                                 <!-- class="figure" -->
                              </li>
                           </ul>
                        </div>
                     </div><a id="RATUG4168"></a><div class="props_rev_3"><a id="GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0" name="GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0"></a><h6 id="RATUG-GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0" class="sect6"><span class="enumeration_section">13.3.2.7.2</span> Top SQL</h6>
                        <p>此部分按总数据库时间，CPU时间和等待时间显示两次运行的顶级SQL语句。</p>
                     </div><a id="RATUG4169"></a><div class="props_rev_3"><a id="GUID-3FB2475D-FA69-42A0-A105-E485911511A6" name="GUID-3FB2475D-FA69-42A0-A105-E485911511A6"></a><h6 id="RATUG-GUID-3FB2475D-FA69-42A0-A105-E485911511A6" class="sect6"><span class="enumeration_section">13.3.2.7.3</span>长时间运行的SQL</h6>
                        <p>此部分显示两次运行的顶部长期运行的SQL语句。每个长时间运行的SQL语句都包含有关查询的详细信息，例如最大，最小和平均响应时间。</p>
                     </div><a id="RATUG4170"></a><div class="props_rev_3"><a id="GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A" name="GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A"></a><h6 id="RATUG-GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A" class="sect6"><span class="enumeration_section">13.3.2.7.4</span>通用SQL</h6>
                        <p>本节提取两次运行中常见的SQL语句，并按平均响应时间和总数据库时间的差异显示最常见的SQL语句。</p>
                     </div><a id="RATUG4198"></a><a id="RATUG4171"></a><div class="props_rev_3"><a id="GUID-7A13086F-7311-47CB-9641-97FBB578409F" name="GUID-7A13086F-7311-47CB-9641-97FBB578409F"></a><h6 id="RATUG-GUID-7A13086F-7311-47CB-9641-97FBB578409F" class="sect6"><span class="enumeration_section">13.3.2.7.5</span>顶部对象</h6>
                        <div>
                           <p>此部分包含有关两次运行的总体等待时间的顶级对象的详细信息。</p>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-7A13086F-7311-47CB-9641-97FBB578409F__BABHCHFD">图13-3</a>显示了示例报告的Top Objects部分。
                           </p>
                           <div class="figure" id="GUID-7A13086F-7311-47CB-9641-97FBB578409F__BABHCHFD">
                              <p class="titleinfigure">图13-3顶部对象</p><img src="img/dbr_rep_top_objects.gif" width="243" alt="下面是图13-3的描述" title="下面是图13-3的描述" longdesc="img_text/dbr_rep_top_objects.html"><br><a href="img_text/dbr_rep_top_objects.html">“图13-3顶部对象”的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="RATUG4172"></a><div class="props_rev_3"><a id="GUID-91CE0855-A551-4585-B4FC-7CCDEB813882" name="GUID-91CE0855-A551-4585-B4FC-7CCDEB813882"></a><h3 id="RATUG-GUID-91CE0855-A551-4585-B4FC-7CCDEB813882" class="sect3"><span class="enumeration_section">13.4</span>使用SQL Performance Analyzer报告</h3>
               <div>
                  <p>使用SQL Performance Analyzer报告将工作负载重放中的SQL调优集与工作负载捕获中的另一个SQL调优集或两个工作负载重放中的两个SQL调优集进行比较。</p>
                  <p>将SQL调优集与数据库重放进行比较提供了比SQL性能分析器测试执行更多的信息，因为它考虑并显示了每个SQL语句的所有执行计划，而SQL性能分析器测试执行仅为每个SQL语句为每个SQL语句生成一个执行计划。</p>
               </div><a id="RATUG314"></a><div class="props_rev_3"><a id="GUID-F711BF47-3898-4A8A-A210-FD87866659F4" name="GUID-F711BF47-3898-4A8A-A210-FD87866659F4"></a><h4 id="RATUG-GUID-F711BF47-3898-4A8A-A210-FD87866659F4" class="sect4"><span class="enumeration_section">13.4.1</span>使用API生成SQL Performance Analyzer报告</h4>
                  <div>
                     <p>本节介绍如何使用<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包生成SQL Performance Analyzer报告。
                     </p>
                     <div class="section">
                        <p>要生成SQL Performance Analyzer报告，请使用<code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <a id="d27884e3447" class="indexterm-anchor"></a> <code class="codeph">COMPARE_SQLSET_REPORT</code>程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_WORKLOAD_REPLAY.COMPARE_SQLSET_REPORT（replay_id1 =&gt; 12，replay_id2 =&gt; 17，format =&gt; DBMS_WORKLOAD_CAPTURE.TYPE_HTML，result =&gt;：report_bind）;结束; /</pre><p>在此示例中， <code class="codeph">COMPARE_SQLSET_REPORT</code>过程以HTML格式生成SQL性能分析器报告，该报告将工作负载重放期间捕获的SQL调整集与重放ID 12与在工作负载重放期间捕获的ID调整为12的SQL调整集进行比较。
                        </p>
                        <p>此示例中的<code class="codeph">COMPARE_SQLSET_REPORT</code>过程使用以下参数：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">replay_id1</code>参数指定更改后将为其生成报告的工作负载重放的数字标识符。此参数是必需的。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">replay_id2</code>参数指定更改后的工作负载重放的数字标识符，将为其生成报告。如果未指定，将与工作负载捕获执行比较。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">format</code>参数指定报告格式。有效值包括<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_HTML</code>为HTML， <code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_XML</code> for XML，以及<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_TEXT</code>用于文本。此参数是必需的。
                              </p>
                           </li>
                           <li>
                              <p>result参数指定报告的输出。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-F711BF47-3898-4A8A-A210-FD87866659F4__GUID-4ADDF98C-E2DA-498B-BD65-F63EC477AA02">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="comparing-sql-trials.html#GUID-1B56ACA0-7C76-4963-B645-E90FB1968840" title="SQL Performance Analyzer报告分为以下几个部分：">查看命令行中的SQL性能分析器报告</a> ”，</span>以获取有关如何解释SQL Performance Analyzer报告的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包的信息，请<code class="codeph">DBMS_WORKLOAD_REPLAY</code> <a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
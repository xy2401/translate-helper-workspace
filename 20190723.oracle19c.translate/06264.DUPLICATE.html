<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>重复</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DROP-DATABASE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="EXECUTE-SCRIPT.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference"></meta>
    <meta name="dcterms.isVersionOf" content="RCMRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DROP-DATABASE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="EXECUTE-SCRIPT.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-at-sign-to-quit.html" property="item" typeof="WebPage"><span property="name">RMAN命令：@（at符号）到QUIT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">重复</li>
            </ol>
            <a id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4" name="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4"></a><a id="RCMRF90149"></a><a id="RCMRF90150"></a><a id="RCMRF90151"></a><a id="RCMRF90152"></a><a id="RCMRF90153"></a><a id="RCMRF90154"></a><a id="RCMRF90155"></a><a id="RCMRF90156"></a><a id="RCMRF90611"></a><a id="RCMRF90157"></a><a id="RCMRF90158"></a><a id="RCMRF90159"></a><a id="RCMRF90160"></a><a id="RCMRF90162"></a><a id="RCMRF90163"></a><a id="RCMRF90164"></a><a id="RCMRF90165"></a><a id="RCMRF90166"></a><a id="RCMRF90167"></a><a id="RCMRF90168"></a><a id="RCMRF90169"></a><a id="RCMRF90170"></a><a id="RCMRF90171"></a><a id="RCMRF89957"></a><a id="RCMRF89958"></a><a id="RCMRF90172"></a><a id="RCMRF90173"></a><a id="RCMRF90507"></a><a id="RCMRF90508"></a><a id="RCMRF90612"></a><a id="RCMRF126"></a>
            
            <h2 id="RCMRF-GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4" class="sect2"><span class="enumeration_section">2.20</span> DUPLICATE</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-C24A1328-6FC4-4297-9F02-A92D018B136D">目的</p>
                  <p>使用<code class="codeph">DUPLICATE</code>命令创建<span class="bold">源数据库</span>的副本。RMAN可以创建以下类型的数据库之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><strong class="term">重复数据库</strong> ，它是具有唯一DBID的源数据库（或源数据库的子集）的副本。由于重复数据库具有唯一的DBID，因此它独立于源数据库，并且可以在同一恢复目录中注册。通常，重复数据库用于测试。
                        </p>
                     </li>
                     <li>
                        <p><strong class="term">备用数据库</strong> ，它是源数据库的特殊副本（在Data Guard环境中称为<span class="bold">主数据库</span> ），通过应用主数据库中的重做数据进行更新。未为备用数据库分配新的DBID。</p>
                     </li>
                  </ul>
                  <p>RMAN可以在以下任何支持的模式下执行复制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">主动复制</span> 
                        </p>
                        <p>RMAN直接从打开或装入的数据库复制文件。</p>
                        <p>主动复制可以使用映像副本或备份集。备份集具有多种优势，包括未使用的块压缩和加密。</p>
                     </li>
                     <li>
                        <p><span class="bold">没有目标连接的基于备份的复制</span> 
                        </p>
                        <p>RMAN从预先存在的RMAN备份和副本创建重复文件。必须使用<code class="codeph">DATABASE</code>子句发出<code class="codeph">DUPLICATE</code>命令。此表单需要连接到辅助实例和恢复目录。
                        </p>
                        <p>当目标数据库不可用或不希望与其建立连接时（根据安全策略限制或防火墙的要求），此模式非常有用。</p>
                     </li>
                     <li>
                        <p><span class="bold">基于备份的目标连接复制</span> 
                        </p>
                        <p>RMAN从预先存在的RMAN备份和副本创建重复文件。</p>
                     </li>
                     <li>
                        <p><span class="bold">基于备份的复制，无需连接到目标或恢复目录</span></p>
                        <p>RMAN从RMAN备份创建重复文件，并将副本放置在指定的<code class="codeph">BACKUP LOCATION.</code></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-AC041076-26AC-4A67-A46C-81C07DA69A29">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../bradv/rman-duplicating-databases.html#BRADV-GUID-F31F9FCE-B610-49EB-B9DB-44B9AA4E838F" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，了解如何使用<code class="codeph">DUPLICATE</code>命令创建重复数据库</p>
                        </li>
                        <li>
                           <p><a href="../sbydb/creating-oracle-data-guard-physical-standby.html#SBYDB00200" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a> ，了解如何创建，管理和备份备用数据库</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-8F4FAD6D-C4E9-4435-81A6-7FC168BB050E">其他主题</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDEDFFH">先决条件</a></p>
                     </li>
                     <li>
                        <p><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHJJGI">使用说明</a></p>
                     </li>
                     <li>
                        <p><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDFIGHC">句法</a></p>
                     </li>
                     <li>
                        <p><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDEHIGF">语义</a></p>
                     </li>
                     <li>
                        <p><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__I104404">例子</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDEDFFH">
                  <p class="subhead1" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-CB1EAA3C-C305-4338-A932-6B7060519F76">先决条件</p>
                  <p>先决条件因重复类型而异。</p>
                  <div class="infoboxnotealso" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-97587436-043F-4A25-9C5A-EE5AF7AFADAC">
                     <p class="notep1">也可以看看：</p>
                     <p>有关RMAN客户端和辅助实例支持的版本的信息，请参阅<a href="rman-compatibility.html#GUID-7D5B70B1-D585-4C89-9080-E2FFC355FD8F" title="RMAN兼容性有一定的规则。">RMAN Compatibility Matrix</a> 。
                     </p>
                  </div>
                  <p><span class="bold">所有复制形式的共同先决条件</span></p>
                  <p>必须将RMAN作为<code class="codeph">AUXILIARY</code>连接到重复数据库的实例。重复数据库的<span class="bold">实例</span>称为<span class="bold">辅助实例</span> 。必须使用<code class="codeph">NOMOUNT</code>选项启动辅助实例。
                  </p>
                  <p><span class="bold">源主机</span>是源数据库所在的数据库。<span class="bold">目标主机</span>是您要在其上创建重复数据库的主机。如果要在源主机上创建重复数据库，请设置<a id="d43747e317" class="indexterm-anchor"></a><a id="d43747e319" class="indexterm-anchor"></a> <code class="codeph">CONTROL_FILES</code>初始化参数相应，以便<code class="codeph">DUPLICATE</code>命令不会生成错误，因为源控件文件正在使用中。此外，适当地设置所有* <code class="codeph">_DEST</code>或其他相关的初始化参数，以便重复的数据库文件不会覆盖源数据库文件。
                  </p>
                  <p><a id="d43747e334" class="indexterm-anchor"></a><a id="d43747e338" class="indexterm-anchor"></a>通常，源数据库和重复数据库必须位于同一平台上;但是支持一些跨平台复制。对于<code class="codeph">DUPLICATE</code> ，同一平台的32位和64位版本被视为同一平台。例如，Linux IA（32位）被认为是与Linux IA（64位）相同的平台。但是，在32位和64位平台之间复制数据库之后，必须运行<a id="d43747e346" class="indexterm-anchor"></a><a id="d43747e348" class="indexterm-anchor"></a> <code class="codeph">utlirp.sql</code>脚本将PL / SQL代码转换为新格式。此脚本位于Linux和UNIX平台上的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/rdbms/admin</code> 。
                  </p>
                  <div class="infoboxnote" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-8F62BC2C-E086-48D0-B23D-05E8686A935E">
                     <p class="notep1">注意：</p>
                     <p>在某些情况下，源数据库和重复数据库可以位于不同的平台上。有关<code class="codeph">DUPLICATE</code>命令的混合平台支持的更多信息，请参阅<a href="https://support.oracle.com/rs?type=doc&amp;id=1079563.1" target="_blank"><code class="codeph">https://support.oracle.com/rs?type=doc&amp;id=1079563.1</code></a>上的My Oracle Support说明1079563.1。</p>
                  </div>
                  <p><code class="codeph">DUPLICATE</code>命令需要一个或多个辅助通道。这些通道在辅助数据库实例上执行复制工作。在以下情况下，RMAN使用源数据库中的通道配置作为辅助通道：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您尚未使用<code class="codeph"><a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE">ALLOCATE CHANNEL</a></code>手动分配辅助通道。
                        </p>
                     </li>
                     <li>
                        <p>您尚未使用<code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code>配置辅助通道。
                        </p>
                     </li>
                  </ul>
                  <p>如果已将自动目标通道配置为使用<code class="codeph">CONNECT</code>字符串，则RMAN会尝试在辅助实例上复制通道分配。但是，如果必须控制或更改重复的通道分配，则手动分配辅助通道。
                  </p>
                  <p>如果<a id="d43747e399" class="indexterm-anchor"></a><a id="d43747e401" class="indexterm-anchor"></a> <code class="codeph">COMPATIBLE</code>初始化参数设置为大于或等于11.0.0，然后默认情况下RMAN复制可传输的表空间，这些表空间在传输后未进行读/写。否则，RMAN无法复制<a id="d43747e408" class="indexterm-anchor"></a>可传输的表空间，除非它们在传输后已被读/写。
                  </p>
                  <p></p>
                  <p>要复制CDB，源CDB和辅助实例的<code class="codeph">COMPATIBLE</code>初始化参数必须为12.2.0或更高。要将PDB复制到新CDB，源CDB和辅助实例的<code class="codeph">COMPATIBLE</code>初始化参数必须为12.2.0或更高。要将PDB复制到现有CDB，源CDB和目标CDB的<code class="codeph">COMPATIBLE</code>初始化参数必须为18.0.0或更高。
                  </p>
                  <p>您必须配置静态侦听器以执行复制。</p>
                  <p><a id="d43747e428" class="indexterm-anchor"></a><a id="d43747e432" class="indexterm-anchor"></a><a id="d43747e434" class="indexterm-anchor"></a><a id="d43747e436" class="indexterm-anchor"></a><a id="d43747e438" class="indexterm-anchor"></a>以下数据库加密功能使用Oracle软件密钥库：透明数据加密（TDE），它在列级别运行，以及表空间加密。如果要复制加密的表空间，则必须手动将Oracle密钥库复制到重复的数据库。必要时，RMAN可以打开自动登录密钥库。使用基于密码的Oracle密钥库时，必须使用<code class="codeph">SET DECRYPTION WALLET OPEN IDENTIFIED BY</code>命令指定打开Oracle密钥库所需的密码。
                  </p>
                  <div class="infoboxnotealso" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-A566D8FF-4B0C-4A77-9711-2ED7B1891A43">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../asoag/introduction-to-transparent-data-encryption.html#ASOAG10139" target="_blank"><span class="italic">Oracle数据库高级安全指南</span></a>了解TDE</p>
                  </div>
                  <p><span class="bold">特定于基于备份的复制的先决条件</span></p>
                  <p>如<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__BABEDFJI" title="两种基于备份的复制模式的要求">表2-6</a>所示，基于备份的复制的先决条件取决于RMAN是否作为<code class="codeph">TARGET</code>连接到源数据库。
                  </p>
                  <div class="tblformalwide" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__BABEDFJI">
                     <p class="titleintable">表2-6三种基于备份的复制方式的先决条件</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="三种基于备份的复制模式的先决条件" width="100%" border="1" summary="Requirements for Two Modes of Backup-Based Duplication" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="57%" id="d43747e476">条件</th>
                              <th align="left" valign="bottom" width="14%" id="d43747e479">没有目标和没有恢复连接</th>
                              <th align="left" valign="bottom" width="14%" id="d43747e482">没有目标连接</th>
                              <th align="left" valign="bottom" width="14%" id="d43747e485">目标连接</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="57%" id="d43747e490" headers="d43747e476 ">
                                 <p>RMAN需要连接到恢复目录。</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e490 d43747e479 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e490 d43747e482 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e490 d43747e485 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="57%" id="d43747e503" headers="d43747e476 ">
                                 <p>用于创建和恢复重复数据库的所有备份和归档重做日志文件必须可由目标主机上的服务器会话访问。</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e503 d43747e479 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e503 d43747e482 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e503 d43747e485 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="57%" id="d43747e516" headers="d43747e476 ">
                                 <p>如果目标主机与源主机不同，则必须在源主机的磁盘上使用与源数据库中相同的完整路径名对目标主机可用的备份进行备份。</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e516 d43747e479 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e516 d43747e482 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e516 d43747e485 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="57%" id="d43747e529" headers="d43747e476 ">
                                 <p>您必须使用<code class="codeph">DATABASE</code>子句提供源数据库的名称。如果源数据库的名称在恢复目录中不唯一，则还必须在<code class="codeph">DATABASE</code>子句中提供数据库ID（DBID）。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e529 d43747e479 ">
                                 <p>如果<code class="codeph">BACKUP LOCATION</code>没有来自多个数据库的备份，则为否。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e529 d43747e482 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e529 d43747e485 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="57%" id="d43747e551" headers="d43747e476 ">
                                 <p>必须在当前的版本中指定<code class="codeph">UNTIL</code>子句。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e551 d43747e479 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e551 d43747e482 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e551 d43747e485 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="57%" id="d43747e566" headers="d43747e476 ">
                                 <p><code class="codeph">NOREDO</code>时必须指定RMAN必须防止归档重做日志文件备份应用程序（见说明<code class="codeph">NOREDO</code>了解更多信息）。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e566 d43747e479 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e566 d43747e482 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e566 d43747e485 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="57%" id="d43747e584" headers="d43747e476 ">
                                 <p>如果复制表空间的子集，并且源数据库未打开，则必须在<code class="codeph">UNDO TABLESPACE</code>子句中列出具有还原段的任何重复表空间。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e584 d43747e479 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e584 d43747e482 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e584 d43747e485 ">
                                 <p>是（如果没有使用目录且目标未打开）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="57%" id="d43747e600" headers="d43747e476 ">
                                 <p>RMAN自动强制执行以下规则：表空间集必须是自包含的，并且不得包含<code class="codeph">SYS</code>拥有的数据库对象。</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e600 d43747e479 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e600 d43747e482 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d43747e600 d43747e485 ">
                                 <p>是</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDBCJFA"><span class="bold">特定于活动数据库复制的先决条件</span></p>
                  <p>使用<code class="codeph">FROM ACTIVE DATABASE</code>执行<code class="codeph">DUPLICATE</code>时，至少需要一个正常目标通道和至少一个<code class="codeph">AUXILIARY</code>通道。如果您未配置或预分配通道，RMAN默认会分配必要的通道。如果为备份集配置或手动分配主动复制的通道，请确保辅助通道的数量大于或等于目标通道的数量。
                  </p>
                  <p>将RMAN作为<code class="codeph">TARGET</code>连接到源数据库时，即使RMAN使用操作系统身份验证，也必须指定用户名和密码。与辅助实例的连接必须使用与源数据库连接相同的用户名和密码。必须安装或打开源数据库。如果源数据库已打开，则必须启用存档。如果源数据库未打开，则必须始终关闭它。
                  </p>
                  <p>将RMAN连接到辅助实例时，以下规则适用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在与辅助实例相同的主机上运行RMAN时，如果使用用户名和密码进行连接，并且<code class="codeph">DUPLICATE</code>命令不包含<code class="codeph">PASSWORD FILE</code>子句，则可以在本地连接而不使用网络服务名称。连接用户必须具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限。
                        </p>
                     </li>
                     <li>
                        <p>远程连接或在<code class="codeph">DUPLICATE</code>命令中使用<code class="codeph">PASSWORD FILE</code>子句时，必须使用网络服务名称进行连接。您必须首先为辅助实例创建密码文件。
                        </p>
                     </li>
                  </ul>
                  <p>源数据库和辅助实例必须使用相同的<code class="codeph">SYS</code>和<a id="d43747e667" class="indexterm-anchor"></a> <code class="codeph">SYSBACKUP</code>密码，表示两个实例都必须具有密码文件。对于<code class="codeph">SYS</code>和<code class="codeph">SYSBACKUP</code>用户，密码文件必须至少包含两个密码。您可以启动辅助实例并启用源数据库以连接到它。
                  </p>
                  <p><code class="codeph">DUPLICATE</code>行为<a id="d43747e685" class="indexterm-anchor"></a><a id="d43747e689" class="indexterm-anchor"></a>密码文件取决于您的重复数据库是否将充当备用数据库。如果创建的重复数据库不是备用数据库，则默认情况下RMAN不会复制密码文件。您可以指定<code class="codeph">PASSWORD FILE</code>选项以指示RMAN可以覆盖辅助实例上的现有密码文件。如果创建备用数据库，则RMAN默认将密码文件复制到备用主机，覆盖现有密码文件。在这种情况下， <code class="codeph">PASSWORD FILE</code>子句不是必需的。
                  </p>
                  <p>执行活动数据库复制时，不能使用<code class="codeph">UNTIL</code>子句。RMAN根据在线数据文件完全复制的时间选择时间，以便可以将数据文件恢复到一致的时间点。
                  </p>
                  <div class="infoboxnotealso" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-94B7AF61-B794-473E-84AC-2F177F71E8FA">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../dbseg/configuring-authentication.html#DBSEG0032" target="_blank"><span class="italic">Oracle数据库安全指南</span></a>了解密码保护</p>
                  </div>
                  <p></p>
                  <p><span class="bold">将PDB复制到现有CDB的先决条件</span></p>
                  <p>除了活动数据库复制的先决条件之外，还适用以下先决条件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>源CDB和目标CDB上的<code class="codeph">COMPATIBLE</code>初始化参数必须设置为18.0.0或更高</p>
                     </li>
                     <li>
                        <p>源CDB和辅助（复制）CDB必须使用本地撤消</p>
                     </li>
                     <li>
                        <p>复制的PDB必须处于只读或读写模式</p>
                     </li>
                     <li>
                        <p>要复制PDB的目标CDB必须以读写模式打开</p>
                     </li>
                     <li>
                        <p>目标CDB必须使用服务器参数文件（spfile）</p>
                     </li>
                     <li>
                        <p>必须在目标CDB上设置初始化参数<code class="codeph">REMOTE_RECOVERY_FILE_DEST</code></p>
                     </li>
                     <li>
                        <p>RMAN必须连接到辅助（重复）CDB的根目录</p>
                     </li>
                  </ul>
                  <p></p>
                  <p><span class="bold">使用加密执行复制的先决条件</span></p>
                  <p>除了特定于正在使用的复制形式的先决条件之外，在使用<code class="codeph">AS ENCRYPTED</code>或<code class="codeph">AS DECRYPTED</code>子句时，以下先决条件也适用。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">COMPATIBLE</code>初始化参数必须设置为18.0.0或更高</p>
                     </li>
                     <li>
                        <p>必须使用<code class="codeph">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY</code>命令至少将主密钥设置一次。
                        </p>
                     </li>
                     <li>
                        <p>用于加密源数据库上的数据库，CDB或表空间的Oracle密钥库必须复制到复制/辅助数据库，然后打开。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHJJGI">
                  <p class="subhead1" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-B9AF567F-8EEA-4B7C-BD08-C51A1A144E7D">使用说明</p>
                  <p>复制整个多租户容器数据库（CDB）或一个或多个可插拔数据库（PDB）时，必须将辅助实例创建为CDB，并且必须连接到目标和辅助实例的根。要将辅助实例创建为CDB，请在初始化参数文件中包含声明<code class="codeph">enable_pluggable_database=TRUE</code> 。
                  </p>
                  <p><a id="d43747e784" class="indexterm-anchor"></a><a id="d43747e788" class="indexterm-anchor"></a><a id="d43747e792" class="indexterm-anchor"></a>使用映像副本的活动数据库复制使用辅助网络服务名称将源数据库通过网络复制到目标主机上的辅助实例。相反，在与备份集的活动数据库复制中，辅助实例使用目标实例网络服务名称来检索网络上的源数据库文件。基于备份的复制使用预先存在的RMAN备份和副本。
                  </p>
                  <p><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDIJJHJ" title="标识重复的源数据库文件">表2-7</a>显示了源数据库中的哪些文件是重复的。
                  </p>
                  <div class="tblformal" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDIJJHJ">
                     <p class="titleintable">表2-7重复文件</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="重复的文件" width="100%" border="1" summary="Identifies source database files that are duplicated" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d43747e814">源数据库文件</th>
                              <th align="left" valign="bottom" width="33%" id="d43747e817">活动数据库</th>
                              <th align="left" valign="bottom" width="33%" id="d43747e820">备份为基础</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e825" headers="d43747e814 ">
                                 <p>控制文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e825 d43747e817 ">
                                 <p><code class="codeph">FOR STANDBY</code>指定时从源数据库复制;否则重新创建</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e825 d43747e820 ">
                                 <p>从备份中恢复</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e838" headers="d43747e814 ">
                                 <p>数据文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e838 d43747e817 ">
                                 <p>从源数据库复制（除非使用<code class="codeph">SKIP</code>选项排除）</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e838 d43747e820 ">
                                 <p>从备份恢复（除非使用<code class="codeph">SKIP</code>选项排除）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e854" headers="d43747e814 ">
                                 <p>临时文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e854 d43747e817 ">
                                 <p>重新创建（参见<span class="q">“ <a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHHBIA">临时文件重新创建</a> ”</span> ）</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e854 d43747e820 ">
                                 <p>重新创建（参见<span class="q">“ <a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHHBIA">临时文件重新创建</a> ”</span> ）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e872" headers="d43747e814 ">
                                 <p>在线重做日志文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e872 d43747e817 ">
                                 <p>重新创建</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e872 d43747e820 ">
                                 <p>重新创建</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e882" headers="d43747e814 ">
                                 <p>备用重做日志文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e882 d43747e817 ">
                                 <p>在主数据库上指定和定义<code class="codeph">FOR STANDBY</code>时重新创建</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e882 d43747e820 ">
                                 <p>在主数据库上指定和定义<code class="codeph">FOR STANDBY</code>时重新创建</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e898" headers="d43747e814 ">
                                 <p>存档的重做日志文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e898 d43747e817 ">
                                 <p>从源数据库复制，但仅在复制需要时才复制</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e898 d43747e820 ">
                                 <p>从备份或编目副本中获取，但仅在复制需要时才能获得</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e908" headers="d43747e814 ">
                                 <p>服务器参数文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e908 d43747e817 ">
                                 <p>从源数据库复制（请参阅<span class="italic"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__I1011578">dupOptionList中的</a></span> <code class="codeph">SPFILE</code>子句）</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e908 d43747e820 ">
                                 <p>如果指定了<code class="codeph">SPFILE</code>子句，则从备份还原（请参阅<span class="italic"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__I1011578">dupOptionList</a></span> ）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e932" headers="d43747e814 ">
                                 <p>闪回日志文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e932 d43747e817 ">
                                 <p>没有重新创建</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e932 d43747e820 ">
                                 <p>没有重新创建</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e942" headers="d43747e814 ">
                                 <p>阻止更改跟踪文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e942 d43747e817 ">
                                 <p>没有重新创建</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e942 d43747e820 ">
                                 <p>没有重新创建</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e952" headers="d43747e814 ">
                                 <p>密码文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e952 d43747e817 ">
                                 <p>默认情况下复制备用数据库;对于非备用数据库，仅在指定了<code class="codeph">PASSWORD FILE</code>选项时复制</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e952 d43747e820 ">
                                 <p>没有重新创建</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d43747e965" headers="d43747e814 ">
                                 <p>快速恢复区中的备份和其他文件</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e965 d43747e817 ">
                                 <p>没有复制</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d43747e965 d43747e820 ">
                                 <p>没有复制</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>除非脱机清除或排除，否则所有数据文件都包含在重复数据库中。您可以使用<code class="codeph">SKIP</code>子句排除表空间，也可以仅使用<code class="codeph">DUPLICATE ...包含表空间的子集<code class="codeph">DUPLICATE ...TABLESPACE</code> 。</p>
                  <p>该<a id="d43747e984" class="indexterm-anchor"></a><a id="d43747e988" class="indexterm-anchor"></a>如果您明确定义了快速恢复区域，则在重复数据库或备用数据库上定义快速恢此外，如果在源数据库上定义了快速恢复区域，并且辅助实例使用通过<code class="codeph">DUPLICATE</code>命令复制或还原的服务器参数文件，则在复制或备用数据库上定义快速恢复区域。
                  </p>
                  <p>如果使用活动数据库复制，请参阅<span class="italic"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__I1011578">dupOptionList中</a></span>的<code class="codeph">FROM ACTIVE DATABASE</code>说明以获取用法说明。
                  </p>
                  <p><span class="bold">基于备份的复制</span></p>
                  <p><a id="d43747e1009" class="indexterm-anchor"></a>在基于备份的数据库复制中，与目标数据库连接并在<a id="d43747e1014" class="indexterm-anchor"></a> <code class="codeph">NOARCHIVELOG</code>模式，介质恢复使用<code class="codeph">NOREDO</code>选项。因此，如果存在增量备份，则RMAN仅在恢复期间将这些增量备份应用于还原的文件。
                  </p>
                  <p>对于基于备份的数据库复制<a id="d43747e1024" class="indexterm-anchor"></a> <code class="codeph">ARCHIVELOG</code>模式下，RMAN默认恢复到执行命令时生成的最后一个归档重做日志，或直到使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">UNTIL</code>子句指定的时间。
                  </p>
                  <p>对于没有连接到目标数据库的基于备份的数据库复制，RMAN无法确定源数据库是否处于<code class="codeph">NOARCHIVELOG</code>模式。因此，在进行备份时源数据库处于<code class="codeph">NOARCHIVELOG</code>模式时，必须使用<code class="codeph">NOREDO</code>选项。如果不希望将归档重做日志文件应用于一致备份，也可以使用<code class="codeph">NOREDO</code>选项。
                  </p>
                  <p>如果使用基于备份的复制，并且源数据库和辅助实例驻留在不同的主机上，则必须确定如何使源数据库的备份可用于辅助实例。有关如何使用<code class="codeph">BACKUP LOCATION</code>执行此操作的详细信息，请查看<span class="q">“ <a href="../bradv/rman-duplicating-databases.html#BRADV-GUID-28AA671E-C024-4DAD-B75A-6BD903C7E84A" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ”中</span>描述的选项。
                  </p>
                  <p>如果目标数据库未在ASM存储中使用恢复区域，则在执行<code class="codeph">DUPLICATE</code>命令之前执行以下任务之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果您正在使用SBT备份，请使用目标主机可访问的备份制作磁带。</p>
                     </li>
                     <li>
                        <p>如果使用磁盘备份，并且可以在目标主机上使用与源主机相同的备份目录名称，请执行以下操作之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>手动将备份和副本从源主机传输到目标主机到相同的路径。</p>
                           </li>
                           <li>
                              <p>使用NFS或共享磁盘，并确保在目标主机中可以访问相同的路径。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>如果使用磁盘备份，并且<span class="italic">无法</span>在目标主机上使用与源主机相同的备份目录名称，请使用“ <a href="../bradv/rman-duplicating-databases.html#BRADV-GUID-28AA671E-C024-4DAD-B75A-6BD903C7E84A" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”中</span></a>介绍的技术。
                        </p>
                     </li>
                  </ul>
                  <p>如果源数据库使用了恢复区域<a id="d43747e1096" class="indexterm-anchor"></a> ASM存储，然后在执行<code class="codeph">DUPLICATE</code>命令之前执行以下任务之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将数据库备份到快速恢复区域之外的位置。您可以通过以下方式访问此备份：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用NFS在目标主机上以相同名称装载备份。</p>
                           </li>
                           <li>
                              <p>使用NFS在目标主机上使用其他名称装载备份，然后在将RMAN作为<code class="codeph">TARGET</code>连接到源数据库时将备份<code class="codeph"><a href="CATALOG.html#GUID-6E337759-9860-463A-BF7C-8512B272B8E1">CATALOG</a></code> 。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>将快速恢复区备份到磁带并将其用于复制。</p>
                     </li>
                  </ul>
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDECBFJ"><span class="bold">与Oracle托管文件重复</span></p>
                  <p>如果源数据库文件在<a id="d43747e1131" class="indexterm-anchor"></a><a id="d43747e1133" class="indexterm-anchor"></a> Oracle Managed Files（OMF）格式，则无法使用<a id="d43747e1136" class="indexterm-anchor"></a><a id="d43747e1138" class="indexterm-anchor"></a> <code class="codeph">DB_FILE_NAME_CONVERT</code>和<code class="codeph">LOG_FILE_NAME_CONVERT</code> <a id="d43747e1147" class="indexterm-anchor"></a><a id="d43747e1149" class="indexterm-anchor"></a>初始化参数或<span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="fileNameConversionSpec.html#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3">fileNameConversionSpec</a></span></code></span>子句为重复数据库生成新的OMF文件名。如果不遵循此规则，则从这三种方法生成的新OMF文件可能会导致问题。有关OMF名称的更多信息，请参阅“ <span class="italic">Oracle数据库备份和恢复用户指南</span> ”中的“在TSPITR中重命名OMF辅助设置文件时的注意事项<span class="italic">”</span></p>
                  <p>此规则的唯一例外是仅更改ASM磁盘组名称时。假设源数据文件和联机重做日志文件存储在ASM磁盘组<code class="codeph">+SOURCEDSK</code> 。您希望将重复的数据库文件存储在ASM磁盘组<code class="codeph">+DUPDSK</code> 。在这种情况下，您可以按如下方式设置初始化参数：</p><pre class="oac_no_warn" dir="ltr">DB_FILE_NAME_CONVERT =（“+ SOURCEDSK”，“+ DUPDSK”）LOG_FILE_NAME_CONVERT =（“+ SOURCEDSK”，“+ DUPDSK”）</pre><p>RMAN使用<code class="codeph">DB_FILE_NAME_CONVERT</code>或<code class="codeph">LOG_FILE_NAME_CONVERT</code>转换磁盘组名称，然后根据转换的磁盘组名称生成新的有效文件名。
                  </p>
                  <p>当源文件采用Oracle托管文件格式时，您有以下其他支持的命名数据文件选项：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME</code>指定单个数据文件的名称。
                        </p>
                     </li>
                     <li>
                        <p>设置<code class="codeph">DB_FILE_CREATE_DEST</code>以生成新数据库Oracle管理文件的所有数据文件，但使用<code class="codeph">SET NEWNAME</code>的文件除外。如果设置<code class="codeph">DB_FILE_NAME_CONVERT</code> ，请不要设置<code class="codeph">DB_FILE_CREATE_DEST</code> 。</p>
                     </li>
                  </ul>
                  <p>用于命名从Oracle管理的文件复制的联机重做日志的支持选项是<code class="codeph">DB_CREATE_FILE_DEST</code> ， <code class="codeph">DB_RECOVERY_FILE_DEST</code>或<code class="codeph">DB_CREATE_ONLINE_LOG_DEST_</code> <span class="italic"><code class="codeph">n</code></span> 。
                  </p>
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHHBIA"><span class="bold">临时文件重新创建</span></p>
                  <p><code class="codeph">DB_FILE_NAME_CONVERT</code>参数可以转换非Oracle管理文件（OMF）的新数据库的临时文件名。此限制的唯一例外是自动存储管理（ASM）OMF名称，您只能在其中更改磁盘组的名称。
                  </p>
                  <p>转换新数据库的临时文件名的另一种方法是使用<code class="codeph">SET NEWNAME FOR TEMPFILE TO 'filename'</code>或<code class="codeph">TO NEW</code> 。使用后一种方法，无论数据文件是OMF还是非OMF，都会在打开数据库时在<code class="codeph">DB_CREATE_FILE_DEST</code>目录位置重新创建临时文件。
                  </p>
                  <p><a id="d43747e1246" class="indexterm-anchor"></a>要为临时文件指定不同的文件名，请参阅<code class="codeph"><a href="SWITCH.html#GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C">SWITCH</a></code> <code class="codeph">TEMPFILE</code>的讨论。
                  </p>
                  <p><span class="bold">与CDB，PDB和稀疏数据库重复</span></p>
                  <p><code class="codeph">DUPLICATE</code>命令使您可以复制CDB，根和一个或多个PDB。该过程类似于复制非CDB的过程。不同之处在于您必须以授予<code class="codeph">SYSBACKUP</code>或<code class="codeph">SYSDBA</code>权限的用户身份连接到root，并且必须将辅助实例创建为CDB。要复制PDB，请使用带有<code class="codeph">PLUGGABLE DATABASE</code>选项的<code class="codeph">DUPLICATE</code>命令。
                  </p>
                  <p>RMAN还允许您在目标连接模式下使用基于备份的复制来复制稀疏数据库。要复制稀疏数据库，RMAN首先执行隐式还原，然后从所选备份中选择数据文件。</p>
                  <div class="infoboxnotealso" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-AAF89FD2-80B6-4E64-81D5-B848D21E51DF">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">连接</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关复制CDB和PDB的信息，请参见<a href="../bradv/rman-duplicating-databases.html#BRADV-GUID-D95D9275-5882-4D5B-846F-1A03304BC307" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDFIGHC">
                  <p class="subhead1" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-1246E3EF-1F54-47CF-9F63-106712E924BC">句法</p>
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDICDAE"><a id="d43747e1299" class="indexterm-anchor"></a><a id="d43747e1303" class="indexterm-anchor"></a> <span class="bold"><span class="italic">duplicate</span> :: =</span></p>
                  <div class="figure" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-1EAE04BF-BE5B-4547-8A84-2F7E7A909671"><img src="img/duplicate.gif" alt="duplicate.eps的描述如下" title="duplicate.eps的描述如下" longdesc="img_text/duplicate.html"><br><a href="img_text/duplicate.html">说明duplicate.eps的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><span class="bold"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHECDG">dupOptionList :: =</a></span></span> ）</p>
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHECDG"><a id="d43747e1322" class="indexterm-anchor"></a><a id="d43747e1326" class="indexterm-anchor"></a> <span class="bold"><span class="italic">dupOptionList</span> :: =</span></p>
                  <div class="figure" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-9E4B7775-A057-41FA-838D-7B54BABF6092"><img src="img/dupoptionlist.gif" alt="dupoptionlist.eps的描述如下" title="dupoptionlist.eps的描述如下" longdesc="img_text/dupoptionlist.html"><br><a href="img_text/dupoptionlist.html">说明dupoptionlist.eps的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier :: =</a></span> ， <span class="italic"><a href="fileNameConversionSpec.html#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__BABBJGBH">fileNameConversionSpec :: =</a></span> ， <span class="italic"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDIGIJD">logSpec :: =</a></span> ， <span class="italic"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDIGEDI">setParameter :: =</a></span> ， <span class="italic"><a href="sizeSpec.html#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577__BABHAICB">sizeSpec :: =</a></span> ， <span class="italic"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABEDABD">untilClause :: =</a></span> ）</p>
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDIGEDI"><a id="d43747e1365" class="indexterm-anchor"></a><a id="d43747e1369" class="indexterm-anchor"></a> <span class="bold"><span class="italic">setParameter</span> :: =</span></p>
                  <div class="figure" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-109DF395-3D9F-485D-B285-989E41F6FE11"><img src="img/setparameter.gif" alt="下面是setparameter.eps的描述" title="下面是setparameter.eps的描述" longdesc="img_text/setparameter.html"><br><a href="img_text/setparameter.html">插图描述setparameter.eps</a></div>
                  <!-- class="figure" -->
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDIGIJD"><a id="d43747e1381" class="indexterm-anchor"></a><a id="d43747e1385" class="indexterm-anchor"></a> <span class="bold"><span class="italic">logSpec</span> :: =</span></p>
                  <div class="figure" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-6A126C38-2FE1-454C-8D07-119C82B95F85"><img src="img/logspec.gif" alt="logspec.eps的描述如下" title="logspec.eps的描述如下" longdesc="img_text/logspec.html"><br><a href="img_text/logspec.html">说明logspec.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="sizeSpec.html#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577__BABHAICB">sizeSpec :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDEHIGF">
                  <p class="subhead1" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-9D8B17EF-C61F-4E15-BE76-970E3DB69023">语义</p>
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__I1018642"><span class="bold"><span class="italic">重复</span></span></p>
                  <p>此子句使您可以复制数据库或表空间。有关语法，请参阅<span class="italic"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDICDAE">duplicate :: =</a></span> diagram。
                  </p>
                  <div class="tblformalwide" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-F425BC06-C9C6-4971-B664-528D236F86A1">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes DUPLICATE command parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d43747e1424">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d43747e1427">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1432" headers="d43747e1424 ">
                                 <p><code class="codeph">目标数据库</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1432 d43747e1427 ">
                                 <p>指定源数据库，即要复制的数据库。从Oracle Database <span class="italic">11g</span>第2版开始， <code class="codeph">TARGET</code>关键字是可选的。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1446" headers="d43747e1424 ">
                                 <p><code class="codeph">数据库</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1446 d43747e1427 ">
                                 <p>指定源数据库。</p>
                                 <p>在CDB中， <a id="d43747e1455" class="indexterm-anchor"></a><a id="d43747e1459" class="indexterm-anchor"></a>指定整个CDB。指定连接到PDB时的PDB。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1465" headers="d43747e1424 ">
                                 <p><span class="italic"><code class="codeph">'数据库名称'</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1465 d43747e1427 ">
                                 <p>指定源数据库的名称，该数据库是要复制的数据库。</p>
                                 <p>当RMAN作为<code class="codeph">TARGET</code>连接到源数据库时，可以使用此子句代替<code class="codeph">TARGET DATABASE</code> 。使用目标连接执行复制时，必须指定当前连接的数据库，而不使用<code class="codeph">INCARNATION</code>子句。
                                 </p>
                                 <p>对于没有目标连接的基于备份的复制，您必须指定数据库名称或运行<code class="codeph">SET DATABASE</code> <span class="italic">'</span>命令。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1493" headers="d43747e1424 ">
                                 <p><code class="codeph">DBID</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1493 d43747e1427 ">
                                 <p>指定源数据库的数据库ID（DBID）。</p>
                                 <p>如果复制时没有与源数据库的<code class="codeph">TARGET</code>连接，并且恢复目录中的数据库名称不唯一，则需要<code class="codeph">DBID</code>参数。另一种选择是使用<code class="codeph">SET DBID</code>命令。
                                 </p>
                                 <p>当RMAN在作为<code class="codeph">TARGET</code>连接到源数据库时复制数据库时，不需要<code class="codeph">DBID</code>参数。如果指定<code class="codeph">DBID</code> ，则将该值设置为与源数据库的<code class="codeph">DBID</code>匹配。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1529" headers="d43747e1424 ">
                                 <p><a id="d43747e1531" class="indexterm-anchor"></a> <code class="codeph">INCARNATION</code> <span class="italic"><code class="codeph">primaryKey</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1529 d43747e1427 ">
                                 <p>指定孤儿化身。</p>
                                 <p>默认情况下，带有<code class="codeph">UNTIL</code>子句的<code class="codeph">DUPLICATE</code>命令指的是当前数据库化身中的某个时间点或当前化身的直接祖先。此子句使您可以指定不在当前化身路径中的化身，称为孤儿化身。连接到目标数据库或使用<code class="codeph">BACKUP LOCATION</code>时指定<code class="codeph">INCARNATION</code>无效。</p>
                                 <p>另一种选择是使用<code class="codeph">SET INCARNATION</code>命令。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1565" headers="d43747e1424 ">
                                 <p><code class="codeph">[TARGET] PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1565 d43747e1427 ">
                                 <p></p>
                                 <p>指定源PDB，即要复制到现有CDB的PDB。</p>
                                 <p>您必须以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的公共用户身份连接到root用户。
                                 </p>
                                 <p><span class="bold">注意：</span>使用此选项时仅支持活动复制。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1590" headers="d43747e1424 ">
                                 <p> <code class="codeph">     </code> <code class="codeph">AS</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1590 d43747e1427 ">
                                 <p></p>
                                 <p>在将PDB复制到现有CDB时，指定目标CDB中PDB的名称。如果目标CDB中存在具有指定名称的PDB，则该命令将失败。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1605" headers="d43747e1424 ">
                                 <p><code class="codeph">为FARSYNC</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1605 d43747e1427 ">
                                 <p>创建Oracle Data Guard远程同步实例。您可以使用活动数据库复制或基于备份的复制来创建远程同步实例。</p>
                                 <p>此选项不适用于<code class="codeph">DORECOVER</code>并导致错误消息。
                                 </p>
                                 <p>请参阅<a href="../sbydb/creating-oracle-data-guard-far-sync-instance.html#SBYDB-GUID-8AD7FBA2-42B0-46CF-852B-1AF0CB4A36E8" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1626" headers="d43747e1424 ">
                                 <p><code class="codeph">对于待机</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1626 d43747e1427 ">
                                 <p>指定要复制为备用数据库的数据库（请参见<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDDFDGH">示例2-92</a> ）。
                                 </p>
                                 <p>要使用<code class="codeph">DUPLICATE</code>命令创建备用数据库，必须指定<code class="codeph">FOR STANDBY</code>选项。<code class="codeph">DUPLICATE ...FOR STANDBY</code>命令通过还原备用控制文件并挂载备用控制文件来创建备用数据库。如果指定<code class="codeph">FROM ACTIVE DATABASE</code> ，则RMAN会将数据文件从主数据库复制到备用数据库。否则，RMAN将源数据库数据文件的备份还原到备用数据库。除非指定了<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">UNTIL</code> ，否则RMAN将恢复最新的文件。
                                 </p>
                                 <p>如果要复制SPFILE，请在<code class="codeph">SPFILE</code>子句中指定唯一的<code class="codeph">DB_UNIQUE_NAME</code> 。如果不是，则手动将此参数设置为辅助实例的PFILE或SPFILE中的唯一值。
                                 </p>
                                 <p>您不能将<code class="codeph">TO</code> <span class="italic"><code class="codeph">database_name</code></span>用于备用数据库。
                                 </p>
                                 <p>如果指定<code class="codeph">DORECOVER</code> ，则RMAN也会恢复数据库。备份数据库在复制完成后仍保持挂载状态。
                                 </p>
                                 <p>您无法使用<code class="codeph">SET NEWNAME</code>或<code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">AUXNAME</code>转换备用数据库上联机重做日志的文件名。
                                 </p>
                                 <p>您无法将RMAN <code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code>到备用数据库，然后使用<code class="codeph">DUPLICATE ...FOR STANDBY</code>创建一个额外的备用数据库。要创建其他备用数据库，请将RMAN连接到原始主数据库并运行<code class="codeph">DUPLICATE ...FOR STANDBY</code> 。</p>
                                 <p><span class="bold">注意：</span> RMAN不支持部分PDB复制。因此，在创建备用数据库时，不能使用<code class="codeph">SKIP TABLESPACE</code> ， <code class="codeph">TABLESPACE</code> ， <code class="codeph">SKIP PLUGGABLE DATABASE</code>和<code class="codeph">PLUGGABLE DATABASE</code>选项。
                                 </p>
                                 <p><span class="bold">注意：</span>虽然可以使用<code class="codeph">DUPLICATE</code>命令创建备用数据库，但不能使用此命令激活备用数据库。
                                 </p>
                                 <p>将RMAN连接到备用数据库和注册主数据库的恢复目录时，RMAN会识别备用数据库并隐式注册它。不要尝试对备用数据库使用<code class="codeph">REGISTER</code>命令。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1735" headers="d43747e1424 ">
                                 <p><code class="codeph">TO</code> <span class="italic"><code class="codeph">database_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1735 d43747e1427 ">
                                 <p>指定将CDB / PDB复制到新CDB或复制非CDB时重复数据库的名称。此重复数据库不是备用数据库，因此该子句不能与<code class="codeph">FOR STANDBY</code>一起使用。</p>
                                 <p></p>
                                 <p>指定在将PDB复制到现有CDB时必须将源PDB复制到的CDB的名称。 CDB必须存在并以读写模式打开。</p>
                                 <p>如果未指定<code class="codeph">SPFILE</code>子句，则指定的数据库名称必须与重复数据库实例的初始化参数文件中的名称匹配，该文件是RMAN作为<code class="codeph">AUXILIARY</code>连接的实例。否则，数据库发出错误信号。
                                 </p>
                                 <p>当重复数据库与源数据库位于同一Oracle主目录中时，不能对源数据库和重复数据库使用相同的数据库名称。但是，如果重复数据库与源数据库位于不同的Oracle主目录中，则其数据库名称必须与其Oracle主目录中的其他数据库名称不同。为简化重复数据库的管理，Oracle建议您对源数据库和重复数据库使用不同的名称。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1762" headers="d43747e1424 ">
                                 <p><code class="codeph">   </code><span class="italic"><code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__I1011578">dupOptionList</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1762 d43747e1427 ">
                                 <p>指定用于创建重复或备用数据库的选项。请参见<span class="italic"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__I1011578">dupOptionList</a></span> 。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__I1011578"><span class="bold"><span class="italic">dupOptionList</span></span></p>
                  <p>本子条款包括控制复制方面的选项，例如命名文件和确定复制的终点。有关语法，请参阅<span class="italic"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHECDG">dupOptionList :: =</a></span>图表。
                  </p>
                  <p>当重复数据库的文件名必须与源数据库的文件名不同时（如目标主机和源主机相同时），为数据文件和联机重做日志指定新文件名或转换源数据库文件名。如果未指定重复数据库的联机重做日志和数据文件的文件名，则RMAN将使用源数据库中的数据文件名。</p>
                  <div class="tblformalwide" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-897244A7-1611-4811-9126-C7A6643DE3C5">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes DUPLICATE command dupOptionList parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d43747e1797">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d43747e1800">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1805" headers="d43747e1797 ">
                                 <p><code class="codeph">作为加密</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1805 d43747e1800 ">
                                 <p></p>
                                 <p>指定在复制未加密的源CDB，PDB或表空间时，必须在目标数据库中加密数据块。</p>
                                 <p>当您要复制不对Oracle Cloud使用加密的内部部署数据库时，这非常有用。使用<code class="codeph">AS ENCRYPTED</code>复制数据库或PDB可确保Oracle Cloud上的PDB已加密。
                                 </p>
                                 <p><span class="bold">注意：</span>必须将<code class="codeph">COMPATIBLE</code>初始化参数设置为18.0.0或更高才能使用此子句。
                                 </p>
                                 <p><span class="bold">注意：</span>您不能将此子句与<code class="codeph">CONTROLFILE</code> ， <code class="codeph">SPFILE</code> ， <code class="codeph">ARCHIVELOG</code> ， <code class="codeph">FOREIGN ARCHIVELOG</code> ， <code class="codeph">DATAFILE</code> ， <code class="codeph">FOREIGN DATAFILE</code>和<code class="codeph">BACKUPSET</code>子句一起使用。
                                 </p>
                                 <div class="p"><span class="bold">注意：</span>以下操作不支持此子句：<ul style="list-style-type:disc">
                                       <li>
                                          <p>创建备用数据库</p>
                                       </li>
                                       <li>
                                          <p>将PDB复制到现有CDB</p>
                                       </li>
                                       <li>
                                          <p>执行时间点恢复</p>
                                       </li>
                                    </ul>
                                 </div>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1866" headers="d43747e1797 ">
                                 <p><code class="codeph">作为解密</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1866 d43747e1800 ">
                                 <p></p>
                                 <p>指定必须复制包含加密表空间或列的源数据库或PDB，并且重复数据库中的数据块未加密。</p>
                                 <p><span class="bold">注意：</span>必须将<code class="codeph">COMPATIBLE</code>初始化参数设置为18.0.0或更高才能使用此子句。
                                 </p>
                                 <p><span class="bold">注意：</span>您不能将此子句与<code class="codeph">CONTROLFILE</code> ， <code class="codeph">SPFILE</code> ， <code class="codeph">ARCHIVELOG</code> ， <code class="codeph">FOREIGN ARCHIVELOG</code> ， <code class="codeph">DATAFILE</code> ， <code class="codeph">FOREIGN DATAFILE</code>和<code class="codeph">BACKUPSET</code>子句一起使用。
                                 </p>
                                 <div class="p"><span class="bold">注意：</span>以下操作不支持此子句：<ul style="list-style-type:disc">
                                       <li>
                                          <p>创建备用数据库</p>
                                       </li>
                                       <li>
                                          <p>将PDB复制到现有CDB</p>
                                       </li>
                                       <li>
                                          <p>执行时间点恢复</p>
                                       </li>
                                    </ul>
                                 </div>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1922" headers="d43747e1797 ">
                                 <p><code class="codeph">BACKUP LOCATION</code> <span class="italic">backup_location</span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1922 d43747e1800 ">
                                 <p>指定磁盘上的备份位置，其中放置了要复制的数据库的备份和副本。此选项对于没有目标或恢复目录连接的复制有效。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1932" headers="d43747e1797 ">
                                 <p><code class="codeph">来自FILE <span class="codeinlineitalic">backup_list_file的</span>备份位置</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1932 d43747e1800 ">
                                 <p></p>
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1942" headers="d43747e1797 ">
                                 <p><code class="codeph">DEVICE TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1942 d43747e1800 ">
                                 <p>仅为指定设备分配自动通道（例如， <code class="codeph">DISK</code>或<code class="codeph">sbt</code> ）。
                                 </p>
                                 <p>仅当您配置了自动通道<span class="italic">且未</span>手动分配通道时，此选项才有效。例如，如果<code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code>自动磁盘和磁带通道，并且运行<code class="codeph">DUPLICATE...DEVICE TYPE DISK</code> ，然后RMAN仅分配磁盘通道。
                                 </p>
                                 <p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e1984" headers="d43747e1797 ">
                                 <p><code class="codeph">DORECOVER</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e1984 d43747e1800 ">
                                 <p>创建后恢复备用数据库。如果指定<span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span> ，则RMAN将恢复到指定的SCN或时间并使数据库挂载。
                                 </p>
                                 <p>介质恢复完成后，RMAN将挂起备用数据库，但不会将备用数据库置于手动或受管恢复模式。在RMAN创建备用数据库之后，必须先解决任何间隙序列，然后再将其置于手动或受管恢复模式，或者以只读模式打开它。</p>
                                 <p>控制文件的检查点SCN必须包含在归档重做日志中，该日志可在备用站点上获得，也可以包含在RMAN备份中。例如，假设您创建备用控制文件，然后立即归档当前日志，其序列为100。在这种情况下，您必须将备用数据库恢复到至少日志序列100，或者数据库发出信号<a id="d43747e2001" class="indexterm-anchor"></a><a id="d43747e2003" class="indexterm-anchor"></a> <code class="codeph">ORA-1152</code>错误消息，因为备用控制文件备份是在该时间点之后进行的。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2011" headers="d43747e1797 ">
                                 <p><span class="italic"><code class="codeph"><a href="fileNameConversionSpec.html#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3">fileNameConversionSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2011 d43747e1800 ">
                                 <p>指定一个或多个模式以将源数据库文件名映射到重复的数据库文件名（请参阅<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDCHBGC">示例2-86</a> ）。
                                 </p>
                                 <p><a id="d43747e2024" class="indexterm-anchor"></a><a id="d43747e2026" class="indexterm-anchor"></a>在<code class="codeph">DUPLICATE</code>命令上设置的<code class="codeph">DB_FILE_NAME_CONVERT</code>会覆盖初始化参数<code class="codeph">DB_FILE_NAME_CONVERT</code> （如果已设置）。例如，如果初始化参数文件设置为<code class="codeph">DB_FILE_NAME_CONVERT=('disk1','disk2')</code> ，但您执行<code class="codeph">DUPLICATE ...DB_FILE_NAME_CONVERT ('disk1','disk3')</code> ，然后RMAN不会将<code class="codeph">disk1</code>子字符串转换为<code class="codeph">disk2</code> 。相反，RMAN将<code class="codeph">disk1</code>子字符串转换为<code class="codeph">disk3</code> 。
                                 </p>
                                 <p>如果规范列表中的文件不受<code class="codeph">DUPLICATE</code>转换参数的影响，则必须通过其他方式重命名，例如<code class="codeph">SET NEWNAME</code> 。</p>
                                 <p><span class="bold">注意：</span>如果指定<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDEAJCC">SPFILE</a>子句，则<code class="codeph">DUPLICATE ...DB_FILE_NAME_CONVERT</code>会覆盖<code class="codeph">SPFILE</code>语法中指定的任何转换参数。例如，如果您指定<code class="codeph">DB_FILE_NAME_CONVERT</code>在两次<code class="codeph">DUPLICATE</code>命令，无论是在<code class="codeph">SPFILE</code>子句和外部的<code class="codeph">SPFILE</code>条款，那么外面设置<code class="codeph">SPFILE</code>条款优先。
                                 </p>
                                 <p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="fileNameConversionSpec.html#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3">fileNameConversionSpec</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2105" headers="d43747e1797 ">
                                 <p><code class="codeph">来自活动数据库</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2105 d43747e1800 ">
                                 <p>直接从源数据库提供重复数据库的文件，而不是从源数据库的备份提供（参见<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDJGCFC">示例2-83</a> ）。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <span class="q">“ <a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDBCJFA">特定于活动数据库复制的</a></span>先决条件<span class="q">”，</span>用于命令先决条件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2123" headers="d43747e1797 ">
                                 <p><code class="codeph">从SPARSE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2123 d43747e1800 ">通过从稀疏数据库内部还原来为重复数据库提供稀疏数据文件。要使用此设置，请确保要复制的数据库的<code class="codeph">COMPATIBLE</code>初始化参数为12.2或更高。
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2133" headers="d43747e1797 ">
                                 <p><code class="codeph">来自NONSPARSE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2133 d43747e1800 ">指定只有非稀疏数据文件必须在内部还原然后重复。此设置将覆盖复制环境的默认稀疏模式。要使用此设置，请确保要复制的数据库的<code class="codeph">COMPATIBLE</code>初始化参数为12.2或更高。此设置不会影响<code class="codeph">DUPLICATE</code>命令的其他选项的行为。
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2146" headers="d43747e1797 ">
                                 <p><code class="codeph">LOGFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2146 d43747e1800 ">
                                 <p>指定在创建非备用数据库的重复数据库时创建联机重做日志的选项（请参阅<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDCHBGC">示例2-86</a> ）。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2157" headers="d43747e1797 ">
                                 <p><code class="codeph">INSTANCE</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">inst_name</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2157 d43747e1800 ">
                                 <p><a id="d43747e2170" class="indexterm-anchor"></a><a id="d43747e2174" class="indexterm-anchor"></a><a id="d43747e2178" class="indexterm-anchor"></a>在Real Applications Cluster（Oracle RAC）数据库中为指定实例创建联机重做日志。实例名称是一个最多80个字符的字符串。
                                 </p>
                                 <p>RMAN自动使用映射到指定实例的线程。如果未指定<code class="codeph">INSTANCE</code>名称，则日志文件用于默认实例。
                                 </p>
                                 <p>使用<code class="codeph">DUPLICATE TARGET DATABASE</code>将Oracle RAC数据库复制到单实例数据库时，此子句是相关的。否则，您不需要使用<code class="codeph">INSTANCE</code> 。如果使用<code class="codeph">LOGFILE</code>子句，则使用<code class="codeph">INSTANCE</code>为在数据库备份期间打开的每个线程（用于基于备份的复制）或在<code class="codeph">UNTIL TIME</code>期间（用于活动数据库复制）指定Oracle RAC实例的名称。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2206" headers="d43747e1797 ">
                                 <p><code class="codeph">   </code><span class="italic"><code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__BGBIHEHG">logSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2206 d43747e1800 ">
                                 <p>指定联机重做日志文件的文件名和组。</p>
                                 <p><span class="bold">另请参阅：</span> <span class="italic"><code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__BGBIHEHG">logSpec</a></code></span>了解有效选项</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2227" headers="d43747e1797 ">
                                 <p><code class="codeph">NOCHECK</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2227 d43747e1800 ">
                                 <p>禁用RMAN能力检查一组表空间必须是自包含的。当执行基于备份的目标连接复制时，RMAN会自动执行此检查。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2235" headers="d43747e1797 ">
                                 <p><code class="codeph">NOFILENAMECHECK</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2235 d43747e1800 ">
                                 <p>当源数据库文件与重复数据库文件共享相同的名称时，阻止RMAN检查源数据库的数据文件和联机重做日志文件是否正在使用。您有责任确定重复操作不会覆盖有用数据。</p>
                                 <p>在具有与源数据库主机相同的磁盘配置，目录结构和文件名的其他主机中创建重复数据库时，此选项是必需的。例如，假设您有一个位于<code class="codeph">srchost</code>的<code class="codeph">/dbs</code>目录中的小型数据库：</p><pre class="oac_no_warn" dir="ltr">/oracle/dbs/system_prod1.dbf /oracle/dbs/users_prod1.dbf /oracle/dbs/rbs_prod1.dbf</pre><p>假设您要将此数据库复制到<code class="codeph">desthost</code> ，它具有相同的文件系统<code class="codeph">/oracle/dbs/</code> <code class="codeph">*</code> ，并且您希望在重复数据库中使用与源数据库中相同的文件名。在这种情况下，请指定<code class="codeph">NOFILENAMECHECK</code>选项以避免出现错误消息。由于RMAN不知道不同的主机，因此RMAN无法自动确定它不需要检查文件名。
                                 </p>
                                 <p>如果在与源数据库相同的主机上复制数据库，请确保未设置<code class="codeph">NOFILENAMECHECK</code> 。否则，RMAN可能会覆盖和损坏目标数据库数据文件，临时文件或联机日志。它也可能表示以下错误：</p><pre class="oac_no_warn" dir="ltr"><a id="d43747e2271" class="indexterm-anchor"></a><a id="d43747e2273" class="indexterm-anchor"></a><a id="d43747e2277" class="indexterm-anchor"></a><a id="d43747e2279" class="indexterm-anchor"></a><a id="d43747e2283" class="indexterm-anchor"></a><a id="d43747e2285" class="indexterm-anchor"></a><a id="d43747e2289" class="indexterm-anchor"></a><a id="d43747e2291" class="indexterm-anchor"></a> RMAN-10035：RPC中引发的异常： <a id="d43747e2296" class="indexterm-anchor"></a><a id="d43747e2298" class="indexterm-anchor"></a> ORA-19504：无法创建文件“/oracle/dbs/tbs_01.f”ORA-27086：skgfglk：无法锁定文件 - 已在使用中SVR4错误：11：资源暂时不可用附加信息：8 RMAN-10031：ORA-在调用DBMS_BACKUP_RESTORE.RESTOREBACKUPPIECE期间发生了19624</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2304" headers="d43747e1797 ">
                                 <p><code class="codeph">NOOPEN</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2304 d43747e1800 ">
                                 <p>指定在创建重复数据库后不得打开它。</p>
                                 <p>默认情况下，RMAN会创建一个重复的数据库，然后以<code class="codeph">RESETLOGS</code>模式打开它。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2317" headers="d43747e1797 ">
                                 <p><code class="codeph">NOREDO</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2317 d43747e1800 ">
                                 <p>在以下任何一种情况下恢复一致备份时，不应用归档重做日志文件：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>即使存档的重做日志文件可用，您也不希望将存档的重做日志文件应用于一致的备份。</p>
                                    </li>
                                    <li>
                                       <p>源数据库在备份时以<code class="codeph">NOARCHIVELOG</code>模式运行， <code class="codeph">DUPLICATE</code>未连接到目标数据库。
                                       </p>
                                    </li>
                                    <li>
                                       <p>源数据库当前正在<code class="codeph">ARCHIVELOG</code>模式下运行，但是当数据库处于<code class="codeph">NOARCHIVELOG</code>模式时进行备份。
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2347" headers="d43747e1797 ">
                                 <p><code class="codeph">NORESUME</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2347 d43747e1800 ">
                                 <p>禁用RMAN从失败的复制操作中自动恢复的功能。在第一次重复调用时使用<code class="codeph">NORESUME</code>永久阻止新数据库的任何后续重复命令使用此自动优化。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <span class="italic">Oracle数据库备份和恢复用户指南，</span>以了解有关从失败的<code class="codeph">DUPLICATE</code>操作中自动恢复的详细信息。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2368" headers="d43747e1797 ">
                                 <p><code class="codeph">开放受限制</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2368 d43747e1800 ">
                                 <p>通过发出以下SQL语句在重复数据库中启用受限会话： <code class="codeph">ALTER SYSTEM ENABLE RESTRICTED SESSION</code> 。 RMAN在打开重复数据库之前立即发出此语句。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2379" headers="d43747e1797 ">
                                 <p><code class="codeph">密码文件</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2379 d43747e1800 ">
                                 <p>使用源数据库上的密码文件覆盖辅助实例当前使用的密码文件（请参阅<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDJGCFC">示例2-83</a> ）。此选项仅在指定<code class="codeph">FROM ACTIVE DATABASE</code>时有效;否则，RMAN发出错误信号。
                                 </p>
                                 <p>如果指定<code class="codeph">FOR STANDBY</code> ，则RMAN默认复制密码文件;如果未指定，则默认情况下RMAN不会复制密码文件。您可以使用<code class="codeph">PASSWORD FILE</code>请求RMAN使用源数据库中的密码文件覆盖现有密码文件。如果希望重复数据库包含生产数据库中可用的所有密码，请使用“ <code class="codeph">PASSWORD FILE</code>选项。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2403" headers="d43747e1797 ">
                                 <p><code class="codeph">PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2403 d43747e1800 ">
                                 <p></p>
                                 <p></p>
                                 <p>将逗号分隔列表中指定的一个或多个PDB复制到新CDB。要复制PDB，必须按照<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”中的说明</span>连接到<code class="codeph">root</code> 。要执行基于备份的PDB复制，还必须备份包含列出的PDB的CDB的根和种子数据库（ <code class="codeph">PDB$SEED</code> ）。
                                 </p>
                                 <p>默认情况下，RMAN复制包含列出的PDB的CDB的<code class="codeph">root</code>和种子数据库。
                                 </p>
                                 <p>有关复制PDB的示例，请参见“ <a href="../bradv/rman-duplicating-databases.html#BRADV-GUID-23205E75-CFA8-4BCE-AC50-3D39DF040512" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2438" headers="d43747e1797 ">
                                 <p><code class="codeph">PFILE</code> <span class="italic"><code class="codeph">filename</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2438 d43747e1800 ">
                                 <p><a id="d43747e2448" class="indexterm-anchor"></a><a id="d43747e2452" class="indexterm-anchor"></a><a id="d43747e2456" class="indexterm-anchor"></a>指定辅助实例使用的基于文本的初始化参数文件（请参见<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDCHBGC">示例2-86</a> ）。RMAN在复制期间自动关闭并重新启动辅助实例。如果辅助程序未在默认位置使用服务器参数文件，则必须指定RMAN在启动辅助实例时使用的基于文本的初始化参数文件。初始化参数文件必须与用于执行复制的RMAN客户端位于同一主机上。
                                 </p>
                                 <p>如果辅助实例在默认位置使用服务器参数文件，则无需指定<code class="codeph">PFILE</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2470" headers="d43747e1797 ">
                                 <p><span class="italic"><code class="codeph">sizeSpec</code></span> <code class="codeph">SECTION SIZE</code> <span class="italic"><code class="codeph">sizeSpec</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2470 d43747e1800 ">
                                 <p>指定在活动复制操作的数据传输阶段生成的每个备份部分的大小。使用此选项时，RMAN默认使用活动复制和备份集。因此，请确保满足此类复制的先决条件。</p>
                                 <p>请参阅<a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBJCAHI">SECTION SIZE sizeSpec</a> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2487" headers="d43747e1797 ">
                                 <p><code class="codeph">跳过READONLY</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2487 d43747e1800 ">
                                 <p>从重复数据库中排除当前只读表空间中的数据文件。默认情况下，RMAN会复制当前的只读表空间。</p>
                                 <p>如果表空间当前是读/写，但您使用<span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span>将数据库复制到表空间为只读的SCN，则RMAN不会在重复数据库中包含表空间。以前只读的表空间被视为脱机表空间，因此不包含在复制中。
                                 </p>
                                 <p><span class="bold">注意：</span>只读表空间必须是自包含的， <code class="codeph">DUPLICATE</code>命令才能成功使用此选项。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2510" headers="d43747e1797 ">
                                 <p><code class="codeph">SKIP PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2510 d43747e1800 ">
                                 <p></p>
                                 <p>复制CDB中的所有PDB，除了逗号分隔列表<span class="italic"><code class="codeph">pdb_name</code></span>指定的<span class="italic"><code class="codeph">pdb_name</code></span>到新CDB。要复制PDB，必须按照<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”中的说明</span>连接到<code class="codeph">root</code> 。
                                 </p>
                                 <p>默认情况下，RMAN会复制CDB的<code class="codeph">root</code>和种子数据库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2538" headers="d43747e1797 ">
                                 <p><code class="codeph">SKIP TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2538 d43747e1800 ">
                                 <p>从重复数据库中排除指定的表空间（请参阅<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDCHBGC">示例2-86</a> ）。
                                 </p>
                                 <p><span class="bold">注意：</span>使用<code class="codeph">DUPLICATE ...创建备用数据库时不能使用此子句<code class="codeph">DUPLICATE ...FOR STANDBY</code> 。</p>
                                 <p><span class="bold">注意：</span>您不能排除具有回滚段的<code class="codeph">SYS</code>拥有的对象或表空间，也不能排除包含实例化视图的表空间。要复制的表空间集必须是自包含的。
                                 </p>
                                 <p>如果在源数据库的某些备份不存在时必须复制数据库，则需要<code class="codeph">SKIP TABLESPACE</code> 。如果您未指定<code class="codeph">SKIP TABLESPACE</code> ，则RMAN会尝试复制以下内容：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>联机表空间中的所有数据文件，无论数据文件是否在线。</p>
                                    </li>
                                    <li>
                                       <p>所有表空间都使用<code class="codeph">NORMAL</code> <span class="italic">以外</span>的选项脱机。例如，RMAN尝试使用<code class="codeph">IMMEDIATE</code>选项复制脱机的表空间。虽然可以在复制后手动添加这些表空间，但不能复制<code class="codeph">OFFLINE NORMAL</code>表空间。
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2593" headers="d43747e1797 ">
                                 <p><code class="codeph">SKIP TABLESPACE</code> <span class="italic"><code class="codeph">pdb-name</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2593 d43747e1800 ">
                                 <p></p>
                                 <p>在将PDB复制到新CDB时，从复制PDB中排除指定的表空间。多个数据库可以具有相同名称的表空间，因此名称前面的限定符唯一标识表空间。 <span class="italic"><code class="codeph">pdb-name</code></span>是PDB的名称。</p>
                                 <p>有关从重复数据库中排除表空间的一般信息，请参阅<code class="codeph">SKIP TABLESPACE</code>的先前描述。
                                 </p>
                                 <p><span class="bold">注意：</span>您不能将此子句与<code class="codeph">CREATE PLUGGABLE DATABASE</code>一起使用，以将PDB复制到现有CDB。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2626" headers="d43747e1797 ">
                                 <p><code class="codeph" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDEAJCC">SPFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2626 d43747e1800 ">
                                 <p>将服务器参数文件从源数据库复制到重复数据库。不使用先前在重复数据库中设置的初始化参数。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2634" headers="d43747e1797 ">
                                 <p><code class="codeph">   </code><span class="italic"><code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHAJGD">setParameter</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2634 d43747e1800 ">
                                 <p>将指定的初始化参数设置为指定的值。请参阅<span class="italic"><code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHAJGD">setParameter</a></code></span> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2651" headers="d43747e1797 "><code class="codeph">PARAMETER_VALUE_CONVERT</code> <span class="italic"><code class="codeph">string_pattern</code></span> <code class="codeph">[</code> <span class="italic"><code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHAJGD">setParameter</a></code></span> <code class="codeph">]</code></td>
                              <td align="left" valign="top" width="71%" headers="d43747e2651 d43747e1800 ">
                                 <p>在所有匹配的初始化参数值中用第二个字符串替换第一个字符串。请参阅<span class="italic"><code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__I1011578">dupOptionList</a></code></span>中<code class="codeph">PARAMETER_VALUE_CONVERT</code>的说明。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2679" headers="d43747e1797 ">
                                 <p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2679 d43747e1800 ">
                                 <p>指定指定数据库中包含的表空间。</p>
                                 <p>与<code class="codeph">SKIP TABLESPACE</code> （指定从重复数据库中<span class="italic">排除</span>哪些表空间）不同，此选项指定包含哪些表空间，然后跳过剩余的表空间。
                                 </p>
                                 <p><span class="bold">注意：</span> RMAN自动在重复数据库中包含<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code>和undo表空间。无法跳过这些表空间，并且要复制的表空间集必须是自包含的。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2709" headers="d43747e1797 ">
                                 <p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">pdb-name</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2709 d43747e1800 ">
                                 <p></p>
                                 <p>指定在将PDB复制到新CDB时CDB中包含哪些表空间。多个数据库可以具有相同名称的表空间。名称前面的限定符唯一标识表空间。 <span class="italic"><code class="codeph">pdb-name</code></span>是PDB的名称。</p>
                                 <p>有关这些参数的一般信息，请参阅前面的<code class="codeph">TABLESPACE</code>和<code class="codeph">UNDO TABLESPACE</code>描述。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2738" headers="d43747e1797 ">
                                 <p><code class="codeph">UNDO TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2738 d43747e1800 ">
                                 <p>指定具有还原段的表空间的名称。仅当使用<code class="codeph">SKIP TABLESPACE</code>和<code class="codeph">TABLESPACE</code>子句复制表空间的子集时，才需要此选项。在以下情况下，您必须提供包含还原段的表空间列表：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>没有与目标数据库或恢复目录的连接</p>
                                    </li>
                                    <li>
                                       <p>没有与恢复目录的连接，与目标的连接但目标数据库未打开。</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2764" headers="d43747e1797 "><code class="codeph">TO RESTORE POINT</code> <span class="italic"><code class="codeph">restore_point_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d43747e2764 d43747e1800 ">
                                 <p>指定基于备份的复制的还原点，其中创建还原点的SCN为包含上限的上限。由于限制是包含的，因此RMAN仅选择可用于复制数据库的文件， <span class="italic">包括</span>相应的SCN。</p>
                                 <p><span class="bold">注意：</span>适用于<span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span>的相同限制也适用于<code class="codeph">TO RESTORE POINT</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2791" headers="d43747e1797 ">
                                 <p><span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2791 d43747e1800 ">
                                 <p><a id="d43747e2800" class="indexterm-anchor"></a><a id="d43747e2802" class="indexterm-anchor"></a><a id="d43747e2804" class="indexterm-anchor"></a><a id="d43747e2808" class="indexterm-anchor"></a>设置基于备份的复制中的时间点恢复的结束时间，SCN或日志序列号（请参见<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDCHBGC">示例2-86</a> ）。活动数据库复制不支持<code class="codeph">UNTIL</code>子句。
                                 </p>
                                 <p>您可以通过在<code class="codeph">DUPLICATE</code>命令之前运行<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">UNTIL</code>来获得相同的结果。如果为复制指定<code class="codeph">UNTIL</code>子句，则适用以下限制：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>RMAN决定是否使用<a id="d43747e2838" class="indexterm-anchor"></a> <code class="codeph">NOREDO</code>基于数据库的当前状态。如果数据库在指定的<code class="codeph">UNTIL</code>时间处于归档模式，或者SCN与当前归档模式不同，则RMAN不使用<code class="codeph">NOREDO</code> 。</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DUPLICATE</code>命令的结束点不能位于最近的<code class="codeph">ALTER DATABASE OPEN RESETLOGS</code>的SCN之前。与目标的连接重复不支持以前的数据库版本。但是，如果在没有连接到目标数据库的情况下进行复制，则可以指定以前的版本。
                                       </p>
                                    </li>
                                    <li>
                                       <p>您无法将重复数据库恢复到当前时间点，即最新的SCN。 RMAN在最新的可用存档日志之前或之前恢复重复数据库，但无法恢复到联机重做日志。</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2864" headers="d43747e1797 ">
                                 <p><code class="codeph">使用BACKUPSET</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2864 d43747e1800 ">
                                 <p>通过使用备份集将全部或部分数据从源数据库复制到目标数据库来执行活动数据库复制。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2872" headers="d43747e1797 ">
                                 <p><code class="codeph">使用压缩后备箱</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2872 d43747e1800 ">
                                 <p>启用从源数据库到辅助数据库的数据传输的二进制压缩，从而减少网络带宽消耗。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDHAJGD"><span class="bold"><span class="italic">的setParameter</span></span></p>
                  <p>本小节指定服务器参数文件值。</p>
                  <div class="tblformalwide" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-98AF7A1E-6C36-4A14-86FD-6C296749088B">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes DUPLICATE command setParameter parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d43747e2893">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d43747e2896">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2901" headers="d43747e2893 ">
                                 <p><code class="codeph">SET</code> <span class="italic"><code class="codeph">identifier string</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2901 d43747e2896 ">
                                 <p>将指定的初始化参数设置为指定的值（请参见<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDCBDHI">示例2-84</a> ）。您可以使用<code class="codeph">SET</code>调整内存差异，关闭复制选项，并为重复数据库设置其他选项。
                                 </p>
                                 <p>此<code class="codeph">SET</code>功能相当于在恢复服务器参数文件并发出<code class="codeph">ALTER SYSTEM SET</code>语句以更改初始化参数文件后暂停复制。
                                 </p>
                                 <p>RMAN后处理<code class="codeph">SET</code> <a id="d43747e2930" class="indexterm-anchor"></a> <code class="codeph">PARAMETER_VALUE_CONVERT</code> 。如果<code class="codeph">PARAMETER_VALUE_CONVERT</code>设置参数指定的文件名，并且<code class="codeph">SET</code>设置由同一参数指定的文件名，则<code class="codeph">SET</code>值将覆盖<code class="codeph">PARAMETER_VALUE_CONVERT</code>设置。
                                 </p>
                                 <p><span class="bold">注意：</span>如果<a id="d43747e2954" class="indexterm-anchor"></a><a id="d43747e2956" class="indexterm-anchor"></a>在<code class="codeph">DUPLICATE</code>命令中指定了<code class="codeph">DB_FILE_NAME_CONVERT</code> ，然后其文件名设置将覆盖<code class="codeph">SPFILE SET</code>指定的竞争设置。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2968" headers="d43747e2893 ">
                                 <p><code class="codeph">COMMENT</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">string</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2968 d43747e2896 ">
                                 <p>指定参数设置的可选注释。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e2984" headers="d43747e2893 ">
                                 <p><code class="codeph">RESET</code> <span class="italic"><code class="codeph">identifier string</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e2984 d43747e2896 ">
                                 <p>从参数文件中删除指定的初始化参数。您可以使用<code class="codeph">RESET</code>删除不需要的初始化参数。
                                 </p>
                                 <p>此<code class="codeph">RESET</code>功能相当于在恢复服务器参数文件并发出<code class="codeph">ALTER SYSTEM RESET</code>语句以更改初始化参数文件后暂停复制。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__BGBIHEHG"><span class="bold"><span class="italic">logSpec</span></span></p>
                  <p><a id="d43747e3012" class="indexterm-anchor"></a>本子条款在创建不是备用数据库的重复数据库时指定联机重做日志。有关语法图，请参阅<span class="italic"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDIGIJD">logSpec :: =</a></span>图表。
                  </p>
                  <p>如果未指定<code class="codeph">LOGFILE</code> ，则RMAN首先检查是否设置了以下任何初始化参数： <code class="codeph">LOG_FILE_NAME_CONVERT,DB_CREATE_FILE_DEST, DB_RECOVERY_FILE_DEST</code>或<code class="codeph">DB_CREATE_ONLINE_LOG_DEST_n</code> 。如果设置了这些参数，RMAN会根据这些参数设置将重复的数据库联机重做日志文件定向到Oracle托管存储。如果没有设置这些初始化参数，则RMAN将源数据库的原始重做日志文件名用于重复数据库的重做日志文件。你必须指定<a id="d43747e3032" class="indexterm-anchor"></a>在这种情况下， <code class="codeph">NOFILENAMECHECK</code>选项。
                  </p>
                  <div class="tblformalwide" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-9819993D-05D3-4EF6-8D22-A3035136E10A">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes DUPLICATE command logSpec parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d43747e3045">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d43747e3048">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e3053" headers="d43747e3045 ">
                                 <p><code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code> <code class="codeph">SIZE</code> <span class="italic"><code class="codeph">sizeSpec</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e3053 d43747e3048 ">
                                 <p>指定联机重做日志成员的文件名和文件大小，以千字节（ <code class="codeph">K</code> ）或兆字节（ <code class="codeph">M</code> ）为单位。默认值以字节为单位。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e3077" headers="d43747e3045 ">
                                 <p><code class="codeph">REUSE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e3077 d43747e3048 ">
                                 <p>允许数据库重用现有文件。如果文件存在，则数据库验证其大小是否与<code class="codeph">SIZE</code>参数的值匹配。如果该文件不存在，则创建该文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e3088" headers="d43747e3045 "><code class="codeph">GROUP</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">('</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">', ...)</code> <code class="codeph">SIZE</code> <span class="italic"><code class="codeph">sizeSpec</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d43747e3088 d43747e3048 ">
                                 <p>指定包含联机重做日志成员的组，联机重做日志成员的文件名以及以千字节（ <code class="codeph">K</code> ）或兆字节（ <code class="codeph">M</code> ）为单位的文件大小。默认值以字节为单位。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d43747e3120" headers="d43747e3045 ">
                                 <p><code class="codeph">REUSE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d43747e3120 d43747e3048 ">
                                 <p>允许数据库重用现有日志。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__I104404">
                  <p class="subhead1" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-9B34AC47-A2D5-4C3D-90CA-4597F52AB2C0">例子</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDJGCFC">
                  <p class="titleinexample">示例2-83从活动数据库复制到具有相同目录结构的主机</p>
                  <p>假设您要在新主机上从数据库<code class="codeph">prod1</code>创建测试数据库。新主机具有与源主机相同的目录结构，因此重复数据库中的文件可以使用与源数据库中的文件相同的名称。您希望在不使用RMAN备份的情况下创建数据库，并允许<code class="codeph">prod1</code>在复制期间保持打开状态。
                  </p>
                  <p>如果<code class="codeph">prod1</code>使用服务器参数文件，则可以在目标主机上创建初始化参数文件，该文件仅包含设置为新值的<code class="codeph">DB_NAME</code>参数和设置为适当域的<code class="codeph">DB_DOMAIN</code>参数。通过设置<code class="codeph">DB_DOMAIN</code>您可以将RMAN连接到默认数据库服务。在启动辅助实例之前，请创建一个与源数据库具有相同<code class="codeph">SYS</code>和<code class="codeph">SYSBACKUP</code>密码的密码文件。然后，使用spfile启动辅助实例（如果可用）。如果使用pfile启动辅助实例，则RMAN会在默认位置创建一个spfile，可能会覆盖驻留在那里的任何spfile。
                  </p>
                  <p>默认情况下，RMAN在创建不是备用数据库的重复数据库时不会复制密码文件。<code class="codeph">PASSWORD FILE</code>选项将密码文件复制到目标主机。如果希望重复数据库包含源数据库上可用的所有密码，请使用<code class="codeph">PASSWORD FILE</code>选项。
                  </p>
                  <p>您无需更改源数据库通道配置或配置辅助通道。启动RMAN客户端，使用网络服务名称连接到源和辅助数据库实例，并按如下方式复制数据库：</p><pre class="oac_no_warn" dir="ltr">％rman RMAN&gt; CONNECT TARGET“sbu @ prod1 AS SYSBACKUP”目标数据库密码：连接到目标数据库的<span class="italic">密码</span> ：PROD1（DBID = 39525561）RMAN&gt; CONNECT AUXILIARY“sbu @ dup1 AS SYSBACKUP”辅助数据库密码：连接到辅助数据库的<span class="italic">密码</span> ： DUP1（未安装）RMAN&gt; DUPLICATE TARGET DATABASE TO dup1 2&gt; FROM ACTIVE DATABASE 3&gt; NOFILENAMECHECK 4&gt; PASSWORD FILE 5&gt; SPFILE;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDCBDHI">
                  <p class="titleinexample">示例2-84在活动数据库复制中复制服务器参数文件</p>
                  <p>假设您要在新主机上从数据库<code class="codeph">prod1</code>创建备用数据库。目标主机具有与源主机不同的目录结构，因此备用数据库文件存储在<code class="codeph">/disk2</code>而不是<code class="codeph">/disk1</code> 。您希望在不使用RMAN备份的情况下创建备用数据库，并且在复制期间让<code class="codeph">prod1</code>保持打开状态。
                  </p>
                  <p>第一步是为备用数据库创建最小初始化参数文件，然后启动备用实例。此参数文件很小，因为当您使用<code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDEAJCC">SPFILE</a></code>选项时，RMAN <code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDEAJCC">SPFILE</a></code>服务器参数文件复制到新主机，并将各种参数设置为提供的新值。
                  </p>
                  <p>启动RMAN客户端， <code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code>到源数据库为<code class="codeph">TARGET</code> ，并连接到辅助实例。将多个通道分配给目标实例，将通道分配给辅助实例，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALLOCATE CHANNEL tgt10 TYPE DISK; ALLOCATE CHANNEL tgt20 TYPE DISK; ALLOCATE CHANNEL tgt30 TYPE DISK; ALLOCATE CHANNEL tgt40 TYPE DISK; ALLOCATE AUXILIARY CHANNEL dup1 TYPE DISK;</pre><p>然后，您可以输入以下命令：</p><pre class="oac_no_warn" dir="ltr">来自活动数据库密码文件的备用目标数据库SPFILE PARAMETER_VALUE_CONVERT'/ disk1'，'/ disk2'SET DB_FILE_NAME_CONVERT'/ disk1'，'/ disk2'CET LOG_FILE_NAME_CONVERT'/ disk1'，'/ disk2'SET DB_UNIQUE_NAME'dudu1'SET SGA_MAX_SIZE 200M SET SGA_TARGET 125M;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-53D10CD6-73A4-4EDD-A221-84F99598104F">
                  <p class="titleinexample">示例2-85将没有目标连接的数据库复制到具有相同目录结构的主机</p>
                  <p>假设您希望使用备份复制源数据库<code class="codeph">prod</code>并且不希望将RMAN作为<code class="codeph">TARGET</code>连接到此数据库，因为它已关闭以进行维护。以下是对环境的描述：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>源主机和目标主机具有相同的目录结构。重复数据库中的数据文件和联机重做日志名称与源数据库中的名称相同。</p>
                     </li>
                     <li>
                        <p>重复数据库中使用相同数量的联机重做日志文件。</p>
                     </li>
                     <li>
                        <p>可以使用恢复目录。源数据库名称<code class="codeph">prod</code>在恢复目录中是唯一的。
                        </p>
                     </li>
                     <li>
                        <p>已使用<code class="codeph">CONFIGURE CHANNEL</code>命令配置辅助通道。
                        </p>
                     </li>
                  </ul>
                  <p>以下命令创建名为<code class="codeph">DUPDB</code>的重复数据库：</p><pre class="oac_no_warn" dir="ltr">％rman RMAN&gt; <span class="bold">CONNECT CATALOG rco @ catdb;</span>恢复目录数据库密码：连接到恢复目录数据库的<span class="italic"><span class="bold">密码</span></span> RMAN&gt; <span class="bold">CONNECT AUXILIARY“sbu @ dupdb AS SYSBACKUP”;</span>辅助数据库密码：连接到辅助数据库的<span class="italic"><span class="bold">密码</span></span> ：DUPDB（未安装）RMAN&gt; <span class="bold">DUPLICATE DATABASE'PROD'to'DUPDB'NOFILENAMECHECK;</span>
</pre><p>假设数据库名称<code class="codeph">prod</code>在恢复目录中不唯一的不同方案。以下<code class="codeph">DUPLICATE</code>命令使用<code class="codeph">DBID</code>参数唯一标识源数据库：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; <span class="bold">DUPLICATE DATABASE'PROD'DBID 39525561 TO'DUPDB'NOUFILENAMECHECK;</span></pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDCHBGC">
                  <p class="titleinexample">例2-86在DUPLICATE命令中设置新文件名</p>
                  <p>假设您要使用磁带备份将<code class="codeph">newdb</code>上的源数据库<code class="codeph">prod</code> <code class="codeph">srchost</code>到<code class="codeph">newdb</code>上的<code class="codeph">desthost</code> 。
                  </p>
                  <p>在此方案中，源数据库不使用服务器参数文件。您在<code class="codeph">desthost</code>上创建基于文本的初始化参数文件，并使用它来启动数据库实例。因此，基于备份的复制必须使用目标连接（请参阅<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__BABEDFJI" title="两种基于备份的复制模式的要求">表2-6</a> ）。
                  </p>
                  <p>当执行<code class="codeph">DUPLICATE</code>上<code class="codeph">desthost</code> ，你必须使用<code class="codeph">PFILE</code>参数指定的初始化参数文件的位置。必须在与重复数据库的初始化参数文件相同的主机上使用RMAN客户端。
                  </p>
                  <p>您不希望表空间<code class="codeph">example</code>和<code class="codeph">history</code>包含在重复数据库中，因此您指定<code class="codeph">DUPLICATE ...这些表空间的SKIP TABLESPACE</code> 。此外，您希望重复数据库处于生产数据库24小时前的状态，因此您使用<code class="codeph">DUPLICATE ...UNTIL TIME</code> 。</p>
                  <p>此示例假定源数据库的数据文件位于目录<code class="codeph">/h1/oracle/dbs/trgt</code> <code class="codeph">srchost</code>中的<code class="codeph">srchost</code>上。您打算将数据文件复制到目录<code class="codeph">/h2/oracle/oradata/newdb</code> ，因此您指定<code class="codeph">DUPLICATE ...DB_FILE_NAME_CONVERT</code>生成重复数据文件的名称。你用<code class="codeph">DUPLICATE ...LOGFILE</code>指定重复数据库中联机重做日志文件的名称。
                  </p>
                  <p>启动RMAN客户端上<code class="codeph">desthost</code> ， <code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code>源数据库为<code class="codeph">TARGET</code> ，并连接到辅助实例。然后，您可以输入以下<code class="codeph">RUN</code>命令：</p><pre class="oac_no_warn" dir="ltr">运行{ALLOCATE AUXILIARY CHANNEL newdb DEVICE TYPE sbt; DUPLICATE TARGET DATABASE到newdb PFILE？/dbs/initNEWDB.ora UNTIL TIME'SYSDATE-1'＃指定不完全恢复SKIP TABLESPACE示例，历史＃跳过所需的表空间DB_FILE_NAME_CONVERT（'/ h1 / oracle / dbs / trgt /'，'/ h2 / oracle / oradata / newdb / '）LOGFILE GROUP 1（'/ h2/oradata/newdb/redo01_1.f'，'/ h2 / oradata / newdb / redo01_2.f'）SIZE 4M，GROUP 2（'/ h2/oradata/newdb/redo02_1.f' ，'/ h2 / oradata / newdb / redo02_2.f'）SIZE 4M，GROUP 3（'/ h2/oradata/newdb/redo03_1.f','/h2/oradata/newdb/redo03_2.f'）SIZE 4M REUSE; }</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__BGBGEHCG">
                  <p class="titleinexample">示例2-87使用SET NEWNAME FOR DATABASE命名重复文件</p>
                  <p>在这种情况下，您打算在没有目标连接的情况下使用基于备份的复制。</p>
                  <p>源数据库<code class="codeph">prod</code>包含分布在多个目录中的八个数据文件。数据文件不是Oracle托管文件。你要复制的源数据库<code class="codeph">dupdb</code>对目标主机<code class="codeph">desthost</code> 。
                  </p>
                  <p>在这种情况下， <code class="codeph">srchost</code>和<code class="codeph">desthost</code>具有不同的目录结构。您希望将数据文件存储在<code class="codeph">/oradata1</code>子目录中的<code class="codeph">desthost</code>中，因此使用<code class="codeph">SET NEWNAME FOR DATABASE</code>指定剥离目录路径的文件名。例如，如果源数据文件的名称为<code class="codeph">'/oradata/prod/financial.dbf'</code> ，则<code class="codeph">%b</code> <code class="codeph">'financial.dbf'</code> 。
                  </p>
                  <p>源数据库不使用服务器参数文件，因此您无法使用<code class="codeph">SPFILE</code>技术指定重复数据文件的名称。您决定使用<code class="codeph">SET NEWNAME DATABASE</code>命令，因为您希望目标主机上的同一目录中包含所有重复数据文件。
                  </p>
                  <p>您希望在目标主机上的目录<code class="codeph">/duplogs</code>创建两个联机重做日志组，每个组具有两个大小为200 KB的成员。假设<code class="codeph">srchost</code>和<code class="codeph">desthost</code>无法通过NFS等任何方式挂载彼此的文件系统。</p>
                  <p>磁盘上存储了磁盘副本或备份集，用于存储在源数据库中的所有数据文件和归档重做日志文件，并且您已使用操作系统实用程序将它们手动复制到<code class="codeph">desthost</code> 。这些备份和副本中的相同位置上存在<code class="codeph">desthost</code> ，因为他们在做<code class="codeph">srchost</code> 。
                  </p>
                  <p>您可以使用操作系统实用程序从初始化参数文件复制<code class="codeph">srchost</code>到适当的位置<code class="codeph">desthost</code> 。您已重置以<code class="codeph">_DEST</code>结尾的所有初始化参数并指定路径名。您没有设置<code class="codeph">DB_FILE_NAME_CONVERT</code>和<code class="codeph">LOG_FILE_NAME_CONVERT</code>因为您在<code class="codeph">RUN</code>命令本身中指定了数据文件和在线日志的名称。辅助实例在默认位置使用服务器端初始化参数文件，因此<code class="codeph">DUPLICATE</code>命令中不需要<code class="codeph">PFILE</code>参数。
                  </p>
                  <p>以下示例脚本创建重复数据库。<code class="codeph">RUN</code>命令是必需的，因为您只能在<code class="codeph">RUN</code>执行<code class="codeph">SET NEWNAME</code> 。</p><pre class="oac_no_warn" dir="ltr">运行{设置数据库的新名称'/ oradata1 /％b'; DUPLICATE TARGET DATABASE到dupdb LOGFILE GROUP 1（'/duplogs/redo01a.log'，'/ duplogs / redo01b.log'）SIZE 4M REUSE，GROUP 2（'/duplogs / redo02a.log'，'/ duplogs / redo02b.log '）SIZE 4M REUSE; }</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__BGBFADEH">
                  <p class="titleinexample">例2-88对DATAFILE使用SET NEWNAME并为TABLESPACE设置NEWNAME以命名重复文件</p>
                  <p>在此方案中，您打算使用基于备份的复制来复制数据库。</p>
                  <p>假设源数据库<code class="codeph">PROD</code>在<code class="codeph">SRCHOST</code>并包含九个数据文件，这些文件分布在多个目录中。你要复制的源数据库数据库<code class="codeph">DUPDB</code>远程主机<code class="codeph">DESTHOST</code> 。 <code class="codeph">DUPDB</code>数据库排除了表空间<code class="codeph">TOOLS</code> ，但保留了所有其他表空间。
                  </p>
                  <p>源数据库不使用服务器参数文件，因此您无法使用<code class="codeph">SPFILE</code>技术指定重复数据文件的名称。您决定使用<code class="codeph">SET NEWNAME</code>命令来指定文件名，因为重复的数据文件将分布在多个目录中。
                  </p>
                  <p>在这种情况下， <code class="codeph">srchost</code>和<code class="codeph">desthost</code>具有不同的目录结构。你想在数据文件存储<code class="codeph">desthost</code>的<code class="codeph">/oradata1</code>通过<code class="codeph">/oradata7</code>子目录。您希望将每个数据文件放在不同的目录中， <code class="codeph">USERS</code>表空间除外，它包含两个要复制到<code class="codeph">/oradata7</code>数据文件。
                  </p>
                  <p>您希望在目标主机上的目录<code class="codeph">/duplogs</code>创建两个联机重做日志组，每个组具有两个大小为200 KB的成员。假设<code class="codeph">srchost</code>和<code class="codeph">desthost</code>无法通过NFS等任何方式挂载彼此的文件系统。</p>
                  <p>磁盘上存储了磁盘副本或备份集，用于存储在源数据库中的所有数据文件和归档重做日志文件，并且您已使用操作系统实用程序将它们手动复制到<code class="codeph">desthost</code> 。这些备份和副本中的相同位置上存在<code class="codeph">desthost</code> ，因为他们在做<code class="codeph">srchost</code> 。
                  </p>
                  <p>您可以使用操作系统实用程序从初始化参数文件复制<code class="codeph">srchost</code>到适当的位置<code class="codeph">desthost</code> 。您已重置以<code class="codeph">_DEST</code>结尾的所有初始化参数并指定路径名。您没有设置<code class="codeph">DB_FILE_NAME_CONVERT</code>和<code class="codeph">LOG_FILE_NAME_CONVERT</code>因为您在<code class="codeph">RUN</code>命令本身中指定了数据文件和在线日志的名称。辅助实例在默认位置使用服务器端初始化参数文件，因此<code class="codeph">DUPLICATE</code>命令中不需要<code class="codeph">PFILE</code>参数。
                  </p>
                  <p>以下示例脚本创建重复数据库。<code class="codeph">RUN</code>命令是必需的，因为您只能在<code class="codeph">RUN</code>执行<code class="codeph">SET NEWNAME</code> 。</p><pre class="oac_no_warn" dir="ltr">运行{为数据文件设置NEWNAME 1'到'/oradata1/system01.dbf';将DATAFILE 2的NEWNAME设置为'/oradata2/undotbs01.dbf';将DATAFILE 3的NEWNAME设置为'/oradata3/cwmlite01.dbf';将DATAFILE 4的NEWNAME设置为'/ oradata4 / drsys01';将DATAFILE 5的NEWNAME设置为'/oradata5/example01.dbf'; ＃因为users表空间包含2个数据文件，下面的命令＃为这两个数据文件生成唯一的名称，将它们放在/ oradata7 SET NEWNAME FOR FOR TABLESPACE用户TO'/oradata7/users%b.dbf'; DUPLICATE TARGET DATABASE到dupdb SKIP TABLESPACE工具LOGFILE GROUP 1（'/duplogs / redo01a.log'，'/ duplogs / redo01b.log'）SIZE 4M REUSE，GROUP 2（'/duplogs / redo02a.log'，'/ duplogs / redo02b.log'）SIZE 4M REUSE; }</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__BGBCEBDI">
                  <p class="titleinexample">示例2-89使用SET NEWNAME FOR DATAFILE命名Oracle管理文件</p>
                  <p>有两种方法可以将特定数据文件或临时文件存储在Oracle管理的文件目标中，该目标独立于其余数据库文件的位置。</p>
                  <ol>
                     <li>
                        <p>将辅助实例的初始化参数文件中的参数<code class="codeph">DB_CREATE_FILE_DEST</code>设置为所需位置</p>
                     </li>
                     <li>
                        <p>设置初始化参数<code class="codeph">DB_CREATE_FILE_DEST</code>和<code class="codeph">DB_FILE_NAME_CONVERT</code> 。此时，您可以将<code class="codeph">SET NEWNAME</code>命令用于那些您不希望由<code class="codeph">DB_FILE_NAME_CONVERT</code>转换的数据文件。</p>
                     </li>
                  </ol>
                  <p>使用Oracle管理的文件名在<code class="codeph">DB_CREATE_FILE_DEST</code>指定的位置创建指定的数据文件或临时文件。</p>
                  <p>如以下示例脚本所示，您还可以使用<code class="codeph">SET</code> <code class="codeph">NEWNAME</code>将单个数据文件或临时文件定向到特定的ASM磁盘组。
                  </p><pre class="oac_no_warn" dir="ltr">运行{为数据文件1设置NEWNAME到“+ DGROUP1”;将DATAFILE 2的NEWNAME设置为“+ DGROUP2”; 。。。DUPLICATE TARGET DATABASE to dupdb FROM ACTIVE DATABASE SPFILE SET DB_CREATE_FILE_DEST + DGROUP3; }</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-A48906FB-3F3E-42AF-A668-20C28FDD6FAB">
                  <p class="titleinexample">示例2-90使用CONFIGURE AUXNAME命名重复文件</p>
                  <p><a id="d43747e3655" class="indexterm-anchor"></a>本节假设与<a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__BGBFADEH">例2-88中</a>描述的情况相同。此示例是使用<code class="codeph">CONFIGURE AUXNAME</code>而不是<code class="codeph">SET NEWNAME</code>指定新数据文件名的变体。这些新文件名记录在控制文件中，并在以后每次执行复制时使用。
                  </p>
                  <p>此示例还使用自动通道和客户端初始化参数文件进行数据库复制，并使用<code class="codeph">LOGFILE</code>子句指定联机重做日志的名称和大小。在这种情况下，不需要<code class="codeph">RUN</code>命令，因为您没有使用<code class="codeph">SET NEWNAME</code> 。</p><pre class="oac_no_warn" dir="ltr">将DATAFILE 1的AUXNAME配置为'/oradata1/system01.dbf';将数据文件2的AUXNAME配置为'/oradata2/undotbs01.dbf';将DATAFILE 3的AUXNAME配置为'/oradata3/cwmlite01.dbf';将DATAFILE 4的AUXNAME配置为'/ oradata4 / drsys01';将DATAFILE 5的AUXNAME配置为'/oradata5/example01.dbf';将数据文件6的AUXNAME配置为'/oradata6/indx01.dbf'; DUPLICATE TARGET DATABASE到dupdb SKIP TABLESPACE工具LOGFILE GROUP 1（'/duplogs / redo01a.log'，'/ duplogs / redo01b.log'）SIZE 4M REUSE，GROUP 2（'/duplogs / redo02a.log'，'/ duplogs / redo02b.log'）SIZE 4M REUSE;</pre><p>RMAN使用所有增量备份，归档重做日志备份和归档重做日志文件来执行不完全恢复，然后使用<code class="codeph">RESETLOGS</code>选项打开数据库以创建联机重做日志。
                  </p>
                  <p>复制完成后，您可以清除重复数据库中数据文件的已配置辅助名称，以便将来的操作不会覆盖它们。例如，输入以下命令：</p><pre class="oac_no_warn" dir="ltr">配置数据文件的AUXNAME 1清除;配置数据文件的AUXNAME 2清除;配置数据文件的AUXNAME 3清除;配置数据文件的AUXNAME 4清除;配置数据文件的AUXNAME 5清除;配置数据文件的AUXNAME 6清除;</pre><p>或者，您可能希望定期将重复数据库与重复的原始数据库同步。在这种情况下，您可以再次运行<code class="codeph">DUPLICATE</code>命令，实质上是重新创建重复数据库。此技术需要制作重复数据库的数据文件的完整副本。每当要将副本与源数据库同步时，请运行以下脚本。例如，您可以每天或每周运行该脚本。
                  </p><pre class="oac_no_warn" dir="ltr">DUPLICATE TARGET DATABASE到dupdb SKIP TABLESPACE工具LOGFILE GROUP 1（'/duplogs / redo01a.log'，'/ duplogs / redo01b.log'）SIZE 4M REUSE，GROUP 2（'/duplogs / redo02a.log'，'/ duplogs / redo02b.log'）SIZE 4M REUSE;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-148EFBC3-B1C4-4FD7-B06A-A0D8D99F14DF">
                  <p class="titleinexample">示例2-91创建具有相同目录结构的备用数据库</p>
                  <p>假设您要使用RMAN备份在远程主机上创建备用数据库，该远程主机具有与源主机相同的目录结构。源数据库称为<code class="codeph">prod1</code> ，是Data Guard环境中的主数据库。
                  </p>
                  <p>首先，启动RMAN客户端， <code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code>到源数据库<code class="codeph">prod1</code>作为<code class="codeph">TARGET</code> ，并连接到辅助实例。然后，您可以使用<code class="codeph">standby1</code>的<code class="codeph">DB_UNIQUE_NAME</code>将默认设备类型<code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code>为备用数据库的<code class="codeph">sbt</code> ：</p><pre class="oac_no_warn" dir="ltr">配置默认设备类型sbt FOR DB_UNIQUE_NAME standby1;配置设备类型sbt PARALLELISM 2 FOR DB_UNIQUE_NAME standby1;</pre><p>假设创建备用数据库所需的所有备份都在磁带上。在备用数据库初始化参数文件中，将<code class="codeph">DB_UNIQUE_NAME</code>设置为<code class="codeph">standby1</code> 。
                  </p>
                  <p>在备用数据库上使用默认初始化参数文件位置。启动备用实例<code class="codeph">NOMOUNT</code> ，启动RMAN客户端，以<code class="codeph">TARGET</code> <code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code>到源数据库，并连接到辅助实例和恢复目录。您运行以下<code class="codeph">DUPLICATE</code>命令，指定<code class="codeph">NOFILENAMECHECK</code>选项，因为备用数据文件和主数据文件以及联机重做日志文件具有相同的名称：</p><pre class="oac_no_warn" dir="ltr">用于备用NOFILENAMECHECK的重复目标数据库;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__CHDDFDGH">
                  <p class="titleinexample">示例2-92在OMF和ASM中创建备用数据库</p>
                  <p><a id="d43747e3768" class="indexterm-anchor"></a><a id="d43747e3772" class="indexterm-anchor"></a>假设您要使用RMAN备份在使用OMF和ASM的主机上创建备用数据库。源数据库称为<code class="codeph">prod1</code> ，是Data Guard环境中的主数据库。
                  </p>
                  <p>首先，启动RMAN客户端， <code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code>到数据库<code class="codeph">prod1</code>作为<code class="codeph">TARGET</code> ，并连接到恢复目录。运行以下命令，将备用数据库的默认设备类型<code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code>为<code class="codeph">sbt</code> ，备用数据库为<code class="codeph">standby1</code>的<code class="codeph">DB_UNIQUE_NAME</code> ，网络服务名称为<code class="codeph">sby1</code> 。
                  </p><pre class="oac_no_warn" dir="ltr">CONFIGURE CONNECT IDENTIFIER“sby1”FOR DB_UNIQUE_NAME standby1;配置默认设备类型为DB_UNIQUE_NAME standby1;配置设备类型sbt PARALLELISM 2 FOR DB_UNIQUE_NAME standby1;</pre><p>假设创建备用数据库所需的所有备份都存储在磁带上。您在数据库<code class="codeph">standby1</code>的初始化参数文件中设置以下参数：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将<code class="codeph">DB_UNIQUE_NAME</code>设置为值<code class="codeph">standby1</code> 。
                        </p>
                     </li>
                     <li>
                        <p>将<code class="codeph">DB_CREATE_FILE_DEST</code>和<code class="codeph">DB_RECOVERY_FILE_DEST</code>设置为备用主机上的所需ASM磁盘组。例如，设置<code class="codeph">DB_CREATE_FILE_DEST</code>到<code class="codeph">+DATAFILE</code>和<code class="codeph">DB_RECOVERY_FILE_DEST</code>到<code class="codeph">+FLASH_REC_AREA</code> 。</p>
                     </li>
                  </ul>
                  <p>确保备用实例处于<code class="codeph">NOMOUNT</code>模式。启动RMAN客户端，将数据库<code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code>到数据库<code class="codeph">prod1</code>作为<code class="codeph">TARGET</code> ，连接到<code class="codeph">standby1</code>实例作为<code class="codeph">AUXILIARY</code> ，并连接到恢复目录。输入以下命令以创建备用数据库：</p><pre class="oac_no_warn" dir="ltr">用于待机的重复目标数据库;</pre><p>RMAN自动为还原的数据文件生成新的OMF / ASM数据文件名。</p>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-03A90CCC-D820-40DE-8E92-CFF69A24F5E2">
                  <p class="titleinexample">示例2-93在没有连接到目标数据库和恢复目录的情况下复制数据库</p>
                  <p>在此示例中，可以从以下位置访问数据文件，控制文件和数据库<code class="codeph">prod</code>存档日志的所有必要备份： <code class="codeph">/net/prod/backups</code> 。此位置仅驻留数据库<code class="codeph">prod</code>备份。唯一的连接是作为<code class="codeph">AUXILIARY</code>的新实例。</p>
                  <p>如果没有与恢复目录或目标数据库的连接，请输入以下命令以创建测试数据库：</p><pre class="oac_no_warn" dir="ltr">重复数据库'测试'备份位置'/ net / prod / backups'NOFILENAMECHECK;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-D370FB02-059B-4B18-8D07-E521DA73B688">
                  <p class="titleinexample">示例2-94在不连接目标数据库和恢复目录的情况下复制时选择特定数据库</p>
                  <p>在此示例中， <code class="codeph">/backups</code>包含来自多个数据库的备份，包括两个以上名称为<code class="codeph">PROD</code>数据库。在这种情况下，您必须指定要复制的数据库的<code class="codeph">DBNAME</code>和<code class="codeph">DBID</code> 。唯一的连接是辅助实例。
                  </p><pre class="oac_no_warn" dir="ltr">DUPLICATE DATABASE'PROD'dbid 8675309'TEST'UNTIL TIME“to_date（'11 / 01/2013'，'MM / DD / YYYY'）”BACKUP LOCATION'/ backups'NOFILENAMECHECK PFILE ='？/dbs/inittest.ora'db_file_name_convert ='prod'，'test';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4__GUID-B7DE1167-97EF-4F9D-83D1-D4F4B81D104A">
                  <p class="titleinexample">例2-95将PDB中的PDB和特定表空间复制到新CDB</p>
                  <p>在此示例中，PDB <code class="codeph">pdb1</code> ， <code class="codeph">pdb5</code>和PDB <code class="codeph">pdb2</code>中的<code class="codeph">users</code>表空间被复制到新的CDB。默认情况下，RMAN还会复制CDB中的<code class="codeph">root</code>和种子数据库。必须使用包含声明<code class="codeph">enable_pluggable_database=TRUE</code>的初始化参数文件启动辅助实例。您以具有公共<code class="codeph">SYSBACKUP</code>权限的用户身份连接到root。
                  </p><pre class="oac_no_warn" dir="ltr">DUPLICATE TARGET DATABASE to cdb PLUGGABLE DATABASE pdb1，pdb5 TABLESPACE pdb2：users;</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
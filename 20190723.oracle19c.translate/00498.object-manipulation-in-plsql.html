<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>PL / SQL中的对象操作</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Object-Relational Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Object-Relational Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96436-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="declaring-initializing-objects-in-plsql.html" title="Previous" type="text/html"></link>
      <link rel="next" href="use-of-overloading-in-plsql-with-inheritance.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADOBJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="declaring-initializing-objects-in-plsql.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="use-of-overloading-in-plsql-with-inheritance.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">对象关系开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-pl-sql-with--object-types.html" property="item" typeof="WebPage"><span property="name">将PL / SQL与对象类型一起使用</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PL / SQL中的对象操作</li>
            </ol>
            <a id="GUID-958F01EE-38E4-490D-BAC3-23FBE6023C2E" name="GUID-958F01EE-38E4-490D-BAC3-23FBE6023C2E"></a><a id="ADOBJ07002"></a>
            
            <h2 id="ADOBJ-GUID-958F01EE-38E4-490D-BAC3-23FBE6023C2E" class="sect2"><span class="enumeration_section">3.2</span> PL / SQL中的对象操作</h2>
         </header>
         <div class="ind">
            <div>
               <p>本节介绍如何在PL / SQL中操作对象属性和方法。</p>
               <p>本节包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="object-manipulation-in-plsql.html#GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6">使用点表示法访问对象属性</a></p>
                  </li>
                  <li>
                     <p><a href="object-manipulation-in-plsql.html#GUID-560D4EFF-D8DB-46AE-95C0-379B19848220">调用对象构造函数和方法</a></p>
                  </li>
                  <li>
                     <p><a href="object-manipulation-in-plsql.html#GUID-65B895C1-6D76-40C2-86CD-88FF13E8C747">更新和删除对象</a></p>
                  </li>
                  <li>
                     <p><a href="object-manipulation-in-plsql.html#GUID-E7CBE2F9-0509-4C99-A848-884187578E1D">使用Ref修饰符操作对象操作</a></p>
                  </li>
               </ul>
            </div><a id="ADOBJ7177"></a><a id="ADOBJ7176"></a><div class="props_rev_3"><a id="GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6" name="GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6"></a><h3 id="ADOBJ-GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6" class="sect3"><span class="enumeration_section">3.2.1</span>使用点表示法访问对象属性</h3>
               <div>
                  <div class="section">
                     <p>您可以按名称引用属性。要访问或更改属性的值，请使用点表示法。</p>
                     <p>可以链接属性名称，从而可以访问嵌套对象类型的属性。<a href="object-manipulation-in-plsql.html#GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6__CIHBCFEI">例3-3</a>使用点表示法并生成与<a href="declaring-initializing-objects-in-plsql.html#GUID-FA468D73-0858-484F-B1BF-2811215F3632__BABIHHCG">例3-2</a>相同的输出。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6__CIHBCFEI">
                     <p class="titleinexample">示例3-3访问对象属性</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。3-1 DECLARE emp employee_typ; BEGIN emp：= <span class="bold">employee_typ</span> （315，'Francis'，'Logan'，'FLOGAN'，'415.555.0100'，'01 -MAY-04'，'SA_MAN'，11000，.15,101,110，address_typ（' 376 Mission'，'San Francisco'，'CA'，'94222'））; DBMS_OUTPUT.PUT_LINE（emp.first_name ||''|| emp.last_name）; DBMS_OUTPUT.PUT_LINE（emp.address.street）; DBMS_OUTPUT.PUT_LINE（emp.address.city ||'，'|| emp.address.state ||''|| emp.address.postal_code）;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7179"></a><a id="ADOBJ7178"></a><div class="props_rev_3"><a id="GUID-560D4EFF-D8DB-46AE-95C0-379B19848220" name="GUID-560D4EFF-D8DB-46AE-95C0-379B19848220"></a><h3 id="ADOBJ-GUID-560D4EFF-D8DB-46AE-95C0-379B19848220" class="sect3"><span class="enumeration_section">3.2.2</span>调用对象构造函数和方法</h3>
               <div>
                  <div class="section">
                     <p>只要允许函数调用，就允许调用构造函数。</p>
                     <p>像所有函数一样，构造函数被称为表达式的一部分，如<a href="object-manipulation-in-plsql.html#GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6__CIHBCFEI">例3-3</a>和<a href="object-manipulation-in-plsql.html#GUID-560D4EFF-D8DB-46AE-95C0-379B19848220__CIHDFEDI">例3-4所示</a> 。
                     </p>
                     <p>将参数传递给构造函数时，调用会将初始值分配给要实例化的对象的属性。当您调用默认构造函数来填充所有属性值时，必须为每个属性提供一个参数;与常量和变量不同，属性不能具有默认值。您可以使用命名表示法而不是位置表示法来调用构造函数。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-560D4EFF-D8DB-46AE-95C0-379B19848220__CIHDFEDI">
                     <p class="titleinexample">示例3-4在对象表中插入行</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。3-1 DECLARE emp <span class="bold">employee_typ</span> ; BEGIN INSERT INTO employee_tab VALUES（employee_typ（310，'Evers'，'Boston'，'EBOSTON'，'617.555.0100'，'01 -AUG-04'，'SA_REP'，9000，.15,101,110，address_typ （'123 Main'，'San Francisco'，'CA'，'94111'）））; INSERT INTO employee_tab VALUES（employee_typ（320，'Martha'，'Dunn'，'MDUNN'，'650.555.0150'，'30 -SEP-04'，'AC_MGR'，12500,0,101,110，address_typ（' 123 Broadway'，'Redwood City'，'CA'，'94065'）））;结束; /从employee_tab e中选择VALUE（e）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7180"></a><div class="props_rev_3"><a id="GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C" name="GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C"></a><h3 id="ADOBJ-GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C" class="sect3"><span class="enumeration_section">3.2.3</span>访问对象方法</h3>
               <div>
                  <p>与打包的子程序一样，使用点表示法调用方法。</p>
                  <div class="section">
                     <p>在<a href="object-manipulation-in-plsql.html#GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C__CIHIBDFI">示例3-5中</a> ，调用<code class="codeph">display_address</code>方法以显示对象的属性。请注意使用<code class="codeph">VALUE</code>函数返回对象的值。<code class="codeph">VALUE</code>将相关变量作为其参数。在此上下文中，关联变量是与对象表中的行关联的行变量或表别名。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C__CIHIBDFI">
                     <p class="titleinexample">示例3-5访问对象方法</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 3-1和Ex。3-4 DECLARE emp employee_typ; BEGIN SELECT VALUE（e）INTO emp FROM employee_tab e WHERE e.employee_id = 310; <span class="bold">emp.display_address（）</span> ;结束; /</pre><p>在SQL语句中，对无参数方法的调用需要空参数列表。在过程语句中，除非您链接调用，否则空参数列表是可选的，在这种情况下，除了最后一次调用之外，所有参数都是必需的。此外，如果链接两个函数调用，第一个函数必须返回一个可以传递给第二个函数的对象。</p>
                     <p>如果在DML操作期间使用PL / SQL函数代替ADT构造函数，则该函数可以作为DML执行的一部分执行多次。对于每次出现只执行一次的函数，它必须是确定性函数。</p>
                     <p>对于静态方法，调用使用符号<span class="italic"><code class="codeph">type_name</code></span> <code class="codeph">.</code> <span class="italic"><code class="codeph">method_name</code></span>而不是指定类型的实例。
                     </p>
                     <p>使用子类型的实例调用方法时，执行的实际方法取决于类型层次结构中的声明。如果子类型覆盖从其超类型继承的方法，则调用将使用子类型实现。否则，调用使用超类型实现。此功能称为动态方法分派。</p>
                     <div class="infoboxnotealso" id="GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C__GUID-A4156F10-9FCA-4278-9ECF-E8090D3F1630">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="inheritance-in-sql-object-types.html#GUID-C2DF60C8-025E-49E3-ABE4-375C4E36D806" title="动态方法分派是指在运行时将方法调用分派到最近的实现的方式，从当前或指定的类型处理类型层次结构。">动态方法调度</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7182"></a><a id="ADOBJ7181"></a><div class="props_rev_3"><a id="GUID-65B895C1-6D76-40C2-86CD-88FF13E8C747" name="GUID-65B895C1-6D76-40C2-86CD-88FF13E8C747"></a><h3 id="ADOBJ-GUID-65B895C1-6D76-40C2-86CD-88FF13E8C747" class="sect3"><span class="enumeration_section">3.2.4</span>更新和删除对象</h3>
               <div>
                  <div class="section">
                     <p>从PL / SQL块内部，您可以修改和删除对象表中的行。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-65B895C1-6D76-40C2-86CD-88FF13E8C747__GUID-4ADA0DA5-1CFA-4827-8665-83A19F78653A">
                     <p class="titleinexample">示例3-6更新和删除对象表中的行</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 3-1和3-4 DECLARE emp employee_typ; BEGIN INSERT INTO employee_tab VALUES（employee_typ（370，'Robert'，'Myers'，'RMYERS'，'415.555.0150'，'07 -NOV-04'，'SA_REP'，8800，.12,101,110，address_typ （'540菲尔莫尔'，'旧金山'，'加州'，'94011'）））; <span class="bold">UPDATE</span> employee_tab e SET e.address.street ='1040 California'WHERE e.employee_id = 370; <span class="bold">DELETE</span> FROM employee_tab e WHERE e.employee_id = 310;结束; /从employee_tab e中选择VALUE（e）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7184"></a><a id="ADOBJ7185"></a><a id="ADOBJ7183"></a><div class="props_rev_3"><a id="GUID-E7CBE2F9-0509-4C99-A848-884187578E1D" name="GUID-E7CBE2F9-0509-4C99-A848-884187578E1D"></a><h3 id="ADOBJ-GUID-E7CBE2F9-0509-4C99-A848-884187578E1D" class="sect3"><span class="enumeration_section">3.2.5</span>使用Ref修饰符操作对象操作</h3>
               <div>
                  <div class="section">
                     <p>您可以使用函数<code class="codeph">REF</code>检索<code class="codeph">REF</code> ，该函数将相关变量或别名作为其参数。
                     </p>
                     <p>您可以将<code class="codeph">REF</code>声明为变量，参数，字段或属性。您可以在SQL数据操作语句中将<code class="codeph">REF</code>用作输入或输出变量。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E7CBE2F9-0509-4C99-A848-884187578E1D__GUID-FF66529F-EC4F-4EC3-99EE-0FA41A885C20">
                     <p class="titleinexample">示例3-7使用REF修改器更新对象表中的行</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 3-1,3-4和3-6 DECLARE emp employee_typ; emp_ref REF employee_typ; BEGIN SELECT REF（e）INTO emp_ref FROM employee_tab e WHERE e.employee_id = 370; UPDATE employee_tab <span class="bold">e</span> SET <span class="bold">e</span> .address = address_typ（'8701 College'，'Oakland'，'CA'，'94321'）WHERE REF（e）= emp_ref;结束; /</pre><p>您无法在PL / SQL中浏览<code class="codeph">REF</code> 。例如，不允许使用<code class="codeph">REF</code>在<a href="object-manipulation-in-plsql.html#GUID-E7CBE2F9-0509-4C99-A848-884187578E1D__BABDDCJB">示例3-8中</a>进行分配。而是使用函数<code class="codeph">DEREF</code>或调用包<code class="codeph">UTL_REF</code>来访问该对象。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-E7CBE2F9-0509-4C99-A848-884187578E1D__BABDDCJB">
                     <p class="titleinexample">示例3-8尝试在SELECT INTO语句中使用DEREF，不正确</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 3-1,3-4和3-6 DECLARE emp employee_typ; emp_ref REF employee_typ; emp_name VARCHAR2（50）; BEGIN SELECT REF（e）INTO emp_ref FROM employee_tab e WHERE e.employee_id = 370; - 以下赋值引发错误，PL / SQL中不允许使用：= DEREF（emp_ref）; - 不能在程序语句emp_name：= emp.first_name ||中使用DEREF ''|| emp.last_name; DBMS_OUTPUT.PUT_LINE（EMP_NAME）;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>此分配引发错误，如下所述：</p><pre class="oac_no_warn" dir="ltr">PL / SQL中不允许 -  emp_name：= emp_ref.first_name || ''|| emp_ref.last_name; -  emp：= DEREF（emp_ref）;不允许，不能在程序性陈述中使用DEREF</pre><div class="infoboxnotealso" id="GUID-E7CBE2F9-0509-4C99-A848-884187578E1D__GUID-F8A34BD4-7FF1-4964-BE3A-0C476BC6B92D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>有关<code class="codeph">REF</code>功能的信息，请参阅<a href="../sqlrf/REF.html#SQLRF00694" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </li>
                           <li>
                              <p>有关<code class="codeph">DEREF</code>函数的详细信息，请参见<a href="../sqlrf/DEREF.html#SQLRF00634" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Object Manipulation in PL/SQL</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Object-Relational Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Object-Relational Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96436-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="declaring-initializing-objects-in-plsql.html" title="Previous" type="text/html">
      <link rel="next" href="use-of-overloading-in-plsql-with-inheritance.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADOBJ">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="declaring-initializing-objects-in-plsql.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="use-of-overloading-in-plsql-with-inheritance.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Object-Relational Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-pl-sql-with--object-types.html" property="item" typeof="WebPage"><span property="name"> Using PL/SQL With Object Types</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Object Manipulation in PL/SQL</li>
            </ol>
            <a id="GUID-958F01EE-38E4-490D-BAC3-23FBE6023C2E" name="GUID-958F01EE-38E4-490D-BAC3-23FBE6023C2E"></a><a id="ADOBJ07002"></a>
            
            <h2 id="ADOBJ-GUID-958F01EE-38E4-490D-BAC3-23FBE6023C2E" class="sect2"><span class="enumeration_section">3.2 </span>Object Manipulation in PL/SQL
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This section describes how to manipulate object attributes and methods in PL/SQL.</p>
               <p>This section includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="object-manipulation-in-plsql.html#GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6">Accessing Object Attributes With Dot Notation</a></p>
                  </li>
                  <li>
                     <p><a href="object-manipulation-in-plsql.html#GUID-560D4EFF-D8DB-46AE-95C0-379B19848220">Calling Object Constructors and Methods</a></p>
                  </li>
                  <li>
                     <p><a href="object-manipulation-in-plsql.html#GUID-65B895C1-6D76-40C2-86CD-88FF13E8C747">Updating and Deleting Objects</a></p>
                  </li>
                  <li>
                     <p><a href="object-manipulation-in-plsql.html#GUID-E7CBE2F9-0509-4C99-A848-884187578E1D">Manipulating Object Manipulation with Ref Modifiers</a></p>
                  </li>
               </ul>
            </div><a id="ADOBJ7177"></a><a id="ADOBJ7176"></a><div class="props_rev_3"><a id="GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6" name="GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6"></a><h3 id="ADOBJ-GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6" class="sect3"><span class="enumeration_section">3.2.1 </span>Accessing Object Attributes With Dot Notation
               </h3>
               <div>
                  <div class="section">
                     <p>You refer to an attribute by name. To access or change the value of an attribute, you use dot notation.</p>
                     <p> Attribute names can be chained, which lets you access the attributes of a nested object type. <a href="object-manipulation-in-plsql.html#GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6__CIHBCFEI">Example 3-3</a> uses dot notation and generates the same output as <a href="declaring-initializing-objects-in-plsql.html#GUID-FA468D73-0858-484F-B1BF-2811215F3632__BABIHHCG">Example 3-2</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6__CIHBCFEI">
                     <p class="titleinexample">Example 3-3 Accessing Object Attributes</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 3-1
DECLARE
  emp employee_typ;
BEGIN
  emp := <span class="bold">employee_typ</span>(315, 'Francis', 'Logan', 'FLOGAN',
        '415.555.0100', '01-MAY-04', 'SA_MAN', 11000, .15, 101, 110, 
         address_typ('376 Mission', 'San Francisco', 'CA', '94222'));
  DBMS_OUTPUT.PUT_LINE(emp.first_name || ' '  || emp.last_name);
  DBMS_OUTPUT.PUT_LINE(emp.address.street);
  DBMS_OUTPUT.PUT_LINE(emp.address.city || ', '  ||emp. address.state || ' ' ||
                       emp.address.postal_code);   
END;
/</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7179"></a><a id="ADOBJ7178"></a><div class="props_rev_3"><a id="GUID-560D4EFF-D8DB-46AE-95C0-379B19848220" name="GUID-560D4EFF-D8DB-46AE-95C0-379B19848220"></a><h3 id="ADOBJ-GUID-560D4EFF-D8DB-46AE-95C0-379B19848220" class="sect3"><span class="enumeration_section">3.2.2 </span>Calling Object Constructors and Methods
               </h3>
               <div>
                  <div class="section">
                     <p>Calls to a constructor are allowed wherever function calls are allowed.</p>
                     <p> A constructor, like all functions, is called as part of an expression, as shown in <a href="object-manipulation-in-plsql.html#GUID-718B709A-90F2-4997-90F6-067BFCE1A8E6__CIHBCFEI">Example 3-3</a> and <a href="object-manipulation-in-plsql.html#GUID-560D4EFF-D8DB-46AE-95C0-379B19848220__CIHDFEDI">Example 3-4</a>.
                     </p>
                     <p>When you pass parameters to a constructor, the call assigns initial values to the attributes of the object being instantiated. When you call the default constructor to fill in all attribute values, you must supply a parameter for every attribute; unlike constants and variables, attributes cannot have default values. You can call a constructor using named notation instead of positional notation.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-560D4EFF-D8DB-46AE-95C0-379B19848220__CIHDFEDI">
                     <p class="titleinexample">Example 3-4 Inserting Rows in an Object Table</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 3-1
DECLARE
  emp <span class="bold">employee_typ</span>;
BEGIN
  INSERT INTO employee_tab VALUES (employee_typ(310, 'Evers', 'Boston', 'EBOSTON',
   '617.555.0100', '01-AUG-04', 'SA_REP', 9000, .15, 101, 110, 
    address_typ('123 Main', 'San Francisco', 'CA', '94111')) );
  INSERT INTO employee_tab VALUES (employee_typ(320, 'Martha', 'Dunn', 'MDUNN',
    '650.555.0150', '30-SEP-04', 'AC_MGR', 12500, 0, 101, 110,
    address_typ('123 Broadway', 'Redwood City', 'CA', '94065')) );
END;
/
SELECT VALUE(e) from employee_tab e;
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7180"></a><div class="props_rev_3"><a id="GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C" name="GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C"></a><h3 id="ADOBJ-GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C" class="sect3"><span class="enumeration_section">3.2.3 </span>Accessing Object Methods
               </h3>
               <div>
                  <p>Like packaged subprograms, methods are called using dot notation.</p>
                  <div class="section">
                     <p>In <a href="object-manipulation-in-plsql.html#GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C__CIHIBDFI">Example 3-5</a>, the <code class="codeph">display_address</code> method is called to display attributes of an object. Note the use of the <code class="codeph">VALUE</code> function which returns the value of an object. <code class="codeph">VALUE</code> takes as its argument a correlation variable. In this context, a correlation variable is a row variable or table alias associated with a row in an object table. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C__CIHIBDFI">
                     <p class="titleinexample">Example 3-5 Accessing Object Methods</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 3-1 and Ex. 3-4
DECLARE
  emp employee_typ;
BEGIN
  SELECT VALUE(e) INTO emp FROM employee_tab e WHERE e.employee_id = 310;
  <span class="bold">emp.display_address()</span>;
END;
/
</pre><p>In SQL statements, calls to a parameterless method require an empty parameter list. In procedural statements, an empty parameter list is optional unless you chain calls, in which case it is required for all but the last call. Also, if you chain two function calls, the first function must return an object that can be passed to the second function.</p>
                     <p>If a PL/SQL function is used in place of an ADT constructor during a DML operation, the function may execute multiple times as part of the DML execution. For the function to execute only once per occurrence, it must be a deterministic function.</p>
                     <p>For static methods, calls use the notation <span class="italic"><code class="codeph">type_name</code></span><code class="codeph">.</code><span class="italic"><code class="codeph">method_name</code></span> rather than specifying an instance of the type.
                     </p>
                     <p>When you call a method using an instance of a subtype, the actual method that is executed depends on declarations in the type hierarchy. If the subtype overrides the method that it inherits from its supertype, the call uses the subtype implementation. Otherwise, the call uses the supertype implementation. This capability is known as dynamic method dispatch.</p>
                     <div class="infoboxnotealso" id="GUID-D4944882-B00C-4ED1-B320-4CC89F049D6C__GUID-A4156F10-9FCA-4278-9ECF-E8090D3F1630">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-C2DF60C8-025E-49E3-ABE4-375C4E36D806" title="Dynamic method dispatch refers to the way that method calls are dispatched to the nearest implementation at run time, working up the type hierarchy from the current or specified type.">Dynamic Method Dispatch</a>"</span></p>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7182"></a><a id="ADOBJ7181"></a><div class="props_rev_3"><a id="GUID-65B895C1-6D76-40C2-86CD-88FF13E8C747" name="GUID-65B895C1-6D76-40C2-86CD-88FF13E8C747"></a><h3 id="ADOBJ-GUID-65B895C1-6D76-40C2-86CD-88FF13E8C747" class="sect3"><span class="enumeration_section">3.2.4 </span>Updating and Deleting Objects
               </h3>
               <div>
                  <div class="section">
                     <p>From inside a PL/SQL block you can modify and delete rows in an object table.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-65B895C1-6D76-40C2-86CD-88FF13E8C747__GUID-4ADA0DA5-1CFA-4827-8665-83A19F78653A">
                     <p class="titleinexample">Example 3-6 Updating and Deleting Rows in an Object Table</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 3-1 and 3-4
DECLARE
  emp employee_typ;
BEGIN
  INSERT INTO employee_tab VALUES (employee_typ(370, 'Robert', 'Myers', 'RMYERS',
   '415.555.0150', '07-NOV-04', 'SA_REP', 8800, .12, 101, 110, 
    address_typ('540 Fillmore', 'San Francisco', 'CA', '94011')) );
  <span class="bold">UPDATE</span> employee_tab e SET e.address.street = '1040 California' 
     WHERE e.employee_id = 370;
  <span class="bold">DELETE</span> FROM employee_tab e WHERE e.employee_id = 310;
END;
/
SELECT VALUE(e) from employee_tab e;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7184"></a><a id="ADOBJ7185"></a><a id="ADOBJ7183"></a><div class="props_rev_3"><a id="GUID-E7CBE2F9-0509-4C99-A848-884187578E1D" name="GUID-E7CBE2F9-0509-4C99-A848-884187578E1D"></a><h3 id="ADOBJ-GUID-E7CBE2F9-0509-4C99-A848-884187578E1D" class="sect3"><span class="enumeration_section">3.2.5 </span>Manipulating Object Manipulation with Ref Modifiers
               </h3>
               <div>
                  <div class="section">
                     <p>You can retrieve <code class="codeph">REF</code>s using the function <code class="codeph">REF</code>, which takes as its argument a correlation variable or alias. 
                     </p>
                     <p>You can declare <code class="codeph">REF</code>s as variables, parameters, fields, or attributes. You can use <code class="codeph">REF</code>s as input or output variables in SQL data manipulation statements.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E7CBE2F9-0509-4C99-A848-884187578E1D__GUID-FF66529F-EC4F-4EC3-99EE-0FA41A885C20">
                     <p class="titleinexample">Example 3-7 Updating Rows in an Object Table With a REF Modifier</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 3-1, 3-4, and 3-6
DECLARE
  emp         employee_typ;
  emp_ref REF employee_typ;
BEGIN
  SELECT REF(e) INTO emp_ref FROM employee_tab e WHERE e.employee_id = 370;
  UPDATE employee_tab <span class="bold">e</span> 
    SET <span class="bold">e</span>.address = address_typ('8701 College', 'Oakland', 'CA', '94321')
    WHERE REF(e) = emp_ref;
END;
/</pre><p>You cannot navigate through <code class="codeph">REF</code>s in PL/SQL. For example, the assignment in <a href="object-manipulation-in-plsql.html#GUID-E7CBE2F9-0509-4C99-A848-884187578E1D__BABDDCJB">Example 3-8</a> using a <code class="codeph">REF</code> is not allowed. Instead, use the function <code class="codeph">DEREF</code> or make calls to the package <code class="codeph">UTL_REF</code> to access the object. 
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-E7CBE2F9-0509-4C99-A848-884187578E1D__BABDDCJB">
                     <p class="titleinexample">Example 3-8 Trying to Use DEREF in a SELECT INTO Statement, Incorrect</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 3-1, 3-4, and 3-6
DECLARE 
  emp           employee_typ;
  emp_ref   REF employee_typ;
  emp_name      VARCHAR2(50);
BEGIN
  SELECT REF(e) INTO emp_ref FROM employee_tab e WHERE e.employee_id = 370;
  -- the following assignment raises an error, not allowed in PL/SQL  emp := DEREF(emp_ref);  --  cannot use DEREF in procedural statements
  emp_name := emp.first_name || ' ' || emp.last_name;
  DBMS_OUTPUT.PUT_LINE(emp_name);
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>This assignment raises an error as described below:</p><pre class="oac_no_warn" dir="ltr">not allowed in PL/SQL
-- emp_name := emp_ref.first_name || ' ' || emp_ref.last_name;
-- emp := DEREF(emp_ref); not allowed, cannot use DEREF in procedural statements
</pre><div class="infoboxnotealso" id="GUID-E7CBE2F9-0509-4C99-A848-884187578E1D__GUID-F8A34BD4-7FF1-4964-BE3A-0C476BC6B92D">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>For information on the <code class="codeph">REF</code> function, see <a href="../sqlrf/REF.html#SQLRF00694" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>.
                           </li>
                           <li>
                              <p>For detailed information on the <code class="codeph">DEREF</code> function, see <a href="../sqlrf/DEREF.html#SQLRF00634" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
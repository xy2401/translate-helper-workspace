<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Dot notation is designed for easy, general use and common use cases. Queries of JSON data that use dot-notation syntax return JSON values whenever possible."></meta>
      <meta name="description" content="Dot notation is designed for easy, general use and common use cases. Queries of JSON data that use dot-notation syntax return JSON values whenever possible."></meta>
      <title>简单的点表示法访问JSON数据</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="JSON Developer&#39;s Guide"></meta>
      <meta property="og:description" content="Dot notation is designed for easy, general use and common use cases. Queries of JSON data that use dot-notation syntax return JSON values whenever possible."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="JSON Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="json-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-22T10:58:31-08:00"></meta>
      <meta name="dcterms.title" content="JSON Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2015, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96227-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="query-json-data.html" title="Previous" type="text/html"></link>
      <link rel="next" href="json-path-expressions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADJSN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="query-json-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="json-path-expressions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JSON开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="query-json-data.html" property="item" typeof="WebPage"><span property="name">查询JSON数据</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">简单的点表示法访问JSON数据</li>
            </ol>
            <a id="GUID-7249417B-A337-4854-8040-192D5CEFD576" name="GUID-7249417B-A337-4854-8040-192D5CEFD576"></a>
            
            <h2 id="ADJSN-GUID-7249417B-A337-4854-8040-192D5CEFD576" class="sect2"><span class="enumeration_chapter">12</span>简单的点表示法访问JSON数据</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='simple-dot-notation-access-to-json-data'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>点符号设计用于简单，通用和常见用例。使用点符号语法的JSON数据查询尽可能返回JSON值。</p>
               <p>点表示法查询的返回值<span class="italic">始终是</span>表示JSON数据<span class="italic">的字符串</span> （数据类型<code class="codeph">VARCHAR2(4000)</code> ）。字符串的内容取决于目标JSON数据，如下所示：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>如果定位<span class="italic">单个</span> JSON值，则该值是字符串内容，无论它是JSON标量，对象还是数组。
                     </p>
                  </li>
                  <li>
                     <p>如果定位了<span class="italic">多个</span> JSON值，则字符串内容是JSON数组，其元素是这些值。
                     </p>
                  </li>
               </ul>
               <p>此行为与SQL / JSON函数<code class="codeph">json_value</code>和<code class="codeph">json_query</code>行为形成对比，后者可用于更复杂的查询。如果您提供的路径表达式与查询的JSON数据不匹配，则它们可以返回<code class="codeph">NULL</code>或引发错误。它们接受可选子句来指定返回值的数据类型（ <code class="codeph">RETURNING</code>子句），是否将多个值包装为数组（包装子句），如何处理错误（ <code class="codeph">ON ERROR</code>子句）以及如何处理缺少的JSON字段（ <code class="codeph">ON EMPTY</code>子句）。
               </p>
               <p>在上面的第一种情况中，点符号行为类似于<span class="italic">标</span>量值的函数<code class="codeph">json_value</code> ，并且它类似于<span class="italic">对象</span>或<span class="italic">数组</span>值的<code class="codeph">json_query</code> 。在第二种情况下，行为类似于带有数组包装器的<code class="codeph">json_query</code> 。
               </p>
               <p>点符号<span class="italic">语法</span>是一个表别名（必填）后跟一个点，即句点（ <span class="bold"><code class="codeph">.</code></span> ），JSON列的名称以及一对或多对表单<span class="bold"><code class="codeph">.</code></span> <span class="italic"><code class="codeph">json_field</code></span>或<span class="bold"><code class="codeph">.</code></span> <span class="italic"><code class="codeph">json_field</code></span>后跟<span class="italic"><code class="codeph">array_step</code></span> ，其中<span class="italic"><code class="codeph">json_field</code></span>是JSON字段名称， <span class="italic"><code class="codeph">array_step</code></span>是<a href="json-path-expressions.html#GUID-AEBAD813-99AB-418A-93AB-F96BC1658618" title="提供了SQL / JSON路径表达式的基本语法。它由上下文项符号（$）后跟零个或多个对象，数组和后代步骤组成，每个步骤后面都可以跟一个过滤器表达式，后面可选择一个函数步骤。提供了示例。">基本SQL / JSON路径表达式语法中</a>描述的数组步骤表达式。
               </p>
               <p>每个<span class="italic"><code class="codeph">json_field</code></span> <span class="italic">必须</span>是有效的SQL标识符， <a id="fn_1" name="fn_1" href="#fn_1" in="" particular,="" this="" means="" that="" you="" cannot="" use="" an="" empty="" field="" (="\" )="" with="" dot-notation="" syntax=")" ="" onclick="footdisplay(1, "><sup>Foot 1</sup></a>并且该列<span class="italic">必须</span>具有<code class="codeph">is json</code>检查约束，这确保它包含格式良好的JSON数据。如果不遵守这些规则中的任何一个，则在查询编译时会引发错误。（必须存在检查约束以避免引发错误;但是，它不需要处于活动状态。如果停用约束，则不会引发此错误。）
               </p>
               <p>对于JSON查询的点表示法， <span class="italic">与通常用于SQL的情况不同</span> ，不带引号的标识符（在列名之后）被<span class="italic">区分大小写</span> ，即，就像它们被引用一样。这是一种方便：您可以使用JSON字段名称作为标识符而不引用它们。例如，您可以编写<code class="codeph">jcolumn.friends</code>而不是<code class="codeph">jcolumn."friends"</code> 。这也意味着如果JSON对象使用大写命名，例如<code class="codeph">FRIENDS</code> ，则必须编写<code class="codeph">jcolumn.FRIENDS</code> ，而不是<code class="codeph">jcolumn.friends</code> 。
               </p>
               <p>以下是点符号语法的一些示例。所有这些都引用了具有别名<code class="codeph">po</code>的表的JSON列<code class="codeph">po_document</code> 。
               </p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><code class="codeph">po.po_document。PONumber</code> - 字段<code class="codeph">PONumber</code>的值。
                     </p>
                  </li>
                  <li>
                     <p><code class="codeph">po.po_document。LineItems[1]</code> - 数组<code class="codeph">LineItems</code>的第二个元素（数组位置从零开始）。
                     </p>
                  </li>
                  <li>
                     <p><code class="codeph">po.po_document。LineItems[*]</code> - 数组<code class="codeph">LineItems</code>所有元素（ <code class="codeph">*</code>是通配符）。
                     </p>
                  </li>
                  <li>
                     <p><code class="codeph">po.po_document。ShippingInstructions.name</code> - 字段<code class="codeph">name</code>的值，对象<code class="codeph">ShippingInstructions</code>的子项。
                     </p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-7249417B-A337-4854-8040-192D5CEFD576__GUID-70273649-FEBB-4437-8E6A-A6938CBF7245">
                  <p class="notep1">注意：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>点符号语法的每个组件限制为最多128个字节。</p>
                        <p>有关<span class="italic">SQL</span>点表示法语法和SQL标识符的详细信息，请参阅<a href="../sqlrf/Database-Object-Names-and-Qualifiers.html#SQLRF51129" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                        </p>
                     </li>
                     <li>
                        <p>简单的点符号JSON查询不能返回长度超过4K字节的值。如果该值超过此限制，则返回SQL <code class="codeph">NULL</code> 。为了获得实际值，使用SQL / JSON功能<code class="codeph">json_query</code>或<code class="codeph">json_value</code>代替点符号的，指定具有适当的返回类型<code class="codeph">RETURNING</code>子句。
                        </p>
                        <p>有关<span class="italic">JSON</span>点表示法语法的详细信息，请参阅<a href="../sqlrf/JSON-Object-Access-Expressions.html#SQLRF57024" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <p>针对JSON数据的JSON点表示法表达的<span class="italic">匹配</span>相同一个SQL / JSON路径表达式的匹配，包括松弛以允许隐含阵列迭代（见<a href="json-path-expressions.html#GUID-951A61D5-EDC2-4E30-A20C-AE2AE7605C77" title="放宽基本的SQL / JSON路径表达式语法，以允许隐式数组包装和解包。这意味着，如果数据发展为使用此类值的数组替换JSON值，则无需更改代码中的路径表达式，反之亦然。提供了示例。">SQL / JSON路径表达式语法松弛</a> ）。点符号表达式的JSON列对应于路径表达式的上下文项，点符号中使用的每个标识符对应于路径表达式中使用的标识符。
               </p>
               <p>例如，如果JSON列<code class="codeph">jcolumn</code>对应于path-expression上下文项，则表达式<code class="codeph">jcolumn.friends</code>对应于路径表达式<code class="codeph">$.friends</code> <code class="codeph">jcolumn.friends.name</code> ，而<code class="codeph">jcolumn.friends.name</code>对应于路径表达式<code class="codeph">$.friends.name</code> 。
               </p>
               <p>对于后一示例，上下文项可以是对象或对象数组。如果它是一个对象数组，那么数组中的每个对象都匹配一个字段的<code class="codeph">friends</code> 。现场<code class="codeph">friends</code>的价值本身可以是一个对象或一组对象。在后一种情况下，使用数组中的第一个对象。
               </p>
               <div class="infoboxnote" id="GUID-7249417B-A337-4854-8040-192D5CEFD576__GUID-44D99971-E80A-4565-82A2-5BB5C4EF4100">
                  <p class="notep1">注意：</p>
                  <p>除了（1）对数组元素<span class="italic">隐含</span>使用通配符（请参阅<a href="json-path-expressions.html#GUID-951A61D5-EDC2-4E30-A20C-AE2AE7605C77" title="放宽基本的SQL / JSON路径表达式语法，以允许隐式数组包装和解包。这意味着，如果数据发展为使用此类值的数组替换JSON值，则无需更改代码中的路径表达式，反之亦然。提供了示例。">SQL / JSON路径表达式语法松弛</a> ）和（2）在数组括号（ <code class="codeph">[*]</code> ）之间显式使用通配符之外，您<span class="italic">不能</span>在路径中使用通配符使用点符号语法时的表达式。这是因为星号（ <code class="codeph">*</code> ）不是有效的<span class="italic">SQL标识符</span> 。
                  </p>
                  <p>例如，这会引发语法错误： <code class="codeph">mytable.mycolumn.object1.<span class="bold">*</span> .object2</code> 。
                  </p>
                  <p>点符号语法是使用简单路径表达式的便捷替代方法;它不是一般使用路径表达式的替代品。</p>
               </div>
               <p><a href="simple-dot-notation-access-to-json-data.html#GUID-7249417B-A337-4854-8040-192D5CEFD576__CACGDHDB">例12-1</a>显示了等效的点符号和<code class="codeph">json_value</code>查询。给定来自<a href="creating-a-table-with-a-json-column.html#GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0__CACCIEFA">示例4-2</a>的数据，每个查询返回字符串<code class="codeph">"1600"</code> ， <code class="codeph">VARCHAR2</code>值表示JSON数<code class="codeph">1600</code> 。
               </p>
               <p><a href="simple-dot-notation-access-to-json-data.html#GUID-7249417B-A337-4854-8040-192D5CEFD576__CACCBEGC">例12-2</a>显示了等效的点符号和<code class="codeph">json_query</code>查询。第一对中的每个查询返回（表示<code class="codeph">VARCHAR2</code>值）电话对象的JSON数组。第二对中的每个查询都返回（表示<code class="codeph">VARCHAR2</code>值）一组电话类型，如<a href="function-JSON_QUERY.html#GUID-D64C7BE9-335D-449C-916D-1123539BF1FB__CACEAIBD">例17-1所示</a> 。
               </p>
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-7249417B-A337-4854-8040-192D5CEFD576__GUID-F22876BA-5F7B-4D42-A26A-58F522EE2A0F">
                     <p class="notep1">也可以看看：</p>
                     <p>有关用于SQL对象和对象属性访问的点表示法（对象访问表达式）的信息，请<a href="../sqlrf/JSON-Object-Access-Expressions.html#SQLRF57024" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-7249417B-A337-4854-8040-192D5CEFD576__CACGDHDB">
                  <p class="titleinexample">示例12-1 JSON点符号查询与JSON_VALUE比较</p><pre class="pre codeblock"><code>选择<span class="bold">po</span> .po_document <span class="bold">。</span>PONumber FROM j_purchaseorder <span class="bold">po</span> ; SELECT json_value（po_document，'$。PONumber'）FROM j_purchaseorder;</code></pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-7249417B-A337-4854-8040-192D5CEFD576__CACCBEGC">
                  <p class="titleinexample">示例12-2 JSON Dot-Notation查询与JSON_QUERY相比较</p><pre class="pre codeblock"><code>选择<span class="bold">po</span> .po_document <span class="bold">。</span>ShippingInstructions <span class="bold">。</span>电话来自j_purchaseorder <span class="bold">po</span> ; SELECT json_query（po_document，'$。ShippingInstructions。电话'）来自j_purchaseorder;选择<span class="bold">po</span> .po_document。ShippingInstructions <span class="bold">。</span>电话<span class="bold">。</span> type FROM j_purchaseorder <span class="bold">po</span> ; SELECT json_query（po_document，'$。ShippingInstructions。来自j_purchaseorder的Phone.type'WITH <span class="bold">WRAPPER</span> };</code></pre></div>
               <!-- class="example" -->
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="json-path-expressions.html#GUID-11006CA4-91CA-4D22-AB14-8F25508CFC5F" title="Oracle数据库使用SQL / JSON路径表达式提供对JSON数据的SQL访问。">SQL / JSON路径表达式概述</a></li>
                     <li><a href="creating-a-table-with-a-json-column.html#GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0" title="您可以创建具有JSON列的表。您使用SQL条件是json作为检查约束，以确保插入到列中的数据是（格式正确的）JSON数据。Oracle建议您在创建用于JSON数据的列时始终使用is_json检查约束。">使用JSON列创建表</a></li>
                     <li><a href="function-JSON_TABLE.html#GUID-0172660F-CE29-4765-BF2C-C405BDE8369A" title="SQL / JSON函数json_table将特定的JSON数据投影到各种SQL数据类型的列。您可以使用它将JSON文档的各个部分映射到新虚拟表的行和列中，您也可以将其视为内联视图。">SQL / JSON函数JSON_TABLE</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="query-json-data.html#GUID-119E5069-77F2-45DC-B6F0-A1B312945590" title="您可以使用简单的点表示法查询JSON数据，或者，对于更多功能，使用SQL / JSON函数和条件。您可以创建和查询数据指南，该指南汇总了一组JSON文档的结构和类型信息。">查询JSON数据</a></p>
                  </div>
               </div>
            </div>
            
            <hr><br><p style="text-decoration:underline">脚注图例</p>脚注1：特别是，这意味着您<span class="italic">不能</span>使用带有点符号语法的空字段名称（ <code class="codeph">""</code> ）。<br></div>
      </article>
   </body>
</html>
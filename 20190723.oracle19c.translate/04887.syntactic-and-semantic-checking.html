<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>句法和语义检查</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="cobol-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:40:40-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96466-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="performance-tuning.html" title="Previous" type="text/html"></link>
      <link rel="next" href="embedded-SQL-statements-and-precompiler-directives.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*COBOL Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="performance-tuning.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="embedded-SQL-statements-and-precompiler-directives.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">句法和语义检查</li>
            </ol>
            <a id="GUID-B8CA77C3-9C8B-4699-A6FF-4421FBF73A8C" name="GUID-B8CA77C3-9C8B-4699-A6FF-4421FBF73A8C"></a><a id="LNPCB019"></a>
            
            <h2 id="LNPCB-GUID-B8CA77C3-9C8B-4699-A6FF-4421FBF73A8C" class="sect2"><span class="enumeration_chapter">D</span>句法和语义检查</h2>
         </header>
         <div class="ind">
            <div>
               <p>通过检查嵌入式SQL语句和PL / SQL块的语法和语义，Oracle预编译器可帮助您快速查找和修复编码错误。本附录向您介绍如何使用SQLCHECK选项来控制检查的类型和范围。 <a id="d101510e22" class="indexterm-anchor"></a> 
               </p>
               <p>主题是：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="syntactic-and-semantic-checking.html#GUID-49010C30-E638-4ED4-9909-DC5F58C4D9D9">句法和语义检查基础</a></p>
                  </li>
                  <li>
                     <p><a href="syntactic-and-semantic-checking.html#GUID-F3CA8F53-8FF2-4FA0-BA62-AB0BE31F1BF8">控制检查的类型和范围</a></p>
                  </li>
                  <li>
                     <p><a href="syntactic-and-semantic-checking.html#GUID-A93A8256-6C8D-4233-8D56-E25997AF9EE2">指定SQLCHECK = SEMANTICS</a></p>
                  </li>
               </ul>
            </div><a id="LNPCB1335"></a><div class="props_rev_3"><a id="GUID-49010C30-E638-4ED4-9909-DC5F58C4D9D9" name="GUID-49010C30-E638-4ED4-9909-DC5F58C4D9D9"></a><h3 id="LNPCB-GUID-49010C30-E638-4ED4-9909-DC5F58C4D9D9" class="sect3"><span class="enumeration_section">D.1</span>句法和语义检查基础</h3>
               <div>
                  <p>语法规则指定语言元素如何排序以形成有效语句。因此， <span class="italic">语法检查会</span>验证关键字，对象名称，运算符，分隔符等是否正确放置在SQL语句中。它也适用于从PL / SQL块调用的过程和函数。例如，以下嵌入式SQL语句包含语法错误：<a id="d101510e72" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">*  - 拼写错误的关键字WHERE EXEC SQL DELETE FROM EMP WERE DEPTNO = 20 END-EXEC。 *  - 列名称缺少括号COMM和SAL EXEC SQL INSERT INTO EMP COMM，SAL VALUES（NULL，1500）END-EXEC。</pre><p>语义规则指定如何进行有效的外部引用。因此， <span class="italic">语义检查</span>验证对数据库对象和主机变量的引用是否有效以及主机变量数据类型是否正确。例如，以下嵌入式SQL语句包含语义错误：<a id="d101510e81" class="indexterm-anchor"></a><a id="d101510e83" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">*  - 不存在的表，EMPP EXEC SQL DELETE FROM EMPP WHERE DEPTNO = 20 END-EXEC。 *  - 未声明的主机变量，EMP-NAME EXEC SQL SELECT * FROM EMP WHERE ENAME =：EMP-NAME END-EXEC。</pre><p>SQL语法和语义的规则在<a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a>中定义。
                  </p>
               </div>
            </div><a id="LNPCB1336"></a><div class="props_rev_3"><a id="GUID-F3CA8F53-8FF2-4FA0-BA62-AB0BE31F1BF8" name="GUID-F3CA8F53-8FF2-4FA0-BA62-AB0BE31F1BF8"></a><h3 id="LNPCB-GUID-F3CA8F53-8FF2-4FA0-BA62-AB0BE31F1BF8" class="sect3"><span class="enumeration_section">D.2</span>控制检查的类型和范围</h3>
               <div>
                  <p>您可以通过在命令行上指定SQLCHECK选项来控制检查的类型和范围。使用SQLCHECK，检查的类型可以是语法，也可以是语法和语义。检查的范围可以包括数据操作语句和PL / SQL块。但是，SQLCHECK无法检查动态SQL语句，因为它们在运行时才完全定义。</p>
                  <p>您可以为SQLCHECK指定以下值：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>语义学|充分</p>
                     </li>
                     <li>
                        <p>语法|有限</p>
                     </li>
                  </ul>
                  <p>SEMANTICS和FULL的值是等价的，SYNTAX和LIMITED的值也是等价的。默认值为SYNTAX。</p>
               </div>
            </div><a id="LNPCB1337"></a><div class="props_rev_3"><a id="GUID-A93A8256-6C8D-4233-8D56-E25997AF9EE2" name="GUID-A93A8256-6C8D-4233-8D56-E25997AF9EE2"></a><h3 id="LNPCB-GUID-A93A8256-6C8D-4233-8D56-E25997AF9EE2" class="sect3"><span class="enumeration_section">D.3</span>指定SQLCHECK = SEMANTICS</h3>
               <div>
                  <p>当SQLCHECK = SEMANTICS时，预编译器检查语法和语义</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>INSERT和UPDATE等数据操作语句。</p>
                     </li>
                     <li>
                        <p>PL / SQL块。</p>
                     </li>
                  </ul>
                  <p>但是，只对使用AT <span class="italic">db_name</span>子句的数据操作语句进行语法检查。
                  </p>
                  <p>预编译器从嵌入式DECLARE TABLE语句中获取语义检查的信息，或者，如果指定选项USERID，则通过连接到数据库并访问数据字典来获取。</p>
                  <p>如果连接到数据库但在数据字典中找不到某些表信息，则必须使用DECLARE TABLE语句提供缺少的信息。如果数据字典定义发生冲突，则DECLARE TABLE定义将覆盖它。</p>
                  <p>在检查数据操作语句时，预编译器使用<a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a>中的<a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle</span></a>语法规则集，但使用更严格的语义规则集。因此，当SQLCHECK = SEMANTICS时，为早期版本的Oracle编写的现有应用程序可能无法成功预编译。</p>
                  <p>预编译新程序时指定SQLCHECK = SEMANTICS。如果在主机程序中嵌入PL / SQL块，则<span class="italic">必须</span>指定SQLCHECK = SEMANTICS。</p>
               </div><a id="LNPCB1338"></a><div class="props_rev_3"><a id="GUID-1571D6AA-66FC-4874-8872-45C5B01FC4A3" name="GUID-1571D6AA-66FC-4874-8872-45C5B01FC4A3"></a><h4 id="LNPCB-GUID-1571D6AA-66FC-4874-8872-45C5B01FC4A3" class="sect4"><span class="enumeration_section">D.3.1</span>启用语义检查</h4>
                  <div>
                     <div class="section">
                        <p>当SQLCHECK = SEMANTICS时，预编译器可以通过以下任一方式获取语义检查所需的信息：<a id="d101510e209" class="indexterm-anchor"></a></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到Oracle并访问数据字典</p>
                           </li>
                           <li>
                              <p>使用嵌入式DECLARE TABLE语句</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPCB1339"></a><div class="props_rev_3"><a id="GUID-3F8083C1-186A-48BE-9FD8-DB514D14DF8C" name="GUID-3F8083C1-186A-48BE-9FD8-DB514D14DF8C"></a><h5 id="LNPCB-GUID-3F8083C1-186A-48BE-9FD8-DB514D14DF8C" class="sect5"><span class="enumeration_section">D.3.1.1</span>连接到Oracle</h5>
                     <div>
                        <div class="section">
                           <p>要进行语义检查，预编译器可以连接到数据库，该数据库维护主机程序中引用的表和视图的定义。连接后，预编译器访问数据字典以获取所需信息。<span class="italic">数据字典</span>存储表和列名称，表和列约束，列长度，列数据类型等。<a id="d101510e249" class="indexterm-anchor"></a></p>
                           <p>如果在数据字典中找不到某些所需信息（例如，因为您的程序引用了尚未创建的表），则必须使用DECLARE TABLE语句提供缺少的信息。</p>
                           <p>要连接到数据库，请使用语法在命令行上指定选项USERID<a id="d101510e257" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">USERID =用户名/密码</pre><p>其中<span class="italic">用户名</span>和<span class="italic">密码</span>包含有效的Oracle用户标识。如果省略密码，系统会提示您输入密码。如果您指定的是用户名和密码，而不是用户名和密码</p><pre class="oac_no_warn" dir="ltr">USERID = /</pre><p>预编译器尝试使用userid自动连接到数据库</p><pre class="oac_no_warn" dir="ltr">&lt;前缀&gt; &lt;用户名&gt;</pre><p>其中<span class="italic">prefix</span>是初始化参数OS_AUTHENT_PREFIX的值（默认值为OPS $）， <span class="italic">username</span>是您的操作系统用户或任务名称。
                           </p>
                           <p>如果尝试连接但不能（例如，如果数据库不可用），预编译器将停止处理并发出错误消息。如果省略USERID选项，则预编译器必须从嵌入的DECLARE TABLE语句中获取所需信息。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCB1340"></a><div class="props_rev_3"><a id="GUID-5667B44F-9A58-447D-9BAB-E972E6980DFB" name="GUID-5667B44F-9A58-447D-9BAB-E972E6980DFB"></a><h5 id="LNPCB-GUID-5667B44F-9A58-447D-9BAB-E972E6980DFB" class="sect5"><span class="enumeration_section">D.3.1.2</span>使用DECLARE TABLE</h5>
                     <div>
                        <div class="section">
                           <p>只要程序不从匿名PL / SQL块调用任何存储过程或函数，预编译器就可以在不连接数据库的情况下进行语义检查。要进行检查，预编译器必须从嵌入式DECLARE TABLE指令获取有关表和视图的信息。因此，必须在DECLARE TABLE语句中定义数据操作语句或PL / SQL块中引用的每个表。<a id="d101510e312" class="indexterm-anchor"></a><a id="d101510e316" class="indexterm-anchor"></a></p>
                           <p>DECLARE TABLE语句的语法是</p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE table_name TABLE（col_name col_datatype [DEFAULT expr] [NULL | NOT NULL]，...）END-EXEC。</pre><p>其中<span class="italic">expr</span>是可以在CREATE TABLE语句中用作默认列值的任何表达式。 <span class="italic">col_datatype</span>是Oracle列声明。只能使用整数，而不能使用表达式。请参阅<span class="q">“ <a href="embedded-SQL-statements-and-precompiler-directives.html#GUID-099016DA-F3D0-44C5-B3D4-6B2E808E2304">DECLARE TABLE（Oracle嵌入式SQL指令）</a> ”</span> 。
                           </p>
                           <p>如果使用DECLARE TABLE定义已存在的数据库表，则预编译器将使用您的定义，忽略数据字典中的定义。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
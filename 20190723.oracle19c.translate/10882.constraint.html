<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>约束</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="allocate_extent_clause.html" title="Previous" type="text/html"></link>
      <link rel="next" href="deallocate_unused_clause.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="allocate_extent_clause.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="deallocate_unused_clause.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Common-SQL-DDL-Clauses.html" property="item" typeof="WebPage"><span property="name">常见的SQL DDL子句</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">约束</li>
            </ol>
            <a id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE" name="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE"></a><a id="SQLRF52181"></a><a id="SQLRF52182"></a><a id="SQLRF52183"></a><a id="SQLRF52184"></a><a id="SQLRF52185"></a><a id="SQLRF52186"></a><a id="SQLRF52187"></a><a id="SQLRF52188"></a><a id="SQLRF52189"></a><a id="SQLRF52190"></a><a id="SQLRF52191"></a><a id="SQLRF52192"></a><a id="SQLRF52193"></a><a id="SQLRF30038"></a><a id="SQLRF52194"></a><a id="SQLRF52195"></a><a id="SQLRF52196"></a><a id="SQLRF52197"></a><a id="SQLRF52198"></a><a id="SQLRF52199"></a><a id="SQLRF52200"></a><a id="SQLRF52201"></a><a id="SQLRF52202"></a><a id="SQLRF52203"></a><a id="SQLRF52204"></a><a id="SQLRF52205"></a><a id="SQLRF52206"></a><a id="SQLRF52207"></a><a id="SQLRF52208"></a><a id="SQLRF52209"></a><a id="SQLRF52210"></a><a id="SQLRF52211"></a><a id="SQLRF52212"></a><a id="SQLRF52213"></a><a id="SQLRF52214"></a><a id="SQLRF52215"></a><a id="SQLRF52216"></a><a id="SQLRF52217"></a><a id="SQLRF52218"></a><a id="SQLRF52219"></a><a id="SQLRF57046"></a><a id="SQLRF52220"></a><a id="SQLRF52221"></a><a id="SQLRF52222"></a><a id="SQLRF52223"></a><a id="SQLRF52224"></a><a id="SQLRF52225"></a><a id="SQLRF52226"></a><a id="SQLRF52227"></a><a id="SQLRF52228"></a><a id="SQLRF52229"></a><a id="SQLRF52230"></a><a id="SQLRF30018"></a><a id="SQLRF52231"></a><a id="SQLRF52232"></a><a id="SQLRF52233"></a><a id="SQLRF52234"></a><a id="SQLRF52235"></a><a id="SQLRF52236"></a><a id="SQLRF52237"></a><a id="SQLRF52238"></a><a id="SQLRF52239"></a><a id="SQLRF52240"></a><a id="SQLRF52241"></a><a id="SQLRF52242"></a><a id="SQLRF52243"></a><a id="SQLRF52244"></a><a id="SQLRF52180"></a>
            
            <h2 id="SQLRF-GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE" class="sect2"><span class="italic">约束</span></h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-D2D0F4FE-E72E-4A1D-8952-B1EE3F7844A7">目的</p>
                  <p><a id="d181256e357" class="indexterm-anchor"></a><a id="d181256e361" class="indexterm-anchor"></a>使用<span class="italic"><code class="codeph">constraint</code></span>来定义<span class="bold">完整性约束 -</span>一种限制数据库中值的规则。Oracle数据库允许您创建六种类型的约束，并允许您以两种方式声明它们。
                  </p>
                  <p>这里简要描述了六种类型的完整性约束，并在<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002038">语义学</a> ”中</span>更全面地描述：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold"><code class="codeph">NOT</code></span> <span class="bold"><code class="codeph">NULL</code></span> <span class="bold">约束</span>禁止数据库值为null。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">唯一约束</span>禁止多行在同一列或列组合中具有相同的值，但允许某些值为null。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">主键约束</span>在单个声明中组合了<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束和唯一约束。它禁止多行在同一列或列组合中具有相同的值，并禁止值为空。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">外键约束</span>要求一个表中的值与另一个表中的值匹配。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">检查约束</span>要求数据库中的值符合指定的条件。
                        </p>
                     </li>
                     <li>
                        <p>根据定义， <code class="codeph">REF</code>列引用另一个对象类型或关系表中的对象。<span class="bold">REF约束</span>允许您进一步描述<code class="codeph">REF</code>列与其引用的对象之间的关系。
                        </p>
                     </li>
                  </ul>
                  <p>您可以通过两种方式在语法上定义约束：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>作为单个列或属性的定义的一部分。这称为<span class="bold">内联</span>规范。
                        </p>
                     </li>
                     <li>
                        <p>作为表定义的一部分。这称为<span class="bold">外线</span>规范。
                        </p>
                     </li>
                  </ul>
                  <p>必须内联声明<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。所有其他约束可以内联或外联声明。
                  </p>
                  <p>约束条款可以出现在以下语句中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> （参见<a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6">CREATE TABLE</a> <code class="codeph">)</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> （参见<a href="ALTER-TABLE.html#GUID-552E7373-BF93-477D-9DA3-B2C9386F2877">ALTER TABLE</a> ）</p>
                     </li>
                     <li>
                        <p><code class="codeph">CREATE</code> <code class="codeph">VIEW</code> （请参阅<a href="CREATE-VIEW.html#GUID-61D2D2B4-DACC-4C7C-89EB-7E50D9594D30">创建视图</a> <code class="codeph">)</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ALTER</code> <code class="codeph">VIEW</code> （参见<a href="ALTER-VIEW.html#GUID-0DEDE960-B481-4B55-8027-EA9E4C863625">后续视图</a> <code class="codeph">)</code></p>
                     </li>
                  </ul>
                  <p><span class="bold">查看约束</span></p>
                  <p>Oracle数据库不强制实施视图约束。但是，您可以通过对基表的约束来强制实施视图约束。</p>
                  <p>您只能在视图上指定唯一，主键和外键约束，并且仅在<code class="codeph">DISABLE</code> <code class="codeph">NOVALIDATE</code>模式下支持它们。您无法在对象列的属性上定义视图约束。
                  </p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__FORADDITIONALINFORMATIONONVIEWCONST-39F5EACC">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002565">有关视图约束</a>的其他信息，请参阅约束;有关<code class="codeph">DISABLE</code> <code class="codeph">NOVALIDATE</code>模式的信息，请参阅<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002349">DISABLE子句</a> ”</span></p>
                  </div>
                  <p><span class="bold">外部表约束</span></p>
                  <p>您只能在外部表上指定<code class="codeph">NOT</code> <code class="codeph">NULL</code> ，唯一，主键和外键约束。仅在<code class="codeph">RELY</code> <code class="codeph">DISABLE</code>模式下支持唯一，主键和外键约束。
                  </p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__FORADDITIONALINFORMATIONONEXTERNALT-39F5F415">
                     <p class="notep1">也可以看看：</p>
                     <p>  关于<code class="codeph">RELY</code>和<code class="codeph">DISABLE</code>信息的<a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002349">DISABLE子句</a> 。</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-7D509693-BD52-4D1A-A6C4-1B79207A83F1">先决条件</p>
                  <p>您必须具有发出定义约束的语句所需的特权。</p>
                  <p>另外，要创建外键约束，父表或视图必须位于您自己的模式中，或者您必须对父表或视图中引用键的列具有<code class="codeph">REFERENCES</code>特权。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-1C3656DD-EF7A-4C35-B061-4F7C13B77B08">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAEDFIB">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-1197B359-0AD1-47A7-A361-B6FFEDBEEF8C"><span class="italic">约束</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-D8BD523A-D175-4AC7-8D0D-7C40A383915D"><img src="img/constraint.gif" alt="constraint.eps的描述如下" title="constraint.eps的描述如下" longdesc="img_text/constraint.html"><br><a href="img_text/constraint.html">插图constraint.eps的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAGIICD">inline_constraint :: =</a></span> ， <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJADJGEC">out_of_line_constraint :: =</a></span> ， <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAHIEIJ">inline_ref_constraint :: =</a></span> ， <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJABCJJF">out_of_line_ref_constraint :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAGIICD">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-07EBBAB8-762E-4F8E-8998-F8957EBBCEEC"><span class="italic">inline_constraint</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-0A7AE30C-BC03-4DC3-AF5D-077E00CEE951"><img src="img/inline_constraint.gif" alt="inline_constraint.eps的描述如下" title="inline_constraint.eps的描述如下" longdesc="img_text/inline_constraint.html"><br><a href="img_text/inline_constraint.html">inline_constraint.eps插图的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAIHHGC">references_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJADJGEC">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-D67256F5-861D-40D0-9B18-96AC1EAA3003"><span class="italic">out_of_line_constraint</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-A37E2BF8-7BEC-4419-B27B-C75124D007FD"><img src="img/out_of_line_constraint.gif" alt="out_of_line_constraint.eps的描述如下" title="out_of_line_constraint.eps的描述如下" longdesc="img_text/out_of_line_constraint.html"><br><a href="img_text/out_of_line_constraint.html">插图描述out_of_line_constraint.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAIHHGC">references_clause :: =</a></span> ， <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAFFBAA">constraint_state :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAHIEIJ">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-0C38D543-72F8-47FE-AF13-E347E7AE3A6D"><span class="italic">inline_ref_constraint</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-DB460711-8217-414B-A355-CEBC9EF4A702"><img src="img/inline_ref_constraint.gif" alt="inline_ref_constraint.eps的描述如下" title="inline_ref_constraint.eps的描述如下" longdesc="img_text/inline_ref_constraint.html"><br><a href="img_text/inline_ref_constraint.html">插图描述inline_ref_constraint.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAIHHGC">references_clause :: =</a></span> ， <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAFFBAA">constraint_state :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJABCJJF">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-0FC194B0-AAE1-4A0D-8D4E-1E6E37C42415"><span class="italic">out_of_line_ref_constraint</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-E7800E68-29DE-4DC5-B7ED-1FBE34F91071"><img src="img/out_of_line_ref_constraint.gif" alt="out_of_line_ref_constraint.eps的描述如下" title="out_of_line_ref_constraint.eps的描述如下" longdesc="img_text/out_of_line_ref_constraint.html"><br><a href="img_text/out_of_line_ref_constraint.html">插图描述out_of_line_ref_constraint.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAIHHGC">references_clause :: =</a></span> ， <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAFFBAA">constraint_state :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAIHHGC">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-AE7D99CC-9D2F-46C6-A6D1-5FCBC7B2A844"><span class="italic">references_clause</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-9435EACA-DE8E-42CE-B84D-743286DD4F1D"><img src="img/references_clause.gif" alt="reference_clause.eps的描述如下" title="reference_clause.eps的描述如下" longdesc="img_text/references_clause.html"><br><a href="img_text/references_clause.html">说明references_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAFFBAA">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-F1E2ED02-F150-485C-9B44-84D55E0D77A7"><span class="italic">constraint_state</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-76F1D4D6-5267-49D0-9404-AF306504C2FD"><img src="img/constraint_state.gif" alt="下面是constraint_state.eps的描述" title="下面是constraint_state.eps的描述" longdesc="img_text/constraint_state.html"><br><a href="img_text/constraint_state.html">说明constraint_state.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAGEBIG">using_index_clause :: =</a></span> ， <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAEHIDE">exceptions_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAGEBIG">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-5F8738BB-182B-4FEE-9762-7AA9F5B5AF39"><span class="italic">using_index_clause</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-6EFA3B97-B321-41E9-88A5-CD477F79832D"><img src="img/using_index_clause.gif" alt="using_index_clause.eps的描述如下" title="using_index_clause.eps的描述如下" longdesc="img_text/using_index_clause.html"><br><a href="img_text/using_index_clause.html">说明using_index_clause.eps的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__I2125762">create_index :: =</a></span> ， <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAIEIDI">index_properties :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAIEIDI">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-A23FF472-0368-4457-9887-C9B3B5C0AA66"><span class="italic">index_properties</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-018CED4A-A9C8-4951-A833-BA86784A8C03"><img src="img/index_properties.gif" alt="下面是index_properties.eps的描述" title="下面是index_properties.eps的描述" longdesc="img_text/index_properties.html"><br><a href="img_text/index_properties.html">说明index_properties.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__I2126415">global_partitioned_index :: =</a></span> ， <span class="italic"><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__I2125897">local_partitioned_index :: =</a></span> - <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> ， <span class="italic"><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAFHDJI">index_attributes :: =</a></span> 。定义约束时， <code class="codeph">INDEXTYPE</code> <code class="codeph">IS</code> ...子句无效。）
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAFHDJI">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-0018EBE8-FA1C-4BCE-A6E1-0701393949C1"><span class="italic">index_attributes</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-AE9C3565-E94A-4398-B2DF-48DB2D27BA68"><img src="img/index_attributes.gif" alt="下面是index_attributes.eps的描述" title="下面是index_attributes.eps的描述" longdesc="img_text/index_attributes.html"><br><a href="img_text/index_attributes.html">描述index_attributes.eps的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2127411">physical_attributes_clause :: =</a></span> ， <span class="italic"><a href="logging_clause.html#GUID-C4212274-5595-4045-A599-F033772C496E__CJAHABGF">logging_clause :: =</a></span> ， <span class="italic"><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__I2127535">index_compression :: =</a></span> ， <span class="italic"><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__BGEJJFGA">partial_index_clause :: =</a></span> - <code class="codeph">CREATE</code> <code class="codeph">INDEX</code>部分， <span class="italic"><code class="codeph">parallel_clause</code></span> ： <span class="italic"><code class="codeph">using_index_clause</code></span>不支持）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__CJAEHIDE">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-D9EC4CF8-C958-40C3-9F02-49FD82E5DFB3"><span class="italic">exceptions_clause</span> :: =</p>
                  <div class="figure" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-C62F52F6-D30E-4151-8A0F-7EF007FE8953"><img src="img/exceptions_clause.gif" alt="下面描述了exceptions_clause.eps" title="下面描述了exceptions_clause.eps" longdesc="img_text/exceptions_clause.html"><br><a href="img_text/exceptions_clause.html">例外描述exceptions_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002038">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-85B53868-193B-4666-9F24-AC7AB7B804BC">语义</p>
                  <p>本节描述<span class="italic"><code class="codeph">constraint</code></span>的语义。有关其他信息，请参阅用于为表或视图定义或重新定义约束的SQL语句。
                  </p>
                  <p>Oracle数据库不支持对类型为用户定义对象，嵌套表， <code class="codeph">VARRAY</code> ， <code class="codeph">REF</code>或LOB的列或属性的约束，但有两个例外：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于类型为用户定义的对象， <code class="codeph">VARRAY</code> ， <code class="codeph">REF</code>或LOB的列或属性，支持<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。</p>
                     </li>
                     <li>
                        <p><code class="codeph">NOT</code> <code class="codeph">NULL</code> ，外键和<code class="codeph">REF</code>约束支持类型的列<code class="codeph">REF</code> 。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-D6220E9B-DA81-4A3F-8020-AF3020DCAE6A">CONSTRAINT <span class="italic">constraint_name</span></p>
                  <p><a id="d181256e853" class="indexterm-anchor"></a>指定约束的名称。该名称必须满足<span class="q">“ <a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">数据库对象命名规则</a> ”中</span>列出的要求。如果省略此标识符，则Oracle数据库将生成一个<code class="codeph">SYS_C</code> <span class="italic"><code class="codeph">n</code></span>形式的名称。Oracle将完整性约束的名称和定义存储在<code class="codeph">USER_</code> ， <code class="codeph">ALL_</code>和<code class="codeph">DBA_CONSTRAINTS</code>数据字典视图中（分别在<code class="codeph">CONSTRAINT_NAME</code>和<code class="codeph">SEARCH_CONDITION</code>列中）。
                  </p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-3DAC4E73-1A28-42A8-9510-3F363FF1988F">
                     <p class="notep1">也可以看看：</p>
                     <p>有关数据字典视图的信息，请参阅<a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-FEE1BA50-C365-4B16-BA6E-83A0D4C24464">NOT NULL约束</p>
                  <p><code class="codeph">NOT</code> <code class="codeph">NULL</code>约束禁止列包含空值。<code class="codeph">NULL</code>关键字本身并不实际定义完整性约束，但您可以指定它以显式允许列包含空值。您必须使用内联规范定义<code class="codeph">NOT</code> <code class="codeph">NULL</code>和<code class="codeph">NULL</code> 。如果既未指定<code class="codeph">NOT</code> <code class="codeph">NULL</code>也未指定<code class="codeph">NULL</code> ，则默认值为<code class="codeph">NULL</code> 。</p>
                  <p><code class="codeph">NOT</code> <code class="codeph">NULL</code>约束是您可以在<code class="codeph">XMLType</code>和<code class="codeph">VARRAY</code>列上内联指定的唯一约束。
                  </p>
                  <p>要满足<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束，表中的每一行都必须包含该列的值。
                  </p>
                  <div class="infoboxnote" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-DDBE167E-2BF4-41FA-8A7B-56DD5C38B410">
                     <p class="notep1">注意：</p>
                     <p>除了位图索引之外，Oracle数据库不会为所有键列都为空的表行编制索引。因此，如果要在表的所有行上建立索引，则必须为至少一个索引键列指定<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束或创建位图索引。
                     </p>
                  </div>
                  <p><span class="bold">NOT NULL约束的限制</span></p>
                  <p><code class="codeph">NOT</code> <code class="codeph">NULL</code>约束受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您不能在视图约束中指定<code class="codeph">NULL</code>或<code class="codeph">NOT</code> <code class="codeph">NULL</code> 。
                        </p>
                     </li>
                     <li>
                        <p>您不能为对象的属性指定<code class="codeph">NULL</code>或<code class="codeph">NOT</code> <code class="codeph">NULL</code> 。而是使用带有<code class="codeph">IS</code> [ <code class="codeph">NOT</code> ] <code class="codeph">NULL</code>条件的<code class="codeph">CHECK</code>约束。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-F30D36B1-957E-43C2-A7AE-0EC2F3535B41">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002779">属性级约束示例</a> ”</span>和<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015640">NOT NULL示例</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1034458">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-2CB11BB9-CA90-45B4-BAD2-A178B8CF5C2F">独特的约束</p>
                  <p><span class="bold">唯一</span>约束将列指定为唯一键。<span class="bold">复合唯一键</span>将列的组合指定为唯一键。在内联定义唯一约束时，只需要<code class="codeph">UNIQUE</code>关键字。在线外定义唯一约束时，还必须指定一个或多个列。您必须定义一个复合唯一键。
                  </p>
                  <p>为了满足唯一约束，表中没有两行可以具有唯一键的相同值。但是，由单个列组成的唯一键可以包含空值。要满足复合唯一键，表或视图中的任何两行都不能在键列中具有相同的值组合。所有键列中包含空值的任何行都会自动满足约束。但是，包含一个或多个键列的空值的两行以及其他键列的相同值组合违反了约束。</p>
                  <p>唯一约束对其键列的声明排序规则敏感。有关详细信息，请参阅<a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__SECTION-1328-658D6C83">约束的归类灵敏度</a> 。
                  </p>
                  <p>在一个或多个列上指定唯一约束时，Oracle会在唯一键上隐式创建索引。如果要为查询性能定义唯一性，那么Oracle建议您使用<code class="codeph">CREATE</code> <code class="codeph">UNIQUE</code> <code class="codeph">INDEX</code>语句显式<code class="codeph">CREATE</code> <code class="codeph">UNIQUE</code> <code class="codeph">INDEX</code> 。您还可以使用<code class="codeph">CREATE</code> <code class="codeph">UNIQUE</code> <code class="codeph">INDEX</code>语句创建一个唯一的基于函数的索引，该索引定义条件唯一约束。有关详细信息，请参阅<span class="q">“ <a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__BGEHDECJ">使用基于函数的索引定义条件唯一性：示例</a> ”</span> 。
                  </p>
                  <p>在扩展数据类型列上指定启用的唯一约束时，当Oracle尝试创建索引以强制启用的约束的唯一性时，可能会收到“超出最大密钥长度”错误。有关如何解决此问题的信息，请参阅<span class="q">“ <a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__BGECBJDG">在扩展数据类型列上创建索引</a> ”</span> 。
                  </p>
                  <p><span class="bold">对唯一约束的限制</span></p>
                  <p>唯一约束受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>唯一键中的任何列都不能是LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code> ， <code class="codeph">VARRAY</code> ， <code class="codeph">NESTED</code> <code class="codeph">TABLE</code> ， <code class="codeph">OBJECT</code> ， <code class="codeph">REF</code> ， <code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIME</code> <code class="codeph">ZONE,</code>或用户定义的类型。但是，唯一键可以包含<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">LOCAL</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code> 。</p>
                     </li>
                     <li>
                        <p>复合唯一键的列数不能超过32列。</p>
                     </li>
                     <li>
                        <p>您不能将同一列或列组合指定为主键和唯一键。</p>
                     </li>
                     <li>
                        <p>在继承层次结构中创建子视图时，无法指定唯一键。只能为顶级（根）视图指定唯一键。</p>
                     </li>
                     <li>
                        <p>为外部表指定唯一约束时，必须指定<code class="codeph">RELY</code>和<code class="codeph">DISABLE</code>约束状态。有关更多信息，请参阅<a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__EXTERNALTABLECONSTRAINTS-5C72DEDF">外部表约束</a> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-F7F1DCE7-083E-49FE-92D7-0E6897ED9439">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015609">唯一键示例</a> ”</span>和<a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015598">复合唯一键示例</a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-53B3123C-491A-4BD3-98B3-A896AD53234A">主键约束</p>
                  <p><span class="bold">主键</span>约束将列指定为表或视图的主键。<span class="bold">复合主键</span>将列的组合指定为主键。在内联定义主键约束时，只需要<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>关键字。在线外定义主键约束时，还必须指定一个或多个列。您必须定义一个复合主键。
                  </p>
                  <p>要满足主键约束：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>没有主键值可以出现在表中的多个行中。</p>
                     </li>
                     <li>
                        <p>作为主键一部分的列不能包含null。</p>
                     </li>
                  </ul>
                  <p>创建主键约束时：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果Oracle数据库在强制执行主键约束之前包含一组唯一值，则它使用现有索引。现有索引可以定义为唯一或非唯一。执行DML操作时，将使用此现有索引强制执行主键约束。</p>
                     </li>
                     <li>
                        <p>如果不能使用现有索引，则Oracle数据库会生成唯一索引。</p>
                     </li>
                  </ul>
                  <p>删除主键约束时：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果主键是使用现有索引创建的，则不会删除索引。</p>
                     </li>
                     <li>
                        <p>如果主键是使用系统生成的索引创建的，则会删除索引。</p>
                     </li>
                  </ul>
                  <p>当您将扩展数据类型列指定为已启用的主键时，当Oracle尝试创建索引以强制启用的约束的唯一性时，您可能会收到“超出最大密钥长度”错误。有关如何解决此问题的信息，请参阅<span class="q">“ <a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__BGECBJDG">在扩展数据类型列上创建索引</a> ”</span> 。
                  </p>
                  <p>主键约束对其键列的声明排序规则敏感。有关详细信息，请参阅<a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__SECTION-1328-658D6C83">约束的归类灵敏度</a> 。
                  </p>
                  <p><span class="bold">主键约束的限制</span></p>
                  <p>主要约束受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>表或视图只能有一个主键。</p>
                     </li>
                     <li>
                        <p>主键中的任何列都不能是LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code> ， <code class="codeph">VARRAY</code> ， <code class="codeph">NESTED</code> <code class="codeph">TABLE</code> ， <code class="codeph">BFILE</code> ， <code class="codeph">REF</code> ， <code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code>或用户定义的类型。但是，主键可以包含<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">LOCAL</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code> 。</p>
                     </li>
                     <li>
                        <p>主键的大小不能超过大约一个数据库块。</p>
                     </li>
                     <li>
                        <p>复合主键的列数不能超过32列。</p>
                     </li>
                     <li>
                        <p>您不能将同一列或列组合指定为主键和唯一键。</p>
                     </li>
                     <li>
                        <p>在继承层次结构中创建子视图时，无法指定主键。只能为顶级（根）视图指定主键。</p>
                     </li>
                     <li>
                        <p>为外部表指定主键约束时，必须指定<code class="codeph">RELY</code>和<code class="codeph">DISABLE</code>约束状态。有关更多信息，请参阅<a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__EXTERNALTABLECONSTRAINTS-5C72DEDF">外部表约束</a> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-6D10326B-842E-468D-A7E4-E153CB8969A5">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002629">主键示例</a> ”</span>和<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015668">复合主键示例</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002118">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-2555E0AA-FB82-4E03-A84B-23FCA92BA588">外键约束</p>
                  <p><span class="bold">外键约束</span> （也称为<span class="bold">引用完整性约束</span> ）将列指定为外键，并在该外键与指定的主键或唯一键之间建立关系，称为<span class="bold">引用键</span> 。<span class="bold">复合外键</span>将列的组合指定为外键。
                  </p>
                  <p>包含外键的表或视图称为<span class="bold">子</span>对象，包含引用键的表或视图称为<span class="bold">父</span>对象。外键和引用的键可以位于同一个表或视图中。在这种情况下，父表和子表是相同的。如果仅标识父表或视图并省略列名，则外键会自动引用父表或视图的主键。外键和引用键的相应列或列必须按顺序，数据类型和声明的排序规则匹配。
                  </p>
                  <p>外键约束对引用的主键或唯一键列的声明的排序规则很敏感。有关详细信息，请参阅<a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__SECTION-1328-658D6C83">约束的归类灵敏度</a> 。
                  </p>
                  <p>您可以在内联或外联的单个键列上定义外键约束。您必须在属性外指定复合外键和外键。</p>
                  <p>要满足复合外键约束，复合外键必须引用父表或视图中的复合唯一键或复合主键，或者外键的至少一列的值必须为null。</p>
                  <p>您可以将同一列或列组合指定为外键和主键或唯一键。您还可以将同一列或列组合指定为外键和群集键。</p>
                  <p>您可以在表或视图中定义多个外键。此外，单个列可以是多个外键的一部分。</p>
                  <p><span class="bold">外键约束的限制</span></p>
                  <p>外键约束受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>外键中的任何列都不能是LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code> ， <code class="codeph">VARRAY</code> ， <code class="codeph">NESTED</code> <code class="codeph">TABLE</code> ， <code class="codeph">BFILE</code> ， <code class="codeph">REF</code> ， <code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code>或用户定义的类型。但是，主键可以包含<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">LOCAL</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code> 。</p>
                     </li>
                     <li>
                        <p>必须已定义父表或视图上引用的唯一或主键约束。</p>
                     </li>
                     <li>
                        <p>复合外键的列数不能超过32列。</p>
                     </li>
                     <li>
                        <p>子表和父表必须位于同一数据库中。要在分布式数据库的节点之间启用参照完整性约束，必须使用数据库触发器。请参阅<a href="CREATE-TRIGGER.html#GUID-EE0DF3AA-7ADC-4171-B8E8-138BE9224E3B">CREATE TRIGGER</a> 。</p>
                     </li>
                     <li>
                        <p>如果子对象或父对象是视图，则约束受视图约束的所有限制。请参阅<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002565">视图约束</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>您不能在包含<code class="codeph">AS</code> <span class="italic"><code class="codeph">subquery</code></span>子句的<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句中定义外键约束。相反，您必须创建没有约束的表，然后使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句添加它。
                        </p>
                     </li>
                     <li>
                        <p>当表具有外键，并且外键的父级是索引组织表时，更新包含外键的行的会话可以在另一个会话更新父表中的非键列时挂起。</p>
                     </li>
                     <li>
                        <p>为外部表指定外键约束时，必须指定<code class="codeph">RELY</code>和<code class="codeph">DISABLE</code>约束状态。有关更多信息，请参阅<a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__EXTERNALTABLECONSTRAINTS-5C72DEDF">外部表约束</a> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-4EF9C921-C0EA-44EE-A14D-2A5D3DF5F2A6">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关使用约束的更多信息，请参见<a href="../adfns/data-integrity.html#ADFNS004" target="_blank"><span class="italic">Oracle数据库开发指</span></a></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1036780">外键约束示例</a> ”</span>和<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015710">复合外键约束示例</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-8E388631-3D99-4445-A2CD-A8776E8CEFC1"><span class="italic">references_clause</span></p>
                  <p>外键约束使用<span class="italic"><code class="codeph">references_clause</code></span>语法。在内联指定外键约束时，只需要<span class="italic"><code class="codeph">references_clause</code></span> 。如果指定外键约束，则还必须指定<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>关键字和一个或多个列。
                  </p>
                  <p><span class="bold">ON DELETE条款</span></p>
                  <p><code class="codeph">ON</code> <code class="codeph">DELETE</code>子句使您可以确定在删除引用的主键或唯一键值时Oracle数据库如何自动维护引用完整性。如果省略此子句，则Oracle不允许您删除父表中具有子表中的从属行的引用键值。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果希望Oracle删除从属外键值，请指定<code class="codeph">CASCADE</code> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">SET</code> <code class="codeph">NULL</code> ，如果你希望Oracle依赖外键值转换为<code class="codeph">NULL</code> 。您不能为虚拟列指定此子句，因为无法直接更新虚拟列中的值。而是必须更新从中派生虚拟列的值。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">对ON DELETE的限制</span></p>
                  <p>您不能为视图约束指定此子句。</p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-050BF9CA-E5AA-43BE-89E3-FC99F5417CD7">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015699">ON DELETE示例</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-3D961DC5-3C55-4598-9AB6-A41BA7B90105">检查约束</p>
                  <p><span class="bold">检查约束</span>允许您指定表中每行必须满足的条件。为了满足约束，表中的每一行必须使条件为<code class="codeph">TRUE</code>或unknown（由于null）。当Oracle评估特定行的检查约束条件时，条件中的任何列名称都会引用该行中的列值。
                  </p>
                  <p>检查约束的内联和外联规范的语法是相同的。但是，内联规范只能引用当前正在定义的列（或列的属性，如果它是对象列），而行外规范可以引用多个列或属性。</p>
                  <p>Oracle不验证检查约束的条件不是互斥的。因此，如果为列创建多个检查约束，请仔细设计它们，以便它们的目的不会发生冲突。不要假设任何特定的条件评估顺序。</p>
                  <p>如果检查约束的条件取决于NLS参数，例如<code class="codeph">NLS_DATE_FORMAT</code> ，则Oracle使用参数的数据库值而不是会话值来评估条件。您可以在数据字典视图<code class="codeph">NLS_DATABASE_PARAMETERS</code>找到NLS参数的数据库值。这些值通过DDL语句<code class="codeph">CREATE</code> <code class="codeph">DATABASE</code>与数据库关联，之后永远不会更改。
                  </p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-37D5ACF8-4E18-4CE0-A736-96EEF4D07F60">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="Conditions.html#GUID-C2E3ED44-16E7-4924-9125-E1693B1022A8">条件</a>的其他信息和语法</p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002719">检查约束示例</a> ”</span>和<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002779">属性级约束示例</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <p><span class="bold">检查约束的限制</span></p>
                  <p>检查约束受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您无法为视图指定检查约束。但是，您可以使用<code class="codeph">WITH</code> <code class="codeph">CHECK</code> <code class="codeph">OPTION</code>子句定义视图，这相当于为视图指定检查约束。
                        </p>
                     </li>
                     <li>
                        <p>检查约束的条件可以引用表中的任何列，但它不能引用其他表的列。</p>
                     </li>
                     <li>
                        <p>检查约束条件不能包含以下结构：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>子查询和标量子查询表达式</p>
                           </li>
                           <li>
                              <p>调用不确定的函数（ <code class="codeph">CURRENT_DATE</code> ， <code class="codeph">CURRENT_TIMESTAMP</code> ， <code class="codeph">DBTIMEZONE</code> ， <code class="codeph">LOCALTIMESTAMP</code> ， <code class="codeph">SESSIONTIMEZONE</code> ， <code class="codeph">SYSDATE</code> ， <code class="codeph">SYSTIMESTAMP</code> ， <code class="codeph">UID</code> ， <code class="codeph">USER</code>和<code class="codeph">USERENV</code> ）</p>
                           </li>
                           <li>
                              <p>调用用户定义的函数</p>
                           </li>
                           <li>
                              <p>取消引用<code class="codeph">REF</code>列（例如，使用<code class="codeph">DEREF</code>函数）</p>
                           </li>
                           <li>
                              <p>嵌套表列或属性</p>
                           </li>
                           <li>
                              <p>伪列<code class="codeph">CURRVAL</code> ， <code class="codeph">NEXTVAL</code> ， <code class="codeph">LEVEL</code>或<code class="codeph">ROWNUM</code> 
                              </p>
                           </li>
                           <li>
                              <p>未完全指定的日期常量</p>
                           </li>
                           <li>
                              <p>您不能为外部表指定检查约束。</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-31D883E3-0C26-460A-A567-C4E96447E5F0">REF约束</p>
                  <p><code class="codeph">REF</code>约束允许您描述<code class="codeph">REF</code>类型的列与其引用的对象之间的关系。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-FBD23CCF-16A9-4DF5-95F0-16D8F5E8CCE6"><span class="italic">ref_constraint</span></p>
                  <p><code class="codeph">REF</code>约束使用<span class="italic"><code class="codeph">ref_constraint</code></span>语法。您可以内联或外联定义<code class="codeph">REF</code>约束。外线规范要求您指定要进一步描述的<code class="codeph">REF</code>列或属性。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">ref_column</code></span> ，请指定对象或关系表的<code class="codeph">REF</code>列的名称。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">ref_attribute</code></span> ，请在关系表的对象列中指定嵌入的<code class="codeph">REF</code>属性。
                        </p>
                     </li>
                  </ul>
                  <p>内联和外联规范都允许您在<code class="codeph">REF</code>列上定义范围约束，rowid约束或参照完整性约束。
                  </p>
                  <p>如果<code class="codeph">REF</code>列的范围表或引用表具有基于主键的对象标识符，则<code class="codeph">REF</code>列是<span class="bold">用户定义的</span> <span class="bold"><code class="codeph">REF</code></span> <span class="bold">列</span> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-664C8D91-1548-400D-824F-84E8780A8B6C">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">REF</code>数据类型的更多信息，请<code class="codeph">REF</code> <a href="../adobj/design-considerations-for-REFs.html#ADOBJ00805" target="_blank"><span class="italic">“Oracle数据库对象关系开发人员指南”</span></a></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002118">外键约束</a> ”</span>和<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015744">REF约束示例</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002226">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-267F4A7D-C9FB-466F-B8FD-42B9B7398D45">范围REF约束</p>
                  <p>在具有<code class="codeph">REF</code>列的表中，列中的每个<code class="codeph">REF</code>值都可以引用不同对象表中的行。<code class="codeph">SCOPE</code>子句限制对单个表<span class="italic"><code class="codeph">scope_table</code></span>的引用范围。<code class="codeph">REF</code>列或属性中的值指向<span class="italic"><code class="codeph">scope_table</code></span>中的对象，其中存储与<code class="codeph">REF</code>列相同类型的对象实例。
                  </p>
                  <p>指定<code class="codeph">SCOPE</code>子句以将<code class="codeph">REF</code>列中的引用范围限制为单个表。要指定此子句， <span class="italic"><code class="codeph">scope_table</code></span>必须位于您自己的模式中，或者您必须具有<span class="italic"><code class="codeph">scope_table</code></span>的<code class="codeph">READ</code>或<code class="codeph">SELECT</code>权限，或者您必须具有<code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>或<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权。您只能为每个<code class="codeph">REF</code>列指定一个范围表。
                  </p>
                  <p><span class="bold">范围限制的限制</span></p>
                  <p>范围限制受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>除非表为空，否则无法将范围约束添加到现有列。</p>
                     </li>
                     <li>
                        <p>您不能为<code class="codeph">VARRAY</code>列的<code class="codeph">REF</code>元素指定范围约束。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">AS</code> <span class="italic"><code class="codeph">subquery</code></span>并且子查询返回用户定义的<code class="codeph">REF</code>数据类型，则必须指定此子句。
                        </p>
                     </li>
                     <li>
                        <p>您随后不能从<code class="codeph">REF</code>列中删除范围约束。
                        </p>
                     </li>
                     <li>
                        <p>您不能为外部表指定范围约束。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-3A96B7E0-AE8A-41E5-AB1F-DDC43EA863E3">Rowid REF约束</p>
                  <p>指定<code class="codeph">WITH</code> <code class="codeph">ROWID</code>以将rowid与<code class="codeph">REF</code>值一起存储在<span class="italic"><code class="codeph">ref_column</code></span>或<span class="italic"><code class="codeph">ref_attribute</code></span> 。使用<code class="codeph">REF</code>值存储rowid可以提高解除引用操作的性能，但也会占用更多空间。<code class="codeph">REF</code>值的默认存储没有rowid。
                  </p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-2A200AF7-8FC6-43E3-9F76-DFFA5C0E70E7">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="DEREF.html#GUID-E551FFE4-619F-40CE-8303-683EFA3EB28F">DEREF</a>函数用于解除引用的示例</p>
                  </div>
                  <p><span class="bold">Rowid约束的限制</span></p>
                  <p>Rowid约束受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您无法为<code class="codeph">VARRAY</code>列的<code class="codeph">REF</code>元素定义rowid约束。
                        </p>
                     </li>
                     <li>
                        <p>您随后不能从<code class="codeph">REF</code>列中删除rowid约束。
                        </p>
                     </li>
                     <li>
                        <p>如果<code class="codeph">REF</code>列或属性是作用域的，则忽略此子句，并且rowid不与<code class="codeph">REF</code>值一起存储。
                        </p>
                     </li>
                     <li>
                        <p>您不能为外部表指定rowid约束。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-6212DAFF-5EBE-4846-9A65-11FD99446C52">REF列的参考完整性约束</p>
                  <p>该<span class="italic"><code class="codeph">references_clause</code></span>的的<span class="italic"><code class="codeph">ref_constraint</code></span>语法允许您定义的外键约束<code class="codeph">REF</code>列。该子句还隐式地将<code class="codeph">REF</code>列或属性的范围限制为引用的表。然而，尽管在非外键约束<code class="codeph">REF</code>列在父表引用一个实际的列，在一个外键约束<code class="codeph">REF</code>列引用父表的隐式对象标识符列。
                  </p>
                  <p>如果没有指定<code class="codeph">a</code>约束名，那么Oracle为形式的约束生成一个系统名称<code class="codeph">SYS_C</code> <span class="italic"><code class="codeph">n</code></span> 。
                  </p>
                  <p>如果将参照完整性约束添加到已作用域的现有<code class="codeph">REF</code>列，则引用的表必须与<code class="codeph">REF</code>列的范围表相同。如果稍后删除引用完整性约束，则<code class="codeph">REF</code>列将保持作用域到引用的表。
                  </p>
                  <p>与其他类型列的外键约束一样，您可以单独使用<span class="italic"><code class="codeph">references_clause</code></span>进行内联声明。对于外联声明，您还必须指定<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>关键字以及一个或多个<code class="codeph">REF</code>列或属性。
                  </p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-A3334732-2945-40A4-B9D4-8E4357B9CD2A">
                     <p class="notep1">也可以看看：</p>
                     <p>有关对象标识符的更多信息，请参见<a href="../adobj/basic-components-of-oracle-objects.html#ADOBJ002" target="_blank"><span class="italic">“Oracle数据库对象关系开发人员指南”</span></a></p>
                  </div>
                  <p><span class="bold">REF列外键约束的限制</span></p>
                  <p><code class="codeph">REF</code>列的外键约束具有以下附加限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将参照完整性约束添加到现有的未作用域<code class="codeph">REF</code>列时，Oracle会隐式添加作用域约束。因此，适用于范围约束的所有限制也适用于此情况。
                        </p>
                     </li>
                     <li>
                        <p>您无法在<span class="italic"><code class="codeph">references_clause</code></span>的对象名称后面指定列。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__SECTION-1328-658D6C83">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-2DDF3BAE-EE7F-4A79-8673-99C3F38E76B2">约束的校对灵敏度</p>
                  <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，主键，唯一键和外键约束对其键列的声明排序规则很敏感。使用声明的键列排序规则，将新行或更新行中的主键或唯一键字符列值与现有行中的值进行比较。例如，如果键列的声明的排序规则是不区分大小写的排序<code class="codeph">BINARY_CI</code> ，则如果新的键列值仅与大小写的某些现有键值不同，则可能会拒绝新行或更新的行。排序<code class="codeph">BINARY_CI</code>处理的字符值仅根据大小写相等。
                  </p>
                  <p>使用父键列的声明排序规则将外键字符列值与父主键或唯一键列值进行比较。例如，如果键列的声明排序规则是不区分大小写的排序<code class="codeph">BINARY_CI</code> ，则即使对应的外键值没有相同的父键值，也可以接受新的或更新的子行，前提是存在不同的值只有个案。
                  </p>
                  <p>外键列的声明排序规则必须与相应父键列的排序规则相同。</p>
                  <p>约束的复合键中的列可以具有不同的声明的排序规则。</p>
                  <p>当约束的键列的声明的排序规则是伪排序规则时，约束使用排序规则<code class="codeph">BINARY</code>的相应变体。伪分类不能直接用于比较约束的值，因为约束是静态的，并且不能依赖于伪归类所依赖的会话NLS参数。因此：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>伪排序<code class="codeph">USING_NLS_COMP</code> ， <code class="codeph">USING_NLS_SORT</code>和<code class="codeph">USING_NLS_SORT_CS</code>使用排序规则<code class="codeph">BINARY</code> 。</p>
                     </li>
                     <li>
                        <p>伪排序<code class="codeph">USING_NLS_COMP_CI</code>使用排序<code class="codeph">BINARY_CI</code> 。</p>
                     </li>
                     <li>
                        <p>伪排序<code class="codeph">USING_NLS_COMP_AI</code>使用排序<code class="codeph">BINARY_AI</code> 。</p>
                     </li>
                  </ul>
                  <p>当主键或唯一键列使用的有效排序规则不是<code class="codeph">BINARY</code> ，Oracle会为此列创建隐藏的虚拟列。虚拟列的表达式计算原始键列的字符值的校对键。主键或唯一约束在内部创建在虚拟列而不是原始列上。虚拟列在<code class="codeph">*_TAB_COLS</code>系列的数据字典视图中可见。对于每一个这些隐藏的虚拟列，所述<code class="codeph">COLLATED_COLUMN_ID</code>的<code class="codeph">*_TAB_COLS</code>视图包含指向相应的原始键列的内部序列号。隐藏的虚拟列计为表的1000列限制。
                  </p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-23E4797E-E658-49C4-9D53-82C27E515A89">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__P-134369-659048FD">不区分大小写的约束示例</a></p>
                        </li>
                        <li>
                           <p><a href="../nlspg/linguistic-sorting-and-matching.html#NLSPG005" target="_blank"><span class="italic">“Oracle数据库全球化支持指南”</span></a> ，了解有关归类的更多详细信</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-4056A42A-397D-4B33-BAE5-C93411256246">指定约束状态</p>
                  <p>您可以指定Oracle在定义约束时应如何以及何时强制执行约束。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-AF4EE1FB-DC3A-462C-8E49-28F8F1270184"><span class="italic">constraint_state</span></p>
                  <p>您可以将<span class="italic"><code class="codeph">constraint_state</code></span>与内联和外联规范一起使用。除了可以按任何顺序指定的条款<code class="codeph">DEFERRABLE</code>和<code class="codeph">INITIALLY</code>之外，您必须按所示顺序指定其余的组件子句，并且每个子句只能指定一次。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-A2C302CD-DBF3-43A3-9BEA-9254C10F30EF">可延期的条款</p>
                  <p><code class="codeph">DEFERRABLE</code>和<code class="codeph">NOT</code> <code class="codeph">DEFERRABLE</code>参数指示在后续事务中是否可以使用<code class="codeph">SET</code> <code class="codeph">CONSTRAINT</code> （ <code class="codeph">S</code> ）语句将约束检查推迟到事务结束。如果省略此子句，则默认值为<code class="codeph">NOT</code> <code class="codeph">DEFERRABLE</code> 。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指定<code class="codeph">NOT</code> <code class="codeph">DEFERRABLE</code>以指示在后续事务中，您不能使用<code class="codeph">SET</code> <code class="codeph">CONSTRAINT</code> [ <code class="codeph">S</code> ]子句来推迟检查此约束，直到提交事务为止。永远不会将<code class="codeph">NOT</code> <code class="codeph">DEFERRABLE</code>约束的检查推迟到事务结束。
                        </p>
                        <p>如果声明新约束<code class="codeph">NOT</code> <code class="codeph">DEFERRABLE</code> ，则它必须在提交<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句时有效，否则语句将失败。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">DEFERRABLE</code>以指示在后续事务中，您可以使用<code class="codeph">SET</code> <code class="codeph">CONSTRAINT</code> [ <code class="codeph">S</code> ]子句来推迟检查此约束，直到提交<code class="codeph">COMMIT</code>语句。如果约束检查失败，则数据库返回错误，并且未提交事务。此设置有效允许您在更改可能违反约束的数据库时临时禁用约束，直到完成所有更改。
                        </p>
                        <div class="infoboxnote" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-70784925-79E1-436C-9A41-0EFC0FAE6448">
                           <p class="notep1">注意：</p>
                           <p>优化器不会将可延迟约束的索引视为可用。</p>
                        </div>
                     </li>
                  </ul>
                  <p>您无法更改约束的可延迟性。无论是指定这些参数中的任何一个，还是通过同时指定它们来隐式地使约束<code class="codeph">NOT</code> <code class="codeph">DEFERRABLE</code> ，都不能在<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句中指定此子句。您必须删除约束并重新创建它。
                  </p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-89A721AC-7073-4E80-AFA3-B691145F1F17">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="SET-CONSTRAINTS.html#GUID-1EF5B212-17C5-4F7C-9412-D777DFDEDCE9">SET CONSTRAINT [S]，</a>用于设置事务约束检查的信息</p>
                        </li>
                        <li>
                           <p>有关延迟约束的详细信息，请参见<a href="../admin/managing-schema-objects.html#ADMIN021" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a>和“ <a href="../cncpt/data-integrity.html#CNCPT021" target="_blank"><span class="italic">Oracle数据库概念</span></a> ”</p>
                        </li>
                        <li>
                           <p><span class="q">“可<a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015767">扩展的约束示例</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <p><span class="bold">对[NOT] DEFERRABLE的限制</span></p>
                  <p>您不能为视图约束指定这些参数中的任何一个。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-4FA3A9CE-8B6A-4F47-AE51-D04104F4C8D3">最初的条款</p>
                  <p><code class="codeph">INITIALLY</code>子句为<code class="codeph">DEFERRABLE</code>约束建立默认检查行为。在后续事务中， <code class="codeph">SET</code> <code class="codeph">CONSTRAINT</code> （ <code class="codeph">S</code> ）语句可以覆盖<code class="codeph">INITIALLY</code>设置。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold"></span>指定<code class="codeph">INITIALLY</code> <code class="codeph">IMMEDIATE</code>以指示Oracle应在每个后续SQL语句的末尾检查此约束。如果您根本没有指定<code class="codeph">INITIALLY</code> ，则默认值为<code class="codeph">INITIALLY</code> <code class="codeph">IMMEDIATE</code> 。</p>
                        <p>如果声明新约束<code class="codeph">INITIALLY</code> <code class="codeph">IMMEDIATE</code> ，则它必须在提交<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句时有效，否则语句将失败。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold"></span>指定<code class="codeph">INITIALLY</code> <code class="codeph">DEFERRED</code>以指示Oracle应在后续事务结束时检查此约束。
                        </p>
                     </li>
                  </ul>
                  <p>如果您已声明的约束将这一条款是无效的<code class="codeph">NOT</code> <code class="codeph">DEFERRABLE</code> ，因为<code class="codeph">NOT</code> <code class="codeph">DEFERRABLE</code>约束自动为<code class="codeph">INITIALLY</code> <code class="codeph">IMMEDIATE</code> ，不能永远是<code class="codeph">INITIALLY</code> <code class="codeph">DEFERRED</code> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__RELYCLAUSE-84049E1E">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__RELYCLAUSE-84049E10">RELY条款</p>
                  <p><code class="codeph">RELY</code>和<code class="codeph">NORELY</code>参数指定是否在查询重写时考虑<code class="codeph">NOVALIDATE</code>模式中的约束。指定<code class="codeph">RELY</code>以在<code class="codeph">NOVALIDATE</code>模式下激活约束，以便在未强制查询重写完整性模式下进行查询重写。约束处于<code class="codeph">NOVALIDATE</code>模式，因此Oracle不会强制执行它。默认值为<code class="codeph">NORELY</code> 。</p>
                  <p>非强制约束通常仅对物化视图和查询重写有用。根据<a href="../refrn/QUERY_REWRITE_INTEGRITY.html#REFRN10177" target="_blank"><code class="codeph">QUERY_REWRITE_INTEGRITY</code></a>模式，查询重写只能使用<code class="codeph">VALIDATE</code>模式下的约束，或者使用<code class="codeph">RELY</code>参数集的<code class="codeph">NOVALIDATE</code>模式，以确定连接信息。
                  </p>
                  <p><span class="bold">对RELY条款的限制</span></p>
                  <p>您不能为<code class="codeph">RELY</code>设置不可延迟的<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。</p>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__ORACLEDATABASEDATAWAREHOUSINGGUIDEF-84049E18">
                     <p class="notep1">也可以看看：</p>
                     <p>有关物化视图和查询重写的更多信息，请<a href="../dwhsg/index.html" target="_blank"><span class="italic">参见“Oracle数据库数据仓库指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__USINGINDEXESTOENFORCECONSTRAINTS-8404D35C">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__USINGINDEXESTOENFORCECONSTRAINTS-8404D2E4">使用索引实施约束</p>
                  <p>定义唯一或主键约束的状态时，可以指定Oracle用于强制执行约束的索引，也可以指示Oracle创建用于强制执行约束的索引。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__USING_INDEX_CLAUSE-8404D2EF">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__USING_INDEX_CLAUSE-8404D340"><span class="italic">using_index_clause</span></p>
                  <p>只有在启用唯一或主键约束时，才能指定<span class="italic"><code class="codeph">using_index_clause</code></span> 。您可以按任何顺序指定<span class="italic"><code class="codeph">using_index_clause</code></span>的子句，但只能指定每个子句一次。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果指定<span class="italic"><code class="codeph">schema</code></span> <span class="italic">。</span> <span class="italic"><code class="codeph">index</code></span> ，然后Oracle尝试使用指定的索引强制执行约束。如果Oracle无法找到索引或无法使用索引来强制执行约束，则Oracle会返回错误。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<span class="italic"><code class="codeph">create_index_statement</code></span> ，则Oracle会尝试创建索引并使用它来强制执行约束。如果Oracle无法创建索引或无法使用索引来强制执行约束，则Oracle会返回错误。
                        </p>
                     </li>
                     <li>
                        <p>如果既未指定现有索引也未创建新索引，则Oracle会创建索引。在这种情况下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>索引接收与约束相同的名称。</p>
                           </li>
                           <li>
                              <p>如果对<span class="italic"><code class="codeph">table</code></span>进行了分区，则可以为唯一或主键约束指定本地或全局分区索引。
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p><span class="bold"><span class="italic">using_index_clause的</span></span> <span class="bold">限制</span></p>
                  <p>以下限制适用于<span class="italic"><code class="codeph">using_index_clause</code></span> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您不能为视图约束指定此子句。</p>
                     </li>
                     <li>
                        <p>您不能为<code class="codeph">NOT</code> <code class="codeph">NULL</code> ，外键或检查约束指定此子句。
                        </p>
                     </li>
                     <li>
                        <p>在启用索引组织表的主键时，无法指定索引（ <span class="italic"><code class="codeph">schema.index</code></span> ）或创建索引（ <span class="italic"><code class="codeph">create_index_statement</code></span> ）。
                        </p>
                     </li>
                     <li>
                        <p>你不能指定<span class="italic"><code class="codeph">parallel_clause</code></span>的<span class="italic"><code class="codeph">index_attributes</code></span> 。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">index_properties</code></span>的<code class="codeph">INDEXTYPE</code> <code class="codeph">IS</code> ...子句在约束的定义中无效。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__FORADESCRIPTIONOFTHEANDCLAUSESANDFO-8404D2EF">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE">CREATE INDEX</a>用于描述<span class="italic"><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__I2075657">index_attributes</a></span> ， <span class="italic"><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__I2150212">global_partitioned_index</a></span>和<span class="italic"><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE__I2135151">local_partitioned_index</a></span>子句，以及<code class="codeph">NOSORT</code>和<span class="italic"><code class="codeph">logging_clause</code></span>与索引相关的描述</p>
                        </li>
                        <li>
                           <p><span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393">physical_attributes_clause</a></span>和<code class="codeph">PCTFREE</code>参数以及<span class="italic"><a href="storage_clause.html#GUID-C5A67610-3160-41E9-8D48-03206BD5ED15">storage_clause</a></span> 
                           </p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002834">显式索引控制示例</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1010237">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-A6ECFCB9-A1AE-499E-882D-96B5049FB202">ENABLE条款</p>
                  <p>如果要将约束应用于表中的数据，请指定<code class="codeph">ENABLE</code> 。
                  </p>
                  <p>如果启用唯一或主键约束，并且密钥上不存在索引，则Oracle数据库会创建唯一索引。除非在随后禁用约束时指定<code class="codeph">KEEP INDEX</code> ，否则将删除此索引，并且每次重新启用约束时数据库都会重建索引。
                  </p>
                  <p>您还可以通过创建最初禁用的新主键和唯一约束来避免重建索引并消除冗余索引。然后创建（或使用现有的）非唯一索引来强制执行约束。禁用约束时，Oracle不会删除非唯一索引，因此便于后续<code class="codeph">ENABLE</code>操作。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold"></span> <code class="codeph">ENABLE</code> <code class="codeph">VALIDATE</code>指定所有旧数据和新数据也符合约束。启用的验证约束可确保所有数据都将继续有效。
                        </p>
                        <p>如果表中的任何行违反了完整性约束，则约束将保持禁用状态，Oracle将返回错误。如果所有行都符合约束，则Oracle启用约束。随后，如果新数据违反约束，则Oracle不执行该语句并返回指示完整性约束违规的错误。</p>
                        <p>如果在<code class="codeph">ENABLE</code> <code class="codeph">VALIDATE</code>模式下放置主键约束，则验证过程将验证主键列是否包含空值。要避免此开销，请在将数据输入列之前以及启用表的主键约束之前，将主键中的每列标记为<code class="codeph">NOT</code> <code class="codeph">NULL</code> 。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold"></span> <code class="codeph">ENABLE</code> <code class="codeph">NOVALIDATE</code>确保受约束数据上的所有新DML操作都符合约束。此子句不确保表中的现有数据符合约束。
                        </p>
                     </li>
                  </ul>
                  <p>如果既未指定<code class="codeph">VALIDATE</code>也未指定<code class="codeph">NOVALIDATE</code> ，则默认值为<code class="codeph">VALIDATE</code> 。</p>
                  <p>如果将任何单个约束的状态从<code class="codeph">ENABLE</code> <code class="codeph">NOVALIDATE</code>更改为<code class="codeph">ENABLE</code> <code class="codeph">VALIDATE</code> ，则可以并行执行操作，并且不会阻止读取，写入或其他DDL操作。
                  </p>
                  <p><span class="bold">对ENABLE条款的限制</span></p>
                  <p>您无法启用引用已禁用的唯一键或主键的外键。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002349">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-CC07C7AD-C1A8-45A5-A409-C13545B22094">禁用条款</p>
                  <p>指定<code class="codeph">DISABLE</code>以禁用完整性约束。禁用的完整性约束与启用的约束一起出现在数据字典中。如果在创建约束时未指定此子句，则Oracle会自动启用约束。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">DISABLE</code> <code class="codeph">VALIDATE</code>禁用约束并删除约束上的索引，但保持约束有效。此功能在数据仓库情况下最有用，因为它允许您加载大量数据，同时还通过不使用索引来节省空间。此设置允许您使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的<span class="italic"><code class="codeph">exchange_partition_subpart</code></span>子句或使用SQL * Loader将数据从非分区表加载到分区表中。不允许其他SQL语句对表（插入，更新和删除）的所有其他修改。
                        </p>
                        <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-FAE2E729-40EC-44A0-A566-4F4E32BD4342">
                           <p class="notep1">也可以看看：</p>
                           <p>有关使用此设置的详细信息，请参阅<a href="../dwhsg/data-warehouse-optimizations-techniques.html#DWHSG8151" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”</span></a></p>
                        </div>
                     </li>
                     <li>
                        <p><code class="codeph">DISABLE</code> <code class="codeph">NOVALIDATE</code>表示Oracle不会努力维护约束（因为它被禁用）并且无法保证约束为true（因为它未被验证）。
                        </p>
                        <p>即使外键约束处于<code class="codeph">DISABLE</code> <code class="codeph">NOVALIDATE</code>状态，也不能删除主键被外键引用的表。此外，优化器可以在<code class="codeph">DISABLE</code> <code class="codeph">NOVALIDATE</code>状态中使用约束。
                        </p>
                        <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-158A6CFE-3777-4E3C-8EDA-73A438360528">
                           <p class="notep1">也可以看看：</p>
                           <p>有关何时使用此设置的信息，请<a href="../tgsql/index.html" target="_blank"><span class="italic">参见“Oracle数据库SQL调整指南”</span></a></p>
                        </div>
                     </li>
                  </ul>
                  <p>如果既未指定<code class="codeph">VALIDATE</code>也未指定<code class="codeph">NOVALIDATE</code> ，则默认值为<code class="codeph">NOVALIDATE</code> 。</p>
                  <p>如果禁用使用唯一索引的唯一或主键约束，则Oracle会删除唯一索引。有关其他说明和限制，请参阅<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2062565">enable_disable_clause</a></span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__VALIDATENOVALIDATE-840490B8">确认| NOVALIDATE</p>
                  <p><code class="codeph">VALIDATE</code>和<code class="codeph">NOVALIDATE</code>的行为取决于是显式还是默认启用或禁用约束。因此， <code class="codeph">VALIDATE</code>和<code class="codeph">NOVALIDATE</code>关键字在<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1010237">ENABLE Clause</a> ”</span>和<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002349">DISABLE Clause</a> ”</span>的上下文中描述。
                  </p>
                  <p><span class="bold">关于NOVALIDATE模式下外键约束的注意事项</span></p>
                  <p>当外键约束处于<code class="codeph">NOVALIDATE</code>模式时，如果表中的现有数据不符合约束且<code class="codeph">QUERY_REWRITE_INTEGRITY</code>参数未设置为<code class="codeph">ENFORCED</code> ，则优化程序可以在对表的查询期间使用连接消除。在这种情况下，即使查询包含应过滤掉这些行的连接条件，查询也可能返回具有不符合的外键值的表行。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1012716">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-62D354A1-E422-4753-A438-05491BFEE63E">处理约束异常</p>
                  <p>定义约束的状态时，可以指定一个表，Oracle将所有行的rowid置于该表中，从而违反约束。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-AA88263C-9A20-44EB-86B4-3823CE3DD50F"><span class="italic">exceptions_clause</span></p>
                  <p>使用<span class="italic"><code class="codeph">exceptions_clause</code></span>语法定义异常处理。如果省略<span class="italic"><code class="codeph">schema</code></span> ，则Oracle假定异常表位于您自己的模式中。如果完全省略此子句，则Oracle假定该表名为<code class="codeph">EXCEPTIONS</code> 。 <code class="codeph">EXCEPTIONS</code>表或您指定的表必须存在于本地数据库中。
                  </p>
                  <p>您可以使用以下脚本之一创建<code class="codeph">EXCEPTIONS</code>表：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">UTLEXCPT.SQL</code>使用物理rowid。因此，它可以容纳传统表中的行，但不能容纳索引组织表。（见下面的注释。）
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">UTLEXPT1。SQL</code>使用通用rowid，因此它可以容纳来自传统和索引组织表的行。
                        </p>
                     </li>
                  </ul>
                  <p>如果您创建自己的例外表，则它必须遵循这两个脚本之一规定的格式。</p>
                  <p>如果要根据主键（而不是通用rowid）从索引组织表中收集异常，则必须为每个索引组织表创建单独的异常表以容纳其主键存储。通过修改和重新提交脚本，可以创建具有不同名称的多个异常表。</p>
                  <p><span class="bold"><span class="italic">exception_clause的</span></span> <span class="bold">限制</span></p>
                  <p>以下限制适用于<span class="italic"><code class="codeph">exceptions_clause</code></span> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您不能为视图约束指定此子句。</p>
                     </li>
                     <li>
                        <p>不能指定在此条款<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句，因为不存在的rowid到语句成功完成<span class="italic">后</span> 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-E496D9A1-98C3-43AC-9A66-6A30569E19BA">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关SQL脚本的信息，请参阅<a href="../arpls/DBMS_IOT.html#ARPLS018" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>的<code class="codeph">DBMS_IOT</code>包</p>
                              </li>
                              <li>
                                 <p><a href="../tgdba/index.html" target="_blank"><span class="italic">“Oracle数据库性能调整指南”</span></a> ，了解有关消除已迁移和已链接行的信息</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002565">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-CC519B1C-AB71-43F2-8276-97778AB899AE">查看约束</p>
                  <p>Oracle不强制执行视图约束。但是，视图上的操作受基础基表上定义的完整性约束的约束。这意味着您可以通过对基表的约束来强制执行对视图的约束。</p>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__BABFCAIF"><span class="bold">关于视图约束的注释</span></p>
                  <p>视图约束是表约束的子集，受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您只能在视图上指定唯一，主键和外键约束。但是，您可以使用<code class="codeph">WITH</code> <code class="codeph">CHECK</code> <code class="codeph">OPTION</code>子句定义视图，这相当于为视图指定检查约束。
                        </p>
                     </li>
                     <li>
                        <p>仅在<code class="codeph">DISABLE</code> <code class="codeph">NOVALIDATE</code>模式下支持视图约束。您无法指定任何其他模式。声明视图约束时，必须指定关键字<code class="codeph">DISABLE</code> 。您无需显式指定<code class="codeph">NOVALIDATE</code> ，因为它是默认值。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">RELY</code>和<code class="codeph">NORELY</code>参数是可选的。视图约束（因为它们是非强制的）通常使用<code class="codeph">RELY</code>参数指定，以使它们更有用。<code class="codeph">RELY</code>或<code class="codeph">NORELY</code>关键字必须位于<code class="codeph">DISABLE</code>关键字之前。
                        </p>
                     </li>
                     <li>
                        <p>由于视图约束不直接强制执行，因此您无法指定<code class="codeph">INITIALLY</code> <code class="codeph">DEFERRED</code>或<code class="codeph">DEFERRABLE</code> 。</p>
                     </li>
                     <li>
                        <p>你不能指定<span class="italic"><code class="codeph">using_index_clause</code></span>的<span class="italic"><code class="codeph">exceptions_clause</code></span>子句或<code class="codeph">ON</code> <code class="codeph">DELETE</code>的条款<span class="italic"><code class="codeph">references_clause</code></span> 。
                        </p>
                     </li>
                     <li>
                        <p>您无法在对象列的属性上定义视图约束。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__EXTERNALTABLECONSTRAINTS-5C72DEDF">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-1380B7FD-9F5B-4177-88F4-5665FDFFAE9A">外部表约束</p>
                  <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，您可以在外部表上指定<code class="codeph">NOT</code> <code class="codeph">NULL</code> ，唯一，主键和外键约束。
                  </p>
                  <p>强制执行外部表的<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束，并禁止列包含空值。
                  </p>
                  <p>仅在<code class="codeph">RELY</code> <code class="codeph">DISABLE</code>模式下，外部表支持唯一，主键和外键约束。创建这些约束时，必须指定关键字<code class="codeph">RELY</code>和<code class="codeph">DISABLE</code> 。这些约束是声明性的，不会强制执行。它们可以提高查询性能并减少资源消耗，因为可以考虑更多优化器转换。为了使优化器能够利用这些<code class="codeph">RELY</code> <code class="codeph">DISABLE</code>约束，必须将<code class="codeph">QUERY_REWRITE_INTEGRITY</code>初始化参数设置为<code class="codeph">trusted</code>或<code class="codeph">stale_tolerated</code> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__GUID-A83F5B26-F64A-438B-886C-4A49344604A9">例子</p>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015609"><span class="bold">独特的关键示例</span></p>
                  <p>以下语句是创建示例表<code class="codeph">sh.promotions</code>的语句的变体。它定义内联并隐式启用<code class="codeph">promo_id</code>列上的唯一键（其他约束未显示）：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE promotions_var1（promo_id NUMBER（6）CONSTRAINT promo_id_u UNIQUE，promo_name VARCHAR2（20），promo_category VARCHAR2（15），promo_cost NUMBER（10,2），promo_begin_date DATE，promo_end_date DATE）;</pre><p>约束<code class="codeph">promo_id_u</code>将<code class="codeph">promo_id</code>列标识为唯一键。此约束确保表中没有两个促销具有相同的ID。但是，约束确实允许没有标识符的促销。
                  </p>
                  <p>或者，您可以定义并启用此约束：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE promotions_var2（promo_id NUMBER（6），promo_name VARCHAR2（20），promo_category VARCHAR2（15），promo_cost NUMBER（10,2），promo_begin_date DATE，promo_end_date DATE，CONSTRAINT promo_id_u UNIQUE（promo_id）使用INDEX PCTFREE 20 TABLESPACE库存（ INITIAL 8M））;</pre><p>上述语句还包含<span class="italic"><code class="codeph">using_index_clause</code></span> ，它指定Oracle为启用约束而创建的索引的存储特征。
                  </p>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015598"><span class="bold">复合唯一键示例</span></p>
                  <p>以下语句在<code class="codeph">oe.warehouses</code>表的<code class="codeph">warehouse_id</code>和<code class="codeph">warehouse_name</code>列的组合上定义并启用复合唯一键：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE仓库ADD CONSTRAINT wh_unq UNIQUE（warehouse_id，warehouse_name）使用INDEX PCTFREE 5 EXCEPTIONS INTO wrong_id;</pre><p><code class="codeph">wh_unq</code>约束确保<code class="codeph">warehouse_name</code>中不会出现相同的<code class="codeph">warehouse_id</code>和<code class="codeph">warehouse_name</code>值组合。
                  </p>
                  <p><code class="codeph">ADD</code> <code class="codeph">CONSTRAINT</code>子句还指定约束的其他属性：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">USING</code> <code class="codeph">INDEX</code>子句指定Oracle为启用约束而创建的索引的存储特征。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">EXCEPTIONS</code> <code class="codeph">INTO</code>子句使Oracle向<code class="codeph">wrong_id</code>表写入有关<code class="codeph">warehouses</code>表中当前违反约束的任何行的信息。如果<code class="codeph">wrong_id</code>例外表尚不存在，则此语句将失败。
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002629"><span class="bold">主键示例</span></p>
                  <p>以下语句是创建示例表<code class="codeph">hr.locations</code>的语句的变体。它创建<code class="codeph">locations_demo</code>表并在<code class="codeph">location_id</code>列上定义和启用主键（省略<code class="codeph">hr.locations</code>表中的其他约束）：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE locations_demo（location_id NUMBER（4）CONSTRAINT loc_id_pk PRIMARY KEY，street_address VARCHAR2（40），postal_code VARCHAR2（12），city VARCHAR2（30），state_province VARCHAR2（25），country_id CHAR（2））;</pre><p>内联指定的<code class="codeph">loc_id_pk</code>约束将<code class="codeph">location_id</code>列标识为<code class="codeph">locations_demo</code>表的主键。此约束确保表中没有两个位置具有相同的位置编号，并且没有位置标识符为<code class="codeph">NULL</code> 。</p>
                  <p>或者，您可以定义并启用此约束：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE locations_demo（location_id NUMBER（4），street_address VARCHAR2（40），postal_code VARCHAR2（12），city VARCHAR2（30），state_province VARCHAR2（25），country_id CHAR（2），CONSTRAINT loc_id_pk PRIMARY KEY（location_id））;</pre><p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015640"><span class="bold">NOT NULL示例</span></p>
                  <p>以下语句更改<code class="codeph">locations_demo</code>表（在<span class="q">“ <a href="constraint.html#GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002629">主键示例</a> ”中</span>创建）以在<code class="codeph">country_id</code>列上定义和启用<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE locations_demo MODIFY（country_id CONSTRAINT country_nn NOT NULL）;</pre><p>约束<code class="codeph">country_nn</code>确保表中没有位置具有null <code class="codeph">country_id</code> 。
                  </p>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015668"><span class="bold">复合主键示例</span></p>
                  <p>以下语句定义了样本表<code class="codeph">sh.sales</code>的<code class="codeph">prod_id</code>和<code class="codeph">cust_id</code>列组合的复合主键：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales ADD CONSTRAINT sales_pk PRIMARY KEY（prod_id，cust_id）DISABLE;</pre><p>此约束将<code class="codeph">prod_id</code>和<code class="codeph">cust_id</code>列的组合标识为<code class="codeph">sales</code>表的主键。约束确保表中没有两行具有<code class="codeph">prod_id</code>列和<code class="codeph">cust_id</code>列的相同值组合。
                  </p>
                  <p>约束子句（ <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> ）还指定约束的以下属性：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>约束定义不包含约束名称，因此Oracle会为约束生成名称。</p>
                     </li>
                     <li>
                        <p><code class="codeph">DISABLE</code>子句使Oracle定义约束但不启用它。
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1036780"><span class="bold">外键约束示例</span></p>
                  <p>以下语句创建<code class="codeph">dept_20</code>表，并在<code class="codeph">department_id</code>列上定义和启用外键，该外键引用<code class="codeph">departments</code>表的<code class="codeph">department_id</code>列上的主键：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE dept_20（employee_id NUMBER（4），last_name VARCHAR2（10），job_id VARCHAR2（9），manager_id NUMBER（4），hire_date DATE，工资NUMBER（7,2），commission_pct NUMBER（7,2），department_id CONSTRAINT fk_deptno REFERENCES部门（department_id））;</pre><p>约束<code class="codeph">fk_deptno</code>确保<code class="codeph">dept_20</code>表中为员工提供的所有部门都存在于<code class="codeph">departments</code>表中。但是，员工可以拥有空的部门编号，这意味着他们不会分配给任何部门。要确保将所有员工分配到某个部门，除了<code class="codeph">REFERENCES</code>约束之外，还可以在<code class="codeph">dept_20</code>表的<code class="codeph">department_id</code>列上创建<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。
                  </p>
                  <p>在定义和启用此约束之前，必须定义并启用一个约束，该约束将<code class="codeph">departments</code>表的<code class="codeph">department_id</code>列指定为主键或唯一键。
                  </p>
                  <p>外键约束定义不使用<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>子句，因为约束是内联定义的。不需要<span class="italic"><code class="codeph">department_id</code></span>列的数据类型，因为Oracle会自动为此列分配引用键的数据类型。
                  </p>
                  <p>约束定义标识父表和引用键的列。由于引用的键是父表的主键，因此引用的键列名是可选的。</p>
                  <p>或者，您可以在线外定义此外键约束：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE dept_20（employee_id NUMBER（4），last_name VARCHAR2（10），job_id VARCHAR2（9），manager_id NUMBER（4），hire_date DATE，salary NUMBER（7,2），commission_pct NUMBER（7,2），department_id，CONSTRAINT fk_deptno FOREIGN KEY（department_id）REFERENCES部门（department_id））;</pre><p>此语句的两个变体中的外键定义都省略了<code class="codeph">ON</code> <code class="codeph">DELETE</code>子句，导致Oracle在任何员工在该部门工作时阻止删除部门。
                  </p>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015699"><span class="bold">ON DELETE示例</span></p>
                  <p>此语句创建<code class="codeph">dept_20</code>表，定义并启用两个参照完整性约束，并使用<code class="codeph">ON</code> <code class="codeph">DELETE</code>子句：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE dept_20（employee_id NUMBER（4）PRIMARY KEY，last_name VARCHAR2（10），job_id VARCHAR2（9），manager_id NUMBER（4）CONSTRAINT fk_mgr REFERENCES employees ON DELETE SET NULL，hire_date DATE，salary NUMBER（7,2），commission_pct NUMBER（7,2），department_id NUMBER（2）CONSTRAINT fk_deptno REFERENCES departments（department_id）ON DELETE CASCADE）;</pre><p>由于第一个<code class="codeph">ON</code> <code class="codeph">DELETE</code>子句，如果从<code class="codeph">employees</code>表中删除了管理器号2332，则Oracle将<code class="codeph">dept_20</code>表中以前具有管理器2332的所有员工的<code class="codeph">manager_id</code>值设置为null。
                  </p>
                  <p>由于第二的<code class="codeph">ON</code> <code class="codeph">DELETE</code>子句，甲骨文级联一个的任何缺失<code class="codeph">department_id</code>在值<code class="codeph">departments</code>表的<code class="codeph">department_id</code>所述的依赖于它的行的值<code class="codeph">dept_20</code>表。例如，如果从<code class="codeph">departments</code>表中删除了Department 20，那么Oracle将从<code class="codeph">dept_20</code>表中删除Department 20中的所有员工。
                  </p>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015710"><span class="bold">复合外键约束示例</span></p>
                  <p>以下语句在<code class="codeph">dept_20</code>表的<code class="codeph">employee_id</code>和<code class="codeph">hire_date</code>列的组合上定义并启用外键：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept_20 ADD CONSTRAINT fk_empid_hiredate FOREIGN KEY（employee_id，hire_date）REFERENCES hr.job_history（employee_id，start_date）EXCEPTIONS INTO wrong_emp;</pre><p>约束<code class="codeph">fk_empid_hiredate</code>确保了所有员工<code class="codeph">dept_20</code>表已经<code class="codeph">employee_id</code>和<code class="codeph">hire_date</code>存在于组合<code class="codeph">employees</code>表。在定义和启用此约束之前，必须定义并启用一个约束，该约束将<code class="codeph">employees</code>表的<code class="codeph">employee_id</code>和<code class="codeph">hire_date</code>列的组合指定为主键或唯一键。
                  </p>
                  <p><code class="codeph">EXCEPTIONS</code> <code class="codeph">INTO</code>子句使Oracle将有关违反约束的<code class="codeph">dept_20</code>表中任何行的信息写入<code class="codeph">wrong_emp</code>表。如果<code class="codeph">wrong_emp</code>例外表尚不存在，则此语句将失败。
                  </p>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002719"><span class="bold">检查约束示例</span></p>
                  <p>以下语句创建一个<code class="codeph">divisions</code>表，并在表的每一列中定义一个<code class="codeph">check</code>约束：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE分区（div_no NUMBER CONSTRAINT check_divno CHECK（div_no BETWEEN 10和99）DISABLE，div_name VARCHAR2（9）CONSTRAINT check_divname CHECK（div_name = UPPER（div_name））DISABLE，office VARCHAR2（10）CONSTRAINT check_office CHECK（office IN（'DALLAS） '，'波士顿'，'巴黎'，'东京'））禁用）;</pre><p>每个约束都限制定义它的列的值：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">check_divno</code>确保没有分区号小于10或大于99。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">check_divname</code>确保所有分区名称都是大写的。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">check_office</code>将办公地点限制在达拉斯，波士顿，巴黎或东京。
                        </p>
                     </li>
                  </ul>
                  <p>由于每个<code class="codeph">CONSTRAINT</code>子句都包含<code class="codeph">DISABLE</code>子句，因此Oracle仅定义约束并且不启用它们。
                  </p>
                  <p>以下语句创建<code class="codeph">dept_20</code>表，定义out of line并隐式启用检查约束：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE dept_20（employee_id NUMBER（4）PRIMARY KEY，last_name VARCHAR2（10），job_id VARCHAR2（9），manager_id NUMBER（4），salary NUMBER（7,2），commission_pct NUMBER（7,2），department_id NUMBER（2 ），CONSTRAINT check_sal CHECK（salary * commission_pct &lt;= 5000））;</pre><p>此约束使用不等式条件将员工的总佣金（ <code class="codeph">salary</code>和<code class="codeph">commission_pct</code>的产品）限制为5000美元：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果员工的工资和佣金都具有非空值，则这些值的乘积不得超过$ 5000以满足约束条件。</p>
                     </li>
                     <li>
                        <p>如果员工的工资或佣金为空，则条件的结果未知，员工自动满足约束条件。</p>
                     </li>
                  </ul>
                  <p>由于此示例中的约束子句不提供约束名称，因此Oracle会为约束生成名称。</p>
                  <p>以下语句定义并启用主键约束，两个外键约束， <code class="codeph">NOT</code> <code class="codeph">NULL</code>约束和两个检查约束：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE order_detail（CONSTRAINT pk_od PRIMARY KEY（order_id，part_no），order_id NUMBER CONSTRAINT fk_oid REFERENCES oe.orders（order_id），part_no NUMBER CONSTRAINT fk_pno REFERENCES oe.product_information（product_id），quantity NUMBER CONSTRAINT nn_qty NOT NULL CONSTRAINT check_qty CHECK（quantity&gt; 0），成本NUMBER CONSTRAINT check_cost CHECK（cost&gt; 0））;</pre><p>约束为表数据启用以下规则：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p> <code class="codeph">pk_od</code>将<code class="codeph">order_id</code>和<code class="codeph">part_no</code>列的组合标识为表的主键。要满足此约束，表中的任何两行都不能在<code class="codeph">order_id</code>和<code class="codeph">part_no</code>列中包含相同的值组合，并且表中的任何行都不能在<code class="codeph">order_id</code>或<code class="codeph">part_no</code>列中具有null。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">fk_oid</code>标识<code class="codeph">order_id</code>列引用的外键<code class="codeph">order_id</code>列<code class="codeph">orders</code>表中的示例模式<code class="codeph">oe</code> 。所有新值都添加到列<code class="codeph">order_detail</code> 。 <code class="codeph">order_id</code>必须已经出现在<code class="codeph">oe.orders.order_id</code>列中。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">fk_pno</code>标识<code class="codeph">product_id</code>列引用的外键<code class="codeph">product_id</code>列<code class="codeph">product_information</code>归表<code class="codeph">oe</code> 。添加到列<code class="codeph">order_detail.product_id</code>所有新值必须已出现在<code class="codeph">oe.product_information.product_id</code>列中。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">nn_qty</code>禁止<code class="codeph">quantity</code>列中的空值。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">check_qty</code>确保<code class="codeph">quantity</code>列中的值始终大于零。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">check_cost</code>确保cost列中的值始终大于零。
                        </p>
                     </li>
                  </ul>
                  <p>此示例还说明了有关约束子句和列定义的以下几点：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>外部约束定义可以出现在列定义之前或之后。在此示例中， <code class="codeph">pk_od</code>约束的外联定义位于列定义之前。
                        </p>
                     </li>
                     <li>
                        <p>列定义可以包含多个内联约束定义。在此示例中， <code class="codeph">quantity</code>列的定义包含<code class="codeph">nn_qty</code>和<code class="codeph">check_qty</code>约束的定义。
                        </p>
                     </li>
                     <li>
                        <p>一个表可以有多个<code class="codeph">CHECK</code>约束。多个<code class="codeph">CHECK</code>约束（每个约束条件都强制执行单个业务规则）优于单个<code class="codeph">CHECK</code>约束，其中复杂条件强制执行多个业务规则。违反约束时，Oracle会返回标识约束的错误。如果所识别的约束启用单个业务规则，则此类错误更准确地标识违反的业务规则。
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__P-134369-659048FD"><span class="bold">不区分大小写的约束示例</span></p>
                  <p>以下语句以父子关系创建两个表。父表是产品描述表，子表是产品组件描述表。定义了唯一约束以确保产品和描述值是明确的。出于说明目的，产品和组件ID是不区分大小写的字符值。（在实际应用程序中，主键ID通常是数字或大小写标准化。）</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE产品（product_id VARCHAR2（20）COLLATE BINARY_CI CONSTRAINT product_pk PRIMARY KEY，description VARCHAR2（1000）COLLATE BINARY_CI CONSTRAINT product_description_unq UNIQUE）; CREATE TABLE product_components（component_id VARCHAR2（40）COLLATE BINARY_CI CONSTRAINT product_component_pk PRIMARY KEY，product_id CONSTRAINT product_component_fk REFERENCES products（product_id），description VARCHAR2（1000）COLLATE BINARY_CI CONSTRAINT product_component_descr_unq UNIQUE）;</pre><p>请注意，如果未指定外键列的数据类型或排序规则，则它们将从父键列继承。</p>
                  <p>以下语句将产品及其组件添加到表中：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO产品（product_id，description）VALUES（'BICY0001'，'男士自行车，fr 21“，wh 24”，齿轮3x7'）; INSERT INTO product_components（component_id，product_id，description）VALUES（'BICY0001_FRAME01'，'BICY0001'，'Aluminum frame 21“'）; INSERT INTO product_components（component_id，product_id，description）VALUES（'BICY0001_WHEEL01'，'bicy0001'，'Wheels 24" '）; INSERT INTO product_components（component_id，product_id，description）VALUES（'BICY0001_GEAR01'，'Bicyfor1''，'Front derailleur 3 chainrings'）; INSERT INTO product_components（component_id，product_id，description）VALUES（'BICY0001_gear02'，'BiCy0001'，'Rear derailleur 7 chainrings'）;</pre><p>请注意不同组件行中产品ID的不同情况。由于产品ID上的主键被声明为不区分大小写，因此相同ID的所有可能的字母大小写组合都被视为相等。</p>
                  <p>以下陈述表明，不可能只输入具有相同描述的另一产品。它失败并出现错误<code class="codeph">ORA-00001:</code> <code class="codeph">unique</code> <code class="codeph">constraint</code> <code class="codeph">(</code> <span class="italic"><code class="codeph">schema</code></span> <code class="codeph">.PRODUCT_DESCRIPTION_UNQ)</code> <code class="codeph">violated</code> 。
                  </p><pre class="oac_no_warn" dir="ltr">INSERT INTO产品（product_id，description）VALUES（'BICY0002'，'MEN''S BICYCLE，fr 21“，wh 24”，齿轮3x7'）;</pre><p>类似地，以下语句演示了product表的主键约束是不区分大小写的，并且不允许值仅根据大小写不同。它失败并出现错误<code class="codeph">ORA-00001:</code> <code class="codeph">unique</code> <code class="codeph">constraint</code> <code class="codeph">(</code> <span class="italic"><code class="codeph">schema</code></span> <code class="codeph">.PRODUCT_PK)</code> <code class="codeph">violated</code> 。
                  </p><pre class="oac_no_warn" dir="ltr">INSERT INTO产品（component_id，product_id，description）VALUES（'bicy0001'，'女式自行车，fr 21“，wh 24”，齿轮2x6'）;</pre><p>以下声明表明，不能输入具有相同描述的另一个组件，仅根据具体情况而有所不同。它失败并出现错误<code class="codeph">ORA-00001:</code> <code class="codeph">unique</code> <code class="codeph">constraint</code> <code class="codeph">(</code> <span class="italic"><code class="codeph">schema</code></span> <code class="codeph">.PRODUCT_COMPONENT_DESCR_UNQ)</code> <code class="codeph">violated</code> 。
                  </p><pre class="oac_no_warn" dir="ltr">INSERT INTO product_components（component_id，product_id，description）VALUES（'BICY0001_gear03'，'BiCy0001'，'REAR DERAILLEUR 7 CHAINRINGS'）;</pre><p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002779"><span class="bold">属性级约束示例</span></p>
                  <p>以下示例保证<code class="codeph">students</code>表中<code class="codeph">name</code>列的<code class="codeph">first_name</code>和<code class="codeph">last_name</code>属性都存在一个值：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE person_name AS OBJECT（first_name VARCHAR2（30），last_name VARCHAR2（30））; / CREATE TABLE学生（name person_name，age INTEGER，CHECK（name.first_name IS NOT NULL AND name.last_name IS NOT NULL））;</pre><p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015744"><span class="bold">REF约束示例</span></p>
                  <p>以下示例创建示例模式对象类型<code class="codeph">cust_address_typ</code> ，然后创建包含具有<code class="codeph">SCOPE</code>约束的<code class="codeph">REF</code>列的表：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE cust_address_typ_new AS OBJECT（street_address VARCHAR2（40），postal_code VARCHAR2（10），city VARCHAR2（30），state_province VARCHAR2（10），country_id CHAR（2））; / CREATE TABLE address_table OF cust_address_typ_new; CREATE TABLE customer_addresses（add_id NUMBER，address REF cust_address_typ_new SCOPE IS address_table）;</pre><p>以下示例创建相同的表，但在<code class="codeph">REF</code>列上引用了引用完整性约束，引用了父表的对象标识符列：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE customer_addresses（add_id NUMBER，address REF cust_address_typ REFERENCES address_table）;</pre><p>以下示例使用在<span class="q">“ <a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2102043">创建对象表：示例</a> ”中<a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2102043">创建</a></span>的类型<code class="codeph">department_typ</code>和表<code class="codeph">departments_obj_t</code> 。然后创建带有范围<code class="codeph">REF</code>表。
                  </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employees_obj（e_name VARCHAR2（100），e_number NUMBER，e_dept REF department_typ SCOPE IS departments_obj_t）;</pre><p>以下语句创建一个包含<code class="codeph">REF</code>列的表，该列具有在其上定义的引用完整性约束：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employees_obj（e_name VARCHAR2（100），e_number NUMBER，e_dept REF department_typ REFERENCES departments_obj_t）;</pre><p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1002834"><span class="bold">显式索引控制示例</span></p>
                  <p>以下语句显示了另一种创建唯一（或主键）约束的方法，该约束使您可以显式控制Oracle用于强制执行约束的索引（或索引）：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE promotions_var3（promo_id NUMBER（6），promo_name VARCHAR2（20），promo_category VARCHAR2（15），promo_cost NUMBER（10,2），promo_begin_date DATE，promo_end_date DATE，CONSTRAINT promo_id_u UNIQUE（promo_id，promo_cost）USING INDEX（CREATE UNIQUE INDEX） promo_ix1 ON promotions_var3（promo_id，promo_cost）），CONSTRAINT promo_id_u2 UNIQUE（promo_cost，promo_id）USING INDEX promo_ix1）;</pre><p>此示例还显示您可以为一个约束创建索引，并使用该索引在同一语句中创建和启用另一个约束。</p>
                  <p id="GUID-1055EA97-BA6F-4764-A15F-1024FD5B6DFE__I1015767"><span class="bold">可扩展的约束示例</span></p>
                  <p>以下语句在<code class="codeph">scores</code>列上创建具有<code class="codeph">NOT</code> <code class="codeph">DEFERRABLE</code> <code class="codeph">INITIALLY</code> <code class="codeph">IMMEDIATE</code>约束检查（默认情况下）的表<code class="codeph">games</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE游戏（得分NUMBER CHECK（得分&gt; = 0））;</pre><p>要将列上的唯一约束定义为<code class="codeph">INITIALLY</code> <code class="codeph">DEFERRED</code> <code class="codeph">DEFERRABLE</code> ，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE游戏（得分NUMBER，CONSTRAINT unq_num UNIQUE（得分）初始推荐）;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
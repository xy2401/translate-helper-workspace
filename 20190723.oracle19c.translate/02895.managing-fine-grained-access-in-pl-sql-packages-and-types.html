<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle Database provides PL/SQL packages and types for fine-grained access to control access to external network services and wallets."></meta>
      <meta name="description" content="Oracle Database provides PL/SQL packages and types for fine-grained access to control access to external network services and wallets."></meta>
      <title>管理PL / SQL包和类型中的细粒度访问</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Security Guide "></meta>
      <meta property="og:description" content="Oracle Database provides PL/SQL packages and types for fine-grained access to control access to external network services and wallets."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Security Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-security-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-28T14:57:12-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96299-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-security-for-definers-rights-and-invokers-rights.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-security-for-multitenant-environment-in-em.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Security Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBSEG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-security-for-definers-rights-and-invokers-rights.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-security-for-multitenant-environment-in-em.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安全指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part_1.html" property="item" typeof="WebPage"><span property="name">管理用户身份验证和授权</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理PL / SQL包和类型中的细粒度访问</li>
            </ol>
            <a id="GUID-B7DB516A-3245-417F-BB89-8E8212A97542" name="GUID-B7DB516A-3245-417F-BB89-8E8212A97542"></a><a id="DBSEG40012"></a>
            
            <h2 id="DBSEG-GUID-B7DB516A-3245-417F-BB89-8E8212A97542" class="sect2"><span class="enumeration_chapter">8</span>管理PL / SQL包和类型中的细粒度访问</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-9FEADB5F-BDDB-4C94-9C23-F1F0B521F7E9">关于在PL / SQL包和类型中管理细粒度访问</a><br>您可以通过一组PL / SQL包和一种类型配置用户对外部网络服务和钱包的访问。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-3A9008A8-A38B-4BBA-B520-8724A518EE54">关于对外部网络服务的细粒度访问控制</a><br>Oracle Application Security访问控制列表（ACL）可以实现对外部网络服务的细粒度访问控制。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-3810CB91-03E4-4978-89A2-AD7F61590293">关于对Oracle钱包的访问控制</a><br>访问受远程Web服务器保护的Web页面时，用户可以使用存储在Oracle钱包中的密码和客户端证书对自身进行身份验证。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-74873A0A-FA27-4DC4-8ECC-AC438C64DBE0">升级的应用程序依赖于使用外部网络服务的程序包</a><br>升级的应用程序可能存在<code class="codeph">ORA-24247</code>网络访问错误。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-3D5B66BC-0277-4887-9CD1-97DB44EB5213">配置外部网络服务的访问控制</a><br><code class="codeph">DBMS_NETWORK_ACL</code>程序包配置外部网络服务的访问控制。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-0BCB5925-A40F-4507-95F9-5DA4A1919EBD">配置对Oracle Wallet的访问控制</a><br>Oracle钱包的细粒度访问控制使用户可以访问需要密码或证书的网络服务。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-69ACF94E-7FF6-4967-86D9-BE151D4DC51C">配置外部网络服务的访问控制的示例</a><br>您可以为各种情况配置访问控制，例如单个角色和网络连接。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-5819525F-0429-4B31-BBCC-9C750F321124">指定一组网络主机</a><br>您可以使用通配符指定一组网络主机。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-338977CE-F909-4EB3-95DB-E5B907F90BEF">多个访问控制列表分配中主机的优先顺序</a><br>分配给域的访问控制列表的优先级低于分配给子域的访问控制列表。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-7CB67F1C-4A40-4BEB-BCD1-D982C09561CD">具有端口范围的访问控制列表分配中的主机的优先顺序</a><br>访问控制列表中主机的优先顺序由端口范围的使用决定。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-84DC64BF-F256-4F87-ACEC-C69E6B5668FC">检查影响用户访问网络主机的权限分配</a><br>管理员和用户都可以检查网络连接和域权限。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-E1434B54-F853-4526-A4A7-211AE5AAE7E0">配置Java调试线协议操作的网络访问</a><br>在调试Java PL / SQL过程之前，必须授予<code class="codeph">jdwp</code> ACL权限。
                  </li>
                  <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-4FF80F5B-8D48-4A53-944A-7D239EC50323">为用户访问配置的访问控制列表的数据字典视图</a><br>Oracle数据库提供了数据数据字典视图，您可以使用它来查找有关现有访问控制列表的信息。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part_1.html" title="第一部分介绍了如何管理用户身份验证和授权。">管理用户身份验证和授权</a></p>
                  </div>
               </div>
            </div>
            <a id="DBSEG721"></a><div class="props_rev_3"><a id="GUID-9FEADB5F-BDDB-4C94-9C23-F1F0B521F7E9" name="GUID-9FEADB5F-BDDB-4C94-9C23-F1F0B521F7E9"></a><h3 id="DBSEG-GUID-9FEADB5F-BDDB-4C94-9C23-F1F0B521F7E9" class="sect3">关于在PL / SQL包和类型中管理细粒度访问</h3>
               <div>
                  <p>您可以通过一组PL / SQL包和一种类型配置用户对外部网络服务和钱包的访问。</p>
                  <p>这些包是<code class="codeph">UTL_TCP</code> ， <code class="codeph">UTL_SMTP</code> ， <code class="codeph">UTL_MAIL</code> ， <code class="codeph">UTL_HTTP</code>和<code class="codeph">UTL_INADDR</code> ，以及<code class="codeph">DBMS_LDAP</code> PL / SQL包和<code class="codeph">HttpUriType</code>类型。
                  </p>
                  <p>以下方案是可能的：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">为需要从数据库访问外部网络服务的用户和角色配置细粒度访问控制。</span> 这样，特定的用户组可以根据您授予的权限连接到一台或多台主机。通常，您使用此功能来控制对在特定主机地址上运行的应用程序的访问。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">配置对Oracle钱包的细粒度访问控制，以发出需要密码或客户端证书身份验证的HTTP请求。</span> 通过此功能，您可以向使用存储在Oracle钱包中的密码和客户端证书的用户授予权限，以通过<code class="codeph">UTL_HTTP</code>包访问外部受保护的HTTP资源。例如，您可以将应用程序配置为使用存储在钱包中的凭据，而不是对应用程序中的凭据进行硬编码。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG99981"></a><div class="props_rev_3"><a id="GUID-3A9008A8-A38B-4BBA-B520-8724A518EE54" name="GUID-3A9008A8-A38B-4BBA-B520-8724A518EE54"></a><h3 id="DBSEG-GUID-3A9008A8-A38B-4BBA-B520-8724A518EE54" class="sect3">关于对外部网络服务的细粒度访问控制</h3>
               <div>
                  <p>Oracle Application Security访问控制列表（ACL）可以实现对外部网络服务的细粒度访问控制。</p>
                  <p>本指南介绍如何使用<code class="codeph">DBMS_NETWORK_ACL_ADMIN</code> PL / SQL包为数据库用户和角色配置访问控制。
                  </p>
                  <p>此功能增强了网络连接的安全性，因为它限制了数据库用户可以使用PL / SQL网络实用程序包<code class="codeph">UTL_TCP</code> ， <code class="codeph">UTL_SMTP</code> ， <code class="codeph">UTL_MAIL</code> ， <code class="codeph">UTL_HTTP</code>和<code class="codeph">UTL_INADDR</code>连接的外部网络主机。 <code class="codeph">DBMS_LDAP</code>和<code class="codeph">DBMS_DEBUG_JDWP</code> PL / SQL包;和<code class="codeph">HttpUriType</code>类型。否则，获得数据库访问权限的入侵者可能会恶意攻击网络，因为默认情况下，PL / SQL实用程序包是使用授予<code class="codeph">PUBLIC</code>用户的<code class="codeph">EXECUTE</code>特权创建的。这些PL / SQL网络实用程序包以及<code class="codeph">DBMS_NETWORK_ACL_ADMIN</code>和<code class="codeph">DBMS_NETWORK_ACL_UTILITY</code>程序包支持IP版本4（IPv4）和IP版本6（IPv6）地址。本指南介绍了如何管理两个版本的访问控制。有关IPv4和IPv6表示法如何与Oracle数据库配合使用的详细信息，请参阅“ <a href="../netag/understanding-communication-layers.html#NETAG999" target="_blank"><span><cite>Oracle数据库网络服务管理员指南”</cite></span></a> 。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-3A9008A8-A38B-4BBA-B520-8724A518EE54__GUID-C07CE273-573C-4870-9E1F-91CC7991AF1F">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="configuring-audit-policies.html#GUID-AAE7D86F-4C64-402A-9D3E-BE7D13196E22" title="本教程演示了如何创建细粒度的审核策略，以便在用户违反策略时生成电子邮件警报。">教程：向细粒度审核策略添加电子邮件警报，以</a>获取为电子邮件警报配置外部网络服务的访问控制的示例</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG99982"></a><div class="props_rev_3"><a id="GUID-3810CB91-03E4-4978-89A2-AD7F61590293" name="GUID-3810CB91-03E4-4978-89A2-AD7F61590293"></a><h3 id="DBSEG-GUID-3810CB91-03E4-4978-89A2-AD7F61590293" class="sect3">关于对Oracle钱包的访问控制</h3>
               <div>
                  <p>访问受远程Web服务器保护的Web页面时，用户可以使用存储在Oracle钱包中的密码和客户端证书对自身进行身份验证。</p>
                  <p>Oracle钱包提供用户密码和客户端证书的安全存储。</p>
                  <p>要配置钱包的访问控制，您必须具有以下组件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">一个Oracle钱包。</span> 您可以使用Oracle Database <code class="codeph">mkstore</code>实用程序或Oracle Wallet Manager创建钱包。HTTP请求将使用外部密码存储或钱包中的客户端证书来验证用户</p>
                     </li>
                     <li>
                        <p><span class="bold">一个访问控制列表，用于向用户授予使用钱包的权限。</span> 要配置访问控制列表，请使用<code class="codeph">DBMS_NETWORK_ACL_ADMIN</code> PL / SQL包。
                        </p>
                     </li>
                  </ul>
                  <p>使用Oracle钱包是有益的，因为它提供了访问受保护网页所必需的密码和客户端证书的安全存储。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-0BCB5925-A40F-4507-95F9-5DA4A1919EBD" title="Oracle钱包的细粒度访问控制使用户可以访问需要密码或证书的网络服务。">配置对Oracle Wallet的访问控制</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DBSEG99983"></a><div class="props_rev_3"><a id="GUID-74873A0A-FA27-4DC4-8ECC-AC438C64DBE0" name="GUID-74873A0A-FA27-4DC4-8ECC-AC438C64DBE0"></a><h3 id="DBSEG-GUID-74873A0A-FA27-4DC4-8ECC-AC438C64DBE0" class="sect3">升级的应用程序依赖于使用外部网络服务的程序包</h3>
               <div>
                  <p>升级的应用程序可能存在<code class="codeph">ORA-24247</code>网络访问错误。
                  </p>
                  <p>如果您已从Oracle Database <span class="italic">11g</span>第1版（11.1）之前的版本升级，并且您的应用程序依赖于PL / SQL网络实用程序包（ <code class="codeph">UTL_TCP</code> ， <code class="codeph">UTL_SMTP</code> ， <code class="codeph">UTL_MAIL</code> ， <code class="codeph">UTL_HTTP</code> ， <code class="codeph">UTL_INADDR</code>和<code class="codeph">DBMS_LDAP</code> ）或<code class="codeph">HttpUriType</code>类型，则尝试运行该应用程序时可能会出现<code class="codeph">ORA-24247</code>错误。
                  </p>
                  <p>错误消息如下：</p><pre class="oac_no_warn" dir="ltr">ORA-24247：访问控制列表（ACL）拒绝的网络访问</pre><p>使用本章中的过程重新配置应用程序的网络访问。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-74873A0A-FA27-4DC4-8ECC-AC438C64DBE0__GUID-B91A983D-1E63-4F9B-857C-7D0929FFC067">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../upgrd/compatibility-interoperability-between-database-releases.html#UPGRD005" target="_blank"><span><cite>Oracle数据库升级指南</cite></span></a> ，了解依赖于PL / SQL网络实用程序包的应用程序的兼容性问题</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG99984"></a><div class="props_rev_3"><a id="GUID-3D5B66BC-0277-4887-9CD1-97DB44EB5213" name="GUID-3D5B66BC-0277-4887-9CD1-97DB44EB5213"></a><h3 id="DBSEG-GUID-3D5B66BC-0277-4887-9CD1-97DB44EB5213" class="sect3">配置外部网络服务的访问控制</h3>
               <div>
                  <p><code class="codeph">DBMS_NETWORK_ACL</code>程序包配置外部网络服务的访问控制。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-9C14581A-163F-48ED-98CC-790E6B8D20D6">配置外部网络服务访问控制的语法</a><br>您可以使用<code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE</code>过程向用户授予访问控制权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-6E5E9D6E-A2E6-43EA-A1DC-7CF6D6006141">示例：配置外部网络服务的访问控制</a><br><code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE</code>过程可以配置外部网络服务的访问控制。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-09A7734A-4CED-49C2-AD0F-861B9DD155C7">撤消外部网络服务的访问控制权限</a><br>您可以删除外部网络服务的访问控制权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-92848B76-B05D-4373-B64C-4AA430C7A152">示例：撤消外部网络服务权限</a><br><code class="codeph">DBMS_NETWORK_ACL_ADMIN.REMOVE_HOST_ACE</code>过程可用于撤消外部网络权限。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG113"></a><div class="props_rev_3"><a id="GUID-9C14581A-163F-48ED-98CC-790E6B8D20D6" name="GUID-9C14581A-163F-48ED-98CC-790E6B8D20D6"></a><h4 id="DBSEG-GUID-9C14581A-163F-48ED-98CC-790E6B8D20D6" class="sect4">配置外部网络服务访问控制的语法</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE</code>过程向用户授予访问控制权限。
                     </p>
                     <div class="section">
                        <p>此过程将具有指定权限的访问控制条目（ACE）附加到给定主机的ACL，如果ACL尚不存在，则创建ACL。结果配置驻留在<code class="codeph">SYS</code>架构中，而不是创建它的用户的架构。
                        </p>
                        <p>语法如下：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE（host =&gt;' <span class="italic">host_name</span> '，lower_port =&gt; null | <span class="italic">port_number</span> ，upper_port =&gt; null | <span class="italic">port_number</span> ，ace =&gt; <span class="italic">ace_definition</span> ）;结束;</pre><p>在本规范中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">host</code> ：输入<code class="codeph">host</code>的名称。它可以是主机的主机名或IP地址。您可以使用通配符指定域或IP子网。（有关在域名中使用通配符的优先顺序，请参阅<a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-338977CE-F909-4EB3-95DB-E5B907F90BEF" title="The access control list assigned to a domain has a lower precedence than those assigned to the subdomains.">多个访问控制列表分配</a>中的<a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-338977CE-F909-4EB3-95DB-E5B907F90BEF" title="分配给域的访问控制列表的优先级低于分配给子域的访问控制列表。">主机</a>优先顺序。）主机或域名不区分大小写。示例如下：</p><pre class="oac_no_warn" dir="ltr">host =&gt;'www.example.com'，host =&gt;'* example.com'，</pre></li>
                           <li>
                              <p><code class="codeph">lower_port</code> :(可选）对于TCP连接，请输入端口范围的下边界。仅将此设置用于<code class="codeph">connect</code>权限。省略它以获得<code class="codeph">resolve</code>权限。默认值为<code class="codeph">null</code> ，表示没有端口限制（即ACL适用于所有端口）。端口号范围介于1和65535之间。
                              </p>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">lower_port =&gt; 80，</pre></li>
                           <li>
                              <p><code class="codeph">upper_port</code> :(可选）对于TCP连接，请输入端口范围的上边界。仅将此设置用于<code class="codeph">connect</code>权限。省略它以获得<code class="codeph">resolve</code>权限。默认值为<code class="codeph">null</code> ，表示没有端口限制（即ACL适用于所有端口）。端口号范围介于1和65535之间</p>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">upper_port =&gt; 3999）;</pre><p>如果输入<code class="codeph">lower_port</code>的值并将<code class="codeph">upper_port</code>为<code class="codeph">null</code> （或只是省略它），则Oracle数据库假定<code class="codeph">upper_port</code>设置与<code class="codeph">lower_port</code>相同。例如，如果将<code class="codeph">lower_port</code>设置为<code class="codeph">80</code>并省略<code class="codeph">upper_port</code> ，则<code class="codeph">upper_port</code>设置假定为<code class="codeph">80</code> 。
                              </p>
                              <p>在访问控制列表分配中指定端口范围时，访问控制列表中的<code class="codeph">resolve</code>特权无效。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ace</code> ：使用<code class="codeph">XS$ACE_TYPE</code>常量定义ACE，格式如下：</p><pre class="oac_no_warn" dir="ltr">ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（' <span class="italic">privilege</span> '），principal_name =&gt;' <span class="italic">user_or_role</span> '，principal_type =&gt; <span class="italic">xs $ ace_type_user</span> ））;</pre><p>在本规范中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">privilege_list</code> ：输入以下一个或多个特权，这些特权不区分大小写。用单引号括起每个权限，并用逗号分隔每个权限（例如， <code class="codeph">'http', 'http_proxy'</code> ）。
                                    </p>
                                    <p>对于更严格的访问控制，如果用户仅使用<code class="codeph">UTL_HTTP</code> ， <code class="codeph">HttpUriType</code> ， <code class="codeph">UTL_SMTP</code>或<code class="codeph">UTL_MAIL</code>仅授予<code class="codeph">http</code> ， <code class="codeph">http_proxy</code>或<code class="codeph">smtp</code>权限，而不是<code class="codeph">connect</code>权限。
                                    </p>
                                    <p>- <code class="codeph">http</code> ：通过<code class="codeph">UTL_HTTP</code>包和<code class="codeph">HttpUriType</code>类型向主机发出HTTP请求</p>
                                    <p>- <code class="codeph">http_proxy</code> ：通过<code class="codeph">UTL_HTTP</code>包和<code class="codeph">HttpUriType</code>类型通过代理发出HTTP请求。如果用户通过代理发出HTTP请求，则必须将<code class="codeph">http_proxy</code>与<code class="codeph">http</code>特权结合使用。
                                    </p>
                                    <p>- <code class="codeph">smtp</code> ：通过<code class="codeph">UTL_SMTP</code>和<code class="codeph">UTL_MAIL</code>包向主机发送SMTP</p>
                                    <p>- <code class="codeph">resolve</code> ：通过<code class="codeph">UTL_INADDR</code>包解析网络主机名或IP地址</p>
                                    <p>- <code class="codeph">connect</code> ：通过<code class="codeph">UTL_TCP</code> ， <code class="codeph">UTL_SMTP</code> ， <code class="codeph">UTL_MAIL</code> ， <code class="codeph">UTL_HTTP</code>和<code class="codeph">DBMS_LDAP</code>包或<code class="codeph">HttpUriType</code>类型授予用户连接主机网络服务的权限</p>
                                    <p>- <code class="codeph">jdwp</code> ：用于Java或PL / SQL存储过程的Java Debug Wire Protocol调试操作。有关更多信息，请参阅<a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-E1434B54-F853-4526-A4A7-211AE5AAE7E0" title="在调试Java PL / SQL过程之前，必须授予jdwp ACL权限。">为Java调试线协议操作配置网络访问</a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">principal_name</code> ：输入数据库用户名或角色。除非您使用双引号输入（例如， <code class="codeph">'"ACCT_MGR'"</code> ），否则此值是不区分大小写的。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">principal_type</code> ：为数据库用户或角色输入<code class="codeph">XS_ACL.PTYPE_DB</code> 。您必须指定<code class="codeph">PTYPE_DB</code>因为<code class="codeph">principal_type</code>值默认为<code class="codeph">PTYPE_XS</code> ，用于指定Oracle Database Real Application Security应用程序用户。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-9C14581A-163F-48ED-98CC-790E6B8D20D6__GUID-7C1AD0E5-BF45-43D9-8F69-9A22845058B4">
                        <p class="notep1">也可以看看：</p>有关可以包含在<code class="codeph">ace</code>参数设置中的其他<code class="codeph">XS$ACE_TYPE</code>参数的信息，请<code class="codeph">XS$ACE_TYPE</code> <a href="../dbfsg/configuring-application-privileges-and-access-contol-lists.html#DBFSG99821" target="_blank"><span><cite>“Oracle数据库Real Application安全管理员和开发人员指南”</cite></span></a> ： <code class="codeph">granted</code> ， <code class="codeph">inverted</code> ， <code class="codeph">start_date</code>和<code class="codeph">end_date</code></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-3D5B66BC-0277-4887-9CD1-97DB44EB5213" title="DBMS_NETWORK_ACL程序包配置外部网络服务的访问控制。">配置外部网络服务的访问控制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG116"></a><a id="DBSEG114"></a><div class="props_rev_3"><a id="GUID-6E5E9D6E-A2E6-43EA-A1DC-7CF6D6006141" name="GUID-6E5E9D6E-A2E6-43EA-A1DC-7CF6D6006141"></a><h4 id="DBSEG-GUID-6E5E9D6E-A2E6-43EA-A1DC-7CF6D6006141" class="sect4">示例：配置外部网络服务的访问控制</h4>
                  <div>
                     <p><code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE</code>过程可以配置外部网络服务的访问控制。
                     </p>
                     <p><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-6E5E9D6E-A2E6-43EA-A1DC-7CF6D6006141__CACGAGEE">示例8-1</a>显示了如何为为主机<code class="codeph">www.example.com</code>创建的ACL授予<code class="codeph">acct_mgr</code>数据库角色的<code class="codeph">http</code>和<code class="codeph">smtp</code>权限。
                     </p>
                     <div class="example" id="GUID-6E5E9D6E-A2E6-43EA-A1DC-7CF6D6006141__CACGAGEE">
                        <p class="titleinexample">示例8-1向数据库角色授予权限外部网络服务</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE（host =&gt;'www.example.com'，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（'http'，'smtp'），principal_name =&gt;'acct_mgr'，principal_type =&gt; xs_acl .ptype_db））;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-3D5B66BC-0277-4887-9CD1-97DB44EB5213" title="DBMS_NETWORK_ACL程序包配置外部网络服务的访问控制。">配置外部网络服务的访问控制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG986"></a><div class="props_rev_3"><a id="GUID-09A7734A-4CED-49C2-AD0F-861B9DD155C7" name="GUID-09A7734A-4CED-49C2-AD0F-861B9DD155C7"></a><h4 id="DBSEG-GUID-09A7734A-4CED-49C2-AD0F-861B9DD155C7" class="sect4">撤消外部网络服务的访问控制权限</h4>
                  <div>
                     <p>您可以删除外部网络服务的访问控制权限。</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要撤消外部网络服务的访问控制权限，请运行<code class="codeph">DBMS_NETWORK_ACL_ADMIN.REMOVE_HOST_ACE</code>过程。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-09A7734A-4CED-49C2-AD0F-861B9DD155C7__GUID-EEB4DC33-FBD0-453A-B8C4-F2C75676A671">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">DBMS_NETWORK_ACL_ADMIN.REMOVE_HOST_ACE</code>过程的详细信息，请<code class="codeph">DBMS_NETWORK_ACL_ADMIN.REMOVE_HOST_ACE</code> <a href="../arpls/DBMS_NETWORK_ACL_ADMIN.html#ARPLS74583" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-3D5B66BC-0277-4887-9CD1-97DB44EB5213" title="DBMS_NETWORK_ACL程序包配置外部网络服务的访问控制。">配置外部网络服务的访问控制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG987"></a><div class="sect3"><a id="GUID-92848B76-B05D-4373-B64C-4AA430C7A152" name="GUID-92848B76-B05D-4373-B64C-4AA430C7A152"></a><h4 id="DBSEG-GUID-92848B76-B05D-4373-B64C-4AA430C7A152" class="sect4">示例：撤消外部网络服务权限</h4>
                  <div>
                     <p><code class="codeph">DBMS_NETWORK_ACL_ADMIN.REMOVE_HOST_ACE</code>过程可用于撤消外部网络权限。
                     </p>
                     <p><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-92848B76-B05D-4373-B64C-4AA430C7A152__CACFBHCG">例8-2</a>显示了如何撤销外部网络权限。
                     </p>
                     <div class="example" id="GUID-92848B76-B05D-4373-B64C-4AA430C7A152__CACFBHCG">
                        <p class="titleinexample">示例8-2撤消外部网络服务权限</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_NETWORK_ACL_ADMIN.REMOVE_HOST_ACE（host =&gt;'www.example.com'，lower_port =&gt; 80，upper_port =&gt; upper_port =&gt; 3999，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（'http'，'smtp' ），principal_name =&gt;'acct_mgr'，principal_type =&gt; xs_acl.ptype_db），remove_empty_acl =&gt; TRUE）;结束; /</pre><p>在此规范中， <code class="codeph">remove_empty_acl</code>的<code class="codeph">TRUE</code>设置在删除ACE时变为空时删除ACL。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-3D5B66BC-0277-4887-9CD1-97DB44EB5213" title="DBMS_NETWORK_ACL程序包配置外部网络服务的访问控制。">配置外部网络服务的访问控制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG99987"></a><div class="props_rev_3"><a id="GUID-0BCB5925-A40F-4507-95F9-5DA4A1919EBD" name="GUID-0BCB5925-A40F-4507-95F9-5DA4A1919EBD"></a><h3 id="DBSEG-GUID-0BCB5925-A40F-4507-95F9-5DA4A1919EBD" class="sect3">配置对Oracle Wallet的访问控制</h3>
               <div>
                  <p>Oracle钱包的细粒度访问控制使用户可以访问需要密码或证书的网络服务。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-80EF22F7-B61C-4E10-B7FE-0420259052AC">关于配置对Oracle Wallet的访问控制</a><br>您可以配置访问控制以授予对密码和客户端证书的访问权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-A6A44010-C33F-4A3B-AB4C-AB87C7600E98">第1步：创建Oracle Wallet</a><br>Oracle钱包可以使用标准和PKCS11钱包类型，也可以作为自动登录钱包。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-561E9D60-1414-4066-8214-8BBB6091956B">步骤2：为Oracle Wallet配置访问控制权限</a><br>创建钱包后，您就可以配置钱包的访问控制权限了。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-9777C73A-8A58-40A8-8D58-C5E8AB659429">步骤3：使用密码和客户端证书发出HTTP请求</a><br><code class="codeph">UTL_HTTP</code>包可以创建一个HTTP请求对象来保存钱包信息，该信息可以使用客户端证书或密码进行身份验证。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-55FFBF28-397A-4616-8B35-30CCFCFB40A5">撤销Oracle钱包的访问控制权限</a><br>您可以撤消Oracle钱包的访问控制权限。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG118"></a><div class="props_rev_3"><a id="GUID-80EF22F7-B61C-4E10-B7FE-0420259052AC" name="GUID-80EF22F7-B61C-4E10-B7FE-0420259052AC"></a><h4 id="DBSEG-GUID-80EF22F7-B61C-4E10-B7FE-0420259052AC" class="sect4">关于配置对Oracle Wallet的访问控制</h4>
                  <div>
                     <p>您可以配置访问控制以授予对密码和客户端证书的访问权限。</p>
                     <p>这些密码和客户端证书存储在Oracle钱包中。您配置的访问控制使用户能够在使用PL / SQL网络实用程序包时向外部网络服务进行身份验证。</p>
                     <p>这使用户能够访问需要密码或证书标识的网络服务。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-0BCB5925-A40F-4507-95F9-5DA4A1919EBD" title="Oracle钱包的细粒度访问控制使用户可以访问需要密码或证书的网络服务。">配置对Oracle Wallet的访问控制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG99988"></a><div class="props_rev_3"><a id="GUID-A6A44010-C33F-4A3B-AB4C-AB87C7600E98" name="GUID-A6A44010-C33F-4A3B-AB4C-AB87C7600E98"></a><h4 id="DBSEG-GUID-A6A44010-C33F-4A3B-AB4C-AB87C7600E98" class="sect4">第1步：创建Oracle Wallet</h4>
                  <div>
                     <p>Oracle钱包可以使用标准和PKCS11钱包类型，也可以作为自动登录钱包。</p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>要创建钱包，请使用<code class="codeph">mkstore</code>命令行实用程序或Oracle Wallet Manager用户界面。
                              </p>
                              <p>要将密码存储在钱包中，您必须使用<code class="codeph">mkstore</code>实用程序。
                              </p>
                           </li>
                           <li>
                              <p>确保已将钱包导出到文件。</p>
                           </li>
                           <li>
                              <p>记下您创建钱包的目录。完成本节中的过程后，您将需要此目录路径。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-A79B54B4-CC5E-40C0-A719-59F4E2AA282B" title="DBMS_NETWORK_ACL_ADMIN和UTL_HTTP PL / SQL包可以使用非共享钱包中的密码配置ACL访问。">示例：使用非共享电子钱包中的密码配置ACL访问</a></li>
                           <li><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-E30C7C41-9EFB-4806-BAFF-2DDD8B4F21D4" title="DBMS_NETWORK_ACL_ADMIN和UTL_HTTP PL / SQL包可以为共享数据库会话中的钱包配置ACL访问。">示例：在共享数据库会话中为Wallet配置ACL访问</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-0BCB5925-A40F-4507-95F9-5DA4A1919EBD" title="Oracle钱包的细粒度访问控制使用户可以访问需要密码或证书的网络服务。">配置对Oracle Wallet的访问控制</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG99989"></a><div class="props_rev_3"><a id="GUID-561E9D60-1414-4066-8214-8BBB6091956B" name="GUID-561E9D60-1414-4066-8214-8BBB6091956B"></a><h4 id="DBSEG-GUID-561E9D60-1414-4066-8214-8BBB6091956B" class="sect4">步骤2：为Oracle Wallet配置访问控制权限</h4>
                  <div>
                     <p>创建钱包后，您就可以配置钱包的访问控制权限了。</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_WALLET_ACE</code>过程配置钱包访问控制权限。
                              </p>
                           </li>
                        </ul>
                        <p><code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_WALLET_ACE</code>过程的语法如下：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_NETWORK_ACL_ADMIN.APPEND_WALLET_ACE（wallet_path =&gt;' <span class="italic">directory_path_to_wallet</span> '，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（' <span class="italic">privilege</span> '），principal_name =&gt;' <span class="italic">user_or_role</span> '，principal_type =&gt; <span class="italic">xs $ ace_type_user</span> ））;结束;</pre><p>在本规范中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">wallet_path</code> ：输入包含您在<a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-A6A44010-C33F-4A3B-AB4C-AB87C7600E98" title="Oracle钱包可以使用标准和PKCS11钱包类型，也可以作为自动登录钱包。">步骤1：创建Oracle Wallet中创建的钱包</a>的目录的路径。指定钱包路径时，必须使用绝对路径并包含<code class="codeph">file:</code>在此目录路径之前。不要使用环境变量（例如<code class="codeph">$ORACLE_HOME</code> ，也不要在<code class="codeph">file:</code>之后插入空格<code class="codeph">file:</code>并且在路径名之前。例如：</p><pre class="oac_no_warn" dir="ltr">wallet_path =&gt;'file：/ oracle / wallets / hr_wallet'，</pre></li>
                           <li>
                              <p><code class="codeph">ace</code> ：使用<code class="codeph">XS$ACE_TYPE</code>常量定义ACL。例如：</p><pre class="oac_no_warn" dir="ltr">ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（ <span class="italic">privilege</span> ），principal_name =&gt;'hr_clerk'，principal_type =&gt; xs_acl.ptype_db）;</pre><p>在本规范中，当您使用<code class="codeph">xs$ace_type</code>输入wallet特权时， <span class="italic"><code class="codeph">privilege</code></span>必须是以下<code class="codeph">xs$ace_type</code> （请注意在这些特权名称中使用下划线）：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">use_client_certificates</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">use_passwords</code></p>
                                 </li>
                              </ul>
                              <p>有关这些参数的详细信息，请参阅“ <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-9C14581A-163F-48ED-98CC-790E6B8D20D6" title="您可以使用DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE过程向用户授予访问控制权限。">配置外部网络服务的访问控制的语法”中</a>的<code class="codeph">ace</code>参数说明。请注意，对于钱包，您必须指定<code class="codeph">use_client_certificates</code>或<code class="codeph">use_passwords</code>权限。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-561E9D60-1414-4066-8214-8BBB6091956B__GUID-EEA1166B-9F2D-4BDC-BEBD-C03C172DF826">
                        <p class="notep1">也可以看看：</p>
                        <p>有关可以包含在<code class="codeph">ace</code>参数设置中的其他<code class="codeph">XS$ACE_TYPE</code>参数的信息，请<code class="codeph">XS$ACE_TYPE</code> <a href="../dbfsg/configuring-application-privileges-and-access-contol-lists.html#DBFSG99821" target="_blank"><span><cite>“Oracle数据库Real Application安全管理员和开发人员指南”</cite></span></a> ： <code class="codeph">granted</code> ， <code class="codeph">inverted</code> ， <code class="codeph">start_date</code>和<code class="codeph">end_date</code></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-0BCB5925-A40F-4507-95F9-5DA4A1919EBD" title="Oracle钱包的细粒度访问控制使用户可以访问需要密码或证书的网络服务。">配置对Oracle Wallet的访问控制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG99991"></a><div class="props_rev_3"><a id="GUID-9777C73A-8A58-40A8-8D58-C5E8AB659429" name="GUID-9777C73A-8A58-40A8-8D58-C5E8AB659429"></a><h4 id="DBSEG-GUID-9777C73A-8A58-40A8-8D58-C5E8AB659429" class="sect4">步骤3：使用密码和客户端证书发出HTTP请求</h4>
                  <div>
                     <p><code class="codeph">UTL_HTTP</code>包可以创建一个HTTP请求对象来保存钱包信息，该信息可以使用客户端证书或密码进行身份验证。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-00E5A34F-3249-453A-97FB-76A9C015A3EE">使用密码和客户端证书发出HTTPS请求</a><br><code class="codeph">UTL_HTTP</code>包从SQL和PL / SQL生成超文本传输协议（HTTP）标注。</li>
                        <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B57086AA-D8BB-48DB-8445-93470A4A69A4">与其他应用程序共享会话时使用请求上下文来保留钱包</a><br>当其他应用程序共享数据库会话时，您应该使用请求上下文来保存钱包。
                        </li>
                        <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-0B3B1C2F-DC3B-49CB-8DDD-B48C40F68008">仅使用客户端证书进行身份验证</a><br>只要用户在ACL钱包中被授予了相应的权限，只有客户端证书才能对用户进行身份验证。
                        </li>
                        <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-E116CA18-B374-4041-A392-097224E53A4E">使用密码进行身份验证</a><br>如果请求的受保护URL需要用户名和密码身份验证，请从钱包中设置用户名和密码进行身份验证。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-0BCB5925-A40F-4507-95F9-5DA4A1919EBD" title="Oracle钱包的细粒度访问控制使用户可以访问需要密码或证书的网络服务。">配置对Oracle Wallet的访问控制</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG1067"></a><div class="props_rev_3"><a id="GUID-00E5A34F-3249-453A-97FB-76A9C015A3EE" name="GUID-00E5A34F-3249-453A-97FB-76A9C015A3EE"></a><h5 id="DBSEG-GUID-00E5A34F-3249-453A-97FB-76A9C015A3EE" class="sect5">使用密码和客户端证书发出HTTPS请求</h5>
                     <div>
                        <p><code class="codeph">UTL_HTTP</code>包从SQL和PL / SQL生成超文本传输协议（HTTP）标注。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用<code class="codeph">UTL_HTTP</code> PL / SQL包创建一个请求上下文对象，该对象与HTTP请求及其响应私下使用。
                                 </p>
                              </li>
                           </ul>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">DECLARE req_context UTL_HTTP.REQUEST_CONTEXT_KEY; req UTL_HTTP.REQ; BEGIN req_context：= UTL_HTTP.CREATE_REQUEST_CONTEXT（wallet_path =&gt;'file： <span class="italic">path_to_directory_containing_wallet</span> '，wallet_password =&gt;' <span class="italic">wallet_password</span> '| NULL）; req：= UTL_HTTP.BEGIN_REQUEST（url =&gt;' <span class="italic">URL_to_application</span> '，request_context =&gt;' <span class="italic">request_context</span> '| NULL）; ...结束;</pre><p>在本规范中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">req_context</code> ：使用<code class="codeph">UTL_HTTP.CREATE_REQUEST_CONTEXT_KEY</code>数据类型创建请求上下文对象。此对象存储Oracle数据库用于标识请求上下文的随机生成的数字键。<code class="codeph">UTL_HTTP.CREATE_REQUEST_CONTEXT</code>函数自己创建请求上下文。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">req</code> ：使用<code class="codeph">UTL_HTTP.REQ</code>数据类型创建将用于开始HTTP请求的对象。稍后，当您从钱包设置用户名和密码以访问受密码保护的网页时，您将引用此对象。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">wallet_path</code> ：输入包含钱包的目录的路径。确保此路径与您在上一部分的<a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-561E9D60-1414-4066-8214-8BBB6091956B" title="创建钱包后，您就可以配置钱包的访问控制权限了。">步骤2：为Oracle Wallet配置访问控制权限中</a>创建访问控制列表时指定的路径相同。您必须在目录路径之前包含<code class="codeph">file:</code> .不要使用环境变量，例如<code class="codeph">$ORACLE_HOME</code> 。</p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">wallet_path =&gt;'file：/ oracle / wallets / hr_wallet'，</pre></li>
                              <li>
                                 <p><code class="codeph">wallet_password</code> ：输入用于打开钱包的密码。默认值为<code class="codeph">NULL</code> ，用于自动登录钱包。例如：</p><pre class="oac_no_warn" dir="ltr">wallet_password =&gt;' <span class="italic">wallet_password</span> '）;</pre></li>
                              <li>
                                 <p><code class="codeph">url</code> ：输入使用钱包的应用程序的URL。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">url =&gt;'www.hr_access.example.com'，</pre></li>
                              <li>
                                 <p><code class="codeph">request_context</code> ：输入您在本节前面创建的请求上下文对象的名称。此对象可防止钱包与同一数据库会话中的其他应用程序共享。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">request_context =&gt; req_context）;</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-00E5A34F-3249-453A-97FB-76A9C015A3EE__GUID-EEE2A4A3-FCEC-480E-86B9-EF151FA82A4F">
                           <p class="notep1">也可以看看：</p>有关<code class="codeph">UTL_HTTP</code>包的详细信息，请<a href="../arpls/UTL_HTTP.html#ARPLS070" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-9777C73A-8A58-40A8-8D58-C5E8AB659429" title="UTL_HTTP包可以创建一个HTTP请求对象来保存钱包信息，该信息可以使用客户端证书或密码进行身份验证。">步骤3：使用密码和客户端证书发出HTTP请求</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG1068"></a><div class="props_rev_3"><a id="GUID-B57086AA-D8BB-48DB-8445-93470A4A69A4" name="GUID-B57086AA-D8BB-48DB-8445-93470A4A69A4"></a><h5 id="DBSEG-GUID-B57086AA-D8BB-48DB-8445-93470A4A69A4" class="sect5">与其他应用程序共享会话时使用请求上下文来保留钱包</h5>
                     <div>
                        <p>当其他应用程序共享数据库会话时，您应该使用请求上下文来保存钱包。</p>
                        <div class="section">
                           <p>如果您的应用程序独占使用数据库会话，则可以使用<code class="codeph">UTL_HTTP.SET_WALLET</code>过程将钱包保存在数据库会话中。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用<code class="codeph">UTL_HTTP.SET_WALLET</code>过程配置保存钱包的请求。
                                 </p>
                              </li>
                           </ul>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">DECLARE req UTL_HTTP.REQ; BEGIN UTL_HTTP.SET_WALLET（path =&gt;'file： <span class="italic">path_to_directory_containing_wallet</span> '，password =&gt;' <span class="italic">wallet_password</span> '| NULL）; req：= UTL_HTTP.BEGIN_REQUEST（url =&gt;' <span class="italic">URL_to_application</span> '）; ...结束;</pre><p>如果请求的受保护URL需要用户名和密码进行身份验证，则可以使用<code class="codeph">SET_AUTHENTICATION_FROM_WALLET</code>过程从钱包设置用户名和密码进行身份验证。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-9777C73A-8A58-40A8-8D58-C5E8AB659429" title="UTL_HTTP包可以创建一个HTTP请求对象来保存钱包信息，该信息可以使用客户端证书或密码进行身份验证。">步骤3：使用密码和客户端证书发出HTTP请求</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG1069"></a><div class="props_rev_3"><a id="GUID-0B3B1C2F-DC3B-49CB-8DDD-B48C40F68008" name="GUID-0B3B1C2F-DC3B-49CB-8DDD-B48C40F68008"></a><h5 id="DBSEG-GUID-0B3B1C2F-DC3B-49CB-8DDD-B48C40F68008" class="sect5">仅使用客户端证书进行身份验证</h5>
                     <div>
                        <p>只要用户在ACL钱包中被授予了相应的权限，只有客户端证书才能对用户进行身份验证。</p>
                        <p>如果被请求的受保护URL仅需要客户端证书进行身份验证，则<code class="codeph">BEGIN_REQUEST</code>函数会从钱包中发送必要的客户端证书。假设用户已被分配给钱包的ACL中的<code class="codeph">use_client_certificates</code>特权。
                        </p>
                        <p>身份验证应在远程Web服务器上成功，用户可以使用<code class="codeph">GET_RESPONSE</code>函数继续检索HTTP响应。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-9777C73A-8A58-40A8-8D58-C5E8AB659429" title="UTL_HTTP包可以创建一个HTTP请求对象来保存钱包信息，该信息可以使用客户端证书或密码进行身份验证。">步骤3：使用密码和客户端证书发出HTTP请求</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG1070"></a><div class="props_rev_3"><a id="GUID-E116CA18-B374-4041-A392-097224E53A4E" name="GUID-E116CA18-B374-4041-A392-097224E53A4E"></a><h5 id="DBSEG-GUID-E116CA18-B374-4041-A392-097224E53A4E" class="sect5">使用密码进行身份验证</h5>
                     <div>
                        <p>如果请求的受保护URL需要用户名和密码身份验证，请从钱包中设置用户名和密码进行身份验证。</p>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">DECLARE req_context UTL_HTTP.REQUEST_CONTEXT_KEY; req UTL_HTTP.REQ;开始 ...UTL_HTTP.SET_AUTHENTICATION_FROM_WALLET（r =&gt; <span class="italic">HTTP_REQUEST</span> ，alias =&gt;' <span class="italic">alias_to_retrieve_credentials_stored_in_wallet</span> '，scheme =&gt;'AWS | Basic'，for_proxy =&gt; TRUE | FALSE）;结束;</pre><p>在本规范中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">r</code> ：输入您在上一节中创建的<code class="codeph">UTL_HTTP.BEGIN_REQUEST</code>过程中定义的HTTP请求。例如：</p><pre class="oac_no_warn" dir="ltr">r =&gt; req，</pre></li>
                           <li>
                              <p><code class="codeph">alias</code> ：输入用于标识和检索存储在Oracle钱包中的用户名和密码凭据的别名。例如，假设用于标识此用户名和密码凭据的别名是<code class="codeph">hr_access</code> 。
                              </p><pre class="oac_no_warn" dir="ltr">alias =&gt;'hr_access'，</pre></li>
                           <li>
                              <p><code class="codeph">scheme</code> ：输入以下其中一项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">AWS</code> ：指定Amazon Simple Storage Service（S3）方案。仅在配置对Amazon.com网站的访问时才使用此方案。（有关此设置的详细信息，请与Amazon联系。）
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">Basic</code> ：指定HTTP基本身份验证。默认为<code class="codeph">Basic</code> 。
                                    </p>
                                 </li>
                              </ul>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">scheme =&gt;'基本'，</pre></li>
                           <li>
                              <p><code class="codeph">for_proxy</code> ：指定HTTP身份验证信息是否用于访问HTTP代理服务器而不是Web服务器。默认值为<code class="codeph">FALSE</code> 。</p>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">for_proxy =&gt; TRUE）;</pre></li>
                        </ul>
                        <p>在钱包中使用用户名和密码需要在分配给钱包的ACL中将<code class="codeph">use_passwords</code>权限授予用户。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-9777C73A-8A58-40A8-8D58-C5E8AB659429" title="UTL_HTTP包可以创建一个HTTP请求对象来保存钱包信息，该信息可以使用客户端证书或密码进行身份验证。">步骤3：使用密码和客户端证书发出HTTP请求</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG988"></a><div class="props_rev_3"><a id="GUID-55FFBF28-397A-4616-8B35-30CCFCFB40A5" name="GUID-55FFBF28-397A-4616-8B35-30CCFCFB40A5"></a><h4 id="DBSEG-GUID-55FFBF28-397A-4616-8B35-30CCFCFB40A5" class="sect4">撤销Oracle钱包的访问控制权限</h4>
                  <div>
                     <p>您可以撤消Oracle钱包的访问控制权限。</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要从钱包的访问控制列表（ACL）中撤消访问控制条目（ACE）的权限，请运行<code class="codeph">DBMS_NETWORK_ACL_ADMIN.REMOVE_WALLET_ACE</code>过程。
                              </p>
                           </li>
                        </ul>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_NETWORK_ACL_ADMIN.REMOVE_WALLET_ACE（wallet_path =&gt;'file：/ oracle / wallets / hr_wallet'，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（ <span class="italic">privilege</span> ），principal_name =&gt;'hr_clerk'，principal_type =&gt; xs_acl.ptype_db） ，remove_empty_acl =&gt; TRUE）;结束; /</pre><p>在此示例中， <code class="codeph">remove_empty_acl</code>的<code class="codeph">TRUE</code>设置在删除钱包ACE时变为空时删除ACL。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-0BCB5925-A40F-4507-95F9-5DA4A1919EBD" title="Oracle钱包的细粒度访问控制使用户可以访问需要密码或证书的网络服务。">配置对Oracle Wallet的访问控制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG99995"></a><div class="props_rev_3"><a id="GUID-69ACF94E-7FF6-4967-86D9-BE151D4DC51C" name="GUID-69ACF94E-7FF6-4967-86D9-BE151D4DC51C"></a><h3 id="DBSEG-GUID-69ACF94E-7FF6-4967-86D9-BE151D4DC51C" class="sect3">配置外部网络服务的访问控制的示例</h3>
               <div>
                  <p>您可以为各种情况配置访问控制，例如单个角色和网络连接。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-43AFFFF5-AF28-4CB6-9634-4DA6A5FC3E18">示例：为单个角色和网络连接配置访问控制</a><br><code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE</code>过程可以为单个角色和网络连接配置访问控制。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-661EF731-B70B-43B5-917E-BD4434AE6062">示例：为用户和角色配置访问控制</a><br><code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE</code>可以配置访问控制以拒绝或授予用户和角色的权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-D88F0DA8-5228-4A75-84D8-6A3D97685CEC">示例：使用DBA_HOST_ACES视图显示授予的权限</a><br><code class="codeph">DBA_HOST_ACE</code>数据字典视图显示已授予用户的权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-A79B54B4-CC5E-40C0-A719-59F4E2AA282B">示例：使用非共享电子钱包中的密码配置ACL访问</a><br><code class="codeph">DBMS_NETWORK_ACL_ADMIN</code>和<code class="codeph">UTL_HTTP</code> PL / SQL包可以使用非共享钱包中的密码配置ACL访问。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-E30C7C41-9EFB-4806-BAFF-2DDD8B4F21D4">示例：在共享数据库会话中为Wallet配置ACL访问</a><br><code class="codeph">DBMS_NETWORK_ACL_ADMIN</code>和<code class="codeph">UTL_HTTP</code> PL / SQL包可以为共享数据库会话中的钱包配置ACL访问。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG99997"></a><a id="DBSEG99996"></a><div class="props_rev_3"><a id="GUID-43AFFFF5-AF28-4CB6-9634-4DA6A5FC3E18" name="GUID-43AFFFF5-AF28-4CB6-9634-4DA6A5FC3E18"></a><h4 id="DBSEG-GUID-43AFFFF5-AF28-4CB6-9634-4DA6A5FC3E18" class="sect4">示例：为单个角色和网络连接配置访问控制</h4>
                  <div>
                     <p><code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE</code>过程可以为单个角色和网络连接配置访问控制。
                     </p>
                     <p><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-43AFFFF5-AF28-4CB6-9634-4DA6A5FC3E18__CIHIGIBE">示例8-3</a>显示了如何为单个角色（ <code class="codeph">acct_mgr</code> ）配置访问控制，并为此角色授予<code class="codeph">http</code>权限以访问<code class="codeph">www.us.example.com</code>主机。该特权将于2013年1月1日到期。
                     </p>
                     <div class="example" id="GUID-43AFFFF5-AF28-4CB6-9634-4DA6A5FC3E18__CIHIGIBE">
                        <p class="titleinexample">示例8-3为单个角色和网络连接配置访问控制</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE（host =&gt;'www.us.example.com'，lower_port =&gt; 80，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（'http'），principal_name =&gt;'acct_mgr'，principal_type =&gt; xs_acl.ptype_db，end_date =&gt; TIMESTAMP'2013-01-01 00：00：00.00 -08：00'）; END; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-69ACF94E-7FF6-4967-86D9-BE151D4DC51C" title="您可以为各种情况配置访问控制，例如单个角色和网络连接。">配置外部网络服务的访问控制的示例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG99999"></a><a id="DBSEG99998"></a><div class="props_rev_3"><a id="GUID-661EF731-B70B-43B5-917E-BD4434AE6062" name="GUID-661EF731-B70B-43B5-917E-BD4434AE6062"></a><h4 id="DBSEG-GUID-661EF731-B70B-43B5-917E-BD4434AE6062" class="sect4">示例：为用户和角色配置访问控制</h4>
                  <div>
                     <p><code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE</code>可以配置访问控制以拒绝或授予用户和角色的权限。
                     </p>
                     <p>然后，您可以查询<code class="codeph">DBA_HOST_ACES</code>数据字典视图以查找有关权限授予的信息。
                     </p>
                     <p><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-661EF731-B70B-43B5-917E-BD4434AE6062__CIHFGHGJ">示例8-4</a>授予数据库角色（ <code class="codeph">acct_mgr</code> ）但拒绝特定用户（ <code class="codeph">psmith</code> ），即使他具有该角色。订单很重要，因为ACE按给定顺序进行评估。在这种情况下，必须首先附加拒绝ACE（ <code class="codeph">granted =&gt; false</code> ），否则不能拒绝用户。
                     </p>
                     <div class="example" id="GUID-661EF731-B70B-43B5-917E-BD4434AE6062__CIHFGHGJ">
                        <p class="titleinexample">示例8-4使用授予和拒绝用户和角色配置访问控制</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE（host =&gt;'www.us.example.com'，lower_port =&gt; 80，upper_port =&gt; 80，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（'http'），principal_name =&gt; 'psmith'，principal_type =&gt; xs_acl.ptype_db，grant =&gt; false））; DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE（host =&gt;'www.us.example.com'，lower_port =&gt; 80，upper_port =&gt; 80，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（'http'），principal_name =&gt;' acct_mgr'，principal_type =&gt; xs_acl.ptype_db，granted =&gt; true））;结束;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-69ACF94E-7FF6-4967-86D9-BE151D4DC51C" title="您可以为各种情况配置访问控制，例如单个角色和网络连接。">配置外部网络服务的访问控制的示例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG100"></a><div class="props_rev_3"><a id="GUID-D88F0DA8-5228-4A75-84D8-6A3D97685CEC" name="GUID-D88F0DA8-5228-4A75-84D8-6A3D97685CEC"></a><h4 id="DBSEG-GUID-D88F0DA8-5228-4A75-84D8-6A3D97685CEC" class="sect4">示例：使用DBA_HOST_ACES视图显示授予的权限</h4>
                  <div>
                     <p><code class="codeph">DBA_HOST_ACE</code>数据字典视图显示已授予用户的权限。
                     </p>
                     <p><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-D88F0DA8-5228-4A75-84D8-6A3D97685CEC__BABDEDIF">例8-5</a>显示了<code class="codeph">DBA_HOST_ACES</code>数据字典视图如何显示在先前访问控制列表中授予的权限。
                     </p>
                     <div class="example" id="GUID-D88F0DA8-5228-4A75-84D8-6A3D97685CEC__BABDEDIF">
                        <p class="titleinexample">示例8-5使用DBA_HOST_ACES视图显示授予的权限</p><pre class="oac_no_warn" dir="ltr">SELECT PRINCIPAL，PRIVILEGE，GRANT_TYPE来自DBA_HOST_ACE WHERE PRIVILEGE ='HTTP'; PRINCIPAL PRIVILEGE GRANT_TYPE ------------ ---------- -------------------- PSMITH HTTP FALSE ACCT_MGR HTTP真正</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-69ACF94E-7FF6-4967-86D9-BE151D4DC51C" title="您可以为各种情况配置访问控制，例如单个角色和网络连接。">配置外部网络服务的访问控制的示例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG103"></a><a id="DBSEG102"></a><div class="props_rev_3"><a id="GUID-A79B54B4-CC5E-40C0-A719-59F4E2AA282B" name="GUID-A79B54B4-CC5E-40C0-A719-59F4E2AA282B"></a><h4 id="DBSEG-GUID-A79B54B4-CC5E-40C0-A719-59F4E2AA282B" class="sect4">示例：使用非共享电子钱包中的密码配置ACL访问</h4>
                  <div>
                     <p><code class="codeph">DBMS_NETWORK_ACL_ADMIN</code>和<code class="codeph">UTL_HTTP</code> PL / SQL包可以使用非共享钱包中的密码配置ACL访问。
                     </p>
                     <p><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-A79B54B4-CC5E-40C0-A719-59F4E2AA282B__BABHFGGA">例8-6</a>为两个人力资源部门角色<code class="codeph">hr_clerk</code>和<code class="codeph">hr_manager</code>配置钱包访问。这些角色使用<code class="codeph">use_passwords</code>权限来访问存储在钱包中的密码。在此示例中，钱包不会与同一数据库会话中的其他应用程序共享。
                     </p>
                     <div class="example" id="GUID-A79B54B4-CC5E-40C0-A719-59F4E2AA282B__BABHFGGA">
                        <p class="titleinexample">示例8-6使用非共享电子钱包中的密码配置ACL访问</p><pre class="oac_no_warn" dir="ltr"><span class="bold">/ * 1。在命令提示符下，创建钱包。以下示例使用</span> <span class="bold">用户名hr_access作为别名来标识</span> <span class="bold">存储在钱包中 <span class="bold">的用户名和密码</span> <span class="bold">。<span class="bold">稍后在 调用</span> <span class="bold">SET_AUTHENTICATION_FROM_WALLET过程 时，必须使用此别名</span> <span class="bold">。* /</span> $ mkstore -wrl $ ORACLE_HOME / wallets / hr_wallet -create输入密码： <span class="italic">password</span>再次输入密码： <span class="italic">password</span> $ mkstore -wrl $ ORACLE_HOME / wallets / hr_wallet -createCredential hr_access hr_usr命令行中缺少您的密码/密码输入您的密码/密码： <span class="italic">密码</span>重新输入您的密码/密码： <span class="italic">密码</span>输入密码密码： <span class="italic">密码</span> <span class="bold">/ * 2。在SQL * Plus中，创建一个访问控制列表以授予</span> <span class="bold">钱包的 权限</span> <span class="bold">。以下示例将use_passwords权限授予</span> <span class="bold">hr_clerk角色。* /</span> BEGIN DBMS_NETWORK_ACL_ADMIN.APPEND_WALLET_ACE（wallet_path =&gt;'file：/ oracle / wallets / hr_wallet'，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（'use_passwords'），principal_name =&gt;'hr_clerk'，principal_type =&gt; xs_acl.ptype_db））;结束; / <span class="bold">/ * 3。创建请求上下文和请求对象，然后设置</span> <span class="bold">钱包 的身份验证</span> <span class="bold">。* /</span> DECLARE req_context UTL_HTTP.REQUEST_CONTEXT_KEY; req UTL_HTTP.REQ; BEGIN req_context：= UTL_HTTP.CREATE_REQUEST_CONTEXT（wallet_path =&gt;'file：/ oracle / wallets / hr_wallet'，wallet_password =&gt; NULL，enable_cookies =&gt; TRUE，max_cookies =&gt; 300，max_cookies_per_site =&gt; 20）; req：= UTL_HTTP.BEGIN_REQUEST（url =&gt;'www.hr_access.example.com'，request_context =&gt; req_context）; UTL_HTTP.SET_AUTHENTICATION_FROM_WALLET（r =&gt; req，alias =&gt;'hr_access'），scheme =&gt;'Basic'，for_proxy =&gt; FALSE）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-69ACF94E-7FF6-4967-86D9-BE151D4DC51C" title="您可以为各种情况配置访问控制，例如单个角色和网络连接。">配置外部网络服务的访问控制的示例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG105"></a><a id="DBSEG104"></a><div class="props_rev_3"><a id="GUID-E30C7C41-9EFB-4806-BAFF-2DDD8B4F21D4" name="GUID-E30C7C41-9EFB-4806-BAFF-2DDD8B4F21D4"></a><h4 id="DBSEG-GUID-E30C7C41-9EFB-4806-BAFF-2DDD8B4F21D4" class="sect4">示例：在共享数据库会话中为Wallet配置ACL访问</h4>
                  <div>
                     <p><code class="codeph">DBMS_NETWORK_ACL_ADMIN</code>和<code class="codeph">UTL_HTTP</code> PL / SQL包可以为共享数据库会话中的钱包配置ACL访问。
                     </p>
                     <p><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-E30C7C41-9EFB-4806-BAFF-2DDD8B4F21D4__BABIDGBG">例8-7</a>配置用于共享数据库会话的钱包;也就是说，当前数据库会话中的所有应用程序都可以访问此钱包。
                     </p>
                     <div class="example" id="GUID-E30C7C41-9EFB-4806-BAFF-2DDD8B4F21D4__BABIDGBG">
                        <p class="titleinexample">示例8-7在共享数据库会话中为Wallet配置ACL访问</p><pre class="oac_no_warn" dir="ltr"><span class="bold">/ *请按照以下步骤操作：</span> <span class="bold">1。使用Oracle Wallet Manager创建钱包并添加客户端</span> <span class="bold">证书。</span> 

<span class="bold">2。在SQL * Plus中，配置访问控制以授予钱包的权限。</span>
<span class="bold">以下示例将use_client_certificates特权授予</span> <span class="bold">hr_clerk和hr_mgr角色。* /</span> BEGIN DBMS_NETWORK_ACL_ADMIN.APPEND_WALLET_ACE（wallet_path =&gt;'file：/ oracle / wallets / hr_wallet'，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（'use-client_certificates'），principal_name =&gt;'hr_clerk'，principal_type =&gt; xs_acl.ptype_db））; DBMS_NETWORK_ACL_ADMIN.APPEND_WALLET_ACE（wallet_path =&gt;'file：/ oracle / wallets / hr_wallet'，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（'use_client_certificates'），principal_name =&gt;'hr_mgr'，principal_type =&gt; xs_acl.ptype_db ））;结束; / COMMIT; <span class="bold">/ * 3。创建请求对象以处理钱包的HTTP身份验证。* /</span> DECLARE req UTL_HTTP.req; BEGIN UTL_HTTP.SET_WALLET（path =&gt;'file：/ oracle / wallets / hr_wallet'，password =&gt; NULL）; req：= UTL_HTTP.BEGIN_REQUEST（url =&gt;'www.hr_access.example.com'，method =&gt;'POST'，http_version =&gt; NULL，request_context =&gt; NULL）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-69ACF94E-7FF6-4967-86D9-BE151D4DC51C" title="您可以为各种情况配置访问控制，例如单个角色和网络连接。">配置外部网络服务的访问控制的示例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG106"></a><div class="props_rev_3"><a id="GUID-5819525F-0429-4B31-BBCC-9C750F321124" name="GUID-5819525F-0429-4B31-BBCC-9C750F321124"></a><h3 id="DBSEG-GUID-5819525F-0429-4B31-BBCC-9C750F321124" class="sect3">指定一组网络主机</h3>
               <div>
                  <p>您可以使用通配符指定一组网络主机。</p>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>要将访问控制列表分配给一组网络主机，请使用星号（*）通配符。</p>
                        </li>
                     </ul>
                     <p>例如，为属于域的主机输入<code class="codeph">*.example.com</code>对于属于IP子网的IPv4地址<code class="codeph">192.0.2.*</code> 。星号通配符必须位于开头，域中的句点（。）之前，或者在IP子网中的句点（。）之后的末尾。例如， <code class="codeph">*.example.com</code>有效，但<code class="codeph">*example.com</code>和<code class="codeph">*.example.*</code>不是。请注意，使用通配符会影响分配给同一主机的多个访问控制列表的优先顺序。您不能将通配符用于IPv6地址。
                     </p>
                     <p>无类别域间路由（ <a href="glossary.html#GUID-94A8FED6-92B4-456E-9984-EC9F9C9850B9"><span class="xrefglossterm">CIDR</span></a> ）表示法定义了如何对IPv4和IPv6地址进行分类，以便在Internet上路由IP数据包。<code class="codeph">DBMS_NETWORK_ACL_ADMIN</code>程序包支持IPv4和IPv6地址的CIDR表示法。此程序包考虑IPv4映射的IPv6地址或子网等效于其表示的IPv4本机地址或子网。例如， <code class="codeph">::ffff:192.0.2.1</code>相当于<code class="codeph">192.0.2.1</code> ， <code class="codeph">::ffff:192.0.2.1/120</code>相当于<code class="codeph">192.0.2.*</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG107"></a><div class="props_rev_3"><a id="GUID-338977CE-F909-4EB3-95DB-E5B907F90BEF" name="GUID-338977CE-F909-4EB3-95DB-E5B907F90BEF"></a><h3 id="DBSEG-GUID-338977CE-F909-4EB3-95DB-E5B907F90BEF" class="sect3">多个访问控制列表分配中主机的优先顺序</h3>
               <div>
                  <p>分配给域的访问控制列表的优先级低于分配给子域的访问控制列表。</p>
                  <p>对于分配给主机及其域的多个访问控制列表，分配给主机的访问控制列表优先于分配给域的访问控制列表。</p>
                  <p>分配给域的访问控制列表的优先级低于分配给子域的访问控制列表。例如，Oracle数据库首先选择分配给主机<code class="codeph">server.us.example.com</code>的访问控制列表，然后再分配给分配给其域的其他访问控制列表。如果为子域分配了其他访问控制列表，则其优先顺序如下：</p>
                  <ol>
                     <li>
                        <p><code class="codeph">server.us.example.com</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">* .us.example.com</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">* .example.com的</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">* .COM</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">*</code></p>
                     </li>
                  </ol>
                  <p>同样，对于分配给IP地址（IPv4和IPv6）及其所属子网的多个访问控制列表，分配给IP地址的访问控制列表优先于分配给子网的访问控制列表。分配给子网的访问控制列表的优先级低于分配给它包含的较小子网的访问控制列表。</p>
                  <p>例如，Oracle数据库首先选择分配给IP地址<code class="codeph">192.0.2.3</code>的访问控制列表，然后再分配给它所属的子网的其他访问控制列表。如果为子网分配了其他访问控制列表，则它们的优先顺序如下：</p>
                  <ol>
                     <li>
                        <p><code class="codeph">192.0.2.3</code> （或<code class="codeph">::ffff:192.0.2.3</code> ）</p>
                     </li>
                     <li>
                        <p><code class="codeph">192.0.2.3/31</code> （或<code class="codeph">::ffff:192.0.2.3/127</code> ）</p>
                     </li>
                     <li>
                        <p><code class="codeph">192.0.2.3/30</code> （或<code class="codeph">::ffff:192.0.2.3/126</code> ）</p>
                     </li>
                     <li>
                        <p><code class="codeph">192.0.2.3/29</code> （或<code class="codeph">::ffff:192.0.2.3/125</code> ）</p>
                     </li>
                     <li>
                        <p>...</p>
                     </li>
                     <li>
                        <p><code class="codeph">192.0.2.3/24</code> （或<code class="codeph">::ffff:192.0.2.3/120</code>或<code class="codeph">192.0.2.*</code> ）</p>
                     </li>
                     <li>
                        <p><code class="codeph">...</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">192.0.2.3/16</code> （或<code class="codeph">::ffff:192.0.2.3/112</code>或<code class="codeph">192.0.*</code> ）</p>
                     </li>
                     <li>
                        <p>...</p>
                     </li>
                     <li>
                        <p><code class="codeph">192.0.2.3/8</code> （或<code class="codeph">::ffff:192.0.2.3/104</code>或<code class="codeph">192.*</code> ）</p>
                     </li>
                     <li>
                        <p>...</p>
                     </li>
                     <li>
                        <p><code class="codeph">:: FFFF：192.0.2.3/95</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">:: FFFF：192.0.2.3/94</code></p>
                     </li>
                     <li>
                        <p>...</p>
                     </li>
                     <li>
                        <p><code class="codeph">*</code></p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG108"></a><div class="props_rev_3"><a id="GUID-7CB67F1C-4A40-4BEB-BCD1-D982C09561CD" name="GUID-7CB67F1C-4A40-4BEB-BCD1-D982C09561CD"></a><h3 id="DBSEG-GUID-7CB67F1C-4A40-4BEB-BCD1-D982C09561CD" class="sect3">具有端口范围的访问控制列表分配中的主机的优先顺序</h3>
               <div>
                  <p>访问控制列表中主机的优先顺序由端口范围的使用决定。</p>
                  <p>将访问控制列表分配给具有端口范围的主机，域或IP子网时，它优先于分配给没有端口范围的同一主机，域或IP子网的访问控制列表。</p>
                  <p>例如，假设您在<code class="codeph">server.us.example.com</code>有到端口80和99之间的任何端口的TCP连接。Oracle数据库首先在<code class="codeph">server.us.example.com</code>选择分配给端口80到99的访问控制列表，然后选择分配给没有端口范围的<code class="codeph">server.us.example.com</code>的其他访问控制列表。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG109"></a><div class="props_rev_3"><a id="GUID-84DC64BF-F256-4F87-ACEC-C69E6B5668FC" name="GUID-84DC64BF-F256-4F87-ACEC-C69E6B5668FC"></a><h3 id="DBSEG-GUID-84DC64BF-F256-4F87-ACEC-C69E6B5668FC" class="sect3">检查影响用户访问网络主机的权限分配</h3>
               <div>
                  <p>管理员和用户都可以检查网络连接和域权限。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-D9959260-46EB-4679-A6B9-E05DC802A29B">关于影响用户对网络主机的访问权限的权限分配</a><br>Oracle提供特定于DBA的数据字典视图，以查找有关权限分配的信息。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B425C8F8-82AE-4D42-9B12-57E1645C5086">如何检查用户网络连接和域权限</a><br>数据库管理员可以查询<code class="codeph">DBA_HOST_ACES</code>数据字典视图，以查找为特定用户或角色授予的权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-BC097ED0-800F-4EFC-8008-7C6C4C34BFDA">示例：管理员检查用户网络访问控制权限</a><br><code class="codeph">DBA_HOST_ACES</code>数据字典视图可以检查用户的网络访问控制权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-D1315369-E406-406A-A902-24A8E621712B">用户如何检查其网络连接和域权限</a><br>用户可以查询<code class="codeph">USER_HOST_ACES</code>数据字典视图以检查其网络和域权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-F6240C1F-8DF6-4E0B-A34B-3983E88E1E84">示例：用户检查网络访问控制权限</a><br><span class="apiname" translate="no">USER_HOST_ACES</span>数据字典视图显示主机的网络访问控制权限。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG119"></a><div class="props_rev_3"><a id="GUID-D9959260-46EB-4679-A6B9-E05DC802A29B" name="GUID-D9959260-46EB-4679-A6B9-E05DC802A29B"></a><h4 id="DBSEG-GUID-D9959260-46EB-4679-A6B9-E05DC802A29B" class="sect4">关于影响用户对网络主机的访问权限的权限分配</h4>
                  <div>
                     <p>Oracle提供特定于DBA的数据字典视图，以查找有关权限分配的信息。</p>
                     <p>数据库管理员可以使用<code class="codeph">DBA_HOST_ACES</code>数据字典视图来查询已授予或拒绝访问控制列表中的数据库用户和角色的网络权限，以及这些权限是否仅在特定时间生效</p>
                     <p>使用视图提供的信息，您可能需要组合数据以确定用户是否被授予当前时间的权限，用户拥有的角色，访问控制条目的顺序等。</p>
                     <p>没有数据库管理员权限的用户没有访问访问控制列表或调用这些<code class="codeph">DBMS_NETWORK_ACL_ADMIN</code>函数的权限。但是，他们可以查询<code class="codeph">USER_HOST_ACES</code>数据字典视图以检查其权限。
                     </p>
                     <p>数据库管理员和用户可以使用以下<code class="codeph">DBMS_NETWORK_ACL_UTILITY</code>函数来确定两个主机，域或子网是否等效，或者主机，域或子网是否等于或包含在另一个主机，域或子网中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">EQUALS_HOST</code> ：返回一个值，指示两个主机，域或子网是否相同</p>
                        </li>
                        <li>
                           <p><code class="codeph">CONTAINS_HOST</code> ：返回一个值，指示主机，域或子网是否等于或包含在另一个主机，域或子网中，以及其ACL分配的包含域或子网的相对优先顺序</p>
                        </li>
                     </ul>
                     <p>如果不使用IPv6地址，则数据库管理员和用户可以使用以下<code class="codeph">DBMS_NETWORK_ACL_UTILITY</code>函数生成主机所属的域或IPv4子网列表，并根据其主机分配按其优先顺序对访问控制列表进行排序：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">DOMAINS</code> ：返回域或IP子网的列表，其访问控制列表可能会影响对指定网络主机，子域或IP子网的权限</p>
                        </li>
                        <li>
                           <p><code class="codeph">DOMAIN_LEVEL</code> ：返回给定主机的域级别</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-84DC64BF-F256-4F87-ACEC-C69E6B5668FC" title="管理员和用户都可以检查网络连接和域权限。">检查影响用户对网络主机的访问权限的权限分配</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG110"></a><div class="props_rev_3"><a id="GUID-B425C8F8-82AE-4D42-9B12-57E1645C5086" name="GUID-B425C8F8-82AE-4D42-9B12-57E1645C5086"></a><h4 id="DBSEG-GUID-B425C8F8-82AE-4D42-9B12-57E1645C5086" class="sect4">如何检查用户网络连接和域权限</h4>
                  <div>
                     <p>数据库管理员可以查询<code class="codeph">DBA_HOST_ACES</code>数据字典视图，以查找为特定用户或角色授予的权限。
                     </p>
                     <p><code class="codeph">DBA_HOST_ACES</code>视图显示了确定对网络连接或域的访问权限的访问控制列表，然后确定每个访问控制列表是否授予（ <code class="codeph">GRANTED</code> ），拒绝（ <code class="codeph">DENIED</code> ）或不应用（ <code class="codeph">NULL</code> ）到访问权限的访问权限。用户。只有数据库管理员才能查询此视图。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-84DC64BF-F256-4F87-ACEC-C69E6B5668FC" title="管理员和用户都可以检查网络连接和域权限。">检查影响用户对网络主机的访问权限的权限分配</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG112"></a><div class="props_rev_3"><a id="GUID-BC097ED0-800F-4EFC-8008-7C6C4C34BFDA" name="GUID-BC097ED0-800F-4EFC-8008-7C6C4C34BFDA"></a><h4 id="DBSEG-GUID-BC097ED0-800F-4EFC-8008-7C6C4C34BFDA" class="sect4">示例：管理员检查用户网络访问控制权限</h4>
                  <div>
                     <p><code class="codeph">DBA_HOST_ACES</code>数据字典视图可以检查用户的网络访问控制权限。
                     </p>
                     <p><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-BC097ED0-800F-4EFC-8008-7C6C4C34BFDA__BABDCBDD">例8-8</a>显示了数据库管理员如何检查用户<code class="codeph">preston</code>连接到<code class="codeph">www.us.example.com</code> 。
                     </p>
                     <p>在此示例中，用户<code class="codeph">preston</code>被授予了为<code class="codeph">www.us.example.com</code>找到的所有网络主机连接的<code class="codeph">www.us.example.com</code> 。但是，假设<code class="codeph">preston</code>已被授予访问端口80上的主机连接的权限，但随后拒绝访问端口3000-3999上的主机连接。在这种情况下，您必须在端口80上配置主机连接的访问控制，并在端口3000-3999上为主机连接配置单独的访问控制配置。
                     </p>
                     <div class="example" id="GUID-BC097ED0-800F-4EFC-8008-7C6C4C34BFDA__BABDCBDD">
                        <p class="titleinexample">示例8-8管理员检查用户网络访问控制权限</p><pre class="oac_no_warn" dir="ltr">SELECT HOST，LOWER_PORT，UPPER_PORT，ACE_ORDER，PRINCIPAL，PRINCIPAL_TYPE，GRANT_TYPE，INVERTED_PRINCIPAL，PRIVILEGE，START_DATE，END_DATE FROM（SELECT ACES。*，DBMS_NETWORK_ACL_UTILITY.CONTAINS_HOST（'www.us.example.com'，HOST）来自DBA_HOST_ACES ACES的优先顺序）基于优先级DESC，LOWER_PORT NULLS最后，最后一个NULLS，ACE_ORDER; HOST LOWER_PORT UPPER_PORT ACE_ORDER PRINCIPAL_TYPE GRANT_TYPE INVERTED_PRINCIPAL PRIVILEGE START_DATE END_DATE ------------------ ---------- ----------- -------- --------- ---------------- ---------- ------- ----------- --------- ---------- -------- www.us.example.com 80 80 1 PRESTON DATABASE用户授权无HTTP www.us.example.com 80 80 2 SEBASTIAN数据库用户授权无HTTP * .us.example.com 1 ACCT_MGR数据库用户授权无连接* 1 HR_DBA数据库用户授权无连接* 1 HR_DBA数据库用户授权无分辨率</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-84DC64BF-F256-4F87-ACEC-C69E6B5668FC" title="管理员和用户都可以检查网络连接和域权限。">检查影响用户对网络主机的访问权限的权限分配</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG115"></a><div class="props_rev_3"><a id="GUID-D1315369-E406-406A-A902-24A8E621712B" name="GUID-D1315369-E406-406A-A902-24A8E621712B"></a><h4 id="DBSEG-GUID-D1315369-E406-406A-A902-24A8E621712B" class="sect4">用户如何检查其网络连接和域权限</h4>
                  <div>
                     <p>用户可以查询<code class="codeph">USER_HOST_ACES</code>数据字典视图以检查其网络和域权限。
                     </p>
                     <p><code class="codeph">USER_HOST_ACES</code>视图是<code class="codeph">PUBLIC</code> ，因此所有用户都可以查询它。
                     </p>
                     <p>该视图隐藏了用户的访问控制列表。它评估用户的权限状态（ <code class="codeph">GRANTED</code>或<code class="codeph">DENIED</code> ）并过滤掉<code class="codeph">NULL</code>情况，因为用户不需要知道访问控制列表何时不适用于他或她。换句话说，Oracle数据库仅显示明确授予或拒绝访问他或她的网络主机上的用户。因此，输出不会显示出现在特定于数据库管理员的<code class="codeph">DBA_HOST_ACES</code>视图的输出中的<code class="codeph">*.example.com</code>和<code class="codeph">*</code> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-84DC64BF-F256-4F87-ACEC-C69E6B5668FC" title="管理员和用户都可以检查网络连接和域权限。">检查影响用户对网络主机的访问权限的权限分配</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG117"></a><div class="props_rev_3"><a id="GUID-F6240C1F-8DF6-4E0B-A34B-3983E88E1E84" name="GUID-F6240C1F-8DF6-4E0B-A34B-3983E88E1E84"></a><h4 id="DBSEG-GUID-F6240C1F-8DF6-4E0B-A34B-3983E88E1E84" class="sect4">示例：用户检查网络访问控制权限</h4>
                  <div>
                     <p><span class="apiname" translate="no">USER_HOST_ACES</span>数据字典视图显示主机的网络访问控制权限。
                     </p>
                     <p><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-F6240C1F-8DF6-4E0B-A34B-3983E88E1E84__BABBEECF">例8-9</a>显示了用户<code class="codeph">preston</code>如何检查她的权限以连接到<code class="codeph">www.us.example.com</code> 。
                     </p>
                     <div class="example" id="GUID-F6240C1F-8DF6-4E0B-A34B-3983E88E1E84__BABBEECF">
                        <p class="titleinexample">示例8-9用户检查网络访问控制权限</p><pre class="oac_no_warn" dir="ltr">SELECT HOST，LOWER_PORT，UPPER_PORT，PRIVILEGE，STATUS FROM（SELECT ACES。*，DBMS_NETWORK_ACL_UTILITY.CONTAINS_HOST（'www.us.example.com'，HOST）来自USER_HOST_ACES ACES的优先顺序）PRECEDENCE不是按照优先级DESC，LOWER_PORT NULLS排序最后，UPPER_PORT NULLS最后; HOST LOWER_PORT UPPER_PORT PRIVILEGE STATUS ------------------ ---------- ---------- ------- -  ------- www.us.example.com 80 80 HTTP GRANTED</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-84DC64BF-F256-4F87-ACEC-C69E6B5668FC" title="管理员和用户都可以检查网络连接和域权限。">检查影响用户对网络主机的访问权限的权限分配</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG971"></a><div class="props_rev_3"><a id="GUID-E1434B54-F853-4526-A4A7-211AE5AAE7E0" name="GUID-E1434B54-F853-4526-A4A7-211AE5AAE7E0"></a><h3 id="DBSEG-GUID-E1434B54-F853-4526-A4A7-211AE5AAE7E0" class="sect3">配置Java调试线协议操作的网络访问</h3>
               <div>
                  <p>在调试Java PL / SQL过程之前，必须授予<code class="codeph">jdwp</code> ACL权限。
                  </p>
                  <div class="section">
                     <p>如果要通过基于Java调试线协议（JDWP）的调试器（例如SQL Developer，JDeveloper或Oracle Developer Tools For Visual Studio（ODT））调试数据库中的Java PL / SQL过程，则必须授予您<code class="codeph">jdwp</code>将数据库会话连接到特定主机上的调试器的ACL权限。
                     </p>
                     <p>结合<code class="codeph">DEBUG CONNECT SESSION</code>系统特权需要<code class="codeph">jdwp</code>特权。
                     </p>
                     <p>如果尚未授予<code class="codeph">jdwp</code> ACL权限，则当您尝试从远程主机调试Java和PL / SQL存储过程时，可能会出现以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-24247：访问控制列表（ACL）拒绝的网络访问ORA-06512：在“SYS.DBMS_DEBUG_JDWP”处，行<span class="italic">line_number</span>
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>要为JDWP操作配置网络访问，请使用<code class="codeph">DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE</code>过程。
                           </p>
                        </li>
                     </ul>
                     <p>以下示例说明了如何为JDWP操作配置网络访问。</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE（host =&gt;' <span class="italic">host</span> '，lower_port =&gt; null | <span class="italic">port_number</span> ，upper_port =&gt; null | <span class="italic">port_number</span> ，ace =&gt; xs $ ace_type（privilege_list =&gt; xs $ name_list（'jdwp'），principal_name =&gt;' <span class="italic">username</span> '，principal_type =&gt; xs_acl.ptype_db））;结束; /</pre><p>在本规范中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">host</code></span>可以是主机名，域名，IP地址或子网。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">port_number</code></span>使您可以指定一系列端口。如果要使用任何端口，则省略<code class="codeph">lower_port</code>和<code class="codeph">upper_port</code>值。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">username</code></span>是不区分大小写的，除非它被引用（例如， <code class="codeph">principal_name =&gt; '"PSMITH"'</code> ）。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-E1434B54-F853-4526-A4A7-211AE5AAE7E0__GUID-9E03C67B-6F16-49E2-AC1F-27314354A071">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关使用JDWP调试服务器应用程序的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/dbseg&amp;id=JJDEV13466" target="_blank"><span><cite>Oracle数据库Java开发人员指南</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关SQL Developer中远程调试的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/dbseg&amp;id=RPTUG41351" target="_blank"><span><cite>“Oracle SQL Developer用户指南”</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG122"></a><a id="DBSEG121"></a><div class="props_rev_3"><a id="GUID-4FF80F5B-8D48-4A53-944A-7D239EC50323" name="GUID-4FF80F5B-8D48-4A53-944A-7D239EC50323"></a><h3 id="DBSEG-GUID-4FF80F5B-8D48-4A53-944A-7D239EC50323" class="sect3">为用户访问配置的访问控制列表的数据字典视图</h3>
               <div>
                  <p>Oracle数据库提供了数据数据字典视图，您可以使用它来查找有关现有访问控制列表的信息。</p>
                  <div class="section">
                     <p><a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-4FF80F5B-8D48-4A53-944A-7D239EC50323__CIHHCGHF" title="ACL视图">表8-1</a>列出了这些视图。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-4FF80F5B-8D48-4A53-944A-7D239EC50323__CIHHCGHF">
                     <p class="titleintable">表8-1显示有关访问控制列表信息的数据字典视图</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="显示有关访问控制列表信息的数据字典视图" width="100%" border="1" summary="ACL views" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d72328e6307">视图</th>
                              <th align="left" valign="bottom" width="67%" id="d72328e6310">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d72328e6315" headers="d72328e6307 ">
                                 <p><code class="codeph">DBA_HOST_ACES</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d72328e6315 d72328e6310 ">
                                 <p>显示为网络主机定义的网络权限。此视图的<code class="codeph">SELECT</code>权限仅授予<code class="codeph">SELECT_CATALOG_ROLE</code>角色。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d72328e6329" headers="d72328e6307 ">
                                 <p><code class="codeph">DBA_WALLET_ACES</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d72328e6329 d72328e6310 ">
                                 <p>列出钱包路径，ACE顺序，开始和结束时间，授予类型，权限以及有关主体的信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d72328e6337" headers="d72328e6307 ">
                                 <p><code class="codeph">DBA_WALLET_ACLS</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d72328e6337 d72328e6310 ">
                                 <p>显示钱包的访问控制列表分配。此视图的<code class="codeph">SELECT</code>权限仅授予<code class="codeph">SELECT_CATALOG_ROLE</code>角色。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d72328e6351" headers="d72328e6307 ">
                                 <p><code class="codeph">DBA_HOST_ACLS</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d72328e6351 d72328e6310 ">
                                 <p>显示网络主机的访问控制列表分配。此视图的<code class="codeph">SELECT</code>权限仅授予<code class="codeph">SELECT_CATALOG_ROLE</code>角色。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d72328e6365" headers="d72328e6307 ">
                                 <p><code class="codeph">USER_HOST_ACES</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d72328e6365 d72328e6310 ">
                                 <p>显示当前用户访问网络主机的网络权限的状态。视图的<code class="codeph">SELECT</code>权限授予<code class="codeph">PUBLIC</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d72328e6379" headers="d72328e6307 ">
                                 <p><code class="codeph">USER_WALLET_ACES</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d72328e6379 d72328e6310 ">
                                 <p>显示当前用户访问钱包中内容的钱包权限的状态。视图的<code class="codeph">SELECT</code>权限授予<code class="codeph">PUBLIC</code> 。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-4FF80F5B-8D48-4A53-944A-7D239EC50323__GUID-517BB41A-E906-45BB-81FD-847FFA3857B5">
                     <p class="notep1">也可以看看：</p> <a href="../refrn/index.html" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>有关这些视图的更多信息</div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html#GUID-B7DB516A-3245-417F-BB89-8E8212A97542" title="Oracle数据库提供PL / SQL包和类型，用于细粒度访问，以控制对外部网络服务和钱包的访问。">在PL / SQL包和类型中管理细粒度访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
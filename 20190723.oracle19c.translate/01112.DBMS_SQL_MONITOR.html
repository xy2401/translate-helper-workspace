<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_SQL_MONITOR package provides information about Real-Time SQL Monitoring and Real-Time Database Operation Monitoring."></meta>
      <meta name="description" content="The DBMS_SQL_MONITOR package provides information about Real-Time SQL Monitoring and Real-Time Database Operation Monitoring."></meta>
      <title>DBMS_SQL_MONITOR</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_SQL_MONITOR package provides information about Real-Time SQL Monitoring and Real-Time Database Operation Monitoring."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_SQL.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_SQL_TRANSLATOR.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_SQL.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_SQL_TRANSLATOR.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_SQL_MONITOR</li>
            </ol>
            <a id="GUID-13874A73-369E-42CD-9C43-A12F1B3BDEC6" name="GUID-13874A73-369E-42CD-9C43-A12F1B3BDEC6"></a><a id="ARPLS74779"></a><a id="ARPLS74779"></a>
            
            <h2 id="ARPLS-GUID-13874A73-369E-42CD-9C43-A12F1B3BDEC6" class="sect2"><span class="enumeration_chapter">157</span> DBMS_SQL_MONITOR</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_SQL_MONITOR</code>包提供有关实时SQL监视和实时数据库操作监视的信息。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_SQL_MONITOR.html#GUID-A584981E-E45A-496D-83FF-B4EAF79B7297" title="DBMS_SQL_MONITOR包提供有关实时SQL监视和实时数据库操作监视的信息。">DBMS_SQL_MONITOR概述</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SQL_MONITOR.html#GUID-94A0C0AC-E564-4229-A73F-846EBD845F8B" title="此包可供PUBLIC使用，并以调用者的权限权限执行。报告功能需要权限才能从角色SELECT_CATALOG_ROLE提供的目录中选择数据。">DBMS_SQL_MONITOR安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SQL_MONITOR.html#GUID-02DE31A1-9230-44A4-A977-36E2F515AF70" title="DBMS_SQL_MONITOR包使用下表中显示的常量。">DBMS_SQL_MONITOR常量</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SQL_MONITOR.html#GUID-9A5E6564-E176-40CF-9428-E844C4C560AA" title="此表列出并描述了DBMS_SQL_MONITOR包子程序。">DBMS_SQL_MONITOR子程序的摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-13874A73-369E-42CD-9C43-A12F1B3BDEC6__GUID-E1CE17F5-9EE7-4FF7-A098-A3B790ED4E6C">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="DBMS_SQLTUNE.html#GUID-821462BF-1695-41CF-AFF7-FD23E9999C6A" title="DBMS_SQLTUNE包是用于按需调优SQL的接口。相关包DBMS_AUTO_SQLTUNE包为SQL Tuning Advisor提供了作为自动化任务运行的接口。">DBMS_SQLTUNE</a></p>
               </div>
            </div><a id="ARPLS74781"></a><a id="ARPLS74781"></a><div class="props_rev_3"><a id="GUID-A584981E-E45A-496D-83FF-B4EAF79B7297" name="GUID-A584981E-E45A-496D-83FF-B4EAF79B7297"></a><h3 id="ARPLS-GUID-A584981E-E45A-496D-83FF-B4EAF79B7297" class="sect3"><span class="enumeration_section">157.1</span> DBMS_SQL_MONITOR概述</h3>
               <div>
                  <p><code class="codeph">DBMS_SQL_MONITOR</code>包提供有关实时SQL监视和实时数据库操作监视的信息。
                  </p>
                  <div class="section">
                     <p>这些功能提供对SQL语句，PL / SQL块或复合数据库操作的自动监视，这些操作被认为是高成本的。简单的数据库操作是单个SQL语句或PL / SQL过程或函数。复合数据库操作是数据库会话中两个定义的时间点之间的活动。监视的数据收集在<code class="codeph">V$SQL_MONITOR</code>和<code class="codeph">V$SQL_PLAN_MONITOR</code>视图中。
                     </p>
                     <p>以下子程序开始和结束复合数据库操作的监视：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_SQL_MONITOR.html#GUID-25BE0E79-3A19-4303-9F66-2CFDB87C7F82" title="此函数在当前会话中启动数据库操作。">BEGIN_OPERATION函数</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_SQL_MONITOR.html#GUID-73978AE6-8FC9-4640-93BC-ADE787F8D735" title="此函数结束当前会话中的数据库操作。如果指定的数据库操作不存在，则此函数无效。">END_OPERATION程序</a></p>
                        </li>
                     </ul>
                     <p>以下子程序报告了在<code class="codeph">V$SQL_MONITOR</code>和<code class="codeph">V$SQL_PLAN_MONITOR</code>收集的监视数据：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_SQL_MONITOR.html#GUID-04851EB0-32AB-424C-91A1-65AD9220A690" title="此函数构建详细报告，其中包含SQL语句，PL / SQL块或数据库操作的监视信息。">REPORT_SQL_MONITOR函数</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_SQL_MONITOR.html#GUID-E41600C9-8116-4DFD-B479-E0BFA10506A2" title="此函数与REPORT_SQL_MONITOR函数相同，只是返回类型是XMLType。">REPORT_SQL_MONITOR_XML函数</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_SQL_MONITOR.html#GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4" title="此函数为Oracle数据库监视的所有或部分数据库操作构建报告。">REPORT_SQL_MONITOR_LIST函数</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_SQL_MONITOR.html#GUID-F3549005-FA48-4AF2-8E3B-B3D1B02CF489" title="此函数与REPORT_SQL_MONITOR_LIST函数相同，只是它返回XMLType。">REPORT_SQL_MONITOR_LIST_XML函数</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS74782"></a><a id="ARPLS74782"></a><div class="props_rev_3"><a id="GUID-94A0C0AC-E564-4229-A73F-846EBD845F8B" name="GUID-94A0C0AC-E564-4229-A73F-846EBD845F8B"></a><h3 id="ARPLS-GUID-94A0C0AC-E564-4229-A73F-846EBD845F8B" class="sect3"><span class="enumeration_section">157.2</span> DBMS_SQL_MONITOR安全模型</h3>
               <div>
                  <p>此包可供<code class="codeph">PUBLIC</code>使用，并以调用者的权限权限执行。报告功能需要权限才能从角色<code class="codeph">SELECT_CATALOG_ROLE</code>提供的目录中选择数据。</p>
               </div>
            </div><a id="ARPLS74957"></a><a id="ARPLS74958"></a><a id="ARPLS74958"></a><a id="ARPLS74957"></a><div class="props_rev_3"><a id="GUID-02DE31A1-9230-44A4-A977-36E2F515AF70" name="GUID-02DE31A1-9230-44A4-A977-36E2F515AF70"></a><h3 id="ARPLS-GUID-02DE31A1-9230-44A4-A977-36E2F515AF70" class="sect3"><span class="enumeration_section">157.3</span> DBMS_SQL_MONITOR常量</h3>
               <div>
                  <p><code class="codeph">DBMS_SQL_MONITOR</code>包使用下表中显示的常量。
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-02DE31A1-9230-44A4-A977-36E2F515AF70__CHDIFEHH">
                     <p class="titleintable">表157-1 DBMS_SQL_MONITOR常量</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SQL_MONITOR常量" width="100%" border="1" summary="This table describes constants used by DBMS_SQL_MONITOR." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d884171e513">不变</th>
                              <th align="left" valign="bottom" width="21%" id="d884171e516">类型</th>
                              <th align="left" valign="bottom" width="13%" id="d884171e519">值</th>
                              <th align="left" valign="bottom" width="37%" id="d884171e522">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d884171e527" headers="d884171e513 ">
                                 <p><code class="codeph">FORCE_TRACKING</code></p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d884171e527 d884171e516 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d884171e527 d884171e519 ">
                                 <p><code class="codeph">'Y'</code></p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d884171e527 d884171e522 ">
                                 <p>操作开始时强制跟踪复合数据库操作</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d884171e543" headers="d884171e513 ">
                                 <p><code class="codeph">NO_FORCE_TRACKING</code></p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d884171e543 d884171e516 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d884171e543 d884171e519 ">
                                 <p><code class="codeph">'N'</code></p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d884171e543 d884171e522 ">
                                 <p>操作开始时，请勿强制跟踪复合数据库操作。仅在消耗5秒的CPU或I / O时间时才跟踪它。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS74783"></a><a id="ARPLS74784"></a><a id="ARPLS74784"></a><a id="ARPLS74783"></a><div class="props_rev_3"><a id="GUID-9A5E6564-E176-40CF-9428-E844C4C560AA" name="GUID-9A5E6564-E176-40CF-9428-E844C4C560AA"></a><h3 id="ARPLS-GUID-9A5E6564-E176-40CF-9428-E844C4C560AA" class="sect3"><span class="enumeration_section">157.4</span> DBMS_SQL_MONITOR子程序摘要</h3>
               <div>
                  <p>此表列出并描述了<code class="codeph">DBMS_SQL_MONITOR</code>包子程序。
                  </p>
                  <div class="tblformal" id="GUID-9A5E6564-E176-40CF-9428-E844C4C560AA__GUID-9FDB7613-85DC-4D03-B879-24C58F43F085">
                     <p class="titleintable">表157-2 DBMS_SQL_MONITOR包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SQL_MONITOR包子程序" width="100%" border="1" summary="This table lists and describes the DBMS_SQL_MONITOR package subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="53%" id="d884171e659">子程序</th>
                              <th align="left" valign="bottom" width="47%" id="d884171e662">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d884171e667" headers="d884171e659 ">
                                 <p><a href="DBMS_SQL_MONITOR.html#GUID-25BE0E79-3A19-4303-9F66-2CFDB87C7F82" title="此函数在当前会话中启动数据库操作。">BEGIN_OPERATION函数</a> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d884171e667 d884171e662 ">
                                 <p><span>此函数在当前会话中启动数据库操作。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d884171e681" headers="d884171e659 ">
                                 <p><a href="DBMS_SQL_MONITOR.html#GUID-73978AE6-8FC9-4640-93BC-ADE787F8D735" title="此函数结束当前会话中的数据库操作。如果指定的数据库操作不存在，则此函数无效。">END_OPERATION程序</a> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d884171e681 d884171e662 ">
                                 <p><span>此函数结束当前会话中的数据库操作。如果指定的数据库操作不存在，则此函数无效。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d884171e695" headers="d884171e659 ">
                                 <p><a href="DBMS_SQL_MONITOR.html#GUID-04851EB0-32AB-424C-91A1-65AD9220A690" title="此函数构建详细报告，其中包含SQL语句，PL / SQL块或数据库操作的监视信息。">REPORT_SQL_MONITOR函数</a> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d884171e695 d884171e662 ">
                                 <p><span>此函数构建详细报告，其中包含SQL语句，PL / SQL块或数据库操作的监视信息。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d884171e709" headers="d884171e659 ">
                                 <p><a href="DBMS_SQL_MONITOR.html#GUID-E41600C9-8116-4DFD-B479-E0BFA10506A2" title="此函数与REPORT_SQL_MONITOR函数相同，只是返回类型是XMLType。">REPORT_SQL_MONITOR_XML函数</a></p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d884171e709 d884171e662 ">
                                 <p><span>此函数与<code class="codeph">REPORT_SQL_MONITOR</code>函数相同，只是返回类型是<code class="codeph">XMLType</code> 。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d884171e734" headers="d884171e659 ">
                                 <p><a href="DBMS_SQL_MONITOR.html#GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4" title="此函数为Oracle数据库监视的所有或部分数据库操作构建报告。">REPORT_SQL_MONITOR_LIST函数</a> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d884171e734 d884171e662 ">
                                 <p><span>此函数为Oracle数据库监视的所有或部分数据库操作构建报告。</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="53%" id="d884171e748" headers="d884171e659 ">
                                 <p><a href="DBMS_SQL_MONITOR.html#GUID-F3549005-FA48-4AF2-8E3B-B3D1B02CF489" title="此函数与REPORT_SQL_MONITOR_LIST函数相同，只是它返回XMLType。">REPORT_SQL_MONITOR_LIST_XML函数</a></p>
                              </td>
                              <td align="left" valign="top" width="47%" headers="d884171e748 d884171e662 ">
                                 <p><span>此函数与<code class="codeph">REPORT_SQL_MONITOR_LIST</code>函数相同，只是它返回<code class="codeph">XMLType</code> 。</span></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS74785"></a><a id="ARPLS74786"></a><a id="ARPLS74786"></a><a id="ARPLS74785"></a><div class="props_rev_3"><a id="GUID-25BE0E79-3A19-4303-9F66-2CFDB87C7F82" name="GUID-25BE0E79-3A19-4303-9F66-2CFDB87C7F82"></a><h4 id="ARPLS-GUID-25BE0E79-3A19-4303-9F66-2CFDB87C7F82" class="sect4"><span class="enumeration_section">157.4.1</span> BEGIN_OPERATION函数</h4>
                  <div>
                     <p><span>此函数在当前会话中启动数据库操作。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-25BE0E79-3A19-4303-9F66-2CFDB87C7F82__GUID-679014C6-F7F6-4B27-8B32-D10285BD1160">句法</p><pre class="pre codeblock"><code>DBMS_SQL_MONITOR.BEGIN_OPERATION（dbop_name IN VARCHAR2，dbop_eid IN NUMBER：= NULL，forced_tracking IN VARCHAR2：= NO_FORCE_TRACKING，attribute_list IN VARCHAR2：= NULL，session_id IN NUMBER：= NULL，session_serial IN NUMBER：= NULL）iRETURN NUMBER;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-25BE0E79-3A19-4303-9F66-2CFDB87C7F82__GUID-34F2425D-DCA6-43E0-934A-BEEC321CA448">参数</p>
                        <div class="tblformal" id="GUID-25BE0E79-3A19-4303-9F66-2CFDB87C7F82__GUID-C384378F-203A-4D9E-98C1-1A1A05BF2B4A">
                           <p class="titleintable">表157-3 <span class="italic"><span class="bold">BEGIN_OPERATION过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="BEGIN_OPERATION过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SQL_MONITOR.BEGIN_OPERATION subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d884171e885">参数</th>
                                    <th align="left" valign="bottom" width="70%" id="d884171e888">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e893" headers="d884171e885 ">
                                       <p><code class="codeph">dbop_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e893 d884171e888 ">
                                       <p>复合数据库操作的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e901" headers="d884171e885 ">
                                       <p><code class="codeph">dbop_eid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e901 d884171e888 ">
                                       <p>当前执行复合数据库操作的唯一标识符。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e909" headers="d884171e885 ">
                                       <p><code class="codeph">forced_tracking</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e909 d884171e888 ">
                                       <p>是否强制跟踪。可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">FORCE_TRACKING</code> - 强制在操作开始时跟踪复合数据库操作。您还可以使用字符串变量<code class="codeph">Y</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NO_FORCE_TRACKING</code> - 仅在消耗了至少5秒的CPU或I / O时间时跟踪操作。您还可以使用字符串变量<code class="codeph">N</code></p>
                                          </li>
                                       </ul>
                                       <p>请参见<span class="q">“ <a href="DBMS_SQL_MONITOR.html#GUID-02DE31A1-9230-44A4-A977-36E2F515AF70" title="DBMS_SQL_MONITOR包使用下表中显示的常量。">DBMS_SQL_MONITOR常量</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e946" headers="d884171e885 ">
                                       <p><code class="codeph">ATTRIBUTE_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e946 d884171e888 ">
                                       <p>用户创建的属性列表。它是以逗号分隔的名称 - 值对列表（例如， <code class="codeph">'table_name=emp, operation=load'</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e957" headers="d884171e885 "><code class="codeph">SESSION_ID</code></td>
                                    <td align="left" valign="top" width="70%" headers="d884171e957 d884171e888 ">要监视的会话的会话ID。如果省略（或null），则数据库监视当前会话。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e963" headers="d884171e885 "><code class="codeph">session_serial</code></td>
                                    <td align="left" valign="top" width="70%" headers="d884171e963 d884171e888 ">要监视的会话的序列号。如果省略（或为null），则数据库仅使用会话ID来确定会话。</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-25BE0E79-3A19-4303-9F66-2CFDB87C7F82__GUID-DAFA16B3-BF50-444E-99A7-DC071AC56536">返回值</p>
                        <p>此函数返回数据库操作执行ID。如果<code class="codeph">dbop_eid</code>的值为null，则数据库将生成唯一值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74787"></a><a id="ARPLS74788"></a><a id="ARPLS74788"></a><a id="ARPLS74787"></a><div class="props_rev_3"><a id="GUID-73978AE6-8FC9-4640-93BC-ADE787F8D735" name="GUID-73978AE6-8FC9-4640-93BC-ADE787F8D735"></a><h4 id="ARPLS-GUID-73978AE6-8FC9-4640-93BC-ADE787F8D735" class="sect4"><span class="enumeration_section">157.4.2</span> END_OPERATION程序</h4>
                  <div>
                     <p><span>此函数结束当前会话中的数据库操作。如果指定的数据库操作不存在，则此函数无效。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-73978AE6-8FC9-4640-93BC-ADE787F8D735__GUID-CF22D9EC-CBD4-4B99-8309-E97441DBD2ED">句法</p><pre class="pre codeblock"><code>DBMS_SQL_MONITOR.END_OPERATION（dbop_name IN VARCHAR2，dbop_eid IN NUMBER）返回号码;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-73978AE6-8FC9-4640-93BC-ADE787F8D735__GUID-85AEED5F-07DD-4495-92ED-03DA17F9764C">参数</p>
                        <div class="tblformal" id="GUID-73978AE6-8FC9-4640-93BC-ADE787F8D735__GUID-CAE9FA6A-76BC-42B7-95E3-A2D52EDF3108">
                           <p class="titleintable">表157-4 END_OPERATION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="END_OPERATION过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SQL_MONITOR.END_OPERATION subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d884171e1088">参数</th>
                                    <th align="left" valign="bottom" width="80%" id="d884171e1091">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d884171e1096" headers="d884171e1088 ">
                                       <p><code class="codeph">dbop_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d884171e1096 d884171e1091 ">
                                       <p>复合数据库操作的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d884171e1104" headers="d884171e1088 ">
                                       <p><code class="codeph">dbop_eid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d884171e1104 d884171e1091 ">
                                       <p>当前执行复合数据库操作的唯一标识符</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74789"></a><a id="ARPLS74790"></a><a id="ARPLS74790"></a><a id="ARPLS74789"></a><div class="props_rev_3"><a id="GUID-04851EB0-32AB-424C-91A1-65AD9220A690" name="GUID-04851EB0-32AB-424C-91A1-65AD9220A690"></a><h4 id="ARPLS-GUID-04851EB0-32AB-424C-91A1-65AD9220A690" class="sect4"><span class="enumeration_section">157.4.3</span> REPORT_SQL_MONITOR函数</h4>
                  <div>
                     <p><span>此函数构建详细报告，其中包含SQL语句，PL / SQL块或数据库操作的监视信息。</span></p>
                     <div class="section">
                        <p>对于每个操作，它提供关键信息和相关的全局统计信息。使用此函数可获取数据库操作的详细监视信息。</p>
                        <p>此报告的目标数据库操作可以是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle数据库监控的最后一个数据库操作（默认情况下，无参数）。</p>
                           </li>
                           <li>
                              <p>最后一个数据库操作在指定的会话中执行并由Oracle数据库监视。会话由其会话ID和可选的序列号（ <code class="codeph">-1</code>是当前会话）标识。
                              </p>
                           </li>
                           <li>
                              <p>最后一次执行由其<code class="codeph">sql_id</code>标识的特定数据库操作。
                              </p>
                           </li>
                           <li>
                              <p>由<code class="codeph">sql_id</code> ， <code class="codeph">sql_exec_start</code>和<code class="codeph">sql_exec_id</code>组合标识的数据库操作的特定执行。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">dbop_name</code>标识的特定数据库操作的最后一次执行。
                              </p>
                           </li>
                           <li>
                              <p>由<code class="codeph">dbop_name</code> ， <code class="codeph">dbop_exec_id</code>组合标识的数据库操作的特定执行。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-04851EB0-32AB-424C-91A1-65AD9220A690__GUID-D823876B-CD95-4A67-8B40-4F2D585E859D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SQL_MONITOR.REPORT_SQL_MONITOR（sql_id IN VARCHAR2 DEFAULT NULL，dbop_name IN VARCHAR2 DEFAULT NULL，dbop_exec_id IN NUMBER DEFAULT NULL，session_id IN NUMBER DEFAULT NULL，session_serial IN NUMBER DEFAULT NULL，sql_exec_start IN DATE DEFAULT NULL，sql_exec_id IN NUMBER DEFAULT NULL，inst_id IN NUMBER DEFAULT NULL，start_time_filter IN DATE DEFAULT NULL，end_time_filter IN DATE DEFAULT NULL，instance_id_filter IN NUMBER DEFAULT NULL，parallel_filter IN VARCHAR2 DEFAULT NULL，plan_line_filter IN NUMBER DEFAULT NULL，event_detail IN VARCHAR2 DEFAULT'YES'，bucket_max_count IN NUMBER DEFAULT 128，bucket_interval IN NUMBER DEFAULT NULL，base_path IN VARCHAR2 DEFAULT NULL，last_refresh_time IN DATE DEFAULT NULL，report_level IN VARCHAR2 DEFAULT'TYPICAL'，输入IN VARCHAR2 DEFAULT'TEXT'，sql_plan_hash_value IN NUMBER DEFAULT NULL，con_name IN VARCHAR2 DEFAULT NULL）RETURN CLOB;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-04851EB0-32AB-424C-91A1-65AD9220A690__GUID-89744270-573B-483E-B789-5425112FF90D">参数</p>
                        <div class="tblformal" id="GUID-04851EB0-32AB-424C-91A1-65AD9220A690__GUID-9F5AA0D2-9D73-4654-9081-6F1274A79F01">
                           <p class="titleintable">表157-5 <span class="italic"><span class="bold">REPORT_SQL_MONITOR过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_SQL_MONITOR过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SQL_MONITOR.REPORT_SQL_MONITOR subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d884171e1272">参数</th>
                                    <th align="left" valign="bottom" width="70%" id="d884171e1275">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1280" headers="d884171e1272 ">
                                       <p><code class="codeph">SQL_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1280 d884171e1275 ">
                                       <p>应显示监视信息的简单数据库操作的<code class="codeph">SQL_ID</code> 。使用<code class="codeph">NULL</code> （缺省值）显示Oracle监视的上一个简单数据库操作的监视信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1293" headers="d884171e1272 ">
                                       <p><code class="codeph">dbop_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1293 d884171e1275 ">
                                       <p><code class="codeph">DBOP_NAME</code> ，显示复合数据库操作的监视信息</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1303" headers="d884171e1272 ">
                                       <p><code class="codeph">dbop_exec_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1303 d884171e1275 ">
                                       <p>显示监视信息的复合数据库操作的执行ID</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1311" headers="d884171e1272 ">
                                       <p><code class="codeph">SESSION_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1311 d884171e1275 ">
                                       <p>仅定位代表指定会话执行和监视的语句子集。默认值为<code class="codeph">NULL</code> 。对当前会话使用<code class="codeph">-1</code>或<code class="codeph">USERENV('SID')</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1328" headers="d884171e1272 ">
                                       <p><code class="codeph">session_serial</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1328 d884171e1275 ">
                                       <p>除了<code class="codeph">session_id</code> ，您还可以指定会话序列号，以确保定位所需的会话化身。当<code class="codeph">session_id</code>为<code class="codeph">NULL</code>时，将忽略此项。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1345" headers="d884171e1272 ">
                                       <p><code class="codeph">sql_exec_start</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1345 d884171e1275 ">
                                       <p>执行受监控SQL的时间。仅在指定<code class="codeph">sql_id</code>时适用。用于显示<code class="codeph">sql_id</code>的特定执行的监视信息。当<code class="codeph">NULL</code> （默认值）时，显示<code class="codeph">sql_id</code>的最后一次执行。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1365" headers="d884171e1272 ">
                                       <p><code class="codeph">sql_exec_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1365 d884171e1275 ">
                                       <p>SQL监视器在内部生成的数字ID，用于标识同一SQL语句的不同执行。因此，每次执行都将具有相同的<code class="codeph">sql_id</code>但具有不同的<code class="codeph">sql_exec_id</code> 。仅在指定<code class="codeph">sql_id</code>时适用，并用于显示特定<code class="codeph">sql_id</code>执行的监视信息。当<code class="codeph">NULL</code> （默认值）时，显示<code class="codeph">sql_id</code>的最后一次执行。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1392" headers="d884171e1272 ">
                                       <p><code class="codeph">INST_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1392 d884171e1275 ">
                                       <p>仅查看在指定实例上启动的查询。使用<code class="codeph">-1</code>来定位当前实例。默认<code class="codeph">NULL</code>将以所有实例为目标。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1406" headers="d884171e1272 ">
                                       <p><code class="codeph">start_time_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1406 d884171e1275 ">
                                       <p>如果不为<code class="codeph">NULL</code> ，则报告显示此日期之后开始的<code class="codeph">V$ACTIVE_SESSION_HISTORY</code>活动。如果为<code class="codeph">NULL</code> ，则在目标数据库操作开始后，报告的活动将启动。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1423" headers="d884171e1272 ">
                                       <p><code class="codeph">end_time_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1423 d884171e1275 ">
                                       <p>如果不为<code class="codeph">NULL</code> ，则报告显示在此日期之前启动的<code class="codeph">V$ACTIVE_SESSION_HISTORY</code>活动。如果为<code class="codeph">NULL</code> ，则报告的活动在目标数据库操作结束时结束，如果操作仍在执行，则结束<code class="codeph">SYSDATE</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1443" headers="d884171e1272 ">
                                       <p><code class="codeph">instance_id_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1443 d884171e1275 ">
                                       <p>仅查看指定实例的活动。使用<code class="codeph">NULL</code> （默认值）来定位所有实例。仅在查询并行运行时才相关。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1455" headers="d884171e1272 ">
                                       <p><code class="codeph">parallel_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1455 d884171e1275 ">
                                       <p>并行过滤器仅适用于并行执行，并允许您仅选择并行执行中涉及的过程的子集。字符串<code class="codeph">parallel_filter</code>可以是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">NULL</code> - 将所有并行执行服务器以及查询协调器作为目标</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">['qc'][servers(&lt;svr_grp&gt;[,] &lt;svr_set&gt;[,] &lt;srv_num&gt;)]</code>其中任何<code class="codeph">NULL</code>值都被解释为<code class="codeph">ALL</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1482" headers="d884171e1272 ">
                                       <p><code class="codeph">plan_line_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1482 d884171e1275 ">
                                       <p>为SQL的计划中的指定行号选择活动和执行统计信息。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1490" headers="d884171e1272 ">
                                       <p><code class="codeph">event_detail</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1490 d884171e1275 ">
                                       <p>设置为<code class="codeph">NO</code> ，活动仅由<code class="codeph">wait_class</code>聚合。使用<code class="codeph">YES</code> （默认值）按<code class="codeph">wait_class</code> ， <code class="codeph">event_name</code>聚合。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1513" headers="d884171e1272 ">
                                       <p><code class="codeph">bucket_max_count</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1513 d884171e1275 ">
                                       <p>指定要在报告中创建的最大桶数</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1521" headers="d884171e1272 ">
                                       <p><code class="codeph">bucket_interval</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1521 d884171e1275 ">
                                       <p>表示所有直方图存储桶的确切时间间隔（以秒为单位）。如果指定，则忽略<code class="codeph">bucket_max_count</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1532" headers="d884171e1272 ">
                                       <p><code class="codeph">BASE_PATH</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1532 d884171e1275 ">
                                       <p>Flex HTML资源的URL路径，因为flex HTML格式需要访问外部文件（Java脚本和Flash <code class="codeph">swf</code>文件）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1543" headers="d884171e1272 ">
                                       <p><code class="codeph">last_refresh_time</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1543 d884171e1275 ">
                                       <p>如果不为<code class="codeph">NULL</code> （默认值），则表示上次检索报告的时间（报告标记的<code class="codeph">SYSDATE</code>属性）。如果要显示正在运行的查询的报告以及定期刷新该报告，请使用此选项。这样可以优化报告的大小，因为只返回新更改的信息。特别是，以下将进行优化：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>指定此选项时，不会返回SQL文本</p>
                                          </li>
                                          <li>
                                             <p>活动直方图将从与该时间相交的桶开始。即使<code class="codeph">last_refresh_time</code>在该存储桶的开始之后，也会返回存储桶的全部内容</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1567" headers="d884171e1272 ">
                                       <p><code class="codeph">report_level</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1567 d884171e1275 ">
                                       <p>报告的详细程度。在以下内容中，只能指定一个：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">NONE</code> ：可能性最小</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：这相当于<code class="codeph">sql_text-plan-xplan-sessions-instance-activity_histogram-plan_histogram-metrics</code> ，其中令牌“ <code class="codeph">-</code> ”表示报告部分不会包含在报告中。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：除了<code class="codeph">plan_histogram</code>所有东西</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：一切</p>
                                          </li>
                                       </ul>
                                       <p>此外，还可以使用<code class="codeph">±</code> <span class="italic"><code class="codeph">section_name</code></span>启用或禁用单个报告部分。定义了几个部分：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">XPLAN</code> ：显示解释计划。默认为<code class="codeph">ON</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PLAN</code> ：显示计划监控统计信息。默认为<code class="codeph">ON</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SESSIONS</code> ：显示会话详细信息。仅适用于并行查询。默认为<code class="codeph">ON</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">INSTANCE</code> ：显示实例详细信息。仅适用于并行和跨实例查询。默认为<code class="codeph">ON</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> ：用于指定会话和实例详细信息的伞形参数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ACTIVITY</code> ：在全局级别，计划行级别和会话中显示活动摘要</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">INSTANCE</code> <code class="codeph">LEVEL</code> :(如适用）。 <code class="codeph"> 默认为ON</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BINDS</code> ：显示可用时的绑定信息。默认为<code class="codeph">ON</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">METRICS</code> ：随时间显示度量标准数据（如CPU和IO）。默认为<code class="codeph">ON</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ACTIVITY_HISTOGRAM</code> ：显示整个查询活动的直方图。默认为<code class="codeph">ON</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PLAN_HISTOGRAM</code> ：在计划行级别显示活动直方图。默认为<code class="codeph">OFF</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">OTHER</code> ：其他信息。默认为<code class="codeph">ON</code> 。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>此外，可以在不同级别指定SQL文本：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">-SQL_TEXT</code> ：报告中没有SQL文本</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">+SQL_TEXT</code> ：好的部分SQL文本，即存储在<code class="codeph">GV$SQL_MONITOR</code>的前2000个字符</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_FULLTEXT</code> ：没有完整的SQL文本，即<code class="codeph">+sql_text</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">+SQL_FULLTEXT</code> ：显示完整的SQL文本（默认）</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1734" headers="d884171e1272 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1734 d884171e1275 ">
                                       <p>报告类型：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">TEXT</code> ：文本报告（默认）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">HTML</code> ：简单的HTML报告</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ACTIVE</code> ：数据库活动报告。仅在选择此类型时才会显示某些信息（说明计划， <code class="codeph">activity_histogram</code> ，metrics和<code class="codeph">plan_histogram</code> ）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">XML</code> ：报告的原始数据</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1769" headers="d884171e1272 ">
                                       <p><code class="codeph">sql_plan_hash_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1769 d884171e1275 ">
                                       <p>仅定位具有指定计划哈希值的那些。默认值为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e1780" headers="d884171e1272 ">
                                       <p><code class="codeph">con_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e1780 d884171e1275 ">
                                       <p>多租户数据库中的容器名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-04851EB0-32AB-424C-91A1-65AD9220A690__GUID-B48B1496-8340-4E3E-B096-687B9BC65844">返回值</p>
                        <p>SQL监视器报告，一个XML文档。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-04851EB0-32AB-424C-91A1-65AD9220A690__GUID-EF6801E4-1AF8-450D-A9EC-545133451F2C">使用说明</p>
                        <p>调用此函数的用户必须具有访问以下固定视图的权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">GV $ SQL_MONITOR</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">GV $ SQL_PLAN_MONITOR</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">GV $ ACTIVE_SESSION_HISTORY</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">GV $ SESSION_LONGOPS</code></p>
                           </li>
                           <li>
                              <p>如果请求SQL全文且其长度大于2 KB，则为<code class="codeph">GV$SQL</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-E41600C9-8116-4DFD-B479-E0BFA10506A2" name="GUID-E41600C9-8116-4DFD-B479-E0BFA10506A2"></a><h4 id="ARPLS-GUID-E41600C9-8116-4DFD-B479-E0BFA10506A2" class="sect4"><span class="enumeration_section">157.4.4</span> REPORT_SQL_MONITOR_XML函数</h4>
                  <div>
                     <p><span>此函数与<code class="codeph">REPORT_SQL_MONITOR</code>函数相同，只是返回类型是<code class="codeph">XMLType</code> 。</span></p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="DBMS_SQL_MONITOR.html#GUID-04851EB0-32AB-424C-91A1-65AD9220A690" title="此函数构建详细报告，其中包含SQL语句，PL / SQL块或数据库操作的监视信息。">REPORT_SQL_MONITOR函数</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ARPLS74842"></a><a id="ARPLS74843"></a><a id="ARPLS74843"></a><a id="ARPLS74842"></a><div class="props_rev_3"><a id="GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4" name="GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4"></a><h4 id="ARPLS-GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4" class="sect4"><span class="enumeration_section">157.4.5</span> REPORT_SQL_MONITOR_LIST函数</h4>
                  <div>
                     <p><span>此函数为Oracle数据库监视的所有或部分数据库操作构建报告。</span></p>
                     <div class="section">
                        <p>对于每个数据库操作，它提供关键信息和相关的全局统计信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4__GUID-6EBBFA15-DF03-4300-9716-511EE0FAE530">句法</p><pre class="pre codeblock"><code>DBMS_SQL_MONITOR.REPORT_SQL_MONITOR_LIST（sql_id IN VARCHAR2 DEFAULT NULL，dbop_name IN VARCHAR2 DEFAULT NULL，monitor_type IN NUMBER DEFAULT MONITOR_TYPE_ALL，session_id IN NUMBER DEFAULT NULL，session_serial IN NUMBER DEFAULT NULL，inst_id IN NUMBER DEFAULT NULL，active_since_date IN DATE DEFAULT NULL，active_since_sec IN NUMBER DEFAULT NULL，last_refresh_time IN DATE DEFAULT NULL，report_level IN VARCHAR2 DEFAULT'TYPICAL'，auto_refresh IN NUMBER DEFAULT NULL，base_path IN VARCHAR2 DEFAULT NULL，输入IN VARCHAR2 DEFAULT'TEXT'，con_name IN VARCHAR2 DEFAULT NULL）RETURN CLOB;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4__GUID-8BFE44E2-C827-4606-98C2-5B376C770B60">参数</p>
                        <div class="tblformal" id="GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4__GUID-E14C43BB-3900-4890-91BB-6461BF2B8963">
                           <p class="titleintable">表157-6 <span class="italic"><span class="bold">REPORT_SQL_MONITOR_LIST过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_SQL_MONITOR_LIST过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_SQL_MONITOR.REPORT_SQL_MONITOR_LIST subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d884171e2040">参数</th>
                                    <th align="left" valign="bottom" width="70%" id="d884171e2043">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2048" headers="d884171e2040 ">
                                       <p><code class="codeph">SQL_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2048 d884171e2043 ">
                                       <p>应显示监视信息的简单数据库操作的<code class="codeph">SQL_ID</code> 。使用<code class="codeph">NULL</code> （默认）显示Oracle数据库监控的上一个操作的监视信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2061" headers="d884171e2040 ">
                                       <p><code class="codeph">dbop_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2061 d884171e2043 ">
                                       <p><code class="codeph">DBOP_NAME</code> ，显示复合数据库操作的监视信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2071" headers="d884171e2040 ">
                                       <p><code class="codeph">MONITOR_TYPE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2071 d884171e2043 ">
                                       <p>监控类型：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">MONITOR_TYPE_SQL</code>仅返回简单的数据库操作</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MONITOR_TYPE_DBOP</code>返回复合数据库操作</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MONITOR_TYPE_ALL</code>返回所有类型</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2095" headers="d884171e2040 ">
                                       <p><code class="codeph">SESSION_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2095 d884171e2043 ">
                                       <p>仅定位代表指定会话执行和监视的数据库操作的子集。默认值为<code class="codeph">NULL</code> 。对当前会话使用<code class="codeph">-1</code>或<code class="codeph">USERENV('SID')</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2112" headers="d884171e2040 ">
                                       <p><code class="codeph">session_serial</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2112 d884171e2043 ">
                                       <p>除了<code class="codeph">session_id</code> ，您还可以指定会话序列号，以确保定位所需的会话化身。当<code class="codeph">session_id</code>为<code class="codeph">NULL</code>时，将忽略此项。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2129" headers="d884171e2040 ">
                                       <p><code class="codeph">INST_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2129 d884171e2043 ">
                                       <p>仅查看源自指定实例的受监视数据库操作。使用<code class="codeph">-1</code>来定位执行报告的实例。要定位所有实例，请使用<code class="codeph">NULL</code> （默认值）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2143" headers="d884171e2040 ">
                                       <p><code class="codeph">active_since_date</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2143 d884171e2043 ">
                                       <p>如果不为<code class="codeph">NULL</code> （默认值），则返回自指定时间以来一直处于活动状态的受监视数据库操作。这包括正在执行的所有操作，以及在指定的开始时间之后完成执行的所有操作。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2154" headers="d884171e2040 ">
                                       <p><code class="codeph">active_since_sec</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2154 d884171e2043 ">
                                       <p>如果不为<code class="codeph">NULL</code> （默认值），则返回自指定时间以来一直处于活动状态的受监视数据库操作。这包括正在执行的所有操作，以及在指定日期和时间之后完成执行的所有操作。在这种情况下，相对于当前<code class="codeph">SYSDATE</code>指定的开始时间减去指定的秒数。例如，使用3600将报告限制为过去1小时内处于活动状态的所有操作。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2168" headers="d884171e2040 ">
                                       <p><code class="codeph">last_refresh_time</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2168 d884171e2043 ">
                                       <p>如果不为<code class="codeph">NULL</code> （默认值），则表示上次检索列表报告的时间。这样可以优化应用程序显示列表并定期刷新报表（例如每5秒一次）的情况。在这种情况下，报告将显示自指定的<code class="codeph">last_refresh_time</code>以来一直处于活动状态的受监视查询的执行详细信息。对于其他查询，报告返回执行密钥（ <code class="codeph">sql_id</code> ， <code class="codeph">sql_exec_start</code>和<code class="codeph">sql_exec_id</code> ）。此外，对于在指定日期之后具有第一次刷新时间的查询，仅返回SQL执行密钥和统计信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2191" headers="d884171e2040 ">
                                       <p><code class="codeph">report_level</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2191 d884171e2043 ">
                                       <p>报告的详细程度。级别可以是<code class="codeph">BASIC</code> （SQL文本最多200个字符）， <code class="codeph">TYPICAL</code> （包括完整的SQL文本，假设游标没有老化，在这种情况下，SQL文本最多包含2000个字符），或者<code class="codeph">ALL</code>是相同的<code class="codeph">TYPICAL</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2211" headers="d884171e2040 ">
                                       <p><code class="codeph">自动刷新</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2211 d884171e2043 ">
                                       <p>指定在受监视的SQL或数据库操作仍在执行时自动刷新报告数据的持续时间（以秒为单位）。这适用于活动报告类型。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2220" headers="d884171e2040 ">
                                       <p><code class="codeph">BASE_PATH</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2220 d884171e2043 ">
                                       <p>flex HTML资源的URL路径，因为flex HTML格式需要访问外部文件（java脚本和flash <code class="codeph">swf</code>文件）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2231" headers="d884171e2040 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2231 d884171e2043 ">
                                       <p>报告类型：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">TEXT</code> ：文本报告（默认）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">HTML</code> ：简单的HTML报告</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ACTIVE</code> ：数据库活动报告。仅在选择此类型时才会显示某些信息（说明计划， <code class="codeph">activity_histogram</code> ，metrics和<code class="codeph">plan_histogram</code> ）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">XML</code> ：报告的原始数据</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d884171e2266" headers="d884171e2040 ">
                                       <p><code class="codeph">con_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d884171e2266 d884171e2043 ">
                                       <p>多租户数据库中的容器名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4__GUID-4FC2695B-E057-4928-B1A7-52AA33C51003">返回值</p>
                        <p>包含受监视数据库操作列表的文本，XML或HTML格式的报告。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4__GUID-7A2597FF-50D2-4567-9B91-1325A5209118">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<a href="DBMS_SQL_MONITOR.html#GUID-04851EB0-32AB-424C-91A1-65AD9220A690" title="此函数构建详细报告，其中包含SQL语句，PL / SQL块或数据库操作的监视信息。">REPORT_SQL_MONITOR函数</a>获取单个数据库操作的详细监视信息。
                              </p>
                           </li>
                           <li>
                              <p>调用此函数的用户需要具有访问固定视图<code class="codeph">GV$SQL_MONITOR</code>和<code class="codeph">GV$SQL</code>的权限。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-F3549005-FA48-4AF2-8E3B-B3D1B02CF489" name="GUID-F3549005-FA48-4AF2-8E3B-B3D1B02CF489"></a><h4 id="ARPLS-GUID-F3549005-FA48-4AF2-8E3B-B3D1B02CF489" class="sect4"><span class="enumeration_section">157.4.6</span> REPORT_SQL_MONITOR_LIST_XML函数</h4>
                  <div>
                     <p><span>此函数与<code class="codeph">REPORT_SQL_MONITOR_LIST</code>函数相同，只是它返回<code class="codeph">XMLType</code> 。</span></p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="DBMS_SQL_MONITOR.html#GUID-8E1AB71C-0167-4895-B72D-45B1C1B222C4" title="此函数为Oracle数据库监视的所有或部分数据库操作构建报告。">REPORT_SQL_MONITOR_LIST函数</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle XML DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control."></meta>
      <meta name="description" content="Oracle XML DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control."></meta>
      <title>资源版本</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Oracle XML DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html" title="Previous" type="text/html"></link>
      <link rel="next" href="PLSQL-access-to-XML-DB-repository.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="PLSQL-access-to-XML-DB-repository.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name">Oracle XML DB存储库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">资源版本</li>
            </ol>
            <a id="GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" name="GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA"></a><a id="ADXDB2100"></a>
            
            <h2 id="ADXDB-GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" class="sect2"><span class="enumeration_chapter">25</span>资源版本</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='resource-versions'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>可以对Oracle XML DB资源库资源进行版本控制。保留对受版本控制的资源的所有更改的记录。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="resource-versions.html#GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E">Oracle XML DB存储库资源版本控制概述</a><br>您可以创建和管理存储库资源的不同版本。保留对受版本控制的资源的所有更改的记录。更新版本控制的资源时，更新前的内容将存储为单独的资源版本 - 历史记录的快照。
                  </li>
                  <li class="ulchildlink"><a href="resource-versions.html#GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6">PL / SQL包DBMS_XDB_VERSION概述</a><br>您可以使用PL / SQL包<code class="codeph">DBMS_XDB_VERSION</code>来处理Oracle XML DB存储库资源版本。
                  </li>
                  <li class="ulchildlink"><a href="resource-versions.html#GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD">资源版本和资源ID</a><br>资源对象ID或<strong class="term">资源ID</strong>是<strong class="term">资源</strong>的唯一，常量，系统生成的标识符。每个资源都有一个资源ID。这包括<span class="italic">版本资源</span> ，它是系统生成的资源，没有任何路径名。资源ID有时称为<strong class="term">RESID</strong> 。</li>
                  <li class="ulchildlink"><a href="resource-versions.html#GUID-6C753855-2EE2-4378-AE91-367FBE34B0EB">资源版本和ACL</a><br>版本资源是不可变的。它是资源内容和元数据的快照，加上资源ID，快照和ID都是静态的。同样，不能更改版本资源的访问控制列表（ACL）。
                  </li>
                  <li class="ulchildlink"><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8">资源版本控制示例</a><br>这里的示例创建一个版本控制的资源;使用其资源ID检索资源的内容;检查版本控制的资源（适用于所有用户）;更新资源的内容;检查资源;检索资源的不同版本的内容和元数据;并取消资源退房。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML DB Repository允许您对数据进行版本控制，实现和管理安全性，并使用API来访问和操作存储库资源。">Oracle XML DB存储库</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5365"></a><a id="ADXDB5362"></a><div class="props_rev_3"><a id="GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E" name="GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E"></a><h3 id="ADXDB-GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E" class="sect3"><span class="enumeration_section">25.1</span> Oracle XML DB资源库版本控制概述</h3>
               <div>
                  <p>您可以创建和管理存储库资源的不同版本。保留对受版本控制的资源的所有更改的记录。更新版本控制的资源时，更新前的内容将存储为单独的资源版本 - 历史记录的快照。</p>
                  <p>版本控制功能包括以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>资源的版本控制。</p>
                        <p>您可以为Oracle XML DB资源库资源打开或关闭版本控制。</p>
                     </li>
                     <li>
                        <p>更新版本控制的资源。</p>
                        <p>当Oracle XML DB更新版本控制的资源时，它会创建新版本的资源。删除版本控制的资源时，不会从数据库中删除此新版本。</p>
                     </li>
                     <li>
                        <p>访问受版本控制的资源。</p>
                        <p>您可以像访问任何其他资源一样访问版本控制的资源。</p>
                     </li>
                     <li>
                        <p>访问资源版本。</p>
                        <p>要访问特定版本的资源，请使用该版本的资源ID。资源ID可以从资源版本历史记录或从版本控制的资源本身获得。请参阅<a href="resource-versions.html#GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD" title="资源对象ID或资源ID是资源的唯一，常量，系统生成的标识符。每个资源都有一个资源ID。这包括版本资源，它是系统生成的资源，没有任何路径名。资源ID有时称为RESID。">资源版本和资源ID</a> 。
                        </p>
                     </li>
                  </ul>
                  <p><a href="resource-versions.html#GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E__G1043974" title="此表描述了Oracle XML DB版本控制术语。">表25-1</a>列出了本章中使用的一些术语。
                  </p>
                  <div class="tblformalwide" id="GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E__G1043974">
                     <p class="titleintable">表25-1 Oracle XML DB版本控制术语</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Oracle XML DB版本控制术语" width="100%" border="1" summary="This table describes Oracle XML DB versioning terms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d125986e191">术语</th>
                              <th align="left" valign="bottom" width="75%" id="d125986e194">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d125986e199" headers="d125986e191 ">
                                 <p><strong class="term">可版本化的资源</strong></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d125986e199 d125986e194 ">
                                 <p>可以置于版本控制之下的资源。除文件夹和ACL之外的所有Oracle XML DB资源都是可版本化的。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d125986e207" headers="d125986e191 ">
                                 <p><strong class="term">版本控制的资源</strong><strong class="term"></strong></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d125986e207 d125986e194 ">
                                 <p>受版本控制的资源。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d125986e216" headers="d125986e191 ">
                                 <p><strong class="term">版本资源</strong></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d125986e216 d125986e194 ">
                                 <p>特定版本的版本控制资源。版本资源本身就是一种资源。它是系统生成的，没有关联的路径名。它是只读的（无法更新或删除）。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d125986e224" headers="d125986e191 ">
                                 <p><code class="codeph">checkOut</code> ， <code class="codeph">checkIn</code> ， <code class="codeph">unCheckOut</code></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d125986e224 d125986e194 ">
                                 <p>管理版本控制资源的操作。必须先使用<code class="codeph">checkOut</code>才能修改版本控制的资源。使用<code class="codeph">checkIn</code>使您的更改成为永久更改。使用<code class="codeph">unCheckOut</code>取消更改。（在每个操作之后使用<code class="codeph">COMMIT</code> 。）
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnote" id="GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E__GUID-164070D3-AD97-4A74-96B5-EE9D2CCE86E3">
                     <p class="notep1">注意：</p>
                     <p>Oracle XML DB仅支持Oracle XML DB资源的版本控制。它<span class="italic">不</span>支持对Oracle数据库用户定义的表或数据的版本控制。
                     </p>
                     <p>Oracle <span class="italic">不</span>保证整个检查的版本的资源ID的保存和退房。除了最新版本的资源ID之外的所有内容都将被保留。
                     </p>
                     <p>Oracle XML DB支持非基于XML模式的XML资源的版本控制。它还支持基于XML模式的资源和包含基于XML模式的元数据的资源的版本控制，但前提是基础表<span class="italic">没有</span>关联的触发器或约束。
                     </p>
                     <p>如果为表启用了层次结构，则表具有触发器。这包括作为XML模式注册的一部分创建的表，其默认行为是启用层次结构。</p>
                     <p>另请注意，如果查询资源下的其中一个表，则查询可以从多个版本的资源返回数据。这是因为不同资源版本的数据使用不同的行存储在同一个基础表中。</p>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="resource-versions.html#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="可以对Oracle XML DB资源库资源进行版本控制。保留对受版本控制的资源的所有更改的记录。">资源版本</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5386"></a><a id="ADXDB6418"></a><div class="props_rev_3"><a id="GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6" name="GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6"></a><h3 id="ADXDB-GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6" class="sect3"><span class="enumeration_section">25.2</span> PL / SQL包DBMS_XDB_VERSION概述</h3>
               <div>
                  <p>您可以使用PL / SQL包<code class="codeph">DBMS_XDB_VERSION</code>来处理Oracle XML DB存储库资源版本。
                  </p>
                  <p><a href="resource-versions.html#GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6__G1044007" title="此表描述了DBMS_XDB_VERSION函数和过程，包括语法。它有两列。">表25-2</a>总结了主<code class="codeph">DBMS_XDB_VERSION</code>子程序。
                  </p>
                  <div class="tblformalwide" id="GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6__G1044007">
                     <p class="titleintable">表25-2包DBMS_XDB_VERSION中的PL / SQL函数和过程</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="包DBMS_XDB_VERSION中的PL / SQL函数和过程" width="100%" border="1" summary="This table describes DBMS_XDB_VERSION functions and procedures, including syntax. It has two columns." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d125986e326">功能或程序</th>
                              <th align="left" valign="bottom" width="72%" id="d125986e329">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e334" headers="d125986e326 ">
                                 <p><code class="codeph">makeVersioned（pathname VARCHAR2）RETURN DBMS_XDB_VERSION.RESID_TYPE;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e334 d125986e329 ">
                                 <p>将具有给定路径名的资源转换为版本控制的资源。</p>
                                 <p>如果两个或多个路径名称引用相同的资源，则复制资源，并将参数路径名称与该副本绑定。新资源受版本控制。所有其他路径名继续引用原始资源。</p>
                                 <p>参数是要置于版本控制下的资源的路径名。</p>
                                 <p>返回版本控制资源的第一个版本资源的资源ID。</p>
                                 <p>这不是自动提交SQL操作。如果文件夹，版本资源或ACL调用<code class="codeph">makeVersioned</code> ，或者目标资源不存在，则会引发错误。注意：如果为版本控制的资源调用<code class="codeph">makeVersioned</code> ，则不会引发错误或警告。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e356" headers="d125986e326 ">
                                 <p><code class="codeph">checkOut（pathname VARCHAR2）;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e356 d125986e329 ">
                                 <p>查看版本控制的资源。在签出之前，您无法更新或删除版本控制的资源。签出适用于所有用户：任何用户都可以修改已签出的资源。</p>
                                 <p>参数是要检出的版本控制资源的路径名。这不是自动提交SQL操作。如果两个用户同时签出相同的版本控制资源，则必须回滚一个用户。作为预防措施，请在签出后和更新资源之前提交。如果目标资源不受版本控制，不存在或已签出，则会引发错误。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e366" headers="d125986e326 ">
                                 <p><code class="codeph">checkIn（pathname VARCHAR2）RETURN DBMS_XDB_VERSION.RESID_TYPE;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e366 d125986e329 ">
                                 <p>签入已签出的版本控制资源。</p>
                                 <p><code class="codeph">pathname</code> - 签出资源的路径名。
                                 </p>
                                 <p>返回新创建的版本的资源ID。</p>
                                 <p>这不是自动提交SQL操作。您无需使用用于签出的相同路径名。但是，签入路径名称和签出路径名称必须引用相同的资源，否则结果是不可预测的。</p>
                                 <p>如果资源已重命名，则在签入时必须使用新名称。如果路径名称不引用资源，则会引发错误。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e384" headers="d125986e326 ">
                                 <p><code class="codeph">unCheckOut（pathname VARCHAR2）RETURN DBMS_XDB_VERSION.RESID_TYPE;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e384 d125986e329 ">
                                 <p>签入签出资源。</p>
                                 <p>参数是签出资源的路径名。</p>
                                 <p>在签出资源之前返回版本的资源ID。这不是自动提交SQL操作。您无需使用用于签出的相同路径名。但是， <code class="codeph">unCheckOut</code>路径名和签出路径名必须引用相同的资源，否则结果是不可预测的。
                                 </p>
                                 <p>如果资源已重命名，则必须将新名称用于<code class="codeph">unCheckOut</code> 。如果路径名称不引用资源，则会引发错误。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e404" headers="d125986e326 ">
                                 <p><code class="codeph">getPredecessors（pathname VARCHAR2）RETURN RESID_LIST_TYPE;</code></p>
                                 <p><code class="codeph">getPredsByRESID（resid DBMS_XDB_VERSION.RESID_TYPE）RETURN RESID_LIST_TYPE;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e404 d125986e329 ">
                                 <p>给定引用版本资源或版本控制资源的路径名，返回资源的前驱。</p>
                                 <p>通过资源ID检索前辈，使用功能<code class="codeph">getPredsByRESID</code>比由路径名更高效，使用功能<code class="codeph">getPredecessors</code> 。
                                 </p>
                                 <p>返回的前置列表只有一个元素（父元素）：Oracle XML DB不支持版本分支。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e425" headers="d125986e326 ">
                                 <p><code class="codeph">getSuccessors（pathname VARCHAR2）RETURN RESID_LIST_TYPE;</code></p>
                                 <p><code class="codeph">getSuccsByRESID（resid DBMS_XDB_VERSION.RESID_TYPE）RETURN RESID_LIST_TYPE;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e425 d125986e329 ">
                                 <p>给定版本资源或版本控制的资源，返回资源的后继者。</p>
                                 <p>通过资源ID检索接班人，使用功能<code class="codeph">getSuccsByRESID</code>比由路径名更高效，使用功能<code class="codeph">getSuccessors</code> 。
                                 </p>
                                 <p>返回的后继列表只有一个元素（父元素）：Oracle XML DB不支持版本分支。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e446" headers="d125986e326 ">
                                 <p><code class="codeph">getResourceByRESID（resid DBMS_XDB_VERSION.RESID_TYPE）RETURN XMLType;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e446 d125986e329 ">
                                 <p>给定资源ID，将资源作为<code class="codeph">XMLType</code>实例返回。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="resource-versions.html#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="可以对Oracle XML DB资源库资源进行版本控制。保留对受版本控制的资源的所有更改的记录。">资源版本</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5366"></a><div class="props_rev_3"><a id="GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD" name="GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD"></a><h3 id="ADXDB-GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD" class="sect3"><span class="enumeration_section">25.3</span>资源版本和资源ID</h3>
               <div>
                  <p>资源对象ID或<strong class="term">资源ID</strong>是<strong class="term">资源</strong>的唯一，常量，系统生成的标识符。每个资源都有一个资源ID。这包括<span class="italic">版本资源</span> ，它是系统生成的资源，没有任何路径名。资源ID有时称为<strong class="term">RESID</strong> 。</p>
                  <p>您可以使用PL / SQL包<code class="codeph">DBMS_XDB_VERSION</code>将资源置于版本控制之下并管理其不同版本。某些<code class="codeph">DBMS_XDB_VERSION</code>例程接受版本控制资源的路径名作为参数，并返回相关版本资源的资源ID。
                  </p>
                  <p>例如，您使用函数<code class="codeph">DBMS_XDB_VERSION.makeVersioned</code>将资源置于版本控制之下，即将其转换为版本控制的资源。它接受资源的存储库路径作为参数。
                  </p>
                  <p>当您对其执行各种版本控制操作时，不需要为给定的版本控制资源使用相同的路径名，但您使用的路径名必须全部引用相同的资源。</p>
                  <p>每当路径名称作为表示版本控制资源的参数传递时，它就是所使用资源的最新版本（即当前版本）。<span class="italic">路径名始终代表最新版本。</span> 您可以引用当前版本以外的版本的唯一方法是使用其资源ID。</p>
                  <p>给定版本的资源ID是常量。请记住，版本本身就是一种资源，资源的资源ID永远不会改变。</p>
                  <p>每次签入版本控制的资源时，Oracle XML DB都会创建新的版本资源。<strong class="term">版本资源</strong>是资源（其内容和元数据）的快照以及资源ID。给定版本控制资源的版本资源集合构成先前版本的历史序列， <strong class="term">版本系列</strong>或资源的历史。
                  </p>
                  <p>当您签入具有资源ID <span class="italic"><span class="bold">R</span></span>的版本控制资源时，Oracle XML DB会创建一个新资源ID <span class="italic"><span class="bold">P</span></span> ，它引用资源的快照（包括内容和元数据），就像上次检出之前一样。 。快照是在签出之前创建的，但关联的版本资源（及其资源ID <span class="italic"><span class="bold">P</span></span> ）是在签入时创建的。因此，新资源ID <span class="italic"><span class="bold">P</span></span>和它所引用的快照一起表示资源的<span class="italic">先前</span>版本而不是当前版本。资源ID <span class="italic"><span class="bold">R</span></span>继续引用当前版本。
                  </p>
                  <p>换句话说，当您签入版本控制的资源时，会创建一个版本资源，表示版本控制资源的先前状态。与任何新资源一样，此新版本资源被分配新资源ID（ <span class="italic"><span class="bold">P</span></span> ）。
                  </p>
                  <p>您可以考虑以编写文件备份副本的方式创建版本资源（签入）：就像您为备份文件指定新名称一样，以便为资源的先前版本快照提供一个新资源ID。当前资源保留原始资源ID，就像您的工作文件保留其原始名称一样。</p>
                  <p>这意味着当您签入资源时，为了“创建新版本”，真正新的是版本资源（资源ID <span class="italic"><span class="bold">P</span></span>和它引用的快照），它代表<span class="italic">旧的</span> （以前的）版本。资源（ <span class="italic"><span class="bold">R</span></span> ）的最新版本或最新版本实际上只是当前版本。请记住：新版本资源=旧（先前）版本的资源内容和元数据。
                  </p>
                  <p>资源ID <span class="italic"><span class="bold">R</span></span>指的是版本控制资源在其生命周期内的<span class="italic">当前</span>版本，从版本控制到删除之前的那一刻。您始终可以使用其原始资源ID访问资源的最新版本。</p>
                  <p>当您需要引用以前版本的资源时，必须使用其资源ID来引用它。您不能使用路径名。您可以使用函数<code class="codeph">DBMS_XDB_VERSION.getPredsByRESID</code>来获取给定资源的先前版本的资源ID。
                  </p>
                  <div class="infoboxnote" id="GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD__GUID-241556E2-8200-49B9-B00A-2380644DE469">
                     <p class="notep1">注意：</p>
                     <p>如果<span class="italic">删除</span>资源，则对资源ID或路径名的任何后续引用都会引发错误（通常为<code class="codeph">ORA-31001: Invalid resource handle or path name</code> ）。您<span class="italic">无法</span>访问已删除的任何版本的版本控制资源。
                     </p>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="resource-versions.html#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="可以对Oracle XML DB资源库资源进行版本控制。保留对受版本控制的资源的所有更改的记录。">资源版本</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5916"></a><div class="props_rev_3"><a id="GUID-6C753855-2EE2-4378-AE91-367FBE34B0EB" name="GUID-6C753855-2EE2-4378-AE91-367FBE34B0EB"></a><h3 id="ADXDB-GUID-6C753855-2EE2-4378-AE91-367FBE34B0EB" class="sect3"><span class="enumeration_section">25.4</span>资源版本和ACL</h3>
               <div>
                  <p>版本资源是不可变的。它是资源内容和元数据的快照，加上资源ID，快照和ID都是静态的。同样，不能更改版本资源的访问控制列表（ACL）。</p>
                  <p>您可以修改已签出的版本控制资源的ACL。签入时，修改后的ACL将继续与当前（最新）版本的资源相关联，并且先前版本（即新创建的版本资源）在修改之前与ACL关联。也就是说，先前版本与先前的ACL相关联，并且当前版本与更新的ACL相关联。</p>
                  <p>请记住，重要的是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>不同版本的资源可以具有与之关联的不同ACL。</p>
                     </li>
                     <li>
                        <p>签出资源后，您可以修改与当前版本关联的ACL。</p>
                     </li>
                     <li>
                        <p>签入将ACL在签出之前与新创建的版本资源相关联，即与先前版本的资源相关联。</p>
                     </li>
                     <li>
                        <p>与给定版本关联的ACL保持不变。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="resource-versions.html#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="可以对Oracle XML DB资源库资源进行版本控制。保留对受版本控制的资源的所有更改的记录。">资源版本</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5918"></a><a id="ADXDB5919"></a><a id="ADXDB5920"></a><a id="ADXDB5921"></a><a id="ADXDB5922"></a><a id="ADXDB5923"></a><a id="ADXDB5924"></a><a id="ADXDB5925"></a><a id="ADXDB5926"></a><a id="ADXDB5927"></a><a id="ADXDB5917"></a><div class="props_rev_3"><a id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8" name="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8"></a><h3 id="ADXDB-GUID-4CD63378-EF93-43E8-9F30-C263C53665D8" class="sect3"><span class="enumeration_section">25.5</span>资源版本控制示例</h3>
               <div>
                  <p>这里的示例创建一个版本控制的资源;使用其资源ID检索资源的内容;检查版本控制的资源（适用于所有用户）;更新资源的内容;检查资源;检索资源的不同版本的内容和元数据;并取消资源退房。</p>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将资源置于版本控制之下 - <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHGICDB">示例25-2</a></p>
                        </li>
                        <li>
                           <p>使用其资源ID检索资源的内容 - <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHCEAIJ">示例25-3</a></p>
                        </li>
                        <li>
                           <p>签出版本控制的资源（适用于所有用户） - <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJEAIE">示例25-4</a></p>
                        </li>
                        <li>
                           <p>更新资源的内容 - <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHDFBJF">示例25-5</a></p>
                        </li>
                        <li>
                           <p>签入资源 - <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEHBAF">例25-6</a></p>
                        </li>
                        <li>
                           <p>检索资源的不同版本的内容和元数据 - <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHHDEIE">例25-7</a> ， <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEGHEA">例25-8</a> ， <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJDGEC">例25-9</a></p>
                        </li>
                        <li>
                           <p>取消资源签出 - <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJFGED">例25-10</a></p>
                        </li>
                     </ul>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHCEAIJ">例25-3</a>在存储库路径<code class="codeph">/public/t1.txt</code>创建Oracle XML DB存储库资源。资源的内容是<code class="codeph">Mary had a little lamb</code>的文字。该示例使用SQL * Plus命令<code class="codeph">VARIABLE</code>声明绑定变量<code class="codeph">targetPath</code> ， <code class="codeph">current_RESID</code>和<code class="codeph">previous_RESID</code> ，这些变量在本节的其他示例中使用。
                     </p>
                     <p>新资源<span class="italic">不受</span>版本控制。<a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHGICDB">例25-2</a>使用PL / SQL函数<code class="codeph">DBMS_XDB_VERSION.makeVersioned</code>将其置于版本控制之下。此函数返回版本控制资源的第一个版本资源的资源ID。该功能不会自动提交。您必须明确使用<code class="codeph">COMMIT</code> 。</p>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHGICDB">例25-2</a>还复制新版本资源的资源ID以绑定变量<code class="codeph">current_RESID</code> 。 <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHCEAIJ">例25-3</a>显示了如何将PL / SQL构造函数<code class="codeph">XDBUritype</code>与PL / SQL函数<code class="codeph">createOIDPath</code>一起使用，以通过引用资源ID来检索资源内容。</p>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJEAIE">例25-4</a>检出版本控制的资源（和提交），以便可以修改它。任何用户都可以修改已签出的资源。
                     </p>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHDFBJF">例25-5</a>更新了签出资源的内容。在（LOB）内容可以更新之前，您必须锁定资源。该示例使用资源显示名称（标量属性）的虚拟更新来执行此操作。
                     </p>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHDFBJF">例25-5</a>使用LOB定位符检索LOB内容，该定位符是元素<code class="codeph">/ns:Resource/ns:XMLLob</code> 。它会清空现有的内容，并增加了使用PL / SQL程序的新内容<code class="codeph">trim</code>和<code class="codeph">append</code>包<code class="codeph">DBMS_LOB</code> 。它承诺内容的变化。
                     </p>
                     <div class="infoboxnotealso" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__GUID-230A62A6-5B8F-4FE9-B059-8FE617235077">
                        <p class="notep1">也可以看看：</p>
                        <p>有关更新LOB的信息，请<a href="../adlob/using-LOB-APIs.html#ADLOB1400" target="_blank"><span><cite>参见Oracle Database SecureFiles和Large Objects Developer's Guide</cite></span></a></p>
                     </div>
                     <p>此时，内容已被修改，但此更改尚未记录在版本系列中。<a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEHBAF">例25-6</a>检查资源并提交签入。
                     </p>
                     <p>PL / SQL函数<code class="codeph">checkIn</code>返回当前版本的资源ID，与<code class="codeph">current_RESID</code>相同。 <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEHBAF">例25-6</a>将此值传递给PL / SQL函数<code class="codeph">getPredsByRESID</code> 。此函数返回其参数资源的（直接）前任的资源ID列表。<a id="fn_1" name="fn_1" href="#fn_1" in="" oracle="" xml&nbsp;db,="" a="" version="" resource="" always="" has="" single="" predecessor,="" that="" is,="" immediately="" precedes="" it.="" the="" webdav="" standard="" provides="" for="" possibility="" of="" multiple="" predecessors=")" ="" onclick="footdisplay(1, "><sup>脚1</sup></a> <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEHBAF">示例25-6</a>将此列表的第一个（也是唯一的）元素分配给绑定变量<code class="codeph">previous_RESID</code> 。</p>
                     <p>在这一点上，价值<code class="codeph">current_RESID</code>是当前版本的资源ID，和值<code class="codeph">previous_RESID</code>是以前版本的资源ID。
                     </p>
                     <p>您可以使用以下任一方法检索资源的内容或元数据：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>PL / SQL构造函数<code class="codeph">XDBURIType</code> ，以及PL / SQL函数<code class="codeph">DBMS_XDB_REPOS.createOIDPath</code> - 检索内容。参见<a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHCEAIJ">例25-3</a>和<a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHHDEIE">例25-7</a> 。
                           </p>
                        </li>
                        <li>
                           <p>PL / SQL函数<code class="codeph">DBMS_XDB_VERSION.getContentsCLOBByRESID</code> - 检索内容。参见<a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEGHEA">例25-8</a> 。
                           </p>
                        </li>
                        <li>
                           <p>PL / SQL函数<code class="codeph">DBMS_XDB_VERSION.getResourceByRESID</code> - 检索元数据。参见<a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJDGEC">例25-9</a> 。
                           </p>
                        </li>
                     </ul>
                     <p>您可以使用<code class="codeph">XDBURIType</code>函数的构造函数<code class="codeph">createOIDPath</code>来使用协议访问资源内容。例如，您可以让Oracle XML DB为Web页面提供各种版本的图形图像文件资源，将HTML <code class="codeph">IMAGE</code>标记的<code class="codeph">HREF</code>设置为<code class="codeph">createOIDPath</code>返回的值。
                     </p>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHHDEIE">示例25-7</a>到<a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJDGEC">示例25-9</a>使用这些不同的方法检索签入后绑定变量<code class="codeph">current_RESID</code>和<code class="codeph">previous_RESID</code>寻址的资源的两个版本。
                     </p>
                     <p>您可以使用PL / SQL函数<code class="codeph">DBMS_XDB_VERSION.unCheckOut</code>取消签出。<a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJFGED">例25-10</a>说明了这一点。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__GUID-601BDDD5-C1E7-4D9B-BCF8-05E0F8C2E7EE">
                     <p class="titleinexample">示例25-1创建存储库资源</p><pre class="oac_no_warn" dir="ltr">VARIABLE <span class="bold">targetPath</span> VARCHAR2（700）VARIABLE <span class="bold">current_RESID</span> VARCHAR2（32）VARIABLE <span class="bold">previous_RESID</span> VARCHAR2（32）DECLARE res BOOLEAN; BEGIN：targetPath：='/ <span class="bold">public / t1.txt</span> '; IF（DBMS_XDB_REPOS.existsResource（：targetPath））那么DBMS_XDB_REPOS.deleteResource（：targetPath）;万一; res：= DBMS_XDB_REPOS。 <span class="bold">createResource</span> （：targetPath，' <span class="bold">Mary有一只小羊羔</span> '）;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHGICDB">
                     <p class="titleinexample">示例25-2创建受版本控制的资源</p><pre class="oac_no_warn" dir="ltr">DECLARE resid DBMS_XDB_VERSION.RESID_TYPE; BEGIN resid：= DBMS_XDB_VERSION。 <span class="bold">makeVersioned</span> （：targetPath）; ： <span class="bold">current_RESID</span> ：= resid; <span class="bold">COMMIT</span> ;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHCEAIJ">
                     <p class="titleinexample">示例25-3通过引用资源ID检索资源内容</p><pre class="oac_no_warn" dir="ltr">SELECT XDBURIType（DBMS_XDB_REPOS.createOIDPath（ <span class="bold">：current_RESID</span> ））。 <span class="bold">getClob</span> （）FROM DUAL; XDBURITYPE（DBMS_XDB_REPOS.CREATEOIDPATH（：CURRENT_RESID））。GETCLOB（）----------------------------------------------- -------------------玛丽选了一排小羊羔。
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJEAIE">
                     <p class="titleinexample">示例25-4检出版本控制的资源</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XDB_VERSION。 <span class="bold">checkOut</span> （：targetPath）; <span class="bold">COMMIT</span> ;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHDFBJF">
                     <p class="titleinexample">示例25-5更新资源内容</p><pre class="oac_no_warn" dir="ltr">DECLARE内容BLOB; newContentBlob BLOB; newContentClob CLOB; source_offset INTEGER：= 1; target_offset INTEGER：= 1;警告INTEGER; lang_context INTEGER：= 0; BEGIN <span class="bold">- 使用虚拟更新锁定资源。</span>UPDATE RESOURCE_VIEW SET RES = XMLQuery（'copy $ i：= $ p1 modify（$ i / Resource / <span class="bold">DisplayName中</span>的$ j返回节点$ j的值替换为$ p2）返回$ i'PASSING RES AS“p1”，XMLCast （XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource / ns： <span class="bold">DisplayName</span> / text（）'PASSING RES AS“r “返回内容”作为VARCHAR2（128））AS“p2”返回内容）WHERE equals_path（res，：targetPath）= 1; <span class="bold"> - 获取LOB定位器。</span>SELECT XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource / <span class="bold">ns：XMLLob'PASSING</span> RES <span class="bold">as</span> “r”RETURNING CONTENT）AS BLOB）INTO <span class="bold">内容</span> FROM RESOURCE_VIEW WHERE了equals_path（RES，：TARGETPATH）= 1; <span class="bold"> - 更新LOB。</span> newContentClob：=' <span class="bold">Hickory dickory dock，鼠标跑上了时钟</span> '; DBMS_LOB.createTemporary（newContentBlob，false，DBMS_LOB.CALL）; DBMS_LOB.convertToBlob（ <span class="bold">newContentBlob</span> ，newContentClob，DBMS_LOB.getLength（newContentClob），source_offset，target_offset，nls_charset_id（'AL32UTF8'），lang_context，warning）; DBMS_LOB.open（content，DBMS_LOB.lob_readwrite）; DBMS_LOB。 <span class="bold">修剪</span> （内容， <span class="bold">0</span> ）; DBMS_LOB.append（ <span class="bold">content</span> ， <span class="bold">newContentBlob</span> ）; DBMS_LOB.close（内容）; DBMS_LOB.freeTemporary（newContentBlob）; DBMS_LOB.freeTemporary（newContentClob）; <span class="bold">COMMIT</span> ;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEHBAF">
                     <p class="titleinexample">示例25-6检入受版本控制的资源</p><pre class="oac_no_warn" dir="ltr">DECLARE resid DBMS_XDB_VERSION.RESID_TYPE; BEGIN <span class="bold">渣油</span> ：= DBMS_XDB_VERSION。 <span class="bold">checkIn</span> （：targetPath）; ： <span class="bold">previous_RESID</span> ：= DBMS_XDB_VERSION。 <span class="bold">getPredsByRESID（</span> <span class="bold">渣油</span> ）（1）; <span class="bold">COMMIT</span> ;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHHDEIE">
                     <p class="titleinexample">示例25-7使用XDBURITYPE和CREATEOIDPATH检索资源版本内容</p><pre class="oac_no_warn" dir="ltr">SELECT XDBURIType（DBMS_XDB_REPOS.createOIDPath（ <span class="bold">：current_RESID</span> ））。getClob（）FROM DUAL; XDBURITYPE（DBMS_XDB_REPOS.CREATEOIDPATH（：CURRENT_RESID））。GETCLOB（）----------------------------------------------- -------------------玛丽选了一排小羊羔。SELECT XDBURIType（DBMS_XDB_REPOS.createOIDPath（ <span class="bold">：previous_RESID</span> ））。getClob（）FROM DUAL; XDBURITYPE（DBMS_XDB_REPOS.CREATEOIDPATH（：PREVIOUS_RESID））。GETCLOB（）----------------------------------------------- -------------------- Hickory dickory dock，鼠标跑了1排选中。</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEGHEA">
                     <p class="titleinexample">示例25-8使用GETCONTENTSCLOBBYRESID检索资源版本内容</p><pre class="oac_no_warn" dir="ltr">SELECT DBMS_XDB_VERSION.getContentsCLOBByRESID（ <span class="bold">：current_RESID</span> ）FROM DUAL; DBMS_XDB_VERSION.GETCONTENTSCLOBBYRESID（：CURRENT_RESID）------------------------------------------- ------------玛丽选了一只小羊1排。SELECT DBMS_XDB_VERSION.getContentsCLOBByRESID（ <span class="bold">：previous_RESID</span> ）FROM DUAL; DBMS_XDB_VERSION.GETCONTENTSCLOBBYRESID（：PREVIOUS_RESID）------------------------------------------- ------------- Hickory dickory dock，鼠标跑了1排选中。</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJDGEC">
                     <p class="titleinexample">示例25-9使用GETRESOURCEBYRESID检索资源版本元数据</p><pre class="oac_no_warn" dir="ltr">SELECT XMLSerialize（DOCUMENT DBMS_XDB_VERSION.getResourceByRESID（ <span class="bold">：current_RESID</span> ）AS CLOB INDENT SIZE = 2）FROM DUAL; &lt;Resource xmlns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”Hidden =“false”Invalid =“false” <span class="bold">VersionID =“2”</span> ActivityID =“0”Container =“false”CustomRslv =“false “VersionHistory =”false“StickyRef =”true“&gt; &lt;CreationDate&gt; 2009-05-06T12：33：34.012133 &lt;/ CreationDate&gt; &lt;ModificationDate&gt; 2009-05-06T12：33：34。 <span class="bold">280199</span> &lt;/ ModificationDate&gt; &lt;DisplayName&gt; t1.txt &lt;/ DisplayName&gt; &lt;Language&gt; zh-CN &lt;/ Language&gt; &lt;CharacterSet&gt; UTF-8 &lt;/ CharacterSet&gt; &lt;ContentType&gt; text / plain &lt;/ ContentType&gt; &lt;RefCount&gt; <span class="bold">1</span> &lt; / RefCount&gt; &lt;ACL&gt; &lt;acl description =“Public：PUBLIC的所有权限”xmlns =“http://xmlns.oracle.com/xdb/acl.xsd”xmlns：xsi =“http：//www.w3。 org / 2001 / XMLSchema-instance“xsi：schemaLocation =”http://xmlns.oracle.com/xdb/acl.xsd http://xmlns.oracle.com/xdb/acl.xsd“shared =”true“&gt; &lt;ace&gt; &lt;grant&gt; true &lt;/ grant&gt; &lt;principal&gt; PUBLIC &lt;/ principal&gt; &lt;privilege&gt; &lt;all /&gt; &lt;/ privilege&gt; &lt;/ ace&gt; &lt;/ acl&gt; &lt;/ ACL&gt; &lt;Owner&gt; HR &lt;/ Owner&gt; &lt;Creator&gt; HR &lt;/ Creator&gt; &lt;LastModifier&gt; HR &lt;/ LastModifier&gt; &lt;SchemaElement&gt; http://xmlns.oracle.com/xdb/XDBSchema.xsd#text &lt;/ SchemaElement&gt; &lt;Contents&gt; &lt;text&gt; <span class="bold">Mary有一点点lamb</span> &lt;/ text&gt; &lt;/ Contents&gt; &lt;VCRUID&gt; 69454F2EF12E3375E040578C8A1764B5 &lt;/ VCRUID&gt; <span class="bold">&lt;Parents&gt; 69454F2EF12F3375E040578C8A1764B5 &lt;/ Parents&gt;</span> &lt;/ Resource&gt;选择1行。SELECT XMLSerialize（DOCUMENT DBMS_XDB_VERSION.getResourceByRESID（ <span class="bold">：previous_RESID</span> ）AS CLOB INDENT SIZE = 2）FROM DUAL; &lt;Resource xmlns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”Hidden =“false”Invalid =“false” <span class="bold">VersionID =“1”</span> Container =“false”CustomRslv =“false”VersionHistory =“false “StickyRef =”true“&gt; &lt;CreationDate&gt; 2009-05-06T12：33：34.012133 &lt;/ CreationDate&gt; &lt;ModificationDate&gt; 2009-05-06T12：33：34。 <span class="bold">012133</span> &lt;/ ModificationDate&gt; &lt;DisplayName&gt; t1.txt &lt;/ DisplayName&gt; &lt;Language&gt; zh-CN &lt;/ Language&gt; &lt;CharacterSet&gt; UTF-8 &lt;/ CharacterSet&gt; &lt;ContentType&gt; text / plain &lt;/ ContentType&gt; &lt;RefCount&gt; <span class="bold">0</span> &lt; / RefCount&gt; &lt;ACL&gt; &lt;acl description =“Public：PUBLIC的所有权限”xmlns =“http://xmlns.oracle.com/xdb/acl.xsd”xmlns：xsi =“http：//www.w3。 org / 2001 / XMLSchema-instance“xsi：schemaLocation =”http://xmlns.oracle.com/xdb/acl.xsd http://xmlns.oracle.com/xdb/acl.xsd“shared =”true“&gt; &lt;ace&gt; &lt;grant&gt; true &lt;/ grant&gt; &lt;principal&gt; PUBLIC &lt;/ principal&gt; &lt;privilege&gt; &lt;all /&gt; &lt;/ privilege&gt; &lt;/ ace&gt; &lt;/ acl&gt; &lt;/ ACL&gt; &lt;Owner&gt; HR &lt;/ Owner&gt; &lt;Creator&gt; HR &lt;/ Creator&gt; &lt;LastModifier&gt; HR &lt;/ LastModifier&gt; &lt;SchemaElement&gt; http://xmlns.oracle.com/xdb/XDBSchema.xsd#text &lt;/ SchemaElement&gt; &lt;Contents&gt; &lt;text&gt; <span class="bold">Hickory dickory dock，鼠标按时间</span> &lt;/ text&gt; &lt;/ Contents&gt; &lt;VCRUID&gt; 69454F2EF12E3375E040578C8A1764B5 &lt;/ VCRUID&gt; &lt;/ Resource&gt;选择1行。
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJFGED">
                     <p class="titleinexample">示例25-10使用UNCHECKOUT取消签出</p><pre class="oac_no_warn" dir="ltr">DECLARE resid DBMS_XDB_VERSION.RESID_TYPE; BEGIN resid：= DBMS_XDB_VERSION。 <span class="bold">unCheckOut</span> （：targetPath）;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="resource-versions.html#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="可以对Oracle XML DB资源库资源进行版本控制。保留对受版本控制的资源的所有更改的记录。">资源版本</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <hr><br><p style="text-decoration:underline">脚注图例</p>脚注1：<p>在Oracle XML DB，版本资源总是有一个<span class="italic">单一的</span>前身，就是一个版本之前紧挨着它。WebDAV标准提供了多个前辈的可能性。
            </p><br></div>
      </article>
   </body>
</html>
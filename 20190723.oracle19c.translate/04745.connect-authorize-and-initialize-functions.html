<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Lists and describes connect, authorize, and initialize functions."></meta>
      <meta name="description" content="Lists and describes connect, authorize, and initialize functions."></meta>
      <title>连接，授权和初始化函数</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="Lists and describes connect, authorize, and initialize functions."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction-to-relational-functions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="handle-and-descriptor-functions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-relational-functions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="handle-and-descriptor-functions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-access-c-api.html" property="item" typeof="WebPage"><span property="name">Oracle数据库访问C API</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">连接，授权和初始化函数</li>
            </ol>
            <a id="GUID-8EDDA0CC-6755-49D8-89D0-81713E10B156" name="GUID-8EDDA0CC-6755-49D8-89D0-81713E10B156"></a><a id="LNOCI17106"></a><a id="LNOCI151"></a>
            
            <h2 id="LNOCI-GUID-8EDDA0CC-6755-49D8-89D0-81713E10B156" class="sect2"><span class="enumeration_section">25.2</span>连接，授权和初始化函数</h2>
         </header>
         <div class="ind">
            <div>
               <p>列出并描述连接，授权和初始化功能。</p>
               <div class="section">
                  <p><a href="introduction-to-relational-functions.html#GUID-346C6191-C882-415C-9C90-5389B29794C9__CIHGGCHE" title="该表有2列。第1列是参数的模式，第2列是其描述。">表25-1</a>描述了本节中描述的OCI连接，授权和初始化功能。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-8EDDA0CC-6755-49D8-89D0-81713E10B156__GUID-D8382654-059E-4AF9-B2D8-1274E14F9467">
                  <p class="titleintable">表25-2连接，授权和初始化函数</p>
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="连接，授权和初始化函数" width="100%" border="1" summary="This table has 2 columns. Column 1 is the OCI function name and column 2 describes its purpose. " frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="64%" id="d180810e215">功能</th>
                           <th align="left" valign="bottom" width="36%" id="d180810e218">目的</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e223" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E" title="清除应用程序上下文的命名空间中的所有属性值信息。">OCIAppCtxClearAll（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e223 d180810e218 ">
                              <p>清除应用程序上下文的命名空间中的所有属性值信息</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e235" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7" title="在应用程序上下文的命名空间中设置属性及其关联值。">OCIAppCtxSet（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e235 d180810e218 ">
                              <p>在应用程序上下文的命名空间中设置属性及其关联值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e247" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="初始化连接池。">OCIConnectionPoolCreate（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e247 d180810e218 ">
                              <p>初始化连接池</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e259" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2" title="销毁连接池。">OCIConnectionPoolDestroy（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e259 d180810e218 ">
                              <p>销毁连接池</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e271" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F" title="关闭Oracle数据库实例。">OCIDBShutdown（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e271 d180810e218 ">
                              <p>关闭Oracle数据库</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e283" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353" title="启动Oracle数据库实例。">OCIDBStartup（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e283 d180810e218 ">
                              <p>启动Oracle数据库实例</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e295" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="创建并初始化OCI函数的环境句柄。">OCIEnvCreate（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e295 d180810e218 ">
                              <p>创建并初始化OCI环境句柄</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e307" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e307 d180810e218 ">
                              <p>创建并初始化OCI函数的环境句柄。使您可以在创建环境时设置字符集ID和国家字符集ID。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e319" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" title="释放使用OCILogon2（）或OCILogon（）检索的会话。">OCILogoff（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e319 d180810e218 ">
                              <p>释放使用<code class="codeph">OCILogon2()</code>或<code class="codeph">OCILogon()</code>检索的会话</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e342" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6" title="创建一个简单的登录会话。">OCILogon（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e342 d180810e218 ">
                              <p>简化单会话登录</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e354" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e354 d180810e218 ">
                              <p>以各种模式创建登录会话</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e367" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04" title="在当前数据库请求期间禁用会话的应用程序连续性重播。">OCIRequestDisableReplay（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e367 d180810e218 ">
                              <p>在当前数据库请求期间禁用会话的应用程序连续性重播。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e378" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-B6291228-DA2F-4CE9-870A-F94243141757" title="为OCI操作创建数据源的访问路径。">OCIServerAttach（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e378 d180810e218 ">
                              <p>附加到服务器;初始化服务器上下文句柄</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e390" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564" title="删除OCI操作的数据源访问路径。">OCIServerDetach（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e390 d180810e218 ">
                              <p>从服务器分离; uninitialize服务器上下文句柄</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e402" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" title="创建用户会话并开始给定服务器的用户会话。">OCISessionBegin（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e402 d180810e218 ">
                              <p>验证用户</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e414" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F" title="终止由OCISessionBegin（）创建的用户会话上下文。">OCISessionEnd（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e414 d180810e218 ">
                              <p>终止用户会话</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e429" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e429 d180810e218 ">
                              <p>从会话池中获取会话</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e441" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="初始化会话池以与OCI会话池和数据库驻留连接池（DRCP）一起使用。">OCISessionPoolCreate（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e441 d180810e218 ">
                              <p>初始化会话池</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e453" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C" title="销毁会话池。">OCISessionPoolDestroy（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e453 d180810e218 ">
                              <p>销毁会话池</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e465" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" title="释放使用OCISessionGet（）检索的会话。">OCISessionRelease（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e465 d180810e218 ">
                              <p>发布会话</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="64%" id="d180810e480" headers="d180810e215 ">
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-B7BC5F9E-811C-490A-B308-472A12D690D2" title="从共享内存子系统中分离进程并释放共享内存。">OCITerminate（）</a></p>
                           </td>
                           <td align="left" valign="top" width="36%" headers="d180810e480 d180810e218 ">
                              <p>从共享内存子系统中分离</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
            </div><a id="LNOCI17107"></a><div class="props_rev_3"><a id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E" name="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E"></a><h3 id="LNOCI-GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E" class="sect3"><span class="enumeration_section">25.2.1</span> OCIAppCtxClearAll（）</h3>
               <div>
                  <p>清除应用程序上下文的命名空间中的所有属性值信息。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-F4F4AE5B-71AD-4365-ACA5-49051EB9EFFB">目的</p>
                     <p>清除应用程序上下文的命名空间中的所有属性值信息。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-8409F047-61E1-48FE-A6C5-96173C42FFBC">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIAppCtxClearAll（void * sesshndl，void * nsptr，ub4 nsptrlen，OCIError * errhp，ub4 mode;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-ECA692B8-7578-4007-A3CE-E16354BAF8F5">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-2DD347BA-FD29-4B22-AC8C-DA2FF3CDB7B4"><!-- --></a> sesshndl（IN / OUT）</dt>
                        <dd>
                           <p>指向会话句柄的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-11DD46BB-0C05-4E1F-93AE-E581EA203847"><!-- --></a> nsptr（IN）</dt>
                        <dd>
                           <p>指向命名空间字符串的指针（目前只有<code class="codeph">CLIENTCONTEXT</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-CDA5A105-2CD6-4443-8580-F0934F6E2E6F"><!-- --></a> nsptrlen（IN）</dt>
                        <dd>
                           <p>命名空间字符串的长度。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-FFDD549F-338B-4CD0-B807-3317B3625BFC"><!-- --></a> errhp（OUT）</dt>
                        <dd>
                           <p>可以传递给<code class="codeph">OCIErrorGet()</code>的错误句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-C1D4C737-5B29-4DA1-86FB-A4DA1F9E3B42"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>模式（ <code class="codeph">OCI_DEFAULT</code>是默认值）。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-6D565C89-7F36-4F2A-A010-7D1CA95FC4C8">返回</p>
                     <p>返回错误号。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-AAF765B7-1FD9-4BAB-9815-64775CACD705">评论</p>
                     <p>这将在下次调用服务器期间清除服务器端的上下文信息。在将信息发送到服务器之后，将从会话句柄中清除此命名空间信息，并且必要时必须再次设置该命名空间信息。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7" title="在应用程序上下文的命名空间中设置属性及其关联值。">OCIAppCtxSet（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17108"></a><div class="props_rev_3"><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7" name="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7"></a><h3 id="LNOCI-GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7" class="sect3"><span class="enumeration_section">25.2.2</span> OCIAppCtxSet（）</h3>
               <div>
                  <p>在应用程序上下文的命名空间中设置属性及其关联值。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-DE44F526-8DD7-4288-B492-96A7A24324AE">目的</p>
                     <p>在应用程序上下文的命名空间中设置属性及其关联值。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-0A7422FC-AFF4-41EC-9419-47ACF600BBBA">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIAppCtxSet（void * sesshndl，void * nsptr，ub4 nsptrlen，void * attrptr，ub4 attrptrlen，void * valueptr，ub4 valueptrlen，OCIError * errhp，ub4 mode）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-787FEFC6-82D9-46CB-9615-239C9CFCC1E3">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-AD66C9C5-1997-4803-9F08-8724C89C0B24"><!-- --></a> sesshndl（IN / OUT）</dt>
                        <dd>
                           <p>指向会话句柄的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-B100C238-E3CB-4890-AB46-664188AE2C18"><!-- --></a> nsptr（IN）</dt>
                        <dd>
                           <p>指向命名空间字符串的指针（目前只有<code class="codeph">CLIENTCONTEXT</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-2AD6892E-2D9A-4FC2-9703-DB4C18678800"><!-- --></a> nsptrlen（IN）</dt>
                        <dd>
                           <p>命名空间字符串的长度。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-FDA52C7A-5F4B-47A2-8F00-457055642D4E"><!-- --></a> attrptr（IN）</dt>
                        <dd>
                           <p>指向属性字符串的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-3F0C1AD7-C6B7-4C63-9C64-713065A87697"><!-- --></a> attrptrlen（IN）</dt>
                        <dd>
                           <p><code class="codeph">attrptr</code>指向的字符串的长度。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-A871F1EC-2473-470D-9496-0F125A87B385"><!-- --></a> valueptr（IN）</dt>
                        <dd>
                           <p>指向值字符串的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-4AB12887-03BD-4737-9693-38586B3614E1"><!-- --></a> valueptrlen（IN）</dt>
                        <dd>
                           <p><code class="codeph">valueptr</code>指向的字符串的长度。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-5DF124FC-7877-409B-85E2-5B47B78514C8"><!-- --></a> errhp（OUT）</dt>
                        <dd>
                           <p>可以传递给<code class="codeph">OCIErrorGet()</code>的错误句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-B1F05683-DD90-4F5B-B212-B1452CE2C1C6"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>模式（ <code class="codeph">OCI_DEFAULT</code>是默认值）。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-7D35C8CC-23C8-4D39-AA85-5C075C676774">返回</p>
                     <p>返回错误号。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-1158BD33-CAB4-4A7A-B702-317F1FCB7537">评论</p>
                     <p>在下次调用服务器期间，会话句柄上设置的信息将发送到服务器。</p>
                     <p>在将信息发送到服务器之后，将从会话句柄中清除此信息，并且必要时必须再次设置此信息。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E" title="清除应用程序上下文的命名空间中的所有属性值信息。">OCIAppCtxClearAll（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17109"></a><div class="props_rev_3"><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2"></a><h3 id="LNOCI-GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" class="sect3"><span class="enumeration_section">25.2.3</span> OCIConnectionPoolCreate（）</h3>
               <div>
                  <p>初始化连接池。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-8546A3EF-5C47-42FC-83D1-8903A7EC1DC0">目的</p>
                     <p>初始化连接池。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-01C3D0AD-7ED9-4CEF-836E-7701D1386E26">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIConnectionPoolCreate（OCIEnv * envhp，OCIError * errhp，OCICPool * poolhp，OraText ** poolName，sb4 * poolNameLen，const OraText * dblink，sb4 dblinkLen，ub4 connMin，ub4 connMax，ub4 connIncr，const OraText * poolUsername，sb4 poolUserLen，const OraText * poolPassword，sb4 poolPassLen，ub4 mode）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-83E93B39-A623-45B8-A030-B05FEF58A826">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-28960CEC-68D6-4E2C-9A81-34FA73A0FEB0"><!-- --></a> envhp（IN）</dt>
                        <dd>
                           <p>指向要创建连接池的环境的指针</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-C111F029-ABA4-418C-9635-3077505C6566"><!-- --></a> errhp（输入/输出）</dt>
                        <dd>
                           <p>可以传递给<code class="codeph">OCIErrorGet()</code>的错误句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-1B81F55E-BA03-4DA1-BA3A-4F4FCC89373C"><!-- --></a> poolhp（IN）</dt>
                        <dd>
                           <p>已分配的池句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-6090C464-8E2D-4E13-BF54-FEB63A5E2085"><!-- --></a> poolName（OUT）</dt>
                        <dd>
                           <p>连接到的连接池的名称。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-7812004E-D83D-4524-9D39-3B04C46D739C"><!-- --></a> poolNameLen（OUT）</dt>
                        <dd>
                           <p><code class="codeph">poolName</code>指向的字符串的长度。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-4707E6D0-6291-4D46-A891-3B812E98CCAC"><!-- --></a> dblink（IN）</dt>
                        <dd>
                           <p>指定要连接的数据库（服务器）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-3D40950B-000D-4710-83FC-32591E1D9B1B"><!-- --></a> dblinkLen（IN）</dt>
                        <dd>
                           <p><code class="codeph">dblink</code>指向的字符串的长度。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-7477ACB4-8A48-4B19-8B46-3B763BB06B10"><!-- --></a> connMin（IN）</dt>
                        <dd>
                           <p>指定连接池中的最小连接数。有效值为0和更高。</p>
                           <p>这些连接由<code class="codeph">OCIConnectionPoolCreate()</code>打开到服务器。创建连接池后，仅在必要时才打开连接。通常，此参数应设置为应用程序正在计划或期望运行的并发语句数。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-08953B26-2AC1-41C3-9C7C-BEB48322BE3E"><!-- --></a> connMax（IN）</dt>
                        <dd>
                           <p>指定可以打开到数据库的最大连接数。达到此值后，将不再打开任何连接。有效值为1和更高。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-CC675B74-5858-4F01-B825-BB800C2716E6"><!-- --></a> connIncr（IN）</dt>
                        <dd>
                           <p>如果当前连接数小于<code class="codeph">connMax</code> ，则允许应用程序设置要打开到数据库的连接的下一个增量。有效值为0和更高。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-69B46F9D-C74B-4113-BAC7-C0BCB24790E4"><!-- --></a> poolUsername（IN）</dt>
                        <dd>
                           <p>连接池需要隐式主会话。此属性提供该会话的用户名。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-B1D30819-8BD4-4605-B52C-73CC59C8FF16"><!-- --></a> poolUserLen（IN）</dt>
                        <dd>
                           <p><code class="codeph">poolUsername</code>的长度。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-8FA1760E-142B-4F73-BE53-692D0040521B"><!-- --></a> poolPassword（IN）</dt>
                        <dd>
                           <p>用户名<code class="codeph">poolUsername</code>的密码。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-4F77A693-10EF-4CF7-ACDD-73B173C5BFC5"><!-- --></a> poolPassLen（IN）</dt>
                        <dd>
                           <p><code class="codeph">poolPassword</code>的长度。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-9E35A6BC-3056-48FD-A0A0-4C8482EC4D5A"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>支持的模式是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_CPOOL_REINITIALIZE</code></p>
                        </li>
                     </ul>
                     <p>通常，在<code class="codeph">mode</code>设置为<code class="codeph">OCI_DEFAULT</code> <code class="codeph">mode</code>调用<code class="codeph">OCIConnectionPoolCreate()</code> 。</p>
                     <p>要动态更改池属性（例如，更改<code class="codeph">connMin</code> ， <code class="codeph">connMax</code>和<code class="codeph">connIncr</code>参数），请调用<code class="codeph">mode</code>设置为<code class="codeph">OCI_CPOOL_REINITIALIZE</code> <code class="codeph">OCIConnectionPoolCreate()</code> 。完成此操作后，将忽略其他参数。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-DBBD717B-14DD-40AD-9559-85FF6763CE24">评论</p>
                     <p>OUT参数<code class="codeph">poolName</code>和<code class="codeph">poolNameLen</code>包含要在后续<code class="codeph">OCIServerAttach()</code>和<code class="codeph">OCILogon2()</code>调用中使用的值，以代替数据库名称和数据库名称长度参数。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2" title="销毁连接池。">OCIConnectionPoolDestroy（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-B6291228-DA2F-4CE9-870A-F94243141757" title="为OCI操作创建数据源的访问路径。">OCIServerAttach（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                        <li><a href="handle-and-descriptor-attributes.html#GUID-400B741C-E4AA-4155-8279-09FD80A6B38F" title="列出并描述连接池句柄属性。">连接池句柄属性</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17110"></a><div class="props_rev_3"><a id="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2" name="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2"></a><h3 id="LNOCI-GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2" class="sect3"><span class="enumeration_section">25.2.4</span> OCIConnectionPoolDestroy（）</h3>
               <div>
                  <p>销毁连接池。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2__GUID-1E4A07E2-02AA-4F80-8E82-0A5F53599097">目的</p>
                     <p>销毁连接池。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2__GUID-4365268C-37FE-4E81-9F50-41D58832E45D">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIConnectionPoolDestroy（OCICPool * poolhp，OCIError * errhp，ub4模式）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2__GUID-CDCB5920-F400-464C-A8B9-CEFD28254F1C">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2__GUID-47E40011-4A42-465C-A6CD-A74F92DF1AEE"><!-- --></a> poolhp（IN）</dt>
                        <dd>
                           <p>已为其创建池的池句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2__GUID-1D920F87-D87A-4014-A528-9FDD657ADF58"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>
                           <p>可以传递给<code class="codeph">OCIErrorGet()</code>的错误句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2__GUID-1E2262D7-0D1E-4220-9992-775F4B821FB1"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>目前，此功能仅支持<code class="codeph">OCI_DEFAULT</code>模式。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="初始化连接池。">OCIConnectionPoolCreate（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17111"></a><div class="props_rev_3"><a id="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F" name="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F"></a><h3 id="LNOCI-GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F" class="sect3"><span class="enumeration_section">25.2.5</span> OCIDBShutdown（）</h3>
               <div>
                  <p>关闭Oracle数据库实例。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-A81F07D2-B8F7-459C-85ED-4A6AF30E9760">目的</p>
                     <p>关闭Oracle数据库实例。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-6F403944-0D53-42F5-9251-0451B05CAFF0">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIDBShutdown（OCISvcCtx * svchp，OCIError * errhp，OCIAdmin * admhp，ub4模式）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-D697FCEA-BD9D-461D-8C20-EABC07809EE7">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-1EEF1442-2E8D-41B3-B21B-6C986A15EF4E"><!-- --></a> svchp（IN）</dt>
                        <dd>
                           <p>服务上下文的句柄。在<code class="codeph">svchp</code>必须设置有效的服务器句柄和有效的用户句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-82532D95-332B-4FC8-89DA-7E99B64EDE5D"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>
                           <p>出现错误时可以传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息的错误句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-725AFA1E-F5D1-40BA-9E19-2DBB489B24F8"><!-- --></a> admhp（IN） - 可选</dt>
                        <dd>
                           <p>实例管理句柄。目前未使用;通过<code class="codeph">(OCIAdmin *)0</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-CA13DCAB-63A4-4442-8D9D-1BBF982B0EE5"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p><code class="codeph">OCI_DEFAULT</code> - 禁止进一步连接。等待用户断开与数据库的连接。
                           </p>
                           <p><code class="codeph">OCI_DBSHUTDOWN_TRANSACTIONAL</code> - 禁止进一步连接，不允许新的交易。等待活动交易完成。
                           </p>
                           <p><code class="codeph">OCI_DBSHUTDOWN_TRANSACTIONAL_LOCAL</code> - 禁止进一步连接，不允许新的交易。仅等待本地事务完成。
                           </p>
                           <p><code class="codeph">OCI_DBSHUTDOWN_IMMEDIATE</code> - 不等待当前调用完成或用户断开与数据库的连接。所有未提交的事务都将终止并回滚。
                           </p>
                           <p><code class="codeph">OCI_DBSHUTDOWN_FINAL</code> - 关闭数据库。应该只在数据库关闭和卸载后第二次调用<code class="codeph">OCIDBShutdown()</code> 。
                           </p>
                           <p><code class="codeph">OCI_DBSHUTDOWN_ABORT</code> - 不等待当前调用完成或用户断开与数据库的连接。所有未提交的事务都将终止并且不会回滚。这是关闭数据库的最快方法，但下一次数据库启动可能需要实例恢复。因此，此选项仅应在特殊情况下使用;例如，如果后台进程异常终止。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-C171C0D5-19BF-47A5-9D44-9FA00235EB5C">评论</p>
                     <p>要执行关闭，必须以<code class="codeph">SYSOPER</code>或<code class="codeph">SYSDBA</code>身份连接到数据库。您无法通过调度程序连接到共享服务器。在<code class="codeph">OCI_DBSHUTDOWN_ABORT</code>以外的任何模式下关闭时，请使用以下过程：</p>
                     <ol>
                        <li>
                           <p>在<code class="codeph">OCI_DEFAULT</code> ， <code class="codeph">OCI_DBSHUTDOWN_TRANSACTIONAL</code> ， <code class="codeph">OCI_DBSHUTDOWN_TRANSACTIONAL_LOCAL</code>或<code class="codeph">OCI_DBSHUTDOWN_IMMEDIATE</code>模式中调用<code class="codeph">OCIDBShutdown()</code>以禁止进一步连接。
                           </p>
                        </li>
                        <li>
                           <p>发出必要的<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>命令以关闭和卸载数据库。
                           </p>
                        </li>
                        <li>
                           <p>在<code class="codeph">OCI_DBSHUTDOWN_FINAL</code>模式下调用<code class="codeph">OCIDBShutdown()</code>以关闭实例。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353" title="启动Oracle数据库实例。">OCIDBStartup（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                        <li><a href="database-startup-and-shutdown.html#GUID-67B6BF3A-780A-49A9-857C-19DB008FFAB6" title="本章介绍有关OCI数据库启动和关闭的主题。">数据库启动和关闭</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17112"></a><div class="props_rev_3"><a id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353" name="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353"></a><h3 id="LNOCI-GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353" class="sect3"><span class="enumeration_section">25.2.6</span> OCIDBStartup（）</h3>
               <div>
                  <p>启动Oracle数据库实例。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-AA3F458B-1A41-4FE3-A38F-8F103E22959F">目的</p>
                     <p>启动Oracle数据库实例。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-CDF15826-7BB2-4E3D-8C1B-34E1340FCCAD">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIDBStartup（OCISvcCtx * svchp，OCIError * errhp，OCIAdmin * admhp，ub4模式，ub4标志）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-1EF91C8F-4577-4C06-A22A-E802347E049E">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-B556B458-932B-4BA4-A913-C17F3D855D05"><!-- --></a> svchp（IN）</dt>
                        <dd>
                           <p>服务上下文的句柄。在<code class="codeph">svchp</code>必须设置有效的服务器句柄和用户句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-3279071E-5EBA-4351-913E-D18032EA5574"><!-- --></a> errhp（输入/输出）</dt>
                        <dd>
                           <p>出现错误时可以传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息的错误句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-A6DD4313-CB20-4924-A762-42A88D3F517A"><!-- --></a> admhp（IN） - 可选</dt>
                        <dd>
                           <p>实例管理句柄。用于将其他参数传递给启动调用，或者如果未设置<code class="codeph">OCI_ATTR_ADMIN_PFILE</code>则传递<code class="codeph">(OCIAdmin *)0</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-69A7B5F1-F402-4A76-A29F-43DBF276E0F4"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p><code class="codeph">OCI_DEFAULT</code> - 这是唯一支持的模式。它启动实例，但不安装或打开数据库。与<code class="codeph">STARTUP</code> <code class="codeph">NOMOUNT</code>相同。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-25E3904E-9C27-44FB-A262-204BD4508A14"><!-- --></a>标志（IN）</dt>
                        <dd>
                           <p><code class="codeph">OCI_DEFAULT</code> - 允许所有用户访问数据库。
                           </p>
                           <p><code class="codeph">OCI_DBSTARTUPFLAG_RESTRICT</code> - 仅允许具有<code class="codeph">CREATE</code> <code class="codeph">SESSION</code>和<code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code>权限（通常是DBA）的用户访问数据库。
                           </p>
                           <p><code class="codeph">OCI_DBSTARTUPFLAG_FORCE</code> - 在开始新实例之前使用<code class="codeph">ABORT</code>关闭正在运行的实例（如果有的话）。此模式仅应在特殊情况下使用。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-55BAEC84-EF26-41FA-9C7A-27F70CB0A41C">评论</p>
                     <p>您必须以<code class="codeph">OCI_PRELIM_AUTH</code>模式作为<code class="codeph">SYSOPER</code>或<code class="codeph">SYSDBA</code>连接到数据库。您无法通过调度程序连接到共享服务器（即，使用<code class="codeph">OCI_DBSTARTUPFLAG_FORCE</code>重新启动正在运行的实例时）。要使用客户端参数文件（ <code class="codeph">pfile</code> ），必须在管理句柄中设置<code class="codeph">OCI_ATTR_ADMIN_PFILE</code> ;否则，使用服务器端参数文件（ <code class="codeph">spfile</code> ）。对<code class="codeph">OCIDBStartup()</code>调用会在服务器上启动一个实例。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F" title="关闭Oracle数据库实例。">OCIDBShutdown（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-B6291228-DA2F-4CE9-870A-F94243141757" title="为OCI操作创建数据源的访问路径。">OCIServerAttach（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" title="创建用户会话并开始给定服务器的用户会话。">OCISessionBegin（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                        <li><a href="database-startup-and-shutdown.html#GUID-67B6BF3A-780A-49A9-857C-19DB008FFAB6" title="本章介绍有关OCI数据库启动和关闭的主题。">数据库启动和关闭</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI7016"></a><div class="props_rev_3"><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244"></a><h3 id="LNOCI-GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" class="sect3"><span class="enumeration_section">25.2.7 OCIEnvCreate</span> （）</h3>
               <div>
                  <p>创建并初始化OCI函数的环境句柄。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-90FA60D6-ED79-4E24-8FC2-1CB15F9F05F4">目的</p>
                     <p>创建并初始化OCI函数的环境句柄。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-4F78FAB3-7D25-4A90-802A-574CB84E0C76">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIEnvCreate（OCIEnv ** envhpp，ub4模式，const void * ctxp，const void *（* malocfp）（void * ctxp，size_t size），const void *（* ralocfp）（void * ctxp，void * memptr，size_t newsize ），const void（* mfreefp）（void * ctxp，void * memptr））size_t xtramemsz，void ** usrmempp）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-D385B978-697E-4620-B0B3-6C2672EF9110">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-F2619050-1770-40B6-A950-B6AEFC9F8AC4"><!-- --></a> <span class="bold">envhpp</span> （OUT）</dt>
                        <dd>
                           <p>指向环境句柄的指针，其编码设置由<code class="codeph">mode</code>指定。该设置由从<code class="codeph">envhpp</code>派生的语句句柄继承。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-1EE83EAF-7464-44AD-847F-EE94C2C5ECD1"><!-- --></a> <span class="bold">模式</span> （IN）</dt>
                        <dd>
                           <p>指定模式的初始化。有效模式是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code> - 默认值，即非<code class="codeph">UTF-16</code>编码。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_THREADED</code> - 使用线程环境。不向用户公开的内部数据结构受到多线程的并发访问的保护。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_OBJECT</code> - 使用对象功能。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_EVENTS</code> - 使用发布 - 订阅通知。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_NO_UCB</code> - 禁止调用动态回调例程<code class="codeph">OCIEnvCallback()</code> 。默认行为是允许在创建环境时调用<code class="codeph">OCIEnvCallback()</code> 。
                           </p>
                           <div class="infoboxnotealso" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-71EC62B6-F6C7-48B5-9A73-F0916F8864EB">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="user-defined-callback-functions.html#GUID-C1E8C023-F0D4-4C0A-8585-DA6CCA0DDF65" title="因为期望用户回调用于监视OCI行为或访问其他数据源，所以希望回调的注册是透明且非侵入地完成的。">动态回拨注册</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_ENV_NO_MUTEX</code> - 在此模式下不会发生互斥（互斥）锁定。必须序列化在环境句柄或从环境句柄派生的句柄上完成的所有OCI调用。<code class="codeph">OCI_THREADED</code>时，也必须指定<code class="codeph">OCI_ENV_NO_MUTEX</code>指定。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SUPPRESS_NLS_VALIDATION</code> - 禁止NLS字符验证;默认情况下，NLS字符验证抑制从Oracle Database <span class="italic">11g</span>第1版（11.1）开始。使用<code class="codeph">OCI_ENABLE_NLS_VALIDATION</code>启用NLS字符验证。有关更多信息，请参阅注释
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_NEW_LENGTH_SEMANTICS</code> - 无论字符集如何，字节长度语义都一致地用于所有句柄。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_NCHAR_LITERAL_REPLACE_ON</code> - 打开N'替换。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_NCHAR_LITERAL_REPLACE_OFF</code> - 关闭N'替换。如果既不使用此模式也不使用<code class="codeph">OCI_NCHAR_LITERAL_REPLACE_ON</code> ，则替换由环境变量<code class="codeph">ORA_NCHAR_LITERAL_REPLACE</code>确定，该变量可以设置为<code class="codeph">TRUE</code>或<code class="codeph">FALSE</code> 。当它设置为<code class="codeph">TRUE</code> ，更换打开;否则它被关闭，这是OCI中的默认设置。</p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> - 启用NLS字符验证。有关更多信息，请参阅注释
                           </p>
                        </li>
                     </ul>
                     <dl>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-7FE4D493-BBC4-41B4-9A13-AFA72DA31657"><!-- --></a> ctxp（IN）</dt>
                        <dd>
                           <p>指定内存回调例程的用户定义上下文。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-B32089CF-6CC7-47E4-A44F-990B593C40DD"><!-- --></a> malocfp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存分配函数。如果mode为<code class="codeph">OCI_THREADED</code> ，则此内存分配例程必须是线程安全的。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-13E20489-6DF5-4EF1-85F9-C0AD5D07BFA1"><!-- --></a> ctxp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存分配函数的上下文指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-13D23EEF-758B-4FF4-AABA-B997A5173411"><!-- --></a>尺寸（IN）</dt>
                        <dd>
                           <p>指定由用户定义的内存分配函数分配的内存大小。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-EF7ADEA6-E921-424B-BFAE-36438B6844FC"><!-- --></a> ralocfp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存重新分配功能。如果模式为<code class="codeph">OCI_THREADED</code> ，则此内存分配例程必须是线程安全的。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-491AE4E2-EC2C-47D2-9BB8-D91DB6D35FD7"><!-- --></a> ctxp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存重新分配函数的上下文指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-DB35B446-8A36-4876-8CC3-22B2D06605AD"><!-- --></a> memptr（IN）</dt>
                        <dd>
                           <p>指向内存块的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-E0182A7F-EA48-4589-916B-22DD399F91C6"><!-- --></a>新闻（IN）</dt>
                        <dd>
                           <p>指定要分配的新内存大小。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-AB1874D0-1D0E-4069-9F4D-65D024449604"><!-- --></a> mfreefp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存自由函数。如果模式为<code class="codeph">OCI_THREADED</code> ，则此无内存例程必须是线程安全的。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-84382D08-A2B4-4F83-AAB0-EBCC63FF139A"><!-- --></a> ctxp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存自由函数的上下文指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-45E6995A-0B42-4876-A725-4A3002BDAB5C"><!-- --></a> memptr（IN）</dt>
                        <dd>
                           <p>指向要释放的内存的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-45143402-5A6F-4D2A-A771-32AABF07CAE7"><!-- --></a> <span class="bold">xtramemsz</span> （IN）</dt>
                        <dd>
                           <p>指定在环境持续时间内分配的用户内存量。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-3EBFDDD5-F685-40EF-A5C8-CC78EE365F06"><!-- --></a> <span class="bold">usrmempp</span> （OUT）</dt>
                        <dd>
                           <p>返回指向由用户调用分配的大小<code class="codeph">xtramemsz</code>的用户内存的指针。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-A3DF672B-65EB-494D-9FDC-3F05FFF9A2AB">评论</p>
                     <p>此调用使用用户指定的模式为所有OCI调用创建环境。</p>
                     <div class="infoboxnote" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-84B4C3B8-31F0-4FE3-847D-A5F7A56B1ED5">
                        <p class="notep1">注意：</p>
                        <p>应该在任何其他OCI调用之前调用此调用，并且应该使用该调用而不是<code class="codeph">OCIInitialize()</code>调用。
                        </p>
                     </div>
                     <p>此调用返回一个环境句柄，然后由剩余的OCI函数使用。OCI中可以有多个环境，每个环境都有自己的环境模式。如果任何模式需要，此函数还执行任何进程级初始化。例如，如果要将环境初始化为<code class="codeph">OCI_THREADED</code> ，则OCI使用的所有库也将以线程模式初始化。
                     </p>
                     <p>如果打开N'替换，则<code class="codeph">OCIStmtPrepare2()</code>函数对SQL文本执行N'替换，并将生成的SQL文本存储在语句句柄中。因此，如果应用程序使用<code class="codeph">OCI_ATTR_STATEMENT</code>从OCI语句句柄检索SQL文本，则返回修改后的SQL文本而不是原始SQL文本。
                     </p>
                     <p>要在<code class="codeph">ksh</code> shell中启用N'替换：</p><pre class="oac_no_warn" dir="ltr">export ORA_NCHAR_LITERAL_REPLACE = TRUE</pre><p>要在<code class="codeph">csh</code> shell中启用N'替换：</p><pre class="oac_no_warn" dir="ltr">setenv ORA_NCHAR_LITERAL_REPLACE TRUE</pre><p>如果远程数据库是10.2之前的版本，则不执行N'替换。</p>
                     <p>如果使用OCI库编写DLL或共享库，则使用此调用而不是不推荐的<code class="codeph">OCIInitialize()</code>调用。
                     </p>
                     <div class="infoboxnotealso" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-2305664D-B172-4DB1-9BD8-247ED4E3AB05">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="oci-programming-basics.html#GUID-394C2CED-C264-4F81-BD97-CCF9F149CC4C" title="OCIDescriptorAlloc（）调用在其参数列表中有一个xtramem_sz参数。">用户内存分配</a> ”</span> ，了解有关<code class="codeph">xtramemsz</code>参数和用户内存分配的更多信息</p>
                     </div>
                     <p>关于<code class="codeph">OCI_SUPPRESS_NLS_VALIDATION</code>和<code class="codeph">OCI_ENABLE_NLS_VALIDATION</code>模式，默认情况下，当客户端和服务器字符集相同且客户端和服务器版本都是Oracle Database <span class="italic">11g</span>第1版（11.1）或更高版本时，OCI不会为了更好的性能验证字符数据。这意味着如果应用程序插入具有部分多字节字符的字符串（例如，在绑定变量的末尾），则此类字符串可以按原样保留在数据库中。
                     </p>
                     <p>请注意，如果客户端或服务器版本早于Oracle Database <span class="italic">11g</span>第1版（11.1），则OCI不允许部分字符。
                     </p>
                     <p><code class="codeph">OCI_ENABLE_NLS_VALIDATION</code>模式是Oracle Database <span class="italic">10g</span>第2版（10.2）之前的默认模式，可确保数据库中不存在部分多字节字符（当客户端和服务器字符集相同时）。如果应用程序可以生成部分多字节字符，并且应用程序可以在客户端和服务器字符集相同的环境中运行，则Oracle建议明确使用<code class="codeph">OCI_ENABLE_NLS_VALIDATION</code>模式，以确保删除此类部分字符。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-9B4D9BB0-1FE6-46FA-ABED-5DCC7D873C1D">例</p>
                     <p>打开N'替换创建线程安全的OCI环境</p><pre class="oac_no_warn" dir="ltr">OCIEnv * envhp; .../ *创建一个线程安全的OCI环境，打开N'替换。* / if（OCIEnvCreate（（OCIEnv **）＆envhp，（ub4）OCI_THREADED | OCI_NCHAR_LITERAL_REPLACE_ON，（void *）0，（void *（*）（void *，size_t））0，（void *（*）（void * ，void *，size_t））0，（void（*）（void *，void *））0，（size_t）0，（void **）0））{printf（“Failed：OCIEnvCreate（）\ n”） ;返回1; } ...</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-E87E9F91-D3DC-4F35-BE7C-F1EFBFEEBA0A" title="显式释放句柄">OCIHandleFree（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-B7BC5F9E-811C-490A-B308-472A12D690D2" title="从共享内存子系统中分离进程并释放共享内存。">OCITerminate（）</a></li>
                        <li><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="准备SQL或PL / SQL语句以便执行。">OCIStmtPrepare2（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17114"></a><div class="props_rev_3"><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9"></a><h3 id="LNOCI-GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" class="sect3"><span class="enumeration_section">25.2.8</span> OCIEnvNlsCreate（）</h3>
               <div>
                  <p>创建并初始化OCI函数的环境句柄。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-9E93CA2E-1F0B-408A-9BAE-3C7EE971B489">目的</p>
                     <p>此函数是<code class="codeph">OCIEnvCreate()</code>函数的增强版本。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-266036A5-FB11-48BE-9B36-6B2D96E2A645">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIEnvNlsCreate（OCIEnv ** envhpp，ub4模式，void * ctxp，void *（* malocfp）（void * ctxp，size_t size），void *（* ralocfp）（void * ctxp，void * memptr，size_t newsize），void （* mfreefp）（void * ctxp，void * memptr））size_t xtramemsz，void ** usrmempp ub2 charset，ub2 ncharset）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-4FA74DE5-45AF-4620-885A-E7F54FB1F3C1">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-8F76143F-1627-45AE-A001-AA407211C74C"><!-- --></a> <span class="bold">envhpp</span> （OUT）</dt>
                        <dd>
                           <p>指向环境句柄的指针，其编码设置由<code class="codeph">mode</code>指定。该设置由从<code class="codeph">envhpp</code>派生的语句句柄继承。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-046F1313-D272-4A5C-8C86-BEAD78069916"><!-- --></a> <span class="bold">模式</span> （IN）</dt>
                        <dd>
                           <p>指定模式的初始化。有效模式是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code> - 默认值，即非<code class="codeph">UTF-16</code>编码。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_THREADED</code> - 使用线程环境。不向用户公开的内部数据结构受到多线程的并发访问的保护。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_OBJECT</code> - 使用对象功能。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_EVENTS</code> - 使用发布 - 订阅通知。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_NO_UCB</code> - 禁止调用动态回调例程<code class="codeph">OCIEnvCallback()</code> 。默认行为是允许在创建环境时调用<code class="codeph">OCIEnvCallback()</code> 。
                           </p>
                           <div class="infoboxnotealso" id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-50FFF252-4126-44DE-AF21-2E9E4714752B">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="user-defined-callback-functions.html#GUID-C1E8C023-F0D4-4C0A-8585-DA6CCA0DDF65" title="因为期望用户回调用于监视OCI行为或访问其他数据源，所以希望回调的注册是透明且非侵入地完成的。">动态回拨注册</a></p>
                           </div>
                        </li>
                     </ul>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_ENV_NO_MUTEX</code> - 在此模式下不会发生互斥（互斥）锁定。必须序列化在环境句柄或从环境句柄派生的句柄上完成的所有OCI调用。<code class="codeph">OCI_THREADED</code>时，也必须指定<code class="codeph">OCI_ENV_NO_MUTEX</code>指定。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SUPPRESS_NLS_VALIDATION</code> - 禁止NLS字符验证;默认情况下，NLS字符验证抑制从Oracle Database <span class="italic">11g</span>第1版（11.1）开始。使用<code class="codeph">OCI_ENABLE_NLS_VALIDATION</code>启用NLS字符验证。有关更多信息，请参阅注释
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_NCHAR_LITERAL_REPLACE_ON</code> - 打开N'替换。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_NCHAR_LITERAL_REPLACE_OFF</code> - 关闭N'替换。如果既不使用此模式也不使用<code class="codeph">OCI_NCHAR_LITERAL_REPLACE_ON</code> ，则替换由环境变量<code class="codeph">ORA_NCHAR_LITERAL_REPLACE</code>确定，该变量可以设置为<code class="codeph">TRUE</code>或<code class="codeph">FALSE</code> 。当它设置为<code class="codeph">TRUE</code> ，更换打开;否则它将被关闭，这是OCI中的默认设置。</p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> - 启用NLS字符验证。有关更多信息，请参阅注释
                           </p>
                        </li>
                     </ul>
                     <dl>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-A4039B72-4E35-4F34-93EB-E40E51897D8E"><!-- --></a> ctxp（IN）</dt>
                        <dd>
                           <p>指定内存回调例程的用户定义上下文。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-1FA9A166-9990-4FE8-8330-BF0DAF55A8FB"><!-- --></a> malocfp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存分配函数。如果<code class="codeph">mode</code>为<code class="codeph">OCI_THREADED</code> ，则此内存分配例程必须是线程安全的。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-680AAD1B-2D04-4A02-9453-72A19EBACB59"><!-- --></a> ctxp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存分配函数的上下文指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-EBAD99BA-19FD-4121-A96A-577E47EC0798"><!-- --></a>尺寸（IN）</dt>
                        <dd>
                           <p>指定由用户定义的内存分配函数分配的内存大小。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-A5F054E3-DE83-4594-BF1F-5971A618085D"><!-- --></a> ralocfp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存重新分配功能。如果模式为<code class="codeph">OCI_THREADED</code> ，则此内存分配例程必须是线程安全的。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-FB5B2A76-9DCC-4E19-9AAC-BCE0D140D42D"><!-- --></a> ctxp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存重新分配函数的上下文指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-7E8C0EF3-D7FF-48E4-B642-D937156DB46B"><!-- --></a> memptr（IN）</dt>
                        <dd>
                           <p>指向内存块的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-6D35B365-D704-462D-B279-FC2AAE82CCD9"><!-- --></a>新闻（IN）</dt>
                        <dd>
                           <p>指定要分配的新内存大小。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-A2803EB7-A275-4477-8D55-067F023D1211"><!-- --></a> mfreefp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存自由函数。如果模式为<code class="codeph">OCI_THREADED</code> ，则此无内存例程必须是线程安全的。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-2E869997-89BE-4865-9330-1F71E53D3E7F"><!-- --></a> ctxp（IN）</dt>
                        <dd>
                           <p>指定用户定义的内存自由函数的上下文指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-EC8BBF94-6590-4C3E-BB2A-AE3F22D7B16E"><!-- --></a> memptr（IN）</dt>
                        <dd>
                           <p>指向要释放的内存的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-DA26D46E-DAEC-41C9-AC0D-40BEAD012D61"><!-- --></a> <span class="bold">xtramemsz</span> （IN）</dt>
                        <dd>
                           <p>指定在环境持续时间内分配的用户内存量。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-63B363DA-218A-42B2-970F-1A035C62DA1E"><!-- --></a> <span class="bold">usrmempp</span> （OUT）</dt>
                        <dd>
                           <p>返回指向由用户调用分配的大小<code class="codeph">xtramemsz</code>的用户内存的指针。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-44BFA607-0BFA-4EAE-803F-EED985CBB501"><!-- --></a>字符集（IN）</dt>
                        <dd>
                           <p>当前环境句柄的客户端字符集。如果为0，则使用<code class="codeph">NLS_LANG</code>设置。<code class="codeph">OCI_UTF16ID</code>是有效设置;它由元数据和<code class="codeph">CHAR</code>数据使用。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-327599C1-8799-4CF1-A20A-BC73388A1C9F"><!-- --></a> ncharset（IN）</dt>
                        <dd>
                           <p>当前环境句柄的客户端国家字符集。如果为0，则使用<code class="codeph">NLS_NCHAR</code>设置。<code class="codeph">OCI_UTF16ID</code>是有效设置;它由<code class="codeph">NCHAR</code>数据使用。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-7406A477-7451-4534-B835-4AD382BFDFDD">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> - 已成功创建环境句柄。
                     </p>
                     <p><code class="codeph">OCI_ERROR</code> - 发生错误。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-B1C409A3-D043-44BD-9DAF-C4BC456D47C4">评论</p>
                     <p>此调用使用您指定的模式为所有OCI调用创建环境。</p>
                     <p>使用<code class="codeph">OCIEnvNlsCreate()</code>创建环境句柄后，bind和define句柄的实际长度和返回长度始终以字节数表示。这适用于以下呼叫：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCIBindByName()</code>和<code class="codeph">OCIBindByName2()</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIBindByPos()</code>和<code class="codeph">OCIBindByPos2()</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIBindDynamic（）</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIDefineByPos()</code>和<code class="codeph">OCIDefineByPos2()</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIDefineDynamic（）</code></p>
                        </li>
                     </ul>
                     <p>此功能使您可以在创建环境时设置<code class="codeph">charset</code>和<code class="codeph">ncharset</code> ID。它是<code class="codeph">OCIEnvCreate()</code>函数的增强版本。
                     </p>
                     <p>必须使用<code class="codeph">charset</code>和<code class="codeph">ncharset</code>调用<code class="codeph">OCIEnvNlsCreate()</code>为零或两者都为非零。如果不这样做会导致错误（ <code class="codeph">ORA-24820</code> ）。
                     </p>
                     <p>此函数将非零<code class="codeph">charset</code>和<code class="codeph">ncharset</code>为客户端数据库和国家字符集，替换<code class="codeph">NLS_LANG</code>和<code class="codeph">NLS_NCHAR</code>指定的字符集。当<code class="codeph">charset</code>和<code class="codeph">ncharset</code>为0时，该函数的行为与<code class="codeph">ncharset</code> <code class="codeph">OCIEnvCreate()</code>完全相同。具体地， <code class="codeph">charset</code>控制用于元数据和数据具有隐形式属性的编码，并<code class="codeph">ncharset</code>控制用于与数据的编码<code class="codeph">SQLCS_NCHAR</code>形式属性。
                     </p>
                     <p>虽然<code class="codeph">OCI_UTF16ID</code>可以由<code class="codeph">OCIEnvNlsCreate()</code>设置，但不能在<code class="codeph">NLS_LANG</code>或<code class="codeph">NLS_NCHAR</code>设置。要访问<code class="codeph">NLS_LANG</code>和<code class="codeph">NLS_NCHAR</code>的字符集ID，请使用<code class="codeph">OCINlsEnvironmentVariableGet()</code> 。
                     </p>
                     <p>此调用返回一个环境句柄，然后由剩余的OCI函数使用。OCI中可以有多个环境，每个环境都有自己的环境模式。如果任何模式需要，此函数还执行任何进程级初始化。例如，如果要将环境初始化为<code class="codeph">OCI_THREADED</code> ，则OCI使用的所有库也将以线程模式初始化。
                     </p>
                     <p>如果打开N'替换，则<code class="codeph">OCIStmtPrepare2()</code>函数对SQL文本执行N'替换，并将生成的SQL文本存储在语句句柄中。因此，如果应用程序使用<code class="codeph">OCI_ATTR_STATEMENT</code>从OCI语句句柄检索SQL文本，则返回修改后的SQL文本而不是原始SQL文本。
                     </p>
                     <p>要在<code class="codeph">ksh</code> shell中启用N'替换：</p><pre class="oac_no_warn" dir="ltr">export ORA_NCHAR_LITERAL_REPLACE = TRUE</pre><p>要在<code class="codeph">csh</code> shell中启用N'替换：</p><pre class="oac_no_warn" dir="ltr">setenv ORA_NCHAR_LITERAL_REPLACE TRUE</pre><p>如果远程数据库是10.2之前的版本，则不执行N'替换。</p>
                     <p>如果使用OCI库编写DLL或共享库，则使用此调用而不是不推荐的<code class="codeph">OCIInitialize()</code>调用。
                     </p>
                     <div class="infoboxnotealso" id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-0677DC20-0582-4D98-9E62-A9DEA7124258">
                        <p class="notep1">也可以看看：</p>
                        <p> </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="oci-programming-basics.html#GUID-394C2CED-C264-4F81-BD97-CCF9F149CC4C" title="OCIDescriptorAlloc（）调用在其参数列表中有一个xtramem_sz参数。">用户内存分配</a>有关<code class="codeph">xtramemsz</code>参数和用户内存分配的更多信息</p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIEnvCreate()</code>用于说明在相关函数中设置N'替换的代码示例</p>
                           </li>
                        </ul>
                     </div>
                     <p>关于<code class="codeph">OCI_SUPPRESS_NLS_VALIDATION</code>和<code class="codeph">OCI_ENABLE_NLS_VALIDATION</code>模式，默认情况下，当客户端和服务器字符集相同且客户端和服务器版本都是Oracle Database <span class="italic">11g</span>第1版（11.1）或更高版本时，OCI不会为了更好的性能验证字符数据。这意味着如果应用程序插入具有部分多字节字符的字符串（例如，在绑定变量的末尾），则此类字符串可以按原样保留在数据库中。
                     </p>
                     <p>请注意，如果客户端或服务器版本早于Oracle Database <span class="italic">11g</span>第1版（11.1），则OCI不允许部分字符。
                     </p>
                     <p><code class="codeph">OCI_ENABLE_NLS_VALIDATION</code>模式是Oracle Database <span class="italic">10g</span>第2版（10.2）之前的默认模式，可确保数据库中不存在部分多字节字符（当客户端和服务器字符集相同时）。如果应用程序可以生成部分多字节字符，并且应用程序可以在客户端和服务器字符集相同的环境中运行，则Oracle建议明确使用<code class="codeph">OCI_ENABLE_NLS_VALIDATION</code>模式，以确保删除此类部分字符。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-E87E9F91-D3DC-4F35-BE7C-F1EFBFEEBA0A" title="显式释放句柄">OCIHandleFree（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-B7BC5F9E-811C-490A-B308-472A12D690D2" title="从共享内存子系统中分离进程并释放共享内存。">OCITerminate（）</a></li>
                        <li><a href="oci-locale-functions.html#GUID-70CCE086-4BF8-42F9-A6CA-E0B926C4DD11" title="从NLS_LANG返回字符集ID或从NLS_NCHAR返回国家字符集ID。">OCINlsEnvironmentVariableGet（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="创建并初始化OCI函数的环境句柄。">OCIEnvCreate（）</a></li>
                        <li><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="准备SQL或PL / SQL语句以便执行。">OCIStmtPrepare2（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17116"></a><div class="props_rev_3"><a id="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" name="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36"></a><h3 id="LNOCI-GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" class="sect3"><span class="enumeration_section">25.2.9</span> OCILogoff（）</h3>
               <div>
                  <p>释放使用<code class="codeph">OCILogon2()</code>或<code class="codeph">OCILogon()</code>检索的会话。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36__GUID-EA0D0638-B387-4314-93F0-18A00C53F8F1">目的</p>
                     <p>释放使用<code class="codeph">OCILogon2()</code>或<code class="codeph">OCILogon()</code>检索的会话。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36__GUID-D0F64B8D-CF32-4AB0-BE5F-2EC97B5BFE6B">句法</p><pre class="oac_no_warn" dir="ltr">剑OCILogoff（OCISvcCtx * svchp OCIError * errhp）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36__GUID-72BE7451-2988-4476-9E25-FF3BFE55B1BE">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36__GUID-4616D34E-9C61-4843-88D5-1EAFCDC89607"><!-- --></a> svchp（IN）</dt>
                        <dd>
                           <p>在<code class="codeph">OCILogon()</code>或<code class="codeph">OCILogon2()</code>调用中使用的服务上下文句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36__GUID-D55AFE9F-C1EC-49AF-80B4-A0584718B212"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>
                           <p>一个错误句柄，您可以在出现错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36__GUID-3A2E35C6-24C7-4E2C-8BB9-6D929F747104">评论</p>
                     <p>此函数用于释放使用<code class="codeph">OCILogon2()</code>或<code class="codeph">OCILogon()</code>检索的会话。如果使用<code class="codeph">OCILogon()</code> ，则此函数终止连接和会话。如果使用<code class="codeph">OCILogon2()</code> ，则此调用的确切行为由调用相应<code class="codeph">OCILogon2()</code>函数的<code class="codeph">mode</code>确定。在默认情况下，此函数会关闭会话或连接。对于连接池，它会关闭会话并返回到池的连接。对于会话池，它将会话或连接对返回到池。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6" title="创建一个简单的登录会话。">OCILogon（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36__GUID-FBCE7018-7838-43B9-8677-D46420A1A6C8">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="oci-programming-basics.html#GUID-A4B693E9-7554-4721-A7F7-0B5B15589DEE" title="应用程序必须调用OCIEnvNlsCreate（）来初始化OCI环境句柄。现有应用程序可能使用了OCIEnvCreate（）。">应用程序初始化，连接和会话创建</a> ”</span> ，以获取有关在应用程序中登录和注销的更多信息</p>
                  </div>
               </div>
               
            </div><a id="LNOCI17117"></a><div class="props_rev_3"><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6" name="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6"></a><h3 id="LNOCI-GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6" class="sect3"><span class="enumeration_section">25.2.10</span> OCILogon（）</h3>
               <div>
                  <p>创建一个简单的登录会话。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-F4B51940-35B2-4ED0-9E02-F9F1A5D86B94">目的</p>
                     <p>创建一个简单的登录会话。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-018D01DA-857A-4DC8-B6C4-35CDB603376A">句法</p><pre class="oac_no_warn" dir="ltr">剑OCILogon（OCIEnv * envhp，OCIError * errhp，OCISvcCtx ** svchp，const OraText *用户名，ub4 uname_len，const OraText *密码，ub4 passwd_len，const OraText * dbname，ub4 dbname_len）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-C1A63742-0690-4B0B-A6CA-673489989F4E">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-181EB140-2103-4B5D-94DD-4E065B9A278C"><!-- --></a> envhp（IN）</dt>
                        <dd>
                           <p>OCI环境处理。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-DC772C66-E292-496B-94AC-A5AC7D713CB6"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>
                           <p>一个错误句柄，您可以在出现错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-C16B380A-0B34-4540-BD89-E842437F58DB"><!-- --></a> svchp（IN / OUT）</dt>
                        <dd>
                           <p>服务上下文指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-B3EF8010-A468-4E00-ACC4-59C552CCDA7D"><!-- --></a>用户名（IN）</dt>
                        <dd>
                           <p>用户名。必须采用前一次调用<code class="codeph">OCIEnvNlsCreate()</code>的<code class="codeph">charset</code>参数指定的编码。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-E257F578-FD31-4BED-8118-34B8F8E4A380"><!-- --></a> uname_len（IN）</dt>
                        <dd>
                           <p><code class="codeph">username</code>的长度，以字节数表示，与编码无关。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-2C168E92-67B9-431F-9B2D-B9ACD74009BD"><!-- --></a>密码（IN）</dt>
                        <dd>
                           <p>用户的密码。必须采用前一次调用<code class="codeph">OCIEnvNlsCreate()</code>的<code class="codeph">charset</code>参数指定的编码。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-322942B6-AEF6-4E7B-8009-CA88266F68A2"><!-- --></a> passwd_len（IN）</dt>
                        <dd>
                           <p><code class="codeph">password</code>长度，以字节数表示，与编码无关。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-CA351CE3-4AB9-4782-869E-6456BA9CB0E2"><!-- --></a> dbname（IN）</dt>
                        <dd>
                           <p>要连接的数据库的名称。必须采用前一次调用<code class="codeph">OCIEnvNlsCreate()</code>的<code class="codeph">charset</code>参数指定的编码。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-689BEC2D-8C96-4AB4-BE74-E55A746D27D9"><!-- --></a> dbname_len（IN）</dt>
                        <dd>
                           <p><code class="codeph">dbname</code>的长度，以字节数表示，与编码无关。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-37851D9A-B7D8-4900-AFB8-9CE60BF47FF0">评论</p>
                     <p>此函数用于为应用程序创建简单的登录会话。</p>
                     <div class="infoboxnote" id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-52BBA91F-D210-4F9B-943E-083B73A78FD2">
                        <p class="notep1">注意：</p>
                        <p>需要更复杂会话的用户（例如TP监视器应用程序）应该看到<span class="q">“ <a href="oci-programming-basics.html#GUID-A4B693E9-7554-4721-A7F7-0B5B15589DEE" title="应用程序必须调用OCIEnvNlsCreate（）来初始化OCI环境句柄。现有应用程序可能使用了OCIEnvCreate（）。">应用程序初始化，连接和会话创建</a> ”</span> 。
                        </p>
                     </div>
                     <p>此调用分配传递给它的服务上下文句柄。此调用还隐式分配与会话关联的服务器和用户会话句柄。可以通过在服务上下文句柄上调用<code class="codeph">OCIArrayDescriptorAlloc()</code>来检索这些句柄。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" title="释放使用OCILogon2（）或OCILogon（）检索的会话。">OCILogoff（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-8218D5F2-139B-4FA9-BA4A-ED0126687C0F" title="分配一组描述符。">OCIArrayDescriptorAlloc（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17118"></a><div class="props_rev_3"><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6" name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6"></a><h3 id="LNOCI-GUID-425D4B32-257C-480E-B69C-7112BE9482E6" class="sect3"><span class="enumeration_section">25.2.11</span> OCILogon2（）</h3>
               <div>
                  <p>获取一个会话。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-0B5AB502-B50F-4386-B34F-4912348FF756">目的</p>
                     <p>此会话可以是具有新基础连接的新会话，也可以是通过现有连接池的虚拟连接启动的会话，也可以是现有会话池中的启动。调用函数的<code class="codeph">mode</code>决定了它的行为。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-85C139EB-D604-40A5-9AD5-8F081AEC392E">句法</p><pre class="oac_no_warn" dir="ltr">剑OCILogon2（OCIEnv * envhp，OCIError * errhp，OCISvcCtx ** svchp，const OraText *用户名，ub4 uname_len，const OraText *密码，ub4 passwd_len，const OraText * dbname，ub4 dbname_len）; ub4模式）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-7129B6B5-55E9-47FE-8B1A-C93B38184810">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-BFF00C0C-66CD-4404-AD00-5411DD5BB0DB"><!-- --></a> envhp（IN）</dt>
                        <dd>
                           <p>OCI环境处理。对于连接池和会话池，这必须是创建相应池的那个。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-12D472E8-384A-4722-9832-36A2FD14407F"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>
                           <p>一个错误句柄，您可以在出现错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-DF546FFE-B8FE-42A7-AD35-C52AEB0B44F0"><!-- --></a> svchp（IN / OUT）</dt>
                        <dd>
                           <p>OCI服务上下文指针的地址。这充满了服务器和会话句柄。</p>
                           <p>在默认情况下，将分配新会话和服务器句柄，启动连接和会话，并使用这些句柄填充服务上下文。</p>
                           <p>对于连接池，将分配新的会话句柄，并通过连接池中的虚拟连接启动会话。</p>
                           <p>对于会话池，将使用会话池中的现有会话或服务器句柄对填充服务上下文。</p>
                           <p>请注意，您不得更改与服务上下文指针关联的服务器和用户或会话句柄的任何属性。这样做会导致<code class="codeph">OCIAttrSet()</code>调用返回错误。
                           </p>
                           <p>可以更改的服务上下文的唯一属性是<code class="codeph">OCI_ATTR_STMTCACHESIZE</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-E3CF11DC-6AC9-41C2-97A5-68FB5E8F5922"><!-- --></a>用户名（IN）</dt>
                        <dd>
                           <p>用于验证会话的用户名。必须采用前一次调用<code class="codeph">OCIEnvNlsCreate()</code>的<code class="codeph">charset</code>参数指定的编码。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-4AFDEE61-0085-467D-9A3C-25AFE6CD059B"><!-- --></a> uname_len（IN）</dt>
                        <dd>
                           <p><code class="codeph">username</code>的长度，以字节数表示，与编码无关。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-27A4EB4C-3E71-4778-8E07-15D6523251B5"><!-- --></a>密码（IN）</dt>
                        <dd>
                           <p>用户的密码。对于连接池，如果此参数为<code class="codeph">NULL</code>则<code class="codeph">OCILogon2()</code>假定登录是针对代理用户的。在这种情况下，它隐式地创建代理连接，使用池用户对代理用户进行身份验证。必须采用前一次调用<code class="codeph">OCIEnvNlsCreate()</code>的<code class="codeph">charset</code>参数指定的编码。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-983F6FD4-5A66-4988-9300-A157C0547668"><!-- --></a> passwd_len（IN）</dt>
                        <dd>
                           <p><code class="codeph">password</code>长度，以字节数表示，与编码无关。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-99C8ED00-F0B6-486A-9B6D-CB14CE1F4D0E"><!-- --></a> dbname（IN）</dt>
                        <dd>
                           <p>对于默认情况，这表示用于连接Oracle数据库的连接字符串。</p>
                           <p>对于连接池，这表示从中检索虚拟连接以启动会话的连接池。该值由<code class="codeph">OCIConnectionPoolCreate()</code>调用返回。
                           </p>
                           <p>对于会话池，它指示从中获取会话的池。它由<code class="codeph">OCISessionPoolCreate()</code>调用返回。
                           </p>
                           <p><code class="codeph">dbname</code>必须采用前一次调用<code class="codeph">OCIEnvNlsCreate()</code>的<code class="codeph">charset</code>参数指定的编码。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-6A00248C-6B74-42A1-BDFF-F32A90D5D037"><!-- --></a> dbname_len（IN）</dt>
                        <dd>
                           <p><code class="codeph">dbname</code>的长度。对于会话池和连接池，此值分别由<code class="codeph">OCISessionPoolCreate()</code>或<code class="codeph">OCIConnectionPoolCreate()</code>调用返回。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-C0C8AFF0-D594-4E52-A7BF-97E39E77D88F"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>接受的价值是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_LOGON2_CPOOL</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_LOGON2_SPOOL</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_LOGON2_STMTCACHE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_LOGON2_PROXY</code></p>
                        </li>
                     </ul>
                     <p>对于默认（非池化情况），以下模式有效：</p>
                     <p><code class="codeph">OCI_DEFAULT</code> - 相当于调用<code class="codeph">OCILogon()</code> 。
                     </p>
                     <p><code class="codeph">OCI_LOGON2_STMTCACHE</code> - 启用语句缓存。
                     </p>
                     <p>对于连接池，以下模式有效：</p>
                     <p><code class="codeph">OCI_LOGON2_CPOOL</code>或<code class="codeph">OCI_CPOOL</code> - 必须设置为使用连接池。
                     </p>
                     <p><code class="codeph">OCI_LOGON2_STMTCACHE</code> - 启用语句缓存。
                     </p>
                     <p>要对连接池使用代理身份验证，必须将密码设置为<code class="codeph">NULL</code> 。然后，通过<code class="codeph">OCIConnectionPoolCreate()</code>调用中提供的代理凭证，为您提供通过<code class="codeph">OCILogon2()</code>调用中提供的用户名进行身份验证的会话。
                     </p>
                     <p>对于会话池，以下模式有效：</p>
                     <p><code class="codeph">OCI_LOGON2_SPOOL</code> - 必须设置为使用会话池。
                     </p>
                     <p><code class="codeph">OCI_LOGON2_STMTCACHE</code> - 启用语句缓存。
                     </p>
                     <p><code class="codeph">OCI_LOGON2_PROXY</code> - 使用代理身份验证。通过<code class="codeph">OCISessionPoolCreate()</code>调用中提供的代理凭证，您将获得通过<code class="codeph">OCILogon2()</code>调用中提供的用户名进行身份验证的会话。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-29982E44-33BE-4B3D-9D19-12ACBDDB94FE">评论</p>
                     <p>没有。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6" title="创建一个简单的登录会话。">OCILogon（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" title="释放使用OCILogon2（）或OCILogon（）检索的会话。">OCILogoff（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" title="释放使用OCISessionGet（）检索的会话。">OCISessionRelease（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="初始化连接池。">OCIConnectionPoolCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="初始化会话池以与OCI会话池和数据库驻留连接池（DRCP）一起使用。">OCISessionPoolCreate（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04" name="GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04"></a><h3 id="LNOCI-GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04" class="sect3"><span class="enumeration_section">25.2.12</span> OCIRequestDisableReplay（）</h3>
               <div>
                  <p>在当前数据库请求期间禁用会话的应用程序连续性重播。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04__GUID-7C256151-7C67-4C31-9A6E-D6A5D104A023">目的</p>
                     <p>触发OCI以停止记录呼叫，直到应用程序请求结束（请求的结束由<code class="codeph">OCISessionRelease()</code>标记）。启用Application Continuity for OCI但应用程序输入的代码段不可重放时，请使用此调用。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04__GUID-1733B20B-B0AD-4B0C-9807-3917E10C2588">句法</p><pre class="pre codeblock"><code>OCIRequestDisableReplay（OCISvcCtx * svchp，OCIError * errhp，ub4模式）;</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04__GUID-0AB783FE-489E-41FD-8E53-31117F37BADB">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04__GUID-9EDD24C5-BAE3-46B3-AD44-C6C4E184FD85"><!-- --></a> svchp（IN / OUT）</dt>
                        <dd>
                           <p>服务背景;必须初始化服务上下文句柄并具有与之关联的会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04__GUID-A5688517-0DBA-43AD-9108-805BB86A066F"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>
                           <p>错误句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04__GUID-947F5404-EECB-4841-849A-2024F5D59D15"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <div class="p">此调用支持以下模式：<ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">OCI_DEFAULT</code></p>
                                 </li>
                              </ul>
                           </div>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83735F2D-3ECC-4DB1-AE2E-A02360877D04__GUID-7806327F-098D-4788-BFAF-9982EDEE5FC8">使用说明</p>
                     <p>有关更多信息，请参阅<a href="high-availability-in-oci.html#GUID-A8DD9422-2F82-42A9-9555-134296416E8F" title="应用程序连续性（AC）在计划内和计划外中断期间提供高可用性（HA）。Oracle数据库12c第2版（12.2）引入了对AC的OCI支持。">OCI和应用程序连续性</a> 。有关启用应用程序连续性的信息，请参阅“ <a href="../racad/ensuring-application-continuity.html#RACAD-GUID-815F5DF2-6B6E-4E5B-922D-6FCAA4A0AD81" target="_blank"><span><cite>Oracle Real Application Clusters管理和部署指南”</cite></span></a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNOCI17119"></a><div class="props_rev_3"><a id="GUID-B6291228-DA2F-4CE9-870A-F94243141757" name="GUID-B6291228-DA2F-4CE9-870A-F94243141757"></a><h3 id="LNOCI-GUID-B6291228-DA2F-4CE9-870A-F94243141757" class="sect3"><span class="enumeration_section">25.2.13</span> OCIServerAttach（）</h3>
               <div>
                  <p>为OCI操作创建数据源的访问路径。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-AC87BD37-0FC1-449E-8DFD-7CF73A6EF9FF">目的</p>
                     <p>为OCI操作创建数据源的访问路径。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-F2C34F1B-8EB3-460B-999E-09AE6A14FC3B">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIServerAttach（OCIServer * srvhp，OCIError * errhp，const OraText * dblink，sb4 dblink_len，ub4模式）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-FED1EF02-5618-4840-9BDA-BC5A67877FF6">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-55D7477B-06BD-4D15-AFA9-18FDB57ECCB4"><!-- --></a> <span class="bold">srvhp</span> （IN / OUT）</dt>
                        <dd>
                           <p>未初始化的服务器句柄，由此调用初始化。传入初始化的服务器句柄会导致错误。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-574EFE5B-FCD6-4675-86FB-49FF2C0FB71E"><!-- --></a> <span class="bold">errhp</span> （IN / OUT）</dt>
                        <dd>
                           <p>一个错误句柄，您可以在出现错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-3B52527A-0595-490E-9DE0-F1D5AF0B87FF"><!-- --></a> <span class="bold">dblink</span> （IN）</dt>
                        <dd>
                           <p>指定要使用的数据库服务器。此参数指向指定连接字符串或服务点的字符串。如果连接字符串为<code class="codeph">NULL</code> ，则此调用将附加到默认主机。字符串本身可以是<code class="codeph">UTF-16</code>编码模式，具体取决于应用程序环境句柄中的<code class="codeph">mode</code>或设置。<code class="codeph">dblink</code>的长度在<code class="codeph">dblink_len</code>指定。返回时调用者可以释放<code class="codeph">dblink</code>指针。
                           </p>
                           <p><code class="codeph">mode</code> = <code class="codeph">OCI_CPOOL</code>时要连接的连接池的名称。这必须与<code class="codeph">OCIConnectionPoolCreate()</code>创建的连接池的<code class="codeph">poolName</code>参数相同。必须采用前一次调用<code class="codeph">OCIEnvNlsCreate()</code>的<code class="codeph">charset</code>参数指定的编码。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-4D750C79-1591-4A0E-9548-492DA2627028"><!-- --></a> <span class="bold">dblink_len</span> （IN）</dt>
                        <dd>
                           <p><code class="codeph">dblink</code>指向的字符串的长度。对于有效的连接字符串名称或别名， <code class="codeph">dblink_len</code>必须非零。它的值以字节数表示。
                           </p>
                           <p>当<code class="codeph">mode</code> = <code class="codeph">OCI_CPOOL</code>时，无论编码如何， <code class="codeph">poolName</code>的长度（以字节数为单位）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-6FC192CA-1DE5-4475-BCAA-33A79719E7F2"><!-- --></a> <span class="bold">模式</span> （IN）</dt>
                        <dd>
                           <p>指定各种操作模式。有效模式是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code> - 对于编码，此值告诉服务器句柄使用环境句柄中的设置。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_CPOOL</code> - 使用连接池。
                           </p>
                        </li>
                     </ul>
                     <p>因为可以为任何连接会话句柄设置附加的服务器句柄，所以此处的<code class="codeph">mode</code>值不会影响任何会话句柄。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-A0E813E7-C8C0-4692-8501-58E59C9A8763">评论</p>
                     <p>此调用用于在OCI应用程序和特定服务器之间创建关联。</p>
                     <p>此调用假定已调用<code class="codeph">OCIConnectionPoolCreate()</code> ，在连接池生效时给出<code class="codeph">poolName</code> 。
                     </p>
                     <p>此调用初始化服务器上下文句柄，该句柄必须先前已通过调用<code class="codeph">OCIHandleAlloc()</code>分配。由此调用初始化的服务器上下文句柄可以通过调用<code class="codeph">OCIAttrSet()</code>与服务上下文相关联。在建立关联之后，可以对服务器执行OCI操作。
                     </p>
                     <p>如果应用程序针对多个服务器运行，则可以维护多个服务器上下文句柄。针对当前与服务上下文关联的服务器上下文执行OCI操作。</p>
                     <p><span class="bold"></span>成功完成<code class="codeph">OCIServerAttach()</code>后，将启动Oracle数据库影子进程。应调用<code class="codeph">OCISessionEnd()</code>和<code class="codeph">OCIServerDetach()</code>来清理Oracle数据库影子进程。否则，影子进程会累积并导致Linux或UNIX系统耗尽进程。如果重新启动数据库并且没有足够的进程，则数据库可能无法启动。
                     </p>
                     <p>有关<a href="high-availability-in-oci.html#GUID-A8DD9422-2F82-42A9-9555-134296416E8F" title="Application Continuity (AC) gives High Availability (HA) during planned and unplanned outages. OCI support for AC was introduced with Oracle Database 12c Release 2 (12.2).">应用程序连续性</a>的更多信息，请参阅<a href="high-availability-in-oci.html#GUID-A8DD9422-2F82-42A9-9555-134296416E8F" title="应用程序连续性（AC）在计划内和计划外中断期间提供高可用性（HA）。Oracle数据库12c第2版（12.2）引入了对AC的OCI支持。">OCI和应用</a>程序连续性。有关启用应用程序连续性的信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnoci&amp;id=RACAD-GUID-815F5DF2-6B6E-4E5B-922D-6FCAA4A0AD81" target="_blank"><span><cite>Oracle Real Application Clusters管理和部署指南”</cite></span></a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-03821BB7-D4FA-4E72-88E1-46F9796B0C77">例</p>
                     <p>以下代码示例演示了<code class="codeph">OCIServerAttach()</code>的<code class="codeph">OCIServerAttach()</code> 。此代码段分配服务器句柄，进行附加调用，分配服务上下文句柄，然后将服务器上下文设置到其中。
                     </p>
                     <p>使用OCIServerAttach（）调用</p><pre class="oac_no_warn" dir="ltr">OCIHandleAlloc（（void *）envhp，（void **）＆srvhp，（ub4）OCI_HTYPE_SERVER，0，（void **）0）; OCIServerAttach（srvhp，errhp，（text *）0，（sb4）0，（ub4）OCI_DEFAULT）; OCIHandleAlloc（（void *）envhp，（void **）＆svchp，（ub4）OCI_HTYPE_SVCCTX，0，（void **）0）; / * set service context context in service context * / OCIAttrSet（（void *）svchp，（ub4）OCI_HTYPE_SVCCTX，（void *）srvhp，（ub4）0，（ub4）OCI_ATTR_SERVER，（OCIError *）errhp）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564" title="删除OCI操作的数据源访问路径。">OCIServerDetach（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="初始化连接池。">OCIConnectionPoolCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F" title="终止由OCISessionBegin（）创建的用户会话上下文。">OCISessionEnd（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17120"></a><div class="props_rev_3"><a id="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564" name="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564"></a><h3 id="LNOCI-GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564" class="sect3"><span class="enumeration_section">25.2.14</span> OCIServerDetach（）</h3>
               <div>
                  <p>删除OCI操作的数据源访问路径。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564__GUID-9B865298-4301-42D0-AB30-CDB93C20971F">目的</p>
                     <p>删除OCI操作的数据源访问路径。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564__GUID-1D527B34-D571-47D5-BD02-D4EF15FFBF86">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIServerDetach（OCIServer * srvhp，OCIError * errhp，ub4模式）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564__GUID-1E38D372-6510-4026-80B9-48E388DAE17D">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564__GUID-B02D03F2-9878-494C-9C47-95D1F09E5E9B"><!-- --></a> <span class="bold">srvhp</span> （IN）</dt>
                        <dd>
                           <p>初始化服务器上下文的句柄，重置为未初始化状态。句柄未取消分配。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564__GUID-B58F9315-2B66-4F31-96B0-FF6F65684D78"><!-- --></a> <span class="bold">errhp</span> （IN / OUT）</dt>
                        <dd>
                           <p>一个错误句柄，您可以在出现错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564__GUID-BE9FCA44-ABA4-498A-B3F8-7BB1EAF72C5C"><!-- --></a> <span class="bold">模式</span> （IN）</dt>
                        <dd>
                           <p>指定各种操作模式。唯一有效的模式是默认模式的<code class="codeph">OCI_DEFAULT</code> 。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564__GUID-F958CEC9-C31A-4E49-A663-FCF989FF8326">评论</p>
                     <p>此调用将删除OCI操作的数据源的访问路径a。访问路径是通过调用<code class="codeph">OCIServerAttach()</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-B6291228-DA2F-4CE9-870A-F94243141757" title="为OCI操作创建数据源的访问路径。">OCIServerAttach（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17121"></a><div class="props_rev_3"><a id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" name="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947"></a><h3 id="LNOCI-GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" class="sect3"><span class="enumeration_section">25.2.15</span> OCISessionBegin（）</h3>
               <div>
                  <p>创建用户会话并开始给定服务器的用户会话。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-34E09AB1-AF66-4ABD-B88F-30A581E522BA">目的</p>
                     <p>创建用户会话并开始给定服务器的用户会话。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-D593A7C7-6329-4635-A993-C36777F3A0DD">句法</p><pre class="oac_no_warn" dir="ltr">剑OCISessionBegin（OCISvcCtx * svchp，OCIError * errhp，OCISession * usrhp，ub4 credt，ub4 mode）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-CA7E0CD7-BF23-442A-B78F-A08E00E93D08">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-E509D6D9-59E2-4916-806D-7B14B594ECAB"><!-- --></a> <span class="bold">svch</span> p（IN）</dt>
                        <dd>
                           <p>服务上下文的句柄。在<code class="codeph">svchp</code>必须设置有效的服务器句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-7995C15F-8763-494A-84FA-2E030C69F3B0"><!-- --></a> errhp（IN）</dt>
                        <dd>
                           <p>一个错误句柄，您可以在出现错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-2E1C6B7C-AF04-46AF-BCDF-28078CD3181E"><!-- --></a> usrhp（IN / OUT）</dt>
                        <dd>
                           <p>用户会话上下文的句柄，由此调用初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-2525D7F9-A5E0-43C8-925F-6B519291A565"><!-- --></a> credt（IN）</dt>
                        <dd>
                           <p>指定用于建立用户会话的凭据类型。有效的<code class="codeph">credt</code>价值是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_CRED_RDBMS</code> - 使用数据库用户名和密码对作为凭据进行身份验证。应在此调用之前在用户会话上下文中设置属性<code class="codeph">OCI_ATTR_USERNAME</code>和<code class="codeph">OCI_ATTR_PASSWORD</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_CRED_EXT</code> - 使用外部凭据进行身份验证。没有提供用户名或密码。
                           </p>
                        </li>
                     </ul>
                     <dl>
                        <dt class="dlterm"><a name="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-0E5B1981-0715-4D19-A305-2369A45F494D"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>指定各种操作模式。有效模式是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code> - 在此模式下，只能使用<code class="codeph">svchp</code>中指定的服务器上下文设置返回的用户会话上下文。对于编码，服务器句柄使用环境句柄中的设置。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_MIGRATE</code> - 在此模式下，可以在具有不同服务器句柄的服务句柄中设置新的用户会话上下文。此模式建立用户会话上下文。要创建可迁移会话，必须已使用不可迁移的用户会话设置服务句柄，该会话将成为可迁移会话的“创建者”会话。也就是说，可迁移会话必须具有不可迁移的父会话。
                           </p>
                           <p>当会话使用下面的连接池时，不应使用<code class="codeph">OCI_MIGRATE</code> 。会话迁移和多路复用对用户透明。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SYSDBA</code> - 在此模式下，您将通过SYSDBA访问进行身份验证。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SYSOPER</code> - 在此模式下，您将通过SYSOPER访问进行身份验证。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SYSASM</code> - 在此模式下，您将通过SYSASM访问进行身份验证。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SYSBKB</code> - 在此模式下，您将通过SYSBACKUP访问进行身份验证。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SYSDGD</code> - 在此模式下，您将通过SYSDG访问进行身份验证。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SYSKMT</code> - 在此模式下，您将通过SYSKM访问进行身份验证。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SYSRAC</code> - 在此模式下，您将通过SYSRAC访问进行身份验证。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_PRELIM_AUTH</code> - 此模式只能与<code class="codeph">OCI_SYSDBA</code>或<code class="codeph">OCI_SYSOPER</code>一起用于对某些管理任务进行身份验证。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_STMT_CACHE</code> - 在给定的服务句柄上启用默认大小的语句缓存。如果应用程序稍后将使用该服务句柄上的<code class="codeph">OCI_ATTR_STMTCACHESIZE</code>显式设置大小，则可以选择传递此模式。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-742801E9-1F35-45F6-8CF1-7C32D9046279">评论</p>
                     <p><code class="codeph">OCISessionBegin()</code>调用用于根据服务上下文句柄中设置的服务器对用户进行身份验证。
                     </p>
                     <div class="infoboxnote" id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-8206C29C-D452-4791-908E-C201894E5BD6">
                        <p class="notep1">注意：</p>
                        <p>检查尝试启动会话时返回的任何错误。例如，如果帐户的密码已过期，则会返回ORA-28001错误。</p>
                     </div>
                     <p>对于8.1或更高版本，必须为任何给定的服务器句柄调用<code class="codeph">OCISessionBegin()</code> ，然后才能对其进行请求。<code class="codeph">OCISessionBegin()</code>仅支持对用户进行身份验证，以访问服务上下文中服务器句柄指定的Oracle数据库。换句话说，在<code class="codeph">OCIServerAttach()</code>来初始化服务器句柄之后，必须调用<code class="codeph">OCISessionBegin()</code>来验证给定服务器的用户。
                     </p>
                     <p>如果启用了OCI的应用程序连续性，则<code class="codeph">OCISessionBegin()</code>隐式标记应用程序请求的开始。使用OCI会话池API时，无需调用<code class="codeph">OCIRequestBegin()</code>和<code class="codeph">OCIRequestEnd()</code> 。
                     </p>
                     <p>使用Unicode时，如果<code class="codeph">mode</code>或环境句柄具有适当的设置，则在会话句柄<code class="codeph">usrhp</code>设置的用户名和密码应为Unicode。在调用此函数以使用用户名和密码启动会话之前，必须调用<code class="codeph">OCIAttrSet()</code>将这两个Unicode字符串设置为具有相应长度（以字节为单位）的会话句柄，因为<code class="codeph">OCIAttrSet()</code>仅接受<code class="codeph">void</code>指针。然后字符串缓冲区由<code class="codeph">OCISessionBegin()</code>解释。
                     </p>
                     <p>当第一次为给定服务器句柄调用<code class="codeph">OCISessionBegin()</code>时，可能无法在可迁移（ <code class="codeph">OCI_MIGRATE</code> ）模式下创建用户会话。
                     </p>
                     <p>之后<code class="codeph">OCISessionBegin()</code>被调用的服务器处理，应用程序可以调用<code class="codeph">OCISessionBegin()</code>再次来初始化不同（或相同）证书和不同（或相同）的操作模式的另一个用户会话句柄。如果应用程序想要在<code class="codeph">OCI_MIGRATE</code>模式下对用户进行身份验证，则服务句柄必须与不可迁移的用户句柄相关联。该用户句柄的用户标识成为可迁移用户会话的所有者标识。每个可迁移的会话都必须具有不可迁移的父会话。
                     </p>
                     <p>如果未指定<code class="codeph">OCI_MIGRATE</code>模式，则用户会话上下文只能与<code class="codeph">svchp</code>设置的相同服务器句柄<code class="codeph">svchp</code> 。如果指定了<code class="codeph">OCI_MIGRATE</code>模式，则可以使用不同的服务器句柄设置用户身份验证。但是，用户会话上下文只能与解析为同一数据库实例的服务器句柄一起使用。在会话切换期间完成安全检查。仅当存在当前连接到该进程的非可迁移会话时，会话才能迁移到另一个进程，该进程的用户标识与创建者的用户标识或其自己的用户标识的用户标识相同。
                     </p>
                     <p>当虚拟服务器句柄指向连接池（ <code class="codeph">OCIServerAttach()</code>调用<code class="codeph">mode</code>设置为<code class="codeph">OCI_CPOOL</code> ），不要在对<code class="codeph">OCISessionBegin()</code>的调用中设置<code class="codeph">OCI_MIGRATE</code>标志。Oracle数据库支持仅出于兼容性原因传递此标志。不要使用<code class="codeph">OCI_MIGRATE</code>标志，因为您在使用连接池时获得的感知是具有自己的专用（虚拟）连接的会话，这些连接透明地复用到实际连接上。
                     </p>
                     <p><code class="codeph">OCI_SYSDBA</code> ， <code class="codeph">OCI_SYSOPER</code>和<code class="codeph">OCI_PRELIM_AUTH</code>只能与主用户会话上下文一起使用。
                     </p>
                     <p>要为调用<code class="codeph">OCISessionBegin()</code>提供凭据，需要支持两种方法。第一种方法是在传递给<code class="codeph">OCISessionBegin()</code>的用户会话句柄中为数据库身份验证提供有效的用户名和密码对。这涉及使用<code class="codeph">OCIAttrSet()</code>在用户会话句柄上设置<code class="codeph">OCI_ATTR_USERNAME</code>和<code class="codeph">OCI_ATTR_PASSWORD</code>属性。然后<code class="codeph">OCISessionBegin()</code>被调用<code class="codeph">OCI_CRED_RDBMS</code> 。</p>
                     <div class="infoboxnote" id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-5FC8175C-6B65-4F79-99CB-470D4EB3D1B1">
                        <p class="notep1">注意：</p>
                        <p>当使用<code class="codeph">OCISessionEnd()</code>终止用户会话句柄时，用户名和密码属性保持不变，因此可以在以后调用<code class="codeph">OCISessionBegin()</code>重用。否则，必须在下一次<code class="codeph">OCISessionBegin()</code>调用之前将它们重置为新值。
                        </p>
                     </div>
                     <p>第二种方法是使用外部凭据。在调用<code class="codeph">OCISessionBegin()</code>之前，不需要在用户会话句柄上设置任何属性。凭证类型是<code class="codeph">OCI_CRED_EXT</code> 。这相当于Oracle7的“connect /”语法。如果已为<code class="codeph">OCI_ATTR_USERNAME</code>和<code class="codeph">OCI_ATTR_PASSWORD</code>设置了值，则在使用<code class="codeph">OCI_CRED_EXT</code>将忽略这些值。
                     </p>
                     <p>设置凭据的另一种方法是使用具有<code class="codeph">OCI_MIGSESSION</code>属性的经过身份验证的用户的会话ID。可以使用<code class="codeph">OCIAttrGet()</code>调用从经过身份验证的用户的会话句柄中提取此ID。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-A8480436-60AF-4324-BF16-61F5B38318CF">例</p>
                     <p>以下代码示例演示了<code class="codeph">OCISessionBegin()</code>的<code class="codeph">OCISessionBegin()</code> 。此代码段的分配用户会话手柄，设置用户名和密码属性，调用<code class="codeph">OCISessionBegin()</code>然后设置用户会话到服务上下文。
                     </p>
                     <p>使用OCISessionBegin（）调用</p><pre class="oac_no_warn" dir="ltr">/ *分配用户会话句柄* / OCIHandleAlloc（（void *）envhp，（void **）＆usrhp，（ub4）OCI_HTYPE_SESSION，（size_t）0，（void **）0）; OCIAttrSet（（void *）usrhp，（ub4）OCI_HTYPE_SESSION，（void *）“hr”，（ub4）strlen（“hr”），OCI_ATTR_USERNAME，errhp）; OCIAttrSet（（void *）usrhp，（ub4）OCI_HTYPE_SESSION，（void *）“hr”，（ub4）strlen（“hr”），OCI_ATTR_PASSWORD，errhp）; checkerr（errhp，OCISessionBegin（svchp，errhp，usrhp，OCI_CRED_RDBMS，OCI_DEFAULT））; OCIAttrSet（（void *）svchp，（ub4）OCI_HTYPE_SVCCTX，（void *）usrhp，（ub4）0，OCI_ATTR_SESSION，errhp）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F" title="终止由OCISessionBegin（）创建的用户会话上下文。">OCISessionEnd（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-B6291228-DA2F-4CE9-870A-F94243141757" title="为OCI操作创建数据源的访问路径。">OCIServerAttach（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17122"></a><div class="props_rev_3"><a id="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F" name="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F"></a><h3 id="LNOCI-GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F" class="sect3"><span class="enumeration_section">25.2.16</span> OCISessionEnd（）</h3>
               <div>
                  <p>终止由<code class="codeph">OCISessionBegin()</code>创建的用户会话上下文。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-9F360BC3-AC8B-45E8-B775-281E853BEDC1">目的</p>
                     <p>终止由<code class="codeph">OCISessionBegin()</code>创建的用户会话上下文。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-7AD8F4BF-C539-4A5A-9367-7A7873545F0E">句法</p><pre class="oac_no_warn" dir="ltr">剑OCISessionEnd（OCISvcCtx * svchp，OCIError * errhp，OCISession * usrhp，ub4模式）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-65083DCD-8CF0-4D1C-BB34-8FC73BE2A223">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-AA4BFB99-D7F0-49B3-8BC6-9865F115A5D5"><!-- --></a> <span class="bold">svchp</span> （IN / OUT）</dt>
                        <dd>
                           <p>服务上下文句柄。必须有与<code class="codeph">svchp</code>关联的有效服务器句柄和用户会话句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-6F51C3BB-E884-4C51-85CF-7847EEBAE57B"><!-- --></a> <span class="bold">errhp</span> （IN / OUT）</dt>
                        <dd>
                           <p>一个错误句柄，您可以在出现错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-F8555AE6-28A8-4A0A-A12A-29354597B2B7"><!-- --></a> usrhp（IN）</dt>
                        <dd>
                           <p>取消验证此用户。如果此参数作为<code class="codeph">NULL</code>传递，则服务上下文句柄中的用户将被取消身份验证。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-B5CD0E2C-F508-433F-8151-AC0A710BD9F6"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>唯一有效的模式是<code class="codeph">OCI_DEFAULT</code> 。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-DF8F87CB-63B0-4C3E-91B7-7CDA210B8C85">评论</p>
                     <p>此调用使与服务上下文关联的用户安全上下文无效。不释放用户会话上下文的存储。由服务上下文指定的事务是隐式提交的。如果未使用，则可以释放事务句柄（如果已明确分配）。为该用户在服务器上分配的资源被释放。用户会话句柄可以在对<code class="codeph">OCISessionBegin()</code>的新调用中<code class="codeph">OCISessionBegin()</code> 。
                     </p>
                     <p>如果启用了OCI的应用程序连续性，则<code class="codeph">OCISessionEnd()</code>隐式标记应用程序请求的结束。 OCI停止录制呼叫并清除其呼叫历史记录。使用OCI会话池API时，无需调用<code class="codeph">OCIRequestBegin()</code>和<code class="codeph">OCIRequestEnd()</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" title="创建用户会话并开始给定服务器的用户会话。">OCISessionBegin（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17123"></a><div class="props_rev_3"><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241"></a><h3 id="LNOCI-GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" class="sect3"><span class="enumeration_section">25.2.17</span> OCISessionGet（）</h3>
               <div>
                  <p>获取一个会话。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-CFFFC5B9-309D-46AE-B7E7-BE15F0B2BC2A">目的</p>
                     <p>此会话可以是具有新基础连接的新会话，也可以是通过现有连接池的虚拟连接启动的会话，也可以是现有会话池中的启动。调用函数的<code class="codeph">mode</code>决定了它的行为。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-47840F7A-5B55-493E-99EE-F710D8D772EA">句法</p><pre class="oac_no_warn" dir="ltr">剑OCISessionGet（OCIenv * envhp，OCIError * errhp，OCISvcCtx ** svchp，OCIAuthInfo * authInfop，OraText * dbName，ub4 dbName_len，const OraText * tagInfo，ub4 tagInfo_len，OraText ** retTagInfo，ub4 * retTagInfo_len，boolean * found，ub4 mode ）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-2A002EEB-14AC-4D2A-AAEC-D25B738807C2">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-F29ABE73-1448-47D7-8C16-6F03CEA5E586"><!-- --></a> envhp（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境处理。对于连接池和会话池，创建相应池的环境句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-906DCB80-8499-461B-9226-59139EB03206"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>
                           <p>OCI错误句柄。多线程OCI客户端应该将唯一的<code class="codeph">errhp</code>传递给<code class="codeph">OCISessionGet()</code>调用。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-A7353F0E-DEF2-4629-ABBE-0F92B83E0F3F"><!-- --></a> svchp（OUT）</dt>
                        <dd>
                           <p>OCI服务上下文指针的地址。这充满了服务器和会话句柄。</p>
                           <p>在默认情况下，将分配新会话和服务器句柄，启动连接和会话，并使用这些句柄填充服务上下文。</p>
                           <p>对于连接池，将分配新的会话句柄，并通过连接池中的虚拟连接启动会话。</p>
                           <p>对于会话池，将使用会话池中的现有会话和服务器句柄对填充服务上下文。</p>
                           <p>请勿更改与服务上下文指针关联的服务器以及用户和会话句柄的任何属性。这样做会导致<code class="codeph">OCIAttrSet()</code>调用返回错误。
                           </p>
                           <p>可以更改的服务上下文的唯一属性是<code class="codeph">OCI_ATTR_STMTCACHESIZE</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-F4D3990E-85CF-428B-A860-E529C98E7FF9"><!-- --></a> authInfop（IN）</dt>
                        <dd>
                           <p>获取会话时要使用的身份验证信息句柄。</p>
                           <p>在默认和连接池情况下，此句柄可以获取会话句柄的所有属性。</p>
                           <p>对于会话池，仅当会话池模式未设置为<code class="codeph">OCI_SPC_HOMOGENEOUS</code>才会考虑身份验证信息句柄。换句话说，将模式设置为<code class="codeph">OCI_SPC_HOMOGENEOUS</code> ，不使用认证信息，而使用所有其他可能的指定属性。
                           </p>
                           <p>可以在<code class="codeph">OCIAuthInfo</code>句柄上设置的属性可以分为会话前创建属性和会话后创建属性。会话前创建属性是：</p>
                           <p><span class="bold">会话前创建属性</span></p>
                           <p>会话前创建属性是在创建会话之前必须指定的OCI属性。这些属性用于创建会话，并且在创建会话后无法更改。会话前创建属性是：</p>
                           <p><code class="codeph">OCI_ATTR_USERNAME</code></p>
                           <p><code class="codeph">OCI_ATTR_PASSWORD</code></p>
                           <p><code class="codeph">OCI_ATTR_CONNECTION_CLASS</code></p>
                           <p><code class="codeph">OCI_ATTR_PURITY</code> 
                           </p>
                           <p><code class="codeph">OCI_ATTR_DISTINGUISHED_NAME</code></p>
                           <p><code class="codeph">OCI_ATTR_CERTIFICATE</code></p>
                           <p><code class="codeph">OCI_ATTR_INITIAL_CLIENT_ROLES</code></p>
                           <p><code class="codeph">OCI_ATTR_APPCTX_SIZE</code></p>
                           <p><code class="codeph">OCI_ATTR_EDITION</code></p>
                           <p><code class="codeph">OCI_ATTR_DRIVER_NAME</code></p>
                           <p><span class="bold">会话后创建属性</span></p>
                           <p>会话创建后属性是在创建会话后可以指定的属性。可以根据需要多次创建会话后自由更改它们。创建会话后，可以在<code class="codeph">OCISession</code>句柄上设置以下属性：</p>
                           <p><code class="codeph">OCI_ATTR_CLIENT_IDENTIFIER</code></p>
                           <p><code class="codeph">OCI_ATTR_CURRENT_SCHEMA</code></p>
                           <p><code class="codeph">OCI_ATTR_MODULE</code></p>
                           <p><code class="codeph">OCI_ATTR_ACTION</code></p>
                           <p><code class="codeph">OCI_ATTR_DBOP</code></p>
                           <p><code class="codeph">OCI_ATTR_CLIENT_INFO</code></p>
                           <p><code class="codeph">OCI_ATTR_COLLECT_CALL_TIME</code></p>
                           <p><code class="codeph">OCI_ATTR_DEFAULT_LOBPREFETCH_SIZE</code></p>
                           <p><code class="codeph">OCI_ATTR_SESSION_STATE</code></p>
                           <div class="infoboxnotealso" id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-E5742516-2D6C-4D7D-88FD-ADB5135EFC24">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p> <a href="session-and-connection-pooling.html#GUID-F9662FFB-EAEF-495C-96FC-49C6D1D9625C" title="会话池意味着应用程序创建并维护一组无状态会话到数据库。">OCI中的会话池</a></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">demo</code>目录中的<code class="codeph">cdemosp.c</code></p>
                                 </li>
                                 <li>
                                    <p><a href="handle-and-descriptor-attributes.html#GUID-FB263210-118E-4DB3-A840-1769EF0CB977" title="Lists and describes user session handle attributes.">用户会话句柄属性</a>以获取有关<a href="handle-and-descriptor-attributes.html#GUID-FB263210-118E-4DB3-A840-1769EF0CB977" title="列出并描述用户会话句柄属性。">属性</a>的更多信息</p>
                                 </li>
                                 <li>
                                    <p>评论部分</p>
                                 </li>
                              </ul>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-4CD87639-160D-4F69-A59C-C9944176EEE8"><!-- --></a> dbName（IN）</dt>
                        <dd>
                           <p>对于默认情况，这表示用于连接Oracle数据库的连接字符串。</p>
                           <p>对于连接池，它指示从中检索虚拟连接以启动会话的连接池。该值由<code class="codeph">OCIConnectionPoolCreate()</code>调用返回。
                           </p>
                           <p>对于会话池，它指示从中获取会话的池。它由<code class="codeph">OCISessionPoolCreate()</code>调用返回。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-69F0CA7F-19AD-4B0A-AA85-0CBB617E7168"><!-- --></a> dbName_len（IN）</dt>
                        <dd>
                           <p><code class="codeph">dbName</code>的长度。对于会话池和连接池，分别通过调用<code class="codeph">OCISessionPoolCreate()</code>或<code class="codeph">OCIConnectionPoolCreate()</code>返回此值。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-8C07955B-E505-448E-BB6F-508364B81FC6"><!-- --></a> tagInfo（IN）</dt>
                        <dd>
                           <p>此参数仅用于会话池。</p>
                           <p>这表示用户想要的会话类型。如果需要默认会话，则必须将其设置为<code class="codeph">NULL</code> 。有关此参数的详细说明，请参阅注释。
                           </p>
                           <p>从12 <span class="italic">c</span> Release 2（12.2）开始，标签可以具有多个属性。这被称为多属性标记。多属性标记由一个或多个由分号分隔的&lt;property-name&gt; = &lt;property-value&gt;对组成，其中&lt;property-name&gt; = &lt;property-value&gt;都是字符串。有关详细信息，请参阅<a href="session-and-connection-pooling.html#GUID-F7609D96-EB0F-487D-B825-E0138B16E2E9" title="标签为用户提供了一种自定义池中会话的方法。">关于在会话池中使用标记</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-98273AC8-3648-413F-AB9B-5475F88DF950"><!-- --></a> tagInfo_len（IN）</dt>
                        <dd>
                           <p><code class="codeph">tagInfo</code>的长度（以字节为<code class="codeph">tagInfo</code> 。仅用于会话池。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-B6DC990E-E52B-4461-88CF-8ACBA5894B8F"><!-- --></a> retTagInfo（OUT）</dt>
                        <dd>
                           <p>此参数仅用于会话池。这表示返回给用户的会话类型。有关此参数的详细说明，请参阅注释。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-03FC0509-E095-4A3E-ADE3-936B6B0A9426"><!-- --></a> retTagInfo_len（OUT）</dt>
                        <dd>
                           <p><code class="codeph">retTagInfo</code>的长度（以字节为<code class="codeph">retTagInfo</code> 。仅用于会话池。
                           </p>
                        </dd>
                        <dt class="dlterm">找到<a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-E28A28B4-B81B-4568-9441-24AF285B7D92"><!-- --></a> （OUT）</dt>
                        <dd>
                           <p>此参数仅用于会话池。如果返回了用户请求的会话类型（即<code class="codeph">tagInfo</code>和<code class="codeph">retTagInfo</code>的值相同），则<code class="codeph">found</code>设置为<code class="codeph">TRUE</code> 。否则， <code class="codeph">found</code>设置为<code class="codeph">FALSE</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-890A32E3-7994-439F-AE14-07ECBCD7390E"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>有效模式是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_CPOOL</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_SPOOL</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_CREDPROXY</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_CREDEXT</code> - 仅支持异构池。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_CUSTOM_POOL</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_MULTIPROPERTY_TAG</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_PURITY_NEW</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_PURITY_SELF</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_SPOOL_MATCHANY</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_STMTCACHE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSGET_SYSDBA</code></p>
                        </li>
                     </ul>
                     <p>在里面<span class="italic"> </span>默认（非池）情况，以下模式有效：</p>
                     <p><code class="codeph">OCI_SESSGET_STMTCACHE</code> - 在会话中启用语句缓存。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_CREDEXT</code> - 返回使用外部凭据进行身份验证的会话。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_SYSDBA</code> - 返回具有<code class="codeph">SYSDBA</code>权限的会话，用于非池或会话池。
                     </p>
                     <p>对于连接池，以下模式有效：</p>
                     <p><code class="codeph">OCI_SESSGET_CPOOL</code> - 必须设置为使用连接池。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_STMTCACHE</code> - 在会话中启用语句缓存。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_CREDPROXY</code> - 返回代理会话。给予用户由在所提供的用户名认证会话<code class="codeph">OCISessionGet()</code>调用，通过在所提供的代理证书<code class="codeph">OCIConnectionPoolCreate(</code>调用。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_CREDEXT</code> - 返回使用外部凭据进行身份验证的会话。
                     </p>
                     <p>对于会话池，以下模式有效：</p>
                     <p><code class="codeph">OCI_SESSGET_SPOOL</code> - 必须设置为使用会话池。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_SYSDBA</code> - 返回具有<code class="codeph">SYSDBA</code>权限的会话，用于非池或会话池。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_CREDEXT</code> - 返回使用外部凭据进行身份验证的会话。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_CREDPROXY</code> -在这种情况下，用户被给予由在所提供的用户名认证会话<code class="codeph">OCISessionGet()</code>调用，通过在所提供的代理证书<code class="codeph">OCISessionPoolCreate()</code>调用。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_SPOOL_MATCHANY</code> - 指标记行为。如果设置了此模式，则可能会返回标记与请求不同的会话。请参阅“评论”部分。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_MULTIPROPERTY_TAG</code> - 在以前使用（;）分号字符的应用程序位于标记名称的情况下，必须在使用多个属性时设置;分号字符用作指定多个属性的分隔符。请参阅“评论”部分。
                     </p>
                     <p>对于数据库驻留连接池，以下模式有效：</p>
                     <p><code class="codeph">OCI_SESSGET_MULTIPROPERTY_TAG</code> - 必须在使用多个属性时设置，以防应用程序使用（;）分号字符在标记名称中;分号字符用作指定多个属性的分隔符。请参阅“评论”部分。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_PURITY_SELF</code> - 应用程序可以使用之前使用过的会话。您还可以指定特定于应用程序的标记。
                     </p>
                     <p><code class="codeph">OCI_SESSGET_PURITY_NEW</code> - 应用程序需要一个不受任何先前会话状态污染的新会话。这是默认值。
                     </p>
                     <p>对于自定义池，以下模式有效：</p>
                     <p><code class="codeph">OCI_SESSGET_CUSTOM_POOL</code> - 必须由不使用OCI会话池的应用程序设置，而是使用自定义池。此属性设置为支持自定义池中的分片键查找。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-83D51C80-37AD-4BC6-A890-A5760D95754E">评论</p>
                     <p>标签为用户提供了一种自定义池中会话的方法。客户端可以从池中获取默认或未标记的会话，在会话上设置某些属性（例如全球化设置），并将会话返回到池，并在<code class="codeph">OCISessionRelease()</code>调用中使用适当的标记对其进行标记。
                     </p>
                     <p>用户或其他一些用户可以请求具有相同属性的会话，并且可以通过在<code class="codeph">OCISessionGet()</code>调用中提供相同的标记来实现。
                     </p>
                     <p>如果用户请求带有标记“A”的会话，并且匹配的会话不可用，则返回适当认证的无标记会话（具有<code class="codeph">NULL</code>标记的会话），如果此类会话是空闲的。如果即使未标记的会话未被释放<span class="italic">并且</span>已指定<code class="codeph">OCI_SESSGET_SPOOL_MATCHANY</code> ，则返回具有不同标记的经适当认证的会话。如果未设置<code class="codeph">OCI_SESSGET_SPOOL_MATCHANY</code> ，则永远不会返回具有不同标记的会话。
                     </p>
                     <p>以下代码示例演示了<code class="codeph">OCI_ATTR_MODULE</code>与会话池的使用。
                     </p>
                     <p>将OCI_ATTR_MODULE属性与OCI会话池一起使用</p><pre class="oac_no_warn" dir="ltr">Oratext * module =（Oratext *）“mymodule”; / *分配池句柄* / checkerr（errhp，OCIHandleAlloc（envhp，（void **）＆poolhp，OCI_HTYPE_SPOOL，0,0））; checkerr（errhp，OCISessionPoolCreate（envhp，errhp，poolhp，＆poolname，＆pnamelen，（oratext *）conn_str，len，min，max，incr，0,0,0,0，OCI_DEFAULT））; / *为会话get * / checkerr分配auth句柄（errhp，OCIHandleAlloc（envhp，（void **）＆authp，OCI_HTYPE_AUTHINFO，0,0））; checkerr（errhp，OCIAttrSet（authp，OCI_HTYPE_AUTHINFO，username，strlen（（char *）username），OCI_ATTR_USERNAME，errhp）; checkerr（errhp，OCIAttrSet（authp，OCI_HTYPE_AUTHINFO，密码，strlen（（char *）密码），OCI_ATTR_PASSWORD，errhp ））; checkerr（errhp，OCISessionGet（envhp，errhp，＆svchp，authp，poolname，pnamelen，0,0,0,0,0，OCI_SESSGET_SPOOL））; / *从服务上下文句柄* / checkerr获取用户句柄（ errhp，OCIAttrGet（svhcp，OCI_HTYPE_SVCCTX，＆usrhp_svc，0，OCI_ATTR_SESSION，errhp））; / *在您获得的用户句柄上设置模块名称* / checkerr（errhp，OCIAttrSet（usrhp_svc，OCI_HTYPE_SESSION，module，strlen（（char *） module），OCI_ATTR_MODULE，errhp））; / *进行数据库调用。* /</pre><p>OCI会话池支持的属性限制</p>
                     <p>您可以将以下会话前创建属性与OCI会话池一起使用：</p><pre class="oac_no_warn" dir="ltr">OCI_ATTR_EDITION OCI_ATTR_DRIVER_NAME OCI_ATTR_USERNAME，OCI_ATTR_PASSWORD，OCI_ATTR_CONNECTION_CLASS，OCI_ATTR_PURITY</pre><p>然而， <code class="codeph">OCI_ATTR_EDITION</code>和<code class="codeph">OCI_ATTR_DRIVERNAME</code>只能期间指定<code class="codeph">OCISessionPoolCreate()</code>将其设定在<code class="codeph">OCIAuthInfo</code>处理即是一个属性<code class="codeph">OCISPool</code>手柄。它们不能在传递给单个<code class="codeph">OCISessionGet()</code>调用的<code class="codeph">OCIAuthInfo</code>句柄中指定。这可确保属于OCI会话池的所有会话具有这些属性的统一值。
                     </p>
                     <p>以下代码示例显示如何将<code class="codeph">OCI_ATTR_EDITION</code>属性与OCI会话池一起使用。
                     </p>
                     <p>将OCI_ATTR_EDITION属性与OCI会话池配合使用</p><pre class="oac_no_warn" dir="ltr">/ *分配要在假脱机句柄* / checkerr上设置的auth句柄（errhp，OCIHandleAlloc（envhp，（void **）＆authp_sp，OCI_HTYPE_AUTHINFO，0,0））; / *在auth句柄* / checkerr上设置版本（errhp，OCIAttrSet（authp_sp，OCI_HTYPE_AUTHINFO，“Patch_Bug_12345”，strlen（“Patch_Bug_12345”），OCI_ATTR_EDITION，errhp））; / *分配池句柄* / checkerr（errhp，OCIHandleAlloc（envhp，（void **）＆poolhp，OCI_HTYPE_SPOOL，0,0））; / *在假脱机句柄* / checkerr上设置上面创建的auth句柄（errhp，OCIAttrSet（poolhp，OCI_HTYPE_SPOOL，authp_sp，0，OCI_ATTR_SPOOL_AUTH，errhp））; checkerr（errhp，OCISessionPoolCreate（envhp，errhp，poolhp，＆poolname，＆pnamelen，（oratext *）conn_str，len，min，max，incr，0,0,0,0，OCI_DEFAULT））; / *为会话get * / checkerr分配auth句柄（errhp，OCIHandleAlloc（envhp，（void **）＆authp_sessget，OCI_HTYPE_AUTHINFO，0,0））; checkerr（errhp，OCIAttrSet（authp_sessget，OCI_HTYPE_AUTHINFO，用户名，strlen（（char *）用户名），OCI_ATTR_USERNAME，errhp）; checkerr（errhp，OCIAttrSet（authp_sessget，OCI_HTYPE_AUTHINFO，密码，strlen（（char *）密码），OCI_ATTR_PASSWORD，errhp ））; checkerr（errhp，OCISessionGet（envhp，errhp，＆svchp，authp_sessget，poolname，pnamelen，0,0,0,0,0，OCI_SESSGET_SPOOL））;</pre><p>您可以将所有会话后创建属性与OCI会话池一起使用。但是，由于会话池可以使会话老化，重用池中预先存在的会话，或透明地重新创建新会话，Oracle建议应用程序在从池中获取会话后显式设置所需的任何会话后创建属性。这确保了应用程序逻辑的工作方式与OCI会话池返回的特定会话无关。</p>
                     <p>指定<code class="codeph">OCI_SESSGET_MULTIPROPERTY_TAG</code> ，需要将参数<code class="codeph">retTagInfo</code>与<code class="codeph">found</code>参数和<code class="codeph">OCISessionGet()</code>期间指定的<code class="codeph">mode</code>参数值一起解释。下表指定了这些语义：</p>
                     <div class="tblformal" id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-1CC73A64-7F49-4F35-9C8B-298DC0E3A177">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" border="1" summary="This table describes the semantics when using the OCI_SESSGET_MULTIPROPERTY_TAG and the properties returned by the retTagInfo parameter and the found parameter in an OCISessionGet() call." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d180810e7538">指定模式</th>
                                 <th align="left" valign="bottom" width="20%" id="d180810e7540">refTagInfo参数</th>
                                 <th align="left" valign="bottom" width="20%" id="d180810e7542">找到参数</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d180810e7546" headers="d180810e7538 "><code class="codeph">OCI_SESSGET_SPOOL | OCI_SESSGET_MULTIPROPERTY_TAG</code></td>
                                 <td align="left" valign="top" width="20%" headers="d180810e7546 d180810e7540 ">
                                    <p>在找到的会话中设置的所有属性都将作为一个由（;）分号分隔的复合字符串返回。</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d180810e7546 d180810e7542 ">
                                    <p>为TRUE，仅当找到的会话匹配所有请求的属性且会话没有设置其他属性时。</p>
                                    <p>如果找不到匹配的会话，则为FALSE。在这种情况下，将返回未设置属性的新会话。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d180810e7558" headers="d180810e7538 "><code class="codeph">OCI_SESSGET_SPOOL | OCI_SESSGET_MULTIPROPERTY_TAG | OCISESSGET_SPOOL_MATCHANY</code></td>
                                 <td align="left" valign="top" width="20%" headers="d180810e7558 d180810e7540 ">
                                    <p>在找到的会话中设置的所有属性都将作为一个由（;）分号分隔的复合字符串返回。</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d180810e7558 d180810e7542 ">
                                    <p>如果找到的会话匹配所有请求的属性（但可能具有其他属性），则为TRUE。</p>
                                    <p>如果找到的会话与至少一个属性不匹配，则为FALSE。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>与非多属性标记相比，在多属性标记的情况下返回<code class="codeph">retTagInfo</code>的方式有所不同。在非多属性标记方案中，当<code class="codeph">found</code>参数返回为<code class="codeph">TRUE</code>时， <code class="codeph">retTagInfo</code>将与请求的标记相同。而在多属性标记的情况下， <code class="codeph">retTagInfo</code>包含与返回的会话关联的完整属性集，应由应用程序从<code class="codeph">found</code>标志推断出更多信息，如上表所示。
                     </p>
                     <p>请注意，OCI会话池（使用或不使用DRCP）仅支持<code class="codeph">OCI_SESSGET_MULTIPROPERTY_TAG</code> （使用<code class="codeph">OCISessionGet()</code> ）或<code class="codeph">OCI_SESSRLS_MULTIPROPERTY_TAG</code> （使用<code class="codeph">OCISessionRelease()</code> ）。因此，这些模式不能与独立连接或OCI连接池一起使用。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" title="释放使用OCISessionGet（）检索的会话。">OCISessionRelease（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="初始化会话池以与OCI会话池和数据库驻留连接池（DRCP）一起使用。">OCISessionPoolCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C" title="销毁会话池。">OCISessionPoolDestroy（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="初始化连接池。">OCIConnectionPoolCreate（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17124"></a><div class="props_rev_3"><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555"></a><h3 id="LNOCI-GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" class="sect3"><span class="enumeration_section">25.2.18</span> OCISessionPoolCreate（）</h3>
               <div>
                  <p>初始化会话池以与OCI会话池和数据库驻留连接池（DRCP）一起使用。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-F2DCD6CC-97E4-4D90-9729-BC5310358375">目的</p>
                     <p>它启动<code class="codeph">sessMin</code>会话数和与数据库的连接。在进行此调用之前，请调用<code class="codeph">OCIHandleAlloc()</code>为会话池句柄分配内存。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-02ADA867-4222-45D6-855A-F593FD5CF99E">句法</p><pre class="oac_no_warn" dir="ltr">剑OCISessionPoolCreate（OCIEnv * envhp，OCIError * errhp，OCISPool * spoolhp，OraText ** poolName，ub4 * poolNameLen，const OraText * connStr，ub4 connStrLen，ub4 sessMin，ub4 sessMax，ub4 sessIncr，OraText * userid，ub4 useridLen，OraText * password，ub4 passwordLen，ub4 mode）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-B668CED5-3834-4737-A235-27635B0EB474">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-66D2A5E4-CD6B-4CDF-8A87-74065251E68A"><!-- --></a> envhp（IN）</dt>
                        <dd>
                           <p>指向要在其中创建会话池的环境句柄的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-EAD6EF33-B56F-49FB-89B9-D6B2A92C5085"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>
                           <p>可以传递给<code class="codeph">OCIErrorGet()</code>的错误句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-3D3F4E44-8DD0-4561-90BB-3FF340E83497"><!-- --></a> spoolhp（IN / OUT）</dt>
                        <dd>
                           <p>指向初始化的会话池句柄的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-724D04DB-95D4-4216-9EB2-D7D714D66E32"><!-- --></a> poolName（OUT）</dt>
                        <dd>
                           <p>返回的会话池的名称。它在环境中的所有会话池中都是唯一的。必须将此值传递给<code class="codeph">OCISessionGet()</code>调用。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-11C969CC-53C4-4BA8-BCE4-22F325122D05"><!-- --></a> poolNameLen（OUT）</dt>
                        <dd>
                           <p><code class="codeph">poolName</code>长度，以字节为单位。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-5783251D-74CF-413C-9734-0EDD769BB0C5"><!-- --></a> connStr（IN）</dt>
                        <dd>
                           <p>要连接的数据库的TNS别名。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-AE516145-C3F6-4A51-957A-A7253E11738E"><!-- --></a> connStrLen（IN）</dt>
                        <dd>
                           <p><code class="codeph">connStr</code>的长度，以字节为单位。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-E779BBCC-5E02-4CE1-BF65-5B161EE4C67D"><!-- --></a> sessMin（IN）</dt>
                        <dd>
                           <p>指定会话池中的最小会话数。</p>
                           <p>此会话数由<code class="codeph">OCISessionPoolCreate()</code>启动。会话开始后，仅在必要时打开会话。
                           </p>
                           <p>当<code class="codeph">mode</code>设置为<code class="codeph">OCI_SPC_HOMOGENEOUS</code>时使用此值。否则，它将被忽略。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-2226D381-D3B3-4E25-944D-CBE9AC453BE3"><!-- --></a> sessMax（IN）</dt>
                        <dd>
                           <p>指定可在会话池中打开的最大会话数。达到此值后，不再打开任何会话。有效值为1和更高。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-7F86A0A4-2AC1-435F-AA0E-DDC744EA2A3C"><!-- --></a> sessIncr（IN）</dt>
                        <dd>
                           <p>如果当前会话数小于<code class="codeph">sessMax</code> ，则允许应用程序设置要启动的会话的下一个增量。有效值为0和更高。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-00BE199A-FF53-48BD-B21A-088596067B66"><!-- --></a>用户ID（IN）</dt>
                        <dd>
                           <p>指定用于启动会话的用户标识。</p>
                           <div class="infoboxnotealso" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-BD2161A3-00F6-4C6C-9C4A-E45CE5851D32">
                              <p class="notep1">也可以看看：</p>
                              <p>注释部分中的身份验证注释。</p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-A75315BF-AA62-4252-AE1F-409E49F023CE"><!-- --></a> useridLen（IN）</dt>
                        <dd>
                           <p>userid的长度，以字节为单位。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-6F566822-8132-4B2B-8F61-E357E67C9D35"><!-- --></a>密码（IN）</dt>
                        <dd>
                           <p>相应用户标识的密码。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-B1C243B1-91AB-4759-AF24-627A529E71BD"><!-- --></a>密码（IN）</dt>
                        <dd>
                           <p>密码的长度（以字节为单位）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-2FF12390-3466-4045-8370-DA5B481FD293"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>支持的模式是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code> - 用于创建新的会话池。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SPC_REINITIALIZE</code> - 创建会话池后，如果要动态更改池属性（更改<code class="codeph">sessMin</code> ， <code class="codeph">sessMax</code>和<code class="codeph">sessIncr</code>参数），请调用<code class="codeph">mode</code>设置为<code class="codeph">OCI_SPC_REINITIALIZE</code> <code class="codeph">OCISessionPoolCreate()</code> 。当<code class="codeph">mode</code>设置为<code class="codeph">OCI_SPC_REINITIALIZE</code> ，将忽略<code class="codeph">connStr</code> ， <code class="codeph">userid</code>和<code class="codeph">password</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SPC_STMTCACHE</code> - 为会话池创建OCI语句高速缓存。如果未在启用OCI语句高速缓存的情况下创建池，则会自动使用服务器端语句高速缓存。请注意，通常，客户端语句缓存可提供更好的性能。
                           </p>
                           <div class="infoboxnotealso" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-ACC27808-C96A-40A8-853E-C4A82311320C">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="performance-topics.html#GUID-4947CAE8-1F00-4897-BB2B-7F921E495175" title="语句缓存是指为每个会话提供和管理语句缓存的功能。">OCI中的语句缓存</a></p>
                           </div>
                        </li>
                     </ul>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_SPC_HOMOGENEOUS</code> - 池中的所有会话都使用传递给<code class="codeph">OCISessionPoolCreate()</code>的用户名和密码进行身份验证。在这种情况下，忽略传递到<code class="codeph">OCISessionGet()</code>的身份验证句柄（参数<code class="codeph">authInfop</code> ）。此外，仅在这种情况下考虑<code class="codeph">sessMin</code>和<code class="codeph">SessIncr</code>值。在此模式下无法创建代理会话。此模式可用于数据库驻留连接池（DRCP）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SPC_NO_RLB</code> - 默认情况下，如果客户端和服务器能够支持，则会话池中启用运行时连接负载平衡。要关闭它，请使用<code class="codeph">OCISessionPoolCreate()</code>的新模式<code class="codeph">OCI_SPC_NO_RLB</code>模式。您只能在创建池时使用此模式。如果为已创建的池传递此模式，则会引发错误ORA-24411。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-FE05FC4F-C62C-47CD-AC13-47A87A5FEE56">评论</p>
                     <dl id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__I563837">
                        <dt class="dlterm"><a name="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-FCA33C72-8EA4-48E4-A843-6956CC2F7639"><!-- --></a>身份验证说明</dt>
                        <dd>
                           <p>会话池可以包含两种类型的数据库连接：直接连接和代理连接。要建立代理连接，用户必须具有“通过代理连接”权限。</p>
                           <div class="infoboxnotealso" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-9732B147-175A-4B35-BAF9-45FCE91CA850">
                              <p class="notep1">也可以看看：</p>
                              <p>有关代理连接的详细信息，请参阅</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="oci-programming-basics.html#GUID-D77D0D4A-7483-423A-9767-CBB5854A15CC" title="代理身份验证是通常在具有中间层（例如防火墙）的环境中使用的过程，其中最终用户对中间层进行身份验证，然后中间层代表用户对数据库进行身份验证 - 作为其代理。">客户端通过代理访问</a></p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/ALTER-USER.html#SQLRF53630" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                           <p>创建会话池时，可能会也可能不会指定<code class="codeph">userid</code>和<code class="codeph">password</code> 。如果这些值为<code class="codeph">NULL</code> ，则此池中不存在代理连接。如果<code class="codeph">mode</code>设置为<code class="codeph">OCI_SPC_HOMOGENEOUS</code> ，则不存在代理连接。
                           </p>
                           <p>还可以通过<code class="codeph">OCISessionGet()</code>调用中的身份验证句柄指定<code class="codeph">userid</code>和<code class="codeph">password</code>对。如果此呼叫与由<code class="codeph">mode</code>设置为<code class="codeph">OCI_SESSGET_CREDPROXY</code> ，则用户被给予由所述认证会话<code class="codeph">userid</code>在所提供的<code class="codeph">OCISessionGet()</code>调用，通过在所提供的代理证书<code class="codeph">OCISessionPoolCreate()</code>调用。在这种情况下，将忽略<code class="codeph">OCISessionGet()</code>调用中的密码。
                           </p>
                           <p>如果在<code class="codeph">mode</code> <span class="italic">未</span>设置为<code class="codeph">OCI_SESSGET_CREDPROXY</code> <code class="codeph">mode</code>调用<code class="codeph">OCISessionGet()</code> ，则用户将获得通过<code class="codeph">OCISessionGet()</code>调用中提供的凭据进行身份验证的直接会话。如果此调用中未提供任何内容，则用户将通过<code class="codeph">OCISessionPoolCreate()</code>调用中的凭据获取经过身份验证的会话。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-D349D4D5-EC46-474A-8AF1-4A0E19C0F049">例</p>
                     <p>以下代码示例演示如何禁用运行时负载平衡。</p>
                     <p>禁用运行时负载平衡</p><pre class="oac_no_warn" dir="ltr">OCISessionPoolCreate（envhp，errhp，spoolhp，（OraText **）＆poolName，（ub4 *）＆poolNameLen，database，（ub4）strlen（（const signed char *）database），sessMin，sessMax，sessIncr，（OraText *）appusername，（ ub4）strlen（（const signed char *）appusername），（OraText *）apppassword，（ub4）strlen（（const signed char *）apppassword），OCI_SPC_HOMOGENEOUS | OCI_SPC_NO_RLB）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" title="释放使用OCISessionGet（）检索的会话。">OCISessionRelease（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C" title="销毁会话池。">OCISessionPoolDestroy（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17125"></a><div class="props_rev_3"><a id="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C" name="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C"></a><h3 id="LNOCI-GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C" class="sect3"><span class="enumeration_section">25.2.19</span> OCISessionPoolDestroy（）</h3>
               <div>
                  <p>销毁会话池。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C__GUID-20B578A8-756F-46A7-A4C7-F86534021F81">目的</p>
                     <p>销毁会话池。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C__GUID-DC6718D7-248A-444F-97FD-318E6285BF0E">句法</p><pre class="oac_no_warn" dir="ltr">剑OCISessionPoolDestroy（OCISPool * spoolhp，OCIError * errhp，ub4模式）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <dl>
                        <dt class="dlterm"><a name="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C__GUID-CFF247B5-E125-45AA-9C39-B8A94CFB5AB2"><!-- --></a> spoolhp（IN / OUT）</dt>
                        <dd>
                           <p>要销毁的会话池的会话池句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C__GUID-4FA8AAE8-D1B2-48CE-961C-DBDB74053D95"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>
                           <p>可以传递给<code class="codeph">OCIErrorGet()</code>的错误句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C__GUID-19FFECA2-78EF-4838-B85B-37B4649B97FC"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>目前， <code class="codeph">OCISessionPoolDestroy()</code>支持模式<code class="codeph">OCI_DEFAULT</code>和<code class="codeph">OCI_SPD_FORCE</code> 。</p>
                           <p>如果在<code class="codeph">mode</code>设置为<code class="codeph">OCI_SPD_FORCE</code> <code class="codeph">mode</code>进行此调用，并且池中存在活动会话，则会话将关闭并且池将被销毁。但是，如果未设置此模式，并且池中存在繁忙会话，则会返回错误。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="初始化会话池以与OCI会话池和数据库驻留连接池（DRCP）一起使用。">OCISessionPoolCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" title="释放使用OCISessionGet（）检索的会话。">OCISessionRelease（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17126"></a><div class="props_rev_3"><a id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" name="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D"></a><h3 id="LNOCI-GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" class="sect3"><span class="enumeration_section">25.2.20</span> OCISessionRelease（）</h3>
               <div>
                  <p>释放使用<code class="codeph">OCISessionGet()</code>检索的会话。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-068B72D9-3ADE-4B6A-B505-824D1CD2FBB4">目的</p>
                     <p>释放使用<code class="codeph">OCISessionGet()</code>检索的会话。此调用的确切行为取决于调用相应<code class="codeph">OCISessionGet()</code>函数的<code class="codeph">mode</code> 。在默认情况下，它会关闭会话或连接。对于连接池，它会关闭会话并返回到池的连接。对于会话池，它将会话或连接对返回到池，并提交任何挂起的事务。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-C0140A0B-BE0D-47D0-83D7-6679815E4BA6">句法</p><pre class="oac_no_warn" dir="ltr">剑OCISessionRelease（OCISvcCtx * svchp，OCIError * errhp，OraText *标签，ub4 tag_len，ub4模式）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-417FA23F-1A7D-4CA1-ABE9-EF99B52AA547">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-F46AC6B6-E431-41C5-B778-8AAC65E5CC6F"><!-- --></a> svchp（IN）</dt>
                        <dd>
                           <p>在相应的<code class="codeph">OCISessionGet()</code>调用期间填充的服务上下文。
                           </p>
                           <p>在默认情况下，关闭与此句柄关联的会话和连接。</p>
                           <p>在连接池情况下，会话已关闭，并且连接已释放到池中。</p>
                           <p>对于会话池，与此服务上下文关联的会话或连接对将释放到池中。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-E9155960-B816-45AB-B461-9593F927DA36"><!-- --></a> errhp（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-3AED763F-FCF7-4E3D-B5A0-6F45AA241315"><!-- --></a>标签（IN）</dt>
                        <dd>
                           <p>此参数仅用于会话池。</p>
                           <p>除非指定了模式<code class="codeph">OCI_SESSRLS_RETAG</code>否则将忽略此参数。在这种情况下，会话标记为此标记并返回到池中。如果为<code class="codeph">NULL</code> ，则不会标记会话。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-F7574F73-EBD6-4496-8342-AB6351CF0002"><!-- --></a> tag_len（IN）</dt>
                        <dd>
                           <p>此参数仅用于会话池。</p>
                           <p>标签的长度。除非设置了模式<code class="codeph">OCI_SESSRLS_RETAG</code>否则将忽略<code class="codeph">OCI_SESSRLS_RETAG</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-717EFCC6-937D-44EB-8623-7A944FC93EF8"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>支持的模式是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSRLS_DROPSESS</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSRLS_MULTIPROPERTY_TAG</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SESSRLS_RETAG</code></p>
                        </li>
                     </ul>
                     <p>您只能将<code class="codeph">OCI_DEFAULT</code>用于默认情况和连接池。
                     </p>
                     <p><code class="codeph">OCI_SESSRLS_DROPSESS</code>和<code class="codeph">OCI_SESSRLS_RETAG</code>仅用于会话池。
                     </p>
                     <p>指定<code class="codeph">OCI_SESSRLS_DROPSESS</code> ，会话将从会话池中删除。
                     </p>
                     <p>如果标记是多属性标记，则设置<code class="codeph">OCI_SESSRLS_MULTIPROPERTY_TAG</code> 。有关更多信息，请参阅<a href="session-and-connection-pooling.html#GUID-DFA21225-E83C-4177-A79A-B8BA29DC662C" title="从12c Release 2（12.2）开始，标签可以具有多个属性。这被称为多属性标记。">多属性标记</a> 。
                     </p>
                     <p>当且仅当设置了<code class="codeph">OCI_SESSRLS_RETAG</code>时，才会更改会话上的标记。如果未设置此模式，则忽略<code class="codeph">tag</code>和<code class="codeph">tag_len</code>参数。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-38DECEF1-BBB3-4583-BEF9-A64C33FAB91A">评论</p>
                     <p>使用<code class="codeph">tag</code>参数时，请小心传递正确的<code class="codeph">tag</code> 。如果请求默认会话并且用户在此会话上设置某些属性（可能通过<code class="codeph">ALTER SESSION</code>命令），则用户必须通过标记此会话来适当地标记该会话。
                     </p>
                     <p>但是，如果用户请求了标记会话并获得了一个会话，并且已更改会话中的属性，则用户必须在适当时传入其他标记。</p>
                     <p>为了正确使用会话池层，应用程序开发人员必须非常小心地将正确的标记传递给<code class="codeph">OCISessionGet()</code>和<code class="codeph">OCISessionRelease()</code>调用。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="初始化会话池以与OCI会话池和数据库驻留连接池（DRCP）一起使用。">OCISessionPoolCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C" title="销毁会话池。">OCISessionPoolDestroy（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17127"></a><div class="props_rev_3"><a id="GUID-B7BC5F9E-811C-490A-B308-472A12D690D2" name="GUID-B7BC5F9E-811C-490A-B308-472A12D690D2"></a><h3 id="LNOCI-GUID-B7BC5F9E-811C-490A-B308-472A12D690D2" class="sect3"><span class="enumeration_section">25.2.21</span> OCITerminate（）</h3>
               <div>
                  <p>从共享内存子系统中分离进程并释放共享内存。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B7BC5F9E-811C-490A-B308-472A12D690D2__GUID-3B1C5F7E-3CE4-493B-8274-A382873E710F">目的</p>
                     <p>从共享内存子系统中分离进程并释放共享内存。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B7BC5F9E-811C-490A-B308-472A12D690D2__GUID-688BB47E-543D-4C2E-9127-6498E3EEF87C">句法</p><pre class="oac_no_warn" dir="ltr">剑OCITerminate（ub4模式）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B7BC5F9E-811C-490A-B308-472A12D690D2__GUID-D25DCFCC-5E58-431D-AA72-E9518EFFE0F3">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-B7BC5F9E-811C-490A-B308-472A12D690D2__GUID-925B328A-BE15-4BCC-802F-E92808E01017"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>呼叫专用模式。有效价值：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code> - 执行默认调用。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B7BC5F9E-811C-490A-B308-472A12D690D2__GUID-8B8F4F2B-2A29-4C8A-89F6-69F528301D53">评论</p>
                     <p><code class="codeph">OCITerminate()</code>应该只为每个进程调用一次，并且是<code class="codeph">OCIEnvNlsCreate()</code> ， <code class="codeph">OCIEnvCreate()</code> <code class="codeph">OCIEnvNlsCreate()</code> ，不推荐的<code class="codeph">OCIInitialize()</code>调用的对应部分。该调用尝试从共享内存子系统中分离进程并将其关闭。它还执行其他进程清理操作。当连接到同一共享内存的两个或多个进程同时调用<code class="codeph">OCITerminate()</code>时，最快的一个完全释放共享内存子系统，而较慢的一个必须终止。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="deprecated-oci-functions.html#GUID-F50356A8-450D-4A96-8AB5-5726502766B2" title="在Oracle Database 11g第2版（11.2）之前的版本中不推荐使用此功能。">OCIInitialize（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="创建并初始化OCI函数的环境句柄。">OCIEnvCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
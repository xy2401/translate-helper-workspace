<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create, back up, and drop control files."></meta>
      <meta name="description" content="You can create, back up, and drop control files."></meta>
      <title>管理控制文件</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content="You can create, back up, and drop control files."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-database-structure-and-storage.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-the-redo-log.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-database-structure-and-storage.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-the-redo-log.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-structure-and-storage.html" property="item" typeof="WebPage"><span property="name">Oracle数据库结构和存储</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理控制文件</li>
            </ol>
            <a id="GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" name="GUID-5F6F9382-6921-4992-9789-E63B18E99C5F"></a><a id="ADMIN006"></a>
            
            <h2 id="ADMIN-GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" class="sect2"><span class="enumeration_chapter">10</span>管理控制文件</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以创建，备份和删除控制文件。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-control-files.html#GUID-98A05D29-DD80-4D87-9615-76CBCF8FE694">什么是控制文件？</a><br>每个Oracle数据库都有一个<span class="bold">控制文件</span> ，它是一个记录数据库物理结构的小型二进制文件。
                  </li>
                  <li class="ulchildlink"><a href="managing-control-files.html#GUID-737B0C7F-CED8-4B00-8428-DA11B35F9E9B">控制文件指南</a><br>您可以遵循指南来管理数据库的控制文件。
                  </li>
                  <li class="ulchildlink"><a href="managing-control-files.html#GUID-9CBB8320-E2F6-4BDB-9B1C-A7B801F97F73">创建控制文件</a><br>您可以创建，复制，重命名和重定位控制文件。
                  </li>
                  <li class="ulchildlink"><a href="managing-control-files.html#GUID-4D4D22BE-1619-46BD-B22C-7409B35923AA">创建控制文件后的故障排除</a><br>发出<code class="codeph">CREATE CONTROLFILE</code>语句后，您可能会遇到一些错误。
                  </li>
                  <li class="ulchildlink"><a href="managing-control-files.html#GUID-204AF8CF-6C51-4D0F-ADE2-BA804352EA93">备份控制文件</a><br>使用<code class="codeph">ALTER DATABASE BACKUP CONTROLFILE</code>语句备份控制文件。
                  </li>
                  <li class="ulchildlink"><a href="managing-control-files.html#GUID-D6662264-5149-4394-BE10-28C3047A8343">使用当前副本恢复控制文件</a><br>您可以从当前备份或多路复用副本中恢复控制文件。
                  </li>
                  <li class="ulchildlink"><a href="managing-control-files.html#GUID-AB003834-2392-4B99-ADBD-497636A2E096">删除控制文件</a><br>您可以删除控制文件，但数据库应始终至少有两个控制文件。
                  </li>
                  <li class="ulchildlink"><a href="managing-control-files.html#GUID-B0AB9343-301E-45C8-AACC-5BC9C85CB2CD">控制文件数据字典视图</a><br>您可以查询一组数据字典视图，以获取有关控制文件的信息。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-5F6F9382-6921-4992-9789-E63B18E99C5F__GUID-12F2DF64-FAAF-4DE5-ADC8-BD80E99B2313">
                  <p class="notep1">也可以看看：</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>有关控制文件概述的<a href="../cncpt/physical-storage-structures.html#CNCPT404" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-managed-files.html#GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" title="Oracle数据库可以管理组成数据库的文件。">使用Oracle Managed Files</a>获取有关创建由Oracle数据库服务器创建和管理的控制文件的信息</p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-database-structure-and-storage.html#GUID-F11D30A7-BF12-4D8F-A1C2-D7437D38F8C7" title="您可以创建和管理数据库结构和存储组件。">Oracle数据库结构和存储</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN11281"></a><div class="props_rev_3"><a id="GUID-98A05D29-DD80-4D87-9615-76CBCF8FE694" name="GUID-98A05D29-DD80-4D87-9615-76CBCF8FE694"></a><h3 id="ADMIN-GUID-98A05D29-DD80-4D87-9615-76CBCF8FE694" class="sect3"><span class="enumeration_section">10.1</span>什么是控制文件？
               </h3>
               <div>
                  <p>每个Oracle数据库都有一个<span class="bold">控制文件</span> ，它是一个记录数据库物理结构的小型二进制文件。
                  </p>
                  <p>控制文件包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>数据库名称</p>
                     </li>
                     <li>
                        <p>关联数据文件和重做日志文件的名称和位置</p>
                     </li>
                     <li>
                        <p>数据库创建的时间戳</p>
                     </li>
                     <li>
                        <p>当前日志序列号</p>
                     </li>
                     <li>
                        <p>检查点信息</p>
                     </li>
                  </ul>
                  <p>每当数据库打开时，控制文件必须可供Oracle数据库服务器写入。如果没有控制文件，则无法装入数据库并且难以恢复。</p>
                  <p>Oracle数据库的控制文件与数据库同时创建。默认情况下，在数据库创建期间至少创建一个控制文件副本。在某些操作系统上，默认设置是创建多个副本。您应该在数据库创建期间创建控制文件的两个或多个副本。如果丢失控制文件或想要更改控制文件中的特定设置，也可以稍后创建控制文件。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" title="您可以创建，备份和删除控制文件。">管理控制文件</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11282"></a><div class="props_rev_3"><a id="GUID-737B0C7F-CED8-4B00-8428-DA11B35F9E9B" name="GUID-737B0C7F-CED8-4B00-8428-DA11B35F9E9B"></a><h3 id="ADMIN-GUID-737B0C7F-CED8-4B00-8428-DA11B35F9E9B" class="sect3"><span class="enumeration_section">10.2</span>控制文件指南</h3>
               <p>您可以遵循指南来管理数据库的控制文件。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-BAC5CCC4-A5E4-488E-AC8E-5162FDF1C0F2">提供控制文件的文件名</a><br>您可以使用数据库初始化参数文件中的<code class="codeph">CONTROL_FILES</code>初始化参数指定控制文件名。实例在启动期间识别并打开所有列出的文件，实例在数据库操作期间写入并维护所有列出的控制文件。
                     </li>
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-A3BC34A1-20A2-46E6-AF52-7E25845EFDC3">不同磁盘上的Multiplex控制文件</a><br>每个Oracle数据库应至少有两个控制文件，每个控制文件存储在不同的物理磁盘上。
                     </li>
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-BF439503-839A-4F50-A1E9-04754D1AEFBF">备份控制文件</a><br>备份控制文件非常重要。这在最初是正确的，并且每次更改数据库的物理结构时都是如此。
                     </li>
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-5A44AEB4-9606-46F2-AF8E-3020B8746E2E">管理控制文件的大小</a><br>控制文件大小的主要决定因素是在<code class="codeph">CREATE DATABASE</code>语句中为创建关联数据库的<code class="codeph">MAXDATAFILES</code> ， <code class="codeph">MAXLOGFILES</code> ， <code class="codeph">MAXLOGMEMBERS</code> ， <code class="codeph">MAXLOGHISTORY</code>和<code class="codeph">MAXINSTANCES</code>参数设置的值。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" title="您可以创建，备份和删除控制文件。">管理控制文件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11283"></a><div class="props_rev_3"><a id="GUID-BAC5CCC4-A5E4-488E-AC8E-5162FDF1C0F2" name="GUID-BAC5CCC4-A5E4-488E-AC8E-5162FDF1C0F2"></a><h4 id="ADMIN-GUID-BAC5CCC4-A5E4-488E-AC8E-5162FDF1C0F2" class="sect4"><span class="enumeration_section">10.2.1</span>提供控制文件的文件名</h4>
                  <div>
                     <p>您可以使用数据库初始化参数文件中的<code class="codeph">CONTROL_FILES</code>初始化参数指定控制文件名。实例在启动期间识别并打开所有列出的文件，实例在数据库操作期间写入并维护所有列出的控制文件。
                     </p>
                     <p>如果在创建数据库之前未指定<code class="codeph">CONTROL_FILES</code>文件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果您未使用Oracle Managed Files，则数据库将创建控制文件并使用默认文件名。默认名称是特定于操作系统的。</p>
                        </li>
                        <li>
                           <p>如果您使用的是Oracle Managed Files，则设置为启用该功能的初始化参数将确定控制文件的名称和位置。</p>
                        </li>
                        <li>
                           <p>如果您使用的是Oracle自动存储管理（Oracle ASM），则可以在<code class="codeph">DB_CREATE_FILE_DEST</code>和<code class="codeph">DB_RECOVERY_FILE_DEST</code>初始化参数中放置不完整的Oracle ASM文件名。然后，Oracle ASM会在适当的位置自动创建控制文件。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-control-files.html#GUID-325C997D-2EE9-4577-8A9C-BA28F6907799" title="发出CREATE DATABASE语句时，将创建Oracle数据库的初始控制文件。">创建初始控制文件</a></li>
                           <li><a href="using-oracle-managed-files.html#GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" title="Oracle数据库可以管理组成数据库的文件。">使用Oracle托管文件</a></li>
                           <li><a href="../ostmg/asm-intro.html#OSTMG94061" target="_blank"><span class="italic">Oracle自动存储管理管理员指南</span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-737B0C7F-CED8-4B00-8428-DA11B35F9E9B" title="您可以遵循指南来管理数据库的控制文件。">控制文件的准则</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADMIN11284"></a><div class="props_rev_3"><a id="GUID-A3BC34A1-20A2-46E6-AF52-7E25845EFDC3" name="GUID-A3BC34A1-20A2-46E6-AF52-7E25845EFDC3"></a><h4 id="ADMIN-GUID-A3BC34A1-20A2-46E6-AF52-7E25845EFDC3" class="sect4"><span class="enumeration_section">10.2.2</span>不同磁盘上的Multiplex控制文件</h4>
                  <div>
                     <p>每个Oracle数据库应至少有两个控制文件，每个控制文件存储在不同的物理磁盘上。</p>
                     <p>如果控制文件因磁盘故障而损坏，则必须关闭关联的实例。修复磁盘驱动器后，可以使用来自另一个磁盘的控制文件的完整副本来恢复损坏的控制文件，并且可以重新启动实例。在这种情况下，不需要介质恢复。</p>
                     <p>多路复用控制文件的行为是这样的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库写入数据库初始化参数文件中为初始化参数<code class="codeph">CONTROL_FILES</code>列出的所有文件名。
                           </p>
                        </li>
                        <li>
                           <p>数据库只读取数据库操作期间<code class="codeph">CONTROL_FILES</code>参数中列出的第一个文件。
                           </p>
                        </li>
                        <li>
                           <p>如果任何控制文件在数据库操作期间变得不可用，则该实例将无法运行并应中止。</p>
                           <div class="infoboxnote" id="GUID-A3BC34A1-20A2-46E6-AF52-7E25845EFDC3__GUID-3A84AD22-22CA-4E25-8BA9-B1589FBF0AD5">
                              <p class="notep1">注意：</p>
                              <p>Oracle强烈建议您的数据库至少包含两个控制文件，并且它们位于不同的物理磁盘上。</p>
                           </div>
                        </li>
                     </ul>
                     <p>多路复用控制文件的一种方法是，如果重做日志复制，则在存储重做日志组成员的每个磁盘驱动器上存储控制文件副本。通过将控制文件存储在这些位置，可以最大程度地降低单个磁盘故障中所有控制文件和重做日志的所有组都将丢失的风险。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-737B0C7F-CED8-4B00-8428-DA11B35F9E9B" title="您可以遵循指南来管理数据库的控制文件。">控制文件的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11285"></a><div class="props_rev_3"><a id="GUID-BF439503-839A-4F50-A1E9-04754D1AEFBF" name="GUID-BF439503-839A-4F50-A1E9-04754D1AEFBF"></a><h4 id="ADMIN-GUID-BF439503-839A-4F50-A1E9-04754D1AEFBF" class="sect4"><span class="enumeration_section">10.2.3</span>备份控制文件</h4>
                  <div>
                     <p>备份控制文件非常重要。这在最初是正确的，并且每次更改数据库的物理结构时都是如此。</p>
                     <p>这种结构变化包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>添加，删除或重命名数据文件</p>
                        </li>
                        <li>
                           <p>添加或删除表空间，或更改表空间的读/写状态</p>
                        </li>
                        <li>
                           <p>添加或删除重做日志文件或组</p>
                        </li>
                     </ul>
                     <p>备份控制文件的方法在<span class="q">“ <a href="managing-control-files.html#GUID-204AF8CF-6C51-4D0F-ADE2-BA804352EA93" title="使用ALTER DATABASE BACKUP CONTROLFILE语句备份控制文件。">备份控制文件</a> ”</span>中讨论。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-737B0C7F-CED8-4B00-8428-DA11B35F9E9B" title="您可以遵循指南来管理数据库的控制文件。">控制文件的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11286"></a><div class="props_rev_3"><a id="GUID-5A44AEB4-9606-46F2-AF8E-3020B8746E2E" name="GUID-5A44AEB4-9606-46F2-AF8E-3020B8746E2E"></a><h4 id="ADMIN-GUID-5A44AEB4-9606-46F2-AF8E-3020B8746E2E" class="sect4"><span class="enumeration_section">10.2.4</span>管理控制文件的大小</h4>
                  <div>
                     <p>控制文件大小的主要决定因素是在<code class="codeph">CREATE DATABASE</code>语句中为创建关联数据库的<code class="codeph">MAXDATAFILES</code> ， <code class="codeph">MAXLOGFILES</code> ， <code class="codeph">MAXLOGMEMBERS</code> ， <code class="codeph">MAXLOGHISTORY</code>和<code class="codeph">MAXINSTANCES</code>参数设置的值。
                     </p>
                     <p>增加这些参数的值会增加关联数据库的控制文件的大小。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5A44AEB4-9606-46F2-AF8E-3020B8746E2E__GUID-644ECE52-7D5F-4A21-AABF-895F0F2548C5">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>特定于操作系统的Oracle文档包含有关最大控制文件大小的详细信息。</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">CREATE DATABASE</code>语句的说明，请<a href="../sqlrf/CREATE-DATABASE.html#SQLRF01204" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a> <span class="italic"> </span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-737B0C7F-CED8-4B00-8428-DA11B35F9E9B" title="您可以遵循指南来管理数据库的控制文件。">控制文件的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN10064"></a><div class="props_rev_3"><a id="GUID-9CBB8320-E2F6-4BDB-9B1C-A7B801F97F73" name="GUID-9CBB8320-E2F6-4BDB-9B1C-A7B801F97F73"></a><h3 id="ADMIN-GUID-9CBB8320-E2F6-4BDB-9B1C-A7B801F97F73" class="sect3"><span class="enumeration_section">10.3</span>创建控制文件</h3>
               <p>您可以创建，复制，重命名和重定位控制文件。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-325C997D-2EE9-4577-8A9C-BA28F6907799">创建初始控制文件</a><br>发出<code class="codeph">CREATE DATABASE</code>语句时，将创建Oracle数据库的初始控制文件。
                     </li>
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-9C41ADFB-5A26-4FFB-8582-41A33B2F5C53">创建其他副本，重命名和重定位控制文件</a><br>您可以通过将现有控制文件复制到新位置并将文件名添加到控制文件列表来创建用于多路复用的附加控制文件副本。
                     </li>
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-9B2E206A-C7E0-4409-9EE2-7501F2BDB696">创建新的控制文件</a><br>当数据库的所有控制文件都已永久损坏且您没有控制文件备份或您想要更改数据库名称时，可以创建新的控制文件。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" title="您可以创建，备份和删除控制文件。">管理控制文件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11287"></a><div class="props_rev_3"><a id="GUID-325C997D-2EE9-4577-8A9C-BA28F6907799" name="GUID-325C997D-2EE9-4577-8A9C-BA28F6907799"></a><h4 id="ADMIN-GUID-325C997D-2EE9-4577-8A9C-BA28F6907799" class="sect4"><span class="enumeration_section">10.3.1</span>创建初始控制文件</h4>
                  <div>
                     <p>发出<code class="codeph">CREATE DATABASE</code>语句时，将创建Oracle数据库的初始控制文件。
                     </p>
                     <div class="section">
                        <p>控制文件的名称由数据库创建期间使用的初始化参数文件中的<code class="codeph">CONTROL_FILES</code>参数指定。<code class="codeph">CONTROL_FILES</code>指定的文件名应完全指定，并且是特定于操作系统的。以下是<code class="codeph">CONTROL_FILES</code>初始化参数的示例：</p><pre class="oac_no_warn" dir="ltr">CONTROL_FILES =（/ u01 / oracle / prod / control01.ctl，/ u02 / oracle / prod / control02.ctl，/ u03 / oracle / prod / control03.ctl）</pre><p>如果在创建数据库时当前存在具有指定名称的文件，则必须在<code class="codeph">CREATE DATABASE</code>语句中指定<code class="codeph">CONTROLFILE REUSE</code>子句，否则会发生错误。此外，如果旧控制文件的<code class="codeph">SIZE</code>与新控制文件的<code class="codeph">SIZE</code>参数不同，则不能使用<code class="codeph">REUSE</code>子句。
                        </p>
                        <p>控制文件的大小在某些版本的Oracle数据库之间以及控制文件中指定的文件数更改时发生更改。<code class="codeph">MAXLOGFILES</code> ， <code class="codeph">MAXLOGMEMBERS</code> ， <code class="codeph">MAXLOGHISTORY</code> ， <code class="codeph">MAXDATAFILES</code>和<code class="codeph">MAXINSTANCES</code>等配置参数会影响控制文件的大小。
                        </p>
                        <p>您可以随后更改<code class="codeph">CONTROL_FILES</code>初始化参数的值以添加更多控制文件或更改现有控制文件的名称或位置。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-325C997D-2EE9-4577-8A9C-BA28F6907799__GUID-E3B9779B-2045-428C-926F-47D8D1392C66">
                        <p class="notep1">也可以看看：</p>
                        <p>特定于操作系统的Oracle文档包含有关指定控制文件的详细信息。</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-9CBB8320-E2F6-4BDB-9B1C-A7B801F97F73" title="您可以创建，复制，重命名和重定位控制文件。">创建控制文件</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11288"></a><div class="props_rev_3"><a id="GUID-9C41ADFB-5A26-4FFB-8582-41A33B2F5C53" name="GUID-9C41ADFB-5A26-4FFB-8582-41A33B2F5C53"></a><h4 id="ADMIN-GUID-9C41ADFB-5A26-4FFB-8582-41A33B2F5C53" class="sect4"><span class="enumeration_section">10.3.2</span>创建其他副本，重命名和重定位控制文件</h4>
                  <div>
                     <p>您可以通过将现有控制文件复制到新位置并将文件名添加到控制文件列表来创建用于多路复用的附加控制文件副本。</p>
                     <div class="section">
                        <p>同样，您可以通过将文件复制到新名称或位置以及更改控制文件列表中的文件名来重命名现有控制文件。在这两种情况下，为了保证控制文件在过程中不会更改，请在复制控制文件之前关闭数据库。</p>
                        <p>要添加当前控制文件的多路复用副本或重命名控制文件：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>关闭数据库。</span></li>
                        <li><span>使用操作系统命令将现有控制文件复制到新位置。</span></li>
                        <li><span>编辑数据库初始化参数文件中的<code class="codeph">CONTROL_FILES</code>参数以添加新控制文件名，或更改现有控制文件名。</span></li>
                        <li><span>重启数据库。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-9CBB8320-E2F6-4BDB-9B1C-A7B801F97F73" title="您可以创建，复制，重命名和重定位控制文件。">创建控制文件</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11289"></a><div class="props_rev_3"><a id="GUID-9B2E206A-C7E0-4409-9EE2-7501F2BDB696" name="GUID-9B2E206A-C7E0-4409-9EE2-7501F2BDB696"></a><h4 id="ADMIN-GUID-9B2E206A-C7E0-4409-9EE2-7501F2BDB696" class="sect4"><span class="enumeration_section">10.3.3</span>创建新的控制文件</h4>
                  <p>当数据库的所有控制文件都已永久损坏且您没有控制文件备份或您想要更改数据库名称时，可以创建新的控制文件。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-control-files.html#GUID-553F209C-EE30-4637-8344-BB26FE3AA088">何时创建新的控制文件</a><br>您必须在某些情况下创建新的控制文件。
                        </li>
                        <li class="ulchildlink"><a href="managing-control-files.html#GUID-E4677C95-CDBE-4FB5-9A9E-A227B3547FAE">CREATE CONTROLFILE语句</a><br>您可以使用<code class="codeph">CREATE CONTROLFILE</code>语句为数据库创建新的控制文件。
                        </li>
                        <li class="ulchildlink"><a href="managing-control-files.html#GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40">创建新的控制文件</a><br>您可以为数据库创建新的控制文件。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-9CBB8320-E2F6-4BDB-9B1C-A7B801F97F73" title="您可以创建，复制，重命名和重定位控制文件。">创建控制文件</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11290"></a><div class="props_rev_3"><a id="GUID-553F209C-EE30-4637-8344-BB26FE3AA088" name="GUID-553F209C-EE30-4637-8344-BB26FE3AA088"></a><h5 id="ADMIN-GUID-553F209C-EE30-4637-8344-BB26FE3AA088" class="sect5"><span class="enumeration_section">10.3.3.1</span>何时创建新的控制文件</h5>
                     <div>
                        <p>您必须在某些情况下创建新的控制文件。</p>
                        <p>在以下情况下，您需要创建新的控制文件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>数据库的所有控制文件都已永久损坏，并且您没有控制文件备份。</p>
                           </li>
                           <li>
                              <p>您想要更改数据库名称。</p>
                              <p>例如，如果数据库名称与分布式环境中的另一个数据库名称冲突，则应更改该名称。</p>
                              <div class="infoboxnote" id="GUID-553F209C-EE30-4637-8344-BB26FE3AA088__GUID-4780F592-87EC-476C-9248-48D6904796AF">
                                 <p class="notep1">注意：</p>
                                 <p>您可以使用DBNEWID实用程序更改数据库名称和DBID（内部数据库标识符）。有关使用此实用<a href="../sutil/oracle-dbnewid-utility.html#SUTIL014" target="_blank"><span class="italic">程序</span></a>的信息，请参见<a href="../sutil/oracle-dbnewid-utility.html#SUTIL014" target="_blank"><span class="italic">Oracle数据库实用</span></a>程序
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-9B2E206A-C7E0-4409-9EE2-7501F2BDB696" title="当数据库的所有控制文件都已永久损坏且您没有控制文件备份或您想要更改数据库名称时，可以创建新的控制文件。">创建新控制文件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11291"></a><div class="props_rev_3"><a id="GUID-E4677C95-CDBE-4FB5-9A9E-A227B3547FAE" name="GUID-E4677C95-CDBE-4FB5-9A9E-A227B3547FAE"></a><h5 id="ADMIN-GUID-E4677C95-CDBE-4FB5-9A9E-A227B3547FAE" class="sect5"><span class="enumeration_section">10.3.3.2</span> CREATE CONTROLFILE语句</h5>
                     <div>
                        <p>您可以使用<code class="codeph">CREATE CONTROLFILE</code>语句为数据库创建新的控制文件。
                        </p>
                        <p>以下语句为<code class="codeph">prod</code>数据库（以前使用不同数据库名称的数据库）创建新的控制文件：</p><pre class="oac_no_warn" dir="ltr">CREATE CONTROLFILE SET DATABASE prod LOGFILE GROUP 1（'/ u01/oracle/prod/redo01_01.log','/u01/oracle/prod/redo01_02.log'），GROUP 2（'/ u01 / oracle /prod / redo02_01.log '，'/ u01 / oracle / prod / redo02_02.log'），GROUP 3（'/ u01/oracle/prod/redo03_01.log'，'/ u01 / oracle / prod / redo03_02.log'）RESETLOGS DATAFILE'/ u01 /oracle/prod/system01.dbf'SIZE 3M，'/ u01 / oracle / prod / rbs01.dbs'SIZE 5M，'/ u01 / oracle /prod / users01.dbs'SIZE 5M，'/ u01 / oracle / prod / temp01.dbs'尺寸5M MAXLOGFILES 50 MAXLOGMEMBERS 3 MAXLOGHISTORY 400 MAXDATAFILES 200 MAXINSTANCES 6 ARCHIVELOG;</pre><div class="infoboxnote" id="GUID-E4677C95-CDBE-4FB5-9A9E-A227B3547FAE__GUID-BC3E24FA-0E90-4B4F-BEFD-899B87FEC7FA">
                           <p class="notep1">注意：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">CREATE CONTROLFILE</code>语句可能会损坏指定的数据文件和重做日志文件。省略文件名可能会导致该文件中的数据丢失，或者无法访问整个数据库。发出此声明时请小心，并确保按照<span class="q">“ <a href="managing-control-files.html#GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40" title="您可以为数据库创建新的控制文件。">创建新控制文件</a> ”中</span>的说明进行操作。
                                 </p>
                              </li>
                              <li>
                                 <p>如果数据库在创建新控制文件之前已启用强制日志记录，并且您希望继续启用它，则必须在<code class="codeph">CREATE CONTROLFILE</code>语句中指定<code class="codeph">FORCE LOGGING</code>子句。请参阅<span class="q">“ <a href="creating-and-configuring-an-oracle-database.html#GUID-ACEA5B83-D70F-4F30-A85B-3030248F597B" title="某些数据定义语言语句（如CREATE TABLE）允许使用NOLOGGING子句，这会导致某些数据库操作不在数据库重做日志中生成重做记录。NOLOGGING设置可以加速可以在数据库恢复机制之外轻松恢复的操作，但它可能会对介质恢复和备用数据库产生负面影响。">指定FORCE记录模式</a> ”</span> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E4677C95-CDBE-4FB5-9A9E-A227B3547FAE__GUID-FFD0F74A-EED9-42D4-8989-6257436AA6CC">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../sqlrf/CREATE-CONTROLFILE.html#SQLRF01203" target="_blank"><span class="italic">“Oracle数据库SQL语言参考”</span></a>介绍了<code class="codeph">CREATE CONTROLFILE</code>语句的完整语法</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-9B2E206A-C7E0-4409-9EE2-7501F2BDB696" title="当数据库的所有控制文件都已永久损坏且您没有控制文件备份或您想要更改数据库名称时，可以创建新的控制文件。">创建新控制文件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11292"></a><div class="props_rev_3"><a id="GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40" name="GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40"></a><h5 id="ADMIN-GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40" class="sect5"><span class="enumeration_section">10.3.3.3</span>创建新的控制文件</h5>
                     <div>
                        <p>您可以为数据库创建新的控制文件。</p>
                        <div class="section">
                           <p>完成以下步骤以创建新的控制文件。</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>列出数据库的所有数据文件和重做日志文件。</span><div>
                                 <p>如果您按照<span class="q">“ <a href="managing-control-files.html#GUID-204AF8CF-6C51-4D0F-ADE2-BA804352EA93" title="使用ALTER DATABASE BACKUP CONTROLFILE语句备份控制文件。">备份控制文件</a> ”中所述</span>遵循控制文件备份的建议，则您将拥有反映数据库当前结构的数据文件和重做日志文件的列表。但是，如果您没有此类列表，则执行以下语句将生成一个。
                                 </p><pre class="oac_no_warn" dir="ltr">从V $ LOGFILE中选择成员;从V $ DATAFILE中选择名称;从V $ PARAMETER中选择值，其中NAME ='control_files';</pre><p>如果您没有此类列表并且您的控制文件已损坏而无法打开数据库，请尝试查找构成数据库的所有数据文件和重做日志文件。创建新控制文件后，步骤<a href="managing-control-files.html#GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__I1006387">5</a>中未指定的任何文件都不可恢复。此外，如果省略组成<code class="codeph">SYSTEM</code>表空间的任何文件，则可能无法恢复数据库。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>关闭数据库。</span><div>
                                 <p>如果数据库已打开，请尽可能正常关闭数据库。仅作为最后的手段使用<code class="codeph">IMMEDIATE</code>或<code class="codeph">ABORT</code>子句。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand" id="GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__I1006381"><span>备份数据库的所有数据文件和重做日志文件。</span></li>
                           <li class="stepexpand" id="GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__I1006383"><span>启动新实例，但不要装入或打开数据库：</span><div><pre class="oac_no_warn" dir="ltr">启动NOMOUNT</pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__I1006387"><span>使用<code class="codeph">CREATE CONTROLFILE</code>语句为数据库创建新的控制文件。</span><div>
                                 <p>创建新控制文件时，如果除控制文件外还丢失了任何重做日志组，请指定<code class="codeph">RESETLOGS</code>子句。在这种情况下，您需要从丢失重做日志中恢复（步骤<a href="managing-control-files.html#GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__I1006408">8</a> ）。如果已重命名数据库，则必须指定<code class="codeph">RESETLOGS</code>子句。否则，请选择<code class="codeph">NORESETLOGS</code>子句。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>将新控制文件的备份存储在脱机存储设备上。有关创建备份的说明，请参阅<span class="q">“ <a href="managing-control-files.html#GUID-204AF8CF-6C51-4D0F-ADE2-BA804352EA93" title="使用ALTER DATABASE BACKUP CONTROLFILE语句备份控制文件。">备份控制文件</a> ”</span> 。</span></li>
                           <li class="stepexpand"><span>编辑数据库的<code class="codeph">CONTROL_FILES</code>初始化参数，以指示现在是步骤<a href="managing-control-files.html#GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__I1006387">5中</a>创建的数据库的所有控制文件（不包括备份控制文件）。如果要重命名数据库，请编辑实例参数文件中的<code class="codeph">DB_NAME</code>参数以指定新名称。</span></li>
                           <li class="stepexpand" id="GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__I1006408"><span>必要时恢复数据库。如果您没有恢复数据库，请跳至步骤<a href="managing-control-files.html#GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__I1006418">9</a> 。</span><div>
                                 <p>如果要在恢复过程中创建控制文件，请恢复数据库。如果使用<code class="codeph">NORESETLOGS</code>子句创建新控制文件，则可以使用完整，已关闭的数据库恢复来恢复数据库。
                                 </p>
                                 <p>如果使用<code class="codeph">RESETLOGS</code>子句创建新控制文件，则必须指定<code class="codeph">USING BACKUP CONTROL FILE</code> 。如果丢失了联机重做日志，归档重做日志文件或数据文件，请使用恢复这些文件的过程。
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__GUID-6517F008-0197-4109-AC4E-46552D36574A">
                                    <p class="notep1">也可以看看：</p>
                                    <p><a href="../bradv/user-managed-recovery-advanced.html#BRADV-GUID-9152B9A8-308A-4871-B835-53AF7593E65D" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a> ，了解有关恢复数据库的信息以及恢复丢失的控制文件的方法</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand" id="GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__I1006418"><span>使用以下方法之一打开数据库：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果未执行恢复，或者在步骤<a href="managing-control-files.html#GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40__I1006408">8中</a>执行了完整的已关闭数据库恢复，请正常打开数据库。
                                       </p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN;</pre></li>
                                    <li>
                                       <p>如果在创建控制文件时指定了<code class="codeph">RESETLOGS</code> ，请使用<code class="codeph">ALTER DATABASE</code>语句，指示<code class="codeph">RESETLOGS</code> 。</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN RESETLOGS;</pre></li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>数据库现已打开并可供使用。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-9B2E206A-C7E0-4409-9EE2-7501F2BDB696" title="当数据库的所有控制文件都已永久损坏且您没有控制文件备份或您想要更改数据库名称时，可以创建新的控制文件。">创建新控制文件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN11293"></a><div class="props_rev_3"><a id="GUID-4D4D22BE-1619-46BD-B22C-7409B35923AA" name="GUID-4D4D22BE-1619-46BD-B22C-7409B35923AA"></a><h3 id="ADMIN-GUID-4D4D22BE-1619-46BD-B22C-7409B35923AA" class="sect3"><span class="enumeration_section">10.4</span>创建控制文件后的故障排除</h3>
               <p>发出<code class="codeph">CREATE CONTROLFILE</code>语句后，您可能会遇到一些错误。
               </p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-5414BE14-EC3C-47C6-ABAA-8130F482DD35">检查丢失或额外的文件</a><br>创建新控制文件并使用它打开数据库后，检查警报日志以查看数据库是否检测到数据字典与控制文件之间存在不一致，例如数据字典中的数据文件包含控制文件没有清单。
                     </li>
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-61DB4CED-65B5-41AF-8ECD-DDFDA0771B08">在CREATE CONTROLFILE期间处理错误</a><br>如果在创建新控制文件后尝试装入和打开数据库时Oracle数据库发送错误，则最可能的原因是您从<code class="codeph">CREATE CONTROLFILE</code>语句中省略了一个文件，或者包含了一个不应该列出的文件。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" title="您可以创建，备份和删除控制文件。">管理控制文件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11294"></a><div class="props_rev_3"><a id="GUID-5414BE14-EC3C-47C6-ABAA-8130F482DD35" name="GUID-5414BE14-EC3C-47C6-ABAA-8130F482DD35"></a><h4 id="ADMIN-GUID-5414BE14-EC3C-47C6-ABAA-8130F482DD35" class="sect4"><span class="enumeration_section">10.4.1</span>检查丢失或额外文件</h4>
                  <div>
                     <p>创建新控制文件并使用它打开数据库后，检查警报日志以查看数据库是否检测到数据字典与控制文件之间存在不一致，例如数据字典中的数据文件包含控制文件没有清单。</p>
                     <div class="section">
                        <p>如果数据字典中存在数据文件但新控制文件中不存在，则数据库在控制文件中以名称<code class="codeph">MISSING</code> <span class="italic"><code class="codeph">nnnn</code></span>创建占位符条目，其中<span class="italic"><code class="codeph">nnnn</code></span> <span class="italic"> </span>是十进制的文件号。<code class="codeph">MISSING</code> <span class="italic"><code class="codeph">nnnn</code></span>在控制文件中标记为脱机并需要介质恢复。
                        </p>
                        <p>如果与<code class="codeph">MISSING</code> <span class="italic"><code class="codeph">nnnn</code></span>对应的实际数据文件是只读或离线正常，则可以通过将<code class="codeph">MISSING</code> <span class="italic"><code class="codeph">nnnn</code></span>重命名为实际数据文件的名称来访问数据文件。如果<code class="codeph">MISSING</code> <span class="italic"><code class="codeph">nnnn</code></span>对应于非只读或脱机正常的数据文件，则无法使用重命名操作使数据文件可访问，因为数据文件需要<code class="codeph">RESETLOGS</code>结果排除的介质恢复。在这种情况下，您必须删除包含数据文件的表空间。
                        </p>
                        <p>相反，如果控制文件中列出的数据文件不存在于数据字典中，则数据库将从新控制文件中删除对它的引用。在这两种情况下，数据库都在警报日志中包含一条解释性消息，以便让您知道发现了什么。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-4D4D22BE-1619-46BD-B22C-7409B35923AA" title="发出CREATE CONTROLFILE语句后，您可能会遇到一些错误。">创建控制文件后的故障排除</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11295"></a><div class="props_rev_3"><a id="GUID-61DB4CED-65B5-41AF-8ECD-DDFDA0771B08" name="GUID-61DB4CED-65B5-41AF-8ECD-DDFDA0771B08"></a><h4 id="ADMIN-GUID-61DB4CED-65B5-41AF-8ECD-DDFDA0771B08" class="sect4"><span class="enumeration_section">10.4.2</span>在CREATE CONTROLFILE期间处理错误</h4>
                  <div>
                     <p>如果在创建新控制文件后尝试装入和打开数据库时Oracle数据库发送错误，则最可能的原因是您从<code class="codeph">CREATE CONTROLFILE</code>语句中省略了一个文件，或者包含了一个不应该列出的文件。
                     </p>
                     <div class="section">
                        <p>通常，错误是<code class="codeph">ORA-01173</code> ， <code class="codeph">ORA-01176</code> ， <code class="codeph">ORA-01177</code> ， <code class="codeph">ORA-01215</code>或<code class="codeph">ORA-01216</code> 。在这种情况下，您应该还原在<span class="q">“ <a href="managing-control-files.html#GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40" title="You can create new control files for your database.">创建新控制文件</a> ”中</span>备份的<span class="q"><a href="managing-control-files.html#GUID-3F2B3E3B-F53C-41C9-A902-3CABFCF4EB40" title="您可以为数据库创建新的控制文件。">文件，</a></span>并使用正确的文件名重复该任务中的过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-4D4D22BE-1619-46BD-B22C-7409B35923AA" title="发出CREATE CONTROLFILE语句后，您可能会遇到一些错误。">创建控制文件后的故障排除</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11296"></a><div class="props_rev_3"><a id="GUID-204AF8CF-6C51-4D0F-ADE2-BA804352EA93" name="GUID-204AF8CF-6C51-4D0F-ADE2-BA804352EA93"></a><h3 id="ADMIN-GUID-204AF8CF-6C51-4D0F-ADE2-BA804352EA93" class="sect3"><span class="enumeration_section">10.5</span>备份控制文件</h3>
               <div>
                  <p>使用<code class="codeph">ALTER DATABASE BACKUP CONTROLFILE</code>语句备份控制文件。
                  </p>
                  <div class="section">
                     <p>您有两种选择：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用以下语句将控制文件备份到二进制文件（现有控制文件的副本）：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE BACKUP CONTROLFILE to'/oracle/backup/control.bkp';</pre></li>
                        <li>
                           <p>生成以后可用于重新创建控制文件的SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE BACKUP CONTROLFILE to TRACE;</pre><p>此命令将SQL脚本写入跟踪文件，在该文件中可以捕获和编辑该脚本以重现控制文件。查看警报日志以确定跟踪文件的名称和位置。</p>
                           <div class="infoboxnotealso" id="GUID-204AF8CF-6C51-4D0F-ADE2-BA804352EA93__GUID-71BA9E7D-632D-4D09-9177-46591148CE5F">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关备份控制文件的详细信息，请参见<a href="../bradv/backing-up-database.html#BRADV89517" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="diagnosing-and-resolving-problems.html#GUID-D6512D97-FFC3-4BF0-BF50-1F77D150C922" title="您可以使用文本编辑器，Cloud Control或ADRCI实用程序查看警报日志。">查看警报日志</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" title="您可以创建，备份和删除控制文件。">管理控制文件</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11297"></a><div class="props_rev_3"><a id="GUID-D6662264-5149-4394-BE10-28C3047A8343" name="GUID-D6662264-5149-4394-BE10-28C3047A8343"></a><h3 id="ADMIN-GUID-D6662264-5149-4394-BE10-28C3047A8343" class="sect3"><span class="enumeration_section">10.6</span>使用当前副本恢复控制文件</h3>
               <p>您可以从当前备份或多路复用副本中恢复控制文件。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-EF0BDE73-74D7-48E7-89E1-9CA09000C58E">使用控制文件复制从控制文件损坏中恢复</a><br>如果控制文件已损坏，则可以使用控制文件副本进行恢复。
                     </li>
                     <li class="ulchildlink"><a href="managing-control-files.html#GUID-1D5E1025-2FD5-4A72-B250-1F99CE36AAA8">使用控制文件复制从永久性介质故障中恢复</a><br>如果存在永久性介质故障，则可以使用控制文件副本进行恢复。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" title="您可以创建，备份和删除控制文件。">管理控制文件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11298"></a><div class="props_rev_3"><a id="GUID-EF0BDE73-74D7-48E7-89E1-9CA09000C58E" name="GUID-EF0BDE73-74D7-48E7-89E1-9CA09000C58E"></a><h4 id="ADMIN-GUID-EF0BDE73-74D7-48E7-89E1-9CA09000C58E" class="sect4"><span class="enumeration_section">10.6.1</span>使用控制文件复制从控制文件损坏中恢复</h4>
                  <div>
                     <p>如果控制文件已损坏，则可以使用控制文件副本进行恢复。</p>
                     <div class="section">
                        <p>此方法假定<code class="codeph">CONTROL_FILES</code>参数中指定的控制文件之一已损坏，控制文件目录仍可访问，并且您具有控制文件的多路复制副本。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>关闭实例后，使用操作系统命令用良好的副本覆盖错误的控制文件：</span><div><pre class="oac_no_warn" dir="ltr">％cp /u03/oracle/prod/control03.ctl /u02/oracle/prod/control02.ctl</pre></div>
                        </li>
                        <li class="stepexpand"><span>启动SQL * Plus并打开数据库：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; STARTUP</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-D6662264-5149-4394-BE10-28C3047A8343" title="您可以从当前备份或多路复用副本中恢复控制文件。">使用当前副本恢复控制文件</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11299"></a><div class="props_rev_3"><a id="GUID-1D5E1025-2FD5-4A72-B250-1F99CE36AAA8" name="GUID-1D5E1025-2FD5-4A72-B250-1F99CE36AAA8"></a><h4 id="ADMIN-GUID-1D5E1025-2FD5-4A72-B250-1F99CE36AAA8" class="sect4"><span class="enumeration_section">10.6.2</span>使用控制文件复制从永久性介质故障中恢复</h4>
                  <div>
                     <p>如果存在永久性介质故障，则可以使用控制文件副本进行恢复。</p>
                     <div class="section">
                        <p>此方法假定<code class="codeph">CONTROL_FILES</code>参数中指定的控制文件之一由于永久性介质故障而无法访问，并且您具有控制文件的多路复制副本。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>关闭实例后，使用操作系统命令将控制文件的当前副本复制到新的可访问位置：</span><div><pre class="oac_no_warn" dir="ltr">％cp /u01/oracle/prod/control01.ctl /u04/oracle/prod/control03.ctl</pre></div>
                        </li>
                        <li class="stepexpand"><span>编辑初始化参数文件中的<code class="codeph">CONTROL_FILES</code>参数，以使用新位置替换错误位置：</span><div><pre class="oac_no_warn" dir="ltr">CONTROL_FILES =（/ u01/oracle/prod/control01.ctl,/u02/oracle/prod/control02.ctl,/u04/oracle/prod/control03.ctl）</pre></div>
                        </li>
                        <li class="stepexpand"><span>启动SQL * Plus并打开数据库：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; STARTUP</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>如果您有多路复用控制文件，则可以通过编辑<code class="codeph">CONTROL_FILES</code>初始化参数来快速启动数据库。从<code class="codeph">CONTROL_FILES</code>设置中删除错误的控制文件，您可以立即重新启动数据库。然后，您可以执行错误控制文件的重建，稍后在编辑<code class="codeph">CONTROL_FILES</code>初始化参数后关闭并重新启动数据库以包括恢复的控制文件。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-D6662264-5149-4394-BE10-28C3047A8343" title="您可以从当前备份或多路复用副本中恢复控制文件。">使用当前副本恢复控制文件</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11300"></a><div class="props_rev_3"><a id="GUID-AB003834-2392-4B99-ADBD-497636A2E096" name="GUID-AB003834-2392-4B99-ADBD-497636A2E096"></a><h3 id="ADMIN-GUID-AB003834-2392-4B99-ADBD-497636A2E096" class="sect3"><span class="enumeration_section">10.7</span>删除控制文件</h3>
               <div>
                  <p>您可以删除控制文件，但数据库应始终至少有两个控制文件。</p>
                  <div class="section">
                     <p>您希望从数据库中删除控制文件，例如，如果控制文件的位置不再合适。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>关闭数据库。</span></li>
                     <li class="stepexpand"><span>编辑数据库初始化参数文件中的<code class="codeph">CONTROL_FILES</code>参数以删除旧的控制文件名。</span></li>
                     <li class="stepexpand"><span>重启数据库。</span><div>
                           <div class="infoboxnote" id="GUID-AB003834-2392-4B99-ADBD-497636A2E096__GUID-4FFA5680-6F59-4A66-A0C0-8B1F45BA674C">
                              <p class="notep1">注意：</p>
                              <p>此操作不会从磁盘中物理删除不需要的控制文件。从数据库中删除控制文件后，使用操作系统命令删除不需要的文件。</p>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" title="您可以创建，备份和删除控制文件。">管理控制文件</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11301"></a><div class="props_rev_3"><a id="GUID-B0AB9343-301E-45C8-AACC-5BC9C85CB2CD" name="GUID-B0AB9343-301E-45C8-AACC-5BC9C85CB2CD"></a><h3 id="ADMIN-GUID-B0AB9343-301E-45C8-AACC-5BC9C85CB2CD" class="sect3"><span class="enumeration_section">10.8</span>控制文件数据字典视图</h3>
               <div>
                  <p>您可以查询一组数据字典视图，以获取有关控制文件的信息。</p>
                  <div class="section">
                     <p>以下视图显示有关控制文件的信息：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-B0AB9343-301E-45C8-AACC-5BC9C85CB2CD__GUID-694149CE-7943-4477-8C11-F12B23E509CC">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column lists views that display information about control files. The second column describes each view." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="38%" id="d130393e1928">视图</th>
                              <th align="left" valign="bottom" width="62%" id="d130393e1931">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d130393e1936" headers="d130393e1928 ">
                                 <p><code class="codeph">V $ DATABASE</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d130393e1936 d130393e1931 ">
                                 <p>显示控制文件中的数据库信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d130393e1945" headers="d130393e1928 ">
                                 <p><code class="codeph">V $ CONTROLFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d130393e1945 d130393e1931 ">
                                 <p>列出控制文件的名称</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d130393e1953" headers="d130393e1928 ">
                                 <p><code class="codeph">V $ CONTROLFILE_RECORD_SECTION</code></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d130393e1953 d130393e1931 ">
                                 <p>显示有关控制文件记录部分的信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d130393e1961" headers="d130393e1928 ">
                                 <p><code class="codeph">V $ PARAMETER</code></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d130393e1961 d130393e1931 ">
                                 <p>显示<code class="codeph">CONTROL_FILES</code>初始化参数中指定的控制文件的名称</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>此示例列出了控制文件的名称。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT NAME FROM V $ CONTROLFILE; NAME ------------------------------------- /u01/oracle/prod/control01.ctl / u02 /oracle/prod/control02.ctl /u03/oracle/prod/control03.ctl</pre><p></p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-control-files.html#GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" title="您可以创建，备份和删除控制文件。">管理控制文件</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
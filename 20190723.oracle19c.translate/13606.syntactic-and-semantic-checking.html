<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>句法和语义检查</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide to the Oracle Precompilers"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide to the Oracle Precompilers"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="programmers-guide-oracle-precompilers.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T01:36:30-08:00"></meta>
      <meta name="dcterms.title" content="Programmer&#39;s Guide to the Oracle Precompilers"></meta>
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96474-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="performance-tuning.html" title="Previous" type="text/html"></link>
      <link rel="next" href="embedded-SQL-commands-and-directives.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ZZPRE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="performance-tuning.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="embedded-SQL-commands-and-directives.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南Oracle预编译器</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">句法和语义检查</li>
            </ol>
            <a id="GUID-4016A45F-5442-4C73-9E31-01F7A032C662" name="GUID-4016A45F-5442-4C73-9E31-01F7A032C662"></a><a id="ZZPRE985"></a>
            
            <h2 id="ZZPRE-GUID-4016A45F-5442-4C73-9E31-01F7A032C662" class="sect2"><span class="enumeration_chapter">D</span>句法和语义检查</h2>
         </header>
         <div class="ind">
            <div>
               <p>本附录包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="syntactic-and-semantic-checking.html#GUID-E6B85C01-31C6-45BF-AB12-3AA4937A978A">什么是句法和语义检查？</a></p>
                  </li>
                  <li>
                     <p><a href="syntactic-and-semantic-checking.html#GUID-16E9C554-91F8-4398-AC79-211D5BFFDA15">关于控制检查的类型和范围</a></p>
                  </li>
                  <li>
                     <p><a href="syntactic-and-semantic-checking.html#GUID-263EE74F-3684-4D72-AA07-B265193A3770">关于指定SQLCHECK = SEMANTICS</a></p>
                  </li>
               </ul>
               <p>通过检查嵌入式SQL语句和PL / SQL块的语法和语义，Oracle预编译器可帮助您快速查找和修复编码错误。这个<a id="d84820e38" class="indexterm-anchor"></a>附录说明如何使用<code class="codeph">SQLCHECK</code>选项来控制检查的类型和范围。
               </p>
            </div><a id="ZZPRE986"></a><div class="props_rev_3"><a id="GUID-E6B85C01-31C6-45BF-AB12-3AA4937A978A" name="GUID-E6B85C01-31C6-45BF-AB12-3AA4937A978A"></a><h3 id="ZZPRE-GUID-E6B85C01-31C6-45BF-AB12-3AA4937A978A" class="sect3"><span class="enumeration_section">D.1</span>什么是句法和语义检查？
               </h3>
               <div>
                  <p>语法规则指定语言元素如何排序以形成有效语句。因此， <span class="italic">语法检查会</span>验证关键字，对象名称，运算符，分隔符等是否正确放置在SQL语句中。例如，以下嵌入式SQL语句包含语法错误：</p><pre class="oac_no_warn" dir="ltr">- 拼写错误的关键字WHERE EXEC SQL DELETE FROM EMP WERE DEPTNO = 20; - 列名称缺少括号COMM和SAL EXEC SQL INSERT INTO EMP COMM，SAL VALUES（NULL，1500）;</pre><p>语义规则指定如何进行有效的外部引用。因此， <span class="italic">语义检查</span>验证对数据库对象和主机变量的引用是否有效以及主机变量数据类型是否正确。例如，以下嵌入式SQL语句包含语义错误：</p><pre class="oac_no_warn" dir="ltr">- 不存在的表，EMPP EXEC SQL DELETE FROM EMPP WHERE DEPTNO = 20; - 未声明的主机变量，emp_name EXEC SQL SELECT * FROM EMP WHERE ENAME =：emp_name;</pre><p>SQL语法和语义的规则在<a href="../sqlrf/Introduction-to-Oracle-SQL.html#SQLRF-GUID-049B7AE8-11E1-4110-B3E4-D117907D77AC" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a>中定义。
                  </p>
               </div>
            </div><a id="ZZPRE987"></a><div class="props_rev_3"><a id="GUID-16E9C554-91F8-4398-AC79-211D5BFFDA15" name="GUID-16E9C554-91F8-4398-AC79-211D5BFFDA15"></a><h3 id="ZZPRE-GUID-16E9C554-91F8-4398-AC79-211D5BFFDA15" class="sect3"><span class="enumeration_section">D.2</span>关于控制检查的类型和范围</h3>
               <div>
                  <p><a id="d84820e114" class="indexterm-anchor"></a>您可以通过指定来控制检查的类型和范围<a id="d84820e119" class="indexterm-anchor"></a>命令行上的<code class="codeph">SQLCHECK</code>选项。使用<code class="codeph">SQLCHECK</code> ，检查的类型可以是语法，语义或两者。检查的范围可以包括数据操作语句和PL / SQL块。但是， <code class="codeph">SQLCHECK</code>无法检查动态SQL语句，因为它们在运行时才完全定义。
                  </p>
                  <p>您可以为<code class="codeph">SQLCHECK</code>指定以下值：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">语义| FULL</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">语法|有限公司| NONE</code></p>
                     </li>
                  </ul>
                  <p><code class="codeph">SEMANTICS</code>和<code class="codeph">FULL</code>的值是等价的， <code class="codeph">SYNTAX</code>和<code class="codeph">LIMITED</code>的值也是等价的。默认值为<code class="codeph">SYNTAX</code> 。</p>
               </div>
            </div><a id="ZZPRE988"></a><div class="props_rev_3"><a id="GUID-263EE74F-3684-4D72-AA07-B265193A3770" name="GUID-263EE74F-3684-4D72-AA07-B265193A3770"></a><h3 id="ZZPRE-GUID-263EE74F-3684-4D72-AA07-B265193A3770" class="sect3"><span class="enumeration_section">D.3</span>关于指定SQLCHECK = SEMANTICS</h3>
               <div>
                  <p>当<code class="codeph">SQLCHECK=SEMANTICS</code> ，预编译器检查以下语法和语义：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">INSERT</code>和<code class="codeph">UPDATE</code>等数据操作语句</p>
                     </li>
                     <li>
                        <p>PL / SQL块</p>
                     </li>
                  </ul>
                  <p>但是，预编译器仅检查远程数据操作语句（使用<code class="codeph">AT</code> <span class="italic"><code class="codeph">db_name</code></span>子句的语句）的语法。
                  </p>
                  <p>预编译器从嵌入式<code class="codeph">DECLARE</code> <code class="codeph">TABLE</code>语句中获取语义检查的信息，或者，如果指定选项<code class="codeph">USERID</code> ，则通过连接到Oracle并访问数据字典来获取。如果在<code class="codeph">DECLARE</code> <code class="codeph">TABLE</code>语句中定义了数据操作语句或PL / SQL块中引用的每个表，则无需连接到Oracle。
                  </p>
                  <p>如果连接到Oracle但在数据字典中找不到某些信息，则必须使用<code class="codeph">DECLARE</code> <code class="codeph">TABLE</code>语句提供缺少的信息。如果数据字典定义发生冲突，则<code class="codeph">DECLARE</code> <code class="codeph">TABLE</code>定义将覆盖它。
                  </p>
                  <p>在检查数据操作语句时，预编译器使用<a href="../sqlrf/Introduction-to-Oracle-SQL.html#SQLRF-GUID-049B7AE8-11E1-4110-B3E4-D117907D77AC" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>的Oracle数据库版本7语法规则集，但使用更严格的语义规则集。因此，当<code class="codeph">SQLCHECK=SEMANTICS</code>时，为早期版本的Oracle编写的现有应用程序可能无法成功预编译。</p>
                  <p>预编译新程序时指定<code class="codeph">SQLCHECK=SEMANTICS</code> 。如果在主机程序中嵌入PL / SQL块，则<span class="italic">必须</span>指定<code class="codeph">SQLCHECK=SEMANTICS</code> 。</p>
               </div><a id="ZZPRE989"></a><div class="props_rev_3"><a id="GUID-F27F25C4-85C9-4C01-9F95-EA7A2A2E023A" name="GUID-F27F25C4-85C9-4C01-9F95-EA7A2A2E023A"></a><h4 id="ZZPRE-GUID-F27F25C4-85C9-4C01-9F95-EA7A2A2E023A" class="sect4"><span class="enumeration_section">D.3.1</span>关于启用语义检查</h4>
                  <div>
                     <p><a id="d84820e290" class="indexterm-anchor"></a>当<code class="codeph">SQLCHECK=SEMANTICS</code> ，预编译器可以通过以下任一方式获取语义检查所需的信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>连接到Oracle并访问数据字典</p>
                        </li>
                        <li>
                           <p>使用嵌入式<a id="d84820e305" class="indexterm-anchor"></a> <code class="codeph">DECLARE TABLE</code>语句</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ZZPRE990"></a><div class="props_rev_3"><a id="GUID-7D9F402F-150D-4474-B7DE-FFAE1B8BFE28" name="GUID-7D9F402F-150D-4474-B7DE-FFAE1B8BFE28"></a><h4 id="ZZPRE-GUID-7D9F402F-150D-4474-B7DE-FFAE1B8BFE28" class="sect4"><span class="enumeration_section">D.3.2</span>关于连接Oracle</h4>
                  <div>
                     <p><a id="d84820e333" class="indexterm-anchor"></a>要进行语义检查，预编译器可以连接到Oracle数据库，该数据库维护主机程序中引用的表和视图的定义。连接到Oracle后，预编译器访问数据字典以获取所需信息。<span class="italic">数据字典</span>存储表和列名称，表和列约束，列长度，列数据类型等。
                     </p>
                     <p>如果在数据字典中找不到某些所需信息（例如，因为您的程序引用了尚未创建的表），则必须使用<code class="codeph">DECLARE TABLE</code>语句提供缺少的信息。
                     </p>
                     <p>要连接到Oracle，请使用以下语法在命令行上指定选项<code class="codeph">USERID</code> ：</p><pre class="oac_no_warn" dir="ltr">USERID =用户名</pre><p>其中<span class="italic">username</span>是有效的Oracle用户标识。系统会提示您输入密码。如果您指定的是用户名，而不是用户名</p><pre class="oac_no_warn" dir="ltr">USERID = /</pre><p>预编译器尝试使用userid自动连接到Oracle</p><pre class="oac_no_warn" dir="ltr">&lt;前缀&gt; &lt;用户名&gt;</pre><p>其中<span class="italic">prefix</span>是Oracle初始化参数<code class="codeph">OS_AUTHENT_PREFIX</code>的值（默认值为null）， <span class="italic">username</span>是您的操作系统用户或任务名称。
                     </p>
                     <p>如果尝试连接到Oracle但不能（例如，如果数据库不可用），则预编译器将停止处理并发出错误消息。如果省略<code class="codeph">USERID</code>选项，则预编译器必须从嵌入的<code class="codeph">DECLARE</code> <code class="codeph">TABLE</code>语句中获取所需信息。
                     </p>
                  </div>
               </div><a id="ZZPRE991"></a><div class="props_rev_3"><a id="GUID-E8FCC4EF-EC5A-4075-B685-9DDE85BB5017" name="GUID-E8FCC4EF-EC5A-4075-B685-9DDE85BB5017"></a><h4 id="ZZPRE-GUID-E8FCC4EF-EC5A-4075-B685-9DDE85BB5017" class="sect4"><span class="enumeration_section">D.3.3</span>关于使用DECLARE TABLE</h4>
                  <div>
                     <p>预编译器可以在不连接Oracle的情况下进行语义检查。要进行检查，预编译器必须从嵌入式获取有关表和视图的信息<a id="d84820e409" class="indexterm-anchor"></a> <code class="codeph">DECLARE TABLE</code>语句。因此，必须在<code class="codeph">DECLARE TABLE</code>语句中定义数据操作语句或PL / SQL块中引用的每个表。
                     </p>
                     <p><code class="codeph">DECLARE TABLE</code>语句的语法是：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE table_name TABLE（col_name col_datatype [DEFAULT expr] [NULL | NOT NULL]，...）;</pre><p>其中<span class="italic">expr</span>是可以在<code class="codeph">CREATE TABLE</code>语句中用作默认列值的任何表达式。
                     </p>
                     <p>如果使用<code class="codeph">DECLARE TABLE</code>定义已存在的数据库表，则预编译器将使用您的定义，忽略数据字典中的定义。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
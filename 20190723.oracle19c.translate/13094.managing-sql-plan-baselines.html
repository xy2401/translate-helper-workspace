<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter explains the concepts and tasks relating to SQL plan management using the DBMS_SPM package."></meta>
      <meta name="description" content="This chapter explains the concepts and tasks relating to SQL plan management using the DBMS_SPM package."></meta>
      <title>管理SQL计划基准</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Tuning Guide"></meta>
      <meta property="og:description" content="This chapter explains the concepts and tasks relating to SQL plan management using the DBMS_SPM package."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00"></meta>
      <meta name="dcterms.title" content="SQL Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96095-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="overview-of-sql-plan-management.html" title="Previous" type="text/html"></link>
      <link rel="next" href="migrating-stored-outlines.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="overview-of-sql-plan-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="migrating-stored-outlines.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-controls.html" property="item" typeof="WebPage"><span property="name">SQL管理对象</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理SQL计划基准</li>
            </ol>
            <a id="GUID-7024369A-F98D-48E4-921C-C899485C954F" name="GUID-7024369A-F98D-48E4-921C-C899485C954F"></a>
            
            <h2 id="TGSQL-GUID-7024369A-F98D-48E4-921C-C899485C954F" class="sect2"><span class="enumeration_chapter">28</span>管理SQL计划基准</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍使用<code class="codeph">DBMS_SPM</code>程序包与SQL计划管理相关的概念和任务。
               </p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-3D822F44-06C5-452F-8967-EBC12BA38036">关于管理SQL计划基准</a><br>本主题描述SQL计划管理的可用接口和基本任务。
                  </li>
                  <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-3D701147-1371-4604-8127-F9199EA0EDE0">配置SQL计划管理</a><br>您可以配置SQL计划基准的捕获和使用以及SPM Evolve Advisor任务。
                  </li>
                  <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-582BC3FB-2F52-4190-B807-16B79346B776">在SQL计划基准中显示计划</a><br>要查看存储在特定语句的SQL计划基准中的计划，请使用<code class="codeph">DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE</code>函数。此功能使用存储在计划历史记录中的计划信息来显示计划。
                  </li>
                  <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-C6AC4856-3C8C-42D8-A7FD-629974E98D36">加载SQL计划基准</a><br>使用<code class="codeph">DBMS_SPM</code> ，您可以将一组现有计划的批量加载启动到SQL计划基准中。
                  </li>
                  <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-19E6FFB0-BC7A-4CDB-AE36-6D67C15C7332">手动制定SQL计划基准</a><br>您可以使用PL / SQL或Cloud Control手动发展未接受的计划，以确定它是否比计划基准中当前的任何计划表现更好。
                  </li>
                  <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-BA19EA4E-AFEF-4677-B08F-854DE59ED932">删除SQL计划基准</a><br>您可以从SQL计划基准中删除部分或全部计划。在测试SQL计划管理时，此技术有时很有用。
                  </li>
                  <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-DE976D2B-DBAD-498F-B933-D16B06CA9D2A">管理SQL管理库</a><br>SQL管理库是驻留在<code class="codeph">SYSAUX</code>表空间中的数据字典的一部分。它存储语句日志，计划历史记录，SQL计划基准和SQL配置文件。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-7024369A-F98D-48E4-921C-C899485C954F__GUID-404127B5-FBB7-4ECB-BD68-00A13F85A8FD">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“将<a href="migrating-stored-outlines.html#GUID-E1CBB4DA-2F83-4F4D-845B-CAAA8333DF1A" title="存储的大纲迁移是用户启动的将存储的大纲转换为SQL计划基线的过程。SQL计划基准是一组经证实可提供最佳性能的计划。">存储的大纲迁移到SQL计划基准</a> ”</span></p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ARPLS-GUID-D6EC284C-053D-417D-B887-94422BCB4E3A" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a>以了解有关<code class="codeph">DBMS_SPM</code>更多信息</p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="sql-controls.html#GUID-2889EBC8-1FAD-412F-9779-865028473607" title="SQL管理对象是一种稳定单个SQL语句的执行计划的功能。SQL配置文件和SQL计划基准是SQL管理对象。">SQL管理对象</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL94621"></a><div class="sect2"><a id="GUID-3D822F44-06C5-452F-8967-EBC12BA38036" name="GUID-3D822F44-06C5-452F-8967-EBC12BA38036"></a><h3 id="TGSQL-GUID-3D822F44-06C5-452F-8967-EBC12BA38036" class="sect3"><span class="enumeration_section">28.1</span>关于管理SQL计划基准</h3>
               <div>
                  <p>本主题描述SQL计划管理的可用接口和基本任务。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-00CFEAE0-32D8-43FC-AF4F-A3CB3062E374">SQL计划管理的用户界面</a><br>您可以通过Cloud Control或命令行访问<code class="codeph">DBMS_SPM</code>程序包。
                     </li>
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-C79E7420-053B-4DCE-A219-072BDE488E21">SQL计划管理中的基本任务</a><br>本主题说明使用SQL计划管理来防止性能回归并使优化程序考虑新的执行计划的基本任务。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="本章介绍使用DBMS_SPM程序包与SQL计划管理相关的概念和任务。">管理SQL计划基准</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL618"></a><div class="props_rev_3"><a id="GUID-00CFEAE0-32D8-43FC-AF4F-A3CB3062E374" name="GUID-00CFEAE0-32D8-43FC-AF4F-A3CB3062E374"></a><h4 id="TGSQL-GUID-00CFEAE0-32D8-43FC-AF4F-A3CB3062E374" class="sect4"><span class="enumeration_section">28.1.1</span> SQL计划管理的用户界面</h4>
                  <div>
                     <p>您可以通过Cloud Control或命令行访问<code class="codeph">DBMS_SPM</code>程序包。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631">访问Cloud Control中的SQL计划基准页面</a><br>Cloud Control中的SQL Plan Control页面是一个GUI，显示有关SQL配置文件，SQL修补程序和SQL计划基准的信息。
                        </li>
                        <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-AE8CB28A-79CB-4B5F-BAE7-FF54E2EF6330">DBMS_SPM包</a><br>在命令行上，使用<code class="codeph">DBMS_SPM</code>和<code class="codeph">DBMS_XPLAN</code> PL / SQL包执行大多数SQL计划管理任务。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-3D822F44-06C5-452F-8967-EBC12BA38036" title="本主题描述SQL计划管理的可用接口和基本任务。">关于管理SQL计划基准</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94646"></a><a id="TGSQL94614"></a><div class="props_rev_3"><a id="GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631" name="GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631"></a><h5 id="TGSQL-GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631" class="sect5"><span class="enumeration_section">28.1.1.1</span>访问Cloud Control中的SQL计划基准页面</h5>
                     <div>
                        <p>Cloud Control中的SQL Plan Control页面是一个GUI，显示有关SQL配置文件，SQL修补程序和SQL计划基准的信息。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631__GUID-42BC32A5-2D03-484A-914D-FF5C637C3787">要访问SQL Plan Baseline页面：</p>
                           <ol>
                              <li>
                                 <p>使用适当的凭据登录Cloud Control。</p>
                              </li>
                              <li>
                                 <p>在“ <span class="bold">目标”</span>菜单下，选择“ <span class="bold">数据库”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在数据库目标列表中，选择要管理的Oracle数据库实例的目标。</p>
                              </li>
                              <li>
                                 <p>如果系统提示您输入数据库凭据，请输入您要执行的任务所需的最低凭据。</p>
                              </li>
                              <li>
                                 <p>从<span class="bold">Performance</span>菜单中，选择<span class="bold">SQL</span> ，然后选择<span class="bold">SQL Plan Control</span> 。
                                 </p>
                                 <p>将出现“SQL计划控制”页面。</p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">Files</span>查看SQL Plan Baseline子页面，如图<a href="managing-sql-plan-baselines.html#GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631__CDEBHHEI">28-1</a>所示。
                                 </p>
                                 <div class="figure" id="GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631__CDEBHHEI">
                                    <p class="titleinfigure">图28-1 SQL计划基准子页面</p><img src="img/sql_plan_control.gif" alt="下面是图28-1的描述" title="下面是图28-1的描述" longdesc="img_text/sql_plan_control.html"><br><a href="img_text/sql_plan_control.html">“图28-1 SQL计划基准子页面”的说明</a></div>
                                 <!-- class="figure" -->
                                 <p>您可以在此页面或通过此页面访问的页面中执行大多数SQL计划管理任务。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631__GUID-D48C76F1-6B5A-4E1F-959A-7E462E930035">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Cloud Control上下文相关联机帮助，以了解SQL Plan Baseline子页面上的选项</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-A94CFA49-910A-4237-A7BB-39BFA94E227E" title="SPM Evolve Advisor是一个SQL顾问程序，可以发展最近添加到SQL计划基准的计划。顾问通过消除手动操作的要求简化了计划的发展。">管理SPM Evolve Advisor任务</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-00CFEAE0-32D8-43FC-AF4F-A3CB3062E374" title="您可以通过Cloud Control或命令行访问DBMS_SPM程序包。">SQL计划管理的用户界面</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL620"></a><a id="TGSQL94615"></a><div class="props_rev_3"><a id="GUID-AE8CB28A-79CB-4B5F-BAE7-FF54E2EF6330" name="GUID-AE8CB28A-79CB-4B5F-BAE7-FF54E2EF6330"></a><h5 id="TGSQL-GUID-AE8CB28A-79CB-4B5F-BAE7-FF54E2EF6330" class="sect5"><span class="enumeration_section">28.1.1.2</span> DBMS_SPM包</h5>
                     <div>
                        <p>在命令行上，使用<code class="codeph">DBMS_SPM</code>和<code class="codeph">DBMS_XPLAN</code> PL / SQL包执行大多数SQL计划管理任务。
                        </p>
                        <div class="section">
                           <p>下表描述了用于创建，删除和加载SQL计划基准的最相关的<code class="codeph">DBMS_SPM</code>过程和函数。
                           </p>
                           <div class="tblformal" id="GUID-AE8CB28A-79CB-4B5F-BAE7-FF54E2EF6330__CDEFGAIE">
                              <p class="titleintable">表28-1 DBMS_SPM过程和函数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SPM过程和函数" width="100%" border="1" summary="This 3 column table describes DBMS_SPM procedures and functions. Column 1 is the package. Column 2 is the procedure or function. Column 3 describes the procure or function. " frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d140998e809">包</th>
                                       <th align="left" valign="bottom" id="d140998e812">程序或功能</th>
                                       <th align="left" valign="bottom" id="d140998e815">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e820" headers="d140998e809 ">
                                          <p><code class="codeph">DBMS_SPM</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e820 d140998e812 ">
                                          <p><code class="codeph">配置</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e820 d140998e815 ">
                                          <p>此过程以名称/值格式更改SMB的配置选项。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e832" headers="d140998e809 ">
                                          <p><code class="codeph">DBMS_SPM</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e832 d140998e812 ">
                                          <p><code class="codeph">CREATE_STGTAB_BASELINE</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e832 d140998e815 ">
                                          <p>此过程创建一个临时表，使您可以将SQL计划基准从一个数据库传输到另一个数据库。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e844" headers="d140998e809 ">
                                          <p><code class="codeph">DBMS_SPM</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e844 d140998e812 ">
                                          <p><code class="codeph">DROP_SQL_PLAN_BASELINE</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e844 d140998e815 ">
                                          <p>此功能会丢弃计划基准中的部分或全部计划。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e856" headers="d140998e809 ">
                                          <p><code class="codeph">DBMS_SPM</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e856 d140998e812 ">
                                          <p><code class="codeph">LOAD_PLANS_FROM_CURSOR_CACHE</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e856 d140998e815 ">
                                          <p>此函数将共享SQL区域（也称为<span class="bold">游标缓存</span> ）中的计划加载到SQL计划基准中。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e871" headers="d140998e809 ">
                                          <p><code class="codeph">DBMS_SPM</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e871 d140998e812 ">
                                          <p><code class="codeph">LOAD_PLANS_FROM_SQLSET</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e871 d140998e815 ">
                                          <p>此函数将STS中的计划加载到SQL计划基准中。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e883" headers="d140998e809 ">
                                          <p><code class="codeph">DBMS_SPM</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e883 d140998e812 ">
                                          <p><code class="codeph">LOAD_PLANS_FROM_AWR</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e883 d140998e815 ">
                                          <p>此函数将计划从AWR加载到SQL计划基准。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e895" headers="d140998e809 ">
                                          <p><code class="codeph">DBMS_SPM</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e895 d140998e812 ">
                                          <p><code class="codeph">PACK_STGTAB_BASELINE</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e895 d140998e815 ">
                                          <p>此函数打包SQL计划基准，这意味着它将它们从SMB复制到临时表中。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e907" headers="d140998e809 ">
                                          <p><code class="codeph">DBMS_SPM</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e907 d140998e812 ">
                                          <p><code class="codeph">UNPACK_STGTAB_BASELINE</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e907 d140998e815 ">
                                          <p>此函数解压缩SQL计划基准，这意味着它将SQL计划基准从登台表复制到SMB。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>此外，您可以使用<code class="codeph">DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE</code>显示SQL句柄标识的SQL语句的一个或多个执行计划。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-AE8CB28A-79CB-4B5F-BAE7-FF54E2EF6330__GUID-ADA03D0B-66B3-496D-B870-CA0325D01B6F">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-15A23B74-8B43-49EA-83CE-14F2C209C9A9" title="本主题描述了用于管理计划演变的最相关的DBMS_SPM功能。手动执行演化任务或安排它们自动运行。">关于DBMS_SPM Evolve函数</a> ”</span>描述了与SQL计划演变相关的函数。
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ARPLS150" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_SPM</code>和<code class="codeph">DBMS_XPLAN</code>包</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-00CFEAE0-32D8-43FC-AF4F-A3CB3062E374" title="您可以通过Cloud Control或命令行访问DBMS_SPM程序包。">SQL计划管理的用户界面</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL621"></a><div class="props_rev_3"><a id="GUID-C79E7420-053B-4DCE-A219-072BDE488E21" name="GUID-C79E7420-053B-4DCE-A219-072BDE488E21"></a><h4 id="TGSQL-GUID-C79E7420-053B-4DCE-A219-072BDE488E21" class="sect4"><span class="enumeration_section">28.1.2</span> SQL计划管理中的基本任务</h4>
                  <div>
                     <p>本主题说明使用SQL计划管理来防止性能回归并使优化程序考虑新的执行计划的基本任务。</p>
                     <p>任务如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>设置初始化参数以控制数据库是否捕获并使用SQL计划基准，以及是否发展新计划。</p>
                           <p>请参阅<span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-3D701147-1371-4604-8127-F9199EA0EDE0" title="您可以配置SQL计划基准的捕获和使用以及SPM Evolve Advisor任务。">配置SQL计划管理</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在SQL计划基准中显示计划。</p>
                           <p>请参阅<span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-582BC3FB-2F52-4190-B807-16B79346B776" title="要查看存储在特定语句的SQL计划基准中的计划，请使用DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE函数。此功能使用存储在计划历史记录中的计划信息来显示计划。">在SQL计划基准中显示计划</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>手动将计划加载到SQL计划基准中。</p>
                           <p>从AWR，SQL调优集，共享SQL区域，临时表或存储的大纲加载计划。</p>
                           <p>请参阅<span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-C6AC4856-3C8C-42D8-A7FD-629974E98D36" title="使用DBMS_SPM，您可以将一组现有计划的批量加载启动到SQL计划基准中。">加载SQL计划基准</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>手动将计划演变为SQL计划基准。</p>
                           <p>使用PL / SQL验证指定计划的性能并将其添加到计划基准。</p>
                           <p>请参阅<span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-19E6FFB0-BC7A-4CDB-AE36-6D67C15C7332" title="您可以使用PL / SQL或Cloud Control手动发展未接受的计划，以确定它是否比计划基准中当前的任何计划表现更好。">手动生成SQL计划基准</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>删除SQL计划基准中的所有或一些计划。</p>
                           <p>请参阅<span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-BA19EA4E-AFEF-4677-B08F-854DE59ED932" title="您可以从SQL计划基准中删除部分或全部计划。在测试SQL计划管理时，此技术有时很有用。">删除SQL计划基准</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>管理SMB。</p>
                           <p>更改磁盘空间限制并更改计划保留策略的长度。</p>
                           <p>请参阅<span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-DE976D2B-DBAD-498F-B933-D16B06CA9D2A" title="SQL管理库是驻留在SYSAUX表空间中的数据字典的一部分。它存储语句日志，计划历史记录，SQL计划基准和SQL配置文件。">管理SQL管理库</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>将存储的轮廓迁移到SQL计划基准。</p>
                           <p>请参阅<span class="q">“将<a href="migrating-stored-outlines.html#GUID-E1CBB4DA-2F83-4F4D-845B-CAAA8333DF1A" title="存储的大纲迁移是用户启动的将存储的大纲转换为SQL计划基线的过程。SQL计划基准是一组经证实可提供最佳性能的计划。">存储的大纲迁移到SQL计划基准</a> ”</span> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-3D822F44-06C5-452F-8967-EBC12BA38036" title="本主题描述SQL计划管理的可用接口和基本任务。">关于管理SQL计划基准</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL94647"></a><div class="props_rev_3"><a id="GUID-3D701147-1371-4604-8127-F9199EA0EDE0" name="GUID-3D701147-1371-4604-8127-F9199EA0EDE0"></a><h3 id="TGSQL-GUID-3D701147-1371-4604-8127-F9199EA0EDE0" class="sect3"><span class="enumeration_section">28.2</span>配置SQL计划管理</h3>
               <div>
                  <p>您可以配置SQL计划基准的捕获和使用以及SPM Evolve Advisor任务。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-C357AC4E-20CF-4995-A8C1-491FF26C19BC">配置SQL计划基准的捕获和使用</a><br>您可以使用初始化参数<code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES</code>和<code class="codeph">OPTIMIZER_USE_SQL_PLAN_BASELINES</code>控制SQL计划管理。</li>
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-A94CFA49-910A-4237-A7BB-39BFA94E227E">管理SPM Evolve Advisor任务</a><br>SPM Evolve Advisor是一个SQL顾问程序，可以发展最近添加到SQL计划基准的计划。顾问通过消除手动操作的要求简化了计划的发展。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="本章介绍使用DBMS_SPM程序包与SQL计划管理相关的概念和任务。">管理SQL计划基准</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL640"></a><div class="props_rev_3"><a id="GUID-C357AC4E-20CF-4995-A8C1-491FF26C19BC" name="GUID-C357AC4E-20CF-4995-A8C1-491FF26C19BC"></a><h4 id="TGSQL-GUID-C357AC4E-20CF-4995-A8C1-491FF26C19BC" class="sect4"><span class="enumeration_section">28.2.1</span>配置SQL计划基准的捕获和使用</h4>
                  <div>
                     <p>您可以使用初始化参数<code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES</code>和<code class="codeph">OPTIMIZER_USE_SQL_PLAN_BASELINES</code>控制SQL计划管理。</p>
                     <p>默认值如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES = FALSE</code></p>
                           <p>对于不已经在计划历史记录存在任何重复的SQL语句，数据库<span class="italic">不会</span>自动创建该语句的初始SQL计划基准。
                           </p>
                           <p>如果<code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES=true</code> ，则可以使用<code class="codeph">DBMS_SPM.CONFIGURE</code>过程配置过滤器，以确定哪些语句符合计划捕获的条件。默认情况下，未配置任何过滤器，这意味着所有可重复的语句都符合计划捕获的条件。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OPTIMIZER_USE_SQL_PLAN_BASELINES =真</code></p>
                           <p>对于具有现有SQL计划基准的任何SQL语句，数据库会自动将新计划作为未接受的计划添加到SQL计划基准。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-C357AC4E-20CF-4995-A8C1-491FF26C19BC__GUID-AE7524ED-119E-43C1-867A-CBF009D0FD32">
                        <p class="notep1">注意：</p>
                        <p>前述参数的设置彼此独立。例如，如果<code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES</code>为<code class="codeph">true</code> ，则即使<code class="codeph">OPTIMIZER_USE_SQL_PLAN_BASELINES</code>为<code class="codeph">false</code> ，数据库也会为新语句创建初始计划基准。
                        </p>
                     </div>
                     <p>如果默认行为是您想要的，则跳过此部分。</p>
                     <p>以下部分说明如何从命令行更改默认参数设置。如果使用Cloud Control，请在SQL Plan Baseline子页面中设置这些参数。本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-B3262755-C4A0-4B37-891B-6B3C2ACC6C45">为SQL计划管理启用自动初始计划捕获</a><br>将<code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES</code>初始化参数设置为<code class="codeph">true</code> ，这是数据库为计划历史记录中尚未包含的任何符合条件的SQL语句自动创建初始SQL计划基准所必需的。
                        </li>
                        <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-82EFB280-8868-47E1-8360-6A9CA995BD56">配置自动计划捕获的过滤器</a><br>如果<code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES=true</code> ，则可以使用<code class="codeph">DBMS_SPM.CONFIGURE</code>过程为可重复语句创建<span class="bold">自动捕获筛选器</span> 。
                        </li>
                        <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-4D5A5D5F-7B6A-416A-8108-E1FD82825A4D">禁用所有SQL计划基准</a><br>将<code class="codeph">OPTIMIZER_USE_SQL_PLAN_BASELINES</code>初始化参数设置为<code class="codeph">false</code> ，数据库不会在数据库中使用<span class="italic">任何</span>计划基准。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C357AC4E-20CF-4995-A8C1-491FF26C19BC__GUID-22F690DD-A2AF-44D1-8B90-8A15FFBEB1FC">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631__CDEBHHEI">图28-1</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-5A1E6CF4-70E5-4C26-A67B-EFDBB93EC621" title="启用后，数据库会检查执行的SQL语句是否符合自动捕获的条件。">自动初始计划捕获</a> ”</span></p>
                           </li>
                           <li>
                              <p> <span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-67A76171-62CB-49A5-B5BD-CFFE26511E90" title="SQL计划选择是优化程序根据存储的计划历史记录检测计划更改的能力，以及使用SQL计划基准来选择计划以避免潜在的性能回归。">计划选择</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-3D701147-1371-4604-8127-F9199EA0EDE0" title="您可以配置SQL计划基准的捕获和使用以及SPM Evolve Advisor任务。">配置SQL计划管理</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL641"></a><div class="props_rev_3"><a id="GUID-B3262755-C4A0-4B37-891B-6B3C2ACC6C45" name="GUID-B3262755-C4A0-4B37-891B-6B3C2ACC6C45"></a><h5 id="TGSQL-GUID-B3262755-C4A0-4B37-891B-6B3C2ACC6C45" class="sect5"><span class="enumeration_section">28.2.1.1</span>为SQL计划管理启用自动初始计划捕获</h5>
                     <div>
                        <p>将<code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES</code>初始化参数设置为<code class="codeph">true</code> ，这是数据库为计划历史记录中尚未包含的任何符合条件的SQL语句自动创建初始SQL计划基准所必需的。
                        </p>
                        <div class="section">
                           <p>默认情况下，数据库将所有可重复的SQL语句视为符合捕获条件，但以下情况除外：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic">未</span>指定<code class="codeph">AS SELECT</code>子句时的<code class="codeph">CREATE TABLE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">DROP TABLE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">插入 ...VALUES</code></p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-B3262755-C4A0-4B37-891B-6B3C2ACC6C45__GUID-E65A7E68-BBB4-40B0-B9F1-7C58F0B3D40B">
                              <p class="notep1">警告：</p>
                              <p>默认情况下，启用自动基线捕获时，数据库会为<span class="italic">每个</span>符合条件的可重复语句创建SQL计划基准，包括所有递归SQL和监视SQL。因此，自动捕获可能导致创建极大量的计划基线。要限制符合计划基准的语句，请使用<code class="codeph">DBMS_SPM.CONFIGURE</code>过程配置过滤器。
                              </p>
                           </div>
                           <p><code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES</code>参数不控制将新发现的计划自动添加到先前创建的SQL计划基准。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B3262755-C4A0-4B37-891B-6B3C2ACC6C45__GUID-0997778D-E06F-4470-AF78-EA695CF29878">要为SQL计划管理启用自动初始计划捕获：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus中，使用必要的权限登录数据库。</p>
                              </li>
                              <li>
                                 <p>显示SQL计划管理的当前设置。</p>
                                 <p>例如，使用管理员权限将SQL * Plus连接到数据库并执行以下命令（包括示例输出）：</p><pre class="pre codeblock"><code>SHOW PARAMETER SQL_PLAN</code></pre><p>以下示例输出显示已禁用自动初始计划捕获：</p><pre class="pre codeblock"><code>NAME TYPE VALUE ------------------------------------ ----------- ----- optimizer_capture_sql_plan_baselines boolean FALSE optimizer_use_sql_plan_baselines boolean TRUE</code></pre><p>如果参数已按预期设置，则跳过其余步骤。</p>
                              </li>
                              <li>
                                 <p>要启用自动识别可重复SQL语句并为这些语句生成SQL计划基准，请输入以下语句：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES = true;</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B3262755-C4A0-4B37-891B-6B3C2ACC6C45__GUID-2D6EA7BA-B334-4204-9510-C1CB07143D9A">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES</code>更多信息，请<code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=GUID-A562069E-BD44-4ABB-A987-0A13078F4E90" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-C357AC4E-20CF-4995-A8C1-491FF26C19BC" title="您可以使用初始化参数OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES和OPTIMIZER_USE_SQL_PLAN_BASELINES来控制SQL计划管理。">配置SQL计划基准的捕获和使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-82EFB280-8868-47E1-8360-6A9CA995BD56" name="GUID-82EFB280-8868-47E1-8360-6A9CA995BD56"></a><h5 id="TGSQL-GUID-82EFB280-8868-47E1-8360-6A9CA995BD56" class="sect5"><span class="enumeration_section">28.2.1.2</span>配置自动计划捕获的过滤器</h5>
                     <div>
                        <p>如果<code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES=true</code> ，则可以使用<code class="codeph">DBMS_SPM.CONFIGURE</code>过程为可重复语句创建<span class="bold">自动捕获筛选器</span> 。
                        </p>
                        <div class="section">
                           <p>通过自动过滤器，您只能捕获所需的语句，并排除非关键语句。此技术可节省<code class="codeph">SYSAUX</code>表空间中的空间。
                           </p>
                           <p>下表描述了<code class="codeph">DBMS_SPM.CONFIGURE</code>过程的相关参数。
                           </p>
                           <div class="tblformal" id="GUID-82EFB280-8868-47E1-8360-6A9CA995BD56__BEIIHDDJ">
                              <p class="titleintable">表28-2 DBMS_SPM.CONFIGURE参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SPM.CONFIGURE参数" width="100%" border="1" summary="This 2 column tables lists the relevant parameters for the DBMS_SPM.CONFIGURE procedure. Column 1 is the parameter. Column 2 describes that parameter. " frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d140998e1933">参数</th>
                                       <th align="left" valign="bottom" id="d140998e1936">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e1941" headers="d140998e1933 ">
                                          <p><code class="codeph">PARAMETER_NAME</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e1941 d140998e1936 ">
                                          <p>用于自动捕获的过滤器类型。</p>
                                          <p>可能的值为<code class="codeph">AUTO_CAPTURE_SQL_TEXT</code> ， <code class="codeph">AUTO_CAPTURE_PARSING_SCHEMA_NAME</code> ， <code class="codeph">AUTO_CAPTURE_MODULE</code>和<code class="codeph">AUTO_CAPTURE_ACTION</code> 。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e1963" headers="d140998e1933 ">
                                          <p><code class="codeph">PARAMETER_VALUE</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e1963 d140998e1936 ">
                                          <p>自动捕获过滤器的搜索条件。</p>
                                          <p>当<code class="codeph">parameter_name</code>设置为<code class="codeph">AUTO_CAPTURE_SQL_TEXT</code> ，搜索模式取决于<code class="codeph">allow</code>设置：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p><code class="codeph">喜欢</code></p>
                                                <p>当<code class="codeph">allow=&gt;true</code>时，参数使用此模式。
                                                </p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">不喜欢</code></p>
                                                <p>当<code class="codeph">allow=&gt;false</code>时，参数使用此模式。
                                                </p>
                                             </li>
                                          </ul>
                                          <p>对于所有其他非null <code class="codeph">parameter_name</code>值，搜索模式取决于<code class="codeph">allow</code>设置：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p><code class="codeph">=</code></p>
                                                <p>当<code class="codeph">allow=&gt;true</code>时，参数使用此模式。
                                                </p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">&lt;&gt;</code></p>
                                                <p>当<code class="codeph">allow=&gt;false</code>时，参数使用此模式。
                                                </p>
                                             </li>
                                          </ul>
                                          <p>null值完全删除<code class="codeph">parameter_name</code>的过滤器。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e2033" headers="d140998e1933 "><code class="codeph">允许</code></td>
                                       <td align="left" valign="top" headers="d140998e2033 d140998e1936 ">是否包含（ <code class="codeph">true</code> ）或排除（ <code class="codeph">false</code> ）匹配的SQL语句和计划。如果为null，则该过程将忽略指定的参数。
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>您可以配置不同类型的多个参数。此外，您可以在数据库组合的单独语句中为同一参数指定多个值。设置是附加的：一个参数设置不会覆盖以前的设置。例如，以下过滤器在解析模式<code class="codeph">SYS</code>或<code class="codeph">SYSTEM</code>捕获SQL：</p><pre class="pre codeblock"><code>EXEC DBMS_SPM.CONFIGURE（'AUTO_CAPTURE_PARSING_SCHEMA_NAME'，'SYS'，true）; EXEC DBMS_SPM.CONFIGURE（'AUTO_CAPTURE_PARSING_SCHEMA_NAME'，'SYSTEM'，true）;</code></pre><p>但是，您无法在同一过程中为同一参数配置多个值。例如，您不能为<code class="codeph">AUTO_CAPTURE_SQL_TEXT</code>指定多个SQL文本字符串。</p>
                           <p><code class="codeph">DBA_SQL_MANAGEMENT_CONFIG</code>视图显示当前参数值。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="p">
                           <p>本教程假设以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES</code>初始化参数设置为<code class="codeph">true</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>您希望仅包含在<code class="codeph">sh</code>模式中解析的语句以符合基线条件。
                                 </p>
                              </li>
                              <li>
                                 <p>您希望排除包含文本<code class="codeph">TEST_ONLY</code>语句。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-82EFB280-8868-47E1-8360-6A9CA995BD56__GUID-1C79ECDD-7724-439A-BB75-F1C148C2B50F">要过滤掉除sh架构中解析的所有语句之外的所有语句：</p>
                           <ol>
                              <li>
                                 <p>使用适当的权限将SQL * Plus连接到数据库。</p>
                              </li>
                              <li>
                                 <p>要删除用于解析模式和SQL文本的任何现有过滤器，请执行以下PL / SQL程序：</p><pre class="pre codeblock"><code>EXEC DBMS_SPM.CONFIGURE（'AUTO_CAPTURE_PARSING_SCHEMA_NAME'，null，true）; EXEC DBMS_SPM.CONFIGURE（'AUTO_CAPTURE_SQL_TEXT'，null，true）;</code></pre></li>
                              <li>
                                 <p>仅包括在<code class="codeph">sh</code>模式中解析的语句，以考虑自动捕获：</p><pre class="pre codeblock"><code>EXEC DBMS_SPM.CONFIGURE（'AUTO_CAPTURE_PARSING_SCHEMA_NAME'，'sh'，true）;</code></pre></li>
                              <li>
                                 <p>从自动捕获的考虑中排除包含文本<code class="codeph">TEST_ONLY</code>任何语句：</p><pre class="pre codeblock"><code>EXEC DBMS_SPM.CONFIGURE（'AUTO_CAPTURE_SQL_TEXT'，'％TEST_ONLY％'，false）;</code></pre></li>
                              <li>
                                 <p>（可选）要确认过滤器，请查询<code class="codeph">DBA_SQL_MANAGEMENT_CONFIG</code> 。</p>
                                 <p>例如，使用以下查询（包括示例输出）：</p><pre class="pre codeblock"><code>COL PARAMETER_NAME FORMAT a32 COL PARAMETER_VALUE FORMAT a32 SELECT PARAMETER_NAME，PARAMETER_VALUE来自DBA_SQL_MANAGEMENT_CONFIG，其中PARAMETER_NAME喜欢'％AUTO％'; PARAMETER_NAME PARAMETER_VALUE -------------------------------- ---------------- ---------------- AUTO_CAPTURE_PARSING_SCHEMA_NAME parsing_schema IN（SH）AUTO_CAPTURE_MODULE AUTO_CAPTURE_ACTION AUTO_CAPTURE_SQL_TEXT（sql_text NOT LIKE％TEST_ONLY％）</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-82EFB280-8868-47E1-8360-6A9CA995BD56__GUID-909290F4-AB4D-4663-9EA7-ADA6A3A8A34B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-5A1E6CF4-70E5-4C26-A67B-EFDBB93EC621" title="启用后，数据库会检查执行的SQL语句是否符合自动捕获的条件。">自动初始计划捕获</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ARPLS-GUID-D855D4B9-D071-4BB2-A554-38479867DE76" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_SPM.CONFIGURE</code>过程的更多信息</p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=REFRN-GUID-4E9C3D2A-93B8-49C5-9169-C54A9EB7431C" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">DBA_SQL_MANAGEMENT_CONFIG</code>视图的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-C357AC4E-20CF-4995-A8C1-491FF26C19BC" title="您可以使用初始化参数OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES和OPTIMIZER_USE_SQL_PLAN_BASELINES来控制SQL计划管理。">配置SQL计划基准的捕获和使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL642"></a><div class="props_rev_3"><a id="GUID-4D5A5D5F-7B6A-416A-8108-E1FD82825A4D" name="GUID-4D5A5D5F-7B6A-416A-8108-E1FD82825A4D"></a><h5 id="TGSQL-GUID-4D5A5D5F-7B6A-416A-8108-E1FD82825A4D" class="sect5"><span class="enumeration_section">28.2.1.3</span>禁用所有SQL计划基准</h5>
                     <div>
                        <p>将<code class="codeph">OPTIMIZER_USE_SQL_PLAN_BASELINES</code>初始化参数设置为<code class="codeph">false</code> ，数据库不会在数据库中使用<span class="italic">任何</span>计划基准。
                        </p>
                        <div class="section">
                           <p>通常，您可能希望禁用一个或两个计划基准，但不是所有基准。可能的用例可能是测试SQL计划管理的好处。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-4D5A5D5F-7B6A-416A-8108-E1FD82825A4D__GUID-5792D450-672B-4775-B835-5836C1B201CD">要禁用数据库中的所有SQL计划基准：</p>
                           <ol>
                              <li>
                                 <p>使用适当的权限将SQL * Plus连接到数据库，然后显示SQL计划管理的当前设置。</p>
                                 <p>例如，使用管理员权限将SQL * Plus连接到数据库并执行以下命令（包括示例输出）：</p><pre class="pre codeblock"><code>SQL&gt; SHOW PARAMETER SQL_PLAN NAME TYPE VALUE ------------------------------------ ------ ----- ----- optimizer_capture_sql_plan_baselines boolean FALSE optimizer_use_sql_plan_baselines boolean TRUE</code></pre><p>如果参数已按预期设置，则跳过其余步骤。</p>
                              </li>
                              <li>
                                 <p>要忽略所有现有计划基准，请输入以下语句：</p><pre class="pre codeblock"><code>SQL&gt; ALTER SYSTEM SET OPTIMIZER_USE_SQL_PLAN_BASELINES = false</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-4D5A5D5F-7B6A-416A-8108-E1FD82825A4D__GUID-C0CA18EB-37A5-4406-8B32-EB5625B51AAD">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=REFRN10292" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解SQL计划基线初始化参数</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-C357AC4E-20CF-4995-A8C1-491FF26C19BC" title="您可以使用初始化参数OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES和OPTIMIZER_USE_SQL_PLAN_BASELINES来控制SQL计划管理。">配置SQL计划基准的捕获和使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL94648"></a><div class="props_rev_3"><a id="GUID-A94CFA49-910A-4237-A7BB-39BFA94E227E" name="GUID-A94CFA49-910A-4237-A7BB-39BFA94E227E"></a><h4 id="TGSQL-GUID-A94CFA49-910A-4237-A7BB-39BFA94E227E" class="sect4"><span class="enumeration_section">28.2.2</span>管理SPM Evolve Advisor任务</h4>
                  <div>
                     <p>SPM Evolve Advisor是一个SQL顾问程序，可以发展最近添加到SQL计划基准的计划。顾问通过消除手动操作的要求简化了计划的发展。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-6D284A90-3761-4BC1-AC3E-DF39EE727FC7">关于SPM Evolve Advisor任务</a><br>默认情况下， <code class="codeph">SYS_AUTO_SPM_EVOLVE_TASK</code>每天在计划的维护<code class="codeph">SYS_AUTO_SPM_EVOLVE_TASK</code>运行。
                        </li>
                        <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-0D221783-C6C3-470E-8022-60ADF87E2473">启用和禁用SPM Evolve Advisor任务</a><br>自动SPM Evolve Advisor任务不存在单独的调度程序客户端。
                        </li>
                        <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-541EBA4B-4F7D-42DD-A152-C06BDE69D828">配置自动SPM Evolve Advisor任务</a><br>通过使用<code class="codeph">DBMS_SPM.SET_EVOLVE_TASK_PARAMETER</code>过程指定任务参数来配置自动计划演变。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-3D701147-1371-4604-8127-F9199EA0EDE0" title="您可以配置SQL计划基准的捕获和使用以及SPM Evolve Advisor任务。">配置SQL计划管理</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-6D284A90-3761-4BC1-AC3E-DF39EE727FC7" name="GUID-6D284A90-3761-4BC1-AC3E-DF39EE727FC7"></a><h5 id="TGSQL-GUID-6D284A90-3761-4BC1-AC3E-DF39EE727FC7" class="sect5"><span class="enumeration_section">28.2.2.1</span>关于SPM Evolve Advisor任务</h5>
                     <div>
                        <p>默认情况下， <code class="codeph">SYS_AUTO_SPM_EVOLVE_TASK</code>每天在计划的维护<code class="codeph">SYS_AUTO_SPM_EVOLVE_TASK</code>运行。
                        </p>
                        <p>SQL计划基准可防止由次优计划导致的性能回归。如果SQL语句没有SQL计划基准，并且<code class="codeph">alternate_plan_baseline</code>参数设置为<code class="codeph">AUTO</code> ，则SQM Evolve Advisor有时可以自动解决此类性能回归。顾问会比较所有可用计划，并选择效果最佳的计划作为基准。
                        </p>
                        <p>下图显示了自动SPM Evolve Advisor的工作流程：</p>
                        <div class="figure" id="GUID-6D284A90-3761-4BC1-AC3E-DF39EE727FC7__GUID-D1BF22A6-DD30-44F1-995C-B51B15A482CF">
                           <p class="titleinfigure">图28-2自动SPM Evolve Advisor</p><img src="img/auto_spm.png" alt="下面是图28-2的描述" title="下面是图28-2的描述" longdesc="img_text/auto_spm.html"><br><a href="img_text/auto_spm.html">“图28-2自动SPM Evolve Advisor”的说明</a></div>
                        <!-- class="figure" -->
                        <p>每当它在维护窗口中运行时，SPM Evolve Advisor都会执行以下任务：</p>
                        <ol>
                           <li>
                              <p>检查顶级SQL的AWR</p>
                              <p>AWR存储资源最密集的SQL语句。SPM Evolve Advisor在AWR中搜索最有可能从SQL计划基准中受益的语句，然后将这些语句的计划添加到基线。</p>
                           </li>
                           <li>
                              <p>在所有可用来源中寻找替代计划</p>
                              <p>默认情况下（ <code class="codeph">alternate_plan_source=AUTO</code> ），自动任务会在所有可用存储库中搜索尚未包含在SMB计划历史记录中的计划。<code class="codeph">alternate_plan_source</code>的设置显示在<code class="codeph">DBA_ADVISORS_PARAMETERS</code>视图中。
                              </p>
                           </li>
                           <li>
                              <p>将未接受的计划添加到计划历史记录中</p>
                              <p>这些计划尚未在任何SQL语句的SQL计划基准中。</p>
                           </li>
                           <li>
                              <p>在维护窗口期间测试尽可能多的计划的执行</p>
                              <p>对于每个备用计划，数据库测试都会执行该语句并记录性能统计信息。目标是使用基于成本的算法将每个替代计划的性能与优化程序将选择的计划进行比较。</p>
                           </li>
                           <li>
                              <p>执行以下任一操作，具体取决于备用计划是否比当前计划执行得更好：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果性能更好，则SPM Evolve Advisor接受该计划。替代计划现在处于基线状态。</p>
                                 </li>
                                 <li>
                                    <p>如果性能更差，那么计划仍然在声明历史记录中，而不是基线。</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                        <div class="example" id="GUID-6D284A90-3761-4BC1-AC3E-DF39EE727FC7__GUID-621C37AD-28BC-4966-8EB4-BB20E412DA24">
                           <p class="titleinexample">例28-1超出范围的查询</p>
                           <p>假设一个应用程序发出一个新的，长期运行的<code class="codeph">sh.products</code>查询。该查询使用绑定变量引用<code class="codeph">prod_list_price</code>列。数据库执行以下步骤：</p>
                           <ol id="GUID-6D284A90-3761-4BC1-AC3E-DF39EE727FC7__OL_XZQ_DRC_VFB">
                              <li>
                                 <p>优化程序根据新的统计信息为此查询选择最佳计划，该统计信息显示<code class="codeph">prod_list_price</code> ，最大定价为$ 1299.99。最佳计划存在于AWR中。</p>
                              </li>
                              <li>
                                 <p>应用程序会向<code class="codeph">sh.products</code>表添加更多产品，并更改许多产品的清单价格。
                                 </p>
                              </li>
                              <li>
                                 <p>应用程序发出优化器重新分析的原始查询。</p>
                                 <p>在执行查询时，绑定变量将列表价格设置为1500美元，高于表统计信息中记录的1299.99美元最大值。这称为<span class="italic">超出范围的查询</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>优化程序为超出范围的查询选择次优计划，从而导致性能下降。</p>
                                 <p>优化器尝试通过允许超出范围的条件来避免性能回归，但有时不成功，如本示例所示。结果是次优计划。</p>
                              </li>
                              <li>
                                 <p>数据库解决了性能回归，如下所示：</p>
                                 <ul id="GUID-6D284A90-3761-4BC1-AC3E-DF39EE727FC7__UL_JRX_TBY_VFB" style="list-style-type:disc">
                                    <li>
                                       <p>SPM Evolve Advisor将长时间运行的查询标识为SQL计划基准的候选者。</p>
                                    </li>
                                    <li>
                                       <p>SPM Evolve Advisor查找计划，AWR中的原始计划和超出范围查询的次优计划，并确定原始计划的性能更好。</p>
                                    </li>
                                    <li>
                                       <p>SQL计划管理将查询的原始计划添加到SQL计划基准。因此，优化器不会使用退化计划。</p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-6D284A90-3761-4BC1-AC3E-DF39EE727FC7__GUID-2A0B676C-08D4-46C7-AE83-2DB8A231B06F">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-6D284A90-3761-4BC1-AC3E-DF39EE727FC7__UL_PV3_3VD_VFB" style="list-style-type:disc">
                              <li>
                                 <p><span><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>“Oracle数据库许可信息用户手册”</cite></span></a> ，了解不同版本和服务支持哪些功能的详细信息</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ARPLS-GUID-E95C833E-9352-457A-A360-8D7E567EF2F5" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_SPM.SET_EVOLVE_TASK_PARAMETER</code>过程的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-A94CFA49-910A-4237-A7BB-39BFA94E227E" title="SPM Evolve Advisor是一个SQL顾问程序，可以发展最近添加到SQL计划基准的计划。顾问通过消除手动操作的要求简化了计划的发展。">管理SPM Evolve Advisor任务</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94649"></a><div class="props_rev_3"><a id="GUID-0D221783-C6C3-470E-8022-60ADF87E2473" name="GUID-0D221783-C6C3-470E-8022-60ADF87E2473"></a><h5 id="TGSQL-GUID-0D221783-C6C3-470E-8022-60ADF87E2473" class="sect5"><span class="enumeration_section">28.2.2.2</span>启用和禁用SPM Evolve Advisor任务</h5>
                     <div>
                        <p>自动SPM Evolve Advisor任务不存在单独的调度程序客户端。</p>
                        <div class="section">
                           <p>一个客户端控制自动SQL调优顾问和自动SPM Evolve Advisor。因此，相同的任务启用或禁用两者。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-0D221783-C6C3-470E-8022-60ADF87E2473__GUID-CB91827F-AB2C-497F-AC2B-D796D44A58BD">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="sql-tuning-advisor.html#GUID-581888AA-B9EF-4471-ABDF-1FF9C0264412" title="您可以使用Cloud Control（首选）或命令行界面启用或禁用“自动SQL调整”任务。">启用和禁用自动SQL调整任务</a> ”</span>以了解如何启用和禁用自动SPM Evolve Advisor</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-A94CFA49-910A-4237-A7BB-39BFA94E227E" title="SPM Evolve Advisor是一个SQL顾问程序，可以发展最近添加到SQL计划基准的计划。顾问通过消除手动操作的要求简化了计划的发展。">管理SPM Evolve Advisor任务</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94969"></a><a id="TGSQL94650"></a><div class="props_rev_3"><a id="GUID-541EBA4B-4F7D-42DD-A152-C06BDE69D828" name="GUID-541EBA4B-4F7D-42DD-A152-C06BDE69D828"></a><h5 id="TGSQL-GUID-541EBA4B-4F7D-42DD-A152-C06BDE69D828" class="sect5"><span class="enumeration_section">28.2.2.3</span>配置自动SPM Evolve Advisor任务</h5>
                     <div>
                        <p>通过使用<code class="codeph">DBMS_SPM.SET_EVOLVE_TASK_PARAMETER</code>过程指定任务参数来配置自动计划演变。
                        </p>
                        <div class="section">
                           <p>由于<code class="codeph">SYS_AUTO_SPM_EVOLVE_TASK</code>任务由<code class="codeph">SYS</code>拥有，因此只有<code class="codeph">SYS</code>可以设置任务参数。
                           </p>
                           <p>下表描述了一些过程参数。</p>
                           <div class="tblformalwide" id="GUID-541EBA4B-4F7D-42DD-A152-C06BDE69D828__BEIIHDDJ">
                              <p class="titleintable">表28-3 DBMS_SPM.SET_EVOLVE_TASK_PARAMETER参数</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="DBMS_SPM.SET_EVOLVE_TASK_PARAMETER参数" width="100%" border="1" summary="This 2 column table lists the parameters for SPM Evolve Advisor task. Column 1 is the parameter. Column 2 describes that parameter. " frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d140998e2999">参数</th>
                                       <th align="left" valign="bottom" id="d140998e3002">描述</th>
                                       <th align="left" valign="bottom" id="d140998e3005">默认</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e3010" headers="d140998e2999 ">
                                          <p><code class="codeph">alternate_plan_source</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e3010 d140998e3002 ">
                                          <p>确定要搜索其他计划的源： <code class="codeph">CURSOR_CACHE</code> ， <code class="codeph">AUTOMATIC_WORKLOAD_REPOSITORY</code>或<code class="codeph">SQL_TUNING_SET</code> 。将多个值与加号（ <code class="codeph">+</code> ）组合在一起。
                                          </p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e3010 d140998e3005 ">
                                          <p>默认值取决于SPM Evolve Advisor任务是自动还是手动：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p>如果是自动的，则默认为<code class="codeph">AUTO</code> 。</p>
                                             </li>
                                             <li>
                                                <p>如果是手动，则默认为<code class="codeph">CURSOR_CACHE+AUTOMATIC_WORKLOAD_REPOSITORY</code> 。</p>
                                             </li>
                                          </ul>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e3046" headers="d140998e2999 ">
                                          <p><code class="codeph">alternate_plan_baseline</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e3046 d140998e3002 ">
                                          <p>确定应加载哪些替代计划：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p><code class="codeph">AUTO</code>为数据库提供了自主权，可以选择是否为包含或不包含基线的语句加载计划。
                                                </p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">EXISTING</code>为具有现有基线的for语句加载备用计划。
                                                </p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">NEW</code>为没有基线的语句加载替代计划，在这种情况下创建新基线。
                                                </p>
                                             </li>
                                          </ul>
                                          <p>您可以将多个值与加号（ <code class="codeph">+</code> ）组合在一起，如在<code class="codeph">EXISTING+NEW</code> 。</p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e3046 d140998e3005 ">
                                          <p>默认值取决于SPM Evolve Advisor任务是自动还是手动：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p>如果是自动的，则默认为<code class="codeph">AUTO</code> 。</p>
                                             </li>
                                             <li>
                                                <p>如果是手动，则默认为<code class="codeph">EXISTING</code> 。</p>
                                             </li>
                                          </ul>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e3094" headers="d140998e2999 ">
                                          <p><code class="codeph">alternate_plan_limit</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e3094 d140998e3002 ">
                                          <p>指定要加载的最大计划数（即，不是每个SQL语句的限制）。</p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e3094 d140998e3005 ">
                                          <p>默认值取决于SPM Evolve Advisor任务是自动还是手动：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p>如果是自动的，则默认为<code class="codeph">UNLIMITED</code> 。</p>
                                             </li>
                                             <li>
                                                <p>如果是手动，则默认值为<code class="codeph">10</code> 。
                                                </p>
                                             </li>
                                          </ul>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d140998e3118" headers="d140998e2999 ">
                                          <p><code class="codeph">accept_plans</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e3118 d140998e3002 ">
                                          <p>指定是否自动接受推荐的计划。</p>
                                          <p>当<code class="codeph">ACCEPT_PLANS</code>为<code class="codeph">true</code> ，SQL计划管理会自动接受任务建议的所有计划。设置为<code class="codeph">false</code> ，任务会验证计划，然后生成其结果的报告，但不会改进计划。
                                          </p>
                                       </td>
                                       <td align="left" valign="top" headers="d140998e3118 d140998e3005 ">
                                          <p>无论顾问程序是自动运行还是手动运行，默认值均为<code class="codeph">true</code> 。
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="p">
                           <p>本节中的教程假定以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您希望数据库自动接受计划。</p>
                              </li>
                              <li>
                                 <p>您希望任务在每次执行1200秒后超时。</p>
                              </li>
                              <li>
                                 <p>您希望evolve任务在共享SQL区域和AWR存储库中查找最多500个计划</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-541EBA4B-4F7D-42DD-A152-C06BDE69D828__GUID-5369639D-AFC5-4022-B1FA-C1E37C440C39">要设置自动演化任务参数：</p>
                           <ol>
                              <li>
                                 <p>启动SQL * Plus，然后以<code class="codeph">SYS</code>身份登录数据库。</p>
                              </li>
                              <li>
                                 <p>查询<code class="codeph">SYS_AUTO_SPM_EVOLVE_TASK</code>的当前参数设置。</p>
                                 <p>例如，使用管理员权限将SQL * Plus连接到数据库并执行以下查询：</p><pre class="pre codeblock"><code>COL PARAMETER_NAME FORMAT a25 COL VALUE FORMAT a42 SELECT PARAMETER_NAME，PARAMETER_VALUE作为“VALUE”来自DBA_ADVISOR_PARAMETERS WHERE（（TASK_NAME ='SYS_AUTO_SPM_EVOLVE_TASK'）和（（PARAMETER_NAME ='ACCEPT_PLANS'）或（PARAMETER_NAME LIKE'％ALT％'）或（PARAMETER_NAME = '时限'） ） ）;</code></pre><p>示例输出显示如下：</p><pre class="pre codeblock"><code>PARAMETER_NAME VALUE ------------------------- ----------------------- ------------------- ALTERNATE_PLAN_LIMIT 0 ALTERNATE_PLAN_SOURCE CURSOR_CACHE + AUTOMATIC_WORKLOAD_REPOSITORY ALTERNATE_PLAN_BASELINE EXISTING ACCEPT_PLANS true TIME_LIMIT 3600</code></pre></li>
                              <li>
                                 <p>使用以下格式的PL / SQL代码设置参数：</p><pre class="pre codeblock"><code>BEGIN DBMS_SPM.SET_EVOLVE_TASK_PARAMETER（task_name =&gt;'SYS_AUTO_SPM_EVOLVE_TASK'，参数=&gt; <span class="italic">parameter_name</span> ，value =&gt; <span class="italic">value</span> ）;结束; /</code></pre><p>例如，以下PL / SQL块将<code class="codeph">SYS_AUTO_SPM_EVOLVE_TASK</code>任务配置为自动接受计划，在共享SQL区域和AWR存储库中最多搜索500个计划，并在20分钟后超时：</p><pre class="pre codeblock"><code>BEGIN DBMS_SPM.SET_EVOLVE_TASK_PARAMETER（task_name =&gt;'SYS_AUTO_SPM_EVOLVE_TASK'，参数=&gt;'TIME_LIMIT'，值=&gt;'1200'）; DBMS_SPM.SET_EVOLVE_TASK_PARAMETER（task_name =&gt;'SYS_AUTO_SPM_EVOLVE_TASK'，参数=&gt;'ACCEPT_PLANS'，值=&gt;'true'）; DBMS_SPM.SET_EVOLVE_TASK_PARAMETER（task_name =&gt;'SYS_AUTO_SPM_EVOLVE_TASK'，参数=&gt;'ALTERNATE_PLAN_LIMIT'，值=&gt;'500'）;结束; /</code></pre></li>
                              <li>
                                 <p>（可选）通过查询<code class="codeph">SYS_AUTO_SPM_EVOLVE_TASK</code>的当前参数设置来确认更改。</p>
                                 <p>例如，执行以下查询：</p><pre class="pre codeblock"><code>SELECT PARAMETER_NAME，PARAMETER_VALUE作为“VALUE”来自DBA_ADVISOR_PARAMETERS WHERE（（TASK_NAME ='SYS_AUTO_SPM_EVOLVE_TASK'）和（（PARAMETER_NAME ='ACCEPT_PLANS'）或（PARAMETER_NAME LIKE'％ALT％'）或（PARAMETER_NAME ='TIME_LIMIT'）））;</code></pre><p>示例输出显示如下：</p><pre class="pre codeblock"><code>PARAMETER_NAME VALUE ------------------------- ----------------------- ------------------- ALTERNATE_PLAN_LIMIT 500 ALTERNATE_PLAN_SOURCE CURSOR_CACHE + AUTOMATIC_WORKLOAD_REPOSITORY ALTERNATE_PLAN_BASELINE EXISTING ACCEPT_PLANS true TIME_LIMIT 1200</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-541EBA4B-4F7D-42DD-A152-C06BDE69D828__GUID-B51E96A0-4EF1-4D3D-B525-EB72955EA06A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ARPLS68398" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考，</span></a>以获取<code class="codeph">DBMS_SPM.SET_EVOLVE_TASK_PARAMETER</code>完整参考信息</p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=GUID-B1D969D7-E8B6-4DEE-9B6D-0B9E9E66D764" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">DBA_ADVISOR_PARAMETERS</code>视图的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-A94CFA49-910A-4237-A7BB-39BFA94E227E" title="SPM Evolve Advisor是一个SQL顾问程序，可以发展最近添加到SQL计划基准的计划。顾问通过消除手动操作的要求简化了计划的发展。">管理SPM Evolve Advisor任务</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="TGSQL644"></a><a id="TGSQL643"></a><div class="props_rev_3"><a id="GUID-582BC3FB-2F52-4190-B807-16B79346B776" name="GUID-582BC3FB-2F52-4190-B807-16B79346B776"></a><h3 id="TGSQL-GUID-582BC3FB-2F52-4190-B807-16B79346B776" class="sect3"><span class="enumeration_section">28.3</span>在SQL计划基准中显示计划</h3>
               <div>
                  <p>要查看存储在特定语句的SQL计划基准中的计划，请使用<code class="codeph">DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE</code>函数。此功能使用存储在计划历史记录中的计划信息来显示计划。
                  </p>
                  <div class="section">
                     <p>下表介绍了<code class="codeph">DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE</code>函数的相关参数。
                     </p>
                     <div class="tblformal" id="GUID-582BC3FB-2F52-4190-B807-16B79346B776__CDEBDFIH">
                        <p class="titleintable">表28-4 DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE参数" width="100%" border="1" summary="This 2 column table lists the parameters for the DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE function. Column 1 lists the parameters. Column 2 describes the parameters. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d140998e3370">功能参数</th>
                                 <th align="left" valign="bottom" id="d140998e3373">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d140998e3378" headers="d140998e3370 ">
                                    <p><code class="codeph">的sql_handle</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d140998e3378 d140998e3373 ">
                                    <p>语句的SQL句柄。通过加入<code class="codeph">PLAN_NAME</code>列上的<code class="codeph">V$SQL.SQL_PLAN_BASELINE</code>和<code class="codeph">DBA_SQL_PLAN_BASELINES</code>视图来检索SQL句柄。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d140998e3395" headers="d140998e3370 ">
                                    <p><code class="codeph">PLAN_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d140998e3395 d140998e3373 ">
                                    <p>声明的计划名称。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>本节介绍如何从命令行在基线中显示计划。如果使用Cloud Control，则从SQL Plan Baseline子页面显示计划基准， <a href="managing-sql-plan-baselines.html#GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631__CDEBHHEI">如图28-1</a>所示。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-582BC3FB-2F52-4190-B807-16B79346B776__GUID-0CAE792D-BBCD-4489-B587-B4AC40260A35">要在SQL计划基准中显示计划：</p>
                     <ol>
                        <li>
                           <p>使用适当的权限将SQL * Plus连接到数据库，然后获取要显示其计划的查询的SQL ID。</p>
                           <p>例如，假设存在具有SQL ID <code class="codeph">31d96zzzpcys9</code>的<code class="codeph">SELECT</code>语句的SQL计划基准。
                           </p>
                        </li>
                        <li>
                           <p>按SQL ID查询计划。</p>
                           <p>以下查询显示具有SQL ID <code class="codeph">31d96zzzpcys9</code>的语句的执行计划：</p><pre class="pre codeblock"><code>SELECT PLAN_TABLE_OUTPUT FROM V $ SQL s，DBA_SQL_PLAN_BASELINES b，TABLE（DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE（b.sql_handle，b.plan_name，'basic'））t WHERE s。EXACT_MATCHING_SIGNATURE = B。签名和b。PLAN_NAME = S。SQL_PLAN_BASELINE和s。SQL_ID =' <span class="bold">31d96zzzpcys9</span> ';</code></pre><p>示例查询结果如下：</p><pre class="pre codeblock"><code>PLAN_TABLE_OUTPUT ------------------------------------------------- -------------------------- ------------------------ -------------------------------------------------- -  SQL句柄：SQL_513f7f8a91177b1a SQL文本：select * from hr.employees where employee_id = 100 -------------------------------- ------------------------------------------- ------- -------------------------------------------------- ------------------计划名称：SQL_PLAN_52gvzja8jfysuc0e983c6计划编号：3236529094已启用：是固定：否接受：是原点：自动捕获---------- -------------------------------------------------- ---------------计划哈希值：3236529094 ------------------------------ ----------------------- | Id |操作|名称| -------------------------------------------------- --- | 0 |选择声明| | | 1 |按INDEX ROWID表的访问权限|员工| | 2 | INDEX UNIQUE SCAN | EMP_EMP_ID_PK | -------------------------------------------------- ---</code></pre><p>结果显示SQL ID <code class="codeph">31d96zzzpcys</code>的计划名为<code class="codeph">SQL_PLAN_52gvzja8jfysuc0e983c6</code>并自动捕获。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-582BC3FB-2F52-4190-B807-16B79346B776__GUID-070BBDCB-D2D5-46AD-B348-8FCA11795DB6">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-EA548FAC-B350-4F31-96E9-8541AA8AC267" title="SQL管理库（SMB）是数据字典中的逻辑存储库。">SQL管理基础</a> ”</span></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_XPLAN.html#ARPLS378" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，了解<code class="codeph">DISPLAY_SQL_PLAN_BASELINE</code>函数使用的其他参数</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="本章介绍使用DBMS_SPM程序包与SQL计划管理相关的概念和任务。">管理SQL计划基准</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL645"></a><div class="props_rev_3"><a id="GUID-C6AC4856-3C8C-42D8-A7FD-629974E98D36" name="GUID-C6AC4856-3C8C-42D8-A7FD-629974E98D36"></a><h3 id="TGSQL-GUID-C6AC4856-3C8C-42D8-A7FD-629974E98D36" class="sect3"><span class="enumeration_section">28.4</span>加载SQL计划基准</h3>
               <div>
                  <p>使用<code class="codeph">DBMS_SPM</code> ，您可以将一组现有计划的批量加载启动到SQL计划基准中。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-16A42019-4CAB-44F1-8F07-48BAE2B58A99">关于加载SQL计划基准</a><br><code class="codeph">DBMS_SPM</code>包使您可以从多个源加载计划。
                     </li>
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-42801E63-0BEE-4F81-B0D5-CCF006D891F4">从AWR加载计划</a><br>本主题说明如何使用PL / SQL从AWR加载计划。</li>
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-C7C5AEF7-5833-4780-81CF-C40CE6B43571">从共享SQL区域加载计划</a><br>本主题说明如何使用PL / SQL从共享SQL区域（也称为游标缓存）加载计划。</li>
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-93DCD1D7-DCAA-4135-97B3-6CDAB37AC73B">从SQL调整集加载计划</a><br><strong class="term">SQL调优集</strong> （STS）是一个数据库对象，包括一个或多个SQL语句，执行统计信息和执行上下文。本主题说明如何从STS加载计划。</li>
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-406BA5D3-29DE-4AF7-B5D2-8B488297023F">从临时表加载计划</a><br>您可能希望将最佳计划从源数据库传输到不同的目标数据库。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="本章介绍使用DBMS_SPM程序包与SQL计划管理相关的概念和任务。">管理SQL计划基准</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-16A42019-4CAB-44F1-8F07-48BAE2B58A99" name="GUID-16A42019-4CAB-44F1-8F07-48BAE2B58A99"></a><h4 id="TGSQL-GUID-16A42019-4CAB-44F1-8F07-48BAE2B58A99" class="sect4"><span class="enumeration_section">28.4.1</span>关于加载SQL计划基准</h4>
                  <div>
                     <p><code class="codeph">DBMS_SPM</code>包使您可以从多个源加载计划。
                     </p>
                     <p>此任务的目标是从以下来源加载计划：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>AWR</p>
                           <p>从自动工作负载存储库（AWR）快照加载计划。您必须指定快照范围的开头和结尾。（可选）您可以应用筛选器仅加载符合指定条件的计划。默认情况下，优化程序在下次数据库执行SQL语句时使用已加载的计划。</p>
                        </li>
                        <li>
                           <p>共享SQL区域</p>
                           <p>直接从共享SQL区域加载语句计划，该区域位于SGA的共享池中。通过对模块名称，模式或SQL ID应用过滤器，可以标识要捕获的SQL语句或SQL语句集。优化程序在下次数据库执行SQL语句时使用计划。</p>
                           <p>在使用提示手动调整应用程序SQL时，直接从共享SQL区域加载计划非常有用。因为您可能无法更改SQL以包含提示，所以填充SQL计划基准可确保应用程序SQL使用最佳计划。</p>
                        </li>
                        <li>
                           <p>SQL调优集（STS）</p>
                           <p>将SQL工作负载的计划捕获到STS中，然后将计划加载到SQL计划基准中。优化程序在下次数据库执行SQL语句时使用计划。从STS批量加载执行计划是防止数据库升级后计划回归的有效方法。</p>
                        </li>
                        <li>
                           <p>临时表</p>
                           <p>使用<code class="codeph">DBMS_SPM</code>程序包定义临时表， <code class="codeph">DBMS_SPM.PACK_STGTAB_BASELINE</code>将基线复制到临时表，使用Oracle Data Pump将表传输到另一个数据库。在目标数据库上，使用<code class="codeph">DBMS_SPM.UNPACK_STGTAB_BASELINE</code>从登台表中解压缩计划并将基准放入SMB。</p>
                           <p>用例是从新的应用程序模块向数据库中引入新的SQL语句。供应商可以为新SQL提供具有SQL计划基准的应用程序软件。通过这种方式，新SQL使用已知的计划在标准测试配置下提供最佳性能。或者，如果您在内部开发或测试应用程序，请从测试数据库导出正确的计划并将其导入生产数据库。</p>
                        </li>
                        <li>
                           <p>存储的轮廓</p>
                           <p>将存储的轮廓迁移到SQL计划基准。迁移后，您可以保持与使用存储大纲相同的计划稳定性，同时能够使用SQL计划管理提供的更高级功能，例如计划演变。见。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-16A42019-4CAB-44F1-8F07-48BAE2B58A99__GUID-56F756F7-B664-4BDA-A5AE-8FA41F3842F3">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“将<a href="migrating-stored-outlines.html#GUID-E1CBB4DA-2F83-4F4D-845B-CAAA8333DF1A" title="存储的大纲迁移是用户启动的将存储的大纲转换为SQL计划基线的过程。SQL计划基准是一组经证实可提供最佳性能的计划。">存储的大纲迁移到SQL计划基准</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SPM.html#ARPLS68172" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考，</span></a>以了解<code class="codeph">DBMS_SPM.PACK_STGTAB_BASELINE</code>函数</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-C6AC4856-3C8C-42D8-A7FD-629974E98D36" title="使用DBMS_SPM，您可以将一组现有计划的批量加载启动到SQL计划基准中。">加载SQL计划基准</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-42801E63-0BEE-4F81-B0D5-CCF006D891F4" name="GUID-42801E63-0BEE-4F81-B0D5-CCF006D891F4"></a><h4 id="TGSQL-GUID-42801E63-0BEE-4F81-B0D5-CCF006D891F4" class="sect4"><span class="enumeration_section">28.4.2</span>从AWR加载计划</h4>
                  <div>
                     <p>本主题说明如何使用PL / SQL从AWR加载计划。</p>
                     <div class="section">
                        <p>使用<code class="codeph">DBMS_SPM</code>程序包的<code class="codeph">LOAD_PLANS_FROM_AWR</code>函数加载计划。下表描述了一些功能参数。
                        </p>
                        <div class="tblformal" id="GUID-42801E63-0BEE-4F81-B0D5-CCF006D891F4__CDEJCBCC">
                           <p class="titleintable">表28-5 LOAD_PLANS_FROM_AWR参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="LOAD_PLANS_FROM_AWR参数" width="100%" border="1" summary="This 2 column table describes LOAD_PLANS_FROM_AWR function parameters. Column 1 is the function parameter. Column 2 describes that column. " frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d140998e3966">功能参数</th>
                                    <th align="left" valign="bottom" id="d140998e3969">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d140998e3974" headers="d140998e3966 ">
                                       <p><code class="codeph">begin_snap</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d140998e3974 d140998e3969 ">
                                       <p>范围中的起始快照的编号。需要。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d140998e3982" headers="d140998e3966 ">
                                       <p><code class="codeph">end_snap</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d140998e3982 d140998e3969 ">
                                       <p>范围内的结束快照编号。需要。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d140998e3990" headers="d140998e3966 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d140998e3990 d140998e3969 ">
                                       <p>应用于AWR的过滤器，仅选择要加载的合格计划。默认值为null表示选择了AWR中的所有计划。过滤器可以采用任何<code class="codeph">WHERE</code>子句谓词的形式，可以针对列<code class="codeph">DBA_HIST_SQLTEXT.SQL_TEXT</code>指定。一个例子是<code class="codeph">basic_filter =&gt; 'sql_text like ''SELECT /*LOAD_STS*/%'''</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d140998e4007" headers="d140998e3966 ">
                                       <p><code class="codeph">固定</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" headers="d140998e4007 d140998e3969 ">
                                       <p>默认<code class="codeph">NO</code>装置所加载的计划用作非固定计划。<code class="codeph">YES</code>表示已加载的计划是固定计划。 <span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-67A76171-62CB-49A5-B5BD-CFFE26511E90" title="SQL计划选择是优化程序根据存储的计划历史记录检测计划更改的能力，以及使用SQL计划基准来选择计划以避免潜在的性能回归。">计划选择</a> ”</span>解释了优化程序在非固定计划中选择计划基准中的固定计划。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>本节介绍如何使用命令行加载计划。在Cloud Control中，转到SQL Plan Baseline子页面（如图<a href="managing-sql-plan-baselines.html#GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631__CDEBHHEI">28-1</a>所示），然后单击<span class="bold">Load</span>以从AWR加载计划基准。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您希望将以下查询的计划加载到SMB中：</p><pre class="pre codeblock"><code>SELECT / * LOAD_AWR * / * FROM sh.sales WHERE quantity_sold&gt; 40 ORDER BY prod_id;</code></pre></li>
                           <li>
                              <p>您希望加载的计划不固定。</p>
                           </li>
                           <li>
                              <p>用户<code class="codeph">sh</code>具有查询<code class="codeph">DBA_HIST_SNAPSHOT</code>和<code class="codeph">DBA_SQL_PLAN_BASELINES</code>权限，执行<code class="codeph">DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT</code> ，并执行<code class="codeph">DBMS_SPM.LOAD_PLANS_FROM_AWR</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-42801E63-0BEE-4F81-B0D5-CCF006D891F4__GUID-E9DB1607-25F9-483D-8A9B-30573954E5CB">要从共享SQL区域加载计划：</p>
                        <ol>
                           <li>
                              <p>使用适当的权限登录数据库，然后查询最新的3 AWR快照。</p>
                              <p>例如，查询<code class="codeph">DBA_HIST_SNAPSHOT</code>如下：</p><pre class="pre codeblock"><code>SELECT * FROM（SELECT SNAP_ID，SNAP_LEVEL，TO_CHAR（BEGIN_INTERVAL_TIME，'DD / MM / YY HH24：MI：SS'）从DBA_HIST_SNAPSHOT开始按SNAP_ID DESC开始）其中ROWNUM &lt;= 3; SNAP_ID SNAP_LEVEL BEGIN ---------- ---------- ----------------- 212 1 10/12/15 06:00 ：02 211 1 10/12/15 05:00:11 210 1 10/12/15 04:00:59</code></pre></li>
                           <li>
                              <p>查询<code class="codeph">sh.sales</code> ，使用<code class="codeph">LOAD_AWR</code>标记来标识SQL语句。
                              </p>
                              <p>例如，使用以下查询：</p><pre class="pre codeblock"><code>SELECT / * LOAD_AWR * / * FROM sh.sales WHERE quantity_sold&gt; 40 ORDER BY prod_id;</code></pre></li>
                           <li>
                              <p>拍摄新的AWR快照。</p>
                              <p>例如，使用以下程序：</p><pre class="pre codeblock"><code>EXEC DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT;</code></pre></li>
                           <li>
                              <p>查询最新的3个AWR快照以确认已拍摄新快照。</p>
                              <p>例如，查询<code class="codeph">DBA_HIST_SNAPSHOT</code>如下：</p><pre class="pre codeblock"><code>SELECT * FROM（SELECT SNAP_ID，SNAP_LEVEL，TO_CHAR（BEGIN_INTERVAL_TIME，'DD / MM / YY HH24：MI：SS'）从DBA_HIST_SNAPSHOT开始按SNAP_ID DESC开始）其中ROWNUM &lt;= 3; SNAP_ID SNAP_LEVEL开始---------- ---------- ----------------- 213 1 10/12/15 06:24 ：53 212 1 10/12/15 06:00:02 211 1 10/12/15 05:00:11</code></pre></li>
                           <li>
                              <p>从AWR加载最近2个快照的计划。</p>
                              <p>例如，在SQL * Plus中执行<code class="codeph">LOAD_PLANS_FROM_AWR</code>函数以将计划从快照<code class="codeph">212</code>加载到<code class="codeph">213</code> ：</p><pre class="pre codeblock"><code>VARIABLE v_plan_cnt NUMBER EXEC：v_plan_cnt：= DBMS_SPM.LOAD_PLANS_FROM_AWR（begin_snap =&gt; 212，end_snap =&gt; 213）;</code></pre><p>在前面的示例中，变量<code class="codeph">v_plan_cnt</code>包含已加载的计划数。
                              </p>
                           </li>
                           <li>
                              <p>查询数据字典以确保计划已加载到<code class="codeph">LOAD_AWR</code>语句的基线中。
                              </p>
                              <p>以下语句查询<code class="codeph">DBA_SQL_PLAN_BASELINES</code> （包括示例输出）：</p><pre class="pre codeblock"><code>COL SQL_HANDLE FORMAT a20 COL SQL_TEXT FORMAT a20 COL PLAN_NAME FORMAT a30 COL ORIGIN FORMAT a20选择SQL_HANDLE，SQL_TEXT，PLAN_NAME，ORIGIN，启用，接受DBA_SQL_PLAN_BASELINES，其中SQL_TEXT类似'％LOAD_AWR％'; SQL_HANDLE SQL_TEXT PLAN_NAME ORIGIN ENA ACC -------------------- ----------------- ------- ----------------------- -------------------- --- --- SQL_495d29c5f4612cda SELECT / * LOAD_AWR SQL_PLAN_4kr99sru62b6u54bc8843 MANUAL-LOAD-FROM-AWR是是* / *来自sh.sales WHERE quantity_sold&gt; 40 ORDER BY prod_id</code></pre><p>输出显示该计划已被接受，这意味着它位于该语句的计划基线中。此外，原点是<code class="codeph">MANUAL-LOAD-FROM-AWR</code> ，这意味着语句是从AWR手动加载而不是自动捕获的。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-42801E63-0BEE-4F81-B0D5-CCF006D891F4__GUID-00BA708C-2663-44E3-811D-3F31AD82EF76">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p> <span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-B51FBAA9-EE95-4F19-AD4B-F5F4C2910688" title="固定计划是标记为首选的已接受计划，因此优化程序仅考虑基准中的固定计划。固定计划会影响优化程序的计划选择过程。">固定计划</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SPM.html#ARPLS150" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，了解如何使用<code class="codeph">DBMS_SPM.LOAD_PLANS_FROM_AWR</code>函数</p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=REFRN23714" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">DBA_SQL_PLAN_BASELINES</code>视图的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-C6AC4856-3C8C-42D8-A7FD-629974E98D36" title="使用DBMS_SPM，您可以将一组现有计划的批量加载启动到SQL计划基准中。">加载SQL计划基准</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL650"></a><a id="TGSQL94971"></a><a id="TGSQL651"></a><a id="TGSQL649"></a><div class="props_rev_3"><a id="GUID-C7C5AEF7-5833-4780-81CF-C40CE6B43571" name="GUID-C7C5AEF7-5833-4780-81CF-C40CE6B43571"></a><h4 id="TGSQL-GUID-C7C5AEF7-5833-4780-81CF-C40CE6B43571" class="sect4"><span class="enumeration_section">28.4.3</span>从共享SQL区域加载计划</h4>
                  <div>
                     <p>本主题说明如何使用PL / SQL从共享SQL区域（也称为游标缓存）加载计划。</p>
                     <div class="section">
                        <p>使用<code class="codeph">DBMS_SPM</code>程序包的<code class="codeph">LOAD_PLANS_FROM_CURSOR_CACHE</code>函数加载计划。下表描述了一些功能参数。
                        </p>
                        <div class="tblformal" id="GUID-C7C5AEF7-5833-4780-81CF-C40CE6B43571__CDEJCBCC">
                           <p class="titleintable">表28-6 LOAD_PLANS_FROM_CURSOR_CACHE参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="LOAD_PLANS_FROM_CURSOR_CACHE参数" width="100%" border="1" summary="This 2 column table describes LOAD_PLANS_FROM_CURSOR_CACHE function parameters. Column 1 is the parameter. Column 2 describes that parameter. " frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d140998e4328">功能参数</th>
                                    <th align="left" valign="bottom" id="d140998e4331">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d140998e4336" headers="d140998e4328 ">
                                       <p><code class="codeph">SQL_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d140998e4336 d140998e4331 ">
                                       <p>SQL语句标识符。标识共享SQL区域中的SQL语句。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d140998e4344" headers="d140998e4328 ">
                                       <p><code class="codeph">固定</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" headers="d140998e4344 d140998e4331 ">
                                       <p>默认<code class="codeph">NO</code>装置所加载的计划用作非固定计划。<code class="codeph">YES</code>表示已加载的计划是固定计划。 <span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-67A76171-62CB-49A5-B5BD-CFFE26511E90" title="SQL计划选择是优化程序根据存储的计划历史记录检测计划更改的能力，以及使用SQL计划基准来选择计划以避免潜在的性能回归。">计划选择</a> ”</span>解释了优化程序在非固定计划中选择计划基准中的固定计划。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>本节介绍如何使用命令行加载计划。在Cloud Control中，转到SQL Plan Baseline子页面（如图<a href="managing-sql-plan-baselines.html#GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631__CDEBHHEI">28-1</a>所示），然后单击<span class="bold">Load</span>以从共享SQL区域加载计划基准。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您已执行以下查询：</p><pre class="pre codeblock"><code>SELECT / * LOAD_CC * / * FROM sh.sales WHERE quantity_sold&gt; 40 ORDER BY prod_id;</code></pre></li>
                           <li>
                              <p>您希望加载的计划不固定。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C7C5AEF7-5833-4780-81CF-C40CE6B43571__GUID-E9DB1607-25F9-483D-8A9B-30573954E5CB">要从共享SQL区域加载计划：</p>
                        <ol>
                           <li>
                              <p>使用适当的权限将SQL * Plus连接到数据库，然后确定共享SQL区域中相关语句的SQL ID。</p>
                              <p>例如，查询<code class="codeph">sh.sales</code>查询的SQL ID的<code class="codeph">V$SQL</code> （包括示例输出）：</p><pre class="pre codeblock"><code>SELECT SQL_ID，CHILD_NUMBER AS“Child Num”，PLAN_HASH_VALUE AS“Plan Hash”，OPTIMIZER_ENV_HASH_VALUE AS“Opt Env Hash”FROM V $ SQL WHERE SQL_TEXT LIKE'SELECT / * LOAD_CC * /％'; SQL_ID Child Num Plan Hash Opt Env Hash ------------- ---------- ---------- --------- --- 27m0sdw9snw59 0 1421641795 3160571937</code></pre><p>前面的输出显示该语句的SQL ID是<code class="codeph">27m0sdw9snw59</code> 。
                              </p>
                           </li>
                           <li>
                              <p>将指定语句的计划加载到SQL计划基准中。</p>
                              <p>例如，在SQL * Plus中执行<code class="codeph">LOAD_PLANS_FROM_CURSOR_CACHE</code>函数以加载SQL ID为<code class="codeph">27m0sdw9snw59</code>的语句的计划：</p><pre class="pre codeblock"><code>VARIABLE v_plan_cnt NUMBER EXECUTE：v_plan_cnt：= DBMS_SPM.LOAD_PLANS_FROM_CURSOR_CACHE（sql_id =&gt; '27m0sdw9snw59'）;</code></pre><p>在前面的示例中，变量<code class="codeph">v_plan_cnt</code>包含已加载的计划数。
                              </p>
                           </li>
                           <li>
                              <p>查询数据字典以确保将计划加载到语句的基线中。</p>
                              <p>以下语句查询<code class="codeph">DBA_SQL_PLAN_BASELINES</code> （包括示例输出）：</p><pre class="pre codeblock"><code>SELECT SQL_HANDLE，SQL_TEXT，PLAN_NAME，ORIGIN，ENABLED，ACCEPTED FROM DBA_SQL_PLAN_BASELINES; SQL_HANDLE SQL_TEXT PLAN_NAME ORIGIN ENA ACC --------------------- -------------------- --- ------------------ ------------------- --- --- SQL_a8632bd857a4a25e SELECT / * LOAD_CC * / SQL_PLAN_gdkvzfhrgkda MANUAL-LOAD-FROM-CC是是* 71694fc6b来自sh.sales WHERE quantity_sold&gt; 40 ORDER BY prod_id</code></pre><p>输出显示该计划已被接受，这意味着它位于该语句的计划基线中。此外，原点是<code class="codeph">MANUAL-LOAD-FROM-CC</code> ，这意味着语句是从共享SQL区域手动加载而不是自动捕获的。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C7C5AEF7-5833-4780-81CF-C40CE6B43571__GUID-00BA708C-2663-44E3-811D-3F31AD82EF76">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-B51FBAA9-EE95-4F19-AD4B-F5F4C2910688" title="固定计划是标记为首选的已接受计划，因此优化程序仅考虑基准中的固定计划。固定计划会影响优化程序的计划选择过程。">固定计划</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ARPLS150" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，了解如何使用<code class="codeph">DBMS_SPM.LOAD_PLANS_FROM_CURSOR_CACHE</code>函数</p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=REFRN23714" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">DBA_SQL_PLAN_BASELINES</code>视图的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-C6AC4856-3C8C-42D8-A7FD-629974E98D36" title="使用DBMS_SPM，您可以将一组现有计划的批量加载启动到SQL计划基准中。">加载SQL计划基准</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL647"></a><a id="TGSQL94970"></a><a id="TGSQL648"></a><a id="TGSQL646"></a><div class="props_rev_3"><a id="GUID-93DCD1D7-DCAA-4135-97B3-6CDAB37AC73B" name="GUID-93DCD1D7-DCAA-4135-97B3-6CDAB37AC73B"></a><h4 id="TGSQL-GUID-93DCD1D7-DCAA-4135-97B3-6CDAB37AC73B" class="sect4"><span class="enumeration_section">28.4.4</span>从SQL调优集加载计划</h4>
                  <div>
                     <p><strong class="term">SQL调优集</strong> （STS）是一个数据库对象，包括一个或多个SQL语句，执行统计信息和执行上下文。本主题说明如何从STS加载计划。</p>
                     <div class="section">
                        <p>使用<code class="codeph">DBMS_SPM.LOAD_PLANS_FROM_SQLSET</code>函数或使用Cloud Control加载计划。下表描述了一些功能参数。
                        </p>
                        <div class="tblformal" id="GUID-93DCD1D7-DCAA-4135-97B3-6CDAB37AC73B__CDEGJHGG">
                           <p class="titleintable">表28-7 LOAD_PLANS_FROM_SQLSET参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="LOAD_PLANS_FROM_SQLSET参数" width="100%" border="1" summary="This 2 column table lists the parameters for DBMS_SPM.LOAD_PLANS_FROM_SQLSET. Column 1 is the parameter. Column 2 describes that parameter." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d140998e4622">功能参数</th>
                                    <th align="left" valign="bottom" width="80%" id="d140998e4625">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d140998e4630" headers="d140998e4622 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d140998e4630 d140998e4625 ">
                                       <p>从中将计划加载到SQL计划基准的STS的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d140998e4638" headers="d140998e4622 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d140998e4638 d140998e4625 ">
                                       <p>应用于STS的过滤器，仅选择要加载的合格计划。过滤器可以采用任何<code class="codeph">WHERE</code>子句谓词的形式，可以针对视图<code class="codeph">DBA_SQLSET_STATEMENTS</code>指定。一个例子是<code class="codeph">basic_filter =&gt; 'sql_text like ''SELECT /*LOAD_STS*/%'''</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d140998e4655" headers="d140998e4622 ">
                                       <p><code class="codeph">固定</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d140998e4655 d140998e4625 ">
                                       <p>默认<code class="codeph">NO</code>装置所加载的计划用作非固定计划。<code class="codeph">YES</code>表示已加载的计划是固定计划。 <span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-67A76171-62CB-49A5-B5BD-CFFE26511E90" title="SQL计划选择是优化程序根据存储的计划历史记录检测计划更改的能力，以及使用SQL计划基准来选择计划以避免潜在的性能回归。">计划选择</a> ”</span>解释了优化程序在非固定计划中选择计划基准中的固定计划。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>本节介绍如何从命令行加载计划。在Cloud Control中，转到SQL Plan Baseline子页面（如图<a href="managing-sql-plan-baselines.html#GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631__CDEBHHEI">28-1</a>所示），然后单击<span class="bold">Load</span>以从SQL调优集加载计划基准。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93DCD1D7-DCAA-4135-97B3-6CDAB37AC73B__GUID-C8BF29AC-C2CB-43BD-B65A-3E280900BB62">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您希望加载的计划不固定。</p>
                           </li>
                           <li>
                              <p>您已执行以下查询：</p><pre class="pre codeblock"><code>SELECT / * LOAD_STS * / * FROM sh.sales WHERE quantity_sold&gt; 40 ORDER BY prod_id;</code></pre></li>
                           <li>
                              <p>您已将计划从共享SQL区域加载到名为<code class="codeph">SPM_STS</code>的SQL调优集中，该调优集由用户<code class="codeph">SPM</code>拥有。</p>
                           </li>
                           <li>
                              <p>在操作之后，您希望使用<code class="codeph">DBMS_SQLTUNE.DROP_SQLSET</code>而不是等效的D <code class="codeph">BMS_SQLSET.DROP_SQLSET</code>删除STS。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93DCD1D7-DCAA-4135-97B3-6CDAB37AC73B__GUID-75217461-205E-4793-8975-216E157DFA11">要从SQL调优集加载计划：</p>
                        <ol>
                           <li>
                              <p>使用适当的权限将SQL * Plus连接到数据库，然后验证SQL调优集中的计划。</p>
                              <p>例如，查询<code class="codeph">DBA_SQLSET_STATEMENTS</code>名称的<code class="codeph">DBA_SQLSET_STATEMENTS</code> （包括样本输出）：</p><pre class="pre codeblock"><code>SELECT SQL_TEXT FROM DBA_SQLSET_STATEMENTS WHERE SQLSET_NAME ='SPM_STS'; SQL_TEXT -------------------- SELECT / * LOAD_STS * / * FROM sh.sales WHERE quantity_sold&gt; 40 ORDER BY prod_id</code></pre><p>输出显示<code class="codeph">select /*LOAD_STS*/</code>语句的计划在STS中。</p>
                           </li>
                           <li>
                              <p>将计划从STS加载到SQL计划基准中。</p>
                              <p>例如，在SQL * Plus中执行如下函数：</p><pre class="pre codeblock"><code>VARIABLE v_plan_cnt NUMBER EXECUTE：v_plan_cnt：= DBMS_SPM.LOAD_PLANS_FROM_SQLSET（ -  sqlset_name =&gt;'SPM_STS'， -  basic_filter =&gt;'sql_text like''SELECT / * LOAD_STS * /％'''）;</code></pre><p><code class="codeph">basic_filter</code>参数指定<code class="codeph">WHERE</code>子句，该子句仅加载感兴趣的查询的计划。变量<code class="codeph">v_plan_cnt</code>存储从STS加载的计划数。</p>
                           </li>
                           <li>
                              <p>查询数据字典以确保计划已加载到语句的基线中。</p>
                              <p>以下语句查询<code class="codeph">DBA_SQL_PLAN_BASELINES</code>视图（包括示例输出）。
                              </p><pre class="pre codeblock"><code>SQL&gt; SELECT SQL_HANDLE，SQL_TEXT，PLAN_NAME，2 ORIGIN，ENABLED，ACCEPTED 3 FROM DBA_SQL_PLAN_BASELINES; SQL_HANDLE SQL_TEXT PLAN_NAME ORIGIN ENA ACC --------------------- --------------- -------- -------- -------------------- --- --- SQL_a8632bd857a4a25e SELECT SQL_PLAN_ahstb MANUAL-LOAD-FROM-STS YES <span class="bold">YES</span> / * LOAD_STS * / * v1bu98ky1694fc6b FROM sh.sales WHERE quantity_sold&gt; 40 ORDER BY prod_id</code></pre><p>输出显示计划已被接受，这意味着它在计划基线中。此外，原点是<code class="codeph">MANUAL-LOAD-FROM-STS</code> ，这意味着计划是从SQL调优集手动加载而不是自动捕获的。
                              </p>
                           </li>
                           <li>
                              <p>（可选）丢弃STS。</p>
                              <p>例如，执行<code class="codeph">DBMS_SQLTUNE.DROP_SQLSET</code>以删除<code class="codeph">SPM_STS</code>调优集，如下所示：</p><pre class="pre codeblock"><code>EXEC SYS.DBMS_SQLTUNE.DROP_SQLSET（sqlset_name =&gt;'SPM_STS'， -  sqlset_owner =&gt;'SPM'）;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-93DCD1D7-DCAA-4135-97B3-6CDAB37AC73B__GUID-7813B9D9-DB9B-4CA6-B67A-872196B369CD">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-sql-tuning-sets.html#GUID-236DF69A-6370-4A56-9BF1-384C7CB865B1" title="在命令行上，您可以使用DBMS_SQLTUNE或DBMS_SQLSET包来管理SQL调优集。">SQL调优集的命令行界面</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=REFRN23470" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">DBA_SQL_PLAN_BASELINES</code>视图</p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SPM.html#ARPLS68170" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_SPM.LOAD_PLANS_FROM_SQLSET</code>函数</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-C6AC4856-3C8C-42D8-A7FD-629974E98D36" title="使用DBMS_SPM，您可以将一组现有计划的批量加载启动到SQL计划基准中。">加载SQL计划基准</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94972"></a><a id="TGSQL652"></a><div class="props_rev_3"><a id="GUID-406BA5D3-29DE-4AF7-B5D2-8B488297023F" name="GUID-406BA5D3-29DE-4AF7-B5D2-8B488297023F"></a><h4 id="TGSQL-GUID-406BA5D3-29DE-4AF7-B5D2-8B488297023F" class="sect4"><span class="enumeration_section">28.4.5</span>从临时表加载计划</h4>
                  <div>
                     <p>您可能希望将最佳计划从源数据库传输到不同的目标数据库。</p>
                     <div class="section">
                        <p>例如，您可能已经在测试数据库上调查了一组计划，并确认它们已经表现良好。然后，您可能希望将这些计划加载到生产数据库中。</p>
                        <p>登台表是一个表，在其存在期间，存储计划，以便在您打开包装时计划不会从表中消失。使用<code class="codeph">DBMS_SPM.CREATE_STGTAB_BASELINE</code>过程创建临时表。要打包（插入行） <code class="codeph">PACK_STGTAB_BASELINE</code>压缩（从中提取行）登台表，请使用<code class="codeph">DBMS_SPM</code>程序包的<code class="codeph">PACK_STGTAB_BASELINE</code>和<code class="codeph">UNPACK_STGTAB_BASELINE</code>函数。通过Oracle Data Pump Import and Export，您可以将登台表复制到其他数据库。
                        </p>
                        <div class="figure" id="GUID-406BA5D3-29DE-4AF7-B5D2-8B488297023F__GUID-FFFE50DB-912E-4A75-AF90-8944A1C9CAE5">
                           <p class="titleinfigure">图28-3从分段表加载计划</p><img src="img/tgsql_vm_006.png" alt="下面是图28-3的描述" title="下面是图28-3的描述" longdesc="img_text/tgsql_vm_006.html"><br><a href="img_text/tgsql_vm_006.html">“图28-3从分段表加载计划”的描述</a></div>
                        <!-- class="figure" -->
                        <p>使用<code class="codeph">DBMS_SPM</code>程序包的<code class="codeph">PACK_STGTAB_BASELINE</code>函数导出计划，然后使用<code class="codeph">UNPACK_STGTAB_BASELINE</code>导入它们。下表描述了一些功能参数。
                        </p>
                        <div class="tblformal" id="GUID-406BA5D3-29DE-4AF7-B5D2-8B488297023F__CDEJCBCC">
                           <p class="titleintable">表28-8 PACK_STGTAB_BASELINE和UNPACK_STGTAB_BASELINE参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PACK_STGTAB_BASELINE和UNPACK_STGTAB_BASELINE参数" width="100%" border="1" summary="This 2 column table describes function parameters. Column 1 is the function parameter, Column 2 is a description. " frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d140998e4987">功能参数</th>
                                    <th align="left" valign="bottom" id="d140998e4990">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d140998e4995" headers="d140998e4987 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d140998e4995 d140998e4990 ">
                                       <p>指定要导入或导出的表。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d140998e5003" headers="d140998e4987 ">
                                       <p><code class="codeph">起源</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" headers="d140998e5003 d140998e4990 ">
                                       <p>SQL计划基准的起源。这些过程接受<code class="codeph">DBA_SQL_PLAN_BASELINES.ORIGIN</code>所有可能值作为<code class="codeph">origin</code>参数。例如， <code class="codeph">origin</code>参数允许<code class="codeph">MANUAL-LOAD-FROM-STS</code> ， <code class="codeph">MANUAL-LOAD-FROM-AWR</code>和<code class="codeph">MANUAL-LOAD-FROM-CC</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您希望在源数据库中创建名为<code class="codeph">stage1</code>的临时表。
                              </p>
                           </li>
                           <li>
                              <p>您希望将用户<code class="codeph">spm</code>拥有的所有计划加载到临时表中。
                              </p>
                           </li>
                           <li>
                              <p>您希望将登台表传输到目标数据库。</p>
                           </li>
                           <li>
                              <p>您希望将<code class="codeph">stage1</code>的计划作为固定计划加载。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-406BA5D3-29DE-4AF7-B5D2-8B488297023F__GUID-E2283534-5314-4F82-9FC4-465A95FBAA3A">要将一组SQL计划基准从一个数据库传输到另一个数据库：</p>
                        <ol>
                           <li>
                              <p>使用适当的权限将SQL * Plus连接到源数据库，然后使用<code class="codeph">CREATE_STGTAB_BASELINE</code>过程创建临时表。
                              </p>
                              <p>以下示例创建名为<code class="codeph">stage1</code>的临时表：</p><pre class="pre codeblock"><code>BEGIN DBMS_SPM.CREATE_STGTAB_BASELINE（table_name =&gt;'stage1'）;结束; /</code></pre></li>
                           <li>
                              <p>在源数据库上，将要从SQL管理库导出的SQL计划基准打包到登台表中。</p>
                              <p>以下示例将用户<code class="codeph">spm</code>创建的计划基准打包到临时表<code class="codeph">stage1</code> 。选择使用计划名称（SQL计划基准<code class="codeph">plan_name</code> ），SQL手柄（ <code class="codeph">sql_handle</code> ），或者任何其他的计划标准。<code class="codeph">table_name</code>参数是必需的。
                              </p><pre class="pre codeblock"><code>DECLARE v_plan_cnt NUMBER; BEGIN v_plan_cnt：= DBMS_SPM.PACK_STGTAB_BASELINE（table_name =&gt;'stage1'，enabled =&gt;'yes'，creator =&gt;'spm'）;结束; /</code></pre></li>
                           <li>
                              <p>使用Oracle Data Pump Export将登台表<code class="codeph">stage1</code>导出到转储文件中。
                              </p>
                           </li>
                           <li>
                              <p>将转储文件传输到目标数据库的主机。</p>
                           </li>
                           <li>
                              <p>在目标数据库上，使用Oracle Data Pump Import实用程序从转储文件导入登台表<code class="codeph">stage1</code> 。
                              </p>
                           </li>
                           <li>
                              <p>在目标数据库上，将SQL计划基准从登台表解压缩到SQL管理库中。</p>
                              <p>以下示例解压缩存储在临时表<code class="codeph">stage1</code>中的所有固定计划基准：</p><pre class="pre codeblock"><code>DECLARE v_plan_cnt NUMBER; BEGIN v_plan_cnt：= DBMS_SPM.UNPACK_STGTAB_BASELINE（table_name =&gt;'stage1'，fixed =&gt;'yes'）;结束; /</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-406BA5D3-29DE-4AF7-B5D2-8B488297023F__GUID-CD28EF75-6A13-431A-90CB-3ABD93BCB70B">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关使用<code class="codeph">DBMS_SPM</code>程序包的更多信息，请<a href="../arpls/DBMS_SPM.html#ARPLS150" target="_blank"><span><cite>参见Oracle Database PL / SQL程序包和类型参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../refrn/DBA_SQL_PLAN_BASELINES.html#REFRN23714" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">DBA_SQL_PLAN_BASELINES</code>视图的更多信息</p>
                           </li>
                           <li>
                              <p>有关使用数据泵导出和导入实用<a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span><cite>程序</cite></span></a>的详细信息，请<a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span><cite>参见Oracle数据库实用</cite></span></a>程序</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-C6AC4856-3C8C-42D8-A7FD-629974E98D36" title="使用DBMS_SPM，您可以将一组现有计划的批量加载启动到SQL计划基准中。">加载SQL计划基准</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL653"></a><div class="props_rev_3"><a id="GUID-19E6FFB0-BC7A-4CDB-AE36-6D67C15C7332" name="GUID-19E6FFB0-BC7A-4CDB-AE36-6D67C15C7332"></a><h3 id="TGSQL-GUID-19E6FFB0-BC7A-4CDB-AE36-6D67C15C7332" class="sect3"><span class="enumeration_section">28.5</span>手动演进SQL计划基准</h3>
               <div>
                  <p>您可以使用PL / SQL或Cloud Control手动发展未接受的计划，以确定它是否比计划基准中当前的任何计划表现更好。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-15A23B74-8B43-49EA-83CE-14F2C209C9A9">关于DBMS_SPM Evolve函数</a><br>本主题描述了用于管理计划演变的最相关的<code class="codeph">DBMS_SPM</code>功能。手动执行演化任务或安排它们自动运行。
                     </li>
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-528D51FD-E109-488A-B1EF-9B736E78901A">管理演进任务</a><br>本主题描述了一个典型用例，您可以在其中创建和执行任务，然后实现其建议。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-19E6FFB0-BC7A-4CDB-AE36-6D67C15C7332__GUID-981975F8-72CE-403A-8F93-152FF4AB7DD4">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-A94CFA49-910A-4237-A7BB-39BFA94E227E" title="SPM Evolve Advisor是一个SQL顾问程序，可以发展最近添加到SQL计划基准的计划。顾问通过消除手动操作的要求简化了计划的发展。">管理SPM Evolve Advisor任务</a> ”</span></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="本章介绍使用DBMS_SPM程序包与SQL计划管理相关的概念和任务。">管理SQL计划基准</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94616"></a><a id="TGSQL94652"></a><a id="TGSQL94651"></a><div class="props_rev_3"><a id="GUID-15A23B74-8B43-49EA-83CE-14F2C209C9A9" name="GUID-15A23B74-8B43-49EA-83CE-14F2C209C9A9"></a><h4 id="TGSQL-GUID-15A23B74-8B43-49EA-83CE-14F2C209C9A9" class="sect4"><span class="enumeration_section">28.5.1</span>关于DBMS_SPM Evolve函数</h4>
                  <div>
                     <p>本主题描述了用于管理计划演变的最相关的<code class="codeph">DBMS_SPM</code>功能。手动执行演化任务或安排它们自动运行。
                     </p>
                     <p></p>
                     <div class="tblformal" id="GUID-15A23B74-8B43-49EA-83CE-14F2C209C9A9__CDEGCFDF">
                        <p class="titleintable">表28-9用于管理计划演进任务的DBMS_SPM功能和过程</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SPM用于管理计划演进任务的功能和过程" width="100%" border="1" summary="This 3 column table lists the procedures and functions for managing plan evolution. Column 1 is the procedure or function. Column 2 is a description. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="49%" id="d140998e5424">程序或功能</th>
                                 <th align="left" valign="bottom" width="51%" id="d140998e5427">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d140998e5432" headers="d140998e5424 ">
                                    <p><code class="codeph">ACCEPT_SQL_PLAN_BASELINE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d140998e5432 d140998e5427 ">
                                    <p>此函数接受一个建议，即将单个计划发展为SQL计划基准。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d140998e5440" headers="d140998e5424 ">
                                    <p><code class="codeph">CREATE_EVOLVE_TASK</code></p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d140998e5440 d140998e5427 ">
                                    <p>此函数创建一个顾问程序任务，以便为指定的SQL语句准备一个或多个计划的<a href="glossary.html#GUID-EB0CDE30-5FFF-4F51-A06D-AB60811B242F"><span class="xrefglossterm">计划演变</span></a> 。输入参数可以是<a href="glossary.html#GUID-73B75657-B353-4201-8465-796B20C1A6C6"><span class="xrefglossterm">SQL句柄</span></a> ，计划名称或计划名称列表，时间限制，任务名称和描述。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d140998e5454" headers="d140998e5424 ">
                                    <p><code class="codeph">EXECUTE_EVOLVE_TASK</code></p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d140998e5454 d140998e5427 ">
                                    <p>该函数执行进化任务。输入参数可以是任务名称，执行名称和执行描述。如果未指定，则顾问程序将生成名称，该名称由函数返回。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d140998e5462" headers="d140998e5424 ">
                                    <p><code class="codeph">IMPLEMENT_EVOLVE_TASK</code></p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d140998e5462 d140998e5427 ">
                                    <p>此功能实现了进化任务的所有建议。实质上，此功能相当于对所有推荐的计划使用<code class="codeph">ACCEPT_SQL_PLAN_BASELINE</code> 。输入参数包括任务名称，计划名称，所有者名称和执行名称。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d140998e5473" headers="d140998e5424 ">
                                    <p><code class="codeph">REPORT_EVOLVE_TASK</code></p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d140998e5473 d140998e5427 ">
                                    <p>此函数将演进任务的结果显示为<code class="codeph">CLOB</code> 。输入参数包括要包括的报告的任务名称和部分。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d140998e5484" headers="d140998e5424 ">
                                    <p><code class="codeph">SET_EVOLVE_TASK_PARAMETER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d140998e5484 d140998e5427 ">
                                    <p>此函数更新evolve任务参数的值。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>Oracle建议您将SPM Evolve Advisor配置为自动运行。您还可以手动发展SQL计划基准。下图显示了管理SQL计划管理任务的基本工作流程。</p>
                     <div class="figure" id="GUID-15A23B74-8B43-49EA-83CE-14F2C209C9A9__CDEGEHCC">
                        <p class="titleinfigure">图28-4不断发展的SQL计划基准</p><img src="img/tgsql_vm_022.png" alt="下面是图28-4的描述" title="下面是图28-4的描述" longdesc="img_text/tgsql_vm_022.html"><br><a href="img_text/tgsql_vm_022.html">“图28-4不断发展的SQL计划基准”的说明</a></div>
                     <!-- class="figure" -->
                     <p>通常，您按以下顺序管理SQL计划演变任务：</p>
                     <ol>
                        <li>
                           <p>创建一个进化任务</p>
                        </li>
                        <li>
                           <p>（可选）设置evolve任务参数</p>
                        </li>
                        <li>
                           <p>执行evolve任务</p>
                        </li>
                        <li>
                           <p>在任务中实施建议</p>
                        </li>
                        <li>
                           <p>报告任务结果</p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-15A23B74-8B43-49EA-83CE-14F2C209C9A9__GUID-61EF304D-E301-459F-B819-1085D09BF8DE">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-541EBA4B-4F7D-42DD-A152-C06BDE69D828" title="通过使用DBMS_SPM.SET_EVOLVE_TASK_PARAMETER过程指定任务参数来配置自动计划演变。">配置自动SPM Evolve Advisor任务</a> ”</span>以了解<code class="codeph">SET_EVOLVE_TASK_PARAMETER</code></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">DBMS_SPM</code>程序包的更多信息，请<code class="codeph">DBMS_SPM</code> <a href="../arpls/DBMS_SPM.html#ARPLS150" target="_blank"><span><cite>Oracle Database PL / SQL程序包和类型参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-19E6FFB0-BC7A-4CDB-AE36-6D67C15C7332" title="您可以使用PL / SQL或Cloud Control手动发展未接受的计划，以确定它是否比计划基准中当前的任何计划表现更好。">手动演进SQL计划基准</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL654"></a><a id="TGSQL94973"></a><a id="TGSQL655"></a><a id="TGSQL656"></a><a id="TGSQL94810"></a><a id="TGSQL94653"></a><div class="props_rev_3"><a id="GUID-528D51FD-E109-488A-B1EF-9B736E78901A" name="GUID-528D51FD-E109-488A-B1EF-9B736E78901A"></a><h4 id="TGSQL-GUID-528D51FD-E109-488A-B1EF-9B736E78901A" class="sect4"><span class="enumeration_section">28.5.2</span>管理演进任务</h4>
                  <div>
                     <p>本主题描述了一个典型用例，您可以在其中创建和执行任务，然后实现其建议。</p>
                     <div class="section">
                        <p>下表描述了<code class="codeph">CREATE_EVOLVE_TASK</code>函数的一些参数。
                        </p>
                        <div class="tblformal" id="GUID-528D51FD-E109-488A-B1EF-9B736E78901A__CDEFCHHA">
                           <p class="titleintable">表28-10 DBMS_SPM.CREATE_EVOLVE_TASK参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SPM.CREATE_EVOLVE_TASK参数" width="100%" border="1" summary="This 2 column table lists the parameters for the CREATE_EVOLVE_TASK function. Column 1 is the parameter. Column 2 describes that parameter. " frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d140998e5688">功能参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d140998e5691">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d140998e5696" headers="d140998e5688 ">
                                       <p><code class="codeph">的sql_handle</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d140998e5696 d140998e5691 ">
                                       <p>语句的SQL句柄。缺省<code class="codeph">NULL</code>考虑具有未接受计划的所有SQL语句。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d140998e5707" headers="d140998e5688 ">
                                       <p><code class="codeph">PLAN_NAME</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d140998e5707 d140998e5691 ">
                                       <p>计划标识符。如果SQL句柄为<code class="codeph">NULL</code> ，则默认<code class="codeph">NULL</code>表示考虑指定SQL句柄或所有SQL语句的所有未接受计划。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d140998e5722" headers="d140998e5688 ">
                                       <p><code class="codeph">时限</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d140998e5722 d140998e5691 ">
                                       <p>分钟数的时间限制。第一个未接受计划的时间限制等于输入值。第二个未接受计划的时间限制等于输入值减去第一个计划验证所花费的时间，依此类推。默认<code class="codeph">DBMS_SPM.AUTO_LIMIT</code>表示让系统根据需要完成的计划验证数量选择适当的时间限制。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d140998e5734" headers="d140998e5688 ">
                                       <p><code class="codeph">任务名称</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d140998e5734 d140998e5691 ">
                                       <p>用户指定的evolution任务名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>本节介绍如何从命令行演化计划基线。在“云控制”中，从“SQL计划基准”子页面中选择一个计划，然后单击“ <span class="bold">演变”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您没有启用自动演进任务。</p>
                           </li>
                           <li>
                              <p>您想为以下查询创建SQL计划基准：</p><pre class="pre codeblock"><code>SELECT / * q1_group_by * / prod_name，sum（quantity_sold）FROM products p，sales s WHERE p.prod_id = s.prod_id AND p.prod_category_id = 203 GROUP BY prod_name;</code></pre></li>
                           <li>
                              <p>您希望创建两个索引以提高查询性能，然后如果它的性能优于计划基线中当前的计划，则可以演变使用这些索引的计划。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-528D51FD-E109-488A-B1EF-9B736E78901A__GUID-623A8624-1755-4997-B851-CCFEA5A9DFD3">制定指定的计划：</p>
                        <ol>
                           <li>
                              <p>执行初始设置如下：</p>
                              <ol type="a">
                                 <li>
                                    <p>使用管理员权限将SQL * Plus连接到数据库，然后通过刷新共享池和缓冲区缓存来准备本教程：</p><pre class="pre codeblock"><code>ALTER SYSTEM FLUSH SHARED_POOL; ALTER SYSTEM FLUSH BUFFER_CACHE;</code></pre></li>
                                 <li>
                                    <p>启用SQL计划基准的自动捕获。</p>
                                    <p>例如，输入以下语句：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES = true;</code></pre></li>
                                 <li>
                                    <p>以<code class="codeph">sh</code>用户身份连接到数据库，然后设置SQL * Plus显示参数：</p><pre class="pre codeblock"><code>CONNECT sh  - 输入密码SET PAGES 10000 LINES 140 SET SERVEROUTPUT ON COL SQL_TEXT FORMAT A20 COL SQL_HANDLE FORMAT A20 COL PLAN_NAME FORMAT A30 COL ORIGIN FORMAT A12 SET LONGC 60535 SET LONG 60535 SET ECHO ON</code></pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>执行<code class="codeph">SELECT</code>语句，以便SQL计划管理捕获它们：</p>
                              <ol type="a">
                                 <li>
                                    <p>第一次执行<code class="codeph">SELECT /* q1_group_by */</code>语句。
                                    </p>
                                    <p>由于数据库仅捕获可重复语句的计划，因此该语句的计划基准为空。</p>
                                 </li>
                                 <li>
                                    <p>查询数据字典以确认计划基准中不存在任何计划。</p>
                                    <p>例如，执行以下查询（包括示例输出）：</p><pre class="pre codeblock"><code>SELECT SQL_HANDLE，SQL_TEXT，PLAN_NAME，ORIGIN，ENABLED，ACCEPTED，FIXED，AUTOPURGE FROM DBA_SQL_PLAN_BASELINES SQLEREEXLE LIKE'％q1_group％';没有选择任何行</code></pre><p>SQL计划管理仅捕获可重复的语句，因此预期会产生此结果。</p>
                                 </li>
                                 <li>
                                    <p>第二次执行<code class="codeph">SELECT /* q1_group_by */</code>语句。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>查询数据字典以确保将计划加载到语句的计划基线中。</p>
                              <p>以下语句查询<code class="codeph">DBA_SQL_PLAN_BASELINES</code> （包括示例输出）：</p><pre class="pre codeblock"><code>SELECT SQL_HANDLE，SQL_TEXT，PLAN_NAME，ORIGIN，ENABLED，ACCEPTED，FIXED DBA_SQL_PLAN_BASELINES，其中SQL_TEXT类似'％q1_group％'; SQL_HANDLE SQL_TEXT PLAN_NAME ORIGIN ENA ACC FIX -------------------- ---------------- ------- ----------------------- ------------ --- --- --- SQL_07f16c76ff893342 SELECT / * q1_gro SQL_PLAN_0gwbcfvzskcu242949306 <span class="bold">AUTO-CAPTURE</span> YES <span class="bold">YES</span> NO up_by * / prod_na me，sum（quantity _sold）FROM products p，sales s WHERE p.prod_id = s.prod_id AND p.prod_category _id = 203 GROUP BY prod_name</code></pre><p>输出显示该计划已被接受，这意味着它位于该语句的计划基线中。此外，原点是<code class="codeph">AUTO-CAPTURE</code> ，这意味着语句被自动捕获而不是手动加载。
                              </p>
                           </li>
                           <li>
                              <p>解释该语句的计划并验证优化程序是否正在使用此计划。</p>
                              <p>例如，按如下方式解释计划，然后显示它：</p><pre class="pre codeblock"><code>EXPLAIN PLAN FOR SELECT / * q1_group_by * / prod_name，sum（quantity_sold）FROM products p，sales s WHERE p.prod_id = s.prod_id AND p.prod_category_id = 203 GROUP BY prod_name; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY（null，null，'basic + note'））;</code></pre><p>示例输出显示如下：</p><pre class="pre codeblock"><code>计划哈希值：1117033222 ------------------------------------------ | Id |操作|名称| ------------------------------------------ | 0 |选择声明| | | 1 | HASH GROUP BY | | | 2 | HASH JOIN | | | 3 |表访问完全|产品| | 4 | PARTITION RANGE ALL | | | 5 |表访问完全|销售| ------------------------------------------注意-----  -  SQL计划用于此语句的基线“SQL_PLAN_0gwbcfvzskcu242949306”</code></pre><p>该注释表明优化程序正在使用显示的计划以及上一步中列出的计划名称。</p>
                           </li>
                           <li>
                              <p>创建两个索引以提高<code class="codeph">SELECT /* q1_group_by */</code>语句的性能。
                              </p>
                              <p>例如，使用以下语句：</p><pre class="pre codeblock"><code>CREATE INDEX ind_prod_cat_name ON产品（prod_category_id，prod_name，prod_id）; CREATE INDEX ind_sales_prod_qty_sold ON sales（prod_id，quantity_sold）;</code></pre></li>
                           <li>
                              <p>再次执行<code class="codeph">select /* q1_group_by */</code>语句。
                              </p>
                              <p>由于启用了自动捕获，因此将使用此语句的新计划填充计划基准。</p>
                           </li>
                           <li>
                              <p>查询数据字典以确保将计划加载到语句的SQL计划基准中。</p>
                              <p>以下语句查询<code class="codeph">DBA_SQL_PLAN_BASELINES</code> （包括示例输出）。
                              </p><pre class="pre codeblock"><code>SELECT SQL_HANDLE，SQL_TEXT，PLAN_NAME，ORIGIN，ENABLED，ACCEPTED FROM DBA_SQL_PLAN_BASELINES WHERE SQL_HANDLE IN（'SQL_07f16c76ff893342'）ORDER BY SQL_HANDLE，ACCEPTED; SQL_HANDLE SQL_TEXT PLAN_NAME ORIGIN ENA ACC -------------------- -------------------- ---- -------------------------- ------------ --- --- SQL_07f16c76ff893342 SELECT / * q1_group_b SQL_PLAN_0gwbcfvzskcu20135fd6c AUTO-CAPTURE YES <span class="bold">NO</span> y * / prod_name，sum（quantity_sold）FROM products p，s ales s WHERE p.prod_id = s .prod_id AND p.prod_catego ry_id = 203 GROUP BY prod_name SQL_07f16c76ff893342 SELECT / * q1_group_b SQL_PLAN_0gwbcfvzskcu242949306 AUTO-CAPTURE YES YES y * / prod_name，sum（quantity_sold）FROM products p，s ales s WHERE p.prod_id = s .prod_id AND p.prod_catego ry_id = 203 GROUP BY prod_name</code></pre><p>输出显示新计划未被接受，这意味着它位于语句历史记录中，但不在SQL计划基准中。</p>
                           </li>
                           <li>
                              <p>解释该语句的计划并验证优化程序是否正在使用原始的无索引计划。</p>
                              <p>例如，按如下方式解释计划，然后显示它：</p><pre class="pre codeblock"><code>EXPLAIN PLAN FOR SELECT / * q1_group_by * / prod_name，sum（quantity_sold）FROM products p，sales s WHERE p.prod_id = s.prod_id AND p.prod_category_id = 203 GROUP BY prod_name; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY（null，null，'basic + note'））;</code></pre><p>示例输出显示如下：</p><pre class="pre codeblock"><code>计划哈希值：1117033222 ------------------------------------------ | Id |操作|名称| ------------------------------------------ | 0 |选择声明| | | 1 | HASH GROUP BY | | | 2 | HASH JOIN | | | 3 |表访问完全|产品| | 4 | PARTITION RANGE ALL | | | 5 |表访问完全|销售| ------------------------------------------注意-----  -  SQL计划用于此语句的基线“SQL_PLAN_0gwbcfvzskcu242949306”</code></pre><p>该注释表明优化器正在使用显示在步骤3中列出的计划名称的计划。</p>
                           </li>
                           <li>
                              <p>以管理员身份进行连接，然后创建一个演进任务，该任务考虑具有未接受计划的所有SQL语句。</p>
                              <p>例如，执行<code class="codeph">DBMS_SPM.CREATE_EVOLVE_TASK</code>函数，然后获取任务的名称：</p><pre class="pre codeblock"><code>CONNECT / AS SYSDBA VARIABLE cnt NUMBER VARIABLE tk_name VARCHAR2（50）VARIABLE exe_name VARCHAR2（50）VARIABLE evol_out CLOB EXECUTE：tk_name：= DBMS_SPM.CREATE_EVOLVE_TASK（sql_handle =&gt;'SQL_07f16c76ff893342'，plan_name =&gt;'SQL_PLAN_0gwbcfvzskcu20135fd6c'）; SELECT：tk_name FROM DUAL;</code></pre><p>以下示例输出显示了任务的名称：</p><pre class="pre codeblock"><code>：EVOL_OUT ------------------------------------------------ -------------------------- TASK_11</code></pre><p>现在已创建任务并具有唯一名称，请执行该任务。</p>
                           </li>
                           <li>
                              <p>执行任务。</p>
                              <p>例如，执行<code class="codeph">DBMS_SPM.EXECUTE_EVOLVE_TASK</code>函数（包括示例输出）：</p><pre class="pre codeblock"><code>EXECUTE：exe_name：= DBMS_SPM.EXECUTE_EVOLVE_TASK（task_name =&gt;：tk_name）; SELECT：exe_name FROM DUAL; ：EXE_NAME ------------------------------------------------ --------------------------- EXEC_1</code></pre></li>
                           <li>
                              <p>查看报告。</p>
                              <p>例如，执行<code class="codeph">DBMS_SPM.REPORT_EVOLVE_TASK</code>函数（包括示例输出）：</p><pre class="pre codeblock"><code>EXECUTE：evol_out：= DBMS_SPM.REPORT_EVOLVE_TASK（task_name =&gt;：tk_name，execution_name =&gt;：exe_name）; SELECT：evol_out FROM DUAL;一般信息部分----------------------------------------------- ---------------------------任务信息：-------------------- -------------------------任务名称：TASK_11任务所有者：SYS执行名称：EXEC_1执行类型：SPM EVOLVE范围：COMPREHENSIVE状态：COMPLETED开始： 01/09/2012 12:21:27完成时间：01/09/2012 12:21:29最近更新：01/09/2012 12:21:29全球时间限制：2147483646每个计划的时间限制：未使用的错误数：0 ------------------------------------------------ ---------------------------汇总章节--------------------- -------------------------------------------------- ----处理的计划数量：1调查结果数量：1建议数量：1错误数量：0 ------------------------- -------------------------------------------------- DETAILS SECTION ------------------------------------------------ ---------------------------对象ID：2测试计划名称：SQL_PLAN_0gwbcfvzskcu20135fd6c基本计划名称：SQL_PLA N_0gwbcfvzskcu242949306 SQL句柄：SQL_07f16c76ff893342解析架构：SH测试计划创建者：SH SQL文本：SELECT / * q1_group_by * / prod_name，sum（quantity_sold）FROM products p，sales s WHERE p.prod_id = s.prod_id AND p.prod_category_id = 203 GROUP BY prod_name执行统计：-----------------------------基本计划测试计划------------ ---------------- ------------------------经过的时间：.044336 .012649 CPU时间：.044003 .012445缓冲区获取：360 99优化器成本：924 891磁盘读取数：341 82直接写入数：0 0已处理行数：4 2执行次数：5 9查找结果部分--------- -------------------------------------------------- ---------------- <span class="bold">调查结果</span> <span class="bold">（1）：</span> <span class="bold">-----------------------------</span> <span class="bold">1。</span> <span class="bold">该计划在2.18秒内得到验证。它通过了福利标准，</span> <span class="bold">因为其验证的性能比</span> <span class="bold">基准计划的</span> <span class="bold">性能高2.01倍</span> <span class="bold">。</span>建议：-----------------------------考虑接受该计划。执行dbms_spm.accept_sql_plan_baseline（task_name =&gt;'TASK_11'，object_id =&gt; 2，task_owner =&gt;'SYS'）; EXPLAIN PLANS SECTION ----------------------------------------------- ---------------------------- Baseline Plan -------------------- ---------计划ID：1计划哈希值：1117033222 -------------------------------- ------------------------------------------- | ID |操作|名称|行|字节|成本|时间| -------------------------------------------------- ------------------------- | 0 |选择声明| | 21 | 861 | 924 | 00：00：12 | | 1 | HASH GROUP BY | | 21 | 861 | 924 | 00：00：12 | | * 2 | HASH JOIN | | 267996 | 10987836 | 742 | 00：00：09 | | * 3 |表访问完全|产品| 21 | 714 | 2 | 00：00：01 | | 4 | PARTITION RANGE ALL | | 918843 | 6431901 | 662 | 00：00：08 | | 5 |表访问完全|销售| 918843 | 6431901 | 662 | 00：00：08 | -------------------------------------------------- -------------------------谓词信息（由操作ID标识）：---------------- -------------------------- * 2  -  access（“P”。“PROD_ID”=“S”。“PROD_ID”）* 3  - 过滤器（“P”。“PROD_CATEGORY_ID”= 203）测试计划-----------------------------计划ID：2计划哈希值：20315500 ------------------------------------------------ --------------------------- | Id |操作|名称|行|字节|成本|时间| -------------------------------------------------- ------------------------- | 0 |选择语句| | 21 | 861 | 891 | 00：00：11 | | 1 | SORT GROUP BY NOSORT | | 21 | 861 | 891 | 00：00：11 | | 2 | NESTED LOOPS | | 267996 | 10987836 | 891 | 00：00：11 | | * 3 | INDEX RANGE SCAN | IND_PROD_CAT_NAME | 21 | 714 | 1 | 00：00：01 | | * 4 | INDEX RANGE SCAN | IND_SALES_PROD_QTY | 12762 | 89334 | 42 | 00：00：01 | -------------------------------------------------- -------------------------谓词信息（由操作ID标识）：---------------- -------------------------- * 3  -  access（“P”。“PROD_CATEGORY_ID”= 203）* 4  - 访问（“P”。 “PROD_ID”= “S”。 “PROD_ID”）</code></pre><p>此报告表明使用这两个新索引的新执行计划的性能优于原始计划。</p>
                           </li>
                           <li>
                              <p>实施进化任务的建议。</p>
                              <p>例如，执行<code class="codeph">IMPLEMENT_EVOLVE_TASK</code>函数：</p><pre class="pre codeblock"><code>EXECUTE：cnt：= DBMS_SPM.IMPLEMENT_EVOLVE_TASK（task_name =&gt;：tk_name，execution_name =&gt;：exe_name）;</code></pre></li>
                           <li>
                              <p>查询数据字典以确保接受新计划。</p>
                              <p>该查询提供以下示例输出：</p><pre class="pre codeblock"><code>SELECT SQL_HANDLE，SQL_TEXT，PLAN_NAME，ORIGIN，ENABLED，ACCEPTED FROM DBA_SQL_PLAN_BASELINES WHERE SQL_HANDLE IN（'SQL_07f16c76ff893342'）ORDER BY SQL_HANDLE，ACCEPTED; SQL_HANDLE SQL_TEXT PLAN_NAME ORIGIN ENA ACC -------------------- -------------------- ---- -------------------------- ------------ --- --- SQL_07f16c76ff893342 SELECT / * q1_group_b SQL_PLAN_0gwbcfvzskcu20135fd6c AUTO-CAPTURE YES <span class="bold">YES</span> y * / prod_name，sum（quantity_sold）FROM products p，s ales s WHERE p.prod_id = s .prod_id AND p.prod_catego ry_id = 203 GROUP BY prod_name SQL_07f16c76ff893342 SELECT / * q1_group_b SQL_PLAN_0gwbcfvzskcu242949306 AUTO-CAPTURE YES YES y * / prod_name，sum（quantity_sold）FROM products p，s ales s WHERE p.prod_id = s .prod_id AND p.prod_catego ry_id = 203 GROUP BY prod_name</code></pre><p>输出显示新计划已被接受。</p>
                           </li>
                           <li>
                              <p>示例后清理。</p>
                              <p>例如，输入以下语句：</p><pre class="pre codeblock"><code>EXEC：cnt：= DBMS_SPM.DROP_SQL_PLAN_BASELINE（'SQL_07f16c76ff893342'）; EXEC：cnt：= DBMS_SPM.DROP_SQL_PLAN_BASELINE（'SQL_9049245213a986b3'）; EXEC：cnt：= DBMS_SPM.DROP_SQL_PLAN_BASELINE（'SQL_bb77077f5f90a36b'）; EXEC：cnt：= DBMS_SPM.DROP_SQL_PLAN_BASELINE（'SQL_02a86218930bbb20'）;从SQLLOG $中删除; CONNECT sh  - 输入密码DROP INDEX IND_SALES_PROD_QTY_SOLD; DROP INDEX IND_PROD_CAT_NAME;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-528D51FD-E109-488A-B1EF-9B736E78901A__GUID-E3A8F265-C0B4-4E93-B365-124E924F0C21">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p> <span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-A94CFA49-910A-4237-A7BB-39BFA94E227E" title="SPM Evolve Advisor是一个SQL顾问程序，可以发展最近添加到SQL计划基准的计划。顾问通过消除手动操作的要求简化了计划的发展。">管理SPM Evolve Advisor任务</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SPM.html#ARPLS150" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_SPM</code> evolve功能的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-19E6FFB0-BC7A-4CDB-AE36-6D67C15C7332" title="您可以使用PL / SQL或Cloud Control手动发展未接受的计划，以确定它是否比计划基准中当前的任何计划表现更好。">手动演进SQL计划基准</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL659"></a><a id="TGSQL94974"></a><a id="TGSQL660"></a><a id="TGSQL658"></a><div class="props_rev_3"><a id="GUID-BA19EA4E-AFEF-4677-B08F-854DE59ED932" name="GUID-BA19EA4E-AFEF-4677-B08F-854DE59ED932"></a><h3 id="TGSQL-GUID-BA19EA4E-AFEF-4677-B08F-854DE59ED932" class="sect3"><span class="enumeration_section">28.6</span>删除SQL计划基准</h3>
               <div>
                  <p>您可以从SQL计划基准中删除部分或全部计划。在测试SQL计划管理时，此技术有时很有用。</p>
                  <div class="section">
                     <p>使用<code class="codeph">DBMS_SPM.DROP_SQL_PLAN_BASELINE</code>函数删除计划。此函数返回已删除计划的数量。下表描述了输入参数。
                     </p>
                     <div class="tblformal" id="GUID-BA19EA4E-AFEF-4677-B08F-854DE59ED932__GUID-84D20EAF-6112-4C56-8AD1-E4156BB48927">
                        <p class="titleintable">表28-11 DROP_SQL_PLAN_BASELINE参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_SQL_PLAN_BASELINE参数" width="100%" border="1" summary="This 2 column table lists DROP_SQL_PLAN_BASELINE Parameters. Column 1 is the parameter. Column 2 describes that parameter. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="23%" id="d140998e6152">功能参数</th>
                                 <th align="left" valign="bottom" width="77%" id="d140998e6155">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d140998e6160" headers="d140998e6152 ">
                                    <p><code class="codeph">的sql_handle</code></p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d140998e6160 d140998e6155 ">
                                    <p>SQL语句标识符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d140998e6168" headers="d140998e6152 ">
                                    <p><code class="codeph">PLAN_NAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d140998e6168 d140998e6155 ">
                                    <p>特定计划的名称。默认<code class="codeph">NULL</code>删除与<code class="codeph">sql_handle</code>标识的SQL语句关联的所有计划。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>本节介绍如何从命令行删除基线。在“云控制”中，从“SQL计划基准”子页面中选择一个计划，然后单击“ <span class="bold">删除”</span> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="p">
                     <p>本教程假定您要删除以下SQL语句的所有计划，从而有效地删除SQL计划基准：</p><pre class="pre codeblock"><code>SELECT / * repeatable_sql * / COUNT（*）FROM hr.jobs;</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BA19EA4E-AFEF-4677-B08F-854DE59ED932__GUID-212DA14C-1BE8-4CC0-A017-6B500B176B7F">要删除SQL计划基准：</p>
                     <ol>
                        <li>
                           <p>使用适当的权限将SQL * Plus连接到数据库，然后在数据字典中查询计划基准。</p>
                           <p>以下语句查询<code class="codeph">DBA_SQL_PLAN_BASELINES</code> （包括示例输出）：</p><pre class="pre codeblock"><code>SQL&gt; SELECT SQL_HANDLE，SQL_TEXT，PLAN_NAME，ORIGIN，2 ENABLED，ACCEPTED 3 FROM DBA_SQL_PLAN_BASELINES 4 WHERE SQL_TEXT LIKE'SELECT / * repeatable_sql％'; SQL_HANDLE SQL_TEXT PLAN_NAME ORIGIN ENA ACC -------------------- -------------------- ---- -------------------------- -------------- --- --- SQL_b6b0d1c71cd1807b SELECT / *可重复的SQL_PLAN_bdc6jswfd303v2f1e9c20 AUTO-CAPTURE YES YES _sql * / count（*）来自hr hr.jobs</code></pre></li>
                        <li>
                           <p>删除该语句的SQL计划基准。</p>
                           <p>以下示例使用SQL句柄<code class="codeph">SQL_b6b0d1c71cd1807b</code>删除计划基准，并返回已删除计划的数量。指定使用计划名称（计划基线<code class="codeph">plan_name</code> ），SQL手柄（ <code class="codeph">sql_handle</code> ），或者任何其他的计划标准。<code class="codeph">table_name</code>参数是必需的。
                           </p><pre class="pre codeblock"><code>DECLARE v_dropped_plans号码; BEGIN v_dropped_plans：= DBMS_SPM.DROP_SQL_PLAN_BASELINE（sql_handle =&gt;'SQL_b6b0d1c71cd1807b'）; DBMS_OUTPUT.PUT_LINE（'drop'|| v_dropped_plans ||'plans'）;结束; /</code></pre></li>
                        <li>
                           <p>确认计划已被删除。</p>
                           <p>例如，执行以下查询：</p><pre class="pre codeblock"><code>SELECT SQL_HANDLE，SQL_TEXT，PLAN_NAME，ORIGIN，ENABLED，ACCEPTED FROM DBA_SQL_PLAN_BASELINES WHERE SQL_TEXT LIKE'SELECT / * repeatable_sql％';没有选择任何行</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-BA19EA4E-AFEF-4677-B08F-854DE59ED932__GUID-138F46C2-FC36-4AB4-AF7D-442F50352549">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../arpls/DBMS_SPM.html#ARPLS68164" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考，</span></a>以了解<code class="codeph">DROP_SQL_PLAN_BASELINE</code>函数</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="本章介绍使用DBMS_SPM程序包与SQL计划管理相关的概念和任务。">管理SQL计划基准</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL662"></a><a id="TGSQL661"></a><div class="props_rev_3"><a id="GUID-DE976D2B-DBAD-498F-B933-D16B06CA9D2A" name="GUID-DE976D2B-DBAD-498F-B933-D16B06CA9D2A"></a><h3 id="TGSQL-GUID-DE976D2B-DBAD-498F-B933-D16B06CA9D2A" class="sect3"><span class="enumeration_section">28.7</span>管理SQL管理库</h3>
               <div>
                  <p>SQL管理库是驻留在<code class="codeph">SYSAUX</code>表空间中的数据字典的一部分。它存储语句日志，计划历史记录，SQL计划基准和SQL配置文件。
                  </p>
                  <div class="section">
                     <p>本节包含以下主题：</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-3B560F69-E021-409E-9EA0-9902EEEEC6FD">关于管理SMB</a><br>使用<code class="codeph">DBMS_SPM.CONFIGURE</code>过程为SMB设置配置选项并维护SQL计划基准。
                     </li>
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-DF2EC31E-7BAB-45BB-B3B4-F1D1A4A13019">更改SMB的磁盘空间限制</a><br>每周后台进程测量SMB占用的总空间。</li>
                     <li class="ulchildlink"><a href="managing-sql-plan-baselines.html#GUID-D5F66DF0-3D41-4E78-9FAE-62ECC9F22F1F">更改SMB中的计划保留策略</a><br>每周计划的清除任务管理SQL计划管理使用的磁盘空间。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="本章介绍使用DBMS_SPM程序包与SQL计划管理相关的概念和任务。">管理SQL计划基准</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-3B560F69-E021-409E-9EA0-9902EEEEC6FD" name="GUID-3B560F69-E021-409E-9EA0-9902EEEEC6FD"></a><h4 id="TGSQL-GUID-3B560F69-E021-409E-9EA0-9902EEEEC6FD" class="sect4"><span class="enumeration_section">28.7.1</span>关于管理SMB</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_SPM.CONFIGURE</code>过程为SMB设置配置选项并维护SQL计划基准。
                     </p>
                     <p><code class="codeph">DBA_SQL_MANAGEMENT_CONFIG</code>视图显示SMB的当前配置设置。下表介绍了<code class="codeph">PARAMETER_NAME</code>列中的<code class="codeph">PARAMETER_NAME</code> 。
                     </p>
                     <div class="tblformal" id="GUID-3B560F69-E021-409E-9EA0-9902EEEEC6FD__CDEGBJCA">
                        <p class="titleintable">表28-12 DBA_SQL_MANAGEMENT_CONFIG.PARAMETER_NAME中的参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DBA_SQL_MANAGEMENT_CONFIG.PARAMETER_NAME中的参数" width="100%" border="1" summary="This table lists initialization parameters in DBA_SQL_MANAGEMENT_CONFIG.PARAMETER_NAME. Column 1 lists the parameters. Column 2 describes the parameters. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="37%" id="d140998e6541">参数</th>
                                 <th align="left" valign="bottom" width="63%" id="d140998e6544">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d140998e6549" headers="d140998e6541 ">
                                    <p><code class="codeph">SPACE_BUDGET_PERCENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d140998e6549 d140998e6544 ">
                                    <p>SQL管理库可以使用的最大<code class="codeph">SYSAUX</code>空间百分比。默认值为10。此限制的允许范围介于1％和50％之间。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d140998e6560" headers="d140998e6541 ">
                                    <p><code class="codeph">PLAN_RETENTION_WEEKS</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d140998e6560 d140998e6544 ">
                                    <p>在清除未使用的计划之前保留未使用计划的周数。默认值为53。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d140998e6569" headers="d140998e6541 "><code class="codeph">AUTO_CAPTURE_PARSING_SCHEMA_NAME</code></td>
                                 <td align="left" valign="top" width="63%" headers="d140998e6569 d140998e6544 ">形式的列表<code class="codeph">(% LIKE <span class="codeinlineitalic">a</span> OR % LIKE <span class="codeinlineitalic">b</span> ...)AND (% NOT LIKE <span class="codeinlineitalic">c</span> AND % NOT LIKE <span class="codeinlineitalic">d</span> ...)</code> ，这是解析模式名称过滤器的内部表示。如果不存在解析模式过滤器，则外部连接的一侧将不存在。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d140998e6590" headers="d140998e6541 "><code class="codeph">AUTO_CAPTURE_MODULE</code></td>
                                 <td align="left" valign="top" width="63%" headers="d140998e6590 d140998e6544 ">形式的列表<code class="codeph">(% LIKE <span class="codeinlineitalic">a</span> OR % LIKE <span class="codeinlineitalic">b</span> ...)AND (% NOT LIKE <span class="codeinlineitalic">c</span> AND % NOT LIKE <span class="codeinlineitalic">d</span> ...)</code> ，这是模块过滤器的内部表示。如果不存在模块过滤器，则外部连接的一侧将不存在。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d140998e6611" headers="d140998e6541 "><code class="codeph">AUTO_CAPTURE_ACTION</code></td>
                                 <td align="left" valign="top" width="63%" headers="d140998e6611 d140998e6544 ">形式的列表<code class="codeph">(% LIKE <span class="codeinlineitalic">a</span> OR % LIKE <span class="codeinlineitalic">b</span> ...)AND (% NOT LIKE <span class="codeinlineitalic">c</span> AND % NOT LIKE <span class="codeinlineitalic">d</span> ...)</code> ，这是动作过滤器的内部表示。如果不存在动作过滤器，则外部连接的一侧将不存在。
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d140998e6632" headers="d140998e6541 "><code class="codeph">AUTO_CAPTURE_SQL_TEXT</code></td>
                                 <td align="left" valign="top" width="63%" headers="d140998e6632 d140998e6544 ">形式的列表<code class="codeph">(% LIKE <span class="codeinlineitalic">a</span> OR % LIKE <span class="codeinlineitalic">b</span> ...)AND (% NOT LIKE <span class="codeinlineitalic">c</span> AND % NOT LIKE <span class="codeinlineitalic">d</span> ...)</code> ，这是SQL文本过滤器的内部表示。如果不存在SQL文本过滤器，则外部连接的一侧将不存在。
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3B560F69-E021-409E-9EA0-9902EEEEC6FD__GUID-E4BA7E94-E42D-4470-B0B1-4E8153E410DD">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-A3A528EB-CC02-426D-90F7-3AE9FCBDC201" title="要有资格进行自动计划捕获，执行的语句必须是可重复的，并且任何捕获筛选器都不能排除它。">自动初始计划捕获的资格</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../refrn/DBA_SQL_MANAGEMENT_CONFIG.html#REFRN-GUID-4E9C3D2A-93B8-49C5-9169-C54A9EB7431C" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">DBA_SQL_MANAGEMENT_CONFIG</code>更多信息</p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ARPLS-GUID-D855D4B9-D071-4BB2-A554-38479867DE76" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_SPM.CONFIGURE</code>更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-DE976D2B-DBAD-498F-B933-D16B06CA9D2A" title="SQL管理库是驻留在SYSAUX表空间中的数据字典的一部分。它存储语句日志，计划历史记录，SQL计划基准和SQL配置文件。">管理SQL管理库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94975"></a><a id="TGSQL663"></a><div class="props_rev_3"><a id="GUID-DF2EC31E-7BAB-45BB-B3B4-F1D1A4A13019" name="GUID-DF2EC31E-7BAB-45BB-B3B4-F1D1A4A13019"></a><h4 id="TGSQL-GUID-DF2EC31E-7BAB-45BB-B3B4-F1D1A4A13019" class="sect4"><span class="enumeration_section">28.7.2</span>更改SMB的磁盘空间限制</h4>
                  <div>
                     <p>每周后台进程测量SMB占用的总空间。</p>
                     <div class="section">
                        <p>超过定义的限制时，进程会向警报日志写入警告。数据库每周生成警报，直到SMB空间限制增加， <code class="codeph">SYSAUX</code>表空间的大小增加，或者SMB使用的磁盘空间通过清除SQL管理对象（SQL计划基准或SQL配置文件）而减少。此任务说明如何使用<code class="codeph">DBMS_SPM.CONFIGURE</code>过程更改限制。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DF2EC31E-7BAB-45BB-B3B4-F1D1A4A13019__GUID-71ADC834-0CB1-4287-9A5D-FA349D17D1B2">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当前SMB空间限制是默认值10％。</p>
                           </li>
                           <li>
                              <p>您想将百分比限制更改为30％</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DF2EC31E-7BAB-45BB-B3B4-F1D1A4A13019__GUID-8B92934F-56A0-40D5-94A7-D31C98943C67">要更改SMB的百分比限制：</p>
                        <ol>
                           <li>
                              <p>使用适当的权限将SQL * Plus连接到数据库，然后查询数据字典以查看当前的空间预算百分比。</p>
                              <p>例如，执行以下查询（包括示例输出）：</p><pre class="pre codeblock"><code>SELECT PARAMETER_NAME，PARAMETER_VALUE AS“％_LIMIT”，（SELECT sum（bytes / 1024/1024）FROM DBA_DATA_FILES WHERE TABLESPACE_NAME ='SYSAUX'）AS SYSAUX_SIZE_IN_MB，PARAMETER_VALUE / 100 *（SELECT sum（bytes / 1024/1024）FROM DBA_DATA_FILES WHERE TABLESPACE_NAME ='SYSAUX'）AS“CURRENT_LIMIT_IN_MB”来自DBA_SQL_MANAGEMENT_CONFIG，其中PARAMETER_NAME ='SPACE_BUDGET_PERCENT'; PARAMETER_NAME％_LIMIT SYSAUX_SIZE_IN_MB CURRENT_LIMIT_IN_MB -------------------- ---------- --------------- -  ------------------- SPACE_BUDGET_PERCENT 10 211.4375 21.14375</code></pre></li>
                           <li>
                              <p>更改百分比设置。</p>
                              <p>例如，执行以下命令将设置更改为30％：</p><pre class="pre codeblock"><code>EXECUTE DBMS_SPM.CONFIGURE（'space_budget_percent'，30）;</code></pre></li>
                           <li>
                              <p>查询数据字典以确认更改。</p>
                              <p>例如，执行以下连接（包括示例输出）：</p><pre class="pre codeblock"><code>SELECT PARAMETER_NAME，PARAMETER_VALUE AS“％_LIMIT”，（SELECT sum（bytes / 1024/1024）FROM DBA_DATA_FILES WHERE TABLESPACE_NAME ='SYSAUX'）AS SYSAUX_SIZE_IN_MB，PARAMETER_VALUE / 100 *（SELECT sum（bytes / 1024/1024）FROM DBA_DATA_FILES WHERE TABLESPACE_NAME ='SYSAUX'）AS“CURRENT_LIMIT_IN_MB”来自DBA_SQL_MANAGEMENT_CONFIG，其中PARAMETER_NAME ='SPACE_BUDGET_PERCENT'; PARAMETER_NAME％_LIMIT SYSAUX_SIZE_IN_MB CURRENT_LIMIT_IN_MB -------------------- ---------- --------------- -  ------------------- SPACE_BUDGET_PERCENT <span class="bold">30</span> 211.4375 63.43125</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DF2EC31E-7BAB-45BB-B3B4-F1D1A4A13019__GUID-B8531588-E06C-40D4-A976-F897213235AC">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ARPLS68159" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_SPM.CONFIGURE</code>过程的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-DE976D2B-DBAD-498F-B933-D16B06CA9D2A" title="SQL管理库是驻留在SYSAUX表空间中的数据字典的一部分。它存储语句日志，计划历史记录，SQL计划基准和SQL配置文件。">管理SQL管理库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL664"></a><div class="props_rev_3"><a id="GUID-D5F66DF0-3D41-4E78-9FAE-62ECC9F22F1F" name="GUID-D5F66DF0-3D41-4E78-9FAE-62ECC9F22F1F"></a><h4 id="TGSQL-GUID-D5F66DF0-3D41-4E78-9FAE-62ECC9F22F1F" class="sect4"><span class="enumeration_section">28.7.3</span>更改SMB中的计划保留策略</h4>
                  <div>
                     <p>每周计划的清除任务管理SQL计划管理使用的磁盘空间。</p>
                     <div class="section">
                        <p>该任务在维护窗口中作为自动化任务运行。数据库清除计划保留期超过计划保留期的计划，由该计划的SMB中存储的<code class="codeph">LAST_EXECUTED</code>时间戳标识。默认保留期为53周。这段时间可以在5到523周之间。
                        </p>
                        <p>此任务说明如何使用<code class="codeph">DBMS_SPM.CONFIGURE</code>过程更改计划保留期。在Cloud Control中，在SQL Plan Baseline子页面中设置计划保留策略（如图<a href="managing-sql-plan-baselines.html#GUID-9BB06D27-4A3F-4DBA-A7EB-85B5C4EA0631__CDEBHHEI">28-1</a>所示）。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D5F66DF0-3D41-4E78-9FAE-62ECC9F22F1F__GUID-28FCB4F5-5009-433B-A5F6-B34AD2A01ADE">要更改SMB的计划保留期：</p>
                        <ol>
                           <li>
                              <p>使用适当的权限将SQL * Plus连接到数据库，然后查询数据字典以查看当前的计划保留期。</p>
                              <p>例如，执行以下查询（包括示例输出）：</p><pre class="pre codeblock"><code>SQL&gt; SELECT PARAMETER_NAME，PARAMETER_VALUE 2 FROM DBA_SQL_MANAGEMENT_CONFIG 3 WHERE PARAMETER_NAME ='PLAN_RETENTION_WEEKS'; PARAMETER_NAME PARAMETER_VALUE ------------------------------ --------------- PLAN_RETENTION_WEEKS 53</code></pre></li>
                           <li>
                              <p>更改保留期。</p>
                              <p>例如，执行<code class="codeph">CONFIGURE</code>过程将周期更改为105周：</p><pre class="pre codeblock"><code>EXECUTE DBMS_SPM.CONFIGURE（'plan_retention_weeks'，105）;</code></pre></li>
                           <li>
                              <p>查询数据字典以确认更改。</p>
                              <p>例如，执行以下查询：</p><pre class="pre codeblock"><code>SQL&gt; SELECT PARAMETER_NAME，PARAMETER_VALUE 2 FROM DBA_SQL_MANAGEMENT_CONFIG 3 WHERE PARAMETER_NAME ='PLAN_RETENTION_WEEKS'; PARAMETER_NAME PARAMETER_VALUE ------------------------------ --------------- PLAN_RETENTION_WEEKS <span class="bold">105</span></code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D5F66DF0-3D41-4E78-9FAE-62ECC9F22F1F__GUID-EC1F2994-7CAC-4023-B51B-5E30818CBB52">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_SPM.html#ARPLS68159" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">CONFIGURE</code>过程的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-sql-plan-baselines.html#GUID-DE976D2B-DBAD-498F-B933-D16B06CA9D2A" title="SQL管理库是驻留在SYSAUX表空间中的数据字典的一部分。它存储语句日志，计划历史记录，SQL计划基准和SQL配置文件。">管理SQL管理库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
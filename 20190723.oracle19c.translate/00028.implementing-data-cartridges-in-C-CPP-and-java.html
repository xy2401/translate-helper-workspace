<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用C，C ++和Java实现数据磁带</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T07:34:53-08:00"></meta>
      <meta name="dcterms.title" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96431-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="implementing-data-cartridges-in-PL-SQL.html" title="Previous" type="text/html"></link>
      <link rel="next" href="working-with-multimedia-data-types.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="implementing-data-cartridges-in-PL-SQL.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="working-with-multimedia-data-types.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据盒式开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="building-data-cartridges.html" property="item" typeof="WebPage"><span property="name">构建数据磁带</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用C，C ++和Java实现数据磁带</li>
            </ol>
            <a id="GUID-387703C2-5DDF-47FE-B78F-21A465989B91" name="GUID-387703C2-5DDF-47FE-B78F-21A465989B91"></a><a id="ADDCI250"></a>
            
            <h2 id="ADDCI-GUID-387703C2-5DDF-47FE-B78F-21A465989B91" class="sect2"><span class="enumeration_chapter">5</span>用C，C ++和Java实现数据磁带</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用C，C ++和Java来实现数据盒式磁带方法。方法是定义使用数据盒定义的数据所允许的操作的过程和函数。重点是与开发和调试外部程序有关的问题。</p>
            </div><a id="ADDCI4335"></a><div class="props_rev_3"><a id="GUID-1B118229-8B58-4685-9DA8-1BBC231CEC47" name="GUID-1B118229-8B58-4685-9DA8-1BBC231CEC47"></a><h3 id="ADDCI-GUID-1B118229-8B58-4685-9DA8-1BBC231CEC47" class="sect3"><span class="enumeration_section">5.1</span>共享库</h3>
               <div>
                  <p><span class="bold">共享库</span>是一个操作系统文件，例如Windows DLL或Solaris共享对象，它存储外部过程的编码实现。您可以使用<span class="bold">别名</span>库从Oracle访问共享库，该<span class="bold">别名库</span>是表示PL / SQL中的库的架构对象。出于安全原因，您需要DBA权限才能创建别名库。
                  </p>
                  <div class="infoboxnotealso" id="GUID-1B118229-8B58-4685-9DA8-1BBC231CEC47__GUID-C68A62D2-E580-4D5D-89CC-A1A3804CD02E">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关使用专用外部过程代理的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=LNPLS-GUID-2FBCFBBE-6B42-4DB8-83F3-55B63B75B1EB" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p>有关库的目录对象支持的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=DBSEG-GUID-41040F53-D7A6-48FA-A92A-0C23118BC8A0" target="_blank"><span class="italic">参见“Oracle数据库安全指南</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-248806CE-1CDD-4FFA-9CD8-4E6D23288816" name="GUID-248806CE-1CDD-4FFA-9CD8-4E6D23288816"></a><h4 id="ADDCI-GUID-248806CE-1CDD-4FFA-9CD8-4E6D23288816" class="sect4"><span class="enumeration_section">5.1.1</span>使用共享库</h4>
                  <div>
                     <p>要创建别名库，您必须确定库的操作系统位置，以DBA或具有<code class="codeph">CREATE</code> <code class="codeph">LIBRARY</code>特权的用户身份登录，然后在<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-4BC24ED4-0A90-407C-AD15-3C1953B7DA86__BGBJBCFF">例5-1中</a>输入语句。这将在数据库中创建别名库架构对象。创建别名库后，可以通过PL / SQL中的名称<code class="codeph">DS_Lib</code>引用共享库。 <a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-4BC24ED4-0A90-407C-AD15-3C1953B7DA86__BGBJBCFF">例5-1</a>指定了库的绝对路径。
                     </p>
                     <p>如果您在多个系统上拥有库的副本，以支持指定或专用代理分布式执行外部过程，请使用环境变量更一般地指定库的位置，如<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-915DD434-73A7-4924-81E3-19367CB07529__BGBDIDHB">示例5-2所示</a> 。此语句使用环境变量<code class="codeph">${DS_LIB_HOME}</code>来指定公共引用点或根目录，可以在所有系统上找到该库。<code class="codeph">AGENT</code>关键字后面的字符串指定用于运行声明在库<code class="codeph">DS_Lib</code>任何外部过程的代理（实际上是数据库链接）。
                     </p>
                     <p>Oracle Database 12 <span class="italic">c</span>第1版（12.1）引入了两个扩展<a id="d9398e229" class="indexterm-anchor"></a><a id="d9398e233" class="indexterm-anchor"></a> <code class="codeph">CREATE LIBRARY</code>语法：附加的可选<code class="codeph">CREDENTIAL</code>选项和<code class="codeph">DIRECTORY</code>对象选项。凭证选项指定<code class="codeph">extproc</code>代理在运行指定库的外部子程序时模拟的操作系统用户凭据。directory object选项指定可以找到共享库的目录。
                     </p>
                     <p><a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-678558E7-9F00-4957-8729-5FC33605A3FB__CBBIGHAF">例5-3</a>指定了目录对象选项而不是完整路径字符串;它还指定了可选的凭证参数。当外部过程通过<code class="codeph">extproc</code>进程调用加载PL / SQL库时， <code class="codeph">extproc</code>可以代表定义的<code class="codeph">smith_credential</code>凭证进行身份验证和“模拟”。
                     </p>
                     <p>请注意，如果在调用<code class="codeph">CREATE LIBRARY</code>语句时目录或凭证不存在，则会创建包含错误的库。
                     </p>
                  </div><a id="ADDCI4336"></a><div class="props_rev_3"><a id="GUID-4BC24ED4-0A90-407C-AD15-3C1953B7DA86" name="GUID-4BC24ED4-0A90-407C-AD15-3C1953B7DA86"></a><h5 id="ADDCI-GUID-4BC24ED4-0A90-407C-AD15-3C1953B7DA86" class="sect5"><span class="enumeration_section">5.1.1.1</span>创建别名库</h5>
                     <div>
                        <div class="example" id="GUID-4BC24ED4-0A90-407C-AD15-3C1953B7DA86__BGBJBCFF">
                           <p class="titleinexample">示例5-1创建别名库</p><pre class="oac_no_warn" dir="ltr">创建或替换库DS_Lib AS'/ data_cartridge_dir/libdatastream.so';</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4337"></a><div class="props_rev_3"><a id="GUID-915DD434-73A7-4924-81E3-19367CB07529" name="GUID-915DD434-73A7-4924-81E3-19367CB07529"></a><h5 id="ADDCI-GUID-915DD434-73A7-4924-81E3-19367CB07529" class="sect5"><span class="enumeration_section">5.1.1.2</span>指定库的位置</h5>
                     <div>
                        <div class="example" id="GUID-915DD434-73A7-4924-81E3-19367CB07529__BGBDIDHB">
                           <p class="titleinexample">示例5-2使用环境变量指定库的位置</p><pre class="oac_no_warn" dir="ltr">创建或替换库DS_Lib AS'$ {DS_LIB_HOME} /libdatastream.so'AGENT'agent_link';</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI5185"></a><div class="props_rev_3"><a id="GUID-678558E7-9F00-4957-8729-5FC33605A3FB" name="GUID-678558E7-9F00-4957-8729-5FC33605A3FB"></a><h5 id="ADDCI-GUID-678558E7-9F00-4957-8729-5FC33605A3FB" class="sect5"><span class="enumeration_section">5.1.1.3</span>通过目录对象创建别名库</h5>
                     <div>
                        <div class="example" id="GUID-678558E7-9F00-4957-8729-5FC33605A3FB__CBBIGHAF">
                           <p class="titleinexample">示例5-3使用目录对象选项创建别名库</p><pre class="oac_no_warn" dir="ltr">创建或替换库DS_Lib AS'libdatastream.so'在data_cartridge_dir AGENT'stales.hq.example.com'CREDENTIAL smith_credential;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADDCI4334"></a><div class="props_rev_3"><a id="GUID-79C1B923-69CA-4C4B-9DE7-616B0D15FF0A" name="GUID-79C1B923-69CA-4C4B-9DE7-616B0D15FF0A"></a><h3 id="ADDCI-GUID-79C1B923-69CA-4C4B-9DE7-616B0D15FF0A" class="sect3"><span class="enumeration_section">5.2</span>外部程序</h3>
               <div>
                  <p>PL / SQL是一种用于数据库编程的强大语言，但有些方法过于复杂，无法在PL / SQL中进行最佳编码。例如，如果在C而不是PL / SQL中实现，则执行数字集成的例程可能运行得更快。</p>
                  <p>为了支持这种特殊目的的处理，PL / SQL提供了一个用于调用用其他语言编写的例程的接口。这使得3G的优势和功能（如C）可通过数据库服务器的调用获得。这种3GL程序称为<span class="bold">外部程序</span> ;它存储在一个共享库中，使用PL / SQL注册，并在运行时从PL / SQL调用。
                  </p>
                  <p>外部过程是数据盒式开发人员的重要工具。它们不仅可用于为盒式磁带编写快速，高效，计算密集的例程，还可用于将现有代码与数据库集成为数据盒式磁带。来自其他语言的现有共享库（例如具有用于执行音频文件格式转换的C例程的Windows NT DLL）可以直接从音频盒式磁带实现的类型中的方法调用。同样，您可以使用外部过程处理信号，驱动设备，分析数据流，渲染图形或处理数字数据。</p>
                  <div class="infoboxnotealso" id="GUID-79C1B923-69CA-4C4B-9DE7-616B0D15FF0A__GUID-0140496B-4D6F-4EA4-BC4D-D0953966B461">
                     <p class="notep1">也可以看看：</p>
                     <p> 有关外部过程及其使用的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=LNPLS-GUID-2FBCFBBE-6B42-4DB8-83F3-55B63B75B1EB" target="_blank"><span class="italic">PL / SQL用户指南和参考</span></a></p>
                  </div>
               </div><a id="ADDCI4338"></a><div class="props_rev_3"><a id="GUID-BA57EC81-16E5-4552-B3B1-B44344D2F8C0" name="GUID-BA57EC81-16E5-4552-B3B1-B44344D2F8C0"></a><h4 id="ADDCI-GUID-BA57EC81-16E5-4552-B3B1-B44344D2F8C0" class="sect4"><span class="enumeration_section">5.2.1</span>注册外部程序</h4>
                  <div>
                     <div class="section">
                        <p>要调用外部过程，您不仅必须指示PL / SQL有关定义外部过程的别名库，还必须如何调用此过程以及传递给它的参数。</p>
                        <p><code class="codeph">DataStream</code>类型在<a href="defining-object-types-for-data-cartridges.html#GUID-B738D559-6FBE-4498-B17C-406A61CF4C2A__CHDGIJCD">Example 3-1</a>中定义，而<a href="defining-object-types-for-data-cartridges.html#GUID-48197D66-061D-4480-ACE6-25105E1E87B7__CHDDCIDI">Example 3-2</a>通过调用<code class="codeph">DS_Package</code>包中的函数定义了<code class="codeph">DataStream</code>的方法。<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-E6794990-73B3-46FB-BB52-F9DC8E1329DA__BGBCCFEE">例5-4</a>定义了这个包的主体。
                        </p>
                        <p>请注意，在<code class="codeph">PACKAGE</code> <code class="codeph">BODY</code>声明子句中，包函数与共享库中的外部过程相关联。函数声明中的<code class="codeph">EXTERNAL</code>子句注册有关外部过程的信息，例如其名称（在<code class="codeph">NAME</code>关键字之后找到），其位置（必须是别名库，遵循<code class="codeph">LIBRARY</code>关键字），外部过程所在的语言写（遵循<code class="codeph">LANGUAGE</code>关键字），依此类推。
                        </p>
                        <p>示例中<code class="codeph">EXTERNAL</code>子句的最后一部分是<code class="codeph">WITH</code> <code class="codeph">CONTEXT</code>规范。这里，上下文指针被传递给外部过程。上下文指针对外部过程是不透明的，但是可用，以便外部过程可以回调到Oracle服务器，从而可能在同一事务上下文中访问更多数据。
                        </p>
                        <p>虽然该示例描述了来自对象类型方法的外部过程调用，但数据盒式磁带可以使用PL / SQL中各种其他位置的外部过程。外部过程调用可以出现在：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>匿名块</p>
                           </li>
                           <li>
                              <p>独立和打包的子程序</p>
                           </li>
                           <li>
                              <p>对象类型的方法</p>
                           </li>
                           <li>
                              <p>数据库触发器</p>
                           </li>
                           <li>
                              <p>SQL语句（仅调用打包函数）</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-BA57EC81-16E5-4552-B3B1-B44344D2F8C0__GUID-44334198-4349-4F76-9927-3FFA30BE6BA0">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=LNPLS-GUID-2FBCFBBE-6B42-4DB8-83F3-55B63B75B1EB" target="_blank"><span class="italic">PL / SQL用户指南和参考中</span></a> <code class="codeph">EXTERNAL</code>子句可以附带的参数说明<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=LNPLS-GUID-2FBCFBBE-6B42-4DB8-83F3-55B63B75B1EB" target="_blank"><span class="italic">。</span></a></p>
                                 <p>在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ADFNS010" target="_blank"><span class="variable" translate="no">Oracle Database Advanced Application Developer's Guide</span></a>中将对象类型传递给C例程时有关外部过程和格式化调用规范<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ADFNS010" target="_blank"><span class="variable" translate="no">Oracle Database Advanced Application Developer's Guide</span></a></p>
                              </li>
                              <li>
                                 <p>“ <code class="codeph">WITH</code> <code class="codeph">CONTEXT</code>子句<span class="q">”中<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-86F5E74D-1E92-4B39-ADB2-686A949FBB85">的WITH CONTEXT子句</a></span> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADDCI4339"></a><div class="props_rev_3"><a id="GUID-E6794990-73B3-46FB-BB52-F9DC8E1329DA" name="GUID-E6794990-73B3-46FB-BB52-F9DC8E1329DA"></a><h5 id="ADDCI-GUID-E6794990-73B3-46FB-BB52-F9DC8E1329DA" class="sect5"><span class="enumeration_section">5.2.1.1</span>定义包的主体</h5>
                     <div>
                        <div class="example" id="GUID-E6794990-73B3-46FB-BB52-F9DC8E1329DA__BGBCCFEE">
                           <p class="titleinexample">示例5-4定义包的主体</p><pre class="oac_no_warn" dir="ltr">创建或替换程序包DS_Package AS功能DS_Findmin（数据CLOB）RETURN PLS_INTEGER是外部名称“c_findmin”LIBRARY DS_Lib语言C WITH CONTEXT;功能DS_Findmax（数据CLOB）RETURN PLS_INTEGER是外部名称“c_findmax”LIBRARY DS_Lib LANGUAGE C WITH CONTEXT;结束;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADDCI4341"></a><a id="ADDCI4340"></a><div class="props_rev_3"><a id="GUID-DE8AA72F-72D5-4569-902D-67B9B2DC214D" name="GUID-DE8AA72F-72D5-4569-902D-67B9B2DC214D"></a><h3 id="ADDCI-GUID-DE8AA72F-72D5-4569-902D-67B9B2DC214D" class="sect3"><span class="enumeration_section">5.3</span> PL / SQL如何调用外部过程</h3>
               <div>
                  <p><a id="d9398e801" class="indexterm-anchor"></a>要调用外部过程，PL / SQL必须知道过程所在的DLL或共享库。PL / SQL在注册外部过程的子程序的<code class="codeph">EXTERNAL</code>子句中查找别名库。数据字典用于确定操作系统共享库或DLL的实际路径。</p>
                  <p>PL / SQL警告侦听器进程，该进程又启动特定于会话的代理程序。除非在过程指定库的<code class="codeph">CREATE LIBRARY</code>语句中或在<code class="codeph">CREATE PROCEDURE</code>语句的agent参数中指定了某个其他特定代理程序，否则将启动默认代理程序<code class="codeph">extproc</code> 。监听器将与代理的连接移交给代理。PL / SQL向代理传递DLL的名称，外部过程的名称以及调用者传入的任何参数。此帐户的其余部分假定启动的代理是默认代理<code class="codeph">extproc</code> 。
                  </p>
                  <p>在收到DLL的名称和外部过程后， <code class="codeph">extproc</code>加载DLL并运行外部过程。此外， <code class="codeph">extproc</code>处理服务调用，例如引发异常，以及回调到Oracle服务器。最后， <code class="codeph">extproc</code>将外部过程返回的任何值传递给PL / SQL。<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-DE8AA72F-72D5-4569-902D-67B9B2DC214D__I1004696">图5-1</a>显示了控制流程。
                  </p>
                  <div class="figure" id="GUID-DE8AA72F-72D5-4569-902D-67B9B2DC214D__I1004696">
                     <p class="titleinfigure">图5-1调用外部过程</p><img src="img/addci012.gif" alt="下面是图5-1的描述" title="下面是图5-1的描述" longdesc="img_text/addci012.html"><br><a href="img_text/addci012.html">“图5-1调用外部过程”的说明</a></div>
                  <!-- class="figure" -->
                  <p>外部过程完成后， <code class="codeph">extproc</code>在整个Oracle会话中保持活动状态。因此，无论您拨打多少电话，都只会产生一次产生<code class="codeph">extproc</code>的成本。但是，只有当计算收益超过成本时，才应调用外部程序。注销时， <code class="codeph">extproc</code>被<code class="codeph">extproc</code> 。
                  </p>
                  <p>请注意，监听器必须在运行Oracle服务器的系统上启动<code class="codeph">extproc</code> 。不支持在其他系统上启动<code class="codeph">extproc</code> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-DE8AA72F-72D5-4569-902D-67B9B2DC214D__GUID-68D20B48-C0FE-4C3F-9281-344843CD36BB">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关使用专用外部过程代理程序运行外部过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=LNPLS-GUID-2FBCFBBE-6B42-4DB8-83F3-55B63B75B1EB" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p>有关管理<code class="codeph">extproc</code>和外部过程调用的信息，请<code class="codeph">extproc</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ADMIN-GUID-DA5E72EA-46BF-4069-9185-393D939F1F77" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADDCI4342"></a><div class="props_rev_3"><a id="GUID-5ED2C419-E343-4F22-A2D2-94669BC2BA98" name="GUID-5ED2C419-E343-4F22-A2D2-94669BC2BA98"></a><h3 id="ADDCI-GUID-5ED2C419-E343-4F22-A2D2-94669BC2BA98" class="sect3"><span class="enumeration_section">5.4</span>配置外部过程的文件</h3>
               <div>
                  <p>配置文件<code class="codeph">listener.ora</code>和<code class="codeph">tnsnames.ora</code>必须具有适当的条目，以便监听器可以分派外部过程。
                  </p>
                  <p>监听器配置文件<code class="codeph">listener.ora</code>必须具有外部过程的<code class="codeph">SID_DESC</code>条目，如<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-F0078766-0B1C-473F-89F5-727B7D15F74C__BGBJEEGF">例5-5所示</a> 。
                  </p>
                  <p><a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-F0078766-0B1C-473F-89F5-727B7D15F74C__BGBJEEGF">例5-5</a>假设如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle实例名为<code class="codeph">o10</code> 。
                        </p>
                     </li>
                     <li>
                        <p>运行Oracle服务器的系统或节点名为<code class="codeph">unix123</code> 。
                        </p>
                     </li>
                     <li>
                        <p>Oracle服务器的安装目录是<code class="codeph">/rdbms/u01</code> 。
                        </p>
                     </li>
                     <li>
                        <p>Oracle TCP / IP通信的端口号是默认侦听器端口<code class="codeph">1521</code> 。
                        </p>
                     </li>
                  </ul>
                  <p><code class="codeph">tnsnames.ora</code>文件是网络基板配置文件，还必须更新它以引用外部过程，如<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-E62E6E16-7C08-46A8-B468-F2382C9A4A57__BGBBGEFC">例5-6所示</a> 。
                  </p>
                  <p><a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-E62E6E16-7C08-46A8-B468-F2382C9A4A57__BGBBGEFC">例5-6</a>假定IPC机制用于与外部过程通信。您也可以使用TCP / IP进行通信，在这种情况下， <code class="codeph">PROTOCOL</code>参数必须设置为<code class="codeph">tcp</code> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-5ED2C419-E343-4F22-A2D2-94669BC2BA98__GUID-F52B1657-942B-4C5F-AD07-973A4AE034A5">
                     <p class="notep1">也可以看看：</p>
                     <p>有关配置<code class="codeph">listener.ora</code>和<code class="codeph">tnsnames.ora</code>文件的详细信息，请<code class="codeph">tnsnames.ora</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ADMIN-GUID-EA8CC987-EF18-4434-B962-01312CD3A8AC" target="_blank"><span class="variable" translate="no">Oracle Database Administrator's Guide</span></a></p>
                  </div>
               </div><a id="ADDCI4343"></a><div class="props_rev_3"><a id="GUID-F0078766-0B1C-473F-89F5-727B7D15F74C" name="GUID-F0078766-0B1C-473F-89F5-727B7D15F74C"></a><h4 id="ADDCI-GUID-F0078766-0B1C-473F-89F5-727B7D15F74C" class="sect4"><span class="enumeration_section">5.4.1</span>更新监听器配置文件</h4>
                  <div>
                     <div class="example" id="GUID-F0078766-0B1C-473F-89F5-727B7D15F74C__BGBJEEGF">
                        <p class="titleinexample">示例5-5在监听器配置文件中设置SID_DESC条目</p><pre class="oac_no_warn" dir="ltr">＃Listener配置文件＃该文件由stkconf.tsc生成CONNECT_TIMEOUT_LISTENER = 0 LISTENER =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = ipc）（KEY = o10））（ADDRESS =（PROTOCOL = tcp）（HOST = unix123）（PORT = 1521）））SID_LIST_LISTENER =（SID_LIST = SID_DESC =（SID_NAME = o10）（ORACLE_HOME = / rdbms / u01 / app / oracle / product / 11.2.0.1.0）SID_DESC =（SID_NAME = extproc）（ORACLE_HOME = / rdbms / u01 / app / oracle / product / 11.2.0.1.0）（PROGRAM = extproc））</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4344"></a><div class="props_rev_3"><a id="GUID-E62E6E16-7C08-46A8-B468-F2382C9A4A57" name="GUID-E62E6E16-7C08-46A8-B468-F2382C9A4A57"></a><h4 id="ADDCI-GUID-E62E6E16-7C08-46A8-B468-F2382C9A4A57" class="sect4"><span class="enumeration_section">5.4.2</span>指导网络参考外部程序</h4>
                  <div>
                     <div class="example" id="GUID-E62E6E16-7C08-46A8-B468-F2382C9A4A57__BGBBGEFC">
                        <p class="titleinexample">例5-6更新网络基板配置以引用外部过程</p><pre class="oac_no_warn" dir="ltr">o10 =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = unix123）（PORT = 1521））（CONNECT_DATA =（SID = o10）））extproc_connection_data =（DESCRIPTION =（ADDRESS =（PROTOCOL = ipc）（KEY = o10））CONNECT_DATA =（SID = extproc）））</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4345"></a><div class="props_rev_3"><a id="GUID-4E35A385-1E42-4C5C-9F9C-25A1993AA5A1" name="GUID-4E35A385-1E42-4C5C-9F9C-25A1993AA5A1"></a><h4 id="ADDCI-GUID-4E35A385-1E42-4C5C-9F9C-25A1993AA5A1" class="sect4"><span class="enumeration_section">5.4.3将</span>参数传递给外部过程</h4>
                  <div>
                     <p><a id="d9398e1186" class="indexterm-anchor"></a>在以下几种情况下，将参数传递给外部过程很复杂：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>PL / SQL数据类型集与C数据类型集不是一一对应的。</p>
                        </li>
                        <li>
                           <p>PL / SQL参数可以为<code class="codeph">null</code> ，而C参数则不能。与C不同，PL / SQL包含RDBMS无效概念。
                           </p>
                        </li>
                        <li>
                           <p>外部过程可能需要<code class="codeph">CHAR</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code> ， <code class="codeph">RAW</code>和<code class="codeph">VARCHAR2</code>参数的当前长度或最大长度。
                           </p>
                        </li>
                        <li>
                           <p>外部过程可能需要有关<code class="codeph">CHAR</code> ， <code class="codeph">VARCHAR2</code>和<code class="codeph">CLOB</code>参数的字符集信息。
                           </p>
                        </li>
                        <li>
                           <p>PL / SQL可能需要外部过程返回的值的当前长度，最大长度或空状态。</p>
                        </li>
                     </ul>
                     <p>考虑如何最好地指定处理这些情况的参数列表。<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-FE168081-19E5-4991-87C2-40E68995850D__BGBBAJIF">示例5-7中</a>显示了参数传递的<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-FE168081-19E5-4991-87C2-40E68995850D__BGBBAJIF">示例</a> ，其中包函数<code class="codeph">DS_Findmin(data CLOB)</code>调用C例程<code class="codeph">c_findmin</code> ， <code class="codeph">CLOB</code>参数作为<code class="codeph">OCILobLocator()</code>传递给C例程。
                     </p>
                  </div>
               </div><a id="ADDCI4346"></a><div class="props_rev_3"><a id="GUID-60D44FC3-8ACB-4F0C-8BC5-574E4B634EE8" name="GUID-60D44FC3-8ACB-4F0C-8BC5-574E4B634EE8"></a><h4 id="ADDCI-GUID-60D44FC3-8ACB-4F0C-8BC5-574E4B634EE8" class="sect4"><span class="enumeration_section">5.4.4</span>指定数据类型</h4>
                  <div>
                     <p><a id="d9398e1310" class="indexterm-anchor"></a>您不直接将参数传递给外部过程。而是将它们传递给注册外部过程的PL / SQL子程序。因此，您必须为参数指定PL / SQL数据类型。<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-3AF73F62-7599-47D9-9F0D-20BCD54F0974__G1012384" title="指定从PL / SQL数据类型到支持的和缺省外部数据类型的映射">表5-1</a>将每个PL / SQL数据类型映射到默认外部数据类型。外部数据类型映射到C数据类型。
                     </p>
                     <p>在某些情况下，您可以使用<code class="codeph">PARAMETERS</code>子句覆盖默认数据类型映射。例如，您可以将PL / SQL数据类型<code class="codeph">BOOLEAN</code>从外部数据类型<code class="codeph">INT</code>重新映射到外部数据类型<code class="codeph">CHAR</code> 。</p>
                     <p>为了避免在声明C原型参数时出错，请参阅<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-761FA89E-AA1B-4623-B8D0-214B977CA7B1__G1012786" title="指定用于外部数据类型和PL / SQL参数模式的C数据类型">表5-2</a> ，其中显示了为给定外部数据类型和PL / SQL参数模式指定的C数据类型。例如，如果<code class="codeph">OUT</code>参数的外部数据类型为<code class="codeph">CHAR</code> ，请在C原型中指定数据类型<code class="codeph">char*</code> 。
                     </p>
                  </div><a id="ADDCI4347"></a><div class="props_rev_3"><a id="GUID-3AF73F62-7599-47D9-9F0D-20BCD54F0974" name="GUID-3AF73F62-7599-47D9-9F0D-20BCD54F0974"></a><h5 id="ADDCI-GUID-3AF73F62-7599-47D9-9F0D-20BCD54F0974" class="sect5"><span class="enumeration_section">5.4.4.1</span>转换为外部数据类型</h5>
                     <div>
                        <div class="tblformal" id="GUID-3AF73F62-7599-47D9-9F0D-20BCD54F0974__G1012384">
                           <p class="titleintable">表5-1参数数据类型映射</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="参数数据类型映射" width="100%" border="1" summary="Specifies the mappings from PL/SQL datatypes to supported and default external datatypes" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d9398e1414">PL / SQL类型</th>
                                    <th align="left" valign="bottom" width="49%" id="d9398e1417">支持的外部类型</th>
                                    <th align="left" valign="bottom" width="21%" id="d9398e1420">默认外部类型</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d9398e1425" headers="d9398e1414 "><pre class="oac_no_warn" dir="ltr">BINARY_INTEGER，BOOLEAN，PLS_INTEGER</pre></td>
                                    <td align="left" valign="top" width="49%" headers="d9398e1425 d9398e1417 "><pre class="oac_no_warn" dir="ltr">CHAR，UNSIGNED CHAR，SHORT，UNSIGNED SHORT，INT，UNSIGNED INT，LONG，UNSIGNED LONG，SB1，UB1，SB2，UB2，SB4，UB4，SIZE_T</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d9398e1425 d9398e1420 "><pre class="oac_no_warn" dir="ltr">INT</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d9398e1435" headers="d9398e1414 "><pre class="oac_no_warn" dir="ltr">NATURAL，NATURALN，POSITIVE，POSITIVEN，SIGNTYPE</pre></td>
                                    <td align="left" valign="top" width="49%" headers="d9398e1435 d9398e1417 "><pre class="oac_no_warn" dir="ltr">CHAR，UNSIGNED CHAR，SHORT，UNSIGNED SHORT，INT，UNSIGNED INT，LONG，UNSIGNED LONG，SB1，UB1，SB2，UB2，SB4，UB4，SIZE_T</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d9398e1435 d9398e1420 "><pre class="oac_no_warn" dir="ltr">UNSIGNED INT</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d9398e1445" headers="d9398e1414 "><pre class="oac_no_warn" dir="ltr">FLOAT，REAL</pre></td>
                                    <td align="left" valign="top" width="49%" headers="d9398e1445 d9398e1417 "><pre class="oac_no_warn" dir="ltr">浮动</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d9398e1445 d9398e1420 "><pre class="oac_no_warn" dir="ltr">浮动</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d9398e1455" headers="d9398e1414 "><pre class="oac_no_warn" dir="ltr">双精度</pre></td>
                                    <td align="left" valign="top" width="49%" headers="d9398e1455 d9398e1417 "><pre class="oac_no_warn" dir="ltr">双</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d9398e1455 d9398e1420 "><pre class="oac_no_warn" dir="ltr">双</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d9398e1465" headers="d9398e1414 "><pre class="oac_no_warn" dir="ltr">CHAR，CHARACTER，LONG，ROWID，VARCHAR，VARCHAR2</pre></td>
                                    <td align="left" valign="top" width="49%" headers="d9398e1465 d9398e1417 "><pre class="oac_no_warn" dir="ltr">串</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d9398e1465 d9398e1420 "><pre class="oac_no_warn" dir="ltr">串</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d9398e1475" headers="d9398e1414 "><pre class="oac_no_warn" dir="ltr">LONG RAW，RAW</pre></td>
                                    <td align="left" valign="top" width="49%" headers="d9398e1475 d9398e1417 "><pre class="oac_no_warn" dir="ltr">生的</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d9398e1475 d9398e1420 "><pre class="oac_no_warn" dir="ltr">生的</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d9398e1485" headers="d9398e1414 "><pre class="oac_no_warn" dir="ltr">BFILE，BLOB，CLOB</pre></td>
                                    <td align="left" valign="top" width="49%" headers="d9398e1485 d9398e1417 "><pre class="oac_no_warn" dir="ltr">OCILOBLOCATOR</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d9398e1485 d9398e1420 "><pre class="oac_no_warn" dir="ltr">OCILOBLOCATOR</pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="ADDCI4348"></a><div class="props_rev_3"><a id="GUID-761FA89E-AA1B-4623-B8D0-214B977CA7B1" name="GUID-761FA89E-AA1B-4623-B8D0-214B977CA7B1"></a><h5 id="ADDCI-GUID-761FA89E-AA1B-4623-B8D0-214B977CA7B1" class="sect5"><span class="enumeration_section">5.4.4.2</span>从外部数据类型转换</h5>
                     <div>
                        <div class="tblformal" id="GUID-761FA89E-AA1B-4623-B8D0-214B977CA7B1__G1012786">
                           <p class="titleintable">表5-2外部数据类型映射</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="外部数据类型映射" width="100%" border="1" summary="Specifies the C datatype to use for external datatypes and PL/SQL parameter mode" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d9398e1559">外部数据类型</th>
                                    <th align="left" valign="bottom" width="23%" id="d9398e1562">作为回报</th>
                                    <th align="left" valign="bottom" width="27%" id="d9398e1567">IN by Reference，RETURN by Reference</th>
                                    <th align="left" valign="bottom" width="27%" id="d9398e1572">IN OUT，OUT</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1579" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">CHAR</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1579 d9398e1562 "><pre class="oac_no_warn" dir="ltr">烧焦</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1579 d9398e1567 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1579 d9398e1572 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1592" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">无符号的字符</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1592 d9398e1562 "><pre class="oac_no_warn" dir="ltr">无符号的字符</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1592 d9398e1567 "><pre class="oac_no_warn" dir="ltr">无符号的字符 *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1592 d9398e1572 "><pre class="oac_no_warn" dir="ltr">无符号的字符 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1605" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">短</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1605 d9398e1562 "><pre class="oac_no_warn" dir="ltr">短</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1605 d9398e1567 "><pre class="oac_no_warn" dir="ltr">短*</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1605 d9398e1572 "><pre class="oac_no_warn" dir="ltr">短*</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1618" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">未签约的短信</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1618 d9398e1562 "><pre class="oac_no_warn" dir="ltr">未签约的短片</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1618 d9398e1567 "><pre class="oac_no_warn" dir="ltr">无符号短*</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1618 d9398e1572 "><pre class="oac_no_warn" dir="ltr">无符号短*</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1631" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">INT</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1631 d9398e1562 "><pre class="oac_no_warn" dir="ltr">INT</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1631 d9398e1567 "><pre class="oac_no_warn" dir="ltr">int *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1631 d9398e1572 "><pre class="oac_no_warn" dir="ltr">int *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1644" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">UNSIGNED INT</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1644 d9398e1562 "><pre class="oac_no_warn" dir="ltr">unsigned int</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1644 d9398e1567 "><pre class="oac_no_warn" dir="ltr">unsigned int *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1644 d9398e1572 "><pre class="oac_no_warn" dir="ltr">unsigned int *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1657" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">长</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1657 d9398e1562 "><pre class="oac_no_warn" dir="ltr">长</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1657 d9398e1567 "><pre class="oac_no_warn" dir="ltr">长 *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1657 d9398e1572 "><pre class="oac_no_warn" dir="ltr">长 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1670" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">签名不合适</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1670 d9398e1562 "><pre class="oac_no_warn" dir="ltr">无符号长</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1670 d9398e1567 "><pre class="oac_no_warn" dir="ltr">无符号长*</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1670 d9398e1572 "><pre class="oac_no_warn" dir="ltr">无符号长*</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1683" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">SIZE_T</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1683 d9398e1562 "><pre class="oac_no_warn" dir="ltr">为size_t</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1683 d9398e1567 "><pre class="oac_no_warn" dir="ltr">size_t *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1683 d9398e1572 "><pre class="oac_no_warn" dir="ltr">size_t *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1696" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">SB1</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1696 d9398e1562 "><pre class="oac_no_warn" dir="ltr">SB1</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1696 d9398e1567 "><pre class="oac_no_warn" dir="ltr">sb1 *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1696 d9398e1572 "><pre class="oac_no_warn" dir="ltr">sb1 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1709" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">UB1</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1709 d9398e1562 "><pre class="oac_no_warn" dir="ltr">UB1</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1709 d9398e1567 "><pre class="oac_no_warn" dir="ltr">ub1 *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1709 d9398e1572 "><pre class="oac_no_warn" dir="ltr">ub1 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1723" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">SB2</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1723 d9398e1562 "><pre class="oac_no_warn" dir="ltr">SB2</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1723 d9398e1567 "><pre class="oac_no_warn" dir="ltr">sb2 *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1723 d9398e1572 "><pre class="oac_no_warn" dir="ltr">sb2 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1736" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">UB2</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1736 d9398e1562 "><pre class="oac_no_warn" dir="ltr">UB2</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1736 d9398e1567 "><pre class="oac_no_warn" dir="ltr">ub2 *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1736 d9398e1572 "><pre class="oac_no_warn" dir="ltr">ub2 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1749" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">SB4</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1749 d9398e1562 "><pre class="oac_no_warn" dir="ltr">SB4</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1749 d9398e1567 "><pre class="oac_no_warn" dir="ltr">sb4 *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1749 d9398e1572 "><pre class="oac_no_warn" dir="ltr">sb4 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1762" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">UB4</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1762 d9398e1562 "><pre class="oac_no_warn" dir="ltr">UB4</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1762 d9398e1567 "><pre class="oac_no_warn" dir="ltr">ub4 *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1762 d9398e1572 "><pre class="oac_no_warn" dir="ltr">ub4 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1775" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">浮动</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1775 d9398e1562 "><pre class="oac_no_warn" dir="ltr">浮动</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1775 d9398e1567 "><pre class="oac_no_warn" dir="ltr">漂浮*</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1775 d9398e1572 "><pre class="oac_no_warn" dir="ltr">漂浮*</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1788" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">双</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1788 d9398e1562 "><pre class="oac_no_warn" dir="ltr">双</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1788 d9398e1567 "><pre class="oac_no_warn" dir="ltr">双*</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1788 d9398e1572 "><pre class="oac_no_warn" dir="ltr">双*</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1801" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">串</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1801 d9398e1562 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1801 d9398e1567 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1801 d9398e1572 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1814" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">生的</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1814 d9398e1562 "><pre class="oac_no_warn" dir="ltr">无符号的字符 *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1814 d9398e1567 "><pre class="oac_no_warn" dir="ltr">无符号的字符 *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1814 d9398e1572 "><pre class="oac_no_warn" dir="ltr">无符号的字符 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d9398e1827" headers="d9398e1559 "><pre class="oac_no_warn" dir="ltr">OCILOBLOCATOR</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d9398e1827 d9398e1562 "><pre class="oac_no_warn" dir="ltr">OCILobLocator *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1827 d9398e1567 "><pre class="oac_no_warn" dir="ltr">OCILobLocator *</pre></td>
                                    <td align="left" valign="top" width="27%" headers="d9398e1827 d9398e1572 "><pre class="oac_no_warn" dir="ltr">OCILobLocator **</pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="ADDCI4349"></a><div class="props_rev_3"><a id="GUID-D6DB3026-1A29-45F4-94E2-D5EB0703A9E7" name="GUID-D6DB3026-1A29-45F4-94E2-D5EB0703A9E7"></a><h4 id="ADDCI-GUID-D6DB3026-1A29-45F4-94E2-D5EB0703A9E7" class="sect4"><span class="enumeration_section">5.4.5</span>使用参数子句</h4>
                  <div>
                     <p>您可以选择使用<code class="codeph">PARAMETERS</code>子句将有关PL / SQL形式参数和函数返回值的其他信息传递给外部过程。您还可以使用此子句重新定位参数。
                     </p>
                     <div class="infoboxnotealso" id="GUID-D6DB3026-1A29-45F4-94E2-D5EB0703A9E7__GUID-911AD847-B3B7-4D81-A076-497600B094EC">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=LNPLS-GUID-2FBCFBBE-6B42-4DB8-83F3-55B63B75B1EB" target="_blank"><span class="italic">Oracle数据库PL / SQL语言参考。</span></a></p>
                     </div>
                  </div>
               </div><a id="ADDCI4350"></a><div class="props_rev_3"><a id="GUID-86F5E74D-1E92-4B39-ADB2-686A949FBB85" name="GUID-86F5E74D-1E92-4B39-ADB2-686A949FBB85"></a><h4 id="ADDCI-GUID-86F5E74D-1E92-4B39-ADB2-686A949FBB85" class="sect4"><span class="enumeration_section">5.4.6</span>使用WITH CONTEXT子句</h4>
                  <div>
                     <p><a id="d9398e1966" class="indexterm-anchor"></a><a id="d9398e1970" class="indexterm-anchor"></a><a id="d9398e1972" class="indexterm-anchor"></a>启动时，外部过程必须访问数据库。例如， <code class="codeph">DS_Findmin</code>不会将整个<code class="codeph">CLOB</code>数据复制到<code class="codeph">c_findmin</code> ，因为这样做会大大增加C例程所需的堆栈数量。相反，PL / SQL函数只是将<code class="codeph">LOB</code>定位器传递给C例程，目的是再次从C访问数据库以读取实际的<code class="codeph">LOB</code>数据。
                     </p>
                     <p>当C例程读取数据时，它可以使用与LOB关联的OCI缓冲和流接口，因此只需要增量堆栈。从外部过程重新访问数据库称为<strong class="term">回调</strong> 。
                     </p>
                     <p>为了能够回调数据库，必须使用<code class="codeph">WITH</code> <code class="codeph">CONTEXT</code>子句为外部过程提供对数据库环境，服务和错误句柄的访问。使用<code class="codeph">WITH</code> <code class="codeph">CONTEXT</code>调用外部过程时，相应的C例程会自动获取类型为<code class="codeph">OCIExtProcContext</code> *的参数作为其第一个参数。可以使用<code class="codeph">PARAMETERS</code>子句更改参数的顺序。您可以使用此上下文指针使用<code class="codeph">OCIExtProcGetEnv</code>调用获取句柄，然后回调数据库。该过程如<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-FE168081-19E5-4991-87C2-40E68995850D__BGBBAJIF">例5-7</a>所示。
                     </p>
                     <div class="infoboxnotealso" id="GUID-86F5E74D-1E92-4B39-ADB2-686A949FBB85__GUID-D86B5331-BED5-43E3-9FB9-07B503FF7C71">
                        <p class="notep1">也可以看看：</p>
                        <p>有关OCI回调的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=LNOCI090" target="_blank"><span class="variable" translate="no">Oracle Call Interface Programmer's Guide</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADDCI4352"></a><a id="ADDCI4351"></a><div class="props_rev_3"><a id="GUID-FE168081-19E5-4991-87C2-40E68995850D" name="GUID-FE168081-19E5-4991-87C2-40E68995850D"></a><h3 id="ADDCI-GUID-FE168081-19E5-4991-87C2-40E68995850D" class="sect3"><span class="enumeration_section">5.5</span>使用回调</h3>
               <div>
                  <p>在Oracle服务器上运行的外部过程可以调用访问函数<code class="codeph">OCIExtProcGetEnv()</code>来获取OCI环境和服务句柄。使用OCI，您可以使用回调来执行SQL语句和PL / SQL子程序，获取数据和操作LOB。此外，回调和外部过程在相同的用户会话和事务上下文中运行，因此它们具有相同的用户权限。
                  </p>
                  <p><a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-FE168081-19E5-4991-87C2-40E68995850D__BGBBAJIF">例5-7</a>是<code class="codeph">c_findmin</code>一个版本，它被简化以说明回调。
                  </p>
                  <div class="example" id="GUID-FE168081-19E5-4991-87C2-40E68995850D__BGBBAJIF">
                     <p class="titleinexample">例5-7使用回调</p><pre class="oac_no_warn" dir="ltr">静态OCIEnv * envhp;静态OCISvcCtx * svchp;静态OCIError * errhp; Int c_findmin（OCIExtProcContext * ctx，OCILobLocator * lobl）{sword retval; retval = OCIExtProcGetEnv（ctx，＆envhp，＆svchp，＆errhp）;如果（（retval！= OCI_SUCCESS）&amp;&amp;（retval！= OCI_SUCCESS_WITH_INFO））exit（-1）; / *使用lobl读取CLOB，计算最小值，并将值存储在retval中。* / return retval; }</pre></div>
                  <!-- class="example" -->
               </div><a id="ADDCI4353"></a><div class="props_rev_3"><a id="GUID-E4FD7D75-72D2-4938-9F2C-C6E19A6311AD" name="GUID-E4FD7D75-72D2-4938-9F2C-C6E19A6311AD"></a><h4 id="ADDCI-GUID-E4FD7D75-72D2-4938-9F2C-C6E19A6311AD" class="sect4"><span class="enumeration_section">5.5.1</span>回调限制</h4>
                  <div>
                     <div class="section">
                        <p><a id="d9398e2162" class="indexterm-anchor"></a>使用回调时，不支持以下SQL语句和OCI例程：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>事务控制语句，如<code class="codeph">COMMIT</code></p>
                           </li>
                           <li>
                              <p>数据定义语句，例如<code class="codeph">CREATE</code> 
                              </p>
                           </li>
                           <li>
                              <p>面向对象的OCI例程，例如<code class="codeph">OCIRefClear</code> 
                              </p>
                           </li>
                           <li>
                              <p>轮询模式OCI例程，例如<code class="codeph">OCIGetPieceInfo</code> 
                              </p>
                           </li>
                           <li>
                              <p>以下OCI例程：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">OCIEnvInit（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCIInitialize（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCIPasswordChange（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCIServerAttach（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCIServerDetach（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCISessionBegin（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCISessionEnd（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCISvcCtxToLda（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCITransCommit（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCITransDetach（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCITransRollback（）</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCITransStart（）</code></p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>此外，使用OCI例程<code class="codeph">OCIHandleAlloc()</code> ，不支持以下句柄类型：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">OCI_HTYPE_SERVER</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_HTYPE_SESSION</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_HTYPE_SVCCTX</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_HTYPE_TRANS</code></p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADDCI4354"></a><div class="props_rev_3"><a id="GUID-FCCDDCF8-B705-4EC0-9750-ED0789BDB58A" name="GUID-FCCDDCF8-B705-4EC0-9750-ED0789BDB58A"></a><h3 id="ADDCI-GUID-FCCDDCF8-B705-4EC0-9750-ED0789BDB58A" class="sect3"><span class="enumeration_section">5.6</span>常见潜在错误</h3>
               <div>
                  <p>考虑运行外部过程时可能发生的几个常见错误。</p>
               </div><a id="ADDCI4355"></a><div class="props_rev_3"><a id="GUID-57A07AE5-8EB7-4D85-A0F5-3C77CB9B35F4" name="GUID-57A07AE5-8EB7-4D85-A0F5-3C77CB9B35F4"></a><h4 id="ADDCI-GUID-57A07AE5-8EB7-4D85-A0F5-3C77CB9B35F4" class="sect4"><span class="enumeration_section">5.6.1</span>调用外部函数</h4>
                  <div>
                     <div class="section">
                        <p>您可能为DLL文件指定了错误的路径或错误的名称，或者您可能已尝试在网络安装的驱动器（远程驱动器）上使用DLL。</p><pre class="oac_no_warn" dir="ltr">无法找到DLL ORA-06520：PL / SQL：加载外部库时出错ORA-06522：无法加载DLL ORA-06512：在“&lt;名称&gt;”，行&lt;编号&gt; ORA-06512：在“&lt;名称&gt;” ，行&lt;number&gt; ORA-06512：行&lt;number&gt;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI4356"></a><div class="props_rev_3"><a id="GUID-6638C85A-E4E4-4364-8419-5005332808B4" name="GUID-6638C85A-E4E4-4364-8419-5005332808B4"></a><h4 id="ADDCI-GUID-6638C85A-E4E4-4364-8419-5005332808B4" class="sect4"><span class="enumeration_section">5.6.2</span> RPC超时</h4>
                  <div>
                     <div class="section">
                        <p>在调试共享库或DLL时退出调试器后可能会发生此错误。只需断开客户端连接并重新连接到数据库即可。</p><pre class="oac_no_warn" dir="ltr">ORA-28576：丢失与外部过程代理ORA-06512的RPC连接：在“&lt;名称&gt;”，行&lt;编号&gt; ORA-06512：在“&lt;名称&gt;”，行&lt;编号&gt; ORA-06512：在行&lt;编号&gt;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADDCI4357"></a><div class="props_rev_3"><a id="GUID-E4B028CC-FFD1-4B63-AF40-E09A0F465C60" name="GUID-E4B028CC-FFD1-4B63-AF40-E09A0F465C60"></a><h3 id="ADDCI-GUID-E4B028CC-FFD1-4B63-AF40-E09A0F465C60" class="sect3"><span class="enumeration_section">5.7</span>调试外部过程</h3>
               <div>
                  <p>通常，当外部过程失败时，其C原型会出错。也就是说，原型与PL / SQL内部生成的原型不匹配。如果指定不兼容的C数据类型，则会发生这种情况。例如，要传递<code class="codeph">REAL</code>类型的<code class="codeph">OUT</code>参数，必须指定<code class="codeph">float *</code> 。指定<code class="codeph">float</code> ， <code class="codeph">double *</code>或任何其他C数据类型会导致不匹配。
                  </p>
                  <p>在这种情况下，您可能会丢失与外部过程代理程序错误的RPC连接，这意味着代理程序<code class="codeph">extproc</code>异常终止，因为外部过程导致核心转储。为了避免在声明C原型参数时出错，请参阅<a href="implementing-data-cartridges-in-C-CPP-and-java.html#GUID-761FA89E-AA1B-4623-B8D0-214B977CA7B1__G1012786" title="指定用于外部数据类型和PL / SQL参数模式的C数据类型">表5-2</a> 。
                  </p>
               </div><a id="ADDCI4358"></a><div class="props_rev_3"><a id="GUID-FA163AB3-F9CF-4431-88D6-147E5156AEC6" name="GUID-FA163AB3-F9CF-4431-88D6-147E5156AEC6"></a><h4 id="ADDCI-GUID-FA163AB3-F9CF-4431-88D6-147E5156AEC6" class="sect4"><span class="enumeration_section">5.7.1</span>使用包DEBUG_EXTPROC</h4>
                  <div>
                     <p>为了帮助您调试外部过程，PL / SQL提供了实用程序包<code class="codeph">DEBUG_EXTPROC</code> 。要安装软件包，请运行脚本<code class="codeph">dbgextp</code> 。 <code class="codeph">sql</code> ，您可以在PL / SQL演示目录中找到它。
                     </p>
                     <p>要使用该包，请按照<code class="codeph">dbgextp.sql</code>的说明进行<code class="codeph">dbgextp.sql</code> 。您的Oracle帐户必须具有对程序包和<code class="codeph">CREATE</code> <code class="codeph">LIBRARY</code>权限的<code class="codeph">EXECUTE</code>权限。
                     </p>
                     <p>请注意， <code class="codeph">DEBUG_EXTPROC</code>仅适用于具有可附加到正在运行的进程的调试器实用程序的平台。
                     </p>
                  </div>
               </div><a id="ADDCI4359"></a><div class="props_rev_3"><a id="GUID-A713AC5A-46FD-4FCE-BD5E-4557AB4EEC0A" name="GUID-A713AC5A-46FD-4FCE-BD5E-4557AB4EEC0A"></a><h4 id="ADDCI-GUID-A713AC5A-46FD-4FCE-BD5E-4557AB4EEC0A" class="sect4"><span class="enumeration_section">5.7.2</span>在Windows NT系统上调试DLL中的C代码</h4>
                  <div>
                     <div class="section">
                        <p><a id="d9398e2671" class="indexterm-anchor"></a><a id="d9398e2675" class="indexterm-anchor"></a><a id="d9398e2679" class="indexterm-anchor"></a>如果您在Windows NT系统上进行开发，则可以执行以下附加操作来调试外部过程：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>调用Windows NT任务管理器;按<span class="bold">Ctrl</span> + <span class="bold">Alt</span> + <span class="bold">Del</span>并选择“ <span class="bold">任务管理器”</span> 。</span></li>
                        <li class="stepexpand"><span>在“进程”屏幕中，选择“ExtProc.exe”。</span></li>
                        <li class="stepexpand"><span>右键单击，然后选择Debug。</span></li>
                        <li class="stepexpand"><span>在消息框中选择确定。</span><div>
                              <p>此时，如果您使用Microsoft Visual C ++以调试方式构建了DLL，则会激活Visual C ++。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在Visual C ++窗口中，选择“编辑”&gt;“断点”。</span></li>
                        <li class="stepexpand"><span>使用PL / SQL演示目录中<code class="codeph">dbgextp.sql</code>中标识的断点。</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADDCI4360"></a><div class="props_rev_3"><a id="GUID-0920EE62-3F59-4933-8A3E-6179D5FF2B3C" name="GUID-0920EE62-3F59-4933-8A3E-6179D5FF2B3C"></a><h3 id="ADDCI-GUID-0920EE62-3F59-4933-8A3E-6179D5FF2B3C" class="sect3"><span class="enumeration_section">5.8</span>使用数据磁带外部程序的指南</h3>
               <div>
                  <p><a id="d9398e2775" class="indexterm-anchor"></a><a id="d9398e2779" class="indexterm-anchor"></a><a id="d9398e2783" class="indexterm-anchor"></a><a id="d9398e2787" class="indexterm-anchor"></a>确保编写线程安全的外部过程。特别是，避免使用静态变量，这些变量可以由在不同线程中运行的例程共享。
                  </p>
                  <p>有关创建动态链接库的帮助，请查看RDBMS子目录<code class="codeph">/public</code> ，其中可以找到模板<code class="codeph">makefile</code> 。
                  </p>
                  <p>调用外部过程时，切勿写入<code class="codeph">IN</code>参数或溢出<code class="codeph">OUT</code>参数的容量。PL / SQL不对这些错误条件进行运行时检查。同样，永远不要读取<code class="codeph">OUT</code>参数或功能结果。此外，始终为<code class="codeph">IN</code> <code class="codeph">OUT</code>和<code class="codeph">OUT</code>参数以及功能结果分配值。否则，您的外部过程不会成功返回。
                  </p>
                  <p>如果包含<code class="codeph">WITH</code> <code class="codeph">CONTEXT</code>和<code class="codeph">PARAMETERS</code>子句，则必须指定参数<code class="codeph">CONTEXT</code> ，该参数显示参数列表中上下文指针的位置。如果省略<code class="codeph">PARAMETERS</code>子句，则上下文指针是传递给外部过程的第一个参数。
                  </p>
                  <p>如果包含<code class="codeph">PARAMETERS</code>子句且外部过程是函数，则必须在最后一个位置指定参数<code class="codeph">RETURN</code> （不是<code class="codeph">RETURN property</code> ）。
                  </p>
                  <p>对于每个形式参数， <code class="codeph">PARAMETERS</code>子句中必须有相应的<code class="codeph">PARAMETERS</code> 。此外，请确保<code class="codeph">PARAMETERS</code>子句中的<code class="codeph">PARAMETERS</code>数据类型与C原型中的<code class="codeph">PARAMETERS</code>数据类型兼容，因为不会进行隐式转换。
                  </p>
                  <p>为其指定<code class="codeph">INDICATOR</code>或<code class="codeph">LENGTH</code>的参数与相应的形式参数具有相同的参数模式。但是，即使您还指定了<code class="codeph">BY REFERENCE</code> ，指定<code class="codeph">MAXLEN</code> ， <code class="codeph">CHARSETID</code>或<code class="codeph">CHARSETFORM</code>的参数也始终被视为<code class="codeph">IN</code>参数。</p>
                  <p>对于<code class="codeph">CHAR</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code> ， <code class="codeph">RAW</code>或<code class="codeph">VARCHAR2</code>类型的参数，必须使用属性<code class="codeph">LENGTH</code> 。此外，如果该参数为<code class="codeph">IN</code> <code class="codeph">OUT</code>或<code class="codeph">OUT</code>且为null，则必须将相应C参数的长度设置为零。
                  </p>
                  <div class="infoboxnotealso" id="GUID-0920EE62-3F59-4933-8A3E-6179D5FF2B3C__GUID-FB5B2BAF-4BF0-4C68-98C1-0D3133812289">
                     <p class="notep1">也可以看看：</p>
                     <p>有关多线程的更多信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=HETER-GUID-EC402025-0CC0-401F-AF93-888B8A3089FE" target="_blank"><span class="italic">Oracle数据库异构连接管理员指南”。</span></a></p>
                  </div>
               </div>
            </div><a id="ADDCI4361"></a><div class="props_rev_3"><a id="GUID-4DCE0D7F-1144-47E3-B347-F737B03EC5AE" name="GUID-4DCE0D7F-1144-47E3-B347-F737B03EC5AE"></a><h3 id="ADDCI-GUID-4DCE0D7F-1144-47E3-B347-F737B03EC5AE" class="sect3"><span class="enumeration_section">5.9</span> Java方法</h3>
               <div>
                  <p>要使用Java数据盒式磁带，您必须知道如何加载Java类定义，如何调用存储过程以及上下文管理。</p>
                  <div class="infoboxnotealso" id="GUID-4DCE0D7F-1144-47E3-B347-F737B03EC5AE__GUID-C48501B1-BFC6-4D9C-9F0B-C7F5348749B8">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="cartridge-services-using-C-CPP-and-java.html#GUID-43B4F11B-33E4-4722-93E0-9D8F809CC745">盒式磁带服务使用C，C ++和Java</a>获取有关ODCI类的信息。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
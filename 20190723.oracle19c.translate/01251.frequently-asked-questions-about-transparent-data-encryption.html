<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Users frequently have questions about transparency and performance issues with Transparent Data Encryption."></meta>
      <meta name="description" content="Users frequently have questions about transparency and performance issues with Transparent Data Encryption."></meta>
      <title>有关透明数据加密的常见问题解答</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Security Guide "></meta>
      <meta property="og:description" content="Users frequently have questions about transparency and performance issues with Transparent Data Encryption."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Security Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="advanced-security-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-13T09:26:12-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96301-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-sqlnet-ora-to-configure-tde-keystores.html" title="Previous" type="text/html"></link>
      <link rel="next" href="asopart2.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Advanced Security Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ASOAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-sqlnet-ora-to-configure-tde-keystores.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="asopart2.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级安全指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="asopart1.html" property="item" typeof="WebPage"><span property="name">使用透明数据加密</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">有关透明数据加密的常见问题解答</li>
            </ol>
            <a id="GUID-45567B22-EA5D-42BC-9D7F-6161ADD6A191" name="GUID-45567B22-EA5D-42BC-9D7F-6161ADD6A191"></a><a id="ASOAG10542"></a>
            
            <h2 id="ASOAG-GUID-45567B22-EA5D-42BC-9D7F-6161ADD6A191" class="sect2"><span class="enumeration_chapter">10</span>关于透明数据加密的常见问题解答</h2>
         </header>
         <div class="ind">
            <div>
               <p>用户经常对透明数据加密的透明度和性能问题提出疑问。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="frequently-asked-questions-about-transparent-data-encryption.html#GUID-BBA0097F-258B-44C5-A83F-2DE625A34EC1">关于透明数据加密的透明度问题</a><br>透明数据加密以各种方式处理数据的透明度。
                  </li>
                  <li class="ulchildlink"><a href="frequently-asked-questions-about-transparent-data-encryption.html#GUID-2A439A03-DA2A-4811-A4E4-77DA81C72DF6">关于透明数据加密的性能问题</a><br>使用透明数据加密时需要考虑几个性能问题。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="asopart1.html" title="第一部分介绍了如何使用透明数据加密。">使用透明数据加密</a></p>
                  </div>
               </div>
            </div>
            <a id="ASOAG10543"></a><div class="props_rev_3"><a id="GUID-BBA0097F-258B-44C5-A83F-2DE625A34EC1" name="GUID-BBA0097F-258B-44C5-A83F-2DE625A34EC1"></a><h3 id="ASOAG-GUID-BBA0097F-258B-44C5-A83F-2DE625A34EC1" class="sect3">关于透明数据加密的透明度问题</h3>
               <div>
                  <p>透明数据加密以各种方式处理数据的透明度。</p>
                  <p>安全审核员偶尔会询问有关透明数据加密（TDE）使用的加密的详细问题。他们请求有关TDE密钥，算法，长度和密钥库的信息，然后直接与PCI-DSS等法规要求进行比较。本主题包含有关TDE加密和密钥管理的重要详细信息。此信息是Oracle Database 12 <span class="italic">c</span> （12.1.0.2）中的最新信息。它旨在帮助TDE客户快速准确地回答审计员的问题。
                  </p>
                  <ol>
                     <li>
                        <p><span class="bold">透明数据加密是否与我的应用软件兼容？</span> 
                        </p>
                        <p>透明数据加密默认与应用程序兼容，因为它不会更改入站SQL语句或出站SQL查询结果。Oracle执行某些Oracle和第三方应用程序软件的内部测试和验证，以捕获有用的部署技巧或脚本，并评估性能配置文件。</p>
                        <p>请注意透明数据加密与<code class="codeph">DBMS_CRYPTO</code> PL / SQL包之间的区别。此软件包适用于不同的客户使用案例。它是一个API和工具包解决方案，因此它是不透明的。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">透明数据加密是否与我正在使用的其他Oracle数据库工具和技术兼容？</span> 
                        </p>
                        <p>透明数据加密的主要优势之一是它与常用的Oracle数据库工具和技术集成，如高可用性集群，存储压缩，备份压缩，数据移动，数据库备份和恢复以及数据库复制。直接与透明数据加密集成的特定Oracle技术包括Oracle Real Application Clusters（Oracle RAC），Oracle Recovery Manager（RMAN），Oracle Data Guard，Advanced Compression，Oracle Data Pump和Oracle GoldenGate等。透明数据加密还与Oracle Exadata具有特殊的集成点，可充分利用Oracle工程系统的独特功能。</p>
                        <p>透明数据加密还可以轻松使用Oracle数据库的安全功能。借助透明数据加密，权限授予，角色，Oracle Database Vault领域，虚拟专用数据库策略和Oracle Label Security标签仍然有效。您可以将这些和其他安全功能与透明数据加密加密结合使用。</p>
                     </li>
                     <li>
                        <p><span class="bold">是否存在任何已知的透明数据加密限制或不兼容性？</span> 
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">TDE列加密：</span> TDE列加密在数据通过SQL层时透明地加密和解密数据。Oracle的某些功能将绕过SQL层，因此无法从TDE列加密中受益。以下是TDE列加密不支持的已知数据库功能及其相关软件版本号：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>物化视图日志（Oracle Database 11g第2版之前不支持）</p>
                                 </li>
                                 <li>
                                    <p>数据仓库（CDC）的同步和异步更改数据捕获</p>
                                 </li>
                                 <li>
                                    <p>可传输的表空间</p>
                                 </li>
                                 <li>
                                    <p>的LOB</p>
                                 </li>
                              </ul>
                              <p>请注意，安全文件是在Oracle Database 11g第1版中引入的，因此在该版本之前不支持TDE列加密</p>
                           </li>
                           <li>
                              <p><span class="bold">TDE表空间加密：</span> TDE表空间加密对存储在块级别的表空间中存储的所有内容进行加密，并且通常不会与其他数据库功能冲突。TDE表空间加密没有TDE列加密所具有的任何限制。但是，从TDE加密的源到TDE加密的目标，您可以使用完整的可传输表空间（TTS）与Oracle Data Pump压缩和加密。您必须具有可用的Oracle Database <span class="italic">12c</span>或更高版本的数据库实例，以便您可以使用其密钥导出或密钥库（钱包）合并功能来获取目标数据库主机的正确主加密密钥，而无需覆盖原始Oracle钱包文件。此过程受标准TTS限制，您必须记住检查兼容的字节顺序。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="bold">TDE使用哪些类型的密钥和算法？</span></p>
                        <p>TDE依赖于两组不同的加密密钥。第一组加密密钥是TDE表空间加密密钥，用于透明地加密和解密存储的数据。DEK由数据库自动生成，以加密形式存储在数据库内部，并且主要在幕后进行管理。最终用户与DEK交互的一个地方是选择TDE将使用的加密算法和密钥长度，可以是3DES168，AES128，AES192或AES256。对于包含加密列和每个加密表空间的每个表，将独立进行此选择。您可能还会听到称为表键（列加密）或表空间键（表空间加密）的DEK。表密钥用于密码块链接（CBC）操作模式，表空间密钥用于密码反馈（CFB）操作模式。</p>
                        <p>第二组加密密钥由当前和历史密钥加密密钥（KEK）组成，也称为主加密密钥。主加密密钥由数据库自动生成，根据需要自动用于加密和解密DEK，并存储在受保护的密钥库中。用户可以通过定期重新加密它，修改某些键属性等来与当前主加密密钥交互。通常，主加密密钥的密钥库是Oracle钱包（开箱即用解决方案）或Oracle Key Vault（专用密钥管理产品）。虽然数据库一次只使用一个TDE主密钥，但所有重新密钥的主加密密钥都保留在密钥库中，以便长期恢复加密数据备份。主加密密钥始终为AES256。他们使用CBC操作模式加密和解密DEK。对于DEK和主加密密钥，底层密钥材料不会直接公开。最终用户只能看到管理TDE所需的密钥属性。</p>
                     </li>
                     <li>
                        <p><span class="bold">包含主加密密钥的Oracle密钥库如何受到保护？</span></p>
                        <p>当您使用Oracle钱包作为主加密密钥的密钥库时，需要考虑三种不同类型的密钥库：基于密码，自动登录和本地自动登录。所有这些密钥库外部化主加密密钥，因此它们与TDE加密数据分开。Oracle建议您将钱包文件放在受严格文件权限和其他安全措施保护的本地或网络目录中。</p>
                        <p>基于密码的钱包是遵循PKCS＃12标准的加密密钥存储文件（ <code class="codeph">ewallet.p12</code> ）。它根据PKCS＃5标准由密码派生密钥加密。人类用户必须输入包含数据库密码的命令才能打开钱包，解密其内容并获得密钥访问权限。基于密码的钱包是TDE主密钥的默认密钥库。过去，它使用3DES168加密算法和CBC操作模式进行加密。<code class="codeph">orapki</code>命令<code class="codeph">convert wallet</code>使您可以将基于密码的钱包转换为AES256和CBC操作模式。<a href="../dbseg/using-the-orapki-utility-to-manage-pki-elements.html#DBSEG610" target="_blank"><span><cite>“Oracle数据库安全指南”</cite></span></a>提供了有关使用<code class="codeph">orapki</code>转换钱包的详细信息。
                        </p>
                        <p>自动登录钱包（ <code class="codeph">cwallet.sso</code> ）可选地源自基于密码的标准钱包，用于需要自动启动数据库而无需人工交互输入钱包密码的特殊情况。使用自动登录钱包时，必须保留基于主密码的钱包，因为需要重新加密主加密密钥。除了将自动登录钱包存储在受严格文件权限保护的本地或网络目录中的最佳实践之外，数据库还使用专有方法对文件内容进行加密，以增加安全性。自动登录钱包上的一个名为本地自动登录钱包的轻微变化具有类似的行为。与本地自动登录钱包的一个显着区别是，其内容使用从创建文件的主机中获取的其他因素进行加扰。这会使本地自动登录钱包在其他主机上无法使用。主机因素和加扰技术的细节是专有的。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">什么是Oracle Key Vault以及它如何管理TDE主密钥？</span></p>
                        <p>Oracle Key Vault集中管理TDE主密钥，Oracle钱包，Java密钥库等。它可以帮助您控制增殖密钥和密钥存储文件。它包括专门针对TDE和Oracle堆栈的其他组件的优化。有关将Oracle Key Vault与TDE配合使用的更多信息，请参阅Oracle技术网和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=OKVAG-GUID-0D169EB8-C355-459A-9ABD-325CA5B46DD0" target="_blank"><span><cite>Oracle Key Vault管理员指南中</cite></span></a>的产品页面。
                        </p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：有关</strong> <a href="frequently-asked-questions-about-transparent-data-encryption.html#GUID-45567B22-EA5D-42BC-9D7F-6161ADD6A191" title="用户经常对透明数据加密的透明度和性能问题提出疑问。">透明数据加密的常见问题</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ASOAG10544"></a><div class="props_rev_3"><a id="GUID-2A439A03-DA2A-4811-A4E4-77DA81C72DF6" name="GUID-2A439A03-DA2A-4811-A4E4-77DA81C72DF6"></a><h3 id="ASOAG-GUID-2A439A03-DA2A-4811-A4E4-77DA81C72DF6" class="sect3">关于透明数据加密的性能问题</h3>
               <div>
                  <p>使用透明数据加密时需要考虑几个性能问题。</p>
                  <ol>
                     <li>
                        <p><span class="bold">透明数据加密的典型性能开销是多少？</span></p>
                        <p>创建准确的透明数据加密性能测试涉及许多不同的变量。结果可能因测试环境，测试用例或工作负载，度量指标或方法等而异。Oracle无法保证可在所有可能方案中应用的特定性能开销百分比。实际上，许多透明数据加密客户的性能测试通常都是低百分比的百分比，但这种情况并非普遍存在。分别引用1％和2％开销的客户示例将在以下URL中的Oracle Technology Network上发布：</p>
                        <p><a href="http://streaming.oracle.com/ebn/podcasts/media/12740910_ColumbiaU_120312.mp3" target="_blank"><code class="codeph">http://streaming.oracle.com/ebn/podcasts/media/12740910_ColumbiaU_120312.mp3</code></a></p>
                        <p>如果可能，使用Oracle Real Application Testing（Oracle RAT）捕获真实的生产工作负载，然后根据透明数据加密重播它，以真实地指示您在环境中可以获得的性能开销。</p>
                        <p>也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-2B082CD7-EDDA-4705-9B61-1B1015AB287B" title="透明数据加密的性能可能会有所不同。">透明数据加密的性能和存储开销</a></p>
                           </li>
                           <li>
                              <p>有关Oracle Real Application Testing选项的更多信息，请参见<a href="../ratug/introduction-to-oracle-database-testing.html#RATUG101" target="_blank"><span><cite>Oracle数据库测试指南</cite></span></a></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="bold">如何调整以获得最佳透明数据加密性能？</span></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">TDE列加密：</span> 
                              </p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>通过仅加密严格要求保护的列子集来限制加密处理。此外，请关闭可选的完整性检查功能。</p>
                                 </li>
                                 <li>
                                    <p>应用列加密后，重建列索引。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><span class="bold">TDE表空间加密：</span> TDE表空间加密通过在SGA缓冲区高速缓存中缓存内存中的未加密数据来提高性能。此功能减少了用户运行<code class="codeph">SELECT</code>查询时必须执行的加密操作的数量，这些查询是从SGA而不是从磁盘绘制的。（从磁盘绘制强制数据库执行解密操作。）确保SGA缓冲区高速缓存的大小足以充分利用此性能优化。
                              </p>
                              <p>另一个主要的性能提升来自于使用支持基于CPU的加密加速的硬件和软件，这些加速可用于Intel AES-NI和Oracle SPARC T4 / T5。要利用此功能，您必须运行最新版本的数据库，安装最新版本的操作系统，并使用在其CPU /内核中包含加密加速电路的硬件。</p>
                              <p>数据库压缩进一步加快了透明数据加密性能，因为加密处理发生在已经压缩的数据上，导致加密和解密的总数据更少。</p>
                           </li>
                           <li>
                              <p><span class="bold">一般来说：</span> 
                              </p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>确保已应用最新的修补程序，您可以从My Oracle Support下载该修补程序</p>
                                    <p><a href="https://support.oracle.com" target="_blank"><code class="codeph">https://support.oracle.com</code></a></p>
                                 </li>
                                 <li>
                                    <p>指定加密算法时，请记住AES比3DES略快。尽可能使用AES128。请注意，性能优势很小。</p>
                                 </li>
                                 <li>
                                    <p>使用Exadata，其中包括其他性能优势。有关Oracle Exadata的更多信息，请参阅<a href="../ratug/creating-an-analysis-task.html#RATUG293" target="_blank"><span><cite>Oracle数据库测试指南</cite></span></a> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="bold">是否存在可能降低TDE性能的特定问题，如果是，我该如何避免它们？</span></p>
                        <p>如果由于旧硬件，较旧的数据库版本或较旧的操作系统等因素导致数据库无法在主机上使用基于CPU的硬件加速，则TDE表空间性能会降低。</p>
                        <p>请注意以下有关特定数据库工作负载的信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">一次加密整个数据集（例如，在将“批量数据加载”到Oracle数据仓库中时）：</span>在将新数据批量加载到数据库或数据仓库期间，已观察到较低的加密性能。无法在SGA中缓存新数据，因此绕过了TDE表空间加密性能优化。因此，透明数据加密在此类操作中没有奖励性能优势。
                              </p>
                              <p>请遵循以下准则：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>确保数据库在具有基于CPU的加密加速的服务器上运行。这不仅加速了解密操作，还加速了操作（用于加载新数据）。通过预先加密数据集然后使用可传输表空间（TTS）加载到数据库中来进行带外加密处理。尝试尽可能并行化此过程。这要求数据库实例将所需的TDE密钥复制到目标数据库上的密钥库。当存在用于加密和加载的固定时间窗口时，该过程可能是不可行的，并且这些必须连续地进行。</p>
                                 </li>
                                 <li>
                                    <p>考虑使用TDE列加密。仅加密少数敏感的受控列，而不是加密整个表空间。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><span class="bold">一次解密整个数据集（例如，通过直接从磁盘读取执行全表扫描，而不从SGA读取）：</span></p>
                              <p>运行全表扫描查询时会观察到较低的加密性能，其中数据直接从存储中读取。绕过了TDE表空间加密的某些性能优化（无缓存）。因此，透明数据加密在此类操作中没有奖励性能优势。</p>
                              <p>请遵循以下准则：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>确保数据库在具有基于CPU的加密加速的服务器上运行。</p>
                                 </li>
                                 <li>
                                    <p>使用较大的SGA大小重新测试全表扫描查询，以测量从缓存中读取数据时的性能。尝试设置Oracle事件编号10949以禁用直接路径读取。</p>
                                 </li>
                                 <li>
                                    <p>对数据库进行分区，以便通过全表扫描操作扫描较少的数据。生产数据库通常对这种情况使用分区（即限制扫描的数据总量）。</p>
                                 </li>
                                 <li>
                                    <p>考虑使用TDE列加密。仅加密少数敏感的受控列，而不是加密整个表空间。</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：有关</strong> <a href="frequently-asked-questions-about-transparent-data-encryption.html#GUID-45567B22-EA5D-42BC-9D7F-6161ADD6A191" title="用户经常对透明数据加密的透明度和性能问题提出疑问。">透明数据加密的常见问题</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Attribute dimensions reference data sources and specify attributes and levels; hierarchies organize levels hierarchically."></meta>
      <meta name="description" content="Attribute dimensions reference data sources and specify attributes and levels; hierarchies organize levels hierarchically."></meta>
      <title>属性维和层次结构对象</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Data Warehousing Guide"></meta>
      <meta property="og:description" content="Attribute dimensions reference data sources and specify attributes and levels; hierarchies organize levels hierarchically."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Data Warehousing Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-data-warehousing-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T00:20:13-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96243-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="overview-analytic-views.html" title="Previous" type="text/html"></link>
      <link rel="next" href="analytic-view-objects.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Data Warehousing Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DWHSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="overview-analytic-views.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="analytic-view-objects.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据仓库指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-analytic-views.html" property="item" typeof="WebPage"><span property="name">分析观点</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">属性维和层次结构对象</li>
            </ol>
            <a id="GUID-4A6484B8-1AFB-47B7-8AB3-311E05AC0D6E" name="GUID-4A6484B8-1AFB-47B7-8AB3-311E05AC0D6E"></a><a id="RESOURCEID-18423-7EE80FAE"></a>
            
            <h2 id="DWHSG-GUID-4A6484B8-1AFB-47B7-8AB3-311E05AC0D6E" class="sect2"><span class="enumeration_chapter">25</span>属性维和层次结构对象</h2>
         </header>
         <div class="ind">
            <div>
               <p>属性维度引用数据源并指定属性和级别;层次结构按层次结构组织层次。</p>
               <p>属性维和层次结构在以下主题中描述：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="analytic-view-attribute-dimensions.html#GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8" title="属性维度指定数据源，属性和级别;层次结构按层次结构组织层次。">关于属性维度和层次结构</a></p>
                  </li>
                  <li>
                     <p><a href="analytic-view-attribute-dimensions.html#GUID-E952822B-38BA-4317-9EBE-9175174DF264" title="属性维度属性通常引用源表或视图中的列。分层属性提供有关层次结构成员的信息。">属性和层次属性</a></p>
                  </li>
                  <li>
                     <p><a href="analytic-view-attribute-dimensions.html#GUID-1E3D0FF9-C03F-4907-B20A-19BEE9EA99FD" title="您可以指定属性维级别成员的顺序。">订单级别</a></p>
                  </li>
                  <li>
                     <p><a href="analytic-view-attribute-dimensions.html#GUID-74255279-0ED0-49EC-A393-6F97B7A66756" title="级别键属性指定级别成员的数据源。">等级键</a></p>
                  </li>
                  <li>
                     <p><a href="analytic-view-attribute-dimensions.html#GUID-5DF93D12-C776-427D-BB27-1A6270B02B2A" title="您可以指定级别的属性确定其他属性的值。">确定属性关系</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8" name="GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8"></a><h3 id="DWHSG-GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8" class="sect3"><span class="enumeration_section">25.1</span>关于属性维和层次结构</h3>
               <div>
                  <p>属性维度指定数据源，属性和级别;层次结构按层次结构组织层次。</p>
                  <p>属性维指定它正在使用的数据源，并指定该源的列作为其属性。它指定部分或全部属性的级别，并确定级别之间的属性关系。</p>
                  <p>层次结构定义属性维度的级别之间的层次关系。属性维和层次结构提供分析视图对象的维成员。</p>
                  <p>与维度和层次结构相关的大多数元数据都在属性维度中定义。层次结构继承其使用的属性维度的所有元数据。这允许在许多层次结构中重用属性和级别的元数据，从而提高一致性并简化层次结构的定义。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8__GUID-EDD2C29C-F1B1-447C-9EC6-629716249B52">关于属性维度</p>
                     <p>属性维度具有以下特征：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据源，通常是星型模式或雪花模式维度表，但可以是非规范化表，视图或外部或远程表;维度表的每列可以以层次结构呈现</p>
                        </li>
                        <li>
                           <p>尺寸类型，可以是<code class="codeph">STANDARD</code>或<code class="codeph">TIME</code></p>
                        </li>
                        <li>
                           <p>属性，是数据源中的列</p>
                        </li>
                        <li>
                           <p>级别，表示全部处于相同聚合级别的值组</p>
                        </li>
                        <li>
                           <p>层次结构属性，层次结构用于描述层次之间的层次关系</p>
                        </li>
                        <li>
                           <p>仅具有一个成员的隐式ALL级别，这是使用属性维度的任何层次结构中的最高级别</p>
                        </li>
                        <li>
                           <p>可以由任意数量的层次结构使用</p>
                        </li>
                     </ul>
                     <p>属性维度还具有以下可选特征：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>可以指定与应用程序容器共享其元数据或其元数据和数据</p>
                        </li>
                        <li>
                           <p>可以指定级别成员的顺序</p>
                        </li>
                        <li>
                           <p>可以为属性维度本身，其属性，某些层次结构属性，其级别和ALL成员指定分类;分类提供应用程序可以在查询和呈现查询结果中使用的元数据</p>
                        </li>
                     </ul>
                     <p>由包含的级别确定的属性指定在层次结构中成为列的属性，因此指定引用层次结构的任何分析视图的属性。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8__GUID-5BEC3865-A9D3-471B-9279-07E12B32C38E">关于属性维度和级别类型</p>
                     <p>属性维度可以是<code class="codeph">STANDARD</code>或<code class="codeph">TIME</code>类型。在功能上， <code class="codeph">STANDARD</code>和<code class="codeph">TIME</code>类型的属性尺寸是相同的。但是， <code class="codeph">TIME</code>类型属性维的每个级别都必须指定级别类型，即使级别成员的值不一定是该类型的值。例如， <code class="codeph">TIME</code>类型属性维度可以具有名为SEASON的级别，其级别类型为<code class="codeph">QUARTERS</code> ，即使其值是季节的名称。您可以将级别类型用于您选择的任何目的。
                     </p>
                     <p>一个水平<code class="codeph">STANDARD</code>类型属性维的类型的<code class="codeph">STANDARD</code> 。您无需为<code class="codeph">STANDARD</code>类型属性维度的级别指定级别类型。
                     </p>
                     <p><code class="codeph">TIME</code>类型属性维的级别必须是以下级别类型之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">年份</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">HALF_YEARS</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">宿舍</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">个月</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">WEEKS</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">天</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">小时</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">分钟</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">SECONDS</code></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8__GUID-BB7B9255-98D2-4F74-BC7E-296DE0062DBB">关于层次结构</p>
                     <p>层次结构具有以下特征：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>属性维度</p>
                        </li>
                        <li>
                           <p>属性维度级别的层次排序</p>
                        </li>
                        <li>
                           <p>级别的每个属性的列，包括已确定的属性</p>
                        </li>
                        <li>
                           <p>其分层属性的列</p>
                        </li>
                        <li>
                           <p>层次结构的每个级别的每个成员的行和隐式ALL级别的行，表示单个顶级聚合值</p>
                        </li>
                        <li>
                           <p>它从属性维继承的元数据</p>
                        </li>
                        <li>
                           <p>可以在SQL <code class="codeph">SELECT</code>语句的<code class="codeph">FROM</code>子句中使用。
                           </p>
                        </li>
                     </ul>
                     <p>层次结构还具有以下可选特征：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>可以指定与应用程序容器共享其元数据或其元数据和数据</p>
                        </li>
                        <li>
                           <p>可以为自身及其分层属性指定分类</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8__GUID-D604D21B-F11E-446C-A672-1FAD1BF598D5">
                     <p class="titleinexample">例25-1简单属性维</p>
                     <p>属性维度可以与仅使用键属性定义的属性和级别列表一样简单。此示例创建一个属性维度，该属性维度仅指定TIME_DIM表中的YEAR_ID，QUARTER_ID和MONTH_ID列作为属性。</p><pre class="pre codeblock"><code>创建或替换属性维度time_attr_dim维度类型时间使用time_dim  - 引用TIME_DIM表属性 - 要用作属性的表列列表（year_id，quarter_id，month_id）等级月 - 级别等级月份 - 级别类型KEY month_id  - 具有唯一值的属性LEVEL QUARTER LEVEL TYPE QUARTERS KEY quarter_id LEVEL年级类型年份关键年份_id;</code></pre><p>有关TIME_DIM表的说明，请参阅<a href="overview-analytic-views.html#GUID-F049EEFA-F931-433F-A678-793493DF650E" title="示例使用的数据包括单个事实表中的销售数据和包含时间段，产品和地理位置的三个维度表。">关于示例的数据和脚本</a> 。
                     </p>
                     <p>TIME_DIM表中的每个_ID列都包含在属性列表中。默认情况下，属性的名称是维度表列名称。您可以使用定义中的<code class="codeph">AS</code> <code class="codeph"><span class="codeinlineitalic">alias</span></code>子句为属性提供其他名称。
                     </p>
                     <p>使用<code class="codeph">KEY</code>属性为每个属性创建级别，该属性是级别唯一必需的属性。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8__GUID-D1936658-555F-4DF9-A6B9-633E8877230D">
                     <p class="titleinexample">例25-2简单层次结构</p><pre class="pre codeblock"><code>创建或替换HIERARCHY time_hier  - 层次结构名称USING time_attr_dim  - 引用TIME_ATTR_DIM属性维度（月份CHILD OF  - 属性维度季度CHILD OF year中的级别）;</code></pre><p>层次结构具有属性维度的每个属性及其层次结构属性的列。</p><pre class="pre codeblock"><code>从ALL_HIER_COLUMNS WHERE HIER_NAME ='TIME_HIER'中选择column_name;</code></pre><img src="img/time_hier_columns.png" alt="time_hier_columns.png的描述如下" title="time_hier_columns.png的描述如下" longdesc="img_text/time_hier_columns.html"><br><a href="img_text/time_hier_columns.html">插图描述time_hier_columns.png</a><p>当TIME_ATTR_DIM是<a href="analytic-view-attribute-dimensions.html#GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8__GUID-D604D21B-F11E-446C-A672-1FAD1BF598D5">例25-1中</a>定义的属性维度时，以下选择TIME_HIER中的属性列和一些分层列。
                     </p><pre class="pre codeblock"><code>SELECT year_id，quarter_id，month_id，member_name，member_unique_name member_caption，member_description FROM time_hier ORDER BY hier_order;</code></pre><p>查询结果的摘录如下：</p><img src="img/time_hier_col_subset.png" alt="time_hier_col_subset.png的描述如下" title="time_hier_col_subset.png的描述如下" longdesc="img_text/time_hier_col_subset.html"><br><a href="img_text/time_hier_col_subset.html">插图描述time_hier_col_subset.png</a></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-E952822B-38BA-4317-9EBE-9175174DF264" name="GUID-E952822B-38BA-4317-9EBE-9175174DF264"></a><h3 id="DWHSG-GUID-E952822B-38BA-4317-9EBE-9175174DF264" class="sect3"><span class="enumeration_section">25.2</span>属性和层次属性</h3>
               <div>
                  <p>属性维度属性通常引用源表或视图中的列。分层属性提供有关层次结构成员的信息。</p>
                  <p>在属性维度中，属性指定要引用的源表或视图的列。该属性的默认名称是表列的名称。您可以使用类似于SQL <code class="codeph">SELECT</code>子句别名的语法为属性提供不同的名称。您可以使用属性定义级别，并使用级别定义属性之间的关系。属性在层次结构中显示为列，具体取决于层次结构包含的级别以及级别的已定义属性关系。
                  </p>
                  <p>分层属性如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">DEPTH</code>是层次结构成员的级别深度; ALL级别为深度0（零）</p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_ORDER</code>是层次结构中成员的顺序</p>
                     </li>
                     <li>
                        <p><code class="codeph">IS_LEAF</code>是一个布尔值，指示成员是否处于层次结构的最低（叶）级别</p>
                     </li>
                     <li>
                        <p><code class="codeph">LEVEL_NAME</code>是属性维度定义中的级别名称</p>
                     </li>
                     <li>
                        <p><code class="codeph">MEMBER_NAME</code>是属性维度定义中成员的名称</p>
                     </li>
                     <li>
                        <p>除非在属性维度或层次结构的定义中为其指定值，否则<code class="codeph">MEMBER_CAPTION</code>为<code class="codeph">NULL</code></p>
                     </li>
                     <li>
                        <p>除非在属性维度或层次结构的定义中为其指定值，否则<code class="codeph">MEMBER_DESCRIPTION</code>为<code class="codeph">NULL</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">MEMBER_UNIQUE_NAME</code>是一个保证在层次结构中唯一的名称;它是级别名称，祖先和键属性值的串联</p>
                     </li>
                     <li>
                        <p><code class="codeph">PARENT_LEVEL_NAME</code>是当前成员的父级别的名称</p>
                     </li>
                     <li>
                        <p><code class="codeph">PARENT_UNIQUE_NAME</code>是当前成员的父级的<code class="codeph">MEMBER_UNIQUE_NAME</code></p>
                     </li>
                  </ul>
                  <p>层次属性值由级别和谱系组成。血统包括成员的关键值。沿袭的每个组成部分都用方括号括起来，组成部分用句号分隔。如果组件值包含右方括号，则使用右方括号表示。</p>
                  <div class="example" id="GUID-E952822B-38BA-4317-9EBE-9175174DF264__GUID-7BCD3B8C-F011-4729-89AF-FA8470D482FA">
                     <p class="titleinexample">示例25-3为某些层次结构属性提供值</p>
                     <p>这是基于<a href="analytic-view-attribute-dimensions.html#GUID-97E6B9F7-451A-42B6-8E21-329B09E7CCF8" title="属性维度指定数据源，属性和级别;层次结构按层次结构组织层次。">关于属性维度和层次结构中</a>的简单属性维度的层次结构查询结果的摘录。
                     </p><img src="img/time_hier_col_subset.png" alt="time_hier_col_subset.png的描述如下" title="time_hier_col_subset.png的描述如下" longdesc="img_text/time_hier_col_subset.html"><br><a href="img_text/time_hier_col_subset.html">插图描述time_hier_col_subset.png</a><p>虽然这种层次结构是功能性的，但它缺乏一些重要的功能。请注意，MEMBER_NAME列可能不易读取，MEMBER_CAPTION和MEMBER_DESCRIPTION列不会返回数据。</p>
                     <p>time_attr_dim属性维度的这个新定义包括TIME_DIM表中的_NAME列。在级别的定义中，它指定包含层次属性<code class="codeph">MEMBER_NAME</code> ， <code class="codeph">MEMBER_CAPTION</code>和<code class="codeph">MEMBER_DESCRIPTION</code>值的属性。此定义提供了一个层次结构，该层次结构使用属性维度和级别成员的描述性值。
                     </p><pre class="pre codeblock"><code>创建或替换属性维度time_attr_dim维度类型时间使用time_dim属性（year_id，year_name，quarter_id，quarter_name，month_id，month_name，month_long_name）级别月份级别月份关键月份_id成员名称month_name成员标题month_name成员说明month_long_name级别季度级别季度关键quarter_id成员名称quarter_name成员CAPTION quarter_name成员说明quarter_name年级级别年份关键年份_id成员名称年份名称成员姓名年份名称成员说明年份名称;</code></pre><p>此语句选择TIME_HIER层次结构中的属性列和一些分层列。</p><pre class="pre codeblock"><code>SELECT year_id，quarter_id，month_id，member_name，member_unique_name，member_caption，member_description FROM time_hier ORDER BY hier_order;</code></pre><p>查询结果的摘录如下：</p><img src="img/time_hier_col_subset_hier_attrs.png" alt="time_hier_col_subset_hier_attrs.png的描述如下" title="time_hier_col_subset_hier_attrs.png的描述如下" longdesc="img_text/time_hier_col_subset_hier_attrs.html"><br><a href="img_text/time_hier_col_subset_hier_attrs.html">插图描述time_hier_col_subset_hier_attrs.png</a><p>对于报告时间序列计算，时间顺序的排序尚不正确;例如，二月在一月之前。有关指定级别的排序顺序的示例，请参阅<a href="analytic-view-attribute-dimensions.html#GUID-1E3D0FF9-C03F-4907-B20A-19BEE9EA99FD" title="您可以指定属性维级别成员的顺序。">订单级别</a> 。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-1E3D0FF9-C03F-4907-B20A-19BEE9EA99FD" name="GUID-1E3D0FF9-C03F-4907-B20A-19BEE9EA99FD"></a><h3 id="DWHSG-GUID-1E3D0FF9-C03F-4907-B20A-19BEE9EA99FD" class="sect3"><span class="enumeration_section">25.3</span>订单级别</h3>
               <div>
                  <p>您可以指定属性维级别成员的顺序。</p>
                  <p>您可以使用属性维度级别定义的<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句来指定级别成员的顺序。默认情况下，属性维度级别的值按<code class="codeph">MEMBER_NAME</code>值按字母顺序排序。如果未指定成员名称，则级别按其<code class="codeph">KEY</code>属性值排序。
                  </p>
                  <p><code class="codeph">ORDER</code> <code class="codeph">BY</code>子句还指定<code class="codeph">NULL</code>值是顺序中的第一个还是最后一个。如果属性不是由级别确定，则可以指定<code class="codeph">MIN</code>或<code class="codeph">MAX</code> <span class="italic">表达式</span> ，默认值为<code class="codeph">MIN</code> 。</p>
                  <div class="example" id="GUID-1E3D0FF9-C03F-4907-B20A-19BEE9EA99FD__GUID-379519DD-35EC-4C49-90CB-BD5278852153">
                     <p class="titleinexample">示例25-4添加结束日期</p>
                     <p>此示例将结束日期属性添加到time_attr_dim属性维度的定义中。</p><pre class="pre codeblock"><code>创建或替换属性维度time_attr_dim维度类型时间使用time_dim属性（year_id，year_name，year_end_date，quarter_id，quarter_name，quarter_end_date，month_id，quarter_name，month_long_date，date_id，month_id，month_end_date）等级月份密钥month_id成员名称month_name成员字符month_name成员说明month_long_name ORDER BY month_end_date LEVEL QUARTER KEY quarter_id成员名称quarter_name成员标题quarter_name成员说明quarter_name ORDER BY quarter_end_date等级年份关键年份_id成员名称年份名称成员姓名年份名称成员说明年份名称ORDER BY year_end_date;</code></pre><p>这是time_hier层次结构的定义。</p><pre class="pre codeblock"><code>使用time_attr_dim创建或替换HIERARCHY time_hier（每年季度儿童的月份）;</code></pre><p>此查询包括层次结构顺序属性。</p><pre class="pre codeblock"><code>SELECT year_id，quarter_id，month_id，member_name，hier_order FROM time_hier ORDER BY hier_order;</code></pre><p>这是查询结果的摘录。</p><img src="img/time_hier_col_subset_orderby.png" alt="time_hier_col_subset_orderby.png的描述如下" title="time_hier_col_subset_orderby.png的描述如下" longdesc="img_text/time_hier_col_subset_orderby.html"><br><a href="img_text/time_hier_col_subset_orderby.html">插图描述time_hier_col_subset_orderby.png</a><p>级别成员现在按结束日期排序。</p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-74255279-0ED0-49EC-A393-6F97B7A66756" name="GUID-74255279-0ED0-49EC-A393-6F97B7A66756"></a><h3 id="DWHSG-GUID-74255279-0ED0-49EC-A393-6F97B7A66756" class="sect3"><span class="enumeration_section">25.4</span>级别密钥</h3>
               <div>
                  <p>级别键属性指定级别成员的数据源。</p>
                  <p>属性维度级别指定提供级别成员的键和可选备用键属性。</p>
                  <p>级别必须具有键，该键由单个属性定义，或者由复合键的多个属性定义。键的每个不同值定义该级别的属性维度成员。</p>
                  <p>级别还可以具有一个或多个备用键。备用密钥必须与级别密钥具有一对一的关系：指定为备用密钥的属性必须具有级别密钥属性的每个成员的唯一值。</p>
                  <div class="example" id="GUID-74255279-0ED0-49EC-A393-6F97B7A66756__GUID-AF379B8B-1C60-4EDD-8D6D-76FC861A9741">
                     <p class="titleinexample">示例25-5创建PRODUCT_ATTR_DIM属性维</p>
                     <p>此示例创建product_attr_dim属性维度。level子句指定键和备用键。</p><pre class="pre codeblock"><code>创建或替换属性维度product_attr_dim使用product_dim属性（department_id，department_name，category_id，category_name）级别部门密钥department_id备用密钥department_name成员名称department_name成员标题department_name ORDER BY department_name级别类别键category_id备用密钥category_name成员名称category_name成员标题category_name ORDER BY category_name确定（department_id）所有会员名称'所有产品';</code></pre></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-5DF93D12-C776-427D-BB27-1A6270B02B2A" name="GUID-5DF93D12-C776-427D-BB27-1A6270B02B2A"></a><h3 id="DWHSG-GUID-5DF93D12-C776-427D-BB27-1A6270B02B2A" class="sect3"><span class="enumeration_section">25.5</span>确定属性关系</h3>
               <div>
                  <p>您可以指定级别的属性确定其他属性的值。</p>
                  <p>您可以使用属性维度级别定义的<code class="codeph">DETERMINES</code>子句来指定级别键属性与其他属性之间的关系。当另一个属性的每个值只有一个属性值时，一个属性的值<span class="italic">确定</span>另一个属性的值。例如，MONTH_ID的每个值只有一个QUARTER_ID值; MONTH_ID确定QUARTER_ID。</p>
                  <p>由级别确定的属性包含在使用属性维度的层次结构中。在<code class="codeph">DETERMINES</code>子句中指定的属性对于不同的级别成员可以具有相同的值。级别隐式确定其键和备用键属性，但与<code class="codeph">DETERMINES</code>子句中的属性不同，这些属性必须具有唯一值。
                  </p>
                  <p><code class="codeph">DETERMINES</code>子句指定的关系可以执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>更改层次结构返回的行数</p>
                     </li>
                     <li>
                        <p>控制某些属性是否返回某些行的数据</p>
                     </li>
                     <li>
                        <p>简化查询分析视图时生成的SQL</p>
                     </li>
                  </ul>
                  <p>指定确定的属性有助于层次结构或分析视图确定成员的唯一值。如果属性由级别确定，则无需在查询中明确指定标识所确定的属性与层次结构成员的关系的属性值。例如， <code class="codeph">QUALIFY</code>计算需要唯一标识的层次结构成员。如果省略<code class="codeph">DETERMINES</code>子句中的属性，则在使用<code class="codeph">QUALIFY</code>计算的分析视图度量中，必须显式指定这些属性以标识唯一成员。
                  </p>
                  <p>确定的属性与密钥和备用密钥属性的关系不会在属性维度或使用属性维度的层次结构中得到验证或强制执行。要验证关系，请使用PL / SQL过程<code class="codeph">DBMS_HIERARCHY.VALIDATE_HIERARCHY</code> ，它检查源表或视图中的数据。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-5DF93D12-C776-427D-BB27-1A6270B02B2A__GUID-A4A8D806-1407-4C6C-8F0E-BCB35678BBA3">使用说明</p>
                     <p>使用<code class="codeph">DETERMINES</code>子句时，请考虑以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>每当较低级别的键确定父级别的值时，在层次结构中包含父级别的<code class="codeph">KEY</code>属性的<code class="codeph">DETERMINES</code>子句。较低级别继承祖先级别的确定属性;因此，最好在较低级别的<code class="codeph">DETERMINES</code>子句中包含父级别的键属性值。
                           </p>
                        </li>
                        <li>
                           <p>假定<code class="codeph">MEMBER</code> <code class="codeph">NAME</code> ， <code class="codeph">MEMBER</code> <code class="codeph">CAPTION</code> ， <code class="codeph">MEMBER</code> <code class="codeph">DESCRIPTION</code>和<code class="codeph">ORDER</code> <code class="codeph">BY</code>属性的值由<code class="codeph">KEY</code>属性值确定。您不需要在<code class="codeph">DETERMINES</code>子句中包含这些属性的属性。但是，您应该确定这些属性的数据对于<code class="codeph">KEY</code>属性的每个值只有一个值。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-5DF93D12-C776-427D-BB27-1A6270B02B2A__GUID-7B160279-E98F-4DA1-B490-B4F3B91738CC">
                     <p class="titleinexample">例25-6添加DETERMINES子句</p>
                     <p>此示例将<code class="codeph">DETERMINES</code>子句添加到time_attr_dim的级别。
                     </p><pre class="pre codeblock"><code>创建或替换属性维度time_attr_dim维度类型时间使用time_dim属性（year_id，year_name，year_end_date，quarter_id，quarter_name，quarter_end_date，quarter_id，quarter_name，month_long_date，month_id，month_name，month_long_name，month_end_date）级别月级别类型月份关键month_id成员名称month_name成员字符month_name成员说明month_long_name订单BY month_end_date确定（quarter_id）级别季度级别季度关键字quarter_id成员名称quarter_name成员标题quarter_name成员说明quarter_name ORDER BY quarter_end_date确定（year_id）级别年级类型年份关键年份_id成员名称年份名称成员资格年份名称成员说明年份名称ORDER BY year_end_date;</code></pre><p>从TIME_HIER层次结构中选择LEVEL_NAME，_ID和MEMBER_UNIQUE_NAME列。</p><pre class="pre codeblock"><code>SELECT level_name，year_id，quarter_id，month_id，member_unique_name FROM time_hier ORDER BY hier_order;</code></pre><p>层次结构现在知道月份，季度和年份属性之间的关系，如前面查询的以下结果所示。现在仅从级别名称和<code class="codeph">KEY</code>属性值创建<code class="codeph">MEMBER_UNIQUE_NAME</code>值;他们不再必须包括如<a href="analytic-view-attribute-dimensions.html#GUID-E952822B-38BA-4317-9EBE-9175174DF264__GUID-7BCD3B8C-F011-4729-89AF-FA8470D482FA">例25-3中</a>所示的完整血统。
                     </p><img src="img/time_hier_col_subset_determines.png" alt="time_hier_col_subset_determines.png的描述如下" title="time_hier_col_subset_determines.png的描述如下" longdesc="img_text/time_hier_col_subset_determines.html"><br><a href="img_text/time_hier_col_subset_determines.html">插图描述time_hier_col_subset_determines.png</a></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
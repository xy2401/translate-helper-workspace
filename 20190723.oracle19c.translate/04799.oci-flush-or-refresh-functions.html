<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Lists and describes OCI flush or refresh functions."></meta>
      <meta name="description" content="Lists and describes OCI flush or refresh functions."></meta>
      <title>OCI刷新或刷新功能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="Lists and describes OCI flush or refresh functions."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="intro-to-navigational-and-type-functions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oci-mark-or-unmark-object-cache-functions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="intro-to-navigational-and-type-functions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oci-mark-or-unmark-object-cache-functions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oci-navigational-and-type-functions.html" property="item" typeof="WebPage"><span property="name">OCI导航和类型功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">OCI刷新或刷新功能</li>
            </ol>
            <a id="GUID-C53CECCE-A6AA-433F-8EC7-419BA3503EB2" name="GUID-C53CECCE-A6AA-433F-8EC7-419BA3503EB2"></a><a id="LNOCI17317"></a><a id="LNOCI171"></a>
            
            <h2 id="LNOCI-GUID-C53CECCE-A6AA-433F-8EC7-419BA3503EB2" class="sect2"><span class="enumeration_section">27.2</span> OCI刷新或刷新功能</h2>
         </header>
         <div class="ind">
            <div>
               <p>列出并描述OCI刷新或刷新功能。</p>
               <div class="section">
                  <p><a href="oci-flush-or-refresh-functions.html#GUID-C53CECCE-A6AA-433F-8EC7-419BA3503EB2__CACEIBCE" title="该表有2列。第1列是函数名称，第2列描述其用途。">表27-4</a>说明了本节中描述的OCI刷新或刷新功能。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-C53CECCE-A6AA-433F-8EC7-419BA3503EB2__CACEIBCE">
                  <p class="titleintable">表27-4刷新或刷新功能</p>
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="刷新或刷新功能" width="100%" border="1" summary="This table has 2 columns. Column 1 is the function name and column 2 describes its purpose." frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="56%" id="d239589e201">功能</th>
                           <th align="left" valign="bottom" width="44%" id="d239589e204">目的</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="56%" id="d239589e209" headers="d239589e201 ">
                              <p><a href="oci-flush-or-refresh-functions.html#GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E" title="将已修改的持久对象刷新到服务器。">OCICacheFlush（）</a></p>
                           </td>
                           <td align="left" valign="top" width="44%" headers="d239589e209 d239589e204 ">
                              <p>将缓存中已修改的持久对象刷新到服务器</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="56%" id="d239589e221" headers="d239589e201 ">
                              <p><a href="oci-flush-or-refresh-functions.html#GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F" title="刷新缓存中的所有固定持久对象。">OCICacheRefresh（）</a></p>
                           </td>
                           <td align="left" valign="top" width="44%" headers="d239589e221 d239589e204 ">
                              <p>刷新固定的持久对象</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="56%" id="d239589e233" headers="d239589e201 ">
                              <p><a href="oci-flush-or-refresh-functions.html#GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301" title="将修改后的持久对象刷新到服务器。">OCIObjectFlush（）</a></p>
                           </td>
                           <td align="left" valign="top" width="44%" headers="d239589e233 d239589e204 ">
                              <p>将修改后的持久对象刷新到服务器</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="56%" id="d239589e245" headers="d239589e201 ">
                              <p><a href="oci-flush-or-refresh-functions.html#GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C" title="刷新最新数据库快照中的持久对象。">OCIObjectRefresh（）</a></p>
                           </td>
                           <td align="left" valign="top" width="44%" headers="d239589e245 d239589e204 ">
                              <p>刷新持久对象</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
            </div><a id="LNOCI17318"></a><div class="props_rev_3"><a id="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E" name="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E"></a><h3 id="LNOCI-GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E" class="sect3"><span class="enumeration_section">27.2.1</span> OCICacheFlush（）</h3>
               <div>
                  <p>将已修改的持久对象刷新到服务器。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-3B961491-D320-4B5A-B4A6-56E7A86826A2">目的</p>
                     <p>将已修改的持久对象刷新到服务器。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-823CBFBB-D499-421F-A2FC-63EAFF410355">句法</p><pre class="oac_no_warn" dir="ltr">sword OCICacheFlush（OCIEnv * env，OCIError * err，const OCISvcCtx * svc，void * context，OCIRef *（* get）（void * context，ub1 * last），OCIRef ** ref）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-217ED454-3937-46AE-8FA7-6275B6F1909A">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-2A4881BE-EF77-4CD9-9D98-A0C0D2FF6CD7"><!-- --></a> env（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境句柄在对象模式下初始化。有关详细信息，请参阅<code class="codeph">OCIEnvNlsCreate()</code> ， <code class="codeph">OCIEnvCreate()</code>和<code class="codeph">OCIInitialize()</code> （不建议使用）的说明。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-B3481F88-A9D2-47AE-87C8-1B81086AB528"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-1619436A-4B25-4B50-9FB0-E5938905B736"><!-- --></a> svc（IN）</dt>
                        <dd>
                           <p>OCI服务上下文。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-14B0BAB5-05AC-4F8F-89B2-76C1F5987935"><!-- --></a>上下文（IN）[可选]</dt>
                        <dd>
                           <p>指定用户上下文，该用户上下文是客户端回调函数<code class="codeph">get</code>的参数。如果没有用户上下文，则此参数设置为<code class="codeph">NULL</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-4E82E1BF-235E-42DC-B837-41879FBD0A47"><!-- --></a> get（IN）[可选]</dt>
                        <dd>
                           <p>客户端定义的函数，用作迭代器以检索需要刷新的一批脏对象。如果函数不为<code class="codeph">NULL</code> ，则调用此函数以获取脏对象的引用。重复此过程，直到客户端函数返回<code class="codeph">NULL</code>引用或参数<code class="codeph">last</code>设置为<code class="codeph">TRUE</code> 。对于客户端函数的每次调用，参数<code class="codeph">context</code>都传递给<code class="codeph">get()</code> 。如果未给出用户回调，则此参数应为<code class="codeph">NULL</code> 。如果客户端函数返回的对象不是脏的持久对象，则忽略该对象。
                           </p>
                           <p>必须使用相同的服务上下文来新建或固定从客户端函数返回的所有对象;否则，发出错误信号。请注意，缓存按照标记为脏的顺序刷新返回的对象。</p>
                           <p>如果此参数作为<code class="codeph">NULL</code>传递（例如，未提供客户端定义的函数），则给定服务上下文的所有脏持久对象将按其被弄脏的顺序刷新。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-5AE6C1F9-00E9-436B-9474-A6F37FE16800"><!-- --></a> ref（OUT）[可选]</dt>
                        <dd>
                           <p>如果刷新对象时出错，（ <code class="codeph">*ref</code> ）指向导致错误的对象。如果<code class="codeph">ref</code>为<code class="codeph">NULL</code> ，则不返回该对象。如果<code class="codeph">*ref</code>为<code class="codeph">NULL</code> ，则分配引用并设置为指向该对象。如果<code class="codeph">*ref</code>不为<code class="codeph">NULL</code> ，则将对象的引用复制到给定空间中。如果错误不是由任何脏对象引起的，则给定的<code class="codeph">REF</code>被初始化为<code class="codeph">NULL</code>引用（ <code class="codeph">OCIRefIsNull(*ref</code> ）为<code class="codeph">TRUE</code> ）。
                           </p>
                           <p><code class="codeph">REF</code>被分配用于会话持续时间（ <code class="codeph">OCI_DURATION_SESSION</code> ）。应用程序可以使用<code class="codeph">OCIObjectFree()</code>函数释放分配的<code class="codeph">REF</code> 。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-FDBF5830-2448-4793-8173-1FE278BBCB41">评论</p>
                     <p>此函数将已修改的持久对象从对象缓存刷新到服务器。对象按照新的顺序刷新或标记为已更新或标记为已删除。</p>
                     <div class="infoboxnotealso" id="GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E__GUID-3A87B146-A12C-43C4-A79B-A28381F27E6C">
                        <p class="notep1">也可以看看：</p>
                        <p><code class="codeph">OCIObjectFlush（）</code></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>该功能最多只能进行一次网络往返。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oci-flush-or-refresh-functions.html#GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301" title="将修改后的持久对象刷新到服务器。">OCIObjectFlush（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="创建并初始化OCI函数的环境句柄。">OCIEnvCreate（）</a></li>
                        <li><a href="deprecated-oci-functions.html#GUID-F50356A8-450D-4A96-8AB5-5726502766B2" title="在Oracle Database 11g第2版（11.2）之前的版本中不推荐使用此功能。">OCIInitialize（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17319"></a><div class="props_rev_3"><a id="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F" name="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F"></a><h3 id="LNOCI-GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F" class="sect3"><span class="enumeration_section">27.2.2</span> OCICacheRefresh（）</h3>
               <div>
                  <p>刷新缓存中的所有固定持久对象。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-33D56E40-2701-4C6B-BDAE-B72D39D63AF5">目的</p>
                     <p>刷新缓存中的所有固定持久对象。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-988D2B77-C537-4E6E-8145-1A3B45CE9739">句法</p><pre class="oac_no_warn" dir="ltr">sword OCICacheRefresh（OCIEnv * env，OCIError * err，const OCISvcCtx * svc，OCIRefreshOpt选项，void * context，OCIRef *（* get）（void * context），OCIRef ** ref）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-D52A27B0-32BD-424B-AB24-DE2CCE16F95C">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-352A2B5D-4D2E-4F22-A045-5F80964870CB"><!-- --></a> env（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境句柄在对象模式下初始化。有关详细信息，请参阅<code class="codeph">OCIEnvNlsCreate()</code> ， <code class="codeph">OCIEnvCreate()</code>和<code class="codeph">OCIInitialize()</code> （不建议使用）的说明。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-3A875E73-C831-4D32-A8A5-A2EA738F1A02"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-07B5C2FA-9333-4DA6-8475-78AB45436690"><!-- --></a> svc（IN）</dt>
                        <dd>
                           <p>OCI服务上下文。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-79399133-2E32-4CA3-B67B-8ECF7EA818AF"><!-- --></a>选项（IN）[可选]</dt>
                        <dd>
                           <p>如果指定了<code class="codeph">OCI_REFRESH_LOADED</code> ，则刷新在事务中加载的所有对象。如果选项为<code class="codeph">OCI_REFRESH_LOADED</code>且参数<code class="codeph">get</code>不为<code class="codeph">NULL</code> ，则此函数将忽略该参数。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-B15246C4-47B5-4615-A288-CC8A775737A5"><!-- --></a>上下文（IN）[可选]</dt>
                        <dd>
                           <p>指定用户上下文，该用户上下文是客户端回调函数<code class="codeph">get</code>的参数。如果没有用户上下文，则此参数设置为<code class="codeph">NULL</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-D5D245FF-CEF1-405A-BBE5-22CC58ABBD7F"><!-- --></a> get（IN）[可选]</dt>
                        <dd>
                           <p>客户端定义的函数，充当迭代器以检索需要刷新的一批对象。如果函数不为<code class="codeph">NULL</code> ，则调用此函数以获取对象的引用。如果引用不为<code class="codeph">NULL</code> ，则刷新对象。重复这些步骤，直到此函数返回<code class="codeph">NULL</code>引用。对于客户端函数的每次调用，参数<code class="codeph">context</code>都传递给<code class="codeph">get()</code> 。如果未给出用户回调，则此参数应为<code class="codeph">NULL</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-6467F1AF-E88F-4DEB-938C-3532A4763791"><!-- --></a>参考（OUT）[可选]</dt>
                        <dd>
                           <p>如果刷新对象时出错，（ <code class="codeph">*ref</code> ）指向导致错误的对象。如果<code class="codeph">ref</code>为<code class="codeph">NULL</code> ，则不返回该对象。如果<code class="codeph">*ref</code>为<code class="codeph">NULL</code> ，则分配引用并设置为指向该对象。如果<code class="codeph">*ref</code>不为<code class="codeph">NULL</code> ，则将对象的引用复制到给定空间中。如果错误不是由任何对象引起的，则给定的<code class="codeph">ref</code>被初始化为<code class="codeph">NULL</code>引用（ <code class="codeph">OCIRefIsNull(*ref</code> ）为<code class="codeph">TRUE</code> ）。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-D85A32EC-F587-4467-8218-03D1F3E12AFD">评论</p>
                     <p>此函数刷新所有固定的持久对象，并从对象缓存中释放所有未固定的持久对象。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F__GUID-B3C21F2D-30B7-4DCF-AA2E-4D77164D3590">
                        <p class="notep1">注意：</p>
                        <p>刷新对象时，这些对象的二级存储器可能会移动到内存中的不同位置。因此，在此调用之前保存的属性的任何指针都可能无效。使用二级存储器的属性示例包括<code class="codeph">OCIString *</code> ， <code class="codeph">OCIColl *</code>和<code class="codeph">OCIRaw *</code> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oci-flush-or-refresh-functions.html#GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C" title="刷新最新数据库快照中的持久对象。">OCIObjectRefresh（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="创建并初始化OCI函数的环境句柄。">OCIEnvCreate（）</a></li>
                        <li><a href="deprecated-oci-functions.html#GUID-F50356A8-450D-4A96-8AB5-5726502766B2" title="在Oracle Database 11g第2版（11.2）之前的版本中不推荐使用此功能。">OCIInitialize（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                        <li><a href="object-advanced-topics-in-oci.html#GUID-4FC980A1-942B-4CE8-B3B7-BFD72C44FB42" title="刷新时，将使用服务器中相应对象的最新值重新加载对象副本。">关于刷新对象副本</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17320"></a><div class="props_rev_3"><a id="GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301" name="GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301"></a><h3 id="LNOCI-GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301" class="sect3"><span class="enumeration_section">27.2.3</span> OCIObjectFlush（）</h3>
               <div>
                  <p>将修改后的持久对象刷新到服务器。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301__GUID-326785AA-4651-4091-BF31-2E42576C8623">目的</p>
                     <p>将修改后的持久对象刷新到服务器。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301__GUID-5250A8F7-3501-433B-A43D-263D84274741">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIObjectFlush（OCIEnv * env，OCIError * err，void * object）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301__GUID-AAA01752-C53A-4B67-973A-BCCBADE1E223">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301__GUID-7D58A041-D1EF-4132-9848-5AECB2C5E326"><!-- --></a> env（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境句柄在对象模式下初始化。有关详细信息，请参阅<code class="codeph">OCIEnvNlsCreate()</code> ， <code class="codeph">OCIEnvCreate()</code>和<code class="codeph">OCIInitialize()</code> （不建议使用）的说明。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301__GUID-6DBC5260-F610-4031-8C3A-4089FF5F88AD"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301__GUID-B8C3508C-E3EA-4CC7-8D11-4B4613EB045E"><!-- --></a>对象（IN）</dt>
                        <dd>
                           <p>指向持久对象的指针。在此调用之前必须固定该对象。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301__GUID-F7F21C30-7BBD-4154-A385-7B609280BE38">评论</p>
                     <p>此函数将修改后的持久对象刷新到服务器。在刷新对象时隐式获取独占锁。当此函数将对象写入服务器时，可能会触发触发器。此函数返回瞬态对象和值以及未修改的持久对象的错误。</p>
                     <p>可以通过服务器上的触发器修改对象。为了使缓存中的对象与数据库保持一致，应用程序可以释放或刷新缓存中的对象。</p>
                     <p>如果要刷新的对象包含内部LOB属性并且由于<code class="codeph">OCIObjectCopy()</code> ， <code class="codeph">OCILobAssign()</code>或<code class="codeph">OCILobLocatorAssign()</code>操作或通过<code class="codeph">OCILobLocatorAssign()</code>分配另一个LOB定位符而修改了LOB属性，则flush会生成LOB的副本在分配或复制内部LOB定位器或对象时存在于源LOB中的值。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oci-pin-unpin-and-free-functions.html#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="引脚可引用对象。">OCIObjectPin（）</a></li>
                        <li><a href="oci-flush-or-refresh-functions.html#GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E" title="将已修改的持久对象刷新到服务器。">OCICacheFlush（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="创建并初始化OCI函数的环境句柄。">OCIEnvCreate（）</a></li>
                        <li><a href="deprecated-oci-functions.html#GUID-F50356A8-450D-4A96-8AB5-5726502766B2" title="在Oracle Database 11g第2版（11.2）之前的版本中不推荐使用此功能。">OCIInitialize（）</a></li>
                        <li><a href="oci-miscellaneous-object-functions.html#GUID-73C98F89-47E5-4B82-B869-731F30F011B0" title="将源实例复制到目标。">OCIObjectCopy（）</a></li>
                        <li><a href="lob-functions.html#GUID-B052C110-D039-44A1-85C6-F5CC7348E2DC" title="将一个LOB或BFILE定位器分配给另一个">OCILobAssign（）</a></li>
                        <li><a href="lob-functions.html#GUID-F7887376-4B3C-430C-94A3-11FE96E26627" title="将一个LOB或BFILE定位器分配给另一个。">OCILobLocatorAssign（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                        <li><a href="lob-functions.html#GUID-699FFE4B-07C8-4904-959F-3686E73B8188">LOB功能</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17322"></a><a id="LNOCI17321"></a><div class="props_rev_3"><a id="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C" name="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C"></a><h3 id="LNOCI-GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C" class="sect3"><span class="enumeration_section">27.2.4</span> OCIObjectRefresh（）</h3>
               <div>
                  <p>刷新最新数据库快照中的持久对象。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__GUID-6962B07B-A47F-4339-B395-0649A08E41D0">目的</p>
                     <p>刷新最新数据库快照中的持久对象。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__GUID-FB34905E-1881-4796-854D-6762C2E1AB90">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIObjectRefresh（OCIEnv * env，OCIError * err，void * object）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__GUID-957AD274-852D-4F6C-BC83-72EE5E5AE144">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__GUID-F0FFC9F2-CF58-46C1-B3F3-A186EDAB69AF"><!-- --></a> env（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境句柄在对象模式下初始化。有关详细信息，请参阅<code class="codeph">OCIEnvNlsCreate()</code> ， <code class="codeph">OCIEnvCreate()</code>和<code class="codeph">OCIInitialize()</code> （不建议使用）的说明。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__GUID-252345CA-416A-43E6-9E67-798234330B0B"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__GUID-076169D0-2C76-4CB5-88F6-C0D3BF338173"><!-- --></a>对象（IN）</dt>
                        <dd>
                           <p>指向持久对象的指针，该指针必须已固定。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__GUID-DFB5953F-E4DB-4323-949E-5BC0BFC0C697">评论</p>
                     <p>此函数使用从服务器中的最新快照检索的数据刷新对象。当对象缓存中的对象与服务器中的对象不一致时，应刷新对象。</p>
                     <div class="infoboxnote" id="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__GUID-4A0E031D-C215-412C-A823-97EDE0017B0C">
                        <p class="notep1">注意：</p>
                        <p>将对象刷新到服务器时，可以触发触发器以修改服务器中的更多对象。对象缓存中的相同对象（由触发器修改）变得过时，必须先刷新才能锁定或刷新它们。</p>
                        <p>当用户发出SQL语句或PL / SQL过程来修改服务器中的任何对象时，会发生这种情况。</p>
                     </div>
                     <div class="infoboxnote" id="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__GUID-F07E10D0-582E-4F01-9730-459704520213">
                        <p class="notep1">注意：</p>
                        <p>如果此函数刷新未标记的对象，则自上次刷新以来对对象（脏对象）所做的修改将丢失。</p>
                     </div>
                     <p><a href="oci-flush-or-refresh-functions.html#GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__CACGGHIJ" title="该表有2列。第1列是对象属性，第2列描述刷新后的状态。">表27-5</a>显示了刷新后如何修改对象的各种元属性标志和持续时间。
                     </p>
                     <div class="tblformal" id="GUID-EFE5604B-AAEC-4C60-BB59-3D01E50DAB8C__CACGGHIJ">
                        <p class="titleintable">表27-5刷新后的对象状态</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="刷新后的对象状态" width="100%" border="1" summary="This table has 2 columns. Column 1 is the object attribute and column 2 describes its status after refresh." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="47%" id="d239589e1677">对象属性</th>
                                 <th align="left" valign="bottom" width="53%" id="d239589e1680">刷新后的状态</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d239589e1685" headers="d239589e1677 ">
                                    <p>存在</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d239589e1685 d239589e1680 ">
                                    <p>设置为适当的值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d239589e1692" headers="d239589e1677 ">
                                    <p>固定</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d239589e1692 d239589e1680 ">
                                    <p>不变</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d239589e1699" headers="d239589e1677 ">
                                    <p>分配期限</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d239589e1699 d239589e1680 ">
                                    <p>不变</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d239589e1706" headers="d239589e1677 ">
                                    <p>针脚持续时间</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d239589e1706 d239589e1680 ">
                                    <p>不变</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>刷新的对象将被<span class="italic">替换为就地</span> 。当对象被替换为就地时，对象的顶级内存被重用，以便可以将新数据加载到相同的内存地址中。<code class="codeph">NULL</code>指示器结构的顶级内存也被重用。与顶级内存块不同，辅助内存块被释放并重新分配。
                     </p>
                     <p>在编写保留指向辅助内存块的指针的功能时应该小心，例如将辅助内存块的地址分配给局部变量，因为在刷新对象后此指针可能变为无效。</p>
                     <p>此功能不会影响瞬态对象或值。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oci-flush-or-refresh-functions.html#GUID-2A901AE1-3211-4474-B673-8BB5C3B69D5F" title="刷新缓存中的所有固定持久对象。">OCICacheRefresh（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="创建并初始化OCI函数的环境句柄。">OCIEnvCreate（）</a></li>
                        <li><a href="deprecated-oci-functions.html#GUID-F50356A8-450D-4A96-8AB5-5726502766B2" title="在Oracle Database 11g第2版（11.2）之前的版本中不推荐使用此功能。">OCIInitialize（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The requirements for Oracle ACFS snapshot-based replication are discussed in this section."></meta>
      <meta name="description" content="The requirements for Oracle ACFS snapshot-based replication are discussed in this section."></meta>
      <title>配置基于Oracle ACFS快照的复制</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="The requirements for Oracle ACFS snapshot-based replication are discussed in this section."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96198-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="acfs-advanced-topics.html" title="Previous" type="text/html"></link>
      <link rel="next" href="manage-flex-asm.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OSTMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="acfs-advanced-topics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="manage-flex-asm.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-advanced-topics.html" property="item" typeof="WebPage"><span property="name">高级主题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">配置基于Oracle ACFS快照的复制</li>
            </ol>
            <a id="GUID-1BB7CD34-399B-496C-B458-DA3E68F48D31" name="GUID-1BB7CD34-399B-496C-B458-DA3E68F48D31"></a>
            
            <h2 id="OSTMG-GUID-1BB7CD34-399B-496C-B458-DA3E68F48D31" class="sect2"><span class="enumeration_chapter">18</span>配置基于Oracle ACFS快照的复制</h2>
         </header>
         <div class="ind">
            <div>
               <p>本节将讨论Oracle ACFS基于快照的复制的要求。</p>
               <p>本章介绍如何配置12.2或更高版本提供的基于Oracle ACFS快照的复制。与版本12.2之前的Oracle ACFS复制安装一样，基于快照的复制的总体功能目标是确保将主群集的更新复制到备用群集。但是，基于快照的复制技术使用主存储位置的快照，并使用标准<code class="codeph">ssh</code>命令将连续快照之间的差异传输到备用存储位置。版本12.2之前的Oracle ACFS复制功能不断复制，基于Oracle网络技术，特别是网络基础技术（NFT），以确保主群集和备用群集之间的连接。
               </p>
               <p>Oracle ACFS复制的设计和实现方面的这一变化在复制的配置和使用方式上引入了一些差异。例如，使用<code class="codeph">ssh</code>需要在执行复制的主节点和备用节点上相应地设置主机密钥和用户密钥。
               </p>
               <p>Oracle ACFS复制还提供角色转换功能，您可以通过使主群集和备用群集根据需要与另一个群集进行通信来进行配置。在角色转换中，备用数据库承担主要角色，主要角色成为备用角色。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4">配置ssh以与Oracle ACFS复制一起使用</a></p>
                  </li>
                  <li>
                     <p><a href="configure-acfs-replication.html#GUID-D2CADB0B-E03D-4576-90DD-F1214362798D">在Windows上安装ssh和Cygwin</a></p>
                  </li>
                  <li>
                     <p><a href="configure-acfs-replication.html#GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7">升级到Oracle ACFS基于快照的复制</a></p>
                  </li>
               </ul>
               <p>有关Oracle ACFS复制的概述，请参阅<a href="understand-acfs-admin.html#GUID-8522E0B6-BE6E-4BE3-B7C7-5EA2ED4A602C" title="Oracle ACFS基于快照的复制可以将Oracle ACFS文件系统通过网络复制到远程站点，从而为文件系统提供灾难恢复功能。">Oracle ACFS复制</a> 。有关Oracle ACFS复制命令的信息，请参阅<a href="acfs-commands-replication.html#GUID-F40FA4A4-2ED0-461F-A1E0-5F886DA7FC0A" title="本主题提供了基于Oracle ACFS快照的复制命令的摘要。">Oracle ACFS命令行工具以进行复制</a> 。
               </p>
            </div>
            <div class="sect2"><a id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4" name="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4"></a><h3 id="OSTMG-GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4" class="sect3">配置ssh以与Oracle ACFS复制一起使用</h3>
               <div>
                  <p>本主题介绍如何配置<code class="codeph">ssh</code>以供12.2或更高版本提供的Oracle ACFS基于快照的复制使用。
                  </p>
                  <p>Oracle ACFS基于快照的复制使用<code class="codeph">ssh</code>作为主群集和备用群集之间的传输。为了支持完整的复制功能， <code class="codeph">ssh</code>必须可以在群集之间的任何一个方向上使用 - 从主群集到备用群集，从备用群集到主群集。
                  </p>
                  <p>本主题中的过程描述如何在一个方向上配置<code class="codeph">ssh</code>以进行复制 - 从主数据库到备用数据库。要完全配置<code class="codeph">ssh</code> ，必须在主服务器和备用服务器角色相反的情况下再次执行指令。第一次执行这些说明时，请完成为主群集和备用群集编写的步骤。第二次，反转主要和备用角色。执行标注在<span class="italic">主</span>群集上为您的需要备用群集上的步骤，并进行标记为需要您的主群集上的<span class="italic">备用</span>群集上的步骤。必须执行两次的过程描述如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__CHOOSINGANORACLEACFSREPLICATIONUSER-04CFEE35">选择Oracle ACFS复制用户</a></p>
                     </li>
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__DISTRIBUTINGKEYSFORORACLEACFSREPLIC-0530A539">分发Oracle ACFS复制的密钥</a></p>
                     </li>
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GETTINGAPUBLICKEYFORROOTFROMTHEPRIM-052F3C38">从主群集获取root的公钥</a></p>
                     </li>
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GETTINGHOSTKEYSFORTHESTANDBYCLUSTER-052F3FCF">获取备用群集的主机密钥</a></p>
                     </li>
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__NOTESONPERMISSIONSFORSSH-RELATEDFIL-052F42E6">有关ssh相关文件权限的说明</a></p>
                     </li>
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__NOTESONSSHDCONFIGURATION-052F45A9">有关sshd配置的说明</a></p>
                     </li>
                  </ul>
                  <p>完成所有必要的步骤后，您可以使用<a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__VALIDATINGYOURSSH-RELATEDKEYCONFIGU-052F498A">验证ssh相关密钥配置中</a>描述的说明来确认您已在两个方向上正确配置了<code class="codeph">ssh</code> 。
                  </p>
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__CHOOSINGANORACLEACFSREPLICATIONUSER-04CFEE35">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-E1D91EB6-3D57-48DA-957B-43D004839291">选择Oracle ACFS复制用户</p>
                     <p>Oracle ACFS基于快照的复制使用<code class="codeph">ssh</code>作为主群集和备用群集之间的传输，因此必须谨慎管理在备用数据库上执行复制的用户身份。在复制过程中，运行复制的主节点上的<code class="codeph">root</code>用户（或Windows上的本地<code class="codeph">SYSTEM</code> ）使用<code class="codeph">ssh</code>登录复制中涉及的备用节点。
                     </p>
                     <p>因为<code class="codeph">ssh</code>不建议在备用节点上以<code class="codeph">root</code>用户身份登录，所以应该使用具有最低权限的用户身份。所选用户应具有Oracle ASM管理权限。通常，首次安装Oracle软件时指定给Oracle安装程序的用户属于所需的组，因此可以方便地选择作为复制用户。在此讨论中，复制用户被标识为<span class="italic">repluser</span> ;但是，您可以使用您选择的实际用户名替换<span class="italic">repluser</span> 。有关Oracle ASM的用户权限的信息，请参阅<a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">关于Oracle ASM的权限</a> 。有关运行Oracle ACFS <code class="codeph">acfsutil</code>命令的信息，请参阅<a href="steps-manage-acfs.html#GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C" title="本主题概述了Oracle ACFS acfsutil命令的使用。">关于使用Oracle ACFS命令行工具</a> 。
                     </p>
                     <div class="infoboxnote" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-5D336002-E430-4C35-A4A6-E8092C4E2ECD">
                        <p class="notep1">注意：</p>
                        <p>必须为主群集和备用群集上的<span class="italic">repluser</span>指定相同的用户和组标识。此外，主群集和备用群集上的用户名和数字<code class="codeph">uids</code>之间以及组名和数字<code class="codeph">gids</code>之间的映射必须相同。这是确保在两个群集上以相同方式使用数值所必需的，因为复制仅将数值从主数据库传输到备用数据库。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__DISTRIBUTINGKEYSFORORACLEACFSREPLIC-0530A539">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-C4685F1C-426C-4492-A882-191B7993F60D">分发Oracle ACFS复制的密钥</p>
                     <p>为Oracle ACFS复制分发密钥的过程包括从主群集获取公钥，获取备用群集的主机密钥，确保为<code class="codeph">ssh</code>相关文件正确配置<code class="codeph">sshd</code>根据需要配置<code class="codeph">sshd</code> ，以及最后验证<code class="codeph">ssh</code>配置。
                     </p>
                     <div class="infoboxnote" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-DF9DC152-83DC-4DFA-A5CE-DA276608CB11">
                        <p class="notep1">注意：</p>
                        <p>创建主机密钥时，请确保为完全限定的域主机名和本地主机名创建密钥。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GETTINGAPUBLICKEYFORROOTFROMTHEPRIM-052F3C38">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-F03646CD-F88D-4CD6-9342-F3B8C34C2222">从主群集获取root的公钥</p>
                     <p>必须知道在主群集的每个节点上定义的<code class="codeph">root</code>公钥，以便备用群集的每个节点上的<span class="italic">repluser</span> 。
                     </p>
                     <p>要使密钥已知，每个备用节点上必须存在目录<code class="codeph">~repluser/.ssh</code> 。如果此目录不存在，则创建它仅具有<span class="italic">repluser</span>访问权限。确保<code class="codeph">.ssh</code>目录的<code class="codeph">ls</code>命令显示类似于以下内容的输出：</p><pre class="oac_no_warn" dir="ltr">repluser @ standby $ ls -ld~ / .ssh drwx ------ 2 repluser dba 4096 Jan 27 17:01 .ssh</pre><p>如果在给定主节点上定义了<code class="codeph">root</code>公钥，则它位于<code class="codeph">.pub</code>文件中，例如<code class="codeph">/root/.ssh/id_rsa.pub</code> 。如果存在公钥文件，则将其内容添加到授权在作为复制运行的备用<span class="italic">数据库</span>的每个节点上作为<span class="italic">repluser</span>登录的密钥集。将密钥附加到每个备用节点上的文件<code class="codeph">~repluser/.ssh/authorized_keys2</code> ，必要时创建此文件。
                     </p>
                     <p>如果公钥文件不存在，请通过以<code class="codeph">root</code>身份运行以下命令在主服务器上生成公钥和私钥对。
                     </p><pre class="oac_no_warn" dir="ltr">#ssh-keygen -t rsa</pre><p>您可以按回车键以响应命令发出的每个提示。将生成的<code class="codeph">.pub</code>文件复制到每个备用节点。
                     </p>
                     <p>你必须共享相同的公钥/私钥对对的选项<code class="codeph">root</code>在所有节点的主群集或建立每个主节点不同的密钥对。如果相同的公钥在主群集中的所有节点上对<code class="codeph">root</code>有效，则只有该密钥必须添加到备用群集的每个节点上的文件<code class="codeph">~repluser/.ssh/authorized_keys2</code> 。如果每个主节点都有自己的<code class="codeph">root</code>公钥，则必须将所有公钥添加到该文件中。在任何一种情况下，您都可以通过将备用数据库的给定节点上更新的<code class="codeph">authorized_keys2</code>文件复制到群集的其他节点来最小化工作。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GETTINGHOSTKEYSFORTHESTANDBYCLUSTER-052F3FCF">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-C78516CB-C930-469E-8ED1-45CEF5A17F1B">获取备用群集的主机密钥</p>
                     <p>必须在可以运行复制的每个主节点上知道可以运行复制的每个备用节点的主机密钥。生成正确密钥的一种方法是以<code class="codeph">root</code>身份从每个主节点到每个备用节点手动运行<code class="codeph">ssh</code> 。如果尚未知道正确的主机密钥，则会显示警告，您可以启用<code class="codeph">ssh</code>来添加密钥。
                     </p>
                     <p>请注意， <code class="codeph">ssh</code>连接中涉及两个用户。当主节点上的<code class="codeph">ssh</code>以<code class="codeph">root</code>身份连接到备用节点时， <code class="codeph">ssh</code>将作为<span class="italic">repluser</span>登录备用节点。备用数据库上由<code class="codeph">ssh</code>运行的任何命令都以<span class="italic">repluser</span>的权限运行，而不是以<code class="codeph">root</code>权限运行。
                     </p>
                     <p>由于主节点以<code class="codeph">root</code>用户身份连接到备用节点，因此必须将备用节点的主机密钥添加到<code class="codeph">root</code>用户的<code class="codeph">known_hosts</code>文件中，而不是用于<span class="italic">repluser</span>的文件。以下是获取主机密钥的示例：</p><pre class="oac_no_warn" dir="ltr">[root @ primary usm] #sssh repluser @ standby date无法建立主机'standby（10.137.13.85）'的真实性。RSA密钥指纹是1b：a9：c6：68：47：b4：ec：7c：df：3a：f0：2a：6f：cf：a7：0a。您确定要继续连接（是/否）吗？</pre><p>如果您回答<code class="codeph">yes</code> ，则<code class="codeph">ssh</code>设置完成。主机备用主机密钥被存储在所述<code class="codeph">known_hosts</code>文件（ <code class="codeph">~root/.ssh/known_hosts</code>上的主机<span class="italic">主</span>用户） <code class="codeph">root</code> 。
                     </p>
                     <p>在给定主节点上完成备用节点的主机密钥设置后，如果使用虚拟IP地址（VIP）与备用群集通信，则需要执行其他步骤。您必须在引用备用群集中的主机的<code class="codeph">known_hosts</code>文件的每一行的开头添加VIP名称或地址。例如，如果您使用名称为<code class="codeph">standby12_vip</code>的VIP，并且您的<code class="codeph">known_hosts</code>文件包含以下两行引用您的备用数据库：</p><pre class="oac_no_warn" dir="ltr">standby1,10.242.20.22 SSH-RSA AAAAB3NzaC1yc2EAAAADAQABAAABAQC3pM2YTd4UUiEWEoCKDGgaTgsmPkQToDrdtU + JtVIq / 96muivU BaJUK83aqzeNIQkh + hUULsUdgKoKT5bxrWYqhY6AlTEqNgBHjBrJt9C73BbQd9y48jsc2G + WQWyuI / + + S1Q hIJdBNMxvMBQAfisPWWUcaIx9Y / JzlPgF6lRP2cbfqAzixDot9fqRrAKL3G6A75A / 6TbwmEW07d1zqOv l7ZGyeDYf5zQ72F / V0P9UgMEt / 5DmcYTn3kTVGjOTbnRBe4A4lY4rVw5c + nZBDFre66XtORfQgwQB5ztW / PI 08GYbcIszKoZx2HST9AZxYIAgcrnNYG2Ae0K6QLxxxScP standby2,10.242.20.23 SSH-RSA AAAAB3NzaC1yc2EAAAADAQABAAABAQDIszcjzNtKN03SY8Kl846skFTVP1HF / ykswbmkctEjL6KTWTW + NR U4MGbvkBqqdXxuPCR7aoGO2U3PEOg1UVf3DWUoux8IRvqKU + dJcdTibMFkDAIhTnzb14gZ / lRTjn + GYsuP5 Qz2vgL / U0ki887mZCRjWVL1b5FNH8sXBUV2QcD7bjF98VXF6n4gd5UiIC3jv6l2nVTKDwtNHpUTS1dQAi + 1D tr0AieZTsuxXMaDdUZHgKDotjciMB3mCkKm / u3IFoioDqdZE4 + vITX9G7DBN4CVPXawp + b5Kg8X9P + 08Eehu tMlBJ5lafy1bxoVlXUDLVIIFBJNKrsqBvxxxpS7</pre><p>要启用VIP，您可以修改这两行，如下所示：</p><pre class="oac_no_warn" dir="ltr">
<span class="bold">standby12_vip，standby1,10.242.20.22 SSH-RSA</span> AAAAB3NzaC1yc2EAAAADAQABAAABAQC3pM2YTd4UUiEWEoCKDGgaTgsmPkQToDrdtU + JtVIq / 96muivU BaJUK83aqzeNIQkh + hUULsUdgKoKT5bxrWYqhY6AlTEqNgBHjBrJt9C73BbQd9y48jsc2G + WQWyuI / + + S1Q hIJdBNMxvMBQAfisPWWUcaIx9Y / JzlPgF6lRP2cbfqAzixDot9fqRrAKL3G6A75A / 6TbwmEW07d1zqOv l7ZGyeDYf5zQ72F / V0P9UgMEt / 5DmcYTn3kTVGjOTbnRBe4A4lY4rVw5c + nZBDFre66XtORfQgwQB5ztW / PI 08GYbcIszKoZx2HST9AZxYIAgcrnNYG2Ae0K6QLxxxScP <span class="bold">standby12_vip，standby2,10.242.20.23 SSH-RSA</span> AAAAB3NzaC1yc2EAAAADAQABAAABAQDIszcjzNtKN03SY8Kl846skFTVP1HF / ykswbmkctEjL6KTWTW + NR U4MGbvkBqqdXxuPCR7aoGO2U3PEOg1UVf3DWUoux8IRvqKU + dJcdTibMFkDAIhTnzb14gZ / lRTjn + GYsuP5 Qz2vgL / U0ki887mZCRjWVL1b5FNH8sXBUV2QcD7bjF98VXF6n4gd5UiIC3jv6l2nVTKDwtNHpUTS1dQAi + 1D tr0AieZTsuxXMaDdUZHgKDotjciMB3mCkKm / u3IFoioDqdZE4 + vITX9G7DBN4CVPXawp + b5Kg8X9P + 08Eehu tMlBJ5lafy1bxoVlXUDLVIIFBJNKrsqBvxxxpS7</pre><p>最终，必须在主群集中的每个节点上执行在主群集的第一个节点上执行的主机密钥配置;每个主节点上必须存在上述序列的结果或等价物。最小化实现此配置所需的手动操作的一种方法是更新主群集的一个节点上的<code class="codeph">known_hosts</code>文件，然后将更新的文件复制到群集的其他节点。
                     </p>
                     <div class="infoboxnote" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-5E9BEBF3-D353-4C3C-B343-DA65EE35014C">
                        <p class="notep1">注意：</p>
                        <p>默认情况下，复制通过<code class="codeph">ssh</code>启用严格的主机密钥检查，以确保主节点在运行<code class="codeph">ssh</code>时连接到预期的备用节点或群集。但是，如果您确定不需要此检查，例如主群集和备用群集通过专用网络进行通信的情况，则可以禁用<code class="codeph">ssh</code>使用严格主机密钥检查。有关禁用严格主机密钥检查的信息，请参阅<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>命令的<code class="codeph">-o sshStrictKey=no</code>选项。如果禁用严格的主机密钥检查，则不需要设置主机密钥。有关<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code>命令的信息，请参阅<a href="acfs-commands-replication.html#GUID-E96CD9A2-00BD-4673-8FCC-DBB28A9E2DCD">acfsutil repl init</a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__NOTESONPERMISSIONSFORSSH-RELATEDFIL-052F42E6">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-D427A8C6-7947-4CDB-83E6-F3CF53E79D5D">有关ssh相关文件权限的说明</p>
                     <p>要使<code class="codeph">ssh</code>使用您已建立的密钥，必须确保在相关<code class="codeph">.ssh</code>目录和目录包含的某些文件的每个节点上正确设置权限。在每个主节点上，这指的是<code class="codeph">root</code>的<code class="codeph">.ssh</code>目录。在每个备用节点上，要检查的<code class="codeph">.ssh</code>目录是用于<span class="italic">repluser的目录</span> 。
                     </p>
                     <p>有关应该为每个<code class="codeph">.ssh</code>目录和目录中的密钥文件提供的权限的详细信息，请参阅<code class="codeph">ssh</code>实现的文档，例如<code class="codeph">ssh(1)</code>手册页的<code class="codeph">FILES</code>部分。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__NOTESONSSHDCONFIGURATION-052F45A9">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-02ED30E2-D4F1-4C24-A449-B7264C02A287">有关sshd配置的说明</p>
                     <p>开始使用复制后，会经常启动<code class="codeph">ssh</code>以执行复制操作。在某些平台上， <code class="codeph">ssh</code>守护程序<code class="codeph">sshd</code>可以配置为每次建立<code class="codeph">ssh</code>连接时通过<code class="codeph">syslog</code>或类似工具记录消息。为避免这种情况，可以修改服务器配置文件<code class="codeph">/etc/ssh/sshd_config</code>以指定较低的日志记录频率。控制日志记录的参数称为<code class="codeph">LogLevel</code> 。连接消息在<code class="codeph">INFO</code>级别发出。任何较低的<code class="codeph">LogLevel</code>设置（例如<code class="codeph">ERROR</code> ）都会禁止这些消息。例如，您可以通过将以下行添加到文件来禁止日志消息：</p><pre class="oac_no_warn" dir="ltr">LogLevel错误</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__VALIDATINGYOURSSH-RELATEDKEYCONFIGU-052F498A">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-FEA106F4-08E5-4326-A329-894F45B09935">验证与ssh相关的密钥配置</p>
                     <p>在主群集和备用群集上为<code class="codeph">ssh</code>建立主机密钥和用户密钥后，可以使用命令<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code> <code class="codeph">-u</code>来验证密钥。您在每个群集的每个节点上以<code class="codeph">root</code>身份运行此命令。它将远程集群上的所有主机名或地址作为参数，本地集群将来可能会使用这些主机名或地址来执行复制。
                     </p>
                     <p>如果您没有使用VIP连接到远程集群，那么对于给定的复制关系，只有一个远程主机名或地址被提供给<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code> 。但是，如果将来的关系涉及其他远程主机地址，请在运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code> <code class="codeph">-u</code>命令时指定完整的远程地址集。
                     </p>
                     <p>如果使用VIP连接到远程群集，则应指定VIP可能处于活动状态的所有远程主机的名称或主机特定地址。请勿指定VIP名称或与VIP关联的地址。当复制使用<code class="codeph">ssh</code>连接到VIP时，返回的主机密钥是与VIP当前处于活动状态的主机关联的密钥。在这种情况下， <code class="codeph">ssh</code>仅使用单个远程节点的主机名或地址。
                     </p>
                     <p>要在主群集的每个节点上运行的验证命令具有以下格式：</p><pre class="oac_no_warn" dir="ltr">#acfsutil repl info -c -u repluser standby1 [standby2 ...] standby-mountpoint</pre><p>在命令中， <code class="codeph">standby <span class="codeinlineitalic">n</span></code>指定备用群集主机名或地址。验证命令确认用户<span class="italic">repluser</span>可以使用<code class="codeph">ssh</code>连接到给定的每个备用主机名或地址，方式与复制初始化相同。如果使用VIP（例如<code class="codeph">standby12_vip</code> ）连接到群集，请使用相同的命令格式。不要指定VIP的名称。</p>
                     <p></p>
                     <p>如果计划禁用严格主机密钥检查，则可以通过在命令行中添加<code class="codeph">-o sshStrictKey=no</code>选项来跳过此检查。
                     </p>
                     <p>确认主群集的每个节点都可以连接到备用群集的所有节点后，再次运行验证命令。这次在备用群集的每个节点上运行该命令。使用以下格式为主群集的所有节点指定主机名或IP地址：</p><pre class="oac_no_warn" dir="ltr">#acfsutil repl info -c -u repluser primary1 [primary2 ...] primary-mountpoint</pre><p>在命令中， <code class="codeph">primary <span class="codeinlineitalic">n</span></code>指定主群集主机名或地址。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D" name="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D"></a><h3 id="OSTMG-GUID-D2CADB0B-E03D-4576-90DD-F1214362798D" class="sect3">在Windows上安装ssh和Cygwin</h3>
               <div>
                  <p>本节介绍如何在Microsoft Windows主机上安装Cygwin并启动<code class="codeph">ssh</code>守护程序。仅当您要在Windows主机上使用基于Oracle ACFS快照的复制时，此信息才适用。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-234B1C81-531E-41D6-BAB0-2F8D3FE4D7B2">针对Oracle ACFS复制的Cygwin要求</p>
                     <p>Oracle ACFS基于快照的复制使用<code class="codeph">ssh</code>将复制相关数据从主群集传输到备用群集。在Microsoft Windows上运行的主机上使用复制时，必须安装Cygwin并在主机上启动<code class="codeph">ssh</code>守护程序，如本节所述。
                     </p>
                     <p>Cygwin本质上是一个在Microsoft Windows主机上提供类似Linux的环境的实用程序。从技术上讲，它是一个DLL（ <code class="codeph">cygwin1.dll</code> ），充当Linux API层，提供大量的Linux API功能。安装Cygwin后，可以在主机上配置<code class="codeph">ssh</code>守护程序。Oracle ACFS复制已通过Cygwin 2.0认证和支持。
                     </p>
                     <p><code class="codeph">ssh</code>守护程序使Oracle ACFS复制能够建立从运行复制的主群集到运行复制的备用群集的<code class="codeph">ssh</code>连接。
                     </p>
                     <div class="infoboxnote" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-99AC42CF-96A5-41B3-8DAB-EA04B61BD846">
                        <p class="notep1">注意：</p>
                        <p>这些用于安装<code class="codeph">ssh</code>守护程序的指令会生成一个守护程序，该守护程序仅可用于以特定用户<span class="italic">repluser</span>身份登录和运行命令。与其他任何用户一样，在登录和运行命令时，守护程序无法正常工作。这种限制源于两个因素：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>为Oracle ACFS定义的用户必须是基于域的用户。</p>
                           </li>
                           <li>
                              <p>为基于域的用户启用<code class="codeph">ssh</code>守护程序的通用使用涉及创建域策略，该策略为该用户提供一些非常强大的权限，包括允许用户充当<span class="italic">可信计算库的</span>一部分的<code class="codeph">SeTcbPrivilege</code> 。在大多数企业环境中不太可能允许创建此类策略，因此这些策略的使用不包含在这些说明中。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-89207EDC-DEE6-4787-B070-368261B17086">安装Cygwin之前的步骤</p>
                     <p>在开始使用<code class="codeph">ssh</code>之前，请确保您没有通过执行以下步骤中的检查来使用<code class="codeph">OpenSSH</code>和<code class="codeph">MKSNT</code> 。
                     </p>
                     <p>请注意，本节中描述的导航步骤可能因不同的Microsoft Windows操作系统而异。</p>
                     <ol>
                        <li>
                           <p>确保<code class="codeph">OpenSSH\bin</code>和存储<code class="codeph">mksnt</code>可执行文件的任何目录不在<code class="codeph">PATH</code>环境变量中。如果是，请通过执行以下操作将其从路径字符串中删除：</p>
                           <ol type="a">
                              <li>
                                 <p>右键单击“ <span class="uicontrol bold">我的电脑”，</span>然后转到“ <span class="uicontrol bold">属性”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“ <span class="uicontrol bold">系统属性”</span>窗口中，单击“ <span class="uicontrol bold">高级”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在此选项卡中，单击“ <span class="uicontrol bold">环境变量”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>搜索<code class="codeph">PATH</code>系统变量，选择它，如果<code class="codeph">PATH</code>字符串中存在<code class="codeph">OpenSSH\bin</code>或<code class="codeph">mksnt</code>相关值，请单击“ <span class="uicontrol bold">编辑”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“编辑系统变量”对话框中，从<code class="codeph">PATH</code>字符串中删除这些值，然后单击“ <span class="uicontrol bold">确定”</span> 。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>如果<code class="codeph">ssh</code> <code class="codeph">daemon</code>从<code class="codeph">OpenSSH</code> ， <code class="codeph">MKS</code>或任何其他源运行，请停止并禁用它。如果<code class="codeph">ssh</code>守护程序正在运行，请执行以下操作停止并禁用它：</p>
                           <ol type="a">
                              <li>
                                 <p>右键单击“ <span class="uicontrol bold">我的电脑”</span> ，然后选择“ <span class="uicontrol bold">管理”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“ <span class="uicontrol bold">计算机管理”</span>窗口的左窗格中，展开“ <span class="uicontrol bold">服务和应用程序”</span> ，然后选择“ <span class="uicontrol bold">服务”</span> 。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>在右窗格中，右键单击<code class="codeph">ssh</code>守护程序/ <code class="codeph">MKS Secure Shell</code>服务，然后单击出现的菜单上的“ <span class="uicontrol bold">停止”</span>条目。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在同一窗格中，右键单击<code class="codeph">ssh</code>守护程序/ <code class="codeph">MKS Secure Shell</code>服务，然后单击出现的菜单上的“ <span class="uicontrol bold">属性”</span>条目。在打开的对话框中，选择“ <span class="uicontrol bold">已禁用”</span>作为“ <span class="uicontrol bold">启动”</span>类型，然后单击“ <span class="uicontrol bold">确定”</span> 。</p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-40EE4B4F-3EC1-4032-A977-6F49F3B56BBE">安装Cygwin</p>
                     <p>要在Microsoft Windows主机上安装Cygwin，请执行以下步骤：</p>
                     <ol>
                        <li>
                           <p>访问以下URL，然后单击<span class="uicontrol bold">Install Cygwin</span> ：</p><pre class="oac_no_warn" dir="ltr">http://www.cygwin.com/</pre></li>
                        <li>
                           <p>根据您运行的Microsoft Windows版本，下载32位版本或64位版本的Cygwin安装程序可执行文件。</p>
                        </li>
                        <li>
                           <p>运行安装程序可执行文件，然后单击<span class="uicontrol bold">下一步</span>继续。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">选择安装类型”</span>屏幕上，选择“ <span class="uicontrol bold">从Internet安装”</span> ，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">选择安装目录”</span>屏幕上，输入<code class="codeph">C:\cygwin</code>作为<span class="uicontrol bold">根目录</span> ，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">选择本地程序包目录”</span>屏幕上，选择本地计算机上要存储下载的安装文件的目录，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">选择连接类型”</span>屏幕上，选择适当的设置以连接到Internet，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">选择下载站点”</span>屏幕上，从可用列表中选择任何站点，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“选择包”屏幕上，确保选择以下包，然后单击“ <span class="uicontrol bold">下一步”</span> 。从<span class="uicontrol bold">存档</span>类别中，选择<span class="uicontrol bold">解压缩</span>和<span class="uicontrol bold">压缩</span> 。从<span class="uicontrol bold">Net</span>类别中，选择<span class="uicontrol bold">openssh</span>和<span class="uicontrol bold">openssl</span> 。选择包并单击“ <span class="uicontrol bold">下一步”后</span> ，将显示“ <span class="uicontrol bold">解析依赖关系”</span>屏幕。单击“ <span class="uicontrol bold">下一步”</span>继续。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">安装状态”和“创建图标”</span>屏幕上，不要进行任何更改。单击“ <span class="uicontrol bold">完成”</span>以完成安装过程。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-51C95050-C99D-409D-8DEA-95B4EAF37FDE">配置ssh</p>
                     <p>本节介绍在主机上安装Cygwin后如何为Oracle ACFS复制配置<code class="codeph">ssh</code> 。
                     </p>
                     <div><span class="bold">选择复制用户</span><p>Oracle ACFS复制使用<code class="codeph">ssh</code>作为主群集和备用群集之间的传输，因此需要明确指定执行复制的用户身份。在复制过程中，主节点上的特权用户使用<code class="codeph">ssh</code>登录复制中涉及的备用节点。<code class="codeph">ssh</code>不希望以备用节点上的特权用户身份登录。相反，应该使用最低权限的用户身份。所选用户必须是基于域的用户，并且必须是<code class="codeph">ORA_ASMADMIN</code>组的成员。
                        </p>
                        <p>在本讨论中， <span class="italic">repladmin</span>和<span class="italic">repluser</span>用于指复制用户;但是，您可以将<span class="italic">repladmin</span>和<span class="italic">repladmin</span>替换<span class="italic">为</span>您选择的实际用户名。<span class="italic">repladmin</span>用户是指在主数据库和备用数据库上运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code>命令的用户。该用户必须是<code class="codeph">Administrators</code>组的成员。<span class="italic">repluser</span>用户是指<code class="codeph">ssh</code>用于登录备用数据库的用户。此用户必须是基于域的用户，并且必须是<code class="codeph">ORA_ASMADMIN</code>组的成员，但不是<code class="codeph">Administrators</code>组的成员。如果已存在使用Oracle RAC的合适用户，则应将该用户用作<span class="italic">repluser</span> 。
                        </p>
                        <p>有关Oracle ASM的用户权限的信息，请参阅<a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">关于Oracle ASM的权限</a> 。有关运行Oracle ACFS <code class="codeph">acfsutil</code>命令的信息，请参阅<a href="steps-manage-acfs.html#GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C" title="本主题概述了Oracle ACFS acfsutil命令的使用。">关于使用Oracle ACFS命令行工具</a> 。
                        </p>
                     </div>
                     <div><span class="bold">配置步骤</span><p>配置<code class="codeph">ssh</code> ，您可能需要运行<code class="codeph">cygwin.bat</code>脚本。在Microsoft Windows Server 2008和Microsoft Windows Vista上运行<code class="codeph">cygwin.bat</code>时，请确保以管理员模式调用批处理文件。为此，请右键单击<code class="codeph">cygwin.bat</code>文件，然后选择<code class="codeph">Run as administrator</code> 。
                        </p>
                        <p>要配置<code class="codeph">ssh</code>并测试Cygwin设置，请按照下列步骤操作：</p>
                        <ol>
                           <li>
                              <p>安装Cygwin后，导航到<code class="codeph">C:\cygwin</code>目录，使用任何编辑器以编辑模式打开Cygwin.bat文件，并在调用<code class="codeph">bash</code> shell之前添加以下行。
                              </p><pre class="oac_no_warn" dir="ltr">设置CYGWIN = binmode ntsec</pre><p>以下行是添加上一行后<code class="codeph">Cygwin.bat</code>文件的可能内容：</p><pre class="oac_no_warn" dir="ltr">@echo off C：chdir C：\ cygwin \ bin set CYGWIN = binmode ntsec bash --login -i</pre></li>
                           <li>
                              <p>要验证是否正确安装了Cygwin（ <code class="codeph">cygrunsrv</code> ），请运行<code class="codeph">C:\cygwin\Cygwin.bat</code> ，然后运行以下命令：</p><pre class="oac_no_warn" dir="ltr">cygrunsrv -h</pre><p>如果正确安装了Cygwin，则屏幕上会显示所有Cygwin帮助选项。如果该命令返回错误消息，则可能必须重新安装Cygwin。</p>
                           </li>
                           <li>
                              <p>在Windows级别定义<span class="italic">repladmin</span>和<span class="italic">repluser</span>标识。
                              </p>
                              <p>您也可以使用现有用户来代替这些角色。如果为这些角色定义新标识，请注意以下事项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="italic">repladmin</span>用户必须是Administrators组的成员。建议<span class="italic">repladmin</span>也是基于域的用户。如果<span class="italic">repladmin</span>是本地用户，则应在所有主节点上使用相同的组成员身份定义它。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic">repluser</span>用户必须是基于域的用户，并且必须是<code class="codeph">ORA_ASMADMIN</code>组的成员。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>配置<code class="codeph">sshd</code>服务。运行<code class="codeph">C:\cygwin\Cygwin.bat</code> ，并执行以下命令：</p><pre class="oac_no_warn" dir="ltr">SSH-主机配置</pre><p>运行该命令后，系统会提示您以下问题。适当的回答以粗体显示。其他输出也可能出现，但此处未显示。</p><pre class="oac_no_warn" dir="ltr">***查询：是否应该使用StrictModes？（是/否） <span class="bold">是</span> ***查询：是否应使用权限分离？&lt;是/否&gt;： <span class="bold">是</span> ***查询：新的本地帐户'sshd'？&lt;是/否&gt;： <span class="bold">是</span> ***查询：您是否要将sshd作为服务安装？***查询：&lt;如果它已作为服务安装，则说“否”&gt; &lt;是/否&gt;： <span class="bold">是</span> ***查询：输入守护程序的CYGWIN值：[] <span class="bold">binmode ntsec</span></pre><p>现在<code class="codeph">ssh-host-config</code>输出一些关于使用无密码登录所需的用户帐户的注释。Oracle ACFS复制需要此功能。<span class="italic">应将repluser</span>帐户指定为此帐户。
                              </p><pre class="oac_no_warn" dir="ltr">***信息：找到了以下特权帐户：'cyg_server'。***信息：此脚本计划使用'cyg_server'。***信息：'cyg_server'仅供注册服务使用。***查询：您想使用其他名称吗？（是/否） <span class="bold">是的</span></pre><p>您应该对提示回答“ <span class="uicontrol bold">是</span> ”，并应将<span class="italic">repluser</span>指定为运行<code class="codeph">sshd</code>的名称。然后，系统会提示您以下问题。
                              </p><pre class="oac_no_warn" dir="ltr">***查询：输入新用户名： <span class="bold">repluser</span> ***查询：重新输入： <span class="bold">repluser</span> ***警告：指定的帐户“repluser”没有***警告：所需权限或组成员身份。这可能***警告：如果不纠正会导致问题;继续...***查询：请输入用户'repluser'的密码：***查询：重新输入：</pre><p>以上假设用户<span class="italic">repluser</span>已存在。您可以忽略有关缺少权限或组成员身份的警告输出。如果配置成功，将显示以下消息。
                              </p><pre class="oac_no_warn" dir="ltr">主机配置完成。玩得开心！</pre></li>
                           <li>
                              <p>确保目录<code class="codeph">/var/empty</code>存在并由<span class="italic">repluser</span>拥有。
                              </p>
                           </li>
                           <li>
                              <p>确保Cygwin知道<span class="italic">repluser</span>和<span class="italic">repladmin</span>用户。
                              </p>
                              <p>备份<code class="codeph">c:\cygwin\etc\passwd</code>文件，然后以编辑模式打开文件。从此文件中删除引用<span class="italic">repladmin</span>或<span class="italic">repluser</span>用户的所有行。对于每个用户，请运行以下命令。假设两个用户都是基于域的用户。
                              </p><pre class="oac_no_warn" dir="ltr">/ bin / mkpasswd -d -u repladmin &gt;&gt; / etc / passwd</pre><p>确保为<code class="codeph">/etc/passwd</code>每个用户命名的主目录存在。如有必要，请创建它。例如，如果<code class="codeph">/home/repladmin</code>是为用户<span class="italic">repladmin</span>显示的目录，请执行以下操作以创建必要的目录。
                              </p><pre class="oac_no_warn" dir="ltr">mkdir -p / home / repladmin chown repladmin / home / repladmin</pre></li>
                           <li>
                              <p>确保<code class="codeph">ssh</code>守护程序启动，并配置为自动启动：</p>
                              <ol type="a">
                                 <li>
                                    <p>右键单击“ <span class="uicontrol bold">我的电脑”</span> ，然后选择“ <span class="uicontrol bold">管理”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在“ <span class="uicontrol bold">计算机管理”</span>窗口的左窗格中，展开“ <span class="uicontrol bold">服务和应用程序”</span> ，然后选择“ <span class="uicontrol bold">服务”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在右窗格中，右键单击<span class="uicontrol bold">CYGWIN</span> <span class="uicontrol bold">sshd</span>服务，然后单击出现的菜单上的“ <span class="uicontrol bold">属性”</span>条目。在打开的对话框中，选择“ <span class="uicontrol bold">自动”</span>作为“ <span class="uicontrol bold">启动”</span>类型，然后单击“ <span class="uicontrol bold">确定”</span> 。</p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <p>如果<code class="codeph">ssh</code>守护程序未启动，请查看<code class="codeph">c:\cygwin\var\log\sshd.log</code>文件以获取与启动过程失败相关的信息。
                        </p>
                     </div>
                     <div><span class="bold">从主服务器获取repladmin的公钥</span><p>必须知道在主群集的每个节点上定义的<span class="italic">repladmin的</span>公钥，以便备用群集的每个节点上的<span class="italic">repluser</span>都知道。
                        </p>
                        <p>要使密钥已知，每个备用节点上必须存在目录<code class="codeph">~repluser/.ssh</code> 。如果此目录不存在，则创建它仅具有<span class="italic">repluser</span>访问权限。确保<code class="codeph">.ssh</code>目录的<code class="codeph">ls</code>命令显示类似于以下内容的输出：</p><pre class="oac_no_warn" dir="ltr">repluser @ standby $ ls -ld~ / .ssh drwx ------ + 1 repluser Domain Users 4096 2016-02-23 11:27 .ssh</pre><p>如果在给定主节点上定义了<span class="italic">repladmin的</span>公钥，则它驻留在<code class="codeph">.pub</code>文件中，例如<code class="codeph">~repladmin/.ssh/id_rsa.pub</code> 。如果存在公钥文件，则将其内容添加到授权在作为复制运行的备用<span class="italic">数据库</span>的每个节点上作为<span class="italic">repluser</span>登录的密钥集。将密钥附加到每个备用节点上的文件<code class="codeph">~repluser/.ssh/authorized_keys2</code> ，必要时创建此文件。
                        </p>
                        <p>如果公钥文件不存在，请通过运行以下命令作为<span class="italic">repladmin</span>在主服务器上生成公钥和私钥对。
                        </p><pre class="oac_no_warn" dir="ltr">#ssh-keygen -t rsa</pre><p>您可以按回车键以响应命令发出的每个提示。将生成的<code class="codeph">.pub</code>文件复制到每个备用节点。
                        </p>
                        <p>您可以选择在主群集中的所有节点上为<span class="italic">repladmin</span>共享相同的公钥/私钥对，或者为每个主节点建立不同的密钥对。如果相同的公钥在主群集中的所有节点上对<span class="italic">repladmin</span>有效，则只需将该密钥添加到备用群集的每个节点上的文件<code class="codeph">~repluser/.ssh/authorized_keys2</code> 。如果每个主节点都有自己的<span class="italic">repladmin</span>公钥，则必须将所有公钥添加到该文件中。在任何一种情况下，您都可以通过将备用数据库的给定节点上更新的<code class="codeph">authorized_keys2</code>文件复制到群集的其他节点来最小化工作。
                        </p>
                     </div>
                     <div><span class="bold">获取备用主机密钥</span><p>必须在可以运行复制的每个主节点上知道可以运行复制的每个备用节点的主机密钥。生成正确密钥的一种方法是手动运行<code class="codeph">ssh</code>作为每个主节点到每个备用节点的<span class="italic">repladmin</span>用户。如果尚未知道正确的主机密钥，则会显示警告，您可以启用<code class="codeph">ssh</code>来添加密钥。
                        </p>
                        <p>请注意， <code class="codeph">ssh</code>连接中涉及两个用户。当主节点上的<code class="codeph">ssh</code>作为<span class="italic">repladmin</span>连接到备用节点时， <code class="codeph">ssh</code>在备用节点上以<span class="italic">repluser</span>身份<span class="italic">登录</span> 。备用数据库上由<code class="codeph">ssh</code>运行的任何命令都以<span class="italic">repluser</span>的权限运行，而不是使用<span class="italic">repladmin</span>权限。
                        </p>
                        <p>由于主节点以用户<span class="italic">repladmin</span>连接到备用节点，因此备用节点的主机密钥必须添加到<span class="italic">repladmin</span>用户的<code class="codeph">known_hosts</code>文件中，而不是<span class="italic">repluser</span>的文件。以下是获取主机密钥的示例：</p><pre class="oac_no_warn" dir="ltr">[repladmin @ primary usm] #sssh repluser @ standby date无法建立主机'standby（10.137.13.85）'的真实性。RSA密钥指纹是1b：a9：c6：68：47：b4：ec：7c：df：3a：f0：2a：6f：cf：a7：0a。您确定要继续连接（是/否）吗？</pre><p>如果您回答<code class="codeph">yes</code> ，则<code class="codeph">ssh</code>设置完成。主机备用主机密钥被存储在所述<code class="codeph">known_hosts</code>文件（ <code class="codeph">~repladmin/.ssh/known_hosts</code>上的主机<span class="italic">主</span>用户<span class="italic">repladmin）。</span>
                        </p>
                        <p>在给定主节点上完成备用节点的主机密钥设置后，如果使用虚拟IP地址（VIP）与备用群集通信，则需要执行其他步骤。您必须在引用备用群集中的主机的<code class="codeph">known_hosts</code>文件的每一行的开头添加VIP名称或地址。例如，如果您使用名称为<code class="codeph">standby12_vip</code>的VIP，并且您的<code class="codeph">known_hosts</code>文件包含以下两行引用您的备用数据库：</p><pre class="oac_no_warn" dir="ltr">standby1,10.242.20.22 SSH-RSA AAAAB3NzaC1yc2EAAAADAQABAAABAQC3pM2YTd4UUiEWEoCKDGgaTgsmPkQToDrdtU + JtVIq / 96muivU BaJUK83aqzeNIQkh + hUULsUdgKoKT5bxrWYqhY6AlTEqNgBHjBrJt9C73BbQd9y48jsc2G + WQWyuI / + + S1Q hIJdBNMxvMBQAfisPWWUcaIx9Y / JzlPgF6lRP2cbfqAzixDot9fqRrAKL3G6A75A / 6TbwmEW07d1zqOv l7ZGyeDYf5zQ72F / V0P9UgMEt / 5DmcYTn3kTVGjOTbnRBe4A4lY4rVw5c + nZBDFre66XtORfQgwQB5ztW / PI 08GYbcIszKoZx2HST9AZxYIAgcrnNYG2Ae0K6QLxxxScP standby2,10.242.20.23 SSH-RSA AAAAB3NzaC1yc2EAAAADAQABAAABAQDIszcjzNtKN03SY8Kl846skFTVP1HF / ykswbmkctEjL6KTWTW + NR U4MGbvkBqqdXxuPCR7aoGO2U3PEOg1UVf3DWUoux8IRvqKU + dJcdTibMFkDAIhTnzb14gZ / lRTjn + GYsuP5 Qz2vgL / U0ki887mZCRjWVL1b5FNH8sXBUV2QcD7bjF98VXF6n4gd5UiIC3jv6l2nVTKDwtNHpUTS1dQAi + 1D tr0AieZTsuxXMaDdUZHgKDotjciMB3mCkKm / u3IFoioDqdZE4 + vITX9G7DBN4CVPXawp + b5Kg8X9P + 08Eehu tMlBJ5lafy1bxoVlXUDLVIIFBJNKrsqBvxxxpS7</pre><p>要启用VIP，您可以修改这两行，如下所示：</p><pre class="oac_no_warn" dir="ltr">
<span class="bold">standby12_vip，standby1,10.242.20.22 SSH-RSA</span> AAAAB3NzaC1yc2EAAAADAQABAAABAQC3pM2YTd4UUiEWEoCKDGgaTgsmPkQToDrdtU + JtVIq / 96muivU BaJUK83aqzeNIQkh + hUULsUdgKoKT5bxrWYqhY6AlTEqNgBHjBrJt9C73BbQd9y48jsc2G + WQWyuI / + + S1Q hIJdBNMxvMBQAfisPWWUcaIx9Y / JzlPgF6lRP2cbfqAzixDot9fqRrAKL3G6A75A / 6TbwmEW07d1zqOv l7ZGyeDYf5zQ72F / V0P9UgMEt / 5DmcYTn3kTVGjOTbnRBe4A4lY4rVw5c + nZBDFre66XtORfQgwQB5ztW / PI 08GYbcIszKoZx2HST9AZxYIAgcrnNYG2Ae0K6QLxxxScP <span class="bold">standby12_vip，standby2,10.242.20.23 SSH-RSA</span> AAAAB3NzaC1yc2EAAAADAQABAAABAQDIszcjzNtKN03SY8Kl846skFTVP1HF / ykswbmkctEjL6KTWTW + NR U4MGbvkBqqdXxuPCR7aoGO2U3PEOg1UVf3DWUoux8IRvqKU + dJcdTibMFkDAIhTnzb14gZ / lRTjn + GYsuP5 Qz2vgL / U0ki887mZCRjWVL1b5FNH8sXBUV2QcD7bjF98VXF6n4gd5UiIC3jv6l2nVTKDwtNHpUTS1dQAi + 1D tr0AieZTsuxXMaDdUZHgKDotjciMB3mCkKm / u3IFoioDqdZE4 + vITX9G7DBN4CVPXawp + b5Kg8X9P + 08Eehu tMlBJ5lafy1bxoVlXUDLVIIFBJNKrsqBvxxxpS7</pre><p>最终，必须在主群集中的每个节点上执行在主群集的第一个节点上执行的主机密钥配置;每个主节点上必须存在上述序列的结果或等价物。最小化实现此配置所需的手动操作的一种方法是更新主群集的一个节点上的<code class="codeph">known_hosts</code>文件，然后将更新的文件复制到群集的其他节点。
                        </p>
                        <div class="infoboxnote" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-5E9BEBF3-D353-4C3C-B343-DA65EE35014C">
                           <p class="notep1">注意：</p>
                           <p>默认情况下，复制通过<code class="codeph">ssh</code>启用严格的主机密钥检查，以确保主节点在运行<code class="codeph">ssh</code>时连接到预期的备用节点或群集。但是，如果您确定不需要此检查，例如主群集和备用群集通过专用网络进行通信的情况，则可以禁用<code class="codeph">ssh</code>使用严格主机密钥检查。有关禁用严格主机密钥检查的信息，请参阅<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>命令的<code class="codeph">/o sshStrictKey=no</code>选项。如果禁用严格的主机密钥检查，则不需要设置主机密钥。有关<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code>命令的信息，请参阅<a href="acfs-commands-replication.html#GUID-E96CD9A2-00BD-4673-8FCC-DBB28A9E2DCD">acfsutil repl init</a> 。
                           </p>
                        </div>
                     </div>
                     <div><span class="bold">为SYSTEM用户添加密钥</span><p>Oracle ACFS复制使用在主群集的节点上运行的守护程序来控制复制进度。使用标识<code class="codeph">NT_AUTHORITY\SYSTEM</code>自动启动此守护程序。使用此守护程序，使用<code class="codeph">ssh</code>复制可以将主数据传输并应用到备用站点。
                        </p>
                        <p>守护程序启动的进程具有守护程序的标识。如果用户是<code class="codeph">NT_AUTHORITY\SYSTEM</code> ，那就是用户通过<code class="codeph">ssh</code>实际联系备用数据库。 <code class="codeph">ssh</code>在主目录中搜索<code class="codeph">SYSTEM</code>用户，以便向备用数据库显示公钥，并在那里检查以验证备用数据库提供的主机密钥。
                        </p>
                        <p>要使守护程序成功使用<code class="codeph">ssh</code> ，应将主服务器上为<span class="italic">repladmin</span>设置的<code class="codeph">.ssh</code>目录的内容复制到<code class="codeph">SYSTEM</code>主目录中的<code class="codeph">.ssh</code>目录中。使用此目录的位置，该位置与用于其他主目录的位置并行。
                        </p>
                        <p>例如，如果用户<span class="italic">repladmin</span>主目录是<code class="codeph">/home/repladmin</code> ，然后用<code class="codeph">/home/SYSTEM</code>作为主目录<code class="codeph">SYSTEM</code> 。像这样创建<code class="codeph">.ssh</code>目录，同时以<span class="italic">repladmin</span>身份登录。
                        </p>
                        <p>首先，为<code class="codeph">SYSTEM</code>创建主目录（如果它尚不存在）：</p><pre class="oac_no_warn" dir="ltr">$ mkdir / home / SYSTEM</pre><p>接下来，将<span class="italic">repladmin</span>的<code class="codeph">.ssh</code>目录复制到<code class="codeph">SYSTEM</code>的目录中：</p><pre class="oac_no_warn" dir="ltr">$ cd $ HOME $ cp -p -R .ssh / home / SYSTEM</pre></div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__TESTINGYOURCYGWINSETUP-DDC2192C">测试您的Cygwin设置</p>
                     <p>现在测试你的Cygwin设置。使用具有<code class="codeph">ssh</code>客户端的其他计算机，以用户<span class="italic">repladmin</span>执行以下命令：</p><pre class="oac_no_warn" dir="ltr">ssh -l repluser主机地址日期</pre><p>其中<code class="codeph">host-address</code>是指刚配置<code class="codeph">ssh</code>的主机。例如：</p><pre class="oac_no_warn" dir="ltr">ssh -l repluser standby1.us.example.com日期</pre><p>如果已成功完成安装并配置步骤，则应在不提示输入密码的情况下运行上一个命令。</p>
                     <p>如果在配置<code class="codeph">ssh</code>后遇到进程fork失败，内存泄漏错误或文件访问错误，请查看以下链接以获取解决方法：</p><pre class="oac_no_warn" dir="ltr">http://cygwin.com/faq.html</pre><p>如果您无法找到问题的解决方法，请使用以下链接向Cygwin社区报告您的问题：</p><pre class="oac_no_warn" dir="ltr">http://cygwin.com/problems.html</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7" name="GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7"></a><h3 id="OSTMG-GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7" class="sect3">升级到Oracle ACFS基于快照的复制</h3>
               <div>
                  <p>本节介绍升级到Oracle ACFS基于快照的复制。借助Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2），基于Oracle ACFS快照的复制成为受支持的Oracle ACFS复制实施。如果您具有12.2之前版本的复制环境，则在升级到Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2）时，必须将现有复制安装升级到基于快照的复制。
                  </p>
                  <div class="infoboxnote" id="GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7__GUID-5B0317C4-D820-4409-9041-377DB52D83FE">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>复制升级过程开始后，必须完成。该过程无法回滚。</p>
                        </li>
                        <li>
                           <p>在升级到基于快照的复制之前，应启用Oracle Flex ASM，并在必要时执行密码文件转换。</p>
                        </li>
                     </ul>
                  </div>
                  <p>当实例升级到Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2）时，必须为任何现有实例启用Oracle Flex ASM。如果实例中存在密码文件以支持复制，则必须启用该文件以在新的Oracle Flex ASM实例中使用。例如，如果实例的先前<code class="codeph">ORACLE_SID</code>设置为<code class="codeph">ASM</code>且当前<code class="codeph">ORACLE_SID</code>设置为<code class="codeph">APX1</code> ，则必须执行以下步骤：</p>
                  <ol>
                     <li>
                        <p>将现有的<code class="codeph">orapw+ASM</code>文件复制到<code class="codeph">+APX1</code>版本</p><pre class="oac_no_warn" dir="ltr">$ cp /oraroot/app/12.2.0/has0626/dbs/orapw+ASM /oraroot/app/12.2.0/has0626/dbs/orapw+APX1</pre></li>
                     <li>在<code class="codeph">dbs</code>目录中创建一个名为<code class="codeph">init+APX1.ora</code>的新文本文件，并将以下行添加到新文件中：<pre class="oac_no_warn" dir="ltr">remote_login_passwordfile =独家</pre></li>
                     <li>
                        <p>重新启动Oracle ASM代理（APX）实例。</p><pre class="oac_no_warn" dir="ltr">$ asmcmd shutdown --target APX --immediate</pre><p>确保将环境变量<code class="codeph">ORACLE_SID</code>设置为Oracle ASM代理（APX）实例。然后重启实例。
                        </p><pre class="oac_no_warn" dir="ltr">$ asmcmd startup --pfile init + APX1.ora</pre></li>
                  </ol>
                  <p>基于快照的复制使用<code class="codeph">ssh</code>作为主群集和备用群集之间的传输。在开始升级过程之前，必须配置<code class="codeph">ssh</code>中所描述<a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4">配置SSH的使用有了Oracle ACFS复制</a> 。
                  </p>
                  <p>在升级到基于快照的复制之前，必须将备用群集系统升级到Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2）。此群集升级应在24小时内完成。备用群集在此升级过程中继续运行现有复制。接下来，升级到主群集上的Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2）。此升级也应在24小时内完成。在此升级期间，主群集将继续运行在12.2之前安装的现有复制。完成Oracle Grid Infrastructure 12 <span class="italic">c</span>发布2（12.2）升级备用和主群集后，不支持在12.2之前安装的现有复制实施。
                  </p>
                  <p>在升级两个群集之后，必须立即将与要复制的文件系统关联的<code class="codeph">COMPATIBLE.ADVM</code>磁盘组属性设置为<code class="codeph">12.2.0.0.0</code> 。现在您已准备好转换到基于快照的复制。可以使用以下选项之一进行转换：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>终止现有复制并初始化以使用基于快照的复制。如果要复制的数据量很小（小于几百千兆字节），建议使用此选项。如果您的主文件系统不能轻易限制为仅安装在一个节点上，或者主服务器上的活动无法轻松停顿，则此选项也可能更为可取。</p>
                     </li>
                     <li>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code>命令以升级现有复制环境，而不终止和初始化复制。通过启用基于快照的复制从现有复制已停止的位置继续，此选项可避免将主文件系统的全部内容传输到备用数据库的需要。当复制大量数据时，此选项很有用。由于升级过程传输的数据非常少，因此您可以期望该过程快速完成。
                        </p>
                     </li>
                  </ul>
                  <p>以下列表提供了有关运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code>命令选项以升级到基于快照的复制的详细信息。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在开始复制升级过程之前，必须确保主文件系统仅安装在主群集的一个节点上。另外，强烈建议您停顿所有应用程序更新到主文件系统，然后运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">sync</code> <code class="codeph">apply</code>一个最终的时间，以确保在主所有的改变都被复制。
                        </p>
                     </li>
                     <li>
                        <p>升级过程的第一步是在主群集上运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">prepare</code>命令。此命令指定将用于基于快照的复制的用户和主机或接口名称，以及主装入点。用户名和主机名使用<code class="codeph">-s</code>选项给出，与用于基于快照的复制的<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>命令完全相同。
                        </p>
                     </li>
                     <li>
                        <p>此过程的下一步是通过运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">standby</code>命令来升级备用群集上的复制。此命令指定用于基于快照的复制的用户以及备用安装点。用户名使用<code class="codeph">-u</code>选项给出，与用于基于快照的复制的<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code>命令完全相同。
                        </p>
                     </li>
                     <li>
                        <p>此过程的最后一步是在主群集上运行a <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">primary</code>命令。这是自动终止先前复制部署并启动基于快照的复制的命令。此命令接受<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>命令为基于快照的复制接受的任何命令行选项，但<code class="codeph">-m</code>和<code class="codeph">-s</code>选项除外，因为该信息是从现在终止的先前复制环境获取的。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">primary</code>命令完成后，基于快照的复制应在受影响的主群集和备用群集之间处于活动状态，就像在12.2版本中使用基于快照的复制运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code>命令一样。您可以在主群集和备用群集上使用命令<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code>来确认每个群集上的复制状态。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7__GUID-0F4AD5A2-37E2-4827-B35B-0BE4D2AB4AE5">
                     <p class="notep1">注意：</p>
                     <p>如果在运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">standby</code>或<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">primary</code>时发生错误，请考虑以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>根据错误，复制可能看起来未初始化（ <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code>可能指示该情况），直到升级命令成功完成。
                           </p>
                        </li>
                        <li>
                           <p>要继续升级，您应该更正失败的升级命令指示的任何错误，然后只需重新发出失败的命令。该命令可以多次重发。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
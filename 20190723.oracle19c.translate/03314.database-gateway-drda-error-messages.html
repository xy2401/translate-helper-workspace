<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>错误消息，诊断和报告</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-drda-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T16:51:33-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18236-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="developing-applications.html" title="Previous" type="text/html"></link>
      <link rel="next" href="db2-data-dictionary.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for DRDA User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DRDAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="developing-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="db2-data-dictionary.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">错误消息，诊断和报告</li>
            </ol>
            <a id="GUID-7C0401EB-B206-4CC0-A4A6-8FB5782B57D7" name="GUID-7C0401EB-B206-4CC0-A4A6-8FB5782B57D7"></a><a id="DRDAG199"></a>
            
            <h2 id="DRDAG-GUID-7C0401EB-B206-4CC0-A4A6-8FB5782B57D7" class="sect2"><span class="enumeration_chapter">5</span>错误消息，诊断和报告</h2>
         </header>
         <div class="ind">
            <div>
               <p>以下部分提供有关错误的信息<a id="d42006e20" class="indexterm-anchor"></a>特定于Oracle数据库网关DRDA的消息和错误代码：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="database-gateway-drda-error-messages.html#GUID-682846C7-B32A-4AB1-8E96-CFAC816BD27B">解释网关错误消息</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-drda-error-messages.html#GUID-6F880170-01F9-40D4-AD5C-0CBA3A907B92">映射错误</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-drda-error-messages.html#GUID-852CD270-E7F8-45AC-BB98-FCB3F2CE37AC">SQL跟踪和网关</a></p>
                  </li>
               </ul>
            </div><a id="DRDAG200"></a><div class="props_rev_3"><a id="GUID-682846C7-B32A-4AB1-8E96-CFAC816BD27B" name="GUID-682846C7-B32A-4AB1-8E96-CFAC816BD27B"></a><h3 id="DRDAG-GUID-682846C7-B32A-4AB1-8E96-CFAC816BD27B" class="sect3">解释网关错误消息</h3>
               <div>
                  <p>网关架构由不同的组件组成。任何组件都可以检测并报告<a id="d42006e69" class="indexterm-anchor"></a>处理引用一个或多个DRDA数据库表的SQL语句时出现错误情况。这意味着错误可能很复杂，涉及错误代码和来自多个组件的支持数据。但是，在所有情况下，应用程序最终都会收到一个错误代码或返回代码。
                  </p>
                  <p>由于大多数网关消息超过了Oracle SQL通信区域（SQLCA）中的70个字符消息区域，因此编程接口和<a id="d42006e76" class="indexterm-anchor"></a>用于通过网关访问数据的Oracle调用接口应使用SQLGLM或OERHMS来查看整个消息文本。有关SQLGLM的其他信息，请参阅Oracle预编译器的程序员指南，有关OERHMS的更多信息，请参阅<a href="../lncpp/index.html" target="_blank"><span class="italic">Oracle C ++调用接口程序员指南</span></a> 。</p>
                  <p>使用网关时遇到的错误可能来自许多来源，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle数据库检测到的错误</p>
                     </li>
                     <li>
                        <p>网关检测到的错误</p>
                     </li>
                     <li>
                        <p>在DRDA软件中检测到的错误，无论是在客户端还是服务器端</p>
                     </li>
                     <li>
                        <p>沟通错误</p>
                     </li>
                     <li>
                        <p>服务器数据库检测到的错误</p>
                     </li>
                  </ul>
               </div><a id="DRDAG201"></a><div class="props_rev_3"><a id="GUID-C5255F58-F7C9-4FB5-91B7-765DA2C81683" name="GUID-C5255F58-F7C9-4FB5-91B7-765DA2C81683"></a><h4 id="DRDAG-GUID-C5255F58-F7C9-4FB5-91B7-765DA2C81683" class="sect4">网关检测到的错误</h4>
                  <div>
                     <p>Oracle数据库检测到的错误将使用标准<code class="codeph">ORA</code>类型消息报告回应用程序或工具。有关这些错误的描述，请参阅<a href="../errmg/index.html" target="_blank"><span class="italic">Oracle数据库错误消息</span></a> 。例如，指定未定义的数据库链接名称时会发生以下错误：</p><pre class="oac_no_warn" dir="ltr"><a id="d42006e143" class="indexterm-anchor"></a><a id="d42006e145" class="indexterm-anchor"></a> ORA-02019：连接描述<a id="d42006e150" class="indexterm-anchor"></a>找不到远程数据库</pre><p><code class="codeph">ORA-9100</code>至<code class="codeph">ORA-9199</code>范围内的错误保留用于通用网关层（网关的非DRDA特定组件）。<a href="../errmg/index.html" target="_blank"><span class="italic">Oracle数据库错误消息</span></a>中记录了此范围内的<a href="../errmg/index.html" target="_blank"><span class="italic">消息</span></a> 。
                     </p>
                  </div>
               </div><a id="DRDAG203"></a><div class="props_rev_3"><a id="GUID-61392C26-5D60-4D45-898A-9B4D2D870611" name="GUID-61392C26-5D60-4D45-898A-9B4D2D870611"></a><h4 id="DRDAG-GUID-61392C26-5D60-4D45-898A-9B4D2D870611" class="sect4">DRDA软件中检测到的错误</h4>
                  <div>
                     <p>通常会报告在客户端或服务器端的DRDA网关中检测到的错误<a id="d42006e200" class="indexterm-anchor"></a>错误<a id="d42006e205" class="indexterm-anchor"></a> <code class="codeph">ORA-28500</code> ，后跟特定于网关的扩展错误消息。扩展消息中报告了两个返回代码：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">drc</code>指定DRDA特定的错误。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">grc</code>指定在DRDA层中检测到的通用网关错误。这些错误记录在<a href="../errmg/index.html" target="_blank"><span class="italic">Oracle数据库错误消息中</span></a> 。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-61392C26-5D60-4D45-898A-9B4D2D870611__GUID-90D5EB75-3C56-43A0-8021-0D8DA72889FE">
                        <p class="notep1">注意：</p>
                        <p>错误代码<code class="codeph">ORA‐28500</code>是网关版本8之前的错误代码<code class="codeph">ORA‐09100</code> 。在网关版本8之前，错误代码<code class="codeph">ORA‐28501</code>被列为<code class="codeph">ORA‐09101</code> 。
                        </p>
                     </div>
                     <p><code class="codeph">drc</code>值后面括号中的值用于<a id="d42006e248" class="indexterm-anchor"></a><a id="d42006e254" class="indexterm-anchor"></a>由Oracle支持服务进行调试。<code class="codeph">errp</code>字段表示检测到错误的程序（客户端或服务器）。如果存在， <a id="d42006e262" class="indexterm-anchor"></a><a id="d42006e266" class="indexterm-anchor"></a> <code class="codeph">errmc</code>列出任何<a id="d42006e274" class="indexterm-anchor"></a>错误令牌。
                     </p>
                     <p>例如，如果未在DRDA服务器上定义i <code class="codeph">nitsid.ora</code>文件中使用<code class="codeph">DRDA_REMOTE_NAME</code>参数指定的数据库名称，则会返回以下错误消息：</p><pre class="oac_no_warn" dir="ltr">ORA-28500：从ORACLE到非Oracle系统的连接返回了以下消息：</pre></div>
               </div><a id="DRDAG205"></a><div class="props_rev_3"><a id="GUID-02F07CE0-4BDE-4170-B164-4252CA1701B2" name="GUID-02F07CE0-4BDE-4170-B164-4252CA1701B2"></a><h4 id="DRDAG-GUID-02F07CE0-4BDE-4170-B164-4252CA1701B2" class="sect4">DRDA服务器检测到的错误</h4>
                  <div>
                     <p><a id="d42006e311" class="indexterm-anchor"></a> DRDA服务器检测到的错误<a id="d42006e318" class="indexterm-anchor"></a>使用<code class="codeph">ORA-28500</code>报告，然后是特定于网关的扩展错误消息。有关正在使用的特定数据库，请参阅IBM文档。另请参阅<a href="database-gateway-drda-error-messages.html#GUID-6F880170-01F9-40D4-AD5C-0CBA3A907B92">映射错误</a>以了解转换的某些SQL错误。
                     </p>
                     <div class="infoboxnote" id="GUID-02F07CE0-4BDE-4170-B164-4252CA1701B2__GUID-E193A70E-95E0-4AE0-91E2-517E04C0C22E">
                        <p class="notep1">注意：</p>
                        <p>错误代码<code class="codeph">ORA‐28500</code>是网关版本8之前的错误代码<code class="codeph">ORA‐09100</code> 。在网关版本8之前，错误代码<code class="codeph">ORA‐28501</code>被列为<code class="codeph">ORA‐09101</code> 。
                        </p>
                     </div>
                     <p>例如，以下错误消息表明DRDA服务器未在<code class="codeph">initSID.ora</code>文件中的<code class="codeph">HS_FDS_CONNECT_INFO</code>参数中找到指定的DB2数据库名称：</p><pre class="oac_no_warn" dir="ltr">ORA-28500：从ORACLE到非Oracle系统的连接返回以下消息：[Oracle] [ODBC DB2 Wire Protocol驱动程序]未找到远程数据库：UNKNOWN</pre></div>
               </div>
            </div><a id="DRDAG206"></a><div class="props_rev_3"><a id="GUID-6F880170-01F9-40D4-AD5C-0CBA3A907B92" name="GUID-6F880170-01F9-40D4-AD5C-0CBA3A907B92"></a><h3 id="DRDAG-GUID-6F880170-01F9-40D4-AD5C-0CBA3A907B92" class="sect3">映射错误</h3>
               <div>
                  <p>一些<a id="d42006e375" class="indexterm-anchor"></a>从DRDA服务器返回SQL错误并将其转换为<a id="d42006e380" class="indexterm-anchor"></a><a id="d42006e384" class="indexterm-anchor"></a> Oracle错误代码。当Oracle实例或网关提供错误条件的特殊处理时，需要这样做。
                  </p>
                  <p>以下是翻译对象不存在错误的示例：</p><pre class="oac_no_warn" dir="ltr">ORA-00942：表或视图不存在[Oracle] [ODBC DB2 Wire Protocol驱动程序] [UDB DB2 for OS / 390和z / OS] PCASTRO.XXX是一个未定义的名称。</pre></div>
            </div><a id="DRDAG208"></a><div class="props_rev_3"><a id="GUID-852CD270-E7F8-45AC-BB98-FCB3F2CE37AC" name="GUID-852CD270-E7F8-45AC-BB98-FCB3F2CE37AC"></a><h3 id="DRDAG-GUID-852CD270-E7F8-45AC-BB98-FCB3F2CE37AC" class="sect3">SQL跟踪和网关</h3>
               <div>
                  <p>在开发应用程序时，能够查看通过网关传递的确切SQL语句通常很有用。以下部分描述了适当的设置<a id="d42006e416" class="indexterm-anchor"></a>跟踪<a id="d42006e421" class="indexterm-anchor"></a>参数和设置<a id="d42006e426" class="indexterm-anchor"></a><a id="d42006e430" class="indexterm-anchor"></a><a id="d42006e434" class="indexterm-anchor"></a>调试网关。
                  </p>
               </div><a id="DRDAG209"></a><div class="props_rev_3"><a id="GUID-8CB43673-CF56-4D65-9885-18BF4CE477C9" name="GUID-8CB43673-CF56-4D65-9885-18BF4CE477C9"></a><h4 id="DRDAG-GUID-8CB43673-CF56-4D65-9885-18BF4CE477C9" class="sect4">Oracle数据库中的SQL跟踪</h4>
                  <div>
                     <p>Oracle数据库具有捕获实际发送到网关的SQL语句的命令。调用此命令<a id="d42006e469" class="indexterm-anchor"></a><a id="d42006e473" class="indexterm-anchor"></a> <code class="codeph">EXPLAIN PLAN</code> 。 <code class="codeph">EXPLAIN PLAN</code>命令用于确定Oracle数据库执行指定SQL语句所遵循的执行计划。此命令将描述执行计划的每个步骤的行插入到指定的表中。如果使用基于成本的优化，则此命令还确定执行语句的成本。该命令的语法是：</p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN [SET STATEMENT_ID ='text'] [INTO [schema。] table [@dblink]] FOR语句</pre><p>有关此命令的详细信息，请参阅<a href="../sqlrf/EXPLAIN-PLAN.html#SQLRF01601" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                     </p>
                     <div class="infoboxnote" id="GUID-8CB43673-CF56-4D65-9885-18BF4CE477C9__GUID-C07AF14E-CBC9-4136-9276-111DAB0A30F0">
                        <p class="notep1">注意：</p>
                        <p>在大多数情况下， <code class="codeph">EXPLAIN PLAN</code>应足以提取实际发送到网关的SQL语句，从而发送到DRDA服务器。但是，某些SQL语句表单有<a id="d42006e496" class="indexterm-anchor"></a>在网关中对它们进行后处理。
                        </p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Relational database views over XML data provide conventional, relational access to XML content."></meta>
      <meta name="description" content="Relational database views over XML data provide conventional, relational access to XML content."></meta>
      <title>XML数据的关系视图</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Relational database views over XML data provide conventional, relational access to XML content."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="generation-of-XML-data-from-relational-data.html" title="Previous" type="text/html"></link>
      <link rel="next" href="XMLType-views.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="generation-of-XML-data-from-relational-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="XMLType-views.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="relational-data-to-and-from-XML-data.html" property="item" typeof="WebPage"><span property="name">与XML数据之间的关系数据</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">XML数据的关系视图</li>
            </ol>
            <a id="GUID-420496CE-D62F-4EBE-A76E-861B932AE1E6" name="GUID-420496CE-D62F-4EBE-A76E-861B932AE1E6"></a><a id="ADXDB6124"></a>
            
            <h2 id="ADXDB-GUID-420496CE-D62F-4EBE-A76E-861B932AE1E6" class="sect2"><span class="enumeration_chapter">9</span> XML数据的关系视图</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='relational-views-over-XML-data'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>XML数据的关系数据库视图提供对XML内容的传统关系访问。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="relational-views-over-XML-data.html#GUID-614FF4CF-E438-4DA7-A6EB-4B673A52A8CF">在XML数据上创建和使用关系视图的简介</a><br>您可以使用Oracle XML DB提供的特定于XML的函数和方法来创建提供对XML内容的关系访问的传统数据库视图。这使得理解Oracle数据库（但不一定是XML）的程序员，工具和应用程序可以使用存储在数据库中的XML内容。
                  </li>
                  <li class="ulchildlink"><a href="relational-views-over-XML-data.html#GUID-72791BF5-0F8A-4164-9036-A8E1F920C3CF">通过XML创建关系视图：每个XML文档一行</a><br>要将<code class="codeph">XMLType</code>表中的每个文档作为关系视图中的行公开，请使用<code class="codeph">CREATE OR REPLACE VIEW AS SELECT</code> ，从<code class="codeph">XMLType</code>表的连接和使用SQL / XML函数<code class="codeph">XMLTable</code>从XML数据创建的关系表中进行选择。
                  </li>
                  <li class="ulchildlink"><a href="relational-views-over-XML-data.html#GUID-E550E7D4-0D19-47CA-B86F-76825EE54CE1">通过XML创建关系视图：将XML节点映射到列</a><br>要将<code class="codeph">XMLType</code>表的多个级别的数据作为关系视图中的单个行公开， <code class="codeph">XMLType</code> SQL / XML函数<code class="codeph">XMLTable</code>应用于每个级别。只要<code class="codeph">XMLType</code>表中的文档与视图中的行之间存在<span class="italic">一对多</span> （1：N）关系，就应使用此技术。
                  </li>
                  <li class="ulchildlink"><a href="relational-views-over-XML-data.html#GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C">使用关系视图索引二进制XML数据的索引</a><br>如果<code class="codeph">XMLIndex</code>上的<code class="codeph">XMLIndex</code>索引的结构化组件的关系列与该数据上的关系视图的列匹配，则该视图也被有效地编入索引。
                  </li>
                  <li class="ulchildlink"><a href="relational-views-over-XML-data.html#GUID-E01598F7-2AB9-406A-9C33-678943880812">将XML内容作为关系数据查询</a><br>这里的示例显示了XML数据的关系查询。它们说明了通过在<code class="codeph">XMLType</code>表和列上创建关系视图所提供的一些好处。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="relational-data-to-and-from-XML-data.html#GUID-52910135-EC23-41B2-97EC-116790BF6A3C" title="您可以通过多种方式将现有关系数据视为XML数据。">与XML数据相关的关系数据</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB4134"></a><div class="props_rev_3"><a id="GUID-614FF4CF-E438-4DA7-A6EB-4B673A52A8CF" name="GUID-614FF4CF-E438-4DA7-A6EB-4B673A52A8CF"></a><h3 id="ADXDB-GUID-614FF4CF-E438-4DA7-A6EB-4B673A52A8CF" class="sect3"><span class="enumeration_section">9.1</span>在XML数据上创建和使用关系视图的简介</h3>
               <div>
                  <p>您可以使用Oracle XML DB提供的特定于XML的函数和方法来创建提供对XML内容的关系访问的传统数据库视图。这使得理解Oracle数据库（但不一定是XML）的程序员，工具和应用程序可以使用存储在数据库中的XML内容。</p>
                  <p>关系视图可以使用XQuery表达式和SQL / XML函数（如<code class="codeph">XMLTable</code>来定义视图中的列与XML文档中的节点之间的映射。
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="xquery-and-XML-DB.html#GUID-4F83A835-C94B-4D62-999B-111AB5E8A8F1" title="XQuery语言是您与Oracle XML DB中的XML数据交互的主要方式之一。对该语言的支持包括SQL * Plus commandXQUERY和SQL / XML函数XMLQuery，XMLTable，XMLExists和XMLCast。">XQuery和Oracle XML DB</a></li>
                        <li><a href="indexes-for-XMLType-data.html#GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC" title="您可以在XML数据上创建索引，专注于经常查询的特定部分，从而提高性能。您可以通过多种方式索引XMLType数据，无论是基于XML模式还是非基于模式，无论您使用何种XMLType存储模型。">XMLType数据的索引</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="relational-views-over-XML-data.html#GUID-420496CE-D62F-4EBE-A76E-861B932AE1E6" title="XML数据的关系数据库视图提供对XML内容的传统关系访问。">XML数据的关系视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4136"></a><a id="ADXDB4135"></a><div class="props_rev_3"><a id="GUID-72791BF5-0F8A-4164-9036-A8E1F920C3CF" name="GUID-72791BF5-0F8A-4164-9036-A8E1F920C3CF"></a><h3 id="ADXDB-GUID-72791BF5-0F8A-4164-9036-A8E1F920C3CF" class="sect3"><span class="enumeration_section">9.2</span>通过XML创建关系视图：每个XML文档一行</h3>
               <div>
                  <p>要将<code class="codeph">XMLType</code>表中的每个文档作为关系视图中的行公开，请使用<code class="codeph">CREATE OR REPLACE VIEW AS SELECT</code> ，从<code class="codeph">XMLType</code>表的连接和使用SQL / XML函数<code class="codeph">XMLTable</code>从XML数据创建的关系表中进行选择。
                  </p>
                  <div class="section">
                     <p>您可以使用标准SQL / XML函数<code class="codeph">XMLTable</code>将XML文档中的节点映射到视图中的列。只要<code class="codeph">XMLType</code>表中的文档与视图中的行之间存在<span class="italic">一对一</span> （1：1）关系，就使用此技术。
                     </p>
                     <p><a href="relational-views-over-XML-data.html#GUID-72791BF5-0F8A-4164-9036-A8E1F920C3CF__BJFCIHJE">例9-1</a>创建了关系视图<code class="codeph">purchaseorder_master_view</code> ，它在<code class="codeph">XMLType</code>表<code class="codeph">po_binaryxml</code>每一行都有一行。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-72791BF5-0F8A-4164-9036-A8E1F920C3CF__BJFCIHJE">
                     <p class="titleinexample">示例9-1创建XML内容的关系视图</p><pre class="pre codeblock"><code>CREATE TABLE po_binaryxml OF XMLType XMLTYPE STORE AS BINARY XML; INSERT INTO po_binaryxml SELECT OBJECT_VALUE FROM OE.purchaseorder;创建或替换视图<span class="bold">purchaseorder_master_view</span> AS SELECT <span class="bold">po。*</span> FROM po_binaryxml pur，XMLTable（'$ p / PurchaseOrder'PASSING pur。OBJECT_VALUE为“p”COLUMNS引用VARCHAR2（30）路径'引用'，请求者VARCHAR2（128）路径'请求者'，用户ID VARCHAR2（10）路径'用户'，costcenter VARCHAR2（4）路径'CostCenter'，ship_to_name VARCHAR2（20 ）PATH'ShippingInstructions / name'，ship_to_address VARCHAR2（256）路径'ShippingInstructions / address'，ship_to_phone VARCHAR2（24）路径'ShippingInstructions / telephone'，说明VARCHAR2（2048）路径'SpecialInstructions'） <span class="bold">po</span> ;查看已创建。DESCRIBE purchaseorder_master_view名称是否为空？类型-------------------------------------------- REFERENCE VARCHAR2（30） REQUESTOR VARCHAR2（128）USERID VARCHAR2（10）COSTCENTER VARCHAR2（4）SHIP_TO_NAME VARCHAR2（20）SHIP_TO_ADDRESS VARCHAR2（256）SHIP_TO_PHONE VARCHAR2（24）INSTRUCTIONS VARCHAR2（2048）</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="relational-views-over-XML-data.html#GUID-420496CE-D62F-4EBE-A76E-861B932AE1E6" title="XML数据的关系数据库视图提供对XML内容的传统关系访问。">XML数据的关系视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4138"></a><a id="ADXDB4137"></a><div class="props_rev_3"><a id="GUID-E550E7D4-0D19-47CA-B86F-76825EE54CE1" name="GUID-E550E7D4-0D19-47CA-B86F-76825EE54CE1"></a><h3 id="ADXDB-GUID-E550E7D4-0D19-47CA-B86F-76825EE54CE1" class="sect3"><span class="enumeration_section">9.3</span>通过XML创建关系视图：将XML节点映射到列</h3>
               <div>
                  <p>要将<code class="codeph">XMLType</code>表的多个级别的数据作为关系视图中的单个行公开， <code class="codeph">XMLType</code> SQL / XML函数<code class="codeph">XMLTable</code>应用于每个级别。只要<code class="codeph">XMLType</code>表中的文档与视图中的行之间存在<span class="italic">一对多</span> （1：N）关系，就应使用此技术。
                  </p>
                  <div class="section">
                     <p>也就是说，您使用与分解单个级别相同的一般方法（请参阅<a href="relational-views-over-XML-data.html#GUID-72791BF5-0F8A-4164-9036-A8E1F920C3CF" title="要将XMLType表中的每个文档作为关系视图中的行公开，请使用CREATE OR REPLACE VIEW AS SELECT，从XMLType表的连接和使用SQL / XML函数XMLTable从XML数据创建的关系表中进行选择。">创建基于XML的关系视图：每个XML文档一行</a> ）：定义构成视图的列，并将XML节点映射到这些列。但在这种情况下，您将<code class="codeph">XMLTable</code>应用于要<code class="codeph">XMLTable</code>并存储在关系列中的每个文档级别。
                     </p>
                     <p>例如，每个<code class="codeph">PurchaseOrder</code>元素都包含一个<code class="codeph">LineItems</code>元素，该元素又包含一个或多个<code class="codeph">LineItem</code>元素。每个<code class="codeph">LineItem</code>元素都有子元素，例如<code class="codeph">Description</code>和<code class="codeph">ItemNumber</code>属性。要使这些较低级别的数据可作为关系值访问，请使用<code class="codeph">XMLTable</code>来同时投影<code class="codeph">PurchaseOrder</code>元素和<code class="codeph">LineItem</code>集合。
                     </p>
                     <p>当元素<code class="codeph">PurchaseOrder</code>被分解时，其后代<code class="codeph">LineItem</code>元素被映射到<code class="codeph">XMLType</code>类型的列，其中包含XML片段。然后将该列传<code class="codeph">XMLTable</code>对<code class="codeph">XMLTable</code>的第二次调用，将其作为多列关系值分解为其各个部分。
                     </p>
                     <p><a href="relational-views-over-XML-data.html#GUID-E550E7D4-0D19-47CA-B86F-76825EE54CE1__CHDEEIFD">例9-2</a>说明了这一点。它使用<code class="codeph">XMLTable</code>实现<code class="codeph">XMLType</code>表<code class="codeph">po_binaryxml</code>的文档与关系视图<code class="codeph">purchaseorder_detail_view</code>的行之间的<span class="italic">一对多</span> （1：N）关系。该视图提供对集合的各个成员的访问，并将集合成员公开为一组行。
                     </p>
                     <p>在<a href="relational-views-over-XML-data.html#GUID-E550E7D4-0D19-47CA-B86F-76825EE54CE1__CHDEEIFD">示例9-2中</a> ，对于存储在<code class="codeph">XMLType</code>表<code class="codeph">po_binaryxml</code>中的XML文档中的每个<code class="codeph">LineItem</code>元素，视图<code class="codeph">purchaseorder_detail_view</code>有一行。
                     </p>
                     <p><a href="relational-views-over-XML-data.html#GUID-E550E7D4-0D19-47CA-B86F-76825EE54CE1__CHDEEIFD">例9-2</a>的<code class="codeph">CREATE OR REPLACE VIEW</code>语句定义了构成视图的一组关系列。<code class="codeph">SELECT</code>语句将表<code class="codeph">po_binaryxml</code>作为上下文传递给函数<code class="codeph">XMLTable</code>以创建虚拟表<code class="codeph">p</code> ，其具有列<code class="codeph">reference</code>和<code class="codeph">lineitem</code> 。这些列分别包含采购订单文档的<code class="codeph">Reference</code>和<code class="codeph">LineItem</code>元素。
                     </p>
                     <p>列<code class="codeph">lineitem</code>包含一组<code class="codeph">LineItem</code>元素作为<code class="codeph">XMLType</code>实例 - 每个元素占一行。这些行又传递给第二个<code class="codeph">XMLTable</code>表达式作为其上下文。第二个<code class="codeph">XMLTable</code>表达式创建一个行项目行的虚拟表，其中列对应于元素<code class="codeph">LineItem</code>各种后代节点。这些后代中的大多数是属性（ <code class="codeph">ItemNumber</code> ， <code class="codeph">Part/@Id</code>等）。其中一个后代是子元素<code class="codeph">Description</code> 。
                     </p>
                     <p>元素<code class="codeph">Reference</code>在视图<code class="codeph">purchaseorder_detail_view</code>作为列<code class="codeph">reference</code>投影。它提供了可以用来连接鉴于行的外键<code class="codeph">purchaseorder_detail_view</code>在视图相应的行<code class="codeph">purchaseorder_master_view</code> 。<code class="codeph">CREATE OR REPLACE VIEW</code>语句中的相关联接可确保每次访问视图时都保持元素<code class="codeph">Reference</code>与关联的<code class="codeph">LineItem</code>元素之间的一对多（1：N）关系。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E550E7D4-0D19-47CA-B86F-76825EE54CE1__CHDEEIFD">
                     <p class="titleinexample">示例9-2使用视图访问集合的各个成员</p><pre class="oac_no_warn" dir="ltr">创建或替换视图<span class="bold">purchaseorder_detail_view</span> AS SELECT <span class="bold">po.reference</span> ， <span class="bold">li。*</span> FROM po_binaryxml p，XMLTable（'/ PurchaseOrder'PASSING p。OBJECT_VALUE COLUMNS <span class="bold">引用</span> VARCHAR2（30）PATH'引用'，lineitem XMLType PATH'LineItems / LineItem'） <span class="bold">po</span> ，XMLTable（'/ LineItem'PASSING po.lineitem COLUMNS itemno NUMBER（38）PATH' @ ItemNumber'，description VARCHAR2（256） PATH'描述'，partno VARCHAR2（14）PATH'Part / @ Id'，数量NUMBER（12,2）PATH'Part / @ Quantity'，unitprice NUMBER（8,4）PATH'Part / @ UnitPrice'） <span class="bold">li</span> ;查看已创建。DESCRIBE purchaseorder_detail_view名称是否为空？类型---------------------------- REFERENCE VARCHAR2（30）ITEMNO NUMBER（38）DESCRIPTION VARCHAR2（256）PARTNO VARCHAR2（14）QUANTITY数字（12,2）单位数（8,4）</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="relational-views-over-XML-data.html#GUID-420496CE-D62F-4EBE-A76E-861B932AE1E6" title="XML数据的关系数据库视图提供对XML内容的传统关系访问。">XML数据的关系视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB6126"></a><a id="ADXDB6127"></a><a id="ADXDB6125"></a><div class="props_rev_3"><a id="GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C" name="GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C"></a><h3 id="ADXDB-GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C" class="sect3"><span class="enumeration_section">9.4</span>使用关系视图索引二进制XML数据的索引</h3>
               <div>
                  <p>如果<code class="codeph">XMLIndex</code>上的<code class="codeph">XMLIndex</code>索引的结构化组件的关系列与该数据上的关系视图的列匹配，则该视图也被有效地编入索引。
                  </p>
                  <div class="section">
                     <p>当关系视图中公开的<code class="codeph">XMLType</code>数据存储为二进制XML时，通常可以通过创建具有与视图列匹配的结构化组件的<code class="codeph">XMLIndex</code>索引来提高性能。就像视图一样，这样的索引将部分XML数据投影到关系列上。当索引的列与视图的列匹配时，视图本身就会被索引。
                     </p>
                     <p>为了简化这种<code class="codeph">XMLIndex</code>索引的创建，您可以使用PL / SQL函数<code class="codeph">DBMS_XMLSTORAGE_MANAGE.getSIDXDefFromView</code>来准确提供创建索引所需的<code class="codeph">XMLTable</code>表达式。这是此函数的唯一目的：返回可用于为关系视图创建<code class="codeph">XMLIndex</code>索引的<code class="codeph">XMLTable</code>表达式。它将视图作为参数并返回<code class="codeph">CLOB</code>实例。<a href="relational-views-over-XML-data.html#GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C__BACDHEJH">例9-3</a>说明了这一点。
                     </p>
                     <p><a href="relational-views-over-XML-data.html#GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C__BACDCDFI">例9-4</a>显示了<a href="relational-views-over-XML-data.html#GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C__BACDHEJH">例9-3中</a>使用的<code class="codeph">XMLTable</code>表达式。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C__GUID-AF4B1DCB-CFF7-4756-9BB7-EC47360DF2F4">
                        <p class="notep1">也可以看看：</p>
                        <p>有关PL / SQL函数<code class="codeph">DBMS_XMLSTORAGE_MANAGE.getSIDXDefFromView</code>信息，请参阅<a href="../arpls/DBMS_XMLSCHEMA_ANNOTATE.html#ARPLS74791" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C__BACDHEJH">
                     <p class="titleinexample">示例9-3匹配关系视图列的XMLIndex索引</p><pre class="oac_no_warn" dir="ltr">CALL DBMS_XMLINDEX.registerParameter（ 'my_param'，DBMS_XMLSTORAGE_MANAGE <span class="bold">getSIDXDefFromView（</span> 'PURCHASEORDER_MASTER_VIEW'））; <a id="fn_1" name="fn_1" href="#fn_1" the="" view-name="" argument="" to="" getsidxdeffromview="" must="" be="" uppercase,="" because="" that="" is="" how="" recorded=")" ="" onclick="footdisplay(1, "><sup>脚1</sup></a> CREATE INDEX my_idx on po_binaryxml（OBJECT_VALUE）INDEXTYPE IS XDB.XMLIndex PARAMETERS（'PARAM my_param'）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C__BACDCDFI">
                     <p class="titleinexample">例9-4 PL / SQL函数getSIDXDefFromView返回的XMLTable表达式</p><pre class="oac_no_warn" dir="ltr">SELECT DBMS_XMLSTORAGE_MANAGE.getSIDXDefFromView（'PURCHASEORDER_MASTER_VIEW'）FROM DUAL; XMLTABLE po_binaryxml_XTAB_1'/ PurchaseOrder'PASSING OBJECT_VALUE COLUMNS reference VARCHAR2（30）PATH'Reference'，requestor VARCHAR2（128）PATH'Requestor'，userid VARCHAR2（10）PATH'User'，costcenter VARCHAR2（4）PATH'CostCenter'，ship_to_name VARCHAR2（20）路径'ShippingInstructions / name'，ship_to_address VARCHAR2（256）路径'ShippingInstructions / address'，ship_to_phone VARCHAR2（24）路径'ShippingInstructions / telephone'，说明VARCHAR2（2048）路径'SpecialInstructions'</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="indexes-for-XMLType-data.html#GUID-476331FD-F58B-4980-BECD-015F0A794AC9" title="XMLIndex结构化组件为XML数据中的特定结构岛编制索引。">XMLIndex与结构化组件的使用</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="relational-views-over-XML-data.html#GUID-420496CE-D62F-4EBE-A76E-861B932AE1E6" title="XML数据的关系数据库视图提供对XML内容的传统关系访问。">XML数据的关系视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4140"></a><a id="ADXDB6128"></a><a id="ADXDB4141"></a><a id="ADXDB4139"></a><div class="props_rev_3"><a id="GUID-E01598F7-2AB9-406A-9C33-678943880812" name="GUID-E01598F7-2AB9-406A-9C33-678943880812"></a><h3 id="ADXDB-GUID-E01598F7-2AB9-406A-9C33-678943880812" class="sect3"><span class="enumeration_section">9.5将</span> XML内容作为关系数据查询</h3>
               <div>
                  <p>这里的示例显示了XML数据的关系查询。它们说明了通过在<code class="codeph">XMLType</code>表和列上创建关系视图所提供的一些好处。
                  </p>
                  <div class="section">
                     <p><a href="relational-views-over-XML-data.html#GUID-E01598F7-2AB9-406A-9C33-678943880812__BJFCEJFA">例9-5</a>和<a href="relational-views-over-XML-data.html#GUID-E01598F7-2AB9-406A-9C33-678943880812__BACDJBDA">例9-6</a>显示了如何查询XML数据的主关系视图和详细关系视图。<a href="relational-views-over-XML-data.html#GUID-E01598F7-2AB9-406A-9C33-678943880812__BJFCEJFA">例9-5</a>查询主视图以选择列<code class="codeph">userid</code>以<code class="codeph">S</code>开头的行。</p>
                     <p><a href="relational-views-over-XML-data.html#GUID-E01598F7-2AB9-406A-9C33-678943880812__BACDJBDA">例9-6</a>连接主视图和详细视图。它选择<code class="codeph">purchaseorder_detail_view</code>行，其中column <code class="codeph">itemno</code>值为<code class="codeph">1</code> ，相应的<code class="codeph">purchaseorder_master_view</code>行包含值为<code class="codeph">SBELL</code>的<code class="codeph">userid</code>列。</p>
                     <p><a href="relational-views-over-XML-data.html#GUID-E01598F7-2AB9-406A-9C33-678943880812__BJFBEFDD">例9-7</a>显示了如何使用XML内容的关系视图来对XML文档执行业务智能查询。示例查询选择包含由UPC代码<code class="codeph">715515009058</code>和<code class="codeph">715515009126</code>标识的标题的订单的<code class="codeph">PurchaseOrder</code>文档。
                     </p>
                     <p><a href="relational-views-over-XML-data.html#GUID-E01598F7-2AB9-406A-9C33-678943880812__BJFBEFDD">例9-7中</a>的查询确定了每个<code class="codeph">PurchaseOrder</code>文档中订购的每个电影标题的副本数。例如，对于零件号<code class="codeph">715515009126</code> ，有四个<code class="codeph">PurchaseOrder</code>文档，其中<code class="codeph">PurchaseOrder</code>了该项目的一个副本，以及七个<code class="codeph">PurchaseOrder</code>文档，其中<code class="codeph">PurchaseOrder</code>了该项目的三个副本。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E01598F7-2AB9-406A-9C33-678943880812__BJFCEJFA">
                     <p class="titleinexample">示例9-5查询XML数据的主关系视图</p><pre class="pre codeblock"><code>SELECT reference，costcenter，ship_to_name FROM purchaseorder_master_view WHERE userid LIKE'S％'; REFERENCE COST SHIP_TO_NAME ------------------------------ ---- ------------- -  SBELL-20021009123336231PDT S30 Sarah J. Bell SBELL-20021009123336331PDT S30 Sarah J. Bell SKING-20021009123336321PDT A10 Steven A. King ...选择了36行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-E01598F7-2AB9-406A-9C33-678943880812__BACDJBDA">
                     <p class="titleinexample">示例9-6查询XML数据的主关系视图和详细信息关系视图</p><pre class="pre codeblock"><code>SELECT d.reference，d.itemno，d.partno，d.description FROM purchaseorder_detail_view d，purchaseorder_master_view m WHERE m.reference = d.reference AND m.userid ='SBELL'AND d.itemno = 1;参考文章PARTNO DESCRIPTION ------------------------------ ---------------- -------------------------------- SBELL-20021009123336231PDT 1 37429165829精神的朱丽叶SBELL-20021009123336331PDT 1 715515009225 Salo SBELL-20021009123337353PDT 1 37429141625第三人SBELL-20021009123338304PDT 1 715515009829北方纳洛克SBELL-20021009123338505PDT 1 37429122228 400吹气SBELL-20021009123335771PDT 1 37429139028船舶航行SBELL-20021009123335280PDT 1 715515011426所有天堂允许SBELL-2002100912333763PDT 1 715515010320生活布赖恩 - Python SBELL-2002100912333601PDT 1 715515009058一个难忘的夜晚SBELL-20021009123336362PDT 1 715515012928花样年爱SBELL-20021009123336532PDT 1 37429162422野草莓SBELL-20021009123338204PDT 1 37429168820红胡子SBELL-20021009123337673PDT 1 37429156322哭泣和耳语13行选择。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-E01598F7-2AB9-406A-9C33-678943880812__BJFBEFDD">
                     <p class="titleinexample">示例9-7使用视图的XML数据的业务智能查询</p><pre class="pre codeblock"><code>SELECT partno，count（*）“No of Orders”，数量“No of Copies”来自purchaseorder_detail_view WHERE partno IN（715515009126,715515009058）GROUP BY汇总（partno，quantity）; PARTNO没有份数的副本-------------- ------------ ------------ 715515009058 7 1 715515009058 9 2 715515009058 5 3 715515009058 2 4 715515009058 23 715515009126 4 1 715515009126 7 3 715515009126 11 34选择了9行。
</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="relational-views-over-XML-data.html#GUID-420496CE-D62F-4EBE-A76E-861B932AE1E6" title="XML数据的关系数据库视图提供对XML内容的传统关系访问。">XML数据的关系视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <hr><br><p style="text-decoration:underline">脚注图例</p>脚注1：<p><code class="codeph">getSIDXDefFromView</code>的view-name参数必须为大写，因为这是记录名称的方式。
            </p><br></div>
      </article>
   </body>
</html>
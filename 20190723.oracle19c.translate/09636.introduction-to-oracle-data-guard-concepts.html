<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle Data Guard ensures high availability, data protection, and disaster recovery for enterprise data."></meta>
      <meta name="description" content="Oracle Data Guard ensures high availability, data protection, and disaster recovery for enterprise data."></meta>
      <title>Oracle Data Guard简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Concepts and Administration "></meta>
      <meta property="og:description" content="Oracle Data Guard ensures high availability, data protection, and disaster recovery for enterprise data."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Concepts and Administration"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96244-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-data-guard-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="getting-started-with-oracle-data-guard.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration"></meta>
    <meta name="dcterms.isVersionOf" content="SBYDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-data-guard-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="getting-started-with-oracle-data-guard.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Data Guard简介</li>
            </ol>
            <a id="GUID-5E73667D-4A56-445E-911F-1E99092DD8D7" name="GUID-5E73667D-4A56-445E-911F-1E99092DD8D7"></a><a id="SBYDB00010"></a>
            
            <h2 id="SBYDB-GUID-5E73667D-4A56-445E-911F-1E99092DD8D7" class="sect2"><span class="enumeration_chapter">1</span> Oracle Data Guard简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Data Guard可确保企业数据的高可用性，数据保护和灾难恢复。</p>
               <p>Oracle Data Guard提供了一整套服务，可以创建，维护，管理和监视一个或多个备用数据库，从而使生产Oracle数据库能够在灾难和数据损坏中幸免于难。Oracle Data Guard将这些备用数据库维护为生产数据库的副本。然后，如果生产数据库由于计划内或计划外中断而变得不可用，则Oracle Data Guard可以将任何备用数据库切换到生产角色，从而最大限度地减少与中断相关的停机时间。Oracle Data Guard可与传统的备份，还原和集群技术一起使用，以提供高级别的数据保护和数据可用性。其他Oracle功能（如Oracle Streams和Oracle GoldenGate）也使用Oracle Data Guard传输服务，以便将重做从源数据库高效可靠地传输到一个或多个远程目标。</p>
               <p>借助Oracle Data Guard，管理员可以通过将资源密集型备份和报告操作卸载到备用系统来选择性地提高生产数据库性能。</p>
               <p>请参阅以下主题，这些主题描述了Oracle Data Guard的重点：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-AB9DF863-2C7E-4767-81F2-56AD0FA30B49" title="Oracle Data Guard配置可以包含一个主数据库和最多三十个目标。">Oracle Data Guard配置</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-5765C9D9-0611-4A8F-9CC0-5A818CE127A7" title="Oracle Data Guard使用重做传输服务和应用服务来管理重做数据的传输，重做数据的应用以及对数据库角色的更改。">Oracle Data Guard服务</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-538B9DDD-1553-479D-8E1D-0B5C6848403E" title="Oracle Data Guard代理是一个分布式管理框架，可自动创建，维护和监视Oracle Data Guard配置。">Oracle Data Guard Broker</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-65DA4E2E-3666-4972-895C-EA45D043B127" title="Oracle Data Guard提供三种不同的数据保护模式。">Oracle Data Guard保护模式</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-B26CA33C-999A-434D-A26D-3179AC3F8718" title="高可用性体系结构需要数据库和数据库客户端的快速故障转移功能。客户端故障转移包括故障通知，过时连接清除以及与新主数据库的透明重新连接。">客户端故障转移</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-9EEFD8E5-901F-4092-85F4-2E0069AC5923" title="Oracle数据库提供了几种独特的技术，可以补充Oracle Data Guard，与单独使用任何一种解决方案相比，可以使业务关键系统保持更高的可用性和数据保护。">Oracle Data Guard和补充技术</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-858549EF-B72F-4545-A5D1-C632C8ECC961" title="Oracle Sharding允许您跨多个独立的Oracle数据库水平分区数据，并将数据库连接请求路由到包含适当数据的数据库。Oracle Data Guard和Oracle Sharding是集成技术。">Oracle Active Data Guard支持Oracle Sharding</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-C65BF458-4BF7-4723-BAFC-5860B5B88A2B" title="Oracle Data Guard提供高效，全面的灾难恢复和高可用性解决方案。">Oracle Data Guard优点摘要</a></p>
                  </li>
               </ul>
            </div><a id="SBYDB4701"></a><div class="props_rev_3"><a id="GUID-AB9DF863-2C7E-4767-81F2-56AD0FA30B49" name="GUID-AB9DF863-2C7E-4767-81F2-56AD0FA30B49"></a><h3 id="SBYDB-GUID-AB9DF863-2C7E-4767-81F2-56AD0FA30B49" class="sect3"><span class="enumeration_section">1.1</span> Oracle Data Guard配置</h3>
               <div>
                  <p><span class="bold">Oracle Data Guard配置</span>可以包含一个主数据库和最多三十个目标。
                  </p>
                  <p>Oracle Data Guard配置的成员由Oracle Net连接，可能在地理上分散。只要Oracle Data Guard配置的成员可以相互通信，它们的位置就没有限制。例如，您可以在与主数据库相同的数据中心中拥有备用数据库，以及在另一个数据中心中使用两个备用数据库。</p>
                  <p>您可以使用SQL命令行界面或Oracle Data Guard代理接口管理主数据库和备用数据库。代理提供命令行界面（DGMGRL）和集成在Oracle Enterprise Manager云控制中的图形用户界面。</p>
               </div><a id="SBYDB4702"></a><div class="props_rev_3"><a id="GUID-0472F1B0-C2AA-4E9D-8773-1A7FBE27DC82" name="GUID-0472F1B0-C2AA-4E9D-8773-1A7FBE27DC82"></a><h4 id="SBYDB-GUID-0472F1B0-C2AA-4E9D-8773-1A7FBE27DC82" class="sect4"><span class="enumeration_section">1.1.1</span>主数据库</h4>
                  <div>
                     <p>Oracle Data Guard配置包含一个以主要角色运行的生产数据库（也称为主数据库）。</p>
                     <p>主数据库是大多数应用程序访问的数据库。</p>
                     <p>主数据库可以是单实例Oracle数据库，也可以是Oracle Ral Application Clusters（Oracle RAC）数据库。
                     </p>
                  </div>
               </div><a id="SBYDB4703"></a><div class="props_rev_3"><a id="GUID-C49AC6F4-C89B-4487-BC18-428D65865B9A" name="GUID-C49AC6F4-C89B-4487-BC18-428D65865B9A"></a><h4 id="SBYDB-GUID-C49AC6F4-C89B-4487-BC18-428D65865B9A" class="sect4"><span class="enumeration_section">1.1.2</span>备用数据库</h4>
                  <div>
                     <p>备用数据库是主数据库的事务一致性副本。</p>
                     <p>使用主数据库的备份副本，您可以创建多达30个备用数据库并将它们合并到Oracle Data Guard配置中。Oracle Data Guard通过从主数据库传输重做数据然后将重做应用于备用数据库来自动维护每个备用数据库。</p>
                     <p>与主数据库类似，备用数据库可以是单实例Oracle数据库，也可以是Oracle RAC数据库。</p>
                     <p>备用数据库的类型如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><strong class="term">物理备用数据库</strong></p>
                           <p>提供主数据库的物理上相同的副本，其中磁盘上的数据库结构在逐个块的基础上与主数据库相同。数据库模式（包括索引）是相同的。物理备用数据库通过Redo Apply与主数据库保持同步，Redo Apply恢复从主数据库接收的重做数据并将重做应用于物理备用数据库。</p>
                           <p>从Oracle Database <span class="italic">11g</span>第1版（11.1）开始，物理备用数据库可以在打开以进行只读访问时接收和应用重做。因此，可以同时使用物理备用数据库进行数据保护和报告。
                           </p>
                           <p>此外，从Oracle Database <span class="italic">11g</span>第2版（11.2.0.1）开始，可以使用物理备用数据库以滚动方式安装符合条件的一次性修补程序，修补程序集更新（PSU）和关键修补程序更新（CPU）。有关此功能的更多信息，请参阅<a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a>的My Oracle Support说明1265700.1。</p>
                        </li>
                        <li>
                           <p><strong class="term">逻辑备用数据库</strong></p>
                           <p>包含与生产数据库相同的逻辑信息，尽管数据的物理组织和结构可能不同。逻辑备用数据库通过SQL Apply与主数据库保持同步，SQL Apply将从主数据库接收的重做数据转换为SQL语句，然后在备用数据库上执行SQL语句。</p>
                           <p>逻辑备用数据库的灵活性使您可以升级Oracle数据库软件（补丁集和新的Oracle数据库版本）并以滚动方式执行其他数据库维护，几乎不会出现停机。从Oracle Database <span class="italic">11g</span>开始，瞬态逻辑数据库滚动升级过程也可以与现有物理备用数据库一起使用。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">快照备用数据库</span> 
                           </p>
                           <p>快照备用数据库是完全可更新的备用数据库。</p>
                           <p>与物理或逻辑备用数据库一样，快照备用数据库从主数据库接收和归档重做数据。与物理或逻辑备用数据库不同，快照备用数据库不应用它接收的重做数据。在首先丢弃对快照备用数据库进行的任何本地更新之后，快照备用数据库转换回物理备用数据库之前，不应用快照备用数据库接收的重做数据。</p>
                           <p>快照备用数据库最适用于需要物理备用数据库的临时可更新快照的方案。例如，您可以使用Oracle Real Application Testing选项捕获主数据库上的数据库工作负载，然后在快照备用数据库上重放它以进行测试。由于快照备用数据库接收的重做数据在转换回物理备用数据库之前不会应用，因此从主数据库故障中恢复所需的时间与需要应用的重做数据量成正比。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C49AC6F4-C89B-4487-BC18-428D65865B9A__GUID-D6E5B862-8ECE-4F8E-928C-4C72F7D85887">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../ratug/introduction-to-oracle-database-testing.html#RATUG101" target="_blank"><span class="italic">Oracle数据库测试指南</span></a> ，了解有关Oracle Real Application Testing的更多信息以及使用它所需的许可证</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="SBYDB5252"></a><div class="props_rev_3"><a id="GUID-9F8CAE44-ABA6-4CA4-A881-1E483C8E62A1" name="GUID-9F8CAE44-ABA6-4CA4-A881-1E483C8E62A1"></a><h4 id="SBYDB-GUID-9F8CAE44-ABA6-4CA4-A881-1E483C8E62A1" class="sect4"><span class="enumeration_section">1.1.3</span>远程同步实例</h4>
                  <div>
                     <p>Oracle Data Guard远程同步实例是远程Oracle Data Guard目标，它接受来自主数据库的重做，然后将该重做发送到Oracle Data Guard配置的其他成员。</p>
                     <p>远程同步实例管理控制文件，将重做接收到备用重做日志（SRL），并将这些SRL归档到本地归档重做日志，但这是与备用数据库的相似性结束的地方。远程同步实例没有用户数据文件，无法打开访问权限，无法运行重做应用，并且永远不能在主要角色中运行或转换为任何类型的备用数据库。</p>
                     <p>远程同步实例是Oracle Active Data Guard远程同步功能的一部分，该功能需要Oracle Active Data Guard许可证。</p>
                     <div class="infoboxnotealso" id="GUID-9F8CAE44-ABA6-4CA4-A881-1E483C8E62A1__GUID-9DA5D871-DBDC-45F1-B05A-248521AB6FF1">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="creating-oracle-data-guard-far-sync-instance.html#GUID-8AD7FBA2-42B0-46CF-852B-1AF0CB4A36E8" title="Oracle Data Guard远程同步实例是远程Oracle Data Guard目标，它接受来自主数据库的重做，然后将该重做发送到Oracle Data Guard配置的其他成员。">远同步</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="SBYDB5453"></a><div class="props_rev_3"><a id="GUID-6BA2BB48-5E25-43BA-8667-9392133FCD66" name="GUID-6BA2BB48-5E25-43BA-8667-9392133FCD66"></a><h4 id="SBYDB-GUID-6BA2BB48-5E25-43BA-8667-9392133FCD66" class="sect4"><span class="enumeration_section">1.1.4</span>零数据丢失恢复设备</h4>
                  <div>
                     <p>零数据丢失恢复设备（恢复设备）是一种企业级备份解决方案，可为所有Oracle数据库的备份提供单一存储库。</p>
                     <p>Recovery Appliance将大多数Oracle数据库备份和还原处理卸载到集中式备份系统。它使您可以显着提高备份的存储利用率，性能和可管理性。</p>
                     <div class="infoboxnotealso" id="GUID-6BA2BB48-5E25-43BA-8667-9392133FCD66__GUID-BF6DA6C7-495F-44EB-A0FB-197302D84A90">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=AMAGD-GUID-B57EDE37-6F78-409D-B29D-4D9F942174BC" target="_blank"><span><cite>零数据丢失恢复设备管理员指南</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="SBYDB5004"></a><a id="SBYDB4704"></a><div class="props_rev_3"><a id="GUID-0DA5AED1-4D4B-446D-ADD2-7F463A688AEF" name="GUID-0DA5AED1-4D4B-446D-ADD2-7F463A688AEF"></a><h4 id="SBYDB-GUID-0DA5AED1-4D4B-446D-ADD2-7F463A688AEF" class="sect4"><span class="enumeration_section">1.1.5</span>配置举例</h4>
                  <div>
                     <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-0DA5AED1-4D4B-446D-ADD2-7F463A688AEF__I1036091">图1-1</a>显示了典型的Oracle Data Guard配置，其中包含将重做数据传输到备用数据库的主数据库。备用数据库远离主数据库<a id="d4200e800" class="indexterm-anchor"></a>灾难恢复和<a id="d4200e805" class="indexterm-anchor"></a><a id="d4200e809" class="indexterm-anchor"></a><a id="d4200e813" class="indexterm-anchor"></a><a id="d4200e817" class="indexterm-anchor"></a>备份操作。您可以将备用数据库配置在与主数据库相同的位置。但是，对于<a id="d4200e822" class="indexterm-anchor"></a><a id="d4200e826" class="indexterm-anchor"></a>灾难恢复目的，Oracle建议您<a id="d4200e832" class="indexterm-anchor"></a><a id="d4200e836" class="indexterm-anchor"></a>在远程位置配置备用数据库。
                     </p>
                     <div class="figure" id="GUID-0DA5AED1-4D4B-446D-ADD2-7F463A688AEF__I1036091">
                        <p class="titleinfigure">图1-1典型的Oracle Data Guard配置</p><img src="img/sbydb042.gif" alt="下面是图1-1的描述" title="下面是图1-1的描述" longdesc="img_text/sbydb042.html"><br><a href="img_text/sbydb042.html">“图1-1典型Oracle Data Guard配置”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="SBYDB4705"></a><div class="props_rev_3"><a id="GUID-5765C9D9-0611-4A8F-9CC0-5A818CE127A7" name="GUID-5765C9D9-0611-4A8F-9CC0-5A818CE127A7"></a><h3 id="SBYDB-GUID-5765C9D9-0611-4A8F-9CC0-5A818CE127A7" class="sect3"><span class="enumeration_section">1.2</span> Oracle Data Guard服务</h3>
               <div>
                  <p>Oracle Data Guard使用重做传输服务和应用服务来管理重做数据的传输，重做数据的应用以及对数据库角色的更改。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-05D621EE-51AF-41E4-9CFC-45AEBAB08F57" title="重做传输服务控制重做数据从生产数据库到一个或多个归档目的地的自动传输。">重做运输服务</a></p>
                        <p>控制重做数据从生产数据库到一个或多个归档目标的自动传输。</p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-D284E617-3F4F-4128-98F5-A3EB88772BF5" title="应用服务会自动在备用数据库上应用重做数据，以保持与主数据库的一致性。">申请服务</a></p>
                        <p>重做数据直接应用于备用重做日志文件，因为它们是使用实时应用填充的。如果未配置备用重做日志文件，则必须先在备用数据库中存档重做数据，然后再应用它们。</p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-data-guard-concepts.html#GUID-EFAC6E17-BCE5-417C-9124-1595DBF0ABFA" title="使用Oracle Data Guard，您可以使用切换或故障转移操作来更改数据库的角色。">角色转换</a></p>
                        <p>使用切换或故障切换操作将数据库的角色从备用数据库更改为主数据库，或从主数据库更改为备用数据库。</p>
                     </li>
                  </ul>
               </div><a id="SBYDB4706"></a><div class="props_rev_3"><a id="GUID-05D621EE-51AF-41E4-9CFC-45AEBAB08F57" name="GUID-05D621EE-51AF-41E4-9CFC-45AEBAB08F57"></a><h4 id="SBYDB-GUID-05D621EE-51AF-41E4-9CFC-45AEBAB08F57" class="sect4"><span class="enumeration_section">1.2.1</span>重做传输服务</h4>
                  <div>
                     <p><span class="bold">重做传输服务</span>控制重做数据从生产数据库到一个或多个归档目的地的自动传输。
                     </p>
                     <p>重做传输服务执行以下任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在配置中将重做数据从主系统传输到备用系统</p>
                        </li>
                        <li>
                           <p>管理由于网络故障而解决归档重做日志文件中的任何差距的过程</p>
                        </li>
                        <li>
                           <p>自动检测备用系统上丢失或损坏的归档重做日志文件，并自动从主数据库或其他备用数据库检索替换的归档重做日志文件。<a id="d4200e1060" class="indexterm-anchor"></a><a id="d4200e1062" class="indexterm-anchor"></a><a id="d4200e1066" class="indexterm-anchor"></a><a id="d4200e1070" class="indexterm-anchor"></a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="SBYDB5005"></a><a id="SBYDB5006"></a><a id="SBYDB4707"></a><div class="props_rev_3"><a id="GUID-D284E617-3F4F-4128-98F5-A3EB88772BF5" name="GUID-D284E617-3F4F-4128-98F5-A3EB88772BF5"></a><h4 id="SBYDB-GUID-D284E617-3F4F-4128-98F5-A3EB88772BF5" class="sect4"><span class="enumeration_section">1.2.2</span>申请服务</h4>
                  <div>
                     <p><span class="bold">应用服务会</span>自动在备用数据库上应用重做数据，以保持与主数据库的一致性。
                     </p>
                     <p>重做数据从主数据库传输并写入备用数据库上的备用重做日志。Apply服务还允许对数据进行只读访问。<a id="d4200e1173" class="indexterm-anchor"></a></p>
                     <p>物理和物理的主要区别<a id="d4200e1179" class="indexterm-anchor"></a>逻辑备用数据库是应用服务应用归档重做数据的方式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于F或物理备用数据库，Oracle Data Guard使用<span class="bold">Redo Apply</span>技术，该技术使用Oracle数据库的标准恢复技术在备用数据库上应用重做数据， <a href="introduction-to-oracle-data-guard-concepts.html#GUID-D284E617-3F4F-4128-98F5-A3EB88772BF5__I1043408">如图1-2所示</a> 。
                           </p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-D284E617-3F4F-4128-98F5-A3EB88772BF5__I1043408">
                        <p class="titleinfigure">图1-2自动更新物理备用数据库</p><img src="img/sbydb054.gif" alt="下面是图1-2的描述" title="下面是图1-2的描述" longdesc="img_text/sbydb054.html"><br><a href="img_text/sbydb054.html">“图1-2自动更新物理备用数据库”的说明</a></div>
                     <!-- class="figure" -->
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于F或逻辑备用数据库，Oracle Data Guard使用<span class="bold">SQL Apply</span>技术，该技术首先将收到的重做数据转换为<a id="d4200e1253" class="indexterm-anchor"></a>然后在SQL语句中执行逻辑备用数据库上生成的SQL语句， <a href="introduction-to-oracle-data-guard-concepts.html#GUID-D284E617-3F4F-4128-98F5-A3EB88772BF5__I1043983">如图1-3</a>所示。
                           </p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-D284E617-3F4F-4128-98F5-A3EB88772BF5__I1043983">
                        <p class="titleinfigure">图1-3自动更新逻辑备用数据库</p><img src="img/sbydb032.gif" alt="下面是图1-3的描述" title="下面是图1-3的描述" longdesc="img_text/sbydb032.html"><br><a href="img_text/sbydb032.html">“图1-3自动更新逻辑备用数据库”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="SBYDB4708"></a><div class="props_rev_3"><a id="GUID-EFAC6E17-BCE5-417C-9124-1595DBF0ABFA" name="GUID-EFAC6E17-BCE5-417C-9124-1595DBF0ABFA"></a><h4 id="SBYDB-GUID-EFAC6E17-BCE5-417C-9124-1595DBF0ABFA" class="sect4"><span class="enumeration_section">1.2.3</span>角色转换</h4>
                  <div>
                     <p>使用Oracle Data Guard，您可以使用切换或故障转移操作来更改数据库的角色。</p>
                     <p>Oracle数据库以两种角色之一运行：主要或备用。<a id="d4200e1357" class="indexterm-anchor"></a></p>
                     <p><span class="bold">切换</span>是一个<a id="d4200e1366" class="indexterm-anchor"></a>主数据库与其中一个备用数据库之间的角色转换。切换确保<a id="d4200e1371" class="indexterm-anchor"></a>没有数据丢失。这通常用于主系统的计划维护。在切换期间，主数据库转换为备用角色，备用数据库转换为主角色。
                     </p>
                     <p><span class="bold">故障转移</span>是主数据库不可用时。仅在主数据库发生故障时才执行故障转移，故障转移导致a <a id="d4200e1381" class="indexterm-anchor"></a><a id="d4200e1383" class="indexterm-anchor"></a>将备用数据库转换为主要角色。数据库管理员可以配置Oracle Data Guard以确保安全<a id="d4200e1393" class="indexterm-anchor"></a>没有数据丢失。
                     </p>
                     <p>本文档中描述的角色转换是使用SQL语句进行的。您还可以使用Oracle Data Guard代理来简化角色转换，并使用Oracle Enterprise Manager Cloud Control或DGMGRL命令行界面自动执行故障转移，如<a href="introduction-to-oracle-data-guard-concepts.html#GUID-538B9DDD-1553-479D-8E1D-0B5C6848403E" title="Oracle Data Guard代理是一个分布式管理框架，可自动创建，维护和监视Oracle Data Guard配置。">Oracle Data Guard Broker中所述</a> 。
                     </p>
                  </div>
               </div>
            </div><a id="SBYDB4709"></a><div class="props_rev_3"><a id="GUID-538B9DDD-1553-479D-8E1D-0B5C6848403E" name="GUID-538B9DDD-1553-479D-8E1D-0B5C6848403E"></a><h3 id="SBYDB-GUID-538B9DDD-1553-479D-8E1D-0B5C6848403E" class="sect3"><span class="enumeration_section">1.3</span> Oracle Data Guard Broker</h3>
               <div>
                  <p>Oracle Data Guard代理是一个分布式管理框架，可自动创建，维护和监视Oracle Data Guard配置。</p>
                  <p>您可以使用Oracle Enterprise Manager云控制图形用户界面（GUI）或Oracle Data Guard命令行界面（DGMGRL）来：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>创建并启用Oracle Data Guard配置，包括设置重做传输服务和应用服务</p>
                     </li>
                     <li>
                        <p>从配置中的任何系统管理整个Oracle Data Guard配置</p>
                     </li>
                     <li>
                        <p>管理和监视包含Oracle RAC主数据库或备用数据库的Oracle Data Guard配置</p>
                     </li>
                     <li>
                        <p>简化<a id="d4200e1533" class="indexterm-anchor"></a><a id="d4200e1537" class="indexterm-anchor"></a><a id="d4200e1541" class="indexterm-anchor"></a>转换和<a id="d4200e1546" class="indexterm-anchor"></a><a id="d4200e1550" class="indexterm-anchor"></a><a id="d4200e1556" class="indexterm-anchor"></a><a id="d4200e1560" class="indexterm-anchor"></a>允许您使用Oracle Enterprise Manager Cloud Control中的单个键单击或DGMGRL命令行界面中的单个命令来调用它们进行故障转移。
                        </p>
                     </li>
                     <li>
                        <p>启用<a id="d4200e1568" class="indexterm-anchor"></a><a id="d4200e1572" class="indexterm-anchor"></a><a id="d4200e1576" class="indexterm-anchor"></a>当主数据库不可用时，Oracle Data Guard快速启动故障转移以<span class="italic">自动进行</span>故障转移。启用快速启动故障切换后，Oracle Data Guard代理会确定是否需要进行故障切换，并自动启动故障切换到指定的目标备用数据库，而无需DBA干预。
                        </p>
                     </li>
                  </ul>
                  <p>此外，Oracle Enterprise Manager Cloud Control可自动化并简化：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>从a创建物理或逻辑备用数据库<a id="d4200e1590" class="indexterm-anchor"></a>主数据库的备份副本</p>
                     </li>
                     <li>
                        <p><a id="d4200e1597" class="indexterm-anchor"></a>将新的或现有的备用数据库添加到现有的Oracle Data Guard配置中</p>
                     </li>
                     <li>
                        <p>使用集中监控，测试和性能工具监控日志应用率，捕获诊断信息以及快速检测问题</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-538B9DDD-1553-479D-8E1D-0B5C6848403E__GUID-4F045559-FAC3-4302-BAF2-4114217C9E1C">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../dgbkr/oracle-data-guard-broker-concepts.html#DGBKR001" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a>获取更多信息</p>
                  </div>
               </div><a id="SBYDB4710"></a><div class="props_rev_3"><a id="GUID-4B4BB1D1-1E38-40B9-B716-A0324A83966E" name="GUID-4B4BB1D1-1E38-40B9-B716-A0324A83966E"></a><h4 id="SBYDB-GUID-4B4BB1D1-1E38-40B9-B716-A0324A83966E" class="sect4"><span class="enumeration_section">1.3.1</span>使用Oracle Enterprise Manager云控制</h4>
                  <div>
                     <p>Oracle Enterprise Manager Cloud Control提供基于Web的界面，用于在Oracle Data Guard配置中查看，监视和管理主数据库和备用数据库。</p>
                     <p>Oracle Enterprise Manager云控制有时简称为云控制。</p>
                     <p>企业管理器易于使用的界面与经纪人对Oracle Data Guard配置的集中管理和监控相结合，增强了Oracle Data Guard解决方案，以实现企业的高可用性，站点保护和数据保护。</p>
                     <p>使用Enterprise Manager，您可以在本地或远程执行所有管理操作。您可以查看Oracle数据库的主页，包括主数据库和备用数据库和实例，创建或添加现有备用数据库，启动和停止实例，监视实例性能，查看事件，计划作业以及执行备份和恢复操作。</p>
                  </div>
               </div><a id="SBYDB4711"></a><div class="props_rev_3"><a id="GUID-997A3B25-B3A0-460C-990B-1E5BE2AF0622" name="GUID-997A3B25-B3A0-460C-990B-1E5BE2AF0622"></a><h4 id="SBYDB-GUID-997A3B25-B3A0-460C-990B-1E5BE2AF0622" class="sect4"><span class="enumeration_section">1.3.2</span>使用Oracle Data Guard命令行界面</h4>
                  <div>
                     <p>Oracle Data Guard命令行界面（DGMGRL）使您能够从DGMGRL提示或脚本中控制和监视Oracle Data Guard配置。</p>
                     <p>您可以使用DGMGRL执行管理和监视配置中数据库所需的大多数活动。有关完整的DGMGRL参考信息和示例，请参阅<a href="../dgbkr/examples-using-data-guard-broker-DGMGRL-utility.html#DGBKR495" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a> 。
                     </p>
                  </div>
               </div>
            </div><a id="SBYDB5007"></a><a id="SBYDB5008"></a><a id="SBYDB5009"></a><a id="SBYDB00439"></a><div class="props_rev_3"><a id="GUID-65DA4E2E-3666-4972-895C-EA45D043B127" name="GUID-65DA4E2E-3666-4972-895C-EA45D043B127"></a><h3 id="SBYDB-GUID-65DA4E2E-3666-4972-895C-EA45D043B127" class="sect3"><span class="enumeration_section">1.4</span> Oracle Data Guard保护模式</h3>
               <div>
                  <p>Oracle Data Guard提供三种不同的数据保护模式。</p>
                  <p>在某些情况下，无论情况如何，企业都不能丢失数据。在其他情况下，数据库的可用性可能比在多次失败的不太可能的情况下的任何潜在数据丢失更重要。最后，某些应用程序始终需要最大的数据库性能，因此如果任何组件发生故障，可以容忍少量数据丢失。以下是可用于以下每种情况的保护模式的简要说明：</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-65DA4E2E-3666-4972-895C-EA45D043B127__GUID-8339E4AE-43B0-47DB-BB2C-5ED45F51D17B">最高可用性</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>此保护模式可提供最高级别的数据保护，而不会影响主数据库的可用性。使用Oracle Data Guard，在恢复这些事务所需的所有重做数据已在内存中接收或写入至少一个同步备用数据库上的备用重做日志（取决于配置）之前，事务不会提交。如果主数据库无法将其重做流写入至少一个同步备用数据库，则它的运行方式就像它处于最高性能模式一样，以保持主数据库可用性，直到它再次能够将其重做流写入同步备用数据库。</p>
                     <p>此保护模式可确保零数据丢失，但在某些双重故障的情况下，例如备用数据库发生故障后主数据库发生故障。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-65DA4E2E-3666-4972-895C-EA45D043B127__GUID-76E29C68-A079-4A05-BFC3-AA4F9B808213">最高性能</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这是默认保护模式。它提供了最高级别的数据保护，而不会影响主数据库的性能。这是通过允许事务在这些事务生成的所有重做数据写入在线日志后立即提交来实现的。重做数据也会写入一个或多个备用数据库，但这是在事务承诺方面异步完成的，因此主数据库性能不会受到将重做数据写入备用数据库的延迟的影响。</p>
                     <p>与最大可用性模式相比，此保护模式提供的数据保护略少，对主数据库性能的影响最小。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-65DA4E2E-3666-4972-895C-EA45D043B127__GUID-163F2EFB-FB28-4438-8ACD-FB5DDD8B0204">最大保护</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>此保护模式可确保在主数据库发生故障时不会发生数据丢失。为了提供这种级别的保护，在事务提交之前，必须将恢复事务所需的重做数据写入至少一个同步备用数据库的联机重做日志和备用重做日志。为确保不会发生数据丢失，如果主数据库无法将其重做流写入至少一个同步备用数据库，则主数据库将关闭而不是继续处理事务。</p>
                     <p>所有三种保护模式都要求使用特定的重做传输选项将重做数据发送到至少一个备用数据库。</p>
                     <div class="infoboxnotealso" id="GUID-65DA4E2E-3666-4972-895C-EA45D043B127__GUID-9DEBB472-438A-4DA5-95AC-68BA69A0ECDF">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="oracle-data-guard-protection-modes.html#GUID-16298839-9B8A-4E58-8EC9-27912E57F1CE" title="Oracle Data Guard允许您设置不同的数据保护模式。">Oracle Data Guard保护模式</a>有关这些模式的更详细说明以及有关设置主数据库保护模式的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SBYDB4712"></a><div class="props_rev_3"><a id="GUID-B26CA33C-999A-434D-A26D-3179AC3F8718" name="GUID-B26CA33C-999A-434D-A26D-3179AC3F8718"></a><h3 id="SBYDB-GUID-B26CA33C-999A-434D-A26D-3179AC3F8718" class="sect3"><span class="enumeration_section">1.5</span>客户端故障转移</h3>
               <div>
                  <p>高可用性体系结构需要数据库和数据库客户端的快速故障转移功能。客户端故障转移包括故障通知，过时连接清除以及与新主数据库的透明重新连接。</p>
                  <p>Oracle数据库提供了将数据库故障转移与故障转移过程集成的功能，这些过程可在数据库故障转移的几秒钟内自动将客户端重定向到新的主数据库。</p>
                  <div class="infoboxnotealso" id="GUID-B26CA33C-999A-434D-A26D-3179AC3F8718__GUID-2F1E5968-233B-4803-B82C-DA40FBB051BD">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../dgbkr/using-data-guard-broker-to-manage-switchovers-failovers.html#DGBKR3546" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a> ，提供有关Oracle Data Guard快速应用程序通知（FAN），快速连接故障转移（FCF）和特定于角色的数据库服务的特定配置要求的信息</p>
                        </li>
                        <li>
                           <p>最高可用性体系结构客户端故障转移最佳实践白皮书</p>
                           <p><a href="http://www.oracle.com/goto/maa" target="_blank"><code class="codeph">http://www.oracle.com/goto/maa</code></a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="SBYDB5461"></a><div class="props_rev_3"><a id="GUID-37CFE42A-D731-4A07-977B-09BE3D309E0C" name="GUID-37CFE42A-D731-4A07-977B-09BE3D309E0C"></a><h4 id="SBYDB-GUID-37CFE42A-D731-4A07-977B-09BE3D309E0C" class="sect4"><span class="enumeration_section">1.5.1</span>应用连续性</h4>
                  <div>
                     <p>应用程序连续性是一种Oracle数据库功能，可在发生数据库会话不可用的可恢复错误后，对数据库进行快速，无中断的请求重放。</p>
                     <p>Oracle Data Guard切换到物理备用数据库支持应用程序连续性。它还支持在最大可用性数据保护模式下快速启动到物理备用数据库的故障转移。要使用应用程序连续性，主数据库和备用数据库必须获得Oracle Real Application Clusters（Oracle RAC）或Oracle Active Data Guard的许可。</p>
                     <div class="infoboxnotealso" id="GUID-37CFE42A-D731-4A07-977B-09BE3D309E0C__GUID-C3C49820-05A4-4A09-A6A7-B0D1EF65EFDE">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关应用程序连续性的信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=RACAD-GUID-BD699AEB-9F85-42A8-8687-5A979918938D" target="_blank"><span><cite>，请参见“Oracle Real Application Clusters管理和部署指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB4713"></a><div class="props_rev_3"><a id="GUID-9EEFD8E5-901F-4092-85F4-2E0069AC5923" name="GUID-9EEFD8E5-901F-4092-85F4-2E0069AC5923"></a><h3 id="SBYDB-GUID-9EEFD8E5-901F-4092-85F4-2E0069AC5923" class="sect3"><span class="enumeration_section">1.6</span> Oracle Data Guard和补充技术</h3>
               <div>
                  <p>Oracle数据库提供了几种独特的技术，可以补充Oracle Data Guard，与单独使用任何一种解决方案相比，可以使业务关键系统保持更高的可用性和数据保护。</p>
                  <p>以下列表总结了一些Oracle高可用性技术：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle Real Application Clusters（Oracle RAC）</p>
                        <p>Oracle RAC允许通过互连链接的多个独立服务器共享对Oracle数据库的访问，从而在故障期间提供高可用性，可伸缩性和冗余。Oracle RAC和Oracle Data Guard一起提供系统级，站点级和数据级保护的优势，从而实现高级别的可用性和灾难恢复，而不会丢失数据：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle RAC通过提供从故障中快速自动恢复（例如节点故障和实例崩溃）来解决系统故障。它还为应用程序提供了更高的可伸缩性。</p>
                           </li>
                           <li>
                              <p>Oracle Data Guard通过不共享磁盘的事务一致的主数据库和备用数据库解决站点故障和数据保护问题，从而实现从站点灾难中恢复和数据损坏。</p>
                           </li>
                        </ul>
                        <p>使用Oracle RAC和Oracle Data Guard的许多不同体系结构都是可能的，具体取决于本地和远程站点的使用以及节点的使用以及逻辑和物理备用数据库的组合。请参阅<a href="configuring-data-guard-standby-databases-in-oracle-RAC.html#GUID-084DF97B-5524-401A-BAA4-65BA279F5B11" title="Oracle Data Guard配置可以包含单实例和Oracle Real Application Clusters（Oracle RAC）多实例数据库的任意组合。">Oracle Data Guard和Oracle Real Application Clusters</a> for Oracle RAC和Oracle Data Guard集成。
                        </p>
                     </li>
                     <li>
                        <p>Oracle Real Application Clusters One Node（Oracle RAC One Node）</p>
                        <p>Oracle RAC One Node为非群集数据库提供增强的高可用性，从而保护它们免受计划内和计划外停机的影响。Oracle RAC One Node提供以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>永远在线的非群集数据库服务</p>
                           </li>
                           <li>
                              <p>更好地整合数据库服务器</p>
                           </li>
                           <li>
                              <p>增强服务器虚拟化</p>
                           </li>
                           <li>
                              <p>完整Oracle RAC的低成本开发和测试平台</p>
                           </li>
                        </ul>
                        <p>此外，Oracle RAC One Node有助于整合数据库存储，标准化您的数据库环境，并在必要时使您能够升级到完整的多节点Oracle RAC数据库，而无需停机或中断。</p>
                        <p>从Oracle Database <span class="italic">11g</span>第2版（11.2.0.2）开始，Oracle Data Guard和Oracle Data Guard代理与Oracle Real Application Clusters One Node（Oracle RAC One Node）完全集成。
                        </p>
                     </li>
                     <li>
                        <p>闪回数据库</p>
                        <p>闪回数据库功能可以从逻辑数据损坏和用户错误中快速恢复。通过允许您及时闪回，可以再次访问可能已被错误更改或删除的先前版本的业务信息。此功能：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>无需恢复备份并前滚更改，直至错误或损坏。相反，闪回数据库可以将Oracle数据库<span class="italic">回滚</span>到以前的时间点，而无需还原数据文件。
                              </p>
                           </li>
                           <li>
                              <p>提供延迟重做应用程序的替代方法，以防止用户错误或逻辑损坏。因此，备用数据库可以与主数据库更紧密地同步，从而减少故障转移和切换时间。</p>
                           </li>
                           <li>
                              <p>在故障转移后，无需完全重新创建原始主数据库。可以将故障主数据库闪回到故障转移之前的某个时间点，并将其转换为新主数据库的备用数据库。</p>
                           </li>
                        </ul>
                        <p>有关闪回数据库的信息，请参阅“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV71000" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a> ，并<a href="oracle-data-guard-redo-apply-services.html#GUID-B891A164-1FDC-4AB3-838F-E6A91E7DA0B7" title="在某些情况下，您可能希望在从主站点接收重做数据的时间与应用于备用数据库的重做数据之间创建时间延迟。">为存档重做日志文件的应用指定时间延迟，以</a>获取有关重做数据应用的信息。
                        </p>
                     </li>
                     <li>
                        <p>恢复管理器（RMAN）</p>
                        <p>RMAN是一个Oracle实用程序，可简化备份，还原和恢复数据库文件。与Oracle Data Guard一样，RMAN是Oracle数据库的一项功能，不需要单独安装。Oracle Data Guard与RMAN完美集成，允许您：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用Recovery Manager <code class="codeph">DUPLICATE</code>命令从主数据库的备份创建备用数据库。
                              </p>
                           </li>
                           <li>
                              <p>在物理备用数据库而不是生产数据库上进行备份，从而减轻生产数据库上的负载并在备用站点上有效使用系统资源。此外，可以在物理备用数据库应用重做时进行备份。</p>
                           </li>
                           <li>
                              <p>通过在执行备份后自动删除用于输入的归档重做日志文件来帮助管理归档重做日志文件。</p>
                           </li>
                        </ul>
                        <p>请参阅<a href="creating-data-guard-standby-database-using-RMAN.html#GUID-82731D59-A20F-45DD-A235-267B3B0E38C5" title="这些主题描述了如何使用Oracle Recovery Manager创建备用数据库。">使用Recovery Manager创建备用数据库</a> 。
                        </p>
                     </li>
                     <li>
                        <p>Oracle全球数据服务（GDS）</p>
                        <p>Oracle全球数据服务（GDS）将Oracle RAC服务模型应用于全局分布式数据库池，为一组提供公共服务的复制数据库提供动态负载平衡，故障转移和集中服务管理。该组数据库可以包括通过Oracle Data Guard，Oracle GoldenGate或任何其他复制技术互连的Oracle RAC和单实例Oracle数据库。</p>
                        <p>GDS与Oracle Data Guard代理集成在一起。这允许在Oracle Data Guard代理配置中发生角色转换时，根据需要自动启动和停止特定于角色的全局服务。</p>
                        <p>GDS允许为全局服务指定复制滞后限制。如果在给定副本超过滞后限制，则在该副本上暂时停止全局服务，并将新客户端请求路由到满足滞后限制的副本。当复制延迟小于滞后限制时，全局服务将在原始副本上自动重新启动。</p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect2"><a id="GUID-858549EF-B72F-4545-A5D1-C632C8ECC961" name="GUID-858549EF-B72F-4545-A5D1-C632C8ECC961"></a><h3 id="SBYDB-GUID-858549EF-B72F-4545-A5D1-C632C8ECC961" class="sect3"><span class="enumeration_section">1.7</span> Oracle Active Data Guard支持Oracle Sharding</h3>
               <div>
                  <p>Oracle Sharding允许您跨多个独立的Oracle数据库水平分区数据，并将数据库连接请求路由到包含适当数据的数据库。Oracle Data Guard和Oracle Sharding是集成技术。</p>
                  <p>分片将数据拆分为多个不共享任何物理资源的独立数据库（分片）。分片通常与数据复制相结合，例如Oracle Data Guard提供的数据复制。Oracle Data Guard提供整个Oracle数据库的快速单主复制。在Oracle Data Guard配置中，有一个可更新的主数据库和一个或多个可以打开以进行只读访问的备用数据库。复制可以提高分片数据库的性能和可伸缩性，并提供高可用性和灾难恢复。在分片数据库复制拓扑使用指定的<code class="codeph">-repl</code>上GDSCTL选项<code class="codeph">create shardcatalog</code>命令。默认复制拓扑是Oracle Data Guard。
                  </p>
                  <p>Oracle Sharding支持两种分片方法：系统管理和复合。使用GDSCTL命令<code class="codeph">CREATE SHARDCATALOG</code>指定分片方法。</p>
                  <p>属于分片组的碎片通常位于同一数据中心。整个分片组可以完全复制到相同或不同数据中心的一个或多个分片组。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-858549EF-B72F-4545-A5D1-C632C8ECC961__GUID-69848D54-9889-4E65-B2C8-AE476CB9EED7">使用Oracle Data Guard复制进行系统管理的分片</p>
                     <p>在系统管理的分片中，逻辑复制单元是一组称为shardgroup的分片。在系统管理的分片中，分片组包含存储在分片数据库中的所有数据。使用一致散列分区，数据自动分布在分片中（一致散列是可扩展分布式系统中常用的分区策略）。分区算法在分片之间均匀随机地分配数据。下图说明了Oracle Data Guard复制如何与系统管理的分片一起使用。有一个主要分片组 -  Shardgroup 1和两个备用分片组 -  Shardgroup 2和Shardgroup 3。</p>
                     <div class="figure" id="GUID-858549EF-B72F-4545-A5D1-C632C8ECC961__GUID-B67EF88A-4242-4B8F-B835-3CBF0B0BE68F">
                        <p class="titleinfigure">图1-4使用Oracle Data Guard复制进行系统管理的分片</p><img src="img/admin_3v_136a.png" alt="下面是图1-4的描述" title="下面是图1-4的描述" longdesc="img_text/admin_3v_136a.html"><br><a href="img_text/admin_3v_136a.html">“图1-4使用Oracle Data Guard复制进行系统管理的分片”的说明</a></div>
                     <!-- class="figure" -->
                     <p>Shardgroup 1由Oracle Data Guard主数据库（分片1,2,3）组成。Shardgroup 2由本地备用数据库（分片4,5,6）组成，它们位于同一数据中心并配置为同步复制。Shardgroup 3由位于不同数据中心的远程备用数据库（分片7,8,9）组成，并配置为异步复制。默认复制拓扑是Oracle Data Guard。要以只读模式打开配置中的每个备用数据库，必须启用Oracle Active Data Guard。这是使用GDSCTL <code class="codeph">add shardgroup</code>命令上的<code class="codeph">-deploy_as ACTIVE_STANDBY</code>选项完成的。
                     </p>
                     <p>上图中显示的分片数据库由三组复制的分片组成：{1,4,7}，{2,5,8}和{3,6,9}。每组复制的分片都作为Oracle Data Guard代理配置进行管理，并启用快速启动故障转移。</p>
                     <p>要部署复制，只需指定分片组（区域，角色等）的属性并为其添加分片。Oracle Sharding自动配置Oracle Data Guard，并为每组复制的分片启动快速启动故障转移观察器。它还提供只读工作负载，基于角色的全局服务以及复制滞后和基于位置的路由的负载平衡。</p>
                     <p>要部署上图中显示的配置，请执行以下GDSCTL命令：</p><pre class="pre codeblock"><code>CREATE SHARDCATALOG -database host00：1521：shardcat -region dc1，dc2 ADD GSM -gsm gsm1 -listener 1571 -catalog host00：1521：shardcat -region dc1 ADD GSM -gsm gsm2 -listener 1571 -catalog host00：1521：shardcat -region dc2 ADD SHARDGROUP -shardgroup shardgroup1 -region dc1 -deploy_as primary ADD SHARDGROUP -shardgroup shardgroup2 -region dc1 -deploy_as standby ADD SHARDGROUP -shardgroup shardgroup3 -region dc2 -deploy_as standby CREATE SHARD -shardgroup shardgroup1 -destination host01 -credential oracle_cred -netparamfile / home / oracle /netca_dbhome.rsp CREATE SHARD -shardgroup shardgroup1 -destination host02 -credential oracle_cred -netparamfile /home/oracle/netca_dbhome.rsp CREATE SHARD -shardgroup shardgroup1 -destination host03 -credential oracle_cred -netparamfile /home/oracle/netca_dbhome.rsp ...... CREATE SHARD -shardgroup shardgroup3 -destination host09 -credential oracle_cred -netparamfile /home/oracle/netca_dbhome.rsp DEPLOY</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-858549EF-B72F-4545-A5D1-C632C8ECC961__GUID-B024E537-EF21-4C32-BE5A-BBA4148FEAC1">使用Oracle Data Guard复制进行复合分片</p>
                     <p>复合分片结合了系统管理的分片和用户管理的分片功能。在复合分片中，逻辑复制单元是一组称为分片组的分片（如系统管理的分片）。同样在复合分片中，分片数据库由多个分片空间组成（如在用户管理的分片中），但是，每个分片空间（而不是复制的分片）包含复制的分片组，如下图所示。</p>
                     <div class="figure" id="GUID-858549EF-B72F-4545-A5D1-C632C8ECC961__GUID-314D15F1-75C0-45D0-B58D-EDE7114F34E1">
                        <p class="titleinfigure">图1-5使用Oracle Data Guard复制进行复合分片</p><img src="img/admin_3v_133c.png" alt="下面是图1-5的描述" title="下面是图1-5的描述" longdesc="img_text/admin_3v_133c.html"><br><a href="img_text/admin_3v_133c.html">“图1-5使用Oracle Data Guard复制进行复合分片”的说明</a></div>
                     <!-- class="figure" -->
                     <p>要部署上图中显示的配置，请执行以下GDSCTL命令：</p><pre class="pre codeblock"><code>CREATE SHARDCATALOG -sharding composite -database host00：1521：cat -region dc1，dc2，dc3 ADD GSM -gsm gsm1 -listener 1571 -catalog host00：1521：cat -region dc1 ADD GSM -gsm gsm2 -listener 1571 -catalog host00：1521 ：cat -region dc2 ADD GSM -gsm gsm3 -listener 1571 -catalog host00：1521：cat -region dc3 ADD SHARDSPACE -shardspace shardspace_a ADD SHARDSPACE -shardspace shardspace_b ADD SHARDGROUP -shardgroup shardgroup_a1 -shardspace shardspace_a -region dc1 -deploy_as primary ADD SHARDGROUP  - shardgroup shardgroup_a2 -shardspace shardspace_a -region dc1 -deploy_as standby ADD SHARDGROUP -shardgroup shardgroup_a3 -shardspace shardspace_a -region dc3 -deploy_as standby ADD SHARDGROUP -shardgroup shardgroup_b1 -shardspace shardspace_a -region dc1 -deploy_as primary ADD SHARDGROUP -shardgroup shardgroup_b2 -shardspace shardspace_a -region dc1 -deploy_as standby ADD SHARDGROUP -shardgroup shardgroup_b3 -shardspace shardspace_a -region dc2 -deploy_as standby CREATE SHARD -shardgroup shardgroup_a1 -destination host01 -credential orcl_cred -netparamfile /home/oracle/netca_dbhome.rsp ...... CREATE SHARD -shardgroup shardgroup_b3 -destination host09 -credential orcl_cred -netparamfile /home/oracle/netca_dbhome.rsp DEPLOY</code></pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN-GUID-0F39B1FB-DCF9-4C8A-A2EA-88705B90C5BF" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=GSMUG-GUID-829434C7-608D-40D4-81C8-A77A63FCD7EB" target="_blank"><span><cite>“Oracle数据库全球数据服务概念和管理指南”</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="SBYDB4714"></a><div class="props_rev_3"><a id="GUID-C65BF458-4BF7-4723-BAFC-5860B5B88A2B" name="GUID-C65BF458-4BF7-4723-BAFC-5860B5B88A2B"></a><h3 id="SBYDB-GUID-C65BF458-4BF7-4723-BAFC-5860B5B88A2B" class="sect3"><span class="enumeration_section">1.8</span> Oracle Data Guard优点摘要</h3>
               <div>
                  <p>Oracle Data Guard提供高效，全面的灾难恢复和高可用性解决方案。</p>
                  <p>Oracle Data Guard提供以下好处：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>高可用性</p>
                        <p>Oracle Data Guard易于管理的切换和故障切换功能允许主数据库和备用数据库之间的角色转换，从而最大限度地减少主数据库因计划内和计划外中断而停机的时间。</p>
                     </li>
                     <li>
                        <p>完整的数据保护</p>
                        <p>即使面对无法预料的灾难，Oracle Data Guard也可确保零数据丢失。备用数据库提供了防止所有类型的计划外中断的安全措施，包括数据损坏和管理错误。由于从主数据库接收的重做数据在备用数据库中验证，因此主数据库中可能发生的物理损坏不会传播到备用数据库。在备用数据库上执行的其他验证还可以防止逻辑块内损坏和丢失写入损坏传播到备用数据库。同样，存储管理员意外删除文件等管理错误也不会传播到备用数据库。物理备用数据库还可用于通过延迟重做应用或使用闪回数据库回退备用数据库并提取数据的良好副本来防止用户错误。</p>
                     </li>
                     <li>
                        <p>有效利用系统资源</p>
                        <p>使用从主数据库接收的重做数据更新的备用数据库表可用于其他任务，如备份，报告，汇总和查询，从而减少执行这些任务所需的主数据库工作负载，从而节省宝贵的CPU和I / O周期。</p>
                     </li>
                     <li>
                        <p>灵活的数据保护，以平衡可用性和性能要求</p>
                        <p>Oracle Data Guard提供最大程度的保护，最大可用性和最高性能模式，以帮助企业平衡数据可用性与系统性能要求。</p>
                     </li>
                     <li>
                        <p>自动间隙检测和分辨率</p>
                        <p>如果主数据库与一个或多个备用数据库之间的连接丢失（例如，由于网络问题），则无法将主数据库上生成的重做数据发送到这些备用数据库。重新建立连接后，Oracle Data Guard会自动检测丢失的归档重做日志文件（称为间隙），然后Oracle Data Guard会自动将丢失的归档重做日志文件传输到备用数据库。备用数据库与主数据库同步，无需DBA的手动干预。</p>
                     </li>
                     <li>
                        <p>集中和简单的管理</p>
                        <p>Oracle Data Guard代理提供图形用户界面和命令行界面，以在Oracle Data Guard配置中跨多个数据库自动执行管理和操作任务。代理还监视单个Oracle Data Guard配置中的所有系统。</p>
                     </li>
                     <li>
                        <p>与Oracle数据库集成</p>
                        <p>Oracle Data Guard是Oracle数据库企业版的一项功能，不需要单独安装。</p>
                     </li>
                     <li>
                        <p>自动角色转换</p>
                        <p>启用快速启动故障转移后，Oracle Data Guard代理会在主站点发生灾难时自动故障转移到同步备用站点，而不需要DBA进行干预。此外，还会自动通知应用程序角色转换。</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
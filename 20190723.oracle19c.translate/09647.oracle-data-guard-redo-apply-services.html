<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="These concepts describe how redo data is applied to a standby database."></meta>
      <meta name="description" content="These concepts describe how redo data is applied to a standby database."></meta>
      <title>申请服务</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Concepts and Administration "></meta>
      <meta property="og:description" content="These concepts describe how redo data is applied to a standby database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Concepts and Administration"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96244-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-data-guard-redo-transport-services.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-oracle-data-guard-role-transitions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration"></meta>
    <meta name="dcterms.isVersionOf" content="SBYDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-data-guard-redo-transport-services.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-oracle-data-guard-role-transitions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">申请服务</li>
            </ol>
            <a id="GUID-B40DF83F-D4A0-4710-935B-AA5D4B2D9010" name="GUID-B40DF83F-D4A0-4710-935B-AA5D4B2D9010"></a><a id="SBYDB00500"></a>
            
            <h2 id="SBYDB-GUID-B40DF83F-D4A0-4710-935B-AA5D4B2D9010" class="sect2"><span class="enumeration_chapter">8</span>申请服务</h2>
         </header>
         <div class="ind">
            <div>
               <p>这些概念描述了重做数据如何应用于备用数据库。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="oracle-data-guard-redo-apply-services.html#GUID-74C8C1F3-70FC-4543-B958-83F309B6B01B" title="应用服务会自动将重做应用于备用数据库，以保持与主数据库的同步，并允许对数据进行事务一致性访问。">申请服务简介</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-data-guard-redo-apply-services.html#GUID-DF75A78D-C3FB-42F0-951D-1022BCDD9CB6" title="您可以立即应用重做数据，也可以指定应用存档重做日志文件的时间延迟。">应用服务配置选项</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-data-guard-redo-apply-services.html#GUID-2B839172-947E-48A4-9FFD-33CC6907809F" title="执行重做应用时，物理备用数据库可以使用实时应用功能直接从备用重做日志文件应用重做，因为它们是由远程文件服务器（RFS）进程写入的。">将重做数据应用于物理备用数据库</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-data-guard-redo-apply-services.html#GUID-7D8A891C-2906-4CC0-9181-B29C4F3C2450" title="SQL Apply将归档重做日志或备用重做日志中的数据转换为SQL语句，然后在逻辑备用数据库上执行这些SQL语句。">将重做数据应用于逻辑备用数据库</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-data-guard-redo-apply-services.html#GUID-BAE8BC61-84AF-49D3-9122-FAA69A0A01F7" title="如果主服务器是多租户容器数据库（CDB），则在主服务器上删除或重命名可插拔数据库（PDB）时，将应用限制。">在主节点上删除或重命名PDB时的备用注意事项</a></p>
                  </li>
               </ul>
            </div><a id="SBYDB00505"></a><div class="props_rev_3"><a id="GUID-74C8C1F3-70FC-4543-B958-83F309B6B01B" name="GUID-74C8C1F3-70FC-4543-B958-83F309B6B01B"></a><h3 id="SBYDB-GUID-74C8C1F3-70FC-4543-B958-83F309B6B01B" class="sect3"><span class="enumeration_section">8.1</span>申请服务简介</h3>
               <div>
                  <p><span class="bold">应用服务会</span>自动将<span class="italic">重做</span>应用于备用数据库，以保持与主数据库的同步，并允许对数据进行事务一致性访问。
                  </p>
                  <p>默认情况下，应用服务等待备份重做日志文件在应用其包含的重做之前进行存档。但是，您可以启用实时应用，这允许应用服务在重做时将当前备用重做日志文件中的重做应用。在<a href="oracle-data-guard-redo-apply-services.html#GUID-9922F0E7-3E19-449E-8C35-57B7E5714C54" title="If the real-time apply feature is enabled, then apply services can apply redo data as it is received, without waiting for the current standby redo log file to be archived.">使用实时应用立即应用重做数据</a>中更详细地描述了<a href="oracle-data-guard-redo-apply-services.html#GUID-9922F0E7-3E19-449E-8C35-57B7E5714C54" title="如果启用了实时应用功能，则应用服务可以在接收重做数据时应用重做数据，而无需等待当前备用重做日志文件存档。">实时应用</a> 。
                  </p>
                  <p>应用服务使用以下方法来维护物理和<a id="d17646e238" class="indexterm-anchor"></a><a id="d17646e244" class="indexterm-anchor"></a><a id="d17646e250" class="indexterm-anchor"></a><a id="d17646e254" class="indexterm-anchor"></a>逻辑备用数据库：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d17646e264" class="indexterm-anchor"></a>重做应用（仅限物理备用数据库）</p>
                        <p>使用介质恢复来保持主数据库和物理备用数据库同步。</p>
                     </li>
                  </ul>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d17646e274" class="indexterm-anchor"></a><a id="d17646e278" class="indexterm-anchor"></a> SQL Apply（仅限逻辑备用数据库）</p>
                        <p>从主数据库接收的重做中重构SQL语句，并对逻辑备用数据库执行SQL语句。</p>
                     </li>
                  </ul>
               </div>
            </div><a id="SBYDB4761"></a><div class="props_rev_3"><a id="GUID-DF75A78D-C3FB-42F0-951D-1022BCDD9CB6" name="GUID-DF75A78D-C3FB-42F0-951D-1022BCDD9CB6"></a><h3 id="SBYDB-GUID-DF75A78D-C3FB-42F0-951D-1022BCDD9CB6" class="sect3"><span class="enumeration_section">8.2</span>应用服务配置选项</h3>
               <div>
                  <p>您可以立即应用重做数据，也可以指定应用存档重做日志文件的时间延迟。</p>
                  <p>请参阅以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="oracle-data-guard-redo-apply-services.html#GUID-9922F0E7-3E19-449E-8C35-57B7E5714C54" title="如果启用了实时应用功能，则应用服务可以在接收重做数据时应用重做数据，而无需等待当前备用重做日志文件存档。">使用实时应用立即应用重做数据</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-data-guard-redo-apply-services.html#GUID-B891A164-1FDC-4AB3-838F-E6A91E7DA0B7" title="在某些情况下，您可能希望在从主站点接收重做数据的时间与应用于备用数据库的重做数据之间创建时间延迟。">指定存档重做日志文件应用的时间延迟</a></p>
                     </li>
                  </ul>
               </div><a id="SBYDB5030"></a><a id="SBYDB0050"></a><div class="props_rev_3"><a id="GUID-9922F0E7-3E19-449E-8C35-57B7E5714C54" name="GUID-9922F0E7-3E19-449E-8C35-57B7E5714C54"></a><h4 id="SBYDB-GUID-9922F0E7-3E19-449E-8C35-57B7E5714C54" class="sect4"><span class="enumeration_section">8.2.1</span>使用实时应用立即应用重做数据</h4>
                  <div>
                     <p>如果启用了实时应用功能，则应用服务可以在接收重做数据时应用重做数据，而无需等待当前备用重做日志文件存档。</p>
                     <p>这样可以加快切换和故障切换时间，因为在故障切换或切换开始时，备用重做日志文件已应用于备用数据库。它还可以通过使Oracle Active Data Guard备用数据库与主数据库更加紧密地同步来实现对其的实时报告。</p>
                     <p>使用<code class="codeph">ALTER DATABASE</code>语句启用实时应用功能，如下所示：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于物理备用数据库，请发出<code class="codeph">ALTER DATABASE RECOVER MANAGED STANDBY DATABASE</code>语句。（从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始，不推荐<code class="codeph">USING CURRENT LOGFILE</code>子句，不再需要启动实时应用。）
                           </p>
                        </li>
                        <li>
                           <p>对于逻辑备用数据库，请发出<code class="codeph">ALTER DATABASE START LOGICAL STANDBY APPLY IMMEDIATE</code>语句。
                           </p>
                        </li>
                     </ul>
                     <p>实时应用需要备用数据库，该备用数据库配置有备用重做日志且处于ARCHIVELOG模式。</p>
                     <p><a href="oracle-data-guard-redo-apply-services.html#GUID-9922F0E7-3E19-449E-8C35-57B7E5714C54__I1021537">图8-1</a>显示了一个<a id="d17646e513" class="indexterm-anchor"></a>具有本地目标和备用目标的Oracle Data Guard配置。作为远程文件服务器<a id="d17646e518" class="indexterm-anchor"></a> （RFS）进程将重做数据写入备用数据库上的备用重做日志文件，应用服务可以在备用重做日志文件被填充时恢复重做。
                     </p>
                     <div class="figure" id="GUID-9922F0E7-3E19-449E-8C35-57B7E5714C54__I1021537">
                        <p class="titleinfigure">图8-1使用Real-Time Apply将重做数据应用到备用目标</p><img src="img/sbydb049.gif" alt="下面是图8-1的描述" title="下面是图8-1的描述" longdesc="img_text/sbydb049.html"><br><a href="img_text/sbydb049.html">“图8-1使用实时应用将重做数据应用于备用目标”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="SBYDB5031"></a><a id="SBYDB5032"></a><a id="SBYDB4762"></a><div class="props_rev_3"><a id="GUID-B891A164-1FDC-4AB3-838F-E6A91E7DA0B7" name="GUID-B891A164-1FDC-4AB3-838F-E6A91E7DA0B7"></a><h4 id="SBYDB-GUID-B891A164-1FDC-4AB3-838F-E6A91E7DA0B7" class="sect4"><span class="enumeration_section">8.2.2</span>指定归档重做日志文件应用的时间延迟</h4>
                  <div>
                     <p>在某些情况下，您可能希望在从主站点接收重做数据的时间与应用于备用数据库的重做数据之间创建时间延迟。</p>
                     <p>您可以指定一个时间间隔（以分钟为单位），以防止将损坏或错误的数据应用到备用数据库。设置<code class="codeph">DELAY</code>间隔时，它不会延迟重做数据到备用数据库的传输。相反，您指定的时间延迟在重做数据在备用目标位置完全存档时开始。
                     </p>
                     <div class="infoboxnote" id="GUID-B891A164-1FDC-4AB3-838F-E6A91E7DA0B7__GUID-8E262E61-E691-4A1E-8570-C5D45E16C9DE">
                        <p class="notep1">注意：</p>
                        <p>如果为启用了实时应用的目标定义延迟，则会忽略延迟。如果您按照以下段落中的描述定义延迟，则必须使用<code class="codeph">USING ARCHIVED LOGFILE</code>子句启动apply，如<a href="oracle-data-guard-redo-apply-services.html#GUID-54FA44F8-1EDA-4CAF-8B04-90CC6108FED8" title="要开始在物理备用数据库上应用服务，请确保已启动并装入物理备用数据库，然后启动重做应用。">启动重做应用中</a>所示。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-B891A164-1FDC-4AB3-838F-E6A91E7DA0B7__GUID-C5F66E44-96BF-465A-8A59-45574E03F1BC">指定时间延迟</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>您可以在主数据库和备用数据库上设置时间延迟<a id="d17646e667" class="indexterm-anchor"></a><a id="d17646e671" class="indexterm-anchor"></a>使用<code class="codeph">DE</code> <a id="d17646e678" class="indexterm-anchor"></a><a id="d17646e682" class="indexterm-anchor"></a> <code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数的<code class="codeph">LAY=</code> <span class="italic"><code class="codeph">minutes</code></span>属性，用于将归档重做日志文件延迟应用到备用数据库。默认情况下，没有时间延迟。如果指定<code class="codeph">DELAY</code>属性而未指定值，则默认延迟间隔为30分钟。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B891A164-1FDC-4AB3-838F-E6A91E7DA0B7__GUID-102EBCEA-EE8F-4D9B-87B0-4D9978F469E5">取消延时</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>您可以按如下方式取消指定的延迟间隔：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于物理备用数据库，请使用<code class="codeph">RECOVER MANAGED STANDBY DATABASE</code>子句的<code class="codeph">NODELAY</code>关键字：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE NODELAY;</pre></li>
                           <li>
                              <p>对于逻辑备用数据库，请指定以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE START LOGICAL STANDBY应用NODELAY;</pre></li>
                        </ul>
                        <p>这些命令导致应用服务立即开始在时间间隔到期之前将归档重做日志文件应用于备用数据库。</p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="SBYDB4763"></a><div class="props_rev_3"><a id="GUID-B02340AF-CE23-4B1A-AE2B-45FA7E646AF0" name="GUID-B02340AF-CE23-4B1A-AE2B-45FA7E646AF0"></a><h5 id="SBYDB-GUID-B02340AF-CE23-4B1A-AE2B-45FA7E646AF0" class="sect5"><span class="enumeration_section">8.2.2.1</span>使用闪回数据库作为设置时间延迟的替代方法</h5>
                     <div>
                        <p>作为设置应用延迟的替代方法，您可以使用闪回数据库从应用程序中将已损坏或错误的数据恢复到备用数据库。</p>
                        <p>闪回数据库可以快速轻松地将备用数据库闪回到任意时间点。</p>
                        <p>有关如何将Oracle Data Guard与闪回数据库一起使用的<a href="examples-of-using-oracle-data-guard.html#GUID-07C5867F-C55F-4B5B-804F-1800CE9985EF" title="These scenarios present different situations you might encounter while administering your Oracle Data Guard configuration. Each of them can be adapted to your specific environment.">方案</a> ，请参阅<a href="examples-of-using-oracle-data-guard.html#GUID-07C5867F-C55F-4B5B-804F-1800CE9985EF" title="These scenarios present different situations you might encounter while administering your Oracle Data Guard configuration. Each of them can be adapted to your specific environment.">Oracle Data Guard方案</a> ，以及有关启用和使用闪回数据库的详细信息，请参阅“ <a href="examples-of-using-oracle-data-guard.html#GUID-07C5867F-C55F-4B5B-804F-1800CE9985EF" title="这些方案显示了在管理Oracle Data Guard配置时可能遇到的不同情况。每个都可以适应您的特定环境。">Oracle</a> <a href="../bradv/using-flasback-database-restore-points.html#BRADV71000" target="_blank"><span class="italic">数据库备份和恢复用户指南”</span></a> 。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB00515"></a><div class="props_rev_3"><a id="GUID-2B839172-947E-48A4-9FFD-33CC6907809F" name="GUID-2B839172-947E-48A4-9FFD-33CC6907809F"></a><h3 id="SBYDB-GUID-2B839172-947E-48A4-9FFD-33CC6907809F" class="sect3"><span class="enumeration_section">8.3</span>将重做数据应用于物理备用数据库</h3>
               <div>
                  <p>执行重做应用时，物理备用数据库可以使用实时应用功能直接从备用重做日志文件应用重做，因为它们是由远程文件服务器（RFS）进程写入的。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="oracle-data-guard-redo-apply-services.html#GUID-54FA44F8-1EDA-4CAF-8B04-90CC6108FED8" title="要开始在物理备用数据库上应用服务，请确保已启动并装入物理备用数据库，然后启动重做应用。">开始重做申请</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-data-guard-redo-apply-services.html#GUID-1808DF72-C384-4BC2-A75F-D73C56C22A2B" title="使用ALTER DATABASE SQL语句停止重做应用。">停止重做申请</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-data-guard-redo-apply-services.html#GUID-F9964184-5E31-4373-A24E-318AD5C511F5" title="您可以监视物理备用数据库上的应用服务的状态。">监控重做应用于物理备用数据库</a></p>
                     </li>
                  </ul>
               </div><a id="SBYDB00530"></a><div class="props_rev_3"><a id="GUID-54FA44F8-1EDA-4CAF-8B04-90CC6108FED8" name="GUID-54FA44F8-1EDA-4CAF-8B04-90CC6108FED8"></a><h4 id="SBYDB-GUID-54FA44F8-1EDA-4CAF-8B04-90CC6108FED8" class="sect4"><span class="enumeration_section">8.3.1</span>启动重做应用</h4>
                  <div>
                     <p>要开始在物理备用数据库上应用服务，请确保已启动并装入物理备用数据库，然后启动重做应用。</p>
                     <div class="section">
                        <p>开始在物理备用数据库上应用服务，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE;</pre><p>如果备用数据库配置了备用重做日志并且处于<code class="codeph">ARCHIVELOG</code>模式，这也会自动启用实时应用。
                        </p>
                        <p>重做应用既可以作为前台会话运行，也可以作为后台进程运行。要在前台启动Redo Apply，请发出以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE;</pre><p>如果启动前台会话，则控制不会返回到命令提示符，直到另一个会话取消恢复。</p>
                        <p>要在后台启动Redo Apply，请在SQL语句中包含<code class="codeph">DISCONNECT</code>关键字。例如：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE DISCONNECT;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE使用归档的LOGFILE DISCONNECT恢复管理的待机数据库;</pre><p>此语句启动分离的服务器进程并立即将控制权返回给用户。托管恢复过程在后台执行恢复时，发出<code class="codeph">RECOVER</code>语句的前台进程可以继续执行其他任务。此命令不会断开当前的SQL会话。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4764"></a><div class="props_rev_3"><a id="GUID-1808DF72-C384-4BC2-A75F-D73C56C22A2B" name="GUID-1808DF72-C384-4BC2-A75F-D73C56C22A2B"></a><h4 id="SBYDB-GUID-1808DF72-C384-4BC2-A75F-D73C56C22A2B" class="sect4"><span class="enumeration_section">8.3.2</span>停止重做应用</h4>
                  <div>
                     <p>使用<code class="codeph">ALTER DATABASE</code> SQL语句停止重做应用。
                     </p>
                     <div class="section">
                        <p>例如，发出以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4765"></a><div class="props_rev_3"><a id="GUID-F9964184-5E31-4373-A24E-318AD5C511F5" name="GUID-F9964184-5E31-4373-A24E-318AD5C511F5"></a><h4 id="SBYDB-GUID-F9964184-5E31-4373-A24E-318AD5C511F5" class="sect4"><span class="enumeration_section">8.3.3</span>监控重做应用于物理备用数据库</h4>
                  <div>
                     <p>您可以监视物理备用数据库上的应用服务的状态。</p>
                     <div class="section">
                        <p>请参阅<a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-567E9883-B1BE-431D-86E9-872BAB6A899F" title="您可以使用动态性能视图来监视主数据库，物理备用数据库和快照备用数据库。">使用视图监视Primary_ Physical_和Snapshot备用数据库</a> 。您还可以使用Oracle Enterprise Manager Cloud Control监控备用数据库。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB00510"></a><div class="props_rev_3"><a id="GUID-7D8A891C-2906-4CC0-9181-B29C4F3C2450" name="GUID-7D8A891C-2906-4CC0-9181-B29C4F3C2450"></a><h3 id="SBYDB-GUID-7D8A891C-2906-4CC0-9181-B29C4F3C2450" class="sect3"><span class="enumeration_section">8.4</span>将重做数据应用于逻辑备用数据库</h3>
               <div>
                  <p>SQL Apply将归档重做日志或备用重做日志中的数据转换为SQL语句，然后在逻辑备用数据库上执行这些SQL语句。</p>
                  <p>由于逻辑备用数据库保持打开状态，因此维护的表可以同时用于其他任务，例如报告，汇总和查询。</p>
                  <p>请参阅以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="oracle-data-guard-redo-apply-services.html#GUID-5E640AEE-12C7-4ED8-8C42-B989F7768E91" title="使用ALTER DATABASE SQL语句启动SQL Apply。">启动SQL Apply</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-data-guard-redo-apply-services.html#GUID-C7B53D2A-5D38-4BA5-8142-98A81691A415" title="使用ALTER DATABASE SQL语句在逻辑备用数据库上停止SQL Apply。">在逻辑备用数据库上停止SQL Apply</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-data-guard-redo-apply-services.html#GUID-8A34CBE4-AD50-4918-AB5F-671CF9A66B20" title="有些视图提供了可用于管理和监视逻辑备用数据库上的SQL Apply的信息。">监视逻辑备用数据库上的SQL Apply</a></p>
                     </li>
                  </ul>
               </div><a id="SBYDB4766"></a><div class="props_rev_3"><a id="GUID-5E640AEE-12C7-4ED8-8C42-B989F7768E91" name="GUID-5E640AEE-12C7-4ED8-8C42-B989F7768E91"></a><h4 id="SBYDB-GUID-5E640AEE-12C7-4ED8-8C42-B989F7768E91" class="sect4"><span class="enumeration_section">8.4.1</span>启动SQL Apply</h4>
                  <div>
                     <p>使用<code class="codeph">ALTER DATABASE</code> SQL语句启动SQL Apply。
                     </p>
                     <div class="section">
                        <p>例如，要启动SQL Apply，请启动逻辑备用数据库并发出以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE START LOGICAL STANDBY APPLY;</pre><p>要开始实时应用逻辑备用数据库以立即从逻辑备用数据库上的备用重做日志文件应用重做数据，请包含<code class="codeph">IMMEDIATE</code>关键字，如以下语句所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE START LOGICAL STANDBY立即申请;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4767"></a><div class="props_rev_3"><a id="GUID-C7B53D2A-5D38-4BA5-8142-98A81691A415" name="GUID-C7B53D2A-5D38-4BA5-8142-98A81691A415"></a><h4 id="SBYDB-GUID-C7B53D2A-5D38-4BA5-8142-98A81691A415" class="sect4"><span class="enumeration_section">8.4.2</span>在逻辑备用数据库上停止SQL应用</h4>
                  <div>
                     <p>使用<code class="codeph">ALTER DATABASE</code> SQL语句在逻辑备用数据库上停止SQL Apply。
                     </p>
                     <div class="section">
                        <p>例如，在逻辑备用数据库上发出以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE STOP LOGICAL STANDBY APPLY;</pre><p>发出此语句时，SQL Apply将等待，直到它提交了正在应用的所有完整事务。因此，此命令可能不会立即停止SQL Apply进程。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4768"></a><div class="props_rev_3"><a id="GUID-8A34CBE4-AD50-4918-AB5F-671CF9A66B20" name="GUID-8A34CBE4-AD50-4918-AB5F-671CF9A66B20"></a><h4 id="SBYDB-GUID-8A34CBE4-AD50-4918-AB5F-671CF9A66B20" class="sect4"><span class="enumeration_section">8.4.3</span>监视逻辑备用数据库上的SQL应用</h4>
                  <div>
                     <p>有些视图提供了可用于管理和监视逻辑备用数据库上的SQL Apply的信息。</p>
                     <div class="section">
                        <p>请参阅<a href="managing-oracle-data-guard-logical-standby-databases.html#GUID-D6636F76-CD66-49A8-B052-503991190FBF" title="您可以使用性能视图来监视SQL Apply维护逻辑备用数据库的行为。">与管理和监视逻辑备用数据库相关的视图</a> 。您还可以使用Oracle Enterprise Manager Cloud Control监控备用数据库。请参阅<a href="troubleshooting-oracle-data-guard.html#GUID-1AF3825C-C58B-4362-ADD5-A21FEF75912F" title="这些是备用数据库可能出现的一些问题，以及解决这些问题的故障排除过程。">Oracle Data Guard故障排除</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB5405"></a><div class="props_rev_3"><a id="GUID-BAE8BC61-84AF-49D3-9122-FAA69A0A01F7" name="GUID-BAE8BC61-84AF-49D3-9122-FAA69A0A01F7"></a><h3 id="SBYDB-GUID-BAE8BC61-84AF-49D3-9122-FAA69A0A01F7" class="sect3"><span class="enumeration_section">8.5</span>在主节点上删除或重命名PDB时的备用注意事项</h3>
               <div>
                  <p>如果主服务器是多租户容器数据库（CDB），则在主服务器上删除或重命名可插拔数据库（PDB）时，将应用限制。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>要在PDB上执行DDL <code class="codeph">UNPLUG</code>和<code class="codeph">DROP</code>操作，必须首先在主数据库和所有备用数据库上关闭PDB。
                        </p>
                     </li>
                     <li>
                        <p>要在PDB上执行DDL <code class="codeph">RENAME</code>操作，必须首先将PDB置于主<code class="codeph">RENAME</code>上的开放受限模式，并在所有备用数据库上关闭PDB。
                        </p>
                     </li>
                  </ul>
                  <p>如果在删除PDB之前没有关闭PDB或在主数据库中重命名PDB，则备用数据库将停止所有PDB的恢复过程。必须在备用数据库上关闭已删除的PDB，然后使用以下SQL语句重新启动恢复：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE;</pre></div>
            </div>
         </div>
      </article>
   </body>
</html>
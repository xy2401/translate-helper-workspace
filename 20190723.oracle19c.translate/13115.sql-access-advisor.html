<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="SQL Access Advisor is diagnostic software that identifies and helps resolve SQL performance problems by recommending indexes, materialized views, materialized view logs, or partitions to create, drop, or retain."></meta>
      <meta name="description" content="SQL Access Advisor is diagnostic software that identifies and helps resolve SQL performance problems by recommending indexes, materialized views, materialized view logs, or partitions to create, drop, or retain."></meta>
      <title>使用SQL Access Advisor优化访问路径</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Tuning Guide"></meta>
      <meta property="og:description" content="SQL Access Advisor is diagnostic software that identifies and helps resolve SQL performance problems by recommending indexes, materialized views, materialized view logs, or partitions to create, drop, or retain."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00"></meta>
      <meta name="dcterms.title" content="SQL Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96095-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="sql-tuning-advisor.html" title="Previous" type="text/html"></link>
      <link rel="next" href="sql-controls.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sql-tuning-advisor.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="sql-controls.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="automatic-sql-tuning.html" property="item" typeof="WebPage"><span property="name">自动SQL调整</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用SQL Access Advisor优化访问路径</li>
            </ol>
            <a id="GUID-561EC9B4-0930-4915-B5E1-17F2C5ACD261" name="GUID-561EC9B4-0930-4915-B5E1-17F2C5ACD261"></a>
            
            <h2 id="TGSQL-GUID-561EC9B4-0930-4915-B5E1-17F2C5ACD261" class="sect2"><span class="enumeration_chapter">25</span>使用SQL Access Advisor优化访问路径</h2>
         </header>
         <div class="ind">
            <div>
               <p><strong class="term">SQL Access Advisor</strong>是一种诊断软件，通过推荐创建，删除或保留索引，物化视图，物化视图日志或分区来识别并帮助解决SQL性能问题。
               </p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-10DCBE78-9330-4713-AD79-5C7E73EACD33">关于SQL Access Advisor</a><br>SQL Access Advisor接受来自多个源（包括SQL调优集）的输入，然后发出建议。
                  </li>
                  <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283">使用SQL Access Advisor：基本任务</a><br>基本任务包括创建STS，加载它，创建SQL Access Advisor任务，然后执行任务。
                  </li>
                  <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-5FD677D7-1A29-4034-A63E-A78383C61456">执行SQL Access Advisor Quick Tune</a><br>为了调整单个SQL语句， <code class="codeph">DBMS_ADVISOR.QUICK_TUNE</code>过程接受<code class="codeph">task_name</code>和单个SQL语句作为其输入。
                  </li>
                  <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE">使用SQL Access Advisor：高级任务</a><br>本节介绍涉及SQL Access Advisor的高级任务。
                  </li>
                  <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-0A74A15A-E1D1-40EA-A7F8-2EF775C8D426">SQL Access Advisor示例</a><br>Oracle数据库提供了一个脚本，其中包含可以在测试数据库上运行的多个SQL Access Advisor示例。
                  </li>
                  <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-1C7083BD-2AFC-43EA-B940-13D2F77935DF">SQL Access Advisor参考</a><br>您可以使用数据字典视图访问有关SQL Access Advisor的元数据。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="automatic-sql-tuning.html#GUID-538A6E57-527A-46D2-97B8-F2238E0D0838" title="SQL Tuning Advisor和SQL Access Advisor是内置工具，提供SQL调优建议。">自动SQL调整</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL592"></a><div class="props_rev_3"><a id="GUID-10DCBE78-9330-4713-AD79-5C7E73EACD33" name="GUID-10DCBE78-9330-4713-AD79-5C7E73EACD33"></a><h3 id="TGSQL-GUID-10DCBE78-9330-4713-AD79-5C7E73EACD33" class="sect3"><span class="enumeration_section">25.1</span>关于SQL Access Advisor</h3>
               <div>
                  <p>SQL Access Advisor接受来自多个源（包括SQL调优集）的输入，然后发出建议。</p>
                  <div class="infoboxnote" id="GUID-10DCBE78-9330-4713-AD79-5C7E73EACD33__GUID-6A6D202F-F202-4C76-9BE3-FC79A961E95E">
                     <p class="notep1">注意：</p>
                     <p>将SQL Access Advisor与可插拔数据库一起使用时，数据可见性和权限要求可能会有所不同。</p>
                  </div>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-A2BEC590-63CC-4F3D-ADA8-DB22CEC85141">SQL Access Advisor的用途</a><br>SQL Access Advisor建议为指定工作负载提供适当的物化视图集，物化视图日志，分区和索引。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-8D841251-23FF-487F-A50A-EB42103A0063">SQL Access Advisor体系结构</a><br>自动调整优化器是SQL Access Advisor使用的核心工具。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-5DC21B66-A3DF-4C10-ADC2-F3DC824A58B6">SQL Access Advisor的用户界面</a><br>Oracle建议您通过其GUI向导使用SQL Access Advisor，该向导可在Cloud Control中使用。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-10DCBE78-9330-4713-AD79-5C7E73EACD33__GUID-FF8B4CD4-E26E-4DD3-861B-5A0E3B913032">
                     <p class="notep1">也可以看看：</p>
                     <p> <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN13885" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，其中总结了可管理性功能在容器数据库（CDB）中的工作方式</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-561EC9B4-0930-4915-B5E1-17F2C5ACD261" title="SQL Access Advisor是一种诊断软件，通过推荐创建，删除或保留索引，物化视图，物化视图日志或分区来识别并帮助解决SQL性能问题。">使用SQL Access Advisor优化访问路径</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94751"></a><div class="props_rev_3"><a id="GUID-A2BEC590-63CC-4F3D-ADA8-DB22CEC85141" name="GUID-A2BEC590-63CC-4F3D-ADA8-DB22CEC85141"></a><h4 id="TGSQL-GUID-A2BEC590-63CC-4F3D-ADA8-DB22CEC85141" class="sect4"><span class="enumeration_section">25.1.1</span> SQL Access Advisor的用途</h4>
                  <div>
                     <p>SQL Access Advisor建议为指定工作负载提供适当的物化视图集，物化视图日志，分区和索引。</p>
                     <p>在调整数据库以实现复杂的数据密集型查询的最佳性能时，物化视图，分区和索引是必不可少的。SQL Access Advisor将实际工作负载作为输入，或从模式中派生假设工作负载。然后，顾问会建议访问结构以实现更快的执行路径。顾问具有以下优势：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不要求您具备专业知识</p>
                        </li>
                        <li>
                           <p>根据驻留在优化器中的规则做出决策</p>
                        </li>
                        <li>
                           <p>在单个顾问程序中涵盖SQL访问的所有方面</p>
                        </li>
                        <li>
                           <p>在Cloud Control中提供简单，用户友好的GUI向导</p>
                        </li>
                        <li>
                           <p>生成用于实施建议的脚本</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A2BEC590-63CC-4F3D-ADA8-DB22CEC85141__GUID-4C7A1EF6-575F-4C1F-B58C-A7141D2CCE36">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../tdppt/optimizing-data-access-paths.html#TDPPT170" target="_blank"><span><cite>Oracle Database 2 Day +性能调优指南</cite></span></a> ，了解如何将SQL Access Advisor与Cloud Control配合使用</p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关自动索引的更多信息</p>
                           </li>
                           <li>
                              <p><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>“Oracle数据库许可信息用户手册”</cite></span></a> ，详细说明了不同版本和服务是否支持自动索引</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-10DCBE78-9330-4713-AD79-5C7E73EACD33" title="SQL Access Advisor接受来自多个源（包括SQL调优集）的输入，然后发出建议。">关于SQL Access Advisor</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94753"></a><a id="TGSQL94752"></a><div class="props_rev_3"><a id="GUID-8D841251-23FF-487F-A50A-EB42103A0063" name="GUID-8D841251-23FF-487F-A50A-EB42103A0063"></a><h4 id="TGSQL-GUID-8D841251-23FF-487F-A50A-EB42103A0063" class="sect4"><span class="enumeration_section">25.1.2</span> SQL Access Advisor体系结构</h4>
                  <div>
                     <p>自动调整优化器是SQL Access Advisor使用的核心工具。</p>
                     <p>顾问程序可以从<a href="sql-access-advisor.html#GUID-8D841251-23FF-487F-A50A-EB42103A0063__CHDIBFIJ">图25-1中</a>显示的源接收SQL语句作为输入，使用优化程序分析这些语句，然后提出建议。
                     </p>
                     <p><a href="sql-access-advisor.html#GUID-8D841251-23FF-487F-A50A-EB42103A0063__CHDIBFIJ">图25-1</a>显示了SQL Access Advisor的基本体系结构。
                     </p>
                     <div class="figure" id="GUID-8D841251-23FF-487F-A50A-EB42103A0063__CHDIBFIJ">
                        <p class="titleinfigure">图25-1 SQL Access Advisor体系结构</p><img src="img/tgsql_vm_067.png" alt="下面是图25-1的描述" title="下面是图25-1的描述" longdesc="img_text/tgsql_vm_067.html"><br><a href="img_text/tgsql_vm_067.html">“图25-1 SQL Access Advisor体系结构”的说明</a></div>
                     <!-- class="figure" -->
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-F92D0170-5FB2-432D-B2F3-B2AFCAAC0408">输入到SQL Access Advisor</a><br>SQL Access Advisor需要一个工作负载，该工作负载由一个或多个SQL语句以及完全描述每个语句的统计信息和属性组成。
                        </li>
                        <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-028D1096-3280-4065-BD00-D695B75B4D51">SQL Access Advisor的筛选选项</a><br>您可以将过滤器应用于工作负载以限制分析的内容。
                        </li>
                        <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-BBEB9848-36CF-4416-9330-2AFD5879B565">SQL Access Advisor建议</a><br>任务建议的范围从简单到复杂的解决方案。
                        </li>
                        <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-6A6A6BA3-1655-4CAB-AE16-A4C4D0E5D492">SQL Access Advisor操作</a><br>通常，每个推荐都为一组查询提供了好处。
                        </li>
                        <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-0AED96BA-26F7-41CF-A8D7-36CA34213193">SQL Access Advisor存储库</a><br>SQL Access Advisor所需和生成的信息驻留在Advisor存储库中，该存储库位于数据字典中。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-8D841251-23FF-487F-A50A-EB42103A0063__GUID-BB040DC8-0EB4-45CF-97C8-B0A81296A5AB">
                        <p class="notep1">也可以看看：</p>
                        <p> <span class="q">“ <a href="query-optimizer-concepts.html#GUID-7D015E05-A08D-478B-81AC-AB04ECEED8FA" title="优化器根据调用方式执行不同的操作。">关于自动调整优化器</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-10DCBE78-9330-4713-AD79-5C7E73EACD33" title="SQL Access Advisor接受来自多个源（包括SQL调优集）的输入，然后发出建议。">关于SQL Access Advisor</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94754"></a><div class="props_rev_3"><a id="GUID-F92D0170-5FB2-432D-B2F3-B2AFCAAC0408" name="GUID-F92D0170-5FB2-432D-B2F3-B2AFCAAC0408"></a><h5 id="TGSQL-GUID-F92D0170-5FB2-432D-B2F3-B2AFCAAC0408" class="sect5"><span class="enumeration_section">25.1.2.1</span> SQL Access Advisor的输入</h5>
                     <div>
                        <p>SQL Access Advisor需要一个工作负载，该工作负载由一个或多个SQL语句以及完全描述每个语句的统计信息和属性组成。</p>
                        <p>完整工作负载包含来自目标业务应用程序的所有SQL语句。部分工作负载包含SQL语句的子集。</p>
                        <p><a href="sql-access-advisor.html#GUID-8D841251-23FF-487F-A50A-EB42103A0063__CHDIBFIJ">如图25-1</a>所示，SQL Access Advisor输入可以来自以下来源：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>共享SQL区域</p>
                              <p>数据库使用<a href="glossary.html#GUID-577D0DD3-FB98-4B1B-BCFB-95313BB35C01"><span class="xrefglossterm">共享SQL区域</span></a>来分析当前处于<code class="codeph">V$SQL</code>最新SQL语句。</p>
                           </li>
                           <li>
                              <p>SQL调优集</p>
                              <p><a href="glossary.html#GUID-52FB0AE5-7346-44E5-BE92-3C09385B1DDC"><span class="xrefglossterm">SQL调优集（STS）</span></a>是一个数据库对象，它存储SQL语句及其执行上下文。当一组SQL语句用作输入时，数据库必须首先构造并使用STS。</p>
                              <div class="infoboxnote" id="GUID-F92D0170-5FB2-432D-B2F3-B2AFCAAC0408__GUID-C0FDC85F-4AB6-4A97-A7FF-25B3F103FE2D">
                                 <p class="notep1">注意：</p>
                                 <p>为获得最佳结果，请将工作负载作为SQL调优集提供。<code class="codeph">DBMS_SQLTUNE</code>包提供了辅助函数，可以从公共工作负载源创建SQL调优集，例如SQL缓存，存储在表中的用户定义工作负载以及假设工作负载。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>假设的工作量</p>
                              <p>您可以通过分析维度和约束来从架构创建假设工作负载。在最初设计应用程序时，此选项很有用。</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F92D0170-5FB2-432D-B2F3-B2AFCAAC0408__GUID-E12DABE0-BA0F-4BE1-9BE8-FA8C940BE422">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="managing-sql-tuning-sets.html#GUID-DD136837-9921-4C73-ABB8-9F1DC22542C5" title="SQL调优集（STS）是一个数据库对象，可用作调优工具的输入。">关于SQL调优集</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../cncpt/memory-architecture.html#CNCPT1228" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解共享SQL区域</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-8D841251-23FF-487F-A50A-EB42103A0063" title="自动调整优化器是SQL Access Advisor使用的核心工具。">SQL Access Advisor体系结构</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94755"></a><div class="props_rev_3"><a id="GUID-028D1096-3280-4065-BD00-D695B75B4D51" name="GUID-028D1096-3280-4065-BD00-D695B75B4D51"></a><h5 id="TGSQL-GUID-028D1096-3280-4065-BD00-D695B75B4D51" class="sect5"><span class="enumeration_section">25.1.2.2</span> SQL Access Advisor的筛选选项</h5>
                     <div>
                        <p>您可以将过滤器应用于工作负载以限制分析的内容。</p>
                        <p>例如，根据优化程序成本，指定顾问程序仅查看工作负载中30个最耗费资源的语句。此限制可以基于不同的工作负载方案生成不同的建议集。</p>
                        <p>SQL Access Advisor参数控制推荐过程和工作负载的自定义。这些参数控制流程的各个方面，例如所需的推荐类型以及推荐的命名约定。</p>
                        <p>要设置这些参数，请使用<code class="codeph">DBMS_ADVISOR.SET_TASK_PARAMETER</code>过程。参数是持久的，因为它们在任务的生命周期内保持设置。使用<code class="codeph">DBMS_ADVISOR.SET_TASK_PARAMETER</code>设置参数值时，在您再次调用此过程之前，该值不会更改。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-028D1096-3280-4065-BD00-D695B75B4D51__GUID-D4AFF7AA-F6AA-48CE-AAF0-44E5A42466C3">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_ADVISOR.html#ARPLS65151" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_ADVISOR.SET_TASK_PARAMETER</code>过程</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-8D841251-23FF-487F-A50A-EB42103A0063" title="自动调整优化器是SQL Access Advisor使用的核心工具。">SQL Access Advisor体系结构</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94756"></a><div class="props_rev_3"><a id="GUID-BBEB9848-36CF-4416-9330-2AFD5879B565" name="GUID-BBEB9848-36CF-4416-9330-2AFD5879B565"></a><h5 id="TGSQL-GUID-BBEB9848-36CF-4416-9330-2AFD5879B565" class="sect5"><span class="enumeration_section">25.1.2.3</span> SQL Access Advisor建议</h5>
                     <div>
                        <p>任务建议的范围从简单到复杂的解决方案。</p>
                        <p>顾问程序可以建议您创建数据库对象，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>索引</p>
                              <p>SQL Access Advisor索引建议包括位图，基于功能和B树索引。与其他索引技术相比，位图索引为许多类型的即席查询提供了缩短的响应时间，并降低了存储要求。B树索引最常用于数据仓库中以索引唯一或接近唯一的密钥。SQL Access Advisor物化视图建议包括快速刷新和完全可刷新的物化视图，用于一般重写或精确文本匹配重写。</p>
                           </li>
                           <li>
                              <p>物化观点</p>
                              <p>SQL Access Advisor使用<code class="codeph">TUNE_MVIEW</code>过程，还建议如何优化<code class="codeph">TUNE_MVIEW</code>化视图，以便可以快速刷新它们并利用常规查询重写。
                              </p>
                           </li>
                           <li>
                              <p>物化视图日志</p>
                              <p>物化视图日志是物化视图的主站点或主物化视图站点上的表，它记录对主表或主物化视图的所有DML更改。仅当物化视图的主视图具有物化视图日志时，才可以快速刷新物化视图。</p>
                           </li>
                           <li>
                              <p>分区</p>
                              <p>SQL Access Advisor可以建议对现有的未分区基表进行分区以提高性能。此外，它可能会建议自己分区的新索引和物化视图。</p>
                              <p>虽然创建新的分区索引和物化视图与未分区的案例没有区别，但要小心地对现有基表进行分区。在表上定义索引，视图，约束或触发器时尤其如此。</p>
                           </li>
                        </ul>
                        <p>为了提出建议，SQL Access Advisor依赖于维度级别列， <code class="codeph">JOIN KEY</code>列和事实表键列的表和索引基数的结构统计信息。您可以使用<code class="codeph">DBMS_STATS</code>包收集精确或估计的统计信息。
                        </p>
                        <p>由于收集统计数据非常耗时且不需要完整的统计准确性，因此通常最好估算统计数据。如果不收集指定表的统计信息，则引用此表的查询将在工作负载中标记为无效，从而不会对这些查询建议。还建议分析所有现有索引和物化视图。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-BBEB9848-36CF-4416-9330-2AFD5879B565__GUID-69280AB8-1DED-4860-97A9-27A0EC06B792">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="gathering-optimizer-statistics.html#GUID-83F1A4F5-A316-4EAD-9AE6-CB95C1885001" title="使用DBMS_STATS包来操作优化程序统计信息。您可以在不同的粒度级别收集对象和列的统计信息：对象，架构和数据库。您还可以收集物理系统的统计信息。">关于使用DBMS_STATS进行手动统计信息收集</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../dwhsg/basic-materialized-views.html#DWHSG0081" target="_blank"><span><cite>Oracle数据库数据仓库指南</cite></span></a> ，了解有关物化视图的更多信息</p>
                              </li>
                              <li>
                                 <p><a href="../vldbg/partition-intro.html#VLDBG00101" target="_blank"><span><cite>Oracle Database VLDB和分区指南</cite></span></a>了解有关分区的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-8D841251-23FF-487F-A50A-EB42103A0063" title="自动调整优化器是SQL Access Advisor使用的核心工具。">SQL Access Advisor体系结构</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94757"></a><div class="props_rev_3"><a id="GUID-6A6A6BA3-1655-4CAB-AE16-A4C4D0E5D492" name="GUID-6A6A6BA3-1655-4CAB-AE16-A4C4D0E5D492"></a><h5 id="TGSQL-GUID-6A6A6BA3-1655-4CAB-AE16-A4C4D0E5D492" class="sect5"><span class="enumeration_section">25.1.2.4</span> SQL Access Advisor操作</h5>
                     <div>
                        <p>通常，每个推荐都为一组查询提供了好处。</p>
                        <p>必须同时实施建议中的所有个人行动，以实现全部利益。建议可以分享行动。</p>
                        <p>例如， <code class="codeph">CREATE INDEX</code>语句可以为多个查询提供好处，但某些查询可能会受益于额外的<code class="codeph">CREATE MATERIALIZED VIEW</code>语句。在这种情况下，顾问程序将生成两个建议：一个用于仅需要索引的查询集，另一个用于需要索引和物化视图的查询集。
                        </p>
                        <p>本节包含以下主题：</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-A7EC47DE-3830-43CA-AD60-180FA3E71900">行动类型</a><br>SQL Access Advisor提供了几种不同类型的建议。
                           </li>
                           <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-6BEDF86C-DC63-4DF1-A9E7-A6719B931103">解释分区建议的指南</a><br>当SQL Access Advisor确定对基表进行分区可以提高性能时，顾问程序会为包含引用该表的查询的每个建议添加分区操作。通过这种方式，索引和物化视图建议在正确分区的表上实现。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-8D841251-23FF-487F-A50A-EB42103A0063" title="自动调整优化器是SQL Access Advisor使用的核心工具。">SQL Access Advisor体系结构</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="TGSQL94758"></a><div class="props_rev_3"><a id="GUID-A7EC47DE-3830-43CA-AD60-180FA3E71900" name="GUID-A7EC47DE-3830-43CA-AD60-180FA3E71900"></a><h6 id="TGSQL-GUID-A7EC47DE-3830-43CA-AD60-180FA3E71900" class="sect6"><span class="enumeration_section">25.1.2.4.1行为</span>类型</h6>
                        <div>
                           <p>SQL Access Advisor提供了几种不同类型的建议。</p>
                           <p>建议包括以下类型的操作：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">分区基表</code></p>
                                 <p>此操作对现有的未分区基表进行分区。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">CREATE | DROP | RETAIN {MATERIALIZED VIEW | MATERIALIZED VIEW LOG | INDEX}</code></p>
                                 <p><code class="codeph">CREATE</code>操作对应于新的访问结构。<code class="codeph">RETAIN</code>建议保留现有的访问结构。当<code class="codeph">WORKLOAD_SCOPE</code>参数设置为<code class="codeph">FULL</code>时，SQL Access Advisor仅建议<code class="codeph">DROP</code> 。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">收集统计数据</code></p>
                                 <p>此操作将生成对<code class="codeph">DBMS_STATS</code>过程的调用，以收集有关新生成的访问结构的统计信息。
                                 </p>
                              </li>
                           </ul>
                           <p>多个建议可能涉及相同的操作。但是，在为建议生成脚本时，您只能看到每个操作一次。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-A7EC47DE-3830-43CA-AD60-180FA3E71900__GUID-25B4243F-EB6C-442B-BE3A-6E41BCFBF91C">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p> <span class="q">“ <a href="gathering-optimizer-statistics.html#GUID-83F1A4F5-A316-4EAD-9AE6-CB95C1885001" title="使用DBMS_STATS包来操作优化程序统计信息。您可以在不同的粒度级别收集对象和列的统计信息：对象，架构和数据库。您还可以收集物理系统的统计信息。">关于使用DBMS_STATS进行手动统计信息收集</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="sql-access-advisor.html#GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851" title="您可以使用多个数据字典视图查看SQL Access Advisor生成的每个建议。">查看SQL Access Advisor任务结果</a> ”</span>以了解如何查看操作和建议</p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-6A6A6BA3-1655-4CAB-AE16-A4C4D0E5D492" title="通常，每个推荐都为一组查询提供了好处。">SQL Access Advisor操作</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL94759"></a><div class="props_rev_3"><a id="GUID-6BEDF86C-DC63-4DF1-A9E7-A6719B931103" name="GUID-6BEDF86C-DC63-4DF1-A9E7-A6719B931103"></a><h6 id="TGSQL-GUID-6BEDF86C-DC63-4DF1-A9E7-A6719B931103" class="sect6"><span class="enumeration_section">25.1.2.4.2</span>解释分区建议的指南</h6>
                        <div>
                           <p>当SQL Access Advisor确定对基表进行分区可以提高性能时，顾问程序会为包含引用该表的查询的每个建议添加分区操作。通过这种方式，索引和物化视图建议在正确分区的表上实现。</p>
                           <div class="section">
                              <p>SQL Access Advisor可能会建议对现有的非分区基表进行分区。当顾问程序实现脚本包含分区建议时，请注意以下问题：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对现有表进行分区是一项复杂而广泛的操作，可能比实现新索引或物化视图要花费更长的时间。应该留出足够的时间来实施这项建议。</p>
                                 </li>
                                 <li>
                                    <p>虽然索引和物化视图建议很容易通过删除索引或视图来反转，但是在分区之后，表不能轻易地恢复到其原始状态。因此，请确保在执行包含分区建议的脚本之前备份数据库。</p>
                                 </li>
                                 <li>
                                    <p>在重新分区基表时，SQL Access Advisor脚本会生成原始表的临时副本，该表占用与原始表相同的空间量。因此，重新分区过程需要足够的可用磁盘空间，以便重新分区最大表的另一个副本。在运行实现脚本之前，请确保此类空间可用。</p>
                                    <p>分区实现脚本尝试迁移依赖对象，例如索引，物化视图和约束。但是，某些对象无法自动迁移。例如，针对重新分区的基表定义的PL / SQL存储过程通常变为无效，必须重新编译。</p>
                                 </li>
                                 <li>
                                    <p>如果您决定不实施分区建议，则同一脚本中同一个表上的所有其他建议（例如<code class="codeph">CREATE INDEX</code>和<code class="codeph">CREATE MATERIALIZED VIEW</code>建议）取决于分区建议。要获得准确的建议，请不要简单地从脚本中删除分区建议。而是通过禁用分区重新运行顾问程序，例如，通过将参数<code class="codeph">ANALYSIS_SCOPE</code>设置为不包含关键字<code class="codeph">TABLE</code> 。</p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-6BEDF86C-DC63-4DF1-A9E7-A6719B931103__GUID-8ABBA0F8-853C-45D4-8777-A58E817D1D56">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>用于<code class="codeph">CREATE DIRECTORY</code>语法的<a href="../sqlrf/CREATE-DIRECTORY.html#SQLRF01207" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">DBMS_ADVISOR.GET_TASK_SCRIPT</code>函数的详细信息，请<code class="codeph">DBMS_ADVISOR.GET_TASK_SCRIPT</code> <a href="../arpls/DBMS_ADVISOR.html#ARPLS65121" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-6A6A6BA3-1655-4CAB-AE16-A4C4D0E5D492" title="通常，每个推荐都为一组查询提供了好处。">SQL Access Advisor操作</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="TGSQL94760"></a><div class="props_rev_3"><a id="GUID-0AED96BA-26F7-41CF-A8D7-36CA34213193" name="GUID-0AED96BA-26F7-41CF-A8D7-36CA34213193"></a><h5 id="TGSQL-GUID-0AED96BA-26F7-41CF-A8D7-36CA34213193" class="sect5"><span class="enumeration_section">25.1.2.5</span> SQL Access Advisor存储库</h5>
                     <div>
                        <p>SQL Access Advisor所需和生成的信息驻留在Advisor存储库中，该存储库位于数据字典中。</p>
                        <p>SQL Access Advisor存储库具有以下优点：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>收集SQL Access Advisor的完整工作负载</p>
                           </li>
                           <li>
                              <p>支持历史数据</p>
                           </li>
                           <li>
                              <p>由数据库管理</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-8D841251-23FF-487F-A50A-EB42103A0063" title="自动调整优化器是SQL Access Advisor使用的核心工具。">SQL Access Advisor体系结构</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL94761"></a><div class="props_rev_3"><a id="GUID-5DC21B66-A3DF-4C10-ADC2-F3DC824A58B6" name="GUID-5DC21B66-A3DF-4C10-ADC2-F3DC824A58B6"></a><h4 id="TGSQL-GUID-5DC21B66-A3DF-4C10-ADC2-F3DC824A58B6" class="sect4"><span class="enumeration_section">25.1.3</span> SQL Access Advisor的用户界面</h4>
                  <div>
                     <p>Oracle建议您通过其GUI向导使用SQL Access Advisor，该向导可在Cloud Control中使用。</p>
                     <p>您还可以通过<code class="codeph">DBMS_ADVISOR</code>包调用SQL Access Advisor。本章介绍如何使用API。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-42C2D851-99BA-4AC9-AD3E-537C167467D3">使用云控制访问SQL Access Advisor：初始选项页面</a><br>Cloud Control中的SQL Access Advisor：Initial Options页面是向导的起始页面，可引导您完成获取建议的过程。
                        </li>
                        <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-2C729920-5490-46CA-8C41-8C9828653D3A">SQL调整集的命令行界面</a><br>在命令行上，您可以使用<code class="codeph">DBMS_ADVISOR</code>包来管理SQL Tuning Advisor。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-5DC21B66-A3DF-4C10-ADC2-F3DC824A58B6__GUID-F04B6F6A-E080-43EA-ABB3-AE71F28C097C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../tdppt/optimizing-data-access-paths.html#TDPPT170" target="_blank"><span><cite>“Oracle数据库2天+性能调优指南”</cite></span></a>介绍了如何使用SQL Access Advisor向导。
                              </p>
                           </li>
                           <li>
                              <p>有关完整的语义和语法，请参阅<a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-10DCBE78-9330-4713-AD79-5C7E73EACD33" title="SQL Access Advisor接受来自多个源（包括SQL调优集）的输入，然后发出建议。">关于SQL Access Advisor</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94763"></a><a id="TGSQL94762"></a><div class="props_rev_3"><a id="GUID-42C2D851-99BA-4AC9-AD3E-537C167467D3" name="GUID-42C2D851-99BA-4AC9-AD3E-537C167467D3"></a><h5 id="TGSQL-GUID-42C2D851-99BA-4AC9-AD3E-537C167467D3" class="sect5"><span class="enumeration_section">25.1.3.1</span>使用Cloud Control访问SQL Access Advisor：初始选项页面</h5>
                     <div>
                        <p>Cloud Control中的SQL Access Advisor：Initial Options页面是向导的起始页面，可引导您完成获取建议的过程。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-42C2D851-99BA-4AC9-AD3E-537C167467D3__GUID-0CF04F71-68CB-4605-AA65-29B18D7E5500">要访问SQL Access Advisor：初始选项页面：</p>
                           <ol>
                              <li>
                                 <p>使用适当的凭据登录Cloud Control。</p>
                              </li>
                              <li>
                                 <p>在“ <span class="bold">目标”</span>菜单下，选择“ <span class="bold">数据库”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在数据库目标列表中，选择要管理的Oracle数据库实例的目标。</p>
                              </li>
                              <li>
                                 <p>如果系统提示您输入数据库凭据，请输入您要执行的任务所需的最低凭据。</p>
                              </li>
                              <li>
                                 <p>从<span class="bold">Performance</span>菜单中，选择<span class="bold">SQL</span> ，然后选择<span class="bold">SQL Access Advisor</span> 。
                                 </p>
                                 <p>将出现SQL Access Advisor：Initial Options页面， <a href="sql-access-advisor.html#GUID-42C2D851-99BA-4AC9-AD3E-537C167467D3__CHDHJIJC">如图25-2</a>所示。
                                 </p>
                                 <div class="figure" id="GUID-42C2D851-99BA-4AC9-AD3E-537C167467D3__CHDHJIJC">
                                    <p class="titleinfigure">图25-2 SQL Access Advisor：初始选项</p><img src="img/sql_access_advisor_wiz.gif" alt="下面是图25-2的描述" title="下面是图25-2的描述" longdesc="img_text/sql_access_advisor_wiz.html"><br><a href="img_text/sql_access_advisor_wiz.html">“图25-2 SQL Access Advisor：初始选项”的说明</a></div>
                                 <!-- class="figure" -->
                                 <p>您可以在此页面或通过此页面访问的页面中执行大多数SQL计划管理任务。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-42C2D851-99BA-4AC9-AD3E-537C167467D3__GUID-66FB5845-5346-4ED6-82D0-5A7F6D417FCC">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Cloud Control上下文相关联机帮助，了解SQL Access Advisor上的选项：初始选项页面</p>
                              </li>
                              <li>
                                 <p><a href="../tdppt/optimizing-data-access-paths.html#GUID-4DF1C69C-0363-44AE-A760-7C6B66EA2746" target="_blank"><span><cite>Oracle Database 2 Day +性能调优指南</cite></span></a> ，了解如何使用Cloud Control配置和运行SQL Tuning Advisor</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-5DC21B66-A3DF-4C10-ADC2-F3DC824A58B6" title="Oracle建议您通过其GUI向导使用SQL Access Advisor，该向导可在Cloud Control中使用。">SQL Access Advisor的用户界面</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94764"></a><div class="props_rev_3"><a id="GUID-2C729920-5490-46CA-8C41-8C9828653D3A" name="GUID-2C729920-5490-46CA-8C41-8C9828653D3A"></a><h5 id="TGSQL-GUID-2C729920-5490-46CA-8C41-8C9828653D3A" class="sect5"><span class="enumeration_section">25.1.3.2</span> SQL调整集的命令行界面</h5>
                     <div>
                        <p>在命令行上，您可以使用<code class="codeph">DBMS_ADVISOR</code>包来管理SQL Tuning Advisor。
                        </p>
                        <div class="section">
                           <p><code class="codeph">DBMS_ADVISOR</code>包由一组可从任何PL / SQL程序调用的分析和建议函数和过程组成。您必须具有<code class="codeph">ADVISOR</code>权限才能使用<code class="codeph">DBMS_ADVISOR</code> 。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-2C729920-5490-46CA-8C41-8C9828653D3A__GUID-843083A2-0951-4CA0-B857-5197E06E2E45">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_ADVISOR</code></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-5DC21B66-A3DF-4C10-ADC2-F3DC824A58B6" title="Oracle建议您通过其GUI向导使用SQL Access Advisor，该向导可在Cloud Control中使用。">SQL Access Advisor的用户界面</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="TGSQL94765"></a><a id="TGSQL593"></a><div class="props_rev_3"><a id="GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283" name="GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283"></a><h3 id="TGSQL-GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283" class="sect3"><span class="enumeration_section">25.2</span>使用SQL Access Advisor：基本任务</h3>
               <div>
                  <p>基本任务包括创建STS，加载它，创建SQL Access Advisor任务，然后执行任务。</p>
                  <p>下图显示了SQL Access Advisor的基本工作流程。</p>
                  <div class="figure" id="GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283__CHDBEBJA">
                     <p class="titleinfigure">图25-3使用SQL Access Advisor</p><img src="img/mm-3198_tgsql_pb_001b.png" alt="下面是图25-3的描述" title="下面是图25-3的描述" longdesc="img_text/mm-3198_tgsql_pb_001b.html"><br><a href="img_text/mm-3198_tgsql_pb_001b.html">“图25-3使用SQL Access Advisor”的说明</a></div>
                  <!-- class="figure" -->
                  <p>通常，您通过执行以下步骤来使用SQL Access Advisor：</p>
                  <ol>
                     <li>
                        <p>创建SQL调优集</p>
                        <p>SQL Access Advisor的输入工作负载源是SQL调优集（STS）。使用<code class="codeph">DBMS_SQLTUNE.CREATE_SQLSET</code>或<code class="codeph">DBMS_SQLSET.CREATE_SQLSET</code>创建SQL调优集。
                        </p>
                        <p><span class="q">“ <a href="sql-access-advisor.html#GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF" title="SQL Access Advisor的输入工作负载源是STS。">将SQL调优集创建为SQL Access Advisor的输入</a> ”</span>描述了此任务。
                        </p>
                     </li>
                     <li>
                        <p>加载SQL调优集</p>
                        <p>当基于实际使用的工作负载可用时，SQL Access Advisor的性能最佳。使用<code class="codeph">DBMS_SQLTUNE.LOAD_SQLSET</code>或<code class="codeph">DBMS_SQLSET.LOAD_SQLSET</code>使用您的工作负载填充SQL调优集。
                        </p>
                        <p><span class="q">“ <a href="sql-access-advisor.html#GUID-9D138637-2D83-473D-980D-A859D6909742" title="工作负载由一个或多个SQL语句以及完全描述每个语句的统计信息和属性组成。">使用用户定义的工作负载填充SQL调整集</a> ”</span>描述了此任务。
                        </p>
                     </li>
                     <li>
                        <p>创建和配置任务</p>
                        <p>在该任务中，您可以定义SQL Access Advisor必须分析的内容以及分析结果的位置。使用<code class="codeph">DBMS_ADVISOR.CREATE_TASK</code>过程创建任务。然后，您可以定义参数使用任务<code class="codeph">SET_TASK_PARAMETER</code>过程，然后通过任务链接到STS <code class="codeph">DBMS_ADVISOR.ADD_STS_REF</code>程序。
                        </p>
                        <p><span class="q">“ <a href="sql-access-advisor.html#GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6" title="使用DBMS_ADVISOR.CREATE_TASK过程创建SQL Access Advisor任务。">创建和配置SQL Access Advisor任务</a> ”</span>描述了此任务。
                        </p>
                     </li>
                     <li>
                        <p>执行任务</p>
                        <p>运行<code class="codeph">DBMS_ADVISOR.EXECUTE_TASK</code>过程以生成建议。每个建议指定一个或多个动作。例如，建议可以是创建多个物化视图日志，创建物化视图，然后对其进行分析以收集统计信息。
                        </p>
                        <p><span class="q">“ <a href="sql-access-advisor.html#GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9" title="DBMS_ADVISOR.EXECUTE_TASK过程对指定的任务执行SQL Access Advisor分析或评估。">执行SQL Access Advisor任务</a> ”</span>描述了此任务。
                        </p>
                     </li>
                     <li>
                        <p>查看建议</p>
                        <p>您可以通过查询数据字典视图来查看建议。</p>
                        <p><span class="q">“ <a href="sql-access-advisor.html#GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851" title="您可以使用多个数据字典视图查看SQL Access Advisor生成的每个建议。">查看SQL Access Advisor任务结果</a> ”</span>描述了此任务。
                        </p>
                     </li>
                     <li>
                        <p>（可选）生成并执行实现建议的SQL脚本。</p>
                        <p><span class="q">“ <a href="sql-access-advisor.html#GUID-E92AFB9E-8977-4A7E-916E-0886C347B134" title="您可以使用DBMS_ADVISOR.GET_TASK_SCRIPT过程为SQL Access Advisor建议创建SQL语句的脚本。该脚本是一个可执行的SQL文件，可以包含DROP，CREATE和ALTER语句。">生成并执行任务脚本</a> ”</span>描述了此任务。
                        </p>
                     </li>
                  </ol>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF">创建SQL调整集作为SQL Access Advisor的输入</a><br>SQL Access Advisor的输入工作负载源是STS。</li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-9D138637-2D83-473D-980D-A859D6909742">使用用户定义的工作负载填充SQL调整集</a><br>工作负载由一个或多个SQL语句以及完全描述每个语句的统计信息和属性组成。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6">创建和配置SQL Access Advisor任务</a><br>使用<code class="codeph">DBMS_ADVISOR.CREATE_TASK</code>过程创建SQL Access Advisor任务。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9">执行SQL Access Advisor任务</a><br><code class="codeph">DBMS_ADVISOR.EXECUTE_TASK</code>过程对指定的任务执行SQL Access Advisor分析或评估。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851">查看SQL Access Advisor任务结果</a><br>您可以使用多个数据字典视图查看SQL Access Advisor生成的每个建议。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-E92AFB9E-8977-4A7E-916E-0886C347B134">生成和执行任务脚本</a><br>您可以使用<code class="codeph">DBMS_ADVISOR.GET_TASK_SCRIPT</code>过程为SQL Access Advisor建议创建SQL语句的脚本。该脚本是一个可执行的SQL文件，可以包含<code class="codeph">DROP</code> ， <code class="codeph">CREATE</code>和<code class="codeph">ALTER</code>语句。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-561EC9B4-0930-4915-B5E1-17F2C5ACD261" title="SQL Access Advisor是一种诊断软件，通过推荐创建，删除或保留索引，物化视图，物化视图日志或分区来识别并帮助解决SQL性能问题。">使用SQL Access Advisor优化访问路径</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94767"></a><a id="TGSQL94768"></a><a id="TGSQL94766"></a><div class="props_rev_3"><a id="GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF" name="GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF"></a><h4 id="TGSQL-GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF" class="sect4"><span class="enumeration_section">25.2.1</span>创建SQL调整集作为SQL Access Advisor的输入</h4>
                  <div>
                     <p>SQL Access Advisor的输入工作负载源是STS。</p>
                     <div class="section">
                        <p>由于STS存储为单独的实体，因此多个顾问任务可以共享它。使用<code class="codeph">DBMS_SQLTUNE.CREATE_SQLSET</code>或<code class="codeph">DBMS_SQLSET.CREATE_SQLSET</code>过程创建STS。
                        </p>
                        <p>在顾问程序任务引用了STS之后，在所有顾问程序任务都删除了对它的依赖之前，您无法删除或修改STS。删除父顾问程序任务或从顾问程序任务手动删除工作负载引用时，将删除工作负载引用。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF__GUID-5682E6B4-618D-40C9-A252-57564FDDCD6D">先决条件</p>
                        <p>创建STS的用户必须已被授予<code class="codeph">ADMINISTER SQL TUNING SET</code>权限。要在其他用户拥有的SQL调优集上运行SQL Access Advisor，用户必须具有<code class="codeph">ADMINISTER ANY SQL TUNING SET</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF__GUID-948DAB13-39A3-4412-A0E3-8D296B8A57F9">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您想要创建名为<code class="codeph">MY_STS_WORKLOAD</code>的STS。</p>
                           </li>
                           <li>
                              <p>您希望将此STS用作从<code class="codeph">sh</code>模式派生的工作负载的输入。
                              </p>
                           </li>
                           <li>
                              <p>您使用<code class="codeph">DBMS_SQLTUNE</code>而不是<code class="codeph">DBMS_SQLSET</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF__GUID-034850A1-4C2B-49E3-A345-A2846D46AD96">要创建STS：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，以用户<code class="codeph">sh</code>身份登录数据库。
                              </p>
                           </li>
                           <li>
                              <p>设置SQL * Plus变量。</p>
                              <p>例如，输入以下命令：</p><pre class="pre codeblock"><code>SET SERVEROUTPUT ON; VARIABLE task_id NUMBER; VARIABLE task_name VARCHAR2（255）; VARIABLE workload_name VARCHAR2（255）;</code></pre></li>
                           <li>
                              <p>创建SQL调优集。</p>
                              <p>例如，为<code class="codeph">workload_name</code>变量赋值并按如下方式创建STS：</p><pre class="pre codeblock"><code>EXECUTE：workload_name：='MY_STS_WORKLOAD'; EXECUTE DBMS_SQLTUNE.CREATE_SQLSET（：workload_name，'test purpose'）;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF__GUID-71BEE432-53BF-417B-8C9E-E1A8F14122C8">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-sql-tuning-sets.html#GUID-DD136837-9921-4C73-ABB8-9F1DC22542C5" title="SQL调优集（STS）是一个数据库对象，可用作调优工具的输入。">关于SQL调优集</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SQLTUNE.html#ARPLS68408" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，了解<code class="codeph">CREATE_SQLSET</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283" title="基本任务包括创建STS，加载它，创建SQL Access Advisor任务，然后执行任务。">使用SQL Access Advisor：基本任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94770"></a><a id="TGSQL94771"></a><a id="TGSQL94769"></a><div class="props_rev_3"><a id="GUID-9D138637-2D83-473D-980D-A859D6909742" name="GUID-9D138637-2D83-473D-980D-A859D6909742"></a><h4 id="TGSQL-GUID-9D138637-2D83-473D-980D-A859D6909742" class="sect4"><span class="enumeration_section">25.2.2</span>使用用户定义的工作负载<span class="enumeration_section">填充</span> SQL调整集</h4>
                  <div>
                     <p>工作负载由一个或多个SQL语句以及完全描述每个语句的统计信息和属性组成。</p>
                     <div class="section">
                        <p>完整工作负载包含来自目标业务应用程序的所有SQL语句。部分工作负载包含SQL语句的子集。不同之处在于，对于完整工作负载，SQL Access Advisor可能会建议删除未使用的物化视图和索引。</p>
                        <p>没有工作负载，您无法使用SQL Access Advisor。SQL Access Advisor根据特定统计信息，业务重要性或两者的组合对条目进行排名，这使得顾问程序可以首先处理最重要的SQL语句。</p>
                        <p>SQL Access Advisor根据实际使用情况在工作负载方面表现最佳。您可以以SQL调优集的形式存储多个工作负载，以便您可以在数据库实例启动和关闭的整个生命周期中长时间查看实际数据仓库或OLTP环境的不同用途。</p>
                        <p>下表介绍了可用于使用用户定义的工作负载填充STS的过程。</p>
                        <div class="tblformal" id="GUID-9D138637-2D83-473D-980D-A859D6909742__CHDBBGDE">
                           <p class="titleintable">表25-1加载STS的过程</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="加载STS的程序" width="100%" border="1" summary="Procedures for loading an STS" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d126383e2825">程序</th>
                                    <th align="left" valign="bottom" id="d126383e2828">描述</th>
                                    <th align="left" valign="bottom" id="d126383e2831">了解更多</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d126383e2835" headers="d126383e2825 ">
                                       <p><code class="codeph">DBMS_SQLTUNE.LOAD_SQLSET</code>或<code class="codeph">DBMS_SQLSET.LOAD_SQLSET</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d126383e2835 d126383e2828 ">
                                       <p>使用一组选定的SQL填充SQL调优集。您可以多次调用该过程来添加新的SQL语句或替换现有语句的属性。</p>
                                    </td>
                                    <td align="left" valign="top" headers="d126383e2835 d126383e2831 "><a href="../arpls/DBMS_SQLTUNE.html#ARPLS68430" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d126383e2852" headers="d126383e2825 ">
                                       <p><code class="codeph">DBMS_ADVISOR.COPY_SQLWKLD_TO_STS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d126383e2852 d126383e2828 ">
                                       <p>将SQL工作负载数据复制到用户指定的SQL调优集。用户必须具有所需的SQL调整集权限和所需的<code class="codeph">ADVISOR</code>权限。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" headers="d126383e2852 d126383e2831 "><a href="../arpls/DBMS_ADVISOR.html#ARPLS65095" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9D138637-2D83-473D-980D-A859D6909742__GUID-DC44A27F-21DC-49CE-AC26-6B526F3BC5E4">假设</p>
                        <p>本教程假定您要执行以下操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建一个名为<code class="codeph">sh.user_workload</code>的表来存储有关SQL语句的信息</p>
                           </li>
                           <li>
                              <p>在<code class="codeph">sh.user_workload</code>表中加载有关<code class="codeph">sh</code>模式中表的三个查询的信息</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">sh.user_workload</code>包含的工作负载填充在<span class="q">“ <a href="sql-access-advisor.html#GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF" title="The input workload source for SQL Access Advisor is an STS.">使用SQL Access Advisor创建SQL调整集</a> ”中<a href="sql-access-advisor.html#GUID-E842A0DC-088A-4223-98BF-D5B786A2C0EF" title="SQL Access Advisor的输入工作负载源是STS。">创建</a></span>的STS</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBMS_SQLTUNE.LOAD_SQLSET</code>而不是<code class="codeph">DBMS_SQLSET.LOAD_SQLSET</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9D138637-2D83-473D-980D-A859D6909742__GUID-667D2FFE-D069-4FEC-9893-309CC4C82EAC">使用用户定义的工作负载填充STS：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，以用户<code class="codeph">sh</code>身份登录数据库。
                              </p>
                           </li>
                           <li>
                              <p>创建<code class="codeph">user_workload</code>表。
                              </p>
                              <p>例如，输入以下命令：</p><pre class="pre codeblock"><code>DROP TABLE user_workload; CREATE TABLE user_workload（用户名varchar2（128），/ *执行语句的用户* /模块varchar2（64），/ *应用程序模块名称* / action varchar2（64），/ *应用程序操作名称* / elapsed_time number，/ * Elapsed查询时间* / cpu_time数，/ *查询的CPU时间* / buffer_gets数，/ *查询消耗的缓冲区* / disk_reads数，/ *查询消耗的磁盘读数* / rows_processed数，/ *处理的行数＃ query * / executions number，/ *查询执行次数* / optimizer_cost数，/ *查询优化器成本* /优先级数，/ *用户优先级（1,2或3）* / last_execution_date日期，/ *上次查询执行* / stat_period number，/ * Window exec时间，以秒为单位* / sql_text clob / * Full SQL Text * /）;</code></pre></li>
                           <li>
                              <p>在<code class="codeph">user_workload</code>表中加载有关查询的信息。
                              </p>
                              <p>例如，执行以下语句：</p><pre class="pre codeblock"><code>- 选择聚合INSERT INTO user_workload（用户名，模块，操作，优先级，sql_text）VALUES（'SH'，'Example1'，'Action'，2，'SELECT t.week_ending_day，p.prod_subcategory，SUM（s.amount_sold） ）AS dollar，s.channel_id，s.promo_id FROM sales s，times t，products p WHERE s.time_id = t.time_id AND s.prod_id = p.prod_id AND s.prod_id&gt; 10 AND s.prod_id &lt;50 GROUP BY t.week_ending_day，p.prod_subcategory，s.channel_id，s.promo_id'）/  - 选择聚合INSERT INTO user_workload（用户名，模块，操作，优先级，sql_text）VALUES（'SH'，'Example1'，'Action' ，2，'SELECT t.calendar_month_desc，SUM（s.amount_sold）AS $ FROM sales s，times t WHERE s.time_id = t.time_id AND s.time_id BETWEEN TO_DATE（''01-JAN-2000''，'' DD-MON-YYYY''）和TO_DATE（''01-JUL-2000''，''DD-MON-YYYY''）GROUP by t.calendar_month_desc'）/  - 按INSERT INTO命令user_workload（用户名，模块） ，action，priority，sql_text）VALUES（'SH'，'Example1'，'Action'，2，'SELECT c.country_id，c.cust_ city，c.cust_last_name FROM customers c WHERE c.country_id IN（52790,52789）ORDER BY c.country_id，c.cust_city，c.cust_last_name'）/ COMMIT;</code></pre></li>
                           <li>
                              <p>执行PL / SQL程序，该程序使用<code class="codeph">user_workload</code>表中的行填充游标，然后将此游标的内容加载到名为<code class="codeph">MY_STS_WORKLOAD</code>的STS中。</p>
                              <p>例如，执行以下PL / SQL程序：</p><pre class="pre codeblock"><code>DECLARE sqlset_cur DBMS_SQLTUNE.SQLSET_CURSOR; BEGIN OPEN sqlset_cur FOR SELECT SQLSET_ROW（null，null，SQL_TEXT，null，null，'SH'，module，'Action'，0,0,0,0,1,0,1,0,0，null，2 ，3，sysdate，0,0，null，0，null，null）FROM USER_WORKLOAD; DBMS_SQLTUNE.LOAD_SQLSET（'MY_STS_WORKLOAD'，sqlset_cur）;结束; /</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283" title="基本任务包括创建STS，加载它，创建SQL Access Advisor任务，然后执行任务。">使用SQL Access Advisor：基本任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94773"></a><a id="TGSQL94774"></a><a id="TGSQL94772"></a><div class="props_rev_3"><a id="GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6" name="GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6"></a><h4 id="TGSQL-GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6" class="sect4"><span class="enumeration_section">25.2.3</span>创建和配置SQL Access Advisor任务</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_ADVISOR.CREATE_TASK</code>过程创建SQL Access Advisor任务。
                     </p>
                     <div class="section">
                        <p>在SQL Access Advisor任务中，您可以定义顾问程序必须分析的内容以及结果的位置。您可以创建多个任务，每个任务都有自己的专业化。所有这些都基于相同的Advisor任务模型并共享相同的存储库。</p>
                        <p>配置任务涉及以下步骤：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>定义任务参数</p>
                              <p>在生成建议时，您可以对工作负载应用过滤器以限制分析的内容。此限制提供了基于不同工作负载方案生成不同建议集的能力。</p>
                              <p>SQL Access Advisor参数控制推荐过程和工作负载的自定义。这些参数控制流程的各个方面，例如所需的推荐类型以及推荐的命名约定。</p>
                              <p>如果未定义参数，则数据库使用默认值。您可以使用<code class="codeph">DBMS_ADVISOR.SET_TASK_PARAMETER</code>过程设置任务参数。参数是持久的，因为它们在任务的生命周期内保持设置。使用<code class="codeph">SET_TASK_PARAMETER</code>设置参数值时，在您再次调用此过程之前，它不会更改。
                              </p>
                           </li>
                           <li>
                              <p>将任务链接到工作负载</p>
                              <p>由于工作负载是独立的，因此必须使用<code class="codeph">DBMS_ADVISOR.ADD_STS_REF</code>过程将其链接到任务。建立此链接后，在所有顾问程序任务消除了对工作负载的依赖之前，您无法删除或修改工作负载。当用户删除父顾问程序任务或使用<code class="codeph">DBMS_ADVISOR.DELETE_STS_REF</code>过程手动从任务中删除工作负载引用时，将删除工作负载引用。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6__GUID-784B83B6-51CC-45D6-B8BB-A7CDCA315C25">先决条件</p>
                        <p>创建任务的用户必须已被授予<code class="codeph">ADVISOR</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6__GUID-A8A8B7D3-935C-4B26-B7DF-DB357613FE75">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您想要创建名为<code class="codeph">MYTASK</code>的任务。</p>
                           </li>
                           <li>
                              <p>您希望使用此任务来分析在<span class="q">“ <a href="sql-access-advisor.html#GUID-9D138637-2D83-473D-980D-A859D6909742" title="A workload consists of one or more SQL statements, plus statistics and attributes that fully describe each statement.">使用用户定义的工作负载填充SQL调整集</a> ”中<a href="sql-access-advisor.html#GUID-9D138637-2D83-473D-980D-A859D6909742" title="工作负载由一个或多个SQL语句以及完全描述每个语句的统计信息和属性组成。">定义的工作负载</a></span> 。
                              </p>
                           </li>
                           <li>
                              <p>如果执行时间超过30分钟，则需要终止任务。</p>
                           </li>
                           <li>
                              <p>您希望SQL Access Advisor仅考虑索引。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6__GUID-65781488-5E44-4DB2-BFAC-9CC0CABEC23A">要创建和配置SQL Access Advisor任务：</p>
                        <ol>
                           <li>
                              <p>以用户<code class="codeph">sh</code>身份将SQL * Plus连接到数据库，然后创建任务。
                              </p>
                              <p>例如，输入以下命令：</p><pre class="pre codeblock"><code>执行：task_name：='MYTASK'; EXECUTE DBMS_ADVISOR.CREATE_TASK（'SQL Access Advisor'，：task_id，：task_name）;</code></pre></li>
                           <li>
                              <p>设置任务参数。</p>
                              <p>例如，执行以下语句：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.SET_TASK_PARAMETER（：task_name，'TIME_LIMIT'，30）; EXECUTE DBMS_ADVISOR.SET_TASK_PARAMETER（：task_name，'ANALYSIS_SCOPE'，'ALL'）;</code></pre></li>
                           <li>
                              <p>将任务链接到工作负载。</p>
                              <p>例如，执行以下语句：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.ADD_STS_REF（：task_name，'SH'，：workload_name）;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6__GUID-6ABFA2AB-25C6-4D69-A633-71239226E5FD">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="sql-access-advisor.html#GUID-B83F372B-CC15-4A0B-B1F1-E80CF54B8499" title="SQL Access Advisor任务参数分为以下类别：工作负载筛选，任务配置，架构属性和推荐选项。">SQL Access Advisor任务参数的类别</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="sql-access-advisor.html#GUID-D76A49FA-73F1-4D54-80A1-A88B3C5E4A39" title="DBMS_ADVISOR.DELETE_TASK过程从存储库中删除现有的SQL Access Advisor任务。">删除SQL Access Advisor任务</a> ”</span></p>
                           </li>
                           <li>
                              <p><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span>以了解<a href="../arpls/DBMS_ADVISOR.html#ARPLS65103" target="_blank"><code class="codeph">DBMS_ADVISOR.CREATE_TASK</code></a> ， <a href="../arpls/DBMS_ADVISOR.html#ARPLS65151" target="_blank"><code class="codeph">DBMS_ADVISOR.SET_TASK_PARAMETER</code></a>和<a href="../arpls/DBMS_ADVISOR.html#ARPLS65091" target="_blank"><code class="codeph">DBMS_ADVISOR.ADD_STS_REF</code></a>过程</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283" title="基本任务包括创建STS，加载它，创建SQL Access Advisor任务，然后执行任务。">使用SQL Access Advisor：基本任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94776"></a><a id="TGSQL94777"></a><a id="TGSQL94775"></a><div class="props_rev_3"><a id="GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9" name="GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9"></a><h4 id="TGSQL-GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9" class="sect4"><span class="enumeration_section">25.2.4</span>执行SQL Access Advisor任务</h4>
                  <div>
                     <p><code class="codeph">DBMS_ADVISOR.EXECUTE_TASK</code>过程对指定的任务执行SQL Access Advisor分析或评估。
                     </p>
                     <div class="section">
                        <p>任务执行是同步操作，因此在操作完成或数据库检测到用户中断之前，数据库不会将控制权返回给用户。返回或执行任务后，您可以检查<code class="codeph">DBA_ADVISOR_LOG</code>表中的执行状态。
                        </p>
                        <p>运行<code class="codeph">EXECUTE_TASK</code>生成建议。推荐包括一个或多个动作，例如创建物化视图日志或物化视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9__GUID-BAB12452-DAFF-46BF-85B6-C3F63B9151E4">先决条件</p>
                        <p>处理工作负载时，SQL Access Advisor会尝试验证每个语句以标识表和列引用。数据库通过处理每个语句来实现验证，就好像语句的原始用户正在执行它一样。</p>
                        <p>如果用户没有对特定表的<code class="codeph">SELECT</code>权限，则SQL Access Advisor会绕过引用该表的语句。此行为可能导致许多语句被排除在分析之外。如果SQL Access Advisor排除工作负载中的所有语句，则工作负载无效。SQL Access Advisor返回以下消息：</p><pre class="pre codeblock"><code>QSM-00774，没有任何SQL语句可以处理任务TASK_NAME</code></pre><p>为避免错过关键工作负载查询，当前数据库用户必须对物化视图分析所针对的表具有<code class="codeph">SELECT</code>权限。对于这些表，无法通过角色获取这些<code class="codeph">SELECT</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9__GUID-883B4794-3588-4FAF-A35D-3EDB8BBC410B">假设</p>
                        <p>本教程假定您要执行在<span class="q">“ <a href="sql-access-advisor.html#GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6" title="Use the DBMS_ADVISOR.CREATE_TASK procedure to create a SQL Access Advisor task.">创建和配置SQL Access Advisor任务</a> ”中<a href="sql-access-advisor.html#GUID-AEB3BCA7-9458-45FF-ADFF-B9BC12BCFEF6" title="使用DBMS_ADVISOR.CREATE_TASK过程创建SQL Access Advisor任务。">配置的任务</a></span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9__GUID-58708D4C-05C4-4BE2-8013-89D8C27D53B0">要创建和配置SQL Access Advisor任务：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus或SQL Developer中，以具有必要权限的用户身份登录数据库。</p>
                           </li>
                           <li>
                              <p>执行任务。</p>
                              <p>例如，执行以下语句：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.EXECUTE_TASK（：task_name）;</code></pre></li>
                           <li>
                              <p>（可选）查询<code class="codeph">USER_ADVISOR_LOG</code>以检查任务的状态。
                              </p>
                              <p>例如，执行以下语句（包括示例输出）：</p><pre class="pre codeblock"><code>COL TASK_ID FORMAT 999 COL TASK_NAME FORMAT a25 COL STATUS_MESSAGE FORMAT a25 SELECT TASK_ID，TASK_NAME，STATUS，STATUS_MESSAGE来自USER_ADVISOR_LOG; TASK_ID TASK_NAME状态STATUS_MESSAGE ------- ------------------------- ----------- --- ---------------------- 103 MYTASK COMPLETED访问顾问执行完成</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9__GUID-5BF5B342-CBDC-4A6C-AF45-B695802F6027">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">EXECUTE_TASK</code>过程及其参数的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283" title="基本任务包括创建STS，加载它，创建SQL Access Advisor任务，然后执行任务。">使用SQL Access Advisor：基本任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94779"></a><a id="TGSQL94780"></a><a id="TGSQL94778"></a><div class="props_rev_3"><a id="GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851" name="GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851"></a><h4 id="TGSQL-GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851" class="sect4"><span class="enumeration_section">25.2.5</span>查看SQL Access Advisor任务结果</h4>
                  <div>
                     <p>您可以使用多个数据字典视图查看SQL Access Advisor生成的每个建议。</p>
                     <div class="section">
                        <p><a href="sql-access-advisor.html#GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851__CHDIJCHB" title="显示任务结果的视图">表25-2</a>总结了这些观点。但是，使用<code class="codeph">DBMS_ADVISOR.GET_TASK_SCRIPT</code>过程或云控制更容易，它以图形方式显示建议并提供超链接以快速查看哪些SQL语句从建议中受益。
                        </p>
                        <p>SQL Access Advisor生成的每个建议都链接到它有益的SQL语句。每个建议对应一个或多个动作。每个操作都有一个或多个属性。</p>
                        <p>每个操作都具有与访问结构属性相关的属性。每个应用接入结构的名称和表空间都在<code class="codeph">ATTR1</code>和<code class="codeph">ATTR2</code>列<code class="codeph">USER_ADVISOR_ATTRIBUTES</code> 。每个新访问结构占用的空间位于<code class="codeph">NUM_ATTR1</code>列中。每个动作的其他属性都不同。
                        </p>
                        <div class="tblformal" id="GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851__CHDIJCHB">
                           <p class="titleintable">表25-2显示任务结果的视图</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="显示任务结果的视图" width="100%" border="1" summary="Views that show task results" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d126383e3559">数据字典视图（DBA，USER）</th>
                                    <th align="left" valign="bottom" id="d126383e3562">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d126383e3567" headers="d126383e3559 ">
                                       <p><code class="codeph">DBA_ADVISOR_TASKS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d126383e3567 d126383e3562 ">
                                       <p>显示有关顾问程序任务的信息。要查看SQL Access Advisor任务，请选择<code class="codeph">ADVISOR_NAME = 'SQL Access Advisor'.</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d126383e3577" headers="d126383e3559 ">
                                       <p><code class="codeph">DBA_ADVISOR_RECOMMENDATIONS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d126383e3577 d126383e3562 ">
                                       <p>显示数据库中所有建议的分析结果。推荐可以有多个与之关联的操作。<code class="codeph">DBA_ADVISOR_ACTIONS</code>视图描述了操作。建议还指出了一套理由，为该建议提供理由/推理。<code class="codeph">DBA_ADVISOR_RATIONALE</code>视图描述了基本原理。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d126383e3591" headers="d126383e3559 ">
                                       <p><code class="codeph">DBA_ADVISOR_ACTIONS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d126383e3591 d126383e3562 ">
                                       <p>显示有关与数据库中所有建议关联的操作的信息。每个动作由<code class="codeph">COMMAND</code>和<code class="codeph">ATTR1</code>到<code class="codeph">ATTR6</code>列指定。每个命令都定义了如何使用属性列。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d126383e3608" headers="d126383e3559 ">
                                       <p><code class="codeph">DBA_ADVISOR_RATIONALE</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d126383e3608 d126383e3562 ">
                                       <p>显示有关数据库中所有建议的基本原理的信息。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d126383e3616" headers="d126383e3559 ">
                                       <p><code class="codeph">DBA_ADVISOR_SQLA_WK_STMTS</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d126383e3616 d126383e3562 ">
                                       <p>在SQL Access Advisor分析后显示有关数据库中所有工作负载对象的信息。preost和postcost数字是根据估计的优化器成本（在<code class="codeph">EXPLAIN PLAN</code> ）而没有推荐的访问结构。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851__GUID-541EE47D-BDBE-4B04-A7A7-A50A3C94819B">假设</p>
                        <p>本教程假定您要查看在<span class="q">“ <a href="sql-access-advisor.html#GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9" title="The DBMS_ADVISOR.EXECUTE_TASK procedure performs SQL Access Advisor analysis or evaluation for the specified task.">执行SQL Access Advisor任务</a> ”中<a href="sql-access-advisor.html#GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9" title="DBMS_ADVISOR.EXECUTE_TASK过程对指定的任务执行SQL Access Advisor分析或评估。">执行的任务的结果</a></span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851__GUID-CADE9276-10FB-4885-BE36-88516E101275">要查看SQL Access Advisor任务的结果：</p>
                        <ol>
                           <li>
                              <p>使用适当的权限将SQL * Plus连接到数据库，然后查询顾问程序建议。</p>
                              <p>例如，执行以下语句（包括示例输出）：</p><pre class="pre codeblock"><code>VARIABLE workload_name VARCHAR2（255）; VARIABLE task_name VARCHAR2（255）;执行：task_name：='MYTASK'; EXECUTE：workload_name：='MY_STS_WORKLOAD';从USER_ADVISOR_RECOMMENDATIONS中选择REC_ID，RANK，BENEFIT，其中TASK_NAME =：task_name ORDER BY RANK; REC_ID RANK BENEFIT ---------- ---------- ---------- 1 1 236 2 2 356</code></pre><p>前面的输出显示了SQL Access Advisor运行产生的建议（ <code class="codeph">rec_id</code> ）及其等级和总收益。排名是建议帮助的查询重要性的度量。优点是使用该建议的所有查询的执行成本（就优化器成本而言）的总体改进。
                              </p>
                           </li>
                           <li>
                              <p>确定哪个查询从哪个建议中受益。</p>
                              <p>例如，执行以下<code class="codeph">USER_ADVISOR_SQLA_WK_STMTS</code>查询（包括样本输出）：</p><pre class="pre codeblock"><code>SELECT SQL_ID，REC_ID，PRECOST，POSTCOST，（PRECOST-POSTCOST）* 100 / PRECOST AS PERCENT_BENEFIT来自USER_ADVISOR_SQLA_WK_STMTS WHERE TASK_NAME =：task_name AND WORKLOAD_NAME =：workload_name ORDER BY percent_benefit DESC; SQL_ID REC_ID PRECOST POSTCOST PERCENT_BENEFIT ------------- ---------- ---------- ----------- ------------- fn4bsxdm98w3u 2 578 222 61.5916955 29bbju72rv3t2 1 5750 5514 4.10434783 133ym38r6gbar 0 772 772 0</code></pre><p>preost和postcost数字是根据估计的优化器成本（在<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> ），没有和建议的访问结构更改。
                              </p>
                           </li>
                           <li>
                              <p>显示此建议集的不同操作数。</p>
                              <p>例如，使用以下查询（包括示例输出）：</p><pre class="pre codeblock"><code>SELECT'Action Count'，COUNT（DISTINCT action_id）cnt FROM USER_ADVISOR_ACTIONS WHERE TASK_NAME =：task_name; 'ACTIONCOUNT CNT ------------ ----------行动计数4</code></pre></li>
                           <li>
                              <p>显示这组建议的操作。</p>
                              <p>例如，使用以下查询（包括示例输出）：</p><pre class="pre codeblock"><code>SELECT REC_ID，ACTION_ID，SUBSTR（COMMAND，1,30）AS命令FROM USER_ADVISOR_ACTIONS WHERE TASK_NAME =：task_name ORDER BY rec_id，action_id; REC_ID ACTION_ID命令---------- ---------- --------------------------- --- 1 1 PARTITION TABLE 1 2 RETAIN INDEX 2 1 PARTITION TABLE 2 3 RETAIN INDEX 2 4 RETAIN INDEX</code></pre></li>
                           <li>
                              <p>显示建议的属性。</p>
                              <p>例如，创建以下PL / SQL过程<code class="codeph">show_recm</code> ，然后执行它以查看操作的属性：</p><pre class="pre codeblock"><code>创建或替换过程show_recm（in_task_name IN VARCHAR2）IS CURSOR curs IS SELECT DISTINCT action_id，command，attr1，attr2，attr3，attr4 FROM user_advisor_actions WHERE task_name = in_task_name ORDER BY action_id; v_action号码; v_command VARCHAR2（32）; v_attr1 VARCHAR2（4000）; v_attr2 VARCHAR2（4000）; v_attr3 VARCHAR2（4000）; v_attr4 VARCHAR2（4000）; v_attr5 VARCHAR2（4000）;开始诅咒; DBMS_OUTPUT.PUT_LINE（ '========================================='）; DBMS_OUTPUT.PUT_LINE（'Task_name ='|| in_task_name）; LOOP FETCH curs INTO v_action，v_command，v_attr1，v_attr2，v_attr3，v_attr4;当curs％NOTFOUND时退出; DBMS_OUTPUT.PUT_LINE（'Action ID：'|| v_action）; DBMS_OUTPUT.PUT_LINE（'命令：'|| v_command）; DBMS_OUTPUT.PUT_LINE（'Attr1（name）：'|| SUBSTR（v_attr1,1,30））; DBMS_OUTPUT.PUT_LINE（'Attr2（tablespace）：'|| SUBSTR（v_attr2,1,30））; DBMS_OUTPUT.PUT_LINE（'Attr3：'|| SUBSTR（v_attr3,1,30））; DBMS_OUTPUT.PUT_LINE（'Attr4：'|| v_attr4）; DBMS_OUTPUT.PUT_LINE（'Attr5：'|| v_attr5）; DBMS_OUTPUT.PUT_LINE（ '----------------------------------------'）;结束循环;关闭诅咒; DBMS_OUTPUT.PUT_LINE（'========= END RECOMMENDATIONS ============'）; END show_recm; / SET SERVEROUTPUT ON SIZE 99999 EXECUTE show_recm（：task_name）;</code></pre><p>以下输出显示了建议中操作的属性：</p><pre class="pre codeblock"><code>========================================= Task_name = MYTASK动作ID：1命令： PARTITION TABLE Attr1（名称）：“SH”。“SALES”Attr2（表空间）：Attr3：（“TIME_ID”）Attr4：INTERVAL Attr5：------------------- ---------------------操作ID：2命令：RETAIN INDEX Attr1（名称）：“SH”。“PRODUCTS_PK”Attr2（表空间）：Attr3：“SH “。”产品“Attr4：BTREE Attr5：----------------------------------------操作ID：3命令：RETAIN INDEX Attr1（名称）：“SH”。“TIMES_PK”Attr2（表空间）：Attr3：“SH”。“TIMES”Attr4：BTREE Attr5：----------- -----------------------------操作ID：4命令：RETAIN INDEX Attr1（名称）：“SH”。“SALES_TIME_BIX”Attr2 （表空间）：Attr3：“SH”。“SALES”Attr4：BITMAP Attr5：-------------------------------- -------- =========结束推荐============</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851__GUID-243614F8-470B-4E9B-B5D9-B11B546F3EA1">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="sql-access-advisor.html#GUID-F528E127-B00C-4787-AE2E-257B139DC3E5" title="DBA_ADVISOR_ACTIONS视图显示有关与数据库中所有建议关联的操作的信息。每个动作由COMMAND和ATTR1到ATTR6列指定。">DBA_ADVISOR_ACTIONS视图中的操作属性</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">Attr5</code>和<code class="codeph">Attr6</code>详细信息，请<code class="codeph">Attr5</code> <a href="../arpls/DBMS_LOB.html#ARPLS020" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283" title="基本任务包括创建STS，加载它，创建SQL Access Advisor任务，然后执行任务。">使用SQL Access Advisor：基本任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94782"></a><a id="TGSQL94781"></a><div class="props_rev_3"><a id="GUID-E92AFB9E-8977-4A7E-916E-0886C347B134" name="GUID-E92AFB9E-8977-4A7E-916E-0886C347B134"></a><h4 id="TGSQL-GUID-E92AFB9E-8977-4A7E-916E-0886C347B134" class="sect4"><span class="enumeration_section">25.2.6</span>生成并执行任务脚本</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_ADVISOR.GET_TASK_SCRIPT</code>过程为SQL Access Advisor建议创建SQL语句的脚本。该脚本是一个可执行的SQL文件，可以包含<code class="codeph">DROP</code> ， <code class="codeph">CREATE</code>和<code class="codeph">ALTER</code>语句。
                     </p>
                     <div class="section">
                        <p>对于新对象，使用用户指定的名称模板自动生成实例化视图，物化视图日志和索引的名称。在尝试执行之前查看生成的SQL脚本。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E92AFB9E-8977-4A7E-916E-0886C347B134__GUID-9CE35729-6881-414A-8A1A-1AB3310314F9">假设</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>本教程假定您要保存并执行包含<span class="q">“ <a href="sql-access-advisor.html#GUID-BF56762E-3949-4BF6-A492-2E0F42009DE9" title="DBMS_ADVISOR.EXECUTE_TASK过程对指定的任务执行SQL Access Advisor分析或评估。">执行SQL Access Advisor任务</a> ”中</span>生成的建议的脚本。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E92AFB9E-8977-4A7E-916E-0886C347B134__GUID-84140417-F65F-4D3B-842D-944DEF16DBE8">要保存并执行SQL脚本：</p>
                        <ol>
                           <li>
                              <p>以管理员身份将SQL * Plus连接到数据库。</p>
                           </li>
                           <li>
                              <p>创建目录对象并授予读取和写入权限。</p>
                              <p>例如，使用以下语句：</p><pre class="pre codeblock"><code>CREATE DIRECTORY ADVISOR_RESULTS AS'/ tmp';授权阅读DIRECTORY ADVISOR_RESULTS TO PUBLIC; GRANT在DIRECTORY ADVISOR_RESULTS TO PUBLIC上写下;</code></pre></li>
                           <li>
                              <p>以<code class="codeph">sh</code>身份连接到数据库，然后将脚本保存到文件中。
                              </p>
                              <p>例如，使用以下语句：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.CREATE_FILE（DBMS_ADVISOR.GET_TASK_SCRIPT（'MYTASK'），'ADVISOR_RESULTS'，'advscript.sql'）;</code></pre></li>
                           <li>
                              <p>使用文本编辑器查看脚本的内容。</p>
                              <p>以下是此过程生成的脚本片段：</p><pre class="pre codeblock"><code>Rem用户名：SH Rem任务：MYTASK Rem执行日期：Rem Rem Rem重新分区表“SH”。“SALES”Rem SET SERVEROUTPUT ON SET ECHO ON Rem Rem创建新分区表Rem CREATE TABLE“SH”。“SALES1”（“PROD_ID” “NUMBER，”CUST_ID“NUMBER”，TIME_ID“DATE”，CHANNEL_ID“NUMBER”，PROMO_ID“NUMBER”，QUANTITY_SOLD“NUMBER（10,2）”，“AMOUNT_SOLD”数字（10,2））PCTFREE 5 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS NOLOGGING TABLESPACE“示例”按范围划分（“TIME_ID”）间隔（NUMTOYMINTERVAL（1，'月'））（分区值不超过（'1998-02-01 00:00:00'，'SYYYY-） MM-DD HH24：MI：SS'，'NLS_CALENDAR = GREGORIAN'）））; 。。。
</code></pre></li>
                           <li>
                              <p>（可选）在SQL * Plus中，运行SQL脚本。</p>
                              <p>例如，输入以下命令：</p><pre class="pre codeblock"><code>@ / tmp目录/ advscript.sql</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E92AFB9E-8977-4A7E-916E-0886C347B134__GUID-035A79AC-107A-4C4C-950E-9D0E79061B3C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>用于<code class="codeph">CREATE DIRECTORY</code>语法的<a href="../sqlrf/CREATE-DIRECTORY.html#SQLRF01207" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_ADVISOR.html#ARPLS65121" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">GET_TASK_SCRIPT</code>函数的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-816A7103-440D-4AB8-8ED5-BD4DBDEBB283" title="基本任务包括创建STS，加载它，创建SQL Access Advisor任务，然后执行任务。">使用SQL Access Advisor：基本任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL94784"></a><a id="TGSQL94783"></a><div class="props_rev_3"><a id="GUID-5FD677D7-1A29-4034-A63E-A78383C61456" name="GUID-5FD677D7-1A29-4034-A63E-A78383C61456"></a><h3 id="TGSQL-GUID-5FD677D7-1A29-4034-A63E-A78383C61456" class="sect3"><span class="enumeration_section">25.3</span>执行SQL Access Advisor快速调整</h3>
               <div>
                  <p>为了调整单个SQL语句， <code class="codeph">DBMS_ADVISOR.QUICK_TUNE</code>过程接受<code class="codeph">task_name</code>和单个SQL语句作为其输入。
                  </p>
                  <div class="section">
                     <p><code class="codeph">DBMS_ADVISOR.QUICK_TUNE</code>过程创建任务和工作负载并执行此任务。<code class="codeph">EXECUTE_TASK</code>和<code class="codeph">QUICK_TUNE</code>产生相同的结果。但是，调整单个SQL语句时<code class="codeph">QUICK_TUNE</code>更容易。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5FD677D7-1A29-4034-A63E-A78383C61456__GUID-7EA185E4-2AD6-45D0-A11E-24B39FA5CD91">假设</p>
                     <p>本教程假设以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您想要调整单个SQL语句。</p>
                        </li>
                        <li>
                           <p>您想将任务命名为<code class="codeph">MY_QUICKTUNE_TASK</code> 。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5FD677D7-1A29-4034-A63E-A78383C61456__GUID-09D5E63F-3240-4AB2-B112-B96C02608A3A">要在此模板上创建模板并基于任务，请执行以下操作：</p>
                     <ol>
                        <li>
                           <p>以用户<code class="codeph">sh</code>身份将SQL * Plus连接到数据库，然后为SQL语句和任务名称初始化SQL * Plus变量。
                           </p>
                           <p>例如，输入以下命令：</p><pre class="pre codeblock"><code>VARIABLE t_name VARCHAR2（255）; VARIABLE sq VARCHAR2（4000）; EXEC：sq：='SELECT COUNT（*）FROM customers WHERE cust_state_province =''CA''';执行：t_name：='MY_QUICKTUNE_TASK';</code></pre></li>
                        <li>
                           <p>执行快速调整。</p>
                           <p>例如，以下语句执行<code class="codeph">MY_QUICKTUNE_TASK</code> ：</p><pre class="pre codeblock"><code>EXEC DBMS_ADVISOR.QUICK_TUNE（DBMS_ADVISOR.SQLACCESS_ADVISOR，：t_name，：sq）;</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-5FD677D7-1A29-4034-A63E-A78383C61456__GUID-B4AEB7E6-94E6-479F-83C3-EF9DC9025EE1">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">QUICK_TUNE</code>过程及其参数的更多信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-561EC9B4-0930-4915-B5E1-17F2C5ACD261" title="SQL Access Advisor是一种诊断软件，通过推荐创建，删除或保留索引，物化视图，物化视图日志或分区来识别并帮助解决SQL性能问题。">使用SQL Access Advisor优化访问路径</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL94785"></a><div class="props_rev_3"><a id="GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE" name="GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE"></a><h3 id="TGSQL-GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE" class="sect3"><span class="enumeration_section">25.4</span>使用SQL Access Advisor：高级任务</h3>
               <div>
                  <p>本节介绍涉及SQL Access Advisor的高级任务。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-811D7F8E-8A44-4DB6-93E9-2B0EB6E3A1C4">评估现有的访问结构</a><br>SQL Access Advisor以两种模式运行：解决问题和评估。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-3B12A160-EA4B-4099-A3A1-7728D0DEE6EC">更新SQL Access Advisor任务属性</a><br>您可以使用<code class="codeph">DBMS_ADVISOR.UPDATE_TASK_ATTRIBUTES</code>过程来设置任务的属性。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-E755363F-CC44-4D30-8F64-CF9B973EFB4D">创建和使用SQL Access Advisor任务模板</a><br><strong class="term">任务模板</strong>是一个保存的配置，可以作为未来任务和工作负载的基础。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-D3604ECF-AF4E-42A2-8551-252B26672ACA">终止SQL Access Advisor任务执行</a><br>SQL Access Advisor使您可以中断推荐过程或允许其完成。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-D76A49FA-73F1-4D54-80A1-A88B3C5E4A39">删除SQL Access Advisor任务</a><br><code class="codeph">DBMS_ADVISOR.DELETE_TASK</code>过程从存储库中删除现有的SQL Access Advisor任务。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-D5D23218-BD51-4999-86D8-6B5B9563A34B">标记SQL Access Advisor建议</a><br>默认情况下，所有SQL Access Advisor建议都可以实现。但是，您可以使用<code class="codeph">DBMS_ADVISOR.MARK_RECOMMENDATION</code>过程选择跳过或排除所选建议。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-6824A691-AD3C-4C40-9ECE-E18F327E3B0A">修改SQL Access Advisor建议</a><br>使用<code class="codeph">UPDATE_REC_ATTRIBUTES</code>过程，SQL Access Advisor在分析期间命名并为新对象（如索引和物化视图）分配所有权。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-561EC9B4-0930-4915-B5E1-17F2C5ACD261" title="SQL Access Advisor是一种诊断软件，通过推荐创建，删除或保留索引，物化视图，物化视图日志或分区来识别并帮助解决SQL性能问题。">使用SQL Access Advisor优化访问路径</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94786"></a><div class="props_rev_3"><a id="GUID-811D7F8E-8A44-4DB6-93E9-2B0EB6E3A1C4" name="GUID-811D7F8E-8A44-4DB6-93E9-2B0EB6E3A1C4"></a><h4 id="TGSQL-GUID-811D7F8E-8A44-4DB6-93E9-2B0EB6E3A1C4" class="sect4"><span class="enumeration_section">25.4.1</span>评估现有的访问结构</h4>
                  <div>
                     <p>SQL Access Advisor以两种模式运行：解决问题和评估。</p>
                     <div class="section">
                        <p>默认情况下，SQL Access Advisor通过查找索引结构，分区，物化视图和物化视图日志的增强功能来尝试解决访问方法问题。例如，解决问题的运行可能会建议创建新索引，向物化视图日志添加新列，等等。</p>
                        <p>将<code class="codeph">ANALYSIS_SCOPE</code>参数设置为<code class="codeph">EVALUATION</code> ，SQL Access Advisor仅评论提供的工作负载使用的访问结构。仅评估运行可能仅生成建议，例如保留索引，保留物化视图等。评估模式可用于准确查看工作负载正在使用的索引和物化视图。SQL Access Advisor不评估现有基表分区的性能影响。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-811D7F8E-8A44-4DB6-93E9-2B0EB6E3A1C4__GUID-18E34AAC-9556-47F2-A639-C2DA03E36BD1">要创建任务并将其设置为评估模式：</p>
                        <ol>
                           <li>
                              <p>使用适当的权限将SQL * Plus连接到数据库，然后创建任务。</p>
                              <p>例如，输入以下语句，其中<code class="codeph">t_name</code>是设置为任务名称的SQL * Plus变量：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.EXECUTE_TASK（：t_name）;</code></pre></li>
                           <li>
                              <p>执行快速调整。</p>
                              <p>例如，以下语句将上一个任务设置为评估模式：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.SET_TASK_PARAMETER（：t_name，'ANALYSIS_SCOPE'，'EVALUATION'）;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-811D7F8E-8A44-4DB6-93E9-2B0EB6E3A1C4__GUID-8670E443-0D88-4900-81F6-2891004A3CB2">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，了解<code class="codeph">SET_TASK_PARAMETER</code>过程及其参数</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE" title="本节介绍涉及SQL Access Advisor的高级任务。">使用SQL Access Advisor：高级任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94788"></a><a id="TGSQL94787"></a><div class="props_rev_3"><a id="GUID-3B12A160-EA4B-4099-A3A1-7728D0DEE6EC" name="GUID-3B12A160-EA4B-4099-A3A1-7728D0DEE6EC"></a><h4 id="TGSQL-GUID-3B12A160-EA4B-4099-A3A1-7728D0DEE6EC" class="sect4"><span class="enumeration_section">25.4.2</span>更新SQL Access Advisor任务属性</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_ADVISOR.UPDATE_TASK_ATTRIBUTES</code>过程来设置任务的属性。
                     </p>
                     <div class="section">
                        <p>您可以设置以下属性：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>更改任务的名称。</p>
                           </li>
                           <li>
                              <p>给任务一个描述。</p>
                           </li>
                           <li>
                              <p>将任务设置为只读，以便无法更改。</p>
                           </li>
                           <li>
                              <p>使任务成为可以定义其他任务的模板。</p>
                           </li>
                           <li>
                              <p>更改任务或任务模板的各种属性。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3B12A160-EA4B-4099-A3A1-7728D0DEE6EC__GUID-370DDA59-59A5-4CB8-AA77-766A84BF0990">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您想要将现有任务<code class="codeph">MYTASK</code>的名称更改为<code class="codeph">TUNING1</code> 。
                              </p>
                           </li>
                           <li>
                              <p>您希望将任务<code class="codeph">TUNING1</code>只读。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3B12A160-EA4B-4099-A3A1-7728D0DEE6EC__GUID-D0767761-4354-43E7-B904-1B508365C86E">要更新任务属性：</p>
                        <ol>
                           <li>
                              <p>以用户<code class="codeph">sh</code>身份将SQL * Plus连接到数据库，然后更改任务的名称。
                              </p>
                              <p>例如，使用以下语句：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.UPDATE_TASK_ATTRIBUTES（'MYTASK'，'TUNING1'）;</code></pre></li>
                           <li>
                              <p>将任务设置为只读。</p>
                              <p>例如，使用以下语句：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.UPDATE_TASK_ATTRIBUTES（'TUNING1'，read_only =&gt;'true'）;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3B12A160-EA4B-4099-A3A1-7728D0DEE6EC__GUID-EA64C54B-A753-4BA8-B927-A8BFC33E819B">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="sql-access-advisor.html#GUID-E755363F-CC44-4D30-8F64-CF9B973EFB4D" title="任务模板是一个保存的配置，可以作为未来任务和工作负载的基础。">创建和使用SQL Access Advisor任务模板</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">UPDATE_TASK_ATTRIBUTES</code>过程及其参数的更多信息，请<a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE" title="本节介绍涉及SQL Access Advisor的高级任务。">使用SQL Access Advisor：高级任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94790"></a><a id="TGSQL94791"></a><a id="TGSQL94789"></a><div class="props_rev_3"><a id="GUID-E755363F-CC44-4D30-8F64-CF9B973EFB4D" name="GUID-E755363F-CC44-4D30-8F64-CF9B973EFB4D"></a><h4 id="TGSQL-GUID-E755363F-CC44-4D30-8F64-CF9B973EFB4D" class="sect4"><span class="enumeration_section">25.4.3</span>创建和使用SQL Access Advisor任务模板</h4>
                  <div>
                     <p><strong class="term">任务模板</strong>是一个保存的配置，可以作为未来任务和工作负载的基础。
                     </p>
                     <div class="section">
                        <p>通过模板，您可以设置任意数量的任务或工作负载，这些任务或工作负载可以作为未来任务创建的起点或模板。通过设置模板，您可以在执行调整分析时节省时间。此方法还允许您自定义调整分析以适应业务操作。</p>
                        <p>在物理上，任务和模板之间没有区别。但是，无法执行模板。要从模板创建任务，请指定在创建新任务时要使用的模板。那时，SQL Access Advisor将模板中的数据和参数设置复制到新创建的任务中。您还可以通过在创建任务时设置模板属性或稍后使用<code class="codeph">UPDATE_TASK_ATTRIBUTE</code>过程将现有任务设置为模板。
                        </p>
                        <p>下表介绍了可用于管理任务模板的过程。</p>
                        <div class="tblformal" id="GUID-E755363F-CC44-4D30-8F64-CF9B973EFB4D__CHDDDGBF">
                           <p class="titleintable">表25-3任务模板的DBMS_ADVISOR过程</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_ADVISOR任务模板的过程" width="100%" border="1" summary="Procedures for task templates" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d126383e4831">程序</th>
                                    <th align="left" valign="bottom" width="80%" id="d126383e4834">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d126383e4839" headers="d126383e4831 ">
                                       <p><code class="codeph">CREATE_TASK</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d126383e4839 d126383e4834 ">
                                       <p><code class="codeph">template</code>参数是现有任务或任务模板的可选任务名称。要指定内置SQL Access Advisor模板，请使用<a href="sql-access-advisor.html#GUID-9CB98A66-9651-49BE-A3D1-C01D43D79FA9__CHDDAHBJ" title="SQL Access Advisor常量">表25-6中</a>所述的模板名称。 <code class="codeph">is_template</code>是一个可选参数，可用于将新创建的任务设置为模板。有效值为<code class="codeph">true</code>和<code class="codeph">false</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d126383e4864" headers="d126383e4831 ">
                                       <p><code class="codeph">SET_TASK_PARAMETER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d126383e4864 d126383e4834 ">
                                       <p><code class="codeph">INDEX_NAME_TEMPLATE</code>参数指定形成新索引名称的方法。<code class="codeph">MVIEW_NAME_TEMPLATE</code>参数指定形成新的<code class="codeph">MVIEW_NAME_TEMPLATE</code>化视图名称的方法。<code class="codeph">PARTITION_NAME_TEMPLATE</code>参数指定形成新分区名称的方法。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d126383e4881" headers="d126383e4831 ">
                                       <p><code class="codeph">UPDATE_TASK_ATTRIBUTES</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d126383e4881 d126383e4834 ">
                                       <p>	<code class="codeph">is_template</code>将任务标记为模板。在物理上，任务和模板之间没有区别;但是，无法执行模板。可能的值为： <code class="codeph">true</code>和<code class="codeph">false</code> 。如果值为<code class="codeph">NULL</code>或包含值<code class="codeph">ADVISOR_UNUSED</code> ，则不更改设置。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E755363F-CC44-4D30-8F64-CF9B973EFB4D__GUID-7690CC7D-D126-431F-911A-F40243E7F554">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您想要创建名为<code class="codeph">MY_TEMPLATE</code>的模板。</p>
                           </li>
                           <li>
                              <p>您希望为基于<code class="codeph">MY_TEMPLATE</code>的任务建议的索引和物化视图设置命名约定。</p>
                           </li>
                           <li>
                              <p>您想创建任务<code class="codeph">NEWTASK</code>基于<code class="codeph">MY_TEMPLATE</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E755363F-CC44-4D30-8F64-CF9B973EFB4D__GUID-F541133A-B86C-4CF4-93C8-678AF8C6BD1B">要在此模板上创建模板并基于任务，请执行以下操作：</p>
                        <ol>
                           <li>
                              <p>以用户<code class="codeph">sh</code>身份将SQL * Plus连接到数据库，然后将任务创建为模板。
                              </p>
                              <p>例如，创建名为<code class="codeph">MY_TEMPLATE</code>的模板，如下所示：</p><pre class="pre codeblock"><code>VARIABLE template_id NUMBER; VARIABLE template_name VARCHAR2（255）;执行：template_name：='MY_TEMPLATE'; BEGIN DBMS_ADVISOR.CREATE_TASK（'SQL Access Advisor'，：template_id，：template_name，is_template =&gt;'true'）;结束;</code></pre></li>
                           <li>
                              <p>设置模板参数。</p>
                              <p>例如，以下语句设置推荐索引和物化视图的命名约定：</p><pre class="pre codeblock"><code>- 为推荐的索引/ mv设置命名约定BEGIN DBMS_ADVISOR.SET_TASK_PARAMETER（：template_name，'INDEX_NAME_TEMPLATE'，'SH_IDX $$ _ &lt;SEQ&gt;'）;结束; BEGIN DBMS_ADVISOR.SET_TASK_PARAMETER（：template_name，'MVIEW_NAME_TEMPLATE'，'SH_MV $$ _ &lt;SEQ&gt;'）;结束;</code></pre></li>
                           <li>
                              <p>基于预先存在的模板创建任务。</p>
                              <p>例如，输入以下命令来创建<code class="codeph">NEWTASK</code>基于<code class="codeph">MY_TEMPLATE</code> ：</p><pre class="pre codeblock"><code>VARIABLE task_id NUMBER; VARIABLE task_name VARCHAR2（255）;执行：task_name：='NEWTASK'; BEGIN DBMS_ADVISOR.CREATE_TASK（'SQL Access Advisor'，：task_id，：task_name，template =&gt;'MY_TEMPLATE'）;结束;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E755363F-CC44-4D30-8F64-CF9B973EFB4D__GUID-57DE0317-3D91-435D-AB6A-EFC2A0B80C5B">
                        <p class="notep1">也可以看看：</p>
                        <p><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span>以了解<a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><code class="codeph">CREATE_TASK</code></a>和<a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><code class="codeph">SET_TASK_PARAMETER</code></a>过程</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE" title="本节介绍涉及SQL Access Advisor的高级任务。">使用SQL Access Advisor：高级任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94792"></a><div class="props_rev_3"><a id="GUID-D3604ECF-AF4E-42A2-8551-252B26672ACA" name="GUID-D3604ECF-AF4E-42A2-8551-252B26672ACA"></a><h4 id="TGSQL-GUID-D3604ECF-AF4E-42A2-8551-252B26672ACA" class="sect4"><span class="enumeration_section">25.4.4</span>终止SQL Access Advisor任务执行</h4>
                  <div>
                     <p>SQL Access Advisor使您可以中断推荐过程或允许其完成。</p>
                     <p>中断表示SQL Access Advisor停止处理并将任务标记为<code class="codeph">INTERRUPTED</code> 。此时，您可以更新推荐属性并生成脚本。
                     </p>
                     <p>中间结果表示直到该时间点的工作负载内容的建议。如果建议必须对整个工作负载敏感，那么Oracle建议您完成任务。此外，顾问在推荐过程早期提出的建议不包含基表分区建议。分区分析需要处理大部分工作负载，然后才能确定分区是否有益。因此，如果SQL Access Advisor检测到某个权益，则只有稍后的中间结果才会包含基表分区建议。</p>
                     <p>本节介绍了两种终止SQL Access Advisor任务执行的方法：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-476D465A-1BCC-408E-9FB4-A04D6B7BD82D">中断SQL Access Advisor任务</a><br><code class="codeph">DBMS_ADVISOR.INTERRUPT_TASK</code>过程导致SQL Access Advisor任务执行终止，就像它已达到正常结束一样。
                        </li>
                        <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-38CF8060-4574-4A9A-9351-C6ADE91193A6">取消SQL Access Advisor任务</a><br>您可以通过调用<code class="codeph">DBMS_ADVISOR.CANCEL_TASK</code>过程并传入此建议过程的任务名称来停止任务执行。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE" title="本节介绍涉及SQL Access Advisor的高级任务。">使用SQL Access Advisor：高级任务</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94794"></a><a id="TGSQL94793"></a><div class="props_rev_3"><a id="GUID-476D465A-1BCC-408E-9FB4-A04D6B7BD82D" name="GUID-476D465A-1BCC-408E-9FB4-A04D6B7BD82D"></a><h5 id="TGSQL-GUID-476D465A-1BCC-408E-9FB4-A04D6B7BD82D" class="sect5"><span class="enumeration_section">25.4.4.1</span>中断SQL Access Advisor任务</h5>
                     <div>
                        <p><code class="codeph">DBMS_ADVISOR.INTERRUPT_TASK</code>过程导致SQL Access Advisor任务执行终止，就像它已达到正常结束一样。
                        </p>
                        <div class="section">
                           <p>因此，您可以看到在中断点之前形成的任何建议。无法重新启动中断的任务。语法如下：</p><pre class="pre codeblock"><code>DBMS_ADVISOR.INTERRUPT_TASK（task_name IN VARCHAR2）;</code></pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-476D465A-1BCC-408E-9FB4-A04D6B7BD82D__GUID-54A59F42-C98D-48F1-9B99-B0AE0D16F872">假设</p>
                           <p>本教程假设以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>长期运行的任务<code class="codeph">MYTASK</code>目前正在执行。
                                 </p>
                              </li>
                              <li>
                                 <p>您想要中断此任务，然后查看建议。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-476D465A-1BCC-408E-9FB4-A04D6B7BD82D__GUID-1ABC43D7-4DEA-4E56-A147-E80251306EB3">要中断当前正在执行的任务：</p>
                           <ol>
                              <li>
                                 <p>以<code class="codeph">sh</code>为单位将SQL * Plus连接到数据库，然后中断任务。
                                 </p>
                                 <p>例如，创建名为<code class="codeph">MY_TEMPLATE</code>的模板，如下所示：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.INTERRUPT_TASK（'MYTASK'）;</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-476D465A-1BCC-408E-9FB4-A04D6B7BD82D__GUID-BF8CEBFB-E7E1-44A2-8EA7-8587317A4D84">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_ADVISOR.html#ARPLS65135" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">INTERRUPT_TASK</code>过程</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-D3604ECF-AF4E-42A2-8551-252B26672ACA" title="SQL Access Advisor使您可以中断推荐过程或允许其完成。">终止SQL Access Advisor任务执行</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94796"></a><a id="TGSQL94795"></a><div class="props_rev_3"><a id="GUID-38CF8060-4574-4A9A-9351-C6ADE91193A6" name="GUID-38CF8060-4574-4A9A-9351-C6ADE91193A6"></a><h5 id="TGSQL-GUID-38CF8060-4574-4A9A-9351-C6ADE91193A6" class="sect5"><span class="enumeration_section">25.4.4.2</span>取消SQL Access Advisor任务</h5>
                     <div>
                        <p>您可以通过调用<code class="codeph">DBMS_ADVISOR.CANCEL_TASK</code>过程并传入此建议过程的任务名称来停止任务执行。
                        </p>
                        <div class="section">
                           <p>SQL Access Advisor可能需要几秒钟才能响应此请求。由于所有顾问程序任务过程都是同步的，因此要取消操作，必须使用单独的数据库会话。如果您使用<code class="codeph">CANCEL_TASK</code> ，则SQL Access Advisor不会提供任何建议。
                           </p>
                           <p>取消命令有效将任务恢复到取消操作开始之前的状态。因此，无法重新启动已取消的任务或数据对象。但是，您可以使用<code class="codeph">DBMS_ADVISOR.RESET_TASK</code>重置任务，然后再次执行它。<code class="codeph">CANCEL_TASK</code>语法如下：</p><pre class="pre codeblock"><code>DBMS_ADVISOR.CANCEL_TASK（task_name IN VARCHAR2）;</code></pre><p><code class="codeph">RESET_TASK</code>过程将任务重置为其初始起始点，这样可以从任务中删除所有建议和中间数据。任务状态设置为<code class="codeph">INITIAL</code> 。语法如下：</p><pre class="pre codeblock"><code>DBMS_ADVISOR.RESET_TASK（task_name IN VARCHAR2）;</code></pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-38CF8060-4574-4A9A-9351-C6ADE91193A6__GUID-FD4F0783-D228-45AD-893B-90B61CB77DEB">假设</p>
                           <p>本教程假设以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>长期运行的任务<code class="codeph">MYTASK</code>目前正在执行。此任务设置为进行分区建议。
                                 </p>
                              </li>
                              <li>
                                 <p>您想要取消此任务，然后重置它，以便该任务仅提供索引建议。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-38CF8060-4574-4A9A-9351-C6ADE91193A6__GUID-DE6441F0-18C5-44A5-980F-58955D98E3A3">要取消当前正在执行的任务：</p>
                           <ol>
                              <li>
                                 <p>以用户<code class="codeph">sh</code>身份将SQL * Plus连接到数据库，然后取消该任务。
                                 </p>
                                 <p>例如，创建名为<code class="codeph">MY_TEMPLATE</code>的模板，如下所示：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.CANCEL_TASK（'MYTASK'）;</code></pre></li>
                              <li>
                                 <p>重置任务。</p>
                                 <p>例如，执行<code class="codeph">RESET_TASK</code>过程，如下所示：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.RESET_TASK（'MYTASK'）;</code></pre></li>
                              <li>
                                 <p>设置任务参数。</p>
                                 <p>例如，将分析范围更改为<code class="codeph">INDEX</code> ，如下所示：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.SET_TASK_PARAMETER（：task_name，'ANALYSIS_SCOPE'，'INDEX'）;</code></pre></li>
                              <li>
                                 <p>执行任务。</p>
                                 <p>例如，执行<code class="codeph">MYTASK</code>如下：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.EXECUTE_TASK（'MYTASK'）;</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-38CF8060-4574-4A9A-9351-C6ADE91193A6__GUID-D41B388F-C46B-4DA0-9F2F-BE7112546183">
                           <p class="notep1">也可以看看：</p>
                           <p><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span>以了解有关<a href="../arpls/DBMS_ADVISOR.html#ARPLS65143" target="_blank"><code class="codeph">RESET_TASK</code></a>和<a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><code class="codeph">CANCEL_TASK</code></a>更多信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-D3604ECF-AF4E-42A2-8551-252B26672ACA" title="SQL Access Advisor使您可以中断推荐过程或允许其完成。">终止SQL Access Advisor任务执行</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL94798"></a><a id="TGSQL94797"></a><div class="props_rev_3"><a id="GUID-D76A49FA-73F1-4D54-80A1-A88B3C5E4A39" name="GUID-D76A49FA-73F1-4D54-80A1-A88B3C5E4A39"></a><h4 id="TGSQL-GUID-D76A49FA-73F1-4D54-80A1-A88B3C5E4A39" class="sect4"><span class="enumeration_section">25.4.5</span>删除SQL Access Advisor任务</h4>
                  <div>
                     <p><code class="codeph">DBMS_ADVISOR.DELETE_TASK</code>过程从存储库中删除现有的SQL Access Advisor任务。
                     </p>
                     <div class="section">
                        <p>SQL Access Advisor任务删除的语法如下：</p><pre class="pre codeblock"><code>DBMS_ADVISOR.DELETE_TASK（task_name IN VARCHAR2）;</code></pre><p>如果任务链接到STS工作负载，并且您要删除任务或工作负载，则必须使用<code class="codeph">DELETE_STS_REF</code>过程删除任务与工作负载之间的链接。以下示例删除任务<code class="codeph">MYTASK</code>与当前用户的SQL调优集<code class="codeph">MY_STS_WORKLOAD</code>之间的链接：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.DELETE_STS_REF（'MYTASK'，null，'MY_STS_WORKLOAD'）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D76A49FA-73F1-4D54-80A1-A88B3C5E4A39__GUID-88A4BF0F-D788-4BA2-B07D-9BE7BBF3B483">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>用户<code class="codeph">sh</code>目前拥有多个SQL Access Advisor任务。
                              </p>
                           </li>
                           <li>
                              <p>你想删除<code class="codeph">MYTASK</code> 。</p>
                           </li>
                           <li>
                              <p>任务<code class="codeph">MYTASK</code>目前与工作负载<code class="codeph">MY_STS_WORKLOAD</code>相关联。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D76A49FA-73F1-4D54-80A1-A88B3C5E4A39__GUID-DD7DB29F-E852-4A83-BB5A-CF47608C01DC">要删除SQL Access Advisor任务：</p>
                        <ol>
                           <li>
                              <p>以用户<code class="codeph">sh</code>身份将SQL * Plus连接到数据库，然后查询现有的SQL Access Advisor任务。
                              </p>
                              <p>例如，按如下方式查询数据字典（包括样本输出）：</p><pre class="pre codeblock"><code>从USER_ADVISOR_TASKS中选择TASK_NAME WHERE ADVISOR_NAME ='SQL Access Advisor'; TASK_NAME ------------------------- MYTASK NEWTASK</code></pre></li>
                           <li>
                              <p>删除<code class="codeph">MYTASK</code>和<code class="codeph">MY_STS_WORKLOAD</code>之间的链接。</p>
                              <p>例如，删除引用如下：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.DELETE_STS_REF（'MYTASK'，null，'MY_STS_WORKLOAD'）;</code></pre></li>
                           <li>
                              <p>删除所需的任务。</p>
                              <p>例如，删除<code class="codeph">MYTASK</code>如下：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.DELETE_TASK（'MYTASK'）;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D76A49FA-73F1-4D54-80A1-A88B3C5E4A39__GUID-F60952DC-FAB3-44E7-B909-9963A264925C">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_ADVISOR.html#ARPLS65113" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DELETE_TASK</code>过程及其参数的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE" title="本节介绍涉及SQL Access Advisor的高级任务。">使用SQL Access Advisor：高级任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94800"></a><a id="TGSQL94799"></a><div class="props_rev_3"><a id="GUID-D5D23218-BD51-4999-86D8-6B5B9563A34B" name="GUID-D5D23218-BD51-4999-86D8-6B5B9563A34B"></a><h4 id="TGSQL-GUID-D5D23218-BD51-4999-86D8-6B5B9563A34B" class="sect4"><span class="enumeration_section">25.4.6</span>标记SQL Access Advisor建议</h4>
                  <div>
                     <p>默认情况下，所有SQL Access Advisor建议都可以实现。但是，您可以使用<code class="codeph">DBMS_ADVISOR.MARK_RECOMMENDATION</code>过程选择跳过或排除所选建议。
                     </p>
                     <div class="section">
                        <p><code class="codeph">MARK_RECOMMENDATION</code>允许您使用<code class="codeph">REJECT</code>或<code class="codeph">IGNORE</code>设置注释建议，这会导致<code class="codeph">GET_TASK_SCRIPT</code>在生成实现过程时跳过它。
                        </p>
                        <p>如果SQL Access Advisor建议对一个或多个先前未分区的基表进行分区，请在跳过此建议之前仔细考虑。更改表的分区方案会影响表上定义的所有查询，索引和物化视图的开销。因此，如果您跳过分区建议，那么顾问对此表的其余建议将不再是最佳选择。要查看不包含分区的工作负载建议，请重置顾问程序任务并重新运行它，并更改<code class="codeph">ANALYSIS_SCOPE</code>参数以排除分区建议。
                        </p>
                        <p>语法如下：</p><pre class="pre codeblock"><code>DBMS_ADVISOR.MARK_RECOMMENDATION（task_name IN VARCHAR2 id IN NUMBER，action IN VARCHAR2）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D5D23218-BD51-4999-86D8-6B5B9563A34B__GUID-EB05812E-4225-4BB8-8B72-E265E57955D9">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您正在查看教程<span class="q">“ <a href="sql-access-advisor.html#GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851" title="您可以使用多个数据字典视图查看SQL Access Advisor生成的每个建议。">查看SQL Access Advisor任务结果</a> ”中</span>所述的建议。
                              </p>
                           </li>
                           <li>
                              <p>您想要拒绝对表进行分区的第一个建议。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D5D23218-BD51-4999-86D8-6B5B9563A34B__GUID-C5D9B064-B487-4F80-927B-C9741F7931FF">标记建议：</p>
                        <ol>
                           <li>
                              <p>以用户<code class="codeph">sh</code>身份将SQL * Plus连接到数据库，然后标记建议。
                              </p>
                              <p>例如，拒绝建议<code class="codeph">1</code>如下：</p><pre class="pre codeblock"><code>EXECUTE DBMS_ADVISOR.MARK_RECOMMENDATION（'MYTASK'，1，'REJECT'）;</code></pre><p>此建议和任何相关建议不会出现在脚本中。</p>
                           </li>
                           <li>
                              <p>按照<span class="q">“ <a href="sql-access-advisor.html#GUID-E92AFB9E-8977-4A7E-916E-0886C347B134" title="You can use the procedure DBMS_ADVISOR.GET_TASK_SCRIPT to create a script of the SQL statements for the SQL Access Advisor recommendations. The script is an executable SQL file that can contain DROP, CREATE, and ALTER statements.">生成并执行任务脚本</a> ”中的</span>说明<span class="q"><a href="sql-access-advisor.html#GUID-E92AFB9E-8977-4A7E-916E-0886C347B134" title="您可以使用DBMS_ADVISOR.GET_TASK_SCRIPT过程为SQL Access Advisor建议创建SQL语句的脚本。该脚本是一个可执行的SQL文件，可以包含DROP，CREATE和ALTER语句。">生成脚本</a></span> 。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D5D23218-BD51-4999-86D8-6B5B9563A34B__GUID-F98761B9-314C-443D-9175-415AFFA9E360">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_ADVISOR.html#ARPLS350" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">MARK_RECOMMENDATIONS</code>过程及其参数的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE" title="本节介绍涉及SQL Access Advisor的高级任务。">使用SQL Access Advisor：高级任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94802"></a><a id="TGSQL94801"></a><div class="props_rev_3"><a id="GUID-6824A691-AD3C-4C40-9ECE-E18F327E3B0A" name="GUID-6824A691-AD3C-4C40-9ECE-E18F327E3B0A"></a><h4 id="TGSQL-GUID-6824A691-AD3C-4C40-9ECE-E18F327E3B0A" class="sect4"><span class="enumeration_section">25.4.7</span>修改SQL Access Advisor建议</h4>
                  <div>
                     <p>使用<code class="codeph">UPDATE_REC_ATTRIBUTES</code>过程，SQL Access Advisor在分析期间命名并为新对象（如索引和物化视图）分配所有权。
                     </p>
                     <div class="section">
                        <p>SQL Access Advisor可能不一定选择适当的名称。在这种情况下，您可以选择手动设置新对象的所有者，名称和表空间值。对于引用现有数据库对象的建议，无法更改所有者和名称值。语法如下：</p><pre class="pre codeblock"><code>DBMS_ADVISOR.UPDATE_REC_ATTRIBUTES（task_name IN VARCHAR2 rec_id IN NUMBER，action_id IN NUMBER，attribute_name IN VARCHAR2，value IN VARCHAR2）;</code></pre><p><code class="codeph">attribute_name</code>参数可以采用以下值：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">所有者</code></p>
                              <p>指定推荐对象的所有者名称。</p>
                           </li>
                           <li>
                              <p><code class="codeph">名称</code></p>
                              <p>指定推荐对象的名称。</p>
                           </li>
                           <li>
                              <p><code class="codeph">TABLESPACE</code></p>
                              <p>指定推荐对象的表空间。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6824A691-AD3C-4C40-9ECE-E18F327E3B0A__GUID-71D46A3A-CBF7-4A18-99D7-EB861C1107DB">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您正在查看教程<span class="q">“ <a href="sql-access-advisor.html#GUID-34B6474B-7C8A-4EF6-BC75-ACAB07B1A851" title="您可以使用多个数据字典视图查看SQL Access Advisor生成的每个建议。">查看SQL Access Advisor任务结果</a> ”中</span>所述的建议。
                              </p>
                           </li>
                           <li>
                              <p>您想要将建议1，操作1的表空间更改为<code class="codeph">SH_MVIEWS</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6824A691-AD3C-4C40-9ECE-E18F327E3B0A__GUID-EA122362-B3A8-48B7-AE73-D0B6AF0B9B88">标记建议：</p>
                        <ol>
                           <li>
                              <p>以用户<code class="codeph">sh</code>身份将SQL * Plus连接到数据库，然后更新推荐属性。
                              </p>
                              <p>例如，将表空间名称更改为<code class="codeph">SH_MVIEWS</code> ，如下所示：</p><pre class="pre codeblock"><code>BEGIN DBMS_ADVISOR.UPDATE_REC_ATTRIBUTES（'MYTASK'，1,1，'TABLESPACE'，'SH_MVIEWS'）;结束;</code></pre></li>
                           <li>
                              <p>按照<span class="q">“ <a href="sql-access-advisor.html#GUID-E92AFB9E-8977-4A7E-916E-0886C347B134" title="You can use the procedure DBMS_ADVISOR.GET_TASK_SCRIPT to create a script of the SQL statements for the SQL Access Advisor recommendations. The script is an executable SQL file that can contain DROP, CREATE, and ALTER statements.">生成并执行任务脚本</a> ”中的</span>说明<span class="q"><a href="sql-access-advisor.html#GUID-E92AFB9E-8977-4A7E-916E-0886C347B134" title="您可以使用DBMS_ADVISOR.GET_TASK_SCRIPT过程为SQL Access Advisor建议创建SQL语句的脚本。该脚本是一个可执行的SQL文件，可以包含DROP，CREATE和ALTER语句。">生成脚本</a></span> 。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-6824A691-AD3C-4C40-9ECE-E18F327E3B0A__GUID-4431A596-1A4B-4F01-85F1-AF0A3D05E358">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_ADVISOR.html#ARPLS65163" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">UPDATE_REC_ATTRIBUTES</code>过程及其参数的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-65BBE16E-42BD-4CDD-B8E8-A2E1C72190CE" title="本节介绍涉及SQL Access Advisor的高级任务。">使用SQL Access Advisor：高级任务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL94803"></a><div class="props_rev_3"><a id="GUID-0A74A15A-E1D1-40EA-A7F8-2EF775C8D426" name="GUID-0A74A15A-E1D1-40EA-A7F8-2EF775C8D426"></a><h3 id="TGSQL-GUID-0A74A15A-E1D1-40EA-A7F8-2EF775C8D426" class="sect3"><span class="enumeration_section">25.5</span> SQL Access Advisor示例</h3>
               <div>
                  <p>Oracle数据库提供了一个脚本，其中包含可以在测试数据库上运行的多个SQL Access Advisor示例。</p>
                  <p>该脚本名为<code class="codeph"><span class="codeinlineitalic">ORACLE_HOME</span> /rdbms/demo/aadvdemo.sql</code> 。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-561EC9B4-0930-4915-B5E1-17F2C5ACD261" title="SQL Access Advisor是一种诊断软件，通过推荐创建，删除或保留索引，物化视图，物化视图日志或分区来识别并帮助解决SQL性能问题。">使用SQL Access Advisor优化访问路径</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL594"></a><div class="props_rev_3"><a id="GUID-1C7083BD-2AFC-43EA-B940-13D2F77935DF" name="GUID-1C7083BD-2AFC-43EA-B940-13D2F77935DF"></a><h3 id="TGSQL-GUID-1C7083BD-2AFC-43EA-B940-13D2F77935DF" class="sect3"><span class="enumeration_section">25.6</span> SQL Access Advisor参考</h3>
               <div>
                  <p>您可以使用数据字典视图访问有关SQL Access Advisor的元数据。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-F528E127-B00C-4787-AE2E-257B139DC3E5">DBA_ADVISOR_ACTIONS视图中的操作属性</a><br>DBA_ADVISOR_ACTIONS视图显示有关与数据库中所有建议关联的操作的信息。每个动作由<code class="codeph">COMMAND</code>和<code class="codeph">ATTR1</code>到<code class="codeph">ATTR6</code>列指定。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-B83F372B-CC15-4A0B-B1F1-E80CF54B8499">SQL Access Advisor任务参数的类别</a><br>SQL Access Advisor任务参数分为以下类别：工作负载筛选，任务配置，架构属性和推荐选项。
                     </li>
                     <li class="ulchildlink"><a href="sql-access-advisor.html#GUID-9CB98A66-9651-49BE-A3D1-C01D43D79FA9">SQL Access Advisor常量</a><br><code class="codeph">DBMS_ADVISOR</code>提供了许多常量。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-561EC9B4-0930-4915-B5E1-17F2C5ACD261" title="SQL Access Advisor是一种诊断软件，通过推荐创建，删除或保留索引，物化视图，物化视图日志或分区来识别并帮助解决SQL性能问题。">使用SQL Access Advisor优化访问路径</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94805"></a><a id="TGSQL94804"></a><div class="props_rev_3"><a id="GUID-F528E127-B00C-4787-AE2E-257B139DC3E5" name="GUID-F528E127-B00C-4787-AE2E-257B139DC3E5"></a><h4 id="TGSQL-GUID-F528E127-B00C-4787-AE2E-257B139DC3E5" class="sect4"><span class="enumeration_section">25.6.1</span> DBA_ADVISOR_ACTIONS视图中的操作属性</h4>
                  <div>
                     <p>DBA_ADVISOR_ACTIONS视图显示有关与数据库中所有建议关联的操作的信息。每个动作由<code class="codeph">COMMAND</code>和<code class="codeph">ATTR1</code>到<code class="codeph">ATTR6</code>列指定。
                     </p>
                     <div class="section">
                        <p>下表将SQL Access Advisor操作映射到<code class="codeph">DBA_ADVISOR_ACTIONS</code>视图中的属性列。在表中， <code class="codeph">MV</code>指的是物化视图。
                        </p>
                        <div class="tblformalwide" id="GUID-F528E127-B00C-4787-AE2E-257B139DC3E5__CHDHEGEI">
                           <p class="titleintable">表25-4 SQL Access Advisor操作属性</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="SQL Access Advisor操作属性" width="100%" border="1" summary="SQL Access Advisor Action Attributes" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="12%" id="d126383e6599">行动</th>
                                    <th align="left" valign="bottom" width="12%" id="d126383e6602">ATTR1专栏</th>
                                    <th align="left" valign="bottom" width="13%" id="d126383e6605">ATTR2柱</th>
                                    <th align="left" valign="bottom" width="12%" id="d126383e6608">ATTR3柱</th>
                                    <th align="left" valign="bottom" width="13%" id="d126383e6611">ATTR4柱</th>
                                    <th align="left" valign="bottom" width="13%" id="d126383e6614">ATTR5柱</th>
                                    <th align="left" valign="bottom" width="13%" id="d126383e6617">ATTR6柱</th>
                                    <th align="left" valign="bottom" width="11%" id="d126383e6620">NUM_ATTR1列</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6625" headers="d126383e6599 ">
                                       <p><code class="codeph">创建指数</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6625 d126383e6602 ">
                                       <p>索引名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6625 d126383e6605 ">
                                       <p>索引表空间</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6625 d126383e6608 ">
                                       <p>目标表</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6625 d126383e6611 ">
                                       <p><code class="codeph">BITMAP</code>或<code class="codeph">BTREE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6625 d126383e6614 ">
                                       <p>索引列列表/表达式</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6625 d126383e6617 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6625 d126383e6620 ">
                                       <p>索引的存储大小（以字节为单位）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6655" headers="d126383e6599 ">
                                       <p><code class="codeph">创建物质化视图</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6655 d126383e6602 ">
                                       <p>MV名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6655 d126383e6605 ">
                                       <p>MV表空间</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6655 d126383e6608 ">
                                       <p><code class="codeph">REFRESH COMPLETE</code> ， <code class="codeph">REFRESH FAST</code> ， <code class="codeph">REFRESH FORCE</code> ， <code class="codeph">NEVER REFRESH</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6655 d126383e6611 ">
                                       <p><code class="codeph">ENABLE QUERY REWRITE</code> ， <code class="codeph">DISABLE QUERY REWRITE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6655 d126383e6614 ">
                                       <p>SQL <code class="codeph">SELECT</code>语句</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6655 d126383e6617 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6655 d126383e6620 ">
                                       <p>MV的存储大小（以字节为单位）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6699" headers="d126383e6599 ">
                                       <p><code class="codeph">创建物化视图日志</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6699 d126383e6602 ">
                                       <p>目标表名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6699 d126383e6605 ">
                                       <p>MV日志表空间</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6699 d126383e6608 ">
                                       <p><code class="codeph">ROWID PRIMARY KEY</code> ， <code class="codeph">SEQUENCE OBJECT ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6699 d126383e6611 ">
                                       <p><code class="codeph">INCLUDING NEW VALUES</code> ， <code class="codeph">EXCLUDING NEW VALUES</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6699 d126383e6614 ">
                                       <p>表列列表</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6699 d126383e6617 ">
                                       <p>分区子条款</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6699 d126383e6620 ">
                                       <p>没用过</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6734" headers="d126383e6599 ">
                                       <p><code class="codeph">创建REWRITE等价</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6734 d126383e6602 ">
                                       <p>等价名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6734 d126383e6605 ">
                                       <p>校验和值</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6734 d126383e6608 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6734 d126383e6611 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6734 d126383e6614 ">
                                       <p>源SQL语句</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6734 d126383e6617 ">
                                       <p>等效的SQL语句</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6734 d126383e6620 ">
                                       <p>没用过</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6760" headers="d126383e6599 ">
                                       <p><code class="codeph">DROP INDEX</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6760 d126383e6602 ">
                                       <p>索引名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6760 d126383e6605 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6760 d126383e6608 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6760 d126383e6611 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6760 d126383e6614 ">
                                       <p>索引列</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6760 d126383e6617 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6760 d126383e6620 ">
                                       <p>索引的存储大小（以字节为单位）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6786" headers="d126383e6599 ">
                                       <p><code class="codeph">DROP MATERIALIZED VIEW</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6786 d126383e6602 ">
                                       <p>MV名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6786 d126383e6605 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6786 d126383e6608 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6786 d126383e6611 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6786 d126383e6614 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6786 d126383e6617 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6786 d126383e6620 ">
                                       <p>MV的存储大小（以字节为单位）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6813" headers="d126383e6599 ">
                                       <p><code class="codeph">DROP MATERIALIZED VIEW LOG</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6813 d126383e6602 ">
                                       <p>目标表名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6813 d126383e6605 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6813 d126383e6608 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6813 d126383e6611 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6813 d126383e6614 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6813 d126383e6617 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6813 d126383e6620 ">
                                       <p>没用过</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6839" headers="d126383e6599 ">
                                       <p><code class="codeph">分区表</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6839 d126383e6602 ">
                                       <p>表名</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6839 d126383e6605 ">
                                       <p><code class="codeph">RANGE</code> ， <code class="codeph">INTERVAL</code> ， <code class="codeph">LIST</code> ， <code class="codeph">HASH</code> ， <code class="codeph">RANGE-HASH</code> ， <code class="codeph">RANGE-LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6839 d126383e6608 ">
                                       <p>用于分区的分区键（列名或列名列表）</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6839 d126383e6611 ">
                                       <p>子分区的分区键（列名或列名列表）</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6839 d126383e6614 ">
                                       <p>SQL <code class="codeph">PARTITION</code>子句</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6839 d126383e6617 ">
                                       <p>SQL <code class="codeph">SUBPARTITION</code>子句</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6839 d126383e6620 ">
                                       <p>没用过</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6888" headers="d126383e6599 ">
                                       <p><code class="codeph">分区指数</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6888 d126383e6602 ">
                                       <p>索引名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6888 d126383e6605 ">
                                       <p><code class="codeph">LOCAL</code> ， <code class="codeph">RANGE</code> ， <code class="codeph">HASH</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6888 d126383e6608 ">
                                       <p>用于分区的分区键（列名列表）</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6888 d126383e6611 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6888 d126383e6614 ">
                                       <p>SQL <code class="codeph">PARTITION</code>子句</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6888 d126383e6617 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6888 d126383e6620 ">
                                       <p>没用过</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6925" headers="d126383e6599 ">
                                       <p><code class="codeph">物化视图的分区</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6925 d126383e6602 ">
                                       <p>MV名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6925 d126383e6605 ">
                                       <p><code class="codeph">RANGE</code> ， <code class="codeph">INTERVAL</code> ， <code class="codeph">LIST</code> ， <code class="codeph">HASH</code> ， <code class="codeph">RANGE-HASH</code> ， <code class="codeph">RANGE-LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6925 d126383e6608 ">
                                       <p>用于分区的分区键（列名或列名列表）</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6925 d126383e6611 ">
                                       <p>子分区的分区键（列名或列名列表）</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6925 d126383e6614 ">
                                       <p>SQL <code class="codeph">SUBPARTITION</code>子句</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6925 d126383e6617 ">
                                       <p>SQL <code class="codeph">SUBPARTITION</code>子句</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6925 d126383e6620 ">
                                       <p>没用过</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e6974" headers="d126383e6599 ">
                                       <p><code class="codeph">保留索引</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6974 d126383e6602 ">
                                       <p>索引名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6974 d126383e6605 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e6974 d126383e6608 ">
                                       <p>目标表</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6974 d126383e6611 ">
                                       <p><code class="codeph">BITMAP</code>或<code class="codeph">BTREE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6974 d126383e6614 ">
                                       <p>索引列</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e6974 d126383e6617 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e6974 d126383e6620 ">
                                       <p>索引的存储大小（以字节为单位）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e7006" headers="d126383e6599 ">
                                       <p><code class="codeph">保留物质化的视图</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e7006 d126383e6602 ">
                                       <p>MV名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e7006 d126383e6605 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e7006 d126383e6608 ">
                                       <p><code class="codeph">REFRESH COMPLETE</code>或<code class="codeph">REFRESH FAST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e7006 d126383e6611 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e7006 d126383e6614 ">
                                       <p>SQL <code class="codeph">SELECT</code>语句</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e7006 d126383e6617 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e7006 d126383e6620 ">
                                       <p>MV的存储大小（以字节为单位）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d126383e7040" headers="d126383e6599 ">
                                       <p><code class="codeph">保留物质化的视图日志</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e7040 d126383e6602 ">
                                       <p>目标表名称</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e7040 d126383e6605 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d126383e7040 d126383e6608 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e7040 d126383e6611 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e7040 d126383e6614 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d126383e7040 d126383e6617 ">
                                       <p>没用过</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d126383e7040 d126383e6620 ">
                                       <p>没用过</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-1C7083BD-2AFC-43EA-B940-13D2F77935DF" title="您可以使用数据字典视图访问有关SQL Access Advisor的元数据。">SQL Access Advisor参考</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94807"></a><a id="TGSQL94806"></a><div class="props_rev_3"><a id="GUID-B83F372B-CC15-4A0B-B1F1-E80CF54B8499" name="GUID-B83F372B-CC15-4A0B-B1F1-E80CF54B8499"></a><h4 id="TGSQL-GUID-B83F372B-CC15-4A0B-B1F1-E80CF54B8499" class="sect4"><span class="enumeration_section">25.6.2</span> SQL Access Advisor任务参数的类别</h4>
                  <div>
                     <p>SQL Access Advisor任务参数分为以下类别：工作负载筛选，任务配置，架构属性和推荐选项。</p>
                     <div class="section">
                        <p>下表将最相关的SQL Access Advisor任务参数分组。不推荐使用工作负载过滤的所有任务参数。</p>
                        <div class="tblformalwide" id="GUID-B83F372B-CC15-4A0B-B1F1-E80CF54B8499__CHDJIJDD">
                           <p class="titleintable">表25-5 <span class="italic"><span class="bold">Advisor任务参数的类型及其用途</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Advisor任务参数的类型及其用途" width="100%" border="1" summary="Types of Advisor Task Parameters And Their Uses" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d126383e7201">工作负载过滤</th>
                                    <th align="left" valign="bottom" width="22%" id="d126383e7204">任务配置</th>
                                    <th align="left" valign="bottom" width="25%" id="d126383e7207">架构属性</th>
                                    <th align="left" valign="bottom" width="25%" id="d126383e7210">推荐选项</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7215" headers="d126383e7201 ">
                                       <p><code class="codeph">时间结束</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7215 d126383e7204 ">
                                       <p><code class="codeph">DAYS_TO_EXPIRE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7215 d126383e7207 ">
                                       <p><code class="codeph">DEF_INDEX_OWNER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7215 d126383e7210 ">
                                       <p><code class="codeph">ANALYSIS_SCOPE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7232" headers="d126383e7201 ">
                                       <p><code class="codeph">INVALID_ACTION_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7232 d126383e7204 ">
                                       <p><code class="codeph">JOURNALING</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7232 d126383e7207 ">
                                       <p><code class="codeph">DEF_INDEX_TABLESPACE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7232 d126383e7210 ">
                                       <p><code class="codeph">兼容性</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7249" headers="d126383e7201 ">
                                       <p><code class="codeph">INVALID_MODULE_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7249 d126383e7204 ">
                                       <p><code class="codeph">REPORT_DATE_FORMAT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7249 d126383e7207 ">
                                       <p><code class="codeph">DEF_MVIEW_OWNER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7249 d126383e7210 ">
                                       <p><code class="codeph">CREATION_COST</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7266" headers="d126383e7201 ">
                                       <p><code class="codeph">INVALID_SQLSTRING_LIMIT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7266 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7266 d126383e7207 ">
                                       <p><code class="codeph">DEF_MVIEW_TABLESPACE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7266 d126383e7210 ">
                                       <p><code class="codeph">DML_VOLATILITY</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7280" headers="d126383e7201 ">
                                       <p><code class="codeph">INVALID_TABLE_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7280 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7280 d126383e7207 ">
                                       <p><code class="codeph">DEF_MVLOG_TABLESPACE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7280 d126383e7210 ">
                                       <p><code class="codeph">LIMIT_PARTITION_SCHEMES</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7294" headers="d126383e7201 ">
                                       <p><code class="codeph">INVALID_USERNAME_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7294 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7294 d126383e7207 ">
                                       <p><code class="codeph">DEF_PARTITION_TABLESPACE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7294 d126383e7210 ">
                                       <p><code class="codeph">模式</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7308" headers="d126383e7201 ">
                                       <p><code class="codeph">RANKING_MEASURE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7308 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7308 d126383e7207 ">
                                       <p><code class="codeph">INDEX_NAME_TEMPLATE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7308 d126383e7210 ">
                                       <p><code class="codeph">PARTITIONING_TYPES</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7322" headers="d126383e7201 ">
                                       <p><code class="codeph">SQL_LIMIT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7322 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7322 d126383e7207 ">
                                       <p><code class="codeph">MVIEW_NAME_TEMPLATE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7322 d126383e7210 ">
                                       <p><code class="codeph">REFRESH_MODE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7336" headers="d126383e7201 ">
                                       <p><code class="codeph">开始时间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7336 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7336 d126383e7207 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7336 d126383e7210 ">
                                       <p><code class="codeph">STORAGE_CHANGE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7347" headers="d126383e7201 ">
                                       <p><code class="codeph">时限</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7347 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7347 d126383e7207 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7347 d126383e7210 ">
                                       <p><code class="codeph">USE_SEPARATE_TABLESPACES</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7358" headers="d126383e7201 ">
                                       <p><code class="codeph">VALID_ACTION_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7358 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7358 d126383e7207 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7358 d126383e7210 ">
                                       <p><code class="codeph">WORKLOAD_SCOPE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7370" headers="d126383e7201 ">
                                       <p><code class="codeph">VALID_MODULE_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7370 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7370 d126383e7207 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7370 d126383e7210 "> </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7378" headers="d126383e7201 ">
                                       <p><code class="codeph">VALID_SQLSTRING_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7378 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7378 d126383e7207 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7378 d126383e7210 "> </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7386" headers="d126383e7201 ">
                                       <p><code class="codeph">VALID_TABLE_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7386 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7386 d126383e7207 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7386 d126383e7210 "> </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d126383e7394" headers="d126383e7201 ">
                                       <p><code class="codeph">VALID_USERNAME_LIST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d126383e7394 d126383e7204 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7394 d126383e7207 "> </td>
                                    <td align="left" valign="top" width="25%" headers="d126383e7394 d126383e7210 "> </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-1C7083BD-2AFC-43EA-B940-13D2F77935DF" title="您可以使用数据字典视图访问有关SQL Access Advisor的元数据。">SQL Access Advisor参考</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94809"></a><a id="TGSQL94808"></a><div class="props_rev_3"><a id="GUID-9CB98A66-9651-49BE-A3D1-C01D43D79FA9" name="GUID-9CB98A66-9651-49BE-A3D1-C01D43D79FA9"></a><h4 id="TGSQL-GUID-9CB98A66-9651-49BE-A3D1-C01D43D79FA9" class="sect4"><span class="enumeration_section">25.6.3</span> SQL Access Advisor常量</h4>
                  <div>
                     <p><code class="codeph">DBMS_ADVISOR</code>提供了许多常量。
                     </p>
                     <div class="section">
                        <p>您可以使用下表中显示的常量和SQL Access Advisor。</p>
                        <div class="tblformal" id="GUID-9CB98A66-9651-49BE-A3D1-C01D43D79FA9__CHDDAHBJ">
                           <p class="titleintable">表25-6 SQL Access Advisor常量</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SQL Access Advisor常量" width="100%" border="1" summary="SQL Access Advisor Constants" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d126383e7533">不变</th>
                                    <th align="left" valign="bottom" width="70%" id="d126383e7536">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d126383e7541" headers="d126383e7533 "><code class="codeph">ADVISOR_ALL</code></td>
                                    <td align="left" valign="top" width="70%" headers="d126383e7541 d126383e7536 ">一个值，指示所有可能的值。对于字符串参数，此值等同于通配符（ <code class="codeph">%</code> ）字符。
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d126383e7550" headers="d126383e7533 "><code class="codeph">ADVISOR_CURRENT</code></td>
                                    <td align="left" valign="top" width="70%" headers="d126383e7550 d126383e7536 ">指示当前时间或活动元素集。通常，这用于时间参数。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d126383e7556" headers="d126383e7533 "><code class="codeph">ADVISOR_DEFAULT</code></td>
                                    <td align="left" valign="top" width="70%" headers="d126383e7556 d126383e7536 ">表示默认值。通常在设置任务或工作负载参数时使用。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d126383e7562" headers="d126383e7533 "><code class="codeph">ADVISOR_UNLIMITED</code></td>
                                    <td align="left" valign="top" width="70%" headers="d126383e7562 d126383e7536 ">表示无限数值的值。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d126383e7568" headers="d126383e7533 "><code class="codeph">ADVISOR_UNUSED</code></td>
                                    <td align="left" valign="top" width="70%" headers="d126383e7568 d126383e7536 ">表示未使用实体的值。当参数设置为<code class="codeph">ADVISOR_UNUSED</code> ，它对当前操作没有影响。此常量的典型用法是将参数设置为其相关操作未使用。
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d126383e7577" headers="d126383e7533 "><code class="codeph">SQLACCESS_GENERAL</code></td>
                                    <td align="left" valign="top" width="70%" headers="d126383e7577 d126383e7536 ">指定默认SQL Access通用任务模板的名称。此模板将<code class="codeph">DML_VOLATILITY</code>任务参数设置为<code class="codeph">true</code> ，将<code class="codeph">ANALYSIS_SCOPE</code>为<code class="codeph">INDEX</code> ， <code class="codeph">MVIEW</code> 。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d126383e7598" headers="d126383e7533 "><code class="codeph">SQLACCESS_OLTP</code></td>
                                    <td align="left" valign="top" width="70%" headers="d126383e7598 d126383e7536 ">指定默认SQL Access OLTP任务模板的名称。此模板将<code class="codeph">DML_VOLATILITY</code>任务参数设置为<code class="codeph">true</code> ，将<code class="codeph">ANALYSIS_SCOPE</code>为<code class="codeph">INDEX</code> 。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d126383e7616" headers="d126383e7533 "><code class="codeph">SQLACCESS_WAREHOUSE</code></td>
                                    <td align="left" valign="top" width="70%" headers="d126383e7616 d126383e7536 ">指定默认SQL Access仓库任务模板的名称。此模板将<code class="codeph">DML_VOLATILITY</code>任务参数设置为<code class="codeph">false</code> ，将<code class="codeph">EXECUTION_TYPE</code>为<code class="codeph">INDEX</code> ， <code class="codeph">MVIEW</code> 。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d126383e7637" headers="d126383e7533 "><code class="codeph">SQLACCESS_ADVISOR</code></td>
                                    <td align="left" valign="top" width="70%" headers="d126383e7637 d126383e7536 ">包含SQL Access Advisor的正式名称。当过程需要Advisor名称作为参数时，您可以指定此名称。</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-access-advisor.html#GUID-1C7083BD-2AFC-43EA-B940-13D2F77935DF" title="您可以使用数据字典视图访问有关SQL Access Advisor的元数据。">SQL Access Advisor参考</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="These topics discuss how to manage Oracle Database Advanced Queuing."></meta>
      <meta name="description" content="These topics discuss how to manage Oracle Database Advanced Queuing."></meta>
      <title>管理Oracle数据库高级队列</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content="These topics discuss how to manage Oracle Database Advanced Queuing."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="aq-program-interfaces.html" title="Previous" type="text/html"></link>
      <link rel="next" href="aq-performance-scalability.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="aq-program-interfaces.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="aq-performance-scalability.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理Oracle数据库高级队列</li>
            </ol>
            <a id="GUID-E3876F68-D784-47AB-A21E-6AC7FCBBA99D" name="GUID-E3876F68-D784-47AB-A21E-6AC7FCBBA99D"></a><a id="ADQUE0400"></a>
            
            <h2 id="ADQUE-GUID-E3876F68-D784-47AB-A21E-6AC7FCBBA99D" class="sect2"><span class="enumeration_chapter">4</span>管理Oracle数据库高级队列</h2>
         </header>
         <div class="ind">
            <div>
               <p>这些主题讨论如何管理Oracle数据库高级队列。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="managing-aq.html#GUID-D31E2B70-F6A4-4E3D-8F49-E6BF393D1448" title="必须在兼容性设置为8.1或更高的情况下创建存储缓冲消息的队列。">Oracle数据库高级队列兼容性参数</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-A738A707-F5B1-4043-BF0C-821FA883A2DB" title="这些主题讨论Oracle数据库高级队列队列安全性和访问控制。">队列安全和访问控制</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-BBBE2F1C-CE2B-498D-91F5-8A7EAF263BE2" title="导出队列表时，队列表数据和PL / SQL代码的匿名块将写入导出转储文件。导入队列表时，导入实用程序会执行这些PL / SQL匿名块以将元数据写入数据字典。">队列表导出/导入</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-F8529236-38AD-4C3C-ADD9-4AE9E63E5623" title="Oracle Enterprise Manager支持Oracle Database Advanced Queuing的大多数管理功能。Oracle Database Advanced Queuing功能位于Enterprise Manager控制台导航树中的Distributed node下。">Oracle企业管理器支持</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-2554562B-EE13-4278-B21D-C3B6483703AA" title="你必须指定" objects="T&quot;" in="" the="" xa_open="" string="" if="" you="" want="" to="" use="" oracle="" database="" advanced="" queuing="" oci="" interface.="" this="" forces="" xa="" initialize="" client-side="" cache="" mode.="" are="" not="" required="" do="" plan="" through="" pl="" /sql="" wrappers="" from="" or="" pro*c="=">在XA中使用Oracle数据库高级队列</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-F3CA5F56-43DF-4F38-8513-EE3335ADEB07" title="这些主题讨论了对队列管理的限制。">队列管理的限制</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-5F4A3998-B93F-44FD-92C1-A6E4ED85FA95" title="这些主题讨论管理Oracle数据库高级队列传播。">管理传播</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE2557"></a><div class="props_rev_3"><a id="GUID-D31E2B70-F6A4-4E3D-8F49-E6BF393D1448" name="GUID-D31E2B70-F6A4-4E3D-8F49-E6BF393D1448"></a><h3 id="ADQUE-GUID-D31E2B70-F6A4-4E3D-8F49-E6BF393D1448" class="sect3"><span class="enumeration_section">4.1</span> Oracle数据库高级排队兼容性参数</h3>
               <div>
                  <p>必须在兼容性设置为8.1或更高的情况下创建存储缓冲消息的队列。</p>
                  <p>的<code class="codeph">compatible</code>的参数<code class="codeph">init.ora</code>和<code class="codeph">compatible</code>的的参数<a href="glossary.html#GUID-45894F1F-4871-4A00-9171-2743821BAD3A"><span class="xrefglossterm">队列表</span></a>应该被设置为8.1或更高，以使用以下功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>队列级访问控制</p>
                     </li>
                     <li>
                        <p>支持Oracle Real Application Clusters环境</p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-C1099A1A-C20D-4C9C-AD73-BBF6BC8939B5"><span class="xrefglossterm">发布/订阅的</span></a>基于规则的订阅<a href="glossary.html#GUID-C1099A1A-C20D-4C9C-AD73-BBF6BC8939B5"><span class="xrefglossterm">者</span></a></p>
                     </li>
                     <li>
                        <p>异步通知</p>
                     </li>
                     <li>
                        <p>发件人识别</p>
                     </li>
                     <li>
                        <p>单独存储历史管理信息</p>
                     </li>
                     <li>
                        <p>安全队列</p>
                     </li>
                  </ul>
                  <p><a id="d23823e202" class="indexterm-anchor"></a><a id="d23823e208" class="indexterm-anchor"></a><a id="d23823e214" class="indexterm-anchor"></a>如果数据库兼容性为10.0，则支持混合大小写（大写和小写一起）队列名称，队列表名称和订户名称，但名称必须用双引号括起来。所以<code class="codeph">abc.efg</code>表示模式是<code class="codeph">ABC</code> ，名称是<code class="codeph">EFG</code> ，但是<code class="codeph">"abc"."efg"</code>表示模式是<code class="codeph">abc</code> ，名称是<code class="codeph">efg</code> 。
                  </p>
                  <p></p>
               </div>
            </div><a id="ADQUE2558"></a><div class="props_rev_3"><a id="GUID-A738A707-F5B1-4043-BF0C-821FA883A2DB" name="GUID-A738A707-F5B1-4043-BF0C-821FA883A2DB"></a><h3 id="ADQUE-GUID-A738A707-F5B1-4043-BF0C-821FA883A2DB" class="sect3"><span class="enumeration_section">4.2</span>队列安全和访问控制</h3>
               <div>
                  <p>这些主题讨论Oracle数据库高级队列队列安全性和访问控制。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="managing-aq.html#GUID-3E0B5CD0-817A-49A3-8895-4651B224D765" title="可以通过DBMS_AQADM程序包中的过程来管理配置信息。">Oracle数据库高级队列安全性</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-B35AEA4C-FD8A-42B4-A474-67AC78090C75" title="Oracle数据库高级Oracle数据库管理员可以创建队列。创建队列时，DBMS_AQADM.CREATE_QUEUE_TABLE中兼容参数的默认值是兼容参数的默认值。">队列安全</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-0713F87E-AF19-4222-87D1-8FDA195738D8" title="您可以在队列上的对象级别授予或撤消权限。您还可以授予或撤消各种系统级权限。">队列权限和访问控制</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-7C603931-B6A6-4BD5-93B7-609719567A7B" title="对于访问队列的Oracle调用接口（OCI）应用程序，必须为会话用户授予他要访问的队列的对象特权或ENQUEUE ANY QUEUE或DEQUEUE ANY QUEUE系统特权。">OCI应用程序和队列访问</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-7076D22A-D63F-4AE5-9F2A-495829690878" title="Oracle数据库高级队列通过数据库链接传播消息。">传播所需的安全性</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2559"></a><div class="props_rev_3"><a id="GUID-3E0B5CD0-817A-49A3-8895-4651B224D765" name="GUID-3E0B5CD0-817A-49A3-8895-4651B224D765"></a><h4 id="ADQUE-GUID-3E0B5CD0-817A-49A3-8895-4651B224D765" class="sect4"><span class="enumeration_section">4.2.1</span> <code class="codeph"></code> Oracle数据库高级队列安全性</h4>
                  <div>
                     <p>可以通过<code class="codeph">DBMS_AQADM</code>程序包中的过程来管理配置信息。
                     </p>
                     <p>最初，只有<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>对<code class="codeph">DBMS_AQADM</code>和<code class="codeph">DBMS_AQ</code>的过程具有执行权限。已被授予这两个包的<code class="codeph">EXECUTE</code>权限的用户能够在自己的模式中创建，管理和使用队列。<code class="codeph">The MANAGE_ANY</code> AQ系统特权用于在其他模式中创建和管理队列。
                     </p>
                     <p><a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java消息服务</span></a> （JMS） <a href="glossary.html#GUID-2003BA71-5534-477C-990D-5ABE432A5907"><span class="xrefglossterm">API的用户</span></a>需要<code class="codeph">DBMS_AQJMS</code>和<code class="codeph">DBMS_AQIN</code>上的<code class="codeph">EXECUTE</code>特权。</p>
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="managing-aq.html#GUID-FD0FBE37-B314-4BFF-A9D5-1F63C1761E6E" title="AQ_ADMINISTRATOR_ROLE具有管理队列所需的所有权限。">管理员角色</a></p>
                        </li>
                        <li>
                           <p><a href="managing-aq.html#GUID-2A48F8D6-BE69-4A08-8403-CF6CE5953C91" title="您应该避免授予AQ_USER_ROLE，因为此角色不能为排队或出列提供足够的权限。">用户角色</a></p>
                        </li>
                        <li>
                           <p><a href="managing-aq.html#GUID-8D620EFB-9B2B-4A8D-AEA7-41F0BC5C6859" title="PUBLIC可以访问所有内部Oracle数据库高级队列对象。">访问Oracle数据库高级排队对象类型</a></p>
                        </li>
                     </ul>
                     <div class="p">
                        <div class="infoboxnotealso" id="GUID-3E0B5CD0-817A-49A3-8895-4651B224D765__GUID-A1620EEA-F4DA-4EAF-8B9F-34D764AEAD19">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="aq-administrative-interface.html#GUID-E86BD9DC-E029-4468-948D-122943D7BD9D" title="DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE为用户和角色授予Oracle数据库高级队列系统特权。权限是ENQUEUE_ANY，DEQUEUE_ANY，MANAGE_ANY。最初，只有SYS和SYSTEM才能成功使用此过程。">授予Oracle数据库高级排队系统权限</a> ”</span>以获取有关AQ系统权限的更多信息</p>
                        </div>
                     </div>
                  </div><a id="ADQUE2560"></a><div class="props_rev_3"><a id="GUID-FD0FBE37-B314-4BFF-A9D5-1F63C1761E6E" name="GUID-FD0FBE37-B314-4BFF-A9D5-1F63C1761E6E"></a><h5 id="ADQUE-GUID-FD0FBE37-B314-4BFF-A9D5-1F63C1761E6E" class="sect5"><span class="enumeration_section">4.2.1.1</span>管理员角色</h5>
                     <div>
                        <p><code class="codeph">AQ_ADMINISTRATOR_ROLE</code>具有管理队列所需的所有权限。
                        </p>
                        <p>授予该角色的权限允许被授予者：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>执行任何<a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">队列</span></a>管理操作，包括在数据库中的任何<a href="glossary.html#GUID-CBE1EC43-DFD2-4701-B758-DCE2C98C277A"><span class="xrefglossterm">模式</span></a>上创建队列和队列表</p>
                           </li>
                           <li>
                              <p>对数据库中的任何队列执行入<a href="glossary.html#GUID-B21E60F7-4BFA-42A2-9A8F-B781C2A55ED9"><span class="xrefglossterm">队</span></a>和<a href="glossary.html#GUID-BC8D60E8-953A-4C6C-8163-F7AE187B768B"><span class="xrefglossterm">出列</span></a>操作</p>
                           </li>
                           <li>
                              <p>访问用于监视队列工作负载的统计信息视图</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBMS_TRANSFORM</code>创建转换 
                              </p>
                           </li>
                           <li>
                              <p>运行<code class="codeph">DBMS_AQELM</code>所有过程 
                              </p>
                           </li>
                           <li>
                              <p>在<code class="codeph">DBMS_AQJMS</code>运行所有过程 
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-FD0FBE37-B314-4BFF-A9D5-1F63C1761E6E__GUID-6BBF1B8B-80B0-4440-809A-C13EB7E5F0BF">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>用户不需要<code class="codeph">AQ_ADMINISTRATOR_ROLE</code>即可在其架构中创建队列或执行任何其他AQ DDL。用户只需要<code class="codeph">DBMS_AQADM</code>包的执行权限。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">AQ_ADMINISTRATOR_ROLE</code>仍然无法在<code class="codeph">SYS</code>或<code class="codeph">SYSTEM</code>模式中创建AQ对象。因此，上面描述它可以在任何模式上创建队列表/队列，不包括<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>模式。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">AQ_ADMINISTRATOR_ROLE</code>仍然无法在<code class="codeph">SYS</code>或<code class="codeph">SYSTEM</code>模式中对队列进行入队/出列。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADQUE2561"></a><div class="props_rev_3"><a id="GUID-2A48F8D6-BE69-4A08-8403-CF6CE5953C91" name="GUID-2A48F8D6-BE69-4A08-8403-CF6CE5953C91"></a><h5 id="ADQUE-GUID-2A48F8D6-BE69-4A08-8403-CF6CE5953C91" class="sect5"><span class="enumeration_section">4.2.1.2</span>用户角色</h5>
                     <div>
                        <p>您应该避免授予<code class="codeph">AQ_USER_ROLE</code> ，因为此角色不能为排队或出列提供足够的权限。
                        </p>
                        <p>如果您希望用户具有此级别的控制权，则数据库管理员可以选择授予系统权限<code class="codeph">ENQUEUE_ANY</code>和<code class="codeph">DEQUEUE_ANY</code> ，直接向数据库用户执行<code class="codeph">DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE</code>和<code class="codeph">DBMS_AQADM.REVOKE_SYSTEM_PRIVILEGE</code> 。
                        </p>
                        <p>您作为应用程序开发人员通过执行<code class="codeph">DBMS_AQADM.GRANT_QUEUE_PRIVILEGE</code>和<code class="codeph">DBMS_AQADM.REVOKE_QUEUE_PRIVILEGE</code>授予和撤消对象级别的权限来授予队列权限。</p>
                        <p>作为数据库用户，除了<code class="codeph">DBMS_AQ</code>上的<code class="codeph">EXECUTE</code>权限之外，您不需要任何显式的对象级或系统级权限来排队或出列到您自己的模式中的队列。</p>
                        <div class="infoboxnote" id="GUID-2A48F8D6-BE69-4A08-8403-CF6CE5953C91__GUID-8985ABBD-BC1C-4A8C-ACEA-EDC625433E2D">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果客户端是OCI或PL / SQL，则用户只需要<code class="codeph">DBMS_AQ</code>包的<code class="codeph">EXECUTE</code>特权<code class="codeph">DBMS_AQ</code>在其模式中入队或出列。</p>
                                 <p>如果客户端是JDBC或JMS，那么添加到此，您还需要<code class="codeph">DBMS_AQIN</code>包的执行权限。
                                 </p>
                              </li>
                              <li>
                                 <p>用户不需要<code class="codeph">AQ_USER_ROLE</code>来将队列中的队列排队或出列队列。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADQUE2562"></a><div class="props_rev_3"><a id="GUID-8D620EFB-9B2B-4A8D-AEA7-41F0BC5C6859" name="GUID-8D620EFB-9B2B-4A8D-AEA7-41F0BC5C6859"></a><h5 id="ADQUE-GUID-8D620EFB-9B2B-4A8D-AEA7-41F0BC5C6859" class="sect5"><span class="enumeration_section">4.2.1.3</span>访问Oracle数据库高级队列对象类型</h5>
                     <div>
                        <p><code class="codeph">PUBLIC</code>可以访问所有内部Oracle数据库高级队列对象。</p>
                     </div>
                  </div>
               </div><a id="ADQUE2563"></a><div class="props_rev_3"><a id="GUID-B35AEA4C-FD8A-42B4-A474-67AC78090C75" name="GUID-B35AEA4C-FD8A-42B4-A474-67AC78090C75"></a><h4 id="ADQUE-GUID-B35AEA4C-FD8A-42B4-A474-67AC78090C75" class="sect4"><span class="enumeration_section">4.2.2</span>队列安全</h4>
                  <div>
                     <p>Oracle数据库高级Oracle数据库管理员可以创建队列。当您创建队列，则默认值<code class="codeph">compatible</code>参数<code class="codeph">DBMS_AQADM.CREATE_QUEUE_TABLE</code>是，的<code class="codeph">compatible</code>参数。
                     </p>
                     <p>要排队或出列，用户需要对<code class="codeph">DBMS_AQ</code> <code class="codeph">EXECUTE</code>权限， <code class="codeph">DBMS_AQ</code>目标队列或<code class="codeph">ENQUEUE_ANY</code> / <code class="codeph">DEQUEUE_ANY</code>系统权限进行入队或出队。
                     </p>
                  </div>
               </div><a id="ADQUE2565"></a><a id="ADQUE2564"></a><div class="props_rev_3"><a id="GUID-0713F87E-AF19-4222-87D1-8FDA195738D8" name="GUID-0713F87E-AF19-4222-87D1-8FDA195738D8"></a><h4 id="ADQUE-GUID-0713F87E-AF19-4222-87D1-8FDA195738D8" class="sect4"><span class="enumeration_section">4.2.3</span>队列权限和访问控制</h4>
                  <div>
                     <p>您可以在队列上的对象级别授予或撤消权限。您还可以授予或撤消各种系统级权限。</p>
                     <p><a href="managing-aq.html#GUID-0713F87E-AF19-4222-87D1-8FDA195738D8__g1010210" title="行是操作。第一列描述操作，第二列列出该操作所需的权限。">表4-1</a>列出了所有常见的Oracle数据库高级队列操作以及执行这些操作所需的权限。
                     </p>
                     <div class="tblformal" id="GUID-0713F87E-AF19-4222-87D1-8FDA195738D8__g1010210">
                        <p class="titleintable">表4-1操作和所需权限</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="操作和所需权限" width="100%" border="1" summary="Rows are operations. The first column describes the operation, and the second column lists the privileges required for that operation." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="33%" id="d23823e987">操作（S）</th>
                                 <th align="left" valign="bottom" width="67%" id="d23823e990">特权要求</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d23823e995" headers="d23823e987 ">
                                    <p><code class="codeph">CREATE</code> / <code class="codeph">DROP</code> / <code class="codeph">MONITOR</code>自己的队列</p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d23823e995 d23823e990 ">
                                    <p>必须在<code class="codeph">DBMS_AQADM</code>上授予<code class="codeph">EXECUTE</code>权限。不需要其他特权。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d23823e1016" headers="d23823e987 ">
                                    <p><code class="codeph">CREATE</code> / <code class="codeph">DROP</code> / <code class="codeph">MONITOR</code>任何队列</p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d23823e1016 d23823e990 ">
                                    <p>必须被授予<code class="codeph">DBMS_AQADM</code> <code class="codeph">EXECUTE</code>权限， <code class="codeph">DBMS_AQADM</code>另一个被授予此角色的用户授予<code class="codeph">AQ_ADMINISTRATOR_ROLE</code> （ <code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>是AQ_ADMINISTRATOR_ROLE的第一个授权者<code class="codeph">AQ_ADMINISTRATOR_ROLE)</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d23823e1049" headers="d23823e987 ">
                                    <p><code class="codeph">ENQUEUE</code> / <code class="codeph">DEQUEUE</code>拥有队列</p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d23823e1049 d23823e990 ">
                                    <p>必须在<code class="codeph">DBMS_AQ</code>上授予<code class="codeph">EXECUTE</code>权限。不需要其他特权。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d23823e1067" headers="d23823e987 ">
                                    <p><code class="codeph">ENQUEUE</code> / <code class="codeph">DEQUEUE</code>到另一个队列</p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d23823e1067 d23823e990 ">
                                    <p>必须在<code class="codeph">DBMS_AQ</code>上授予<code class="codeph">EXECUTE</code>权限，并由所有者使用<code class="codeph">DBMS_AQADM</code>授予权限。 <code class="codeph">GRANT_QUEUE_PRIVILEGE</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d23823e1091" headers="d23823e987 ">
                                    <p><code class="codeph">ENQUEUE</code> / <code class="codeph">DEQUEUE</code>到任何队列</p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d23823e1091 d23823e990 ">
                                    <p>必须被授予<code class="codeph">EXECUTE</code>的权利<code class="codeph">DBMS_AQ</code>并被授予<code class="codeph">ENQUEUE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code>或<code class="codeph">DEQUEUE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code>通过使用Oracle数据库的高级队列管理员的系统权限<code class="codeph">DBMS_AQADM</code> 。 <code class="codeph">GRANT_SYSTEM_PRIVILEGE</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADQUE2566"></a><div class="props_rev_3"><a id="GUID-7C603931-B6A6-4BD5-93B7-609719567A7B" name="GUID-7C603931-B6A6-4BD5-93B7-609719567A7B"></a><h4 id="ADQUE-GUID-7C603931-B6A6-4BD5-93B7-609719567A7B" class="sect4"><span class="enumeration_section">4.2.4</span> OCI应用程序和队列访问</h4>
                  <div>
                     <p>对于访问队列的Oracle调用接口（OCI）应用程序，必须为会话用户授予他要访问的队列的对象特权或<code class="codeph">ENQUEUE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code>或<code class="codeph">DEQUEUE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code>系统特权。
                     </p>
                     <p>不会根据会话用户的权限检查<code class="codeph">DBMS_AQ</code>的<code class="codeph">EXECUTE</code>权限。
                     </p>
                  </div>
               </div><a id="ADQUE2567"></a><div class="props_rev_3"><a id="GUID-7076D22A-D63F-4AE5-9F2A-495829690878" name="GUID-7076D22A-D63F-4AE5-9F2A-495829690878"></a><h4 id="ADQUE-GUID-7076D22A-D63F-4AE5-9F2A-495829690878" class="sect4"><span class="enumeration_section">4.2.5</span>传播所需的安全性</h4>
                  <div>
                     <p>Oracle数据库高级队列通过数据库链接传播消息。</p>
                     <p><a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">传播</span></a>驱动程序从源队列中出队，作为源队列的所有者;因此，不需要在源队列上授予显式访问权限。在目标位置，数据库链接中的登录用户应被授予<code class="codeph">ENQUEUE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code>权限，或被授予入队到目标队列的权限。但是，如果数据库链接中的登录用户也拥有目标上的队列表，则不能授予明确的Oracle数据库高级队列特权。
                     </p>
                     <div class="infoboxnotealso" id="GUID-7076D22A-D63F-4AE5-9F2A-495829690878__GUID-36496A23-DD33-4AF1-8B50-849B89D05A89">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="managing-aq.html#GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46" title="支持使用BFILE对象从对象队列进行传播。">从对象队列传播</a> ”</span></p>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B5C8AB55-B6BB-4996-A609-D56C52AD72FD" name="GUID-B5C8AB55-B6BB-4996-A609-D56C52AD72FD"></a><h4 id="ADQUE-GUID-B5C8AB55-B6BB-4996-A609-D56C52AD72FD" class="sect4"><span class="enumeration_section">4.2.6</span> Oracle RAC上非分片缓冲消息所需的安全性</h4>
                  <div>
                     <p></p>
                     <p>在内部，Oracle RAC上的缓冲队列可以在实例之间使用<code class="codeph">dblinks</code> 。在Oracle RAC上排队或出列到缓冲队列的Definer权限包必须向包的用户授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code> 。
                     </p>
                  </div>
               </div>
            </div><a id="ADQUE2568"></a><div class="props_rev_3"><a id="GUID-BBBE2F1C-CE2B-498D-91F5-8A7EAF263BE2" name="GUID-BBBE2F1C-CE2B-498D-91F5-8A7EAF263BE2"></a><h3 id="ADQUE-GUID-BBBE2F1C-CE2B-498D-91F5-8A7EAF263BE2" class="sect3"><span class="enumeration_section">4.3队列表</span>导出/导入</h3>
               <div>
                  <p>导出队列表时，队列表数据和PL / SQL代码的匿名块将写入导出转储文件。导入队列表时，导入实用程序会执行这些PL / SQL匿名块以将元数据写入数据字典。</p>
                  <p>Oracle AQ不会使用用户导出导出注册。所有使用客户端注册的应用程序都应考虑到这一点，因为客户端可能不在导入的数据库中。</p>
                  <div class="infoboxnote" id="GUID-BBBE2F1C-CE2B-498D-91F5-8A7EAF263BE2__GUID-517C9038-EEF3-4A60-9097-C7ECFAF5A660">
                     <p class="notep1">注意：</p>
                     <p>您无法导出或导入缓冲的邮件。</p>
                     <p>如果数据库中的同一模式中存在与导出转储中具有相同名称的队列表，则在导入具有队列的队列表之前，请确保数据库队列表为空。如果不这样做，可能会破坏导入队列的元数据。</p>
                  </div>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="managing-aq.html#GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3" title="队列的导出需要导出底层队列表和相关的字典表。队列表的粒度也可以完成队列的导出。">导出队列表数据</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-77270554-9434-4597-9017-26290CD2356C" title="与导出队列类似，导入队列需要导入基础队列表和相关字典数据。导入队列表数据后，导入实用程序将执行转储文件中的PL / SQL匿名块，以将元数据写入数据字典。">导入队列表数据</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-72446BCA-AA6F-49F2-92AD-9B5C40CB4258" title="队列表支持数据泵替换和跳过模式。">数据泵导出和导入</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2570"></a><a id="ADQUE2571"></a><a id="ADQUE2569"></a><div class="props_rev_3"><a id="GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3" name="GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3"></a><h4 id="ADQUE-GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3" class="sect4"><span class="enumeration_section">4.3.1</span>导出队列表数据</h4>
                  <div>
                     <p>队列的导出需要导出底层队列表和相关的字典表。队列表的粒度也可以完成队列的导出。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3__GUID-E4F82982-172B-4E23-B51C-CDC2E65689EE">导出具有多个收件人的队列表</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>对于非分片队列，支持多个收件人的队列表与以下表关联：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>出列<a href="glossary.html#GUID-3F72FEC8-8EA0-4762-8383-D99020876B61"><span class="xrefglossterm">索引组织表</span></a> （IOT）</p>
                           </li>
                           <li>
                              <p>时间管理索引组织表</p>
                           </li>
                           <li>
                              <p>订阅者表</p>
                           </li>
                           <li>
                              <p>历史IOT</p>
                           </li>
                        </ul>
                        <p>分片队列与以下对象相关联：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>一个队列表</p>
                           </li>
                           <li>
                              <p>出列表</p>
                           </li>
                           <li>
                              <p>时间管理表</p>
                           </li>
                           <li>
                              <p>可选的异常队列映射表</p>
                           </li>
                           <li>
                              <p>上表的索引</p>
                           </li>
                           <li>
                              <p>序列</p>
                           </li>
                           <li>
                              <p>规则集和评估上下文</p>
                           </li>
                        </ul>
                        <p>在完整数据库模式，用户模式和表模式导出期间，将自动导出这些表。请参阅<a href="managing-aq.html#GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3__I1005833">导出模式</a> 。
                        </p>
                        <p>由于元数据表包含队列表中某些行的ROWID，因此导入过程会生成有关导入元数据表时过时的ROWID的注释。此消息可以忽略，因为排队系统会自动更正过时的ROWID作为导入操作的一部分。但是，如果在执行导入时遇到另一个问题（例如用完回滚段空间），则应更正问题并重复导入。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3__I1005833">
                        <p class="subhead3" id="GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3__GUID-EC7778DA-0C4A-466F-BFFD-A97A429F329B">导出模式</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>导出以完整数据库模式，用户模式和表模式运行。不支持队列表上的增量导出。</p>
                        <p>在完整数据库模式下，将自动导出队列表，所有相关表，系统级授权以及主要和次要对象授予。</p>
                        <p>在用户模式下，将自动导出队列表，所有相关表和主对象授予。但是，不支持使用<code class="codeph">FROMUSER</code> <code class="codeph">TOUSER</code>子句从一个模式导出到另一个模式的用户级导出。
                        </p>
                        <p>在表模式下，将自动导出队列表，所有相关表和主对象授予。例如，导出非分片多消费者队列表时，会自动导出以下表：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">AQ$</code> _ <span class="italic"><code class="codeph">queue_table</code></span> <code class="codeph">_I</code> （出队物联网）</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table</code></span> <code class="codeph">_T</code> （时间管理物联网）</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_ <span class="codeinlineitalic">queue_table</span> _S</code> （订阅者表）</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table</code></span> <code class="codeph">_H</code> （历史IOT）</p>
                           </li>
                        </ul>
                        <p>对于分片队列，将自动导出以下表：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph"><span class="codeinlineitalic">queue_table</span></code></p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_ <span class="codeinlineitalic">queue_name</span> _L</code> （出列表）</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_ <span class="codeinlineitalic">queue_name</span> _T</code> （时间管理表）</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_ <span class="codeinlineitalic">queue_name</span></code> （异常映射表）</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_ <span class="codeinlineitalic">queue_name</span> _V</code> （评估上下文）</p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="codeinlineitalic">queue_name</span> _R</code> （规则集）</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2573"></a><a id="ADQUE2574"></a><a id="ADQUE2572"></a><div class="props_rev_3"><a id="GUID-77270554-9434-4597-9017-26290CD2356C" name="GUID-77270554-9434-4597-9017-26290CD2356C"></a><h4 id="ADQUE-GUID-77270554-9434-4597-9017-26290CD2356C" class="sect4"><span class="enumeration_section">4.3.2</span>导入队列表数据</h4>
                  <div>
                     <p>与导出队列类似，导入队列需要导入基础队列表和相关字典数据。导入队列表数据后，导入实用程序将执行转储文件中的PL / SQL匿名块，以将元数据写入数据字典。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-77270554-9434-4597-9017-26290CD2356C__GUID-2B04CDCD-2AD8-4380-B21F-1AEE3E7A49D2">导入具有多个收件人的队列表</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>支持多个收件人的非分片队列表与以下表关联：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>出列物联网</p>
                           </li>
                           <li>
                              <p>时间管理物联网</p>
                           </li>
                           <li>
                              <p>订户表</p>
                           </li>
                           <li>
                              <p>历史IOT</p>
                           </li>
                        </ul>
                        <p>分片队列与以下对象相关联：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>一个队列表</p>
                           </li>
                           <li>
                              <p>出列日志表</p>
                           </li>
                           <li>
                              <p>时间管理表</p>
                           </li>
                           <li>
                              <p>可选的异常队列映射表</p>
                           </li>
                           <li>
                              <p>上表的索引</p>
                           </li>
                           <li>
                              <p>序列</p>
                           </li>
                           <li>
                              <p>规则集和评估上下文</p>
                           </li>
                        </ul>
                        <p>必须将这些对象与队列表本身一起导入。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-77270554-9434-4597-9017-26290CD2356C__GUID-CECAC7EA-C177-48E4-B9C9-050F249895E0">导入IGNORE参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>您不能将队列数据导入已包含数据的队列表中。导入队列表时，导入实用程序的<code class="codeph">IGNORE</code>参数必须始终设置为<code class="codeph">NO</code> 。如果<code class="codeph">IGNORE</code>参数设置为<code class="codeph">YES</code> ，并且已存在的队列表与转储文件中的表定义兼容，则会将这些行从转储文件加载到现有表中。同时，旧的队列表定义将丢失并重新创建。导入之前的队列表定义将丢失，并且重复行将显示在队列表中。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2575"></a><div class="props_rev_3"><a id="GUID-72446BCA-AA6F-49F2-92AD-9B5C40CB4258" name="GUID-72446BCA-AA6F-49F2-92AD-9B5C40CB4258"></a><h4 id="ADQUE-GUID-72446BCA-AA6F-49F2-92AD-9B5C40CB4258" class="sect4"><span class="enumeration_section">4.3.3</span>数据泵导出和导入</h4>
                  <div>
                     <p>队列表支持数据泵替换和跳过模式。</p>
                     <p>在替换模式中，将删除现有队列表，并将其替换为导出转储文件中的新队列表。在跳过模式下，不会导入已存在的队列表。</p>
                     <p>队列表不支持truncate和append模式。在这种情况下的行为与替换模式相同。</p>
                     <div class="infoboxnotealso" id="GUID-72446BCA-AA6F-49F2-92AD-9B5C40CB4258__GUID-69265E53-0F03-41B2-AE6D-0734C710EA39">
                        <p class="notep1">也可以看看：</p>
                        <p>有关数据泵导出和数据泵导入的详细信息，请参见<a href="../sutil/oracle-data-pump-export-utility.html#SUTIL200" target="_blank"><span class="italic">Oracle数据库实用程序</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2576"></a><div class="props_rev_3"><a id="GUID-F8529236-38AD-4C3C-ADD9-4AE9E63E5623" name="GUID-F8529236-38AD-4C3C-ADD9-4AE9E63E5623"></a><h3 id="ADQUE-GUID-F8529236-38AD-4C3C-ADD9-4AE9E63E5623" class="sect3"><span class="enumeration_section">4.4</span> Oracle企业管理器对非分片队列的支持</h3>
               <div>
                  <p>Oracle Enterprise Manager支持Oracle Database Advanced Queuing的大多数管理功能。Oracle Database Advanced Queuing功能位于Enterprise Manager控制台导航树中的Distributed node下。</p>
                  <p>Oracle Enterprise Manager提供的功能包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用队列作为架构管理器的一部分来查看属性</p>
                     </li>
                     <li>
                        <p>创建，启动，停止和删除队列</p>
                     </li>
                     <li>
                        <p>调度和非调度传播</p>
                     </li>
                     <li>
                        <p>添加和删除订阅者</p>
                     </li>
                     <li>
                        <p>查看数据库中所有队列的传播计划</p>
                     </li>
                     <li>
                        <p>查看数据库中所有队列的错误</p>
                     </li>
                     <li>
                        <p>查看消息队列</p>
                     </li>
                     <li>
                        <p>授予和撤销权限</p>
                     </li>
                     <li>
                        <p>创建，修改或删除转换</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADQUE2577"></a><div class="props_rev_3"><a id="GUID-2554562B-EE13-4278-B21D-C3B6483703AA" name="GUID-2554562B-EE13-4278-B21D-C3B6483703AA"></a><h3 id="ADQUE-GUID-2554562B-EE13-4278-B21D-C3B6483703AA" class="sect3"><span class="enumeration_section">4.5</span>在XA中使用Oracle数据库高级队列</h3>
               <div>
                  <p>如果要使用Oracle Database Advanced Queuing OCI接口，则必须在<code class="codeph">xa_open</code>字符串中指定“ <code class="codeph">Objects=T</code> ”。这会强制XA在“对象”模式下初始化客户端缓存。如果您计划通过OCI或Pro * C中的PL / SQL包装程序使用Oracle数据库高级队列，则不需要执行此操作。</p>
                  <p>Pro *文档中的<a href="glossary.html#GUID-3AE070CE-846B-4B78-B717-7954B35DB411"><span class="xrefglossterm">大对象</span></a> （LOB）内存管理概念与Oracle数据库高级队列原始消息无关，因为Oracle数据库高级队列提供了简单的RAW缓冲区抽象（尽管它们存储为LOB）。
                  </p>
                  <p>使用Oracle数据库高级队列导航选项时，如果要继续在服务之间出列（例如<code class="codeph">xa_start</code>和<code class="codeph">xa_end</code>边界），则必须使用<code class="codeph">FIRST_MESSAGE</code>选项重置出队位置。这是因为XA在<code class="codeph">xa_end</code>之后取消了游标提取状态。如果您不重置，则会收到一条错误消息，指出导航未按顺序使用（ORA-25237）。
                  </p>
                  <div class="infoboxnotealso" id="GUID-2554562B-EE13-4278-B21D-C3B6483703AA__GUID-4880341E-A1BA-48BB-BC73-FEE869190E4A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>“ <a href="../adfns/xa.html#ADFNS017" target="_blank"><span class="italic">Oracle数据库开发指南</span></a> ”中的“使用Oracle XA的事务监视器”以获取有关XA的更多信息</p>
                        </li>
                        <li>
                           <p><a href="../lnpcc/about-LOBs.html#LNPCC016" target="_blank"><span class="italic">Pro * C / C ++程序员指南中的</span></a> “大对象（LOB）”</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADQUE2578"></a><div class="props_rev_3"><a id="GUID-F3CA5F56-43DF-4F38-8513-EE3335ADEB07" name="GUID-F3CA5F56-43DF-4F38-8513-EE3335ADEB07"></a><h3 id="ADQUE-GUID-F3CA5F56-43DF-4F38-8513-EE3335ADEB07" class="sect3"><span class="enumeration_section">4.6</span>队列管理的限制</h3>
               <div>
                  <p>这些主题讨论了对队列管理的限制。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="managing-aq.html#GUID-6C2753DA-2307-4326-BEC7-A1A07462638C" title="每个队列不能超过1,000个本地订户。">认购</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-080F72CB-E6FF-4E81-8DB8-FE4FD6E5CD72" title="Oracle数据库高级队列不支持对队列表或关联的索引组织表（IOT）执行数据操作语言（DML）操作（如果有）。">队列表或关联的IOT上不支持DML</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-6EC1A29B-9642-4074-9BF4-A4828D8DDBFB" title="Oracle数据库高级队列不支持从有效负载中具有REF属性的对象队列进行传播。">具有REF有效载荷属性的对象队列的传播</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE" title="您无法使用本身不包含在对象中的VARRAY构造消息有效内容。">消息有效负载中的集合类型</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-D8177B1F-B02B-4D8D-AB92-6B825770305A" title="没有Oracle数据库高级队列PL / SQL调用解析队列和队列表上的同义词。">队列表和队列的同义词</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-1FC8DA42-CA54-4028-87A1-D920873C7B50" title="如果已在对象类型上创建了同义词，则无法在DBMS_AQADM.CREATE_QUEUE_TABLE中使用它们。错误ORA-24015结果。">对象类型的同义词</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-A770CC40-3079-4819-B4EA-6B394A1556C8" title="Oracle Database Advanced Queuing目前不支持表空间时间点恢复。">表空间时间点恢复</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-4BE2E00C-5F85-45D8-B590-97CD27CA41D2" title="通过使用Oracle数据库高级队列队列表指定安全策略，可以将Oracle数据库高级队列与虚拟专用数据库一起使用。">虚拟专用数据库</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-F3CA5F56-43DF-4F38-8513-EE3335ADEB07__GUID-E7CD0863-00FF-469A-8F2D-9AD78C6C9E6E">
                     <p class="notep1">注意：</p>
                     <p>如果数据库兼容性为10.0，则支持混合大小写（大写和小写一起）队列名称，队列表名称和订户名称，但名称必须用双引号括起来。所以<code class="codeph">abc.efg</code>表示模式是<code class="codeph">ABC</code> ，名称是<code class="codeph">EFG</code> ，但是<code class="codeph">"abc"."efg"</code>表示模式是<code class="codeph">abc</code> ，名称是<code class="codeph">efg</code> 。
                     </p>
                  </div>
               </div><a id="ADQUE2579"></a><div class="props_rev_3"><a id="GUID-6C2753DA-2307-4326-BEC7-A1A07462638C" name="GUID-6C2753DA-2307-4326-BEC7-A1A07462638C"></a><h4 id="ADQUE-GUID-6C2753DA-2307-4326-BEC7-A1A07462638C" class="sect4"><span class="enumeration_section">4.6.1</span>订户</h4>
                  <div>
                     <p>每个队列不能超过1,000个本地订户。</p>
                     <p>此外，每个远程目标数据库仅允许32个远程订户。</p>
                  </div>
               </div><a id="ADQUE2580"></a><div class="props_rev_3"><a id="GUID-080F72CB-E6FF-4E81-8DB8-FE4FD6E5CD72" name="GUID-080F72CB-E6FF-4E81-8DB8-FE4FD6E5CD72"></a><h4 id="ADQUE-GUID-080F72CB-E6FF-4E81-8DB8-FE4FD6E5CD72" class="sect4"><span class="enumeration_section">4.6.2队</span>列表或关联的IOT上不支持DML</h4>
                  <div>
                     <p>Oracle数据库高级队列不支持对队列表或关联的索引组织表（IOT）执行数据操作语言（DML）操作（如果有）。</p>
                     <p>唯一受支持的修改队列表的方法是通过提供的API。如果对它们执行<a href="glossary.html#GUID-940A74C4-9569-478E-B320-E968214F47F6"><span class="xrefglossterm">数据操作语言</span></a> （DML）操作，则队列表和IOT可能变得不一致并因此被破坏。
                     </p>
                  </div>
               </div><a id="ADQUE2581"></a><div class="props_rev_3"><a id="GUID-6EC1A29B-9642-4074-9BF4-A4828D8DDBFB" name="GUID-6EC1A29B-9642-4074-9BF4-A4828D8DDBFB"></a><h4 id="ADQUE-GUID-6EC1A29B-9642-4074-9BF4-A4828D8DDBFB" class="sect4"><span class="enumeration_section">4.6.3</span>具有REF有效载荷属性的对象队列的传播</h4>
                  <div>
                     <p>Oracle数据库高级队列不支持从有效负载中具有REF属性的对象队列进行传播。</p>
                  </div>
               </div><a id="ADQUE2583"></a><a id="ADQUE2582"></a><div class="props_rev_3"><a id="GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE" name="GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE"></a><h4 id="ADQUE-GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE" class="sect4"><span class="enumeration_section">4.6.4</span>消息有效负载中的集合类型</h4>
                  <div>
                     <p>您无法使用本身不包含在对象中的VARRAY构造消息有效内容。</p>
                     <p>您当前也无法使用NESTED表作为<a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">消息</span></a>有效内容中的嵌入对象。但是，您可以创建包含一个或多个<a href="glossary.html#GUID-008A6C9F-3E4D-48C1-8257-68A89CEAD827"><span class="xrefglossterm">VARRAY</span></a>的<a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">对象类型</span></a> ，并创建基于此对象类型的队列表，如<a href="managing-aq.html#GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE__i1005988">例4-1</a>所示。
                     </p>
                     <div class="example" id="GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE__i1005988">
                        <p class="titleinexample">示例4-1创建包含VARRAY的对象</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE number_varray AS VARRAY（32）OF NUMBER; CREATE TYPE embedded_varray AS OBJECT（col1 number_varray）; EXECUTE DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'QT'，queue_payload_type =&gt;'embedded_varray'）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2584"></a><div class="props_rev_3"><a id="GUID-D8177B1F-B02B-4D8D-AB92-6B825770305A" name="GUID-D8177B1F-B02B-4D8D-AB92-6B825770305A"></a><h4 id="ADQUE-GUID-D8177B1F-B02B-4D8D-AB92-6B825770305A" class="sect4"><span class="enumeration_section">4.6.5队</span>列表和队列的同义词</h4>
                  <div>
                     <p>没有Oracle数据库高级队列PL / SQL调用解析队列和队列表上的同义词。</p>
                     <p>虽然您可以创建同义词，但不应将它们应用于Oracle Database Advanced Queuing界面。</p>
                  </div>
               </div><a id="ADQUE2585"></a><div class="props_rev_3"><a id="GUID-1FC8DA42-CA54-4028-87A1-D920873C7B50" name="GUID-1FC8DA42-CA54-4028-87A1-D920873C7B50"></a><h4 id="ADQUE-GUID-1FC8DA42-CA54-4028-87A1-D920873C7B50" class="sect4"><span class="enumeration_section">4.6.6</span>对象类型的同义词</h4>
                  <div>
                     <p>如果已在对象类型上创建了同义词，则无法在<code class="codeph">DBMS_AQADM.CREATE_QUEUE_TABLE</code>使用它们。错误ORA-24015结果。
                     </p>
                  </div>
               </div><a id="ADQUE2586"></a><div class="props_rev_3"><a id="GUID-A770CC40-3079-4819-B4EA-6B394A1556C8" name="GUID-A770CC40-3079-4819-B4EA-6B394A1556C8"></a><h4 id="ADQUE-GUID-A770CC40-3079-4819-B4EA-6B394A1556C8" class="sect4"><span class="enumeration_section">4.6.7</span>表空间时间点恢复</h4>
                  <div>
                     <p>Oracle Database Advanced Queuing目前不支持表空间时间点恢复。</p>
                     <p>在表空间中创建队列表会禁用该特定表空间以进行时间点恢复。Oracle数据库高级队列确实支持定期时间点恢复。</p>
                  </div>
               </div><a id="ADQUE2587"></a><div class="props_rev_3"><a id="GUID-4BE2E00C-5F85-45D8-B590-97CD27CA41D2" name="GUID-4BE2E00C-5F85-45D8-B590-97CD27CA41D2"></a><h4 id="ADQUE-GUID-4BE2E00C-5F85-45D8-B590-97CD27CA41D2" class="sect4"><span class="enumeration_section">4.6.8</span>虚拟专用数据库</h4>
                  <div>
                     <p>通过使用Oracle数据库高级队列队列表指定安全策略，可以将Oracle数据库高级队列与虚拟专用数据库一起使用。</p>
                     <p>在出列时，使用出列条件（ <code class="codeph">deq_cond</code> ）或要应用的策略的相关标识符。您可以使用“1 = 1”作为出队条件。如果不使用出列条件或相关ID，则出列会导致错误。
                     </p>
                     <div class="infoboxnote" id="GUID-4BE2E00C-5F85-45D8-B590-97CD27CA41D2__GUID-8CF8C43F-523E-43B6-9D7B-5501F62EF170">
                        <p class="notep1">注意：</p>
                        <p>当使用出列条件或相关标识符时，出列的消息的顺序是不确定的，并且不遵守队列的排序顺序。</p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2588"></a><div class="props_rev_3"><a id="GUID-5F4A3998-B93F-44FD-92C1-A6E4ED85FA95" name="GUID-5F4A3998-B93F-44FD-92C1-A6E4ED85FA95"></a><h3 id="ADQUE-GUID-5F4A3998-B93F-44FD-92C1-A6E4ED85FA95" class="sect3"><span class="enumeration_section">4.7</span>管理传播</h3>
               <div>
                  <p>这些主题讨论管理Oracle数据库高级队列传播。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="managing-aq.html#GUID-BC8E9FF9-8FBA-4FF3-A95F-3AB97F9BF230" title="传播作业由SYS拥有，但传播发生在队列表所有者的安全上下文中。">传播所需的EXECUTE特权</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46" title="支持使用BFILE对象从对象队列进行传播。">来自对象队列的传播</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-D1888DEE-D758-411C-8AFF-EBEF6B704482" title="AQ传播作业由Oracle Scheduler运行。可以通过这些方式安排传播。">优化传播</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-423BCC0B-0D4E-4438-97A8-B475EB2F1248" title="调度算法对处理故障具有强大的支持。这些是阻止消息传播的常见故障。">处理传播失败</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-5F4A3998-B93F-44FD-92C1-A6E4ED85FA95__GUID-8B2CF41F-B5BD-42B8-804F-844569A5EC88">
                     <p class="notep1">注意：</p>
                     <p>为了使传播正常工作，永远不应该停止或删除队列<code class="codeph">aq$_prop_notify_X</code>永远不应删除表<code class="codeph">aq$_prop_table_X</code> 。
                     </p>
                  </div>
               </div><a id="ADQUE2589"></a><div class="props_rev_3"><a id="GUID-BC8E9FF9-8FBA-4FF3-A95F-3AB97F9BF230" name="GUID-BC8E9FF9-8FBA-4FF3-A95F-3AB97F9BF230"></a><h4 id="ADQUE-GUID-BC8E9FF9-8FBA-4FF3-A95F-3AB97F9BF230" class="sect4"><span class="enumeration_section">4.7.1</span>传播所需的EXECUTE特权</h4>
                  <div>
                     <p>传播作业由<code class="codeph">SYS</code>拥有，但传播发生在队列表所有者的安全上下文中。
                     </p>
                     <p>先前的传播作业由用户调度传播所拥有，并且传播发生在设置传播调度的用户的安全上下文中。必须在<code class="codeph">DBMS_AQADM</code>程序包上授予队列表所有者<code class="codeph">EXECUTE</code>特权。否则，Oracle数据库快照进程不会传播并生成未定义错误标识符<code class="codeph">SYS.DBMS_AQADM</code>跟踪文件。队列表所有者拥有的专用数据库链接可用于传播。连接字符串中指定的用户名必须对远程数据库上的<code class="codeph">DBMS_AQ</code>和<code class="codeph">DBMS_AQADM</code>程序包具有<code class="codeph">EXECUTE</code>访问权限。
                     </p>
                  </div>
               </div><a id="ADQUE2590"></a><div class="props_rev_3"><a id="GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46" name="GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46"></a><h4 id="ADQUE-GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46" class="sect4"><span class="enumeration_section">4.7.2</span>对象队列的传播</h4>
                  <div>
                     <p>支持使用<code class="codeph">BFILE</code>对象从对象队列进行传播。
                     </p>
                     <p>为了能够使用<code class="codeph">BFILE</code>对象传播对象队列，源队列所有者必须对与存储<code class="codeph">BFILE</code>的目录对应的目录对象具有读取权限。数据库链接用户必须对与目标数据库中<code class="codeph">BFILE</code>目录对应的目录对象具有写权限。
                     </p>
                     <p>AQ传播不支持非最终类型。不支持在不指定数据库链接的情况下从对象队列传播<code class="codeph">BFILE</code>对象。
                     </p>
                     <div class="infoboxnotealso" id="GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46__GUID-60DDA94C-2998-424A-AEB3-962DAD87C132">
                        <p class="notep1">也可以看看：</p>
                        <p>有关目录对象的更多信息，请参阅<a href="../sqlrf/CREATE-DIRECTORY.html#SQLRF01207" target="_blank"><span class="italic">Oracle Database SQL语言参考中的</span></a> “CREATE DIRECTORY”</p>
                     </div>
                  </div>
               </div><a id="ADQUE2591"></a><div class="props_rev_3"><a id="GUID-D1888DEE-D758-411C-8AFF-EBEF6B704482" name="GUID-D1888DEE-D758-411C-8AFF-EBEF6B704482"></a><h4 id="ADQUE-GUID-D1888DEE-D758-411C-8AFF-EBEF6B704482" class="sect4"><span class="enumeration_section">4.7.3</span>优化传播</h4>
                  <div>
                     <p>AQ传播作业由Oracle Scheduler运行。可以通过这些方式安排传播。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>传播永久运行或指定持续时间的专用计划。此模式提供最低的传播延迟。</p>
                        </li>
                        <li>
                           <p>传播在指定时间间隔内定期运行的定期计划。当传播可以以批处理模式运行时，可以使用此方法。</p>
                        </li>
                        <li>
                           <p>基于事件的系统，其中当存在要传播的消息时开始传播。此模式可以更有效地利用可用资源，同时仍能提供快速响应时间。</p>
                        </li>
                     </ul>
                     <p>管理员可以选择最符合应用程序性能要求的计划。</p>
                     <p>Oracle Scheduler将为传播计划启动所需数量的作业队列进程。由于调度程序优化了吞吐量，因此如果系统负载很重，则可能无法运行某些传播作业。资源管理器可用于更好地控制调度决策。特别地，将传播作业与不同资源组相关联可以允许调度的公平性，这在重负载情况下可能是重要的。</p>
                     <p><code class="codeph">In setting the number of JOB_QUEUE_PROCESSES,</code> DBA应该知道此数字由必须传播消息的队列数以及必须传播消息的目标（而不是队列）数决定。
                     </p>
                     <p>调度算法处理传播。该算法优化了可用的作业队列进程，并最大限度地减少了消息在排入源队列后显示在目的地所需的时间，从而提供了近<a href="glossary.html#GUID-C6C462A2-D123-4FBF-BDA8-3C47683A263A"><span class="xrefglossterm">OLTP</span></a>操作。该算法可以处理无限数量的调度和各种类型的故障。传播尝试最佳地使用可用作业队列进程时，要启动的作业队列进程数也取决于与传播无关的作业的存在，例如复制作业。因此，使用以下指南从调度算法中获得最佳结果非常重要。
                     </p>
                     <p>调度算法使用作业队列过程如下（对于此讨论，活动调度是具有有效当前窗口的调度）：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果活动计划的数量少于作业队列进程数量的一半，则获取的作业队列进程数对应于活动计划的数量。</p>
                        </li>
                        <li>
                           <p>如果活动计划的数量超过作业队列进程数量的一半，则在获取作业队列进程数量的一半之后，将多个活动计划分配给所获取的作业队列进程。</p>
                        </li>
                        <li>
                           <p>如果系统过载（所有计划都忙于传播），则根据可用性，可以获得比作业队列进程总数少一个的其他作业队列进程。</p>
                        </li>
                        <li>
                           <p>如果进程处理的活动调度都没有传播消息，则释放该作业队列进程。</p>
                        </li>
                        <li>
                           <p>该算法通过将时间表从高负载进程转移到轻负载进程来执行自动负载平衡，从而不会过度加载进程。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2592"></a><div class="props_rev_3"><a id="GUID-423BCC0B-0D4E-4438-97A8-B475EB2F1248" name="GUID-423BCC0B-0D4E-4438-97A8-B475EB2F1248"></a><h4 id="ADQUE-GUID-423BCC0B-0D4E-4438-97A8-B475EB2F1248" class="sect4"><span class="enumeration_section">4.7.4</span>处理传播失败</h4>
                  <div>
                     <p>调度算法对处理故障具有强大的支持。这些是阻止消息传播的常见故障。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库链接失败</p>
                        </li>
                        <li>
                           <p>远程数据库不可用</p>
                        </li>
                        <li>
                           <p>远程队列不存在</p>
                        </li>
                        <li>
                           <p>远程队列未启动</p>
                        </li>
                        <li>
                           <p>尝试将消息排入远程队列时发生安全性违规</p>
                        </li>
                     </ul>
                     <p>在所有这些情况下， <code class="codeph">DBA_QUEUE_SCHEDULES</code>视图中会报告相应的错误消息。
                     </p>
                     <p>当调度中发生错误时，在作为失败次数的函数的重试周期之后再次尝试该调度中的消息传播。重试超过系统定义的最大值后，将禁用计划。</p>
                     <p>如果修复了导致错误的问题并启用了计划，则指示上一个错误日期，时间和消息的错误字段将继续显示错误信息。仅当在该计划中成功传播消息时，才会重置这些字段。</p>
                     <div class="infoboxnotealso" id="GUID-423BCC0B-0D4E-4438-97A8-B475EB2F1248__GUID-726803C3-8FD2-4231-8E16-8F5C8F84B320">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="aq-troubleshooting.html#GUID-AB1C926E-1C7C-41A0-A16A-FC5615E81234" title="这些主题描述了如何对Oracle Database Advanced Queuing（AQ）进行故障排除。">Oracle Database Advanced Queuing故障排除</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
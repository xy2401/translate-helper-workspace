<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>备份和恢复简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery User&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96241-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="part-overview-backup-recovery.html" title="Previous" type="text/html"></link>
      <link rel="next" href="getting-started-rman.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="BRADV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="part-overview-backup-recovery.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="getting-started-rman.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复用户指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-overview-backup-recovery.html" property="item" typeof="WebPage"><span property="name">备份和恢复概述</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">备份和恢复简介</li>
            </ol>
            <a id="GUID-9997EF87-B293-44D4-92F3-DD938E79170D" name="GUID-9997EF87-B293-44D4-92F3-DD938E79170D"></a><a id="BRADV8001"></a>
            
            <h2 id="BRADV-GUID-9997EF87-B293-44D4-92F3-DD938E79170D" class="sect2"><span class="enumeration_chapter">1</span>备份和恢复简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍Oracle数据库<a id="d9547e70" class="indexterm-anchor"></a>备份和恢复，并总结了Oracle解决方案。本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="introduction-backup-recovery.html#GUID-A0D892CD-1EC2-4932-882B-7A46BC87F353" title="作为备份管理员，您的主要职责是设计，实施和管理备份和恢复策略。">备份和恢复的目的</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-backup-recovery.html#GUID-014F80B5-9A80-4CDB-B282-3FD0C3610FC9" title="Oracle为执行备份和恢复提供了多种解决方案。">Oracle备份和恢复解决方案</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-backup-recovery.html#GUID-993ACA58-F6BA-4FBF-85D0-ED63D522551E" title="Oracle闪回技术提供了一系列功能，可以补充您的物理备份和恢复策略。">关于Oracle闪回技术</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-backup-recovery.html#GUID-41F4209C-293C-4CEF-AEF7-BA723F96FA8A" title="Data Recovery Advisor为Oracle备份和恢复解决方案提供单一入口点。它是一种工具，可自动诊断持久性数据故障，提供适当的修复选项，并根据您的要求执行修复。">关于Data Recovery Advisor</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-backup-recovery.html#GUID-84BE3AC7-E2E4-4897-A3D8-D4105D033E9C" title="还可以使用Oracle Enterprise Manager Cloud Control访问RMAN功能。">RMAN和Oracle Enterprise Manager云控制</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-backup-recovery.html#GUID-25997EE3-A3E0-4ED2-AA63-3B4067F3BDF3" title="零数据丢失恢复设备（恢复设备）是一种云规模的工程系统，旨在保护企业中的所有Oracle数据库。通过将大多数Oracle数据库备份和还原处理卸载到集中式恢复设备，它可以显着提高备份的性能和可管理性。">关于零数据丢失恢复设备</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-backup-recovery.html#GUID-9736C638-E029-4C33-BB41-F4E638C74166" title="备份和恢复文档路线图分为两个主要路径：RMAN和用户管理的备份和恢复。可选路径显示为拆分，然后重新连接每个主路径。">备份和恢复文档路线图</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-9997EF87-B293-44D4-92F3-DD938E79170D__GUID-6896EE54-8171-43B3-87C4-9915BE0FDD94">
                  <p class="notep1">注意：</p>
                  <p>要立即开始使用Recovery Manager（RMAN），请继续阅读<a href="getting-started-rman.html#GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" title="Recovery Manager（RMAN）是一个Oracle数据库客户端，可在您的数据库上执行备份和恢复任务，并自动管理备份策略。它极大地简化了备份，还原和恢复数据库文件的过程。在使用RMAN执行任何操作之前，必须连接到目标数据库。为每个目标数据库预配置了RMAN备份和恢复环境。配置是持久的，适用于此目标数据库上的所有后续操作，即使您退出并重新启动RMAN。使用BACKUP命令备份文件。RMAN将数据备份到配置的默认设备以获取所请求的备份类型。BACKUP命令包括一系列控制备份输出的选项，参数和子句。如果数据库在ARCHIVELOG模式下运行，则可以在数据库打开时备份数据库。如果数据库在NOARCHIVELOG模式下运行，则唯一有效的数据库备份是一致的备份。增量备份捕获在先前增量备份之后对数据库进行的块级更改。通过逐步更新的备份，您可以实施有效的增量备份永久备份策略。RMAN验证检查备份以确定是否可以还原。验证还会检查损坏的块和丢失的文件。RMAN支持使用命令文件来管理重复性任务，例如每周备份。RMAN可以使用存储在RMAN存储库中的信息来生成有关备份活动的报告。LIST BACKUP和LIST COPY命令显示有关存储库中列出的备份和数据文件副本的信息。REPORT命令执行比LIST命令更复杂的报告分析。RMAN存储库元数据始终存储在目标数据库的控制文件中。管理备份时，RMAN维护命令使用此元数据。使用CROSSCHECK命令将RMAN备份和副本的逻辑记录与存储介质上的文件同步。DELETE命令从磁盘和磁带中删除RMAN备份和副本，在控制文件存储库中将文件状态更新为DELETED，并从恢复目录中删除记录（如果使用目录）。Data Recovery Advisor是一个Oracle数据库工具，它提供了一个诊断持久性数据故障的基础架构，向用户提供修复选项，并根据用户的请求执行修复。失败是Health Monitor检测到的持久性数据损坏。示例包括物理和逻辑数据块损坏和丢失的数据文件。使用RMAN REPAIR FAILURE命令修复检测到的故障。您可以使用Oracle闪回数据库将整个数据库回滚到过去的时间。与介质恢复不同，您无需还原数据文件以将数据库返回到过去状态。使用RESTORE和RECOVER命令进行RMAN还原和恢复物理数据库文件。要恢复数据库，因为介质故障会损坏数据库文件，请首先确保您具有必要的备份。使用RESTORE DATABASE和RECOVER DATABASE命令恢复整个数据库。在数据库打开时，在各个表空间上使用RESTORE TABLESPACE和RECOVER TABLESPACE命令。在这种情况下，您必须使需要恢复的表空间脱机，恢复然后恢复表空间，并使恢复的表空间联机。RMAN可以恢复单个损坏的数据文件块。">RMAN入门</a> 。</p>
               </div>
            </div><a id="BRADV89334"></a><div class="props_rev_3"><a id="GUID-A0D892CD-1EC2-4932-882B-7A46BC87F353" name="GUID-A0D892CD-1EC2-4932-882B-7A46BC87F353"></a><h3 id="BRADV-GUID-A0D892CD-1EC2-4932-882B-7A46BC87F353" class="sect3"><span class="enumeration_section">1.1</span>备份和恢复的目的</h3>
               <div>
                  <p>作为备份管理员，您的主要职责是设计，实施和管理备份和恢复策略。</p>
                  <p>通常， <a href="glossary.html#GUID-7AE6D8EC-BF6C-4BE3-8A24-7137F12EBE65"><span class="xrefglossterm">备份和恢复</span></a>策略的目的是保护数据库免受数据丢失，并在数据丢失后重建数据库。通常，备份管理任务包括以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>规划和测试对各种故障的响应</p>
                     </li>
                     <li>
                        <p>配置数据库环境以进行备份和恢复</p>
                     </li>
                     <li>
                        <p>设置备份计划</p>
                     </li>
                     <li>
                        <p>监视备份和恢复环境</p>
                     </li>
                     <li>
                        <p>排除备份问题</p>
                     </li>
                     <li>
                        <p>如果需要，可以从数据丢失中恢复</p>
                     </li>
                  </ul>
                  <p>作为备份管理员，您可能还会被要求执行与备份和恢复相关的其他职责：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>数据存档，涉及为长期存储创建数据库副本</p>
                     </li>
                     <li>
                        <p>数据传输，涉及将数据从一个数据库或一个主机移动到另一个主机</p>
                     </li>
                  </ul>
                  <p>本手册的目的是解释如何执行上述任务。</p>
               </div><a id="BRADV89335"></a><div class="props_rev_3"><a id="GUID-7D5CF571-0B7A-46D7-B9DC-CD15F3A4C34F" name="GUID-7D5CF571-0B7A-46D7-B9DC-CD15F3A4C34F"></a><h4 id="BRADV-GUID-7D5CF571-0B7A-46D7-B9DC-CD15F3A4C34F" class="sect4"><span class="enumeration_section">1.1.1</span>关于数据保护</h4>
                  <div>
                     <p>作为备份管理员，您的主要工作是制作和监视数据保护备份。</p>
                     <p><a href="glossary.html#GUID-C4F923AA-852D-4FAD-9F90-568496C1021E"><span class="xrefglossterm">备份</span></a>是可用于重建数据的数据库数据的副本。备份可以是<a href="glossary.html#GUID-83612739-7869-4B65-B779-5C0EC11256E1"><span class="xrefglossterm">物理</span></a>备份，也可以是<a href="glossary.html#GUID-CB2A0AE1-8864-48BD-92FD-40CD9521CA2A"><span class="xrefglossterm">逻辑备份</span></a> 。
                     </p>
                     <p>物理备份是用于存储和恢复数据库的物理文件的副本。这些文件包括数据文件，控制文件和归档重做日志。最终，每个物理备份都是将数据库信息存储到另一个位置的文件副本，无论是在磁盘上还是在磁带等脱机存储介质上。</p>
                     <p>逻辑备份包含逻辑数据，如表和存储过程。您可以使用Oracle Data Pump将逻辑数据导出到二进制文件，以后可以将其导入数据库。Data Pump命令行客户端<code class="codeph">expdp</code>和<code class="codeph">impdp</code>使用<code class="codeph">DBMS_DATAPUMP</code>和<code class="codeph">DBMS_METADATA</code> PL / SQL包。
                     </p>
                     <p>物理备份是任何声音备份和恢复策略的基础。在许多情况下，逻辑备份是物理备份的有用补充，但如果没有物理备份，则不足以防止数据丢失。</p>
                     <p>除非另有说明，否则备份和恢复文档中使用的术语“ <span class="bold">备份”</span>指的是物理备份。备份数据库是进行物理备份的行为。备份和恢复文档集中的重点几乎完全在物理备份上。
                     </p>
                     <p>本手册的大部分内容侧重于基于RMAN的备份和恢复。最值得注意的是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>增量备份</p>
                           <p><a href="glossary.html#GUID-31E3AC05-E73E-4E44-A9AA-915988B9A6A3"><span class="xrefglossterm">增量备份</span></a>仅存储自上次备份以来更改的块。因此，它们提供更紧凑的备份和更快的恢复，从而减少了在<a href="glossary.html#GUID-01B3A956-DA97-4B47-9600-FA5549B7E868"><span class="xrefglossterm">数据文件介质恢复</span></a>期间应用重做的需要。如果启用<a href="glossary.html#GUID-C80ACD57-9170-4FA5-A61F-81A05E77A1A4"><span class="xrefglossterm">块更改跟踪</span></a> ，则可以通过避免对每个输入数据文件进行完全扫描来提高性能。您可以使用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><code class="codeph">BACKUP INCREMENTAL</code></a>命令执行增量备份。
                           </p>
                        </li>
                        <li>
                           <p>阻止媒体恢复</p>
                           <p>您只需使用少量损坏的数据块即可修复数据文件，而无需使其脱机或从备份中恢复。您可以使用<a href="../rcmrf/RECOVER.html#RCMRF140" target="_blank"><code class="codeph">RECOVER BLOCK</code></a>命令执行<a href="glossary.html#GUID-923A509A-1C36-4EA4-91C8-6E4F372722C0"><span class="xrefglossterm">块介质恢复</span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>二进制压缩</p>
                           <p>集成到Oracle数据库中的<a href="glossary.html#GUID-90E07DCF-D038-4770-8A1A-06AF137C3762"><span class="xrefglossterm">二进制压缩</span></a>机制减少了备份的大小。
                           </p>
                        </li>
                        <li>
                           <p>加密备份</p>
                           <p>RMAN使用集成到Oracle数据库中的<a href="glossary.html#GUID-65A13E9F-7391-4A6A-8379-B2EA64D0EA9E"><span class="xrefglossterm">备份加密</span></a>功能以加密格式存储备份集。要在磁盘上创建加密备份，数据库必须使用高级安全性选项。要直接在磁带上创建加密备份，RMAN必须使用Oracle Secure Backup SBT界面，但不需要高级安全选项。
                           </p>
                        </li>
                        <li>
                           <p>自动数据库复制</p>
                           <p>轻松创建数据库副本，支持各种存储配置，包括ASM数据库之间的直接复制。</p>
                        </li>
                        <li>
                           <p>跨平台数据转换</p>
                        </li>
                     </ul>
                     <p>无论是使用RMAN还是用户管理的方法，都可以使用Data Pump Export实用程序对模式对象进行逻辑备份来补充物理备份。您可以稍后使用数据泵导入在还原和恢复后重新创建数据。逻辑备份大多超出了备份和恢复文档的范围。</p>
                     <div class="infoboxnotealso" id="GUID-7D5CF571-0B7A-46D7-B9DC-CD15F3A4C34F__GUID-A8F13923-2C2D-404D-BC69-2D519B2AC167">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="backing-up-database.html#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="使用BACKUP命令创建RMAN备份。RMAN备份的主要目的是保护您的数据。如果发生介质故障或灾难，则可以还原备份并恢复丢失的更改。您可以使用RMAN客户端中的BACKUP命令备份全部或部分数据库。您可以为BACKUP命令提供参数以覆盖默认备份选项。BACKUP命令采用DEVICE TYPE子句，指定是备份到磁盘还是磁带设备。RMAN可以在磁盘上创建备份作为映像副本或备份集。RMAN提供了一系列选项来命名BACKUP命令生成的文件。备份到磁盘时，您可以指定一种格式以将备份分布在多个驱动器上以提高性能。RMAN将一个称为标记的字符串附加到它创建的每个备份上，作为识别备份的一种方式。您可以接受默认标记，也可以使用BACKUP命令的TAG参数指定自己的标记。用户指定的标记是指示不同类别的备份或副本的用途或用法的有用方法。将TAG参数与BACKUP命令一起使用可指定备份集和映像副本的标记。创建备份集时，可以通过在BACKUP命令中包含AS COMPRESSED BACKUPSET选项，使用RMAN支持对备份集进行二进制压缩。通过多节备份，可以将大型数据文件划分为多个部分，这些部分可以跨多个通道并行备份。这提供了更快的备份性能和更好的恢复时间。在创建映像副本时，RMAN使用多个通道写入文件节。但是，此操作的输出是每个数据文件的一个副本。您可以在装入或打开数据库的情况下执行整个数据库备份。您可以使用BACKUP TABLESPACE命令备份一个或多个表空间，或使用BACKUP DATAFILE命令备份一个或多个数据文件。您可以在装入或打开数据库时备份控制文件。RMAN使用快照控制文件来确保读取一致的版本。控制文件的手动备份与控制文件自动备份不同。在备份BACKUP命令中指定的文件后，RMAN会进行控制文件自动备份。要进行手动备份，可以在备份其他文件时指定INCLUDE CURRENT CONTROLFILE或指定BACKUP CURRENT CONTROLFILE。在某些情况下，RMAN会自动备份当前服务器参数文件。BACKUP SPFILE命令显式备份参数文件。备份的服务器参数文件是实例当前使用的文件。只有在数据库关闭且处于一致状态时，才能以NOARCHIVELOG模式备份数据库。预打印备份确保在将非CDB作为PDB插入CDB后可以使用RMAN备份。使用BACKUP命令备份多租户容器数据库（CDB）和可插拔数据库（PDB）。RMAN和Oracle Enterprise Manager Cloud Control为多租户环境中的备份和恢复提供全面支持。备份整个多租户容器数据库（CDB）类似于备份非CDB。备份整个CDB时，RMAN会备份根，所有可插拔数据库（PDB）和归档重做日志。您可以使用RMAN仅备份根。由于根包含整个CDB的关键元数据，因此Oracle建议您定期备份根或备份整个CDB。Oracle Enterprise Manager云控制（云控制）可用于备份根。RMAN允许您使用BACKUP命令备份CDB中的一个或多个PDB。迁移PDB并将其插入到不同的目标CDB后，PDB的预打印备份可用于执行还原和恢复操作.Oracle Enterprise Manager云控制（云控制）可用于执行可插拔数据库（PDB）的备份。由于不同PDB中的表空间可以具有相同的名称，因此为了消除歧义，您必须直接连接到PDB以备份其一个或多个表空间。此示例创建CDB cdb_prod中包含的PDB my_pdb的预包装备份。CDB使用共享撤消，并在读写模式下打开。RMAN使您可以使用BACKUP命令在应用程序根，一个或多个应用程序PDB和应用程序容器上执行备份操作。RMAN可以备份应用程序容器，应用程序PDB和应用程序根目录。使用RMAN BACKUP命令备份应用程序根目录。使用BACKUP命令备份应用程序容器，该容器由应用程序根目录和属于应用程序根目录的所有应用程序PDB组成。BACKUP命令用于备份一个或多个应用程序PDB。使用BACKUP命令备份稀疏数据库。RMAN使您可以使用备份集或映像副本格式中的备份整个数据库的步骤来备份稀疏数据库。您可以使用BACKUP命令备份包含稀疏数据文件或单个稀疏数据文件的一个或多个表空间。RMAN使您可以备份CDB中的一个或多个稀疏PDB。归档重做日志是成功恢复媒体的关键。你应该定期备份它们。RMAN备份的若干功能特定于归档重做日志。例如，您可以使用BACKUP ...删除以将备份到备份集后从磁盘中删除一个或所有归档重做日志副本。即使您的重做日志存档到多个目标并且您使用RMAN备份存档的重做日志，RMAN也只选择一个存档的重做日志文件副本以包含在备份集中。由于具有相同日志序列号的日志相同，因此RMAN不需要包含多个日志副本。自动在线重做日志切换是一项重要的RMAN功能。在CDB中，只有当您以具有SYSDBA或SYSBACKUP权限的普通用户身份连接到根时，才能备份存档的重做日志。要备份存档日志，请使用BACKUP ARCHIVELOG命令。您可以指示RMAN应自动跳过归档重做日志的备份。您可以使用BACKUP ARCHIVELOG命令备份多租户容器数据库（CDB）中的归档重做日志。BACKUP ARCHIVELOG ......DELETE INPUT命令在备份后删除存档的日志文件。此命令消除了手动删除存档重做日志的单独步骤。在CDB中，您可以使用BACKUP ARCHIVELOG备份后删除存档的重做日志...DELETE INPUT命令。增量备份仅复制自指定的先前备份以来已更改的数据文件块。使用BACKUP命令创建增量备份。RMAN增量备份提供多种好处。根据可接受的MTTR（平均恢复时间）选择备份策略。您可以将卷影复制服务（VSS）与Oracle VSS编写器一起使用，以在数据库中制作卷影副本或文件快照。通过逐步更新备份，可以避免对数据文件进行完整映像副本备份的开销，同时还可以最大限度地减少介质恢复数据库所需的时间。例如，如果您运行每日备份脚本，那么您永远不会有超过1天的重做时间来申请媒体恢复。要创建增量备份以用于增量更新的备份策略，请使用BACKUP ...使用TAG形式的BACKUP命令恢复COPY。在实现策略的示例脚本中最好地理解该命令。增量备份的块更改跟踪功能通过记录每个数据文件的更改块来提高备份性能。如果在主数据库或备用数据库上启用了块更改跟踪，则RMAN使用块更改跟踪文件来标识已更改的块以进行增量备份。通过读取这个小位图文件来确定哪些块发生了变化，RMAN避免了必须扫描它备份的数据文件中的每个块。Oracle数据库自动管理更改跟踪文件中的空间，以保留涵盖最近八个备份的块更改数据。达到最多八个位图后，最旧的位图将被跟踪当前更改的位图覆盖。默认情况下，块更改跟踪文件在DB_CREATE_FILE_DEST初始化参数指定的目标中创建为Oracle托管文件。您还可以通过在启用块更改跟踪时指定其名称，将块更改跟踪文件放在您选择的任何位置。块更改跟踪文件的大小与数据库的大小和重做的已启用线程数成比例。您可以在打开或装入数据库时启用块更改跟踪。禁用块更改跟踪时，数据库将从操作系统中删除块更改跟踪文件。您可以查询V $ BLOCK_CHANGE_TRACKING视图以确定是否启用了更改跟踪，如果是，则确定块更改跟踪文件的文件名。要移动更改跟踪文件，请使用ALTER DATABASE RENAME FILE语句。你可以使用BACKUP ......保持创建既包含所有权又不受备份保留策略限制的备份。通过使用带有BACKUP命令的KEEP选项，可以从保留策略中免除备份。通常，您将归档备份到磁带。由于您的数据保护备份最有可能位于一组仍可访问且可回收的磁带上，因此建议为归档备份保留一组磁带。使用带有KEEP选项的BACKUP命令进行归档备份。归档备份的一个目的是创建测试数据库。您可以使用BACKUP BACKUPSET命令备份其他备份作业生成的备份集。您还可以使用BACKUP RECOVERY AREA备份在当前和所有先前快速恢复区域目标中创建的恢复文件。BACKUP BACKUPSET命令在备份集中创建备份片的其他副本，但不创建新的备份集。对于基于冗余的备份保留策略，备份集将计为备份的一个实例。即使存在构成备份集的备份片的多个副本（例如，备份集已从磁盘备份到磁带），此语句也是如此。使用BACKUP BACKUPSET命令将备份集从磁盘复制到磁带。使用BACKUP命令将映像副本备份到磁带。">备份数据库</a></p>
                           </li>
                           <li>
                              <p><a href="part-user-managed-backup-recovery.html#GUID-F74964D7-F1D1-4401-827A-32D3E51BB41D">执行用户管理的备份和恢复</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-2C69DBED-A529-466E-9879-23CB1ED4EA5E" name="GUID-2C69DBED-A529-466E-9879-23CB1ED4EA5E"></a><h4 id="BRADV-GUID-2C69DBED-A529-466E-9879-23CB1ED4EA5E" class="sect4"><span class="enumeration_section">1.1.2</span>关于需要数据库恢复的故障</h4>
                  <div>
                     <p>虽然有几个问题可以阻止Oracle数据库的正常运行或影响数据库I / O操作，但并非所有问题都需要DBA干预。</p>
                     <p>以下问题通常需要DBA干预和数据恢复： <a href="glossary.html#GUID-ABDE7EEF-D4B3-4867-A69C-3B24614AF430"><span class="xrefglossterm">介质故障</span></a> ，用户错误和应用程序错误。其他故障可能需要DBA干预，不会导致数据丢失或需要从备份恢复。例如，您可能需要在实例发生故障后重新启动数据库，或者在语句失败后因完整数据文件而分配更多磁盘空间。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2C69DBED-A529-466E-9879-23CB1ED4EA5E__GUID-AF5693C8-7DE0-4358-8E82-2FCCE0E319F9">媒体失败</p>
                        <p>介质故障是磁盘的物理问题，导致读取或写入运行数据库所需的磁盘文件失败。任何数据库文件都可能容易受到介质故障的影响。介质故障后的相应恢复技术取决于受影响的文件和可用的备份类型。</p>
                        <p>备份和恢复的一个特别重要的方面是开发<a href="glossary.html#GUID-641AA42A-EAFE-449E-99D9-55DCBAE6539D"><span class="xrefglossterm">灾难恢复</span></a>策略以防止灾难性数据丢失，例如，丢失整个数据库主机。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C69DBED-A529-466E-9879-23CB1ED4EA5E__GUID-52F2A7CE-D1DA-4BE4-8AE9-A08135AB3C81">用户错误</p>
                        <p>当由于应用程序逻辑错误或手动错误导致数据库中的数据被错误地更改或删除时，会发生用户错误。用户错误估计是导致数据库停机的最大原因。</p>
                        <p>由于用户错误导致的数据丢失可以是本地化的或广泛的。本地化损坏的一个示例是从employees表中删除错误的人。这种类型的损伤需要手术检测和修复。广泛损坏的一个示例是批处理作业，它删除当月的公司订单。在这种情况下，需要采取严厉措施以避免大量数据库停机。</p>
                        <p>虽然用户培训和仔细管理权限可以防止大多数用户错误，但是当用户错误导致数据丢失时，备份策略将确定恢复丢失数据的优雅程度。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C69DBED-A529-466E-9879-23CB1ED4EA5E__GUID-E9DFA927-289F-47D8-93DB-2E1567136C03">应用程序错误</p>
                        <p>有时，软件故障可能会破坏数据块。在<a href="glossary.html#GUID-6035D1EA-C660-4F45-B1AC-FE6B15810C54"><span class="xrefglossterm">物理损坏</span></a> （也称为媒体损坏）中，数据库根本无法识别块： <a href="glossary.html#GUID-36837841-FB21-45C7-A99A-FFC35D04FB0B"><span class="xrefglossterm">校验和</span></a>无效，块包含全零，或块的页眉和页脚不匹配。如果损坏不严重，那么您通常可以使用<a href="glossary.html#GUID-923A509A-1C36-4EA4-91C8-6E4F372722C0"><span class="xrefglossterm">块介质恢复</span></a>轻松修复它。
                        </p>
                        <div class="infoboxnotealso" id="GUID-2C69DBED-A529-466E-9879-23CB1ED4EA5E__GUID-A8F13923-2C2D-404D-BC69-2D519B2AC167">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span class="italic">Oracle数据库实用程序</span></a> ，了解如何使用Data Pump</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89339"></a><div class="props_rev_3"><a id="GUID-8863FC3F-43B7-43B4-A017-30A90F5DA7D5" name="GUID-8863FC3F-43B7-43B4-A017-30A90F5DA7D5"></a><h4 id="BRADV-GUID-8863FC3F-43B7-43B4-A017-30A90F5DA7D5" class="sect4"><span class="enumeration_section">1.1.3</span>关于数据存档</h4>
                  <div>
                     <p>数据存档虽然与数据保护有关，但却有不同的用途。归档备份免于正常的备份和恢复策略。这些备份通常存档在单独的存储介质上并保留很长时间。</p>
                     <p>例如，您可能需要保留数据库的副本，因为它存在于业务季度末。此备份不是灾难恢复策略的一部分。备份完成后，写入这些备份的介质通常不可用。您可以将磁带发送到消防仓库或将便携式硬盘驱动器运送到测试设施。RMAN提供了一种方便的方法来创建备份并从<a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">备份保留策略中</span></a>免除<a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">备份</span></a> 。这种类型的备份称为<a href="glossary.html#GUID-52B0BB49-8AC2-4C8E-A52F-1908CDE77717"><span class="xrefglossterm">归档备份</span></a> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-8863FC3F-43B7-43B4-A017-30A90F5DA7D5__GUID-E0D750E3-9412-4339-AC04-C545E5104FB0">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="backing-up-database.html#GUID-8894680E-8BBA-475D-8815-D789C1A04FD9" title="你可以使用BACKUP ......保持创建既包含所有权又不受备份保留策略限制的备份。通过使用带有BACKUP命令的KEEP选项，可以从保留策略中免除备份。通常，您将归档备份到磁带。由于您的数据保护备份最有可能位于一组仍可访问且可回收的磁带上，因此建议为归档备份保留一组磁带。使用带有KEEP选项的BACKUP命令进行归档备份。归档备份的一个目的是创建测试数据库。">为长期存储进行数据库备份</a></p>
                     </div>
                  </div>
               </div><a id="BRADV89340"></a><div class="props_rev_3"><a id="GUID-0789AA81-C3A0-4A4F-944E-C2876759CD3A" name="GUID-0789AA81-C3A0-4A4F-944E-C2876759CD3A"></a><h4 id="BRADV-GUID-0789AA81-C3A0-4A4F-944E-C2876759CD3A" class="sect4"><span class="enumeration_section">1.1.4</span>关于数据传输</h4>
                  <div>
                     <p>RMAN备份可用于跨不同平台传输数据库和表空间。</p>
                     <p>在某些情况下，您可能需要备份数据库或数据库组件并将其移动到其他位置。例如，您可以使用Recovery Manager（RMAN）创建数据库副本，创建可导入另一个数据库的表空间副本，或将整个数据库从一个平台移动到另一个平台。这些任务严格来说不是备份和恢复策略的一部分，但它们确实需要使用数据库备份，因此可能包含在备份管理员的职责中。</p>
                     <div class="infoboxnotealso" id="GUID-0789AA81-C3A0-4A4F-944E-C2876759CD3A__GUID-DB7D7F74-4A39-45D3-AF8A-870C564A644D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="part-transfering-data-rman.html#GUID-A341A776-5EEF-41C5-B708-338453D4DFB2">使用RMAN传输数据</a>的章节</p>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV547"></a><a id="BRADV89341"></a><div class="props_rev_3"><a id="GUID-014F80B5-9A80-4CDB-B282-3FD0C3610FC9" name="GUID-014F80B5-9A80-4CDB-B282-3FD0C3610FC9"></a><h3 id="BRADV-GUID-014F80B5-9A80-4CDB-B282-3FD0C3610FC9" class="sect3"><span class="enumeration_section">1.2</span> Oracle备份和恢复解决方案</h3>
               <div>
                  <p>Oracle为执行备份和恢复提供了多种解决方案。</p>
                  <p>实施备份和恢复策略时，可以使用以下解决方案：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="glossary.html#GUID-4FFB2A3B-F3D7-4F96-A37B-2E832D986B7A"><span class="xrefglossterm">恢复管理器（RMAN）</span></a></p>
                        <p>Recovery Manager与Oracle数据库完全集成，可执行一系列备份和恢复活动，包括维护有关备份的历史数据的<a href="glossary.html#GUID-F5643EDD-CE1B-4A9F-9E6E-ADDFD6452341"><span class="xrefglossterm">RMAN存储库</span></a> 。您可以通过命令行或Oracle Enterprise Manager访问RMAN。
                        </p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-3F77B32A-9297-4D41-A234-E06ECDFFC25F"><span class="xrefglossterm">Oracle企业管理器云控制</span></a></p>
                        <p>Oracle Enterprise Manager云控制（云控制）为RMAN提供图形前端和调度工具。输入作业参数，指定作业计划，Cloud Control运行RMAN以执行备份和恢复操作。</p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-238433D1-4ED8-412E-978F-24197B953D94"><span class="xrefglossterm">零数据丢失恢复设备（恢复设备）</span></a></p>
                        <p>Recovery Appliance是一种云规模的工程化系统，可为企业中的所有Oracle数据库提供数据保护。与“RMAN和云控制”集成，恢复设备提供单个存储库，用于备份多个数据库，如<span class="q">“ <a href="introduction-backup-recovery.html#GUID-25997EE3-A3E0-4ED2-AA63-3B4067F3BDF3" title="零数据丢失恢复设备（恢复设备）是一种云规模的工程系统，旨在保护企业中的所有Oracle数据库。通过将大多数Oracle数据库备份和还原处理卸载到集中式恢复设备，它可以显着提高备份的性能和可管理性。">关于零数据丢失恢复设备</a> ”中所述</span> 。
                        </p>
                     </li>
                     <li>
                        <p>用户管理的备份和恢复</p>
                        <p>在此解决方案中，您可以使用主机操作系统命令和SQL * Plus恢复命令混合执行备份和恢复。您有责任确定备份和恢复的执行时间和方式的所有方面。</p>
                     </li>
                  </ul>
                  <p>这些解决方案由Oracle提供支持并完整记录，但RMAN是数据库备份和恢复的首选解决方案。RMAN为跨不同主机操作系统的备份任务提供了通用接口，并提供了几种通过用户管理方法无法提供的备份技术。</p>
                  <div class="infoboxnotealso" id="GUID-014F80B5-9A80-4CDB-B282-3FD0C3610FC9__GUID-95E0A567-C039-493F-A7BF-4432E5DE215D">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="introduction-backup-recovery.html#GUID-84BE3AC7-E2E4-4897-A3D8-D4105D033E9C" title="还可以使用Oracle Enterprise Manager Cloud Control访问RMAN功能。">RMAN和Oracle企业管理器云控制</a> ”</span></p>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-F2029C24-E0A3-42C3-953C-EC2D63D185CD" name="GUID-F2029C24-E0A3-42C3-953C-EC2D63D185CD"></a><h3 id="BRADV-GUID-F2029C24-E0A3-42C3-953C-EC2D63D185CD" class="sect3"><span class="enumeration_section">1.3</span> Oracle备份技术的比较</h3>
               <div>
                  <p>您可以使用多种技术来创建Oracle数据库的备份。本节将比较Recovery Manager（RMAN），用户管理的备份和Data Pump技术。</p>
                  <div class="section">
                     <p><a href="introduction-backup-recovery.html#GUID-F2029C24-E0A3-42C3-953C-EC2D63D185CD__CHDBHGGE" title="此表包含备份方法的功能比较。">表1-1</a>总结了不同备份技术的功能。
                     </p>
                     <div class="tblformalwide" id="GUID-F2029C24-E0A3-42C3-953C-EC2D63D185CD__CHDBHGGE">
                        <p class="titleintable">表1-1备份技术的功能比较</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="备份技术的特征比较" width="100%" border="1" summary="This table contains a feature comparison of backup methods." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d9547e1340">特征</th>
                                 <th align="left" valign="bottom" width="33%" id="d9547e1343">恢复管理器</th>
                                 <th align="left" valign="bottom" width="33%" id="d9547e1346">用户管理</th>
                                 <th align="left" valign="bottom" width="17%" id="d9547e1349">数据泵导出</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d9547e1354" headers="d9547e1340 ">
                                    <p>封闭数据库备份</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1354 d9547e1343 ">
                                    <p>支持的。需要安装实例。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1354 d9547e1346 ">
                                    <p>支持的。</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d9547e1354 d9547e1349 ">
                                    <p>不支持。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d9547e1367" headers="d9547e1340 ">
                                    <p>打开数据库备份</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1367 d9547e1343 ">
                                    <p>支持的。无需使用<code class="codeph">BEGIN</code> / <code class="codeph">END</code> <code class="codeph">BACKUP</code>语句。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1367 d9547e1346 ">
                                    <p>支持的。必须使用<code class="codeph">BEGIN</code> / <code class="codeph">END</code> <code class="codeph">BACKUP</code>语句。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d9547e1367 d9547e1349 ">
                                    <p>需要回滚或还原段才能生成一致的备份。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d9547e1398" headers="d9547e1340 ">
                                    <p>增量备份</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1398 d9547e1343 ">
                                    <p>支持的。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1398 d9547e1346 ">
                                    <p>不支持。</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d9547e1398 d9547e1349 ">
                                    <p>不支持。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d9547e1411" headers="d9547e1340 ">
                                    <p>腐败块检测</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1411 d9547e1343 ">
                                    <p>支持的。在<code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>标识损坏的块和日志。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1411 d9547e1346 ">
                                    <p>不支持。</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d9547e1411 d9547e1349 ">
                                    <p>支持的。标识导出日志中的损坏块。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d9547e1427" headers="d9547e1340 ">
                                    <p>自动指定要包含在备份中的文件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1427 d9547e1343 ">
                                    <p>支持的。建立要备份的所有文件的名称和位置（整个数据库，表空间，数据文件，控制文件等）。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1427 d9547e1346 ">
                                    <p>不支持。必须手动定位和复制要备份的文件。</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d9547e1427 d9547e1349 ">
                                    <p>不适用。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d9547e1440" headers="d9547e1340 ">
                                    <p>备份库</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1440 d9547e1343 ">
                                    <p>支持的。备份记录在控制文件中，该文件是RMAN元数据的主存储库。此外，您可以将此元数据存储在<a href="glossary.html#GUID-CBFA8015-2DFF-42B1-A818-D6C5B92C608F"><span class="xrefglossterm">恢复目录中</span></a> ，该<a href="glossary.html#GUID-CBFA8015-2DFF-42B1-A818-D6C5B92C608F"><span class="xrefglossterm">目录</span></a>是不同数据库中的模式。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1440 d9547e1346 ">
                                    <p>不支持。DBA必须保留自己的备份记录。</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d9547e1440 d9547e1349 ">
                                    <p>不支持。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d9547e1457" headers="d9547e1340 ">
                                    <p>备份到媒体管理器</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1457 d9547e1343 ">
                                    <p>支持的。与<a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">媒体管理软件的</span></a>接口。RMAN还支持代理副本，该功能使媒体管理器能够完全管理磁盘和备份媒体之间的数据传输。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1457 d9547e1346 ">
                                    <p>支持的。备份到磁带是手动或由媒体管理器控制。</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d9547e1457 d9547e1349 ">
                                    <p>不支持。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d9547e1474" headers="d9547e1340 ">
                                    <p>备份初始化参数文件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1474 d9547e1343 ">
                                    <p>支持的。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1474 d9547e1346 ">
                                    <p>支持的。</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d9547e1474 d9547e1349 ">
                                    <p>不支持。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d9547e1487" headers="d9547e1340 ">
                                    <p>备份密码和网络文件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1487 d9547e1343 ">
                                    <p>不支持。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1487 d9547e1346 ">
                                    <p>支持的。</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d9547e1487 d9547e1349 ">
                                    <p>不支持。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d9547e1500" headers="d9547e1340 ">
                                    <p>与平台无关的备份语言</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1500 d9547e1343 ">
                                    <p>支持的。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d9547e1500 d9547e1346 ">
                                    <p>不支持。</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d9547e1500 d9547e1349 ">
                                    <p>支持的。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89342"></a><div class="props_rev_3"><a id="GUID-993ACA58-F6BA-4FBF-85D0-ED63D522551E" name="GUID-993ACA58-F6BA-4FBF-85D0-ED63D522551E"></a><h3 id="BRADV-GUID-993ACA58-F6BA-4FBF-85D0-ED63D522551E" class="sect3"><span class="enumeration_section">1.4</span>关于Oracle闪回技术</h3>
               <div>
                  <p>Oracle闪回技术提供了一系列功能，可以补充您的物理备份和恢复策略。</p>
                  <p><a href="glossary.html#GUID-B9B3A008-D1DB-4B83-B825-70E8B79A9920"><span class="xrefglossterm">Oracle闪回技术</span></a>提供了额外的数据保护层。具体而言，您可以使用Oracle闪回的各种功能查看过去的数据状态并回放数据库，而无需还原备份或执行<a href="glossary.html#GUID-491BEF3A-18F0-4670-B078-2D84765141E8"><span class="xrefglossterm">时间点恢复</span></a> 。通常，闪回功能在应用它们的大多数情况下比媒体恢复更有效且破坏性更小。
                  </p>
                  <p>Oracle闪回技术使您可以使用以下功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-backup-recovery.html#GUID-725A5589-5ED5-4C02-A0B9-D45B7D9BBACD" title="Oracle数据库的逻辑级闪回功能不依赖于RMAN，无论RMAN是否为备份策略的一部分，都可用。">逻辑闪回功能</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-backup-recovery.html#GUID-31D4608F-3B5F-4811-9D6B-6BF7C16766B7" title="闪回数据库使您可以将Oracle数据库还原到以前的某个时间点。">闪回数据库</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89343"></a><div class="props_rev_3"><a id="GUID-725A5589-5ED5-4C02-A0B9-D45B7D9BBACD" name="GUID-725A5589-5ED5-4C02-A0B9-D45B7D9BBACD"></a><h4 id="BRADV-GUID-725A5589-5ED5-4C02-A0B9-D45B7D9BBACD" class="sect4"><span class="enumeration_section">1.4.1</span>逻辑闪回功能</h4>
                  <div>
                     <p>Oracle数据库的逻辑级闪回功能不依赖于RMAN，无论RMAN是否为备份策略的一部分，都可用。</p>
                     <p>Oracle的大多数闪回功能都在逻辑级别运行，使您可以查看和操作数据库对象。除了Oracle Flashback Drop之外，逻辑闪回功能依赖于<strong class="term">撤消数据</strong> ， <strong class="term">撤消数据</strong>是每个数据库更新的影响记录和更新中覆盖的值。
                     </p>
                     <p>Oracle数据库包括以下逻辑闪回功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle闪回查询</p>
                           <p>您可以指定目标时间并对数据库运行查询，查看在目标时间显示的结果。要从诸如对表的更新之类的不需要的更改中恢复，您可以选择错误之前的目标时间并运行查询以检索丢失行的内容。<a href="../adfns/flashback.html#ADFNS1008" target="_blank"><span class="italic">“Oracle数据库开发指南”</span></a>介绍了如何使用此功能。
                           </p>
                        </li>
                        <li>
                           <p>Oracle闪回版本查询</p>
                           <p>您可以在指定的时间间隔内查看一个或多个表中曾存在的所有行的所有版本。您还可以检索有关行的不同版本的元数据，包括创建版本的事务的开始和结束时间，操作和事务ID。您可以使用此功能恢复丢失的数据值并审核对查询的表的更改。<a href="../adfns/flashback.html#ADFNS1008" target="_blank"><span class="italic">“Oracle数据库开发指南”</span></a>介绍了如何使用此功能。
                           </p>
                        </li>
                        <li>
                           <p>Oracle闪回事务查询</p>
                           <p>您可以查看单个事务或特定时间段内所有事务所做的更改。<a href="../adfns/flashback.html#ADFNS1008" target="_blank"><span class="italic">“Oracle数据库开发指南”</span></a>介绍了如何使用此功能。
                           </p>
                        </li>
                        <li>
                           <p>Oracle闪回事务</p>
                           <p>您可以撤消交易。Oracle数据库确定事务之间的依赖关系，实际上会创建一个补偿事务来反转不需要的更改。数据库回退到一个状态，就好像事务和任何可能依赖它的事务从未发生过一样。<a href="../adfns/flashback.html#ADFNS1008" target="_blank"><span class="italic">“Oracle数据库开发指南”</span></a>介绍了如何使用此功能。
                           </p>
                        </li>
                        <li>
                           <p>Oracle闪回表</p>
                           <p>您可以提前将表或一组表恢复到指定的时间点，而不会使数据库的任何部分脱机。在许多情况下，闪回表消除了执行更复杂的时间点恢复操作的需要。闪回表在自动维护关联属性（如当前索引，触发器和约束）的同时还原表，从而使您能够避免查找和还原特定于数据库的属性。 <span class="q">“ <a href="rman-performing-flashback-dbpitr.html#GUID-FF315DFC-ABBC-410D-ABDB-75FA89D43255" title="闪回表使用撤消表空间中的信息而不是还原的备份来检索表。发生闪回表操作时，将删除新行并重新插入旧行。在执行表的闪回时，数据库的其余部分仍然可用。">使用闪回表重绕表</a> ”</span>解释了如何使用此功能。
                           </p>
                        </li>
                        <li>
                           <p>Oracle Flashback Drop</p>
                           <p>您可以反转<code class="codeph">DROP</code> <code class="codeph">TABLE</code>语句的效果。 <span class="q">“ <a href="rman-performing-flashback-dbpitr.html#GUID-55EA5EB0-89E2-4561-A9D0-01A6242A2A87" title="您可以使用FLASHBACK TABLE从回收站中检索对象...在DROP声明之前。">使用闪回删除重绕DROP TABLE操作</a> ”</span>说明了如何使用此功能。
                           </p>
                        </li>
                     </ul>
                     <p><a href="glossary.html#GUID-2298E7F2-79F8-451F-B180-8A58300E29CB"><span class="xrefglossterm">闪回数据存档</span></a>使您可以使用某些逻辑闪回功能来访问过去的远程数据。闪回数据存档由一个或多个表空间或表空间的一部分组成。创建闪回数据存档时，请指定名称，保留期和表空间。您还可以指定默认闪回数据存档。数据库会在保留期到期后的第二天自动清除旧历史数据。
                     </p>
                     <p>您可以为各个表打开和关闭闪回存档。默认情况下，为每个表关闭闪回存档。</p>
                     <div class="infoboxnotealso" id="GUID-725A5589-5ED5-4C02-A0B9-D45B7D9BBACD__GUID-495B1CB0-A013-47EB-BCF0-EE20393C6DA5">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="rman-performing-flashback-dbpitr.html#GUID-5463669A-DC89-4FF4-ACCE-136A72DF687B" title="此概述描述了Oracle闪回技术和数据库时间点恢复的目的和基本概念。某些情况适合使用时间点恢复或闪回功能，以便在之前的某个时间点将数据库或数据库对象返回到其状态。数据库时间点恢复（DBPITR）和闪回功能使您可以将数据库恢复到先前的某个时间点。DBPITR在物理级别工作，以在过去的目标时间将数据文件返回到其状态。RMAN为一个或多个PDB的时间点恢复提供支持。要恢复PDB，必须以具有SYSDBA或SYSBACKUP权限的用户身份连接到root。恢复后，PDB的旧备份仍然有效，并且可以在发生介质故障时使用。在大多数可用的情况下，Oracle数据库的闪回功能比介质恢复更有效。您可以使用它们来调查数据库的过去状态。Oracle闪回数据库是DBPITR最有效的替代方法。逻辑闪回功能用于将表及其内容恢复到过去的时间。您可以对整个多租户容器数据库（CDB）或特定可插拔数据库（PDB）执行闪回数据库操作。多租户容器数据库（CDB）可以使用共享撤消或本地撤消。RMAN用于执行闪回数据库操作的技术取决于CDB的撤消配置类型.RMAN提供了管理PDB中数据块的重做损坏的方法。闪回表使用撤消表空间中的信息而不是恢复的备份来检索表。发生闪回表操作时，将删除新行并重新插入旧行。在执行表的闪回时，数据库的其余部分仍然可用。要执行闪回表操作，该表必须有资格闪回，并且执行操作的用户必须具有所需的权限。要在一个或多个表上使用闪回表功能，请使用带有目标时间或SCN的FLASHBACK TABLE SQL语句。默认情况下，数据库在执行FLASHBACK TABLE操作之前禁用受影响表上的触发器。在操作之后，数据库将触发器返回到操作之前的状态（启用或禁用）。您可以使用FLASHBACK TABLE从回收站中检索对象...在DROP声明之前。Flashback Drop可以反转DROP TABLE操作的效果。闪回丢弃比在这种情况下可以使用的其他恢复机制（如时间点恢复）更快，并且不会导致停机或丢失最近的事务。在执行闪回删除操作之前，必须满足先决条件。使用FLASHBACK TABLE ...在DROP语句之前要从回收站中恢复对象。您可以指定回收站中表的名称或原始表名。您可以使用相同的原始名称创建，然后删除多个对象。所有丢弃的对象都存储在回收站中。闪回数据库通过将数据库返回到先前某个时间点的状态来反转不需要的更改。闪回数据库通过撤消对运行命令时存在的数据文件的更改来工作。必须满足先决条件才能执行闪回数据库操作。闪回数据库操作使用FLASHBACK DATABASE命令将数据库回滚到过去的某个时间点。您可以使用FLASHBACK DATABASE命令为整个多租户容器数据库（CDB）执行闪回数据库操作。您可以使用FLASHBACK DATABASE命令对多租户容器数据库（CDB）中的单个可插拔数据库（PDB）执行闪回数据库操作。数据字典视图包含用于监视闪回数据库的信息。RMAN DBPITR在目标恢复时间之前从备份还原数据库，然后使用增量备份和重做将数据库前滚到目标时间。您可以恢复到SCN，时间，日志序列号或还原点。Oracle建议您在重要时间创建还原点，以便在必要时使时间点恢复更易于管理。必须满足某些先决条件才能执行数据库时间点恢复（DBPITR）。使用RESTORE和RECOVER命令执行DBPITR。使用RECOVER命令执行容器数据库（CDB）和可插拔数据库（PDB）的时间点恢复（PITR）。PDB的PITR只能使用RMAN执行。使用RESTORE和RECOVER命令为整个CDB执行时间点恢复。当您将一个或多个PDB恢复到指定的时间点时，剩余的PDB将在国家开发银行不受影响，可以开放和运作。使用RESTORE和RECOVER命令执行应用程序PDB的时间点恢复。执行稀疏数据库的时间点恢复类似于执行正常数据库的时间点恢复。本节介绍基本闪回数据库和DBPITR方案的变体。闪回数据库可用于撤消OPEN RESETLOGS操作。跨OPEN RESETLOGS的闪回数据库可用于在Data Guard环境中执行多个功能。您可以使用闪回数据库将数据库回滚到废弃的数据库化身。要将DPITR执行到非当前数据库化身，必须显式执行RESET DATABASE以将数据库重置为目标SCN上当前的化身。您还必须从包含目标SCN的数据库化身中还原控制文件。">执行闪回和数据库时间点恢复，</a>以了解如何执行闪回表和闪回删除</p>
                           </li>
                           <li>
                              <p>有关逻辑闪回功能的更多信息，请参见<a href="../adfns/flashback.html#ADFNS1008" target="_blank"><span class="italic">“Oracle数据库开发指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89344"></a><div class="props_rev_3"><a id="GUID-31D4608F-3B5F-4811-9D6B-6BF7C16766B7" name="GUID-31D4608F-3B5F-4811-9D6B-6BF7C16766B7"></a><h4 id="BRADV-GUID-31D4608F-3B5F-4811-9D6B-6BF7C16766B7" class="sect4"><span class="enumeration_section">1.4.2</span>闪回数据库</h4>
                  <div>
                     <p>闪回数据库使您可以将Oracle数据库还原到以前的某个时间点。</p>
                     <p>在物理层面， <a href="glossary.html#GUID-DD883C9B-0441-48D3-9DDC-755597782971"><span class="xrefglossterm">Oracle闪回数据库</span></a>为<a href="glossary.html#GUID-FCC8BB91-79B6-4AF1-974A-43E75CD161E3"><span class="xrefglossterm">数据库时间点恢复（DBPITR）</span></a>提供了更有效的数据保护替代方案。如果当前数据文件有不需要的更改，那么您可以使用RMAN命令<a href="../rcmrf/FLASHBACK-DATABASE.html#RCMRF194" target="_blank"><code class="codeph">FLASHBACK DATABASE</code></a>将数据文件恢复为过去的内容。最终产品很像DBPITR的结果，但通常要快得多，因为它不需要从备份恢复数据文件，并且需要比介质恢复更少的重做。
                     </p>
                     <p>闪回数据库使用<a href="glossary.html#GUID-725ED3D7-5077-4F16-85AA-CDAD5BFCE554"><span class="xrefglossterm">闪回日志</span></a>来访问过去版本的数据块和来自归档重做日志的一些信息。闪回数据库要求您为数据库配置<a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">快速恢复区域</span></a> ，因为闪回日志只能存储在那里。默认情况下不启用闪回日志记录。用于闪回日志的空间由数据库自动管理，并与快速恢复区域中其他文件所需的空间进行平衡。
                     </p>
                     <p>Oracle数据库还支持还原点以及闪回数据库以及备份和恢复。<a href="glossary.html#GUID-A5A5E7B1-72B6-4F50-8E11-04C03EB5FFAE"><span class="xrefglossterm">还原点</span></a>是与<a href="glossary.html#GUID-BBD8C5A5-1CB0-4BF6-9614-81DD64ABE59E"><span class="xrefglossterm">系统更改号（SCN）</span></a>对应的别名。如果您预计此时需要将部分或全部数据库返回到其内容，则可以随时创建还原点。<a href="glossary.html#GUID-CC1A7D5D-50B6-4F90-89DE-855B21C299F2"><span class="xrefglossterm">保证还原点</span></a>可确保您可以使用闪回数据库将数据库返回到还原点的时间。
                     </p>
                     <div class="infoboxnotealso" id="GUID-31D4608F-3B5F-4811-9D6B-6BF7C16766B7__GUID-ADE21FD4-6723-4D84-8228-AD707C2F983B">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="rman-performing-flashback-dbpitr.html#GUID-953FA30D-BED2-4DBA-8361-9DA1B8FF073F" title="闪回数据库通过将数据库返回到先前某个时间点的状态来反转不需要的更改。">使用闪回数据库重绕数据库</a> ”</span>以了解如何使用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF194" target="_blank"><code class="codeph">FLASHBACK DATABASE</code></a>命令执行闪回数据库</p>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89345"></a><div class="props_rev_3"><a id="GUID-41F4209C-293C-4CEF-AEF7-BA723F96FA8A" name="GUID-41F4209C-293C-4CEF-AEF7-BA723F96FA8A"></a><h3 id="BRADV-GUID-41F4209C-293C-4CEF-AEF7-BA723F96FA8A" class="sect3"><span class="enumeration_section">1.5</span>关于Data Recovery Advisor</h3>
               <div>
                  <p>Data Recovery Advisor为Oracle备份和恢复解决方案提供单一入口点。它是一种工具，可自动诊断持久性数据故障，提供适当的修复选项，并根据您的要求执行修复。</p>
                  <p>您可以通过Oracle Enterprise Manager或RMAN命令行客户端使用<a href="glossary.html#GUID-5E618F7B-127F-4BE2-9ED5-E9D1B828434D"><span class="xrefglossterm">Data Recovery Advisor</span></a> 。
                  </p>
                  <p>数据库故障通常表现为一组症状：错误消息，警报，跟踪文件和转储以及失败的数据完整性检查。Data Recovery Advisor会自动诊断并通知您这些故障。对于Data Recovery Advisor， <a href="glossary.html#GUID-046A9407-B78B-4BBA-BE2F-55D74EF4F2D8"><span class="xrefglossterm">故障</span></a>是持久数据损坏，可以直接映射到一组修复操作。每个故障都处于打开或关闭状态。每个故障也具有关键，高或低的优先级。
                  </p>
                  <p>数据完整性检查检测到故障，数据完整性检查是为评估数据库或其组件的运行状况而执行的诊断程序。如果<a href="glossary.html#GUID-AECF0DB7-EEF4-4676-9978-42F0B5F9F9DE"><span class="xrefglossterm">数据完整性检查</span></a>显示故障，则Data Recovery Advisor会自动评估一组故障的影响并将其映射到一组修复选项。通常，Data Recovery Advisor提供自动和手动修复选项。
                  </p>
                  <p>Data Recovery Advisor确定最佳自动修复选项及其对数据库的影响。<a href="glossary.html#GUID-76EA30CA-A51E-44C9-AB25-E1D89AF711B2"><span class="xrefglossterm">修复选项</span></a>可能包括修复，如数据文件还原和恢复，介质恢复，闪回数据库等。在提供自动修复选项之前，Data Recovery Advisor会针对特定环境以及完成建议修复所需的介质组件的可用性对其进行验证。
                  </p>
                  <p>如果选择自动修复选项，则RMAN会协调Oracle数据库上的会话以执行<a href="glossary.html#GUID-021686F4-9813-468B-A83E-9E7773FD4D4C"><span class="xrefglossterm">修复</span></a> 。Data Recovery Advisor工具验证修复成功并关闭相应的故障。
                  </p>
                  <div class="infoboxnotealso" id="GUID-41F4209C-293C-4CEF-AEF7-BA723F96FA8A__GUID-A0B14826-EC5A-49DE-B123-B1066C38C03E">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="diagnosing-repairing-failures-dra.html#GUID-8C219B50-1F7F-4F7A-95EE-5F029AE7EB2A" title="Data Recovery Advisor是一种通过确定数据库故障的最佳自动修复选项来帮助减少数据库恢复时间的工具。Data Recovery Advisor是一个Oracle数据库工具，可自动诊断数据故障，确定并提供适当的修复选项，并根据用户的请求执行修复。在使用Data Recovery Advisor之前，您必须熟悉一些概念。Data Recovery Advisor具有命令行和GUI界面。Oracle企业管理器云控制中提供了GUI界面。检查器是在Health Monitor中注册的诊断操作或过程，用于评估数据库或其组件的运行状况。失败是由数据完整性检查检测到的持久性数据损坏。每个故障都有故障状态：OPEN或CLOSED。每个故障都有一个失败优先级：CRITICAL，HIGH或LOW。 Data Recovery Advisor仅为诊断出的故障分配CRITICAL或HIGH优先级。为清楚起见，Data Recovery Advisor将相关故障组合在一起。ADVISE FAILURE命令可以显示手动和自动修复选项。Data Recovery Advisor将手动操作分类为必需或可选。如果可能，Data Recovery Advisor会整合修复以将多个故障修复为单个修复。合并修复可能包含多个步骤。每当Data Recovery Advisor生成自动修复选项时，它都会创建一个脚本，说明RMAN打算使用哪些命令来修复故障。Data Recovery Advisor打印此脚本的位置，该脚本是驻留在操作系统上的文本文件。仅在某些数据库配置上支持Data Recovery Advisor。Data Recovery Advisor仅支持单实例数据库。不支持Oracle Real Application Clusters（Oracle RAC）数据库。Oracle Data Guard环境中的Data Recovery Advisor存在一些限制。Data Recovery Advisor只能用于诊断和修复非CDB中的数据损坏以及多租户容器数据库（CDB）的根目录。可插拔数据库（PDB）不支持Data Recovery Advisor。当您怀疑或发现故障时，Data Recovery Advisor工作流程就会开始。您可以通过多种方式发现故障，包括错误消息，警报，跟踪文件和失败的数据完整性检查。您可以使用Data Recovery Advisor自动诊断数据故障，确定适当的修复选项以及在CDB中执行修复。如果您怀疑或知道发生了一个或多个数据库故障，请使用LIST FAILURE获取有关它们的信息。确定数据库遇到问题的最简单方法是使用LIST FAILURE命令。除了提供更详细的输出外，LIST FAILURE还可以限制输出。当用户事务试图访问损坏的数据时，数据库会被动地调用数据完整性检查。在某些情况下，潜在的故障可能无法检测到。在RMAN会话中运行LIST FAILURE后，使用ADVISE FAILURE命令显示修复选项。此命令打印故障摘要，并隐式关闭所有已修复的打开故障。如果存在一个或多个故障，则通常使用LIST FAILURE显示有关故障的信息，然后在同一个RMAN会话中显示ADVISE FAILURE以获取修复选项的报告。您还可以请求特定故障的修复选项。您可以按状态（CRITICAL，HIGH或LOW）或故障编号指定故障。您还可以使用EXCLUDE FAILURE从报告中排除一个或多个故障。您可以使用Data Recovery Advisor自动修复故障。如果ADVISE FAILURE建议手动修理，请先尝试这些。如果无法进行手动修复，或者无法修复所有故障，则可以使用REPAIR FAILURE自动修复当前RMAN会话中最新ADVISE FAILURE命令中建议的故障。默认情况下，脚本显示为标准输出。您可以使用SPOOL命令将脚本写入可编辑文件。在某些情况下，您可能希望使用CHANGE FAILURE命令来更改故障的状态或优先级。">使用Data Recovery Advisor诊断和修复故障</a> ，了解如何使用Data Recovery Advisor</p>
                  </div>
               </div>
            </div><a id="BRADV627"></a><div class="props_rev_3"><a id="GUID-84BE3AC7-E2E4-4897-A3D8-D4105D033E9C" name="GUID-84BE3AC7-E2E4-4897-A3D8-D4105D033E9C"></a><h3 id="BRADV-GUID-84BE3AC7-E2E4-4897-A3D8-D4105D033E9C" class="sect3"><span class="enumeration_section">1.6</span> RMAN和Oracle Enterprise Manager云控制</h3>
               <div>
                  <p>还可以使用Oracle Enterprise Manager Cloud Control访问RMAN功能。</p>
                  <p>本节包含：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-backup-recovery.html#GUID-2F0AE5AF-3277-44FE-BEB4-461AF65B978A" title="Oracle企业管理器云控制（云控制）是基于浏览器的Oracle数据库管理界面。">关于Oracle Enterprise Manager云控制</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-backup-recovery.html#GUID-7557D8F6-2DC8-460A-8453-74E73DEF8705" title="数据库主页是Oracle企业管理器云控制（云控制）中的主数据库管理页面。">使用云控制访问数据库主页</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-backup-recovery.html#GUID-E5D38A55-A74D-4CCA-AB05-7125E3D9AA09" title="您可以使用Oracle Enterprise Manager云控制（云控制）执行各种简单和高级备份和恢复任务。">使用云控制执行备份和恢复任务</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV628"></a><div class="props_rev_3"><a id="GUID-2F0AE5AF-3277-44FE-BEB4-461AF65B978A" name="GUID-2F0AE5AF-3277-44FE-BEB4-461AF65B978A"></a><h4 id="BRADV-GUID-2F0AE5AF-3277-44FE-BEB4-461AF65B978A" class="sect4"><span class="enumeration_section">1.6.1</span>关于Oracle Enterprise Manager云控制</h4>
                  <div>
                     <p>Oracle企业管理器云控制（云控制）是基于浏览器的Oracle数据库管理界面。</p>
                     <p>Cloud Control为RMAN提供图形前端和调度工具。输入作业参数，指定作业计划，Cloud Control在指定时间或指定的重复间隔运行RMAN以执行备份和恢复操作。Cloud Control通过一组向导提供对RMAN的访问。这些向导将根据您对数据库，可用备份和数据恢复目标的分析，引导您完成各种恢复过程。</p>
                     <p>通过使用Cloud Control，您可以执行本文档中概述的更简单的还原和恢复方案。您还可以使用更复杂的还原和恢复技术，例如时间点恢复和Oracle闪回操作，从而有效修复介质故障和用户错误。使用Cloud Control通常比RMAN命令行客户端更简单。</p>
                     <p>使用云控制，您可以根据所描述访问数据库主页开始<a href="introduction-backup-recovery.html#GUID-7557D8F6-2DC8-460A-8453-74E73DEF8705" title="数据库主页是Oracle企业管理器云控制（云控制）中的主数据库管理页面。">访问使用云控制数据库主页</a> 。
                     </p>
                     <p>使用Cloud Control <a href="introduction-backup-recovery.html#GUID-E5D38A55-A74D-4CCA-AB05-7125E3D9AA09" title="您可以使用Oracle Enterprise Manager云控制（云控制）执行各种简单和高级备份和恢复任务。">执行备份和恢复任务</a>介绍了如何使用Cloud Control进行备份和恢复。
                     </p>
                  </div>
               </div><a id="BRADV629"></a><div class="props_rev_3"><a id="GUID-7557D8F6-2DC8-460A-8453-74E73DEF8705" name="GUID-7557D8F6-2DC8-460A-8453-74E73DEF8705"></a><h4 id="BRADV-GUID-7557D8F6-2DC8-460A-8453-74E73DEF8705" class="sect4"><span class="enumeration_section">1.6.2</span>使用云控制访问数据库主页</h4>
                  <div>
                     <p>数据库主页是Oracle企业管理器云控制（云控制）中的主数据库管理页面。</p>
                     <div class="section">
                        <p>登录到Cloud Control后，您将转到目标数据库的Database Home页面以执行备份和恢复任务。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7557D8F6-2DC8-460A-8453-74E73DEF8705__GUID-27C71D2D-38FE-4D23-882B-5CC485CCA417">要在Cloud Control中访问数据库主页：</p>
                        <ol>
                           <li>
                              <p>启动云控制。</p>
                              <p>用于访问Cloud Control的URL具有以下语法：</p><pre class="oac_no_warn" dir="ltr">http：// <span class="italic">hostname</span> 。 <span class="italic">domain</span> ： <span class="italic">portnumber</span> / em</pre><p>从Oracle Enterprise Manager管理员或数据库管理员处获取URL。</p>
                           </li>
                           <li>
                              <p>在“欢迎”页面上，输入您的Cloud Control用户名和密码，然后单击“ <span class="bold">登录”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>从“ <span class="bold">目标”</span>菜单中，选择“ <span class="bold">数据库”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“数据库”页面上，如果尚未选择，请选择“ <span class="bold">搜索列表”</span>以显示可用目标数据库的列表。
                              </p>
                           </li>
                           <li>
                              <p>单击数据库名称，选择要修改的目标数据库。</p>
                              <p>将显示目标数据库的主页。第一次与数据库交互时（例如，通过从菜单选项中进行选择），将显示“数据库登录”页面。</p>
                           </li>
                           <li>
                              <p>在目标数据库的登录页面上，以具有相应权限的用户身份登录。例如，以具有<code class="codeph">SYSDBA</code>权限的用户<code class="codeph">SYS</code>身份登录：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">用户名</span> ：输入<code class="codeph">SYS</code> 。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">密码</span> ：输入<code class="codeph">SYS</code>用户的密码。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">连接为</span> ：从列表中选择<span class="bold">Sysdba Role</span> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV654"></a><a id="BRADV630"></a><div class="props_rev_3"><a id="GUID-E5D38A55-A74D-4CCA-AB05-7125E3D9AA09" name="GUID-E5D38A55-A74D-4CCA-AB05-7125E3D9AA09"></a><h4 id="BRADV-GUID-E5D38A55-A74D-4CCA-AB05-7125E3D9AA09" class="sect4"><span class="enumeration_section">1.6.3</span>使用云控制执行备份和恢复任务</h4>
                  <div>
                     <p>您可以使用Oracle Enterprise Manager云控制（云控制）执行各种简单和高级备份和恢复任务。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E5D38A55-A74D-4CCA-AB05-7125E3D9AA09__GUID-239CE38F-041E-461C-A45A-65EDD8D5AB39">使用Cloud Control执行备份和恢复任务：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>访问目标数据库<a href="introduction-backup-recovery.html#GUID-7557D8F6-2DC8-460A-8453-74E73DEF8705" title="数据库主页是Oracle企业管理器云控制（云控制）中的主数据库管理页面。">的数据库主页，如使用云控制访问数据库主页中</a>所述。</span></li>
                        <li><span>从“可用性”菜单中，选择“ <span class="bold">备份和恢复”</span> ，然后选择一个选项。</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="BRADV327"></a><div class="props_rev_3"><a id="GUID-25997EE3-A3E0-4ED2-AA63-3B4067F3BDF3" name="GUID-25997EE3-A3E0-4ED2-AA63-3B4067F3BDF3"></a><h3 id="BRADV-GUID-25997EE3-A3E0-4ED2-AA63-3B4067F3BDF3" class="sect3"><span class="enumeration_section">1.7</span>关于零数据丢失恢复设备</h3>
               <div>
                  <p>零数据丢失恢复设备（恢复设备）是一种云规模的工程系统，旨在保护企业中的所有Oracle数据库。通过将大多数Oracle数据库备份和还原处理卸载到集中式恢复设备，它可以显着提高备份的性能和可管理性。</p>
                  <p>恢复设备使用<span class="q">“ <a href="rman-backup-concepts.html#GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6" title="The incremental-forever backup strategy eliminates the need for creating recurring full backups when backing up to Zero Data Loss Recovery Appliance (Recovery Appliance). Although Recovery Appliance supports other RMAN backup strategies, the recommended method for ongoing backups is the incremental-forever backup strategy.">关于恢复设备</a></span>的增量 - 永久备份策略”中所述的永久增量备份策略，在统一磁盘池上存储和管理多个数据库的<span class="q"><a href="rman-backup-concepts.html#GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6" title="备份永久备份策略消除了在备份到零数据丢失恢复设备（恢复设备）时创建重复完整备份的需要。虽然Recovery Appliance支持其他RMAN备份策略，但是持续备份的推荐方法是永久增量备份策略。">备份</a></span> 。它可以在Oracle块级别不断压缩，重复数据删除和验证备份，同时根据需要快速创建完整的虚拟备份。
                  </p>
                  <div class="infoboxnotealso" id="GUID-25997EE3-A3E0-4ED2-AA63-3B4067F3BDF3__GUID-C3335CDC-F7CB-4F4E-9602-3497754F82AF">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMPDB760" target="_blank"><span class="italic">“零数据丢失恢复设备受保护数据库配置指南”</span></a> ，了解有关恢复设备优势的信息</p>
                  </div>
                  <p>多个客户端数据库（称为受保护数据库）共享驻留在恢复设备上的单个集中管理的恢复设备目录。将备份发送到恢复设备的所有受保护数据库都必须使用此目录。虚拟专用目录技术强制在受保护的数据库DBA和恢复设备管理员之间分离职责。</p>
                  <p>实时重做传输可最大程度地减少连续存档日志备份之间存在的潜在数据丢失窗口。受保护数据库中的重做数据在生成时直接写入恢复设备。</p>
                  <p>Recovery Appliance与Cloud Control和RMAN集成在一起。随附的媒体管理库用于RMAN和恢复设备之间的通信。Cloud Control使管理员能够集中管理和监控企业中所有受保护数据库的数据保护。</p>
                  <p>恢复设备的磁带管理组件Oracle Secure Backup预装在恢复设备上。对于灾难恢复，Recovery Appliance可以将备份复制到其他恢复设备。单个恢复设备可以为不同版本和不同平台的多个受保护数据库提供服务。</p>
                  <div class="infoboxnotealso" id="GUID-25997EE3-A3E0-4ED2-AA63-3B4067F3BDF3__GUID-5F069F89-1400-4C41-8A62-13406D5C5652">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMAGD199" target="_blank"><span class="italic">零数据丢失恢复设备管理员指南</span></a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMPDB623" target="_blank"><span class="italic">零数据丢失恢复设备保护数据库配置指南</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV445"></a><div class="props_rev_3"><a id="GUID-13AE1FE6-EB3B-4935-88BB-CE7D700F8BD7" name="GUID-13AE1FE6-EB3B-4935-88BB-CE7D700F8BD7"></a><h4 id="BRADV-GUID-13AE1FE6-EB3B-4935-88BB-CE7D700F8BD7" class="sect4"><span class="enumeration_section">1.7.1</span>在恢复设备上使用RMAN</h4>
                  <div>
                     <p>您可以使用大多数RMAN命令备份到Zero Data Loss Appliance（恢复设备）并从中恢复。</p>
                     <p>要备份到恢复设备，必须先设置所需的配置参数并分配一个或多个SBT通道。</p>
                     <div class="infoboxnotealso" id="GUID-13AE1FE6-EB3B-4935-88BB-CE7D700F8BD7__GUID-23C03DE0-A474-43E9-8364-BB4904049639">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="rman-architecture.html#GUID-370362C4-9F7C-4D23-A9F8-42F0376F1F5A" title="Recovery Appliance提供了一个集中的远程存储库，用于备份企业中的所有目标数据库。所有目标数据库的备份和备份元数据都由恢复设备上的中央恢复目录（恢复设备目录）管理。">关于恢复设备环境中的RMAN</a></p>
                           </li>
                           <li>
                              <p><a href="rman-complete-database-recovery.html#GUID-C192C448-0D8A-4366-91AB-BE62ED5B12ED" title="零数据丢失恢复设备（恢复设备）大大减少了连续归档重做日志备份之间存在的潜在数据丢失窗口。您可以在数据库故障的几个亚之内恢复目标数据库。">关于恢复设备的实时重做传输</a></p>
                           </li>
                           <li>
                              <p><a href="rman-backup-concepts.html#GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6" title="备份永久备份策略消除了在备份到零数据丢失恢复设备（恢复设备）时创建重复完整备份的需要。虽然Recovery Appliance支持其他RMAN备份策略，但是持续备份的推荐方法是永久增量备份策略。">关于恢复设备的增量永久备份策略</a></p>
                           </li>
                           <li>
                              <p><a href="configuring-rman-client-basic.html#GUID-6F28089E-6D4E-4D6B-B96E-043C35D029D5" title="RMAN命令可用于将目标数据库备份到零数据丢失恢复设备（恢复设备）。将恢复设备用作目标数据库备份的集中存储库需要某些配置步骤。">配置RMAN以备份到恢复设备</a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMPDB752" target="_blank"><span><cite>“零数据丢失恢复设备保护数据库配置指南”，</cite></span></a>以获取有关在恢复设备中具有已修改行为的RMAN命令的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV548"></a><a id="BRADV99997"></a><div class="props_rev_3"><a id="GUID-9736C638-E029-4C33-BB41-F4E638C74166" name="GUID-9736C638-E029-4C33-BB41-F4E638C74166"></a><h3 id="BRADV-GUID-9736C638-E029-4C33-BB41-F4E638C74166" class="sect3"><span class="enumeration_section">1.8</span>备份和恢复文档路线图</h3>
               <div>
                  <p>备份和恢复文档路线图分为两个主要路径：RMAN和用户管理的备份和恢复。可选路径显示为拆分，然后重新连接每个主路径。</p>
                  <p><a href="introduction-backup-recovery.html#GUID-9736C638-E029-4C33-BB41-F4E638C74166__CHDFCHHC">图1-1</a>说明了导航备份和恢复文档的推荐方法。您可以使用建议的RMAN或使用用户管理的工具实施备份和恢复策略。
                  </p>
                  <div class="figure" id="GUID-9736C638-E029-4C33-BB41-F4E638C74166__CHDFCHHC">
                     <p class="titleinfigure">图1-1备份和恢复文档路线图</p><img src="img/bradv043.png" alt="下面是图1-1的描述" title="下面是图1-1的描述" longdesc="img_text/bradv043.html"><br><a href="img_text/bradv043.html">“图1-1备份和恢复文档路线图”的说明</a></div>
                  <!-- class="figure" -->
                  <p>如果您是Oracle数据库的新手，并希望了解备份恢复，那么最好的切入点是讨论<a href="../cncpt/concepts-for-database-administrators.html#CNCPT031" target="_blank"><span class="italic">Oracle数据库概念中</span></a>的基本备份和恢复原则。
                  </p>
               </div><a id="BRADV99998"></a><div class="props_rev_3"><a id="GUID-3843458F-4C0F-40D8-89DB-A90D4FA3B2E1" name="GUID-3843458F-4C0F-40D8-89DB-A90D4FA3B2E1"></a><h4 id="BRADV-GUID-3843458F-4C0F-40D8-89DB-A90D4FA3B2E1" class="sect4"><span class="enumeration_section">1.8.1</span> Recovery Manager文档路线图</h4>
                  <div>
                     <p>本节提供了使用RMAN作为主要备份和恢复解决方案时导航备份和恢复文档的路线图。</p>
                     <p>首先阅读<span class="q">“ <a href="getting-started-rman.html#GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" title="Recovery Manager（RMAN）是一个Oracle数据库客户端，可在您的数据库上执行备份和恢复任务，并自动管理备份策略。它极大地简化了备份，还原和恢复数据库文件的过程。在使用RMAN执行任何操作之前，必须连接到目标数据库。为每个目标数据库预配置了RMAN备份和恢复环境。配置是持久的，适用于此目标数据库上的所有后续操作，即使您退出并重新启动RMAN。使用BACKUP命令备份文件。RMAN将数据备份到配置的默认设备以获取所请求的备份类型。BACKUP命令包括一系列控制备份输出的选项，参数和子句。如果数据库在ARCHIVELOG模式下运行，则可以在数据库打开时备份数据库。如果数据库在NOARCHIVELOG模式下运行，则唯一有效的数据库备份是一致的备份。增量备份捕获在先前增量备份之后对数据库进行的块级更改。通过逐步更新的备份，您可以实施有效的增量备份永久备份策略。RMAN验证检查备份以确定是否可以还原。验证还会检查损坏的块和丢失的文件。RMAN支持使用命令文件来管理重复性任务，例如每周备份。RMAN可以使用存储在RMAN存储库中的信息来生成有关备份活动的报告。LIST BACKUP和LIST COPY命令显示有关存储库中列出的备份和数据文件副本的信息。REPORT命令执行比LIST命令更复杂的报告分析。RMAN存储库元数据始终存储在目标数据库的控制文件中。管理备份时，RMAN维护命令使用此元数据。使用CROSSCHECK命令将RMAN备份和副本的逻辑记录与存储介质上的文件同步。DELETE命令从磁盘和磁带中删除RMAN备份和副本，在控制文件存储库中将文件状态更新为DELETED，并从恢复目录中删除记录（如果使用目录）。Data Recovery Advisor是一个Oracle数据库工具，它提供了一个诊断持久性数据故障的基础架构，向用户提供修复选项，并根据用户的请求执行修复。失败是Health Monitor检测到的持久性数据损坏。示例包括物理和逻辑数据块损坏和丢失的数据文件。使用RMAN REPAIR FAILURE命令修复检测到的故障。您可以使用Oracle闪回数据库将整个数据库回滚到过去的时间。与介质恢复不同，您无需还原数据文件以将数据库返回到过去状态。使用RESTORE和RECOVER命令进行RMAN还原和恢复物理数据库文件。要恢复数据库，因为介质故障会损坏数据库文件，请首先确保您具有必要的备份。使用RESTORE DATABASE和RECOVER DATABASE命令恢复整个数据库。在数据库打开时，在各个表空间上使用RESTORE TABLESPACE和RECOVER TABLESPACE命令。在这种情况下，您必须使需要恢复的表空间脱机，恢复然后恢复表空间，并使恢复的表空间联机。RMAN可以恢复单个损坏的数据文件块。">RMAN入门</a> ”</span> 。这个简短的章节解释了最基本的RMAN技术，可能适合您的目的。有关如何使用RMAN实施备份和恢复策略的更全面说明，请按以下顺序阅读章节（未列出可选章节）：</p>
                     <ol>
                        <li>
                           <p>阅读<span class="q">“ <a href="starting-interacting-with-rman-client.html#GUID-E4E287F5-5F36-431A-B069-F360A5B4BC7C" title="RMAN可执行文件随数据库自动安装，通常与其他数据库可执行文件位于同一目录中。例如，Linux上的RMAN客户端位于$ ORACLE_HOME / bin中。您可以从RMAN客户端或操作系统命令行创建数据库连接。可以使用密码文件或操作系统身份验证对这些数据库连接进行身份验证。要执行有用的工作，RMAN客户端必须连接到数据库。与RMAN连接到目标或辅助数据库的用户需要SYSDBA或SYSBACKUP系统特权。可以使用操作系统身份验证来建立到目标或辅助数据库的RMAN连接。使用密码文件进行本地或远程访问。如果数据库使用密码文件对管理用户进行身份验证，则RMAN可以使用密码进行连接。如果在操作系统命令行上启动没有连接字符串的RMAN，则必须在RMAN提示符下发出CONNECT TARGET命令以连接到目标数据库。要从操作系统命令行连接到目标数据库，请输入rman命令，然后输入连接信息。您可以在显示RMAN提示后开始执行命令。您可以将RMAN客户端连接到多租户容器数据库（CDB）和可插拔数据库（PDB）。您可以在整个CDB，仅root用户或一个或多个PDB上执行RMAN操作。直接连接到可插拔数据库（PDB）时，某些限制适用：有多种方法可以将目标连接到根目录。您可以从RMAN提示符或操作系统命令行连接到PDB。您可以通过创建包含CONNECT命令的RMAN命令文件来建立数据库连接。要使用DUPLICATE命令，必须连接到辅助实例。执行表空间时间点恢复（TSPITR）可能还需要连接到辅助实例。在诊断RMAN在连接目标，目录和辅助数据库时遇到的错误时，请考虑使用SQL * Plus直接连接到数据库。此操作可以揭示连接信息或数据库的潜在问题。RMAN使用SYSDBA或SYSBACKUP权限连接到目标数据库和辅助数据库。因此，当您使用SQL * Plus诊断目标或辅助数据库的连接问题时，请求SYSDBA或SYSBACKUP连接以重现RMAN行为。使用SQL * Plus诊断恢复目录连接问题。默认情况下，RMAN将命令输出写入标准输出。要将输出重定向到日志文件，请在启动RMAN时在命令行上输入LOG参数。在调用RMAN之前，设置NLS_DATE_FORMAT和NLS_LANG环境变量可能很有用。这些变量确定RMAN命令（例如RESTORE，RECOVER和REPORT）中时间参数的格式。当RMAN客户端为命令做好准备时，它会显示命令提示符对于重复性任务，您可以创建包含RMAN命令的文本文件，然后使用@参数启动RMAN客户端，后跟文件名。RMAN中的注释字符是井号（＃）。从井号到行尾的所有文本都将被忽略。运行命令文件时，可以在USING子句中指定一个或多个值，以便在命令文件中的替换变量中使用。通过这种方式，您可以使命令文件动态化。您可以在不执行它们的情况下测试RMAN命令的语法正确性。使用命令行参数CHECKSYNTAX以一种模式启动RMAN客户端，在该模式下，它仅解析您输入的命令，并为不合法的RMAN语法的命令返回RMAN-00558错误。您可以交互式检查RMAN命令的语法，而无需实际执行命令。要在命令文件中测试命令，请使用CHECKSYNTAX参数启动RMAN，并使用@命令命名要传递的命令文件。RMAN管道接口是向RMAN发出命令并从这些命令接收输出的另一种方法。使用此接口，可以将可移植的编程接口写入RMAN。此示例假定控制RMAN的应用程序想要连续运行多个命令。在每个命令沿管道发送并执行并返回输出后，RMAN暂停并等待下一个命令。此示例假定控制RMAN的应用程序想要将一个或多个命令作为单个作业运行。运行管道上的命令后，RMAN退出。">启动并与RMAN客户端交互</a> ”</span> 。
                           </p>
                           <p>本章介绍如何启动RMAN客户端并连接到数据库。</p>
                        </li>
                        <li>
                           <p>阅读<span class="q">“ <a href="configuring-rman-client-basic.html#GUID-5155F8E6-6E35-4261-9CC1-F12DAA9FAC5B" title="RMAN为执行基本备份和恢复所需的大多数参数提供合理的默认值。您可以修改默认参数的值或覆盖特定会话的这些值。您可以使用SHOW命令显示目标数据库的RMAN配置设置的当前值。您还可以查看这些命令当前是否设置为其默认值。未指定目标设备类型的备份将定向到已配置的默认设备。RMAN已预先配置为使用磁盘作为默认设备类型。无需其他配置。BACKUP命令可以创建备份集或映像副本。对于磁盘，您可以使用CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO命令将RMAN配置为创建备份集或映像副本作为其默认备份类型。RMAN通道是与数据库服务器会话的连接。RMAN使用通道执行大多数任务。使用CONFIGURE CHANNEL命令配置磁盘或SBT通道的选项。您可以为设备类型配置通用通道设置，即用于根据该设备的已配置设置创建的任何通道的模板。默认情况下，RMAN为所有操作分配一个磁盘通道。您可以为此通道指定不同的选项，例如，备份的新默认位置。运行命令时可用于设备类型的通道数确定RMAN是并行读取还是写入。通常，执行命令时使用的通道数应与访问的设备数相匹配。如果在作业期间手动分配通道，则RMAN将忽略任何已配置的通道设置。您可以配置RMAN以自动备份控制文件和服务器参数文件。每当添加备份记录时都会发生自动备份。默认情况下，所有已配置设备的自动备份文件的格式是FORMAT子句中的替换变量％F。SET CONTROLFILE AUTOBACKUP FORMAT命令可以在RUN命令或RMAN提示符下指定，仅在当前会话中覆盖已配置的自动备份格式。在大多数平台上，要备份到磁带等顺序介质并从中恢复，必须将介质管理软件与Oracle数据库集成。您可以将支持数据库和文件系统备份的Oracle Secure Backup用作磁带，作为媒体管理器。在尝试将RMAN与媒体管理器一起使用之前，请确定媒体管理库的位置。安装介质管理软件后，请执行供应商所需的配置，以便软件可以接受RMAN备份。确认数据库服务器可以加载介质管理库之后，请进行测试以确保RMAN可以备份到介质管理器。ALLOCATE CHANNEL命令用于执行与媒体管理器的RMAN通信的基本测试。在媒体管理器上测试通道分配后，创建并恢复测试备份。配置SBT通道会创建一个持久性设置，该设置是用于使用媒体管理器进行备份和恢复操作的默认设置。备份片名由BACKUP命令，CONFIGURE CHANNEL命令或ALLOCATECHANNEL命令中指定的FORMAT字符串确定。备份到媒体管理器的最简单方法是配置自动SBT通道.RMAN命令可用于将目标数据库备份到零数据丢失恢复设备（恢复设备）。将恢复设备用作目标数据库备份的集中存储库需要某些配置步骤。在使用RMAN将目标数据库备份到零数据丢失恢复设备（恢复设备）之前，必须在目标数据库的Oracle主目录中安装恢复设备备份模块。在将Oracle数据库备份到零数据丢失恢复设备（恢复设备）之前，需要进行RMAN配置。在使用RMAN将目标数据库备份到零数据丢失恢复设备（恢复设备）之前，需要确定目标数据库主机上恢复设备备份模块的位置。在为恢复设备配置或分配RMAN通道时使用此位置。存储在受保护数据库中的客户端配置文件包含零数据丢失恢复设备（恢复设备）备份模块用于与恢复设备通信的配置设置。安装Recovery Appliance备份模块时会自动创建此文件。快速恢复区域功能使您可以设置磁盘区域，数据库可以在该区域中创建和管理与备份和恢复相关的各种文件。强烈建议使用快速恢复区域。考虑将快速恢复区域配置为实施备份策略的第一步。快速恢复区域可以包含控制文件，联机重做日志，归档重做日志，闪回日志和RMAN备份。快速恢复区域可以与Oracle托管文件（OMF）一起使用，快速恢复区域中的自动存储管理（ASM）空间在必须根据保留策略保留的备份和归档日志之间进行平衡，以及可能存在的其他文件可能会被删除。通过设置两个初始化参数来启用快速恢复区域。这些参数启用快速恢复区域，无论是否必须关闭并重新启动数据库实例。快速恢复区域越大，它就越有用。理想情况下，快速恢复区域足够大，可以包含控制文件，联机重做日志，归档重做日志和闪回日志。它应该能够包含数据库中所有数据文件的副本以及所选备份策略使用的增量备份。使用数据库初始化参数来设置快速恢复区域的位置和大小。您可以使用ALTER SYSTEM命令禁用快速恢复区域。使用初始化参数配置控制文件和重做日志的默认位置。初始化参数CONTROL_FILES，DB_CREATE_ONLINE_LOG_DEST_n，DB_RECOVERY_FILE_DEST和DB_CREATE_FILE_DEST都相互作用以确定创建数据库控制文件的位置。Oracle建议您将快速恢复区域用作归档位置，因为归档日志由数据库自动管理。某些RMAN命令或隐式操作（例如控制文件自动备份）可以在快速恢复区域中创建文件。备份保留策略指定必须保留哪些备份以满足您的数据恢复要求。CONFIGURE RETENTION POLICY命令的REDUNDANCY参数指定RMAN保留的每个数据文件和控制文件的完整备份数或0级备份数。默认保留策略为REDUNDANCY 1。CONFIGURE命令的RECOVERY WINDOW参数指定当前时间与最早可恢复点之间的天数。禁用保留策略时，RMAN不会将任何备份视为过时。运行RMAN CONFIGURE命令以启用和禁用备份优化。如果备份了相同的文件或相同版本的文件，则备份优化会在某些情况下跳过文件备份。启用备份优化时，BACKUP命令会在将相同文件备份到指定的设备类型时跳过备份文件。备份到SBT设备时，并不总是应用备份优化。默认情况下，备份优化配置为OFF。您可以使用SHOW BACKUP OPTIMIZATION命令查看备份优化的当前设置。您可以使用RMAN创建一个持久性配置，以管理归档重做日志何时有资格从磁盘中删除。您可以使用CONFIGURE ARCHIVELOG DELETION POLICY命令指定归档重做日志何时符合删除条件。默认情况下，没有归档重做日志删除策略，这就是归档重做日志策略设置为NONE子句的原因。您可以使用CONFIGURE ARCHIVELOG DELETION POLICY BACKED UP整数TIMES TO DEVICE TYPE命令启用存档日志删除策略。此配置指定仅当指定设备类型上存在指定数量的归档日志备份时，归档日志才有资格删除。默认情况下，归档重做日志删除策略设置为NONE。如果在Data Guard环境中使用RMAN，则可以使用CONFIGURE命令在此环境中注册和配置物理数据库的设置。">配置RMAN环境</a> ”</span> 。
                           </p>
                           <p>本章介绍如何执行基本任务，例如配置<a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">快速恢复区域</span></a> ， <a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">备份保留策略</span></a>和<a href="glossary.html#GUID-3492E0C3-F42C-45E6-84E2-63E30A3489A4"><span class="xrefglossterm">归档重做日志删除策略</span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>阅读<span class="q">“ <a href="backing-up-database.html#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="使用BACKUP命令创建RMAN备份。RMAN备份的主要目的是保护您的数据。如果发生介质故障或灾难，则可以还原备份并恢复丢失的更改。您可以使用RMAN客户端中的BACKUP命令备份全部或部分数据库。您可以为BACKUP命令提供参数以覆盖默认备份选项。BACKUP命令采用DEVICE TYPE子句，指定是备份到磁盘还是磁带设备。RMAN可以在磁盘上创建备份作为映像副本或备份集。RMAN提供了一系列选项来命名BACKUP命令生成的文件。备份到磁盘时，您可以指定一种格式以将备份分布在多个驱动器上以提高性能。RMAN将一个称为标记的字符串附加到它创建的每个备份上，作为识别备份的一种方式。您可以接受默认标记，也可以使用BACKUP命令的TAG参数指定自己的标记。用户指定的标记是指示不同类别的备份或副本的用途或用法的有用方法。将TAG参数与BACKUP命令一起使用可指定备份集和映像副本的标记。创建备份集时，可以通过在BACKUP命令中包含AS COMPRESSED BACKUPSET选项，使用RMAN支持对备份集进行二进制压缩。通过多节备份，可以将大型数据文件划分为多个部分，这些部分可以跨多个通道并行备份。这提供了更快的备份性能和更好的恢复时间。在创建映像副本时，RMAN使用多个通道写入文件节。但是，此操作的输出是每个数据文件的一个副本。您可以在装入或打开数据库的情况下执行整个数据库备份。您可以使用BACKUP TABLESPACE命令备份一个或多个表空间，或使用BACKUP DATAFILE命令备份一个或多个数据文件。您可以在装入或打开数据库时备份控制文件。RMAN使用快照控制文件来确保读取一致的版本。控制文件的手动备份与控制文件自动备份不同。在备份BACKUP命令中指定的文件后，RMAN会进行控制文件自动备份。要进行手动备份，可以在备份其他文件时指定INCLUDE CURRENT CONTROLFILE或指定BACKUP CURRENT CONTROLFILE。在某些情况下，RMAN会自动备份当前服务器参数文件。BACKUP SPFILE命令显式备份参数文件。备份的服务器参数文件是实例当前使用的文件。只有在数据库关闭且处于一致状态时，才能以NOARCHIVELOG模式备份数据库。预打印备份确保在将非CDB作为PDB插入CDB后可以使用RMAN备份。使用BACKUP命令备份多租户容器数据库（CDB）和可插拔数据库（PDB）。RMAN和Oracle Enterprise Manager Cloud Control为多租户环境中的备份和恢复提供全面支持。备份整个多租户容器数据库（CDB）类似于备份非CDB。备份整个CDB时，RMAN会备份根，所有可插拔数据库（PDB）和归档重做日志。您可以使用RMAN仅备份根。由于根包含整个CDB的关键元数据，因此Oracle建议您定期备份根或备份整个CDB。Oracle Enterprise Manager云控制（云控制）可用于备份根。RMAN允许您使用BACKUP命令备份CDB中的一个或多个PDB。迁移PDB并将其插入到不同的目标CDB后，PDB的预打印备份可用于执行还原和恢复操作.Oracle Enterprise Manager云控制（云控制）可用于执行可插拔数据库（PDB）的备份。由于不同PDB中的表空间可以具有相同的名称，因此为了消除歧义，您必须直接连接到PDB以备份其一个或多个表空间。此示例创建CDB cdb_prod中包含的PDB my_pdb的预包装备份。CDB使用共享撤消，并在读写模式下打开。RMAN使您可以使用BACKUP命令在应用程序根，一个或多个应用程序PDB和应用程序容器上执行备份操作。RMAN可以备份应用程序容器，应用程序PDB和应用程序根目录。使用RMAN BACKUP命令备份应用程序根目录。使用BACKUP命令备份应用程序容器，该容器由应用程序根目录和属于应用程序根目录的所有应用程序PDB组成。BACKUP命令用于备份一个或多个应用程序PDB。使用BACKUP命令备份稀疏数据库。RMAN使您可以使用备份集或映像副本格式中的备份整个数据库的步骤来备份稀疏数据库。您可以使用BACKUP命令备份包含稀疏数据文件或单个稀疏数据文件的一个或多个表空间。RMAN使您可以备份CDB中的一个或多个稀疏PDB。归档重做日志是成功恢复媒体的关键。你应该定期备份它们。RMAN备份的若干功能特定于归档重做日志。例如，您可以使用BACKUP ...删除以将备份到备份集后从磁盘中删除一个或所有归档重做日志副本。即使您的重做日志存档到多个目标并且您使用RMAN备份存档的重做日志，RMAN也只选择一个存档的重做日志文件副本以包含在备份集中。由于具有相同日志序列号的日志相同，因此RMAN不需要包含多个日志副本。自动在线重做日志切换是一项重要的RMAN功能。在CDB中，只有当您以具有SYSDBA或SYSBACKUP权限的普通用户身份连接到根时，才能备份存档的重做日志。要备份存档日志，请使用BACKUP ARCHIVELOG命令。您可以指示RMAN应自动跳过归档重做日志的备份。您可以使用BACKUP ARCHIVELOG命令备份多租户容器数据库（CDB）中的归档重做日志。BACKUP ARCHIVELOG ......DELETE INPUT命令在备份后删除存档的日志文件。此命令消除了手动删除存档重做日志的单独步骤。在CDB中，您可以使用BACKUP ARCHIVELOG备份后删除存档的重做日志...DELETE INPUT命令。增量备份仅复制自指定的先前备份以来已更改的数据文件块。使用BACKUP命令创建增量备份。RMAN增量备份提供多种好处。根据可接受的MTTR（平均恢复时间）选择备份策略。您可以将卷影复制服务（VSS）与Oracle VSS编写器一起使用，以在数据库中制作卷影副本或文件快照。通过逐步更新备份，可以避免对数据文件进行完整映像副本备份的开销，同时还可以最大限度地减少介质恢复数据库所需的时间。例如，如果您运行每日备份脚本，那么您永远不会有超过1天的重做时间来申请媒体恢复。要创建增量备份以用于增量更新的备份策略，请使用BACKUP ...使用TAG形式的BACKUP命令恢复COPY。在实现策略的示例脚本中最好地理解该命令。增量备份的块更改跟踪功能通过记录每个数据文件的更改块来提高备份性能。如果在主数据库或备用数据库上启用了块更改跟踪，则RMAN使用块更改跟踪文件来标识已更改的块以进行增量备份。通过读取这个小位图文件来确定哪些块发生了变化，RMAN避免了必须扫描它备份的数据文件中的每个块。Oracle数据库自动管理更改跟踪文件中的空间，以保留涵盖最近八个备份的块更改数据。达到最多八个位图后，最旧的位图将被跟踪当前更改的位图覆盖。默认情况下，块更改跟踪文件在DB_CREATE_FILE_DEST初始化参数指定的目标中创建为Oracle托管文件。您还可以通过在启用块更改跟踪时指定其名称，将块更改跟踪文件放在您选择的任何位置。块更改跟踪文件的大小与数据库的大小和重做的已启用线程数成比例。您可以在打开或装入数据库时启用块更改跟踪。禁用块更改跟踪时，数据库将从操作系统中删除块更改跟踪文件。您可以查询V $ BLOCK_CHANGE_TRACKING视图以确定是否启用了更改跟踪，如果是，则确定块更改跟踪文件的文件名。要移动更改跟踪文件，请使用ALTER DATABASE RENAME FILE语句。你可以使用BACKUP ......保持创建既包含所有权又不受备份保留策略限制的备份。通过使用带有BACKUP命令的KEEP选项，可以从保留策略中免除备份。通常，您将归档备份到磁带。由于您的数据保护备份最有可能位于一组仍可访问且可回收的磁带上，因此建议为归档备份保留一组磁带。使用带有KEEP选项的BACKUP命令进行归档备份。归档备份的一个目的是创建测试数据库。您可以使用BACKUP BACKUPSET命令备份其他备份作业生成的备份集。您还可以使用BACKUP RECOVERY AREA备份在当前和所有先前快速恢复区域目标中创建的恢复文件。BACKUP BACKUPSET命令在备份集中创建备份片的其他副本，但不创建新的备份集。对于基于冗余的备份保留策略，备份集将计为备份的一个实例。即使存在构成备份集的备份片的多个副本（例如，备份集已从磁盘备份到磁带），此语句也是如此。使用BACKUP BACKUPSET命令将备份集从磁盘复制到磁带。使用BACKUP命令将映像副本备份到磁带。">备份数据库</a> ”</span> 。
                           </p>
                           <p>本章介绍如何实施基本备份策略。</p>
                        </li>
                        <li>
                           <p>阅读<span class="q">“ <a href="reporting-rman-operations.html#GUID-550638CC-0D16-4B1A-83C7-5D10181DC7C1" title="作为备份和恢复策略的一部分，您应定期运行指示已备份内容的报告。您可以确定哪些数据文件需要备份或哪些文件最近未备份。此外，您还可以预览出现问题时RMAN必须还原的备份。RMAN存储执行操作的每个数据库的元数据。在Data Guard环境中，您可以在不使用Data Guard时使用LIST，REPORT和SHOW命令。您可以使用FOR DB_UNIQUE_NAME子句运行这些命令，以显示与指定数据库关联的备份。LIST命令使用RMAN存储库中的信息来提供备份列表以及与备份和恢复相关的其他对象。LIST命令的主要用途是列出备份和副本。使用listObjList或recordSpec子句指定所需的对象。如果未指定对象，则RMAN将显示所有数据库文件和归档重做日志文件的副本。您可以指定几个不同的条件来缩小LIST输出。使用LIST命令列出预包装备份和预刷新存档的重做日志文件。每次在数据库上执行OPEN RESETLOGS操作时，此操作都会创建数据库的新版本。RMAN REPORT命令分析可用备份和数据库。REPORT命令提供各种RMAN备份报告。使用REPORT NEED BACKUP命令确定在特定保留策略下需要备份的数据库文件。您可以使用REPORT NEED BACKUP命令的选项指定不同的保留策略。REPORT NEED BACKUP命令可以检查整个数据库，跳过指定的表空间，或仅根据不同的保留策略检查特定的表空间或数据文件。您可以将REPORT NEED BACKUP命令测试的备份限制为仅基于磁盘或基于磁带的备份。当通过不可恢复的操作（例如直接加载插入）更改数据文件时，不能使用正常的介质恢复来恢复文件，因为不可恢复的操作不会生成重做。在执行此类操作后，您必须对受影响的数据文件执行完全备份或增量备份，以确保可以使用RMAN恢复受不可恢复操作影响的数据块。您可以报告已过时的备份集，备份片和数据文件副本是，不需要通过指定OBSOLETE关键字来满足指定的保留策略。REPORT SCHEMA命令列出并显示有关数据库文件，表空间等的信息。您可以查看与多租户容器数据库（CDB），仅root用户或一个或多个可插拔数据库（PDB）相关的元数据的报告。使用带有GUID选项的LIST命令列出已从多租户容器数据库（CDB）中删除的可插拔数据库（PDB）的备份。在某些情况下，V $视图通过使用LIST和REPORT命令提供不可用的信息。RMAN作业是在RMAN会话中执行的一组命令。因此，一个RMAN作业可以包含多个命令。V $ BACKUP_PIECE和V $ RMAN_BACKUP_PIECE视图的ENCRYPTED列指示备份片段是加密（YES）还是未加密（NO）。LIST，REPORT和SHOW命令提供了访问控制文件和恢复目录中数据的最简单方法。RMAN从目标数据库控制文件中获取备份和恢复元数据，并将其存储在恢复目录的表中。恢复目录视图是从这些表派生的。恢复目录视图未针对用户查询进行规范化或优化。大多数恢复目录视图包含DB_KEY和DBINC_KEY列。可以通过主键（DB_KEY列值）或DBID（32位唯一数据库标识符）唯一标识在恢复目录中注册的每个数据库。数据库的每个版本都由DBINC_KEY列唯一标识。在Data Guard环境中查询恢复目录时，需要考虑特殊注意事项。DB_KEY值是注册数据库的主键，仅在恢复目录中使用。最简单的方法是获取DB_KEY是使用目标数据库的DBID，每当您将RMAN作为TARGET连接到数据库时，都会显示该DBID。您可以查询视图RC_BACKUP_FILES，以获取有关在恢复目录中注册的任何数据库的所有备份的信息。但是，在查询RC_BACKUP_FILES之前，必须调用DBMS_RCVMAN.SETDATABASE过程。">关于RMAN操作的报告</a> ”</span> 。
                           </p>
                           <p>本章介绍如何监视RMAN备份和恢复操作。具体来说，本章介绍了如何使用报告命令（ <code class="codeph">LIST</code> ， <code class="codeph">REPORT</code>和<code class="codeph">SHOW</code> ）以及相关的V $和恢复目录视图。
                           </p>
                        </li>
                        <li>
                           <p>阅读<span class="q">“ <a href="maintaining-rman-backups.html#GUID-F5C3D045-279B-4AB3-8A91-3231A716402C" title="建议的维护策略是配置快速恢复区域，备份保留策略和归档重做日志删除策略。在这种情况下，数据库会根据需要自动维护和删除备份和归档重做日志。但是，有时需要手动维护数据库备份和归档重做日志。RMAN提供多个命令来维护RMAN备份和存储库记录。RMAN始终将其元数据存储在其执行操作的每个目标数据库的控制文件中。如果在恢复目录中注册目标数据库，则RMAN会将此目标数据库的元数据存储在恢复目录中。创建备份或副本的Data Guard环境中的数据库与该文件相关联。例如，如果RMAN连接到目标数据库standby1并备份它，则此备份与standby1关联。对于交叉检查，RMAN只能在连接到与文件关联的数据库时将文件状态从AVAILABLE更新为EXPIRED。RMAN可以在连接到任何数据库时删除文件。如果RMAN未作为TARGET连接到与文件关联的数据库，并且RMAN无法成功删除文件，则RMAN会提示您将TARGET连接到与该文件关联的数据库。然后你必须使用DELETE ...FORCE删除文件元数据。如果维护命令仅更改RMAN元数据，则可以将RMAN作为TARGET连接到Data Guard环境中的任何数据库。除非您明确使用CHANGE，否则备份仍与数据库关联...RESET DB_UNIQUE_NAME将备份与其他数据库关联。RMAN旨在在没有恢复目录的情况下工作。但是，如果选择不使用恢复目录，则每个目标数据库的控制文件都是RMAN元数据的独占存储库。控制文件包含两种类型的记录：循环重用记录和非圆形重用记录。当包含有关在快速恢复区域中创建的文件的信息的控制文件记录即将被重用时，数据库尝试在文件有资格删除时从快速恢复区域中删除该文件。否则，数据库会扩展包含此文件记录的控制文件部分的大小。防止因覆盖控制文件记录而丢失RMAN元数据的最佳方法是使用恢复目录。如果您没有使用恢复目录来存储RMAN元数据，那么保护每个目标数据库控制文件是非常重要的。虽然快速恢复区域主要是自我管理，但某些情况可能需要数据库管理干预。RMAN使用某些规则来确定何时可以从快速恢复区域删除文件。您可以使用V $ RECOVERY_FILE_DEST和V $ RECOVERY_AREA_USAGE视图来确定是否为快速恢复区域分配了足够的空间。除了设置闪回保留目标或使用保证还原点之外，您无法直接管理快速恢复区域中的闪回日志。如果RMAN保留策略要求保留一组大于快速恢复区磁盘配额的备份，或者保留策略设置为NONE，则快速恢复区域可以完全填充，没有可回收空间。使用ALTER SYSTEM命令更改快速恢复区域的位置。ALTER SYSTEM命令可用于禁用快速恢复区域。通常，快速恢复区域是自我维护的。但是，当在快速恢复区域中创建文件期间实例崩溃时，数据库可能会将文件保留在快速恢复区域中。某些情况可能会导致存储库与其记录的文件之间出现差异，包括磁带或磁盘故障以及用户管理的副本或RMAN相关文件的删除。要确保恢复目录或控制文件中的备份数据与磁盘上或介质管理目录中的相应数据同步，请执行交叉检查。CROSSCHECK命令仅对当前记录在RMAN存储库中的文件进行操作。交叉检查更新过期的RMAN存储库信息，该信息与存储库记录与其物理状态不匹配的备份有关。例如，如果用户使用操作系统命令从磁盘中删除存档日志，则存储库仍会指示日志位于磁盘上，而实际上并非如此。连接到目标数据库和恢复目录（如果使用）后，根据需要运行CROSSCHECK命令以验证RMAN已知的备份的状态和可用性。您可以使用LIST命令报告备份，然后使用CROSSCHECK命令检查LIST输出中描述的特定备份是否仍然存在。使用CROSSCHECK命令验证RMAN.RMAN已知的预刷新备份和预刷新归档重做日志文件的状态和可用性，提供了多种更改备份和副本的存储库状态的方法。运行CHANGE ...无法找到备份或已异地迁移时的UNAVAILABLE命令。您可以将备份指定为免除保留策略。此技术对于归档备份以满足业务要求非常有用。将CHANGE命令与GUID选项一起使用可更改与从多租户容器数据库（CDB）中删除的可插拔数据库（PDB）对应的备份的状态。使用CHANGE命令可以修改预存储备份和预存储存档重做日志文件的存储库状态。您可以使用CATALOG命令使RMAN知道存储库中未记录的存档日志的存在，或者通过RMAN以外的方式创建的数据库文件的副本。目标数据库控制文件保留目标数据库和所有RMAN备份生成的所有归档重做日志的记录。CATALOG命令的目的是在没有要管理的RMAN文件记录时将元数据添加到存储库。使用CATALOG命令将有关用户管理的副本的信息传播到RMAN存储库。对文件进行编目后，可以运行LIST命令或查询V $ BACKUP_FILES视图以确认信息包含在RMAN存储库中。您可以在磁盘上编目备份片段。如果使用操作系统实用程序将备份片段从一个位置复制到同一主机上的另一个位置，或从一个主机复制到另一个主机，则此技术非常有用。如果使用自动存储管理（ASM），Oracle托管文件框架或快速恢复区域，则可能需要重新编目磁盘管理系统已知但不再列在RMAN存储库中的文件。当用于跟踪文件名的预期机制因介质故障，软件错误或用户错误而失败时，可能会发生这种情况。使用CATALOG命令将preplugin归档重做日志文件添加到RMAN存储库。您可以从RMAN存储库中删除文件的记录。你可以使用CHANGE ...UNCATALOG命令更新缺少文件的RMAN存储库。您可以使用RMAN DELETE命令删除存档的重做日志和RMAN备份。每个RMAN备份在RMAN存储库中生成相应的记录。该记录存储在控制文件中。如果使用了恢复目录，则在从控制文件重新同步恢复目录后，也可以在恢复目录中找到该记录。您可以删除备份的备份和恢复目录记录。建议的维护策略是配置快速恢复区域，备份保留策略和归档重做日志删除策略。使用RMAN DELETE命令删除备份和映像副本。你可以同时使用DELETE和BACKUP ......删除命令以删除特定备份和副本。你可以使用BACKUP ......删除以备份存档的重做日志，数据文件副本或备份集，然后在成功备份后删除输入文件。如果您运行CROSSCHECK，并且RMAN无法找到文件，则它会将RMAN存储库中的记录更新为EXPIRED状态。然后，您可以使用DELETE EXPIRED命令从RMAN存储库中删除过期备份和副本的记录。RMAN DELETE命令支持OBSOLETE选项，该选项删除不再需要的备份以满足指定的可恢复性要求。使用带有GUID选项的DELETE命令可以删除已从多租户容器数据库（CDB）中删除的可插拔数据库（PDB）的备份。使用DELETE命令删除预制备份备份和prelplugin存档重做日志文件。要从操作系统中删除数据库，可以在RMAN中使用DROP DATABASE命令。 RMAN删除服务器参数文件，所有数据文件，联机重做日志和属于目标数据库的控制文件。">维护RMAN备份和存储库记录</a> ”</span> 。
                           </p>
                           <p>本章介绍如何验证备份是否存在，更改备份的存储库状态，删除备份以及执行其他维护任务。</p>
                        </li>
                        <li>
                           <p>阅读<span class="q">“ <a href="diagnosing-repairing-failures-dra.html#GUID-8C219B50-1F7F-4F7A-95EE-5F029AE7EB2A" title="Data Recovery Advisor是一种通过确定数据库故障的最佳自动修复选项来帮助减少数据库恢复时间的工具。Data Recovery Advisor是一个Oracle数据库工具，可自动诊断数据故障，确定并提供适当的修复选项，并根据用户的请求执行修复。在使用Data Recovery Advisor之前，您必须熟悉一些概念。Data Recovery Advisor具有命令行和GUI界面。Oracle企业管理器云控制中提供了GUI界面。检查器是在Health Monitor中注册的诊断操作或过程，用于评估数据库或其组件的运行状况。失败是由数据完整性检查检测到的持久性数据损坏。每个故障都有故障状态：OPEN或CLOSED。每个故障都有一个失败优先级：CRITICAL，HIGH或LOW。 Data Recovery Advisor仅为诊断出的故障分配CRITICAL或HIGH优先级。为清楚起见，Data Recovery Advisor将相关故障组合在一起。ADVISE FAILURE命令可以显示手动和自动修复选项。Data Recovery Advisor将手动操作分类为必需或可选。如果可能，Data Recovery Advisor会整合修复以将多个故障修复为单个修复。合并修复可能包含多个步骤。每当Data Recovery Advisor生成自动修复选项时，它都会创建一个脚本，说明RMAN打算使用哪些命令来修复故障。Data Recovery Advisor打印此脚本的位置，该脚本是驻留在操作系统上的文本文件。仅在某些数据库配置上支持Data Recovery Advisor。Data Recovery Advisor仅支持单实例数据库。不支持Oracle Real Application Clusters（Oracle RAC）数据库。Oracle Data Guard环境中的Data Recovery Advisor存在一些限制。Data Recovery Advisor只能用于诊断和修复非CDB中的数据损坏以及多租户容器数据库（CDB）的根目录。可插拔数据库（PDB）不支持Data Recovery Advisor。当您怀疑或发现故障时，Data Recovery Advisor工作流程就会开始。您可以通过多种方式发现故障，包括错误消息，警报，跟踪文件和失败的数据完整性检查。您可以使用Data Recovery Advisor自动诊断数据故障，确定适当的修复选项以及在CDB中执行修复。如果您怀疑或知道发生了一个或多个数据库故障，请使用LIST FAILURE获取有关它们的信息。确定数据库遇到问题的最简单方法是使用LIST FAILURE命令。除了提供更详细的输出外，LIST FAILURE还可以限制输出。当用户事务试图访问损坏的数据时，数据库会被动地调用数据完整性检查。在某些情况下，潜在的故障可能无法检测到。在RMAN会话中运行LIST FAILURE后，使用ADVISE FAILURE命令显示修复选项。此命令打印故障摘要，并隐式关闭所有已修复的打开故障。如果存在一个或多个故障，则通常使用LIST FAILURE显示有关故障的信息，然后在同一个RMAN会话中显示ADVISE FAILURE以获取修复选项的报告。您还可以请求特定故障的修复选项。您可以按状态（CRITICAL，HIGH或LOW）或故障编号指定故障。您还可以使用EXCLUDE FAILURE从报告中排除一个或多个故障。您可以使用Data Recovery Advisor自动修复故障。如果ADVISE FAILURE建议手动修理，请先尝试这些。如果无法进行手动修复，或者无法修复所有故障，则可以使用REPAIR FAILURE自动修复当前RMAN会话中最新ADVISE FAILURE命令中建议的故障。默认情况下，脚本显示为标准输出。您可以使用SPOOL命令将脚本写入可编辑文件。在某些情况下，您可能希望使用CHANGE FAILURE命令来更改故障的状态或优先级。">使用Data Recovery Advisor诊断和修复故障</a> ”</span> 。
                           </p>
                           <p>本章介绍如何使用Data Recovery Advisor工具。您可以使用它列出故障，获取有关响应这些故障的建议，并在某些情况下自动修复故障。</p>
                        </li>
                        <li>
                           <p>阅读<span class="q">“ <a href="rman-performing-flashback-dbpitr.html#GUID-5463669A-DC89-4FF4-ACCE-136A72DF687B" title="此概述描述了Oracle闪回技术和数据库时间点恢复的目的和基本概念。某些情况适合使用时间点恢复或闪回功能，以便在之前的某个时间点将数据库或数据库对象返回到其状态。数据库时间点恢复（DBPITR）和闪回功能使您可以将数据库恢复到先前的某个时间点。DBPITR在物理级别工作，以在过去的目标时间将数据文件返回到其状态。RMAN为一个或多个PDB的时间点恢复提供支持。要恢复PDB，必须以具有SYSDBA或SYSBACKUP权限的用户身份连接到root。恢复后，PDB的旧备份仍然有效，并且可以在发生介质故障时使用。在大多数可用的情况下，Oracle数据库的闪回功能比介质恢复更有效。您可以使用它们来调查数据库的过去状态。Oracle闪回数据库是DBPITR最有效的替代方法。逻辑闪回功能用于将表及其内容恢复到过去的时间。您可以对整个多租户容器数据库（CDB）或特定可插拔数据库（PDB）执行闪回数据库操作。多租户容器数据库（CDB）可以使用共享撤消或本地撤消。RMAN用于执行闪回数据库操作的技术取决于CDB的撤消配置类型.RMAN提供了管理PDB中数据块的重做损坏的方法。闪回表使用撤消表空间中的信息而不是恢复的备份来检索表。发生闪回表操作时，将删除新行并重新插入旧行。在执行表的闪回时，数据库的其余部分仍然可用。要执行闪回表操作，该表必须有资格闪回，并且执行操作的用户必须具有所需的权限。要在一个或多个表上使用闪回表功能，请使用带有目标时间或SCN的FLASHBACK TABLE SQL语句。默认情况下，数据库在执行FLASHBACK TABLE操作之前禁用受影响表上的触发器。在操作之后，数据库将触发器返回到操作之前的状态（启用或禁用）。您可以使用FLASHBACK TABLE从回收站中检索对象...在DROP声明之前。Flashback Drop可以反转DROP TABLE操作的效果。闪回丢弃比在这种情况下可以使用的其他恢复机制（如时间点恢复）更快，并且不会导致停机或丢失最近的事务。在执行闪回删除操作之前，必须满足先决条件。使用FLASHBACK TABLE ...在DROP语句之前要从回收站中恢复对象。您可以指定回收站中表的名称或原始表名。您可以使用相同的原始名称创建，然后删除多个对象。所有丢弃的对象都存储在回收站中。闪回数据库通过将数据库返回到先前某个时间点的状态来反转不需要的更改。闪回数据库通过撤消对运行命令时存在的数据文件的更改来工作。必须满足先决条件才能执行闪回数据库操作。闪回数据库操作使用FLASHBACK DATABASE命令将数据库回滚到过去的某个时间点。您可以使用FLASHBACK DATABASE命令为整个多租户容器数据库（CDB）执行闪回数据库操作。您可以使用FLASHBACK DATABASE命令对多租户容器数据库（CDB）中的单个可插拔数据库（PDB）执行闪回数据库操作。数据字典视图包含用于监视闪回数据库的信息。RMAN DBPITR在目标恢复时间之前从备份还原数据库，然后使用增量备份和重做将数据库前滚到目标时间。您可以恢复到SCN，时间，日志序列号或还原点。Oracle建议您在重要时间创建还原点，以便在必要时使时间点恢复更易于管理。必须满足某些先决条件才能执行数据库时间点恢复（DBPITR）。使用RESTORE和RECOVER命令执行DBPITR。使用RECOVER命令执行容器数据库（CDB）和可插拔数据库（PDB）的时间点恢复（PITR）。PDB的PITR只能使用RMAN执行。使用RESTORE和RECOVER命令为整个CDB执行时间点恢复。当您将一个或多个PDB恢复到指定的时间点时，剩余的PDB将在国家开发银行不受影响，可以开放和运作。使用RESTORE和RECOVER命令执行应用程序PDB的时间点恢复。执行稀疏数据库的时间点恢复类似于执行正常数据库的时间点恢复。本节介绍基本闪回数据库和DBPITR方案的变体。闪回数据库可用于撤消OPEN RESETLOGS操作。跨OPEN RESETLOGS的闪回数据库可用于在Data Guard环境中执行多个功能。您可以使用闪回数据库将数据库回滚到废弃的数据库化身。要将DPITR执行到非当前数据库化身，必须显式执行RESET DATABASE以将数据库重置为目标SCN上当前的化身。您还必须从包含目标SCN的数据库化身中还原控制文件。">执行闪回和数据库时间点恢复</a> ”</span> 。
                           </p>
                           <p>本章介绍如何使用<code class="codeph">FLASHBACK DATABASE</code>命令并使用<code class="codeph">RECOVER DATABASE</code>命令执行时间点恢复。
                           </p>
                        </li>
                        <li>
                           <p>阅读<span class="q">“ <a href="rman-complete-database-recovery.html#GUID-D908719C-9D46-4084-850C-0F81C25094EB" title="丢失一个或多个数据库文件后，完全恢复会使数据库恢复正常运行。完全恢复正在将数据库恢复到最近的某个时间点，而不会丢失任何已提交的事务。本章中描述的完整恢复操作受特定条件的限制。零数据丢失恢复设备（恢复设备）大大减少了连续归档重做日志备份之间存在的潜在数据丢失窗口。您可以在数据库故障的几个亚之内恢复目标数据库。您必须根据恢复目标以及丢失的数据库文件来规划数据库还原和恢复策略。用于确定哪些文件需要还原或恢复的技术取决于丢失的文件类型。当任何多路复用控制文件变得不可访问时，数据库立即关闭。关于何时以及如何恢复的决定取决于数据库的状态和数据文件的位置。确定缺少哪些数据文件的简单方法是运行VALIDATE DATABASE命令。尽管VALIDATE DATABASE是确定文件是否不可访问的好方法，但您可能希望使用SQL查询来获取更详细的信息。建议您记录数据库的DBID。预览备份可帮助您确保还原和恢复操作所需的所有备份都可用。异地备份存储在远程位置，例如安全存储设施，除非媒体管理器检索媒体，否则无法恢复。验证备份可确定备份是否可用。RMAN会根据需要自动从备份还原存档的重做日志文件以执行恢复。RMAN使您可以覆盖已还原的归档重做日志文件的默认位置。要管理用于包含已还原日志的磁盘空间，可以在一个RUN块中多次指定已归档日志的还原目标，以在多个目标之间分配已还原的日志。对于使用某些技术加密的备份，您必须提供用于解密这些备份的密码。在完全恢复期间，RMAN将还原一个或多个数据文件，然后应用还原备份后生成的所有重做。您使用RESTORE和RECOVER命令来还原和恢复数据库。如果无法将数据文件还原到其默认位置，则必须更新控制文件以反映数据文件的新位置。此方案假定数据库trgt已丢失其大部分或全部数据文件。它还假定数据库使用快速恢复区域。使用带有TABLESPACE选项的RESTORE和RECOVER命令执行表空间的完全恢复您可以通过切换到无法访问的数据文件的映像副本来恢复数据库。这种技术比传统的恢复和恢复花费的时间更少，因为不需要恢复备份。当一个或多个数据文件损坏时，您可以通过切换到损坏的数据文件的现有映像副本来执行恢复。您可以通过切换到损坏的数据文件的映像副本而不是还原这些数据文件来执行完整的数据库恢复。RMAN和Oracle Enterprise Manager云控制（云控制）为多租户环境中的备份和恢复提供全面支持。恢复整个CDB时，可以在单个操作中恢复根和所有PDB。如果发生仅影响根的数据损坏或用户错误，您可以考虑仅恢复根。您可以执行一个或多个PDB的完全恢复，而不会影响其他打开的PDB的操作。企业管理器云控制（云控制）提供了恢复PDB的界面。使用RECOVER命令使用预包装备份执行完全恢复。预打印备份用于在PDB插入当前CDB之前的某个时间将PDB恢复并恢复到其状态。 RMAN使用预包装备份执行PDB的完全恢复。在将PDB迁移到当前目标CDB之前，在源非CDB或源CDB上创建了这些预制备份备份。此示例使用预刷新备份执行目标CDB prod_cdb中PDB my_pdb的完全恢复。由于不同PDB中的表空间可以具有相同的名称，以消除歧义，因此必须直接连接到PDB以恢复其一个或多个表空间。相反，由于数据文件编号和路径在CDB中是唯一的，因此在恢复PDB数据文件时可以连接到根或PDB。Oracle企业管理器云控制（云控制）提供了一个用于恢复PDB中的表空间的界面。通过切换到副本来恢复CDB比传统的恢复和恢复更快。RMAN使您可以使用RESTORE和RECOVER命令执行应用程序容器的完全恢复，而不会影响CDB中的其他容器。使用RESTORE和RECOVER命令执行应用程序根目录的完全恢复。您可以执行应用程序容器的完全恢复，其中包括应用程序根目录及其所有应用程序PDB，而不会影响CDB中的其他PDB。使用RESTORE和RECOVER命令执行一个或多个应用程序PDB的完全恢复。您可以使用RESTORE和RECOVER命令将稀疏数据库恢复到最近的时间点。执行包含稀疏数据文件的数据库的恢复与执行整个数据库的恢复非常相似。执行稀疏CDB的恢复与执行稀疏数据库的完全恢复非常相似。在根级别或CDB级别连接时，可以恢复稀疏PDB。">执行完整数据库恢复</a> ”</span> 。
                           </p>
                           <p>本章介绍如何恢复单个表空间或数据库。</p>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV99999"></a><div class="props_rev_3"><a id="GUID-D10F65F9-7B55-4AE5-9353-B20A4017AF9D" name="GUID-D10F65F9-7B55-4AE5-9353-B20A4017AF9D"></a><h4 id="BRADV-GUID-D10F65F9-7B55-4AE5-9353-B20A4017AF9D" class="sect4"><span class="enumeration_section">1.8.2</span>用户管理的备份和恢复文档路线图</h4>
                  <div>
                     <p>本节提供了在<span class="italic">不</span>使用RMAN作为主要备份和恢复解决方案时导航备份和恢复文档的路线图。
                     </p>
                     <p>在这种情况下，您必须使用第三方工具进行备份，并使用SQL或SQL * Plus命令执行恢复。按以下顺序阅读章节：</p>
                     <ol>
                        <li>
                           <p>阅读<a href="user-managed-database-backups.html#GUID-2193FAD0-F62C-4671-9272-55E8BD7367DC">制作用户管理的数据库备份</a> 。
                           </p>
                           <p>本章介绍如何使用第三方工具进行备份。</p>
                        </li>
                        <li>
                           <p>阅读<a href="user-managed-flashback-dbpitr.html#GUID-704F6AB0-04C4-4345-913B-B316DD06D05E" title="您可以使用SQL * Plus在非CDB，多租户容器数据库（CDB）和可插拔数据库（PDB）上执行闪回数据库操作。Oracle闪回数据库将整个数据库或整个PDB返回到先前的状态，而无需从备份中还原文件。SQL * Plus FLASHBACK DATABASE命令执行与RMAN FLASHBACK DATABASE命令相同的功能：它将数据库返回到先前状态。使用SQL * Plus FLASHBACK DATABASE命令将整个多租户容器数据库（CDB）返回到先前状态。SQL * Plus FLASHBACK DATABASE命令执行与RMAN FLASHBACK DATABASE命令相同的功能。使用SQL * Plus FLASHBACK DATABASE命令将特定可插拔数据库（PDB）返回到先前状态。多租户容器数据库（CDB）中的其余PDB不受单个PDB上的闪回操作的影响。当归档重做日志文件存在于默认位置时，无需其他设置即可执行恢复。要在归档重做日志文件存储在非缺省位置时执行介质恢复，必须指定归档重做日志文件的位置。通常，当介质故障导致一个或多个数据文件不可访问时，您将执行数据库的完全恢复。在完整数据库恢复期间，您使用所有可用的重做将数据库恢复到当前SCN。在数据库未打开时执行完全恢复时，您可以在一次操作中恢复所有损坏的数据文件，或者在单独的操作中执行每个损坏的数据文件的单独恢复。在数据库打开时，您可以在数据库中执行非SYSTEM数据文件的完全恢复。Oracle数据库为整个多租户容器数据库（CDB）执行崩溃和实例恢复。您无法恢复单个可插拔数据库（PDB）。不完全恢复也称为数据库时间点恢复。在基于取消的恢复中，通过提示您使用归档重做日志文件的建议文件名来进行恢复。指定CANCEL而不是文件名或将所有重做应用于数据文件时，恢复将停止。您可以为不完全恢复的终点指定SCN或时间。">执行用户管理的数据库闪回和恢复</a> 。
                           </p>
                           <p>本章介绍如何使用SQL语句<code class="codeph">FLASHBACK DATABASE</code>并使用SQL * Plus <code class="codeph">RECOVER</code>命令执行恢复。
                           </p>
                        </li>
                        <li>
                           <p>阅读<a href="user-managed-recovery-advanced.html#GUID-24903185-E2CE-452E-8370-E4A47AD2632B">执行用户管理的恢复：高级方案</a> 。
                           </p>
                           <p>本章介绍了各种恢复方案。</p>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
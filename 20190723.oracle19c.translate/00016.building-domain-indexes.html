<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>构建域索引</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T07:34:53-08:00"></meta>
      <meta name="dcterms.title" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96431-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-extensible-indexing.html" title="Previous" type="text/html"></link>
      <link rel="next" href="defining-operators.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-extensible-indexing.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="defining-operators.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据盒式开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="building-data-cartridges.html" property="item" typeof="WebPage"><span property="name">构建数据磁带</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">构建域索引</li>
            </ol>
            <a id="GUID-E370B5E4-BAC0-49C6-B17D-830B3A507FB4" name="GUID-E370B5E4-BAC0-49C6-B17D-830B3A507FB4"></a><a id="ADDCI290"></a>
            
            <h2 id="ADDCI-GUID-E370B5E4-BAC0-49C6-B17D-830B3A507FB4" class="sect2"><span class="enumeration_chapter">8</span>构建域索引</h2>
         </header>
         <div class="ind">
            <div>
               <p>考虑域索引和<code class="codeph">ODCIIndex</code>接口：如何使用域索引，它们的分区，适用的限制和迁移过程。
               </p>
               <p>如果使用用户管理的域索引，则其实现的特定信息位于<a href="user-managed-local-domain-indexes.html#GUID-D6B24522-6E9F-421D-92A9-8416E25BF04F">用户管理的本地域索引中</a></p>
            </div><a id="ADDCI4409"></a><div class="props_rev_3"><a id="GUID-3D75C913-57D6-4C65-9517-2814A53BB3B5" name="GUID-3D75C913-57D6-4C65-9517-2814A53BB3B5"></a><h3 id="ADDCI-GUID-3D75C913-57D6-4C65-9517-2814A53BB3B5" class="sect3"><span class="enumeration_section">8.1</span>索引类型和域索引概述</h3>
               <div>
                  <p>一个<a id="d19739e120" class="indexterm-anchor"></a> <strong class="term">域索引</strong>是为专用域设计的索引，例如空间或图像处理。用户可以在设计者创建<strong class="term">indextype</strong>后构建给定类型的域索引。域索引的行为特定于行业，业务功能或其他特殊目的;您必须在墨盒开发期间指定它。
                  </p>
                  <p>系统管理的域索引方法（Oracle Database 11g第1版中的新方法）需要较少的编程开销，并且比早期的用户管理域索引提供更好的性能。它解决了用户管理方法的局限性，具有以下优点：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>由于内核代表用户执行了更多维护任务，因此不需要对表和分区维护操作进行编程支持。这些操作是通过在服务器中执行操作来实现的，因此需要由用户编码的非常少量的用户定义的接口例程。然后，盒代码可能相对不知道分区问题。</p>
                     </li>
                     <li>
                        <p>必须管理以支持本地分区域索引的对象数与非分区域索引的对象数相同。对于本地分区索引，域索引存储表是针对基表进行分配的（使用系统分区表）;因此，域索引存储表的数量不会随着分区数量的增加而增加。</p>
                     </li>
                     <li>
                        <p>现在，一组查询和DML语句可以访问和操作系统分区存储表，从而促进游标共享和增强性能。</p>
                     </li>
                  </ul>
                  <p>Oracle建议您使用系统管理的域索引而不是用户管理的域索引开发新的应用程序。</p>
                  <p>Indextypes封装了复杂域的搜索和检索方法，如文本，空间和图像处理。indextype类似于Oracle数据库提供的索引。不同之处在于您提供了实现indextype的应用程序软件。</p>
                  <p>indextype有两个主要组件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>实现indextype行为的方法，例如创建和扫描索引</p>
                     </li>
                     <li>
                        <p>indextype支持的运算符，例如<code class="codeph">Contains()</code>或<code class="codeph">Overlaps()</code></p>
                     </li>
                  </ul>
                  <p>要创建索引类型，您必须执行以下步骤：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>定义支持的运算符并创建实现它们的函数</p>
                     </li>
                     <li>
                        <p>创建实现<code class="codeph">ODCIIndex</code>接口的方法，并定义封装它们的类型，称为<a id="d19739e170" class="indexterm-anchor"></a> <strong class="term">实施类型</strong></p>
                     </li>
                     <li>
                        <p>创建indextype，指定实现类型并列出运算符<a id="d19739e177" class="indexterm-anchor"></a>绑定</p>
                     </li>
                  </ul>
                  <p>在这方面：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>接口意味着一组逻辑方法规范（不是单独的模式对象）</p>
                     </li>
                     <li>
                        <p><code class="codeph">ODCIIndex</code>接口表示一组索引定义，维护和扫描例程规范</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-3D75C913-57D6-4C65-9517-2814A53BB3B5__GUID-DAD8CA42-72D6-4F63-B1CB-925B67752C31">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="defining-operators.html#GUID-E10C1C49-E5DA-45E9-959D-E203DD964FBF">定义运算符</a></p>
                  </div>
               </div>
            </div><a id="ADDCI4410"></a><div class="props_rev_3"><a id="GUID-7E2F4550-36F8-4417-9983-B4DE8277BB89" name="GUID-7E2F4550-36F8-4417-9983-B4DE8277BB89"></a><h3 id="ADDCI-GUID-7E2F4550-36F8-4417-9983-B4DE8277BB89" class="sect3"><span class="enumeration_section">8.2</span> ODCIIndex接口</h3>
               <div>
                  <p><code class="codeph">ODCIIndex</code>接口指定实现索引类型必须提供的所有例程。例程必须实现为类型方法。
                  </p>
                  <p><code class="codeph">ODCIIndex</code>接口包含以下方法类：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>索引定义方法</p>
                     </li>
                     <li>
                        <p>指数维护方法</p>
                     </li>
                     <li>
                        <p>索引扫描方法</p>
                     </li>
                     <li>
                        <p>索引元数据方法</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7E2F4550-36F8-4417-9983-B4DE8277BB89__GUID-DA714F91-7C72-4473-9EA6-339AF4760F23">
                     <p class="notep1">也可以看看：</p>
                     <p>用于方法签名和参数描述的<a href="extensible-indexing-interface.html#GUID-78B9066F-6262-447D-80C1-EFB39C6930F1">可扩展索引接口</a></p>
                  </div>
               </div><a id="ADDCI4411"></a><div class="props_rev_3"><a id="GUID-CDFB6CDB-22E7-4B2B-9588-F52A45777705" name="GUID-CDFB6CDB-22E7-4B2B-9588-F52A45777705"></a><h4 id="ADDCI-GUID-CDFB6CDB-22E7-4B2B-9588-F52A45777705" class="sect4"><span class="enumeration_section">8.2.1</span>索引定义方法</h4>
                  <div>
                     <p>当用户在indextype的索引上发出<code class="codeph">CREATE</code> ， <code class="codeph">ALTER</code> ， <code class="codeph">DROP</code>或<code class="codeph">TRUNCATE</code>语句时，应用程序调用索引定义方法。
                     </p>
                  </div><a id="ADDCI4412"></a><div class="props_rev_3"><a id="GUID-13E708DB-ACD1-4154-8D1C-796915300A08" name="GUID-13E708DB-ACD1-4154-8D1C-796915300A08"></a><h5 id="ADDCI-GUID-13E708DB-ACD1-4154-8D1C-796915300A08" class="sect5"><span class="enumeration_section">8.2.1.1</span> ODCIIndexCreate（）</h5>
                     <div>
                        <div class="section">
                           <p>当用户发出引用indextype的<code class="codeph">CREATE INDEX</code>语句时，Oracle会调用您的<a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a>方法，并将其作为<code class="codeph">CREATE</code> <code class="codeph">INDEX</code>一部分指定的任何参数传递给它...<code class="codeph">PARAMETERS</code> （...）语句，加上索引的描述。
                           </p>
                           <p>通常，此方法会创建计划存储索引数据的表或文件。除非基表为空，否则该方法也应该构建索引。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADDCI4413"></a><div class="props_rev_3"><a id="GUID-B1AEC202-33E1-46A7-93A3-F7BD66C15F14" name="GUID-B1AEC202-33E1-46A7-93A3-F7BD66C15F14"></a><h5 id="ADDCI-GUID-B1AEC202-33E1-46A7-93A3-F7BD66C15F14" class="sect5"><span class="enumeration_section">8.2.1.2</span> ODCIIndexAlter（）</h5>
                     <div>
                        <div class="section">
                           <p>当用户发出引用您的<code class="codeph">ALTER INDEX</code>的<code class="codeph">ALTER INDEX</code>语句时，Oracle会调用您的<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>方法，并将要更改的域索引的描述与任何指定的参数一起传递给它。此方法也被称为使用<code class="codeph">REBUILD</code>或<code class="codeph">RENAME</code>选项处理<code class="codeph">ALTER INDEX</code> 。您的方法必须执行的操作取决于域索引的性质，因此详细信息将留给您作为indextype的设计者。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADDCI4414"></a><div class="props_rev_3"><a id="GUID-2D19D9BF-04A5-48A1-AA01-6B9A1FDCDC96" name="GUID-2D19D9BF-04A5-48A1-AA01-6B9A1FDCDC96"></a><h5 id="ADDCI-GUID-2D19D9BF-04A5-48A1-AA01-6B9A1FDCDC96" class="sect5"><span class="enumeration_section">8.2.1.3</span> ODCIIndexDrop（）</h5>
                     <div>
                        <div class="section">
                           <p>当用户通过发出<code class="codeph">DROP</code> <code class="codeph">INDEX</code>语句销毁indextype的<code class="codeph">INDEX</code> ，Oracle会调用您的<a href="extensible-indexing-interface.html#GUID-F128CB3B-6B3E-41C3-A623-67BCB5BC9292">ODCIIndexDrop（）</a>方法。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADDCI4415"></a><div class="props_rev_3"><a id="GUID-5402BC29-7F7A-4908-A488-626F63804292" name="GUID-5402BC29-7F7A-4908-A488-626F63804292"></a><h4 id="ADDCI-GUID-5402BC29-7F7A-4908-A488-626F63804292" class="sect4"><span class="enumeration_section">8.2.2</span>指数维护方法</h4>
                  <div>
                     <p>当用户在具有由indextype索引的列或对象类型属性的表上发出<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>语句时，将调用索引维护方法。
                     </p>
                  </div><a id="ADDCI4416"></a><div class="props_rev_3"><a id="GUID-AC74B2D7-C821-47D6-B282-774A15F91066" name="GUID-AC74B2D7-C821-47D6-B282-774A15F91066"></a><h5 id="ADDCI-GUID-AC74B2D7-C821-47D6-B282-774A15F91066" class="sect5"><span class="enumeration_section">8.2.2.1</span> ODCIIndexInsert（）</h5>
                     <div>
                        <div class="section">
                           <p>当用户插入记录时，Oracle会调用您的<a href="extensible-indexing-interface.html#GUID-EF42025B-6DE2-4F2A-90EF-62775EE0EED6">ODCIIndexInsert（）</a>方法，并在索引列和相应的行标识符中传递新值。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADDCI4417"></a><div class="props_rev_3"><a id="GUID-40DC06A1-8E70-49F1-BE7F-330784902FDA" name="GUID-40DC06A1-8E70-49F1-BE7F-330784902FDA"></a><h5 id="ADDCI-GUID-40DC06A1-8E70-49F1-BE7F-330784902FDA" class="sect5"><span class="enumeration_section">8.2.2.2</span> ODCIIndexDelete（）</h5>
                     <div>
                        <div class="section">
                           <p>当用户删除记录时，Oracle会调用您的<a href="extensible-indexing-interface.html#GUID-4B2E080D-FE8B-4598-9084-56FBE255196B">ODCIIndexDelete（）</a>方法，并将索引列中的旧值和相应的行标识符传递给它。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADDCI4418"></a><div class="props_rev_3"><a id="GUID-DE21E865-5E38-4CC5-BA9F-CB47A92BAEA6" name="GUID-DE21E865-5E38-4CC5-BA9F-CB47A92BAEA6"></a><h5 id="ADDCI-GUID-DE21E865-5E38-4CC5-BA9F-CB47A92BAEA6" class="sect5"><span class="enumeration_section">8.2.2.3</span> ODCIIndexUpdate（）</h5>
                     <div>
                        <div class="section">
                           <p>当用户更新记录时，Oracle会调用您的<a href="extensible-indexing-interface.html#GUID-CB42E738-EFD1-4053-9DDF-BEF455F92815">ODCIIndexUpdate（）</a>方法，并在索引列中传递旧值和新值以及相应的行标识符。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADDCI4419"></a><div class="props_rev_3"><a id="GUID-F75A0756-63B6-44D1-8C7F-8863557B542E" name="GUID-F75A0756-63B6-44D1-8C7F-8863557B542E"></a><h4 id="ADDCI-GUID-F75A0756-63B6-44D1-8C7F-8863557B542E" class="sect4"><span class="enumeration_section">8.2.3</span>索引扫描方法</h4>
                  <div>
                     <p>索引扫描方法指定基于索引的实现，用于评估包含indextype支持的运算符的谓词。索引扫描涉及初始化，获取行或行标识符以及返回所有行后清理的方法。</p>
                     <p>有两种评估运算符谓词并返回结果行的模式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">Precompute All</span> ：计算<a href="extensible-indexing-interface.html#GUID-53F2321C-B0F8-4783-AC1B-056372A0C073">ODCIIndexStart（）中</a>的整个结果集。迭代结果，从每次调用返回一批行到<a href="extensible-indexing-interface.html#GUID-BB601420-A858-46E3-A9AC-3433220D4F82">ODCIIndexFetch（）</a> 。此模式适用于必须查看整个结果集以计算每个候选行的排名，相关性等的运算符。如果您的应用程序需要，也可以一次返回一行。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">增量计算</span> ：在每次调用<a href="extensible-indexing-interface.html#GUID-BB601420-A858-46E3-A9AC-3433220D4F82">ODCIIndexFetch（）时</a>计算一批结果行。此模式适用于可以一次确定一个候选行而无需查看整个结果集的运算符。如果您的应用程序需要，也可以一次返回一行。
                           </p>
                        </li>
                     </ul>
                  </div><a id="ADDCI4420"></a><div class="props_rev_3"><a id="GUID-332D6989-8D16-4A3F-A678-EC02C2F9FAAF" name="GUID-332D6989-8D16-4A3F-A678-EC02C2F9FAAF"></a><h5 id="ADDCI-GUID-332D6989-8D16-4A3F-A678-EC02C2F9FAAF" class="sect5"><span class="enumeration_section">8.2.3.1</span> ODCIIndexStart（）</h5>
                     <div>
                        <div class="section">
                           <p>Oracle在索引扫描开始时调用<code class="codeph">ODCIIndexStart()</code>方法，并在索引和运算符上传递信息。通常，这种方法：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>初始化扫描中使用的数据结构</p>
                              </li>
                              <li>
                                 <p>解析并执行查询存储索引数据的表的SQL语句</p>
                              </li>
                              <li>
                                 <p>保存fetch和cleanup方法所需的任何状态信息，并返回状态或句柄</p>
                              </li>
                              <li>
                                 <p>有时会生成一组结果行，以便在第一次调用<code class="codeph">ODCIIndexFetch()</code></p>
                              </li>
                           </ul>
                           <p>索引和运算符的信息不会传递给fetch和cleanup方法。因此， <code class="codeph">ODCIIndexStart()</code>必须保存必须在索引扫描例程之间共享的<strong class="term">状态</strong>数据，并通过输出<code class="codeph">sctx</code>参数返回它。要共享大量状态数据，请分配游标持续时间内存并将句柄返回到<code class="codeph">sctx</code>参数中的内存。
                           </p>
                           <p>作为成员方法， <code class="codeph">ODCIIndexFetch()</code>和<code class="codeph">ODCIIndexClose()</code>传递内置的<code class="codeph">SELF</code>参数，通过它可以访问状态数据。
                           </p>
                           <div class="infoboxnotealso" id="GUID-332D6989-8D16-4A3F-A678-EC02C2F9FAAF__GUID-5EC34315-6754-4607-BBD2-31930A3E0CB8">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="extensible-indexing-interface.html#GUID-2F49CDE4-C064-4644-948C-BBF014FDD8C8">ODCIIndexClose（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="extensible-indexing-interface.html#GUID-BB601420-A858-46E3-A9AC-3433220D4F82">ODCIIndexFetch（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="extensible-indexing-interface.html#GUID-53F2321C-B0F8-4783-AC1B-056372A0C073">ODCIIndexStart（）</a></p>
                                 </li>
                                 <li>
                                    <p> <a href="../lnoci/oci-cartridge-functions.html#LNOCI190" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> ，了解有关内存服务和维护上下文的信息</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADDCI4421"></a><div class="props_rev_3"><a id="GUID-FF098D3E-BA59-41ED-BA00-0D8D9352AA03" name="GUID-FF098D3E-BA59-41ED-BA00-0D8D9352AA03"></a><h5 id="ADDCI-GUID-FF098D3E-BA59-41ED-BA00-0D8D9352AA03" class="sect5"><span class="enumeration_section">8.2.3.2</span> ODCIIndexFetch（）</h5>
                     <div>
                        <div class="section">
                           <p>Oracle调用您的<code class="codeph">ODCIIndexFetch()</code>方法返回满足运算符谓词的下一批行的行标识符，并将<code class="codeph">ODCIIndexStart()</code>或先前的<code class="codeph">ODCIIndexFetch()</code>调用返回的状态数据传递给它。运算符谓词是根据运算符表达式（名称和参数）以及运算符返回值的下限和上限指定的。因此， <code class="codeph">ODCIIndexFetch()</code>必须返回运算符返回值落在指定范围内的行的行标识符。要指示索引扫描的结束，请返回<code class="codeph">NULL</code> 。</p>
                           <div class="infoboxnotealso" id="GUID-FF098D3E-BA59-41ED-BA00-0D8D9352AA03__GUID-BF711DCA-9F52-40F9-9831-B72E77CFE5E9">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="extensible-indexing-interface.html#GUID-BB601420-A858-46E3-A9AC-3433220D4F82">ODCIIndexFetch（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="extensible-indexing-interface.html#GUID-53F2321C-B0F8-4783-AC1B-056372A0C073">ODCIIndexStart（）</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADDCI4422"></a><div class="props_rev_3"><a id="GUID-49422598-FA3C-467F-9A16-58F6A4489F80" name="GUID-49422598-FA3C-467F-9A16-58F6A4489F80"></a><h5 id="ADDCI-GUID-49422598-FA3C-467F-9A16-58F6A4489F80" class="sect5"><span class="enumeration_section">8.2.3.3</span> ODCIIndexClose（）</h5>
                     <div>
                        <div class="section">
                           <p>当光标关闭或重用时，Oracle会调用<a href="extensible-indexing-interface.html#GUID-2F49CDE4-C064-4644-948C-BBF014FDD8C8">ODCIIndexClose（）</a>方法，并将其传递给当前状态。<a href="extensible-indexing-interface.html#GUID-2F49CDE4-C064-4644-948C-BBF014FDD8C8">ODCIIndexClose（）</a>应该执行indextype所需的任何清理或闭包操作。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADDCI4423"></a><div class="props_rev_3"><a id="GUID-DDB221CF-5DB5-4E0B-92A8-839146FD78B7" name="GUID-DDB221CF-5DB5-4E0B-92A8-839146FD78B7"></a><h4 id="ADDCI-GUID-DDB221CF-5DB5-4E0B-92A8-839146FD78B7" class="sect4"><span class="enumeration_section">8.2.4</span>索引元数据方法</h4>
                  <div>
                     <p><a href="extensible-indexing-interface.html#GUID-B4A15D4C-A136-494E-BA05-4E8DD776C118">ODCIIndexGetMetadata（）</a>方法是可选的。如果实现它，导出实用程序将调用它以将特定于实现的元数据写入导出转储文件。此元数据可能是策略信息，版本信息，单个用户设置等，它们未存储在系统目录中。元数据作为匿名PL / SQL块写入转储文件，这些块在创建关联索引之前的导入时间执行。
                     </p>
                  </div>
               </div><a id="ADDCI4424"></a><div class="props_rev_3"><a id="GUID-477F9559-FC49-438A-B779-B3925C194125" name="GUID-477F9559-FC49-438A-B779-B3925C194125"></a><h4 id="ADDCI-GUID-477F9559-FC49-438A-B779-B3925C194125" class="sect4"><span class="enumeration_section">8.2.5</span>索引方法执行期间的事务语义</h4>
                  <div>
                     <p>索引接口方法（索引定义方法除外， <code class="codeph">ODCIIndexCreate()</code> ， <code class="codeph">ODCIIndexAlter()</code>和<code class="codeph">ODCIIndexDrop()</code> ）在触发这些操作的同一事务下调用。因此，这些例程所做的更改是原子的，并且基于父事务提交或中止。要实现此目的，您可以在不同的索引类型例程中执行的操作的性质存在某些限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>索引定义例程没有限制。</p>
                        </li>
                        <li>
                           <p>索引维护例程只能执行数据操作语言语句。这些DML语句无法更新创建域索引的基表。</p>
                        </li>
                        <li>
                           <p>索引扫描例程只能执行SQL查询语句。</p>
                        </li>
                     </ul>
                     <p>例如，如果<code class="codeph">INSERT</code>语句导致调用<code class="codeph">ODCIIndexInsert()</code>例程，则<code class="codeph">ODCIIndexInsert()</code>在与<code class="codeph">INSERT</code>相同的事务下运行。 <code class="codeph">ODCIIndexInsert()</code>例程可以执行任意数量的DML语句（例如，插入到索引组织的表中）。如果原始事务中止，则回滚indextype例程所做的所有更改。
                     </p>
                     <p>但是，如果indextype例程导致数据库外部的更改（如写入外部文件），则无法确保事务语义。</p>
                     <div class="infoboxnotealso" id="GUID-477F9559-FC49-438A-B779-B3925C194125__GUID-08B2931D-C5A1-43EC-A26A-95E136C2DF69">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a></p>
                           </li>
                           <li>
                              <p><a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a></p>
                           </li>
                           <li>
                              <p><a href="extensible-indexing-interface.html#GUID-F128CB3B-6B3E-41C3-A623-67BCB5BC9292">ODCIIndexDrop（）</a></p>
                           </li>
                           <li>
                              <p><a href="extensible-indexing-interface.html#GUID-EF42025B-6DE2-4F2A-90EF-62775EE0EED6">ODCIIndexInsert（）</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADDCI4425"></a><div class="props_rev_3"><a id="GUID-EC8910C7-C3D0-4ABB-8076-627AD2532E65" name="GUID-EC8910C7-C3D0-4ABB-8076-627AD2532E65"></a><h4 id="ADDCI-GUID-EC8910C7-C3D0-4ABB-8076-627AD2532E65" class="sect4"><span class="enumeration_section">8.2.6</span>索引定义例程的事务语义</h4>
                  <div>
                     <p>索引定义例程对其中的操作性质没有任何限制。考虑<code class="codeph">ODCIIndexCreate()</code>来理解这种差异。要在<code class="codeph">ODCIIndexCreate()</code>执行的一组典型操作可能是：</p>
                     <ol>
                        <li>
                           <p>创建一个索引组织表。</p>
                        </li>
                        <li>
                           <p>将数据插入到索引组织表中。</p>
                        </li>
                        <li>
                           <p>在索引组织表的列上创建二级索引。</p>
                        </li>
                     </ol>
                     <p>为了允许<code class="codeph">ODCIIndexCreate()</code>执行任意序列的DDL和DML语句，每个语句都被认为是一个独立的操作。因此， <code class="codeph">ODCIIndexCreate()</code>所做的更改不保证是原子的。其他索引定义例程也是如此。
                     </p>
                     <div class="infoboxnotealso" id="GUID-EC8910C7-C3D0-4ABB-8076-627AD2532E65__GUID-B48A8756-B144-48B7-853A-E3A1383C609E">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a></p>
                     </div>
                  </div>
               </div><a id="ADDCI4426"></a><div class="props_rev_3"><a id="GUID-DDD76B82-64AC-444D-AB0E-70E2E002F6A2" name="GUID-DDD76B82-64AC-444D-AB0E-70E2E002F6A2"></a><h4 id="ADDCI-GUID-DDD76B82-64AC-444D-AB0E-70E2E002F6A2" class="sect4"><span class="enumeration_section">8.2.7</span>索引方法执行期间的一致性语义</h4>
                  <div>
                     <p>索引维护（和扫描例程）使用与执行DML（或查询）操作的顶级SQL语句相同的快照执行。这使索引方法处理的索引数据与基表中的数据保持一致。</p>
                  </div>
               </div><a id="ADDCI4427"></a><div class="props_rev_3"><a id="GUID-EDB4CEED-46AD-45F3-99F7-6BC7D806BFEB" name="GUID-EDB4CEED-46AD-45F3-99F7-6BC7D806BFEB"></a><h4 id="ADDCI-GUID-EDB4CEED-46AD-45F3-99F7-6BC7D806BFEB" class="sect4"><span class="enumeration_section">8.2.8</span>索引方法执行期间的权限</h4>
                  <div>
                     <p>Indextype例程始终作为索引的所有者执行。为了支持这一点，索引访问驱动程序在调用indextype例程之前动态地将用户模式更改为索引所有者。</p>
                     <p>对于某些操作，indextype例程将信息存储在indextype设计器所拥有的表中。indextype实现必须在单独的例程中执行这些操作，该例程使用definer的特权执行。</p>
                     <div class="infoboxnotealso" id="GUID-EDB4CEED-46AD-45F3-99F7-6BC7D806BFEB__GUID-2ACA2413-D377-499F-A851-0E5FD3D06409">
                        <p class="notep1">也可以看看：</p>
                        <p> 有关<code class="codeph">CREATE TYPE</code>详细信息，请<a href="../sqlrf/CREATE-TYPE.html#SQLRF-GUID-E72E3EE6-DE95-4F58-8941-E2F76D0EAE80" target="_blank"><span class="variable" translate="no">Oracle Database SQL Language Reference</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADDCI4428"></a><div class="props_rev_3"><a id="GUID-F4914337-6E63-4008-BAB0-72AA1E9FA4E6" name="GUID-F4914337-6E63-4008-BAB0-72AA1E9FA4E6"></a><h3 id="ADDCI-GUID-F4914337-6E63-4008-BAB0-72AA1E9FA4E6" class="sect3"><span class="enumeration_section">8.3</span>创建，删除和注释索引类型</h3>
               <div>
                  <p>考虑操纵索引类型的SQL语句。</p>
                  <div class="infoboxnotealso" id="GUID-F4914337-6E63-4008-BAB0-72AA1E9FA4E6__GUID-8C98C494-8F13-48F1-A13C-357BC0BF72A7">
                     <p class="notep1">也可以看看：</p>
                     <p>有关这些SQL语句的完整描述，请<a href="../sqlrf/Introduction-to-Oracle-SQL.html#SQLRF-GUID-049B7AE8-11E1-4110-B3E4-D117907D77AC" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                  </div>
               </div><a id="ADDCI4430"></a><a id="ADDCI4429"></a><div class="props_rev_3"><a id="GUID-082C7D3C-541E-44D8-93F0-9E6EDC779820" name="GUID-082C7D3C-541E-44D8-93F0-9E6EDC779820"></a><h4 id="ADDCI-GUID-082C7D3C-541E-44D8-93F0-9E6EDC779820" class="sect4"><span class="enumeration_section">8.3.1</span>创建索引类型</h4>
                  <div>
                     <div class="section">
                        <p>实现<code class="codeph">ODCIIndex</code>接口并定义实现类型后，可以通过指定indextype支持的运算符列表并引用实现索引接口的类型来创建新的索引类型。使用信息检索示例，DDL语句用于定义新的索引类型<code class="codeph">TextIndexType</code> ，它支持<code class="codeph">Contains</code>运算符，其实现由<code class="codeph">TextIndexMethods</code>类型<code class="codeph">TextIndexMethods</code> ，如<a href="building-domain-indexes.html#GUID-082C7D3C-541E-44D8-93F0-9E6EDC779820__BHABFJIG">例8-1所示</a> 。
                        </p>
                        <p>除了<code class="codeph">ODCIIndex</code>接口例程之外，实现类型还必须实现<a href="extensible-indexing-interface.html#GUID-28AC1C1B-6B6B-446F-A6C9-EEF4A4842D5F">ODCIGetInterfaces（）</a>例程。此例程返回实现类型实现的接口版本。Oracle在执行<code class="codeph">CREATE INDEXTYPE</code>时调用<a href="extensible-indexing-interface.html#GUID-28AC1C1B-6B6B-446F-A6C9-EEF4A4842D5F">ODCIGetInterfaces（）</a>例程。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-082C7D3C-541E-44D8-93F0-9E6EDC779820__BHABFJIG">
                        <p class="titleinexample">例8-1创建索引类型</p><pre class="oac_no_warn" dir="ltr">CREATE INDEXTYPE TextIndexType FOR Contains（VARCHAR2，VARCHAR2）使用TextIndexMethods和SYSTEM MANAGED STORAGE TABLES;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4432"></a><a id="ADDCI4431"></a><div class="props_rev_3"><a id="GUID-C71605E0-F955-4439-B8BB-F896C2393E01" name="GUID-C71605E0-F955-4439-B8BB-F896C2393E01"></a><h4 id="ADDCI-GUID-C71605E0-F955-4439-B8BB-F896C2393E01" class="sect4"><span class="enumeration_section">8.3.2</span>删除索引类型</h4>
                  <div>
                     <div class="section">
                        <p>要删除indextype的定义，请使用<code class="codeph">DROP</code>语句，如<a href="building-domain-indexes.html#GUID-C71605E0-F955-4439-B8BB-F896C2393E01__BHAGCEBA">例8-2所示</a> ：</p>
                        <p>默认的<code class="codeph">DROP</code>行为是<code class="codeph">DROP RESTRICT</code>语义，也就是说，如果存在一个或多个使用indextype的域索引，则不允许<code class="codeph">DROP</code>操作。用户可以使用<code class="codeph">FORCE</code>选项覆盖默认行为，该选项会删除indextype并将任何依赖域索引标记为无效。
                        </p>
                        <div class="infoboxnotealso" id="GUID-C71605E0-F955-4439-B8BB-F896C2393E01__GUID-B06FBF18-57F1-44EC-B80F-5D1C00B4BC5B">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="building-domain-indexes.html#GUID-F667736E-0314-4A65-970F-0A3A580DEF6F">Object Dependencies_ Drop Semantics_ and Validation</a> ”</span> ，了解有关对象依赖性和删除语义的详细信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C71605E0-F955-4439-B8BB-F896C2393E01__BHAGCEBA">
                        <p class="titleinexample">示例8-2删除IndexType</p><pre class="oac_no_warn" dir="ltr">DROP INDEXTYPE TextIndexType;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4434"></a><a id="ADDCI4433"></a><div class="props_rev_3"><a id="GUID-F023C435-364B-4F2C-BC75-449F46904C17" name="GUID-F023C435-364B-4F2C-BC75-449F46904C17"></a><h4 id="ADDCI-GUID-F023C435-364B-4F2C-BC75-449F46904C17" class="sect4"><span class="enumeration_section">8.3.3</span>评论索引类型</h4>
                  <div>
                     <div class="section">
                        <p>使用<code class="codeph">COMMENT</code>语句提供有关indextype或operator的信息，如<a href="building-domain-indexes.html#GUID-F023C435-364B-4F2C-BC75-449F46904C17__BHACJDCF">例8-3</a>所示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要对indextype发表注释，indextype必须位于您自己的架构中，或者您必须具有<code class="codeph">COMMENT ANY INDEXTYPE</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F023C435-364B-4F2C-BC75-449F46904C17__BHACJDCF">
                        <p class="titleinexample">示例8-3注释INDEXTYPE</p><pre class="oac_no_warn" dir="ltr">对INDEXTYPE的评论TextIndexType IS'由TextIndexMethods类型实现，以支持Contains运算符';</pre></div>
                     <!-- class="example" -->
                  </div><a id="ADDCI4435"></a><div class="props_rev_3"><a id="GUID-A07C5527-C08F-4837-82DA-60042E2FFEED" name="GUID-A07C5527-C08F-4837-82DA-60042E2FFEED"></a><h5 id="ADDCI-GUID-A07C5527-C08F-4837-82DA-60042E2FFEED" class="sect5"><span class="enumeration_section">8.3.3.1</span> INDEXTYPE注释</h5>
                     <div>
                        <div class="section">
                           <p>可以在以下数据字典视图中查看有关indextypes的注释：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a id="d19739e1905" class="indexterm-anchor"></a><a id="d19739e1907" class="indexterm-anchor"></a> <code class="codeph">ALL_INDEXTYPE_COMMENTS</code>显示当前用户可访问的用户定义索引类型的注释。
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d19739e1916" class="indexterm-anchor"></a><a id="d19739e1918" class="indexterm-anchor"></a> <code class="codeph">DBA_INDEXTYPE_COMMENTS</code>显示数据库中所有用户定义的索引类型的注释。
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d19739e1927" class="indexterm-anchor"></a><a id="d19739e1929" class="indexterm-anchor"></a> <code class="codeph">USER_INDEXTYPE_COMMENTS</code>显示当前用户拥有的用户定义索引类型的注释。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-A07C5527-C08F-4837-82DA-60042E2FFEED__GUID-BD830CD6-009E-4D61-BBFE-81167876D28A">
                           <p class="titleintable">表8-1视图* _INDEXTYPE_COMMENTS</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="视图* _INDEXTYPE_COMMENTS" width="100%" border="1" summary="Column 1 lists the view column; column 2 shows the datatype used; column 3 indicates if a value is required, and column 4 gives the description" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d19739e1948">柱</th>
                                    <th align="left" valign="bottom" width="23%" id="d19739e1951">数据类型</th>
                                    <th align="left" valign="bottom" width="16%" id="d19739e1954">需要</th>
                                    <th align="left" valign="bottom" width="36%" id="d19739e1957">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d19739e1962" headers="d19739e1948 "><pre class="oac_no_warn" dir="ltr">所有者</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d19739e1962 d19739e1951 "><pre class="oac_no_warn" dir="ltr">VARCHAR2（30）</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d19739e1962 d19739e1954 "><pre class="oac_no_warn" dir="ltr">不是NULL</pre></td>
                                    <td align="left" valign="top" width="36%" headers="d19739e1962 d19739e1957 ">
                                       <p>用户定义的索引类型的所有者</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d19739e1975" headers="d19739e1948 "><pre class="oac_no_warn" dir="ltr">INDEXTYPE_NAME</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d19739e1975 d19739e1951 "><pre class="oac_no_warn" dir="ltr">VARCHAR2（30）</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d19739e1975 d19739e1954 "><pre class="oac_no_warn" dir="ltr">不是NULL</pre></td>
                                    <td align="left" valign="top" width="36%" headers="d19739e1975 d19739e1957 ">
                                       <p>用户定义的索引类型的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d19739e1988" headers="d19739e1948 "><pre class="oac_no_warn" dir="ltr">评论</pre></td>
                                    <td align="left" valign="top" width="23%" headers="d19739e1988 d19739e1951 "><pre class="oac_no_warn" dir="ltr">VARCHAR2（4000）</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d19739e1988 d19739e1954 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                    <td align="left" valign="top" width="36%" headers="d19739e1988 d19739e1957 ">
                                       <p>对用户定义的索引类型的注释</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADDCI4436"></a><div class="props_rev_3"><a id="GUID-4807B405-8378-4E55-AC23-B74F1637847E" name="GUID-4807B405-8378-4E55-AC23-B74F1637847E"></a><h3 id="ADDCI-GUID-4807B405-8378-4E55-AC23-B74F1637847E" class="sect3"><span class="enumeration_section">8.4</span>域索引</h3>
               <div>
                  <p>考虑<a id="d19739e2055" class="indexterm-anchor"></a>域索引操作以及如何获得与域索引相关联的元数据。
                  </p>
               </div><a id="ADDCI4437"></a><div class="props_rev_3"><a id="GUID-859B8368-01EA-4AB9-8CEB-74FA433E0219" name="GUID-859B8368-01EA-4AB9-8CEB-74FA433E0219"></a><h4 id="ADDCI-GUID-859B8368-01EA-4AB9-8CEB-74FA433E0219" class="sect4"><span class="enumeration_section">8.4.1</span>域索引操作</h4>
                  <div>
                     <p>考虑如何创建，更改，截断和删除域索引。</p>
                  </div><a id="ADDCI4439"></a><a id="ADDCI4438"></a><div class="props_rev_3"><a id="GUID-61F6BF76-10A4-458F-B1EE-4EA8990B43DF" name="GUID-61F6BF76-10A4-458F-B1EE-4EA8990B43DF"></a><h5 id="ADDCI-GUID-61F6BF76-10A4-458F-B1EE-4EA8990B43DF" class="sect5"><span class="enumeration_section">8.4.1.1</span>创建域索引</h5>
                     <div>
                        <div class="section">
                           <p>可以在表的列上创建域索引，就像B树索引一样。但是，必须明确指定indextype。<a href="building-domain-indexes.html#GUID-61F6BF76-10A4-458F-B1EE-4EA8990B43DF__BHAFCECC">例8-4</a>显示了如何在<a href="using-extensible-indexing.html#GUID-1522A7C4-F4B7-4D98-A1FF-3A0295915A56__BHCBEFIG">示例7-1</a>中声明的<code class="codeph">MyEmployees</code>表上指定索引类型。
                           </p>
                           <p><code class="codeph">INDEXTYPE</code>子句指定要使用的索引类型。<code class="codeph">PARAMETERS</code>子句标识域索引的任何参数，指定为字符串。此字符串未解释地传递给<a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a>例程以创建域索引。在前面的示例中，参数字符串标识文本文档的语言（从而标识要使用的词法分析器）以及在创建文本索引时要忽略的停用词列表。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-61F6BF76-10A4-458F-B1EE-4EA8990B43DF__BHAFCECC">
                           <p class="titleinexample">示例8-4创建域索引</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX ResumeTextIndex On MyEmployees（resume）INDEXTYPE IS TextIndexType PARAMETERS（'：Language English：忽略a an'）;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4441"></a><a id="ADDCI4440"></a><div class="props_rev_3"><a id="GUID-017533B1-AF4C-4989-AC90-6DE86C1FF9A3" name="GUID-017533B1-AF4C-4989-AC90-6DE86C1FF9A3"></a><h5 id="ADDCI-GUID-017533B1-AF4C-4989-AC90-6DE86C1FF9A3" class="sect5"><span class="enumeration_section">8.4.1.2</span>更改域索引</h5>
                     <div>
                        <div class="section">
                           <p>参数字符串未解释地传递给<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>例程，该例程采取适当的操作来更改域索引。此示例指定要在文本索引中忽略的其他停用词。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-017533B1-AF4C-4989-AC90-6DE86C1FF9A3__BHAHFCDB">
                           <p class="titleinexample">示例8-5更改域索引</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX ResumeTextIndex PARAMETERS（'：忽略'）;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4442"></a><div class="props_rev_3"><a id="GUID-29012430-B29A-4CC0-B7B0-FF663C57BDDE" name="GUID-29012430-B29A-4CC0-B7B0-FF663C57BDDE"></a><h5 id="ADDCI-GUID-29012430-B29A-4CC0-B7B0-FF663C57BDDE" class="sect5"><span class="enumeration_section">8.4.1.3</span>重命名域索引</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">ALTER</code>语句可用于重命名域索引，如<a href="building-domain-indexes.html#GUID-29012430-B29A-4CC0-B7B0-FF663C57BDDE__BHAEBCFC">例8-6</a>所示。
                           </p>
                           <p>此表单的声明使Oracle调用<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>方法，该方法采取适当的操作来重命名域索引。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-29012430-B29A-4CC0-B7B0-FF663C57BDDE__BHAEBCFC">
                           <p class="titleinexample">示例8-6重命名域索引</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX ResumeTextIndex RENAME TO ResumeTIdx;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4443"></a><div class="props_rev_3"><a id="GUID-D2229050-C73B-4E87-B8C1-659B6848D93B" name="GUID-D2229050-C73B-4E87-B8C1-659B6848D93B"></a><h5 id="ADDCI-GUID-D2229050-C73B-4E87-B8C1-659B6848D93B" class="sect5"><span class="enumeration_section">8.4.1.4</span>重建域索引</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">ALTER</code>语句可用于重建域索引。
                           </p>
                           <p>像以前一样调用相同的<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>例程，但有关于<code class="codeph">ALTER</code>选项的其他信息。
                           </p>
                           <p>当最终用户对索引组织表（IOT）上的域索引执行<code class="codeph">ALTER INDEX</code> <span class="italic">domain_index</span> <code class="codeph">UPDATE BLOCK REFERENCES</code> ，将调用<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>并设置<code class="codeph">AlterIndexUpdBlockRefs</code>位。这使您有机会更新关于逻辑rowid中存储在域索引中的行的块位置的猜测。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-D2229050-C73B-4E87-B8C1-659B6848D93B__BHAEEHBB">
                           <p class="titleinexample">例8-7重建域索引</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX ResumeTextIndex REBUILD PARAMETERS（'：忽略'）;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4445"></a><a id="ADDCI4444"></a><div class="props_rev_3"><a id="GUID-9BD8B279-C8B3-4563-ADF1-6D8AD1AEBBFE" name="GUID-9BD8B279-C8B3-4563-ADF1-6D8AD1AEBBFE"></a><h5 id="ADDCI-GUID-9BD8B279-C8B3-4563-ADF1-6D8AD1AEBBFE" class="sect5"><span class="enumeration_section">8.4.1.5</span>截断域索引</h5>
                     <div>
                        <div class="section">
                           <p>截断域索引没有明确的声明。但是，当截断相应的基表时，域索引的基础存储表也会被截断。另外， <a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>由<a href="building-domain-indexes.html#GUID-9BD8B279-C8B3-4563-ADF1-6D8AD1AEBBFE__BHAGEEBA">例8-8中</a>的命令调用，它截断<code class="codeph">ResumeTextIndex</code>因为它的<code class="codeph">alter_option</code>设置为<code class="codeph">AlterIndexRebuild</code> ：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-9BD8B279-C8B3-4563-ADF1-6D8AD1AEBBFE__BHAGEEBA">
                           <p class="titleinexample">示例8-8截断域索引</p><pre class="oac_no_warn" dir="ltr">TRUNCATE TABLE MyEmployees;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4447"></a><a id="ADDCI4446"></a><div class="props_rev_3"><a id="GUID-9162DE23-C070-4EDD-8A93-EF0687C5BBF9" name="GUID-9162DE23-C070-4EDD-8A93-EF0687C5BBF9"></a><h5 id="ADDCI-GUID-9162DE23-C070-4EDD-8A93-EF0687C5BBF9" class="sect5"><span class="enumeration_section">8.4.1.6</span>删除域索引</h5>
                     <div>
                        <div class="section">
                           <p>要删除域索引的实例，请使用<code class="codeph">DROP</code> <code class="codeph">INDEX</code>语句，如<a href="building-domain-indexes.html#GUID-9162DE23-C070-4EDD-8A93-EF0687C5BBF9__BHAFBGDD">例8-9</a>所示：</p>
                           <p>这导致Oracle调用<a href="extensible-indexing-interface.html#GUID-F128CB3B-6B3E-41C3-A623-67BCB5BC9292">ODCIIndexDrop（）</a>方法，并传递有关索引的信息。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-9162DE23-C070-4EDD-8A93-EF0687C5BBF9__BHAFBGDD">
                           <p class="titleinexample">示例8-9删除域索引</p><pre class="oac_no_warn" dir="ltr">DROP INDEX ResumeTextIndex;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADDCI4448"></a><div class="props_rev_3"><a id="GUID-1247C418-BA99-44B8-862F-E0DA58E239F7" name="GUID-1247C418-BA99-44B8-862F-E0DA58E239F7"></a><h4 id="ADDCI-GUID-1247C418-BA99-44B8-862F-E0DA58E239F7" class="sect4"><span class="enumeration_section">8.4.2</span>索引组织表的域索引</h4>
                  <div>
                     <p>考虑indextype在索引组织表上创建域索引时出现的一些问题。您可以使用<code class="codeph">IndexOnIOT</code>位<code class="codeph">IndexInfoFlags</code>在<code class="codeph">ODCIIndexInfo</code>结构，以确定基本表是IOT。</p>
                  </div><a id="ADDCI4449"></a><div class="props_rev_3"><a id="GUID-64F30413-AD9F-42A6-9E8D-0DA733787EE7" name="GUID-64F30413-AD9F-42A6-9E8D-0DA733787EE7"></a><h5 id="ADDCI-GUID-64F30413-AD9F-42A6-9E8D-0DA733787EE7" class="sect5"><span class="enumeration_section">8.4.2.1</span>关于ROWID存储在一个UROWID列</h5>
                     <div>
                        <p>当域索引的基表是索引组织表，并且您希望将基表的rowid存储在您自己的表中时，如果要测试rowid，则应将rowid存储在<code class="codeph">UROWID</code> （通用rowid）列中为了平等。
                        </p>
                        <p>如果rowid存储在<code class="codeph">VARCHAR</code>列中，则在某些情况下rowid选择同一行时，比较来自基表的rowid和来自您自己的表的rowid的文本相等性。这是因为索引组织表使用逻辑而不是物理rowid，并且与物理rowid不同，同一行的逻辑rowid可以具有不同的文本表示。两个逻辑rowid在具有相同主键时是等效的，无论与它们一起存储的猜测数据块地址如何。
                        </p>
                        <p><code class="codeph">UROWID</code>列可以包含物理和逻辑rowid。在<code class="codeph">UROWID</code>列中存储IOT的rowid可确保相等运算符在两个具有相同主键信息但猜测DBA不同的逻辑rowid上成功。
                        </p>
                        <p>如果通过从IOT基表执行<code class="codeph">CREATE TABLE AS SELECT</code>带有rowid列的索引存储表，则会在索引表中为您创建正确大小的<code class="codeph">UROWID</code>列。如果创建带有rowid列的表，则必须显式声明rowid <code class="codeph">UROWID(x)</code>类型，其中<code class="codeph">x</code>是<code class="codeph">UROWID</code>列的大小。选择的大小应足够大，以容纳基表中的任何rowid;因此，它应该是基表中主键的函数。使用<a href="building-domain-indexes.html#GUID-41BE2AF6-9AA5-46FC-9DBC-3C54A508C370__BHADEBHA">示例8-10</a>演示的查询来确定<code class="codeph">UROWID</code>列的合适大小。
                        </p>
                        <p>如果删除存储表并重新创建存储表，则在索引存储表上执行<code class="codeph">ALTER INDEX REBUILD</code>会产生与执行<code class="codeph">CREATE TABLE</code>相同的问题。另一方面，如果您重用存储表，如果您的基表是IOT，则不需要额外的工作。</p>
                     </div>
                  </div><a id="ADDCI4450"></a><div class="props_rev_3"><a id="GUID-41BE2AF6-9AA5-46FC-9DBC-3C54A508C370" name="GUID-41BE2AF6-9AA5-46FC-9DBC-3C54A508C370"></a><h5 id="ADDCI-GUID-41BE2AF6-9AA5-46FC-9DBC-3C54A508C370" class="sect5"><span class="enumeration_section">8.4.2.2</span>确定UROWID列的大小</h5>
                     <div>
                        <div class="example" id="GUID-41BE2AF6-9AA5-46FC-9DBC-3C54A508C370__BHADEBHA">
                           <p class="titleinexample">示例8-10获取UROWID列的大小</p><pre class="oac_no_warn" dir="ltr">SELECT（SUM（column_length + 3）+ 7）FROM user_ind_columns ic，user_indexes i WHERE ic.index_name = i.index_name AND i.index_type ='IOT  -  TOP'AND ic.table_ name = <span class="italic">base_table</span> ;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4451"></a><div class="props_rev_3"><a id="GUID-FF0CB200-C688-49B5-B78B-4E204172A940" name="GUID-FF0CB200-C688-49B5-B78B-4E204172A940"></a><h5 id="ADDCI-GUID-FF0CB200-C688-49B5-B78B-4E204172A940" class="sect5"><span class="enumeration_section">8.4.2.3</span>索引存储表上的DML</h5>
                     <div>
                        <p>如果在索引存储表中维护<code class="codeph">UROWID</code>列，则必须在DML <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>语句中更改rowid绑定变量的类型，以便它适用于所有类型的rowid。将传入的rowid参数转换为文本字符串，然后将其绑定为文本字符串，适用于物理和通用rowid。此策略可以帮助您编写索引类型以使用常规表和IOT。
                        </p>
                     </div>
                  </div><a id="ADDCI4452"></a><div class="props_rev_3"><a id="GUID-FC074240-3C24-46EE-AEF7-72E6E5E073C9" name="GUID-FC074240-3C24-46EE-AEF7-72E6E5E073C9"></a><h5 id="ADDCI-GUID-FC074240-3C24-46EE-AEF7-72E6E5E073C9" class="sect5"><span class="enumeration_section">8.4.2.4</span>索引存储表上的启动，获取和关闭操作</h5>
                     <div>
                        <p>如果使用索引扫描上下文结构在<code class="codeph">Start</code> ， <code class="codeph">Fetch</code>和<code class="codeph">Close</code>之间传递上下文，则必须更改此结构。特别是，如果将查询的rowid定义变量存储在此结构的缓冲区中，则必须为此缓冲区中的<code class="codeph">UROWID</code>分配最大大小（对于字节格式的通用rowid，为3800字节，对于字符格式为通用rowid，为5072） ）除非您事先知道基表的主键大小或希望在运行时确定它。您还必须存储位的背景下，以指示在基表是IOT，因为<code class="codeph">ODCIIndexInfo</code>不在可用<code class="codeph">Fetch</code> 。
                        </p>
                        <p>与DML操作一样，将define变量设置为文本字符串也适用于物理和通用rowid。从索引表中获取物理rowid时，可以确保它们的长度为18个字符。但是，通用rowid最长可达5072个字符，因此必须使用字符串长度函数来确定获取的通用rowid的实际长度。</p>
                     </div>
                  </div><a id="ADDCI4453"></a><div class="props_rev_3"><a id="GUID-4AAEF06B-7AA6-4236-85F7-0E14554DB47B" name="GUID-4AAEF06B-7AA6-4236-85F7-0E14554DB47B"></a><h5 id="ADDCI-GUID-4AAEF06B-7AA6-4236-85F7-0E14554DB47B" class="sect5"><span class="enumeration_section">8.4.2.5</span>非唯一列的索引</h5>
                     <div>
                        <p>主键列的所有值必须是唯一的，因此在表的非唯一列上定义的域索引不能将此列用作用于存储索引的基础IOT的主键。要解决此问题，您可以在IOT中添加一个包含索引数据的列，以保存唯一的序列号。在表中插入列值时，生成一个唯一的序列号以与其一起使用;然后，您可以使用带有序列号的索引列作为IOT的主键。 （请注意，序列号列不能是<code class="codeph">UROWID</code>因为<code class="codeph">UROWID</code>列不能是IOT主键的一部分。）这种方法还保留了对主键列值的快速访问，这是IOT的主要优点。
                        </p>
                     </div>
                  </div>
               </div><a id="ADDCI4454"></a><div class="props_rev_3"><a id="GUID-CC1F41CA-F5D7-436E-92AE-7060D713DAA2" name="GUID-CC1F41CA-F5D7-436E-92AE-7060D713DAA2"></a><h4 id="ADDCI-GUID-CC1F41CA-F5D7-436E-92AE-7060D713DAA2" class="sect4"><span class="enumeration_section">8.4.3</span>域索引元数据</h4>
                  <div>
                     <p>对于B树索引，用户可以查询<code class="codeph">USER_INDEXES</code>视图以获取索引信息。要为域索引提供类似的支持，您可以通过以下方式提供特定于域的元数据：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>定义包含此元信息的一个或多个表。此表的键列必须是索引的唯一标识符。此唯一键可以是索引名称（ <code class="codeph">schema.index</code> ）。其余列可以包含您的元数据。
                           </p>
                        </li>
                        <li>
                           <p>创建将系统定义的元数据表与索引元表连接的视图，以便为域索引的每个实例提供全面的信息集。作为索引类型设计者，您有责任提供视图定义。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4455"></a><div class="props_rev_3"><a id="GUID-68FDFF89-D571-425D-8E29-340631996F19" name="GUID-68FDFF89-D571-425D-8E29-340631996F19"></a><h4 id="ADDCI-GUID-68FDFF89-D571-425D-8E29-340631996F19" class="sect4"><span class="enumeration_section">8.4.4</span>使用导出/导入移动域索引</h4>
                  <div>
                     <p>像B树和位图索引一样，域索引也是<a id="d19739e3132" class="indexterm-anchor"></a>在导出基表时导出并随后导入。但是，域索引可以具有与它们关联的特定于实现的元数据，这些元数据不存储在系统目录中。例如，文本域索引可以具有关联的策略信息，不相关的单词列表等。导出/导入机制将此元数据从源平台移动到目标平台。
                     </p>
                     <p>要移动域索引元数据，indextype必须实现<code class="codeph">ODCIIndexGetMetadata()</code>接口方法。导出域索引时，将调用此方法并传递域索引信息。它可以返回任意数量的匿名PL / SQL块，这些块写入转储文件并在导入时执行。如果存在，则在创建关联域索引之前立即执行这些匿名PL / SQL块。
                     </p>
                     <p>默认情况下，不会导入或导出域的辅助对象。但是，如果存在接口<code class="codeph">ODCIIndexUtilGetTableNames()</code>和<code class="codeph">ODCIIndexUtilCleanup()</code> ，系统将调用它们以确定与域索引关联的辅助对象是否是导出/导入操作的一部分。
                     </p>
                     <div class="infoboxnotealso" id="GUID-68FDFF89-D571-425D-8E29-340631996F19__GUID-A4960C2B-834E-4B44-B568-B70E51866B89">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="extensible-indexing-interface.html#GUID-B4A15D4C-A136-494E-BA05-4E8DD776C118">ODCIIndexGetMetadata（）</a></p>
                           </li>
                           <li>
                              <p><a href="extensible-indexing-interface.html#GUID-246BE6AB-72DE-4549-9B92-20F2106DEBE2">ODCIIndexUtilCleanup（）</a></p>
                           </li>
                           <li>
                              <p><a href="extensible-indexing-interface.html#GUID-8AE43690-9A7F-480E-A304-A28687197205">ODCIIndexUtilGetTableNames（）</a></p>
                           </li>
                           <li>
                              <p>有关使用导出/导入的信息，请<a href="../sutil/oracle-data-pump-overview.html#SUTIL-GUID-17FAE261-0972-4220-A2E4-44D479F519D4" target="_blank"><span><cite>参见Oracle数据库实用程序</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADDCI4456"></a><div class="props_rev_3"><a id="GUID-73E11A66-3497-4C87-AD8F-7737AFF837C3" name="GUID-73E11A66-3497-4C87-AD8F-7737AFF837C3"></a><h4 id="ADDCI-GUID-73E11A66-3497-4C87-AD8F-7737AFF837C3" class="sect4"><span class="enumeration_section">8.4.5</span>使用可传输表空间移动域索引</h4>
                  <div>
                     <p>可<span class="bold">移动表空间</span>功能可以让您<a id="d19739e3230" class="indexterm-anchor"></a>将表空间从一个Oracle数据库移动到另一个Oracle数据库。您可以使用可传输表空间来移动域索引数据，以替代导出和导入它。
                     </p>
                     <p>使用可传输表空间移动数据比执行导出和导入，或卸载和加载数据要快得多，因为传输表空间只需要复制数据文件和集成表空间结构信息。此外，您不必像加载或导入时那样重建索引。您可以检查<code class="codeph">ODCIIndexInfo</code>中是否存在<code class="codeph">TransTblspc</code>标志，以确定<a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a>调用是否是导入域索引的结果。
                     </p>
                     <p>要将可传输表空间用于域索引的辅助表，必须在实现类型中提供另外两个ODCI接口<a href="extensible-indexing-interface.html#GUID-8AE43690-9A7F-480E-A304-A28687197205">ODCIIndexUtilGetTableNames（）</a>和<a href="extensible-indexing-interface.html#GUID-246BE6AB-72DE-4549-9B92-20F2106DEBE2">ODCIIndexUtilCleanup（）</a> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-73E11A66-3497-4C87-AD8F-7737AFF837C3__GUID-FDDBEDCC-A966-4D38-AE86-8460DE3BAD88">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用可传输表空间的信息，请参见<a href="../admin/transporting-data.html#ADMIN-GUID-9304426D-9D40-4F0D-8661-F53B608A652F" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="ADDCI4458"></a><a id="ADDCI4459"></a><a id="ADDCI4457"></a><div class="props_rev_3"><a id="GUID-CB11A76D-0298-419D-93D6-4BB759467DA1" name="GUID-CB11A76D-0298-419D-93D6-4BB759467DA1"></a><h4 id="ADDCI-GUID-CB11A76D-0298-419D-93D6-4BB759467DA1" class="sect4"><span class="enumeration_section">8.4.6</span>域索引视图</h4>
                  <div>
                     <div class="section">
                        <p>以下视图提供有关与用户可访问的域索引关联的辅助对象的信息;它们仅与域索引相关。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ALL_SECONDARY_OBJECTS</code>提供有关与用户可访问的域索引关联的辅助对象的信息。
                              </p>
                           </li>
                           <li>
                              <p><a id="d19739e3329" class="indexterm-anchor"></a><a id="d19739e3331" class="indexterm-anchor"></a> <code class="codeph">DBA_SECONDARY_OBJECTS</code>提供有关与数据库中的域索引关联的所有辅助对象的信息。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_SECONDARY_OBJECTS</code>提供有关与当前用户拥有的域索引关联的辅助对象的信息。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-CB11A76D-0298-419D-93D6-4BB759467DA1__GUID-E18707C3-16F0-466A-A357-5DADD622B0D0">
                        <p class="titleintable">表8-2视图* _SECONDARY_OBJECTS</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="视图* _SECONDARY_OBJECTS" width="100%" border="1" summary="Column 1 lists the view column; column 2 shows the datatype used; column 3 indicates if a value is required, and column 4 gives the description" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d19739e3355">柱</th>
                                 <th align="left" valign="bottom" width="19%" id="d19739e3358">数据类型</th>
                                 <th align="left" valign="bottom" width="13%" id="d19739e3361">需要</th>
                                 <th align="left" valign="bottom" width="36%" id="d19739e3364">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e3369" headers="d19739e3355 "><pre class="oac_no_warn" dir="ltr">INDEX_OWNER</pre></td>
                                 <td align="left" valign="top" width="19%" headers="d19739e3369 d19739e3358 "><pre class="oac_no_warn" dir="ltr">VARCHAR2（30）</pre></td>
                                 <td align="left" valign="top" width="13%" headers="d19739e3369 d19739e3361 "><pre class="oac_no_warn" dir="ltr">不是NULL</pre></td>
                                 <td align="left" valign="top" width="36%" headers="d19739e3369 d19739e3364 ">
                                    <p>域索引所有者的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e3382" headers="d19739e3355 "><pre class="oac_no_warn" dir="ltr">INDEX_NAME</pre></td>
                                 <td align="left" valign="top" width="19%" headers="d19739e3382 d19739e3358 "><pre class="oac_no_warn" dir="ltr">VARCHAR2（30）</pre></td>
                                 <td align="left" valign="top" width="13%" headers="d19739e3382 d19739e3361 "><pre class="oac_no_warn" dir="ltr">不是NULL</pre></td>
                                 <td align="left" valign="top" width="36%" headers="d19739e3382 d19739e3364 ">
                                    <p>域索引的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e3395" headers="d19739e3355 "><pre class="oac_no_warn" dir="ltr">SECONDARY_INDEX_OWNER</pre></td>
                                 <td align="left" valign="top" width="19%" headers="d19739e3395 d19739e3358 "><pre class="oac_no_warn" dir="ltr">VARCHAR2（30）</pre></td>
                                 <td align="left" valign="top" width="13%" headers="d19739e3395 d19739e3361 "><pre class="oac_no_warn" dir="ltr">不是NULL</pre></td>
                                 <td align="left" valign="top" width="36%" headers="d19739e3395 d19739e3364 ">
                                    <p>域索引创建的辅助对象的所有者</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e3408" headers="d19739e3355 "><pre class="oac_no_warn" dir="ltr">SECONDARY_INDEX_NAME</pre></td>
                                 <td align="left" valign="top" width="19%" headers="d19739e3408 d19739e3358 "><pre class="oac_no_warn" dir="ltr">VARCHAR2（30）</pre></td>
                                 <td align="left" valign="top" width="13%" headers="d19739e3408 d19739e3361 "><pre class="oac_no_warn" dir="ltr">不是NULL</pre></td>
                                 <td align="left" valign="top" width="36%" headers="d19739e3408 d19739e3364 ">
                                    <p>域索引创建的辅助对象的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e3421" headers="d19739e3355 "><pre class="oac_no_warn" dir="ltr">SECONDARY_OBJDATA_TYPE</pre></td>
                                 <td align="left" valign="top" width="19%" headers="d19739e3421 d19739e3358 "><pre class="oac_no_warn" dir="ltr">VARCHAR2（20）</pre></td>
                                 <td align="left" valign="top" width="13%" headers="d19739e3421 d19739e3361 "><pre class="oac_no_warn" dir="ltr">不是NULL</pre></td>
                                 <td align="left" valign="top" width="36%" headers="d19739e3421 d19739e3364 ">
                                    <p>指定是否由indextype或统计类型创建辅助对象</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a href="building-domain-indexes.html#GUID-CB11A76D-0298-419D-93D6-4BB759467DA1__BHAEIECJ">例8-11</a>演示了如何使用<code class="codeph">USER_SECONDARY_OBJECTS</code>视图获取有关在<a href="building-domain-indexes.html#GUID-61F6BF76-10A4-458F-B1EE-4EA8990B43DF__BHAFCECC">例8-4</a>中创建的<code class="codeph">ResumeTextIndex</code>信息。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-CB11A76D-0298-419D-93D6-4BB759467DA1__BHAEIECJ">
                        <p class="titleinexample">例8-11使用* _SECONDARY_OBJECTS视图</p><pre class="oac_no_warn" dir="ltr">SELECT SECONDARY_OBJECT_OWNER，SECONDARY_OBJECT_NAME来自USER_SECONDARY_OBJECTS WHERE INDEX_OWNER = USER且INDEX_NAME ='ResumeTextIndex'</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4460"></a><div class="props_rev_3"><a id="GUID-F667736E-0314-4A65-970F-0A3A580DEF6F" name="GUID-F667736E-0314-4A65-970F-0A3A580DEF6F"></a><h3 id="ADDCI-GUID-F667736E-0314-4A65-970F-0A3A580DEF6F" class="sect3"><span class="enumeration_section">8.5</span>对象依赖性，删除语义和验证</h3>
               <div>
                  <p>考虑影响域索引中使用的对象的问题。</p>
               </div><a id="ADDCI4461"></a><div class="props_rev_3"><a id="GUID-8099282B-3723-42D6-80D3-92781F171F36" name="GUID-8099282B-3723-42D6-80D3-92781F171F36"></a><h4 id="ADDCI-GUID-8099282B-3723-42D6-80D3-92781F171F36" class="sect4"><span class="enumeration_section">8.5.1</span>对象依赖性</h4>
                  <div>
                     <p>各种对象之间的依赖关系如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">函数，包和对象类型：</span>由运算符和索引<span class="bold">类型</span>引用</p>
                        </li>
                        <li>
                           <p><span class="bold">运算符：</span>由indextypes，DML和查询SQL语句引用</p>
                        </li>
                        <li>
                           <p><span class="bold">Indextypes：</span>由域索引引用</p>
                        </li>
                        <li>
                           <p><span class="bold">域索引：</span>由DML和查询SQL语句引用（隐式使用）</p>
                        </li>
                     </ul>
                     <p>因此，必须创建这些对象的顺序或导出以供将来导入的定义是：</p>
                     <ol>
                        <li>
                           <p>函数，包和对象类型</p>
                        </li>
                        <li>
                           <p>运营商</p>
                        </li>
                        <li>
                           <p>索引类型</p>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADDCI4463"></a><a id="ADDCI4462"></a><div class="props_rev_3"><a id="GUID-7D6B37FB-01F5-4CA5-A678-A8895037E587" name="GUID-7D6B37FB-01F5-4CA5-A678-A8895037E587"></a><h4 id="ADDCI-GUID-7D6B37FB-01F5-4CA5-A678-A8895037E587" class="sect4"><span class="enumeration_section">8.5.2</span>对象丢弃语义</h4>
                  <div>
                     <div class="section">
                        <p>对象的放置行为如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold"><code class="codeph">RESTRICT</code></span> <span class="bold">语义：</span>如果有任何依赖对象，则不允许删除操作。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold"><code class="codeph">FORCE</code></span> <span class="bold">语义：</span>即使存在依赖对象，对象也会被删除;任何依赖对象递归标记为无效。
                              </p>
                           </li>
                        </ul>
                        <p><a href="building-domain-indexes.html#GUID-7D6B37FB-01F5-4CA5-A678-A8895037E587__BABGBEBF" title="架构对象，默认放置行为和支持的显式选项">表8-3</a>显示了运算符和索引类型支持的默认和显式删除选项。包含其他模式对象以实现完整性和上下文。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-7D6B37FB-01F5-4CA5-A678-A8895037E587__BABGBEBF">
                        <p class="titleintable">表8-3运算符和索引类型的默认和显式删除选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="运算符和索引类型的默认和显式删除选项" width="100%" border="1" summary="Schema Object, Default Drop Behavior, and Supported Explicit Options" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d19739e3684">架构对象</th>
                                 <th align="left" valign="bottom" width="34%" id="d19739e3687">默认丢弃行为</th>
                                 <th align="left" valign="bottom" width="37%" id="d19739e3690">显式选项支持</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e3695" headers="d19739e3684 ">
                                    <p>功能</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d19739e3695 d19739e3687 ">
                                    <p><code class="codeph">力</code></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d19739e3695 d19739e3690 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e3706" headers="d19739e3684 ">
                                    <p>包</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d19739e3706 d19739e3687 ">
                                    <p><code class="codeph">力</code></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d19739e3706 d19739e3690 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e3717" headers="d19739e3684 ">
                                    <p>对象类型</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d19739e3717 d19739e3687 ">
                                    <p><code class="codeph">限制</code></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d19739e3717 d19739e3690 ">
                                    <p><code class="codeph">力</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e3729" headers="d19739e3684 ">
                                    <p>操作者</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d19739e3729 d19739e3687 ">
                                    <p><code class="codeph">限制</code></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d19739e3729 d19739e3690 ">
                                    <p><code class="codeph">力</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e3741" headers="d19739e3684 ">
                                    <p>INDEXTYPE</p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d19739e3741 d19739e3687 ">
                                    <p><code class="codeph">限制</code></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d19739e3741 d19739e3690 ">
                                    <p><code class="codeph">力</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADDCI4464"></a><div class="props_rev_3"><a id="GUID-FB00AE3E-3D5B-4888-89F4-F0D6CCE99657" name="GUID-FB00AE3E-3D5B-4888-89F4-F0D6CCE99657"></a><h4 id="ADDCI-GUID-FB00AE3E-3D5B-4888-89F4-F0D6CCE99657" class="sect4"><span class="enumeration_section">8.5.3</span>对象验证</h4>
                  <div>
                     <div class="section">
                        <p>如果可能，下次引用无效对象时，将自动验证无效对象。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADDCI4465"></a><div class="props_rev_3"><a id="GUID-CCFB5777-807D-4DEA-B3EC-B7327BF83378" name="GUID-CCFB5777-807D-4DEA-B3EC-B7327BF83378"></a><h3 id="ADDCI-GUID-CCFB5777-807D-4DEA-B3EC-B7327BF83378" class="sect3"><span class="enumeration_section">8.6</span>索引类型，域索引和操作员权限</h3>
               <div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>要创建运算符及其绑定，除了<code class="codeph">CREATE</code> <code class="codeph">OPERATOR</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">OPERATOR</code>权限之外，还必须对函数，运算符，包或引用的类型具有<code class="codeph">EXECUTE</code>特权。
                        </p>
                     </li>
                     <li>
                        <p>要创建索引类型，除了<code class="codeph">CREATE</code> <code class="codeph">INDEXTYPE</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">INDEXTYPE</code>权限之外，还必须对实现indextype的类型具有<code class="codeph">EXECUTE</code>特权。此外，您必须对indextype支持的运算符具有<code class="codeph">EXECUTE</code>特权。
                        </p>
                     </li>
                     <li>
                        <p>要更改自己架构中的索引类型，必须具有<code class="codeph">CREATE INDEXTYPE</code>系统特权。
                        </p>
                     </li>
                     <li>
                        <p>要更改另一个用户架构中的索引类型或运算符，您必须具有<code class="codeph">ALTER ANY INDEXTYPE</code>或<code class="codeph">ALTER ANY OPERATOR</code>系统特权。
                        </p>
                     </li>
                     <li>
                        <p>要创建域索引，除了<code class="codeph">CREATE</code> <code class="codeph">INDEX</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">INDEX</code>权限之外，还必须对indextype具有<code class="codeph">EXECUTE</code>特权。
                        </p>
                     </li>
                     <li>
                        <p>要更改域索引，您必须对indextype具有<code class="codeph">EXECUTE</code>特权。
                        </p>
                     </li>
                     <li>
                        <p>要在查询或DML语句中使用运算符，必须对运算符以及关联的函数，包和索引类型具有<code class="codeph">EXECUTE</code>特权。
                        </p>
                     </li>
                     <li>
                        <p>要更改实现类型，您必须具有新实现类型的<code class="codeph">EXECUTE</code>特权。
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADDCI4466"></a><div class="props_rev_3"><a id="GUID-AB4774C6-DA5C-4EA8-B30A-5022BDD41117" name="GUID-AB4774C6-DA5C-4EA8-B30A-5022BDD41117"></a><h3 id="ADDCI-GUID-AB4774C6-DA5C-4EA8-B30A-5022BDD41117" class="sect3"><span class="enumeration_section">8.7</span>分区域索引</h3>
               <div>
                  <p>可以构建域索引以具有对应于范围，列表，散列或间隔分区表的分区的离散索引分区。这样的索引称为<span class="bold">本地域索引</span> ，而不是没有索引分区的<span class="italic">全</span> <span class="bold">局域</span>索引。本地域索引是指整个分区索引，而不是组成本地域索引的分区。
                  </p>
                  <div class="infoboxnote" id="GUID-AB4774C6-DA5C-4EA8-B30A-5022BDD41117__GUID-691E2633-F5F3-4B16-94B0-1E6D039A94DF">
                     <p class="notep1">注意：</p>
                     <p>您不能使用<code class="codeph">ALTER TABLE MODIFY PARTITION BY</code>语句将全局域索引转换为本地域索引。
                     </p>
                     <p>您也不能使用<code class="codeph">ALTER TABLE MODIFY PARTITION BY</code>语句来修改具有在其上定义的任何域索引的表的分区方案。
                     </p>
                  </div>
               </div><a id="ADDCI4467"></a><div class="props_rev_3"><a id="GUID-C92D9B1E-4883-47A0-A134-9990EB4DCB4D" name="GUID-C92D9B1E-4883-47A0-A134-9990EB4DCB4D"></a><h4 id="ADDCI-GUID-C92D9B1E-4883-47A0-A134-9990EB4DCB4D" class="sect4"><span class="enumeration_section">8.7.1</span>使用本地域索引方法</h4>
                  <div>
                     <div class="section">
                        <p>本地域索引与底层表均分配。也就是说，本地域索引中的所有键都指向存储在其相应表分区中的行，none表示其他分区中的行。您可以通过调用<code class="codeph">CREATE INDEXTYPE</code>语句在indextype中提供本地域索引，如<a href="building-domain-indexes.html#GUID-C92D9B1E-4883-47A0-A134-9990EB4DCB4D__BHAECEIJ">例8-12所示</a> 。
                        </p>
                        <p>此语句指定实现类型<code class="codeph">TextIndexMethods</code>能够创建和维护本地域索引。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C92D9B1E-4883-47A0-A134-9990EB4DCB4D__BHAECEIJ">
                        <p class="titleinexample">示例8-12在索引类型中使用本地域索引方法</p><pre class="oac_no_warn" dir="ltr">CREATE INDEXTYPE TextIndexType FOR Contains（VARCHAR2，VARCHAR2）使用带有系统管理存储表的LOCAL PARTITION的TextIndexMethods;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4468"></a><div class="props_rev_3"><a id="GUID-67607D3C-59DA-4A71-B32C-E1DBE86DFE67" name="GUID-67607D3C-59DA-4A71-B32C-E1DBE86DFE67"></a><h4 id="ADDCI-GUID-67607D3C-59DA-4A71-B32C-E1DBE86DFE67" class="sect4"><span class="enumeration_section">8.7.2</span>关于分区索引</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">CREATE INDEX</code>语句创建并分区索引，如<a href="building-domain-indexes.html#GUID-67607D3C-59DA-4A71-B32C-E1DBE86DFE67__BHABAHED">例8-13所示</a> 。
                        </p>
                        <p><code class="codeph">LOCAL [PARTITION]</code>子句指示索引是分区表上的本地索引。您可以指定分区名称或允许Oracle生成它们。
                        </p>
                        <p><code class="codeph">PARALLEL</code>子句指定要并行创建索引分区。<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>例程对应于索引分区创建，重建或填充，并行调用。
                        </p>
                        <p>在<code class="codeph">PARAMETERS</code>子句中，指定未解释为适当的ODCI索引类型例程的参数字符串。参数字符串的最大长度为<code class="codeph">1000</code>字符。
                        </p>
                        <p>在语法的顶级指定此子句时，参数将成为索引分区的默认参数。如果将此子句指定为<code class="codeph">LOCAL [PARTITION]</code>子句的一部分，则可以使用各个分区的参数覆盖任何默认参数。<code class="codeph">LOCAL [PARTITION]</code>子句可以指定多个分区。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-67607D3C-59DA-4A71-B32C-E1DBE86DFE67__BHABAHED">
                        <p class="titleinexample">示例8-13创建和分区索引</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX [schema。] index ON [schema。] table [t.alias]（indexed_column）INDEXTYPE IS indextype [LOCAL [PARTITION [partition [PARAMETERS（'string'）]]] [...]] [PARALLEL parallel_degree] [PARAMETERS（'string'）];</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4469"></a><div class="props_rev_3"><a id="GUID-59867CC0-FA8B-4380-878D-432FFB7FFAAD" name="GUID-59867CC0-FA8B-4380-878D-432FFB7FFAAD"></a><h4 id="ADDCI-GUID-59867CC0-FA8B-4380-878D-432FFB7FFAAD" class="sect4"><span class="enumeration_section">8.7.3</span>创建本地域索引</h4>
                  <div>
                     <div class="section">
                        <p>创建域索引时，Oracle会调用相应的ODCI例程。如果例程未成功返回，则域索引将标记为<code class="codeph">FAILED</code> 。失败的域索引支持的唯一操作是<code class="codeph">DROP INDEX</code>和（对于非本地索引） <code class="codeph">REBUILD INDEX</code> 。 <a href="building-domain-indexes.html#GUID-59867CC0-FA8B-4380-878D-432FFB7FFAAD__BHAIIDIB">例8-14</a>创建了一个本地域索引<code class="codeph">ResumeIndex</code> ，如<a href="building-domain-indexes.html#GUID-59867CC0-FA8B-4380-878D-432FFB7FFAAD__BHAIIDIB">例8-14</a>所示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-59867CC0-FA8B-4380-878D-432FFB7FFAAD__BHAIIDIB">
                        <p class="titleinexample">示例8-14创建本地域索引</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX ResumeIndex ON MyEmployees（Resume）INDEXTYPE IS TextIndexType LOCAL;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4471"></a><a id="ADDCI4470"></a><div class="props_rev_3"><a id="GUID-FC9F22F7-EE51-4774-B373-8A174A07C5C8" name="GUID-FC9F22F7-EE51-4774-B373-8A174A07C5C8"></a><h4 id="ADDCI-GUID-FC9F22F7-EE51-4774-B373-8A174A07C5C8" class="sect4"><span class="enumeration_section">8.7.4</span>删除本地域索引</h4>
                  <div>
                     <div class="section">
                        <p>无法显式删除指定的索引分区。要删除本地索引分区，必须删除整个本地域索引：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FC9F22F7-EE51-4774-B373-8A174A07C5C8__GUID-6C2A229C-3796-47AB-9FCA-40D782E00E17">
                        <p class="titleinexample">示例8-15删除本地索引分区</p><pre class="oac_no_warn" dir="ltr">DROP INDEX ResumeIndex;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4472"></a><div class="props_rev_3"><a id="GUID-7834D2C2-6E64-438F-A9F7-D5E8311BC495" name="GUID-7834D2C2-6E64-438F-A9F7-D5E8311BC495"></a><h4 id="ADDCI-GUID-7834D2C2-6E64-438F-A9F7-D5E8311BC495" class="sect4"><span class="enumeration_section">8.7.5</span>更改本地域索引</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ALTER INDEXTYPE</code>语句允许您更改indextype的属性和实现类型，而不必删除并重新创建indextype，然后重建所有依赖索引。
                        </p>
                        <p>使用<code class="codeph">ALTER INDEX</code>语句对本地域索引执行以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>重命名顶级索引。</p>
                           </li>
                           <li>
                              <p>修改所有索引分区的默认参数字符串。</p>
                           </li>
                           <li>
                              <p>修改与特定分区关联的参数字符串。</p>
                           </li>
                           <li>
                              <p>重命名索引分区。</p>
                           </li>
                           <li>
                              <p>重建索引分区。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-7834D2C2-6E64-438F-A9F7-D5E8311BC495__GUID-4950CAAA-84DC-4155-96CB-BC8C3FD70386">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=SQLRF-GUID-BFA7E29C-7905-4811-9119-B20FD8EA18F2" target="_blank">https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=SQLRF-GUID-BFA7E29C-7905-4811-9119-B20FD8EA18F2</a>获取SQL的完整语法声明。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI4474"></a><a id="ADDCI4473"></a><div class="props_rev_3"><a id="GUID-F3F30EDF-9470-4168-8F7E-999E1B2F4497" name="GUID-F3F30EDF-9470-4168-8F7E-999E1B2F4497"></a><h4 id="ADDCI-GUID-F3F30EDF-9470-4168-8F7E-999E1B2F4497" class="sect4"><span class="enumeration_section">8.7.6</span>指数国家摘要</h4>
                  <div>
                     <div class="section">
                        <p>与域索引一样，本地域索引的分区可以是几种状态中的一种或多种，如<a href="building-domain-indexes.html#GUID-F3F30EDF-9470-4168-8F7E-999E1B2F4497__BABHBHHJ" title="解释可能的状态">表8-4所示</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-F3F30EDF-9470-4168-8F7E-999E1B2F4497__BABHBHHJ">
                        <p class="titleintable">表8-4指数国家摘要</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="指数国家摘要" width="100%" border="1" summary="Desciption of possible states" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d19739e4509">州</th>
                                 <th align="left" valign="bottom" width="70%" id="d19739e4512">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4517" headers="d19739e4509 ">
                                    <p><code class="codeph">进行中</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4517 d19739e4512 ">
                                    <p>在执行<code class="codeph">ODCIIndex</code> DDL接口例程之前和期间，索引或索引分区处于此状态。国家通常是过渡性和临时性的。但是，如果例程过早结束，则索引可以保持标记为<code class="codeph">IN_PROGRESS</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4531" headers="d19739e4509 ">
                                    <p><code class="codeph">失败</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4531 d19739e4512 ">
                                    <p>如果对索引执行DDL操作的<code class="codeph">ODCIIndex</code>接口例程返回错误，则索引或索引分区将标记为<code class="codeph">FAILED</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4545" headers="d19739e4509 ">
                                    <p><code class="codeph">UNUSABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4545 d19739e4512 ">
                                    <p>与常规索引相同：由于某些分区维护操作，分区表上的索引标记为<code class="codeph">UNUSABLE</code> 。请注意，对于分区索引， <code class="codeph">UNUSABLE</code>仅与索引分区相关联，而不与索引作为整体相关联。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4559" headers="d19739e4509 ">
                                    <p><code class="codeph">有效</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4559 d19739e4512 ">
                                    <p>如果索引直接或间接依赖的对象存在且有效，则索引标记为<code class="codeph">VALID</code> 。此属性仅与索引相关联，从不与索引分区相关联。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4570" headers="d19739e4509 ">
                                    <p><code class="codeph">无效</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4570 d19739e4512 ">
                                    <p>如果索引直接或间接依赖的对象被删除或无效，则索引将标记为<code class="codeph">INVALID</code> 。此属性仅与索引相关联，从不与索引分区相关联。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADDCI4475"></a><div class="props_rev_3"><a id="GUID-EF90BF39-654B-41AC-90FC-81AD730DC296" name="GUID-EF90BF39-654B-41AC-90FC-81AD730DC296"></a><h4 id="ADDCI-GUID-EF90BF39-654B-41AC-90FC-81AD730DC296" class="sect4"><span class="enumeration_section">8.7.7</span>使用本地域索引进行DML操作</h4>
                  <div>
                     <p>如果本地域索引的索引分区处于以下任何状态，则无法对基础表执行DML操作： <code class="codeph">IN_PROGRESS</code> ， <code class="codeph">FAILED</code>或<code class="codeph">UNUSABLE</code> 。但是，如果索引标记为<code class="codeph">UNUSABLE</code> ，并且<code class="codeph">SKIP_UNUSABLE_INDEXES = true</code> ，则不执行索引维护。
                     </p>
                  </div>
               </div><a id="ADDCI4477"></a><a id="ADDCI4478"></a><a id="ADDCI4476"></a><div class="props_rev_3"><a id="GUID-B0B1897A-87E1-46E3-9E12-C342AD354B26" name="GUID-B0B1897A-87E1-46E3-9E12-C342AD354B26"></a><h4 id="ADDCI-GUID-B0B1897A-87E1-46E3-9E12-C342AD354B26" class="sect4"><span class="enumeration_section">8.7.8</span>影响索引的表操作</h4>
                  <div>
                     <p>下表列出了可以在inde，x的基础表上执行的操作，并描述了索引上的效果（如果有）。<a href="building-domain-indexes.html#GUID-B0B1897A-87E1-46E3-9E12-C342AD354B26__BHAFHAFH" title="表操作">表8-5</a>列出了TABLE操作，而<a href="building-domain-indexes.html#GUID-B0B1897A-87E1-46E3-9E12-C342AD354B26__BABDJCCI" title="操作">表8-6</a>列出了<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>操作。
                     </p>
                     <div class="tblformal" id="GUID-B0B1897A-87E1-46E3-9E12-C342AD354B26__BHAFHAFH">
                        <p class="titleintable">表8-5表操作摘要</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="表操作摘要" width="100%" border="1" summary="Table operations" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="23%" id="d19739e4734">表操作</th>
                                 <th align="left" valign="bottom" width="77%" id="d19739e4737">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d19739e4742" headers="d19739e4734 ">
                                    <p><code class="codeph">DROP</code> <span class="italic"><code class="codeph">table</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d19739e4742 d19739e4737 ">
                                    <p>放下桌子。删除所有索引及其相应的分区</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d19739e4754" headers="d19739e4734 ">
                                    <p><code class="codeph">TRUNCATE</code> <span class="italic"><code class="codeph">table</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d19739e4754 d19739e4737 ">
                                    <p>截断表格。截断所有索引和索引分区</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformal" id="GUID-B0B1897A-87E1-46E3-9E12-C342AD354B26__BABDJCCI">
                        <p class="titleintable">表8-6带分区维护的ALTER TABLE操作摘要</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="使用分区维护的ALTER TABLE操作摘要" width="100%" border="1" summary="Operations" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d19739e4775">ALTER TABLE操作</th>
                                 <th align="left" valign="bottom" width="70%" id="d19739e4778">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4783" headers="d19739e4775 ">
                                    <p>修改分区不可用的本地索引</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4783 d19739e4778 ">
                                    <p>将与表分区关联的本地索引分区标记为<code class="codeph">UNUSABLE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4792" headers="d19739e4775 ">
                                    <p>修改分区重建不可用的本地索引</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4792 d19739e4778 ">
                                    <p>重建标记为<code class="codeph">UNUSABLE</code>且与此表分区关联的本地索引分区</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4802" headers="d19739e4775 ">
                                    <p>添加分区</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4802 d19739e4778 ">
                                    <p>添加新的表分区。还添加了一个新的本地索引分区。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4809" headers="d19739e4775 ">
                                    <p>合并分区</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4809 d19739e4778 ">
                                    <p>仅适用于散列分区表。删除基表分区。还会删除关联的本地索引分区。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4816" headers="d19739e4775 ">
                                    <p>删除分区</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4816 d19739e4778 ">
                                    <p>删除基表分区。还会删除关联的本地索引分区</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4823" headers="d19739e4775 ">
                                    <p>截断分区</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4823 d19739e4778 ">
                                    <p>截断表分区。还会截断关联的本地索引分区</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4830" headers="d19739e4775 ">
                                    <p>移动分区</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4830 d19739e4778 ">
                                    <p>将基表分区移动到另一个表空间。相应的本地索引分区标记为<code class="codeph">UNUSABLE</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4840" headers="d19739e4775 ">
                                    <p>拆分分区</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4840 d19739e4778 ">
                                    <p>将表分区拆分为两个分区。相应的本地索引分区也是分开的。如果生成的分区非空，则索引分区将标记为<code class="codeph">UNUSABLE</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4850" headers="d19739e4775 ">
                                    <p>合并分区</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4850 d19739e4778 ">
                                    <p>将两个表分区合并为一个分区。相应的本地索引分区也应该合并。如果生成的分区包含数据，则索引分区将标记为<code class="codeph">UNUSABLE</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4860" headers="d19739e4775 ">
                                    <p>不包括索引的Exchange分区</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4860 d19739e4778 ">
                                    <p>使用非分区表交换表分区。本地索引分区和全局索引标记为<code class="codeph">UNUSABLE</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d19739e4870" headers="d19739e4775 ">
                                    <p>包含索引的Exchange分区</p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d19739e4870 d19739e4778 ">
                                    <p>使用非分区表交换表分区。本地索引分区与非分区表上的全局索引交换。索引分区仍然<code class="codeph">USABLE</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADDCI4479"></a><div class="props_rev_3"><a id="GUID-319EBA4E-5783-43B8-AAA5-73A954F55994" name="GUID-319EBA4E-5783-43B8-AAA5-73A954F55994"></a><h4 id="ADDCI-GUID-319EBA4E-5783-43B8-AAA5-73A954F55994" class="sect4"><span class="enumeration_section">8.7.9</span>用于分区域索引的ODCIIndex接口</h4>
                  <div>
                     <p>要支持本地域索引，必须实现标准<code class="codeph">ODCIIndex</code>方法，以及特定于本地域索引的另外两种方法：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="extensible-indexing-interface.html#GUID-7914F874-620F-48F1-ADDC-040CC82D46ED">ODCIIndexExchangePartition（）</a></p>
                        </li>
                        <li>
                           <p><a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（）</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4480"></a><div class="props_rev_3"><a id="GUID-2F997407-8633-45F4-9646-D96D40ECEC7C" name="GUID-2F997407-8633-45F4-9646-D96D40ECEC7C"></a><h4 id="ADDCI-GUID-2F997407-8633-45F4-9646-D96D40ECEC7C" class="sect4"><span class="enumeration_section">8.7.10</span>为域索引使用SQL * Loader</h4>
                  <div>
                     <div class="section">
                        <p><a id="d19739e5004" class="indexterm-anchor"></a>对于定义域索引的表，支持SQL * Loader常规路径加载和直接路径加载，具有此限制：表必须是堆组织的。
                        </p>
                        <p>要对<code class="codeph">IOT</code>或<code class="codeph">LOB</code>列上定义的域索引执行直接路径加载，请执行以下任务：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>删除域索引</span></li>
                        <li><span>在SQL * Loader中执行直接路径加载。</span></li>
                        <li><span>重新创建域索引。</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADDCI2801"></a><div class="props_rev_3"><a id="GUID-032AAB4D-3AEA-4CB3-92F4-C30A3AD59656" name="GUID-032AAB4D-3AEA-4CB3-92F4-C30A3AD59656"></a><h3 id="ADDCI-GUID-032AAB4D-3AEA-4CB3-92F4-C30A3AD59656" class="sect3"><span class="enumeration_section">8.8</span>使用系统分区</h3>
               <div>
                  <p>系统分区使您可以创建由多个物理分区组成的单个表。系统分区不使用分区键。相反，它会创建指定的分区数。因此，生成的分区没有边界（范围），值（列表）或分区方法。</p>
                  <p>由于没有分区键，因此必须将分布式表行显式映射到目标分区。例如，在插入行时，必须使用分区扩展语法来指定行必须映射到的分区。</p>
                  <div class="infoboxnotealso" id="GUID-032AAB4D-3AEA-4CB3-92F4-C30A3AD59656__GUID-6C6831CD-8B27-4FD2-ADBD-D6C371AE5DB0">
                     <p class="notep1">也可以看看：</p>
                     <p>在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=SQLRF01402" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>支持SQL语法</p>
                  </div>
               </div><a id="ADDCI4481"></a><div class="props_rev_3"><a id="GUID-2BA9646E-6A4E-4C49-B902-42F45EDBF34A" name="GUID-2BA9646E-6A4E-4C49-B902-42F45EDBF34A"></a><h4 id="ADDCI-GUID-2BA9646E-6A4E-4C49-B902-42F45EDBF34A" class="sect4"><span class="enumeration_section">8.8.1</span>系统分区表的优点</h4>
                  <div>
                     <p>系统分区表的主要优点是它可以用于创建和维护与另一个表相关的表。例如，这意味着可以将依赖表创建为系统分区表，其具有与基表相同数量的分区。因此，这样的系统分区表可用于存储域索引的索引数据，具有以下含义：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>修剪遵循基表修剪规则：在基表中访问分区时，可以在系统分区表中访问相应的分区。</p>
                        </li>
                        <li>
                           <p>可以在系统分区表上复制基表的DDL。因此，如果在基表上删除分区，则会自动删除系统分区表上的相应分区。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4482"></a><div class="props_rev_3"><a id="GUID-DEB47AB5-FB01-4A7A-A93B-671D9EDE7D9C" name="GUID-DEB47AB5-FB01-4A7A-A93B-671D9EDE7D9C"></a><h4 id="ADDCI-GUID-DEB47AB5-FB01-4A7A-A93B-671D9EDE7D9C" class="sect4"><span class="enumeration_section">8.8.2</span>实现系统分区</h4>
                  <div>
                     <div class="section">
                        <p>考虑如何实现系统分区。</p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADDCI4484"></a><a id="ADDCI4483"></a><div class="props_rev_3"><a id="GUID-2D94CE13-B343-450E-9678-704D35435FB0" name="GUID-2D94CE13-B343-450E-9678-704D35435FB0"></a><h5 id="ADDCI-GUID-2D94CE13-B343-450E-9678-704D35435FB0" class="sect5"><span class="enumeration_section">8.8.2.1</span>创建系统分区表</h5>
                     <div>
                        <div class="section">
                           <p><a href="building-domain-indexes.html#GUID-2D94CE13-B343-450E-9678-704D35435FB0__BHAFECIE">例8-16</a>描述了如何创建具有四个分区的系统分区表。每个分区可以具有不同的物理属性。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-2D94CE13-B343-450E-9678-704D35435FB0__BHAFECIE">
                           <p class="titleinexample">示例8-16创建系统分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE SystemPartitionedTable（c1整数，c2整数）PARTITION BY SYSTEM（PARTITION p1 TABLESPACE tbs_1，PARTITION p2 TABLESPACE tbs_2，PARTITION p3 TABLESPACE tbs_3，PARTITION p4 TABLESPACE tbs_4）;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4486"></a><a id="ADDCI4487"></a><a id="ADDCI5186"></a><a id="ADDCI4485"></a><div class="props_rev_3"><a id="GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34" name="GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34"></a><h5 id="ADDCI-GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34" class="sect5"><span class="enumeration_section">8.8.2.2</span>将数据插入系统分区表</h5>
                     <div>
                        <div class="section">
                           <p><a href="building-domain-indexes.html#GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34__BHAGFFGA">例8-17</a>演示了如何将数据插入系统分区表。<code class="codeph">INSERT</code>和<code class="codeph">MERGE</code>语句（此处未显示）必须使用分区扩展语法来标识应添加行的分区。元组<code class="codeph">(4,5)</code>可以插入到<a href="building-domain-indexes.html#GUID-2D94CE13-B343-450E-9678-704D35435FB0__BHAFECIE">例8-16中</a>创建的四个分区中的任何一个中。也可以使用<code class="codeph">DATAOBJ_TO_PARTITION</code> ，如<a href="building-domain-indexes.html#GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34__BHACBCJE">例8-18所示</a> 。
                           </p>
                           <p>Oracle数据库<span class="italic">12c</span>中开始，Oracle建议使用<code class="codeph">DATAOBJ_TO_MAT_PARTITION</code> ，这表现在<a href="building-domain-indexes.html#GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34__CHDEHHFD">实施例8-19</a>代替， <code class="codeph">DATAOBJ_TO_PARTITION</code>功能。<code class="codeph">DATAOBJ_TO_MAT_PARTITION</code>函数支持区间分区表上的本地域索引。
                           </p>
                           <p>请注意，第一行代码显示如何将数据插入命名分区，而第二行代码显示数据也可以根据分区的顺序插入分区。对第三个代码行所示的绑定变量的支持非常重要，因为它允许在<code class="codeph">INSERT</code>语句之间共享游标。
                           </p>
                           <p>在给定物理分区标识符的情况下， <a href="building-domain-indexes.html#GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34__BHACBCJE">例8-18中</a>所示的<code class="codeph">DATAOBJ_TO_PARTITION</code>函数确定绝对分区号。但是，如果基表是间隔分区的，则分区编号中可能存在与非实现分区对应的孔。由于系统分区表仅具有物化分区，因此<code class="codeph">DATAOBJ_TO_PARTITION</code>编号可能导致基表的分区与基础系统分区索引存储表的分区之间不匹配。
                           </p>
                           <p><a href="building-domain-indexes.html#GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34__CHDEHHFD">示例8-19中</a>显示的新函数<code class="codeph">DATAOBJ_TO_MAT_PARTITION</code>返回具体化的分区号（与绝对分区号相对），并帮助保持两个表同步。计划在间隔分区表上支持本地域索引的索引类型应迁移到此函数的使用。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34__BHAGFFGA">
                           <p class="titleinexample">示例8-17将数据插入系统分区表</p><pre class="oac_no_warn" dir="ltr">INSERT INTO SystemPartitionedTable PARTITION（p1）VALUES（4,5）;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34__BHACBCJE">
                           <p class="titleinexample">示例8-18将数据插入系统分区表; DATAOBJ_TO_PARTITION</p><pre class="oac_no_warn" dir="ltr">INSERT INTO SystemPartitionedTable PARTITION（DATAOBJ_TO_PARTITION（ <span class="italic">base_table</span> ，： <span class="italic">physical_partid</span> ））VALUES（...）;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-5A178C16-6B3F-4DC0-8C4D-E2C22A0A5A34__CHDEHHFD">
                           <p class="titleinexample">示例8-19将数据插入系统分区表; DATAOBJ_TO_MAT_PARTITION</p><pre class="oac_no_warn" dir="ltr">INSERT INTO SystemPartitionedTable PARTITION（DATAOBJ_TO_MAT_PARTITION（base_table，：physical_partid））VALUES（...）;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4488"></a><div class="props_rev_3"><a id="GUID-479314EF-CC8B-4FB2-9DB5-168B9171D3D9" name="GUID-479314EF-CC8B-4FB2-9DB5-168B9171D3D9"></a><h5 id="ADDCI-GUID-479314EF-CC8B-4FB2-9DB5-168B9171D3D9" class="sect5"><span class="enumeration_section">8.8.2.3</span>删除和更新系统分区表中的数据</h5>
                     <div>
                        <div class="section">
                           <p>虽然删除和更新操作不需要分区扩展语法，但Oracle建议您尽可能使用它。由于没有分区修剪，因此如果省略分区扩展语法，则扫描整个表以执行操作。这突出了行和分区之间没有隐式映射的事实。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADDCI4489"></a><div class="props_rev_3"><a id="GUID-C672215F-7608-4267-A9BC-BBA10AEAAB4C" name="GUID-C672215F-7608-4267-A9BC-BBA10AEAAB4C"></a><h4 id="ADDCI-GUID-C672215F-7608-4267-A9BC-BBA10AEAAB4C" class="sect4"><span class="enumeration_section">8.8.3</span>使用系统分区表支持操作</h4>
                  <div>
                     <p>系统分区继续支持以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>分区维护操作和其他DDL，但以下情况除外：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">ALTER INDEX SPLIT PARTITION</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">ALTER TABLE SPLIT PARTITION</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">CREATE TABLE</code> （作为<code class="codeph">SELECT</code> ）</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>创建本地索引，但唯一的本地索引除外，因为它们需要分区键</p>
                        </li>
                        <li>
                           <p>创建本地位图索引</p>
                        </li>
                        <li>
                           <p>创建全局索引</p>
                        </li>
                        <li>
                           <p>所有DML操作</p>
                        </li>
                        <li>
                           <p>使用分区扩展语法<code class="codeph">INSERT AS SELECT</code>操作，如以下代码示例所示：</p>
                           <p>将数据插入表的特定分区</p><pre class="oac_no_warn" dir="ltr">INSERT INTO <span class="italic">TableName</span> PARTITION（ <span class="italic">PartitionName</span> | DATAOBJ_TO_MAT_PARTITION（ <span class="italic">base_table</span> ，： <span class="italic">physical_partid</span> ））AS <span class="italic">SubQuery</span>
</pre></li>
                     </ul>
                     <p>系统分区不再支持以下操作，因为系统分区不使用分区方法，因此不会将行分发到分区。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CREATE TABLE AS SELECT</code>另一种方法是首先创建表，然后在每个分区中插入行。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">INSERT INTO</code> <span class="italic"><code class="codeph">TableName</code></span> <code class="codeph">AS</code> <span class="italic"><code class="codeph">SubQuery</code></span></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4491"></a><div class="props_rev_3"><a id="GUID-8CB25092-9CB4-4196-965A-F01BFFDDDB79" name="GUID-8CB25092-9CB4-4196-965A-F01BFFDDDB79"></a><h4 id="ADDCI-GUID-8CB25092-9CB4-4196-965A-F01BFFDDDB79" class="sect4"><span class="enumeration_section">8.8.4</span>运行分区维护操作</h4>
                  <div>
                     <div class="section">
                        <p>例如，考虑为域索引的基表发出的<code class="codeph">ALTER TABLE SPLIT PARTITION</code>例程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>系统使用有关正在添加或删除的分区的信息调用<a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（）</a>方法;请记住，1：2拆分涉及丢弃一个分区并添加两个新分区。</span></li>
                        <li><span>系统调用受影响分区上的<a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics（）</a> 。</span></li>
                        <li><span>系统将删除已从所有系统分区索引和统计信息存储表中拆分的分区。</span></li>
                        <li><span>系统将两个新分区添加到系统分区表。</span></li>
                        <li><span>如果要拆分的分区为空，则对<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）的</a>一次调用将重建拆分分区，对<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>的第二次调用将重建新添加的分区。</span></li>
                     </ol>
                  </div>
               </div><a id="ADDCI4492"></a><div class="props_rev_3"><a id="GUID-79187E7B-E909-4764-A73D-EC72E15037B3" name="GUID-79187E7B-E909-4764-A73D-EC72E15037B3"></a><h4 id="ADDCI-GUID-79187E7B-E909-4764-A73D-EC72E15037B3" class="sect4"><span class="enumeration_section">8.8.5</span>使用索引更改表交换分区</h4>
                  <div>
                     <div class="section">
                        <p>仅在以下情况下，对具有域索引的表允许<code class="codeph">ALTER TABLE EXCHANGE PARTITION</code>命令：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在非分区表和分区表上定义域索引</p>
                           </li>
                           <li>
                              <p>非分区表和分区表都具有相同的关联索引类型</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-79187E7B-E909-4764-A73D-EC72E15037B3__GUID-520F727D-7749-4C53-AB5A-8542B768F064">
                           <p class="notep1">注意：</p>
                           <p>如果引用分区表上存在本地域索引，则不允许使用<code class="codeph">ALTER TABLE EXCHANGE PARTITION CASCADE</code>命令。
                           </p>
                        </div>
                        <p><code class="codeph">ALTER TABLE EXCHANGE PARTITION</code>例程调用以下用户实现的方法：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>受影响的分区和索引的<a href="extensible-indexing-interface.html#GUID-7914F874-620F-48F1-ADDC-040CC82D46ED">ODCIIndexExchangePartition（）</a></span></li>
                        <li><span>受影响的分区和索引的<a href="extensible-optimizer-interface.html#GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6">ODCIStatsExchangePartition（）</a> ，如果为它们收集统计信息</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADDCI4494"></a><a id="ADDCI4496"></a><a id="ADDCI4495"></a><a id="ADDCI4493"></a><div class="props_rev_3"><a id="GUID-4D38D618-33FD-466F-B320-EEA3AD0F96B9" name="GUID-4D38D618-33FD-466F-B320-EEA3AD0F96B9"></a><h3 id="ADDCI-GUID-4D38D618-33FD-466F-B320-EEA3AD0F96B9" class="sect3"><span class="enumeration_section">8.9</span>使用系统管理的域索引</h3>
               <div>
                  <p>考虑系统管理的域索引如何工作，如何收集和存储它们的统计信息，以及对它们的使用限制。</p>
                  <p>让我们来看看系统管理的域索引是如何工作的。</p>
                  <p><a href="building-domain-indexes.html#GUID-4D38D618-33FD-466F-B320-EEA3AD0F96B9__BHABCBAB">图8-1</a>说明了基表<code class="codeph">T1</code>的初始设置。<code class="codeph">T1</code>具有以下要素：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>三个分区</p>
                     </li>
                     <li>
                        <p>其中一个列<code class="codeph">IT1</code>上的本地域索引</p>
                     </li>
                     <li>
                        <p>相应元数据对象<code class="codeph">MT1</code>的表，它是由indextype创建的可选元数据表，用于存储特定于本地域索引的每个分区的信息</p>
                     </li>
                     <li>
                        <p>系统分区表<code class="codeph">SPT1</code> ，由indextype创建以存储索引数据</p>
                     </li>
                  </ul>
                  <p>这些表中显示的结构（表<code class="codeph">T1</code> ，索引<code class="codeph">IT1</code>和系统分区表<code class="codeph">SPT1</code> ）具有相同数量的分区，以一对一的关系。元数据表<code class="codeph">MT1</code>具有与这些表中的分区数一样多的行。
                  </p>
                  <div class="figure" id="GUID-4D38D618-33FD-466F-B320-EEA3AD0F96B9__BHABCBAB">
                     <p class="titleinfigure">图8-1具有本地域索引和关联结构的三分区表</p><img src="img/addci047.gif" alt="下面是图8-1的描述" title="下面是图8-1的描述" longdesc="img_text/addci047.html"><br><a href="img_text/addci047.html">“图8-1具有本地域索引和关联结构的三分区表”的描述</a></div>
                  <!-- class="figure" -->
                  <p><a href="building-domain-indexes.html#GUID-4D38D618-33FD-466F-B320-EEA3AD0F96B9__BHAHBFAI">图8-2</a>说明了在使用<a href="building-domain-indexes.html#GUID-4D38D618-33FD-466F-B320-EEA3AD0F96B9__BHABABIF">例8-20中</a>的操作拆分其中一个分区后，T1及其相关结构会发生什么：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>基表<code class="codeph">T1</code>的分区<code class="codeph">P2</code>分成<code class="codeph">P21</code>和<code class="codeph">P22</code></p>
                     </li>
                     <li>
                        <p>在本地域索引中，删除分区<code class="codeph">IP2</code>并创建两个新分区<code class="codeph">IP21</code>和<code class="codeph">IP22</code></p>
                     </li>
                     <li>
                        <p>indextype调用<a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（）</a>方法，该方法对元数据表<code class="codeph">MT1</code>进行必要的更新</p>
                     </li>
                     <li>
                        <p>在系统分区表<code class="codeph">SPT1</code> ，删除与分区<code class="codeph">IP2</code>对应的分区，并创建两个新分区</p>
                     </li>
                     <li>
                        <p>由于拆分操作，索引分区被标记为<code class="codeph">UNUSABLE</code> ;必须重建它们才能使它们具有<code class="codeph">USABLE</code></p>
                     </li>
                  </ul>
                  <div class="figure" id="GUID-4D38D618-33FD-466F-B320-EEA3AD0F96B9__BHAHBFAI">
                     <p class="titleinfigure">图8-2 ALTER TABLE SPLIT PARTITION后的三分区表</p><img src="img/addci048.gif" alt="下面是图8-2的描述" title="下面是图8-2的描述" longdesc="img_text/addci048.html"><br><a href="img_text/addci048.html">“图8-2 ALTER TABLE SPLIT PARTITION后的三分区表”的说明</a></div>
                  <!-- class="figure" -->
                  <div class="example" id="GUID-4D38D618-33FD-466F-B320-EEA3AD0F96B9__BHABABIF">
                     <p class="titleinexample">示例8-20拆分现有表分区</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE T1 SPLIT PARTITION P2 IN P21，P22</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADDCI4497"></a><div class="props_rev_3"><a id="GUID-779002A2-CAE8-401D-9F45-16C7CEFF0F30" name="GUID-779002A2-CAE8-401D-9F45-16C7CEFF0F30"></a><h3 id="ADDCI-GUID-779002A2-CAE8-401D-9F45-16C7CEFF0F30" class="sect3"><span class="enumeration_section">8.10</span>设计系统管理域索引</h3>
               <div>
                  <p>当调用影响<code class="codeph">ODCIStats</code>区域索引的顶级DDL时，系统将调用用户实现的<code class="codeph">ODCIIndex</code> <span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">()</code>和<code class="codeph">ODCIStats</code> <span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">()</code>方法。<a href="building-domain-indexes.html#GUID-CE176112-3B49-461D-946F-E5D9DCB70586__BHACDBCG" title="DDL与用于非分区域索引的各种ODCI方法之间的映射">表8-7</a>显示了这些方法。
                  </p>
                  <p>当调用影响本地系统托管域索引的顶级DDL时，系统将调用用户实现的<code class="codeph">ODCIIndex</code> <span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">()</code>和<code class="codeph">ODCIStats</code> <span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">()</code>方法。<a href="building-domain-indexes.html#GUID-7A8DBC97-AE74-42E2-8C44-C6456957B72D__BHAIGBIH" title="DDL与用于本地系统管理域索引的各种ODCI方法之间的映射">表8-8</a>显示了这些方法。总之，以下规则适用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<code class="codeph">ODCIIndex</code> <span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">()</code> DML和查询，索引分区对象标识符（ <code class="codeph">ODCIIndexInfo.IndexPartitionIden</code> ）和基表分区物理标识符（ <code class="codeph">ODIIndexInfo.IndexCols(1).TablePartitionIden</code> ）是必需的。对于<code class="codeph">ODCIIndex</code> <span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">()</code> DDL例程，提供索引分区对象标识符和索引分区名称。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CREATE INDEX</code>例程使用两个<a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a>调用（一个在开头，一个在结尾），并且使用<code class="codeph">alter_option=</code> <code class="codeph">AlterIndexRebuild</code>调用<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a> ，因为有分区。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">TRUNCATE TABLE</code>例程使用<code class="codeph">alter_option=</code> <code class="codeph">AlterIndexRebuild</code>对<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>进行多次调用，因为存在分区。
                        </p>
                     </li>
                     <li>
                        <p>所有分区维护操作都会调用<a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（），</a>以便indextype正确更新其分区元数据表。索引分区列表由索引分区名称和索引分区对象标识符指定，并提供有关分区的添加或删除的信息。这些调用中不允许使用DDL。对于每个分区维护操作，系统会隐式转换使用域索引创建的系统分区存储表。新生成的分区的名称对应于索引分区名称。
                        </p>
                     </li>
                     <li>
                        <p>如果系统分区表用于存储分区级的统计数据，然后通过创建的表和索引<a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect（）</a>和下降<a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">）ODCIStatsDelete（</a>由系统跟踪，以确保它们保持equipartitioned。
                        </p>
                     </li>
                     <li>
                        <p>如果应用程序实现用户定义的分区级统计信息，则系统<a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">会对</a>每个分区维护操作调用<a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics（）</a> 。这可确保统计信息类型更新其分区级统计信息，以及（可选）更新其聚合全局统计信息。这些调用中不允许使用DDL。如果未实现<a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics（）</a> ，则系统不会引发异常，而是继续执行下一个编程步骤。
                        </p>
                     </li>
                  </ul>
               </div><a id="ADDCI4498"></a><div class="props_rev_3"><a id="GUID-CE176112-3B49-461D-946F-E5D9DCB70586" name="GUID-CE176112-3B49-461D-946F-E5D9DCB70586"></a><h4 id="ADDCI-GUID-CE176112-3B49-461D-946F-E5D9DCB70586" class="sect4"><span class="enumeration_section">8.10.1非分</span>区域索引的方法</h4>
                  <div>
                     <div class="tblformal" id="GUID-CE176112-3B49-461D-946F-E5D9DCB70586__BHACDBCG">
                        <p class="titleintable">表8-7 ODCI <span class="italic">XXX</span> （）非分区域索引的方法</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="ODCIXXX（）非分区域索引的方法" width="100%" border="1" summary="Mapping between DDLs and various ODCI methods used for non-partitioned domain indexes" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d19739e6217">DDL</th>
                                 <th align="left" valign="bottom" width="68%" id="d19739e6220">系统管理方法中使用的ODCIXXX（）方法</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6228" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">CREATE INDEXTYPE</pre></td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6228 d19739e6220 ">
                                    <p>指定系统管理的方法</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6235" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">创建指数</pre></td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6235 d19739e6220 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6244" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">TRUNCATE TABLE</pre></td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6244 d19739e6220 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a> ，</p>
                                    <p>使用<code class="codeph">alter_option=</code> <code class="codeph">AlterIndexRebuild</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6260" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">改变指数</pre></td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6260 d19739e6220 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6269" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">GATHER_INDEX_STATS（）</pre><p>在<code class="codeph">DBMS_STATS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6269 d19739e6220 ">
                                    <p><a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6282" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">DELETE_INDEX_STATS（）</pre><p>在<code class="codeph">DBMS_STATS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6282 d19739e6220 ">
                                    <p><a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6295" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">DROP INDEX</pre><p>（力）</p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6295 d19739e6220 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-F128CB3B-6B3E-41C3-A623-67BCB5BC9292">ODCIIndexDrop（）</a>和<a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6310" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">插入</pre></td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6310 d19739e6220 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-EF42025B-6DE2-4F2A-90EF-62775EE0EED6">ODCIIndexInsert（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6319" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">删除</pre></td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6319 d19739e6220 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-4B2E080D-FE8B-4598-9084-56FBE255196B">ODCIIndexDelete（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6328" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">UPDATE</pre></td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6328 d19739e6220 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-CB42E738-EFD1-4053-9DDF-BEF455F92815">ODCIIndexUpdate（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d19739e6337" headers="d19739e6217 "><pre class="oac_no_warn" dir="ltr">QUERY</pre></td>
                                 <td align="left" valign="top" width="68%" headers="d19739e6337 d19739e6220 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-53F2321C-B0F8-4783-AC1B-056372A0C073">ODCIIndexStart（）</a> ， <a href="extensible-indexing-interface.html#GUID-BB601420-A858-46E3-A9AC-3433220D4F82">ODCIIndexFetch（）</a>和<a href="extensible-indexing-interface.html#GUID-2F49CDE4-C064-4644-948C-BBF014FDD8C8">ODCIIndexClose（）</a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADDCI4499"></a><div class="props_rev_3"><a id="GUID-7A8DBC97-AE74-42E2-8C44-C6456957B72D" name="GUID-7A8DBC97-AE74-42E2-8C44-C6456957B72D"></a><h4 id="ADDCI-GUID-7A8DBC97-AE74-42E2-8C44-C6456957B72D" class="sect4"><span class="enumeration_section">8.10.2</span>本地系统管理域索引的方法</h4>
                  <div>
                     <div class="tblformal" id="GUID-7A8DBC97-AE74-42E2-8C44-C6456957B72D__BHAIGBIH">
                        <p class="titleintable">表8-8本地系统管理域索引的ODCI <span class="italic">XXX</span> （）方法</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="ODCIXXX（）本地系统管理域索引的方法" width="100%" border="1" summary="Mapping between DDLs and various ODCI methods used for local system-managed domain indexes" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="33%" id="d19739e6419">DDL</th>
                                 <th align="left" valign="bottom" width="67%" id="d19739e6422">系统管理方法中使用的ODCIXXX（）方法</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6430" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">CREATE INDEXTYPE</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6430 d19739e6422 ">
                                    <p>指定系统管理的方法</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6437" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">创建指数</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6437 d19739e6422 ">
                                    <p>一次调用<a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a> ，为每个分区调用一个<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a> ，使用<code class="codeph">alter_option=</code> <code class="codeph">AlterIndexRebuild</code> ，然后最后调用<a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6460" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">TRUNCATE TABLE</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6460 d19739e6422 ">
                                    <p>每个分区一次调用： <a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a> ， <code class="codeph">alter_option=</code> <code class="codeph">AlterIndexRebuild</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6475" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">改变指数</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6475 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6484" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">GATHER_INDEX_STATS（）</pre><p>在<code class="codeph">DBMS_STATS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6484 d19739e6422 ">
                                    <p>一次调用<a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6498" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">DELETE_INDEX_STATS（）</pre><p>在<code class="codeph">DBMS_STATS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6498 d19739e6422 ">
                                    <p>一次调用<a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6512" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">DROP INDEX</pre><p>（力）</p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6512 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-F128CB3B-6B3E-41C3-A623-67BCB5BC9292">ODCIIndexDrop（）</a> ，如果已收集用户定义的统计信息，则<a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6527" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">ALTER TABLE添加分区</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6527 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（）</a> ， <a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a> with <code class="codeph">alter_option=</code> <code class="codeph">AlterIndexRebuild</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6545" headers="d19739e6419 ">
                                    <p><code class="codeph">ALTER TABLE COALESCE PARTITION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6545 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（）</a> ;</p>
                                    <p><a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics（）</a>如果收集了统计信息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6561" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">ALTER TABLE DROP PARTITION</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6561 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（）</a> ; <a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics（）</a>如果收集了统计信息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6575" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">ALTER TABLE TRUNCATE PARTITION</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6575 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（）</a> ; <a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a> with <code class="codeph">alter_option=</code> <code class="codeph">AlterIndexRebuild</code> ; <a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics（），</a>如果统计类型与indextype关联，并且是否已收集用户定义的统计信息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6599" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">ALTER TABLE SPLIT PARTITION</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6599 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（）</a> ;仅当结果分区为空时， <a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>与<code class="codeph">alter_option=</code> <code class="codeph">AlterIndexRebuild</code> ; <a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics（），</a>如果统计类型与indextype关联，并且是否已收集用户定义的统计信息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6622" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">ALTER TABLE MERGE PARTITION</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6622 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（）</a> ;仅当结果分区为空时， <a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>与<code class="codeph">alter_option=</code> <code class="codeph">AlterIndexRebuild</code> ; <a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics（），</a>如果统计类型与indextype关联，并且是否已收集用户定义的统计信息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6645" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">ALTER TABLE EXCHANGE PARTITION</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6645 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-7914F874-620F-48F1-ADDC-040CC82D46ED">ODCIIndexExchangePartition（）</a> ;如果统计类型与indextype相关联，并且已收集用户定义的统计信息，则还有<a href="extensible-optimizer-interface.html#GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6">ODCIStatsExchangePartition（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6658" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">ALTER TABLE MOVE PARTITION</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6658 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-C2C4DB40-106A-491C-B241-985B69DC2FE1">ODCIIndexUpdPartMetadata（）</a>如果分区表具有有效的系统管理的本地域索引，该索引已作为分区<code class="codeph">MOVE</code>和重命名操作的一部分进行更新。如果移动分区而不更新系统管理的索引，则索引分区将标记为<code class="codeph">UNUSABLE</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6674" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">GATHER_TABLE_STATS（）</pre><p>在<code class="codeph">DBMS_STATS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6674 d19739e6422 ">
                                    <p>一次调用<a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6688" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">DELETE_TABLE_STATS（）</pre><p>在<code class="codeph">DBMS_STATS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6688 d19739e6422 ">
                                    <p>如果统计类型与indextype关联，并且已收集用户定义的统计信息，则调用<a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6703" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">ALTER INDEX PARTITION</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6703 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6712" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">插入</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6712 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-EF42025B-6DE2-4F2A-90EF-62775EE0EED6">ODCIIndexInsert（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6721" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">删除</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6721 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-4B2E080D-FE8B-4598-9084-56FBE255196B">ODCIIndexDelete（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6730" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">UPDATE</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6730 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-CB42E738-EFD1-4053-9DDF-BEF455F92815">ODCIIndexUpdate（）</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d19739e6739" headers="d19739e6419 "><pre class="oac_no_warn" dir="ltr">QUERY</pre></td>
                                 <td align="left" valign="top" width="67%" headers="d19739e6739 d19739e6422 ">
                                    <p><a href="extensible-indexing-interface.html#GUID-53F2321C-B0F8-4783-AC1B-056372A0C073">ODCIIndexStart（）</a> ， <a href="extensible-indexing-interface.html#GUID-BB601420-A858-46E3-A9AC-3433220D4F82">ODCIIndexFetch（）</a>和<a href="extensible-indexing-interface.html#GUID-2F49CDE4-C064-4644-948C-BBF014FDD8C8">ODCIIndexClose（）</a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div><a id="ADDCI4500"></a><div class="props_rev_3"><a id="GUID-FE6EAE94-F2DA-495F-80E7-58B7605C60C2" name="GUID-FE6EAE94-F2DA-495F-80E7-58B7605C60C2"></a><h3 id="ADDCI-GUID-FE6EAE94-F2DA-495F-80E7-58B7605C60C2" class="sect3"><span class="enumeration_section">8.11</span>创建本地域索引</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">CREATE INDEX</code>例程实现以下步骤：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>要创建系统分区存储表，系统将使用索引信息调用<code class="codeph">ODCIIndexCreate()</code> 。<code class="codeph">ODCIIndexInfo.IndexPartitionTotal</code>属性中提供了分区数。请注意，所有分区存储表都应进行系统分区。</span><div>
                           <p>对象级<code class="codeph">CREATE</code>例程仅传入对象级参数字符串。要构造所有分区的存储属性，indextype需要分区级参数字符串。要获取这些，磁带必须以编程方式查询字典表上的<code class="codeph">XX_IND_PARTITIONS</code>或<code class="codeph">XXX_IND_SUBPARTITIONS</code>视图。
                           </p>
                           <p>Oracle建议indextype使用索引分区名称为存储表及其分区指定名称。请注意，您还必须从<code class="codeph">XXX_IND_PARTITIONS</code>或<code class="codeph">XXX_IND_SUBPARTITIONS</code>视图以编程方式获取索引分区名称。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>对于每个分区，系统使用<code class="codeph">alter_option=AlterIndexRebuild</code>调用<code class="codeph">ODCIIndexAlter()</code>方法。</span><div>
                           <p>您可以通过检查是否已设置<code class="codeph">ODICEnv.IntermediateCall</code>位来验证此<code class="codeph">ODCIIndexAlter()</code>调用是否已作为<code class="codeph">CREATE INDEX</code>调用的一部分进行。
                           </p>
                           <p>以编程方式从基表分区中为每个分区选择索引列值，转换它们，并将转换后的数据存储在相应的系统分区表中。</p>
                           <p>在DML或查询操作期间，如果indextype必须引用元数据表，则应对其进行编程以将索引分区对象标识符插入元数据表的相应行中。</p>
                           <p>要将值存储在非分区表中，可以在初始<code class="codeph">ODCIIndexCreate()</code>调用级别或在为每个分区进行的<code class="codeph">ODCIIndexAlter()</code>调用级别对盒式磁带进行编程。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>系统最终调用<code class="codeph">ODCIIndexCreate()</code>方法，以便indextype可以在存储表上创建任何必要的索引。</span><div>
                           <p><code class="codeph">CREATE</code>例程可以使用临时存储表来存储中间数据。作为一个选项，您可以以编程方式指示您的应用程序使用外部文件;然后应用程序负责管理这些文件。
                           </p>
                           <p>在此<code class="codeph">ODCIIndexCreate()</code>调用完成后，此调用创建但未删除的所有分区表都由系统管理。
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>请注意，在系统分区索引存储表上创建任何类型的全局索引都会标记为错误。</p>
                     <div class="infoboxnotealso" id="GUID-FE6EAE94-F2DA-495F-80E7-58B7605C60C2__GUID-567E0C81-D8C0-40CF-9303-8866DBEA4D78">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a></p>
                           </li>
                           <li>
                              <p><a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate（）</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADDCI4501"></a><div class="props_rev_3"><a id="GUID-D488CADE-C5CB-461E-8F83-48ACE4296920" name="GUID-D488CADE-C5CB-461E-8F83-48ACE4296920"></a><h3 id="ADDCI-GUID-D488CADE-C5CB-461E-8F83-48ACE4296920" class="sect3"><span class="enumeration_section">8.12</span>使用INSERT，DELETE和UPDATE维护本地域索引</h3>
               <div>
                  <div class="section">
                     <p>DML操作应以下列方式实现：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>调用<a href="extensible-indexing-interface.html#GUID-EF42025B-6DE2-4F2A-90EF-62775EE0EED6">ODCIIndexInsert（）</a> ， <a href="extensible-indexing-interface.html#GUID-4B2E080D-FE8B-4598-9084-56FBE255196B">ODCIIndexDelete（）</a>或<a href="extensible-indexing-interface.html#GUID-CB42E738-EFD1-4053-9DDF-BEF455F92815">ODCIIndexUpdate（）之一</a> 。索引分区对象标识符（用于访问元数据表）和基表分区物理标识符（用于在相应分区中执行DML）都作为<code class="codeph">ODICIndexInfo</code>结构的一部分提供。</span></li>
                     <li class="stepexpand"><span>要在系统分区表上实现DML，盒式磁带代码必须包含以下代码示例中的语法。<code class="codeph">DATAOBJ_TO_MAT_PARTITION()</code>函数由系统提供。</span><div>
                           <p>在系统分区表上调用DML操作</p><pre class="oac_no_warn" dir="ltr">INSERT IN <span class="italic">TO</span> SP PARTITION（DATAOBJ_TO_MAT_PARTITION（ <span class="italic">base_table</span> ，： <span class="italic">physical_partid</span> ））VALUES（...）</pre></div>
                     </li>
                  </ol>
               </div>
            </div><a id="ADDCI4503"></a><div class="props_rev_3"><a id="GUID-FE8F8F47-74EF-44A1-900C-0701569213EC" name="GUID-FE8F8F47-74EF-44A1-900C-0701569213EC"></a><h3 id="ADDCI-GUID-FE8F8F47-74EF-44A1-900C-0701569213EC" class="sect3"><span class="enumeration_section">8.13</span>查询本地域索引</h3>
               <div>
                  <div class="section">
                     <p>请按照以下步骤查询本地域索引：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>当优化器接收到具有用户定义的运算符的查询时，如果它确定使用域索引扫描进行评估，则调用<a href="extensible-indexing-interface.html#GUID-53F2321C-B0F8-4783-AC1B-056372A0C073">ODCIIndexStart（）</a> ， <a href="extensible-indexing-interface.html#GUID-BB601420-A858-46E3-A9AC-3433220D4F82">ODCIIndexFetch（）</a>或<a href="extensible-indexing-interface.html#GUID-2F49CDE4-C064-4644-948C-BBF014FDD8C8">ODCIIndexClose（）</a> 。</span></li>
                     <li class="stepexpand"><span>索引分区对象标识符和基表分区物理标识符作为<code class="codeph">ODCIIndexInfo</code>结构的一部分传入。</span></li>
                     <li class="stepexpand"><span>如有必要，索引分区对象标识符可用于查找元数据表。</span></li>
                     <li class="stepexpand"><span>并且基表物理分区标识符可用于查询系统分区表的相应分区。</span></li>
                     <li class="stepexpand"><span>盒式磁带代码必须使用以下代码示例中所示的语法和提供的函数<code class="codeph">DATAOBJ_TO_MAT_PARTITION()</code>来查询系统分区表。</span><div>
                           <p>查询系统分区表</p><pre class="oac_no_warn" dir="ltr">SELECT FROM SP PARTITION（DATAOBJ_TO_MAT_PARTITION（ <span class="italic">base_table</span> ， <span class="italic">：physical_partid</span> ））WHERE &lt;..&gt;;</pre></div>
                     </li>
                  </ol>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-A3F1E40D-54F8-4F9D-A20B-0D11A7544851" name="GUID-A3F1E40D-54F8-4F9D-A20B-0D11A7544851"></a><h3 id="ADDCI-GUID-A3F1E40D-54F8-4F9D-A20B-0D11A7544851" class="sect3"><span class="enumeration_section">8.14</span>系统管理域索引 - 支持的方案</h3>
               <div>
                  <div class="section">
                     <p>系统管理的域索引方法支持以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>非分区系统管理域索引。</p>
                        </li>
                        <li>
                           <p>范围分区，列表分区，散列分区，间隔分区和复合分区表上的本地索引。</p>
                        </li>
                        <li>
                           <p>当引用分区表的根表是范围分区，列表分区，散列分区，间隔分区，范围复合分区，列表复合分区或散列复合分区时，引用分区表上的本地索引。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADDCI4505"></a><div class="props_rev_3"><a id="GUID-3B22385A-6858-4E6B-B803-8BD74F093474" name="GUID-3B22385A-6858-4E6B-B803-8BD74F093474"></a><h3 id="ADDCI-GUID-3B22385A-6858-4E6B-B803-8BD74F093474" class="sect3"><span class="enumeration_section">8.15</span>系统管理域索引的限制</h3>
               <div>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>系统管理的域索引只能索引单个列。</p>
                        </li>
                        <li>
                           <p>无法为<code class="codeph">REF</code>分区表或<code class="codeph">IOT</code>创建本地域索引。
                           </p>
                        </li>
                        <li>
                           <p>当引用分区表的根表是interval-composite partitioned或interval-subpartitioned时，不支持引用分区表上的本地域索引。</p>
                        </li>
                        <li>
                           <p>interval-composite，interval-subpartitioned，auto list-partitioned，auto list-composite或auto list subpartitioned tables不支持本地域索引。</p>
                        </li>
                        <li>
                           <p>无法指定位图或唯一域索引。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADDCI4506"></a><div class="props_rev_3"><a id="GUID-E6FE5E3F-A5ED-405D-83AC-16E705885B10" name="GUID-E6FE5E3F-A5ED-405D-83AC-16E705885B10"></a><h3 id="ADDCI-GUID-E6FE5E3F-A5ED-405D-83AC-16E705885B10" class="sect3"><span class="enumeration_section">8.16</span>迁移非分区索引</h3>
               <div>
                  <div class="section">
                     <p>以下步骤说明如何将非分区的用户管理的域索引迁移到系统管理的域索引中。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>修改元数据：发出<code class="codeph">ALTER INDEXTYPE</code>命令以向系统注册indextype的属性。这取消了统计类型的关联。</span></li>
                     <li><span>索引标记为<code class="codeph">INVALID</code> 。您必须隐式发出<code class="codeph">ALTER INDEX ...COMPILE</code>命令再次验证索引。这使用<code class="codeph">alter_option=AlterIndexMigrate</code>调用<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>方法。</span></li>
                     <li><span>发出<code class="codeph">ASSOCIATE STATISTICS</code>命令以将系统管理的统计信息类型与系统管理的indextype相关联。</span></li>
                  </ol>
               </div>
            </div><a id="ADDCI4507"></a><div class="props_rev_3"><a id="GUID-15CE9E6B-5F9D-45DD-8A6C-9E54ADCB711D" name="GUID-15CE9E6B-5F9D-45DD-8A6C-9E54ADCB711D"></a><h3 id="ADDCI-GUID-15CE9E6B-5F9D-45DD-8A6C-9E54ADCB711D" class="sect3"><span class="enumeration_section">8.17</span>迁移本地分区索引</h3>
               <div>
                  <div class="section">
                     <p>以下步骤说明如何将本地分区的用户管理域索引迁移到系统管理的等分区域索引。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>修改元数据：发出<code class="codeph">ALTER INDEXTYPE</code>命令以注册新的索引例程和indextype的属性，以便系统可以管理它。此索引类型的所有索引都标记为<code class="codeph">INVALID</code> ，并且在完成下一步之后才能使用。这将取消统计类型并删除旧统计信息。</span></li>
                     <li class="stepexpand"><span>修改索引数据：调用<code class="codeph">ALTER INDEX ...每个索引的新索引类型的COMPILE</code>命令。这使用<code class="codeph">alter_option=AlterIndexMigrate</code>调用<a href="extensible-indexing-interface.html#GUID-9DB1D609-69C3-483B-AA77-087AD51A3A55">ODCIIndexAlter（）</a>方法。您必须实现此方法以将非分区表上的组转换为系统分区表。对于表示分区表的每组<span class="italic"><code class="codeph">n</code></span>表，盒式磁带代码应执行以下操作。请注意，迁移不需要重新生成索引数据，但仅涉及交换操作。</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>创建系统分区表。</p>
                              </li>
                              <li>
                                 <p>对于<span class="italic"><code class="codeph">n</code></span>非分区表中的每一个，请调用<code class="codeph">ALTER TABLE EXCHANGE PARTITION [INCLUDING INDEXES]</code>例程，以便为系统分区表的分区交换非分区表。
                                 </p>
                              </li>
                              <li>
                                 <p>删除所有<span class="italic"><code class="codeph">n</code></span>非分区表。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>发出<code class="codeph">ASSOCIATE STATISTICS</code>命令以将系统管理的统计信息类型与系统管理的indextype相关联。</span></li>
                  </ol>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
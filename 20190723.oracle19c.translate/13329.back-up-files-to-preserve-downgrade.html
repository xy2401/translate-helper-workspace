<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="To ensure that you can recover from upgrade issues, and downgrade to an earlier release if necessary, Oracle recommends that you implement a backup strategy for your database, and for some specific files."></meta>
      <meta name="description" content="To ensure that you can recover from upgrade issues, and downgrade to an earlier release if necessary, Oracle recommends that you implement a backup strategy for your database, and for some specific files."></meta>
      <title>备份文件以保留降级和恢复选项</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Upgrade Guide"></meta>
      <meta property="og:description" content="To ensure that you can recover from upgrade issues, and downgrade to an earlier release if necessary, Oracle recommends that you implement a backup strategy for your database, and for some specific files."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Upgrade Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00"></meta>
      <meta name="dcterms.title" content="Database Upgrade Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96252-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="schema-only-accounts-upgraded-expired-password-accounts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="preupgrade-information-tool-checklist.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="schema-only-accounts-upgraded-expired-password-accounts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="preupgrade-information-tool-checklist.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库升级指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="tasks-prepare-upgrade-oracle-database.html" property="item" typeof="WebPage"><span property="name">准备升级Oracle数据库</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="tasks-to-prepare-for-oracle-database-upgrades.html" property="item" typeof="WebPage"><span property="name">准备Oracle数据库升级的任务</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">备份文件以保留降级和恢复选项</li>
            </ol>
            <a id="GUID-42C0E7B6-8668-48E8-AC4E-FACB02121B64" name="GUID-42C0E7B6-8668-48E8-AC4E-FACB02121B64"></a>
            
            <h2 id="UPGRD-GUID-42C0E7B6-8668-48E8-AC4E-FACB02121B64" class="sect2">备份文件以保留降级和恢复选项</h2>
         </header>
         <div class="ind">
            <div>
               <p>为确保您可以从升级问题中恢复，并在必要时降级到早期版本，Oracle建议您为数据库和某些特定文件实施备份策略。</p>
               <p></p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="back-up-files-to-preserve-downgrade.html#GUID-671004F2-89AC-464D-A1E2-B4ED418D23C0">在升级Oracle数据库之前准备备份策略</a><br>您必须设计并执行适当的备份策略以确保升级成功。
                  </li>
                  <li class="ulchildlink"><a href="back-up-files-to-preserve-downgrade.html#GUID-1F8E240E-233C-4933-A714-3637A3599BC5">Oracle Data Guard Broker配置文件和降级</a><br>升级到Oracle Database 19c和更高版本后，必须备份Data Guard代理配置文件以保留降级到早期版本的功能。
                  </li>
                  <li class="ulchildlink"><a href="back-up-files-to-preserve-downgrade.html#GUID-2ACD269A-6975-453E-BB9B-2467442BD9EF">导出代理配置</a><br>使用<code class="codeph">EXPORT CONFIGURATION</code>命令将代理配置文件中包含的元数据导出到文本文件。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="tasks-to-prepare-for-oracle-database-upgrades.html#GUID-3C319260-B5CD-4C50-B606-36D060FDF0BE" title="执行这些任务以准备升级。">准备Oracle数据库升级的任务</a></p>
                  </div>
               </div>
            </div>
            <a id="UPGRD12382"></a><div class="props_rev_3"><a id="GUID-671004F2-89AC-464D-A1E2-B4ED418D23C0" name="GUID-671004F2-89AC-464D-A1E2-B4ED418D23C0"></a><h3 id="UPGRD-GUID-671004F2-89AC-464D-A1E2-B4ED418D23C0" class="sect3">在升级Oracle数据库之前准备备份策略</h3>
               <div>
                  <p>您必须设计并执行适当的备份策略以确保升级成功。</p>
                  <p>要制定备份策略，请考虑以下问题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在业务后果变得无法忍受之前，生产数据库可以保持多长时间无法运行？</p>
                     </li>
                     <li>
                        <p>需要什么样的备份策略来满足您的可用性要求？</p>
                     </li>
                     <li>
                        <p>备份是否存档在安全的非现场位置？</p>
                     </li>
                     <li>
                        <p>是否对备份进行了测试以确保它们正确完成？</p>
                     </li>
                     <li>
                        <p>备份恢复的速度有多快（包括异地存储中的备份）？</p>
                     </li>
                     <li>
                        <p>是否成功测试了灾难恢复程序？</p>
                     </li>
                  </ul>
                  <p>您的备份策略应该回答所有这些问题，并包括成功备份和恢复数据库的过程。有关使用RMAN实施备份策略的信息，请查看“ <cite>Oracle数据库备份和恢复用户指南”</cite> 。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../bradv/backing-up-database.html#BRADV8003" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="back-up-files-to-preserve-downgrade.html#GUID-42C0E7B6-8668-48E8-AC4E-FACB02121B64" title="为确保您可以从升级问题中恢复，并在必要时降级到早期版本，Oracle建议您为数据库和某些特定文件实施备份策略。">备份文件以保留降级和恢复选项</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-1F8E240E-233C-4933-A714-3637A3599BC5" name="GUID-1F8E240E-233C-4933-A714-3637A3599BC5"></a><h3 id="UPGRD-GUID-1F8E240E-233C-4933-A714-3637A3599BC5" class="sect3">Oracle Data Guard Broker配置文件和降级</h3>
               <div>
                  <p>升级到Oracle Database 19c和更高版本后，必须备份Data Guard代理配置文件以保留降级到早期版本的功能。</p>
                  <p>在Oracle Database 19c之前的版本中，映射到Oracle Data Guard代理属性的Oracle数据库设置在Oracle Data Guard代理配置文件中维护，并且可以使用<code class="codeph">DGMGRL</code>命令行界面进行修改。但是，从Oracle Database 19c开始，这些数据库设置不再存储在代理配置文件中。作为此更改的结果，尽管您可以继续使用DGMGRL修改这些属性，但您修改的值不再存储在Oracle Data Guard代理配置文件中。相反，DGMGRL命令直接修改这些Oracle Data Guard Broker属性映射到的Oracle数据库初始化参数或数据库设置。
                  </p>
                  <p>由于对属性设置的管理方式进行了此更改，因此，如果使用Oracle Data Guard代理，则Oracle建议您在开始升级之前将早期版本的Oracle Data Guard代理配置文件导出到安全备份位置。如果在升级之前未备份Oracle Data Guard代理配置文件，则在升级之后，您无法降级到早期版本并保留先前为Oracle Data Guard选择的属性选项。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="back-up-files-to-preserve-downgrade.html#GUID-42C0E7B6-8668-48E8-AC4E-FACB02121B64" title="为确保您可以从升级问题中恢复，并在必要时降级到早期版本，Oracle建议您为数据库和某些特定文件实施备份策略。">备份文件以保留降级和恢复选项</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-2ACD269A-6975-453E-BB9B-2467442BD9EF" name="GUID-2ACD269A-6975-453E-BB9B-2467442BD9EF"></a><h3 id="UPGRD-GUID-2ACD269A-6975-453E-BB9B-2467442BD9EF" class="sect3">导出代理配置</h3>
               <div>
                  <p>使用<code class="codeph">EXPORT CONFIGURATION</code>命令将代理配置文件中包含的元数据导出到文本文件。
                  </p>
                  <div class="p">
                     <p>Oracle服务器进程必须可以访问存储代理配置文件的目录。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>连接到主数据库。</span><div><pre class="pre codeblock"><code>DGMGRL&gt; CONNECT sysdg@North_Sales.example.com;密码： <span class="italic">密码</span>连接到“North_Sales”连接为SYSDG。</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>导出代理配置。</span><div>
                           <p>以下命令导出代理配置并将其存储在跟踪目录中名为<code class="codeph">myconfig.txt</code>的文件中。
                           </p><pre class="pre codeblock"><code>DGMGRL&gt;导出配置为'myconfig.txt';成功了。</code></pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="back-up-files-to-preserve-downgrade.html#GUID-42C0E7B6-8668-48E8-AC4E-FACB02121B64" title="为确保您可以从升级问题中恢复，并在必要时降级到早期版本，Oracle建议您为数据库和某些特定文件实施备份策略。">备份文件以保留降级和恢复选项</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
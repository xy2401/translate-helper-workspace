<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Your test plan for Oracle Database upgrades should include these test procedures."></meta>
      <meta name="description" content="Your test plan for Oracle Database upgrades should include these test procedures."></meta>
      <title>测试Oracle数据库的升级过程</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Upgrade Guide"></meta>
      <meta property="og:description" content="Your test plan for Oracle Database upgrades should include these test procedures."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Upgrade Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00"></meta>
      <meta name="dcterms.title" content="Database Upgrade Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96252-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-preupgrade-information-tool-for-oracle-database.html" title="Previous" type="text/html"></link>
      <link rel="next" href="requirements-upgrading-databases-that-use-oracle-label-security-and-oracle-database-vault.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-preupgrade-information-tool-for-oracle-database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="requirements-upgrading-databases-that-use-oracle-label-security-and-oracle-database-vault.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库升级指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="tasks-prepare-upgrade-oracle-database.html" property="item" typeof="WebPage"><span property="name">准备升级Oracle数据库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">测试Oracle数据库的升级过程</li>
            </ol>
            <a id="GUID-DA291D0C-5680-48D3-90A8-CF4217577A6B" name="GUID-DA291D0C-5680-48D3-90A8-CF4217577A6B"></a>
            
            <h2 id="UPGRD-GUID-DA291D0C-5680-48D3-90A8-CF4217577A6B" class="sect2">测试Oracle数据库的升级过程</h2>
         </header>
         <div class="ind">
            <div>
               <p>您的Oracle数据库升级测试计划应包括这些测试过程。</p>
               <p>Oracle建议您创建数据库环境的完整工作副本，以便在其中测试所有升级前，升级和升级后的过程。</p>
               <p>您可以创建不会干扰当前生产Oracle数据库的测试环境。例如，Oracle Data Guard使您可以创建物理和快照备用数据库。</p>
               <p>您的测试环境取决于您选择的升级方法：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>如果您计划使用DBUA或执行手动升级，请创建当前生产数据库的测试版本。</p>
                  </li>
                  <li>
                     <p>如果计划使用数据泵导出/导入，则使用当前生产数据库的子集分阶段导出和导入。</p>
                  </li>
               </ul>
               <p>使用测试环境练习升级数据库。最佳实践是在要升级的数据库的精确副本上执行升级过程的测试，而不是在缩小的副本或测试数据上执行。如果确切的副本不切实际，那么请仔细选择数据的代表性子集以移至测试环境并测试该数据的升级。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="testing-upgraded-production-oracle-database.html#GUID-1613B800-89C3-4FA9-898B-19B602B2F907">使用优先级列表仿真测试升级的示例</a><br>您可以在多租户架构Oracle数据库上使用并行升级实用程序来运行升级仿真，以在运行升级之前测试优先级列表或其他参数设置。
                  </li>
                  <li class="ulchildlink"><a href="testing-upgraded-production-oracle-database.html#GUID-DCDFE417-1D74-4154-B565-5E34E616E1BA">升级Oracle调用接口（OCI）和预编译器应用程序</a><br>升级计划与新版Oracle数据库一起使用的任何Oracle调用接口（OCI）和预编译器应用程序。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-DA291D0C-5680-48D3-90A8-CF4217577A6B__GUID-DE70367C-EC19-41D5-B4F2-1B0E00A22E45">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>有关测试数据库升级的信息，请参阅<a href="../ratug/testing-a-database-upgrade.html#RATUG210" target="_blank"><span class="italic">Oracle数据库测试指南</span></a></p>
                     </li>
                     <li>
                        <p>有关Data Pump导出和导入实用<a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span class="italic">程序</span></a>的信息，请参见<a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span class="italic">Oracle数据库实用</span></a>程序</p>
                     </li>
                     <li>
                        <p>有关物理和快照备用数据库的信息，请参阅<a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB00700" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="tasks-prepare-upgrade-oracle-database.html#GUID-733D2563-A42D-4366-9FCD-DABD25D0E2DF" title="完成预升级任务和检查以帮助您完成成功升级。">准备升级Oracle数据库</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-1613B800-89C3-4FA9-898B-19B602B2F907" name="GUID-1613B800-89C3-4FA9-898B-19B602B2F907"></a><h3 id="UPGRD-GUID-1613B800-89C3-4FA9-898B-19B602B2F907" class="sect3">使用优先级列表仿真测试升级的示例</h3>
               <div>
                  <p>您可以在多租户架构Oracle数据库上使用并行升级实用程序来运行升级仿真，以在运行升级之前测试优先级列表或其他参数设置。</p>
                  <p>在多租户架构Oracle数据库系统上，从Oracle Database 12 <span class="italic">c第</span> 2版（12.2）开始，您可以使用优先级列表来升级或排除特定PDB，或设置特定的升级优先级顺序。使用优先级模拟运行并行升级实用程序是一种在不实际运行升级的情况下测试优先级列表的方法。使用Parallel Upgrade Utility仿真功能可以使用优先级列表测试升级计划。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-1613B800-89C3-4FA9-898B-19B602B2F907__GUID-AB658875-6C79-42CC-AB7C-7B2EDB60AB81">准备升级仿真测试</p>
                     <p>在运行仿真之前，必须设置源和目标升级位置，并以与准备实际升级相同的方式准备数据库。实际上不会进行升级，但并行升级实用程序会生成日志文件，以显示实际升级的执行方式。</p>
                     <div class="infoboxnote" id="GUID-1613B800-89C3-4FA9-898B-19B602B2F907__GUID-A1929698-28E5-4ED9-A8F6-04A14E2FE827">
                        <p class="notep1">注意：</p>
                        <p>您可以使用<code class="codeph">-E</code>参数在仿真模式下运行并行升级实用程序，以测试优先级列表的运行方式，或测试升级期间执行其他升级参数选择的方式。例如，您可以运行升级仿真以获取有关如何使用<code class="codeph">-n</code>和<code class="codeph">-N</code>参数执行的资源分配选择的更多信息。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1613B800-89C3-4FA9-898B-19B602B2F907__GUID-52688916-F507-4716-B8D4-6694124312FF">运行优先级列表仿真的语法</p>
                     <p>您可以使用通常与并行升级实用程序一起使用的任何参数设置，但是，您必须创建优先级列表，并且在使用<code class="codeph">-E</code>运行并行升级实用程序时必须使用<code class="codeph">-L</code>参数来调用列表用于设置它以执行升级仿真的参数。
                     </p>
                     <p>以下是使用优先级列表模拟运行并行升级实用程序所需的最低语法示例，其中<code class="codeph"><span class="variable" translate="no">priority_list_name</span></code>是优先级列表文件的名称：</p><pre class="pre codeblock"><code>catctl -E -L <span class="variable" translate="no">priority_list_name</span> catupgrd.sql</code></pre></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-1613B800-89C3-4FA9-898B-19B602B2F907__GUID-2910999F-2157-4F21-B5A5-4DC3AA3949F6">
                     <p class="titleinexample">示例2-6使用优先级列表仿真运行并行升级实用程序的示例</p>
                     <p>以下示例使用此优先级列表，名为<code class="codeph">plist.txt</code> ：</p><pre class="pre codeblock"><code>1，CDB $ ROOT 2，PDB $ SEED 3，CDB1_PDB2 4，CDB1_PDB4 4，CDB1_PDB3 5，CDB1_PDB5 5，CDB1_PDB1</code></pre><p>以下命令运行并行仿真，调用此优先级列表：</p><pre class="pre codeblock"><code>$ ORACLE_HOME / perl / bin / perl catctl.pl -L plist.txt -E -n 4 -N 2 catupgrd.sql</code></pre><p>此命令使用以下参数设置：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">-E</code>指定Parallel Upgrade Utility在仿真模式下运行升级过程。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">-n 4</code>指定升级分配四个进程以执行并行升级操作。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">-N 2</code>指定升级运行两个SQL处理器以升级PDB。并发运行的最大PDB升级是<code class="codeph">-n</code>的值除以<code class="codeph">-N</code>的值，因此升级运行的并发PDB升级不超过两次。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">-L</code>指定命令读取以设置升级优先级的优先级列表。
                           </p>
                        </li>
                     </ul>
                     <p>当并行升级实用程序执行模拟升级时，它会在屏幕上显示您在实际升级期间看到的相同输出。</p>
                     <p>升级仿真完成后，它会生成一个日志文件<code class="codeph">catctl_prority_run.list</code> ，该文件存储在缺省日志记录目录中，或存储在使用<code class="codeph">-l</code>参数指定的日志记录目录位置中。因为在此示例中我们没有指定不同的日志目录，并且我们在名为<code class="codeph">CDB1</code>的容器数据库上运行升级，输出位于<code class="codeph"><span class="variable" translate="no">Oracle_base</span> /cfgtoollogs/CDB1/run</code>路径中，其中<code class="codeph"><span class="variable" translate="no">Oracle_base</span></code>是用户的Oracle基础运行升级， <code class="codeph">CDB1</code>是运行升级的容器数据库（CDB）的名称。
                     </p>
                     <p>日志文件<code class="codeph">catctl_priority_run.lst</code>显示升级仿真期间执行升级优先级的列表。它显示了并行升级实用程序如何对PDB升级进行分组。在实际执行升级之前，您可以看到包含分组和优先级的优先级运行。升级完成后，升级生成的日志文件也会显示在屏幕上。
                     </p>
                     <p>在升级日志结束时，日志将显示<code class="codeph">CDB$ROOT</code>首先升级。CDB $ ROOT升级完成后，并行升级实用程序将根据优先级列表中的优先级设置执行以下PDB并发升级：</p>
                     <ol>
                        <li>
                           <p><code class="codeph">PDB$SEED</code>和<code class="codeph">CDB1_PDB2</code> 。日志输出与指定的日志ldentifiers（登录ID）的生成作为<code class="codeph">pdb_seed</code>为<code class="codeph">PDB$SEED</code>和日志ID <code class="codeph">mayapdb2</code>为<code class="codeph">CDB_1PDB2</code> ）</p>
                        </li>
                        <li>
                           <p><code class="codeph">CDB1_PDB3</code>和<code class="codeph">CDB1_PDB4</code> 。日志ID指定为<code class="codeph">mayapdb3</code>和<code class="codeph">mayapdb4</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CDB1_PDB5</code>和<code class="codeph">CDB1_PDB6</code> 。日志ID指定为<code class="codeph">mayapdb5</code>和<code class="codeph">mayapdb6</code> 
                           </p>
                        </li>
                        <li><code class="codeph">CDB1_PDB1</code> 。日志ID指定为<code class="codeph">mayapdb1</code> 。
                        </li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="upgrading-parallel-upgrade-utility-catctl-pl.html#GUID-9E7E83CC-6A4B-4645-AEA8-AFE16337339E">关于Oracle数据库的并行升级实用程序（CATCTL.PL和DBUPGRADE）</a></li>
                        <li><a href="upgrading-parallel-upgrade-utility-catctl-pl.html#GUID-C667B51C-058F-48B6-86FE-12E9D82FDDBD">并行升级实用程序（catctl.pl）参数</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="testing-upgraded-production-oracle-database.html#GUID-DA291D0C-5680-48D3-90A8-CF4217577A6B" title="您的Oracle数据库升级测试计划应包括这些测试过程。">测试Oracle数据库的升级过程</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52882"></a><div class="props_rev_3"><a id="GUID-DCDFE417-1D74-4154-B565-5E34E616E1BA" name="GUID-DCDFE417-1D74-4154-B565-5E34E616E1BA"></a><h3 id="UPGRD-GUID-DCDFE417-1D74-4154-B565-5E34E616E1BA" class="sect3">升级Oracle调用接口（OCI）和预编译器应用程序</h3>
               <div>
                  <p>升级计划与新版Oracle数据库一起使用的任何Oracle调用接口（OCI）和预编译器应用程序。</p>
                  <p>Oracle建议您在升级当前生产数据库之前在测试数据库上测试这些应用程序。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="-upgrade-precompiler-oci-apps-oracle-database.html#GUID-624A9128-1FD8-4CE6-B69A-97A6E4A4882E">关于在Oracle数据库中升级预编译器和OCI应用程序</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="testing-upgraded-production-oracle-database.html#GUID-DA291D0C-5680-48D3-90A8-CF4217577A6B" title="您的Oracle数据库升级测试计划应包括这些测试过程。">测试Oracle数据库的升级过程</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
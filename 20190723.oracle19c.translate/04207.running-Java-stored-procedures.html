<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>运行Java存储过程</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Java Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Java Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="java-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T00:55:24-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96468-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="stored-procedure-advantages.html" title="Previous" type="text/html"></link>
      <link rel="next" href="debugging-Java-stored-procedures.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Java Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JJDEV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="stored-procedure-advantages.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="debugging-Java-stored-procedures.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="developing-Java-stored-procedures.html" property="item" typeof="WebPage"><span property="name">开发Java存储过程</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">运行Java存储过程</li>
            </ol>
            <a id="GUID-11B2344A-7C07-4DFB-90D1-748EA814F5E6" name="GUID-11B2344A-7C07-4DFB-90D1-748EA814F5E6"></a><a id="JJDEV13249"></a>
            
            <h2 id="JJDEV-GUID-11B2344A-7C07-4DFB-90D1-748EA814F5E6" class="sect2"><span class="enumeration_section">6.3</span>运行Java存储过程</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p><a id="d25566e87" class="indexterm-anchor"></a>您可以运行Java <a id="d25566e92" class="indexterm-anchor"></a>存储过程的方式与PL / SQL存储过程相同。通常，对Java存储过程的调用是数据库操作的结果，因为它通常是触发器或SQL DML调用的结果。要调用Java存储过程，必须通过调用规范发布它。
                  </p>
                  <p>在调用Java存储过程之前，必须将它们加载到Oracle数据库实例中并将它们发布到SQL。加载和发布是单独的任务。许多Java类（仅由其他Java类引用）永远不会发布。</p>
                  <p><a id="d25566e100" class="indexterm-anchor"></a>要自动加载Java存储过程，可以使用<code class="codeph">loadjava</code>工具。它将Java源，类和资源文件加载到系统生成的数据库表中，然后使用SQL <code class="codeph">CREATE JAVA {SOURCE | CLASS | RESOURCE}</code>语句将Java文件加载到Oracle数据库实例中。您可以从文件系统，流行的Java IDE，Intranet或Internet上载Java文件。
                  </p>
                  <p>您必须执行以下步骤来创建，加载和调用Java存储过程：</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="running-Java-stored-procedures.html#GUID-525F68AB-415F-4AB1-A5ED-119820A6D985">创建或重用Java类</a></p>
                     </li>
                     <li>
                        <p><a href="running-Java-stored-procedures.html#GUID-03C36E56-DF69-4660-AE95-7CE365F41786">加载和解析Java类</a></p>
                     </li>
                     <li>
                        <p><a href="running-Java-stored-procedures.html#GUID-61F380A6-F44C-4D5A-826F-1D1207EBF7A6">发布Java类</a></p>
                     </li>
                     <li>
                        <p><a href="running-Java-stored-procedures.html#GUID-6B7D8A8A-D77B-4345-B9E5-ADC8180A6423">调用存储过程</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-11B2344A-7C07-4DFB-90D1-748EA814F5E6__GUID-E2DDC931-B3CD-4684-82E5-41C5A4402364">
                     <p class="notep1">注意：</p>
                     <p>要手动加载Java存储过程，可以使用<code class="codeph">CREATE JAVA</code>语句。例如，在SQL * Plus中，您可以使用<code class="codeph">CREATE JAVA CLASS</code>语句将Java类文件从本地<code class="codeph">BFILE</code>和<code class="codeph">LOB</code>列加载到Oracle数据库中。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
            </div><a id="JJDEV13250"></a><div class="props_rev_3"><a id="GUID-525F68AB-415F-4AB1-A5ED-119820A6D985" name="GUID-525F68AB-415F-4AB1-A5ED-119820A6D985"></a><h3 id="JJDEV-GUID-525F68AB-415F-4AB1-A5ED-119820A6D985" class="sect3"><span class="enumeration_section">6.3.1</span>创建或重用Java类</h3>
               <div>
                  <div class="section">
                     <p>使用首选Java IDE创建类，或重用符合您要求的现有类。Oracle数据库支持许多Java开发工具和客户端编程接口。例如，Oracle JVM接受在流行的Java IDE中开发的程序，例如Oracle JDeveloper，Symantec Visual Cafe和Borland JBuilder。</p>
                     <p>在以下示例中，您将创建<code class="codeph">public</code>类<code class="codeph">Oscar</code> 。它有一个名为<code class="codeph">quote()</code>方法，它返回Oscar Wilde的引文。
                     </p><pre class="oac_no_warn" dir="ltr">公共课奥斯卡{//从奥斯卡王尔德返回引文public static String quote（）{return“除了诱惑，我能抵抗一切。”; }}</pre><p>将该类保存为<code class="codeph">Oscar.java</code> 。使用Java编译器编译客户端系统上的<code class="codeph">.java</code>文件，如下所示：</p><pre class="oac_no_warn" dir="ltr">javac Oscar.java</pre><p>编译器输出Java二进制文件，在本例中为<code class="codeph">Oscar.class</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13251"></a><div class="props_rev_3"><a id="GUID-03C36E56-DF69-4660-AE95-7CE365F41786" name="GUID-03C36E56-DF69-4660-AE95-7CE365F41786"></a><h3 id="JJDEV-GUID-03C36E56-DF69-4660-AE95-7CE365F41786" class="sect3"><span class="enumeration_section">6.3.2</span>加载和解析Java类</h3>
               <div>
                  <div class="section">
                     <p>使用<code class="codeph">loadjava</code>工具，您可以将Java源代码，类和资源文件加载到Oracle数据库实例中，并将它们存储为Java模式对象。您可以从命令行或从应用程序运行<code class="codeph">loadjava</code>工具，并且可以指定多个选项，包括解析程序。
                     </p>
                     <p>在以下示例中， <code class="codeph">loadjava</code>工具使用默认的JDBC OCI驱动程序连接到数据库。您必须指定用户名和密码。默认情况下， <code class="codeph">Oscar</code>类被加载到您登录的用户的模式中，在本例中为<code class="codeph">HR</code> 。</p><pre class="oac_no_warn" dir="ltr">$ loadjava -user HR Oscar.class密码： <span class="italic">密码</span>
</pre><p>当您调用<code class="codeph">quote()</code>方法时，服务器使用解析器来搜索支持类，例如<code class="codeph">String</code> 。在这种情况下，使用默认解析程序。默认解析程序首先搜索当前模式，然后搜索所有核心Java类库所在的<code class="codeph">SYS</code>模式。如有必要，您可以指定不同的解析器。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13252"></a><div class="props_rev_3"><a id="GUID-61F380A6-F44C-4D5A-826F-1D1207EBF7A6" name="GUID-61F380A6-F44C-4D5A-826F-1D1207EBF7A6"></a><h3 id="JJDEV-GUID-61F380A6-F44C-4D5A-826F-1D1207EBF7A6" class="sect3"><span class="enumeration_section">6.3.3</span>发布Java类</h3>
               <div>
                  <div class="section">
                     <p>对于可以从SQL或JDBC调用的每个Java方法，必须编写一个调用规范，该规范将方法的顶级入口点公开给Oracle数据库。通常，只需要几个呼叫规范。如果愿意，您可以使用Oracle JDeveloper生成这些调用规范。</p>
                     <p>在以下示例中，从SQL * Plus，您连接到数据库，然后为<code class="codeph">quote()</code>方法定义顶级调用规范：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; connect HR输入密码： <span class="italic">password</span> SQL&gt; CREATE FUNCTION oscar_quote RETURN VARCHAR2 2 AS LANGUAGE JAVA 3 NAME'Oscar.quote（）返回java.lang。串';</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="publishing-Java-classes.html#GUID-C6DB962A-CCA6-44A1-990C-3E52636A0634">使用呼叫规范发布Java类</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13253"></a><div class="props_rev_3"><a id="GUID-6B7D8A8A-D77B-4345-B9E5-ADC8180A6423" name="GUID-6B7D8A8A-D77B-4345-B9E5-ADC8180A6423"></a><h3 id="JJDEV-GUID-6B7D8A8A-D77B-4345-B9E5-ADC8180A6423" class="sect3"><span class="enumeration_section">6.3.4</span>调用存储过程</h3>
               <div>
                  <div class="section">
                     <p>您可以从JDBC，SQLJ和可以访问调用规范的所有第三方语言调用Java存储过程。使用SQL <code class="codeph">CALL</code>语句，您还可以从顶层调用存储过程，例如，从SQL * Plus调用。也可以从数据库触发器调用存储过程。
                     </p>
                     <p>在以下示例中，您声明了一个SQL * Plus主机变量：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; VARIABLE theQuote VARCHAR2（50）;</pre><p>然后，调用函数<code class="codeph">oscar_quote()</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CALL oscar_quote（）INTO：theQuote; SQL&gt; PRINT theQuote;报价单  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - - 除了诱惑，我能抵抗一切。
</pre><p>您还可以使用<code class="codeph">ojvmjava</code>工具调用Java类。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="calling-stored-procedures.html#GUID-1ACD765F-B6C6-41FC-96E9-A9B03C73C64D">调用存储过程</a></li>
                        <li><a href="ojvmjava-tool.html#GUID-E3141F37-82FC-45F4-86BF-FED2ED823BC4">ojvmjava工具</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
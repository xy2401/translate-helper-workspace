<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter explains how Database In-Memory feature works in an Oracle Active Data Guard environment."></meta>
      <meta name="description" content="This chapter explains how Database In-Memory feature works in an Oracle Active Data Guard environment."></meta>
      <title>使用Oracle Active Data Guard部署IM列存储</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database In-Memory Guide"></meta>
      <meta property="og:description" content="This chapter explains how Database In-Memory feature works in an Oracle Active Data Guard environment."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database In-Memory Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00"></meta>
      <meta name="dcterms.title" content="Database In-Memory Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96137-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="deploying-in-memory-in-oracle-rac.html" title="Previous" type="text/html"></link>
      <link rel="next" href="in-memory-reference.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="deploying-in-memory-in-oracle-rac.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="in-memory-reference.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库内存指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="high-availability-and-the-im-column-store.html" property="item" typeof="WebPage"><span property="name">高可用性和IM列存储</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle Active Data Guard部署IM列存储</li>
            </ol>
            <a id="GUID-D7307BB7-2C8D-4A2C-98F6-B3F6000EFC20" name="GUID-D7307BB7-2C8D-4A2C-98F6-B3F6000EFC20"></a>
            
            <h2 id="INMEM-GUID-D7307BB7-2C8D-4A2C-98F6-B3F6000EFC20" class="sect2"><span class="enumeration_chapter">13</span>使用Oracle Active Data Guard部署IM列存储</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍Database In-Memory功能如何在<span>Oracle Active Data Guard</span>环境中工作。
               </p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698">关于Database In-Memory和Active Data Guard</a><br>从<span>Oracle Database 12c</span>第2版（12.2.0.1）开始，使用Oracle集成系统或Oracle云平台即服务的<span>Oracle Active Data Guard</span>环境支持Oracle Database In-Memory。
                  </li>
                  <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222">在Oracle Active Data Guard环境中配置IM列存储</a><br>在<span>Oracle Active Data Guard中</span>配置IM列存储需要设置<code class="codeph">INMEMORY_SIZE</code> ，并为要填充的对象设置适当的<code class="codeph">INMEMORY</code>属性。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="high-availability-and-the-im-column-store.html#GUID-744E10A1-D345-4F73-82BD-6690CFF333D4" title="本部分介绍如何使用具有高可用性功能的IM列存储，例如内存中快速启动（IM FastStart），Oracle Data Guard和Oracle Real Application Clusters（Oracle RAC）。">高可用性和IM列存储</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698" name="GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698"></a><h3 id="INMEM-GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698" class="sect3"><span class="enumeration_section">13.1</span>关于数据库内存和活动数据保护</h3>
               <div>
                  <p>从<span>Oracle Database 12c</span>第2版（12.2.0.1）开始，使用Oracle集成系统或Oracle云平台即服务的<span>Oracle Active Data Guard</span>环境支持Oracle Database In-Memory。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F">Oracle Active Data Guard中IM列存储的用途</a><br>您只能在主数据库上配置IM列存储，仅在备用数据库上配置IM列存储，或在主数据库和备用数据库上配置IM列存储。
                     </li>
                     <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC">IM列存储如何在Oracle Active Data Guard中工作</a><br>在<span>Oracle Active Data Guard</span>环境中，对象级<code class="codeph">PRIORITY</code>属性控制填充。仅在服务处于活动状态的数据库实例中填充对象。
                     </li>
                     <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-025A18D1-73FC-498E-85BB-EC88812BCC00">Active Data Guard中的内存限制</a><br>Active Data Guard支持大多数内存中功能。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698__GUID-8B6260EA-898C-4C69-AC5C-0A7F30232D2C">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../sbydb/introduction-to-oracle-data-guard-concepts.html#GUID-5E73667D-4A56-445E-911F-1E99092DD8D7" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a> ，介绍<span>Oracle Active Data Guard</span></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="deploying-im-column-store-with-adg.html#GUID-D7307BB7-2C8D-4A2C-98F6-B3F6000EFC20" title="本章介绍Database In-Memory功能在Oracle Active Data Guard环境中的工作原理。">使用Oracle Active Data Guard部署IM列存储</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F" name="GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F"></a><h4 id="INMEM-GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F" class="sect4"><span class="enumeration_section">13.1.1</span> Oracle Active Data Guard中IM列存储的用途</h4>
                  <div>
                     <p>您只能在主数据库上配置IM列存储，仅在备用数据库上配置IM列存储，或在主数据库和备用数据库上配置IM列存储。</p>
                     <p>如果为两个数据库配置IM列存储，则可以在这两个实例上填充相同或不同的对象集。该技术有效地增加了IM列存储大小。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-BCF259A8-C887-4F35-83D4-B3FFAE3A37BC">主数据库和备用数据库中的相同IM列存储</a><br>在最简单的方案中，主数据库和备用数据库都包含具有相同大小的IM列存储（这不是必需的）。IM列存储包含相同的对象。
                        </li>
                        <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-BB71407C-A16D-46BD-83CD-CEE5B8B7C944">IM列存储仅在备用数据库中</a><br>在此方案中，IM列存储存在于备用数据库中，但不存在于主数据库中。
                        </li>
                        <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA">主要和备用IM列存储中的不同对象</a><br>最灵活的方案是单独为主数据库和备用数据库配置IM列存储。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="deploying-im-column-store-with-adg.html#GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698" title="从Oracle Database 12c第2版（12.2.0.1）开始，使用Oracle集成系统或Oracle云平台即服务的Oracle Active Data Guard环境支持Oracle Database In-Memory。">关于Database In-Memory和Active Data Guard</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-BCF259A8-C887-4F35-83D4-B3FFAE3A37BC" name="GUID-BCF259A8-C887-4F35-83D4-B3FFAE3A37BC"></a><h5 id="INMEM-GUID-BCF259A8-C887-4F35-83D4-B3FFAE3A37BC" class="sect5"><span class="enumeration_section">13.1.1.1</span>主数据库和备用数据库中的相同IM列存储</h5>
                     <div>
                        <p>在最简单的方案中，主数据库和备用数据库都包含具有相同大小的IM列存储（这不是必需的）。IM列存储包含相同的对象。</p>
                        <p>此方案的优点是分析查询可以访问任一数据库上的IM列存储。因此，您可以将分析查询定向到备用数据库，而不是消耗主数据库上的资源。因此，主数据库可以支持事务工作负载，而备用数据库则支持分析工作负载。</p>
                        <p>主要任务如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在主数据库实例和备用数据库实例上设置<code class="codeph">INMEMORY_SIZE</code>初始化参数。
                              </p>
                           </li>
                           <li>
                              <p>确保备用数据库实例上的<code class="codeph">INMEMORY_ADG_ENABLED</code>初始化参数设置为<code class="codeph">TRUE</code> （缺省值）。
                              </p>
                           </li>
                           <li>
                              <p>在要在两个IM列存储中填充的所有对象上设置<code class="codeph">INMEMORY</code>属性。
                              </p>
                           </li>
                        </ul>
                        <p>如果更改对象的<code class="codeph">INMEMORY</code>属性，则主数据库<code class="codeph">INMEMORY</code>更改传播到备用数据库。例如，如果在<code class="codeph">sales</code>表上设置<code class="codeph">NO INMEMORY</code>属性，则两个IM列存储都会逐出<code class="codeph">sales</code> 。
                        </p>
                        <p>在主数据库上，您可以将表的列的子集启用到IM列存储中。您还可以为不同的列指定不同的压缩级别。启用特定列涉及字典更改。主数据库上的DDL将传播到<span>Oracle Active Data Guard</span>数据库。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-BCF259A8-C887-4F35-83D4-B3FFAE3A37BC__GUID-49D59F52-A0A1-4434-829F-7C12D7036650">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="enabling-the-im-column-store.html#GUID-6A220D69-66BA-4C50-8FAB-D5004C96B215" title="在可以将表或实例化视图填充到IM列存储中之前，必须为数据库启用IM列存储。">为数据库启用IM列存储</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">CREATE TABLE</code>语句的信息，请<a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">INMEMORY_SIZE</code>和<code class="codeph">INMEMORY_ADG_ENABLED</code>初始化参数的详细信息，请<code class="codeph">INMEMORY_SIZE</code> <a href="../refrn/INMEMORY_SIZE.html#REFRN10348" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="deploying-im-column-store-with-adg.html#GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F" title="您只能在主数据库上配置IM列存储，仅在备用数据库上配置IM列存储，或在主数据库和备用数据库上配置IM列存储。">Oracle Active Data Guard中IM列存储的用途</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-BB71407C-A16D-46BD-83CD-CEE5B8B7C944" name="GUID-BB71407C-A16D-46BD-83CD-CEE5B8B7C944"></a><h5 id="INMEM-GUID-BB71407C-A16D-46BD-83CD-CEE5B8B7C944" class="sect5"><span class="enumeration_section">13.1.1.2</span> IM列仅存储在备用数据库中</h5>
                     <div>
                        <p>在此方案中，IM列存储存在于备用数据库中，但不存在于主数据库中。</p>
                        <p>在此方案中，主数据库可以用作纯OLTP数据库。IM列存储的主数据库中不需要额外的内存。您可以将分析报告应用程序定向到备用数据库，而不会牺牲主数据库的性能或消耗资源。</p>
                        <p>主要任务如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在备用数据库实例中将<code class="codeph">INMEMORY_SIZE</code>初始化参数设置为非零值，并在主数据库实例中将其设置为<code class="codeph">0</code> 。
                              </p>
                           </li>
                           <li>
                              <p>确保备用数据库实例上的<code class="codeph">INMEMORY_ADG_ENABLED</code>初始化参数设置为<code class="codeph">TRUE</code> （缺省值）。
                              </p>
                           </li>
                           <li>
                              <p>在要备份数据库的IM列存储中填充的所有对象上，使用<code class="codeph">DISTRIBUTE FOR SERVICE</code>子句设置<code class="codeph">INMEMORY</code>属性。
                              </p>
                              <p>例如，如果您登录到主数据库，并且在<code class="codeph">sh.sales</code>表上设置<code class="codeph">INMEMORY</code>属性，则此表将不会填充在主数据库上的IM列存储中 - 因为不存在IM列存储这个数据库。然而，备用数据库将继承<code class="codeph">INMEMORY</code>的属性<code class="codeph">sh.sales</code>表。该表将填充在备用数据库的IM列存储中。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="deploying-im-column-store-with-adg.html#GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F" title="您只能在主数据库上配置IM列存储，仅在备用数据库上配置IM列存储，或在主数据库和备用数据库上配置IM列存储。">Oracle Active Data Guard中IM列存储的用途</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA" name="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA"></a><h5 id="INMEM-GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA" class="sect5"><span class="enumeration_section">13.1.1.3</span>主要和备用IM列存储中的不同对象</h5>
                     <div>
                        <p>最灵活的方案是单独为主数据库和备用数据库配置IM列存储。</p>
                        <p>此方案的优点是您可以在每个数据库中运行不同的工作负载。例如，HR应用程序在主数据库中运行报表，而销售历史记录应用程序在备用数据库中运行报表。因此，两个数据库都不承担分析报告的全部负担。</p>
                        <p>主要任务如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在备用数据库和主数据库实例<code class="codeph">INMEMORY_SIZE</code>初始化参数设置为非零值。值不需要相同。
                              </p>
                           </li>
                           <li>
                              <p>确保备用数据库实例上的<code class="codeph">INMEMORY_ADG_ENABLED</code>初始化参数设置为<code class="codeph">TRUE</code> （缺省值）。
                              </p>
                           </li>
                           <li>
                              <p>设置<code class="codeph">INMEMORY ...对两个IM列存储中要填充的所有对象的DISTRIBUTE FOR SERVICE</code>子句。该<a href="glossary.html#GUID-E40DD15F-50AF-4D60-97AB-92FE98FB3676"><span class="xrefglossterm">服务</span></a>指定填充对象的实例。
                              </p>
                           </li>
                        </ul>
                        <div class="section">
                           <p class="subhead3" id="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA__GUID-908482BB-899E-464A-862C-38B3FAE93B13">三服务配置</p>
                           <p>在典型配置中，您可以创建三种服务：仅待机，仅限主要和主要和备用。例如，您可能需要主实例中的最新月份的<code class="codeph">sales</code>事实表数据，但备用实例中的先前<code class="codeph">sales</code>数据。您希望在两个实例中填充维度表。对于每个<code class="codeph">sales</code>分区，您使用<code class="codeph">INMEMORY ...DISTRIBUTE FOR SERVICE</code>指定备用或主要服务。对于每个维度表，指定包含主数据库实例和备用数据库实例的服务。
                           </p>
                           <div class="infoboxnote" id="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA__GUID-42BBCC76-0363-4268-A4DF-ABF65FCDACAD">
                              <p class="notep1">注意：</p>
                              <p>只要为主实例和备用实例定义了服务名称，就可以在<code class="codeph">DISTRIBUTE FOR SERVICE</code>指定相同的服务名称，以填充主数据库和备用数据库中的相同表。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA__GUID-359713AB-B00B-44DA-9CED-D548D4D3F7EA">Oracle RAC和Oracle Active Data Guard</p>
                           <p>在Oracle RAC中，您可以将<code class="codeph">FOR SERVICE</code>子句与<code class="codeph">DISTRIBUTE AUTO</code>或<code class="codeph">DISTRIBUTE BY</code>子句结合使用， <code class="codeph">FOR SERVICE</code>子句指定了population的实例， <code class="codeph">DISTRIBUTE AUTO</code>或<code class="codeph">DISTRIBUTE BY</code>子句控制IMCU的分布。但是，在Oracle Active Data Guard中， <code class="codeph">FOR SERVICE</code>子句指定要在其中<span class="italic">填充</span>指定对象的主实例或备用实例：不能使用<code class="codeph">DISTRIBUTE AUTO</code>或<code class="codeph">DISTRIBUTE BY</code>在主实例和备用实例<span class="italic">之间</span>分发IMCU。例如，您无法在主实例和备用实例之间划分<code class="codeph">sales</code>表的填充，因此一半的IMCU位于主实例中，一半的IMCU位于备用实例中。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA__GUID-0110D1A4-B7BB-4356-81D0-7B1B4DBAEDB9">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li><span class="q">“ <a href="deploying-in-memory-in-oracle-rac.html#GUID-2CF933E4-102B-4C9B-9953-6953A8CE2BCE" title="对于单个对象，INMEMORY ......DISTRIBUTE子句有一个FOR SERVICE子句，它将群体限制为可以运行此服务的数据库实例。">对象级服务控件</a> ”</span></li>
                              <li>
                                 <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF-GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6" target="_blank"><span><cite>Oracle Database SQL语言参考，</cite></span></a>以了解有关<code class="codeph">DISTRIBUTE FOR SERVICE</code>子条款的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="deploying-im-column-store-with-adg.html#GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F" title="您只能在主数据库上配置IM列存储，仅在备用数据库上配置IM列存储，或在主数据库和备用数据库上配置IM列存储。">Oracle Active Data Guard中IM列存储的用途</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC" name="GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC"></a><h4 id="INMEM-GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC" class="sect4"><span class="enumeration_section">13.1.2</span> IM列存储如何在Oracle Active Data Guard中工作</h4>
                  <div>
                     <p>在<span>Oracle Active Data Guard</span>环境中，对象级<code class="codeph">PRIORITY</code>属性控制填充。仅在服务处于活动状态的数据库实例中填充对象。
                     </p>
                     <p>根据<code class="codeph">PRIORITY</code>值，人口是基于优先级的按需。发生角色更改或切换时，数据库将根据新映射服务的数据库实例集重新填充表。
                     </p>
                     <p>下图说明了使用主数据库中的重做更新备用数据库的内部机制。</p>
                     <div class="figure" id="GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC__GUID-974A5838-44B6-4424-AAFB-0A7ADFEBBA74">
                        <p class="titleinfigure">图13-1更新备用数据库</p><img src="img/inmem_3v_019.png" alt="下面是图13-1的描述" title="下面是图13-1的描述" longdesc="img_text/inmem_3v_019.html"><br><a href="img_text/inmem_3v_019.html">“图13-1更新备用数据库”的说明</a></div>
                     <!-- class="figure" -->
                     <p>过程如下：</p>
                     <ol>
                        <li>
                           <p>主数据库生成重做，然后将重做传输到备用数据库。</p>
                           <p>在主数据库上为所有DML语句生成的重做包括指示更改是否是<code class="codeph">INMEMORY</code>对象的元数据。
                           </p>
                        </li>
                        <li>
                           <p>备用数据库将重做应用于存储在磁盘中的数据块。</p>
                           <p>由于备用数据库在主数据库上应用从正在进行的操作生成的重做，因此备用数据库使它们在事务上保持一致。</p>
                        </li>
                        <li>
                           <p>如果修改了<code class="codeph">INMEMORY</code>对象，则备用数据库将使修改的行无效，就像在主数据库上一样，使用<a href="glossary.html#GUID-16BF775D-7A77-4F8C-94F2-D1EBF2D67D1B"><span class="xrefglossterm">事务日志</span></a>和<a href="glossary.html#GUID-2EE0FA0D-D987-4B05-A714-4F6D126868F1"><span class="xrefglossterm">快照元数据单元（SMU）</span></a>来跟踪更改。
                           </p>
                        </li>
                     </ol>
                     <p><a href="glossary.html#GUID-9168517C-C8A2-4433-946A-037631B840E2"><span class="xrefglossterm">重新填充</span></a>机制在备用数据库中的工作方式与在主数据库中的工作方式相同。当对象上发生足够的DML以达到内部阈值时，备用数据库将重新填充IM列存储中的对象。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC__GUID-2661D99C-B5C0-4385-BCD5-F14A4A2691C3">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" title="重大修改后自动刷新柱状数据称为重新填充。">关于IM列存储的重新填充</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="optimizing-queries-with-join-groups.html#GUID-DC6B8DF7-C959-443F-B7D9-06ECA84BCD55" title="启用IM列存储后，数据库可以使用连接组来优化IM列存储中填充的表的连接。">关于加入群组</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../sbydb/configuring-data-guard-standby-databases-in-oracle-RAC.html#GUID-00B72AF1-0453-4FBD-901F-A3764631BE1F" target="_blank"><span><cite>Oracle Data Guard概念和管理，</cite></span></a>以了解有关多实例重做应用的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="deploying-im-column-store-with-adg.html#GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698" title="从Oracle Database 12c第2版（12.2.0.1）开始，使用Oracle集成系统或Oracle云平台即服务的Oracle Active Data Guard环境支持Oracle Database In-Memory。">关于Database In-Memory和Active Data Guard</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-025A18D1-73FC-498E-85BB-EC88812BCC00" name="GUID-025A18D1-73FC-498E-85BB-EC88812BCC00"></a><h4 id="INMEM-GUID-025A18D1-73FC-498E-85BB-EC88812BCC00" class="sect4"><span class="enumeration_section">13.1.3</span> Active Data Guard中的内存限制</h4>
                  <div>
                     <p>Active Data Guard支持大多数内存中功能。</p>
                     <p>备用数据库不支持以下内存中功能：</p>
                     <ul id="GUID-025A18D1-73FC-498E-85BB-EC88812BCC00__UL_SM5_K5F_KGB" style="list-style-type:disc">
                        <li>
                           <p>IM FastStart</p>
                        </li>
                        <li>
                           <p>加入团体</p>
                        </li>
                        <li>
                           <p>IM表达式捕获</p>
                        </li>
                        <li>
                           <p>热图（仅反映主数据库）</p>
                        </li>
                     </ul>
                     <p>Active Data Guard备用数据库上的IM列存储支持Data Guard多实例重做应用，但仅当初始化参数<code class="codeph">ENABLE_IMC_WITH_MIRA</code>设置为<code class="codeph">TRUE</code>时才支持。默认情况下， <code class="codeph">ENABLE_IMC_WITH_MIRA</code>为<code class="codeph">FALSE</code> 。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-025A18D1-73FC-498E-85BB-EC88812BCC00__GUID-10F88AC6-6A34-4887-A44F-E6D69BC18307">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../refrn/ENABLE_IMC_WITH_MIRA.html#REFRN-GUID-124E6841-C552-4DA8-96D4-83CE16B6B6AB" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">ENABLE_IMC_WITH_MIRA</code>更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="deploying-im-column-store-with-adg.html#GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698" title="从Oracle Database 12c第2版（12.2.0.1）开始，使用Oracle集成系统或Oracle云平台即服务的Oracle Active Data Guard环境支持Oracle Database In-Memory。">关于Database In-Memory和Active Data Guard</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222" name="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222"></a><h3 id="INMEM-GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222" class="sect3"><span class="enumeration_section">13.2</span>在Oracle Active Data Guard环境中配置IM列存储</h3>
               <div>
                  <p>在<span>Oracle Active Data Guard中</span>配置IM列存储需要设置<code class="codeph">INMEMORY_SIZE</code> ，并为要填充的对象设置适当的<code class="codeph">INMEMORY</code>属性。
                  </p>
                  <div class="section">此任务假定您了解<span>Oracle Active Data Guard</span>概念和过程。
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222__GUID-CEFBB26D-385D-4B81-B707-3AFD17CEF5E6">先决条件</p>
                     <p>您必须满足以下要求：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>备用数据库必须在Oracle集成系统或Oracle Cloud Platform即服务中运行。</p>
                        </li>
                        <li>
                           <p><code class="codeph">COMPATIBLE</code>初始化参数必须为<code class="codeph">12.2.0</code>或更高。
                           </p>
                        </li>
                        <li>
                           <p>要在每个数据库中填充不同的对象，请配置相应的服务。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222__GUID-5EC931D3-F8A7-43C2-AF3D-B4D31EE0A40B">要在Oracle Active Data Guard环境中配置IM列存储，请执行以下操作：</p>
                     <ol>
                        <li>
                           <p>在将包含IM列存储的数据库实例上设置<code class="codeph">INMEMORY_SIZE</code>初始化参数。
                           </p>
                           <p>请遵循以下准则：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要在主数据库和备用数据库上配置IM列存储， <code class="codeph">INMEMORY_SIZE</code>在两个数据库实例上设置<code class="codeph">INMEMORY_SIZE</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>要仅在备用数据库上配置IM列存储， <code class="codeph">INMEMORY_SIZE</code>在备用数据库实例上设置<code class="codeph">INMEMORY_SIZE</code> 。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>确保备用数据库实例上的<code class="codeph">INMEMORY_ADG_ENABLED</code>初始化参数设置为<code class="codeph">TRUE</code> （缺省值）。
                           </p>
                        </li>
                        <li>（可选）如果要使用IM列存储启用多实例重做应用，请将<code class="codeph">ENABLE_IMC_WITH_MIRA</code>初始化参数设置为<code class="codeph">TRUE</code> 。</li>
                        <li>
                           <p>在主数据库上，使用<code class="codeph">INMEMORY</code>属性执行DDL语句。
                           </p>
                           <p>任务取决于IM列存储的位置，以及是否将在每个IM列存储中填充不同的对象：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果两个数据库中都存在IM列存储，则连接到主数据库，并在没有<code class="codeph">DISTRIBUTE FOR SERVICE</code>子句的情况下设置<code class="codeph">INMEMORY</code>属性。例如，将<code class="codeph">INMEMORY</code>属性应用于<code class="codeph">sh.sales</code>表。
                                 </p>
                                 <p>根据标准规则在每个数据库上发生人口。例如，如果备用数据库上的<code class="codeph">sales</code>优先级为<code class="codeph">NONE</code> ，则触发完整<code class="codeph">sales</code>扫描的备用数据库查询会在备用IM列存储中填充此表。
                                 </p>
                                 <div class="infoboxnote" id="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222__GUID-751D88A4-CB6B-4663-9DFA-BEB3FEE1A7AA">
                                    <p class="notep1">注意：</p>
                                    <p><span class="italic">备用</span>数据库上的完整<code class="codeph">sales</code>扫描不会在<span class="italic">主</span>数据库的IM列存储中填充此表。
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>如果仅在备用数据库中存在IM列存储，则登录到主数据库，并在没有<code class="codeph">DISTRIBUTE FOR SERVICE</code>子句的情况下设置<code class="codeph">INMEMORY</code>属性。
                                 </p>
                                 <p>在重做传输期间，备用数据库从主数据库接收此DDL语句。群体以正常方式发生在备用数据库上。例如，如果<code class="codeph">sales</code>具有<code class="codeph">INMEMORY</code>属性且优先级为<code class="codeph">NONE</code> ，则表必须进行全面扫描才能进行填充。
                                 </p>
                              </li>
                              <li>
                                 <p>如果两个数据库中都存在IM列存储，并且您希望这些IM列存储包含不同的对象，则登录到主数据库，然后设置<code class="codeph">INMEMORY ...根据每个对象DISTRIBUTE FOR SERVICE</code> 。
                                 </p>
                                 <p>在每个DDL语句中，服务指定应在其中填充对象的实例。例如，要仅在备用数据库中启用填充<code class="codeph">sales</code> ，请在DDL语句中指定仅备用服务。要在两个数据库中启用填充<code class="codeph">products</code> ，请在DDL语句中指定备用和主要服务。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222__GUID-6AAFEB66-2109-4E0C-8F14-15DBE0F87E86">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="populating-objects-in-memory.html#GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12" title="DDL语句包括一个INMEMORY PRIORITY子句，它提供了对总体队列的更多控制。">记忆中人口的优先顺序</a> ”</span></p>
                        </li>
                        <li>
                           <p><a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB-GUID-9796284E-DF94-4F88-8CF6-7F966830D3AA" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF-GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6" target="_blank"><span><cite>Oracle Database SQL语言参考，</cite></span></a>以了解有关<code class="codeph">DISTRIBUTE FOR SERVICE</code>子条款的更多信息</p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">INMEMORY_SIZE</code> ， <code class="codeph">INMEMORY_ADG_ENABLED</code>和<code class="codeph">ENABLE_IMC_WITH_MIRA</code>初始化参数的详细信息，请<code class="codeph">INMEMORY_ADG_ENABLED</code> <a href="../refrn/INMEMORY_SIZE.html#REFRN10348" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="deploying-im-column-store-with-adg.html#GUID-D7307BB7-2C8D-4A2C-98F6-B3F6000EFC20" title="本章介绍Database In-Memory功能在Oracle Active Data Guard环境中的工作原理。">使用Oracle Active Data Guard部署IM列存储</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
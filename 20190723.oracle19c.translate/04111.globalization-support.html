<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>全球化支持</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="JDBC Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00"></meta>
      <meta name="dcterms.title" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96471-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="JDBC-Rowsets.html" title="Previous" type="text/html"></link>
      <link rel="next" href="performance-and-scalability.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="JDBC-Rowsets.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="performance-and-scalability.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="data-access-and-manipulation.html" property="item" typeof="WebPage"><span property="name">数据访问和操作</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">全球化支持</li>
            </ol>
            <a id="GUID-CE02B998-DD6A-46FC-8ECF-AD2413F09A97" name="GUID-CE02B998-DD6A-46FC-8ECF-AD2413F09A97"></a><a id="JJDBC28643"></a>
            
            <h2 id="JJDBC-GUID-CE02B998-DD6A-46FC-8ECF-AD2413F09A97" class="sect2"><span class="enumeration_chapter">19</span>全球化支持</h2>
         </header>
         <div class="ind">
            <div>
               <p>该<a id="d63983e22" class="indexterm-anchor"></a> Oracle Java数据库连接（JDBC）驱动程序提供全球化支持，以前称为国家语言支持（NLS）。全球化<a id="d63983e27" class="indexterm-anchor"></a><a id="d63983e29" class="indexterm-anchor"></a>支持使您能够在Oracle支持的任何字符集中检索数据或将数据插入数据库。如果客户端和服务器使用不同的字符集，则驱动程序提供支持以执行数据库字符集和客户端字符集之间的转换。
               </p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="globalization-support.html#GUID-74E71A76-E1EA-4C63-9D7C-CB2293DB0488">关于提供全球化支持</a></p>
                  </li>
                  <li>
                     <p><a href="globalization-support.html#GUID-C29926B3-8B5B-4B05-9193-29B247B52C66">NCHAR_ NVARCHAR2_ NCLOB和defaultNChar属性</a></p>
                  </li>
                  <li>
                     <p><a href="globalization-support.html#GUID-DB3BCB15-C62F-47B1-B527-5F2DF28E5CFB">JDK 6中国家字符集类型数据的新方法</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-CE02B998-DD6A-46FC-8ECF-AD2413F09A97__GUID-23FBC34A-E9A2-4A67-8B18-D998B73C7D74">
                  <p class="notep1">注意：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>从Oracle Database <span class="italic">10g开始</span> ， <code class="codeph">NLS_LANG</code>变量不再是JDBC全球化机制的一部分。JDBC驱动程序不检查NLS环境。因此，设置它没有任何效果。
                        </p>
                     </li>
                     <li>
                        <p>JDBC服务器端内部驱动程序提供完整的全球化支持，不需要任何全球化扩展文件。</p>
                     </li>
                     <li>
                        <p>JDBC 4.0包括用于读取和写入国家字符集值的方法。使用JSE 6或更高版本时，应使用这些方法。</p>
                     </li>
                  </ul>
               </div>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="Oracle-extensions.html#GUID-E180187D-07AA-4D64-9946-4D08FBB2E46E">Oracle字符数据类型支持</a></li>
                     <li><a href="../nlspg/overview-of-globalization-support.html#NLSPG-GUID-C7D51299-95B5-4C2D-A747-776100E8DBED" target="_blank"><span><cite>Oracle数据库全球化支持指南</cite></span></a></li>
                  </ul>
               </div>
            </div><a id="JJDBC28645"></a><a id="JJDBC28644"></a><div class="props_rev_3"><a id="GUID-74E71A76-E1EA-4C63-9D7C-CB2293DB0488" name="GUID-74E71A76-E1EA-4C63-9D7C-CB2293DB0488"></a><h3 id="JJDBC-GUID-74E71A76-E1EA-4C63-9D7C-CB2293DB0488" class="sect3"><span class="enumeration_section">19.1</span>关于提供全球化支持</h3>
               <div>
                  <p>基本Java Archive（JAR）文件<code class="codeph">ojdbc7.jar</code>包含为以下各项提供完整全球化支持的所有必需类：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>未作为Oracle对象或集合类型的数据成员检索或插入的<code class="codeph">CHAR</code> ， <code class="codeph">VARCHAR</code> ， <code class="codeph">LONGVARCHAR</code>或<code class="codeph">CLOB</code>数据的Oracle字符集。
                        </p>
                     </li>
                     <li>
                        <p>对象和集合的<code class="codeph">CHAR</code>或<code class="codeph">VARCHAR</code>数据成员，用于字符集<code class="codeph">US7ASCII</code> ， <code class="codeph">WE8DEC</code> ， <code class="codeph">WE8ISO8859P1</code> ， <code class="codeph">WE8MSWIN1252</code>和<code class="codeph">UTF8</code> 。
                        </p>
                     </li>
                  </ul>
                  <p>要在对象或集合的<code class="codeph">CHAR</code>或<code class="codeph">VARCHAR</code>数据成员中使用任何其他字符集，必须在<code class="codeph">CLASSPATH</code>环境变量中包含<code class="codeph">orai18n.jar</code> ：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_HOME</span> /jlib/orai18n.jar</pre><div class="infoboxnote" id="GUID-74E71A76-E1EA-4C63-9D7C-CB2293DB0488__GUID-5B055964-2388-411F-859E-C3A7DDD916FD">
                     <p class="notep1">注意：</p>
                     <p>以前的版本取决于<code class="codeph">nls_charset12.zip</code>文件。此文件现已过时。
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-74E71A76-E1EA-4C63-9D7C-CB2293DB0488__GUID-2064C966-EDE2-4EC1-B7C6-CF48DA02FC17">压缩orai18n.jar</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>该<a id="d63983e179" class="indexterm-anchor"></a> <code class="codeph">orai18n.jar</code>文件包含许多重要的字符集和全球化支持文件。您可以使用内置的自定义工具减小<code class="codeph">orai18n.jar</code>的大小，如下所示：</p><pre class="oac_no_warn" dir="ltr">java -jar orai18n.jar -custom-charsets-jar [ <span class="italic">jar / zip_filename</span> ] -charset <span class="italic">characterset_name</span> [ <span class="italic">characterset_name</span> ...]
</pre><p>例如，如果要创建包含JA16SJIS和JA16EUC字符集的custom_orai18n_ja.jar的自定义字符集文件， <code class="codeph">custom_orai18n_ja.jar</code>发出以下命令：</p><pre class="oac_no_warn" dir="ltr">$ java -jar orai18n.jar -custom-charsets-jar custom_orai18n_ja.jar -charset JA16SJIS JA16EUC</pre><p>该命令的输出如下：</p><pre class="oac_no_warn" dir="ltr">添加了字符集：JA16SJIS添加了字符集：JA16EUC</pre><p>如果没有为自定义JAR / ZIP文件指定文件名，则会在当前工作目录中创建名为<code class="codeph">jdbc_orai18n_cs.jar</code>的文件。此外，对于自定义JAR / ZIP文件，您不能指定以<code class="codeph">orai18n</code>开头的名称。
                     </p>
                     <p>如果在命令中指定了任何无效或不受支持的字符集名称，则不会创建任何输出JAR / ZIP文件。如果存在自定义JAR / ZIP文件，则不会更新或删除该文件。</p>
                     <p>自定义字符集JAR / ZIP不接受任何命令。但是，它会打印版本信息和用于生成JAR / ZIP文件的命令。例如，您有<code class="codeph">jdbc_orai18n_cs.zip</code> ，显示信息的命令和显示的信息如下：</p><pre class="oac_no_warn" dir="ltr">$ java -jar jdbc_orai18n_cs.jar Oracle全球化开发工具包 -  12.1。XXX Release此自定义字符集jar / zip文件是使用以下命令创建的：java -jar orai18n.jar -custom-charsets-jar jdbc_orai18n_cs.jar -charset WE8ISO8859P15</pre><p>可以指定的字符集数量的限制取决于操作系统的shell或命令提示符的限制。已证明可以使用该命令指定所有支持的字符集。</p>
                     <div class="infoboxnote" id="GUID-74E71A76-E1EA-4C63-9D7C-CB2293DB0488__GUID-AA890414-3793-44DB-8DC3-D5D1A24EAC0A">
                        <p class="notep1">注意：</p>
                        <p>如果您使用的是自定义字符集，则需要执行以下操作，以便JDBC支持自定义字符集：</p>
                        <ol>
                           <li>
                              <p>创建后<code class="codeph">.nlt</code>和<code class="codeph">.nlb</code>文件作为创建自定义字符集的过程中，创造<code class="codeph">.glb</code>为新创建的字符集，也为文件<code class="codeph">lx0boot.nlt</code>使用下面的命令文件：</p><pre class="oac_no_warn" dir="ltr">java -classpath $ ORACLE_HOME / jlib / orai18n.jar：$ ORACLE_HOME / lib / xmlparserv2.jar Ginstall  -  [add | a] &lt; <span class="italic">NLT_file_name</span> &gt;</pre></li>
                           <li>
                              <p>将生成的文件和<code class="codeph">$ORACLE_HOME/jlib/orai18n-mappings.jar</code>到<code class="codeph">classpath</code>环境变量中，同时执行使用自定义字符集连接到数据库的JDBC代码。
                              </p>
                           </li>
                        </ol>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC28646"></a><div class="props_rev_3"><a id="GUID-C29926B3-8B5B-4B05-9193-29B247B52C66" name="GUID-C29926B3-8B5B-4B05-9193-29B247B52C66"></a><h3 id="JJDBC-GUID-C29926B3-8B5B-4B05-9193-29B247B52C66" class="sect3"><span class="enumeration_section">19.2</span> NCHAR，NVARCHAR2，NCLOB和defaultNChar属性</h3>
               <div>
                  <div class="section">
                     <p>默认情况下，是<code class="codeph">oracle.jdbc.OraclePreparedStatement</code>接口以与在数据库字符集中编码的方式相同的方式处理所有列的数据类型。但是，从Oracle Database <span class="italic">10g开始</span> ，如果将<code class="codeph">oracle.jdbc.defaultNChar</code>系统属性的值设置为<code class="codeph">true</code> ，则JDBC会将所有字符列视为国家/地区语言。
                     </p>
                     <p><code class="codeph">defaultNChar</code>的默认值为false。如果<code class="codeph">defaultNChar</code>值为false，则必须调用<code class="codeph">setFormOfUse(&lt;column_Index&gt;, OraclePreparedStatement.FORM_NCHAR)</code>方法用于那些特别需要国家语言字符的列。例如：</p><pre class="oac_no_warn" dir="ltr">PreparedStatement pstmt = conn.prepareStatement（“插入TEST值（？，？，？）“）; pstmt.setFormOfUse（1，OraclePreparedStatement。FORM_NCHAR）; pstmt.setString（1，myUnicodeString1）; // NCHAR列pstmt.setFormOfUse（2，OraclePreparedeStatement。FORM_NCHAR）; pstmt.setString（2，myUnicodeString2）; // NVARCHAR2列</pre><p>如果要将<code class="codeph">defaultNChar</code>的值设置为<code class="codeph">true</code> ，请在命令行中指定以下内容：</p><pre class="oac_no_warn" dir="ltr">java -Doracle.jdbc.defaultNChar = true <span class="italic">myApplication</span>
</pre><p>如果您愿意，则还可以将<code class="codeph">defaultNChar</code>指定为连接属性并访问<code class="codeph">NCHAR</code> ， <code class="codeph">NVARCHAR2</code>或<code class="codeph">NCLOB</code>数据。
                     </p><pre class="oac_no_warn" dir="ltr">属性props = new Properties（）; props.put（的OracleConnection。CONNECTION_PROPERTY_DEFAULTNCHAR，“true”）; //设置URL，用户名，密码等。...Connection conn = DriverManager.getConnection（props）;</pre><p>如果<code class="codeph">defaultNChar</code>值为<code class="codeph">true</code> ，那么您应该为不需要国家语言字符的列调用<code class="codeph">setFormOfUse(&lt;column_Index&gt;, FORM_CHAR)</code> 。例如：</p><pre class="oac_no_warn" dir="ltr">PreparedStatement pstmt = conn.prepareStatement（“插入TEST值（？，？，？）“）; pstmt.setFormOfUse（3，OraclePreparedStatement。FORM_CHAR）; pstmt.setString（3，myString）; // CHAR列</pre><div class="infoboxnote" id="GUID-C29926B3-8B5B-4B05-9193-29B247B52C66__GUID-13440068-8525-4ABF-825A-DD40F21189D2">
                        <p class="notep1">注意：</p>
                        <p>如果将<code class="codeph">defaultNChar</code>的值设置为<code class="codeph">true</code> ，然后访问<code class="codeph">CHAR</code>列，则数据库将隐式将所有<code class="codeph">CHAR</code>数据转换为<code class="codeph">NCHAR</code> 。此转换对性能产生重大影响。
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-C29926B3-8B5B-4B05-9193-29B247B52C66__GUID-8D48BE92-9C17-4729-A5C4-EADC6AEB6796">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>始终使用<code class="codeph">java.lang.字符数据的String</code>而不是<code class="codeph">oracle.sql.CHAR</code> 。提供<code class="codeph">CHAR</code>仅用于向后兼容。
                              </p>
                           </li>
                           <li>
                              <p>您还可以使用<code class="codeph">setObject</code>方法访问国家字符集类型，但如果使用<code class="codeph">setObject</code>方法，则必须将目标数据类型指定为<code class="codeph">Types.NCHAR</code> ， <code class="codeph">Types.NCLOB</code> ， <code class="codeph">Types.NVARCHAR</code>或<code class="codeph">Types.LONGNVARCHAR</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnote" id="GUID-C29926B3-8B5B-4B05-9193-29B247B52C66__GUID-89C366EE-78A9-4B84-95C8-A24B88AADC86">
                        <p class="notep1">注意：</p>
                        <p>在Oracle数据库中，SQL字符串将转换为数据库字符集。因此，您需要牢记以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在Oracle Database <span class="italic">10g第</span> 1版（10.1）及更早版本中，JDBC驱动程序不支持包含在数据库字符集中无法表示的Unicode字符的任何<code class="codeph">NCHAR</code>文字（n'...'）。在数据库字符集中无法表示的所有Unicode字符都会损坏。
                              </p>
                           </li>
                           <li>
                              <p>如果Oracle数据库<span class="italic">10g第</span> 2版（10.2）JDBC驱动程序连接到Oracle数据库<span class="italic">10g第</span> 2版（10.2）数据库服务器，则所有<code class="codeph">NCHAR</code>文字（n'...'）都将转换为Unicode文字（u'。 ..'）和所有非ASCII字符都转换为相应的Unicode转义序列。这是自动完成的，以防止数据损坏。
                              </p>
                           </li>
                           <li>
                              <p>如果Oracle数据库<span class="italic">10g</span>发行版2（10.2）JDBC驱动程序连接到Oracle数据库<span class="italic">10g</span>发行版1（10.1）或更早版本的数据库服务器，则不会转换<code class="codeph">NCHAR</code>文字（n'...'）并且不会转换任何字符在数据库中无法表示的字符集会被破坏。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC28647"></a><div class="props_rev_3"><a id="GUID-DB3BCB15-C62F-47B1-B527-5F2DF28E5CFB" name="GUID-DB3BCB15-C62F-47B1-B527-5F2DF28E5CFB"></a><h3 id="JJDBC-GUID-DB3BCB15-C62F-47B1-B527-5F2DF28E5CFB" class="sect3"><span class="enumeration_section">19.3</span> JDK 6中国家字符集类型数据的新方法</h3>
               <div>
                  <div class="section">
                     <p>JDBC 4.0引入了对以下四种其他SQL类型的支持，以访问国家字符集类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">NCHAR</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">NVARCHAR</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">LONGNVARCHAR</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">NCLOB</code></p>
                        </li>
                     </ul>
                     <p>这些类型与<code class="codeph">CHAR</code> ， <code class="codeph">VARCHAR</code> ， <code class="codeph">LONGVARCHAR</code>和<code class="codeph">CLOB</code>类型类似，不同之处在于使用国家字符集对值进行编码。JDBC规范使用<code class="codeph">String</code>类表示<code class="codeph">NCHAR</code> ， <code class="codeph">NVARCHAR</code>和<code class="codeph">LONGNVARCHAR</code>数据，使用<code class="codeph">NClob</code>类表示<code class="codeph">NCLOB</code>值。
                     </p>
                     <p>要检索国家字符值，应用程序将调用以下方法之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">getNString</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getNClob</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getNCharacterStream</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">的getObject</code></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-DB3BCB15-C62F-47B1-B527-5F2DF28E5CFB__GUID-38C61180-CEA8-4B09-8D2F-3A84C19F96F8">
                        <p class="notep1">注意：</p>
                        <p>由于<code class="codeph">NClob</code>实现了<code class="codeph">Clob</code>因此<code class="codeph">getClob</code>方法可用于返回<code class="codeph">NClob</code>对象。
                        </p>
                     </div>
                     <p>要为国家字符类型的参数标记指定值，应用程序将调用以下方法之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">setNString</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">setNCharacterStream</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">setNClob</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">方法setObject</code></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-DB3BCB15-C62F-47B1-B527-5F2DF28E5CFB__GUID-66CDA380-7034-4A28-A5FF-CBB1EC3AE13B">
                        <p class="notep1">注意：</p>
                        <p>您可以使用<code class="codeph">setFormOfUse</code>方法在JDK 6中指定国家字符值。但不鼓励这种做法，因为此方法将在以后的版本中弃用。因此，Oracle建议您使用本节中讨论的方法。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-DB3BCB15-C62F-47B1-B527-5F2DF28E5CFB__GUID-CEB4C811-641D-4D97-8EEF-B96F31333FA8">
                        <p class="notep1">也可以看看：</p>
                        <p>如果使用<code class="codeph">setObject</code>方法，则必须将目标数据类型指定为<code class="codeph">Types.NCHAR</code> ， <code class="codeph">Types.NCLOB</code> ， <code class="codeph">Types.NVARCHAR</code>或<code class="codeph">Types.LONGNVARCHAR</code> 。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
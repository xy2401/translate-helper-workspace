<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_PIPE package lets two or more sessions in the same instance communicate. Oracle pipes are similar in concept to the pipes used in UNIX, but Oracle pipes are not implemented using the operating system pipe mechanisms."></meta>
      <meta name="description" content="The DBMS_PIPE package lets two or more sessions in the same instance communicate. Oracle pipes are similar in concept to the pipes used in UNIX, but Oracle pipes are not implemented using the operating system pipe mechanisms."></meta>
      <title>DBMS_PIPE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_PIPE package lets two or more sessions in the same instance communicate. Oracle pipes are similar in concept to the pipes used in UNIX, but Oracle pipes are not implemented using the operating system pipe mechanisms."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_PERF.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_PLSQL_CODE_COVERAGE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_PERF.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_PLSQL_CODE_COVERAGE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_PIPE</li>
            </ol>
            <a id="GUID-84B9B55F-9D82-45D0-B9CA-9A6AEEF9C8F8" name="GUID-84B9B55F-9D82-45D0-B9CA-9A6AEEF9C8F8"></a><a id="ARPLS038"></a><a id="ARPLS038"></a>
            
            <h2 id="ARPLS-GUID-84B9B55F-9D82-45D0-B9CA-9A6AEEF9C8F8" class="sect2"><span class="enumeration_chapter">121</span> DBMS_PIPE</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_PIPE</code>包允许同一实例中的两个或多个会话进行通信。Oracle管道在概念上与UNIX中使用的管道类似，但Oracle管道未使用操作系统管道机制实现。
               </p>
               <p>本章包含以下主题：<a id="d665057e89" class="indexterm-anchor"></a></p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-B2DC7563-BE37-4A7F-8B3A-5C85B80E42D4" title="管道功能有几个潜在的应用程序：外部服务接口，独立事务，报警器（非事务性），调试和集中器。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-E579BAF5-4425-44C1-916C-089612F2194A" title="通过在DBMS_PIPE包中使用GRANT EXECUTE，可以通过使用CREATE_PIPE函数中的private参数创建管道，以及编写仅向特定用户或角色公开特定功能或pipenames的封装包来实现安全性。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-87932932-F155-44F9-B95D-8A23147CD89B" title="这是等待尝试发送或接收消息的最长时间。">常量</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A" title="通过Oracle管道发送的信息将缓冲在系统全局区域（SGA）中。关闭实例时，管道中的所有信息都将丢失。">操作说明</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-2366E6E9-9723-4E34-A0BD-45175AED593D" title="DBMS_PIPE包子程序可以返回下表中列出的错误。">例外</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F" title="这些示例显示了在调试PL / SQL，调试Pro * C，执行系统命令和外部服务接口时使用DBMS_PIPE。">例子</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-36A6D2CB-97DD-4161-95F0-57ECC1367998" title="该表列出了DBMS_PIPE子程序并简要描述了它们。">DBMS_PIPE子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS67393"></a><a id="ARPLS67393"></a><div class="props_rev_3"><a id="GUID-B2DC7563-BE37-4A7F-8B3A-5C85B80E42D4" name="GUID-B2DC7563-BE37-4A7F-8B3A-5C85B80E42D4"></a><h3 id="ARPLS-GUID-B2DC7563-BE37-4A7F-8B3A-5C85B80E42D4" class="sect3"><span class="enumeration_section">121.1</span> DBMS_PIPE概述</h3>
               <div>
                  <p>管道功能有几个潜在的应用程序：外部服务接口，独立事务，报警器（非事务性），调试和集中器。</p>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>外部服务接口：您可以与RDBMS外部的用户编写的服务进行通信。这可以在共享服务器进程中有效地完成，以便同时执行多个服务实例。此外，这些服务是异步可用的。该服务的请求者不需要阻止等待回复。请求者可以在以后检查（有或没有超时）。该服务可以使用Oracle支持的任何3GL语言编写。</p>
                        </li>
                        <li>
                           <p>独立事务：管道可以与单独的会话通信，该会话可以在独立事务中执行操作（例如记录触发器检测到的尝试安全违规）。</p>
                        </li>
                        <li>
                           <p>警报器（非事务性）：您可以发布另一个进程，而无需等待进程轮询。如果“after-row”或“after-statement”触发器提醒应用程序，则应用程序会将此警报视为数据可能已更改的指示。然后，应用程序将读取数据以获取当前值。因为这是一个“后”触发器，应用程序将要执行“ <code class="codeph">SELECT</code> <code class="codeph">FOR</code> <code class="codeph">UPDATE</code> ”以确保它读取正确的数据。
                           </p>
                        </li>
                        <li>
                           <p>调试：触发器和存储过程可以将调试信息发送到管道。另一个会话可以继续读取管道并将其显示在屏幕上或将其写入文件。</p>
                        </li>
                        <li>
                           <p>集中器：这对于通过较少数量的网络连接复用大量用户非常有用，或者通过将多个用户事务集中到一个DBMS事务中来提高性能。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67394"></a><a id="ARPLS67394"></a><div class="props_rev_3"><a id="GUID-E579BAF5-4425-44C1-916C-089612F2194A" name="GUID-E579BAF5-4425-44C1-916C-089612F2194A"></a><h3 id="ARPLS-GUID-E579BAF5-4425-44C1-916C-089612F2194A" class="sect3"><span class="enumeration_section">121.2</span> DBMS_PIPE安全模型</h3>
               <div>
                  <p>通过在<code class="codeph">DBMS_PIPE</code>包中使用<code class="codeph">GRANT</code> <code class="codeph">EXECUTE</code> ，可以通过使用<code class="codeph">CREATE_PIPE</code>函数中的<code class="codeph">private</code>参数创建管道，以及编写仅向特定用户或角色公开特定功能或pipenames的封装包来实现安全性。
                  </p>
                  <div class="section">
                     <p>根据您的安全要求，您可以选择使用<a href="DBMS_PIPE.html#GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A" title="通过Oracle管道发送的信息将缓冲在系统全局区域（SGA）中。关闭实例时，管道中的所有信息都将丢失。">DBMS_PIPE操作说明</a>中描述的公共管道或专用管道。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67395"></a><a id="ARPLS67395"></a><div class="props_rev_3"><a id="GUID-87932932-F155-44F9-B95D-8A23147CD89B" name="GUID-87932932-F155-44F9-B95D-8A23147CD89B"></a><h3 id="ARPLS-GUID-87932932-F155-44F9-B95D-8A23147CD89B" class="sect3"><span class="enumeration_section">121.3</span> DBMS_PIPE常量</h3>
               <div>
                  <p>这是等待尝试发送或接收消息的最长时间。</p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">maxwait constant integer：= 86400000; / * 1000天* /</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67396"></a><a id="ARPLS67396"></a><div class="props_rev_3"><a id="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A" name="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A"></a><h3 id="ARPLS-GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A" class="sect3"><span class="enumeration_section">121.4</span> DBMS_PIPE操作说明</h3>
               <div>
                  <p>通过Oracle管道发送的信息将缓冲在系统全局区域（SGA）中。关闭实例时，管道中的所有信息都将丢失。</p>
                  <div class="section">
                     <div class="infoboxnotewarn" id="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A__GUID-D21D5CC7-B59E-41EB-8B14-600121B8B16A">
                        <p class="notep1">警告：</p>
                        <p>管道独立于交易。当事务控制受到影响时，请小心使用管道。</p>
                     </div>
                     <p>关于以下主题，将考虑<code class="codeph">DBMS_PIPE</code>的操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>公共管道</p> 
                        </li>
                        <li>
                           <p>写作和阅读管道</p>
                        </li>
                        <li>
                           <p>私人管道</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A__GUID-17E97F60-6578-4D64-B956-7AC37A892EBC">公共管道</p>
                     <p>您可以隐式或显式创建公共管道。对于<span class="italic">隐式</span>公共管道，管道在第一次引用时会自动创建，并在不再包含数据时消失。由于管道描述符存储在SGA中，因此在空管道从缓存中老化之前会有一些空间使用开销。
                     </p>
                     <p>通过调用<code class="codeph">CREATE_PIPE</code>函数并将<code class="codeph">private</code>标志设置为<code class="codeph">FALSE</code>来创建<span class="italic">显式</span>公共管道。您必须通过调用<code class="codeph">REMOVE_PIPE</code>函数来释放显式创建的管道。
                     </p>
                     <p>公共管道的域是显式或隐式创建它的模式。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A__GUID-FB1CD63E-3E2E-4B2A-AA9E-3858AB2C4D09">阅读和写作管道</p>
                     <p>每个公共管道都是异步工作的。任何数量的模式用户都可以写入公共管道，只要他们对<code class="codeph">DBMS_PIPE</code>包具有<code class="codeph">EXECUTE</code>权限，并且他们知道公共管道的名称。但是，一旦一个用户读取了缓冲信息，它就会从缓冲区中清空，并且不能用于同一管道的其他读取器。
                     </p>
                     <p>发送会话使用对<code class="codeph">PACK_MESSAGE</code>过程的一个或多个调用来构建消息。此过程将消息添加到会话的本地消息缓冲区。通过调用<code class="codeph">SEND_MESSAGE</code>函数发送此缓冲区中的信息，指定用于发送消息的管道名称。调用<code class="codeph">SEND_MESSAGE</code> ，将发送已堆叠在本地缓冲区中的所有消息。
                     </p>
                     <p>想要接收消息的进程调用<code class="codeph">RECEIVE_MESSAGE</code>函数，指定从中接收消息的管道名称。然后，该进程调用<code class="codeph">UNPACK_MESSAGE</code>过程来访问消息中的每个项目。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A__GUID-E4132666-DD5B-4739-86BA-F4F84D237185">私人管道</p>
                     <p>您通过调用<code class="codeph">CREATE_PIPE</code>函数显式创建私有管道。创建后，专用管道将保留在共享内存中，直到您通过调用<code class="codeph">REMOVE_PIPE</code>函数显式释放它<code class="codeph">REMOVE_PIPE</code> 。关闭数据库实例时，也会释放专用管道。
                     </p>
                     <p>如果内存中存在隐式管道且与您尝试创建的专用管道同名，则无法创建专用管道。在这种情况下， <code class="codeph">CREATE_PIPE</code>返回错误。
                     </p>
                     <p>访问私人管道仅限于：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在与管道创建者相同的用户标识下运行的会话</p>
                        </li>
                        <li>
                           <p>存储的子程序在与管道创建者相同的用户标识权限域中执行</p>
                        </li>
                        <li>
                           <p>用户连接为<code class="codeph">SYSDBA</code></p>
                        </li>
                     </ul>
                     <p>任何其他用户尝试在管道上发送或接收消息或删除管道都会导致立即出错。其他用户尝试创建具有相同名称的管道也会导致错误。</p>
                     <p>与公共管道一样，您必须先使用<code class="codeph">PACK_MESSAGE</code>调用构建消息， <code class="codeph">PACK_MESSAGE</code>再调用<code class="codeph">SEND_MESSAGE</code> 。同样，在通过调用<code class="codeph">UNPACK_MESSAGE</code>访问消息中的项之前，必须调用<code class="codeph">RECEIVE_MESSAGE</code>来检索消息。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67400"></a><a id="ARPLS67401"></a><a id="ARPLS67401"></a><a id="ARPLS67400"></a><div class="props_rev_3"><a id="GUID-2366E6E9-9723-4E34-A0BD-45175AED593D" name="GUID-2366E6E9-9723-4E34-A0BD-45175AED593D"></a><h3 id="ARPLS-GUID-2366E6E9-9723-4E34-A0BD-45175AED593D" class="sect3"><span class="enumeration_section">121.5</span> DBMS_PIPE异常</h3>
               <div>
                  <p><code class="codeph">DBMS_PIPE</code>程序可以返回下表中列出的错误。
                  </p>
                  <div class="tblformal" id="GUID-2366E6E9-9723-4E34-A0BD-45175AED593D__GUID-12F20428-10E3-4C25-BB98-9550FD99F02C">
                     <p class="titleintable">表121-1 DBMS_PIPE错误</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_PIPE错误" width="100%" border="1" summary="This table describes the Exceptions raised by the DBMS_PIPE subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="26%" id="d665057e791">错误</th>
                              <th align="left" valign="bottom" width="74%" id="d665057e794">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d665057e799" headers="d665057e791 ">
                                 <p><code class="codeph">ORA-23321：</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d665057e799 d665057e794 ">
                                 <p>Pipename可能不会为空。这可以由<code class="codeph">CREATE_PIPE</code>函数或任何以管道名称作为参数的子程序返回。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d665057e810" headers="d665057e791 ">
                                 <p><code class="codeph">ORA-23322：</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d665057e810 d665057e794 ">
                                 <p>访问管道的权限不足。这可以由引用其参数列表中的专用管道的任何子程序返回。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS67402"></a><a id="ARPLS67402"></a><div class="props_rev_3"><a id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F" name="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F"></a><h3 id="ARPLS-GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F" class="sect3"><span class="enumeration_section">121.6</span> DBMS_PIPE示例</h3>
               <div>
                  <p>这些示例显示了在调试PL / SQL，调试Pro * C，执行系统命令和外部服务接口时使用DBMS_PIPE。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-CBF262FF-ED6D-47D8-BC28-AD838AE18BA9">示例1：调试 -  PL / SQL</p>
                     <p>此示例显示PL / SQL程序可以调用以在管道中放置调试信息的过程。</p><pre class="oac_no_warn" dir="ltr">创建或替换过程debug（msg VARCHAR2）AS状态号; BEGIN DBMS_PIPE.PACK_MESSAGE（LENGTH（msg））; DBMS_PIPE.PACK_MESSAGE（MSG）; status：= DBMS_PIPE.SEND_MESSAGE（'plsql_debug'）; IF状态！= 0 THEN raise_application_error（-20099，'Debug error'）;万一; END调试;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-95A2C2E4-DD79-4F8A-8032-D6D3A8E7045C">示例2：调试 -  Pro * C.</p>
                     <p>以下Pro * C代码从前一个示例中的<code class="codeph">PLSQL_DEBUG</code>管道接收消息，并显示消息。如果Pro * C会话在单独的窗口中运行，则它可用于显示从在单独会话中执行的PL / SQL程序发送到调试过程的任何消息。
                     </p><pre class="oac_no_warn" dir="ltr">#include &lt;stdio.h&gt; #include &lt;string.h&gt; EXEC SQL BEGIN DECLARE SECTION; VARCHAR用户名[20]; int状态; int msg_length; char retval [2000]; EXEC SQL END DECLARE SECTION; EXEC SQL包含SQLCA; void sql_error（）; main（）{ - 准备用户名：strcpy（username.arr，“SCOTT / TIGER”）; username.len = strlen（username.arr）;执行SQL WHENEVER SQLERROR DO sql_error（）; EXEC SQL CONNECT：username;的printf（ “连接\ n”）; - 启动无限循环以在管道上查找和打印消息：FOR（;;）{EXEC SQL EXECUTE DECLARE len INTEGER;典型的INTEGER; sta INTEGER; chr VARCHAR2（2000）; BEGIN chr：=''; sta：= dbms_pipe.receive_message（'plsql_debug'）; IF sta = 0那么DBMS_PIPE.UNPACK_MESSAGE（len）; DBMS_PIPE.UNPACK_MESSAGE（CHR）;万一; ：status：= sta; ：retval：= chr;如果len不是NULL那么：msg_length：= len; ELSE：msg_length：= 2000;万一;结束; END-EXEC; IF（status == 0）printf（“\ n％。* s \ n”，msg_length，retval）; ELSE printf（“异常状态，值为％d \ n”，状态）; void sql_error（）{char msg [1024]; int rlen，len; len = sizeof（msg）; sqlglm（msg，＆len，＆rlen）; printf（“ORACLE ERROR \ n”）; printf（“％。* s \ n”，rlen，msg）;出口（1）; }</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-EA970F6B-9198-4290-A129-49C2F34D8328">示例3：执行系统命令</p>
                     <p>此示例显示PL / SQL和Pro * C代码让PL / SQL存储过程（或匿名块）调用PL / SQL过程通过管道将命令发送到正在侦听它们的Pro * C程序。</p>
                     <p>Pro * C程序休眠并等待消息到达命名管道。当消息到达时，Pro * C程序对其执行处理，执行所需的操作，例如通过<span class="italic">system</span> （）调用执行UNIX命令或使用嵌入式SQL执行SQL命令。</p>
                     <p><code class="codeph">DAEMON.SQL</code>是PL / SQL包的源代码。此程序包包含使用<code class="codeph">DBMS_PIPE</code>程序包向Pro * C守护程序发送消息和从Pro * C守护程序接收消息的过程。请注意，使用完全握手。守护程序始终将消息发送回包（除了<code class="codeph">STOP</code>命令的情况除外）。这很有价值，因为它允许PL / SQL过程确保Pro * C守护程序正在运行。
                     </p>
                     <p>您可以使用SQL * Plus或Enterprise Manager从匿名PL / SQL块调用DAEMON打包过程。例如：</p><pre class="oac_no_warn" dir="ltr">SQLPLUS&gt;变量rv号SQLPLUS&gt;执行：rv：= DAEMON.EXECUTE_SYSTEM（'ls -la'）;</pre><p>在UNIX系统上，这会导致Pro * C守护程序执行命令<span class="italic">系统</span> （“ <span class="italic">ls -la</span> ”）。
                     </p>
                     <p>请记住守护进程需要先运行。您可能希望在后台运行它，或者在您调用它的SQL * Plus或Enterprise Manager会话旁边的另一个窗口中运行它。</p>
                     <p><code class="codeph">DAEMON</code> 。 <code class="codeph">SQL</code>还使用<code class="codeph">DBMS_OUTPUT</code>包来显示结果。要使此示例起作用，您必须对此程序包具有执行权限。
                     </p>
                     <p>DAEMON.SQL示例。这是PL / SQL <code class="codeph">DAEMON</code>包的代码：</p><pre class="oac_no_warn" dir="ltr">创建或替换PACKAGE守护程序AS功能execute_sql（命令VARCHAR2，超时NUMBER DEFAULT 10）返回号码;功能execute_system（命令VARCHAR2，超时NUMBER DEFAULT 10）返回号码;程序停止（超时NUMBER DEFAULT 10）; END守护进程; / CREATE OR REPLACE PACKAGE BODY守护程序AS FUNCTION execute_system（命令VARCHAR2，超时NUMBER DEFAULT 10）返回NUMBER状态号;结果VARCHAR2（20）; command_code NUMBER; pipe_name VARCHAR2（30）; BEGIN pipe_name：= DBMS_PIPE.UNIQUE_SESSION_NAME; DBMS_PIPE.PACK_MESSAGE（ 'SYSTEM'）; DBMS_PIPE.PACK_MESSAGE（pipe_name）; DBMS_PIPE.PACK_MESSAGE（命令）; status：= DBMS_PIPE.SEND_MESSAGE（'守护进程'，超时）; IF状态&lt;&gt; 0 THEN RAISE_APPLICATION_ERROR（-20010，'Execute_system：发送时出错。状态='||状态）;万一; status：= DBMS_PIPE.RECEIVE_MESSAGE（pipe_name，timeout）; IF状态&lt;&gt; 0 THEN RAISE_APPLICATION_ERROR（-20011，'Execute_system：接收时出错。状态='||状态）;万一; DBMS_PIPE.UNPACK_MESSAGE（结果）;如果结果&lt;&gt;'完成'那么RAISE_APPLICATION_ERROR（-20012，'Execute_system：Done not received。“）;万一; DBMS_PIPE.UNPACK_MESSAGE（Command_code中）; DBMS_OUTPUT.PUT_LINE（'系统命令已执行。结果='|| command_code）; RETURN command_code; END execute_system;功能execute_sql（命令VARCHAR2，超时NUMBER DEFAULT 10）返回号码是状态号码;结果VARCHAR2（20）; command_code NUMBER; pipe_name VARCHAR2（30）; BEGIN pipe_name：= DBMS_PIPE.UNIQUE_SESSION_NAME; DBMS_PIPE.PACK_MESSAGE（ 'SQL'）; DBMS_PIPE.PACK_MESSAGE（pipe_name）; DBMS_PIPE.PACK_MESSAGE（命令）; status：= DBMS_PIPE.SEND_MESSAGE（'守护进程'，超时）; IF状态&lt;&gt; 0 THEN RAISE_APPLICATION_ERROR（-20020，'Execute_sql：发送时出错。状态='||状态）;万一; status：= DBMS_PIPE.RECEIVE_MESSAGE（pipe_name，timeout）; IF状态&lt;&gt; 0 THEN RAISE_APPLICATION_ERROR（-20021，'execute_sql：接收时出错。状态='||状态）;万一; DBMS_PIPE.UNPACK_MESSAGE（结果）;如果结果&lt;&gt;'完成'那么RAISE_APPLICATION_ERROR（-20022，'execute_sql：没有收到。“）;万一; DBMS_PIPE.UNPACK_MESSAGE（Command_code中）; DBMS_OUTPUT.PUT_LINE（'执行SQL命令.sqlcode ='|| command_code）; RETURN command_code; END execute_sql;程序停止（超时NUMBER DEFAULT 10）IS状态号码; BEGIN DBMS_PIPE.PACK_MESSAGE（'STOP'）; status：= DBMS_PIPE.SEND_MESSAGE（'守护进程'，超时）; IF状态&lt;&gt; 0 THEN RAISE_APPLICATION_ERROR（-20030，'stop：发送时出错.status ='|| status）;万一;结束停止; END守护进程;</pre><p>daemon.pc示例。这是Pro * C守护程序的代码。您必须使用Pro * C预编译器1.5.x版或更高版本对其进行预编译。您还必须指定<code class="codeph">USERID</code>和<code class="codeph">SQLCHECK</code>选项，因为该示例包含嵌入式PL / SQL代码。
                     </p>
                     <div class="infoboxnote" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-1A5A6EF3-A480-46AA-88D0-FE5681523106">
                        <p class="notep1">注意：</p>
                        <p>要在PL / SQL块中使用<code class="codeph">VARCHAR</code>输出主机变量，必须在进入块之前初始化长度组件。
                        </p>
                     </div><pre class="oac_no_warn" dir="ltr">proc iname = daemon userid = scott / tiger sqlcheck = semantics</pre><p>然后以正常方式进行C编译和链接。</p><pre class="oac_no_warn" dir="ltr">#include &lt;stdio.h&gt; #include &lt;string.h&gt; EXEC SQL包含SQLCA; EXEC SQL BEGIN DECLARE SECTION; char * uid =“scott / tiger”; int状态; VARCHAR命令[20]; VARCHAR值[2000]; VARCHAR return_name [30]; EXEC SQL END DECLARE SECTION; void connect_error（）{char msg_buffer [512]; int msg_length; int buffer_size = 512; EXEC SQL WHENEVER SQLERROR CONTINUE; sqlglm（msg_buffer，＆buffer_size，＆msg_length）; printf（“连接时守护进程错误：\ n”）; printf（“％。* s \ n”，msg_length，msg_buffer）; printf（“Daemon quitting。\ n”）;出口（1）; } void sql_error（）{char msg_buffer [512]; int msg_length; int buffer_size = 512; EXEC SQL WHENEVER SQLERROR CONTINUE; sqlglm（msg_buffer，＆buffer_size，＆msg_length）; printf（“执行时守护程序错误：\ n”）; printf（“％。* s \ n”，msg_length，msg_buffer）; printf（“守护进程继续。\ n”）; } main（）{command.len = 20; / *初始化长度分量* / value.len = 2000; return_name.len = 30;执行SQL WHENEVER SQLERROR DO connect_error（）; EXEC SQL CONNECT：uid; printf（“Daemon connected。\ n”）;执行SQL WHENEVER SQLERROR DO sql_error（）; printf（“守护进程等待...... \ n”）; while（1）{EXEC SQL EXECUTE BEGIN：status：= DBMS_PIPE.RECEIVE_MESSAGE（'daemon'）; IF：status = 0那么DBMS_PIPE.UNPACK_MESSAGE（：command）;万一;结束; END-EXEC; IF（status == 0）{command.arr [command.len] ='\ 0';如果（！strcmp（（char *）command.arr，“STOP”））{printf（“Daemon exiting。\ n”）;打破;如果（如果）（！strcmp（（char *）command.arr，“SYSTEM”））{EXEC SQL EXECUTE BEGIN DBMS_PIPE.UNPACK_MESSAGE（：return_name）; DBMS_PIPE.UNPACK_MESSAGE（：值）;结束; END-EXEC; value.arr [value.len] ='\ 0'; printf（“将执行系统命令'％s'\ n”，value.arr）; status = system（value.arr）; EXEC SQL EXECUTE BEGIN DBMS_PIPE.PACK_MESSAGE（'done'）; DBMS_PIPE.PACK_MESSAGE（：状态）; ：status：= DBMS_PIPE.SEND_MESSAGE（：return_name）;结束; END-EXEC; IF（status）{printf（“响应系统命令时出现守护进程错误。”）; printf（“status：％d \ n”，status）; ELSE IF（！strcmp（（char *）command.arr，“SQL”））{EXEC SQL EXECUTE BEGIN DBMS_PIPE.UNPACK_MESSAGE（：return_name）; DBMS_PIPE.UNPACK_MESSAGE（：值）;结束; END-EXEC; value.arr [value.len] ='\ 0'; printf（“将执行sql命令'％s'\ n”，value.arr）; EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL EXECUTE IMMEDIATE：value; status = sqlca.sqlcode;执行SQL WHENEVER SQLERROR DO sql_error（）; EXEC SQL EXECUTE BEGIN DBMS_PIPE.PACK_MESSAGE（'done'）; DBMS_PIPE.PACK_MESSAGE（：状态）; ：status：= DBMS_PIPE.SEND_MESSAGE（：return_name）;结束; END-EXEC; IF（status）{printf（“响应sql命令时出现守护进程错误。”）; printf（“status：％d \ n”，status）; ELSE {printf（“守护程序错误：收到无效命令'％s'。\ n”，command.arr）; ELSE {printf（“等待信号时出现守护进程错误。”）; printf（“status =％d \ n”，status）; EXEC SQL COMMIT WORK RELEASE;出口（0）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-32025D1A-BFE4-4695-B18F-7BAE81B70690">示例4：外部服务接口</p>
                     <p>将用户编写的3GL代码放入OCI或预编译程序。程序连接到数据库并执行PL / SQL代码以从管道读取其请求，计算结果，然后执行PL / SQL代码以将管道上的结果发送回请求者。</p>
                     <p>以下是股票服务请求的示例。为所有服务请求传递管道的参数的建议顺序是：</p><pre class="oac_no_warn" dir="ltr">protocol_version VARCHAR2  - '1'，10字节或更少returnpipe VARCHAR2  -  30字节或更少服务VARCHAR2  -  30字节或更少arg1 VARCHAR2 / NUMBER / DATE ...argn VARCHAR2 / NUMBER / DATE</pre><p>返回结果的推荐格式为：</p><pre class="oac_no_warn" dir="ltr">成功VARCHAR2  - 'SUCCESS'如果可以，否则错误消息arg1 VARCHAR2 / NUMBER / DATE ...argn VARCHAR2 / NUMBER / DATE</pre><p>“股票价格请求服务器”可以使用OCI或PRO *（伪代码）：</p><pre class="oac_no_warn" dir="ltr">&lt;loop forever&gt; BEGIN dbms_stock_server.get_request（：stocksymbol）;结束; &lt;根据stocksymbol计算出价格（可能来自某些无线电信号），如果找不到这样的股票则设置错误&gt; BEGIN dbms_stock_server.return_price（：error，：price）;结束;</pre><p>客户会这样做：</p><pre class="oac_no_warn" dir="ltr">开始：价格：= stock_request（'YOURCOMPANY'）;结束;</pre><p>由前面的“股票价格请求服务器”调用的存储过程<code class="codeph">dbms_stock_server</code>是：</p><pre class="oac_no_warn" dir="ltr">创建或替换包dbms_stock_server IS PROCEDURE get_request（符号OUT VARCHAR2）; PROCEDURE return_price（errormsg IN VARCHAR2，price IN VARCHAR2）;结束;创建或替换包装体dbms_stock_server IS returnpipe VARCHAR2（30）;程序返回错误（原因VARCHAR2）是整数; BEGIN dbms_pipe.pack_message（原因）; s：= dbms_pipe.send_message（returnpipe）; IF s &lt;&gt; 0 THEN raise_application_error（-20000，'错误：'|| to_char（s）||'发送管道'）;万一;结束; PROCEDURE get_request（符号OUT VARCHAR2）IS protocol_version VARCHAR2（10）; s INTEGER; service VARCHAR2（30）; BEGIN s：= dbms_pipe.receive_message（'stock_service'）; IF s &lt;&gt; 0 THEN raise_application_error（-20000，'错误：'|| to_char（s）||'读取管道'）;万一; dbms_pipe.unpack_message（PROTOCOL_VERSION）; IF protocol_version &lt;&gt;'1'THEN raise_application_error（-20000，'Bad protocol：'|| protocol_version）;万一; dbms_pipe.unpack_message（returnpipe）; dbms_pipe.unpack_message（服务）; IF服务！='getprice'然后返回错误（'服务'||服务||'不支持'）;万一; dbms_pipe.unpack_message（符号）;结束; PROCEDURE return_price（VARCHAR2中的errormsg，VARCHAR2中的价格）IS s INTEGER; BEGIN IF errormsg为NULL然后dbms_pipe.pack_message（'SUCCESS'）; dbms_pipe.pack_message（价）; ELSE dbms_pipe.pack_message（errormsg）;万一; s：= dbms_pipe.send_message（returnpipe）; IF s &lt;&gt; 0 THEN raise_application_error（-20000，'错误：'|| to_char（s）||'发送管道'）;万一;结束;结束;</pre><p>客户调用的过程是：</p><pre class="oac_no_warn" dir="ltr">创建或替换函数stock_request（符号VARCHAR2）RETURN VARCHAR2是s INTEGER;价格VARCHAR2（20）; errormsg VARCHAR2（512）; BEGIN dbms_pipe.pack_message（'1'）; - 协议版本dbms_pipe.pack_message（dbms_pipe.unique_session_name）; -  return pipe dbms_pipe.pack_message（'getprice'）; dbms_pipe.pack_message（符号）; s：= dbms_pipe.send_message（'stock_service'）; IF s &lt;&gt; 0 THEN raise_application_error（-20000，'错误：'|| to_char（s）||'发送管道'）;万一; s：= dbms_pipe.receive_message（dbms_pipe.unique_session_name）; IF s &lt;&gt; 0 THEN raise_application_error（-20000，'错误：'|| to_char（s）||'在管道上接收'）;万一; dbms_pipe.unpack_message（ERRORMSG）;如果errormsg &lt;&gt;'成功'那么raise_application_error（-20000，errormsg）;万一; dbms_pipe.unpack_message（价）;返回价格;结束;</pre><p>你通常只会<code class="codeph">GRANT</code> <code class="codeph">EXECUTE</code>上<code class="codeph">DBMS_STOCK_SERVICE</code>的股票业务应用服务器，并且只会<code class="codeph">GRANT</code> <code class="codeph">EXECUTE</code>上<code class="codeph">stock_request</code>那些允许用户使用该服务。
                     </p>
                     <div class="infoboxnotealso" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-9562536E-D63F-489C-B754-D64514F3523F">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="DBMS_ALERT.html#GUID-30038E9F-A074-4778-891F-335827E6071A" title="DBMS_ALERT支持数据库事件（警报）的异步通知。通过适当使用此包和数据库触发器，应用程序可以在数据库中感兴趣的值发生更改时通知自身。">DBMS_ALERT</a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67407"></a><a id="ARPLS67408"></a><a id="ARPLS67408"></a><a id="ARPLS67407"></a><div class="props_rev_3"><a id="GUID-36A6D2CB-97DD-4161-95F0-57ECC1367998" name="GUID-36A6D2CB-97DD-4161-95F0-57ECC1367998"></a><h3 id="ARPLS-GUID-36A6D2CB-97DD-4161-95F0-57ECC1367998" class="sect3"><span class="enumeration_section">121.7</span> DBMS_PIPE子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_PIPE</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-36A6D2CB-97DD-4161-95F0-57ECC1367998__GUID-BFF49258-52E1-4083-867A-E024314B9596">
                     <p class="titleintable">表121-2 DBMS_PIPE包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_PIPE包子程序" width="100%" border="1" summary="This table lists the DBMS_PIPE subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d665057e1158">子程序</th>
                              <th align="left" valign="bottom" width="61%" id="d665057e1161">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1166" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16" title="此函数显式创建公共或专用管道。如果私有标志为TRUE，则管道创建者被指定为私有管道的所有者。">CREATE_PIPE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1166 d665057e1161 ">
                                 <p>创建管道（私人管道必需）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1184" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD" title="此函数确定本地消息缓冲区中下一项的数据类型。">NEXT_ITEM_TYPE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1184 d665057e1161 ">
                                 <p>返回缓冲区中下一项的数据类型</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1196" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-EE090FAB-169D-425E-8715-0B2167D28CC3" title="此过程在本地消息缓冲区中构建您的消息。">PACK_MESSAGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1196 d665057e1161 ">
                                 <p>在本地缓冲区中构建消息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1208" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68" title="此过程清空命名管道的内容。">PURGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1208 d665057e1161 ">
                                 <p>清除命名管道的内容</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1220" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625" title="此函数将消息复制到本地消息缓冲区中。">RECEIVE_MESSAGE功能</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1220 d665057e1161 ">
                                 <p>将命名管道中的消息复制到本地缓冲区</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1232" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE" title="此函数删除显式创建的管道。">REMOVE_PIPE功能</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1232 d665057e1161 ">
                                 <p>删除命名管道</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1244" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2" title="此过程将PACK_MESSAGE和UNPACK_MESSAGE定位指示符重置为0。">RESET_BUFFER程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1244 d665057e1161 ">
                                 <p>清除本地缓冲区的内容</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1262" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E" title="此函数在命名管道上发送消息。">SEND_MESSAGE功能</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1262 d665057e1161 ">
                                 <p>在命名管道上发送消息：如果命名管道不存在，则隐式创建公共管道</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1274" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-6C278A31-81EE-4276-A57D-9503E40F3E34" title="此函数接收在当前连接到数据库的所有会话中唯一的名称。">UNIQUE_SESSION_NAME功能</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1274 d665057e1161 ">
                                 <p>返回唯一的会话名称</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1286" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C" title="此过程从缓冲区中检索项目。">UNPACK_MESSAGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1286 d665057e1161 ">
                                 <p>访问缓冲区中的下一项</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS67409"></a><a id="ARPLS67410"></a><a id="ARPLS67411"></a><a id="ARPLS67412"></a><a id="ARPLS67410"></a><a id="ARPLS67411"></a><a id="ARPLS67412"></a><a id="ARPLS67409"></a><div class="props_rev_3"><a id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16" name="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16"></a><h4 id="ARPLS-GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16" class="sect4"><span class="enumeration_section">121.7.1</span> CREATE_PIPE函数</h4>
                  <div>
                     <p>此函数显式创建公共或专用管道。如果<code class="codeph">private</code>标志为<code class="codeph">TRUE</code> ，则管道创建者被指定为私有管道的所有者。
                     </p>
                     <div class="section">
                        <p>只能通过调用<code class="codeph">REMOVE_PIPE</code>或关闭实例来删除显式创建的管道。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-6B859253-4224-4C49-A6BF-435ECD04D73E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.CREATE_PIPE（pipename IN VARCHAR2，maxpipesize IN INTEGER DEFAULT 8192，private IN BOOLEAN DEFAULT TRUE）RETURN INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-99A30B40-0E56-41BB-8383-FC641B21105F">编译指示</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references（create_pipe，WNDS，RNDS）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-DFCA960A-F8A2-4E97-B2BA-4FDF8E8A67DA">参数</p>
                        <div class="tblformal" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-83AF3F90-7C6E-4B6A-9FC9-23B5423899E9">
                           <p class="titleintable">表121-3 CREATE_PIPE函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_PIPE函数参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_PIPE.CREATE_PIPE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e1428">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e1431">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1436" headers="d665057e1428 ">
                                       <p><code class="codeph">pipename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1436 d665057e1431 ">
                                       <p>您正在创建的管道的名称。</p>
                                       <p>当你打电话，你必须使用该名称<code class="codeph">SEND_MESSAGE</code>和<code class="codeph">RECEIVE_MESSAGE</code> 。该名称在整个实例中必须是唯一的。
                                       </p>
                                       <p>警告：不要使用以<code class="codeph">ORA$</code>开头的管道名称。这些保留供Oracle提供的过程使用。Pipename不应超过128个字节，并且不区分大小写。此时，名称不能包含Globalization Support字符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1457" headers="d665057e1428 ">
                                       <p><code class="codeph">maxpipesize</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1457 d665057e1431 ">
                                       <p>管道允许的最大大小（以字节为单位）。</p>
                                       <p>管道上所有消息的总大小不能超过此数量。如果超过此最大值，则会阻止该消息。默认的<code class="codeph">maxpipesize</code>是8192个字节。
                                       </p>
                                       <p>管道的<code class="codeph">maxpipesize</code>成为管道特征的一部分，并持续管道的使用寿命。<code class="codeph">SEND_MESSAGE</code>具有较大的值会导致<code class="codeph">maxpipesize</code>增加。值较小的呼叫者使用现有的较大值。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1481" headers="d665057e1428 ">
                                       <p><code class="codeph">私人的</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1481 d665057e1431 ">
                                       <p>使用默认值<code class="codeph">TRUE</code>创建专用管道。
                                       </p>
                                       <p>调用<code class="codeph">SEND_MESSAGE</code>时，可以隐式创建公共管道。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-39A6532F-31C2-4DB1-95AF-3C8D1C9B5A51">返回值</p>
                        <div class="tblformal" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-8F89F103-DE93-4ED8-B355-18F6C2325007">
                           <p class="titleintable">表121-4 CREATE_PIPE函数返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_PIPE函数返回值" width="100%" border="1" summary="This table describes values returned by the CREATE_PIPE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e1509">返回</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e1512">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1517" headers="d665057e1509 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1517 d665057e1512 ">
                                       <p>成功的。</p>
                                       <p>如果管道已存在且尝试创建它的用户有权使用它，则Oracle返回0，表示成功，并且管道中已有的任何数据仍然存在。</p>
                                       <p>如果以<code class="codeph">SYSDBA</code> / <code class="codeph">SYSOPER</code>连接的用户重新创建管道，则Oracle返回状态0，但管道的所有权保持不变。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1535" headers="d665057e1509 ">
                                       <p><code class="codeph">ORA-23322</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1535 d665057e1512 ">
                                       <p>由于命名冲突导致的失败。</p>
                                       <p>如果存在具有相同名称的管道并且由其他用户创建，则Oracle会发出错误信号<code class="codeph">ORA-23322</code> ，表示命名冲突。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-099F3845-3DA9-4E92-B5E4-DACFC8FD0E71">例外</p>
                        <div class="tblformal" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-1C2D4A7F-805E-48C4-A449-94510C23678C">
                           <p class="titleintable">表121-5 CREATE_PIPE函数异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_PIPE函数异常" width="100%" border="1" summary="This table describes the Exceptions raised by the CREATE_PIPE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e1560">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e1563">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1568" headers="d665057e1560 ">
                                       <p><code class="codeph">空管名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1568 d665057e1563 ">
                                       <p>权限错误：已存在具有相同名称的管道，并且不允许您使用它。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67413"></a><a id="ARPLS67414"></a><a id="ARPLS67414"></a><a id="ARPLS67413"></a><div class="props_rev_3"><a id="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD" name="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD"></a><h4 id="ARPLS-GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD" class="sect4"><span class="enumeration_section">121.7.2</span> NEXT_ITEM_TYPE函数</h4>
                  <div>
                     <p>此函数确定本地消息缓冲区中下一项的数据类型。</p>
                     <div class="section">
                        <p>在调用<code class="codeph">RECEIVE_MESSAGE</code>将管道信息放入本地缓冲区后，请调用<code class="codeph">NEXT_ITEM_TYPE.</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD__GUID-FD3406D3-3358-4527-A3B8-405ABB27B3E6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.NEXT_ITEM_TYPE返回INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD__GUID-5A1E64B1-06C3-478B-A411-2418EDA8620F">编译指示</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references（next_item_type，WNDS，RNDS）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD__GUID-A0E0881E-4409-4B1C-935B-29385D63265A">返回值</p>
                        <div class="tblformal" id="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD__GUID-F34EBFF6-262D-4E3B-8F9C-8E51C505A9B8">
                           <p class="titleintable">表121-6 NEXT_ITEM_TYPE函数返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="NEXT_ITEM_TYPE函数返回值" width="100%" border="1" summary="This table decribes Values Returned by the NEXT_ITEM_TYPE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e1699">返回</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e1702">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1707" headers="d665057e1699 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1707 d665057e1702 ">
                                       <p>没有更多的物品</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1715" headers="d665057e1699 ">
                                       <p><code class="codeph">6</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1715 d665057e1702 ">
                                       <p><code class="codeph">数</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1724" headers="d665057e1699 ">
                                       <p><code class="codeph">9</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1724 d665057e1702 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1733" headers="d665057e1699 ">
                                       <p><code class="codeph">11</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1733 d665057e1702 ">
                                       <p><code class="codeph">ROWID</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1742" headers="d665057e1699 ">
                                       <p><code class="codeph">12</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1742 d665057e1702 ">
                                       <p><code class="codeph">日期</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1751" headers="d665057e1699 ">
                                       <p><code class="codeph">23</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1751 d665057e1702 ">
                                       <p><code class="codeph">生的</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67415"></a><a id="ARPLS67416"></a><a id="ARPLS67416"></a><a id="ARPLS67415"></a><div class="props_rev_3"><a id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3" name="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3"></a><h4 id="ARPLS-GUID-EE090FAB-169D-425E-8715-0B2167D28CC3" class="sect4"><span class="enumeration_section">121.7.3</span> PACK_MESSAGE程序</h4>
                  <div>
                     <p>此过程在本地消息缓冲区中构建您的消息。</p>
                     <div class="section">
                        <p>要发送消息，首先要对<code class="codeph">PACK_MESSAGE</code>进行一次或多次调用。然后，调用<code class="codeph">SEND_MESSAGE</code>在命名管道上的本地缓冲区中发送消息。
                        </p>
                        <p>重载该过程以接受<code class="codeph">VARCHAR2</code> ， <code class="codeph">NCHAR</code> ， <code class="codeph">NUMBER</code> ， <code class="codeph">DATE</code> 。， <code class="codeph">RAW</code>和<code class="codeph">ROWID</code>项类型的项。除了数据字节之外，缓冲区中的每个项目都需要一个字节来指示其类型，并且需要两个字节来存储其长度。终止消息需要一个额外的字节。除<code class="codeph">VARCHAR</code>之外的所有类型的开销是4个字节。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-633A4F5F-22CA-44B7-8503-6B584455344D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.PACK_MESSAGE（item IN VARCHAR2）; DBMS_PIPE.PACK_MESSAGE（项目IN NCHAR）; DBMS_PIPE.PACK_MESSAGE（项目编号）; DBMS_PIPE.PACK_MESSAGE（项目日期）; DBMS_PIPE.PACK_MESSAGE_RAW（项目IN RAW）; DBMS_PIPE.PACK_MESSAGE_ROWID（项目IN ROWID）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-FE92B3AE-1241-460D-9FD7-F8F3F0F7B21C">编译指示</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references（pack_message，WNDS，RNDS）; pragma restrict_references（pack_message_raw，WNDS，RNDS）; pragma restrict_references（pack_message_rowid，WNDS，RNDS）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-230B4F2E-FACE-4887-A47C-7B55B7C716F3">参数</p>
                        <div class="tblformal" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-1D692415-3FD5-4F4D-AC08-ABE4C0F14FF3">
                           <p class="titleintable">表121-7 PACK_MESSAGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PACK_MESSAGE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_PIPE.PACK_MESSAGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e1907">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e1910">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1915" headers="d665057e1907 ">
                                       <p><code class="codeph">项目</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1915 d665057e1910 ">
                                       <p>要打包到本地消息缓冲区的项目。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-21096BFE-4F9A-46E6-B5A5-87A2F4B92DD8">使用说明</p>
                        <p>在Oracle数据库版本8.x中，char-set-id（2个字节）和char-set-form（1个字节）与每个数据项一起存储。因此，使用Oracle数据库版本8.x时的开销是7个字节。</p>
                        <p>当您调用<code class="codeph">SEND_MESSAGE</code>发送此消息时，您必须指明要在其上发送消息的管道的名称。如果此管道已存在，则您必须具有足够的权限才能访问此管道。如果管道尚不存在，则会自动创建。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-72D3A765-F939-41FE-A34D-6A5911D0437C">例外</p>
                        <p>如果消息缓冲区溢出（当前为4096字节），则引发<code class="codeph">ORA-06558</code> 。缓冲区中的每个项目对于类型采用一个字节，对于长度采用两个字节，加上实际数据。终止消息还需要一个字节。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67417"></a><a id="ARPLS67418"></a><a id="ARPLS67418"></a><a id="ARPLS67417"></a><div class="props_rev_3"><a id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68" name="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68"></a><h4 id="ARPLS-GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68" class="sect4"><span class="enumeration_section">121.7.4</span>清洗程序</h4>
                  <div>
                     <p>此过程清空命名管道的内容。</p>
                     <div class="section">
                        <p>根据最近最少使用的算法，空的隐式创建的管道在共享的全局区域中老化。因此，调用<code class="codeph">PURGE</code>可以释放与隐式创建的管道关联的内存。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-4A3FC275-F416-4972-B1D3-8A300346C43C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.PURGE（pipename IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-E5A4D3C5-85E3-43AF-BE94-8E9C65221182">编译指示</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references（清除，WNDS，RNDS）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-36957D1E-4352-40D6-A2D0-CF6185B6D9A5">参数</p>
                        <div class="tblformal" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-1AEFA55B-0343-4C66-96BE-F15F39F8FD07">
                           <p class="titleintable">表121-8 PURGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PURGE程序参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_PIPE.PURGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2060">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2063">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2068" headers="d665057e2060 ">
                                       <p><code class="codeph">pipename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2068 d665057e2063 ">
                                       <p>从中删除所有消息的管道名称。</p>
                                       <p>当丢弃时，本地缓冲区可能被消息覆盖。Pipename不应超过128个字节，并且不区分大小写。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-2A542BAC-E269-4887-8052-FF1D1A1E1205">使用说明</p>
                        <p>由于<code class="codeph">PURGE</code>调用<code class="codeph">RECEIVE_MESSAGE</code> ，因此当从管道中清除消息时，本地缓冲区可能会被消息覆盖。此外，如果您尝试清除访问权限不足的管道，则可能会收到<code class="codeph">ORA-23322</code> （权限不足）错误。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-E2890D64-8FA3-4A58-AF36-F7F90EE12137">例外</p>
                        <p>如果管道属于另一个用户，则权限错误。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67419"></a><a id="ARPLS67420"></a><a id="ARPLS67421"></a><a id="ARPLS67422"></a><a id="ARPLS67420"></a><a id="ARPLS67421"></a><a id="ARPLS67422"></a><a id="ARPLS67419"></a><div class="props_rev_3"><a id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625" name="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625"></a><h4 id="ARPLS-GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625" class="sect4"><span class="enumeration_section">121.7.5 RECEIVE_MESSAGE</span>功能</h4>
                  <div>
                     <p>此函数将消息复制到本地消息缓冲区中。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-80CA810D-E17B-42F4-8F0B-18FA8B9E666C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.RECEIVE_MESSAGE（pipename IN VARCHAR2，超时IN INTEGER DEFAULT maxwait）RETURN INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-6882C267-4B5B-4264-BE00-0FEDC8F8A0E4">编译指示</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references（receive_message，WNDS，RNDS）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-F58BD3C1-72D5-4FEA-A4C5-06AB8282CD0E">参数</p>
                        <div class="tblformal" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-C1300EEC-B57E-4E15-8632-AA1E789E5807">
                           <p class="titleintable">表121-9 RECEIVE_MESSAGE功能参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RECEIVE_MESSAGE函数参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_PIPE.RECEIVE_MESSAGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2216">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2219">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2224" headers="d665057e2216 ">
                                       <p><code class="codeph">pipename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2224 d665057e2219 ">
                                       <p>要在其上接收消息的管道的名称。</p>
                                       <p>以<code class="codeph">ORA$</code>开头的名称保留供Oracle使用</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2237" headers="d665057e2216 ">
                                       <p><code class="codeph">超时</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2237 d665057e2219 ">
                                       <p>等待消息的时间，以秒为单位。</p>
                                       <p>默认值为常量<code class="codeph">MAXWAIT</code> ，定义为86400000（1000天）。超时为0可让您无阻塞地阅读。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-960BCC64-73BC-497A-8815-61CA8C31ECD7">返回值</p>
                        <div class="tblformal" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-16662C45-8945-4193-A641-210632753348">
                           <p class="titleintable">表121-10 RECEIVE_MESSAGE函数返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RECEIVE_MESSAGE函数返回值" width="100%" border="1" summary="This table decribes values returned by the RECEIVE_MESSAGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2262">返回</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2265">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2270" headers="d665057e2262 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2270 d665057e2265 ">
                                       <p>成功</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2278" headers="d665057e2262 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2278 d665057e2265 ">
                                       <p>时间到。如果管道是隐式创建的并且为空，则将其删除。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2286" headers="d665057e2262 ">
                                       <p><code class="codeph">2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2286 d665057e2265 ">
                                       <p>管道中的记录对于缓冲区而言太大。（这不应该发生。）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2294" headers="d665057e2262 ">
                                       <p><code class="codeph">3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2294 d665057e2265 ">
                                       <p>发生了中断。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2302" headers="d665057e2262 ">
                                       <p><code class="codeph">ORA-23322</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2302 d665057e2265 ">
                                       <p>用户没有足够的权限从管道读取。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-EC12C4F4-290C-452C-A48F-BF73B976EEBC">使用说明</p>
                        <p>要从管道接收消息，请先调用<code class="codeph">RECEIVE_MESSAGE</code> 。当您收到消息时，它将从管道中删除;因此，消息只能被接收一次。对于隐式创建的管道，在从管道中删除最后一条记录后，将删除管道。
                        </p>
                        <p>如果您在调用<code class="codeph">RECEIVE_MESSAGE</code>时指定的管道尚不存在，则Oracle会隐式创建管道并等待接收消息。如果消息未在指定的超时间隔内到达，则呼叫返回并移除管道。
                        </p>
                        <p>收到消息后，您必须对<code class="codeph">UNPACK_MESSAGE</code>进行一次或多次调用才能访问消息中的各个项目。重载<code class="codeph">UNPACK_MESSAGE</code>过程以解压缩<code class="codeph">DATE</code> ， <code class="codeph">NUMBER</code> ， <code class="codeph">VARCHAR2</code>类型的项目，还有两个额外的过程来解压缩<code class="codeph">RAW</code>和<code class="codeph">ROWID</code>项目。如果您不知道要尝试解包的数据类型，请调用<code class="codeph">NEXT_ITEM_TYPE</code>以确定缓冲区中下一项的类型。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-21108F59-6B87-404F-A627-0F0938D10BB7">例外</p>
                        <div class="tblformal" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-CF8C9C7B-1DA6-4A89-8335-6D23E5A5D7F3">
                           <p class="titleintable">表121-11 RECEIVE_MESSAGE函数异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RECEIVE_MESSAGE函数异常" width="100%" border="1" summary="This table describes the Exceptions raised by the RECEIVE_MESSAGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2362">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2365">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2370" headers="d665057e2362 ">
                                       <p><code class="codeph">空管名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2370 d665057e2365 ">
                                       <p>权限错误。没有足够的权限从管道中删除记录。管道由其他人拥有。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67423"></a><a id="ARPLS67423"></a><div class="props_rev_3"><a id="GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2" name="GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2"></a><h4 id="ARPLS-GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2" class="sect4"><span class="enumeration_section">121.7.6</span> RESET_BUFFER程序</h4>
                  <div>
                     <p>此过程将<code class="codeph">PACK_MESSAGE</code>和<code class="codeph">UNPACK_MESSAGE</code>定位指示符重置为0。
                     </p>
                     <div class="section">
                        <p>因为所有管道共享一个缓冲区，所以您可能会发现在使用新管道之前重置缓冲区很有用。这可确保您第一次尝试向管道发送消息时，不会无意中发送缓冲区中剩余的过期消息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2__GUID-88F50841-15FF-4D45-A2AD-CC5F0B230D20">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.RESET_BUFFER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2__GUID-EDC1C28B-7145-46D4-9F06-B973EAE4EA0D">编译指示</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references（reset_buffer，WNDS，RNDS）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67424"></a><a id="ARPLS67425"></a><a id="ARPLS67426"></a><a id="ARPLS67427"></a><a id="ARPLS67425"></a><a id="ARPLS67426"></a><a id="ARPLS67427"></a><a id="ARPLS67424"></a><div class="props_rev_3"><a id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE" name="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE"></a><h4 id="ARPLS-GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE" class="sect4"><span class="enumeration_section">121.7.7</span> REMOVE_PIPE功能</h4>
                  <div>
                     <p>此函数删除显式创建的管道。</p>
                     <div class="section">
                        <p><code class="codeph">SEND_MESSAGE</code>隐式创建的管道在空时自动删除。但是，只有通过调用<code class="codeph">REMOVE_PIPE</code>或关闭实例才能删除<code class="codeph">CREATE_PIPE</code>显式创建的管道。在删除管道之前，将删除管道中所有未使用的记录。
                        </p>
                        <p>这类似于在隐式创建的管道上调用<code class="codeph">PURGE</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-FB425089-090F-4D0F-808B-624D9F9B5DC8">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.REMOVE_PIPE（pipename IN VARCHAR2）RETURN INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-1B1D26BB-4B23-4F09-9D3B-F59F1EF8DB3D">编译指示</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references（remove_pipe，WNDS，RNDS）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-2CCC7ED3-D708-4159-B4B7-E4CB6F68B3C0">参数</p>
                        <div class="tblformal" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-CF4D3E9C-37DC-460F-AC21-DF531EA87BF1">
                           <p class="titleintable">表121-12 REMOVE_PIPE功能参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_PIPE函数参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_PIPE.REMOVE_PIPE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2622">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2625">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2630" headers="d665057e2622 ">
                                       <p><code class="codeph">pipename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2630 d665057e2625 ">
                                       <p>要删除的管道的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-6DB93133-C8DB-41FF-88AA-8A1DE7D92EA7">返回值</p>
                        <div class="tblformal" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-BABD6B53-3813-406C-9A72-349DCC667A5C">
                           <p class="titleintable">表121-13 REMOVE_PIPE函数返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_PIPE函数返回值" width="100%" border="1" summary="This table decribes Values Returned by the REMOVE_PIPE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2650">返回</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2653">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2658" headers="d665057e2650 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2658 d665057e2653 ">
                                       <p>成功</p>
                                       <p>如果管道不存在，或者管道已经存在且尝试删除它的用户有权这样做，则Oracle返回0，表示成功，并且管道中剩余的所有数据都将被删除。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2668" headers="d665057e2650 ">
                                       <p><code class="codeph">ORA-23322</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2668 d665057e2653 ">
                                       <p>权限不足。</p>
                                       <p>如果管道存在，但用户无权访问管道，则Oracle发出错误信号<code class="codeph">ORA-23322</code> ，表示权限不足。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-FDDE2150-12B7-4BF1-9421-F17205033D1F">例外</p>
                        <div class="tblformal" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-070B0A3E-11A2-45BE-A2EB-3C9ED47CB863">
                           <p class="titleintable">表121-14 REMOVE_PIPE函数异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_PIPE函数异常" width="100%" border="1" summary="This table describes the Exceptions raised by the REMOVE_PIPE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2693">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2696">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2701" headers="d665057e2693 ">
                                       <p><code class="codeph">空管名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2701 d665057e2696 ">
                                       <p>权限错误：删除管道的权限不足。管道已创建并由其他人拥有。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67428"></a><a id="ARPLS67429"></a><a id="ARPLS67430"></a><a id="ARPLS67431"></a><a id="ARPLS67429"></a><a id="ARPLS67430"></a><a id="ARPLS67431"></a><a id="ARPLS67428"></a><div class="props_rev_3"><a id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E" name="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E"></a><h4 id="ARPLS-GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E" class="sect4"><span class="enumeration_section">121.7.8</span> SEND_MESSAGE功能</h4>
                  <div>
                     <p>此函数在命名管道上发送消息。</p>
                     <div class="section">
                        <p>该消息包含在本地消息缓冲区中，该缓冲区充满了对<code class="codeph">PACK_MESSAGE</code>调用。您可以使用<code class="codeph">CREATE_PIPE</code>显式创建管道，否则，它是隐式创建的。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-E0803CAC-1304-42A2-972E-C4BD9DF79584">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.SEND_MESSAGE（pipename IN VARCHAR2，超时IN INTEGER DEFAULT MAXWAIT，maxpipesize IN INTEGER DEFAULT 8192）RETURN INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-92427268-4644-4A65-8A81-7ABF374D1C55">编译指示</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references（send_message，WNDS，RNDS）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-9547275D-1720-41F5-9548-7CA845B28CFB">参数</p>
                        <div class="tblformal" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-C47F7ECE-7670-4FD4-A50A-BF671C46E1EA">
                           <p class="titleintable">表121-15 SEND_MESSAGE函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SEND_MESSAGE函数参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_PIPE.SEND_MESSAGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2837">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2840">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2845" headers="d665057e2837 ">
                                       <p><code class="codeph">pipename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2845 d665057e2840 ">
                                       <p>要放置消息的管道的名称。</p>
                                       <p>如果使用显式管道，则这是您在调用<code class="codeph">CREATE_PIPE</code>时指定的名称。</p>
                                       <p>警告：请勿使用以“ <code class="codeph">ORA$</code> ”开头的管道名称。这些名称保留供Oracle提供的过程使用。Pipename不应超过128个字节，并且不区分大小写。此时，名称不能包含Globalization Support字符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2863" headers="d665057e2837 ">
                                       <p><code class="codeph">超时</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2863 d665057e2840 ">
                                       <p>在几秒钟内尝试在管道上放置消息时等待的时间。</p>
                                       <p>默认值为常量<code class="codeph">MAXWAIT</code> ，定义为86400000（1000天）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2876" headers="d665057e2837 ">
                                       <p><code class="codeph">maxpipesize</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2876 d665057e2840 ">
                                       <p>管道允许的最大大小（以字节为单位）。</p>
                                       <p>管道上所有消息的总大小不能超过此数量。如果超过此最大值，则会阻止该消息。默认值为8192个字节。</p>
                                       <p>管道的<code class="codeph">maxpipesize</code>成为管道特征的一部分，并持续管道的使用寿命。<code class="codeph">SEND_MESSAGE</code>具有较大的值会导致<code class="codeph">maxpipesize</code>增加。具有较小值的呼叫者仅使用现有的较大值。
                                       </p>
                                       <p>指定<code class="codeph">maxpipesize</code>作为的一部分<code class="codeph">SEND_MESSAGE</code>过程无需单独调用打开管道的需求。如果显式创建了管道，则可以使用可选的<code class="codeph">maxpipesize</code>参数来覆盖创建管道大小规范。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-6EAE4FD1-E5AA-4EBB-A1B1-3ED6ED022157">返回值</p>
                        <div class="tblformal" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-7DB1CD91-AEF6-4BB2-B2C4-E448CE37E031">
                           <p class="titleintable">表121-16 SEND_MESSAGE函数返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SEND_MESSAGE函数返回值" width="100%" border="1" summary="This table describes values returned by the SEND_MESSAGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d665057e2920">返回</th>
                                    <th align="left" valign="bottom" width="73%" id="d665057e2923">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d665057e2928" headers="d665057e2920 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d665057e2928 d665057e2923 ">
                                       <p>成功。</p>
                                       <p>如果管道已存在且尝试创建它的用户有权使用它，则Oracle返回0，表示成功，并且管道中已有的任何数据仍然存在。</p>
                                       <p>如果以<code class="codeph">SYSDBS</code> / <code class="codeph">SYSOPER</code>连接的用户重新创建管道，则Oracle返回状态0，但管道的所有权保持不变。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d665057e2946" headers="d665057e2920 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d665057e2946 d665057e2923 ">
                                       <p>时间到。</p>
                                       <p>此过程可能会超时，因为它无法锁定管道，或者因为管道仍然太满而无法使用。如果管道是隐式创建的并且为空，则将其删除。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d665057e2956" headers="d665057e2920 ">
                                       <p><code class="codeph">3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d665057e2956 d665057e2923 ">
                                       <p>发生了中断。</p>
                                       <p>如果管道是隐式创建的并且为空，则将其删除。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d665057e2966" headers="d665057e2920 ">
                                       <p><code class="codeph">ORA-23322</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d665057e2966 d665057e2923 ">
                                       <p>权限不足。</p>
                                       <p>如果存在具有相同名称的管道并且由其他用户创建，则Oracle会发出错误信号<code class="codeph">ORA-23322</code> ，表示命名冲突。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-89552960-F3BE-42A4-8780-69DB18D3A261">例外</p>
                        <div class="tblformal" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-DF608AC3-D87D-4933-98CD-57A37A49F1AA">
                           <p class="titleintable">表121-17 SEND_MESSAGE函数异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SEND_MESSAGE函数异常" width="100%" border="1" summary="This table describes the Exceptions raised by the SEND_MESSAGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2991">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2994">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2999" headers="d665057e2991 ">
                                       <p><code class="codeph">空管名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2999 d665057e2994 ">
                                       <p>权限错误。写入管道的权限不足。管道是私有的，由其他人拥有。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67432"></a><a id="ARPLS67432"></a><div class="props_rev_3"><a id="GUID-6C278A31-81EE-4276-A57D-9503E40F3E34" name="GUID-6C278A31-81EE-4276-A57D-9503E40F3E34"></a><h4 id="ARPLS-GUID-6C278A31-81EE-4276-A57D-9503E40F3E34" class="sect4"><span class="enumeration_section">121.7.9</span> UNIQUE_SESSION_NAME函数</h4>
                  <div>
                     <p>此函数接收在当前连接到数据库的所有会话中唯一的名称。</p>
                     <div class="section">
                        <p>从同一会话多次调用此函数始终返回相同的值。你可能会发现它有用使用此功能提供<code class="codeph">PIPENAME</code>参数为您<code class="codeph">SEND_MESSAGE</code>和<code class="codeph">RECEIVE_MESSAGE</code>电话。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6C278A31-81EE-4276-A57D-9503E40F3E34__GUID-EAF62825-6D17-46E6-92E9-26BDA297251D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.UNIQUE_SESSION_NAME RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6C278A31-81EE-4276-A57D-9503E40F3E34__GUID-47838A84-B49C-48DF-8552-1960754E5E8C">编译指示</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references（unique_session_name，WNDS，RNDS，WNPS）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6C278A31-81EE-4276-A57D-9503E40F3E34__GUID-52225127-0C6C-4AC5-97B0-DE09B552F171">返回值</p>
                        <p>此函数返回唯一名称。返回的名称最多可以为30个字节。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67433"></a><a id="ARPLS67434"></a><a id="ARPLS67434"></a><a id="ARPLS67433"></a><div class="props_rev_3"><a id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C" name="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C"></a><h4 id="ARPLS-GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C" class="sect4"><span class="enumeration_section">121.7.10</span> UNPACK_MESSAGE程序</h4>
                  <div>
                     <p>此过程从缓冲区中检索项目。</p>
                     <div class="section">
                        <p>在调用后<code class="codeph">RECEIVE_MESSAGE</code>放置管道信息在本地缓存，调用<code class="codeph">UNPACK_MESSAGE</code> 。</p>
                        <div class="infoboxnote" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-0151AF6B-6816-42FF-8C49-BF2C1B9E166C">
                           <p class="notep1">注意：</p>
                           <p>重载<code class="codeph">UNPACK_MESSAGE</code>过程以返回<code class="codeph">VARCHAR2</code> ， <code class="codeph">NCHAR</code> ， <code class="codeph">NUMBER</code>或<code class="codeph">DATE</code>类型的项目。解压缩<code class="codeph">RAW</code>和<code class="codeph">ROWID</code>项目有两个额外的过程。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-89FB057B-80A8-41B4-9F0C-8E925CE23164">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.UNPACK_MESSAGE（项目OUT VARCHAR2）; DBMS_PIPE.UNPACK_MESSAGE（项目OUT NCHAR）; DBMS_PIPE.UNPACK_MESSAGE（项目OUT NUMBER）; DBMS_PIPE.UNPACK_MESSAGE（项目输出日期）; DBMS_PIPE.UNPACK_MESSAGE_RAW（项目输出RAW）; DBMS_PIPE.UNPACK_MESSAGE_ROWID（item OUT ROWID）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-39DC04E3-3BBB-4418-88B7-520EDD1BEB3A">编译指示</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references（unpack_message，WNDS，RNDS）; pragma restrict_references（unpack_message_raw，WNDS，RNDS）; pragma restrict_references（unpack_message_rowid，WNDS，RNDS）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-B0C8E665-1664-4DED-B540-33DE73010A59">参数</p>
                        <div class="tblformal" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-E00EFB21-8E09-4411-A179-C2DA95CB0DA9">
                           <p class="titleintable">表121-18 UNPACK_MESSAGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNPACK_MESSAGE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_PIPE.UNPACK_MESSAGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e3272">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e3275">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e3280" headers="d665057e3272 ">
                                       <p><code class="codeph">项目</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e3280 d665057e3275 ">
                                       <p>从本地消息缓冲区接收下一个解压缩项的参数。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-998148FC-287B-4B42-B493-4995D466006F">例外</p>
                        <p>如果缓冲区不再包含项目，或者项目的类型与请求的类型不同，则会生成<code class="codeph">ORA-06556</code>或<code class="codeph">06559</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Clauses RETURNING, wrapper, error, and empty-field are described. Each is used in one or more of the SQL functions and conditions json_value, json_query, json_table, json_serialize, json_mergepatch, is json, is not json, json_exists, and json_equal.">
      <meta name="description" content="Clauses RETURNING, wrapper, error, and empty-field are described. Each is used in one or more of the SQL functions and conditions json_value, json_query, json_table, json_serialize, json_mergepatch, is json, is not json, json_exists, and json_equal.">
      <title>Clauses Used in SQL Query Functions and Conditions</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JSON Developer's Guide">
      <meta property="og:description" content="Clauses RETURNING, wrapper, error, and empty-field are described. Each is used in one or more of the SQL functions and conditions json_value, json_query, json_table, json_serialize, json_mergepatch, is json, is not json, json_exists, and json_equal.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JSON Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="json-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-22T10:58:31-08:00">
      <meta name="dcterms.title" content="JSON Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="2015, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96227-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="json-path-expressions.html" title="Previous" type="text/html">
      <link rel="next" href="condition-JSON_EXISTS.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADJSN">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="json-path-expressions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="condition-JSON_EXISTS.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JSON Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="query-json-data.html" property="item" typeof="WebPage"><span property="name">Query JSON Data</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Clauses Used in SQL Query Functions and Conditions</li>
            </ol>
            <a id="GUID-941C5E44-75C7-4BF1-BB0A-18AD48EDE9EB" name="GUID-941C5E44-75C7-4BF1-BB0A-18AD48EDE9EB"></a>
            
            <h2 id="ADJSN-GUID-941C5E44-75C7-4BF1-BB0A-18AD48EDE9EB" class="sect2"><span class="enumeration_chapter">14 </span>Clauses Used in SQL Query Functions and Conditions
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Clauses <code class="codeph">RETURNING</code>, wrapper, error, and empty-field are described. Each is used in one or more of the SQL functions and conditions <code class="codeph">json_value</code>, <code class="codeph">json_query</code>, <code class="codeph">json_table</code>, <code class="codeph">json_serialize</code>, <code class="codeph">json_mergepatch</code>, <code class="codeph">is json</code>, <code class="codeph">is not json</code>, <code class="codeph">json_exists</code>, and <code class="codeph">json_equal</code>.
               </p>
               <div class="section"></div>
               <!-- class="section" -->
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-DE9F29D3-1C23-4271-9DCD-E585866576D2">RETURNING Clause for SQL Query Functions</a><br>SQL functions <code class="codeph">json_value</code>, <code class="codeph">json_query</code>,             <code class="codeph">json_serialize</code>, and <code class="codeph">json_mergepatch</code> accept an optional                 <span class="bold"><code class="codeph">RETURNING</code></span> clause, which specifies the data type of the value         returned by the function. This clause and the default behavior (no             <code class="codeph">RETURNING</code> clause) are described here.
                  </li>
                  <li class="ulchildlink"><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-9079CD9C-3783-4857-9F6B-84D746C91317">Wrapper Clause for SQL/JSON Query Functions JSON_QUERY and JSON_TABLE</a><br>SQL/JSON query functions <code class="codeph">json_query</code> and <code class="codeph">json_table</code> accept an optional wrapper clause, which specifies the form of the value returned by <code class="codeph">json_query</code> or used for the data in a <code class="codeph">json_table</code> column. This clause and the default behavior (no wrapper clause) are described here. Examples are provided.
                  </li>
                  <li class="ulchildlink"><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-55344240-B1F0-490A-89BF-1526FA0546D4">Error Clause for SQL Query Functions and Conditions</a><br>Some SQL query functions and conditions accept an optional error clause, which specifies handling for a runtime error that is raised by the function or condition. This clause and the default behavior (no error clause) are summarized here.
                  </li>
                  <li class="ulchildlink"><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-3176ECEA-BBCE-4C7C-AB24-7FCE250B8443">Empty-Field Clause for SQL/JSON Query Functions</a><br>SQL/JSON query functions <code class="codeph">json_value</code>, <code class="codeph">json_query</code>, and<code class="codeph"> json_table</code> accept an optional <span class="bold"><code class="codeph">ON EMPTY</code></span> clause, which specifies the handling to use when a targeted JSON field is absent from the data queried. This clause and the default behavior (no <code class="codeph">ON EMPTY</code> clause) are described here.
                  </li>
                  <li class="ulchildlink"><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-21FE887D-5D7B-43BB-A1A8-B26B8924B290">ON MISMATCH Clause for JSON_VALUE</a><br>When the <code class="codeph">RETURNING</code> clause specifies a user-defined         object-type or collection-type instance, function <code class="codeph">json_value</code> accepts an         optional <span class="bold"><code class="codeph">ON MISMATCH</code></span> clause, which specifies handling to use when a         targeted JSON value does not match the specified SQL return value. This clause and its         default behavior (no <code class="codeph">ON MISMATCH</code> clause) are described here.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="query-json-data.html#GUID-119E5069-77F2-45DC-B6F0-A1B312945590" title="You can query JSON data using a simple dot notation or, for more functionality, using SQL/JSON functions and conditions. You can create and query a data guide that summarizes the structure and type information of a set of JSON documents.">Query JSON Data</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB6375"></a><div class="props_rev_3"><a id="GUID-DE9F29D3-1C23-4271-9DCD-E585866576D2" name="GUID-DE9F29D3-1C23-4271-9DCD-E585866576D2"></a><h3 id="ADJSN-GUID-DE9F29D3-1C23-4271-9DCD-E585866576D2" class="sect3"><span class="enumeration_section">14.1 </span>RETURNING Clause for SQL Query
        Functions
               </h3>
               <div>
                  <p>SQL functions <code class="codeph">json_value</code>, <code class="codeph">json_query</code>,
            <code class="codeph">json_serialize</code>, and <code class="codeph">json_mergepatch</code> accept an optional
                <span class="bold"><code class="codeph">RETURNING</code></span> clause, which specifies the data type of the value
        returned by the function. This clause and the default behavior (no
            <code class="codeph">RETURNING</code> clause) are described here.
                  </p>
                  <div class="section">
                     <p>For <code class="codeph">json_value</code>, you can use any of these predefined SQL data types in a <code class="codeph">RETURNING</code> clause: <code class="codeph">VARCHAR2</code>, <code class="codeph">NUMBER</code>, <code class="codeph">DATE</code>, <code class="codeph">TIMESTAMP</code>, <code class="codeph">TIMESTAMP WITH TIME ZONE</code>, <code class="codeph">SDO_GEOMETRY</code>, and <code class="codeph">CLOB</code>. You can also use a user-defined object type or a collection type. 
                     </p>
                     <div class="infoboxnote" id="GUID-DE9F29D3-1C23-4271-9DCD-E585866576D2__GUID-9A783CEB-AB8F-42C2-9710-64FDB57B9C3A">
                        <p class="notep1">Note:</p>
                        <p>An instance of Oracle SQL data type
                    <code class="codeph">DATE</code> can include a time component. And in your JSON data you
                can use a string that represents an ISO 8601 date-with-time value, that is, it can
                have a time component. But <code class="codeph">json_value</code> with <span class="bold"><code class="codeph">RETURNING
                        DATE</code></span> always returns a SQL <code class="codeph">DATE</code> value that is
                an <span class="italic">ANSI date</span>, that is, the value has <span class="italic">no time component</span>.
                        </p>
                        <p>To return a SQL <code class="codeph">DATE</code> value that has a time component
                use <span class="bold"><code class="codeph">RETURNING TIMESTAMP</code></span> and then <span class="italic">cast</span> the returned
                value to <code class="codeph">DATE</code>. For
            example:
                        </p><pre class="pre codeblock"><code>SELECT <span class="bold">cast</span>(json_value('{"a" : "<span class="bold">2019-01-02T12:34:56</span>"}', '$.a' RETURNING <span class="bold">TIMESTAMP</span>) <span class="bold">AS DATE</span>)
  FROM DUAL;</code></pre></div>
                     <p>For<code class="codeph">
                    json_query</code>, <code class="codeph">json_serialize</code>, and
                    <code class="codeph">json_mergepatch</code> you can use <code class="codeph">VARCHAR2</code>,
                    <code class="codeph">CLOB</code>, or <code class="codeph">BLOB</code>. A <code class="codeph">BLOB</code> result
                is in the AL32UTF8 character set. Whatever the data type returned by
                    <code class="codeph">json_serialize</code>, the returned data represents textual JSON
                data.
                     </p>
                     <p>You can optionally specify a length for
                    <code class="codeph">VARCHAR2</code> (default: <code class="codeph">4000</code>) and a precision and
                scale for
                <code class="codeph">NUMBER</code>.
                     </p>
                     <p>The default behavior (no <code class="codeph">RETURNING</code> clause) is to use
                    <code class="codeph">VARCHAR2(4000)</code>.
                
                     </p>
                     <p>Data type <code class="codeph">SDO_GEOMETRY</code> is for Oracle Spatial and Graph
                data. In particular, this means that you can use <code class="codeph">json_value</code> with
                GeoJSON data, which is a format for encoding geographic data in JSON.
                     </p>
                     <p>The <code class="codeph">RETURNING</code> clause also accepts two optional
                keywords, <code class="codeph">PRETTY</code> and <code class="codeph">ASCII</code>. If both are present
                then <code class="codeph">PRETTY</code> must come before <code class="codeph">ASCII</code>. Keyword
                    <code class="codeph">PRETTY</code> is not allowed for <code class="codeph">json_value</code>.
                     </p>
                     <p>The effect of keyword <span class="bold"><code class="codeph">PRETTY</code></span> is to pretty-print
                the returned data, by inserting newline characters and indenting. The default
                behavior is not to pretty-print.
                     </p>
                     <p>The effect of keyword
                        <span class="bold"><code class="codeph">ASCII</code></span> is to automatically escape all non-ASCII
                Unicode characters in the returned data, using standard ASCII Unicode escape
                sequences. The default behavior is not to escape non-ASCII Unicode
                characters.
                     </p>
                     <div class="infobox-tip" id="GUID-DE9F29D3-1C23-4271-9DCD-E585866576D2__GUID-3F6DAB52-5AFE-409C-91FB-EDCF78888340">
                        <p class="notep1">Tip:</p>
                        <p>You can pretty-print the entire context item by using only
                        <code class="codeph">$</code> as the path expression.
                        </p>
                     </div>
                     <p>If
                    <code class="codeph">VARCHAR2</code> is specified in a <code class="codeph">RETURNING</code> clause
                then scalars in the value are represented as follows:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Boolean values are represented by the lowercase
                        strings <code class="codeph">"true"</code> and <code class="codeph">"false"</code>.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">null</code> value is represented by
                        SQL
                    <code class="codeph">NULL</code>.
                           </p>
                        </li>
                        <li>
                           <div class="p">A JSON number is represented in a canonical form. It
                        can thus appear differently in the output string from its representation in
                        textual input data. When represented in canonical form:
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>It can be subject to the precision and
                                    range limitations for a SQL <code class="codeph">NUMBER</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <div class="p">When it is not subject to the SQL
                                        <code class="codeph">NUMBER</code> limitations:
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>The precision is limited to
                                                forty (40) digits.</p>
                                          </li>
                                          <li>
                                             <p>The optional exponent is
                                                limited to nine (9) digits plus a sign
                                                  (<code class="codeph">+</code> or
                                            <code class="codeph">-</code>).
                                             </p>
                                          </li>
                                          <li>
                                             <p>The entire text, including
                                                possible signs (<code class="codeph">-</code>,
                                                  <code class="codeph">+</code>), decimal point
                                                  (<code class="codeph">.</code>), and exponential indicator
                                                  (<code class="codeph">E</code>), is limited to 48
                                                characters.
                                             </p>
                                          </li>
                                       </ul>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                           <p>The <strong class="term">canonical form</strong> of a
                        JSON number:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Is a JSON number. (It can be parsed in JSON
                                data as a number.)</p>
                              </li>
                              <li>
                                 <p>Does not have a leading plus
                                    (<code class="codeph">+</code>) sign.
                                 </p>
                              </li>
                              <li>
                                 <p>Has a decimal point (<code class="codeph">.</code>)
                                only when necessary.
                                 </p>
                              </li>
                              <li>
                                 <p>Has a single zero (<code class="codeph">0</code>)
                                before the decimal point if the number is a fraction (between zero
                                and one).
                                 </p>
                              </li>
                              <li>
                                 <p>Uses exponential notation
                                    (<code class="codeph">E</code>) only when necessary. In particular, this
                                can be the case if the number of output characters is too limited
                                (by a small <code class="codeph"><span class="codeinlineitalic">N</span></code> for
                                    <code class="codeph">VARCHAR2(<span class="codeinlineitalic">N</span>)</code>).
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>Oracle extends the SQL/JSON standard in the case when the returning
                data type is <code class="codeph">VARCHAR2(<span class="codeinlineitalic">N</span>)</code>, by allowing optional keyword
                        <code class="codeph"><span class="bold">TRUNCATE</span></code> immediately after the data type. When
                    <code class="codeph">TRUNCATE</code> is present and the value to return is wider than
                        <code class="codeph"><span class="codeinlineitalic">N</span></code>, the value is truncated — only the first
                        <code class="codeph"><span class="codeinlineitalic">N</span></code> characters are returned. If
                    <code class="codeph">TRUNCATE</code> is absent then this case is treated as an error,
                handled as usual by an error clause or the default error-handling behavior.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-55344240-B1F0-490A-89BF-1526FA0546D4" title="Some SQL query functions and conditions accept an optional error clause, which specifies handling for a runtime error that is raised by the function or condition. This clause and the default behavior (no error clause) are summarized here.">Error Clause for SQL Query Functions and Conditions</a></li>
                        <li><a href="function-JSON_VALUE.html#GUID-622170D8-7BAD-4F5F-86BF-C328451FC3BE" title="You can use SQL/JSON function json_value to instantiate an instance of a user-defined SQL object type or collection type. You do this by targeting a JSON object or array in the path expression and specifying the object or collection type, respectively, in the RETURNING clause.">Using JSON_VALUE To Instantiate a User-Defined Object Type Instance</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-DE9F29D3-1C23-4271-9DCD-E585866576D2__GUID-951909CB-055A-4427-8BA7-578C14742C55">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../sqlrf/Data-Types.html#SQLRF-GUID-7690645A-0EE3-46CA-90DE-C96DF5A01F8F" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for
                            information about SQL data types <code class="codeph">DATE</code> and
                                <code class="codeph">TIMESTAMP</code></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/Data-Types.html#SQLRF-GUID-75209AF6-476D-4C44-A5DC-5FA70D701B78" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for
                            information about SQL data type <code class="codeph">NUMBER</code></p>
                        </li>
                        <li>
                           <p>
                              <a href="../spatl/spatial-concepts.html#SPATL-GUID-D703DF4D-57D1-4990-8F53-CAAA9C8FCB2F" target="_blank"><span><cite>Oracle Spatial and Graph Developer's Guide</cite></span></a> for
                            information about using Oracle Spatial and Graph data
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adjsn&amp;id=geojson_org" target="_blank">GeoJSON.org</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-941C5E44-75C7-4BF1-BB0A-18AD48EDE9EB" title="Clauses RETURNING, wrapper, error, and empty-field are described. Each is used in one or more of the SQL functions and conditions json_value, json_query, json_table, json_serialize, json_mergepatch, is json, is not json, json_exists, and json_equal.">Clauses Used in SQL Query Functions and Conditions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB6285"></a><a id="ADXDB6376"></a><div class="props_rev_3"><a id="GUID-9079CD9C-3783-4857-9F6B-84D746C91317" name="GUID-9079CD9C-3783-4857-9F6B-84D746C91317"></a><h3 id="ADJSN-GUID-9079CD9C-3783-4857-9F6B-84D746C91317" class="sect3"><span class="enumeration_section">14.2 </span>Wrapper Clause for SQL/JSON Query Functions JSON_QUERY and JSON_TABLE
               </h3>
               <div>
                  <p>SQL/JSON query functions <code class="codeph">json_query</code> and <code class="codeph">json_table</code> accept an optional wrapper clause, which specifies the form of the value returned by <code class="codeph">json_query</code> or used for the data in a <code class="codeph">json_table</code> column. This clause and the default behavior (no wrapper clause) are described here. Examples are provided.
                  </p>
                  <div class="section">
                     <p>The wrapper clause takes one of these forms:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold"><code class="codeph">WITH WRAPPER</code></span> &#x2013; Use a string value that represents a JSON array containing <span class="italic">all</span> of the JSON values that match the path expression. The order of the array elements is unspecified.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">WITHOUT WRAPPER</code></span> &#x2013; Use a string value that represents the <span class="italic">single</span> JSON <span class="italic">object</span> or <span class="italic">array</span> that matches the path expression. Raise an error if the path expression matches either a scalar value (not an object or array) or more than one value.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">WITH CONDITIONAL WRAPPER</code></span> &#x2013; Use a string value that represents <span class="italic">all</span> of the JSON values that match the path expression. For zero values, a single scalar value, or multiple values, <code class="codeph">WITH CONDITIONAL WRAPPER</code> is the same as <code class="codeph">WITH WRAPPER</code>. For a single JSON object or array value, it is the same as <code class="codeph">WITHOUT WRAPPER</code>.
                           </p>
                        </li>
                     </ul>
                     <p>The default behavior is <code class="codeph">WITHOUT WRAPPER</code>.
                     </p>
                     <p>You can add the optional keyword <span class="bold"><code class="codeph">UNCONDITIONAL</code></span> immediately after keyword <code class="codeph">WITH</code>, if you find it clearer: <code class="codeph">WITH WRAPPER</code> and <code class="codeph">WITH UNCONDITIONAL WRAPPER</code> mean the same thing.
                     </p>
                     <p>You can add the optional keyword <span class="bold"><code class="codeph">ARRAY</code></span> immediately before keyword <code class="codeph">WRAPPER</code>, if you find it clearer: <code class="codeph">WRAPPER</code> and <code class="codeph">ARRAY WRAPPER</code> mean the same thing.
                     </p>
                     <p><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-9079CD9C-3783-4857-9F6B-84D746C91317__CACFFGGH" title="This 4 column table shows JSON_QUERY wrapper clause examples. Column 1 lists JSON Values matching path expression. Column 2 shows values with a wrapper. Column 3 shows values without a wrapper. Column 4 shows values with a conditional wrapper.">Table 14-1</a> illustrates the wrapper clause possibilities. The array wrapper is shown in <span class="bold"><code class="codeph">bold</code></span>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9079CD9C-3783-4857-9F6B-84D746C91317__CACFFGGH">
                     <p class="titleintable">Table 14-1 JSON_QUERY Wrapper Clause Examples</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="JSON_QUERY Wrapper Clause Examples" summary="This 4 column table shows JSON_QUERY wrapper clause examples. Column 1 lists JSON Values matching path expression. Column 2 shows values with a wrapper. Column 3 shows values without a wrapper. Column 4 shows values with a conditional wrapper." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="23%" id="d15223e810">JSON Values Matching Path Expression</th>
                              <th align="left" valign="bottom" width="23%" id="d15223e813">WITH WRAPPER</th>
                              <th align="left" valign="bottom" width="27%" id="d15223e816">WITHOUT WRAPPER</th>
                              <th align="left" valign="bottom" width="26%" id="d15223e819">WITH CONDITIONAL WRAPPER</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d15223e824" headers="d15223e810 ">
                                 <p><code class="codeph">{"id": 38327}</code> (single object)
                                 </p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d15223e824 d15223e813 ">
                                 <p><span class="bold"><code class="codeph">[</code></span><code class="codeph">{"id": 38327}</code><span class="bold"><code class="codeph">]</code></span></p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d15223e824 d15223e816 ">
                                 <p><code class="codeph">{"id": 38327}</code></p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d15223e824 d15223e819 ">
                                 <p><code class="codeph">{"id": 38327}</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d15223e848" headers="d15223e810 ">
                                 <p><code class="codeph">[42, "a", true]</code> (single array)
                                 </p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d15223e848 d15223e813 ">
                                 <p><span class="bold"><code class="codeph">[</code></span><code class="codeph">[42, "a", true]</code><span class="bold"><code class="codeph">]</code></span></p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d15223e848 d15223e816 ">
                                 <p><code class="codeph">[42, "a", true]</code></p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d15223e848 d15223e819 ">
                                 <p><code class="codeph">[42, "a", true]</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d15223e872" headers="d15223e810 ">
                                 <p><code class="codeph">42</code></p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d15223e872 d15223e813 ">
                                 <p><span class="bold"><code class="codeph">[</code></span><code class="codeph">42</code><span class="bold"><code class="codeph">]</code></span></p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d15223e872 d15223e816 ">
                                 <p>Error (scalar)</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d15223e872 d15223e819 ">
                                 <p><span class="bold"><code class="codeph">[</code></span><code class="codeph">42</code><span class="bold"><code class="codeph">]</code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d15223e900" headers="d15223e810 ">
                                 <p><code class="codeph">42</code>, <code class="codeph">"a"</code>, <code class="codeph">true</code></p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d15223e900 d15223e813 ">
                                 <p><span class="bold"><code class="codeph">[</code></span><code class="codeph">42, "a", true</code><span class="bold"><code class="codeph">]</code></span></p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d15223e900 d15223e816 ">
                                 <p>Error (multiple values)</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d15223e900 d15223e819 ">
                                 <p><span class="bold"><code class="codeph">[</code></span><code class="codeph">42, "a", true</code><span class="bold"><code class="codeph">]</code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d15223e934" headers="d15223e810 ">
                                 <p>none</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d15223e934 d15223e813 ">
                                 <p><span class="bold"><code class="codeph">[]</code></span></p>
                              </td>
                              <td align="left" valign="top" width="27%" headers="d15223e934 d15223e816 ">
                                 <p>Error (no values)</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d15223e934 d15223e819 ">
                                 <p><span class="bold"><code class="codeph">[]</code></span></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>Consider, for example, a <code class="codeph">json_query</code> query to retrieve a JSON object. What happens if the path expression matches a JSON scalar value instead of an object, or it matches multiple JSON values (of any kind)? You might want to retrieve the matched values instead of raising an error. For example, you might want to pick one of the values that is an object, for further processing. Using an array wrapper lets you do this.
                     </p>
                     <p>A conditional wrapper can be convenient if the only reason you are using a wrapper is to avoid raising an error and you do not need to distinguish those error cases from non-error cases. If your application is looking for a single object or array and the data matched by a path expression is just that, then there is no need to wrap that expected value in a singleton array.</p>
                     <p>On the other hand, with an unconditional wrapper you know that the resulting array is always a wrapper — your application can count on that. If you use a conditional wrapper then your application might need extra processing to interpret a returned array. In <a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-9079CD9C-3783-4857-9F6B-84D746C91317__CACFFGGH" title="This 4 column table shows JSON_QUERY wrapper clause examples. Column 1 lists JSON Values matching path expression. Column 2 shows values with a wrapper. Column 3 shows values without a wrapper. Column 4 shows values with a conditional wrapper.">Table 14-1</a>, for instance, note that the same array (<code class="codeph">[42, "a", true]</code>) is returned for the very different cases of a path expression matching that array and a path expression matching each of its elements.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-941C5E44-75C7-4BF1-BB0A-18AD48EDE9EB" title="Clauses RETURNING, wrapper, error, and empty-field are described. Each is used in one or more of the SQL functions and conditions json_value, json_query, json_table, json_serialize, json_mergepatch, is json, is not json, json_exists, and json_equal.">Clauses Used in SQL Query Functions and Conditions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB6377"></a><div class="props_rev_3"><a id="GUID-55344240-B1F0-490A-89BF-1526FA0546D4" name="GUID-55344240-B1F0-490A-89BF-1526FA0546D4"></a><h3 id="ADJSN-GUID-55344240-B1F0-490A-89BF-1526FA0546D4" class="sect3"><span class="enumeration_section">14.3 </span>Error Clause for SQL Query Functions and Conditions
               </h3>
               <div>
                  <p>Some SQL query functions and conditions accept an optional error clause, which specifies handling for a runtime error that is raised by the function or condition. This clause and the default behavior (no error clause) are summarized here.</p>
                  <div class="section">
                     <p>By default, SQL functions and conditions for JSON avoid raising runtime errors. For example, when JSON data is syntactically invalid, <code class="codeph">json_exists</code> and <code class="codeph">json_equal</code> return false and <code class="codeph">json_value</code> returns <code class="codeph">NULL</code>. 
                     </p>
                     <p>But in some cases you can also specify an error clause, which overrides the default behavior. The error handling you can specify varies, but each SQL function and condition for JSON that lets you specify error handling supports at least the <code class="codeph">ERROR ON ERROR</code> behavior of raising an error.
                     </p>
                     <p>The optional error clause can take these forms: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold"><code class="codeph">ERROR ON ERROR</code></span> &#x2013; Raise the error (no special handling).
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">NULL ON ERROR</code></span> &#x2013; Return <code class="codeph">NULL</code> instead of raising the error. 
                           </p>
                           <p><span class="italic">Not</span> available for <code class="codeph">json_exists</code>.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">FALSE ON ERROR</code></span> &#x2013; Return false instead of raising the error. 
                           </p>
                           <p>Available <span class="italic">only</span> for <code class="codeph">json_exists</code> and <code class="codeph">json_equal</code>, for which it is the <span class="italic">default</span>.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">TRUE ON ERROR</code></span> &#x2013; Return true instead of raising the error. 
                           </p>
                           <p>Available <span class="italic">only</span> for <code class="codeph">json_exists</code> and <code class="codeph">json_equal</code>.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">EMPTY OBJECT ON ERROR</code></span> &#x2013; Return an empty object (<code class="codeph">{}</code>) instead of raising the error. 
                           </p>
                           <p>Available <span class="italic">only</span> for <code class="codeph">json_query</code>.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">EMPTY ARRAY ON ERROR</code></span> &#x2013; Return an empty array (<code class="codeph">[]</code>) instead of raising the error. 
                           </p>
                           <p>Available <span class="italic">only</span> for <code class="codeph">json_query</code>.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">EMPTY ON ERROR</code></span> &#x2013; Same as <code class="codeph">EMPTY ARRAY ON ERROR</code>. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">DEFAULT '</code></span><span class="italic"><code class="codeph">literal_return_value</code></span><span class="bold"><code class="codeph">' ON ERROR</code></span> &#x2013; Return the specified value instead of raising the error. The value must be a constant at query compile time. 
                           </p>
                           <p><span class="italic">Not</span> available: 
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>For <code class="codeph">json_exists</code>, <code class="codeph">json_equal</code>, <code class="codeph">json_serialize</code>, <code class="codeph">json_mergepatch</code>, or a <code class="codeph">json_table</code> column value clause that has <code class="codeph">json_exists</code> behavior
                                 </p>
                              </li>
                              <li>
                                 <p>For <code class="codeph">json_query</code> or a <code class="codeph">json_table</code> column value clause that has <code class="codeph">json_query</code> behavior
                                 </p>
                              </li>
                              <li>
                                 <p>For <span class="italic">row</span>-level error-handing for <code class="codeph">json_table</code></p>
                              </li>
                              <li>
                                 <p>When <code class="codeph">SDO_GEOMETRY</code> is specified either as the <code class="codeph">RETURNING</code> clause data type for <code class="codeph">json_value</code> or as a <code class="codeph">json_table</code> <span class="italic">column</span> data type
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>The <span class="italic">default</span> behavior is <code class="codeph">NULL ON ERROR</code>, except for conditions <code class="codeph">json_exists</code> and <code class="codeph">json_equal</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-55344240-B1F0-490A-89BF-1526FA0546D4__GUID-F1D594C9-055A-45E5-90A0-DC3E240037F2">
                        <p class="notep1">Note:</p>
                        <p>There are two levels of error handling for <code class="codeph">json_table</code>, corresponding to its two levels of path expressions: row and column. When present, a column error handler overrides row-level error handling. The default error handler for both levels is <code class="codeph">NULL ON ERROR</code>.
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-55344240-B1F0-490A-89BF-1526FA0546D4__GUID-B01FAA37-CA25-4DC2-820A-1FF2A210C1DA">
                        <p class="notep1">Note:</p>
                        <p>An <code class="codeph">ON EMPTY</code> clause overrides the behavior specified by <code class="codeph">ON ERROR</code> for the error of trying to match a missing field.
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-55344240-B1F0-490A-89BF-1526FA0546D4__GUID-F142C4B2-1D3E-4570-BAFF-E55CD0658B84">
                        <p class="notep1">Note:</p>
                        <p>The <code class="codeph">ON ERROR</code> clause takes effect only for runtime errors that arise when a syntactically correct SQL/JSON path expression is matched against JSON data. A path expression that is syntactically incorrect results in a compile-time syntax error; it is not handled by the <code class="codeph">ON ERROR</code> clause.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-3176ECEA-BBCE-4C7C-AB24-7FCE250B8443" title="SQL/JSON query functions json_value, json_query, and json_table accept an optional ON EMPTY clause, which specifies the handling to use when a targeted JSON field is absent from the data queried. This clause and the default behavior (no ON EMPTY clause) are described here.">Empty-Field Clause for SQL/JSON Query Functions</a></li>
                        <li><a href="function-JSON_TABLE.html#GUID-0172660F-CE29-4765-BF2C-C405BDE8369A" title="SQL/JSON function json_table projects specific JSON data to columns of various SQL data types. You use it to map parts of a JSON document into the rows and columns of a new, virtual table, which you can also think of as an inline view.">SQL/JSON Function JSON_TABLE</a></li>
                        <li><a href="function-JSON_QUERY.html#GUID-D64C7BE9-335D-449C-916D-1123539BF1FB" title="SQL/JSON function json_query selects one or more values from JSON data and returns a string (VARCHAR2, CLOB, or BLOB instance) that represents the JSON values. You can thus use json_query to retrieve fragments of a JSON document.">SQL/JSON Function JSON_QUERY</a></li>
                        <li><a href="function-JSON_VALUE.html#GUID-0565F0EE-5F13-44DD-8321-2AC142959215" title="SQL/JSON function json_value selects JSON data and returns a SQL scalar or an instance of a user-defined SQL object type or SQL collection type (varray, nested table).">SQL/JSON Function JSON_VALUE</a></li>
                        <li><a href="oracle-sql-function-json_serialize.html#GUID-667D37FF-F5FB-465D-B8AE-DAE88F191B2F" title="Oracle SQL function json_serialize takes JSON data (of any SQL data type) as input and returns a textual representation of it.">Oracle SQL Function JSON_SERIALIZE</a></li>
                        <li><a href="condition-JSON_EXISTS.html#GUID-D60A7E52-8819-4D33-AEDB-223AB7BDE60A" title="SQL/JSON condition json_exists lets you use a SQL/JSON path expression as a row filter, to select rows based on the content of JSON documents. You can use condition json_exists in a CASE expression or the WHERE clause of a SELECT statement.">SQL/JSON Condition JSON_EXISTS</a></li>
                        <li><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-21FE887D-5D7B-43BB-A1A8-B26B8924B290" title="When the RETURNING clause specifies a user-defined object-type or collection-type instance, function json_value accepts an optional ON MISMATCH clause, which specifies handling to use when a targeted JSON value does not match the specified SQL return value. This clause and its default behavior (no ON MISMATCH clause) are described here.">ON MISMATCH Clause for JSON_VALUE</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-55344240-B1F0-490A-89BF-1526FA0546D4__GUID-D1EC21AE-A1CD-4F2C-9E90-6A3744507ADD">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../sqlrf/Single-Row-Functions.html#SQLRF-GUID-C13171B3-C070-4137-AC71-7A30BD26F380" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>  for detailed information about the error clause for SQL functions for JSON
                           </p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/SQL-JSON-Conditions.html#SQLRF-GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for detailed information about the error clause for SQL conditions for JSON
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-941C5E44-75C7-4BF1-BB0A-18AD48EDE9EB" title="Clauses RETURNING, wrapper, error, and empty-field are described. Each is used in one or more of the SQL functions and conditions json_value, json_query, json_table, json_serialize, json_mergepatch, is json, is not json, json_exists, and json_equal.">Clauses Used in SQL Query Functions and Conditions</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-3176ECEA-BBCE-4C7C-AB24-7FCE250B8443" name="GUID-3176ECEA-BBCE-4C7C-AB24-7FCE250B8443"></a><h3 id="ADJSN-GUID-3176ECEA-BBCE-4C7C-AB24-7FCE250B8443" class="sect3"><span class="enumeration_section">14.4 </span>Empty-Field Clause for SQL/JSON Query Functions
               </h3>
               <div>
                  <p>SQL/JSON query functions <code class="codeph">json_value</code>, <code class="codeph">json_query</code>, and<code class="codeph"> json_table</code> accept an optional <span class="bold"><code class="codeph">ON EMPTY</code></span> clause, which specifies the handling to use when a targeted JSON field is absent from the data queried. This clause and the default behavior (no <code class="codeph">ON EMPTY</code> clause) are described here.
                  </p>
                  <div class="section">
                     <p>You generally handle errors for SQL/JSON functions and conditions using an error clause (<code class="codeph">ON ERROR</code>). However, there is a special case where you might want different handling from this general error handling: when querying to match given JSON fields that are missing from the data. Sometimes you do not want to raise an error just because a field to be matched is absent. (A missing field is normally treated as an error.)
                     </p>
                     <p>You typically use a <code class="codeph">NULL ON EMPTY</code> clause in conjunction with an accompanying <code class="codeph">ON ERROR</code> clause. This combination specifies that other errors are handled according to the <code class="codeph">ON ERROR</code> clause, but the error of trying to match a missing field is handled by just returning <code class="codeph">NULL</code>. If no <code class="codeph">ON EMPTY</code> clause is present then an <code class="codeph">ON ERROR</code> clause handles also the missing-field case.
                     </p>
                     <p>In addition to <code class="codeph">NULL ON EMPTY</code> there are <code class="codeph">ERROR ON EMPTY</code> and <code class="codeph">DEFAULT</code> ... <code class="codeph">ON EMPTY</code>, which are analogous to the similarly named <code class="codeph">ON ERROR</code> clauses. 
                     </p>
                     <p>If only an <code class="codeph">ON EMPTY</code> clause is present (no <code class="codeph">ON ERROR</code> clause) then missing-field behavior is specified by the <code class="codeph">ON EMPTY</code> clause, and other errors are handled the same as if <code class="codeph">NULL ON ERROR</code> were present (it is the <code class="codeph">ON ERROR</code> default). If both clauses are absent then only <code class="codeph">NULL ON ERROR</code> is used.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-3176ECEA-BBCE-4C7C-AB24-7FCE250B8443__USENULLONEMPTYFORANINDEXCREATEDONJS-38D4389A">
                     <p class="subhead2" id="GUID-3176ECEA-BBCE-4C7C-AB24-7FCE250B8443__USENULLONEMPTYFORANINDEXCREATEDONJS-38D43B2B">Use NULL ON EMPTY for an Index Created on JSON_VALUE</p>
                     <p><code class="codeph">NULL ON EMPTY</code> is especially useful for the case of a functional index created on a <code class="codeph">json_value</code> expression. The clause has no effect on whether or when the index is picked up, but it is effective in allowing some data to be indexed that would otherwise not be because it is missing a field targeted by the <code class="codeph">json_value</code> expression. 
                     </p>
                     <p>You generally want to use <code class="codeph">ERROR ON ERROR</code> for the queries that populate the index, so that a query path expression that results in multiple values or complex values raises an error. But you sometimes do not want to raise an error just because the field targeted by a path expression is missing — you want that data to be indexed. <a href="indexes-for-json-data.html#GUID-FEE83855-780A-424B-9916-B899BFF2077B__GUID-A257EAA2-C71C-4F6B-A76F-CA539EACD555">Example 26-5</a> illustrates this use of <code class="codeph">NULL ON EMPTY</code> when creating an index on a <code class="codeph">json_value</code> expression.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="indexes-for-json-data.html#GUID-FEE83855-780A-424B-9916-B899BFF2077B" title="You can create a function-based index for SQL/JSON function json_value. You can use the standard syntax for this, explicitly specifying function json_value, or you can use the simple dot-notation syntax. Indexes created in either of these ways can be used with both dot-notation queries and json_value queries.">Creating JSON_VALUE Function-Based Indexes</a></li>
                        <li><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-55344240-B1F0-490A-89BF-1526FA0546D4" title="Some SQL query functions and conditions accept an optional error clause, which specifies handling for a runtime error that is raised by the function or condition. This clause and the default behavior (no error clause) are summarized here.">Error Clause for SQL Query Functions and Conditions</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-941C5E44-75C7-4BF1-BB0A-18AD48EDE9EB" title="Clauses RETURNING, wrapper, error, and empty-field are described. Each is used in one or more of the SQL functions and conditions json_value, json_query, json_table, json_serialize, json_mergepatch, is json, is not json, json_exists, and json_equal.">Clauses Used in SQL Query Functions and Conditions</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-21FE887D-5D7B-43BB-A1A8-B26B8924B290" name="GUID-21FE887D-5D7B-43BB-A1A8-B26B8924B290"></a><h3 id="ADJSN-GUID-21FE887D-5D7B-43BB-A1A8-B26B8924B290" class="sect3"><span class="enumeration_section">14.5 </span>ON MISMATCH Clause for JSON_VALUE
               </h3>
               <div>
                  <p>When the <code class="codeph">RETURNING</code> clause specifies a user-defined
        object-type or collection-type instance, function <code class="codeph">json_value</code> accepts an
        optional <span class="bold"><code class="codeph">ON MISMATCH</code></span> clause, which specifies handling to use when a
        targeted JSON value does not match the specified SQL return value. This clause and its
        default behavior (no <code class="codeph">ON MISMATCH</code> clause) are described here.
                  </p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-21FE887D-5D7B-43BB-A1A8-B26B8924B290__GUID-47D5A0BC-DE63-4087-BCAC-E5AD1B989E75">
                        <p class="notep1">Note:</p>
                        <p>Clauses <code class="codeph">ON
                        ERROR</code> and <code class="codeph">ON EMPTY</code> apply only when no JSON data
                    matches the path expression. Clause <code class="codeph">ON MISMATCH</code> applies when
                    the JSON data that matches the path expression does not match the specified
                    object or collection return type. Clause <code class="codeph">ON MISMATCH</code> is allowed
                    only when the return type is an instance of a user-defined object type or
                    collection type. If you use it with another return type then a query
                    compile-time error is raised.
                        </p>
                     </div>
                     <p>When you return an
                instance of a SQL object or collection type that reflects the JSON data targeted by
                function <code class="codeph"> json_value</code>, the definitions of that targeted data and the
                object or collection to be returned must match, or else a query compile-time error
                applies.
                     </p>
                     <p>The <span class="italic">default</span> handling of such an error is just to
                    <span class="italic">ignore</span> it. But you can instead handle such an error in various ways, by
                providing one or more <code class="codeph">ON MISMATCH</code> clauses, as follows:
                     </p>
                     <ul style="list-style-type: disc;" id="GUID-21FE887D-5D7B-43BB-A1A8-B26B8924B290__UL_AZW_GNJ_2GB">
                        <li>
                           <p><code class="codeph"><span class="bold">IGNORE ON MISMATCH</span></code> —
                        Explicitly specify the default behavior: ignore the mismatch. The object or
                        collection instance returned can contain one or more SQL
                            <code class="codeph">NULL</code> values because of mismatches against the targeted
                        JSON data.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph"><span class="bold">NULL ON MISMATCH</span></code> — Return
                        SQL <code class="codeph">NULL</code> as the object-type or collection-type
                    value.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph"><span class="bold">ERROR ON MISMATCH</span></code> — Raise a
                        query compile-time error for the mismatch.
                           </p>
                        </li>
                     </ul>
                     <p>Each of these <code class="codeph">ON MISMATCH</code> clause types can also be
                followed, in parentheses (<code class="codeph"><span class="bold">(</span></code>…<code class="codeph"><span class="bold">)</span></code>), by
                one or more clauses that each indicates a kind of mismatch to handle, separated by
                commas (<code class="codeph"><span class="bold">,</span></code>). These are the possible mismatch kinds:
                     </p>
                     <ul style="list-style-type: disc;" id="GUID-21FE887D-5D7B-43BB-A1A8-B26B8924B290__UL_N5F_YQJ_2GB">
                        <li>
                           <p><code class="codeph"><span class="bold">MISSING DATA</span></code> — Some JSON
                        data was needed to match the object-type or collection-type data, but it was
                        missing.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph"><span class="bold">EXTRA DATA</span></code> — One or more
                        JSON fields have no corresponding object-type or collection-type data. For
                        example, for JSON field <code class="codeph">address</code> there is no object-type
                        attribute with the same name (matching case-insensitively, by
                    default).
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph"><span class="bold">TYPE ERROR</span></code> — A JSON scalar
                        value has a data type that is incompatible with the corresponding return SQL
                        scalar data type. This can be because of type incompatibility, as put forth
                        in <a href="function-JSON_VALUE.html#GUID-622170D8-7BAD-4F5F-86BF-C328451FC3BE__TABLE_VTC_315_YFB" title="The table shows which JSON and SQL data types are compatible. The columns are JSON Type (Source), SQL Type (Destination), and Notes.">Table 16-1</a>, or because the SQL data type is too constraining (e.g.,
                            <code class="codeph">VARCHAR(2)</code> is two short for JSON string
                            <code class="codeph">"hello"</code>). 
                           </p>
                        </li>
                     </ul>
                     <p>If no such kind-of-mismatch clause (e.g. <code class="codeph">EXTRA
                DATA</code>) is present for a given handler (e.g. <code class="codeph">NULL ON
                    MISMATCH</code>) then that handler applies to all kinds of
                mismatch.
                     </p>
                     <p>You can have any number of <code class="codeph">ON MISMATCH</code> clauses of
                different kinds, but if two or more such contradict each other then a query
                compile-time error is raised.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="function-JSON_VALUE.html#GUID-622170D8-7BAD-4F5F-86BF-C328451FC3BE" title="You can use SQL/JSON function json_value to instantiate an instance of a user-defined SQL object type or collection type. You do this by targeting a JSON object or array in the path expression and specifying the object or collection type, respectively, in the RETURNING clause.">Using JSON_VALUE To Instantiate a User-Defined Object Type Instance</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-941C5E44-75C7-4BF1-BB0A-18AD48EDE9EB" title="Clauses RETURNING, wrapper, error, and empty-field are described. Each is used in one or more of the SQL functions and conditions json_value, json_query, json_table, json_serialize, json_mergepatch, is json, is not json, json_exists, and json_equal.">Clauses Used in SQL Query Functions and Conditions</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
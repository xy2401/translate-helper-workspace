<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>预编译器概念</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="c-c-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T03:52:01-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96467-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction.html" title="Previous" type="text/html"></link>
      <link rel="next" href="database-concepts.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*C/C++ Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="database-concepts.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="introduction-and-concepts.html" property="item" typeof="WebPage"><span property="name">介绍和概念</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">预编译器概念</li>
            </ol>
            <a id="GUID-0F4990F8-89E3-4AC3-A8A1-C974DF264AD8" name="GUID-0F4990F8-89E3-4AC3-A8A1-C974DF264AD8"></a><a id="LNPCC3059"></a>
            
            <h2 id="LNPCC-GUID-0F4990F8-89E3-4AC3-A8A1-C974DF264AD8" class="sect2"><span class="enumeration_chapter">2</span>预编译器概念</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍嵌入式SQL程序如何完成其工作。您将检查它们运行的特殊环境以及此环境对应用程序设计的影响。在介绍了嵌入式SQL编程的关键概念以及开发应用程序的步骤之后，本章使用一个简单的程序来说明要点。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-D244197E-032F-4F23-81FF-F6985A80739C">嵌入式SQL编程的关键概念</a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-FD8F5219-FBFC-4735-8FA7-BD15C6FE7700">开发嵌入式SQL应用程序的步骤</a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-A6D81B3A-AE64-4B6C-8E1B-C24AA2DE4B05">编程指南</a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-034B6416-444A-4EF1-9078-35F5A86CF1D9">示例表</a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-CB0B7383-88DB-4580-B908-857A7FC201D0">示例程序：简单查询</a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-AA2ACB44-9A2F-4C91-9766-7369D6177939">示例程序：使用SQL99语法的简单查询</a></p>
                  </li>
               </ul>
            </div><a id="LNPCC3060"></a><div class="props_rev_3"><a id="GUID-D244197E-032F-4F23-81FF-F6985A80739C" name="GUID-D244197E-032F-4F23-81FF-F6985A80739C"></a><h3 id="LNPCC-GUID-D244197E-032F-4F23-81FF-F6985A80739C" class="sect3"><span class="enumeration_section">2.1</span>嵌入式SQL编程的关键概念</h3>
               <div>
                  <p>本节为后面的章节构建了概念基础。本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-D2D1F59E-2E12-40C2-A885-E9001BB2075A">嵌入式SQL语句</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-087CDE89-34DE-4748-9F2F-1472B62087B9">嵌入式SQL语法</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-4D4A2927-9507-4002-8DF1-531B1C0DA3D5">静态与动态SQL语句</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-71137E03-711B-40B3-ABDA-3728D4A9B2BF">嵌入式PL / SQL块</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-7A95FCD4-BFD1-4EC6-BBDB-1DBA9F464479">主机和指标变量</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-A2C15B76-75FC-41F9-95DD-8413A4E79ED9">Oracle数据类型</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-640C8415-A24C-4987-AFFC-2EB457690793">数组</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-5B1BD408-2CB1-4C77-897A-522AD75BA9E4">数据类型等价</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-DD5E0AD0-9BC0-4E9A-9504-7323516690D3">私有SQL区域_游标_和活动集</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-2D4A0C70-F96C-4952-A1CC-CC799A0E35B0">交易</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-A2CEF7D8-E45C-4FE2-83CF-5F4097DE5D77">错误和警告</a></p>
                     </li>
                     <li>
                        <p><a href="precompiler-concepts.html#GUID-CC717517-45E1-4467-9968-1DA2ECA0AFE1">SQL99语法支持</a></p>
                     </li>
                  </ul>
               </div><a id="LNPCC3061"></a><div class="props_rev_3"><a id="GUID-D2D1F59E-2E12-40C2-A885-E9001BB2075A" name="GUID-D2D1F59E-2E12-40C2-A885-E9001BB2075A"></a><h4 id="LNPCC-GUID-D2D1F59E-2E12-40C2-A885-E9001BB2075A" class="sect4"><span class="enumeration_section">2.1.1</span>嵌入式SQL语句</h4>
                  <div>
                     <p>术语<span class="italic">嵌入式SQL</span>是指放置在应用程序中的SQL语句。因为它包含SQL语句，所以应用程序被称为<span class="italic">宿主程序</span> ，其编写<span class="italic">语言</span>称为<span class="italic">宿主语言</span> 。例如，Pro * C / C ++提供了在C或C ++主机程序中嵌入某些SQL语句的功能。
                     </p>
                     <p>要操作和查询Oracle数据，请使用INSERT，UPDATE，DELETE和SELECT语句。INSERT向数据库表添加数据行，UPDATE修改行，DELETE删除不需要的行，SELECT检索符合搜索条件的行。</p>
                     <p>功能强大的SET ROLE语句允许您动态管理数据库权限。<span class="italic">角色</span>是相关系统和对象特权的命名组，或授予用户或其他角色的相关系统或对象特权的命名组。角色定义存储在Oracle数据字典中。您的应用程序可以使用SET ROLE语句根据需要启用和禁用角色。
                     </p>
                     <p>只有SQL语句 - 而不是SQL * Plus语句 - 在应用程序中才有效。（SQL * Plus具有用于设置环境参数，编辑和报告格式的其他语句。）</p>
                  </div><a id="LNPCC3063"></a><a id="LNPCC3064"></a><a id="LNPCC3062"></a><div class="props_rev_3"><a id="GUID-16DB0425-F50A-4AF9-A522-69FA654DCB2D" name="GUID-16DB0425-F50A-4AF9-A522-69FA654DCB2D"></a><h5 id="LNPCC-GUID-16DB0425-F50A-4AF9-A522-69FA654DCB2D" class="sect5"><span class="enumeration_section">2.1.1.1</span>可执行语句和指令</h5>
                     <div>
                        <p>嵌入式SQL包括所有交互式SQL语句以及允许您在Oracle和宿主程序之间传输数据的其他语句。嵌入式SQL语句有两种类型： <span class="italic">可执行语句</span>和<span class="italic">指令</span> 。可执行语句导致对运行时库SQLLIB的调用。您可以使用它们连接到Oracle，定义，查询和操作Oracle数据，控制对Oracle数据的访问以及处理事务。它们可以放在可以放置C或C ++语言可执行语句的任何位置。 <a id="d10892e193" class="indexterm-anchor"></a><a id="d10892e197" class="indexterm-anchor"></a><a id="d10892e201" class="indexterm-anchor"></a><a id="d10892e205" class="indexterm-anchor"></a>  
                        </p>
                        <p>另一方面，指令不会导致对SQLLIB的调用，也不会对Oracle数据进行操作。您可以使用它们来声明Oracle对象，通信区域和SQL变量。它们可以放在可以放置C或C ++变量声明的任何位置。</p>
                        <p><a href="precompiler-concepts.html#GUID-16DB0425-F50A-4AF9-A522-69FA654DCB2D__g11256" title="指示">表2-1</a>对各种嵌入式SQL语句进行了分组（不是完整列表）：</p>
                        <div class="tblformal" id="GUID-16DB0425-F50A-4AF9-A522-69FA654DCB2D__g11256">
                           <p class="titleintable">表2-1嵌入式SQL语句</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="嵌入式SQL语句" width="100%" border="1" summary="Directive" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d10892e228">指示</th>
                                    <th align="left" valign="bottom" width="69%" id="d10892e231">目的</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e236" headers="d10892e228 ">
                                       <p>ARRAYLEN *</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e236 d10892e231 ">
                                       <p>将主机数组与PL / SQL一起使用</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e243" headers="d10892e228 ">
                                       <p>开始声明部分*</p>
                                       <p>END DECLARE SECTION *</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e243 d10892e231 ">
                                       <p>声明宿主变量（可选）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e252" headers="d10892e228 ">
                                       <p>宣布*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e252 d10892e231 ">
                                       <p>命名Oracle架构对象</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e259" headers="d10892e228 ">
                                       <p>包括*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e259 d10892e231 ">
                                       <p>复制文件</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e266" headers="d10892e228 ">
                                       <p>类型*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e266 d10892e231 ">
                                       <p>等价数据类型</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e273" headers="d10892e228 ">
                                       <p>VAR *</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e273 d10892e231 ">
                                       <p>对等价变量</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e280" headers="d10892e228 ">
                                       <p>每当*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e280 d10892e231 ">
                                       <p>处理运行时错误</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="tblformal" id="GUID-16DB0425-F50A-4AF9-A522-69FA654DCB2D__GUID-7E97B04F-2A5F-4E56-B177-2EA45C65BC00">
                           <p class="titleintable">表2-2 <span class="italic"><span class="bold">嵌入式SQL语句</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="嵌入式SQL语句" width="100%" border="1" summary="embedded" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d10892e298">可执行的声明</th>
                                    <th align="left" valign="bottom" width="69%" id="d10892e301">目的</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e306" headers="d10892e298 ">
                                       <p>分配*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e306 d10892e301 ">
                                       <p>定义和控制Oracle数据</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e313" headers="d10892e298 ">
                                       <p>改变</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e313 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e320" headers="d10892e298 ">
                                       <p>分析</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e320 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e327" headers="d10892e298 ">
                                       <p>删除</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e327 d10892e301 ">
                                       <p>DML</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e334" headers="d10892e298 ">
                                       <p>插入</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e334 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e341" headers="d10892e298 ">
                                       <p>选择</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e341 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e348" headers="d10892e298 ">
                                       <p>UPDATE</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e348 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e355" headers="d10892e298 ">
                                       <p>承诺</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e355 d10892e301 ">
                                       <p>处理交易</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e362" headers="d10892e298 ">
                                       <p>ROLLBACK</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e362 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e369" headers="d10892e298 ">
                                       <p>SAVEPOINT</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e369 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e376" headers="d10892e298 ">
                                       <p>设置交易</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e376 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e384" headers="d10892e298 ">
                                       <p>描述*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e384 d10892e301 ">
                                       <p>要使用动态SQL</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e391" headers="d10892e298 ">
                                       <p>执行*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e391 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e398" headers="d10892e298 ">
                                       <p>准备*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e398 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e405" headers="d10892e298 ">
                                       <p>改变会话</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e405 d10892e301 ">
                                       <p>控制会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e412" headers="d10892e298 ">
                                       <p>设置角色</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e412 d10892e301 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d10892e419" headers="d10892e298 ">
                                       <p>*没有互动对手</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d10892e419 d10892e301 ">
                                       <p></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="LNPCC3065"></a><div class="props_rev_3"><a id="GUID-087CDE89-34DE-4748-9F2F-1472B62087B9" name="GUID-087CDE89-34DE-4748-9F2F-1472B62087B9"></a><h4 id="LNPCC-GUID-087CDE89-34DE-4748-9F2F-1472B62087B9" class="sect4"><span class="enumeration_section">2.1.2</span>嵌入式SQL语法</h4>
                  <div>
                     <p>在您的应用程序中，您可以自由地将完整的SQL语句与完整的C语句混合，并在SQL语句中使用C变量或结构。将SQL语句构建到宿主程序中的唯一特殊要求是，您可以使用关键字EXEC SQL开始它们，并以分号结束它们。Pro * C / C ++将所有EXEC SQL语句转换为对运行时库SQLLIB的调用。 <a id="d10892e435" class="indexterm-anchor"></a><a id="d10892e439" class="indexterm-anchor"></a><a id="d10892e443" class="indexterm-anchor"></a><a id="d10892e447" class="indexterm-anchor"></a><a id="d10892e449" class="indexterm-anchor"></a><a id="d10892e453" class="indexterm-anchor"></a> 
                     </p>
                     <p>许多嵌入式SQL语句与其交互式对应语句的区别仅在于添加了新子句或使用了程序变量。以下示例比较了交互式和嵌入式ROLLBACK语句： <a id="d10892e460" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">ROLLBACK WORK： - 交互式EXEC SQL ROLLBACK WORK; - 嵌入式</pre><p>这些语句具有相同的效果，但您可以在交互式SQL环境中使用第一个语句（例如在运行SQL * Plus时），在Pro * C / C ++程序中使用第二个语句。</p>
                  </div>
               </div><a id="LNPCC3066"></a><div class="props_rev_3"><a id="GUID-4D4A2927-9507-4002-8DF1-531B1C0DA3D5" name="GUID-4D4A2927-9507-4002-8DF1-531B1C0DA3D5"></a><h4 id="LNPCC-GUID-4D4A2927-9507-4002-8DF1-531B1C0DA3D5" class="sect4"><span class="enumeration_section">2.1.3</span>静态与动态SQL语句</h4>
                  <div>
                     <p>大多数应用程序旨在处理静态SQL语句和固定事务。在这种情况下，您可以在运行时知道每个SQL语句和事务的组成;也就是说，您知道将发出哪些SQL命令，哪些数据库表可能会更改，哪些列将更新，等等。</p>
                     <p>但是，某些应用程序可能需要在运行时接受和处理任何有效的SQL语句。因此，您可能直到运行时才知道所涉及的所有SQL命令，数据库表和列。</p>
                     <p><span class="italic">动态SQL</span>是一种高级编程技术，它允许程序在运行时接受或构建SQL语句，并对数据类型转换进行显式控制。 <a id="d10892e487" class="indexterm-anchor"></a><a id="d10892e491" class="indexterm-anchor"></a> 
                     </p>
                  </div>
               </div><a id="LNPCC3067"></a><div class="props_rev_3"><a id="GUID-71137E03-711B-40B3-ABDA-3728D4A9B2BF" name="GUID-71137E03-711B-40B3-ABDA-3728D4A9B2BF"></a><h4 id="LNPCC-GUID-71137E03-711B-40B3-ABDA-3728D4A9B2BF" class="sect4"><span class="enumeration_section">2.1.4</span>嵌入式PL / SQL块</h4>
                  <div>
                     <p>Pro * C / C ++将PL / SQL块视为单个嵌入式SQL语句。您可以将PL / SQL块放在可以放置SQL语句的应用程序中的任何位置。要在主机程序中嵌入PL / SQL，只需声明要与PL / SQL共享的变量，并将PL / SQL块与关键字EXEC SQL EXECUTE和END-EXEC括起来。</p>
                     <p>从嵌入式PL / SQL块，您可以灵活，安全地操作Oracle数据，因为PL / SQL支持所有SQL数据操作和事务处理命令。</p>
                  </div>
               </div><a id="LNPCC3068"></a><div class="props_rev_3"><a id="GUID-7A95FCD4-BFD1-4EC6-BBDB-1DBA9F464479" name="GUID-7A95FCD4-BFD1-4EC6-BBDB-1DBA9F464479"></a><h4 id="LNPCC-GUID-7A95FCD4-BFD1-4EC6-BBDB-1DBA9F464479" class="sect4"><span class="enumeration_section">2.1.5</span>主机和指标变量</h4>
                  <div>
                     <p>主机变量是Oracle与程序之间通信的关键。<span class="italic">主变量</span>是在C中声明并与Oracle共享的标量或聚合变量，这意味着您的程序和Oracle都可以引用其值。 <a id="d10892e527" class="indexterm-anchor"></a><a id="d10892e531" class="indexterm-anchor"></a><a id="d10892e533" class="indexterm-anchor"></a> 
                     </p>
                     <p>您的程序使用<span class="italic">输入</span>主机变量将数据传递给Oracle。Oracle使用<span class="italic">输出</span>主机变量将数据和状态信息传递给您的程序。程序为输入主变量赋值; Oracle将值分配给输出主机变量。 <a id="d10892e546" class="indexterm-anchor"></a> 
                     </p>
                     <p>主机变量可以在任何可以使用SQL表达式的地方使用。在SQL语句中，主机变量必须以冒号（:)为前缀，以使它们与SQL关键字区分开来。</p>
                     <p>您还可以使用C <span class="italic">结构</span>来包含许多主变量。当您在嵌入式SQL语句中命名结构（以冒号为前缀）时，Oracle将结构的每个组件用作主机变量。
                     </p>
                     <p>您可以将任何主机变量与可选的指示符变量相关联。<span class="italic">指示符变量</span>是一个短整数变量，用于“指示”其主变量的值或条件。您可以使用指示符变量将NULL分配给输入主变量，并检测输出主变量中的NULL或截断值。<span class="italic">NULL</span>是缺失，未知或不适用的值。 <a id="d10892e566" class="indexterm-anchor"></a><a id="d10892e570" class="indexterm-anchor"></a> 
                     </p>
                     <p>在SQL语句中，指示符变量必须以冒号为前缀，并紧跟其关联的主变量。关键字INDICATOR可以放在主变量和其指示符之间，以进一步清晰。</p>
                     <p>如果主变量打包在结构中，并且您想要使用指示符变量，则只需创建一个结构，该结构具有主机结构中每个主机变量的指示符变量，并在SQL语句中命名指示符结构，紧跟在宿主变量struct，以冒号为前缀。您还可以使用INDICATOR关键字分隔主机结构及其关联的指标结构。</p>
                  </div>
               </div><a id="LNPCC3069"></a><div class="props_rev_3"><a id="GUID-A2C15B76-75FC-41F9-95DD-8413A4E79ED9" name="GUID-A2C15B76-75FC-41F9-95DD-8413A4E79ED9"></a><h4 id="LNPCC-GUID-A2C15B76-75FC-41F9-95DD-8413A4E79ED9" class="sect4"><span class="enumeration_section">2.1.6</span> Oracle数据类型</h4>
                  <div>
                     <p>通常，主机程序将数据输入Oracle，Oracle将数据输出到程序。Oracle将输入数据存储在数据库表中，并将输出数据存储在程序主机变量中。要存储数据项，Oracle必须知道其<span class="italic">数据类型</span> ，该<span class="italic">数据类型</span>指定存储格式和有效值范围。 <a id="d10892e594" class="indexterm-anchor"></a><a id="d10892e598" class="indexterm-anchor"></a> 
                     </p>
                     <p>Oracle识别两种数据类型： <span class="italic">内部</span>和<span class="italic">外部</span> 。内部数据类型指定Oracle如何在数据库列中存储数据。Oracle还使用内部数据类型来表示数据库伪列，它返回特定数据项但不是表中的实际列。 <a id="d10892e611" class="indexterm-anchor"></a><a id="d10892e615" class="indexterm-anchor"></a> 
                     </p>
                     <p>外部数据类型指定数据在主机变量中的存储方式。当主机程序向Oracle输入数据时，如有必要，Oracle会在输入主机变量的外部数据类型与目标数据库列的内部数据类型之间进行转换。当Oracle将数据输出到主机程序时，如有必要，Oracle会在源数据库列的内部数据类型和输出主机变量的外部数据类型之间进行转换。 <a id="d10892e622" class="indexterm-anchor"></a> 
                     </p>
                  </div>
               </div><a id="LNPCC3070"></a><div class="props_rev_3"><a id="GUID-640C8415-A24C-4987-AFFC-2EB457690793" name="GUID-640C8415-A24C-4987-AFFC-2EB457690793"></a><h4 id="LNPCC-GUID-640C8415-A24C-4987-AFFC-2EB457690793" class="sect4"><span class="enumeration_section">2.1.7</span>数组</h4>
                  <div>
                     <p>Pro * C / C ++允许您定义数组主机变量（称为<span class="italic">主机数组）</span>和结构数组，并使用单个SQL语句对它们进行操作。使用数组SELECT，FETCH，DELETE，INSERT和UPDATE语句，您可以轻松查询和操作大量数据。您还可以在宿主变量<span class="bold">struct中</span>使用宿主数组。 <a id="d10892e644" class="indexterm-anchor"></a><a id="d10892e648" class="indexterm-anchor"></a> 
                     </p>
                  </div>
               </div><a id="LNPCC3071"></a><div class="props_rev_3"><a id="GUID-5B1BD408-2CB1-4C77-897A-522AD75BA9E4" name="GUID-5B1BD408-2CB1-4C77-897A-522AD75BA9E4"></a><h4 id="LNPCC-GUID-5B1BD408-2CB1-4C77-897A-522AD75BA9E4" class="sect4"><span class="enumeration_section">2.1.8</span>数据类型等价</h4>
                  <div>
                     <p>Pro * C / C ++通过让您使用<span class="italic">等价</span>数据类型为您的应用程序增加了灵活性。这意味着您可以自定义Oracle解释输入数据和格式化输出数据的方式。 <a id="d10892e667" class="indexterm-anchor"></a><a id="d10892e669" class="indexterm-anchor"></a><a id="d10892e673" class="indexterm-anchor"></a> 
                     </p>
                     <p>在逐个变量的基础上，您可以将支持的C数据类型等效于Oracle外部数据类型。您还可以将用户定义的数据类型等同于Oracle外部数据类型。</p>
                  </div>
               </div><a id="LNPCC3072"></a><div class="props_rev_3"><a id="GUID-DD5E0AD0-9BC0-4E9A-9504-7323516690D3" name="GUID-DD5E0AD0-9BC0-4E9A-9504-7323516690D3"></a><h4 id="LNPCC-GUID-DD5E0AD0-9BC0-4E9A-9504-7323516690D3" class="sect4"><span class="enumeration_section">2.1.9</span>私有SQL区域，游标和活动集</h4>
                  <div>
                     <p>为了处理SQL语句，Oracle打开了一个名为<span class="italic">私有SQL区域</span>的工作<span class="italic">区</span> 。私有SQL区域存储执行SQL语句所需的信息。称为<span class="italic">游标</span>的标识符允许您命名SQL语句，访问其私有SQL区域中的信息，并在某种程度上控制其处理。 <a id="d10892e698" class="indexterm-anchor"></a><a id="d10892e702" class="indexterm-anchor"></a><a id="d10892e706" class="indexterm-anchor"></a><a id="d10892e710" class="indexterm-anchor"></a> 
                     </p>
                     <p>对于静态SQL语句，有两种类型的游标： <span class="italic">隐式</span>和<span class="italic">显式</span> 。Oracle隐式声明所有数据定义和数据操作语句的游标，包括只返回一行的SELECT语句（查询）。但是，对于返回多行的查询，要处理超出第一行，必须显式声明游标（或使用主机数组）。
                     </p>
                     <p>返回的行集称为<span class="italic">活动集</span> ;它的大小取决于符合查询搜索条件的行数。您使用显式游标来标识当前正在处理的行，称为<span class="italic">当前行</span> 。 <a id="d10892e731" class="indexterm-anchor"></a><a id="d10892e735" class="indexterm-anchor"></a><a id="d10892e739" class="indexterm-anchor"></a><a id="d10892e743" class="indexterm-anchor"></a> 
                     </p>
                     <p>想象一下，这组行被返回到终端屏幕。屏幕光标可以指向要处理的第一行，然后指向下一行，依此类推。同样，显式游标“指向”活动集中的当前行。这允许您的程序一次处理一行。 <a id="d10892e750" class="indexterm-anchor"></a> 
                     </p>
                  </div>
               </div><a id="LNPCC3073"></a><div class="props_rev_3"><a id="GUID-2D4A0C70-F96C-4952-A1CC-CC799A0E35B0" name="GUID-2D4A0C70-F96C-4952-A1CC-CC799A0E35B0"></a><h4 id="LNPCC-GUID-2D4A0C70-F96C-4952-A1CC-CC799A0E35B0" class="sect4"><span class="enumeration_section">2.1.10</span>交易</h4>
                  <div>
                     <p><span class="italic">事务</span>是一系列逻辑上相关的SQL语句（例如，两个UPDATE，它们将一个银行帐户记入贷方并借记另一个银行帐户），Oracle将其视为一个单元，以便语句带来的所有更改都是永久性的或同时撤消的。 <a id="d10892e769" class="indexterm-anchor"></a><a id="d10892e773" class="indexterm-anchor"></a> 
                     </p>
                     <p>自上次执行数据定义，COMMIT或ROLLBACK语句以来执行的所有数据操作语句构成当前事务。 <a id="d10892e780" class="indexterm-anchor"></a> 
                     </p>
                     <p>为了帮助确保数据库的一致性，Pro * C / C ++允许您使用COMMIT，ROLLBACK和SAVEPOINT语句定义事务。 <a id="d10892e787" class="indexterm-anchor"></a> 
                     </p>
                     <p>COMMIT使当前事务期间所做的任何更改成为永久性的。ROLLBACK结束当前事务并撤消自事务开始以来所做的任何更改。SAVEPOINT标志着交易处理的当前点;与ROLLBACK一起使用，它撤消了部分交易。</p>
                  </div>
               </div><a id="LNPCC3074"></a><div class="props_rev_3"><a id="GUID-A2CEF7D8-E45C-4FE2-83CF-5F4097DE5D77" name="GUID-A2CEF7D8-E45C-4FE2-83CF-5F4097DE5D77"></a><h4 id="LNPCC-GUID-A2CEF7D8-E45C-4FE2-83CF-5F4097DE5D77" class="sect4"><span class="enumeration_section">2.1.11</span>错误和警告</h4>
                  <div>
                     <p>执行嵌入式SQL语句时，它会成功或失败，并可能导致错误或警告。您需要一种方法来处理这些结果。Pro * C / C ++提供了两种错误处理机制：SQL通信区域（SQLCA）和WHENEVER语句。 <a id="d10892e805" class="indexterm-anchor"></a> 
                     </p>
                     <p>SQLCA是您在主机程序中包含（或硬编码）的数据结构。它定义了Oracle用于将运行时状态信息传递给程序的程序变量。使用SQLCA，您可以根据Oracle对刚尝试的工作的反馈采取不同的操作。例如，您可以检查DELETE语句是否成功，如果是，则删除了多少行。 <a id="d10892e812" class="indexterm-anchor"></a><a id="d10892e817" class="indexterm-anchor"></a> 
                     </p>
                     <p>使用WHENEVER语句，您可以指定Oracle检测到错误或警告条件时要自动执行的操作。这些操作是：继续下一个语句，调用函数，分支到带标签的语句或停止。 <a id="d10892e822" class="indexterm-anchor"></a> 
                     </p>
                  </div>
               </div><a id="LNPCC3075"></a><div class="props_rev_3"><a id="GUID-CC717517-45E1-4467-9968-1DA2ECA0AFE1" name="GUID-CC717517-45E1-4467-9968-1DA2ECA0AFE1"></a><h4 id="LNPCC-GUID-CC717517-45E1-4467-9968-1DA2ECA0AFE1" class="sect4"><span class="enumeration_section">2.1.12</span> SQL99语法支持</h4>
                  <div>
                     <div class="section">
                        <p>SQL标准支持SQL应用程序在所有符合标准的软件产品中的可移植性。Oracle功能符合ANSI / ISO SQL99标准，包括符合ANSI标准的连接。Pro * C / C ++支持Oracle数据库支持的所有SQL99功能，这意味着支持SELECT，INSERT，DELETE和UPDATE语句的SQL99语法以及DECLARE CURSOR语句中的游标主体。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCC3077"></a><a id="LNPCC3076"></a><div class="props_rev_3"><a id="GUID-FD8F5219-FBFC-4735-8FA7-BD15C6FE7700" name="GUID-FD8F5219-FBFC-4735-8FA7-BD15C6FE7700"></a><h3 id="LNPCC-GUID-FD8F5219-FBFC-4735-8FA7-BD15C6FE7700" class="sect3"><span class="enumeration_section">2.2</span>开发嵌入式SQL应用程序的步骤</h3>
               <div>
                  <p><a href="precompiler-concepts.html#GUID-FD8F5219-FBFC-4735-8FA7-BD15C6FE7700__I4691">图2-1</a>显示了嵌入式SQL应用程序开发过程。
                  </p>
                  <div class="figure" id="GUID-FD8F5219-FBFC-4735-8FA7-BD15C6FE7700__I4691">
                     <p class="titleinfigure">图2-1嵌入式SQL应用程序开发过程</p><img src="img/lnpcc003.gif" alt="下面描述图2-1" title="下面描述图2-1" longdesc="img_text/lnpcc003.html"><br><a href="img_text/lnpcc003.html">“图2-1嵌入式SQL应用程序开发过程”的说明</a></div>
                  <!-- class="figure" -->
                  <p>如您所见，预编译会导致修改后的源文件可以正常编译。虽然预编译为传统开发过程增加了一个步骤，但该步骤可以让您编写非常灵活的应用程序。</p>
               </div>
            </div><a id="LNPCC3078"></a><div class="props_rev_3"><a id="GUID-A6D81B3A-AE64-4B6C-8E1B-C24AA2DE4B05" name="GUID-A6D81B3A-AE64-4B6C-8E1B-C24AA2DE4B05"></a><h3 id="LNPCC-GUID-A6D81B3A-AE64-4B6C-8E1B-C24AA2DE4B05" class="sect3"><span class="enumeration_section">2.3</span>编程指南</h3>
               <div>
                  <p>本节介绍嵌入式SQL语法，编码约定以及特定于C的功能和限制。主题按字母顺序排列，以供快速参考。 <a id="d10892e876" class="indexterm-anchor"></a><a id="d10892e878" class="indexterm-anchor"></a> 
                  </p>
               </div><a id="LNPCC3079"></a><div class="props_rev_3"><a id="GUID-6EC1F5E0-9EBA-41AC-9D75-A1227518D9B8" name="GUID-6EC1F5E0-9EBA-41AC-9D75-A1227518D9B8"></a><h4 id="LNPCC-GUID-6EC1F5E0-9EBA-41AC-9D75-A1227518D9B8" class="sect4"><span class="enumeration_section">2.3.1</span>评论</h4>
                  <div>
                     <p>您可以在可以放置空格的SQL语句中放置C样式的注释（/ * ... * /）（关键字EXEC SQL之间除外）。：在一行的末尾SQL语句<span class="italic">中</span> - （...），如下面的例子说明此外，您还可以将ANSI风格的评论</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT ENAME，SAL INTO：emp_name，：salary  - 输出主变量FROM EMP WHERE DEPTNO =：dept_number;</pre><p>如果使用CODE = CPP预编译器选项进行预编译，则可以在Pro * C / C ++源代码中使用C ++样式注释（//）。</p>
                  </div>
               </div><a id="LNPCC3080"></a><div class="props_rev_3"><a id="GUID-2102D647-ACCE-419E-87C4-FFF7B13A7AC1" name="GUID-2102D647-ACCE-419E-87C4-FFF7B13A7AC1"></a><h4 id="LNPCC-GUID-2102D647-ACCE-419E-87C4-FFF7B13A7AC1" class="sect4"><span class="enumeration_section">2.3.2</span>常数</h4>
                  <div>
                     <p><span class="italic">L</span>或<span class="italic">l</span>后缀指定<span class="bold">长</span>整数常量， <span class="italic">U</span>或<span class="italic">u</span>后缀指定<span class="bold">无符号</span>整数常量， <span class="italic">0X</span>或<span class="italic">0x</span>前缀指定十六进制整数常量， <span class="italic">F</span>或<span class="italic">f</span>后缀指定<span class="bold">浮点</span>浮点常量。这些形式<span class="italic">没有</span>在SQL语句中允许的。<a id="d10892e958" class="indexterm-anchor"></a></p>
                  </div>
               </div><a id="LNPCC3081"></a><div class="props_rev_3"><a id="GUID-87B2F714-0CC4-424F-8962-17E4515057D2" name="GUID-87B2F714-0CC4-424F-8962-17E4515057D2"></a><h4 id="LNPCC-GUID-87B2F714-0CC4-424F-8962-17E4515057D2" class="sect4"><span class="enumeration_section">2.3.3</span>声明部分</h4>
                  <div>
                     <p><span class="italic">Declare Section</span>包含宿主变量声明，其形式如下：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION; / *声明此部分内的所有主变量：* / char * uid =“ <span class="italic">username</span> / <span class="italic">password</span> ”; ...EXEC SQL END DECLARE SECTION;</pre><p>声明部分以声明开头<a id="d10892e997" class="indexterm-anchor"></a><a id="d10892e1001" class="indexterm-anchor"></a><a id="d10892e1005" class="indexterm-anchor"></a> ：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION;</pre><p>并以声明结束：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL END DECLARE SECTION;</pre><p>在这两个语句之间只允许以下内容：<a id="d10892e1018" class="indexterm-anchor"></a><a id="d10892e1022" class="indexterm-anchor"></a></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>主变量和指标变量声明</p>
                        </li>
                        <li>
                           <p>非主机C / C ++变量</p>
                        </li>
                        <li>
                           <p>EXEC SQL DECLARE语句</p>
                        </li>
                        <li>
                           <p>EXEC SQL INCLUDE语句</p>
                        </li>
                        <li>
                           <p>EXEC SQL VAR语句</p>
                        </li>
                        <li>
                           <p>EXEC SQL TYPE语句</p>
                        </li>
                        <li>
                           <p>EXEC ORACLE声明</p>
                        </li>
                        <li>
                           <p>C / C ++评论</p>
                        </li>
                     </ul>
                     <p>当MODE = ANSI或CODE = CPP（在C ++应用程序中）或PARSE = NONE或PARTIAL时，需要声明部分。</p>
                     <p>允许多个声明部分。它们可以位于不同的代码模块中。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="C-Plus-Plus-Applications.html#GUID-EDDF500B-2973-4D1B-AC10-4952AE29E44D">关于解析代码</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3082"></a><div class="props_rev_3"><a id="GUID-DF8F9DBF-5B91-4740-B733-4BF5B7DD9934" name="GUID-DF8F9DBF-5B91-4740-B733-4BF5B7DD9934"></a><h4 id="LNPCC-GUID-DF8F9DBF-5B91-4740-B733-4BF5B7DD9934" class="sect4"><span class="enumeration_section">2.3.4</span>分隔符</h4>
                  <div>
                     <p>而C使用单引号来分隔单个字符，如<a id="d10892e1075" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">ch = getchar（）; switch（ch）{case'U'：update（）;打破; case'I'：insert（）;打破; ...
</pre><p>SQL使用单引号来分隔字符串，如<a id="d10892e1083" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT ENAME，SAL from EMP WHERE JOB ='MANAGER';</pre><p>而C使用双引号来分隔字符串，如</p><pre class="oac_no_warn" dir="ltr">printf（“\ nG'Day，伙计！“）;</pre><p>SQL使用双引号来分隔包含特殊或小写字符的标识符，如<a id="d10892e1096" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL CREATE TABLE“Emp2”（empno number（4），...）;</pre></div>
               </div><a id="LNPCC3083"></a><div class="props_rev_3"><a id="GUID-1D43CD59-D2D1-4722-A691-26878019DA8B" name="GUID-1D43CD59-D2D1-4722-A691-26878019DA8B"></a><h4 id="LNPCC-GUID-1D43CD59-D2D1-4722-A691-26878019DA8B" class="sect4"><span class="enumeration_section">2.3.5</span>文件长度</h4>
                  <div>
                     <p>Pro * C / C ++无法处理任意长的源文件。允许的行数有限制。源文件的以下方面是文件大小约束的促成因素：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>嵌入式SQL语句的复杂性（例如，绑定和定义变量的数量）。</p>
                        </li>
                        <li>
                           <p>是否使用数据库名称（例如，使用AT子句连接到数据库）。</p>
                        </li>
                        <li>
                           <p>嵌入式SQL语句的数量。</p>
                        </li>
                     </ul>
                     <p>要防止与此限制相关的问题，请使用多个程序单元来充分减小源文件的大小。</p>
                  </div>
               </div><a id="LNPCC3084"></a><div class="props_rev_3"><a id="GUID-97CD4F7F-D2AB-4419-8A5D-1A69B779444D" name="GUID-97CD4F7F-D2AB-4419-8A5D-1A69B779444D"></a><h4 id="LNPCC-GUID-97CD4F7F-D2AB-4419-8A5D-1A69B779444D" class="sect4"><span class="enumeration_section">2.3.6</span>功能原型</h4>
                  <div>
                     <p>ANSI C标准（X3.159-1989）提供功能原型设计。<span class="italic">函数原型</span>声明函数及其参数的数据类型，以便C编译器可以检测缺少或不匹配的参数。
                     </p>
                     <p>可以在命令行或配置文件中输入的CODE选项确定预编译器生成C或C ++代码的方式。</p>
                  </div><a id="LNPCC3085"></a><div class="props_rev_3"><a id="GUID-83EA5389-2EE5-4361-BDC2-32BF6CC35F22" name="GUID-83EA5389-2EE5-4361-BDC2-32BF6CC35F22"></a><h5 id="LNPCC-GUID-83EA5389-2EE5-4361-BDC2-32BF6CC35F22" class="sect5"><span class="enumeration_section">2.3.6.1</span> ANSI_C</h5>
                     <div>
                        <p>使用CODE = ANSI_C预编译程序时，预编译器会生成完全原型化的函数声明。例如：</p><pre class="oac_no_warn" dir="ltr">extern void sqlora（long *，void *）;</pre></div>
                  </div><a id="LNPCC3086"></a><div class="props_rev_3"><a id="GUID-5951607A-A0FF-4AB3-AAC0-94883BA20D93" name="GUID-5951607A-A0FF-4AB3-AAC0-94883BA20D93"></a><h5 id="LNPCC-GUID-5951607A-A0FF-4AB3-AAC0-94883BA20D93" class="sect5"><span class="enumeration_section">2.3.6.2</span> KR_C</h5>
                     <div>
                        <p>当您使用选项CODE = KR_C（“Kernighan和Ritchie”的KR）进行预编译时，预编译器将以与ANSI_C相同的方式生成函数原型，但函数参数列表已被注释掉。例如：</p><pre class="oac_no_warn" dir="ltr">extern void sqlora（/ * _ long *，void * _ * /）;</pre><p>因此，如果使用不支持ANSI C的C编译器，请确保将预编译器选项CODE设置为KR_C。当CODE选项设置为ANSI_C时，预编译器还可以生成其他ANSI特定的构造;例如， <span class="bold">const</span>类型限定符。
                        </p>
                     </div>
                  </div><a id="LNPCC3087"></a><div class="props_rev_3"><a id="GUID-C2A6F990-4459-408F-871E-CE56C646B5A3" name="GUID-C2A6F990-4459-408F-871E-CE56C646B5A3"></a><h5 id="LNPCC-GUID-C2A6F990-4459-408F-871E-CE56C646B5A3" class="sect5"><span class="enumeration_section">2.3.6.3</span> CPP</h5>
                     <div>
                        <p>使用CODE = CPP进行编译时，将生成与C ++兼容的函数原型。将此选项设置与C ++编译器一起使用。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="C-Plus-Plus-Applications.html#GUID-320589F8-AE9F-4440-9551-1C52F449E486">C ++应用程序</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="LNPCC3088"></a><div class="props_rev_3"><a id="GUID-EAB9F967-C961-4A64-8F48-717DD6822F06" name="GUID-EAB9F967-C961-4A64-8F48-717DD6822F06"></a><h4 id="LNPCC-GUID-EAB9F967-C961-4A64-8F48-717DD6822F06" class="sect4"><span class="enumeration_section">2.3.7</span>提示长度</h4>
                  <div>
                     <p>嵌入式sql语句中sql提示的最大长度限制为256个字符。任何超过此限制的提示都将被截断。</p>
                  </div>
               </div><a id="LNPCC3089"></a><div class="props_rev_3"><a id="GUID-FCFB63F9-DEBF-4789-86A6-85C36C4F7EF2" name="GUID-FCFB63F9-DEBF-4789-86A6-85C36C4F7EF2"></a><h4 id="LNPCC-GUID-FCFB63F9-DEBF-4789-86A6-85C36C4F7EF2" class="sect4"><span class="enumeration_section">2.3.8</span>主机变量名称</h4>
                  <div>
                     <p>主机变量名称可以由大写或小写字母，数字和下划线组成，但必须以字母开头。它们可以是任意长度，但只有前31个字符对Pro * C / C ++很重要。您的C编译器或链接器可能需要更短的最大长度，因此请查看C编译器用户指南。<a id="d10892e1217" class="indexterm-anchor"></a></p>
                     <p>为了便于移植，您可能希望将主机变量名称的长度限制为18个或更少的字符（SQL标准规定的长度）。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="reserved-words-keywords-namespaces.html#GUID-F3AE31F8-2209-491E-A0FD-44F75C06C79C">保留字，关键字和命名空间</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3090"></a><div class="props_rev_3"><a id="GUID-14A55B4B-226D-41CF-96CC-7E1486088A93" name="GUID-14A55B4B-226D-41CF-96CC-7E1486088A93"></a><h4 id="LNPCC-GUID-14A55B4B-226D-41CF-96CC-7E1486088A93" class="sect4"><span class="enumeration_section">2.3.9</span>线路延续</h4>
                  <div>
                     <p>您可以从一行到下一行继续SQL语句。您必须使用反斜杠（\）将字符串文字从一行继续到下一行，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL INSERT INTO dept（deptno，dname）VALUES（50，'PURCHAS \ ING'）;</pre><p>在此上下文中，预编译器将反斜杠视为延续字符。</p>
                  </div>
               </div><a id="LNPCC3091"></a><div class="props_rev_3"><a id="GUID-9C3958D1-2545-439D-9D8E-10471D1EA5C2" name="GUID-9C3958D1-2545-439D-9D8E-10471D1EA5C2"></a><h4 id="LNPCC-GUID-9C3958D1-2545-439D-9D8E-10471D1EA5C2" class="sect4"><span class="enumeration_section">2.3.10</span>线长</h4>
                  <div>
                     <p>对于仅包含ASCII字符的行，最大行长度为1299;对于多字节字符，最大行长度为324。</p>
                  </div>
               </div><a id="LNPCC3092"></a><div class="props_rev_3"><a id="GUID-F038BE40-199B-45C0-9F67-0D61B57DE6C8" name="GUID-F038BE40-199B-45C0-9F67-0D61B57DE6C8"></a><h4 id="LNPCC-GUID-F038BE40-199B-45C0-9F67-0D61B57DE6C8" class="sect4"><span class="enumeration_section">2.3.11</span> MAXLITERAL默认值</h4>
                  <div>
                     <p>预编译器选项MAXLITERAL允许您指定预编译器生成的字符串文字的最大长度。MAXLITERAL默认值为1024。如果需要，请指定较小的值。例如，如果C编译器无法处理长度超过512个字符的字符串文字，则指定MAXLITERAL = 512。检查C编译器用户指南。 <a id="d10892e1282" class="indexterm-anchor"></a><a id="d10892e1286" class="indexterm-anchor"></a> 
                     </p>
                  </div>
               </div><a id="LNPCC3093"></a><div class="props_rev_3"><a id="GUID-121D1730-2650-44AB-8C12-88A27C4AD786" name="GUID-121D1730-2650-44AB-8C12-88A27C4AD786"></a><h4 id="LNPCC-GUID-121D1730-2650-44AB-8C12-88A27C4AD786" class="sect4"><span class="enumeration_section">2.3.12</span>运营商</h4>
                  <div>
                     <p>逻辑运算符和“等于”关系运算符在C和SQL中是不同的，如下面的列表所示。这些C运算符<span class="italic">不允许</span>在SQL语句<a id="d10892e1306" class="indexterm-anchor"></a> ： <a id="d10892e1311" class="indexterm-anchor"></a> 
                     </p>
                     <div class="tblformal" id="GUID-121D1730-2650-44AB-8C12-88A27C4AD786__GUID-A5944556-891C-4820-AB5C-F92F59E750C9">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="sql" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d10892e1324">SQL运算符</th>
                                 <th align="left" valign="bottom" width="71%" id="d10892e1327">C运营商</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1332" headers="d10892e1324 ">
                                    <p>不</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1332 d10892e1327 ">
                                    <p>！</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1339" headers="d10892e1324 ">
                                    <p>和</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1339 d10892e1327 ">
                                    <p>&amp;&amp;</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1346" headers="d10892e1324 ">
                                    <p>要么</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1346 d10892e1327 ">
                                    <p>||</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1353" headers="d10892e1324 ">
                                    <p>=</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1353 d10892e1327 ">
                                    <p>==</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>下面的C运营商也<span class="italic">不允许</span>在SQL语句：</p>
                     <div class="tblformal" id="GUID-121D1730-2650-44AB-8C12-88A27C4AD786__GUID-FAB34F5C-25A7-4094-9E11-07796149D004">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="C Operators not Allowed" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d10892e1372">类型</th>
                                 <th align="left" valign="bottom" width="71%" id="d10892e1375">C运营商</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1380" headers="d10892e1372 ">
                                    <p>地址</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1380 d10892e1375 ">
                                    <p>＆</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1387" headers="d10892e1372 ">
                                    <p>按位</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1387 d10892e1375 ">
                                    <p>＆，|，^，〜</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1394" headers="d10892e1372 ">
                                    <p>复合赋值</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1394 d10892e1375 ">
                                    <p>+ =， -  =，* =等等。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1401" headers="d10892e1372 ">
                                    <p>有条件的</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1401 d10892e1375 ">
                                    <p>？</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1408" headers="d10892e1372 ">
                                    <p>减量</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1408 d10892e1375 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1415" headers="d10892e1372 ">
                                    <p>增量</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1415 d10892e1375 ">
                                    <p>++</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1422" headers="d10892e1372 ">
                                    <p>间接</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1422 d10892e1375 ">
                                    <p>*</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1429" headers="d10892e1372 ">
                                    <p>系数</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1429 d10892e1375 ">
                                    <p>％</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10892e1436" headers="d10892e1372 ">
                                    <p>转移</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10892e1436 d10892e1375 ">
                                    <p>&gt;&gt;，&lt;&lt;</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="LNPCC3094"></a><div class="props_rev_3"><a id="GUID-A81DAF2C-3256-40C4-BDD3-A7072AE0A2A1" name="GUID-A81DAF2C-3256-40C4-BDD3-A7072AE0A2A1"></a><h4 id="LNPCC-GUID-A81DAF2C-3256-40C4-BDD3-A7072AE0A2A1" class="sect4"><span class="enumeration_section">2.3.13</span>语句终结<span class="enumeration_section">符</span></h4>
                  <div>
                     <p>嵌入式SQL语句始终以分号结束，如以下示例所示： <a id="d10892e1453" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL DELETE FROM emp WHERE deptno =：dept_number;</pre></div>
               </div>
            </div><a id="LNPCC3095"></a><div class="props_rev_3"><a id="GUID-BC13AAB1-EBB5-48C8-970B-9CE7F3B46BAB" name="GUID-BC13AAB1-EBB5-48C8-970B-9CE7F3B46BAB"></a><h3 id="LNPCC-GUID-BC13AAB1-EBB5-48C8-970B-9CE7F3B46BAB" class="sect3"><span class="enumeration_section">2.4</span>条件预编译</h3>
               <div>
                  <p>条件预编译包括（或排除）主机程序中基于特定条件的代码段。例如，您可能希望在UNIX下进行预编译时包含一段代码，而在VMS下进行预编译时则需要包含另一部分代码。条件预编译允许您编写可在不同环境中运行的程序。<a id="d10892e1471" class="indexterm-anchor"></a><a id="d10892e1475" class="indexterm-anchor"></a></p>
                  <p>条件的条件部分由定义环境和要采取的操作的语句标记。您可以在这些部分中编写C或C ++语句以及EXEC SQL语句。以下语句允许您对预编译执行条件控制：<a id="d10892e1479" class="indexterm-anchor"></a><a id="d10892e1481" class="indexterm-anchor"></a><a id="d10892e1483" class="indexterm-anchor"></a><a id="d10892e1485" class="indexterm-anchor"></a><a id="d10892e1487" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC ORACLE DEFINE符号; - 定义符号EXEC ORACLE IFDEF符号; - 如果符号定义为EXEC ORACLE IFNDEF符号; - 如果符号未定义EXEC ORACLE ELSE; - 否则EXEC ORACLE ENDIF; - 结束此控制块</pre><p>所有EXEC ORACLE语句必须以分号结束。</p>
               </div><a id="LNPCC3096"></a><div class="props_rev_3"><a id="GUID-6D3F3C33-FF03-4E64-BA6C-E67D8DB591DD" name="GUID-6D3F3C33-FF03-4E64-BA6C-E67D8DB591DD"></a><h4 id="LNPCC-GUID-6D3F3C33-FF03-4E64-BA6C-E67D8DB591DD" class="sect4"><span class="enumeration_section">2.4.1</span>符号定义</h4>
                  <div>
                     <div class="section">
                        <p>您可以通过两种方式定义符号。要么包括声明：</p><pre class="oac_no_warn" dir="ltr">EXEC ORACLE DEFINE符号;</pre><p>在您的主机程序中或使用以下语法在命令行上定义符号：</p><pre class="oac_no_warn" dir="ltr">...DEFINE =符号......
</pre><p><code class="codeph">symbol</code>不区分大小写。
                        </p>
                        <div class="infoboxnote" id="GUID-6D3F3C33-FF03-4E64-BA6C-E67D8DB591DD__GUID-7C700117-D67C-4C20-A145-4270750759B4">
                           <p class="notep1">注意：</p>
                           <p>#define预处理程序指令与EXEC ORACLE DEFINE语句不同。</p>
                        </div>
                        <p>在系统上安装Pro * C / C ++时，会为您预定义某些特定于端口的符号。例如，预定义的操作符号包括CMS，MVS，MS-DOS，UNIX和VMS。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC3097"></a><div class="props_rev_3"><a id="GUID-14EBEFC2-B510-4C38-B1AF-CC24673DD7AB" name="GUID-14EBEFC2-B510-4C38-B1AF-CC24673DD7AB"></a><h4 id="LNPCC-GUID-14EBEFC2-B510-4C38-B1AF-CC24673DD7AB" class="sect4"><span class="enumeration_section">2.4.2</span>示例SELECT语句</h4>
                  <div>
                     <div class="section">
                        <p>在以下示例中，仅在定义符号<code class="codeph">site2</code>时才预编译SELECT语句：</p><pre class="oac_no_warn" dir="ltr">EXEC ORACLE IFDEF site2; EXEC SQL SELECT DNAME INTO：dept_name FROM DEPT WHERE DEPTNO =：dept_number; EXEC ORACLE ENDIF;</pre><p>您可以通过将它放在IFDEF和ENDIF之间而<span class="bold">不是</span>定义符号来“注释掉”C，C ++或嵌入式SQL代码。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCC3098"></a><div class="props_rev_3"><a id="GUID-49BB504E-8B72-44F5-B028-384678A576E9" name="GUID-49BB504E-8B72-44F5-B028-384678A576E9"></a><h3 id="LNPCC-GUID-49BB504E-8B72-44F5-B028-384678A576E9" class="sect3"><span class="enumeration_section">2.5</span>单独预编译</h3>
               <div>
                  <p>您可以单独预编译多个C或C ++程序模块，然后将它们链接到一个可执行程序中。这支持模块化编程，当程序的功能组件由不同的程序员编写和调试时，这是必需的。各个程序模块不需要用同一种语言编写。<a id="d10892e1576" class="indexterm-anchor"></a></p>
               </div><a id="LNPCC3099"></a><div class="props_rev_3"><a id="GUID-066E80E9-4FB8-49EA-95CA-3D77581FDC44" name="GUID-066E80E9-4FB8-49EA-95CA-3D77581FDC44"></a><h4 id="LNPCC-GUID-066E80E9-4FB8-49EA-95CA-3D77581FDC44" class="sect4"><span class="enumeration_section">2.5.1</span>指南</h4>
                  <div>
                     <p>以下指南将帮助您避免一些常见问题。 <a id="d10892e1591" class="indexterm-anchor"></a><a id="d10892e1595" class="indexterm-anchor"></a> 
                     </p>
                  </div><a id="LNPCC3100"></a><div class="props_rev_3"><a id="GUID-B8ECAD5C-0545-4CC4-A89A-F951C1FE85C3" name="GUID-B8ECAD5C-0545-4CC4-A89A-F951C1FE85C3"></a><h5 id="LNPCC-GUID-B8ECAD5C-0545-4CC4-A89A-F951C1FE85C3" class="sect5"><span class="enumeration_section">2.5.1.1</span>引用游标</h5>
                     <div>
                        <div class="section">
                           <p>游标名称是SQL标识符，其范围是预编译单元。因此，游标操作不能跨越预编译单元（文件）。也就是说，你不能在一个文件中DECLARE游标，而在另一个文件中将它从OPEN或FETCH中删除。因此，在进行单独的预编译时，请确保对给定游标的所有定义和引用都在一个文件中。<a id="d10892e1612" class="indexterm-anchor"></a><a id="d10892e1616" class="indexterm-anchor"></a><a id="d10892e1620" class="indexterm-anchor"></a><a id="d10892e1624" class="indexterm-anchor"></a></p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC3101"></a><div class="props_rev_3"><a id="GUID-1EF746DF-9513-40F9-AF05-32FD8D96C8A3" name="GUID-1EF746DF-9513-40F9-AF05-32FD8D96C8A3"></a><h5 id="LNPCC-GUID-1EF746DF-9513-40F9-AF05-32FD8D96C8A3" class="sect5"><span class="enumeration_section">2.5.1.2</span>指定MAXOPENCURORS</h5>
                     <div>
                        <div class="section">
                           <p>预编译CONNECT到Oracle的程序模块时，请为MAXOPENCURSORS指定一个足以支持任何程序模块的值。如果将MAXOPENCURSORS用于另一个不执行CONNECT的程序模块，则忽略MAXOPENCURSORS的该值。在运行时仅使用对CONNECT有效的值。 <a id="d10892e1638" class="indexterm-anchor"></a><a id="d10892e1642" class="indexterm-anchor"></a> 
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC3102"></a><div class="props_rev_3"><a id="GUID-FFF3BE6C-7CB4-4999-89BA-4726E8BEA3EE" name="GUID-FFF3BE6C-7CB4-4999-89BA-4726E8BEA3EE"></a><h5 id="LNPCC-GUID-FFF3BE6C-7CB4-4999-89BA-4726E8BEA3EE" class="sect5"><span class="enumeration_section">2.5.1.3</span>使用单个SQLCA</h5>
                     <div>
                        <div class="section">
                           <p>如果只想使用一个SQLCA，则必须在其中一个程序模块中将其声明为全局，而在其他模块中将其声明为外部。使用<span class="italic">extern</span> <span class="bold"> </span>存储类，以及您的代码中的以下定义：<a id="d10892e1667" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">#define SQLCA_STORAGE_CLASS extern</pre><p>它告诉预编译器在另一个程序模块中查找SQLCA。除非您将SQLCA声明为外部，否则每个程序模块都使用自己的本地SQLCA。 <a id="d10892e1675" class="indexterm-anchor"></a><a id="d10892e1679" class="indexterm-anchor"></a> 
                           </p>
                           <div class="infoboxnote" id="GUID-FFF3BE6C-7CB4-4999-89BA-4726E8BEA3EE__GUID-310A5CAD-A4F9-4421-9C46-E917C7760E5E">
                              <p class="notep1">注意：</p>
                              <p>应用程序中的所有源文件必须唯一命名，否则将生成错误。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="LNPCC3103"></a><div class="props_rev_3"><a id="GUID-AF899068-4009-4F45-ACE3-124C8BD4B0DB" name="GUID-AF899068-4009-4F45-ACE3-124C8BD4B0DB"></a><h3 id="LNPCC-GUID-AF899068-4009-4F45-ACE3-124C8BD4B0DB" class="sect3"><span class="enumeration_section">2.6</span>编译和链接</h3>
               <div>
                  <p>要获取可执行程序，必须编译预编译器生成的输出<code class="codeph">.c</code>源文件，然后将生成的对象模块与SQLLIB和系统特定的Oracle库所需的模块相链接。如果要混合预编译器代码和OCI调用，请确保还链接到OCI运行时库（UNIX系统上的<code class="codeph">liboci.a</code> ）。 <a id="d10892e1705" class="indexterm-anchor"></a><a id="d10892e1707" class="indexterm-anchor"></a> 
                  </p>
                  <p>链接器解析对象模块中的符号引用。如果这些引用冲突，则链接失败。当您尝试将第三方软件链接到预编译程序时，可能会发生这种情况。并非所有第三方软件都与Oracle兼容。因此，链接您的<span class="italic">共享</span>程序可能会导致一个模糊的问题。在某些情况下，链接<span class="italic">独立</span>或<span class="italic">双任务</span>可能会解决问题。<a id="d10892e1721" class="indexterm-anchor"></a><a id="d10892e1725" class="indexterm-anchor"></a></p>
                  <p>编译和链接取决于系统。在大多数平台上，提供了示例<span class="italic">makefile</span>或批处理文件，可用于预编译，编译和链接Pro * C / C ++应用程序。请参阅特定于系统的文档。 <a id="d10892e1734" class="indexterm-anchor"></a> 
                  </p>
               </div>
            </div><a id="LNPCC3104"></a><div class="props_rev_3"><a id="GUID-034B6416-444A-4EF1-9078-35F5A86CF1D9" name="GUID-034B6416-444A-4EF1-9078-35F5A86CF1D9"></a><h3 id="LNPCC-GUID-034B6416-444A-4EF1-9078-35F5A86CF1D9" class="sect3"><span class="enumeration_section">2.7</span>示例表</h3>
               <div>
                  <p>本指南中的大多数编程示例使用两个示例数据库表：DEPT和EMP。他们的定义如下：<a id="d10892e1748" class="indexterm-anchor"></a><a id="d10892e1752" class="indexterm-anchor"></a><a id="d10892e1756" class="indexterm-anchor"></a><a id="d10892e1758" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">CREATE TABLE DEPT（DEPTNO NUMBER（2）NOT NULL，DNAME VARCHAR2（14），LOC VARCHAR2（13））CREATE TABLE EMP（EMPNO NUMBER（4）NOT NULL，ENAME VARCHAR2（10），JOB VARCHAR2（9），MGR NUMBER （4），HIREDATE DATE，SAL NUMBER（7,2），COMM COMMBER（7,2），DEPTNO NUMBER（2））</pre></div><a id="LNPCC3105"></a><div class="props_rev_3"><a id="GUID-174C54B4-9036-44EA-9A31-DE23A1F5352B" name="GUID-174C54B4-9036-44EA-9A31-DE23A1F5352B"></a><h4 id="LNPCC-GUID-174C54B4-9036-44EA-9A31-DE23A1F5352B" class="sect4"><span class="enumeration_section">2.7.1</span>示例数据</h4>
                  <div>
                     <p>DEPT和EMP表分别包含以下行</p>
                     <p>数据的：</p><pre class="oac_no_warn" dir="ltr">DEPTNO DNAME LOC ------- ---------- --------- 10会计纽约20研究DALLAS 30销售芝加哥40运营波士顿EMPNO ENAME JOB MGR HIREDATE SAL COMM DEPTNO ----- ------- --------- ------ --------- ------ ------  - ----- 7369 SMITH CLERK 7902 17-DEC-80 800 20 7499 ALLEN SALESMAN 7698 20-FEB-81 1600 300 30 7521 WARD SALESMAN 7698 22-FEB-81 1250 500 30 7566 JONES MANAGER 7839 02-APR-81 2975 20 7654 MARTIN SALESMAN 7698 28-SEP-81 1250 1400 30 7698 BLAKE MANAGER 7839 01-MAY-81 2850 30 7782 CLARK MANAGER 7839 09-JUN-81 2450 10 7788 SCOTT ANALYST 7566 19-APR-87 3000 20 7839 KING PRESIDENT 17 -NOV-81 5000 10 7844 TURNER SALESMAN 7698 08-SEP-81 1500 30 7876 ADAMS CLERK 7788 23-MAY-87 1100 20 7900 JAMES CLERK 7698 03-DEC-81 950 30 7902 FORD ANALYST 7566 03-DEC-81 3000 20 7934 MILLER CLERK 7782 23-JAN-82 1300 10</pre></div>
               </div>
            </div><a id="LNPCC3106"></a><div class="props_rev_3"><a id="GUID-CB0B7383-88DB-4580-B908-857A7FC201D0" name="GUID-CB0B7383-88DB-4580-B908-857A7FC201D0"></a><h3 id="LNPCC-GUID-CB0B7383-88DB-4580-B908-857A7FC201D0" class="sect3"><span class="enumeration_section">2.8</span>示例程序：简单查询</h3>
               <div>
                  <div class="section">
                     <p>熟悉Pro * C / C ++和嵌入式SQL的一种方法是研究程序示例。以下程序也可以在Pro * C / C ++ <code class="codeph">demo</code>目录的<code class="codeph">sample1.pc</code>文件中在线获得。
                     </p>
                     <p>程序连接到Oracle，然后循环，提示用户输入员工编号。它在数据库中查询员工的姓名，工资和佣金，显示信息，然后继续循环。信息将返回到主机结构。还有一个并行指示器结构，用于指示SELECTed的任何输出值是否为NULL。</p>
                     <p>使用预编译器选项MODE = ORACLE预编译示例程序。<a id="d10892e1805" class="indexterm-anchor"></a></p>
                     <div class="infoboxnote" id="GUID-CB0B7383-88DB-4580-B908-857A7FC201D0__GUID-6A45CFA8-8372-45C8-88DE-6F6F5C6B941D">
                        <p class="notep1">注意：</p>
                        <p>为了简化演示此功能，此示例不执行已部署系统通常使用的密码管理技术。在生产环境中，请遵循Oracle数据库密码管理准则，并禁用任何示例帐户。有关密码管理指南和其他安全建议，请参阅<a href="../dbseg/managing-security-for-application-developers.html#DBSEG50053" target="_blank"><span class="italic">Oracle数据库安全指南</span></a> 。
                        </p>
                     </div><pre class="oac_no_warn" dir="ltr">/ * * sample1.pc * *提示用户输入员工编号*，然后在emp表中查询员工的姓名，工资和佣金。如果佣金为NULL，则使用indicator *变量（在指标结构中）来确定*。 * * / #include &lt;stdio.h&gt; #include &lt;string.h&gt; / *定义VARCHAR长度的常量。* / #define UNAME_LEN 20 #define PWD_LEN 40 / *声明变量。如果MODE = ORACLE，则不需要声明部分。* / VARCHAR用户名[UNAME_LEN]; / * VARCHAR是Oracle提供的struct * / varchar密码[PWD_LEN]; / * varchar也可以是小写。* / / *为SELECT语句的输出值定义主机结构。* / struct {VARCHAR emp_name [UNAME_LEN];浮动工资;浮动佣金; } emprec; / *定义一个指示符结构，以对应于主机输出结构。* / struct {short emp_name_ind;短sal_ind;简短的comm_ind; } emprec_ind; / *输入主变量。* / int emp_number; int total_queried; / *包括SQL通信区域。您可以使用#include或EXEC SQL INCLUDE。 * / #include &lt;sqlca.h&gt; / *声明错误处理函数。* / void sql_error（）; main（）{char temp_char [32]; / *连接到ORACLE-- *将用户名复制到VARCHAR。 * / strncpy（（char *）username.arr，“SCOTT”，UNAME_LEN）; / *设置VARCHAR的长度组件。 * / username.len = strlen（（char *）username.arr）; / *复制密码。* / strncpy（（char *）password.arr，“TIGER”，PWD_LEN）; password.len = strlen（（char *）password.arr）; / *将sql_error（）注册为错误处理程序。* / EXEC SQL WHENEVER SQLERROR DO sql_error（“ORACLE error  -  \ n”）; / *连接到ORACLE。如果连接到默认数据库时发生错误，程序将调用sql_error（）*。* / EXEC SQL CONNECT：用户名IDENTIFIED BY：密码; printf（“\ n以用户身份连接到ORACLE：％s \ n”，username.arr）; / *循环，选择个别员工的结果* / total_queried = 0; for（;;）{/ *当发生* 1403（“无数据发现”）条件时，突破内循环。* / EXEC SQL WHENEVER NOT FOUND DO break; for（;;）{emp_number = 0; printf（“\ n输入员工编号（0退出）：”）;得到（temp_char）; emp_number = atoi（temp_char）; if（emp_number == 0）中断; EXEC SQL SELECT ename，sal，NVL（comm，0）INTO：emprec INDICATOR：emprec_ind FROM EMP WHERE EMPNO =：emp_number; / *打印数据。* / printf（“\ n \ nEmployee \ tSalary \ t \ tCommission \ n”）;的printf（ “-------- \吨------ \吨\吨---------- \ n”）; / * Null-终止输出字符串数据。* / emprec.emp_name.arr [emprec.emp_name.len] ='\ 0'; printf（“％ -  8s \ t％6.2f \ t \ t”，emprec.emp_name.arr，emprec.salary）; if（emprec_ind.comm_ind == -1）printf（“NULL \ n”）; else printf（“％6.2f \ n”，emprec.commission）; total_queried ++; } / * end inner for（;;）* / if（emp_number == 0）break; printf（“\ n没有有效的员工编号 - 再试一次。\ n”）; } / * end outer for（;;）* / printf（“\ n \ n返回的总行数为％d。\ n”，total_queried）;的printf（ “\ nG'day \ n \ n \ n”）; / *断开与ORACLE的连接。 * / EXEC SQL COMMIT WORK RELEASE;出口（0）; } void sql_error（msg）char * msg; {char err_msg [128]; int buf_len，msg_len; EXEC SQL WHENEVER SQLERROR CONTINUE; printf（“\ n％s \ n”，msg）; buf_len = sizeof（err_msg）; sqlglm（err_msg，＆buf_len，＆msg_len）; if（msg_len&gt; buf_len）msg_len = buf_len; printf（“％。* s \ n”，msg_len，err_msg）; EXEC SQL ROLLBACK RELEASE;出口（1）; }</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNPCC3107"></a><div class="props_rev_3"><a id="GUID-AA2ACB44-9A2F-4C91-9766-7369D6177939" name="GUID-AA2ACB44-9A2F-4C91-9766-7369D6177939"></a><h3 id="LNPCC-GUID-AA2ACB44-9A2F-4C91-9766-7369D6177939" class="sect3"><span class="enumeration_section">2.9</span>示例程序：使用SQL99语法的简单查询</h3>
               <div>
                  <div class="section">
                     <p>此程序与前面的示例类似，但对SELECT，INSERT，DELETE和UPDATE语句使用SQL99语法，并且支持DECLARE CURSOR语句中的游标主体。</p>
                     <p>使用预编译器选项MODE = ORACLE预编译示例程序。<a id="d10892e1834" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">/ * * sql99.pc * *提示用户输入员工编号*，然后在emp表中查询员工的姓名，工资和部门。* * / #include &lt;stdio.h&gt; #include &lt;string.h&gt; #include &lt;stdlib.h&gt; #include &lt;sqlda.h&gt; #include &lt;sqlcpr.h&gt;。/ *定义VARCHAR长度的常量。* / #define UNAME_LEN 30 #define PWD_LEN 40 / *声明变量。如果MODE = ORACLE，则不需要声明部分。 * / VARCHAR用户名[UNAME_LEN]; / * VARCHAR是Oracle提供的struct * / varchar密码[PWD_LEN]; / * varchar也可以是小写。* / / *为SELECT语句的输出值定义主机结构。* / struct {VARCHAR emp_name [UNAME_LEN];浮动工资; VARCHAR dept_name [UNAME_LEN]; } emprec; / *定义一个指示符结构，以对应于主机输出结构。* / struct {short emp_name_ind;短sal_ind; short dept_name; } emprec_ind; / *输入主变量。* / int emp_number; int total_queried; / *包括SQL通信区域。您可以使用#include或EXEC SQL INCLUDE。 * / #include &lt;sqlca.h&gt; / *声明错误处理函数。* / void sql_error（msg）char * msg; {char err_msg [128]; size_t buf_len，msg_len; EXEC SQL WHENEVER SQLERROR CONTINUE; printf（“\ n％s \ n”，msg）; buf_len = sizeof（err_msg）; sqlglm（err_msg，＆buf_len，＆msg_len）; printf（“％。* s \ n”，msg_len，err_msg）; EXEC SQL ROLLBACK RELEASE;出口（EXIT_FAILURE）; } void main（）{char temp_char [32]; / *连接到ORACLE-- *将用户名复制到VARCHAR。 * / strncpy（（char *）username.arr，“scott”，UNAME_LEN）; / *设置VARCHAR的长度组件。 * / username.len =（unsigned short）strlen（（char *）username.arr）; / *复制密码。* / strncpy（（char *）password.arr，“tiger”，PWD_LEN）; password.len =（unsigned short）strlen（（char *）password.arr）; / *将sql_error（）注册为错误处理程序。* / EXEC SQL WHENEVER SQLERROR DO sql_error（“ORACLE error  -  \ n”）; / *连接到ORACLE。如果连接到默认数据库时发生错误，程序将调用sql_error（）*。* / EXEC SQL CONNECT：用户名IDENTIFIED BY：密码; printf（“\ n以用户身份连接到ORACLE：％s \ n”，username.arr）; / *循环，选择个别员工的结果* / total_queried = 0; for（;;）{emp_number = 0; printf（“\ n输入员工编号（0退出）：”）;得到（temp_char）; emp_number = atoi（temp_char）; if（emp_number == 0）中断; / *当* 1403（“未找到数据”）条件发生时，转移到notfound标签。* / EXEC SQL WHENEVER NOT FOUND GOTO notfound; <span class="bold">/ *以下查询使用SQL99语法 -  RIGHT OUTER JOIN * /</span> EXEC SQL SELECT e.ename，e.sal，d.dname INTO：emprec INDICATOR：emprec_ind FROM EMP e RIGHT OUTER JOIN dept d ON e.deptno = d.deptno在哪里EMPNO =：emp_number; / *打印数据。* / printf（“\ n \ n雇员薪资部门名称\ n”）; printf（“-------- ------- ------------------ \ n”）; / * Null-终止输出字符串数据。* / emprec.emp_name.arr [emprec.emp_name.len] ='\ 0'; emprec.dept_name.arr [emprec.dept_name.len] = '\ 0'; printf（“％s％7.2f％s”，emprec.emp_name.arr，emprec.salary，emprec.dept_name.arr）; total_queried ++;继续; notfound：printf（“\ n没有有效的员工编号 - 再试一次。\ n”）; } printf（“\ n \ n返回的总行数为％d。\ n”，total_queried）;的printf（ “\ nG'day \ n \ n \ n”）; / *断开与ORACLE的连接。 * / EXEC SQL ROLLBACK工作版;出口（EXIT_SUCCESS）; }</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
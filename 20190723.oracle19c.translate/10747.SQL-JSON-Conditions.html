<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>SQL/JSON Conditions</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="XML-Conditions.html" title="Previous" type="text/html">
      <link rel="next" href="Compound-Conditions.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="XML-Conditions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="Compound-Conditions.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Conditions.html" property="item" typeof="WebPage"><span property="name"> Conditions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQL/JSON Conditions</li>
            </ol>
            <a id="GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63" name="GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63"></a><a id="SQLRF57035"></a><a id="SQLRF56660"></a>
            
            <h2 id="SQLRF-GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63" class="sect2">SQL/JSON Conditions</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>SQL/JSON conditions allow you to test JavaScript Object Notation (JSON) data as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="SQL-JSON-Conditions.html#GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA">IS JSON Condition</a> lets you test whether an expression is syntactically correct JSON data
                        </p>
                     </li>
                     <li>
                        <p><a href="SQL-JSON-Conditions.html#GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988">JSON_EXISTS Condition</a> lets you test whether a specified JSON value exists in JSON data
                        </p>
                     </li>
                     <li>
                        <p><a href="SQL-JSON-Conditions.html#GUID-DEF7941B-1267-44E7-8514-5CD448503179">JSON_TEXTCONTAINS Condition</a> lets you test whether a specified character string exists in JSON property values.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63__GUID-D762B6B3-E13E-488D-8145-C07A4B60FD81"><span class="italic">JSON_condition</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63__GUID-19BD5A21-0160-41BD-85C3-7C237BDC725F"><img src="img/json_condition.gif" alt="Description of json_condition.eps follows" title="Description of json_condition.eps follows" longdesc="img_text/json_condition.html"><br><a href="img_text/json_condition.html">Description of the illustration json_condition.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
            </div><a id="SQLRF56662"></a><a id="SQLRF56663"></a><a id="SQLRF57000"></a><a id="SQLRF57001"></a><a id="SQLRF57002"></a><a id="SQLRF56661"></a><div class="props_rev_3"><a id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA" name="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA"></a><h3 id="SQLRF-GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA" class="sect3">IS JSON Condition</h3>
               <div>
                  <div class="section">
                     <p>Use this SQL/JSON condition to test whether an expression is syntactically correct, or well-formed, JSON data.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If you specify <code class="codeph">IS</code> <code class="codeph">JSON</code>, then this condition returns <code class="codeph">TRUE</code> if the expression is well-formed JSON data and <code class="codeph">FALSE</code> if the expression is not well-formed JSON data.
                           </p>
                        </li>
                        <li>
                           <p>If you specify <code class="codeph">IS</code> <code class="codeph">NOT</code> <code class="codeph">JSON</code>, then this condition returns <code class="codeph">TRUE</code> if the expression is not well-formed JSON data and <code class="codeph">FALSE</code> if the expression is well-formed JSON data.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-DDB45343-8469-4BFD-9234-F35F953901A0"><span class="italic">is_JSON_condition</span>::=
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="figure" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-87340E4C-85B0-4AF9-A7EC-62C4E0F48E50"><img src="img/is_json_condition.gif" alt="Description of is_json_condition.eps follows" title="Description of is_json_condition.eps follows" longdesc="img_text/is_json_condition.html"><br><a href="img_text/is_json_condition.html">Description of the illustration is_json_condition.eps</a></div>
                     <!-- class="figure" -->
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use <span class="italic"><code class="codeph">expr</code></span> to specify the JSON data to be evaluated. Specify an expression that evaluates to a text literal. If <span class="italic"><code class="codeph">expr</code></span> is a column, then the column must be of data type <code class="codeph">VARCHAR2</code>, <code class="codeph">CLOB</code>, or <code class="codeph">BLOB</code>. If <span class="italic"><code class="codeph">expr</code></span> evaluates to null or a text literal of length zero, then this condition returns <code class="codeph">UNKNOWN</code>.
                           </p>
                        </li>
                        <li>
                           <p>You must specify <code class="codeph">FORMAT</code> <code class="codeph">JSON</code> if <span class="italic"><code class="codeph">expr</code></span> is a column of data type <code class="codeph">BLOB</code>.
                           </p>
                        </li>
                        <li>
                           <p>If you specify <code class="codeph">STRICT</code>, then this condition considers only strict JSON syntax to be well-formed JSON data. If you specify <code class="codeph">LAX</code>, then this condition also considers lax JSON syntax to be well-formed JSON data. The default is <code class="codeph">LAX</code>. Refer to <a href="../adjsn/conditions-is-json-and-is-not-json.html#ADJSN-GUID-1B6CFFBE-85FE-41DD-BA14-DD1DE73EAB20" target="_blank"><span><cite>Oracle Database JSON Developer’s Guide</cite></span></a> for more information on strict and lax JSON syntax.
                           </p>
                        </li>
                        <li>
                           <p>If you specify <code class="codeph">WITH</code> <code class="codeph">UNIQUE</code> <code class="codeph">KEYS</code>, then this condition considers JSON data to be well-formed only if key names are unique within each object. If you specify <code class="codeph">WITHOUT</code> <code class="codeph">UNIQUE</code> <code class="codeph">KEYS</code>, then this condition considers JSON data to be well-formed even if duplicate key names occur within an object. A <code class="codeph">WITHOUT</code> <code class="codeph">UNIQUE</code> <code class="codeph">KEYS</code> test performs faster than a <code class="codeph">WITH</code> <code class="codeph">UNIQUE</code> <code class="codeph">KEYS</code> test. The default is <code class="codeph">WITHOUT</code> <code class="codeph">UNIQUE</code> <code class="codeph">KEYS</code>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-1F739CF9-CCB4-47D3-A0D1-B384547730DC">Examples</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-966983C1-E6D4-4C7A-9728-2AACF89A6811">Testing for STRICT or LAX JSON Syntax: Example</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The following statement creates table <code class="codeph">t</code> with column <code class="codeph">col1</code>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE t (col1 VARCHAR2(100));
</pre><p>The following statements insert values into column <code class="codeph">col1</code> of table <code class="codeph">t</code>:
                     </p><pre class="oac_no_warn" dir="ltr">INSERT INTO t VALUES ( '[ "LIT192", "CS141", "HIS160" ]' );
INSERT INTO t VALUES ( '{ "Name": "John" }' );
INSERT INTO t VALUES ( '{ "Grade Values" : { A : 4.0, B : 3.0, C : 2.0 } }');
INSERT INTO t VALUES ( '{ "isEnrolled" : true }' );
INSERT INTO t VALUES ( '{ "isMatriculated" : False }' );
INSERT INTO t VALUES (NULL);
INSERT INTO t VALUES ('This is not well-formed JSON data');
</pre><p>The following statement queries table <code class="codeph">t</code> and returns <code class="codeph">col1</code> values that are well-formed JSON data. Because neither the <code class="codeph">STRICT</code> nor <code class="codeph">LAX</code> keyword is specified, this example uses the default <code class="codeph">LAX</code> setting. Therefore, this query returns values that use strict or lax JSON syntax.
                     </p><pre class="oac_no_warn" dir="ltr">SELECT col1
  FROM t
  WHERE col1 IS JSON;

COL1
--------------------------------------------------
[ "LIT192", "CS141", "HIS160" ]
{ "Name": "John" }
{ "Grade Values" : { A : 4.0, B : 3.0, C : 2.0 } }
{ "isEnrolled" : true }
{ "isMatriculated" : False }
</pre><p>The following statement queries table <code class="codeph">t</code> and returns <code class="codeph">col1</code> values that are well-formed JSON data. This example specifies the <code class="codeph">STRICT</code> setting. Therefore, this query returns only values that use strict JSON syntax.
                     </p><pre class="oac_no_warn" dir="ltr">SELECT col1
  FROM t
  WHERE col1 IS JSON STRICT;

COL1
--------------------------------------------------
[ "LIT192", "CS141", "HIS160" ]
{ "Name": "John" }
{ "isEnrolled" : true }
</pre><p>The following statement queries table <code class="codeph">t</code> and returns <code class="codeph">col1</code> values that use lax JSON syntax, but omits <code class="codeph">col1</code> values that use strict JSON syntax. Therefore, this query returns only values that contain the exceptions allowed in lax JSON syntax.
                     </p><pre class="oac_no_warn" dir="ltr">SELECT col1
  FROM t
  WHERE col1 IS NOT JSON STRICT AND col1 IS JSON LAX;

COL1
--------------------------------------------------
{ "Grade Values" : { A : 4.0, B : 3.0, C : 2.0 } }
{ "isMatriculated" : False }</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-9DD05BF0-37C8-4AFB-B6CB-EA13DB17DEE3">Testing for Unique Keys: Example</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The following statement creates table <code class="codeph">t</code> with column <code class="codeph">col1</code>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE t (col1 VARCHAR2(100));
</pre><p>The following statements insert values into column <code class="codeph">col1</code> of table <code class="codeph">t</code>:
                     </p><pre class="oac_no_warn" dir="ltr">INSERT INTO t VALUES ('{a:100, b:200, c:300}');
INSERT INTO t VALUES ('{a:100, a:200, b:300}');
INSERT INTO t VALUES ('{a:100, b : {a:100, c:300}}');
</pre><p>The following statement queries table t and returns <code class="codeph">col1</code> values that are well-formed JSON data with unique key names within each object:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT col1 FROM t
  WHERE col1 IS JSON WITH UNIQUE KEYS;

COL1
---------------------------
{a:100, b:200, c:300}
{a:100, b : {a:100, c:300}}
</pre><p>The second row is returned because, while the key name <code class="codeph">a</code> appears twice, it is in two different objects.
                     </p>
                     <p>The following statement queries table <code class="codeph">t</code> and returns <code class="codeph">col1</code> values that are well-formed JSON data, regardless of whether there are unique key names within each object:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT col1 FROM t
  WHERE col1 IS JSON WITHOUT UNIQUE KEYS;

COL1
---------------------------
{a:100, b:200, c:300}
{a:100, a:200, b:300}
{a:100, b : {a:100, c:300}}</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-C71211C5-1A6C-409E-8ECB-0941D7E27FA0">Using IS JSON as a Check Constraint: Example</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The following statement creates table <code class="codeph">j_purchaseorder</code>, which will store JSON data in column <code class="codeph">po_document</code>. The statement uses the <code class="codeph">IS</code> <code class="codeph">JSON</code> condition as a check constraint to ensure that only well-formed JSON is stored in column <code class="codeph">po_document</code>.
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE j_purchaseorder
  (id RAW (16) NOT NULL,
   date_loaded TIMESTAMP(6) WITH TIME ZONE,
   po_document CLOB CONSTRAINT ensure_json CHECK (po_document IS JSON));</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896" name="GUID-35C7012D-FCDB-4106-88C1-CABA78326896"></a><h3 id="SQLRF-GUID-35C7012D-FCDB-4106-88C1-CABA78326896" class="sect3">JSON_EQUAL Condition</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896__GUID-86A4AA92-8F68-4751-B811-14C6B85A26EE">Syntax</p>
                     <div class="figure" id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896__GUID-3576748A-A3BF-4F2D-B154-CFCD2C98588D"><img src="img/json_equal_condition.gif" alt="Description of json_equal_condition.eps follows" title="Description of json_equal_condition.eps follows" longdesc="img_text/json_equal_condition.html"><br><a href="img_text/json_equal_condition.html">Description of the illustration json_equal_condition.eps</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896__GUID-61B42718-F788-440A-A351-3A5F09A41A0A">Purpose</p>
                     <p>The Oracle SQL condition <code class="codeph">JSON_EQUAL</code> compares two <code class="codeph">JSON</code> values and returns true if they are equal. It returns false if the two values are not equal. The input values must be valid <code class="codeph">JSON</code> data.
                     </p>
                     <p>The comparison ignores insignificant whitespace and insignificant object member order. For example, <code class="codeph">JSON</code> objects are equal, if they have the same members, regardless of their order.
                     </p>
                     <p> If either of the two compared inputs has one or more duplicate fields, then the value returned by <code class="codeph">JSON_EQUAL</code> is unspecified.
                     </p>
                     <p><code class="codeph">JSON_EQUAL</code> supports <code class="codeph">ERROR ON ERROR</code>, <code class="codeph">FALSE ON ERROR</code>, and <code class="codeph">TRUE ON ERROR</code>. The default is <code class="codeph">FALSE ON ERROR</code>. A typical example of an error is when the input expression is not valid <code class="codeph">JSON</code>. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896__GUID-15BED0A1-D861-4F0E-AE16-2C2375584817">Examples</p>
                     <p>The following statements return TRUE:</p><pre class="oac_no_warn" dir="ltr">JSON_EQUAL('{}', '{ }')</pre><pre class="oac_no_warn" dir="ltr">JSON_EQUAL('{a:1, b:2}', '{b:2 , a:1 }')</pre><p>The following statement return FALSE:</p><pre class="oac_no_warn" dir="ltr">JSON_EQUAL('{a:"1"}', '{a:1 }') -&gt; FALSE</pre><p>The following statement results in a <code class="codeph">ORA-40441</code> <code class="codeph">JSON</code> syntax error
                     </p><pre class="oac_no_warn" dir="ltr">JSON_EQUAL('[1]', '[}' ERROR ON ERROR)</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896__GUID-56E4B083-0B7F-4EE5-A074-54C4EDD05F49">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../adjsn/index.html" target="_blank"><span class="italic">Oracle Database JSON Developer’s Guide</span></a> for more information.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SQLRF56665"></a><a id="SQLRF56684"></a><a id="SQLRF56685"></a><a id="SQLRF56686"></a><a id="SQLRF56778"></a><a id="SQLRF56717"></a><a id="SQLRF57036"></a><a id="SQLRF56687"></a><a id="SQLRF56689"></a><a id="SQLRF56690"></a><a id="SQLRF56694"></a><a id="SQLRF56695"></a><a id="SQLRF56664"></a><div class="props_rev_3"><a id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988" name="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988"></a><h3 id="SQLRF-GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988" class="sect3">JSON_EXISTS Condition</h3>
               <div>
                  <div class="section">
                     <p>Use the SQL/JSON condition <code class="codeph">JSON_EXISTS</code> to test whether a specified JSON value exists in JSON data. This condition returns <code class="codeph">TRUE</code> if the JSON value exists and <code class="codeph">FALSE</code> if the JSON value does not exist.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-C3179CEE-9520-46AE-AFAF-251255BF9FB0"><span class="italic">JSON_exists_condition</span>::=
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="figure" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-6B046682-A349-4E93-ACAB-CA67E387EB52"><img src="img/json_exists_condition.gif" alt="Description of json_exists_condition.eps follows" title="Description of json_exists_condition.eps follows" longdesc="img_text/json_exists_condition.html"><br><a href="img_text/json_exists_condition.html">Description of the illustration json_exists_condition.eps</a></div>
                     <!-- class="figure" -->
                     <p>(<span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>: See <a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span><cite>Oracle Database JSON Developer’s Guide</cite></span></a>)
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-C8517844-3443-49CE-BF23-C69E582A6F6A"><span class="italic">JSON_passing_clause</span>::=
                     </p>
                     <div class="figure" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-631C1B06-7A34-47A8-8FB5-E4A8CAC973AA"><img src="img/json_passing_clause.gif" alt="Description of json_passing_clause.eps follows" title="Description of json_passing_clause.eps follows" longdesc="img_text/json_passing_clause.html"><br><a href="img_text/json_passing_clause.html">Description of the illustration json_passing_clause.eps</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__BABGJJFD">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-3A811CA5-6F4C-4A6D-BB92-1B73271BC7DC"><span class="italic">JSON_exists_on_error_clause</span>::=
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="figure" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-7BAD5201-39F5-4A14-AD5F-2B905C95049C"><img src="img/json_exists_on_error_clause.gif" alt="Description of json_exists_on_error_clause.eps follows" title="Description of json_exists_on_error_clause.eps follows" longdesc="img_text/json_exists_on_error_clause.html"><br><a href="img_text/json_exists_on_error_clause.html">Description of the illustration json_exists_on_error_clause.eps</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-53E2052D-CB3E-43C5-9CC2-C9B36D083B23"><span class="italic">expr</span></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Use this clause to specify the JSON data to be evaluated. For <span class="italic"><code class="codeph">expr</code></span>, specify an expression that evaluates to a text literal. If <span class="italic"><code class="codeph">expr</code></span> is a column, then the column must be of data type <code class="codeph">VARCHAR2</code>, <code class="codeph">CLOB</code>, or <code class="codeph">BLOB</code>. If <span class="italic"><code class="codeph">expr</code></span> evaluates to null or a text literal of length zero, then the condition returns <code class="codeph">UNKNOWN</code>.
                     </p>
                     <p>If <span class="italic"><code class="codeph">expr</code></span> is not a text literal of well-formed JSON data using strict or lax syntax, then the condition returns <code class="codeph">FALSE</code> by default. You can use the <span class="italic"><code class="codeph">JSON_exists_on_error_clause</code></span> to override this default behavior. Refer to the <span class="italic"><a href="SQL-JSON-Conditions.html#GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__BABHJEDF">JSON_exists_on_error_clause</a></span>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-796427C4-C0AB-469F-8DD0-70C5B2E04007">FORMAT JSON</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>You must specify <code class="codeph">FORMAT</code> <code class="codeph">JSON</code> if <span class="italic"><code class="codeph">expr</code></span> is a column of data type <code class="codeph">BLOB</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-5CBF1D14-F5A1-4118-A7C4-B0D96DDCC7F4"><span class="italic">JSON_basic_path_expression</span></p>
                     <p>Use this clause to specify a SQL/JSON path expression. The condition uses the path expression to evaluate <span class="italic"><code class="codeph">expr</code></span> and determine if a JSON value that matches, or satisfies, the path expression exists. The path expression must be a text literal, but it can contain variables whose values are passed to the path expression by the <span class="italic"><code class="codeph">JSON_passing_clause</code></span>. See <a href="../adjsn/json-path-expressions.html#ADJSN-GUID-7B610884-39CD-4910-85E7-C251D342D879" target="_blank"><span><cite>Oracle Database JSON Developer’s Guide</cite></span></a> for the full semantics of <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__JSON_PASSING_CLAUSE-5DE8CC0D">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-731DEAA5-B2CF-4D06-B003-476AF8C2E365"><span class="italic">JSON_passing_clause</span></p>Use this clause to pass values to the path expression.  For <span class="italic"><code class="codeph">expr</code></span>, specify a value of data type <code class="codeph">VARCHAR2</code>, <code class="codeph">NUMBER</code>, <code class="codeph">BINARY_DOUBLE</code>, <code class="codeph">DATE</code>, <code class="codeph">TIMESTAMP</code>, or <code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code>. The result of evaluating <span class="italic"><code class="codeph">expr</code></span> is bound to the corresponding identifier in the <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>.
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__BABHJEDF">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-207C44B9-08A0-4085-9924-FD5B6A033A8B"><span class="italic">JSON_exists_on_error_clause</span></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Use this clause to specify the value returned by this condition when <span class="italic"><code class="codeph">expr</code></span> is not well-formed JSON data.
                     </p>
                     <p>You can specify the following clauses:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">ERROR</code> <code class="codeph">ON</code> <code class="codeph">ERROR</code> - Returns the appropriate Oracle error when <span class="italic"><code class="codeph">expr</code></span> is not well-formed JSON data.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">TRUE</code> <code class="codeph">ON</code> <code class="codeph">ERROR</code> - Returns <code class="codeph">TRUE</code> when <span class="italic"><code class="codeph">expr</code></span> is not well-formed JSON data.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">FALSE</code> <code class="codeph">ON</code> <code class="codeph">ERROR</code> - Returns <code class="codeph">FALSE</code> when <span class="italic"><code class="codeph">expr</code></span> is not well-formed JSON data. This is the default.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-DE366332-CFC6-4B3C-AD3B-CC32891042F0">Examples</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The following statement creates table <code class="codeph">t</code> with column <code class="codeph">name</code>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE t (name VARCHAR2(100));
</pre><p>The following statements insert values into column <code class="codeph">name</code> of table <code class="codeph">t</code>:
                     </p><pre class="oac_no_warn" dir="ltr">INSERT INTO t VALUES ('[{first:"John"}, {middle:"Mark"}, {last:"Smith"}]');
INSERT INTO t VALUES ('[{first:"Mary"}, {last:"Jones"}]');
INSERT INTO t VALUES ('[{first:"Jeff"}, {last:"Williams"}]');
INSERT INTO t VALUES ('[{first:"Jean"}, {middle:"Anne"}, {last:"Brown"}]');
INSERT INTO t VALUES (NULL);
INSERT INTO t VALUES ('This is not well-formed JSON data');
</pre><p>The following statement queries column <code class="codeph">name</code> in table <code class="codeph">t</code> and returns JSON data that consists of an array whose first element is an object with property name <code class="codeph">first</code>. The <code class="codeph">ON</code> <code class="codeph">ERROR</code> clause is not specified. Therefore, the <code class="codeph">JSON_EXISTS</code> condition returns <code class="codeph">FALSE</code> for values that are not well-formed JSON data.
                     </p><pre class="oac_no_warn" dir="ltr">SELECT name FROM t
  WHERE JSON_EXISTS(name, '$[0].first');

NAME
--------------------------------------------------
[{first:"John"}, {middle:"Mark"}, {last:"Smith"}]
[{first:"Mary"}, {last:"Jones"}]
[{first:"Jeff"}, {last:"Williams"}]
[{first:"Jean"}, {middle:"Anne"}, {last:"Brown"}]
</pre><p>The following statement queries column <code class="codeph">name</code> in table <code class="codeph">t</code> and returns JSON data that consists of an array whose second element is an object with property name <code class="codeph">middle</code>. The <code class="codeph">ON</code> <code class="codeph">ERROR</code> clause is not specified. Therefore, the <code class="codeph">JSON_EXISTS</code> condition returns <code class="codeph">FALSE</code> for values that are not well-formed JSON data.
                     </p><pre class="oac_no_warn" dir="ltr">SELECT name FROM t
  WHERE JSON_EXISTS(name, '$[1].middle');

NAME
--------------------------------------------------------------------------------
[{first:"John"}, {middle:"Mark"}, {last:"Smith"}]
[{first:"Jean"}, {middle:"Anne"}, {last:"Brown"}]
</pre><p>The following statement is similar to the previous statement, except that the <code class="codeph">TRUE</code> <code class="codeph">ON</code> <code class="codeph">ERROR</code> clause is specified. Therefore, the <code class="codeph">JSON_EXISTS</code> condition returns <code class="codeph">TRUE</code> for values that are not well-formed JSON data.
                     </p><pre class="oac_no_warn" dir="ltr">SELECT name FROM t
  WHERE JSON_EXISTS(name, '$[1].middle' TRUE ON ERROR);

NAME
--------------------------------------------------------------------------------
[{first:"John"}, {middle:"Mark"}, {last:"Smith"}]
[{first:"Jean"}, {middle:"Anne"}, {last:"Brown"}]
This is not well-formed JSON data
</pre><p>The following statement queries column <code class="codeph">name</code> in table <code class="codeph">t</code> and returns JSON data that consists of an array that contains an element that is an object with property name <code class="codeph">last</code>. The wildcard symbol (<code class="codeph">*</code>) is specified for the array index. Therefore, the query returns arrays that contain such an object, regardless of its index number in the array.
                     </p><pre class="oac_no_warn" dir="ltr">SELECT name FROM t
  WHERE JSON_EXISTS(name, '$[*].last');

NAME
--------------------------------------------------
[{first:"John"}, {middle:"Mark"}, {last:"Smith"}]
[{first:"Mary"}, {last:"Jones"}]
[{first:"Jeff"}, {last:"Williams"}]
[{first:"Jean"}, {middle:"Anne"}, {last:"Brown"}]</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="SQLRF56964"></a><a id="SQLRF56965"></a><a id="SQLRF56966"></a><a id="SQLRF56967"></a><a id="SQLRF56968"></a><a id="SQLRF56969"></a><a id="SQLRF56970"></a><a id="SQLRF56971"></a><a id="SQLRF56963"></a><div class="props_rev_3"><a id="GUID-DEF7941B-1267-44E7-8514-5CD448503179" name="GUID-DEF7941B-1267-44E7-8514-5CD448503179"></a><h3 id="SQLRF-GUID-DEF7941B-1267-44E7-8514-5CD448503179" class="sect3">JSON_TEXTCONTAINS Condition</h3>
               <div>
                  <div class="section">
                     <p>Use the SQL/JSON condition <code class="codeph">JSON_TEXTCONTAINS</code> to test whether a specified character string exists in JSON property values. You can use this condition to filter JSON data on a specific word or number.
                     </p>
                     <p>This condition takes the following arguments:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A table or view column that contains JSON data. A JSON search index, which is an Oracle Text index designed specifically for use with JSON data, must be defined on the column. Each row of JSON data in the column is referred to as a <span class="bold">JSON</span> <span class="bold">document</span>.
                           </p>
                        </li>
                        <li>
                           <p>A SQL/JSON path expression. The path expression is applied to each JSON document in an attempt to match a specific JSON object within the document. The path expression can contain only JSON object steps; it cannot contain JSON array steps.</p>
                        </li>
                        <li>
                           <p>A character string. The condition searches for the character string in all of the string and numeric property values in the matched JSON object, including array values. The string must exist as a separate word in the property value. For example, if you search for 'beth', then a match will be found for string property value  "beth smith", but not for "elizabeth smith". If you search for '10', then a match will be found for numeric property value 10 or string property value "10 main street", but a match will not be found for numeric property value 110 or string property value "102 main street".</p>
                        </li>
                     </ul>
                     <p>This condition returns <code class="codeph">TRUE</code> if a match is found, and <code class="codeph">FALSE</code> if a match is not found.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-301AA595-00D6-45FB-933E-B20CF963E2B5"><span class="italic">JSON_textcontains_condition</span>::=
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="figure" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-3E954596-C48B-4B03-890E-DC1F229CD829"><img src="img/json_textcontains_condition.gif" alt="Description of json_textcontains_condition.eps follows" title="Description of json_textcontains_condition.eps follows" longdesc="img_text/json_textcontains_condition.html"><br><a href="img_text/json_textcontains_condition.html">Description of the illustration json_textcontains_condition.eps</a></div>
                     <!-- class="figure" -->
                     <p>(<span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>: See <a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span><cite>Oracle Database JSON Developer’s Guide</cite></span></a>)
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-687EEA6F-B377-410A-AE1E-3AD6BDAED0E6"><span class="italic">column</span></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Specify the name of the table or view column containing the JSON data to be tested. The column must be of data type <code class="codeph">VARCHAR2</code>, <code class="codeph">CLOB</code>, or <code class="codeph">BLOB</code>. A JSON search index, which is an Oracle Text index designed specifically for use with JSON data, must be defined on the column. If a column value is a null or a text literal of length zero, then the condition returns <code class="codeph">UNKNOWN</code>.
                     </p>
                     <p>If a column value is not a text literal of well-formed JSON data using strict or lax syntax, then the condition returns <code class="codeph">FALSE</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-0C03E327-1E8B-4F69-B106-582C3E11873E"><span class="italic">JSON_basic_path_expression</span></p>
                     <p>Use this clause to specify a SQL/JSON path expression. The condition uses the path expression to evaluate <span class="italic"><code class="codeph">column</code></span> and determine if a JSON value that matches, or satisfies, the path expression exists. The path expression must be a text literal. See <a href="../adjsn/json-path-expressions.html#ADJSN-GUID-7B610884-39CD-4910-85E7-C251D342D879" target="_blank"><span><cite>Oracle Database JSON Developer’s Guide</cite></span></a> for the full semantics of <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-A8B72B7A-9623-4F87-961D-A1090AEF0BB3"><span class="italic">string</span></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The condition searches for the character string specified by <span class="italic"><code class="codeph">string</code></span>. The string must be enclosed in single quotation marks.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-4DB3AB41-3B33-465B-93E4-81B7870BF5E1">Examples</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The following statement creates table <code class="codeph">families</code> with column <code class="codeph">family_doc</code>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE families (family_doc VARCHAR2(200));
</pre><p>The following statement creates a JSON search index on column <code class="codeph">family_doc</code>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE INDEX ix
  ON families(family_doc)
  INDEXTYPE IS CTXSYS.CONTEXT
  PARAMETERS ('SECTION GROUP CTXSYS.JSON_SECTION_GROUP SYNC (ON COMMIT)');
</pre><p>The following statements insert JSON documents that describe families into column <code class="codeph">family_doc</code>:
                     </p><pre class="oac_no_warn" dir="ltr">INSERT INTO families
VALUES ('{family : {id:10, ages:[40,38,12], address : {street : "10 Main Street"}}}');

INSERT INTO families
VALUES ('{family : {id:11, ages:[42,40,10,5], address : {street : "200 East Street", apt : 20}}}');

INSERT INTO families
VALUES ('{family : {id:12, ages:[25,23], address : {street : "300 Oak Street", apt : 10}}}');
</pre><p>The following statement commits the transaction:</p><pre class="oac_no_warn" dir="ltr">COMMIT;
</pre><p>The following query returns the JSON documents that contain <code class="codeph">10</code> in any property value in the document:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT family_doc FROM families
  WHERE JSON_TEXTCONTAINS(family_doc, '$', '10');

FAMILY_DOC
--------------------------------------------------------------------------------
{family : {id:10, ages:[40,38,12], address : {street : "10 Main Street"}}}
{family : {id:11, ages:[42,40,10,5], address : {street : "200 East Street", apt : 20}}}
{family : {id:12, ages:[25,23], address : {street : "300 Oak Street", apt : 10}}}
</pre><p>The following query returns the JSON documents that contain 10 in the <code class="codeph">id</code> property value:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT family_doc FROM families
  where json_textcontains(family_doc, '$.family.id', '10');

FAMILY_DOC
--------------------------------------------------------------------------------
{family : {id:10, ages:[40,38,12], address : {street : "10 Main Street"}}}
</pre><p>The following query returns the JSON documents that have a 10 in the array of values for the <code class="codeph">ages</code> property:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT family_doc FROM families
  WHERE JSON_TEXTCONTAINS(family_doc, '$.family.ages', '10');

FAMILY_DOC
--------------------------------------------------------------------------------
{family : {id:11, ages:[42,40,10,5], address : {street : "200 East Street", apt : 20}}}
</pre><p>The following query returns the JSON documents that have a 10 in the <code class="codeph">address</code> property value:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT family_doc FROM families
  WHERE JSON_TEXTCONTAINS(family_doc, '$.family.address', '10');

FAMILY_DOC
--------------------------------------------------------------------------------
{family : {id:10, ages:[40,38,12], address : {street : "10 Main Street"}}}
{family : {id:12, ages:[25,23], address : {street : "300 Oak Street", apt : 10}}}
</pre><p>The following query returns the JSON documents that have a 10 in the <code class="codeph">apt</code> property value:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT family_doc FROM families
  WHERE JSON_TEXTCONTAINS(family_doc, '$.family.address.apt', '10');

FAMILY_DOC
--------------------------------------------------------------------------------
{family : {id:12, ages:[25,23], address : {street : "300 Oak Street", apt : 10}}}</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
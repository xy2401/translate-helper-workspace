<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>SQL / JSON条件</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="XML-Conditions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="Compound-Conditions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="XML-Conditions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="Compound-Conditions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Conditions.html" property="item" typeof="WebPage"><span property="name">条件</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQL / JSON条件</li>
            </ol>
            <a id="GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63" name="GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63"></a><a id="SQLRF57035"></a><a id="SQLRF56660"></a>
            
            <h2 id="SQLRF-GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63" class="sect2">SQL / JSON条件</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>SQL / JSON条件允许您测试JavaScript Object Notation（JSON）数据，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="SQL-JSON-Conditions.html#GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA">IS JSON Condition</a>允许您测试表达式是否在语法上是正确的JSON数据</p>
                     </li>
                     <li>
                        <p><a href="SQL-JSON-Conditions.html#GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988">JSON_EXISTS Condition</a>允许您测试JSON数据中是否存在指定的JSON值</p>
                     </li>
                     <li>
                        <p><a href="SQL-JSON-Conditions.html#GUID-DEF7941B-1267-44E7-8514-5CD448503179">JSON_TEXTCONTAINS条件</a>允许您测试JSON属性值中是否存在指定的字符串。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63__GUID-D762B6B3-E13E-488D-8145-C07A4B60FD81"><span class="italic">JSON_condition</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-08C75404-6E58-4EBE-A8B4-0B6041B0DB63__GUID-19BD5A21-0160-41BD-85C3-7C237BDC725F"><img src="img/json_condition.gif" alt="下面是json_condition.eps的描述" title="下面是json_condition.eps的描述" longdesc="img_text/json_condition.html"><br><a href="img_text/json_condition.html">说明json_condition.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
            </div><a id="SQLRF56662"></a><a id="SQLRF56663"></a><a id="SQLRF57000"></a><a id="SQLRF57001"></a><a id="SQLRF57002"></a><a id="SQLRF56661"></a><div class="props_rev_3"><a id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA" name="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA"></a><h3 id="SQLRF-GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA" class="sect3">是JSON条件</h3>
               <div>
                  <div class="section">
                     <p>使用此SQL / JSON条件来测试表达式在语法上是正确的还是格式正确的JSON数据。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果指定<code class="codeph">IS</code> <code class="codeph">JSON</code> ，则如果表达式是格式正确的JSON数据，则此条件返回<code class="codeph">TRUE</code>如果表达式不是格式良好的JSON数据，则此条件返回<code class="codeph">FALSE</code> 。
                           </p>
                        </li>
                        <li>
                           <p>如果指定<code class="codeph">IS</code> <code class="codeph">NOT</code> <code class="codeph">JSON</code> ，则如果表达式不是格式正确的JSON数据，则此条件返回<code class="codeph">TRUE</code>如果表达式是格式良好的JSON数据，则此条件返回<code class="codeph">FALSE</code> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-DDB45343-8469-4BFD-9234-F35F953901A0"><span class="italic">is_JSON_condition</span> :: =</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="figure" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-87340E4C-85B0-4AF9-A7EC-62C4E0F48E50"><img src="img/is_json_condition.gif" alt="下面是is_json_condition.eps的描述" title="下面是is_json_condition.eps的描述" longdesc="img_text/is_json_condition.html"><br><a href="img_text/is_json_condition.html">插图描述is_json_condition.eps</a></div>
                     <!-- class="figure" -->
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用<span class="italic"><code class="codeph">expr</code></span>指定要评估的JSON数据。指定一个计算结果为文本文字的表达式。如果<span class="italic"><code class="codeph">expr</code></span>是列，则该列必须是数据类型<code class="codeph">VARCHAR2</code> ， <code class="codeph">CLOB</code>或<code class="codeph">BLOB</code> 。如果<span class="italic"><code class="codeph">expr</code></span>求值为null或长度为零的文本文字，则此条件返回<code class="codeph">UNKNOWN</code> 。</p>
                        </li>
                        <li>
                           <p>如果<span class="italic"><code class="codeph">expr</code></span>是数据类型为<code class="codeph">BLOB</code>的列，则必须指定<code class="codeph">FORMAT</code> <code class="codeph">JSON</code> 。</p>
                        </li>
                        <li>
                           <p>如果指定<code class="codeph">STRICT</code> ，则此条件仅将严格的JSON语法视为格式良好的JSON数据。如果指定<code class="codeph">LAX</code> ，则此条件也会将宽松的JSON语法视为格式良好的JSON数据。<code class="codeph">LAX</code>默认为。有关严格和宽松的JSON语法的更多信息，请参阅<a href="../adjsn/conditions-is-json-and-is-not-json.html#ADJSN-GUID-1B6CFFBE-85FE-41DD-BA14-DD1DE73EAB20" target="_blank"><span><cite>Oracle数据库JSON开发人员指南</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>如果指定<code class="codeph">WITH</code> <code class="codeph">UNIQUE</code> <code class="codeph">KEYS</code> ，则只有当键名在每个对象中是唯一的时，此条件才会认为JSON数据格式正确。如果指定<code class="codeph">WITHOUT</code> <code class="codeph">UNIQUE</code> <code class="codeph">KEYS</code> ，则即使在对象中出现重复的键名，此条件也会认为JSON数据格式正确。<code class="codeph">WITHOUT</code> <code class="codeph">UNIQUE</code> <code class="codeph">KEYS</code>测试比<code class="codeph">WITH</code> <code class="codeph">UNIQUE</code> <code class="codeph">KEYS</code>测试执行得更快。默认值为<code class="codeph">WITHOUT</code> <code class="codeph">UNIQUE</code> <code class="codeph">KEYS</code> 。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-1F739CF9-CCB4-47D3-A0D1-B384547730DC">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-966983C1-E6D4-4C7A-9728-2AACF89A6811">测试STRICT或LAX JSON语法：示例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下语句使用列<code class="codeph">col1</code>创建表<code class="codeph">t</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE t（col1 VARCHAR2（100））;</pre><p>以下语句将值插入表<code class="codeph">t</code>列<code class="codeph">col1</code>中：</p><pre class="oac_no_warn" dir="ltr">插入值（'[“LIT192”，“CS141”，“HIS160”]'）;插入值（'{“Name”：“John”}'）;插入值（'{“等级值”：{A：4.0，B：3.0，C：2.0}}'）; INSERT IN TO VALUES（'{“isEnrolled”：true}'）;插入到VALUES（'{“isMatriculated”：False}'）; INSERT INTO VALUES（NULL）; INSERT INTO VALUES（'这不是格式良好的JSON数据'）;</pre><p>以下语句查询表<code class="codeph">t</code>并返回格式正确的JSON数据的<code class="codeph">col1</code>值。由于既未指定<code class="codeph">STRICT</code>也未指定<code class="codeph">LAX</code>关键字，因此本示例使用默认的<code class="codeph">LAX</code>设置。因此，此查询返回使用严格或宽松JSON语法的值。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT col1 FROM t WHERE col1 IS JSON; COL1 ------------------------------------------------- -  [“LIT192”，“CS141”，“HIS160”] {“姓名”：“John”} {“等级值”：{A：4.0，B：3.0，C：2.0}} {“isEnrolled”：true} {“isMatriculated”：False}</pre><p>以下语句查询表<code class="codeph">t</code>并返回格式正确的JSON数据的<code class="codeph">col1</code>值。此示例指定<code class="codeph">STRICT</code>设置。因此，此查询仅返回使用严格JSON语法的值。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT col1 FROM t WHERE col1 IS JSON STRICT; COL1 ------------------------------------------------- -  [“LIT192”，“CS141”，“HIS160”] {“姓名”：“John”} {“isEnrolled”：true}</pre><p>下面的语句查询表<code class="codeph">t</code>并返回<code class="codeph">col1</code>使用JSON不严语法值，但省略<code class="codeph">col1</code>使用严格JSON语法值。因此，此查询仅返回包含松散JSON语法中允许的异常的值。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT col1 FROM t WHERE col1不是JSON STRICT而col1是JSON LAX; COL1 ------------------------------------------------- -  {“成绩值”：{A：4.0，B：3.0，C：2.0}} {“isMatriculated”：False}</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-9DD05BF0-37C8-4AFB-B6CB-EA13DB17DEE3">测试唯一键：示例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下语句使用列<code class="codeph">col1</code>创建表<code class="codeph">t</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE t（col1 VARCHAR2（100））;</pre><p>以下语句将值插入表<code class="codeph">t</code>列<code class="codeph">col1</code>中：</p><pre class="oac_no_warn" dir="ltr">插入值（'{a：100，b：200，c：300}'）;插入值（'{a：100，a：200，b：300}'）;插入值（'{a：100，b：{a：100，c：300}}'）;</pre><p>以下语句查询表t并返回<code class="codeph">col1</code>值，这些值是在每个对象中具有唯一键名的格式良好的JSON数据：</p><pre class="oac_no_warn" dir="ltr">SELECT col1 FROM t WHERE col1 IS JSON WITH UNIQUE KEYS; COL1 --------------------------- {a：100，b：200，c：300} {a：100，b：{a ：100，c：300}}</pre><p>返回第二行是因为，当键名称<code class="codeph">a</code>出现两次时，它位于两个不同的对象中。
                     </p>
                     <p>以下语句查询表<code class="codeph">t</code>并返回格式正确的JSON数据的<code class="codeph">col1</code>值，无论每个对象中是否都有唯一的键名：</p><pre class="oac_no_warn" dir="ltr">SELECT col1 FROM t WHERE col1是没有独特键的JSON; COL1 --------------------------- {a：100，b：200，c：300} {a：100，a：200， b：300} {a：100，b：{a：100，c：300}}</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99B9493D-2929-4A09-BA39-A56F8E7319DA__GUID-C71211C5-1A6C-409E-8ECB-0941D7E27FA0">使用IS JSON作为检查约束：示例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下语句创建表<code class="codeph">j_purchaseorder</code> ，它将JSON数据存储在<code class="codeph">po_document</code>列中。该语句使用<code class="codeph">IS</code> <code class="codeph">JSON</code>条件作为检查约束，以确保只有格式良好的JSON存储在列<code class="codeph">po_document</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE j_purchaseorder（id RAW（16）NOT NULL，date_loaded TIMESTAMP（6）WITH TIME ZONE，po_document CLOB CONSTRAINT ensure_json CHECK（po_document IS JSON））;</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896" name="GUID-35C7012D-FCDB-4106-88C1-CABA78326896"></a><h3 id="SQLRF-GUID-35C7012D-FCDB-4106-88C1-CABA78326896" class="sect3">JSON_EQUAL条件</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896__GUID-86A4AA92-8F68-4751-B811-14C6B85A26EE">句法</p>
                     <div class="figure" id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896__GUID-3576748A-A3BF-4F2D-B154-CFCD2C98588D"><img src="img/json_equal_condition.gif" alt="下面是json_equal_condition.eps的描述" title="下面是json_equal_condition.eps的描述" longdesc="img_text/json_equal_condition.html"><br><a href="img_text/json_equal_condition.html">说明json_equal_condition.eps的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896__GUID-61B42718-F788-440A-A351-3A5F09A41A0A">目的</p>
                     <p>Oracle SQL条件<code class="codeph">JSON_EQUAL</code>比较两个<code class="codeph">JSON</code>值，如果它们相等则返回true。如果两个值不相等，则返回false。输入值必须是有效的<code class="codeph">JSON</code>数据。
                     </p>
                     <p>比较忽略了无关紧要的空白和无关紧要的对象成员顺序。例如， <code class="codeph">JSON</code>对象是相同的，如果它们具有相同的成员，则无论它们的顺序如何。
                     </p>
                     <p>如果两个比较输入中的任何一个具有一个或多个重复字段，则<code class="codeph">JSON_EQUAL</code>返回的值未指定。
                     </p>
                     <p><code class="codeph">JSON_EQUAL</code>支持<code class="codeph">ERROR ON ERROR</code> ， <code class="codeph">FALSE ON ERROR</code>和<code class="codeph">TRUE ON ERROR</code> 。默认值为<code class="codeph">FALSE ON ERROR</code> 。错误的典型示例是输入表达式无效<code class="codeph">JSON</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896__GUID-15BED0A1-D861-4F0E-AE16-2C2375584817">例子</p>
                     <p>以下语句返回TRUE：</p><pre class="oac_no_warn" dir="ltr">JSON_EQUAL（'{}'，'{}'）</pre><pre class="oac_no_warn" dir="ltr">JSON_EQUAL（'{a：1，b：2}'，'{b：2，a：1}'）</pre><p>以下语句返回FALSE：</p><pre class="oac_no_warn" dir="ltr">JSON_EQUAL（'{a：“1”}'，'{a：1}'） - &gt; FALSE</pre><p>以下语句导致<code class="codeph">ORA-40441</code> <code class="codeph">JSON</code>语法错误</p><pre class="oac_no_warn" dir="ltr">JSON_EQUAL（'[1]'，'[}'ERROR ON ERROR）</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-35C7012D-FCDB-4106-88C1-CABA78326896__GUID-56E4B083-0B7F-4EE5-A074-54C4EDD05F49">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关更多信息，请<a href="../adjsn/index.html" target="_blank"><span class="italic">参见Oracle Database JSON Developer's Guide</span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SQLRF56665"></a><a id="SQLRF56684"></a><a id="SQLRF56685"></a><a id="SQLRF56686"></a><a id="SQLRF56778"></a><a id="SQLRF56717"></a><a id="SQLRF57036"></a><a id="SQLRF56687"></a><a id="SQLRF56689"></a><a id="SQLRF56690"></a><a id="SQLRF56694"></a><a id="SQLRF56695"></a><a id="SQLRF56664"></a><div class="props_rev_3"><a id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988" name="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988"></a><h3 id="SQLRF-GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988" class="sect3">JSON_EXISTS条件</h3>
               <div>
                  <div class="section">
                     <p>使用SQL / JSON条件<code class="codeph">JSON_EXISTS</code>来测试JSON数据中是否存在指定的JSON值。如果JSON值存在，则此条件返回<code class="codeph">TRUE</code>如果JSON值不存在，则返回<code class="codeph">FALSE</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-C3179CEE-9520-46AE-AFAF-251255BF9FB0"><span class="italic">JSON_exists_condition</span> :: =</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="figure" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-6B046682-A349-4E93-ACAB-CA67E387EB52"><img src="img/json_exists_condition.gif" alt="下面是json_exists_condition.eps的描述" title="下面是json_exists_condition.eps的描述" longdesc="img_text/json_exists_condition.html"><br><a href="img_text/json_exists_condition.html">插图描述json_exists_condition.eps</a></div>
                     <!-- class="figure" -->
                     <p>（ <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span> ：请参阅<a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span><cite>Oracle数据库JSON开发人员指南</cite></span></a> ）</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-C8517844-3443-49CE-BF23-C69E582A6F6A"><span class="italic">JSON_passing_clause</span> :: =</p>
                     <div class="figure" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-631C1B06-7A34-47A8-8FB5-E4A8CAC973AA"><img src="img/json_passing_clause.gif" alt="下面是json_passing_clause.eps的描述" title="下面是json_passing_clause.eps的描述" longdesc="img_text/json_passing_clause.html"><br><a href="img_text/json_passing_clause.html">说明json_passing_clause.eps的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__BABGJJFD">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-3A811CA5-6F4C-4A6D-BB92-1B73271BC7DC"><span class="italic">JSON_exists_on_error_clause</span> :: =</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="figure" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-7BAD5201-39F5-4A14-AD5F-2B905C95049C"><img src="img/json_exists_on_error_clause.gif" alt="下面是json_exists_on_error_clause.eps的描述" title="下面是json_exists_on_error_clause.eps的描述" longdesc="img_text/json_exists_on_error_clause.html"><br><a href="img_text/json_exists_on_error_clause.html">插图描述json_exists_on_error_clause.eps</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-53E2052D-CB3E-43C5-9CC2-C9B36D083B23"><span class="italic">EXPR</span></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>使用此子句指定要评估的JSON数据。对于<span class="italic"><code class="codeph">expr</code></span> ，请指定一个计算结果为文本文字的表达式。如果<span class="italic"><code class="codeph">expr</code></span>是列，则该列必须是数据类型<code class="codeph">VARCHAR2</code> ， <code class="codeph">CLOB</code>或<code class="codeph">BLOB</code> 。如果<span class="italic"><code class="codeph">expr</code></span>求值为null或长度为零的文本文字，则条件返回<code class="codeph">UNKNOWN</code> 。</p>
                     <p>如果<span class="italic"><code class="codeph">expr</code></span>不是使用strict或lax语法的格式良好的JSON数据的文本文本，则条件默认返回<code class="codeph">FALSE</code> 。您可以使用<span class="italic"><code class="codeph">JSON_exists_on_error_clause</code></span>覆盖此默认行为。请参阅<span class="italic"><a href="SQL-JSON-Conditions.html#GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__BABHJEDF">JSON_exists_on_error_clause</a></span> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-796427C4-C0AB-469F-8DD0-70C5B2E04007">格式JSON</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>如果<span class="italic"><code class="codeph">expr</code></span>是数据类型为<code class="codeph">BLOB</code>的列，则必须指定<code class="codeph">FORMAT</code> <code class="codeph">JSON</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-5CBF1D14-F5A1-4118-A7C4-B0D96DDCC7F4"><span class="italic">JSON_basic_path_expression</span></p>
                     <p>使用此子句指定SQL / JSON路径表达式。条件使用路径表达式来计算<span class="italic"><code class="codeph">expr</code></span>并确定是否存在匹配或满足路径表达式的JSON值。路径表达式必须是文本文字，但它可以包含其值通过<span class="italic"><code class="codeph">JSON_passing_clause</code></span>传递给路径表达式的<span class="italic"><code class="codeph">JSON_passing_clause</code></span> 。有关<span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>的完整语义，请参阅<a href="../adjsn/json-path-expressions.html#ADJSN-GUID-7B610884-39CD-4910-85E7-C251D342D879" target="_blank"><span><cite>Oracle Database JSON Developer's Guide</cite></span></a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__JSON_PASSING_CLAUSE-5DE8CC0D">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-731DEAA5-B2CF-4D06-B003-476AF8C2E365"><span class="italic">JSON_passing_clause</span></p>使用此子句将值传递给路径表达式。对于<span class="italic"><code class="codeph">expr</code></span> ，请指定数据类型<code class="codeph">VARCHAR2</code> ， <code class="codeph">NUMBER</code> ， <code class="codeph">BINARY_DOUBLE</code> ， <code class="codeph">DATE</code> ， <code class="codeph">TIMESTAMP</code>或<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code> 。评估<span class="italic"><code class="codeph">expr</code></span>的结果绑定到<span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>的相应标识符。
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__BABHJEDF">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-207C44B9-08A0-4085-9924-FD5B6A033A8B"><span class="italic">JSON_exists_on_error_clause</span></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>当<span class="italic"><code class="codeph">expr</code></span>不是格式正确的JSON数据时，使用此子句指定此条件返回的值。
                     </p>
                     <p>您可以指定以下子句：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">ERROR</code> <code class="codeph">ON</code> <code class="codeph">ERROR</code> - 当<span class="italic"><code class="codeph">expr</code></span>格式不正确的JSON数据时，返回相应的Oracle错误。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">TRUE</code> <code class="codeph">ON</code> <code class="codeph">ERROR</code> - 当<span class="italic"><code class="codeph">expr</code></span>不是格式正确的JSON数据时返回<code class="codeph">TRUE</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">FALSE</code> <code class="codeph">ON</code> <code class="codeph">ERROR</code> - 当<span class="italic"><code class="codeph">expr</code></span>不是格式正确的JSON数据时返回<code class="codeph">FALSE</code> 。这是默认值。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-57762C80-0C8A-4B18-9BA7-9B3F5ABDC988__GUID-DE366332-CFC6-4B3C-AD3B-CC32891042F0">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下语句创建具有列<code class="codeph">name</code>表<code class="codeph">t</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE t（名称VARCHAR2（100））;</pre><p>以下语句将值插入表<code class="codeph">t</code>列<code class="codeph">name</code> ：</p><pre class="oac_no_warn" dir="ltr">INSERT IN TO VALUES（'[{first：“John”}，{middle：“Mark”}，{last：“Smith”}]'）;插入值（'[{first：“Mary”}，{last：“Jones”}]'）; INSERT IN TO VALUES（'[{first：“Jeff”}，{last：“Williams”}]'）; INSERT IN TO VALUES（'[{first：“Jean”}，{middle：“Anne”}，{last：“Brown”}]'）; INSERT INTO VALUES（NULL）; INSERT INTO VALUES（'这不是格式良好的JSON数据'）;</pre><p>以下语句查询列<code class="codeph">name</code>在表<code class="codeph">t</code>和返回一个由一个数组，其第一个元素是与属性名称的对象的JSON数据<code class="codeph">first</code> 。未指定<code class="codeph">ON</code> <code class="codeph">ERROR</code>子句。因此，对于<code class="codeph">JSON_EXISTS</code>不正确的JSON数据的值， <code class="codeph">JSON_EXISTS</code>条件返回<code class="codeph">FALSE</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT name FROM t WHERE JSON_EXISTS（name，'$ [0] .first'）;名称  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - -  [{first：“John”}，{middle：“Mark”}，{last：“Smith”}] [{first：“Mary”}，{last：“Jones”}] [{first：“Jeff” }，{last：“Williams”}] [{first：“Jean”}，{middle：“Anne”}，{last：“Brown”}]</pre><p>以下语句查询表<code class="codeph">t</code>列<code class="codeph">name</code> ，并返回由数组组成的JSON数据，该数组的第二个元素是具有属性名称<code class="codeph">middle</code>的对象。未指定<code class="codeph">ON</code> <code class="codeph">ERROR</code>子句。因此，对于<code class="codeph">JSON_EXISTS</code>不正确的JSON数据的值， <code class="codeph">JSON_EXISTS</code>条件返回<code class="codeph">FALSE</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT name FROM t WHERE JSON_EXISTS（name，'$ [1] .middle'）;名称  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - ------------------------------- [{first：“John”}，{middle：“Mark”}，{last ：“Smith”}] [{first：“Jean”}，{middle：“Anne”}，{last：“Brown”}]</pre><p>除了指定了<code class="codeph">TRUE</code> <code class="codeph">ON</code> <code class="codeph">ERROR</code>子句之外，以下语句与前一个语句类似。因此，对于<code class="codeph">JSON_EXISTS</code>不正确的JSON数据的值， <code class="codeph">JSON_EXISTS</code>条件返回<code class="codeph">TRUE</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT name FROM t WHERE JSON_EXISTS（name，'$ [1] .middle'TRUE ON ERROR）;名称  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - ------------------------------- [{first：“John”}，{middle：“Mark”}，{last ：“Smith”}] [{first：“Jean”}，{middle：“Anne”}，{last：“Brown”}]这不是格式良好的JSON数据</pre><p>以下语句查询表<code class="codeph">t</code>列<code class="codeph">name</code> ，并返回由包含元素的数组组成的JSON数据，该元素是具有属性名称<code class="codeph">last</code>的对象。为数组索引指定通配符（ <code class="codeph">*</code> ）。因此，查询返回包含此类对象的数组，而不管其在数组中的索引号。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT name FROM t WHERE JSON_EXISTS（name，'$ [*] .last'）;名称  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - -  [{first：“John”}，{middle：“Mark”}，{last：“Smith”}] [{first：“Mary”}，{last：“Jones”}] [{first：“Jeff” }，{last：“Williams”}] [{first：“Jean”}，{middle：“Anne”}，{last：“Brown”}]</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="SQLRF56964"></a><a id="SQLRF56965"></a><a id="SQLRF56966"></a><a id="SQLRF56967"></a><a id="SQLRF56968"></a><a id="SQLRF56969"></a><a id="SQLRF56970"></a><a id="SQLRF56971"></a><a id="SQLRF56963"></a><div class="props_rev_3"><a id="GUID-DEF7941B-1267-44E7-8514-5CD448503179" name="GUID-DEF7941B-1267-44E7-8514-5CD448503179"></a><h3 id="SQLRF-GUID-DEF7941B-1267-44E7-8514-5CD448503179" class="sect3">JSON_TEXTCONTAINS条件</h3>
               <div>
                  <div class="section">
                     <p>使用SQL / JSON条件<code class="codeph">JSON_TEXTCONTAINS</code>来测试JSON属性值中是否存在指定的字符串。您可以使用此条件来过滤特定单词或数字上的JSON数据。
                     </p>
                     <p>此条件采用以下参数：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>包含JSON数据的表或视图列。必须在列上定义JSON搜索索引，该索引是专门为与JSON数据一起使用而设计的Oracle Text索引。列中的每行JSON数据称为<span class="bold">JSON</span> <span class="bold">文档</span> 。
                           </p>
                        </li>
                        <li>
                           <p>SQL / JSON路径表达式。路径表达式应用于每个JSON文档，以尝试匹配文档中的特定JSON对象。路径表达式只能包含JSON对象步骤;它不能包含JSON数组步骤。</p>
                        </li>
                        <li>
                           <p>一个字符串。条件搜索匹配的JSON对象中的所有字符串和数字属性值中的字符串，包括数组值。该字符串必须作为属性值中的单独单词存在。例如，如果您搜索“beth”，则会找到字符串属性值“beth smith”的匹配项，但不会找到“elizabeth smith”。如果搜索“10”，则会找到数字属性值10或字符串属性值“10 main street”的匹配项，但找不到数字属性值110或字符串属性值“102 main street”的匹配项。</p>
                        </li>
                     </ul>
                     <p>如果找到匹配，则此条件返回<code class="codeph">TRUE</code>如果未找到匹配，则返回<code class="codeph">FALSE</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-301AA595-00D6-45FB-933E-B20CF963E2B5"><span class="italic">JSON_textcontains_condition</span> :: =</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="figure" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-3E954596-C48B-4B03-890E-DC1F229CD829"><img src="img/json_textcontains_condition.gif" alt="下面是json_textcontains_condition.eps的描述" title="下面是json_textcontains_condition.eps的描述" longdesc="img_text/json_textcontains_condition.html"><br><a href="img_text/json_textcontains_condition.html">说明json_textcontains_condition.eps的描述</a></div>
                     <!-- class="figure" -->
                     <p>（ <span class="italic"><code class="codeph">JSON_basic_path_expression</code></span> ：请参阅<a href="../adjsn/diagrams-basic-sql-json-path-expression-syntax.html#ADJSN-GUID-8241AE93-89BE-40E6-89E2-8F9C1A9244F4" target="_blank"><span><cite>Oracle数据库JSON开发人员指南</cite></span></a> ）</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-687EEA6F-B377-410A-AE1E-3AD6BDAED0E6"><span class="italic">柱</span></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>指定包含要测试的JSON数据的表或视图列的名称。该列必须是数据类型<code class="codeph">VARCHAR2</code> ， <code class="codeph">CLOB</code>或<code class="codeph">BLOB</code> 。必须在列上定义JSON搜索索引，该索引是专门为与JSON数据一起使用而设计的Oracle Text索引。如果列值为null或长度为零的文本文字，则条件返回<code class="codeph">UNKNOWN</code> 。</p>
                     <p>如果列值不是使用strict或lax语法的格式良好的JSON数据的文本文本，则条件返回<code class="codeph">FALSE</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-0C03E327-1E8B-4F69-B106-582C3E11873E"><span class="italic">JSON_basic_path_expression</span></p>
                     <p>使用此子句指定SQL / JSON路径表达式。条件使用路径表达式来计算<span class="italic"><code class="codeph">column</code></span>并确定是否存在匹配或满足路径表达式的JSON值。路径表达式必须是文本文字。有关<span class="italic"><code class="codeph">JSON_basic_path_expression</code></span>的完整语义，请参阅<a href="../adjsn/json-path-expressions.html#ADJSN-GUID-7B610884-39CD-4910-85E7-C251D342D879" target="_blank"><span><cite>Oracle Database JSON Developer's Guide</cite></span></a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-A8B72B7A-9623-4F87-961D-A1090AEF0BB3"><span class="italic">串</span></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>条件搜索string指定的<span class="italic"><code class="codeph">string</code></span> 。该字符串必须用单引号括起来。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DEF7941B-1267-44E7-8514-5CD448503179__GUID-4DB3AB41-3B33-465B-93E4-81B7870BF5E1">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下语句创建具有列<code class="codeph">family_doc</code>表<code class="codeph">families</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE系列（family_doc VARCHAR2（200））;</pre><p>以下语句在列<code class="codeph">family_doc</code>上创建JSON搜索索引：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX ix ON系列（family_doc）INDEXTYPE是CTXSYS.CONTEXT参数（'SECTION GROUP CTXSYS.JSON_SECTION_GROUP SYNC（ON COMMIT）'）;</pre><p>以下语句将描述族的JSON文档插入到列<code class="codeph">family_doc</code> ：</p><pre class="oac_no_warn" dir="ltr">插入家庭VALUES（'{family：{id：10，年龄：[40,38,12]，地址：{street：“10 Main Street”}}}'）;插入家庭VALUES（'{family：{id：11，年龄：[42,40,10,5]，地址：{street：“200 East Street”，apt：20}}}'）;插入家庭VALUES（'{family：{id：12，年龄：[25,23]，地址：{street：“300 Oak Street”，apt：10}}}'）;</pre><p>以下语句提交事务：</p><pre class="oac_no_warn" dir="ltr">承诺;</pre><p>以下查询返回文档中任何属性值中包含<code class="codeph">10</code>的JSON文档：</p><pre class="oac_no_warn" dir="ltr">SELECT family_doc FROM系列WHERE JSON_TEXTCONTAINS（family_doc，'$'，'10'）; FAMILY_DOC ------------------------------------------------- ------------------------------- {family：{id：10，年龄：[40,38,12]，地址：{street：“10 Main Street”}}}} {family：{id：11，年龄：[42,40,10,5]，地址：{street：“200 East Street”，apt：20}}} {家庭：{id：12，年龄：[25,23]，地址：{street：“300 Oak Street”，apt：10}}}</pre><p>以下查询返回<code class="codeph">id</code>属性值中包含10的JSON文档：</p><pre class="oac_no_warn" dir="ltr">SELECT family_doc来自其中json_textcontains的家族（family_doc，'$ .family.id'，'10'）; FAMILY_DOC ------------------------------------------------- ------------------------------- {family：{id：10，年龄：[40,38,12]，地址：{街道：“10大街”}}}</pre><p>下面的查询返回的值的数组中有10 JSON文件<code class="codeph">ages</code>属性：</p><pre class="oac_no_warn" dir="ltr">SELECT family_doc FROM系列WHERE JSON_TEXTCONTAINS（family_doc，'$ .family.ages'，'10'）; FAMILY_DOC ------------------------------------------------- ------------------------------- {family：{id：11，年龄：[42,40,10,5] ，地址：{street：“200 East Street”，apt：20}}}</pre><p>以下查询返回<code class="codeph">address</code>属性值中包含10的JSON文档：</p><pre class="oac_no_warn" dir="ltr">SELECT family_doc FROM系列WHERE JSON_TEXTCONTAINS（family_doc，'$ .family.address'，'10'）; FAMILY_DOC ------------------------------------------------- ------------------------------- {family：{id：10，年龄：[40,38,12]，地址：{street：“10 Main Street”}}} {family：{id：12，年龄：[25,23]，地址：{street：“300 Oak Street”，apt：10}}}</pre><p>以下查询返回<code class="codeph">apt</code>属性值中包含10的JSON文档：</p><pre class="oac_no_warn" dir="ltr">SELECT family_doc FROM系列WHERE JSON_TEXTCONTAINS（family_doc，'$ .family.address.apt'，'10'）; FAMILY_DOC ------------------------------------------------- ------------------------------- {family：{id：12，年龄：[25,23]，地址：{街：“300 Oak Street”，地址：10}}}</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>在SQL * Plus中使用脚本</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide and Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide and Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sqlplus-users-guide-and-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T05:48:09-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96459-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="SQL-Plus-basics.html" title="Previous" type="text/html"></link>
      <link rel="next" href="formatting-SQL-Plus-reports.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL*Plus User&#39;s Guide and Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQPUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SQL-Plus-basics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="formatting-SQL-Plus-reports.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指南和参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-SQL-Plus.html" property="item" typeof="WebPage"><span property="name">使用SQL * Plus</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在SQL * Plus中使用脚本</li>
            </ol>
            <a id="GUID-DFCF7A00-B15A-4B10-8493-46D2248BCC2A" name="GUID-DFCF7A00-B15A-4B10-8493-46D2248BCC2A"></a><a id="SQPUG015"></a>
            
            <h2 id="SQPUG-GUID-DFCF7A00-B15A-4B10-8493-46D2248BCC2A" class="sect2"><span class="enumeration_chapter">5</span>在SQL * Plus中使用脚本</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章帮助您学习编写和编辑包含SQL * Plus命令，SQL命令和PL / SQL块的脚本。它包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-E9305EF3-85CF-49BF-AB4D-E2BBBA2C8025">关于编辑脚本</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-AE1E6E02-4992-4EB8-A321-F5A0B8651617">关于在SQL * Plus命令行中编辑脚本</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-BA55A3E2-19A9-4331-AFEE-F6FD81397181">关于在脚本中放置注释</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-C00A6D73-48A9-4C51-BB7C-A120BC8B8BDA">运行脚本</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-619EAD89-0F4A-47FC-886A-A79228A9F8D6">嵌套脚本</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-27BCB57D-4B87-432C-8F1F-7B26F61EAA7F">关于退出带有返回代码的脚本</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-026B5022-3F51-4306-A48C-F12DE48DB174">定义替换变量</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-843C726C-F57D-46B7-B3E8-CE4B75AE4191">关于使用预定义变量</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-68AC9FF2-B92A-48D1-9699-133D47F8DDC1">使用替换变量</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-678E9B76-3E97-4E00-B869-939FF2D43E3F">通过START命令传递参数</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-573671D6-ACFD-4C1D-A29D-D6C50A95056C">关于与用户通信</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-B52D6F2E-A28A-48B6-B73F-6A9D018BD107">关于使用绑定变量</a></p>
                  </li>
                  <li>
                     <p><a href="using-scripts-in-SQL-Plus.html#GUID-40F6AC0B-B312-4BAB-8709-D15D24514D0F">从PL / SQL块内的SELECT中获取迭代结果</a></p>
                  </li>
               </ul>
               <p>坐在您的计算机上阅读本章并尝试显示的示例。在开始之前，请确保您可以访问<a id="d9848e91" class="indexterm-anchor"></a><a id="d9848e95" class="indexterm-anchor"></a> <a href="SQL-Plus-quick-start.html#GUID-2AA5AAC7-6027-4B2F-8442-C1EA79D9956B">SQL * Plus概述中</a>描述的示例模式。
               </p>
            </div><a id="SQPUG409"></a><div class="props_rev_3"><a id="GUID-E9305EF3-85CF-49BF-AB4D-E2BBBA2C8025" name="GUID-E9305EF3-85CF-49BF-AB4D-E2BBBA2C8025"></a><h3 id="SQPUG-GUID-E9305EF3-85CF-49BF-AB4D-E2BBBA2C8025" class="sect3"><span class="enumeration_section">5.1</span>关于编辑脚本</h3>
               <div>
                  <p>在SQL * Plus命令行中，将外部编辑器与@，@@或START命令结合使用是创建和执行通用脚本的有效方法。您可以编写包含SQL * Plus，SQL和PL / SQL命令的脚本， <a id="d9848e126" class="indexterm-anchor"></a>您可以检索和编辑。这对于存储复杂命令或常用报告特别有用。
                  </p>
               </div><a id="SQPUG411"></a><a id="SQPUG410"></a><div class="props_rev_3"><a id="GUID-430B6622-B743-46C2-B330-BDCA85125160" name="GUID-430B6622-B743-46C2-B330-BDCA85125160"></a><h4 id="SQPUG-GUID-430B6622-B743-46C2-B330-BDCA85125160" class="sect4"><span class="enumeration_section">5.1.1</span>使用系统编辑器编写脚本</h4>
                  <div>
                     <div class="section">
                        <p>你的操作系统<a id="d9848e155" class="indexterm-anchor"></a>可能有一个或多个文本编辑器<a id="d9848e160" class="indexterm-anchor"></a><a id="d9848e164" class="indexterm-anchor"></a>您可以用来编写脚本。您可以通过输入EDIT来运行操作系统的默认文本编辑器，而无需离开SQL * Plus命令行<a id="d9848e169" class="indexterm-anchor"></a>命令。
                        </p>
                        <p>您可以使用SQL * Plus DEFINE <a id="d9848e174" class="indexterm-anchor"></a>命令来定义变量， <a id="d9848e179" class="indexterm-anchor"></a><a id="d9848e181" class="indexterm-anchor"></a> _编辑<a id="d9848e186" class="indexterm-anchor"></a> ，保存首选文本编辑器的名称。例如，要将EDIT使用的编辑器定义为vi，请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">DEFINE _EDITOR = vi</pre><p>您可以在用户或站点配置文件中包含编辑器定义，以便在启动SQL * Plus时始终启用它。有关详细信息，请参阅<a href="configuring-SQL-Plus.html#GUID-410DDF15-7230-4238-B3FF-BA965CE16B2E">SQL * Plus配置</a>以及<a href="DEFINE.html#GUID-72D4998C-EC2C-4FA6-9F7F-A305C407D666">DEFINE</a>和<a href="EDIT.html#GUID-25BC5CA1-4B03-4186-8ED3-715B5C6A6C42">EDIT</a>命令。
                        </p>
                        <p>创建脚本<a id="d9848e207" class="indexterm-anchor"></a>使用文本编辑器，输入EDIT <a id="d9848e212" class="indexterm-anchor"></a>后跟要编辑或创建的文件的名称，例如：</p><pre class="oac_no_warn" dir="ltr">编辑销售</pre><p>编辑添加文件扩展名。除非您指定文件扩展名，否则使用SQL作为名称。使用文本编辑器保存脚本时，会将其保存回同一文件中。EDIT允许您创建或修改脚本。</p>
                        <p>必须在每个SQL命令的末尾包含一个分号，并在文件中的每个PL / SQL块之后在一行上包含斜杠（/）。您可以包含多个SQL命令<a id="d9848e223" class="indexterm-anchor"></a>和脚本中的PL / SQL块<a id="d9848e228" class="indexterm-anchor"></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-430B6622-B743-46C2-B330-BDCA85125160__I1210192">
                        <p class="titleinexample">示例5-1使用系统编辑器编写SQL脚本</p>
                        <p>假设您已经编写了一个查询来显示销售人员及其佣金的列表。您计划每月运行一次，以跟踪每位员工的表现。</p>
                        <p>要使用系统编辑器编写和保存查询，请调用编辑器并创建一个文件来保存脚本：</p><pre class="oac_no_warn" dir="ltr">编辑销售<a id="d9848e242" class="indexterm-anchor"></a><a id="d9848e246" class="indexterm-anchor"></a></pre><p>在编辑器中输入以下每一行。不要忘记在SQL语句的末尾包含分号：</p><pre class="oac_no_warn" dir="ltr">COLUMN LAST_NAME标题'姓名'栏目标题'每月薪水'格式$ 99,999 COLUMN COMMISSION_PCT HEADING'COMMISSION％'格式90.90从EMP_DETAILS_VIEW中选择LAST_NAME，SALARY，COMMISSION_PCT JOB_ID ='SA_MAN';</pre><p>列COMMISSION_PCT的格式模型告诉SQL * Plus显示十进制值的初始零，当给定行的COMMISSION_PCT值为零时，显示零而不是空白。<a href="COLUMN.html#GUID-643B665F-B134-4A0B-88F7-10400D6D199E">COLUMN</a>命令和<a href="../sqlrf/Format-Models.html#SQLRF-GUID-DFB23985-2943-4C6A-96DF-DF0F664CED96" target="_blank">格式模型</a>中更详细地描述了格式模型和COLUMN命令。
                        </p>
                        <p>现在使用编辑器的保存<a id="d9848e264" class="indexterm-anchor"></a>用于将查询存储在文件中的命令<a id="d9848e269" class="indexterm-anchor"></a>叫SALES.SQL。</p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="SQPUG413"></a><a id="SQPUG412"></a><div class="props_rev_3"><a id="GUID-AE1E6E02-4992-4EB8-A321-F5A0B8651617" name="GUID-AE1E6E02-4992-4EB8-A321-F5A0B8651617"></a><h3 id="SQPUG-GUID-AE1E6E02-4992-4EB8-A321-F5A0B8651617" class="sect3"><span class="enumeration_section">5.2</span>关于在SQL * Plus命令行中编辑脚本</h3>
               <div>
                  <p>您可以使用许多SQL * Plus命令来编辑SQL命令<a id="d9848e307" class="indexterm-anchor"></a>或PL / SQL块<a id="d9848e314" class="indexterm-anchor"></a>目前存储在缓冲区中。
                  </p>
                  <p><a href="using-scripts-in-SQL-Plus.html#GUID-AE1E6E02-4992-4EB8-A321-F5A0B8651617__CCHBCFHJ" title="显示命令行脚本编辑命令，缩写和说明。">表5-1</a>列出了SQL * Plus命令，这些命令允许您在不重新输入命令的情况下检查或更改缓冲区中的命令。
                  </p>
                  <div class="tblformal" id="GUID-AE1E6E02-4992-4EB8-A321-F5A0B8651617__CCHBCFHJ">
                     <p class="titleintable">表5-1 SQL * Plus编辑命令</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SQL * Plus编辑命令" width="100%" border="1" summary="Shows command-line script editing commands, abbreviations, and descriptions." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d9848e336">命令</th>
                              <th align="left" valign="bottom" width="17%" id="d9848e339">缩写</th>
                              <th align="left" valign="bottom" width="52%" id="d9848e342">目的</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e347" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">附加<a id="d9848e350" class="indexterm-anchor"></a> <span class="italic">文本</span></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e347 d9848e339 "><pre class="oac_no_warn" dir="ltr">一个<span class="italic">文字</span></pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e347 d9848e342 ">
                                 <p>在当前行的末尾添加<span class="italic">文本</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e367" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">更改<a id="d9848e370" class="indexterm-anchor"></a> /老新</pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e367 d9848e339 "><pre class="oac_no_warn" dir="ltr">C / <span class="italic">旧</span> / <span class="italic">新</span></pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e367 d9848e342 ">
                                 <p>在当前行中将<span class="italic">旧值</span>更改为<span class="italic">新值</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e391" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">改变/ <span class="italic">文字</span></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e391 d9848e339 "><pre class="oac_no_warn" dir="ltr">C / <span class="italic">文本</span></pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e391 d9848e342 ">
                                 <p>从当前行删除<span class="italic">文本</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e408" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">明确<a id="d9848e411" class="indexterm-anchor"></a>缓冲<a id="d9848e416" class="indexterm-anchor"></a></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e408 d9848e339 "><pre class="oac_no_warn" dir="ltr">CL BUFF</pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e408 d9848e342 ">
                                 <p>删除<a id="d9848e424" class="indexterm-anchor"></a>所有线路<a id="d9848e429" class="indexterm-anchor"></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e434" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">DEL<a id="d9848e437" class="indexterm-anchor"></a></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e434 d9848e339 ">
                                 <p>（没有）</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d9848e434 d9848e342 ">
                                 <p>删除当前行</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e446" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">DEL <span class="italic">n</span></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e446 d9848e339 ">
                                 <p>（没有）</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d9848e446 d9848e342 ">
                                 <p>删除行<span class="italic">n</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e460" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">DEL * <a id="d9848e463" class="indexterm-anchor"></a> <a id="d9848e468" class="indexterm-anchor"></a></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e460 d9848e339 ">
                                 <p>（没有）</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d9848e460 d9848e342 ">
                                 <p>删除当前行<a id="d9848e478" class="indexterm-anchor"></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e483" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">DEL <span class="italic">n</span> *</pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e483 d9848e339 ">
                                 <p>（没有）</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d9848e483 d9848e342 ">
                                 <p>通过当前行删除行<span class="italic">n</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e499" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">DEL LAST</pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e499 d9848e339 ">
                                 <p>（没有）</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d9848e499 d9848e342 ">
                                 <p>删除最后一行<a id="d9848e508" class="indexterm-anchor"></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e513" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">DEL <span class="italic">m</span> <span class="italic">n</span></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e513 d9848e339 ">
                                 <p>（没有）</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d9848e513 d9848e342 ">
                                 <p>删除一系列行（ <span class="italic">m</span>到<span class="italic">n</span> ）<a id="d9848e533" class="indexterm-anchor"></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e538" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">DEL * <span class="italic">n</span></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e538 d9848e339 ">
                                 <p>（没有）</p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d9848e538 d9848e342 ">
                                 <p>通过第<span class="italic">n</span>行删除当前行</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e553" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">INPUT<a id="d9848e556" class="indexterm-anchor"></a></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e553 d9848e339 "><pre class="oac_no_warn" dir="ltr">一世</pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e553 d9848e342 ">
                                 <p>添加一行或多行</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e565" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">输入<span class="italic">文字</span></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e565 d9848e339 "><pre class="oac_no_warn" dir="ltr">我发<span class="italic">短信</span></pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e565 d9848e342 ">
                                 <p>添加由<span class="italic">文本</span>组成的行</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e581" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">LIST<a id="d9848e584" class="indexterm-anchor"></a><a id="d9848e586" class="indexterm-anchor"></a></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e581 d9848e339 "><pre class="oac_no_warn" dir="ltr">;或L.</pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e581 d9848e342 ">
                                 <p>列出所有行<a id="d9848e594" class="indexterm-anchor"></a><a id="d9848e598" class="indexterm-anchor"></a>在SQL缓冲区中</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e604" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr"><span class="italic">LISTñ</span></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e604 d9848e339 "><pre class="oac_no_warn" dir="ltr">L <span class="italic">n</span>或<span class="italic">n</span></pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e604 d9848e342 ">
                                 <p>列出行<span class="italic">n</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e623" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">清单* <a id="d9848e626" class="indexterm-anchor"></a> <a id="d9848e631" class="indexterm-anchor"></a></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e623 d9848e339 "><pre class="oac_no_warn" dir="ltr">L *</pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e623 d9848e342 ">
                                 <p>列出当前行<a id="d9848e641" class="indexterm-anchor"></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e646" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">列表<span class="italic">n</span> *</pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e646 d9848e339 "><pre class="oac_no_warn" dir="ltr">L的<span class="italic">正</span> *</pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e646 d9848e342 ">
                                 <p>列出当前行的行<span class="italic">n</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e665" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">列表最后</pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e665 d9848e339 "><pre class="oac_no_warn" dir="ltr">L LAST</pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e665 d9848e342 ">
                                 <p>列出最后一行<a id="d9848e674" class="indexterm-anchor"></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e679" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">列表<span class="italic">m</span> <span class="italic">n</span></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e679 d9848e339 "><pre class="oac_no_warn" dir="ltr">L <span class="italic">m</span> <span class="italic">n</span></pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e679 d9848e342 ">
                                 <p>列出一系列行（ <span class="italic">m</span>到<span class="italic">n</span> ）<a id="d9848e704" class="indexterm-anchor"></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d9848e709" headers="d9848e336 "><pre class="oac_no_warn" dir="ltr">列表* <span class="italic">n</span></pre></td>
                              <td align="left" valign="top" width="17%" headers="d9848e709 d9848e339 "><pre class="oac_no_warn" dir="ltr">L * <span class="italic">n</span></pre></td>
                              <td align="left" valign="top" width="52%" headers="d9848e709 d9848e342 ">
                                 <p>列出通过第<span class="italic">n</span>行的当前行</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>如果要更正或修改已输入的命令，这些选项很有用。</p>
               </div><a id="SQPUG415"></a><a id="SQPUG414"></a><div class="props_rev_3"><a id="GUID-72C6ECF8-E83F-4ECA-8A82-9D8B94270070" name="GUID-72C6ECF8-E83F-4ECA-8A82-9D8B94270070"></a><h4 id="SQPUG-GUID-72C6ECF8-E83F-4ECA-8A82-9D8B94270070" class="sect4"><span class="enumeration_section">5.2.1</span>列出缓冲区内容</h4>
                  <div>
                     <div class="section">
                        <p>SQL缓冲区包含最后一个SQL或PL / SQL命令。除LIST和DEL之外的任何编辑命令仅影响缓冲区中的单行<a id="d9848e750" class="indexterm-anchor"></a> 。该行称为当前行。列出当前命令时，它标有星号<a id="d9848e755" class="indexterm-anchor"></a>或阻止<a id="d9848e762" class="indexterm-anchor"></a> 。
                        </p><pre class="pre codeblock"><code>从EMP_DETAILS_VIEW中选择EMPLOYEE_ID，LAST_NAME，JOB_ID，SALARY 2 *在哪里SALARY&gt; 12000</code></pre><p>请注意，未列出您在SELECT命令末尾输入的分号。这个分号<a id="d9848e771" class="indexterm-anchor"></a>在输入命令时必须指示命令的结束，但它不是SQL命令的一部分，SQL * Plus不会将其存储在SQL缓冲区中。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-72C6ECF8-E83F-4ECA-8A82-9D8B94270070__GUID-35E4D877-2D23-4392-B02C-D5638C4437F8">
                        <p class="titleinexample">例5-2列出缓冲区内容</p>
                        <p>假设您要列出当前命令。使用LIST命令，如图所示。（如果您按照<a href="SQL-Plus-basics.html#GUID-19D38608-829E-49BC-A452-50895163E311__I1039424">示例4-3中</a>的步骤退出SQL * Plus或输入了另一个SQL命令或PL / SQL块，请在继续之前再次执行该示例中的步骤。）
                        </p><pre class="oac_no_warn" dir="ltr">LIST</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="SQPUG417"></a><a id="SQPUG418"></a><a id="SQPUG416"></a><div class="props_rev_3"><a id="GUID-0A853493-EC7D-416C-ABAD-D6C7F8624902" name="GUID-0A853493-EC7D-416C-ABAD-D6C7F8624902"></a><h4 id="SQPUG-GUID-0A853493-EC7D-416C-ABAD-D6C7F8624902" class="sect4"><span class="enumeration_section">5.2.2</span>编辑当前行</h4>
                  <div>
                     <div class="section">
                        <p>SQL * Plus CHANGE <a id="d9848e810" class="indexterm-anchor"></a>命令使您可以编辑<a id="d9848e813" class="indexterm-anchor"></a>当前行。 <a id="d9848e818" class="indexterm-anchor"></a> 各种动作决定了哪条线<a id="d9848e823" class="indexterm-anchor"></a>是当前行：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>LIST <a id="d9848e833" class="indexterm-anchor"></a>给定的一行使其成为当前行。
                              </p>
                           </li>
                           <li>
                              <p>当你列出<a id="d9848e841" class="indexterm-anchor"></a>或跑<a id="d9848e846" class="indexterm-anchor"></a>缓冲区中的命令，命令的最后一行成为当前行。（注意，使用斜杠（/）命令在缓冲区中运行命令不会影响当前行。）
                              </p>
                           </li>
                           <li>
                              <p>如果你收到错误<a id="d9848e854" class="indexterm-anchor"></a> ，错误行自动成为当前行。
                              </p>
                           </li>
                        </ul><pre class="pre codeblock"><code>第1行的SELECT EMPLOYEE_ID，LAST_NAME，JO_ID，SALARY * ERROR：ORA-00904：列名无效</code></pre><p>检查错误消息;它表示查询的第1行中的列名无效。星号显示错误点 - 错误键入的列JOB_ID。</p>
                        <p>您可以通过编辑缓冲区中的命令来纠正错误，而不是重新输入整个命令。包含错误的行现在是当前行。使用CHANGE命令更正错误。此命令有三个部分，用斜杠或任何其他非字母数字字符分隔：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>改变一词或字母C.</p>
                           </li>
                           <li>
                              <p>要更改的字符序列</p>
                           </li>
                           <li>
                              <p>替换字符序列</p>
                           </li>
                        </ul>
                        <p>CHANGE命令查找要更改的字符序列的当前行中的第一个匹配项，并将其更改为新序列。您无需使用CHANGE命令重新输入整行。</p><pre class="pre codeblock"><code>1 * SELECT EMPLOYEE_ID，FIRST_NAME，JOB_ID，SALARY</code></pre><p>现在您已更正错误，可以使用RUN命令再次运行该命令：</p><pre class="oac_no_warn" dir="ltr">跑</pre><p>SQL * Plus正确显示查询及其结果：</p><pre class="pre codeblock"><code>1选择EMPLOYEE_ID，LAST_NAME，JOB_ID，SALARY 2来自EMP_DETAILS_VIEW 3 * WHERE JOB_ID ='SA_MAN'EMPLOYEE_ID LAST_NAME JOB_ID每月SALARY ----------- -------------- ----------- ---------- -------------- 145 Russell SA_MAN $ 14,000 146合作伙伴SA_MAN $ 13,500 147 Errazuriz SA_MAN $ 12,000 148 Cambrault SA_MAN $ 11,000 149 Zlotkey SA_MAN $ 10,500</code></pre><p>请注意，SALARY列保留了<a href="SQL-Plus-basics.html#GUID-884295EA-F37A-4445-9708-298B738CFECA__I1039769">示例4-4中</a>给出的格式。（如果您已离开SQL * Plus并自执行<a href="SQL-Plus-basics.html#GUID-884295EA-F37A-4445-9708-298B738CFECA__I1039769">示例4-4后</a>再次启动，则该列已恢复为其原始格式。）
                        </p>
                        <p>有关<a href="CHANGE.html#GUID-9002CADF-74E2-427D-A404-F8019C7A2791">CHANGE</a>命令中case的重要性以及使用通配符在CHANGE命令中指定文本块的信息，请参阅<a href="CHANGE.html#GUID-9002CADF-74E2-427D-A404-F8019C7A2791">CHANGE</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0A853493-EC7D-416C-ABAD-D6C7F8624902__GUID-DD589681-BDFF-47E1-A4B4-61A15A05504D">
                        <p class="titleinexample">示例5-3在命令项中出错</p>
                        <p>假设您尝试选择JOB_ID列但错误地将其输入为JO_ID。输入以下命令，故意在第一行拼写错误的JOB_ID：</p><pre class="oac_no_warn" dir="ltr">SELECT EMPLOYEE_ID，LAST_NAME，JO_ID，SALARY FROM EMP_DETAILS_VIEW WHERE JOB_ID ='SA_MAN';</pre><p>您在屏幕上看到此消息：</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-0A853493-EC7D-416C-ABAD-D6C7F8624902__I1210512">
                        <p class="titleinexample">示例5-4纠正错误</p>
                        <p>要将JO_ID更改为JOB_ID，请使用CHANGE命令更改该行：</p><pre class="oac_no_warn" dir="ltr">CHANGE / JO_ID / JOB_ID</pre><p>修正后的行显示在屏幕上：</p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="SQPUG420"></a><a id="SQPUG419"></a><div class="props_rev_3"><a id="GUID-5E790971-210F-45A9-A2CE-54C7BC16FA42" name="GUID-5E790971-210F-45A9-A2CE-54C7BC16FA42"></a><h4 id="SQPUG-GUID-5E790971-210F-45A9-A2CE-54C7BC16FA42" class="sect4"><span class="enumeration_section">5.2.3</span>在行中附加文本</h4>
                  <div>
                     <div class="section">
                        <p>添加文字<a id="d9848e943" class="indexterm-anchor"></a>到一条线的尽头<a id="d9848e948" class="indexterm-anchor"></a>在缓冲区<a id="d9848e953" class="indexterm-anchor"></a> ，使用APPEND <a id="d9848e958" class="indexterm-anchor"></a>命令。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用LIST命令（或行号）列出要更改的行。</span><div></div>
                        </li>
                        <li class="stepexpand"><span>输入APPEND，然后输入要添加的文本。如果要添加的文本以空白开头，请将APPEND与文本的第一个字符分开两个空格：一个用于将APPEND与文本分开，另一个用文本进入缓冲区。</span><div></div>
                        </li>
                     </ol>
                     <div class="example" id="GUID-5E790971-210F-45A9-A2CE-54C7BC16FA42__GUID-C250624C-1410-422F-990D-F860D184F150">
                        <p class="titleinexample">示例5-5将文本附加到行</p>
                        <p>要将空格和子句DESC附加到当前查询的第4行，请先列出第4行：</p><pre class="oac_no_warn" dir="ltr">清单4</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5E790971-210F-45A9-A2CE-54C7BC16FA42__GUID-E83F601A-60A6-4571-B615-E8D810BF82CE"><pre class="pre codeblock"><code>4 *按薪酬排序</code></pre><p>接下来，输入以下命令（确保在APPEND和DESC之间键入两个空格）：</p><pre class="oac_no_warn" dir="ltr">APPEND DESC</pre><pre class="pre codeblock"><code>4 * SALARY DESC令</code></pre><p>键入RUN以验证查询：</p><pre class="pre codeblock"><code>1选择EMPLOYEE_ID，LAST_NAME，JOB_ID，SALARY 2来自EMP_DETAILS_VIEW 3 WHERE JOB_ID ='SA_MAN'4 *订购SALARY DESC EMPLOYEE_ID LAST_NAME JOB_ID每月薪资----------- --------- ---------------- ---------- -------------- 145 Russell SA_MAN $ 14,000 146合作伙伴SA_MAN $ 13,500 147 Errazuriz SA_MAN $ 12,000 148 Cambrault SA_MAN $ 11,000 149 Zlotkey SA_MAN $ 10,500</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="SQPUG422"></a><a id="SQPUG421"></a><div class="props_rev_3"><a id="GUID-B2E6812D-897D-4DDC-99F2-6FC10DC9D64E" name="GUID-B2E6812D-897D-4DDC-99F2-6FC10DC9D64E"></a><h4 id="SQPUG-GUID-B2E6812D-897D-4DDC-99F2-6FC10DC9D64E" class="sect4"><span class="enumeration_section">5.2.4</span>添加新行</h4>
                  <div>
                     <div class="section">
                        <p>要插入<a id="d9848e1014" class="indexterm-anchor"></a>一条新线<a id="d9848e1019" class="indexterm-anchor"></a>在当前行之后，使用INPUT <a id="d9848e1024" class="indexterm-anchor"></a>命令。
                        </p>
                        <p>要在第1行之前插入一行，请输入零（“0”）并使用文本跟随零。SQL * Plus在缓冲区的开头插入行，所有行都从1开始重新编号。</p><pre class="oac_no_warn" dir="ltr">0 SELECT EMPLOYEE_ID</pre><pre class="pre codeblock"><code>4</code></pre><p>输入新行。然后按Return键。</p><pre class="oac_no_warn" dir="ltr">4按薪酬排序</pre><p>SQL * Plus再次提示您输入新行：</p><pre class="pre codeblock"><code>五</code></pre><p>再次按Return键表示您不再输入任何行，然后使用RUN验证并重新运行查询。</p><pre class="pre codeblock"><code>1从EMP_DETAILS_VIEW中选择EMPLOYEE_ID，LAST_NAME，JOB_ID，SALARY 2 3 WHERE JOB_ID ='SA_MAN'4 *按SALARY EMPLOYEE_ID订购LAST_NAME JOB_ID每月薪资----------- ---------- --------------- ---------- -------------- 149 Zlotkey SA_MAN $ 10,500 148 Cambrault SA_MAN $ 11,000 147 Errazuriz SA_MAN $ 12,000 146合作伙伴SA_MAN $ 13,500 145 Russell SA_MAN $ 14,000</code></pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B2E6812D-897D-4DDC-99F2-6FC10DC9D64E__GUID-79C47676-AB41-44D1-89DF-B217AA9D70B4">
                        <p class="titleinexample">例5-6添加一行</p>
                        <p>假设您要在<a href="using-scripts-in-SQL-Plus.html#GUID-0A853493-EC7D-416C-ABAD-D6C7F8624902__I1210512">示例5-4中</a>修改的SQL命令中添加第四行。由于第3行已经是当前行，请输入INPUT并按Return键。
                        </p><pre class="oac_no_warn" dir="ltr">INPUT</pre><p>SQL * Plus会提示您输入新行：</p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="SQPUG423"></a><div class="props_rev_3"><a id="GUID-6B3B23FB-13FF-43B3-B8E2-8E4D055D93D1" name="GUID-6B3B23FB-13FF-43B3-B8E2-8E4D055D93D1"></a><h4 id="SQPUG-GUID-6B3B23FB-13FF-43B3-B8E2-8E4D055D93D1" class="sect4"><span class="enumeration_section">5.2.5</span>删除行</h4>
                  <div>
                     <div class="section">
                        <p><a id="d9848e1078" class="indexterm-anchor"></a>使用DEL <a id="d9848e1083" class="indexterm-anchor"></a>命令删除行<a id="d9848e1086" class="indexterm-anchor"></a>在缓冲区。输入DEL，指定要删除的行号。
                        </p>
                        <p>假设您要删除当前行到最后一行（包括）。使用DEL命令，如图所示。</p><pre class="oac_no_warn" dir="ltr">DEL *最后</pre><p>DEL使缓冲区的下一行（如果有）成为当前行。</p>
                        <p>有关更多信息，请参阅<a href="DEL.html#GUID-BC85B0D4-4AC0-4B0C-82C2-C2563E116A5A">DEL</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SQPUG424"></a><div class="props_rev_3"><a id="GUID-BA55A3E2-19A9-4331-AFEE-F6FD81397181" name="GUID-BA55A3E2-19A9-4331-AFEE-F6FD81397181"></a><h3 id="SQPUG-GUID-BA55A3E2-19A9-4331-AFEE-F6FD81397181" class="sect3"><span class="enumeration_section">5.3</span>关于在脚本中放置注释</h3>
               <div>
                  <p>您可以输入评论<a id="d9848e1126" class="indexterm-anchor"></a>在脚本中<a id="d9848e1131" class="indexterm-anchor"></a>有三种方式：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用SQL * Plus REMARK命令进行单行注释。</p>
                     </li>
                     <li>
                        <p>使用SQL注释分隔符/ * ... * /进行单行或多行注释。</p>
                     </li>
                     <li>
                        <p>使用ANSI / ISO（美国国家标准协会/国际标准组织）评论 -   - 用于单行注释。</p>
                        <p>在命令行输入的注释不存储在SQL缓冲区中。</p>
                     </li>
                  </ul>
               </div><a id="SQPUG425"></a><div class="props_rev_3"><a id="GUID-514A4730-42D1-4B26-B5CA-F4E1CCDDBD45" name="GUID-514A4730-42D1-4B26-B5CA-F4E1CCDDBD45"></a><h4 id="SQPUG-GUID-514A4730-42D1-4B26-B5CA-F4E1CCDDBD45" class="sect4"><span class="enumeration_section">5.3.1</span>使用REMARK命令</h4>
                  <div>
                     <div class="section">
                        <p>使用备注<a id="d9848e1171" class="indexterm-anchor"></a>在脚本中单独命令一行，然后是注释<a id="d9848e1174" class="indexterm-anchor"></a>在同一条线上。要继续对其他行进行注释，请输入其他REMARK命令。不要在单个SQL命令的不同行之间放置REMARK命令。
                        </p><pre class="oac_no_warn" dir="ltr">REMARK委员会报告;备注每月运行。; COLUMN LAST_NAME HEADING'LAST_NAME'; COLUMN SALARY HEADING'每月SALARY'格式$ 99,999; COLUMN COMMISSION_PCT HEADING'COMMISSION％'FORMAT 90.90;备注仅包括销售人员; SELECT LAST_NAME，SALARY，COMMISSION_PCT FROM EMP_DETAILS_VIEW WHERE JOB_ID ='SA_MAN';</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SQPUG426"></a><div class="props_rev_3"><a id="GUID-E2839D99-77DA-4997-8CE8-F33802B794DA" name="GUID-E2839D99-77DA-4997-8CE8-F33802B794DA"></a><h4 id="SQPUG-GUID-E2839D99-77DA-4997-8CE8-F33802B794DA" class="sect4"><span class="enumeration_section">5.3.2</span>使用/ * ...* /</h4>
                  <div>
                     <div class="section">
                        <p>输入SQL注释<a id="d9848e1204" class="indexterm-anchor"></a>分隔符，/ * .. * / <a id="d9848e1209" class="indexterm-anchor"></a> ，在脚本中的单独行上，与SQL命令在同一行上，或在PL / SQL块中的行上。
                        </p>
                        <p>您必须在斜杠（/ *）开头注释后输入一个空格。</p>
                        <p>注释可以跨越多行，但不能嵌套在另一行中：</p><pre class="oac_no_warn" dir="ltr">/ *佣金报告每月运行一次。* / COLUMN LAST_NAME标题'LAST_NAME'; COLUMN SALARY HEADING'每月SALARY'格式$ 99,999; COLUMN COMMISSION_PCT HEADING'COMMISSION％'FORMAT 90.90;备注仅包括销售人员; SELECT LAST_NAME，SALARY，COMMISSION_PCT FROM EMP_DETAILS_VIEW / *仅包括销售人员。* / WHERE JOB_ID ='SA_MAN';</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SQPUG427"></a><div class="props_rev_3"><a id="GUID-6FB74818-2CB2-4B44-9E83-270BEAB8C354" name="GUID-6FB74818-2CB2-4B44-9E83-270BEAB8C354"></a><h4 id="SQPUG-GUID-6FB74818-2CB2-4B44-9E83-270BEAB8C354" class="sect4"><span class="enumeration_section">5.3.3</span>使用 -   -</h4>
                  <div>
                     <div class="section">
                        <p>你可以使用ANSI / ISO“ -   - ” <a id="d9848e1242" class="indexterm-anchor"></a>风格评论<a id="d9848e1245" class="indexterm-anchor"></a>在SQL语句，PL / SQL块或SQL * Plus命令中。由于没有结束分隔符，注释不能跨越多行。
                        </p>
                        <p>对于PL / SQL和SQL，在一行上的命令之后或在一行上输入注释：</p><pre class="oac_no_warn" dir="ltr">- 每月运行的佣金报告DECLARE  - 用于报告月度销售额的块</pre><p>对于SQL * Plus命令，如果它们自己在一行上，则只能包含“ -   - ”样式注释。例如，这些评论是合法的：</p><pre class="oac_no_warn" dir="ltr">- 将LONG的最大宽度设置为777 SET LONG 777</pre><p>这条评论是非法的：</p><pre class="oac_no_warn" dir="ltr">SET LONG 777  - 将LONG的最大宽度设置为777</pre><p>如果输入以下SQL * Plus命令，SQL * Plus会将其解释为注释，并且不执行以下命令：</p><pre class="oac_no_warn" dir="ltr">-  SET LONG 777</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SQPUG428"></a><div class="props_rev_3"><a id="GUID-30DBE334-DA77-4FE3-BA97-45A7BCB5348A" name="GUID-30DBE334-DA77-4FE3-BA97-45A7BCB5348A"></a><h4 id="SQPUG-GUID-30DBE334-DA77-4FE3-BA97-45A7BCB5348A" class="sect4"><span class="enumeration_section">5.3.4</span>关于放置评论的说明</h4>
                  <div>
                     <p>SQL * Plus没有SQL或PL / SQL命令解析器。它会扫描每个新语句的前几个关键字，以确定命令类型，SQL，PL / SQL或SQL * Plus。某些位置的注释可能会阻止SQL * Plus正确识别命令类型，从而产生意外结果。以下使用说明可以帮助您更有效地使用SQL * Plus注释：</p>
                     <ol>
                        <li>
                           <p>不要将注释放在语句的前几个关键字中。例如：</p><pre class="oac_no_warn" dir="ltr">创建或替换2 / * HELLO * / 3程序HELLO 4 BEGIN 5 DBMS_OUTPUT.PUT_LINE（'HELLO'）; 6结束; 7 /警告：使用编译错误创建的过程。</pre><p>注释的位置可防止SQL * Plus将命令识别为命令。当SQL * Plus在注释的开头看到斜杠“/”时，它会将PL / SQL块提交给服务器，它将其解释为“/”语句终止符。移动注释以避免此错误。例如：</p><pre class="oac_no_warn" dir="ltr">创建或替换程序2 / * HELLO * / 3 HELLO作为4 BEGIN 5 DBMS_OUTPUT.PUT_LINE（'HELLO'）; 6结束; 7 /程序已创建。</pre></li>
                        <li>
                           <p>不要在语句终止符（句点，分号或斜杠）之后添加注释。例如，如果输入：</p><pre class="oac_no_warn" dir="ltr">选择'Y'来自DUAL; - 测试</pre><p>您收到以下错误：</p><pre class="pre codeblock"><code>选择'Y'来自DUAL; - 测试*第1行的错误：ORA-00911：无效字符</code></pre><p>SQL * Plus期望语句终止符后没有文本，并且无法处理命令。</p>
                        </li>
                        <li>
                           <p>不要将语句终止字符放在注释行的末尾或SQL语句或PL / SQL块中的注释之后。例如，如果输入：</p><pre class="oac_no_warn" dir="ltr">SELECT *  - 评论;</pre><p>您收到以下错误：</p><pre class="pre codeblock"><code>- 第2行的注释*错误：ORA-00923：未找到FROM关键字</code></pre><p>分号被解释为语句终止符，SQL * Plus将部分形成的SQL命令提交给服务器进行处理，从而导致错误。</p>
                        </li>
                        <li>
                           <p>不要在SQL语句或PL / SQL块中的注释中使用＆符号'＆'。例如，如果输入脚本，例如：</p><pre class="oac_no_warn" dir="ltr">SELECT REGION_NAME，CITY / * THIS＆THAT * / from EMP_DETAILS_VIEW WHERE SALARY&gt; 12000;</pre><p>SQL * Plus将＆符号“＆”后面的文本解释为替换变量，并提示输入变量的值，并且：</p><pre class="pre codeblock"><code>输入值：old 2：/ * THIS＆THAT * / new 2：/ * THIS * / REGION_NAME CITY ------------------------- ------------------------------美洲西雅图美洲西雅图美洲西雅图欧洲牛津欧洲牛津美洲多伦多6排入选。</code></pre><p>您可以设置DEFINE OFF以防止扫描替换字符。</p>
                        </li>
                     </ol>
                     <p>有关替换和终止字符的更多信息，请参阅<a href="SET.html#GUID-9095C4FF-F4EB-4218-84AA-83061186625F">SET</a>命令中的DEFINE，SQLTERMINATOR和SQLBLANKLINES。
                     </p>
                  </div>
               </div>
            </div><a id="SQPUG430"></a><a id="SQPUG429"></a><div class="props_rev_3"><a id="GUID-C00A6D73-48A9-4C51-BB7C-A120BC8B8BDA" name="GUID-C00A6D73-48A9-4C51-BB7C-A120BC8B8BDA"></a><h3 id="SQPUG-GUID-C00A6D73-48A9-4C51-BB7C-A120BC8B8BDA" class="sect3"><span class="enumeration_section">5.4</span>运行脚本</h3>
               <div>
                  <div class="section">
                     <p>开始<a id="d9848e1361" class="indexterm-anchor"></a>命令检索脚本<a id="d9848e1364" class="indexterm-anchor"></a>并运行它包含的命令。使用START <a id="d9848e1369" class="indexterm-anchor"></a>运行脚本<a id="d9848e1374" class="indexterm-anchor"></a>包含SQL命令，PL / SQL块和SQL * Plus命令。您可以在文件中包含许多命令。按照START命令使用文件名：</p><pre class="oac_no_warn" dir="ltr">START <span class="italic">file_name</span></pre><p>SQL * Plus假定文件有。默认情况下为SQL扩展。</p><pre class="pre codeblock"><code>最后一个月的薪酬委员会％------------------------- -------------- ----- ------- Russell $ 14,000 0.40合作伙伴$ 13,500 0.30 Errazuriz $ 12,000 0.30 Cambrault $ 11,000 0.30 Zlotkey $ 10,500 0.20</code></pre><p>你也可以使用@（在标志处） <a id="d9848e1389" class="indexterm-anchor"></a>命令运行脚本<a id="d9848e1394" class="indexterm-anchor"></a> ：</p><pre class="oac_no_warn" dir="ltr">@SALES</pre><p>@ <a id="d9848e1403" class="indexterm-anchor"></a>和@@命令列出并运行指定脚本中的命令<a id="d9848e1408" class="indexterm-anchor"></a>以与START相同的方式<a id="d9848e1413" class="indexterm-anchor"></a> 。 SET ECHO影响@和@@命令的方式与影响START命令的方式相同。
                     </p>
                     <p>要在SQL * Plus“输入”它们时查看命令，可以设置ECHO <a id="d9848e1420" class="indexterm-anchor"></a>上。 ECHO系统变量控制使用START，@和@@命令运行的脚本中的命令列表。将ECHO变量设置为OFF会禁止列表。
                     </p>
                     <p>START，@和@@在缓冲区中保留脚本的最后一个SQL命令或PL / SQL块。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-C00A6D73-48A9-4C51-BB7C-A120BC8B8BDA__GUID-44D0F82E-59B8-46CC-9EAF-E1C59439355C">
                     <p class="titleinexample">例5-7运行脚本</p>
                     <p>要检索并运行SALES.SQL中存储的命令，请输入</p><pre class="oac_no_warn" dir="ltr">开始销售</pre><p>SQL * Plus运行SALES文件中的命令，并在屏幕上显示命令的结果，根据文件中的SQL * Plus命令格式化查询结果：</p>
                  </div>
                  <!-- class="example" -->
               </div><a id="SQPUG431"></a><div class="props_rev_3"><a id="GUID-E373B27D-A922-43D7-8F10-6B00F85C3EAE" name="GUID-E373B27D-A922-43D7-8F10-6B00F85C3EAE"></a><h4 id="SQPUG-GUID-E373B27D-A922-43D7-8F10-6B00F85C3EAE" class="sect4"><span class="enumeration_section">5.4.1</span>启动SQL * Plus时运行脚本</h4>
                  <div>
                     <div class="section">
                        <p>跑一个<a id="d9848e1457" class="indexterm-anchor"></a>脚本<a id="d9848e1462" class="indexterm-anchor"></a>在启动SQL * Plus时，请使用以下选项之一：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用您的用户名，斜杠，空格，@和文件名遵循SQLPLUS命令：</p><pre class="oac_no_warn" dir="ltr">SQLPLUS HR @SALES</pre><p>SQL * Plus启动，提示输入密码并运行脚本。</p>
                           </li>
                           <li>
                              <p>包含您的用户名作为文件的第一行。使用带有@和文件名的SQLPLUS命令。SQL * Plus启动，提示输入密码并运行该文件。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SQPUG432"></a><div class="props_rev_3"><a id="GUID-619EAD89-0F4A-47FC-886A-A79228A9F8D6" name="GUID-619EAD89-0F4A-47FC-886A-A79228A9F8D6"></a><h3 id="SQPUG-GUID-619EAD89-0F4A-47FC-886A-A79228A9F8D6" class="sect3"><span class="enumeration_section">5.5</span>嵌套脚本</h3>
               <div>
                  <div class="section">
                     <p>运行一系列脚本<a id="d9848e1502" class="indexterm-anchor"></a>在<a id="d9848e1507" class="indexterm-anchor"></a>序列，首先创建一个包含多个START命令的脚本，每个命令后跟序列中脚本的名称。然后运行包含START命令的脚本。例如，您可以在名为SALESRPT的脚本中包含以下START命令：</p><pre class="oac_no_warn" dir="ltr">开始Q1SALES开始Q2SALES开始Q3SALES开始Q4SALES开始YRENDSLS</pre><div class="infoboxnote" id="GUID-619EAD89-0F4A-47FC-886A-A79228A9F8D6__GUID-DCEA8A51-DF6E-42EC-8432-C84925BE9605">
                        <p class="notep1">注意：</p>
                        <p>在这个例子中，@@命令可能很有用。有关更多信息，请参阅<a href="double-at-sign.html#GUID-AD1F392F-8D07-4424-8376-0FE3A721E3B1">@@（双符号）</a>命令。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SQPUG433"></a><div class="props_rev_3"><a id="GUID-27BCB57D-4B87-432C-8F1F-7B26F61EAA7F" name="GUID-27BCB57D-4B87-432C-8F1F-7B26F61EAA7F"></a><h3 id="SQPUG-GUID-27BCB57D-4B87-432C-8F1F-7B26F61EAA7F" class="sect3"><span class="enumeration_section">5.6</span>关于从带有返回码的脚本退出</h3>
               <div>
                  <p>您可以在脚本中包含EXIT命令，以在脚本完成时返回值。有关更多信息，请参阅<a href="EXIT.html#GUID-81B9B8B3-4236-4AAC-9EE8-75B873009D03">EXIT</a>命令。
                  </p>
                  <p>您可以在脚本中包含WHENEVER SQLERROR命令，以便自动退出带有返回代码的SQL * Plus <a id="d9848e1550" class="indexterm-anchor"></a>脚本<a id="d9848e1555" class="indexterm-anchor"></a>生成SQL错误<a id="d9848e1560" class="indexterm-anchor"></a> 。同样，如果发生操作系统错误，您可以包含WHENEVER OSERROR命令以自动退出。有关详细信息，请参阅<a href="WHENEVER-SQLERROR.html#GUID-66C1C12C-5E95-4440-A37B-7CCE7E33491C">WHENEVER SQLERROR</a>命令和<a href="WHENEVER-OSERROR.html#GUID-A52F926F-D6EC-434E-9C7E-CFDB76422E94">WHENEVER OSERROR</a>命令。
                  </p>
               </div>
            </div><a id="SQPUG435"></a><a id="SQPUG434"></a><div class="props_rev_3"><a id="GUID-026B5022-3F51-4306-A48C-F12DE48DB174" name="GUID-026B5022-3F51-4306-A48C-F12DE48DB174"></a><h3 id="SQPUG-GUID-026B5022-3F51-4306-A48C-F12DE48DB174" class="sect3"><span class="enumeration_section">5.7</span>定义替换变量</h3>
               <div>
                  <div class="section">
                     <p>您可以定义变量，称为替换变量， <a id="d9848e1595" class="indexterm-anchor"></a><a id="d9848e1597" class="indexterm-anchor"></a>通过使用SQL * Plus DEFINE命令在单个脚本中重复使用<a id="d9848e1602" class="indexterm-anchor"></a> 。请注意，您还可以定义替换变量<a id="d9848e1605" class="indexterm-anchor"></a>在标题中使用并保存击键（通过将长字符串定义为具有短名称的变量的值）。
                     </p><pre class="pre codeblock"><code>DEFINE L_NAME =“SMITH”（CHAR）</code></pre><p>列出所有替换变量<a id="d9848e1614" class="indexterm-anchor"></a>定义，单独输入DEFINE。请注意，您通过DEFINE显式定义的任何替换变量仅采用CHAR值（即，您分配给该变量的值始终被视为CHAR数据类型）。您可以通过ACCEPT命令隐式定义数据类型NUMBER的替换变量。您将了解有关ACCEPT命令的更多信息。
                     </p>
                     <p>删除替换变量<a id="d9848e1621" class="indexterm-anchor"></a> ，使用SQL * Plus命令UNDEFINE <a id="d9848e1626" class="indexterm-anchor"></a><a id="d9848e1628" class="indexterm-anchor"></a>后跟变量名称。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-026B5022-3F51-4306-A48C-F12DE48DB174__GUID-ED5BAEAE-AC32-464A-B1AF-8BA6193609D3">
                     <p class="titleinexample">例5-8定义替换变量</p>
                     <p>要定义替换变量L_NAME并为其指定值“SMITH”，请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">DEFINE L_NAME = SMITH</pre><p>确认变量<a id="d9848e1642" class="indexterm-anchor"></a>定义，输入DEFINE后跟变量名称：</p><pre class="oac_no_warn" dir="ltr">DEFINE L_NAME</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="SQPUG436"></a><div class="props_rev_3"><a id="GUID-843C726C-F57D-46B7-B3E8-CE4B75AE4191" name="GUID-843C726C-F57D-46B7-B3E8-CE4B75AE4191"></a><h3 id="SQPUG-GUID-843C726C-F57D-46B7-B3E8-CE4B75AE4191" class="sect3"><span class="enumeration_section">5.8</span>关于使用预定义变量</h3>
               <div>
                  <p>有九个变量包含在SQL * Plus安装期间定义的SQL * Plus信息。这些变量可以与任何其他变量重新定义，引用或删除。除非您明确删除或重新定义它们，否则它们始终可用于会话。</p>
                  <div class="infoboxnotealso" id="GUID-843C726C-F57D-46B7-B3E8-CE4B75AE4191__GUID-FFA6553B-D731-4EFF-941D-43F39D935403">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="DEFINE.html#GUID-D6727C11-E4D9-4AB5-A7B8-9C6527A44A50">预定义变量</a>列表中的预定义变量及其使用示例。
                     </p>
                  </div>
               </div>
            </div><a id="SQPUG437"></a><div class="props_rev_3"><a id="GUID-68AC9FF2-B92A-48D1-9699-133D47F8DDC1" name="GUID-68AC9FF2-B92A-48D1-9699-133D47F8DDC1"></a><h3 id="SQPUG-GUID-68AC9FF2-B92A-48D1-9699-133D47F8DDC1" class="sect3"><span class="enumeration_section">5.9</span>使用替代变量</h3>
               <div>
                  <div class="section">
                     <p>假设您要编写一个类似于SALES中的查询来列出具有各种作业的员工，而不仅仅是那些工作是SA_MAN的员工。您可以通过在每次运行命令时将不同的值编辑到WHERE子句中来实现，但有一种更简单的方法。</p>
                     <p>通过使用替换变量<a id="d9848e1703" class="indexterm-anchor"></a>代替WHERE子句中的文本SA_MAN，如果将值写入命令本身，则可以得到相同的结果。
                     </p>
                     <p>替换变量前面有一个或两个＆符号<a id="d9848e1708" class="indexterm-anchor"></a><a id="d9848e1712" class="indexterm-anchor"></a> （＆）。当SQL * Plus在命令中遇到替换变量时，SQL * Plus会执行命令，就好像它包含替换变量的值，而不是变量本身。
                     </p>
                     <p>例如，如果变量SORTCOL的值为JOB_ID且变量MYTABLE的值为EMP_DETAILS_VIEW，则SQL * Plus执行命令</p><pre class="oac_no_warn" dir="ltr">SELECT＆SORTCOL，SALARY FROM＆MYTABLE WHERE SALARY&gt; 12000;</pre><p>好像他们一样</p><pre class="oac_no_warn" dir="ltr">SELECT JOB_ID，SALARY FROM EMP_DETAILS_VIEW WHERE SALARY&gt; 12000;</pre></div>
                  <!-- class="section" -->
               </div><a id="SQPUG439"></a><a id="SQPUG438"></a><div class="props_rev_3"><a id="GUID-DD1BE849-0B66-4F99-83D0-F3B9F5A0D361" name="GUID-DD1BE849-0B66-4F99-83D0-F3B9F5A0D361"></a><h4 id="SQPUG-GUID-DD1BE849-0B66-4F99-83D0-F3B9F5A0D361" class="sect4"><span class="enumeration_section">5.9.1</span>何处以及如何使用替代变量</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用替换变量<a id="d9848e1749" class="indexterm-anchor"></a> SQL和SQL * Plus命令中的任何位置，输入的第一个单词除外。当SQL * Plus遇到一个<a id="d9848e1754" class="indexterm-anchor"></a>在命令中未定义的替换变量，SQL * Plus会提示您输入值。<a id="d9848e1759" class="indexterm-anchor"></a></p>
                        <p>您可以在提示符处输入任何字符串，即使是包含空格和标点符号的字符串。如果包含引用的SQL命令应该在变量周围有引号，并且您没有在那里包含它们，则用户必须在提示时包含引号。</p>
                        <p>即使您已将终端输入或输出重定向到文件，SQL * Plus也会从键盘读取您的响应。如果终端不可用（例如，如果以批处理模式运行脚本），则SQL * Plus将使用重定向的文件。</p>
                        <p>在提示符处输入值后，SQL * Plus会将包含替换变量的行列出两次：在替换您输入的值之前和替换之后一次。您可以通过设置SET来禁止此列表<a id="d9848e1769" class="indexterm-anchor"></a>命令变量VERIFY <a id="d9848e1774" class="indexterm-anchor"></a>关闭。</p><pre class="pre codeblock"><code>创建文件STATS</code></pre><p>现在运行脚本STATS：</p><pre class="oac_no_warn" dir="ltr">@STATS</pre><p>并响应值的提示，如下所示：</p><pre class="pre codeblock"><code>输入group_col的值：JOB_ID old 1：SELECT＆GROUP_COL，new 1：SELECT JOB_ID，输入number_col的值：SALARY old 2：MAX（＆NUMBER_COL）MAXIMUM new 2：MAX（SALARY）MAXIMUM输入表格值：EMP_DETAILS_VIEW old 3：FROM ＆TABLE new 3：FROM EMP_DETAILS_VIEW输入group_col的值：JOB_ID old 4：GROUP BY＆GROUP_COL new 4：GROUP BY JOB_ID</code></pre><p>SQL * Plus显示以下输出：</p><pre class="pre codeblock"><code>JOB_ID MAXIMUM ---------- ---------- AC_ACCOUNT 8300 AC_MGR 12000 AD_ASST 4400 AD_PRES 24000 AD_VP 17000 FI_ACCOUNT 9000 FI_MGR 12000 HR_REP 6500 IT_PROG 9000 MK_MAN 13000 MK_REP 6000 JOB_ID MAXIMUM ---- ------ ---------- PR_REP 10000 PU_CLERK 3100 PU_MAN 11000 SA_MAN 14000 SA_REP 11500 SH_CLERK 4200 ST_CLERK 3600 ST_MAN 8200选择19行。</code></pre><p>如果您希望在替换变量后立即附加字符<a id="d9848e1794" class="indexterm-anchor"></a> ，使用句点将变量与字符分开。例如：</p><pre class="oac_no_warn" dir="ltr">从EMP_DETAILS_VIEW中选择SALARY EMPLOYEE_ID ='＆X.5';输入X的值：20</pre><p>被解释为</p><pre class="oac_no_warn" dir="ltr">从EMP_DETAILS_VIEW中选择SALARY EMPLOYEE_ID ='205';</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-DD1BE849-0B66-4F99-83D0-F3B9F5A0D361__I1211231">
                        <p class="titleinexample">例5-9使用替换变量</p>
                        <p>创建一个名为STATS的脚本，用于计算数字列上的子组统计信息（最大值）：</p><pre class="oac_no_warn" dir="ltr">SELECT＆GROUP_COL，MAX（＆NUMBER_COL）MAXIMUM FROM＆TABLE GROUP BY＆GROUP_COL。保存统计数据</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="SQPUG441"></a><a id="SQPUG440"></a><div class="props_rev_3"><a id="GUID-DAEF8542-1042-4F98-9C68-CED90AC42A79" name="GUID-DAEF8542-1042-4F98-9C68-CED90AC42A79"></a><h4 id="SQPUG-GUID-DAEF8542-1042-4F98-9C68-CED90AC42A79" class="sect4"><span class="enumeration_section">5.9.2</span>避免不必要的值提示</h4>
                  <div>
                     <div class="section">
                        <p>假设<a id="d9848e1836" class="indexterm-anchor"></a>您<a id="d9848e1841" class="indexterm-anchor"></a>想要扩展文件STATS以包括“数字”列的最小值，总和和平均值。您可能已经注意到SQL * Plus提示您两次获取GROUP_COL的值，一次提示您使用<a href="using-scripts-in-SQL-Plus.html#GUID-DD1BE849-0B66-4F99-83D0-F3B9F5A0D361__I1211231">示例5-9中</a>的NUMBER_COL值，并且每个GROUP_COL或NUMBER_COL在其前面都有一个＆符号。如果您要在脚本之前添加另外三个函数 - 使用单个＆符号，SQL * Plus将提示您总共四次使用数字列的值。
                        </p>
                        <p><a id="d9848e1849" class="indexterm-anchor"></a><a id="d9848e1851" class="indexterm-anchor"></a>通过在STATS中的每个GROUP_COL和NUMBER_COL前添加第二个＆符号，可以避免重新提示输入组和数字列。 SQL * Plus自动定义任何替换变量前面有两个＆符号，但不定义前面只有一个＆符号的替换变量。定义变量后，SQL * Plus将不会在当前会话中提示其值。
                        </p><pre class="pre codeblock"><code>SELECT＆GROUP_COL，MAX（＆NUMBER_COL）MAXIMUM FROM＆TABLE GROUP BY＆GROUP_COL</code></pre><pre class="oac_no_warn" dir="ltr">2</pre><pre class="pre codeblock"><code>2 * MAX（＆NUMBER_COL）MAXIMUM</code></pre><pre class="oac_no_warn" dir="ltr">APPEND，</pre><pre class="pre codeblock"><code>2 * MAX（＆NUMBER_COL）最大值，</code></pre><pre class="oac_no_warn" dir="ltr">更改/＆/＆＆</pre><pre class="pre codeblock"><code>2 * MAX（&amp;&amp; NUMBER_COL）MAXIMUM，</code></pre><pre class="oac_no_warn" dir="ltr">一世</pre><pre class="pre codeblock"><code>3I</code></pre><pre class="oac_no_warn" dir="ltr">MIN（&amp;&amp; NUMBER_COL）MINIMUM，</pre><pre class="pre codeblock"><code>4I</code></pre><pre class="oac_no_warn" dir="ltr">SUM（&amp;&amp; NUMBER_COL）TOTAL，</pre><pre class="pre codeblock"><code>5I</code></pre><pre class="oac_no_warn" dir="ltr">AVG（&amp;&amp; NUMBER_COL）AVERAGE</pre><pre class="pre codeblock"><code>6I</code></pre><pre class="oac_no_warn" dir="ltr">1</pre><pre class="pre codeblock"><code>1 * SELECT＆GROUP_COL，</code></pre><pre class="oac_no_warn" dir="ltr">更改/＆/＆＆</pre><pre class="pre codeblock"><code>1 * SELECT &amp;&amp; GROUP_COL，</code></pre><pre class="oac_no_warn" dir="ltr">7</pre><pre class="pre codeblock"><code>7 * GROUP BY和GROUP_COL</code></pre><pre class="oac_no_warn" dir="ltr">更改/＆/＆＆/</pre><pre class="pre codeblock"><code>7 * GROUP BY &amp;&amp; GROUP_COL</code></pre><pre class="oac_no_warn" dir="ltr">保存STATS2</pre><pre class="pre codeblock"><code>创建文件STATS2</code></pre><p>最后，运行脚本STATS2并响应提示，如下所示：</p><pre class="oac_no_warn" dir="ltr">START STATS2输入group_col的值：JOB_ID输入number_col的值：SALARY输入表的值：EMP_DETAILS_VIEW</pre><p>SQL * Plus显示以下输出：</p><pre class="pre codeblock"><code>JOB_ID最大最小总平均值---------- ---------- ---------- ---------- ----- ----- AC_ACCOUNT 8300 8300 8300 8300 AC_MGR 12000 12000 12000 12000 AD_ASST 4400 4400 4400 4400 AD_PRES 24000 24000 24000 24000 AD_VP 17000 17000 34000 17000 FI_ACCOUNT 9000 6900 39600 7920 FI_MGR 12000 12000 12000 12000 HR_REP 6500 6500 6500 6500 IT_PROG 9000 4200 28800 5760 MK_MAN 13000 13000 13000 13000 MK_REP 6000 6000 6000 6000 JOB_ID最大最小总平均值---------- ---------- ---------- ----- ----- ---------- PR_REP 10000 10000 10000 10000 PU_CLERK 3100 2500 13900 2780 PU_MAN 11000 11000 11000 11000 SA_MAN 14000 10500 61000 12200 SA_REP 11500 6100 250500 8350 SH_CLERK 4200 2500 64300 3215 ST_CLERK 3600 2100 55700 2785选择ST_MAN 8200 5800 36400 7280 19行。</code></pre><p>请注意，系统仅提示您输入NUMBER_COL和GROUP_COL的值一次。如果您在当前会话期间再次运行STATS2，系统将提示您输入TABLE（因为它的名称只有一个＆符号，因此变量不是DEFINEd），而不是GROUP_COL或NUMBER_COL（因为它们的名称有双符号和变量）因此，DEFINEd）。</p>
                        <p>在继续之前，将系统变量VERIFY设置回ON：</p><pre class="oac_no_warn" dir="ltr">设置验证开</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-DAEF8542-1042-4F98-9C68-CED90AC42A79__GUID-8DA17867-151E-441D-89F9-ADF350304FC2">
                        <p class="titleinexample">例5-10使用双＆符号</p>
                        <p>要使用双＆符号扩展脚本STATS然后运行该文件，首先禁止替换前后每行的显示：</p><pre class="oac_no_warn" dir="ltr">设置验证关闭</pre><p>现在输入以下命令检索和编辑STATS：</p><pre class="oac_no_warn" dir="ltr">获取统计数据</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="SQPUG442"></a><div class="props_rev_3"><a id="GUID-396C98D4-3296-44E4-9CC9-CBC0B2DF9011" name="GUID-396C98D4-3296-44E4-9CC9-CBC0B2DF9011"></a><h4 id="SQPUG-GUID-396C98D4-3296-44E4-9CC9-CBC0B2DF9011" class="sect4"><span class="enumeration_section">5.9.3</span>限制</h4>
                  <div>
                     <p>您不能使用替换变量<a id="d9848e1957" class="indexterm-anchor"></a>在缓冲区编辑命令，APPEND，CHANGE，DEL和INPUT中，以及在替换无意义的其他命令中。缓冲区编辑命令APPEND，CHANGE和INPUT按字面意思处理以“＆”或“&amp;&amp;”开头的文本，与任何其他文本字符串一样。
                     </p>
                  </div>
               </div><a id="SQPUG443"></a><div class="props_rev_3"><a id="GUID-17D8BED6-F315-4894-8F12-099CE7E8D785" name="GUID-17D8BED6-F315-4894-8F12-099CE7E8D785"></a><h4 id="SQPUG-GUID-17D8BED6-F315-4894-8F12-099CE7E8D785" class="sect4"><span class="enumeration_section">5.9.4</span>系统变量</h4>
                  <div>
                     <div class="section">
                        <p><a id="d9848e1984" class="indexterm-anchor"></a><a id="d9848e1988" class="indexterm-anchor"></a>使用SQL * Plus SET命令指定的以下系统变量会影响替换变量<a id="d9848e1993" class="indexterm-anchor"></a> ：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-17D8BED6-F315-4894-8F12-099CE7E8D785__GUID-107CDBAF-C14B-4C11-927E-08939549EAEB">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="2 column table showing the system variables that affect substitution variables and their descriptions." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d9848e2006">系统变量</th>
                                 <th align="left" valign="bottom" width="71%" id="d9848e2009">对替代变量的影响</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d9848e2014" headers="d9848e2006 "><pre class="oac_no_warn" dir="ltr">SET CONCAT</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d9848e2014 d9848e2009 ">
                                    <p><a id="d9848e2019" class="indexterm-anchor"></a><a id="d9848e2023" class="indexterm-anchor"></a>定义将替换变量或参数的名称与紧跟变量或参数的字符分隔开的字符 - 默认情况下为句点（。）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d9848e2027" headers="d9848e2006 "><pre class="oac_no_warn" dir="ltr">设定定义</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d9848e2027 d9848e2009 ">
                                    <p><a id="d9848e2032" class="indexterm-anchor"></a><a id="d9848e2036" class="indexterm-anchor"></a><a id="d9848e2040" class="indexterm-anchor"></a><a id="d9848e2042" class="indexterm-anchor"></a>定义替换字符（默认情况下为＆符号“＆”）并打开和关闭替换。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d9848e2048" headers="d9848e2006 "><pre class="oac_no_warn" dir="ltr">SET ESCAPE</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d9848e2048 d9848e2009 ">
                                    <p><a id="d9848e2053" class="indexterm-anchor"></a><a id="d9848e2057" class="indexterm-anchor"></a>定义在替换字符之前可以使用的转义字符。转义字符指示SQL * Plus将替换字符视为普通字符而不是变量替换请求。默认转义字符是反斜杠（\）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d9848e2061" headers="d9848e2006 "><pre class="oac_no_warn" dir="ltr">SET NUMFORMAT</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d9848e2061 d9848e2009 ">
                                    <p><a id="d9848e2066" class="indexterm-anchor"></a><a id="d9848e2070" class="indexterm-anchor"></a>设置显示的默认格式<a id="d9848e2073" class="indexterm-anchor"></a>数字，包括数字替换变量。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d9848e2079" headers="d9848e2006 "><pre class="oac_no_warn" dir="ltr">SET NUMWIDTH</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d9848e2079 d9848e2009 ">
                                    <p><a id="d9848e2084" class="indexterm-anchor"></a><a id="d9848e2088" class="indexterm-anchor"></a>设置显示的默认宽度<a id="d9848e2091" class="indexterm-anchor"></a>数字，包括数字替换变量。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d9848e2097" headers="d9848e2006 "><pre class="oac_no_warn" dir="ltr">设置验证开</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d9848e2097 d9848e2009 ">
                                    <p><a id="d9848e2102" class="indexterm-anchor"></a><a id="d9848e2106" class="indexterm-anchor"></a>列出替换前后脚本的每一行。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>有关系统变量的更多信息，请参见<a href="SET.html#GUID-9095C4FF-F4EB-4218-84AA-83061186625F">SET</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SQPUG445"></a><a id="SQPUG444"></a><div class="props_rev_3"><a id="GUID-678E9B76-3E97-4E00-B869-939FF2D43E3F" name="GUID-678E9B76-3E97-4E00-B869-939FF2D43E3F"></a><h3 id="SQPUG-GUID-678E9B76-3E97-4E00-B869-939FF2D43E3F" class="sect3"><span class="enumeration_section">5.10</span>通过START命令传递参数</h3>
               <div>
                  <div class="section">
                     <p>您可以绕过值的提示<a id="d9848e2140" class="indexterm-anchor"></a>通过将值传递给参数来与替换变量相关联<a id="d9848e2145" class="indexterm-anchor"></a>在脚本中<a id="d9848e2148" class="indexterm-anchor"></a>通过START <a id="d9848e2153" class="indexterm-anchor"></a>命令。
                     </p>
                     <p>你这样做是通过放置一个＆符号<a id="d9848e2160" class="indexterm-anchor"></a> （＆）后跟脚本中的数字代替替换变量。每次运行此脚本时，START都会使用第一个值（称为参数）替换文件中的每个＆1 <a id="d9848e2165" class="indexterm-anchor"></a> ）START之后<a id="d9848e2170" class="indexterm-anchor"></a> filename，然后用第二个值替换每个＆2，依此类推。
                     </p>
                     <p>例如，您可以在名为MYFILE的脚本中包含以下命令：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM EMP_DETAILS_VIEW WHERE JOB_ID ='＆1'AND SALARY ='＆2';</pre><p>在下面的START命令中，SQL * Plus会在脚本MYFILE中用＆1和3100替换PU_CLERK作为＆2：</p><pre class="oac_no_warn" dir="ltr">启动MYFILE PU_CLERK 3100</pre><p>当您使用START命令的参数时，SQL * Plus会在脚本中使用相应参数的值来定义每个参数。</p><pre class="pre codeblock"><code>1列LAST_NAME标题'最后名称'2列SALAL标题'每月SALAL'格式$ 99,999 3 COLUMN COMMISSION_PCT标题'委托％'格式90.90 4 SELECT LAST_NAME，SALARY，COMMISSION_PCT 5来自EMP_DETAILS_VIEW 6 * WHERE JOB_ID ='SA_MAN'</code></pre><pre class="oac_no_warn" dir="ltr">6</pre><pre class="pre codeblock"><code>6 * WHERE JOB_ID ='SA_MAN'</code></pre><pre class="oac_no_warn" dir="ltr">CHANGE / SA_MAN /＆1</pre><pre class="pre codeblock"><code>6 * WHERE JOB_ID ='＆1'</code></pre><pre class="oac_no_warn" dir="ltr">保存ONEJOB</pre><pre class="pre codeblock"><code>创建文件ONEJOB</code></pre><p>现在使用参数SA_MAN运行命令：</p><pre class="oac_no_warn" dir="ltr">开始ONEJOB SA_MAN</pre><p>SQL * Plus列出包含参数的SQL命令行，在使用其值替换参数之前和之后，然后显示输出：</p><pre class="pre codeblock"><code>旧3：WHERE JOB_ID ='＆1'new 3：WHERE JOB_ID ='SA_MAN'最后一个名称每月SALARY COMMISSION％-------------------------  - ------------- ------------ Russell $ 14,000 0.40合作伙伴$ 13,500 0.30 Errazuriz $ 12,000 0.30 Cambrault $ 11,000 0.30 Zlotkey $ 10,500 0.20</code></pre><p>您可以在脚本中使用许多参数。在脚本中，您可以多次引用每个参数，并且可以按任何顺序包含参数。</p>
                     <p>虽然在使用RUN或斜杠（/）运行命令时无法使用参数，但可以使用替换变量。</p>
                     <p>在继续之前，通过输入以下命令将列返回到其原始标题：</p><pre class="oac_no_warn" dir="ltr">清除栏目</pre></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-678E9B76-3E97-4E00-B869-939FF2D43E3F__GUID-55E20379-A4CA-43D5-B1BA-421075A76561">
                     <p class="titleinexample">例5-11通过START传递参数</p>
                     <p>要创建基于SALES的新脚本，该脚本采用指定要显示的作业的参数，请输入</p><pre class="oac_no_warn" dir="ltr">获得销售</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="SQPUG446"></a><div class="props_rev_3"><a id="GUID-573671D6-ACFD-4C1D-A29D-D6C50A95056C" name="GUID-573671D6-ACFD-4C1D-A29D-D6C50A95056C"></a><h3 id="SQPUG-GUID-573671D6-ACFD-4C1D-A29D-D6C50A95056C" class="sect3"><span class="enumeration_section">5.11</span>关于与用户通信</h3>
               <div>
                  <p>三个SQL * Plus命令-PROMPT，ACCEPT和PAUSE-帮助您与最终用户进行通信。使用这些命令可以将消息发送到屏幕并接收用户的输入，包括简单的Return。您还可以使用PROMPT和ACCEPT自定义SQL * Plus自动为替换变量生成的值的提示。</p>
               </div><a id="SQPUG448"></a><a id="SQPUG447"></a><div class="props_rev_3"><a id="GUID-7EA61B86-26F9-4C90-9E19-3E84E12060B8" name="GUID-7EA61B86-26F9-4C90-9E19-3E84E12060B8"></a><h4 id="SQPUG-GUID-7EA61B86-26F9-4C90-9E19-3E84E12060B8" class="sect4"><span class="enumeration_section">5.11.1</span>接收替代变量值</h4>
                  <div>
                     <div class="section">
                        <p>通过PROMPT <a id="d9848e2269" class="indexterm-anchor"></a>和接受<a id="d9848e2272" class="indexterm-anchor"></a> ，您可以向最终用户发送消息并从最终用户输入接收值<a id="d9848e2275" class="indexterm-anchor"></a> 。PROMPT显示一条消息<a id="d9848e2280" class="indexterm-anchor"></a>您在屏幕上指定向用户提供路线或信息。ACCEPT提示用户输入值<a id="d9848e2283" class="indexterm-anchor"></a>并将其存储在您指定的替换变量中。当提示跨越多行时，请将PROMPT与ACCEPT结合使用。
                        </p><pre class="pre codeblock"><code>创建文件PROMPT1.sql</code></pre><p>TTITLE命令设置报告的顶部标题。有关TTITILE命令的详细信息，请参阅<a href="formatting-SQL-Plus-reports.html#GUID-59489A36-AAC7-4A46-ABB1-B41FB61C012C">关于定义页面和报告标题和维度</a> 。
                        </p>
                        <p>最后，运行脚本，响应标题提示，如下所示：</p><pre class="oac_no_warn" dir="ltr">START PROMPT1</pre><pre class="pre codeblock"><code>输入最多30个字符的标题标题：部门报告部门报告EMPLOYEE_ID FIRST_NAME LAST_NAME SALARY ----------- --------------------  - ----------------------- ---------- 145 John Russell 14000 146 Karen Partners 13500 147 Alberto Errazuriz 12000 148 Gerald Cambrault 11000 149 Eleni Zlotkey 10500</code></pre><p>在继续之前，请关闭TTITLE命令：</p><pre class="oac_no_warn" dir="ltr">TTITLE OFF</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-7EA61B86-26F9-4C90-9E19-3E84E12060B8__I1211672">
                        <p class="titleinexample">例5-12提示和接受输入</p>
                        <p>要指示用户提供报告标题并将输入存储在变量MYTITLE中以供后续查询使用，请首先清除缓冲区：</p><pre class="oac_no_warn" dir="ltr">清除缓冲区</pre><p>接下来，设置一个脚本，如图所示<a id="d9848e2321" class="indexterm-anchor"></a>并将此文件另存为PROMPT1：<a id="d9848e2324" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">PROMPT输入最多30个字符的标题接受MYTITLE PROMPT'标题：'TTITLE LEFT MYTITLE SKIP 2选择EMPLOYEE_ID，FIRST_NAME，LAST_NAME，SALARY来自EMP_DETAILS_VIEW WHERE JOB_ID ='SA_MAN'保存PROMPT1</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="SQPUG450"></a><a id="SQPUG449"></a><div class="props_rev_3"><a id="GUID-2091414F-6E1C-4220-B275-DF3438FB7CEC" name="GUID-2091414F-6E1C-4220-B275-DF3438FB7CEC"></a><h4 id="SQPUG-GUID-2091414F-6E1C-4220-B275-DF3438FB7CEC" class="sect4"><span class="enumeration_section">5.11.2</span>自定义替换变量的提示</h4>
                  <div>
                     <div class="section">
                        <p>如果要自定义替换变量值的提示<a id="d9848e2354" class="indexterm-anchor"></a> ，使用PROMPT <a id="d9848e2359" class="indexterm-anchor"></a>和接受<a id="d9848e2364" class="indexterm-anchor"></a>与替换变量一起使用，如以下示例所示。
                        </p><pre class="pre codeblock"><code>输入有效的员工ID例如145,206员工ID。 ：</code></pre><pre class="oac_no_warn" dir="ltr">205</pre><pre class="pre codeblock"><code>旧3：WHERE EMPLOYEE_ID =＆ENUMBER新3：WHERE EMPLOYEE_ID = 205部门报告FIRST_NAME LAST_NAME SALARY -------------------- ----------- -------------- ---------- Shelley Higgins 12000</code></pre><p>如果输入字符而不是数字会发生什么？由于您指定了NUMBER <a id="d9848e2377" class="indexterm-anchor"></a>在ACCEPT中的变量名称之后<a id="d9848e2380" class="indexterm-anchor"></a>命令，SQL * Plus不接受非数字值：</p>
                        <p>尝试在“员工ID”提示符下输入字符而不是数字，SQL * Plus将响应错误消息并再次提示您重新输入正确的数字：</p><pre class="oac_no_warn" dir="ltr">START PROMPT2</pre><p>当SQL * Plus提示您输入员工ID时，请输入单词“one”而不是数字：</p><pre class="pre codeblock"><code>输入有效的员工ID例如145,206员工ID。 ：</code></pre><pre class="oac_no_warn" dir="ltr">一</pre><pre class="pre codeblock"><code>SP2-0425：“one”不是有效数字</code></pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2091414F-6E1C-4220-B275-DF3438FB7CEC__GUID-A0D926AB-534D-4539-81EE-362AA9DE5B87">
                        <p class="titleinexample">例5-13将PROMPT和ACCEPT与替换变量结合使用</p>
                        <p>正如您在<a href="using-scripts-in-SQL-Plus.html#GUID-7EA61B86-26F9-4C90-9E19-3E84E12060B8__I1211672">示例5-12中</a>看到的，当您使用替换变量时，SQL * Plus会自动生成值的提示。您可以通过在脚本中包含引用替换变量的查询中的PROMPT和ACCEPT来替换此提示。首先清除缓冲区：</p><pre class="oac_no_warn" dir="ltr">清除缓冲区</pre><p>要创建此类文件，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">INPUT PROMPT输入有效的员工ID PROMPT例如145,206接受ENUMBER NUMBER PROMPT'员工ID。 ：'SELECT FIRST_NAME，LAST_NAME，SALAL from EMP_DETAILS_VIEW WHERE EMPLOYEE_ID =＆ENUMBER;</pre><p>将此文件另存为PROMPT2。接下来，运行此脚本。SQL * Plus使用您使用PROMPT和ACCEPT指定的文本提示输入ENUMBER的值：</p><pre class="oac_no_warn" dir="ltr">START PROMPT2</pre><p>SQL * Plus会提示您输入员工ID：</p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="SQPUG451"></a><div class="props_rev_3"><a id="GUID-0B4FA53B-B5CD-493E-BDCB-1979048D801F" name="GUID-0B4FA53B-B5CD-493E-BDCB-1979048D801F"></a><h4 id="SQPUG-GUID-0B4FA53B-B5CD-493E-BDCB-1979048D801F" class="sect4"><span class="enumeration_section">5.11.3</span>发送消息并接受返回作为输入</h4>
                  <div>
                     <div class="section">
                        <p><a id="d9848e2439" class="indexterm-anchor"></a>如果要在用户屏幕上显示消息，然后让用户在阅读消息后按Return键，请使用SQL * Plus命令PAUSE <a id="d9848e2444" class="indexterm-anchor"></a> 。例如，您可以在脚本中包含以下行：</p><pre class="oac_no_warn" dir="ltr">提示在继续之前，请确保您有自己的帐户卡。暂停按RETURN继续。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SQPUG452"></a><div class="props_rev_3"><a id="GUID-71E3C81D-0916-4BED-9843-F4D35059FE51" name="GUID-71E3C81D-0916-4BED-9843-F4D35059FE51"></a><h4 id="SQPUG-GUID-71E3C81D-0916-4BED-9843-F4D35059FE51" class="sect4"><span class="enumeration_section">5.11.4</span>清除屏幕</h4>
                  <div>
                     <div class="section">
                        <p>如果要清除屏幕<a id="d9848e2472" class="indexterm-anchor"></a>在显示报告之前（或在任何其他时间），包括SQL * Plus CLEAR <a id="d9848e2477" class="indexterm-anchor"></a>命令及其SCREEN <a id="d9848e2482" class="indexterm-anchor"></a>使用以下格式在脚本中的适当位置执行子句：</p><pre class="oac_no_warn" dir="ltr">清晰的屏幕</pre><p>在继续下一部分之前，请输入以下命令将所有列重置为其原始格式和标题：</p><pre class="oac_no_warn" dir="ltr">清晰的栏目</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SQPUG453"></a><div class="props_rev_3"><a id="GUID-B52D6F2E-A28A-48B6-B73F-6A9D018BD107" name="GUID-B52D6F2E-A28A-48B6-B73F-6A9D018BD107"></a><h3 id="SQPUG-GUID-B52D6F2E-A28A-48B6-B73F-6A9D018BD107" class="sect3"><span class="enumeration_section">5.12</span>关于使用绑定变量</h3>
               <div>
                  <p>绑定变量是您在SQL * Plus中创建的变量，然后在PL / SQL或SQL中引用。如果在SQL * Plus中创建绑定变量，则可以像使用PL / SQL子程序中的声明变量一样使用该变量，然后从SQL * Plus访问该变量。您可以使用绑定变量作为输入绑定变量来保存数据，然后可以在PL / SQL或SQL语句中使用这些数据将数据插入数据库。您可以为新定义的变量赋值。然后可以在语句中使用此变量中指定的值。</p>
                  <p>由于SQL * Plus可以识别绑定变量，因此可以在SQL * Plus中显示它们的值，或者在SQL * Plus中运行的PL / SQL子程序中引用它们。</p>
               </div><a id="SQPUG454"></a><div class="props_rev_3"><a id="GUID-C6F23D1E-C167-49EE-9578-97383C116CB8" name="GUID-C6F23D1E-C167-49EE-9578-97383C116CB8"></a><h4 id="SQPUG-GUID-C6F23D1E-C167-49EE-9578-97383C116CB8" class="sect4"><span class="enumeration_section">5.12.1</span>创建绑定变量</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用VARIABLE命令在SQL * Plus中创建绑定变量。例如</p><pre class="oac_no_warn" dir="ltr">VARIABLE ret_val NUMBER</pre><p>此命令创建名为ret_val的绑定变量，其数据类型为NUMBER。有关更多信息，请参见<a href="VARIABLE.html#GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3">VARIABLE</a>命令。（要列出在会话中创建的所有绑定变量，请键入不带任何参数的VARIABLE。）
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SQPUG455"></a><div class="props_rev_3"><a id="GUID-3B528845-8EBD-4950-BD26-BB345B6E22A7" name="GUID-3B528845-8EBD-4950-BD26-BB345B6E22A7"></a><h4 id="SQPUG-GUID-3B528845-8EBD-4950-BD26-BB345B6E22A7" class="sect4"><span class="enumeration_section">5.12.2</span>引用绑定变量</h4>
                  <div>
                     <div class="section">
                        <p>您可以在PL / SQL中引用绑定变量，方法是键入冒号（:)，然后输入变量名称。例如</p><pre class="oac_no_warn" dir="ltr">：ret_val：= 1;</pre><p>要在SQL * Plus中更改此绑定变量，必须输入PL / SQL块。例如：</p><pre class="oac_no_warn" dir="ltr">开始：ret_val：= 4;结束; /</pre><pre class="pre codeblock"><code>PL / SQL过程成功完成。</code></pre><p>此命令为名为<span class="italic">ret_val</span>的绑定变量<span class="italic">赋值</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SQPUG456"></a><div class="props_rev_3"><a id="GUID-9867449B-2217-4477-9DF2-732989D6BCDE" name="GUID-9867449B-2217-4477-9DF2-732989D6BCDE"></a><h4 id="SQPUG-GUID-9867449B-2217-4477-9DF2-732989D6BCDE" class="sect4"><span class="enumeration_section">5.12.3</span>显示绑定变量</h4>
                  <div>
                     <div class="section">
                        <p>要在SQL * Plus中显示绑定变量的值，请使用SQL * Plus PRINT命令。例如：</p><pre class="oac_no_warn" dir="ltr">打印RET_VAL</pre><pre class="pre codeblock"><code>RET_VAL ---------- 4</code></pre><p>此命令显示名为ret_val的绑定变量。有关显示绑定变量的更多信息，请参阅<a href="PRINT.html#GUID-3C8951DC-7895-46DE-8FBB-7508B4D16499">PRINT</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E19A3E15-0FD2-498D-AAE4-936473E2CC38" name="GUID-E19A3E15-0FD2-498D-AAE4-936473E2CC38"></a><h4 id="SQPUG-GUID-E19A3E15-0FD2-498D-AAE4-936473E2CC38" class="sect4"><span class="enumeration_section">5.12.4</span>执行输入绑定</h4>
                  <div>
                     <p></p>
                     <div class="section">
                        <p>您可以为变量赋值以进行输入绑定。</p><pre class="oac_no_warn" dir="ltr">SQL&gt;变量abc number = 123 SQL&gt; select：abc from dual; ：ABC ---------- 4 SQL&gt;</pre><p></p><pre class="oac_no_warn" dir="ltr">SQL&gt; create table mytab（col1 number，col2 varchar2（10））;表创建。SQL&gt; var abc number = 123 SQL&gt; var xyz varchar2（10）='test'SQL&gt; insert into mytab values（：abc，：xyz）;已创建1行。SQL&gt; select * from mytab; COL1 COL2 ---------- ---------- 123测试SQL&gt;</pre><p>有关更多信息，请参见<a href="VARIABLE.html#GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3">VARIABLE</a>命令。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SQPUG458"></a><a id="SQPUG459"></a><a id="SQPUG460"></a><a id="SQPUG457"></a><div class="props_rev_3"><a id="GUID-9C965E00-45C6-42B2-8E4D-9B1EFA143834" name="GUID-9C965E00-45C6-42B2-8E4D-9B1EFA143834"></a><h3 id="SQPUG-GUID-9C965E00-45C6-42B2-8E4D-9B1EFA143834" class="sect3"><span class="enumeration_section">5.13</span>使用REFCURSOR绑定变量</h3>
               <div>
                  <div class="section">
                     <p>SQL * Plus REFCURSOR绑定变量允许SQL * Plus获取和格式化结果<a id="d9848e2695" class="indexterm-anchor"></a> PL / SQL块中包含的SELECT语句。
                     </p>
                     <p>REFCURSOR绑定变量也可用于在存储过程中引用PL / SQL游标变量。这使您可以将SELECT语句存储在数据库中，并从SQL * Plus中引用它们。</p>
                     <p><a id="d9848e2703" class="indexterm-anchor"></a><a id="d9848e2707" class="indexterm-anchor"></a>还可以从存储的函数返回REFCURSOR绑定变量。
                     </p><pre class="pre codeblock"><code>PL / SQL过程成功完成。</code></pre><p>现在可以使用PRINT命令在SQL * Plus中显示SELECT语句的结果。</p><pre class="oac_no_warn" dir="ltr">PRINT employee_info</pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ---------- 145 14000 146 13500 147 12000 148 11000 149 10500</code></pre><p>PRINT语句也会关闭游标。要重新打印结果，必须在使用PRINT之前再次执行PL / SQL块。</p><pre class="pre codeblock"><code>包创建。</code></pre><p>接下来，创建包含OPEN的存储过程...FOR SELECT语句。</p><pre class="oac_no_warn" dir="ltr">创建或替换包装盒EmpPack作为程序EmpInfoRpt（emp_cv IN OUT EmpInfoTyp）AS BEGIN OPEN emp_cv FOR SELECT EMPLOYEE_ID，SALARY FROM EMP_DETAILS_VIEW WHERE JOB_ID ='SA_MAN';结束;结束; /</pre><pre class="pre codeblock"><code>程序已创建。</code></pre><p>使用SQL * Plus绑定变量作为参数执行该过程。</p><pre class="oac_no_warn" dir="ltr">VARIABLE cv REFCURSOR EXECUTE EmpPack。EmpInfoRpt（：CV）</pre><pre class="pre codeblock"><code>PL / SQL过程成功完成。</code></pre><p>现在打印绑定变量。</p><pre class="oac_no_warn" dir="ltr">PRINT cv</pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ---------- 145 14000 146 13500 147 12000 148 11000 149 10500</code></pre><p>可以使用相同或不同的REFCURSOR绑定变量多次执行该过程。</p><pre class="oac_no_warn" dir="ltr">VARIABLE pcv REFCURSOR EXECUTE EmpInfo_rpt（：pcv）</pre><pre class="pre codeblock"><code>PL / SQL过程成功完成。</code></pre><pre class="oac_no_warn" dir="ltr">打印电脑</pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ---------- 145 14000 146 13500 147 12000 148 11000 149 10500</code></pre><pre class="pre codeblock"><code>功能创建。</code></pre><p>执行该功能。</p><pre class="oac_no_warn" dir="ltr">VARIABLE rc REFCURSOR EXECUTE：rc：= EmpInfo_fn</pre><pre class="pre codeblock"><code>PL / SQL过程成功完成。</code></pre><p>现在打印绑定变量。</p><pre class="oac_no_warn" dir="ltr">打印rc</pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ---------- 145 14000 146 13500 147 12000 148 11000 149 10500</code></pre><p>可以使用相同或不同的REFCURSOR绑定变量多次执行该函数。</p><pre class="oac_no_warn" dir="ltr">执行：rc：= EmpInfo_fn</pre><pre class="pre codeblock"><code>PL / SQL过程成功完成。</code></pre></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-9C965E00-45C6-42B2-8E4D-9B1EFA143834__GUID-1C45A3F5-1738-4C29-AFEA-9A390D4DE9BD">
                     <p class="titleinexample">示例5-14创建，引用和显示REFCURSOR绑定变量</p>
                     <p>要创建，引用和显示REFCURSOR绑定变量，首先声明REFCURSOR数据类型的本地绑定变量</p><pre class="oac_no_warn" dir="ltr">创建过程p4为c1 sys_refcursor; c2 sys_refcursor;为SELECT * FROM DEPT开始打开c1; dbms_sql.return_result（C1）;打开c2 for SELECT * FROM EMP; dbms_sql.return_result（C2）;结束; /</pre><p>接下来，输入一个在OPEN中使用绑定变量的PL / SQL块...FOR SELECT语句。此语句将打开游标变量并执行查询。有关<a href="../lnpls/OPEN-statement.html#LNPLS-GUID-FB5A9CC3-655F-4AF4-8105-14CB39F2FEA8" target="_blank">OPEN</a>命令和游标变量的信息，请参见<a href="../lnpls/OPEN-statement.html#LNPLS-GUID-FB5A9CC3-655F-4AF4-8105-14CB39F2FEA8" target="_blank">OPEN语句</a> 。
                     </p>
                     <p>在此示例中，我们将SQL * Plus <span class="italic">employee_info</span>绑定变量绑定到游标变量。
                     </p><pre class="oac_no_warn" dir="ltr">BEGIN OPEN：employee_info FOR SELECT EMPLOYEE_ID，SALARY FROM EMP_DETAILS_VIEW WHERE JOB_ID ='SA_MAN';结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-9C965E00-45C6-42B2-8E4D-9B1EFA143834__GUID-F3CAD3F7-3F87-4C72-B205-90D977E39AAA">
                     <p class="titleinexample">示例5-15在存储过程中使用REFCURSOR变量</p>
                     <p>REFCURSOR绑定变量作为参数传递给过程。该参数具有REF CURSOR类型。首先，定义类型。</p><pre class="oac_no_warn" dir="ltr">创建或替换包装EmpPack AS TYPE EmpInfoTyp是REF CURSOR; PROCEDURE EmpInfoRpt（emp_cv IN OUT EmpInfoTyp）;结束EmpPack; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-9C965E00-45C6-42B2-8E4D-9B1EFA143834__GUID-D9F56929-140F-482A-A163-42EA4CDE2DC8">
                     <p class="titleinexample">示例5-16在存储函数中使用REFCURSOR变量</p>
                     <p>创建一个包含OPEN的存储函数...FOR SELECT语句：</p><pre class="oac_no_warn" dir="ltr">创建或替换功能EmpInfo_fn返回 -  cv_types。EmpInfo是结果集cv_types。EmpInfoTyp; BEGIN OPEN结果集FOR SELECT EMPLOYEE_ID，SALARY FROM EMP_DETAILS_VIEW WHERE JOB_ID ='SA_MAN'; RETURN（结果集）;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="SQPUG461"></a><a id="SQPUG200"></a><div class="props_rev_3"><a id="GUID-40F6AC0B-B312-4BAB-8709-D15D24514D0F" name="GUID-40F6AC0B-B312-4BAB-8709-D15D24514D0F"></a><h3 id="SQPUG-GUID-40F6AC0B-B312-4BAB-8709-D15D24514D0F" class="sect3"><span class="enumeration_section">5.14</span>从PL / SQL块内的SELECT中获取迭代结果</h3>
               <div>
                  <div class="section">
                     <p>SQL * Plus可以迭代地获取和格式化结果<a id="d9848e2830" class="indexterm-anchor"></a>包含在PL / SQL块或存储过程中的SELECT语句。您不需要定义本地REFCURSOR变量。
                     </p>
                     <p>将显示SELECT语句的结果。</p><pre class="oac_no_warn" dir="ltr">ResultSet＃1</pre><pre class="pre codeblock"><code>DEPTNO DNAME LOC ------ ---------- --------- 10会计纽约20研究DALLAS 30销售芝加哥40运营波士顿选择4排</code></pre><pre class="oac_no_warn" dir="ltr">ResultSet＃2</pre><pre class="pre codeblock"><code>EMPNO ENAME JOB MGR HIREDATE SAL COMM DEPTNO ----- ------ --------- ---- --------- ---- ----- -  7369 SMITH CLERK 7902 17-DEC-80 800 20 7499 ALLEN SALESMAN 7698 20-FEB-81 1600 300 30 7521 WARD SALESMAN 7698 22-FEB-81 1250 500 30 7566 JONES MANAGER 7839 02-APR-81 2975 20 7654 MARTIN SALESMAN 7698 28-SEP-81 1250 1400 30 7698 BLAKE MANAGER 7839 01-MAY-81 2850 30 7782 CLARK MANAGER 7839 09-JUN-81 2450 10 7788 SCOTT ANALYST 7566 05-APR-11 3000 20 7839 KING PRESIDENT 17-NOV-81 5000 10 7844 TURNER SALESMAN 7698 08-SEP-81 1500 0 30 7876 ADAMS CLERK 7788 09-MAY-11 1100选择了14行</code></pre></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-40F6AC0B-B312-4BAB-8709-D15D24514D0F__GUID-F9F66FC8-F55D-4805-9399-C3A41F8FD450">
                     <p class="titleinexample">示例5-17创建PL / SQL过程</p>
                     <p>创建一个调用两个语句的PL / SQL过程P4。</p><pre class="oac_no_warn" dir="ltr">创建过程p4为c1 sys_refcursor; c2 sys_refcursor;为SELECT * FROM DEBT开始打开c1; dbms_sql.return_result（C1）;打开c2 for SELECT * FROM EMP; dbms_sql.return_result（C2）;结束; /已创建过程。</pre><p>接下来，运行该过程以从过程中的SELECT语句迭代地检索结果。</p><pre class="oac_no_warn" dir="ltr">exec p4 PL / SQL过程成功完成。
</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>REGR_（线性回归）函数</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="REGEXP_SUBSTR.html" title="Previous" type="text/html"></link>
      <link rel="next" href="REMAINDER.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="REGEXP_SUBSTR.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="REMAINDER.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">REGR_（线性回归）函数</li>
            </ol>
            <a id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9" name="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9"></a><a id="SQLRF51695"></a><a id="SQLRF51696"></a><a id="SQLRF51697"></a><a id="SQLRF51698"></a><a id="SQLRF51699"></a><a id="SQLRF51700"></a><a id="SQLRF51701"></a><a id="SQLRF51702"></a><a id="SQLRF51703"></a><a id="SQLRF00696"></a>
            
            <h2 id="SQLRF-GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9" class="sect2">REGR_（线性回归）函数</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>线性回归函数是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">REGR_SLOPE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_INTERCEPT</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_COUNT</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_R2</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_AVGX</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_AVGY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_SXX</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_SYY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_SXY</code></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-8919BCD3-C1F6-40B4-B854-EF4F5317BE33">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-310B6965-F28A-4874-A919-53B97DF83DCF"><span class="italic">linear_regr</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-7E43080E-45B3-4508-B45D-E3E9964825B0"><img src="img/linear_regr.gif" alt="下面是linear_regr.eps的描述" title="下面是linear_regr.eps的描述" longdesc="img_text/linear_regr.html"><br><a href="img_text/linear_regr.html">说明linear_regr.eps的说明</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-445E0BE9-A8A8-4CEC-9DFB-9BBBCE37A675">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="Analytic-Functions.html#GUID-527832F7-63C0-4445-8C16-307FA5084056">分析函数</a> ”，</span>用于获取有关语法，语义和限制的信息</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-F791CCE5-8F73-4C0E-982C-E6DF5B9764E2">目的</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>线性回归函数将普通最小二乘回归线拟合到一组数字对。您可以将它们用作聚合和分析函数。</p>
                  <div class="infoboxnotealso" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-153CB1E5-3977-4163-86FB-581563859BB3">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="Aggregate-Functions.html#GUID-62BE676B-AF18-4E63-BD14-25206FEA0848">聚合函数</a> ”</span>和<span class="q">“ <a href="About-SQL-Expressions.html#GUID-68789A5C-B142-496F-ADEE-837F75F95B2B">关于SQL表达式</a> ”，</span>以获取有关<span class="italic"><code class="codeph">expr</code></span>有效形式的信息</p>
                  </div>
                  <p>这些函数将任何数值数据类型或任何非数字数据类型作为参数，可以隐式转换为数字数据类型。Oracle确定具有最高数字优先级的参数，隐式将剩余参数转换为该数据类型，并返回该数据类型。</p>
                  <div class="infoboxnotealso" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-E6BFE576-FD3A-4851-A9EF-14CC9E97335B">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="Data-Type-Comparison-Rules.html#GUID-98BE3A78-6E33-4181-B5CB-D96FD9DC1694__G195937" title="此矩阵列出了每个后续列的第一列和标题单元格中的数据类型。单元格中的X表示在该列的标题和该行的第1列中指定的数据类型的隐式转换。">表2-8</a>了解有关隐式转换的更多信息，有关<span class="q"><a href="Data-Types.html#GUID-4C0B65DB-E751-4957-A1ED-5044BAFA7812">数值优先级</a></span>的信息，请参见<span class="q">“ <a href="Data-Types.html#GUID-4C0B65DB-E751-4957-A1ED-5044BAFA7812">数值优先级</a> ”</span></p>
                  </div>
                  <p>在消除<span class="italic"><code class="codeph">expr1</code></span>或<span class="italic"><code class="codeph">expr2</code></span>为空的所有对之后，Oracle将该函数应用于（ <span class="italic"><code class="codeph">expr1</code></span> ， <span class="italic"><code class="codeph">expr2</code></span> ）对的集合。Oracle在单次传递数据期间同时计算所有回归函数。
                  </p>
                  <p><span class="italic"><code class="codeph">expr1</code></span>被解释为因变量的值（ <code class="codeph">y</code>值）， <span class="italic"><code class="codeph">expr2</code></span>被解释为自变量的值（ <code class="codeph">x</code>值）。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">REGR_SLOPE</code>返回该行的斜率。返回值是数字数据类型，可以为null。在消除null（ <span class="italic"><code class="codeph">expr1</code></span> ， <span class="italic"><code class="codeph">expr2</code></span> ）对之后，它进行以下计算：</p><pre class="oac_no_warn" dir="ltr">COVAR_POP（expr1，expr2）/ VAR_POP（expr2）</pre></li>
                     <li>
                        <p><code class="codeph">REGR_INTERCEPT</code>返回<code class="codeph">REGR_INTERCEPT</code>的y轴截距。返回值是数字数据类型，可以为null。在消除null（ <span class="italic"><code class="codeph">expr1</code></span> ， <span class="italic"><code class="codeph">expr2</code></span> ）对之后，它进行以下计算：</p><pre class="oac_no_warn" dir="ltr">AVG（expr1） -  REGR_SLOPE（expr1，expr2）* AVG（expr2）</pre></li>
                     <li>
                        <p><code class="codeph">REGR_COUNT</code>返回一个整数，该整数是用于拟合回归线的非空数字对的数量。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_R2</code>返回回归的确定系数（也称为R平方或拟合优度）。返回值是数字数据类型，可以为null。在消除空对之后评估<code class="codeph">VAR_POP</code> （ <span class="italic"><code class="codeph">expr1</code></span> ）和<code class="codeph">VAR_POP</code> （ <span class="italic"><code class="codeph">expr2</code></span> ）。返回值为：</p><pre class="oac_no_warn" dir="ltr">如果VAR_POP（expr2）= 0，则为NULL，如果VAR_POP（expr1）= 0且VAR_POP（expr2）！= 0 POWER（CORR（expr1，expr），2）如果VAR_POP（expr1）&gt; 0且VAR_POP（expr2！= 0</pre></li>
                  </ul>
                  <p>所有剩余的回归函数都返回一个数值数据类型，可以为null：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">REGR_AVGX</code>评估<code class="codeph">REGR_AVGX</code>的自变量（ <span class="italic"><code class="codeph">expr2</code></span> ）的平均值。它在消除null（ <span class="italic"><code class="codeph">expr1</code></span> ， <span class="italic"><code class="codeph">expr2</code></span> ）对之后进行以下计算：</p><pre class="oac_no_warn" dir="ltr">AVG（表达式2）</pre></li>
                     <li>
                        <p><code class="codeph">REGR_AVGY</code>评估<code class="codeph">REGR_AVGY</code>的因变量（ <span class="italic"><code class="codeph">expr1</code></span> ）的平均值。它在消除null（ <span class="italic"><code class="codeph">expr1</code></span> ， <span class="italic"><code class="codeph">expr2</code></span> ）对之后进行以下计算：</p><pre class="oac_no_warn" dir="ltr">AVG（表达式1）</pre></li>
                  </ul>
                  <p><code class="codeph">REGR_SXY</code> ， <code class="codeph">REGR_SXX</code> ， <code class="codeph">REGR_SYY</code>是用于计算各种诊断统计信息的辅助函数。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">REGR_SXX</code>在消除null（ <span class="italic"><code class="codeph">expr1</code></span> ， <span class="italic"><code class="codeph">expr2</code></span> ）对后进行以下计算：</p><pre class="oac_no_warn" dir="ltr">REGR_COUNT（expr1，expr2）* VAR_POP（expr2）</pre></li>
                     <li>
                        <p><code class="codeph">REGR_SYY</code>在消除null（ <span class="italic"><code class="codeph">expr1</code></span> ， <span class="italic"><code class="codeph">expr2</code></span> ）对后进行以下计算：</p><pre class="oac_no_warn" dir="ltr">REGR_COUNT（expr1，expr2）* VAR_POP（expr1）</pre></li>
                     <li>
                        <p><code class="codeph">REGR_SXY</code>在消除null（ <span class="italic"><code class="codeph">expr1</code></span> ， <span class="italic"><code class="codeph">expr2</code></span> ）对后进行以下计算：</p><pre class="oac_no_warn" dir="ltr">REGR_COUNT（expr1，expr2）* COVAR_POP（expr1，expr2）</pre></li>
                  </ul>
                  <p>以下示例基于示例表<code class="codeph">sh.sales</code>和<code class="codeph">sh.products</code> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-E976E3E7-4A34-4821-82FA-5150EEDEB3A6">一般线性回归示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>以下示例提供了在其分析形式中使用的各种线性回归函数的比较。当您想要使用回归统计量进行计算时，这些函数的分析形式非常有用，例如查找模型为每个员工预测的薪水。各个线性回归函数后面的部分包含这些函数的聚合形式的示例。</p><pre class="oac_no_warn" dir="ltr">SELECT job_id，employee_id ID，salary，REGR_SLOPE（SYSDATE-hire_date，salary）OVER（PARTITION BY job_id）slope，REGR_INTERCEPT（SYSDATE-hire_date，salary）OVER（PARTITION BY job_id）intcpt，REGR_R2（SYSDATE-hire_date，salary）OVER（ PARTITION BY job_id）rsqr，REGR_COUNT（SYSDATE-hire_date，salary）OVER（PARTITION BY job_id）计数，REGR_AVGX（SYSDATE-hire_date，salary）OVER（PARTITION BY job_id）avgx，REGR_AVGY（SYSDATE-hire_date，salary）OVER（PARTITION BY） job_id）avgy FROM employees WHERE department_id in（50,80）ORDER BY job_id，employee_id; JOB_ID ID SALARY SLOPE INTCPT RSQR COUNT AVGX AVGY ---------- ----- ---------- ----- ---------  - --- ------ ---------- --------- SA_MAN 145 14000 .355 -1707.035 .832 5 12200.000 2626.589 SA_MAN 146 13500 .355 -1707.035 .832 5 12200.000 2626.589 SA_MAN 147 12000 .355 -1707.035 .832 5 12200.000 2626.589 SA_MAN 148 11000 .355 -1707.035 .832 5 12200.000 2626.589 SA_MAN 149 10500 .355 -1707.035 .832 5 12200.000 2626.589 SA_REP 150 10000 .257 404.763 .647 29 8396.552 2561.244 SA_REP 151 9500 .257 404.763 .647 29 8396.552 2561.244 SA_REP 152 9000 .257 404.763 .647 29 8396.552 2561.244 SA_REP 153 8000 .257 404.763 .647 29 8396.552 2561.244 SA_REP 154 7500 .257 404.763 .647 29 8396.552 2561.244 SA_REP 155 7000 .257 404.763。 647 29 8396.552 2561.244 SA_REP 156 10000 .257 404.763 .647 29 8396.552 2561.244。 。 。</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-BA9CDD5F-11DC-402A-BCB3-51783D449500">REGR_SLOPE和REGR_INTERCEPT示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>以下示例使用示例表<code class="codeph">hr.employees</code>计算所用时间（ <code class="codeph">SYSDATE</code> - <code class="codeph">hire_date</code> ）和工资的线性回归模型的斜率和回归。结果按<code class="codeph">job_id</code>分组。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT job_id，REGR_SLOPE（SYSDATE-hire_date，salary）slope，REGR_INTERCEPT（SYSDATE-hire_date，salary）拦截FROM employees WHERE department_id in（50,80）GROUP BY job_id ORDER BY job_id; JOB_ID SLOPE INTERCEPT ---------- ----- ------------ SA_MAN .355 -1707.030762 SA_REP .257 404.767151 SH_CLERK .745 159.015293 ST_CLERK .904 134.409050 ST_MAN .479 -570.077291</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-22FA6F56-A4B1-4A61-AA05-0B1986C7791C">REGR_COUNT个示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>以下示例使用示例表<code class="codeph">hr.employees</code>计算<code class="codeph">job_id</code>对所用时间（ <code class="codeph">SYSDATE</code> - <code class="codeph">hire_date</code> ）和工资的<code class="codeph">hr.employees</code> 。结果按<code class="codeph">job_id</code>分组。
                  </p><pre class="oac_no_warn" dir="ltr">SELECT job_id，REGR_COUNT（SYSDATE-hire_date，salary）count FROM employees WHERE department_id in（30,50）GROUP BY job_id ORDER BY job_id，count; JOB_ID COUNT ---------- ---------- PU_CLERK 5 PU_MAN 1 SH_CLERK 20 ST_CLERK 20 ST_MAN 5</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-B9E4135D-5B72-406B-B40D-12DD1EAA2F87">REGR_R2示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>以下示例使用示例表<code class="codeph">hr.employees</code>使用时间（ <code class="codeph">SYSDATE</code> - <code class="codeph">hire_date</code> ）和工资的线性回归的确定系数：</p><pre class="oac_no_warn" dir="ltr">SELECT job_id，REGR_R2（SYSDATE-hire_date，salary）Regr_R2 FROM employees WHERE department_id in（80,50）GROUP by job_id ORDER BY job_id，Regr_R2; JOB_ID REGR_R2 ---------- ---------- SA_MAN .83244748 SA_REP .647007156 SH_CLERK .879799698 ST_CLERK .742808493 ST_MAN .69418508</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-56ED4770-B022-41B8-AC14-3692A63C85DF">REGR_AVGY和REGR_AVGX示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>以下示例使用示例表<code class="codeph">hr.employees</code>计算所用时间（ <code class="codeph">SYSDATE</code> - <code class="codeph">hire_date</code> ）和工资的<code class="codeph">hr.employees</code> 。结果按<code class="codeph">job_id</code>分组：</p><pre class="oac_no_warn" dir="ltr">SELECT job_id，REGR_AVGY（SYSDATE-hire_date，salary）avgy，REGR_AVGX（SYSDATE-hire_date，salary）avgx FROM employees WHERE department_id in（30,50）GROUP BY job_id ORDER BY job_id，avgy，avgx; JOB_ID AVGY AVGX ---------- ---------- ---------- PU_CLERK 2950.3778 2780 PU_MAN 4026.5778 11000 SH_CLERK 2773.0778 3215 ST_CLERK 2872.7278 2785 ST_MAN 3140.1778 7280</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-5D3A7387-DB64-47CD-AAC5-B8408CE09A1F">REGR_SXY，REGR_SXX和REGR_SYY示例</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>以下示例使用示例表<code class="codeph">hr.employees</code>使用时间（ <code class="codeph">SYSDATE</code> - <code class="codeph">hire_date</code> ）和工资的线性回归的三种类型的诊断统计信息：</p><pre class="oac_no_warn" dir="ltr">SELECT job_id，REGR_SXY（SYSDATE-hire_date，salary）regr_sxy，REGR_SXX（SYSDATE-hire_date，salary）regr_sxx，REGR_SYY（SYSDATE-hire_date，salary）regr_syy FROM employees WHERE department_id in（80,50）GROUP BY job_id ORDER BY job_id; JOB_ID REGR_SXY REGR_SXX REGR_SYY ---------- ---------- ----------- ---------- SA_MAN 3303500 9300000.0 1409642 SA_REP 16819665.5 65489655.2 6676562.55 SH_CLERK 4248650 5705500.0 3596039 ST_CLERK 3531545 3905500.0 4299084.55 ST_MAN 2180460 4548000.0 1505915.2</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
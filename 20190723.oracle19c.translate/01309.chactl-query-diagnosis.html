<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Use the chactl query diagnosis command to return problems and diagnosis, and suggested corrective actions associated with the problem for specific cluster nodes or Oracle Real Application Clusters (Oracle RAC) databases."></meta>
      <meta name="description" content="Use the chactl query diagnosis command to return problems and diagnosis, and suggested corrective actions associated with the problem for specific cluster nodes or Oracle Real Application Clusters (Oracle RAC) databases."></meta>
      <title>chactl查询诊断</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User’s Guide"></meta>
      <meta property="og:description" content="Use the chactl query diagnosis command to return problems and diagnosis, and suggested corrective actions associated with the problem for specific cluster nodes or Oracle Real Application Clusters (Oracle RAC) databases."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96320-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="chactl-calibrate.html" title="Previous" type="text/html"></link>
      <link rel="next" href="chactl-query-model.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ATNMS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="chactl-calibrate.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="chactl-query-model.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="appendixes.html" property="item" typeof="WebPage"><span property="name">附录</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="chactl-command-reference.html" property="item" typeof="WebPage"><span property="name">chactl命令参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">chactl查询诊断</li>
            </ol>
            <a id="GUID-07F4C0DB-541B-4509-B851-64E497B0D876" name="GUID-07F4C0DB-541B-4509-B851-64E497B0D876"></a>
            
            <h2 id="ATNMS-GUID-07F4C0DB-541B-4509-B851-64E497B0D876" class="sect2"><span class="enumeration_section">D.6</span> chactl查询诊断</h2>
         </header>
         <div class="ind">
            <div>
               <p>使用<code class="codeph">chactl query diagnosis</code>命令可以返回问题和诊断，并建议与特定群集节点或Oracle Real Application Clusters（Oracle RAC）数据库的问题相关的纠正措施。
               </p>
               <div class="section">
                  <p class="subhead1" id="GUID-07F4C0DB-541B-4509-B851-64E497B0D876__GUID-D5333056-AC6B-4A9D-B194-58A8C0EFB197">句法</p><pre class="pre codeblock"><code>chactl查询诊断[-cluster | -db <span class="variable" translate="no">db_unique_name</span> ] [-start <span class="variable" translate="no">time</span> -end <span class="variable" translate="no">time</span> ] [-htmlfile <span class="variable" translate="no">file_name</span> ] [ -  help]</code></pre><p>以<code class="codeph">YYYY-MM-DD HH24:MI:SS</code>格式指定日期和时间。
                  </p>
                  <p>在前面的语法中，您必须考虑以下几点：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果未提供任何选项，则<code class="codeph">chactl query diagnosis</code>命令将返回所有受监视节点和数据库的当前状态。<code class="codeph">chactl query diagnosis</code>命令通过显示其诊断标识符（例如， <code class="codeph">Storage Bandwidth Saturation</code>报告目标的一般状态，例如<strong class="term">ABNORMAL</strong> 。这是检查数据库或集群中任何<strong class="term">ABNORMAL</strong>状态的快速方法。
                        </p>
                     </li>
                     <li>
                        <p>如果在目标名称后面提供时间选项，则<code class="codeph">chactl query diagnosis</code>命令将指定目标的状态限制为指定时间间隔内的条件。压缩时间序列列出了在时间间隔，开始和结束时间中发生的不同事件的原因的标识符。
                        </p>
                     </li>
                     <li>
                        <p>如果事件和原因在特定时间间隔内重复出现，则问题仅报告一次。开始时间是第一次发生事件的开始时间，结束时间是特定时间间隔内最后一次事件发生的结束时间。</p>
                     </li>
                     <li>
                        <p>如果指定不带数据库名称的<code class="codeph">–db</code>选项，则<code class="codeph">chactl query diagnosis</code>命令将显示所有数据库的诊断信息。但是，如果指定了数据库名称，则<code class="codeph">chactl query diagnosis</code>命令将显示正在监视的所有数据库实例的诊断信息。
                        </p>
                     </li>
                     <li>
                        <p>如果指定不带主机名的<code class="codeph">–cluster</code>选项，则<code class="codeph">chactl query diagnosis</code>命令将显示该群集中所有主机的诊断信息。
                        </p>
                     </li>
                     <li>
                        <p>如果未指定时间间隔，则<code class="codeph">chactl query diagnosis</code>命令仅显示所有或指定目标的当前问题。<code class="codeph">chactl query diagnosis</code>命令不会显式显示频率统计信息。但是，您可以计算过去24小时内目标中发生的正常和异常事件的数量。
                        </p>
                     </li>
                     <li>
                        <p>如果在指定的时间间隔内未发生任何事件，则<code class="codeph">chactl query diagnosis</code>命令将返回文本消息，例如， <samp class="msgph">数据库/主机正在运行NORMALLY</samp> ，或者<samp class="msgph">未发现任何事件</samp> 。
                        </p>
                     </li>
                     <li>
                        <p>如果目标的状态为<strong class="term">NORMAL</strong> ，则命令不报告它。<code class="codeph">chactl query diagnosis</code>命令仅报告指定时间间隔内具有<strong class="term">ABNORMAL</strong>状态的目标。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">输出参数：</span></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>事件开始时间</p>
                     </li>
                     <li>
                        <p>事件结束时间（仅适用于默认数据库和/或主机，非详细输出）</p>
                     </li>
                     <li>
                        <p>目标（例如，数据库，主机）</p>
                     </li>
                     <li>
                        <p>问题</p>
                        <p>说明：问题的详细说明</p>
                        <p>原因：问题的根本原因和影响因素</p>
                     </li>
                     <li>
                        <p>操作：纠正诊断中涵盖的异常状态的操作</p>
                     </li>
                  </ul>
                  <p><span class="bold">报告格式：</span>诊断信息以时间压缩或时间序列顺序显示，按组件分组。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-07F4C0DB-541B-4509-B851-64E497B0D876__GUID-EF2B376B-F517-4B5A-A38B-0E30F3C91C6F">例子</p>
                  <p>要在特定时间间隔内显示数据库的诊断信息：</p><pre class="pre codeblock"><code>$ chactl查询诊断-db oltpacdb -start“2016-02-01 02：52：50.0”-end“2016-02-01 03：19：15.0”2016-02-01 01：47：10.0数据库oltpacdb数据库控制文件IO性能（oltpacdb_1）[检测到] 2016-02-01 01：47：10.0数据库oltpacdb数据库控制文件IO性能（oltpacdb_2）[检测到] 2016-02-01 02：52：15.0数据库oltpacdb数据库CPU利用率（oltpacdb_2）[检测到] 2016-02-01 02：52：50.0数据库oltpacdb数据库CPU利用率（oltpacdb_1）[检测到] 2016-02-01 02：59：35.0数据库oltpacdb数据库日志文件切换（oltpacdb_1）[检测] 2016-02-01 02：59：45.0数据库oltpacdb DB日志文件切换（oltpacdb_2）[已检测]问题：DB控制文件IO性能描述：CHA检测到对控制文件的读取或写入速度低于预期。原因：Cluster Health Advisor（CHA）检测到由于磁盘IO增加，对控制文件的读取或写入速度很慢。慢速控制文件的读写可能会对检查点和Log Writer（LGWR）性能产生影响。操作：将控制文件与其他数据库文件分开，并将它们移动到更快的磁盘或固态设备。问题：DB CPU利用率说明：CHA检测到此数据库的CPU利用率大于预期。原因：由于数据库工作负载增加，Cluster Health Advisor（CHA）检测到数据库CPU利用率增加。操作：使用自动诊断和缺陷管理器（ADDM）识别CPU密集型查询，并遵循其中给出的建议。限制CPU密集型查询的数量或将会话重定位到较少繁忙的机器。如果CPU容量不足以支持负载而不会降低性能或对其他数据库产生影响，请添加CPU。问题：数据库日志文件开关描述：CHA检测到数据库会话等待的日志交换机完成时间超过预期。原因：群集健康顾问（CHA）在日志切换期间检测到高争用，因为重做日志文件很小并且重做日志频繁切换。操作：增加重做日志的大小。</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-07F4C0DB-541B-4509-B851-64E497B0D876__ERRORMESSAGE-488129C9">错误信息</p>
                  <p><span class="bold">消息：</span> <samp class="msgph"><span class="variable" translate="no">Target</span>正常运行</samp></p>
                  <p><span class="bold">描述：</span>目标上没有发现任何事件。
                  </p>
                  <p><span class="bold">消息：</span> <code class="codeph">No data was found for active <span class="variable" translate="no">Target</span></code></p>
                  <p><span class="bold">描述：</span>未找到任何数据，但目标在查询时正在运行或处于活动状态。
                  </p>
                  <p><span class="bold">消息：</span> <samp class="msgph">目标未激活或未被监视。</samp></p>
                  <p><span class="bold">描述：</span>未找到任何数据，因为在查询时未监视目标。
                  </p>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="chactl-command-reference.html#GUID-9AD6BC7D-F0F5-41E9-80CB-9BD911FCE586" title="Oracle Cluster Health Advisor命令使Oracle Grid Infrastructure用户能够管理目标上的基本监视功能。">chactl命令参考</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>
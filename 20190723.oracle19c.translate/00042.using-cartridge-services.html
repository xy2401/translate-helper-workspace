<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用墨盒服务</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T07:34:53-08:00"></meta>
      <meta name="dcterms.title" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96431-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-extensible-optimizer.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-user-defined-aggregate-functions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-extensible-optimizer.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-user-defined-aggregate-functions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据盒式开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="building-data-cartridges.html" property="item" typeof="WebPage"><span property="name">构建数据磁带</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用墨盒服务</li>
            </ol>
            <a id="GUID-2CB76BF0-C6C9-46BB-89C4-3619BC7A0F39" name="GUID-2CB76BF0-C6C9-46BB-89C4-3619BC7A0F39"></a><a id="ADDCI2130"></a>
            
            <h2 id="ADDCI-GUID-2CB76BF0-C6C9-46BB-89C4-3619BC7A0F39" class="sect2"><span class="enumeration_chapter">11</span>使用盒式磁带服务</h2>
         </header>
         <div class="ind">
            <div>
               <p>考虑如何使用墨盒服务。</p>
            </div><a id="ADDCI4647"></a><a id="ADDCI4648"></a><a id="ADDCI4649"></a><a id="ADDCI4650"></a><a id="ADDCI4651"></a><a id="ADDCI4652"></a><a id="ADDCI4646"></a><div class="props_rev_3"><a id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB" name="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB"></a><h3 id="ADDCI-GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB" class="sect3"><span class="enumeration_section">11.1</span>盒式磁带服务简介</h3>
               <div>
                  <p>盒式磁带服务是一组服务，可帮助您在Oracle中创建数据盒式磁带<span class="italic"> </span>可扩展性框架。
                  </p>
                  <p>使用Oracle Cartridge Services具有以下优势：</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-F464F465-8A15-4480-8FF5-CAE459C874DB">可移植性</p>
                     <p>Oracle Cartridge Services为您提供跨不同机器架构的灵活性</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-61A7CB7E-A02B-4549-BBF7-D5C904235BD6">Oracle环境中的灵活性</p>
                     <p>无论客户购买的操作配置如何，所有盒式磁带服务都可以与Oracle数据库配合使用，从而为您提供了另一种灵活性。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-494AEAFD-690A-4999-B121-6F793BF318D8">语言独立</p>
                     <p>使用全球化支持服务可以使您的墨盒国际化。语言独立性意味着您可以在不同语言环境中使用不同的盒式磁带实例。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-7F33325B-1F6D-40B4-8336-ED668F989FF7">与服务器紧密集成</p>
                     <p>各种盒式磁带服务旨在促进Oracle ORDBMS的访问。这为尝试执行相同操作的客户端程序提供了卓越的性能。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-ABC2F599-362A-4C5D-A7D6-03A0A5E13A5D">保证兼容性</p>
                     <p>Oracle数据库是一种快速发展的技术，您的客户可能使用不同版本的Oracle进行操作。盒式磁带服务适用于所有版本的Oracle数据库。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-B9D214A9-BD60-47DA-A0A3-606D8683F421">不同墨盒的集成</p>
                     <p>通过集成盒式磁带服务，您可以生成不同数据盒式磁带的统一集成。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>考虑一组可以用作数据盒带的服务。描述这些接口的API在<a href="cartridge-services-using-C-CPP-and-java.html#GUID-43B4F11B-33E4-4722-93E0-9D8F809CC745">使用C_ C ++和Java的Cartridge服务中</a></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADDCI4654"></a><a id="ADDCI4655"></a><a id="ADDCI4653"></a><div class="props_rev_3"><a id="GUID-747941D1-ADED-4DD0-AFF2-65CE02DB47A6" name="GUID-747941D1-ADED-4DD0-AFF2-65CE02DB47A6"></a><h3 id="ADDCI-GUID-747941D1-ADED-4DD0-AFF2-65CE02DB47A6" class="sect3"><span class="enumeration_section">11.2</span>墨盒手柄</h3>
               <div>
                  <p>盒式磁带服务需要各种句柄，这些句柄封装在两种类型的OCI句柄中：</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-747941D1-ADED-4DD0-AFF2-65CE02DB47A6__GUID-72857FEE-092F-46D8-B3B6-81C6D609598C">环境处理</p>
                     <p>环境句柄是<code class="codeph">OCIEnv</code>或<code class="codeph">OCI_HTYPE_ENV</code> 。如果没有可用的会话，则在进程级别需要各种盒式磁带服务。<code class="codeph">OCIInitialize</code> （）应该使用<code class="codeph">OCI_OBJECT</code>选项进行盒式服务。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-747941D1-ADED-4DD0-AFF2-65CE02DB47A6__GUID-7ADC2324-DAA2-428C-9161-3C7986D04259">用户会话句柄</p>
                     <p>用户会话句柄是<code class="codeph">OCISession</code>或<code class="codeph">OCI_HTYPE_SESSION</code> 。在标注中，即使不打开连接回数据库的连接，也可以在分配句柄时使用服务。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>所有盒式磁带服务调用都将<code class="codeph">void</code> <code class="codeph">*</code> OCI句柄作为可以是环境或会话句柄的参数之一。虽然大多数服务调用都允许使用其中一个句柄，但某些调用可能对其中一个句柄无效。例如，使用环境句柄分配<code class="codeph">OCI_DURATION_SESSION</code>可能是错误的。通常在错误句柄中返回错误。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADDCI4656"></a><div class="props_rev_3"><a id="GUID-19749B3E-5460-4A14-9AA9-2ABEF54538C8" name="GUID-19749B3E-5460-4A14-9AA9-2ABEF54538C8"></a><h4 id="ADDCI-GUID-19749B3E-5460-4A14-9AA9-2ABEF54538C8" class="sect4"><span class="enumeration_section">11.2.1</span>客户端使用</h4>
                  <div>
                     <p>大多数盒式磁带服务也可用于客户端代码。请参阅个别服务以了解限制。要在客户端使用盒式磁带服务，必须使用<code class="codeph">OCI_OBJECT</code>选项初始化OCI环境。这在墨盒中自动实现。
                     </p>
                  </div>
               </div><a id="ADDCI4657"></a><div class="props_rev_3"><a id="GUID-FBBF0264-F3CC-418F-A962-228224DF3394" name="GUID-FBBF0264-F3CC-418F-A962-228224DF3394"></a><h4 id="ADDCI-GUID-FBBF0264-F3CC-418F-A962-228224DF3394" class="sect4"><span class="enumeration_section">11.2.2</span>墨盒侧面使用</h4>
                  <div>
                     <p>本文档中列出的大多数服务都可用于开发数据库盒式磁带，但请参阅每个服务的文档以了解限制。可以使用新的服务调用来获取标注中的会话句柄。无需打开连接回服务器的连接即可使用会话句柄。</p>
                  </div>
               </div><a id="ADDCI4659"></a><a id="ADDCI4658"></a><div class="props_rev_3"><a id="GUID-739EDBE8-A889-41E9-BF20-EA836EB6370F" name="GUID-739EDBE8-A889-41E9-BF20-EA836EB6370F"></a><h4 id="ADDCI-GUID-739EDBE8-A889-41E9-BF20-EA836EB6370F" class="sect4"><span class="enumeration_section">11.2.3</span>拨打服务电话</h4>
                  <div>
                     <div class="section">
                        <p>在使用任何服务之前，必须初始化OCI环境句柄。所有服务都将OCI环境（或user_session）句柄作为参数。错误在OCI错误句柄中返回。各种服务调用所需的子句柄不与OCI环境句柄一起分配。必须初始化环境的服务提供了初始化它的方法。<a href="using-cartridge-services.html#GUID-739EDBE8-A889-41E9-BF20-EA836EB6370F__CHDJIIJH">例11-1</a>演示了这些句柄的初始化。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-739EDBE8-A889-41E9-BF20-EA836EB6370F__CHDJIIJH">
                        <p class="titleinexample">例11-1初始化OCI句柄</p><pre class="oac_no_warn" dir="ltr">{OCIEnv * envhp; OCIError * errhp; （void）OCIInitialize（OCI_OBJECT，（dvoid *）0,0,0,0）; （void）OCIEnvInit（＆envhp，OCI_OBJECT，（size_t）0，（dvoid **）0）; （void）OCIHandleAlloc（（dvoid *）envhp，（dvoid **）errhp，OCI_HTYPE_ERROR，（size_t）0，（dvoid **）0）; / * ...使用手柄......* /（void）OCIHandleFree（（dvoid *）errhp，OCI_HTYPE_ERROR）; }</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4661"></a><a id="ADDCI4660"></a><div class="props_rev_3"><a id="GUID-2D130F86-823C-44C6-9C68-DA842C8D0570" name="GUID-2D130F86-823C-44C6-9C68-DA842C8D0570"></a><h4 id="ADDCI-GUID-2D130F86-823C-44C6-9C68-DA842C8D0570" class="sect4"><span class="enumeration_section">11.2.4</span>处理错误</h4>
                  <div>
                     <div class="section">
                        <p>返回错误的例程通常返回<code class="codeph">OCI_SUCCESS</code>或<code class="codeph">OCI_ERROR</code> 。某些例程可能会返回<code class="codeph">OCI_SUCCESS_WITH_INFO</code> ， <code class="codeph">OCI_INVALID_HANDLE</code>或<code class="codeph">OCI_NO_DATA</code> 。如果返回<code class="codeph">OCI_ERROR</code>或<code class="codeph">OCI_SUCCESS_WITH_INFO</code> ，则可以通过调用<code class="codeph">OCIErrorGet</code>来检索错误代码，错误工具和可能的错误消息，如<a href="using-cartridge-services.html#GUID-2D130F86-823C-44C6-9C68-DA842C8D0570__CHDDFJII">例11-2所示</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2D130F86-823C-44C6-9C68-DA842C8D0570__CHDDFJII">
                        <p class="titleinexample">示例11-2使用OCIErrorGet（）检索错误信息</p><pre class="oac_no_warn" dir="ltr">{OCIError * errhp; ub4错误代码;文本缓冲区[512]; （void）OCIErrorGet（（dvoid *）errhp，1，（text *）NULL，＆errcode，buffer，sizeof（buffer），OCI_HTYPE_ERROR）; }</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4662"></a><div class="props_rev_3"><a id="GUID-679DAAC2-0C1F-488D-B5DF-EABA5F011C2B" name="GUID-679DAAC2-0C1F-488D-B5DF-EABA5F011C2B"></a><h3 id="ADDCI-GUID-679DAAC2-0C1F-488D-B5DF-EABA5F011C2B" class="sect3"><span class="enumeration_section">11.3</span>内存服务</h3>
               <div>
                  <p>内存服务允许客户端分配或释放内存块。每个内存块与持续时间相关联。这允许客户端自动释放与持续时间相关的所有内存（在持续时间结束时）。持续时间确定用于分配内存的堆。内存服务预定义了三种持续时间：call（ <code class="codeph">OCI_DURATION_CALL</code> ），语句（ <code class="codeph">OCI_DURATION_STATEMENT</code> ）和session（ <code class="codeph">OCI_DURATION_SESSION</code> ）。
                  </p>
                  <p>客户端还可以创建用户持续时间。客户端必须明确地启动和终止用户持续时间。因此，客户端可以控制用户持续时间的长度。与预定义的持续时间一样，可以使用用户持续时间来指定分配持续时间（例如，在用户持续时间结束时释放存储器块）。</p>
                  <p>每个用户持续时间都有父时长。用户持续时间在其父持续时间终止时隐式终止。父级持续时间可以是呼叫，语句，事务，会话或任何其他用户持续时间。在用户持续时间中分配的内存来自其父持续时间的堆。</p>
                  <p>Oracle RDBMS内存管理器支持各种内存模型。目前，标注在该标注期间支持内存。随着行源的扩展以支持外部索引，需要持续时间大于标注的存储器。</p>
                  <p>支持以下功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>分配以下持续时间的（永久性和易碎性）记忆</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>致电代理商流程</p>
                           </li>
                           <li>
                              <p>声明</p>
                           </li>
                           <li>
                              <p>会议</p>
                           </li>
                           <li>
                              <p>墨盒的共享属性（元数据）</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>能够重新分配内存</p>
                     </li>
                     <li>
                        <p>能够创建一个subduration内存，一个子堆，当父堆被释放时它被释放。可以分配和释放此子堆的内存。</p>
                     </li>
                     <li>
                        <p>能够指定归零内存</p>
                     </li>
                     <li>
                        <p>能够分配大的连续内存</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADDCI4663"></a><div class="props_rev_3"><a id="GUID-D8019885-E182-45B7-A8A5-D2E529ABEC6F" name="GUID-D8019885-E182-45B7-A8A5-D2E529ABEC6F"></a><h3 id="ADDCI-GUID-D8019885-E182-45B7-A8A5-D2E529ABEC6F" class="sect3"><span class="enumeration_section">11.4</span>维护上下文</h3>
               <div>
                  <p>上下文管理允许客户端跨调用存储值。盒式磁带服务提供了一种保存和恢复上下文的机制。</p>
                  <p>大多数支持线程的操作系统都具有线程上下文的概念。线程可以在此上下文（或状态）中存储特定于线程的数据，并在任何时候检索它。这提供了线程全局变量的概念。通常，指向结构根的指针存储在上下文中。</p>
                  <p>当行源机制外部化时，您必须具有一种机制来维持对同一行源的多次调用之间的状态。</p>
                  <p>您必须维护会话，语句和进程状态。会话状态包括有关打开的多个语句的信息，基于会话的全球化支持设置的消息文件等。进程状态包括共享元数据（包括系统范围的元数据），消息文件等。根据盒式磁带应用程序是否真正具有多线程，信息共享可以处于进程级别或系统级别。</p>
                  <p>由于用户可以随时使用多个墨盒，因此必须为每个墨盒保持状态。这是通过要求用户为每个持续时间提供密钥来完成的。</p>
               </div><a id="ADDCI4664"></a><div class="props_rev_3"><a id="GUID-9FB156F1-D974-47D0-96F4-458192079F45" name="GUID-9FB156F1-D974-47D0-96F4-458192079F45"></a><h4 id="ADDCI-GUID-9FB156F1-D974-47D0-96F4-458192079F45" class="sect4"><span class="enumeration_section">11.4.1</span>持续时间</h4>
                  <div>
                     <p>内存和上下文管理调用支持各种预定义类型的持续时间。所有这些调用中的附加参数是上下文。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DURATION_CALL</code> 。此操作的持续时间是标注的持续时间。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_DURATION_STATEMENT</code> 。此操作的持续时间是外部行源。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_DURATION_SESSION</code> 。此操作的持续时间是用户会话。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_DURATION_PROCESS</code> 。持续时间是代理程序。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADDCI4665"></a><div class="props_rev_3"><a id="GUID-4255F869-A224-40AD-BA7A-F9BE5AB22334" name="GUID-4255F869-A224-40AD-BA7A-F9BE5AB22334"></a><h3 id="ADDCI-GUID-4255F869-A224-40AD-BA7A-F9BE5AB22334" class="sect3"><span class="enumeration_section">11.5</span>全球化支持</h3>
               <div>
                  <p>为支持多语言应用程序，磁带和标注需要全球化支持功能。<code class="codeph">NLSRTL</code>是当前在RDBMS中使用的多平台，多语言库，为所有Oracle产品提供一致的全球化支持行为。
                  </p>
                  <p>全球化支持基本服务提供以下语言和文化敏感功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>区域信息检索。</p>
                     </li>
                     <li>
                        <p>字符串操作，格式为multibyte和wide-char。</p>
                     </li>
                     <li>
                        <p>字符集转换包括Unicode支持。</p>
                     </li>
                     <li>
                        <p>消息机制。</p>
                     </li>
                  </ul>
               </div><a id="ADDCI4666"></a><div class="props_rev_3"><a id="GUID-7D1A23C7-1BCA-417C-B44D-CDBB73F74EA5" name="GUID-7D1A23C7-1BCA-417C-B44D-CDBB73F74EA5"></a><h4 id="ADDCI-GUID-7D1A23C7-1BCA-417C-B44D-CDBB73F74EA5" class="sect4"><span class="enumeration_section">11.5.1</span>全球化支持语言信息检索</h4>
                  <div>
                     <p>Oracle语言环境由语言，区域和字符集定义组成。区域设置确定诸如本机日期和月份名称之类的约定;和日期，时间，数字和货币格式。国际化应用程序遵循用户的区域设置和文化习俗。例如，在德语区域设置中，用户希望以德语拼写查看日期和月份名称。以下界面提供了一种检索本地敏感信息的简单方法。</p>
                  </div>
               </div><a id="ADDCI4667"></a><div class="props_rev_3"><a id="GUID-429FB99D-A735-4E86-BD9D-03D03659DDEB" name="GUID-429FB99D-A735-4E86-BD9D-03D03659DDEB"></a><h4 id="ADDCI-GUID-429FB99D-A735-4E86-BD9D-03D03659DDEB" class="sect4"><span class="enumeration_section">11.5.2</span>字符串操作</h4>
                  <div>
                     <p>字符串操作支持两种类型的数据结构：多字节字符串和宽字符串字符串。多字节字符串采用本机Oracle字符集编码，并且在其上运行的函数将字符串作为整体单元。宽字符串函数为字符串操作提供了更大的灵活性，并支持基于字符和基于字符串的操作。</p>
                     <p>我们在这里使用的宽字符数据类型是特定于Oracle的，不要与ANSI / ISO C标准定义的<code class="codeph">wchar_t</code>混淆。所有平台中的Oracle宽字符串总是4个字节，而<code class="codeph">wchar_t</code>依赖于实现和平台。Oracle宽字符的思想是将多字节字符规范化为具有固定宽度以便于处理。Oracle宽字符和本机字符集之间的往返转换得到保证。
                     </p>
                     <p>字符串操作可以分为以下几类：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在多字节和宽字符之间转换字符串。</p>
                        </li>
                        <li>
                           <p>角色分类。</p>
                        </li>
                        <li>
                           <p>案例转换。</p>
                        </li>
                        <li>
                           <p>显示长度计算。</p>
                        </li>
                        <li>
                           <p>一般字符串操作，例如比较，连接和搜索。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADDCI4668"></a><div class="props_rev_3"><a id="GUID-BFC61127-8442-4492-B8BF-DAE4458E58F8" name="GUID-BFC61127-8442-4492-B8BF-DAE4458E58F8"></a><h3 id="ADDCI-GUID-BFC61127-8442-4492-B8BF-DAE4458E58F8" class="sect3"><span class="enumeration_section">11.6</span>参数管理器界面</h3>
               <div>
                  <p>参数管理器提供一组例程来处理文件或字符串中的参数。提供例程来处理输入并获得键和值对。这些键和值对存储在存储器中，并提供可以访问存储参数值的例程。</p>
                  <p>输入处理例程将文件或字符串的内容与现有语法进行匹配，并将输入中找到的键名与用户已注册的已知键列表进行比较。可以根据flag参数中设置的位来配置输入处理例程的行为。</p>
                  <p>通过调用迭代存储的参数的函数，可以一次检索一个参数，或者同时检索所有参数。</p>
               </div><a id="ADDCI4670"></a><a id="ADDCI4669"></a><div class="props_rev_3"><a id="GUID-9BFC7550-25D1-40B7-8FB2-D3873B7F9D70" name="GUID-9BFC7550-25D1-40B7-8FB2-D3873B7F9D70"></a><h4 id="ADDCI-GUID-9BFC7550-25D1-40B7-8FB2-D3873B7F9D70" class="sect4"><span class="enumeration_section">11.6.1</span>特殊字符的输入处理和支持</h4>
                  <div>
                     <p>参数由键或参数名称，类型和值组成，并且必须由格式<span class="italic"><code class="codeph">key</code></span> <code class="codeph">=</code> <span class="italic"><code class="codeph">value</code></span>指定。
                     </p>
                     <p>参数可以选择接受可以用括号括起来的值列表，可以是<span class="italic"><code class="codeph">key</code></span> <code class="codeph">= (</code> <span class="italic"><code class="codeph">value1</code></span> <code class="codeph">, ...,</code> <span class="italic"><code class="codeph">valuen</code></span> ），也可以是<span class="italic"><code class="codeph">key</code></span> <code class="codeph">=</code> <span class="italic"><code class="codeph">value1</code></span> <code class="codeph">, ...,</code> <span class="italic"><code class="codeph">valuen</code></span> 。
                     </p>
                     <p>值可以是字符串，整数， <code class="codeph">OCINumber</code>或布尔值。以“ <code class="codeph">y</code> ”或“ <code class="codeph">t</code> ”开头的布尔值映射为<code class="codeph">TRUE</code> ，以“ <code class="codeph">n</code> ”或“ <code class="codeph">f</code> ”开头的布尔值映射为<code class="codeph">FALSE</code> 。布尔值的匹配不区分大小写。
                     </p>
                     <p>参数管理器将某些字符视为不按字面解析的特殊字符。特殊字符及其含义如<a href="using-cartridge-services.html#GUID-9BFC7550-25D1-40B7-8FB2-D3873B7F9D70__CHDEFAIA" title="列出参数管理器特有的字符以及每个字符的含义">表11-1所示</a> 。
                     </p>
                     <div class="tblformal" id="GUID-9BFC7550-25D1-40B7-8FB2-D3873B7F9D70__CHDEFAIA">
                        <p class="titleintable">表11-1特殊字符</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="特殊字符" width="100%" border="1" summary="Lists characters that are special to the parameter manager along with the meaning of each" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d35923e1167">字符</th>
                                 <th align="left" valign="bottom" width="70%" id="d35923e1170">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1175" headers="d35923e1167 ">
                                    <p><code class="codeph">＃</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1175 d35923e1170 ">
                                    <p>评论（仅适用于文件）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1183" headers="d35923e1167 ">
                                    <p><code class="codeph">（</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1183 d35923e1170 ">
                                    <p>启动值列表</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1191" headers="d35923e1167 ">
                                    <p><code class="codeph">）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1191 d35923e1170 ">
                                    <p>结束值列表</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1199" headers="d35923e1167 ">
                                    <p><code class="codeph">“</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1199 d35923e1170 ">
                                    <p>引用字符串的开头或结尾</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1207" headers="d35923e1167 ">
                                    <p><code class="codeph">“</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1207 d35923e1170 ">
                                    <p>引用字符串的开头或结尾</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1216" headers="d35923e1167 ">
                                    <p><code class="codeph">=</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1216 d35923e1170 ">
                                    <p>关键字和值的分隔符</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1225" headers="d35923e1167 ">
                                    <p><code class="codeph">\</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1225 d35923e1170 ">
                                    <p>逃避角色</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果必须按字面处理特殊字符，则必须以转义字符开头，或者整个字符串必须用单引号或双引号括起来。</p>
                     <p>键字符串只能包含字母数字字符。值可以包含任何字符。但是，除非引用或转义它们，否则该值不能包含特殊字符。</p>
                  </div>
               </div><a id="ADDCI4671"></a><div class="props_rev_3"><a id="GUID-9DD500EF-468F-4363-AC03-D049DC977E1D" name="GUID-9DD500EF-468F-4363-AC03-D049DC977E1D"></a><h4 id="ADDCI-GUID-9DD500EF-468F-4363-AC03-D049DC977E1D" class="sect4"><span class="enumeration_section">11.6.2</span>参数管理器行为标志</h4>
                  <div>
                     <p>处理文件或字符串的例程使用行为标志来改变参数管理器的默认特征。这些位可以在标志中设置：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_EXTRACT_CASE_SENSITIVE</code> 。所有比较都区分大小写。默认设置是使用不区分大小写的比较。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_EXTRACT_UNIQUE_ABBREVS</code> 。键允许使用唯一的缩写。默认值是不允许使用唯一缩写。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_EXTRACT_APPEND_VALUES</code> 。如果为特定键存储了一个或多个值，则应附加此键的任何新值。默认是返回错误。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4672"></a><div class="props_rev_3"><a id="GUID-E3670B44-5319-48E2-82BF-075DA6437221" name="GUID-E3670B44-5319-48E2-82BF-075DA6437221"></a><h4 id="ADDCI-GUID-E3670B44-5319-48E2-82BF-075DA6437221" class="sect4"><span class="enumeration_section">11.6.3</span>密钥注册</h4>
                  <div>
                     <p>在调用输入处理例程（ <code class="codeph">OCIExtractFromFile()</code>或<code class="codeph">OCIExtractFromString()</code> ，必须通过调用<code class="codeph">OCIExtractSetNumKeys()</code>后跟<code class="codeph">OCIExtractSetKey()</code>来注册所有键，这需要：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>密钥的名称</p>
                        </li>
                        <li>
                           <p>键的类型（ <code class="codeph">integer</code> ， <code class="codeph">string</code> ， <code class="codeph">boolean</code> ， <code class="codeph">OCINumber</code> ）</p>
                        </li>
                        <li>
                           <p>如果允许多个值，则为标志值设置<code class="codeph">OCI_EXTRACT_MULTIPLE</code> （默认值：仅允许一个值）</p>
                        </li>
                        <li>
                           <p>用于密钥的默认值（可能为<code class="codeph">NULL</code> ）</p>
                        </li>
                        <li>
                           <p>由起始值和结束值指定的允许整数值的范围（包括）（可以为<code class="codeph">NULL</code> ）</p>
                        </li>
                        <li>
                           <p>允许的字符串值列表（可能为<code class="codeph">NULL</code> ）</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4673"></a><div class="props_rev_3"><a id="GUID-E8F8F0FF-7D7F-4101-A0D9-8DCBA978CA6D" name="GUID-E8F8F0FF-7D7F-4101-A0D9-8DCBA978CA6D"></a><h4 id="ADDCI-GUID-E8F8F0FF-7D7F-4101-A0D9-8DCBA978CA6D" class="sect4"><span class="enumeration_section">11.6.4</span>参数存储和检索</h4>
                  <div>
                     <p>存储将输入处理成一组键和值的结果。在将参数存储在存储器中之前检查参数的有效性。检查这些值以查看它们是否属于正确的类型。此外，如果您愿意，可以检查这些值以查看它们是否在某个整数值范围内，或者是枚举字符串值列表的成员。此外，如果未指定键可以接受多个值，则如果在特定输入源中指定了多次键，则会返回错误。此外，如果密钥未知，则返回错误。处理完成后，可以使用特定例程检索字符串，整数， <code class="codeph">OCINumber</code>或布尔值， <code class="codeph">OCINumber</code>检索键值。
                     </p>
                     <p>可以同时检索所有参数。必须首先调用函数<code class="codeph">OCIExtractToList()</code>以生成从存储在存储器中的参数结构创建的参数列表。<code class="codeph">OCIExtractToList()</code>返回存储在内存中的唯一键的数量，然后可以调用<code class="codeph">OCIExtractFromList()</code>以返回与每个键关联的值列表。
                     </p>
                  </div>
               </div><a id="ADDCI4674"></a><div class="props_rev_3"><a id="GUID-4C90D89F-C821-4E65-B616-C0DBCC583446" name="GUID-4C90D89F-C821-4E65-B616-C0DBCC583446"></a><h4 id="ADDCI-GUID-4C90D89F-C821-4E65-B616-C0DBCC583446" class="sect4"><span class="enumeration_section">11.6.5</span>参数管理器上下文</h4>
                  <div>
                     <p>参数管理器在<code class="codeph">OCI</code>环境句柄中维护自己的上下文。此上下文存储所有已处理的参数信息和一些内部信息。它必须有一个调用来初始化<code class="codeph">OCIExtractInit()</code>并通过调用清理<code class="codeph">OCIExtractTerm()</code>
                     </p>
                  </div>
               </div>
            </div><a id="ADDCI4675"></a><div class="props_rev_3"><a id="GUID-AA025F94-1834-4930-8C43-0678A6EC7D42" name="GUID-AA025F94-1834-4930-8C43-0678A6EC7D42"></a><h3 id="ADDCI-GUID-AA025F94-1834-4930-8C43-0678A6EC7D42" class="sect3"><span class="enumeration_section">11.7</span>文件I / O.</h3>
               <div>
                  <p>OCI文件I / O包旨在通过在多个平台上提供一致的文件I / O视图，使您更容易编写与文件系统交互的可移植代码。</p>
                  <p>在数据盒带环境中使用此程序包时，您必须了解两个问题。第一个问题是，打开文件进行写入或在文件和目录上的操作系统保护提供的安全性以外的目录中创建新文件时，此程序包不提供任何安全性。第二个问题是此程序包不支持在多线程服务器环境中跨调用使用文件描述符。</p>
               </div>
            </div><a id="ADDCI4676"></a><div class="props_rev_3"><a id="GUID-5BEBEA1D-59BE-40B8-95AE-FD2B2684DB85" name="GUID-5BEBEA1D-59BE-40B8-95AE-FD2B2684DB85"></a><h3 id="ADDCI-GUID-5BEBEA1D-59BE-40B8-95AE-FD2B2684DB85" class="sect3"><span class="enumeration_section">11.8</span>字符串格式</h3>
               <div>
                  <div class="section">
                     <p>OCI字符串格式化包有助于编写通过<code class="codeph">OCIFormatString()</code>例程处理字符串操作的可移植代码。这是<code class="codeph">sprintf</code>的改进和可移植版本，它包含标准<code class="codeph">sprintf</code>不具备的附加功能和错误检查。此附加功能包括：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>任意论证选择。</p>
                        </li>
                        <li>
                           <p>可变宽度和精度规格。</p>
                        </li>
                        <li>
                           <p>缓冲区的长度检查。</p>
                        </li>
                        <li>
                           <p>Oracle全球化支持国际化。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="SQL tuning is the attempt to diagnose and repair SQL statements that fail to meet a performance standard."></meta>
      <meta name="description" content="SQL tuning is the attempt to diagnose and repair SQL statements that fail to meet a performance standard."></meta>
      <title>SQL调优简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Tuning Guide"></meta>
      <meta property="og:description" content="SQL tuning is the attempt to diagnose and repair SQL statements that fail to meet a performance standard."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00"></meta>
      <meta name="dcterms.title" content="SQL Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96095-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="sql-performance-fundamentals.html" title="Previous" type="text/html"></link>
      <link rel="next" href="sql-performance-methodology.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sql-performance-fundamentals.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="sql-performance-methodology.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-performance-fundamentals.html" property="item" typeof="WebPage"><span property="name">SQL性能基础</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQL调优简介</li>
            </ol>
            <a id="GUID-B653E5F3-F078-4BBC-9516-B892960046A2" name="GUID-B653E5F3-F078-4BBC-9516-B892960046A2"></a><a id="TGSQL112"></a>
            
            <h2 id="TGSQL-GUID-B653E5F3-F078-4BBC-9516-B892960046A2" class="sect2"><span class="enumeration_chapter">1</span> SQL调优简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>SQL调优是尝试诊断和修复不符合性能标准的SQL语句。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-9771D972-EA7B-49A6-A73D-794F802B6E8E">关于SQL调优</a><br><span class="bold">SQL调优</span>是提高SQL语句性能以满足特定，可衡量和可实现目标的迭代过程。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-BB79CBE8-6CB2-4F45-8DEF-FD0DC6D0DA43">SQL调优的目的</a><br>当SQL语句无法按照预定和可测量的标准执行时，它就成为一个问题。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-BEC88C75-1F53-47A6-859D-A5FCDAFEF3B0">SQL调优的先决条件</a><br>SQL性能调优需要数据库知识的基础。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-77F09850-FF1A-4EC4-BE4E-D41B3597AEF2">用于SQL调整的任务和工具</a><br>在确定调优会话的目标后，例如，将用户响应时间从三分钟缩短到不到一秒，问题就变成了如何实现此目标。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="sql-performance-fundamentals.html#GUID-DD9CAA74-3E0B-48C9-8770-AADB614BC992" title="SQL调优正在改进SQL语句性能，以满足特定的，可衡量的和可实现的目标。">SQL Performance Fundamentals</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL113"></a><div class="props_rev_3"><a id="GUID-9771D972-EA7B-49A6-A73D-794F802B6E8E" name="GUID-9771D972-EA7B-49A6-A73D-794F802B6E8E"></a><h3 id="TGSQL-GUID-9771D972-EA7B-49A6-A73D-794F802B6E8E" class="sect3"><span class="enumeration_section">1.1</span>关于SQL调优</h3>
               <div>
                  <p><span class="bold">SQL调优</span>是提高SQL语句性能以满足特定，可衡量和可实现目标的迭代过程。
                  </p>
                  <p>SQL调整意味着修复已部署应用程序中的问相比之下，应用程序设计<span class="italic">在</span>部署应用程序<span class="italic">之前</span>设置了安全性和性能目标。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-9771D972-EA7B-49A6-A73D-794F802B6E8E__GUID-5F82407F-E03E-4215-8CB0-FF4E3A63EBB6">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="sql-performance-methodology.html#GUID-C8B23C09-35B5-4F0E-90B2-272805EC4062" title="本章介绍了SQL调优的推荐方法。">SQL性能方法论</a></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="sql-performance-methodology.html#GUID-A72B875B-0FAF-40A0-A9A2-7E62DEA36F50" title="获得良好SQL性能的关键是在设计应用程序时考虑性能。">设计应用程序的指南</a> ”</span> ，了解如何设计SQL性能</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-B653E5F3-F078-4BBC-9516-B892960046A2" title="SQL调优是尝试诊断和修复不符合性能标准的SQL语句。">SQL调优简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL114"></a><div class="props_rev_3"><a id="GUID-BB79CBE8-6CB2-4F45-8DEF-FD0DC6D0DA43" name="GUID-BB79CBE8-6CB2-4F45-8DEF-FD0DC6D0DA43"></a><h3 id="TGSQL-GUID-BB79CBE8-6CB2-4F45-8DEF-FD0DC6D0DA43" class="sect3"><span class="enumeration_section">1.2</span> SQL调优的目的</h3>
               <div>
                  <p>当SQL语句无法按照预定和可测量的标准执行时，它就成为一个问题。</p>
                  <p>确定问题后，典型的调优会话具有以下目标之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>减少<a href="glossary.html#GUID-00DF9005-7FEB-421A-8EE0-562473AF8138"><span class="xrefglossterm">用户响应时间</span></a> ，这意味着减少用户发出语句和收到响应之间的时间</p>
                     </li>
                     <li>
                        <p>提高<a href="glossary.html#GUID-BFB3B290-B7BF-4E9C-B2EB-F318EAC34DAF"><span class="xrefglossterm">吞吐量</span></a> ，这意味着使用处理语句访问的所有行所需的最少量资源</p>
                     </li>
                  </ul>
                  <p>对于响应时间问题，请考虑在客户更新购物车后挂起三分钟的在线图书销售商应用程序。与数据仓库中的三分钟<a href="glossary.html#GUID-9A5FF1B2-DC89-4A7F-A8CF-EC4EB14B86A5"><span class="xrefglossterm">并行查询</span></a>形成对比，该数据仓库使用所有数据库主机CPU，从而阻止其他查询运行。在每种情况下，用户响应时间是三分钟，但问题的原因是不同的，调整目标也是如此。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-B653E5F3-F078-4BBC-9516-B892960046A2" title="SQL调优是尝试诊断和修复不符合性能标准的SQL语句。">SQL调优简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL115"></a><div class="props_rev_3"><a id="GUID-BEC88C75-1F53-47A6-859D-A5FCDAFEF3B0" name="GUID-BEC88C75-1F53-47A6-859D-A5FCDAFEF3B0"></a><h3 id="TGSQL-GUID-BEC88C75-1F53-47A6-859D-A5FCDAFEF3B0" class="sect3"><span class="enumeration_section">1.3</span> SQL调优的先决条件</h3>
               <div>
                  <p>SQL性能调优需要数据库知识的基础。</p>
                  <div class="section">
                     <p>如果要调整SQL性能，则本手册假定您具有下表中显示的知识和技能。</p>
                     <div class="tblformal" id="GUID-BEC88C75-1F53-47A6-859D-A5FCDAFEF3B0__GUID-2537E4EE-B26B-47A2-AE98-333AB724D319">
                        <p class="titleintable">表1-1所需知识</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="所需知识" border="1" summary="This table describes the knowledge required for SQL tuning." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d7533e542">所需知识</th>
                                 <th align="left" valign="bottom" width="20%" id="d7533e544">描述</th>
                                 <th align="left" valign="bottom" width="20%" id="d7533e546">了解更多</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d7533e550" headers="d7533e542 ">
                                    <p>数据库架构</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d7533e550 d7533e544 ">
                                    <p>数据库体系结构不仅仅是管理员的域。作为开发人员，您希望在最少的时间内针对Oracle数据库开发应用程序，这需要利用数据库体系结构和功能。例如，不理解Oracle数据库并发控制和多版本读取一致性可能会使应用程序破坏数据的完整性，运行缓慢并降低可伸缩性。</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d7533e550 d7533e546 ">
                                    <p><a href="../cncpt/sql.html#CNCPT015" target="_blank"><span><cite>Oracle数据库概念</cite></span></a>解释了<a href="../cncpt/sql.html#CNCPT015" target="_blank"><span><cite>Oracle数据库</cite></span></a>的基本关系数据结构，事务管理，存储结构和实例体系结构。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d7533e565" headers="d7533e542 ">
                                    <p>SQL和PL / SQL</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d7533e565 d7533e544 ">
                                    <p>由于存在基于GUI的工具，因此可以在不知道SQL的情况下创建应用程序和管理数据库。但是，如果不了解SQL，就无法调整应用程序或数据库。</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d7533e565 d7533e546 ">
                                    <p><a href="../cncpt/sql.html#CNCPT015" target="_blank"><span><cite>Oracle数据库概念</cite></span></a>包括对Oracle SQL和PL / SQL的介绍。您还必须具备<a href="../sqlrf/Introduction-to-Oracle-SQL.html#SQLRF001" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> ， <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=LNPLS001" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a>以及<a href="../arpls/introduction-to-oracle-supplied-plsql-packages-and-types.html#ARPLS001" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考的应用知识</cite></span></a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d7533e598" headers="d7533e542 ">
                                    <p>SQL调优工具</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d7533e598 d7533e544 ">
                                    <p>数据库生成性能统计信息，并提供解释这些统计信息的SQL调优工具。</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d7533e598 d7533e546 ">
                                    <p><a href="../tdppt/introduction.html#GUID-30B13942-F6D7-4958-8D07-762EBD0C61F2" target="_blank"><span><cite>“Oracle数据库2天+性能调优指南”</cite></span></a>介绍了主要的SQL调优工具。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-B653E5F3-F078-4BBC-9516-B892960046A2" title="SQL调优是尝试诊断和修复不符合性能标准的SQL语句。">SQL调优简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL116"></a><div class="props_rev_3"><a id="GUID-77F09850-FF1A-4EC4-BE4E-D41B3597AEF2" name="GUID-77F09850-FF1A-4EC4-BE4E-D41B3597AEF2"></a><h3 id="TGSQL-GUID-77F09850-FF1A-4EC4-BE4E-D41B3597AEF2" class="sect3"><span class="enumeration_section">1.4</span> SQL调优的任务和工具</h3>
               <div>
                  <p>在确定调优会话的目标后，例如，将用户响应时间从三分钟缩短到不到一秒，问题就变成了如何实现此目标。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-ADD9B100-7FFC-4652-941A-E6FEF8FD7D7E">SQL调优任务</a><br>调优会话的细节取决于许多因素，包括您是主动调整还是被动调整。
                     </li>
                     <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-2E23C8E6-7FC6-406F-AE5F-BF2677BB8800">SQL调优工具</a><br>SQL调优工具是自动或手动的。
                     </li>
                     <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-EAEB23B9-E5E0-4156-83FE-E5258BD33BC6">SQL调优工具的用户界面</a><br>Cloud Control是一种系统管理工具，可以对数据库环境进行集中管理。Cloud Control提供对大多数调优工具的访问。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-B653E5F3-F078-4BBC-9516-B892960046A2" title="SQL调优是尝试诊断和修复不符合性能标准的SQL语句。">SQL调优简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL117"></a><div class="props_rev_3"><a id="GUID-ADD9B100-7FFC-4652-941A-E6FEF8FD7D7E" name="GUID-ADD9B100-7FFC-4652-941A-E6FEF8FD7D7E"></a><h4 id="TGSQL-GUID-ADD9B100-7FFC-4652-941A-E6FEF8FD7D7E" class="sect4"><span class="enumeration_section">1.4.1</span> SQL调优任务</h4>
                  <div>
                     <p>调优会话的细节取决于许多因素，包括您是主动调整还是被动调整。</p>
                     <p>在<span class="bold">主动SQL调优中</span> ，您经常使用SQL Tuning Advisor来确定是否可以使SQL语句更好地执行。在<span class="bold">反应式SQL调优中</span> ，您可以更正用户遇到的与SQL相关的问题。
                     </p>
                     <p>无论您是主动还是被动地进行调优，典型的SQL调优会话都涉及以下所有或大部分任务：</p>
                     <ol>
                        <li>
                           <p>识别高负载SQL语句</p>
                           <p>查看过去的执行历史记录，以查找负责大量应用程序工作负载和系统资源的语句。</p>
                        </li>
                        <li>
                           <p>收集与性能相关的数据</p>
                           <p><a href="glossary.html#GUID-F9E13693-82F8-4FD3-8B9F-C58CA0DAEEB0"><span class="xrefglossterm">优化程序统计信息</span></a>对SQL调优至关重要。如果这些统计信息不存在或不再准确，则优化程序无法生成最佳计划。与SQL性能相关的其他数据包括语句访问的表和视图的结构，以及语句可用的任何索引的定义。
                           </p>
                        </li>
                        <li>
                           <p>确定问题的原因</p>
                           <p>通常，SQL性能问题的原因包括：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>设计效率低下的SQL语句</p>
                                 <p>如果编写SQL语句以便执行不必要的工作，那么优化器无法提高其性能。低效设计的例子包括</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>忽略添加<a href="glossary.html#GUID-F2A09892-D404-46BD-82B1-3DB0BC286FE2"><span class="xrefglossterm">连接条件</span></a> ，这会导致<a href="glossary.html#GUID-F4749B27-739F-49F1-82BB-9F1455F792B3"><span class="xrefglossterm">笛卡尔连接</span></a></p>
                                    </li>
                                    <li>
                                       <p>使用提示将大表指定为连接中的<a href="glossary.html#GUID-8D98E7F2-8BAD-4AE2-8C72-DCD0733CB9CE"><span class="xrefglossterm">驱动表</span></a></p>
                                    </li>
                                    <li>
                                       <p>指定<code class="codeph">UNION</code>而不是<code class="codeph">UNION ALL</code></p>
                                    </li>
                                    <li>
                                       <p>为外部查询中的每一行执行<a href="glossary.html#GUID-2FDBC001-FC8C-4A33-8B4F-5C64E69016D1"><span class="xrefglossterm">子</span></a>查询</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>次优的执行计划</p>
                                 <p><a href="glossary.html#GUID-9E946687-BB0E-4BEB-9B69-DB50C9C2D266"><span class="xrefglossterm">查询优化器</span></a> （也称为<a href="glossary.html#GUID-7163D885-D24A-4E8C-B5A5-2606F718449E"><span class="xrefglossterm">优化器</span></a> ）是内部软件，用于确定哪个<a href="glossary.html#GUID-800F2BE7-A383-4FF3-A9A6-FCE786AABA3B"><span class="xrefglossterm">执行计划</span></a>最有效。有时，优化器会选择具有次优<a href="glossary.html#GUID-22DF198C-4310-4307-BF29-DCE765725BD4"><span class="xrefglossterm">访问路径</span></a>的计划，这是数据库从数据库中检索数据的方法。例如，具有低<a href="glossary.html#GUID-36E411B8-9558-4655-844A-B2EC45FDDFA7"><span class="xrefglossterm">选择性</span></a>的查询谓词的计划可以在大表而不是索引上使用<a href="glossary.html#GUID-DCAD1CDB-8714-4900-9CB3-8C26802D3B63"><span class="xrefglossterm">全表扫描</span></a> 。
                                 </p>
                                 <p>您可以将执行最佳SQL语句的执行计划与语句的计划进行次优比较。这种比较以及诸如数据量变化之类的信息可以帮助确定性能下降的原因。</p>
                              </li>
                              <li>
                                 <p>缺少SQL访问结构</p>
                                 <p>缺少SQL访问结构（例如索引和物化视图）是SQL性能欠佳的典型原因。最佳访问结构集可以将SQL性能提高几个数量级。</p>
                              </li>
                              <li>
                                 <p>过时的优化程序统计信息</p>
                                 <p>当统计维护操作（自动或手动）无法跟上DML引起的对表数据的更改时， <code class="codeph">DBMS_STATS</code>收集的统计信息可能会变得陈旧。由于表上的陈旧统计信息无法准确反映表数据，因此优化程序可以根据错误信息做出决策并生成次优执行计划。
                                 </p>
                              </li>
                              <li>
                                 <p>硬件问题</p>
                                 <p>次优性能可能与内存，I / O和CPU问题有关。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>定义问题的范围</p>
                           <p>解决方案的范围必须与问题的范围相匹配。考虑数据库级别的问题和语句级别的问题。例如，共享池太小，这会导致游标快速老化，从而导致许多硬解析。使用初始化参数来增加共享池大小可以修复数据库级别的问题并提高所有会话的性能。但是，如果单个SQL语句未使用有用的索引，则更改整个数据库的优化程序初始化参数可能会损害整体性能。如果单个SQL语句出现问题，那么适当范围的解决方案只能通过此语句解决此问题。</p>
                        </li>
                        <li>
                           <p>为次优执行SQL语句实施更正操作</p>
                           <p>这些行为因环境而异。例如，您可以重写SQL语句以提高效率，通过重写语句以使用绑定变量来避免不必要的硬解析。您还可以使用equijoins，从<code class="codeph">WHERE</code>子句中删除函数，并将复杂的SQL语句分解为多个简单语句。
                           </p>
                           <p>在某些情况下，您不是通过重写语句而是通过重构模式对象来提高SQL性能。例如，您可以索引新的<a href="glossary.html#GUID-22DF198C-4310-4307-BF29-DCE765725BD4"><span class="xrefglossterm">访问路径</span></a> ，或者对连锁索引中的列重新排序。您还可以对表进行分区，引入派生值，甚至更改数据库设计。
                           </p>
                        </li>
                        <li>
                           <p>防止SQL性能回归</p>
                           <p>要确保最佳SQL性能，请验证执行计划是否继续提供最佳性能，并选择更好的计划（如果可用）。您可以使用优化程序统计信息，SQL配置文件和SQL计划基准来实现这些目标。</p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-ADD9B100-7FFC-4652-941A-E6FEF8FD7D7E__GUID-6C231F02-B8A9-471F-80D5-3EC842CE6CBA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p> <span class="q">“ <a href="sql-processing.html#GUID-BFF0B26C-0A5D-4F79-B01E-8E1C4064A6AD" title="在解析期间，数据库执行共享池检查以确定它是否可以跳过资源密集的语句处理步骤。">共享池检查</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../cncpt/memory-architecture.html#CNCPT-GUID-1CB2BA23-4386-46DA-9146-5FE0E4599AC6" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解有关共享池的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-77F09850-FF1A-4EC4-BE4E-D41B3597AEF2" title="在确定调优会话的目标后，例如，将用户响应时间从三分钟缩短到不到一秒，问题就变成了如何实现此目标。">SQL调整的任务和工具</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL118"></a><div class="props_rev_3"><a id="GUID-2E23C8E6-7FC6-406F-AE5F-BF2677BB8800" name="GUID-2E23C8E6-7FC6-406F-AE5F-BF2677BB8800"></a><h4 id="TGSQL-GUID-2E23C8E6-7FC6-406F-AE5F-BF2677BB8800" class="sect4"><span class="enumeration_section">1.4.2</span> SQL调优工具</h4>
                  <div>
                     <p>SQL调优工具是自动或手动的。</p>
                     <p>在这种情况下，如果数据库本身可以提供诊断，建议或纠正措施，则工具是自动化的。手动工具要求您执行所有这些操作。</p>
                     <p>所有调优工具都依赖于数据库实例收集的动态性能视图，统计信息和度量标准的基本工具。数据库本身包含调整SQL语句所需的数据和元数据。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8">自动SQL调优工具</a><br>Oracle数据库提供了几个与SQL调优相关的顾问程序。
                        </li>
                        <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-B770B7C7-2D0D-4E8A-9A29-811A5E2A9D4F">手动SQL调优工具</a><br>在某些情况下，除了自动化工具之外，您可能还需要运行手动工具。或者，您可能无法访问自动化工具。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-77F09850-FF1A-4EC4-BE4E-D41B3597AEF2" title="在确定调优会话的目标后，例如，将用户响应时间从三分钟缩短到不到一秒，问题就变成了如何实现此目标。">SQL调整的任务和工具</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL119"></a><div class="props_rev_3"><a id="GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8" name="GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8"></a><h5 id="TGSQL-GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8" class="sect5"><span class="enumeration_section">1.4.2.1</span>自动SQL调优工具</h5>
                     <div>
                        <p>Oracle数据库提供了几个与SQL调优相关的顾问程序。</p>
                        <p>此外， <a href="glossary.html#GUID-7504D0DE-9297-476C-808B-EDCDB1EF43E0"><span class="xrefglossterm">SQL计划管理</span></a>是一种可以防止性能回归的机制，还可以帮助您提高SQL性能。
                        </p>
                        <p>所有自动SQL调优工具都可以使用SQL调优集作为输入。<a href="glossary.html#GUID-52FB0AE5-7346-44E5-BE92-3C09385B1DDC"><span class="xrefglossterm">SQL调优集（STS）</span></a>是一个数据库对象，包括一个或多个SQL语句及其执行统计信息和执行上下文。
                        </p>
                        <p>本节包含以下主题：</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-42BD7803-2538-4469-9D60-88B9C66BB7DE">自动数据库诊断监视器（ADDM）</a><br><span class="bold">ADDM</span>是Oracle数据库内置的自诊断软件。
                           </li>
                           <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-EBC955B9-0AD3-42A3-86CF-CDD90D72E18C">SQL Tuning Advisor</a><br><span class="bold">SQL Tuning Advisor</span>是内部诊断软件，可识别有问题的SQL语句，并建议如何提高语句性能。
                           </li>
                           <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-B237A2A2-7CA2-4AC9-B81C-71C5757C20B2">SQL Access Advisor</a><br><strong class="term">SQL Access Advisor</strong>是内部诊断软件，它建议创建，删除或保留哪些物化视图，索引和物化视图日志。
                           </li>
                           <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-3B48610F-1708-4653-845C-2A9D14801DF2">自动索引</a><br>Oracle数据库可以持续监控应用程序工作负载，自动创建和管理索引。
                           </li>
                           <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-4468EE63-8DE3-4CC4-9DF8-17E96448EA4D">SQL计划管理</a><br>SQL计划管理是一种预防机制，使优化程序能够自动管理执行计划，确保数据库仅使用已知或已验证的计划。
                           </li>
                           <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-2954A5AD-42CC-407B-991E-5C935F403E6B">SQL性能分析器</a><br>SQL Performance Analyzer通过识别每个SQL语句的性能差异来确定更改对SQL工作负载的影响。
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8__GUID-9AD90F43-0BD2-465C-8F01-AA633DD20BAD">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="managing-sql-tuning-sets.html#GUID-DD136837-9921-4C73-ABB8-9F1DC22542C5" title="SQL调优集（STS）是一个数据库对象，可用作调优工具的输入。">关于SQL调优集</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=TDPPT-GUID-13081B28-AB2A-485F-B836-74DAA9961BAA" target="_blank"><span><cite>Oracle Database 2 Day +性能调优指南</cite></span></a> ，了解有关管理SQL调优集的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-2E23C8E6-7FC6-406F-AE5F-BF2677BB8800" title="SQL调优工具是自动或手动的。">SQL调整工具</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="TGSQL120"></a><div class="props_rev_3"><a id="GUID-42BD7803-2538-4469-9D60-88B9C66BB7DE" name="GUID-42BD7803-2538-4469-9D60-88B9C66BB7DE"></a><h6 id="TGSQL-GUID-42BD7803-2538-4469-9D60-88B9C66BB7DE" class="sect6"><span class="enumeration_section">1.4.2.1.1</span>自动数据库诊断监视器（ADDM）</h6>
                        <div>
                           <p><span class="bold">ADDM</span>是Oracle数据库内置的自诊断软件。
                           </p>
                           <p>ADDM可以自动定位性能问题的根本原因，提供纠正建议，并量化预期收益。ADDM还可识别无需采取任何措施的区域。</p>
                           <p>ADDM和其他顾问使用<a href="glossary.html#GUID-91E88F5F-4220-4B1A-8578-CCFF27FBBCA9"><span class="xrefglossterm">自动工作负载存储库（AWR）</span></a> ，它是一种为数据库组件提供服务以收集，维护和使用统计信息的基础结构。ADDM检查并分析AWR中的统计信息，以确定可能的性能问题，包括高负载SQL。</p>
                           <p>例如，您可以将ADDM配置为每晚运行。在早上，您可以检查最新的ADDM报告，以查看可能导致问题的原因以及是否存在建议的修复。该报告可能会显示特定的<code class="codeph">SELECT</code>语句占用了大量CPU，并建议您运行SQL Tuning Advisor。
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-42BD7803-2538-4469-9D60-88B9C66BB7DE__GUID-02A48CE7-1924-480F-9C8B-6B8EB94CF9F4">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT020" target="_blank"><span><cite>Oracle数据库2天+性能调优指南</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../tgdba/automatic-performance-diagnostics.html#GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43" target="_blank"><span><cite>Oracle数据库性能调整指南</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8" title="Oracle数据库提供了几个与SQL调优相关的顾问程序。">自动SQL调整工具</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL540"></a><a id="TGSQL121"></a><div class="props_rev_3"><a id="GUID-EBC955B9-0AD3-42A3-86CF-CDD90D72E18C" name="GUID-EBC955B9-0AD3-42A3-86CF-CDD90D72E18C"></a><h6 id="TGSQL-GUID-EBC955B9-0AD3-42A3-86CF-CDD90D72E18C" class="sect6"><span class="enumeration_section">1.4.2.1.2</span> SQL Tuning Advisor</h6>
                        <div>
                           <p><span class="bold">SQL Tuning Advisor</span>是内部诊断软件，可识别有问题的SQL语句，并建议如何提高语句性能。
                           </p>
                           <p>在数据库维护窗口期间作为自动维护任务运行时，SQL Tuning Advisor称为<a href="glossary.html#GUID-0FCAD63A-F031-4BB5-AC88-0F2E66F34129"><span class="xrefglossterm">自动SQL调整顾问</span></a> 。
                           </p>
                           <p>SQL Tuning Advisor将一个或多个SQL语句作为输入，并调用<a href="glossary.html#GUID-6FD1585E-9283-4881-A5BF-86165B4F8C23"><span class="xrefglossterm">自动调整优化器</span></a>对语句执行SQL调优。顾问执行以下类型的分析：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>检查丢失或过时的统计信息</p>
                              </li>
                              <li>
                                 <p>构建SQL配置文件</p>
                                 <p><a href="glossary.html#GUID-79F91289-6DD0-49BC-AEA2-3427F5D52F41"><span class="xrefglossterm">SQL配置文件</span></a>是一组特定于SQL语句的辅助信息。SQL配置文件包含在自动SQL调整期间发现的次优优化程序估计的更正。此信息可以改进<a href="glossary.html#GUID-FE541AF8-DCAB-4B00-8015-04BDCB295A85"><span class="xrefglossterm">基数的</span></a>优化器估计， <a href="glossary.html#GUID-FE541AF8-DCAB-4B00-8015-04BDCB295A85"><span class="xrefglossterm">基数</span></a>是执行计划中的操作估计或实际返回的行数，以及选择性。这些改进的估计导致优化器选择更好的计划。
                                 </p>
                              </li>
                              <li>
                                 <p>探讨不同的访问路径是否可以显着提高性能</p>
                              </li>
                              <li>
                                 <p>标识适合于次优计划的SQL语句</p>
                              </li>
                           </ul>
                           <p>产出的形式是建议或建议，以及每项建议的理由及其预期收益。该建议涉及对象统计信息的集合，新索引的创建，SQL语句的重构或SQL配置文件的创建。您可以选择接受建议以完成SQL语句的调整。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-EBC955B9-0AD3-42A3-86CF-CDD90D72E18C__GUID-14D80BDF-3F42-4632-A9F9-883F3249FDC0">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="sql-tuning-advisor.html#GUID-8E1A39CB-A491-4254-8B31-9B1DF7B52AA1" title="使用SQL Tuning Advisor获取有关提高高负载SQL语句性能的建议，并通过仅执行最佳计划来防止回归。">使用SQL Tuning Advisor分析SQL</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT020" target="_blank"><span><cite>Oracle数据库2天+性能调优指南</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8" title="Oracle数据库提供了几个与SQL调优相关的顾问程序。">自动SQL调整工具</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL591"></a><a id="TGSQL122"></a><div class="props_rev_3"><a id="GUID-B237A2A2-7CA2-4AC9-B81C-71C5757C20B2" name="GUID-B237A2A2-7CA2-4AC9-B81C-71C5757C20B2"></a><h6 id="TGSQL-GUID-B237A2A2-7CA2-4AC9-B81C-71C5757C20B2" class="sect6"><span class="enumeration_section">1.4.2.1.3</span> SQL Access Advisor</h6>
                        <div>
                           <p><strong class="term">SQL Access Advisor</strong>是内部诊断软件，它建议创建，删除或保留哪些物化视图，索引和物化视图日志。
                           </p>
                           <p>SQL Access Advisor将实际工作负载作为输入，或者顾问程序可以从模式中获取假设的工作负载。SQL Access Advisor会考虑空间使用和查询性能之间的权衡，并建议对新的和现有的物化视图和索引进行最具成本效益的配置。顾问还提出有关分区的建议。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-B237A2A2-7CA2-4AC9-B81C-71C5757C20B2__GUID-7CE6A98F-7D74-4B73-A1C9-A9759CE42463">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="sql-access-advisor.html#GUID-10DCBE78-9330-4713-AD79-5C7E73EACD33" title="SQL Access Advisor接受来自多个源（包括SQL调优集）的输入，然后发出建议。">关于SQL Access Advisor</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=TDPPT170" target="_blank"><span><cite>Oracle数据库2天+性能调优指南</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../admin/managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关自动索引的更多信息</p>
                                 </li>
                                 <li>
                                    <p><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>“Oracle数据库许可信息用户手册”</cite></span></a> ，详细说明了不同版本和服务是否支持自动索引</p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8" title="Oracle数据库提供了几个与SQL调优相关的顾问程序。">自动SQL调整工具</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-3B48610F-1708-4653-845C-2A9D14801DF2" name="GUID-3B48610F-1708-4653-845C-2A9D14801DF2"></a><h6 id="TGSQL-GUID-3B48610F-1708-4653-845C-2A9D14801DF2" class="sect6"><span class="enumeration_section">1.4.2.1.4</span>自动索引</h6>
                        <div>
                           <p>Oracle数据库可以持续监控应用程序工作负载，自动创建和管理索引。</p>
                           <div class="infoboxnote" id="GUID-3B48610F-1708-4653-845C-2A9D14801DF2__GUID-781D71ED-FE21-49A3-A63B-C4E8F09C5A68">
                              <p class="notep1">注意：</p>
                              <p id="GUID-3B48610F-1708-4653-845C-2A9D14801DF2__d5e5259">有关<span id="GUID-3B48610F-1708-4653-845C-2A9D14801DF2__d5e5261">不同版本和服务支持哪些功能的详细信息，</span>请参阅“ <span id="GUID-3B48610F-1708-4653-845C-2A9D14801DF2__d5e5261"><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>Oracle数据库许可信息用户手册</cite></span></a> ”</span> 。
                              </p>
                           </div>
                           <p>手动创建索引需要深入了解数据模型，应用程序和数据分布。DBA通常会选择创建哪些索引，然后从不修改他们的选择。结果，失去了改进的机会，并且不必要的索引可能成为性能责任。自动索引管理通过执行以下任务解决了此问题：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>不断监控工作量</p>
                              </li>
                              <li>
                                 <p>创建新索引</p>
                              </li>
                              <li>
                                 <p>重建索引，然后将其标记为不可用或不可见</p>
                              </li>
                              <li>
                                 <p>删除索引</p>
                              </li>
                              <li>
                                 <p>检查自动索引管理对性能的影响</p>
                              </li>
                           </ul>
                           <p>索引功能实现为自动任务，以固定间隔在后台运行。在每次迭代时，该任务执行以下基本步骤：</p>
                           <ol>
                              <li>
                                 <p>根据列和列组使用情况标识候选索引。</p>
                              </li>
                              <li>
                                 <p>在不可用和不可见模式下创建一组候选索引。这些索引不占用存储空间。</p>
                              </li>
                              <li>
                                 <p>查询先前执行的语句的优先级列表，以确定候选索引是否值得重建。</p>
                              </li>
                              <li>
                                 <p>编译语句以确定优化程序是否会选择新索引，然后重建优化程序选择的索引。</p>
                              </li>
                              <li>
                                 <p>执行使用自动索引的语句</p>
                              </li>
                              <li>
                                 <p>执行以下任一操作：</p>
                                 <ul id="GUID-3B48610F-1708-4653-845C-2A9D14801DF2__UL_RKH_4W5_BGB" style="list-style-type:disc">
                                    <li>
                                       <p>当语句显着改善其性能时，将索引标记为可见。只有在验证并将索引标记为可见之后，数据库才会更改工作负载中语句的计划。在此之前，数据库不会使游标无效并继续使用旧计划。</p>
                                    </li>
                                    <li>
                                       <p>标记索引在提供不足的性能优势时无法使用。当使用其他报表的索引的概率较低或存在空间压力时，此操作以延迟方式发生。</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>使用SQL计划管理避免回归。索引可能会使一个语句受益，但会导致第二个语句中的性能回归。在这种情况下，数据库通过将索引标记为可见来优化第一个语句。为了防止第二个语句的回归，数据库使用SQL计划管理来保护它。</p>
                              </li>
                              <li>
                                 <p>删除长时间未使用的索引。</p>
                              </li>
                           </ol>
                           <p>您可以通过在<code class="codeph">DBMS_AUTO_INDEX</code>包中执行以下过程来启用自动索引：</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_MODE'，'IMPLEMENT'）</code></pre><p>您还可以使用<code class="codeph">DBMS_AUTO_INDEX</code>包报告自动任务并配置设置，例如保留未使用的索引的时间。
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-3B48610F-1708-4653-845C-2A9D14801DF2__GUID-4133FC4B-FC3D-479C-BA87-17F52A3A8233">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../admin/managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关自动索引的更多信息</p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=GUID-78C59A20-2F92-448F-96F7-6C4FBB355E42" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_AUTO_INDEX</code>包</p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8" title="Oracle数据库提供了几个与SQL调优相关的顾问程序。">自动SQL调整工具</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL123"></a><div class="props_rev_3"><a id="GUID-4468EE63-8DE3-4CC4-9DF8-17E96448EA4D" name="GUID-4468EE63-8DE3-4CC4-9DF8-17E96448EA4D"></a><h6 id="TGSQL-GUID-4468EE63-8DE3-4CC4-9DF8-17E96448EA4D" class="sect6"><span class="enumeration_section">1.4.2.1.5</span> SQL计划管理</h6>
                        <div>
                           <p>SQL计划管理是一种预防机制，使优化程序能够自动管理执行计划，确保数据库仅使用已知或已验证的计划。</p>
                           <p>此机制可以构建<a href="glossary.html#GUID-A9B279E2-7088-4029-8C94-4E8DD00B7E21"><span class="xrefglossterm">SQL计划基准</span></a> ，该<a href="glossary.html#GUID-A9B279E2-7088-4029-8C94-4E8DD00B7E21"><span class="xrefglossterm">基准</span></a>包含每个SQL语句的一个或多个接受的计划。通过使用基线，SQL计划管理可以防止计划回归环境变化，同时允许优化程序发现和使用更好的计划。
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-4468EE63-8DE3-4CC4-9DF8-17E96448EA4D__GUID-7477558A-E8B1-4731-8375-3E56A564D44A">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="overview-of-sql-plan-management.html#GUID-F1C45056-F998-43E5-B362-83F88DA49E58" title="SQL计划管理是一种预防机制，使优化程序能够自动管理执行计划，确保数据库仅使用已知或已验证的计划。">SQL计划管理概述</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_SPM.html#ARPLS-GUID-D6EC284C-053D-417D-B887-94422BCB4E3A" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>了解<code class="codeph">DBMS_SPM</code>包</li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8" title="Oracle数据库提供了几个与SQL调优相关的顾问程序。">自动SQL调整工具</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL124"></a><div class="props_rev_3"><a id="GUID-2954A5AD-42CC-407B-991E-5C935F403E6B" name="GUID-2954A5AD-42CC-407B-991E-5C935F403E6B"></a><h6 id="TGSQL-GUID-2954A5AD-42CC-407B-991E-5C935F403E6B" class="sect6"><span class="enumeration_section">1.4.2.1.6</span> SQL性能分析器</h6>
                        <div>
                           <p>SQL Performance Analyzer通过识别每个SQL语句的性能差异来确定更改对SQL工作负载的影响。</p>
                           <p>系统更改（如升级数据库或添加索引）可能会导致执行计划发生更改，从而影响SQL性能。通过使用SQL Performance Analyzer，您可以准确地预测系统更改对SQL性能的影响。使用此信息，您可以在SQL性能下降时调整数据库，或在SQL性能提高时验证和测量增益。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-2954A5AD-42CC-407B-991E-5C935F403E6B__GUID-78A21EAF-3264-4A81-8B6B-ADC9130B7427">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../ratug/introduction-to-oracle-database-testing.html#RATUG101" target="_blank"><span><cite>Oracle数据库测试指南</cite></span></a></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-6C88B926-CFD4-4402-B1AE-CDAEDCA553A8" title="Oracle数据库提供了几个与SQL调优相关的顾问程序。">自动SQL调整工具</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="TGSQL125"></a><div class="props_rev_3"><a id="GUID-B770B7C7-2D0D-4E8A-9A29-811A5E2A9D4F" name="GUID-B770B7C7-2D0D-4E8A-9A29-811A5E2A9D4F"></a><h5 id="TGSQL-GUID-B770B7C7-2D0D-4E8A-9A29-811A5E2A9D4F" class="sect5"><span class="enumeration_section">1.4.2.2</span>手动SQL调优工具</h5>
                     <div>
                        <p>在某些情况下，除了自动化工具之外，您可能还需要运行手动工具。或者，您可能无法访问自动化工具。</p>
                        <p>本节包含以下主题：</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-BBB0D5F7-70EC-4C43-A3C1-7EE8C85631CB">执行计划</a><br>执行计划是手动SQL调优的主要诊断工具。例如，您可以查看计划以确定优化程序是选择预期的计划，还是确定在表上创建索引的效果。
                           </li>
                           <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-5CB3FBDD-40E8-46DC-9435-CF596D1E1D2F">实时SQL监控和实时数据库操作</a><br>Oracle数据库的实时SQL监视功能使您可以在执行时监视SQL语句的性能。默认情况下，当一个语句并行运行，或者在一次执行中消耗了至少5秒的CPU或I / O时间时，SQL监视会自动启动。
                           </li>
                           <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-1C33D891-C4A3-48D2-A41F-5E66F8765024">应用程序跟踪</a><br><strong class="term">SQL跟踪文件</strong>提供有关各个SQL语句的性能信息：解析计数，物理和逻辑读取，库高速缓存上的未命中等。
                           </li>
                           <li class="ulchildlink"><a href="introduction-to-sql-tuning.html#GUID-8DDA0A74-478E-4153-B282-242CCC427EC3">优化器提示</a><br><strong class="term">提示</strong>是通过SQL语句中的注释传递给优化器的指令。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-2E23C8E6-7FC6-406F-AE5F-BF2677BB8800" title="SQL调优工具是自动或手动的。">SQL调整工具</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="TGSQL126"></a><div class="props_rev_3"><a id="GUID-BBB0D5F7-70EC-4C43-A3C1-7EE8C85631CB" name="GUID-BBB0D5F7-70EC-4C43-A3C1-7EE8C85631CB"></a><h6 id="TGSQL-GUID-BBB0D5F7-70EC-4C43-A3C1-7EE8C85631CB" class="sect6"><span class="enumeration_section">1.4.2.2.1</span>执行计划</h6>
                        <div>
                           <p>执行计划是手动SQL调优的主要诊断工具。例如，您可以查看计划以确定优化程序是选择预期的计划，还是确定在表上创建索引的效果。</p>
                           <p>您可以通过多种方式显示执行计划。以下工具是最常用的：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">DBMS_XPLAN</code></p>
                                 <p>您可以使用<code class="codeph">DBMS_XPLAN</code>包方法显示<code class="codeph">EXPLAIN PLAN</code>命令生成的执行计划以及<code class="codeph">V$SQL_PLAN</code>查询。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">解释计划</code></p>
                                 <p>通过此SQL语句，您可以查看优化程序在不实际执行语句的情况下执行SQL语句的执行计划。请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=SQLRF01601" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">V$SQL_PLAN</code>和相关视图</p>
                                 <p>这些视图包含有关已执行的SQL语句及其执行计划的信息，这些信息仍在共享池中。请参见<a href="../refrn/V-SQL_PLAN.html#REFRN30250" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">AUTOTRACE</code></p>
                                 <p>SQL * Plus中的<code class="codeph">AUTOTRACE</code>命令生成有关查询性能的执行计划和统计信息。此命令提供磁盘读取和内存读取等统计信息。请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=SQPUG018" target="_blank"><span><cite>SQL * Plus用户指南和参考</cite></span></a> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-B770B7C7-2D0D-4E8A-9A29-811A5E2A9D4F" title="在某些情况下，除了自动化工具之外，您可能还需要运行手动工具。或者，您可能无法访问自动化工具。">手动SQL调整工具</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL127"></a><div class="props_rev_3"><a id="GUID-5CB3FBDD-40E8-46DC-9435-CF596D1E1D2F" name="GUID-5CB3FBDD-40E8-46DC-9435-CF596D1E1D2F"></a><h6 id="TGSQL-GUID-5CB3FBDD-40E8-46DC-9435-CF596D1E1D2F" class="sect6"><span class="enumeration_section">1.4.2.2.2</span>实时SQL监控和实时数据库操作</h6>
                        <div>
                           <p>Oracle数据库的实时SQL监视功能使您可以在执行时监视SQL语句的性能。默认情况下，当一个语句并行运行，或者在一次执行中消耗了至少5秒的CPU或I / O时间时，SQL监视会自动启动。</p>
                           <p><a href="glossary.html#GUID-EB7D5D0A-0439-4336-8DC3-2DA24072977F"><span class="xrefglossterm">数据库操作</span></a>是由最终用户或应用程序代码定义的一组数据库任务，例如，批处理作业或提取，转换和加载（ETL）处理。您可以定义，监视和报告数据库操作。实时数据库操作提供自动监视复合操作的功能。执行开始后，数据库会自动监视并行查询，DML和DDL语句。
                           </p>
                           <p>Oracle Enterprise Manager云控制（云控制）提供易于使用的SQL监控页面。或者，您可以使用<code class="codeph">V$SQL_MONITOR</code>和<code class="codeph">V$SQL_PLAN_MONITOR</code>视图监视与SQL相关的统计信息。您可以将这些视图与以下视图一起使用，以获取有关正在监视的执行的更多信息：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">V $ ACTIVE_SESSION_HISTORY</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">V $ SESSION</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">V $ SESSION_LONGOPS</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">V $ SQL</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">V $ SQL_PLAN</code></p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-5CB3FBDD-40E8-46DC-9435-CF596D1E1D2F__GUID-9BE9E183-AACD-4A66-B590-F0E5971DE228">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="monitoring-database-operations.html#GUID-007E5BAE-B07D-4BD1-9485-DE8D260BF862" title="当STATISTICS_LEVEL初始化参数设置为TYPICAL（默认值）或ALL时，默认情况下启用SQL监视功能。">关于监控数据库操作</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=GUID-8C5690B0-DE10-4460-86DF-80111869CF4C" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">V$</code>视图</p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-B770B7C7-2D0D-4E8A-9A29-811A5E2A9D4F" title="在某些情况下，除了自动化工具之外，您可能还需要运行手动工具。或者，您可能无法访问自动化工具。">手动SQL调整工具</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL128"></a><div class="props_rev_3"><a id="GUID-1C33D891-C4A3-48D2-A41F-5E66F8765024" name="GUID-1C33D891-C4A3-48D2-A41F-5E66F8765024"></a><h6 id="TGSQL-GUID-1C33D891-C4A3-48D2-A41F-5E66F8765024" class="sect6"><span class="enumeration_section">1.4.2.2.3</span>应用程序跟踪</h6>
                        <div>
                           <p><strong class="term">SQL跟踪文件</strong>提供有关各个SQL语句的性能信息：解析计数，物理和逻辑读取，库高速缓存上的未命中等。
                           </p>
                           <p>跟踪文件有时可用于诊断SQL性能问题。您可以使用<code class="codeph">DBMS_MONITOR</code>或<code class="codeph">DBMS_SESSION</code>包为特定会话启用和禁用SQL跟踪。当您启用跟踪机制时，Oracle数据库通过为每个服务器进程生成跟踪文件来实现跟踪。
                           </p>
                           <p>Oracle数据库提供以下命令行工具来分析跟踪文件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">TKPROF</code></p>
                                 <p>此实用程序接受SQL跟踪工具生成的跟踪文件作为输入，然后生成格式化的输出文件。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">trcsess</code></p>
                                 <p>此实用程序根据会话ID，客户端ID和服务ID等条件合并来自多个跟踪文件的跟踪输出。在<code class="codeph">trcsess</code>将跟踪信息合并到单个输出文件后，您可以使用<code class="codeph">TKPROF</code>格式化输出文件。 <code class="codeph">trcsess</code>对于合并特定会话的跟踪以用于性能或调试目的非常有用。
                                 </p>
                              </li>
                           </ul>
                           <p>端到端应用程序跟踪简化了诊断多层环境中性能问题的过程。在这些环境中，中间层将请求从最终客户端路由到不同的数据库会话，从而难以跨数据库会话跟踪客户端。端到端应用程序跟踪使用客户端ID通过数据库的所有层唯一地跟踪特定的最终客户端。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-1C33D891-C4A3-48D2-A41F-5E66F8765024__GUID-A3505AA9-F007-4C99-A418-1AB8463B55AC">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ARPLS091" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_MONITOR</code>和<code class="codeph">DBMS_SESSION</code>更多信息</p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-B770B7C7-2D0D-4E8A-9A29-811A5E2A9D4F" title="在某些情况下，除了自动化工具之外，您可能还需要运行手动工具。或者，您可能无法访问自动化工具。">手动SQL调整工具</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL129"></a><div class="props_rev_3"><a id="GUID-8DDA0A74-478E-4153-B282-242CCC427EC3" name="GUID-8DDA0A74-478E-4153-B282-242CCC427EC3"></a><h6 id="TGSQL-GUID-8DDA0A74-478E-4153-B282-242CCC427EC3" class="sect6"><span class="enumeration_section">1.4.2.2.4</span>优化器提示</h6>
                        <div>
                           <p><strong class="term">提示</strong>是通过SQL语句中的注释传递给优化器的指令。
                           </p>
                           <p>提示使您可以通常由优化程序自动做出决策。在测试或开发环境中，提示对于测试特定访问路径的性能很有用。例如，您可能知道特定索引对某些查询更具选择性。在这种情况下，您可以使用提示来指示优化程序使用更好的执行计划，如以下示例所示：</p><pre class="pre codeblock"><code>SELECT / * + INDEX（employees emp_department_ix）* / employee_id，department_id FROM employees WHERE department_id&gt; 50;</code></pre><p>有时，由于拼写错误，无效参数，冲突提示以及通过转换无效的提示，数据库可能不会使用提示。从<span>Oracle Database 19c开始</span> ，您可以生成有关在计划生成期间使用或未使用哪些提示的报告。
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-8DDA0A74-478E-4153-B282-242CCC427EC3__GUID-21845782-1C8A-4999-B006-A5AA69E9D14D">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="influencing-the-optimizer.html#GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C" title="优化程序提示是SQL语句中的特殊注释，它将指令传递给优化程序。">用提示影响优化器</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/Comments.html#SQLRF-GUID-D316D545-89E2-4D54-977F-FC97815CD62E" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a>以了解有关提示的更多信息</p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-B770B7C7-2D0D-4E8A-9A29-811A5E2A9D4F" title="在某些情况下，除了自动化工具之外，您可能还需要运行手动工具。或者，您可能无法访问自动化工具。">手动SQL调整工具</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="TGSQL130"></a><div class="props_rev_3"><a id="GUID-EAEB23B9-E5E0-4156-83FE-E5258BD33BC6" name="GUID-EAEB23B9-E5E0-4156-83FE-E5258BD33BC6"></a><h4 id="TGSQL-GUID-EAEB23B9-E5E0-4156-83FE-E5258BD33BC6" class="sect4"><span class="enumeration_section">1.4.3</span> SQL调优工具的用户界面</h4>
                  <div>
                     <p>Cloud Control是一种系统管理工具，可以对数据库环境进行集中管理。Cloud Control提供对大多数调优工具的访问。</p>
                     <p>通过结合图形控制台，Oracle管理服务器，Oracle智能代理，通用服务和管理工具，Cloud Control提供了一个全面的系统管理平台。</p>
                     <p>您可以使用命令行界面访问所有SQL调优工具。例如， <code class="codeph">DBMS_SQLTUNE</code>包是SQL Tuning Advisor的命令行界面。
                     </p>
                     <p>Oracle建议将Cloud Control作为数据库管理和调优的最佳界面。如果命令行界面更好地说明了特定的概念或任务，本手册使用命令行示例。但是，在这些情况下，调优任务包括对与任务关联的主要Cloud Control页面的引用。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-sql-tuning.html#GUID-77F09850-FF1A-4EC4-BE4E-D41B3597AEF2" title="在确定调优会话的目标后，例如，将用户响应时间从三分钟缩短到不到一秒，问题就变成了如何实现此目标。">SQL调整的任务和工具</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
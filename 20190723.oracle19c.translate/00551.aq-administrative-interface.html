<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="These topics describe the Oracle Database Advanced Queuing (AQ) administrative interface."></meta>
      <meta name="description" content="These topics describe the Oracle Database Advanced Queuing (AQ) administrative interface."></meta>
      <title>Oracle数据库高级队列管理界面</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content="These topics describe the Oracle Database Advanced Queuing (AQ) administrative interface."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="aq-troubleshooting.html" title="Previous" type="text/html"></link>
      <link rel="next" href="aq-messaging-gateway-views.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="aq-troubleshooting.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="aq-messaging-gateway-views.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle数据库高级队列管理界面</li>
            </ol>
            <a id="GUID-31CF7723-6AB8-455A-8841-8683D936DD3E" name="GUID-31CF7723-6AB8-455A-8841-8683D936DD3E"></a><a id="ADQUE0800"></a>
            
            <h2 id="ADQUE-GUID-31CF7723-6AB8-455A-8841-8683D936DD3E" class="sect2"><span class="enumeration_chapter">8</span> Oracle数据库高级队列管理界面</h2>
         </header>
         <div class="ind">
            <div>
               <p>这些主题描述了Oracle数据库高级队列（AQ）管理界面。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="aq-administrative-interface.html#GUID-50E7969A-88E7-4BD7-A74F-47901E631B61" title="这些主题描述了如何管理非分片队列表。">管理非分片队列表</a></p>
                  </li>
                  <li>
                     <p><a href="aq-administrative-interface.html#GUID-0FA3BE2C-A988-49ED-B602-948015276F66" title="这些主题描述了如何管理非分片队列。">管理非分片队列</a></p>
                  </li>
                  <li>
                     <p><a href="aq-administrative-interface.html#GUID-803975AA-F341-4B85-B35B-B2996AB7ABB3" title="这些主题描述了如何管理分片队列。">管理分片队列</a></p>
                  </li>
                  <li>
                     <p><a href="aq-administrative-interface.html#GUID-AAFDFFD3-0256-473A-A685-225AD0D024DB" title="转换会更改消息的格式，以便其他应用程序可以理解由一个应用程序创建的消息。您可以对持久消息和缓冲消息使用转换。这些主题描述了如何管理队列表。">管理转型</a></p>
                  </li>
                  <li>
                     <p><a href="aq-administrative-interface.html#GUID-95E67297-FD08-415D-8085-6EB635EC9F8B" title="这些主题描述了如何授予和撤消权限。">授予和撤销权限</a></p>
                  </li>
                  <li>
                     <p><a href="aq-administrative-interface.html#GUID-D9D78672-3AA0-4687-B0DA-67F2127FE3AA" title="这些主题描述了如何管理订阅者。">管理订户</a></p>
                  </li>
                  <li>
                     <p><a href="aq-administrative-interface.html#GUID-1BAEBA4C-441A-43FE-B822-14E9A6E33A0E" title="可以在队列生命周期的任何时间更改或删除为队列定义的传播计划。">管理传播</a></p>
                  </li>
                  <li>
                     <p><a href="aq-administrative-interface.html#GUID-FF34D153-553C-48F0-9ACC-8266DBC64F15" title="这些主题描述了如何管理Oracle数据库高级排队代理。">管理Oracle数据库高级排队代理</a></p>
                  </li>
                  <li>
                     <p><a href="aq-administrative-interface.html#GUID-05DCD3B5-48BF-42B4-9D88-A54D9127F61F" title="DBMS_AQADM.ADD_ALIAS_TO_LDAP为LDAP服务器添加别名。">将别名添加到LDAP服务器</a></p>
                  </li>
                  <li>
                     <p><a href="aq-administrative-interface.html#GUID-90AC4D22-62AC-44A5-A06E-057CA1266864" title="DBMS_AQADM.DEL_ALIAS_FROM_LDAP从LDAP服务器中删除别名。">从LDAP服务器中删除别名</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-31CF7723-6AB8-455A-8841-8683D936DD3E__GUID-75833CB0-AB44-42CE-B480-C1D933F82580">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-program-interfaces.html#GUID-9A4C8FD4-235D-4F90-B757-3E36B2E5CF76" title="这些主题描述了在准备Oracle数据库高级队列（AQ）应用程序环境时必须使用的各种语言选项和元素以及需要考虑的问题。">Oracle数据库高级队列：程序化接口，</a>用于列出每个编程接口中的可用功能</p>
                     </li>
                     <li>
                        <p>有关DBMS_AQADM程序包的信息，请参阅<a href="../arpls/DBMS_AQADM.html#ARPLS005" target="_blank"><span class="italic">Oracle Database PL / SQL程序包和类型参考</span></a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADQUE2657"></a><div class="props_rev_3"><a id="GUID-50E7969A-88E7-4BD7-A74F-47901E631B61" name="GUID-50E7969A-88E7-4BD7-A74F-47901E631B61"></a><h3 id="ADQUE-GUID-50E7969A-88E7-4BD7-A74F-47901E631B61" class="sect3"><span class="enumeration_section">8.1</span>管理非分片队列表</h3>
               <div>
                  <p>这些主题描述了如何管理非分片队列表。</p>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41" title="DBMS_AQADM.CREATE_QUEUE_TABLE为预定义类型的消息创建非分片队列表。">创建队列表</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-13FB1BCB-5D5A-410A-AD46-B5F58F50B32C" title="DBMS_AQADM.ALTER_QUEUE_TABLE更改非分片队列表的现有属性。">更改队列表</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-3CCA227A-F777-4EF5-8556-44DC599674AA" title="DBMS_AQADM.DROP_QUEUE_TABLE删除现有的非分片队列表。">删除队列表</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79" title="DBMS_AQADM.PURGE_QUEUE_TABLE清除来自非分片队列表的消息。">清除队列表</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-98C3CCDA-7852-4F0D-8FDF-12E4DC9DB983" title="DBMS_AQADM.MIGRATE_QUEUE_TABLE将非分片队列表从8.0,8.1或10.0迁移到8.0,8.1或10.0。只有队列表的所有者才能迁移它。">迁移队列表</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADQUE2658"></a><a id="ADQUE2659"></a><a id="ADQUE2660"></a><a id="ADQUE2661"></a><a id="ADQUE2662"></a><a id="ADQUE2663"></a><a id="ADQUE2664"></a><a id="ADQUE2665"></a><a id="ADQUE2666"></a><a id="ADQUE2667"></a><a id="ADQUE2668"></a><a id="ADQUE2669"></a><a id="ADQUE2670"></a><a id="ADQUE2671"></a><a id="ADQUE2672"></a><a id="ADQUE2673"></a><a id="ADQUE2674"></a><a id="ADQUE0801"></a><div class="props_rev_3"><a id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41" name="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41"></a><h4 id="ADQUE-GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41" class="sect4"><span class="enumeration_section">8.1.1</span>创建队列表</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.CREATE_QUEUE_TABLE</code>为预定义类型的消息创建<code class="codeph">DBMS_AQADM.CREATE_QUEUE_TABLE</code>队列表。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table IN VARCHAR2，queue_payload_type IN VARCHAR2，storage_clause IN VARCHAR2 DEFAULT NULL，sort_list IN VARCHAR2 DEFAULT NULL，multiple_consumers IN BOOLEAN DEFAULT FALSE，message_grouping IN BINARY_INTEGER DEFAULT NONE，comment in VARCHAR2 DEFAULT NULL，auto_commit IN BOOLEAN DEFAULT TRUE，primary_instance IN BINARY_INTEGER DEFAULT 0，secondary_instance IN BINARY_INTEGER DEFAULT 0，兼容IN VARCHAR2 DEFAULT NULL，secure IN BOOLEAN DEFAULT FALSE replication_mode IN BINARY_INTEGER DEFAULT NONE）;</pre><p>它具有以下必需和可选参数：</p>
                        <div class="tblformal" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-B75DC57E-31D8-4F53-A487-EF830C145AA2">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d31062e368">参数</th>
                                    <th align="left" valign="bottom" id="d31062e371">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e376" headers="d31062e368 ">
                                       <p><code class="codeph">queue_table</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e376 d31062e371 ">
                                       <p><a id="d31062e382" class="indexterm-anchor"></a><a id="d31062e386" class="indexterm-anchor"></a>此必需参数指定队列表名称。
                                       </p>
                                       <p><a id="d31062e394" class="indexterm-anchor"></a><a id="d31062e400" class="indexterm-anchor"></a>如果数据库兼容性为10.0，则支持混合大小写（大写和小写一起） <a href="glossary.html#GUID-45894F1F-4871-4A00-9171-2743821BAD3A"><span class="xrefglossterm">队列表</span></a>名称，但名称必须用双引号括起来。所以<code class="codeph">abc.efg</code>表示模式是<code class="codeph">ABC</code> ，名称是<code class="codeph">EFG</code> ，但是<code class="codeph">"abc"."efg"</code>表示模式是<code class="codeph">abc</code> ，名称是<code class="codeph">efg</code> 。
                                       </p>
                                       <p><a id="d31062e431" class="indexterm-anchor"></a><a id="d31062e437" class="indexterm-anchor"></a>从12 <span class="italic">c</span>版本2（12.2。）开始，AQ队列表名称的最大长度为122个字节。如果您尝试创建名称较长的队列表，则会出现错误ORA-24019。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e448" headers="d31062e368 ">
                                       <p><code class="codeph">queue_payload_type</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e448 d31062e371 ">
                                       <p><a id="d31062e454" class="indexterm-anchor"></a><a id="d31062e458" class="indexterm-anchor"></a>此必需参数将有效内容类型指定为RAW或对象类型。有关详细信息，请参阅<span class="q">“ <a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDHFDJG">有效负载类型</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e470" headers="d31062e368 ">
                                       <p><code class="codeph">storage_clause</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e470 d31062e371 ">
                                       <p><a id="d31062e476" class="indexterm-anchor"></a><a id="d31062e480" class="indexterm-anchor"></a>此可选参数指定队列表的表空间。有关更多信息，请参见<span class="q">“ <a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDFEICD">存储子句</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e492" headers="d31062e368 ">
                                       <p><code class="codeph">sort_list</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e492 d31062e371 ">
                                       <p><a id="d31062e498" class="indexterm-anchor"></a><a id="d31062e502" class="indexterm-anchor"></a>此可选参数指定要按升序用作排序键的一列或两列。它的格式为<span class="italic"><code class="codeph">sort_column1,sort_column2</code></span> 。有关详细信息，请参阅<span class="q">“ <a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDFDHBE">排序键</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e518" headers="d31062e368 ">
                                       <p><code class="codeph">multiple_consumers</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e518 d31062e371 ">
                                       <p><a id="d31062e524" class="indexterm-anchor"></a><a id="d31062e528" class="indexterm-anchor"></a>此可选参数将队列表指定为单个使用者或多个消费者。默认<code class="codeph">FALSE</code>表示在表中创建的队列每个消息只能有一个使用者。<code class="codeph">TRUE</code>表示在表中创建的队列可以为每条消息创建多个使用者。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e542" headers="d31062e368 ">
                                       <p><code class="codeph">message_grouping</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e542 d31062e371 ">
                                       <p><a id="d31062e548" class="indexterm-anchor"></a><a id="d31062e552" class="indexterm-anchor"></a>此可选参数指定是否对邮件进行分组。默认值<code class="codeph">NONE</code>表示单独处理每条消息。<code class="codeph">TRANSACTIONAL</code>意味着在一个事务中排队的所有消息都被视为同一组的一部分，并且可以作为一组相关消息出列。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e566" headers="d31062e368 ">
                                       <p><code class="codeph">评论</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e566 d31062e371 ">
                                       <p><a id="d31062e572" class="indexterm-anchor"></a><a id="d31062e576" class="indexterm-anchor"></a>此可选参数是用户指定的队列表描述。此用户注释将添加到队列目录中。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e584" headers="d31062e368 ">
                                       <p><code class="codeph">AUTO_COMMIT</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e584 d31062e371 ">
                                       <p><code class="codeph">TRUE</code>导致在执行<code class="codeph">CREATE_QUEUE_TABLE</code>操作之前提交当前事务（如果有）。当调用返回时， <code class="codeph">CREATE_QUEUE_TABLE</code>操作将变为持久性。这是默认值。<code class="codeph">FALSE</code>表示操作是当前事务的一部分，仅在调用者进入提交时才变为持久化。
                                       </p>
                                       <p>注意：不推荐使用此参数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e605" headers="d31062e368 ">
                                       <p><code class="codeph">primary_instance</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e605 d31062e371 ">
                                       <p><a id="d31062e611" class="indexterm-anchor"></a><a id="d31062e615" class="indexterm-anchor"></a>此可选参数指定队列表的主要所有者。在此实例中完成队列表中队列的队列监视器调度和传播。默认值<code class="codeph">0</code>表示队列监视器调度和传播在任何可用实例中完成。
                                       </p>
                                       <p>仅当<code class="codeph">compatible</code>为<code class="codeph">8.1</code>或更高版本时，才能指定和修改此参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e634" headers="d31062e368 ">
                                       <p><code class="codeph">secondary_instance</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e634 d31062e371 ">
                                       <p><a id="d31062e640" class="indexterm-anchor"></a><a id="d31062e644" class="indexterm-anchor"></a>如果主实例不可用，则此可选参数指定队列表的所有者。默认值<code class="codeph">0</code>表示队列表将故障转移到任何可用实例。
                                       </p>
                                       <p>仅当还指定了<code class="codeph">primary_instance</code>且<code class="codeph">compatible</code>为<code class="codeph">8.1</code>或更高版本时，才能指定和修改此参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e666" headers="d31062e368 ">
                                       <p><code class="codeph">兼容</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e666 d31062e371 ">
                                       <p><a id="d31062e672" class="indexterm-anchor"></a><a id="d31062e676" class="indexterm-anchor"></a>此可选参数指定与队列表兼容的最低数据库版本。可能的值是<code class="codeph">8.0</code> ， <code class="codeph">8.1</code> ，和<code class="codeph">10.0</code> 。如果数据库处于10.1兼容模式，则默认值为<code class="codeph">10.0</code> 。如果数据库处于8.1兼容模式或9.2兼容模式，则默认值为<code class="codeph">8.1</code> 。如果数据库处于8.0兼容模式，则默认值为<code class="codeph">8.0</code> 。在Oracle数据库高级队列<span class="italic">10g</span>第2版（10.2）中不推荐使用<code class="codeph">8.0</code>值。
                                       </p>
                                       <p>有关兼容性的更多信息，请参阅<span class="q">“ <a href="managing-aq.html#GUID-D31E2B70-F6A4-4E3D-8F49-E6BF393D1448" title="必须在兼容性设置为8.1或更高的情况下创建存储缓冲消息的队列。">Oracle数据库高级排队兼容性参数</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e720" headers="d31062e368 ">
                                       <p><code class="codeph">安全</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e720 d31062e371 ">
                                       <p><a id="d31062e726" class="indexterm-anchor"></a><a id="d31062e730" class="indexterm-anchor"></a><a id="d31062e734" class="indexterm-anchor"></a><a id="d31062e740" class="indexterm-anchor"></a>如果要将队列表用于安全队列，则必须将此可选参数设置为<code class="codeph">TRUE</code> 。安全队列是AQ代理必须与一个或多个可以执行队列操作的数据库用户明确关联的队列，例如enqueue和dequeue。安全队列的所有者可以对队列执行所有队列操作，但除非将其配置为安全队列用户，否则其他用户无法执行</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d31062e751" headers="d31062e368 ">
                                       <p><code class="codeph">replication_mode</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d31062e751 d31062e371 ">
                                       <p>保留供将来使用。<code class="codeph">DBMS_AQADM.REPLICATION_MODE</code>如果在复制模式，否则创建队列<code class="codeph">DBMS_AQADM.NONE</code> 。默认值为<code class="codeph">DBMS_AQADM.NONE</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDHFDJG">
                        <p class="subhead3" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-35C8BB2A-14F7-4A1A-B897-3ED6EE474892">有效载荷类型</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要将有效内容类型指定为对象类型，必须定义对象类型。</p>
                        <div class="infoboxnote" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-2D171E9D-A21B-4186-A796-1D9846225E53">
                           <p class="notep1">注意：</p>
                           <p>如果已在对象类型上创建了同义词，则无法在<code class="codeph">DBMS_AQADM.CREATE_QUEUE_TABLE</code>使用它们。错误ORA-24015结果。
                           </p>
                        </div>
                        <p><a href="glossary.html#GUID-6A19CAEE-F2E5-435D-B582-2ECB47FD4D06"><span class="xrefglossterm">CLOB</span></a> ， <a href="glossary.html#GUID-A62D4CF7-C903-40B3-89DC-0D6E4233D7C9"><span class="xrefglossterm">BLOB</span></a>和<a href="glossary.html#GUID-A8B4B248-A9A3-462C-A52B-517BCFAEE0ED"><span class="xrefglossterm">BFILE</span></a>对象在Oracle Database Advanced Queuing <a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">消息</span></a>中有效。自Oracle8 <span class="italic">i</span>发布8.1.x以来，您可以使用Oracle软件使用Oracle数据库高级队列<a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">传播</span></a>来传播这些对象类型。要使具有<a href="glossary.html#GUID-E0E22C6A-42AE-41CF-A021-5CB63BABB48E"><span class="xrefglossterm">LOB</span></a>的<a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">对象类型入</span></a> <a href="glossary.html#GUID-B21E60F7-4BFA-42A2-9A8F-B781C2A55ED9"><span class="xrefglossterm">队</span></a> ，必须首先将<code class="codeph">LOB_attribute</code>设置为<code class="codeph">EMPTY_BLOB</code> （）并执行入队。然后，您可以选择从队列表的视图生成的<code class="codeph">LOB</code>定位器，并使用标准<code class="codeph">LOB</code>操作。
                        </p>
                        <div class="infoboxnote" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-A4CF9D8F-31DE-4C25-BB1C-3CFFEDCB77E3">
                           <p class="notep1">注意：</p>
                           <p>包含LOB的有效负载要求用户在队列表上授予显式的“ <code class="codeph">Select</code> ，“ <code class="codeph">Insert</code>和“ <code class="codeph">Update</code>权限，以进行排队和出列。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDFEICD">
                        <p class="subhead3" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-1535A5B6-8372-4611-947F-2A9A5BD77C9C">存储条款</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">storage_clause</code>参数可以采用可在标准<code class="codeph">CREATE TABLE</code> <code class="codeph">storage_clause</code>参数中使用的任何文本。
                        </p>
                        <p>选择表空间后，为该队列表创建的任何<a href="glossary.html#GUID-3F72FEC8-8EA0-4762-8383-D99020876B61"><span class="xrefglossterm">索引组织表</span></a> （IOT）或索引都将转到指定的表空间。您目前无法选择在不同的表空间之间拆分它们。
                        </p>
                        <div class="infoboxnote" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-B9C755A0-DB6E-42D3-9DEB-8010A9073CCE">
                           <p class="notep1">注意：</p>
                           <p>11g第2版（11.2）中的qmon进程执行出队IOT，历史IOT和时间管理器IOT的自动合并。不需要手动合并AQ物联网。但是，如果观察到性能下降，则可以将其作为解决方法来执行。</p>
                           <p>如果选择在本地管理的表空间中创建队列表，或者选择freelist组&gt; 1，则队列监视器协调器将跳过这些块的清理。这可能会导致性能随时间下降。</p>
                           <p>通过运行合并出列物联网</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE AQ $ _ <span class="italic">queue_table</span> _I COALESCE;</pre><p>您可以在队列的并发队列和队列队列中运行此命令，但这些并发用户在命令运行时可能会看到性能略有下降。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDFDHBE">
                        <p class="subhead3" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-78B85602-15FA-42E4-BFAB-E81337DF1C23">排序键</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>sort_list参数确定消息出列的顺序。创建队列表后，无法更改消息排序顺序。你的选择是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ENQ_TIME</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ENQ_TIME，优先</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">优先</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">优先级，ENQ_TIME</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">优先级，COMMIT_TIME</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">COMMIT_TIME</code></p>
                           </li>
                        </ul>
                        <p>如果指定了<code class="codeph">COMMIT_TIME</code> ，则使用队列表的任何队列都是<a href="glossary.html#GUID-F4FC927D-BBFE-451D-9CCA-96C7387A39B0"><span class="xrefglossterm">提交时队列</span></a> ，Oracle数据库高级队列在其事务提交时计算每个排队消息的<a href="glossary.html#GUID-30A3A407-F784-4083-9041-D548D9E1C6C5"><span class="xrefglossterm">近似CSCN</span></a> 。
                        </p>
                        <p><a id="d31062e921" class="indexterm-anchor"></a>如果指定<code class="codeph">COMMIT_TIME</code>作为排序键，则还必须指定以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">multiple_consumers</code> = <code class="codeph">TRUE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">message_grouping</code> = <code class="codeph">TRANSACTIONAL</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">compatible</code> = <code class="codeph">8.1</code>或更高</p>
                           </li>
                        </ul>
                        <p>当事务相互依赖或浏览队列中的消息必须产生一致的结果时，提交时排序很有用。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDBDFAJ">
                        <p class="subhead3" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-037F6AD9-546A-4B89-8493-849B4908F6DD">其他表和视图</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在创建表时创建以下对象：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">AQ$</code> <span class="italic"><code class="codeph">_queue_table_name</code></span> ，Oracle数据库高级排队应用程序用于查询<a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">队列</span></a>数据的只读视图</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table_name</code></span> <code class="codeph">_E</code> ，与队列表关联的默认<a href="glossary.html#GUID-38CB652B-C8D2-49F4-92FD-926EB001284F"><span class="xrefglossterm">异常队列</span></a></p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table_name</code></span> <code class="codeph">_I</code> ，用于出列操作的多个<a href="glossary.html#GUID-B9071BDE-395F-4686-B2D2-A1B83F986BCC"><span class="xrefglossterm">使用者</span></a>队列的索引或<a href="glossary.html#GUID-3F72FEC8-8EA0-4762-8383-D99020876B61"><span class="xrefglossterm">索引组织表</span></a> （IOT）</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table_name</code></span> <code class="codeph">_T</code> ，队列监视器操作的索引</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table_name</code></span> <code class="codeph">_L</code> ，出列日志表，用于存储队列中已提交的出列操作的消息标识符</p>
                           </li>
                        </ul>
                        <p>仅为8.1兼容的多消息队列表创建以下对象：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table_name</code></span> <code class="codeph">_S</code> ，用于存储订户信息的表</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table_name</code></span> <code class="codeph">_H</code> ，用于存储出队历史数据的索引组织表（IOT）</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-332C73E1-4EE6-44D9-BE87-7425ACA5068E">
                           <p class="notep1">注意：</p>
                           <p>Oracle数据库高级队列不支持在这些内部AQ队列表上使用触发器。</p>
                        </div>
                        <p>如果未指定架构，则默认为用户的架构。</p>
                        <p>如果在创建队列表时<code class="codeph">GLOBAL_TOPIC_ENABLED</code> <code class="codeph">=</code> <code class="codeph">TRUE</code> ，则还会创建相应的<a href="glossary.html#GUID-6BF3485C-E98F-4344-A7DE-64950BCCE160"><span class="xrefglossterm">轻量级目录访问协议</span></a> （LDAP）条目。
                        </p>
                        <p><a id="d31062e1069" class="indexterm-anchor"></a><a id="d31062e1071" class="indexterm-anchor"></a><a id="d31062e1075" class="indexterm-anchor"></a><a id="d31062e1077" class="indexterm-anchor"></a>如果队列类型为<code class="codeph">ANYDATA</code> ，则创建<a href="glossary.html#GUID-4FE49D89-66C7-46AB-8628-23A241EB1DA4"><span class="xrefglossterm">缓冲队列</span></a>和另外两个对象。缓冲队列存储捕获进程创建的逻辑更改记录。逻辑更改记录在与队列关联的内存缓冲区中暂存;它们通常不会写入磁盘。
                        </p>
                        <p>如果它们已经在缓冲区中暂存了一段时间而没有出列，或者如果内存中没有足够的空间来容纳所有捕获的事件，那么它们将被泄漏到：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table_name</code></span> <code class="codeph">_P</code> ，用于存储从内存溢出的捕获事件的表</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table_name</code></span> <code class="codeph">_D</code> ，一个表，用于存储有关传播的信息并应用有资格处理每个事件的进程</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-84A41704-2E74-49D1-9630-551FB1045120">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="aq-introduction.html#GUID-AA8621D3-88E6-460A-8EC4-8EE6F53DE56A__CHDCEDDG">出局模式</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../adlob/introduction-to-large-objects.html#ADLOB001" target="_blank"><span class="italic">Oracle Database SecureFiles和大对象开发人员指南</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-BE8383B2-FB82-459F-9B5C-8B3D908C9F2D">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例假定您处于SQL * Plus测试环境中。在<a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDECGGJ">示例8-1中</a> ，您将创建用户以准备本章中的其他示例。对于此示例，您必须以具有管理权限的用户身份进行连接。对于本章中的大多数其他示例，您可以以用户<code class="codeph">test_adm</code>进行连接。必须在<code class="codeph">DBMS_AQADM</code>上使用<code class="codeph">EXECUTE</code>特权运行一些示例作为<code class="codeph">test</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDECGGJ">
                        <p class="titleinexample">例8-1设置AQ管理用户</p><pre class="oac_no_warn" dir="ltr">CREATE USER test_adm IDENTIFIED BY test_adm DEFAULT TABLESPACE示例; GRANT DBA，为test_adm创建任何类型;在DBMS_AQADM上执行GRANT EXECUTE到test_adm; GRANT aq_administrator_role TO test_adm; BEGIN DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE（privilege =&gt;'MANAGE_ANY'，grantee =&gt;'test_adm'，admin_option =&gt; FALSE）;结束; / CREATE USER测试IDENTIFIED BY test; GRANT EXECUTE ON dbms_aq TO test;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDJIFCF">
                        <p class="titleinexample">示例8-2设置AQ管理示例类型</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE test.message_typ AS对象（sender_id NUMBER，subject VARCHAR2（30），text VARCHAR2（1000））; / CREATE TYPE test.msg_table AS TABLE OF test.message_typ; / CREATE TYPE test.order_typ AS对象（custno NUMBER，item VARCHAR2（30），description VARCHAR2（1000））; / CREATE TYPE test.lob_typ AS对象（id NUMBER，subject VARCHAR2（100），data BLOB，trailer NUMBER）; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDCBGCF">
                        <p class="titleinexample">示例8-3为对象类型的消息创建队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.obj_qtab'，queue_payload_type =&gt;'test.message_typ'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-0D5B8E62-2BF5-4C90-9A70-97BFEBDAD11F">
                        <p class="titleinexample">示例8-4为RAW类型的消息创建队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.raw_qtab'，queue_payload_type =&gt;'RAW'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDBEADD">
                        <p class="titleinexample">示例8-5为LOB类型的消息创建队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.lob_qtab'，queue_payload_type =&gt;'test.lob_typ'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-1E5E855E-F3BA-4508-9F8A-7DB5A6CB19D7">
                        <p class="titleinexample">示例8-6为XMLType消息创建队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.xml_qtab'，queue_payload_type =&gt;'SYS.XMLType'，multiple_consumers =&gt; TRUE，compatible =&gt;'8.1'，comment =&gt;'Overseas Shipping multiconsumer orders queue table'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDEAEID">
                        <p class="titleinexample">示例8-7为分组消息创建队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.group_qtab'，queue_payload_type =&gt;'test.message_typ'，message_grouping =&gt; DBMS_AQADM.TRANSACTIONAL）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDFEDEC">
                        <p class="titleinexample">示例8-8为优先级消息和多个使用者创建队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.priority_qtab'，queue_payload_type =&gt;'test.order_typ'，sort_list =&gt;'PRIORITY，ENQ_TIME'，multiple_consumers =&gt; TRUE）; DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.multiconsumer_qtab'，queue_payload_type =&gt;'test.message_typ'，sort_list =&gt;'PRIORITY，ENQ_TIME'，multiple_consumers =&gt; TRUE）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-0AA59776-8332-487B-9BFD-E40183512191">
                        <p class="titleinexample">示例8-9使用提交时排序创建队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.commit_time_qtab'，queue_payload_type =&gt;'test.message_typ'，sort_list =&gt;'COMMIT_TIME'，multiple_consumers =&gt; TRUE，message_grouping =&gt; DBMS_AQADM.TRANSACTIONAL，compatible =&gt; '10 .0'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-4D094470-F5D0-4FEF-BF54-F21059092133">
                        <p class="titleinexample">示例8-10为多个使用者创建8.1兼容的队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.multiconsumer_81_qtab'，queue_payload_type =&gt;'test.message_typ'，multiple_consumers =&gt; TRUE，compatible =&gt;'8.1'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__GUID-AA1607E0-B16B-4C47-8D8E-43F648183025">
                        <p class="titleinexample">示例8-11在指定的表空间中创建队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.example_qtab'，queue_payload_type =&gt;'test.message_typ'，storage_clause =&gt;'tablespace example'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDJIEHH">
                        <p class="titleinexample">示例8-12使用空闲列表或空闲列表组创建队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE_TABLE（queue_table =&gt;'test.freelist_qtab'，queue_payload_type =&gt;'RAW'，storage_clause =&gt;'STORAGE（FREELISTS 4 FREELIST GROUPS 2）'，compatible =&gt;'8.1'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2675"></a><a id="ADQUE2676"></a><a id="ADQUE0802"></a><div class="props_rev_3"><a id="GUID-13FB1BCB-5D5A-410A-AD46-B5F58F50B32C" name="GUID-13FB1BCB-5D5A-410A-AD46-B5F58F50B32C"></a><h4 id="ADQUE-GUID-13FB1BCB-5D5A-410A-AD46-B5F58F50B32C" class="sect4"><span class="enumeration_section">8.1.2</span>更改队列表</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.ALTER_QUEUE_TABLE</code>更改<code class="codeph">DBMS_AQADM.ALTER_QUEUE_TABLE</code>队列表的现有属性。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.ALTER_QUEUE_TABLE（queue_table IN VARCHAR2，comment IN VARCHAR2 DEFAULT NULL，primary_instance IN BINARY_INTEGER DEFAULT NULL，secondary_instance IN BINARY_INTEGER DEFAULT NULL replication_mode IN BINARY_INTEGER DEFAULT NULL）;</pre><div class="tblformal" id="GUID-13FB1BCB-5D5A-410A-AD46-B5F58F50B32C__GUID-0F9ACBAA-2C45-4DCE-8F88-0EF2533294FF">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d31062e1280">参数</th>
                                    <th align="left" valign="bottom" width="72%" id="d31062e1283">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d31062e1288" headers="d31062e1280 ">
                                       <p><code class="codeph">queue_table</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d31062e1288 d31062e1283 ">
                                       <p>此必需参数指定队列表名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d31062e1296" headers="d31062e1280 ">
                                       <p><code class="codeph">评论</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d31062e1296 d31062e1283 ">
                                       <p>此可选参数是用户指定的队列表描述。此用户注释将添加到队列目录中。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d31062e1304" headers="d31062e1280 ">
                                       <p><code class="codeph">primary_instance</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d31062e1304 d31062e1283 ">
                                       <p>此可选参数指定队列表的主要所有者。在此实例中完成队列表中队列的队列监视器调度和传播。</p>
                                       <p>仅当<code class="codeph">compatible</code>为<code class="codeph">8.1</code>或更高版本时，才能指定和修改此参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d31062e1320" headers="d31062e1280 ">
                                       <p><code class="codeph">secondary_instance</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d31062e1320 d31062e1283 ">
                                       <p>如果主实例不可用，则此可选参数指定队列表的所有者。</p>
                                       <p>仅当还指定了<code class="codeph">primary_instance</code>且<code class="codeph">compatible</code>为<code class="codeph">8.1</code>或更高版本时，才能指定和修改此参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d31062e1339" headers="d31062e1280 ">
                                       <p><code class="codeph">replication_mode</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d31062e1339 d31062e1283 ">
                                       <p>保留供将来使用。<code class="codeph">DBMS_AQADM.REPLICATION_MODE</code>如果将队列更改为处于复制模式或<code class="codeph">DBMS_AQADM.NONE</code> 。默认值为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-13FB1BCB-5D5A-410A-AD46-B5F58F50B32C__GUID-4B2CC8E3-CAB7-4859-BDD2-F3860A3B2030">
                           <p class="notep1">注意：</p>
                           <p>通常，队列表不支持DDL语句，甚至可能使它们无法运行。例如，发出<code class="codeph">ALTER TABLE</code> ...针对队列表的<code class="codeph">SHRINK</code>语句导致内部错误，并且所有后续使用队列表的尝试也将导致错误。Oracle建议您不要在队列表上使用DDL语句。
                           </p>
                        </div>
                        <p>如果在修改队列表时<code class="codeph">GLOBAL_TOPIC_ENABLED = TRUE</code> ，则还会更改相应的LDAP条目。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-13FB1BCB-5D5A-410A-AD46-B5F58F50B32C__GUID-E790A3DE-E8A5-4A39-8EBE-D0A434653D96">
                        <p class="titleinexample">示例8-13通过更改主实例和辅助实例来更改队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.ALTER_QUEUE_TABLE（queue_table =&gt;'test.obj_qtab'，primary_instance =&gt; 3，secondary_instance =&gt; 2）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-13FB1BCB-5D5A-410A-AD46-B5F58F50B32C__GUID-0B0439F5-5234-40E2-8626-5730F55EB25B">
                        <p class="titleinexample">示例8-14通过更改注释更改队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.ALTER_QUEUE_TABLE（queue_table =&gt;'test.obj_qtab'，comment =&gt;'队列表的修订用法'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2678"></a><a id="ADQUE2679"></a><a id="ADQUE2677"></a><div class="props_rev_3"><a id="GUID-3CCA227A-F777-4EF5-8556-44DC599674AA" name="GUID-3CCA227A-F777-4EF5-8556-44DC599674AA"></a><h4 id="ADQUE-GUID-3CCA227A-F777-4EF5-8556-44DC599674AA" class="sect4"><span class="enumeration_section">8.1.3</span>删除队列表</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.DROP_QUEUE_TABLE</code>删除现有的<code class="codeph">DBMS_AQADM.DROP_QUEUE_TABLE</code>队列表。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.DROP_QUEUE_TABLE（queue_table IN VARCHAR2，强制输入BOOLEAN DEFAULT FALSE，</pre><p>必须先停止并删除队列表中的所有队列，然后才能删除队列表。如果<code class="codeph">force</code>设置为<code class="codeph">FALSE</code>则必须显式执行此操作。如果<code class="codeph">force</code>设置为<code class="codeph">TRUE</code> ，则会自动删除队列表中的所有队列及其关联的传播计划。
                        </p>
                        <p>如果<code class="codeph">GLOBAL_TOPIC_ENABLED = TRUE</code>队列表时<code class="codeph">GLOBAL_TOPIC_ENABLED = TRUE</code> ，则还会删除相应的LDAP条目。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3CCA227A-F777-4EF5-8556-44DC599674AA__GUID-EAF5D8FB-438F-47A7-8B03-B29D68B22BB3">
                        <p class="titleinexample">示例8-15删除队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.DROP_QUEUE_TABLE（queue_table =&gt;'test.obj_qtab'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3CCA227A-F777-4EF5-8556-44DC599674AA__GUID-1A534005-FA16-44D5-8F32-06FEC52E5C90">
                        <p class="titleinexample">示例8-16使用force Option删除队列表</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.DROP_QUEUE_TABLE（queue_table =&gt;'test.raw_qtab'，force =&gt; TRUE）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2680"></a><a id="ADQUE2681"></a><a id="ADQUE2682"></a><a id="ADQUE2683"></a><a id="ADQUE2684"></a><a id="ADQUE0812"></a><div class="props_rev_3"><a id="GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79" name="GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79"></a><h4 id="ADQUE-GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79" class="sect4"><span class="enumeration_section">8.1.4</span>清除队列表</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.PURGE_QUEUE_TABLE</code>清除来自<code class="codeph">DBMS_AQADM.PURGE_QUEUE_TABLE</code>队列表的消息。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.PURGE_QUEUE_TABLE（queue_table IN VARCHAR2，purge_condition IN VARCHAR2，purge_options IN aq $ _purge_options_t）;</pre><p>它具有以下参数：</p>
                        <div class="tblformal" id="GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79__GUID-7EA55FBF-7495-4C9D-B678-4574B337F5FA">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d31062e1553">参数</th>
                                    <th align="left" valign="bottom" width="72%" id="d31062e1556">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d31062e1561" headers="d31062e1553 ">
                                       <p><code class="codeph">queue_table</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d31062e1561 d31062e1556 ">
                                       <p>此必需参数指定队列表名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d31062e1569" headers="d31062e1553 ">
                                       <p><code class="codeph">purge_condition</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d31062e1569 d31062e1556 ">
                                       <p><a id="d31062e1575" class="indexterm-anchor"></a>清除条件必须采用SQL <code class="codeph">WHERE</code>子句的格式，并且区分大小写。该条件基于<code class="codeph">aq$</code> <span class="italic"><code class="codeph">queue_table_name</code></span>视图的列。清除条件中的每个列名称都必须以“ <code class="codeph">qtview.</code> ”为前缀<code class="codeph">qtview.</code></p>
                                       <p>缓冲消息也支持持久性消息支持的所有清除条件。</p>
                                       <p>要清除队列表中的所有队列，请将<code class="codeph">purge_condition</code>设置为<code class="codeph">NULL</code> （裸空字，无引号）或<code class="codeph">''</code> （两个单引号）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d31062e1606" headers="d31062e1553 ">
                                       <p><code class="codeph">purge_options</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d31062e1606 d31062e1556 ">
                                       <p><a id="d31062e1612" class="indexterm-anchor"></a><a id="d31062e1616" class="indexterm-anchor"></a>类型<code class="codeph">aq$_purge_options_t</code>包含<code class="codeph">block</code>参数。如果<code class="codeph">block</code>为<code class="codeph">TRUE</code> ，则在清除队列表时保留队列表中所有队列的独占锁。这将导致队列表被清除时并发的入队者和出队者被阻塞。如果<code class="codeph">block</code>为<code class="codeph">TRUE</code>则清除调用始终成功。 <code class="codeph">block</code>的默认值为<code class="codeph">FALSE</code> 。这不会阻止enqueuers和dequeuers，但它可能导致清除失败，并在高并发时间内出错。
                                       </p>
                                       <p>类型<code class="codeph">aq$_purge_options_t</code>还包含<code class="codeph">delivery_mode</code>参数。如果它是默认的<code class="codeph">PERSISTENT</code> ，则仅清除持久性消息。如果将其设置为<code class="codeph">BUFFERED</code> ，则仅清除缓冲的消息。如果将其设置为<code class="codeph">PERSISTENT_OR_BUFFERED</code> ，则会清除这两种类型。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>运行此过程时，将在udump目标中生成跟踪文件。它详细说明了该过程正在做什么。该过程在处理完所有消息后提交。</p>
                        <div class="infoboxnotealso" id="GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79__GUID-0AB4EE0F-1619-4E55-9690-7775143281E4">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">DBMS_AQADM.PURGE_QUEUE_TABLE</code>更多信息，请<code class="codeph">DBMS_AQADM.PURGE_QUEUE_TABLE</code> <a href="../arpls/DBMS_AQADM.html#ARPLS005" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考中的</span></a> “DBMS_AQADM”</p>
                        </div>
                        <div class="infoboxnote" id="GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79__GUID-CD1DE3E4-8958-443D-83BF-4D49656FD0C0">
                           <p class="notep1">注意：</p>
                           <p>一些清洗条件，如<code class="codeph">consumer_name</code>在<a href="aq-administrative-interface.html#GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79__CHDJJABB">实施例8-20</a>和<code class="codeph">sender_name</code>在<a href="aq-administrative-interface.html#GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79__CHDCAIGE">实施例8-21</a> ，在8.1兼容的队列表仅支持。有关更多信息，请参阅<a href="aq-messaging-gateway-views.html#GUID-78CC1D99-D2DD-4B80-BC38-4BBF39E05EFA__G1009814" title="该表描述了视图的内容。第一列是视图列的名称。第二列是该视图列的数据类型。第三列指示是否不允许空值。第四列提供了视图列的简要说明。">表9-1</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79__GUID-181A7246-701D-4D5C-BC7F-5F472CF1A2AB">
                        <p class="titleinexample">示例8-17清除队列表中的所有消息</p><pre class="oac_no_warn" dir="ltr">DECLARE po dbms_aqadm.aq $ _purge_options_t;开始po.block：= FALSE; DBMS_AQADM.PURGE_QUEUE_TABLE（queue_table =&gt;'test.obj_qtab'，purge_condition =&gt; NULL，purge_options =&gt; po）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79__GUID-A27C6159-D9AB-470A-A0CB-D409355FE4B4">
                        <p class="titleinexample">示例8-18清除命名队列中的所有消息</p><pre class="oac_no_warn" dir="ltr">DECLARE po dbms_aqadm.aq $ _purge_options_t; BEGIN po.block：= TRUE; DBMS_AQADM.PURGE_QUEUE_TABLE（queue_table =&gt;'test.obj_qtab'，purge_condition =&gt;'qtview.queue =''TEST.OBJ_QUEUE'''，purge_options =&gt; po）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79__GUID-85B75C31-2B49-4E40-9775-A9F85B6C5159">
                        <p class="titleinexample">示例8-19清除命名队列中的所有PROCESSED消息</p><pre class="oac_no_warn" dir="ltr">DECLARE po dbms_aqadm.aq $ _purge_options_t; BEGIN po.block：= TRUE; DBMS_AQADM.PURGE_QUEUE_TABLE（queue_table =&gt;'test.obj_qtab'，purge_condition =&gt;'qtview.queue =''TEST.OBJ_QUEUE''和qtview.msg_state =''PROCESSED'''，purge_options =&gt; po）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79__CHDJJABB">
                        <p class="titleinexample">示例8-20清除命名队列中的所有消息以及命名消费者</p><pre class="oac_no_warn" dir="ltr">DECLARE po dbms_aqadm.aq $ _purge_options_t; BEGIN po.block：= TRUE; DBMS_AQADM.PURGE_QUEUE_TABLE（queue_table =&gt;'test.multiconsumer_81_qtab'，purge_condition =&gt;'qtview.queue =''TEST.MULTICONSUMER_81_QUEUE''和qtview.consumer_name =''PAYROLL_APP'''，purge_options =&gt; po）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B76DDA4D-550F-4847-A042-73FCE1C74C79__CHDCAIGE">
                        <p class="titleinexample">示例8-21清除命名发件人的所有邮件</p><pre class="oac_no_warn" dir="ltr">DECLARE po dbms_aqadm.aq $ _purge_options_t; BEGIN po.block：= TRUE; DBMS_AQADM.PURGE_QUEUE_TABLE（queue_table =&gt;'test.multiconsumer_81_qtab'，purge_condition =&gt;'qtview.sender_name =''TEST.OBJ_QUEUE'''，purge_options =&gt; po）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2686"></a><a id="ADQUE2685"></a><div class="props_rev_3"><a id="GUID-98C3CCDA-7852-4F0D-8FDF-12E4DC9DB983" name="GUID-98C3CCDA-7852-4F0D-8FDF-12E4DC9DB983"></a><h4 id="ADQUE-GUID-98C3CCDA-7852-4F0D-8FDF-12E4DC9DB983" class="sect4"><span class="enumeration_section">8.1.5</span>迁移队列表</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.MIGRATE_QUEUE_TABLE</code>将<code class="codeph">DBMS_AQADM.MIGRATE_QUEUE_TABLE</code>队列表从<code class="codeph">DBMS_AQADM.MIGRATE_QUEUE_TABLE</code>或10.0迁移到<code class="codeph">DBMS_AQADM.MIGRATE_QUEUE_TABLE</code>或10.0。只有队列表的所有者才能迁移它。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.MIGRATE_QUEUE_TABLE（queue_table IN VARCHAR2，兼容IN VARCHAR2）;</pre><div class="infoboxnote" id="GUID-98C3CCDA-7852-4F0D-8FDF-12E4DC9DB983__GUID-1BC919D9-B5E0-43E1-AEE9-DCD9E0EA04C4">
                           <p class="notep1">注意：</p>
                           <p>此过程要求将<code class="codeph">DBMS_AQADM</code>的<code class="codeph">EXECUTE</code>特权授予队列表所有者， <code class="codeph">DBMS_AQADM</code>列表所有者可能是普通队列用户。如果您不希望普通队列用户能够创建和删除队列和队列表，添加和删除订户等，那么您必须在迁移完成后立即撤消<code class="codeph">EXECUTE</code>特权。
                           </p>
                        </div>
                        <div class="infoboxnote" id="GUID-98C3CCDA-7852-4F0D-8FDF-12E4DC9DB983__GUID-4DEA5242-0DBF-48E9-9019-4E86986C7B0C">
                           <p class="notep1">注意：</p>
                           <p>在Oracle数据库高级队列<span class="italic">10g</span>第2版（10.2）中不推荐使用<code class="codeph">compatible</code>设置为<code class="codeph">8.0</code>的队列表中创建的队列（在本指南中称为8.0样式的队列）。Oracle建议您创建的任何新队列都是8.1样式或更新，并且您可以在方便的时候迁移现有的8.0样式队列。
                           </p>
                        </div>
                        <p>如果通过从较低版本导入导出转储来创建架构，或者从较低版本升级了Oracle数据库高级队列队列，则尝试使用<code class="codeph">DROP USER CASCADE</code>将其<code class="codeph">DROP USER CASCADE</code>将失败并使用ORA-24005。删除这样的模式：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>事件10851应设置为1级。</span></li>
                        <li><span>从架构中删除<code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">queue_table_name</code></span> <code class="codeph">_NR</code>形式的所有表。</span></li>
                        <li><span>关闭事件10851。</span></li>
                        <li><span>删除架构。</span></li>
                     </ol>
                     <div class="example" id="GUID-98C3CCDA-7852-4F0D-8FDF-12E4DC9DB983__GUID-0E45F6E9-3978-4D4B-BA81-FEE2EE0AB156">
                        <p class="titleinexample">示例8-22将队列表从8.1兼容升级到10.0兼容</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.MIGRATE_QUEUE_TABLE（queue_table =&gt;'test.xml_qtab'，compatible =&gt; '10 .0'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE2687"></a><div class="props_rev_3"><a id="GUID-0FA3BE2C-A988-49ED-B602-948015276F66" name="GUID-0FA3BE2C-A988-49ED-B602-948015276F66"></a><h3 id="ADQUE-GUID-0FA3BE2C-A988-49ED-B602-948015276F66" class="sect3"><span class="enumeration_section">8.2</span>管理非分片队列</h3>
               <div>
                  <p>这些主题描述了如何管理非分片队列。</p>
                  <div class="infoboxnote" id="GUID-0FA3BE2C-A988-49ED-B602-948015276F66__GUID-A858D62B-B5ED-4960-AB09-FE2575272EF6">
                     <p class="notep1">注意：</p>
                     <p>启动和停止分片队列使用与非分片队列相同的API。</p>
                  </div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324" title="DBMS_AQADM.CREATE_QUEUE创建非分片队列。">创建队列</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-5C94D69C-7389-47F7-A927-7AC76D2F0A77" title="DBMS_AQADM.ALTER_QUEUE会更改非分片队列的现有属性。">改变队列</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-8370927B-0D5E-4E75-A2A5-7309BC13219C" title="DBMS_AQADM.START_QUEUE启用指定的非分片队列以进行入队或出列。">启动队列</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-A93E742B-1803-4607-B041-CDA42993373A" title="DBMS_AQADM.STOP_QUEUE禁用指定的非分片队列上的入队列，出队列或两者。">停止队列</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-5048ED3E-4C45-4B1E-AF63-95BFC01C498D" title="此过程将删除现有的非分片队列。除非已调用STOP_QUEUE来禁用队列以进行入队和出列，否则不允许使用DROP_QUEUE。作为删除操作的一部分，将删除所有队列数据。">删除队列</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2688"></a><a id="ADQUE2689"></a><a id="ADQUE2690"></a><a id="ADQUE2691"></a><a id="ADQUE2692"></a><a id="ADQUE2693"></a><a id="ADQUE2694"></a><a id="ADQUE2695"></a><a id="ADQUE0803"></a><div class="props_rev_3"><a id="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324" name="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324"></a><h4 id="ADQUE-GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324" class="sect4"><span class="enumeration_section">8.2.1</span>创建队列</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.CREATE_QUEUE</code>创建<code class="codeph">DBMS_AQADM.CREATE_QUEUE</code>队列。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.CREATE_QUEUE（queue_name IN VARCHAR2，queue_table IN VARCHAR2，queue_type IN BINARY_INTEGER DEFAULT NORMAL_QUEUE，max_retries IN NUMBER DEFAULT NULL，retry_delay IN NUMBER DEFAULT 0，retention_time IN NUMBER DEFAULT 0，dependency_tracking IN BOOLEAN DEFAULT FALSE，comment IN VARCHAR2 DEFAULT NULL，</pre><p>它具有以下参数：</p>
                        <div class="tblformal" id="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__GUID-73CDBB82-ED16-4CE4-9E3E-BC95E0AF287F">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d31062e2040">参数</th>
                                    <th align="left" valign="bottom" width="70%" id="d31062e2043">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d31062e2048" headers="d31062e2040 ">
                                       <p><code class="codeph">queue_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d31062e2048 d31062e2043 ">
                                       <p><a id="d31062e2054" class="indexterm-anchor"></a><a id="d31062e2058" class="indexterm-anchor"></a><a id="d31062e2064" class="indexterm-anchor"></a><a id="d31062e2070" class="indexterm-anchor"></a><a id="d31062e2076" class="indexterm-anchor"></a><a id="d31062e2082" class="indexterm-anchor"></a>此必需参数指定新队列的名称。
                                       </p>
                                       <p>如果数据库兼容性为10.0，则支持混合大小写（大写和小写一起）队列名称，但名称必须用双引号括起来。所以<code class="codeph">abc.efg</code>表示模式是<code class="codeph">ABC</code> ，名称是<code class="codeph">EFG</code> ，但是<code class="codeph">"abc"."efg"</code>表示模式是<code class="codeph">abc</code> ，名称是<code class="codeph">efg</code> 。
                                       </p>
                                       <p>从12 <span class="italic">c</span>版本2（12.2。）开始，用户生成的队列名称的最大长度为122个字节。如果您尝试创建名称较长的队列，则会出现错误ORA-24019。Oracle数据库高级队列生成的队列名称（例如<span class="q">“ <a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDBDFAJ">其他表和视图</a> ”中</span>列出的队列名称）不能超过128个字符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d31062e2120" headers="d31062e2040 ">
                                       <p><code class="codeph">queue_table</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d31062e2120 d31062e2043 ">
                                       <p><a id="d31062e2126" class="indexterm-anchor"></a><a id="d31062e2130" class="indexterm-anchor"></a>此必需参数指定创建队列的队列表。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d31062e2138" headers="d31062e2040 ">
                                       <p><code class="codeph">queue_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d31062e2138 d31062e2043 ">
                                       <p><a id="d31062e2144" class="indexterm-anchor"></a><a id="d31062e2148" class="indexterm-anchor"></a>此参数指定要创建的队列类型。默认的<code class="codeph">NORMAL_QUEUE</code>生成正常队列。<code class="codeph">EXCEPTION_QUEUE</code>生成异常队列。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d31062e2162" headers="d31062e2040 ">
                                       <p><code class="codeph">MAX_RETRIES</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d31062e2162 d31062e2043 ">
                                       <p><a id="d31062e2168" class="indexterm-anchor"></a><a id="d31062e2172" class="indexterm-anchor"></a>此参数限制可以对消息尝试使用<code class="codeph">REMOVE</code>模式出列的次数。<code class="codeph">max_retries</code>的最大值是2 ** 31 -1。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d31062e2186" headers="d31062e2040 ">
                                       <p><code class="codeph">retry_delay</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d31062e2186 d31062e2043 ">
                                       <p><a id="d31062e2192" class="indexterm-anchor"></a><a id="d31062e2196" class="indexterm-anchor"></a>此参数指定在应用程序回滚后计划再次处理此消息的秒数。默认值为0，表示可以尽快重试该消息。如果<code class="codeph">max_retries</code>设置为0，则此参数无效。
                                       </p>
                                       <p>单个使用者队列和8.1样式或更高版本的多消费者队列支持此参数，但不支持8.0风格的多消费者队列，这些队列在Oracle数据库高级队列<span class="italic">10g</span>第2版（10.2）中已弃用。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d31062e2212" headers="d31062e2040 ">
                                       <p><code class="codeph">保留时间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d31062e2212 d31062e2043 ">
                                       <p><a id="d31062e2218" class="indexterm-anchor"></a><a id="d31062e2222" class="indexterm-anchor"></a>此参数指定在从队列中出列后消息在队列表中保留的秒数。当<code class="codeph">retention_time</code>到期时，时间管理器进程将删除消息。<code class="codeph">INFINITE</code>表示邮件永久保留。默认值为0，无保留。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d31062e2236" headers="d31062e2040 ">
                                       <p><code class="codeph">dependency_tracking</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d31062e2236 d31062e2043 ">
                                       <p>此参数保留供将来使用。<code class="codeph">FALSE</code>是默认值。此版本中不允许<code class="codeph">TRUE</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d31062e2250" headers="d31062e2040 ">
                                       <p><code class="codeph">评论</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d31062e2250 d31062e2043 ">
                                       <p><a id="d31062e2256" class="indexterm-anchor"></a><a id="d31062e2260" class="indexterm-anchor"></a>此可选参数是用户指定的队列描述。此用户注释将添加到队列目录中。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>所有队列名称在<a href="glossary.html#GUID-CBE1EC43-DFD2-4701-B758-DCE2C98C277A"><span class="xrefglossterm">架构中</span></a>必须是唯一的。使用<code class="codeph">CREATE_QUEUE</code>创建队列后，可以通过调用<code class="codeph">START_QUEUE</code>来启用它。默认情况下，创建队列时禁用enqueue和dequeue。要查看保留的消息，可以按消息ID出列或使用SQL。如果在创建队列时<code class="codeph">GLOBAL_TOPIC_ENABLED = TRUE</code> ，则还会创建相应的LDAP条目。
                        </p>
                        <p>以下示例（ <a href="aq-administrative-interface.html#GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDEFAFG">示例8-23</a>至<a href="aq-administrative-interface.html#GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDIDCCG">示例8-30</a> ）使用在<a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDECGGJ">示例8-1</a>至<a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDJIEHH">示例8-12中</a>创建的数据结构。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDEFAFG">
                        <p class="titleinexample">示例8-23为对象类型的消息创建队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE（queue_name =&gt;'test.obj_queue'，queue_table =&gt;'test.obj_qtab'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__GUID-3A1EF2C2-5918-4BC1-825C-0E73C608970F">
                        <p class="titleinexample">示例8-24为RAW类型的消息创建队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE（queue_name =&gt;'test.raw_queue'，queue_table =&gt;'test.raw_qtab'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDHEAID">
                        <p class="titleinexample">示例8-25为LOB类型的消息创建队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE（queue_name =&gt;'test.lob_queue'，queue_table =&gt;'test.lob_qtab'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDHEACA">
                        <p class="titleinexample">示例8-26为分组消息创建队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE（queue_name =&gt;'test.group_queue'，queue_table =&gt;'test.group_qtab'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDGCFHI">
                        <p class="titleinexample">示例8-27为优先级消息创建队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE（queue_name =&gt;'test.priority_queue'，queue_table =&gt;'test.priority_qtab'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDIAEEH">
                        <p class="titleinexample">示例8-28为优先级消息和多个使用者创建队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE（queue_name =&gt;'test.multiconsumer_queue'，queue_table =&gt;'test.multiconsumer_qtab'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__GUID-FD73BA65-9E96-46ED-873A-0D4F75260C50">
                        <p class="titleinexample">示例8-29创建队列以演示传播</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE（queue_name =&gt;'test.another_queue'，queue_table =&gt;'test.multiconsumer_qtab'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDIDCCG">
                        <p class="titleinexample">示例8-30为多个使用者创建8.1样式的队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.CREATE_QUEUE（queue_name =&gt;'test.multiconsumer_81_queue'，queue_table =&gt;'test.multiconsumer_81_qtab'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2696"></a><a id="ADQUE0804"></a><div class="props_rev_3"><a id="GUID-5C94D69C-7389-47F7-A927-7AC76D2F0A77" name="GUID-5C94D69C-7389-47F7-A927-7AC76D2F0A77"></a><h4 id="ADQUE-GUID-5C94D69C-7389-47F7-A927-7AC76D2F0A77" class="sect4"><span class="enumeration_section">8.2.2</span>更改队列</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.ALTER_QUEUE</code>会更改<code class="codeph">DBMS_AQADM.ALTER_QUEUE</code>队列的现有属性。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.ALTER_QUEUE（queue_name IN VARCHAR2，max_retries IN NUMBER DEFAULT NULL，retry_delay IN NUMBER DEFAULT NULL，retention_time IN NUMBER DEFAULT NULL，comment IN VARCHAR2 DEFAULT NULL）;</pre><p>只能<code class="codeph">max_retries</code> ， <code class="codeph">comment</code> ， <code class="codeph">retry_delay</code>和<code class="codeph">retention_time</code> 。要查看保留的消息，可以按消息ID出列或使用SQL。如果在修改队列时<code class="codeph">GLOBAL_TOPIC_ENABLED = TRUE</code> ，则还会更改相应的LDAP条目。
                        </p>
                        <p>以下示例更改保留时间，在出列后保存消息1天：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5C94D69C-7389-47F7-A927-7AC76D2F0A77__I1006325">
                        <p class="titleinexample">示例8-31通过更改保留时间来更改队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.ALTER_QUEUE（queue_name =&gt;'test.another_queue'，retention_time =&gt; 86400）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2697"></a><a id="ADQUE2698"></a><a id="ADQUE0805"></a><div class="props_rev_3"><a id="GUID-8370927B-0D5E-4E75-A2A5-7309BC13219C" name="GUID-8370927B-0D5E-4E75-A2A5-7309BC13219C"></a><h4 id="ADQUE-GUID-8370927B-0D5E-4E75-A2A5-7309BC13219C" class="sect4"><span class="enumeration_section">8.2.3</span>启动队列</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.START_QUEUE</code>启用指定的<code class="codeph">DBMS_AQADM.START_QUEUE</code>队列以进行入队或出列。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.START_QUEUE（queue_name IN VARCHAR2，在BOOLEAN DEFAULT TRUE中排队，在BOOLEAN DEFAULT TRUE中出列）;</pre><p>创建队列后，管理员必须使用<code class="codeph">START_QUEUE</code>来启用队列。默认设置是为enqueue和dequeue启用它。仅在异常队列上允许出列操作。此操作在调用完成时生效，并且没有任何<a href="glossary.html#GUID-4956C594-EE49-498B-A9DD-7371518B4EBA"><span class="xrefglossterm">事务</span></a>特征。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8370927B-0D5E-4E75-A2A5-7309BC13219C__GUID-E25B101E-C979-40F7-8BB8-4F6C451BCDAF">
                        <p class="titleinexample">示例8-32启用已启用Enqueue和Dequeue的队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.START_QUEUE（queue_name =&gt;'test.obj_queue'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-8370927B-0D5E-4E75-A2A5-7309BC13219C__GUID-0F4F2EFC-779D-4D8D-997B-849D74E8DFB5">
                        <p class="titleinexample">示例8-33仅为出列队列启动队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.START_QUEUE（queue_name =&gt;'test.raw_queue'，dequeue =&gt; TRUE，enqueue =&gt; FALSE）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2699"></a><a id="ADQUE0806"></a><div class="props_rev_3"><a id="GUID-A93E742B-1803-4607-B041-CDA42993373A" name="GUID-A93E742B-1803-4607-B041-CDA42993373A"></a><h4 id="ADQUE-GUID-A93E742B-1803-4607-B041-CDA42993373A" class="sect4"><span class="enumeration_section">8.2.4</span>停止队列</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.STOP_QUEUE</code>禁用指定的非分片队列上的入队列，出队列或两者。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.STOP_QUEUE（queue_name IN VARCHAR2，enqueue IN BOOLEAN DEFAULT TRUE，dequeue IN BOOLEAN DEFAULT TRUE，wait IN BOOLEAN DEFAULT TRUE）;</pre><p>默认情况下，此调用禁用enqueue和dequeue。如果队列中存在未完成的事务，则无法停止队列。此操作在调用完成时生效，并且没有任何事务特征。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A93E742B-1803-4607-B041-CDA42993373A__GUID-FCA8F7DF-7ADA-479B-B92A-8CEE1573F576">
                        <p class="titleinexample">例8-34停止队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.STOP_QUEUE（queue_name =&gt;'test.obj_queue'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2701"></a><a id="ADQUE2700"></a><div class="props_rev_3"><a id="GUID-5048ED3E-4C45-4B1E-AF63-95BFC01C498D" name="GUID-5048ED3E-4C45-4B1E-AF63-95BFC01C498D"></a><h4 id="ADQUE-GUID-5048ED3E-4C45-4B1E-AF63-95BFC01C498D" class="sect4"><span class="enumeration_section">8.2.5</span>删除队列</h4>
                  <div>
                     <p>此过程将删除现有的非分片队列。<code class="codeph">DROP_QUEUE</code>是不允许的，除非<code class="codeph">STOP_QUEUE</code>被称为禁用两个入队和出队的队列。作为删除操作的一部分，将删除所有队列数据。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.DROP_QUEUE（queue_name IN VARCHAR2，</pre><p> </p>
                        <p>如果<code class="codeph">GLOBAL_TOPIC_ENABLED = TRUE</code>队列时<code class="codeph">GLOBAL_TOPIC_ENABLED = TRUE</code> ，则还会删除相应的LDAP条目。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5048ED3E-4C45-4B1E-AF63-95BFC01C498D__GUID-98632ED6-19C9-4093-8220-803801FE7BB8">
                        <p class="titleinexample">示例8-35删除标准队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.DROP_QUEUE（queue_name =&gt;'test.obj_queue'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-803975AA-F341-4B85-B35B-B2996AB7ABB3" name="GUID-803975AA-F341-4B85-B35B-B2996AB7ABB3"></a><h3 id="ADQUE-GUID-803975AA-F341-4B85-B35B-B2996AB7ABB3" class="sect3"><span class="enumeration_section">8.3</span>管理Sharded队列</h3>
               <div>
                  <p>这些主题描述了如何管理分片队列。</p>
                  <div class="infoboxnote" id="GUID-803975AA-F341-4B85-B35B-B2996AB7ABB3__GUID-C1C31C46-A9D7-4915-824C-0E955B0B9FB3">
                     <p class="notep1">注意：</p>
                     <p>启动和停止分片队列使用与非分片队列相同的API。</p>
                  </div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-8EBB8131-F96D-489F-8670-26FECC1F7CAD">创建Sharded队列</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-536F8941-7433-4EA9-9D33-6E5572EABF67">删除Sharded队列</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-AA6844E7-7338-488C-9C6A-A9318CFC5C0F">更改Sharded队列</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-A08F7B28-93A1-428B-BEED-4AF488BB135C">设置队列参数</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-71B6A7BD-8AD7-4E4E-9591-35666623575A">取消设置队列参数</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-A1B9BDEA-C66C-43CC-888A-22C151BB09EA">获取队列参数</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-8D66CD32-BD67-4EF1-952B-13B44B019CE7">创建例外队列</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-8EBB8131-F96D-489F-8670-26FECC1F7CAD" name="GUID-8EBB8131-F96D-489F-8670-26FECC1F7CAD"></a><h4 id="ADQUE-GUID-8EBB8131-F96D-489F-8670-26FECC1F7CAD" class="sect4"><span class="enumeration_section">8.3.1</span>创建Sharded队列</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">CREATE_SHARDED_QUEUE</code> API创建分片队列。
                        </p><pre class="oac_no_warn" dir="ltr">PROCEDURE CREATE_SHARDED_QUEUE（queue_name IN VARCHAR2，storage_clause IN VARCHAR2 DEFAULT NULL，multiple_consumers IN BOOLEAN DEFAULT FALSE，max_retries IN NUMBER DEFAULT NULL，comment IN VARCHAR2 DEFAULT NULL，queue_payload_type IN VARCHAR2 DEFAULT JMS_TYPE，queue_properties IN QUEUE_PROPS_T DEFAULT NULL，replication_mode IN BINARY_INTEGER DEFAULT NONE）;</pre><p>它具有以下参数：</p>
                        <div class="tblformal" id="GUID-8EBB8131-F96D-489F-8670-26FECC1F7CAD__GUID-EE89678C-C17D-49D3-9D9B-9FE681AD67F6">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" border="1" summary="This table describes the parameters of CREATE_SHARDED_QUEUE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d31062e2847">参数</th>
                                    <th align="left" valign="bottom" width="71%" id="d31062e2850">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d31062e2855" headers="d31062e2847 ">
                                       <p><code class="codeph">queue_name</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d31062e2855 d31062e2850 ">
                                       <p>此必需参数指定新队列的名称。最多允许128个字符。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d31062e2864" headers="d31062e2847 ">
                                       <p><code class="codeph">storage_clause</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d31062e2864 d31062e2850 ">
                                       <p><code class="codeph">CREATE TABLE</code>队列表时，存储参数包含在<code class="codeph">CREATE TABLE</code>语句中。<code class="codeph">storage_clause</code>参数可以采用可在标准<code class="codeph">CREATE TABLE storage_clause</code>参数中使用的任何文本。存储参数可以由以下参数的任意组合组成： <code class="codeph">PCTFREE</code> ， <code class="codeph">PCTUSED</code> ， <code class="codeph">INITRANS</code> ， <code class="codeph">MAXTRANS</code> ， <code class="codeph">TABLESPACE</code> ， <code class="codeph">LOB</code>和表存储子句。
                                       </p>
                                       <p>如果此处未指定表空间，则会在缺省用户表空间中创建队列表及其所有相关对象。如果在此处指定了表空间，则会在storage子句中指定的表空间中创建队列表及其所有相关对象。有关这些参数的用法，请参见<a href="../sqlrf/storage_clause.html#SQLRF52300" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d31062e2908" headers="d31062e2847 ">
                                       <p><code class="codeph">multiple_consumers</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d31062e2908 d31062e2850 ">
                                       <p><code class="codeph">FALSE</code>表示队列每条消息只能有一个消费者。这是默认值。<code class="codeph">TRUE</code>表示在表中创建的队列可以为每条消息创建多个使用者。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d31062e2922" headers="d31062e2847 ">
                                       <p><code class="codeph">MAX_RETRIES</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d31062e2922 d31062e2850 ">
                                       <p>此可选参数限制在失败后可以在消息上重新尝试出列的次数。<code class="codeph">max_retries</code>的最大值是<code class="codeph">2**31 -1</code> 。超过重试限制后，将从队列中清除该消息。当应用程序在执行出队后发出回滚时， <code class="codeph">RETRY_COUNT</code>会递增。如果由于服务器进程在实例上死亡（包括<code class="codeph">ALTER SYSTEM KILL SESSION</code> ）或<code class="codeph">SHUTDOWN ABORT</code>而导致dequeue事务失败，则<code class="codeph">RETRY_COUNT</code>不会递增。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d31062e2950" headers="d31062e2847 ">
                                       <p><code class="codeph">评论</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d31062e2950 d31062e2850 ">
                                       <p>此可选参数是用户指定的队列表描述。此用户注释将添加到队列目录中。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d31062e2959" headers="d31062e2847 ">
                                       <p><code class="codeph">queue_payload_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d31062e2959 d31062e2850 ">
                                       <p>Payload可以是<code class="codeph">RAW</code> ， <code class="codeph">DBMS_AQADM.JMS_TYPE</code>或对象类型。默认值为<code class="codeph">DBMS_AQADM.JMS_TYPE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d31062e2976" headers="d31062e2847 ">
                                       <p><code class="codeph">queue_properties</code></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d31062e2976 d31062e2850 ">
                                       <p>正常或异常队列，重试延迟，保留时间，排序列表和缓存提示等属性。</p>
                                       <p>有关<code class="codeph">queue_properties</code>更多信息，另请参见<a href="../arpls/advanced-queuing-AQ-types.html#ARPLS-GUID-E3F15E41-1365-42C3-8B47-CA3C1E805B77" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d31062e2995" headers="d31062e2847 ">
                                       <p><code class="codeph">replication_mode</code></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d31062e2995 d31062e2850 ">
                                       <p>保留供将来使用。<code class="codeph">DBMS_AQADM.REPLICATION_MODE</code>如果在复制模式，否则创建队列<code class="codeph">DBMS_AQADM.NONE</code> 。默认值为<code class="codeph">DBMS_AQADM.NONE</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-536F8941-7433-4EA9-9D33-6E5572EABF67" name="GUID-536F8941-7433-4EA9-9D33-6E5572EABF67"></a><h4 id="ADQUE-GUID-536F8941-7433-4EA9-9D33-6E5572EABF67" class="sect4"><span class="enumeration_section">8.3.2</span>删除Sharded队列</h4>
                  <div>
                     <div class="section">
                        <p>此过程从数据库排队系统中删除现有的分片队列。您必须在调用<code class="codeph">DROP_SHARDED_QUEUE</code>之前停止队列。如果在调用<code class="codeph">DROP_SHARDED_QUEUE</code>之前将<code class="codeph">DROP_SHARDED_QUEUE</code>设置为<code class="codeph">FALSE</code> ，则用户必须显式停止队列。如果force设置为<code class="codeph">TRUE</code>则队列将在内部停止然后丢弃。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-536F8941-7433-4EA9-9D33-6E5572EABF67__GUID-7D24C0E0-E84D-45AC-AC83-E760778FCC6E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.DROP_SHARDED_QUEUE（queue_name IN VARCHAR2，强制IN BOOLEAN DEFAULT FALSE）</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-536F8941-7433-4EA9-9D33-6E5572EABF67__GUID-CF5559B1-1E24-4833-9A82-B737CED5AA8D">参数</p>
                        <div class="tblformal" id="GUID-536F8941-7433-4EA9-9D33-6E5572EABF67__GUID-83DFA886-91AD-4989-A50E-27023FFB6B67">
                           <p class="titleintable">表8-1 CREATE_SHARDED_QUEUE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_SHARDED_QUEUE过程参数" width="100%" border="1" summary="This table describes the parameters of DBMS_AQADM.CREATE_SHARDED_QUEUE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d31062e3087">参数</th>
                                    <th align="left" valign="bottom" width="71%" id="d31062e3090">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d31062e3095" headers="d31062e3087 ">
                                       <p><code class="codeph">queue_name</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d31062e3095 d31062e3090 ">
                                       <p>此必需参数指定分片队列的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d31062e3104" headers="d31062e3087 ">
                                       <p><code class="codeph">力</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d31062e3104 d31062e3090 ">
                                       <p>即使队列未停止，也会删除分片队列。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-AA6844E7-7338-488C-9C6A-A9318CFC5C0F" name="GUID-AA6844E7-7338-488C-9C6A-A9318CFC5C0F"></a><h4 id="ADQUE-GUID-AA6844E7-7338-488C-9C6A-A9318CFC5C0F" class="sect4"><span class="enumeration_section">8.3.3</span>更改Sharded队列</h4>
                  <div>
                     <div class="section">
                        <p>此过程使用户能够更改分<code class="codeph"><span class="codeinlineitalic">queue_properties</span></code>队列的<code class="codeph"><span class="codeinlineitalic">queue_properties</span></code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AA6844E7-7338-488C-9C6A-A9318CFC5C0F__GUID-783E6ACD-65F2-4E14-8BF5-81C3399A30A8">句法</p><pre class="oac_no_warn" dir="ltr">PROCEDURE ALTER_SHARDED_QUEUE（queue_name IN VARCHAR2，max_retries IN NUMBER DEFAULT NULL，注释IN VARCHAR2 DEFAULT NULL，queue_properties IN QUEUE_PROPS_T DEFAULT NULL，replication_mode IN BINARY_INTEGER DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AA6844E7-7338-488C-9C6A-A9318CFC5C0F__GUID-9F7CA795-5D39-4CF9-9F1B-3A7D63D5EAAA">参数</p>
                        <div class="tblformal" id="GUID-AA6844E7-7338-488C-9C6A-A9318CFC5C0F__GUID-AB9FE6C6-82E5-4593-A2DA-CDA9EA5E2512">
                           <p class="titleintable">表8-2 ALTER_SHARDED_QUEUE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_SHARDED_QUEUE过程参数" width="100%" border="1" summary="This table describes the parameters of DBMS_AQADM.ALTER_SHARDED_QUEUE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d31062e3179">参数</th>
                                    <th align="left" valign="bottom" width="66%" id="d31062e3182">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3187" headers="d31062e3179 ">
                                       <p><code class="codeph">queue_name</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3187 d31062e3182 ">
                                       <p>此参数指定分片队列的名称。最多允许128个字符。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3196" headers="d31062e3179 ">
                                       <p><code class="codeph">MAX_RETRIES</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3196 d31062e3182 ">
                                       <p>允许的最大重试次数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3205" headers="d31062e3179 ">
                                       <p><code class="codeph">评论</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3205 d31062e3182 ">
                                       <p>参数注释。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3214" headers="d31062e3179 ">
                                       <p><code class="codeph">queue_properties</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3214 d31062e3182 ">
                                       <p>正常或异常队列，重试延迟，保留时间，排序列表和缓存提示等属性。</p>
                                       <p>有关<code class="codeph">queue_properties</code>更多信息，另请参见<a href="../arpls/advanced-queuing-AQ-types.html#ARPLS-GUID-E3F15E41-1365-42C3-8B47-CA3C1E805B77" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3233" headers="d31062e3179 ">
                                       <p><code class="codeph">replication_mode</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3233 d31062e3182 ">
                                       <p>保留供将来使用。<code class="codeph">DBMS_AQADM.REPLICATION_MODE</code>如果队列被改变是在复制模式或其他<code class="codeph">DBMS_AQADM.NONE</code> 。默认值为<code class="codeph">NULL</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-A08F7B28-93A1-428B-BEED-4AF488BB135C" name="GUID-A08F7B28-93A1-428B-BEED-4AF488BB135C"></a><h4 id="ADQUE-GUID-A08F7B28-93A1-428B-BEED-4AF488BB135C" class="sect4"><span class="enumeration_section">8.3.4</span>设置队列参数</h4>
                  <div>
                     <div class="section">
                        <p>此过程允许用户在队列或数据库级别为分片队列设置不同的参数。对于数据库级别， <code class="codeph">queue_name</code>应为<code class="codeph">NULL</code> 。请注意，队列会覆盖数据库级参数值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A08F7B28-93A1-428B-BEED-4AF488BB135C__GUID-783E6ACD-65F2-4E14-8BF5-81C3399A30A8">句法</p><pre class="oac_no_warn" dir="ltr">PROCEDURE SET_QUEUE_PARAMETER（queue_name IN VARCHAR2，param_name IN VARCHAR2，param_value IN NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A08F7B28-93A1-428B-BEED-4AF488BB135C__GUID-9F7CA795-5D39-4CF9-9F1B-3A7D63D5EAAA">参数</p>
                        <div class="tblformal" id="GUID-A08F7B28-93A1-428B-BEED-4AF488BB135C__GUID-B87236DB-6D63-4B93-B188-0F8DC2DA8DC8">
                           <p class="titleintable">表8-3 SET_QUEUE_PARAMETER过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_QUEUE_PARAMETER过程参数" width="100%" border="1" summary="This table describes the parameters of SET_QUEUE_PARAMETER." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d31062e3318">参数</th>
                                    <th align="left" valign="bottom" width="66%" id="d31062e3321">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3326" headers="d31062e3318 ">
                                       <p><code class="codeph">queue_name</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3326 d31062e3321 ">
                                       <p>分片队列的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3335" headers="d31062e3318 ">
                                       <p><code class="codeph">PARAM_NAME</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3335 d31062e3321 ">
                                       <p>参数的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3344" headers="d31062e3318 ">
                                       <p><code class="codeph">param_value</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3344 d31062e3321 ">
                                       <p>参数的值。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-71B6A7BD-8AD7-4E4E-9591-35666623575A" name="GUID-71B6A7BD-8AD7-4E4E-9591-35666623575A"></a><h4 id="ADQUE-GUID-71B6A7BD-8AD7-4E4E-9591-35666623575A" class="sect4"><span class="enumeration_section">8.3.5</span>取消设置队列参数</h4>
                  <div>
                     <div class="section">
                        <p>此过程允许用户在队列或数据库级别为分片队列取消设置不同的参数。对于数据库级别， <code class="codeph">queue_name</code>应为<code class="codeph">NULL</code> 。请注意，队列会覆盖数据库级参数值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-71B6A7BD-8AD7-4E4E-9591-35666623575A__GUID-783E6ACD-65F2-4E14-8BF5-81C3399A30A8">句法</p><pre class="oac_no_warn" dir="ltr">PROCEDURE UNSET_QUEUE_PARAMETER（queue_name IN VARCHAR2，param_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-71B6A7BD-8AD7-4E4E-9591-35666623575A__GUID-9F7CA795-5D39-4CF9-9F1B-3A7D63D5EAAA">参数</p>
                        <div class="tblformal" id="GUID-71B6A7BD-8AD7-4E4E-9591-35666623575A__GUID-B87236DB-6D63-4B93-B188-0F8DC2DA8DC8">
                           <p class="titleintable">表8-4 UNSET_QUEUE_PARAMETER过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNSET_QUEUE_PARAMETER过程参数" width="100%" border="1" summary="This table describes the parameters of UNSET_QUEUE_PARAMETER." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d31062e3422">参数</th>
                                    <th align="left" valign="bottom" width="66%" id="d31062e3425">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3430" headers="d31062e3422 ">
                                       <p><code class="codeph">queue_name</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3430 d31062e3425 ">
                                       <p>分片队列的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3439" headers="d31062e3422 ">
                                       <p><code class="codeph">PARAM_NAME</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3439 d31062e3425 ">
                                       <p>参数的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-A1B9BDEA-C66C-43CC-888A-22C151BB09EA" name="GUID-A1B9BDEA-C66C-43CC-888A-22C151BB09EA"></a><h4 id="ADQUE-GUID-A1B9BDEA-C66C-43CC-888A-22C151BB09EA" class="sect4"><span class="enumeration_section">8.3.6</span>获取队列参数</h4>
                  <div>
                     <div class="section">
                        <p>此过程允许用户在队列或数据库级别为分片队列获取不同的参数。对于数据库级别， <code class="codeph">queue_name</code>应为<code class="codeph">NULL</code> 。请注意，队列会覆盖数据库级参数值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A1B9BDEA-C66C-43CC-888A-22C151BB09EA__GUID-783E6ACD-65F2-4E14-8BF5-81C3399A30A8">句法</p><pre class="oac_no_warn" dir="ltr">PROCEDURE GET_QUEUE_PARAMETER（queue_name IN VARCHAR2，param_name IN VARCHAR2，param_value OUT NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A1B9BDEA-C66C-43CC-888A-22C151BB09EA__GUID-9F7CA795-5D39-4CF9-9F1B-3A7D63D5EAAA">参数</p>
                        <div class="tblformal" id="GUID-A1B9BDEA-C66C-43CC-888A-22C151BB09EA__GUID-B87236DB-6D63-4B93-B188-0F8DC2DA8DC8">
                           <p class="titleintable">表8-5 GET_QUEUE_PARAMETER过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_QUEUE_PARAMETER过程参数" width="100%" border="1" summary="This table describes the parameters of GET_QUEUE_PARAMETER." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d31062e3516">参数</th>
                                    <th align="left" valign="bottom" width="66%" id="d31062e3519">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3524" headers="d31062e3516 ">
                                       <p><code class="codeph">queue_name</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3524 d31062e3519 ">
                                       <p>分片队列的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3533" headers="d31062e3516 ">
                                       <p><code class="codeph">PARAM_NAME</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3533 d31062e3519 ">
                                       <p>参数的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d31062e3542" headers="d31062e3516 ">
                                       <p><code class="codeph">param_value</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d31062e3542 d31062e3519 ">
                                       <p>参数的值。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-8D66CD32-BD67-4EF1-952B-13B44B019CE7" name="GUID-8D66CD32-BD67-4EF1-952B-13B44B019CE7"></a><h4 id="ADQUE-GUID-8D66CD32-BD67-4EF1-952B-13B44B019CE7" class="sect4"><span class="enumeration_section">8.3.7</span>创建例外队列</h4>
                  <div>
                     <div class="section">
                        <p>此过程允许用户为分片队列创建异常队列。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8D66CD32-BD67-4EF1-952B-13B44B019CE7__GUID-783E6ACD-65F2-4E14-8BF5-81C3399A30A8">句法</p><pre class="oac_no_warn" dir="ltr">PROCEDURE CREATE_EXCEPTION_QUEUE（在VARCHAR2中为sharded_queue_name，在VARCHAR2 DEFAULT中为exception_queue_name为空）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8D66CD32-BD67-4EF1-952B-13B44B019CE7__GUID-61739772-4651-4C14-80F1-3A88269EF062">参数</p>
                        <div class="tblformal" id="GUID-8D66CD32-BD67-4EF1-952B-13B44B019CE7__GUID-E52D3C25-E466-4EAD-8AC8-C4A857ADFD60">
                           <p class="titleintable">表8-6 CREATE_EXCEPTION_QUEUE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_EXCEPTION_QUEUE过程参数" width="100%" border="1" summary="This table describes the parameters of CREATE_EXCEPTION_QUEUE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="38%" id="d31062e3613">参数</th>
                                    <th align="left" valign="bottom" width="62%" id="d31062e3616">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d31062e3621" headers="d31062e3613 ">
                                       <p><code class="codeph">sharded_queue_name</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d31062e3621 d31062e3616 ">
                                       <p>分片队列的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d31062e3630" headers="d31062e3613 ">
                                       <p><code class="codeph">exception_queue_name</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d31062e3630 d31062e3616 ">
                                       <p>异常队列的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADQUE2702"></a><div class="props_rev_3"><a id="GUID-AAFDFFD3-0256-473A-A685-225AD0D024DB" name="GUID-AAFDFFD3-0256-473A-A685-225AD0D024DB"></a><h3 id="ADQUE-GUID-AAFDFFD3-0256-473A-A685-225AD0D024DB" class="sect3"><span class="enumeration_section">8.4</span>管理转换</h3>
               <div>
                  <p>转换会更改消息的格式，以便其他应用程序可以理解由一个应用程序创建的消息。您可以对持久消息和缓冲消息使用转换。这些主题描述了如何管理队列表。</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-264A3C43-93B3-43B5-820F-C25F686E97BD" title="DBMS_TRANSFORM.CREATE_TRANSFORMATION创建消息格式转换。">创建转型</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-07B0CC0D-63D0-43CB-91C6-2A2AE5B77E09" title="DBMS_TRANSFORM.MODIFY_TRANSFORMATION更改转换函数并指定目标类型的每个属性的转换。">修改转换</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-40507A08-12D1-4DAB-950A-624C40EBDD0D" title="DBMS_TRANSFORM.DROP_TRANSFORMATION删除转换。">放弃转型</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-AAFDFFD3-0256-473A-A685-225AD0D024DB__GUID-9BCCC8B2-BBAF-4CFC-9A1E-DD18D9319FED">
                     <p class="notep1">注意：</p>
                     <p>分片队列不支持转换。</p>
                  </div>
               </div><a id="ADQUE2703"></a><a id="ADQUE0813"></a><div class="props_rev_3"><a id="GUID-264A3C43-93B3-43B5-820F-C25F686E97BD" name="GUID-264A3C43-93B3-43B5-820F-C25F686E97BD"></a><h4 id="ADQUE-GUID-264A3C43-93B3-43B5-820F-C25F686E97BD" class="sect4"><span class="enumeration_section">8.4.1</span>创建转换</h4>
                  <div>
                     <p><code class="codeph">DBMS_TRANSFORM.CREATE_TRANSFORMATION</code>创建消息格式转换。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_TRANSFORM.CREATE_TRANSFORMATION（schema VARCHAR2（30），name VARCHAR2（30），from_schema VARCHAR2（30），from_type VARCHAR2（30），to_schema VARCHAR2（30），to_type VARCHAR2（30），transformation VARCHAR2（4000））;</pre><p><a href="glossary.html#GUID-A668A987-B1D3-4330-97FD-0589DB780225"><span class="xrefglossterm">转换</span></a>必须是输入类型为<code class="codeph">from_type</code>的SQL函数，返回类型为<code class="codeph">to_type</code>的对象。它也可以是类型为<code class="codeph">to_type</code>的SQL表达式，指的是<code class="codeph">from_type</code> 。对<code class="codeph">from_type</code>所有引用必须是<code class="codeph">source.user_data</code>形式。
                        </p>
                        <p>必须为<code class="codeph">dbms_transform</code>授予<code class="codeph">EXECUTE</code>特权才能使用此功能。此权限包含在<code class="codeph">AQ_ADMINISTRATOR_ROLE</code> 。</p>
                        <p>您还必须有<code class="codeph">EXECUTE</code>上是源和目标类型转换的用户定义类型的特权，并有<code class="codeph">EXECUTE</code>任何PL / SQL函数特权转换功能被使用。转换无法写入数据库状态（即执行<a href="glossary.html#GUID-86C2F323-8484-41FB-8E51-BF0462F041DF"><span class="xrefglossterm">DML</span></a>操作）或提交或回滚当前事务。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-264A3C43-93B3-43B5-820F-C25F686E97BD__CHDCIADC">
                        <p class="titleinexample">例8-36创建转换</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_TRANSFORM.CREATE_TRANSFORMATION（schema =&gt;'test'，name =&gt;'message_order_transform'，from_schema =&gt;'test'，from_type =&gt;'message_typ'，to_schema =&gt;'test'，to_type =&gt;'order_typ'，transformation =&gt; 'test.order_typ（source.user_data.sender_id，source.user_data.subject，source.user_data.text）'）;结束; /</pre><div class="p">
                           <div class="infoboxnotealso" id="GUID-264A3C43-93B3-43B5-820F-C25F686E97BD__GUID-5BD24FD2-F870-4B3D-98C0-9D8F39EEE8E7">
                              <p class="notep1">也可以看看：</p>
                              <p>有关管理员和用户角色的详细信息，请参阅<span class="q">“ <a href="managing-aq.html#GUID-3E0B5CD0-817A-49A3-8895-4651B224D765" title="可以通过DBMS_AQADM程序包中的过程来管理配置信息。">Oracle数据库高级队列安全性</a> ”</span></p>
                           </div>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE0814"></a><div class="props_rev_3"><a id="GUID-07B0CC0D-63D0-43CB-91C6-2A2AE5B77E09" name="GUID-07B0CC0D-63D0-43CB-91C6-2A2AE5B77E09"></a><h4 id="ADQUE-GUID-07B0CC0D-63D0-43CB-91C6-2A2AE5B77E09" class="sect4"><span class="enumeration_section">8.4.2</span>修改转换</h4>
                  <div>
                     <p><code class="codeph">DBMS_TRANSFORM.MODIFY_TRANSFORMATION</code>更改转换函数并指定目标类型的每个属性的转换。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_TRANSFORM.MODIFY_TRANSFORMATION（schema VARCHAR2（30），name VARCHAR2（30），attribute_number INTEGER，transformation VARCHAR2（4000））;</pre><p>如果指定了属性编号0，则转换表达式单独定义从源类型到目标类型的转换。</p>
                        <p>对<code class="codeph">from_type</code>所有引用必须是<code class="codeph">source.user_data</code>形式。所有对源类型属性的引用都必须以<code class="codeph">source.user_data</code>为前缀。
                        </p>
                        <p>必须为<code class="codeph">dbms_transform</code>授予<code class="codeph">EXECUTE</code>特权才能使用此功能。您还必须有<code class="codeph">EXECUTE</code>上是源和目标类型转换的用户定义类型的特权，并有<code class="codeph">EXECUTE</code>任何PL / SQL函数特权转换功能被使用。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2704"></a><div class="props_rev_3"><a id="GUID-40507A08-12D1-4DAB-950A-624C40EBDD0D" name="GUID-40507A08-12D1-4DAB-950A-624C40EBDD0D"></a><h4 id="ADQUE-GUID-40507A08-12D1-4DAB-950A-624C40EBDD0D" class="sect4"><span class="enumeration_section">8.4.3</span>删除转换</h4>
                  <div>
                     <p><code class="codeph">DBMS_TRANSFORM.DROP_TRANSFORMATION</code>删除转换。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_TRANSFORM.DROP_TRANSFORMATION（schema VARCHAR2（30），name VARCHAR2（30））;</pre><p>必须为<code class="codeph">dbms_transform</code>授予<code class="codeph">EXECUTE</code>特权才能使用此功能。您还必须有<code class="codeph">EXECUTE</code>上是源和目标类型转换的用户定义类型的特权，并有<code class="codeph">EXECUTE</code>任何PL / SQL函数特权转换功能被使用。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADQUE2705"></a><div class="props_rev_3"><a id="GUID-95E67297-FD08-415D-8085-6EB635EC9F8B" name="GUID-95E67297-FD08-415D-8085-6EB635EC9F8B"></a><h3 id="ADQUE-GUID-95E67297-FD08-415D-8085-6EB635EC9F8B" class="sect3"><span class="enumeration_section">8.5</span>授予和撤销权限</h3>
               <div>
                  <p>这些主题描述了如何授予和撤消权限。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-E86BD9DC-E029-4468-948D-122943D7BD9D" title="DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE为用户和角色授予Oracle数据库高级队列系统特权。权限是ENQUEUE_ANY，DEQUEUE_ANY，MANAGE_ANY。最初，只有SYS和SYSTEM才能成功使用此过程。">授予Oracle数据库高级排队系统权限</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-53356AD0-F59E-4914-9B7F-5E4D5BB4FB1E" title="DBMS_AQADM.REVOKE_SYSTEM_PRIVILEGE撤消用户和角色的Oracle数据库高级队列系统特权。权限是ENQUEUE_ANY，DEQUEUE_ANY和MANAGE_ANY。">撤销Oracle数据库高级排队系统权限</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-D5644E35-45D1-40CF-8717-468233869131" title="DBMS_AQADM.GRANT_QUEUE_PRIVILEGE将队列的权限授予用户和角色。权限是ENQUEUE，DEQUEUE或ALL。最初，只有队列表所有者可以使用此过程为队列授予权限。">授予队列权限</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-D5FCC1FC-2FF2-4B0F-8CFC-6D47A8389126" title="DBMS_AQADM.REVOKE_QUEUE_PRIVILEGE撤消用户和角色对队列的权限。权限是ENQUEUE或DEQUEUE。">撤消队列权限</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2707"></a><a id="ADQUE2706"></a><div class="props_rev_3"><a id="GUID-E86BD9DC-E029-4468-948D-122943D7BD9D" name="GUID-E86BD9DC-E029-4468-948D-122943D7BD9D"></a><h4 id="ADQUE-GUID-E86BD9DC-E029-4468-948D-122943D7BD9D" class="sect4"><span class="enumeration_section">8.5.1</span>授予Oracle数据库高级排队系统权限</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE</code>为用户和角色授予Oracle数据库高级队列系统特权。权限是<code class="codeph">ENQUEUE_ANY</code> ， <code class="codeph">DEQUEUE_ANY</code> ， <code class="codeph">MANAGE_ANY</code> 。最初，只有<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>才能成功使用此过程。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE（特权IN VARCHAR2，被授予者IN VARCHAR2，admin_option IN BOOLEAN：= FALSE）;</pre><p>允许授予<code class="codeph">ENQUEUE_ANY</code>权限的用户将消息排入数据库中的任何队列。允许授予<code class="codeph">DEQUEUE_ANY</code>权限的用户从数据库中的任何队列中出列消息。允许授予<code class="codeph">MANAGE_ANY</code>权限的用户对数据库中的任何模式运行<code class="codeph">DBMS_AQADM</code>调用。
                        </p>
                        <div class="infoboxnote" id="GUID-E86BD9DC-E029-4468-948D-122943D7BD9D__GUID-0D3F66E9-4397-4705-B499-873BE6A39F98">
                           <p class="notep1">注意：</p>
                           <p>从Oracle数据库12开始<span class="italic">c</span>释放2， <code class="codeph">MANAGE_ANY</code> ， <code class="codeph">ENQUEUE_ANY</code>和<code class="codeph">DEQUEUE_ANY</code>权限不允许访问<code class="codeph">SYS</code>通过比其他用户拥有的队列<code class="codeph">SYS</code> 。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E86BD9DC-E029-4468-948D-122943D7BD9D__GUID-60D11FB0-E450-4473-84E3-D719AA379EB4">
                        <p class="titleinexample">示例8-37授予AQ系统权限</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE（privilege =&gt;'ENQUEUE_ANY'，grantee =&gt;'test'，admin_option =&gt; FALSE）; DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE（privilege =&gt;'DEQUEUE_ANY'，grantee =&gt;'test'，admin_option =&gt; FALSE）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2709"></a><a id="ADQUE2708"></a><div class="props_rev_3"><a id="GUID-53356AD0-F59E-4914-9B7F-5E4D5BB4FB1E" name="GUID-53356AD0-F59E-4914-9B7F-5E4D5BB4FB1E"></a><h4 id="ADQUE-GUID-53356AD0-F59E-4914-9B7F-5E4D5BB4FB1E" class="sect4"><span class="enumeration_section">8.5.2</span>撤销Oracle数据库高级排队系统权限</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.REVOKE_SYSTEM_PRIVILEGE</code>撤消用户和角色的Oracle数据库高级队列系统特权。权限是<code class="codeph">ENQUEUE_ANY</code> ， <code class="codeph">DEQUEUE_ANY</code>和<code class="codeph">MANAGE_ANY</code> 。</p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.REVOKE_SYSTEM_PRIVILEGE（特权IN VARCHAR2，被授予者IN VARCHAR2）;</pre><p>无法有选择地撤消系统特权的<code class="codeph">ADMIN</code>选项。
                        </p>
                        <p>允许授予<code class="codeph">ENQUEUE_ANY</code>权限的用户将消息排入数据库中的任何队列。允许授予<code class="codeph">DEQUEUE_ANY</code>权限的用户从数据库中的任何队列中出列消息。允许授予<code class="codeph">MANAGE_ANY</code>权限的用户对数据库中的任何模式运行<code class="codeph">DBMS_AQADM</code>调用。
                        </p>
                        <div class="infoboxnote" id="GUID-53356AD0-F59E-4914-9B7F-5E4D5BB4FB1E__GUID-4C7DDF37-3C46-406E-B0D2-ACC7A63D2054">
                           <p class="notep1">注意：</p>
                           <p>从Oracle数据库12开始<span class="italic">c</span>释放2， <code class="codeph">MANAGE_ANY</code> ， <code class="codeph">ENQUEUE_ANY</code>和<code class="codeph">DEQUEUE_ANY</code>权限不允许访问<code class="codeph">SYS</code>通过比其他用户拥有的队列<code class="codeph">SYS</code> 。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-53356AD0-F59E-4914-9B7F-5E4D5BB4FB1E__GUID-BFB2EB2E-872E-4F62-A282-D4C95A3BA199">
                        <p class="titleinexample">例8-38撤销AQ系统权限</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.REVOKE_SYSTEM_PRIVILEGE（privilege =&gt;'DEQUEUE_ANY'，grantee =&gt;'test'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2711"></a><a id="ADQUE2710"></a><div class="props_rev_3"><a id="GUID-D5644E35-45D1-40CF-8717-468233869131" name="GUID-D5644E35-45D1-40CF-8717-468233869131"></a><h4 id="ADQUE-GUID-D5644E35-45D1-40CF-8717-468233869131" class="sect4"><span class="enumeration_section">8.5.3</span>授予队列权限</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.GRANT_QUEUE_PRIVILEGE</code>将队列的权限授予用户和角色。权限是<code class="codeph">ENQUEUE</code> ， <code class="codeph">DEQUEUE</code>或<code class="codeph">ALL</code> 。最初，只有队列表所有者可以使用此过程为队列授予权限。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.GRANT_QUEUE_PRIVILEGE（特权IN VARCHAR2，队列名称IN VARCHAR2，被授权者IN VARCHAR2，grant_option IN BOOLEAN：= FALSE）;</pre><div class="infoboxnote" id="GUID-D5644E35-45D1-40CF-8717-468233869131__GUID-EC418618-C910-4B26-A661-0D61363CA68D">
                           <p class="notep1">注意：</p>
                           <p>此过程要求将<code class="codeph">DBMS_AQADM</code> <code class="codeph">EXECUTE</code>特权授予队列表所有者， <code class="codeph">DBMS_AQADM</code>列表所有者可能是普通队列用户。如果您不希望普通队列用户能够创建和删除队列和队列表，添加和删除订阅者等，那么必须在初始<code class="codeph">GRANT_QUEUE_PRIVILEGE</code>完成后立即撤销<code class="codeph">EXECUTE</code>特权。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D5644E35-45D1-40CF-8717-468233869131__GUID-B88072F2-9D84-4CE4-A4BE-CB97A468C988">
                        <p class="titleinexample">示例8-39授予队列权限</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.GRANT_QUEUE_PRIVILEGE（privilege =&gt;'ALL'，queue_name =&gt;'test.multiconsumer_81_queue'，grantee =&gt;'test_adm'，grant_option =&gt; TRUE）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2713"></a><a id="ADQUE2712"></a><div class="props_rev_3"><a id="GUID-D5FCC1FC-2FF2-4B0F-8CFC-6D47A8389126" name="GUID-D5FCC1FC-2FF2-4B0F-8CFC-6D47A8389126"></a><h4 id="ADQUE-GUID-D5FCC1FC-2FF2-4B0F-8CFC-6D47A8389126" class="sect4"><span class="enumeration_section">8.5.4</span>撤销队列权限</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.REVOKE_QUEUE_PRIVILEGE</code>撤消用户和角色对队列的权限。权限是<code class="codeph">ENQUEUE</code>或<code class="codeph">DEQUEUE</code> 。</p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.REVOKE_QUEUE_PRIVILEGE（特权IN VARCHAR2，queue_name IN VARCHAR2，被授权者IN VARCHAR2）;</pre><p>要撤销特权，撤销者必须是特权的原始设保人。如果授予者的权限被撤销，则通过<code class="codeph">GRANT</code>选项传播的权限将被撤销。
                        </p>
                        <p>您可以撤消特定队列上被授权者的出列权限，只让被授权者拥有enqueue权限，如<a href="aq-administrative-interface.html#GUID-D5FCC1FC-2FF2-4B0F-8CFC-6D47A8389126__i1006646">例8-40所示</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D5FCC1FC-2FF2-4B0F-8CFC-6D47A8389126__i1006646">
                        <p class="titleinexample">示例8-40撤消出列权限</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.REVOKE_QUEUE_PRIVILEGE（privilege =&gt;'DEQUEUE'，queue_name =&gt;'test.multiconsumer_81_queue'，grantee =&gt;'test_adm'）;结束;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE2714"></a><div class="props_rev_3"><a id="GUID-D9D78672-3AA0-4687-B0DA-67F2127FE3AA" name="GUID-D9D78672-3AA0-4687-B0DA-67F2127FE3AA"></a><h3 id="ADQUE-GUID-D9D78672-3AA0-4687-B0DA-67F2127FE3AA" class="sect3"><span class="enumeration_section">8.6</span>管理订户</h3>
               <div>
                  <p>这些主题描述了如何管理订阅者。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8" title="DBMS_AQADM.ADD_SUBSCRIBER将默认订户添加到队列。">添加订阅者</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-A2DE2897-4A1B-4AD1-9D16-B02B3A2C751A" title="DBMS_AQADM.ALTER_SUBSCRIBER将订户的现有属性更改为指定的队列。">更改订阅者</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-8E0C3818-52DE-4F17-8E88-8FDAC1FCB46D" title="DBMS_AQADM.REMOVE_SUBSCRIBER从队列中删除默认订户。">删除订阅者</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2715"></a><a id="ADQUE2716"></a><a id="ADQUE2717"></a><a id="ADQUE2718"></a><a id="ADQUE2719"></a><a id="ADQUE0807"></a><div class="props_rev_3"><a id="GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8" name="GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8"></a><h4 id="ADQUE-GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8" class="sect4"><span class="enumeration_section">8.6.1</span>添加订户</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.ADD_SUBSCRIBER</code>将默认订户添加到队列。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.ADD_SUBSCRIBER（queue_name IN VARCHAR2，订户IN sys.aq $ _agent，规则IN VARCHAR2 DEFAULT NULL，转换IN VARCHAR2 DEFAULT NULL，queue_to_queue IN BOOLEAN DEFAULT FALSE，delivery_mode IN PLS_INTEGER DEFAULT PERSISTENT）;</pre><p>应用程序可以将消息排入特定的收件人列表或默认的<a href="glossary.html#GUID-3E2C69B7-A56C-4F86-8997-5A708E1F14F3"><span class="xrefglossterm">订户</span></a>列表。此操作仅在允许多个使用者的队列上成功，并且订户总数必须为1024或更少。此操作立即生效，并提交包含事务。完成此调用后执行的入队请求反映了新操作。必须引用<code class="codeph">rule</code>任何字符串（使用单引号），如下所示：</p><pre class="oac_no_warn" dir="ltr">rule =&gt;'PRIORITY &lt;= 3 AND CORRID =''from JAPAN'''</pre><p>用户数据属性或属性仅适用于对象有效负载，并且在所有情况下都必须以<code class="codeph">tab.userdata</code>为前缀。
                        </p>
                        <p>如果在创建订户时将<code class="codeph">GLOBAL_TOPIC_ENABLED</code>设置为true，则还会创建相应的LDAP条目。
                        </p>
                        <p>指定在出列或传播期间要应用的变换的名称。必须使用<code class="codeph">DBMS_TRANSFORM</code>包创建转换。
                        </p>
                        <p>对于包含具有XMLType属性的有效内容的队列，您可以指定包含<code class="codeph">XMLType.existsNode()</code>和<code class="codeph">XMLType.extract()</code>等运算符的规则。
                        </p>
                        <p>如果参数<code class="codeph">queue_to_queue</code>设置为<code class="codeph">TRUE</code> ，则添加的订户是队列到队列订户。在源队列和目标队列之间设置队列到队列传播时，队列到队列订户通过该传播计划接收消息。
                        </p>
                        <p>如果<code class="codeph">delivery_mode</code>参数是默认的<code class="codeph">PERSISTENT</code> ，则订阅者仅接收持久消息。如果将其设置为<code class="codeph">BUFFERED</code> ，则订户仅接收缓冲的消息。如果设置为<code class="codeph">PERSISTENT_OR_BUFFERED</code> ，则订户接收这两种类型。您无法使用<code class="codeph">ALTER_SUBSCRIBER</code>更改此参数。</p>
                        <p>如果目标队列是单个使用者队列，则代理名称应为<code class="codeph">NULL</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8__GUID-0F08B8D5-C0D0-4720-A4A0-D2349FD10D93">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">ADD_SUBSCRIBER</code>是队列上的管理操作。虽然Oracle Database AQ不会阻止应用程序同时发出管理和操作调用，但它们是串行执行的。<code class="codeph">ADD_SUBSCRIBER</code>阻塞，直到挂起或出列消息的挂起呼叫完成。它不会等待挂起的事务完成。
                           </p>
                        </div>
                        <div class="p">
                           <div class="infoboxnotealso" id="GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8__GUID-FC0EF6C4-D60D-482F-AECB-51772A51AD6B">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关<code class="codeph">DBMS_TRANSFORM</code>包的更多信息，请<code class="codeph">DBMS_TRANSFORM</code> <a href="../arpls/DBMS_TRANSFORM.html#ARPLS061" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="aq-administrative-interface.html#GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2" title="DBMS_AQADM.SCHEDULE_PROPAGATION计划消息的传播。">调度队列传播</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8__GUID-5EA1FACA-F72F-4AB2-9D35-DA3554C7E807">
                        <p class="titleinexample">示例8-41在数据库链接的指定队列中添加订阅服务器</p><pre class="oac_no_warn" dir="ltr">DECLARE订户sys.aq $ _agent; BEGIN subscriber：= sys.aq $ _agent（'subscriber1'，'test2.msg_queue2@london'，null）; DBMS_AQADM.ADD_SUBSCRIBER（queue_name =&gt;'test.multiconsumer_81_queue'，subscriber =&gt; subscriber）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8__GUID-00D8A02B-8E2D-4A64-97A3-62D5061D6260">
                        <p class="titleinexample">示例8-42在Dababase链接上添加单个使用者队列作为订阅服务器</p><pre class="oac_no_warn" dir="ltr">DECLARE订户sys.aq $ _agent; BEGIN subscriber：= sys.aq $ _agent（'subscriber1'，'test2.msg_queue2@london'，null）; DBMS_AQADM.ADD_SUBSCRIBER（queue_name =&gt;'test.multiconsumer_81_queue'，subscriber =&gt; subscriber）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8__GUID-625DE9F1-1181-48AC-BC86-9CE966D5A2E1">
                        <p class="titleinexample">示例8-43添加具有规则的订户</p><pre class="oac_no_warn" dir="ltr">DECLARE订户sys.aq $ _agent; BEGIN subscriber：= sys.aq $ _agent（'subscriber2'，'test2.msg_queue2@london'，null）; DBMS_AQADM.ADD_SUBSCRIBER（queue_name =&gt;'test.multiconsumer_81_queue'，subscriber =&gt; subscriber，rule =&gt;'priority &lt;2'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8__GUID-DAB5AA34-AE1B-4C8C-9C4B-CB5FCBEBFD81">
                        <p class="titleinexample">示例8-44添加订户并指定转换</p><pre class="oac_no_warn" dir="ltr">DECLARE订户sys.aq $ _agent; BEGIN subscriber：= sys.aq $ _agent（'subscriber3'，'test2.msg_queue2@london'，null）; DBMS_AQADM.ADD_SUBSCRIBER（queue_name =&gt;'test.multiconsumer_81_queue'，subscriber =&gt; subscriber，transformation =&gt;'test.message_order_transform'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5FB46C6A-BB22-4CDE-B7D6-E242DC8808D8__GUID-3CA6908F-5BED-4C10-B868-ECCB99002202">
                        <p class="titleinexample">示例8-45从多个使用者队列传播到单个使用者队列</p><pre class="oac_no_warn" dir="ltr">DECLARE订户SYS.AQ $ _AGENT; BEGIN subscriber：= SYS.AQ $ _AGENT（NULL，'test2.single_consumer__queue@london'，null）; DBMS_AQADM.ADD_SUBSCRIBER（queue_name =&gt;'test.multiconsumer_81_queue'，subscriber =&gt; subscriber）;结束;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2720"></a><a id="ADQUE0808"></a><div class="props_rev_3"><a id="GUID-A2DE2897-4A1B-4AD1-9D16-B02B3A2C751A" name="GUID-A2DE2897-4A1B-4AD1-9D16-B02B3A2C751A"></a><h4 id="ADQUE-GUID-A2DE2897-4A1B-4AD1-9D16-B02B3A2C751A" class="sect4"><span class="enumeration_section">8.6.2</span>更改订户</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.ALTER_SUBSCRIBER</code>将订户的现有属性更改为指定的队列。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.ALTER_SUBSCRIBER（queue_name IN VARCHAR2，订户IN sys.aq $ _agent，规则IN VARCHAR2转换IN VARCHAR2）;</pre><p>规则，转换或两者都可以改变。如果仅更改其中一个属性，则将另一个属性的现有值指定给alter调用。如果修改订户时GLOBAL_TOPIC_ENABLED = TRUE，则创建相应的LDAP条目。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A2DE2897-4A1B-4AD1-9D16-B02B3A2C751A__GUID-15163AA7-D706-49A3-A766-26CDD443A8D7">
                        <p class="titleinexample">例8-46更改订户规则</p><pre class="oac_no_warn" dir="ltr">DECLARE订户sys.aq $ _agent; BEGIN subscriber：= sys.aq $ _agent（'subscriber2'，'test2.msg_queue2@london'，null）; DBMS_AQADM.ALTER_SUBSCRIBER（queue_name =&gt;'test.multiconsumer_81_queue'，subscriber =&gt; subscriber，rule =&gt;'priority = 1'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2722"></a><a id="ADQUE2721"></a><div class="props_rev_3"><a id="GUID-8E0C3818-52DE-4F17-8E88-8FDAC1FCB46D" name="GUID-8E0C3818-52DE-4F17-8E88-8FDAC1FCB46D"></a><h4 id="ADQUE-GUID-8E0C3818-52DE-4F17-8E88-8FDAC1FCB46D" class="sect4"><span class="enumeration_section">8.6.3</span>删除订户</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.REMOVE_SUBSCRIBER</code>从队列中删除默认订户。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.REMOVE_SUBSCRIBER（queue_name IN VARCHAR2，订户IN sys.aq $ _agent）;</pre><p>此操作立即生效，并提交包含事务。作为操作的一部分，将删除现有消息中对订户的所有引用。如果<code class="codeph">GLOBAL_TOPIC_ENABLED = TRUE</code>订户时<code class="codeph">GLOBAL_TOPIC_ENABLED = TRUE</code> ，则还会删除相应的LDAP条目。
                        </p>
                        <p>即使存在可供消费者出列的未决消息，也不会运行<code class="codeph">REMOVE_SUBSCRIBER</code>过程。<code class="codeph">REMOVE_SUBSCRIBER</code>过程完成后，这些消息将自动无法出<code class="codeph">REMOVE_SUBSCRIBER</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-8E0C3818-52DE-4F17-8E88-8FDAC1FCB46D__GUID-DF81CC7E-424B-44FB-AC9F-B9F9135C2DEE">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">REMOVE_SUBSCRIBER</code>是队列上的管理操作。虽然Oracle Database AQ不会阻止应用程序同时发出管理和操作调用，但它们是串行执行的。<code class="codeph">REMOVE_SUBSCRIBER</code>阻塞，直到挂起或出列消息的待处理呼叫完成。它不会等待挂起的事务完成。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8E0C3818-52DE-4F17-8E88-8FDAC1FCB46D__GUID-5C334D44-95FF-479B-8575-7EC4BF3BD9F0">
                        <p class="titleinexample">示例8-47删除订户</p><pre class="oac_no_warn" dir="ltr">DECLARE订户sys.aq $ _agent; BEGIN subscriber：= sys.aq $ _agent（'subscriber2'，'test2.msg_queue2@london'，null）; DBMS_AQADM.REMOVE_SUBSCRIBER（queue_name =&gt;'test.multiconsumer_81_queue'，subscriber =&gt; subscriber）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE2723"></a><div class="props_rev_3"><a id="GUID-1BAEBA4C-441A-43FE-B822-14E9A6E33A0E" name="GUID-1BAEBA4C-441A-43FE-B822-14E9A6E33A0E"></a><h3 id="ADQUE-GUID-1BAEBA4C-441A-43FE-B822-14E9A6E33A0E" class="sect3"><span class="enumeration_section">8.7</span>管理传播</h3>
               <div>
                  <p>可以在队列生命周期的任何时间更改或删除为队列定义的传播计划。</p>
                  <p>您也可以暂时禁用计划而不是删除计划。无论计划是否有效，都可以进行所有管理呼叫。如果计划处于活动状态，则需要几秒钟才能处理呼叫。</p>
                  <p>这些主题描述了如何管理传播。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2" title="DBMS_AQADM.SCHEDULE_PROPAGATION计划消息的传播。">调度队列传播</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-BD52B336-FEE1-4B60-B122-B1B271425693" title="DBMS_AQADM.VERIFY_QUEUE_TYPES验证源队列和目标队列是否具有相同的类型。验证结果存储在字典表SYS.AQ $ _MESSAGE_TYPES中，覆盖此命令的所有先前输出。">验证传播队列类型</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-861E1547-279D-449B-9052-5342F8CBC322" title="DBMS_AQADM.ALTER_PROPAGATION_SCHEDULE更改传播计划的参数。无法更改queue-to-queue传播的destination_queue参数。">改变传播时间表</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-D7E6F0A7-4625-4BA4-A5E6-4DA24D9A7870" title="DBMS_AQADM.ENABLE_PROPAGATION_SCHEDULE启用先前禁用的传播计划。">启用传播计划</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-F6F4572B-0DC6-4A3B-9CC4-A77DEBBE05E9" title="DBMS_AQADM.DISABLE_PROPAGATION_SCHEDULE禁用先前启用的传播计划。">禁用传播计划</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-E28F5A7D-81CF-4DBC-B83F-8C19E8CB5D30" title="DBMS_AQADM.UNSCHEDULE_PROPAGATION取消安排先前调度的从队列到目的地的消息传播。目标由目标参数中的特定数据库链接标识，或者由destination_queue参数中的名称标识。">不安排队列传播</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2725"></a><a id="ADQUE2726"></a><a id="ADQUE2727"></a><a id="ADQUE2724"></a><div class="props_rev_3"><a id="GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2" name="GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2"></a><h4 id="ADQUE-GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2" class="sect4"><span class="enumeration_section">8.7.1</span>调度队列传播</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.SCHEDULE_PROPAGATION</code>计划消息的传播。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.SCHEDULE_PROPAGATION（queue_name IN VARCHAR2，destination IN VARCHAR2 DEFAULT NULL，start_time IN DATE DEFAULT SYSDATE，duration IN NUMBER DEFAULT NULL，next_time IN VARCHAR2 DEFAULT NULL，latency IN NUMBER DEFAULT 60，destination_queue IN VARCHAR2 DEFAULT NULL）;</pre><p>目标可以通过在数据库链接来识别<code class="codeph">destination</code>的参数，队列名称<code class="codeph">destination_queue</code>参数，或两者兼而有之。仅指定数据库链接会导致队列到数据链路的传播。如果将消息传播到另一个数据库中的多个队列，则所有传播的频率都相同。
                        </p>
                        <p>如果队列表所有者的架构中的专用数据库链接与公共数据库链接具有相同的名称，则AQ始终使用专用数据库链接。</p>
                        <p>指定目标队列名称会导致队列到队列的传播。如果将消息传播到另一个数据库中的多个队列，则队列到队列传播使您可以独立于其他队列配置每个计划。您可以启用或禁用单个传播。</p>
                        <div class="infoboxnote" id="GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2__GUID-C4BE7EB6-7FB7-4269-B3ED-5B785EEFED6E">
                           <p class="notep1">注意：</p>
                           <p>如果要将队列到队列传播到另一个数据库中的队列，则必须指定参数<code class="codeph">destination</code>和<code class="codeph">destination_queue</code> 。
                           </p>
                        </div>
                        <p>队列到队列传播模式在传播到目标Oracle Real Application Clusters（Oracle RAC）系统时支持透明故障转移。通过队列到队列传播，如果队列的所有者实例在Oracle RAC上失败，则不需要重新指定数据库链接。</p>
                        <p>通过指定<code class="codeph">NULL</code>目标，还可以将消息传播到同一数据库中的其他队列。如果邮件在相同或不同队列中的同一目标上有多个收件人，则邮件会同时传播到所有这些收件人。
                        </p>
                        <p>源队列必须位于适用于多个使用者的队列表中。如果指定单用户队列，则会出现错误ORA-24039结果。Oracle数据库高级队列不支持使用同义词来引用队列或数据库链接。</p>
                        <p>如果指定传播<code class="codeph">next_time</code>和<code class="codeph">duration</code> ，则传播将在指定的持续时间内定期运行。如果您指定延迟为零而没有<code class="codeph">next_time</code>或<code class="codeph">duration</code> ，则生成的传播将永久运行，传播消息，因为它们出现在队列中，否则将空闲。如果指定了非零延迟，没有<code class="codeph">next_time</code>或<code class="codeph">duration</code> （默认），则传播计划将基于事件。它将被安排在队列中有要传播的消息时运行。如果系统定义的时间段内没有其他消息，则作业将停止运行，直到有新消息要传播。作业运行的时间取决于其他因素，例如就绪作业的数量和作业队列进程的数量。
                        </p>
                        <p>传播使用线性退避方案来重试来自遇到故障的计划的传播。如果时间表连续遇到故障，则第一次重试在30秒后发生，第二次在60秒后发生，第三次在120秒后发生，依此类推。如果重试时间超出当前窗口的到期时间，则在下一个窗口的开始时间尝试下一次重试。最多进行16次重试尝试，之后将自动禁用计划。</p>
                        <div class="infoboxnote" id="GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2__GUID-3BEFF902-3126-4FC1-A137-04AAFC550EBE">
                           <p class="notep1">注意：</p>
                           <p>一旦重试尝试滑入下一个传播窗口，它将始终这样做;指数退避方案不再支配重试调度。如果在指定的日期功能<code class="codeph">next_time</code>的参数<code class="codeph">DBMS_AQADM.SCHEDULE_PROPAGATION</code>结果在窗口之间的短的时间间隔，然后不成功重试尝试的数目能很快达到16，禁用时间表。
                           </p>
                        </div>
                        <p>如果为<code class="codeph">destination</code>指定了不存在的值，则此过程仍会运行而不会引发错误。您可以在<code class="codeph">USER_QUEUE_SCHEDULES</code>视图的<code class="codeph">LAST_ERROR_MSG</code>列中查询运行时传播错误。
                        </p>
                        <div class="infoboxnotealso" id="GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2__GUID-FBFAF3BF-18BC-481B-B74F-45A42967F909">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关作业队列和<a href="glossary.html#GUID-2A213DEA-5532-4F72-8323-FC54E979CD31"><span class="xrefglossterm">Jnnn</span></a>后台进程的详细信息，请<a href="glossary.html#GUID-2A213DEA-5532-4F72-8323-FC54E979CD31"><span class="xrefglossterm">参阅</span></a> “ <a href="../admin/scheduling-jobs-with-oracle-scheduler.html#ADMIN034" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> ”中的“管理作业队列”</p>
                              </li>
                              <li>
                                 <p><a href="aq-internet-access.html#GUID-8BCF7E15-F69B-4BDB-B8A7-CEEB4932211C" title="您可以使用具有非分片队列的SOAP通过Internet访问Oracle数据库高级队列（AQ）。IDAP是Oracle数据库高级队列操作的SOAP规范。">Internet访问Oracle数据库高级队列</a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="aq-messaging-gateway-views.html#GUID-D1D82BFE-D9EF-4AFC-88AB-1E4F5F0DDD32" title="USER_QUEUE_SCHEDULES视图与DBA_QUEUE_SCHEDULES相同，但它仅显示用户模式中的队列计划。">USER_QUEUE_SCHEDULES：用户架构中的传播计划</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2__GUID-53186E96-D4CA-4273-BB98-54B64BFDD18B">
                        <p class="titleinexample">示例8-48将传播调度到同一数据库中的队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.SCHEDULE_PROPAGATION（queue_name =&gt;'test.multiconsumer_queue'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2__GUID-B89AAC42-5C7C-40B2-8122-5CF5653EACFA">
                        <p class="titleinexample">示例8-49将传播调度到另一个数据库中的队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.SCHEDULE_PROPAGATION（queue_name =&gt;'test.multiconsumer_queue'，destination =&gt;'another_db.world'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2__GUID-7E18AF13-92D4-43D8-B738-749A8F9BB7E1">
                        <p class="titleinexample">示例8-50调度队列到队列传播</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.SCHEDULE_PROPAGATION（queue_name =&gt;'test.multiconsumer_queue'，destination =&gt;'another_db.world'destination_queue =&gt;'target_queue'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2729"></a><a id="ADQUE2728"></a><div class="props_rev_3"><a id="GUID-BD52B336-FEE1-4B60-B122-B1B271425693" name="GUID-BD52B336-FEE1-4B60-B122-B1B271425693"></a><h4 id="ADQUE-GUID-BD52B336-FEE1-4B60-B122-B1B271425693" class="sect4"><span class="enumeration_section">8.7.2</span>验证传播队列类型</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.VERIFY_QUEUE_TYPES</code>验证源队列和目标队列是否具有相同的类型。验证结果存储在字典表<code class="codeph">SYS.AQ$_MESSAGE_TYPES</code> ，覆盖此命令的所有先前输出。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.VERIFY_QUEUE_TYPES（src_queue_name IN VARCHAR2，dest_queue_name IN VARCHAR2，destination IN VARCHAR2 DEFAULT NULL，rc OUT BINARY_INTEGER）;</pre><p>如果源队列和目标队列没有相同的类型并且指定了转换，则转换必须将源队列类型映射到目标队列类型。</p>
                        <div class="infoboxnote" id="GUID-BD52B336-FEE1-4B60-B122-B1B271425693__GUID-EB6D0810-15F1-46C8-AC59-C3822032AF40">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">SYS.AQ$_MESSAGE_TYPES</code>可以为同一源队列，目标队列和数据库链接提供多个条目，但具有不同的转换。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">VERIFY_QUEUE_TYPES</code>检查每个AQ传播计划发生一次，而<span class="italic">不是</span>每次传播的消息发送</p>
                              </li>
                              <li>
                                 <p>如果修改了队列的有效负载，则需要删除并重新创建源和目标队列之间的现有传播调度。</p>
                              </li>
                           </ul>
                        </div>
                        <p><a href="aq-administrative-interface.html#GUID-BD52B336-FEE1-4B60-B122-B1B271425693__I1007110">例8-51</a>涉及两个相同类型的队列。它返回：</p><pre class="oac_no_warn" dir="ltr">VQT：新式队列兼容：1</pre><p>如果使用<code class="codeph">test.raw_queue</code> （RAW类型的队列）代替<code class="codeph">test.another_queue</code>运行相同的示例，则返回：</p><pre class="oac_no_warn" dir="ltr">VQT：新样式队列兼容：0</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-BD52B336-FEE1-4B60-B122-B1B271425693__I1007110">
                        <p class="titleinexample">示例8-51验证队列类型</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON DECLARE rc BINARY_INTEGER; BEGIN DBMS_AQADM.VERIFY_QUEUE_TYPES（src_queue_name =&gt;'test.multiconsumer_queue'，dest_queue_name =&gt;'test.another_queue'，rc =&gt; rc）; DBMS_OUTPUT.PUT_LINE（'兼容：'|| rc）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2730"></a><a id="ADQUE2731"></a><a id="ADQUE0811"></a><div class="props_rev_3"><a id="GUID-861E1547-279D-449B-9052-5342F8CBC322" name="GUID-861E1547-279D-449B-9052-5342F8CBC322"></a><h4 id="ADQUE-GUID-861E1547-279D-449B-9052-5342F8CBC322" class="sect4"><span class="enumeration_section">8.7.3</span>改变传播时间表</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.ALTER_PROPAGATION_SCHEDULE</code>更改传播计划的参数。无法更改queue-to-queue传播的<code class="codeph">destination_queue</code>参数。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.ALTER_PROPAGATION_SCHEDULE（queue_name IN VARCHAR2，destination IN VARCHAR2 DEFAULT NULL，duration IN NUMBER DEFAULT NULL，next_time IN VARCHAR2 DEFAULT NULL，latency IN NUMBER DEFAULT 60，destination_queue IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-861E1547-279D-449B-9052-5342F8CBC322__GUID-10C7CA86-1488-4C07-B794-4298EA8F1240">
                        <p class="titleinexample">示例8-52将传播计划更改为同一数据库中的队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.ALTER_PROPAGATION_SCHEDULE（queue_name =&gt;'test.multiconsumer_queue'，duration =&gt;'2000'，next_time =&gt;'SYSDATE + 3600/86400'，latency =&gt;'32'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-861E1547-279D-449B-9052-5342F8CBC322__GUID-451FCDCA-3DB6-47E7-8861-9D7DA7C3AF40">
                        <p class="titleinexample">示例8-53将传播计划更改为另一个数据库中的队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.ALTER_PROPAGATION_SCHEDULE（queue_name =&gt;'test.multiconsumer_queue'，destination =&gt;'another_db.world'，duration =&gt;'2000'，next_time =&gt;'SYSDATE + 3600/86400'，latency =&gt;'32'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2732"></a><a id="ADQUE2733"></a><a id="ADQUE0809"></a><div class="props_rev_3"><a id="GUID-D7E6F0A7-4625-4BA4-A5E6-4DA24D9A7870" name="GUID-D7E6F0A7-4625-4BA4-A5E6-4DA24D9A7870"></a><h4 id="ADQUE-GUID-D7E6F0A7-4625-4BA4-A5E6-4DA24D9A7870" class="sect4"><span class="enumeration_section">8.7.4</span>启用传播计划</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.ENABLE_PROPAGATION_SCHEDULE</code>启用先前禁用的传播计划。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.ENABLE_PROPAGATION_SCHEDULE（queue_name IN VARCHAR2，destination IN VARCHAR2 DEFAULT NULL，destination_queue IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D7E6F0A7-4625-4BA4-A5E6-4DA24D9A7870__GUID-8CC29937-281C-4283-A244-13AB1005B23F">
                        <p class="titleinexample">示例8-54启用向同一数据库中的队列传播</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.ENABLE_PROPAGATION_SCHEDULE（queue_name =&gt;'test.multiconsumer_queue'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-D7E6F0A7-4625-4BA4-A5E6-4DA24D9A7870__GUID-8B39D4B5-CEDA-497F-ABD1-28B7D8034432">
                        <p class="titleinexample">示例8-55启用传播到另一个数据库中的队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.ENABLE_PROPAGATION_SCHEDULE（queue_name =&gt;'test.multiconsumer_queue'，destination =&gt;'another_db.world'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2734"></a><a id="ADQUE2735"></a><a id="ADQUE0810"></a><div class="props_rev_3"><a id="GUID-F6F4572B-0DC6-4A3B-9CC4-A77DEBBE05E9" name="GUID-F6F4572B-0DC6-4A3B-9CC4-A77DEBBE05E9"></a><h4 id="ADQUE-GUID-F6F4572B-0DC6-4A3B-9CC4-A77DEBBE05E9" class="sect4"><span class="enumeration_section">8.7.5</span>禁用传播计划</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.DISABLE_PROPAGATION_SCHEDULE</code>禁用先前启用的传播计划。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.DISABLE_PROPAGATION_SCHEDULE（queue_name IN VARCHAR2，destination IN VARCHAR2 DEFAULT NULL，destination_queue IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F6F4572B-0DC6-4A3B-9CC4-A77DEBBE05E9__GUID-055A99E6-55C3-4010-9FFF-746E73894109">
                        <p class="titleinexample">示例8-56禁用同一数据库中队列的传播</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.DISABLE_PROPAGATION_SCHEDULE（queue_name =&gt;'test.multiconsumer_queue'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-F6F4572B-0DC6-4A3B-9CC4-A77DEBBE05E9__GUID-13ADAB88-F7D1-4924-B394-CE045E828EF4">
                        <p class="titleinexample">示例8-57禁用另一个数据库中队列的传播</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.DISABLE_PROPAGATION_SCHEDULE（queue_name =&gt;'test.multiconsumer_queue'，destination =&gt;'another_db.world'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2737"></a><a id="ADQUE2738"></a><a id="ADQUE2736"></a><div class="props_rev_3"><a id="GUID-E28F5A7D-81CF-4DBC-B83F-8C19E8CB5D30" name="GUID-E28F5A7D-81CF-4DBC-B83F-8C19E8CB5D30"></a><h4 id="ADQUE-GUID-E28F5A7D-81CF-4DBC-B83F-8C19E8CB5D30" class="sect4"><span class="enumeration_section">8.7.6取消</span>调度队列传播</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.UNSCHEDULE_PROPAGATION</code>安排先前调度的从队列到目的地的消息传播。目的是通过在特定的数据库链接标识的<code class="codeph">destination</code>参数或通过在名称<code class="codeph">destination_queue</code>参数。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.UNSCHEDULE_PROPAGATION（queue_name IN VARCHAR2，destination IN VARCHAR2 DEFAULT NULL，destination_queue IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E28F5A7D-81CF-4DBC-B83F-8C19E8CB5D30__GUID-47647139-BCBA-4DB4-97B2-C5A3057EE862">
                        <p class="titleinexample">示例8-58将传播重新安排到同一数据库中的队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.UNSCHEDULE_PROPAGATION（queue_name =&gt;'test.multiconsumer_queue'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E28F5A7D-81CF-4DBC-B83F-8C19E8CB5D30__GUID-7DEBFF44-9060-45AC-8204-48EA810FFDE4">
                        <p class="titleinexample">示例8-59将传播重新安排到另一个数据库中的队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.UNSCHEDULE_PROPAGATION（queue_name =&gt;'test.multiconsumer_queue'，destination =&gt;'another_db.world'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE2739"></a><div class="props_rev_3"><a id="GUID-FF34D153-553C-48F0-9ACC-8266DBC64F15" name="GUID-FF34D153-553C-48F0-9ACC-8266DBC64F15"></a><h3 id="ADQUE-GUID-FF34D153-553C-48F0-9ACC-8266DBC64F15" class="sect3"><span class="enumeration_section">8.8</span>管理Oracle数据库高级排队代理</h3>
               <div>
                  <p>这些主题描述了如何管理Oracle数据库高级排队代理。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-ECF60C92-C8D6-4027-BE63-63C3D92872BD" title="DBMS_AQADM.CREATE_AQ_AGENT使用HTTP协议注册Oracle Database Advanced Queuing Internet访问的代理。">创建Oracle数据库高级队列代理</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-B5472D35-C5E5-4C20-9EC3-AC7F4A7A9CA7" title="DBMS_AQADM.ALTER_AQ_AGENT更改为Oracle数据库高级队列Internet访问注册的代理。">更改Oracle数据库高级队列代理</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-7ED7ABFE-EE1E-47FE-AF70-60AA4443F6C7" title="DBMS_AQADM.DROP_AQ_AGENT删除先前为Oracle数据库高级队列Internet访问注册的代理。">删除Oracle Database Advanced Queuing Agent</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-8CD0B0E9-37F8-4B70-95BD-75DE22F92586" title="DBMS_AQADM.ENABLE_DB_ACCESS授予Oracle数据库高级排队Internet代理特定数据库用户的特权。应该先前使用CREATE_AQ_AGENT过程创建代理。">启用数据库访问</a></p>
                     </li>
                     <li>
                        <p><a href="aq-administrative-interface.html#GUID-79C5A423-7F4F-4E93-9AA9-0E2EB97B2AC8" title="DBMS_AQADM.DISABLE_DB_ACCESS从Oracle Database Advanced Queuing Internet代理撤消特定数据库用户的特权。应该先使用ENABLE_DB_ACCESS过程为代理程序授予这些权限。">禁用数据库访问</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2740"></a><div class="props_rev_3"><a id="GUID-ECF60C92-C8D6-4027-BE63-63C3D92872BD" name="GUID-ECF60C92-C8D6-4027-BE63-63C3D92872BD"></a><h4 id="ADQUE-GUID-ECF60C92-C8D6-4027-BE63-63C3D92872BD" class="sect4"><span class="enumeration_section">8.8.1</span>创建Oracle数据库高级排队代理</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.CREATE_AQ_AGENT</code>使用HTTP协议注册Oracle Database Advanced Queuing Internet访问的代理。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.CREATE_AQ_AGENT（agent_name IN VARCHAR2，certificate_location IN VARCHAR2 DEFAULT NULL，enable_http IN BOOLEAN DEFAULT FALSE，enable_anyp IN BOOLEAN DEFAULT FALSE）;</pre><p><code class="codeph">SYS.AQ$INTERNET_USERS</code>视图包含所有Oracle Database Advanced Queuing Internet代理的列表。创建，更改或删除代理时，如果满足以下条件，则会为代理创建LDAP条目：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">GLOBAL_TOPIC_ENABLED</code> = <code class="codeph">TRUE</code></p>
                           </li>
                           <li>
                              <p>指定了<code class="codeph">certificate_location</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2741"></a><div class="props_rev_3"><a id="GUID-B5472D35-C5E5-4C20-9EC3-AC7F4A7A9CA7" name="GUID-B5472D35-C5E5-4C20-9EC3-AC7F4A7A9CA7"></a><h4 id="ADQUE-GUID-B5472D35-C5E5-4C20-9EC3-AC7F4A7A9CA7" class="sect4"><span class="enumeration_section">8.8.2</span>更改Oracle数据库高级排队代理</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.ALTER_AQ_AGENT</code>更改为Oracle数据库高级队列Internet访问注册的代理。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.ALTER_AQ_AGENT（agent_name IN VARCHAR2，certificate_location IN VARCHAR2 DEFAULT NULL，enable_http IN BOOLEAN DEFAULT FALSE，enable_anyp IN BOOLEAN DEFAULT FALSE）;</pre><p>创建，更改或删除Oracle Database Advanced Queuing代理时，如果满足以下条件，则会为代理创建LDAP条目：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">GLOBAL_TOPIC_ENABLED</code> = <code class="codeph">TRUE</code></p>
                           </li>
                           <li>
                              <p>指定了<code class="codeph">certificate_location</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2742"></a><div class="props_rev_3"><a id="GUID-7ED7ABFE-EE1E-47FE-AF70-60AA4443F6C7" name="GUID-7ED7ABFE-EE1E-47FE-AF70-60AA4443F6C7"></a><h4 id="ADQUE-GUID-7ED7ABFE-EE1E-47FE-AF70-60AA4443F6C7" class="sect4"><span class="enumeration_section">8.8.3</span>删除Oracle Database Advanced Queuing Agent</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.DROP_AQ_AGENT</code>删除先前为Oracle数据库高级队列Internet访问注册的代理。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.DROP_AQ_AGENT（agent_name IN VARCHAR2）;</pre><p>创建，更改或删除Oracle Database Advanced Queuing代理时，如果满足以下条件，则会为代理创建LDAP条目：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">GLOBAL_TOPIC_ENABLED</code> = <code class="codeph">TRUE</code></p>
                           </li>
                           <li>
                              <p>指定了<code class="codeph">certificate_location</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2743"></a><div class="props_rev_3"><a id="GUID-8CD0B0E9-37F8-4B70-95BD-75DE22F92586" name="GUID-8CD0B0E9-37F8-4B70-95BD-75DE22F92586"></a><h4 id="ADQUE-GUID-8CD0B0E9-37F8-4B70-95BD-75DE22F92586" class="sect4"><span class="enumeration_section">8.8.4</span>启用数据库访问</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.ENABLE_DB_ACCESS</code>授予Oracle数据库高级排队Internet代理特定数据库用户的特权。应该先前使用<code class="codeph">CREATE_AQ_AGENT</code>过程创建代理。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.ENABLE_DB_ACCESS（agent_name IN VARCHAR2，db_username IN VARCHAR2）</pre><p><code class="codeph">SYS.AQ$INTERNET_USERS</code>视图包含所有Oracle Database Advanced Queuing Internet代理的列表以及授予其权限的数据库用户的名称。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2744"></a><div class="props_rev_3"><a id="GUID-79C5A423-7F4F-4E93-9AA9-0E2EB97B2AC8" name="GUID-79C5A423-7F4F-4E93-9AA9-0E2EB97B2AC8"></a><h4 id="ADQUE-GUID-79C5A423-7F4F-4E93-9AA9-0E2EB97B2AC8" class="sect4"><span class="enumeration_section">8.8.5</span>禁用数据库访问</h4>
                  <div>
                     <p><code class="codeph">DBMS_AQADM.DISABLE_DB_ACCESS</code>从Oracle Database Advanced Queuing Internet代理撤消特定数据库用户的特权。应该先使用<code class="codeph">ENABLE_DB_ACCESS</code>过程为<code class="codeph">ENABLE_DB_ACCESS</code>程序授予这些权限。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.DISABLE_DB_ACCESS（agent_name IN VARCHAR2，db_username IN VARCHAR2）</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADQUE2745"></a><div class="props_rev_3"><a id="GUID-05DCD3B5-48BF-42B4-9D88-A54D9127F61F" name="GUID-05DCD3B5-48BF-42B4-9D88-A54D9127F61F"></a><h3 id="ADQUE-GUID-05DCD3B5-48BF-42B4-9D88-A54D9127F61F" class="sect3"><span class="enumeration_section">8.9</span>向LDAP服务器添加别名</h3>
               <div>
                  <p><code class="codeph">DBMS_AQADM.ADD_ALIAS_TO_LDAP</code>为LDAP服务器添加别名。
                  </p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.ADD_ALIAS_TO_LDAP（别名IN VARCHAR2，obj_location IN VARCHAR2）;</pre><p>此调用采用别名和LDAP中Oracle Database Advanced Queuing对象的可分辨名称，并创建指向Oracle Database Advanced Queuing对象的别名。别名直接放在数据库服务器的可分辨名称下。别名指向的对象可以是队列，代理或<a href="glossary.html#GUID-BA2DFFB2-5E44-4256-9DDD-D5B2AE0D81B9"><span class="xrefglossterm">ConnectionFactory</span></a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE2746"></a><div class="props_rev_3"><a id="GUID-90AC4D22-62AC-44A5-A06E-057CA1266864" name="GUID-90AC4D22-62AC-44A5-A06E-057CA1266864"></a><h3 id="ADQUE-GUID-90AC4D22-62AC-44A5-A06E-057CA1266864" class="sect3"><span class="enumeration_section">8.10</span>从LDAP服务器中删除别名</h3>
               <div>
                  <p><code class="codeph">DBMS_AQADM.DEL_ALIAS_FROM_LDAP</code>从LDAP服务器中删除别名。
                  </p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQADM.DEL_ALIAS_FROM_LDAP（别名IN VARCHAR2）;</pre><p>此调用将别名的名称作为参数，并删除LDAP服务器中的别名条目。假定别名直接放在LDAP目录中的数据库服务器下。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
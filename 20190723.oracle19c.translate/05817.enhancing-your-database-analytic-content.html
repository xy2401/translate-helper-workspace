<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Enhancing Your Database with Analytic&nbsp;Content</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="olap-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T13:54:33-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96405-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="querying-dimensional-objects.html" title="Previous" type="text/html">
      <link rel="next" href="developing-reports-and-dashboards.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP User's Guide">
    <meta name="dcterms.isVersionOf" content="OLAUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="querying-dimensional-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="developing-reports-and-dashboards.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Enhancing Your Database with Analytic&nbsp;Content</li>
            </ol>
            <a id="GUID-62302E81-4E58-4FA4-9AC1-F12B57BEB660" name="GUID-62302E81-4E58-4FA4-9AC1-F12B57BEB660"></a><a id="OLAUG500"></a>
            
            <h2 id="OLAUG-GUID-62302E81-4E58-4FA4-9AC1-F12B57BEB660" class="sect2"><span class="enumeration_chapter">5 </span> Enhancing Your Database with Analytic&nbsp;Content
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle OLAP provides an extensive set of analytic functions for enhancing your database with information-rich content. This chapter explains how you can use Analytic Workspace Manager to create calculated measures using templates and free-form calculations.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-A2F806F2-B2D0-46E0-827E-0239FC8AA1C5">What Is a Calculated Measure?</a></p>
                  </li>
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-2A20486E-EED5-4F27-95E4-F791B9072E9C">Functions for Defining Calculations</a></p>
                  </li>
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF">Creating Calculated Measures</a></p>
                  </li>
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55">Using Calculation Templates</a></p>
                  </li>
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483">Creating User-Defined Expressions</a></p>
                  </li>
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B">Creating Calculated Measures Using the OLAP DML</a></p>
                  </li>
               </ul>
            </div><a id="OLAUG9187"></a><div class="props_rev_3"><a id="GUID-A2F806F2-B2D0-46E0-827E-0239FC8AA1C5" name="GUID-A2F806F2-B2D0-46E0-827E-0239FC8AA1C5"></a><h3 id="OLAUG-GUID-A2F806F2-B2D0-46E0-827E-0239FC8AA1C5" class="sect3"><span class="enumeration_section">5.1 </span>What Is a Calculated Measure?
               </h3>
               <div>
                  <p><a id="d16111e132" class="indexterm-anchor"></a>Calculated measures return values that are computed at run time from data stored in one or more measures. Like relational views, calculated measures store queries against data stored in other objects. Because calculated measures do not store data, you can create dozens of them without increasing the size of the database. You can use them as the basis for defining other calculated measures, which adds depth to the types of calculations you can create using the templates in Analytic Workspace Manager. 
                  </p>
                  <p>As soon as you create a calculated measure, it appears as a column in a cube view. Because calculated measures do not contain data, they are not associated with a build process. You can create a calculated measure at any time, and it is available immediately for querying by SQL applications.</p>
               </div>
            </div><a id="OLAUG9188"></a><div class="props_rev_3"><a id="GUID-2A20486E-EED5-4F27-95E4-F791B9072E9C" name="GUID-2A20486E-EED5-4F27-95E4-F791B9072E9C"></a><h3 id="OLAUG-GUID-2A20486E-EED5-4F27-95E4-F791B9072E9C" class="sect3"><span class="enumeration_section">5.2 </span>Functions for Defining Calculations
               </h3>
               <div>
                  <p>The library of functions for defining calculated measures contains these basic categories:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-1818EA31-ADCA-4A2C-BADC-FF5BAE7A8A92">Arithmetic Operators</a>: Perform calculations on the values of two measures.
                        </p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-464BB9D9-7C6D-40CD-91F9-692DA3297881">Analytic Functions</a>: Perform calculations on an ordered series or a range of values in a single measure or column.
                        </p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-305901B5-2D11-4A25-9246-2FA0FEA538A1">Single-Row Functions</a>: Perform calculations on a value in a single row.
                        </p>
                     </li>
                  </ul>
               </div><a id="OLAUG9189"></a><div class="props_rev_3"><a id="GUID-1818EA31-ADCA-4A2C-BADC-FF5BAE7A8A92" name="GUID-1818EA31-ADCA-4A2C-BADC-FF5BAE7A8A92"></a><h4 id="OLAUG-GUID-1818EA31-ADCA-4A2C-BADC-FF5BAE7A8A92" class="sect4"><span class="enumeration_section">5.2.1 </span>Arithmetic Operators
                  </h4>
                  <div>
                     <p>You can perform the following <a id="d16111e260" class="indexterm-anchor"></a>arithmetic operations using two measures. The calculations in the cube are performed on a cell-by-cell basis at all levels of the dimension hierarchies.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Addition</span>: Adds the values of two measures.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Subtraction</span>: Subtracts the values of one measure from the values of another measure.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Multiplication</span>: Multiplies the values of two measures.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Division</span> or <span class="bold">Ratio</span>: Divides the values of one measure by the values of another measure.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Percent Difference</span>: Calculates the percent difference between the values of two measures.
                           </p>
                        </li>
                     </ul>
                     <p>The arithmetic operations are available in Analytic Workspace Manager as templates. as described in <span class="q">"<a href="enhancing-your-database-analytic-content.html#GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55">Using Calculation Templates</a>"</span>.
                     </p>
                  </div>
               </div><a id="OLAUG9190"></a><div class="props_rev_3"><a id="GUID-464BB9D9-7C6D-40CD-91F9-692DA3297881" name="GUID-464BB9D9-7C6D-40CD-91F9-692DA3297881"></a><h4 id="OLAUG-GUID-464BB9D9-7C6D-40CD-91F9-692DA3297881" class="sect4"><span class="enumeration_section">5.2.2 </span>Analytic Functions
                  </h4>
                  <div>
                     <p>The <a id="d16111e350" class="indexterm-anchor"></a>analytic functions provide the most powerful computations and fuel the most useful queries for business intelligence and similar applications. They include a variety of rank, share, time series, and other single-column functions. The analytic functions enable analysts and decision makers to make comparisons and identify trends.
                     </p>
                     <p>Analytic functions provided by Oracle OLAP leverage the knowledge associated with the dimensions about levels and family relationships. Time dimensions have additional information that enables them to support time series methods such as lags, leads, moving and cumulative calculations. Because the knowledge is stored with the dimension, you do not need to specify these relationships when creating a calculated measure.</p>
                     <p>The analytic functions are available in Analytic Workspace Manager as templates. They are described in <span class="q">"<a href="enhancing-your-database-analytic-content.html#GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55">Using Calculation Templates</a>"</span>.
                     </p>
                  </div>
               </div><a id="OLAUG9191"></a><div class="props_rev_3"><a id="GUID-305901B5-2D11-4A25-9246-2FA0FEA538A1" name="GUID-305901B5-2D11-4A25-9246-2FA0FEA538A1"></a><h4 id="OLAUG-GUID-305901B5-2D11-4A25-9246-2FA0FEA538A1" class="sect4"><span class="enumeration_section">5.2.3 </span>Single-Row Functions
                  </h4>
                  <div>
                     <p>Oracle OLAP supports most of the SQL <a id="d16111e414" class="indexterm-anchor"></a>single-row functions including:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Numeric functions such as <code class="codeph">ABS</code>, <code class="codeph">CEIL</code>, <code class="codeph">FLOOR</code>, <code class="codeph">POWER</code>, <code class="codeph">ROUND</code>, and <code class="codeph">TRUNC</code>.
                           </p>
                        </li>
                        <li>
                           <p>Character functions such as <code class="codeph">CONCAT</code>, <code class="codeph">LPAD</code>, <code class="codeph">RPAD</code>, <code class="codeph">LTRIM</code>, <code class="codeph">RTRIM</code>, <code class="codeph">REPLACE</code>, and <code class="codeph">SUBSTR</code>.
                           </p>
                        </li>
                        <li>
                           <p>Datetime functions such as <code class="codeph">CURRENT_DAY</code>, <code class="codeph">MONTHS_BETWEEN</code>, <code class="codeph">NEXT_DAY</code>, and <code class="codeph">SYSTIMESTAMP</code>.
                           </p>
                        </li>
                        <li>
                           <p>Comparison functions <code class="codeph">GREATEST</code> and <code class="codeph">LEAST</code>.
                           </p>
                        </li>
                        <li>
                           <p>Conversion functions such as <code class="codeph">TO_CHAR</code>, <code class="codeph">TO_DATE</code>, <code class="codeph">TO_NUMBER</code>, and <code class="codeph">TO_TIMESTAMP</code>.
                           </p>
                        </li>
                     </ul>
                     <p>You can use these functions to manipulate the data values in a measure, typically as part of a more complex calculation. These functions are not available as templates, but you can use them in free-form calculations, as described in <span class="q">"<a href="enhancing-your-database-analytic-content.html#GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483">Creating User-Defined Expressions</a>"</span>.
                     </p>
                  </div>
               </div>
            </div><a id="OLAUG9479"></a><a id="OLAUG9480"></a><a id="OLAUG9192"></a><div class="props_rev_3"><a id="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF" name="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF"></a><h3 id="OLAUG-GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF" class="sect3"><span class="enumeration_section">5.3 </span>Creating Calculated Measures
               </h3>
               <div>
                  <p><a id="d16111e564" class="indexterm-anchor"></a>Analytic Workspace Manager provides easy-to-use templates for creating calculated measures. You can create them in the same cube with the source measures, or you can create them in a separate cube.
                  </p>
                  <p>Calculated measures are available for querying as additional columns in a cube view (such as <code class="codeph">UNITS_CUBE_VIEW</code>). They are not available through cube materialized views (such as <code class="codeph">CB$UNITS_CUBE</code>). 
                  </p>
                  <p><a id="d16111e578" class="indexterm-anchor"></a><a id="d16111e582" class="indexterm-anchor"></a>The calculated measure generator quickly generates the standard calculated measures for one or more measures of a cube, including rank, share, prior and future periods, period-to-date, parallel period, moving aggregates, and cumulative aggregates. The generator uses naming rules for formulating the names and descriptions. You can customize these rules on the Naming Rules tab.
                  </p>
                  <p>You can also create individual calculated measures, including user-defined expressions in the OLAP expression syntax or the OLAP DML.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__GUID-FB6A7C99-0811-4AF6-A37E-25FD00AC0E0F">To create multiple calculated measures:</p>
                     <ol>
                        <li>
                           <p>In the navigation tree, right-click a cube and select <span class="bold">Generate Calculated Measures</span>.
                           </p>
                        </li>
                        <li>
                           <p>On the Calculations tab, select the measures on which to base the calculated measures.</p>
                        </li>
                        <li>
                           <p>Scroll down the Calculation Details and select each type of calculated measure you want to create for this selection of measures. Modify the calculations as desired by altering the templates.</p>
                        </li>
                        <li>
                           <p>Select the Time dimension to use for time series calculations.</p>
                        </li>
                        <li>
                           <p>Review the list of calculated measures. You can change the generated names by using the Naming Rules tab.</p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Generate Calculations</span> to create the calculated measures. 
                           </p>
                        </li>
                        <li>
                           <p>Repeat this procedure if you want to generate variations of the same basic types of calculations, such as another Share calculation for the same measure but on a different dimension. Change the naming rules to generate new, unique names.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <p><a href="enhancing-your-database-analytic-content.html#GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__BABFAAID">Figure 5-1</a> shows the Generate Calculated Measures dialog box.
                  </p>
                  <div class="figure" id="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__BABFAAID">
                     <p class="titleinfigure">Figure 5-1 Generating Multiple Calculated Measures</p><img src="img/calc_gen.gif" width="375" alt="Description of Figure 5-1 follows" title="Description of Figure 5-1 follows" longdesc="img_text/calc_gen.html"><br><a href="img_text/calc_gen.html">Description of "Figure 5-1 Generating Multiple Calculated Measures"</a></div>
                  <!-- class="figure" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__GUID-A53BE257-8499-414A-8FED-704C0C67681C">To create a single calculated measure:</p>
                     <ol>
                        <li>
                           <p>In the navigation tree, expand a cube folder.</p>
                        </li>
                        <li>
                           <p>Right-click Calculated Measures, then select <span class="bold">Create Calculated Measure</span> from the context menu.
                           </p>
                           <p>In the Create Calculated Measure dialog box, Enter a descriptive name.</p>
                        </li>
                        <li>
                           <p>Select a calculation type.</p>
                           <p>Your choice of an arithmetic or analytic function dynamically changes the Calculation template.</p>
                        </li>
                        <li>
                           <p>Modify the calculation template.</p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Create</span>.
                           </p>
                           <p>The calculated measure appears in the navigation tree in the Calculated Measures folder. </p>
                        </li>
                        <li>
                           <p>Select the <span class="bold">Advanced</span> option to display the References, Dependencies, and Expressions tabs. The tabs have the following information:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The References tab has a table that lists the measures that Analytic Workspace Manager references as it performs the calculations specified by this calculated measure. If the Enable SQL Expressions option is selected for the cube, then the table has a check mark in the Create column for any additional calculated measure that Analytic Workspace automatically creates.</p>
                              </li>
                              <li>
                                 <p>The Dependencies tab has a table that lists the other calculated measures that depend on this calculated measure. Analytic Workspace Manager uses this calculated measure as it performs the calculations for the measures in this table. </p>
                              </li>
                              <li>
                                 <p>The Expressions tab has a table that lists the expressions used by the calculated measure. This tab appears only if the Enable SQL Expressions option is selected for the cube.</p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <p><a href="enhancing-your-database-analytic-content.html#GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__CIHIBJBF">Figure 5-2</a> displays the Create Calculated Measure dialog box.
                  </p>
                  <div class="figure" id="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__CIHIBJBF">
                     <p class="titleinfigure">Figure 5-2 Creating a Calculated Measure</p><img src="img/calcs_lag.gif" width="464" alt="Description of Figure 5-2 follows" title="Description of Figure 5-2 follows" longdesc="img_text/calcs_lag.html"><br><a href="img_text/calcs_lag.html">Description of "Figure 5-2 Creating a Calculated Measure"</a></div>
                  <!-- class="figure" -->
               </div><a id="OLAUG9481"></a><a id="OLAUG9482"></a><a id="OLAUG9193"></a><div class="props_rev_3"><a id="GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F" name="GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F"></a><h4 id="OLAUG-GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F" class="sect4"><span class="enumeration_section">5.3.1 </span>Modifying a Template
                  </h4>
                  <div>
                     <p><a id="d16111e733" class="indexterm-anchor"></a><a id="d16111e737" class="indexterm-anchor"></a>The calculation that you selected is presented as template, which is a description of the calculation with variable parts that enable you to customize it.
                     </p>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F__CIHCHJDC">Figure 5-3</a> shows the template for calculating the prior period. You can view the choice lists by clicking the links.
                     </p>
                     <div class="figure" id="GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F__CIHCHJDC">
                        <p class="titleinfigure">Figure 5-3 Changing the Variable Parts of a Calculation</p><img width="395" src="img/calcs_measures.gif" alt="Description of Figure 5-3 follows" title="Description of Figure 5-3 follows" longdesc="img_text/calcs_measures.html"><br><a href="img_text/calcs_measures.html">Description of "Figure 5-3 Changing the Variable Parts of a Calculation"</a></div>
                     <!-- class="figure" -->
                     <p>You can include all values of a measure in a calculation, or, for some types of calculations, you can filter the measure to include only a selection of values. To limit one or more dimensions to a single dimension member, click the ellipses (<code class="codeph">...</code>) next to the measure. The Qualify Measure dialog box appears, as shown in <a href="enhancing-your-database-analytic-content.html#GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F__CIHDIGAH">Figure 5-4</a>. 
                     </p>
                     <div class="figure" id="GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F__CIHDIGAH">
                        <p class="titleinfigure">Figure 5-4 Limiting a Dimension to a Single Member</p><img width="243" src="img/calc_qualify.gif" alt="Description of Figure 5-4 follows" title="Description of Figure 5-4 follows" longdesc="img_text/calc_qualify.html"><br><a href="img_text/calc_qualify.html">Description of "Figure 5-4 Limiting a Dimension to a Single Member"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="OLAUG9194"></a><div class="props_rev_3"><a id="GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1" name="GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1"></a><h4 id="OLAUG-GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1" class="sect4"><span class="enumeration_section">5.3.2 </span>Choosing a Range of Time Periods
                  </h4>
                  <div>
                     <p><a id="d16111e810" class="indexterm-anchor"></a><a id="d16111e812" class="indexterm-anchor"></a>Many calculations are performed over time periods at the same level in the hierarchy. In some types of calculations, you can control the range of time periods that are used in the same calculation. For example, you might want to calculate a running total of months for each fiscal year, not a running total that begins with the first month stored in the cube. 
                     </p>
                     <p>You can use the following methods for identifying the range of time periods to calculate together:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Level</span>: Calculates all time periods at the same level, so that all months in the cube are included in one calculation, all quarters are included in another calculation, and so forth.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Parent</span>: Calculates all time periods with the same parent, so that all months in Q1-07 are included in one calculation, all months in Q2-07 are included in another calculation, and so forth.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Ancestor at level</span>: Calculates all time periods with the same ancestor at a specified level. For example, if the specified level is Year in a Year-Quarter-Month hierarchy, then Q1-06 to Q4-06 are included in one calculation, Q1-07 to Q4-07 are included in another calculation, Jan-06 to Dec-06 are included in a third calculation, and so forth. Any levels higher in the hierarchy are not calculated.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Gregorian periods</span>: The <a id="d16111e840" class="indexterm-anchor"></a>Gregorian periods -- Year, Quarter, Month, and Week -- impose the Gregorian calendar onto the selected hierarchy. This can be useful for analyzing data that uses nonstandard calendar hierarchies. For example, if you use Gregorian Year on a fiscal hierarchy that begins July 1 and ends June 30, then the last half of one fiscal year and the first half of the next fiscal year are calculated together. Time periods higher in the hierarchy than the specified Gregorian period are not calculated.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="OLAUG9195"></a><div class="props_rev_3"><a id="GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55" name="GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55"></a><h3 id="OLAUG-GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55" class="sect3"><span class="enumeration_section">5.4 </span>Using Calculation Templates
               </h3>
               <div>
                  <p><a id="d16111e893" class="indexterm-anchor"></a>Analytic Workspace Manager provides templates for all of the calculations typically in demand for business intelligence applications. The following topics describe the types of calculations available as calculation templates in Analytic Workspace Manager.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-20401990-5F99-4BCE-A5B7-AB6AED6A61A8">Arithmetic Calculations</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE">Index</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-1B47C242-B0E7-408D-9353-645425755CD1">Prior and Future Periods</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-5BB1079D-0DC4-4056-9091-D7E733662301">Period to Date</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-691280FA-7B6B-4D84-B7F8-0463D65DA4AF">Share</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-DA653766-DF86-4DDE-9111-C99EDDC66BA9">Rank</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-E3443AB3-012E-4CCC-B409-C54396A141C2">Parallel Period</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-6B213107-3DD2-4035-9C3B-B5B230C27CA2">Moving Calculations</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-3E1E9134-896B-4A05-8653-0204E92C9491">Cumulative Calculations</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-073AA9AA-EDF9-47EE-A8CF-5C926C12B02B">Nested Calculations</a></p>
                     </li>
                  </ul>
               </div><a id="OLAUG9483"></a><a id="OLAUG9196"></a><div class="props_rev_3"><a id="GUID-20401990-5F99-4BCE-A5B7-AB6AED6A61A8" name="GUID-20401990-5F99-4BCE-A5B7-AB6AED6A61A8"></a><h4 id="OLAUG-GUID-20401990-5F99-4BCE-A5B7-AB6AED6A61A8" class="sect4"><span class="enumeration_section">5.4.1 </span>Arithmetic Calculations
                  </h4>
                  <div>
                     <p>Basic mathematical operations enable you to perform cell-by-cell calculations on two measures, as described in <span class="q">"<a href="enhancing-your-database-analytic-content.html#GUID-1818EA31-ADCA-4A2C-BADC-FF5BAE7A8A92">Arithmetic Operators</a>"</span>.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-20401990-5F99-4BCE-A5B7-AB6AED6A61A8__GUID-B12D4C2C-31EF-4B48-A6E4-48FF3F088F71">Arithmetic Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This template defines a calculated measure for the Global Price Cube using Percent Difference:</p><pre class="oac_no_warn" dir="ltr">Percent difference between measure <span class="underline">UNIT_PRICE</span> and measure <span class="underline">UNIT_COST</span>.
</pre><p>A query against this calculated measure returns results like these. The <code class="codeph">PCT_CHG</code> column shows the percent change between <code class="codeph">PRICE</code> and <code class="codeph">COST</code>, which is calculated as <code class="codeph">PRICE-COST/COST</code>.
                        </p><pre class="oac_no_warn" dir="ltr">PRODUCT                   PRICE       COST   PCT_DIFF
-------------------- ---------- ---------- ----------
Envoy Ambassador           2892       2664        .09
Envoy Executive            2803       2644        .06
Envoy Standard             1662       1737       -.04
Sentinel Financial         1755       1658        .06
Sentinel Multimedia        1770       1813       -.02
Sentinel Standard          1552       1410         .1</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9484"></a><a id="OLAUG9485"></a><a id="OLAUG9204"></a><div class="props_rev_3"><a id="GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE" name="GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE"></a><h4 id="OLAUG-GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE" class="sect4"><span class="enumeration_section">5.4.2 </span>Index
                  </h4>
                  <div>
                     <p><a id="d16111e1086" class="indexterm-anchor"></a>An index is a mathematical operation calculated on a single measure. An index calculates the percentage difference between the values of a measure and a selected value that serves as a base number. 
                     </p>
                     <p>An index does not use a calculation template. Instead, it provides a list of dimension members for each dimension of the cube, from which you can choose one to use as an index, as shown in <a href="enhancing-your-database-analytic-content.html#GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE__CIHFAADE">Figure 5-5</a>.
                     </p>
                     <div class="figure" id="GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE__CIHFAADE">
                        <p class="titleinfigure">Figure 5-5 Calculating a Product Index</p><img width="461" src="img/calc_index.gif" alt="Description of Figure 5-5 follows" title="Description of Figure 5-5 follows" longdesc="img_text/calc_index.html"><br><a href="img_text/calc_index.html">Description of "Figure 5-5 Calculating a Product Index"</a></div>
                     <!-- class="figure" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE__GUID-5D029457-808B-4301-A35A-1F1E2B5DDDFE">Index Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This example creates an index on the Product dimension using <code class="codeph">Desktop PCs</code> as the index. 
                        </p><pre class="oac_no_warn" dir="ltr">PRODUCT                   SALES PROD_INDEX
-------------------- ---------- ----------
Desktop PCs            76682955        100
Portable PCs           18072328         24
CD/DVD                 17302122         23
Modems/Fax              5565552          7
Memory                  5347292          7
Monitors                3926632          5</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9486"></a><a id="OLAUG9199"></a><div class="props_rev_3"><a id="GUID-1B47C242-B0E7-408D-9353-645425755CD1" name="GUID-1B47C242-B0E7-408D-9353-645425755CD1"></a><h4 id="OLAUG-GUID-1B47C242-B0E7-408D-9353-645425755CD1" class="sect4"><span class="enumeration_section">5.4.3 </span>Prior and Future Periods
                  </h4>
                  <div>
                     <p><a id="d16111e1161" class="indexterm-anchor"></a><a id="d16111e1163" class="indexterm-anchor"></a><a id="d16111e1165" class="indexterm-anchor"></a><a id="d16111e1167" class="indexterm-anchor"></a>Oracle OLAP provides several calculations for prior or future time periods:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Prior Period</span>: Returns the value of a measure at an earlier time period. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Difference From Prior Period</span>: Calculates the difference between values for the current time period and an earlier period.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Percent Difference From Prior Period</span>: Calculates the percent difference between the values for the current time period and an earlier period.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Future Period</span>: Returns the value of a measure at a later time period.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Difference From Future Period</span>: Calculates the difference between the values for the current time period and a later period.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Percent Difference From Future Period</span>: Calculates the percent difference between the values for the current time period and a later period.
                           </p>
                        </li>
                     </ul>
                     <p>When creating a calculation for prior or future time periods, you choose the measure, the time dimension, the hierarchy, and the number of periods from the current period.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1B47C242-B0E7-408D-9353-645425755CD1__GUID-84C61E33-959D-4A15-BD15-3A150B7E71BC">Prior Period Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This template defines a calculated measure using Prior Period:</p><pre class="oac_no_warn" dir="ltr">Prior period for measure <span class="underline">SALES</span> in <span class="underline">TIME</span> dimension and <span class="underline">TIME.CALENDAR</span> hierarchy <span class="underline">1</span> period ago.
</pre><p>These are the results of a query against the calculated measure. The <code class="codeph">PRIOR_PERIOD</code> column shows the value of Sales for the preceding period at the same level in the Calendar hierarchy.
                        </p><pre class="oac_no_warn" dir="ltr">TIME     TIME_LEVEL                SALES PRIOR_PERIOD
-------- -------------------- ---------- ------------
2005     CALENDAR_YEAR         136986572    144290686
2006     CALENDAR_YEAR         140138317    136986572
Q1.05    CALENDAR_QUARTER       31381338     41988687
Q2.05    CALENDAR_QUARTER       37642741     31381338
Q3.05    CALENDAR_QUARTER       32617249     37642741
Q4.05    CALENDAR_QUARTER       35345244     32617249
Q1.06    CALENDAR_QUARTER       36154815     35345244
Q2.06    CALENDAR_QUARTER       36815657     36154815
Q3.06    CALENDAR_QUARTER       32318935     36815657
Q4.06    CALENDAR_QUARTER       34848911     32318935</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9487"></a><a id="OLAUG9201"></a><div class="props_rev_3"><a id="GUID-5BB1079D-0DC4-4056-9091-D7E733662301" name="GUID-5BB1079D-0DC4-4056-9091-D7E733662301"></a><h4 id="OLAUG-GUID-5BB1079D-0DC4-4056-9091-D7E733662301" class="sect4"><span class="enumeration_section">5.4.4 </span>Period to Date
                  </h4>
                  <div>
                     <p>Period-to-date functions perform a calculation over time periods with the same parent up to the current period. These functions calculate period-to-date:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d16111e1285" class="indexterm-anchor"></a><span class="bold">Period to Date</span>: Calculates the values up to the current time period.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Period to Date Period Ago</span>: Calculates the data values up to a prior time period.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Difference From Period to Date Period Ago</span>: Calculates the difference in data values up to the current time period compared to the same calculation up to a prior period.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Percent Difference From Period To Date Period Ago</span>: Calculates the percent difference in data values up to the current time period compared to the same calculation up to a prior period.
                           </p>
                        </li>
                     </ul>
                     <p>When creating a period-to-date calculation, you can choose from these aggregation methods:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Sum</p>
                        </li>
                        <li>
                           <p>Average</p>
                        </li>
                        <li>
                           <p>Maximum</p>
                        </li>
                        <li>
                           <p>Minimum</p>
                        </li>
                     </ul>
                     <p>You also choose the measure, the time dimension, and the hierarchy. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5BB1079D-0DC4-4056-9091-D7E733662301__GUID-CAA69F35-52F2-48C6-BD6E-B674A9DBE8FA">Period to Date Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This template defines a calculated measure using Period to Date.</p><pre class="oac_no_warn" dir="ltr"><span class="underline">Gregorian Year</span> to date for <span class="underline">SALES</span> in the <span class="underline">TIME</span> dimension and <span class="underline">TIME.CALENDAR</span> hierarchy. Aggregate using <span class="underline">MINIMUM</span> from the <span class="underline">beginning</span> of the period.
</pre><p>These are the results of a query against the calculated measure. The <code class="codeph">MIN_TO_DATE</code> column displays the current minimum <code class="codeph">SALES</code> value within the current level and year.
                        </p><pre class="oac_no_warn" dir="ltr">TIME     TIME_LEVEL                SALES MIN_TO_DATE
-------- -------------------- ---------- -----------
Q1.06    CALENDAR_QUARTER       36154815    36154815
Q2.06    CALENDAR_QUARTER       36815657    36154815
Q3.06    CALENDAR_QUARTER       32318935    32318935
Q4.06    CALENDAR_QUARTER       34848911    32318935
JAN-06   MONTH                  13119235    13119235
FEB-06   MONTH                  11441738    11441738
MAR-06   MONTH                  11593842    11441738
APR-06   MONTH                  11356940    11356940
MAY-06   MONTH                  13820218    11356940
JUN-06   MONTH                  11638499    11356940
JUL-06   MONTH                   9417316     9417316
AUG-06   MONTH                  11596052     9417316
SEP-06   MONTH                  11305567     9417316
OCT-06   MONTH                  11780401     9417316
NOV-06   MONTH                  10653184     9417316
DEC-06   MONTH                  12415325     9417316</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9488"></a><a id="OLAUG9198"></a><div class="props_rev_3"><a id="GUID-691280FA-7B6B-4D84-B7F8-0463D65DA4AF" name="GUID-691280FA-7B6B-4D84-B7F8-0463D65DA4AF"></a><h4 id="OLAUG-GUID-691280FA-7B6B-4D84-B7F8-0463D65DA4AF" class="sect4"><span class="enumeration_section">5.4.5 </span>Share
                  </h4>
                  <div>
                     <p><a id="d16111e1408" class="indexterm-anchor"></a>Share calculates the ratio of a measure's value for the current dimension member to the value for a related member of the same dimension. You can choose whether the related member is:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Top of hierarchy</span>: Calculates the ratio of each member to the total.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Member's parent</span>: Calculates the ratio of each member to its parent.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Member's ancestor at level</span>: Calculates the ratio of each member to its ancestor, that is, a member at a specified level higher in the hierarchy.
                           </p>
                        </li>
                     </ul>
                     <p>When creating a share calculation, you can choose the measure, dimension, and hierarchy. You also have the option of multiplying the results by 100 to get percentages instead of fractions.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-691280FA-7B6B-4D84-B7F8-0463D65DA4AF__GUID-C2D37596-DAD9-4724-869B-20FF8F12A1F6">Share Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This template defines a calculated measure using <code class="codeph">SHARE</code>:
                        </p><pre class="oac_no_warn" dir="ltr">Share of measure <span class="underline">SALES</span> in <span class="underline">PRODUCT.PRIMARY</span> hierarchy of the <span class="underline">PRODUCT</span> dimension as a ratio of <span class="underline">top of hierarchy</span>.
</pre><p>These are the results of a query against the calculated measure. The <code class="codeph">TOTAL_SHARE</code> column displays the percent share of the total for the selected products.
                        </p><pre class="oac_no_warn" dir="ltr">PRODUCT              PROD_LEVEL           SALES TOTAL_SHARE
-------------------- --------------- ---------- -----------
Total Product        TOTAL            144290686         100
Hardware             CLASS            130145388          90
Desktop PCs          FAMILY            78770152          55
Portable PCs         FAMILY            19066575          13
CD/DVD               FAMILY            16559860          11
Software/Other       CLASS             14145298          10
Accessories          FAMILY             6475353           4
Operating Systems    FAMILY             5738775           4
Memory               FAMILY             5430466           4
Modems/Fax           FAMILY             5844185           4
Monitors             FAMILY             4474150           3
Documentation        FAMILY             1931170           1</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9489"></a><a id="OLAUG9197"></a><div class="props_rev_3"><a id="GUID-DA653766-DF86-4DDE-9111-C99EDDC66BA9" name="GUID-DA653766-DF86-4DDE-9111-C99EDDC66BA9"></a><h4 id="OLAUG-GUID-DA653766-DF86-4DDE-9111-C99EDDC66BA9" class="sect4"><span class="enumeration_section">5.4.6 </span>Rank
                  </h4>
                  <div>
                     <p>Rank orders the values of a dimension based on the values of the selected measure. When defining a rank calculation, you choose the dimension, a hierarchy, and the measure.</p>
                     <p>You can choose a method for handling identical values:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Rank</span>: Assigns the same rank to identical values, so there may be fewer ranks than there are members. For example, it may return <code class="codeph">1</code>, <code class="codeph">2</code>, <code class="codeph">3</code>, <code class="codeph">3</code>, <code class="codeph">4</code> for a series of five dimension members.
                           </p>
                        </li>
                        <li>
                           <p><a id="d16111e1543" class="indexterm-anchor"></a><span class="bold">Dense Rank</span>: Assigns the same minimum rank to identical values. For example, it may return <code class="codeph">1</code>, <code class="codeph">2</code>, <code class="codeph">3</code>, <code class="codeph">3</code>, <code class="codeph">5</code> for a series of five dimension members. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Average Rank</span>: Assigns the same average rank to identical values. For example, it may return <code class="codeph">1</code>, <code class="codeph">2</code>, <code class="codeph">3.5</code>, <code class="codeph">3.5</code>, <code class="codeph">5</code> for a series of five dimension members.
                           </p>
                        </li>
                     </ul>
                     <p>You can also choose the group in which the dimension members are ranked:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Member's level</span>: Ranks members at the same level.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Member's parent</span>: Ranks members with the same parent.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Member's ancestor at level</span>: Ranks members with the same ancestor at a specified level higher in the hierarchy.
                           </p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-DA653766-DF86-4DDE-9111-C99EDDC66BA9__GUID-859BDAF0-AF60-489E-865E-DD3D8B8A84B3">Rank Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This template defines a calculated measure using Rank:</p><pre class="oac_no_warn" dir="ltr">Rank members of the <span class="underline">PRODUCT</span> dimension and <span class="underline">PRODUCT.PRIMARY</span> hierarchy based on measure <span class="underline">SALES</span>. Calculate rank using <span class="underline">RANK</span> method with <span class="underline">member's parent</span> in order <span class="underline">lowest to highest</span>. Rank NA (null) values <span class="underline">nulls last</span>.
</pre><p>These are the results of a query against the calculated measure in which the products are ordered by <code class="codeph">RANK</code>:
                        </p><pre class="oac_no_warn" dir="ltr">PRODUCT                   SALES       RANK
-------------------- ---------- ----------
Monitors                4474150          1
Memory                  5430466          2
Modems/Fax              5844185          3
CD/DVD                 16559860          4
Portable PCs           19066575          5
Desktop PCs            78770152          6</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9490"></a><a id="OLAUG9200"></a><div class="props_rev_3"><a id="GUID-E3443AB3-012E-4CCC-B409-C54396A141C2" name="GUID-E3443AB3-012E-4CCC-B409-C54396A141C2"></a><h4 id="OLAUG-GUID-E3443AB3-012E-4CCC-B409-C54396A141C2" class="sect4"><span class="enumeration_section">5.4.7 </span>Parallel Period
                  </h4>
                  <div>
                     <p><a id="d16111e1690" class="indexterm-anchor"></a>Parallel periods are at the same level as the current time period, but have different parents in an earlier period. For example, you may want to compare current sales with sales for the prior year at the quarter and month levels.
                     </p>
                     <p>Oracle OLAP provides several functions for parallel periods:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Parallel Period</span>: Calculates the value of the parallel period.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Difference From Parallel Period</span>: Calculates the difference in values between the current period and the parallel period. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Percent Difference From Parallel Period</span>: Calculates the percent difference in values between the current period and the parallel period.
                           </p>
                        </li>
                     </ul>
                     <p>To identify the parallel period, you specify a level and the number of periods before the current period. You can also decide what happens when two periods do not exactly match, such as comparing daily sales for February (28 days) with January (31 days).</p>
                     <p>You also choose the measure, the time dimension, and the hierarchy.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E3443AB3-012E-4CCC-B409-C54396A141C2__GUID-F75E1681-AE4E-440E-80A2-76BBE88D0979">Parallel Period Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This template defines a calculated measure using Parallel Period.</p><pre class="oac_no_warn" dir="ltr"><span class="underline">Parallel period</span> for <span class="underline">SALES</span> in the <span class="underline">TIME</span> dimension and <span class="underline">TIME.CALENDAR</span> hierarchy <span class="underline">1</span> <span class="underline">TIME.CALENDAR.QUARTER</span> ago based on position from <span class="underline">beginning to ending</span> of period.
</pre><p>These are the results of a query against the calculated measure, which lists the months for two calendar quarters. The parallel month has the same position within the previous quarter. The prior period for <code class="codeph">JUL-06</code> is <code class="codeph">APR-06,</code> for <code class="codeph">AUG-06</code> is <code class="codeph">MAY-06</code>, and for <code class="codeph">SEP-06</code> is <code class="codeph">JUN-06</code>.
                        </p><pre class="oac_no_warn" dir="ltr">TIME     PARENT          SALES   LAST_QTR
-------- ---------- ---------- ----------
APR-06   CY2006.Q2    11356940   13119235
MAY-06   CY2006.Q2    13820218   11441738
JUN-06   CY2006.Q2    11638499   11593842
JUL-06   CY2006.Q3     9417316   11356940
AUG-06   CY2006.Q3    11596052   13820218
SEP-06   CY2006.Q3    11305567   11638499</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9491"></a><a id="OLAUG9203"></a><div class="props_rev_3"><a id="GUID-6B213107-3DD2-4035-9C3B-B5B230C27CA2" name="GUID-6B213107-3DD2-4035-9C3B-B5B230C27CA2"></a><h4 id="OLAUG-GUID-6B213107-3DD2-4035-9C3B-B5B230C27CA2" class="sect4"><span class="enumeration_section">5.4.8 </span>Moving Calculations
                  </h4>
                  <div>
                     <p><a id="d16111e1818" class="indexterm-anchor"></a><a id="d16111e1820" class="indexterm-anchor"></a><a id="d16111e1824" class="indexterm-anchor"></a><a id="d16111e1828" class="indexterm-anchor"></a><a id="d16111e1832" class="indexterm-anchor"></a>Moving calculations are performed over the time periods surrounding the current period. Oracle OLAP provides several aggregation methods for moving calculations:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Moving Average</span>: Calculates the average value for a measure over a fixed number of time periods.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Moving Maximum</span>: Calculates the maximum value for a measure over a fixed number of time periods.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Moving Minimum</span>: Calculates the minimum value for a measure over a fixed number of time periods.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Moving Total</span>: Returns the total value for a measure over a fixed number of time periods.
                           </p>
                        </li>
                     </ul>
                     <p>You can choose the measure, the time dimension, and the hierarchy. You can also select the range, as described in <span class="q">"<a href="enhancing-your-database-analytic-content.html#GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1">Choosing a Range of Time Periods</a>"</span>, and the number of time periods before and after the current period to include in the calculation.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6B213107-3DD2-4035-9C3B-B5B230C27CA2__GUID-2A681F46-0D19-47A3-A6B4-4879FCB8C33F">Moving Calculation Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This template defines a calculated measure using Moving Minimum.</p><pre class="oac_no_warn" dir="ltr">Moving minimum of <span class="underline">SALES</span> in the <span class="underline">TIME</span> dimension and <span class="underline">TIME.CALENDAR</span> hierarchy. Include <span class="underline">1</span> preceding and <span class="underline">1</span> following members within <span class="underline">level</span>.
</pre><p>These are the results of a query against the calculated measure, which displays values for the descendants of calendar year 2004. Each value of Minimum Sales is the smallest among the current value and the values immediately before and after it. The calculation is performed over all members of a level in the cube. </p><pre class="oac_no_warn" dir="ltr">TIME     TIME_LEVEL                SALES  MIN_SALES
-------- -------------------- ---------- ----------
Q1.04    CALENDAR_QUARTER       32977874   32977874
Q2.04    CALENDAR_QUARTER       35797921   32977874
Q3.04    CALENDAR_QUARTER       33526203   33526203
Q4.04    CALENDAR_QUARTER       41988687   31381338
JAN-04   MONTH                  11477898   10982016
FEB-04   MONTH                  10982016   10517960
MAR-04   MONTH                  10517960   10517960
APR-04   MONTH                  11032057   10517960
MAY-04   MONTH                  11432616   11032057
JUN-04   MONTH                  13333248   11432616
JUL-04   MONTH                  12070352   11108893
AUG-04   MONTH                  11108893   10346958
SEP-04   MONTH                  10346958   10346958
OCT-04   MONTH                  14358605   10346958
NOV-04   MONTH                  12757560   12757560
DEC-04   MONTH                  14872522   12093518</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9492"></a><a id="OLAUG9202"></a><div class="props_rev_3"><a id="GUID-3E1E9134-896B-4A05-8653-0204E92C9491" name="GUID-3E1E9134-896B-4A05-8653-0204E92C9491"></a><h4 id="OLAUG-GUID-3E1E9134-896B-4A05-8653-0204E92C9491" class="sect4"><span class="enumeration_section">5.4.9 </span>Cumulative Calculations
                  </h4>
                  <div>
                     <p><a id="d16111e1948" class="indexterm-anchor"></a><a id="d16111e1950" class="indexterm-anchor"></a><a id="d16111e1954" class="indexterm-anchor"></a><a id="d16111e1958" class="indexterm-anchor"></a><a id="d16111e1962" class="indexterm-anchor"></a>Cumulative calculations start with the first time period and calculate up to the current member, or start with the last time period and calculate back to the current member. Oracle OLAP provides several aggregation methods for cumulative calculations:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Cumulative Average</span>: Calculates a running average across time periods.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Cumulative Maximum</span>: Calculates the maximum value across time periods.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Cumulative Minimum</span>: Calculates the minimum value across time periods. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Cumulative Total</span>: Calculates a running total across time periods.
                           </p>
                        </li>
                     </ul>
                     <p>You can choose the measure, the time dimension, and the hierarchy. You can also select the range, as described in <span class="q">"<a href="enhancing-your-database-analytic-content.html#GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1">Choosing a Range of Time Periods</a>"</span>, and whether you want to start the calculation with the first period and calculate forward, or start with the last period and calculate back.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3E1E9134-896B-4A05-8653-0204E92C9491__GUID-B1FC47D7-5432-4927-AA08-44310AC95396">Cumulative Calculation Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This template defines a calculated measure using Cumulative Minimum.</p><pre class="oac_no_warn" dir="ltr">Cumulative minimum of <span class="underline">SALES</span> in the <span class="underline">TIME</span> dimension and <span class="underline">TIME.CALENDAR</span> hierarchy within <span class="underline">ancestor at level</span> <span class="underline">TIME.CALENDAR_YEAR</span>. Total from <span class="underline">beginning to current</span> member.
</pre><p>These are the results of a query against the calculated measure, which displays values for the descendants of calendar year 2004. The minimum value for quarters begins with Q1-04 and ends with Q4-04, and for months begins with Jan-04 and ends with Dec-04.</p><pre class="oac_no_warn" dir="ltr">TIME     TIME_LEVEL                SALES  MIN_SALES
-------- -------------------- ---------- ----------
Q1.04    CALENDAR_QUARTER       32977874   32977874
Q2.04    CALENDAR_QUARTER       35797921   32977874
Q3.04    CALENDAR_QUARTER       33526203   32977874
Q4.04    CALENDAR_QUARTER       41988687   32977874
JAN-04   MONTH                  11477898   11477898
FEB-04   MONTH                  10982016   10982016
MAR-04   MONTH                  10517960   10517960
APR-04   MONTH                  11032057   10517960
MAY-04   MONTH                  11432616   10517960
JUN-04   MONTH                  13333248   10517960
JUL-04   MONTH                  12070352   10517960
AUG-04   MONTH                  11108893   10517960
SEP-04   MONTH                  10346958   10346958
OCT-04   MONTH                  14358605   10346958
NOV-04   MONTH                  12757560   10346958
DEC-04   MONTH                  14872522   10346958</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9493"></a><a id="OLAUG9205"></a><div class="props_rev_3"><a id="GUID-073AA9AA-EDF9-47EE-A8CF-5C926C12B02B" name="GUID-073AA9AA-EDF9-47EE-A8CF-5C926C12B02B"></a><h4 id="OLAUG-GUID-073AA9AA-EDF9-47EE-A8CF-5C926C12B02B" class="sect4"><span class="enumeration_section">5.4.10 </span>Nested Calculations
                  </h4>
                  <div>
                     <p><a id="d16111e2077" class="indexterm-anchor"></a><a id="d16111e2081" class="indexterm-anchor"></a>You can extend the variety of functions available through the templates by using a calculated measure as the basis for another calculated measure. 
                     </p>
                     <p>For example, Analytic Workspace Manager has templates for Moving Average and for Difference From Prior Period. You can create a calculated measure that calculates a moving average, then calculate the difference between the current and the previous moving averages.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-073AA9AA-EDF9-47EE-A8CF-5C926C12B02B__GUID-FD7C8F32-4124-4584-9BF9-CDE3339C856D">Nested Calculations Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This template creates a moving average for Units named <code class="codeph">UNITS_MOVING_AVG</code>:
                        </p><pre class="oac_no_warn" dir="ltr">Moving average of <code class="codeph">UNITS</code> in the TIME dimension and <code class="codeph">TIME.CALENDAR</code> hierarchy. Include <code class="codeph">1</code> preceding and <code class="codeph">1</code> following members within <code class="codeph">level</code>.
</pre><p>The next template creates a Difference From Prior Period calculation from <code class="codeph">UNITS_MOVING_AVG</code>. 
                        </p><pre class="oac_no_warn" dir="ltr">Difference from prior period for <span class="underline">UNITS_MOVING_AVG</span> in TIME dimension and <span class="underline">TIME.CALENDAR</span> hierarchy <span class="underline">1</span> period ago.
</pre><p>These are the results of a query against the Units measure and the two calculated measures. The <code class="codeph">MOVING_AVG</code> column shows the moving average, and the <code class="codeph">DIFF</code> column shows the difference between the current moving average and the prior period's.
                        </p><pre class="oac_no_warn" dir="ltr">TIME     TIME_LEVEL                UNITS MOVING_AVG       DIFF
-------- -------------------- ---------- ---------- ----------
JAN-06   MONTH                     47776      48520         66
FEB-06   MONTH                     47695      48940        419
MAR-06   MONTH                     51348      48683       -257
APR-06   MONTH                     47005      50387       1705
MAY-06   MONTH                     52809      48411      -1976
JUN-06   MONTH                     45419      48872        461
JUL-06   MONTH                     48388      47546      -1326
AUG-06   MONTH                     48830      47857        312
SEP-06   MONTH                     46354      47532       -326
OCT-06   MONTH                     47411      46869       -663
NOV-06   MONTH                     46842      49768       2899
DEC-06   MONTH                     55052      50947       1179
2006     CALENDAR_YEAR            584929     575324      -4032
Q1.06    CALENDAR_QUARTER         146819     145705       2093
Q2.06    CALENDAR_QUARTER         145233     145208       -497
Q3.06    CALENDAR_QUARTER         143572     146037        829
Q4.06    CALENDAR_QUARTER         149305     146439        402</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OLAUG9206"></a><div class="props_rev_3"><a id="GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483" name="GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483"></a><h3 id="OLAUG-GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483" class="sect3"><span class="enumeration_section">5.5 </span>Creating User-Defined Expressions
               </h3>
               <div>
                  <p><a id="d16111e2188" class="indexterm-anchor"></a><a id="d16111e2192" class="indexterm-anchor"></a>Among the calculation types is a user-defined expression. Typically, you create calculations using the OLAP expression syntax, which includes the analytic functions, arithmetic operators, and single-row functions described in this chapter. The OLAP syntax is an extension of the SQL syntax. If you have used SQL analytic functions or single-row functions, then this syntax is familiar to you.
                  </p>
                  <div class="infoboxnotealso" id="GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483__GUID-4D85B813-985C-4408-BBB7-BE32DECD517B">
                     <p class="notep1">See Also:</p>
                     <p>For user-defined OLAP DML expressions, see <span class="q">"<a href="enhancing-your-database-analytic-content.html#GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B">Creating Calculated Measures Using the OLAP DML</a>"</span>.
                     </p>
                  </div>
               </div><a id="OLAUG9494"></a><div class="props_rev_3"><a id="GUID-674F4CD2-EB64-4BDF-9D57-30330D9A6873" name="GUID-674F4CD2-EB64-4BDF-9D57-30330D9A6873"></a><h4 id="OLAUG-GUID-674F4CD2-EB64-4BDF-9D57-30330D9A6873" class="sect4"><span class="enumeration_section">5.5.1 </span>Using the OLAP Expression Syntax
                  </h4>
                  <div>
                     <div class="section">
                        <p>The easiest way to formulate an expression in the OLAP expression syntax is to let Analytic Workspace Manager do the work for you. You can use the templates to create a similar calculation, and cut-and-paste the syntax as the basis for a new calculation.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-674F4CD2-EB64-4BDF-9D57-30330D9A6873__GUID-56E7D594-6209-4709-89BE-2CC6576CCE0E">To create a user-defined expression in the OLAP expression syntax:</p>
                        <ol>
                           <li>
                              <p>Open the Create Calculated Measure dialog box.</p>
                           </li>
                           <li>
                              <p>Select the calculation type that most closely matches the one you want to define.</p>
                           </li>
                           <li>
                              <p>Modify the template as desired.</p>
                           </li>
                           <li>
                              <p>Cut-and-paste the calculation from the Calculation box into a text editor.</p>
                           </li>
                           <li>
                              <p>Repeat these steps if your calculation uses two or more functions.</p>
                           </li>
                           <li>
                              <p>Modify the calculation as desired in the text editor. You can combine numeric operators, analytic functions, and single-row functions in a single calculation.</p>
                           </li>
                           <li>
                              <p>From the Calculation Types list, select <span class="bold">OLAP Expression Syntax</span>.
                              </p>
                           </li>
                           <li>
                              <p>Cut-and-paste the calculation from the text editor into the Calculation box.</p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Create</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-674F4CD2-EB64-4BDF-9D57-30330D9A6873__GUID-B34C873A-4301-4E40-9BE9-EA793E70410B">
                           <p class="notep1">See Also:</p>
                           <p>Analytic Workspace Manager Help for detailed information about the OLAP expression syntax.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9495"></a><div class="props_rev_3"><a id="GUID-406C2EB3-5B23-44B3-8501-6794815A8777" name="GUID-406C2EB3-5B23-44B3-8501-6794815A8777"></a><h4 id="OLAUG-GUID-406C2EB3-5B23-44B3-8501-6794815A8777" class="sect4"><span class="enumeration_section">5.5.2 </span>Expression Syntax Example Using an Arithmetic Operator
                  </h4>
                  <div>
                     <p>This template for Multiplication generates a calculation using Units Sold and Unit Cost.</p><pre class="oac_no_warn" dir="ltr">Multiply measure <span class="underline">UNITS</span> by measure <span class="underline">UNIT_COST</span>.
</pre><p>The template generates this calculation using the multiplication operator (*). It appears in the Calculation box. Notice that UNITS is in the Units Cube and UNIT_COST is in the Price Cube.</p><pre class="oac_no_warn" dir="ltr">UNITS_CUBE.UNITS * PRICE_CUBE.UNIT_COST
</pre><p>The syntax of this calculation is so simple that you only need the template to obtain the qualified name of the measure.</p>
                     <p>Following is a free-form calculation that calculates a 2% increase in units sold:</p><pre class="oac_no_warn" dir="ltr">UNITS_CUBE.UNITS * 1.02
</pre><p>These are the results of a query against this calculated measure:</p><pre class="oac_no_warn" dir="ltr">PRODUCT                   UNITS     TARGET
-------------------- ---------- ----------
Envoy Ambassador           2116       2158
Envoy Executive            2481       2531
Envoy Standard             3300       3366
Sentinel Financial        30513      31123
Sentinel Multimedia        7948       8107
Sentinel Standard          7302       7448</pre></div>
               </div><a id="OLAUG9496"></a><div class="props_rev_3"><a id="GUID-04C009C1-8E72-43C7-83E7-B194EEC2BE84" name="GUID-04C009C1-8E72-43C7-83E7-B194EEC2BE84"></a><h4 id="OLAUG-GUID-04C009C1-8E72-43C7-83E7-B194EEC2BE84" class="sect4"><span class="enumeration_section">5.5.3 </span>Free-Form Calculation Example Using an Analytic Function
                  </h4>
                  <div>
                     <p>This template for Cumulative Average generates a calculation for the average number of units sold:</p><pre class="oac_no_warn" dir="ltr">Cumulative average of <span class="underline">UNITS</span> in the <span class="underline">TIME</span> dimension and <span class="underline">TIME.CALENDAR</span> hierarchy within <span class="underline">level</span>. Total from <span class="underline">beginning to following</span> member.
</pre><p>The template generates this calculation using the <code class="codeph">AVG</code> function.
                     </p><pre class="oac_no_warn" dir="ltr">AVG(UNITS_CUBE.UNITS) OVER HIERARCHY (TIME.CALENDAR BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING WITHIN LEVEL)
</pre><p>Following is a free-form calculation that computes the percent difference between current units sold and the cumulative average. It uses the <code class="codeph">AVG</code> function and the subtraction (<code class="codeph">-</code>), division (<code class="codeph">/</code>) and multiplication (<code class="codeph">*</code>) operators.
                     </p><pre class="oac_no_warn" dir="ltr">((UNITS_CUBE.UNITS - AVG(UNITS_CUBE.UNITS) OVER HIERARCHY (TIME.CALENDAR BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING WITHIN LEVEL)) / AVG(UNITS_CUBE.UNITS) OVER HIERARCHY (TIME.CALENDAR BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING WITHIN LEVEL)) * 100
</pre><p>These are the results of a query against this calculated measure.</p><pre class="oac_no_warn" dir="ltr">TIME          UNITS    CUM_AVG   PCT_DIFF
-------- ---------- ---------- ----------
Q1.06        146819     107965         36
Q2.06        145233     109062         33
Q3.06        143572     110048         30
Q4.06        149305     111138         34
</pre><p>You could also create this calculation using templates:</p>
                     <ol>
                        <li>
                           <p>Calculate the cumulative average of <code class="codeph">UNITS</code> with the Cumulative Average template.
                           </p>
                        </li>
                        <li>
                           <p>Calculate the percent difference between current <code class="codeph">UNITS</code> and the cumulative average with the Percent Difference template.
                           </p>
                        </li>
                     </ol>
                  </div>
               </div><a id="OLAUG9498"></a><a id="OLAUG9497"></a><div class="props_rev_3"><a id="GUID-BF8BF273-2C82-4FF0-9BA4-DDB0EAE8DA82" name="GUID-BF8BF273-2C82-4FF0-9BA4-DDB0EAE8DA82"></a><h4 id="OLAUG-GUID-BF8BF273-2C82-4FF0-9BA4-DDB0EAE8DA82" class="sect4"><span class="enumeration_section">5.5.4 </span>Expression Syntax Analytic Functions
                  </h4>
                  <div>
                     <div class="section">
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-BF8BF273-2C82-4FF0-9BA4-DDB0EAE8DA82__CIHBEFFH" title="Descriptions of OLAP analytic functions">Table 5-1</a> describes the <a id="d16111e2537" class="indexterm-anchor"></a>analytic functions that you can use to create free-form calculations using the OLAP expression syntax. For the syntax of these functions, refer to Analytic Workspace Manager Help.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BF8BF273-2C82-4FF0-9BA4-DDB0EAE8DA82__CIHBEFFH">
                        <p class="titleintable">Table 5-1 OLAP Expression Syntax Analytic Functions</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="OLAP Expression Syntax Analytic Functions" summary="Descriptions of OLAP analytic functions" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d16111e2550">Function</th>
                                 <th align="left" valign="bottom" width="69%" id="d16111e2553">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2558" headers="d16111e2550 ">
                                    <p><a id="d16111e2560" class="indexterm-anchor"></a><code class="codeph">AVERAGE_RANK</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2558 d16111e2553 ">
                                    <p>Orders the members of a dimension based on the values of an expression. The function returns the sequence numbers of the dimension members, and assigns the same average rank to identical values.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2568" headers="d16111e2550 ">
                                    <p><code class="codeph">AVG</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2568 d16111e2553 ">
                                    <p>Returns the average of a selection of values calculated over time. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2576" headers="d16111e2550 ">
                                    <p><code class="codeph">COUNT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2576 d16111e2553 ">
                                    <p>Tallies the number of data values identified by a selection of dimension members. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2584" headers="d16111e2550 ">
                                    <p><code class="codeph">DENSE_RANK</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2584 d16111e2553 ">
                                    <p>Orders dimension members based on the values of an expression. The function returns the sequence numbers of the dimension members, and assigns the same minimum rank to identical values.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2592" headers="d16111e2550 ">
                                    <p><code class="codeph">HIER_ANCESTOR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2592 d16111e2553 ">
                                    <p>Returns an ancestor at a particular level of a hierarchy for either all members in the hierarchy or a particular member.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2600" headers="d16111e2550 ">
                                    <p><code class="codeph">HIER_CHILD_COUNT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2600 d16111e2553 ">
                                    <p>Returns the number of children of either all dimension members in a hierarchy or a particular member.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2608" headers="d16111e2550 ">
                                    <p><code class="codeph">HIER_DEPTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2608 d16111e2553 ">
                                    <p>Returns a number representing the level depth of either all members of a hierarchy or a particular member, where 0 is the top level.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2616" headers="d16111e2550 ">
                                    <p><code class="codeph">HIER_LEVEL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2616 d16111e2553 ">
                                    <p>Returns the level of either all members of a hierarchy or a particular member.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2624" headers="d16111e2550 ">
                                    <p><a id="d16111e2626" class="indexterm-anchor"></a><code class="codeph">HIER_PARENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2624 d16111e2553 ">
                                    <p>Returns the parent of either all dimension members in a hierarchy or a particular member. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2634" headers="d16111e2550 ">
                                    <p><code class="codeph">HIER_TOP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2634 d16111e2553 ">
                                    <p>Returns the topmost ancestor of either all members of a hierarchy or a particular member.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2642" headers="d16111e2550 ">
                                    <p><code class="codeph">LAG</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2642 d16111e2553 ">
                                    <p>Returns the value of an expression at a specified number of time periods before the current period. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2651" headers="d16111e2550 ">
                                    <p><code class="codeph">LAG_VARIANCE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2651 d16111e2553 ">
                                    <p>Returns the difference between values for the current time period and a prior period.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2659" headers="d16111e2550 ">
                                    <p><code class="codeph">LAG_VARIANCE_PERCENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2659 d16111e2553 ">
                                    <p>Returns the percent different between values for the current time period and a prior period.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2667" headers="d16111e2550 ">
                                    <p><code class="codeph">LEAD</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2667 d16111e2553 ">
                                    <p>Returns the value of an expression at a specified number of time periods after the current period. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2675" headers="d16111e2550 ">
                                    <p><code class="codeph">LEAD_VARIANCE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2675 d16111e2553 ">
                                    <p>Returns the difference between values for the current time period and a future period.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2683" headers="d16111e2550 ">
                                    <p><code class="codeph">LEAD_VARIANCE_PERCENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2683 d16111e2553 ">
                                    <p>Returns the percent different between values for the current time period and a future period.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2691" headers="d16111e2550 ">
                                    <p><code class="codeph">MAX</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2691 d16111e2553 ">
                                    <p>Returns the largest of a selection of data values calculated over a particular dimension. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2699" headers="d16111e2550 ">
                                    <p><code class="codeph">MIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2699 d16111e2553 ">
                                    <p>Returns the smallest of a selection of data values calculated over a particular dimension. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2707" headers="d16111e2550 ">
                                    <p><code class="codeph">OLAP_DML_EXPRESSION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2707 d16111e2553 ">
                                    <p>Executes an expression in the OLAP DML language. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2715" headers="d16111e2550 ">
                                    <p><code class="codeph">RANK</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2715 d16111e2553 ">
                                    <p>Orders the members of a dimension based on the values of an expression. The function returns the sequence numbers of the dimension members, and assigns the same rank to identical values. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2723" headers="d16111e2550 ">
                                    <p><code class="codeph">ROW_NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2723 d16111e2553 ">
                                    <p>Orders the members of a dimension based on the values of an expression. The function returns the sequence numbers of the dimension members, and assigns a unique and arbitrary rank to identical values. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2731" headers="d16111e2550 ">
                                    <p><code class="codeph">SHARE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2731 d16111e2553 ">
                                    <p>Calculates the ratio of an expression's value for the current dimension member to the value for a related member of the same dimension. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2740" headers="d16111e2550 ">
                                    <p><code class="codeph">SUM</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2740 d16111e2553 ">
                                    <p>Returns the total of a selection of values calculated over a particular dimension. </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div><a id="OLAUG9499"></a><div class="props_rev_3"><a id="GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B" name="GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B"></a><h3 id="OLAUG-GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B" class="sect3"><span class="enumeration_section">5.6 </span>Creating Calculated Measures Using the OLAP DML
               </h3>
               <div>
                  <p>The most advanced business calculations, such as forecasts, models, and allocations, are available through the <a href="glossary.html#GUID-03C3266C-AFD7-47A9-898C-E5F382311365"><span class="xrefglossterm">OLAP DML</span></a>. The OLAP DML is the internal data definition and manipulation language for analytic workspaces. Its primary data structures are dimensions, variables, formulas, and valuesets. These dimensional objects in an analytic workspace support the high-level dimensional objects in the database, such as cubes, cube dimensions, measures, attributes, and hierarchies.
                  </p>
                  <p>Several commands in the OLAP DML support dimensional database objects such as cubes, levels, and hierarchies. You can use these commands, as well as the other functions, operators, and so forth in the language.</p>
                  <div class="infoboxnotealso" id="GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B__GUID-EA1409F8-65F6-403F-8190-45373A01E6DE">
                     <p class="notep1">See Also:</p>
                     <p>"Cube-Aware OLAP DML Statements" in the <span class="italic">Oracle OLAP DML Reference</span></p>
                  </div>
                  <p>The OLAP DML is a mature language that was developed specifically for creating and managing dimensional objects and for manipulating dimensional data. Although programming in the OLAP DML requires significant skill, the language offers more power and flexibility than any other language.</p>
               </div><a id="OLAUG9500"></a><div class="props_rev_3"><a id="GUID-B29B7D42-4626-41CA-8105-AA29ED69BC3A" name="GUID-B29B7D42-4626-41CA-8105-AA29ED69BC3A"></a><h4 id="OLAUG-GUID-B29B7D42-4626-41CA-8105-AA29ED69BC3A" class="sect4"><span class="enumeration_section">5.6.1 </span>Selecting an OLAP DML Calculation Type
                  </h4>
                  <div>
                     <div class="section">
                        <p>Analytic Workspace Manager supports two types of user-defined expressions using the OLAP DML:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">OLAP DML Expression</span>: Calculates an OLAP DML expression. Choose this calculation type to execute an existing program, a built-in function, or a single expression. The expression is stored as the EQ statement of a formula in the analytic workspace.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">OLAP DML Function</span>: Executes an OLAP DML program entered in the Program Body field that returns values. Choose this calculation type to develop a new program in the OLAP DML. The name of the program is stored in the EQ statement of a formula in the analytic workspace. 
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B29B7D42-4626-41CA-8105-AA29ED69BC3A__GUID-A6134767-0E8C-4CDF-B31C-8E2C5D990529">To create an OLAP DML Expression:</p>
                        <ol>
                           <li>
                              <p>Open the Create Calculated Measure dialog box.</p>
                           </li>
                           <li>
                              <p>From the Calculation Types list, select <span class="bold">OLAP DML Expression</span>.
                              </p>
                           </li>
                           <li>
                              <p>For Data Type, select the data type of the return value.</p>
                           </li>
                           <li>
                              <p>Enter the expression in the OLAP DML field.</p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Compile Expression</span> to check for syntax errors and to save a compiled version of the expression.
                              </p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Create</span> to create the calculated measure.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B29B7D42-4626-41CA-8105-AA29ED69BC3A__GUID-7198CE17-9E1C-40DB-9F3C-E771514EB99F">To create an OLAP DML Function:</p>
                        <ol>
                           <li>
                              <p>Open the Create Calculated Measure dialog box.</p>
                           </li>
                           <li>
                              <p>From the Calculation Types list, select <span class="bold">OLAP DML Function.</span></p>
                           </li>
                           <li>
                              <p>For Data Type, select the data type of the return value.</p>
                           </li>
                           <li>
                              <p>Enter a name for the function.</p>
                           </li>
                           <li>
                              <p>Enter the program in the Program Body field. Omit the <code class="codeph">DEFINE</code>, <code class="codeph">PROGRAM</code>, and <code class="codeph">END</code> commands, because they are generated automatically.
                              </p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Compile Expression</span> to check for syntax errors and to save a compiled version of the program.
                              </p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Create</span> to create the calculated measure.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9502"></a><a id="OLAUG9501"></a><div class="props_rev_3"><a id="GUID-341BC68E-FE5D-4DF3-8058-35A8DA60D123" name="GUID-341BC68E-FE5D-4DF3-8058-35A8DA60D123"></a><h4 id="OLAUG-GUID-341BC68E-FE5D-4DF3-8058-35A8DA60D123" class="sect4"><span class="enumeration_section">5.6.2 </span>OLAP DML Expression Examples
                  </h4>
                  <div>
                     <p>The OLAP DML has many built-in functions. This example creates a calculated measure using the <code class="codeph">RANDOM</code> function. <a href="enhancing-your-database-analytic-content.html#GUID-341BC68E-FE5D-4DF3-8058-35A8DA60D123__BABECJDJ">Figure 5-6</a> shows the definition of this simple calculation. The calculated measure generates values in the default range of 0 to 1.
                     </p>
                     <div class="figure" id="GUID-341BC68E-FE5D-4DF3-8058-35A8DA60D123__BABECJDJ">
                        <p class="titleinfigure">Figure 5-6 Using an OLAP DML Expression</p><img width="193" src="img/dml_express.gif" alt="Description of Figure 5-6 follows" title="Description of Figure 5-6 follows" longdesc="img_text/dml_express.html"><br><a href="img_text/dml_express.html">Description of "Figure 5-6 Using an OLAP DML Expression"</a></div>
                     <!-- class="figure" -->
                     <p>The next example uses an arithmetic operator to calculate a 2% increase in units sold. This example of the OLAP DML is identical to the example in <span class="q">"<a href="enhancing-your-database-analytic-content.html#GUID-406C2EB3-5B23-44B3-8501-6794815A8777">Expression Syntax Example Using an Arithmetic Operator</a>"</span>. However, note the difference in naming convention for the measure.
                     </p><pre class="oac_no_warn" dir="ltr">units_cube_units * 1.02
</pre><p>These are the results of a query against the two calculated measures created as OLAP DML expressions:</p><pre class="oac_no_warn" dir="ltr">PRODUCT                   UNITS     TARGET     RANDOM
-------------------- ---------- ---------- ----------
Envoy Ambassador           2116       2158      .6467
Envoy Executive            2481       2531      .0773
Envoy Standard             3300       3366      .2349
Sentinel Financial        30513      31123      .6027
Sentinel Multimedia        7948       8107      .6494
Sentinel Standard          7302       7448      .5912</pre></div>
               </div><a id="OLAUG9505"></a><a id="OLAUG9504"></a><a id="OLAUG9503"></a><div class="props_rev_3"><a id="GUID-3C854ACC-02C0-40FC-B06D-F90FC85F3175" name="GUID-3C854ACC-02C0-40FC-B06D-F90FC85F3175"></a><h4 id="OLAUG-GUID-3C854ACC-02C0-40FC-B06D-F90FC85F3175" class="sect4"><span class="enumeration_section">5.6.3 </span>OLAP DML Function Example
                  </h4>
                  <div>
                     <p>An OLAP DML program that returns a value is also function.</p>
                     <div class="example" id="GUID-3C854ACC-02C0-40FC-B06D-F90FC85F3175__GUID-DD156CEC-3CA9-4955-ACB3-9FE47C51D680">
                        <p class="titleinexample">Example 5-1 OLAP DML Function</p>
                        <p> The program in this example returns the value <code class="codeph">ALERT</code> when current sales are less than the previous year's. The actual calculation is performed by another calculated measure, UNITS_CUBE_SALES_PCT_CHG_PY, which is the percent change from the prior year for Sales. If sales are greater, then the program returns <code class="codeph">OKAY</code>.
                        </p><pre class="oac_no_warn" dir="ltr">VARIABLE _alert   TEXT
VARIABLE _product NUMBER
 
TRAP ON error
 
_product = product + 0
 
TEMPSTAT product
DO
  LIMIT product TO CHILDREN USING product_parentrel _product
  LIMIT product KEEP UNITS_CUBE_SALES_PCT_CHG_PY LT 0
 
  IF STATLEN(product) GT 0
    THEN _alert = 'ALERT'
    ELSE _alert = 'OKAY'
 
DOEND
 
RETURN _alert
 
error:
RETURN 'ERROR'
</pre><p>This figure shows the definition of the program as a calculated measure.</p>
                        <div class="figure" id="GUID-3C854ACC-02C0-40FC-B06D-F90FC85F3175__BABDHIDB">
                           <p class="titleinfigure">Figure 5-7 Using an OLAP DML Function</p><img src="img/dml_function.gif" width="459" alt="Description of Figure 5-7 follows" title="Description of Figure 5-7 follows" longdesc="img_text/dml_function.html"><br><a href="img_text/dml_function.html">Description of "Figure 5-7 Using an OLAP DML Function"</a></div>
                        <!-- class="figure" -->
                        <p>These are the results of a query against this calculated measure:</p><pre class="oac_no_warn" dir="ltr">CHANNEL         TIME         PCTCHG STATUS
--------------- -------- ---------- ------
Catalog         Q1.06            -1 ALERT
Catalog         Q2.06            -1 ALERT
Catalog         Q3.06            -3 ALERT
Catalog         Q4.06            -7 ALERT
Direct Sales    Q1.06            -3 ALERT
Direct Sales    Q2.06            -1 ALERT
Direct Sales    Q3.06            10 OKAY
Direct Sales    Q4.06            -4 ALERT
Internet        Q1.06            29 OKAY
Internet        Q2.06             3 ALERT
Internet        Q3.06             0 ALERT
Internet        Q4.06            16 OKAY</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
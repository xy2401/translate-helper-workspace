<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用分析内容增强数据库</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="olap-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T13:54:33-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96405-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="querying-dimensional-objects.html" title="Previous" type="text/html"></link>
      <link rel="next" href="developing-reports-and-dashboards.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OLAUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="querying-dimensional-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="developing-reports-and-dashboards.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用分析内容增强数据库</li>
            </ol>
            <a id="GUID-62302E81-4E58-4FA4-9AC1-F12B57BEB660" name="GUID-62302E81-4E58-4FA4-9AC1-F12B57BEB660"></a><a id="OLAUG500"></a>
            
            <h2 id="OLAUG-GUID-62302E81-4E58-4FA4-9AC1-F12B57BEB660" class="sect2"><span class="enumeration_chapter">5</span>使用分析内容增强数据库</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle OLAP提供了一组广泛的分析功能，可通过信息丰富的内容增强您的数据库。本章介绍如何使用Analytic Workspace Manager使用模板和自由格式计算创建计算度量。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-A2F806F2-B2D0-46E0-827E-0239FC8AA1C5">什么是计算量度？</a></p>
                  </li>
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-2A20486E-EED5-4F27-95E4-F791B9072E9C">定义计算的功能</a></p>
                  </li>
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF">创建计算的度量</a></p>
                  </li>
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55">使用计算模板</a></p>
                  </li>
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483">创建用户定义的表达式</a></p>
                  </li>
                  <li>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B">使用OLAP DML创建计算度量</a></p>
                  </li>
               </ul>
            </div><a id="OLAUG9187"></a><div class="props_rev_3"><a id="GUID-A2F806F2-B2D0-46E0-827E-0239FC8AA1C5" name="GUID-A2F806F2-B2D0-46E0-827E-0239FC8AA1C5"></a><h3 id="OLAUG-GUID-A2F806F2-B2D0-46E0-827E-0239FC8AA1C5" class="sect3"><span class="enumeration_section">5.1</span>什么是计算量度？
               </h3>
               <div>
                  <p><a id="d16111e132" class="indexterm-anchor"></a>计算度量返回在运行时根据存储在一个或多个度量中的数据计算的值。与关系视图一样，计算的度量将查询存储在存储在其他对象中的数据中。由于计算的度量不存储数据，因此可以在不增加数据库大小的情况下创建数十个。您可以使用它们作为定义其他计算度量的基础，这可以使用Analytic Workspace Manager中的模板为您可以创建的计算类型增加深度。
                  </p>
                  <p>创建计算度量后，它将立即显示为多维数据集视图中的列。由于计算的度量不包含数据，因此它们与构建过程无关。您可以随时创建计算度量，并且可以立即用于SQL应用程序的查询。</p>
               </div>
            </div><a id="OLAUG9188"></a><div class="props_rev_3"><a id="GUID-2A20486E-EED5-4F27-95E4-F791B9072E9C" name="GUID-2A20486E-EED5-4F27-95E4-F791B9072E9C"></a><h3 id="OLAUG-GUID-2A20486E-EED5-4F27-95E4-F791B9072E9C" class="sect3"><span class="enumeration_section">5.2</span>定义计算的功能</h3>
               <div>
                  <p>用于定义计算度量的函数库包含以下基本类别：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-1818EA31-ADCA-4A2C-BADC-FF5BAE7A8A92">算术运算符</a> ：对两个度量的值执行计算。
                        </p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-464BB9D9-7C6D-40CD-91F9-692DA3297881">分析函数</a> ：对单个度量或列中的有序序列或值范围执行计算。
                        </p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-305901B5-2D11-4A25-9246-2FA0FEA538A1">单行函数</a> ：对单行中的值执行计算。
                        </p>
                     </li>
                  </ul>
               </div><a id="OLAUG9189"></a><div class="props_rev_3"><a id="GUID-1818EA31-ADCA-4A2C-BADC-FF5BAE7A8A92" name="GUID-1818EA31-ADCA-4A2C-BADC-FF5BAE7A8A92"></a><h4 id="OLAUG-GUID-1818EA31-ADCA-4A2C-BADC-FF5BAE7A8A92" class="sect4"><span class="enumeration_section">5.2.1</span>算术运算符</h4>
                  <div>
                     <p>您可以执行以下操作<a id="d16111e260" class="indexterm-anchor"></a>使用两种措施的算术运算。多维数据集中的计算是在维度层次结构的所有级别上逐个单元地执行的。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">增加</span> ：添加两个度量的值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">减法</span> ：从另一个度量的值中减去一个度量的值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">乘法</span> ：将两个度量的值相乘。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">除法</span>或<span class="bold">比率</span> ：将一个度量的值除以另一个度量的值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">百分比差异</span> ：计算两个度量值之间的<span class="bold">百分比差异</span> 。
                           </p>
                        </li>
                     </ul>
                     <p>算术运算在Analytic Workspace Manager中作为模板提供。如<span class="q">“ <a href="enhancing-your-database-analytic-content.html#GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55">使用计算模板</a> ”中所述</span> 。
                     </p>
                  </div>
               </div><a id="OLAUG9190"></a><div class="props_rev_3"><a id="GUID-464BB9D9-7C6D-40CD-91F9-692DA3297881" name="GUID-464BB9D9-7C6D-40CD-91F9-692DA3297881"></a><h4 id="OLAUG-GUID-464BB9D9-7C6D-40CD-91F9-692DA3297881" class="sect4"><span class="enumeration_section">5.2.2</span>分析函数</h4>
                  <div>
                     <p>该<a id="d16111e350" class="indexterm-anchor"></a>分析函数提供最强大的计算，并为商业智能和类似应用程序提供最有用的查询。它们包括各种排名，份额，时间序列和其他单列功能。分析功能使分析师和决策者能够进行比较和识别趋势。
                     </p>
                     <p>Oracle OLAP提供的分析功能利用与关于级别和家庭关系的维度相关的知识。时间维度具有其他信息，使他们能够支持时间序列方法，如滞后，线索，移动和累积计算。由于知识与维度一起存储，因此在创建计算度量时无需指定这些关系。</p>
                     <p>分析功能在Analytic Workspace Manager中作为模板提供。它们在<span class="q">“ <a href="enhancing-your-database-analytic-content.html#GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55">使用计算模板</a> ”</span>中描述。
                     </p>
                  </div>
               </div><a id="OLAUG9191"></a><div class="props_rev_3"><a id="GUID-305901B5-2D11-4A25-9246-2FA0FEA538A1" name="GUID-305901B5-2D11-4A25-9246-2FA0FEA538A1"></a><h4 id="OLAUG-GUID-305901B5-2D11-4A25-9246-2FA0FEA538A1" class="sect4"><span class="enumeration_section">5.2.3</span>单行功能</h4>
                  <div>
                     <p>Oracle OLAP支持大多数SQL <a id="d16111e414" class="indexterm-anchor"></a>单行功能包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数字函数，如<code class="codeph">ABS</code> ， <code class="codeph">CEIL</code> ， <code class="codeph">FLOOR</code> ， <code class="codeph">POWER</code> ， <code class="codeph">ROUND</code>和<code class="codeph">TRUNC</code> 。</p>
                        </li>
                        <li>
                           <p>字符函数，如<code class="codeph">CONCAT</code> ， <code class="codeph">LPAD</code> ， <code class="codeph">RPAD</code> ， <code class="codeph">LTRIM</code> ， <code class="codeph">RTRIM</code> ， <code class="codeph">REPLACE</code>和<code class="codeph">SUBSTR</code> 。</p>
                        </li>
                        <li>
                           <p>日期时间函数，例如<code class="codeph">CURRENT_DAY</code> ， <code class="codeph">MONTHS_BETWEEN</code> ， <code class="codeph">NEXT_DAY</code>和<code class="codeph">SYSTIMESTAMP</code> 。</p>
                        </li>
                        <li>
                           <p>比较功能<code class="codeph">GREATEST</code>和<code class="codeph">LEAST</code> 。</p>
                        </li>
                        <li>
                           <p>转换函数，例如<code class="codeph">TO_CHAR</code> ， <code class="codeph">TO_DATE</code> ， <code class="codeph">TO_NUMBER</code>和<code class="codeph">TO_TIMESTAMP</code> 。</p>
                        </li>
                     </ul>
                     <p>您可以使用这些函数来操作度量中的数据值，通常作为更复杂计算的一部分。这些函数不作为模板提供，但您可以在自由格式计算中使用它们，如<span class="q">“ <a href="enhancing-your-database-analytic-content.html#GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483">创建用户定义的表达式</a> ”中所述</span> 。
                     </p>
                  </div>
               </div>
            </div><a id="OLAUG9479"></a><a id="OLAUG9480"></a><a id="OLAUG9192"></a><div class="props_rev_3"><a id="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF" name="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF"></a><h3 id="OLAUG-GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF" class="sect3"><span class="enumeration_section">5.3</span>创建计算的度量</h3>
               <div>
                  <p><a id="d16111e564" class="indexterm-anchor"></a> Analytic Workspace Manager提供易于使用的模板，用于创建计算的度量。您可以使用源度量在同一个多维数据集中创建它们，也可以在单独的多维数据集中创建它们。
                  </p>
                  <p>计算的度量可用于在多维数据集视图中查询为其他列（例如<code class="codeph">UNITS_CUBE_VIEW</code> ）。它们不能通过多维数据集物化视图（例如<code class="codeph">CB$UNITS_CUBE</code> ）获得。
                  </p>
                  <p><a id="d16111e578" class="indexterm-anchor"></a><a id="d16111e582" class="indexterm-anchor"></a>计算的度量生成器快速生成多维数据集的一个或多个度量的标准计算度量，包括排名，份额，先前和未来期间，期间至今，并行期间，移动聚合和累积聚合。生成器使用命名规则来制定名称和描述。您可以在“命名规则”选项卡上自定义这些规则。
                  </p>
                  <p>您还可以创建单独的计算度量，包括OLAP表达式语法或OLAP DML中的用户定义表达式。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__GUID-FB6A7C99-0811-4AF6-A37E-25FD00AC0E0F">要创建多个计算度量：</p>
                     <ol>
                        <li>
                           <p>在导航树中，右键单击多维数据集，然后选择“ <span class="bold">生成计算度量”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“计算”选项卡上，选择基于计算度量的度量。</p>
                        </li>
                        <li>
                           <p>向下滚动“计算详细信息”，然后选择要为此选择的度量选择创建的每种计算度量。通过更改模板来根据需要修改计算。</p>
                        </li>
                        <li>
                           <p>选择用于时间序列计算的时间维度。</p>
                        </li>
                        <li>
                           <p>查看计算的度量列表。您可以使用“命名规则”选项卡更改生成的名称。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">生成计算”</span>以创建计算的度量。
                           </p>
                        </li>
                        <li>
                           <p>如果要生成相同基本类型的计算的变体，请重复此过程，例如对同一度量但在不同维度上的另一个共享计算。更改命名规则以生成新的唯一名称。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <p><a href="enhancing-your-database-analytic-content.html#GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__BABFAAID">图5-1</a>显示了Generate Calculated Measures对话框。
                  </p>
                  <div class="figure" id="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__BABFAAID">
                     <p class="titleinfigure">图5-1生成多个计算度量</p><img src="img/calc_gen.gif" width="375" alt="下面是图5-1的描述" title="下面是图5-1的描述" longdesc="img_text/calc_gen.html"><br><a href="img_text/calc_gen.html">“图5-1生成多个计算度量”的描述</a></div>
                  <!-- class="figure" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__GUID-A53BE257-8499-414A-8FED-704C0C67681C">要创建单个计算度量：</p>
                     <ol>
                        <li>
                           <p>在导航树中，展开多维数据集文件夹。</p>
                        </li>
                        <li>
                           <p>右键单击“计算的度量”，然后从上下文菜单中选择“ <span class="bold">创建计算度量</span> ”。
                           </p>
                           <p>在“创建计算的度量”对话框中，输入描述性名称。</p>
                        </li>
                        <li>
                           <p>选择计算类型。</p>
                           <p>您选择的算术或分析函数会动态更改“计算”模板。</p>
                        </li>
                        <li>
                           <p>修改计算模板。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">创建”</span>
                           </p>
                           <p>计算的度量将显示在“计算度量”文件夹的导航树中。</p>
                        </li>
                        <li>
                           <p>选择“ <span class="bold">高级”</span>选项以显示“引用”，“依赖项”和“表达式”选项卡。选项卡包含以下信息：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>“引用”选项卡有一个表，该表列出了Analytic Workspace Manager在执行此计算度量指定的计算时引用的度量。如果为多维数据集选择了“启用SQL表达式”选项，则该表在“创建”列中有一个复选标记，用于分析工作区自动创建的任何其他计算度量。</p>
                              </li>
                              <li>
                                 <p>“依赖关系”选项卡有一个表，其中列出了依赖于此计算度量的其他计算度量。Analytic Workspace Manager在执行此表中度量的计算时使用此计算度量。</p>
                              </li>
                              <li>
                                 <p>“表达式”选项卡有一个表，列出计算度量使用的表达式。仅当为多维数据集选择了“启用SQL表达式”选项时，才会显示此选项卡。</p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <p><a href="enhancing-your-database-analytic-content.html#GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__CIHIBJBF">图5-2</a>显示了Create Calculated Measure对话框。
                  </p>
                  <div class="figure" id="GUID-795C4C9A-9A1F-4758-8827-E85661CCB9DF__CIHIBJBF">
                     <p class="titleinfigure">图5-2创建计算度量</p><img src="img/calcs_lag.gif" width="464" alt="下面是图5-2的描述" title="下面是图5-2的描述" longdesc="img_text/calcs_lag.html"><br><a href="img_text/calcs_lag.html">“图5-2创建计算度量”的说明</a></div>
                  <!-- class="figure" -->
               </div><a id="OLAUG9481"></a><a id="OLAUG9482"></a><a id="OLAUG9193"></a><div class="props_rev_3"><a id="GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F" name="GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F"></a><h4 id="OLAUG-GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F" class="sect4"><span class="enumeration_section">5.3.1</span>修改模板</h4>
                  <div>
                     <p><a id="d16111e733" class="indexterm-anchor"></a><a id="d16111e737" class="indexterm-anchor"></a>您选择的计算将显示为模板，该模板是使用可变部件进行计算的说明，您可以对其进行自定义。
                     </p>
                     <p><a href="enhancing-your-database-analytic-content.html#GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F__CIHCHJDC">图5-3</a>显示了用于计算前期的模板。您可以通过单击链接查看选项列表。
                     </p>
                     <div class="figure" id="GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F__CIHCHJDC">
                        <p class="titleinfigure">图5-3更改计算的可变部分</p><img width="395" src="img/calcs_measures.gif" alt="下面是图5-3的描述" title="下面是图5-3的描述" longdesc="img_text/calcs_measures.html"><br><a href="img_text/calcs_measures.html">“图5-3更改计算的可变部分”的说明</a></div>
                     <!-- class="figure" -->
                     <p>您可以在计算中包括度量的所有值，或者，对于某些类型的计算，您可以过滤度量以仅包括选择的值。要将一个或多个维度限制为单个维度成员，请单击该度量旁边的省略号（ <code class="codeph">...</code> ）。将出现“限定测量”对话框， <a href="enhancing-your-database-analytic-content.html#GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F__CIHDIGAH">如图5-4</a>所示。
                     </p>
                     <div class="figure" id="GUID-9B9CCD47-291A-4A1B-B7BB-D7358BD1510F__CIHDIGAH">
                        <p class="titleinfigure">图5-4将维度限制为单个成员</p><img width="243" src="img/calc_qualify.gif" alt="下面是图5-4的描述" title="下面是图5-4的描述" longdesc="img_text/calc_qualify.html"><br><a href="img_text/calc_qualify.html">“图5-4将维度限制为单个成员”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="OLAUG9194"></a><div class="props_rev_3"><a id="GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1" name="GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1"></a><h4 id="OLAUG-GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1" class="sect4"><span class="enumeration_section">5.3.2</span>选择一系列时间段</h4>
                  <div>
                     <p><a id="d16111e810" class="indexterm-anchor"></a><a id="d16111e812" class="indexterm-anchor"></a>许多计算在层次结构中的同一级别的时间段内执行。在某些类型的计算中，您可以控制在同一计算中使用的时间段范围。例如，您可能希望计算每个会计年度的运行总计月数，而不是以存储在多维数据集中的第一个月开始的运行总计。
                     </p>
                     <p>您可以使用以下方法识别要一起计算的时间段范围：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">级别</span> ：计算同一级别的所有时间段，以便多维数据集中的所有月份都包含在一个计算中，所有季度都包含在另一个计算中，依此类推。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">父级</span> ：计算具有相同父级的所有时间段，以便Q1-07中的所有月份都包含在一个计算中，Q2-07中的所有月份都包含在另一个计算中，依此类推。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">级别的祖先</span> ：计算在指定级别具有相同祖先的所有时间段。例如，如果指定级别为年 - 季 - 月层级中的年份，则Q1-06至Q4-06将包含在一个计算中，Q1-07至Q4-07将包含在另一个计算中，即06年1月至12月-06包含在第三个计算中，依此类推。不计算层次结构中任何更高级别。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">格里高利时期</span> ： <a id="d16111e840" class="indexterm-anchor"></a>公历期 - 年，季，月和周 - 将公历应用于所选层次结构。这对于分析使用非标准日历层次结构的数据非常有用。例如，如果您在从7月1日开始到6月30日结束的财务层次结构上使用公历年，则会同时计算一个会计年度的后半部分和下一个会计年度的前半部分。不计算层次结构中比指定格里高利期更高的时间段。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="OLAUG9195"></a><div class="props_rev_3"><a id="GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55" name="GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55"></a><h3 id="OLAUG-GUID-057D4BC2-C8CB-4E53-A16A-CC95438EAA55" class="sect3"><span class="enumeration_section">5.4</span>使用计算模板</h3>
               <div>
                  <p><a id="d16111e893" class="indexterm-anchor"></a> Analytic Workspace Manager为通常需要商业智能应用程序的所有计算提供模板。以下主题描述了Analytic Workspace Manager中可用作计算模板的计算类型。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-20401990-5F99-4BCE-A5B7-AB6AED6A61A8">算术计算</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE">指数</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-1B47C242-B0E7-408D-9353-645425755CD1">前期和未来期间</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-5BB1079D-0DC4-4056-9091-D7E733662301">截止日期</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-691280FA-7B6B-4D84-B7F8-0463D65DA4AF">分享</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-DA653766-DF86-4DDE-9111-C99EDDC66BA9">秩</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-E3443AB3-012E-4CCC-B409-C54396A141C2">平行期</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-6B213107-3DD2-4035-9C3B-B5B230C27CA2">移动计算</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-3E1E9134-896B-4A05-8653-0204E92C9491">累积计算</a></p>
                     </li>
                     <li>
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-073AA9AA-EDF9-47EE-A8CF-5C926C12B02B">嵌套计算</a></p>
                     </li>
                  </ul>
               </div><a id="OLAUG9483"></a><a id="OLAUG9196"></a><div class="props_rev_3"><a id="GUID-20401990-5F99-4BCE-A5B7-AB6AED6A61A8" name="GUID-20401990-5F99-4BCE-A5B7-AB6AED6A61A8"></a><h4 id="OLAUG-GUID-20401990-5F99-4BCE-A5B7-AB6AED6A61A8" class="sect4"><span class="enumeration_section">5.4.1</span>算术计算</h4>
                  <div>
                     <p>基本的数学运算使您能够对两个度量执行逐个单元格的计算，如<span class="q">“ <a href="enhancing-your-database-analytic-content.html#GUID-1818EA31-ADCA-4A2C-BADC-FF5BAE7A8A92">算术运算符</a> ”中所述</span> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-20401990-5F99-4BCE-A5B7-AB6AED6A61A8__GUID-B12D4C2C-31EF-4B48-A6E4-48FF3F088F71">算术例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此模板使用百分比差异定义全球价格多维数据集的计算度量：</p><pre class="oac_no_warn" dir="ltr">测量<span class="underline">UNIT_PRICE</span>和测量<span class="underline">UNIT_COST</span>之间的百分比差异。</pre><p>针对此计算度量的查询会返回这些结果。<code class="codeph">PCT_CHG</code>列显示<code class="codeph">PRICE</code>和<code class="codeph">COST</code>之间的百分比变化，计算为<code class="codeph">PRICE-COST/COST</code> 。</p><pre class="oac_no_warn" dir="ltr">产品价格PCT_DIFF -------------------- ---------- ---------- ------ ----特使大使2892 2664 .09特使执行2803 2644 .06特使标准1662 1737 -.04 Sentinel Financial 1755 1658 .06 Sentinel Multimedia 1770 1813 -.02 Sentinel Standard 1552 1410 .1</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9484"></a><a id="OLAUG9485"></a><a id="OLAUG9204"></a><div class="props_rev_3"><a id="GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE" name="GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE"></a><h4 id="OLAUG-GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE" class="sect4"><span class="enumeration_section">5.4.2</span>指数</h4>
                  <div>
                     <p><a id="d16111e1086" class="indexterm-anchor"></a>索引是在单个度量上计算的数学运算。索引计算度量值和用作基数的选定值之间的百分比差异。
                     </p>
                     <p>索引不使用计算模板。相反，它为多维数据集的每个维提供维度成员列表，您可以从中选择一个用作索引， <a href="enhancing-your-database-analytic-content.html#GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE__CIHFAADE">如图5-5</a>所示。
                     </p>
                     <div class="figure" id="GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE__CIHFAADE">
                        <p class="titleinfigure">图5-5计算产品索引</p><img width="461" src="img/calc_index.gif" alt="下面是图5-5的描述" title="下面是图5-5的描述" longdesc="img_text/calc_index.html"><br><a href="img_text/calc_index.html">“图5-5计算产品索引”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4FB0BF88-808A-4918-B32E-20DD3E8733CE__GUID-5D029457-808B-4301-A35A-1F1E2B5DDDFE">索引示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此示例使用<code class="codeph">Desktop PCs</code>作为索引在Product维上创建索引。
                        </p><pre class="oac_no_warn" dir="ltr">产品销售PROD_INDEX -------------------- ---------- ----------台式电脑76682955 100便携式电脑18072328 24 CD / DVD 17302122 23调制解调器/传真5565552 7内存5347292 7显示器3926632 5</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9486"></a><a id="OLAUG9199"></a><div class="props_rev_3"><a id="GUID-1B47C242-B0E7-408D-9353-645425755CD1" name="GUID-1B47C242-B0E7-408D-9353-645425755CD1"></a><h4 id="OLAUG-GUID-1B47C242-B0E7-408D-9353-645425755CD1" class="sect4"><span class="enumeration_section">5.4.3前期</span>和后期</h4>
                  <div>
                     <p><a id="d16111e1161" class="indexterm-anchor"></a><a id="d16111e1163" class="indexterm-anchor"></a><a id="d16111e1165" class="indexterm-anchor"></a><a id="d16111e1167" class="indexterm-anchor"></a> Oracle OLAP为以前或未来的时间段提供了几种计算：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">前期</span> ：返回较早时间段的度量值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">与前期</span>的差异：计算当前时间段和较早期间的值之间的差异。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">与上一期间的百分比差异</span> ：计算当前时间段和较早期间的值之间的百分比差异。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">未来期间</span> ：返回稍后时间段的度量值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">与未来期间</span>的差异：计算当前时间段和后期的值之间的差异。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">未来期间的百分比差异</span> ：计算当前时间段和后期的值之间的百分比差异。
                           </p>
                        </li>
                     </ul>
                     <p>在为先前或未来时间段创建计算时，您可以选择度量，时间维度，层次结构以及当前期间的期间数。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1B47C242-B0E7-408D-9353-645425755CD1__GUID-84C61E33-959D-4A15-BD15-3A150B7E71BC">前期例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此模板使用前期定义计算的度量：</p><pre class="oac_no_warn" dir="ltr">在<span class="underline">TIME</span>维度和<span class="underline">TIME.CALENDAR</span>层次结构<span class="underline">1</span>期前测量<span class="underline">SALES的</span>前期。
</pre><p>这些是针对计算度量的查询结果。<code class="codeph">PRIOR_PERIOD</code>列显示Calendar层次结构中同一级别上一期间的Sales值。
                        </p><pre class="oac_no_warn" dir="ltr">TIME TIME_LEVEL SALES PRIOR_PERIOD -------- -------------------- ---------- -------- ---- 2005年CALENDAR_YEAR 136986572 144290686 2006年CALENDAR_YEAR 140138317 136986572 Q1.05 CALENDAR_QUARTER 31381338 41988687 Q2.05 CALENDAR_QUARTER 37642741 31381338 Q3.05 CALENDAR_QUARTER 32617249 37642741 Q4.05 CALENDAR_QUARTER 35345244 32617249 Q1.06 CALENDAR_QUARTER 36154815 35345244 Q2.06 CALENDAR_QUARTER 36815657 36154815 Q3。 06 CALENDAR_QUARTER 32318935 36815657 Q4.06 CALENDAR_QUARTER 34848911 32318935</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9487"></a><a id="OLAUG9201"></a><div class="props_rev_3"><a id="GUID-5BB1079D-0DC4-4056-9091-D7E733662301" name="GUID-5BB1079D-0DC4-4056-9091-D7E733662301"></a><h4 id="OLAUG-GUID-5BB1079D-0DC4-4056-9091-D7E733662301" class="sect4"><span class="enumeration_section">5.4.4截至目前为止</span></h4>
                  <div>
                     <p>期间至今功能使用相同的父级直到当前期间执行计算。这些函数计算到期日：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d16111e1285" class="indexterm-anchor"></a>截止<span class="bold">日期</span> ：计算直到当前时间段的值。
                           </p>
                        </li>
                        <li>
                           <p>截止<span class="bold">日期周期</span> ：计算直到前一时间段的数据值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">期间与期间</span>的差异<span class="bold">周期</span> ：计算直到当前时间段的数据值与先前期间的相同计算的差异。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">期间与期间之间的百分比期间结果</span> ：计算直到当前时间段的数据值与相同计算直到前一期间的百分比差异。
                           </p>
                        </li>
                     </ul>
                     <p>创建期间最新计算时，您可以从以下聚合方法中进行选择：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>和</p>
                        </li>
                        <li>
                           <p>平均</p>
                        </li>
                        <li>
                           <p>最大值</p>
                        </li>
                        <li>
                           <p>最低限度</p>
                        </li>
                     </ul>
                     <p>您还可以选择度量，时间维度和层次结构。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5BB1079D-0DC4-4056-9091-D7E733662301__GUID-CAA69F35-52F2-48C6-BD6E-B674A9DBE8FA">期间至今的例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此模板使用“期间到日期”定义计算的度量。</p><pre class="oac_no_warn" dir="ltr">迄今为止在<span class="underline">TIME</span>维和<span class="underline">TIME.CALENDAR</span>层次结构中的<span class="underline">SALES的</span> <span class="underline">年份</span> 。从期间<span class="underline">开始</span>使用<span class="underline">MINIMUM进行</span>汇总。
</pre><p>这些是针对计算度量的查询结果。<code class="codeph">MIN_TO_DATE</code>列显示当前级别和年份中的当前最小<code class="codeph">SALES</code>值。
                        </p><pre class="oac_no_warn" dir="ltr">TIME TIME_LEVEL SALES MIN_TO_DATE -------- -------------------- ---------- -------- --- Q1.06 CALENDAR_QUARTER 36154815 36154815 Q2.06 CALENDAR_QUARTER 36815657 36154815 Q3.06 CALENDAR_QUARTER 32318935 32318935 Q4.06 CALENDAR_QUARTER 34848911 32318935 JAN-06 MONTH 13119235 13119235 FEB-06 MONTH 11441738 11441738 MAR-06 MONTH 11593842 11441738 APR-06 MONTH 11356940 11356940 MAY-06 MONTH 13820218 11356940 JUN-06 MONTH 11638499 11356940 JUL-06 MONTH 9417316 9417316 AUG-06 MONTH 11596052 9417316 SEP-06 MONTH 11305567 9417316 OCT-06 MONTH 11780401 9417316 NOV-06 MONTH 10653184 9417316 DEC-06 MONTH 12415325 9417316</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9488"></a><a id="OLAUG9198"></a><div class="props_rev_3"><a id="GUID-691280FA-7B6B-4D84-B7F8-0463D65DA4AF" name="GUID-691280FA-7B6B-4D84-B7F8-0463D65DA4AF"></a><h4 id="OLAUG-GUID-691280FA-7B6B-4D84-B7F8-0463D65DA4AF" class="sect4"><span class="enumeration_section">5.4.5</span>分享</h4>
                  <div>
                     <p><a id="d16111e1408" class="indexterm-anchor"></a>共享计算当前维度成员的度量值与同一维度的相关成员的值的比率。您可以选择相关成员是否：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">层次结构顶部</span> ：计算每个成员与总数的比率。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">成员的父级</span> ：计算每个成员与其父成员的比率。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">成员的级别祖先</span> ：计算每个成员与其祖先的比率，即层次结构中指定级别的成员。
                           </p>
                        </li>
                     </ul>
                     <p>创建共享计算时，您可以选择度量，维度和层次结构。您还可以选择将结果乘以100以获得百分比而不是分数。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-691280FA-7B6B-4D84-B7F8-0463D65DA4AF__GUID-C2D37596-DAD9-4724-869B-20FF8F12A1F6">分享示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此模板使用<code class="codeph">SHARE</code>定义计算的度量：</p><pre class="oac_no_warn" dir="ltr">份额<span class="underline">PRODUCT</span>维作为<span class="underline">层次结构的顶部上</span>的一个比率的<span class="underline">PRODUCT.PRIMARY</span>层级测量<span class="underline">销售</span> 。
</pre><p>这些是针对计算度量的查询结果。<code class="codeph">TOTAL_SHARE</code>列显示所选产品的总份额百分比。
                        </p><pre class="oac_no_warn" dir="ltr">PRODUCT PROD_LEVEL SALES TOTAL_SHARE -------------------- --------------- ----------- ----------总产品总数144290686 100硬件类别130145388 90台式电脑家庭78770152 55便携式电脑家庭19066575 13 CD / DVD系列16559860 11软件/其他CLASS 14145298 10附件家族6475353 4操作系统家庭5738775 4 Memory FAMILY 5430466 4调制解调器/传真家庭5844185 4显示器系列4474150 3文档系列1931170 1</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9489"></a><a id="OLAUG9197"></a><div class="props_rev_3"><a id="GUID-DA653766-DF86-4DDE-9111-C99EDDC66BA9" name="GUID-DA653766-DF86-4DDE-9111-C99EDDC66BA9"></a><h4 id="OLAUG-GUID-DA653766-DF86-4DDE-9111-C99EDDC66BA9" class="sect4"><span class="enumeration_section">5.4.6</span>排名</h4>
                  <div>
                     <p>排名根据所选度量的值对维度的值进行排序。定义排名计算时，您可以选择维度，层次结构和度量。</p>
                     <p>您可以选择处理相同值的方法：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">排名</span> ：将相同的排名分配给相同的值，因此排名可能少于成员。例如，它可能会返回<code class="codeph">1</code> ， <code class="codeph">2</code> ， <code class="codeph">3</code> ， <code class="codeph">3</code> ， <code class="codeph">4</code>为一系列五个维度成员。
                           </p>
                        </li>
                        <li>
                           <p><a id="d16111e1543" class="indexterm-anchor"></a> <span class="bold">密集等级</span> ：将相同的最低等级分配给相同的值。例如，它可能会返回<code class="codeph">1</code> ， <code class="codeph">2</code> ， <code class="codeph">3</code> ， <code class="codeph">3</code> ， <code class="codeph">5</code>为一系列五个维度成员。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">平均排名</span> ：将相同的平均排名分配给相同的值。例如，它可能会返回<code class="codeph">1</code> ， <code class="codeph">2</code> ， <code class="codeph">3.5</code> ， <code class="codeph">3.5</code> ， <code class="codeph">5</code>为一系列五个维度成员。
                           </p>
                        </li>
                     </ul>
                     <p>您还可以选择维度成员的排名组：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">会员级别</span> ：对同级别的会员进行排名。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">会员的父母</span> ：使用同一父母对会员进行排名。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">成员的级别祖先</span> ：在层次结构中较高的指定级别对具有相同祖先的成员进行排名。
                           </p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-DA653766-DF86-4DDE-9111-C99EDDC66BA9__GUID-859BDAF0-AF60-489E-865E-DD3D8B8A84B3">排名示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此模板使用Rank定义计算的度量：</p><pre class="oac_no_warn" dir="ltr">根据度量<span class="underline">SALES</span>对<span class="underline">PRODUCT</span>维度和<span class="underline">PRODUCT.PRIMARY</span>层次结构的成员进行排名。使用<span class="underline">RANK</span>方法计算排名，使<span class="underline">成员的父级</span>按顺序从<span class="underline">最低到最高</span> 。排名NA（null）值<span class="underline">最后为空</span> 。
</pre><p>这些是针对<code class="codeph">RANK</code>订购产品的计算度量的查询结果：</p><pre class="oac_no_warn" dir="ltr">产品销售排名-------------------- ---------- ----------监视器4474150 1内存5430466 2调制解调器/传真5844185 3 CD / DVD 16559860 4便携式计算机19066575 5台式计算机78770152 6</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9490"></a><a id="OLAUG9200"></a><div class="props_rev_3"><a id="GUID-E3443AB3-012E-4CCC-B409-C54396A141C2" name="GUID-E3443AB3-012E-4CCC-B409-C54396A141C2"></a><h4 id="OLAUG-GUID-E3443AB3-012E-4CCC-B409-C54396A141C2" class="sect4"><span class="enumeration_section">5.4.7</span>平行期</h4>
                  <div>
                     <p><a id="d16111e1690" class="indexterm-anchor"></a>平行期与当前时期处于同一水平，但在较早期间有不同的父母。例如，您可能希望将当前销售额与上一年度的季度和月份销售额进行比较。
                     </p>
                     <p>Oracle OLAP为并行时段提供了多个功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">并行周期</span> ：计算<span class="bold">并行周期</span>的值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">与并行周期</span>的差异：计算当前周期与并行周期之间的值的差异。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">并行周期的百分比差异</span> ：计算当前周期与并行周期之间的百分比差异。
                           </p>
                        </li>
                     </ul>
                     <p>要标识并行期间，请指定当前期间之前的级别和期间数。您还可以决定当两个期间不完全匹配时会发生什么，例如比较2月（28天）和1月（31天）的每日销售额。</p>
                     <p>您还可以选择度量，时间维度和层次结构。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E3443AB3-012E-4CCC-B409-C54396A141C2__GUID-F75E1681-AE4E-440E-80A2-76BBE88D0979">并行周期示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此模板使用“并行周期”定义计算的度量。</p><pre class="oac_no_warn" dir="ltr">在<span class="underline">时间</span>维度<span class="underline">TIME.CALENDAR</span>层次<span class="underline">1</span> <span class="underline">TIME.CALENDAR.QUARTER</span> <span class="underline">销售</span> <span class="underline">并行期</span>前基于位置从<span class="underline">开始到</span>周期的<span class="underline">结束</span> 。
</pre><p>这些是针对计算度量的查询结果，其中列出了两个日历季度的月份。平行月份在上一季度内具有相同的位置。<code class="codeph">JUL-06</code>前期是<code class="codeph">APR-06,</code> <code class="codeph">AUG-06</code>是<code class="codeph">MAY-06</code> ， <code class="codeph">SEP-06</code>是<code class="codeph">JUN-06</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">TIME PARENT SALES LAST_QTR -------- ---------- ---------- ---------- APR-06 CY2006。Q2 11356940 13119235 MAY-06 CY2006。Q2 13820218 11441738 JUN-06 CY2006。Q2 11638499 11593842 JUL-06 CY2006。Q3 9417316 11356940 AUG-06 CY2006。Q3 11596052 13820218 SEP-06 CY2006。Q3 11305567 11638499</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9491"></a><a id="OLAUG9203"></a><div class="props_rev_3"><a id="GUID-6B213107-3DD2-4035-9C3B-B5B230C27CA2" name="GUID-6B213107-3DD2-4035-9C3B-B5B230C27CA2"></a><h4 id="OLAUG-GUID-6B213107-3DD2-4035-9C3B-B5B230C27CA2" class="sect4"><span class="enumeration_section">5.4.8</span>移动计算</h4>
                  <div>
                     <p><a id="d16111e1818" class="indexterm-anchor"></a><a id="d16111e1820" class="indexterm-anchor"></a><a id="d16111e1824" class="indexterm-anchor"></a><a id="d16111e1828" class="indexterm-anchor"></a><a id="d16111e1832" class="indexterm-anchor"></a>移动计算在当前周期的周期内执行。Oracle OLAP为移动计算提供了几种聚合方法：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">移动平均线</span> ：计算固定数量时间段内度量的平均值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">最大移动</span> ：计算固定数量时间段内度量的最大值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">移动最小值</span> ：计算固定数量时间段内度量的最小值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">移动总计</span> ：返回固定数量的时间段内度量的总值。
                           </p>
                        </li>
                     </ul>
                     <p>您可以选择度量，时间维度和层次结构。您还可以选择范围，如<span class="q">“ <a href="enhancing-your-database-analytic-content.html#GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1">选择</a></span>时间段<span class="q"><a href="enhancing-your-database-analytic-content.html#GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1">范围</a> ”中所述</span> ，以及要包括在计算中的当前时间段之前和之后的时间段数。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6B213107-3DD2-4035-9C3B-B5B230C27CA2__GUID-2A681F46-0D19-47A3-A6B4-4879FCB8C33F">移动计算示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此模板使用移动最小值定义计算的度量。</p><pre class="oac_no_warn" dir="ltr">在<span class="underline">TIME</span>维度和<span class="underline">TIME.CALENDAR</span>层次结构中移动<span class="underline">SALES的</span>最小值。在<span class="underline">级别中</span>包括<span class="underline">1个</span>前面和后面的<span class="underline">1个</span>成员。
</pre><p>这些是针对计算度量的查询结果，该度量显示日历年2004的后代的值。最小销售额的每个值是当前值和紧接其之前和之后的值中的最小值。计算在多维数据集中某个级别的所有成员上执行。</p><pre class="oac_no_warn" dir="ltr">TIME TIME_LEVEL SALES MIN_SALES -------- -------------------- ---------- -------- -  Q1.04 CALENDAR_QUARTER 32977874 32977874 Q2.04 CALENDAR_QUARTER 35797921 32977874 Q3.04 CALENDAR_QUARTER 33526203 33526203 Q4.04 CALENDAR_QUARTER 41988687 31381338 JAN-04 MONTH 11477898 10982016 FEB-04 MONTH 10982016 10517960 MAR-04 MONTH 10517960 10517960 APR-04 MONTH 11032057 10517960 5月04日月11日11月13日11032057 6月04日13333248 11432616 7月04日月12070352 11108893 8月04日11108893 10346958 9月04日月10346958 10346958 10月04日月14358605 10346958 11月04日12757560 12757560 12月04日14872522 12093518</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9492"></a><a id="OLAUG9202"></a><div class="props_rev_3"><a id="GUID-3E1E9134-896B-4A05-8653-0204E92C9491" name="GUID-3E1E9134-896B-4A05-8653-0204E92C9491"></a><h4 id="OLAUG-GUID-3E1E9134-896B-4A05-8653-0204E92C9491" class="sect4"><span class="enumeration_section">5.4.9</span>累积计算</h4>
                  <div>
                     <p><a id="d16111e1948" class="indexterm-anchor"></a><a id="d16111e1950" class="indexterm-anchor"></a><a id="d16111e1954" class="indexterm-anchor"></a><a id="d16111e1958" class="indexterm-anchor"></a><a id="d16111e1962" class="indexterm-anchor"></a>累积计算从第一个时间段开始计算，直到当前成员计算，或从最后一个时间段开始计算并计算回当前成员。Oracle OLAP为累积计算提供了几种聚合方法：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">累积平均值</span> ：计算跨时段的运行平均值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">累积最大值</span> ：计算跨时间段的最大值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">累积最小值</span> ：计算跨时间段的最小值。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">累计总计</span> ：计算跨时段的运行总计。
                           </p>
                        </li>
                     </ul>
                     <p>您可以选择度量，时间维度和层次结构。您还可以选择范围，如<span class="q">“ <a href="enhancing-your-database-analytic-content.html#GUID-CE4485A9-4980-4287-B08A-F5002BAE88C1">选择时间段范围</a> ”中所述</span> ，以及是否要使用第一个句点开始计算并计算向前，或从最后一个周期开始计算回来。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3E1E9134-896B-4A05-8653-0204E92C9491__GUID-B1FC47D7-5432-4927-AA08-44310AC95396">累积计算示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此模板使用累积最小值定义计算的度量。</p><pre class="oac_no_warn" dir="ltr">累积<span class="underline">在</span>最低<span class="underline">水平</span> <span class="underline">TIME.CALENDAR_YEAR</span>在<span class="underline">祖先</span>中的<span class="underline">时间</span>维度和层次<span class="underline">TIME.CALENDAR</span> <span class="underline">销售</span> 。从<span class="underline">开始到当前</span>成员的总数。
</pre><p>这些是针对计算度量的查询结果，该度量显示日历年2004的后代的值。季度的最小值从Q1-04开始，到Q4-04结束，几个月从1月4日开始，到12月4日结束。</p><pre class="oac_no_warn" dir="ltr">TIME TIME_LEVEL SALES MIN_SALES -------- -------------------- ---------- -------- -  Q1.04 CALENDAR_QUARTER 32977874 32977874 Q2.04 CALENDAR_QUARTER 35797921 32977874 Q3.04 CALENDAR_QUARTER 33526203 32977874 Q4.04 CALENDAR_QUARTER 41988687 32977874 JAN-04 MONTH 11477898 11477898 FEB-04 MONTH 10982016 10982016 MAR-04 MONTH 10517960 10517960 APR-04 MONTH 11032057 10517960 5月04日月份11432616 10517960 6月04日13333248 10517960 7月04日月份12070352 10517960 8月04日11108893 10517960 9月04日月10346958 10346958 10月04日月14358605 10346958 11月04日12757560 10346958 12月04日月14872522 10346958</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9493"></a><a id="OLAUG9205"></a><div class="props_rev_3"><a id="GUID-073AA9AA-EDF9-47EE-A8CF-5C926C12B02B" name="GUID-073AA9AA-EDF9-47EE-A8CF-5C926C12B02B"></a><h4 id="OLAUG-GUID-073AA9AA-EDF9-47EE-A8CF-5C926C12B02B" class="sect4"><span class="enumeration_section">5.4.10</span>嵌套计算</h4>
                  <div>
                     <p><a id="d16111e2077" class="indexterm-anchor"></a><a id="d16111e2081" class="indexterm-anchor"></a>您可以使用计算的度量作为另一个计算度量的基础，扩展模板中可用的各种功能。
                     </p>
                     <p>例如，Analytic Workspace Manager具有移动平均线和前一个差异的模板。您可以创建计算移动平均值的计算度量，然后计算当前移动平均值与之前移动平均值之间的差值。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-073AA9AA-EDF9-47EE-A8CF-5C926C12B02B__GUID-FD7C8F32-4124-4584-9BF9-CDE3339C856D">嵌套计算示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此模板为名为<code class="codeph">UNITS_MOVING_AVG</code>单位创建移动平均值：</p><pre class="oac_no_warn" dir="ltr">TIME维和<code class="codeph">TIME.CALENDAR</code>层次结构中<code class="codeph">UNITS</code>移动平均值。在<code class="codeph">level</code>包括<code class="codeph">1</code>前面和后面的<code class="codeph">1</code>成员。
</pre><p>下一个模板从<code class="codeph">UNITS_MOVING_AVG</code>创建与先前时间差的计算。</p><pre class="oac_no_warn" dir="ltr">差异从时间维度<span class="underline">TIME.CALENDAR</span>层次<span class="underline">1</span>期前之前期<span class="underline">UNITS_MOVING_AVG。</span>
</pre><p>这些是针对“单位”度量和两个计算度量的查询结果。<code class="codeph">MOVING_AVG</code>列显示移动平均线， <code class="codeph">DIFF</code>列显示当前移动平均线与前一个时段之间的差值。
                        </p><pre class="oac_no_warn" dir="ltr">TIME TIME_LEVEL UNITS MOVING_AVG DIFF -------- -------------------- ---------- ------- --- ---------- JAN-06 MONTH 47776 48520 66 FEB-06 MONTH 47695 48940 419 MAR-06 MONTH 51348 48683 -257 APR-06 MONTH 47005 50387 1705 MAY-06 MONTH 52809 48411 -1976 JUN-06 MONTH 45419 48872 461 JUL-06 MONTH 48388 47546 -1326 AUG-06 MONTH 48830 47857 312 SEP-06 MONTH 46354 47532 -326 OCT-06 MONTH 47411 46869 -663 NOV-06 MONTH 46842 49768 2899 DEC-06 MONACE 55052 50947 1179 2006 CALENDAR_YEAR 584929 575324 -4032 Q1.06 CALENDAR_QUARTER 146819 145705 2093 Q2.06 CALENDAR_QUARTER 145233 145208 -497 Q3.06 CALENDAR_QUARTER 143572 146037 829 Q4.06 CALENDAR_QUARTER 149305 146439 402</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OLAUG9206"></a><div class="props_rev_3"><a id="GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483" name="GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483"></a><h3 id="OLAUG-GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483" class="sect3"><span class="enumeration_section">5.5</span>创建用户定义的表达式</h3>
               <div>
                  <p><a id="d16111e2188" class="indexterm-anchor"></a><a id="d16111e2192" class="indexterm-anchor"></a>计算类型中有用户定义的表达式。通常，您使用OLAP表达式语法创建计算，该语法包括本章中描述的分析函数，算术运算符和单行函数。OLAP语法是SQL语法的扩展。如果您使用过SQL分析函数或单行函数，那么您会熟悉这种语法。
                  </p>
                  <div class="infoboxnotealso" id="GUID-FEBE0047-5E02-4DE6-B695-C9B71E936483__GUID-4D85B813-985C-4408-BBB7-BE32DECD517B">
                     <p class="notep1">也可以看看：</p>
                     <p>有关用户定义的OLAP DML表达式，请参阅<span class="q">“ <a href="enhancing-your-database-analytic-content.html#GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B">使用OLAP DML创建计算的度量</a> ”</span> 。
                     </p>
                  </div>
               </div><a id="OLAUG9494"></a><div class="props_rev_3"><a id="GUID-674F4CD2-EB64-4BDF-9D57-30330D9A6873" name="GUID-674F4CD2-EB64-4BDF-9D57-30330D9A6873"></a><h4 id="OLAUG-GUID-674F4CD2-EB64-4BDF-9D57-30330D9A6873" class="sect4"><span class="enumeration_section">5.5.1</span>使用OLAP表达式语法</h4>
                  <div>
                     <div class="section">
                        <p>在OLAP表达式语法中表达表达式的最简单方法是让Analytic Workspace Manager为您完成工作。您可以使用模板创建类似的计算，并将语法剪切并粘贴为新计算的基础。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-674F4CD2-EB64-4BDF-9D57-30330D9A6873__GUID-56E7D594-6209-4709-89BE-2CC6576CCE0E">要在OLAP表达式语法中创建用户定义的表达式：</p>
                        <ol>
                           <li>
                              <p>打开“创建计算的度量”对话框。</p>
                           </li>
                           <li>
                              <p>选择与您要定义的计算类型最匹配的计算类型。</p>
                           </li>
                           <li>
                              <p>根据需要修改模板。</p>
                           </li>
                           <li>
                              <p>将计算框中的计算剪切并粘贴到文本编辑器中。</p>
                           </li>
                           <li>
                              <p>如果计算使用两个或更多函数，请重复这些步骤。</p>
                           </li>
                           <li>
                              <p>在文本编辑器中根据需要修改计算。您可以在一次计算中组合数字运算符，分析函数和单行函数。</p>
                           </li>
                           <li>
                              <p>从“计算类型”列表中，选择“ <span class="bold">OLAP表达式语法”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>将计算从文本编辑器剪切并粘贴到“计算”框中。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-674F4CD2-EB64-4BDF-9D57-30330D9A6873__GUID-B34C873A-4301-4E40-9BE9-EA793E70410B">
                           <p class="notep1">也可以看看：</p>
                           <p>Analytic Workspace Manager帮助以获取有关OLAP表达式语法的详细信息。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9495"></a><div class="props_rev_3"><a id="GUID-406C2EB3-5B23-44B3-8501-6794815A8777" name="GUID-406C2EB3-5B23-44B3-8501-6794815A8777"></a><h4 id="OLAUG-GUID-406C2EB3-5B23-44B3-8501-6794815A8777" class="sect4"><span class="enumeration_section">5.5.2</span>使用算术运算符的表达式语法示例</h4>
                  <div>
                     <p>此乘法模板使用“已售出单位”和“单位成本”生成计算。</p><pre class="oac_no_warn" dir="ltr">通过测量<span class="underline">UNIT_COST</span>乘以测量<span class="underline">UNITS</span> 。</pre><p>模板使用乘法运算符（*）生成此计算。它出现在“计算”框中。请注意，UNITS位于Units Cube中，UNIT_COST位于Price Cube中。</p><pre class="oac_no_warn" dir="ltr">UNITS_CUBE.UNITS * PRICE_CUBE.UNIT_COST</pre><p>此计算的语法非常简单，您只需要模板即可获取度量的限定名称。</p>
                     <p>以下是自由格式计算，计算出售单位增加2％：</p><pre class="oac_no_warn" dir="ltr">UNITS_CUBE.UNITS * 1.02</pre><p>这些是针对此计算度量的查询结果：</p><pre class="oac_no_warn" dir="ltr">产品单位目标-------------------- ---------- ----------特使大使2116 2158特使执行2481 2531 Envoy Standard 3300 3366 Sentinel Financial 30513 31123 Sentinel Multimedia 7948 8107 Sentinel Standard 7302 7448</pre></div>
               </div><a id="OLAUG9496"></a><div class="props_rev_3"><a id="GUID-04C009C1-8E72-43C7-83E7-B194EEC2BE84" name="GUID-04C009C1-8E72-43C7-83E7-B194EEC2BE84"></a><h4 id="OLAUG-GUID-04C009C1-8E72-43C7-83E7-B194EEC2BE84" class="sect4"><span class="enumeration_section">5.5.3</span>使用分析函数的自由形式计算示例</h4>
                  <div>
                     <p>此累积平均模板生成平均销售量的计算：</p><pre class="oac_no_warn" dir="ltr">累计平均<span class="underline">水平</span>之内的<span class="underline">时间</span>维度<span class="underline">TIME.CALENDAR</span>层次<span class="underline">单位</span> 。从<span class="underline">开始到跟随</span>成员的总数。
</pre><p>模板使用<code class="codeph">AVG</code>函数生成此计算。
                     </p><pre class="oac_no_warn" dir="ltr">AVG（UNITS_CUBE.UNITS）超过HIERARCHY（TIME.CALENDAR在无限制的前进和无限制之后的水平）</pre><p>以下是自由格式计算，计算当前销售单位与累计平均值之间的百分比差异。它使用<code class="codeph">AVG</code>函数和减法（ <code class="codeph">-</code> ），除法（ <code class="codeph">/</code> ）和乘法（ <code class="codeph">*</code> ）运算符。
                     </p><pre class="oac_no_warn" dir="ltr">（（UNITS_CUBE.UNITS  -  AVG（UNITS_CUBE.UNITS）超过HIERARCHY（TIME.CALENDAR在无限制的前进和无限制的下面之后））/ AVG（UNITS_CUBE.UNITS）超过HIERARCHY（TIME.CALLENDAR在无限制的前进和无限制的下面） ）* 100</pre><p>这些是针对此计算度量的查询结果。</p><pre class="oac_no_warn" dir="ltr">时间单位CUM_AVG PCT_DIFF -------- ---------- ---------- ---------- Q1.06 146819 107965 36 Q2。 06 145233 109062 33 Q3.06 143572 110048 30 Q4.06 149305 111138 34</pre><p>您还可以使用模板创建此计算：</p>
                     <ol>
                        <li>
                           <p>使用累积平均模板计算<code class="codeph">UNITS</code>的累积平均值。
                           </p>
                        </li>
                        <li>
                           <p>使用百分比差异模板计算当前<code class="codeph">UNITS</code>与累计平均值之间的百分比差异。
                           </p>
                        </li>
                     </ol>
                  </div>
               </div><a id="OLAUG9498"></a><a id="OLAUG9497"></a><div class="props_rev_3"><a id="GUID-BF8BF273-2C82-4FF0-9BA4-DDB0EAE8DA82" name="GUID-BF8BF273-2C82-4FF0-9BA4-DDB0EAE8DA82"></a><h4 id="OLAUG-GUID-BF8BF273-2C82-4FF0-9BA4-DDB0EAE8DA82" class="sect4"><span class="enumeration_section">5.5.4</span>表达式语法分析函数</h4>
                  <div>
                     <div class="section">
                        <p><a href="enhancing-your-database-analytic-content.html#GUID-BF8BF273-2C82-4FF0-9BA4-DDB0EAE8DA82__CIHBEFFH" title="OLAP分析函数的描述">表5-1</a>描述了<a id="d16111e2537" class="indexterm-anchor"></a>可用于使用OLAP表达式语法创建自由格式计算的分析函数。有关这些函数的语法，请参阅Analytic Workspace Manager帮助。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BF8BF273-2C82-4FF0-9BA4-DDB0EAE8DA82__CIHBEFFH">
                        <p class="titleintable">表5-1 OLAP表达式语法分析函数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="OLAP表达式语法分析函数" width="100%" border="1" summary="Descriptions of OLAP analytic functions" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d16111e2550">功能</th>
                                 <th align="left" valign="bottom" width="69%" id="d16111e2553">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2558" headers="d16111e2550 ">
                                    <p><a id="d16111e2560" class="indexterm-anchor"></a><code class="codeph">AVERAGE_RANK</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2558 d16111e2553 ">
                                    <p>根据表达式的值对维度的成员进行排序。该函数返回维度成员的序列号，并将相同的平均等级分配给相同的值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2568" headers="d16111e2550 ">
                                    <p><code class="codeph">AVG</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2568 d16111e2553 ">
                                    <p>返回随时间计算的一组值的平均值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2576" headers="d16111e2550 ">
                                    <p><code class="codeph">计数</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2576 d16111e2553 ">
                                    <p>统计由维度成员选择标识的数据值的数量。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2584" headers="d16111e2550 ">
                                    <p><code class="codeph">DENSE_RANK</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2584 d16111e2553 ">
                                    <p>根据表达式的值对维度成员进行排序。该函数返回维度成员的序列号，并将相同的最小等级分配给相同的值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2592" headers="d16111e2550 ">
                                    <p><code class="codeph">HIER_ANCESTOR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2592 d16111e2553 ">
                                    <p>返回层次结构中特定级别的祖先或层次结构中的所有成员或特定成员。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2600" headers="d16111e2550 ">
                                    <p><code class="codeph">HIER_CHILD_COUNT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2600 d16111e2553 ">
                                    <p>返回层次结构或特定成员中所有维成员的子项数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2608" headers="d16111e2550 ">
                                    <p><code class="codeph">HIER_DEPTH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2608 d16111e2553 ">
                                    <p>返回表示层次结构或特定成员的所有成员的级别深度的数字，其中0是顶级。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2616" headers="d16111e2550 ">
                                    <p><code class="codeph">HIER_LEVEL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2616 d16111e2553 ">
                                    <p>返回层次结构的所有成员或特定成员的级别。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2624" headers="d16111e2550 ">
                                    <p><a id="d16111e2626" class="indexterm-anchor"></a><code class="codeph">HIER_PARENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2624 d16111e2553 ">
                                    <p>返回层次结构中的所有维成员或特定成员的父成员。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2634" headers="d16111e2550 ">
                                    <p><code class="codeph">HIER_TOP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2634 d16111e2553 ">
                                    <p>返回层次结构的所有成员或特定成员的最顶层祖先。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2642" headers="d16111e2550 ">
                                    <p><code class="codeph">落后</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2642 d16111e2553 ">
                                    <p>返回当前句点之前指定数量的时间段的表达式的值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2651" headers="d16111e2550 ">
                                    <p><code class="codeph">LAG_VARIANCE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2651 d16111e2553 ">
                                    <p>返回当前时间段和前一时间段的值之间的差异。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2659" headers="d16111e2550 ">
                                    <p><code class="codeph">LAG_VARIANCE_PERCENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2659 d16111e2553 ">
                                    <p>返回当前时间段和前一时间段的值之间的百分比。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2667" headers="d16111e2550 ">
                                    <p><code class="codeph">铅</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2667 d16111e2553 ">
                                    <p>返回当前句点之后指定数量的时间段的表达式的值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2675" headers="d16111e2550 ">
                                    <p><code class="codeph">LEAD_VARIANCE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2675 d16111e2553 ">
                                    <p>返回当前时间段和未来时间段的值之间的差异。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2683" headers="d16111e2550 ">
                                    <p><code class="codeph">LEAD_VARIANCE_PERCENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2683 d16111e2553 ">
                                    <p>返回当前时间段和未来时间段的值之间的百分比。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2691" headers="d16111e2550 ">
                                    <p><code class="codeph">MAX</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2691 d16111e2553 ">
                                    <p>返回在特定维度上计算的数据值选择中的最大值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2699" headers="d16111e2550 ">
                                    <p><code class="codeph">MIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2699 d16111e2553 ">
                                    <p>返回在特定维度上计算的数据值选择中的最小值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2707" headers="d16111e2550 ">
                                    <p><code class="codeph">OLAP_DML_EXPRESSION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2707 d16111e2553 ">
                                    <p>在OLAP DML语言中执行表达式。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2715" headers="d16111e2550 ">
                                    <p><code class="codeph">秩</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2715 d16111e2553 ">
                                    <p>根据表达式的值对维度的成员进行排序。该函数返回维度成员的序列号，并将相同的等级分配给相同的值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2723" headers="d16111e2550 ">
                                    <p><code class="codeph">ROW_NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2723 d16111e2553 ">
                                    <p>根据表达式的值对维度的成员进行排序。该函数返回维度成员的序列号，并为相同的值分配唯一且任意的排名。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2731" headers="d16111e2550 ">
                                    <p><code class="codeph">分享</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2731 d16111e2553 ">
                                    <p>计算当前维度成员的表达式值与同一维度的相关成员的值的比率。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d16111e2740" headers="d16111e2550 ">
                                    <p><code class="codeph">和</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d16111e2740 d16111e2553 ">
                                    <p>返回在特定维度上计算的值选择的总和。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div><a id="OLAUG9499"></a><div class="props_rev_3"><a id="GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B" name="GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B"></a><h3 id="OLAUG-GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B" class="sect3"><span class="enumeration_section">5.6</span>使用OLAP DML创建计算度量</h3>
               <div>
                  <p>通过<a href="glossary.html#GUID-03C3266C-AFD7-47A9-898C-E5F382311365"><span class="xrefglossterm">OLAP DML</span></a>可以获得最先进的业务计算，例如预测，模型和分配。 OLAP DML是分析工作区的内部数据定义和操作语言。其主要数据结构是维度，变量，公式和值集。分析工作空间中的这些维对象支持数据库中的高级维对象，例如多维数据集，多维数据集维度，度量，属性和层次结构。
                  </p>
                  <p>OLAP DML中的几个命令支持维度数据库对象，例如多维数据集，级别和层次结构。您可以在语言中使用这些命令以及其他函数，运算符等。</p>
                  <div class="infoboxnotealso" id="GUID-DB027525-B8A4-4B2A-ABE8-20D8210E656B__GUID-EA1409F8-65F6-403F-8190-45373A01E6DE">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="italic">Oracle OLAP DML参考</span>中的“Cube-Aware OLAP DML语句”</p>
                  </div>
                  <p>OLAP DML是一种成熟的语言，专门用于创建和管理维对象以及处理维度数据。尽管OLAP DML中的编程需要很高的技能，但该语言比任何其他语言都具有更强大的功能和灵活性。</p>
               </div><a id="OLAUG9500"></a><div class="props_rev_3"><a id="GUID-B29B7D42-4626-41CA-8105-AA29ED69BC3A" name="GUID-B29B7D42-4626-41CA-8105-AA29ED69BC3A"></a><h4 id="OLAUG-GUID-B29B7D42-4626-41CA-8105-AA29ED69BC3A" class="sect4"><span class="enumeration_section">5.6.1</span>选择OLAP DML计算类型</h4>
                  <div>
                     <div class="section">
                        <p>Analytic Workspace Manager使用OLAP DML支持两种类型的用户定义表达式：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">OLAP DML表达式</span> ：计算OLAP DML表达式。选择此计算类型以执行现有程序，内置函数或单个表达式。表达式存储为分析工作区中公式的EQ语句。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">OLAP DML功能</span> ：执行在Program Body字段中输入的OLAP DML程序，该程序返回值。选择此计算类型以在OLAP DML中开发新程序。程序的名称存储在分析工作区中公式的EQ语句中。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B29B7D42-4626-41CA-8105-AA29ED69BC3A__GUID-A6134767-0E8C-4CDF-B31C-8E2C5D990529">要创建OLAP DML表达式：</p>
                        <ol>
                           <li>
                              <p>打开“创建计算的度量”对话框。</p>
                           </li>
                           <li>
                              <p>从“计算类型”列表中，选择“ <span class="bold">OLAP DML表达式”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>对于“数据类型”，选择返回值的数据类型。</p>
                           </li>
                           <li>
                              <p>在OLAP DML字段中输入表达式。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">编译表达式”</span>以检查语法错误并保存表达式的编译版本。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>以创建计算的度量。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B29B7D42-4626-41CA-8105-AA29ED69BC3A__GUID-7198CE17-9E1C-40DB-9F3C-E771514EB99F">要创建OLAP DML函数：</p>
                        <ol>
                           <li>
                              <p>打开“创建计算的度量”对话框。</p>
                           </li>
                           <li>
                              <p>从“计算类型”列表中，选择“ <span class="bold">OLAP DML函数”。</span></p>
                           </li>
                           <li>
                              <p>对于“数据类型”，选择返回值的数据类型。</p>
                           </li>
                           <li>
                              <p>输入功能的名称。</p>
                           </li>
                           <li>
                              <p>在Program Body字段中输入程序。省略<code class="codeph">DEFINE</code> ， <code class="codeph">PROGRAM</code>和<code class="codeph">END</code>命令，因为它们是自动生成的。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">编译表达式”</span>以检查语法错误并保存程序的编译版本。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>以创建计算的度量。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9502"></a><a id="OLAUG9501"></a><div class="props_rev_3"><a id="GUID-341BC68E-FE5D-4DF3-8058-35A8DA60D123" name="GUID-341BC68E-FE5D-4DF3-8058-35A8DA60D123"></a><h4 id="OLAUG-GUID-341BC68E-FE5D-4DF3-8058-35A8DA60D123" class="sect4"><span class="enumeration_section">5.6.2</span> OLAP DML表达式示例</h4>
                  <div>
                     <p>OLAP DML具有许多内置函数。此示例使用<code class="codeph">RANDOM</code>函数创建计算的度量。<a href="enhancing-your-database-analytic-content.html#GUID-341BC68E-FE5D-4DF3-8058-35A8DA60D123__BABECJDJ">图5-6</a>显示了这个简单计算的定义。计算的度量值生成默认范围0到1的值。
                     </p>
                     <div class="figure" id="GUID-341BC68E-FE5D-4DF3-8058-35A8DA60D123__BABECJDJ">
                        <p class="titleinfigure">图5-6使用OLAP DML表达式</p><img width="193" src="img/dml_express.gif" alt="下面是图5-6的描述" title="下面是图5-6的描述" longdesc="img_text/dml_express.html"><br><a href="img_text/dml_express.html">“图5-6使用OLAP DML表达式”的说明</a></div>
                     <!-- class="figure" -->
                     <p>下一个示例使用算术运算符计算出售单位增加2％。OLAP DML的这个示例与<span class="q">“ <a href="enhancing-your-database-analytic-content.html#GUID-406C2EB3-5B23-44B3-8501-6794815A8777">使用算术运算符的表达式语法示例</a> ”中</span>的示例相同。但是，请注意该度量的命名约定的不同之处。
                     </p><pre class="oac_no_warn" dir="ltr">units_cube_units * 1.02</pre><p>这些是针对作为OLAP DML表达式创建的两个计算度量的查询结果：</p><pre class="oac_no_warn" dir="ltr">产品单位目标随机-------------------- ---------- ---------- ------ ----特使大使2116 2158 .6467特使执行2481 2531 .0773特使标准3300 3366 .2349 Sentinel Financial 30513 31123 .6027 Sentinel Multimedia 7948 8107 .6494 Sentinel Standard 7302 7448 .5912</pre></div>
               </div><a id="OLAUG9505"></a><a id="OLAUG9504"></a><a id="OLAUG9503"></a><div class="props_rev_3"><a id="GUID-3C854ACC-02C0-40FC-B06D-F90FC85F3175" name="GUID-3C854ACC-02C0-40FC-B06D-F90FC85F3175"></a><h4 id="OLAUG-GUID-3C854ACC-02C0-40FC-B06D-F90FC85F3175" class="sect4"><span class="enumeration_section">5.6.3</span> OLAP DML功能示例</h4>
                  <div>
                     <p>返回值的OLAP DML程序也是函数。</p>
                     <div class="example" id="GUID-3C854ACC-02C0-40FC-B06D-F90FC85F3175__GUID-DD156CEC-3CA9-4955-ACB3-9FE47C51D680">
                        <p class="titleinexample">例5-1 OLAP DML函数</p>
                        <p>当前销售额低于上一年时，此示例中的程序返回值<code class="codeph">ALERT</code> 。实际计算由另一个计算的度量UNITS_CUBE_SALES_PCT_CHG_PY执行，该度量是与销售前一年相比的百分比变化。如果销售额较大，则程序返回<code class="codeph">OKAY</code> 。</p><pre class="oac_no_warn" dir="ltr">VARIABLE _alert TEXT VARIABLE _product NUMBER TRAP ON error _product = product + 0 TEMPSTAT product DO LIMIT product to CHILDREN using product_parentrel _product LIMIT product KEEP UNITS_CUBE_SALES_PCT_CHG_PY LT 0 IF STATLEN（product）GT 0 THEN _alert ='ALERT'ELSE _alert ='OKAY'DENDE RETURN _alert error：RETURN'ERROR'</pre><p>该图显示了程序的定义作为计算量度。</p>
                        <div class="figure" id="GUID-3C854ACC-02C0-40FC-B06D-F90FC85F3175__BABDHIDB">
                           <p class="titleinfigure">图5-7使用OLAP DML函数</p><img src="img/dml_function.gif" width="459" alt="下面是图5-7的描述" title="下面是图5-7的描述" longdesc="img_text/dml_function.html"><br><a href="img_text/dml_function.html">“图5-7使用OLAP DML函数”的说明</a></div>
                        <!-- class="figure" -->
                        <p>这些是针对此计算度量的查询结果：</p><pre class="oac_no_warn" dir="ltr">通道时间PCTCHG状态--------------- -------- ---------- ------目录Q1.06 -1 ALERT目录Q2.06 -1警报目录Q3.06 -3警报目录Q4.06 -7警报直接销售Q1.06 -3警报直接销售Q2.06 -1警报直销Q3.06 10 OKAY直接销售Q4.06  - 4 ALERT Internet Q1.06 29 OKAY Internet Q2.06 3 ALERT Internet Q3.06 0 ALERT Internet Q4.06 16 OKAY</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
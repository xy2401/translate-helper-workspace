<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This tutorial demonstrates how to create Oracle Label Security levels."></meta>
      <meta name="description" content="This tutorial demonstrates how to create Oracle Label Security levels."></meta>
      <title>教程：在Oracle Label Security中配置级别</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="This tutorial demonstrates how to create Oracle Label Security levels."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="label-security-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-11T09:39:52-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96303-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-label-security-tutorials.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configuring-ols-compartments.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Label Security Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OLSAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-label-security-tutorials.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configuring-ols-compartments.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-label-security-tutorials.html" property="item" typeof="WebPage"><span property="name">Oracle Label Security教程</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">教程：在Oracle Label Security中配置级别</li>
            </ol>
            <a id="GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" name="GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638"></a>
            
            <h2 id="OLSAG-GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" class="sect2"><span class="enumeration_chapter">8</span>教程：在Oracle Label Security中配置级别</h2>
         </header>
         <div class="ind">
            <div>
               <p>本教程演示了如何创建Oracle Label Security级别。</p>
               <p></p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-394CFFA4-2F49-4372-B982-B35C210B992A">关于本教程</a><br>在本教程中，您将使用<code class="codeph">HR</code>模式来了解如何使用Oracle Label Security级别。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-1809C3F9-F89F-45C4-AA95-BCFCFFDAB1A6">第1步：创建角色和用户帐户</a><br>您创建的角色将允许授予它的任何用户在<code class="codeph">HR.EMPLOYEES</code>表上具有<code class="codeph">SELECT</code>权限。用户帐户适用于两名人力资源员工Susan Mavris和Ida Neau。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-8E658D6A-FF7D-48E1-8DA2-E25C6976E501">第2步：创建Oracle Label Security策略容器</a><br>作为Oracle Label Security管理员，您必须创建并启用策略容器。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-48E80610-F446-4D56-A42E-5116CF631CC1">步骤3：为Oracle Label Security策略创建两级组件</a><br>创建Oracle Label Security策略容器后，您就可以创建两个级别来表示两种不同的灵敏度级别。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-6A1FE8EF-8990-418A-A416-5493B9FB7592">第4步：为级别创建数据标签</a><br>数据标签标记数据记录以与Oracle Label Security策略一起使用。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-7D011E64-63F8-4990-871B-39465C2CC3DF">步骤5：为Oracle Label Security Policy设置用户授权</a><br>设置用户授权需要将用户与策略以及与Oracle Label Security策略关联的最低和最高级别相关联。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-857EDF94-2858-4F8A-9CEC-14B74B6DB69D">步骤6：将Oracle Label Security Policy应用于HR Schema</a><br>将策略应用于<code class="codeph">HR</code>模式后，必须启用与<code class="codeph">HR</code>的策略关联。</li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-A156343A-A18F-4955-A7C0-7F87DF8CFC88">步骤7：将策略标签添加到HR.EMPLOYEES表数据</a><br>Oracle Label Security管理员和<code class="codeph">HR</code>用户都将策略标签添加到<code class="codeph">EMPLOYEE_ID</code>列中的<code class="codeph">HR.EMPLOYEES</code>表数据。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-4F56420D-96F0-4B23-A634-B39DA37FCB24">步骤8：测试Oracle Label Security Policy</a><br>要测试策略，每个用户都将尝试查询<code class="codeph">HR.EMPLOYEES</code>表。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-F48DC204-C45C-496A-9125-FBD568ADACC4">步骤9：（可选）删除Oracle Label Security策略组件</a><br>您可以删除Oracle Label Security策略， <code class="codeph">HR_ROLE</code>角色以及Ida Neau和Susan Mavris用户。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-label-security-tutorials.html" title="第III部分提供了有关如何创建Oracle Label Security策略的教程。">Oracle Label Security教程</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-394CFFA4-2F49-4372-B982-B35C210B992A" name="GUID-394CFFA4-2F49-4372-B982-B35C210B992A"></a><h3 id="OLSAG-GUID-394CFFA4-2F49-4372-B982-B35C210B992A" class="sect3">关于本教程</h3>
               <div>
                  <p>在本教程中，您将使用<code class="codeph">HR</code>模式来了解如何使用Oracle Label Security级别。
                  </p>
                  <p>人力资源代表Susan Mavris有一位助理为她工作，Ida Neau。Susan Mavris必须能够访问所有员工记录，包括离开公司的员工记录。Ida Neau必须只能访问当前的员工。</p>
                  <p>您将创建一个Oracle Label Security策略，该策略将使用以下级别的敏感性来管理对当前和以前员工的访问：</p>
                  <ul id="GUID-394CFFA4-2F49-4372-B982-B35C210B992A__UL_PBD_J4R_4GB" style="list-style-type:disc">
                     <li><code class="codeph">SENSITIVE</code>仅允许访问当前员工。用户Ida Neau将被分配这个级别。
                     </li>
                     <li><code class="codeph">HIGHLY_SENSITIVE</code>可以访问前雇员。用户Susan Mavris将被分配到这个级别。此级别比<code class="codeph">SENSITIVE</code>更高级别，这意味着它还将提供对<code class="codeph">SENSITIVE</code>保护的行的访问。换句话说，Susan Mavris可以访问前雇员和当前员工记录。
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-1809C3F9-F89F-45C4-AA95-BCFCFFDAB1A6" name="GUID-1809C3F9-F89F-45C4-AA95-BCFCFFDAB1A6"></a><h3 id="OLSAG-GUID-1809C3F9-F89F-45C4-AA95-BCFCFFDAB1A6" class="sect3">第1步：创建角色和用户帐户</h3>
               <div>
                  <p>您创建的角色将允许授予它的任何用户在<code class="codeph">HR.EMPLOYEES</code>表上具有<code class="codeph">SELECT</code>权限。用户帐户适用于两名人力资源员工Susan Mavris和Ida Neau。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>以具有创建角色，授予权限和创建用户帐户权限的用户身份登录SQL * Plus。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>创建角色如下：</span><div><pre class="oac_no_warn" dir="ltr">创建角色HR_ROLE;</pre></div>
                     </li>
                     <li class="stepexpand"><span>将<code class="codeph">HR.EMPLOYEES</code>的<code class="codeph">SELECT</code>权限授予<code class="codeph">HR_ROLE</code> 。</span><div><pre class="oac_no_warn" dir="ltr">在HR.EMPLOYEES上选择HR_ROLE;</pre></div>
                     </li>
                     <li class="stepexpand"><span>为Susan Mavris和Ida Neau创建用户帐户，并授予他们<code class="codeph">HR_ROLE</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">GRANT CONNECT，HR_ROLE到SMAVRIS通过<span class="italic">密码</span>识别; GRANT CONNECT，HR_ROLE to INEAU通过<span class="italic">密码</span>识别;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-8E658D6A-FF7D-48E1-8DA2-E25C6976E501" name="GUID-8E658D6A-FF7D-48E1-8DA2-E25C6976E501"></a><h3 id="OLSAG-GUID-8E658D6A-FF7D-48E1-8DA2-E25C6976E501" class="sect3">第2步：创建Oracle Label Security策略容器</h3>
               <div>
                  <p>作为Oracle Label Security管理员，您必须创建并启用策略容器。</p>
                  <ol>
                     <li class="stepexpand"><span>以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>创建策略。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_SYSDBA.CREATE_POLICY（policy_name =&gt;'HR_OLS_POL'，column_name =&gt;'OLS_COL'）;结束; /</pre><p>在本规范中，省略了<code class="codeph">default_options</code>参数，因为您可以稍后在另一个过程中添加它。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>启用该策略。</span><div><pre class="oac_no_warn" dir="ltr">EXEC SA_SYSDBA.ENABLE_POLICY（'HR_OLS_POL'）;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-48E80610-F446-4D56-A42E-5116CF631CC1" name="GUID-48E80610-F446-4D56-A42E-5116CF631CC1"></a><h3 id="OLSAG-GUID-48E80610-F446-4D56-A42E-5116CF631CC1" class="sect3">步骤3：为Oracle Label Security策略创建两级组件</h3>
               <div>
                  <p>创建Oracle Label Security策略容器后，您就可以创建两个级别来表示两种不同的灵敏度级别。</p>
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>创建级别如下：</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_COMPONENTS.CREATE_LEVEL（policy_name =&gt;'HR_OLS_POL'，level_num =&gt; 3000，short_name =&gt;'HS'，long_name =&gt;'HIGHLY_SENSITIVE'）; SA_COMPONENTS.CREATE_LEVEL（policy_name =&gt;'HR_OLS_POL'，level_num =&gt; 2000，short_name =&gt;'S'，long_name =&gt;'SENSITIVE'）;结束; /</pre><p>在本规范中：</p>
                           <ul id="GUID-48E80610-F446-4D56-A42E-5116CF631CC1__UL_FGF_ZSR_4GB" style="list-style-type:disc">
                              <li><code class="codeph">policy_name</code>将级别与您刚刚创建的策略容器相关联。
                              </li>
                              <li><code class="codeph">level_num</code>确定用户可以拥有多少访问权限。级别号<code class="codeph">3000</code>使用户能够访问此级别及其下的任何级别编号，在本例中为级别编号<code class="codeph">2000</code> 。换句话说，被授权具有<code class="codeph">HIGHLY_SENSITIVE</code>级别的用户也可以访问分配给<code class="codeph">SENSITIVE</code>级别的数据。
                              </li>
                              <li><code class="codeph">short_name</code>对于短手的名字<code class="codeph">long_name</code>水平，并会在其它程序被用来指<code class="codeph">long_name</code>水平的版本。
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-6A1FE8EF-8990-418A-A416-5493B9FB7592" name="GUID-6A1FE8EF-8990-418A-A416-5493B9FB7592"></a><h3 id="OLSAG-GUID-6A1FE8EF-8990-418A-A416-5493B9FB7592" class="sect3">第4步：为级别创建数据标签</h3>
               <div>
                  <p>数据标签标记数据记录以与Oracle Label Security策略一起使用。</p>
                  <div class="section">在此过程中，数据标签将指定用户Susan Mavris和Ida Neau将在<code class="codeph">HR.EMPLOYEES</code>表中看到的行。标记为<code class="codeph">HS</code>行将对应于要分配给Susan Mavris的<code class="codeph">HS</code> （ <code class="codeph">HIGHLY_SENSITIVE</code> ）级别，标记为<code class="codeph">S</code>行将对应于要分配给Ida Neau的<code class="codeph">S</code> （ <code class="codeph">SENSITIVE</code> ）级别。
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>创建数据标签，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_LABEL_ADMIN.CREATE_LABEL（policy_name =&gt;'HR_OLS_POL'，label_tag =&gt; 3100，label_value =&gt;'HS'，data_label =&gt; TRUE）; SA_LABEL_ADMIN.CREATE_LABEL（policy_name =&gt;'HR_OLS_POL'，label_tag =&gt; 2100，label_value =&gt;'S'，data_label =&gt; TRUE）;结束; /</pre><p>在本规范中：</p>
                           <ul id="GUID-6A1FE8EF-8990-418A-A416-5493B9FB7592__UL_FGF_ZSR_4GB" style="list-style-type:disc">
                              <li><code class="codeph">label_tag</code>由Oracle Label Security在内部用于标识级别。与级别不同，它不管理带有标签的任何类型的层次结构。
                              </li>
                              <li><code class="codeph">data_label</code>设置为<code class="codeph">TRUE</code>以便标签可以应用于行数据。
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-7D011E64-63F8-4990-871B-39465C2CC3DF" name="GUID-7D011E64-63F8-4990-871B-39465C2CC3DF"></a><h3 id="OLSAG-GUID-7D011E64-63F8-4990-871B-39465C2CC3DF" class="sect3">步骤5：为Oracle Label Security Policy设置用户授权</h3>
               <div>
                  <p>设置用户授权需要将用户与策略以及与Oracle Label Security策略关联的最低和最高级别相关联。</p>
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>授权用户如下：</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_USER_ADMIN.SET_LEVELS（policy_name =&gt;'HR_OLS_POL'，user_name =&gt;'SMAVRIS'，max_level =&gt;'HS'，min_level =&gt;'S'）; SA_USER_ADMIN.SET_LEVELS（policy_name =&gt;'HR_OLS_POL'，user_name =&gt;'INEAU'，max_level =&gt;'S'，min_level =&gt;'S'）;结束; /</pre><p>在本规范中，省略了<code class="codeph">def_level</code> （默认级别）和<code class="codeph">row_level</code>参数，以便它们的值可以默认为<code class="codeph">max_level</code>参数设置。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-857EDF94-2858-4F8A-9CEC-14B74B6DB69D" name="GUID-857EDF94-2858-4F8A-9CEC-14B74B6DB69D"></a><h3 id="OLSAG-GUID-857EDF94-2858-4F8A-9CEC-14B74B6DB69D" class="sect3">步骤6：将Oracle Label Security Policy应用于HR Schema</h3>
               <div>
                  <p>将策略应用于<code class="codeph">HR</code>模式后，必须启用与<code class="codeph">HR</code>的策略关联。</p>
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>将策略应用于<code class="codeph">HR</code>模式。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_POLICY_ADMIN.APPLY_TABLE_POLICY（policy_name =&gt;'HR_OLS_POL'，schema_name =&gt;'HR'，table_name =&gt;'EMPLOYEES'，table_options =&gt;'READ_CONTROL'）;结束; /</pre><p>之前，当您使用<code class="codeph">SA_SYSDBA.CREATE_POLICY</code>过程创建策略时，未设置<code class="codeph">default_options</code>参数，该参数定义策略强制选项。因此，必须使用<code class="codeph">table_options</code>参数<code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code>在此处设置策略实施。 <code class="codeph">READ_CONTROL</code>在<code class="codeph">SELECT</code>语句处理期间强制执行OLS策略，用户稍后将执行该策略。（它也适用于<code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>语句处理。）
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>启用策略与<code class="codeph">HR</code>模式的关联。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_POLICY_ADMIN.ENABLE_TABLE_POLICY（policy_name =&gt;'HR_OLS_POL'，schema_name =&gt;'HR'，table_name =&gt;'EMPLOYEES'）;结束; /</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-A156343A-A18F-4955-A7C0-7F87DF8CFC88" name="GUID-A156343A-A18F-4955-A7C0-7F87DF8CFC88"></a><h3 id="OLSAG-GUID-A156343A-A18F-4955-A7C0-7F87DF8CFC88" class="sect3">步骤7：将策略标签添加到HR.EMPLOYEES表数据</h3>
               <div>
                  <p>Oracle Label Security管理员和<code class="codeph">HR</code>用户都将策略标签添加到<code class="codeph">EMPLOYEE_ID</code>列中的<code class="codeph">HR.EMPLOYEES</code>表数据。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>将<code class="codeph">READ</code>权限授予<code class="codeph">HR</code>用户的<code class="codeph">HR_OLS_POL</code>策略。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_USER_ADMIN.SET_USER_PRIVS（policy_name =&gt;'HR_OLS_POL'，user_name =&gt;'HR'，privileges =&gt;'READ'）;结束; /</pre></div>
                     </li>
                     <li class="stepexpand"><span>以<code class="codeph">HR</code>用户身份连接。</span><div><pre class="oac_no_warn" dir="ltr">connect hr输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>执行以下<code class="codeph">UPDATE</code>语句以将<code class="codeph">HIGHLY_SENSITIVE</code>级别应用于已离开公司的用户的员工ID。</span><div>此<code class="codeph">UPDATE</code>语句控制Susan Mavris对<code class="codeph">HR.EMPLOYEES</code>表的访问权限，因为她已获得<code class="codeph">HIGHLY_SENSITIVE</code>级别的授权。
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">UPDATE员工SET ols_col = CHAR_TO_LABEL（'HR_OLS_POL'，'HS'）WHERE UPPER（employee_id）IN（200,101,102,176,201,122,114）;</pre></div>
                     </li>
                     <li class="stepexpand"><span>执行以下<code class="codeph">UPDATE</code>语句以将<code class="codeph">SENSITIVE</code>级别应用于公司当前员工的员工ID。</span><div>此<code class="codeph">UPDATE</code>语句控制Ida Neau对<code class="codeph">HR.EMPLOYEES</code>表的访问权限，因为她已获得<code class="codeph">SENSITIVE</code>级别的授权。
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">UPDATE员工SET ols_col = CHAR_TO_LABEL（'HR_OLS_POL'，'S'）WHERE UPPER（employee_id）NOT IN（200,101,102,176,201,122,114）;</pre><p>此<code class="codeph">UPDATE</code>语句转换为“将<code class="codeph">SENSITIVE</code>标签应用于任何不是前雇员的员工”。</p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-4F56420D-96F0-4B23-A634-B39DA37FCB24" name="GUID-4F56420D-96F0-4B23-A634-B39DA37FCB24"></a><h3 id="OLSAG-GUID-4F56420D-96F0-4B23-A634-B39DA37FCB24" class="sect3">步骤8：测试Oracle Label Security Policy</h3>
               <div>
                  <p>要测试策略，每个用户都将尝试查询<code class="codeph">HR.EMPLOYEES</code>表。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>以用户Ida Neau身份连接。</span><div><pre class="oac_no_warn" dir="ltr">connect ineau输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>设置表输出的列宽。</span><div><pre class="oac_no_warn" dir="ltr">列first_name格式a25列last_name格式a25列ols_label格式a10</pre></div>
                     </li>
                     <li class="stepexpand"><span>执行以下查询：</span><div><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，EMPLOYEE_ID，LABEL_TO_CHAR（OLS_COL）OLS_LABEL来自HR.EMPLOYEES ORDER by OLS_COL;</pre><p>输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME LAST_NAME EMPLOYEE_ID OLS_LABEL ------------------------- --------------------- ---- ----------- ---------- Steven King 100 S Alexander Hunold 103 S Bruce Ernst 104 S David Austin 105 S Valli Pataballa 106 S Diana Lorentz 107 S Nancy Greenberg 108 S Daniel Faviet 109 S ...选择了100行</pre><p>由于Ida Neau被分配了<code class="codeph">SENSITIVE</code>标签，因此<code class="codeph">OLS_LABEL</code>列中的输出<code class="codeph">OLS_LABEL</code> <code class="codeph">S</code> （对于<code class="codeph">SENSITIVE</code> ）。返回100行。
                           </p>
                           <p>请注意，Oracle Label Security限制适用于用户进行的任何<code class="codeph">SELECT</code>查询。例如，如果Ida Neau执行<code class="codeph">SELECT COUNT(*) FROM HR.EMPLOYEES;</code>查询，那么它将返回这100行，而不是完整的107行。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>以Susan Mavris用户身份连接。</span><div><pre class="oac_no_warn" dir="ltr">connect smavris输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>执行Ida Neau执行的相同查询。</span><div><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，EMPLOYEE_ID，LABEL_TO_CHAR（OLS_COL）OLS_LABEL来自HR.EMPLOYEES ORDER by OLS_COL;</pre><p>输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME LAST_NAME EMPLOYEE_ID OLS_LABEL ------------------------- --------------------- ---- ----------- ---------- Steven King 100 S Alexander Hunold 103 S ......William Gietz 206 S Neena Kochhar 101 HS Lex De Haan 102 HS Den Raphaely 114 HS Michael Hartstein 201 HS Jonathon Taylor 176 HS Jennifer Whalen 200 HS Payam Kaufling 122 HS 107行入选</pre><p>因为Susan Mavris被分配了<code class="codeph">HIGHLY_SENSITIVE</code>标签，所以<code class="codeph">OLS_LABEL</code>列中的输出是<code class="codeph">HS</code> （用于<code class="codeph">HIGHLY_SENSITIVE</code> ）和<code class="codeph">S</code> （用于<code class="codeph">SENSITIVE</code> ）。返回107行。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-F48DC204-C45C-496A-9125-FBD568ADACC4" name="GUID-F48DC204-C45C-496A-9125-FBD568ADACC4"></a><h3 id="OLSAG-GUID-F48DC204-C45C-496A-9125-FBD568ADACC4" class="sect3">步骤9：（可选）删除Oracle Label Security策略组件</h3>
               <div>
                  <p>您可以删除Oracle Label Security策略， <code class="codeph">HR_ROLE</code>角色以及Ida Neau和Susan Mavris用户。
                  </p>
                  <div class="section">
                     <p>但是，如果要尝试有关如何创建Oracle Label Security隔离专区的教程，请不要删除这些组件。隔离专区的教程建立在本教程的基础上。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>删除Oracle Label Security策略。</span><div>此过程还会从<code class="codeph">HR.EMPLOYEES</code>表中删除级别和<code class="codeph">OLS_COL</code>列。
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">BEGIN SA_SYSDBA.DROP_POLICY（policy_name =&gt;'HR_OLS_POL'，drop_column =&gt; TRUE）;结束; /</pre></div>
                     </li>
                     <li class="stepexpand"><span>以具有删除角色和用户帐户权限的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">connect sec_admin输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>删除<code class="codeph">HR_ROLE</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">DROP ROLE HR_ROLE;</pre></div>
                     </li>
                     <li class="stepexpand"><span>删除<code class="codeph">ineau</code>和<code class="codeph">smavris</code>帐户。</span><div><pre class="oac_no_warn" dir="ltr">DROP USER INEAU; DROP USER SMAVRIS;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="本教程演示了如何创建Oracle Label Security隔离专区。">教程：在Oracle Label Security中配置隔离专区</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="本教程演示了如何创建Oracle Label Security级别。">教程：在Oracle Label Security中配置级别</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
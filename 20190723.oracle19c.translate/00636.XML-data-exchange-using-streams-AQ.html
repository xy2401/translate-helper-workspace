<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models.">
      <meta name="description" content="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models.">
      <title>XML Data Exchange Using Oracle Database Advanced Queuing</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96222-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="export-and-import-of-XML-DB-data.html" title="Previous" type="text/html">
      <link rel="next" href="appendices.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADXDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="export-and-import-of-XML-DB-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="appendices.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-tools-that-support-XML-DB.html" property="item" typeof="WebPage"><span property="name"> Oracle Tools that Support Oracle XML&nbsp;DB</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> XML Data Exchange Using Oracle Database Advanced Queuing</li>
            </ol>
            <a id="GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" name="GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968"></a><a id="ADXDB3100"></a>
            
            <h2 id="ADXDB-GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" class="sect2"><span class="enumeration_chapter">37 </span> XML Data Exchange Using Oracle Database Advanced Queuing
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models.</p>
               <p>Integration of message queuing with Oracle Database brings the integrity, reliability, recoverability, scalability, performance, and security features of Oracle Database to message queuing. It also facilitates the extraction of intelligence from message flows.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662">XML and Oracle Database Advanced Queuing</a><br>Oracle Database Advanced Queuing (AQ) supports native XML messages. AQ operations can be defined using the XML-based Internet-Data-Access-Presentation (iDAP) format. iDAP is an extensible message invocation protocol. It is built on Internet standards, using HTTP(S) and e-mail protocols as the transport mechanism. XML is the data representation language for iDAP.
                  </li>
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-E2F1B62A-F15C-439D-978B-C3B7D35AF661">Oracle Database Advanced Queuing</a><br>Oracle Database Advanced Queuing (AQ) lets you share data and events in a queue. It can propagate information within a database or from one database to another, routing information to specified destinations. It provides functionality and flexibility for capturing and managing events, and for sharing events with other databases and applications.
                  </li>
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-BBC8B98A-48F8-4CD7-A5AB-F1CF97C6D4CB">XMLType Attributes in Object Types</a><br>You can create queues that use Oracle object types containing <code class="codeph">XMLType</code> attributes. These queues can be used to transmit and store messages that are XML documents. 
                  </li>
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-3F8306F4-2B18-4F46-A634-534475577FE1">Internet Data Access Presentation (iDAP): SOAP for AQ</a><br>You can access Oracle Database Advanced Queuing (AQ) over the Internet using Simple Object Access Protocol (SOAP). Internet Data Access Presentation (iDAP) is the SOAP specification for AQ operations. iDAP defines XML message structure for a SOAP request body. 
                  </li>
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-CBD2525F-4E5D-472C-9949-594500EA023A">iDAP Architecture</a><br>Oracle Database Advanced Queuing (AQ) operations that use HTTP(S) require an iDAP HTTP client, a Web server, and an Oracle server.
                  </li>
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244">Guidelines for Using XML and Oracle Database Advanced Queuing</a><br>Guidelines are presented for using XML data with Oracle Database Advanced Queuing.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="oracle-tools-that-support-XML-DB.html#GUID-6E519C79-C879-46D0-BAD4-3E9FEA7BA35F" title="You can use various Oracle tools with Oracle XML&nbsp;DB. These include tools for managing Oracle XML&nbsp;DB, loading XML data, and exchanging XML data.">Oracle Tools that Support Oracle XML&nbsp;DB</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5750"></a><div class="props_rev_3"><a id="GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662" name="GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662"></a><h3 id="ADXDB-GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662" class="sect3"><span class="enumeration_section">37.1 </span>XML and Oracle Database Advanced Queuing
               </h3>
               <div>
                  <p>Oracle Database Advanced Queuing (AQ) supports native XML messages. AQ operations can be defined using the XML-based Internet-Data-Access-Presentation (iDAP) format. iDAP is an extensible message invocation protocol. It is built on Internet standards, using HTTP(S) and e-mail protocols as the transport mechanism. XML is the data representation language for iDAP.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13">Oracle Database Advanced Queuing and XML Message Payloads</a><br>XML messages can be passed asynchronously among applications using Oracle Database Advanced Queuing (AQ).
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-E61C941B-BE6D-4C01-92CC-23C5CCF75340">Advantages of Using Oracle Database Advanced Queuing</a><br>Oracle Database Advanced Queuing (AQ) provides flexibility in configuring communication between applications. It makes an integrated solution easy to manage, easy to configure, and easy to modify, to meet changing business needs. It enables applications to cooperate, coordinate, and synchronize, to carry out complex business transactions. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models.">XML Data Exchange Using Oracle Database Advanced Queuing</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5752"></a><a id="ADXDB5751"></a><div class="props_rev_3"><a id="GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13" name="GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13"></a><h4 id="ADXDB-GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13" class="sect4"><span class="enumeration_section">37.1.1 </span>Oracle Database Advanced Queuing and XML Message Payloads
                  </h4>
                  <div>
                     <p>XML messages can be passed asynchronously among applications using Oracle Database Advanced Queuing (AQ).</p>
                     <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13__I1029921">Figure 37-1</a> shows an Oracle database using AQ to communicate with three applications. The message payload is XML data. The general tasks performed by AQ in this scenario are:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Message flow using subscription rules</p>
                        </li>
                        <li>
                           <p>Message management</p>
                        </li>
                        <li>
                           <p>Extraction of business intelligence from messages</p>
                        </li>
                        <li>
                           <p>Message transformation</p>
                        </li>
                     </ul>
                     <p>Use cases of passing XML messages asynchronously among applications using AQ:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Intra-business. Typical examples include sales order fulfillment and supply-chain management.</p>
                        </li>
                        <li>
                           <p>Inter-business. Multiple integration hubs can communicate over the Internet. Examples include travel reservations, coordination between manufacturers and suppliers, transfer of funds between banks, and insurance claims settlements.</p>
                           <p>Oracle uses this approach in its enterprise application integration products. XML messages are sent from applications to an Oracle AQ hub. The hub serves as a message server for any application that wants the message. Through this hub-and-spoke architecture, XML messages can be communicated asynchronously to multiple loosely coupled applications. </p>
                        </li>
                     </ul>
                     <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13__I1029921">Figure 37-1</a> shows XML payload messages transported using AQ in the following ways:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A Web-based application uses an AQ operation over an HTTP(S) connection using iDAP</p>
                        </li>
                        <li>
                           <p>An application uses AQ to propagate an XML message over a Net* connection</p>
                        </li>
                        <li>
                           <p>An application uses AQ to propagate an Internet or XML message directly to the database using HTTP(S) or SMTP</p>
                        </li>
                     </ul>
                     <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13__I1029921">Figure 37-1</a> also shows that AQ clients can access data using OCI, Java, or PL/SQL.
                     </p>
                     <div class="figure" id="GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13__I1029921">
                        <p class="titleinfigure">Figure 37-1 Oracle Database Advanced Queuing and XML Message Payloads</p><img src="img/adque437.gif" width="569" alt="Description of Figure 37-1 follows" title="Description of Figure 37-1 follows" longdesc="img_text/adque437.html"><br><a href="img_text/adque437.html">Description of "Figure 37-1 Oracle Database Advanced Queuing and XML Message Payloads"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662" title="Oracle Database Advanced Queuing (AQ) supports native XML messages. AQ operations can be defined using the XML-based Internet-Data-Access-Presentation (iDAP) format. iDAP is an extensible message invocation protocol. It is built on Internet standards, using HTTP(S) and e-mail protocols as the transport mechanism. XML is the data representation language for iDAP.">XML and Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5756"></a><div class="props_rev_3"><a id="GUID-E61C941B-BE6D-4C01-92CC-23C5CCF75340" name="GUID-E61C941B-BE6D-4C01-92CC-23C5CCF75340"></a><h4 id="ADXDB-GUID-E61C941B-BE6D-4C01-92CC-23C5CCF75340" class="sect4"><span class="enumeration_section">37.1.2 </span>Advantages of Using Oracle Database Advanced Queuing
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing (AQ) provides flexibility in configuring communication between applications. It makes an integrated solution easy to manage, easy to configure, and easy to modify, to meet changing business needs. It enables applications to cooperate, coordinate, and synchronize, to carry out complex business transactions. </p>
                     <p>Message management provided by AQ manages the flow of messages between different applications. AQ can also retain messages for auditing and tracking purposes, and for extracting business intelligence. </p>
                     <p>AQ provides SQL views to access messages. You can use these views to analyze trends.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662" title="Oracle Database Advanced Queuing (AQ) supports native XML messages. AQ operations can be defined using the XML-based Internet-Data-Access-Presentation (iDAP) format. iDAP is an extensible message invocation protocol. It is built on Internet standards, using HTTP(S) and e-mail protocols as the transport mechanism. XML is the data representation language for iDAP.">XML and Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5757"></a><div class="props_rev_3"><a id="GUID-E2F1B62A-F15C-439D-978B-C3B7D35AF661" name="GUID-E2F1B62A-F15C-439D-978B-C3B7D35AF661"></a><h3 id="ADXDB-GUID-E2F1B62A-F15C-439D-978B-C3B7D35AF661" class="sect3"><span class="enumeration_section">37.2 </span>Oracle Database Advanced Queuing
               </h3>
               <div>
                  <p>Oracle Database Advanced Queuing (AQ) lets you share data and events in a queue. It can propagate information within a database or from one database to another, routing information to specified destinations. It provides functionality and flexibility for capturing and managing events, and for sharing events with other databases and applications.</p>
                  <p>AQ lets you break the cycle of trading off one solution for another. You can build and operate distributed enterprises and applications, data warehouses, and high availability solutions.</p>
                  <p>You can use AQ to do all of the following: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic">Capture changes at a database.</span> You can configure a background capture process to capture changes made to tables, database schemas, or the entire database. A capture process captures changes from the redo log and formats each captured change into a logical change record (LCR). The database where changes are generated in the redo log is called the source database. 
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">Enqueue events into a queue.</span> Two types of events may be staged in a queue: LCRs and user messages. A capture process enqueues LCR events into a queue that you specify. The queue can then share the LCR events within the same database or with other databases. You can also enqueue user events explicitly with a user application. These explicitly enqueued events can be LCRs or user messages. 
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">Propagate events from one queue to another.</span> These queues may be in the same database or in different databases. 
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">Dequeue events.</span> A background apply process can dequeue events. You can also dequeue events explicitly with a user application. 
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">Apply events at a database.</span> You can configure an apply process to apply all of the events in a queue or only the events that you specify. You can also configure an apply process to call your own PL/SQL subprograms to process events. 
                        </p>
                        <p>The database where LCR events are applied and other types of events are processed is called the destination database. In some configurations, the source database and the destination database may be the same. </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-0B87427A-B05F-48EB-A164-81B85C5FC880">Message Queuing</a><br>Oracle Database Advanced Queuing (AQ) lets your applications enqueue, propagate, and dequeue messages.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models.">XML Data Exchange Using Oracle Database Advanced Queuing</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5758"></a><div class="props_rev_3"><a id="GUID-0B87427A-B05F-48EB-A164-81B85C5FC880" name="GUID-0B87427A-B05F-48EB-A164-81B85C5FC880"></a><h4 id="ADXDB-GUID-0B87427A-B05F-48EB-A164-81B85C5FC880" class="sect4"><span class="enumeration_section">37.2.1 </span>Message Queuing
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing (AQ) lets your applications enqueue, propagate, and dequeue messages.</p>
                     <p>AQ  stages messages of type <code class="codeph">SYS.AnyData</code>. Messages of almost any type can be wrapped in a <code class="codeph">SYS.AnyData</code> wrapper and staged in <code class="codeph">SYS.AnyData</code> queues. AQ supports all of the standard features of message queuing systems, including multi-consumer queues, publishing and subscribing, content-based routing, internet propagation, transformations, and gateways to other messaging subsystems. 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-E2F1B62A-F15C-439D-978B-C3B7D35AF661" title="Oracle Database Advanced Queuing (AQ) lets you share data and events in a queue. It can propagate information within a database or from one database to another, routing information to specified destinations. It provides functionality and flexibility for capturing and managing events, and for sharing events with other databases and applications.">Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5759"></a><div class="props_rev_3"><a id="GUID-BBC8B98A-48F8-4CD7-A5AB-F1CF97C6D4CB" name="GUID-BBC8B98A-48F8-4CD7-A5AB-F1CF97C6D4CB"></a><h3 id="ADXDB-GUID-BBC8B98A-48F8-4CD7-A5AB-F1CF97C6D4CB" class="sect3"><span class="enumeration_section">37.3 </span>XMLType Attributes in Object Types
               </h3>
               <div>
                  <p>You can create queues that use Oracle object types containing <code class="codeph">XMLType</code> attributes. These queues can be used to transmit and store messages that are XML documents. 
                  </p>
                  <p>Using <code class="codeph">XMLType</code>, you can do the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Store any type of message in a queue</p>
                     </li>
                     <li>
                        <p>Store documents internally as <code class="codeph">CLOB</code> instances
                        </p>
                     </li>
                     <li>
                        <p>Store <code class="codeph">m</code>ore than one type of payload in a queue
                        </p>
                     </li>
                     <li>
                        <p>Query <code class="codeph">XMLType</code> columns using SQL/XML functions such as <code class="codeph">XMLExists</code></p>
                     </li>
                     <li>
                        <p>Specify the operators in subscriber rules or dequeue selectors</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models.">XML Data Exchange Using Oracle Database Advanced Queuing</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5760"></a><div class="props_rev_3"><a id="GUID-3F8306F4-2B18-4F46-A634-534475577FE1" name="GUID-3F8306F4-2B18-4F46-A634-534475577FE1"></a><h3 id="ADXDB-GUID-3F8306F4-2B18-4F46-A634-534475577FE1" class="sect3"><span class="enumeration_section">37.4 </span>Internet Data Access Presentation (iDAP): SOAP for AQ
               </h3>
               <div>
                  <p>You can access Oracle Database Advanced Queuing (AQ) over the Internet using Simple Object Access Protocol (SOAP). Internet Data Access Presentation (iDAP) is the SOAP specification for AQ operations. iDAP defines XML message structure for a SOAP request body. </p>
                  <p>An iDAP-structured message is transmitted over the Internet using transport protocols such as HTTP(S) and SMTP. </p>
                  <p>iDAP uses the <code class="codeph">text/xml</code> content type to specify the body of the SOAP request. XML provides the presentation for iDAP request and response messages, as follows:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>All request and response tags are scoped in the SOAP namespace. </p>
                     </li>
                     <li>
                        <p>AQ operations are scoped in the iDAP namespace.</p>
                     </li>
                     <li>
                        <p>The sender includes namespaces in iDAP elements and attributes in the SOAP body. </p>
                     </li>
                     <li>
                        <p>The receiver processes iDAP messages that have correct namespaces. For the requests with incorrect namespaces, the receiver returns an invalid request error.</p>
                     </li>
                     <li>
                        <p>The SOAP namespace has this value: <code class="codeph">http://schemas.xmlsoap.org/soap/envelope/</code></p>
                     </li>
                     <li>
                        <p>The iDAP namespace has this value: <code class="codeph">http://ns.oracle.com/AQ/schemas/access</code></p>
                        <div class="infoboxnotealso" id="GUID-3F8306F4-2B18-4F46-A634-534475577FE1__GUID-3B7F3EF6-6707-4930-8CD5-D5C37A0A192C">
                           <p class="notep1">See Also:</p>
                           <p><a href="../adque/aq-internet-access.html#ADQUE-GUID-8BCF7E15-F69B-4BDB-B8A7-CEEB4932211C" target="_blank"><span><cite>Oracle Database Advanced Queuing User's Guide</cite></span></a></p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models.">XML Data Exchange Using Oracle Database Advanced Queuing</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5762"></a><a id="ADXDB5761"></a><div class="props_rev_3"><a id="GUID-CBD2525F-4E5D-472C-9949-594500EA023A" name="GUID-CBD2525F-4E5D-472C-9949-594500EA023A"></a><h3 id="ADXDB-GUID-CBD2525F-4E5D-472C-9949-594500EA023A" class="sect3"><span class="enumeration_section">37.5 </span>iDAP Architecture
               </h3>
               <div>
                  <p>Oracle Database Advanced Queuing (AQ) operations that use HTTP(S) require an iDAP HTTP client, a Web server, and an Oracle server.</p>
                  <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-CBD2525F-4E5D-472C-9949-594500EA023A__I1029082">Figure 37-2</a> shows the relationships among these components.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A client program sends XML messages that conform to iDAP format, to the AQ Servlet. This can be any HTTP client, such as a Web browser.</p>
                     </li>
                     <li>
                        <p>The Web server or <code class="codeph">ServletRunner</code> hosts the AQ servlet that can interpret the incoming XML messages, for example, Apache/Jserv or Tomcat.
                        </p>
                     </li>
                     <li>
                        <p>Oracle AQ servlet connects to Oracle Database to perform queue operations.</p>
                     </li>
                  </ul>
                  <div class="figure" id="GUID-CBD2525F-4E5D-472C-9949-594500EA023A__I1029082">
                     <p class="titleinfigure">Figure 37-2 iDAP Architecture for Performing AQ Operations Using HTTP(S)</p><img src="img/adxdb052.gif" width="361" alt="Description of Figure 37-2 follows" title="Description of Figure 37-2 follows" longdesc="img_text/adxdb052.html"><br><a href="img_text/adxdb052.html">Description of "Figure 37-2 iDAP Architecture for Performing AQ Operations Using HTTP(S)"</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2">XMLType Queue Payloads</a><br>You can create queues with payloads that contain <code class="codeph">XMLType</code> attributes. These can be used for transmitting and storing messages that contain XML documents. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models.">XML Data Exchange Using Oracle Database Advanced Queuing</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5764"></a><a id="ADXDB5933"></a><a id="ADXDB5934"></a><a id="ADXDB5765"></a><a id="ADXDB5763"></a><div class="props_rev_3"><a id="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2" name="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2"></a><h4 id="ADXDB-GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2" class="sect4"><span class="enumeration_section">37.5.1 </span>XMLType Queue Payloads
                  </h4>
                  <div>
                     <p>You can create queues with payloads that contain <code class="codeph">XMLType</code> attributes. These can be used for transmitting and storing messages that contain XML documents. 
                     </p>
                     <p>By defining Oracle objects with <code class="codeph">XMLType</code> attributes, you can do the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Store more than one type of XML document in the same queue. The documents are stored internally as <code class="codeph">CLOB</code> instances.
                           </p>
                        </li>
                        <li>
                           <p>Selectively dequeue messages with <code class="codeph">XMLType</code> attributes using SQL/XML functions such as <code class="codeph">XMLExists</code> and <code class="codeph">XMLQuery</code>. 
                           </p>
                        </li>
                        <li>
                           <p>Define transformations to convert Oracle objects to <code class="codeph">XMLType</code>.
                           </p>
                        </li>
                        <li>
                           <p>Define rule-based subscribers that query message content using SQL/XML functions such as <code class="codeph">XMLExists</code> and <code class="codeph">XMLQuery</code>.
                           </p>
                        </li>
                     </ul>
                     <p>In the application sketched in the examples here, assume that an overseas shipping site represents an order using <code class="codeph">SYS.XMLType</code>. An order-entry site represents an order as an Oracle object, <code class="codeph">ORDER_TYP</code>.
                     </p>
                     <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBIBGJE">Example 37-1</a> creates the queue table and queue for overseas shipping.
                     </p>
                     <p>Because the representation of orders at the overseas shipping site is different from the representation of orders at the order-entry site, messages need to be transformed before sending them from the order-entry site to the overseas shipping site. <a href="XML-data-exchange-using-streams-AQ.html#GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBIDEGH">Example 37-2</a> creates the transformation, and <a href="XML-data-exchange-using-streams-AQ.html#GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBDECHG">Example 37-3</a> applies it.
                     </p>
                     <p>For more information about defining transformations that convert the type used by the order entry application to the type used by overseas shipping, see <a href="../adque/aq-administrative-interface.html#ADQUE0813" target="_blank"><span><cite>Oracle Database Advanced Queuing User's Guide</cite></span></a>.
                     </p>
                     <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBBFGHC">Example 37-4</a> shows how an application that processes orders for customers in another country, in this case Canada, can dequeue messages.
                     </p>
                     <div class="example" id="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBIBGJE">
                        <p class="titleinexample">Example 37-1 Creating a Queue Table and Queue</p><pre class="oac_no_warn" dir="ltr">BEGIN
   DBMS_AQADM.create_queue_table(
     queue_table        =&gt; 'OS_orders_pr_mqtab',
     comment            =&gt; 'Overseas Shipping MultiConsumer Orders queue table',
     multiple_consumers =&gt; TRUE,
     queue_payload_type =&gt; 'SYS.XMLtype',
     compatible         =&gt; '8.1');
END;
/
 
BEGIN
   DBMS_AQADM.create_queue(queue_name   =&gt; 'OS_bookedorders_que',
                           queue_table  =&gt; 'OS_orders_pr_mqtab');
END;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBIDEGH">
                        <p class="titleinexample">Example 37-2 Creating a Transformation to Convert Message Data to XML</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION convert_to_order_xml(input_order ORDER_TYP)
  RETURN XMLType AS
    new_order XMLType;
BEGIN
  SELECT XMLElement("Row", input_order) INTO new_order FROM DUAL;
  RETURN new_order;
END convert_to_order_xml;
/
 
BEGIN
  SYS.DBMS_TRANSFORM.create_transformation(
    schema =&gt;         'OE',
    name   =&gt;         'OE2XML',
    from_schema =&gt;    'OE',
    from_type =&gt;      'ORDER_TYP',
    to_schema =&gt;      'SYS',
    to_type =&gt;        'XMLTYPE',
    transformation =&gt; 'convert_to_order_xml(source.user_data)');
END;
/</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBDECHG">
                        <p class="titleinexample">Example 37-3 Applying a Transformation before Sending Messages Overseas</p><pre class="oac_no_warn" dir="ltr">-- Add a rule-based subscriber for overseas shipping to the booked-orders
-- queues with transformation.
DECLARE
   subscriber SYS.AQ$_AGENT;
BEGIN
   subscriber := SYS.AQ$_AGENT('Overseas_Shipping',
                               'OS.OS_bookedorders_que',
                               NULL);
   DBMS_AQADM.add_subscriber(
     queue_name     =&gt; 'OS_bookedorders_que',
     subscriber     =&gt; subscriber,
     rule           =&gt; 'XMLSerialize(CONTENT XMLQuery(''//orderregion''' ||
                       'PASSING tab.user_data RETURNING CONTENT)' ||
                       ' AS VARCHAR2(1000)) = ''INTERNATIONAL''',
     transformation =&gt; 'OE.OE2XML');
END;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBBFGHC">
                        <p class="titleinexample">Example 37-4 XMLType and AQ: Dequeuing Messages</p><pre class="oac_no_warn" dir="ltr">-- Create procedure to enqueue into single-consumer queues.
CREATE OR REPLACE PROCEDURE get_canada_orders AS
   deq_msgid             RAW(16);
   dopt                  DBMS_AQ.dequeue_options_t;
   mprop                 DBMS_AQ.message_properties_t;
   deq_order_data        SYS.XMLType;
   deq_order_data_text   CLOB;
   no_messages           EXCEPTION;
   PRAGMA EXCEPTION_INIT (no_messages, -25228);
   new_orders            BOOLEAN := TRUE;
BEGIN
   dopt.wait := 1;
   -- Specify dequeue condition to select orders for Canada.
   dopt.deq_condition := 'XMLSerialize(CONTENT ' ||
                         'XMLQuery(''/ORDER_TYP/CUSTOMER/COUNTRY/text()''' ||
                         ' PASSING tab.user_data RETURNING CONTENT)' ||
                         ' AS VARCHAR2(1000))=''CANADA''';
   dopt.consumer_name := 'Overseas_Shipping';
   WHILE (new_orders) LOOP
     BEGIN
       DBMS_AQ.dequeue(queue_name         =&gt; 'OS.OS_bookedorders_que',
                       dequeue_options    =&gt; dopt,
                       message_properties =&gt; mprop,
                       payload            =&gt; deq_order_data,
                       msgid              =&gt; deq_msgid);
       COMMIT;
       SELECT XMLSerialize(DOCUMENT deq_order_data AS CLOB)
         INTO deq_order_data_text FROM DUAL;
       DBMS_OUTPUT.put_line('Order for Canada - Order: ' || deq_order_data_text);
     EXCEPTION
       WHEN no_messages THEN
         DBMS_OUTPUT.put_line (' ---- NO MORE ORDERS  ---- ');
         new_orders := FALSE;
     END;
   END LOOP;
END;
/</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-CBD2525F-4E5D-472C-9949-594500EA023A" title="Oracle Database Advanced Queuing (AQ) operations that use HTTP(S) require an iDAP HTTP client, a Web server, and an Oracle server.">iDAP Architecture</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5767"></a><div class="props_rev_3"><a id="GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" name="GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244"></a><h3 id="ADXDB-GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" class="sect3"><span class="enumeration_section">37.6 </span>Guidelines for Using XML and Oracle Database Advanced Queuing
               </h3>
               <div>
                  <p>Guidelines are presented for using XML data with Oracle Database Advanced Queuing.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-4627F944-78DE-471C-9BA1-81F8A4CD9A4D">Store AQ XML Messages with Many PDFs as One Record</a><br>You can exchange XML documents between businesses using Oracle Database Advanced Queuing (AQ), where each message includes an XML header, an XML attachment (XML data stream), DTDs, and PDF files. The data can be stored in a database table, such as a queue table. 
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-6B265CF8-6267-4DFA-AF1C-8F1656B358B8">Add New Recipients After Messages Are Enqueued</a><br>You can use a queue table to support message assignments. 
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-EF9D9A9E-1A8C-45E7-AD01-6E8575DA6C48">Enqueue and Dequeue XML Messages</a><br>Oracle Database Advanced Queuing (AQ) supports enqueuing and dequeuing objects. The objects can have an attribute of type <code class="codeph">XMLType</code> that contains an XML document, in addition to having metadata attributes. 
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-F8FC0C37-527A-4047-B895-9FE5C57F4D91">Parse Messages with XML Content from AQ Queues</a><br>You can parse messages with XML content from an Oracle Database Advanced Queuing (AQ) queue and then update tables and fields in an Operational Data Store (ODS).
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-D9AACF43-69A5-4648-98C9-A56CF8B345A2">Prevent the Listener from Stopping Until an XML Document Is Processed</a><br>After receiving a message, you can submit a job using PL/SQL package <code class="codeph">DBMS_JOB</code>. The job is invoked asynchronously in a different database session. This can prevent messages accumulating in the queue because the listener must wait until a received XML message is processed.
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-950D3867-F1F8-445E-82F0-4B61FDC81BDD">HTTPS with AQ</a><br>You can use Oracle Database Advanced Queuing (AQ) Internet access to send XML messages to suppliers using HTTPS and receive a response. You can enqueue and dequeue XML messages over HTTP(S) securely and transactionally. 
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-AE306183-9332-43E0-B359-1E9F506DB9E2">Store XML in Oracle AQ Message Payloads</a><br>You can store XML data in Oracle Database Advanced Queuing (AQ) message payloads natively other than having an ADT as the payload with <code class="codeph">SYS.XMLType</code> as part of the ADT. You can create queues with payloads and attributes as <code class="codeph">XMLType</code>.
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-785F382E-0311-447E-9359-6AFF7F8EFCE1">iDAP and SOAP</a><br>iDAP is the SOAP specification for Oracle Database Advanced Queuing (AQ) operations. SOAP defines a generic mechanism to invoke a service. iDAP defines these mechanisms to perform AQ operations. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models.">XML Data Exchange Using Oracle Database Advanced Queuing</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5768"></a><div class="props_rev_3"><a id="GUID-4627F944-78DE-471C-9BA1-81F8A4CD9A4D" name="GUID-4627F944-78DE-471C-9BA1-81F8A4CD9A4D"></a><h4 id="ADXDB-GUID-4627F944-78DE-471C-9BA1-81F8A4CD9A4D" class="sect4"><span class="enumeration_section">37.6.1 </span>Store AQ XML Messages with Many PDFs as One Record
                  </h4>
                  <div>
                     <p>You can exchange XML documents between businesses using Oracle Database Advanced Queuing (AQ), where each message includes an XML header, an XML attachment (XML data stream), DTDs, and PDF files. The data can be stored in a database table, such as a queue table. </p>
                     <p>You can enqueue the messages into Oracle queue tables as one record or piece. Or you can enqueue the messages as multiple records, for example, one record for XML data streams as <code class="codeph">CLOB</code> type, one record for PDF files as <code class="codeph">RAW</code> type, and so on. You can also then dequeue the messages.
                     </p>
                     <p>You can achieve this in the following ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>By defining an object type with (<code class="codeph">CLOB</code>, <code class="codeph">RAW</code>,...) attributes, and storing it as a single message.
                           </p>
                        </li>
                        <li>
                           <p>By using the AQ message grouping feature and storing it in multiple messages. Here the message properties are associated with a group. To use the message grouping feature, all messages must be the same payload type. </p>
                        </li>
                     </ul>
                     <p>To specify the payload, first create an object type, for example: </p><pre class="pre codeblock"><code>CREATE TYPE mypayload_type as OBJECT (xmlDataStream CLOB, dtd CLOB, pdf BLOB);
</code></pre><p>Then store it as a single message. </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="Guidelines are presented for using XML data with Oracle Database Advanced Queuing.">Guidelines for Using XML and Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5769"></a><div class="props_rev_3"><a id="GUID-6B265CF8-6267-4DFA-AF1C-8F1656B358B8" name="GUID-6B265CF8-6267-4DFA-AF1C-8F1656B358B8"></a><h4 id="ADXDB-GUID-6B265CF8-6267-4DFA-AF1C-8F1656B358B8" class="sect4"><span class="enumeration_section">37.6.2 </span>Add New Recipients After Messages Are Enqueued
                  </h4>
                  <div>
                     <p>You can use a queue table to support message assignments. </p>
                     <p>For example, when other businesses send messages to a specific company, they do not know who should be assigned to process the messages, but they know the messages are for department Human Resources (HR). Hence all messages go to the HR supervisor. At this point, the message is enqueued in the queue table. The HR supervisor is the only recipient of this message, and the entire HR staff have been predefined as subscribers for this queue.</p>
                     <p>You cannot change the recipient list after a message is enqueued. If you do not specify a recipient list then subscribers can subscribe to the queue and dequeue the message. Here, new recipients must be subscribers to the queue. Otherwise, you must dequeue the message and enqueue it again with new recipients.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="Guidelines are presented for using XML data with Oracle Database Advanced Queuing.">Guidelines for Using XML and Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5770"></a><div class="props_rev_3"><a id="GUID-EF9D9A9E-1A8C-45E7-AD01-6E8575DA6C48" name="GUID-EF9D9A9E-1A8C-45E7-AD01-6E8575DA6C48"></a><h4 id="ADXDB-GUID-EF9D9A9E-1A8C-45E7-AD01-6E8575DA6C48" class="sect4"><span class="enumeration_section">37.6.3 </span>Enqueue and Dequeue XML Messages
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing (AQ) supports enqueuing and dequeuing objects. The objects can have an attribute of type <code class="codeph">XMLType</code> that contains an XML document, in addition to having metadata attributes. 
                     </p>
                     <p>Refer to <a href="../adque/aq-operations-using-pl-sql.html#ADQUE-GUID-B302CBDB-0B75-4BF6-B705-5DC3EA26E605" target="_blank"><span><cite>Oracle Database Advanced Queuing User's Guide</cite></span></a> for specific details and more examples.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="Guidelines are presented for using XML data with Oracle Database Advanced Queuing.">Guidelines for Using XML and Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5771"></a><div class="props_rev_3"><a id="GUID-F8FC0C37-527A-4047-B895-9FE5C57F4D91" name="GUID-F8FC0C37-527A-4047-B895-9FE5C57F4D91"></a><h4 id="ADXDB-GUID-F8FC0C37-527A-4047-B895-9FE5C57F4D91" class="sect4"><span class="enumeration_section">37.6.4 </span>Parse Messages with XML Content from AQ Queues
                  </h4>
                  <div>
                     <p>You can parse messages with XML content from an Oracle Database Advanced Queuing (AQ) queue and then update tables and fields in an Operational Data Store (ODS).</p>
                     <p>You can use Oracle XML Parser for Java and Java Stored Procedures together with AQ to obtain metadata such as AQ enqueue or dequeue times and JMS header information, based on queries that target certain XML data. You can combine this with using Oracle Text XML search.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="Guidelines are presented for using XML data with Oracle Database Advanced Queuing.">Guidelines for Using XML and Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5772"></a><div class="props_rev_3"><a id="GUID-D9AACF43-69A5-4648-98C9-A56CF8B345A2" name="GUID-D9AACF43-69A5-4648-98C9-A56CF8B345A2"></a><h4 id="ADXDB-GUID-D9AACF43-69A5-4648-98C9-A56CF8B345A2" class="sect4"><span class="enumeration_section">37.6.5 </span>Prevent the Listener from Stopping Until an XML Document Is Processed
                  </h4>
                  <div>
                     <p>After receiving a message, you can submit a job using PL/SQL package <code class="codeph">DBMS_JOB</code>. The job is invoked asynchronously in a different database session. This can prevent messages accumulating in the queue because the listener must wait until a received XML message is processed.
                     </p>
                     <p>When receiving XML messages from clients you might need to process them as soon as they arrive. But each XML document might take several seconds to process. For PL/SQL, one procedure starts the listener, dequeues the message, and calls another procedure to process the XML document. The listener could be held up until the XML document is processed, and messages would accumulate in the queue. </p>
                     <p>After receiving a message, you can instead submit a job using PL/SQL package <code class="codeph">DBMS_JOB</code>. The job is invoked asynchronously in a different database session. 
                     </p>
                     <p>You can register a PL/SQL callback, which is invoked asynchronously when a message shows up in a queue. PL/SQL callbacks are part of the Oracle Database Advanced Queuing notification framework. </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="Guidelines are presented for using XML data with Oracle Database Advanced Queuing.">Guidelines for Using XML and Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5773"></a><div class="props_rev_3"><a id="GUID-950D3867-F1F8-445E-82F0-4B61FDC81BDD" name="GUID-950D3867-F1F8-445E-82F0-4B61FDC81BDD"></a><h4 id="ADXDB-GUID-950D3867-F1F8-445E-82F0-4B61FDC81BDD" class="sect4"><span class="enumeration_section">37.6.6 </span>HTTPS with AQ
                  </h4>
                  <div>
                     <p>You can use Oracle Database Advanced Queuing (AQ) Internet access to send XML messages to suppliers using HTTPS and receive a response. You can enqueue and dequeue XML messages over HTTP(S) securely and transactionally. </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-950D3867-F1F8-445E-82F0-4B61FDC81BDD__GUID-2110EE8B-9390-4296-8744-C243B0265292">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adque/aq-internet-access.html#ADQUE0600" target="_blank"><span><cite>Oracle Database Advanced Queuing User's Guide</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="Guidelines are presented for using XML data with Oracle Database Advanced Queuing.">Guidelines for Using XML and Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5774"></a><div class="props_rev_3"><a id="GUID-AE306183-9332-43E0-B359-1E9F506DB9E2" name="GUID-AE306183-9332-43E0-B359-1E9F506DB9E2"></a><h4 id="ADXDB-GUID-AE306183-9332-43E0-B359-1E9F506DB9E2" class="sect4"><span class="enumeration_section">37.6.7 </span>Store XML in Oracle AQ Message Payloads
                  </h4>
                  <div>
                     <p>You can store XML data in Oracle Database Advanced Queuing (AQ) message payloads natively other than having an ADT as the payload with <code class="codeph">SYS.XMLType</code> as part of the ADT. You can create queues with payloads and attributes as <code class="codeph">XMLType</code>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="Guidelines are presented for using XML data with Oracle Database Advanced Queuing.">Guidelines for Using XML and Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5775"></a><div class="props_rev_3"><a id="GUID-785F382E-0311-447E-9359-6AFF7F8EFCE1" name="GUID-785F382E-0311-447E-9359-6AFF7F8EFCE1"></a><h4 id="ADXDB-GUID-785F382E-0311-447E-9359-6AFF7F8EFCE1" class="sect4"><span class="enumeration_section">37.6.8 </span>iDAP and SOAP
                  </h4>
                  <div>
                     <p>iDAP is the SOAP specification for Oracle Database Advanced Queuing (AQ) operations. SOAP defines a generic mechanism to invoke a service. iDAP defines these mechanisms to perform AQ operations. </p>
                     <p>iDAP has the following key properties not defined by SOAP:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Transactional behavior. You can perform AQ operations in a transactional manner. A transaction can span multiple iDAP requests.</p>
                        </li>
                        <li>
                           <p>Security. iDAP operations can be carried out only by authorized and authenticated users.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="Guidelines are presented for using XML data with Oracle Database Advanced Queuing.">Guidelines for Using XML and Oracle Database Advanced Queuing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
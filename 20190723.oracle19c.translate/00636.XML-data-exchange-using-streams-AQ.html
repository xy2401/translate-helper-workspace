<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models."></meta>
      <meta name="description" content="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models."></meta>
      <title>使用Oracle数据库高级排队的XML数据交换</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You can exchange XML data using Oracle Database Advanced Queuing (AQ), which provides database-integrated message-queuing. AQ enables and manages asynchronous communication between applications, using messages. It supports point-to-point and publish/subscribe communication models."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="export-and-import-of-XML-DB-data.html" title="Previous" type="text/html"></link>
      <link rel="next" href="appendices.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="export-and-import-of-XML-DB-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="appendices.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-tools-that-support-XML-DB.html" property="item" typeof="WebPage"><span property="name">支持Oracle XML DB的Oracle工具</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle数据库高级排队的XML数据交换</li>
            </ol>
            <a id="GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" name="GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968"></a><a id="ADXDB3100"></a>
            
            <h2 id="ADXDB-GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" class="sect2"><span class="enumeration_chapter">37</span>使用Oracle数据库高级排队的XML数据交换</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用Oracle数据库高级队列（AQ）交换XML数据，该队列提供数据库集成的消息队列。AQ使用消息启用和管理应用程序之间的异步通信。它支持点对点和发布/订阅通信模型。</p>
               <p>消息队列与Oracle数据库的集成将Oracle数据库的完整性，可靠性，可恢复性，可伸缩性，性能和安全性功能带入消息队列。它还有助于从消息流中提取智能。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662">XML和Oracle数据库高级队列</a><br>Oracle数据库高级队列（AQ）支持本机XML消息。可以使用基于XML的因特网数据访问呈现（iDAP）格式来定义AQ操作。 iDAP是一种可扩展的消息调用协议。它建立在Internet标准之上，使用HTTP（S）和电子邮件协议作为传输机制。XML是iDAP的数据表示语言。</li>
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-E2F1B62A-F15C-439D-978B-C3B7D35AF661">Oracle数据库高级队列</a><br>Oracle Database Advanced Queuing（AQ）允许您在队列中共享数据和事件。它可以在数据库中或从一个数据库传播信息到另一个数据库，将信息路由到指定的目的地。它为捕获和管理事件以及与其他数据库和应用程序共享事件提供了功能和灵活性。
                  </li>
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-BBC8B98A-48F8-4CD7-A5AB-F1CF97C6D4CB">对象类型中的XMLType属性</a><br>您可以创建使用包含<code class="codeph">XMLType</code>属性的Oracle对象类型的队列。这些队列可用于传输和存储XML文档的消息。
                  </li>
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-3F8306F4-2B18-4F46-A634-534475577FE1">Internet数据访问演示（iDAP）：AQ的SOAP</a><br>您可以使用简单对象访问协议（SOAP）通过Internet访问Oracle数据库高级队列（AQ）。Internet数据访问演示（iDAP）是AQ操作的SOAP规范。 iDAP定义SOAP请求主体的XML消息结构。
                  </li>
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-CBD2525F-4E5D-472C-9949-594500EA023A">iDAP架构</a><br>使用HTTP（S）的Oracle数据库高级队列（AQ）操作需要iDAP HTTP客户端，Web服务器和Oracle服务器。
                  </li>
                  <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244">使用XML和Oracle数据库高级排队的准则</a><br>提供了使用Oracle数据高级队列的XML数据的指南。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-tools-that-support-XML-DB.html#GUID-6E519C79-C879-46D0-BAD4-3E9FEA7BA35F" title="您可以将各种Oracle工具与Oracle XML DB一起使用。其中包括用于管理Oracle XML DB，加载XML数据和交换XML数据的工具。">支持Oracle XML DB的Oracle工具</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5750"></a><div class="props_rev_3"><a id="GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662" name="GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662"></a><h3 id="ADXDB-GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662" class="sect3"><span class="enumeration_section">37.1</span> XML和Oracle数据库高级队列</h3>
               <div>
                  <p>Oracle数据库高级队列（AQ）支持本机XML消息。可以使用基于XML的因特网数据访问呈现（iDAP）格式来定义AQ操作。 iDAP是一种可扩展的消息调用协议。它建立在Internet标准之上，使用HTTP（S）和电子邮件协议作为传输机制。XML是iDAP的数据表示语言。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13">Oracle数据库高级队列和XML消息有效负载</a><br>可以使用Oracle数据库高级队列（AQ）在应用程序之间异步传递XML消息。
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-E61C941B-BE6D-4C01-92CC-23C5CCF75340">使用Oracle数据库高级队列的优点</a><br>Oracle数据库高级队列（AQ）提供了配置应用程序之间通信的灵活性。它使集成解决方案易于管理，易于配置和易于修改，以满足不断变化的业务需求。它使应用程序能够协作，协调和同步，以执行复杂的业务事务。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="您可以使用Oracle数据库高级队列（AQ）交换XML数据，该队列提供数据库集成的消息队列。AQ使用消息启用和管理应用程序之间的异步通信。它支持点对点和发布/订阅通信模型。">使用Oracle数据库高级队列的XML数据交换</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5752"></a><a id="ADXDB5751"></a><div class="props_rev_3"><a id="GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13" name="GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13"></a><h4 id="ADXDB-GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13" class="sect4"><span class="enumeration_section">37.1.1</span> Oracle数据库高级队列和XML消息有效<span class="enumeration_section">负载</span></h4>
                  <div>
                     <p>可以使用Oracle数据库高级队列（AQ）在应用程序之间异步传递XML消息。</p>
                     <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13__I1029921">图37-1</a>显示了使用AQ与三个应用程序通信的Oracle数据库。消息有效负载是XML数据。AQ在这种情况下执行的一般任务是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用订阅规则的消息流</p>
                        </li>
                        <li>
                           <p>消息管理</p>
                        </li>
                        <li>
                           <p>从消息中提取商业智能</p>
                        </li>
                        <li>
                           <p>消息转换</p>
                        </li>
                     </ul>
                     <p>使用AQ在应用程序之间异步传递XML消息的情况：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>企业内部的。典型的例子包括销售订单履行和供应链管理。</p>
                        </li>
                        <li>
                           <p>跨业务。多个集成中心可以通过Internet进行通信。例子包括旅行预订，制造商和供应商之间的协调，银行间资金的转移以及保险理赔。</p>
                           <p>Oracle在其企业应用程序集成产品中使用此方法。XML消息从应用程序发送到Oracle AQ中心。集线器充当任何想要该消息的应用程序的消息服务器。通过这种中心辐射体系结构，XML消息可以异步传递给多个松散耦合的应用程序。</p>
                        </li>
                     </ul>
                     <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13__I1029921">图37-1</a>显示了使用AQ以下列方式传输的XML有效负载消息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>基于Web的应用程序使用iDAP通过HTTP（S）连接使用AQ操作</p>
                        </li>
                        <li>
                           <p>应用程序使用AQ通过Net *连接传播XML消息</p>
                        </li>
                        <li>
                           <p>应用程序使用AQ使用HTTP（S）或SMTP将Internet或XML消息直接传播到数据库</p>
                        </li>
                     </ul>
                     <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13__I1029921">图37-1</a>还显示AQ客户端可以使用OCI，Java或PL / SQL访问数据。</p>
                     <div class="figure" id="GUID-4957B645-E62A-4BCC-A7A1-80AAAE9ECB13__I1029921">
                        <p class="titleinfigure">图37-1 Oracle数据库高级队列和XML消息有效负载</p><img src="img/adque437.gif" width="569" alt="下面是图37-1的描述" title="下面是图37-1的描述" longdesc="img_text/adque437.html"><br><a href="img_text/adque437.html">“图37-1 Oracle数据库高级队列和XML消息有效负载”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662" title="Oracle数据库高级队列（AQ）支持本机XML消息。可以使用基于XML的因特网数据访问呈现（iDAP）格式来定义AQ操作。 iDAP是一种可扩展的消息调用协议。它建立在Internet标准之上，使用HTTP（S）和电子邮件协议作为传输机制。XML是iDAP的数据表示语言。">XML和Oracle数据库高级队列</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5756"></a><div class="props_rev_3"><a id="GUID-E61C941B-BE6D-4C01-92CC-23C5CCF75340" name="GUID-E61C941B-BE6D-4C01-92CC-23C5CCF75340"></a><h4 id="ADXDB-GUID-E61C941B-BE6D-4C01-92CC-23C5CCF75340" class="sect4"><span class="enumeration_section">37.1.2</span>使用Oracle数据库高级队列的优点</h4>
                  <div>
                     <p>Oracle数据库高级队列（AQ）提供了配置应用程序之间通信的灵活性。它使集成解决方案易于管理，易于配置和易于修改，以满足不断变化的业务需求。它使应用程序能够协作，协调和同步，以执行复杂的业务事务。</p>
                     <p>AQ提供的消息管理管理不同应用程序之间的消息流。AQ还可以保留用于审计和跟踪目的的消息，以及用于提取商业智能的消息。</p>
                     <p>AQ提供SQL视图来访问消息。您可以使用这些视图来分析趋势。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-AE80D8ED-822B-414D-AEC8-E81D5E27F662" title="Oracle数据库高级队列（AQ）支持本机XML消息。可以使用基于XML的因特网数据访问呈现（iDAP）格式来定义AQ操作。 iDAP是一种可扩展的消息调用协议。它建立在Internet标准之上，使用HTTP（S）和电子邮件协议作为传输机制。XML是iDAP的数据表示语言。">XML和Oracle数据库高级队列</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5757"></a><div class="props_rev_3"><a id="GUID-E2F1B62A-F15C-439D-978B-C3B7D35AF661" name="GUID-E2F1B62A-F15C-439D-978B-C3B7D35AF661"></a><h3 id="ADXDB-GUID-E2F1B62A-F15C-439D-978B-C3B7D35AF661" class="sect3"><span class="enumeration_section">37.2</span> Oracle数据库高级队列</h3>
               <div>
                  <p>Oracle Database Advanced Queuing（AQ）允许您在队列中共享数据和事件。它可以在数据库中或从一个数据库传播信息到另一个数据库，将信息路由到指定的目的地。它为捕获和管理事件以及与其他数据库和应用程序共享事件提供了功能和灵活性。</p>
                  <p>AQ让您打破了另一种解决方案的交易周期。您可以构建和运行分布式企业和应用程序，数据仓库和高可用性解决方案。</p>
                  <p>您可以使用AQ执行以下所有操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic">捕获数据库中的更改。</span> 您可以配置后台捕获过程以捕获对表，数据库模式或整个数据库所做的更改。捕获过程捕获重做日志中的更改，并将每个捕获的更改格式化为逻辑更改记录（LCR）。在重做日志中生成更改的数据库称为源数据库。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">将事件排入队列。</span> 可以在队列中暂存两种类型的事件：LCR和用户消息。捕获过程将LCR事件排入您指定的队列。然后，队列可以在同一数据库或其他数据库中共享LCR事件。您还可以使用用户应用程序显式地将用户事件排入队列。这些显式排队的事件可以是LCR或用户消息。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">将事件从一个队列传播到另一个队列。</span> 这些队列可能位于同一数据库中，也可能位于不同的数据库中。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">出列事件。</span> 后台应用程序可以使事件出列。您还可以使用用户应用程序显式地使事件出列。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">在数据库中应用事件。</span> 您可以配置应用进程以应用队列中的所有事件或仅应用您指定的事件。您还可以配置应用进程以调用自己的PL / SQL子程序来处理事件。
                        </p>
                        <p>应用LCR事件和处理其他类型事件的数据库称为目标数据库。在一些配置中，源数据库和目标数据库可以是相同的。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-0B87427A-B05F-48EB-A164-81B85C5FC880">消息队列</a><br>Oracle数据库高级队列（AQ）允许您的应用程序将消息入队，传播和出列。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="您可以使用Oracle数据库高级队列（AQ）交换XML数据，该队列提供数据库集成的消息队列。AQ使用消息启用和管理应用程序之间的异步通信。它支持点对点和发布/订阅通信模型。">使用Oracle数据库高级队列的XML数据交换</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5758"></a><div class="props_rev_3"><a id="GUID-0B87427A-B05F-48EB-A164-81B85C5FC880" name="GUID-0B87427A-B05F-48EB-A164-81B85C5FC880"></a><h4 id="ADXDB-GUID-0B87427A-B05F-48EB-A164-81B85C5FC880" class="sect4"><span class="enumeration_section">37.2.1</span>消息队列</h4>
                  <div>
                     <p>Oracle数据库高级队列（AQ）允许您的应用程序将消息入队，传播和出列。</p>
                     <p>AQ处理<code class="codeph">SYS.AnyData</code>类型的<code class="codeph">SYS.AnyData</code> 。几乎任何类型的消息都可以包装在<code class="codeph">SYS.AnyData</code>包装器中，并在<code class="codeph">SYS.AnyData</code>队列中<code class="codeph">SYS.AnyData</code> 。AQ支持消息队列系统的所有标准功能，包括多用户队列，发布和订阅，基于内容的路由，Internet传播，转换以及到其他消息传递子系统的网关。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-E2F1B62A-F15C-439D-978B-C3B7D35AF661" title="Oracle Database Advanced Queuing（AQ）允许您在队列中共享数据和事件。它可以在数据库中或从一个数据库传播信息到另一个数据库，将信息路由到指定的目的地。它为捕获和管理事件以及与其他数据库和应用程序共享事件提供了功能和灵活性。">Oracle数据库高级队列</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5759"></a><div class="props_rev_3"><a id="GUID-BBC8B98A-48F8-4CD7-A5AB-F1CF97C6D4CB" name="GUID-BBC8B98A-48F8-4CD7-A5AB-F1CF97C6D4CB"></a><h3 id="ADXDB-GUID-BBC8B98A-48F8-4CD7-A5AB-F1CF97C6D4CB" class="sect3"><span class="enumeration_section">37.3</span>对象类型中的XMLType属性</h3>
               <div>
                  <p>您可以创建使用包含<code class="codeph">XMLType</code>属性的Oracle对象类型的队列。这些队列可用于传输和存储XML文档的消息。
                  </p>
                  <p>使用<code class="codeph">XMLType</code> ，您可以执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将任何类型的消息存储在队列中</p>
                     </li>
                     <li>
                        <p>将文档内部存储为<code class="codeph">CLOB</code>实例</p>
                     </li>
                     <li>
                        <p>商店<code class="codeph">m</code>比在队列中的一个的有效载荷类型的矿石</p>
                     </li>
                     <li>
                        <p>使用SQL / XML函数（如<code class="codeph">XMLExists</code>查询<code class="codeph">XMLType</code>列</p>
                     </li>
                     <li>
                        <p>在订户规则中指定运算符或使选择符出列</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="您可以使用Oracle数据库高级队列（AQ）交换XML数据，该队列提供数据库集成的消息队列。AQ使用消息启用和管理应用程序之间的异步通信。它支持点对点和发布/订阅通信模型。">使用Oracle数据库高级队列的XML数据交换</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5760"></a><div class="props_rev_3"><a id="GUID-3F8306F4-2B18-4F46-A634-534475577FE1" name="GUID-3F8306F4-2B18-4F46-A634-534475577FE1"></a><h3 id="ADXDB-GUID-3F8306F4-2B18-4F46-A634-534475577FE1" class="sect3"><span class="enumeration_section">37.4</span> Internet数据访问演示（iDAP）：AQ的SOAP</h3>
               <div>
                  <p>您可以使用简单对象访问协议（SOAP）通过Internet访问Oracle数据库高级队列（AQ）。Internet数据访问演示（iDAP）是AQ操作的SOAP规范。 iDAP定义SOAP请求主体的XML消息结构。</p>
                  <p>使用诸如HTTP（S）和SMTP之类的传输协议在因特网上传输iDAP结构的消息。</p>
                  <p>iDAP使用<code class="codeph">text/xml</code>内容类型来指定SOAP请求的主体。 XML提供iDAP请求和响应消息的表示，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>所有请求和响应标记都在SOAP名称空间中作用域。</p>
                     </li>
                     <li>
                        <p>AQ操作在iDAP命名空间中作用域。</p>
                     </li>
                     <li>
                        <p>发件人包括iDAP元素中的名称空间和SOAP正文中的属性。</p>
                     </li>
                     <li>
                        <p>接收方处理具有正确名称空间的iDAP消息。对于具有不正确名称空间的请求，接收方返回无效的请求错误。</p>
                     </li>
                     <li>
                        <p>SOAP命名空间具有以下值： <code class="codeph">http://schemas.xmlsoap.org/soap/envelope/</code> ： <code class="codeph">http://schemas.xmlsoap.org/soap/envelope/</code></p>
                     </li>
                     <li>
                        <p>iDAP名称空间具有以下值： <code class="codeph">http://ns.oracle.com/AQ/schemas/access</code> ：//ns.oracle.com/AQ/schemas/access</p>
                        <div class="infoboxnotealso" id="GUID-3F8306F4-2B18-4F46-A634-534475577FE1__GUID-3B7F3EF6-6707-4930-8CD5-D5C37A0A192C">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../adque/aq-internet-access.html#ADQUE-GUID-8BCF7E15-F69B-4BDB-B8A7-CEEB4932211C" target="_blank"><span><cite>Oracle数据库高级队列用户指南</cite></span></a></p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="您可以使用Oracle数据库高级队列（AQ）交换XML数据，该队列提供数据库集成的消息队列。AQ使用消息启用和管理应用程序之间的异步通信。它支持点对点和发布/订阅通信模型。">使用Oracle数据库高级队列的XML数据交换</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5762"></a><a id="ADXDB5761"></a><div class="props_rev_3"><a id="GUID-CBD2525F-4E5D-472C-9949-594500EA023A" name="GUID-CBD2525F-4E5D-472C-9949-594500EA023A"></a><h3 id="ADXDB-GUID-CBD2525F-4E5D-472C-9949-594500EA023A" class="sect3"><span class="enumeration_section">37.5</span> iDAP架构</h3>
               <div>
                  <p>使用HTTP（S）的Oracle数据库高级队列（AQ）操作需要iDAP HTTP客户端，Web服务器和Oracle服务器。</p>
                  <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-CBD2525F-4E5D-472C-9949-594500EA023A__I1029082">图37-2</a>显示了这些组件之间的关系。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>客户端程序将符合iDAP格式的XML消息发送到AQ Servlet。这可以是任何HTTP客户端，例如Web浏览器。</p>
                     </li>
                     <li>
                        <p>Web服务器或<code class="codeph">ServletRunner</code>托管可以解释传入XML消息的AQ servlet，例如Apache / Jserv或Tomcat。
                        </p>
                     </li>
                     <li>
                        <p>Oracle AQ servlet连接到Oracle数据库以执行队列操作。</p>
                     </li>
                  </ul>
                  <div class="figure" id="GUID-CBD2525F-4E5D-472C-9949-594500EA023A__I1029082">
                     <p class="titleinfigure">图37-2使用HTTP执行AQ操作的iDAP体系结构（S）</p><img src="img/adxdb052.gif" width="361" alt="下面是图37-2的描述" title="下面是图37-2的描述" longdesc="img_text/adxdb052.html"><br><a href="img_text/adxdb052.html">“图37-2使用HTTP（S）执行AQ操作的iDAP架构”的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2">XMLType队列有效负载</a><br>您可以使用包含<code class="codeph">XMLType</code>属性的有效内容创建队列。这些可用于传输和存储包含XML文档的消息。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="您可以使用Oracle数据库高级队列（AQ）交换XML数据，该队列提供数据库集成的消息队列。AQ使用消息启用和管理应用程序之间的异步通信。它支持点对点和发布/订阅通信模型。">使用Oracle数据库高级队列的XML数据交换</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5764"></a><a id="ADXDB5933"></a><a id="ADXDB5934"></a><a id="ADXDB5765"></a><a id="ADXDB5763"></a><div class="props_rev_3"><a id="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2" name="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2"></a><h4 id="ADXDB-GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2" class="sect4"><span class="enumeration_section">37.5.1</span> XMLType队列有效<span class="enumeration_section">负载</span></h4>
                  <div>
                     <p>您可以使用包含<code class="codeph">XMLType</code>属性的有效内容创建队列。这些可用于传输和存储包含XML文档的消息。
                     </p>
                     <p>通过使用<code class="codeph">XMLType</code>属性定义Oracle对象，您可以执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在同一队列中存储多种类型的XML文档。文档在内部存储为<code class="codeph">CLOB</code>实例。
                           </p>
                        </li>
                        <li>
                           <p>使用SQL / XML函数（如<code class="codeph">XMLExists</code>和<code class="codeph">XMLQuery</code>选择性地使用<code class="codeph">XMLType</code>属性对消息进行出列。
                           </p>
                        </li>
                        <li>
                           <p>定义转换以将Oracle对象转换为<code class="codeph">XMLType</code> 。
                           </p>
                        </li>
                        <li>
                           <p>定义基于规则的订阅者，使用SQL / XML函数（如<code class="codeph">XMLExists</code>和<code class="codeph">XMLQuery</code>查询消息内容。
                           </p>
                        </li>
                     </ul>
                     <p>在此处示例中概述的应用程序中，假设海外运输站点使用<code class="codeph">SYS.XMLType</code>表示订单。订单输入站点将订单表示为Oracle对象<code class="codeph">ORDER_TYP</code> 。</p>
                     <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBIBGJE">例37-1</a>为海外运输创建了队列表和队列。
                     </p>
                     <p>由于海外发货地点的订单表示与订单输入站点的订单表示不同，因此在将订单从订单输入站点发送到海外发货站点之前需要转换消息。<a href="XML-data-exchange-using-streams-AQ.html#GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBIDEGH">例37-2</a>创建转换， <a href="XML-data-exchange-using-streams-AQ.html#GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBDECHG">例37-3</a>应用它。
                     </p>
                     <p>有关定义将订单输入应用程序使用的类型转换为海外运输使用的类型的转换的更多信息，请参阅“ <a href="../adque/aq-administrative-interface.html#ADQUE0813" target="_blank"><span><cite>Oracle数据库高级排队用户指南”</cite></span></a> 。
                     </p>
                     <p><a href="XML-data-exchange-using-streams-AQ.html#GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBBFGHC">示例37-4</a>显示了处理另一个国家/地区（在本例中为加拿大）的客户订单的应用程序如何使消息出列。
                     </p>
                     <div class="example" id="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBIBGJE">
                        <p class="titleinexample">示例37-1创建队列表和队列</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AQADM.create_queue_table（queue_table =&gt;'OS_orders_pr_mqtab'，comment =&gt;'Overseas Shipping MultiConsumer Orders queue table'，multiple_consumers =&gt; TRUE，queue_payload_type =&gt;'SYS.XMLtype'，compatible =&gt;'8.1'）;结束; / BEGIN DBMS_AQADM.create_queue（queue_name =&gt;'OS_bookedorders_que'，queue_table =&gt;'OS_orders_pr_mqtab'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBIDEGH">
                        <p class="titleinexample">示例37-2创建将消息数据转换为XML的转换</p><pre class="oac_no_warn" dir="ltr">CREATE或REPLACE FUNCTION convert_to_order_xml（input_order ORDER_TYP）RETURN XMLType AS new_order XMLType; BEGIN SELECT XMLElement（“Row”，input_order）INTO new_order FROM DUAL;返回new_order; END convert_to_order_xml; / BEGIN SYS.DBMS_TRANSFORM.create_transformation（schema =&gt;'OE'，name =&gt;'OE2XML'，from_schema =&gt;'OE'，from_type =&gt;'ORDER_TYP'，to_schema =&gt;'SYS'，to_type =&gt;'XMLTYPE'， transformation =&gt;'convert_to_order_xml（source.user_data）'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBDECHG">
                        <p class="titleinexample">示例37-3在海外发送消息之前应用转换</p><pre class="oac_no_warn" dir="ltr">- 为海外运输添加基于规则的订户到预订订单 - 具有转换的队列。DECLARE订户SYS.AQ $ _AGENT; BEGIN订阅者：= SYS.AQ $ _AGENT（'Overseas_Shipping'，'OS.OS_bookedorders_que'，NULL）; DBMS_AQADM.add_subscriber（queue_name =&gt;'OS_bookedorders_que'，subscriber =&gt; subscriber，rule =&gt;'XMLSerialize（CONTENT XMLQuery（'// orderregion'''||'PASSING tab.user_data RETURNING CONTENT）'||'AS VARCHAR2（ 1000））=''INTERNATIONAL'''，transformation =&gt;'OE.OE2XML'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3698B1BA-5B19-4E1C-9B39-E750AC477DD2__BGBBFGHC">
                        <p class="titleinexample">示例37-4 XMLType和AQ：出列消息</p><pre class="oac_no_warn" dir="ltr">- 创建进入单用户队列的过程。创建或替换程序get_canada_orders AS deq_msgid RAW（16）; dopt DBMS_AQ.dequeue_options_t; mprop DBMS_AQ.message_properties_t; deq_order_data SYS.XMLType; deq_order_data_text CLOB; no_messages EXCEPTION; PRAGMA EXCEPTION_INIT（no_messages，-25228）; new_orders BOOLEAN：= TRUE; BEGIN dopt.wait：= 1; - 指定出列条件以选择加拿大的订单。dopt.deq_condition：='XMLSerialize（CONTENT'||'XMLQuery（''/ ORDER_TYP / CUSTOMER / COUNTRY / text（）'''||'PASSING tab.user_data RETURNING CONTENT）'||'AS VARCHAR2（1000）） = '' CANADA '''; dopt.consumer_name：='Overseas_Shipping'; WHILE（new_orders）LOOP BEGIN DBMS_AQ.dequeue（queue_name =&gt;'OS.OS_bookedorders_que'，dequeue_options =&gt; dopt，message_properties =&gt; mprop，payload =&gt; deq_order_data，msgid =&gt; deq_msgid）;承诺; SELECT XMLSerialize（DOCUMENT deq_order_data AS CLOB）INTO deq_order_data_text FROM DUAL; DBMS_OUTPUT.put_line（'加拿大订单 - 订单：'|| deq_order_data_text）; no_messages然后DBMS_OUTPUT.put_line（'---- NO more ORDERS ----'）; new_orders：= FALSE;结束;结束循环;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-CBD2525F-4E5D-472C-9949-594500EA023A" title="使用HTTP（S）的Oracle数据库高级队列（AQ）操作需要iDAP HTTP客户端，Web服务器和Oracle服务器。">iDAP体系结构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5767"></a><div class="props_rev_3"><a id="GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" name="GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244"></a><h3 id="ADXDB-GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" class="sect3"><span class="enumeration_section">37.6</span>使用XML和Oracle数据库高级排队的准则</h3>
               <div>
                  <p>提供了使用Oracle数据高级队列的XML数据的指南。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-4627F944-78DE-471C-9BA1-81F8A4CD9A4D">将包含许多PDF的AQ XML消息存储为一条记录</a><br>您可以使用Oracle数据库高级队列（AQ）在企业之间交换XML文档，其中每个消息都包含XML标头，XML附件（XML数据流），DTD和PDF文件。数据可以存储在数据库表中，例如队列表。
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-6B265CF8-6267-4DFA-AF1C-8F1656B358B8">邮件入队后添加新收件人</a><br>您可以使用队列表来支持邮件分配。
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-EF9D9A9E-1A8C-45E7-AD01-6E8575DA6C48">排队和出列XML消息</a><br>Oracle数据库高级队列（AQ）支持对象的入队和出列。除了具有元数据属性之外，对象还可以具有<code class="codeph">XMLType</code>类型的属性，该属性包含XML文档。
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-F8FC0C37-527A-4047-B895-9FE5C57F4D91">使用AQ队列中的XML内容解析消息</a><br>您可以使用Oracle数据库高级队列（AQ）队列中的XML内容解析消息，然后更新操作数据存储（ODS）中的表和字段。
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-D9AACF43-69A5-4648-98C9-A56CF8B345A2">阻止侦听器停止直到处理XML文档</a><br>收到消息后，您可以使用PL / SQL包<code class="codeph">DBMS_JOB</code>提交作业。在另一个数据库会话中异步调用该作业。这可以防止消息在队列中累积，因为侦听器必须等到处理收到的XML消息。
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-950D3867-F1F8-445E-82F0-4B61FDC81BDD">与AQ的HTTPS</a><br>您可以使用Oracle数据库高级队列（AQ）Internet访问，使用HTTPS将XML消息发送给供应商并接收响应。您可以安全地和事务性地通过HTTP（S）对XML消息进行入队和出列。
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-AE306183-9332-43E0-B359-1E9F506DB9E2">将XML存储在Oracle AQ消息有效负载中</a><br>您可以将XML数据存储在Oracle数据库高级队列（AQ）消息有效负载中，而不是将ADT作为有效负载， <code class="codeph">SYS.XMLType</code>作为ADT的一部分。您可以创建具有有效负载和属性的队列作为<code class="codeph">XMLType</code> 。
                     </li>
                     <li class="ulchildlink"><a href="XML-data-exchange-using-streams-AQ.html#GUID-785F382E-0311-447E-9359-6AFF7F8EFCE1">iDAP和SOAP</a><br>iDAP是Oracle数据库高级队列（AQ）操作的SOAP规范。SOAP定义了一种调用服务的通用机制。 iDAP定义了执行AQ操作的这些机制。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-C8A2CAB3-8A82-4F72-A3BD-F8A0F48F5968" title="您可以使用Oracle数据库高级队列（AQ）交换XML数据，该队列提供数据库集成的消息队列。AQ使用消息启用和管理应用程序之间的异步通信。它支持点对点和发布/订阅通信模型。">使用Oracle数据库高级队列的XML数据交换</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5768"></a><div class="props_rev_3"><a id="GUID-4627F944-78DE-471C-9BA1-81F8A4CD9A4D" name="GUID-4627F944-78DE-471C-9BA1-81F8A4CD9A4D"></a><h4 id="ADXDB-GUID-4627F944-78DE-471C-9BA1-81F8A4CD9A4D" class="sect4"><span class="enumeration_section">37.6.1将</span>包含许多PDF的AQ XML消息存储为一条记录</h4>
                  <div>
                     <p>您可以使用Oracle数据库高级队列（AQ）在企业之间交换XML文档，其中每个消息都包含XML标头，XML附件（XML数据流），DTD和PDF文件。数据可以存储在数据库表中，例如队列表。</p>
                     <p>您可以将消息作为一个记录或片段排入Oracle队列表。或者您可以将消息排队为多个记录，例如，一个记录用于XML数据流作为<code class="codeph">CLOB</code>类型，一个记录用于PDF文件作为<code class="codeph">RAW</code>类型，等等。然后，您也可以将消息出列。
                     </p>
                     <p>您可以通过以下方式实现此目的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>通过使用（ <code class="codeph">CLOB</code> ， <code class="codeph">RAW</code> ，...）属性定义对象类型，并将其存储为单个消息。
                           </p>
                        </li>
                        <li>
                           <p>通过使用AQ消息分组功能并将其存储在多个消息中。此消息属性与组关联。要使用消息分组功能，所有消息必须是相同的有效负载类型。</p>
                        </li>
                     </ul>
                     <p>要指定有效负载，请首先创建对象类型，例如：</p><pre class="pre codeblock"><code>CREATE TYPE mypayload_type as OBJECT（xmlDataStream CLOB，dtd CLOB，pdf BLOB）;</code></pre><p>然后将其存储为单个消息。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="提供了使用Oracle数据高级队列的XML数据的指南。">使用XML和Oracle数据库高级排队的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5769"></a><div class="props_rev_3"><a id="GUID-6B265CF8-6267-4DFA-AF1C-8F1656B358B8" name="GUID-6B265CF8-6267-4DFA-AF1C-8F1656B358B8"></a><h4 id="ADXDB-GUID-6B265CF8-6267-4DFA-AF1C-8F1656B358B8" class="sect4"><span class="enumeration_section">37.6.2</span>在邮件<span class="enumeration_section">入队后</span>添加新收件人</h4>
                  <div>
                     <p>您可以使用队列表来支持邮件分配。</p>
                     <p>例如，当其他企业向特定公司发送消息时，他们不知道应该指派谁来处理消息，但他们知道这些消息是针对部门人力资源（HR）的。因此，所有消息都发送给HR主管。此时，消息在队列表中排队。HR主管是此消息的唯一接收者，并且已将整个HR人员预定义为此队列的订户。</p>
                     <p>邮件入队后，您无法更改收件人列表。如果您未指定收件人列表，则订户可以订阅队列并使邮件出列。在这里，新收件人必须是队列的订阅者。否则，您必须使邮件出列并使用新收件人再次将其排入队列。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="提供了使用Oracle数据高级队列的XML数据的指南。">使用XML和Oracle数据库高级排队的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5770"></a><div class="props_rev_3"><a id="GUID-EF9D9A9E-1A8C-45E7-AD01-6E8575DA6C48" name="GUID-EF9D9A9E-1A8C-45E7-AD01-6E8575DA6C48"></a><h4 id="ADXDB-GUID-EF9D9A9E-1A8C-45E7-AD01-6E8575DA6C48" class="sect4"><span class="enumeration_section">37.6.3对</span> XML消息进行入<span class="enumeration_section">队</span>和出列</h4>
                  <div>
                     <p>Oracle数据库高级队列（AQ）支持对象的入队和出列。除了具有元数据属性之外，对象还可以具有<code class="codeph">XMLType</code>类型的属性，该属性包含XML文档。
                     </p>
                     <p>有关具体详细信息和更多示例，请参阅“ <a href="../adque/aq-operations-using-pl-sql.html#ADQUE-GUID-B302CBDB-0B75-4BF6-B705-5DC3EA26E605" target="_blank"><span><cite>Oracle数据库高级队列用户指南”</cite></span></a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="提供了使用Oracle数据高级队列的XML数据的指南。">使用XML和Oracle数据库高级排队的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5771"></a><div class="props_rev_3"><a id="GUID-F8FC0C37-527A-4047-B895-9FE5C57F4D91" name="GUID-F8FC0C37-527A-4047-B895-9FE5C57F4D91"></a><h4 id="ADXDB-GUID-F8FC0C37-527A-4047-B895-9FE5C57F4D91" class="sect4"><span class="enumeration_section">37.6.4</span>使用AQ队列中的XML内容解析消息</h4>
                  <div>
                     <p>您可以使用Oracle数据库高级队列（AQ）队列中的XML内容解析消息，然后更新操作数据存储（ODS）中的表和字段。</p>
                     <p>您可以将Oracle XML Parser for Java和Java存储过程与AQ一起使用，以基于针对特定XML数据的查询来获取元数据，例如AQ入队或出队时间和JMS标头信息。您可以将其与使用Oracle Text XML搜索相结合。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="提供了使用Oracle数据高级队列的XML数据的指南。">使用XML和Oracle数据库高级排队的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5772"></a><div class="props_rev_3"><a id="GUID-D9AACF43-69A5-4648-98C9-A56CF8B345A2" name="GUID-D9AACF43-69A5-4648-98C9-A56CF8B345A2"></a><h4 id="ADXDB-GUID-D9AACF43-69A5-4648-98C9-A56CF8B345A2" class="sect4"><span class="enumeration_section">37.6.5</span>防止监听器停止直到处理XML文档</h4>
                  <div>
                     <p>收到消息后，您可以使用PL / SQL包<code class="codeph">DBMS_JOB</code>提交作业。在另一个数据库会话中异步调用该作业。这可以防止消息在队列中累积，因为侦听器必须等到处理收到的XML消息。
                     </p>
                     <p>从客户端接收XML消息时，您可能需要在它们到达时立即处理它们。但是每个XML文档可能需要几秒钟才能处理。对于PL / SQL，一个过程启动侦听器，使消息出列，并调用另一个过程来处理XML文档。可以保持监听器直到处理XML文档，并且消息将在队列中累积。</p>
                     <p>收到消息后，您可以使用PL / SQL包<code class="codeph">DBMS_JOB</code>提交作业。在另一个数据库会话中异步调用该作业。
                     </p>
                     <p>您可以注册PL / SQL回调，当消息显示在队列中时，该回调会异步调用。PL / SQL回调是Oracle数据库高级队列通知框架的一部分。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="提供了使用Oracle数据高级队列的XML数据的指南。">使用XML和Oracle数据库高级排队的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5773"></a><div class="props_rev_3"><a id="GUID-950D3867-F1F8-445E-82F0-4B61FDC81BDD" name="GUID-950D3867-F1F8-445E-82F0-4B61FDC81BDD"></a><h4 id="ADXDB-GUID-950D3867-F1F8-445E-82F0-4B61FDC81BDD" class="sect4"><span class="enumeration_section">37.6.6</span>带AQ的HTTPS</h4>
                  <div>
                     <p>您可以使用Oracle数据库高级队列（AQ）Internet访问，使用HTTPS将XML消息发送给供应商并接收响应。您可以安全地和事务性地通过HTTP（S）对XML消息进行入队和出列。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-950D3867-F1F8-445E-82F0-4B61FDC81BDD__GUID-2110EE8B-9390-4296-8744-C243B0265292">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../adque/aq-internet-access.html#ADQUE0600" target="_blank"><span><cite>Oracle数据库高级队列用户指南</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="提供了使用Oracle数据高级队列的XML数据的指南。">使用XML和Oracle数据库高级排队的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5774"></a><div class="props_rev_3"><a id="GUID-AE306183-9332-43E0-B359-1E9F506DB9E2" name="GUID-AE306183-9332-43E0-B359-1E9F506DB9E2"></a><h4 id="ADXDB-GUID-AE306183-9332-43E0-B359-1E9F506DB9E2" class="sect4"><span class="enumeration_section">37.6.7</span>在Oracle AQ消息有效<span class="enumeration_section">负载中</span>存储XML</h4>
                  <div>
                     <p>您可以将XML数据存储在Oracle数据库高级队列（AQ）消息有效负载中，而不是将ADT作为有效负载， <code class="codeph">SYS.XMLType</code>作为ADT的一部分。您可以创建具有有效负载和属性的队列作为<code class="codeph">XMLType</code> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="提供了使用Oracle数据高级队列的XML数据的指南。">使用XML和Oracle数据库高级排队的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5775"></a><div class="props_rev_3"><a id="GUID-785F382E-0311-447E-9359-6AFF7F8EFCE1" name="GUID-785F382E-0311-447E-9359-6AFF7F8EFCE1"></a><h4 id="ADXDB-GUID-785F382E-0311-447E-9359-6AFF7F8EFCE1" class="sect4"><span class="enumeration_section">37.6.8</span> iDAP和SOAP</h4>
                  <div>
                     <p>iDAP是Oracle数据库高级队列（AQ）操作的SOAP规范。SOAP定义了一种调用服务的通用机制。 iDAP定义了执行AQ操作的这些机制。</p>
                     <p>iDAP具有以下未由SOAP定义的关键属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>交易行为。您可以以事务方式执行AQ操作。事务可以跨越多个iDAP请求。</p>
                        </li>
                        <li>
                           <p>安全。 iDAP操作只能由经过授权和验证的用户执行。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-data-exchange-using-streams-AQ.html#GUID-7ECC454D-06A8-41EE-AA33-23CD9C18C244" title="提供了使用Oracle数据高级队列的XML数据的指南。">使用XML和Oracle数据库高级排队的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
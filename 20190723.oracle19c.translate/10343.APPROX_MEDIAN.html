<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>APPROX_MEDIAN</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="APPROX_COUNT_DISTINCT_DETAIL.html" title="Previous" type="text/html">
      <link rel="next" href="APPROX_PERCENTILE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="APPROX_COUNT_DISTINCT_DETAIL.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="APPROX_PERCENTILE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">APPROX_MEDIAN</li>
            </ol>
            <a id="GUID-F6A11DF2-121A-4057-9D0B-BF1A221B5622" name="GUID-F6A11DF2-121A-4057-9D0B-BF1A221B5622"></a>
            
            <h2 id="SQLRF-GUID-F6A11DF2-121A-4057-9D0B-BF1A221B5622" class="sect2">APPROX_MEDIAN</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-F6A11DF2-121A-4057-9D0B-BF1A221B5622__GUID-3D35715C-C9AE-43DC-9A5C-55F4D72D22D2">Syntax</p>
                  <div class="figure" id="GUID-F6A11DF2-121A-4057-9D0B-BF1A221B5622__GUID-7736E689-D912-4A66-9D11-086357BA374A"><img src="img/approx_median.gif" alt="Description of approx_median.eps follows" title="Description of approx_median.eps follows" longdesc="img_text/approx_median.html"><br><a href="img_text/approx_median.html">Description of the illustration approx_median.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F6A11DF2-121A-4057-9D0B-BF1A221B5622__GUID-A33AF009-F000-4729-9C80-BDF5797652E0">Purpose</p>
                  <p><code class="codeph">APPROX_MEDIAN</code> is an approximate inverse distribution function that assumes a continuous distribution model. It takes a numeric or datetime value and returns an approximate middle value or an approximate interpolated value that would be the middle value once the values are sorted. Nulls are ignored in the calculation.
                  </p>
                  <p>This function provides an alternative to the <code class="codeph">MEDIAN</code> function, which returns the exact middle value or interpolated value. <code class="codeph">APPROX_MEDIAN</code> processes large amounts of data significantly faster than <code class="codeph">MEDIAN</code>, with negligible deviation from the exact result.
                  </p>
                  <p>For <span class="italic"><code class="codeph">expr</code></span>, specify the expression for which the approximate median value is being calculated. The acceptable data types for <span class="italic"><code class="codeph">expr</code></span>, and the return value data type for this function, depend on the algorithm that you specify with the <code class="codeph">DETERMINISTIC</code> clause.
                  </p>
                  <p><span class="bold">DETERMINISTIC</span></p>
                  <p>This clause lets you specify the type of algorithm this function uses to calculate the approximate median value.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you specify <code class="codeph">DETERMINISTIC</code>, then this function calculates a deterministic approximate median value. In this case, <span class="italic"><code class="codeph">expr</code></span> must evaluate to a numeric value, or to a value that can be implicitly converted to a numeric value. The function returns the same data type as the numeric data type of its argument.
                        </p>
                     </li>
                     <li>
                        <p>If you omit <code class="codeph">DETERMINSTIC</code>, then this function calculates a nondeterministic approximate median value. In this case, <span class="italic"><code class="codeph">expr</code></span> must evaluate to a numeric or datetime value, or to a value that can be implicitly converted to a numeric or datetime value. The function returns the same data type as the numeric or datetime data type of its argument.
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">ERROR_RATE | CONFIDENCE</span></p>
                  <p>These clauses let you determine the accuracy of the value calculated by this function. If you specify one of these clauses, then instead of returning the approximate median value for <span class="italic"><code class="codeph">expr</code></span>, the function returns a decimal value from 0 to 1, inclusive, which represents one of the following values:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you specify <code class="codeph">ERROR_RATE</code>, then the return value represents the error rate for the approximate median value calculation for <span class="italic"><code class="codeph">expr</code></span>.
                        </p>
                     </li>
                     <li>
                        <p>If you specify <code class="codeph">CONFIDENCE</code>, then the return value represents the confidence level for the error rate that is returned when you specify <code class="codeph">ERROR_RATE</code>.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F6A11DF2-121A-4057-9D0B-BF1A221B5622__GUID-F79E35E6-5204-4F63-BC45-BAA8380C6795">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="MEDIAN.html#GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A">MEDIAN</a></p>
                        </li>
                        <li>
                           <p><a href="APPROX_PERCENTILE.html#GUID-70D54091-EE2F-4283-A10B-1AB5A1242FE2">APPROX_PERCENTILE</a> which returns, for a given percentile, the approximate value that corresponds to that percentile by way of interpolation. <code class="codeph">APPROX_MEDIAN</code> is the specific case of <code class="codeph">APPROX_PERCENTILE</code> where the percentile value is 0.5.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F6A11DF2-121A-4057-9D0B-BF1A221B5622__GUID-CB7E3569-26BF-4FE1-9CF8-9B1A020E4C2C">Examples</p>
                  <p>The following query returns the deterministic approximate median salary for each department in the <code class="codeph">hr</code>.<code class="codeph">employees</code> table:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT department_id "Department",
       APPROX_MEDIAN(salary DETERMINISTIC) "Median Salary"
  FROM employees
  GROUP BY department_id
  ORDER BY department_id;
 
Department Median Salary
---------- -------------
        10          4400
        20          6000
        30          2765
        40          6500
        50          3100
        60          4800
        70         10000
        80          9003
        90         17000
       100          7739
       110          8300
                    7000</pre><p>The following query returns the error rates for the approximate median salaries that were returned by the previous query:</p><pre class="oac_no_warn" dir="ltr">SELECT department_id "Department",
       APPROX_MEDIAN(salary DETERMINISTIC, 'ERROR_RATE') "Error Rate"
  FROM employees
  GROUP BY department_id
  ORDER BY department_id;

Department Error Rate
---------- ----------
        10 .002718282
        20 .021746255
        30 .021746255
        40 .002718282
        50 .019027973
        60 .019027973
        70 .002718282
        80 .021746255
        90 .021746255
       100 .019027973
       110 .019027973
           .002718282</pre><p>The following query returns the confidence levels for the error rates that were returned by the previous query:</p><pre class="oac_no_warn" dir="ltr">SELECT department_id "Department",
       APPROX_MEDIAN(salary DETERMINISTIC, 'CONFIDENCE') "Confidence Level"
  FROM employees
  GROUP BY department_id
  ORDER BY department_id;

Department Confidence Level
---------- ----------------
        10       .997281718
        20       .999660215
        30       .999660215
        40       .997281718
        50       .999611674
        60       .999611674
        70       .997281718
        80       .999660215
        90       .999660215
       100       .999611674
       110       .999611674
                 .997281718</pre><p>The following query returns the nondeterministic approximate median hire date for each department in the <code class="codeph">hr</code>.<code class="codeph">employees</code> table:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT department_id "Department",
       APPROX_MEDIAN(hire_date) "Median Hire Date"
  FROM employees
  GROUP BY department_id
  ORDER BY department_id;

Department Median Hire Date
---------- ----------------
        10        17-SEP-03
        20        17-FEB-04
        30        24-JUL-05
        40        07-JUN-02
        50        15-MAR-06
        60        05-FEB-06
        70        07-JUN-02
        80        23-MAR-06
        90        17-JUN-03
       100        28-SEP-05
       110        07-JUN-02
                  24-MAY-07</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
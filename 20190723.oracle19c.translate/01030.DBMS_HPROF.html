<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_HPROF package provides an interface for profiling the execution of PL/SQL applications. It provides services for collecting the hierarchical profiler data, analyzing the raw profiler output and profiling information generation."></meta>
      <meta name="description" content="The DBMS_HPROF package provides an interface for profiling the execution of PL/SQL applications. It provides services for collecting the hierarchical profiler data, analyzing the raw profiler output and profiling information generation."></meta>
      <title>DBMS_HPROF</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_HPROF package provides an interface for profiling the execution of PL/SQL applications. It provides services for collecting the hierarchical profiler data, analyzing the raw profiler output and profiling information generation."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_HM.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_HS_PARALLEL.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_HM.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_HS_PARALLEL.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_HPROF</li>
            </ol>
            <a id="GUID-D4E1F35B-25D9-45A2-8CB8-4E174931380A" name="GUID-D4E1F35B-25D9-45A2-8CB8-4E174931380A"></a><a id="ARPLS146"></a><a id="ARPLS146"></a>
            
            <h2 id="ARPLS-GUID-D4E1F35B-25D9-45A2-8CB8-4E174931380A" class="sect2"><span class="enumeration_chapter">80</span> DBMS_HPROF</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_HPROF</code>包提供了一个用于分析PL / SQL应用程序执行的界面。它提供用于收集分层分析器数据，分析原始分析器输出和分析信息生成的服务。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_HPROF.html#GUID-AD1233C0-E6DC-49B1-BC3B-3D933EBFD5BF" title="此表列出并简要描述了DBMS_HPROF程序包子程序。">DBMS_HPROF子程序摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-D4E1F35B-25D9-45A2-8CB8-4E174931380A__GUID-7AD8159F-DD58-4195-A62B-67B4774E0ED9">
                  <p class="notep1">也可以看看：</p>
                  <p>有关<a href="../adfns/hierarchical-profiler.html#ADFNS023" target="_blank">“PL / SQL分层分析器”的</a>更多信息，请<a href="../adfns/hierarchical-profiler.html#ADFNS023" target="_blank">参见</a> <span class="italic">Oracle数据库开发指南</span></p>
               </div>
            </div><a id="ARPLS66425"></a><a id="ARPLS66426"></a><a id="ARPLS66426"></a><a id="ARPLS66425"></a><div class="props_rev_3"><a id="GUID-AD1233C0-E6DC-49B1-BC3B-3D933EBFD5BF" name="GUID-AD1233C0-E6DC-49B1-BC3B-3D933EBFD5BF"></a><h3 id="ARPLS-GUID-AD1233C0-E6DC-49B1-BC3B-3D933EBFD5BF" class="sect3"><span class="enumeration_section">80.1</span> DBMS_HPROF子程序摘要</h3>
               <div>
                  <p>此表列出并简要描述了<code class="codeph">DBMS_HPROF</code>程序<code class="codeph">DBMS_HPROF</code>程序。
                  </p>
                  <div class="tblformal" id="GUID-AD1233C0-E6DC-49B1-BC3B-3D933EBFD5BF__GUID-AE7E745D-8E11-4B77-8B1B-01667BC69888">
                     <p class="titleintable">表80-1 DBMS_HPROF包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_HPROF包子程序" width="100%" border="1" summary="This table lists the DBMS_HPROF subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d459349e214">子程序</th>
                              <th align="left" valign="bottom" width="70%" id="d459349e217">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d459349e222" headers="d459349e214 ">
                                 <p><a href="DBMS_HPROF.html#GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947" title="此函数分析原始探查器输出并在数据库表中生成分层探查器信息或生成现成的HTML报告。">分析功能</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d459349e222 d459349e217 ">
                                 <p>分析原始分析器输出并在数据库表中生成分层分析器信息。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d459349e233" headers="d459349e214 ">
                                 <p><a href="DBMS_HPROF.html#GUID-CB4269C9-3FA4-45DD-84D8-704BD6A971CE" title="在用户会话中创建分层探查器数据库表和数据结构。">CREATE_TABLES过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d459349e233 d459349e217 ">
                                 <p>在用户会话中创建分层探查器数据库表和数据结构。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d459349e244" headers="d459349e214 ">
                                 <p><a href="DBMS_HPROF.html#GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD" title="此过程在用户会话中启动分层探查器数据收集。">START_PROFILING程序</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d459349e244 d459349e217 ">
                                 <p>在用户会话中启动分层探查器数据收集。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d459349e255" headers="d459349e214 ">
                                 <p><a href="DBMS_HPROF.html#GUID-540678A1-7AB2-428B-9023-45E9FDDE6362" title="此过程将停止用户会话中的探查器数据收集。该子程序还具有冲洗到目前为止在会话中收集的数据的副作用，并且它表示运行结束。当STOP_PROFILING过程返回CLOB时，它包含用于分析器运行的实时监控报告。">STOP_PROFILING过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d459349e255 d459349e217 ">
                                 <p>在用户的会话中停止探查器数据收集。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS66427"></a><a id="ARPLS66428"></a><a id="ARPLS66428"></a><a id="ARPLS66427"></a><div class="props_rev_3"><a id="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947" name="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947"></a><h4 id="ARPLS-GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947" class="sect4"><span class="enumeration_section">80.1.1</span>分析功能</h4>
                  <div>
                     <p>此函数分析原始探查器输出并在数据库表中生成分层探查器信息或生成现成的HTML报告。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947__GUID-7C3169CD-7556-4F03-8940-CCBFE5C9DD6B">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_HPROF.ANALYZE（trace_id IN NUMBER，summary_mode IN BOOLEAN DEFAULT FALSE，trace IN VARCHAR2 DEFAULT NULL，跳过IN PLS_INTEGER DEFAULT 0，收集IN PLS_INTEGER DEFAULT NULL，run_comment IN VARCHAR2 DEFAULT NULL）返回数字; DBMS_HPROF.ANALYZE（trace_id IN NUMBER，report_clob OUT CLOB，trace IN VARCHAR2 DEFAULT NULL，跳过IN PLS_INTEGER DEFAULT 0，收集IN PLS_INTEGER DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947__GUID-D4E596A3-3056-40FB-9594-F5B0C5464E99">参数</p>
                        <div class="tblformal" id="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947__GUID-43CADC1C-6BAD-4185-926D-8021278526C8">
                           <p class="titleintable">表80-2 ANALYZE功能参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ANALYZE函数参数" width="100%" border="1" summary="This table describes the parameters of DBMS_HPROF.ANALYZE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d459349e378">参数</th>
                                    <th align="left" valign="bottom" width="67%" id="d459349e381">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d459349e386" headers="d459349e378 ">
                                       <p><code class="codeph">trace_id的</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d459349e386 d459349e381 ">
                                       <p>该<code class="codeph">trace_id</code>在原始数据分析器表（原始分析器的数据输入的<code class="codeph">dbmshp_trace_data</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d459349e400" headers="d459349e378 ">
                                       <p><code class="codeph">summary_mode</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d459349e400 d459349e381 ">
                                       <p>默认情况下（即，当<code class="codeph">summary_mode</code>为<code class="codeph">FALSE</code> ），将进行详细分析。
                                       </p>
                                       <p>当<code class="codeph">summary_mode</code>为<code class="codeph">TRUE</code> ，仅在数据库表中生成顶级摘要信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d459349e422" headers="d459349e378 ">
                                       <p><code class="codeph">report_clob</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d459349e422 d459349e381 ">
                                       <p>分析的HTML报告。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d459349e430" headers="d459349e378 ">
                                       <p><code class="codeph">跟踪</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d459349e430 d459349e381 ">
                                       <p>仅分析以指定跟踪条目为根的子树。默认情况下（当trace为<code class="codeph">NULL</code> ），将为整个运行生成分析/报告。
                                       </p>
                                       <p>必须以特殊的引用限定格式指定跟踪条目。例如，'“ <code class="codeph">HR</code> ”。“ <code class="codeph">PKG</code> ”。“ <code class="codeph">FOO</code> ”'或'“”。“”。“ <code class="codeph">__plsql_vm</code> ”'。
                                       </p>
                                       <p>如果指定名称存在多个重载，则将分析所有这些重载。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d459349e457" headers="d459349e378 ">
                                       <p><code class="codeph">跳跃</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d459349e457 d459349e381 ">
                                       <p>仅在指定<code class="codeph">trace</code>使用。仅分析以指定跟踪为根的子树，但忽略要跟踪的第一个<code class="codeph">skip</code>调用。
                                       </p>
                                       <p>skip的默认值为<code class="codeph">0</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d459349e476" headers="d459349e378 ">
                                       <p><code class="codeph">搜集</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d459349e476 d459349e381 ">
                                       <p>仅在指定<code class="codeph">trace</code>使用。
                                       </p>
                                       <p>分析<code class="codeph">collect</code>跟踪调用的数量（从<code class="codeph">skip</code> +第1次调用开始）。
                                       </p>
                                       <p>默认情况下，仅收集1次调用。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d459349e497" headers="d459349e378 ">
                                       <p><code class="codeph">run_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d459349e497 d459349e381 ">
                                       <p>用户提供的此次运行评论。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947__GUID-A32AF3BE-F789-4C51-A0B6-1CD70915D2B1">返回值</p>
                        <p>此运行分析器的唯一运行标识符。然后，可以使用它从层次分析器表中查找与此运行相对应的结果。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947__GUID-A2152683-DE50-47E9-8588-D9711C50FFDB">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">DBMS_HPROF.CREATE_TABLES</code>子程序创建分层探查器数据库表以及持久存储分析原始探查器数据结果所需的其他数据结构。
                              </p>
                           </li>
                           <li>
                              <p>如果表已存在， <code class="codeph">DBMS_HPROF.CREATE_TABLES</code>使用默认值（ <code class="codeph">FALSE</code> ）调用<code class="codeph">DBMS_HPROF.CREATE_TABLES</code>将引发错误。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBMS_HPROF.CREATE_TABLES(TRUE)</code>删除以前创建的任何分层探查器表。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBMS_HPROF.CREATE_TABLES</code>删除以前创建的任何分层探查器表。默认情况下， <code class="codeph">force_it</code>为<code class="codeph">FALSE</code> ;因此，要删除任何先前创建的分层探查器表，必须将<code class="codeph">force_it</code>的值设置为<code class="codeph">TRUE</code> 。</p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">trace_id</code>条目为<code class="codeph">NULL</code> ，则引发错误。
                              </p>
                           </li>
                           <li>
                              <p>如果原始探查器数据表中的<code class="codeph">trace_id</code>条目不存在，则会引发错误。
                              </p>
                           </li>
                           <li>
                              <p>如果原始探查器数据表中的<code class="codeph">trace_id</code>条目的原始数据为<code class="codeph">NULL</code>或大小<code class="codeph">zero</code> ，则会引发错误。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947__GUID-54497E73-7846-4C4D-9BB7-0A46C592C5C9">例子</p>
                        <p>以下代码段在HR模式中安装分层探查器表。</p><pre class="oac_no_warn" dir="ltr">连接HR / HR;</pre><p>以下示例从原始探查器数据表中分析并生成HTML CLOB报告。</p><pre class="oac_no_warn" dir="ltr">DECLARE reportclob clob; trace_id号码; BEGIN  - 创建原始分析器数据和分析表 - 如果表存在DBMS_HPROF.CREATE_TABLES（force_it =&gt; TRUE），则强制执行分析表 -  force_it =&gt; TRUE将删除表。 - 开始分析 - 在原始分析器数据表中写入原始分析器数据trace_id：= DBMS_HPROF.START_PROFILING; - 运行程序进行轮廓测试; - 停止分析DBMS_HPROF.STOP_PROFILING; - 分析原始分析器数据表中的trace_id条目，并在reportclob DBMS_HPROF.ANALYZE（trace_id，reportclob）中生成分析的HTML报告;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-CB4269C9-3FA4-45DD-84D8-704BD6A971CE" name="GUID-CB4269C9-3FA4-45DD-84D8-704BD6A971CE"></a><h4 id="ARPLS-GUID-CB4269C9-3FA4-45DD-84D8-704BD6A971CE" class="sect4"><span class="enumeration_section">80.1.2</span> CREATE_TABLES过程</h4>
                  <div>
                     <p>在用户会话中创建分层探查器数据库表和数据结构。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-CB4269C9-3FA4-45DD-84D8-704BD6A971CE__GUID-047AF77B-10BE-4163-9F7E-E2233DB7F77E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_HPROF.CREATE_TABLES（force_it IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB4269C9-3FA4-45DD-84D8-704BD6A971CE__GUID-41902720-8CF6-4A30-81D3-F5DD7BC8C449">参数</p>
                        <div class="tblformal" id="GUID-CB4269C9-3FA4-45DD-84D8-704BD6A971CE__GUID-D54FCFFE-9558-4172-9146-47F045119BFB">
                           <p class="titleintable">表80-3 CREATE_TABLES过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_TABLES过程参数" border="1" summary="This table describes the parameters of DBMS_HPROF.CREATE_TABLES." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d459349e697">参数</th>
                                    <th align="left" valign="bottom" id="d459349e700">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d459349e705" headers="d459349e697 ">
                                       <p><code class="codeph">force_it</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d459349e705 d459349e700 ">
                                       <p>如果存在<code class="codeph">FALSE</code>和<code class="codeph">DBMS_HPROF</code>表，则会引发<code class="codeph">HPROF</code>错误。
                                       </p>
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程创建表。如果表已经存在，则删除它们并创建新表。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-CB4269C9-3FA4-45DD-84D8-704BD6A971CE__GUID-89E0D1AF-45DB-4545-B127-44C78D5EF730">
                           <p class="notep1">注意：</p>
                           <p>用户无需使用位于<code class="codeph">rdbms/admin</code>目录中的<code class="codeph">dbmshptab.sql</code>脚本来创建分层探查器数据库表和数据结构。
                           </p>
                           <p>从Oracle Database 18 <span class="italic">c</span>开始，不推荐使用<code class="codeph">dbmshptab.sql</code>脚本。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66429"></a><a id="ARPLS66430"></a><a id="ARPLS66430"></a><a id="ARPLS66429"></a><div class="props_rev_3"><a id="GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD" name="GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD"></a><h4 id="ARPLS-GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD" class="sect4"><span class="enumeration_section">80.1.3</span> START_PROFILING程序</h4>
                  <div>
                     <p>此过程在用户会话中启动分层探查器数据收集。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD__GUID-4246F672-0198-46FB-A972-ACF5E60DF03C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_HPROF.START_PROFILING（max_depth IN PLS_INTEGER DEFAULT NULL，sqlmonitor IN BOOLEAN DEFAULT TRUE，run_comment IN VARCHAR2 DEFAULT NULL）返回数字;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD__GUID-F7CF1B7F-BA46-477D-9876-29D592DACC70">参数</p>
                        <div class="tblformal" id="GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD__GUID-7260A451-253B-4DDD-B5D4-8E8B9671FDC2">
                           <p class="titleintable">表80-4 START_PROFILING过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="START_PROFILING过程参数" width="100%" border="1" summary="This table describes the parameters of DBMS_HPROF.START_PROFILING." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d459349e853">参数</th>
                                    <th align="left" valign="bottom" width="67%" id="d459349e856">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d459349e861" headers="d459349e853 ">
                                       <p><code class="codeph">MAX_DEPTH</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d459349e861 d459349e856 ">
                                       <p>默认情况下（即，当<code class="codeph">max_depth</code>值为<code class="codeph">NULL</code> ）将收集所有函数的配置文件信息，而不管其调用深度如何。当为<code class="codeph">max_depth</code>指定非<code class="codeph">NULL</code>值时，探查器仅为最大调用深度级别<code class="codeph">max_depth</code>函数收集数据。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d459349e884" headers="d459349e853 ">
                                       <p><code class="codeph">sqlmonitor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d459349e884 d459349e856 ">
                                       <p>在分析器运行结束时为分析器运行生成实时监控报告。</p>
                                       <p>默认值为<code class="codeph">TRUE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d459349e897" headers="d459349e853 ">
                                       <p><code class="codeph">run_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d459349e897 d459349e856 ">
                                       <p>用户为分析器数据收集运行提供了注释。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD__GUID-0C9E7A97-1525-4EB8-B780-9BAF1DF9805E">返回值</p>
                        <p>此探查器运行的唯一运行标识符。然后，可以使用它从层次分析器表中查找与此运行相对应的结果。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD__GUID-A70DDEE7-06FA-44D5-B2C9-9AF9F429F447">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>即使探查器没有单独跟踪深度大于<code class="codeph">max_depth</code>函数，在这些函数中花费的时间也会在深度为<code class="codeph">max_depth</code>的祖先函数中<code class="codeph">max_depth</code> 。
                              </p>
                           </li>
                           <li>
                              <p>原始分析器数据在原始分析器数据表中生成，具有唯一的<code class="codeph">trace_id</code> 。
                              </p>
                           </li>
                           <li>
                              <p>唯一的<code class="codeph">trace_id</code>用于管理存储在原始探查器数据表中的原始探查器输出。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66431"></a><a id="ARPLS66431"></a><div class="props_rev_3"><a id="GUID-540678A1-7AB2-428B-9023-45E9FDDE6362" name="GUID-540678A1-7AB2-428B-9023-45E9FDDE6362"></a><h4 id="ARPLS-GUID-540678A1-7AB2-428B-9023-45E9FDDE6362" class="sect4"><span class="enumeration_section">80.1.4</span> STOP_PROFILING过程</h4>
                  <div>
                     <p>此过程将停止用户会话中的探查器数据收集。该子程序还具有冲洗到目前为止在会话中收集的数据的副作用，并且它表示运行结束。当<code class="codeph">STOP_PROFILING</code>过程返回CLOB时，它包含用于分析器运行的实时监控报告。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-540678A1-7AB2-428B-9023-45E9FDDE6362__GUID-5B27CD99-0CFA-4D0A-B95E-06BC0C2AE868">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_HPROF.STOP_PROFILING; DBMS_HPROF.STOP_PROFILING RETURN CLOB;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-540678A1-7AB2-428B-9023-45E9FDDE6362__GUID-45967EEA-8521-4437-A530-1224E19C85A0">例子</p>
                        <p>使用原始分析器数据表进行分析</p><pre class="oac_no_warn" dir="ltr">DECLARE analyze_runid数字; trace_id号码; BEGIN  - 创建原始探查器数据和分析表 - 当 - 原始探查器数据和分析表不存在时，使用force_it =&gt; FALSE（默认）调用create_tables DBMS_HPROF.CREATE_TABLES; - 开始分析 - 在原始分析器数据表中写入原始分析器数据trace_id：= DBMS_HPROF.START_PROFILING; - 运行程序进行分析测试; - 停止分析DBMS_HPROF.STOP_PROFILING; - 分析原始分析器数据表中的trace_id条目并写入 -  hprof分析表中的分层分析器信息analyze_runid：= DBMS_HPROF.ANALYZE（trace_id）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
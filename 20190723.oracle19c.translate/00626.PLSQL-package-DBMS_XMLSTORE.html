<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can use PL/SQL package DBMS_XMLSTORE to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package DBMS_XMLGEN. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables."></meta>
      <meta name="description" content="You can use PL/SQL package DBMS_XMLSTORE to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package DBMS_XMLGEN. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables."></meta>
      <title>PL / SQL包DBMS_XMLSTORE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You can use PL/SQL package DBMS_XMLSTORE to insert, update, or delete data from XML documents stored object-relationally. It uses a canonical XML mapping similar to the one produced by package DBMS_XMLGEN. It converts the mapping to object-relational constructs and then inserts, updates or deletes the corresponding values in relational tables."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="PLSQL-APIs-for-XMLType.html" title="Previous" type="text/html"></link>
      <link rel="next" href="Java-DOM-API-for-XMLType.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="PLSQL-APIs-for-XMLType.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="Java-DOM-API-for-XMLType.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XMLType-APIs.html" property="item" typeof="WebPage"><span property="name">XMLType API</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PL / SQL包DBMS_XMLSTORE</li>
            </ol>
            <a id="GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" name="GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4"></a><a id="ADXDB1200"></a>
            
            <h2 id="ADXDB-GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" class="sect2"><span class="enumeration_chapter">12</span> PL / SQL包DBMS_XMLSTORE</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用PL / SQL包<code class="codeph">DBMS_XMLSTORE</code>从对象存储的XML文档中插入，更新或删除数据。它使用类似于包<code class="codeph">DBMS_XMLGEN</code>生成的规范XML映射。它将映射转换为对象关系构造，然后在关系表中插入，更新或删除相应的值。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5">使用包DBMS_XMLSTORE</a><br>创建上下文句柄，执行一个或多个插入，更新或删除，然后关闭上下文，</li>
                  <li class="ulchildlink"><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E">使用DBMS_XMLSTORE插入XML文档</a><br>您可以使用PL / SQL包<code class="codeph">DBMS_XMLSTORE</code>将XML文档插入表或视图中。它解析文档并创建一个<code class="codeph">INSERT</code>语句，它将值绑定到该语句中。默认情况下，它会将值插入XML文档中元素表示的所有列中。
                  </li>
                  <li class="ulchildlink"><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8">使用DBMS_XMLSTORE更新XML数据</a><br>您可以使用PL / SQL包<code class="codeph">DBMS_XMLSTORE</code>来更新（修改）现有数据。您可以通过为共同用于标识行的<span class="italic">每个</span>列调用过程<code class="codeph">setKeyColumn</code>一次来指定要更新的行。（在SQL中，您将在<code class="codeph">UPDATE</code>语句中使用<code class="codeph">WHERE</code>子句指定行。）
                  </li>
                  <li class="ulchildlink"><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-9CA65F29-53EA-434E-9AE8-D300511337DF">使用DBMS_XMLSTORE删除XML数据</a><br>您可以使用PL / SQL包<code class="codeph">DBMS_XMLSTORE</code>删除现有数据。您可以通过为共同用于标识行的<span class="italic">每个</span>列调用过程<code class="codeph">setKeyColumn</code>一次来指定要删除的行。（在SQL中，您将在<code class="codeph">UPDATE</code>语句中使用<code class="codeph">WHERE</code>子句指定行。）
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="XMLType-APIs.html#GUID-6209297F-DBE4-4F31-85F1-4083BF5BDE01" title="您可以使用Oracle XML DB XMLType PL / SQL，Java，C API和Oracle Data Provider for .NET（ODP.NET）来访问和操作XML数据。">XMLType API</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB4924"></a><div class="props_rev_3"><a id="GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5" name="GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5"></a><h3 id="ADXDB-GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5" class="sect3"><span class="enumeration_section">12.1</span>使用包DBMS_XMLSTORE</h3>
               <div>
                  <p>创建上下文句柄，执行一个或多个插入，更新或删除，然后关闭上下文，</p>
                  <div class="section">
                     <p>要使用PL / SQL包<code class="codeph">DBMS_XMLSTORE</code> ，请按照下列步骤操作：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>通过调用函数<code class="codeph">DBMS_XMLSTORE</code>创建上下文句柄。 <span class="bold"><code class="codeph">newContext</code></span>并为其提供用于DML操作的表名。区分大小写，双引号（ <span class="bold"><code class="codeph">"</code></span> ）传递给函数的字符串。</span><div>
                           <p>默认情况下，XML文档应使用<code class="codeph">&lt;ROW&gt;</code>标记来标识行。这与生成XML数据时<code class="codeph">DBMS_XMLGEN</code>包使用的默认值相同。您可以使用函数<code class="codeph">setRowTag</code>来覆盖此行为。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>（可选）执行一次或多次插入，更新或删除（您可以<span class="italic">重复</span>此步骤）：</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于<span class="italic">插入</span> ，为了提高性能，您可以通过调用过程<code class="codeph">DBMS_XMLSTORE.</code>指定要插入的列的列表<code class="codeph">DBMS_XMLSTORE.</code>每列的<span class="bold"><code class="codeph">setUpdateColumn</code></span> 。默认行为（如果未指定列列表）是为XML文档中存在相应元素的每个列插入值。
                                 </p>
                              </li>
                              <li id="GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5__FORUPDATESUSEFUNCTIONDBMS_XMLSTORE.-0D932167">
                                 <p id="GUID-B0BBEBAD-4C61-4A21-956F-E4870A70DBF5__FORUPDATESUSEFUNCTIONDBMS_XMLSTORE.-0D94AA8D">有关<span class="italic">更新</span> ，请使用函数<code class="codeph">DBMS_XMLSTORE.</code> <span class="bold"><code class="codeph">setKeyColumn</code></span>指定一个或多个（伪）键列，用于指定要更新的<span class="italic">行</span> 。您可以在SQL <code class="codeph">UPDATE</code>语句的<code class="codeph">WHERE</code>子句中执行此操作。您指定的列不必是表的键，但它们必须唯一地指定要更新的行。
                                 </p>
                                 <p>例如，在表<code class="codeph">employees</code> ，柱<code class="codeph">employee_id</code>唯一标识行（它是表中的一个键）。如果用于更新表的XML文档包含元素<code class="codeph">&lt;EMPLOYEE_ID&gt;2176&lt;/EMPLOYEE_ID&gt;</code> ，则更新<code class="codeph">employee_id</code>等于<code class="codeph">2176</code>的行。
                                 </p>
                                 <p>要提高性能，还可以使用<code class="codeph">DBMS_XMLSTORE.</code>指定更新列的列表<code class="codeph">DBMS_XMLSTORE.</code> <span class="bold"><code class="codeph">setUpdateColumn</code></span> 。默认行为是更新由<code class="codeph">setKeyColumn</code>标识的行中的<span class="italic">所有</span>列，其对应的元素存在于XML文档中。
                                 </p>
                              </li>
                              <li>
                                 <p>对于<span class="italic">删除，</span>您指定（伪）键列以标识要删除的行。您可以像指定要更新的行一样执行此操作（请参阅上一页）。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>提供<code class="codeph">DBMS_XMLSTORE</code>函数<code class="codeph">insertXML</code> ， <code class="codeph">updateXML</code>或<code class="codeph">deleteXML</code> 。您可以<span class="italic">重复</span>此步骤以更新多个XML文档。</span></li>
                     <li class="stepexpand"><span>通过调用函数<code class="codeph">DBMS_XMLSTORE.</code>关闭上下文<code class="codeph">DBMS_XMLSTORE.</code> <span class="bold"><code class="codeph">closeContext</code></span> 。</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" title="您可以使用PL / SQL包DBMS_XMLSTORE从对象存储的XML文档中插入，更新或删除数据。它使用类似于包DBMS_XMLGEN生成的规范XML映射。它将映射转换为对象关系构造，然后在关系表中插入，更新或删除相应的值。">PL / SQL包DBMS_XMLSTORE</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4926"></a><a id="ADXDB4925"></a><div class="props_rev_3"><a id="GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E" name="GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E"></a><h3 id="ADXDB-GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E" class="sect3"><span class="enumeration_section">12.2</span>使用DBMS_XMLSTORE插入XML文档</h3>
               <div>
                  <p>您可以使用PL / SQL包<code class="codeph">DBMS_XMLSTORE</code>将XML文档插入表或视图中。它解析文档并创建一个<code class="codeph">INSERT</code>语句，它将值绑定到该语句中。默认情况下，它会将值插入XML文档中元素表示的所有列中。
                  </p>
                  <div class="section">
                     <p><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E__CFHBJEBH">示例12-1</a>使用<code class="codeph">DBM_XMLSTORE</code>将两个新员工的信息插入<code class="codeph">employees</code>表。要插入的信息以XML数据的形式提供。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4FC8C4EB-D720-4B41-B8B2-A3F2E1BA1D2E__CFHBJEBH">
                     <p class="titleinexample">示例12-1使用指定列插入数据</p><pre class="pre codeblock"><code>SELECT employee_id AS EMP_ID，salary，hire_date，job_id，email，last_name FROM employees WHERE department_id = 30; EMP_ID SALARY HIRE_DATE JOB_ID EMAIL LAST_NAME ------ ---------- --------- ---------- --------- -  ---------- 114 11000 07-DEC-94 PU_MAN DRAPHEAL Raphaely 115 3100 18-MAY-95 PU_CLERK AKHOO Khoo 116 2900 24-DEC-97 PU_CLERK SBAIDA Baida 117 2800 24-JUL-97 PU_CLERK STOBIAS Tobias 118 2600 15-NOV-98 PU_CLERK GHIMURO Himuro 119 2500 10-AUG-99 PU_CLERK KCOLMENA Colmenares 6行选择。DECLARE insCtx DBMS_XMLSTORE.ctxType;行NUMBER; xmlDoc CLOB：='&lt;ROWSET&gt; &lt;ROW num =“1”&gt; &lt;EMPLOYEE_ID&gt; 920 &lt;/ EMPLOYEE_ID&gt; &lt;SALARY&gt; 1800 &lt;/ SALARY&gt; &lt;DEPARTMENT_ID&gt; 30 &lt;/ DEPARTMENT_ID&gt; &lt;HIRE_DATE&gt; 2002年12月17日&lt;/ HIRE_DATE&gt; &lt;LAST_NAME&gt; Strauss &lt;/ LAST_NAME&gt; &lt;EMAIL&gt; JSTRAUSS &lt;/ EMAIL&gt; &lt;JOB_ID&gt; ST_CLERK &lt;/ JOB_ID&gt; &lt;/ ROW&gt; &lt;ROW&gt; &lt;EMPLOYEE_ID&gt; 921 &lt;/ EMPLOYEE_ID&gt; &lt;SALARY&gt; 2000 &lt;/ SALARY&gt; &lt; DEPARTMENT_ID&gt; 30 &lt;/ DEPARTMENT_ID&gt; &lt;HIRE_DATE&gt; 31-DEC-2004 &lt;/ HIRE_DATE&gt; &lt;LAST_NAME&gt; Jones &lt;/ LAST_NAME&gt; &lt;EMAIL&gt; EJONES &lt;/ EMAIL&gt; &lt;JOB_ID&gt; ST_CLERK &lt;/ JOB_ID&gt; &lt;/ ROW&gt; &lt;/ ROWSET &gt;'; BEGIN insCtx：= DBMS_XMLSTORE。 <span class="bold">newContext</span> （'HR.EMPLOYEES'）; - 获取保存的上下文DBMS_XMLSTORE.clearUpdateColumnList（insCtx）; - 清除更新设置 - 将要更新的列设置为值列表DBMS_XMLSTORE。 <span class="bold">setUpdateColumn</span> （insCtx，'EMPLOYEE_ID'）; DBMS_XMLSTORE。 <span class="bold">setUpdateColumn</span> （insCtx，'SALARY'）; DBMS_XMLSTORE。 <span class="bold">setUpdateColumn</span> （insCtx，'HIRE_DATE'）; DBMS_XMLSTORE。 <span class="bold">setUpdateColumn</span> （insCtx，'DEPARTMENT_ID'）; DBMS_XMLSTORE。 <span class="bold">setUpdateColumn</span> （insCtx，'JOB_ID'）; DBMS_XMLSTORE。 <span class="bold">setUpdateColumn</span> （insCtx，'EMAIL'）; DBMS_XMLSTORE。 <span class="bold">setUpdateColumn</span> （insCtx，'LAST_NAME'）; - 插入文档。rows：= DBMS_XMLSTORE。 <span class="bold">insertXML</span> （insCtx，xmlDoc）; DBMS_OUTPUT.put_line（ <span class="bold">插入</span>行||' <span class="bold">行。</span>“）; - 关闭上下文DBMS_XMLSTORE。 <span class="bold">closeContext</span> （insCtx）;结束; / <span class="bold">2行插入。</span>PL / SQL过程成功完成。SELECT employee_id AS EMP_ID，salary，hire_date，job_id，email，last_name FROM employees WHERE department_id = 30; EMP_ID SALARY HIRE_DATE JOB_ID EMAIL LAST_NAME ------ ---------- --------- ---------- --------- -  ---------- 114 11000 07-DEC-94 PU_MAN DRAPHEAL Raphaely 115 3100 18-MAY-95 PU_CLERK AKHOO Khoo 116 2900 24-DEC-97 PU_CLERK SBAIDA Baida 117 2800 24-JUL-97 PU_CLERK STOBIAS Tobias 118 2600 15-NOV-98 PU_CLERK GHIMURO Himuro 119 2500 10-AUG-99 PU_CLERK KCOLMENA Colmenares <span class="bold">920 1800 17-DEC-02 ST_CLERK STRAUSS Strauss</span> <span class="bold">921 2000 31-DEC-04 ST_CLERK EJONES Jones</span>选择了8行。</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" title="您可以使用PL / SQL包DBMS_XMLSTORE从对象存储的XML文档中插入，更新或删除数据。它使用类似于包DBMS_XMLGEN生成的规范XML映射。它将映射转换为对象关系构造，然后在关系表中插入，更新或删除相应的值。">PL / SQL包DBMS_XMLSTORE</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4928"></a><a id="ADXDB4927"></a><div class="props_rev_3"><a id="GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8" name="GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8"></a><h3 id="ADXDB-GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8" class="sect3"><span class="enumeration_section">12.3</span>使用DBMS_XMLSTORE更新XML数据</h3>
               <div>
                  <p>您可以使用PL / SQL包<code class="codeph">DBMS_XMLSTORE</code>来更新（修改）现有数据。您可以通过为共同用于标识行的<span class="italic">每个</span>列调用过程<code class="codeph">setKeyColumn</code>一次来指定要更新的行。（在SQL中，您将在<code class="codeph">UPDATE</code>语句中使用<code class="codeph">WHERE</code>子句指定行。）
                  </p>
                  <div class="section">
                     <p>您可以将这组列视为一组键列： <span class="italic">它们一起指定</span>要更新<span class="italic">的唯一行</span> 。但是，您使用（与列<code class="codeph">setKeyColumn</code> ） <span class="italic">不需要</span>表的键-只要他们唯一的指定一个排，他们可以通过调用使用<code class="codeph">setKeyColumn</code> 。
                     </p>
                     <p><a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8__CFHEHGCA">例12-2</a>使用<code class="codeph">DBM_XMLSTORE</code>来更新信息。假设员工编号188的第一个名称被错误地记录为Kelly，此示例将该名称更正为Pat。由于<code class="codeph">employee_id</code>列是表<code class="codeph">employees</code>的主键，因此单次调用<code class="codeph">setKeyColumn</code>指定列<code class="codeph">employee_id</code>就足以标识要更新的唯一行。
                     </p>
                     <p>以下<code class="codeph">UPDATE</code>语句相当于在<a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8__CFHEHGCA">示例12-2中</a>使用<code class="codeph">DBM_XMLSTORE</code> ：</p><pre class="pre codeblock"><code>UPDATE hr.employees SET first_name ='Pat'WHER employee_id = 188;</code></pre></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EA15E983-4DF9-47BB-960C-C8602691A9B8__CFHEHGCA">
                     <p class="titleinexample">示例12-2使用键列更新数据</p><pre class="pre codeblock"><code>SELECT employee_id，first_name FROM employees WHERE employee_id = 188; EMPLOYEE_ID FIRST_NAME ----------- ---------- 188 <span class="bold">凯莉</span> 1排选中。DECLARE updCtx DBMS_XMLSTORE.ctxType;行NUMBER; xmlDoc CLOB：='&lt;ROWSET&gt; &lt;ROW&gt; &lt;EMPLOYEE_ID&gt; 188 &lt;/ EMPLOYEE_ID&gt; &lt;FIRST_NAME&gt; <span class="bold">Pat</span> &lt;/ FIRST_NAME&gt; &lt;/ ROW&gt; &lt;/ ROWSET&gt;'; BEGIN updCtx：= DBMS_XMLSTORE.newContext（'HR.EMPLOYEES'）; - 获取上下文DBMS_XMLSTORE.clearUpdateColumnList（updCtx）; - 清除更新设置 - 指定employee_id列是用于标识要更新的行的“键”。DBMS_XMLSTORE。 <span class="bold">setKeyColumn</span> （updCtx，'EMPLOYEE_ID'）; rows：= DBMS_XMLSTORE。 <span class="bold">updateXML</span> （updCtx，xmlDoc）; - 更新表DBMS_XMLSTORE.closeContext（updCtx）; - 关闭上下文END; / SELECT employee_id，first_name FROM employees WHERE employee_id = 188; EMPLOYEE_ID FIRST_NAME ----------- ----------选择188 <span class="bold">专利</span> 1行。
</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" title="您可以使用PL / SQL包DBMS_XMLSTORE从对象存储的XML文档中插入，更新或删除数据。它使用类似于包DBMS_XMLGEN生成的规范XML映射。它将映射转换为对象关系构造，然后在关系表中插入，更新或删除相应的值。">PL / SQL包DBMS_XMLSTORE</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4930"></a><a id="ADXDB4929"></a><div class="props_rev_3"><a id="GUID-9CA65F29-53EA-434E-9AE8-D300511337DF" name="GUID-9CA65F29-53EA-434E-9AE8-D300511337DF"></a><h3 id="ADXDB-GUID-9CA65F29-53EA-434E-9AE8-D300511337DF" class="sect3"><span class="enumeration_section">12.4</span>使用DBMS_XMLSTORE删除XML数据</h3>
               <div>
                  <p>您可以使用PL / SQL包<code class="codeph">DBMS_XMLSTORE</code>删除现有数据。您可以通过为共同用于标识行的<span class="italic">每个</span>列调用过程<code class="codeph">setKeyColumn</code>一次来指定要删除的行。（在SQL中，您将在<code class="codeph">UPDATE</code>语句中使用<code class="codeph">WHERE</code>子句指定行。）
                  </p>
                  <div class="example" id="GUID-9CA65F29-53EA-434E-9AE8-D300511337DF__GUID-970DD27A-74B3-43B5-BC39-E9F545940484">
                     <p class="titleinexample">例12-3 DBMS_XMLSTORE.DELETEXML示例</p><pre class="pre codeblock"><code>SELECT employee_id FROM employees WHERE employee_id = 188; EMPLOYEE_ID ----------- 188选择1行。DECLARE delCtx DBMS_XMLSTORE.ctxType;行NUMBER; xmlDoc CLOB：='&lt;ROWSET&gt; &lt;ROW&gt; &lt;EMPLOYEE_ID&gt; 188 &lt;/ EMPLOYEE_ID&gt; &lt;DEPARTMENT_ID&gt; 50 &lt;/ DEPARTMENT_ID&gt; &lt;/ ROW&gt; &lt;/ ROWSET&gt;'; BEGIN delCtx：= DBMS_XMLSTORE.newContext（'HR.EMPLOYEES'）; DBMS_XMLSTORE.setKeyColumn（delCtx，'EMPLOYEE_ID'）; rows：= DBMS_XMLSTORE。 <span class="bold">deleteXML</span> （delCtx，xmlDoc）; DBMS_XMLSTORE.closeContext（delCtx）;结束; / SELECT employee_id FROM employees WHERE employee_id = 188;没有选择任何行。</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="PLSQL-package-DBMS_XMLSTORE.html#GUID-C8FBA4EA-3F75-43A8-9B18-CEC271AB9BD4" title="您可以使用PL / SQL包DBMS_XMLSTORE从对象存储的XML文档中插入，更新或删除数据。它使用类似于包DBMS_XMLGEN生成的规范XML映射。它将映射转换为对象关系构造，然后在关系表中插入，更新或删除相应的值。">PL / SQL包DBMS_XMLSTORE</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
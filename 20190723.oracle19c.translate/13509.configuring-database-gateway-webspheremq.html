<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>为WebSphere MQ配置Oracle Database Gateway</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Installation and User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Installation and User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-websphere-mq-installation-and-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T19:05:45-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96225-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="removing-database-gateway-webspheremq.html" title="Previous" type="text/html"></link>
      <link rel="next" href="database-gateway-webspheremq-running-environment.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for WebSphere MQ Installation and User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="WSMQG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="removing-database-gateway-webspheremq.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="database-gateway-webspheremq-running-environment.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安装和用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">为WebSphere MQ配置Oracle Database Gateway</li>
            </ol>
            <a id="GUID-8EB3B980-C65C-48BA-AB7A-59BF4A8DF490" name="GUID-8EB3B980-C65C-48BA-AB7A-59BF4A8DF490"></a><a id="WSMQG159"></a>
            
            <h2 id="WSMQG-GUID-8EB3B980-C65C-48BA-AB7A-59BF4A8DF490" class="sect2"><span class="enumeration_chapter">7</span>为WebSphere MQ配置Oracle Database Gateway</h2>
         </header>
         <div class="ind">
            <div>
               <p>安装Oracle Database Gateway for WebSphere MQ后，请按照以下主题中的说明配置网关。</p>
            </div><a id="WSMQG160"></a><div class="props_rev_3"><a id="GUID-2B5FDAF2-1267-4164-A49B-C835C1C51889" name="GUID-2B5FDAF2-1267-4164-A49B-C835C1C51889"></a><h3 id="WSMQG-GUID-2B5FDAF2-1267-4164-A49B-C835C1C51889" class="sect3">配置概述</h3>
               <div>
                  <p>网关使用多个组件和产品在Oracle数据库和WebSphere MQ队列之间进行通信。</p>
                  <p>例如：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle Net</p>
                        <p>网关和Oracle数据库以服务器到服务器的方式使用Oracle Net进行通信。您必须通过配置<code class="codeph">tnsnames.ora</code>和<code class="codeph">listener.ora</code>文件来配置网关和Oracle数据库以启用Oracle Net通信。
                        </p>
                     </li>
                     <li>
                        <p>网关<a id="d10290e59" class="indexterm-anchor"></a><a id="d10290e63" class="indexterm-anchor"></a>初始化文件和参数</p>
                        <p>网关具有必须为安装自定义的初始化文件和参数。例如，您必须选择网关系统标识符（SID），并提供其他信息，例如网关日志文件目标。</p>
                     </li>
                  </ul>
               </div>
            </div><a id="WSMQG161"></a><div class="props_rev_3"><a id="GUID-F8BAEAA9-BECE-4CAD-857A-0CF577EE84A0" name="GUID-F8BAEAA9-BECE-4CAD-857A-0CF577EE84A0"></a><h3 id="WSMQG-GUID-F8BAEAA9-BECE-4CAD-857A-0CF577EE84A0" class="sect3">配置网关</h3>
               <div>
                  <p>使用网关SID，目录名称，文件名和网关参数设置的默认值安装和预配置网关。</p>
                  <p><a id="d10290e99" class="indexterm-anchor"></a><a id="d10290e103" class="indexterm-anchor"></a>该<a id="d10290e108" class="indexterm-anchor"></a>默认SID值为：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">dg4mqs</code><a id="d10290e118" class="indexterm-anchor"></a></p>
                        <p>这是网关与WebSphere MQ软件驻留在同一系统上时使用的缺省SID。</p>
                     </li>
                     <li>
                        <p><code class="codeph">dg4mqc</code></p>
                        <p>这是网关驻留在与WebSphere MQ软件不同的系统上时使用的缺省SID。在这种情况下，网关充当远程WebSphere MQ客户端。</p>
                     </li>
                  </ul>
                  <p>还会安装基本网关初始化文件，并根据您在安装阶段输入的信息设置此文件中的值。</p>
               </div><a id="WSMQG162"></a><div class="props_rev_3"><a id="GUID-2175186A-8D09-440F-8FC3-7DEA385E6F22" name="GUID-2175186A-8D09-440F-8FC3-7DEA385E6F22"></a><h4 id="WSMQG-GUID-2175186A-8D09-440F-8FC3-7DEA385E6F22" class="sect4">使用具有默认值的网关</h4>
                  <div>
                     <p>如果要配置一个网关实例，并且无需更改任何默认值，则Oracle Universal Installer将完成大部分网关配置过程。</p>
                     <div class="section">
                        <p><a id="d10290e162" class="indexterm-anchor"></a>在这种情况下，请执行以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>跳过<span class="q">“ <a href="configuring-database-gateway-webspheremq.html#GUID-0221608D-4DD7-4494-90DD-0664C12301FE" title="更改默认值时，请选择网关SID并自定义网关初始化文件。">更改默认值</a> ”</span>下的所有步骤。
                              </p>
                           </li>
                           <li>
                              <p>跳过<span class="q">“ <a href="configuring-database-gateway-webspheremq.html#GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB" title="配置listener.ora文件。">步骤1：为网关配置Oracle Net Oracle Net Listener</a> ”</span></p>
                           </li>
                           <li>
                              <p>从<span class="q">“ <a href="configuring-database-gateway-webspheremq.html#GUID-47237486-CFAA-413D-B27F-43E9B05E6BFD" title="必须启动或重新加载Oracle Net Listener才能启动新设置。">步骤2：停止并启动网关的Oracle Net Listener</a> ”开始</span> ，并继续本章的结尾。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG163"></a><div class="props_rev_3"><a id="GUID-3516E7F2-11CC-4E29-A01E-141EC2168B07" name="GUID-3516E7F2-11CC-4E29-A01E-141EC2168B07"></a><h4 id="WSMQG-GUID-3516E7F2-11CC-4E29-A01E-141EC2168B07" class="sect4">使用没有默认值的网关</h4>
                  <div>
                     <p>本主题说明如何修改默认值。</p>
                     <div class="section">
                        <p><a id="d10290e229" class="indexterm-anchor"></a>如果有多个实例<a id="d10290e234" class="indexterm-anchor"></a>正在配置网关，或修改在安装阶段设置的默认值，然后从<span class="q">“ <a href="configuring-database-gateway-webspheremq.html#GUID-0221608D-4DD7-4494-90DD-0664C12301FE" title="更改默认值时，请选择网关SID并自定义网关初始化文件。">更改默认值</a> ”</span>下的步骤开始，并继续到本章末尾。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG164"></a><div class="props_rev_3"><a id="GUID-0221608D-4DD7-4494-90DD-0664C12301FE" name="GUID-0221608D-4DD7-4494-90DD-0664C12301FE"></a><h4 id="WSMQG-GUID-0221608D-4DD7-4494-90DD-0664C12301FE" class="sect4">更改默认值</h4>
                  <div>
                     <p>更改默认值时，请选择网关SID并自定义网关初始化文件。</p>
                  </div><a id="WSMQG165"></a><div class="props_rev_3"><a id="GUID-55B26476-97B7-463F-970B-E5C44E2D49A0" name="GUID-55B26476-97B7-463F-970B-E5C44E2D49A0"></a><h5 id="WSMQG-GUID-55B26476-97B7-463F-970B-E5C44E2D49A0" class="sect5">步骤1：为网关选择系统ID</h5>
                     <div>
                        <p>网关SID是一个由1到64个字母数字字符组成的字符串，用于标识网关实例。SID用于网关引导文件，并作为网关参数文件的文件名的一部分。</p>
                        <div class="section">
                           <p>选择一个<a id="d10290e300" class="indexterm-anchor"></a> SID <a id="d10290e305" class="indexterm-anchor"></a>与默认SID不同，与<code class="codeph">dg4mqs</code>和<code class="codeph">dg4mqc</code>不同。
                           </p>
                           <p>对于要访问的每个队列管理器，您需要一个不同的网关实例和SID。如果要访问两个不同的队列管理器，则需要两个网关SID，一个用于网关的每个实例。如果您有一个队列管理器并希望有时使用一组网关参数设置来访问它，而在其他时候使用不同的网关参数设置，那么您可以通过为一个队列管理器提供多个网关SID来实现此目的。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG166"></a><div class="props_rev_3"><a id="GUID-0A6BAFCF-406B-4853-8EA7-77A0040072C7" name="GUID-0A6BAFCF-406B-4853-8EA7-77A0040072C7"></a><h5 id="WSMQG-GUID-0A6BAFCF-406B-4853-8EA7-77A0040072C7" class="sect5">第2步：自定义网关初始化文件</h5>
                     <div>
                        <p>本主题说明如何自定义网关初始化文件。</p>
                        <div class="section">
                           <p><a id="d10290e343" class="indexterm-anchor"></a>网关初始化文件（ <code class="codeph">init</code> <span class="italic"><code class="codeph">sid</code></span> <code class="codeph">.ora</code> ） <a id="d10290e356" class="indexterm-anchor"></a>支持描述的所有数据库网关初始化参数<a href="database-gateway-webspheremq-initialization-parameters.html#GUID-A037975F-8CED-4A9F-97A1-59CBAD688F62" title="网关初始化文件名为initsid.ora。这些主题描述了网关参数，列出了默认值，值范围以及使用语法。">网关初始化参数</a> 。网关启动时，初始化文件必须可用。
                           </p>
                           <p>在安装过程中，a <a id="d10290e379" class="indexterm-anchor"></a>默认<a id="d10290e384" class="indexterm-anchor"></a>初始化<a id="d10290e391" class="indexterm-anchor"></a>文件<a id="d10290e398" class="indexterm-anchor"></a>在Microsoft Windows上的<code class="codeph">ORACLE_HOME\dg4mq\admin\init</code> <span class="italic"><code class="codeph">sid</code></span> <code class="codeph">.ora</code>和<code class="codeph">$</code> <code class="codeph">ORACLE_HOME/dg4mq/admin/init</code> <span class="italic"><code class="codeph">sid.</code></span> <code class="codeph">ora</code> ，在基于UNIX的系统上，其中<span class="italic"><code class="codeph">sid</code></span>是<code class="codeph">dg4mqs</code>或<code class="codeph">dg4mqc</code>的默认SID。如果选择了默认SID以外的SID，则使用在<a href="configuring-database-gateway-webspheremq.html#GUID-55B26476-97B7-463F-970B-E5C44E2D49A0" title="The gateway SID is a string of 1 to 64 alphanumeric characters that identifies a gateway instance. The SID is used in the gateway boot file and as part of the file name for the gateway parameter file.">步骤1中选择</a>的SID重命名此文件<a href="configuring-database-gateway-webspheremq.html#GUID-55B26476-97B7-463F-970B-E5C44E2D49A0" title="网关SID是一个由1到64个字母数字字符组成的字符串，用于标识网关实例。SID用于网关引导文件，并作为网关参数文件的文件名的一部分。">：为网关选择系统ID</a> 。根据需要自定义默认初始化文件。
                           </p>
                           <p>以下条目可能出现在初始化文件中：</p><pre class="oac_no_warn" dir="ltr">LOG_DESTINATION = <span class="italic">log_file</span> QUEUE_MANAGER = <span class="italic">manager_name</span> AUTHORIZATION_MODEL = <span class="italic">auth_model</span> TRANSACTION_MODEL = <span class="italic">tx_model</span> TRANSACTION_LOG_QUEUE = <span class="italic">tx_queue_name</span> TRANSACTION_RECOVERY_USER = <span class="italic">rec_user</span> TRANSACTION_RECOVERY_PASSWORD = <span class="italic">rec_password</span> TRACE_LEVEL = 0 MQSERVER = <span class="italic">channel</span> MQCCSID = <span class="italic">character_set</span>
</pre><p>在这个文件中：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">log_file</code></span>指定网关日志文件的完整路径名。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">manager_name</code></span>是要访问的WebSphere MQ队列管理器的名称。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">auth_model</code></span>是要使用的授权模型。默认值为<code class="codeph">RELAXED</code> 。</p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">tx_model</code></span>是要使用的事务模型。默认值为<code class="codeph">SINGLE_SITE</code> 。</p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">tx_queue_name</code></span>是用于记录分布式事务的事务ID的队列的名称。仅在<span class="italic"><code class="codeph">tx_model</code></span>设置为<code class="codeph">COMMIT_CONFIRM</code> 。</p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">rec_user</code></span>指定网关用于开始恢复分布式事务的用户名。仅当<span class="italic"><code class="codeph">auth_model</code></span>设置为<code class="codeph">STRICT</code>且<code class="codeph">tx_model</code>设置为<code class="codeph">COMMIT_CONFIRM</code> 。</p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">rec_password</code></span>指定网关用于开始恢复分布式事务的用户名的密码。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">channel</code></span>指定WebSphere MQ服务器的位置以及要使用的通信方法。频道格式为：</p>
                                 <p><code class="codeph">channel_name/connection_type/hostname [(port_number)]</code> 。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">MQSERVER = CHAN9 / TCP /海豚（1425）</pre></li>
                              <li>
                                 <p><span class="italic"><code class="codeph">character_set</code></span>指定网关在与WebSphere MQ队列管理器通信时使用的编码字符集编号。这是一个可选参数。
                                 </p>
                                 <p>仅当运行WebSphere MQ队列管理器的系统使用与运行网关的系统不同的编码方案时，才会设置此参数。设置后，网关系统上的WebSphere MQ客户端软件将使用<span class="italic"><code class="codeph">character_set</code></span>的值来转换数据。
                                 </p>
                              </li>
                           </ul>
                           <p>有关事务和安全模型的更多信息，请参阅<a href="database-gateway-webspheremq-running-environment.html#GUID-85997913-2ED0-463F-9137-89324478D58A" title="WebSphere MQ具有自己的授权机制。仅当应用程序的有效用户ID具有每个操作的授权时，才允许应用程序对队列或队列管理器执行某些操作。此模型会丢弃Oracle用户名和密码。创建数据库链接时，此模型使用CREATE DATABASE LINK语句中提供的Oracle用户标识和密码，如果CREATE DATABASE LINK没有提供，则使用当前的Oracle用户标识和密码。如果网关作为WebSphere MQ服务器应用程序运行，然后授权过程根据本地或网络密码文件检查用户ID和密码。如果网关作为WebSphere MQ客户端应用程序运行，则授权过程将根据本地或网络密码文件检查用户标识和密码。本主题描述WebSphere MQ对象的访问权限。来自使用网关并调用WebSphere MQ消息队列操作的Oracle应用程序的事务由事务发起的Oracle数据库中的事务协调器管理。当Oracle分布式数据库包含网关时，必须正确配置网关以参与分布式事务。当网关涉及分布式事务时，非Oracle数据源的事务功能确定数据源是否可以参与两阶段提交操作或分布式事务。来自Oracle应用程序（调用WebSphere MQ消息队列操作和使用网关）的事务由Oracle事务发起的Oracle数据库中的Oracle事务协调器管理。所有WebSphere MQ环境和平台都支持单站点事务。Commit-Confirm事务是单站点事务的增强形式，并且支持所有WebSphere MQ环境和平台。本节包括有关消息，错误代码，网关跟踪和网关操作的信息。网关架构包括许多组件。在处理PL / SQL代码时，这些组件中的任何一个都可以检测并报告错误情况。除了与Oracle消息号关联的文本之外，错误代码通常还附带有其他消息文本。本节中描述的错误条件是应用程序在使用网关时可能会收到的常见错误情况。网关具有用于测试和调试目的的跟踪功能。这是网关初始化参数。如果您的应用程序无法连接到网关，请在启用网关跟踪功能的情况下重新运行应用程序。">网关运行环境</a> 。
                           </p>
                           <div class="infoboxnotealso" id="GUID-0A6BAFCF-406B-4853-8EA7-77A0040072C7__GUID-11C4CC2F-DECF-41E0-8D24-BF5222993598">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../netag/index.html" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南</span></a>和<a href="../netrf/index.html" target="_blank"><span class="italic">Oracle数据库网络服务参考</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="WSMQG167"></a><div class="props_rev_3"><a id="GUID-B7316A3E-DC89-44AC-984D-EE262D09AB3F" name="GUID-B7316A3E-DC89-44AC-984D-EE262D09AB3F"></a><h3 id="WSMQG-GUID-B7316A3E-DC89-44AC-984D-EE262D09AB3F" class="sect3">为网关配置Oracle Net</h3>
               <div>
                  <p>网关要求Oracle Net提供与Oracle数据库之间的透明数据访问。</p>
                  <p><a id="d10290e629" class="indexterm-anchor"></a><a id="d10290e633" class="indexterm-anchor"></a> Oracle Net使用<a id="d10290e638" class="indexterm-anchor"></a> Oracle Net Listener用于接收来自Oracle Net客户端的传入连接。对于网关，Oracle Net Listener侦听来自Oracle数据库的传入请求。要使Oracle Net Listener侦听网关，必须将有关网关的信息添加到Oracle Net Listener配置文件中<a id="d10290e641" class="indexterm-anchor"></a> （ <code class="codeph">listener.ora</code> ）。默认情况下，此文件位于Microsoft Windows上的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/network/admin</code>目录和基于UNIX的系统上的<code class="codeph">ORACLE_HOME\network\admin</code>目录中，其中<code class="codeph">ORACLE_HOME</code>是安装网关的目录。在Oracle Universal Installer的安装过程中，将为您设置此文件中的默认值。
                  </p>
               </div><a id="WSMQG168"></a><div class="props_rev_3"><a id="GUID-7C4A51CE-CD57-49AB-9EB9-8818B0505CEE" name="GUID-7C4A51CE-CD57-49AB-9EB9-8818B0505CEE"></a><h4 id="WSMQG-GUID-7C4A51CE-CD57-49AB-9EB9-8818B0505CEE" class="sect4">将Oracle Net与默认网关值一起使用</h4>
                  <div>
                     <p>如果要配置一个网关实例，并且不需要更改任何默认值，则无需进一步配置Oracle Net。</p>
                     <p>仅执行<span class="q">“ <a href="configuring-database-gateway-webspheremq.html#GUID-47237486-CFAA-413D-B27F-43E9B05E6BFD" title="必须启动或重新加载Oracle Net Listener才能启动新设置。">步骤2：停止并启动网关的Oracle Net Listener</a> ”</span> 。
                     </p>
                  </div>
               </div><a id="WSMQG169"></a><div class="props_rev_3"><a id="GUID-07C14B70-8537-4806-8E96-F5B153DE1229" name="GUID-07C14B70-8537-4806-8E96-F5B153DE1229"></a><h4 id="WSMQG-GUID-07C14B70-8537-4806-8E96-F5B153DE1229" class="sect4">更改默认网关值时使用Oracle Net</h4>
                  <div>
                     <p>如果您打算将Oracle Net侦听器用于多个网关实例，或者您需要修改在安装阶段设置的某些默认值，请执行本节中的步骤1和步骤2。</p>
                     <p>在步骤1中，您将在Microsoft Windows上的网关目录<code class="codeph">ORACLE_HOME\network\admin</code>和基于UNIX的系统上的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/network/admin</code>中的<code class="codeph">listener.ora</code>文件中添加网关信息或更改默认信息。
                     </p>
                  </div><a id="WSMQG338"></a><a id="WSMQG339"></a><a id="WSMQG170"></a><div class="props_rev_3"><a id="GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB" name="GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB"></a><h5 id="WSMQG-GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB" class="sect5">步骤1：为网关配置Oracle Net Oracle Net Listener</h5>
                     <div>
                        <p>配置<code class="codeph">listener.ora</code>文件。
                        </p>
                        <div class="section">
                           <p>必须将两个条目添加到<code class="codeph">listener.ora</code>文件中<a id="d10290e763" class="indexterm-anchor"></a> ：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要监听的Oracle Net Listener的Oracle Net地址列表</p>
                              </li>
                              <li>
                                 <p>Oracle Net Listener应响应传入连接请求而启动的网关进程</p>
                                 <div class="infoboxnote" id="GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB__GUID-771508C3-037F-4A48-9221-F4344F1C682F">
                                    <p class="notep1">注意：</p>
                                    <p>Oracle Net Listener和网关必须位于同一节点上。如果您已在节点上运行Oracle Net Listener，则必须将步骤1和2中建议的更改发送到现有的<code class="codeph">listener.ora</code>和<code class="codeph">tnsnames.ora</code>文件。
                                    </p>
                                    <p>进行更改后，您可以通过在<code class="codeph">lsnrctl</code>实用程序中运行<code class="codeph">reload</code>子命令来重新加载更改，而无需关闭Oracle Net Listener。
                                    </p>
                                 </div>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB__CBDJHDGD">
                           <p class="subhead3" id="GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB__GUID-8EBA952C-2335-455C-A490-33431BD6F170">为Oracle Net Listener指定Oracle Net地址</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>如果您使用的是Oracle Net和<a id="d10290e797" class="indexterm-anchor"></a> TCP / IP协议适配器，然后<code class="codeph">listener.ora</code>文件中的条目的语法是：</p><pre class="oac_no_warn" dir="ltr">LISTENER =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name</span> ）（PORT = <span class="italic">port_number</span> ）））</pre><p>在此条目中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">host_name</code></span>是安装网关的系统的名称。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">port_number</code></span>指定Oracle Net Listener使用的IP端口号。如果在<span class="italic"><code class="codeph">host_name</code></span>运行其他侦听器，例如同一系统上的Oracle数据库的侦听器，则<span class="italic"><code class="codeph">port_number</code></span>的值必须与其他侦听器端口号不同。
                                 </p>
                              </li>
                           </ul>
                           <p>如果您使用的是Oracle Net和<a id="d10290e836" class="indexterm-anchor"></a><a id="d10290e838" class="indexterm-anchor"></a>进程间套接字调用（IPC）协议适配器，条目的语法<a id="d10290e843" class="indexterm-anchor"></a> <code class="codeph">listener.ora</code>文件是：</p><pre class="oac_no_warn" dir="ltr">LISTENER =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = IPC）（KEY = <span class="italic">key_name</span> ）））</pre><p>在此条目中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">IPC</code>规定用于连接的协议是IPC。</p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">key_name</code></span>是唯一的用户定义服务名称。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB__GUID-D5AA0B81-8217-472C-A3B3-0B2D3059F5A0">进入网关</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>要配置Oracle Net Listener以侦听传入连接请求中的网关实例，请使用以下语法将条目添加到<code class="codeph">listener.ora</code>文件：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">gateway_directory</span> ）（PROGRAM = <span class="italic">driver</span> ）））</pre><p>在此条目中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">gateway_sid</code></span>指定网关的SID，并匹配<code class="codeph">tnsnames.ora</code>文件中连接描述符条目中指定的网关SID。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">gateway_directory</code></span>指定网关软件所在的网关目录。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">driver</code></span>是网关可执行文件的名称。如果网关使用本地WebSphere MQ服务器，则文件名为<code class="codeph">dg4mqs</code> 。如果网关作为WebSphere MQ客户端运行以访问远程WebSphere MQ服务器，则文件名为<code class="codeph">dg4mqc</code> 。
                                 </p>
                              </li>
                           </ul>
                           <p>为多个网关实例添加条目时，请将该条目添加到现有<code class="codeph">SID_LIST</code>语法中：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =。。。）（SID_DESC =。。。）（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">gateway_directory</span> ）（PROGRAM = <span class="italic">driver</span> ）））</pre><p>以下是对<code class="codeph">listener.ora</code>文件的条目示例：</p>
                           <p>对于Microsoft Windows：</p><pre class="oac_no_warn" dir="ltr">（SID_DESC =（SID_NAME = dg4mqs）（ORACLE_HOME = gateway_directory）（PROGRAM = dg4mqs））</pre><p>对于基于UNIX的系统：</p><pre class="oac_no_warn" dir="ltr">（SID_DESC =（SID_NAME = dg4mqs）（ORACLE_HOME = / oracle / app / oracle / product / dg4mq）（PROGRAM = dg4mqs））</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-database-gateway-webspheremq.html#GUID-A6A62EF8-B03B-459F-A463-452445DB4BEA" title="您必须配置Oracle数据库，以便它可以使用Oracle Net与网关通信。">配置Oracle Net for Oracle数据库</a></li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB__GUID-6115A3CA-4493-4B16-9C59-69D7C0C0A670">
                           <p class="notep1">也可以看看：</p>
                           <p>有关更改<code class="codeph">listener.ora</code>其他信息，请<a href="../netrf/index.html" target="_blank"><span class="italic">参见</span></a> <a href="../netag/index.html" target="_blank"><span class="italic">“Oracle数据库网络服务管理员指南”</span></a>和“ <a href="../netrf/index.html" target="_blank"><span class="italic">Oracle数据库网络服务参考</span></a> ”。
                           </p>
                        </div>
                     </div>
                     
                  </div><a id="WSMQG171"></a><div class="props_rev_3"><a id="GUID-47237486-CFAA-413D-B27F-43E9B05E6BFD" name="GUID-47237486-CFAA-413D-B27F-43E9B05E6BFD"></a><h5 id="WSMQG-GUID-47237486-CFAA-413D-B27F-43E9B05E6BFD" class="sect5">步骤2：停止并启动网关的Oracle Net Listener</h5>
                     <div>
                        <p>必须启动或重新加载Oracle Net Listener才能启动新设置。</p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-47237486-CFAA-413D-B27F-43E9B05E6BFD__GUID-14DC87B0-2117-409B-85A5-5ED887D04910">
                              <p class="notep1">注意：</p>
                              <p>如果已在安装了网关的Oracle数据库上运行Oracle Net Listener，则必须更改现有的<code class="codeph">listener.ora</code>和<code class="codeph">tnsnames.ora</code>文件。进行更改后，您可以通过在<code class="codeph">lsnrctl</code>实用程序中运行reload子命令来重新加载更改，而无需关闭Oracle Net Listener。
                              </p>
                              <p>请参阅<a href="configuring-database-gateway-webspheremq.html#GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB" title="Configuring the listener.ora file.">步骤1中</a>的说明<a href="configuring-database-gateway-webspheremq.html#GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB" title="配置listener.ora文件。">：为网关配置Oracle Net Oracle Net Listener</a> 。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>组<a id="d10290e1028" class="indexterm-anchor"></a>网关目录名称：</p>
                                 <p>对于Microsoft Windows：</p><pre class="oac_no_warn" dir="ltr">设置TNS_ADMIN = c：\ orant \ network \ admin</pre><p>如果您使用的是Bourne或Korn shell，请输入：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME = <span class="italic">gateway_directory</span> ;导出ORACLE_HOME</pre><p>如果您有C shell，请输入：</p><pre class="oac_no_warn" dir="ltr">$ setenv ORACLE_HOME <span class="italic">gateway_directory</span>
</pre><p>在此条目中：</p>
                                 <p><span class="italic"><code class="codeph">gateway_directory</code></span>指定安装网关软件的目录。
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d10290e1060" class="indexterm-anchor"></a>如果侦听器已在运行，则使用<code class="codeph">lsnrctl</code>命令使用新设置重新加载侦听器：</p>
                                 <p>对于Microsoft Windows：</p><pre class="oac_no_warn" dir="ltr">c：\ orant \ bin&gt; lsnrctl重新加载<span class="italic"><code class="codeph">your_listener_name</code></span>
</pre><p>对于基于UNIX的系统：</p><pre class="oac_no_warn" dir="ltr">$ cd $ <span class="italic">ORACLE_HOME</span> / bin $ ./lsnrctl reload <span class="italic">your_listener_name</span>
</pre><p>在此条目中：</p>
                                 <p><span class="italic"><code class="codeph">ORACLE_HOME</code></span>指定安装网关软件的目录。
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d10290e1095" class="indexterm-anchor"></a>使用新设置检查侦听器的状态：</p>
                                 <p>对于Microsoft Windows：</p><pre class="oac_no_warn" dir="ltr">c：\ orant \ bin&gt; lsnrctl status <span class="italic"><code class="codeph">your_listener_name</code></span>
</pre><p>对于基于UNIX的系统：</p><pre class="oac_no_warn" dir="ltr">$ ./lsnrctl status <span class="italic">listener_name</span>
</pre><p>以下是<code class="codeph">lsnrctl</code>状态检查的输出示例：</p>
                              </li>
                           </ul>
                           <p>对于Microsoft Windows：</p><pre class="oac_no_warn" dir="ltr">连接到（ADDRESS =（PROTOCOL = IPC）（KEY = ORAIPC））LISTENER的状态------------------------ Alias LISTENER版本TNSLSNR for MS Windows：版本12.2.0.1.0  -  Beta开始日期14-Sep-16 18:16:10正常运行时间0天0小时。 2分钟19秒跟踪级别关闭安全性关闭SNMP关闭监听器参数文件\ oracle \ app \ oracle \ product \ dg4mqs \ network \ admin \ listener.ora监听器日志文件\ oracle \ app \ oracle \ product \ dg4mqs \ network \ log \ listener。日志服务摘要...dg4mqs有1个服务处理程序命令已成功完成</pre><p>对于基于UNIX的系统：</p><pre class="oac_no_warn" dir="ltr">连接到（ADDRESS =（PROTOCOL = IPC）（KEY = ORAIPC））LISTENER的状态------------------------ Alias LISTENER版本TNSLSNR for Solaris ：版本12.2.0.1.0  - 生产开始日期14-Sep-16 10:16:10正常运行时间0天0小时。 2分钟19秒跟踪级别关闭安全性关闭SNMP关闭监听器参数文件/oracle/app/oracle/product/dg4mqs/network/admin/listener.ora监听器日志文件/ oracle / app / oracle / product / dg4mqs / network / log / listener。日志服务摘要...dg4mqs有1个服务处理程序命令已成功完成</pre><p>在该示例中， <code class="codeph">dg4mqs</code>是安装期间分配的默认SID值。您可以使用任何有效的ID作为SID，或保留默认值。
                           </p>
                           <div class="infoboxnote" id="GUID-47237486-CFAA-413D-B27F-43E9B05E6BFD__GUID-8887A7E0-3D07-45DA-ADC4-E8E56EE3B2F5">
                              <p class="notep1">注意：</p>
                              <p>对于要配置的每个网关实例，必须在<code class="codeph">tnsnames.ora</code>文件， <code class="codeph">listener.ora</code>文件和网关初始化文件中的<code class="codeph">GATEWAY_SID</code>环境变量中使用相同的SID值。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="WSMQG172"></a><div class="props_rev_3"><a id="GUID-A6A62EF8-B03B-459F-A463-452445DB4BEA" name="GUID-A6A62EF8-B03B-459F-A463-452445DB4BEA"></a><h3 id="WSMQG-GUID-A6A62EF8-B03B-459F-A463-452445DB4BEA" class="sect3">配置Oracle Net for Oracle数据库</h3>
               <div>
                  <p>您必须配置Oracle数据库，以便它可以使用Oracle Net与网关通信。</p>
                  <p>任何可以访问Oracle数据库的Oracle应用程序也可以通过网关访问WebSphere MQ。在使用网关访问WebSphere MQ之前，必须配置Oracle数据库，以便它可以使用Oracle Net与网关通信。要配置服务器，请将连接描述符添加到<a id="d10290e1175" class="indexterm-anchor"></a> <code class="codeph">tnsnames.ora</code>文件。
                  </p>
                  <p>访问网关的任何Oracle数据库都需要服务器上<code class="codeph">tnsnames.ora</code>文件中的服务名称条目或连接描述符名称条目，以告知Oracle数据库如何建立连接。默认情况下，此文件位于Microsoft Windows上的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\network\admin</code>目录和基于UNIX的系统上的<code class="codeph">ORACLE_HOME/network/admin</code>目录中，其中<code class="codeph">ORACLE_HOME</code>是安装Oracle数据库的目录。<code class="codeph">tnsnames.ora</code>文件是访问网关的Oracle数据库所必需的，而不是网关本身所必需的。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-database-gateway-webspheremq.html#GUID-2B5FDAF2-1267-4164-A49B-C835C1C51889" title="网关使用多个组件和产品在Oracle数据库和WebSphere MQ队列之间进行通信。">配置概述</a></li>
                        <li><a href="configuring-database-gateway-webspheremq.html#GUID-F8BAEAA9-BECE-4CAD-857A-0CF577EE84A0" title="使用网关SID，目录名称，文件名和网关参数设置的默认值安装和预配置网关。">配置网关</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-A6A62EF8-B03B-459F-A463-452445DB4BEA__GUID-01E057EC-60E7-47B4-B853-B812D9B73B74">
                     <p class="notep1">也可以看看：</p>
                     <p>有关更改<code class="codeph">tnsnames.ora</code>文件的详细信息，请参阅“ <a href="../netag/index.html" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南”</span></a>和“ <a href="../netrf/index.html" target="_blank"><span class="italic">Oracle数据库网络服务参考</span></a> ”。
                     </p>
                  </div>
               </div>
               <a id="WSMQG173"></a><div class="props_rev_3"><a id="GUID-7B70B199-0F85-4E4C-B8F4-4147A328AF2A" name="GUID-7B70B199-0F85-4E4C-B8F4-4147A328AF2A"></a><h4 id="WSMQG-GUID-7B70B199-0F85-4E4C-B8F4-4147A328AF2A" class="sect4">使用默认网关值</h4>
                  <div>
                     <p>Oracle Universal Installer创建并预配置<code class="codeph">tnsnames.ora</code>文件，其中<code class="codeph">ORACLE_HOME</code>是安装网关软件的目录。
                     </p>
                     <p>Oracle Universal Installer在Microsoft Windows上的<code class="codeph">ORACLE_HOME/network/admin</code>目录和基于UNIX的系统上的<code class="codeph">ORACLE_HOME/network/admin</code>目录中创建和预配置<code class="codeph">tnsnames.ora</code>文件，其中<code class="codeph">ORACLE_HOME</code>是安装网关软件的目录。如果使用默认值，并且不需要配置其他网关实例，则可以将此文件的内容附加到访问网关的每个Oracle数据库的<code class="codeph">tnsnames.ora</code>文件中。
                     </p>
                  </div>
               </div><a id="WSMQG174"></a><div class="props_rev_3"><a id="GUID-814DB8F2-91D3-4178-881A-CF609E34ED64" name="GUID-814DB8F2-91D3-4178-881A-CF609E34ED64"></a><h4 id="WSMQG-GUID-814DB8F2-91D3-4178-881A-CF609E34ED64" class="sect4">更改默认网关值</h4>
                  <div>
                     <p>如果您需要更改某些默认设置，请使用本节中的示例来指导您。</p>
                  </div><a id="WSMQG175"></a><div class="props_rev_3"><a id="GUID-0020D723-3530-494F-A60B-21C2B6B7FB58" name="GUID-0020D723-3530-494F-A60B-21C2B6B7FB58"></a><h5 id="WSMQG-GUID-0020D723-3530-494F-A60B-21C2B6B7FB58" class="sect5">TCP / IP示例</h5>
                     <div>
                        <p>这是使用TCP / IP协议适配器的示例。</p>
                        <div class="section">
                           <p>Oracle数据库使用Oracle Net和Web访问网关<a id="d10290e1328" class="indexterm-anchor"></a> TCP / IP协议适配器。<code class="codeph">tnsnames.ora</code>连接描述符条目的语法是：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">tns_name_entry</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name</span> ）（PORT = <span class="italic">port_number</span> ））（CONNECT_DATA =（SID = <span class="italic">gateway_sid</span> ））（HS = OK））</pre><p>在这个例子中：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">tns_name_entry</code></span>是<code class="codeph">CREATE DATABASE LINK</code>语句的<span class="italic"><code class="codeph">tns_name_entry</code></span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">TCP</code>指定用于连接的协议是TCP / IP。</p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">port_number</code></span>是侦听网关的Oracle Net Oracle Net Listener使用的端口号。可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到此端口号。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">host_name</code></span>指定运行网关的系统。可以在<code class="codeph">listener.ora</code>网关的Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到Oracle Net Listener主机名。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">gateway_sid</code></span>指定网关的SID，并匹配侦听网关的Oracle Net Listener的<code class="codeph">listener.ora</code>文件中指定的SID。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-database-gateway-webspheremq.html#GUID-D00D6538-102F-4648-A8E0-384CE2022FC4" title="要创建数据库链接，请使用CREATE DATABASE LINK语句。">创建数据库链接</a></li>
                              <li><a href="configuring-database-gateway-webspheremq.html#GUID-6E7BA40E-ADD3-4330-80E6-B50B40975FBB" title="配置listener.ora文件。">步骤1：为网关配置Oracle Net Oracle Net Listener</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="WSMQG176"></a><div class="props_rev_3"><a id="GUID-6EE264B9-A049-4295-8E10-00D714C8A5E8" name="GUID-6EE264B9-A049-4295-8E10-00D714C8A5E8"></a><h5 id="WSMQG-GUID-6EE264B9-A049-4295-8E10-00D714C8A5E8" class="sect5">IPC示例</h5>
                     <div>
                        <p>这是使用IPC协议适配器的示例。</p>
                        <div class="section">
                           <p>Oracle数据库使用Oracle Net和Web访问网关<a id="d10290e1447" class="indexterm-anchor"></a><a id="d10290e1449" class="indexterm-anchor"></a> IPC协议适配器。<code class="codeph">tnsnames.ora</code>连接描述符条目的语法是：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">tns_name_entry</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = IPC）（KEY = <span class="italic">key_name</span> ））（CONNECT_DATA =（SID = <span class="italic">gateway_sid</span> ））（HS = OK））</pre><p>哪里：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">tns_name_entry</code></span>是<code class="codeph">CREATE DATABASE LINK</code>语句的<span class="italic"><code class="codeph">tns_name_entry</code></span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">IPC</code>规定用于连接的协议是IPC。</p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">key_name</code></span>是服务名称。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">gateway_sid</code></span>指定网关的SID，并匹配正在侦听网关的Oracle Net Listener的<code class="codeph">listener.ora</code>文件中指定的SID。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-database-gateway-webspheremq.html#GUID-D00D6538-102F-4648-A8E0-384CE2022FC4" title="要创建数据库链接，请使用CREATE DATABASE LINK语句。">创建数据库链接</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="WSMQG177"></a><div class="props_rev_3"><a id="GUID-C6145749-812E-4D1C-B660-AEF719A58786" name="GUID-C6145749-812E-4D1C-B660-AEF719A58786"></a><h3 id="WSMQG-GUID-C6145749-812E-4D1C-B660-AEF719A58786" class="sect3">创建事务日志队列</h3>
               <div>
                  <p>当网关初始化文件中的<code class="codeph">TRANSACTION_MODEL</code>参数设置为<code class="codeph">COMMIT_CONFIRM</code>以允许分布式事务时，需要执行其他配置步骤。
                  </p>
                  <div class="section">
                     <p>这个<a id="d10290e1549" class="indexterm-anchor"></a><a id="d10290e1553" class="indexterm-anchor"></a><a id="d10290e1555" class="indexterm-anchor"></a><a id="d10290e1560" class="indexterm-anchor"></a><a id="d10290e1566" class="indexterm-anchor"></a><a id="d10290e1572" class="indexterm-anchor"></a>步骤是必需的：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>创建WebSphere MQ队列</p>
                        </li>
                        <li>
                           <p>在网关初始化文件中设置<code class="codeph">TRANSACTION_LOG_QUEUE</code> ， <code class="codeph">TRANSACTION_RECOVERY_USER</code>和<code class="codeph">TRANSACTION_RECOVERY_PASSWORD</code>参数</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C6145749-812E-4D1C-B660-AEF719A58786__GUID-81FCCC55-27E0-411B-94C0-F08759E0383E">
                        <p class="notep1">也可以看看：</p>
                        <p>有关创建和配置队列的信息，请参阅IBM出版物。</p>
                     </div>
                     <p>对于恢复分布式事务的网关，WebSphere MQ系统管理员必须在队列管理器中设置恢复帐户和队列。此帐户必须是有效的WebSphere MQ用户，并且必须具有访问恢复队列的权限。</p>
                     <p>网关使用恢复队列来检查网关在队列管理器处启动的失败事务的状态，并记录在此队列中。此队列中的信息对于恢复过程至关重要，除网关外，不得使用，访问或更新。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="database-gateway-webspheremq-running-environment.html#GUID-00A75967-A3C8-498C-8BC7-560E3FBA431E" title="Commit-Confirm事务是单站点事务的增强形式，并且支持所有WebSphere MQ环境和平台。">提交确认事务</a></li>
                        <li><a href="database-gateway-webspheremq-initialization-parameters.html#GUID-A037975F-8CED-4A9F-97A1-59CBAD688F62">用于WebSphere MQ初始化参数的Oracle数据库网关</a></li>
                        <li><a href="database-gateway-webspheremq-running-environment.html#GUID-70E6AD86-77BA-4D4F-B0A1-4E34EBCAAC77" title="本主题描述WebSphere MQ对象的访问权限。">WebSphere MQ对象的授权</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="WSMQG178"></a><div class="props_rev_3"><a id="GUID-047A4F17-55B1-4F8E-8C32-670CA94EDA3C" name="GUID-047A4F17-55B1-4F8E-8C32-670CA94EDA3C"></a><h3 id="WSMQG-GUID-047A4F17-55B1-4F8E-8C32-670CA94EDA3C" class="sect3">管理数据库链接别名库</h3>
               <div>
                  <p>首次在Oracle会话中使用时，通过数据库链接建立与网关的连接。</p>
                  <p>在此上下文中， <span class="italic">连接</span>是指Oracle数据库与网关之间的连接。连接将持续到Oracle会话结束。另一个会话或用户可以访问相同的数据库链接，并获得与网关和队列管理器的不同连接。
                  </p>
                  <p>数据库链接在网关会话期间处于活动状态。要在会话期间关闭数据库链接，请使用<code class="codeph">ALTER SESSION</code>语句。
                  </p>
                  <div class="infoboxnotealso" id="GUID-047A4F17-55B1-4F8E-8C32-670CA94EDA3C__GUID-AB0CF8A7-2EBB-464D-AFB4-A3D6710DAE55">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用数据库链接的更多信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/wsmqg&amp;id=ADMIN12083" target="_blank"><span class="italic">Oracle数据库管理员指南”</span></a> 。
                     </p>
                  </div>
               </div><a id="WSMQG179"></a><div class="props_rev_3"><a id="GUID-034280B9-D9F6-48D1-88E9-B6CBE289EFA0" name="GUID-034280B9-D9F6-48D1-88E9-B6CBE289EFA0"></a><h4 id="WSMQG-GUID-034280B9-D9F6-48D1-88E9-B6CBE289EFA0" class="sect4">使用数据库链接</h4>
                  <div>
                     <p>Oracle Database Gateway for WebSphere MQ使用别名库来访问随Oracle Database Gateway for WebSphere MQ一起安装的共享库。</p>
                     <p>别名库是一个模式对象，表示PL / SQL中的库。要创建别名库，您必须具有<code class="codeph">CREATE LIBRARY PRIVILEGE</code> 。 Oracle Database Gateway for WebSphere MQ使用的别名库是<code class="codeph">libdg4mq</code>并在<code class="codeph">pgmobj.sql</code>脚本中定义，该脚本是在执行Oracle Database Gateway for WebSphere MQ部署脚本时创建的。
                     </p>
                  </div>
               </div><a id="WSMQG180"></a><div class="props_rev_3"><a id="GUID-D00D6538-102F-4648-A8E0-384CE2022FC4" name="GUID-D00D6538-102F-4648-A8E0-384CE2022FC4"></a><h4 id="WSMQG-GUID-D00D6538-102F-4648-A8E0-384CE2022FC4" class="sect4">创建数据库链接</h4>
                  <div>
                     <p>要创建数据库链接，请使用<code class="codeph">CREATE DATABASE LINK</code>语句。
                     </p>
                     <div class="section">
                        <p><code class="codeph">USING</code> <a id="d10290e1738" class="indexterm-anchor"></a><a id="d10290e1742" class="indexterm-anchor"></a><a id="d10290e1746" class="indexterm-anchor"></a><a id="d10290e1749" class="indexterm-anchor"></a>子句指向<code class="codeph">tnsnames.ora</code>文件中的连接描述符。当使用<code class="codeph">AUTHORIZATION_MODEL</code>参数将安全模型定义为<code class="codeph">STRICT</code>时， <code class="codeph">CONNECT TO</code>子句指定WebSphere MQ用户标识和密码。如果未包含<code class="codeph">CONNECT TO</code>子句，则使用当前用户标识和密码。
                        </p>
                        <p>当。。。的时候<a id="d10290e1772" class="indexterm-anchor"></a> <code class="codeph">AUTHORIZATION_MODEL</code> <a id="d10290e1777" class="indexterm-anchor"></a>参数设置为<code class="codeph">RELAXED</code> ，您无需指定用户ID和密码，因为Oracle数据库使用为网关启动Oracle Net Listener的用户帐户的用户ID和密码。如果使用<code class="codeph">CONNECT TO</code>子句指定用户标识和密码，则Oracle数据库和网关将忽略这些值。
                        </p>
                        <p><code class="codeph">CREATE DATABASE LINK</code>的语法如下：</p><pre class="oac_no_warn" dir="ltr">CREATE [PUBLIC] DATABASE LINK <span class="italic">dblink</span> [连接到<span class="italic">用户名</span> IDENTIFIED BY <span class="italic">密码</span> ]使用' <span class="italic">tns_name_entry</span> ';</pre><p>哪里：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">dblink</code></span>是数据库链接名称。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">userid</code></span>是用于在队列管理器上建立会话的用户标识。它仅在<code class="codeph">init</code> <span class="italic"><code class="codeph">sid</code></span>中将<code class="codeph">AUTHORIZATION_MODEL</code>设置为<code class="codeph">STRICT</code>时使用。 <code class="codeph">ora</code>文件。必须授权用户标识访问所有WebSphere MQ对象，并使用PL / SQL命令中引用的任何数据库对象。
                              </p>
                              <p><span class="italic"><code class="codeph">userid</code></span>必须位于安装WebSphere MQ和网关的计算机上的密码文件中。否则，当WebSphere MQ和网关安装在不同的系统上时，必须在UNIX网络信息服务（NIS）中发布<code class="codeph">userid</code> 。如果<code class="codeph">userid</code>包含小写字母或非字母数字字符，则必须用引号（“）括起<code class="codeph">userid</code> 。有关<code class="codeph">userid</code>更多信息，请参阅WebSphere MQ文档。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">password</code></span>是用于在队列管理器上建立会话的密码。仅当在<code class="codeph">init</code> <span class="italic"><code class="codeph">sid</code></span>中将<code class="codeph">AUTHORIZATION_MODEL</code>设置为<code class="codeph">STRICT</code>时才使用它。 <code class="codeph">ora</code>文件。
                              </p>
                              <p><code class="codeph">password</code>必须位于安装WebSphere MQ和网关的系统上的密码文件中。否则， <code class="codeph">password</code>必须在Windows或UNIX网络信息服务（NIS）中发布，因为在不同系统上安装WebSphere MQ和网关时可能会出现这种情况。
                              </p>
                              <p>如果<code class="codeph">password</code>包含小写字母或非字母数字字符，则使用引号（“）包围<code class="codeph">password</code> 。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">tns_name_entry</code></span>是<code class="codeph">tnsnames.ora</code>文件中指定的Oracle Net TNS连接描述符名称。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="database-gateway-webspheremq-running-environment.html#GUID-147324B7-6FF4-418E-B9C4-705D1877C55B" title="WebSphere MQ具有自己的授权机制。仅当应用程序的有效用户ID具有每个操作的授权时，才允许应用程序对队列或队列管理器执行某些操作。">安全模型</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="WSMQG181"></a><div class="props_rev_3"><a id="GUID-C426743F-A999-4129-8263-F080C1EDCF3D" name="GUID-C426743F-A999-4129-8263-F080C1EDCF3D"></a><h4 id="WSMQG-GUID-C426743F-A999-4129-8263-F080C1EDCF3D" class="sect4">删除数据库链接</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DROP DATABASE LINK</code>语句<code class="codeph">DROP DATABASE LINK</code> 。
                     </p>
                     <div class="section">
                        <p><a id="d10290e1940" class="indexterm-anchor"></a><a id="d10290e1944" class="indexterm-anchor"></a><a id="d10290e1946" class="indexterm-anchor"></a><a id="d10290e1948" class="indexterm-anchor"></a>例如，要删除名为<code class="codeph">dblink</code>的数据库链接，请输入：</p><pre class="oac_no_warn" dir="ltr">DROP [PUBLIC] DATABASE LINK <span class="italic">dblink</span> ;</pre><p>如果需要解析有疑问的分布式事务，则不应删除数据库链接。</p>
                        <div class="infoboxnotealso" id="GUID-C426743F-A999-4129-8263-F080C1EDCF3D__GUID-43192FCB-AC76-496D-9E57-D6C6C41F3C8E">
                           <p class="notep1">也可以看看：</p>
                           <p>有关删除数据库链接的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/wsmqg&amp;id=SQLRF01514" target="_blank"><span class="italic">参见Oracle数据库SQL语</span></a>
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG182"></a><div class="props_rev_3"><a id="GUID-F512DCD0-BA3F-4542-B941-A5C92DEB3E67" name="GUID-F512DCD0-BA3F-4542-B941-A5C92DEB3E67"></a><h4 id="WSMQG-GUID-F512DCD0-BA3F-4542-B941-A5C92DEB3E67" class="sect4">检查可用的数据库链接</h4>
                  <div>
                     <p>每个数据库的数据字典存储该数据库中所有数据库链接的定义。</p>
                     <p><a id="d10290e1993" class="indexterm-anchor"></a> <code class="codeph">USER_DB_LINKS</code>视图显示为用户定义的数据库链接。<code class="codeph">ALL_DB_LINKS</code>数据字典视图显示所有已定义的数据库链接。
                     </p>
                  </div>
               </div><a id="WSMQG183"></a><div class="props_rev_3"><a id="GUID-250D42BC-8B5F-44A1-A22F-3B29AE000015" name="GUID-250D42BC-8B5F-44A1-A22F-3B29AE000015"></a><h4 id="WSMQG-GUID-250D42BC-8B5F-44A1-A22F-3B29AE000015" class="sect4">限制活动数据库链接的数量</h4>
                  <div>
                     <p>您可以使用<code class="codeph">OPEN_LINKS</code>参数限制从用户进程到远程数据库的连接数。
                     </p>
                     <p><a id="d10290e2031" class="indexterm-anchor"></a><a id="d10290e2035" class="indexterm-anchor"></a>此参数控制任何单个用户进程可以与单个用户会话一起使用的远程连接数。
                     </p>
                     <div class="infoboxnotealso" id="GUID-250D42BC-8B5F-44A1-A22F-3B29AE000015__GUID-E09D7016-3C45-4316-A6E2-80BA65B4FF0A">
                        <p class="notep1">也可以看看：</p>
                        <p>有关限制活动数据库链接数的详细信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/wsmqg&amp;id=ADMIN12083" target="_blank"><span class="italic">Oracle数据库管理员指南”</span></a> 。
                        </p>
                     </div>
                  </div>
               </div><a id="WSMQG184"></a><div class="props_rev_3"><a id="GUID-753F3A33-66CA-44CF-98D0-D01479EFACDD" name="GUID-753F3A33-66CA-44CF-98D0-D01479EFACDD"></a><h4 id="WSMQG-GUID-753F3A33-66CA-44CF-98D0-D01479EFACDD" class="sect4">创建别名库</h4>
                  <div>
                     <p>使用Oracle Database Gateway for WebSphere MQ部署脚本为WebSphere MQ别名库<code class="codeph">libdg4mq,</code>创建Oracle数据库网关。
                     </p>
                     <div class="section">
                        <p>在安装过程中，相应的共享库名称<code class="codeph">ORACLE_HOME\dg4mq\admin\deploy\pgmobj.sql on Microsoft Windows and</code>基于UXIX的系统上的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/dg4mq/admin/deploy/pgmobj.sql</code>中定义，基于您选择的DG4MQ模型。
                        </p>
                        <p>对于远程模型，使用<code class="codeph">libdg4mqc.so</code>共享库。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE LIBRARY libdg4mq AS <span class="italic">'ORACLE_HOME</span> /lib/libdg4mqc.so'事务性;</pre><p>对于本地模型，使用<code class="codeph">libdg4mqs.so</code>共享库。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE LIBRARY libdg4mq AS <span class="italic">'ORACLE_HOME</span> /lib/libdg4mqs.so'事务性;</pre><div class="infoboxnote" id="GUID-753F3A33-66CA-44CF-98D0-D01479EFACDD__GUID-343972E5-BF88-42B1-80C3-97C911C4D79B">
                           <p class="notep1">注意：</p>
                           <p>HP-UX上共享库的文件扩展名为<code class="codeph">.sl</code> 。例如， <code class="codeph">libdg4mqc.sl</code></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG185"></a><div class="props_rev_3"><a id="GUID-C87DE573-0746-4D7E-9545-3516CE2DE2AE" name="GUID-C87DE573-0746-4D7E-9545-3516CE2DE2AE"></a><h4 id="WSMQG-GUID-C87DE573-0746-4D7E-9545-3516CE2DE2AE" class="sect4">删除别名库</h4>
                  <div>
                     <p>使用undeploy脚本删除<code class="codeph">libdg4mq</code> Oracle Database Gateway for WebSphere MQ别名库。
                     </p>
                  </div>
               </div>
            </div><a id="WSMQG186"></a><div class="props_rev_3"><a id="GUID-73165695-D5CB-4EE0-927C-05467DA79DF4" name="GUID-73165695-D5CB-4EE0-927C-05467DA79DF4"></a><h3 id="WSMQG-GUID-73165695-D5CB-4EE0-927C-05467DA79DF4" class="sect3">安装Oracle Visual Workbench存储库</h3>
               <div>
                  <p>按照本节中的步骤安装Oracle Visual Workbench存储库。</p>
                  <p>您<a id="d10290e2176" class="indexterm-anchor"></a><a id="d10290e2180" class="indexterm-anchor"></a><a id="d10290e2184" class="indexterm-anchor"></a>如果您不打算使用Oracle Visual Workbench，或者您正在准备生产Oracle数据库，而不需要Visual Workbench存储库，而是需要Oracle Database Gateway for WebSphere，则可以跳过安装Oracle Visual Workbench存储库MQ部署。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-database-gateway-webspheremq.html#GUID-A6FA8628-F99D-4B20-9F3F-D2CCA16491C7" title="这些准备工作包括在生产数据库上准备，安装和删除PL / SQL包。">准备生产Oracle数据库</a></li>
                     </ul>
                  </div>
               </div>
               <a id="WSMQG187"></a><div class="props_rev_3"><a id="GUID-E7450F50-48C4-4CC7-A05D-CFC58FAF19A0" name="GUID-E7450F50-48C4-4CC7-A05D-CFC58FAF19A0"></a><h4 id="WSMQG-GUID-E7450F50-48C4-4CC7-A05D-CFC58FAF19A0" class="sect4">预安装任务</h4>
                  <div>
                     <p>这些步骤描述了预安装任务。</p>
                  </div><a id="WSMQG188"></a><div class="props_rev_3"><a id="GUID-690B28A3-9B57-43BE-BFAB-01E798E477DC" name="GUID-690B28A3-9B57-43BE-BFAB-01E798E477DC"></a><h5 id="WSMQG-GUID-690B28A3-9B57-43BE-BFAB-01E798E477DC" class="sect5">第1步：选择存储库服务器</h5>
                     <div>
                        <p>此步骤说明如何选择存储库服务器。</p>
                        <div class="section">
                           <p>存储库服务器是安装Visual Workbench存储库的Oracle数据库。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG189"></a><div class="props_rev_3"><a id="GUID-2D71C499-FC20-459C-92C7-4F2EFF6EA7EE" name="GUID-2D71C499-FC20-459C-92C7-4F2EFF6EA7EE"></a><h5 id="WSMQG-GUID-2D71C499-FC20-459C-92C7-4F2EFF6EA7EE" class="sect5">第2步：找到安装脚本</h5>
                     <div>
                        <p>此步骤说明如何查找安装脚本。</p>
                        <div class="section">
                           <p>Visual Workbench存储库安装脚本随Visual Workbench一起安装。如果<a id="d10290e2285" class="indexterm-anchor"></a><a id="d10290e2287" class="indexterm-anchor"></a>存储库将安装在与Oracle Visual Workbench相同的系统上，然后您的存储库服务器已具有所有必需的安装脚本。继续第3步。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在存储库服务器上创建一个目录作为脚本目录。例如：</span><div>
                                 <p>对于Microsoft Windows：</p><pre class="oac_no_warn" dir="ltr">&gt; md％ORACLE_HOME％\ dg4mqadmin \ repo</pre><p>对于基于UNIX的系统：</p><pre class="oac_no_warn" dir="ltr">$ mkdir $ <span class="italic">ORACLE_HOME</span> / dg4mq / admin / repo $ chmod 777 $ <span class="italic">ORACLE_HOME</span> / dg4mq / admin / repo</pre></div>
                           </li>
                           <li class="stepexpand"><span>用一个<a id="d10290e2314" class="indexterm-anchor"></a><a id="d10290e2316" class="indexterm-anchor"></a>文件传输程序来传输信息库zip文件（ <code class="codeph">repos</code> <span class="italic"><code class="codeph">XXX.</code></span> <code class="codeph">zip</code> ，其中<span class="italic"><code class="codeph">XXX</code></span>为版本号），或者将所有脚本文件与<code class="codeph">.sql</code>从后缀<a id="d10290e2337" class="indexterm-anchor"></a><a id="d10290e2341" class="indexterm-anchor"></a> Visual Workbench系统上的脚本文件目录（Windows上的<code class="codeph">(ORACLE_HOME\dg4mqvwb\server\admin</code> ）到存储库服务器系统上的脚本文件目录。</span></li>
                        </ol>
                     </div>
                  </div><a id="WSMQG190"></a><div class="props_rev_3"><a id="GUID-7597BA78-D666-4779-857E-F901027E45BE" name="GUID-7597BA78-D666-4779-857E-F901027E45BE"></a><h5 id="WSMQG-GUID-7597BA78-D666-4779-857E-F901027E45BE" class="sect5">第3步：升级Visual Workbench存储库</h5>
                     <div>
                        <p>此步骤说明如何升级Visual Workbench存储库安装脚本。</p>
                        <div class="section">
                           <p>通过复制<code class="codeph">pgm</code> <span class="italic"><code class="codeph">xxx</code></span>升级现有的Visual Workbench存储库安装脚本。在Oracle Windows上的<code class="codeph">ORACLE_HOME\dg4mq\admin\deploy</code>目录和基于UNIX的系统上的<code class="codeph">ORACLE_HOME/dg4mq/admin/deploy</code>目录中随Oracle Database Gateway for WebSphere MQ一起安装的<code class="codeph">sql</code>文件到存储库服务器系统上的脚本文件目录。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG191"></a><div class="props_rev_3"><a id="GUID-4B3A5110-A5CC-4397-88A9-1191C1E0620F" name="GUID-4B3A5110-A5CC-4397-88A9-1191C1E0620F"></a><h5 id="WSMQG-GUID-4B3A5110-A5CC-4397-88A9-1191C1E0620F" class="sect5">第4步：确保已安装UTL_RAW包</h5>
                     <div>
                        <p>该步骤说明了如何确保安装<code class="codeph">UTL_RAW</code>包。
                        </p>
                        <div class="section">
                           <p>Visual Workbench生成的所有数据映射包都使用<a id="d10290e2423" class="indexterm-anchor"></a><a id="d10290e2425" class="indexterm-anchor"></a> <code class="codeph">UTL_RAW</code>包，提供操作原始数据的例程。
                           </p>
                           <p>从SQL * Plus，作为<code class="codeph">SYS</code>用户，发出以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DESCRIBE UTL_RAW</pre><p>如果<a id="d10290e2441" class="indexterm-anchor"></a><a id="d10290e2443" class="indexterm-anchor"></a> <code class="codeph">DESCRIBE</code>语句成功，然后您的存储库服务器已经安装了<code class="codeph">UTL_RAW</code> ，您可以继续执行步骤4。
                           </p>
                           <p>如果<code class="codeph">DESCRIBE</code>语句失败，则安装<code class="codeph">UTL_RAW</code> ：</p>
                           <p>从SQL * Plus，作为<code class="codeph">SYS</code>用户，运行<code class="codeph">utlraw.sql</code>和<a id="d10290e2469" class="indexterm-anchor"></a><a id="d10290e2471" class="indexterm-anchor"></a> <code class="codeph">prvtrawb.plb</code>脚本位于Microsoft Windows上的<code class="codeph">ORACLE_HOME\rdbms\admin</code>目录和基于UNIX的系统上的<code class="codeph">ORACLE_HOME</code> <code class="codeph">/rdbms/admin</code>目录中。您必须首先运行<code class="codeph">utlraw.sql</code>脚本。
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ utlraw.sql SQL&gt; @ prvtrawb.plb</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG192"></a><div class="props_rev_3"><a id="GUID-09DA9EAB-3CD0-4E72-BF2F-E2206019B4D3" name="GUID-09DA9EAB-3CD0-4E72-BF2F-E2206019B4D3"></a><h5 id="WSMQG-GUID-09DA9EAB-3CD0-4E72-BF2F-E2206019B4D3" class="sect5">步骤5：确保DBMS_OUTPUT包已启用</h5>
                     <div>
                        <p>此步骤说明如何确保启用<code class="codeph">DBMS_OUTPUT</code>程序包。
                        </p>
                        <div class="section">
                           <p>分发CD-ROM上的示例程序和安装验证程序使用该标准<a id="d10290e2521" class="indexterm-anchor"></a><a id="d10290e2523" class="indexterm-anchor"></a> <code class="codeph">DBMS_OUTPUT</code>包。
                           </p>
                           <p>从SQL * Plus，作为<code class="codeph">SYS</code>用户，发出以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DESCRIBE DBMS_OUTPUT</pre><p>如果<a id="d10290e2539" class="indexterm-anchor"></a><a id="d10290e2541" class="indexterm-anchor"></a> <code class="codeph">DESCRIBE</code>语句成功，然后您的存储库服务器安装了<code class="codeph">DBMS_OUTPUT</code> ，您可以继续执行步骤6。
                           </p>
                           <p>如果<code class="codeph">DESCRIBE</code>语句失败，则安装<code class="codeph">DBMS_OUTPUT</code> 。</p>
                           <div class="infoboxnotealso" id="GUID-09DA9EAB-3CD0-4E72-BF2F-E2206019B4D3__GUID-0AFE98C4-3D95-4EA7-89E8-C126B24A88A2">
                              <p class="notep1">也可以看看：</p>
                              <p>有关更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/wsmqg&amp;id=ADMIN" target="_blank"><span class="italic">参见Oracle数据库管理员指南</span></a> 。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG193"></a><div class="props_rev_3"><a id="GUID-A95DD314-CE1D-472A-8FE1-AC99F9A7E95D" name="GUID-A95DD314-CE1D-472A-8FE1-AC99F9A7E95D"></a><h5 id="WSMQG-GUID-A95DD314-CE1D-472A-8FE1-AC99F9A7E95D" class="sect5">第6步：创建数据库链接</h5>
                     <div>
                        <p>此步骤说明如何创建数据库链接。</p>
                        <div class="section">
                           <p>在Oracle Production System服务器上创建数据库链接以访问Oracle Database的WebSphere Database Gateway。</p>
                           <p>如果您还没有数据库链接，请参阅<span class="q">“ <a href="configuring-database-gateway-webspheremq.html#GUID-047A4F17-55B1-4F8E-8C32-670CA94EDA3C" title="首次在Oracle会话中使用时，通过数据库链接建立与网关的连接。">管理数据库链接别名库</a> ”</span>以获取有关创建数据库链接的更多信息。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="WSMQG194"></a><div class="props_rev_3"><a id="GUID-D73D7245-433F-44E9-AE03-9ACFB5CCA453" name="GUID-D73D7245-433F-44E9-AE03-9ACFB5CCA453"></a><h4 id="WSMQG-GUID-D73D7245-433F-44E9-AE03-9ACFB5CCA453" class="sect4">Visual Workbench存储库安装任务</h4>
                  <div>
                     <p>使用<code class="codeph">pgvwbrepos.sql</code>安装Visual Workbench存储库。
                     </p>
                     <p>使用<code class="codeph">pgvwbrepos.sql</code>上安装ORACLE10 <span class="italic">g</span>或更高版本的Visual平台资源库。要运行<code class="codeph">pgvwbrepos.sql</code> ，请确保您当前位于Microsoft Windows上的<code class="codeph">ORACLE_HOME\dg4mq\admin\repo</code>目录和基于UNIX的系统上的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/dg4mq/admin/repo</code>目录中，然后输入以下命令：</p><pre class="oac_no_warn" dir="ltr">sqlplus / nolog @ pgvwbrepos.sql</pre><div class="infoboxnote" id="GUID-D73D7245-433F-44E9-AE03-9ACFB5CCA453__GUID-52779C26-319F-4108-B39B-7F3E694041A0">
                        <p class="notep1">注意：</p>
                        <p>如果要在Oracle8 <span class="italic">i</span>或更早版本上安装Visual Workbench存储库，则必须使用<code class="codeph">pgvwbrepos8.sql</code> 。本节中的所有示例都假设您在Oracle9 <span class="italic">i</span>及更高版本上进行安装。
                        </p>
                     </div>
                     <p>该脚本将指导您完成以下步骤：</p>
                  </div><a id="WSMQG195"></a><div class="props_rev_3"><a id="GUID-FAAF488B-671B-43E9-877E-319D2D74A849" name="GUID-FAAF488B-671B-43E9-877E-319D2D74A849"></a><h5 id="WSMQG-GUID-FAAF488B-671B-43E9-877E-319D2D74A849" class="sect5">步骤1：输入数据库连接信息</h5>
                     <div>
                        <p>此步骤说明如何输入数据库连接信息。</p>
                        <div class="section">
                           <p>按<span class="bold">Enter键</span>使用默认的<code class="codeph">LOCAL</code>值。接下来，系统会提示您输入Oracle数据库的<code class="codeph">SYSTEM</code>和<code class="codeph">SYS</code>帐户的密码。输入每个密码后按<span class="bold">Enter键</span> 。
                           </p>
                           <p>如果任何信息不正确，脚本将停止。在重新运行脚本之前验证信息。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG196"></a><div class="props_rev_3"><a id="GUID-904FA6F4-E1F4-474A-B362-4D4C64CF352F" name="GUID-904FA6F4-E1F4-474A-B362-4D4C64CF352F"></a><h5 id="WSMQG-GUID-904FA6F4-E1F4-474A-B362-4D4C64CF352F" class="sect5">第2步：检查现有Workbench存储库</h5>
                     <div>
                        <p>此步骤说明如何检查现有的Visual Workbench存储库。</p>
                        <div class="section">
                           <p>该脚本检查现有的Visual Workbench存储库和数据字典。如果均未找到，则脚本进入下面的步骤3。</p>
                           <p>如果<a id="d10290e2733" class="indexterm-anchor"></a>数据字典存在，然后脚本停止。从<span class="q">“ <a href="configuring-database-gateway-webspheremq.html#GUID-690B28A3-9B57-43BE-BFAB-01E798E477DC" title="此步骤说明如何选择存储库服务器。">步骤1：选择存储库服务器</a> ”</span>开始，选择另一个Oracle数据库并重新运行该脚本。
                           </p>
                           <p>如果存在Visual Workbench存储库，则该脚本将为您提供以下选项：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>将现有私有存储库升级到公共状态，然后继续执行步骤3。</p>
                              </li>
                              <li>
                                 <p>使用新的专用存储库替换现有存储库，然后继续执行步骤3。</p>
                              </li>
                              <li>
                                 <p>停止脚本。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG197"></a><div class="props_rev_3"><a id="GUID-C6A48D6A-5C8A-4632-A1C2-5BD33C0E7DF8" name="GUID-C6A48D6A-5C8A-4632-A1C2-5BD33C0E7DF8"></a><h5 id="WSMQG-GUID-C6A48D6A-5C8A-4632-A1C2-5BD33C0E7DF8" class="sect5">第3步：检查所需的PL / SQL包</h5>
                     <div>
                        <p>此步骤说明如何检查所需的PL / SQL包。</p>
                        <div class="section">
                           <p>该脚本检查是否存在<code class="codeph">UTL_RAW</code> <a id="d10290e2786" class="indexterm-anchor"></a><a id="d10290e2788" class="indexterm-anchor"></a> ， <code class="codeph">DBMS_OUTPUT</code> <a id="d10290e2795" class="indexterm-anchor"></a><a id="d10290e2797" class="indexterm-anchor"></a>和<code class="codeph">DBMS_PIPE</code> <a id="d10290e2804" class="indexterm-anchor"></a><a id="d10290e2807" class="indexterm-anchor"></a>在Oracle数据库中。如果该软件存在，则脚本进入步骤4。
                           </p>
                           <p>如果此软件不存在，脚本将停止。有关缺少的软件，请参阅<a href="../admin/index.html" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> 。安装软件后，重新运行脚本。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG198"></a><div class="props_rev_3"><a id="GUID-D341C425-B87A-4253-BE65-7A95BEC43915" name="GUID-D341C425-B87A-4253-BE65-7A95BEC43915"></a><h5 id="WSMQG-GUID-D341C425-B87A-4253-BE65-7A95BEC43915" class="sect5">第4步：安装UTL_PG包</h5>
                     <div>
                        <p>此步骤说明如何安装<code class="codeph">UTL_PG</code>程序包。
                        </p>
                        <div class="section">
                           <p>该脚本检查是否存在<a id="d10290e2847" class="indexterm-anchor"></a> <code class="codeph">UTL_PG</code> <a id="d10290e2852" class="indexterm-anchor"></a>包。如果它不存在，则安装<code class="codeph">UTL_PG</code>包。然后脚本进入步骤5。
                           </p>
                           <p>如果存在<code class="codeph">UTL_PG</code> ，则会提示您重新安装它。按Return键重新安装<code class="codeph">UTL_PG</code> 。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG199"></a><div class="props_rev_3"><a id="GUID-C3C8582D-DAEA-4232-9C8E-A35968E334DC" name="GUID-C3C8582D-DAEA-4232-9C8E-A35968E334DC"></a><h5 id="WSMQG-GUID-C3C8582D-DAEA-4232-9C8E-A35968E334DC" class="sect5">步骤5：创建管理用户和所有存储库表</h5>
                     <div>
                        <p>此步骤说明如何创建Visual平台资源库为管理用户<code class="codeph">PGMADMIN</code>与初始密码<code class="codeph">PGMADMIN</code> 。</p>
                        <div class="section">
                           <p>这个<a id="d10290e2900" class="indexterm-anchor"></a><a id="d10290e2904" class="indexterm-anchor"></a><a id="d10290e2906" class="indexterm-anchor"></a>用户拥有存储库中的所有对象。
                           </p>
                           <p>完成此步骤后，将包含一个包含<code class="codeph">PGM_SUP</code>的私有Visual Workbench存储库<a id="d10290e2913" class="indexterm-anchor"></a><a id="d10290e2915" class="indexterm-anchor"></a> ， <a id="d10290e2920" class="indexterm-anchor"></a><a id="d10290e2922" class="indexterm-anchor"></a> <code class="codeph">PGM_BQM</code>和<code class="codeph">PGM_UTL8</code>包在Oracle数据库中创建，只有<code class="codeph">PGMADMIN</code>用户才能访问。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG200"></a><div class="props_rev_3"><a id="GUID-857DF68A-42AF-49D0-B0D7-839362FA78A1" name="GUID-857DF68A-42AF-49D0-B0D7-839362FA78A1"></a><h5 id="WSMQG-GUID-857DF68A-42AF-49D0-B0D7-839362FA78A1" class="sect5">第6步：创建公共同义词和开发角色</h5>
                     <div>
                        <p>此可选步骤说明了如何更改Visual Workbench存储库的私有访问权限。</p>
                        <div class="section">
                           <p>该<a id="d10290e2961" class="indexterm-anchor"></a><a id="d10290e2963" class="indexterm-anchor"></a> private status仅允许<code class="codeph">PGMADMIN</code>用户访问存储库。如果输入<code class="codeph">N</code>并按<span class="bold">Enter键</span> ，则存储库将保留其私有状态。
                           </p>
                           <p>公共状态允许向<code class="codeph">PGMADMIN</code>之外的其他用户授予访问权限。如果要提供存储库<a id="d10290e2980" class="indexterm-anchor"></a><a id="d10290e2982" class="indexterm-anchor"></a>公共状态，然后输入<span class="bold">Y</span>并按<span class="bold">Enter键</span> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="WSMQG201"></a><div class="props_rev_3"><a id="GUID-52F29E90-BF9C-4A43-A586-B8B33ED5AA88" name="GUID-52F29E90-BF9C-4A43-A586-B8B33ED5AA88"></a><h4 id="WSMQG-GUID-52F29E90-BF9C-4A43-A586-B8B33ED5AA88" class="sect4">创建存储库后</h4>
                  <div>
                     <p>创建Visual Workbench存储库后，有一个可选步骤，向用户授予Visual Workbench存储库的开发权限。</p>
                     <div class="section">
                        <p>至<a id="d10290e3016" class="indexterm-anchor"></a><a id="d10290e3020" class="indexterm-anchor"></a>允许<code class="codeph">PGMADMIN</code>用户以外的用户在Visual Workbench存储库上执行开发操作， <code class="codeph">PGMADMIN</code>必须授予他们必要的权限。为此，请执行以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>确保存储库具有公共状态。如果您使用的步骤1到6创建它，则具有此状态<a id="d10290e3035" class="indexterm-anchor"></a> <code class="codeph">pgvwbrepos.sql</code>脚本。如果您未使用步骤6，则重新运行脚本。当您进入脚本的第2步时，在提示符处输入<span class="bold">A</span>以将私有存储库升级到公共状态。</span></li>
                        <li class="stepexpand"><span>使用SQL * Plus以<code class="codeph">PGMADMIN</code>用户身份连接到存储库并授予<a id="d10290e3049" class="indexterm-anchor"></a> <code class="codeph">PGMDEV</code> <a id="d10290e3054" class="indexterm-anchor"></a>每个用户的角色。例如：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; GRANT PGMDEV TO SCOTT;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="WSMQG202"></a><div class="props_rev_3"><a id="GUID-3EB1A14E-68CC-47CE-93A8-0CB5EA52E213" name="GUID-3EB1A14E-68CC-47CE-93A8-0CB5EA52E213"></a><h4 id="WSMQG-GUID-3EB1A14E-68CC-47CE-93A8-0CB5EA52E213" class="sect4">卸载Visual Workbench存储库</h4>
                  <div>
                     <p>使用存储库脚本<code class="codeph">pgvwbremove.sql</code>卸载Visual Workbench。
                     </p>
                     <div class="section">
                        <p><a id="d10290e3089" class="indexterm-anchor"></a>卸载一个<a id="d10290e3094" class="indexterm-anchor"></a> Visual Workbench <a id="d10290e3099" class="indexterm-anchor"></a>在ORACLE10 <span class="italic">摹</span>库，请使用存储库脚本<code class="codeph">pgvwbremove.sql</code> 。要运行此脚本，请确保您当前<code class="codeph">ORACLE_HOME\dg4mq\admin\repo directory on Microsoft Windows and</code>的Oracle数据库<code class="codeph">ORACLE_HOME\dg4mq\admin\repo directory on Microsoft Windows and</code>基于UNIX的系统（复制脚本的位置）上的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/dg4mq/admin/repo</code>目录下，然后输入以下命令：</p><pre class="oac_no_warn" dir="ltr">sqlplus / nolog @ pgvwbremove.sql</pre><div class="infoboxnote" id="GUID-3EB1A14E-68CC-47CE-93A8-0CB5EA52E213__GUID-06283FD1-DE39-4AF3-8577-B6A84809A339">
                           <p class="notep1">注意：</p>
                           <p>如果要在Oracle8 <span class="italic">i</span>或更早版本上卸载Visual Workbench存储库，则必须使用<code class="codeph">pgvwbremove8.sql</code> 。本节中的所有示例都假设您在Oracle9 <span class="italic">i</span>及更高版本上进行安装。
                           </p>
                        </div>
                        <p>该脚本将指导您完成以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="WSMQG203"></a><div class="props_rev_3"><a id="GUID-6C088018-0FBC-401B-AC08-20EA60C52A98" name="GUID-6C088018-0FBC-401B-AC08-20EA60C52A98"></a><h5 id="WSMQG-GUID-6C088018-0FBC-401B-AC08-20EA60C52A98" class="sect5">步骤1：输入数据库连接信息</h5>
                     <div>
                        <p>此步骤说明如何输入数据库连接信息。</p>
                        <div class="section">
                           <p>按<span class="bold">Enter键</span>使用默认值<code class="codeph">LOCAL</code> 。
                           </p>
                           <p>接下来，系统会提示您输入<code class="codeph">SYSTEM</code> ， <code class="codeph">SYS</code>和的密码<a id="d10290e3174" class="indexterm-anchor"></a> Oracle数据库的<code class="codeph">PGMADMIN</code>帐户。输入每个密码后按<span class="bold">Enter键</span> 。
                           </p>
                           <p>如果任何信息不正确，脚本将停止。在重新运行脚本之前验证信息。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="WSMQG204"></a><div class="props_rev_3"><a id="GUID-0DD53FCE-3998-415F-A4C1-E2784B854851" name="GUID-0DD53FCE-3998-415F-A4C1-E2784B854851"></a><h5 id="WSMQG-GUID-0DD53FCE-3998-415F-A4C1-E2784B854851" class="sect5">第2步：检查Existing Workbench Repository</h5>
                     <div>
                        <p>此步骤说明如何检查现有Workbench存储库。</p>
                        <div class="section">
                           <p>输入<span class="bold">Y</span>并按<span class="bold">Enter键</span>以提示删除公共同义词和开发角色。这会将存储库返回到私有<a id="d10290e3216" class="indexterm-anchor"></a><a id="d10290e3218" class="indexterm-anchor"></a>状态。您可以通过输入<span class="bold">N</span>然后按<span class="bold">Enter</span>退出脚本，或者继续下一个提示。
                           </p>
                           <p>如果您确定要删除私有存储库，请输入<span class="bold">Y</span>并按<span class="bold">Enter键</span> 。该脚本将删除所有存储库表和相关包。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="WSMQG205"></a><div class="props_rev_3"><a id="GUID-A6FA8628-F99D-4B20-9F3F-D2CCA16491C7" name="GUID-A6FA8628-F99D-4B20-9F3F-D2CCA16491C7"></a><h3 id="WSMQG-GUID-A6FA8628-F99D-4B20-9F3F-D2CCA16491C7" class="sect3">准备生产Oracle数据库</h3>
               <div>
                  <p>这些准备工作包括在生产数据库上准备，安装和删除PL / SQL包。</p>
               </div><a id="WSMQG206"></a><div class="props_rev_3"><a id="GUID-EAB59ED0-97AA-4094-B046-1FA638D10F07" name="GUID-EAB59ED0-97AA-4094-B046-1FA638D10F07"></a><h4 id="WSMQG-GUID-EAB59ED0-97AA-4094-B046-1FA638D10F07" class="sect4">介绍</h4>
                  <div>
                     <p>本节介绍如何运行<code class="codeph">pgmdeploy.sql</code>和<code class="codeph">pgmundeploy.sql</code>脚本。
                     </p>
                     <p>在生产Oracle数据库上编译MIP之前，可以使用以下PL / SQL <a id="d10290e3289" class="indexterm-anchor"></a><a id="d10290e3293" class="indexterm-anchor"></a>包必须存在于生产Oracle数据库中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d10290e3301" class="indexterm-anchor"></a><a id="d10290e3303" class="indexterm-anchor"></a> <code class="codeph">DBMS_PIPE</code> ， <a id="d10290e3310" class="indexterm-anchor"></a><a id="d10290e3312" class="indexterm-anchor"></a> <code class="codeph">DBMS_OUTPUT</code> ，和<a id="d10290e3319" class="indexterm-anchor"></a><a id="d10290e3321" class="indexterm-anchor"></a> <code class="codeph">UTL_RAW</code></p>
                           <p><a id="d10290e3330" class="indexterm-anchor"></a>这些软件包随每个Oracle数据库一起提供，通常是预安装的。
                           </p>
                        </li>
                        <li>
                           <p><a id="d10290e3337" class="indexterm-anchor"></a><a id="d10290e3339" class="indexterm-anchor"></a> <code class="codeph">PGM</code> ， <code class="codeph">PGM_BQM</code> ， <code class="codeph">PGM_SUP</code> <a id="d10290e3351" class="indexterm-anchor"></a><a id="d10290e3353" class="indexterm-anchor"></a>和<code class="codeph">UTL_PG</code> <a id="d10290e3361" class="indexterm-anchor"></a><a id="d10290e3363" class="indexterm-anchor"></a> 
                           </p>
                           <p>这些软件包随Oracle Database Gateway for WebSphere MQ一起提供。它们是在Visual Workbench存储库的创建过程中安装的。不要使用已安装的Visual Workbench存储库在Oracle数据库上执行部署脚本。如果用于存储库的Oracle数据库与生产环境中使用的Oracle数据库不同，则必须在生产Oracle数据库上安装这些软件包。</p>
                        </li>
                     </ul>
                     <p>本节介绍如何运行以下脚本：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">pgmdeploy.sql</code> ，</p>
                           <p>部署脚本，用于验证是否存在所需的PL / SQL包和<a id="d10290e3380" class="indexterm-anchor"></a>如果生产Oracle数据库中不存在它们，请安装它们。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">pgmundeploy.sql</code> 
                           </p>
                           <p>用于从生产Oracle数据库中删除PL / SQL包的脚本。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="WSMQG207"></a><div class="props_rev_3"><a id="GUID-2C606914-0E34-4BE4-B012-E1C74CAD4A08" name="GUID-2C606914-0E34-4BE4-B012-E1C74CAD4A08"></a><h4 id="WSMQG-GUID-2C606914-0E34-4BE4-B012-E1C74CAD4A08" class="sect4">验证和安装PL / SQL包</h4>
                  <div>
                     <p>本主题描述验证和安装PL / SQL包。</p>
                     <ol>
                        <li class="stepexpand"><span>找到以下脚本：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">pgm.sql</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">pgmbqm.sql</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">pgmdeploy.sql</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">pgmsup.sql</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">pgmundeploy.sql</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">prvtpg.sql</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">utlpg.sql</code></p>
                                 </li>
                              </ul>
                              <p>这些脚本随网关一起安装在Microsoft Windows上的<code class="codeph">ORACLE_HOME\dg4mq\admin\deploy</code>目录和基于UNIX的系统上的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/dg4mq/admin/deploy</code>目录中，其中<span class="italic"><code class="codeph">ORACLE_HOME</code></span>是网关主目录。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果您的生产Oracle数据库位于与网关不同的系统上，则使用文件传输方法（如FTP）在Microsoft Windows上的<code class="codeph">ORACLE_HOME\dg4mq\admin\deploy</code>目录和<code class="codeph">ORACLE_HOME/dg4mq/admin/deploy</code>传输文件在基于UNIX的系统上<code class="codeph">ORACLE_HOME/dg4mq/admin/deploy</code>目录，其中<code class="codeph">ORACLE_HOME</code>是网关系统上的网关主目录。在生产Oracle数据库系统上，将目录更改为包含刚刚传输的部署脚本的目录，并跳到步骤4。</span></li>
                        <li class="stepexpand"><span>如果您的生产Oracle数据库与网关位于同一系统上，则将目录更改为Microsoft Windows上的<code class="codeph">ORACLE_HOME\dg4mq\admin\deploy</code>目录和基于UNIX的系统上的<code class="codeph">ORACLE_HOME/dg4mq/admin/deploy</code> ，其中<code class="codeph">ORACLE_HOME</code>是网关主目录。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">pgmdeploy.sql</code>脚本，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ sqlplus / nolog @ pgmdeploy.sql</pre></div>
                        </li>
                        <li class="stepexpand"><span>在脚本提示符下： <tt>输入Oracle数据库的连接字符串...[LOCAL]</tt> ，按<span class="bold">Enter键</span>使用<code class="codeph">LOCAL</code>的默认值。</span></li>
                        <li class="stepexpand"><span>在脚本提示符下<tt>输入以下必需的Oracle数据库密码</tt> ，输入<code class="codeph">SYS</code>帐户的密码。</span></li>
                     </ol>
                     <div class="section">
                        <p>脚本验证<code class="codeph">SYS</code>帐户密码后，它将连接到生产Oracle数据库。该脚本验证并报告PL / SQL <a id="d10290e3528" class="indexterm-anchor"></a><a id="d10290e3532" class="indexterm-anchor"></a>安装在那里的包：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果有任何Oracle数据库<a id="d10290e3541" class="indexterm-anchor"></a><a id="d10290e3543" class="indexterm-anchor"></a><a id="d10290e3547" class="indexterm-anchor"></a><a id="d10290e3549" class="indexterm-anchor"></a><a id="d10290e3553" class="indexterm-anchor"></a><a id="d10290e3555" class="indexterm-anchor"></a>缺少软件包， <code class="codeph">DBMS_OUTPUT</code> ， <code class="codeph">DBMS_PIPE</code>或<code class="codeph">UTL_RAW</code> ，然后脚本停止。让您的DBA安装缺少的软件包并重新运行部署脚本。
                              </p>
                           </li>
                           <li>
                              <p>如果有任何Oracle <a id="d10290e3573" class="indexterm-anchor"></a><a id="d10290e3575" class="indexterm-anchor"></a><a id="d10290e3579" class="indexterm-anchor"></a><a id="d10290e3581" class="indexterm-anchor"></a><a id="d10290e3585" class="indexterm-anchor"></a><a id="d10290e3587" class="indexterm-anchor"></a>缺少软件包， <code class="codeph">PGM</code> ， <code class="codeph">PGM_BQM</code> ， <code class="codeph">PGM_SUP</code>和<code class="codeph">UTL_PG</code> ，然后脚本将它们安装在生产Oracle数据库上。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG208"></a><div class="props_rev_3"><a id="GUID-744DBEF1-66CC-42D4-B69D-937318833273" name="GUID-744DBEF1-66CC-42D4-B69D-937318833273"></a><h4 id="WSMQG-GUID-744DBEF1-66CC-42D4-B69D-937318833273" class="sect4">删除PL / SQL包</h4>
                  <div>
                     <p>本主题介绍如何删除PL / SQL包。</p>
                     <div class="section">
                        <p><a id="d10290e3629" class="indexterm-anchor"></a>您可以删除PL / SQL <a id="d10290e3634" class="indexterm-anchor"></a><a id="d10290e3638" class="indexterm-anchor"></a>例如，如果生产环境中没有任何应用程序使用MIP，则由<code class="codeph">pgmdeploy.sql</code>脚本安装的软件包。要删除这些包，请执行以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在生产Oracle数据库上，通过输入以下命令切换到包含部署脚本的目录：</span><div>
                              <p>对于Microsoft Windows：</p><pre class="oac_no_warn" dir="ltr">&gt; cd ORACLE_HOME \ dg4mq \ admin \ deploy</pre><p>对于基于UNIX的系统：</p><pre class="oac_no_warn" dir="ltr">$ cd $ ORACLE_HOME / dg4mq / admin / deploy</pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">pgmundeploy.sql</code> ，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ sqlplus / nolog @ pgmundeploy.sql</pre></div>
                        </li>
                        <li class="stepexpand"><span>在脚本提示符下： <tt>输入Oracle数据库的连接字符串...[LOCAL]</tt> ，按[ <tt>Return</tt> ]键使用默认的<code class="codeph">LOCAL</code> 。</span></li>
                        <li class="stepexpand"><span>在脚本提示符下， <tt>输入所需的Oracle数据库密码</tt> ，输入<code class="codeph">SYS</code>帐户的密码。</span></li>
                     </ol>
                     <div class="section">
                        <p>脚本验证<code class="codeph">SYS</code>帐户密码后，它将连接到生产Oracle数据库并删除<code class="codeph">pgmdeploy.sql</code>脚本安装的软件包。
                        </p>
                        <p><code class="codeph">pgmundeploy.sql</code>脚本成功完成后，生产Oracle数据库上的应用程序如果尝试引用其中编译的任何MIP，则会失败。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
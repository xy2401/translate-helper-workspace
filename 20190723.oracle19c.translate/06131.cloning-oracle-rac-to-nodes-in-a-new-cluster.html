<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes how to clone Oracle Real Application Clusters (Oracle RAC) database homes on Linux and UNIX systems to nodes in a new cluster."></meta>
      <meta name="description" content="This chapter describes how to clone Oracle Real Application Clusters (Oracle RAC) database homes on Linux and UNIX systems to nodes in a new cluster."></meta>
      <title>将Oracle RAC克隆到新群集中的节点</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta property="og:description" content="This chapter describes how to clone Oracle Real Application Clusters (Oracle RAC) database homes on Linux and UNIX systems to nodes in a new cluster."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00"></meta>
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95728-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-backup-and-recovery.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-backup-and-recovery.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters管理和部署指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">将Oracle RAC克隆到新群集中的节点</li>
            </ol>
            <a id="GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" name="GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55"></a><a id="RACAD03202"></a>
            
            <h2 id="RACAD-GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" class="sect2"><span class="enumeration_chapter">9将</span> Oracle RAC克隆到新群集中的节点</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何将Linux和UNIX系统上的Oracle Real Application Clusters（Oracle RAC）数据库主目录克隆到新群集中的节点。</p>
               <p>本章介绍了使用脚本实现的非交互式克隆技术。本章中介绍的克隆技术最适合执行多个同时进行的群集安装。创建脚本是一个手动过程，可能容易出错。如果只安装一个集群，则应使用传统的自动和交互式安装方法，例如Oracle Universal Installer或Oracle Enterprise Manager的Provisioning Pack功能。</p>
               <div class="infoboxnote" id="GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55__GUID-9507ADCC-E679-42BF-B9B5-060B6F7A1DD5">
                  <p class="notep1">注意：</p>
                  <p>克隆不是Oracle Enterprise Manager克隆的替代品，它是Provisioning Pack的一部分。在Oracle Enterprise Manager克隆期间，供应过程会以交互方式询问有关Oracle主目录的详细信息（例如，您要部署克隆的位置，Oracle数据库主目录的名称，群集中的节点列表以及等等）。</p>
                  <p>Oracle企业管理器云控制的Provisioning Pack功能提供了一个框架，使您可以轻松地自动配置新节点和群集。对于具有许多Oracle RAC集群的数据中心，创建克隆过程以轻松地将新集群和新节点配置到现有集群的投资是值得的。</p>
               </div>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-9DEEF6F5-CA37-465E-9648-69A945614998">克隆Oracle RAC简介</a></p>
                  </li>
                  <li>
                     <p><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-39DC544C-810D-40C6-BDB7-EFCF2C8619C7" title="使用此概述可以了解用于克隆Oracle RAC的过程。">准备克隆Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-6294EEDD-73B1-4116-8068-D2D198F21297">将Oracle RAC克隆部署到群集中的节点</a></p>
                  </li>
                  <li>
                     <p><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-CE9D8B63-6877-448B-8689-CAE658771A7C" title="克隆脚本运行多个工具，每个工具都可以生成自己的日志文件。">查找和查看克隆过程中生成的日志文件</a></p>
                  </li>
               </ul>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html#GUID-CCD518C7-4E15-46C5-92CA-89F6DA3A7019" title="通过在Linux和UNIX系统环境中克隆本地（非共享）Oracle主目录，将节点添加到现有Oracle RAC环境。通过在Linux和UNIX系统环境中克隆共享Oracle主目录，将节点添加到现有Oracle RAC环境。通过在Windows系统环境中克隆共享或本地Oracle主目录，将节点添加到现有Oracle RAC环境。">使用克隆将Oracle RAC扩展到同一群集中的节点</a></li>
                  </ul>
               </div>
            </div><a id="RACAD7331"></a><div class="sect2"><a id="GUID-9DEEF6F5-CA37-465E-9648-69A945614998" name="GUID-9DEEF6F5-CA37-465E-9648-69A945614998"></a><h3 id="RACAD-GUID-9DEEF6F5-CA37-465E-9648-69A945614998" class="sect3">克隆Oracle RAC简介</h3>
               <div>
                  <p>克隆是将现有Oracle RAC安装复制到其他位置并更新复制位以在新环境中工作的过程。克隆操作后，也会出现在源Oracle主目录上应用的一次性修补程序所做的更改。源和目标路径（要克隆的主机）不必相同。</p>
                  <p>克隆有用的一些情况是<a id="d36824e342" class="indexterm-anchor"></a> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>克隆提供了一种准备Oracle主目录并同时将其部署到多个主机的方法。您可以作为非交互式过程以静默方式完成安装。您不需要使用图形用户界面（GUI）控制台，并且可以根据需要从Secure Shell（SSH）终端会话执行克隆。</p>
                     </li>
                     <li>
                        <p>通过克隆，您可以创建一个安装（生产，测试或开发安装的副本），并在一个步骤中应用所有修补程序。在源系统上执行基本安装并应用所有修补程序集和修补程序后，克隆将作为单个过程执行所有这些单独的步骤。这与通过安装过程执行单独步骤以在群集中的每个节点上安装，配置和修补安装形成对比。</p>
                     </li>
                     <li>
                        <p>通过克隆安装Oracle RAC是一个非常快速的过程。例如，将Oracle主目录克隆到两个以上节点的新集群需要几分钟时间来安装Oracle基础软件，并且每个节点需要几分钟（大约是运行<code class="codeph">root.sh</code>脚本所需的时间） ）。
                        </p>
                     </li>
                  </ul>
                  <p>克隆的安装与源安装的行为相同。例如，可以使用Oracle Universal Installer删除克隆的Oracle主目录，也可以使用OPatch进行修补。您还可以使用克隆的Oracle主目录作为另一个克隆操作的源。您可以使用命令行克隆脚本创建测试，开发或生产安装的克隆副本。默认克隆过程适用于大多数用例。但是，您还可以自定义克隆的各个方面，例如，指定自定义端口分配或保留自定义设置。</p>
                  <p>克隆过程的工作方式是将所有文件从源Oracle主目录复制到目标Oracle主目录。因此，源实例使用的位于源Oracle主目录结构之外的任何文件都不会复制到目标位置。</p>
                  <p>该<a id="d36824e366" class="indexterm-anchor"></a>源和目标上的二进制文件的大小可能不同，因为这些作为克隆操作的一部分重新链接，并且这两个位置之间的操作系统修补程序级别也可能不同。此外，克隆主页中的文件数将增加，因为从源复制的多个文件（特别是实例化的文件）将作为克隆操作的一部分进行备份。
                  </p>
               </div>
            </div><a id="RACAD8335"></a><a id="RACAD8336"></a><a id="RACAD8337"></a><a id="RACAD7332"></a><div class="sect2"><a id="GUID-39DC544C-810D-40C6-BDB7-EFCF2C8619C7" name="GUID-39DC544C-810D-40C6-BDB7-EFCF2C8619C7"></a><h3 id="RACAD-GUID-39DC544C-810D-40C6-BDB7-EFCF2C8619C7" class="sect3">准备克隆Oracle RAC</h3>
               <div>
                  <p>使用此概述可以了解用于克隆Oracle RAC的过程。</p>
                  <p>在准备阶段，您将创建Oracle主目录的副本，然后使用该副本在一个或多个节点上执行克隆过程。您还安装了Oracle Clusterware。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-39DC544C-810D-40C6-BDB7-EFCF2C8619C7__GUID-3F46F840-FB38-4AB4-B7DF-480E09C8DC78">安装Oracle RAC</p>
                     <p>使用<cite>适用</cite>于您的平台的<cite>Oracle Real Application Clusters安装指南中</cite>的详细说明，以安装Oracle RAC软件和修补程序：</p>
                     <ol>
                        <li>
                           <p>安装Oracle RAC并选择<span class="uicontrol bold">仅限软件</span>安装选项。
                           </p>
                        </li>
                        <li>
                           <p>修补释放到所需水平（例如<span class="italic">，12.1.0。N）。</span>
                           </p>
                        </li>
                        <li>
                           <p>如有必要，请应用一次性补丁。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-39DC544C-810D-40C6-BDB7-EFCF2C8619C7__GUID-E9DDB2C5-4EEA-4224-A960-3F83830E0B03">创建源主目录的备份</p>
                     <p>创建Oracle RAC主目录的副本。使用此文件将Oracle RAC主目录复制到群集中的每个节点。</p>
                     <p>创建备份（tar）文件时，最佳做法是在文件名中包含版本号。例如：</p><pre class="pre codeblock"><code>#cd / opt / oracle / product / 12c / db_1＃tar -zcvf / <span class="variable" translate="no">pathname</span> /db1120.tgz。</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-39DC544C-810D-40C6-BDB7-EFCF2C8619C7__GUID-6EDC804C-8EA7-43EB-9E0D-0927BF6571FC">安装并启动Oracle Clusterware</p>
                     <p>在使用克隆创建Oracle RAC主目录之前，必须首先在要将克隆的Oracle RAC主目录复制到的节点上安装和启动Oracle Clusterware。换句话说，您将从源群集克隆到目标群集中的节点上的Oracle RAC主目录的顺序与在原始节点上安装Oracle Clusterware和Oracle RAC软件组件的顺序相同。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>“Oracle Real Application Clusters安装指南”</cite></span></a></li>
                        <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-6294EEDD-73B1-4116-8068-D2D198F21297">将Oracle RAC克隆部署到群集中的节点</a></li>
                        <li><a href="../cwadd/cloning-oracle-clusterware.html#CWADD-GUID-502ABA1D-8246-4A13-BE72-3E806B77AB8F" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD8338"></a><a id="RACAD8339"></a><a id="RACAD8340"></a><a id="RACAD7900"></a><a id="RACAD7703"></a><a id="RACAD7704"></a><a id="RACAD8341"></a><a id="RACAD8342"></a><a id="RACAD7701"></a><a id="RACAD7702"></a><a id="RACAD7333"></a><div class="sect2"><a id="GUID-6294EEDD-73B1-4116-8068-D2D198F21297" name="GUID-6294EEDD-73B1-4116-8068-D2D198F21297"></a><h3 id="RACAD-GUID-6294EEDD-73B1-4116-8068-D2D198F21297" class="sect3">将Oracle RAC克隆部署到群集中的节点</h3>
               <div>
                  <p>完成<span class="q">“准备克隆Oracle RAC”中</span>描述的先决任务后，您可以部署克隆的Oracle主目录。
                  </p>
                  <p>将Oracle RAC数据库部署到群集，如下所示：</p>
                  <ol>
                     <li>
                        <p>执行任何Oracle RAC预安装任务（如特定于平台的Oracle RAC安装指南中所述），以准备新的群集节点，例如：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>指定内核参数。</p>
                           </li>
                           <li>
                              <p>确保Oracle Clusterware处于活动状态。</p>
                           </li>
                           <li>
                              <p>确保Oracle ASM处于活动状态，并且至少存在一个Oracle ASM磁盘组并已装入。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>部署Oracle RAC数据库软件，如下所示：</p>
                        <ol type="a">
                           <li>
                              <p>将Oracle主目录的克隆复制到所有节点。例如：</p><pre class="pre codeblock"><code>[root @ node1 root] #mkdir -p / opt / oracle / product / 12c / db [root @ node1 root] #cd / opt / oracle / product / 12c / db [root @ node1 db] <span class="variable" translate="no">path_name</span> -zxvf / <span class="variable" translate="no">path_name</span> /db1120.tgz</code></pre><p>提供home位置和<code class="codeph"><span class="variable" translate="no">path_name</span></code> ，home位置可以位于与用于创建tar的源home相同的目录路径或不同的目录路径中。
                              </p>
                           </li>
                           <li>
                              <p>如果源节点和目标节点之间的<code class="codeph">oracle</code>用户或<code class="codeph">oinstall</code>组或两者都不同，则更改Oracle Inventory文件的所有权，如下所示：</p><pre class="pre codeblock"><code>[root @ node1] #chown -R oracle：oinstall / opt / oracle / product / 12c / db</code></pre><p>在Oracle RAC主目录上运行上述命令时，它会清除Oracle二进制文件中的<code class="codeph">setuid</code>和<code class="codeph">setgid</code>信息。
                              </p>
                              <div class="infoboxnote" id="GUID-6294EEDD-73B1-4116-8068-D2D198F21297__GUID-262DBDAC-EFAD-42AB-8840-30FEB2D34A53">
                                 <p class="notep1">注意：</p>
                                 <p>您可以在执行步骤<a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-6294EEDD-73B1-4116-8068-D2D198F21297__RUNTHECLONE.PLSCRIPTONEACHNODEWHICH-35657A88">3</a>和步骤<a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-6294EEDD-73B1-4116-8068-D2D198F21297__THISSTEPAPPLIESTOLINUXANDUNIXINSTAL-35662A38">4</a>的同时执行此步骤，以在每个群集节点上运行<code class="codeph">clone.pl</code>和<code class="codeph">$ORACLE_HOME/root.sh</code>脚本。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </li>
                     <li id="GUID-6294EEDD-73B1-4116-8068-D2D198F21297__RUNTHECLONE.PLSCRIPTONEACHNODEWHICH-35657A88">
                        <p>在每个节点上运行<code class="codeph">clone.pl</code>脚本，该脚本执行主要的Oracle RAC克隆任务，如下所示：</p>
                        <ol type="a">
                           <li>
                              <p>在<code class="codeph">start.sh</code>脚本中提供环境变量和克隆参数，如<a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-6294EEDD-73B1-4116-8068-D2D198F21297__CHDICHEI" title="描述必须传递给clone.pl脚本的三个环境变量。">表9-2</a>和<a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-6294EEDD-73B1-4116-8068-D2D198F21297__CHDIADDC" title="描述传递给clone.pl脚本的克隆参数。">表9-3中所述</a> 。由于<code class="codeph">clone.pl</code>脚本对传递给它的参数很敏感，因此您必须准确使用括号，单引号和双引号。
                              </p>
                           </li>
                           <li>
                              <p>以<code class="codeph">oracle</code>或拥有Oracle RAC软件的用户身份运行脚本。
                              </p>
                           </li>
                        </ol>
                        <p>下表列出并描述了<code class="codeph">clone.pl</code>脚本参数：</p>
                        <div class="tblformal" id="GUID-6294EEDD-73B1-4116-8068-D2D198F21297__BABHJGAI">
                           <p class="titleintable">表9-1 clone.pl脚本参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="clone.pl脚本参数" width="90%" border="1" summary="Describes parameters used with the clone.pl script." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d36824e931">参数</th>
                                    <th align="left" valign="bottom" width="71%" id="d36824e933">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e937" headers="d36824e931 "><code class="codeph">ORACLE_HOME = <span class="variable" translate="no">Oracle_home</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e937 d36824e933 ">
                                       <p>要克隆的Oracle主目录的完整路径。如果指定了无效路径，则脚本将退出。此参数是必需的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e946" headers="d36824e931 "><code class="codeph">ORACLE_BASE = <span class="variable" translate="no">ORACLE_BASE</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e946 d36824e933 ">
                                       <p>要克隆的Oracle库的完整路径。如果指定了无效路径，则脚本将退出。此参数是必需的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e955" headers="d36824e931 "><code class="codeph">ORACLE_HOME_NAME = <span class="variable" translate="no">Oracle_home_name</span> | -defaultHomeName</code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e955 d36824e933 ">
                                       <p>要克隆的主目录的Oracle主目录名称。（可选）您可以指定<code class="codeph">-defaultHomeName</code>标志。此参数是可选的。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e968" headers="d36824e931 "><code class="codeph">ORACLE_HOME_USER = <span class="variable" translate="no">Oracle_home_user</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e968 d36824e933 ">
                                       <p>OracleHomeUser for Windows服务。此参数仅适用于Windows，并且是可选的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e977" headers="d36824e931 "><code class="codeph">OSDBA_GROUP = <span class="variable" translate="no">group_name</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e977 d36824e933 ">
                                       <p>指定要用作OSDBA特权组的操作系统组。此参数是可选的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e986" headers="d36824e931 "><code class="codeph">OSOPER_GROUP = <span class="variable" translate="no">group_name</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e986 d36824e933 ">
                                       <p>指定要用作OSOPER特权组的操作系统组。此参数是可选的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e995" headers="d36824e931 "><code class="codeph">OSASM_GROUP = <span class="variable" translate="no">group_name</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e995 d36824e933 ">
                                       <p>指定要用作OSASM特权组的操作系统组。此参数是可选的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e1004" headers="d36824e931 "><code class="codeph">OSBACKUPDBA_GROUP = <span class="codeinlineitalic">group_name</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e1004 d36824e933 ">
                                       <p>指定要用作OSBACKUPDBA特权组的操作系统组。此参数是可选的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e1013" headers="d36824e931 "><code class="codeph">OSDGDBA_GROUP = <span class="variable" translate="no">group_name</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e1013 d36824e933 ">
                                       <p>指定要用作OSDGDBA特权组的操作系统组。此参数是可选的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e1022" headers="d36824e931 "><code class="codeph">OSKMDBA_GROUP = <span class="variable" translate="no">group_name</span></code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e1022 d36824e933 ">
                                       <p>指定要用作OSKMDBA特权组的操作系统组。此参数是可选的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e1031" headers="d36824e931 "><code class="codeph">-debug</code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e1031 d36824e933 ">
                                       <p>指定此选项可在调试模式下运行<code class="codeph">clone.pl</code>脚本</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d36824e1042" headers="d36824e931 "><code class="codeph">-救命</code></td>
                                    <td align="left" valign="top" width="71%" headers="d36824e1042 d36824e933 ">
                                       <p>指定此选项可获取<code class="codeph">clone.pl</code>脚本的帮助。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>以下示例显示了调用<code class="codeph">clone.pl</code>脚本的<code class="codeph">start.sh</code>脚本的摘录：</p><pre class="pre codeblock"><code>ORACLE_BASE = /选择/甲骨文ORACLE_HOME = /选择/ ORACLE /产品/ 12C / DB CD $ ORACLE_HOME /克隆THISNODE = ' <span class="variable" translate="no">host_name</span> ' <span class="bold">E01</span> = ORACLE_HOME = /选择/ ORACLE /产品/ 12C / DB <span class="bold">E02</span> = ORACLE_HOME_NAME = OraDBRAC <span class="bold">E03</span> = ORACLE_BASE = / opt / oracle <span class="bold">C01</span> =“ -  O CLUSTER_NODES = {node1，node2}”“ <span class="bold">C02</span> =” -  O LOCAL_NODE = $ THISNODE“perl $ ORACLE_HOME / clone / bin / clone.pl $ E01 $ E02 $ E03 $ C01 $ C02</code></pre><p>下表列出并描述了上一示例中以粗体字显示的环境变量E01，E02和E03：</p>
                        <div class="tblformal" id="GUID-6294EEDD-73B1-4116-8068-D2D198F21297__CHDICHEI">
                           <p class="titleintable">表9-2传递给clone.pl脚本的环境变量</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="环境变量传递给clone.pl脚本" width="90%" border="1" summary="Describes the three environment variables that you must pass to the clone.pl script." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="11%" id="d36824e1093">符号</th>
                                    <th align="left" valign="bottom" width="21%" id="d36824e1095">变量</th>
                                    <th align="left" valign="bottom" width="68%" id="d36824e1097">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d36824e1101" headers="d36824e1093 ">
                                       <p>E01</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d36824e1101 d36824e1095 "><code class="codeph">ORACLE_HOME</code></td>
                                    <td align="left" valign="top" width="68%" headers="d36824e1101 d36824e1097 ">
                                       <p>Oracle RAC数据库主目录的位置。此目录位置必须存在，并且必须由Oracle操作系统组拥有： <code class="codeph">oinstall</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d36824e1114" headers="d36824e1093 ">
                                       <p>E02</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d36824e1114 d36824e1095 "><code class="codeph">ORACLE_HOME_NAME</code></td>
                                    <td align="left" valign="top" width="68%" headers="d36824e1114 d36824e1097 ">
                                       <p>Oracle RAC数据库的Oracle主目录的名称。这存储在Oracle Inventory中。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d36824e1124" headers="d36824e1093 ">
                                       <p>E03</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d36824e1124 d36824e1095 "><code class="codeph">ORACLE_BASE</code></td>
                                    <td align="left" valign="top" width="68%" headers="d36824e1124 d36824e1097 ">
                                       <p>Oracle Base目录的位置。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>下表列出并描述了克隆参数C01和C02，它们在前面的示例中以粗体字显示：</p>
                        <div class="tblformal" id="GUID-6294EEDD-73B1-4116-8068-D2D198F21297__CHDIADDC">
                           <p class="titleintable">表9-3克隆参数传递给clone.pl脚本。</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="克隆参数传递给clone.pl脚本。" width="90%" border="1" summary="Describes the cloning parameters that are passed to the clone.pl script." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="11%" id="d36824e1147">变量</th>
                                    <th align="left" valign="bottom" width="21%" id="d36824e1149">名称</th>
                                    <th align="left" valign="bottom" width="21%" id="d36824e1151">参数</th>
                                    <th align="left" valign="bottom" width="46%" id="d36824e1153">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d36824e1157" headers="d36824e1147 ">
                                       <p>C01</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d36824e1157 d36824e1149 ">
                                       <p>群集节点</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d36824e1157 d36824e1151 "><code class="codeph">CLUSTER_NODES</code></td>
                                    <td align="left" valign="top" width="46%" headers="d36824e1157 d36824e1153 ">
                                       <p>列出群集中的节点。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d36824e1170" headers="d36824e1147 ">
                                       <p>C02</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d36824e1170 d36824e1149 ">
                                       <p>本地节点</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d36824e1170 d36824e1151 "><code class="codeph">LOCAL_NODE</code></td>
                                    <td align="left" valign="top" width="46%" headers="d36824e1170 d36824e1153 ">
                                       <p>本地节点的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>以下示例显示了用户必须创建的调用<code class="codeph">clone.pl</code>脚本的<code class="codeph">start.bat</code>脚本的摘录：</p><pre class="pre codeblock"><code>设置ORACLE_home = C：\ oracle \ product \ 12c \ db1 cd％ORACLE_home％\ clone \ bin设置THISNODE =％hostname％set E01 = ORACLE_HOME =％ORACLE_home％set E02 = ORACLE_HOME_NAME = OraDBRAC设置E03 = ORACLE_BASE = <span class="variable" translate="no">Oracle_Base</span>设置C01 = “CLUSTER_NODES = {node1，node2}”set C02 =“ -  O LOCAL_NODE =％THISNODE％”perl clone.pl％E01 %% E02 %% E03 %% C01 %% C02％</code></pre></li>
                     <li id="GUID-6294EEDD-73B1-4116-8068-D2D198F21297__THISSTEPAPPLIESTOLINUXANDUNIXINSTAL-35662A38">
                        <div class="infoboxnote" id="GUID-6294EEDD-73B1-4116-8068-D2D198F21297__GUID-E5B727DD-6EA9-4E3E-AC1A-1EF8384951A4">
                           <p class="notep1">注意：</p>
                           <p>此步骤仅适用于Linux和UNIX安装。</p>
                        </div>
                        <p>只要<code class="codeph">clone.pl</code>过程在节点上完成，就以<code class="codeph">root</code>操作系统用户身份运行<code class="codeph">$ORACLE_HOME/root.sh</code> <code class="codeph">clone.pl</code>
                        </p><pre class="pre codeblock"><code>[root @ node1 root]＃/ opt / oracle / product.12c / db / root.sh -silent</code></pre><p>请注意，您可以同时在每个节点上运行脚本：</p><pre class="pre codeblock"><code>[root @ node2 root]＃/ opt / oracle / product.12c / db / root.sh -silent</code></pre><p>确保脚本已在每个节点上完成，然后再继续执行下一步。</p>
                     </li>
                     <li>
                        <div class="infoboxnote" id="GUID-6294EEDD-73B1-4116-8068-D2D198F21297__GUID-029FE802-8FC0-475E-BDDE-5705024BFD8E">
                           <p class="notep1">注意：</p>
                           <p>您只需在群集中的一个节点上运行DBCA即可在所有节点上创建Oracle RAC实例。</p>
                        </div>
                        <p>此步骤说明如何以静默方式运行DBCA并提供响应文件输入以创建Oracle RAC实例。</p>
                        <p>以下示例在每个节点上创建名为ERI的Oracle RAC数据库，在每个节点上创建数据库实例，在OCR中注册实例，在名为<code class="codeph">DATA</code>的Oracle ASM磁盘组中创建数据库文件，并创建示例模式。它还将<code class="codeph">SYS</code> ， <code class="codeph">SYSTEM</code> ， <code class="codeph">SYSMAN</code>和<code class="codeph">DBSNMP</code>密码设置为<span class="italic"><code class="codeph">password</code></span> ，这是每个帐户的密码：</p><pre class="pre codeblock"><code>[oracle @ node1 oracle] $ export ORACLE_HOME = / opt / oracle / product / 12c / db [oracle @ node1 oracle] $ cd $ ORACLE_HOME / bin / [oracle @ node1 bin] $。/ dbca -silent -createDatabase -templateName General_Purpose .dbc \ -gdbName ERI -sid ERI \ -sysPassword <span class="variable" translate="no">password</span> -systemPassword <span class="variable" translate="no">password</span> \ -sysmanPassword <span class="variable" translate="no">password</span> -dbsnmpPassword <span class="variable" translate="no">password</span> \ -emConfiguration LOCAL \ -storageType ASM -diskGroupName DATA \ -datafileJarLocation $ ORACLE_HOME / assistants / dbca / templates \ -nodelist node1， node2 -characterset WE8ISO8859P1 \ -obfuscatedPasswords false -sampleSchema true</code></pre></li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-39DC544C-810D-40C6-BDB7-EFCF2C8619C7" title="使用此概述可以了解用于克隆Oracle RAC的过程。">准备克隆Oracle RAC</a></li>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>“Oracle Real Application Clusters安装指南”</cite></span></a></li>
                        <li><a href="../admqs/installing-oracle-database-creating-database.html#ADMQS-GUID-2A1B1AF2-CC36-405A-89EB-72E7A33F7E2B" target="_blank"><span><cite>Oracle数据库2天DBA</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD7705"></a><a id="RACAD7336"></a><div class="sect2"><a id="GUID-CE9D8B63-6877-448B-8689-CAE658771A7C" name="GUID-CE9D8B63-6877-448B-8689-CAE658771A7C"></a><h3 id="RACAD-GUID-CE9D8B63-6877-448B-8689-CAE658771A7C" class="sect3">查找和查看克隆过程中生成的日志文件</h3>
               <div>
                  <p>克隆脚本运行多个工具，每个工具都可以生成自己的日志文件。</p>
                  <p><code class="codeph">clone.pl</code>脚本完成运行后，您可以查看日志文件以获取有关克隆过程的更多信息。
                  </p>
                  <p>克隆过程中生成的以下日志文件是用于诊断目的的关键日志文件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph"><span class="variable" translate="no">Central_Inventory</span> / logs / cloneActions <span class="variable" translate="no">timestamp</span> .log</code></p>
                        <p>包含克隆的Oracle Universal Installer部分期间发生的操作的详细日志。</p>
                     </li>
                     <li>
                        <p><code class="codeph"><span class="variable" translate="no">Central_Inventory</span> / logs / oraInstall <span class="variable" translate="no">timestamp</span> .err</code></p>
                        <p>包含有关Oracle Universal Installer运行时发生的错误的信息。</p>
                     </li>
                     <li>
                        <p><code class="codeph"><span class="variable" translate="no">Central_Inventory</span> / logs / oraInstall <span class="variable" translate="no">timestamp</span> .out</code></p>
                        <p>包含Oracle Universal Installer生成的其他杂项消息。</p>
                     </li>
                     <li>
                        <p><code class="codeph">$ ORACLE_HOME / clone / logs / clone <span class="variable" translate="no">timestamp</span> .log</code></p>
                        <p>包含克隆之前和克隆操作期间发生的操作的详细日志。</p>
                     </li>
                     <li>
                        <p><code class="codeph">$ ORACLE_HOME / clone / logs / error <span class="variable" translate="no">timestamp</span> .log</code></p>
                        <p>包含有关克隆之前和克隆操作期间发生的错误的信息。</p>
                     </li>
                  </ul>
                  <p><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-CE9D8B63-6877-448B-8689-CAE658771A7C__BABHHGBH" title="此表描述了如何查找Oracle Inventory目录的位置">表9-4</a>说明了如何查找Oracle Inventory目录的位置。
                  </p>
                  <div class="tblformal" id="GUID-CE9D8B63-6877-448B-8689-CAE658771A7C__BABHHGBH">
                     <p class="titleintable">表9-4查找Oracle Inventory目录的位置</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="查找Oracle Inventory目录的位置" width="100%" border="1" summary="This table describes how to find the location of the Oracle inventory directory" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d36824e1506">系统类型......</th>
                              <th align="left" valign="bottom" width="71%" id="d36824e1509">Oracle Inventory Directory的位置</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d36824e1514" headers="d36824e1506 ">
                                 <p>除Linux和IBM AIX之外的所有UNIX计算机</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d36824e1514 d36824e1509 ">
                                 <p><code class="codeph">/var/opt/oracle/oraInst.loc</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d36824e1522" headers="d36824e1506 ">
                                 <p>IBM AIX和Linux</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d36824e1522 d36824e1509 ">
                                 <p><code class="codeph">/etc/oraInst.loc</code>文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d36824e1531" headers="d36824e1506 ">
                                 <p>视窗</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d36824e1531 d36824e1509 ">
                                 <p><code class="codeph">C：\ Program Files \ Oracle \ Inventory</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>在Oracle Solaris上管理Oracle数据库</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator&#39;s Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator&#39;s Reference for Linux and UNIX System-Based Operating Systems"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="administrators-reference-linux-and-unix-system-based-operating-systems.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T05:04:28-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96356-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="administering-oracle-database-on-linux.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-oracle-ODBC-driver.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Administrator&#39;s Reference for Linux and UNIX System-Based Operating Systems"></meta>
    <meta name="dcterms.isVersionOf" content="UNXAR"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="administering-oracle-database-on-linux.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-oracle-ODBC-driver.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在Oracle Solaris上管理Oracle数据库</li>
            </ol>
            <a id="GUID-D84AD8D9-82E8-471C-ABD3-A36745D6A8A8" name="GUID-D84AD8D9-82E8-471C-ABD3-A36745D6A8A8"></a>
            
            <h2 id="UNXAR-GUID-D84AD8D9-82E8-471C-ABD3-A36745D6A8A8" class="sect2"><span class="enumeration_chapter">B</span>在Oracle Solaris上管理Oracle数据库</h2>
         </header>
         <div class="ind">
            <div>
               <p>本附录包含有关在Oracle Solaris上管理Oracle数据库的信息。</p>
               <p>它包含以下主题：</p>
               <p><a href="administering-oracle-database-on-oracle-solaris.html#GUID-D311A675-8D45-4751-BA6E-F175931320EE">Oracle Solaris共享内存环境</a></p>
               <p><a href="administering-oracle-database-on-oracle-solaris.html#GUID-2E38D113-0E83-4EBF-AB32-288B6541EA20" title="Solaris资源池通过将一组专用CPU与数据库实例相关联来提高数据库性能。每个数据库实例只能使用其资源池中的资源。">关于在Oracle Solaris系统上创建资源池</a></p>
               <p><a href="administering-oracle-database-on-oracle-solaris.html#GUID-6A609C22-366F-4148-A912-BAD890AD76AE" title="您可以使用多CPU绑定（MCB）作为资源管理策略的一部分来提高性能。">关于多CPU绑定功能</a></p>
            </div>
            <div class="props_rev_3"><a id="GUID-D311A675-8D45-4751-BA6E-F175931320EE" name="GUID-D311A675-8D45-4751-BA6E-F175931320EE"></a><h3 id="UNXAR-GUID-D311A675-8D45-4751-BA6E-F175931320EE" class="sect3"><span class="enumeration_section">B.1</span> Oracle Solaris共享内存环境</h3>
               <div>
                  <p>本节介绍Oracle数据库如何使用共享内存模型，如优化共享内存（OSM），私密共享内存（ISM）和动态内部共享内存（DISM）。</p>
                  <p>它包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="administering-oracle-database-on-oracle-solaris.html#GUID-7D9DF837-FE1F-4937-B75D-50F283371391">关于优化共享内存</a></p>
                     </li>
                     <li>
                        <p><a href="administering-oracle-database-on-oracle-solaris.html#GUID-1EC3CC17-494C-4C3F-BCF6-DB7C0ECCA28B">检查优化的共享内存</a></p>
                     </li>
                     <li>
                        <p><a href="administering-oracle-database-on-oracle-solaris.html#GUID-7DDEA9B1-A1AF-4200-9BC4-405F97F80512">关于ISM和DISM</a></p>
                     </li>
                     <li>
                        <p><a href="administering-oracle-database-on-oracle-solaris.html#GUID-0E36A9F4-BA76-44A3-BC07-EF5CA6BF5650">检查ISM或DISM</a></p>
                     </li>
                     <li>
                        <p><a href="administering-oracle-database-on-oracle-solaris.html#GUID-7AD775CC-9D73-4A6D-B076-0BF00926D115">关于oradism实用程序</a></p>
                     </li>
                     <li>
                        <p><a href="administering-oracle-database-on-oracle-solaris.html#GUID-820FD177-68A0-4A62-8A89-14CF93E5CD8D">Oracle数据库如何在OSM_ ISM和DISM之间做出决定</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-7D9DF837-FE1F-4937-B75D-50F283371391" name="GUID-7D9DF837-FE1F-4937-B75D-50F283371391"></a><h4 id="UNXAR-GUID-7D9DF837-FE1F-4937-B75D-50F283371391" class="sect4"><span class="enumeration_section">B.1.1</span>关于优化共享内存</h4>
                  <div>
                     <p>从12 <span class="italic">c</span>开始，Oracle数据库在Oracle Solaris 10 1/13或更高版本以及Oracle Solaris 11 SRU 7.5或更高版本系统上使用Oracle Solaris的优化共享内存（OSM）模型来实现自动内存管理。
                     </p>
                     <p>OSM允许动态调整系统全局区域（SGA）的大小，而无需重新启动实例。它不使用<code class="codeph">oradism</code>实用程序和交换磁盘空间。OSM经过NUMA优化。
                     </p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-1EC3CC17-494C-4C3F-BCF6-DB7C0ECCA28B" name="GUID-1EC3CC17-494C-4C3F-BCF6-DB7C0ECCA28B"></a><h4 id="UNXAR-GUID-1EC3CC17-494C-4C3F-BCF6-DB7C0ECCA28B" class="sect4"><span class="enumeration_section">B.1.2</span>检查优化的共享内存</h4>
                  <div>
                     <div class="infoboxnote" id="GUID-1EC3CC17-494C-4C3F-BCF6-DB7C0ECCA28B__GUID-E2C8425D-F770-4905-B1F4-BB303FCC7A7C">
                        <p class="notep1">注意：</p>
                        <p>确保您的设置<code class="codeph">MEMORY_MAX_TARGET</code>比更大的价值<code class="codeph">MEMORY_TARGET</code>利用优化的共享内存。
                        </p>
                     </div>
                     <p>要验证Oracle Solaris是否使用优化共享内存（OSM），请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">$ ipcs -dm</pre><p>如果列<code class="codeph">ALLOC</code>显示整数，则指定OSM正在使用中。如果列<code class="codeph">ALLOC</code>显示连字符，则指定OSM未使用。
                     </p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-7DDEA9B1-A1AF-4200-9BC4-405F97F80512" name="GUID-7DDEA9B1-A1AF-4200-9BC4-405F97F80512"></a><h4 id="UNXAR-GUID-7DDEA9B1-A1AF-4200-9BC4-405F97F80512" class="sect4"><span class="enumeration_section">B.1.3</span>关于ISM和DISM</h4>
                  <div>
                     <p>在Oracle Solaris系统上，Oracle数据库对共享内存段使用内部共享内存（ISM），因为它在Oracle进程之间共享虚拟内存资源。ISM会导致整个共享内存段的物理内存自动锁定。</p>
                     <p>在<span>Oracle Solaris</span> 10 1/13和Oracle Solaris 11 SRU 7.5之前的<span>Oracle Solaris</span> 10系统上，可以使用动态内部共享内存（DISM）。这使Oracle数据库能够在共享该段的进程之间共享虚拟内存资源，同时启用内存分页。操作系统不必锁定整个共享内存段的物理内存。
                     </p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-0E36A9F4-BA76-44A3-BC07-EF5CA6BF5650" name="GUID-0E36A9F4-BA76-44A3-BC07-EF5CA6BF5650"></a><h4 id="UNXAR-GUID-0E36A9F4-BA76-44A3-BC07-EF5CA6BF5650" class="sect4"><span class="enumeration_section">B.1.4</span>检查ISM或DISM</h4>
                  <div>
                     <p>在Oracle Solaris上，要确定是否正在使用共享内存，请使用<code class="codeph">ipcs -im</code>命令。例如：</p><pre class="oac_no_warn" dir="ltr">％ipcs -im来自&lt;system&gt;的IPC状态截至8月19日01:09:30 PDT 2013 T ID KEY MODE所有者组织ISMATTCH共享内存：m 11 0xacea4150 --rw-rw ---- oracle dba 160</pre><p><code class="codeph">ISMATTCH</code>字段显示附加到此共享内存段的160个进程。但是， <code class="codeph">ISMATTCH</code>不区分内部共享内存（ISM）和动态内部共享内存（DISM）。
                     </p>
                     <p>在Oracle Solaris 10 1/13和Oracle Solaris 11 SRU 7.5之前的Oracle Solaris 10系统上，要识别ISM或DISM是否正在使用，或者哪个内存锁定服务处于活动状态，请使用<code class="codeph">pmap –xs</code>命令。例如：</p><pre class="oac_no_warn" dir="ltr">％ps -ef | grep ora | grep smon oracle 12524 1 0 05:40:13？0:25 ora_smon_prod％pmap -xs 12524 | grep ism 0000000380000000 38010880 38010880  -  38010880 256M rwxsR [ism shmid = 0xb] 0000000C90000000 131072 131072  -  131072 4M rwxsR [ism shmid = 0xb] 0000000C98000000 16 16  -  16 8K rwxsR [ism shmid = 0xb]</pre><div class="infoboxnote" id="GUID-0E36A9F4-BA76-44A3-BC07-EF5CA6BF5650__GUID-5D88ED5B-EDFE-4A48-A1F2-60735776DE47">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">ps —ef</code>命令列出正在运行的后台进程。需要此信息来确定Oracle数据库实例是否正在运行。
                        </p>
                     </div>
                     <p><code class="codeph">pmap –xs</code>命令的输出显示三个<code class="codeph">ism</code>地址范围，暗示ISM正在使用中。如果DISM锁定内存范围，则输出显示<code class="codeph">dism</code>地址范围。
                     </p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-7AD775CC-9D73-4A6D-B076-0BF00926D115" name="GUID-7AD775CC-9D73-4A6D-B076-0BF00926D115"></a><h4 id="UNXAR-GUID-7AD775CC-9D73-4A6D-B076-0BF00926D115" class="sect4"><span class="enumeration_section">B.1.5</span>关于oradism实用程序</h4>
                  <div>
                     <p>Oracle数据库使用<code class="codeph">oradism</code>实用程序来锁定和解锁共享内存。<code class="codeph">oradism</code>实用程序在安装期间自动设置。不需要执行任何配置任务来使用动态SGA。</p>
                     <p><code class="codeph">oradism</code>实用程序的进程名称是<code class="codeph">ora_dism_sid</code> ，其中<code class="codeph">sid</code>是系统标识符。使用DISM时，此过程在实例启动期间启动，并在实例关闭时自动退出。
                     </p>
                     <p>如果警报日志中显示消息，指出未正确设置<code class="codeph">oradism</code>实用程序，则验证<code class="codeph">oradism</code>实用程序位于<code class="codeph">$ORACLE_HOME/bin</code>目录中并且具有超级用户权限。
                     </p>
                     <div class="infoboxnote" id="GUID-7AD775CC-9D73-4A6D-B076-0BF00926D115__GUID-6E260F14-6A2F-4915-834C-3044B5FEEB2B">
                        <p class="notep1">注意：</p>
                        <p>优化共享内存（OSM）不使用<code class="codeph">oradism</code>实用程序。
                        </p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-820FD177-68A0-4A62-8A89-14CF93E5CD8D" name="GUID-820FD177-68A0-4A62-8A89-14CF93E5CD8D"></a><h4 id="UNXAR-GUID-820FD177-68A0-4A62-8A89-14CF93E5CD8D" class="sect4"><span class="enumeration_section">B.1.6</span> Oracle数据库如何在OSM，ISM和DISM之间<span class="enumeration_section">做出</span>决定</h4>
                  <div>
                     <p>Oracle数据库在OSM可用的Oracle Solaris系统上自动使用优化共享内存（OSM）。有关OSM的更多信息，请参阅<span class="q">“ <a href="administering-oracle-database-on-oracle-solaris.html#GUID-7D9DF837-FE1F-4937-B75D-50F283371391">关于优化共享内存</a> ”</span> 。</p>
                     <p>在OSM不可用的系统上，Oracle数据库根据以下标准自动选择内部共享内存（ISM）或动态内部共享内存（DISM）：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle数据库使用DISM（如果它在系统上可用），以及<code class="codeph">SGA_MAX_SIZE</code>的值<a id="d20704e817" class="indexterm-anchor"></a><a id="d20704e819" class="indexterm-anchor"></a>初始化参数大于所有SGA组件组合所需的大小。这使Oracle数据库只能锁定所使用的物理内存量。
                           </p>
                        </li>
                        <li>
                           <p>如果在启动时正在使用整个共享内存段，或者<code class="codeph">SGA_MAX_SIZE</code>参数的值等于或小于所有SGA组件组合所需的大小，则Oracle数据库使用ISM。
                           </p>
                        </li>
                     </ul>
                     <p>无论Oracle数据库是使用ISM还是DISM，它始终可以在启动实例后在动态可调整大小的组件（如缓冲区高速缓存，共享池和大型池）之间交换内存。Oracle数据库可以从一个动态SGA组件中放弃内存并将其分配给另一个组件。</p>
                     <p>由于共享内存段未隐式锁定在内存中，因此在使用DISM时，Oracle Database会显式锁定启动时当前正在使用的共享内存。当动态SGA操作使用更多共享内存时，Oracle数据库会显式对要使用的内存执行锁定操作。当动态SGA操作释放共享内存时，Oracle数据库会在释放的内存上显式执行解锁操作，以便其他应用程序可以使用它。</p>
                     <div class="infoboxnote" id="GUID-820FD177-68A0-4A62-8A89-14CF93E5CD8D__GUID-6D510898-0B1C-42A8-BF5C-1002A3BEAE94">
                        <p class="notep1">注意：</p>
                        <p>不要在服务器参数文件中将<code class="codeph">LOCK_SGA</code>参数设置为<code class="codeph">TRUE</code> 。如果这样做，则Oracle Database 12 <span class="italic">c</span>无法启动。
                        </p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-2E38D113-0E83-4EBF-AB32-288B6541EA20" name="GUID-2E38D113-0E83-4EBF-AB32-288B6541EA20"></a><h3 id="UNXAR-GUID-2E38D113-0E83-4EBF-AB32-288B6541EA20" class="sect3"><span class="enumeration_section">B.2</span>关于创建Solaris资源池</h3>
               <div>
                  <p>Solaris资源池通过将一组专用CPU与数据库实例相关联来提高数据库性能。每个数据库实例只能使用其资源池中的资源。</p>
                  <p>在大型服务器上进行整合时，您可能希望将数据库限制为CPU和内存的特定子集。此功能可以轻松为Oracle数据库实例启用CPU和内存限制。</p>
                  <p>使用<code class="codeph">setup_resource_pool.sh</code>脚本创建Solaris资源池。从My Oracle Support网站上的注释1928328.1下载此脚本：</p>
                  <p><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;amp;type=NOT&amp;amp;id=1928328.1" target="_blank">https://support.oracle.com/CSP/main/article?cmd=show&amp;amp;type=NOT&amp;amp;id=1928328.1</a></p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-6A609C22-366F-4148-A912-BAD890AD76AE" name="GUID-6A609C22-366F-4148-A912-BAD890AD76AE"></a><h3 id="UNXAR-GUID-6A609C22-366F-4148-A912-BAD890AD76AE" class="sect3"><span class="enumeration_section">B.3</span>关于多CPU绑定功能</h3>
               <div>
                  <p>您可以使用多CPU绑定（MCB）作为资源管理策略的一部分来提高性能。</p>
                  <p>多CPU绑定（MCB）是Oracle Solaris项目资源管理功能，它将项目绑定到特定的一组CPU，但不会独占绑定CPU。MCB允许其他进程也使用这些CPU，并允许分区重叠。Oracle Solaris 11.3及更高版本支持MCB。</p>
                  <p>资源池功能还允许绑定CPU。但是，此方法需要对系统中的处理器进行硬分区。资源池不允许重叠分区。</p>
                  <p>您可以通过Oracle Solaris项目分配，修改或删除MCB。使用标准命令行工具<code class="codeph">projadd(1M)</code>和<code class="codeph">projmod(1M)</code>创建或修改项目文件。
                  </p>
                  <div class="p">对于数据库用户，使用MCB而不是资源池的优点包括：<ul style="list-style-type:disc">
                        <li>
                           <p>能够将Oracle实例绑定到特定NUMA位置以获得性能，例如，在特定I / O或网络设备附近。</p>
                        </li>
                        <li>
                           <p>能够将多个Oracle实例绑定到主机上的不同核心或套接字，以提高性能隔离，而无需特权管理员对系统进行分区。</p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-6A609C22-366F-4148-A912-BAD890AD76AE__GUID-09636B61-CCAD-482A-BE64-1273302F2DC3">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/unxar&amp;id=using_projects_to_edit_multi_cpu_binding" target="_blank">“</a> <cite>管理Oracle Solaris 11.3中的资源管理</cite> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/unxar&amp;id=how_to_use_projects_to_edit_multi_cpu_binding" target="_blank">”</a>中的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/unxar&amp;id=using_projects_to_edit_multi_cpu_binding" target="_blank">“使用项目分配，修改和删除多CPU绑定”</a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/unxar&amp;id=how_to_use_projects_to_edit_multi_cpu_binding" target="_blank">“如何使用项目分配，修改和删除多CPU绑定”</a> 。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
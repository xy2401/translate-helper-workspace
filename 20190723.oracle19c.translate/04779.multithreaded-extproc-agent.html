<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="What is the multithreaded extproc agent?"></meta>
      <meta name="description" content="What is the multithreaded extproc agent?"></meta>
      <title>多线程extproc代理</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="What is the multithreaded extproc agent?"></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="deprecated-oci-functions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="book-index.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="deprecated-oci-functions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="book-index.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">多线程extproc代理</li>
            </ol>
            <a id="GUID-D5B7F5CA-79F8-4D46-A792-F8D27341EC69" name="GUID-D5B7F5CA-79F8-4D46-A792-F8D27341EC69"></a><a id="LNOCI72987"></a><a id="LNOCI00099"></a>
            
            <h2 id="LNOCI-GUID-D5B7F5CA-79F8-4D46-A792-F8D27341EC69" class="sect2"><span class="enumeration_chapter">F</span>多线程extproc代理</h2>
         </header>
         <div class="ind">
            <div>
               <p>什么是多线程extproc代理？</p>
               <p>本附录解释了多线程<code class="codeph">extproc</code>代理是什么，它如何有助于分布式数据库系统的整体效率，以及如何管理它。
               </p>
               <div class="section">
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D" title="本节介绍多线程extproc代理如何提高外部过程的效率。">为什么使用多线程extproc代理？</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6" title="当代理控制实用程序agtctl为SID启动多线程extproc代理时，agtctl会创建监视器线程。如何使用调度程序线程？如何使用任务线程？">多线程extproc代理体系结构</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8" title="在尝试连接到外部过程之前，必须为每个系统标识符（SID）启动一个多线程extproc代理。">管理多线程extproc代理</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="LNOCI72988"></a><a id="LNOCI945"></a><div class="props_rev_3"><a id="GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D" name="GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D"></a><h3 id="LNOCI-GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D" class="sect3"><span class="enumeration_section">F.1</span>为什么使用多线程extproc代理？
               </h3>
               <div>
                  <p>本节介绍多线程<code class="codeph">extproc</code>代理如何提高外部过程的效率。
                  </p>
                  <p></p>
                  <div class="section">
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-987D764A-73B0-4E72-A62F-AEF105F947B2" title="默认情况下，为每个用户会话启动extproc代理，并且extproc代理进程仅在用户会话结束时终止。">专用代理体系结构的挑战</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739" title="Oracle数据库共享服务器体系结构假设即使打开了数千个用户会话，在任何给定时间只有一小部分这些连接处于活动状态。">多线程的优势</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNOCI946"></a><div class="props_rev_3"><a id="GUID-987D764A-73B0-4E72-A62F-AEF105F947B2" name="GUID-987D764A-73B0-4E72-A62F-AEF105F947B2"></a><h4 id="LNOCI-GUID-987D764A-73B0-4E72-A62F-AEF105F947B2" class="sect4"><span class="enumeration_section">F.1.1</span>专用代理体系结构的挑战</h4>
                  <div>
                     <p>默认情况下，为每个用户会话启动<code class="codeph">extproc</code>代理，并且<code class="codeph">extproc</code>代理进程仅在用户会话结束时终止。
                     </p>
                     <p>该体系结构可能消耗不必要的大量系统资源。例如，假设有数千个用户会话同时产生<code class="codeph">extproc</code>代理进程。因为一个<code class="codeph">extproc</code>代理过程开始为每个会话，几千<code class="codeph">extproc</code>代理进程同时运行。所述<code class="codeph">extproc</code>不管每个单独的是否代理进程操作<code class="codeph">extproc</code>代理处理是目前活跃。因此， <code class="codeph">extproc</code>代理进程和开放连接可能消耗不成比例的系统资源。当会话连接到Oracle数据库时，通过以共享服务器模式启动服务器来解决此问题。共享服务器模式允许数据库连接由少量服务器进程共享。
                     </p>
                  </div>
               </div><a id="LNOCI947"></a><div class="props_rev_3"><a id="GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739" name="GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739"></a><h4 id="LNOCI-GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739" class="sect4"><span class="enumeration_section">F.1.2</span>多线程的优势</h4>
                  <div>
                     <p>Oracle数据库共享服务器体系结构假设即使打开了数千个用户会话，在任何给定时间只有一小部分这些连接处于活动状态。</p>
                     <p>在共享服务器模式下，有一个共享服务器进程池。用户会话连接到将请求的任务放入队列的调度程序进程。任务由第一个可用的共享服务器进程选取。共享服务器进程的数量通常少于用户会话数。</p>
                     <p>多线程<code class="codeph">extproc</code>代理提供与外部过程的连接类似的功能。多线程<code class="codeph">extproc</code>代理体系结构使用共享代理线程池。用户会话请求的任务将放入队列中，并由第一个可用的多线程<code class="codeph">extproc</code>代理线程获取。由于在给定时刻只有一小部分用户连接处于活动状态，因此使用多线程<code class="codeph">extproc</code>架构可以更有效地使用系统资源。
                     </p>
                  </div>
               </div>
            </div><a id="LNOCI949"></a><a id="LNOCI948"></a><div class="props_rev_3"><a id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6" name="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6"></a><h3 id="LNOCI-GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6" class="sect3"><span class="enumeration_section">F.2</span>多线程extproc代理体系结构</h3>
               <div>
                  <p>在尝试连接到外部过程之前，必须为每个系统标识符（SID）启动一个多线程<code class="codeph">extproc</code>代理。这是使用代理控制实用程序<code class="codeph">agtctl</code> 。此实用程序还用于配置代理程序和关闭代理程序。
                  </p>
                  <p>在系统上运行的每个Oracle Net侦听器都侦听一组SID的传入连接请求。如果传入的Oracle Net连接字符串中的SID是侦听器正在侦听的SID，则该侦听器将处理该连接。此外，如果为SID启动了多线程<code class="codeph">extproc</code>代理，则侦听器将请求传递给该<code class="codeph">extproc</code>代理。
                  </p>
                  <p>在多线程<code class="codeph">extproc</code>代理的体系结构中，每个传入的连接请求都由不同类型的线程处理：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>单个<span class="bold">监视器</span>线程。监视器线程负责：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>保持与听众的沟通</p>
                           </li>
                           <li>
                              <p>监控进程的负载</p>
                           </li>
                           <li>
                              <p>需要时启动和停止线程</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>几个<span class="bold">调度程序</span>线程。调度程序线程负责：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>处理与Oracle数据库的通信</p>
                           </li>
                           <li>
                              <p>将任务请求传递给任务线程</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>几个<span class="bold">任务</span>线程。任务线程处理来自Oracle数据库进程的请求。
                        </p>
                     </li>
                  </ul>
                  <p><a href="multithreaded-extproc-agent.html#GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__CFABDEFF">图F-1</a>说明了多线程<code class="codeph">extproc</code>代理的体系结构。用户会话1和2发出对某些DLL中的函数的调用请求。这些请求通过异构服务提供给多线程<code class="codeph">extproc</code>代理。这些请求由代理的调度程序线程处理，然后将它们传递给任务线程。实际处理请求的任务线程负责加载相应的DLL并调用其中的函数。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>来自用户会话的所有请求都由同一个调度程序线程处理。例如，调度程序1处理与用户会话1的通信，并且调度程序2处理与用户会话2的通信。这是会话生命周期的情况。</p>
                     </li>
                     <li>
                        <p>各个请求可以由不同的任务线程提供服务。例如，任务线程1可以处理来自用户会话1的请求，并且稍后处理来自用户会话2的请求。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__GUID-29667D27-03E8-48A6-A431-335D98616321">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../admin/managing-processes.html#ADMIN00501" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> 。有关管理外部程序流程的详细信息</p>
                  </div>
                  <div class="figure" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__CFABDEFF">
                     <p class="titleinfigure">图F-1多线程extproc代理体系结构</p><img src="img/adfns100.gif" alt="下面是图F-1的描述" title="下面是图F-1的描述" longdesc="img_text/adfns100.html"><br><a href="img_text/adfns100.html">“图F-1多线程extproc代理体系结构”的描述</a></div>
                  <!-- class="figure" -->
                  <p>这三种线程类型分别大致对应于Oracle数据库多线程服务器PMON，调度程序和共享服务器进程。</p>
                  <div class="infoboxnote" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__GUID-89EBAE1D-2CF0-475F-A765-207162ACEE26">
                     <p class="notep1">注意：</p>
                     <p>来自用户会话的所有请求都通过相同的调度程序线程，但可以由不同的任务线程进行服务。此外，多个任务线程可以使用与外部过程相同的连接。</p>
                  </div>
                  <p>这些主题更详细地解释了每种类型的线程：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59" title="当代理控制实用程序agtctl为SID启动多线程extproc代理时，agtctl会创建监视器线程。">监控线程</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62" title="如何使用调度程序线程？">调度程序线程</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F" title="如何使用任务线程？">任务线程</a></p>
                        <div class="infoboxnotealso" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__GUID-2672BD6D-72BE-405B-B74B-236A9D0EF4CC">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8" title="One multithreaded extproc agent must be started for each system identifier (SID) before attempting to connect to the external procedure.">管理多线程extproc代理</a>以获取有关使用代理控制实用程序<code class="codeph">agtctl</code>启动和停止多线程<code class="codeph">exproc</code> <a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8" title="在尝试连接到外部过程之前，必须为每个系统标识符（SID）启动一个多线程extproc代理。">代理</a>的更多信息</p>
                        </div>
                     </li>
                  </ul>
               </div><a id="LNOCI950"></a><div class="props_rev_3"><a id="GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59" name="GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59"></a><h4 id="LNOCI-GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59" class="sect4"><span class="enumeration_section">F.2.1</span>监控线程</h4>
                  <div>
                     <p>当代理控制实用程序<code class="codeph">agtctl</code>为SID启动多线程<code class="codeph">extproc</code>代理时， <code class="codeph">agtctl</code>会创建监视器线程。
                     </p>
                     <p>监视器线程执行以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>创建调度程序和任务线程。</p>
                        </li>
                        <li>
                           <p>使用处理此<code class="codeph">extproc</code>代理连接的所有侦听器注册调度程序线程。当此SID的调度程序正在运行时，侦听器在获取传入连接时不会启动进程。相反，侦听器提供与此同一个调度程序的连接。
                           </p>
                        </li>
                        <li>
                           <p>监视其他线程并将有关调度程序线程的负载信息发送到处理此<code class="codeph">extproc</code>代理程序连接的所有侦听器进程，从而使侦听器能够为最少负载的调度程序提供传入连接。
                           </p>
                        </li>
                        <li>
                           <p>继续监视它创建的每个线程。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI951"></a><div class="props_rev_3"><a id="GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62" name="GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62"></a><h4 id="LNOCI-GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62" class="sect4"><span class="enumeration_section">F.2.2</span>调度程序线程</h4>
                  <div>
                     <p>如何使用调度程序线程？</p>
                     <p>Dispatcher线程执行以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>接受来自Oracle数据库服务器的传入连接和任务请求。</p>
                        </li>
                        <li>
                           <p>将传入的请求放在队列中以供任务线程获取。</p>
                        </li>
                        <li>
                           <p>将请求的结果发送回发出请求的服务器。</p>
                           <div class="infoboxnote" id="GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62__GUID-B48BF8C6-CCAC-4A30-AE51-4B57555DF418">
                              <p class="notep1">注意：</p>
                              <p>在用户会话与调度程序建立连接之后，来自该用户会话的所有请求都将转到同一个调度程序，直到用户会话结束。</p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI952"></a><div class="props_rev_3"><a id="GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F" name="GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F"></a><h4 id="LNOCI-GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F" class="sect4"><span class="enumeration_section">F.2.3</span>任务线程</h4>
                  <div>
                     <p>如何使用任务线程？</p>
                     <p>任务线程执行以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>从队列中提取请求。</p>
                        </li>
                        <li>
                           <p>执行必要的操作。</p>
                        </li>
                        <li>
                           <p>将结果放在队列中以供调度员接收。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNOCI72989"></a><a id="LNOCI954"></a><a id="LNOCI953"></a><div class="props_rev_3"><a id="GUID-35A467BD-A506-424F-A35F-CF814514A9F8" name="GUID-35A467BD-A506-424F-A35F-CF814514A9F8"></a><h3 id="LNOCI-GUID-35A467BD-A506-424F-A35F-CF814514A9F8" class="sect3"><span class="enumeration_section">F.3</span>管理多线程extproc代理</h3>
               <div>
                  <p>在尝试连接到外部过程之前，必须为每个系统标识符（SID）启动一个多线程<code class="codeph">extproc</code>代理。
                  </p>
                  <div class="section">
                     <p></p>
                     <p>多线程<code class="codeph">extproc</code>代理由名为<code class="codeph">agtctl</code>的代理控制实用程序启动，停止和配置，该实用程序的工作方式与<code class="codeph">lsnrctl</code>类似。但是，与读取配置文件（ <code class="codeph">listener.ora</code> ）的<code class="codeph">lsnrctl</code>不同， <code class="codeph">agtctl</code>获取配置信息并将其写入控制文件。
                     </p>
                     <p>在启动<code class="codeph">agtctl</code>之前，请确保Oracle Listener正在运行。然后使用<code class="codeph">agtctl</code>命令设置<code class="codeph">agtctl</code>配置参数（如果您不想要它们的默认值）并启动<code class="codeph">agtctl</code> ，如<a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8__BEJGACBC">示例F-1所示</a> 。
                     </p>
                     <p>您可以在单行命令模式或shell模式下使用<code class="codeph">agtctl</code>命令。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-35A467BD-A506-424F-A35F-CF814514A9F8__GUID-CD94BCB4-1127-4BF5-BC6A-08062535D0F7">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351" title="什么是Agent Control Utility命令以及它们用于什么？">代理控制实用程序（agtctl）命令</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A" title="本节介绍agtctl命令的用法。">关于在单行命令模式下使用agtctl</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-C75B07CD-875C-40D0-B59E-4E83440BE424" title="发出AGTCTL&gt;命令时，会产生提示AGTCTL&gt;。">使用Shell模式命令</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874" title="多线程extproc代理控制的配置参数有什么作用？">多线程extproc代理控制的配置参数</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-35A467BD-A506-424F-A35F-CF814514A9F8__BEJGACBC">
                     <p class="titleinexample">示例F-1设置配置参数并启动agtctl</p><pre class="oac_no_warn" dir="ltr">agtctl set max_dispatchers 2 ep_agt1 agtctl set tcp_dispatchers 1 ep_agt1 agtctl set max_task_threads 2 ep_agt1 agtctl set max_sessions 5 ep_agt1 agtctl unset listener_address ep_agt1 agtctl set listener_address“（address =（protocol = ipc）（key = extproc））”ep_agt1 agtctl startup extproc ep_agt1</pre></div>
                  <!-- class="example" -->
               </div><a id="LNOCI956"></a><a id="LNOCI955"></a><div class="props_rev_3"><a id="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351" name="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351"></a><h4 id="LNOCI-GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351" class="sect4"><span class="enumeration_section">F.3.1</span>代理控制实用程序（agtctl）命令</h4>
                  <div>
                     <p>什么是Agent Control Utility命令以及它们用于什么？</p>
                     <div class="section">
                        <p>您可以使用<a href="multithreaded-extproc-agent.html#GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351__G1006650" title="该表有2列。第1列是命令名，第2列是其描述。">表F-1中</a>显示的命令启动和停止<code class="codeph">agtctl</code>并创建和维护其控制文件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351__G1006650">
                        <p class="titleintable">表F-1代理控制实用程序（agtctl）命令</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="代理控制实用程序（agtctl）命令" width="100%" border="1" summary="This table has 2 columns. Column 1 is the command name and column 2 is its description. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d390030e2332">命令</th>
                                 <th align="left" valign="bottom" width="83%" id="d390030e2335">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2340" headers="d390030e2332 ">
                                    <p><code class="codeph">启动</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2340 d390030e2335 ">
                                    <p>启动多线程<code class="codeph">extproc</code>代理</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2351" headers="d390030e2332 ">
                                    <p><code class="codeph">关掉</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2351 d390030e2335 ">
                                    <p>停止多线程<code class="codeph">extproc</code>代理</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2362" headers="d390030e2332 ">
                                    <p><code class="codeph">组</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2362 d390030e2335 ">
                                    <p>设置多线程<code class="codeph">extproc</code>代理的配置参数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2373" headers="d390030e2332 ">
                                    <p><code class="codeph">未设置</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2373 d390030e2335 ">
                                    <p>使参数恢复为其默认值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2381" headers="d390030e2332 ">
                                    <p><code class="codeph">节目</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2381 d390030e2335 ">
                                    <p>显示配置参数的值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2389" headers="d390030e2332 ">
                                    <p><code class="codeph">删除</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2389 d390030e2335 ">
                                    <p>从控制文件中删除特定SID的条目</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2397" headers="d390030e2332 ">
                                    <p><code class="codeph">出口</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2397 d390030e2335 ">
                                    <p>退出shell模式</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2405" headers="d390030e2332 ">
                                    <p><code class="codeph">救命</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2405 d390030e2335 ">
                                    <p>列出可用命令</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>这些命令可以通过以下两种方式之一发出：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您可以从UNIX或DOS shell发出命令。此模式称为单行命令模式。</p>
                           </li>
                           <li>
                              <p>您可以输入<code class="codeph">agtctl</code>并显示<code class="codeph">AGTCTL&gt;</code>提示。然后，您可以从<code class="codeph">agtctl</code> shell中输入命令。此模式称为shell模式。
                              </p>
                           </li>
                        </ul>
                        <p><code class="codeph">agtctl</code>命令的语法和参数取决于它们的发布模式。
                        </p>
                        <div class="infoboxnote" id="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351__GUID-AF2A0F3E-5DE4-493F-AF9C-FA1786F26C44">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>所有命令都区分大小写。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">agtctl</code>实用程序将其控制文件放在由两个环境变量<code class="codeph">AGTCTL_ADMIN</code>或<code class="codeph">TNS_ADMIN</code>之一指定的目录中。确保至少设置了其中一个环境变量，并指定了代理可以访问的目录。
                                 </p>
                              </li>
                              <li>
                                 <p>如果多线程<code class="codeph">extproc</code>代理要求设置环境变量，或者在为专用模式下工作的代理配置<code class="codeph">listener.ora</code>条目时使用<code class="codeph">ENVS</code>参数，则必须在UNIX或DOS shell中设置所有必需的环境变量。运行<code class="codeph">agtctl</code>实用程序。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNOCI957"></a><div class="props_rev_3"><a id="GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A" name="GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A"></a><h4 id="LNOCI-GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A" class="sect4"><span class="enumeration_section">F.3.2</span>关于在单线命令模式下使用agtctl</h4>
                  <div>
                     <p>本节介绍<code class="codeph">agtctl</code>命令的<code class="codeph">agtctl</code> 。
                     </p>
                     <p>它们以单行命令模式呈现。</p>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-936FB274-B853-4C58-904E-099207584BA2" title="在启动代理之前，请设置多线程extproc代理的配置参数。">设置多线程extproc代理的配置参数</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-26D0058D-AA26-48D9-989E-F366C51D7E99" title="使用startup命令启动多线程extproc代理。">启动多线程extproc代理</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB" title="使用shutdown命令停止多线程extproc代理。">关闭多线程extproc代理</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020" title="要检查配置参数的值，请使用show命令。">检查配置参数的值</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB" title="您可以使用unset命令将配置参数重置为其默认值。">将配置参数重置为其默认值</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-AACD60F1-4FE4-4340-A846-193755EBA79E" title="delete命令从控制文件中删除指定SID的条目。">从控制文件中删除特定SID的条目</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-C1669A17-0568-403A-A388-85FBAA6DBE20" title="使用help命令查看agtctl的可用命令列表或查看特定命令的语法。">请求帮助</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI959"></a><a id="LNOCI960"></a><a id="LNOCI958"></a><div class="props_rev_3"><a id="GUID-936FB274-B853-4C58-904E-099207584BA2" name="GUID-936FB274-B853-4C58-904E-099207584BA2"></a><h5 id="LNOCI-GUID-936FB274-B853-4C58-904E-099207584BA2" class="sect5"><span class="enumeration_section">F.3.2.1</span>设置多线程extproc代理的配置参数</h5>
                     <div>
                        <p>在启动代理之前，请设置多线程<code class="codeph">extproc</code>代理的配置参数。
                        </p>
                        <div class="section">
                           <p>如果未特别设置配置参数，则使用默认值。配置参数及其默认值如<a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685" title="该表有3列。第1列是参数名称，第2列是其描述，第3列是默认值。">表F-2所示</a> 。
                           </p>
                           <p>使用<code class="codeph">set</code>命令设置多线程<code class="codeph">extproc</code>代理配置参数。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-936FB274-B853-4C58-904E-099207584BA2__GUID-AEF74EB6-16B9-48EB-873C-AF3CC04D9958">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl set <span class="italic">parameter</span> <span class="italic">parameter_value agent_sid</span>
</pre><p><span class="italic"><code class="codeph">parameter</code></span>是您正在设置的参数。
                           </p>
                           <p><span class="italic"><code class="codeph">parameter_value</code></span>是分配给该参数的值。
                           </p>
                           <p><span class="italic"><code class="codeph">agent_sid</code></span>是此代理服务的SID。必须为单行命令模式指定。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-936FB274-B853-4C58-904E-099207584BA2__GUID-E8B8311C-243E-4731-A8CA-A894A751EB0F">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl set max_dispatchers 5 salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI962"></a><a id="LNOCI963"></a><a id="LNOCI961"></a><div class="props_rev_3"><a id="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99" name="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99"></a><h5 id="LNOCI-GUID-26D0058D-AA26-48D9-989E-F366C51D7E99" class="sect5"><span class="enumeration_section">F.3.2.2</span>启动多线程extproc代理</h5>
                     <div>
                        <p>使用<code class="codeph">startup</code>命令启动多线程<code class="codeph">extproc</code>代理。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99__GUID-DB206A2C-A4B3-4418-8A4E-F29B85F44B47">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl启动extproc <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">agent_sid</code></span>是此多线程<code class="codeph">extproc</code>代理服务的SID。必须为单行命令模式指定。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99__GUID-D5134E8C-1B57-48F0-BCFD-7B0947724D05">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl启动extproc salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI965"></a><a id="LNOCI966"></a><a id="LNOCI964"></a><div class="props_rev_3"><a id="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB" name="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB"></a><h5 id="LNOCI-GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB" class="sect5"><span class="enumeration_section">F.3.2.3</span>关闭多线程extproc代理</h5>
                     <div>
                        <p>使用<code class="codeph">shutdown</code>命令停止多线程<code class="codeph">extproc</code>代理。
                        </p>
                        <div class="section">
                           <p>关闭有三种形式：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>正常（默认）</p>
                                 <p><code class="codeph">agtctl</code>要求多线程<code class="codeph">extproc</code>代理正常终止自身。所有会话完成当前操作，然后关闭。
                                 </p>
                              </li>
                              <li>
                                 <p>即时</p>
                                 <p><code class="codeph">agtctl</code>告诉多线程<code class="codeph">extproc</code>代理立即终止。无论当前会话的状态如何，代理都会立即退出。
                                 </p>
                              </li>
                              <li>
                                 <p>退出</p>
                                 <p>在没有与多线程<code class="codeph">extproc</code>代理进行通信的情况下， <code class="codeph">agtctl</code>发出系统调用来阻止它。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB__GUID-F26E13BE-41B2-4B37-8C09-E94C6045ABCD">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl shutdown [immediate | abort] <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">agent_sid</code></span>是多线程<code class="codeph">extproc</code>代理服务的SID。必须为单行命令模式指定。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB__GUID-095F9D77-B573-4C32-AD3E-309CB16E513C">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl shutdown immediate salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI968"></a><a id="LNOCI969"></a><a id="LNOCI967"></a><div class="props_rev_3"><a id="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020" name="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020"></a><h5 id="LNOCI-GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020" class="sect5"><span class="enumeration_section">F.3.2.4</span>检查配置参数的值</h5>
                     <div>
                        <p>要检查配置参数的值，请使用<code class="codeph">show</code>命令。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020__GUID-D7592730-42FB-4F67-83E2-F5C1D29A532A">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl show <span class="italic">parameter</span> <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">parameter</code></span>是您正在检查的参数。
                           </p>
                           <p><span class="italic"><code class="codeph">agent_sid</code></span>是此多线程<code class="codeph">extproc</code>代理服务的SID。必须为单行命令模式指定。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020__GUID-D3A821C0-F3CA-415A-9486-2264E1AFC3AF">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl show max_dispatchers salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI971"></a><a id="LNOCI972"></a><a id="LNOCI970"></a><div class="props_rev_3"><a id="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB" name="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB"></a><h5 id="LNOCI-GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB" class="sect5"><span class="enumeration_section">F.3.2.5</span>将配置参数重置为默认值</h5>
                     <div>
                        <p>您可以使用<code class="codeph">unset</code>命令将配置参数重置为其默认值。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB__GUID-6834B026-4EAC-4FAC-8F01-CFAC8DCBFEBC">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl unset <span class="italic">参数</span> <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">parameter</code></span>是您要重置（或更改）的参数。
                           </p>
                           <p><span class="italic"><code class="codeph">agent_sid</code></span>是此多线程<code class="codeph">extproc</code>代理服务的SID。必须为单行命令模式指定。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB__GUID-7C0D4D97-067A-4DBD-87D7-1877FCF47E71">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl unset max_dispatchers salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI974"></a><a id="LNOCI975"></a><a id="LNOCI973"></a><div class="props_rev_3"><a id="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E" name="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E"></a><h5 id="LNOCI-GUID-AACD60F1-4FE4-4340-A846-193755EBA79E" class="sect5"><span class="enumeration_section">F.3.2.6</span>从控制文件中删除特定SID的条目</h5>
                     <div>
                        <p><code class="codeph">delete</code>命令从控制文件中删除指定SID的条目。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E__GUID-FEDB3F4D-44D7-452F-8CD2-F286AC420E5D">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl删除<span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">agent_sid</code></span>是要删除的SID条目。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E__GUID-5C1B144A-D35B-4F8F-8B24-6E21E2470B4D">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl删除salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI977"></a><a id="LNOCI978"></a><a id="LNOCI976"></a><div class="props_rev_3"><a id="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20" name="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20"></a><h5 id="LNOCI-GUID-C1669A17-0568-403A-A388-85FBAA6DBE20" class="sect5"><span class="enumeration_section">F.3.2.7</span>请求帮助</h5>
                     <div>
                        <p>使用<code class="codeph">help</code>命令查看<code class="codeph">agtctl</code>的可用命令列表或查看特定命令的语法。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20__GUID-0ECE3EAC-3846-4723-9BA4-998B54F42220">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl help [ <span class="italic">command</span> ]</pre><p><span class="italic"><code class="codeph">command</code></span>是要查看其语法的命令的名称。默认为所有<code class="codeph">agtctl</code>命令。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20__GUID-3DD8C14C-5096-4A34-A4F4-5468009D63CE">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl帮助设置</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNOCI979"></a><div class="props_rev_3"><a id="GUID-C75B07CD-875C-40D0-B59E-4E83440BE424" name="GUID-C75B07CD-875C-40D0-B59E-4E83440BE424"></a><h4 id="LNOCI-GUID-C75B07CD-875C-40D0-B59E-4E83440BE424" class="sect4"><span class="enumeration_section">F.3.3</span>使用Shell模式命令</h4>
                  <div>
                     <p>发出<code class="codeph">AGTCTL&gt;</code>命令时，会产生提示<code class="codeph">AGTCTL&gt;</code> 。
                     </p>
                     <div class="section">
                        <p>在<a id="d390030e4520" class="indexterm-anchor"></a> shell模式，输入以下命令启动<code class="codeph">agtctl</code> ：</p><pre class="oac_no_warn" dir="ltr">agtctl</pre><p>此后，因为您要从<code class="codeph">agtctl</code> shell中发出命令，所以不需要在命令字符串前加上<code class="codeph">agtctl</code> 。
                        </p>
                        <p>输入以下命令设置代理SID的名称：</p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt; set agent_sid <span class="italic">agent_sid</span>
</pre><p>假定所有后续命令都是指定的SID，直到更改<code class="codeph">agent_sid</code>值。与单行命令模式不同，您不在命令字符串中指定<span class="italic"><code class="codeph">agent_sid</code></span> 。
                        </p>
                        <p>您可以按如下方式设置错误消息的语言：</p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt;设置语言<span class="italic">语言</span>
</pre><p>命令本身与单行命令模式的命令相同。要退出shell模式，请输入<code class="codeph">exit</code> 。
                        </p>
                        <div class="p">以下示例使用shell模式命令：<ul style="list-style-type:disc">
                              <li>
                                 <p><a href="multithreaded-extproc-agent.html#GUID-4795A79D-D5C0-428A-97AE-C0638691F960" title="如何设置shutdown_address配置参数的值。">示例：设置配置参数</a></p>
                              </li>
                              <li>
                                 <p><a href="multithreaded-extproc-agent.html#GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E" title="如何启动多线程extproc代理。">示例：启动多线程extproc代理</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNOCI980"></a><div class="props_rev_3"><a id="GUID-4795A79D-D5C0-428A-97AE-C0638691F960" name="GUID-4795A79D-D5C0-428A-97AE-C0638691F960"></a><h5 id="LNOCI-GUID-4795A79D-D5C0-428A-97AE-C0638691F960" class="sect5"><span class="enumeration_section">F.3.3.1</span>示例：设置配置参数</h5>
                     <div>
                        <p>如何设置<code class="codeph">shutdown_address</code>配置参数的值。
                        </p>
                        <div class="section">
                           <p>此示例为<code class="codeph">shutdown_address</code>配置参数设置值。
                           </p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt; set shutdown_address（address =（protocol = ipc）（key = oraDBsalesDB））</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI981"></a><div class="props_rev_3"><a id="GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E" name="GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E"></a><h5 id="LNOCI-GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E" class="sect5"><span class="enumeration_section">F.3.3.2</span>示例：启动多线程extproc代理</h5>
                     <div>
                        <p>如何启动多线程<code class="codeph">extproc</code>代理。
                        </p>
                        <div class="section">
                           <p>此示例启动多线程<code class="codeph">extproc</code>代理。
                           </p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt;启动extproc</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNOCI983"></a><a id="LNOCI984"></a><a id="LNOCI985"></a><a id="LNOCI986"></a><a id="LNOCI982"></a><div class="props_rev_3"><a id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874" name="GUID-94F87818-35D8-46F6-BDC9-C032782D3874"></a><h4 id="LNOCI-GUID-94F87818-35D8-46F6-BDC9-C032782D3874" class="sect4"><span class="enumeration_section">F.3.4</span>多线程extproc代理控制的配置参数</h4>
                  <div>
                     <p>多线程extproc代理控制的配置参数有什么作用？</p>
                     <div class="section">
                        <p><a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685" title="该表有3列。第1列是参数名称，第2列是其描述，第3列是默认值。">表F-2</a>描述并提供了代理控制实用程序的配置参数的默认值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685">
                        <p class="titleintable">表F-2 agtctl的配置参数</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="agtctl的配置参数" width="100%" border="1" summary="This table has 3 columns. Column 1 is the parameter name, column 2 is its description, and column 3 is the default value. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d390030e5191">参数</th>
                                 <th align="left" valign="bottom" width="26%" id="d390030e5194">描述</th>
                                 <th align="left" valign="bottom" width="44%" id="d390030e5197">默认值</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5202" headers="d390030e5191 ">
                                    <p><code class="codeph">MAX_DISPATCHERS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5202 d390030e5194 ">
                                    <p>最大调度员数量</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5202 d390030e5197 ">
                                    <p>1</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5213" headers="d390030e5191 ">
                                    <p><code class="codeph">tcp_dispatchers</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5213 d390030e5194 ">
                                    <p>监听TCP的调度员数量（其余使用IPC）</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5213 d390030e5197 ">
                                    <p>0</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5224" headers="d390030e5191 ">
                                    <p><code class="codeph">max_task_threads</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5224 d390030e5194 ">
                                    <p>最大任务线程数</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5224 d390030e5197 ">
                                    <p>2</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5235" headers="d390030e5191 ">
                                    <p><code class="codeph">MAX_SESSIONS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5235 d390030e5194 ">
                                    <p>每个任务线程的最大会话数</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5235 d390030e5197 ">
                                    <p>五</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5246" headers="d390030e5191 ">
                                    <p><code class="codeph">listener_address</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5246 d390030e5194 ">
                                    <p>听众正在收听的地址（注册时需要）</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5246 d390030e5197 "><pre class="oac_no_warn" dir="ltr">（ADDRESS_LIST =（ADDRESS =（PROTOCOL = IPC）（KEY = PNPKEY））（ADDRESS =（PROTOCOL = IPC）（KEY = <span class="italic">listener_sid</span> ））（ADDRESS =（PROTOCOL = TCP）（HOST = 127.0.0.1）（PORT = 1521） ）））</pre><p>注意： <span class="italic"><code class="codeph">listener_sid</code></span>是<span class="italic"><code class="codeph">listener_sid</code></span>正在<span class="italic"><code class="codeph">listener_sid</code></span>的Oracle数据库上的地址的IPC密钥。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5266" headers="d390030e5191 ">
                                    <p><code class="codeph">shutdown_address</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5266 d390030e5194 ">
                                    <p>地址代理用于与侦听器通信。这是代理侦听所有通信的地址，包括来自<code class="codeph">agtctl</code>关闭消息。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5266 d390030e5197 "><pre class="oac_no_warn" dir="ltr">（ADDRESS =（PROTOCOL = IPC）（KEY = <span class="italic">listener_sid</span> || <span class="italic">agent_sid</span> ））（ADDRESS =（PROTOCOL = TCP）（HOST = 127.0.0.1）（PORT = 1521））</pre><p>笔记：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="italic"><code class="codeph">agent_sid</code></span>是多线程<code class="codeph">extproc</code>代理的SID。
                                          </p>
                                       </li>
                                       <li>
                                          <p>||表示<span class="italic"><code class="codeph">listener_sid</code></span>和<span class="italic"><code class="codeph">agent_sid</code></span>连接成一个字符串。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-E372FB10-504F-42C8-97B6-8B5071C1AD66">max_dispatchers，tcp_dispatchers，max_task_threads和max_sessions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要提高性能，您可能需要更改部分或全部参数<code class="codeph">max_dispatchers</code> ， <code class="codeph">tcp_dispatchers</code> ， <code class="codeph">max_task_threads</code>和<code class="codeph">max_sessions</code> 。
                        </p>
                        <p>您可以使用以下公式计算<code class="codeph">max_dispatchers</code> ， <code class="codeph">tcp_dispatchers</code> ， <code class="codeph">max_task_threads</code>的最佳值：</p><pre class="oac_no_warn" dir="ltr">max_dispatchers = CEIL（ <span class="italic">x</span> / <span class="italic">y</span> ）tcp_dispatchers = CEIL（ <span class="italic">x_tcpip</span> / <span class="italic">y</span> ）max_task_threads = CEIL（ <span class="italic">x</span> / max_sessions）</pre><p>哪里：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CEIL</code>是一个SQL函数，它返回大于或等于其参数的最小整数。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">x</code></span>是可以同时连接到<code class="codeph">extproc</code>的最大会话数。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">y</code></span>是系统可以为每个调度程序支持的最大连接数。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">x_tcpip</code></span>是TCP / IP可以同时连接到<code class="codeph">extproc</code>的最大会话数。</p>
                              <p>（ <span class="italic"><code class="codeph">x</code></span> - <span class="italic"><code class="codeph">x_tcpip</code></span>是IPC可以同时连接到<code class="codeph">extproc</code>的最大会话数。）
                              </p>
                           </li>
                        </ul>
                        <p>没有用于计算<code class="codeph">max_sessions</code>的最佳值的<code class="codeph">max_sessions</code> ，这会影响<code class="codeph">max_task_threads</code> 。
                        </p>
                        <p>您必须根据硬件的功能微调这些参数设置，并确保并发线程不会耗尽您的操作系统。</p>
                        <p><code class="codeph">max_dispatchers</code>的值必须至少为1（这是默认值）。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-97B42414-7874-47B4-918F-2B629DAE30FC">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>可以同时连接到<code class="codeph">extproc</code> （ <code class="codeph">x</code> ）的最大会话数为650。
                              </p>
                           </li>
                           <li>
                              <p>TCP / IP（ <span class="italic"><code class="codeph">x_tcpip</code></span> ）可以同时连接到<code class="codeph">extproc</code>的最大会话数为400。
                              </p>
                              <p>（IPC可以同时连接到<code class="codeph">extproc</code>的最大会话数为650-400 = 250。）
                              </p>
                           </li>
                           <li>
                              <p>系统可为每个调度程序支持的最大连接数（ <span class="italic"><code class="codeph">y</code></span> ）为100。
                              </p>
                           </li>
                           <li>
                              <p>每个任务线程的最大会话数（ <code class="codeph">max_sessions</code> ）为20。
                              </p>
                           </li>
                        </ul>
                        <p>这些参数的最佳值为：</p><pre class="oac_no_warn" dir="ltr">max_dispatchers = CEIL（650/100）= CEIL（6.5）= 7 tcp_dispatchers = CEIL（400/100）= CEIL（4）= 4 max_task_threads = CEIL（650/20）= CEIL（32.5）= 33</pre><p>也就是说，最佳：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>调度员的最大数量是七。</p>
                           </li>
                           <li>
                              <p>七个调度员中有四个正在监听TCP / IP，其余三个正在监听IPC。</p>
                           </li>
                           <li>
                              <p>最大任务线程数为33。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-DC265E0F-776D-4563-800C-A15051E84FCF">listener_address和shutdown_address</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>配置参数<code class="codeph">listener_address</code>和<code class="codeph">shutdown_address</code>的值由<code class="codeph">ADDRESS</code>指定，如<a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685" title="该表有3列。第1列是参数名称，第2列是其描述，第3列是默认值。">表F-2</a>和<a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8__BEJGACBC">示例F-1所示</a> 。在<code class="codeph">ADDRESS</code> ，您可以指定参数<code class="codeph">HOST</code> ，它可以是IPv6或IPv4地址或主机名。如果<code class="codeph">HOST</code>是主机名，则可选<code class="codeph">ADDRESS</code>参数<code class="codeph">IP</code>这些值是相关的：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-ED9A3503-2CED-4A16-AF3E-B655290C28DE">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists the IP values that are relevant when HOST is a host name, and gives their meanings." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d390030e5520">IP价值</th>
                                 <th align="left" valign="bottom" width="83%" id="d390030e5523">含义</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e5528" headers="d390030e5520 ">
                                    <p><code class="codeph">第一</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e5528 d390030e5523 ">
                                    <p>侦听主机名DNS解析返回的第一个IP地址。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e5536" headers="d390030e5520 ">
                                    <p><code class="codeph">V4_ONLY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e5536 d390030e5523 ">
                                    <p>仅侦听系统中的IPv4接口。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e5544" headers="d390030e5520 ">
                                    <p><code class="codeph">V6_ONLY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e5544 d390030e5523 ">
                                    <p>仅侦听系统中的IPv6接口。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>例如， <code class="codeph">listener_address</code>或<code class="codeph">shutdown_address</code>值将其限制为IPv6接口：</p><pre class="oac_no_warn" dir="ltr">“（ADDRESS =（PROTOCOL = tcp）（主机=销售额）（PORT = 1521） <span class="bold">（IP = V6_ONLY）</span> ）”</pre><div class="infoboxnotealso" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-743DB926-8EC4-4A59-AC35-FF75948C7E81">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../netag/understanding-communication-layers.html#NETAG999" target="_blank"><span><cite>有关Oracle数据库中</cite></span></a> IPv6支持的详细信息，请参见<a href="../netag/understanding-communication-layers.html#NETAG999" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>